import{cF as H,aC as N,gF as k,aR as z}from"./main-B5_XOOwi.js";import{P as I,r as x,A as _,_ as l,o as F,g as L,c as M,u as Q,H as V}from"./vec32-DACfXE6P.js";import"./vec42-CKs01hkn.js";import{e as J}from"./mat3f64-q3fE-ZOt.js";import{e as K}from"./mat4f64-CSKppSlJ.js";import{e as W}from"./quatf64-aQ5IuZRd.js";import{n as Y}from"./vec2f64-B7N_6o8F.js";import{n as Z}from"./vec4f64-CMoMXWBi.js";function X(t,r){return I(t,r)/x(t)}function _t(t,r){const e=I(t,r)/(x(t)*x(r));return-H(e)}function Mt(t,r,e){_(P,t),_(v,r);const n=I(P,v),i=H(n),o=l(P,P,v);return I(o,e)<0?2*Math.PI-i:i}const P=N(),v=N();let m=class E{constructor(r){this._create=r,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&k(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const r=2*this._itemsPtr;this._items.length>r&&(this._items.length=r),this._itemsPtr=0}static createVec2f64(){return new E(Y)}static createVec3f64(){return new E(N)}static createVec4f64(){return new E(Z)}static createMat3f64(){return new E(J)}static createMat4f64(){return new E(K)}static createQuatf64(){return new E(W)}get test(){}};const mt=m.createVec2f64(),f=m.createVec3f64(),B=m.createVec4f64();m.createMat3f64();const St=m.createMat4f64(),$t=m.createQuatf64();function gt(t){const r=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],n=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(r,e,n))}function Dt(t,r){const e=Math.sqrt(r[0]*r[0]+r[4]*r[4]+r[8]*r[8]),n=Math.sqrt(r[1]*r[1]+r[5]*r[5]+r[9]*r[9]),i=Math.sqrt(r[2]*r[2]+r[6]*r[6]+r[10]*r[10]);return F(t,e,n,i),t}function G(t,r,e){Math.abs(t[0])>Math.abs(t[1])?F(r,0,1,0):F(r,1,0,0),l(e,t,r),l(r,e,t),_(e,e),_(r,r)}function y(t=g){return[t[0],t[1],t[2],t[3]]}function Ot(t=g[0],r=g[1],e=g[2],n=g[3]){return j(t,r,e,n,B.get())}function tt(t,r){return j(r[0],r[1],r[2],r[3],t)}function Pt(t){return t}function j(t,r,e,n,i=y()){return i[0]=t,i[1]=r,i[2]=e,i[3]=n,i}function rt(t,r,e){const n=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function et(t,r,e,n=y()){const i=e[0]-r[0],o=e[1]-r[1],a=e[2]-r[2],c=t[0]-r[0],D=t[1]-r[1],O=t[2]-r[2],S=o*O-a*D,R=a*c-i*O,b=i*D-o*c,q=S*S+R*R+b*b,w=Math.abs(q-1)>1e-5&&q>1e-12?1/Math.sqrt(q):1;return n[0]=S*w,n[1]=R*w,n[2]=b*w,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function nt(t,r,e,n=0,i=Math.floor(e*(1/3)),o=Math.floor(e*(2/3))){if(e<3)return!1;r($,n);let a=i,c=!1;for(;a<e-1&&!c;)r(T,a),a++,c=!V($,T);if(!c)return!1;for(a=Math.max(a,o),c=!1;a<e&&!c;)r(h,a),a++,M(C,$,T),_(C,C),M(U,T,h),_(U,U),c=!V($,h)&&!V(T,h)&&Math.abs(I(C,U))<it;return c?(et($,T,h,t),!0):(n!==0||i!==1||o!==2)&&nt(t,r,e,0,1,2)}const it=.99619469809,$=N(),T=N(),h=N(),C=N(),U=N();function Ct(t,r,e){return r!==t&&tt(t,r),t[3]=-I(t,e),t}function Ut(t,r,e,n){return l(h,r,t),rt(e,h,n)}function lt(t,r,e,n){return p(A(t,r,M(f.get(),e,r),at,n))}function Ft(t,r,e){return r!=null&&p(A(t,r.origin,r.direction,ot,e))}function pt(t,r,e){return p(A(t,r.origin,r.vector,u.NONE,e))}function At(t,r,e){return p(A(t,r.origin,r.vector,u.CLAMP,e))}function Rt(t,r){return d(t,r)>=0}function bt(t,r,e){const n=L(f.get(),t,-t[3]),i=ct(t,M(f.get(),r,n),f.get());return Q(e,i,n),e}function qt(t,r,e,n){const i=t,o=f.get(),a=f.get();G(i,o,a);const c=M(f.get(),e,r),D=X(o,c),O=X(a,c),S=X(i,c);return F(n,D,O,S)}function ct(t,r,e){const n=L(f.get(),t,I(t,r));return M(e,r,n),e}function wt(t,r){return Math.abs(d(t,r))}function d(t,r){return I(t,r)+t[3]}var s;function p(t){return t===s.INTERSECTS_INSIDE_OUT||t===s.INTERSECTS_OUTSIDE_IN}function A(t,r,e,n,i){const o=I(t,e),a=d(t,r);if(o===0)return a>=0?s.INSIDE:s.OUTSIDE;let c=-a/o;return n&u.CLAMP&&(c=z(c,0,1)),!(n&u.INFINITE_MIN)&&c<0||!(n&u.INFINITE_MAX)&&c>1?a>=0?s.INSIDE:s.OUTSIDE:(Q(i,r,L(i,e,c)),a>=0?s.INTERSECTS_INSIDE_OUT:s.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(s||(s={}));const g=[0,0,1,0];var u;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(u||(u={}));const at=u.INFINITE_MIN|u.INFINITE_MAX,ot=u.INFINITE_MAX;export{Ot as D,bt as H,qt as J,y as M,Pt as O,Ut as P,wt as Q,j as U,d as V,St as a,_t as b,f as c,G as d,X as f,Dt as g,tt as h,lt as k,rt as l,gt as m,$t as o,et as p,pt as q,B as r,mt as t,Mt as u,nt as v,At as w,Ft as x,Ct as y,Rt as z};
