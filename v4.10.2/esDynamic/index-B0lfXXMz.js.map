{"version":3,"file":"index-B0lfXXMz.js","sources":["../../src/fixtures/export-timestamp/index.ts"],"sourcesContent":["import { fabric } from 'fabric';\nimport merge from 'deepmerge';\n\nimport { FixtureInstance } from '@/api/internal';\nimport type { ExportAPI, ExportSubFixture } from '@/fixtures/export/api/export';\nimport type { ExportConfig } from '../export/store';\n\nclass ExportTimestampFixture extends FixtureInstance implements ExportSubFixture {\n    get config(): any {\n        const fixtureConfig: ExportConfig | undefined = this.$iApi.fixture.get<ExportAPI>('export').config;\n        return fixtureConfig?.timestamp;\n    }\n\n    make(options?: any): Promise<fabric.Object> {\n        const timestampFixtureConfig: any = this.config;\n\n        const fabricTextConfig: any = {\n            text: new Date().toLocaleString('en-CA'),\n            fontFamily: 'Montserrat, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif',\n            fill: '#000',\n            fontSize: 20,\n            top: 0,\n            left: 0,\n            originX: 'left'\n        };\n\n        if (timestampFixtureConfig?.value !== undefined) {\n            fabricTextConfig.text = timestampFixtureConfig.value;\n        }\n\n        const config: any = merge(fabricTextConfig, options || {});\n        const fbTimestamp = new fabric.Textbox(config.text, config);\n        return Promise.resolve(fbTimestamp);\n    }\n}\n\nexport default ExportTimestampFixture;\n"],"names":["ExportTimestampFixture","FixtureInstance","options","timestampFixtureConfig","fabricTextConfig","config","merge","fbTimestamp","fabric"],"mappings":";;AAOA,MAAMA,UAA+BC,EAA4C;AAAA,EAC7E,IAAI,SAAc;AAEd,WADgD,KAAK,MAAM,QAAQ,IAAe,QAAQ,EAAE,QACtE;AAAA,EAAA;AAAA,EAG1B,KAAKC,GAAuC;AACxC,UAAMC,IAA8B,KAAK,QAEnCC,IAAwB;AAAA,MAC1B,OAAM,oBAAI,QAAO,eAAe,OAAO;AAAA,MACvC,YAAY;AAAA,MACZ,MAAM;AAAA,MACN,UAAU;AAAA,MACV,KAAK;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAEI,IAAAD,GAAwB,UAAU,WAClCC,EAAiB,OAAOD,EAAuB;AAGnD,UAAME,IAAcC,EAAMF,GAAkBF,KAAW,CAAA,CAAE,GACnDK,IAAc,IAAIC,EAAA,OAAO,QAAQH,EAAO,MAAMA,CAAM;AACnD,WAAA,QAAQ,QAAQE,CAAW;AAAA,EAAA;AAE1C;"}