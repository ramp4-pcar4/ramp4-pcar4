{"version":3,"file":"executeQueryPBF-o8010HS9.js","sources":["../../node_modules/@arcgis/core/rest/query/executeForExtent.js","../../node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js","../../node_modules/@arcgis/core/rest/query/executeQueryPBF.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{parseUrl as t}from\"../utils.js\";import{executeQueryForExtent as o}from\"./operations/query.js\";import r from\"../support/Query.js\";import m from\"../../geometry/Extent.js\";async function n(n,a,e){const i=t(n),s=await o(i,r.from(a),{...e}),u=s.data.extent;return!u||isNaN(u.xmin)||isNaN(u.ymin)||isNaN(u.xmax)||isNaN(u.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:m.fromJSON(u)}}export{n as executeForExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{assertIsSome as e}from\"../../../core/maybe.js\";import{getGeometryZScaler as t}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as r,convertToGeometry as s}from\"../../../layers/graphics/featureConversionUtils.js\";function o(e,t){return t}function i(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):l(e,t+s,1)}}function n(e,t,r,s){return 2===r?u(e,t,2):i(e,t,r,s)}function a(e,t,r,s){return 2===r?0===t?0:u(e,t,3):i(e,t,r,s)}function h(e,t,r,s){return 3===r?0===t?0:u(e,t,3):n(e,t,r,s)}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class d{constructor(e){this._options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=o,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=t(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=r)for(const t of e.features)r(t.geometry)}createSpatialReference(){return{}}addField(t,r){const s=t.fields;e(s),s.push(r);const o=s.map((e=>e.name));this._attributesConstructor=function(){for(const e of o)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=r(o.clone(),o,!1,!1,this._transform),a=s(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const s=this._transform;switch(t=this._applyTransform(s,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const s=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(s,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:i}}export{d as JSONFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t){const s=await n(r,a.from(e),t);return o.fromJSON(s)}async function n(o,s,n){const p=r(o),i={...n},u=a.from(s),m=!u.quantizationParameters,{data:f}=await t(p,u,new e({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}export{s as executeQueryPBF,n as executeRawQueryPBF};\n"],"names":["n","a","i","t","o","r","u","m","e","s","l","h","d","p","f"],"mappings":"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","x_google_ignoreList":[0,1,2]}