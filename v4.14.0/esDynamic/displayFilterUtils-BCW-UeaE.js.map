{"version":3,"file":"displayFilterUtils-BCW-UeaE.js","sources":["../../node_modules/@arcgis/core/layers/support/displayFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{floatGreaterThan as e,floatLessThan as n,floatEqualAbsolute as t,floatGreaterThanOrEqual as r}from\"../../core/mathUtils.js\";import{sqlOr as o}from\"../../core/sql.js\";function i(e,n){return{...n,filterMode:e.mode}}function u(e,n){return l(e,n).next().value??null}function c(t,r,i){const u=f(t);if(u&&(e(r,u[0])||n(i,u[1])))return\"\";const c=Array.from(l(t,r,i)),m=a(c,r,i)?\"1=1\":c.map(e=>e.where||\"1=1\").reduce((e,n)=>o(e,n),\"\");return m&&\"1=1\"!==m?m:\"\"}function f(e){if(\"manual\"===s(e))return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:r}of e.filters)n[0]=Math.max(n[0],I(t)),n[1]=Math.min(n[1],d(r));return n}function*l(e,n,t){if(\"manual\"===s(e)){const n=e.filters.find(n=>n.id===e.activeFilterId);n&&(yield n)}else{\"object\"==typeof n&&(n=n.scale);for(const r of e.filters)m(r.minScale,r.maxScale,n,t)&&(yield r)}}function a(t,r,o){if(0===t.length)return!0;const i=I(t.at(0)?.minScale),u=d(t.at(-1)?.maxScale);if(n(i,r)||e(u,o))return!0;for(let e=0;e<t.length-1;e++){const r=t[e],o=t[e+1];if(n(I(o.minScale),d(r.maxScale)))return!0}return!1}function m(e,n,o,i){return e=I(e),o=I(o),n=d(n),!(!t(o,e)&&(i??o)>e)&&(!r(n,o)&&(void 0===i||!t(i,e)))}function s(e){return\"mode\"in e?e.mode:e.filterMode}function I(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}export{i as createDisplayFilterJSONContext,c as getClauseForScaleRange,u as getEffectiveDisplayFilter};\n"],"names":["i","e","n","u","l","c","t","r","f","m","a","o","s","I","d"],"mappings":";AAI6K,SAASA,EAAEC,GAAEC,GAAE;AAAC,SAAM,EAAC,GAAGA,GAAE,YAAWD,EAAE,KAAI;AAAC;AAAC,SAASE,EAAEF,GAAEC,GAAE;AAAC,SAAOE,EAAEH,GAAEC,CAAC,EAAE,KAAI,EAAG,SAAO;AAAI;AAAC,SAASG,EAAEC,GAAEC,GAAEP,GAAE;AAAC,QAAMG,IAAEK,EAAEF,CAAC;AAAE,MAAGH,MAAIF,EAAEM,GAAEJ,EAAE,CAAC,CAAC,KAAGD,EAAEF,GAAEG,EAAE,CAAC,CAAC,GAAG,QAAM;AAAG,QAAM,IAAE,MAAM,KAAKC,EAAEE,GAAEC,GAAEP,CAAC,CAAC,GAAES,IAAEC,EAAE,GAAEH,GAAEP,CAAC,IAAE,QAAM,EAAE,IAAI,CAAAC,MAAGA,EAAE,SAAO,KAAK,EAAE,OAAO,CAACA,GAAEC,MAAIS,EAAEV,GAAEC,CAAC,GAAE,EAAE;AAAE,SAAOO,KAAWA,MAAR,QAAUA,IAAE;AAAE;AAAC,SAASD,EAAEP,GAAE;AAAC,MAAcW,EAAEX,CAAC,MAAd,SAAgB,QAAO;AAAK,QAAMC,IAAE,CAAC,OAAO,mBAAkB,OAAO,iBAAiB;AAAE,aAAS,EAAC,UAAS,GAAE,UAASK,EAAC,KAAIN,EAAE,QAAQ,CAAAC,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEW,EAAE,CAAC,CAAC,GAAEX,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEY,EAAEP,CAAC,CAAC;AAAE,SAAOL;AAAC;AAAC,UAASE,EAAEH,GAAEC,GAAE,GAAE;AAAC,MAAcU,EAAEX,CAAC,MAAd,UAAgB;AAAC,UAAMC,IAAED,EAAE,QAAQ,KAAK,CAAAC,MAAGA,EAAE,OAAKD,EAAE,cAAc;AAAE,IAAAC,MAAI,MAAMA;AAAA,EAAE,OAAK;AAAC,IAAU,OAAOA,KAAjB,aAAqBA,IAAEA,EAAE;AAAO,eAAUK,KAAKN,EAAE,QAAQ,CAAAQ,EAAEF,EAAE,UAASA,EAAE,UAASL,GAAE,CAAC,MAAI,MAAMK;AAAA,EAAE;AAAC;AAAC,SAASG,EAAEJ,GAAE,GAAEK,GAAE;AAAC,MAAOL,EAAE,WAAN,EAAa,QAAM;AAAG,QAAMN,IAAEa,EAAEP,EAAE,GAAG,CAAC,GAAG,QAAQ,GAAEH,IAAEW,EAAER,EAAE,GAAG,EAAE,GAAG,QAAQ;AAAE,MAAGJ,EAAEF,GAAE,CAAC,KAAGC,EAAEE,GAAEQ,CAAC,EAAE,QAAM;AAAG,WAAQV,IAAE,GAAEA,IAAEK,EAAE,SAAO,GAAEL,KAAI;AAAC,UAAMM,IAAED,EAAEL,CAAC,GAAE,IAAEK,EAAEL,IAAE,CAAC;AAAE,QAAGC,EAAEW,EAAE,EAAE,QAAQ,GAAEC,EAAEP,EAAE,QAAQ,CAAC,EAAE;EAAQ;AAAC,SAAM;AAAE;AAAC,SAASE,EAAER,GAAEC,GAAES,GAAEX,GAAE;AAAC,SAAOC,IAAEY,EAAEZ,CAAC,GAAEU,IAAEE,EAAEF,CAAC,GAAET,IAAEY,EAAEZ,CAAC,GAAE,EAAE,CAACI,EAAEK,GAAEV,CAAC,MAAID,KAAGW,KAAGV,MAAK,CAACM,EAAEL,GAAES,CAAC,MAAaX,MAAT,UAAY,CAACM,EAAEN,GAAEC,CAAC;AAAG;AAAC,SAASW,EAAEX,GAAE;AAAC,SAAM,UAASA,IAAEA,EAAE,OAAKA,EAAE;AAAU;AAAC,SAASY,EAAEZ,GAAE;AAAC,SAAOA,KAAG,OAAO;AAAiB;AAAC,SAASa,EAAEb,GAAE;AAAC,SAAOA,KAAG;AAAC;","x_google_ignoreList":[0]}