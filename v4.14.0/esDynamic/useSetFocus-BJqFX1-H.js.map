{"version":3,"file":"useSetFocus-BJqFX1-H.js","sources":["../../node_modules/@esri/calcite-components/dist/chunks/component.js","../../node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { l as logger } from \"./logger.js\";\nfunction getIconScale(componentScale) {\n  return componentScale === \"l\" ? \"m\" : \"s\";\n}\nfunction warnIfMissingRequiredProp(component, newProp, deprecatedProp) {\n  if (!component[newProp] && !component[deprecatedProp]) {\n    logger.warn(`[${component.el.localName}] \"${newProp.toString()}\" or \"${deprecatedProp.toString()}\" is required.`);\n  }\n}\nfunction isHidden(el) {\n  return el.hidden || el.itemHidden;\n}\nasync function componentFocusable(component) {\n  await component.componentOnReady();\n  await component.updateComplete;\n}\nexport {\n  componentFocusable as c,\n  getIconScale as g,\n  isHidden as i,\n  warnIfMissingRequiredProp as w\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { makeGenericController } from \"@arcgis/lumina/controllers\";\nimport { c as componentFocusable } from \"./component.js\";\nimport { k as getRootNode, b as focusElement } from \"./dom.js\";\nconst useSetFocus = () => {\n  return makeGenericController((component, controller) => {\n    let abortController;\n    function handleFocusOut() {\n      abortController?.abort();\n    }\n    controller.onLoad(() => {\n      component.listen(\"focus\", () => {\n        abortController = new AbortController();\n        component.el.addEventListener(\"focusout\", handleFocusOut, { signal: abortController.signal });\n      });\n    });\n    controller.onDisconnected(() => {\n      component.el.removeEventListener(\"focusout\", handleFocusOut);\n    });\n    return async (getFocusTarget, options) => {\n      if (component.disabled) {\n        return;\n      }\n      const focusConfig = toFocusConfig(getFocusTarget());\n      if (!focusConfig) {\n        return;\n      }\n      const { target, includeContainer, strategy } = focusConfig;\n      const rootNode = getRootNode(component.el);\n      const currentActiveElement = rootNode.activeElement;\n      await componentFocusable(component);\n      const focusAlreadyChanged = currentActiveElement !== rootNode.activeElement;\n      if (focusAlreadyChanged || abortController && !abortController?.signal.aborted) {\n        return;\n      }\n      component.el.removeEventListener(\"focus\", handleFocusOut);\n      return focusElement(target, includeContainer, strategy, component.el, options);\n    };\n  });\n};\nfunction isFocusOverride(focusTarget) {\n  return \"target\" in focusTarget && (\"includeContainer\" in focusTarget || \"strategy\" in focusTarget);\n}\nfunction toFocusConfig(focusTarget) {\n  if (!focusTarget) {\n    return;\n  }\n  return isFocusOverride(focusTarget) ? focusTarget : { target: focusTarget };\n}\nexport {\n  useSetFocus as u\n};\n"],"names":["getIconScale","componentScale","componentFocusable","component","useSetFocus","makeGenericController","controller","abortController","handleFocusOut","getFocusTarget","options","focusConfig","toFocusConfig","target","includeContainer","strategy","rootNode","getRootNode","currentActiveElement","focusElement","isFocusOverride","focusTarget"],"mappings":";;;AAIA,SAASA,EAAaC,GAAgB;AACpC,SAAOA,MAAmB,MAAM,MAAM;AACxC;AASA,eAAeC,EAAmBC,GAAW;AAC3C,QAAMA,EAAU,iBAAgB,GAChC,MAAMA,EAAU;AAClB;ACZK,MAACC,IAAc,MACXC,EAAsB,CAACF,GAAWG,MAAe;AACtD,MAAIC;AACJ,WAASC,IAAiB;AACxB,IAAAD,GAAiB,MAAK;AAAA,EACxB;AACA,SAAAD,EAAW,OAAO,MAAM;AACtB,IAAAH,EAAU,OAAO,SAAS,MAAM;AAC9B,MAAAI,IAAkB,IAAI,gBAAe,GACrCJ,EAAU,GAAG,iBAAiB,YAAYK,GAAgB,EAAE,QAAQD,EAAgB,QAAQ;AAAA,IAC9F,CAAC;AAAA,EACH,CAAC,GACDD,EAAW,eAAe,MAAM;AAC9B,IAAAH,EAAU,GAAG,oBAAoB,YAAYK,CAAc;AAAA,EAC7D,CAAC,GACM,OAAOC,GAAgBC,MAAY;AACxC,QAAIP,EAAU;AACZ;AAEF,UAAMQ,IAAcC,EAAcH,GAAgB;AAClD,QAAI,CAACE;AACH;AAEF,UAAM,EAAE,QAAAE,GAAQ,kBAAAC,GAAkB,UAAAC,EAAQ,IAAKJ,GACzCK,IAAWC,EAAYd,EAAU,EAAE,GACnCe,IAAuBF,EAAS;AAGtC,QAFA,MAAMd,EAAmBC,CAAS,GAE9B,EADwBe,MAAyBF,EAAS,iBACnCT,KAAmB,CAACA,GAAiB,OAAO;AAGvE,aAAAJ,EAAU,GAAG,oBAAoB,SAASK,CAAc,GACjDW,EAAaN,GAAQC,GAAkBC,GAAUZ,EAAU,IAAIO,CAAO;AAAA,EAC/E;AACF,CAAC;AAEH,SAASU,EAAgBC,GAAa;AACpC,SAAO,YAAYA,MAAgB,sBAAsBA,KAAe,cAAcA;AACxF;AACA,SAAST,EAAcS,GAAa;AAClC,MAAKA;AAGL,WAAOD,EAAgBC,CAAW,IAAIA,IAAc,EAAE,QAAQA,EAAW;AAC3E;","x_google_ignoreList":[0,1]}