{"version":3,"file":"tiles3DUtils-D1ZZJnSG.js","sources":["../../node_modules/@arcgis/core/layers/support/tiles3DUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as e}from\"../../core/mathUtils.js\";import{e as t,g as r,t as n,d as o,A as i,z as s,a as m}from\"../../chunks/vec32.js\";import{fromValues as a,create as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{WGS84ECEFSpatialReferenceLike as l}from\"../../geometry/ellipsoidUtils.js\";import c from\"../../geometry/Extent.js\";import f from\"../../geometry/HeightModelInfo.js\";import x from\"../../geometry/SpatialReference.js\";import{projectBuffer as g}from\"../../geometry/projection/projectBuffer.js\";function u(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const r of e)if(\"number\"!=typeof r)return!1;return!0}const d=7645211,p={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},S=new Map([[5773,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM96_Geoid\"})],[3855,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM2008_Geoid\"})],[115700,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"WGS_1984\"})],[115701,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"ETRS_1989\"})],[6360,new f({heightModel:\"gravity-related-height\",heightUnit:\"us-feet\",vertCRS:\"NAVD88_height_(ftUS)\"})],[7837,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"DHHN2016_(height) \"})]]);function _(e){if(!e)return null;const t=e.vcsWkid||e.latestVcsWkid;return t?S.get(t):null}function R(e){return!(!(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)||!e.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function E(f,S=!1){let _=new x({wkid:4326,vcsWkid:115700}),R=f.root?.boundingVolume,E=!1,b=f?.root?.transform;if(S&&(f.extensions?.ESRI_crs?.wkid||f.extensions?.ESRI_crs?.latestWkid||f.extensions?.ESRI_crs?.wkt)&&(f.root?.extensions?.ESRI_crs?.boundingVolume?.box||f.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))_=new x(f.extensions?.ESRI_crs),R=f.root?.extensions?.ESRI_crs?.boundingVolume,b=f.root?.transform,E=!0;else if(!R)return new c(-180,-90,180,90,_);if(R.box){const e=R?.box;if(e[3]>d&&e[7]>d&&e[11]>d)return new c({...p,spatialReference:_})}const w=h();if(!E&&R.region&&u(R.region,6)){const t=R.region,r=e(t[0]),n=e(t[1]),o=t[4],i=e(t[2]),s=e(t[3]),m=t[5];return new c({xmin:r,ymin:n,zmin:o,xmax:i,ymax:s,zmax:m,spatialReference:_})}if(R.sphere&&u(R.sphere,4)){const e=R.sphere,m=a(e[0],e[1],e[2]),f=e[3]/Math.sqrt(3),d=h();t(d,m,a(f,f,f));const p=h();if(r(p,m,a(f,f,f)),b&&u(b,16)){const e=b;n(w,d,e),o(d,w),n(w,p,e),o(p,w)}E||(g(d,l,0,d,x.WGS84,0),g(p,l,0,p,x.WGS84,0));const S=h(),y=h();return i(S,d,p),s(y,d,p),new c({xmin:S[0],ymin:S[1],zmin:S[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:_})}if(R.box&&u(R.box,12)){const e=R.box,t=a(e[0],e[1],e[2]),o=a(e[3],e[4],e[5]),f=a(e[6],e[7],e[8]),d=a(e[9],e[10],e[11]),p=[];for(let r=0;r<8;++r)p.push(h());if(r(p[0],t,o),r(p[0],p[0],f),r(p[0],p[0],d),m(p[1],t,o),r(p[1],p[1],f),r(p[1],p[1],d),r(p[2],t,o),m(p[2],p[2],f),r(p[2],p[2],d),m(p[3],t,o),m(p[3],p[3],f),r(p[3],p[3],d),r(p[4],t,o),r(p[4],p[4],f),m(p[4],p[4],d),m(p[5],t,o),r(p[5],p[5],f),m(p[5],p[5],d),r(p[6],t,o),m(p[6],p[6],f),m(p[6],p[6],d),m(p[7],t,o),m(p[7],p[7],f),m(p[7],p[7],d),b&&u(b,16)){const e=b;for(let t=0;t<8;++t)n(p[t],p[t],e)}const S=a(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),w=a(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let r=0;r<8;++r)E||g(p[r],l,0,p[r],x.WGS84,0),i(w,w,p[r]),s(S,S,p[r]);return new c({xmin:w[0],ymin:w[1],zmin:w[2],xmax:S[0],ymax:S[1],zmax:S[2],spatialReference:_})}return new c(-180,-90,180,90,_)}export{_ as getHeightModelInfoFromVCS,R as hasEsriCrs,E as initFullExtent,u as verifyArray};\n"],"names":["u","e","t","r","d","p","f","R","E","S","_","x","b","c","h","n","o","s","m","a","g","l","y","i","w"],"mappings":"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","x_google_ignoreList":[0]}