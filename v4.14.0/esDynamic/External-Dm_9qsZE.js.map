{"version":3,"file":"External-Dm_9qsZE.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport s from\"../../../request.js\";import{equals as t}from\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as r,getMimeTypeOrFilenameFormatId as a}from\"../../../layers/support/infoFor3D.js\";class i{constructor(s,t,e){this.assetName=s,this.assetMimeType=t,this.parts=e}equals(s){return this===s||this.assetName===s.assetName&&this.assetMimeType===s.assetMimeType&&t(this.parts,s.parts,(s,t)=>s.equals(t))}isOnService(s){return this.parts.every(t=>t.isOnService(s))}makeHash(){let s=\"\";for(const t of this.parts)s+=t.partHash;return s}async toBlob(s){const{parts:t}=this;if(1===t.length)return t[0].toBlob(s);const r=await Promise.all(t.map(t=>t.toBlob(s)));return e(s),new Blob(r)}}class n{constructor(s,t){this.partUrl=s,this.partHash=t}equals(s){return this===s||this.partUrl===s.partUrl&&this.partHash===s.partHash}isOnService(s){return this.partUrl.startsWith(`${s.path}/assets/`)}async toBlob(t){const{data:r}=await s(this.partUrl,{responseType:\"blob\"});return e(t),r}}function o(s){return l(s?.source)}const c=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,u=/\\.(gltf|glb)/i;function l(s){switch(s?.type){case\"client\":return Array.isArray(s.files)?s.files.some(p):p(s.files);case\"service\":return s.assets.some(p);case\"loadable\":return!0;default:return!1}}function p(s){if(s instanceof File){const{type:t,name:e}=s;return c.test(t)||u.test(e)}return c.test(s.assetMimeType)||u.test(s.assetName)}function f(s,t){if(!s)return!1;const{source:e}=s;return h(e,t)}function m(s,t){if(s===t)return!0;const{source:e}=s,{source:r}=t;if(e===r)return!0;if(\"service\"===e.type&&\"service\"===r.type){if(e.assets.length!==r.assets.length)return!1;const s=(s,t)=>s.assetName<t.assetName?-1:s.assetName>t.assetName?1:0,t=[...e.assets].sort(s),a=[...r.assets].sort(s);for(let e=0;e<t.length;++e)if(!t[e].equals(a[e]))return!1;return!0}return!1}function h(s,t){return\"service\"===s.type&&s.assets.every(s=>s.isOnService(t))}function y(s,t){return s instanceof File?r(s,t):a(s.assetMimeType,s.assetName,t)}function b(s){switch(s.type){case\"client\":return Array.isArray(s.files)?s.files:[s.files];case\"service\":return s.assets;case\"loadable\":return}}function v(s){return!!s.original}export{i as ServiceAsset,n as ServiceAssetPart,y as assetFormatId,f as externalIsOnService,b as externalSourceToMultiPart,m as externalSourcesAreEqual,p as isDisplayAsset,o as isDisplayExternal,l as isDisplaySource,v as isOriginalExternal};\n"],"names":["i","s","t","e","n","r","o","l","c","u","p","f","h","m","a","y","b","v"],"mappings":"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","x_google_ignoreList":[0]}