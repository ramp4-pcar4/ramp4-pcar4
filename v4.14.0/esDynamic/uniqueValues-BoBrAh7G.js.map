{"version":3,"file":"uniqueValues-BoBrAh7G.js","sources":["../../node_modules/@arcgis/core/smartMapping/support/binningUtils.js","../../node_modules/@arcgis/core/smartMapping/statistics/support/WorkerClient.js","../../node_modules/@arcgis/core/rest/query/executeQuery.js","../../node_modules/@arcgis/core/rest/generateRenderer.js","../../node_modules/@arcgis/core/rest/support/GenerateRendererParameters.js","../../node_modules/@arcgis/core/rest/support/UniqueValueDefinition.js","../../node_modules/@arcgis/core/smartMapping/statistics/support/predominanceUtils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/LayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/utils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/histogramUtils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/InMemoryLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/FeatureLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/CSVLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/FeatureLayerBinningAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/SceneLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/PointCloudLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/StreamLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/layerUtils.js","../../node_modules/@arcgis/core/smartMapping/statistics/uniqueValues.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";const e=\"aggregateCount\";function i(e,i){if(!e.view)throw new r(`${i}:missing-parameters`,\"'view' parameter is required for binning\");if(e.sqlExpression)throw new r(`${i}:invalid-parameters`,\"'sqlExpression' parameter is not supported for binning\");if(\"3d\"===e.view.type)throw new r(`${i}:invalid-parameters`,\"3d view is not supported for binning\")}export{e as aggregateCountField,i as verifyBinningParams};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import{open as e}from\"../../../core/workers/workers.js\";class n{constructor(){this.connection=null}async open(t){this.connection=await e(\"statsWorker\",{strategy:\"distributed\",signal:t})}destroy(){this.connection?.close()}static getInstance(){return n.instance||(n.instance=new n),n.instance}async summaryStatistics(e,n){if(!this.connection)throw new t(\"worker-client:summary-statistics\",\"connection is required\");return this.connection.invoke(\"summaryStatistics\",{attribute:e,features:n})}async uniqueValues(e,n){if(!this.connection)throw new t(\"worker-client:unique-values\",\"connection is required\");return this.connection.invoke(\"uniqueValues\",{attribute:e,features:n})}async classBreaks(e,n){if(!this.connection)throw new t(\"worker-client:class-breaks\",\"connection is required\");return this.connection.invoke(\"classBreaks\",{attribute:e,features:n})}async histogram(e,n){if(!this.connection)throw new t(\"worker-client:histogram\",\"connection is required\");return this.connection.invoke(\"histogram\",{attribute:e,features:n})}async heatmapStatistics(e,n){if(!this.connection)throw new t(\"worker-client:heatmap-statistics\",\"connection is required\");return this.connection.invoke(\"heatmapStatistics\",{attribute:e,features:n})}}export{n as WorkerClient};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import has from\"../../core/has.js\";import{whenOrAbort as o}from\"../../core/promiseUtils.js\";import{getGlbFormatId as r,getGltfFormatId as e}from\"../../layers/support/infoFor3D.js\";import{DataLayerSource as n}from\"../../layers/support/source/DataLayerSource.js\";import{executeRawQueryJSON as s}from\"./executeQueryJSON.js\";import{executeRawQueryPBF as a}from\"./executeQueryPBF.js\";import i from\"../support/FeatureSet.js\";import u from\"../support/Query.js\";async function f(t,o,r,e,n){return m(o,await c(t,o,r,e,n),r,e)}async function c(t,o,r,e,n){const i={...e},u=p(o,r),f=null!=o.outStatistics?.[0],c=has(\"featurelayer-pbf-statistics\"),m=!f||c;let d;if(\"pbf\"===r?.format&&m)try{d=await a(t,u,i,n)}catch(y){if(\"query:parsing-pbf\"!==y.name)throw y;r.format=\"json\"}return\"json\"!==r?.format&&m||(d=await s(t,u,i,n)),l(r?.fieldsIndex,d.fields),d}function l(t,o){if(null!=t&&null!=o)for(const r of o){const o=t.get(r.name);o&&Object.assign(r,o.toJSON())}}async function m(t,r,e,n){const s=e?.infoFor3D;if(!d(t,s)||null==s||!r.assetMaps||!r.features?.length)return i.fromJSON(r);const{meshFeatureSetFromJSON:a}=await o(import(\"../support/meshFeatureSet.js\"),n);return a(t,s,r)}function p(o,s){let a=u.from(o);a.sourceSpatialReference=a.sourceSpatialReference??s?.sourceSpatialReference??null,(s?.gdbVersion||s?.dynamicDataSource)&&(a=a===o?a.clone():a,a.gdbVersion=o.gdbVersion||s.gdbVersion,a.dynamicDataSource=o.dynamicDataSource?n.from(o.dynamicDataSource):s.dynamicDataSource);const i=s?.infoFor3D;if(null!=i&&d(o,i)){a=a===o?a.clone():a,a.formatOf3DObjects=null;const n=r(i),s=e(i);for(const t of i.queryFormats){if(t===n){a.formatOf3DObjects=t;break}t!==s||a.formatOf3DObjects||(a.formatOf3DObjects=t)}if(!a.formatOf3DObjects)throw new t(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(null==a.outFields||!a.outFields.includes(\"*\")){a=a===o?a.clone():a,null==a.outFields&&(a.outFields=[]);const{originX:t,originY:r,originZ:e,translationX:n,translationY:s,translationZ:u,scaleX:f,scaleY:c,scaleZ:l,rotationX:m,rotationY:p,rotationZ:d,rotationDeg:y}=i.transformFieldRoles;a.outFields.push(t,r,e,n,s,u,f,c,l,m,p,d,y)}}return a}function d(t,o){return null!=o&&!0===t.returnGeometry&&\"xyFootprint\"!==t.multipatchOption&&!t.outStatistics}export{f as executeQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{fromJSON as t}from\"../renderers/support/jsonUtils.js\";import{parseUrl as n}from\"./utils.js\";import{executeQuery as i}from\"./query/executeQuery.js\";import s from\"./support/Query.js\";import a from\"./support/StatisticDefinition.js\";async function l(t,i,s,a){const l=n(t),{source:o,checkValueRange:u}=i,{classificationDefinition:c}=s,f={...s.toJSON(),f:\"json\"};let m=null;if(m=\"class-breaks-definition\"===c?.type?c.classificationField:c?.attributeField,o){const e={source:o?.toJSON()};f.layer=JSON.stringify(e)}f.classificationDef&&(f.classificationDef=JSON.stringify(f.classificationDef));let p={query:f};a&&(p={...a,...p});const y={url:l.path,field:m,checkValueRange:u},V=l.path+\"/generateRenderer\";return e(V,p).then(e=>r(y,e))}function r(e,t){const{field:n,checkValueRange:l,url:r}=e,u=t?.data;if(!u)return;if(!l){const e=o(u);return Promise.resolve(e)}const c=new a({statisticType:\"min\",onStatisticField:n}),f=new a({statisticType:\"max\",onStatisticField:n}),m=new s({outStatistics:[c,f]});return i(r,m).then(e=>{const t=e.features[0].attributes;let n=null,i=null;for(const s in t)s.toLowerCase().startsWith(\"min\")?n=t[s]:i=t[s];return o(u,n,i)})}function o(e,n,i){if(\"classBreaks\"===e.type){const s=t(e);return{classBreaks:s.classBreakInfos.map((e,t)=>(0===t&&null!=n&&(e.minValue=n),t===s.classBreakInfos.length-1&&null!=i&&(e.maxValue=i),{minValue:e.minValue,maxValue:e.maxValue,label:e.label})),normalizationTotal:s.normalizationTotal}}const{uniqueValueInfos:s}=e;return{uniqueValues:s?.map((e,t)=>(0===t&&null!=n&&(e.value=n),t===s.length-1&&null!=i&&(e.value=i),{count:e.count,value:e.value,label:e.label}))??[]}}export{l as generateRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends o{constructor(r){super(r),this.classificationDefinition=null,this.where=null}};r([e({json:{name:\"classificationDef\",write:!0}})],s.prototype,\"classificationDefinition\",void 0),r([e({type:String,json:{write:!0}})],s.prototype,\"where\",void 0),s=r([t(\"esri.rest.support.GenerateRendererParameters\")],s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends e{constructor(t){super(t),this.type=\"unique-value-definition\",this.attributeField=null,this.attributeField2=null,this.attributeField3=null,this.fieldDelimiter=null}get uniqueValueFields(){const t=[];return this.attributeField&&t.push(this.attributeField),this.attributeField2&&t.push(this.attributeField2),this.attributeField3&&t.push(this.attributeField3),t}};t([r({uniqueValueDef:\"unique-value-definition\"})],s.prototype,\"type\",void 0),t([i()],s.prototype,\"attributeField\",void 0),t([i()],s.prototype,\"attributeField2\",void 0),t([i()],s.prototype,\"attributeField3\",void 0),t([i({json:{write:!0}})],s.prototype,\"fieldDelimiter\",void 0),t([i({json:{write:!0}})],s.prototype,\"uniqueValueFields\",null),s=t([o(\"esri.rest.support.UniqueValueDefinition\")],s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isIntegerField as n,castIntegerFieldToFloat as a}from\"../../support/utils.js\";const e=\"no_dominant_category\";function l(n){return`(${n.map(n=>`${n} >= 0`).join(\" OR \")})`}function u(n){return{expression:r(n,{returnFieldName:!0,defaultValue:`'${e}'`})}}function r(e,l){const{returnFieldName:u,defaultValue:r,layer:t}=l,i=[];if(u&&r){const n=e.map(n=>`${n} <= 0`).join(\" AND \");i.push(`WHEN ${n} THEN ${r}`)}for(const o of e){const l=e.reduce((n,a)=>(o!==a&&n.push(`${o} > ${a}`),n),[]).join(\" AND \"),r=t&&n(t,o),s=u&&`'${o}'`?`'${o}'`:r?a(o):o;i.push(`WHEN ${l} THEN ${s}`)}return`CASE ${i.join(\" \")} ELSE ${r||\"0\"} END`}function t(n,a){const e=a.join(\" + \"),u={sqlExpression:`(${e})`,sqlWhere:l(a)},t={sqlExpression:`(( (${r(a,{layer:n})}) / (${e}) ) * 100)`,sqlWhere:`${l(a)} AND ((${e}) > 0)`};return{predominantCategory:{valueExpression:s(a)},size:{valueExpression:$(a),statisticsQuery:u,histogramQuery:u},opacity:{valueExpression:V(a),statisticsQuery:t,histogramQuery:t}}}function i(n){return n&&n.map(n=>`$feature[\"${n}\"];`).join(\"\\n\")+\"\\n\"||\"\"}function o(n,a=!1){const e=n.map(n=>`\"${n}\"`),l=\"\\n  if(value != null && value >= 0) {\\n    if (totalValue == null) { totalValue = 0; }\\n    totalValue = totalValue + value;\\n  }\\n  \";return`\\n  var fieldNames = [ ${e.join(\", \")} ];\\n  var numFields = ${e.length};\\n  var maxValueField = null;\\n  var maxValue = -Infinity;\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numFields; i++) {\\n    value = $feature[fieldNames[i]];\\n\\n    if(value > 0) {\\n      if(value > maxValue) {\\n        maxValue = value;\\n        maxValueField = fieldNames[i];\\n      }\\n      else if (value == maxValue) {\\n        maxValueField = null;\\n      }\\n    }\\n    ${a?l:\"\"}\\n  }\\n  `}function s(n){const a=o(n);return`\\n  ${i(n)}\\n  ${a}\\n  return maxValueField;\\n  `}function f(n){const a=o(n);return`\\n  ${i(n)}\\n  ${a}\\n  return maxValue;\\n  `}function v(n,a){const e=m(n),l=i(e),u=n.map(n=>n.label?`\"${n.label}\"`:`\"${n.fieldName}\"`),r=e.map(n=>`Number($feature[\"${n}\"])`),t=[];return a&&a.forEach((n,a)=>{t.push(`function getValueForExpr${a}() {\\n  ${n.expression} \\n}`),r.push(`Number(getValueForExpr${a}())`),u.push(`\"${n.title||n.name}\"`)}),`\\n  ${l}\\n\\n  ${t.length?t.join(\"\\n\"):\"\"}\\n\\n  var values = [ ${r.join(\", \")} ];\\n  var aliases = [ ${u.join(\", \")} ];\\n  var numValues = ${r.length};\\n  var maxValueAlias = null;\\n  var maxValue = -Infinity;\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numValues; i++) {\\n    value = values[i];\\n\\n    if(value > 0) {\\n      if(value > maxValue) {\\n        maxValue = value;\\n        maxValueAlias = aliases[i];\\n      }\\n      else if (value == maxValue) {\\n        maxValueAlias = \"Tie\";\\n      }\\n    }\\n  }\\n  return maxValueAlias;\\n  `}function m(n){return n.filter(({fieldName:n})=>!!n).map(n=>n.fieldName)}function p(n){return`\\n  ${i(n)}\\n  var fieldValues = [ ${n.map(n=>`$feature[\"${n}\"]`).join(\", \")} ];\\n  var totalValue = Sum(fieldValues);\\n  var order = Reverse(Sort(fieldValues));\\n  return IIF(totalValue > 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\\n  `}function $(n){const a=i(n),e=n.map(n=>`\"${n}\"`);return`\\n  ${a}\\n  var fieldNames = [ ${e.join(\", \")} ];\\n  var numFields = ${e.length};\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numFields; i++) {\\n    value = $feature[fieldNames[i]];\\n\\n    if(value != null && value >= 0) {\\n      if (totalValue == null) { totalValue = 0; }\\n      totalValue = totalValue + value;\\n    }\\n  }\\n\\n  return totalValue;\\n  `}function V(n){const a=o(n,!0);return`\\n  ${i(n)}\\n  ${a}\\n\\n  var strength = null;\\n\\n  if (maxValueField != null && totalValue > 0) {\\n    strength = (maxValue / totalValue) * 100;\\n  }\\n\\n  return strength;\\n  `}function c(n,a){const e=i(m(n)),l=n.map(n=>`{\\n    value: Number($feature[\"${n.fieldName}\"]),\\n    alias: \"${n.label||n.fieldName}\"\\n    }`),u=[];return a&&a.forEach((n,a)=>{u.push(`function getValueForExpr${a}() {\\n  ${n.expression} \\n}`),l.push(`{\\n          value: Number(getValueForExpr${a}()),\\n          alias: \"${n.title||n.name}\"\\n          }`)}),`\\n  ${e}\\n\\n  ${u.length?u.join(\"\\n\"):\"\"}\\n\\n  var groups = [ ${l.join(\", \")} ];\\n  var numTopValues = Count(groups);\\n\\n  function getValuesArray(arr){\\n    var valuesArray = []\\n    for(var i in arr){\\n      valuesArray[i] = arr[i].value;\\n    }\\n    return valuesArray;\\n  }\\n\\n  function findAliases(top5Array, fullArray){\\n    var aliases = [];\\n    var found = \"\";\\n    for(var i in top5Array){\\n      for(var k in fullArray){\\n        if(top5Array[i] == fullArray[k].value && Find(fullArray[k].alias, found) == -1){\\n          found += fullArray[k].alias;\\n          aliases[Count(aliases)] = {\\n            alias: fullArray[k].alias,\\n            value: top5Array[i]\\n          };\\n        }\\n      }\\n    }\\n    return aliases;\\n  }\\n\\n  function getTopGroups(groupsArray){\\n    var values = getValuesArray(groupsArray);\\n    var top5Values = IIF(Max(values) > 0, Top(Reverse(Sort(values)),numTopValues), \"no data\");\\n    var top5Aliases = findAliases(top5Values,groupsArray);\\n\\n    if(TypeOf(top5Values) == \"String\"){\\n      return top5Values;\\n    } else {\\n      var content = \"\";\\n      for(var i in top5Aliases){\\n        if(top5Aliases[i].value > 0){\\n          content += (i+1) + \". \" + top5Aliases[i].alias + \" (\" + Text(top5Aliases[i].value, \"#,###\") + \")\";\\n          content += IIF(i < numTopValues-1, TextFormatting.NewLine, \"\");\\n        }\\n      }\\n    }\\n\\n    return content;\\n  }\\n\\n  getTopGroups(groups);\\n  `}export{m as fieldNamesFromFieldInfos,c as getArcadeForOrderedFields,p as getArcadeForPredominanceMargin,s as getArcadeForPredominantCategory,v as getArcadeForPredominantCategoryAlias,f as getArcadeForPredominantCategoryValue,V as getArcadeForStrengthOfPredominance,$ as getArcadeForSumOfFields,t as getPredominanceExpressions,u as getSQLForPredominantCategoryName,e as noDominantCategoryField};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{Loadable as r}from\"../../../core/Loadable.js\";import{property as t}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";let p=class extends r{constructor(o){super(o),this.adapterName=\"layer-adapter\"}};o([t({readOnly:!0})],p.prototype,\"adapterName\",void 0),o([t({constructOnly:!0})],p.prototype,\"layer\",void 0),o([t()],p.prototype,\"geometryType\",void 0),o([t()],p.prototype,\"objectIdField\",void 0),o([t()],p.prototype,\"supportsSQLExpression\",void 0),o([t()],p.prototype,\"hasQueryEngine\",void 0),o([t()],p.prototype,\"minScale\",void 0),o([t()],p.prototype,\"maxScale\",void 0),o([t()],p.prototype,\"fullExtent\",void 0),p=o([e(\"esri.smartMapping.support.adapters.LayerAdapter\")],p);export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../../core/promiseUtils.js\";import{CodedValue as n}from\"../../../../layers/support/CodedValue.js\";import\"../../../../core/has.js\";import i from\"../../../../layers/support/CodedValueDomain.js\";import\"../../../../layers/support/Domain.js\";import\"../../../../layers/support/InheritedDomain.js\";import\"../../../../layers/support/RangeDomain.js\";import l from\"../../../../layers/support/Field.js\";import{isStringField as o,isTimeOnlyField as r}from\"../../../../layers/support/fieldUtils.js\";import a from\"../../../../rest/support/PivotQuery.js\";import s from\"../../../../rest/support/StatisticDefinition.js\";import u from\"../../../../rest/support/UnPivotDefinition.js\";import{noDominantCategoryField as c}from\"../../../statistics/support/predominanceUtils.js\";import{getRangeExpr as m,getSQLFilterForNormalization as f,mergeWhereClauses as d}from\"../../../statistics/support/utils.js\";import{isIntegerField as p,isAnyDateField as y,getDateDiffSQL as v,castIntegerFieldToFloat as x}from\"../../utils.js\";import{isNullCountSupported as g,statisticTypes as h,getEqualIntervalBins as w,processNullValue as F}from\"../../../../statistics/utils.js\";const E=/_value$/i,S=Math.LOG10E,T={SECOND:1e3,MINUTE:6e4,HOUR:36e5},V=10;function $(t){return t.map(t=>t.toJSON())}function z(t,e){const n=[],i=t.layer,l=\"featureReduction\"in i?i.featureReduction:null,o=\"binning\"===l?.type,r=null!=l&&\"fields\"in l?l.fields?.map(t=>t.name?.toLowerCase()).filter(Boolean):[];if(!o||!e)return n;for(const a of e)r.includes(a.toLowerCase())||n.push(a);return n}function j(t,e,n){const i=[];if(e)for(const l of e){const e=t.getField(l);e&&n&&\"availableFields\"in n&&!n.availableFields?.includes(e.name)&&i.push(e.name)}return i}function q(t,e){const n=t&&t.features;if(0===n?.length)return{avg:null,count:0,max:null,median:null,min:null,nullcount:0,stddev:null,sum:null,variance:null};const i=n?.[0]?.attributes,l={};for(const o in i)l[o.replace(E,\"\").toLowerCase()]=i[o];return null!=l.totalcount&&l.totalcount>=l.count&&(l.nullcount=l.totalcount-l.count),delete l.totalcount,l.min===l.max&&null!=l.min&&null==l.stddev&&(l.stddev=l.variance=0),e&&([\"min\",\"max\",\"avg\",\"stddev\",\"sum\",\"variance\"].forEach(t=>{null!=l[t]&&(l[t]=Math.ceil(l[t]))}),l.min===l.max&&null!=l.min&&(l.avg=l.min,l.stddev=l.variance=0)),l}function C(t){const e=[],n=t.classBreaks,i=n[0].minValue,l=n[n.length-1].maxValue;n.forEach(t=>{e.push([t.minValue,t.maxValue])});const o={field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,normalizationTotal:t.normalizationTotal,layer:t.layer};return{min:i,max:l,intervals:e,sqlExpr:b(o),excludeZerosExpr:t.where,normTotal:t.normalizationTotal}}function b(t){const{field:e,normalizationType:n,normalizationField:i,normalizationTotal:l,layer:o}=t,r=p(o,e);let a=e;return\"percent-of-total\"===n?a=`((${r?x(e):e} / ${l}) * 100)`:\"log\"===n?a=`(log(${e}) * ${S})`:\"field\"===n?a=`(${r?x(e):e} / ${i})`:\"natural-log\"===n?a=`(log(${r?x(e):e}))`:\"square-root\"===n&&(a=`(power(${r?x(e):e}, 0.5))`),a}function O(t,e){let n;if(e=e.toLowerCase(),t)for(const i in t)if(i.toLowerCase()!==e){n=t[i];break}return n}function L(t,e){let n;if(e=e.toLowerCase(),t)for(const i in t)if(i.toLowerCase()===e){n=t[i];break}return n}function R(t,e,n,i,l){const o={},r=\"countOFExpr\";t&&t.features&&t.features.forEach(t=>{const e=t.attributes,n=O(e,r),i=L(e,r);null!=n&&null!=i&&0!==n&&(o[n]=i)});const a=[];return w(e,n,i).forEach((t,e)=>{const n=(e+1).toString();a.push({minValue:t[0],maxValue:t[1],count:o.hasOwnProperty(n)?o[n]:0})}),{bins:a,minValue:e,maxValue:n,normalizationTotal:l}}async function D(t,n){const i=t&&t.features,{field:l,field2:o,field3:r,fieldDelimiter:a,layer:s,view:u,signal:c,labels:m}=n,f=`countOF${!(!l||!o)?\"Expr\":l||\"Expr\"}`,d={};let p=!1;for(const e of i){const t=e.attributes,n=L(t,f);let i=l?L(t,l):O(t,f),s=o?L(t,o):null,u=r?L(t,r):null;null===i&&0===n&&(p=!0),(null==i||\"string\"==typeof i&&\"\"===i.trim())&&(i=null),o&&(null==s||\"string\"==typeof s&&\"\"===s.trim())&&(s=null),r&&(null==u||\"string\"==typeof u&&\"\"===u.trim())&&(u=null);let c=i;o&&(c=`${F(c)}${a}${F(s)}`,r&&(c=`${c}${a}${F(u)}`)),null==d[c]?d[c]={count:n,data:c}:d[c].count=d[c].count+n}if(l&&p){const t=l+\" is NULL\";try{const e=await s.queryFeatureCount({whereClause:t,view:u,signal:c});return d.null.count=d.null.count+e,N(d,m)}catch{return e(c),N(d,m)}}return N(d,m)}function N(t,e){if(e)for(const n in t)t[n].label=e[n];return{count:t}}async function U(t,e,l){const o=t?l.getField(t):null,r=o?l.getFieldDomain(o.name):null;if(r)return r;const{uniqueValueInfos:a}=await l.uniqueValues({field:t,sqlWhere:e.sqlWhere,features:e.features,useFeaturesInView:e.useFeaturesInView,view:e.view,signal:e.signal}),s=a.map(t=>new n({code:t.value}));return new i({codedValues:s})}async function I(t,e){if(!t.returnAllCodedValues)return[];const{field:n,field2:i,field3:l}=t;if(n&&!i){const t=n?e.getField(n):null,i=t?e.getFieldDomain(t.name):null;return i?[i]:[]}const o=[];return n&&(o.push(U(n,t,e)),i&&(o.push(U(i,t,e)),l&&o.push(U(l,t,e)))),Promise.all(o)}function Q(t,e){return v(t,new Date(0),e,\"milliseconds\").sqlExpression}function M(t,e){return`EXTRACT(${e} FROM ${t}) * ${T[e]}`}function P(t){if(!t)return null;return x([\"HOUR\",\"MINUTE\",\"SECOND\"].map(e=>`(${M(t,e)})`).join(\" + \"))}function _(t){return{viewingMode:\"2d\"===t.type?\"map\":t.viewingMode,scale:t.scale,spatialReference:t.spatialReference?.toJSON()}}function B(t,e){const n=new Set(t.map(t=>t.value)),i=e.filter(t=>!n.has(t));for(const l of i)t.push({value:l,count:0});t.sort((t,n)=>e.indexOf(t.value)-e.indexOf(n.value));for(const l of t)l.value===c&&(l.value=null);return{predominantCategoryInfos:t}}function W(e){const n=\"featureReduction\"in e?e.featureReduction:null;return((null!=n&&\"fields\"in n?n.fields:null)??[]).map(t=>{const n=k(t,e.fieldsIndex);return n?new l({type:n,name:t.name,alias:t.alias}):null}).filter(t)}function k(t,e){switch(t.statisticType){case\"avg\":case\"avg_angle\":return\"double\";case\"count\":return\"integer\";case\"min\":case\"max\":case\"sum\":return t.onStatisticField?e.get(t.onStatisticField)?.type??null:t.onStatisticExpression?\"string\"===t.onStatisticExpression.returnType?null:\"double\":null;case\"mode\":return t.onStatisticField?e.get(t.onStatisticField)?.type??null:t.onStatisticExpression?\"string\"===t.onStatisticExpression.returnType?\"string\":\"double\":null;default:return null}}function A(t,e){return y(e)?Q(t,e?.name):r(e)?P(e?.name):null}function H(t,e,n){let i=null;for(const l of n){const n=l?t.getField(l):null,o=Z(t,{...e,field:l,outStatisticTypes:{include:[\"min\",\"max\",\"sum\",\"count\"]}},n,!0,!0);i?i.outStatistics=i.outStatistics.concat(o.outStatistics):i=o}return i.where=t.createQuery()?.where,i}function J(t,e,n,i){return e.map(e=>{const l=new s;let o=null,r=null,a=`${e}_value${i?`_${i}`:\"\"}`;if(\"variance\"===e)o=\"var\",r=n;else if(\"nullcount\"===e){const e=t.objectIdField;o=\"count\",r=e&&t.getField(e)?e:\"1\",a=\"totalcount_value\"}else\"median\"===e?(o=\"percentile-continuous\",r=n,l.statisticParameters={value:.5}):(o=e,r=n);return l.statisticType=o,l.onStatisticField=r,l.outStatisticFieldName=a,l})}function Z(t,e,n,i=!0,l=!1){const{field:r,normalizationType:a,normalizationField:s,normalizationTotal:u,minValue:c,maxValue:p,filter:y}=e,v=t.supportsSQLExpression?A(t,n)||e.sqlExpression:null,x=b({field:r,normalizationType:a,normalizationField:s,normalizationTotal:u,layer:t}),w=v||x,F=w?m(w,c,p):null,E=f({field:r,normalizationField:s,normalizationType:a}),S=d(e.sqlWhere,E),T=d(S,F),V=g({normalizationField:s,normalizationType:a,sqlExpression:v,supportsSQLExpression:t.supportsSQLExpression,minValue:c,maxValue:p}),$=o(t.getField(r??void 0)),{include:z,exclude:j}=e.outStatisticTypes||{},q=h.filter(t=>(!z||z.includes(t))&&(!j||!j.includes(t))&&(\"nullcount\"===t?V:!$||\"count\"===t)&&(\"median\"!==t||i)),C=t.createQuery();return C.where=d(C.where,T),C.sqlFormat=v?\"standard\":null,C.outStatistics=J(t,q,w,l?r:void 0),X(C,y),C}function G(t,e,n=!0){const{fields:i,filter:l}=e,{include:o,exclude:r}=e.outStatisticTypes||{},s=h.filter(t=>(!o||o.includes(t))&&(!r||!r.includes(t))&&(\"median\"!==t||n)),c=new a;c.where=d(t.createQuery()?.where,e.sqlWhere)??void 0;const m=\"new_value\";return c.outPivots=[new u({sourceFields:i,valueFieldName:m})],c.outStatistics=J(t,s,m),X(c,l),c}function X(t,e){e&&(t.geometry=e.geometry,t.spatialRelationship=e.spatialRelationship,t.timeExtent=t.timeExtent?.intersection(e.timeExtent)??e.timeExtent,t.distance=e.distance,t.units=e.units)}function K(t,e){const{field:n,field2:i,field3:l,sqlExpression:o}=e,r=!(!n||!i),a=t.createQuery();return a.where=d(a.where,e.sqlWhere),a.sqlFormat=o?\"standard\":null,a.outStatistics=[Y(r?null:n,r?\"1\":o)].filter(Boolean),a.groupByFieldsForStatistics=[n||o,i,l].filter(Boolean),X(a,e.filter),a}function Y(t,e){const n=\"countOF\"+(t||\"Expr\"),i=new s;return i.statisticType=\"count\",i.onStatisticField=e?\"1\":t,i.outStatisticFieldName=n,i}function tt(t,e,n,i=V,l,o,r){const{min:a,max:s,normTotal:u,excludeZerosExpr:c}=e,m=e.intervals||w(a,s,i),f=e.sqlExpr||n;return et(t,m,f,c,l,o,r).then(t=>({bins:t.map((t,e)=>({minValue:m[e][0],maxValue:m[e][1],count:\"fulfilled\"===t.status?t.value:0})),minValue:a,maxValue:s,normalizationTotal:u}))}function et(t,e,n,i,l,o,r){const a=[],s=e.length;for(let u=0;u<s;u++){const t=d(i,d(n+\" >= \"+e[u][0],null!==e[u][1]?n+(u===s-1?\" <= \":\" < \")+e[u][1]:\"\"));a.push(t)}return Promise.allSettled(a.map(e=>t.queryFeatureCount({whereClause:e,view:l,filter:o,signal:r})))}export{V as defaultNumBins,$ as ensureFeaturesJSON,C as generateBinParams,k as getAggregateFieldType,tt as getBins,I as getDomainsForFields,W as getFeatureReductionFields,b as getFieldExpr,R as getHistogramFromFeatureSet,j as getMissingFields,z as getMissingFieldsForBinning,B as getPredominantCategoriesFromUVInfos,A as getSQLExpressionForDateOrTimeField,q as getSummaryStatisticsFromFeatureSet,G as getSummaryStatsPivotQuery,Z as getSummaryStatsQuery,H as getSummaryStatsQueryForFields,K as getUVQuery,D as getUniqueValuesFromFeatureSet,_ as getViewInfoParams,P as msForTimeOnlyFieldSQL,Q as msSinceUnixEpochSQL,X as updateQueryWithFeatureFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{resolveTimeZone as i}from\"../../../../intl/date.js\";import{isTimeOnlyField as n,isDateField as t,isTimestampOffsetField as a,isDateOnlyField as r}from\"../../../../layers/support/fieldUtils.js\";import o from\"../../../../rest/support/AttributeBinsQuery.js\";import l from\"../../../../rest/support/AutoIntervalBinParameters.js\";import s from\"../../../../rest/support/DateBinParameters.js\";import m from\"../../../../rest/support/FixedBoundariesBinParameters.js\";import u from\"../../../../rest/support/FixedIntervalBinParameters.js\";import d from\"../../../../rest/support/GenerateRendererParameters.js\";import p from\"../../../../rest/support/StatisticDefinition.js\";import{getSQLFilterForNormalization as f,mergeWhereClauses as c,getRangeExpr as y}from\"../../../statistics/support/utils.js\";import{isAnyDateField as z}from\"../../utils.js\";import{getSQLExpressionForDateOrTimeField as x,getFieldExpr as v,updateQueryWithFeatureFilter as w,defaultNumBins as T,generateBinParams as h,getViewInfoParams as F}from\"./utils.js\";import{createClassBreaksDefinition as B}from\"../../../../statistics/utils.js\";const V=\"countOFExpr\",j=\"lowerBoundary\",E=\"upperBoundary\";function q(e,i,t){const a=e.valueExpression||e.sqlExpression,r=e.signal;if(!a){const{field:a,normalizationType:o,normalizationField:l}=e,s=a?i.getField(a):null,m=z(s)||n(s),u={field:a,normalizationType:o,normalizationField:l,normalizationTotal:t,layer:i};return{sqlExpression:m?x(i,s):v(u),sqlWhere:m?null:e.sqlWhere||f({field:a,normalizationType:o,normalizationField:l}),filter:e.filter,signal:r}}return{valueExpression:e.valueExpression,sqlExpression:e.sqlExpression,sqlWhere:e.sqlWhere,filter:e.filter,signal:r}}async function I(e,i,n){const{field:t,normalizationType:a,normalizationField:r,signal:o}=e,l=f({field:t,normalizationType:a,normalizationField:r}),s=new d({classificationDefinition:B({field:t,normalizationType:a,normalizationField:r,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,definedInterval:e.definedInterval,breakCount:e.numBins||T}),where:c(l,n)});return i.generateRenderer(s,o).then(e=>{const{normalizationTotal:n,classBreaks:o}=e;return h({field:t,normalizationType:a,normalizationField:r,normalizationTotal:n,classBreaks:o,where:l,layer:i})})}async function M(i,t,a,o,d){const{field:p,sqlExpression:f,normalizationField:c,classificationMethod:z,normalizationType:x}=i,w=p?t.getField(p):null,h=n(w),F=r(w)||h,B=i.numBins||T;if(F){if(x||z)throw new e(`${t.adapterName}:not-supported`,\"NormalizationType and classificationMethod are not supported for date-only and time-only fields\");const i=(o-a)/B/1e3,n=i/86400;return new s({field:p,expression:f,interval:{unit:h?\"seconds\":\"days\",value:Math.ceil(h?i:n)},start:a,end:o})}if(\"defined-interval\"===z)return new u({field:p,expression:f,normalizationField:c,normalizationTotal:d,normalizationType:x,interval:i.definedInterval??Math.ceil((o-a)/B),start:x?null:a,end:x?null:o,normalizationMinValue:x?a:null,normalizationMaxValue:x?o:null});if(\"manual\"===z)throw new e(`${t.adapterName}:not-supported`,\"Layer does not support manual classificationMethod\");if(\"natural-breaks\"===z||\"quantile\"===z||\"standard-deviation\"===z){const n=v({field:p,normalizationField:c,normalizationTotal:d,normalizationType:x,layer:t}),r=null!==i.minValue&&null!==i.maxValue?y(n,i.minValue,i.maxValue):void 0,o=await I(i,t,r);if(!o.intervals)throw new e(`${t.adapterName}:invalid`,\"Invalid intervals returned from generate renderer\");const l=[a,...o.intervals.map(e=>e[1])];return new m({field:x?null:p,expression:x?n:f,boundaries:l})}return new l({field:p,normalizationField:c,normalizationTotal:d,normalizationType:x,expression:f,numBins:B,start:x?null:a,end:x?null:o,normalizationMinValue:x?a:null,normalizationMaxValue:x?o:null})}function g(e,i,n,t){return null!=n&&null!=t?Promise.resolve({min:n,max:t}):i.summaryStatistics({...e,outStatisticTypes:{include:[\"min\",\"max\"]}}).then(e=>({min:e.min,max:e.max}))}async function b(e,n,r,l){const{field:s,minValue:m,maxValue:u,filter:d,view:f}=e,y=s?n.getField(s):null,z=t(y)||a(y),x=q(e,n,r),{min:v,max:T}=await g(x,n,m,u);if(null==v||null==T)return{query:null,min:v,max:T};const h=new p({statisticType:\"count\",outStatisticFieldName:V,onStatisticField:\"1\"}),{where:F,timeExtent:B}=l||{},j=c(F,x.sqlWhere),E=\"lowerBoundary\",I=\"upperBoundary\",b=new o({binParameters:await M(e,n,v,T,r),outStatistics:[h],binOrder:e.sortOrder,where:j,timeExtent:B,lowerBoundaryAlias:E,upperBoundaryAlias:I,outTimeZone:f?.timeZone&&z?i(f.timeZone):null});return w(b,d),{query:b,min:v,max:T}}function D(e,i=!1){if(\"string\"!=typeof e)return e;return(i?new Date(`1970-01-01T${e}Z`):new Date(e)).getTime()}function P(e,i,t){const a=n(i);return{...t,bins:e.features.map(e=>({minValue:D(e.attributes[j],a),maxValue:D(e.attributes[E],a),count:e.attributes[V]}))}}function S(e,i,n){const{valueExpression:t,view:a}=e,{featuresJSON:r,graphics:o,fieldInfos:l}=i,s={field:e.field,valueExpression:t,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:n,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return t&&a&&(r||o)&&(s.viewInfoParams=F(a),s.timeZone=a.timeZone,s.fieldInfos=l),s}export{I as binParamsFromGenRend,D as formatHistogramBinValue,b as getAttributeBinsQuery,g as getDataRange,S as getHistogramAttributeDefinition,q as getQueryParamsForExpr,P as processQueryAttributeBinsResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{pickRandom as t}from\"../../../core/arrayUtils.js\";import r from\"../../../core/Error.js\";import a from\"../../../core/Logger.js\";import{assertIsSome as i}from\"../../../core/maybe.js\";import{timeout as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{whenOnce as n}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import{toQuantizationTransform as m}from\"../../../geometry/support/quantizationUtils.js\";import{kebabDict as p}from\"../../../layers/support/fieldType.js\";import{isTimeOnlyField as y}from\"../../../layers/support/fieldUtils.js\";import c from\"../../../rest/support/QuantizationParameters.js\";import{getArcadeForPredominantCategory as f}from\"../../statistics/support/predominanceUtils.js\";import{summaryStatistics as d,uniqueValues as h,histogram as w,classBreaks as g,heatmapStatistics as F}from\"../../statistics/support/statsWorker.js\";import{mergeWhereClauses as S}from\"../../statistics/support/utils.js\";import{WorkerClient as v}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as q,isAnyDateField as V,fieldDelimiter as x}from\"../utils.js\";import _ from\"./LayerAdapter.js\";import{getHistogramAttributeDefinition as z,getAttributeBinsQuery as T,processQueryAttributeBinsResult as N}from\"./support/histogramUtils.js\";import{ensureFeaturesJSON as M,getSummaryStatsQuery as L,getSummaryStatisticsFromFeatureSet as C,getViewInfoParams as E,getMissingFields as j,updateQueryWithFeatureFilter as b,getUVQuery as k,getUniqueValuesFromFeatureSet as I,getBins as O,getDomainsForFields as Q,getPredominantCategoriesFromUVInfos as J}from\"./support/utils.js\";import{processSummaryStatisticsResult as B,createUVResult as P,resolveCBResult as U}from\"../../../statistics/utils.js\";import{loadArcade as A}from\"../../../support/loadArcade.js\";const $=5;let G=null,R=class extends _{constructor(){super(...arguments),this._hasLocalSource=!1,this.adapterName=\"in-memory-layer-adapter\"}destroy(){this.workerClient?.destroy()}async _waitForLayerViewUpdate(e){if(!e)throw new r(`${this.adapterName}:insufficient-data`,\"layerView is required to fetch the features\");const t=new AbortController,i=n(()=>!e.updating,t.signal);await s(i,5e3,t).catch(e=>{throw a.getLogger(this).warn(\"LayerView is taking too long to update. Aborting fetch from layerView.\"),e})}async _fetchFeatureSetFromMemory(e,t,a){const i=this.layer;if(this._hasLocalSource&&\"queryFeatures\"in i)return i.queryFeatures(e);if(!t)throw new r(`${this.adapterName}:insufficient-data`,\"view is required to fetch the features from layerView\");const s=await t.whenLayerView(this.layer);return await this._waitForLayerViewUpdate(s),s.queryFeatures(e,{signal:a})}async _fetchFeaturesFromMemory(e,t,a,i){const s=this.layer,o=\"json\"===i;if(this._hasLocalSource&&\"queryFeatures\"in s){const e=await s.queryFeatures(t);return o?M(e.features):e.features}if(await this._waitForLayerViewUpdate(e),o&&\"queryFeaturesJSON\"in e&&e.queryFeaturesJSON){const{features:r}=await e.queryFeaturesJSON(t,{signal:a});return r}if(!(\"queryFeatures\"in e))throw new r(`${this.adapterName}:not-supported`,\"'queryFeatures' is not supported on the layerView\");const n=await e.queryFeatures(t,{signal:a});return o?M(n.features):n.features}_fetchFeaturesForStats(e,t){return q({field:e.field,field2:e.field2,field3:e.field3,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then(r=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,filter:e.filter,requiredFields:r,signal:e.signal},t))}async _summaryStatsFromClientQuery(e,t){const{view:r,signal:a}=e,i=L(this,e,t),s=await this._fetchFeatureSetFromMemory(i,r,a),o=C(s,V(t)||y(t));return B(o,e.outStatisticTypes)}async _getNormalizationTotalFromMemory(e,t,a){const{featuresJSON:i,graphics:s,layerView:o,query:n}=t,l={include:[\"sum\"]},u=(!i&&!s&&o&&\"querySummaryStatistics\"in o?await o.querySummaryStatistics(n,{field:e},{signal:a}):i?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:l},i):await d({attribute:{field:e,outStatisticTypes:l},features:s??[]})).sum;if(null==u)throw new r(`${this.adapterName}:invalid`,\"invalid normalizationTotal\");return u}async _summaryStatsFromMemory(e,t){const{view:r,field:a,valueExpression:i,normalizationType:s,signal:o}=e,n={field:a,valueExpression:i,normalizationType:s,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:l,graphics:u,layerView:m,query:y,fieldInfos:c}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"querySummaryStatistics\"});return i&&r&&(l||u)&&(n.fieldType=t?.type?p.toJSON(t.type):null,n.viewInfoParams=E(r),n.timeZone=r.timeZone,n.fieldInfos=c),\"percent-of-total\"===s&&null==e.normalizationTotal&&(n.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:l,graphics:u,layerView:m,query:y},o)),!l&&!u&&m&&\"querySummaryStatistics\"in m?m.querySummaryStatistics(y,n,{signal:o}):l?this.workerClient.summaryStatistics(n,l):d({attribute:n,features:u})}async _getFilteredFeatures(e,t){let r=e;const a=t?.geometry;if(\"intersects\"===t?.spatialRelationship&&a){const t=await import(\"../../../geometry/operators/intersectionOperator.js\");r=e.filter(({geometry:e})=>!(!e||!t.execute(e,a)))}return e.length&&\"declaredClass\"in e[0]&&\"esri.Graphic\"===e[0].declaredClass?{graphics:r}:{featuresJSON:r}}async _processStatsFromMemoryParams(e){const{features:t,filter:r}=e;if(t?.length)return this._getFilteredFeatures(t,r);const{view:a,field:i,field2:s,field3:o,normalizationField:n,valueExpression:l,layerViewFunc:u,signal:m}=e;let p=e.returnGeometry;if(null==p&&l){if(!G){const{arcadeUtils:e}=await A();G=e}const e=G.hasGeometryOperations(l);e&&await G.enableGeometryOperations(),p=e}let y=null,c=null,f=null,d=null,h=null;if(a)try{const e=\"subtype-sublayer\"===this.layer.type?this.layer.parent:this.layer;y=await a.whenLayerView(e),c=null!=u&&null!=y&&u in y&&\"function\"==typeof y[u]}catch{c=!1}if(c)try{await this._waitForLayerViewUpdate(y);const e=await q({field:i,field2:s,field3:o,normalizationField:n,valueExpression:l});j(this,e,y).length?c=!1:(f=this.layer.createQuery(),f.outFields=e,f.returnGeometry=!1,b(f,r)),y.suspended&&(c=!1)}catch{c=!1}return c||(d=await this._fetchFeaturesForStats({field:i,field2:s,field3:o,valueExpression:l,normalizationField:n,returnGeometry:p,filter:r,view:a,signal:m},\"json\"),h=(await q({valueExpression:l})).map(e=>this.getField(e)?.toJSON()).filter(Boolean)),{layerView:y,query:f,featuresJSON:d,fieldInfos:h}}async _uvFromClientQuery(e,t){const{view:r,signal:a}=e,i=k(this,e),s=await this._fetchFeatureSetFromMemory(i,r,a),o=await I(s,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:x,view:e.view,signal:e.signal});return P(o,t,e.returnAllCodedValues,x)}async _uvFromMemory(e,t){const{view:r,field:a,valueExpression:i,returnAllCodedValues:s,signal:o}=e,{featuresJSON:n,graphics:l,layerView:u,query:m,fieldInfos:p}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryUniqueValues\"}),y={field:a,field2:e.field2,field3:e.field3,fieldDelimiter:x,valueExpression:i,domains:t,returnAllCodedValues:s};return i&&r&&(n||l)&&(y.viewInfoParams=E(r),y.timeZone=r.timeZone,y.fieldInfos=p),!n&&!l&&u&&\"queryUniqueValues\"in u?u.queryUniqueValues(m,y,{signal:o}):n?this.workerClient.uniqueValues(y,n):h({attribute:y,features:l})}_histogramForField(e){let t=null;return t=null!=e.minValue&&null!=e.maxValue?Promise.resolve({min:e.minValue,max:e.maxValue}):this.summaryStatistics({...e,outStatisticTypes:{include:[\"min\",\"max\",\"count\"]}}).then(e=>{if(!e.count)throw new r(`${this.adapterName}:insufficient-data`,\"Either the layer has no features or none of the features have data for the field\");return{min:e.min,max:e.max}}),t.then(t=>O(this,{min:t.min,max:t.max},e.field,e.numBins??void 0,e.view,e.filter,e.signal))}async _histogramFromQueryAttributeBinsFromMemory(e){const{field:t,normalizationType:r,signal:a}=e,i=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAttributeBins\"}),{featuresJSON:s,graphics:o,layerView:n,query:l}=i,u=\"percent-of-total\"===r?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,i,a):void 0;if(!n||!(\"queryAttributeBins\"in n)||s||o){const t=z(e,i,u);return s?this.workerClient.histogram(t,s):w({attribute:t,features:o})}const{query:m,min:p,max:y}=await T(e,this,u,l);if(!m)return{bins:[],minValue:p,maxValue:y,normalizationTotal:u};const c=await n.queryAttributeBins(m,{signal:a});return N(c,t?this.getField(t):null,{minValue:p,maxValue:y,normalizationTotal:u})}async _histogramFromMemory(e){const{field:t,signal:r}=e,a=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryHistogram\"}),{featuresJSON:i,graphics:s,layerView:o,query:n}=a,l=\"percent-of-total\"===e.normalizationType?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,a,r):void 0,u=z(e,a,l);return!i&&!s&&o&&\"queryHistogram\"in o?o.queryHistogram(n,u,{signal:r}):i?this.workerClient.histogram(u,i):w({attribute:u,features:s})}_classBreaksFromInterpolation(e){const{minValue:t,maxValue:r}=e,a=e.numClasses||$,i=[],s=(r-t)/a;for(let l=0;l<a;l++){const e=t+l*s;i.push({minValue:e,maxValue:e+s})}i[a-1].maxValue=r;const o={classBreaks:i,normalizationTotal:e.normalizationTotal},n=U(o,e.classificationMethod);return Promise.resolve(n)}async _classBreaksFromMemory(e){const{view:t,field:r,valueExpression:a,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryClassBreaks\"}),m={field:r,valueExpression:a,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return a&&t&&(s||o)&&(m.viewInfoParams=E(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryClassBreaks\"in n?n.queryClassBreaks(l,m,{signal:i}):s?this.workerClient.classBreaks(m,s):g({attribute:m,features:o})}async _heatmapStatsFromMemory(e){const{view:t,field:r,radius:a,signal:s}=e;i(t,\"InMemoryLayerAdapter: must have a view\");try{const r=await t.whenLayerView(this.layer);if(\"queryHeatmapStatistics\"in r&&!r.updating&&!e.filter)return await r.queryHeatmapStatistics({field:e.field,radius:e.radius})}catch{o(s)}const{featuresJSON:n,graphics:l}=await this._processStatsFromMemoryParams({...e,returnGeometry:!0}),u=new c({extent:t.extent,tolerance:\"2d\"===t.type?t.state.resolution:t.pixelSizeAt?.(t.center)}),p={field:r,radius:a,transform:m(u),spatialReference:t.spatialReference?.toJSON(),size:t.size};return n?.length||l?.length?n?this.workerClient.heatmapStatistics(p,n):F({attribute:p,features:l}):{min:null,max:null}}getField(e=\"\"){return this.layer.getField(e)}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:null}getFieldDomain(e,t){return this.layer.getFieldDomain(e,t)}createQuery(){return this.layer.createQuery()}async summaryStatistics(e){const{field:t,valueExpression:a,sqlExpression:i,features:s,view:o}=e,n=t?this.getField(t):null,l=!!a,u=\"3d\"===o?.type;if(!a&&i&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return l||s||u?this._summaryStatsFromMemory(e,n):this._summaryStatsFromClientQuery(e,n)}async uniqueValues(e){const{valueExpression:t,sqlExpression:a,features:i,view:s}=e,o=await Q(e,this),n=!!t,l=\"3d\"===s?.type;if(!t&&a&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return n||i||l?this._uvFromMemory(e,o):this._uvFromClientQuery(e,o)}async histogram(e){const{features:t,valueExpression:a,normalizationType:i,sqlExpression:s}=e,o=t||!!a;if(!a&&s&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return o||i?this._histogramFromMemory(e):this._histogramForField(e)}async classBreaks(e){return!1!==e.analyzeData?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)}async queryFeatureCount(e){const{whereClause:t,view:a,signal:i}=e;if(!a)throw new r(`${this.adapterName}:insufficient-data`,\"view is required to fetch the features from layerView\");const s=this.layer.createQuery();s.where=S(s.where,t);const o=await a.whenLayerView(this.layer);return await n(()=>!o.updating,i),o.queryFeatureCount(s,{signal:i})}async generateRenderer(e,t){throw new r(`${this.adapterName}:not-supported`,\"Layer does not support generateRenderer operation\")}async predominantCategories(e){const{fields:t,view:r,signal:a,filter:i}=e,s=f(t),o=await this._uvFromMemory({valueExpression:s,view:r,signal:a,filter:i});return J(o.uniqueValueInfos,t)}async heatmapStatistics(e){return this._heatmapStatsFromMemory(e)}async getSampleFeatures(e,a){const{view:i,sampleSize:s,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e,m=this.layer.createQuery(),p=1;if(m.outSpatialReference=i?.spatialReference,m.returnGeometry=!!n,m.outFields=o,b(m,l),!i)throw new r(`${this.adapterName}:not-supported`,\"view is required to get sample features for Layer\");const y=await i.whenLayerView(this.layer);if(j(this,o,y).length)throw new r(`${this.adapterName}:not-supported`,\"Required fields need to be passed in the outFields for Layer\");const c=await this._fetchFeaturesFromMemory(y,m,u,a),f=null!=s&&s>0&&s<=c.length?s:c.length;return t(c,f,p)}load(e){const t=this.layer.load(e).then(async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=\"stream\"===t.type||!!t.capabilities?.query?.supportsSqlExpression,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=\"fullExtent\"in t?t.fullExtent:t.parent?.fullExtent,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=v.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};e([l({readOnly:!0})],R.prototype,\"adapterName\",void 0),e([l({constructOnly:!0})],R.prototype,\"layer\",void 0),R=e([u(\"esri.smartMapping.support.adapters.InMemoryLayerAdapter\")],R);export{R as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../Graphic.js\";import{pickRandom as i}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Error.js\";import{throwIfAborted as r}from\"../../../core/promiseUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as n}from\"../../../layers/support/arcgisLayerUrl.js\";import{isTimeOnlyField as l,isNumericField as u}from\"../../../layers/support/fieldUtils.js\";import{generateRenderer as c}from\"../../../rest/generateRenderer.js\";import m from\"../../../rest/support/GenerateRendererParameters.js\";import p from\"../../../rest/support/PivotQuery.js\";import h from\"../../../rest/support/StatisticDefinition.js\";import d from\"../../../rest/support/UniqueValueDefinition.js\";import y from\"../../../rest/support/UnPivotDefinition.js\";import{getArcadeForPredominantCategory as f,getSQLForPredominantCategoryName as F}from\"../../statistics/support/predominanceUtils.js\";import{mergeWhereClauses as S,getRangeExpr as g,getSQLFilterForNormalization as w}from\"../../statistics/support/utils.js\";import{WorkerClient as v}from\"../../statistics/support/WorkerClient.js\";import{isAnyDateField as _,isIntegerField as x,castIntegerFieldToFloat as q,fieldDelimiter as V}from\"../utils.js\";import E from\"./InMemoryLayerAdapter.js\";import{getQueryParamsForExpr as b,getDataRange as L,getAttributeBinsQuery as z,processQueryAttributeBinsResult as Q,binParamsFromGenRend as T}from\"./support/histogramUtils.js\";import{ensureFeaturesJSON as j,getSummaryStatsQuery as N,getSummaryStatisticsFromFeatureSet as B,getSummaryStatsQueryForFields as M,getSummaryStatsPivotQuery as $,getUVQuery as O,getUniqueValuesFromFeatureSet as C,defaultNumBins as P,updateQueryWithFeatureFilter as R,getHistogramFromFeatureSet as I,getFieldExpr as k,getDomainsForFields as A,getBins as U,getPredominantCategoriesFromUVInfos as D,getMissingFields as G}from\"./support/utils.js\";import{processSummaryStatisticsResult as J,createUVResult as W,getEqualIntervalBins as H,createClassBreaksDefinition as Z,resolveCBResult as K}from\"../../../statistics/utils.js\";import{getScaleToResolutionFactor as X}from\"../../../views/2d/viewpointUtils.js\";const Y=5,ee=2e4,te=4e5;let ie=class extends E{constructor(){super(...arguments),this.adapterName=\"feature-layer-adapter\"}_isStatsSupportedOnService(){const e=this.layer;if(!e.capabilities?.query?.supportsStatistics||\"multipatch\"===this.geometryType&&!n(e.url)&&e.version<10.5)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support statistics query\");return Promise.resolve()}_fetchFeaturesFromService(e,t){return this.layer.queryFeatures(e,{signal:t}).then(e=>e.features)}_fetchFeaturesJSONFromService(e,t){return this._fetchFeaturesFromService(e,t).then(j)}_summaryStatsFromGenRend(e){const t=e.normalizationType,i=e.normalizationField;return this.classBreaks({field:e.field,numClasses:Y,classificationMethod:\"standard-deviation\",standardDeviationInterval:.25,normalizationType:t,normalizationField:\"field\"===t?i:void 0,minValue:e.minValue,maxValue:e.maxValue,filter:e.filter,signal:e.signal}).then(t=>{let i,s,r;if(t.classBreakInfos?.some(e=>(e.hasAvg&&(i=e),!!i)),i){const e=i.maxValue-i.minValue;s=i.minValue+e/2,r=4*e}const a={min:t.minValue,max:t.maxValue,avg:s,stddev:r};return J(a,e.outStatisticTypes)})}async _summaryStatsFromServiceQuery(e,t){await this._isStatsSupportedOnService(),\"percent-of-total\"===e.normalizationType&&(e.normalizationTotal=await this._getNormalizationTotal(e.field,e.normalizationType,e.filter));const i=_(t)||l(t),s=\"capabilities\"in this.layer?this.layer.capabilities:null,r=N(this,e,t,s?.query?.supportsPercentileStatistics??!1),a=await this.layer.queryFeatures(r,{signal:e.signal}),o=B(a,i);return J(o,e.outStatisticTypes)}async _summaryStatsForFieldsBasic(e){const{outStatisticTypes:t,fields:i}=e,s=50,r=[];for(let n=0;n<i.length;n+=s){const t=i.slice(n,n+s),a=M(this,e,t);r.push(this.layer.queryFeatures(a,{signal:e.signal}))}const a=(await Promise.all(r)).flatMap(e=>e.features).map(e=>e.attributes).reduce((e,t)=>Object.assign(e,t),{}),o={};for(const n in a){const e=n.match(/^(\\w+)_value_/);if(null==a[n]||!e)continue;switch(e[1]){case\"min\":o.min=null==o.min?a[n]:Math.min(o.min,a[n]);break;case\"max\":o.max=null==o.max?a[n]:Math.max(o.max,a[n]);break;case\"sum\":o.sum=(o.sum||0)+a[n];break;case\"count\":o.count=(o.count||0)+a[n]}}return J(o,t)}async _summaryStatsForFieldsAdvanced(e,t){const{outStatisticTypes:i,fields:s}=e,r=i?.exclude?.includes(\"variance\")||i?.include&&!i.include.includes(\"variance\"),a=i?.exclude?.includes(\"stddev\")||i?.include&&!i.include.includes(\"stddev\");if(null==t.sum||!t.count||r&&a)return t;t.avg=t.sum/t.count;const o=50,n=[];for(let u=0;u<s.length;u+=o){const i=s.slice(u,u+o),r=M(this,e,i);r.outStatistics=[];for(const e of i){const i=`sumOfSquares_${e}`,s=`(power(${x(this.layer,e)?q(e):e} - ${t.avg}, 2))`,a=new h({statisticType:\"sum\",onStatisticField:s,outStatisticFieldName:i});r.outStatistics.push(a)}n.push(this.layer.queryFeatures(r,{signal:e.signal}))}const l=(await Promise.all(n)).reduce((e,t)=>e+Object.values(t.features[0].attributes).reduce((e,t)=>e+t,0),0);return t.variance=l/(t.count-1),t.stddev=Math.sqrt(t.variance),J(t,i)}async _summaryStatsForFields(e){const t=await this._summaryStatsForFieldsBasic(e);return this._summaryStatsForFieldsAdvanced(e,t)}async _summaryStatsUsingQueryPivot(e){await this._isStatsSupportedOnService();const t=\"capabilities\"in this.layer?this.layer.capabilities:null,i=$(this,e,t?.query?.supportsPercentileStatistics??!1),s=await this.layer.queryPivot(i,{signal:e.signal}),r=B(s,!1);return J(r,e.outStatisticTypes)}_uvFromGenRenderer(e,t){const i=e.field??void 0,s=new d({attributeField:i}),r=new m({classificationDefinition:s});return this.generateRenderer(r,e.signal).then(e=>{const t={},s=this.getField(i);return e.uniqueValues.forEach(e=>{let i=e.value;null!=i&&\"\"!==i&&(\"string\"!=typeof i||\"\"!==i.trim()&&\"<null>\"!==i.toLowerCase())||(i=null),null==t[i]?t[i]={count:e.count,data:u(s)&&i?Number(i):i}:t[i].count=t[i].count+e.count}),{count:t}}).then(i=>W(i,[t],e.returnAllCodedValues))}async _uvFromServiceQuery(e,t){return this._isStatsSupportedOnService().then(()=>this.layer.queryFeatures(O(this,e),{signal:e.signal})).then(t=>C(t,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:V,view:e.view,signal:e.signal})).then(i=>W(i,t,e.returnAllCodedValues,V))}_getNormalizationTotal(e,t,i,s){return e&&\"percent-of-total\"===t?this.summaryStatistics({field:e,outStatisticTypes:{include:[\"sum\"]},filter:i,signal:s}).then(e=>e.sum):Promise.resolve(null)}_histogramForExpr(e){return this._getNormalizationTotal(e.field,e.normalizationType,e.filter,e.signal).then(t=>{const i=b(e,this,t);return L(i,this,e.minValue,e.maxValue).then(s=>{const r=s.min,a=s.max;if(null==r||null==a)return{bins:[],minValue:r,maxValue:a,normalizationTotal:t};const o=e.numBins||P,n=H(r,a,o),l=se(i.sqlExpression,n,null!=e.minValue&&null!=e.maxValue),u=new h({statisticType:\"count\",outStatisticFieldName:\"countOFExpr\",onStatisticField:\"1\"}),c=this.layer.createQuery();return c.where=S(c.where,i.sqlWhere),c.sqlFormat=\"standard\",c.outStatistics=[u],c.groupByFieldsForStatistics=[l],c.orderByFields=[l],R(c,e.filter),this._isStatsSupportedOnService().then(()=>this.layer.queryFeatures(c,{signal:i.signal})).then(e=>I(e,r,a,o,t))})})}async _histogramForFields(e){const{min:t,max:i}=await L({fields:e.fields,sqlWhere:e.sqlWhere,filter:e.filter,signal:e.signal},this,e.minValue,e.maxValue);if(null==t||null==i)return{bins:[],minValue:t,maxValue:i};const s=\"newField\",r=e.numBins||P,a=se(s,H(t,i,r),null!=e.minValue&&null!=e.maxValue),o=new h({statisticType:\"count\",outStatisticFieldName:\"countOFExpr\",onStatisticField:s}),n=new p,{where:l,timeExtent:u}=this.createQuery();return n.where=S(l,e.sqlWhere),n.outPivots=[new y({sourceFields:e.fields,valueFieldName:s})],n.outStatistics=[o],n.groupByFieldsForStatistics=[a],n.orderByFields=[a],n.timeExtent=u,R(n,e.filter),this._isStatsSupportedOnService().then(()=>this.layer.queryPivot(n,{signal:e.signal})).then(e=>I(e,t,i,r))}async _histogramFromQueryAttributeBins(e){const{field:t,normalizationType:i,filter:s,signal:r}=e,a=await this._getNormalizationTotal(t,i,s,r),{query:o,min:n,max:l}=await z(e,this,a,this.createQuery());if(!o)return{bins:[],minValue:n,maxValue:l,normalizationTotal:a};const u=await this.layer.queryAttributeBins(o,{signal:r});return Q(u,t?this.getField(t):null,{minValue:n,maxValue:l,normalizationTotal:a})}_classBreaksFromGenRend(e){const{field:t,normalizationType:i,normalizationField:s,normalizationTotal:r,signal:a}=e,o=w({field:t,normalizationType:i,normalizationField:s}),n=k({field:t,normalizationType:i,normalizationField:s,normalizationTotal:r,layer:this}),l=g(n,e.minValue,e.maxValue),u=Z({field:t,normalizationType:i,normalizationField:s,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||Y}),c=new m({classificationDefinition:u});return c.where=S(o,l),this.generateRenderer(c,a).then(t=>K(t,e.classificationMethod))}async summaryStatistics(e){const{field:t,fields:i,normalizationType:a,valueExpression:o,sqlExpression:n,view:u,features:c,useFeaturesInView:m}=e,p=t?this.getField(t):null,h=_(p)||l(p),d=o&&!(n&&this.supportsSQLExpression),y=this._hasLocalSource||c||m,f=u&&\"3d\"===u.type;if(i?.length){const t={...e,fields:i};if(!this.layer.capabilities?.operations?.supportsQueryPivot)return await this._summaryStatsForFields(t);try{return await this._summaryStatsUsingQueryPivot(t)}catch{return await this._summaryStatsForFields(t)}}if(y||d)return d||c||m||f||this._hasLocalSource&&!this.layer.capabilities.query.supportsStatistics?this._summaryStatsFromMemory(e,p):this._summaryStatsFromClientQuery(e,p);if(!this.supportsSQLExpression&&(h||n||\"natural-log\"===a||\"square-root\"===a))throw new s(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return(a&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(e):this._summaryStatsFromServiceQuery(e,p)).catch(()=>(r(e.signal),this._summaryStatsFromMemory(e,p)))}async uniqueValues(e){const{valueExpression:t,sqlExpression:i,features:s,useFeaturesInView:a,signal:o}=e,n=t&&!(i&&this.supportsSQLExpression),l=this._hasLocalSource||s||a||n,u=e.view,c=u&&\"3d\"===u.type,m=await A(e,this);return l?n||s||a||c||this._hasLocalSource&&!this.layer.capabilities.query.supportsStatistics?this._uvFromMemory(e,m):this._uvFromClientQuery(e,m):this._uvFromServiceQuery(e,m).catch(t=>(r(o),!e.field||e.field2||e.field3||e.filter?t:this._uvFromGenRenderer(e,m[0]))).catch(()=>(r(o),c?this._uvFromMemory(e,m):this._uvFromClientQuery(e,m)))}async histogram(e){const{field:t,normalizationType:i,normalizationField:a,classificationMethod:o,view:n,filter:u,signal:c}=e,m=t?this.getField(t):null,p=_(m)||l(m),h=e.valueExpression||e.sqlExpression,d=e.valueExpression&&!(e.sqlExpression&&this.supportsSQLExpression),y=this._hasLocalSource||e.features||e.useFeaturesInView||d,f=this.supportsSQLExpression,F=!o||\"equal-interval\"===o,S=e.minValue,w=e.maxValue,v=null!=S&&null!=w,x=e.numBins||P;if(e.fields?.length){if(!f)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");if(!this.layer.capabilities?.operations?.supportsQueryPivot)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support pivot queries\");return this._histogramForFields(e)}if(y)return this._histogramFromMemory(e);if(this.layer.capabilities?.operations?.supportsQueryBins&&e.useQueryAttributeBins)try{return await this._histogramFromQueryAttributeBins(e)}catch{return r(c),this._histogramFromQueryAttributeBinsFromMemory(e)}if((h||f)&&F){if(!f&&(h||\"natural-log\"===i||\"square-root\"===i))throw new s(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return this._histogramForExpr(e)}if(p&&F)throw new s(`${this.adapterName}:not-supported`,\"Normalization and date field are not allowed when layer does not support standardized SQL expression for queries\");return i||!F?T(e,this).then(r=>{if(!v)return U(this,r,t,x,n,u,c);if(S>r.max||w<r.min)throw new s(`${this.adapterName}:insufficient-data`,\"Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field\");if(F)return U(this,{min:S,max:w,sqlExpr:r.sqlExpr,excludeZerosExpr:r.excludeZerosExpr},t,x,n,u,c);{const s={field:t,normalizationType:i,normalizationField:a,normalizationTotal:r.normTotal,layer:this},o=k(s),l=g(o,S,w);return T(e,this,l).then(e=>U(this,e,t,x,n,u,c))}}):this._histogramForField(e)}async classBreaks(e){const t=!1!==e.analyzeData,i=this._hasLocalSource||e.features||e.useFeaturesInView||e.valueExpression||e.filter;if(t&&i)return this._classBreaksFromMemory(e);return(t?this._classBreaksFromGenRend(e):this._classBreaksFromInterpolation(e)).catch(()=>(r(e.signal),this._classBreaksFromMemory(e)))}async queryFeatureCount(e){if(this._hasLocalSource)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support count query\");const t=this.layer,i=t.createQuery();return i.where=S(i.where,e.whereClause),R(i,e.filter),t.queryFeatureCount(i,{signal:e.signal})}async generateRenderer(e,t){const i=this.layer;if(this._hasLocalSource||i.version<10.1)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)\");const r=i.createQuery();return e.where=S(e.where,r.where),c(i.parsedUrl?.path??\"\",{source:i.dynamicDataSource??void 0,gdbVersion:i.gdbVersion??void 0},e,{signal:t})}async predominantCategories(e){if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new s(`${this.adapterName}:not-supported`,\"Layer does not support advanced SQL expressions and standardized queries\");const{fields:t,view:i,signal:r,filter:a}=e,o=f(t),n=F(t),l=i&&this._hasLocalSource?await this._uvFromMemory({valueExpression:o,view:i,signal:r,filter:a}):await this._uvFromServiceQuery({sqlExpression:n.expression,valueExpression:o,signal:r,filter:a});return D(l.uniqueValueInfos,t)}async getSampleFeatures(e,s){const{view:a,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e,c=e.sampleSize;if(null==c||0===c)return[];const m=this.layer.createQuery(),p=1,h=\"json\"===s;m.outSpatialReference=a?.spatialReference,m.returnGeometry=!!n,m.outFields=o,R(m,l);let d=[],y=!1;if(a)try{const r=await a.whenLayerView(this.layer);if(y=!G(this,o,r).length,y){if(c>=1&&!e.filter&&\"getSampleFeatures\"in r){await this._waitForLayerViewUpdate(r);const e=await r.getSampleFeatures({minFeatureCount:c,sampleSize:c});if(null!=e)return h?e:e.map(e=>t.fromJSON(e))}if(d=await this._fetchFeaturesFromMemory(r,m,u,s),d.length>=c&&c>0)return i(d,c,p)}}catch(f){r(u)}try{if(this._hasLocalSource)return y?d:h?await this._fetchFeaturesJSONFromService(m,u):await this._fetchFeaturesFromService(m,u);const t=await this.queryFeatureCount({view:a,filter:l,signal:u}),s=this.layer.capabilities.query.maxRecordCount;let r=-1===c?t:c;if(r=s&&r>s?s:r,t<=d.length||d.length>=s)return d;if(m.maxAllowableOffset=e.resolution||(a?a.extent.width/a.width/a.scale:X(this.layer.spatialReference))*te,t<=r)return h?await this._fetchFeaturesJSONFromService(m,u):await this._fetchFeaturesFromService(m,u);if(t<=ee){const e=this.layer.createQuery();R(e,l);const t=await this.layer.queryObjectIds();return m.objectIds=i(t,r,p),h?await this._fetchFeaturesJSONFromService(m,u):await this._fetchFeaturesFromService(m,u)}return this.layer.capabilities?.query?.supportsPagination&&(m.num=Math.min(r,ee)),h?await this._fetchFeaturesJSONFromService(m,u):await this._fetchFeaturesFromService(m,u)}catch(f){return r(u),d}}load(e){const t=this.layer.load(e).then(async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=t.capabilities?.query?.supportsSqlExpression,this._hasLocalSource=\"parquet\"===t.type||!t.url&&!!t.source,this.hasQueryEngine=this._hasLocalSource,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=t.fullExtent,this.workerClient=v.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};function se(e,t,i){const s=[],r=t.length;return t.forEach((t,a)=>{const[o,n]=t;let l=null;l=0!==a||i?a!==r-1||i?S(`${e} >= ${o}`,`${e} ${a===r-1?\" <= \":\" < \"} ${n}`):`${e} >= ${o}`:`${e} < ${n}`,s.push(\"WHEN (\"+l+\") THEN \"+(a+1))}),[\"CASE\",s.join(\" \"),\"ELSE 0\",\"END\"].join(\" \")}e([a({readOnly:!0})],ie.prototype,\"adapterName\",void 0),e([a({constructOnly:!0})],ie.prototype,\"layer\",void 0),ie=e([o(\"esri.smartMapping.support.adapters.FeatureLayerAdapter\")],ie);export{ie as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{createGenerateRendererClassBreaks as s,createGenerateRendererUniqueValues as o}from\"../../../rest/support/generateRendererUtils.js\";import{getDataValues as a,mergeWhereClauses as n}from\"../../statistics/support/utils.js\";import{WorkerClient as l}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as p}from\"../utils.js\";import c from\"./FeatureLayerAdapter.js\";import{ensureFeaturesJSON as m}from\"./support/utils.js\";let u=class extends c{constructor(){super(...arguments),this.adapterName=\"csv-layer-adapter\"}async _createGenerateRendererResult(e,r,i,n,l){const p=e?.features,c=p?.length;if(!c)throw new t(\"csv-layer-adapter:insufficient-data\",\"No features are available to calculate statistics\");const u=m(p);let d=null;if(\"percent-of-total\"===n){if(d=(await this.workerClient.summaryStatistics({field:r},u)).sum,null==d)throw new t(\"csv-layer-adapter:invalid\",\"invalid normalizationTotal\")}if(\"class-breaks-definition\"===l?.type){const e=(await a({field:r,normalizationType:n,normalizationField:i,normalizationTotal:d},u)).filter(e=>Number.isFinite(e));return s({definition:l,values:e,normalizationTotal:d})}const f=(await a({field:r},u)).filter(e=>null!=e&&\"string\"==typeof e&&\"\"!==e.trim());return o(f)}generateRenderer(e,t){const r=e.classificationDefinition;let i=null,s=null,o=null;\"class-breaks-definition\"===r?.type?(i=r.classificationField,s=r.normalizationField,o=r.normalizationType):i=r?.attributeField;const a=this.layer;return p({field:i,normalizationField:s}).then(l=>{const p=a.createQuery();return p.returnGeometry=!1,p.outFields=l,p.where=n(p.where,e.where),a.queryFeatures(p,{signal:t}).then(e=>this._createGenerateRendererResult(e,i,s,o,r))})}load(e){const t=this.layer.load(e).then(async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=!0,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=l.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};e([r({readOnly:!0})],u.prototype,\"adapterName\",void 0),u=e([i(\"esri.smartMapping.support.adapters.CSVLayerAdapter\")],u);export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{pickRandom as t}from\"../../../core/arrayUtils.js\";import a from\"../../../core/Error.js\";import{assertIsSome as r}from\"../../../core/maybe.js\";import{throwIfAborted as i}from\"../../../core/promiseUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{kebabDict as n}from\"../../../layers/support/fieldType.js\";import{isTimeOnlyField as l}from\"../../../layers/support/fieldUtils.js\";import{getArcadeForPredominantCategory as u}from\"../../statistics/support/predominanceUtils.js\";import{summaryStatistics as m,uniqueValues as p,histogram as y,classBreaks as g}from\"../../statistics/support/statsWorker.js\";import{mergeWhereClauses as d}from\"../../statistics/support/utils.js\";import{WorkerClient as c}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as f,fieldDelimiter as h,isAnyDateField as w}from\"../utils.js\";import F from\"./FeatureLayerAdapter.js\";import{getMissingFieldsForBinning as S,updateQueryWithFeatureFilter as v,getFeatureReductionFields as q,getViewInfoParams as V,getDomainsForFields as z,getPredominantCategoriesFromUVInfos as N}from\"./support/utils.js\";let T=class extends F{constructor(){super(...arguments),this.adapterName=\"feature-layer-binning-adapter\"}async _getNormalizationTotalFromMemory(e,t,r){const{featuresJSON:i,graphics:s,layerView:o,query:n}=t,l={include:[\"sum\"]},u=(!i&&!s&&o&&\"queryAggregateSummaryStatistics\"in o?await o.queryAggregateSummaryStatistics(n,{field:e,outStatisticTypes:l},{signal:r}):i?await this.workerClient.summaryStatistics({field:e},i):await m({attribute:{field:e,outStatisticTypes:l},features:s})).sum;if(null==u)throw new a(`${this.adapterName}:invalid`,\"invalid normalizationTotal\");return u}async _processStatsFromMemoryParams(e){const{features:t,filter:i}=e;if(t?.length)return this._getFilteredFeatures(t,i);const{view:s,field:o,field2:n,field3:l,normalizationField:u,valueExpression:m,returnGeometry:p,layerViewFunc:y,signal:g}=e;let d=null,c=null,h=null,w=null,F=null;if(s)try{if(d=await s.whenLayerView(this.layer),r(d),c=null!=y&&y in d&&\"function\"==typeof d[y],c){await this._waitForLayerViewUpdate(d);const e=await f({field:o,field2:n,field3:l,normalizationField:u,valueExpression:m});S(this,e).length?c=!1:(h=\"createAggregateQuery\"in d?d.createAggregateQuery():null,h?(h.outFields=e,h.returnGeometry=!1,v(h,i)):c=!1),d.suspended&&(c=!1)}}catch{c=!1}if(!c&&(F=q(this.layer).map(e=>e.toJSON()),w=await this._fetchFeaturesForStats({field:o,field2:n,field3:l,valueExpression:m,normalizationField:u,returnGeometry:p,filter:i,view:s,signal:g},\"json\"),!w?.length))throw new a(`${this.adapterName}:insufficient-data`,\"No features are available to calculate statistics\");return{layerView:d,query:h,featuresJSON:w,fieldInfos:F}}async _summaryStatsFromMemory(e,t){const{view:a,field:r,valueExpression:i,normalizationType:s,signal:o}=e,l={field:r,valueExpression:i,normalizationType:s,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:u,graphics:p,layerView:y,query:g,fieldInfos:d}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateSummaryStatistics\"});return i&&a&&(u||p)&&(l.fieldType=t?.type?n.toJSON(t.type):null,l.viewInfoParams=V(a),l.timeZone=a.timeZone,l.fieldInfos=d),\"percent-of-total\"===s&&null==e.normalizationTotal&&(l.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:u,graphics:p,layerView:y,query:g},o)),!u&&!p&&y&&\"queryAggregateSummaryStatistics\"in y?y.queryAggregateSummaryStatistics(g,l,{signal:o}):u?this.workerClient.summaryStatistics(l,u):m({attribute:l,features:p})}async _uvFromMemory(e,t){const{view:a,field:r,valueExpression:i,returnAllCodedValues:s,signal:o}=e,{featuresJSON:n,graphics:l,layerView:u,query:m,fieldInfos:y}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateUniqueValues\"}),g={field:r,field2:e.field2,field3:e.field3,fieldDelimiter:h,valueExpression:i,domains:t,returnAllCodedValues:s};return i&&a&&(n||l)&&(g.viewInfoParams=V(a),g.timeZone=a.timeZone,g.fieldInfos=y),!n&&!l&&u&&\"queryAggregateUniqueValues\"in u?u.queryAggregateUniqueValues(m,g,{signal:o}):n?this.workerClient.uniqueValues(g,n):p({attribute:g,features:l})}async _histogramFromMemory(e){const{view:t,field:a,valueExpression:r,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateHistogram\"}),m={field:a,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return r&&t&&(s||o)&&(m.viewInfoParams=V(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryAggregateHistogram\"in n?n.queryAggregateHistogram(l,m,{signal:i}):s?this.workerClient.histogram(m,s):y({attribute:m,features:o})}async _classBreaksFromMemory(e){const{view:t,field:a,valueExpression:r,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateClassBreaks\"}),m={field:a,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return r&&t&&(s||o)&&(m.viewInfoParams=V(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryAggregateClassBreaks\"in n?n.queryAggregateClassBreaks(l,m,{signal:i}):s?this.workerClient.classBreaks(m,s):g({attribute:m,features:o})}getField(e=\"\"){const t=q(this.layer);return t?.find(t=>t.name.toLowerCase()===e?.toLowerCase())}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!1,supportsStatistics:!0}:null}getFieldDomain(e,t){return null}async summaryStatistics(e){const{field:t}=e,r=t?this.getField(t):null,i=w(r)||l(r),s=e.sqlExpression&&!e.valueExpression&&!t;if(i||s)throw new a(`${this.adapterName}:not-supported`,\"Date field and sqlExpression are not supported\");return this._summaryStatsFromMemory(e,r)}async uniqueValues(e){const t=await z(e,this);return this._uvFromMemory(e,t)}async histogram(e){const{field:t}=e,r=t?this.getField(t):null,i=w(r)||l(r),s=e.sqlExpression&&!e.valueExpression&&!t;if(i||s)throw new a(`${this.adapterName}:not-supported`,\"Date field and sqlExpression are not supported\");return this._histogramFromMemory(e)}async classBreaks(e){return(!1!==e.analyzeData?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)).catch(()=>(i(e.signal),this._classBreaksFromMemory(e)))}async queryFeatureCount(e){const t=await(e.view?.whenLayerView(this.layer));if(!t||!(\"queryAggregateCount\"in t)||!t.queryAggregateCount)throw new a(`${this.adapterName}:not-supported`,\"LayerView is not supported.\");await this._waitForLayerViewUpdate(t);const r=t.createAggregateQuery();return r.where=d(r.where,e.whereClause),v(r,e.filter),t.queryAggregateCount(r,{signal:e.signal})}generateRenderer(e,t){throw new a(`${this.adapterName}:not-supported`,\"'generateRenderer' is not supported.\")}heatmapStatistics(e){throw new a(`${this.adapterName}:not-supported`,\"'heatmapStatistics' is not supported.\")}async predominantCategories(e){const{fields:t,view:a,signal:r}=e,i=u(t),s=await this._uvFromMemory({valueExpression:i,view:a,signal:r});return N(s.uniqueValueInfos,t)}async getSampleFeatures(e,r){const{view:i,sampleSize:s,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e;if(!i)throw new a(`${this.adapterName}:not-supported`,\"'view' is required to get sample features for binning.\");if(\"3d\"===i.type)throw new a(`${this.adapterName}:not-supported`,\"3d 'view' is not supported to get sample features for binning.\");const m=await i.whenLayerView(this.layer);if(!(\"queryAggregateJSON\"in m&&m.queryAggregateJSON&&\"queryAggregates\"in m&&m.queryAggregates))throw new a(`${this.adapterName}:not-supported`,\"LayerView is not supported.\");await this._waitForLayerViewUpdate(m);if(S(this,o).length)throw new a(`${this.adapterName}:insufficient-data`,\"Layer does not have required fields\");const p=1,y=\"json\"===r,g=m.createAggregateQuery();g.outSpatialReference=i?.spatialReference,g.returnGeometry=!!n,g.outFields=o,v(g,l);const{features:d}=y?await m.queryAggregateJSON(g,{signal:u}):await m.queryAggregates(g,{signal:u});return d.length&&null!=s&&s>0&&s<=d.length?t(d,s,p):d}load(e){const t=this.layer.load(e).then(async t=>{const r=\"featureReduction\"in t?t.featureReduction:null;if(\"binning\"!==r?.type&&\"cluster\"!==r?.type)throw new a(`${this.adapterName}:invalid-parameters`,`Feature reduction type ${r?.type} is not supported`);this.geometryType=\"cluster\"===r?.type?\"point\":\"polygon\",this.objectIdField=null,this.supportsSQLExpression=!1,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=t.fullExtent,this.workerClient=c.getInstance(),await this.workerClient.open(e.signal)});return this.addResolvingPromise(t),Promise.resolve(this)}};e([s({readOnly:!0})],T.prototype,\"adapterName\",void 0),T=e([o(\"esri.smartMapping.support.adapters.FeatureLayerBinningAdapter\")],T);const x=T;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../Graphic.js\";import{pickRandom as r}from\"../../../core/arrayUtils.js\";import a from\"../../../core/Error.js\";import{timeout as s,throwIfAborted as i}from\"../../../core/promiseUtils.js\";import{whenOnce as o}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{kebabDict as u}from\"../../../layers/support/fieldType.js\";import{isNumericField as p}from\"../../../layers/support/fieldUtils.js\";import m from\"../../../rest/support/FeatureSet.js\";import{summaryStatistics as c,uniqueValues as d,classBreaks as h,histogram as y}from\"../../statistics/support/statsWorker.js\";import{WorkerClient as f}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as g,isAnyDateField as w,fieldDelimiter as F}from\"../utils.js\";import _ from\"./FeatureLayerAdapter.js\";import S from\"./LayerAdapter.js\";import{getMissingFields as v,ensureFeaturesJSON as x,getViewInfoParams as L,getUniqueValuesFromFeatureSet as E,getHistogramFromFeatureSet as C,getDomainsForFields as T}from\"./support/utils.js\";import{createUVResult as z}from\"../../../statistics/utils.js\";let A=class extends S{constructor(e){super(e),this._featureLayerAdapter=null,this.workerClient=null,this.adapterName=\"scene-layer-adapter\"}destroy(){this.workerClient?.destroy()}_hasCachedStatistics(e){return this.layer.hasCachedStatistics(e)}_updateQuery(e,t=[],r=[]){if(!e||!r.length)return e;const a=this.layer.objectIdField,s=e.clone(),i=t.filter(e=>{const t=this.layer.getField(e);return!r.includes(t.name)}),o=i.some(e=>this.layer.getField(e).name===a);return s.outFields=o?i:[...i,a],s}async _fetchFeaturesFromMemory(e,t,r){if(!e)throw new a(\"scene-layer-adapter:insufficient-data\",\"view is required to fetch the features from layerView\");const n=await e.whenLayerView(this.layer),l=new AbortController,u=l.signal,p=o(()=>!n.updating,u);await s(p,5e3,l);const m=v(this,r,n);i(u);const c=this._updateQuery(t,r??[],m),d=await n.queryFeatures(c,{signal:u});i(u);const h=d.features;return m.length?n.whenGraphicAttributes(h,m):h}async _fetchFeaturesJSONFromMemory(e,t,r){return this._fetchFeaturesFromMemory(e,t,r).then(x)}_fetchFeaturesForStats(e,t){return g({field:e.field,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then(r=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,requiredFields:r,signal:e.signal},t))}async _processStatsFromMemoryParams(e){const t=e.features;if(t?.length){return t.length&&\"declaredClass\"in t[0]&&\"esri.Graphic\"===t[0].declaredClass?{graphics:t}:{featuresJSON:t}}const{view:r,field:s,normalizationField:i,valueExpression:o,signal:n}=e,l=await this._fetchFeaturesForStats({field:s,valueExpression:o,normalizationField:i,view:r,signal:n},null);if(!l?.length)throw new a(\"scene-layer-adapter:insufficient-data\",\"No features are available to calculate statistics\");return{graphics:l}}_getCachedStatistics(e,t){const r=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.minValue||e.maxValue?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified\")):r.queryCachedStatistics(t?.name,{signal:e.signal}).then(e=>{const t=e.stats,{min:r,max:a,totalValuesCount:s}=t;let{avg:i,stddev:o,sum:n,variance:l,count:u}=t;return 0===r&&0===a||(i=0===i?null:i,n=0===n?null:n,o=0===o?null:o,l=0===l?null:l,u=0===u?null:u),null==u&&(null!=n&&null!=i?u=Math.round(n/i):null!=s&&(u=s)),{avg:i,count:u,max:a,min:r,stddev:o,sum:n,variance:l}})}async _getNormalizationTotal(e,t,r){const s={include:[\"sum\"]},i=(t?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:s},t):await c({attribute:{field:e,outStatisticTypes:s},features:r})).sum;if(null==i)throw new a(\"scene-layer-adapter:invalid\",\"invalid normalizationTotal\");return i}async _getSummaryStatisticsFromMemory(e,t){const{view:r,field:a,normalizationField:s,valueExpression:i}=e,{featuresJSON:o,graphics:n}=await this._processStatsFromMemoryParams(e),l={field:a,valueExpression:i,normalizationType:e.normalizationType,normalizationField:s,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes};return e.valueExpression&&r&&o&&(l.fieldType=t?.type?u.toJSON(t.type):null,l.viewInfoParams=L(r),l.timeZone=r.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(l.normalizationTotal=await this._getNormalizationTotal(a,o,n)),o?this.workerClient.summaryStatistics(l,o):c({attribute:l,features:n})}_getCachedStatisticsForUniqueValues(e,r){const s=this.layer,i=r?.name,o=r&&e.field?this.getFieldDomain(e.field):null;return e.valueExpression||e.sqlExpression||e.sqlWhere?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified\")):s.queryCachedStatistics(i,{signal:e.signal}).then(a=>{const o=a.stats;if(!o.mostFrequentValues)throw new Error;const n=a.labels?.labels,l={},u=[],c=\"countOF\"+i;o.mostFrequentValues.forEach(e=>{const a=new t({attributes:{}});a.attributes[i]=r&&r.name!==s.objectIdField&&(p(r)||w(r))?Number(e.value):e.value,a.attributes[c]=e.count,u.push(a)}),n&&n.forEach(e=>{l[e.value]=e.label});const d=new m({features:u});return E(d,{layer:this,field:e.field,labels:l,view:e.view,signal:e.signal})}).then(t=>z(t,[o],e.returnAllCodedValues))}async _getUniqueValuesFromMemory(e,t){const{view:r,field:a,field2:s,field3:i,valueExpression:o,returnAllCodedValues:n}=e,l={field:a,field2:s,field3:i,fieldDelimiter:F,valueExpression:o,domains:t,returnAllCodedValues:n},{featuresJSON:u,graphics:p}=await this._processStatsFromMemoryParams(e);return e.valueExpression&&r&&u&&(l.viewInfoParams=L(r),l.timeZone=r.timeZone),u?this.workerClient.uniqueValues(l,u):d({attribute:l,features:p})}_getCachedStatisticsForHistogram(e,t){const r=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.normalizationType?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified\")):r.queryCachedStatistics(t&&t.name,{signal:e.signal}).then(t=>{const r=t.stats,{minValue:a,maxValue:s}=e,i=null!=a?a:r.min,o=null!=s?s:r.max,n=e.numBins||10,l=V(r.histogram,i,o,n);return C(l,i,o,n)})}async _getClassBreaksFromMemory(e){const{view:t,field:r,normalizationField:a,valueExpression:s}=e,{featuresJSON:i,graphics:o}=await this._processStatsFromMemoryParams(e),n={field:r,valueExpression:s,normalizationType:e.normalizationType,normalizationField:a,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return e.valueExpression&&t&&i&&(n.viewInfoParams=L(t),n.timeZone=t.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(n.normalizationTotal=await this._getNormalizationTotal(r,i,o)),i?this.workerClient.classBreaks(n,i):h({attribute:n,features:o})}async _getHistogramFromMemory(e){const{view:t,field:r}=e,{featuresJSON:a,graphics:s}=await this._processStatsFromMemoryParams(e),i={field:r,valueExpression:e.valueExpression,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return e.valueExpression&&t&&a&&(i.viewInfoParams=L(t),i.timeZone=t.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(i.normalizationTotal=await this._getNormalizationTotal(r,a,s)),a?this.workerClient.histogram(i,a):y({attribute:i,features:s})}getField(e){return this.layer.getField(e??\"\")}getFieldUsageInfo(e){const t=this.getField(e);if(!t)return null;const r=this.layer.getFieldUsageInfo(t.name);return{supportsLabelingInfo:r.supportsLabelingInfo,supportsPopupTemplate:r.supportsPopupTemplate,supportsRenderer:r.supportsRenderer,supportsLayerQuery:r.supportsLayerQuery,supportsStatistics:!0}}getFieldDomain(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(e,t):null}createQuery(){return this.layer.createQuery()}summaryStatistics(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.summaryStatistics(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return this._hasCachedStatistics(t?.name)?this._getCachedStatistics(e,t).catch(()=>(i(e.signal),this._getSummaryStatisticsFromMemory(e,t))):this._getSummaryStatisticsFromMemory(e,t)}async uniqueValues(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.uniqueValues(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");const t=await T(e,this),{field:r,field2:s}=e,o=r&&s,n=this.getField(r);return!o&&n&&this._hasCachedStatistics(n.name)?this._getCachedStatisticsForUniqueValues(e,n).catch(()=>(i(e.signal),this._getUniqueValuesFromMemory(e,t))):this._getUniqueValuesFromMemory(e,t)}histogram(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.histogram(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return t&&this._hasCachedStatistics(t.name)?this._getCachedStatisticsForHistogram(e,t).catch(()=>(i(e.signal),this._getHistogramFromMemory(e))):this._getHistogramFromMemory(e)}classBreaks(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.classBreaks(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return this._hasCachedStatistics(t?.name)?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"Cached stats not supported\")):this._getClassBreaksFromMemory(e)}queryFeatureCount(e){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(e):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support count query\"))}generateRenderer(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(e,t):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support generateRenderer operation\"))}heatmapStatistics(e){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(e):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support heatmapStatistics operation\"))}async predominantCategories(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.predominantCategories(e);throw new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support predominantCategories\")}async getSampleFeatures(e,t){if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");const{view:s,sampleSize:o,requiredFields:n,returnGeometry:l,signal:u}=e,p=1,m=\"json\"===t,c=this.createQuery();c.outFields=n,c.returnGeometry=!!l,c.where=null,c.num=o;let d=[];try{if(d=m?await this._fetchFeaturesJSONFromMemory(s,c,n):await this._fetchFeaturesFromMemory(s,c,n),d.length&&null!=o&&o>0&&o<=d.length)return r(d,o,p)}catch(y){i(u)}let h=null;if(this._featureLayerAdapter){const r={...e};delete r.view,h=await this._featureLayerAdapter.getSampleFeatures(r,t)}return h?.length?h:r(d,d.length,p)}load(e){const t=this.layer.load(e).then(async t=>{this.workerClient=f.getInstance(),await this.workerClient.open(e.signal);const r=t.associatedLayer;if(this.geometryType=t.geometryType,null!=r){this._featureLayerAdapter=new _({layer:r});return this._featureLayerAdapter.load(e).then(()=>{this.objectIdField=this._featureLayerAdapter.objectIdField,this.supportsSQLExpression=this._featureLayerAdapter.supportsSQLExpression,this.minScale=this._featureLayerAdapter.minScale,this.maxScale=this._featureLayerAdapter.maxScale,this.fullExtent=this._featureLayerAdapter.fullExtent})}this.objectIdField=t.objectIdField,this.supportsSQLExpression=!1,this.hasQueryEngine=!1,this.fullExtent=t.fullExtent});return this.addResolvingPromise(t),Promise.resolve(this)}};function V(e,r=e.minimum,a=e.maximum,s){const i=[];for(let t=0;t<s;t++)i[t]=0;const o=e.counts.length,n=e.minimum,l=e.maximum;for(let t=0;t<o;t++){const u=(t+.5)/o,p=((1-u)*n+u*l-r)/(a-r)*s;p>=0&&p<=s&&(i[p===s?s-1:Math.floor(p)]+=e.counts[t])}const u=[];return i.forEach((e,r)=>{const a=new t({attributes:{}});a.attributes.EXPR_1=r+1,a.attributes.countOFExpr=e,u.push(a)}),new m({features:u})}e([n({readOnly:!0})],A.prototype,\"adapterName\",void 0),e([n({constructOnly:!0})],A.prototype,\"layer\",void 0),A=e([l(\"esri.smartMapping.support.adapters.SceneLayerAdapter\")],A);export{A as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./SceneLayerAdapter.js\";let o=class extends s{constructor(e){super(e),this.adapterName=\"point-cloud-layer-adapter\"}getField(e){return this.layer.fieldsIndex.get(e??\"\")}getFieldUsageInfo(e){const r=this.getField(e);if(!r)return null;const t=this._hasCachedStatistics(r.name);return{supportsLabelingInfo:t,supportsPopupTemplate:t,supportsRenderer:t,supportsLayerQuery:!1,supportsStatistics:t}}getFieldDomain(){return null}load(e){const r=this.layer.load(e).then(()=>{this.geometryType=\"point\",this.objectIdField=null,this.supportsSQLExpression=!1,this.hasQueryEngine=!1});return this.addResolvingPromise(r),Promise.resolve(this)}};e([r({readOnly:!0})],o.prototype,\"adapterName\",void 0),o=e([t(\"esri.smartMapping.support.adapters.PointCloudLayerAdapter\")],o);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isTimeOnlyField as o}from\"../../../layers/support/fieldUtils.js\";import{isAnyDateField as e}from\"../utils.js\";import a from\"./InMemoryLayerAdapter.js\";import{getSummaryStatsQuery as i,getSummaryStatisticsFromFeatureSet as p}from\"./support/utils.js\";import{processSummaryStatisticsResult as m}from\"../../../statistics/utils.js\";let c=class extends a{constructor(){super(...arguments),this.adapterName=\"stream-layer-adapter\"}async _summaryStatsFromClientQuery(t,r){const{signal:s,view:a}=t,c=i(this,t,r);c.outStatistics=c.outStatistics?.filter(t=>\"totalcount_value\"!==t.outStatisticFieldName);const u=await this._fetchFeatureSetFromMemory(c,a,s),l=p(u,e(r)||o(r));return m(l,t.outStatisticTypes)}};t([r({readOnly:!0})],c.prototype,\"adapterName\",void 0),c=t([s(\"esri.smartMapping.support.adapters.StreamLayerAdapter\")],c);export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../CSVLayerAdapter.js\";import a from\"../FeatureLayerAdapter.js\";import r from\"../FeatureLayerBinningAdapter.js\";import t from\"../InMemoryLayerAdapter.js\";import p from\"../LayerAdapter.js\";import y from\"../PointCloudLayerAdapter.js\";import l from\"../SceneLayerAdapter.js\";import o from\"../StreamLayerAdapter.js\";const n={0:{adapter:a,type:\"catalog\",label:\"CatalogLayer\"},1:{adapter:a,type:\"catalog-footprint\",label:\"CatalogFootprintLayer\"},2:{adapter:e,type:\"csv\",label:\"CSVLayer\"},3:{adapter:a,type:\"feature\",label:\"FeatureLayer\"},5:{adapter:a,type:\"imagery\",label:\"ImageryLayer\"},4:{adapter:a,type:\"geojson\",label:\"GeoJSONLayer\"},6:{adapter:a,type:\"knowledge-graph-sublayer\",label:\"KnowledgeGraphSublayer\"},7:{adapter:t,type:\"ogc-feature\",label:\"OGCFeatureLayer\"},8:{adapter:a,type:\"oriented-imagery\",label:\"OrientedImageryLayer\"},9:{adapter:a,type:\"parquet\",label:\"ParquetLayer\"},10:{adapter:y,type:\"point-cloud\",label:\"PointCloudLayer\"},11:{adapter:l,type:\"scene\",label:\"SceneLayer\"},12:{adapter:o,type:\"stream\",label:\"StreamLayer\"},13:{adapter:a,type:\"subtype-group\",label:\"SubtypeGroupLayer\"},14:{adapter:a,type:\"subtype-sublayer\",label:\"SubtypeSublayer\"},15:{adapter:a,type:\"wfs\",label:\"WFSLayer\"}},u=[0,1,2,3,4,6,7,8,9,10,11,12,13,14,15],d=[1,2,3,4,6,7,8,9,11,12,13,14,15],m=[2,3,4,7,6,8,9,12,15];function b(e){return e.map(e=>n[e].label)}function i(e){return e.map(e=>n[e].type)}function s(e,a=u,t){if(e instanceof p)return e;const y=L(e,a);return y?t?new r({layer:e}):new y({layer:e}):null}function L(e,a=u){let r=null;return a.some(a=>{const t=e.type===n[a].type;return t&&(r=n[a].adapter),t}),r}export{m as binningCapableLayerTypes,s as createLayerAdapter,u as defaultSupportedLayerTypes,d as featureCapableLayerTypes,b as getLayerTypeLabels,i as getLayerTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{verifyBasicFieldValidity as i,verifyFilterValidity as s}from\"./support/utils.js\";import{verifyBinningParams as r}from\"../support/binningUtils.js\";import{getFieldsList as a}from\"../support/utils.js\";import{binningCapableLayerTypes as n,createLayerAdapter as t,getLayerTypeLabels as l,defaultSupportedLayerTypes as o}from\"../support/adapters/support/layerUtils.js\";async function u(u){if(!u?.layer||!u.field&&!u.valueExpression)throw new e(\"unique-values:missing-parameters\",\"'layer' and 'field' or 'valueExpression' parameters are required\");const p=u.valueExpression||u.sqlExpression,f=p&&!u.sqlExpression;if(p)if(f){if(!u.view)throw new e(\"unique-values:missing-parameters\",\"View is required when 'valueExpression' is specified\")}else if(!u.valueExpression)throw new e(\"unique-values:missing-parameters\",\"'valueExpression' parameters are required\");u.forBinning&&r(u,\"unique-values\");const{layer:m,...d}=u,v=[...o,5],w=u.forBinning?n:v,c=t(m,w,u.forBinning);if(!c)throw new e(\"unique-values:invalid-parameters\",\"'layer' must be one of these types: \"+l(w).join(\", \"));const q={layerAdapter:c,...d},x=null!=q.signal?{signal:q.signal}:null;await c.load(x);const y=await a({field:q.field,field2:q.field2,field3:q.field3,valueExpression:q.valueExpression}),E=i(c,y,\"unique-values:invalid-parameters\");if(E)throw E;q.filter&&!q.filter.spatialRelationship&&(q.filter.spatialRelationship=\"intersects\");const g=s(q.filter,\"summary-statistics:invalid-parameters\");if(g)throw g;return q}async function p(e){const{layerAdapter:i,...s}=await u(e);return i.uniqueValues(s)}export{p as default};\n"],"names":["i","r","n$1","n","e","t","f","o","m","c","u","p","has","d","s","l","a","y","V","E","S","T","$","z","j","q","C","b","x","O","L","R","w","D","F","N","U","I","Q","v","M","P","_","B","W","k","A","H","Z","J","g","h","X","G","K","Y","tt","et","ee","te","ie","se"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}