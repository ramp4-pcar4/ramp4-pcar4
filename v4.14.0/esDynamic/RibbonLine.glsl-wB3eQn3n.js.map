{"version":3,"file":"RibbonLine.glsl-wB3eQn3n.js","sources":["../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DirtyEvents.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/NoPerspective.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/stippleTextureRepository.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ensureColor4.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js","../../node_modules/@arcgis/core/views/3d/support/engineContent/marker.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/AnimatedLine.glsl.js","../../node_modules/@arcgis/core/chunks/RibbonLine.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js","../../node_modules/@arcgis/core/views/3d/support/ElevationProvider.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction n(n){return\"position\"===n}export{n as affectsGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{encodeDoubleArray as e}from\"../../../../webgl/doublePrecisionUtils.js\";function n(t,e){return null==t&&(t=[]),t.push(e),t}function r(t,e){if(null==t)return null;const n=t.filter(t=>t!==e);return 0===n.length?null:n}function l(t,n,r,l,i){o[0]=t.get(n,0),o[1]=t.get(n,1),o[2]=t.get(n,2),e(o,s,3),r.set(i,0,s[0]),l.set(i,0,s[1]),r.set(i,1,s[2]),l.set(i,1,s[3]),r.set(i,2,s[4]),l.set(i,2,s[5])}const o=t(),s=new Float32Array(6);export{n as addObject3DStateID,l as encodeDoubleVec3,r as removeObject3DStateID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{generateUID as t}from\"../../../../core/uid.js\";import{multiply as i,copy as e,hasIdentityRotation as s}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o,IDENTITY as r}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{l as a,t as h,k as n,j as m,g as d,q as l,d as c}from\"../../../../chunks/vec32.js\";import{create as g,fromValues as _}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{o as u,a as f,c as b}from\"../../../../chunks/sphere.js\";import{maxScale as v}from\"../../support/mathUtils.js\";import{Object3DOccludeeStateID as p,Object3DHighlightStateID as y}from\"./Object3DStateID.js\";import{assert as j}from\"./Util.js\";import{affectsGeometry as S}from\"./VertexAttribute.js\";import{addObject3DStateID as V,removeObject3DStateID as x}from\"../materials/renderers/utils.js\";class W{constructor(i={}){this.id=t(),this._highlightIds=new Set,this._shaderTransformation=null,this._visible=!0,this.castShadow=i.castShadow??!0,this.usesVerticalDistanceToGround=i.usesVerticalDistanceToGround??!1,this.graphicUid=i.graphicUid,this.layerViewUid=i.layerViewUid,i.isElevationSource&&(this.lastValidElevationBB=new A),this._geometries=i.geometries?Array.from(i.geometries):new Array}dispose(){this._geometries.length=0}get layer(){return this._layer}set layer(t){j(null==this._layer||null==t,\"Object3D can only be added to a single Layer\"),this._layer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t);for(const i of this._highlightIds)t.addHighlight(i);this._emit(\"geometryAdded\",{object:this,geometry:t}),this._highlightIds.size&&this._emit(\"highlightChanged\",this),this._invalidateBoundingVolume()}removeGeometry(t){const i=this._geometries.splice(t,1)[0];if(i){for(const t of this._highlightIds)i.removeHighlight(t);this._emit(\"geometryRemoved\",{object:this,geometry:i}),this._highlightIds.size&&this._emit(\"highlightChanged\",this),this._invalidateBoundingVolume()}}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,i,e=!1){this._emit(\"attributesChanged\",{object:this,geometry:t,attribute:i,sync:e}),S(i)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit(\"visibilityChanged\",this)}}maskOccludee(){const t=new p;for(const i of this._geometries)i.occludees=V(i.occludees,t);return this._emit(\"occlusionChanged\",this),t}removeOcclude(t){for(const i of this._geometries)i.occludees=x(i.occludees,t);this._emit(\"occlusionChanged\",this)}highlight(t){const i=new y(t);for(const e of this._geometries)e.addHighlight(i);return this._emit(\"highlightChanged\",this),this._highlightIds.add(i),i}removeHighlight(t){this._highlightIds.delete(t);for(const i of this._geometries)i.removeHighlight(t);this._emit(\"highlightChanged\",this)}removeStateID(t){0===t.channel?this.removeHighlight(t):this.removeOcclude(t)}getCombinedStaticTransformation(t,e){return i(e,this.transformation,t.transformation)}getCombinedShaderTransformation(t,e=o()){return i(e,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new M,this._validateBoundingVolume(this._bvWorldSpace,0)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new M,this._validateBoundingVolume(this._bvObjectSpace,1)),this._bvObjectSpace}_validateBoundingVolume(t,i){const e=1===i;for(const s of this._geometries){const i=s.boundingInfo;i&&T(i,t,e?s.transformation:this.getCombinedShaderTransformation(s))}u(t.bounds,a(U,t.min,t.max,.5));for(const s of this._geometries){const i=s.boundingInfo;if(null==i)continue;const o=e?s.transformation:this.getCombinedShaderTransformation(s),r=v(o);h(U,i.center,o);const a=n(U,f(t.bounds)),m=i.radius*r;t.bounds[3]=Math.max(t.bounds[3],a+m)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this.layer&&t&&this.layer.notifyObjectBBChanged(this,t)}_emit(t,i){this.layer?.events.emit(t,i)}get geometries(){return this._geometries}get transformation(){return this._transformation??r}set transformation(t){this._transformation=e(this._transformation??o(),t),this._invalidateBoundingVolume(),this._emit(\"transformationChanged\",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(t){this._shaderTransformation=t?e(this._shaderTransformation??o(),t):null,this._invalidateBoundingVolume(),this._emit(\"shaderTransformationChanged\",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}get test(){}}class A{constructor(){this._data=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]}get min(){return _(this._data[0],this._data[1],this._data[2])}get max(){return _(this._data[3],this._data[4],this._data[5])}minWith(t){const{_data:i}=this;i[0]=Math.min(i[0],t[0]),i[1]=Math.min(i[1],t[1]),i[2]=Math.min(i[2],t[2])}maxWith(t){const{_data:i}=this;i[3]=Math.max(i[3],t[0]),i[4]=Math.max(i[4],t[1]),i[5]=Math.max(i[5],t[2])}assignMinMax(t,i){for(let e=0;e<3;++e)this._data[0+e]=t[e],this._data[3+e]=i[e]}isEmpty(){return this._data[3]<this._data[0]&&this._data[4]<this._data[1]&&this._data[5]<this._data[2]}}class M extends A{constructor(){super(...arguments),this.bounds=b()}}function T(t,i,e){const o=t.bbMin,r=t.bbMax;if(s(e)){const t=m(C,e[12],e[13],e[14]);return d(B,o,t),d(O,r,t),i.minWith(B),void i.maxWith(O)}if(h(B,o,e),l(o,r))return i.minWith(B),void i.maxWith(B);h(O,r,e),i.minWith(B),i.minWith(O),i.maxWith(B),i.maxWith(O);for(let s=0;s<3;++s)c(B,o),c(O,r),B[s]=r[s],O[s]=o[s],h(B,B,e),h(O,O,e),i.minWith(B),i.minWith(O),i.maxWith(B),i.maxWith(O)}const C=g(),B=g(),O=g(),U=g();export{M as BoundingVolume,W as Object3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst e=[\"layerObjectAdded\",\"layerObjectRemoved\",\"layerObjectsAdded\",\"layerObjectsRemoved\",\"transformationChanged\",\"shaderTransformationChanged\",\"visibilityChanged\",\"occlusionChanged\",\"highlightChanged\",\"geometryAdded\",\"geometryRemoved\",\"attributesChanged\"];export{e as DirtyEventNames};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{removeUnordered as e}from\"../../../../core/arrayUtils.js\";import{toConst as t}from\"../../../../core/compilerUtils.js\";import{EventEmitter as s}from\"../../../../core/Evented.js\";import i from\"../../../../core/Handles.js\";import\"../../../../core/has.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{generateUID as r}from\"../../../../core/uid.js\";import{DirtyEventNames as h}from\"./DirtyEvents.js\";import{Octree as c}from\"./Octree.js\";class d{constructor(e,t,o=\"\"){this.stage=e,this.apiLayerViewUid=o,this.id=r(),this.events=new s,this.visible=!0,this.sliceable=!1,this._objectsAdded=new Array,this._handles=new i,this._objects=new Map,this._pickable=!0,this.visible=t?.visible??!0,this._pickable=t?.pickable??!0,this.updatePolicy=t?.updatePolicy??0,e.addLayer(this);for(const s of h)this._handles.add(this.events.on(s,t=>e.handleEvent(s,t)))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.removeLayer(this),this.invalidateSpatialQueryAccelerator())}get objects(){return this._objects}getObject(e){return t(this._objects.get(e))}set pickable(e){this._pickable=e}get pickable(){return this._pickable&&this.visible}add(e){this._objects.set(e.id,e),e.layer=this,this.events.emit(\"layerObjectAdded\",e),null!=this._octree&&this._objectsAdded.push(e)}remove(t){this._objects.delete(t.id)&&(this.events.emit(\"layerObjectRemoved\",t),t.layer=null,null!=this._octree&&(e(this._objectsAdded,t)||this._octree.remove([t])))}addMany(e){for(const t of e)this._objects.set(t.id,t),t.layer=this;this.events.emit(\"layerObjectsAdded\",e),null!=this._octree&&this._objectsAdded.push(...e)}removeMany(t){const s=new Array;for(const e of t)this._objects.delete(e.id)&&s.push(e);if(0!==s.length&&(this.events.emit(\"layerObjectsRemoved\",s),s.forEach(e=>e.layer=null),null!=this._octree)){for(let t=0;t<s.length;)e(this._objectsAdded,s[t])?(s[t]=s[s.length-1],s.length-=1):++t;this._octree.remove(s)}}commit(){this.stage.commitLayer(this)}sync(){1!==this.updatePolicy&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.size>50?(this._octree=new c(e=>e.boundingVolumeWorldSpace.bounds),this._octree.add(this._objects.values())):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded),this._objectsAdded.length=0),this._octree}invalidateSpatialQueryAccelerator(){this._octree=o(this._octree),this._objectsAdded.length=0}get test(){}}export{d as WebGLLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{fromValues as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class s{constructor(r,s){this.vec3=r,this.id=s}}function t(t,o,c,e){return new s(r(t,o,c),e)}export{s as LocalOrigin,t as fromValues};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{invert as e,translate as i}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{VisualVariables as t}from\"../shading/VisualVariables.glsl.js\";import{ScreenSizePerspective as r,addScreenSizePerspective as o}from\"../util/ScreenSizePerspective.glsl.js\";import{addCameraPosition as c}from\"../util/View.glsl.js\";import{Float3PassUniform as l}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as s}from\"../../shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as v}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as n,If as p}from\"../../shaderModules/glsl.js\";import{Matrix4DrawUniform as d}from\"../../shaderModules/Matrix4DrawUniform.js\";const u=8;function f(a,f){const{vertex:S,attributes:m}=a;S.uniforms.add(new s(\"intrinsicWidth\",e=>e.width));const{hasScreenSizePerspective:y,spherical:O}=f;y?(a.include(r,f),o(S),c(S,f),S.uniforms.add(new d(\"inverseViewMatrix\",(a,t)=>e(z,i(z,t.camera.viewMatrix,a.origin)))),S.code.add(n`\n      float applyLineSizeScreenSizePerspective(float size, vec3 pos) {\n        vec3 worldPos = (inverseViewMatrix * vec4(pos, 1)).xyz;\n        vec3 groundUp = ${O?n`normalize(worldPos + localOrigin)`:n`vec3(0.0, 0.0, 1.0)`};\n        float absCosAngle = abs(dot(groundUp, normalize(worldPos - cameraPosition)));\n\n        return screenSizePerspectiveScaleFloat(size, absCosAngle, length(pos), screenSizePerspective);\n      }\n    `)):S.code.add(n`float applyLineSizeScreenSizePerspective(float size, vec3 pos) {\nreturn size;\n}`),f.hasVVSize?(m.add(\"sizeFeatureAttribute\",\"float\"),S.uniforms.add(new l(\"vvSizeMinSize\",e=>e.vvSize.minSize),new l(\"vvSizeMaxSize\",e=>e.vvSize.maxSize),new l(\"vvSizeOffset\",e=>e.vvSize.offset),new l(\"vvSizeFactor\",e=>e.vvSize.factor),new l(\"vvSizeFallback\",e=>e.vvSize.fallback)),S.code.add(n`\n    float getSize(${p(y,\"vec3 pos\")}) {\n      float size = isnan(sizeFeatureAttribute)\n        ? vvSizeFallback.x\n        : intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n\n      return ${p(y,\"applyLineSizeScreenSizePerspective(size, pos)\",\"size\")};\n    }\n    `)):(m.add(\"size\",\"float\"),S.code.add(n`\n    float getSize(${p(y,\"vec3 pos\")}) {\n      float fullSize = intrinsicWidth * size;\n      return ${p(y,\"applyLineSizeScreenSizePerspective(fullSize, pos)\",\"fullSize\")};\n    }\n    `)),f.hasVVOpacity?(m.add(\"opacityFeatureAttribute\",\"float\"),S.constants.add(\"vvOpacityNumber\",\"int\",8),S.uniforms.add(new v(\"vvOpacityValues\",e=>e.vvOpacity.values,u),new v(\"vvOpacityOpacities\",e=>e.vvOpacity.opacityValues,u),new s(\"vvOpacityFallback\",e=>e.vvOpacity.fallback,{supportsNaN:!0})),S.code.add(n`\n    float interpolateOpacity(float value) {\n      if (value <= vvOpacityValues[0]) {\n        return vvOpacityOpacities[0];\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n        }\n      }\n\n      return vvOpacityOpacities[vvOpacityNumber - 1];\n    }\n\n    vec4 applyOpacity(vec4 color) {\n      if (isnan(opacityFeatureAttribute)) {\n        // If there is a color vv then it will already have taken care of applying the fallback\n        return ${p(f.hasVVColor,\"color\",\"vec4(color.rgb, vvOpacityFallback)\")};\n      }\n\n      return vec4(color.rgb, interpolateOpacity(opacityFeatureAttribute));\n    }\n    `)):S.code.add(n`vec4 applyOpacity(vec4 color) {\nreturn color;\n}`),f.hasVVColor?(a.include(t,f),m.add(\"colorFeatureAttribute\",\"float\"),S.code.add(n`vec4 getColor() {\nvec4 color = interpolateVVColor(colorFeatureAttribute);\nif (isnan(color.r)) {\nreturn vec4(0);\n}\nreturn applyOpacity(color);\n}`)):(m.add(\"color\",\"vec4\"),S.code.add(n`vec4 getColor() {\nreturn applyOpacity(color);\n}`))}const z=a();export{f as RibbonVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction e(e){e.vertex.code.add(\"#define noPerspectiveWrite(x, w) (x * w)\")}function d(e){e.fragment.code.add(\"#define noPerspectiveRead(x) (x * gl_FragCoord.w)\")}export{d as NoPerspectiveRead,e as NoPerspectiveWrite};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ProceduralTextureRepository as t}from\"./ProceduralTextureRepository.js\";import{PixelType as e,SizedPixelFormat as r}from\"../../../webgl/enums.js\";import{Texture as o}from\"../../../webgl/Texture.js\";import{TextureDescriptor as n}from\"../../../webgl/TextureDescriptor.js\";function i(i,u){return new t(t=>{const{data:u,textureSize:l}=a(t),p=new n(l,1);return p.dataType=e.FLOAT,p.pixelFormat=6403,p.internalFormat=r.R16F,p.wrapMode=10497,new o(i,p,u)},t=>`${t.pattern.join(\",\")}-r${t.pixelRatio}`,u)}function a(t){const e=u(t),r=1/t.pixelRatio,o=l(t),n=[];let i=1;for(const u of e){for(let t=0;t<u;t++){const e=i*(Math.min(t,u-1-t)+.5)*r;n.push(e)}i=-i}const a=Math.round(e[0]/2);return{data:new Float32Array([...n.slice(a),...n.slice(0,a)]),textureSize:o}}function u(t){return t.pattern.map(e=>Math.round(e*t.pixelRatio))}function l(t){if(null==t)return 1;const e=u(t);return Math.floor(e.reduce((t,e)=>t+e))}export{l as computeTextureSize,i as createStippleTextureRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{s as r}from\"../../../../chunks/vec42.js\";import{ZEROS as o,create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";function s(t){return null==t?o:4===t.length?t:r(c,t[0],t[1],t[2],1)}const c=t();export{s as ensureColor4};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{NoPerspectiveRead as e}from\"../util/NoPerspective.glsl.js\";import{addCameraPosition as t,addPixelRatio as o}from\"../util/View.glsl.js\";import{Float4PassUniform as r}from\"../../shaderModules/Float4PassUniform.js\";import{FloatBindUniform as i}from\"../../shaderModules/FloatBindUniform.js\";import{FloatPassUniform as l}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as a,If as s}from\"../../shaderModules/glsl.js\";import{Texture2DPassUniform as n}from\"../../shaderModules/Texture2DPassUniform.js\";import{computeTextureSize as p}from\"../../../materials/stippleTextureRepository.js\";import{ensureColor4 as d}from\"../../../shaders/ensureColor4.js\";function c(p,c){if(!c.stippleEnabled)return void p.fragment.code.add(a`float getStippleAlpha(float lineWidth) { return 1.0; }\nvoid discardByStippleAlpha(float stippleAlpha, float threshold) {}\nvec4 blendStipple(vec4 color, float stippleAlpha) { return color; }`);const u=!(c.draped&&c.stipplePreferContinuous),{vertex:S,fragment:h}=p;c.draped||(t(S,c),S.uniforms.add(new i(\"worldToScreenPerDistanceRatio\",({camera:e})=>1/e.perScreenPixelRatio)).code.add(a`float computeWorldToScreenRatio(vec3 segmentCenter) {\nfloat segmentDistanceToCamera = length(segmentCenter - cameraPosition);\nreturn worldToScreenPerDistanceRatio / segmentDistanceToCamera;\n}`)),p.varyings.add(\"vStippleDistance\",\"float\"),p.varyings.add(\"vStippleDistanceLimits\",\"vec2\"),p.varyings.add(\"vStipplePatternStretch\",\"float\"),S.code.add(a`\n    float discretizeWorldToScreenRatio(float worldToScreenRatio) {\n      float step = ${a.float(m)};\n\n      float discreteWorldToScreenRatio = log(worldToScreenRatio);\n      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;\n      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);\n      return discreteWorldToScreenRatio;\n    }\n  `),o(S),S.code.add(a`\n    vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {\n\n      // First check if the segment is long enough to support fully screen space patterns.\n      // Force sparse mode for segments that are very large in screen space even if it is not allowed,\n      // to avoid imprecision from calculating with large floats.\n      if (segmentLengthPseudoScreen >= ${u?\"patternLength\":\"1e4\"}) {\n        // Round the screen length to get an integer number of pattern repetitions (minimum 1).\n        float repetitions = segmentLengthScreen / (patternLength * pixelRatio);\n        float flooredRepetitions = max(1.0, floor(repetitions + 0.5));\n        float segmentLengthScreenRounded = flooredRepetitions * patternLength;\n\n        float stretch = repetitions / flooredRepetitions;\n\n        // We need to impose a lower bound on the stretch factor to prevent the dots from merging together when there is only 1 repetition.\n        // 0.75 is the lowest possible stretch value for flooredRepetitions > 1, so it makes sense as lower bound.\n        vStipplePatternStretch = max(0.75, stretch);\n\n        return vec2(0.0, segmentLengthScreenRounded);\n      }\n      return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);\n    }\n  `),h.uniforms.add(new n(\"stipplePatternTexture\",e=>e.stippleTexture),new l(\"stipplePatternPixelSizeInv\",e=>1/f(e))),c.stippleOffColorEnabled&&h.uniforms.add(new r(\"stippleOffColor\",e=>d(e.stippleOffColor))),p.include(e),h.code.add(a`float getStippleSDF(out bool isClamped) {\nfloat stippleDistanceClamped = noPerspectiveRead(clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y));\nfloat lineSizeInv = noPerspectiveRead(vLineSizeInv);\nvec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;\nisClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;\nfloat u = stippleDistanceClamped * stipplePatternPixelSizeInv * lineSizeInv;\nu = fract(u);\nfloat sdf = texture(stipplePatternTexture, vec2(u, 0.5)).r;\nreturn (sdf - 0.5) * vStipplePatternStretch + 0.5;\n}\nfloat getStippleSDF() {\nbool ignored;\nreturn getStippleSDF(ignored);\n}\nfloat getStippleAlpha(float lineWidth) {\nbool isClamped;\nfloat stippleSDF = getStippleSDF(isClamped);\nfloat antiAliasedResult = clamp(stippleSDF * lineWidth + 0.5, 0.0, 1.0);\nreturn isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;\n}`),h.code.add(a`\n    void discardByStippleAlpha(float stippleAlpha, float threshold) {\n     ${s(!c.stippleOffColorEnabled,\"if (stippleAlpha < threshold) { discard; }\")}\n    }\n\n    vec4 blendStipple(vec4 color, float stippleAlpha) {\n      return ${c.stippleOffColorEnabled?\"mix(color, stippleOffColor, stippleAlpha)\":\"vec4(color.rgb, color.a * stippleAlpha)\"};\n    }\n  `)}function f(e){const t=e.stipplePattern;return t?p(e.stipplePattern)/t.pixelRatio:1}const m=.4;export{c as LineStipple,f as computePixelSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createPrimitive as r}from\"./sdfPrimitives.js\";import{SizedPixelFormat as e,PixelType as t}from\"../../../webgl/enums.js\";import{Texture as o}from\"../../../webgl/Texture.js\";import{TextureDescriptor as m}from\"../../../webgl/TextureDescriptor.js\";const i=64,s=i/2,n=s/5,p=i/n,a=.25;function f(p,a){const f=r(p,i,s,n),u=new m(i);return u.internalFormat=e.R16F,u.dataType=t.FLOAT,u.pixelFormat=6403,u.wrapMode=33071,new o(a,u,f)}export{f as createMarkerTexture,p as markerSizePerLineWidth,s as markerSymbolSize,i as markerTextureSize,n as markerThickness,a as markerTipThicknessFactor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{markerSizePerLineWidth as e}from\"../../../../support/engineContent/marker.js\";import{addPixelRatio as r}from\"../util/View.glsl.js\";import{FloatBindUniform as t}from\"../../shaderModules/FloatBindUniform.js\";import{If as o,glsl as a}from\"../../shaderModules/glsl.js\";function i(i,n){const d=i.vertex,l=n.hasScreenSizePerspective;r(d),null==d.uniforms.get(\"markerScale\")&&d.constants.add(\"markerScale\",\"float\",1),d.constants.add(\"markerSizePerLineWidth\",\"float\",e).code.add(a`\n  float getLineWidth(${o(l,\"vec3 pos\")}) {\n     return max(getSize(${o(l,\"pos\")}), 1.0) * pixelRatio;\n  }\n\n  float getScreenMarkerSize(float lineWidth) {\n    return markerScale * markerSizePerLineWidth * lineWidth;\n  }\n  `),2===n.space&&(d.constants.add(\"maxSegmentLengthFraction\",\"float\",.45),d.uniforms.add(new t(\"perRenderPixelRatio\",e=>e.camera.perRenderPixelRatio)),d.code.add(a`\n  bool areWorldMarkersHidden(vec3 pos, vec3 other) {\n    vec3 midPoint = mix(pos, other, 0.5);\n    float distanceToCamera = length(midPoint);\n    float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\n    float worldMarkerSize = getScreenMarkerSize(getLineWidth(${o(l,\"pos\")})) * screenToWorldRatio;\n    float segmentLen = length(pos - other);\n    return worldMarkerSize > maxSegmentLengthFraction * segmentLen;\n  }\n\n  float getWorldMarkerSize(vec3 pos) {\n    float distanceToCamera = length(pos);\n    float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\n    return getScreenMarkerSize(getLineWidth(${o(l,\"pos\")})) * screenToWorldRatio;\n  }\n  `))}export{i as MarkerSizing};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../chunks/vec42.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{Float4PassUniform as a}from\"../core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as i}from\"../core/shaderModules/FloatPassUniform.js\";import{glsl as o}from\"../core/shaderModules/glsl.js\";function m(t,m){if(!m.hasAnimation)return;const{attributes:r,varyings:d,vertex:l,fragment:T}=t;r.add(\"timeStamps\",\"vec4\"),d.add(\"vTimeStamp\",\"float\"),d.add(\"vFirstTime\",\"float\"),d.add(\"vLastTime\",\"float\"),d.add(\"vTransitionType\",\"float\"),l.main.add(o`vTimeStamp = timeStamps.x;\nvFirstTime = timeStamps.y;\nvLastTime = timeStamps.z;\nvTransitionType = timeStamps.w;`);const{animation:v}=m;3===v&&T.constants.add(\"decayRate\",\"float\",2.3),T.code.add(o`\n    float getTrailOpacity(float x) {\n      ${s(v)}\n    }`),T.uniforms.add(new i(\"timeElapsed\",e=>e.timeElapsed),new i(\"trailLength\",e=>e.trailLength),new i(\"speed\",e=>e.animationSpeed),new a(\"timingOptions\",t=>e(n,t.startTime,t.endTime,t.fadeInTime,t.fadeOutTime))),T.code.add(o`float fadeIn(float x) {\nreturn smoothstep(0.0, timingOptions[2], x);\n}\nfloat fadeOut(float x) {\nreturn isinf(timingOptions[3]) ? 1.0 : smoothstep(timingOptions[3], 0.0, x);\n}`),T.code.add(o`vec4 animate(vec4 color) {\nfloat startTime = timingOptions[0];\nfloat endTime = timingOptions[1];\nfloat totalTime = vLastTime - vFirstTime;\nfloat actualEndTime = int(vTransitionType) == 2 ? min(endTime, startTime + vLastTime / speed) : endTime;\nvec4 animatedColor = color;\nif (speed == 0.0) {\nanimatedColor.a *= getTrailOpacity((totalTime - (vTimeStamp - vFirstTime)) / trailLength);\nanimatedColor.a *= isinf(actualEndTime) ? 1.0 : fadeOut(timeElapsed - actualEndTime);\nanimatedColor.a *= fadeIn(timeElapsed - startTime);\nreturn animatedColor;\n}\nfloat relativeStartTime = mod(startTime, totalTime);\nfloat vHeadRelativeToFirst = mod((timeElapsed - relativeStartTime) * speed - vFirstTime, totalTime);\nfloat vRelativeToHead = vHeadRelativeToFirst + vFirstTime - vTimeStamp;\nbool inPreviousCycle = vRelativeToHead < 0.0;\nvRelativeToHead += inPreviousCycle ? totalTime : 0.0;\nfloat vAbsoluteTime = timeElapsed - vRelativeToHead / speed;\nif (vAbsoluteTime > actualEndTime) {\nvRelativeToHead = (timeElapsed - relativeStartTime) * speed - vTimeStamp;\nvAbsoluteTime = timeElapsed - vRelativeToHead / speed;\n}\nanimatedColor *= step(startTime, vAbsoluteTime);\nanimatedColor *= step(vAbsoluteTime, actualEndTime);\nanimatedColor.a *= isinf(actualEndTime) ? 1.0 : fadeOut(timeElapsed - actualEndTime);\nanimatedColor.a *= inPreviousCycle ? fadeOut(vHeadRelativeToFirst / speed) : 1.0;\nanimatedColor.a *= getTrailOpacity(vRelativeToHead / trailLength);\nanimatedColor.a *= int(vTransitionType) == 0 ? fadeIn(vAbsoluteTime - startTime) : 1.0;\nanimatedColor.a *= fadeIn(vTimeStamp - vFirstTime);\nreturn animatedColor;\n}`)}function s(e){switch(e){case 2:return\"return x >= 0.0 && x <= 1.0 ? 1.0 : 0.0;\";case 3:return\"float cutOff = exp(-decayRate);\\n        return (exp(-decayRate * x) - cutOff) / (1.0 - cutOff);\";default:return\"return 1.0;\"}}const n=t();export{m as AnimatedLine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{SliceDraw as e}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ObjectAndLayerIdColor as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{RibbonVertexPosition as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{LineStipple as n,computePixelSize as r}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{MarkerSizing as o}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js\";import{PiUtils as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";import{terrainDepthTest as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{NoPerspectiveWrite as p,NoPerspectiveRead as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/NoPerspective.glsl.js\";import{addProjViewLocalOrigin as c,addPixelRatio as m}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2BindUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{Float4BindUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Float4BindUniform.js\";import{Float4PassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as h,If as x}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as u}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{AnimatedLine as L}from\"../views/3d/webgl-engine/shaders/AnimatedLine.glsl.js\";import{outputColorHighlightOID as w}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as b}from\"../views/webgl/ShaderBuilder.js\";import{alphaCutoff as y}from\"../webscene/support/AlphaCutoff.js\";const P=1;function j(j){const z=new b,{attributes:C,varyings:W,vertex:R,fragment:F}=z,{applyMarkerOffset:A,draped:V,output:T,capType:E,stippleEnabled:O,falloffEnabled:M,roundJoins:N,wireframe:$,innerColorEnabled:_,hasAnimation:k,hasScreenSizePerspective:B}=j;F.include(a),z.include(t,j),z.include(n,j),z.include(i,j),z.include(s,j),z.include(L,j);const H=A&&!V;H&&(R.uniforms.add(new S(\"markerScale\",e=>e.markerScale)),z.include(o,{space:2,hasScreenSizePerspective:B})),c(R,j),R.uniforms.add(new u(\"inverseProjectionMatrix\",e=>e.camera.inverseProjectionMatrix),new v(\"nearFar\",e=>e.camera.nearFar),new S(\"miterLimit\",e=>\"miter\"!==e.join?0:e.miterLimit),new f(\"viewport\",e=>e.camera.fullViewport)),R.constants.add(\"LARGE_HALF_FLOAT\",\"float\",65500),C.add(\"position\",\"vec3\"),C.add(\"previousDelta\",\"vec4\"),C.add(\"nextDelta\",\"vec4\"),C.add(\"lineParameters\",\"vec2\"),C.add(\"u0\",\"float\"),W.add(\"vColor\",\"vec4\"),W.add(\"vpos\",\"vec3\",{invariant:!0}),W.add(\"vLineDistance\",\"float\"),W.add(\"vLineWidth\",\"float\");const I=O;I&&W.add(\"vLineSizeInv\",\"float\");const J=2===E,U=O&&J,G=M||U;G&&W.add(\"vLineDistanceNorm\",\"float\"),J&&(W.add(\"vSegmentSDF\",\"float\"),W.add(\"vReverseSegmentSDF\",\"float\")),R.code.add(h`vec2 perpendicular(vec2 v) {\nreturn vec2(v.y, -v.x);\n}\nfloat interp(float ncp, vec4 a, vec4 b) {\nreturn (-ncp - a.z) / (b.z - a.z);\n}\nvec2 rotate(vec2 v, float a) {\nfloat s = sin(a);\nfloat c = cos(a);\nmat2 m = mat2(c, -s, s, c);\nreturn m * v;\n}`),R.code.add(h`vec4 projectAndScale(vec4 pos) {\nvec4 posNdc = proj * pos;\nposNdc.xy *= viewport.zw / posNdc.w;\nreturn posNdc;\n}`),R.code.add(h`void clip(\ninout vec4 pos,\ninout vec4 prev,\ninout vec4 next,\nbool isStartVertex\n) {\nfloat vnp = nearFar[0] * 0.99;\nif (pos.z > -nearFar[0]) {\nif (!isStartVertex) {\nif (prev.z < -nearFar[0]) {\npos = mix(prev, pos, interp(vnp, prev, pos));\nnext = pos;\n} else {\npos = vec4(0.0, 0.0, 0.0, 1.0);\n}\n} else {\nif (next.z < -nearFar[0]) {\npos = mix(pos, next, interp(vnp, pos, next));\nprev = pos;\n} else {\npos = vec4(0.0, 0.0, 0.0, 1.0);\n}\n}\n} else {\nif (prev.z > -nearFar[0]) {\nprev = mix(pos, prev, interp(vnp, pos, prev));\n}\nif (next.z > -nearFar[0]) {\nnext = mix(next, pos, interp(vnp, next, pos));\n}\n}\n}`),m(R),R.constants.add(\"aaWidth\",\"float\",O?0:1).main.add(h`bool isStartVertex = abs(abs(lineParameters.y) - 3.0) == 1.0;\nvec3 prevPosition = position + previousDelta.xyz * previousDelta.w;\nvec3 nextPosition = position + nextDelta.xyz * nextDelta.w;\nfloat coverage = 1.0;\nif (lineParameters.y == 0.0) {\ngl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n}\nelse {\nvec4 pos  = view * vec4(position, 1.0);\nvec4 prev = view * vec4(prevPosition, 1.0);\nvec4 next = view * vec4(nextPosition, 1.0);\nbool isJoin = abs(lineParameters.y) < 3.0;`),H&&R.main.add(h`vec4 other = isStartVertex ? next : prev;\nbool markersHidden = areWorldMarkersHidden(pos.xyz, other.xyz);\nif (!isJoin && !markersHidden) {\npos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos.xyz) * 0.5;\n}`),z.include(p),R.main.add(h`\n      clip(pos, prev, next, isStartVertex);\n\n      vec3 clippedPos = pos.xyz;\n      vec3 clippedCenter = mix(pos.xyz, isStartVertex ? next.xyz : prev.xyz, 0.5);\n\n      forwardViewPosDepth(pos.xyz);\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n\n      vec2 left = (pos.xy - prev.xy);\n      vec2 right = (next.xy - pos.xy);\n\n      float leftLen = length(left);\n      float rightLen = length(right);\n\n      float lineSize = getSize(${x(B,\"clippedPos\")});\n      ${x(O&&B,\"float patternLineSize = getSize(clippedCenter);\")}\n      ${x(O&&!B,\"float patternLineSize = lineSize;\")}\n\n      if (lineSize < 1.0) {\n        coverage = lineSize; // convert sub-pixel coverage to alpha\n        lineSize = 1.0;\n      }\n      lineSize += aaWidth;\n\n      float lineWidth = lineSize * pixelRatio;\n      vLineWidth = noPerspectiveWrite(lineWidth, pos.w);\n      ${I?h`vLineSizeInv = noPerspectiveWrite(1.0 / lineSize, pos.w);`:\"\"}\n  `);(O||J)&&R.main.add(h`\n      float isEndVertex = float(!isStartVertex);\n      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);\n      vec2 segment = mix(right, left, isEndVertex);\n      ${J?h`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:\"\"}\n    `),R.main.add(h`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\nright = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\nvec2 capDisplacementDir = vec2(0, 0);\nvec2 joinDisplacementDir = vec2(0, 0);\nfloat displacementLen = lineWidth;\nif (isJoin) {\nbool isOutside = (left.x * right.y - left.y * right.x) * lineParameters.y > 0.0;\njoinDisplacementDir = normalize(left + right);\njoinDisplacementDir = perpendicular(joinDisplacementDir);\nif (leftLen > 0.001 && rightLen > 0.001) {\nfloat nDotSeg = dot(joinDisplacementDir, left);\ndisplacementLen /= length(nDotSeg * left - joinDisplacementDir);\nif (!isOutside) {\ndisplacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n}\n}\nfloat subdivisionFactor = lineParameters.x;\nif (isOutside && (displacementLen > miterLimit * lineWidth)) {`),N?R.main.add(h`\n        vec2 startDir = leftLen < 0.001 ? right : left;\n        startDir = perpendicular(startDir);\n\n        vec2 endDir = rightLen < 0.001 ? left : right;\n        endDir = perpendicular(endDir);\n\n        float factor = ${O?h`min(1.0, subdivisionFactor * ${h.float((P+2)/(P+1))})`:h`subdivisionFactor`};\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(lineParameters.y) * factor * rotationAngle);\n      `):R.main.add(h`if (leftLen < 0.001) {\njoinDisplacementDir = right;\n}\nelse if (rightLen < 0.001) {\njoinDisplacementDir = left;\n}\nelse {\njoinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;\n}\njoinDisplacementDir = perpendicular(joinDisplacementDir);`);const q=0!==E;return R.main.add(h`\n        displacementLen = lineWidth;\n      }\n    } else {\n      // CAP handling ---------------------------------------------------\n      joinDisplacementDir = isStartVertex ? right : left;\n      joinDisplacementDir = perpendicular(joinDisplacementDir);\n\n      ${q?h`capDisplacementDir = isStartVertex ? -right : left;`:\"\"}\n    }\n  `),R.main.add(h`\n    // Displacement (in pixels) caused by join/or cap\n    vec2 dpos = joinDisplacementDir * sign(lineParameters.y) * displacementLen + capDisplacementDir * displacementLen;\n    float lineDistNorm = noPerspectiveWrite(sign(lineParameters.y), pos.w);\n\n    vLineDistance = lineWidth * lineDistNorm;\n    ${G?h`vLineDistanceNorm = lineDistNorm;`:\"\"}\n\n    pos.xy += dpos;\n  `),J&&R.main.add(h`vec2 segmentDir = normalize(segment);\nvSegmentSDF = noPerspectiveWrite((isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir)), pos.w);\nvReverseSegmentSDF = noPerspectiveWrite((isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir)), pos.w);`),O&&(V?R.uniforms.add(new D(\"worldToScreenRatio\",e=>1/e.screenToPCSRatio)):R.main.add(h`vec3 segmentCenter = mix((nextPosition + position) * 0.5, (position + prevPosition) * 0.5, isEndVertex);\nfloat worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),R.main.add(h`float segmentLengthScreenDouble = length(segment);\nfloat segmentLengthScreen = segmentLengthScreenDouble * 0.5;\nfloat discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);\nfloat segmentLengthRender = length(mix(nextPosition - position, position - prevPosition, isEndVertex));\nvStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),V?R.main.add(h`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;\nfloat startPseudoScreen = u0 * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):R.main.add(h`float startPseudoScreen = mix(u0, u0 - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;\nfloat segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),R.uniforms.add(new S(\"stipplePatternPixelSize\",e=>r(e))),R.main.add(h`float patternLength = patternLineSize * stipplePatternPixelSize;\nvStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);\nvStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);\nif (segmentLengthScreenDouble >= 0.001) {\nvec2 stippleDisplacement = pos.xy - segmentOrigin;\nfloat stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);\nvStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);\n}\nvStippleDistanceLimits = noPerspectiveWrite(vStippleDistanceLimits, pos.w);\nvStippleDistance = noPerspectiveWrite(vStippleDistance, pos.w);\nvStippleDistanceLimits = isJoin ?\nvStippleDistanceLimits :\nisStartVertex ?\nvec2(-1e34, vStippleDistanceLimits.y) :\nvec2(vStippleDistanceLimits.x, 1e34);`)),R.main.add(h`\n      // Convert back into NDC\n      pos.xy = (pos.xy / viewport.zw) * pos.w;\n\n      vColor = getColor();\n      vColor.a = noPerspectiveWrite(vColor.a * coverage, pos.w);\n\n      ${$&&!V?\"pos.z -= 0.001 * pos.w;\":\"\"}\n\n      // transform final position to camera space for slicing\n      vpos = (inverseProjectionMatrix * pos).xyz;\n      gl_Position = pos;\n      forwardObjectAndLayerIdColor();\n    }`),z.fragment.include(e,j),z.include(w,j),F.include(l),F.main.add(h`discardBySlice(vpos);\ndiscardByTerrainDepth();`),z.include(d),F.main.add(h`\n    float lineWidth = noPerspectiveRead(vLineWidth);\n    float lineDistance = noPerspectiveRead(vLineDistance);\n    ${x(G,h`float lineDistanceNorm = noPerspectiveRead(vLineDistanceNorm);`)}\n  `),$?F.main.add(h`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(J&&F.main.add(h`\n        float sdf = noPerspectiveRead(min(vSegmentSDF, vReverseSegmentSDF));\n        vec2 fragmentPosition = vec2(min(sdf, 0.0), lineDistance);\n\n        float fragmentRadius = length(fragmentPosition);\n        float fragmentCapSDF = (fragmentRadius - lineWidth) * 0.5; // Divide by 2 to transform from double pixel scale\n        float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);\n\n        if (capCoverage < ${h.float(y)}) {\n          discard;\n        }\n      `),U?F.main.add(h`\n      vec2 stipplePosition = vec2(\n        min(getStippleSDF() * 2.0 - 1.0, 0.0),\n        lineDistanceNorm\n      );\n      float stippleRadius = length(stipplePosition * lineWidth);\n      float stippleCapSDF = (stippleRadius - lineWidth) * 0.5; // Divide by 2 to transform from double pixel scale\n      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);\n      float stippleAlpha = step(${h.float(y)}, stippleCoverage);\n      `):F.main.add(h`float stippleAlpha = getStippleAlpha(lineWidth);`),10!==T&&F.main.add(h`discardByStippleAlpha(stippleAlpha, ${h.float(y)});`),z.include(d),F.uniforms.add(new g(\"intrinsicColor\",e=>e.color)).main.add(h`vec4 color = intrinsicColor * vColor;\ncolor.a = noPerspectiveRead(color.a);`),_&&F.uniforms.add(new g(\"innerColor\",e=>e.innerColor??e.color),new S(\"innerWidth\",(e,i)=>e.innerWidth*i.camera.pixelRatio)).main.add(h`float distToInner = abs(lineDistance) - innerWidth;\nfloat innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\nfloat innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\ncolor = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`),F.main.add(h`vec4 finalColor = blendStipple(color, stippleAlpha);`),M&&(F.uniforms.add(new S(\"falloff\",e=>e.falloff)),F.main.add(h`finalColor.a *= pow(max(0.0, 1.0 - abs(lineDistanceNorm)), falloff);`)),O||F.main.add(h`float featherStartDistance = max(lineWidth - 2.0, 0.0);\nfloat value = abs(lineDistance);\nfloat feather = (value - featherStartDistance) / (lineWidth - featherStartDistance);\nfinalColor.a *= 1.0 - clamp(feather, 0.0, 1.0);`),k&&F.main.add(h`\n        finalColor = animate(finalColor);\n\n        ${x(10!==T,h`\n            if (finalColor.a <= ${h.float(y)}) {\n              discard;\n            }`)}\n      `)),F.main.add(h`outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),z}const z=Object.freeze(Object.defineProperty({__proto__:null,build:j,ribbonlineNumRoundJoinSubdivisions:P},Symbol.toStringTag,{value:\"Module\"}));export{z as R,j as b,P as r};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{newLayout as e}from\"../../support/buffer/InterleavedLayout.js\";import{isColorOrColorEmission as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r,depthOnlyOutputBuffersOr as l}from\"../core/shaderTechnique/ShaderTechnique.js\";import{olidEnabled as s}from\"../effects/geometry/olidUtils.js\";import{OITPolygonOffset as n,depthWrite as o,oitDepthTest as u,blending as c,getDrawBuffers as a}from\"../lib/OrderIndependentTransparency.js\";import{stencilToolMaskBaseParams as p,stencilBaseAllZerosParams as f,stencilWriteMaskOn as d,stencilToolTransparentOccluderParams as h,depthCompareAlways as m,stencilToolMaskOccluderParams as P,stencilWriteMaskOff as g,depthCompareLess as b}from\"../lib/StencilUtils.js\";import{R as T}from\"../../../../chunks/RibbonLine.glsl.js\";import{PrimitiveType as W}from\"../../../webgl/enums.js\";import{makePipelineState as y,defaultColorWrite as O,unpremultipliedAlphaToPremultipliedAlpha as j}from\"../../../webgl/renderState.js\";class S extends r{constructor(e,t){super(e,t,new i(T,()=>import(\"./RibbonLine.glsl.js\")),v(t).locations),this.primitiveType=t.wireframe?W.LINES:W.TRIANGLE_STRIP}_makePipelineState(e,i){const{oitPass:r,output:s,hasOccludees:h,hasPolygonOffset:m}=e,P=0===r,g=2===r;return y({blending:t(s)?c(r):null,depthTest:{func:u(r)},depthWrite:o(e),drawBuffers:l(s,a(r,s)),colorWrite:O,stencilWrite:h?d:null,stencilTest:h?i?p:f:null,polygonOffset:P||g?m?_:null:n})}initializePipeline(e){if(e.occluder){const t=e.hasPolygonOffset?_:null,{output:i,hasOccludees:r}=e;this._occluderPipelineTransparent=y({blending:j,polygonOffset:t,depthTest:m,depthWrite:null,colorWrite:O,stencilWrite:null,stencilTest:r?h:null,drawBuffers:l(i)}),this._occluderPipelineOpaque=y({blending:j,polygonOffset:t,depthTest:r?m:b,depthWrite:null,colorWrite:O,stencilWrite:r?g:null,stencilTest:r?P:null,drawBuffers:l(i)}),this._occluderPipelineMaskWrite=y({blending:null,polygonOffset:t,depthTest:b,depthWrite:null,colorWrite:null,stencilWrite:r?d:null,stencilTest:r?p:null,drawBuffers:l(i)})}return this._occludeePipeline=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,t){if(e)return this._occludeePipeline;switch(t){case 11:return this._occluderPipelineTransparent??super.getPipeline();case 10:return this._occluderPipelineOpaque??super.getPipeline();default:return this._occluderPipelineMaskWrite??super.getPipeline()}}}const _={factor:0,units:-4};function v(t){const i=e().vec3f(\"position\").vec4f16(\"previousDelta\").vec4f16(\"nextDelta\").f32(\"u0\").vec2f16(\"lineParameters\");return t.hasVVColor?i.f32(\"colorFeatureAttribute\"):i.vec4u8(\"color\",{glNormalized:!0}),t.hasVVSize?i.f32(\"sizeFeatureAttribute\"):i.f32(\"size\"),t.hasVVOpacity&&i.f32(\"opacityFeatureAttribute\"),s()&&i.vec4u8(\"olidColor\"),t.hasAnimation&&i.vec4f16(\"timeStamps\"),i}export{S as RibbonLineTechnique,v as getLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{parameter as t}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as e}from\"../materials/DefaultTechniqueConfiguration.js\";class i extends e{constructor(o){super(),this.spherical=o,this.capType=0,this.emissionSource=0,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.hasVVSize=!1,this.hasVVColor=!1,this.hasVVOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.occluder=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.wireframe=!1,this.discardInvisibleFragments=!1,this.animation=2,this.hasScreenSizePerspective=!1,this.textureCoordinateType=0,this.occlusionPass=!1,this.hasVVInstancing=!1,this.hasSliceTranslatedView=!0,this.overlayEnabled=!1,this.snowCover=!1}get hasAnimation(){return 0!==this.animation}}o([t({count:3})],i.prototype,\"capType\",void 0),o([t({count:8})],i.prototype,\"emissionSource\",void 0),o([t()],i.prototype,\"hasPolygonOffset\",void 0),o([t()],i.prototype,\"writeDepth\",void 0),o([t()],i.prototype,\"draped\",void 0),o([t()],i.prototype,\"stippleEnabled\",void 0),o([t()],i.prototype,\"stippleOffColorEnabled\",void 0),o([t()],i.prototype,\"stipplePreferContinuous\",void 0),o([t()],i.prototype,\"roundJoins\",void 0),o([t()],i.prototype,\"applyMarkerOffset\",void 0),o([t()],i.prototype,\"hasVVSize\",void 0),o([t()],i.prototype,\"hasVVColor\",void 0),o([t()],i.prototype,\"hasVVOpacity\",void 0),o([t()],i.prototype,\"falloffEnabled\",void 0),o([t()],i.prototype,\"innerColorEnabled\",void 0),o([t()],i.prototype,\"hasOccludees\",void 0),o([t()],i.prototype,\"occluder\",void 0),o([t()],i.prototype,\"terrainDepthTest\",void 0),o([t()],i.prototype,\"cullAboveTerrain\",void 0),o([t()],i.prototype,\"wireframe\",void 0),o([t()],i.prototype,\"discardInvisibleFragments\",void 0),o([t({count:4})],i.prototype,\"animation\",void 0),o([t()],i.prototype,\"hasScreenSizePerspective\",void 0);export{i as RibbonLineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Logger.js\";import{clamp as e}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as i}from\"../../../../core/screenUtils.js\";import{secondsFromMilliseconds as r}from\"../../../../core/time.js\";import{copy as s}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{j as a,e as n,f as o,h as l,g as h,d as c,b as m,k as p,t as u}from\"../../../../chunks/vec32.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as d}from\"../../../../chunks/vec42.js\";import{ONES as g,create as b}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{makeFloat16Array as _}from\"../../../../geometry/support/float16.js\";import{distance2 as S,fromPoints as v,create as P,closestLineSegmentPoint as j}from\"../../../../geometry/support/lineSegment.js\";import{fromPoints as E,create as w,signedDistance as y,getNormal as T}from\"../../../../geometry/support/plane.js\";import{isHighlightOrOID as z,isColorOrColorEmission as A,isDepth as C,isColorEmissionHighlightOIDOrDepth as O,is2DGeometryOutput as L}from\"../core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as M}from\"../effects/geometry/olidUtils.js\";import V from\"../lib/GLMaterial.js\";import{Material as R}from\"../lib/Material.js\";import{isTranslationMatrix as x}from\"../lib/Util.js\";import{VisualVariablePassParameters as F}from\"./VisualVariablePassParameters.js\";import{writeDeltaF16Vector as k}from\"./internal/bufferWriterUtils.js\";import{r as N}from\"../../../../chunks/RibbonLine.glsl.js\";import{getLayout as U,RibbonLineTechnique as D}from\"../shaders/RibbonLineTechnique.js\";import{RibbonLineTechniqueConfiguration as B}from\"../shaders/RibbonLineTechniqueConfiguration.js\";import{alphaCutoff as W}from\"../../../../webscene/support/AlphaCutoff.js\";class J extends R{constructor(t,e){super(t,q),this.produces=new Map([[2,t=>z(t)||A(t)&&8===this.parameters.renderOccluded],[3,t=>C(t)],[10,t=>O(t)&&8===this.parameters.renderOccluded],[11,t=>O(t)&&8===this.parameters.renderOccluded],[4,t=>A(t)&&this.parameters.writeDepth&&8!==this.parameters.renderOccluded],[8,t=>A(t)&&!this.parameters.writeDepth&&8!==this.parameters.renderOccluded],[18,t=>L(t)]]),this._configuration=new B(e)}getConfiguration(t,e){super.getConfiguration(t,e,this._configuration),this._configuration.oitPass=e.oitPass,this._configuration.draped=18===e.slot;const i=null!=this.parameters.stipplePattern&&9!==t;return this._configuration.stippleEnabled=i,this._configuration.stippleOffColorEnabled=i&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=i&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.roundJoins=\"round\"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&H(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasVVSize=this.parameters.hasVVSize,this._configuration.hasVVColor=this.parameters.hasVVColor,this._configuration.hasVVOpacity=this.parameters.hasVVOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.hasOccludees=e.hasOccludees,this._configuration.occluder=8===this.parameters.renderOccluded,this._configuration.terrainDepthTest=e.terrainDepthTest&&A(t),this._configuration.cullAboveTerrain=e.cullAboveTerrain,this._configuration.wireframe=this.parameters.wireframe,this._configuration.animation=this.parameters.animation,this._configuration.emissionSource=this.hasEmissions?1:0,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration}get visible(){return this.parameters.color[3]>=W||null!=this.parameters.stipplePattern&&(this.parameters.stippleOffColor?.[3]??0)>W}setParameters(t,e){t.animation=this.parameters.animation,super.setParameters(t,e)}intersectDraped({attributes:t,screenToWorldRatio:i},r,s,a,n){if(!r.options.selectionMode)return;const o=t.get(\"size\");let l=this.parameters.width;if(this.parameters.vvSize){const i=t.get(\"sizeFeatureAttribute\").data[0];Number.isNaN(i)?l*=this.parameters.vvSize.fallback[0]:l*=e(this.parameters.vvSize.offset[0]+i*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else o&&(l*=o.data[0]);const h=s[0],c=s[1],m=(l/2+4)*i;let p=Number.MAX_VALUE,u=0;const f=t.get(\"position\").data,d=I(this.parameters,t)?f.length-2:f.length-5;for(let g=0;g<d;g+=3){const t=f[g],i=f[g+1],r=(g+3)%f.length,s=h-t,a=c-i,n=f[r]-t,o=f[r+1]-i,l=e((n*s+o*a)/(n*n+o*o),0,1),m=n*l-s,d=o*l-a,b=m*m+d*d;b<p&&(p=b,u=g/3)}p<m*m&&a(n.distance,n.normal,u)}intersect(i,r,u,f,d,g){const{options:b,camera:_,rayBegin:P,rayEnd:w}=u;if(!b.selectionMode||!i.visible||!_)return;if(!x(r))return void t.getLogger(\"esri.views.3d.webgl-engine.materials.RibbonLineMaterial\").error(\"intersection assumes a translation-only matrix\");const z=i.attributes,A=z.get(\"position\").data;let C=this.parameters.width;if(this.parameters.vvSize){const t=z.get(\"sizeFeatureAttribute\").data[0];Number.isNaN(t)||(C*=e(this.parameters.vvSize.offset[0]+t*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0]))}else z.has(\"size\")&&(C*=z.get(\"size\").data[0]);const O=tt;s(O,u.point);const L=C*_.pixelRatio/2+4*_.pixelRatio;a(mt[0],O[0]-L,O[1]+L,0),a(mt[1],O[0]+L,O[1]+L,0),a(mt[2],O[0]+L,O[1]-L,0),a(mt[3],O[0]-L,O[1]-L,0);for(let t=0;t<4;t++)if(!_.unprojectFromRenderScreen(mt[t],pt[t]))return;E(_.eye,pt[0],pt[1],ut),E(_.eye,pt[1],pt[2],ft),E(_.eye,pt[2],pt[3],dt),E(_.eye,pt[3],pt[0],gt);let M=Number.MAX_VALUE,V=0;const R=I(this.parameters,z)?A.length-2:A.length-5;for(let t=0;t<R;t+=3){K[0]=A[t]+r[12],K[1]=A[t+1]+r[13],K[2]=A[t+2]+r[14];const e=(t+3)%A.length;if(Q[0]=A[e]+r[12],Q[1]=A[e+1]+r[13],Q[2]=A[e+2]+r[14],y(ut,K)<0&&y(ut,Q)<0||y(ft,K)<0&&y(ft,Q)<0||y(dt,K)<0&&y(dt,Q)<0||y(gt,K)<0&&y(gt,Q)<0)continue;const i=_.projectToRenderScreen(K,et),s=_.projectToRenderScreen(Q,it);if(null==i||null==s)continue;if(i[2]<0&&s[2]>0){n(Z,K,Q);const t=_.frustum,e=-y(t[4],K)/o(Z,T(t[4]));if(l(Z,Z,e),h(K,K,Z),!_.projectToRenderScreen(K,i))continue}else if(i[2]>0&&s[2]<0){n(Z,Q,K);const t=_.frustum,e=-y(t[4],Q)/o(Z,T(t[4]));if(l(Z,Z,e),h(Q,Q,Z),!_.projectToRenderScreen(Q,s))continue}else if(i[2]<0&&s[2]<0)continue;i[2]=0,s[2]=0;const a=S(v(i,s,at),O);a<M&&(M=a,c(rt,K),c(st,Q),V=t/3)}if(M<L*L){let t=Number.MAX_VALUE;if(j(v(rt,st,at),v(P,w,nt),$)){n($,$,P);const e=m($);l($,$,1/e),t=e/p(P,w)}g(t,$,V)}}get hasEmissions(){return this.parameters.emissiveStrength>0}createBufferWriter(){return new X(U(this.parameters),this.parameters)}createGLMaterial(t){return new Y(t)}validateParameters(t){\"miter\"!==t.join&&(t.miterLimit=0),null!=t.markerParameters&&(t.markerScale=t.markerParameters.width/t.width)}update(t){const{hasAnimation:e}=this.parameters;return!!e&&(this.setParameters({timeElapsed:r(t.time)},!1),0!==t.dt)}}class Y extends V{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextures?.release(this._stipplePattern),this._stipplePattern=null}beginSlot(t){const e=this._material.parameters.stipplePattern;return this._stipplePattern!==e&&(this._material.setParameters({stippleTexture:this._stippleTextures.swap(e,this._stipplePattern)}),this._stipplePattern=e),this.getTechnique(D,t)}}class q extends F{constructor(){super(...arguments),this.width=0,this.color=g,this.join=\"miter\",this.cap=0,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.wireframe=!1,this.timeElapsed=0,this.animation=0,this.animationSpeed=1,this.trailLength=1,this.startTime=0,this.endTime=1/0,this.fadeInTime=0,this.fadeOutTime=1/0,this.emissiveStrength=0}get transparent(){return this.color[3]<1||this.hasAnimation||null!=this.stipplePattern&&(this.stippleOffColor?.[3]??0)<1}get hasAnimation(){return 0!==this.animation}}class X{constructor(t,e){this.layout=t,this._parameters=e;const i=e.stipplePattern?1:0;switch(this._parameters.join){case\"miter\":case\"bevel\":this.numJoinSubdivisions=i;break;case\"round\":this.numJoinSubdivisions=N+i}}_isClosed(t){return I(this._parameters,t)}allocate(t){return this.layout.createBuffer(t)}elementCount(t){const e=2,i=t.get(\"position\").indices.length/2+1,r=this._isClosed(t);let s=r?2:2*e;return s+=((r?i:i-1)-(r?0:1))*(2*this.numJoinSubdivisions+4),s+=2,this._parameters.wireframe&&(s=2+4*(s-2)),s}write(t,e,i,r,s,n){const o=this.layout,l=i.get(\"position\"),h=l.indices,m=l.data.length/3,f=i.get(\"distanceToStart\")?.data;h&&h.length!==2*(m-1)&&console.warn(\"RibbonLineMaterial does not support indices\");const g=o.fields.has(\"sizeFeatureAttribute\");let b=1,S=null;if(g){const t=i.get(\"sizeFeatureAttribute\");1===t.data.length?b=t.data[0]:S=t.data}else b=i.get(\"size\")?.data[0]??1;let v=[1,1,1,1],P=0,j=null;const E=o.fields.has(\"colorFeatureAttribute\");if(E){const t=i.get(\"colorFeatureAttribute\");1===t.data.length?P=t.data[0]:j=t.data}else v=i.get(\"color\")?.data??v;const w=i.get(\"timeStamps\")?.data,y=w&&o.fields.has(\"timeStamps\"),T=o.fields.has(\"opacityFeatureAttribute\");let z=0,A=null;if(T){const t=i.get(\"opacityFeatureAttribute\");1===t.data.length?z=t.data[0]:A=t.data}const C=new Float32Array(s.buffer),O=_(s.buffer),L=new Uint8Array(s.buffer),V=o.stride/4;let R=n*V;const x=R;let F=0;const N=f?(t,e,i)=>F=f[i]:(t,e,i)=>F+=p(t,e),U=C.BYTES_PER_ELEMENT/O.BYTES_PER_ELEMENT,D=4/U,B=M(),W=(t,e,i,s,a,n,o,l)=>{C[R++]=e[0],C[R++]=e[1],C[R++]=e[2],k(t,e,O,R*U),R+=D,k(i,e,O,R*U),R+=D,C[R++]=l;let h=R*U;if(O[h++]=a,O[h++]=n,R=Math.ceil(h/U),E)C[R]=j?.[o]??P;else{const t=Math.min(4*o,v.length-4),e=4*R;L[e]=255*v[t],L[e+1]=255*v[t+1],L[e+2]=255*v[t+2],L[e+3]=255*v[t+3]}if(R++,C[R++]=S?.[o]??b,T&&(C[R++]=A?.[o]??z),B){let t=4*R;r?(L[t++]=r[0],L[t++]=r[1],L[t++]=r[2],L[t++]=r[3]):(L[t++]=0,L[t++]=0,L[t++]=0,L[t++]=0),R=Math.ceil(.25*t)}y&&(h=R*U,O[h++]=s[0],O[h++]=s[1],O[h++]=s[2],O[h++]=s[3],R=Math.ceil(h/U))};R+=V,a(lt,l.data[0],l.data[1],l.data[2]),y&&d(ct,w[0],w[1],w[2],w[3]),t&&u(lt,lt,t);const J=this._isClosed(i);if(J){const e=l.data.length-3;a(ot,l.data[e],l.data[e+1],l.data[e+2]),t&&u(ot,ot,t)}else a(ht,l.data[3],l.data[4],l.data[5]),t&&u(ht,ht,t),W(lt,lt,ht,ct,1,-4,0,0),W(lt,lt,ht,ct,1,4,0,0),c(ot,lt),c(lt,ht),y&&d(ct,w[4],w[5],w[6],w[7]);const Y=J?0:1,q=J?m:m-1;for(let p=Y;p<q;p++){const e=(p+1)%m*3;a(ht,l.data[e],l.data[e+1],l.data[e+2]),t&&u(ht,ht,t),N(ot,lt,p),W(ot,lt,ht,ct,0,-1,p,F),W(ot,lt,ht,ct,0,1,p,F);const i=this.numJoinSubdivisions;for(let t=0;t<i;++t){const e=(t+1)/(i+1);W(ot,lt,ht,ct,e,-1,p,F),W(ot,lt,ht,ct,e,1,p,F)}if(W(ot,lt,ht,ct,1,-2,p,F),W(ot,lt,ht,ct,1,2,p,F),c(ot,lt),c(lt,ht),y){const t=(p+1)%m*4;d(ct,w[t],w[t+1],w[t+2],w[t+3])}}J?(a(ht,l.data[3],l.data[4],l.data[5]),t&&u(ht,ht,t),F=N(ot,lt,q),W(ot,lt,ht,ct,0,-1,Y,F),W(ot,lt,ht,ct,0,1,Y,F)):(F=N(ot,lt,q),W(ot,lt,lt,ct,0,-5,q,F),W(ot,lt,lt,ct,0,5,q,F)),G(C,x+V,C,x,V);return R=G(C,R-V,C,R,V),this._parameters.wireframe&&this._addWireframeVertices(s,x,R,V),null}_addWireframeVertices(t,e,i,r){const s=new Float32Array(t.buffer,i*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(t.buffer,e*Float32Array.BYTES_PER_ELEMENT,i-e);let n=0;const o=t=>n=G(a,t,s,n,r);for(let l=0;l<a.length-1;l+=2*r)o(l),o(l+2*r),o(l+1*r),o(l+2*r),o(l+1*r),o(l+3*r)}}function G(t,e,i,r,s){for(let a=0;a<s;a++)i[r++]=t[e++];return r}function I(t,e){if(!t.isClosed)return!1;return e.get(\"position\").indices.length>2}function H(t){return 1===t.anchor&&t.hideOnShortSegments&&\"begin-end\"===t.placement&&t.worldSpace}const K=f(),Q=f(),Z=f(),$=f(),tt=f(),et=i(),it=i(),rt=f(),st=f(),at=P(),nt=P(),ot=f(),lt=f(),ht=f(),ct=b(),mt=[i(),i(),i(),i()],pt=[f(),f(),f(),f()],ut=w(),ft=w(),dt=w(),gt=w();export{q as Parameters,J as RibbonLineMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{generateUID as t}from\"../../../../core/uid.js\";import{e as i}from\"../../../../chunks/vec32.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectBuffer as s}from\"../../../../geometry/projection/projectBuffer.js\";import{Attribute as e}from\"./Attribute.js\";import{Geometry as n}from\"./Geometry.js\";import{fromValues as a}from\"./LocalOriginFactory.js\";import{Object3D as h}from\"./Object3D.js\";import{gridLocalOriginFactory as c}from\"./testUtils.js\";import{WebGLLayer as m}from\"./WebGLLayer.js\";import{RibbonLineMaterial as g}from\"../materials/RibbonLineMaterial.js\";class f{constructor(i){this._originSR=i,this._rootOriginId=\"root/\"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=c.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,a(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=a(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),h=`${s}/${e}/${n}`;let m=this._origins.get(h);const g=.5*o;if(i(d,t,r.vec3),d[0]=Math.abs(d[0]),d[1]=Math.abs(d[1]),d[2]=Math.abs(d[2]),d[0]<g&&d[1]<g&&d[2]<g){if(m){const r=Math.max(...d);i(d,t,m.vec3),d[0]=Math.abs(d[0]),d[1]=Math.abs(d[1]),d[2]=Math.abs(d[2]);if(Math.max(...d)<r)return m}return r}return m||(m=a(s*o,e*o,n*o,h),this._origins.set(h,m)),m}_drawOriginBox(t,i=o(1,1,0,1)){const r=window.view,a=r.stage,c=i.toString();if(!this._objects.has(c)){this._material=new g({width:2,color:i},!1);const t=new m(a,{pickable:!1}),r=new h({castShadow:!1});t.add(r),this._objects.set(c,r)}const f=this._objects.get(c),d=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],l=d.length,_=new Array(3*l),p=new Array,j=.5*this._gridSize;for(let o=0;o<l;o++)_[3*o]=t[0]+(1&d[o]?j:-j),_[3*o+1]=t[1]+(2&d[o]?j:-j),_[3*o+2]=t[2]+(4&d[o]?j:-j),o>0&&p.push(o-1,o);s(_,this._originSR,0,_,r.renderSpatialReference,0,l);const b=new n(this._material,[[\"position\",new e(_,p,3,!0)]],null,2);f.addGeometry(b)}get test(){}}const d=r();export{f as GridLocalOriginFactory};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isDehydratedPoint as e}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return\"array\"in e}function a(r,a,n=\"ground\"){if(e(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}export{r as SamplePosition,a as getElevationAtPoint,t as isSamplePosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{copy as e}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as o}from\"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as r}from\"../../../../geometry/projection/projectBuffer.js\";import{isDehydratedPoint as i}from\"../../../../layers/graphics/dehydratedFeatureUtils.js\";import{isSamplePosition as a,getElevationAtPoint as s}from\"../../support/ElevationProvider.js\";function l(e,t,n,o,i,a,s,l,c,u,f){const d=b[f.mode];let m,g,p=0;if(r(e,t,n,o,c.spatialReference,i,l))return d?.requiresAlignment(f)?(p=d.applyElevationAlignmentBuffer(o,i,a,s,l,c,u,f),m=a,g=s):(m=o,g=i),r(m,c.spatialReference,g,a,u.spatialReference,s,l)?p:void 0}function c(e,t,n,o,r){const l=(i(e)?e.z:a(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case\"on-the-ground\":{const n=s(t,e,\"ground\")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case\"relative-to-ground\":{const i=s(t,e,\"ground\")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case\"relative-to-scene\":{const i=s(t,e,\"scene\")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case\"absolute-height\":{const i=n.geometryZWithOffset(l,o),a=s(t,e,\"ground\")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function u(e,t,n,o){return c(e,t,n,o,j),j.z}function f(e,t,n){return\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?null==t||null==n?e.definedChanged:1:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function m(e){return\"absolute-height\"!==e}function g(t,n,r,i,a){c(n,r,a,i,j),p(t,j.verticalDistanceToGround);const s=j.sampledElevation,l=e(R,t.transformation);O[0]=n.x,O[1]=n.y,O[2]=j.z;return o(n.spatialReference,O,l,i.spatialReference)?t.transformation=l:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),s}function p(e,t){for(let n=0;n<e.geometries.length;++n){const o=e.geometries[n].getMutableAttribute(\"centerOffsetAndDistance\");o&&o.data[3]!==t&&(o.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],\"centerOffsetAndDistance\"))}}function v(e,t,n,o,r,i){let a=0;const s=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],c=e[t+2],u=i.getElevation(r,l,c,s,\"ground\")??0;a+=u,n[o]=r,n[o+1]=l,n[o+2]=u,t+=3,o+=3}return a/r}function h(e,t,n,o,r,i,a,s){let l=0;const c=s.calculateOffsetRenderUnits(a),u=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],a=e[t+1],s=e[t+2],d=i.getElevation(r,a,s,f,\"ground\")??0;l+=d,n[o]=r,n[o+1]=a,n[o+2]=null==u?s+d+c:d+c,t+=3,o+=3}return l/r}function E(e,t,n,o,r,i,a,s){let l=0;const c=s.calculateOffsetRenderUnits(a),u=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],a=e[t+1],s=e[t+2],d=i.getElevation(r,a,s,f,\"scene\")??0;l+=d,n[o]=r,n[o+1]=a,n[o+2]=null==u?s+d+c:d+c,t+=3,o+=3}return l/r}function y(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function A(e,t,n,o,r,i,a,s){const l=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext;t*=3,o*=3;for(let u=0;u<r;++u){const r=e[t],i=e[t+1],a=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==c?a+l:l,t+=3,o+=3}return 0}class x{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}const b={\"absolute-height\":{applyElevationAlignmentBuffer:A,requiresAlignment:y},\"on-the-ground\":{applyElevationAlignmentBuffer:v,requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:E,requiresAlignment:()=>!0}},R=t(),j=new x,O=n();export{x as SampleElevationInfo,g as applyElevationAlignmentForHUD,l as applyPerVertexElevationAlignment,f as elevationModeChangeUpdateType,u as evaluateElevationAlignmentAtPoint,c as evaluateElevationInfoAtPoint,d as needsElevationUpdates2D,m as needsElevationUpdates3D,p as updateVertexPointGroundDistance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{hydrateGeometry as r}from\"../../../../layers/graphics/hydratedFeatures.js\";import{loadArcade as n}from\"../../../../support/loadArcade.js\";const c=()=>e.getLogger(\"esri.views.3d.layers.graphics.featureExpressionInfoUtils\");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function u(e){const t=e?.expression;if(\"string\"==typeof t){const e=m(t);if(null!=e)return{cachedResult:e}}return null}async function a(e,r,c,o){const u=e?.expression;if(\"string\"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await n();t(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error(\"Expressions containing '$view' are not supported on ElevationInfo\"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c().errorOncePerTick(\"Arcade support required but not provided\");const n=t;n._geometry&&(n._geometry=r(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return\"number\"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||\"0\"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return\"0\"===e?0:null}export{o as clone,a as createContext,u as createContextWithoutExpressionSupport,s as createFeature,i as execute,d as extractExpressionInfo,l as setContextFeature,f as zeroContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnit as t,supportsUnit as e}from\"../../../../symbols/support/unitConversionUtils.js\";import{execute as n,clone as s,setContextFeature as i,createFeature as r}from\"./featureExpressionInfoUtils.js\";class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit=\"meters\",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.mode=null,this.centerInElevationSR=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=t(e)}get requiresSampledElevationInfo(){return\"absolute-height\"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit=\"meters\"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=n(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=e(t.unit)?t.unit:\"meters\",this.offsetElevationInfoUnits=t.offset??0}setFeatureExpressionInfoContext(t){this._featureExpressionInfoContext=t}updateFeatureExpressionInfoContextForGraphic(t,e,n){t.arcade?(this._featureExpressionInfoContext=s(t),this.updateFeatureExpressionFeature(e,n)):this._featureExpressionInfoContext=t}updateFeatureExpressionFeature(t,e){const n=this.featureExpressionInfoContext;n?.arcade&&(n.cachedResult=void 0,i(this._featureExpressionInfoContext,t.geometry?r(n.arcade.modules,t,e):null))}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}export{o as ElevationContext};\n"],"names":["n","t","r","l","i","o","e","s","A","j","S","p","V","x","y","M","T","u","a","U","v","h","f","m","A$1","_","b","C","d","B","O","c","g","d$4","z","P","W","R","F","E","N","$","k","L","H","I","J","G","q","D","w","RibbonLine_glsl","i$1","tt","mt","pt","ut","ft","dt","gt","K","Q","et","it","at","rt","st","nt","X","Y","lt","ct","ot","ht"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAIA,SAASA,GAAEA,GAAE;AAAC,SAAmBA,MAAb;AAAc;ACA+H,SAASA,GAAEC,GAAE,GAAE;AAAC,SAAaA,KAAN,SAAUA,IAAE,CAAA,IAAIA,EAAE,KAAK,CAAC,GAAEA;AAAC;AAAC,SAASC,GAAED,GAAE,GAAE;AAAC,MAASA,KAAN,KAAQ,QAAO;AAAK,QAAMD,IAAEC,EAAE,OAAO,CAAAA,MAAGA,MAAI,CAAC;AAAE,SAAWD,EAAE,WAAN,IAAa,OAAKA;AAAC;AAAC,SAASG,GAAEF,GAAED,GAAEE,GAAEC,GAAEC,GAAE;AAACC,EAAAA,GAAE,CAAC,IAAEJ,EAAE,IAAID,GAAE,CAAC,GAAEK,GAAE,CAAC,IAAEJ,EAAE,IAAID,GAAE,CAAC,GAAEK,GAAE,CAAC,IAAEJ,EAAE,IAAID,GAAE,CAAC,GAAEM,GAAED,IAAEE,IAAE,CAAC,GAAEL,EAAE,IAAIE,GAAE,GAAEG,GAAE,CAAC,CAAC,GAAEJ,EAAE,IAAIC,GAAE,GAAEG,GAAE,CAAC,CAAC,GAAEL,EAAE,IAAIE,GAAE,GAAEG,GAAE,CAAC,CAAC,GAAEJ,EAAE,IAAIC,GAAE,GAAEG,GAAE,CAAC,CAAC,GAAEL,EAAE,IAAIE,GAAE,GAAEG,GAAE,CAAC,CAAC,GAAEJ,EAAE,IAAIC,GAAE,GAAEG,GAAE,CAAC,CAAC;AAAC;AAAC,MAAMF,KAAEJ,EAAC,GAAGM,KAAE,IAAI,aAAa,CAAC;SCAuW,MAAO;AAAA,EAAC,YAAYH,IAAE,CAAA,GAAG;AAAC,SAAK,KAAGH,MAAI,KAAK,gBAAc,oBAAI,OAAI,KAAK,wBAAsB,MAAK,KAAK,WAAS,IAAG,KAAK,aAAWG,EAAE,cAAY,IAAG,KAAK,+BAA6BA,EAAE,gCAA8B,IAAG,KAAK,aAAWA,EAAE,YAAW,KAAK,eAAaA,EAAE,cAAaA,EAAE,sBAAoB,KAAK,uBAAqB,IAAII,OAAG,KAAK,cAAYJ,EAAE,aAAW,MAAM,KAAKA,EAAE,UAAU,IAAE,IAAI;AAAA,EAAK;AAAA,EAAC,UAAS;AAAC,SAAK,YAAY,SAAO;AAAA,EAAC;AAAA,EAAC,IAAI,QAAO;AAAC,WAAO,KAAK;AAAA,EAAM;AAAA,EAAC,IAAI,MAAMH,GAAE;AAACQ,IAAAA,GAAQ,KAAK,UAAX,QAAyBR,KAAN,MAAQ,8CAA8C,GAAE,KAAK,SAAOA;AAAA,EAAC;AAAA,EAAC,YAAYA,GAAE;AAAC,IAAAA,EAAE,UAAQ,KAAK,UAAS,KAAK,YAAY,KAAKA,CAAC;AAAE,eAAUG,KAAK,KAAK,cAAc,CAAAH,EAAE,aAAaG,CAAC;AAAE,SAAK,MAAM,iBAAgB,EAAC,QAAO,MAAK,UAASH,EAAC,CAAC,GAAE,KAAK,cAAc,QAAM,KAAK,MAAM,oBAAmB,IAAI,GAAE,KAAK,0BAAyB;AAAA,EAAE;AAAA,EAAC,eAAeA,GAAE;AAAC,UAAMG,IAAE,KAAK,YAAY,OAAOH,GAAE,CAAC,EAAE,CAAC;AAAE,QAAGG,GAAE;AAAC,iBAAUH,KAAK,KAAK,cAAc,CAAAG,EAAE,gBAAgBH,CAAC;AAAE,WAAK,MAAM,mBAAkB,EAAC,QAAO,MAAK,UAASG,EAAC,CAAC,GAAE,KAAK,cAAc,QAAM,KAAK,MAAM,oBAAmB,IAAI,GAAE,KAAK;IAA2B;AAAA,EAAC;AAAA,EAAC,sBAAqB;AAAC,WAAK,KAAK,YAAY,SAAO,IAAG,MAAK,eAAe,CAAC;AAAA,EAAC;AAAA,EAAC,+BAA+BH,GAAEG,GAAEE,IAAE,IAAG;AAAC,SAAK,MAAM,qBAAoB,EAAC,QAAO,MAAK,UAASL,GAAE,WAAUG,GAAE,MAAKE,EAAC,CAAC,GAAEI,GAAEN,CAAC,KAAG,KAAK,0BAAyB;AAAA,EAAE;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,QAAQH,GAAE;AAAC,QAAG,KAAK,aAAWA,GAAE;AAAC,WAAK,WAASA;AAAE,iBAAU,KAAK,KAAK,YAAY,GAAE,UAAQ,KAAK;AAAS,WAAK,MAAM,qBAAoB,IAAI;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,eAAc;AAAC,UAAMA,IAAE,IAAIU;AAAE,eAAUP,KAAK,KAAK,YAAY,CAAAA,EAAE,YAAUQ,GAAER,EAAE,WAAUH,CAAC;AAAE,WAAO,KAAK,MAAM,oBAAmB,IAAI,GAAEA;AAAA,EAAC;AAAA,EAAC,cAAcA,GAAE;AAAC,eAAUG,KAAK,KAAK,YAAY,CAAAA,EAAE,YAAUS,GAAET,EAAE,WAAUH,CAAC;AAAE,SAAK,MAAM,oBAAmB,IAAI;AAAA,EAAC;AAAA,EAAC,UAAUA,GAAE;AAAC,UAAMG,IAAE,IAAIU,GAAEb,CAAC;AAAE,eAAUK,KAAK,KAAK,YAAY,CAAAA,EAAE,aAAaF,CAAC;AAAE,WAAO,KAAK,MAAM,oBAAmB,IAAI,GAAE,KAAK,cAAc,IAAIA,CAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,gBAAgBH,GAAE;AAAC,SAAK,cAAc,OAAOA,CAAC;AAAE,eAAUG,KAAK,KAAK,YAAY,CAAAA,EAAE,gBAAgBH,CAAC;AAAE,SAAK,MAAM,oBAAmB,IAAI;AAAA,EAAC;AAAA,EAAC,cAAcA,GAAE;AAAC,IAAIA,EAAE,YAAN,IAAc,KAAK,gBAAgBA,CAAC,IAAE,KAAK,cAAcA,CAAC;AAAA,EAAC;AAAA,EAAC,gCAAgCA,GAAEK,GAAE;AAAC,WAAOF,GAAEE,GAAE,KAAK,gBAAeL,EAAE,cAAc;AAAA,EAAC;AAAA,EAAC,gCAAgCA,GAAEK,IAAED,GAAC,GAAG;AAAC,WAAOD,GAAEE,GAAE,KAAK,yBAAwBL,EAAE,cAAc;AAAA,EAAC;AAAA,EAAC,IAAI,2BAA0B;AAAC,WAAO,KAAK,kBAAgB,KAAK,gBAAc,KAAK,iBAAe,IAAIc,MAAE,KAAK,wBAAwB,KAAK,eAAc,CAAC,IAAG,KAAK;AAAA,EAAa;AAAA,EAAC,IAAI,4BAA2B;AAAC,WAAO,KAAK,mBAAiB,KAAK,iBAAe,KAAK,kBAAgB,IAAIA,MAAE,KAAK,wBAAwB,KAAK,gBAAe,CAAC,IAAG,KAAK;AAAA,EAAc;AAAA,EAAC,wBAAwBd,GAAEG,GAAE;AAAC,UAAME,IAAMF,MAAJ;AAAM,eAAU,KAAK,KAAK,aAAY;AAAC,YAAMA,IAAE,EAAE;AAAa,MAAAA,KAAGY,GAAEZ,GAAEH,GAAEK,IAAE,EAAE,iBAAe,KAAK,gCAAgC,CAAC,CAAC;AAAA,IAAC;AAACW,IAAAA,GAAEhB,EAAE,QAAOiB,GAAEC,IAAElB,EAAE,KAAIA,EAAE,KAAI,GAAE,CAAC;AAAE,eAAU,KAAK,KAAK,aAAY;AAAC,YAAMG,IAAE,EAAE;AAAa,UAASA,KAAN,KAAQ;AAAS,YAAM,IAAEE,IAAE,EAAE,iBAAe,KAAK,gCAAgC,CAAC,GAAEJ,IAAEkB,GAAE,CAAC;AAAEC,MAAAA,EAAEF,IAAEf,EAAE,QAAO,CAAC;AAAE,YAAMc,IAAElB,GAAEmB,IAAEG,GAAErB,EAAE,MAAM,CAAC,GAAEsB,IAAEnB,EAAE,SAAOF;AAAE,MAAAD,EAAE,OAAO,CAAC,IAAE,KAAK,IAAIA,EAAE,OAAO,CAAC,GAAEiB,IAAEK,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,4BAA2B;AAAC,UAAMtB,IAAE,KAAK,eAAe;AAAO,SAAK,iBAAe,KAAK,gBAAc,QAAO,KAAK,SAAOA,KAAG,KAAK,MAAM,sBAAsB,MAAKA,CAAC;AAAA,EAAC;AAAA,EAAC,MAAMA,GAAEG,GAAE;AAAC,SAAK,OAAO,OAAO,KAAKH,GAAEG,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,aAAY;AAAC,WAAO,KAAK;AAAA,EAAW;AAAA,EAAC,IAAI,iBAAgB;AAAC,WAAO,KAAK,mBAAiBF;AAAAA,EAAC;AAAA,EAAC,IAAI,eAAeD,GAAE;AAAC,SAAK,kBAAgBK,GAAE,KAAK,mBAAiBD,GAAC,GAAGJ,CAAC,GAAE,KAAK,0BAAyB,GAAG,KAAK,MAAM,yBAAwB,IAAI;AAAA,EAAC;AAAA,EAAC,IAAI,uBAAsB;AAAC,WAAO,KAAK;AAAA,EAAqB;AAAA,EAAC,IAAI,qBAAqBA,GAAE;AAAC,SAAK,wBAAsBA,IAAEK,GAAE,KAAK,yBAAuBD,GAAC,GAAGJ,CAAC,IAAE,MAAK,KAAK,0BAAyB,GAAG,KAAK,MAAM,+BAA8B,IAAI;AAAA,EAAC;AAAA,EAAC,IAAI,0BAAyB;AAAC,WAAO,KAAK,wBAAsB,KAAK;AAAA,EAAc;AAAA,EAAC,IAAI,OAAM;AAAA,EAAC;AAAC,GAAAuB,KAAC,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,QAAM,CAAC,OAAO,WAAU,OAAO,WAAU,OAAO,WAAU,CAAC,OAAO,WAAU,CAAC,OAAO,WAAU,CAAC,OAAO,SAAS;AAAA,EAAC;AAAA,EAAC,IAAI,MAAK;AAAC,WAAOC,GAAE,KAAK,MAAM,CAAC,GAAE,KAAK,MAAM,CAAC,GAAE,KAAK,MAAM,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,MAAK;AAAC,WAAOA,GAAE,KAAK,MAAM,CAAC,GAAE,KAAK,MAAM,CAAC,GAAE,KAAK,MAAM,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,QAAQxB,GAAE;AAAC,UAAK,EAAC,OAAMG,EAAC,IAAE;AAAK,IAAAA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC,GAAEG,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC,GAAEG,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,QAAQA,GAAE;AAAC,UAAK,EAAC,OAAMG,EAAC,IAAE;AAAK,IAAAA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC,GAAEG,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC,GAAEG,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEH,EAAE,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,aAAaA,GAAEG,GAAE;AAAC,aAAQE,IAAE,GAAEA,IAAE,GAAE,EAAEA,EAAE,MAAK,MAAM,IAAEA,CAAC,IAAEL,EAAEK,CAAC,GAAE,KAAK,MAAM,IAAEA,CAAC,IAAEF,EAAEE,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,MAAM,CAAC,IAAE,KAAK,MAAM,CAAC,KAAG,KAAK,MAAM,CAAC,IAAE,KAAK,MAAM,CAAC,KAAG,KAAK,MAAM,CAAC,IAAE,KAAK,MAAM,CAAC;AAAA,EAAC;AAAC;AAAC,MAAMS,WAAUP,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,SAAOkB,GAAC;AAAA,EAAE;AAAC;AAAC,SAASV,GAAEf,GAAEG,GAAEE,GAAE;AAAC,QAAMD,IAAEJ,EAAE,OAAMC,IAAED,EAAE;AAAM,MAAGM,GAAED,CAAC,GAAE;AAAC,UAAML,IAAEsB,GAAEI,IAAErB,EAAE,EAAE,GAAEA,EAAE,EAAE,GAAEA,EAAE,EAAE,CAAC;AAAE,WAAOsB,GAAEC,GAAExB,GAAEJ,CAAC,GAAE2B,GAAEE,GAAE5B,GAAED,CAAC,GAAEG,EAAE,QAAQyB,CAAC,GAAE,KAAKzB,EAAE,QAAQ0B,CAAC;AAAA,EAAC;AAAC,MAAGT,EAAEQ,GAAExB,GAAEC,CAAC,GAAEH,GAAEE,GAAEH,CAAC,EAAE,QAAOE,EAAE,QAAQyB,CAAC,GAAE,KAAKzB,EAAE,QAAQyB,CAAC;AAAER,EAAAA,EAAES,GAAE5B,GAAEI,CAAC,GAAEF,EAAE,QAAQyB,CAAC,GAAEzB,EAAE,QAAQ0B,CAAC,GAAE1B,EAAE,QAAQyB,CAAC,GAAEzB,EAAE,QAAQ0B,CAAC;AAAE,WAAQvB,IAAE,GAAEA,IAAE,GAAE,EAAEA,EAAEwB,CAAAA,GAAEF,GAAExB,CAAC,GAAE0B,GAAED,GAAE5B,CAAC,GAAE2B,EAAEtB,CAAC,IAAEL,EAAEK,CAAC,GAAEuB,EAAEvB,CAAC,IAAEF,EAAEE,CAAC,GAAEc,EAAEQ,GAAEA,GAAEvB,CAAC,GAAEe,EAAES,GAAEA,GAAExB,CAAC,GAAEF,EAAE,QAAQyB,CAAC,GAAEzB,EAAE,QAAQ0B,CAAC,GAAE1B,EAAE,QAAQyB,CAAC,GAAEzB,EAAE,QAAQ0B,CAAC;AAAC;AAAC,MAAMH,KAAEK,EAAC,GAAGH,IAAEG,EAAC,GAAGF,IAAEE,KAAIb,KAAEa,EAAC,GCA5wL1B,KAAE,CAAC,oBAAmB,sBAAqB,qBAAoB,uBAAsB,yBAAwB,+BAA8B,qBAAoB,oBAAmB,oBAAmB,iBAAgB,mBAAkB,mBAAmB;ACA0M,IAAA2B,KAAA,MAAO;AAAA,EAAC,YAAY,GAAE,GAAE5B,IAAE,IAAG;AAAC,SAAK,QAAM,GAAE,KAAK,kBAAgBA,GAAE,KAAK,KAAGH,GAAC,GAAG,KAAK,SAAO,IAAIK,MAAE,KAAK,UAAQ,IAAG,KAAK,YAAU,IAAG,KAAK,gBAAc,IAAI,SAAM,KAAK,WAAS,IAAIH,MAAE,KAAK,WAAS,oBAAI,OAAI,KAAK,YAAU,IAAG,KAAK,UAAQ,GAAG,WAAS,IAAG,KAAK,YAAU,GAAG,YAAU,IAAG,KAAK,eAAa,GAAG,gBAAc,GAAE,EAAE,SAAS,IAAI;AAAE,eAAU,KAAKiB,GAAE,MAAK,SAAS,IAAI,KAAK,OAAO,GAAG,GAAE,CAAApB,MAAG,EAAE,YAAY,GAAEA,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS,SAAO,KAAK,SAAS,QAAO,GAAG,KAAK,MAAM,YAAY,IAAI,GAAE,KAAK,kCAAiC;AAAA,EAAG;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,UAAU,GAAE;AAAC,WAAOA,GAAE,KAAK,SAAS,IAAI,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,SAAS,GAAE;AAAC,SAAK,YAAU;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,aAAW,KAAK;AAAA,EAAO;AAAA,EAAC,IAAI,GAAE;AAAC,SAAK,SAAS,IAAI,EAAE,IAAG,CAAC,GAAE,EAAE,QAAM,MAAK,KAAK,OAAO,KAAK,oBAAmB,CAAC,GAAQ,KAAK,WAAX,QAAoB,KAAK,cAAc,KAAK,CAAC;AAAA,EAAC;AAAA,EAAC,OAAOA,GAAE;AAAC,SAAK,SAAS,OAAOA,EAAE,EAAE,MAAI,KAAK,OAAO,KAAK,sBAAqBA,CAAC,GAAEA,EAAE,QAAM,MAAW,KAAK,WAAX,SAAqBK,GAAE,KAAK,eAAcL,CAAC,KAAG,KAAK,QAAQ,OAAO,CAACA,CAAC,CAAC;AAAA,EAAG;AAAA,EAAC,QAAQ,GAAE;AAAC,eAAU,KAAK,EAAE,MAAK,SAAS,IAAI,EAAE,IAAG,CAAC,GAAE,EAAE,QAAM;AAAK,SAAK,OAAO,KAAK,qBAAoB,CAAC,GAAQ,KAAK,WAAX,QAAoB,KAAK,cAAc,KAAK,GAAG,CAAC;AAAA,EAAC;AAAA,EAAC,WAAWA,GAAE;AAAC,UAAMM,IAAE,IAAI;AAAM,eAAUD,KAAKL,EAAE,MAAK,SAAS,OAAOK,EAAE,EAAE,KAAGC,EAAE,KAAKD,CAAC;AAAE,QAAOC,EAAE,WAAN,MAAe,KAAK,OAAO,KAAK,uBAAsBA,CAAC,GAAEA,EAAE,QAAQ,CAAAD,MAAGA,EAAE,QAAM,IAAI,GAAQ,KAAK,WAAX,OAAoB;AAAC,eAAQL,IAAE,GAAEA,IAAEM,EAAE,SAAQD,CAAAA,GAAE,KAAK,eAAcC,EAAEN,CAAC,CAAC,KAAGM,EAAEN,CAAC,IAAEM,EAAEA,EAAE,SAAO,CAAC,GAAEA,EAAE,UAAQ,KAAG,EAAEN;AAAE,WAAK,QAAQ,OAAOM,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,SAAK,MAAM,YAAY,IAAI;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,IAAI,KAAK,iBAAT,KAAuB,KAAK,MAAM,UAAU,KAAK,EAAE;AAAA,EAAC;AAAA,EAAC,sBAAsB,GAAE,GAAE;AAAC,IAAM,KAAK,WAAX,QAAoB,KAAK,cAAc,SAAS,CAAC,KAAG,KAAK,QAAQ,OAAO,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,6BAA4B;AAAC,WAAa,KAAK,WAAX,QAAoB,KAAK,SAAS,OAAK,MAAI,KAAK,UAAQ,IAAIwB,GAAE,OAAG,EAAE,yBAAyB,MAAM,GAAE,KAAK,QAAQ,IAAI,KAAK,SAAS,OAAM,CAAE,KAAS,KAAK,WAAX,QAAoB,KAAK,cAAc,SAAO,MAAI,KAAK,QAAQ,IAAI,KAAK,aAAa,GAAE,KAAK,cAAc,SAAO,IAAG,KAAK;AAAA,EAAO;AAAA,EAAC,oCAAmC;AAAC,SAAK,UAAQ1B,GAAE,KAAK,OAAO,GAAE,KAAK,cAAc,SAAO;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAA,EAAC;AAAC,QCA/4E,MAAO;AAAA,EAAC,YAAYH,GAAEK,GAAE;AAAC,SAAK,OAAKL,GAAE,KAAK,KAAGK;AAAA,EAAC;AAAC;AAAC,SAASN,GAAEA,GAAEI,GAAE0B,GAAEzB,GAAE;AAAC,SAAO,IAAIC,GAAEL,GAAED,GAAEI,GAAE0B,CAAC,GAAEzB,CAAC;AAAC;ACA4lB,MAAMW,KAAE;AAAE,SAASK,GAAE,GAAEA,GAAE;AAAC,QAAK,EAAC,QAAOZ,GAAE,YAAWa,EAAC,IAAE;AAAE,EAAAb,EAAE,SAAS,IAAI,IAAIH,EAAE,kBAAiB,CAAAD,MAAGA,EAAE,KAAK,CAAC;AAAE,QAAK,EAAC,0BAAyBQ,GAAE,WAAUgB,EAAC,IAAER;AAAE,EAAAR,KAAG,EAAE,QAAQZ,IAAEoB,CAAC,GAAEjB,GAAEK,CAAC,GAAEqB,GAAErB,GAAEY,CAAC,GAAEZ,EAAE,SAAS,IAAI,IAAIkB,GAAE,qBAAoB,CAACV,GAAEjB,MAAIK,GAAE4B,IAAE9B,GAAE8B,IAAEjC,EAAE,OAAO,YAAWiB,EAAE,MAAM,CAAC,CAAC,CAAC,GAAER,EAAE,KAAK,IAAIV;AAAAA;AAAAA;AAAAA,0BAGhhC8B,IAAE9B,uCAAqCA,sBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA,KAKlF,KAAGU,EAAE,KAAK,IAAIV;AAAAA;AAAAA,EAEjB,GAAEsB,EAAE,aAAWC,EAAE,IAAI,wBAAuB,OAAO,GAAEb,EAAE,SAAS,IAAI,IAAIP,GAAE,iBAAgB,CAAAG,MAAGA,EAAE,OAAO,OAAO,GAAE,IAAIH,GAAE,iBAAgB,CAAAG,MAAGA,EAAE,OAAO,OAAO,GAAE,IAAIH,GAAE,gBAAe,CAAAG,MAAGA,EAAE,OAAO,MAAM,GAAE,IAAIH,GAAE,gBAAe,CAAAG,MAAGA,EAAE,OAAO,MAAM,GAAE,IAAIH,GAAE,kBAAiB,CAAAG,MAAGA,EAAE,OAAO,QAAQ,CAAC,GAAEI,EAAE,KAAK,IAAIV;AAAAA,oBACnRW,EAAEG,GAAE,UAAU,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,eAKpBH,EAAEG,GAAE,iDAAgD,MAAM,CAAC;AAAA;AAAA,KAErE,MAAIS,EAAE,IAAI,QAAO,OAAO,GAAEb,EAAE,KAAK,IAAIV;AAAAA,oBACtBW,EAAEG,GAAE,UAAU,CAAC;AAAA;AAAA,eAEpBH,EAAEG,GAAE,qDAAoD,UAAU,CAAC;AAAA;AAAA,KAE7E,IAAGQ,EAAE,gBAAcC,EAAE,IAAI,2BAA0B,OAAO,GAAEb,EAAE,UAAU,IAAI,mBAAkB,OAAM,CAAC,GAAEA,EAAE,SAAS,IAAI,IAAIU,GAAE,mBAAkB,CAAAd,MAAGA,EAAE,UAAU,QAAOW,EAAC,GAAE,IAAIG,GAAE,sBAAqB,CAAAd,MAAGA,EAAE,UAAU,eAAcW,EAAC,GAAE,IAAIV,EAAE,qBAAoB,CAAAD,MAAGA,EAAE,UAAU,UAAS,EAAC,aAAY,GAAE,CAAC,CAAC,GAAEI,EAAE,KAAK,IAAIV;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,iBAmBtSW,EAAEW,EAAE,YAAW,SAAQ,oCAAoC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,KAKxE,KAAGZ,EAAE,KAAK,IAAIV;AAAAA;AAAAA,EAEjB,GAAEsB,EAAE,cAAY,EAAE,QAAQrB,IAAEqB,CAAC,GAAEC,EAAE,IAAI,yBAAwB,OAAO,GAAEb,EAAE,KAAK,IAAIV;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAMjF,MAAIuB,EAAE,IAAI,SAAQ,MAAM,GAAEb,EAAE,KAAK,IAAIV;AAAAA;AAAAA,EAErC;AAAE;AAAC,MAAMkC,KAAEhB,GAAC;ACzDd,SAASZ,GAAEA,GAAE;AAAC,EAAAA,EAAE,OAAO,KAAK,IAAI,0CAA0C;AAAC;AAAC,SAASsB,GAAEtB,GAAE;AAAC,EAAAA,EAAE,SAAS,KAAK,IAAI,mDAAmD;AAAC;ACAulB,SAASW,GAAEhB,GAAE;AAAC,SAAOA,EAAE,QAAQ,IAAI,OAAG,KAAK,MAAM,IAAEA,EAAE,UAAU,CAAC;AAAC;AAAC,SAASE,GAAEF,GAAE;AAAC,MAASA,KAAN,KAAQ,QAAO;AAAE,QAAM,IAAEgB,GAAEhB,CAAC;AAAE,SAAO,KAAK,MAAM,EAAE,OAAO,CAAC,GAAEK,MAAI,IAAEA,CAAC,CAAC;AAAC;ACAtwB,SAASC,GAAEN,GAAE;AAAC,SAAaA,KAAN,OAAQI,KAAMJ,EAAE,WAAN,IAAaA,IAAEC,GAAE6B,IAAE9B,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAE,CAAC;AAAC;AAAC,MAAM8B,KAAE9B,GAAC;ACA2b,SAAS8B,GAAEpB,GAAEoB,GAAE;AAAC,MAAG,CAACA,EAAE,eAAe,QAAO,KAAKpB,EAAE,SAAS,KAAK,IAAIO;AAAAA;AAAAA,oEAEppB;AAAE,QAAMD,IAAE,EAAEc,EAAE,UAAQA,EAAE,0BAAyB,EAAC,QAAOrB,GAAE,UAASW,EAAC,IAAEV;AAAE,EAAAoB,EAAE,WAAS9B,GAAES,GAAEqB,CAAC,GAAErB,EAAE,SAAS,IAAI,IAAIN,GAAE,iCAAgC,CAAC,EAAC,QAAOE,EAAC,MAAI,IAAEA,EAAE,mBAAmB,CAAC,EAAE,KAAK,IAAIY;AAAAA;AAAAA;AAAAA,EAGnQ,IAAGP,EAAE,SAAS,IAAI,oBAAmB,OAAO,GAAEA,EAAE,SAAS,IAAI,0BAAyB,MAAM,GAAEA,EAAE,SAAS,IAAI,0BAAyB,OAAO,GAAED,EAAE,KAAK,IAAIQ;AAAAA;AAAAA,qBAEvIA,EAAE,MAAMK,EAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAO5B,GAAElB,GAAEK,CAAC,GAAEA,EAAE,KAAK,IAAIQ;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,yCAMoBD,IAAE,kBAAgB,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAgB7D,GAAEI,EAAE,SAAS,IAAI,IAAIrB,GAAE,yBAAwB,CAAAM,MAAGA,EAAE,cAAc,GAAE,IAAIH,EAAE,8BAA6B,CAAAG,MAAG,IAAEgB,GAAEhB,CAAC,CAAC,CAAC,GAAEyB,EAAE,0BAAwBV,EAAE,SAAS,IAAI,IAAInB,GAAE,mBAAkB,CAAAI,MAAGsB,GAAEtB,EAAE,eAAe,CAAC,CAAC,GAAEK,EAAE,QAAQL,EAAC,GAAEe,EAAE,KAAK,IAAIH;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAmBvO,GAAEG,EAAE,KAAK,IAAIH;AAAAA;AAAAA,OAERX,EAAE,CAACwB,EAAE,wBAAuB,4CAA4C,CAAC;AAAA;AAAA;AAAA;AAAA,eAIjEA,EAAE,yBAAuB,8CAA4C,yCAAyC;AAAA;AAAA,GAE1H;AAAC;AAAC,SAAST,GAAEhB,GAAE;AAAC,QAAML,IAAEK,EAAE;AAAe,SAAOL,IAAEU,GAAEL,EAAE,cAAc,IAAEL,EAAE,aAAW;AAAC;AAAC,MAAMsB,KAAE,KC/DiKnB,KAAE,IAAGG,KAAEH,KAAE,GAAEJ,KAAEO,KAAE,GAAEI,KAAEP,KAAEJ,IAAEkB,KAAE;ACAV,SAASd,GAAEA,GAAEJ,GAAE;AAAC,QAAM4B,IAAExB,EAAE,QAAOD,IAAEH,EAAE;AAAyBE,EAAAA,GAAE0B,CAAC,GAAQA,EAAE,SAAS,IAAI,aAAa,KAAlC,QAAqCA,EAAE,UAAU,IAAI,eAAc,SAAQ,CAAC,GAAEA,EAAE,UAAU,IAAI,0BAAyB,SAAQtB,EAAC,EAAE,KAAK,IAAIY;AAAAA,uBACvcb,EAAEF,GAAE,UAAU,CAAC;AAAA,0BACZE,EAAEF,GAAE,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAMjC,GAAMH,EAAE,UAAN,MAAc4B,EAAE,UAAU,IAAI,4BAA2B,SAAQ,IAAG,GAAEA,EAAE,SAAS,IAAI,IAAI3B,GAAE,uBAAsB,CAAAK,MAAGA,EAAE,OAAO,mBAAmB,CAAC,GAAEsB,EAAE,KAAK,IAAIV;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,+DAKpGb,EAAEF,GAAE,KAAK,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAQ3BE,EAAEF,GAAE,KAAK,CAAC;AAAA;AAAA,GAErD;AAAE;ACvB4U,SAASoB,GAAEtB,GAAEsB,GAAE;AAAC,MAAG,CAACA,EAAE,aAAa;AAAO,QAAK,EAAC,YAAWrB,GAAE,UAAS0B,GAAE,QAAOzB,GAAE,UAASa,EAAC,IAAEf;AAAE,EAAAC,EAAE,IAAI,cAAa,MAAM,GAAE0B,EAAE,IAAI,cAAa,OAAO,GAAEA,EAAE,IAAI,cAAa,OAAO,GAAEA,EAAE,IAAI,aAAY,OAAO,GAAEA,EAAE,IAAI,mBAAkB,OAAO,GAAEzB,EAAE,KAAK,IAAIE;AAAAA;AAAAA;AAAAA,gCAG1iB;AAAE,QAAK,EAAC,WAAUe,EAAC,IAAEG;AAAE,EAAIH,MAAJ,KAAOJ,EAAE,UAAU,IAAI,aAAY,SAAQ,GAAG,GAAEA,EAAE,KAAK,IAAIX;AAAAA;AAAAA,QAE1GE,GAAEa,CAAC,CAAC;AAAA,MACN,GAAEJ,EAAE,SAAS,IAAI,IAAIZ,EAAE,eAAc,CAAAE,MAAGA,EAAE,WAAW,GAAE,IAAIF,EAAE,eAAc,CAAAE,MAAGA,EAAE,WAAW,GAAE,IAAIF,EAAE,SAAQ,CAAAE,MAAGA,EAAE,cAAc,GAAE,IAAIY,GAAE,iBAAgB,CAAAjB,MAAGK,GAAEN,IAAEC,EAAE,WAAUA,EAAE,SAAQA,EAAE,YAAWA,EAAE,WAAW,CAAC,CAAC,GAAEe,EAAE,KAAK,IAAIX;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAKhO,GAAEW,EAAE,KAAK,IAAIX;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EA8Bb;AAAC;AAAC,SAASE,GAAED,GAAE;AAAC,UAAOA,GAAC;AAAA,IAAE,KAAK;AAAE,aAAM;AAAA,IAA2C,KAAK;AAAE,aAAM;AAAA;AAAA,IAAmG;AAAQ,aAAM;AAAA,EAAa;AAAC;AAAC,MAAMN,KAAEC,GAAC,GCzCo3DkC,KAAE;AAAE,SAAS1B,GAAEA,GAAE;AAAC,QAAMyB,IAAE,IAAIR,MAAE,EAAC,YAAWC,GAAE,UAASS,GAAE,QAAOC,GAAE,UAASC,EAAC,IAAEJ,GAAE,EAAC,mBAAkB1B,GAAE,QAAOI,GAAE,QAAOI,GAAE,SAAQuB,GAAE,gBAAeT,GAAE,gBAAef,GAAE,YAAWyB,GAAE,WAAUC,GAAE,mBAAkBhB,GAAE,cAAaiB,GAAE,0BAAyBb,EAAC,IAAEpB;AAAE,EAAA6B,EAAE,QAAQpB,EAAC,GAAEgB,EAAE,QAAQjC,IAAEQ,CAAC,GAAEyB,EAAE,QAAQlC,IAAES,CAAC,GAAEyB,EAAE,QAAQ9B,IAAEK,CAAC,GAAEyB,EAAE,QAAQ3B,IAAEE,CAAC,GAAEyB,EAAE,QAAQS,IAAElC,CAAC;AAAE,QAAMmC,IAAEpC,KAAG,CAACI;AAAE,EAAAgC,MAAIP,EAAE,SAAS,IAAI,IAAI3B,EAAE,eAAc,CAAAJ,MAAGA,EAAE,WAAW,CAAC,GAAE4B,EAAE,QAAQ7B,IAAE,EAAC,OAAM,GAAE,0BAAyBwB,EAAC,CAAC,IAAGE,GAAEM,GAAE5B,CAAC,GAAE4B,EAAE,SAAS,IAAI,IAAIpB,GAAE,2BAA0B,CAAAX,MAAGA,EAAE,OAAO,uBAAuB,GAAE,IAAIc,GAAE,WAAU,CAAAd,MAAGA,EAAE,OAAO,OAAO,GAAE,IAAII,EAAE,cAAa,CAAAJ,MAAaA,EAAE,SAAZ,UAAiB,IAAEA,EAAE,UAAU,GAAE,IAAIgB,GAAE,YAAW,CAAAhB,MAAGA,EAAE,OAAO,YAAY,CAAC,GAAE+B,EAAE,UAAU,IAAI,oBAAmB,SAAQ,KAAK,GAAEV,EAAE,IAAI,YAAW,MAAM,GAAEA,EAAE,IAAI,iBAAgB,MAAM,GAAEA,EAAE,IAAI,aAAY,MAAM,GAAEA,EAAE,IAAI,kBAAiB,MAAM,GAAEA,EAAE,IAAI,MAAK,OAAO,GAAES,EAAE,IAAI,UAAS,MAAM,GAAEA,EAAE,IAAI,QAAO,QAAO,EAAC,WAAU,GAAE,CAAC,GAAEA,EAAE,IAAI,iBAAgB,OAAO,GAAEA,EAAE,IAAI,cAAa,OAAO;AAAE,QAAMS,IAAEf;AAAE,EAAAe,KAAGT,EAAE,IAAI,gBAAe,OAAO;AAAE,QAAMU,IAAMP,MAAJ,GAAMpB,IAAEW,KAAGgB,GAAEC,IAAEhC,KAAGI;AAAE,EAAA4B,KAAGX,EAAE,IAAI,qBAAoB,OAAO,GAAEU,MAAIV,EAAE,IAAI,eAAc,OAAO,GAAEA,EAAE,IAAI,sBAAqB,OAAO,IAAGC,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EAWzvG,GAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA,EAIb,GAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,EA+Bb,GAAEE,GAAEc,CAAC,GAAEA,EAAE,UAAU,IAAI,WAAU,SAAQP,IAAE,IAAE,CAAC,EAAE,KAAK,IAAIT;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,2CAWhB,GAAEuB,KAAGP,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA,EAIzD,GAAEa,EAAE,QAAQvB,EAAC,GAAE0B,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,iCAkBKR,EAAEgB,GAAE,YAAY,CAAC;AAAA,QAC1ChB,EAAEiB,KAAGD,GAAE,iDAAiD,CAAC;AAAA,QACzDhB,EAAEiB,KAAG,CAACD,GAAE,mCAAmC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAU5CgB,IAAExB,+DAA6D,EAAE;AAAA,GACtE,IAAGS,KAAGgB,MAAIT,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA,QAIhByB,IAAEzB,0DAAwD,EAAE;AAAA,KAC/D,GAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,+DAiB6C,GAAEmB,IAAEH,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,yBAOrDS,IAAET,iCAAiCA,EAAE,OAAOc,KAAE,MAAIA,KAAE,EAAE,CAAC,MAAId,oBAAoB;AAAA;AAAA;AAAA;AAAA,OAIjG,IAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,0DASsC;AAAE,QAAM2B,IAAMT,MAAJ;AAAM,SAAOF,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,QAQpF2B,IAAE3B,yDAAuD,EAAE;AAAA;AAAA,GAEhE,GAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,MAMV0B,IAAE1B,uCAAqC,EAAE;AAAA;AAAA;AAAA,GAG5C,GAAEyB,KAAGT,EAAE,KAAK,IAAIhB;AAAAA;AAAAA,yIAEsH,GAAES,MAAIlB,IAAEyB,EAAE,SAAS,IAAI,IAAIY,GAAE,sBAAqB,CAAA3C,MAAG,IAAEA,EAAE,gBAAgB,CAAC,IAAE+B,EAAE,KAAK,IAAIhB;AAAAA,qEAC3J,GAAEgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA,0EAIR,GAAET,IAAEyB,EAAE,KAAK,IAAIhB;AAAAA,8GACqB,IAAEgB,EAAE,KAAK,IAAIhB;AAAAA,oFACvC,GAAEgB,EAAE,SAAS,IAAI,IAAI3B,EAAE,2BAA0B,CAAAJ,MAAGJ,GAAEI,CAAC,CAAC,CAAC,GAAE+B,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,sCAcpH,IAAGgB,EAAE,KAAK,IAAIhB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,QAO5CoB,KAAG,CAAC7B,IAAE,4BAA0B,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMpC,GAAEsB,EAAE,SAAS,QAAQ5B,IAAEG,CAAC,GAAEyB,EAAE,QAAQgB,IAAEzC,CAAC,GAAE6B,EAAE,QAAQnC,EAAC,GAAEmC,EAAE,KAAK,IAAIjB;AAAAA,yBAC9C,GAAEa,EAAE,QAAQN,EAAC,GAAEU,EAAE,KAAK,IAAIjB;AAAAA;AAAAA;AAAAA,MAG7CR,EAAEkC,GAAE1B,iEAAiE,CAAC;AAAA,GACzE,GAAEoB,IAAEH,EAAE,KAAK,IAAIjB,8CAA8C,KAAGyB,KAAGR,EAAE,KAAK,IAAIjB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,4BAQrDA,EAAE,MAAMP,EAAC,CAAC;AAAA;AAAA;AAAA,OAG/B,GAAEK,IAAEmB,EAAE,KAAK,IAAIjB;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,kCAQYA,EAAE,MAAMP,EAAC,CAAC;AAAA,OACrC,IAAEwB,EAAE,KAAK,IAAIjB,mDAAmD,GAAOL,MAAL,MAAQsB,EAAE,KAAK,IAAIjB,wCAAwCA,EAAE,MAAMP,EAAC,CAAC,IAAI,GAAEoB,EAAE,QAAQN,EAAC,GAAEU,EAAE,SAAS,IAAI,IAAIN,GAAE,kBAAiB,CAAA1B,MAAGA,EAAE,KAAK,CAAC,EAAE,KAAK,IAAIe;AAAAA,sCACvL,GAAEI,KAAGa,EAAE,SAAS,IAAI,IAAIN,GAAE,cAAa,CAAA1B,MAAGA,EAAE,cAAYA,EAAE,KAAK,GAAE,IAAII,EAAE,cAAa,CAACJ,GAAEF,MAAIE,EAAE,aAAWF,EAAE,OAAO,UAAU,CAAC,EAAE,KAAK,IAAIiB;AAAAA;AAAAA;AAAAA,+DAG9G,GAAEiB,EAAE,KAAK,IAAIjB,uDAAuD,GAAEN,MAAIuB,EAAE,SAAS,IAAI,IAAI5B,EAAE,WAAU,CAAAJ,MAAGA,EAAE,OAAO,CAAC,GAAEgC,EAAE,KAAK,IAAIjB,uEAAuE,IAAGS,KAAGQ,EAAE,KAAK,IAAIjB;AAAAA;AAAAA;AAAAA,gDAG1O,GAAEqB,KAAGJ,EAAE,KAAK,IAAIjB;AAAAA;AAAAA;AAAAA,UAGtDR,EAAOG,MAAL,IAAOK;AAAAA,kCACeA,EAAE,MAAMP,EAAC,CAAC;AAAA;AAAA,cAE9B,CAAC;AAAA,OACR,IAAGwB,EAAE,KAAK,IAAIjB,6DAA6D,GAAEa;AAAC;AAAC,MAAMA,KAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAMzB,IAAE,oCAAmC0B,GAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;ACpO22B,MAAMzB,WAAUR,GAAC;AAAA,EAAC,YAAY,GAAE,GAAE;AAAC,UAAM,GAAE,GAAE,IAAIE,GAAEY,IAAE,MAAI,QAAA,QAAA,EAAA,KAAA,MAAAmC,EAAA,CAA8B,GAAE/B,GAAE,CAAC,EAAE,SAAS,GAAE,KAAK,gBAAc,EAAE,YAAUgB,GAAE,QAAMA,GAAE;AAAA,EAAc;AAAA,EAAC,mBAAmB,GAAEhC,GAAE;AAAC,UAAK,EAAC,SAAQF,GAAE,QAAO,GAAE,cAAamB,GAAE,kBAAiBE,EAAC,IAAE,GAAEY,IAAMjC,MAAJ,GAAM8B,IAAM9B,MAAJ;AAAM,WAAOY,GAAE,EAAC,UAASb,GAAE,CAAC,IAAE8B,GAAE7B,CAAC,IAAE,MAAK,WAAU,EAAC,MAAKe,GAAEf,CAAC,EAAC,GAAE,YAAWG,GAAE,CAAC,GAAE,aAAYF,GAAE,GAAEe,GAAEhB,GAAE,CAAC,CAAC,GAAE,YAAW4B,IAAE,cAAaT,IAAEO,KAAE,MAAK,aAAYP,IAAEjB,IAAEO,KAAEW,KAAE,MAAK,eAAca,KAAGH,IAAET,IAAEE,KAAE,OAAKzB,GAAC,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAE;AAAC,QAAG,EAAE,UAAS;AAAC,YAAM,IAAE,EAAE,mBAAiByB,KAAE,MAAK,EAAC,QAAO,GAAE,cAAavB,EAAC,IAAE;AAAE,WAAK,+BAA6BY,GAAE,EAAC,UAASL,IAAE,eAAc,GAAE,WAAUc,IAAE,YAAW,MAAK,YAAWO,IAAE,cAAa,MAAK,aAAY5B,IAAEmB,KAAE,MAAK,aAAYlB,GAAE,CAAC,EAAC,CAAC,GAAE,KAAK,0BAAwBW,GAAE,EAAC,UAASL,IAAE,eAAc,GAAE,WAAUP,IAAEqB,KAAEG,IAAE,YAAW,MAAK,YAAWI,IAAE,cAAa5B,IAAE8B,KAAE,MAAK,aAAY9B,IAAEiC,KAAE,MAAK,aAAYhC,GAAE,CAAC,EAAC,CAAC,GAAE,KAAK,6BAA2BW,GAAE,EAAC,UAAS,MAAK,eAAc,GAAE,WAAUY,IAAE,YAAW,MAAK,YAAW,MAAK,cAAaxB,IAAE0B,KAAE,MAAK,aAAY1B,IAAES,KAAE,MAAK,aAAYR,GAAE,CAAC,EAAC,CAAC;AAAA,IAAC;AAAC,WAAO,KAAK,oBAAkB,KAAK,mBAAmB,GAAE,EAAE,GAAE,KAAK,mBAAmB,GAAE,EAAE;AAAA,EAAC;AAAA,EAAC,YAAY,GAAE,GAAE;AAAC,QAAG,EAAE,QAAO,KAAK;AAAkB,YAAO;MAAG,KAAK;AAAG,eAAO,KAAK,gCAA8B,MAAM,YAAW;AAAA,MAAG,KAAK;AAAG,eAAO,KAAK,2BAAyB,MAAM,YAAW;AAAA,MAAG;AAAQ,eAAO,KAAK,8BAA4B,MAAM,YAAW;AAAA,IAAE;AAAA,EAAC;AAAC;AAAC,MAAMsB,KAAE,EAAC,QAAO,GAAE,OAAM,GAAE;AAAE,SAASL,GAAEnB,GAAE;AAAC,QAAMG,IAAEE,GAAC,EAAG,MAAM,UAAU,EAAE,QAAQ,eAAe,EAAE,QAAQ,WAAW,EAAE,IAAI,IAAI,EAAE,QAAQ,gBAAgB;AAAE,SAAOL,EAAE,aAAWG,EAAE,IAAI,uBAAuB,IAAEA,EAAE,OAAO,SAAQ,EAAC,cAAa,GAAE,CAAC,GAAEH,EAAE,YAAUG,EAAE,IAAI,sBAAsB,IAAEA,EAAE,IAAI,MAAM,GAAEH,EAAE,gBAAcG,EAAE,IAAI,yBAAyB,GAAEG,QAAKH,EAAE,OAAO,WAAW,GAAEH,EAAE,gBAAcG,EAAE,QAAQ,YAAY,GAAEA;AAAC;ACAvpF,IAAAgD,IAAA,cAAgB9C,GAAC;AAAA,EAAC,YAAYD,GAAE;AAAC,UAAK,GAAG,KAAK,YAAUA,GAAE,KAAK,UAAQ,GAAE,KAAK,iBAAe,GAAE,KAAK,mBAAiB,IAAG,KAAK,aAAW,IAAG,KAAK,SAAO,IAAG,KAAK,iBAAe,IAAG,KAAK,yBAAuB,IAAG,KAAK,0BAAwB,IAAG,KAAK,aAAW,IAAG,KAAK,oBAAkB,IAAG,KAAK,YAAU,IAAG,KAAK,aAAW,IAAG,KAAK,eAAa,IAAG,KAAK,iBAAe,IAAG,KAAK,oBAAkB,IAAG,KAAK,eAAa,IAAG,KAAK,WAAS,IAAG,KAAK,mBAAiB,IAAG,KAAK,mBAAiB,IAAG,KAAK,YAAU,IAAG,KAAK,4BAA0B,IAAG,KAAK,YAAU,GAAE,KAAK,2BAAyB,IAAG,KAAK,wBAAsB,GAAE,KAAK,gBAAc,IAAG,KAAK,kBAAgB,IAAG,KAAK,yBAAuB,IAAG,KAAK,iBAAe,IAAG,KAAK,YAAU;AAAA,EAAE;AAAA,EAAC,IAAI,eAAc;AAAC,WAAW,KAAK,cAAT;AAAA,EAAkB;AAAC;AAACA,EAAE,CAACJ,EAAE,EAAC,OAAM,EAAC,CAAC,CAAC,GAAEG,EAAE,WAAU,WAAU,MAAM,GAAEC,EAAE,CAACJ,EAAE,EAAC,OAAM,EAAC,CAAC,CAAC,GAAEG,EAAE,WAAU,kBAAiB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,oBAAmB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,cAAa,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,UAAS,MAAM,GAAEC,EAAE,CAACJ,GAAG,GAAEG,EAAE,WAAU,kBAAiB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,0BAAyB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,2BAA0B,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,cAAa,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,qBAAoB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,aAAY,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,cAAa,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,kBAAiB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,qBAAoB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEC,EAAE,CAACJ,GAAG,GAAEG,EAAE,WAAU,YAAW,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,oBAAmB,MAAM,GAAEC,EAAE,CAACJ,GAAG,GAAEG,EAAE,WAAU,oBAAmB,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,aAAY,MAAM,GAAEC,EAAE,CAACJ,GAAG,GAAEG,EAAE,WAAU,6BAA4B,MAAM,GAAEC,EAAE,CAACJ,EAAE,EAAC,OAAM,EAAC,CAAC,CAAC,GAAEG,EAAE,WAAU,aAAY,MAAM,GAAEC,EAAE,CAACJ,EAAC,CAAE,GAAEG,EAAE,WAAU,4BAA2B,MAAM;ACAzP,MAAM0C,WAAUT,GAAC;AAAA,EAAC,YAAYpC,GAAEK,GAAE;AAAC,UAAML,GAAE+C,EAAC,GAAE,KAAK,WAAS,oBAAI,IAAI,CAAC,CAAC,GAAE,CAAA/C,MAAGiC,GAAEjC,CAAC,KAAGO,GAAEP,CAAC,KAAO,KAAK,WAAW,mBAApB,CAAkC,GAAE,CAAC,GAAE,CAAAA,MAAG0B,GAAE1B,CAAC,CAAC,GAAE,CAAC,IAAG,CAAAA,MAAG6B,GAAE7B,CAAC,KAAO,KAAK,WAAW,mBAApB,CAAkC,GAAE,CAAC,IAAG,CAAAA,MAAG6B,GAAE7B,CAAC,KAAO,KAAK,WAAW,mBAApB,CAAkC,GAAE,CAAC,GAAE,CAAAA,MAAGO,GAAEP,CAAC,KAAG,KAAK,WAAW,cAAgB,KAAK,WAAW,mBAApB,CAAkC,GAAE,CAAC,GAAE,CAAAA,MAAGO,GAAEP,CAAC,KAAG,CAAC,KAAK,WAAW,cAAgB,KAAK,WAAW,mBAApB,CAAkC,GAAE,CAAC,IAAG,CAAAA,MAAG0C,GAAE1C,CAAC,CAAC,CAAC,CAAC,GAAE,KAAK,iBAAe,IAAI4B,EAAEvB,CAAC;AAAA,EAAC;AAAA,EAAC,iBAAiBL,GAAEK,GAAE;AAAC,UAAM,iBAAiBL,GAAEK,GAAE,KAAK,cAAc,GAAE,KAAK,eAAe,UAAQA,EAAE,SAAQ,KAAK,eAAe,SAAYA,EAAE,SAAP;AAAY,UAAM,IAAQ,KAAK,WAAW,kBAAtB,QAA0CL,MAAJ;AAAM,WAAO,KAAK,eAAe,iBAAe,GAAE,KAAK,eAAe,yBAAuB,KAAS,KAAK,WAAW,mBAAtB,MAAsC,KAAK,eAAe,0BAAwB,KAAG,KAAK,WAAW,yBAAwB,KAAK,eAAe,gBAAc,KAAK,WAAW,eAAc,KAAK,eAAe,aAAqB,KAAK,WAAW,SAA1B,SAA+B,KAAK,eAAe,UAAQ,KAAK,WAAW,KAAI,KAAK,eAAe,oBAAwB,KAAK,WAAW,oBAAtB,QAAwC2C,GAAE,KAAK,WAAW,gBAAgB,GAAE,KAAK,eAAe,mBAAiB,KAAK,WAAW,kBAAiB,KAAK,eAAe,aAAW,KAAK,WAAW,YAAW,KAAK,eAAe,YAAU,KAAK,WAAW,WAAU,KAAK,eAAe,aAAW,KAAK,WAAW,YAAW,KAAK,eAAe,eAAa,KAAK,WAAW,cAAa,KAAK,eAAe,oBAAkB,KAAK,WAAW,aAAW,KAAS,KAAK,WAAW,cAAtB,MAAiC,KAAK,eAAe,iBAAe,KAAK,WAAW,UAAQ,GAAE,KAAK,eAAe,eAAatC,EAAE,cAAa,KAAK,eAAe,WAAa,KAAK,WAAW,mBAApB,GAAmC,KAAK,eAAe,mBAAiBA,EAAE,oBAAkBE,GAAEP,CAAC,GAAE,KAAK,eAAe,mBAAiBK,EAAE,kBAAiB,KAAK,eAAe,YAAU,KAAK,WAAW,WAAU,KAAK,eAAe,YAAU,KAAK,WAAW,WAAU,KAAK,eAAe,iBAAe,KAAK,eAAa,IAAE,GAAE,KAAK,eAAe,2BAAyB,CAAC,CAAC,KAAK,WAAW,uBAAsB,KAAK;AAAA,EAAc;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK,WAAW,MAAM,CAAC,KAAG8B,MAAS,KAAK,WAAW,kBAAtB,SAAuC,KAAK,WAAW,kBAAkB,CAAC,KAAG,KAAGA;AAAAA,EAAC;AAAA,EAAC,cAAcnC,GAAEK,GAAE;AAAC,IAAAL,EAAE,YAAU,KAAK,WAAW,WAAU,MAAM,cAAcA,GAAEK,CAAC;AAAA,EAAC;AAAA,EAAC,gBAAgB,EAAC,YAAWL,GAAE,oBAAmBG,EAAC,GAAEF,GAAE,GAAEgB,GAAElB,GAAE;AAAC,QAAG,CAACE,EAAE,QAAQ,cAAc;AAAO,UAAMG,IAAEJ,EAAE,IAAI,MAAM;AAAE,QAAIE,IAAE,KAAK,WAAW;AAAM,QAAG,KAAK,WAAW,QAAO;AAAC,YAAMC,IAAEH,EAAE,IAAI,sBAAsB,EAAE,KAAK,CAAC;AAAE,aAAO,MAAMG,CAAC,IAAED,KAAG,KAAK,WAAW,OAAO,SAAS,CAAC,IAAEA,KAAGG,GAAE,KAAK,WAAW,OAAO,OAAO,CAAC,IAAEF,IAAE,KAAK,WAAW,OAAO,OAAO,CAAC,GAAE,KAAK,WAAW,OAAO,QAAQ,CAAC,GAAE,KAAK,WAAW,OAAO,QAAQ,CAAC,CAAC;AAAA,IAAC,MAAM,CAAAC,MAAIF,KAAGE,EAAE,KAAK,CAAC;AAAG,UAAMgB,IAAE,EAAE,CAAC,GAAEU,IAAE,EAAE,CAAC,GAAER,KAAGpB,IAAE,IAAE,KAAGC;AAAE,QAAIO,IAAE,OAAO,WAAU,IAAE;AAAE,UAAM,IAAEV,EAAE,IAAI,UAAU,EAAE,MAAK2B,IAAEiB,GAAE,KAAK,YAAW5C,CAAC,IAAE,EAAE,SAAO,IAAE,EAAE,SAAO;AAAE,aAAQ+B,IAAE,GAAEA,IAAEJ,GAAEI,KAAG,GAAE;AAAC,YAAM/B,IAAE,EAAE+B,CAAC,GAAE5B,IAAE,EAAE4B,IAAE,CAAC,GAAE9B,KAAG8B,IAAE,KAAG,EAAE,QAAOzB,IAAEc,IAAEpB,GAAEiB,IAAEa,IAAE3B,GAAEJ,IAAE,EAAEE,CAAC,IAAED,GAAEI,IAAE,EAAEH,IAAE,CAAC,IAAEE,GAAED,IAAEG,IAAGN,IAAEO,IAAEF,IAAEa,MAAIlB,IAAEA,IAAEK,IAAEA,IAAG,GAAE,CAAC,GAAEkB,IAAEvB,IAAEG,IAAEI,GAAEqB,IAAEvB,IAAEF,IAAEe,GAAEQ,IAAEH,IAAEA,IAAEK,IAAEA;AAAE,MAAAF,IAAEf,MAAIA,IAAEe,GAAE,IAAEM,IAAE;AAAA,IAAE;AAAC,IAAArB,IAAEY,IAAEA,KAAGL,EAAElB,EAAE,UAASA,EAAE,QAAO,CAAC;AAAA,EAAC;AAAA,EAAC,UAAUI,GAAEF,GAAEe,GAAEK,GAAEM,GAAEI,GAAE;AAAC,UAAK,EAAC,SAAQN,GAAE,QAAOD,GAAE,UAASU,GAAE,QAAOe,EAAC,IAAEjC;AAAE,QAAG,CAACS,EAAE,iBAAe,CAACtB,EAAE,WAAS,CAACqB,EAAE;AAAO,QAAG,CAACZ,GAAEX,CAAC,EAAE,QAAO,KAAKD,GAAE,UAAU,yDAAyD,EAAE,MAAM,gDAAgD;AAAE,UAAMiC,IAAE9B,EAAE,YAAWI,IAAE0B,EAAE,IAAI,UAAU,EAAE;AAAK,QAAIP,IAAE,KAAK,WAAW;AAAM,QAAG,KAAK,WAAW,QAAO;AAAC,YAAM1B,IAAEiC,EAAE,IAAI,sBAAsB,EAAE,KAAK,CAAC;AAAE,aAAO,MAAMjC,CAAC,MAAI0B,KAAGrB,GAAE,KAAK,WAAW,OAAO,OAAO,CAAC,IAAEL,IAAE,KAAK,WAAW,OAAO,OAAO,CAAC,GAAE,KAAK,WAAW,OAAO,QAAQ,CAAC,GAAE,KAAK,WAAW,OAAO,QAAQ,CAAC,CAAC;AAAA,IAAE,MAAM,CAAAiC,EAAE,IAAI,MAAM,MAAIP,KAAGO,EAAE,IAAI,MAAM,EAAE,KAAK,CAAC;AAAG,UAAMJ,IAAEuB;AAAG9C,IAAAA,GAAEuB,GAAEb,EAAE,KAAK;AAAE,UAAM0B,IAAEhB,IAAEF,EAAE,aAAW,IAAE,IAAEA,EAAE;AAAWP,IAAAA,GAAEoC,GAAG,CAAC,GAAExB,EAAE,CAAC,IAAEa,GAAEb,EAAE,CAAC,IAAEa,GAAE,CAAC,GAAEzB,GAAEoC,GAAG,CAAC,GAAExB,EAAE,CAAC,IAAEa,GAAEb,EAAE,CAAC,IAAEa,GAAE,CAAC,GAAEzB,GAAEoC,GAAG,CAAC,GAAExB,EAAE,CAAC,IAAEa,GAAEb,EAAE,CAAC,IAAEa,GAAE,CAAC,GAAEzB,GAAEoC,GAAG,CAAC,GAAExB,EAAE,CAAC,IAAEa,GAAEb,EAAE,CAAC,IAAEa,GAAE,CAAC;AAAE,aAAQ1C,IAAE,GAAEA,IAAE,GAAEA,IAAI,KAAG,CAACwB,EAAE,0BAA0B6B,GAAGrD,CAAC,GAAEsD,GAAGtD,CAAC,CAAC,EAAE;AAAOsC,IAAAA,GAAEd,EAAE,KAAI8B,GAAG,CAAC,GAAEA,GAAG,CAAC,GAAEC,EAAE,GAAEjB,GAAEd,EAAE,KAAI8B,GAAG,CAAC,GAAEA,GAAG,CAAC,GAAEE,EAAE,GAAElB,GAAEd,EAAE,KAAI8B,GAAG,CAAC,GAAEA,GAAG,CAAC,GAAEG,EAAE,GAAEnB,GAAEd,EAAE,KAAI8B,GAAG,CAAC,GAAEA,GAAG,CAAC,GAAEI,EAAE;AAAE,QAAI5C,IAAE,OAAO,WAAUH,IAAE;AAAE,UAAMyB,IAAEQ,GAAE,KAAK,YAAWX,CAAC,IAAE1B,EAAE,SAAO,IAAEA,EAAE,SAAO;AAAE,aAAQP,IAAE,GAAEA,IAAEoC,GAAEpC,KAAG,GAAE;AAAC,MAAA2D,EAAE,CAAC,IAAEpD,EAAEP,CAAC,IAAEC,EAAE,EAAE,GAAE0D,EAAE,CAAC,IAAEpD,EAAEP,IAAE,CAAC,IAAEC,EAAE,EAAE,GAAE0D,EAAE,CAAC,IAAEpD,EAAEP,IAAE,CAAC,IAAEC,EAAE,EAAE;AAAE,YAAMI,KAAGL,IAAE,KAAGO,EAAE;AAAO,UAAGqD,EAAE,CAAC,IAAErD,EAAEF,CAAC,IAAEJ,EAAE,EAAE,GAAE2D,EAAE,CAAC,IAAErD,EAAEF,IAAE,CAAC,IAAEJ,EAAE,EAAE,GAAE2D,EAAE,CAAC,IAAErD,EAAEF,IAAE,CAAC,IAAEJ,EAAE,EAAE,GAAEY,EAAE0C,IAAGI,CAAC,IAAE,KAAG9C,EAAE0C,IAAGK,CAAC,IAAE,KAAG/C,EAAE2C,IAAGG,CAAC,IAAE,KAAG9C,EAAE2C,IAAGI,CAAC,IAAE,KAAG/C,EAAE4C,IAAGE,CAAC,IAAE,KAAG9C,EAAE4C,IAAGG,CAAC,IAAE,KAAG/C,EAAE6C,IAAGC,CAAC,IAAE,KAAG9C,EAAE6C,IAAGE,CAAC,IAAE,EAAE;AAAS,YAAMzD,IAAEqB,EAAE,sBAAsBmC,GAAEE,EAAE,GAAEvD,IAAEkB,EAAE,sBAAsBoC,GAAEE,EAAE;AAAE,UAAS3D,KAAN,QAAeG,KAAN,KAAQ;AAAS,UAAGH,EAAE,CAAC,IAAE,KAAGG,EAAE,CAAC,IAAE,GAAE;AAACP,QAAAA,GAAE,GAAE4D,GAAEC,CAAC;AAAE,cAAM5D,IAAEwB,EAAE,SAAQnB,IAAE,CAACQ,EAAEb,EAAE,CAAC,GAAE2D,CAAC,IAAEvD,GAAE,GAAEW,GAAEf,EAAE,CAAC,CAAC,CAAC;AAAE,YAAGE,GAAE,GAAE,GAAEG,CAAC,GAAEe,GAAEuC,GAAEA,GAAE,CAAC,GAAE,CAACnC,EAAE,sBAAsBmC,GAAExD,CAAC,EAAE;AAAA,MAAQ,WAASA,EAAE,CAAC,IAAE,KAAGG,EAAE,CAAC,IAAE,GAAE;AAACP,QAAAA,GAAE,GAAE6D,GAAED,CAAC;AAAE,cAAM3D,IAAEwB,EAAE,SAAQnB,IAAE,CAACQ,EAAEb,EAAE,CAAC,GAAE4D,CAAC,IAAExD,GAAE,GAAEW,GAAEf,EAAE,CAAC,CAAC,CAAC;AAAE,YAAGE,GAAE,GAAE,GAAEG,CAAC,GAAEe,GAAEwC,GAAEA,GAAE,CAAC,GAAE,CAACpC,EAAE,sBAAsBoC,GAAEtD,CAAC,EAAE;AAAA,MAAQ,WAASH,EAAE,CAAC,IAAE,KAAGG,EAAE,CAAC,IAAE,EAAE;AAAS,MAAAH,EAAE,CAAC,IAAE,GAAEG,EAAE,CAAC,IAAE;AAAE,YAAMW,IAAER,GAAEU,GAAEhB,GAAEG,GAAEyD,EAAE,GAAElC,CAAC;AAAE,MAAAZ,IAAEH,MAAIA,IAAEG,GAAEa,GAAEkC,IAAGL,CAAC,GAAE7B,GAAEmC,IAAGL,CAAC,GAAEjD,IAAEX,IAAE;AAAA,IAAE;AAAC,QAAGc,IAAE4B,IAAEA,GAAE;AAAC,UAAI1C,IAAE,OAAO;AAAU,UAAGQ,GAAEW,GAAE6C,IAAGC,IAAGF,EAAE,GAAE5C,GAAEe,GAAEe,GAAEiB,EAAE,GAAE1B,EAAC,GAAE;AAACzC,QAAAA,GAAEyC,IAAEA,IAAEN,CAAC;AAAE,cAAM7B,IAAEiB,GAAEkB,EAAC;AAAEtC,QAAAA,GAAEsC,IAAEA,IAAE,IAAEnC,CAAC,GAAEL,IAAEK,IAAEK,GAAEwB,GAAEe,CAAC;AAAA,MAAC;AAAC,MAAAlB,EAAE/B,GAAEwC,IAAE7B,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,IAAI,eAAc;AAAC,WAAO,KAAK,WAAW,mBAAiB;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,WAAO,IAAIwD,GAAEjD,GAAE,KAAK,UAAU,GAAE,KAAK,UAAU;AAAA,EAAC;AAAA,EAAC,iBAAiBlB,GAAE;AAAC,WAAO,IAAIoE,GAAEpE,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmBA,GAAE;AAAC,IAAUA,EAAE,SAAZ,YAAmBA,EAAE,aAAW,IAASA,EAAE,oBAAR,SAA2BA,EAAE,cAAYA,EAAE,iBAAiB,QAAMA,EAAE;AAAA,EAAM;AAAA,EAAC,OAAOA,GAAE;AAAC,UAAK,EAAC,cAAaK,EAAC,IAAE,KAAK;AAAW,WAAM,CAAC,CAACA,MAAI,KAAK,cAAc,EAAC,aAAYJ,GAAED,EAAE,IAAI,EAAC,GAAE,EAAE,GAAMA,EAAE,OAAN;AAAA,EAAS;AAAC;AAAC,MAAMoE,WAAUzD,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,kBAAgB;AAAA,EAAI;AAAA,EAAC,UAAS;AAAC,UAAM,QAAO,GAAG,KAAK,kBAAkB,QAAQ,KAAK,eAAe,GAAE,KAAK,kBAAgB;AAAA,EAAI;AAAA,EAAC,UAAUX,GAAE;AAAC,UAAMK,IAAE,KAAK,UAAU,WAAW;AAAe,WAAO,KAAK,oBAAkBA,MAAI,KAAK,UAAU,cAAc,EAAC,gBAAe,KAAK,iBAAiB,KAAKA,GAAE,KAAK,eAAe,EAAC,CAAC,GAAE,KAAK,kBAAgBA,IAAG,KAAK,aAAa2C,IAAEhD,CAAC;AAAA,EAAC;AAAC;AAAC,MAAM+C,WAAUV,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,QAAM,GAAE,KAAK,QAAMN,IAAE,KAAK,OAAK,SAAQ,KAAK,MAAI,GAAE,KAAK,aAAW,GAAE,KAAK,aAAW,IAAG,KAAK,mBAAiB,IAAG,KAAK,iBAAe,MAAK,KAAK,0BAAwB,IAAG,KAAK,mBAAiB,MAAK,KAAK,cAAY,GAAE,KAAK,gBAAc,IAAG,KAAK,eAAa,IAAG,KAAK,WAAS,IAAG,KAAK,UAAQ,GAAE,KAAK,aAAW,GAAE,KAAK,YAAU,IAAG,KAAK,cAAY,GAAE,KAAK,YAAU,GAAE,KAAK,iBAAe,GAAE,KAAK,cAAY,GAAE,KAAK,YAAU,GAAE,KAAK,UAAQ,OAAI,KAAK,aAAW,GAAE,KAAK,cAAY,OAAI,KAAK,mBAAiB;AAAA,EAAC;AAAA,EAAC,IAAI,cAAa;AAAC,WAAO,KAAK,MAAM,CAAC,IAAE,KAAG,KAAK,gBAAoB,KAAK,kBAAX,SAA4B,KAAK,kBAAkB,CAAC,KAAG,KAAG;AAAA,EAAC;AAAA,EAAC,IAAI,eAAc;AAAC,WAAW,KAAK,cAAT;AAAA,EAAkB;AAAC;AAAC,MAAMoC,GAAC;AAAA,EAAC,YAAYnE,GAAEK,GAAE;AAAC,SAAK,SAAOL,GAAE,KAAK,cAAYK;AAAE,UAAM,IAAEA,EAAE,iBAAe,IAAE;AAAE,YAAO,KAAK,YAAY,MAAI;AAAA,MAAE,KAAI;AAAA,MAAQ,KAAI;AAAQ,aAAK,sBAAoB;AAAE;AAAA,MAAM,KAAI;AAAQ,aAAK,sBAAoBkC,KAAE;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,UAAUvC,GAAE;AAAC,WAAO4C,GAAE,KAAK,aAAY5C,CAAC;AAAA,EAAC;AAAA,EAAC,SAASA,GAAE;AAAC,WAAO,KAAK,OAAO,aAAaA,CAAC;AAAA,EAAC;AAAA,EAAC,aAAaA,GAAE;AAAC,UAAU,IAAEA,EAAE,IAAI,UAAU,EAAE,QAAQ,SAAO,IAAE,GAAEC,IAAE,KAAK,UAAUD,CAAC;AAAE,QAAIM,IAAEL,IAAE,IAAE;AAAI,WAAOK,OAAKL,IAAE,IAAE,IAAE,MAAIA,IAAE,IAAE,OAAK,IAAE,KAAK,sBAAoB,IAAGK,KAAG,GAAE,KAAK,YAAY,cAAYA,IAAE,IAAE,KAAGA,IAAE,KAAIA;AAAA,EAAC;AAAA,EAAC,MAAMN,GAAEK,GAAE,GAAEJ,GAAEK,GAAEP,GAAE;AAAC,UAAMK,IAAE,KAAK,QAAOF,IAAE,EAAE,IAAI,UAAU,GAAEkB,IAAElB,EAAE,SAAQoB,IAAEpB,EAAE,KAAK,SAAO,GAAEmB,IAAE,EAAE,IAAI,iBAAiB,GAAG;AAAK,IAAAD,KAAGA,EAAE,WAAS,KAAGE,IAAE,MAAI,QAAQ,KAAK,6CAA6C;AAAE,UAAMS,IAAE3B,EAAE,OAAO,IAAI,sBAAsB;AAAE,QAAIqB,IAAE,GAAEhB,IAAE;AAAK,QAAGsB,GAAE;AAAC,YAAM/B,IAAE,EAAE,IAAI,sBAAsB;AAAE,MAAIA,EAAE,KAAK,WAAX,IAAkByB,IAAEzB,EAAE,KAAK,CAAC,IAAES,IAAET,EAAE;AAAA,IAAI,MAAM,CAAAyB,IAAE,EAAE,IAAI,MAAM,GAAG,KAAK,CAAC,KAAG;AAAE,QAAIN,IAAE,CAAC,GAAE,GAAE,GAAE,CAAC,GAAEe,IAAE,GAAE1B,IAAE;AAAK,UAAM8B,IAAElC,EAAE,OAAO,IAAI,uBAAuB;AAAE,QAAGkC,GAAE;AAAC,YAAMtC,IAAE,EAAE,IAAI,uBAAuB;AAAE,MAAIA,EAAE,KAAK,WAAX,IAAkBkC,IAAElC,EAAE,KAAK,CAAC,IAAEQ,IAAER,EAAE;AAAA,IAAI,MAAM,CAAAmB,IAAE,EAAE,IAAI,OAAO,GAAG,QAAMA;AAAE,UAAM8B,IAAE,EAAE,IAAI,YAAY,GAAG,MAAKpC,IAAEoC,KAAG7C,EAAE,OAAO,IAAI,YAAY,GAAEW,IAAEX,EAAE,OAAO,IAAI,yBAAyB;AAAE,QAAI6B,IAAE,GAAE1B,IAAE;AAAK,QAAGQ,GAAE;AAAC,YAAMf,IAAE,EAAE,IAAI,yBAAyB;AAAE,MAAIA,EAAE,KAAK,WAAX,IAAkBiC,IAAEjC,EAAE,KAAK,CAAC,IAAEO,IAAEP,EAAE;AAAA,IAAI;AAAC,UAAM0B,IAAE,IAAI,aAAapB,EAAE,MAAM,GAAEuB,IAAEL,GAAElB,EAAE,MAAM,GAAEoC,IAAE,IAAI,WAAWpC,EAAE,MAAM,GAAEK,IAAEP,EAAE,SAAO;AAAE,QAAIgC,IAAErC,IAAEY;AAAE,UAAMC,KAAEwB;AAAE,QAAIC,IAAE;AAAE,UAAME,KAAElB,IAAE,CAACrB,GAAEK,GAAEF,OAAIkC,IAAEhB,EAAElB,EAAC,IAAE,CAACH,GAAEK,GAAEF,OAAIkC,KAAG3B,GAAEV,GAAEK,CAAC,GAAEa,KAAEQ,EAAE,oBAAkBG,EAAE,mBAAkBmB,KAAE,IAAE9B,IAAEU,KAAEd,GAAC,GAAGqB,IAAE,CAACnC,GAAEK,GAAEF,IAAEG,GAAEW,IAAElB,IAAEK,IAAEF,OAAI;AAAC,MAAAwB,EAAEU,GAAG,IAAE/B,EAAE,CAAC,GAAEqB,EAAEU,GAAG,IAAE/B,EAAE,CAAC,GAAEqB,EAAEU,GAAG,IAAE/B,EAAE,CAAC,GAAEoC,GAAEzC,GAAEK,GAAEwB,GAAEO,IAAElB,EAAC,GAAEkB,KAAGY,IAAEP,GAAEtC,IAAEE,GAAEwB,GAAEO,IAAElB,EAAC,GAAEkB,KAAGY,IAAEtB,EAAEU,GAAG,IAAElC;AAAE,UAAIkB,KAAEgB,IAAElB;AAAE,UAAGW,EAAET,IAAG,IAAEH,IAAEY,EAAET,IAAG,IAAErB,IAAEqC,IAAE,KAAK,KAAKhB,KAAEF,EAAC,GAAEoB,EAAE,CAAAZ,EAAEU,CAAC,IAAE5B,IAAIJ,EAAC,KAAG8B;AAAA,WAAM;AAAC,cAAMlC,IAAE,KAAK,IAAI,IAAEI,IAAEe,EAAE,SAAO,CAAC,GAAEd,KAAE,IAAE+B;AAAE,QAAAM,EAAErC,EAAC,IAAE,MAAIc,EAAEnB,CAAC,GAAE0C,EAAErC,KAAE,CAAC,IAAE,MAAIc,EAAEnB,IAAE,CAAC,GAAE0C,EAAErC,KAAE,CAAC,IAAE,MAAIc,EAAEnB,IAAE,CAAC,GAAE0C,EAAErC,KAAE,CAAC,IAAE,MAAIc,EAAEnB,IAAE,CAAC;AAAA,MAAC;AAAC,UAAGoC,KAAIV,EAAEU,GAAG,IAAE3B,IAAIL,EAAC,KAAGqB,GAAEV,MAAIW,EAAEU,GAAG,IAAE7B,IAAIH,EAAC,KAAG6B,IAAGL,IAAE;AAAC,YAAI5B,IAAE,IAAEoC;AAAE,QAAAnC,KAAGyC,EAAE1C,GAAG,IAAEC,EAAE,CAAC,GAAEyC,EAAE1C,GAAG,IAAEC,EAAE,CAAC,GAAEyC,EAAE1C,GAAG,IAAEC,EAAE,CAAC,GAAEyC,EAAE1C,GAAG,IAAEC,EAAE,CAAC,MAAIyC,EAAE1C,GAAG,IAAE,GAAE0C,EAAE1C,GAAG,IAAE,GAAE0C,EAAE1C,GAAG,IAAE,GAAE0C,EAAE1C,GAAG,IAAE,IAAGoC,IAAE,KAAK,KAAK,OAAIpC,CAAC;AAAA,MAAC;AAAC,MAAAa,MAAIO,KAAEgB,IAAElB,IAAEW,EAAET,IAAG,IAAEd,EAAE,CAAC,GAAEuB,EAAET,IAAG,IAAEd,EAAE,CAAC,GAAEuB,EAAET,IAAG,IAAEd,EAAE,CAAC,GAAEuB,EAAET,IAAG,IAAEd,EAAE,CAAC,GAAE8B,IAAE,KAAK,KAAKhB,KAAEF,EAAC;AAAA,IAAE;AAAE,IAAAkB,KAAGzB,GAAEM,GAAEoD,GAAGnE,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,CAAC,GAAEW,KAAGc,GAAE2C,GAAGrB,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,CAAC,GAAEjD,KAAGgB,EAAEqD,GAAGA,GAAGrE,CAAC;AAAE,UAAM6C,KAAE,KAAK,UAAU,CAAC;AAAE,QAAGA,IAAE;AAAC,YAAMxC,IAAEH,EAAE,KAAK,SAAO;AAAEe,MAAAA,GAAEsD,GAAGrE,EAAE,KAAKG,CAAC,GAAEH,EAAE,KAAKG,IAAE,CAAC,GAAEH,EAAE,KAAKG,IAAE,CAAC,CAAC,GAAEL,KAAGgB,EAAEuD,GAAGA,GAAGvE,CAAC;AAAA,IAAC,MAAMiB,CAAAA,GAAEuD,GAAGtE,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,CAAC,GAAEF,KAAGgB,EAAEwD,GAAGA,GAAGxE,CAAC,GAAEmC,EAAEkC,GAAGA,GAAGG,GAAGF,GAAG,GAAE,IAAG,GAAE,CAAC,GAAEnC,EAAEkC,GAAGA,GAAGG,GAAGF,GAAG,GAAE,GAAE,GAAE,CAAC,GAAExC,GAAEyC,GAAGF,CAAE,GAAEvC,GAAEuC,GAAGG,CAAE,GAAE3D,KAAGc,GAAE2C,GAAGrB,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,CAAC;AAAE,UAAMmB,KAAEvB,KAAE,IAAE,GAAEE,KAAEF,KAAEvB,IAAEA,IAAE;AAAE,aAAQZ,IAAE0D,IAAE1D,IAAEqC,IAAErC,KAAI;AAAC,YAAML,KAAGK,IAAE,KAAGY,IAAE;AAAEL,MAAAA,GAAEuD,GAAGtE,EAAE,KAAKG,CAAC,GAAEH,EAAE,KAAKG,IAAE,CAAC,GAAEH,EAAE,KAAKG,IAAE,CAAC,CAAC,GAAEL,KAAGgB,EAAEwD,GAAGA,GAAGxE,CAAC,GAAEuC,GAAEgC,GAAGF,GAAG3D,CAAC,GAAEyB,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,IAAG5D,GAAE2B,CAAC,GAAEF,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,GAAE5D,GAAE2B,CAAC;AAAE,YAAMlC,KAAE,KAAK;AAAoB,eAAQH,IAAE,GAAEA,IAAEG,IAAE,EAAEH,GAAE;AAAC,cAAMK,MAAGL,IAAE,MAAIG,KAAE;AAAG,QAAAgC,EAAEoC,GAAGF,GAAGG,GAAGF,GAAGjE,IAAE,IAAGK,GAAE2B,CAAC,GAAEF,EAAEoC,GAAGF,GAAGG,GAAGF,GAAGjE,IAAE,GAAEK,GAAE2B,CAAC;AAAA,MAAC;AAAC,UAAGF,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,IAAG5D,GAAE2B,CAAC,GAAEF,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,GAAE5D,GAAE2B,CAAC,GAAEP,GAAEyC,GAAGF,CAAE,GAAEvC,GAAEuC,GAAGG,CAAE,GAAE3D,GAAE;AAAC,cAAMb,KAAGU,IAAE,KAAGY,IAAE;AAAEK,QAAAA,GAAE2C,GAAGrB,EAAEjD,CAAC,GAAEiD,EAAEjD,IAAE,CAAC,GAAEiD,EAAEjD,IAAE,CAAC,GAAEiD,EAAEjD,IAAE,CAAC,CAAC;AAAA,MAAC;AAAA,IAAC;AAAC,WAAA6C,MAAG5B,GAAEuD,GAAGtE,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,GAAEA,EAAE,KAAK,CAAC,CAAC,GAAEF,KAAGgB,EAAEwD,GAAGA,GAAGxE,CAAC,GAAEqC,IAAEE,GAAEgC,GAAGF,GAAGtB,EAAC,GAAEZ,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,IAAGF,IAAE/B,CAAC,GAAEF,EAAEoC,GAAGF,GAAGG,GAAGF,GAAG,GAAE,GAAEF,IAAE/B,CAAC,MAAIA,IAAEE,GAAEgC,GAAGF,GAAGtB,EAAC,GAAEZ,EAAEoC,GAAGF,GAAGA,GAAGC,GAAG,GAAE,IAAGvB,IAAEV,CAAC,GAAEF,EAAEoC,GAAGF,GAAGA,GAAGC,GAAG,GAAE,GAAEvB,IAAEV,CAAC,IAAGS,GAAEpB,GAAEd,KAAED,GAAEe,GAAEd,IAAED,CAAC,GAASyB,IAAEU,GAAEpB,GAAEU,IAAEzB,GAAEe,GAAEU,GAAEzB,CAAC,GAAE,KAAK,YAAY,aAAW,KAAK,sBAAsBL,GAAEM,IAAEwB,GAAEzB,CAAC,GAAE;AAAA,EAAI;AAAA,EAAC,sBAAsBX,GAAEK,GAAE,GAAEJ,GAAE;AAAC,UAAMK,IAAE,IAAI,aAAaN,EAAE,QAAO,IAAE,aAAa,iBAAiB,GAAEiB,IAAE,IAAI,aAAajB,EAAE,QAAOK,IAAE,aAAa,mBAAkB,IAAEA,CAAC;AAAE,QAAIN,IAAE;AAAE,UAAMK,IAAE,CAAAJ,MAAGD,IAAE+C,GAAE7B,GAAEjB,GAAEM,GAAEP,GAAEE,CAAC;AAAE,aAAQC,IAAE,GAAEA,IAAEe,EAAE,SAAO,GAAEf,KAAG,IAAED,EAAE,CAAAG,EAAEF,CAAC,GAAEE,EAAEF,IAAE,IAAED,CAAC,GAAEG,EAAEF,IAAE,IAAED,CAAC,GAAEG,EAAEF,IAAE,IAAED,CAAC,GAAEG,EAAEF,IAAE,IAAED,CAAC,GAAEG,EAAEF,IAAE,IAAED,CAAC;AAAA,EAAC;AAAC;AAAC,SAAS6C,GAAE9C,GAAE,GAAEG,GAAEF,GAAE,GAAE;AAAC,WAAQgB,IAAE,GAAEA,IAAE,GAAEA,IAAI,CAAAd,EAAEF,GAAG,IAAED,EAAE,GAAG;AAAE,SAAOC;AAAC;AAAC,SAAS2C,GAAE5C,GAAE,GAAE;AAAC,SAAIA,EAAE,WAAyB,EAAE,IAAI,UAAU,EAAE,QAAQ,SAAO,IAA3C;AAA4C;AAAC,SAAS2C,GAAE3C,GAAE;AAAC,SAAWA,EAAE,WAAN,KAAcA,EAAE,uBAAmCA,EAAE,cAAhB,eAA2BA,EAAE;AAAU;AAAC,MAAM2D,IAAEtC,EAAC,GAAGuC,IAAEvC,EAAC,GAAG,IAAEA,EAAC,GAAGmB,KAAEnB,EAAC,GAAG+B,KAAG/B,KAAIwC,KAAG1D,GAAC,GAAG2D,KAAG3D,GAAC,GAAG6D,KAAG3C,EAAC,GAAG4C,KAAG5C,EAAC,GAAG0C,KAAG7B,GAAC,GAAGgC,KAAGhC,GAAC,GAAGqC,IAAGlD,EAAC,GAAGgD,IAAGhD,EAAC,GAAGmD,IAAGnD,EAAC,GAAGiD,IAAG7C,GAAC,GAAG4B,KAAG,CAAClD,GAAC,GAAGA,GAAC,GAAGA,GAAC,GAAGA,GAAC,CAAE,GAAEmD,KAAG,CAACjC,EAAC,GAAGA,EAAC,GAAGA,EAAC,GAAGA,EAAC,CAAE,GAAEkC,KAAGN,GAAC,GAAGO,KAAGP,GAAC,GAAGQ,KAAGR,GAAC,GAAGS,KAAGT,GAAC;SCAjmW,MAAO;AAAA,EAAC,YAAY9C,GAAE;AAAC,SAAK,YAAUA,GAAE,KAAK,gBAAc,UAAQH,GAAC,GAAG,KAAK,WAAS,oBAAI,OAAI,KAAK,WAAS,oBAAI,OAAI,KAAK,YAAU;AAAA,EAAG;AAAA,EAAC,UAAUA,GAAE;AAAC,UAAMC,IAAE,KAAK,SAAS,IAAI,KAAK,aAAa;AAAE,QAASA,KAAN,MAAQ;AAAqI,YAAMA,IAAEgB,GAAEjB,EAAE,CAAC,IAAE,KAAK,OAAM,IAAG,KAAGA,EAAE,CAAC,IAAE,KAAK,OAAM,IAAG,KAAGA,EAAE,CAAC,IAAE,KAAK,OAAM,IAAG,KAAG,KAAK,aAAa;AAAE,aAAO,KAAK,SAAS,IAAI,KAAK,eAAcC,CAAC,GAAEA;AAAA,IAAC;AAAC,UAAMG,IAAE,KAAK,WAAU,IAAE,KAAK,MAAMJ,EAAE,CAAC,IAAEI,CAAC,GAAEC,IAAE,KAAK,MAAML,EAAE,CAAC,IAAEI,CAAC,GAAEL,IAAE,KAAK,MAAMC,EAAE,CAAC,IAAEI,CAAC,GAAEgB,IAAE,GAAG,CAAC,IAAIf,CAAC,IAAIN,CAAC;AAAG,QAAIuB,IAAE,KAAK,SAAS,IAAIF,CAAC;AAAE,UAAMW,IAAE,MAAG3B;AAAE,QAAGD,GAAEwB,GAAE3B,GAAEC,EAAE,IAAI,GAAE0B,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,IAAEI,KAAGJ,EAAE,CAAC,IAAEI,KAAGJ,EAAE,CAAC,IAAEI,GAAE;AAAC,UAAGT,GAAE;AAAC,cAAMrB,IAAE,KAAK,IAAI,GAAG0B,CAAC;AAA4E,YAA1ExB,GAAEwB,GAAE3B,GAAEsB,EAAE,IAAI,GAAEK,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,CAAC,GAAK,KAAK,IAAI,GAAGA,CAAC,IAAE1B,EAAE,QAAOqB;AAAA,MAAC;AAAC,aAAOrB;AAAA,IAAC;AAAC,WAAOqB,MAAIA,IAAEL,GAAE,IAAEb,GAAEC,IAAED,GAAEL,IAAEK,GAAEgB,CAAC,GAAE,KAAK,SAAS,IAAIA,GAAEE,CAAC,IAAGA;AAAA,EAAC;AAAA,EAAC,eAAetB,GAAEG,IAAEC,GAAE,GAAE,GAAE,GAAE,CAAC,GAAE;AAAC,UAAMH,IAAE,OAAO,MAAKgB,IAAEhB,EAAE,OAAM6B,IAAE3B,EAAE,SAAQ;AAAG,QAAG,CAAC,KAAK,SAAS,IAAI2B,CAAC,GAAE;AAAC,WAAK,YAAU,IAAIC,GAAE,EAAC,OAAM,GAAE,OAAM5B,EAAC,GAAE,EAAE;AAAE,YAAMH,IAAE,IAAIsB,GAAEL,GAAE,EAAC,UAAS,GAAE,CAAC,GAAEhB,IAAE,IAAImB,GAAE,EAAC,YAAW,GAAE,CAAC;AAAE,MAAApB,EAAE,IAAIC,CAAC,GAAE,KAAK,SAAS,IAAI6B,GAAE7B,CAAC;AAAA,IAAC;AAAC,UAAMoB,IAAE,KAAK,SAAS,IAAIS,CAAC,GAAEH,IAAE,CAAC,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,GAAE,CAAC,GAAEzB,IAAEyB,EAAE,QAAOH,IAAE,IAAI,MAAM,IAAEtB,CAAC,GAAE,IAAE,IAAI,SAAMM,IAAE,MAAG,KAAK;AAAU,aAAQJ,IAAE,GAAEA,IAAEF,GAAEE,IAAI,CAAAoB,EAAE,IAAEpB,CAAC,IAAEJ,EAAE,CAAC,KAAG,IAAE2B,EAAEvB,CAAC,IAAEI,IAAE,CAACA,IAAGgB,EAAE,IAAEpB,IAAE,CAAC,IAAEJ,EAAE,CAAC,KAAG,IAAE2B,EAAEvB,CAAC,IAAEI,IAAE,CAACA,IAAGgB,EAAE,IAAEpB,IAAE,CAAC,IAAEJ,EAAE,CAAC,KAAG,IAAE2B,EAAEvB,CAAC,IAAEI,IAAE,CAACA,IAAGJ,IAAE,KAAG,EAAE,KAAKA,IAAE,GAAEA,CAAC;AAAEE,IAAAA,GAAEkB,GAAE,KAAK,WAAU,GAAEA,GAAEvB,EAAE,wBAAuB,GAAEC,CAAC;AAAE,UAAMuB,IAAE,IAAI1B,GAAE,KAAK,WAAU,CAAC,CAAC,YAAW,IAAIM,GAAEmB,GAAE,GAAE,GAAE,EAAE,CAAC,CAAC,GAAE,MAAK,CAAC;AAAE,IAAAH,EAAE,YAAYI,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,OAAM;AAAA,EAAC;AAAC;AAAC,MAAME,IAAE1B,EAAC;ACArqE,MAAMA,GAAC;AAAA,EAAC,YAAY,GAAEA,IAAE,MAAKD,IAAE,GAAE;AAAC,SAAK,QAAM,GAAE,KAAK,mBAAiBC,GAAE,KAAK,SAAOD;AAAA,EAAC;AAAC;AAAC,SAASA,GAAEK,GAAE;AAAC,SAAM,WAAUA;AAAC;AAAC,SAASY,GAAEhB,GAAEgB,GAAElB,IAAE,UAAS;AAAC,MAAGM,GAAEY,CAAC,EAAE,QAAOhB,EAAE,aAAagB,EAAE,GAAEA,EAAE,GAAEA,EAAE,KAAG,GAAEA,EAAE,kBAAiBlB,CAAC;AAAE,MAAGC,GAAEiB,CAAC,GAAE;AAAC,QAAIZ,IAAEY,EAAE;AAAO,WAAOhB,EAAE,aAAagB,EAAE,MAAMZ,GAAG,GAAEY,EAAE,MAAMZ,GAAG,GAAEY,EAAE,MAAMZ,CAAC,KAAG,GAAEY,EAAE,oBAAkBhB,EAAE,kBAAiBF,CAAC;AAAA,EAAC;AAAC,SAAOE,EAAE,aAAagB,EAAE,CAAC,GAAEA,EAAE,CAAC,GAAEA,EAAE,CAAC,KAAG,GAAEhB,EAAE,kBAAiBF,CAAC;AAAC;ACAyI,SAASG,GAAEG,GAAEL,GAAED,GAAEK,GAAED,GAAEc,GAAEX,GAAE,GAAEwB,GAAEd,GAAEK,GAAE;AAAC,QAAMM,IAAEF,GAAEJ,EAAE,IAAI;AAAE,MAAI,GAAEU,GAAErB,IAAE;AAAE,MAAGT,GAAEI,GAAEL,GAAED,GAAEK,GAAE0B,EAAE,kBAAiB3B,GAAE,CAAC,EAAE,QAAOwB,GAAG,kBAAkBN,CAAC,KAAGX,IAAEiB,EAAE,8BAA8BvB,GAAED,GAAEc,GAAEX,GAAE,GAAEwB,GAAEd,GAAEK,CAAC,GAAE,IAAEJ,GAAEc,IAAEzB,MAAI,IAAEF,GAAE2B,IAAE5B,IAAGF,GAAE,GAAE6B,EAAE,kBAAiBC,GAAEd,GAAED,EAAE,kBAAiBV,GAAE,CAAC,IAAEI,IAAE;AAAM;AAAC,SAASoB,GAAEzB,GAAEL,GAAED,GAAEK,GAAEH,GAAE;AAAC,QAAMC,KAAGC,GAAEE,CAAC,IAAEA,EAAE,IAAEY,GAAEZ,CAAC,IAAEA,EAAE,MAAMA,EAAE,SAAO,CAAC,IAAEA,EAAE,CAAC,MAAI;AAAE,UAAON,EAAE;IAAM,KAAI,iBAAgB;AAAC,YAAMA,IAAEO,GAAEN,GAAEK,GAAE,QAAQ,KAAG;AAAE,aAAOJ,EAAE,2BAAyB,GAAEA,EAAE,mBAAiBF,GAAE,MAAKE,EAAE,IAAEF;AAAA,IAAE;AAAA,IAAC,KAAI,sBAAqB;AAAC,YAAMI,IAAEG,GAAEN,GAAEK,GAAE,QAAQ,KAAG,GAAEY,IAAElB,EAAE,oBAAoBG,GAAEE,CAAC;AAAE,aAAOH,EAAE,2BAAyBgB,GAAEhB,EAAE,mBAAiBE,GAAE,MAAKF,EAAE,IAAEgB,IAAEd;AAAA,IAAE;AAAA,IAAC,KAAI,qBAAoB;AAAC,YAAMA,IAAEG,GAAEN,GAAEK,GAAE,OAAO,KAAG,GAAEY,IAAElB,EAAE,oBAAoBG,GAAEE,CAAC;AAAE,aAAOH,EAAE,2BAAyBgB,GAAEhB,EAAE,mBAAiBE,GAAE,MAAKF,EAAE,IAAEgB,IAAEd;AAAA,IAAE;AAAA,IAAC,KAAI,mBAAkB;AAAC,YAAMA,IAAEJ,EAAE,oBAAoBG,GAAEE,CAAC,GAAEa,IAAEX,GAAEN,GAAEK,GAAE,QAAQ,KAAG;AAAE,aAAOJ,EAAE,2BAAyBE,IAAEc,GAAEhB,EAAE,mBAAiBgB,GAAE,MAAKhB,EAAE,IAAEE;AAAA,IAAE;AAAA,IAAC;AAAQ,aAAO,MAAKF,EAAE,IAAE;AAAA,EAAE;AAAC;AAAC,SAASe,GAAEX,GAAEL,GAAED,GAAEK,GAAE;AAAC,SAAO0B,GAAEzB,GAAEL,GAAED,GAAEK,GAAEI,EAAC,GAAEA,GAAE;AAAC;AAAC,SAASa,GAAEhB,GAAEL,GAAED,GAAE;AAAC,SAAwBC,MAAlB,mBAAuCD,MAAlB,kBAAoBM,EAAE,mBAAiBL,MAAID,KAAqBC,MAAlB,mBAAuCD,MAAlB,kBAA0BC,KAAN,QAAeD,KAAN,OAAQM,EAAE,iBAAe,IAAEA,EAAE;AAAkB;AAAC,SAASsB,GAAEtB,GAAE;AAAC,SAA6BA,MAAvB,wBAAgDA,MAAtB;AAAuB;AAAC,SAASiB,GAAEjB,GAAE;AAAC,SAA0BA,MAApB;AAAqB;AAAC,SAAS0B,GAAE/B,GAAED,GAAEE,GAAE,GAAEgB,GAAE;AAACa,EAAAA,GAAE/B,GAAEE,GAAEgB,GAAE,GAAET,EAAC,GAAEE,GAAEV,GAAEQ,GAAE,wBAAwB;AAAE,QAAMF,IAAEE,GAAE,kBAAiBN,IAAEG,GAAE+B,IAAEpC,EAAE,cAAc;AAAE,SAAA6B,GAAE,CAAC,IAAE9B,EAAE,GAAE8B,GAAE,CAAC,IAAE9B,EAAE,GAAE8B,GAAE,CAAC,IAAErB,GAAE,GAASJ,GAAEL,EAAE,kBAAiB8B,IAAE3B,GAAE,EAAE,gBAAgB,IAAEF,EAAE,iBAAeE,IAAE,QAAQ,KAAK,gEAAgE,GAAEI;AAAC;AAAC,SAASI,GAAEL,GAAEL,GAAE;AAAC,WAAQD,IAAE,GAAEA,IAAEM,EAAE,WAAW,QAAO,EAAEN,GAAE;AAAC,UAAMK,IAAEC,EAAE,WAAWN,CAAC,EAAE,oBAAoB,yBAAyB;AAAE,IAAAK,KAAGA,EAAE,KAAK,CAAC,MAAIJ,MAAII,EAAE,KAAK,CAAC,IAAEJ,GAAEK,EAAE,+BAA+BA,EAAE,WAAWN,CAAC,GAAE,yBAAyB;AAAA,EAAE;AAAC;AAAC,SAASoB,GAAEd,GAAEL,GAAED,GAAEK,GAAEH,GAAEE,GAAE;AAAC,MAAIc,IAAE;AAAE,QAAMX,IAAEH,EAAE;AAAiB,EAAAH,KAAG,GAAEI,KAAG;AAAE,WAAQF,IAAE,GAAEA,IAAED,GAAE,EAAEC,GAAE;AAAC,UAAMD,IAAEI,EAAEL,CAAC,GAAEE,IAAEG,EAAEL,IAAE,CAAC,GAAE8B,IAAEzB,EAAEL,IAAE,CAAC,GAAEgB,IAAEb,EAAE,aAAaF,GAAEC,GAAE4B,GAAExB,GAAE,QAAQ,KAAG;AAAE,IAAAW,KAAGD,GAAEjB,EAAEK,CAAC,IAAEH,GAAEF,EAAEK,IAAE,CAAC,IAAEF,GAAEH,EAAEK,IAAE,CAAC,IAAEY,GAAEhB,KAAG,GAAEI,KAAG;AAAA,EAAC;AAAC,SAAOa,IAAEhB;AAAC;AAAC,SAASmB,GAAEf,GAAEL,GAAED,GAAEK,GAAEH,GAAEE,GAAEc,GAAEX,GAAE;AAAC,MAAIJ,IAAE;AAAE,QAAM4B,IAAExB,EAAE,2BAA2BW,CAAC,GAAED,IAAEV,EAAE,8BAA6Be,IAAElB,EAAE;AAAiB,EAAAH,KAAG,GAAEI,KAAG;AAAE,WAAQuB,IAAE,GAAEA,IAAE1B,GAAE,EAAE0B,GAAE;AAAC,UAAM1B,IAAEI,EAAEL,CAAC,GAAEiB,IAAEZ,EAAEL,IAAE,CAAC,GAAEM,IAAED,EAAEL,IAAE,CAAC,GAAE2B,IAAExB,EAAE,aAAaF,GAAEgB,GAAEX,GAAEe,GAAE,QAAQ,KAAG;AAAE,IAAAnB,KAAGyB,GAAE5B,EAAEK,CAAC,IAAEH,GAAEF,EAAEK,IAAE,CAAC,IAAEa,GAAElB,EAAEK,IAAE,CAAC,IAAQY,KAAN,OAAQV,IAAEqB,IAAEG,IAAEH,IAAEG,GAAE9B,KAAG,GAAEI,KAAG;AAAA,EAAC;AAAC,SAAOF,IAAED;AAAC;AAAC,SAASqC,GAAEjC,GAAEL,GAAED,GAAEK,GAAEH,GAAEE,GAAEc,GAAEX,GAAE;AAAC,MAAIJ,IAAE;AAAE,QAAM4B,IAAExB,EAAE,2BAA2BW,CAAC,GAAED,IAAEV,EAAE,8BAA6Be,IAAElB,EAAE;AAAiB,EAAAH,KAAG,GAAEI,KAAG;AAAE,WAAQuB,IAAE,GAAEA,IAAE1B,GAAE,EAAE0B,GAAE;AAAC,UAAM1B,IAAEI,EAAEL,CAAC,GAAEiB,IAAEZ,EAAEL,IAAE,CAAC,GAAEM,IAAED,EAAEL,IAAE,CAAC,GAAE2B,IAAExB,EAAE,aAAaF,GAAEgB,GAAEX,GAAEe,GAAE,OAAO,KAAG;AAAE,IAAAnB,KAAGyB,GAAE5B,EAAEK,CAAC,IAAEH,GAAEF,EAAEK,IAAE,CAAC,IAAEa,GAAElB,EAAEK,IAAE,CAAC,IAAQY,KAAN,OAAQV,IAAEqB,IAAEG,IAAEH,IAAEG,GAAE9B,KAAG,GAAEI,KAAG;AAAA,EAAC;AAAC,SAAOF,IAAED;AAAC;AAAC,SAASY,GAAER,GAAE;AAAC,QAAML,IAAEK,EAAE,iBAAgBN,IAAEM,EAAE;AAA6B,SAAWL,MAAJ,KAAaD,KAAN;AAAO;AAAC,SAASQ,GAAEF,GAAEL,GAAED,GAAEK,GAAEH,GAAEE,GAAEc,GAAEX,GAAE;AAAC,QAAMJ,IAAEI,EAAE,2BAA2BW,CAAC,GAAEa,IAAExB,EAAE;AAA6B,EAAAN,KAAG,GAAEI,KAAG;AAAE,WAAQY,IAAE,GAAEA,IAAEf,GAAE,EAAEe,GAAE;AAAC,UAAMf,IAAEI,EAAEL,CAAC,GAAEG,IAAEE,EAAEL,IAAE,CAAC,GAAEiB,IAAEZ,EAAEL,IAAE,CAAC;AAAE,IAAAD,EAAEK,CAAC,IAAEH,GAAEF,EAAEK,IAAE,CAAC,IAAED,GAAEJ,EAAEK,IAAE,CAAC,IAAQ0B,KAAN,OAAQb,IAAEf,IAAEA,GAAEF,KAAG,GAAEI,KAAG;AAAA,EAAC;AAAC,SAAO;AAAC;AAAC,MAAMQ,GAAC;AAAA,EAAC,cAAa;AAAC,SAAK,2BAAyB,GAAE,KAAK,mBAAiB,GAAE,KAAK,IAAE;AAAA,EAAC;AAAC;AAAC,MAAMa,KAAE,EAAC,mBAAkB,EAAC,+BAA8BlB,IAAE,mBAAkBM,GAAC,GAAE,iBAAgB,EAAC,+BAA8BM,IAAE,mBAAkB,MAAI,GAAE,GAAE,sBAAqB,EAAC,+BAA8BC,IAAE,mBAAkB,MAAI,GAAE,GAAE,qBAAoB,EAAC,+BAA8BkB,IAAE,mBAAkB,MAAI,GAAE,EAAC,GAAEF,KAAEpC,MAAIQ,KAAE,IAAII,MAAEiB,KAAE9B,EAAC,GCAppH+B,KAAE,MAAIzB,GAAE,UAAU,0DAA0D;AAAE,SAASD,GAAEC,GAAE;AAAC,SAAM,EAAC,cAAaA,EAAE,cAAa,QAAOA,EAAE,SAAO,EAAC,MAAKA,EAAE,OAAO,MAAK,SAAQA,EAAE,OAAO,QAAQ,YAAY,kBAAkB,MAAK,EAAC,IAAGA,EAAE,OAAO,QAAQ,iBAAgB,CAAC,GAAE,SAAQA,EAAE,OAAO,QAAO,IAAE,KAAI;AAAC;AAAuH,eAAeY,GAAEZ,GAAEJ,GAAE6B,GAAE1B,GAAE;AAAC,QAAMY,IAAEX,GAAG;AAAW,MAAa,OAAOW,KAAjB,SAAmB,QAAO;AAAK,QAAMC,IAAEK,GAAEN,CAAC;AAAE,MAASC,KAAN,KAAQ,QAAM,EAAC,cAAaA,EAAC;AAAE,QAAMX,IAAE,MAAMP,GAAC;AAAGC,EAAAA,GAAE8B,CAAC;AAAE,QAAM,IAAExB,EAAE,aAAYH,IAAE,EAAE,iBAAiBa,CAAC;AAAE,SAAO,EAAE,cAAcb,CAAC,KAAYC,GAAE,MAAM,mEAAmE,GAAE,EAAC,cAAa,EAAC,KAAG,EAAC,QAAO,EAAC,MAAK,EAAE,eAAeD,CAAC,GAAE,SAAQ,EAAE,kBAAkB,MAAK,EAAC,IAAGF,EAAC,CAAC,GAAE,SAAQK,EAAC,EAAC;AAAC;AAAC,SAASA,GAAED,GAAEL,GAAEC,GAAE;AAAC,SAAOI,EAAE,YAAY,cAAcL,EAAE,YAAWA,EAAE,UAASC,CAAC;AAAC;AAAC,SAASC,GAAEG,GAAEL,GAAE;AAAC,MAASK,KAAN,QAAS,CAACK,GAAEL,CAAC,GAAE;AAAC,QAAG,CAACL,KAAG,CAACK,EAAE,OAAO,QAAO,KAAKyB,GAAC,EAAG,iBAAiB,0CAA0C;AAAE,UAAM/B,IAAEC;AAAE,IAAAD,EAAE,cAAYA,EAAE,YAAUE,GAAEF,EAAE,SAAS,IAAGM,EAAE,OAAO,QAAQ,YAAY,kBAAkBA,EAAE,OAAO,SAAQL,CAAC;AAAA,EAAC;AAAC;AAAC,SAASG,GAAEE,GAAE;AAAC,MAASA,KAAN,MAAQ;AAAC,QAAGK,GAAEL,CAAC,EAAE,QAAOA,EAAE;AAAa,UAAML,IAAEK,EAAE;AAAO,QAAIJ,IAAED,GAAG,QAAQ,YAAY,gBAAgBA,EAAE,MAAKA,EAAE,OAAO;AAAE,WAAgB,OAAOC,KAAjB,aAAqBI,EAAE,eAAa,GAAEJ,IAAE,IAAGA;AAAA,EAAC;AAAC,SAAO;AAAC;AAAC,SAAS0B,GAAEtB,GAAEL,IAAE,IAAG;AAAC,MAAIC,IAAEI,GAAG;AAAsB,QAAMN,IAAEE,GAAG;AAAW,SAAOD,KAASD,MAAN,QAAUE,IAAE,OAAMA,KAAG;AAAI;AAAM,MAACoB,KAAE,EAAC,cAAa,EAAC;AAAE,SAASX,GAAEL,GAAE;AAAC,SAAaA,EAAE,gBAAR;AAAoB;AAAC,SAASiB,GAAEjB,GAAE;AAAC,SAAYA,MAAN,MAAQ,IAAE;AAAI;ACAvkD,MAAMD,GAAC;AAAA,EAAC,cAAa;AAAC,SAAK,mBAAiB,GAAE,KAAK,oBAAkB,GAAE,KAAK,QAAM,UAAS,KAAK,8BAA4B,GAAE,KAAK,gCAA8B,MAAK,KAAK,OAAK,MAAK,KAAK,sBAAoB;AAAA,EAAI;AAAA,EAAC,IAAI,+BAA8B;AAAC,WAAO,KAAK;AAAA,EAA6B;AAAA,EAAC,IAAI,kBAAiB;AAAC,WAAO,KAAK;AAAA,EAAgB;AAAA,EAAC,IAAI,OAAM;AAAC,WAAO,KAAK;AAAA,EAAK;AAAA,EAAC,IAAI,KAAK,GAAE;AAAC,SAAK,QAAM,GAAE,KAAK,8BAA4BJ,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,+BAA8B;AAAC,WAA0B,KAAK,SAAzB;AAAA,EAA6B;AAAA,EAAC,QAAO;AAAC,SAAK,OAAK,MAAK,KAAK,mBAAiB,GAAE,KAAK,oBAAkB,GAAE,KAAK,gCAA8B,MAAK,KAAK,OAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,aAAaA,GAAE;AAAC,SAAK,mBAAiBA,GAAE,KAAK,oBAAkB;AAAA,EAAC;AAAA,EAAC,IAAI,yBAAyBA,GAAE;AAAC,SAAK,mBAAiBA,IAAE,KAAK,6BAA4B,KAAK,oBAAkB;AAAA,EAAC;AAAA,EAAC,qBAAqBA,GAAE;AAAC,SAAK,qBAAmBA;AAAA,EAAC;AAAA,EAAC,oBAAoBA,GAAEK,GAAE;AAAC,UAAMN,IAAE,KAAK,2BAA2BM,CAAC;AAAE,WAAa,KAAK,gCAAX,OAAwCN,IAAEC,IAAED;AAAA,EAAC;AAAA,EAAC,2BAA2BC,GAAE;AAAC,QAAIK,IAAE,KAAK;AAAiB,UAAMC,IAAE,KAAK;AAA6B,WAAaA,KAAN,SAAUD,KAAGN,GAAEO,CAAC,IAAE,KAAK,8BAA6BD,IAAEL,EAAE,eAAa,KAAK;AAAA,EAAiB;AAAA,EAAC,qBAAqBA,GAAE;AAAC,SAAK,OAAKA,EAAE,MAAK,KAAK,OAAKK,GAAEL,EAAE,IAAI,IAAEA,EAAE,OAAK,UAAS,KAAK,2BAAyBA,EAAE,UAAQ;AAAA,EAAC;AAAA,EAAC,gCAAgCA,GAAE;AAAC,SAAK,gCAA8BA;AAAA,EAAC;AAAA,EAAC,6CAA6CA,GAAEK,GAAEN,GAAE;AAAC,IAAAC,EAAE,UAAQ,KAAK,gCAA8BM,GAAEN,CAAC,GAAE,KAAK,+BAA+BK,GAAEN,CAAC,KAAG,KAAK,gCAA8BC;AAAA,EAAC;AAAA,EAAC,+BAA+BA,GAAEK,GAAE;AAAC,UAAMN,IAAE,KAAK;AAA6B,IAAAA,GAAG,WAASA,EAAE,eAAa,QAAOI,GAAE,KAAK,+BAA8BH,EAAE,WAASC,GAAEF,EAAE,OAAO,SAAQC,GAAEK,CAAC,IAAE,IAAI;AAAA,EAAE;AAAA,EAAC,OAAO,kBAAkBL,GAAE;AAAC,UAAMK,IAAE,IAAID;AAAE,WAAaJ,KAAN,QAASK,EAAE,qBAAqBL,CAAC,GAAEK;AAAA,EAAC;AAAC;;;;;;","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]}