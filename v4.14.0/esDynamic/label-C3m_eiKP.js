import{q as L,c as p,i as k}from"./dom-cV1JHjxC.js";const E="calciteInternalLabelClick",d="calciteInternalLabelConnected",u="calciteInternalLabelDisconnected",h="calcite-label",o=new WeakMap,c=new WeakMap,r=new WeakMap,f=new WeakMap,s=new Set,w=e=>{const{id:t}=e,n=t&&L(e,{selector:`${h}[for="${t}"]`});if(n)return n;const l=p(e,h);return!l||C(l,e)?null:l};function C(e,t){let n;const l="custom-element-ancestor-check",i=a=>{a.stopImmediatePropagation();const m=a.composedPath();n=m.slice(m.indexOf(t),m.indexOf(e))};return e.addEventListener(l,i,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,i),n.filter(a=>a!==t&&a!==e).filter(a=>a.tagName?.includes("-")).length>0}function b(e){if(!e)return;const t=w(e.el);if(c.has(t)&&t===e.labelEl||!t&&s.has(e))return;const n=y.bind(e);if(t){e.labelEl=t;const l=o.get(t)||[];l.push(e),o.set(t,l.sort(v)),c.has(e.labelEl)||(c.set(e.labelEl,g),e.labelEl.addEventListener(E,g)),s.delete(e),document.removeEventListener(d,r.get(e)),f.set(e,n),document.addEventListener(u,n)}else s.has(e)||(n(),document.removeEventListener(u,f.get(e)))}function I(e){if(!e||(s.delete(e),document.removeEventListener(d,r.get(e)),document.removeEventListener(u,f.get(e)),r.delete(e),f.delete(e),!e.labelEl))return;const t=o.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(E,c.get(e.labelEl)),c.delete(e.labelEl)),o.set(e.labelEl,t.filter(n=>n!==e).sort(v)),e.labelEl=null}function v(e,t){return k(e.el,t.el)?-1:1}function M(e){return e.label||e.labelEl?.textContent?.trim()||""}function g(e){const t=e.detail.sourceEvent.target,n=o.get(this),l=n.find(a=>a.el===t);if(n.includes(l))return;const i=n[0];i.disabled||i.onLabelClick(e)}function x(){s.has(this)&&b(this)}function y(){s.add(this);const e=r.get(this)||x.bind(this);r.set(this,e),document.addEventListener(d,e)}async function O(e){if(await e.componentOnReady(),o.has(e))return;const t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame(()=>{for(const n of s)if(n.el===t){b(n);break}})}export{O as a,u as b,b as c,I as d,M as g,d as l};
