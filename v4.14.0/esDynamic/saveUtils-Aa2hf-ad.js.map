{"version":3,"file":"saveUtils-Aa2hf-ad.js","sources":["../../node_modules/@arcgis/core/webdoc/support/saveUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{getLayersWithChartSupport as r}from\"../../layers/support/layerUtils.js\";async function o(e){const r=[];for(const o of e.allLayers)if(\"beforeSave\"in o&&\"function\"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const t=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function s(r,o,s){let n=(r.messages??[]).filter(({type:e})=>\"error\"===e).map(({name:r,message:o,details:t})=>new e(r,o,t));if(r.blockedRelativeUrls&&(n=n.concat(r.blockedRelativeUrls.map(r=>new e(\"url:unsupported\",`Relative url '${r}' is not supported`)))),s){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:o}=s;e&&(n=n.filter(({name:e})=>!(t.has(e)||r.includes(e)))),o&&(n=n.filter(e=>\"web-document-write:property-required\"!==e.name))}if(n.length>0)throw new e(o.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:n})}function n(e){return r(e).some(e=>!!e.charts?.length)}export{o as beforeSave,s as evaluateWriteErrors,n as hasCharts};\n"],"names":["o","e","r","t","s","n"],"mappings":";AAIkH,eAAeA,EAAEC,GAAE;AAAC,QAAMC,IAAE,CAAA;AAAG,aAAU,KAAKD,EAAE,UAAU,KAAG,gBAAe,KAAe,OAAO,EAAE,cAArB,YAAgC;AAAC,UAAM,IAAE,EAAE,WAAU;AAAG,SAAGC,EAAE,KAAK,CAAC;AAAA,EAAC;AAAC,QAAM,QAAQ,WAAWA,CAAC;AAAC;AAAC,MAAMC,IAAE,oBAAI,IAAI,CAAC,qBAAoB,wBAAuB,sBAAqB,4BAA2B,iBAAiB,CAAC;AAAE,SAASC,EAAEF,GAAEF,GAAEI,GAAE;AAAC,MAAIC,KAAGH,EAAE,YAAU,CAAA,GAAI,OAAO,CAAC,EAAC,MAAKD,EAAC,MAAcA,MAAV,OAAW,EAAE,IAAI,CAAC,EAAC,MAAK,GAAE,SAAQD,GAAE,SAAQG,EAAC,MAAI,IAAIF,EAAE,GAAED,GAAEG,CAAC,CAAC;AAAE,MAAGD,EAAE,wBAAsBG,IAAEA,EAAE,OAAOH,EAAE,oBAAoB,IAAI,OAAG,IAAID,EAAE,mBAAkB,iBAAiB,CAAC,oBAAoB,CAAC,CAAC,IAAGG,GAAE;AAAC,UAAK,EAAC,mBAAkBH,GAAE,+BAA8BC,IAAE,CAAA,GAAG,gCAA+BF,EAAC,IAAEI;AAAE,IAAAH,MAAII,IAAEA,EAAE,OAAO,CAAC,EAAC,MAAKJ,EAAC,MAAI,EAAEE,EAAE,IAAIF,CAAC,KAAGC,EAAE,SAASD,CAAC,EAAE,IAAGD,MAAIK,IAAEA,EAAE,OAAO,CAAAJ,MAA4CA,EAAE,SAA3C,sCAA+C;AAAA,EAAE;AAAC,MAAGI,EAAE,SAAO,EAAE,OAAM,IAAIJ,EAAED,EAAE,WAAU,4GAA2G,EAAC,QAAOK,EAAC,CAAC;AAAC;","x_google_ignoreList":[0]}