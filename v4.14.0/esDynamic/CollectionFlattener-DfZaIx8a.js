import{O as c,bk as a,ay as d,_ as n,X as l,Y as f}from"./main-CSjwO60s.js";let e=class extends c{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(a(()=>this._refresh(),d))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections?.();if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i)}_createNewInstance(t){return new c(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(o=>!!o);for(const o of i)if(o){if(r(o)){const s=this.indexOf(o,t);s>=0?s!==t&&this.reorder(o,t):this.add(o,t),++t}if(this.getChildrenFunction){const s=this.getChildrenFunction(o);if(Array.isArray(s))for(const h of s)t=this._processCollection(t,h);else t=this._processCollection(t,s)}}return t}};n([l()],e.prototype,"getCollections",void 0),n([l()],e.prototype,"getChildrenFunction",void 0),n([l()],e.prototype,"itemFilterFunction",void 0),e=n([f("esri.core.CollectionFlattener")],e);export{e as l};
