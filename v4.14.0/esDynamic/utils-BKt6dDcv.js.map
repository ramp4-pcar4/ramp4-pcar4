{"version":3,"file":"utils-BKt6dDcv.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t}from\"../../../../../core/time.js\";import{getRandomValue as e}from\"../grouping.js\";function r(e){return t(e.frameDurations.reduce((t,e)=>t+e,0))}function i(t){const{width:e,height:r}=t,i=t.frameDurations.reverse(),a=e=>{const r=t.frameDurations.length-1-e;return t.getFrame(r)};return{frameCount:t.frameCount,duration:t.duration,frameDurations:i,getFrame:a,width:e,height:r}}function a(e,r){const{width:i,height:a,getFrame:n}=e,s=r/e.duration,o=e.frameDurations.map(e=>t(e*s));return{frameCount:e.frameCount,duration:e.duration,frameDurations:o,getFrame:n,width:i,height:a}}function n(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.shift();return s.unshift(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}function s(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.pop();return s.push(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}class o{constructor(e,r,i,a){this._animation=e,this._repeatType=i,this._onFrameData=a,this._direction=1,this._currentFrame=0,this._lastUpdated=t(0),this.timeInFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let n=0;for(;r>n;)n+=this.timeToFrame,this.nextFrame();const s=this._animation.getFrame(this._currentFrame);this._onFrameData(s)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=0;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=this._animation.frameDurations.length-1;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame],this.timeInFrame=0;const t=this._animation.getFrame(this._currentFrame);this._onFrameData(t)}update(e){const r=t(e-this._lastUpdated);this._lastUpdated=e,this._advance(r)}_advance(t){this.timeInFrame+=t,this.timeInFrame>this.timeToFrame&&this.nextFrame()}}function m(e,r){e.animationsEnabled&&r?.update(t(e.time))}function h(m,h,u,c){let d,{repeatType:f}=h;if(null==f&&(f=\"Loop\"),!0===h.reverseAnimation&&(m=i(m)),null!=h.duration&&(m=a(m,t(1e3*h.duration))),null!=h.repeatDelay){const e=1e3*h.repeatDelay;\"Loop\"===f?m=s(m,t(e)):\"Oscillate\"===f&&(m=n(s(m,t(e/2)),t(e/2)))}if(null!=h.startTimeOffset)d=t(1e3*h.startTimeOffset);else if(null!=h.randomizeStartTime){const i=82749913,a=null!=h.randomizeStartSeed?h.randomizeStartSeed:i,n=e(u,a);d=t(n*r(m))}else d=t(0);return new o(m,d,f,c)}export{o as Player,a as adjustDuration,s as appendDelay,h as createPlayer,r as getDuration,n as prependDelay,i as reverse,m as updateIfNeeded};\n"],"names":["r","e","t","i","a","n","s","o","m","h","u","c","d","f"],"mappings":"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","x_google_ignoreList":[0]}