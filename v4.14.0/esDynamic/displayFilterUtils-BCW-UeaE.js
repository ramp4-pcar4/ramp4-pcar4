import{c5 as m,c6 as l,c7 as N,c2 as s,c8 as S}from"./main-CSjwO60s.js";function x(e,t){return{...t,filterMode:e.mode}}function T(e,t){return I(e,t).next().value??null}function h(e,t,n){const r=b(e);if(r&&(m(t,r[0])||l(n,r[1])))return"";const i=Array.from(I(e,t,n)),c=p(i,t,n)?"1=1":i.map(o=>o.where||"1=1").reduce((o,f)=>N(o,f),"");return c&&c!=="1=1"?c:""}function b(e){if(d(e)==="manual")return null;const t=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:n,maxScale:r}of e.filters)t[0]=Math.max(t[0],u(n)),t[1]=Math.min(t[1],a(r));return t}function*I(e,t,n){if(d(e)==="manual"){const r=e.filters.find(i=>i.id===e.activeFilterId);r&&(yield r)}else{typeof t=="object"&&(t=t.scale);for(const r of e.filters)y(r.minScale,r.maxScale,t,n)&&(yield r)}}function p(e,t,n){if(e.length===0)return!0;const r=u(e.at(0)?.minScale),i=a(e.at(-1)?.maxScale);if(l(r,t)||m(i,n))return!0;for(let c=0;c<e.length-1;c++){const o=e[c],f=e[c+1];if(l(u(f.minScale),a(o.maxScale)))return!0}return!1}function y(e,t,n,r){return e=u(e),n=u(n),t=a(t),!(!s(n,e)&&(r??n)>e)&&!S(t,n)&&(r===void 0||!s(r,e))}function d(e){return"mode"in e?e.mode:e.filterMode}function u(e){return e||Number.POSITIVE_INFINITY}function a(e){return e||0}export{h as c,x as i,T as u};
