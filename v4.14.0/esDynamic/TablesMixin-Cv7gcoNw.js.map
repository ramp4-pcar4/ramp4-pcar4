{"version":3,"file":"TablesMixin-Cv7gcoNw.js","sources":["../../node_modules/@arcgis/core/support/collectionUtils.js","../../node_modules/@arcgis/core/support/LayersMixin.js","../../node_modules/@arcgis/core/support/TablesMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../core/CollectionFlattener.js\";function t(t){return new e({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const t=[];return\"tables\"in e&&t.push(e.tables),\"layers\"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&\"tables\"in t&&t.tables.includes(e)}})}function n(e){for(const t of e.values())t?.destroy();e.clear()}export{t as createFlattenedTablesCollection,n as destroyMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import o from\"../core/Logger.js\";import{isPromiseLike as s}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../layers/Layer.js\";function d(e,r,t){let o,s;if(e)for(let a=0,i=e.length;a<i;a++){if(o=e.at(a),o?.[r]===t)return o;if(\"group\"===o?.type&&(s=d(o.layers,r,t),s))return s}}const n=n=>{const y=n;let h=class extends y{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&e.removeFromParent()},s=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||o.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on(\"before-add\",e=>{if(e.item===this)return e.preventDefault(),void o.getLogger(this).error(\"#add()\",\"Cannot add layer to itself.\");t(e.item)}),this.layers.on(\"after-add\",e=>s(e.item)),this.layers.on(\"after-remove\",e=>a(e.item))])}destroy(){const e=this.layers.toArray();for(const r of e)r.destroy();this.layers.destroy()}removeChildLayer(e){this.layers.remove(e),super.removeChildLayer?.(e)}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof l){const o=e;o.parent===this?this.reorder(o,r):t.add(o,r)}else s(e)?e.then(e=>{this.destroyed||this.add(e,r)}):o.getLogger(this).error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;let o=t.getNextIndex(r);e.slice().forEach(e=>{e.parent!==this?(t.add(e,o),o+=1):this.reorder(e,o)})}findLayerById(e){return d(this.layers,\"id\",e)}findLayerByUid(e){return d(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([a()],h.prototype,\"layers\",null),h=e([i(\"esri.support.LayersMixin\")],h),h};export{n as LayersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../core/Collection.js\";import{referenceSetter as r}from\"../core/collectionUtils.js\";import o from\"../core/Logger.js\";import{property as s}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";const a=new Set([\"feature\",\"subtype-group\"]);function l(t,e,r){if(t)for(let o=0,s=t.length;o<s;o++){const s=t.at(o);if(s[e]===r)return s;if(\"group\"===s?.type){const t=l(s.tables,e,r);if(t)return t}}}const n=n=>{const p=n;let c=class extends p{constructor(...t){super(...t),this.tables=new e,this.addHandles([this.tables.on(\"after-add\",t=>{const e=t.item;e.parent&&e.parent!==this&&e.removeFromParent(),e.parent=this,a.has(e.type)||o.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on(\"after-remove\",t=>{t.item.parent=null})])}destroy(){const t=this.tables.toArray();for(const e of t)e.destroy();this.tables.destroy()}removeChildLayer(t){this.tables.remove(t),super.removeChildLayer?.(t)}set tables(t){this._set(\"tables\",r(t,this._get(\"tables\")))}findTableById(t){return l(this.tables,\"id\",t)}findTableByUid(t){return l(this.tables,\"uid\",t)}};return t([s()],c.prototype,\"tables\",null),c=t([i(\"esri.support.TablesMixin\")],c),c};export{n as TablesMixin,a as allowedTableTypes};\n"],"names":["t","e","n","d","r","o","s","a","i","y","h","l","p","c"],"mappings":"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","x_google_ignoreList":[0,1,2]}