import{aI as q,az as B,aJ as d}from"./main-CSjwO60s.js";import{s as G}from"./sphere-CIGsF4vz.js";import{s as l,c as j,P as w,j as H,u as h,g as I,v as J}from"./vec32-CI1xtKog.js";import{c}from"./vectorStacks-B2ngxq6F.js";function M(r){return r?{origin:q(r.origin),vector:q(r.vector)}:{origin:B(),vector:B()}}function y(r,n){const t=X.get();return t.origin=r,t.vector=n,t}function Q(r,n=M()){return C(r.origin,r.vector,n)}function C(r,n,t=M()){return l(t.origin,r),l(t.vector,n),t}function R(r,n,t=M()){return l(t.origin,r),j(t.vector,n,r),t}function S(r,n){const t=j(c.get(),n,r.origin),a=w(r.vector,t),i=w(r.vector,r.vector),g=d(a/i,0,1),s=j(c.get(),I(c.get(),r.vector,g),t);return w(s,s)}function T(r,n,t){return D(r,n,0,1,t)}function U(r,n,t){return h(t,r.origin,I(t,r.vector,n))}function D(r,n,t,a,i){const{vector:g,origin:s}=r,p=j(c.get(),n,s),u=w(g,p)/H(g);return I(i,g,d(u,t,a)),h(i,i,r.origin)}function V(r,n){if(E(r,y(n.origin,n.direction),!1,x)){const{tA:t,pB:a,distance2:i}=x;if(t>=0&&t<=1)return i;if(t<0)return J(r.origin,a);if(t>1)return J(h(c.get(),r.origin,r.vector),a)}return null}function W(r,n,t){return!!E(r,n,!0,x)&&(l(t,x.pA),!0)}function E(r,n,t,a){const i=r.origin,g=h(c.get(),i,r.vector),s=n.origin,p=h(c.get(),s,n.vector),u=c.get(),e=c.get();if(u[0]=i[0]-s[0],u[1]=i[1]-s[1],u[2]=i[2]-s[2],e[0]=p[0]-s[0],e[1]=p[1]-s[1],e[2]=p[2]-s[2],Math.abs(e[0])<1e-6&&Math.abs(e[1])<1e-6&&Math.abs(e[2])<1e-6)return!1;const o=c.get();if(o[0]=g[0]-i[0],o[1]=g[1]-i[1],o[2]=g[2]-i[2],Math.abs(o[0])<1e-6&&Math.abs(o[1])<1e-6&&Math.abs(o[2])<1e-6)return!1;const P=u[0]*e[0]+u[1]*e[1]+u[2]*e[2],A=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],F=u[0]*o[0]+u[1]*o[1]+u[2]*o[2],z=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],k=(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])*z-A*A;if(Math.abs(k)<1e-6)return!1;let f=(P*A-F*z)/k,v=(P+A*f)/z;t&&(f=d(f,0,1),v=d(v,0,1));const m=c.get(),b=c.get();return m[0]=i[0]+f*o[0],m[1]=i[1]+f*o[1],m[2]=i[2]+f*o[2],b[0]=s[0]+v*e[0],b[1]=s[1]+v*e[1],b[2]=s[2]+v*e[2],a.tA=f,a.tB=v,a.pA=m,a.pB=b,a.distance2=J(m,b),!0}const x={tA:0,tB:0,pA:B(),pB:B(),distance2:0},X=new G(()=>M());export{D as A,W as B,S as M,R as b,V as d,C as h,T as j,U as l,y as m,Q as p,M as v};
