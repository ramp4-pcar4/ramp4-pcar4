{"version":3,"file":"asyncUtils-Cu__bxqs.js","sources":["../../node_modules/@arcgis/core/core/asyncUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import t from\"./Accessor.js\";import{abortMaybe as o,removeMaybe as e}from\"./maybe.js\";import{onAbort as n,throwIfAbortError as s,eachAlways as l}from\"./promiseUtils.js\";import{property as i}from\"./accessorSupport/decorators/property.js\";import{subclass as u}from\"./accessorSupport/decorators/subclass.js\";function a(r,t,o){return l(r.map((r,e)=>t.apply(o,[r,e])))}async function p(r,t,o){return(await l(r.map((r,e)=>t.apply(o,[r,e])))).map(r=>r.value)}function c(r){return{ok:!0,value:r}}function h(r){return{ok:!1,error:r}}function m(r){return null!=r&&!0===r.ok?r.value:null}function f(r){return null!=r&&!1===r.ok?r.error:null}async function _(r){if(null==r)return{ok:!1,error:new Error(\"no promise provided\")};try{return c(await r)}catch(t){return h(t)}}async function b(r){try{return c(await r)}catch(t){return s(t),h(t)}}function y(r){if(!0===r.ok)return r.value;throw r.error}function d(r,t){return new v(r,t)}let v=class extends t{get value(){return m(this._result)}get error(){return f(this._result)}get finished(){return null!=this._result}constructor(r,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=o(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:e}=this._abortController;this.promise=r(e),this.promise.then(r=>{this._result=c(r),this._cleanup()},r=>{this._result=h(r),this._cleanup()}),this._abortHandle=n(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=e(this._abortHandle),this._abortController=null}};r([i()],v.prototype,\"value\",null),r([i()],v.prototype,\"error\",null),r([i()],v.prototype,\"finished\",null),r([i()],v.prototype,\"promise\",void 0),r([i()],v.prototype,\"_result\",void 0),v=r([u(\"esri.core.asyncUtils.ReactiveTask\")],v);export{y as assertResult,d as createTask,a as forEach,h as makeResultError,c as makeResultOk,p as map,_ as result,f as resultError,b as resultOrAbort,m as resultValue};\n"],"names":["a","r","t","o","l","e","p","c","h","m","f","_","b","s","d","v","n","i","u"],"mappings":"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","x_google_ignoreList":[0]}