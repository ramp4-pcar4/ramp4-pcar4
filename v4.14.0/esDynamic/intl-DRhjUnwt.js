import{s as c,H as $,eP as m}from"./main-CSjwO60s.js";import{m as b,u as g}from"./messages-DQ10DjvF.js";async function y(n,e,t,o){const s=e.exec(t);if(!s)throw new c("esri-intl:invalid-bundle",`Bundle id "${t}" is not compatible with the pattern "${e}"`);const r=s[1]?`${s[1]}/`:"",l=s[2],w=b(o),a=`${r}${l}.json`,h=w?`${r}${l}_${w}.json`:a;let i;try{i=await u(n(h))}catch(f){if(h===a)throw new c("intl:unknown-bundle",`Bundle "${t}" cannot be loaded`,{error:f});try{i=await u(n(a))}catch(p){throw new c("intl:unknown-bundle",`Bundle "${t}" cannot be loaded`,{error:p})}}return i}async function u(n){if(d.fetchBundleAsset!=null)return d.fetchBundleAsset(n);const e=await $(n,{responseType:"text"});return JSON.parse(e.data)}class R{constructor({base:e="",pattern:t,location:o=new URL(window.location.href)}){let s;s=typeof o=="string"?r=>new URL(r,new URL(o,window.location.href)).href:o instanceof URL?r=>new URL(r,o).href:o,this.pattern=typeof t=="string"?new RegExp(`^${t}`):t,this.getAssetUrl=s,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return y(this.getAssetUrl,this.matcher,e,t)}}function U(n){return new R(n)}const d={};g(U({pattern:"esri/",location:m}));
