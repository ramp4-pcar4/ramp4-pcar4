import{o as t,H as u,f as p,g as m,B as s,C as y,W as h,p as f,c as l,$ as T,x as b,h as A,O as g,z as x,i as F,j as P}from"./Dictionary-B0UU8VOj.js";import{n as c}from"./enum-D3e-PyKo.js";import{P as v}from"./shared-DXZ65waB.js";function w(r,o){return r&&r.domain?r.domain.type==="coded-value"||r.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:v[r.field.type],codedValues:r.domain.codedValues.map(e=>({name:e.name,code:e.code}))},l(o)):f.convertObjectToArcadeDictionary({type:"range",name:r.domain.name,dataType:v[r.field.type],min:r.domain.minValue,max:r.domain.maxValue},l(o)):null}function I(r){r.mode==="async"&&(r.functions.domain=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,2,3,o,e),u(a[0]))return w(p(a[0],m(a[1]),a[2]===void 0?void 0:a[2]),o);if(s(a[0]))return await a[0]._ensureLoaded(),w(y(m(a[1]),a[0],null,a[2]===void 0?void 0:a[2]),o);throw new c(o,"InvalidParameter",e)})},r.functions.subtypes=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,1,1,o,e),u(a[0])){const n=h(a[0]);return n?f.convertObjectToArcadeDictionary(n,l(o)):null}if(s(a[0])){await a[0]._ensureLoaded();const n=a[0].subtypeMetaData();return n?f.convertObjectToArcadeDictionary(n,l(o)):null}throw new c(o,"InvalidParameter",e)})},r.functions.domainname=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,2,4,o,e),u(a[0]))return T(a[0],m(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const n=y(m(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return b(n,a[2])}throw new c(o,"InvalidParameter",e)})},r.signatures.push({name:"domainname",min:2,max:4}),r.functions.domaincode=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,2,4,o,e),u(a[0]))return A(a[0],m(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const n=y(m(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return g(n,a[2])}throw new c(o,"InvalidParameter",e)})},r.signatures.push({name:"domaincode",min:2,max:4}),r.functions.text=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,1,2,o,e),s(a[0])){const n=x(a[1],"");if(n==="")return a[0].castToText();if(n.toLowerCase()==="schema")return a[0].convertToText("schema",i.abortSignal);if(n.toLowerCase()==="featureset")return a[0].convertToText("featureset",i.abortSignal);throw new c(o,"InvalidParameter",e)}return F(a[0],a[1])})},r.functions.gdbversion=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,1,1,o,e),u(a[0]))return a[0].gdbVersion();if(s(a[0]))return(await a[0].load()).gdbVersion;throw new c(o,"InvalidParameter",e)})},r.functions.schema=function(o,e){return r.standardFunctionAsync(o,e,async(i,d,a)=>{if(t(a,1,1,o,e),s(a[0]))return await a[0].load(),f.convertObjectToArcadeDictionary(a[0].schema(),l(o));if(u(a[0])){const n=P(a[0]);return n?f.convertObjectToArcadeDictionary(n,l(o)):null}throw new c(o,"InvalidParameter",e)})})}export{I as registerFunctions};
