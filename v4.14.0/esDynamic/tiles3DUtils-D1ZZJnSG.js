import{z as _,ch as d,d4 as A,cS as c,aK as y,az as R}from"./main-CSjwO60s.js";import{c as G,u as m,E as U,s as v,l as z,d as k,R as x}from"./vec32-CI1xtKog.js";import{m as S}from"./HeightModelInfo-Cjals-AI.js";import{o as V}from"./projectBuffer-CMNsPBq1.js";function E(r,M){if(!Array.isArray(r)||r.length<M)return!1;for(const u of r)if(typeof u!="number")return!1;return!0}const I=7645211,N={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850};new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM96_Geoid"}),new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"EGM2008_Geoid"}),new S({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"WGS_1984"}),new S({heightModel:"ellipsoidal",heightUnit:"meters",vertCRS:"ETRS_1989"}),new S({heightModel:"gravity-related-height",heightUnit:"us-feet",vertCRS:"NAVD88_height_(ftUS)"}),new S({heightModel:"gravity-related-height",heightUnit:"meters",vertCRS:"DHHN2016_(height) "});function W(r){return!(!(r.extensions?.ESRI_crs?.wkid||r.extensions?.ESRI_crs?.latestWkid||r.extensions?.ESRI_crs?.wkt)||!r.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!r.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function X(r,M=!1){let u=new _({wkid:4326,vcsWkid:115700}),n=r.root?.boundingVolume,b=!1,g=r?.root?.transform;if(M&&(r.extensions?.ESRI_crs?.wkid||r.extensions?.ESRI_crs?.latestWkid||r.extensions?.ESRI_crs?.wkt)&&(r.root?.extensions?.ESRI_crs?.boundingVolume?.box||r.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))u=new _(r.extensions?.ESRI_crs),n=r.root?.extensions?.ESRI_crs?.boundingVolume,g=r.root?.transform,b=!0;else if(!n)return new d(-180,-90,180,90,u);if(n.box){const t=n?.box;if(t[3]>I&&t[7]>I&&t[11]>I)return new d({...N,spatialReference:u})}const w=R();if(!b&&n.region&&E(n.region,6)){const t=n.region,a=A(t[0]),s=A(t[1]),i=t[4],o=A(t[2]),e=A(t[3]),h=t[5];return new d({xmin:a,ymin:s,zmin:i,xmax:o,ymax:e,zmax:h,spatialReference:u})}if(n.sphere&&E(n.sphere,4)){const t=n.sphere,a=c(t[0],t[1],t[2]),s=t[3]/Math.sqrt(3),i=R();G(i,a,c(s,s,s));const o=R();if(m(o,a,c(s,s,s)),g&&E(g,16)){const f=g;U(w,i,f),v(i,w),U(w,o,f),v(o,w)}b||(V(i,y,0,i,_.WGS84,0),V(o,y,0,o,_.WGS84,0));const e=R(),h=R();return z(e,i,o),k(h,i,o),new d({xmin:e[0],ymin:e[1],zmin:e[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:u})}if(n.box&&E(n.box,12)){const t=n.box,a=c(t[0],t[1],t[2]),s=c(t[3],t[4],t[5]),i=c(t[6],t[7],t[8]),o=c(t[9],t[10],t[11]),e=[];for(let l=0;l<8;++l)e.push(R());if(m(e[0],a,s),m(e[0],e[0],i),m(e[0],e[0],o),x(e[1],a,s),m(e[1],e[1],i),m(e[1],e[1],o),m(e[2],a,s),x(e[2],e[2],i),m(e[2],e[2],o),x(e[3],a,s),x(e[3],e[3],i),m(e[3],e[3],o),m(e[4],a,s),m(e[4],e[4],i),x(e[4],e[4],o),x(e[5],a,s),m(e[5],e[5],i),x(e[5],e[5],o),m(e[6],a,s),x(e[6],e[6],i),x(e[6],e[6],o),x(e[7],a,s),x(e[7],e[7],i),x(e[7],e[7],o),g&&E(g,16)){const l=g;for(let p=0;p<8;++p)U(e[p],e[p],l)}const h=c(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),f=c(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let l=0;l<8;++l)b||V(e[l],y,0,e[l],_.WGS84,0),z(f,f,e[l]),k(h,h,e[l]);return new d({xmin:f[0],ymin:f[1],zmin:f[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:u})}return new d(-180,-90,180,90,u)}export{X as E,W as R};
