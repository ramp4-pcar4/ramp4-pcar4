const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./request-CxC14thO.js","./preload-helper-ExcqyqRp.js","./IdentityManager-D5wphftq.js","./substitute-BZSrxGlj.js","./pe-wasm-DnH2F4DR.js","./ElevationLayer-BGHztcbV.js","./resourceUtils-Cd06xgAt.js","./layersCreator-BRirWqjS.js","./portalLayers-BvrUvbQI.js","./associatedFeatureServiceUtils-BsNzMYjE.js","./fetchService-C5_tuha6.js","./WhereClause-BnfiKfP6.js","./TimeOnly-Dsr-JsNO.js","./arcadeUtils-BrTSK7Eg.js","./languageUtils-2AG_4pxN.js","./ImmutableArray-BPVd6ESQ.js","./shared-QFy6LUS5.js","./number-Cw23x7KN.js","./webStyleSymbolUtils-DsVAxhgW.js","./devEnvironmentUtils-8WtPGj6h.js","./geometryEngineJSON-flfHofBb.js","./geometryEngineBase-CR-T1bpS.js","./arcgisLayers-DhFQ3PQy.js","./statsWorker-CVQavvKU.js","./utils-WXKjHd7r.js","./utils-BaILNRwZ.js","./utils-Ia0JHq5A.js","./geometryEngineWorker-PEejU9fo.js","./CSVSourceWorker-yopWTB25.js","./date-Dw3OHnFv.js","./FeatureStore-CzfmXPch.js","./BoundsStore-tUrjf89o.js","./PooledRBush-CJ15gjhf.js","./timeSupport-B2vaQ9ve.js","./optimizedFeatureQueryEngineAdapter-aWbv-T-e.js","./QueryEngine-C4-yMRkU.js","./QueryEngineCapabilities-DjYb9CEb.js","./clientSideDefaults-3aZS_rIM.js","./capabilities-Y9lFlGVh.js","./EdgeProcessingWorker-Bt8eg2U5.js","./InterleavedLayout-BlDzPNpn.js","./BufferView-xDE7i1_l.js","./types-D0PSWh4d.js","./Util-DC-hA0iR.js","./edgeProcessing-BWAFc7bB.js","./deduplicate-CPSOb3vl.js","./Indices-DNpzAUBy.js","./VertexAttribute-BdZWZuT1.js","./glUtil-U4sbABiJ.js","./VertexElementDescriptor-BOD-G50G.js","./ElevationSamplerWorker-DYngM-2N.js","./MeshLocalVertexSpace-Ccm9OD-k.js","./vertexSpaceConversion-CHUFrMuI.js","./mat3f64-q3fE-ZOt.js","./mat4f64-CSKppSlJ.js","./spatialReferenceEllipsoidUtils-COR8TJia.js","./computeTranslationToOriginAndRotation-CqzkfP_a.js","./projectPointToVector-CNVT78_D.js","./meshVertexSpaceUtils-BIs9wX6x.js","./vec3-BeV4q9m0.js","./vec4-CEpE2bgG.js","./FeatureServiceSnappingSourceWorker-DCi4Gd8Q.js","./GeoJSONSourceWorker-CvEPEwQc.js","./geojson-cyI7fpd0.js","./sourceUtils-CLhjpURl.js","./LercWorker-BB5htouh.js","./MemorySourceWorker-B0m-dx7q.js","./objectIdUtils-BmFjqQA3.js","./PBFDecoderWorker-BYQFS9vE.js","./FeaturePipelineWorker-DdNS6n-m.js","./AttributeStore-B-lwGHaY.js","./LabelMetric-hP-xV4kN.js","./Program-DtvrcJVH.js","./BufferObject-COmOSznC.js","./UpdateTracking2D-BdYdrn9N.js","./BidiEngine-DNnuvc1i.js","./GeometryUtils-B5OGAATT.js","./Rect-CUzevAry.js","./BindType-BmZEZMMh.js","./MeshWriterRegistry-CP6Xua9p.js","./PieChartMeshWriter-CgaGiEL4.js","./TurboLine-BYpQ-lmu.js","./earcut-Lltz9D9k.js","./constants-F8oTIn7N.js","./grouping-CWqqEYFs.js","./ogcFeatureUtils-ChX79jrU.js","./CircularArray-CujHzHWW.js","./createConnection-CUoMuFMi.js","./PointCloudWorker-DCDm3GEV.js","./quat-DOwnX5ja.js","./quatf64-aQ5IuZRd.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-DkCR0bNP.js","./I3SBinaryReader-BI-T3BN4.js","./orientedBoundingBox-Bi-rMYck.js","./plane-D5IY0WGh.js","./RasterWorker-Ce4vx2IR.js","./PolynomialTransform-CjEG9bRt.js","./rasterProjectionHelper-Bt_JRf3B.js","./SceneLayerSnappingSourceWorker-CfO3UnDn.js","./lineSegment-BfWBezZn.js","./sphere-B159EIxN.js","./Octree-npInWkGX.js","./SceneLayerWorker-DcnOWwYl.js","./I3SUtil-CkMHRCVB.js","./projectVectorToVector-BSu_aL0j.js","./floatRGBA-27q1qkUd.js","./NormalAttribute.glsl-DjRHADi9.js","./interfaces-DDtDqZYj.js","./WFSSourceWorker-D8zI1vqg.js","./wfsUtils-rhPS3u4L.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-SA6A9ZbN.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-DxIfDb1I.js","./SourceLayerData-DiL_TVWa.js","./StyleRepository-DlFhRgpD.js","./Lyr3DWorker-DQnNuUZT.js","./HUDMaterial.glsl-BkDpakUf.js","./AttributeArray-Cy_171F7.js","./requestImageUtils-QLfUGmUG.js","./basicInterfaces-CZwQPxTp.js","./boundedPlane-CJ9Hcn7s.js","./renderState-BEdhEqi_.js","./doublePrecisionUtils-B0owpBza.js","./NestedMap-CImDozOA.js","./IntersectorInterfaces-dI_rFEZm.js","./VertexArrayObject-CH1EhbG6.js","./triangle-Bxbkin5g.js","./deleteForwardEdits-Ciof_9QY.js","./DeleteForwardEditsParameters-D-xTFbvK.js","./editingSupport-BS-in8Jo.js","./hydrated-CNDFlMdw.js","./layersLoader-BQoBnH32.js","./jsonContext-CJCtz3WJ.js","./featureLayerUtils-CXdSKEwo.js","./originUtils-CPX8CCAY.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./utils-CkW7zLh1.js","./saveUtils-CixRxS1p.js","./FeatureLayerSource-Bgd4qQEJ.js","./External-B8rgyr5I.js","./MeshTransform-BLMEpOmz.js","./symbolLayerUtils-Lk0Wvm1V.js","./lerc-wasm-3vP2r1Bm.js","./imageryUtils-kMJsMCvA.js","./meshFeatureSet-CiDlu10-.js","./Mesh-Bv-2K1Wq.js","./MeshVertexAttributes-GcBoQb_L.js","./meshFeatureAttributes-ONKV9ZFH.js","./executeRelationshipQuery-SdaJx6qO.js","./queryAttachments-DubZ2bXZ.js","./executeBinsQuery-Okh69pCJ.js","./executeTopFeaturesQuery-CcxSDgVt.js","./queryTopFeatures-DQ6-KiWa.js","./executeForTopIds-C4ys4Eig.js","./executeForTopExtents-C_4uawZ7.js","./executeForTopCount-D33Dv6pr.js","./ElevationQuery-Dl3OvGlG.js","./Popup-DFpVA4I4.js","./ReactiveSet-NHcOZxLD.js","./layerViewUtils-CKW6QWO-.js","./geometryServiceUtils-CzF7G2bf.js","./project-CKgVSa41.js","./webglDeps-CHJXL6Ld.js","./ProgramTemplate-D4pS209o.js","./mapViewDeps-BA7GJ9gA.js","./FeatureCommandQueue-DmpjJglh.js","./WGLContainer-lo2WWuxf.js","./Container-YB8BBMjE.js","./SDFHelper-D3jYOu-4.js","./GridShader-LwOOXSXK.js","./testSVGPremultipliedAlpha-BRs916jT.js","./RenderingContext-BpNCSl--.js","./rasterizingUtils-BEKtHNCS.js","./utils-B9PAHbeD.js","./GraphicsView2D-D-uHr-64.js","./normalizeUtilsSync-DB6gw0HN.js","./GraphicContainer-D1tkPzFa.js","./AGraphicContainer-CQIXTHKl.js","./TechniqueInstance-CfXcGkOf.js","./TileContainer-Da-C8_CP.js","./geodesicUtils-DsL_i5rS.js","./TileLayerView2D-CG7CzoZW.js","./imageUtils-8SkE3h_K.js","./Bitmap-h8EKm8jv.js","./LayerView-Ck3mR3vt.js","./HighlightGraphicContainer-D6ULYfwE.js","./RefreshableLayerView-BD7EM3Zi.js","./MapServiceLayerViewHelper-CpvAd23b.js","./drapedUtils-DptJpZb-.js","./popupUtils-CJBtuwUc.js","./FeatureLayerView2D-B2YOjOGO.js","./timeSupport-Bj-pNdJN.js","./HighlightCounter-Czi-fdpx.js","./BaseDynamicLayerView2D-sAaOCzXn.js","./BitmapContainer-DXcwmg6z.js","./ExportStrategy-Bb4dR6V6.js","./CatalogLayerView2D-B1CvLTPk.js","./CatalogDynamicGroupLayerView2D-C89SnkxV.js","./CatalogFootprintLayerView2D-C1HOs0Iw.js","./GeoRSSLayerView2D-BlHeDPxa.js","./GraphicsLayerView2D-CbBnD7ma.js","./GroupLayerView2D-BIuZR21U.js","./ImageryLayerView2D-BYDDKnf2.js","./RasterVFDisplayObject-CCpElCRq.js","./ImageryTileLayerView2D-Ru8iKdxz.js","./rasterUtils-BWvY3YI6.js","./RawBlockCache-Cn8E85yi.js","./KMLLayerView2D-D86d-lM4.js","./kmlUtils-Dg4k7CIQ.js","./KnowledgeGraphLayerView2D-Cpx2PEuo.js","./MapImageLayerView2D-D2Y1TZXG.js","./MapNotesLayerView2D-DgmS4MSJ.js","./MediaLayerView2D-CQp7XD4P.js","./perspectiveUtils-BQl6IPOA.js","./OverlayContainer-PVp4xQ5D.js","./OGCFeatureLayerView2D-vvDDY9fW.js","./RouteLayerView2D-D-SWm0b_.js","./Stop-dPfGFcCx.js","./StreamLayerView2D-CM35_FbH.js","./SubtypeGroupLayerView2D-CdIcD5u1.js","./VectorTileLayerView2D-Dzu1vxGN.js","./VideoLayerView2D-a8v0ftgx.js","./TelemetryDisplay-B9YjPslS.js","./WMSLayerView2D-BFsJX4df.js","./WMTSLayerView2D-CH80yv0E.js","./gif-G0km9A3U.js","./apng-DjUnDj3O.js","./calcite-button-CzVpsj1P.js","./form-CbEo2-gZ.js","./dom-BveoWHh2.js","./interactive-X5qh1pMR.js","./label-DUBOb5uX.js","./component-6CIDVndn.js","./loadable-Cke1-LBn.js","./locale-C-xhObPn.js","./key-D63ExP77.js","./observers-6JxPSAhd.js","./t9n-CieGzYHm.js","./icon-DfpYhXDr.js","./loader-DzymtyZb.js","./guid-BxSjQh8J.js","./calcite-icon-DzcqWTO2.js","./shp.min-DPqiq-kn.js","./_commonjs-dynamic-modules-TDtrdbi3.js","./jszip.min-BCMfXGdl.js","./index-B-hGt9u3.js","./index-carWiDED.css","./index-BxcF2rm5.js","./screen.vue_vue_type_script_setup_true_lang-CPi3jZvm.js","./screen-Cea9pofX.css","./index-CeG679i5.js","./index-DHebMCZa.js","./index-Ctc7h-US.css","./index-qyNAGExa.js","./hilight-defs-CqXQYtIh.js","./index-CvQFTMTb.js","./fabric-DmoNkA7d.js","./index-KrSzqvbR.js","./index-BEVSVFaz.js","./index-DhojNK45.js","./index-L--U6_kC.js","./index-Dha6vOU_.js","./index-3Vn9gKsB.js","./index-DVMrXndI.js","./screen.vue_vue_type_script_setup_true_lang-BuEZ3aZF.js","./index-DCCDwarA.js","./index-BBwzOXRO.js","./index-BnpHkGff.js","./index-BqB_LaSy.js","./table-state-manager-D0AQ-RaE.js","./index-sDErnGaa.js","./index-BT2i9fnH.js","./index-rzM0Qtgg.js","./index-BcO6TbIC.js","./index-PY8PCBWD.js","./index-CTZ1kO0r.css","./index-Bxc3uaOz.js","./index-CokotBHm.js","./index-DrkQhNIu.js","./index-C6ufsCCa.css","./index-FoybaFA8.js","./index-nDri3W3u.css","./index-CUHsIO2I.js","./index-Dti23dwS.css","./index-BHmFUj4Y.js","./index-Cum5qKUJ.js","./index-DKwQRnDJ.js","./screen-Drm_y4Dn.js","./screen-BUkjh5GX.js","./screen-B_KOI8ka.css","./screen-l038elOg.js","./screen-LS9IskPR.js","./screen-CwbtZ41W.css","./screen-S3enEgLd.js","./screen-CLnp2sCe.css","./screen-Kk0Q_TzR.js","./marked.esm-DmSrlTiT.js","./screen-DcX-wckC.css","./screen-2yFcmf47.js","./index-CmWv5boU.js","./screen-DH2W8SRu.css","./screen-S1c-G6A0.js","./screen-DhxlZLDh.js","./screen-CkXxljnt.css","./screen-DUxGnDN3.js","./toggle-switch-control-oD1UE0VS.js","./toggle-switch-control-CXkTZWA3.css","./screen-DdmnHAye.css","./screen-y0s1N7Nq.js","./screen-B2WUoMR7.css"])))=>i.map(i=>d[i]);
import{_ as ce}from"./preload-helper-ExcqyqRp.js";var $h=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))($h||{}),Bc=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(Bc||{}),yo=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(yo||{}),BK=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(BK||{}),zK=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(zK||{}),qK=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(qK||{}),Vt=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(Vt||{}),i$=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(i$||{}),ft=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.GEOJSONZIPPED="file-zip-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.FLATGEOBUF="file-fgb",e.FLATGEOBUFZIPPED="file-zip-fgb",e.OSM="osm-tile",e.DATACSV="data-csv",e.DATAJSON="data-json",e.DATATABLE="data-esri-table",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(ft||{}),wa=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.NOLAYER="no-layer",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(wa||{}),Gs=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(Gs||{}),Mr=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(Mr||{}),rs=(e=>(e.GEOMETRIC="geometric",e.SYMBOLIC="symbolic",e.HYBRID="hybrid",e.NONE="none",e))(rs||{}),rr=(e=>(e.NEW="new",e.INITIATING="initiating",e.INITIATED="initiated",e.TERMINATING="terminating",e.TERMINATED="terminated",e))(rr||{}),Ar=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(Ar||{}),xo=(e=>(e.NOT_LOADED="not-loaded",e.NOT_VISUAL="not-visual",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(xo||{}),Ev=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(Ev||{}),Hn=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.INITIAL="initial",e.API="api",e.PERMANENT="permanent",e))(Hn||{}),Lr=(e=>(e.BoundaryZoom="boundaryZoom",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(Lr||{});class su{attributes;geometry;style;id;constructor(t,i,r){this.geometry=t,i?this.id=i:this.id=s1.sharedUtils.generateUUID(),r?this.attributes=r:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}function c(e,t,i,r){var s,n=arguments.length,o=n<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o}function elt(e,t){return function(i,r){t(i,r,e)}}function tlt(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(h){try{u(r.next(h))}catch(p){o(p)}}function l(h){try{u(r.throw(h))}catch(p){o(p)}}function u(h){h.done?n(h.value):s(h.value).then(a,l)}u((r=r.apply(e,[])).next())})}let $d;function le(e){return typeof $d[e]=="function"?$d[e]=$d[e](globalThis):$d[e]}$d=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},le.add=(e,t,i,r)=>{(r||$d[e]===void 0)&&($d[e]=t),i&&le(e)},le.cache=$d,le.add("big-integer-warning-enabled",!0),le.add("esri-deprecation-warnings",!0),le.add("esri-tests-disable-screenshots",!1),le.add("esri-tests-use-full-window",!1),le.add("esri-tests-post-to-influx",!0),le.add("esri-cim-animations-enable-status","enabled"),le.add("esri-cim-animations-spotlight",!1),le.add("esri-cim-animations-freeze-time",!1),le.add("enable-feature:multiple-highlights",!1),(()=>{le.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(le.add("host-browser",e),le.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),le.add("dom",e),le("host-browser")){const t=navigator,i=t.userAgent,r=t.appVersion,s=parseFloat(r);if(le.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),le.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),le.add("khtml",r.includes("Konqueror")?s:void 0),le.add("edge",parseFloat(i.split("Edge/")[1])||void 0),le.add("opr",parseFloat(i.split("OPR/")[1])||void 0),le.add("webkit",!le("wp")&&!le("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),le.add("chrome",!le("edge")&&!le("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),le.add("android",!le("wp")&&parseFloat(i.split("Android ")[1])||void 0),le.add("safari",!r.includes("Safari")||le("wp")||le("chrome")||le("android")||le("edge")||le("opr")?void 0:parseFloat(r.split("Version/")[1])),le.add("mac",r.includes("Macintosh")),!le("wp")&&/(iPhone|iPod|iPad)/.test(i)){const n=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(i)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));le.add(n,a),le.add("ios",a)}le("webkit")||(!i.includes("Gecko")||le("wp")||le("khtml")||le("edge")||le.add("mozilla",s),le("mozilla")&&le.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),i=/iPhone/i.test(e);t&&le.add("esri-mobile",t),i&&le.add("esri-iPhone",i),le.add("esri-geolocation",!!navigator.geolocation)}le.add("esri-wasm","WebAssembly"in globalThis),le.add("esri-performance-mode-frames-between-render",20),le.add("esri-force-performance-mode",!1),le.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),le.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),le.add("esri-atomics","Atomics"in globalThis),le.add("esri-workers","Worker"in globalThis),le.add("web-feat:cache","caches"in globalThis),le.add("esri-workers-arraybuffer-transfer",!le("safari")||Number(le("safari"))>=12),le.add("workers-pool-size",8),le.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),le.add("featurelayer-simplify-payload-size-factors",[1,1,4]),le.add("featurelayer-fast-triangulation-enabled",!0),le.add("featurelayer-animation-enabled",!0),le.add("featurelayer-snapshot-enabled",!0),le.add("featurelayer-snapshot-point-min-threshold",8e4),le.add("featurelayer-snapshot-point-max-threshold",4e5),le.add("featurelayer-snapshot-point-coverage",.1),le.add("featurelayer-query-max-depth",4),le.add("featurelayer-query-pausing-enabled",!1),le.add("featurelayer-advanced-symbols",!1),le.add("featurelayer-pbf",!0),le.add("featurelayer-pbf-statistics",!1),le.add("feature-layers-workers",!0),le.add("feature-polyline-generalization-factor",1),le.add("mapview-transitions-duration",200),le.add("mapview-essential-goto-duration",200),le.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),le.add("mapserver-pbf-version-support",10.81),le.add("mapservice-popup-identify-max-tolerance",20),le("host-webworker")||le("host-browser")&&(le.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),le.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{le.add("esri-image-decode",!0,!0,!0)}).catch(()=>{le.add("esri-image-decode",!1,!0,!0)})}return!1}),le.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let Mv=class om{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*om._m}getInt(){return this._seed=(om._a*this._seed+om._c)%om._m,this._seed}getFloat(){return this.getInt()/(om._m-1)}getIntRange(t,i){return Math.round(this.getFloatRange(t,i))}getFloatRange(t,i){const r=i-t;return t+this.getInt()/om._m*r}};Mv._m=2147483647,Mv._a=48271,Mv._c=0;const $me=1.5,ilt=1/$me,rlt=.5;function slt(e,t){return t?e.filter((i,r,s)=>s.findIndex(t.bind(null,i))===r):Array.from(new Set(e))}function r$(e,t,i){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(i){for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function oU(e,t,i){let r,s;return i?(r=t.filter(n=>!e.some(o=>i(o,n))),s=e.filter(n=>!t.some(o=>i(o,n)))):(r=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:r,removed:s}}function nlt(e){return e&&typeof e.length=="number"}let HK=class{constructor(){this.last=0}};const WK=new HK;function fO(e,t,i,r){r=r||WK;const s=Math.max(0,r.last-10);for(let o=s;o<i;++o)if(e[o]===t)return r.last=o,o;const n=Math.min(s,i);for(let o=0;o<n;++o)if(e[o]===t)return r.last=o,o;return-1}function Cme(e,t,i,r){const s=e.length,n=fO(e,t,s,r);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const dl=new Set;function Rme(e,t,i=e.length,r=t.length,s,n){if(r===0||i===0)return i;dl.clear();for(let a=0;a<r;++a)dl.add(t[a]);s=s||WK;const o=Math.max(0,s.last-10);for(let a=o;a<i;++a)if(dl.has(e[a])&&(n?.push(e[a]),dl.delete(e[a]),e[a]=e[i-1],--i,--a,dl.size===0||i===0))return dl.clear(),i;for(let a=0;a<o;++a)if(dl.has(e[a])&&(n?.push(e[a]),dl.delete(e[a]),e[a]=e[i-1],--i,--a,dl.size===0||i===0))return dl.clear(),i;return dl.clear(),i}function alt(e,t){let i=0;for(let r=0;r<e.length;++r){const s=e[r];t(s,r)&&(e[i]=s,i++)}e.length=i}function JK(e){return e?(aU.seed=e,()=>aU.getFloat()):Math.random}function ZK(e,t){const i=JK(t);for(let r=e.length-1;r>0;r--){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}return e}const aU=new Mv;function YK(e,t){const i=e.indexOf(t);return i!==-1?(e.splice(i,1),t):null}function ko(e,t){return e!=null}function KK(e){return 32+e.length}function Y6(){return 16}function llt(e){if(!e)return 0;let t=QK;for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];switch(typeof r){case"string":t+=KK(r);break;case"number":t+=Y6();break;case"boolean":t+=4}}return t}function Ome(e){if(!e)return 0;if(Array.isArray(e))return Pme(e);let t=QK;for(const i in e)e.hasOwnProperty(i)&&(t+=XK(e[i]));return t}function Pme(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let i=eX;for(let r=0;r<t;r++)i+=XK(e[r]);return i}function XK(e){switch(typeof e){case"object":return Ome(e);case"string":return KK(e);case"number":return Y6();case"boolean":return 4;default:return 8}}function Lme(e,t){return eX+e.length*t}const QK=32,eX=16;function ult(e){return e instanceof ArrayBuffer}function K6(e){return e?.constructor?.name==="Int8Array"}function tX(e){return e?.constructor?.name==="Uint8Array"}function iX(e){return e?.constructor?.name==="Uint8ClampedArray"}function X6(e){return e?.constructor?.name==="Int16Array"}function rX(e){return e?.constructor?.name==="Uint16Array"}function Q6(e){return e?.constructor?.name==="Int32Array"}function sX(e){return e?.constructor?.name==="Uint32Array"}function s$(e){return e?.constructor?.name==="Float32Array"}function n$(e){return e?.constructor?.name==="Float64Array"}function nX(e){return!("buffer"in e)}function Nme(...e){return e.reduce((t,i)=>t+(i?nX(i)?Lme(i,Y6()):i.byteLength+kme:0),0)}const kme=145,eF=1024;function clt(e){return n$(e)||s$(e)||Q6(e)||X6(e)||K6(e)}function hlt(e){return n$(e)||s$(e)}function plt(e){return n$(e)?179769e303:s$(e)?3402823e32:sX(e)?4294967295:rX(e)?65535:tX(e)||iX(e)?255:Q6(e)?2147483647:X6(e)?32767:K6(e)?127:256}function Dme(e,t){let i;for(i in e)e.hasOwnProperty(i)&&e[i]===void 0&&delete e[i];return e}function K(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=lX(e);if(t!=null)return t;if(VI(e))return e.clone();if(oX(e))return e.map(K);if(aX(e))return e.clone();const i={};for(const r of Object.getOwnPropertyNames(e))i[r]=K(e[r]);return i}function mO(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=lX(e);if(t!=null)return t;if(oX(e)){let i=!0;const r=e.map(s=>{const n=mO(s);return s!=null&&n==null&&(i=!1),n});return i?r:null}if(VI(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!aX(e)){const i=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const s=e[r],n=mO(s);if(s!=null&&n==null)return null;i[r]=n}return i}return null}function VI(e){return typeof e.clone=="function"}function oX(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function aX(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function lU(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function lX(e){if(K6(e)||tX(e)||iX(e)||X6(e)||rX(e)||Q6(e)||sX(e)||s$(e)||n$(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[i,r]of e)t.set(i,K(r));return t}if(e instanceof Set){const t=new Set;for(const i of e)t.add(K(i));return t}return null}function tF(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof e?.getTime=="function"&&typeof t?.getTime=="function"&&e.getTime()===t.getTime()||!1}function uX(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&r$(e,t):e instanceof Set?t instanceof Set&&jme(e,t):e instanceof Map?t instanceof Map&&Ume(e,t):!!lU(e)&&lU(t)&&Fme(e,t))}function Fme(e,t){if(e===null||t===null)return!1;const i=Object.keys(e);if(t===null||Object.keys(t).length!==i.length)return!1;for(const r of i)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function jme(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Ume(e,t){if(e.size!==t.size)return!1;for(const[i,r]of e){const s=t.get(i);if(s!==r||s===void 0&&!t.has(i))return!1}return!0}function iF(e,t,i=!1){return hX(e,t,i)}function o$(e,t){if(t!=null)return t[e]||cX(e.split("."),!1,t)}function Zr(e,t,i){const r=e.split("."),s=r.pop(),n=cX(r,!0,i);n&&s&&(n[s]=t)}function uU(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const i=t;if(e.length!==i.length)return!0;for(let r=0;r<e.length;r++)if(uU(e[r],i[r]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in e)if(uU(e[i],t[i]))return!0;return!1}return e!==t}function cX(e,t,i){let r=i;for(const s of e){if(r==null)return;if(!(s in r)){if(!t)return;r[s]={}}r=r[s]}return r}function hX(e,t,i){return t?Object.keys(t).reduce((r,s)=>{let n=r[s],o=t[s];return n===o?r:n===void 0?(r[s]=K(o),r):(Array.isArray(o)||Array.isArray(r)?(n=n?Array.isArray(n)?r[s]=n.slice():r[s]=[n]:r[s]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{n.includes(a)||n.push(a)}):r[s]=o.slice())):o&&typeof o=="object"?r[s]=hX(n,o,i):r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[s]=o),r)},e||{}):e}const Kt={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(iF(Kt,globalThis.esriConfig,!0),delete Kt.has),!Kt.assetsPath){{const e="4.31";Kt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Kt.defaultAssetsPath=Kt.assetsPath}const Vme=/\{([^}]+)\}/g;function cU(e){return e??""}function a$(e,t){return t?e.replaceAll(Vme,typeof t=="object"?(i,r)=>cU(o$(r,t)):(i,r)=>cU(t(r))):e}function dlt(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,i=>t?.includes(i)?i:`\\${i}`)}function pX(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}let hU;function flt(e){return hU??=new DOMParser,hU.parseFromString(e||"","text/html").body.innerText||""}function mlt(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const pU={info:0,warn:1,error:2,none:3};let xe=class Ho{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Ho._loggers.set(this.module,this);const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=Ho.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,Ho._loggers.get(t)||new Ho({module:t})}_log(t,i,...r){if(this._matchLevel(t)){if(i!=="always"&&!Ho._throttlingDisabled){const s=Bme(r),n=this._loggedMessages[t].get(s);if(i==="once"&&n!=null||i==="oncePerTick"&&n&&n>=Ho._tickCounter)return;this._loggedMessages[t].set(s,Ho._tickCounter),Ho._scheduleTickCounterIncrement()}for(const s of Kt.log.interceptors)if(s(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,i){let r=this;for(;r!=null;){const s=r[t];if(s!=null)return s;r=r.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",Gme)}_matchLevel(t){const i=Kt.log.level||"warn";return pU[this._parentWithMember("level",i)]<=pU[t]}static _scheduleTickCounterIncrement(){Ho._tickCounterScheduled||(Ho._tickCounterScheduled=!0,Promise.resolve().then(()=>{Ho._tickCounter++,Ho._tickCounterScheduled=!1}))}};function Gme(e,t,...i){console[e](`[${t}]`,...i)}function Bme(...e){return pX(JSON.stringify(e,(i,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}xe._loggers=new Map,xe._tickCounter=0,xe._tickCounterScheduled=!1,xe._throttlingDisabled=!1;function zme(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(i,r)=>r===""?"$":(o$(r,t)??"").toString())}let dX=class{constructor(t,i,r=void 0){this.name=t,this.details=r,this.message=(i&&zme(i,r))??""}toString(){return"["+this.name+"]: "+this.message}},W=class fX extends dX{constructor(t,i,r){super(t,i,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return K(i)}catch{return"[object]"}}))}}catch(t){throw xe.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new fX(t.name,t.message,t.details)}};W.prototype.type="error";const dU=new WeakMap;function qme(e,t,i=!1){const r=`🛑 DEPRECATED - ${t}`;if(!i)return void e.warn(r);let s=dU.get(e);s||(s=new Set,dU.set(e,s)),s.has(t)||(s.add(t),e.warn(r))}function mX(e,t,i={}){if(le("esri-deprecation-warnings")){const{moduleName:r}=i;R2(e,`Function: ${(r?r+"::":"")+t+"()"}`,i)}}function Hme(e,t,i={}){if(le("esri-deprecation-warnings")){const{moduleName:r}=i;R2(e,`Property: ${(r?r+"::":"")+t}`,i)}}function Wme(e,t,i={}){le("esri-deprecation-warnings")&&R2(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...i})}function R2(e,t,i={}){if(le("esri-deprecation-warnings")){const{replacement:r,version:s,see:n,warnOnce:o}=i;let a=t;r&&(a+=`
	🛠️ Replacement: ${r}`),s&&(a+=`
	⚙️ Version: ${s}`),n&&(a+=`
	🔗 See ${n} for more details.`),qme(e,a,o)}}function glt(e){const t=[];return function*(){yield*t;for(const i of e)t.push(i),yield i}}function Jme(e,t){for(const i of e)if(i!=null&&t(i))return i}function GI(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let Z1=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(i=>{t+=i.length}),t}add(t,i){if(GI(t)){const r=this._getOrCreateGroup(i);for(const s of t)mU(s)&&r.push(s)}else mU(t)&&this._getOrCreateGroup(i).push(t);return this}forEach(t,i){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&i&&r.forEach(i)}}has(t){return this._groups.has(tT(t))}remove(t){if(typeof t!="string"&&GI(t)){for(const i of t)this.remove(i);return this}return this.has(t)?(fU(this._getGroup(t)),this._groups.delete(tT(t)),this):this}removeAll(){return this._groups.forEach(fU),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const i=[];return this._groups.set(tT(t),i),i}_getGroup(t){return this._groups.get(tT(t))}};function tT(e){return e||"_default_"}function fU(e){for(const t of e)t instanceof Z1?t.removeAll():t.remove()}function mU(e){return e!=null&&(!!e.remove||e instanceof Z1)}function jd(e,t){if(e==null)throw new Error(t??"value is None")}function Wi(e){return e?.destroy(),null}function blt(e){return e?.dispose(),null}function Yi(e){return e?.remove(),null}function O2(e){return e?.abort(),null}function wlt(e){return e?.release(),null}function Zme(e,t,i){return e!=null&&t!=null?i!=null?i(e,t):e.equals(t):e===t}function Yme(e,t){let i;return e.some((r,s)=>(i=t(r,s),i!=null)),i??void 0}const yX=Symbol("Accessor-beforeDestroy"),Kme={remove:()=>{}};function ti(e){return e?{remove(){e&&(e(),e=void 0)}}:Kme}function Xme(e){e.forEach(t=>t?.remove())}function jS(e){return ti(()=>Xme(e))}function _lt(e){return ti(()=>e?.abort())}function Slt(e){return ti(e!=null?()=>e.destroy():void 0)}function Is(e){return e.__accessor__??null}function Qme(e,t){return e?.metadata?.[t]!=null}function VE(e,t,i){return i?BI(e,t,{policy:i,path:""}):BI(e,t,null)}function BI(e,t,i){return t?Object.keys(t).reduce((r,s)=>{const n=s;let o=null,a="merge";if(i&&(o=i.path?`${i.path}.${s}`:s,a=i.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[n]))return r[n]=t[n],r;if(r[n]===void 0)return r[n]=K(t[n]),r;let l=r[n],u=t[n];if(l===u)return r;if(Array.isArray(u)||Array.isArray(r))l=l?Array.isArray(l)?r[n]=l.slice():r[n]=[l]:r[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(h=>{l.includes(h)||l.push(h)}));else if(u&&typeof u=="object")if(i){const h=i.path;i.path=o,r[n]=BI(l,u,i),i.path=h}else r[n]=BI(l,u,null);else r.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(r[n]=u);return r},e||{}):e}function gX(e){return Array.isArray(e)?e:e.split(".")}function yU(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function eye(e){if(Array.isArray(e)){const t=[];for(const i of e)t.push(...yU(i));return t}return yU(e)}function vX(e,t,i,r){const s=eye(t);if(s.length!==1){const n=s.map(o=>r(e,o,i));return jS(n)}return r(e,s[0],i)}function bX(e,t){const i=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const r=Is(t);return Qme(r,i)?r.get(i):t[i]}function wX(e,t,i){if(e==null)return e;const r=bX(t[i],e);return!r&&i<t.length-1?void 0:i===t.length-1?r:wX(r,t,i+1)}function US(e,t,i=0){return typeof t!="string"||t.includes(".")?wX(e,gX(t),i):bX(t,e)}function Xl(e,t){return US(e,t)}function gU(e,t){return US(t,e)!==void 0}var wo;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(wo||(wo={}));function VS(e){let t=e.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!i){t=Object.create(t);for(const r in t)t[r]=K(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function l$(e,t){const i=VS(e);let r=i[t];return r||(r=i[t]={}),r}function tye(e,t){return VE(e,t,rye)}const iye=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function rye(e){return iye.test(e)?"replace":"merge"}function sye(e){return e?.release&&typeof e.release=="function"}function nye(e){return e?.acquire&&typeof e.acquire=="function"}let pf=class yO{constructor(t,i,r,s=1,n=0){this._ctor=t,this._acquireFunction=i,this._releaseFunction=r,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n;for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let i;if(yO.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let s=0;s<r;s++)this._pool[s]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...t):nye(i)&&i.acquire(...t),i}release(t){t&&!yO.test.disabled&&(this._releaseFunction?this._releaseFunction(t):sye(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let i=t;i<this._pool.length;++i){const r=this._pool[i];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};pf.test={disabled:!1};let oye=class{constructor(t,i){this._observers=t,this._observer=i}remove(){YK(this._observers,this._observer)}},_X=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return aye;this._observers==null&&(this._observers=[]);const i=this._observers;let r=!1,s=!1;const n=i.length;for(let o=0;o<n;++o){const a=i[o];if(a.destroyed)s=!0;else if(a===t){r=!0;break}}return r||(i.push(t),s&&this._removeDestroyedObservers()),new oye(i,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const i=t.length;let r=0;for(let s=0;s<i;++s){for(;s+r<i&&t[s+r].destroyed;)++r;if(r>0){if(!(s+r<i))break;t[s]=t[s+r]}}t.length=i-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const i of t)i.onCommitted();this._observers=null}}};const aye=ti();var je;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(je||(je={}));const gO=je.USER+1;function Yn(e){switch(e){case"defaults":return je.DEFAULTS;case"service":return je.SERVICE;case"portal-item":return je.PORTAL_ITEM;case"web-scene":return je.WEB_SCENE;case"web-map":return je.WEB_MAP;case"link-chart":return je.LINK_CHART;case"user":return je.USER;default:return null}}function P2(e){switch(e){case je.DEFAULTS:return"defaults";case je.SERVICE:return"service";case je.PORTAL_ITEM:return"portal-item";case je.WEB_SCENE:return"web-scene";case je.WEB_MAP:return"web-map";case je.LINK_CHART:return"link-chart";case je.USER:return"user"}}function lye(e){return P2(e)}var fi;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(fi||(fi={}));let u$=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){this.accessed?.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};const zI=new u$,yw=[];let N_=zI;function ht(e){N_.onAccessed(e)}let GE=!1,BE=!1;function Qh(e,t,i){if(GE)return rF(e,t,i);let r=null;return SX(e),r=t.call(i),xX(),r}function uye(e,t){return Qh(zI,e,t)}function rF(e,t,i){const r=GE;GE=!0,SX(e);let s=null;try{s=t.call(i)}catch(n){BE&&xe.getLogger("esri.core.accessorSupport.tracking").error(n)}return xX(),GE=r,s}function SX(e){N_=e,yw.push(e)}function xX(){const e=yw.length;if(e>1){const t=yw.pop();N_=yw[e-2],t.onTrackingEnd()}else if(e===1){const t=yw.pop();N_=zI,t.onTrackingEnd()}else N_=zI}function TX(e,t){if(t.flags&fi.DepTrackingInitialized)return;t.flags|=fi.DepTrackingInitialized;const i=BE;BE=!1,t.flags&fi.AutoTracked?rF(t.trackingTarget,t.metadata.get,e):EX(e,t),BE=i}const cye=[];function EX(e,t){t.flags&fi.ExplicitlyTracking||(t.flags|=fi.ExplicitlyTracking,rF(t.trackingTarget,()=>{const i=t.metadata.dependsOn||cye;for(const r of i)if(typeof r!="string"||r.includes(".")){const s=gX(r);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=vU(o,s[n],n!==s.length-1)}else vU(e,r,!1)}),t.flags&=~fi.ExplicitlyTracking)}function vU(e,t,i){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=Is(e);if(s){const n=s.propertiesByName.get(r);n&&(ht(n),TX(e,n))}return i?e[r]:void 0}let bU=class extends _X{constructor(t,i){super(),this.propertyName=t,this.metadata=i,this.trackingTarget=new u$(this),this.flags=0,this.flags=fi.Dirty|(i.nonNullable?fi.NonNullable:0)|(i.hasOwnProperty("value")?fi.HasDefaultValue:0)|(i.get===void 0?fi.DepTrackingInitialized:0)|(i.dependsOn===void 0?fi.AutoTracked:0)}destroy(){this.flags&fi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(t){t.mutable&&ht(this);const i=t.store,r=this.propertyName,s=this.flags,n=i.get(r);if(s&fi.Computing||~s&fi.Dirty&&i.has(r))return n;this.flags|=fi.Computing;const o=t.host;let a;s&fi.AutoTracked?a=Qh(this.trackingTarget,this.metadata.get,o):(EX(o,this),a=this.metadata.get.call(o)),this.flags|=fi.DepTrackingInitialized,i.set(r,a,je.COMPUTED);const l=i.get(r);return l===n?this.flags&=~fi.Dirty:uye(this.commit,this),this.flags&=~fi.Computing,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~fi.Dirty,this.onCommitted()}onInvalidated(){~this.flags&fi.Overridden&&(this.flags|=fi.Dirty);const t=this._observers;if(t&&t.length>0)for(const i of t)i.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onCommitted()}}},hye=class MX{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new MX;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,K(r))}),i}get(t){return this._values.get(t)}originOf(){return je.USER}keys(){return[...this._values.keys()]}set(t,i){this._values.set(t,i)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function iT(e,t,i){return e!==void 0}function wU(e,t,i,r){return e!==void 0&&(!(i==null&&e.flags&fi.NonNullable)||(r.lifecycle,wo.INITIALIZING,!1))}let pye=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=wo.INITIALIZING,this.store=new hye,this.mutable=!0,this._origin=je.USER;const i=this.host.constructor.__accessorMetadata__;for(const r in i){const s=new bU(r,i[r]);this.propertiesByName.set(r,s)}this.metadata=i}initialize(){this.lifecycle=wo.CONSTRUCTING}constructed(){this.lifecycle=wo.CONSTRUCTED}destroy(){this.lifecycle=wo.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==wo.INITIALIZING}get(t){const i=this.propertiesByName.get(t);if(i.metadata.get)return i.getComputed(this);this.mutable&&ht(i);const r=this.store;return r.has(t)?r.get(t):i.metadata.value}originOf(t){const i=this.store.originOf(t);if(i===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&fi.HasDefaultValue)return"defaults"}return P2(i)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const i=this.propertiesByName.get(t);if(iT(i))return this.store.has(t)?this.store.get(t):i.metadata.value}internalSet(t,i){const r=this.propertiesByName.get(t);iT(r)&&this._internalSet(r,i)}getDependsInfo(t,i,r){const s=this.propertiesByName.get(i);if(!iT(s))return"";const n=new u$,o=Qh(n,()=>s.metadata.get?.call(t));let a=`${r}${t.declaredClass.split(".").pop()}.${i}: ${o}
`;const l=n.accessed??new Set;if(l.size===0)return a;r+="  ";for(const u of l)u instanceof bU&&(a+=`${r}${u.propertyName}: undefined
`);return a}setAtOrigin(t,i,r){const s=this.propertiesByName.get(t);if(iT(s))return this._setAtOrigin(s,i,r)}isOverridden(t){const i=this.propertiesByName.get(t);return i!==void 0&&!!(i.flags&fi.Overridden)}clearOverride(t){const i=this.propertiesByName.get(t);i&&i.flags&fi.Overridden&&(i.flags&=~fi.Overridden,i.notifyChange())}override(t,i){const r=this.propertiesByName.get(t);if(!wU(r,t,i,this))return;const s=r.metadata.cast;if(s){const n=this._cast(s,i),{valid:o,value:a}=n;if(R5.release(n),!o)return;i=a}r.flags|=fi.Overridden,this._internalSet(r,i)}set(t,i){const r=this.propertiesByName.get(t);if(!wU(r,t,i,this))return;const s=r.metadata.cast;if(s){const o=this._cast(s,i),{valid:a,value:l}=o;if(R5.release(o),!a)return;i=l}const n=r.metadata.set;n?n.call(this.host,i):this._internalSet(r,i)}setDefaultOrigin(t){this._origin=Yn(t)}getDefaultOrigin(){return P2(this._origin)}notifyChange(t){const i=this.propertiesByName.get(t);i!==void 0&&i.notifyChange()}invalidate(t){const i=this.propertiesByName.get(t);i!==void 0&&i.invalidate()}commit(t){const i=this.propertiesByName.get(t);i!==void 0&&i.commit()}_internalSet(t,i){const r=this.lifecycle!==wo.INITIALIZING?this._origin:je.DEFAULTS;this._setAtOrigin(t,i,r)}_setAtOrigin(t,i,r){const s=this.store,n=t.propertyName;s.has(n,r)&&tF(i,s.get(n))&&~t.flags&fi.Overridden&&r===s.originOf(n)||(t.invalidate(),s.set(n,i,r),t.commit(),TX(this.host,t))}_cast(t,i){const r=R5.acquire();return r.valid=!0,r.value=i,t&&(r.value=t.call(this.host,i,r)),r}},dye=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const R5=new pf(dye);function qI(e,t,i){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))qI(e,r,t[r]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void qI(Xl(e,s),n,i)}const r=e.__accessor__;r!=null&&fye(t,r),e[t]=i}}function fye(e,t){if(le("esri-unknown-property-errors")&&!mye(e,t))throw new W("set:unknown-property",yye(e,t))}function mye(e,t){return t.metadata[e]!=null}function yye(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let gye;function vye(){return gye}var _U;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(_U||(_U={}));function bye(e){e.length=0}let Jn=class{constructor(t=50,i=50){this._pool=new pf(Array,void 0,bye,i,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return O5.acquire()}static release(t){return O5.release(t)}static prune(){O5.prune()}};const O5=new Jn(100);let IX=class extends pf{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const i=super.acquire(...t);return this._set.delete(i),i}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const rT=[];function HI(e){rT.push(e),rT.length===1&&queueMicrotask(()=>{const t=rT.slice();rT.length=0;for(const i of t)i()})}let k_=class{constructor(t,i=30){this.name=t,this._counter=0,this._samples=new Array(i)}push(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}set(t){t!=null&&(this._samples[this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,i)=>t-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,i)=>t+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var vO;(function(e){const t=(n,o,a,l)=>{let u=o,h=o;const p=a>>>1,f=n[u-1];for(;h<=p;){h=u<<1,h<a&&l(n[h-1],n[h])<0&&++h;const m=n[h-1];if(l(m,f)<=0)break;n[u-1]=m,u=h}n[u-1]=f},i=(n,o)=>n<o?-1:n>o?1:0;function r(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(n,h,a,l);const u=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,t(n,u,h,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)t(n,h,a,l),yield;const u=o+1;for(let h=a-1;h>o;h--){const p=n[o];n[o]=n[h],n[h]=p,t(n,u,h,l),yield}}e.sort=r,e.iterableSort=s})(vO||(vO={}));const SU=vO,wye=1.5,_ye=1.1;let Ud=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new HK,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>xU(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const i=new Array;for(let r=0;r<this._length;r++){const s=this.data[r];t(s)&&i.push(s)}return i}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,i){const r=this.data.indexOf(t,i);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let i=t;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,i=t.length){for(let r=0;r<i;r++)this.data[this._length++]=t[r]}fill(t,i){for(let r=0;r<i;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,xU(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const i=fO(this.data,t,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(fO(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,i=t.length,r){this.length=Rme(this.data,t,this.length,i,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,i){if(t>=this.length||i>=this.length||t===i)return;const r=this.data[t];this.data[t]=this.data[i],this.data[i]=r}sort(t){SU.sort(this.data,0,this.length,t)}iterableSort(t){return SU.iterableSort(this.data,0,this.length,t)}some(t,i){for(let r=0;r<this.length;++r)if(t.call(i,this.data[r],r,this.data))return!0;return!1}find(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)if(t.call(i,r[n]))return r[n]}filterInPlace(t,i){let r=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(i,n,s,this.data)&&(this.data[s]=this.data[r],this.data[r]=n,r++)}if(this._deallocator)for(let s=r;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=r,this._shrink(),this}forAll(t,i){const{data:r,length:s}=this;for(let n=0;n<s;++n)t.call(i,r[n],n,r)}forEach(t,i){this.data.slice(0,this.length).forEach(t,i)}map(t,i){const r=new Array(this.length);for(let s=0;s<this.length;++s)r[s]=t.call(i,this.data[s],s,this.data);return r}reduce(t,i){let r=i;for(let s=0;s<this.length;++s)r=t(r,this.data[s],s,this.data);return r}has(t){const i=this.length,r=this.data;for(let s=0;s<i;++s)if(r[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function xU(e){e.data.length>wye*e.length&&(e.data.length=Math.floor(e.length*_ye))}function Sye(e){return{setTimeout:(t,i)=>{const r=e.setTimeout(t,i);return ti(()=>e.clearTimeout(r))}}}const Y1=Sye(globalThis);function c$(e){return xye(e)||AX(e)}function xye(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function AX(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function GS(e,t,i){if(!c$(e))throw new TypeError("target is not a Evented or EventTarget object");return AX(e)?Tye(e,t,i):e.on(t,i)}function Tye(e,t,i,r){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,i,r);return ti(()=>{for(const n of s)e.removeEventListener(n,i,r)})}return e.addEventListener(t,i,r),ti(()=>e.removeEventListener(t,i,r))}function $X(e,t,i){if(!c$(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,i);const r=GS(e,t,s=>{r.remove(),i.call(e,s)});return r}function Oi(e="Aborted"){return new W("AbortError",e)}function wi(e,t="Aborted"){if(ya(e))throw Oi(t)}function BS(e){return e instanceof AbortSignal?e:e?.signal??void 0}function ya(e){const t=BS(e);return t!=null&&t.aborted}function _o(e){if(ls(e))throw e}function TU(e){if(!ls(e))throw e}function ha(e,t){const i=BS(e);if(i!=null){if(!i.aborted)return $X(i,"abort",()=>t());t()}}function sF(e,t){const i=BS(e);if(i!=null)return wi(i),$X(i,"abort",()=>t(Oi()))}function Dl(e,t){return BS(t)==null?e:new Promise((i,r)=>{let s=ha(t,()=>r(Oi()));const n=()=>{s=Yi(s)};e.then(n,n),e.then(i,r)})}function ls(e){return e?.name==="AbortError"}async function bO(e){try{return await e}catch(t){if(!ls(t))throw t;return}}async function nF(e){if(!e)return;if(typeof e.forEach!="function"){const i=Object.keys(e),r=i.map(o=>e[o]),s=await nF(r),n={};return i.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(i=>Array.from(t,(r,s)=>{const n=i[s];return n.status==="fulfilled"?{promise:r,value:n.value}:{promise:r,error:n.reason}}))}async function Eye(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Plt(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function CX(e,t=void 0,i){const r=new AbortController;return ha(i,()=>r.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);ha(r,()=>{o&&(clearTimeout(o),n(Oi()))})})}function Mye(e,t){const i=new AbortController,r=setTimeout(()=>i.abort(),t);return ha(e,()=>{i.abort(),clearTimeout(r)}),{...e,signal:i.signal}}function Ac(e){return e&&typeof e.then=="function"}function wO(e){return Ac(e)?e:Promise.resolve(e)}function h$(e,t=-1){let i,r,s,n,o=null;const a=(...l)=>{if(i){r=l,n&&n.reject(Oi()),n=Do();const f=n.promise;if(o){const m=o;o=null,m.abort()}return f}if(s=n||Do(),n=null,t>0){const f=new AbortController;i=wO(e(...l,f.signal));const m=i;CX(t).then(()=>{i===m&&(n?f.abort():o=f)})}else i=1,i=wO(e(...l));const u=()=>{const f=r;r=s=i=o=null,f!=null&&a(...f)},h=i,p=s;return h.then(u,u),h.then(p.resolve,p.reject),p.promise};return a}function Do(){let e,t;const i=new Promise((s,n)=>{e=s,t=n}),r=s=>{e(s)};return r.resolve=s=>e(s),r.reject=s=>t(s),r.timeout=(s,n)=>Y1.setTimeout(()=>r.reject(n),s),r.promise=i,r}async function WI(e){await Promise.resolve(),wi(e)}function Llt(e){return e}function Iye(e){return 1e3*e}function Nlt(e){return e}let Aye=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},$ye=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},_O=0;const Cb={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},SO=["prepare","preRender","render","postRender","update","finish"],xO=[],Gy=new Ud;let Cye=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Rye(){Sy!=null&&(cancelAnimationFrame(Sy),Sy=requestAnimationFrame(oF))}const JI={frameTasks:Gy,willDispatch:!1,clearFrameTasks:Oye,dispatch:OX,executeFrameTasks:Pye,reschedule:Rye};function zS(e){const t=new $ye(e);return xO.push(t),JI.willDispatch||(JI.willDispatch=!0,HI(OX)),t}function n1(e){const t=new Aye(e);return Gy.push(t),Sy==null&&(_O=performance.now(),Sy=requestAnimationFrame(oF)),new Cye(t)}let Sy=null;function Oye(e=!1){Gy.forAll(t=>{t.removed=!0}),e&&RX()}function oF(){const e=performance.now();Sy=null,Sy=Gy.length>0?requestAnimationFrame(oF):null,JI.executeFrameTasks(e)}function Pye(e){const t=e-_O;_O=e;const i=1e3/60,r=Math.max(0,t-i);Cb.time=e,Cb.frameDuration=i-r;for(let s=0;s<SO.length;s++){const n=performance.now(),o=SO[s];Gy.forAll(a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(Cb.elapsedFrameTime=performance.now()-e,Cb.deltaTime=a.ticks===0?0:t,a.phases[o]?.call(a,Cb)))}),kye[s].push(performance.now()-n)}RX(),Dye.push(performance.now()-e)}const sT=new Ud;function RX(){Gy.forAll(e=>{e.removed&&sT.push(e)}),Gy.removeUnorderedMany(sT.data,sT.length),sT.clear()}function OX(){for(;xO.length;){const e=xO.shift();e.isActive&&e.callback()}JI.willDispatch=!1}function PX(e=1,t){const i=Do(),r=()=>{ya(t)?i.reject(Oi()):e===0?i():(--e,HI(()=>r()))};return r(),i.promise}function Lye(e){return PX(1,e)}async function Nye(e){await Lye(e),await new Promise(t=>requestAnimationFrame(()=>{e?.aborted||t()}))}const kye=SO.map(e=>new k_(e)),Dye=new k_("total");function LX(e,t){for(const i of e.values())if(t(i))return!0;return!1}function ZI(e,t){if(!t)return e;for(const i of t)i!=null&&e.add(i);return e}function EU(e,t){return t!=null&&e.add(t),e}function NX(e,t){const i=new Set;return ZI(i,e),ZI(i,t),i}function Fye(e,t){const i=new Set;for(const r of t)e.has(r)&&i.add(r);return i}function jlt(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const i of e)if(!t.has(i))return!1;return!0}function Ult(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function jye(e,t){const i=new Set(e);for(const r of t)i.delete(r);return i}function Uye(e,t){return jye(NX(e,t),Fye(e,t))}let Vye=0;function zE(){return++Vye}let p$=class extends u${constructor(t){super(new Gye(t)),this._observer&&MU.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&MU.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},Gye=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=Bye}};const MU=new FinalizationRegistry(e=>{e.deref()?.destroy()});function Bye(){}let Iv=!1;const YI=[];function kX(e,t){let i=new p$(n),r=null,s=!1;function n(){if(!i||s)return;if(Iv)return void jX(n);const a=r;i.clear(),Iv=!0,s=!0,r=Qh(i,e),s=!1,Iv=!1,t(r,a),UX()}function o(){i&&(i.destroy(),i=null,r=null)}return s=!0,r=Qh(i,e),s=!1,ti(o)}function DX(e,t){let i=new p$(s),r=null;function s(){t(r,o)}function n(){i&&(i.destroy(),i=null),r=null}function o(){return i?(i.clear(),r=Qh(i,e),r):null}return o(),ti(n)}function FX(e,t){let i=!1,r=!1;const s=!!t?.sync;let n=new p$(()=>{i||r||(r=!0,s?o():queueMicrotask(o))});function o(){r=!1,n&&!i&&(Iv?jX(o):(n.clear(),Iv=!0,i=!0,Qh(n,e),i=!1,Iv=!1,UX()))}function a(){n&&(n.destroy(),n=null)}return i=!0,Qh(n,e),i=!1,ti(a)}function jX(e){YI.includes(e)||YI.unshift(e)}function UX(){for(;YI.length;)YI.pop()()}var D_;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(D_||(D_={}));let L2=class{constructor(){this.uid=zE(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,i,r,s,n){return this.pool.acquire(D_.Untracked,t,i,r,s,n,tF)}static acquireTracked(t,i,r,s){return this.pool.acquire(D_.Tracked,t,i,r,null,null,s)}notify(t,i){this.type===D_.Untracked?this.callback.call(this.target,t,i,this.path,this.target):this.callback.call(null,t,i,void 0,void 0)}acquire(t,i,r,s,n,o,a){this.uid=zE(),this.removed=!1,this.type=t,this.oldValue=i,this.callback=r,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=zE(),this.removed=!0}};L2.pool=new IX(L2);const qE=new Jn,Bh=new Set;let KI;function XI(e){Bh.delete(e),Bh.add(e),KI||(KI=zS(Hye))}function zye(e){if(e.removed)return;const t=e.oldValue,i=e.getValue();e.equals(t,i)||(e.oldValue=i,e.notify(i,t))}function qye(e){for(const t of Bh.values())t.target===e&&(t.removed=!0)}function Hye(){let e=10;for(;KI&&e--;){KI=null;const t=Wye(),i=qE.acquire();for(const r of t){const s=r.uid;zye(r),s===r.uid&&r.removed&&i.push(r)}for(const r of Bh)r.removed&&(i.push(r),Bh.delete(r));for(const r of i)L2.pool.release(r);qE.release(i),qE.release(t),TO.forEach(r=>r())}}function Wye(){const e=qE.acquire();e.length=Bh.size;let t=0;for(const i of Bh)e[t]=i,++t;return Bh.clear(),e}const TO=new Set;function Jye(e){return TO.add(e),ti(()=>TO.delete(e))}function Zye(e,t,i){let r=vX(e,t,i,(s,n,o)=>{let a,l,u=DX(()=>US(s,n),(h,p)=>{s.__accessor__?.lifecycle===wo.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=L2.acquireUntracked(h,o,p,s,n),l=a.uid),XI(a))});return ti(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,XI(a)),a=null),r=u=null})});return r}function Yye(e,t,i){const r=vX(e,t,i,(s,n,o)=>{let a=!1;return kX(()=>US(s,n),(l,u)=>{s.__accessor__.lifecycle!==wo.DESTROYED?a||(a=!0,tF(u,l)||o.call(s,l,u,n,s),a=!1):r.remove()})});return r}function Kye(e,t,i,r=!1){return e.__accessor__&&e.__accessor__.lifecycle!==wo.DESTROYED?r?Yye(e,t,i):Zye(e,t,i):ti()}function Xye(e,t,i){let r,s,n=DX(e,(o,a)=>{r&&r.uid!==s?n.remove():(r||(r=L2.acquireTracked(o,t,a,i),s=r.uid),XI(r))});return ti(()=>{n.remove(),r&&(r.uid!==s||r.removed||(r.removed=!0,XI(r)),r=null),n=null})}function Qye(e,t,i){let r=!1;return kX(e,(s,n)=>{r||(r=!0,i(n,s)||t(s,n),r=!1)})}function ege(e,t,i=!1,r=uX){return i?Qye(e,t,r):Xye(e,t,r)}function IU(e){return LX(Bh,t=>t.oldValue===e)}function tge(e,t){for(const i of e.values())if(t(i))return!0;return!1}function qS(e,t,i){const r=e.get(t);if(r!==void 0)return r;const s=i();return e.set(t,s),s}function zlt(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const Av=()=>xe.getLogger("esri.core.accessorSupport.ensureTypes");function ige(e){return e==null?e:new Date(e)}function rge(e){return e==null?e:!!e}function HS(e){return e==null?e:e.toString()}function bn(e,t=0){return e==null?e:(e=parseFloat(e),isNaN(e)?t:e)}function d$(e){return e==null?e:Math.round(parseFloat(e))}function sge(e){return null}function VX(e,t){return i=>{let r=e(i);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}function GX(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function QI(e,t){return t!=null&&e&&!(t instanceof e)}function BX(e){return e&&"isCollection"in e}function AU(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function nge(e,t){if(!t?.constructor||!BX(t.constructor))return EO(e,t)?t:new e(t);const i=AU(e.prototype.itemType),r=AU(t.constructor.prototype.itemType);return i?r?i===r?t:i.prototype.isPrototypeOf(r.prototype)?new e(t):(EO(e,t),t):new e(t):t}function EO(e,t){return!!GX(t)&&(Av().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+f$(e)+"'"),!0)}function Ki(e,t){return t==null?t:BX(e)?nge(e,t):QI(e,t)?EO(e,t)?t:new e(t):t}function f$(e){return e?.prototype?.declaredClass||"unknown"}const oge=new WeakMap;function age(e){switch(e){case Number:return t=>bn(t);case vt:return d$;case Boolean:return rge;case String:return HS;case Date:return ige;case m$:return sge;default:return qS(oge,e,()=>Ki.bind(null,e))}}function bi(e,t){const i=age(e);return arguments.length===1?i:i(t)}function N2(e,t,i){return arguments.length===1?N2.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,i)):[e(t,i)])}function lge(e,t){return arguments.length===1?N2(i=>bi(e,i)):N2(i=>bi(e,i),t)}function zX(e,t,i){return t!==0&&Array.isArray(i)?i.map(r=>zX(e,t-1,r)):e(i)}function e3(e,t,i){if(arguments.length===2)return n=>e3(e,t,n);if(!i)return i;i=zX(e,t,i);let r=t,s=i;for(;r>0&&Array.isArray(s);)r--,s=s[0];if(s!==void 0)for(let n=0;n<r;n++)i=[i];return i}function uge(e,t,i){return arguments.length===2?e3(r=>bi(e,r),t):e3(r=>bi(e,r),t,i)}function qX(e){return!!Array.isArray(e)&&!e.some(t=>{const i=typeof t;return!(i==="string"||i==="number"||i==="function"&&e.length>1)})}function MO(e,t){if(arguments.length===2)return MO(e).call(null,t);const i=new Set,r=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||i.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,h=u==="string"||u==="number";return h&&(i.has(a)||s.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&s.some(p=>!QI(a,p))?a:(h&&r.length?(n||(n=r.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),Av().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(p=>f$(p)).join(", ")),Av().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Av().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function il(e,t){if(arguments.length===2)return il(e).call(null,t);const i={},r=[],s=[];for(const l in e.typeMap){const u=e.typeMap[l];i[l]=bi(u),r.push(f$(u)),s.push(l)}const n=()=>`'${r.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!QI(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,h=i[u];if(!h)return Av().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!QI(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!GX(l)){const p={};for(const f in l)f!==e.key&&(p[f]=l[f]);return h(p)}return h(l)}}let vt=class{},m$=class{};const Rb={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function cge(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function HX(e){switch(e.type){case"native":return bi(e.value);case"array":return N2(HX(e.value));case"one-of":return hge(e);default:return null}}function hge(e){let t=null;return(i,r)=>AO(i,e)?i:(t==null&&(t=IO(e)),Av().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function IO(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case vt:return"integer";case Date:return"date";case m$:return"null";default:return f$(e.value)}case"array":return`array of ${IO(e.value)}`;case"one-of":{const t=e.values.map(i=>IO(i));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function AO(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case vt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case m$:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(i=>!AO(i,t.value));case"one-of":return t.values.some(i=>AO(e,i))}}function d(e={}){return(t,i)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${i}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,i),s=l$(t,i);r&&(r.get||r.set?(s.get=r.get||s.get,s.set=r.set||s.set):"value"in r&&("value"in e&&xe.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=r.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,u=typeof n=="string"?null:n.overridable===!0;let h;s.dependsOn=[l],s.get=function(){let p=Xl(this,l);if(typeof p=="function"){h||(h=l.split(".").slice(0,-1).join("."));const f=Xl(this,h);f&&(p=p.bind(f))}return p},s.readOnly||(s.set=u?function(p){this._override(i,p)}:function(p){qI(this,l,p)})}const o=e.type,a=e.types;if(!s.cast){let l;o?l=pge(o):a&&(l=Array.isArray(a)?N2(il(a[0])):il(a)),e.cast=dge(e.cast,l)}tye(s,e),e.range&&(s.cast=VX(s.cast,e.range))}}function WX(e,t,i){const r=l$(e,i);r.json||(r.json={});let s=r.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function pge(e){let t=0,i=e;if(cge(e))return HX(e);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],t++;const r=i;if(qX(r))return t===0?MO(r):e3(MO(r),t);if(t===1)return lge(r);if(t>1)return uge(r,t);const s=e;return s.from?s.from:bi(s)}function dge(e,t){if(e||t)return e?t?(i,r)=>t(e(i,r),r):e:t}function fge(e){if(e.json&&e.json.origins){const t=e.json.origins,i={"web-document":["web-scene","web-map"]};for(const r in i)if(t[r]){const s=t[r];i[r].forEach(n=>{t[n]=s}),delete t[r]}}}let Fo=class extends dX{constructor(t,i,r){super(t,i,r)}};Fo.prototype.type="warning";function JX(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const $O=()=>xe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function $U(e,t,i){e&&(!i&&!t.read||t.read?.reader||t.read?.enabled===!1||gge(e)&&Zr("read.reader",K1(e),t))}function K1(e){const t=e.ndimArray??0;if(t>1)return yge(e);if(t===1)return CU(e);if("type"in e&&YX(e.type)){const i=e.type.prototype?.itemType?.Type,r=CU(typeof i=="function"?{type:i}:{types:i});return(s,n,o)=>{const a=r(s,n,o);return a&&new e.type(a)}}return aF(e)}function aF(e){return"type"in e?mge(e.type):vge(e.types)}function mge(e){return e.prototype.read?(t,i,r)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void $O().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,r),n}:e.fromJSON}function ZX(e,t,i,r){return r!==0&&Array.isArray(t)?t.map(s=>ZX(e,s,i,r-1)):e(t,void 0,i)}function yge(e){const t=aF(e),i=ZX.bind(null,t),r=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=i(s,o,r);let a=r,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function CU(e){const t=aF(e);return(i,r,s)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(i,void 0,s);return n!==void 0?[n]:void 0}}function YX(e){if(!JX(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?lF(t.Type):KX(t.Type))}function gge(e){return"types"in e?KX(e.types):lF(e.type)}function lF(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||YX(e))}function KX(e){for(const t in e.typeMap)if(!lF(e.typeMap[t]))return!1;return!0}function vge(e){let t=null;const i=e.errorContext??"type",r=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void $O().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=bge(e));const l=e.key;if(typeof l!="string")return;const u=s[l],h=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const f=`Type '${u||"unknown"}' is not supported`;return o?.messages&&s&&o.messages.push(new Fo(`${i}:unsupported`,f,{definition:s,context:o})),void $O().error(f)}const p=new h;return p.read(s,o),r?r(p):p}}function bge(e){const t={};for(const i in e.typeMap){const r=e.typeMap[i],s=VS(r.prototype);if(typeof e.key=="function")continue;const n=s[e.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"){t[n.json.type[0]]=r;continue}const o=n.json?.write;if(!o?.writer){t[i]=r;continue}const a=o.target,l=typeof a=="string"?a:e.key,u={};o.writer(i,u,l),u[l]&&(t[u[l]]=r)}return t}function wge(e){if(e.json||(e.json={}),OU(e.json),PU(e.json),RU(e.json),e.json.origins)for(const t in e.json.origins)OU(e.json.origins[t]),PU(e.json.origins[t]),RU(e.json.origins[t]);return!0}function RU(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function OU(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function PU(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function LU(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=e?.ndimArray??0;e&&(i===1||"type"in e&&JX(e.type))?t.write.writer=xge:i>1?t.write.writer=Tge(i):t.types?Array.isArray(t.types)?t.write.writer=Sge(t.types[0]):t.write.writer=_ge(t.types):t.write.writer=k2}function _ge(e){return(t,i,r,s)=>t?XX(t,e,s)?k2(t,i,r,s):void 0:k2(t,i,r,s)}function XX(e,t,i){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(i?.messages){const r=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&e&&i.messages.push(new W(`${r}:unsupported`,s,{definition:e,context:i})),xe.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Sge(e){return(t,i,r,s)=>!t||!Array.isArray(t)?k2(t,i,r,s):k2(t.filter(n=>XX(n,e,s)),i,r,s)}function k2(e,t,i,r){Zr(i,t3(e,r),t)}function t3(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?i3(e):e}function i3(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function xge(e,t,i,r){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>t3(n,r)),typeof s.toArray=="function"&&(s=s.toArray())):s=[t3(e,r)],Zr(i,s,t)}function QX(e,t,i){return i!==0&&Array.isArray(e)?e.map(r=>QX(r,t,i-1)):t3(e,t)}function Tge(e){return(t,i,r,s)=>{let n;if(t===null)n=null;else{n=QX(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}Zr(r,n,i)}}function Ege(e,t){return uF(e,"any",t?.origin)}function CO(e,t){return uF(e,"read",t?.origin)}function eQ(e,t){return uF(e,"write",t?.origin)}function uF(e,t,i){let r=e?.json;if(r?.origins&&i){let s;s=i==="link-chart"?r.origins[i]&&(t==="any"||t in r.origins[i])?r.origins[i]:r.origins["web-map"]:r.origins[i],s&&(t==="any"||t in s)&&(r=s)}return r}function Mge(e){const t=Ige(e);if(e.json.origins)for(const i in e.json.origins){const r=e.json.origins[i],s=r.types?Age(r):t;$U(s,r,!1),r.types&&!r.write&&e.json.write?.enabled&&(r.write={...e.json.write}),LU(s,r)}$U(t,e.json,!0),LU(t,e.json)}function Ige(e){return e.json.types?RO(e.json):e.type?tQ(e):RO(e)}function Age(e){return e.type?tQ(e):RO(e)}function tQ(e){if(!e.type)return;let t=0,i=e.type;for(;Array.isArray(i)&&!qX(i);)i=i[0],t++;return{type:i,ndimArray:t}}function RO(e){if(!e.types)return;let t=0,i=e.types;for(;Array.isArray(i);)i=i[0],t++;return{types:i,ndimArray:t}}function $ge(e){wge(e)&&(fge(e),Mge(e))}const P5=new Set,L5=new Set;function F(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,Rge(t);const i=[],r=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!P5.has(s.initialize)&&(P5.add(s.initialize),i.push(s.initialize)),s.hasOwnProperty("destroy")&&!L5.has(s.destroy)&&(L5.add(s.destroy),r.push(s.destroy)),s=Object.getPrototypeOf(s);P5.clear(),L5.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),r.length){let l=!1;const u=this[yX];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let h=0;h<r.length;h++)r[h].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=VS(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Cge(e,t){return t.get==null?function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r===void 0)return;i.mutable&&ht(r);const s=i.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const i=this.__accessor__,r=i.propertiesByName.get(e);if(r!==void 0)return r.getComputed(i)}}function Rge(e){const t=e.prototype,i=VS(t),r={};for(const s of Object.getOwnPropertyNames(i)){const n=i[s];$ge(n),r[s]={enumerable:!0,configurable:!0,get:Cge(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&n.readOnly?NU("read-only",s):a.lifecycle===wo.CONSTRUCTED&&n.constructOnly?NU("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}const NU=(e,t)=>{xe.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var iQ,rQ;function Oge(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Pp=Symbol("Accessor-Handles"),OO=Symbol("Accessor-Initialized");let Je=class HE{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:r,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}VS(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const h=this.inherited;let p;this.inherited=function(...f){if(n.prototype[a])return n.prototype[a].apply(this,f)};try{p=l.apply(this,u)}catch(f){throw this.inherited=h,f}return this.inherited=h,p}:t[a]}for(const a in i){const l=Oge(i[a]);d(l)(o.prototype,a)}return F(r)(o)}static freeze(t){return t instanceof HE?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof HE?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){if(this[iQ]=null,this[rQ]=!1,this.constructor===HE)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const i=new pye(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:i}),t.length>0&&(i.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0])}postscript(){const t=this.__accessor__,i=t.ctorArgs;t.initialize(),i&&(this.set(i),t.ctorArgs=null),t.constructed(),this.initialize(),this[OO]=!0}initialize(){}[yX](){this[Pp]=Wi(this[Pp])}destroy(){this.destroyed||(qye(this),this.__accessor__.destroy(),vye()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[OO]}get destroyed(){return this.__accessor__?.lifecycle===wo.DESTROYED||!1}commitProperty(t){Xl(this,t)}get(t){return mX(xe.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Xl(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,i){return qI(this,t,i),this}watch(t,i,r){return Kye(this,t,i,r)}addHandles(t,i){if(this.destroyed){const r=Array.isArray(t)?t:[t];for(const s of r)s.remove();return}(this[Pp]??=new Z1).add(t,i)}removeHandles(t){this[Pp]?.remove(t)}removeAllHandles(){this[Pp]?.removeAll()}removeHandlesReference(t){this[Pp]?.removeReference(t)}hasHandles(t){return this[Pp]?.has(t)===!0}_override(t,i){i===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,i){i==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,i)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,i){return this.__accessor__.internalSet(t,i),this}};iQ=Pp,rQ=OO;let Pge=class sQ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const i=new sQ;return this._values.forEach((r,s)=>{t&&t.has(s)||i.set(s,K(r.value),r.origin)}),i}get(t,i){i=this._normalizeOrigin(i);const r=this._values.get(t);return i==null||r?.origin===i?r?.value:void 0}originOf(t){return this._values.get(t)?.origin??je.USER}keys(t){t=this._normalizeOrigin(t);const i=[...this._values.keys()];return t==null?i:i.filter(r=>this._values.get(r)?.origin===t)}set(t,i,r){if((r=this._normalizeOrigin(r))===je.DEFAULTS){const s=this._values.get(t);if(s?.origin!=null&&s.origin>r)return}this._values.set(t,new Lge(i,r))}delete(t,i){(i=this._normalizeOrigin(i))!=null&&this._values.get(t)?.origin!==i||this._values.delete(t)}has(t,i){return(i=this._normalizeOrigin(i))!=null?this._values.get(t)?.origin===i:this._values.has(t)}forEach(t){this._values.forEach(({value:i},r)=>t(i,r))}_normalizeOrigin(t){if(t!=null)return t===je.DEFAULTS?t:je.USER}},Lge=class{constructor(t,i){this.value=t,this.origin=i}};function nQ(e,t,i){t.keys().forEach(s=>{i.set(s,t.get(s),je.DEFAULTS)});const r=e.metadata;Object.keys(r).forEach(s=>{e.internalGet(s)&&i.set(s,e.internalGet(s),je.DEFAULTS)})}function Nge(e,t,i){if(!e?.read||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&gU(r,i))return!0}else for(const s of r)if(s===t||s.includes(".")&&s.indexOf(t)===0&&gU(s,i))return!0;return!1}function kge(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Dge(e,t,i,r,s){let n=CO(t[i],s);kge(n)&&(e[i]=!0);for(const o of Object.getOwnPropertyNames(t))n=CO(t[o],s),Nge(n,i,r)&&(e[o]=!0)}function Fge(e,t,i,r){const s=i.metadata,n=Ege(s[t],r),o=n?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&i.set(t,a)}const oQ={origin:"service"};function aQ(e,t,i=oQ){if(!t||typeof t!="object")return;const r=Is(e),s=r.metadata,n={};for(const o of Object.getOwnPropertyNames(t))Dge(n,s,o,t,i);r.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(n)){const a=CO(s[o],i).read,l=a?.source;let u;u=l&&typeof l=="string"?US(t,l):t[o],a?.reader&&(u=a.reader.call(e,u,t,i)),u!==void 0&&r.set(o,u)}if(!i||!i.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Fge(e,o,r,i)}r.setDefaultOrigin("user")}function jge(e,t,i,r=oQ){const s={...r,messages:[]};i(s),s.messages?.forEach(n=>{n.type!=="warning"||e.loaded?r?.messages&&r.messages.push(n):e.loadWarnings.push(n)})}function Uge(e,t,i,r,s){const n={};return t.write?.writer?.call(e,r,n,i,s),n}function lQ(e,t,i,r,s,n){if(!r?.write)return!1;const o=Xl(e,i);if(!s&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,i,n??void 0);a!==void 0&&(s=a)}if(s||(s=r.write),!s||s.enabled===!1||s.layerContainerTypes&&n?.layerContainerType&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new W("web-document-write:property-required",`Missing value for required property '${i}' on '${e.declaredClass}'`,{propertyName:i,target:e});return a&&n?.messages?n.messages.push(a):a&&!n&&xe.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(i)===je.DEFAULTS)&&Vge(e,i,n,r,o)||!s.ignoreOrigin&&n?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(i)<Yn(n.origin))}function Vge(e,t,i,r,s){const n=r.default;if(n===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,i??void 0);return r$(o,s)}return!1}return n===s}function uQ(e,t,i,r){const s=Is(e),n=s.metadata,o=eQ(n[t],r);return!!o&&lQ(e,s,t,o,i,r)}function cQ(e,t,i){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return VE(t,e.toJSON(i));const r=Is(e),s=r.metadata;for(const n in s){const o=eQ(s[n],i);if(!lQ(e,r,n,o,void 0,i))continue;const a=Xl(e,n),l=Uge(e,o,o.write&&typeof o.write.target=="string"?o.write.target:n,a,i);Object.keys(l).length>0&&(t=VE(t,l),i?.resources?.pendingOperations?.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>VE(t,l,()=>"replace-arrays"))),i?.writtenProperties&&i.writtenProperties.push({target:e,propName:n,oldOrigin:lye(r.store.originOf(n)),newOrigin:i.origin}))}return t}const WS=e=>{let t=class extends e{constructor(...i){super(...i);const r=Is(this),s=r.store,n=new Pge;r.store=n,nQ(r,s,n)}read(i,r){aQ(this,i,r)}write(i,r){return cQ(this,i??{},r)}toJSON(i){return this.write({},i)}static fromJSON(i,r){return Gge.call(this,i,r)}};return t=c([F("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Gge(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(e,t),i}function D2(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let ae=class extends WS(Je){};ae=c([F("esri.core.JSONSupport")],ae);const Bge=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,zge={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function kU(e){const t=e?.match(Bge);if(!t)return null;const[,i,r,s]=t;if(!i)return null;let n=null,o=null,a=null;const{devext:l,qaext:u,www:h}=zge;if(r)if(n=i,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function qge(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function hQ(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,i=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):i.test(e)?e=e.replace(i,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}function pQ(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer}function Hge(e){const t=new Uint8Array(e);let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return btoa(i)}const Wge=()=>xe.getLogger("esri.core.urlUtils"),X1=Kt.request,DU="esri/config: esriConfig.request.proxyUrl is not set.",dQ=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,fQ=/^\s*http:/i,Jge=/^\s*https:/i,Zge=/^\s*file:/i,Yge=/:\d+$/,Kge=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Xge=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),Qge=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let oc=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(Xge);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(Qge),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const nT={},e0e=new oc(Kt.applicationUrl);let xn=e0e;const t0e=i0e();let cF=t0e;const hF=()=>xn,Klt=()=>cF;function i0e(){const e=xn.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${`${xn.scheme}://${xn.host}${xn.port!=null?`:${xn.port}`:""}`}${t}`}function $r(e){if(!e)return null;const t={path:null,query:null},i=new oc(e),r=e.indexOf("?");return i.query===null?t.path=e:(t.path=e.slice(0,r),t.query=pF(i.query)),i.fragment&&(t.hash=i.fragment,i.query===null&&(t.path=t.path.slice(0,t.path.length-(i.fragment.length+1)))),t}function pF(e){const t=e.split("&"),i={};for(const r of t){if(!r)continue;const s=r.indexOf("=");let n,o;s<0?(n=decodeURIComponent(r),o=""):(n=decodeURIComponent(r.slice(0,s)),o=decodeURIComponent(r.slice(s+1)));let a=i[n];typeof a=="string"&&(a=i[n]=[a]),Array.isArray(a)?a.push(o):i[n]=o}return i}function Zd(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(t(i,e[i]))).join("&"):Object.keys(e).map(i=>{const r=e[i];if(r==null)return"";const s=encodeURIComponent(i)+"=",n=t?.[i];return n?s+encodeURIComponent(n(r)):Array.isArray(r)?r.map(o=>D2(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):D2(r)?s+encodeURIComponent(JSON.stringify(r)):s+encodeURIComponent(r)}).filter(i=>i).join("&"):""}function mQ(e=!1){let t,i=X1.proxyUrl;if(typeof e=="string"){t=u0e(e);const r=y$(e);r&&(i=r.proxyUrl)}else t=!!e;if(!i)throw Wge().warn(DU),new W("urlUtils:proxy-not-set",DU);return t&&LO()&&(i=gF(i)),$r(i)}function r0e(e,t=!1){const i=y$(e);let r,s;if(i){const n=dF(i.proxyUrl);r=n.path,s=n.query?pF(n.query):null}else if(t){const n=mQ(e);r=n.path,s=n.query}if(r){const n=$r(e);e=r+"?"+n.path;const o=Zd({...s,...n.query});o&&(e=`${e}?${o}`)}return e}const Ob={path:"",query:""};function dF(e){const t=e.indexOf("?");return t!==-1?(Ob.path=e.slice(0,t),Ob.query=e.slice(t+1)):(Ob.path=e,Ob.query=null),Ob}function yQ(e){return e=(e=s3(e=bQ(e=dF(e).path),!0)).toLowerCase()}function s0e(e){const t={proxyUrl:e.proxyUrl,urlPrefix:yQ(e.urlPrefix)},i=X1.proxyRules,r=t.urlPrefix;let s=i.length;for(let n=0;n<i.length;n++){const o=i[n].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;s=n;break}o.indexOf(r)===0&&(s=n+1)}return i.splice(s,0,t),s}function y$(e){const t=X1.proxyRules,i=yQ(e);for(let r=0;r<t.length;r++)if(i.indexOf(t[r].urlPrefix)===0)return t[r]}function n0e(e,t){if(!e||!t)return!1;e=r3(e),t=r3(t);const i=kU(e),r=kU(t);return i!=null&&r!=null?i.portalHostname===r.portalHostname:i==null&&r==null&&o1(e,t,!0)}function gQ(e,t){return e=r3(e),t=r3(t),s3(e)===s3(t)}function r3(e){const t=(e=Ja(e)).indexOf("/sharing");return t>0?e.slice(0,t):e.replace(/\/+$/,"")}function PO(e,t=X1.interceptors){const i=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r);if(t){for(const r of t)if(Array.isArray(r.urls)){if(r.urls.some(i))return r}else if(i(r.urls))return r}return null}function o1(e,t,i=!1){if(!e||!t)return!1;const r=kO(e),s=kO(t);return!(!i&&r.scheme!==s.scheme)&&r.host!=null&&s.host!=null&&r.host.toLowerCase()===s.host.toLowerCase()&&r.port===s.port}function fF(e){if(typeof e=="string"){if(!pa(e))return!0;e=kO(e)}if(o1(e,xn))return!0;const t=X1.trustedServers||[];for(let i=0;i<t.length;i++){const r=o0e(t[i]);for(let s=0;s<r.length;s++)if(o1(e,r[s]))return!0}return!1}function o0e(e){return nT[e]||(yF(e)||nu(e)?nT[e]=[new oc(ua(e))]:nT[e]=[new oc(`http://${e}`),new oc(`https://${e}`)]),nT[e]}function ua(e,t=cF,i){return nu(e)?i?.preserveProtocolRelative?e:xn.scheme==="http"&&xn.authority===Za(e).slice(2)?`http:${e}`:`https:${e}`:yF(e)?e:ep(e[0]==="/"?d0e(t):t,e)}function mF(e,t=cF,i){if(e==null||!pa(e))return e;const r=Ja(e),s=r.toLowerCase(),n=Ja(t).toLowerCase().replace(/\/+$/,""),o=i?Ja(i).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(p,f,m)=>(m=p.indexOf(f,m))===-1?p.length:m;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||o&&u<o.length)return e;e=r.slice(u);const h=n.slice(u-1).replaceAll(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)e=`../${e}`;else e=`./${e}`;return e}function Ja(e){return e=g0e(e=y0e(e=m0e(e=ua(e=e.trim()))))}function ep(...e){const t=e.filter(ko);if(!t?.length)return;const i=[];if(pa(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(i.push(s.slice(0,n+1)),h0e(t[0])&&(i[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&i.push("");const r=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<r.length;s++){const n=r[s];n===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!n&&s===r.length-1||n&&(n!=="."||i.length===0))&&i.push(n)}return i.join("/")}function Za(e,t=!1){if(e==null||g$(e)||mg(e))return null;let i=e.indexOf("://");if(i===-1&&nu(e))i=2;else{if(i===-1)return null;i+=3}const r=e.indexOf("/",i);return r!==-1&&(e=e.slice(0,r)),t&&(e=s3(e,!0)),e}function pa(e){return nu(e)||yF(e)}function g$(e){return e!=null&&e.slice(0,5)==="blob:"}function mg(e){return e!=null&&e.slice(0,5)==="data:"}function a0e(e){const t=a1(e);return t?.isBase64?pQ(t.data):null}function Xlt(e){return Hge(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const l0e=/^data:(.*?)(;base64)?,(.*)$/;function a1(e){const t=e.match(l0e);if(!t)return null;const[,i,r,s]=t;return{mediaType:i,isBase64:!!r,data:s}}function vQ(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Qlt(e){return(await fetch(e)).blob()}function eut(e){const t=a0e(e);if(!t)return null;const i=a1(e);return new Blob([t],{type:i.mediaType})}function nu(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function yF(e){return e!=null&&dQ.test(e)}function u0e(e){return e!=null&&Jge.test(e)||xn.scheme==="https"&&nu(e)}function c0e(e){return e!=null&&fQ.test(e)||xn.scheme==="http"&&nu(e)}function h0e(e){return e!=null&&Zge.test(e)}function gF(e){return nu(e)?`https:${e}`:e.replace(fQ,"https:")}function p0e(){return xn.scheme==="http"}function LO(){return xn.scheme==="https"}function s3(e,t=!1){return nu(e)?e.slice(2):(e=e.replace(dQ,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function d0e(e){const t=e.indexOf("//"),i=e.indexOf("/",t+2);return i===-1?e:e.slice(0,i)}function f0e(e){let t=0;if(pa(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const i=e.lastIndexOf("/");return i<t?e:e.slice(0,i+1)}function tut(e,t){if(!e)return"";const i=$r(e).path.replace(/\/+$/,""),r=i.slice(i.lastIndexOf("/")+1);if(!t?.length)return r;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return r.replace(s,"")}function bQ(e){return e.endsWith("/")?e:`${e}/`}function wQ(e){return e.replace(/\/+$/,"")}function m0e(e){if(/^https?:\/\//i.test(e)){const t=dF(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function y0e(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function g0e(e){const t=X1.httpsDomains;if(!c0e(e))return e;const i=e.indexOf("/",7);let r;if(r=i===-1?e:e.slice(0,i),r=r.toLowerCase().slice(7),Yge.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return p0e()&&r===xn.authority&&!Kge.test(e)||(LO()&&r===xn.authority||t&&t.some(s=>r===s||r.endsWith(`.${s}`))||LO()&&!y$(e))&&(e=gF(e)),e}function NO(e,t,i){if(!(t&&i&&e&&pa(e)))return e;const r=e.indexOf("//"),s=e.indexOf("/",r+2),n=e.indexOf(":",r+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${i}${e.slice(o)}`}function kO(e){return typeof e=="string"?new oc(ua(e)):(e.scheme||(e.scheme=xn.scheme),e)}function iut(e){return b0e.test(e)}function _Q(e,t){const i=$r(e),r=Object.keys(i.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),i.path}function v0e(e,t,i){const r=$r(e),s=r.query||{};return s[t]=String(i),`${r.path}?${Zd(s)}`}function F_(e,t){if(!t)return e;const i=$r(e),r=i.query||{};for(const[n,o]of Object.entries(t))o!=null&&(r[n]=o);const s=Zd(r);return s?`${i.path}?${s}`:i.path}function rut(e){if(e==null)return null;const t=e.match(SQ);return t?t[2]:null}function FU(e){if(e==null)return null;const t=e.match(SQ);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function sut(e){return typeof e=="string"?a1(e)??{data:e}:new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(a1(r.result)),r.onerror=s=>i(s)})}const SQ=/([^.]*)\.([^/]*)$/,b0e=/(^data:image\/svg|\.svg$)/i,xQ="20241122",TQ="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const w0e="4.31";let ci,vF=w0e;vF="4.31.6";function nut(e){ci=e}function out(e){const t=ci?.findCredential(e);return t?.token?v0e(e,"token",t.token):e}le("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),le("host-webworker");const _0e=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function S0e(e){const t=Za(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!_0e.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function EQ(e,t){return!(!Kt.apiKey||!S0e(e))}function x0e(e,t,i=!1,r){return new Promise((s,n)=>{if(ya(r))return void n(jU());let o=()=>{u(),n(new Error(`Unable to load ${t}`))},a=()=>{const h=e;u(),s(h)},l=()=>{if(!e)return;const h=e;u(),h.src="",n(jU())};const u=()=>{le("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,r?.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(t)};r?.addEventListener("abort",l),le("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function jU(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const MQ="Timeout exceeded";function T0e(){return new Error(MQ)}function aut(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===MQ}function E0e(e){Kt.request.crossOriginNoCorsDomains||(Kt.request.crossOriginNoCorsDomains={});const t=Kt.request.crossOriginNoCorsDomains;for(let i of e)i=i.toLowerCase(),/^https?:\/\//.test(i)?t[Za(i)??""]=0:(t[Za("http://"+i)??""]=0,t[Za("https://"+i)??""]=0)}function M0e(e){const t=Kt.request.crossOriginNoCorsDomains;if(t){let i=Za(e);if(i)return i=i.toLowerCase(),!o1(i,hF())&&t[i]<Date.now()-36e5}return!1}async function I0e(e){const t=$r(e);e=t.path,t.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const i=Kt.request.crossOriginNoCorsDomains,r=Za(e);i&&r&&(i[r.toLowerCase()]=Date.now())}async function Ne(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=pF(t.query.toString().replaceAll("+"," ")));const i=mg(e),r=g$(e);r||i||(e=Ja(e));const s={url:e,requestOptions:{...t}},n=f=>({data:f,getAllHeaders:l1,getHeader:l1,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=PO(e,Ga.internalInterceptors);if(o){const f=await VU(o,s);if(f!=null)return n(f)}let a=PO(e);if(a){const f=await VU(a,s);if(f!=null)return n(f);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(le("host-webworker")||le("host-node")))throw ac("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw ac("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||r)throw ac("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await O0e(),n3)return n3.execute(e,t);const l=new AbortController,u=ha(t,()=>l.abort()),h={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Ga.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=await k0e(h).finally(()=>u?.remove());return a?.after?.(p),p}let n3;const Ga=Kt.request,IQ="FormData"in globalThis,A0e=new Set([499,498,403,401]),$0e=new Set(["COM_0056","COM_0057","SB_0008"]),C0e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],l1=()=>null,o3=Symbol();function R0e(e){const t=Za(e);t&&!Ne._corsServers.includes(t)&&Ne._corsServers.push(t)}function UU(e){const t=Za(e);return!t||t.endsWith(".arcgis.com")||Ne._corsServers.includes(t)||fF(t)}function ac(e,t,i,r){let s="Error";const n={url:i.url,requestOptions:i.requestOptions,getAllHeaders:l1,getHeader:l1,ssl:!1};if(t instanceof W)return t.details?(t.details=K(t.details),t.details.url=i.url,t.details.requestOptions=i.requestOptions):t.details=n,t;if(t){const o=r&&(()=>Array.from(r.headers)),a=r&&(h=>r.headers.get(h)),l=r?.status,u=t.message;u&&(s=u),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=o3 in t?t[o3]:t}return ls(t)?Oi():new W(e,s,n)}async function O0e(){le("host-webworker")&&!n3&&(n3=await ce(()=>import("./request-CxC14thO.js"),__vite__mapDeps([0,1]),import.meta.url))}async function DO(){ci||await ce(()=>import("./IdentityManager-D5wphftq.js"),__vite__mapDeps([2,1,3]),import.meta.url)}async function P0e(e){const t=e.params.url,i=e.params.requestOptions,r=e.controller.signal,s=i.body;let n=null,o=null;if(IQ&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:i.cacheBust?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:Ga.priority,redirect:"follow",signal:r},(n||o)&&(e.fetchOptions.body=n||o),i.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||i.query?.token||n?.get("token")),!e.hasToken&&EQ(t)&&(i.query||(i.query={}),i.query.token=Kt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!AQ(t)&&!ya(r)){let a;i.authMode==="immediate"?(await DO(),a=await ci.getCredential(t,{signal:r}),e.credential=a):i.authMode==="no-prompt"?(await DO(),a=await ci.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=a):ci&&(a=ci.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function AQ(e){return C0e.some(t=>t.test(e))}async function L0e(e){let t=e.params.url;const i=e.params.requestOptions,r=e.fetchOptions??{},s=g$(t)||mg(t),n=i.responseType||"json",o=s?0:i.timeout!=null?i.timeout:Ga.timeout;let a=!1;if(!s){e.useSSL&&(t=gF(t));let f={...i.query};e.credentialToken&&(f.token=e.credentialToken);let m=Zd(f);le("esri-url-encodes-apostrophe")&&(m=m.replaceAll("'","%27"));const g=t.length+1+m.length;let b;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||g>Ga.maxUrlLength;const w=i.useProxy||!!y$(t);if(w){const S=mQ(t);b=S.path,!a&&b.length+1+g>Ga.maxUrlLength&&(a=!0),S.query&&(f={...S.query,...f})}if(r.method==="HEAD"&&(a||w)){if(a)throw g>Ga.maxUrlLength?ac("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ac("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw ac("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}a?(r.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?t=F_(t,f):(r.body=Zd(f),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=F_(t,f),w&&(e.useProxy=!0,t=`${b}?${t}`),f.token&&IQ&&r.body instanceof FormData&&!qge(t)&&r.body.set("token",f.token),i.hasOwnProperty("withCredentials")?e.withCredentials=i.withCredentials:o1(t,hF())||(fF(t)||ci&&ci.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(r.credentials="include",M0e(t)&&await I0e(a?F_(t,f):t))}let l,u,h=0,p=!1;o>0&&(h=setTimeout(()=>{p=!0,e.controller.abort()},o));try{if(i.responseType==="native-request-init")u=r,u.url=t,i.signal?u.signal=i.signal:delete u.signal;else if(i.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||N0e(i.headers)||!s&&!e.useProxy&&Ga.proxyUrl&&!UU(t)){if(Ne._beforeFetch&&await Ne._beforeFetch(t,r),l=await fetch(t,r),Ne._afterFetch&&await Ne._afterFetch(l),e.useProxy||R0e(t),i.responseType==="native")u=l;else if(r.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(h&&(clearTimeout(h),h=0),n==="json"||n==="xml"||n==="document")if(u)switch(n){case"json":u=JSON.parse(u);break;case"xml":u=GU(u,"application/xml");break;case"document":u=GU(u,"text/html")}else u=null;if(u){if(n==="array-buffer"||n==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[n==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}n==="image"&&u instanceof Blob&&(u=await BU(URL.createObjectURL(u),e,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await BU(t,e)}catch(f){if(f.name==="AbortError")throw p?T0e():Oi("Request canceled");if(!(!l&&f instanceof TypeError&&Ga.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||e.useProxy||UU(t))throw f;e.redoRequest=!0,s0e({proxyUrl:Ga.proxyUrl,urlPrefix:Za(t)??""})}finally{h&&clearTimeout(h)}return[l,u]}async function VU(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let i,r;try{r=await e.before(t)}catch(s){i=ac("request:interceptor",s,t)}if((r instanceof Error||r instanceof W)&&(i=ac("request:interceptor",r,t)),i)throw e.error&&e.error(i),i;return r}}function N0e(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function GU(e,t){let i;try{i=new DOMParser().parseFromString(e,t)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function k0e(e){let t,i;await P0e(e);try{do[t,i]=await L0e(e);while(!await D0e(e,t,i))}catch(n){const o=ac("request:server",n,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(o),o}const r=e.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&i.user?.username&&!fF(r)){const n=Za(r,!0);n&&Ga.trustedServers.push(n)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&E0e(i.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&ci){let o=ci.findServerInfo(s.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=ci.findCredential(o,s.userId);a&&ci._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:i,getAllHeaders:t?()=>Array.from(t.headers):l1,getHeader:t?n=>t.headers.get(n):l1,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function D0e(e,t,i){if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let s,n;if(i&&(i.error&&typeof i.error=="object"?s=i.error:i.status==="error"&&Array.isArray(i.messages)&&(s={...i},s[o3]=i,s.details=i.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[o3]=i,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o?.toUpperCase());const l=r.authMode;if(n===403&&(a===4||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&A0e.has(n)&&!AQ(e.params.url)&&(n!==403||(!o||!$0e.has(o))&&(a==null||a===2&&e.credentialToken))){await DO();try{const u=await ci.getCredential(e.params.url,{error:ac("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=u}}if(s)throw s;return!0}function BU(e,t,i=!1){const r=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Ga.priority,s.src=e,x0e(s,e,i,r)}Ne._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Ne._beforeFetch=void 0,Ne._afterFetch=void 0;let WE=class $Q{constructor(){this._emitter=new $Q.EventEmitter(this)}emit(t,i){return this._emitter.emit(t,i)}on(t,i){return this._emitter.on(t,i)}once(t,i){return this._emitter.once(t,i)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){let o=this._listenersMap?.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const h="deref"in u?u.deref():u;h?h?.call(a,n):l=!0}return l&&(o=o.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return jS(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),ti(()=>{const a=this._listenersMap?.get(s),l=a?.indexOf(n)??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove(),("deref"in n?n.deref():n)?.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap?.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let s=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=c([F("esri.core.Evented")],s),s};let i=class extends Je{constructor(){super(...arguments),this._emitter=new WE.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,s){return this._emitter.emit(r,s)}on(r,s){return this._emitter.on(r,s)}once(r,s){return this._emitter.once(r,s)}hasEventListener(r){return this._emitter.hasEventListener(r)}};i=c([F("esri.core.Evented.EventedAccessor")],i),e.EventedAccessor=i})(WE||(WE={}));const ap=WE;var oi;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(oi||(oi={}));function bF(e){return(t,i)=>{t[i]=e}}let JS=class extends _X{notify(){const t=this._observers;if(t&&t.length>0){const i=t.slice();for(const r of i)r.onInvalidated(),r.onCommitted()}}};var Ch;let F0e=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},j0e=class{constructor(t,i,r,s,n){this.target=t,this.added=i,this.removed=r,this.start=s,this.deleteCount=n}};const Sa=new pf(F0e,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function zU(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function N5(e){return e?e instanceof _h?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function k5(e){if(e?.length)return e[0]}function U0e(e,t,i,r){const s=Math.min(e.length-i,t.length-r);let n=0;for(;n<s&&e[i+n]===t[r+n];)n++;return n}function CQ(e,t,i,r){t&&t.forEach((s,n,o)=>{e.push(s),CQ(e,i.call(r,s,n,o),i,r)})}const vp=new Set,bp=new Set,wp=new Set,D5=new Map;let V0e=0,_h=Ch=class extends ap.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Ch}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new JS,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:V0e++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ch?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ht(this._observable),this._items}set items(e){this._emitBeforeChanges(oi.ADD)||(this._splice(0,this.length,N5(e)),this._emitAfterChanges(oi.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return ti();if(e==="change"){const i=this._chgListeners,r={removed:!1,callback:t};return i.push(r),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),ti(()=>{r.removed=!0,i.splice(i.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const i="deref"in t?()=>t.deref():()=>t,r=this.on(e,s=>{i()?.call(null,s),r.remove()});return r}add(e,t){if(ht(this._observable),this._emitBeforeChanges(oi.ADD))return this;const i=this.getNextIndex(t??null);return this._splice(i,0,[e]),this._emitAfterChanges(oi.ADD),this}addMany(e,t=this._items.length){if(ht(this._observable),!e?.length)return this;if(this._emitBeforeChanges(oi.ADD))return this;const i=this.getNextIndex(t);return this._splice(i,0,N5(e)),this._emitAfterChanges(oi.ADD),this}at(e){if(ht(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ht(this._observable),!this.length||this._emitBeforeChanges(oi.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(oi.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ht(this._observable),this._createNewInstance({items:this._items.map(K)})}concat(...e){ht(this._observable);const t=e.map(N5);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ht(this._observable),!this.length||this._emitBeforeChanges(oi.REMOVE))return;const i=this._splice(0,this.length),r=i.length;for(let s=0;s<r;s++)e.call(t,i[s],s,i);this._emitAfterChanges(oi.REMOVE)}destroyAll(){this.drain(zU)}destroyMany(e){const t=this.removeMany(e);return t.forEach(zU),t}every(e,t){return ht(this._observable),this._items.every(e,t)}filter(e,t){let i;return ht(this._observable),i=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return ht(this._observable),this._items.find(e,t)}findIndex(e,t){return ht(this._observable),this._items.findIndex(e,t)}flatten(e,t){ht(this._observable);const i=[];return CQ(i,this,e,t),new Ch(i)}forEach(e,t){return ht(this._observable),this._items.forEach(e,t)}getItemAt(e){return ht(this._observable),this._items[e]}getNextIndex(e){ht(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ht(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ht(this._observable),this._items.indexOf(e,t)}join(e=","){return ht(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ht(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ht(this._observable);const i=this._items.map(e,t);return new Ch({items:i})}reorder(e,t=this.length-1){ht(this._observable);const i=this.indexOf(e);if(i!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(oi.MOVE))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(oi.MOVE)}return e}}pop(){if(ht(this._observable),!this.length||this._emitBeforeChanges(oi.REMOVE))return;const e=k5(this._splice(this.length-1,1));return this._emitAfterChanges(oi.REMOVE),e}push(...e){return ht(this._observable),this._emitBeforeChanges(oi.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(oi.ADD)),this.length}reduce(e,t){ht(this._observable);const i=this._items;return arguments.length===2?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){ht(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return ht(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ht(this._observable),e<0||e>=this.length||this._emitBeforeChanges(oi.REMOVE))return;const t=k5(this._splice(e,1));return this._emitAfterChanges(oi.REMOVE),t}removeMany(e){if(ht(this._observable),!e?.length||this._emitBeforeChanges(oi.REMOVE))return[];const t=e instanceof Ch?e.toArray():e,i=this._items,r=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=i.indexOf(o);if(a>-1){const l=1+U0e(t,i,n+1,a+1),u=this._splice(a,l);u&&u.length>0&&r.push.apply(r,u),n+=l-1}}return this._emitAfterChanges(oi.REMOVE),r}reverse(){if(ht(this._observable),this._emitBeforeChanges(oi.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(oi.MOVE),this}shift(){if(ht(this._observable),!this.length||this._emitBeforeChanges(oi.REMOVE))return;const e=k5(this._splice(0,1));return this._emitAfterChanges(oi.REMOVE),e}slice(e=0,t=this.length){return ht(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ht(this._observable),this._items.some(e,t)}sort(e){if(ht(this._observable),!this.length||this._emitBeforeChanges(oi.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(oi.MOVE),this}splice(e,t,...i){ht(this._observable);const r=(t?oi.REMOVE:0)|(i.length?oi.ADD:0);if(this._emitBeforeChanges(r))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(r),s}toArray(){return ht(this._observable),this._items.slice()}toJSON(){return ht(this._observable),this.toArray()}toLocaleString(){return ht(this._observable),this._items.toLocaleString()}toString(){return ht(this._observable),this._items.toString()}unshift(...e){return ht(this._observable),!e.length||this._emitBeforeChanges(oi.ADD)||(this._splice(0,0,e),this._emitAfterChanges(oi.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const r=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=zS(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Sa.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(e,0,n),e+=1,l-=1,u-=1);Sa.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Sa.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Sa.release(a)}}if(i?.length){if(s){const h=[];for(const p of i){const f=s.ensureType(p);f==null&&p!=null||h.push(f)}i=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const h=Sa.acquire();h.target=this,h.cancellable=!0;const p=Sa.acquire();p.target=this,p.cancellable=!1;for(const f of i)a?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(u?r.push(f):r.splice(e++,0,f),this._set("length",r.length),l&&(p.reset(f),this.emit("after-add",p)))):(u?r.push(f):r.splice(e++,0,f),this._set("length",r.length),p.reset(f),this.emit("after-add",p));Sa.release(p),Sa.release(h)}else{if(u)for(const h of i)r.push(h);else r.splice(e,0,...i);this._set("length",r.length)}}if((i?.length||o?.length)&&this._notifyChangeEvent(i,o),this.hasEventListener("after-splice")){const a=new j0e(this,i,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=Sa.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,Sa.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Sa.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Sa.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const i=t.changes;vp.clear(),bp.clear(),wp.clear();for(const{added:l,removed:u}of i){if(l)if(wp.size===0&&bp.size===0)for(const h of l)vp.add(h);else for(const h of l)bp.has(h)?(wp.add(h),bp.delete(h)):wp.has(h)||vp.add(h);if(u)if(wp.size===0&&vp.size===0)for(const h of u)bp.add(h);else for(const h of u)vp.has(h)?vp.delete(h):(wp.delete(h),bp.add(h))}const r=Jn.acquire();vp.forEach(l=>{r.push(l)});const s=Jn.acquire();bp.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=Jn.acquire();if(wp.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(r.length||s.length||a.length)){const l={target:this,added:r,removed:s,moved:a},u=t.listeners.length;for(let h=0;h<u;h++){const p=t.listeners[h];p.removed||p.callback.call(this,l)}}Jn.release(r),Jn.release(s),Jn.release(a)}vp.clear(),bp.clear(),wp.clear()}};_h.ofType=e=>{if(!e)return Ch;if(D5.has(e))return D5.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const s=e.typeMap[r].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends Ch{};return c([bF({Type:e,ensureType:typeof e=="function"?bi(e):il(e)})],i.prototype,"itemType",void 0),i=c([F(`esri.core.Collection<${t}>`)],i),D5.set(e,i),i},c([d()],_h.prototype,"_updating",void 0),c([d()],_h.prototype,"length",void 0),c([d()],_h.prototype,"items",null),c([d({readOnly:!0})],_h.prototype,"updating",null),_h=Ch=c([F("esri.core.Collection")],_h);const Be=_h;function Yd(e,t,i=Be){return t||(t=new i),t===e||(t.removeAll(),G0e(e)?t.addMany(e):e&&t.add(e)),t}function RQ(e){return e}function G0e(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var pd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(pd||(pd={}));let B0e=class{constructor(){this._resolver=Do(),this._status=pd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=pd.RESOLVED,this._cleanUp()},()=>{this._status=pd.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===pd.RESOLVED}isRejected(){return this._status===pd.REJECTED}isFulfilled(){return this._status!==pd.PENDING}abort(){this._resolver.reject(Oi())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=Do(),i=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(i);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==r||ls(s)||this._resolver.reject(s)}),t.resolve()}};const v$=e=>{let t=class extends e{constructor(...i){super(...i),this._promiseProps=new B0e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,r){return this._promiseProps.promise.then(()=>this).then(i,r)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return t=c([F("esri.core.Promise")],t),t};let a3=class extends v$(Je){};a3=c([F("esri.core.Promise")],a3);const z0e="not-loaded",q0e="loading",H0e="failed",qU="loaded",OQ=e=>{let t=class extends e{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const u=sF(n,l);this.destroyed&&l(new W("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===z0e){this._set("loadStatus",q0e);const a=this._loadController=new AbortController;s({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",qU),this._loadController=null},r=>{this._set("loadStatus",H0e),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=O2(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===qU}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new W("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return c([d({readOnly:!0})],t.prototype,"loaded",null),c([d({readOnly:!0})],t.prototype,"loadError",void 0),c([d({clonable:!1})],t.prototype,"loadStatus",void 0),c([d({type:[Fo],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([F("esri.core.Loadable")],t),t};let gw=class extends OQ(a3){};gw=c([F("esri.core.Loadable")],gw),function(e){function t(i){return!(!i||!i.load)}e.LoadableMixin=OQ,e.isLoadable=t}(gw||(gw={}));const mc=gw;function W0e(e,t,i){return nF(e.map((r,s)=>t.apply(i,[r,s])))}async function J0e(e,t,i){return(await nF(e.map((r,s)=>t.apply(i,[r,s])))).map(r=>r.value)}function wF(e){return{ok:!0,value:e}}function _F(e){return{ok:!1,error:e}}function Z0e(e){return e!=null&&e.ok===!0?e.value:null}function Y0e(e){return e!=null&&e.ok===!1?e.error:null}async function b$(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return wF(await e)}catch(t){return _F(t)}}async function K0e(e){try{return wF(await e)}catch(t){return _o(t),_F(t)}}function SF(e,t){return new Lp(e,t)}let Lp=class extends Je{get value(){return Z0e(this._result)}get error(){return Y0e(this._result)}get finished(){return this._result!=null}constructor(t,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=O2(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(s=>{this._result=wF(s),this._cleanup()},s=>{this._result=_F(s),this._cleanup()}),this._abortHandle=ha(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Yi(this._abortHandle),this._abortController=null}};c([d()],Lp.prototype,"value",null),c([d()],Lp.prototype,"error",null),c([d()],Lp.prototype,"finished",null),c([d()],Lp.prototype,"promise",void 0),c([d()],Lp.prototype,"_result",void 0),Lp=c([F("esri.core.asyncUtils.ReactiveTask")],Lp);async function w$(e,t){return await e.load(),X0e(e,t)}async function X0e(e,t){const i=[],r=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?r(...o):Be.isCollection(o)?o.forEach(a=>r(a)):mc.isLoadable(o)&&i.push(o))};t(r);let s=null;if(await J0e(i,async n=>{const o=await b$(Q0e(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function Q0e(e){return"loadAll"in e&&typeof e.loadAll=="function"}function ge(e,t,i){let r,s;return t===void 0?(s=e,r=[void 0]):typeof t!="string"?(s=e,r=[void 0],i=t):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of r){const u=WX(n,l,s);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}let gt=class{constructor(t,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=eve(t),this.apiValues=HU(this._apiToJSON),this.jsonValues=HU(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,s,n)=>{const o=this.toJSON(r);o!==void 0&&Zr(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const i=this._apiToJSON[t];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function eve(e){const t={};for(const i in e)t[e[i]]=i;return t}function HU(e){const t=[];for(const i in e)t.push(i);return t.sort(),t}function ar(){return function(e,t){return new gt(e,{ignoreUnknown:!0,...t})}}let xF=class{constructor(t,i,r,s,n,o){this.semiMajorAxis=t,this.flattening=i,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=s,this.scaleHeight=n;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const mr=new xF(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),lc=new xF(3396190,1/169.8944472236118,23e4,6e4,.111),Kd=new xF(1737400,0,0,0,0);function ii(e){if(!Kt.assetsPath)throw xe.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new W("assets:path-not-set","config.assetsPath is not set");return ep(Kt.assetsPath,e)}let F5,ee=null;function TF(){return!!ee}function tve(){return!!le("esri-wasm")}function PQ(){return F5||(F5=ce(()=>import("./pe-wasm-DnH2F4DR.js"),__vite__mapDeps([4,1]),import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>ii(`esri/geometry/support/${t}`)})).then(e=>{kQ(e)}),F5)}var FO,Hi;(function(e){function t(n,o,a){ee.ensureCache.prepare();const l=ty(a),u=a===l,h=ee.ensureFloat64(l),p=ee._pe_geog_to_proj(ee.getPointer(n),o,h);return p&&Ed(a,o,h,u),p}function i(n,o,a,l){switch(l){case Hi.PE_TRANSFORM_P_TO_G:return r(n,o,a);case Hi.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function r(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){ee.ensureCache.prepare();const u=ty(a),h=a===u,p=ee.ensureFloat64(u),f=ee._pe_proj_to_geog_center(ee.getPointer(n),o,p,l);return f&&Ed(a,o,p,h),f}e.geogToProj=t,e.projGeog=i,e.projToGeog=r,e.projToGeogCenter=s})(FO||(FO={})),function(e){function t(){e.PE_BUFFER_MAX=ee.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ee.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ee.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ee.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ee.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ee.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ee.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ee.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ee.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ee.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ee.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ee.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ee.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ee.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ee.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ee.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ee.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ee.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ee.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ee.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=ee.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=ee.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=ee.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ee.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ee.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ee.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ee.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ee.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ee.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ee.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ee.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ee.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Hi||(Hi={}));let LQ=null;var jO;(function(e){const t={},i={},r=m=>{const g=m.getType();switch(g){case Hi.PE_TYPE_GEOGCS:m=ee.castObject(m,ee.PeGeogcs);break;case Hi.PE_TYPE_PROJCS:m=ee.castObject(m,ee.PeProjcs);break;case Hi.PE_TYPE_GEOGTRAN:m=ee.castObject(m,ee.PeGeogtran);break;default:g&Hi.PE_TYPE_UNIT&&(m=ee.castObject(m,ee.PeUnit))}return m};function s(){ee.PeFactory.prototype.initialize(null)}function n(m){return o(Hi.PE_TYPE_COORDSYS,m)}function o(m,g){let b=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g))&&(b=w[g],ee.compare(b,ee.NULL)&&(b=null)),!b){const S=ee.PeFactory.prototype.factoryByType(m,g);ee.compare(S,ee.NULL)||(b=r(S),w[g]=b)}return b}function a(m,g){let b=null,w=i[m];if(w||(w={},i[m]=w),w.hasOwnProperty(g)&&(b=w[g],ee.compare(b,ee.NULL)&&(b=null)),!b){const S=ee.PeFactory.prototype.fromString(m,g);ee.compare(S,ee.NULL)||(b=r(S),w[g]=b)}return b}function l(m){return o(Hi.PE_TYPE_GEOGCS,m)}function u(m){return o(Hi.PE_TYPE_GEOGTRAN,m)}function h(m){return ee.PeFactory.prototype.getCode(m)}function p(m){return o(Hi.PE_TYPE_PROJCS,m)}function f(m){return o(Hi.PE_TYPE_UNIT,m)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=h,e.projcs=p,e.unit=f})(jO||(jO={}));let NQ=null;var l3,UO,VO,GO,BO,zO,u3,qO,c3,h3,HO;function kQ(e){function t(n,o,a){n[o]=a(n[o])}ee=e,Hi.init(),l3.init(),u3.init(),c3.init(),h3.init(),LQ=class extends ee.PeDouble{constructor(n=NaN){super(n)}destroy(){ee.destroy(this)}[Symbol.dispose](){this.destroy()}},NQ=class extends ee.PeGCSExtent{destroy(){ee.destroy(this)}[Symbol.dispose](){this.destroy()}};const i=[ee.PeAngunit,ee.PeDatum,ee.PeGeogcs,ee.PeGeogtran,ee.PeObject,ee.PeParameter,ee.PePrimem,ee.PeProjcs,ee.PeSpheroid,ee.PeUnit];for(const n of i)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Hi.PE_NAME_MAX))});for(const n of[ee.PeGeogtran,ee.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Hi.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const h=ee.getValue(l,"*");a[u]=h?ee.wrapPointer(h,ee.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(ee.PeHorizon.prototype,"getCoord",n=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return Ed(l,a,n.call(this),o),l}),t(ee.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=ee._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!ee.compare(l,ee.NULL)){a=[l];const u=this.getSteps();if(u>1){const h=ee.getPointer(l);for(let p=1;p<u;p++)a.push(ee.wrapPointer(h+o*p,ee.PeGTlistExtendedGTs))}}return a}});const r=ee._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!ee.compare(l,ee.NULL)){a=[l];const u=l.getNump();if(u>1){const h=ee.getPointer(l);for(let p=1;p<u;p++)a.push(ee.wrapPointer(h+r*p,ee.PeHorizon))}}return o.set(n,a),a};t(ee.PeProjcs.prototype,"horizonGcsGenerate",s),t(ee.PeProjcs.prototype,"horizonPcsGenerate",s),ee.PeObject.prototype.toString=function(n=Hi.PE_STR_OPTS_NONE){ee.ensureCache.prepare();const o=ee.getPointer(this),a=ee.ensureInt8(new Array(Hi.PE_BUFFER_MAX));return ee.UTF8ToString(ee._pe_object_to_string_ext(o,n,a))},ee.PeGeogcs.prototype.destroy=function(){this.Delete(),Fl(this),this.ptr=0},ee.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},ee.PeProjcs.prototype.destroy=function(){this.Delete(),Fl(this),this.ptr=0},ee.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Fl(e){if(!e)return;const t=ee.getClass(e);if(!t)return;const i=ee.getCache(t);if(!i)return;const r=ee.getPointer(e);r&&delete i[r]}function oT(e,t){const i=[],r=new Array(t);for(let s=0;s<e;s++)i.push(ee.ensureInt8(r));return i}function ty(e){return ArrayBuffer.isView(e)?e:Array.isArray(e[0])?e.flat():e}function Ed(e,t,i,r=!1){if(r)for(let s=0;s<2*t;s++)e[s]=ee.getValue(i+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=ee.getValue(i,"double"),e[n][1]=ee.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function i(){e.PE_GTLIST_OPTS_COMMON=ee.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ee._pe_getPeGTlistExtendedEntrySize()}function r(s,n,o,a,l,u){let h=null;const p=new ee.PeInteger(u);try{const f=ee.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,p);if((u=p.val)&&(h=[f],u>1)){const m=ee.getPointer(f);for(let g=1;g<u;g++)h.push(ee.wrapPointer(m+t*g,ee.PeGTlistExtendedEntry))}}finally{ee.destroy(p)}return h}e.init=i,e.getGTlist=r})(l3||(l3={})),function(e){function t(i){if(i?.length){for(const r of i)Fl(r),r.getEntries().forEach(s=>{Fl(s);const n=s.getGeogtran();Fl(n),n.getParameters().forEach(Fl),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{Fl(o);const a=o.getDatum();Fl(a),Fl(a.getSpheroid()),Fl(o.getPrimem()),Fl(o.getUnit())})});ee.PeGTlistExtendedEntry.prototype.Delete(i[0])}}e.destroy=t}(UO||(UO={})),function(e){function t(i,r,s,n,o){ee.ensureCache.prepare();const a=ty(s),l=s===a,u=ee.ensureFloat64(a);let h=0;n&&(h=ee.ensureFloat64(n));const p=ee._pe_geog_to_geog(ee.getPointer(i),r,u,h,o);return p&&Ed(s,r,u,l),p}e.geogToGeog=t}(VO||(VO={})),function(e){function t(n,o,a,l,u,h,p,f){ee.PeLineType.prototype.geodesic_coordinate(n,o,a,l,u,h,p,f)}function i(n,o,a,l,u,h,p,f,m){ee.PeLineType.prototype.geodetic_coordinate(n,o,a,l,u,h,p,f,m)}function r(n,o,a,l,u,h,p,f,m,g){ee.PeLineType.prototype.geodetic_distance(n,o,a,l,u,h,p,f,m,g)}function s(n,o,a,l,u,h,p,f,m){ee.PeLineType.prototype.great_elliptic_distance(n,o,a,l,u,h,p,f,m)}e.geodesicCoordinate=t,e.geodeticCoordinate=i,e.geodeticDistance=r,e.greatEllipticDistance=s}(GO||(GO={})),function(e){function t(o,a){return ee.PeMath.prototype.phi_to_eta(o,a)}function i(o,a){return ee.PeMath.prototype.eta_to_phi(o,a)}function r(o,a){return ee.PeMath.prototype.phi_to_phig(o,a)}function s(o,a,l){return ee.PeMath.prototype.q(o,a,l)}function n(o,a){return ee.PeMath.prototype.q90(o,a)}e.phiToEta=t,e.etaToPhi=i,e.phiToPhig=r,e.q=s,e.q90=n}(BO||(BO={})),function(e){const t=(u,h,p,f,m,g)=>{let b,w;switch(ee.ensureCache.prepare(),u){case"dd":b=ee._pe_geog_to_dd,w=Hi.PE_DD_MAX;break;case"ddm":b=ee._pe_geog_to_ddm,w=Hi.PE_DDM_MAX;break;case"dms":b=ee._pe_geog_to_dms,w=Hi.PE_DMS_MAX}let S=0;h&&(S=ee.getPointer(h));const T=ty(f),x=ee.ensureFloat64(T),_=oT(p,w),M=b(S,p,x,m,ee.ensureInt32(_));if(M)for(let I=0;I<p;I++)g[I]=ee.UTF8ToString(_[I]);return M},i=(u,h,p,f,m)=>{let g;switch(ee.ensureCache.prepare(),u){case"dd":g=ee._pe_dd_to_geog;break;case"ddm":g=ee._pe_ddm_to_geog;break;case"dms":g=ee._pe_dms_to_geog}let b=0;h&&(b=ee.getPointer(h));const w=f.map(_=>ee.ensureString(_)),S=ee.ensureInt32(w),T=ee.ensureFloat64(new Array(2*p)),x=g(b,p,S,T);return x&&Ed(m,p,T),x};function r(u,h,p,f,m){return t("dms",u,h,p,f,m)}function s(u,h,p,f){return i("dms",u,h,p,f)}function n(u,h,p,f,m){return t("ddm",u,h,p,f,m)}function o(u,h,p,f){return i("ddm",u,h,p,f)}function a(u,h,p,f,m){return t("dd",u,h,p,f,m)}function l(u,h,p,f){return i("dd",u,h,p,f)}e.geogToDms=r,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(zO||(zO={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ee.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ee.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ee.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ee.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ee.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(s,n,o,a,l,u,h){ee.ensureCache.prepare();let p=0;s&&(p=ee.getPointer(s));const f=ty(o),m=ee.ensureFloat64(f),g=oT(n,Hi.PE_MGRS_MAX),b=ee.ensureInt32(g),w=ee._pe_geog_to_mgrs_extended(p,n,m,a,l,u,b);if(w)for(let S=0;S<n;S++)h[S]=ee.UTF8ToString(g[S]);return w}function r(s,n,o,a,l){ee.ensureCache.prepare();let u=0;s&&(u=ee.getPointer(s));const h=o.map(g=>ee.ensureString(g)),p=ee.ensureInt32(h),f=ee.ensureFloat64(new Array(2*n)),m=ee._pe_mgrs_to_geog_extended(u,n,p,a,f);return m&&Ed(l,n,f),m}e.init=t,e.geogToMgrsExtended=i,e.mgrsToGeogExtended=r}(u3||(u3={})),function(e){function t(r,s,n,o,a,l,u){ee.ensureCache.prepare();let h=0;r&&(h=ee.getPointer(r));const p=ty(n),f=ee.ensureFloat64(p),m=oT(s,Hi.PE_MGRS_MAX),g=ee.ensureInt32(m),b=ee._pe_geog_to_usng(h,s,f,o,a,l,g);if(b)for(let w=0;w<s;w++)u[w]=ee.UTF8ToString(m[w]);return b}function i(r,s,n,o){ee.ensureCache.prepare();let a=0;r&&(a=ee.getPointer(r));const l=n.map(f=>ee.ensureString(f)),u=ee.ensureInt32(l),h=ee.ensureFloat64(new Array(2*s)),p=ee._pe_usng_to_geog(a,s,u,h);return p&&Ed(o,s,h),p}e.geogToUsng=t,e.usngToGeog=i}(qO||(qO={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ee.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ee.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ee.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(s,n,o,a,l){ee.ensureCache.prepare();let u=0;s&&(u=ee.getPointer(s));const h=ty(o),p=ee.ensureFloat64(h),f=oT(n,Hi.PE_UTM_MAX),m=ee.ensureInt32(f),g=ee._pe_geog_to_utm(u,n,p,a,m);if(g)for(let b=0;b<n;b++)l[b]=ee.UTF8ToString(f[b]);return g}function r(s,n,o,a,l){ee.ensureCache.prepare();let u=0;s&&(u=ee.getPointer(s));const h=o.map(g=>ee.ensureString(g)),p=ee.ensureInt32(h),f=ee.ensureFloat64(new Array(2*n)),m=ee._pe_utm_to_geog(u,n,p,a,f);return m&&Ed(l,n,f),m}e.init=t,e.geogToUtm=i,e.utmToGeog=r}(c3||(c3={})),function(e){const t=new Map;function i(){e.PE_PCSINFO_OPTION_NONE=ee.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ee.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ee.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ee.PePCSInfo.prototype.PE_POLE_POINT}function r(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=ee.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=i,e.generate=r}(h3||(h3={})),function(e){function t(){return ee.PeVersion.prototype.version_string()}e.versionString=t}(HO||(HO={}));const ive=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return FO},get PeDefs(){return Hi},get PeDouble(){return LQ},get PeFactory(){return jO},get PeGCSExtent(){return NQ},get PeGTTransformations(){return VO},get PeGTlistExtended(){return l3},get PeGTlistExtendedEntry(){return UO},get PeLineType(){return GO},get PeMath(){return BO},get PeNotationDms(){return zO},get PeNotationMgrs(){return u3},get PeNotationUsng(){return qO},get PeNotationUtm(){return c3},get PePCSInfo(){return h3},get PeVersion(){return HO},_init:kQ,get _pe(){return ee},isLoaded:TF,isSupported:tve,load:PQ},Symbol.toStringTag,{value:"Module"}));var By;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(By||(By={}));let v;const j={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(v=2e3;v<=2045;v++)j[v]=0;for(v=2056;v<=2065;v++)j[v]=0;for(v=2067;v<=2135;v++)j[v]=0;for(v=2137;v<=2154;v++)j[v]=0;for(v=2161;v<=2170;v++)j[v]=0;for(v=2172;v<=2193;v++)j[v]=0;for(v=2195;v<=2198;v++)j[v]=0;for(v=2200;v<=2203;v++)j[v]=0;for(v=2205;v<=2217;v++)j[v]=0;for(v=2222;v<=2224;v++)j[v]=1;for(v=2225;v<=2250;v++)j[v]=2;for(v=2251;v<=2253;v++)j[v]=1;for(v=2257;v<=2264;v++)j[v]=2;for(v=2274;v<=2279;v++)j[v]=2;for(v=2280;v<=2282;v++)j[v]=1;for(v=2283;v<=2289;v++)j[v]=2;for(v=2290;v<=2292;v++)j[v]=0;for(v=2308;v<=2313;v++)j[v]=0;for(v=2315;v<=2491;v++)j[v]=0;for(v=2494;v<=2866;v++)j[v]=0;for(v=2867;v<=2869;v++)j[v]=1;for(v=2870;v<=2888;v++)j[v]=2;for(v=2891;v<=2895;v++)j[v]=2;for(v=2896;v<=2898;v++)j[v]=1;for(v=2902;v<=2908;v++)j[v]=2;for(v=2915;v<=2920;v++)j[v]=2;for(v=2921;v<=2923;v++)j[v]=1;for(v=2924;v<=2930;v++)j[v]=2;for(v=2931;v<=2962;v++)j[v]=0;for(v=2964;v<=2968;v++)j[v]=2;for(v=2969;v<=2973;v++)j[v]=0;for(v=2975;v<=2991;v++)j[v]=0;for(v=2995;v<=3051;v++)j[v]=0;for(v=3054;v<=3079;v++)j[v]=0;for(v=3081;v<=3088;v++)j[v]=0;for(v=3092;v<=3101;v++)j[v]=0;for(v=3106;v<=3138;v++)j[v]=0;for(v=3146;v<=3151;v++)j[v]=0;for(v=3153;v<=3166;v++)j[v]=0;for(v=3168;v<=3172;v++)j[v]=0;for(v=3174;v<=3203;v++)j[v]=0;for(v=3294;v<=3358;v++)j[v]=0;for(v=3367;v<=3403;v++)j[v]=0;for(v=3408;v<=3416;v++)j[v]=0;for(v=3417;v<=3438;v++)j[v]=2;for(v=3441;v<=3446;v++)j[v]=2;for(v=3447;v<=3450;v++)j[v]=0;for(v=3451;v<=3459;v++)j[v]=2;for(v=3460;v<=3478;v++)j[v]=0;for(v=3554;v<=3559;v++)j[v]=0;for(v=3560;v<=3570;v++)j[v]=2;for(v=3571;v<=3581;v++)j[v]=0;for(v=3594;v<=3597;v++)j[v]=0;for(v=3601;v<=3604;v++)j[v]=0;for(v=3637;v<=3639;v++)j[v]=0;for(v=3665;v<=3667;v++)j[v]=0;for(v=3693;v<=3695;v++)j[v]=0;for(v=3701;v<=3727;v++)j[v]=0;for(v=3728;v<=3739;v++)j[v]=2;for(v=3740;v<=3751;v++)j[v]=0;for(v=3753;v<=3760;v++)j[v]=2;for(v=3761;v<=3773;v++)j[v]=0;for(v=3775;v<=3777;v++)j[v]=0;for(v=3779;v<=3781;v++)j[v]=0;for(v=3783;v<=3785;v++)j[v]=0;for(v=3788;v<=3791;v++)j[v]=0;for(v=3797;v<=3802;v++)j[v]=0;for(v=3814;v<=3816;v++)j[v]=0;for(v=3825;v<=3829;v++)j[v]=0;for(v=3832;v<=3841;v++)j[v]=0;for(v=3844;v<=3852;v++)j[v]=0;for(v=3873;v<=3885;v++)j[v]=0;for(v=3890;v<=3893;v++)j[v]=0;for(v=3907;v<=3912;v++)j[v]=0;for(v=3942;v<=3950;v++)j[v]=0;for(v=3968;v<=3970;v++)j[v]=0;for(v=3973;v<=3976;v++)j[v]=0;for(v=3986;v<=3989;v++)j[v]=0;for(v=3994;v<=3997;v++)j[v]=0;for(v=4048;v<=4051;v++)j[v]=0;for(v=4056;v<=4063;v++)j[v]=0;for(v=4093;v<=4096;v++)j[v]=0;for(v=4390;v<=4398;v++)j[v]=0;for(v=4399;v<=4413;v++)j[v]=2;for(v=4418;v<=4433;v++)j[v]=2;for(v=4455;v<=4457;v++)j[v]=2;for(v=4484;v<=4489;v++)j[v]=0;for(v=4491;v<=4554;v++)j[v]=0;for(v=4568;v<=4589;v++)j[v]=0;for(v=4652;v<=4656;v++)j[v]=0;for(v=4766;v<=4800;v++)j[v]=0;for(v=5014;v<=5016;v++)j[v]=0;for(v=5069;v<=5072;v++)j[v]=0;for(v=5105;v<=5130;v++)j[v]=0;for(v=5167;v<=5188;v++)j[v]=0;for(v=5253;v<=5259;v++)j[v]=0;for(v=5269;v<=5275;v++)j[v]=0;for(v=5292;v<=5311;v++)j[v]=0;for(v=5329;v<=5331;v++)j[v]=0;for(v=5343;v<=5349;v++)j[v]=0;for(v=5355;v<=5357;v++)j[v]=0;for(v=5387;v<=5389;v++)j[v]=0;for(v=5459;v<=5463;v++)j[v]=0;for(v=5479;v<=5482;v++)j[v]=0;for(v=5518;v<=5520;v++)j[v]=0;for(v=5530;v<=5539;v++)j[v]=0;for(v=5550;v<=5552;v++)j[v]=0;for(v=5562;v<=5583;v++)j[v]=0;for(v=5623;v<=5625;v++)j[v]=2;for(v=5631;v<=5639;v++)j[v]=0;for(v=5649;v<=5653;v++)j[v]=0;for(v=5663;v<=5680;v++)j[v]=0;for(v=5682;v<=5685;v++)j[v]=0;for(v=5875;v<=5877;v++)j[v]=0;for(v=5896;v<=5899;v++)j[v]=0;for(v=5921;v<=5940;v++)j[v]=0;for(v=6050;v<=6125;v++)j[v]=0;for(v=6244;v<=6275;v++)j[v]=0;for(v=6328;v<=6348;v++)j[v]=0;for(v=6350;v<=6356;v++)j[v]=0;for(v=6366;v<=6372;v++)j[v]=0;for(v=6381;v<=6387;v++)j[v]=0;for(v=6393;v<=6404;v++)j[v]=0;for(v=6480;v<=6483;v++)j[v]=0;for(v=6511;v<=6514;v++)j[v]=0;for(v=6579;v<=6581;v++)j[v]=0;for(v=6619;v<=6624;v++)j[v]=0;for(v=6625;v<=6627;v++)j[v]=2;for(v=6628;v<=6632;v++)j[v]=0;for(v=6634;v<=6637;v++)j[v]=0;for(v=6669;v<=6692;v++)j[v]=0;for(v=6707;v<=6709;v++)j[v]=0;for(v=6720;v<=6723;v++)j[v]=0;for(v=6732;v<=6738;v++)j[v]=0;for(v=6931;v<=6933;v++)j[v]=0;for(v=6956;v<=6959;v++)j[v]=0;for(v=7005;v<=7007;v++)j[v]=0;for(v=7057;v<=7070;v++)j[v]=2;for(v=7074;v<=7082;v++)j[v]=0;for(v=7109;v<=7118;v++)j[v]=0;for(v=7119;v<=7127;v++)j[v]=1;for(v=7374;v<=7376;v++)j[v]=0;for(v=7528;v<=7586;v++)j[v]=0;for(v=7587;v<=7645;v++)j[v]=2;for(v=7692;v<=7696;v++)j[v]=0;for(v=7755;v<=7787;v++)j[v]=0;for(v=7791;v<=7795;v++)j[v]=0;for(v=7799;v<=7801;v++)j[v]=0;for(v=7803;v<=7805;v++)j[v]=0;for(v=7825;v<=7831;v++)j[v]=0;for(v=7845;v<=7859;v++)j[v]=0;for(v=8013;v<=8032;v++)j[v]=0;for(v=8065;v<=8068;v++)j[v]=1;for(v=8518;v<=8529;v++)j[v]=2;for(v=8533;v<=8536;v++)j[v]=2;for(v=8538;v<=8540;v++)j[v]=2;for(v=8677;v<=8679;v++)j[v]=0;for(v=8836;v<=8840;v++)j[v]=0;for(v=8857;v<=8859;v++)j[v]=0;for(v=8908;v<=8910;v++)j[v]=0;for(v=9154;v<=9159;v++)j[v]=0;for(v=9205;v<=9218;v++)j[v]=0;for(v=9271;v<=9273;v++)j[v]=0;for(v=9295;v<=9297;v++)j[v]=0;for(v=9356;v<=9360;v++)j[v]=0;for(v=9404;v<=9407;v++)j[v]=0;for(v=9476;v<=9482;v++)j[v]=0;for(v=9487;v<=9494;v++)j[v]=0;for(v=9697;v<=9699;v++)j[v]=0;for(v=9821;v<=9865;v++)j[v]=0;for(v=10285;v<=10291;v++)j[v]=0;for(v=10314;v<=10317;v++)j[v]=0;for(v=10448;v<=10465;v++)j[v]=0;for(v=10731;v<=10733;v++)j[v]=0;for(v=11114;v<=11118;v++)j[v]=0;for(v=20004;v<=20032;v++)j[v]=0;for(v=20047;v<=20049;v++)j[v]=0;for(v=20062;v<=20092;v++)j[v]=0;for(v=20135;v<=20138;v++)j[v]=0;for(v=20248;v<=20258;v++)j[v]=0;for(v=20348;v<=20358;v++)j[v]=0;for(v=20436;v<=20440;v++)j[v]=0;for(v=20822;v<=20824;v++)j[v]=0;for(v=20904;v<=20932;v++)j[v]=0;for(v=20934;v<=20936;v++)j[v]=0;for(v=21004;v<=21032;v++)j[v]=0;for(v=21035;v<=21037;v++)j[v]=0;for(v=21095;v<=21097;v++)j[v]=0;for(v=21148;v<=21150;v++)j[v]=0;for(v=21207;v<=21264;v++)j[v]=0;for(v=21307;v<=21364;v++)j[v]=0;for(v=21413;v<=21423;v++)j[v]=0;for(v=21453;v<=21463;v++)j[v]=0;for(v=21473;v<=21483;v++)j[v]=0;for(v=21780;v<=21782;v++)j[v]=0;for(v=21891;v<=21894;v++)j[v]=0;for(v=21896;v<=21899;v++)j[v]=0;for(v=22171;v<=22177;v++)j[v]=0;for(v=22181;v<=22187;v++)j[v]=0;for(v=22191;v<=22197;v++)j[v]=0;for(v=22207;v<=22222;v++)j[v]=0;for(v=22229;v<=22232;v++)j[v]=0;for(v=22234;v<=22236;v++)j[v]=0;for(v=22243;v<=22250;v++)j[v]=0;for(v=22262;v<=22265;v++)j[v]=0;for(v=22307;v<=22322;v++)j[v]=0;for(v=22348;v<=22357;v++)j[v]=0;for(v=22407;v<=22422;v++)j[v]=0;for(v=22462;v<=22465;v++)j[v]=0;for(v=22521;v<=22525;v++)j[v]=0;for(v=22607;v<=22622;v++)j[v]=0;for(v=22641;v<=22646;v++)j[v]=0;for(v=22648;v<=22657;v++)j[v]=0;for(v=22707;v<=22722;v++)j[v]=0;for(v=22762;v<=22765;v++)j[v]=0;for(v=22807;v<=22822;v++)j[v]=0;for(v=22991;v<=22994;v++)j[v]=0;for(v=23028;v<=23038;v++)j[v]=0;for(v=23301;v<=23333;v++)j[v]=2;for(v=23830;v<=23853;v++)j[v]=0;for(v=23866;v<=23872;v++)j[v]=0;for(v=23877;v<=23884;v++)j[v]=0;for(v=23886;v<=23894;v++)j[v]=0;for(v=23946;v<=23948;v++)j[v]=0;for(v=24311;v<=24313;v++)j[v]=0;for(v=24342;v<=24347;v++)j[v]=0;for(v=24370;v<=24374;v++)j[v]=10;for(v=24375;v<=24381;v++)j[v]=0;for(v=24718;v<=24721;v++)j[v]=0;for(v=24817;v<=24821;v++)j[v]=0;for(v=24877;v<=24882;v++)j[v]=0;for(v=24891;v<=24893;v++)j[v]=0;for(v=25391;v<=25395;v++)j[v]=0;for(v=25828;v<=25838;v++)j[v]=0;for(v=26191;v<=26195;v++)j[v]=0;for(v=26391;v<=26393;v++)j[v]=0;for(v=26701;v<=26722;v++)j[v]=0;for(v=26729;v<=26799;v++)j[v]=2;for(v=26801;v<=26803;v++)j[v]=2;for(v=26811;v<=26813;v++)j[v]=2;for(v=26847;v<=26870;v++)j[v]=2;for(v=26891;v<=26899;v++)j[v]=0;for(v=26901;v<=26923;v++)j[v]=0;for(v=26929;v<=26946;v++)j[v]=0;for(v=26948;v<=26998;v++)j[v]=0;for(v=27037;v<=27040;v++)j[v]=0;for(v=27205;v<=27232;v++)j[v]=0;for(v=27258;v<=27260;v++)j[v]=0;for(v=27391;v<=27398;v++)j[v]=0;for(v=27561;v<=27564;v++)j[v]=0;for(v=27571;v<=27574;v++)j[v]=0;for(v=27581;v<=27584;v++)j[v]=0;for(v=27591;v<=27594;v++)j[v]=0;for(v=27700;v<=27707;v++)j[v]=0;for(v=28191;v<=28193;v++)j[v]=0;for(v=28348;v<=28358;v++)j[v]=0;for(v=28402;v<=28432;v++)j[v]=0;for(v=28462;v<=28492;v++)j[v]=0;for(v=29118;v<=29122;v++)j[v]=0;for(v=29168;v<=29172;v++)j[v]=0;for(v=29177;v<=29185;v++)j[v]=0;for(v=29187;v<=29195;v++)j[v]=0;for(v=29900;v<=29903;v++)j[v]=0;for(v=30161;v<=30179;v++)j[v]=0;for(v=30491;v<=30494;v++)j[v]=0;for(v=30729;v<=30732;v++)j[v]=0;for(v=31251;v<=31259;v++)j[v]=0;for(v=31265;v<=31268;v++)j[v]=0;for(v=31275;v<=31279;v++)j[v]=0;for(v=31281;v<=31297;v++)j[v]=0;for(v=31461;v<=31469;v++)j[v]=0;for(v=31491;v<=31495;v++)j[v]=0;for(v=31917;v<=31922;v++)j[v]=0;for(v=31965;v<=32e3;v++)j[v]=0;for(v=32001;v<=32003;v++)j[v]=2;for(v=32005;v<=32031;v++)j[v]=2;for(v=32033;v<=32060;v++)j[v]=2;for(v=32064;v<=32067;v++)j[v]=2;for(v=32074;v<=32077;v++)j[v]=2;for(v=32081;v<=32086;v++)j[v]=0;for(v=32107;v<=32130;v++)j[v]=0;for(v=32133;v<=32159;v++)j[v]=0;for(v=32164;v<=32167;v++)j[v]=2;for(v=32180;v<=32199;v++)j[v]=0;for(v=32201;v<=32260;v++)j[v]=0;for(v=32301;v<=32360;v++)j[v]=0;for(v=32401;v<=32460;v++)j[v]=0;for(v=32501;v<=32560;v++)j[v]=0;for(v=32601;v<=32662;v++)j[v]=0;for(v=32664;v<=32667;v++)j[v]=2;for(v=32701;v<=32761;v++)j[v]=0;for(v=53001;v<=53004;v++)j[v]=0;for(v=53008;v<=53019;v++)j[v]=0;for(v=53021;v<=53032;v++)j[v]=0;for(v=53034;v<=53037;v++)j[v]=0;for(v=53042;v<=53046;v++)j[v]=0;for(v=53074;v<=53080;v++)j[v]=0;for(v=54001;v<=54004;v++)j[v]=0;for(v=54008;v<=54019;v++)j[v]=0;for(v=54021;v<=54032;v++)j[v]=0;for(v=54034;v<=54037;v++)j[v]=0;for(v=54042;v<=54046;v++)j[v]=0;for(v=54048;v<=54053;v++)j[v]=0;for(v=54074;v<=54080;v++)j[v]=0;for(v=54098;v<=54101;v++)j[v]=0;for(v=102001;v<=102040;v++)j[v]=0;for(v=102042;v<=102063;v++)j[v]=0;for(v=102065;v<=102067;v++)j[v]=0;for(v=102070;v<=102117;v++)j[v]=0;for(v=102122;v<=102216;v++)j[v]=0;for(v=102221;v<=102377;v++)j[v]=0;for(v=102382;v<=102388;v++)j[v]=0;for(v=102389;v<=102398;v++)j[v]=2;for(v=102399;v<=102444;v++)j[v]=0;for(v=102445;v<=102447;v++)j[v]=2;for(v=102448;v<=102458;v++)j[v]=0;for(v=102459;v<=102468;v++)j[v]=2;for(v=102469;v<=102499;v++)j[v]=0;for(v=102500;v<=102519;v++)j[v]=1;for(v=102520;v<=102524;v++)j[v]=0;for(v=102525;v<=102529;v++)j[v]=2;for(v=102530;v<=102588;v++)j[v]=0;for(v=102590;v<=102598;v++)j[v]=0;for(v=102601;v<=102603;v++)j[v]=0;for(v=102605;v<=102628;v++)j[v]=0;for(v=102629;v<=102646;v++)j[v]=2;for(v=102648;v<=102700;v++)j[v]=2;for(v=102701;v<=102703;v++)j[v]=0;for(v=102707;v<=102730;v++)j[v]=2;for(v=102733;v<=102758;v++)j[v]=2;for(v=102767;v<=102900;v++)j[v]=0;for(v=102901;v<=102933;v++)j[v]=2;for(v=102934;v<=102950;v++)j[v]=13;for(v=102951;v<=102963;v++)j[v]=0;for(v=102965;v<=102969;v++)j[v]=0;for(v=102971;v<=102973;v++)j[v]=0;for(v=102975;v<=102989;v++)j[v]=0;for(v=102990;v<=102992;v++)j[v]=1;for(v=102997;v<=103002;v++)j[v]=0;for(v=103003;v<=103008;v++)j[v]=2;for(v=103009;v<=103011;v++)j[v]=0;for(v=103012;v<=103014;v++)j[v]=2;for(v=103019;v<=103021;v++)j[v]=0;for(v=103022;v<=103024;v++)j[v]=2;for(v=103029;v<=103031;v++)j[v]=0;for(v=103032;v<=103034;v++)j[v]=2;for(v=103065;v<=103068;v++)j[v]=0;for(v=103074;v<=103076;v++)j[v]=0;for(v=103077;v<=103079;v++)j[v]=1;for(v=103080;v<=103082;v++)j[v]=0;for(v=103083;v<=103085;v++)j[v]=2;for(v=103090;v<=103093;v++)j[v]=0;for(v=103097;v<=103099;v++)j[v]=0;for(v=103100;v<=103102;v++)j[v]=2;for(v=103107;v<=103109;v++)j[v]=0;for(v=103110;v<=103112;v++)j[v]=2;for(v=103113;v<=103116;v++)j[v]=0;for(v=103117;v<=103120;v++)j[v]=2;for(v=103153;v<=103157;v++)j[v]=0;for(v=103158;v<=103162;v++)j[v]=2;for(v=103163;v<=103165;v++)j[v]=0;for(v=103166;v<=103168;v++)j[v]=1;for(v=103169;v<=103171;v++)j[v]=2;for(v=103186;v<=103188;v++)j[v]=0;for(v=103189;v<=103191;v++)j[v]=2;for(v=103192;v<=103195;v++)j[v]=0;for(v=103196;v<=103199;v++)j[v]=2;for(v=103200;v<=103224;v++)j[v]=0;for(v=103225;v<=103227;v++)j[v]=1;for(v=103232;v<=103237;v++)j[v]=0;for(v=103238;v<=103243;v++)j[v]=2;for(v=103244;v<=103246;v++)j[v]=0;for(v=103247;v<=103249;v++)j[v]=2;for(v=103254;v<=103256;v++)j[v]=0;for(v=103257;v<=103259;v++)j[v]=2;for(v=103264;v<=103266;v++)j[v]=0;for(v=103267;v<=103269;v++)j[v]=2;for(v=103300;v<=103375;v++)j[v]=0;for(v=103381;v<=103383;v++)j[v]=0;for(v=103384;v<=103386;v++)j[v]=1;for(v=103387;v<=103389;v++)j[v]=0;for(v=103390;v<=103392;v++)j[v]=2;for(v=103397;v<=103399;v++)j[v]=0;for(v=103400;v<=103471;v++)j[v]=2;for(v=103476;v<=103478;v++)j[v]=0;for(v=103479;v<=103481;v++)j[v]=2;for(v=103486;v<=103488;v++)j[v]=0;for(v=103489;v<=103491;v++)j[v]=2;for(v=103492;v<=103495;v++)j[v]=0;for(v=103496;v<=103499;v++)j[v]=2;for(v=103528;v<=103543;v++)j[v]=0;for(v=103544;v<=103548;v++)j[v]=2;for(v=103549;v<=103551;v++)j[v]=0;for(v=103552;v<=103554;v++)j[v]=1;for(v=103555;v<=103557;v++)j[v]=2;for(v=103558;v<=103560;v++)j[v]=0;for(v=103571;v<=103573;v++)j[v]=0;for(v=103574;v<=103576;v++)j[v]=2;for(v=103577;v<=103580;v++)j[v]=0;for(v=103581;v<=103583;v++)j[v]=2;for(v=103595;v<=103694;v++)j[v]=0;for(v=103696;v<=103699;v++)j[v]=0;for(v=103700;v<=103793;v++)j[v]=2;for(v=103794;v<=103890;v++)j[v]=0;for(v=103891;v<=103896;v++)j[v]=2;for(v=103900;v<=103971;v++)j[v]=2;for(v=103972;v<=103977;v++)j[v]=0;for(v=112e3;v<=112101;v++)j[v]=0;const DQ=[102100,102113,3857,3785,900913],rve=[104905,104971],sve=[4326,...DQ,...rve],F2=[-20037508342788905e-9,20037508342788905e-9],WO=[-20037508342787e-6,20037508342787e-6],j5={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:F2,origin:WO,dx:1e-5},FQ={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:F2,origin:WO,dx:1e-5},102100:j5,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:F2,origin:WO,dx:1e-5},3857:j5,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:j5};function Xi(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const i=e.wkid,r=t.wkid;if(i!=null||r!=null){if(i===r||ga(e)&&ga(t))return!0;const o=e.latestWkid;if(o!=null&&r===o)return!0;const a=t.latestWkid;return a!=null&&i===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Cn(e){const t=e?.wkid;return t!=null&&t>=2e3&&FQ[t]||null}function Xd(e){if(!e)return;const{wkid:t,vcsWkid:i}=e;if(t)return i?JSON.stringify({wkid:t,vcsWkid:i}):String(t);const r=e.wkt||e.wkt2;return JSON.stringify(r?i?{wkt:r,vcsWkid:i}:{wkt:r}:{})}function ZS(e){if(!Kn(e))return!1;const{wkid:t}=e;if(t)return j[t]==null;const i=e.wkt2||e.wkt;return!!i&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(i)}function nve(e){return!(jQ(e)||UQ(e))}function zy(e){return e?.wkid===4326}function gut(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function WU(e){return e?.wkid===By.CGCS2000}function ga(e){const t=e?.wkid;return t!=null&&t>=2e3&&DQ.includes(t)}function ove(e){return e?.wkid===32662}function _$(e){return e===By.GCSMARS2000||e===By.GCSMARS2000_SPHERE}function jQ(e){return _$(e?.wkid)}function S$(e){return e===By.GCSMOON2000}function UQ(e){return S$(e?.wkid)}function ave(e){const t=e?.wkid;return t!=null&&t>=2e3&&sve.includes(t)}function Kn(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const p3={wkid:4326,wkt:a$(FQ[4326].wkTemplate,{Central_Meridian:"0.0"})},VQ={wkid:102100,latestWkid:3857},lve={wkid:32662};function EF(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const uve=EF(mr),MF=EF(lc),IF=EF(Kd),cve={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${mr.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},hve=MF.wkt.toUpperCase(),pve=IF.wkt.toUpperCase();function dve(e){if(e!=null&&Kn(e)){const t=e.wkid,i=e.wkt2??e.wkt;if(_$(t))return lc;const r=i?.toUpperCase();if(i&&r===hve)return lc;if(S$(t)||r&&r===pve)return Kd}return mr}function vut(e){return _$(e)?lc:S$(e)?Kd:mr}function d3(e){return Xi(e,uve)}function Qd(e){return d3(e)||Xi(e,MF)||Xi(e,IF)}const GQ=39.37,fve=mr.radius*Math.PI/200,BQ=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,xy=j,zQ=/UNIT\[([^\]]+)]/i,mve=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),yve=ar()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain:"chains",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),mu=e=>e*e,_p=e=>e*e*e,j2={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937},"clarke-feet":{inBaseUnits:.3047972654},"clarke-yards":{inBaseUnits:.9143917962},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"gold-coast-feet":{inBaseUnits:.3047997101815088},chains:{inBaseUnits:20.1168},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:mu(.001)},"square-centimeters":{inBaseUnits:mu(.01)},"square-decimeters":{inBaseUnits:mu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:mu(1e3)},"square-inches":{inBaseUnits:mu(.0254)},"square-feet":{inBaseUnits:mu(.3048)},"square-yards":{inBaseUnits:mu(.9144)},"square-miles":{inBaseUnits:mu(1609.344)},"square-us-feet":{inBaseUnits:mu(1200/3937)},acres:{inBaseUnits:.0015625*mu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*_p(.001)},"cubic-centimeters":{inBaseUnits:1e3*_p(.01)},"cubic-decimeters":{inBaseUnits:1e3*_p(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*_p(1e3)},"cubic-inches":{inBaseUnits:1e3*_p(.0254)},"cubic-feet":{inBaseUnits:1e3*_p(.3048)},"cubic-yards":{inBaseUnits:1e3*_p(.9144)},"cubic-miles":{inBaseUnits:1e3*_p(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},gve=(()=>{const e={};for(const t in j2)for(const i in j2[t].units)e[i]=t;return e})();function vve(e,t,i){return e*j2[i].units[t].inBaseUnits}function bve(e,t,i){return e/j2[i].units[t].inBaseUnits}const qQ=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],wve=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function JO(e){const t=gve[e];if(!t)throw new Error("unknown type");return t}function JU(e,t=null){return t=t||JO(e),j2[t].baseUnit===e}function _s(e,t,i){if(t===i)return e;const r=JO(t);if(r!==JO(i))throw new Error("incompatible units");const s=JU(t,r)?e:vve(e,t,r);return JU(i,r)?s:bve(s,i,r)}function _ve(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function but(e){return _ve(e)}function wut(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function _ut(e,t){const i=_s(e,t,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Sut(e,t){const i=_s(e,t,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function xut(e,t){const i=_s(e,t,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Tut(e,t){const i=_s(e,t,"feet");return Math.abs(i)<1e5?"feet":"miles"}function Eut(e,t){const i=_s(e,t,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function Mut(e,t){const i=_s(e,t,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Sve(e,t,i){return _s(e,t,"meters")/(i*Math.PI/180)}function HQ(e){return yve.fromJSON(e.toLowerCase())||null}function u1(e){if(e!=null&&!nve(e))return 1;const t=$c(e);return t>1e5?1:t}function WQ(e){return $c(e)>=dve(e).metersPerDegree?"meters":Q1(e)}function $c(e,t=mr.metersPerDegree){return xve(e,!0)??t}function xve(e,t=!1){const i=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let s=null;if(i){if(_$(i))return lc.metersPerDegree;if(S$(i))return Kd.metersPerDegree;s=xy.values[xy[i]],!s&&t&&mve.has(i)&&(s=fve)}else r&&(YQ(r)?s=ZU(BQ.exec(r),s):ZQ(r)&&(s=ZU(zQ.exec(r),s)));return s}function Iut(e){return ZS(e)?1:$c(e)}function ZU(e,t){return e?.[1]?JQ(e[1]):t}function JQ(e){return parseFloat(e.split(",")[1])}function Q1(e){const t=e?.wkid??null,i=e?.wkt2??e?.wkt??null;let r=null;if(t)r=xy.units[xy[t]];else if(i){const s=YQ(i)?BQ:ZQ(i)?zQ:null;if(s){const n=s.exec(i);n?.[1]&&(r=Eve(n[1]))}}return r!=null?HQ(r):null}function Aut(e){const t=Q1(e);return t!=null&&qQ.includes(t)?t:null}function $ut(e){const t=WQ(e);return t!=null&&qQ.includes(t)?t:null}function Cut(e){const t=Q1(e);return t==null?null:wve.get(t)}function ZQ(e){return/^GEOCCS/i.test(e)}function YQ(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Tve=1e-7;function Eve(e){let i=/[\\"']{1}([^\\"']+)/.exec(e)?.[1];if(!i||!xy.units.includes(i)){const r=JQ(e);i=null;const s=xy.values;for(let n=0;n<s.length;++n)if(Math.abs(r-s[n])<Tve){i=xy.units[n];break}}return i}function Rut(e){const t=Q1(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"chains":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const Mve={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Ive={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Ave={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},U2=ar()(Mve),tp=ar()(Ive),f3=ar()(Ave);var bu;let mi=bu=class extends ae{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return bu.WebMercator;if(e?.wkid===4326)return bu.WGS84;const t=new bu;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return zy(this)}get isWebMercator(){return ga(this)}get isGeographic(){return ZS(this)}get isWrappable(){return ave(this)}get metersPerUnit(){return $c(this)}get unit(){return Q1(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===bu.WGS84)return new bu(p3);if(this===bu.WebMercator)return new bu(VQ);const e=new bu;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=K(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:i}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||r?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):i?s.id===t&&s.referenceServiceName===i:s.id===t}return Xi(this,e)}toJSON(e){return this.write(void 0,e)}};mi.GCS_NAD_1927=null,mi.WGS84=null,mi.WebMercator=null,mi.PlateCarree=null,c([d({readOnly:!0})],mi.prototype,"isWGS84",null),c([d({readOnly:!0})],mi.prototype,"isWebMercator",null),c([d({readOnly:!0})],mi.prototype,"isGeographic",null),c([d({readOnly:!0})],mi.prototype,"isWrappable",null),c([d({type:vt,json:{write:!0}})],mi.prototype,"latestWkid",void 0),c([d({readOnly:!0})],mi.prototype,"metersPerUnit",null),c([d({readOnly:!0})],mi.prototype,"unit",null),c([d({type:vt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],mi.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],mi.prototype,"wkt",void 0),c([ge("wkt"),ge("web-scene","wkt")],mi.prototype,"writeWkt",null),c([d({type:String,json:{write:!1}})],mi.prototype,"wkt2",void 0),c([d({type:vt,json:{write:!0}})],mi.prototype,"vcsWkid",void 0),c([d({type:vt,json:{write:!0}})],mi.prototype,"latestVcsWkid",void 0),c([d()],mi.prototype,"imageCoordinateSystem",void 0),mi=bu=c([F("esri.geometry.SpatialReference")],mi),mi.prototype.toJSON.isDefaultToJSON=!0,mi.GCS_NAD_1927=Je.freeze(new mi({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),mi.WGS84=Je.freeze(new mi(p3)),mi.WebMercator=Je.freeze(new mi(VQ)),mi.PlateCarree=Je.freeze(new mi(lve));const ke=mi;function ue(e,t,i){let r,s;return t===void 0||Array.isArray(t)?(s=e,i=t,r=[void 0]):(s=t,r=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;r.forEach(l=>{const u=WX(n,l,s);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let wu=class extends ae{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=ke.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,i){if(t instanceof ke)return t;if(t!=null){const r=new ke;return r.read(t,i),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,i){this.cache[t]=i}};c([d()],wu.prototype,"type",void 0),c([d({readOnly:!0})],wu.prototype,"cache",null),c([d({readOnly:!0})],wu.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wu.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],wu.prototype,"hasZ",void 0),c([d({type:ke,json:{write:!0},value:ke.WGS84})],wu.prototype,"spatialReference",void 0),c([ue("spatialReference")],wu.prototype,"readSpatialReference",null),wu=c([F("esri.geometry.Geometry")],wu);const Cc=wu,$ve=Object.prototype.toString;function Cve(e){const t="__accessorMetadata__"in e?bi(e):e;return function(...i){if(i.push(t),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Rve.apply(this,i)}}function Rve(e,t,i,r){l$(e,t).cast=r}function Ove(e){return(t,i)=>{l$(t,e).cast=t[i]}}function Ht(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&$ve.call(e[0])==="[object Function]"?Cve(e[0]):e.length===1&&typeof e[0]=="string"?Ove(e[0]):void 0}const Pve=57.29577951308232,Lve=.017453292519943;function YU(e){return e*Pve}function KU(e){return e*Lve}function Put(e){return Math.PI/2-2*Math.atan(Math.exp(-e/mr.radius))}function ZO(e){return e.wkid!=null||e.wkt!=null}const U5=[0,0];function m3(e,t,i,r,s){const n=e,o=s;if(o.spatialReference=i,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,U5,r);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,U5,r),[o.xmax,o.ymax]=t(n.xmax,n.ymax,U5,r);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let u;for(let h=0;h<a.length;h++){const p=a[h];u=[],l.push(u);for(let f=0;f<p.length;f++)u.push(t(p[f][0],p[f][1],[0,0],r)),p[f].length>2&&u[f].push(p[f][2]),p[f].length>3&&u[f].push(p[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],r),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return s}function $v(e,t){const i=e&&(ZO(e)?e:e.spatialReference),r=t&&(ZO(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!i||!r)&&(!!Xi(r,i)||ga(r)&&zy(i)||ga(i)&&zy(r))}function x$(e,t){if(e==null)return null;const i=e.spatialReference,r=t&&(ZO(t)?t:t.spatialReference);return $v(i,r)?Xi(i,r)?K(e):ga(r)?m3(e,py,ke.WebMercator,!1,K(e)):zy(r)?m3(e,YS,ke.WGS84,!1,K(e)):null:null}function py(e,t,i=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=KU(t);return i[0]=KU(e)*mr.radius,i[1]=mr.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),i}function YS(e,t,i=[0,0],r=!1){if(e===F2[0])i[0]=-180;else if(e===F2[1])i[0]=180;else{const s=YU(e/mr.radius);i[0]=r?s:s-360*Math.floor((s+180)/360)}return i[1]=YU(Math.PI/2-2*Math.atan(Math.exp(-t/mr.radius))),i}function Ty(e,t=!1,i=K(e)){return m3(e,py,ke.WebMercator,t,i)}function nv(e,t=!1,i=K(e)){return m3(e,YS,ke.WGS84,t,i)}function KQ(e,t){const i=e.x-t.x,r=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(i*i+r*r+s*s)}function Nve(e){return XQ(e,QQ)?.[0]??null}function kve(e){return XQ(e,QQ)?.[1]??null}function XQ({x:e,y:t,spatialReference:i},r=[0,0]){if(i){if(ga(i))return YS(e,t,r);if(ZS(i))return r[0]=e,r[1]=t,r}return null}const QQ=[0,0];var JE;const V5=[0,0];function XU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let kn=JE=class extends Cc{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const i=e._get("spatialReference");t._set("spatialReference",Je.isFrozen(i)?i:i.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,i,r,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],i=n[2],r=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,i=n.z,r=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new ke(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)xe.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)xe.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const a=py(n.longitude,n.latitude,V5);e=a[0],t=a[1]}}}else XU(i)?(s=i,i=null):XU(r)&&(s=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?xe.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&xe.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),i!=null&&(o.z=i),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return kve(this)}set latitude(e){const{spatialReference:t,x:i}=this;e!=null&&t&&(t.isWebMercator?this._set("y",py(i,e,V5)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return Nve(this)}set longitude(e){const{y:t,spatialReference:i}=this;e!=null&&i&&(i.isWebMercator?this._set("x",py(e,t,V5)[0]):i.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,i){t[i]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new JE;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return JE.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:i,z:r,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:h}=e;if(!n.equals(h))if(n.isWebMercator&&h.isWGS84)[l,u]=py(l,u),h=n;else{if(!n.isWGS84||!h.isWebMercator)return!1;[l,u]=YS(l,u),h=n}return t===l&&i===u&&r===o&&s===a&&n.wkid===h.wkid}offset(e,t,i){return this.x+=e,this.y+=t,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const e=Cn(this.spatialReference);if(!e)return this;let t=this.x;const[i,r]=e.valid,s=2*r;let n;return t>r?(n=Math.ceil(Math.abs(t-r)/s),t-=n*s):t<i&&(n=Math.ceil(Math.abs(t-i)/s),t+=n*s),this._set("x",t),this}distance(e){return KQ(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],kn.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],kn.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],kn.prototype,"hasZ",null),c([d({type:Number})],kn.prototype,"latitude",null),c([d({type:Number})],kn.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ht(e=>isNaN(e)?e:bn(e))],kn.prototype,"x",void 0),c([ge("x")],kn.prototype,"writeX",null),c([ue("x")],kn.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],kn.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],kn.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],kn.prototype,"m",void 0),kn=JE=c([F("esri.geometry.Point")],kn),kn.prototype.toJSON.isDefaultToJSON=!0;const Ve=kn,G5=[0,0];function KS(e,t){return t!=null&&Vn(e,t.x,t.y,t.z)}function Lut(e,t){if(!t.points||t.points.length)return!1;for(const i of t.points)if(!c1(e,i))return!1;return!0}function Dve(e,t){const{xmin:i,ymin:r,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Vn(e,i,r,s)&&Vn(e,i,o,s)&&Vn(e,n,o,s)&&Vn(e,n,r,s)&&Vn(e,i,r,a)&&Vn(e,i,o,a)&&Vn(e,n,o,a)&&Vn(e,n,r,a):Vn(e,i,r)&&Vn(e,i,o)&&Vn(e,n,o)&&Vn(e,n,r)}function c1(e,t){return Vn(e,t[0],t[1])}function Fve(e,t){return Vn(e,t[0],t[1],t[2])}function Vn(e,t,i,r){return t>=e.xmin&&t<=e.xmax&&i>=e.ymin&&i<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function AF(e,t){return G5[1]=t.y,G5[0]=t.x,jve(e,G5)}function jve(e,t){return $F(e.rings,t)}function $F(e,t){if(!e)return!1;if(Uve(e))return QU(!1,e,t);let i=!1;for(let r=0,s=e.length;r<s;r++)i=QU(i,e[r],t);return i}function Uve(e){return!Array.isArray(e[0][0])}function QU(e,t,i){const[r,s]=i;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,h]=t[a],[p,f]=t[o];(h<s&&f>=s||f<s&&h>=s)&&u+(s-h)/(f-h)*(p-u)<r&&(n=!n)}return n}function Vve(e,t){return KS(e,t)}function Gve(e,t){const i=e.hasZ&&t.hasZ;let r,s,n;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(i&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function Bve(e,t){const{points:i,hasZ:r}=t,s=r?Fve:c1;for(const n of i)if(s(e,n))return!0;return!1}const qy=[0,0],Hy=[0,0],Wy=[0,0],Jy=[0,0],zve=[qy,Hy,Wy,Jy],eee=[[Wy,qy],[qy,Hy],[Hy,Jy],[Jy,Wy]];function qve(e,t){return Hve(e,t.rings)}function Hve(e,t){qy[0]=e.xmin,qy[1]=e.ymax,Hy[0]=e.xmax,Hy[1]=e.ymax,Wy[0]=e.xmin,Wy[1]=e.ymin,Jy[0]=e.xmax,Jy[1]=e.ymin;for(const i of zve)if($F(t,i))return!0;for(const i of t){if(!i.length)continue;let r=i[0];if(c1(e,r))return!0;for(let s=1;s<i.length;s++){const n=i[s];if(c1(e,n)||tee(r,n,eee))return!0;r=n}}return!1}function Wve(e,t){qy[0]=e.xmin,qy[1]=e.ymax,Hy[0]=e.xmax,Hy[1]=e.ymax,Wy[0]=e.xmin,Wy[1]=e.ymin,Jy[0]=e.xmax,Jy[1]=e.ymin;const i=t.paths;for(const r of i){if(!i.length)continue;let s=r[0];if(c1(e,s))return!0;for(let n=1;n<r.length;n++){const o=r[n];if(c1(e,o)||tee(s,o,eee))return!0;s=o}}return!1}const fs=[0,0];function Jve(e){for(let t=0;t<e.length;t++){const i=e[t];for(let s=0;s<i.length-1;s++){const n=i[s],o=i[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],h=e[a][l+1];if(YO(n,o,u,h,fs)&&!(fs[0]===n[0]&&fs[1]===n[1]||fs[0]===u[0]&&fs[1]===u[1]||fs[0]===o[0]&&fs[1]===o[1]||fs[0]===h[0]&&fs[1]===h[1]))return!0}}const r=i.length;if(!(r<=4))for(let s=0;s<r-3;s++){let n=r-1;s===0&&(n=r-2);const o=i[s],a=i[s+1];for(let l=s+2;l<n;l++){const u=i[l],h=i[l+1];if(YO(o,a,u,h,fs)&&!(fs[0]===o[0]&&fs[1]===o[1]||fs[0]===u[0]&&fs[1]===u[1]||fs[0]===a[0]&&fs[1]===a[1]||fs[0]===h[0]&&fs[1]===h[1]))return!0}}}return!1}function tee(e,t,i){for(let r=0;r<i.length;r++)if(YO(e,t,i[r][0],i[r][1]))return!0;return!1}function YO(e,t,i,r,s){const[n,o]=e,[a,l]=t,[u,h]=i,[p,f]=r,m=p-u,g=n-u,b=a-n,w=f-h,S=o-h,T=l-o,x=w*b-m*T;if(x===0)return!1;const _=(m*S-w*g)/x,M=(b*S-T*g)/x;return _>=0&&_<=1&&M>=0&&M<=1&&(s&&(s[0]=n+_*(a-n),s[1]=o+_*(l-o)),!0)}function Zve(e){switch(e){case"esriGeometryEnvelope":case"extent":return Gve;case"esriGeometryMultipoint":case"multipoint":return Bve;case"esriGeometryPoint":case"point":return Vve;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return qve;case"esriGeometryPolyline":case"polyline":return Wve}}var Ia;function Yve(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Sp(e,t,i){return t==null?i:i==null?t:e(t,i)}let Xr=Ia=class extends Cc{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,i,r,s){return Yve(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?ke.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:i,ymax:r,spatialReference:s??ke.WGS84}}static fromBounds(e,t){return new Ia({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Ia({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Ve({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ia;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&$v(t,i)&&(e=t.isWebMercator?Ty(e):nv(e,!0)),e.type==="point"?KS(this,e):e.type==="extent"&&Dve(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;return t&&i&&!t.equals(i)&&$v(t,i)&&(e=t.isWebMercator?Ty(e):nv(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),i=this.width*t,r=this.height*t;if(this.xmin+=i,this.ymin+=r,this.xmax-=i,this.ymax-=r,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,i=e.spatialReference;return t&&i&&!Xi(t,i)&&$v(t,i)&&(e=t.isWebMercator?Ty(e):nv(e,!0)),Zve(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,i){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Sp(Math.min,this.zmin,e.zmin),this.zmax=Sp(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Sp(Math.min,this.mmin,e.mmin),this.mmax=Sp(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Sp(Math.max,this.zmin,e.zmin),this.zmax=Sp(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Sp(Math.max,this.mmin,e.mmin),this.mmax=Sp(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Cn(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,i=this._getCM(e);if(i){const r=t.isWebMercator?nv(i):i;this.xmin-=i.x,this.xmax-=i.x,t.isWebMercator||(r.x=B5(r.x,e).x),this.spatialReference=new ke(a$((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[i,r]=e.valid,s=this.xmin,n=this.xmax;return s>=i&&s<=r&&n>=i&&n<=r||(t=this.center),t}_normalize(e,t,i){const r=this.spatialReference;if(!r)return this;const s=i??Cn(r);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}return u}),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let h;e=e||Cn(o);const[p,f]=e.valid;h=B5(this.xmin,e);const m=h.x,g=h.frameId;h=B5(this.xmax,e);const b=h.x,w=h.frameId,S=m===b&&a>0;if(a>2*f){const T=new Ia(l<u?m:b,s,f,n,o),x=new Ia(p,s,l<u?b:m,n,o),_=new Ia(0,s,f,n,o),M=new Ia(p,s,0,n,o),I=[],A=[];T.contains(_)&&I.push(g),T.contains(M)&&A.push(g),x.contains(_)&&I.push(w),x.contains(M)&&A.push(w);for(let C=g+1;C<w;C++)I.push(C),A.push(C);t.push({extent:T,frameIds:[g]},{extent:x,frameIds:[w]},{extent:_,frameIds:I},{extent:M,frameIds:A})}else m>b||S?t.push({extent:new Ia(m,s,f,n,o),frameIds:[g]},{extent:new Ia(p,s,b,n,o),frameIds:[w]}):t.push({extent:new Ia(m,s,b,n,o),frameIds:[g]});this.cache._parts=t}const i=this.hasZ,r=this.hasM;if(i||r){const s={};i&&(s.zmin=this.zmin,s.zmax=this.zmax),r&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function B5(e,t){const[i,r]=t.valid,s=2*r;let n,o=0;return e>r?(n=Math.ceil(Math.abs(e-r)/s),e-=n*s,o=n):e<i&&(n=Math.ceil(Math.abs(e-i)/s),e+=n*s,o=-n),{x:e,frameId:o}}c([d({readOnly:!0})],Xr.prototype,"cache",null),c([d({readOnly:!0})],Xr.prototype,"center",null),c([d({readOnly:!0})],Xr.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xr.prototype,"hasZ",null),c([d({readOnly:!0})],Xr.prototype,"height",null),c([d({readOnly:!0})],Xr.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xr.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Xr.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xr.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xr.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Xr.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Xr.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xr.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xr.prototype,"zmax",void 0),Xr=Ia=c([F("esri.geometry.Extent")],Xr),Xr.prototype.toJSON.isDefaultToJSON=!0;const bt=Xr;let j_;const Kve=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,KO=globalThis.document?.documentElement;function iee(){const e=KO?.getAttribute("lang"),t=globalThis.navigator?.language;return Kve??e??t??"en"}function Co(){return j_===void 0&&(j_=iee()),j_}function Xve(e=Co()){return/^([a-zA-Z]{2,3})(?:[_-][a-zA-Z0-9]+)*$/.exec(e)?.[1].toLowerCase()}const ZE=[];function ree(e){return ZE.push(e),ti(()=>ZE.splice(ZE.indexOf(e),1))}const YE=[];function CF(e){return YE.push(e),ti(()=>YE.splice(YE.indexOf(e),1))}function eV(){const e=iee();j_!==e&&([...YE].forEach(t=>t(e)),j_=e,[...ZE].forEach(t=>t(e)))}globalThis.addEventListener?.("languagechange",eV),KO&&new MutationObserver(()=>{eV()}).observe(KO,{attributeFilter:["lang"]});let aT;function Qve(e){return aT&&!aT.destroyed||(aT=e()),aT}var XO;const e1e=new gt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Aa=XO=class extends Je{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new XO({categories:this.categories?K(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=x$(this.extent,ke.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:i,bbox:r,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>e1e.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};c([d()],Aa.prototype,"categories",void 0),c([d()],Aa.prototype,"disableExtraQuery",void 0),c([d({type:bt})],Aa.prototype,"extent",void 0),c([d()],Aa.prototype,"filter",void 0),c([d()],Aa.prototype,"num",void 0),c([d()],Aa.prototype,"query",void 0),c([d()],Aa.prototype,"sortField",void 0),c([d()],Aa.prototype,"sortOrder",null),c([d()],Aa.prototype,"start",void 0),Aa=XO=c([F("esri.portal.PortalQueryParams")],Aa);const Bl=Aa;var QO;let jr=QO=class extends ae{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const i=t.categorySchema||[];return i.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):i})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new W("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new QO({sourceJSON:e});return t.read(e),t}queryItems(e,t){let i=bi(Bl,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(i=i||new Bl,r.queryPortal(`/content/groups/${this.id}/search`,i,"PortalItem",t)):(i=i?i.clone():new Bl,i.query="group:"+this.id+(i.query?" "+i.query:""),r.queryItems(i,t))}_fetchCategorySchemaSet(e,t){const i=this.portal;return i.fetchSelf(i.authMode,!0,t).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const n=new Bl({disableExtraQuery:!0,num:1,query:s});return i.queryGroups(n,t)}throw new W("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],n=new Bl({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new W("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};c([d()],jr.prototype,"access",void 0),c([d({type:Date})],jr.prototype,"created",void 0),c([d()],jr.prototype,"description",void 0),c([d()],jr.prototype,"id",void 0),c([d()],jr.prototype,"isInvitationOnly",void 0),c([d({type:Date})],jr.prototype,"modified",void 0),c([d()],jr.prototype,"owner",void 0),c([d()],jr.prototype,"portal",void 0),c([d()],jr.prototype,"snippet",void 0),c([d()],jr.prototype,"sortField",void 0),c([d()],jr.prototype,"sortOrder",void 0),c([d()],jr.prototype,"sourceJSON",void 0),c([d()],jr.prototype,"tags",void 0),c([d()],jr.prototype,"thumbnail",void 0),c([d({readOnly:!0})],jr.prototype,"thumbnailUrl",null),c([d()],jr.prototype,"title",void 0),c([d({readOnly:!0})],jr.prototype,"url",null),jr=QO=c([F("esri.portal.PortalGroup")],jr);const eP=jr;let am=class extends Je{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],am.prototype,"nextQueryParams",void 0),c([d()],am.prototype,"queryParams",void 0),c([d()],am.prototype,"results",void 0),c([d()],am.prototype,"total",void 0),am=c([F("esri.portal.PortalQueryResult")],am);const t1e=am;let zc=class extends ae{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new W("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],zc.prototype,"created",void 0),c([d()],zc.prototype,"id",void 0),c([d()],zc.prototype,"portal",void 0),c([d()],zc.prototype,"title",void 0),c([d({readOnly:!0})],zc.prototype,"url",null),c([d()],zc.prototype,"username",void 0),zc=c([F("esri.portal.PortalFolder")],zc);const i1e=zc;var tP;let Ai=tP=class extends ae{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,i=e?.data,r=e?.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),i!=null&&(typeof i=="string"?s.query.text=i:typeof i=="object"&&(s.query.text=JSON.stringify(i))));let n=this.userContentUrl;return r&&(n+="/"+(typeof r=="string"?r:r.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let i=this.userContentUrl;e.ownerFolder&&(i+="/"+e.ownerFolder);const r=t?{permanentDelete:!0}:{};await this.portal.request(i+`/items/${e.id}/delete`,{method:"post",query:r}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.slice();const i=this.userContentUrl+"/deleteItems",r=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(i,n);for(const a of o.results){const l=e.find(p=>a.itemId===p.id),u=a.success;let h=null;u?(l.id=null,l.portal=null):a.error&&(h=new W("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:u,error:h})}}return r}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let i;return i=t&&t.folders?t.folders.map(r=>{const s=i1e.fromJSON(r);return s.portal=this.portal,s}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(i=>{const r=eP.fromJSON(i);return r.portal=this.portal,r}):[],t})}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:i}=await ce(()=>Promise.resolve().then(()=>oee),void 0,import.meta.url),r={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:r});let n;return s?.items?(n=s.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new eP({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new W("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const i=this.userContentUrl,r=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(i+`/items/${e.id}/restore`,{method:"post",query:r})}toJSON(){throw new W("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new tP({sourceJSON:e});return t.read(e),t}};c([d()],Ai.prototype,"access",void 0),c([d({type:Date})],Ai.prototype,"created",void 0),c([d()],Ai.prototype,"culture",void 0),c([d()],Ai.prototype,"description",void 0),c([d()],Ai.prototype,"email",void 0),c([d()],Ai.prototype,"favGroupId",void 0),c([d()],Ai.prototype,"fullName",void 0),c([d({type:Date})],Ai.prototype,"modified",void 0),c([d()],Ai.prototype,"orgId",void 0),c([d()],Ai.prototype,"portal",void 0),c([d()],Ai.prototype,"preferredView",void 0),c([d()],Ai.prototype,"privileges",void 0),c([d()],Ai.prototype,"region",void 0),c([d()],Ai.prototype,"role",void 0),c([d()],Ai.prototype,"roleId",void 0),c([d()],Ai.prototype,"sourceJSON",void 0),c([d()],Ai.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ai.prototype,"thumbnailUrl",null),c([d()],Ai.prototype,"units",void 0),c([d({readOnly:!0})],Ai.prototype,"userContentUrl",null),c([d({readOnly:!0})],Ai.prototype,"url",null),c([d()],Ai.prototype,"username",void 0),c([d()],Ai.prototype,"userLicenseTypeId",void 0),c([d()],Ai.prototype,"userType",void 0),Ai=tP=c([F("esri.portal.PortalUser")],Ai);const RF=Ai;var Wo;let Pb;const tV={PortalGroup:()=>Promise.resolve({default:eP}),PortalItem:()=>ce(()=>Promise.resolve().then(()=>oee),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:RF})};let Ce=Wo=class extends WS(mc){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Kt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){iV.unregister(this),this.defaultBasemap=Wi(this.defaultBasemap),this.defaultDevBasemap=Wi(this.defaultDevBasemap),this.defaultVectorBasemap=Wi(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Yi(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Kt.request.trustedServers.includes(t)||Kt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get hasAPIKey(){return EQ(this.url)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.slice(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=RF.fromJSON(e),t.portal=this),t}load(e){const t=ce(()=>Promise.resolve().then(()=>O1e),void 0,import.meta.url).then(({default:i})=>{wi(e),Pb=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(i=>{if(!this.hasAPIKey&&ci){const r=ci;this.credential=r.findCredential(this.restUrl),this.credential||this.authMode!==Wo.AUTH_MODE_AUTO&&this.authMode!==Wo.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=r.on("credential-create",r1e(new WeakRef(this))),iV.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ce(async()=>{const{default:i}=await import("./ElevationLayer-BGHztcbV.js");return{default:i}},__vite__mapDeps([5,1]),import.meta.url)).default;return e?e.map(i=>new t({id:i.id,url:i.url})):[]}async fetchBasemaps(e,t){const i=await this._fetchBasemaps(e,t);if(t?.include3d===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);i.unshift(...r)}return i}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const t=new Bl;t.query=this.default3DBasemapQuery,t.disableExtraQuery=!0;const i=(await this.queryItems(t,e)).results.find(r=>r.type==="Web Scene");return i?new Pb({portalItem:i}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):ya(e)?Promise.reject(Oi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,i=new Bl({num:100,sortField:"title"});if(t?.length){const r=[];for(const s of t)r.push(`(title:"${s.title}" AND owner:${s.owner})`);return i.query=r.join(" OR "),this.queryGroups(i,e).then(s=>s.results)}return ya(e)?Promise.reject(Oi()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||Co();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||Co();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Qve(()=>new Wo)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,i){const r=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Co().toLowerCase()},withCredentials:!0,...i};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(r,s)}queryPortal(e,t,i,r){const s=bi(Bl,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...r}).then(a=>{const l=s.clone();return l.start=a.nextStart,new t1e({nextQueryParams:l,queryParams:s,total:a.total,results:Wo._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(_o(l),a)));return i&&tV[i]?tV[i]().then(({default:o})=>(wi(r),n(o))):n()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new W("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Wo.AUTH_MODE_ANONYMOUS||this.authMode===Wo.AUTH_MODE_NO_PROMPT&&!ci)return Promise.reject(new W("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return ci?ci.getCredential(this.restUrl,{prompt:this.authMode!==Wo.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,i){return this.request(e,t).then(r=>{const s=Wo._resultsToTypedArray(i,{portal:this},r);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():r)).then(()=>s,()=>s)})}request(e,t={}){const i={f:"json",...t.query},{authMode:r=this.authMode===Wo.AUTH_MODE_ANONYMOUS||this.authMode===Wo.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:r,body:s,cacheBust:n,method:o,query:i,responseType:a,timeout:0,signal:l};return t.withCredentials&&(u.withCredentials=!0),Ne(this._normalizeSSL(e),u).then(h=>h.data)}toJSON(){throw new W("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Wo({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new W("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const i=new Bl;i.query=e||(this.hasAPIKey?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0;const r=await this.queryGroups(i,t);if(!r.total)return[];const s=r.results[0];i.num=100,i.query='type:"Web Map" -type:"Web Application"',i.sortField=s.sortField||"name",i.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(i,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new Pb({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const i=e||this.basemapGalleryGroupQuery3D;if(!i)return[];const r=new Bl({query:i,disableExtraQuery:!0}),s=await this.queryGroups(r,t);if(!s.total)return[];const n=s.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(r,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new Pb({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=Pb.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,i,r){let s;if(i){const n=r!=null?r.signal:null;s=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};Ce.AUTH_MODE_ANONYMOUS="anonymous",Ce.AUTH_MODE_AUTO="auto",Ce.AUTH_MODE_IMMEDIATE="immediate",Ce.AUTH_MODE_NO_PROMPT="no-prompt",c([d()],Ce.prototype,"access",void 0),c([d()],Ce.prototype,"allSSL",void 0),c([d()],Ce.prototype,"authMode",void 0),c([d()],Ce.prototype,"authorizedCrossOriginDomains",void 0),c([ue("authorizedCrossOriginDomains")],Ce.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],Ce.prototype,"basemapGalleryGroupQuery",void 0),c([d({json:{name:"3DBasemapGalleryGroupQuery"}})],Ce.prototype,"basemapGalleryGroupQuery3D",void 0),c([d()],Ce.prototype,"bingKey",void 0),c([d()],Ce.prototype,"canListApps",void 0),c([d()],Ce.prototype,"canListData",void 0),c([d()],Ce.prototype,"canListPreProvisionedItems",void 0),c([d()],Ce.prototype,"canProvisionDirectPurchase",void 0),c([d()],Ce.prototype,"canSearchPublic",void 0),c([d()],Ce.prototype,"canShareBingPublic",void 0),c([d()],Ce.prototype,"canSharePublic",void 0),c([d()],Ce.prototype,"canSignInArcGIS",void 0),c([d()],Ce.prototype,"canSignInIDP",void 0),c([d()],Ce.prototype,"colorSetsGroupQuery",void 0),c([d()],Ce.prototype,"commentsEnabled",void 0),c([d({type:Date})],Ce.prototype,"created",void 0),c([d()],Ce.prototype,"credential",void 0),c([d()],Ce.prototype,"culture",void 0),c([d()],Ce.prototype,"currentVersion",void 0),c([d()],Ce.prototype,"customBaseUrl",void 0),c([d()],Ce.prototype,"default3DBasemapQuery",void 0),c([d()],Ce.prototype,"defaultBasemap",void 0),c([ue("defaultBasemap")],Ce.prototype,"readDefaultBasemap",null),c([d()],Ce.prototype,"defaultDevBasemap",void 0),c([ue("defaultDevBasemap")],Ce.prototype,"readDefaultDevBasemap",null),c([d({type:bt})],Ce.prototype,"defaultExtent",void 0),c([d()],Ce.prototype,"defaultVectorBasemap",void 0),c([ue("defaultVectorBasemap")],Ce.prototype,"readDefaultVectorBasemap",null),c([d()],Ce.prototype,"description",void 0),c([d()],Ce.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],Ce.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],Ce.prototype,"extraQuery",null),c([d()],Ce.prototype,"featuredGroups",void 0),c([d()],Ce.prototype,"featuredItemsGroupQuery",void 0),c([d()],Ce.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],Ce.prototype,"layoutGroupQuery",void 0),c([d()],Ce.prototype,"livingAtlasGroupQuery",void 0),c([d({readOnly:!0})],Ce.prototype,"hasAPIKey",null),c([d()],Ce.prototype,"hasCategorySchema",void 0),c([d()],Ce.prototype,"hasClassificationSchema",void 0),c([d()],Ce.prototype,"helpBase",void 0),c([d()],Ce.prototype,"helperServices",void 0),c([d()],Ce.prototype,"helpMap",void 0),c([d()],Ce.prototype,"homePageFeaturedContent",void 0),c([d()],Ce.prototype,"homePageFeaturedContentCount",void 0),c([d()],Ce.prototype,"httpPort",void 0),c([d()],Ce.prototype,"httpsPort",void 0),c([d()],Ce.prototype,"id",void 0),c([d()],Ce.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],Ce.prototype,"isOrganization",null),c([d()],Ce.prototype,"isPortal",void 0),c([d()],Ce.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],Ce.prototype,"itemPageUrl",null),c([d()],Ce.prototype,"layerTemplatesGroupQuery",void 0),c([d()],Ce.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],Ce.prototype,"modified",void 0),c([d()],Ce.prototype,"name",void 0),c([d()],Ce.prototype,"portalHostname",void 0),c([d()],Ce.prototype,"portalMode",void 0),c([d()],Ce.prototype,"portalProperties",void 0),c([d()],Ce.prototype,"region",void 0),c([d()],Ce.prototype,"recycleBinEnabled",void 0),c([d({readOnly:!0})],Ce.prototype,"restUrl",null),c([d()],Ce.prototype,"rotatorPanels",void 0),c([d()],Ce.prototype,"showHomePageDescription",void 0),c([d()],Ce.prototype,"sourceJSON",void 0),c([d()],Ce.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],Ce.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],Ce.prototype,"stylesGroupQuery3d",void 0),c([d()],Ce.prototype,"supportsHostedServices",void 0),c([d()],Ce.prototype,"symbolSetsGroupQuery",void 0),c([d()],Ce.prototype,"templatesGroupQuery",void 0),c([d()],Ce.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ce.prototype,"thumbnailUrl",null),c([d()],Ce.prototype,"units",void 0),c([d()],Ce.prototype,"url",void 0),c([d()],Ce.prototype,"urlKey",void 0),c([ue("urlKey")],Ce.prototype,"readUrlKey",null),c([d()],Ce.prototype,"user",void 0),c([ue("user")],Ce.prototype,"readUser",null),c([d()],Ce.prototype,"use3dBasemaps",void 0),c([d()],Ce.prototype,"useDefault3dBasemap",void 0),c([d()],Ce.prototype,"useStandardizedQuery",void 0),c([d()],Ce.prototype,"useVectorBasemaps",void 0),c([d()],Ce.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ce=Wo=c([F("esri.portal.Portal")],Ce);const jo=Ce,iV=new FinalizationRegistry(e=>{e.remove()});function r1e(e){const t=ci;return()=>{const i=e.deref();i&&t.findCredential(i.restUrl)&&i.signIn().catch(()=>{})}}let qc=class extends Je{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t?.portalItem&&t.path?{...t,path:rV(t.path,t.portalItem)}:t}set path(t){t!=null&&pa(t)?xe.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return rV(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",i){const r=this.cdnUrl;if(r==null)throw new W("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey,_ts:i?.cacheBust?Date.now():null},signal:i?.signal})}async update(t,i){const{addOrUpdateResources:r}=await ce(()=>import("./resourceUtils-Cd06xgAt.js"),__vite__mapDeps([6,1]),import.meta.url);return await r(this.portalItem,[{resource:this,content:t,compress:i?.compress,access:i?.access}],"update",i),this}hasPath(){return this.path!=null}};function rV(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&pa(e)&&(e=mF(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}c([d()],qc.prototype,"portalItem",void 0),c([d({type:String,value:null})],qc.prototype,"path",null),c([Ht("path")],qc.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],qc.prototype,"url",null),c([d({type:String,readOnly:!0})],qc.prototype,"cdnUrl",null),c([d({type:String,readOnly:!0})],qc.prototype,"itemRelativeUrl",null),qc=c([F("esri.portal.PortalItemResource")],qc);const s1e=qc;let vw=class extends Je{constructor(t){super(t),this.created=null,this.rating=null}};c([d()],vw.prototype,"created",void 0),c([d()],vw.prototype,"rating",void 0),vw=c([F("esri.portal.PortalRating")],vw);const z5=vw;function eb(e,t){const i=t?.url?.path;if(e&&i&&(e=ua(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=mF(e,t.portalItem.itemUrl);r!=null&&n1e.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return(e=iP(e,t?.portal))&&T$.test(e)?PF(e):e}function XS(e,t,i=V2.YES){if((e=e&&T$.test(e)?nee(e):e)==null)return e;!pa(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let r=ua(e);if(t){const s=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(s){const n=iP(s,t.portal),o=iP(r,t.portal);r=mF(o,n,n),r!=null&&r!==o&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=see(r,t?.portal),pa(r)&&(r=Ja(r)),t?.resources&&t?.portalItem&&!pa(r)&&!mg(r)&&i===V2.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function OF(e,t,i){return eb(e,i)}function Zy(e,t,i,r){const s=XS(e,r);s!==void 0&&(t[i]=s)}const T$=/\/items\/([^/]+)\/resources\/(.*)/,n1e=/^\.\/resources\//;function o1e(e){return(e?.match(T$)??null)?.[1]??null}function a1e(e){const t=e?.match(T$)??null;if(t==null)return null;const i=t[2],r=i.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=FU(i);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=FU(i.slice(r+1));return{prefix:i.slice(0,r),filename:s,extension:n}}function see(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?NO(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function iP(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`,r=hF();return o1(r,`${r.scheme}://${i}`)?NO(e,t.portalHostname,i):NO(e,i,t.portalHostname)}function PF(e){if(!e)return e||null;let t=e;return t&&ci&&!ci.findCredential(t)&&(t=hQ(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function nee(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&ci&&!ci.findCredential(t)&&(t=hQ(t)),t}var V2;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(V2||(V2={}));const jut=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return V2},ensureMainOnlineDomain:see,fromCDNUrl:nee,fromJSON:eb,itemIdFromResourceUrl:o1e,prefixAndFilenameFromResourceUrl:a1e,read:OF,toCDNUrl:PF,toJSON:XS,write:Zy},Symbol.toStringTag,{value:"Module"}));var lm;const l1e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),u1e=new Set(["KML","GeoJson","CSV"]);let Ct=lm=class extends WS(mc){static from(e){return Ki(lm,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let i=e;return e==="Feature Service"||e==="Feature Collection"?i=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?i=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?i="Scene Layer":e==="Video Service"?i="Video Layer":e==="Scene Package"?i="Scene Layer Package":e==="Stream Service"?i="Feature Layer":e==="Geoprocessing Service"?i=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?i="GeoEnrichment Service":e==="Geocoding Service"?i="Locator":e==="Microsoft Powerpoint"?i="Microsoft PowerPoint":e==="GeoJson"?i="GeoJSON":e==="Globe Service"?i="Globe Layer":e==="Vector Tile Service"?i="Tile Layer":e==="netCDF"?i="NetCDF":e==="Map Service"?i=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?i=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?i="Big Data File Share":e==="Compact Tile Package"?i="Tile Package (tpkx)":e==="Raster function template"?i="Raster Function Template":e==="OGCFeatureServer"?i="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?i="Instant App":e==="Insights Page"?i="Insights Report":e==="Excalibur Imagery Project"?i="Excalibur Project":e==="3DTiles Service"?i="3D tiles layer":e==="3DTiles Package"&&(i="3D tiles package"),i}readExtent(e){return e&&e.length?new bt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],i="esri/images/portal/",r="16";let s,n=!1,o=!1,a=!1,l=!1,u=!1,h=!1,p=!1,f=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),u=t.includes("Spatiotemporal"),h=t.includes("UtilityNetwork"),s=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":h?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(u=t.includes("Spatiotemporal"),p=t.includes("Relational"),s=u||p?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="reality mapping project"?s="realitymappingproject":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="urban project"?s="urbanproject":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro presentation"?s="propresentation":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(f=t.includes("Map"),s=f?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?ii(i+s+r+".png"):null}get isLayer(){return this.type!=null&&l1e.has(this.type)}get itemCdnUrl(){return PF(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.username;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=jo.getDefault()),i=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof z5&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new z5({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:K(this.applicationProxies),avgRating:this.avgRating,categories:K(this.categories),classification:K(this.classification),created:K(this.created),culture:this.culture,description:this.description,extent:K(this.extent),groupCategories:K(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:K(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:K(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:K(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:K(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new lm({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const t of["tags","typeKeywords","categories"])e[t]=e[t]?.join(", ");for(const t of["extent","classification"]){const i=e[t];i&&(e[t]=JSON.stringify(i))}return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new z5(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},lm)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.applicationProxies&&!Object.hasOwn(e,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e?.data,i={method:"post"};i.query=this.createPostQuery();for(const r in i.query)i.query[r]===null&&(i.query[r]="");return i.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?i.query.text=t:typeof t=="object"&&(i.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new W("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new W("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:i}=this;await t.signIn();const{copyResources:r,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!r,tags:n?.join(","),title:o}},{itemId:l}=await t.request(`${i}/copy`,a);return new lm({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,i=e.filename,r={method:"post"};if(typeof t=="string")mg(t)?r.query={data:t}:r.query={url:ua(t)},i!=null&&(r.query.filename=i);else{const s=new FormData;i!=null?s.append("file",t,i):s.append("file",t),r.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new W("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:i}=await ce(()=>import("./resourceUtils-Cd06xgAt.js"),__vite__mapDeps([6,1]),import.meta.url);return i(this,e,t)}async addResource(e,t,i){const{addOrUpdateResources:r}=await ce(()=>import("./resourceUtils-Cd06xgAt.js"),__vite__mapDeps([6,1]),import.meta.url);return e.portalItem=this,await r(this,[{resource:e,content:t,compress:i?.compress,access:i?.access}],"add",i),e}async removeResource(e,t){const{removeResource:i}=await ce(()=>import("./resourceUtils-Cd06xgAt.js"),__vite__mapDeps([6,1]),import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new W("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ce(()=>import("./resourceUtils-Cd06xgAt.js"),__vite__mapDeps([6,1]),import.meta.url);return t(this,e)}resourceFromPath(e){return new s1e({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:K(this.categories),classification:K(this.classification),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:K(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:K(this.typeKeywords),url:this.url};return Dme(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new lm({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([d({type:["private","shared","org","public"]})],Ct.prototype,"access",void 0),c([d()],Ct.prototype,"accessInformation",void 0),c([d({type:String})],Ct.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],Ct.prototype,"applicationProxies",void 0),c([d()],Ct.prototype,"avgRating",void 0),c([d()],Ct.prototype,"categories",void 0),c([d()],Ct.prototype,"classification",void 0),c([d({type:Date})],Ct.prototype,"created",void 0),c([d()],Ct.prototype,"culture",void 0),c([d()],Ct.prototype,"description",void 0),c([d({readOnly:!0})],Ct.prototype,"displayName",null),c([d({type:bt})],Ct.prototype,"extent",void 0),c([ue("extent")],Ct.prototype,"readExtent",null),c([d()],Ct.prototype,"groupCategories",void 0),c([d({readOnly:!0})],Ct.prototype,"iconUrl",null),c([d()],Ct.prototype,"id",void 0),c([d({readOnly:!0})],Ct.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],Ct.prototype,"isOrgItem",void 0),c([d()],Ct.prototype,"itemControl",void 0),c([d({readOnly:!0})],Ct.prototype,"itemPageUrl",null),c([d({readOnly:!0})],Ct.prototype,"itemUrl",null),c([d()],Ct.prototype,"licenseInfo",void 0),c([d({type:Date})],Ct.prototype,"modified",void 0),c([d()],Ct.prototype,"name",void 0),c([d()],Ct.prototype,"numComments",void 0),c([d()],Ct.prototype,"numRatings",void 0),c([d()],Ct.prototype,"numViews",void 0),c([d()],Ct.prototype,"owner",void 0),c([d()],Ct.prototype,"ownerFolder",void 0),c([d({type:jo})],Ct.prototype,"portal",void 0),c([d()],Ct.prototype,"screenshots",void 0),c([d()],Ct.prototype,"size",void 0),c([d()],Ct.prototype,"snippet",void 0),c([d()],Ct.prototype,"sourceJSON",void 0),c([d({type:String})],Ct.prototype,"sourceUrl",void 0),c([d({type:String})],Ct.prototype,"spatialReference",void 0),c([d()],Ct.prototype,"tags",void 0),c([d()],Ct.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ct.prototype,"thumbnailUrl",null),c([d()],Ct.prototype,"title",void 0),c([d()],Ct.prototype,"type",void 0),c([d()],Ct.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(e,t){if(u1e.has(t.type)){const i=this.portal?.restUrl;e||=i&&this.id?`${i}/content/items/${this.id}/data`:null}return e}}})],Ct.prototype,"url",void 0),c([d({readOnly:!0})],Ct.prototype,"userItemUrl",null),Ct=lm=c([F("esri.portal.PortalItem")],Ct);const Cv=Ct,oee=Object.freeze(Object.defineProperty({__proto__:null,default:Cv},Symbol.toStringTag,{value:"Module"})),sV=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,c1e={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function nV(e){return e in c1e}const bw=[],Rv=new Map;function oV(e){for(const t of Rv.keys())lee(e.pattern,t)&&Rv.delete(t)}function h1e(e){return bw.includes(e)||(oV(e),bw.unshift(e)),ti(()=>{const t=bw.indexOf(e);t>-1&&(bw.splice(t,1),oV(e))})}async function aee(e){const t=Co();Rv.has(e)||Rv.set(e,d1e(e,t));const i=Rv.get(e);return i&&await f1e.add(i),i}function p1e(e){if(!sV.test(e))return null;const t=sV.exec(e);if(t===null)return null;const[,i,r]=t,s=i+(r?"-"+r.toUpperCase():"");return nV(s)?s:nV(i)?i:null}async function d1e(e,t){const i=[];for(const r of bw)if(lee(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(s){i.push(s)}throw i.length?new W("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:i}):new W("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function lee(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}CF(()=>{Rv.clear()});const f1e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Do())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function m1e(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,i=await aee("esri/t9n/basemaps");return i[e]||i[t]}const rP={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return ii("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return ii("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return ii("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return ii("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return ii("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return ii("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return ii("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return ii("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return ii("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return ii("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return ii("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return ii("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return ii("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return ii("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return ii("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return ii("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},y1e=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let Hc=class extends Je{constructor(t){super(t),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Co().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const i=Xve(t);return i==="pt"?"pt-BR":i&&y1e.has(i)?i:"global"}};c([d()],Hc.prototype,"apiKey",void 0),c([d()],Hc.prototype,"id",void 0),c([d()],Hc.prototype,"language",void 0),c([d()],Hc.prototype,"places",void 0),c([d()],Hc.prototype,"serviceUrl",void 0),c([d()],Hc.prototype,"worldview",void 0),Hc=c([F("esri.support.BasemapStyle")],Hc);const g1e=Hc;function v1e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function um(e){return e?.type==="subtype-sublayer"}const Vut={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function sP(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function E$(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Gut(e){const t=e?.type;return(t==="feature"||t==="subtype-group"||t==="oriented-imagery")&&e.source?.type==="feature-layer"}async function uee(e,t){const i=ci?.findServerInfo(e);if(i?.currentVersion!=null)return i.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const s=`${e.slice(0,r)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Ne(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function b1e(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function w1e(e){return b1e(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function _1e(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function S1e(e){return!!_1e(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const x1e=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),T1e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function E1e(e){return e.layerContainerType==="basemap"?x1e:e.layerContainerType==="operational-layers"?T1e:null}function M1e(e,t){if(t.restrictedWebMapWriting){const i=E1e(t);return i==null||i.has(e.type)&&!E$(e)}return!0}function I1e(e,t){if(t)if(E$(e)){const i=o$("featureCollection.layers",t),r=i?.[0]?.layerDefinition;r&&aV(e,r)}else e.type!=="group"&&aV(e,t)}function aV(e,t){"maxScale"in e&&(t.maxScale=i3(e.maxScale)??void 0),"minScale"in e&&(t.minScale=i3(e.minScale)??void 0)}function A1e(e,t){if(I1e(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=i3(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(E$(e)){const i=t.featureCollection;i&&(i.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function lV(e,t,i){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return i?.messages&&i.messages.push(new W("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(E$(e)&&!e.isTable)t=e.resourceInfo;else if(M1e(e,i)){const r={};return e.write(r,i)?r:null}return t!=null&&A1e(e,t=K(t)),t}var ww;let $1e=0,Jo=ww=class extends WS(mc){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+$1e++,this.baseLayers=new Be,this.referenceLayers=new Be;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type==="elevation"&&xe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=r=>{r.parent=null};this.addHandles([this.baseLayers.on("after-add",r=>t(r.item)),this.referenceLayers.on("after-add",r=>t(r.item)),this.baseLayers.on("after-remove",r=>i(r.item)),this.referenceLayers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{xe.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroy();const t=this.referenceLayers.toArray();for(const i of t)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Wi(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Yd(e,this._get("baseLayers")))}_writeBaseLayers(e,t,i){const r=[];e&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=lV(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&r.push(n)}),this.referenceLayers.forEach(s=>{const n=lV(s,i.webmap?i.webmap.getLayerJSONFromResourceInfo(s):null,i);n!=null&&(s.type!=="scene"&&(n.isReference=!0),r.push(n))})),t.baseMapLayers=r}set referenceLayers(e){this._set("referenceLayers",Yd(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return w$(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>VI(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>VI(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new ww({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const r=K(i);return r.url&&nu(r.url)&&(r.url=`https:${r.url}`),r.templateUrl&&nu(r.templateUrl)&&(r.templateUrl=`https:${r.templateUrl}`),r})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:i,style:r}=this;wi(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(m1e(o).then(a=>{a&&this.read({title:a},t.context)}))}}else i?s.push(this._loadFromItem(i,e)):r&&s.push(this._loadFromStylesService(r,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,i){const r=this.resourceInfo?.context,s=this.portalItem?.portal||r?.portal||null,n=R1e[r?.origin||""]??"web-map",{populateOperationalLayers:o}=await ce(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-BRirWqjS.js");return{populateOperationalLayers:l}},__vite__mapDeps([7,8,9,10,1]),import.meta.url),a=[];if(wi(i),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{...r,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=f=>n==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,h=o(this.baseLayers,e.baseMapLayers.filter(f=>!u(f)),l);a.push(h);const p=o(this.referenceLayers,e.baseMapLayers.filter(u),l);a.push(p)}await Promise.allSettled(a)}async _loadFromItem(e,t){const i=await e.load(t),r=await i.fetchData("json",t),s=$r(e.itemUrl??"");return this._set("resourceInfo",{data:r.baseMap??{},context:{origin:C1e[e.type||""]??"web-map",portal:e.portal||jo.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||jo.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const i=`${e.serviceUrl}/${e.id}`,r=(await Ne(i,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview,token:e.apiKey},signal:t?.signal})).data,s=$r(i);if(this._set("resourceInfo",{data:r.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:r.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,s,t),e.apiKey)for(const n of[...this.baseLayers,...this.referenceLayers])"apiKey"in n&&(n.apiKey=e.apiKey)}static fromId(e){const t=rP[e];return t?t.itemId?new ww({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):ww.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,i,r){this._writeBaseLayers(e,t,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Be}},writer(e,t,i,r){this._writeBaseLayers(e,t,r)}}}}}})],Jo.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Jo.prototype,"id",void 0),c([d({type:Cv})],Jo.prototype,"portalItem",void 0),c([d()],Jo.prototype,"referenceLayers",null),c([d({readOnly:!0})],Jo.prototype,"resourceInfo",void 0),c([d({type:ke})],Jo.prototype,"spatialReference",void 0),c([d({type:g1e})],Jo.prototype,"style",void 0),c([d()],Jo.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Jo.prototype,"title",void 0),c([ge("title")],Jo.prototype,"writeTitle",null),Jo=ww=c([F("esri.Basemap")],Jo);const C1e={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},R1e={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Ov=Jo,O1e=Object.freeze(Object.defineProperty({__proto__:null,default:Ov},Symbol.toStringTag,{value:"Module"})),y3={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function cee(e){return!!y3[e]||!!y3[e.toLowerCase()]}function LF(e){return y3[e]??y3[e.toLowerCase()]}function P1e(e){return[...LF(e)]}function q5(e,t,i){i<0&&++i,i>1&&--i;const r=6*i;return r<1?e+(t-e)*r:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function hee(e,t,i,r=1){const s=(e%360+360)%360/360,n=i<=.5?i*(t+1):i+t-i*t,o=2*i-n;return[Math.round(255*q5(o,n,s+1/3)),Math.round(255*q5(o,n,s)),Math.round(255*q5(o,n,s-1/3)),r]}function L1e(e){const t=e.length>5,i=t?8:4,r=(1<<i)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&r,o>>=i,a[3]=s*l/255),l=o&r,o>>=i,a[2]=s*l,l=o&r,o>>=i,a[1]=s*l,l=o&r,o>>=i,a[0]=s*l,a}const uV=new Float32Array(1);function But(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function rl(e,t,i){return Math.min(Math.max(e,t),i)}function zut(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function _w(e,t,i){return e+(t-e)*i}function qut(e,t,i,r,s){return _w(r,s,(e-t)/(i-t))}function QS(e){return e*Math.PI/180}function pee(e){return 180*e/Math.PI}function Hut(e){return Math.acos(rl(e,-1,1))}function N1e(e){return Math.asin(rl(e,-1,1))}function U_(e,t,i=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=i}const g3=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function nP(e){return g3.setFloat64(0,e),g3.getBigInt64(0)}function k1e(e){return g3.setBigInt64(0,e),g3.getFloat64(0)}const KE=BigInt("1000000"),D1e=dee(1);function dee(e){const t=nP(e=Math.abs(e)),i=k1e(t<=KE?KE:t-KE);return Math.abs(e-i)}function Wut(e,t,i=D1e){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(i!=null&&dee(Math.min(Math.abs(e),Math.abs(t)))<i)return Math.abs(e-t)<=i;const r=nP(e),s=nP(t);return r<0!=s<0?!1:!((r<s?s-r:r-s)>KE)}function Jut(e){return fee(Math.max(-cV,Math.min(e,cV)))}function fee(e){return uV[0]=e,uV[0]}function Zut(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(U_(t,1)&&U_(i,1)&&U_(r,1))}const cV=fee(34028234663852886e22);function Yut(e,t,i){if(i===void 0||+i==0)return Math[e](t);if(t=+t,i=+i,isNaN(t)||typeof i!="number"||i%1!=0)return NaN;let r=t.toString().split("e");return r=(t=Math[e](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+i:i))}function lT(e){return rl(d$(e),0,255)}function uT(e,t,i){return e=Number(e),isNaN(e)?i:e<t?t:e>i?i:e}function cT(e,t){const i=e.toString(16).padStart(2,"0");return t?i.slice(0,1):i}let XE=class Qr{static blendColors(t,i,r,s=new Qr){return s.r=Math.round(t.r+(i.r-t.r)*r),s.g=Math.round(t.g+(i.g-t.g)*r),s.b=Math.round(t.b+(i.b-t.b)*r),s.a=t.a+(i.a-t.a)*r,s._sanitize()}static fromRgb(t,i){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(r){const s=r[2].split(/\s*,\s*/),n=r[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Qr.fromArray(a,i)}return Qr.fromArray(s.map(a=>parseFloat(a)),i)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Qr.fromArray(hee(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),i)}return null}static fromHex(t,i=new Qr){if(t[0]!=="#"||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.slice(1,2),16),s=parseInt(t.slice(2,3),16),n=parseInt(t.slice(3,4),16),o=t.length===5?15:parseInt(t.slice(4),16);return Qr.fromArray([r+16*r,s+16*s,n+16*n,(o+16*o)/255],i)}case 7:case 9:{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16),o=t.length===7?255:parseInt(t.slice(7),16);return Qr.fromArray([r,s,n,o/255],i)}default:return null}}static fromArray(t,i=new Qr){return i._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(t,i){const r=cee(t)?LF(t):null;return r&&Qr.fromArray(r,i)||Qr.fromRgb(t,i)||Qr.fromHex(t,i)}static fromJSON(t){return t!=null?new Qr([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Qr.fromString(t,this):Array.isArray(t)?Qr.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Qr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const i=t?.capitalize??!1,r=t?.digits??6,s=r===3||r===4,n=r===4||r===8,o=`#${cT(this.r,s)}${cT(this.g,s)}${cT(this.b,s)}${n?cT(Math.round(255*this.a),s):""}`;return i?o.toUpperCase():o}toCss(t=!1){const i=this.r+", "+this.g+", "+this.b;return t?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Qr.AlphaMode.ALWAYS){const i=lT(this.r),r=lT(this.g),s=lT(this.b);return t===Qr.AlphaMode.ALWAYS||this.a!==1?[i,r,s,lT(255*this.a)]:[i,r,s]}clone(){return new Qr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(uT(this.r,0,255)),this.g=Math.round(uT(this.g,0,255)),this.b=Math.round(uT(this.b,0,255)),this.a=uT(this.a,0,1),this}_set(t,i,r,s){this.r=t,this.g=i,this.b=r,this.a=s}};XE.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(XE||(XE={}));const Oe=XE;function h1(e,t,i=!1){let{hasM:r,hasZ:s}=e;Array.isArray(t)?t.length!==4||r||s?t.length===3&&i&&!r?(s=!0,r=!1):t.length===3&&r&&s&&(r=!1,s=!1):(r=!0,s=!0):(s=!s&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=r}var oP;function hV(e){return(t,i)=>t==null?i:i==null?t:e(t,i)}function F1e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Np=oP=class extends Cc{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const i={};Array.isArray(e)?(i.points=e,i.spatialReference=t):F1e(e)?i.spatialReference=e:(e.points&&(i.points=e.points),e.spatialReference&&(i.spatialReference=e.spatialReference),e.hasZ&&(i.hasZ=e.hasZ),e.hasM&&(i.hasM=e.hasM));const r=i.points?.[0];return r&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=r.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=r.length>3:i.hasM===void 0&&(i.hasM=r.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new bt,i=this.hasZ,r=this.hasM,s=i?3:2,n=e[0],o=hV(Math.min),a=hV(Math.max);let l,u,h,p,[f,m]=n,[g,b]=n;for(let w=0,S=e.length;w<S;w++){const T=e[w],[x,_]=T;if(f=o(f,x),m=o(m,_),g=a(g,x),b=a(b,_),i&&T.length>2){const M=T[2];l=o(l,M),h=a(h,M)}if(r&&T.length>s){const M=T[s];u=o(u,M),p=a(p,M)}}return t.xmin=f,t.ymin=m,t.xmax=g,t.ymax=b,t.spatialReference=this.spatialReference,i?(t.zmin=l,t.zmax=h):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=u,t.mmax=p):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=K(this.points)}addPoint(e){return h1(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:K(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new oP(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],i={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(i.z=t[2],r=3),this.hasM&&(i.m=t[r]),new Ve(i)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Ve(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(h1(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([d({readOnly:!0})],Np.prototype,"cache",null),c([d()],Np.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],Np.prototype,"points",void 0),c([ge("points")],Np.prototype,"writePoints",null),Np=oP=c([F("esri.geometry.Multipoint")],Np),Np.prototype.toJSON.isDefaultToJSON=!0;const tb=Np;function Kut(e){const t=[];for(e.reset();e.nextPath();){const i=[];for(;e.nextPoint();)i.push([e.x,e.y]);t.push(i)}return e.reset(),t}function j1e(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var v3;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(v3||(v3={}));function NF(e,t){const i=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(i*i+r*r+s*s)}return Math.sqrt(i*i+r*r)}function U1e(e,t,i){const r=e[0]+i*(t[0]-e[0]),s=e[1]+i*(t[1]-e[1]);return e.length>2&&t.length>2?[r,s,e[2]+i*(t[2]-e[2])]:[r,s]}function V1e(e,t,i,r){return G1e(e,t,i[r],i[r+1])}function G1e(e,t,i,r){const[s,n]=t,[o,a]=i,[l,u]=r,h=l-o,p=u-a,f=h*h+p*p,m=(s-o)*h+(n-a)*p,g=Math.min(1,Math.max(0,m/f));return e[0]=o+h*g,e[1]=a+p*g,e}function Xut(e,t,i,r,s,n){let o=i,a=r,l=s-o,u=n-a;if(l!==0||u!==0){const h=((e-o)*l+(t-a)*u)/(l*l+u*u);h>1?(o=s,a=n):h>0&&(o+=l*h,a+=u*h)}return l=e-o,u=t-a,l*l+u*u}function mee(e,t){return U1e(e,t,.5)}function Qut(e){const t=e.length;let i=0;for(let r=0;r<t-1;++r)i+=NF(e[r],e[r+1]);return i}function yee(e,t=v3.X,i=v3.Y){let r=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];r+=(a[t]-n[t])*(a[i]+n[i]),n=a}if(!gee(e)){const o=e[0];r+=(o[t]-n[t])*(o[i]+n[i])}return r>=0}function gee(e){const t=e.length;return t<3||r$(e[0],e[t-1])}function ect(e){"rings"in e&&(B1e(e),z1e(e))}function B1e(e){if(!("rings"in e))return!1;let t=!1;for(const i of e.rings)gee(i)||(i.push(i[0].slice()),t=!0);return t}function z1e(e){if(!("rings"in e)||e.rings.length===0||yee(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function tct(e){return e.type!=="polygon"&&e.type!=="polyline"||q1e(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function q1e(e,t){const i=Cn(t);if(!i)return;const r=i.valid[0],s=i.valid[1],n=s-r;for(const o of e){let a=1/0,l=-1/0;for(const h of o){const p=H1e(h[0],r,s);a=Math.min(a,p),l=Math.max(l,p),h[0]=p}const u=l-a;n-u<u&&o.forEach(h=>{h[0]<0&&(h[0]+=n)})}}function H1e(e,t,i){const r=i-t;return e<t?i-(t-e)%r:e>i?t+(e-t)%r:e}function ict(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[i,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return i.length===r.length&&i.every((s,n)=>s.length===r[n].length)}function rct(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function W1e(e){return e?J1e(e.rings,e.hasZ??!1):null}function J1e(e,t){if(!e?.length)return null;const i=[],r=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=vee(e[n],t,s);a&&r.push(a)}if(r.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),r.length&&(i[0]=r[0][0],i[1]=r[0][1],t&&(i[2]=r[0][3]),(i[0]<s[0]||i[0]>s[1]||i[1]<s[2]||i[1]>s[3]||t&&(i[2]<s[4]||i[2]>s[5]))&&(i.length=0)),!i.length){const n=e[0]&&e[0].length?Z1e(e[0],t):null;if(!n)return null;i[0]=n[0],i[1]=n[1],t&&n.length>2&&(i[2]=n[2])}return i}function vee(e,t,i){let r=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let f=0;f<e.length;f++){const m=e[f],g=e[(f+1)%e.length],[b,w,S]=m,T=b-l,x=w-u,[_,M,I]=g,A=_-l,C=M-u,R=T*C-A*x;if(o+=R,r+=(T+A)*R,s+=(x+C)*R,t&&m.length>2&&g.length>2){const O=S-h,k=I-h,L=T*k-A*O;n+=(O+k)*L,a+=L}b<i[0]&&(i[0]=b),b>i[1]&&(i[1]=b),w<i[2]&&(i[2]=w),w>i[3]&&(i[3]=w),t&&(S<i[4]&&(i[4]=S),S>i[5]&&(i[5]=S))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[r/(6*o)+l,s/(6*o)+u,o];return t&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=n/(6*a)+h,p[4]=a)),p}function sct(e,t){let i=0,r=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const u=[e.x,e.y],[h,p]=l,f=h-n,m=p-o,[g,b]=u,w=g-n,S=b-o,T=f*S-w*m;s+=T,i+=(f+w)*T,r+=(m+S)*T,h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),p<t[2]&&(t[2]=p),p>t[3]&&(t[3]=p)}return s>0&&(s*=-1),s?(s*=.5,[i/(6*s)+n,r/(6*s)+o,s]):null}function Z1e(e,t){const i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const h=e[l],p=e[l+1];if(h&&p){i[0]=h[0],i[1]=h[1],r[0]=p[0],r[1]=p[1],t&&h.length>2&&p.length>2&&(i[2]=h[2],r[2]=p[2]);const f=NF(i,r);if(f){s+=f;const m=mee(h,p);n+=f*m[0],o+=f*m[1],t&&m.length>2&&(a+=f*m[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function Y1e(e){const{hasZ:t,totalSize:i}=e;if(i===0)return null;const r=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=vee(j1e(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),s.length&&(r[0]=s[0][0],r[1]=s[0][1],t&&(r[2]=s[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const o=e.pathSize?K1e(e):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function K1e(e){const{hasZ:t}=e,i=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let l=e.x,u=e.y,h=e.z;for(;e.nextPoint();){const p=e.x,f=e.y,m=e.z;i[0]=l,i[1]=u,r[0]=p,r[1]=f,t&&(i[2]=h,r[2]=m);const g=NF(i,r);if(g){s+=g;const b=mee(i,r);n+=g*b[0],o+=g*b[1],t&&b.length>2&&(a+=g*b[2])}l=p,u=f,h=m}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const X1e=1e-6;function nct(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<X1e){const s=Y1e(e);return s?[s[0],s[1]]:null}const i=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)ebe(i,r,e);return i[0]*=1/t,i[1]*=1/t,i[0]+=r[0],i[1]+=r[1],i}const Q1e=1/3;function ebe(e,t,i){if(!e||!i||i.pathSize<3)return null;i.nextPoint();const r=i.x,s=i.y;i.nextPoint();let n,o=i.x-r,a=i.y-s,l=0,u=0;for(;i.nextPoint();)l=i.x-r,u=i.y-s,n=.5*Q1e*(l*a-u*o),e[0]+=n*(o+l),e[1]+=n*(a+u),o=l,a=u;const h=i.getCurrentRingArea(),p=[r,s];return p[0]-=t[0],p[1]-=t[1],p[0]*=h,p[1]*=h,e[0]+=p[0],e[1]+=p[1],e}function Mo(e=rbe){return[e[0],e[1],e[2],e[3]]}function bee(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function tbe(e,t,i,r,s=Mo()){return s[0]=e,s[1]=t,s[2]=i,s[3]=r,s}function oct(e,t=Mo()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function act(e,t){return new bt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function lct(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function uct(e,t,i){if(t!=null)if("length"in t)aP(t)?(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[2]),i[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(i[0]=Math.min(e[0],t[0]),i[1]=Math.min(e[1],t[1]),i[2]=Math.max(e[2],t[0]),i[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":i[0]=Math.min(e[0],t.xmin),i[1]=Math.min(e[1],t.ymin),i[2]=Math.max(e[2],t.xmax),i[3]=Math.max(e[3],t.ymax);break;case"point":i[0]=Math.min(e[0],t.x),i[1]=Math.min(e[1],t.y),i[2]=Math.max(e[2],t.x),i[3]=Math.max(e[3],t.y)}else bee(i,e)}function wee(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function _ee(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function cct(e){return wee(e)*_ee(e)}function hct(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function pct(e,t,i){return t>=e[0]&&i>=e[1]&&t<=e[2]&&i<=e[3]}function dct(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function ibe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function fct(e){return e?bee(e,pV):Mo(pV)}function aP(e){return e!=null&&e.length===4}function mct(e,t){return aP(e)&&aP(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const pV=[1/0,1/0,-1/0,-1/0],rbe=[0,0,0,0];function See(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function xee(e){return e.points!==void 0}function Tee(e){return e.x!==void 0&&e.y!==void 0}function Eee(e){return e.paths!==void 0}function Mee(e){return e.rings!==void 0}function Iee(e){function t(i,r){return i==null?r:r==null?i:e(i,r)}return t}const Cd=Iee(Math.min),Rd=Iee(Math.max);function yct(e,t){return Eee(t)?p1(e,t.paths,!1,!1):Mee(t)?p1(e,t.rings,!1,!1):xee(t)?kF(e,t.points,!1,!1,!1,!1):See(t)?Aee(e,t):(Tee(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function gct(e){let t,i,r,s;for(e.reset(),t=r=1/0,i=s=-1/0;e.nextPath();){const n=sbe(e);t=Math.min(n[0],t),r=Math.min(n[1],r),i=Math.max(n[2],i),s=Math.max(n[3],s)}return Mo([t,r,i,s])}function sbe(e){let t,i,r,s;for(t=r=1/0,i=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),i=Math.max(e.x,i),s=Math.max(e.y,s);return Mo([t,r,i,s])}function vct(e,t){return Eee(t)?p1(e,t.paths,!0,!1):Mee(t)?p1(e,t.rings,!0,!1):xee(t)?kF(e,t.points,!0,!1,!0,!1):See(t)?Aee(e,t,!0,!1,!0,!1):(Tee(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function p1(e,t,i,r){const s=i?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[u,h]=t[0][0],[p,f]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let b=0;b<g.length;b++){const w=g[b],[S,T]=w;if(u=Cd(u,S),h=Cd(h,T),p=Rd(p,S),f=Rd(f,T),i&&w.length>2){const x=w[2];n=Cd(n,x),o=Rd(o,x)}if(r&&w.length>s){const x=w[s];a=Cd(n,x),l=Rd(o,x)}}}return i?r?(e[0]=u,e[1]=h,e[2]=n,e[3]=a,e[4]=p,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=h,e[2]=n,e[3]=p,e[4]=f,e[5]=o,e.length=6,e):r?(e[0]=u,e[1]=h,e[2]=a,e[3]=p,e[4]=f,e[5]=l,e.length=6,e):(e[0]=u,e[1]=h,e[2]=p,e[3]=f,e.length=4,e)}function Aee(e,t,i,r,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let h=t.zmin,p=t.zmax,f=t.mmin,m=t.mmax;return s?(h=h||0,p=p||0,n?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=h,e[3]=f,e[4]=a,e[5]=u,e[6]=p,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=u,e[5]=p,e)):n?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=f,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function kF(e,t,i,r,s,n){const o=i?3:2,a=r&&n,l=i&&s;if(!t.length||!t[0].length)return null;let u,h,p,f,[m,g]=t[0],[b,w]=t[0];for(let S=0;S<t.length;S++){const T=t[S],[x,_]=T;if(m=Cd(m,x),g=Cd(g,_),b=Rd(b,x),w=Rd(w,_),l&&T.length>2){const M=T[2];u=Cd(u,M),h=Rd(h,M)}if(a&&T.length>o){const M=T[o];p=Cd(u,M),f=Rd(h,M)}}return s?(u=u||0,h=h||0,n?(p=p||0,f=f||0,e[0]=m,e[1]=g,e[2]=u,e[3]=p,e[4]=b,e[5]=w,e[6]=h,e[7]=f,e):(e[0]=m,e[1]=g,e[2]=u,e[3]=b,e[4]=w,e[5]=h,e)):n?(p=p||0,f=f||0,e[0]=m,e[1]=g,e[2]=p,e[3]=b,e[4]=w,e[5]=f,e):(e[0]=m,e[1]=g,e[2]=b,e[3]=w,e)}function nbe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function obe(e){return e.points!==void 0}function abe(e){return e.x!==void 0&&e.y!==void 0}function lbe(e){return e.paths!==void 0}function ube(e){return e.rings!==void 0}const DF=[];function $ee(e,t,i,r){return{xmin:e,ymin:t,xmax:i,ymax:r}}function Cee(e,t,i,r,s,n){return{xmin:e,ymin:t,zmin:i,xmax:r,ymax:s,zmax:n}}function Ree(e,t,i,r,s,n){return{xmin:e,ymin:t,mmin:i,xmax:r,ymax:s,mmax:n}}function Oee(e,t,i,r,s,n,o,a){return{xmin:e,ymin:t,zmin:i,mmin:r,xmax:s,ymax:n,zmax:o,mmax:a}}function FF(e,t=!1,i=!1){return t?i?Oee(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):Cee(e[0],e[1],e[2],e[3],e[4],e[5]):i?Ree(e[0],e[1],e[2],e[3],e[4],e[5]):$ee(e[0],e[1],e[2],e[3])}function cbe(e){return e?nbe(e)?e:abe(e)?pbe(e):ube(e)?Pee(e):lbe(e)?Lee(e):obe(e)?hbe(e):null:null}function hbe(e){const{hasZ:t,hasM:i,points:r}=e;return FF(kF(DF,r,t??!1,i??!1),t,i)}function pbe(e){const{x:t,y:i,z:r,m:s}=e,n=s!=null;return r!=null?n?Oee(t,i,r,s,t,i,r,s):Cee(t,i,r,t,i,r):n?Ree(t,i,s,t,i,s):$ee(t,i,t,i)}function Pee(e){const{hasZ:t,hasM:i,rings:r}=e,s=p1(DF,r,t??!1,i??!1);return s?FF(s,t,i):null}function Lee(e){const{hasZ:t,hasM:i,paths:r}=e,s=p1(DF,r,t??!1,i??!1);return s?FF(s,t,i):null}var QE;function dV(e){return!Array.isArray(e[0])}function dbe(e){return typeof e[0]?.[0]=="number"}function fbe(e){if(!e)return;let{rings:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??=[],dbe(t)&&(t=[t]),t[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=ke.WGS84,{...e,hasM:i,hasZ:r,rings:t,spatialReference:s}}let Fu=QE=class extends Cc{static fromExtent(e){const t=e.clone().normalize(),{spatialReference:i}=e;let r=!1,s=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return r&&(n.hasZ=!0),s&&(n.hasM=!0),new QE(n)}constructor(e){super(fbe(e)),this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=W1e(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Ve;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=Pee(this);if(!t)return null;const i=new bt(t);return i.spatialReference=e,i}get isSelfIntersecting(){return Jve(this.rings)}writeRings(e,t){t.rings=K(this.rings)}addRing(e){if(!e)return;const t=this.rings,i=t.length;if(dV(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("rings"),this}clone(){const e=new QE;return e.spatialReference=this.spatialReference,e.rings=K(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,i=e.spatialReference;if(t!=null!=(i!=null)||t!=null&&i!=null&&!t.equals(i)||this.rings.length!==e.rings.length)return!1;const r=([s,n,o,a],[l,u,h,p])=>s===l&&n===u&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!r$(n,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=x$(e,this.spatialReference);return AF(this,t??e)}isClockwise(e){const t=dV(e)?e.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):e;return yee(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.rings[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Ve(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ve(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ve(i[0],i[1],i[2],i[3],this.spatialReference):new Ve(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(h1(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e].splice(t,0,i),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Ve(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Ve(s,i));return this.notifyChange("rings"),r}setPoint(e,t,i){return this._validateInputs(e,t)?(h1(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[e][t]=i,this.notifyChange("rings"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],Fu.prototype,"cache",null),c([d({readOnly:!0})],Fu.prototype,"centroid",null),c([d({readOnly:!0})],Fu.prototype,"extent",null),c([d({readOnly:!0})],Fu.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Fu.prototype,"rings",void 0),c([ge("rings")],Fu.prototype,"writeRings",null),Fu=QE=c([F("esri.geometry.Polygon")],Fu);const Rs=Fu;Fu.prototype.toJSON.isDefaultToJSON=!0;var lP;function mbe(e){return!Array.isArray(e[0])}function ybe(e){return typeof e[0]?.[0]=="number"}function gbe(e){if(!e)return;let{paths:t,hasM:i,hasZ:r,spatialReference:s}=e;switch(t??=[],ybe(t)&&(t=[t]),t[0]?.[0]?.length){case 4:r??=!0,i??=!0;break;case 3:r??=i!==!0,i??=!r;break;default:r??=!1,i??=!1}return s??=ke.WGS84,{...e,hasM:i,hasZ:r,paths:t,spatialReference:s}}let dd=lP=class extends Cc{constructor(e){super(gbe(e)),this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=Lee(this);if(!t)return null;const i=new bt(t);return i.spatialReference=e,i}writePaths(e,t){t.paths=K(this.paths)}addPath(e){if(!e)return;const t=this.paths,i=t.length;if(mbe(e)){const r=[];for(let s=0,n=e.length;s<n;s++)r[s]=e[s].toArray();t[i]=r}else t[i]=e.slice();return this.notifyChange("paths"),this}clone(){const e=new lP;return e.spatialReference=this.spatialReference,e.paths=K(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const i=this.paths[e][t],r=this.hasZ,s=this.hasM;return r&&!s?new Ve(i[0],i[1],i[2],void 0,this.spatialReference):s&&!r?new Ve(i[0],i[1],void 0,i[2],this.spatialReference):r&&s?new Ve(i[0],i[1],i[2],i[3],this.spatialReference):new Ve(i[0],i[1],this.spatialReference)}insertPoint(e,t,i){return this._validateInputs(e,t,!0)?(h1(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e].splice(t,0,i),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],i=this.spatialReference,r=t.map(s=>new Ve(s,i));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const i=new Ve(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(e,t,i){return this._validateInputs(e,t)?(h1(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[e][t]=i,this.notifyChange("paths"),this):this}_validateInputs(e,t,i=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(i&&(t<0||t>r.length)||!i&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([d({readOnly:!0})],dd.prototype,"cache",null),c([d({readOnly:!0})],dd.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],dd.prototype,"paths",void 0),c([ge("paths")],dd.prototype,"writePaths",null),dd=lP=c([F("esri.geometry.Polyline")],dd);const ca=dd;dd.prototype.toJSON.isDefaultToJSON=!0;function M$(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function jF(e){return e.points!==void 0}function UF(e){return e.x!==void 0&&e.y!==void 0}function ex(e){return e.paths!==void 0}function zh(e){return e.rings!==void 0}function or(e){return e==null?null:e instanceof Cc?e:UF(e)?Ve.fromJSON(e):ex(e)?ca.fromJSON(e):zh(e)?Rs.fromJSON(e):jF(e)?tb.fromJSON(e):M$(e)?bt.fromJSON(e):null}function Pn(e){return e?UF(e)?"esriGeometryPoint":ex(e)?"esriGeometryPolyline":zh(e)?"esriGeometryPolygon":M$(e)?"esriGeometryEnvelope":jF(e)?"esriGeometryMultipoint":null:null}const vbe={esriGeometryPoint:Ve,esriGeometryPolyline:ca,esriGeometryPolygon:Rs,esriGeometryEnvelope:bt,esriGeometryMultipoint:tb,esriGeometryMultiPatch:Rs};function bbe(e){return e&&vbe[e]||null}const b3=ar()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),fV=ar()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),cs={base:Cc,key:"type",typeMap:{extent:bt,multipoint:tb,point:Ve,polyline:ca,polygon:Rs}};il(cs);const Dt=e=>{let t=class extends e{clone(){const i=Is(this);jd(i,"unable to clone instance of non-accessor class");const r=i.metadata,s=i.store,n={},o=new Map;for(const l in r){const u=r[l],h=s?.originOf(l),p=u.clonable;if(u.readOnly||p===!1||h!==je.USER&&h!==je.DEFAULTS&&h!==je.WEB_MAP&&h!==je.WEB_SCENE)continue;const f=this[l];let m=null;m=typeof p=="function"?p(f):p==="reference"?f:mO(f),f!=null&&m==null||(h===je.DEFAULTS?o.set(l,m):n[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const l=Is(a)?.store;if(l)for(const[u,h]of o)l.set(u,h,je.DEFAULTS)}return a}};return t=c([F("esri.core.Clonable")],t),t};let uP=class extends Dt(Je){};uP=c([F("esri.core.Clonable")],uP);async function Nee(e,t){const{WhereClause:i}=await ce(()=>import("./WhereClause-BnfiKfP6.js").then(r=>r.W),__vite__mapDeps([11,12]),import.meta.url);return i.create(e,{fieldsIndex:t})}function VF(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}const mV=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class yg extends Error{}class wbe extends yg{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class _be extends yg{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class Sbe extends yg{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ov extends yg{}class kee extends yg{constructor(t){super(`Invalid unit ${t}`)}}class yn extends yg{}class xp extends yg{constructor(){super("Zone is an abstract class")}}const Ge="numeric",ou="short",da="long",w3={year:Ge,month:Ge,day:Ge},Dee={year:Ge,month:ou,day:Ge},xbe={year:Ge,month:ou,day:Ge,weekday:ou},Fee={year:Ge,month:da,day:Ge},jee={year:Ge,month:da,day:Ge,weekday:da},Uee={hour:Ge,minute:Ge},Vee={hour:Ge,minute:Ge,second:Ge},Gee={hour:Ge,minute:Ge,second:Ge,timeZoneName:ou},Bee={hour:Ge,minute:Ge,second:Ge,timeZoneName:da},zee={hour:Ge,minute:Ge,hourCycle:"h23"},qee={hour:Ge,minute:Ge,second:Ge,hourCycle:"h23"},Hee={hour:Ge,minute:Ge,second:Ge,hourCycle:"h23",timeZoneName:ou},Wee={hour:Ge,minute:Ge,second:Ge,hourCycle:"h23",timeZoneName:da},Jee={year:Ge,month:Ge,day:Ge,hour:Ge,minute:Ge},Zee={year:Ge,month:Ge,day:Ge,hour:Ge,minute:Ge,second:Ge},Yee={year:Ge,month:ou,day:Ge,hour:Ge,minute:Ge},Kee={year:Ge,month:ou,day:Ge,hour:Ge,minute:Ge,second:Ge},Tbe={year:Ge,month:ou,day:Ge,weekday:ou,hour:Ge,minute:Ge},Xee={year:Ge,month:da,day:Ge,hour:Ge,minute:Ge,timeZoneName:ou},Qee={year:Ge,month:da,day:Ge,hour:Ge,minute:Ge,second:Ge,timeZoneName:ou},ete={year:Ge,month:da,day:Ge,weekday:da,hour:Ge,minute:Ge,timeZoneName:da},tte={year:Ge,month:da,day:Ge,weekday:da,hour:Ge,minute:Ge,second:Ge,timeZoneName:da};class ib{get type(){throw new xp}get name(){throw new xp}get ianaName(){return this.name}get isUniversal(){throw new xp}offsetName(t,i){throw new xp}formatOffset(t,i){throw new xp}offset(t){throw new xp}equals(t){throw new xp}get isValid(){throw new xp}}let H5=null;class I$ extends ib{static get instance(){return H5===null&&(H5=new I$),H5}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return cte(t,i,r)}formatOffset(t,i){return V_(this.offset(t),i)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let eM={};function Ebe(e){return eM[e]||(eM[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),eM[e]}const Mbe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ibe(e,t){const i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,s,n,o,a,l,u,h]=r;return[o,s,n,a,l,u,h]}function Abe(e,t){const i=e.formatToParts(t),r=[];for(let s=0;s<i.length;s++){const{type:n,value:o}=i[s],a=Mbe[n];n==="era"?r[a]=o:Lt(a)||(r[a]=parseInt(o,10))}return r}let hT={};class va extends ib{static create(t){return hT[t]||(hT[t]=new va(t)),hT[t]}static resetCache(){hT={},eM={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=va.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:i,locale:r}){return cte(t,i,r,this.name)}formatOffset(t,i){return V_(this.offset(t),i)}offset(t){const i=new Date(t);if(isNaN(i))return NaN;const r=Ebe(this.name);let[s,n,o,a,l,u,h]=r.formatToParts?Abe(r,i):Ibe(r,i);a==="BC"&&(s=-Math.abs(s)+1);const f=$$({year:s,month:n,day:o,hour:l===24?0:l,minute:u,second:h,millisecond:0});let m=+i;const g=m%1e3;return m-=g>=0?g:1e3+g,(f-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let yV={};function $be(e,t={}){const i=JSON.stringify([e,t]);let r=yV[i];return r||(r=new Intl.ListFormat(e,t),yV[i]=r),r}let cP={};function hP(e,t={}){const i=JSON.stringify([e,t]);let r=cP[i];return r||(r=new Intl.DateTimeFormat(e,t),cP[i]=r),r}let pP={};function Cbe(e,t={}){const i=JSON.stringify([e,t]);let r=pP[i];return r||(r=new Intl.NumberFormat(e,t),pP[i]=r),r}let dP={};function Rbe(e,t={}){const{base:i,...r}=t,s=JSON.stringify([e,r]);let n=dP[s];return n||(n=new Intl.RelativeTimeFormat(e,t),dP[s]=n),n}let Sw=null;function Obe(){return Sw||(Sw=new Intl.DateTimeFormat().resolvedOptions().locale,Sw)}let gV={};function Pbe(e){let t=gV[e];if(!t){const i=new Intl.Locale(e);t="getWeekInfo"in i?i.getWeekInfo():i.weekInfo,gV[e]=t}return t}function Lbe(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const i=e.indexOf("-u-");if(i===-1)return[e];{let r,s;try{r=hP(e).resolvedOptions(),s=e}catch{const l=e.substring(0,i);r=hP(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=r;return[s,n,o]}}function Nbe(e,t,i){return(i||t)&&(e.includes("-u-")||(e+="-u"),i&&(e+=`-ca-${i}`),t&&(e+=`-nu-${t}`)),e}function kbe(e){const t=[];for(let i=1;i<=12;i++){const r=_t.utc(2009,i,1);t.push(e(r))}return t}function Dbe(e){const t=[];for(let i=1;i<=7;i++){const r=_t.utc(2016,11,13+i);t.push(e(r))}return t}function pT(e,t,i,r){const s=e.listingMode();return s==="error"?null:s==="en"?i(t):r(t)}function Fbe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class jbe{constructor(t,i,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:s,floor:n,...o}=r;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=Cbe(t,a)}}format(t){if(this.inf){const i=this.floor?Math.floor(t):t;return this.inf.format(i)}else{const i=this.floor?Math.floor(t):HF(t,3);return zr(i,this.padTo)}}}class Ube{constructor(t,i,r){this.opts=r,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&va.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=hP(i,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(i=>{if(i.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...i,value:r}}else return i}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Vbe{constructor(t,i,r){this.opts={style:"long",...r},!i&&lte()&&(this.rtf=Rbe(t,r))}format(t,i){return this.rtf?this.rtf.format(t,i):cwe(i,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,i){return this.rtf?this.rtf.formatToParts(t,i):[]}}const Gbe={firstDay:1,minimalDays:4,weekend:[6,7]};class vi{static fromOpts(t){return vi.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,i,r,s,n=!1){const o=t||Ir.defaultLocale,a=o||(n?"en-US":Obe()),l=i||Ir.defaultNumberingSystem,u=r||Ir.defaultOutputCalendar,h=fP(s)||Ir.defaultWeekSettings;return new vi(a,l,u,h,o)}static resetCache(){Sw=null,cP={},pP={},dP={}}static fromObject({locale:t,numberingSystem:i,outputCalendar:r,weekSettings:s}={}){return vi.create(t,i,r,s)}constructor(t,i,r,s,n){const[o,a,l]=Lbe(t);this.locale=o,this.numberingSystem=i||a||null,this.outputCalendar=r||l||null,this.weekSettings=s,this.intl=Nbe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Fbe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:vi.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,fP(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,i=!1){return pT(this,t,dte,()=>{const r=i?{month:t,day:"numeric"}:{month:t},s=i?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=kbe(n=>this.extract(n,r,"month"))),this.monthsCache[s][t]})}weekdays(t,i=!1){return pT(this,t,yte,()=>{const r=i?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=i?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=Dbe(n=>this.extract(n,r,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return pT(this,void 0,()=>gte,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[_t.utc(2016,11,13,9),_t.utc(2016,11,13,19)].map(i=>this.extract(i,t,"dayperiod"))}return this.meridiemCache})}eras(t){return pT(this,t,vte,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[_t.utc(-40,1,1),_t.utc(2017,1,1)].map(r=>this.extract(r,i,"era"))),this.eraCache[t]})}extract(t,i,r){const s=this.dtFormatter(t,i),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new jbe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,i={}){return new Ube(t,this.intl,i)}relFormatter(t={}){return new Vbe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return $be(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:ute()?Pbe(this.locale):Gbe}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let W5=null;class Es extends ib{static get utcInstance(){return W5===null&&(W5=new Es(0)),W5}static instance(t){return t===0?Es.utcInstance:new Es(t)}static parseSpecifier(t){if(t){const i=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Es(C$(i[1],i[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${V_(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${V_(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,i){return V_(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class Bbe extends ib{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Md(e,t){if(Lt(e)||e===null)return t;if(e instanceof ib)return e;if(Zbe(e)){const i=e.toLowerCase();return i==="default"?t:i==="local"||i==="system"?I$.instance:i==="utc"||i==="gmt"?Es.utcInstance:Es.parseSpecifier(i)||va.create(e)}else return Vd(e)?Es.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new Bbe(e)}const GF={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},vV={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},zbe=GF.hanidec.replace(/[\[|\]]/g,"").split("");function qbe(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);if(e[i].search(GF.hanidec)!==-1)t+=zbe.indexOf(e[i]);else for(const s in vV){const[n,o]=vV[s];r>=n&&r<=o&&(t+=r-n)}}return parseInt(t,10)}else return t}let n0={};function Hbe(){n0={}}function fl({numberingSystem:e},t=""){const i=e||"latn";return n0[i]||(n0[i]={}),n0[i][t]||(n0[i][t]=new RegExp(`${GF[i]}${t}`)),n0[i][t]}let bV=()=>Date.now(),wV="system",_V=null,SV=null,xV=null,TV=60,EV,MV=null;class Ir{static get now(){return bV}static set now(t){bV=t}static set defaultZone(t){wV=t}static get defaultZone(){return Md(wV,I$.instance)}static get defaultLocale(){return _V}static set defaultLocale(t){_V=t}static get defaultNumberingSystem(){return SV}static set defaultNumberingSystem(t){SV=t}static get defaultOutputCalendar(){return xV}static set defaultOutputCalendar(t){xV=t}static get defaultWeekSettings(){return MV}static set defaultWeekSettings(t){MV=fP(t)}static get twoDigitCutoffYear(){return TV}static set twoDigitCutoffYear(t){TV=t%100}static get throwOnInvalid(){return EV}static set throwOnInvalid(t){EV=t}static resetCaches(){vi.resetCache(),va.resetCache(),_t.resetCache(),Hbe()}}class Wl{constructor(t,i){this.reason=t,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ite=[0,31,59,90,120,151,181,212,243,273,304,334],rte=[0,31,60,91,121,152,182,213,244,274,305,335];function Ha(e,t){return new Wl("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function BF(e,t,i){const r=new Date(Date.UTC(e,t-1,i));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const s=r.getUTCDay();return s===0?7:s}function ste(e,t,i){return i+(tx(e)?rte:ite)[t-1]}function nte(e,t){const i=tx(e)?rte:ite,r=i.findIndex(n=>n<t),s=t-i[r];return{month:r+1,day:s}}function zF(e,t){return(e-t+7)%7+1}function _3(e,t=4,i=1){const{year:r,month:s,day:n}=e,o=ste(r,s,n),a=zF(BF(r,s,n),i);let l=Math.floor((o-a+14-t)/7),u;return l<1?(u=r-1,l=G2(u,t,i)):l>G2(r,t,i)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...R$(e)}}function IV(e,t=4,i=1){const{weekYear:r,weekNumber:s,weekday:n}=e,o=zF(BF(r,1,t),i),a=Pv(r);let l=s*7+n-o-7+t,u;l<1?(u=r-1,l+=Pv(u)):l>a?(u=r+1,l-=Pv(r)):u=r;const{month:h,day:p}=nte(u,l);return{year:u,month:h,day:p,...R$(e)}}function J5(e){const{year:t,month:i,day:r}=e,s=ste(t,i,r);return{year:t,ordinal:s,...R$(e)}}function AV(e){const{year:t,ordinal:i}=e,{month:r,day:s}=nte(t,i);return{year:t,month:r,day:s,...R$(e)}}function $V(e,t){if(!Lt(e.localWeekday)||!Lt(e.localWeekNumber)||!Lt(e.localWeekYear)){if(!Lt(e.weekday)||!Lt(e.weekNumber)||!Lt(e.weekYear))throw new ov("Cannot mix locale-based week fields with ISO-based week fields");return Lt(e.localWeekday)||(e.weekday=e.localWeekday),Lt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Lt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Wbe(e,t=4,i=1){const r=A$(e.weekYear),s=Wa(e.weekNumber,1,G2(e.weekYear,t,i)),n=Wa(e.weekday,1,7);return r?s?n?!1:Ha("weekday",e.weekday):Ha("week",e.weekNumber):Ha("weekYear",e.weekYear)}function Jbe(e){const t=A$(e.year),i=Wa(e.ordinal,1,Pv(e.year));return t?i?!1:Ha("ordinal",e.ordinal):Ha("year",e.year)}function ote(e){const t=A$(e.year),i=Wa(e.month,1,12),r=Wa(e.day,1,S3(e.year,e.month));return t?i?r?!1:Ha("day",e.day):Ha("month",e.month):Ha("year",e.year)}function ate(e){const{hour:t,minute:i,second:r,millisecond:s}=e,n=Wa(t,0,23)||t===24&&i===0&&r===0&&s===0,o=Wa(i,0,59),a=Wa(r,0,59),l=Wa(s,0,999);return n?o?a?l?!1:Ha("millisecond",s):Ha("second",r):Ha("minute",i):Ha("hour",t)}function Lt(e){return typeof e>"u"}function Vd(e){return typeof e=="number"}function A$(e){return typeof e=="number"&&e%1===0}function Zbe(e){return typeof e=="string"}function Ybe(e){return Object.prototype.toString.call(e)==="[object Date]"}function lte(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function ute(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Kbe(e){return Array.isArray(e)?e:[e]}function CV(e,t,i){if(e.length!==0)return e.reduce((r,s)=>{const n=[t(s),s];return r&&i(r[0],n[0])===r[0]?r:n},null)[1]}function Xbe(e,t){return t.reduce((i,r)=>(i[r]=e[r],i),{})}function d1(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fP(e){if(e==null)return null;if(typeof e!="object")throw new yn("Week settings must be an object");if(!Wa(e.firstDay,1,7)||!Wa(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Wa(t,1,7)))throw new yn("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Wa(e,t,i){return A$(e)&&e>=t&&e<=i}function Qbe(e,t){return e-t*Math.floor(e/t)}function zr(e,t=2){const i=e<0;let r;return i?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function fd(e){if(!(Lt(e)||e===null||e===""))return parseInt(e,10)}function Gf(e){if(!(Lt(e)||e===null||e===""))return parseFloat(e)}function qF(e){if(!(Lt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function HF(e,t,i=!1){const r=10**t;return(i?Math.trunc:Math.round)(e*r)/r}function tx(e){return e%4===0&&(e%100!==0||e%400===0)}function Pv(e){return tx(e)?366:365}function S3(e,t){const i=Qbe(t-1,12)+1,r=e+(t-i)/12;return i===2?tx(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function $$(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function RV(e,t,i){return-zF(BF(e,1,t),i)+t-1}function G2(e,t=4,i=1){const r=RV(e,t,i),s=RV(e+1,t,i);return(Pv(e)-r+s)/7}function mP(e){return e>99?e:e>Ir.twoDigitCutoffYear?1900+e:2e3+e}function cte(e,t,i,r=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(n.timeZone=r);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(i,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function C$(e,t){let i=parseInt(e,10);Number.isNaN(i)&&(i=0);const r=parseInt(t,10)||0,s=i<0||Object.is(i,-0)?-r:r;return i*60+s}function hte(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new yn(`Invalid unit value ${e}`);return t}function x3(e,t){const i={};for(const r in e)if(d1(e,r)){const s=e[r];if(s==null)continue;i[t(r)]=hte(s)}return i}function V_(e,t){const i=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${zr(i,2)}:${zr(r,2)}`;case"narrow":return`${s}${i}${r>0?`:${r}`:""}`;case"techie":return`${s}${zr(i,2)}${zr(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function R$(e){return Xbe(e,["hour","minute","second","millisecond"])}const ewe=["January","February","March","April","May","June","July","August","September","October","November","December"],pte=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],twe=["J","F","M","A","M","J","J","A","S","O","N","D"];function dte(e){switch(e){case"narrow":return[...twe];case"short":return[...pte];case"long":return[...ewe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const fte=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],mte=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],iwe=["M","T","W","T","F","S","S"];function yte(e){switch(e){case"narrow":return[...iwe];case"short":return[...mte];case"long":return[...fte];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const gte=["AM","PM"],rwe=["Before Christ","Anno Domini"],swe=["BC","AD"],nwe=["B","A"];function vte(e){switch(e){case"narrow":return[...nwe];case"short":return[...swe];case"long":return[...rwe];default:return null}}function owe(e){return gte[e.hour<12?0:1]}function awe(e,t){return yte(t)[e.weekday-1]}function lwe(e,t){return dte(t)[e.month-1]}function uwe(e,t){return vte(t)[e.year<0?0:1]}function cwe(e,t,i="always",r=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(i==="auto"&&n){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${s[e][0]}`;case-1:return p?"yesterday":`last ${s[e][0]}`;case 0:return p?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=s[e],h=r?l?u[1]:u[2]||u[1]:l?s[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function OV(e,t){let i="";for(const r of e)r.literal?i+=r.val:i+=t(r.val);return i}const hwe={D:w3,DD:Dee,DDD:Fee,DDDD:jee,t:Uee,tt:Vee,ttt:Gee,tttt:Bee,T:zee,TT:qee,TTT:Hee,TTTT:Wee,f:Jee,ff:Yee,fff:Xee,ffff:ete,F:Zee,FF:Kee,FFF:Qee,FFFF:tte};class Tn{static create(t,i={}){return new Tn(t,i)}static parseFormat(t){let i=null,r="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),i=null,r="",s=!s):s||a===i?r+=a:(r.length>0&&n.push({literal:/^\s+$/.test(r),val:r}),r=a,i=a)}return r.length>0&&n.push({literal:s||/^\s+$/.test(r),val:r}),n}static macroTokenToFormatOpts(t){return hwe[t]}constructor(t,i){this.opts=i,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...i}).format()}dtFormatter(t,i={}){return this.loc.dtFormatter(t,{...this.opts,...i})}formatDateTime(t,i){return this.dtFormatter(t,i).format()}formatDateTimeParts(t,i){return this.dtFormatter(t,i).formatToParts()}formatInterval(t,i){return this.dtFormatter(t.start,i).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,i){return this.dtFormatter(t,i).resolvedOptions()}num(t,i=0){if(this.opts.forceSimple)return zr(t,i);const r={...this.opts};return i>0&&(r.padTo=i),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,i){const r=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>r?owe(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>r?lwe(t,m):n(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>r?awe(t,m):n(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),h=m=>{const g=Tn.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},p=m=>r?uwe(t,m):n({era:m},"era"),f=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(m)}};return OV(Tn.parseFormat(i),f)}formatDurationFromString(t,i){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>u=>{const h=r(u);return h?this.num(l.get(h),u.length):u},n=Tn.parseFormat(i),o=n.reduce((l,{literal:u,val:h})=>u?l:l.concat(h),[]),a=t.shiftTo(...o.map(r).filter(l=>l));return OV(n,s(a))}}const bte=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function rb(...e){const t=e.reduce((i,r)=>i+r.source,"");return RegExp(`^${t}$`)}function sb(...e){return t=>e.reduce(([i,r,s],n)=>{const[o,a,l]=n(t,s);return[{...i,...o},a||r,l]},[{},null,1]).slice(0,2)}function nb(e,...t){if(e==null)return[null,null];for(const[i,r]of t){const s=i.exec(e);if(s)return r(s)}return[null,null]}function wte(...e){return(t,i)=>{const r={};let s;for(s=0;s<e.length;s++)r[e[s]]=fd(t[i+s]);return[r,null,i+s]}}const _te=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,pwe=`(?:${_te.source}?(?:\\[(${bte.source})\\])?)?`,WF=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ste=RegExp(`${WF.source}${pwe}`),JF=RegExp(`(?:T${Ste.source})?`),dwe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,fwe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,mwe=/(\d{4})-?(\d{3})/,ywe=wte("weekYear","weekNumber","weekDay"),gwe=wte("year","ordinal"),vwe=/(\d{4})-(\d\d)-(\d\d)/,xte=RegExp(`${WF.source} ?(?:${_te.source}|(${bte.source}))?`),bwe=RegExp(`(?: ${xte.source})?`);function Lv(e,t,i){const r=e[t];return Lt(r)?i:fd(r)}function wwe(e,t){return[{year:Lv(e,t),month:Lv(e,t+1,1),day:Lv(e,t+2,1)},null,t+3]}function ob(e,t){return[{hours:Lv(e,t,0),minutes:Lv(e,t+1,0),seconds:Lv(e,t+2,0),milliseconds:qF(e[t+3])},null,t+4]}function ix(e,t){const i=!e[t]&&!e[t+1],r=C$(e[t+1],e[t+2]),s=i?null:Es.instance(r);return[{},s,t+3]}function rx(e,t){const i=e[t]?va.create(e[t]):null;return[{},i,t+1]}const _we=RegExp(`^T?${WF.source}$`),Swe=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function xwe(e){const[t,i,r,s,n,o,a,l,u]=e,h=t[0]==="-",p=l&&l[0]==="-",f=(m,g=!1)=>m!==void 0&&(g||m&&h)?-m:m;return[{years:f(Gf(i)),months:f(Gf(r)),weeks:f(Gf(s)),days:f(Gf(n)),hours:f(Gf(o)),minutes:f(Gf(a)),seconds:f(Gf(l),l==="-0"),milliseconds:f(qF(u),p)}]}const Twe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ZF(e,t,i,r,s,n,o){const a={year:t.length===2?mP(fd(t)):fd(t),month:pte.indexOf(i)+1,day:fd(r),hour:fd(s),minute:fd(n)};return o&&(a.second=fd(o)),e&&(a.weekday=e.length>3?fte.indexOf(e)+1:mte.indexOf(e)+1),a}const Ewe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Mwe(e){const[,t,i,r,s,n,o,a,l,u,h,p]=e,f=ZF(t,s,r,i,n,o,a);let m;return l?m=Twe[l]:u?m=0:m=C$(h,p),[f,new Es(m)]}function Iwe(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const Awe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,$we=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Cwe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function PV(e){const[,t,i,r,s,n,o,a]=e;return[ZF(t,s,r,i,n,o,a),Es.utcInstance]}function Rwe(e){const[,t,i,r,s,n,o,a]=e;return[ZF(t,a,i,r,s,n,o),Es.utcInstance]}const Owe=rb(dwe,JF),Pwe=rb(fwe,JF),Lwe=rb(mwe,JF),Nwe=rb(Ste),Tte=sb(wwe,ob,ix,rx),kwe=sb(ywe,ob,ix,rx),Dwe=sb(gwe,ob,ix,rx),Fwe=sb(ob,ix,rx);function jwe(e){return nb(e,[Owe,Tte],[Pwe,kwe],[Lwe,Dwe],[Nwe,Fwe])}function Uwe(e){return nb(Iwe(e),[Ewe,Mwe])}function Vwe(e){return nb(e,[Awe,PV],[$we,PV],[Cwe,Rwe])}function Gwe(e){return nb(e,[Swe,xwe])}const Bwe=sb(ob);function zwe(e){return nb(e,[_we,Bwe])}const qwe=rb(vwe,bwe),Hwe=rb(xte),Wwe=sb(ob,ix,rx);function Jwe(e){return nb(e,[qwe,Tte],[Hwe,Wwe])}const LV="Invalid Duration",Ete={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Zwe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Ete},xa=146097/400,jg=146097/4800,Ywe={years:{quarters:4,months:12,weeks:xa/7,days:xa,hours:xa*24,minutes:xa*24*60,seconds:xa*24*60*60,milliseconds:xa*24*60*60*1e3},quarters:{months:3,weeks:xa/28,days:xa/4,hours:xa*24/4,minutes:xa*24*60/4,seconds:xa*24*60*60/4,milliseconds:xa*24*60*60*1e3/4},months:{weeks:jg/7,days:jg,hours:jg*24,minutes:jg*24*60,seconds:jg*24*60*60,milliseconds:jg*24*60*60*1e3},...Ete},dy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Kwe=dy.slice(0).reverse();function Tp(e,t,i=!1){const r={values:i?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ri(r)}function Mte(e,t){let i=t.milliseconds??0;for(const r of Kwe.slice(1))t[r]&&(i+=t[r]*e[r].milliseconds);return i}function NV(e,t){const i=Mte(e,t)<0?-1:1;dy.reduceRight((r,s)=>{if(Lt(t[s]))return r;if(r){const n=t[r]*i,o=e[s][r],a=Math.floor(n/o);t[s]+=a*i,t[r]-=a*o*i}return s},null),dy.reduce((r,s)=>{if(Lt(t[s]))return r;if(r){const n=t[r]%1;t[r]-=n,t[s]+=n*e[r][s]}return s},null)}function Xwe(e){const t={};for(const[i,r]of Object.entries(e))r!==0&&(t[i]=r);return t}class ri{constructor(t){const i=t.conversionAccuracy==="longterm"||!1;let r=i?Ywe:Zwe;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||vi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,i){return ri.fromObject({milliseconds:t},i)}static fromObject(t,i={}){if(t==null||typeof t!="object")throw new yn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new ri({values:x3(t,ri.normalizeUnit),loc:vi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(t){if(Vd(t))return ri.fromMillis(t);if(ri.isDuration(t))return t;if(typeof t=="object")return ri.fromObject(t);throw new yn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,i){const[r]=Gwe(t);return r?ri.fromObject(r,i):ri.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,i){const[r]=zwe(t);return r?ri.fromObject(r,i):ri.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,i=null){if(!t)throw new yn("need to specify a reason the Duration is invalid");const r=t instanceof Wl?t:new Wl(t,i);if(Ir.throwOnInvalid)throw new Sbe(r);return new ri({invalid:r})}static normalizeUnit(t){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!i)throw new kee(t);return i}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,i={}){const r={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?Tn.create(this.loc,r).formatDurationFromString(this,t):LV}toHuman(t={}){if(!this.isValid)return LV;const i=dy.map(r=>{const s=this.values[r];return Lt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(s)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=HF(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const i=this.toMillis();return i<0||i>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},_t.fromMillis(i,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Mte(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t),r={};for(const s of dy)(d1(i.values,s)||d1(this.values,s))&&(r[s]=i.get(s)+this.get(s));return Tp(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t);return this.plus(i.negate())}mapUnits(t){if(!this.isValid)return this;const i={};for(const r of Object.keys(this.values))i[r]=hte(t(this.values[r],r));return Tp(this,{values:i},!0)}get(t){return this[ri.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const i={...this.values,...x3(t,ri.normalizeUnit)};return Tp(this,{values:i})}reconfigure({locale:t,numberingSystem:i,conversionAccuracy:r,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:i}),matrix:s,conversionAccuracy:r};return Tp(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return NV(this.matrix,t),Tp(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Xwe(this.normalize().shiftToAll().toObject());return Tp(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>ri.normalizeUnit(o));const i={},r={},s=this.toObject();let n;for(const o of dy)if(t.indexOf(o)>=0){n=o;let a=0;for(const u in r)a+=this.matrix[u][o]*r[u],r[u]=0;Vd(s[o])&&(a+=s[o]);const l=Math.trunc(a);i[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Vd(s[o])&&(r[o]=s[o]);for(const o in r)r[o]!==0&&(i[n]+=o===n?r[o]:r[o]/this.matrix[n][o]);return NV(this.matrix,i),Tp(this,{values:i},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=this.values[i]===0?0:-this.values[i];return Tp(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function i(r,s){return r===void 0||r===0?s===void 0||s===0:r===s}for(const r of dy)if(!i(this.values[r],t.values[r]))return!1;return!0}}const Ug="Invalid Interval";function Qwe(e,t){return!e||!e.isValid?Er.invalid("missing or invalid start"):!t||!t.isValid?Er.invalid("missing or invalid end"):t<e?Er.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Er{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,i=null){if(!t)throw new yn("need to specify a reason the Interval is invalid");const r=t instanceof Wl?t:new Wl(t,i);if(Ir.throwOnInvalid)throw new _be(r);return new Er({invalid:r})}static fromDateTimes(t,i){const r=Lb(t),s=Lb(i),n=Qwe(r,s);return n??new Er({start:r,end:s})}static after(t,i){const r=ri.fromDurationLike(i),s=Lb(t);return Er.fromDateTimes(s,s.plus(r))}static before(t,i){const r=ri.fromDurationLike(i),s=Lb(t);return Er.fromDateTimes(s.minus(r),s)}static fromISO(t,i){const[r,s]=(t||"").split("/",2);if(r&&s){let n,o;try{n=_t.fromISO(r,i),o=n.isValid}catch{o=!1}let a,l;try{a=_t.fromISO(s,i),l=a.isValid}catch{l=!1}if(o&&l)return Er.fromDateTimes(n,a);if(o){const u=ri.fromISO(s,i);if(u.isValid)return Er.after(n,u)}else if(l){const u=ri.fromISO(r,i);if(u.isValid)return Er.before(a,u)}}return Er.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",i){if(!this.isValid)return NaN;const r=this.start.startOf(t,i);let s;return i?.useLocaleWeeks?s=this.end.reconfigure({locale:r.locale}):s=this.end,s=s.startOf(t,i),Math.floor(s.diff(r,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:i}={}){return this.isValid?Er.fromDateTimes(t||this.s,i||this.e):this}splitAt(...t){if(!this.isValid)return[];const i=t.map(Lb).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s}=this,n=0;for(;s<this.e;){const o=i[n]||this.e,a=+o>+this.e?this.e:o;r.push(Er.fromDateTimes(s,a)),s=a,n+=1}return r}splitBy(t){const i=ri.fromDurationLike(t);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:r}=this,s=1,n;const o=[];for(;r<this.e;){const a=this.start.plus(i.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(Er.fromDateTimes(r,n)),r=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const i=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return i>=r?null:Er.fromDateTimes(i,r)}union(t){if(!this.isValid)return this;const i=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return Er.fromDateTimes(i,r)}static merge(t){const[i,r]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return r&&i.push(r),i}static xor(t){let i=null,r=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,u)=>l.time-u.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?i=l.time:(i&&+i!=+l.time&&s.push(Er.fromDateTimes(i,l.time)),i=null);return Er.merge(s)}difference(...t){return Er.xor([this].concat(t)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Ug}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=w3,i={}){return this.isValid?Tn.create(this.s.loc.clone(i),t).formatInterval(this):Ug}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Ug}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Ug}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Ug}toFormat(t,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(t)}${i}${this.e.toFormat(t)}`:Ug}toDuration(t,i){return this.isValid?this.e.diff(this.s,t,i):ri.invalid(this.invalidReason)}mapEndpoints(t){return Er.fromDateTimes(t(this.s),t(this.e))}}class dT{static hasDST(t=Ir.defaultZone){const i=_t.now().setZone(t).set({month:12});return!t.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(t){return va.isValidZone(t)}static normalizeZone(t){return Md(t,Ir.defaultZone)}static getStartOfWeek({locale:t=null,locObj:i=null}={}){return(i||vi.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:i=null}={}){return(i||vi.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:i=null}={}){return(i||vi.create(t)).getWeekendDays().slice()}static months(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||vi.create(i,r,n)).months(t)}static monthsFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||vi.create(i,r,n)).months(t,!0)}static weekdays(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||vi.create(i,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:i=null,numberingSystem:r=null,locObj:s=null}={}){return(s||vi.create(i,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return vi.create(t).meridiems()}static eras(t="short",{locale:i=null}={}){return vi.create(i,null,"gregory").eras(t)}static features(){return{relative:lte(),localeWeek:ute()}}}function kV(e,t){const i=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=i(t)-i(e);return Math.floor(ri.fromMillis(r).as("days"))}function e_e(e,t,i){const r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const h=kV(l,u);return(h-h%7)/7}],["days",kV]],s={},n=e;let o,a;for(const[l,u]of r)i.indexOf(l)>=0&&(o=l,s[l]=u(e,t),a=n.plus(s),a>t?(s[l]--,e=n.plus(s),e>t&&(a=e,s[l]--,e=n.plus(s))):e=a);return[e,s,a,o]}function t_e(e,t,i,r){let[s,n,o,a]=e_e(e,t,i);const l=t-s,u=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);u.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const h=ri.fromObject(n,r);return u.length>0?ri.fromMillis(l,r).shiftTo(...u).plus(h):h}const i_e="missing Intl.DateTimeFormat.formatToParts support";function di(e,t=i=>i){return{regex:e,deser:([i])=>t(qbe(i))}}const r_e=" ",Ite=`[ ${r_e}]`,Ate=new RegExp(Ite,"g");function s_e(e){return e.replace(/\./g,"\\.?").replace(Ate,Ite)}function DV(e){return e.replace(/\./g,"").replace(Ate," ").toLowerCase()}function ml(e,t){return e===null?null:{regex:RegExp(e.map(s_e).join("|")),deser:([i])=>e.findIndex(r=>DV(i)===DV(r))+t}}function FV(e,t){return{regex:e,deser:([,i,r])=>C$(i,r),groups:t}}function fT(e){return{regex:e,deser:([t])=>t}}function n_e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o_e(e,t){const i=fl(t),r=fl(t,"{2}"),s=fl(t,"{3}"),n=fl(t,"{4}"),o=fl(t,"{6}"),a=fl(t,"{1,2}"),l=fl(t,"{1,3}"),u=fl(t,"{1,6}"),h=fl(t,"{1,9}"),p=fl(t,"{2,4}"),f=fl(t,"{4,6}"),m=w=>({regex:RegExp(n_e(w.val)),deser:([S])=>S,literal:!0}),b=(w=>{if(e.literal)return m(w);switch(w.val){case"G":return ml(t.eras("short"),0);case"GG":return ml(t.eras("long"),0);case"y":return di(u);case"yy":return di(p,mP);case"yyyy":return di(n);case"yyyyy":return di(f);case"yyyyyy":return di(o);case"M":return di(a);case"MM":return di(r);case"MMM":return ml(t.months("short",!0),1);case"MMMM":return ml(t.months("long",!0),1);case"L":return di(a);case"LL":return di(r);case"LLL":return ml(t.months("short",!1),1);case"LLLL":return ml(t.months("long",!1),1);case"d":return di(a);case"dd":return di(r);case"o":return di(l);case"ooo":return di(s);case"HH":return di(r);case"H":return di(a);case"hh":return di(r);case"h":return di(a);case"mm":return di(r);case"m":return di(a);case"q":return di(a);case"qq":return di(r);case"s":return di(a);case"ss":return di(r);case"S":return di(l);case"SSS":return di(s);case"u":return fT(h);case"uu":return fT(a);case"uuu":return di(i);case"a":return ml(t.meridiems(),0);case"kkkk":return di(n);case"kk":return di(p,mP);case"W":return di(a);case"WW":return di(r);case"E":case"c":return di(i);case"EEE":return ml(t.weekdays("short",!1),1);case"EEEE":return ml(t.weekdays("long",!1),1);case"ccc":return ml(t.weekdays("short",!0),1);case"cccc":return ml(t.weekdays("long",!0),1);case"Z":case"ZZ":return FV(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return FV(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return fT(/[a-z_+-/]{1,256}?/i);case" ":return fT(/[^\S\n\r]/);default:return m(w)}})(e)||{invalidReason:i_e};return b.token=e,b}const a_e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function l_e(e,t,i){const{type:r,value:s}=e;if(r==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=t[r];let o=r;r==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=i.hour12?"hour12":"hour24");let a=a_e[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function u_e(e){return[`^${e.map(i=>i.regex).reduce((i,r)=>`${i}(${r.source})`,"")}$`,e]}function c_e(e,t,i){const r=e.match(t);if(r){const s={};let n=1;for(const o in i)if(d1(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(r.slice(n,n+l))),n+=l}return[r,s]}else return[r,{}]}function h_e(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,r;return Lt(e.z)||(i=va.create(e.z)),Lt(e.Z)||(i||(i=new Es(e.Z)),r=e.Z),Lt(e.q)||(e.M=(e.q-1)*3+1),Lt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Lt(e.u)||(e.S=qF(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),i,r]}let Z5=null;function p_e(){return Z5||(Z5=_t.fromMillis(1555555555555)),Z5}function d_e(e,t){if(e.literal)return e;const i=Tn.macroTokenToFormatOpts(e.val),r=Ote(i,t);return r==null||r.includes(void 0)?e:r}function $te(e,t){return Array.prototype.concat(...e.map(i=>d_e(i,t)))}class Cte{constructor(t,i){if(this.locale=t,this.format=i,this.tokens=$te(Tn.parseFormat(i),t),this.units=this.tokens.map(r=>o_e(r,t)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,s]=u_e(this.units);this.regex=RegExp(r,"i"),this.handlers=s}}explainFromTokens(t){if(this.isValid){const[i,r]=c_e(t,this.regex,this.handlers),[s,n,o]=r?h_e(r):[null,null,void 0];if(d1(r,"a")&&d1(r,"H"))throw new ov("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:i,matches:r,result:s,zone:n,specificOffset:o}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Rte(e,t,i){return new Cte(e,i).explainFromTokens(t)}function f_e(e,t,i){const{result:r,zone:s,specificOffset:n,invalidReason:o}=Rte(e,t,i);return[r,s,n,o]}function Ote(e,t){if(!e)return null;const r=Tn.create(t,e).dtFormatter(p_e()),s=r.formatToParts(),n=r.resolvedOptions();return s.map(o=>l_e(o,e,n))}const Y5="Invalid DateTime",jV=864e13;function xw(e){return new Wl("unsupported zone",`the zone "${e.name}" is not supported`)}function K5(e){return e.weekData===null&&(e.weekData=_3(e.c)),e.weekData}function X5(e){return e.localWeekData===null&&(e.localWeekData=_3(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Bf(e,t){const i={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new _t({...i,...t,old:i})}function Pte(e,t,i){let r=e-t*60*1e3;const s=i.offset(r);if(t===s)return[r,t];r-=(s-t)*60*1e3;const n=i.offset(r);return s===n?[r,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function mT(e,t){e+=t*60*1e3;const i=new Date(e);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function tM(e,t,i){return Pte($$(e),t,i)}function UV(e,t){const i=e.o,r=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:r,month:s,day:Math.min(e.c.day,S3(r,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=ri.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=$$(n);let[l,u]=Pte(a,i,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function Vg(e,t,i,r,s,n){const{setZone:o,zone:a}=i;if(e&&Object.keys(e).length!==0||t){const l=t||a,u=_t.fromObject(e,{...i,zone:l,specificOffset:n});return o?u:u.setZone(a)}else return _t.invalid(new Wl("unparsable",`the input "${s}" can't be parsed as ${r}`))}function yT(e,t,i=!0){return e.isValid?Tn.create(vi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Q5(e,t){const i=e.c.year>9999||e.c.year<0;let r="";return i&&e.c.year>=0&&(r+="+"),r+=zr(e.c.year,i?6:4),t?(r+="-",r+=zr(e.c.month),r+="-",r+=zr(e.c.day)):(r+=zr(e.c.month),r+=zr(e.c.day)),r}function VV(e,t,i,r,s,n){let o=zr(e.c.hour);return t?(o+=":",o+=zr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=":")):o+=zr(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!i)&&(o+=zr(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=zr(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=zr(Math.trunc(-e.o/60)),o+=":",o+=zr(Math.trunc(-e.o%60))):(o+="+",o+=zr(Math.trunc(e.o/60)),o+=":",o+=zr(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const Lte={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},m_e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},y_e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Nte=["year","month","day","hour","minute","second","millisecond"],g_e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],v_e=["year","ordinal","hour","minute","second","millisecond"];function b_e(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new kee(e);return t}function GV(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return b_e(e)}}function w_e(e){return rM[e]||(iM===void 0&&(iM=Ir.now()),rM[e]=e.offset(iM)),rM[e]}function BV(e,t){const i=Md(t.zone,Ir.defaultZone);if(!i.isValid)return _t.invalid(xw(i));const r=vi.fromObject(t);let s,n;if(Lt(e.year))s=Ir.now();else{for(const l of Nte)Lt(e[l])&&(e[l]=Lte[l]);const o=ote(e)||ate(e);if(o)return _t.invalid(o);const a=w_e(i);[s,n]=tM(e,a,i)}return new _t({ts:s,zone:i,loc:r,o:n})}function zV(e,t,i){const r=Lt(i.round)?!0:i.round,s=(o,a)=>(o=HF(o,r||i.calendary?0:2,!0),t.loc.clone(i).relFormatter(i).format(o,a)),n=o=>i.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(i.unit)return s(n(i.unit),i.unit);for(const o of i.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,i.units[i.units.length-1])}function qV(e){let t={},i;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],i=Array.from(e).slice(0,e.length-1)):i=Array.from(e),[t,i]}let iM,rM={};class _t{constructor(t){const i=t.zone||Ir.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new Wl("invalid input"):null)||(i.isValid?null:xw(i));this.ts=Lt(t.ts)?Ir.now():t.ts;let s=null,n=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(i))[s,n]=[t.old.c,t.old.o];else{const a=Vd(t.o)&&!t.old?t.o:i.offset(this.ts);s=mT(this.ts,a),r=Number.isNaN(s.year)?new Wl("invalid input"):null,s=r?null:s,n=r?null:a}this._zone=i,this.loc=t.loc||vi.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new _t({})}static local(){const[t,i]=qV(arguments),[r,s,n,o,a,l,u]=i;return BV({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,i]=qV(arguments),[r,s,n,o,a,l,u]=i;return t.zone=Es.utcInstance,BV({year:r,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,i={}){const r=Ybe(t)?t.valueOf():NaN;if(Number.isNaN(r))return _t.invalid("invalid input");const s=Md(i.zone,Ir.defaultZone);return s.isValid?new _t({ts:r,zone:s,loc:vi.fromObject(i)}):_t.invalid(xw(s))}static fromMillis(t,i={}){if(Vd(t))return t<-jV||t>jV?_t.invalid("Timestamp out of range"):new _t({ts:t,zone:Md(i.zone,Ir.defaultZone),loc:vi.fromObject(i)});throw new yn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,i={}){if(Vd(t))return new _t({ts:t*1e3,zone:Md(i.zone,Ir.defaultZone),loc:vi.fromObject(i)});throw new yn("fromSeconds requires a numerical input")}static fromObject(t,i={}){t=t||{};const r=Md(i.zone,Ir.defaultZone);if(!r.isValid)return _t.invalid(xw(r));const s=vi.fromObject(i),n=x3(t,GV),{minDaysInFirstWeek:o,startOfWeek:a}=$V(n,s),l=Ir.now(),u=Lt(i.specificOffset)?r.offset(l):i.specificOffset,h=!Lt(n.ordinal),p=!Lt(n.year),f=!Lt(n.month)||!Lt(n.day),m=p||f,g=n.weekYear||n.weekNumber;if((m||h)&&g)throw new ov("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&h)throw new ov("Can't mix ordinal dates with month/day");const b=g||n.weekday&&!m;let w,S,T=mT(l,u);b?(w=g_e,S=m_e,T=_3(T,o,a)):h?(w=v_e,S=y_e,T=J5(T)):(w=Nte,S=Lte);let x=!1;for(const O of w){const k=n[O];Lt(k)?x?n[O]=S[O]:n[O]=T[O]:x=!0}const _=b?Wbe(n,o,a):h?Jbe(n):ote(n),M=_||ate(n);if(M)return _t.invalid(M);const I=b?IV(n,o,a):h?AV(n):n,[A,C]=tM(I,u,r),R=new _t({ts:A,zone:r,o:C,loc:s});return n.weekday&&m&&t.weekday!==R.weekday?_t.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${R.toISO()}`):R.isValid?R:_t.invalid(R.invalid)}static fromISO(t,i={}){const[r,s]=jwe(t);return Vg(r,s,i,"ISO 8601",t)}static fromRFC2822(t,i={}){const[r,s]=Uwe(t);return Vg(r,s,i,"RFC 2822",t)}static fromHTTP(t,i={}){const[r,s]=Vwe(t);return Vg(r,s,i,"HTTP",i)}static fromFormat(t,i,r={}){if(Lt(t)||Lt(i))throw new yn("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=r,o=vi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,u,h]=f_e(o,t,i);return h?_t.invalid(h):Vg(a,l,r,`format ${i}`,t,u)}static fromString(t,i,r={}){return _t.fromFormat(t,i,r)}static fromSQL(t,i={}){const[r,s]=Jwe(t);return Vg(r,s,i,"SQL",t)}static invalid(t,i=null){if(!t)throw new yn("need to specify a reason the DateTime is invalid");const r=t instanceof Wl?t:new Wl(t,i);if(Ir.throwOnInvalid)throw new wbe(r);return new _t({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,i={}){const r=Ote(t,vi.fromObject(i));return r?r.map(s=>s?s.val:null).join(""):null}static expandFormat(t,i={}){return $te(Tn.parseFormat(t),vi.fromObject(i)).map(s=>s.val).join("")}static resetCache(){iM=void 0,rM={}}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?K5(this).weekYear:NaN}get weekNumber(){return this.isValid?K5(this).weekNumber:NaN}get weekday(){return this.isValid?K5(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?X5(this).weekday:NaN}get localWeekNumber(){return this.isValid?X5(this).weekNumber:NaN}get localWeekYear(){return this.isValid?X5(this).weekYear:NaN}get ordinal(){return this.isValid?J5(this.c).ordinal:NaN}get monthShort(){return this.isValid?dT.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?dT.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?dT.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?dT.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,i=6e4,r=$$(this.c),s=this.zone.offset(r-t),n=this.zone.offset(r+t),o=this.zone.offset(r-s*i),a=this.zone.offset(r-n*i);if(o===a)return[this];const l=r-o*i,u=r-a*i,h=mT(l,o),p=mT(u,a);return h.hour===p.hour&&h.minute===p.minute&&h.second===p.second&&h.millisecond===p.millisecond?[Bf(this,{ts:l}),Bf(this,{ts:u})]:[this]}get isInLeapYear(){return tx(this.year)}get daysInMonth(){return S3(this.year,this.month)}get daysInYear(){return this.isValid?Pv(this.year):NaN}get weeksInWeekYear(){return this.isValid?G2(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?G2(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:i,numberingSystem:r,calendar:s}=Tn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:i,numberingSystem:r,outputCalendar:s}}toUTC(t=0,i={}){return this.setZone(Es.instance(t),i)}toLocal(){return this.setZone(Ir.defaultZone)}setZone(t,{keepLocalTime:i=!1,keepCalendarTime:r=!1}={}){if(t=Md(t,Ir.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(i||r){const n=t.offset(this.ts),o=this.toObject();[s]=tM(o,n,t)}return Bf(this,{ts:s,zone:t})}else return _t.invalid(xw(t))}reconfigure({locale:t,numberingSystem:i,outputCalendar:r}={}){const s=this.loc.clone({locale:t,numberingSystem:i,outputCalendar:r});return Bf(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const i=x3(t,GV),{minDaysInFirstWeek:r,startOfWeek:s}=$V(i,this.loc),n=!Lt(i.weekYear)||!Lt(i.weekNumber)||!Lt(i.weekday),o=!Lt(i.ordinal),a=!Lt(i.year),l=!Lt(i.month)||!Lt(i.day),u=a||l,h=i.weekYear||i.weekNumber;if((u||o)&&h)throw new ov("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new ov("Can't mix ordinal dates with month/day");let p;n?p=IV({..._3(this.c,r,s),...i},r,s):Lt(i.ordinal)?(p={...this.toObject(),...i},Lt(i.day)&&(p.day=Math.min(S3(p.year,p.month),p.day))):p=AV({...J5(this.c),...i});const[f,m]=tM(p,this.o,this.zone);return Bf(this,{ts:f,o:m})}plus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t);return Bf(this,UV(this,i))}minus(t){if(!this.isValid)return this;const i=ri.fromDurationLike(t).negate();return Bf(this,UV(this,i))}startOf(t,{useLocaleWeeks:i=!1}={}){if(!this.isValid)return this;const r={},s=ri.normalizeUnit(t);switch(s){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(s==="weeks")if(i){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(r.weekNumber=this.weekNumber-1),r.weekday=n}else r.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t,i){return this.isValid?this.plus({[t]:1}).startOf(t,i).minus(1):this}toFormat(t,i={}){return this.isValid?Tn.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,t):Y5}toLocaleString(t=w3,i={}){return this.isValid?Tn.create(this.loc.clone(i),t).formatDateTime(this):Y5}toLocaleParts(t={}){return this.isValid?Tn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:i=!1,suppressMilliseconds:r=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Q5(this,o);return a+="T",a+=VV(this,o,i,r,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?Q5(this,t==="extended"):null}toISOWeekDate(){return yT(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:i=!1,includeOffset:r=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+VV(this,o==="extended",i,t,r,n):null}toRFC2822(){return yT(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yT(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Q5(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:i=!1,includeOffsetSpace:r=!0}={}){let s="HH:mm:ss.SSS";return(i||t)&&(r&&(s+=" "),i?s+="z":t&&(s+="ZZ")),yT(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Y5}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const i={...this.c};return t.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,i="milliseconds",r={}){if(!this.isValid||!t.isValid)return ri.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...r},n=Kbe(i).map(ri.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=t_e(a,l,n,s);return o?u.negate():u}diffNow(t="milliseconds",i={}){return this.diff(_t.now(),t,i)}until(t){return this.isValid?Er.fromDateTimes(this,t):this}hasSame(t,i,r){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(i,r)<=s&&s<=n.endOf(i,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const i=t.base||_t.fromObject({},{zone:this.zone}),r=t.padding?this<i?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),zV(i,this.plus(r),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?zV(t.base||_t.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(_t.isDateTime))throw new yn("min requires all arguments be DateTimes");return CV(t,i=>i.valueOf(),Math.min)}static max(...t){if(!t.every(_t.isDateTime))throw new yn("max requires all arguments be DateTimes");return CV(t,i=>i.valueOf(),Math.max)}static fromFormatExplain(t,i,r={}){const{locale:s=null,numberingSystem:n=null}=r,o=vi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return Rte(o,t,i)}static fromStringExplain(t,i,r={}){return _t.fromFormatExplain(t,i,r)}static buildFormatParser(t,i={}){const{locale:r=null,numberingSystem:s=null}=i,n=vi.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return new Cte(n,t)}static fromFormatParser(t,i,r={}){if(Lt(t)||Lt(i))throw new yn("fromFormatParser requires an input string and a format parser");const{locale:s=null,numberingSystem:n=null}=r,o=vi.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});if(!o.equals(i.locale))throw new yn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${i.locale}`);const{result:a,zone:l,specificOffset:u,invalidReason:h}=i.explainFromTokens(t);return h?_t.invalid(h):Vg(a,l,r,`format ${i.format}`,t,u)}static get DATE_SHORT(){return w3}static get DATE_MED(){return Dee}static get DATE_MED_WITH_WEEKDAY(){return xbe}static get DATE_FULL(){return Fee}static get DATE_HUGE(){return jee}static get TIME_SIMPLE(){return Uee}static get TIME_WITH_SECONDS(){return Vee}static get TIME_WITH_SHORT_OFFSET(){return Gee}static get TIME_WITH_LONG_OFFSET(){return Bee}static get TIME_24_SIMPLE(){return zee}static get TIME_24_WITH_SECONDS(){return qee}static get TIME_24_WITH_SHORT_OFFSET(){return Hee}static get TIME_24_WITH_LONG_OFFSET(){return Wee}static get DATETIME_SHORT(){return Jee}static get DATETIME_SHORT_WITH_SECONDS(){return Zee}static get DATETIME_MED(){return Yee}static get DATETIME_MED_WITH_SECONDS(){return Kee}static get DATETIME_MED_WITH_WEEKDAY(){return Tbe}static get DATETIME_FULL(){return Xee}static get DATETIME_FULL_WITH_SECONDS(){return Qee}static get DATETIME_HUGE(){return ete}static get DATETIME_HUGE_WITH_SECONDS(){return tte}}function Lb(e){if(_t.isDateTime(e))return e;if(e&&e.valueOf&&Vd(e.valueOf()))return _t.fromJSDate(e);if(e&&typeof e=="object")return _t.fromObject(e);throw new yn(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const yc="system",Yy="unknown",ef="UTC",__e=Intl.DateTimeFormat().resolvedOptions().timeZone,S_e="shortOffset";function x_e(e){return"timeZoneIANA"in e}function T_e(e){return e.startsWith("UTC")}function f1(e,t=!1){return{json:{read:{source:e,reader:(i,r)=>r[e]?sM(r[e]):null},write:!!t&&{allowNull:!0,writer(i,r){r[e]=i?E_e(i):null}}}}}function sM(e,t=yc){return e?x_e(e)?e.timeZoneIANA:M_e(e,t):t}function E_e(e){return{timeZoneIANA:e}}function M_e(e,t=yc){if(!e||!mV.has(e.timeZone))return t;const i=mV.get(e.timeZone);return T_e(e.timeZone)||e.respectsDaylightSaving?i:I_e(i)}function I_e(e){const t=_t.local().setZone(e),i=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Es.instance(-i).formatOffset(0,"narrow")}`}function wct(e,t,i,r,s){if(t&&s==="date")return{timeZone:ef,timeZoneName:void 0};const n=r.timeStyle||r.hour,o=i===Yy;return{timeZone:o?s==="timestamp-offset"?void 0:e??ef:i,timeZoneName:o&&n?S_e:void 0}}function kte(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),i=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return e===yc||e===Yy||t.has(e.toLowerCase())||i.has(e.toLowerCase())}const A_e={year:void 0,month:void 0,day:void 0,weekday:void 0},$_e={hour:void 0,minute:void 0,second:void 0},Dte={timeZone:ef},yu={year:"numeric",month:"numeric",day:"numeric"},Nb={year:"numeric",month:"long",day:"numeric"},kb={year:"numeric",month:"short",day:"numeric"},Db={year:"numeric",month:"long",weekday:"long",day:"numeric"},md={hour:"numeric",minute:"numeric"},cm={...md,second:"numeric"},Fte={hourCycle:"h23"},Fb={...md,...Fte},jb={...cm,...Fte},jte={"short-date":yu,"short-date-short-time":{...yu,...md},"short-date-short-time-24":{...yu,...Fb},"short-date-long-time":{...yu,...cm},"short-date-long-time-24":{...yu,...jb},"short-date-le":yu,"short-date-le-short-time":{...yu,...md},"short-date-le-short-time-24":{...yu,...Fb},"short-date-le-long-time":{...yu,...cm},"short-date-le-long-time-24":{...yu,...jb},"long-month-day-year":Nb,"long-month-day-year-short-time":{...Nb,...md},"long-month-day-year-short-time-24":{...Nb,...Fb},"long-month-day-year-long-time":{...Nb,...cm},"long-month-day-year-long-time-24":{...Nb,...jb},"day-short-month-year":kb,"day-short-month-year-short-time":{...kb,...md},"day-short-month-year-short-time-24":{...kb,...Fb},"day-short-month-year-long-time":{...kb,...cm},"day-short-month-year-long-time-24":{...kb,...jb},"long-date":Db,"long-date-short-time":{...Db,...md},"long-date-short-time-24":{...Db,...Fb},"long-date-long-time":{...Db,...cm},"long-date-long-time-24":{...Db,...jb},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":md,"long-time":cm},C_e=ar()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Ute={ar:"ar-u-nu-latn-ca-gregory"};let yP=new WeakMap;const O$=jte["short-date-short-time"];function R_e(e){let t=yP.get(e);if(!t){const i=Co(),r=Ute[i]||i,s=KF(e.timeZone??yc),n={...e,timeZone:s};t=new Intl.DateTimeFormat(r,n),yP.set(e,t)}return t}function _ct(e){return jte[e]}function YF(e,t=O$){return R_e(t).format(e)}function Sct(e,t=O$){return YF(new Date(e),{...t,...Dte,...$_e})}function xct(e,t=O$){return YF(new Date(`1970-01-01T${e}Z`),{...t,...Dte,...A_e})}function Tct(e,t=O$){if(t.timeZone)return YF(new Date(e),t);const i=_t.fromISO(e,{setZone:!0}),r=Co(),s=Ute[r]??r,n=i.offset===0?ef:t.timeZone,o={...t,timeZone:n};return i.toLocaleString(o,{locale:s})}function KF(e){switch(e){case yc:return __e;case Yy:return ef;default:return e}}CF(()=>{yP=new WeakMap});const O_e={ar:"ar-u-nu-latn"};let nM=new WeakMap,Vte={};function gP(e){const t=e||Vte;if(!nM.has(t)){const i=Co(),r=O_e[Co()]||i;nM.set(t,new Intl.NumberFormat(r,e))}return nM.get(t)}function Ect(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Mct(e,t){return Object.is(e,-0)&&(e=0),gP(t).format(e)}function Ict(e,t=Co()){if(!e)return null;let i=HV.get(t);if(!i){const r=gP().formatToParts(12345.6),s=[...gP({useGrouping:!1}).format(9876543210)].reverse(),n=new Map(s.map((p,f)=>[p,f])),o=new RegExp(`[${r.find(p=>p.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(p=>p.type==="decimal")?.value}]`),l=new RegExp(`[${s.join("")}]`,"g"),u=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,h=/[-\u2212\u2013\u2014\u2015]/g;i=p=>{if((p=p.trim().replaceAll(o,"").replace(a,".").replace(l,m=>String(n.get(m))).replaceAll(u,"").replaceAll(h,"-"))==="")return null;const f=Number(p);return isNaN(f)?null:f},HV.set(t,i)}return i(e)}CF(()=>{nM=new WeakMap,Vte={}});const HV=new Map;async function P_e(e,t,i,r){const s=t.exec(i);if(!s)throw new W("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=p1e(r),l=`${n}${o}.json`,u=a?`${n}${o}_${a}.json`:l;let h;try{h=await WV(e(u))}catch(p){if(u===l)throw new W("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await WV(e(l))}catch(f){throw new W("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return h}async function WV(e){if(JV.fetchBundleAsset!=null)return JV.fetchBundleAsset(e);const t=await Ne(e,{responseType:"text"});return JSON.parse(t.data)}let L_e=class{constructor({base:t="",pattern:i,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?n=>new URL(n,new URL(r,window.location.href)).href:r instanceof URL?n=>new URL(n,r).href:r,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,i){return P_e(this.getAssetUrl,this.matcher,t,i)}};function N_e(e){return new L_e(e)}const JV={};h1e(N_e({pattern:"esri/",location:ii}));function XF(e){return typeof e=="string"||e instanceof String}var Nv;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Nv||(Nv={}));const k_e=[Nv.HMS_MS,Nv.HMS,Nv.HM,"TT"],D_e="yyyy-MM-dd";Nv.HMS;function ZV(e){if(!e||!XF(e))return null;const t=_t.fromFormat(e,D_e);return t.isValid?t:null}function YV(e){return e&&XF(e)?Yme(k_e,t=>{const i=_t.fromFormat(e,t);return i.isValid?i:null})??null:null}function KV(e){if(!e||!XF(e))return null;const t=_t.fromISO(e);return t.isValid?t:null}var m1;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(m1||(m1={}));const F_e=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function j_e(e){return e!=null&&F_e.has(e.type)}function Gte(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Bte(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function zte(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function U_e(e,t,i){const r=e?.domain;if(!r)return null;switch(r.type){case"range":{const{min:s,max:n}=V_e(e);if(s!=null&&+t<s||n!=null&&+t>n)return m1.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(r.codedValues==null||r.codedValues.every(s=>s==null||s.code!==t))return m1.INVALID_CODED_VALUE}return null}function V_e(e,t){const i=e?.domain;if(!i||i.type!=="range")return;const r="range"in i?i.range[0]:i.minValue,s="range"in i?i.range[1]:i.maxValue,n=j_e(e);return Gte(e)||zte(e)||Bte(e)?{...G_e(e,s,r),isInteger:n}:{min:r!=null&&typeof r=="number"?r:null,max:s!=null&&typeof s=="number"?s:null,rawMin:r,rawMax:s,isInteger:n}}function G_e(e,t,i){return Gte(e)?{min:ZV(i)?.toMillis(),max:ZV(t)?.toMillis(),rawMin:i,rawMax:t}:zte(e)?{min:YV(i)?.toMillis(),max:YV(t)?.toMillis(),rawMin:i,rawMax:t}:Bte(e)?{min:KV(i)?.toMillis(),max:KV(t)?.toMillis(),rawMin:i,rawMax:t}:{max:null,min:null}}const B_e=()=>xe.getLogger("esri.support.arcadeOnDemand");let e4;function Ky(){return e4||(e4=(async()=>{const e=await ce(()=>import("./arcadeUtils-BrTSK7Eg.js").then(t=>t.i),__vite__mapDeps([13,1,14,12,15,16,17]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),e4}const z_e=(e,t,i)=>qte.create(e,t,i,null,["$feature","$view"],[]),q_e=(e,t,i,r)=>qte.create(e,t,i,r,["$feature","$view"],[]);let qte=class Hte{constructor(t,i,r,s,n,o,a){this.services=null,this.script=t,this.evaluate=s;const l=Array.isArray(o)?o:o?.fields;this.fields=l??[],this._syntaxTree=r,this._arcade=i,this._arcadeFeature=n,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,i,r,s,n,o){const{arcade:a,Feature:l,Dictionary:u}=await Ky(),h=i instanceof ke?i:ke.fromJSON(i);let p;try{p=a.parseScript(t,o)}catch(C){return B_e().error(new W("arcade-bad-expression","Failed to parse arcade script",{script:t,error:C})),null}const f=n.reduce((C,R)=>({...C,[R]:null}),{});let m=null;s!=null&&(m=new u(s),m.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(p),b=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),S=a.scriptIsAsync(p),T=S&&a.enableAsyncSupport(),x={vars:f,spatialReference:h,useAsync:!!T};await Promise.all([b,w,T]);const _=new Set;await a.loadDependentModules(_,p,null,S,g);const M=new u;M.immutable=!1,M.setField("scale",0);const I=a.compileScript(p,x),A=(C,R)=>{const O=C.$view?.timeZone;return"$view"in C&&C.$view&&(M.setField("scale",typeof C.$view=="object"&&"scale"in C.$view?C.$view.scale:void 0),C.$view=M),m&&(C.$config=m),I({vars:C,spatialReference:h,services:R,timeZone:O})};return new Hte(t,a,p,A,new l,r,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const H_e=/^([0-9_])/,W_e=/[^a-z0-9_\u0080-\uffff]+/gi;function J_e(e){return e==null?null:e.trim().replaceAll(W_e,"_").replace(H_e,"F$1")||null}const Z_e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Y_e=["field","normalizationField"];function vP(e,t){if(e!=null&&t!=null){for(const i of Array.isArray(e)?e:[e])if(XV(Z_e,i,t),"visualVariables"in i&&i.visualVariables)for(const r of i.visualVariables)XV(Y_e,r,t)}}function XV(e,t,i){if(e)for(const r of e){const s=o$(r,t),n=s&&typeof s!="function"&&i.get(s);n&&Zr(r,n.name,t)}}function Wte(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const i=t.get(e.startField),r=t.get(e.endField);e.startField=i?.name??null,e.endField=r?.name??null}else{const i=t.get(e.startTimeField),r=t.get(e.endTimeField);e.startTimeField=i?.name??null,e.endTimeField=r?.name??null}}const t4=new Set;function P$(e,t){return e&&t?(t4.clear(),Xy(t4,e,t),Array.from(t4).sort()):[]}function Xy(e,t,i){if(i)if(t?.fields?.length)if(i.includes("*"))for(const{name:r}of t.fields)e.add(r);else for(const r of i)eo(e,t,r);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const r of i)r!=null&&e.add(r)}}function eo(e,t,i){if(typeof i=="string")if(t){const r=t.get(i);r&&e.add(r.name)}else e.add(i)}function $ct(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(i=>i.name):t}function Cct(e,t,i=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const r=P$(e,t);return r.length/e.fields.length>=i?["*"]:r}async function Rn(e,t,i){if(!i)return;const{arcadeUtils:r}=await Ky(),s=r.extractFieldNames(i,t?.fields?.map(n=>n.name));for(const n of s)eo(e,t,n)}async function Jte(e,t,i){if(i&&i!=="1=1"){const r=await Nee(i,t);if(!r.isStandardized)throw new W("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});Xy(e,t,r.fieldNames)}}function K_e({displayField:e,fields:t}){return e||(t?.length?i4(t,"name-or-title")||i4(t,"unique-identifier")||i4(t,"type-or-category")||X_e(t):null)}function X_e(e){for(const t of e){if(!t?.name)continue;const i=t.name.toLowerCase();if(i.includes("name")||i.includes("title"))return t.name}return null}function i4(e,t){for(const i of e)if(i?.valueType&&i.valueType===t)return i.name;return null}async function Rct(e,t){if(!t)return;const i=t.elevationInfo?.featureExpressionInfo;return i?i.collectRequiredFields(e,t.fieldsIndex):void 0}function Q_e(e,t,i){i.onStatisticExpression?Rn(e,t,i.onStatisticExpression.expression):e.add(i.onStatisticField)}async function Oct(e,t,i){if(!t||!i||!("fields"in i))return;const r=[],s=i.popupTemplate;r.push(e2e(e,t,s)),i.fields&&r.push(...i.fields.map(async n=>Q_e(e,t.fieldsIndex,n))),await Promise.all(r)}async function e2e(e,t,i){const r=[];i?.expressionInfos&&r.push(...i.expressionInfos.map(n=>Rn(e,t.fieldsIndex,n.expression)));const s=i?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&r.push(Rn(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(r)}async function Pct(e,t,i){t&&(t.timeInfo&&i?.timeExtent&&Xy(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Xy(e,t.fieldsIndex,[t.floorInfo.floorField]),i?.where!=null&&await Jte(e,t.fieldsIndex,i.where))}async function Lct(e,t,i){t&&i&&await Promise.all(i.map(r=>t2e(e,t,r)))}async function t2e(e,t,i){t&&i&&(i.valueExpression?await Rn(e,t.fieldsIndex,i.valueExpression):i.field&&eo(e,t.fieldsIndex,i.field))}function Nct(e){return e?P$(e.fieldsIndex,Zte(e)):[]}function i2e(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?P$(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const r2e=new Set(["oid","global-id","guid"]),s2e=new Set(["oid","global-id"]),n2e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function o2e(e){const t=new Set;Yte(e).forEach(r=>t.add(r)),i2e(e).forEach(r=>t.add(r.toLowerCase()));const i=e&&"infoFor3D"in e?e.infoFor3D:void 0;return i&&(Object.values(i.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(i.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function Zte(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:i,creatorField:r,editDateField:s,editorField:n}=t;return[i,r,s,n].filter(Boolean)}function Yte(e){return Zte(e).map(t=>t.toLowerCase())}function a2e(e,t){return e.editable&&!r2e.has(e.type)&&!Yte(t).includes(e.name?.toLowerCase()??"")}function l2e(e,t){const i=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&i===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&i===t.globalIdField.toLowerCase()||o2e(t).includes(i)||s2e.has(e.type)||n2e.some(r=>r.test(i)))}async function kct(e,t){const{labelingInfo:i,fieldsIndex:r}=t;i?.length&&await Promise.all(i.map(s=>u2e(e,r,s)))}async function u2e(e,t,i){if(!i)return;const r=i.getLabelExpression(),s=i.where;if(r.type==="arcade")await Rn(e,t,r.expression);else{const n=r.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{eo(e,t,o.slice(1,-1))})}await Jte(e,t,s)}function c2e(e){const t=e.defaultValue;return t!==void 0&&Qte(e,t)?t:e.nullable?null:void 0}function Dct(e){const t=typeof e=="string"?{type:e}:e;return iie(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function Kte(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function h2e(e){return e===null||Kte(e)}function p2e(e){return e===null||Number.isInteger(e)}function Xte(e){return e!=null&&typeof e=="string"}function d2e(e){return e===null||Xte(e)}function f2e(){return!0}function Qte(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":i=e.nullable?p2e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?h2e:Kte;break;case"string":case"esriFieldTypeString":i=e.nullable?d2e:Xte;break;default:i=f2e}return arguments.length===1?i:i(t)}const m2e=["integer","small-integer","big-integer"],y2e=["single","double"],g2e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],v2e=["esriFieldTypeSingle","esriFieldTypeDouble"],eie=new Set([...m2e,...g2e]),b2e=new Set([...y2e,...v2e]),w2e=NX(eie,b2e);function _2e(e){return e!=null&&eie.has(e.type)}function tie(e){return e!=null&&w2e.has(e.type)}function iie(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function S2e(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function Fct(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function jct(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function x2e(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function QV(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function eG(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Uct(e,t){return T2e(e,t)===null}var T3,E3;function Vct(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function T2e(e,t){return e==null||e.nullable&&t===null?null:tie(e)&&!E2e(e.type,Number(t))?T3.OUT_OF_RANGE:Qte(e,t)?e.domain?U_e(e,t):null:E3.INVALID_TYPE}function E2e(e,t){const i=typeof e=="string"?rie(e):e;if(!i)return!1;const r=i.min,s=i.max;return i.isInteger?Number.isInteger(t)&&t>=r&&t<=s:t>=r&&t<=s}function rie(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return M2e;case"esriFieldTypeInteger":case"integer":return I2e;case"esriFieldTypeBigInteger":case"big-integer":return A2e;case"esriFieldTypeSingle":case"single":return $2e;case"esriFieldTypeDouble":case"double":return C2e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(T3||(T3={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(E3||(E3={}));const M2e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},I2e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},A2e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},$2e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},C2e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Gct(e,t,i){switch(e){case m1.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case m1.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case E3.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case T3.OUT_OF_RANGE:{const{min:r,max:s}=rie(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${s}`}}}function Bct(e,t){return!R2e(e,t,null)}function R2e(e,t,i){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!r.has(n)&&(s=!0,i==null))break;return s}function O2e(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function sie(e){const t=e?.match(/{[^}]+}/g);return t?t.map(i=>i.slice(1,-1).split(":")[0].trim()):[]}let oM=class extends ae{constructor(t){super(t),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],oM.prototype,"type",void 0),oM=c([F("esri.popup.content.Content")],oM);const lp=oM;var bP;let hm=bP=class extends lp{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new bP({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],hm.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],hm.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],hm.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],hm.prototype,"type",void 0),hm=bP=c([F("esri.popup.content.AttachmentsContent")],hm);const y1=hm;var wP;let pm=wP=class extends lp{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new wP({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?K(this.outFields):null})}};c([d()],pm.prototype,"creator",void 0),c([d()],pm.prototype,"destroyer",void 0),c([d()],pm.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],pm.prototype,"type",void 0),pm=wP=c([F("esri.popup.content.CustomContent")],pm);const P2e=pm;var _P;let o0=_P=class extends ae{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new _P({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],o0.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],o0.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],o0.prototype,"returnType",void 0),o0=_P=c([F("esri.popup.ElementExpressionInfo")],o0);const L2e=o0;var SP;let Tw=SP=class extends lp{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new SP({expressionInfo:this.expressionInfo?.clone()})}};c([d({type:L2e,json:{write:!0}})],Tw.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Tw.prototype,"type",void 0),Tw=SP=c([F("esri.popup.content.ExpressionContent")],Tw);const L$=Tw;function Ue(e,t={}){const i=e instanceof gt?e:new gt(e,t),{alwaysWriteDefaults:r,default:s,ignoreUnknown:n=!0,name:o,nonNullable:a,readOnly:l=!1}=t;return d({type:n?i.apiValues:String,json:{type:i.jsonValues,default:s,name:o,read:!l&&{reader:i.read},write:{writer:i.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}let a0=class extends Dt(ae){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};c([Ue(C_e)],a0.prototype,"dateFormat",void 0),c([d({type:Boolean,json:{write:!0}})],a0.prototype,"digitSeparator",void 0),c([d({type:vt,json:{write:!0}})],a0.prototype,"places",void 0),a0=c([F("esri.popup.support.FieldInfoFormat")],a0);const aM=a0;var xP;let wl=xP=class extends ae{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new xP({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],wl.prototype,"fieldName",void 0),c([d({type:aM,json:{write:!0}})],wl.prototype,"format",void 0),c([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],wl.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],wl.prototype,"label",void 0),c([Ue(new gt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],wl.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],wl.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],wl.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],wl.prototype,"visible",void 0),wl=xP=c([F("esri.popup.FieldInfo")],wl);const QF=wl;var TP;let Wc=TP=class extends lp{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(i=>i.toJSON())}clone(){return new TP(K({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],Wc.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Wc.prototype,"description",void 0),c([d({type:[QF]})],Wc.prototype,"fieldInfos",void 0),c([ge("fieldInfos")],Wc.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],Wc.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Wc.prototype,"type",void 0),Wc=TP=c([F("esri.popup.content.FieldsContent")],Wc);const g1=Wc;let dm=class extends ae{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],dm.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],dm.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],dm.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],dm.prototype,"type",void 0),dm=c([F("esri.popup.content.mixins.MediaInfo")],dm);const e8=dm;var EP;let fm=EP=class extends Je{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new EP({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],fm.prototype,"color",void 0),c([d()],fm.prototype,"fieldName",void 0),c([d()],fm.prototype,"tooltip",void 0),c([d()],fm.prototype,"value",void 0),fm=EP=c([F("esri.popup.content.support.ChartMediaInfoValueSeries")],fm);const N2e=fm;var MP;let kp=MP=class extends ae{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new MP({colors:K(this.colors),fields:K(this.fields),normalizeField:this.normalizeField,series:K(this.series),tooltipField:this.tooltipField})}};c([d({type:[Oe],json:{type:[[vt]],write:!0}})],kp.prototype,"colors",void 0),c([d({type:[String],json:{write:!0}})],kp.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],kp.prototype,"normalizeField",void 0),c([d({type:[N2e],json:{read:!1}})],kp.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],kp.prototype,"tooltipField",void 0),kp=MP=c([F("esri.popup.content.support.ChartMediaInfoValue")],kp);const k2e=kp;let Ew=class extends e8{constructor(t){super(t),this.type=null,this.value=void 0}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Ew.prototype,"type",void 0),c([d({type:k2e,json:{write:!0}})],Ew.prototype,"value",void 0),Ew=c([F("esri.popup.content.mixins.ChartMediaInfo")],Ew);const N$=Ew,k$=ar()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var IP;let lM=IP=class extends N${constructor(e){super(e),this.type="bar-chart"}clone(){return new IP({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:k$.write}})],lM.prototype,"type",void 0),lM=IP=c([F("esri.popup.content.BarChartMediaInfo")],lM);const nie=lM;var AP;let uM=AP=class extends N${constructor(e){super(e),this.type="column-chart"}clone(){return new AP({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:k$.write}})],uM.prototype,"type",void 0),uM=AP=c([F("esri.popup.content.ColumnChartMediaInfo")],uM);const oie=uM;var $P;let Mw=$P=class extends ae{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new $P({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],Mw.prototype,"linkURL",void 0),c([d({type:String,json:{write:!0}})],Mw.prototype,"sourceURL",void 0),Mw=$P=c([F("esri.popup.content.support.ImageMediaInfoValue")],Mw);const D2e=Mw;var CP;let l0=CP=class extends e8{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new CP({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};c([d({type:Number,json:{write:!0}})],l0.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],l0.prototype,"type",void 0),c([d({type:D2e,json:{write:!0}})],l0.prototype,"value",void 0),l0=CP=c([F("esri.popup.content.ImageMediaInfo")],l0);const aie=l0;var RP;let cM=RP=class extends N${constructor(e){super(e),this.type="line-chart"}clone(){return new RP({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:k$.write}})],cM.prototype,"type",void 0),cM=RP=c([F("esri.popup.content.LineChartMediaInfo")],cM);const lie=cM;var OP;let hM=OP=class extends N${constructor(e){super(e),this.type="pie-chart"}clone(){return new OP({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:k$.write}})],hM.prototype,"type",void 0),hM=OP=c([F("esri.popup.content.PieChartMediaInfo")],hM);const uie=hM,PP={base:e8,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":nie,"column-chart":oie,"line-chart":lie,"pie-chart":uie,image:aie}};var LP;let _l=LP=class extends lp{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?aie.fromJSON(t):t.type==="barchart"?nie.fromJSON(t):t.type==="columnchart"?oie.fromJSON(t):t.type==="linechart"?lie.fromJSON(t):t.type==="piechart"?uie.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(i=>i.toJSON())}clone(){return new LP(K({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],_l.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],_l.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],_l.prototype,"description",void 0),c([d({types:[PP]})],_l.prototype,"mediaInfos",void 0),c([ue("mediaInfos")],_l.prototype,"readMediaInfos",null),c([ge("mediaInfos")],_l.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],_l.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],_l.prototype,"type",void 0),_l=LP=c([F("esri.popup.content.MediaContent")],_l);const B2=_l;var NP;let Iw=NP=class extends ae{constructor(e){super(e),this.field=null,this.order=null}clone(){return new NP({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Iw.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Iw.prototype,"order",void 0),Iw=NP=c([F("esri.popup.support.RelatedRecordsInfoFieldOrder")],Iw);const t8=Iw;let _u=class extends Dt(lp){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],_u.prototype,"description",void 0),c([d({type:Number,json:{type:vt,write:!0}})],_u.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],_u.prototype,"displayType",void 0),c([d({type:[t8],json:{write:!0}})],_u.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:vt,write:!0}})],_u.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],_u.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=c([F("esri.popup.content.RelationshipContent")],_u);const z2=_u;var kP;let Aw=kP=class extends lp{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new kP({text:this.text})}};c([d({type:String,json:{write:!0}})],Aw.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Aw.prototype,"type",void 0),Aw=kP=c([F("esri.popup.content.TextContent")],Aw);const q2=Aw;let Su=class extends Dt(ae){constructor(t){super(t),this.title=null,this.description=null,this.type=null,this.open=!1,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};c([d({type:String,json:{write:!0}})],Su.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Su.prototype,"description",void 0),c([d({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Su.prototype,"type",void 0),c([d({type:Boolean,json:{read:!1}})],Su.prototype,"open",void 0),c([d({type:Number,json:{type:vt,write:!0}})],Su.prototype,"associatedNetworkSourceId",void 0),c([d({type:Number,json:{type:vt,write:!0}})],Su.prototype,"associatedAssetGroup",void 0),c([d({type:Number,json:{type:vt,write:!0}})],Su.prototype,"associatedAssetType",void 0),Su=c([F("esri.popup.support.UtilityNetworkAssociationType")],Su);const F2e=Su;let mm=class extends Dt(lp){constructor(t){super(t),this.description=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};c([d({type:String,json:{write:!0}})],mm.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],mm.prototype,"title",void 0),c([d({type:[F2e],json:{write:!0}})],mm.prototype,"associationTypes",void 0),c([Ue({utilityNetworkAssociations:"utility-network-associations"})],mm.prototype,"type",void 0),mm=c([F("esri.popup.content.UtilityNetworkAssociationsContent")],mm);const i8=mm,j2e={base:null,key:"type",typeMap:{attachment:y1,media:B2,text:q2,expression:L$,field:g1,relationship:z2,utilityNetworkAssociations:i8}},U2e={base:null,key:"type",typeMap:{attachment:y1,media:B2,text:q2,expression:L$,field:g1,relationship:z2}};var DP;let ym=DP=class extends ae{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new DP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],ym.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],ym.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],ym.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],ym.prototype,"returnType",void 0),ym=DP=c([F("esri.popup.ExpressionInfo")],ym);const V2e=ym;var FP;let $w=FP=class extends ae{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new FP({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],$w.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],$w.prototype,"showNoDataRecords",void 0),$w=FP=c([F("esri.popup.LayerOptions")],$w);const G2e=$w;var jP;let Cw=jP=class extends ae{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new jP({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?K(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Cw.prototype,"showRelatedRecords",void 0),c([d({type:[t8],json:{write:!0}})],Cw.prototype,"orderByFields",void 0),Cw=jP=c([F("esri.popup.RelatedRecordsInfo")],Cw);const tG=Cw;let cie=0;const sx=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+cie++})}};return t=c([F("esri.core.Identifiable")],t),t},r8=e=>{let t=class extends e{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:cie++})}};return t=c([F("esri.core.Identifiable.NumericIdentifiable")],t),t};let iG=class extends sx(class{}){};iG=c([F("esri.core.Identifiable")],iG);var UP;let $a=UP=class extends sx(Je){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new UP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],$a.prototype,"active",void 0),c([d()],$a.prototype,"className",void 0),c([d()],$a.prototype,"disabled",void 0),c([d()],$a.prototype,"icon",void 0),c([d()],$a.prototype,"id",void 0),c([d()],$a.prototype,"indicator",void 0),c([d()],$a.prototype,"title",void 0),c([d()],$a.prototype,"type",void 0),c([d()],$a.prototype,"visible",void 0),$a=UP=c([F("esri.support.actions.ActionBase")],$a);const s8=$a;var VP;let pM=VP=class extends s8{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new VP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],pM.prototype,"image",void 0),pM=VP=c([F("esri.support.actions.ActionButton")],pM);const B2e=pM;var GP;let Rw=GP=class extends s8{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new GP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],Rw.prototype,"image",void 0),c([d()],Rw.prototype,"value",void 0),Rw=GP=c([F("esri.support.actions.ActionToggle")],Rw);const z2e=Rw,Ub="relationships/",rG="expression/",q2e=Be.ofType({key:"type",defaultKeyValue:"button",base:s8,typeMap:{button:B2e,toggle:z2e}}),H2e={base:lp,key:"type",typeMap:{media:B2,custom:P2e,text:q2,attachments:y1,fields:g1,expression:L$,relationship:z2,utilityNetworkAssociations:i8}},hie=new Set(["attachments","fields","media","text","expression","relationship"]),W2e=new Set([...hie,"utility-network-associations"]);let Ur=class extends Dt(ae){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(i=>il(H2e,i)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ac(t)?t:(xe.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,i){const{popupElements:r}=i;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,r):this._readPopupInfo(i)}writeWebSceneContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeWebMapContent(t,i,r,s){this._writePopupTemplateContent(t,i,s)}writeFieldInfos(t,i,r,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>u.fieldInfos?.length);i.fieldInfos=t.filter(Boolean).map(u=>{const h=u.toJSON(s);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(t,i,r,s){i[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,i){i.title=t||""}async collectRequiredFields(t,i){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,i,[...r,...this._getContentExpressionInfos(this.content,r)]),Xy(t,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const i=new Set;return await this.collectRequiredFields(i,t),[...i].sort()}_writePopupTemplateContent(t,i,r){typeof t!="string"?Array.isArray(t)&&(i.popupElements=t.filter(s=>r?.origin==="web-scene"?hie.has(s.type):W2e.has(s.type)).map(s=>s?.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=t}_writeFieldsContent(t,i){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=K(t.fieldInfos);Array.isArray(i.fieldInfos)?r.forEach(s=>{const n=i.fieldInfos.find(o=>o.fieldName?.toLowerCase()===s.fieldName?.toLowerCase());n?n.visible=!0:i.fieldInfos.push(s)}):i.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,i){const r=t.orderByFields?.map(n=>this._toFieldOrderJSON(n,t.relationshipId))||[],s=[...i.relatedRecordsInfo?.orderByFields||[],...r];i.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(t,i){!i.description&&t.text&&(i.description=t.text)}_writeMediaContent(t,i){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=K(t.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...r]:i.mediaInfos=r}_readPopupInfoElements(t,i,r){const s={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!i||s.mediaInfos||(n.mediaInfos=i,s.mediaInfos=!0),B2.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),q2.fromJSON(n)):n.type==="attachments"?y1.fromJSON(n):n.type==="fields"?g1.fromJSON(n):n.type==="expression"?L$.fromJSON(n):n.type==="relationship"?z2.fromJSON(n):n.type==="utilityNetworkAssociations"?i8.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:i,order:r}=t;if(!i?.startsWith(Ub))return null;const s=i.replace(Ub,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return typeof n=="number"&&o?z2.fromJSON({relationshipId:n,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,i){const{order:r,field:s}=t;return{field:`${Ub}${i}/${s}`,order:r}}_readPopupInfo({description:t,mediaInfos:i,showAttachments:r,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new q2({text:t})):n.push(new g1),Array.isArray(i)&&i.length&&n.push(B2.fromJSON({mediaInfos:i})),r&&n.push(y1.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&n.push(u)}),n.length?n:t}_getContentElementFields(t){const i=t?.type;if(i==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(i==="custom")return t.outFields||[];if(i==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(i==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return i==="text"?this._extractFieldNames(t.text):i==="relationship"||i==="utility-network-associations"?[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)]:[]}_getMediaInfoFields(t){const{caption:i,title:r,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:h}=n,p=[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(h),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(t,i){return Array.isArray(t)?t.reduce((r,s)=>[...r,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],i):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((i,r)=>[...i,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,i,r){r&&await Promise.all(r.map(s=>Rn(t,i,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:i,visible:r})=>!(r!==void 0&&!r||!i||i.startsWith(Ub)||i.startsWith(rG))).map(i=>i.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((i,r)=>[...i,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:i,title:r,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(i),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return sie(t).filter(i=>!(i.indexOf(Ub)===0||i.indexOf(rG)===0))}};c([d({type:q2e})],Ur.prototype,"actions",void 0),c([d()],Ur.prototype,"content",void 0),c([Ht("content")],Ur.prototype,"castContent",null),c([ue("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ur.prototype,"readContent",null),c([ge("web-scene","content",{popupElements:{type:Be.ofType(U2e)},showAttachments:{type:Boolean},mediaInfos:{type:Be.ofType(PP)},description:{type:String},relatedRecordsInfo:{type:tG}})],Ur.prototype,"writeWebSceneContent",null),c([ge("content",{popupElements:{type:Be.ofType(j2e)},showAttachments:{type:Boolean},mediaInfos:{type:Be.ofType(PP)},description:{type:String},relatedRecordsInfo:{type:tG}})],Ur.prototype,"writeWebMapContent",null),c([d({type:[V2e],json:{write:!0}})],Ur.prototype,"expressionInfos",void 0),c([d({type:[QF]})],Ur.prototype,"fieldInfos",void 0),c([ge("fieldInfos")],Ur.prototype,"writeFieldInfos",null),c([d({type:G2e})],Ur.prototype,"layerOptions",void 0),c([ge("layerOptions")],Ur.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ur.prototype,"lastEditInfoEnabled",void 0),c([d()],Ur.prototype,"outFields",void 0),c([d()],Ur.prototype,"overwriteActions",void 0),c([d()],Ur.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Ur.prototype,"title",void 0),c([ge("title")],Ur.prototype,"writeTitle",null),Ur=c([F("esri.PopupTemplate")],Ur);const df=Ur,sG=new gt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let J2e=0,u0=class extends ae{constructor(t){super(t),this.id="sym"+J2e++,this.type=null,this.color=new Oe([0,0,0,1])}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:sG.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:sG.write}}})],u0.prototype,"type",void 0),c([d({type:Oe,json:{write:{allowNull:!0}}})],u0.prototype,"color",void 0),c([ue("color")],u0.prototype,"readColor",null),u0=c([F("esri.symbols.Symbol")],u0);const Zs=u0;var BP;let Dp=BP=class extends Zs{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const i=this.data.primitiveOverrides;if(i){const r=i.map(s=>{const n=s.valueExpressionInfo;return n?Rn(e,t,n.expression):null});await Promise.all(r)}}}clone(){return new BP({data:K(this.data)})}hash(){return pX(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],Dp.prototype,"color",void 0),c([d({json:{write:!0}})],Dp.prototype,"data",void 0),c([ue("data",["symbol"])],Dp.prototype,"readData",null),c([ge("data",{})],Dp.prototype,"writeData",null),c([Ue({CIMSymbolReference:"cim"},{readOnly:!0})],Dp.prototype,"type",void 0),Dp=BP=c([F("esri.symbols.CIMSymbol")],Dp);const ff=Dp;let c0=class extends ae{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,i,r){t||(i[r]=t)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],c0.prototype,"enabled",void 0),c([ge("enabled")],c0.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],c0.prototype,"type",void 0),c0=c([F("esri.symbols.Symbol3DLayer")],c0);const Rc=c0,Z2e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Y2e="screenUtils.toPt: input not recognized!",pie=96;function K2e(e){return e?e/72*pie:0}function sl(e){return e?72*e/pie:0}function qt(e){if(typeof e=="string"){const t=e.match(Z2e);if(t){const i=Number(t[1]),r=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=r==="px"?sl(i):i;return s?-n:n}return console.warn(Y2e),null}return e}function Ms(e=0,t=0){return{x:e,y:t}}function tht(e){return e?Ms(e.x,e.y):null}function iht(e=0,t=0){return[e,t]}function rht(e=0,t=0,i=0){return[e,t,i]}function sht(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function D$(e){const t=d$(100*(1-e));return Math.max(0,Math.min(t,100))}function H2(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function X2e(e,t){const i=t.transparency!=null?H2(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new Oe([r[0]||0,r[1]||0,r[2]||0,i]):null}function Q2e(e,t){t.color=e.toJSON().slice(0,3);const i=D$(e.a);i!==0&&(t.transparency=i)}const mf={type:Oe,json:{type:[vt],default:null,read:{source:["color","transparency"],reader:X2e},write:{target:{color:{type:[vt]},transparency:{type:vt}},writer:Q2e}}},gc={type:Number,cast:qt,json:{write:!0}};let gm=class extends ae{constructor(t){super(t),this.color=new Oe([0,0,0,1]),this.extensionLength=0,this.size=sl(1)}clone(){}cloneProperties(){return{color:K(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],gm.prototype,"type",void 0),c([d(mf)],gm.prototype,"color",void 0),c([d({...gc,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],gm.prototype,"extensionLength",void 0),c([d(gc)],gm.prototype,"size",void 0),gm=c([F("esri.symbols.edges.Edges3D")],gm);const n8=gm;var zP;let dM=zP=class extends n8{constructor(e){super(e),this.type="sketch"}clone(){return new zP(this.cloneProperties())}};c([Ue({sketch:"sketch"},{readOnly:!0})],dM.prototype,"type",void 0),dM=zP=c([F("esri.symbols.edges.SketchEdges3D")],dM);const eSe=dM;var qP;let fM=qP=class extends n8{constructor(e){super(e),this.type="solid"}clone(){return new qP(this.cloneProperties())}};c([Ue({solid:"solid"},{readOnly:!0})],fM.prototype,"type",void 0),fM=qP=c([F("esri.symbols.edges.SolidEdges3D")],fM);const die=fM,fie={types:{key:"type",base:n8,typeMap:{solid:die,sketch:eSe}},json:{write:!0}};function yf(){return[0,0,0]}function o8(e){return[e[0],e[1],e[2]]}function ab(e,t,i){return[e,t,i]}function tSe(e,t,i){return[e,t,i]}function iSe(e,t=yf()){const i=Math.min(3,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function rSe(e,t){return new Float64Array(e,t,3)}function mie(){return yf()}function yie(){return ab(1,1,1)}function gie(){return ab(1,0,0)}function vie(){return ab(0,1,0)}function bie(){return ab(0,0,1)}const sSe=mie(),wie=yie(),nSe=gie(),oSe=vie(),aSe=bie();Object.freeze(Object.defineProperty({__proto__:null,ONES:wie,UNIT_X:nSe,UNIT_Y:oSe,UNIT_Z:aSe,ZEROS:sSe,clone:o8,create:yf,createView:rSe,freeze:tSe,fromArray:iSe,fromValues:ab,ones:yie,unitX:gie,unitY:vie,unitZ:bie,zeros:mie},Symbol.toStringTag,{value:"Module"}));var HP;let Io=HP=class extends ae{constructor(e){super(e),this.color=null,this.emissiveFactor=null}clone(){const e={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?o8(this.emissiveFactor):null};return new HP(e)}};c([d(mf)],Io.prototype,"color",void 0),c([d({type:[Number],json:{write:!1}})],Io.prototype,"emissiveFactor",void 0),Io=HP=c([F("esri.symbols.support.Symbol3DMaterial")],Io);var WP;let Fp=WP=class extends Rc{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new WP({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};c([Ue({Extrude:"extrude"},{readOnly:!0})],Fp.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Fp.prototype,"size",void 0),c([d({type:Io,json:{write:!0}})],Fp.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Fp.prototype,"castShadows",void 0),c([d(fie)],Fp.prototype,"edges",void 0),Fp=WP=c([F("esri.symbols.ExtrudeSymbol3DLayer")],Fp);const _ie=Fp;let Ow=class extends Zs{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Ue({esriSLS:"simple-line"},{readOnly:!0})],Ow.prototype,"type",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Ow.prototype,"width",void 0),Ow=c([F("esri.symbols.LineSymbol")],Ow);const lSe=Ow,uSe=["begin","end","begin-end"],Sie=["arrow","circle","square","diamond","cross","x"];var JP;let xu=JP=class extends ae{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,i,r){t[i]=r?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,i,r){r?.origin==="web-map"||(t[i]=e)}clone(){return new JP({color:K(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],xu.prototype,"placement",void 0),c([Ue({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],xu.prototype,"type",void 0),c([d({type:Sie})],xu.prototype,"style",void 0),c([ge("style")],xu.prototype,"writeStyle",null),c([d({type:Oe,value:null,json:{write:{allowNull:!0}}})],xu.prototype,"color",null),c([ue("color")],xu.prototype,"readColor",null),c([ge("color")],xu.prototype,"writeColor",null),xu=JP=c([F("esri.symbols.LineSymbolMarker")],xu);const cSe=xu;var ZP;const r4=new gt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Jc=ZP=class extends lSe{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,i,r,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),i!=null&&(o.width=qt(i)),r!=null&&(o.cap=r),s!=null&&(o.join=s),n!=null&&(o.miterLimit=qt(n)),o}clone(){return new ZP({color:K(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};c([Ue({esriSLS:"simple-line"},{readOnly:!0})],Jc.prototype,"type",void 0),c([d({type:r4.apiValues,json:{read:r4.read,write:r4.write}})],Jc.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&i?.origin==null})}}})],Jc.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,i)=>({enabled:e!=="round"&&i?.origin==null})}}})],Jc.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":cSe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Jc.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],Jc.prototype,"miterLimit",void 0),Jc=ZP=c([F("esri.symbols.SimpleLineSymbol")],Jc);const ro=Jc;let Pw=class extends Zs{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ro}},json:{default:null,write:!0}})],Pw.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],Pw.prototype,"type",void 0),Pw=c([F("esri.symbols.FillSymbol")],Pw);const xie=Pw;let mM=class extends ae{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],mM.prototype,"type",void 0),mM=c([F("esri.symbols.patterns.LinePattern3D")],mM);const Tie=mM,hSe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var YP;const pSe=ar()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Lw=YP=class extends Tie{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new YP(e)}};c([d({type:["style"]})],Lw.prototype,"type",void 0),c([Ue(pSe),d({type:hSe})],Lw.prototype,"style",void 0),Lw=YP=c([F("esri.symbols.patterns.LineStylePattern3D")],Lw);const a8=Lw;let yM=class extends ae{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yM.prototype,"type",void 0),yM=c([F("esri.symbols.patterns.Pattern3D")],yM);const Eie=yM,dSe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var KP;let Nw=KP=class extends Eie{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new KP({style:this.style})}};c([d({type:["style"]})],Nw.prototype,"type",void 0),c([d({type:dSe,json:{read:!0,write:!0}})],Nw.prototype,"style",void 0),Nw=KP=c([F("esri.symbols.patterns.StylePattern3D")],Nw);const Mie=Nw,fSe={types:{key:"type",base:Eie,typeMap:{style:Mie}},json:{write:!0}},Iie={types:{key:"type",base:Tie,typeMap:{style:a8}},json:{write:!0}},G_=new Oe("white");new Oe("black");const mSe=new Oe([255,255,255,0]);function ySe(e){return e.r===0&&e.g===0&&e.b===0}var XP;let B_=XP=class extends Io{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color?.clone()??null,emissiveFactor:this.emissiveFactor?o8(this.emissiveFactor):null,colorMixMode:this.colorMixMode};return new XP(e)}};c([Ue({multiply:"multiply",replace:"replace",tint:"tint"})],B_.prototype,"colorMixMode",void 0),B_=XP=c([F("esri.symbols.support.Symbol3DFillMaterial")],B_);function gSe(e,t=!1){return e<=eF?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function cht(e){return(nX(e)?e.length:e.byteLength/8)<=eF?Array.from(e):new Float64Array(e)}function hht(e,t,i){return Array.isArray(e)?e.slice(t,t+i):e.subarray(t,t+i)}function nx(e=_Se){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function l8(e,t,i,r,s,n,o=nx()){return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function pht(e,t=nx()){return vSe(e,0,e.length/3,t)}function vSe(e,t,i,r=nx()){return Aie(r,eL),bSe(r,e,t,i),r}function dht(e,t=gSe(24)){const[i,r,s,n,o,a]=e;return t[0]=i,t[1]=r,t[2]=s,t[3]=i,t[4]=r,t[5]=a,t[6]=i,t[7]=o,t[8]=s,t[9]=i,t[10]=o,t[11]=a,t[12]=n,t[13]=r,t[14]=s,t[15]=n,t[16]=r,t[17]=a,t[18]=n,t[19]=o,t[20]=s,t[21]=n,t[22]=o,t[23]=a,t}function fht(e,t){const i=isFinite(e[2])||isFinite(e[5]);return new bt(i?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function mht(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function yht(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function bSe(e,t,i=0,r=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let h=0;h<r;h++)s=Math.min(s,t[i+3*h]),n=Math.min(n,t[i+3*h+1]),o=Math.min(o,t[i+3*h+2]),a=Math.max(a,t[i+3*h]),l=Math.max(l,t[i+3*h+1]),u=Math.max(u,t[i+3*h+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=u}function u8(e){return e[0]>=e[3]?0:e[3]-e[0]}function c8(e){return e[1]>=e[4]?0:e[4]-e[1]}function h8(e){return e[2]>=e[5]?0:e[5]-e[2]}function ght(e){const t=u8(e),i=h8(e),r=c8(e);return Math.sqrt(t*t+i*i+r*r)}function vht(e,t=[0,0,0]){return t[0]=e[0]+u8(e)/2,t[1]=e[1]+c8(e)/2,t[2]=e[2]+h8(e)/2,t}function bht(e,t=[0,0,0]){return t[0]=u8(e),t[1]=c8(e),t[2]=h8(e),t}function wht(e,t,i=e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i!==e&&(i[3]=e[3],i[4]=e[4],i[5]=e[5]),i}function _ht(e,t,i=e){return i[3]=t[0],i[4]=t[1],i[5]=t[2],i!==e&&(i[0]=e[0],i[1]=e[1],i[2]=e[2]),e}function Aie(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Sht(e){return e?Aie(e,eL):nx(eL)}function xht(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function wSe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function QP(e){return e.length===6}function Tht(e,t,i){if(e==null||t==null)return e===t;if(!QP(e)||!QP(t))return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const eL=[1/0,1/0,1/0,-1/0,-1/0,-1/0],_Se=[0,0,0,0,0,0];nx();function Eht(e,{isPrimitive:t,width:i,depth:r,height:s}){const n=t?10:1;if(i==null&&s==null&&r==null)return[n*e[0],n*e[1],n*e[2]];const o=ab(i,r,s);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const SSe=l8(-.5,-.5,-.5,.5,.5,.5),xSe=l8(-.5,-.5,0,.5,.5,1),TSe=l8(-.5,-.5,0,.5,.5,.5);function Mht(e){switch(e){case"sphere":case"cube":case"diamond":return SSe;case"cylinder":case"cone":case"inverted-cone":return xSe;case"tetrahedron":return TSe;default:return}}const p8=["butt","square","round"],ESe=[...p8,"none"],$ie=["miter","bevel","round"];var tL;let vm=tL=class extends ae{constructor(e){super(e),this.color=new Oe([0,0,0,1]),this.size=sl(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new tL(e)}};c([d(mf)],vm.prototype,"color",void 0),c([d(gc)],vm.prototype,"size",void 0),c([d(Iie)],vm.prototype,"pattern",void 0),c([d({type:p8,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],vm.prototype,"patternCap",void 0),vm=tL=c([F("esri.symbols.support.Symbol3DOutline")],vm);var gM;let Zc=gM=class extends Rc{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new gM(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new a8({style:e.outline.style}):null,i={size:e.outline?.width??0,color:(e.outline?.color??G_).clone(),pattern:t};return t&&e.outline?.cap&&(i.patternCap=e.outline.cap),new gM({material:new B_({color:(e.color??mSe).clone()}),pattern:e.style&&e.style!=="solid"?new Mie({style:e.style}):null,outline:i})}};c([Ue({Fill:"fill"},{readOnly:!0})],Zc.prototype,"type",void 0),c([d({type:B_,json:{write:!0}})],Zc.prototype,"material",void 0),c([d(fSe)],Zc.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zc.prototype,"castShadows",void 0),c([d({type:vm,json:{write:!0}})],Zc.prototype,"outline",void 0),c([d(fie)],Zc.prototype,"edges",void 0),Zc=gM=c([F("esri.symbols.FillSymbol3DLayer")],Zc);const gg=Zc,MSe=["none","underline","line-through"],ISe=["normal","italic","oblique"],ASe=["normal","lighter","bold","bolder"],Cie={type:Number,cast:e=>{const t=bn(e);return t===0?1:rl(t,.1,4)},nonNullable:!0},$Se=["left","right","center"],CSe=["baseline","top","middle","bottom"],Rie={type:$Se,nonNullable:!0},Oie={type:CSe,nonNullable:!0},Iht=8;var iL;let Yc=iL=class extends ae{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return qt(e)}clone(){return new iL({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:MSe,json:{default:"none",write:!0}})],Yc.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],Yc.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(e,t,i)=>({enabled:!i||!i.textSymbol3D})}}})],Yc.prototype,"size",void 0),c([Ht("size")],Yc.prototype,"castSize",null),c([d({type:ISe,json:{default:"normal",write:!0}})],Yc.prototype,"style",void 0),c([d({type:ASe,json:{default:"normal",write:!0}})],Yc.prototype,"weight",void 0),Yc=iL=c([F("esri.symbols.Font")],Yc);const F$=Yc;var rL;const RSe=ar()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let bm=rL=class extends ae{constructor(e){super(e)}readHref(e,t,i){return e?eb(e,i):t.dataURI}writeHref(e,t,i,r){e&&(mg(e)?t.dataURI=e:(t.href=XS(e,r),pa(t.href)&&(t.href=Ja(t.href))))}clone(){return new rL({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],bm.prototype,"href",void 0),c([ue("href")],bm.prototype,"readHref",null),c([ge("href",{href:{type:String},dataURI:{type:String}})],bm.prototype,"writeHref",null),c([Ue(RSe)],bm.prototype,"primitive",void 0),bm=rL=c([F("esri.symbols.support.IconSymbol3DLayerResource")],bm);var sL;let av=sL=class extends Je{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new sL({x:this.x,y:this.y})}};c([d({type:Number})],av.prototype,"x",void 0),c([d({type:Number})],av.prototype,"y",void 0),av=sL=c([F("esri.symbols.support.Symbol3DAnchorPosition2D")],av);var nL;let kw=nL=class extends ae{constructor(e){super(e),this.color=new Oe([0,0,0,1]),this.size=sl(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new nL(e)}};c([d(mf)],kw.prototype,"color",void 0),c([d(gc)],kw.prototype,"size",void 0),kw=nL=c([F("esri.symbols.support.Symbol3DIconOutline")],kw);var h0;const Pie="esri.symbols.IconSymbol3DLayer";let Sl=h0=class extends Rc{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0}clone(){return new h0({anchor:this.anchor,anchorPosition:K(this.anchorPosition),enabled:this.enabled,material:K(this.material),outline:K(this.outline),resource:K(this.resource),angle:this.angle,size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||G_,i=nG(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||G_).clone()}:null;return new h0({size:e.size,angle:e.angle,resource:{primitive:PSe(e.style)},material:{color:t},outline:r,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(e){const t=!e.color||ySe(e.color)?G_:e.color,i=nG(e);return new h0({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:t.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(e){return new h0({resource:{href:vQ({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};c([d({type:Io,json:{write:!0}})],Sl.prototype,"material",void 0),c([d({type:bm,json:{write:!0}})],Sl.prototype,"resource",void 0),c([Ue({Icon:"icon"},{readOnly:!0})],Sl.prototype,"type",void 0),c([d(gc)],Sl.prototype,"size",void 0),c([Ue({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],Sl.prototype,"anchor",void 0),c([d({type:av,json:{type:[Number],read:{reader:e=>new av({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Sl.prototype,"anchorPosition",void 0),c([d({type:kw,json:{write:!0}})],Sl.prototype,"outline",void 0),c([d({type:Number,json:{write:!0,default:0}})],Sl.prototype,"angle",void 0),Sl=h0=c([F(Pie)],Sl);const fy=Sl;function nG(e){const t="width"in e?e.width:e.size,i="height"in e?e.height:e.size,r=oG(e.xoffset),s=oG(e.yoffset);return(r||s)&&t&&i?{x:-r/t,y:s/i}:null}function oG(e){return isFinite(e)?e:0}const OSe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function PSe(e){return OSe[e]||(xe.getLogger(Pie).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let wm=class extends Dt(ae){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],wm.prototype,"type",void 0),c([d({type:uSe,json:{default:"begin-end",write:!0}})],wm.prototype,"placement",void 0),c([d({type:Sie,json:{default:"arrow",write:!0}})],wm.prototype,"style",void 0),c([d({type:Oe,json:{type:[vt],default:null,write:!0}})],wm.prototype,"color",void 0),wm=c([F("esri.symbols.LineStyleMarker3D")],wm);const oL=wm;var vM;let Tu=vM=class extends Rc{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=sl(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new vM(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??sl(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new a8({style:e.style}):null,material:new Io({color:(e.color||G_).clone()}),marker:e.marker?new oL({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new vM(t)}};c([d({type:Io,json:{write:!0}})],Tu.prototype,"material",void 0),c([Ue({Line:"line"},{readOnly:!0})],Tu.prototype,"type",void 0),c([d({type:$ie,json:{write:!0,default:"miter"}})],Tu.prototype,"join",void 0),c([d({type:p8,json:{write:!0,default:"butt"}})],Tu.prototype,"cap",void 0),c([d(gc)],Tu.prototype,"size",void 0),c([d(Iie)],Tu.prototype,"pattern",void 0),c([d({types:{key:"type",base:oL,typeMap:{style:oL}},json:{write:!0}})],Tu.prototype,"marker",void 0),Tu=vM=c([F("esri.symbols.LineSymbol3DLayer")],Tu);const lb=Tu;var aL;const LSe=ar()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Dw=aL=class extends ae{clone(){return new aL({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:OF,write:Zy}})],Dw.prototype,"href",void 0),c([Ue(LSe)],Dw.prototype,"primitive",void 0),Dw=aL=c([F("esri.symbols.support.ObjectSymbol3DLayerResource")],Dw);var lL;let iy=lL=class extends Je{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new lL({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],iy.prototype,"x",void 0),c([d({type:Number})],iy.prototype,"y",void 0),c([d({type:Number})],iy.prototype,"z",void 0),iy=lL=c([F("esri.symbols.support.Symbol3DAnchorPosition3D")],iy);var uL;let nn=uL=class extends Rc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new uL({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:Io,json:{write:!0}})],nn.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],nn.prototype,"castShadows",void 0),c([d({type:Dw,json:{write:!0}})],nn.prototype,"resource",void 0),c([Ue({Object:"object"},{readOnly:!0})],nn.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"depth",void 0),c([Ue({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],nn.prototype,"anchor",void 0),c([d({type:iy,json:{type:[Number],read:{reader:e=>new iy({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],nn.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],nn.prototype,"roll",void 0),c([d({readOnly:!0})],nn.prototype,"isPrimitive",null),nn=uL=c([F("esri.symbols.ObjectSymbol3DLayer")],nn);const d8=nn;var cL;let Dn=cL=class extends Rc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new cL({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:Io,json:{write:!0}})],Dn.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Dn.prototype,"castShadows",void 0),c([Ue({Path:"path"},{readOnly:!0})],Dn.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Dn.prototype,"profile",void 0),c([d({type:$ie,json:{write:!0,default:"miter"}})],Dn.prototype,"join",void 0),c([d({type:ESe,json:{write:!0,default:"butt"}})],Dn.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Dn.prototype,"width",void 0),c([ue("width",["width","size","height"])],Dn.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],Dn.prototype,"height",void 0),c([ue("height",["height","size","width"])],Dn.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Dn.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],Dn.prototype,"profileRotation",void 0),Dn=cL=c([F("esri.symbols.PathSymbol3DLayer")],Dn);const f8=Dn;var hL;let lv=hL=class extends ae{constructor(){super(...arguments),this.color=new Oe([0,0,0,1]),this.size=0}clone(){const e={color:K(this.color),size:this.size};return new hL(e)}};c([d(mf)],lv.prototype,"color",void 0),c([d(gc)],lv.prototype,"size",void 0),lv=hL=c([F("esri.symbols.support.Symbol3DHalo")],lv);let z_=class extends Dt(ae){constructor(t){super(t),this.color=null}};c([d(mf)],z_.prototype,"color",void 0),z_=c([F("esri.symbols.support.Symbol3DTextBackground")],z_);var bM;let lo=bM=class extends Rc{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,i,r){const s={...r,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new bM({enabled:this.enabled,font:this.font&&K(this.font),halo:this.halo&&K(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:K(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new bM({font:e.font!=null?e.font.clone():new F$,halo:NSe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Io({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new z_({color:e.backgroundColor.clone()}):null})}};function NSe(e,t){return e&&t!=null&&t>0?new lv({color:K(e),size:t}):null}c([d({type:F$,json:{write:!0}})],lo.prototype,"font",null),c([ge("font")],lo.prototype,"writeFont",null),c([d({type:lv,json:{write:!0}})],lo.prototype,"halo",void 0),c([d({...Rie,json:{default:"center",write:!0}})],lo.prototype,"horizontalAlignment",void 0),c([d({...Cie,json:{default:1,write:!0}})],lo.prototype,"lineHeight",void 0),c([d({type:Io,json:{write:!0}})],lo.prototype,"material",void 0),c([d({type:z_,json:{write:!0}})],lo.prototype,"background",void 0),c([d(gc)],lo.prototype,"size",null),c([d({type:String,json:{write:!0}})],lo.prototype,"text",void 0),c([Ue({Text:"text"},{readOnly:!0})],lo.prototype,"type",void 0),c([d({...Oie,json:{default:"baseline",write:!0}})],lo.prototype,"verticalAlignment",void 0),lo=bM=c([F("esri.symbols.TextSymbol3DLayer")],lo);const ub=lo;var pL;let jp=pL=class extends Rc{constructor(e){super(e),this.color=dL.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new pL({color:K(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:Oe,nonNullable:!0,json:{type:[vt],write:(e,t,i)=>t[i]=e.toArray(Oe.AlphaMode.UNLESS_OPAQUE),default:()=>dL.clone(),defaultEquals:e=>e.toCss(!0)===dL.toCss(!0)}})],jp.prototype,"color",void 0),c([Ue({Water:"water"},{readOnly:!0})],jp.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],jp.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],jp.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],jp.prototype,"waveStrength",void 0),jp=pL=c([F("esri.symbols.WaterSymbol3DLayer")],jp);const Lie=jp,dL=new Oe([0,119,190]);var fL;let _m=fL=class extends Je{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new fL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],_m.prototype,"name",void 0),c([d({type:String})],_m.prototype,"styleUrl",void 0),c([d({type:String})],_m.prototype,"styleName",void 0),c([d({type:jo})],_m.prototype,"portal",void 0),_m=fL=c([F("esri.symbols.support.StyleOrigin")],_m);const mL=_m;var yL;let q_=yL=class extends Je{constructor(){super(...arguments),this.url=""}clone(){return new yL({url:this.url})}};c([d({type:String})],q_.prototype,"url",void 0),q_=yL=c([F("esri.symbols.support.Thumbnail")],q_);const Nie={icon:fy,object:d8,line:lb,path:f8,fill:gg,extrude:_ie,text:ub,water:Lie},kSe=Be.ofType({base:Rc,key:"type",typeMap:Nie,errorContext:"symbol-layer"});let Eu=class extends Zs{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=i?.type,s=r||Be;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&xe.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Yd(t,this._get("symbolLayers"))}readStyleOrigin(t,i,r){if(t.styleUrl&&t.name){const s=eb(t.styleUrl,r);return new mL({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new mL({portal:r?.portal||jo.getDefault(),styleName:t.styleName,name:t.name});r?.messages&&r.messages.push(new Fo("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,i,r,s){if(t.styleUrl&&t.name){let n=XS(t.styleUrl,s);pa(n)&&(n=Ja(n)),i.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&s?.portal&&!gQ(t.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new Fo("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Rc||t&&Nie[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};c([d({json:{read:!1,write:!1}})],Eu.prototype,"color",null),c([d({type:kSe,nonNullable:!0,json:{write:!0}}),Ht(RQ)],Eu.prototype,"symbolLayers",null),c([d({type:mL})],Eu.prototype,"styleOrigin",void 0),c([ue("styleOrigin")],Eu.prototype,"readStyleOrigin",null),c([ge("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Eu.prototype,"writeStyleOrigin",null),c([d({type:q_,json:{read:!1}})],Eu.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Eu.prototype,"type",void 0),Eu=c([F("esri.symbols.Symbol3D")],Eu);const vg=Eu;let Fw=class extends ae{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};c([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Fw.prototype,"type",void 0),c([d({readOnly:!0})],Fw.prototype,"visible",void 0),Fw=c([F("esri.symbols.callouts.Callout3D")],Fw);const kie=Fw;var gL;let wM=gL=class extends ae{constructor(e){super(e),this.color=new Oe("white")}clone(){return new gL({color:K(this.color)})}};c([d(mf)],wM.prototype,"color",void 0),wM=gL=c([F("esri.symbols.callouts.LineCallout3DBorder")],wM);const DSe=wM;var vL;let Up=vL=class extends kie{constructor(e){super(e),this.type="line",this.color=new Oe([0,0,0,1]),this.size=sl(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new vL({color:K(this.color),size:this.size,border:K(this.border)})}};c([Ue({line:"line"})],Up.prototype,"type",void 0),c([d(mf)],Up.prototype,"color",void 0),c([d(gc)],Up.prototype,"size",void 0),c([d({type:DSe,json:{write:!0}})],Up.prototype,"border",void 0),c([d({readOnly:!0})],Up.prototype,"visible",null),Up=vL=c([F("esri.symbols.callouts.LineCallout3D")],Up);const Die=Up;function m8(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function Fie(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!m8(e)}const jie={types:{key:"type",base:kie,typeMap:{line:Die}},json:{write:!0}};var bL;let p0=bL=class extends ae{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new bL({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d(gc)],p0.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],p0.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],p0.prototype,"maxWorldLength",void 0),p0=bL=c([F("esri.symbols.support.Symbol3DVerticalOffset")],p0);const y8=p0;var _M;const Uie=Be.ofType({base:null,key:"type",typeMap:{text:ub}});let Vp=_M=class extends vg{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Uie,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Fie(this)}hasVisibleVerticalOffset(){return m8(this)}clone(){return new _M({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail),callout:K(this.callout),verticalOffset:K(this.verticalOffset)})}static fromTextSymbol(e){return new _M({symbolLayers:new Be([ub.fromTextSymbol(e)])})}};c([d({type:y8,json:{write:!0}})],Vp.prototype,"verticalOffset",void 0),c([d(jie)],Vp.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],Vp.prototype,"styleOrigin",void 0),c([d({type:Uie})],Vp.prototype,"symbolLayers",void 0),c([Ue({LabelSymbol3D:"label-3d"},{readOnly:!0})],Vp.prototype,"type",void 0),Vp=_M=c([F("esri.symbols.LabelSymbol3D")],Vp);const j$=Vp;var SM;const Vie=Be.ofType({base:null,key:"type",typeMap:{line:lb,path:f8}}),FSe=Be.ofType({base:null,key:"type",typeMap:{line:lb,path:f8}});let jw=SM=class extends vg{constructor(e){super(e),this.symbolLayers=new Vie,this.type="line-3d"}clone(){return new SM({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromSimpleLineSymbol(e){return new SM({symbolLayers:new Be([lb.fromSimpleLineSymbol(e)])})}};c([d({type:Vie,json:{type:FSe}})],jw.prototype,"symbolLayers",void 0),c([Ue({LineSymbol3D:"line-3d"},{readOnly:!0})],jw.prototype,"type",void 0),jw=SM=c([F("esri.symbols.LineSymbol3D")],jw);const bg=jw;let Gp=class extends Zs{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Gp.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Gp.prototype,"type",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Gp.prototype,"xoffset",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Gp.prototype,"yoffset",void 0),c([d({cast:e=>e==="auto"?e:bn(qt(e)),json:{write:!0}})],Gp.prototype,"size",void 0),Gp=c([F("esri.symbols.MarkerSymbol")],Gp);const Gie=Gp;var xM;const Bie=Be.ofType({base:null,key:"type",typeMap:{fill:gg}});let Uw=xM=class extends vg{constructor(e){super(e),this.symbolLayers=new Bie,this.type="mesh-3d"}clone(){return new xM({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromSimpleFillSymbol(e){return new xM({symbolLayers:new Be([gg.fromSimpleFillSymbol(e)])})}};c([d({type:Bie})],Uw.prototype,"symbolLayers",void 0),c([Ue({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Uw.prototype,"type",void 0),Uw=xM=c([F("esri.symbols.MeshSymbol3D")],Uw);const ox=Uw;function jSe(e,t,i){return t.imageData?vQ({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):zie(t.url,i)}function zie(e,t){if(!pa(e)){const i=VSe(t);if(i)return ep(i,"images",e)}return eb(e,t)}function USe(e,t,i,r){if(mg(e)){const s=a1(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,i&&i.imageData===t.imageData&&i.url&&Zy(i.url,t,"url",r)}else Zy(e,t,"url",r)}const qie={json:{read:{source:["imageData","url"],reader:jSe},write:{writer(e,t,i,r){USe(e,t,this.source,r)}}}},Hie={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,i){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=zie(t.url,i)),r}}}};function VSe(e){if(!e)return null;const{origin:t,layer:i}=e;if(t!=="service"&&t!=="portal-item")return null;const r=i?.type;return r==="feature"||r==="stream"?i.parsedUrl?.path:r==="map-image"||r==="tile"?e.url?.path:null}var wL;let Ca=wL=class extends xie{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),i!=null&&(s.width=qt(i)),r!=null&&(s.height=qt(r)),s}clone(){const e=new wL({color:K(this.color),height:this.height,outline:K(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",K(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Ue({esriPFS:"picture-fill"},{readOnly:!0})],Ca.prototype,"type",void 0),c([d(qie)],Ca.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],Ca.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],Ca.prototype,"yscale",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Ca.prototype,"width",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Ca.prototype,"height",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Ca.prototype,"xoffset",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Ca.prototype,"yoffset",void 0),c([d(Hie)],Ca.prototype,"source",void 0),Ca=wL=c([F("esri.symbols.PictureFillSymbol")],Ca);const g8=Ca;var _L;let xl=_L=class extends Gie{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=qt(t)),i!=null&&(r.height=qt(i)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new _L({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",K(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],xl.prototype,"color",void 0),c([Ue({esriPMS:"picture-marker"},{readOnly:!0})],xl.prototype,"type",void 0),c([d(qie)],xl.prototype,"url",void 0),c([d(Hie)],xl.prototype,"source",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],xl.prototype,"height",void 0),c([ue("height",["height","size"])],xl.prototype,"readHeight",null),c([d({type:Number,cast:qt,json:{write:!0}})],xl.prototype,"width",void 0),c([d({json:{write:!1}})],xl.prototype,"size",void 0),xl=_L=c([F("esri.symbols.PictureMarkerSymbol")],xl);const qh=xl;var Sm;const Wie=Be.ofType({base:null,key:"type",typeMap:{icon:fy,object:d8,text:ub}});let xm=Sm=class extends vg{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Wie,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Fie(this)}hasVisibleVerticalOffset(){return m8(this)}clone(){return new Sm({verticalOffset:K(this.verticalOffset),callout:K(this.callout),styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Sm({symbolLayers:new Be([fy.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Sm({symbolLayers:new Be([fy.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const i=e.data.symbol;return new Sm(i?.callout?{symbolLayers:new Be([fy.fromCIMSymbol(e)]),callout:new Die({size:.5,color:new Oe([0,0,0])}),verticalOffset:new y8({screenLength:40})}:{symbolLayers:new Be([fy.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Sm({symbolLayers:new Be([ub.fromTextSymbol(e)])})}};c([d({type:y8,json:{write:!0}})],xm.prototype,"verticalOffset",void 0),c([d(jie)],xm.prototype,"callout",void 0),c([d({type:Wie,json:{origins:{"web-scene":{write:!0}}}})],xm.prototype,"symbolLayers",void 0),c([Ue({PointSymbol3D:"point-3d"},{readOnly:!0})],xm.prototype,"type",void 0),xm=Sm=c([F("esri.symbols.PointSymbol3D")],xm);const Gh=xm;function at(e,t,i={}){return v8(e,t,i,Jie)}function vc(e,t,i={}){return v8(e,t,i,Zie)}function v8(e,t,i={},r){let s=null;const n=i.once?(o,a)=>{r(o)&&(Yi(s),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(s=ege(e,n,i.sync,i.equals),i.initial){const o=e();n(o,o)}return s}function au(e,t,i,r={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),r.onListenerRemove?.(s),s=null,n=null)}function l(h){r.once&&r.once&&Yi(o),i(h)}const u=at(e,(h,p)=>{a(),c$(h)&&(s=h,n=GS(h,t,l),r.onListenerAdd?.(h))},{sync:r.sync,initial:!0});return o=ti(()=>{u.remove(),a()}),o}function b8(e,t){return GSe(e,Zie,t)}function GSe(e,t,i){if(ya(i))return Promise.reject(Oi());const r=e();if(t?.(r))return Promise.resolve(r);let s=null;function n(){s=Yi(s)}return new Promise((o,a)=>{s=jS([ha(i,()=>{n(),a(Oi())}),v8(e,l=>{n(),o(l)},{sync:!1,once:!0},t??Jie)])})}function Jie(e){return!0}function Zie(e){return!!e}const ns={sync:!0},Bs={initial:!0},sa={sync:!0,initial:!0};var Vw;const Yie=Be.ofType({base:null,key:"type",typeMap:{extrude:_ie,fill:gg,icon:fy,line:lb,object:d8,text:ub,water:Lie}});let Gw=Vw=class extends vg{constructor(e){super(e),this.symbolLayers=new Yie,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&R2(xe.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&R2(xe.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(au(()=>this.symbolLayers,"after-add",({item:t})=>e(t),ns))}clone(){return new Vw({styleOrigin:K(this.styleOrigin),symbolLayers:K(this.symbolLayers),thumbnail:K(this.thumbnail)})}static fromJSON(e){const t=new Vw;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const i=t.symbolLayers.at(0),r=t.symbolLayers.at(1);!r.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(i.outline={size:r.size,color:r.material!=null?r.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Vw({symbolLayers:new Be([gg.fromSimpleFillSymbol(e)])})}};c([d({type:Yie,json:{write:!0}})],Gw.prototype,"symbolLayers",void 0),c([Ue({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Gw.prototype,"type",void 0),Gw=Vw=c([F("esri.symbols.PolygonSymbol3D")],Gw);const gf=Gw;var SL;const s4=new gt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Tm=SL=class extends xie{constructor(...e){super(...e),this.color=new Oe([0,0,0,.25]),this.outline=new ro,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),i&&(r.color=i),r}clone(){return new SL({color:K(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],Tm.prototype,"color",void 0),c([d()],Tm.prototype,"outline",void 0),c([Ue({esriSFS:"simple-fill"},{readOnly:!0})],Tm.prototype,"type",void 0),c([d({type:s4.apiValues,json:{read:s4.read,write:s4.write}})],Tm.prototype,"style",void 0),Tm=SL=c([F("esri.symbols.SimpleFillSymbol")],Tm);const bc=Tm;var xL;const n4=new gt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Mu=xL=class extends Gie{constructor(...e){super(...e),this.color=new Oe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ro}normalizeCtorArgs(e,t,i,r){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=qt(t)),i&&(s.outline=i),r&&(s.color=r),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new xL({angle:this.angle,color:K(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};c([d()],Mu.prototype,"color",void 0),c([ge("color")],Mu.prototype,"writeColor",null),c([Ue({esriSMS:"simple-marker"},{readOnly:!0})],Mu.prototype,"type",void 0),c([d()],Mu.prototype,"size",void 0),c([d({type:n4.apiValues,json:{read:n4.read,write:n4.write}})],Mu.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],Mu.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ro}},json:{default:null,write:!0}})],Mu.prototype,"outline",void 0),Mu=xL=c([F("esri.symbols.SimpleMarkerSymbol")],Mu);const Uo=Mu;var TL;let Bi=TL=class extends Zs{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new F$,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,i){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),i&&(r.color=i),r}writeLineWidth(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}castLineWidth(e){return qt(e)}writeLineHeight(e,t,i,r){r&&typeof r!="string"?r.origin:t[i]=e}clone(){return new TL({angle:this.angle,backgroundColor:K(this.backgroundColor),borderLineColor:K(this.borderLineColor),borderLineSize:this.borderLineSize,color:K(this.color),font:this.font&&this.font.clone(),haloColor:K(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:Oe,json:{write:!0}})],Bi.prototype,"backgroundColor",void 0),c([d({type:Oe,json:{write:!0}})],Bi.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:qt})],Bi.prototype,"borderLineSize",void 0),c([d({type:F$,json:{write:!0}})],Bi.prototype,"font",void 0),c([d({...Rie,json:{write:!0}})],Bi.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],Bi.prototype,"kerning",void 0),c([d({type:Oe,json:{write:!0}})],Bi.prototype,"haloColor",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Bi.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],Bi.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],Bi.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],Bi.prototype,"text",void 0),c([Ue({esriTS:"text"},{readOnly:!0})],Bi.prototype,"type",void 0),c([d({...Oie,json:{write:!0}})],Bi.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Bi.prototype,"xoffset",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Bi.prototype,"yoffset",void 0),c([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Bi.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],Bi.prototype,"width",void 0),c([d({type:Number})],Bi.prototype,"lineWidth",void 0),c([ge("lineWidth")],Bi.prototype,"writeLineWidth",null),c([Ht("lineWidth")],Bi.prototype,"castLineWidth",null),c([d(Cie)],Bi.prototype,"lineHeight",void 0),c([ge("lineHeight")],Bi.prototype,"writeLineHeight",null),Bi=TL=c([F("esri.symbols.TextSymbol")],Bi);const cb=Bi;var EL;let Tl=EL=class extends Zs{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:jo.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new EL({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const i=t!=null?t.cache:null,r=i?this._fetchCacheKey:null;if(i!=null){const a=r&&i.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:s}=await ce(()=>import("./webStyleSymbolUtils-DsVAxhgW.js"),__vite__mapDeps([18,19,1]),import.meta.url);wi(t);const n=s(this,{portal:this.portal},e,t);n.catch(a=>{xe.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await n;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(i?.set(r,o.clone()),o):null}};c([d({json:{write:!1}})],Tl.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Tl.prototype,"styleName",void 0),c([d({type:jo,json:{write:!1}})],Tl.prototype,"portal",void 0),c([d({type:String,json:{read:OF,write:Zy}})],Tl.prototype,"styleUrl",void 0),c([d({type:q_,json:{read:!1}})],Tl.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],Tl.prototype,"name",void 0),c([Ue({styleSymbolReference:"web-style"},{readOnly:!0})],Tl.prototype,"type",void 0),c([d()],Tl.prototype,"_fetchCacheKey",null),Tl=EL=c([F("esri.symbols.WebStyleSymbol")],Tl);const wg=Tl;function U$(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Qy(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Od={base:Zs,key:"type",typeMap:{"simple-fill":bc,"picture-fill":g8,"picture-marker":qh,"simple-line":ro,"simple-marker":Uo,text:cb,"label-3d":j$,"line-3d":bg,"mesh-3d":ox,"point-3d":Gh,"polygon-3d":gf,"web-style":wg,cim:ff},errorContext:"symbol"},Pht={base:Zs,key:"type",typeMap:{"picture-marker":qh,"simple-marker":Uo,"point-3d":Gh,cim:ff},errorContext:"symbol"},Lht={base:Zs,key:"type",typeMap:{"simple-line":ro,"line-3d":bg,cim:ff},errorContext:"symbol"},Nht={base:Zs,key:"type",typeMap:{"simple-fill":bc,"picture-fill":g8,"polygon-3d":gf,cim:ff},errorContext:"symbol"},BSe={base:Zs,key:"type",typeMap:{"picture-marker":qh,"simple-marker":Uo,text:cb,"web-style":wg,cim:ff},errorContext:"symbol"},zSe=K1({types:Od}),Kie={base:Zs,key:"type",typeMap:{"simple-fill":bc,"picture-fill":g8,"picture-marker":qh,"simple-line":ro,"simple-marker":Uo,text:cb,"line-3d":bg,"mesh-3d":ox,"point-3d":Gh,"polygon-3d":gf,"web-style":wg,cim:ff},errorContext:"symbol"},qSe={base:Zs,key:"type",typeMap:{text:cb,"label-3d":j$},errorContext:"symbol"},aG={base:Zs,key:"type",typeMap:{"line-3d":bg,"mesh-3d":ox,"point-3d":Gh,"polygon-3d":gf,"web-style":wg,cim:ff},errorContext:"symbol"},HSe={base:Zs,key:"type",typeMap:{"label-3d":j$},errorContext:"symbol"},Xie=il(Od);var ML;function WSe(e){if(!e)return null;const t={};for(const i in e){const r=or(e[i]);r&&(t[i]=r)}return Object.keys(t).length!==0?t:null}function JSe(e){if(e==null)return null;const t={};for(const i in e){const r=e[i];r&&(t[i]=r.toJSON())}return Object.keys(t).length!==0?t:null}let uo=ML=class extends Dt(ae){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:zE(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&Wme(xe.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}get version(){return this._version}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new ML({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[t,this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const i=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",i,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:JSe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:D2(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if(t?.type==="mesh"){const i={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",i,i,e.action)}}_notifyLayer(e,t,i,r){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:i};e==="origin-transform"&&(s.action=r),e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([vc(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),vc(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};c([d({value:null,json:{read:WSe}})],uo.prototype,"aggregateGeometries",null),c([d({value:null})],uo.prototype,"attributes",null),c([d({value:null,types:cs,json:{read:or}})],uo.prototype,"geometry",null),c([d({type:Boolean})],uo.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],uo.prototype,"layer",void 0),c([d({clonable:"reference"})],uo.prototype,"origin",void 0),c([d({type:df})],uo.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],uo.prototype,"sourceLayer",void 0),c([d({value:null,types:Od})],uo.prototype,"symbol",null),c([d({clonable:!1,json:{read:!1,write:!1}})],uo.prototype,"_version",void 0),c([d({type:Boolean,value:!0})],uo.prototype,"visible",null),uo=ML=c([F("esri.Graphic")],uo);const nl=uo;var IL;let Bw=IL=class extends ae{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new IL({minValue:this.minValue,maxValue:this.maxValue})}};c([d({type:Number,json:{write:!0}})],Bw.prototype,"minValue",void 0),c([d({type:Number,json:{write:!0}})],Bw.prototype,"maxValue",void 0),Bw=IL=c([F("esri.renderers.support.AuthoringInfoClassBreakInfo")],Bw);var AL;let yd=AL=class extends ae{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new AL({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:K(this.classBreakInfos)})}};c([d({type:String,json:{write:!0}})],yd.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],yd.prototype,"normalizationField",void 0),c([d({type:String,json:{write:!0}})],yd.prototype,"label",void 0),c([d({type:[Bw],json:{write:!0}})],yd.prototype,"classBreakInfos",void 0),yd=AL=c([F("esri.renderers.support.AuthoringInfoFieldInfo")],yd);var $L;let d0=$L=class extends ae{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new $L({label:this.label,value:this.value,size:this.size})}};c([d({type:String,json:{write:!0}})],d0.prototype,"label",void 0),c([d({type:Number,json:{write:!0}})],d0.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],d0.prototype,"value",void 0),d0=$L=c([F("esri.renderers.support.AuthoringInfoSizeStop")],d0);const ZSe=d0;var CL;const gT=new gt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),vT=new gt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),lG={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},uG=["high-to-low","above-and-below","centered-on","extremes"],cG=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],hG=["seconds","minutes","hours","days","months","years"],YSe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let ys=CL=class extends ae{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new CL({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:K(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([d({types:lG,json:{write:!0}})],ys.prototype,"endTime",void 0),c([Ht("endTime")],ys.prototype,"castEndTime",null),c([d({type:String,json:{write:!0}})],ys.prototype,"field",void 0),c([d({type:Number,json:{write:!0}})],ys.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0}})],ys.prototype,"minSliderValue",void 0),c([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],ys.prototype,"normalizationField",null),c([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ys.prototype,"referenceSizeScale",null),c([d({type:YSe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ys.prototype,"referenceSizeSymbolStyle",null),c([d({types:lG,json:{write:!0}})],ys.prototype,"startTime",void 0),c([Ht("startTime")],ys.prototype,"castStartTime",null),c([d({type:[ZSe],json:{origins:{"web-scene":{write:!1}},write:!0}})],ys.prototype,"sizeStops",null),c([d({type:gT.apiValues,value:null,json:{type:gT.jsonValues,read:gT.read,write:gT.write}})],ys.prototype,"style",null),c([d({type:cG,value:null,json:{type:cG,origins:{"web-scene":{type:uG,write:{writer:(e,t)=>{uG.includes(e)&&(t.theme=e)}}}},write:!0}})],ys.prototype,"theme",null),c([d({type:vT.apiValues,json:{type:vT.jsonValues,read:vT.read,write:vT.write}})],ys.prototype,"type",void 0),c([d({type:hG,json:{type:hG,write:!0}})],ys.prototype,"units",void 0),ys=CL=c([F("esri.renderers.support.AuthoringInfoVisualVariable")],ys);const KSe=ys;let TM=class extends ae{constructor(t){super(t),this.type=null}};c([d({readOnly:!0,json:{read:!1,write:!0}})],TM.prototype,"type",void 0),TM=c([F("esri.rest.support.ColorRamp")],TM);const w8=TM;var RL;let Em=RL=class extends w8{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new RL({fromColor:K(this.fromColor),toColor:K(this.toColor),algorithm:this.algorithm})}};c([Ue({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Em.prototype,"algorithm",void 0),c([d({type:Oe,json:{type:[vt],write:!0}})],Em.prototype,"fromColor",void 0),c([d({type:Oe,json:{type:[vt],write:!0}})],Em.prototype,"toColor",void 0),c([d({type:["algorithmic"]})],Em.prototype,"type",void 0),Em=RL=c([F("esri.rest.support.AlgorithmicColorRamp")],Em);const _8=Em;var OL;let zw=OL=class extends w8{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new OL({colorRamps:K(this.colorRamps)})}};c([d({type:[_8],json:{write:!0}})],zw.prototype,"colorRamps",void 0),c([d({type:["multipart"]})],zw.prototype,"type",void 0),zw=OL=c([F("esri.rest.support.MultipartColorRamp")],zw);const V$=zw,S8={key:"type",base:w8,typeMap:{algorithmic:_8,multipart:V$}};function x8(e){return e?.type?e.type==="algorithmic"?_8.fromJSON(e):e.type==="multipart"?V$.fromJSON(e):null:null}var PL;const zf=new gt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),bT=new gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),pG=new gt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),dG=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"],XSe=["high-to-low","above-and-below","above","below"],QSe=["flow-line","wave-front"],exe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let ur=PL=class extends ae{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?x8(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new PL({classificationMethod:this.classificationMethod,colorRamp:K(this.colorRamp),fadeRatio:K(this.fadeRatio),fields:this.fields?.slice(),field1:K(this.field1),field2:K(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([d({type:zf.apiValues,value:null,json:{type:zf.jsonValues,read:zf.read,write:zf.write,origins:{"web-document":{default:"manual",type:zf.jsonValues,read:zf.read,write:zf.write}}}})],ur.prototype,"classificationMethod",null),c([d({types:S8,json:{write:!0}})],ur.prototype,"colorRamp",void 0),c([ue("colorRamp")],ur.prototype,"readColorRamp",null),c([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"fadeRatio",void 0),c([d({type:[String],value:null,json:{write:!0}})],ur.prototype,"fields",null),c([d({type:yd,value:null,json:{write:!0}})],ur.prototype,"field1",null),c([d({type:yd,value:null,json:{write:!0}})],ur.prototype,"field2",null),c([d({type:QSe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"flowTheme",null),c([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],ur.prototype,"focus",null),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ur.prototype,"isAutoGenerated",void 0),c([d({type:Number,value:null,json:{type:vt,write:!0}})],ur.prototype,"numClasses",null),c([d({type:dG,json:{type:dG,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ur.prototype,"lengthUnit",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"minSliderValue",void 0),c([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],ur.prototype,"statistics",null),c([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],ur.prototype,"standardDeviationInterval",null),c([d({type:bT.apiValues,value:null,json:{type:bT.jsonValues,read:bT.read,write:bT.write,origins:{"web-scene":{type:pG.jsonValues,write:{writer:pG.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],ur.prototype,"type",null),c([d({type:[KSe],json:{write:!0}})],ur.prototype,"visualVariables",void 0),c([d({type:exe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"univariateSymbolStyle",null),c([d({type:XSe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ur.prototype,"univariateTheme",null),ur=PL=c([F("esri.renderers.support.AuthoringInfo")],ur);const ax=ur,o4=new gt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let qw=class extends ae{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,t),Array.from(i).sort()}getSymbol(t,i){}async getSymbolAsync(t,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([d({type:ax,json:{write:!0}})],qw.prototype,"authoringInfo",void 0),c([d({type:o4.apiValues,readOnly:!0,json:{type:o4.jsonValues,read:!1,write:{writer:o4.write,ignoreOrigin:!0}}})],qw.prototype,"type",void 0),qw=c([F("esri.renderers.Renderer")],qw);const up=qw;function txe(e){return e.match(ixe)?.[1]?.replace(/\\'/g,"'")??null}const ixe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let Hw=class extends Dt(ae){constructor(){super(...arguments),this.showLegend=null,this.title=null}};c([d({type:Boolean,json:{write:!0}})],Hw.prototype,"showLegend",void 0),c([d({type:String,json:{write:!0}})],Hw.prototype,"title",void 0),Hw=c([F("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],Hw);const Qie=Hw,a4=new gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let El=class extends ae{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):HS(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([d()],El.prototype,"index",void 0),c([d({type:a4.apiValues,readOnly:!0,json:{read:a4.read,write:a4.write}})],El.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],El.prototype,"field",void 0),c([Ht("field")],El.prototype,"castField",null),c([d({type:String,json:{write:!0}})],El.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],El.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],El.prototype,"arcadeRequired",null),c([d({type:Qie,json:{write:!0}})],El.prototype,"legendOptions",void 0),El=c([F("esri.renderers.visualVariables.VisualVariable")],El);const hb=El;var LL;let Mm=LL=class extends ae{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,i){t[i]=e??0}clone(){return new LL({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([d({type:Oe,json:{type:[vt],write:!0}})],Mm.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Mm.prototype,"label",void 0),c([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Mm.prototype,"value",void 0),c([ge("value")],Mm.prototype,"writeValue",null),Mm=LL=c([F("esri.renderers.visualVariables.support.ColorStop")],Mm);const rxe=Mm;var NL;let Im=NL=class extends hb{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new NL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([d({readOnly:!0})],Im.prototype,"cache",null),c([d({type:["color"],json:{type:["colorInfo"]}})],Im.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Im.prototype,"normalizationField",void 0),c([d({type:[rxe],json:{write:!0}})],Im.prototype,"stops",null),Im=NL=c([F("esri.renderers.visualVariables.ColorVariable")],Im);const ere=Im;var kL;let Bp=kL=class extends ae{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return H2(t.transparency)}writeOpacity(e,t,i){t[i]=D$(e)}clone(){return new kL({label:this.label,opacity:this.opacity,value:this.value})}};c([d({type:String,json:{write:!0}})],Bp.prototype,"label",void 0),c([d({type:Number,json:{type:vt,write:{target:"transparency"}}})],Bp.prototype,"opacity",void 0),c([ue("opacity",["transparency"])],Bp.prototype,"readOpacity",null),c([ge("opacity")],Bp.prototype,"writeOpacity",null),c([d({type:Number,json:{write:!0}})],Bp.prototype,"value",void 0),Bp=kL=c([F("esri.renderers.visualVariables.support.OpacityStop")],Bp);const sxe=Bp;var DL;let Am=DL=class extends hb{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value),this._set("stops",e)}clone(){return new DL({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([d({readOnly:!0})],Am.prototype,"cache",null),c([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Am.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Am.prototype,"normalizationField",void 0),c([d({type:[sxe],json:{write:!0}})],Am.prototype,"stops",null),Am=DL=c([F("esri.renderers.visualVariables.OpacityVariable")],Am);const T8=Am;var FL;let $m=FL=class extends hb{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new FL({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};c([d({readOnly:!0})],$m.prototype,"cache",null),c([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],$m.prototype,"axis",void 0),c([d({type:["rotation"],json:{type:["rotationInfo"]}})],$m.prototype,"type",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],$m.prototype,"rotationType",void 0),$m=FL=c([F("esri.renderers.visualVariables.RotationVariable")],$m);const G$=$m;function nxe(e){return qt(e)}var jL;let zp=jL=class extends ae{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new jL({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};c([d({type:String,json:{write:!0}})],zp.prototype,"label",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],zp.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],zp.prototype,"value",void 0),c([d({type:Boolean,json:{write:!1}})],zp.prototype,"useMinValue",void 0),c([d({type:Boolean,json:{write:!1}})],zp.prototype,"useMaxValue",void 0),zp=jL=c([F("esri.renderers.visualVariables.support.SizeStop")],zp);const EM=zp;let MM=class extends Qie{constructor(){super(...arguments),this.customValues=null}};c([d({type:[Number],json:{write:!0}})],MM.prototype,"customValues",void 0),MM=c([F("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],MM);const oxe=MM;var Hh,ts;function uv(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function W2(e){return e!=null&&!isNaN(e)&&isFinite(e)}function tre(e){return e.valueExpression?Hh.Expression:e.field&&typeof e.field=="string"?Hh.Field:Hh.Unknown}function axe(e,t){const i=t||tre(e),r=e.valueUnit||"unknown";return i===Hh.Unknown?ts.Constant:e.stops?ts.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?ts.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?ts.Proportional:ts.Additive:ts.Identity:ts.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(Hh||(Hh={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(ts||(ts={}));function Vht(e){}function lxe(e){return()=>e}const E8={unknown:1,inches:_s(1,"meters","inches"),feet:_s(1,"meters","feet"),"us-feet":_s(1,"meters","us-feet"),yards:_s(1,"meters","yards"),miles:_s(1,"meters","miles"),"nautical-miles":_s(1,"meters","nautical-miles"),millimeters:_s(1,"meters","millimeters"),centimeters:_s(1,"meters","centimeters"),decimeters:_s(1,"meters","decimeters"),meters:_s(1,"meters","meters"),kilometers:_s(1,"meters","kilometers"),"decimal-degrees":1/Sve(1,"meters",mr.radius)},ire=()=>xe.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),B$=e=>ire().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),z$=()=>ire().error("Use of arcade expressions requires an arcade context"),fG=new nl,IM=Math.PI,rre=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function sre(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void B$("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n?.attributes;let a=s?t:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(i?.arcade==null)return void z$();const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,i.timeZone);if(!p){const T=b.createSyntaxTree(r.valueExpression);p=b.createFunction(T),r.cache.compiledFunc=p}a=b.executeFunction(p,S)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=I8(a,u);if(g){const b=g[0],w=g[1],S=b===w?r.stops[b].color:Oe.blendColors(r.stops[b].color,r.stops[w].color,g[2],i?.color);return new Oe(S)}}}function nre(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void B$("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n?.attributes;let a=s?t:null;const l=r.field,{ipData:u,hasExpression:h}=r.cache;let p=r.cache.compiledFunc;if(!l&&!h){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(i?.arcade==null)return void z$();const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,i.timeZone);if(!p){const T=b.createSyntaxTree(r.valueExpression);p=b.createFunction(T),r.cache.compiledFunc=p}a=b.executeFunction(p,S)}else o&&(a=o[l]);const f=r.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=I8(a,u);if(g){const b=g[0],w=g[1];if(b===w)return r.stops[b].opacity;{const S=r.stops[b].opacity;return S+(r.stops[w].opacity-S)*g[2]}}}}function M8(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void B$("RotationVariable");const s=r.axis||"heading",n=s==="heading"&&r.rotationType==="arithmetic"?90:0,o=s==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a?.attributes,u=r.field,{hasExpression:h}=r.cache;let p=r.cache.compiledFunc,f=0;if(!u&&!h)return f;if(h){if(i?.arcade==null)return void z$();const m={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},g=i.arcade.arcadeUtils,b=g.getViewInfo(m),w=g.createExecContext(a,b,i.timeZone);if(!p){const S=g.createSyntaxTree(r.valueExpression);p=g.createFunction(S),r.cache.compiledFunc=p}f=g.executeFunction(p,w)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function uxe(e,t,i){const r=typeof t=="number",s=r?null:t,n=s?.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=i?.scale,p=i?.view;o=h==null||p==="3d"?cxe(e):h}else if(!r)switch(e.inputValueType){case Hh.Expression:{if(i?.arcade==null)return void z$();const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,f=p.getViewInfo(h),m=p.createExecContext(s,f,i.timeZone);if(!l){const g=p.createSyntaxTree(e.valueExpression);l=p.createFunction(g),e.cache.compiledFunc=l}o=p.executeFunction(l,m);break}case Hh.Field:n&&(o=n[e.field]);break;case Hh.Unknown:o=null}if(!W2(o))return null;if(r||!e.normalizationField)return o;const u=n?parseFloat(n[e.normalizationField]):null;return W2(u)&&u!==0?o/u:null}function cxe(e){let t=null,i=null;const r=e.stops;return r?(t=r[0].value,i=r[r.length-1].value):(t=e.minDataValue||0,i=e.maxDataValue||0),(t+i)/2}function q$(e,t,i){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void B$("SizeVariable");const s=are(uxe(r,t,i),r,t,i,r.cache.ipData);return s==null||isNaN(s)?0:s}function Ro(e,t,i){return e==null?null:uv(e)?q$(e,t,i):W2(e)?e:null}function ore(e,t,i){return W2(i)&&e>i?i:W2(t)&&e<t?t:e}function hxe(e,t,i,r){return e+((Ro(t.minSize,i,r)||t.minDataValue)??0)}function pxe(e,t,i){const r=e.stops;let s=r?.length&&r[0].size;return s==null&&(s=e.minSize),Ro(s,t,i)}function dxe(e,t,i,r){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=Ro(t.minSize,i,r),o=Ro(t.maxSize,i,r),a=r?.shape;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(n==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?IM*(n/2)**2:n*n,h=u+s*((l?IM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(h/IM):Math.sqrt(h)}return n+s*(o-n)}function fxe(e,t,i,r){const s=r?.shape,n=e/t.minDataValue,o=Ro(t.minSize,i,r),a=Ro(t.maxSize,i,r);let l=null;return l=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,ore(l,o,a)}function mxe(e,t,i,r,s){const[n,o,a]=I8(e,s);if(n===o)return Ro(t.stops?.[n].size,i,r);{const l=Ro(t.stops?.[n].size,i,r);return l+(Ro(t.stops?.[o].size,i,r)-l)*a}}function yxe(e,t,i,r){const s=(r?.resolution??1)*E8[t.valueUnit],n=Ro(t.minSize,i,r),o=Ro(t.maxSize,i,r),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/IM)/s:a==="radius"||a==="distance"?2*e/s:e/s,ore(l,n,o)}function are(e,t,i,r,s){switch(t.transformationType){case ts.Additive:return hxe(e,t,i,r);case ts.Constant:return pxe(t,i,r);case ts.ClampedLinear:return dxe(e,t,i,r);case ts.Proportional:return fxe(e,t,i,r);case ts.Stops:return mxe(e,t,i,r,s);case ts.RealWorldSize:return yxe(e,t,i,r);case ts.Identity:return e;case ts.Unknown:return null}}function gxe(e,t,i){const{isScaleDriven:r}=e.cache;if(!(r&&i==="3d"||t))return null;const s={scale:t,view:i};let n=Ro(e.minSize,fG,s),o=Ro(e.maxSize,fG,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function vxe(e,t,i){if(!e.visualVariables)return;const r=[],s=[],n=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const u=sre(l,t,i);r.push({variable:l,value:u})}),n.forEach(l=>{const u=nre(l,t,i);r.push({variable:l,value:u})}),a.forEach(l=>{const u=M8(l,t,i);r.push({variable:l,value:u})}),o.forEach(l=>{const u=q$(l,t,i);r.push({variable:l,value:u})}),r.filter(l=>l.value!=null)}function I8(e,t){if(!t)return;let i=0,r=t.length-1;return t.some((s,n)=>e<s?(r=n,!0):(i=n,!1)),[i,r,(e-t[i])/(t[r]-t[i])]}function lre(e,t,i){const r=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":q$(s,t,i);switch(s.axis){case"width":r[0]=n;break;case"depth":r[1]=n;break;case"height":r[2]=n;break;case"width-and-depth":r[0]=n,r[1]=n;break;case"all":case void 0:case null:r[0]=n,r[1]=n,r[2]=n;break;default:s.axis}}return r}const Ght=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:lre,getColor:sre,getOpacity:nre,getRotationAngle:M8,getSize:q$,getSizeForValue:are,getSizeFromNumberOrVariable:Ro,getSizeRangeAtScale:gxe,getVisualVariableValues:vxe,viewScaleRE:rre},Symbol.toStringTag,{value:"Module"}));var UL;const wT=new gt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),VL=new gt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function mG(e){if(e!=null)return typeof e=="string"||typeof e=="number"?nxe(e):e.type==="size"?uv(e)?e:(delete(e={...e}).type,new ai(e)):void 0}function yG(e,t,i){if(typeof e!="object")return e;const r=new ai;return r.read(e,i),r}let ai=UL=class extends hb{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&rre.test(this.valueExpression)}}set index(e){uv(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),uv(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return tre(this)}set maxDataValue(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return mG(e)}readMaxSize(e,t,i){return yG(e,t,i)}set minDataValue(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(xe.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return mG(e)}readMinSize(e,t,i){return yG(e,t,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,i)=>t.value-i.value):e&&(xe.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return axe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,i,r){if(e==="$view.scale"){if(r?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;r.messages.push(new W("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:r}))}}else t[i]=e}readValueUnit(e){return e?VL.read(e):null}clone(){return new UL({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:uv(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:uv(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===ts.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===ts.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),i=e.length;for(let r=0;r<i;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}};c([d({readOnly:!0})],ai.prototype,"cache",null),c([d({type:wT.apiValues,json:{type:wT.jsonValues,origins:{"web-map":{read:!1}},read:wT.read,write:wT.write}})],ai.prototype,"axis",void 0),c([d()],ai.prototype,"index",null),c([d({type:String,readOnly:!0})],ai.prototype,"inputValueType",null),c([d({type:oxe,json:{write:!0}})],ai.prototype,"legendOptions",void 0),c([d({type:Number,value:null,json:{write:!0}})],ai.prototype,"maxDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],ai.prototype,"maxSize",null),c([Ht("maxSize")],ai.prototype,"castMaxSize",null),c([ue("maxSize")],ai.prototype,"readMaxSize",null),c([d({type:Number,value:null,json:{write:!0}})],ai.prototype,"minDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],ai.prototype,"minSize",null),c([Ht("minSize")],ai.prototype,"castMinSize",null),c([ue("minSize")],ai.prototype,"readMinSize",null),c([d({type:String,json:{write:!0}})],ai.prototype,"normalizationField",void 0),c([d({readOnly:!0})],ai.prototype,"arcadeRequired",null),c([d({type:String})],ai.prototype,"scaleBy",void 0),c([d({type:[EM],value:null,json:{write:!0}})],ai.prototype,"stops",null),c([d({type:["outline"],json:{write:!0}})],ai.prototype,"target",void 0),c([d({type:String,readOnly:!0})],ai.prototype,"transformationType",null),c([d({type:["size"],json:{type:["sizeInfo"]}})],ai.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],ai.prototype,"useSymbolValue",void 0),c([d({type:String,json:{write:!0}})],ai.prototype,"valueExpression",void 0),c([ue("valueExpression",["valueExpression","expression"])],ai.prototype,"readValueExpression",null),c([ge("web-scene","valueExpression")],ai.prototype,"writeValueExpressionWebScene",null),c([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],ai.prototype,"valueRepresentation",void 0),c([d({type:VL.apiValues,json:{write:VL.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],ai.prototype,"valueUnit",void 0),c([ue("valueUnit")],ai.prototype,"readValueUnit",null),ai=UL=c([F("esri.renderers.visualVariables.SizeVariable")],ai);const vf=ai,bxe={color:ere,size:vf,opacity:T8,rotation:G$},wxe=new gt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),_xe=/^\[([^\]]+)\]$/i;let AM=class extends Je{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t?.filter(i=>!!i),t?.length){for(const i of t)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&t.sort((i,r)=>{let s=null;return s=i.target===r.target?0:i.target?1:-1,s});for(let i=0;i<t.length;i++)t[i].index=i;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,i,r){const{rotationExpression:s,rotationType:n}=i,o=s?.match(_xe),a=o?.[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:a})),t)return t.map(l=>{const u=wxe.read(l.type),h=bxe[u];h||(xe.getLogger(this).warn(`Unknown variable type: ${u}`),r?.messages&&r.messages.push(new Fo("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:r})));const p=new h;return p.read(l,r),p})}writeVariables(t,i){const r=[];for(const s of t){const n=s.toJSON(i);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([d()],AM.prototype,"visualVariables",null),AM=c([F("esri.renderers.visualVariables.VisualVariableFactory")],AM);const Sxe=AM,xxe={base:hb,key:"type",typeMap:{opacity:T8,color:ere,rotation:G$,size:vf}},bf=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new Sxe}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,r,s){return this._vvFactory.readVariables(i,r,s)}writeVisualVariables(i,r,s,n){r[s]=this._vvFactory.writeVariables(i,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,r){return i?this.getVisualVariablesForType(i,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(i,r){const s=this.visualVariables;return s?s.filter(n=>n.type===i&&(typeof r=="string"?n.target===r:r!==!1||!n.target)):[]}async collectVVRequiredFields(i,r){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&eo(i,r,n.field),n.normalizationField&&eo(i,r,n.normalizationField),n.valueExpression&&(Txe(n.valueExpression,i,r)||await Rn(i,r,n.valueExpression)))}};return c([d({types:[xxe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),c([ue("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),c([ge("visualVariables")],t.prototype,"writeVisualVariables",null),t=c([F("esri.renderers.mixins.VisualVariablesMixin")],t),t};function Txe(e,t,i){const r=txe(e);return r!=null&&(eo(t,i,r),!0)}const A8=[252,146,31,255],Exe=[153,153,153,255],Mxe={type:"esriSMS",style:"esriSMSCircle",size:6,color:A8,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Ixe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:A8},Axe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},$xe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Cxe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Rxe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Oxe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},ure=Uo.fromJSON(Mxe),cre=ro.fromJSON(Ixe),hre=bc.fromJSON(Axe),Pxe=cb.fromJSON($xe);function zht(e){if(e==null)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return ure;case"polyline":return cre;case"polygon":case"extent":return hre}return null}const qht=Uo.fromJSON(Cxe),Hht=ro.fromJSON(Rxe),Wht=bc.fromJSON(Oxe);Gh.fromSimpleMarkerSymbol(ure);bg.fromSimpleLineSymbol(cre);gf.fromSimpleFillSymbol(hre);new ox({symbolLayers:new Be([new gg({material:{color:A8},edges:new die({size:sl(1),color:new Oe(Exe)})})])});const Lxe=new bg({symbolLayers:new Be([new lb({material:{color:new Oe([0,0,0])},size:sl(1)})])}),Nxe=new gf({symbolLayers:new Be([new gg({outline:{color:new Oe([0,0,0]),size:sl(1)}})])}),gG="#useCIMFallbackSymbology()",Gg={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function kxe(e,t=Gg){if(!e)return{symbol:null};const{retainId:i=Gg.retainId,ignoreDrivers:r=Gg.ignoreDrivers,hasLabelingContext:s=Gg.hasLabelingContext,retainCIM:n=Gg.retainCIM,cimFallbackEnabled:o=Gg.cimFallbackEnabled}=t;let a=null;if(Qy(e)||e instanceof wg)a=e.clone();else if(e.type==="cim"){const l=e.data?.symbol?.type;switch(l){case"CIMPointSymbol":a=n?e.clone():Gh.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=Lxe.clone(),t?.logWarning?.(gG,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Nxe.clone(),t?.logWarning?.(gG,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new W("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof ro)a=bg.fromSimpleLineSymbol(e);else if(e instanceof Uo)a=Gh.fromSimpleMarkerSymbol(e);else if(e instanceof qh)a=Gh.fromPictureMarkerSymbol(e);else if(e instanceof bc)a=t.geometryType&&t.geometryType==="mesh"?ox.fromSimpleFillSymbol(e):gf.fromSimpleFillSymbol(e);else{if(!(e instanceof cb))return{error:new W("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=s?j$.fromTextSymbol(e):Gh.fromTextSymbol(e)}return i&&a&&a.type!=="cim"&&(a.id=e.id),r&&Qy(a)&&a.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:a}}function M3(e,t,i,r){const s=pre(e,{},{context:r,isLabelSymbol:!1});s!=null&&(t[i]=s)}function vG(e,t,i,r){const s=pre(e,{},{context:r,isLabelSymbol:!0});s!=null&&(t[i]=s)}function bG(e){return e instanceof vg||e instanceof wg}function Dxe(e){return e instanceof vg&&(e.type==="polygon-3d"||e.type==="line-3d")}function pre(e,t,i){if(e==null)return null;const{context:r,isLabelSymbol:s}=i,n=r?.origin,o=r?.messages;if(n==="web-scene"&&!bG(e)){const a=kxe(e,{retainCIM:!0,hasLabelingContext:s});return a.symbol!=null?a.symbol.write(t,r):(o?.push(new W("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:a.error})),null)}return sP(r?.layer)&&Dxe(e)?(o?.push(new W("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:e,context:r})),null):(n==="web-map"||n==="portal-item"&&!sP(r?.layer))&&bG(e)?(o?.push(new W("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function $8(e,t){return zSe(e,null,t)}const H$={types:Kie,json:{write:{writer:M3},origins:{"web-scene":{types:aG,write:{writer:M3},read:{reader:K1({types:aG})}}}}},C8=iF({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},H$),R8={types:{base:Zs,key:"type",typeMap:{"simple-fill":Od.typeMap["simple-fill"],"picture-fill":Od.typeMap["picture-fill"],"polygon-3d":Od.typeMap["polygon-3d"],cim:Od.typeMap.cim}},json:{write:{writer:M3},origins:{"web-scene":{type:gf,write:{writer:M3}}}}},$M={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};var GL;let qp=GL=class extends ae{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new GL({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};c([d({type:String,json:{write:!0}})],qp.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],qp.prototype,"label",void 0),c([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],qp.prototype,"minValue",void 0),c([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],qp.prototype,"maxValue",void 0),c([d(C8)],qp.prototype,"symbol",void 0),qp=GL=c([F("esri.renderers.support.ClassBreakInfo")],qp);const v1=qp,Fxe=ar()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let Ww=class extends Dt(ae){constructor(t){super(t),this.title=null,this.order=null}};c([d({type:String,json:{write:!0}})],Ww.prototype,"title",void 0),c([Ue(Fxe)],Ww.prototype,"order",void 0),Ww=c([F("esri.renderers.support.RendererLegendOptions")],Ww);const W$=Ww;var BL;const dre="log",CM="percent-of-total",RM="field",_T=new gt({esriNormalizeByLog:dre,esriNormalizeByPercentOfTotal:CM,esriNormalizeByField:RM}),jxe=bi(v1);let Vr=BL=class extends bf(up){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,i){if(!Array.isArray(e))return;let r=t.minValue;return e.map(s=>{const n=new v1;return n.read(s,i),n.minValue==null&&(n.minValue=r),n.maxValue==null&&(n.maxValue=n.minValue),r=n.maxValue,n})}writeClassBreakInfos(e,t,i,r){const s=e.map(n=>n.write({},r));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[i]=s}castField(e){return e==null?e:typeof e=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):HS(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,i=this.normalizationTotal!=null;return t||i?(e=t&&RM||i&&CM||null,t&&i&&xe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==RM&&e!==CM||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,i){let r=null;r=typeof e=="number"?new v1({minValue:e,maxValue:t,symbol:Xie(i)}):jxe(K(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const i=this.classBreakInfos.length;for(let r=0;r<i;r++){const s=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&t?.arcade==null&&xe.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let i=t;this.valueExpression&&t?.arcade==null&&(i={...i,arcade:await Ky()});const r=this.getBreakIndex(e,i);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&t?.arcade==null)return void xe.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(e,t);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&t?.arcade==null){const s=await Ky(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}const r=this.getBreakIndex(e,i);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,s)=>r+s.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new BL({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:K(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:K(this.visualVariables),legendOptions:K(this.legendOptions),authoringInfo:K(this.authoringInfo)})}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Rn(e,t,this.valueExpression)];eo(e,t,this.field),eo(e,t,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=n.arcadeUtils;if(!l){const p=u.createSyntaxTree(a);l=u.createFunction(p),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const h=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._getBreakIndexfromInfos(h)}_getBreakIndexForField(e){const t=this.field,i=e.attributes,r=this.normalizationType;let s=parseFloat(i[t]);if(r){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(r===dre)s=Math.log(s)*Math.LOG10E;else if(r!==CM||n==null||isNaN(n)){if(r===RM&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let i=0;i<this.classBreakInfos.length;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return i}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let i=1;i<t;i++)if(e[i-1].maxValue!==e[i].minValue)return!1;return!0}};c([d(R8)],Vr.prototype,"backgroundFillSymbol",void 0),c([d({type:[v1]})],Vr.prototype,"classBreakInfos",void 0),c([ue("classBreakInfos")],Vr.prototype,"readClassBreakInfos",null),c([ge("classBreakInfos")],Vr.prototype,"writeClassBreakInfos",null),c([d({type:String,json:{write:!0}})],Vr.prototype,"defaultLabel",void 0),c([d(H$)],Vr.prototype,"defaultSymbol",void 0),c([d({type:String,json:{write:!0}})],Vr.prototype,"field",void 0),c([Ht("field")],Vr.prototype,"castField",null),c([d({type:Boolean})],Vr.prototype,"isMaxInclusive",void 0),c([d({type:W$,json:{write:!0}})],Vr.prototype,"legendOptions",void 0),c([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Vr.prototype,"minValue",null),c([d({type:String,json:{write:!0}})],Vr.prototype,"normalizationField",void 0),c([d({type:Number,json:{write:!0}})],Vr.prototype,"normalizationTotal",void 0),c([d({type:_T.apiValues,value:null,json:{type:_T.jsonValues,read:_T.read,write:_T.write}})],Vr.prototype,"normalizationType",null),c([Ue({classBreaks:"class-breaks"})],Vr.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Vr.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Vr.prototype,"valueExpressionTitle",void 0),Vr=BL=c([F("esri.renderers.ClassBreaksRenderer")],Vr);const pb=Vr,zL=-3,Uxe=zL-1;var Sh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Sh||(Sh={}));let Vxe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Ud,this._users=new Ud}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,i){this._removeFuncs.push([t,i])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(i=>i[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,i){return this._db.get(t.id+i)?.size??0}put(t,i,r,s,n){i=t.id+i;const o=this._db.get(i);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(i),o.entry!==r&&this._notifyRemove(i,o.entry,o.size,Sh.ALL)),s>this._maxSize)return void this._notifyRemove(i,r,s,Sh.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${i}`),void this._notifyRemove(i,r,0,Sh.ALL);const a=1+Math.max(n,Uxe)-zL;this._db.set(i,new Gxe(r,s,a)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,i,r,s){i=t.id+i;const n=this._db.get(i);if(n&&n.entry===r){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(i,r,s,Sh.SOME);if(!(o!=null&&o>0))return void this._db.delete(i);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,i){i=t.id+i;const r=this._db.get(i);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(i),++this._hit,r.entry;++this._miss}get(t,i){i=t.id+i;const r=this._db.get(i);if(r!==void 0)return this._db.delete(i),r.lives=r.lifetime,this._db.set(i,r),++this._hit,r.entry;++this._miss}peek(t,i){const r=this._db.get(t.id+i);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(u=>{const{id:h,name:p}=u;if(a.startsWith(h)){const f=i[p]||0;i[p]=f+o.size}})});const s={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(i);n.sort((o,a)=>i[a]-i[o]),n.forEach(o=>t[o]=Math.round(i[o]/2**20)+"MB / "+s[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+zL-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const i=t.id;this._db.forEach((r,s)=>{s.startsWith(i)&&(this._size-=r.size,this._db.delete(s),this._notifyRemove(s,r.entry,r.size,Sh.ALL))}),t.size=0}clearAll(){this._db.forEach((t,i)=>this._notifyRemove(i,t.entry,t.size,Sh.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,i,r,s){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](i,s,r);return typeof a=="number"&&(n=a),!0}return!1}),n}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const i=t??this;if(i.maxSize<0||i.size<=i.maxSize)return;const r=t?.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(o.lifetime===0&&(!r||n.startsWith(r))){if(this._purgeItem(n,o,t),i.size<=.9*i.maxSize)return;s||=this._db.has(n)}}for(const[n,o]of this._db)if((!r||n.startsWith(r))&&(this._purgeItem(n,o,t),i.size<=.9*i.maxSize))return}_purgeItem(t,i,r=this._users.find(s=>t.startsWith(s.id))){if(this._db.delete(t),i.lives<=1){this._size-=i.size,r&&(r.size-=i.size);const s=this._notifyRemove(t,i.entry,i.size,Sh.SOME);s!=null&&s>0&&(this._size+=s,r&&(r.size+=s),i.lives=i.lifetime,i.size=s,this._db.set(t,i))}else--i.lives,this._db.set(t,i)}},Gxe=class{constructor(t,i,r){this.entry=t,this.size=i,this.lifetime=r,this.lives=r}},O8=class{constructor(t,i){this._storage=new Vxe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,i,r=1){this._storage.put(this,t,i,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},P8=class qL{constructor(t,i,r=""){this.major=t,this.minor=i,this._context=r}lessThan(t,i){return this.major<t||t===this.major&&this.minor<i}greaterEqual(t,i){return!this.lessThan(t,i)}validate(t){if(this.major!==t.major){const i=this._context&&this._context+":",r=this._context&&this._context+" ";throw new W(i+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new qL(this.major,this.minor,this._context)}static parse(t,i=""){const[r,s]=t.split("."),n=/^\s*\d+\s*$/;if(!r?.match||!n.test(r))throw new W((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!n.test(s))throw new W((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(r,10),a=parseInt(s,10);return new qL(o,a,i)}},J$=class{};function Bxe(e){return e instanceof ib?e===J$.instance:e?.toString().toLowerCase()==="unknown"}function Qht(e){return Bxe(e)?J$.instance:e}J$.instance=new va("Etc/UTC");function zxe(e){return"timeZone"in e}function qxe(e){return"timeZone"in e}function Hxe(e){return"dateFieldsTimeZone"in e}const Wxe=new Map;let Z$=class OM{static fromJSON(t){return new OM(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new OM(t.fields??[],_G(t))}static fromLayerJSON(t){return new OM(t.fields??[],_G(t))}constructor(t=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=i?new Map(i):null;const r=[];for(const s of this.fields){const n=s?.name,o=wG(n);if(n&&o){const a=ry(n);this._fieldsMap.set(n,s),this._fieldsMap.set(a,s),this._normalizedFieldsMap.set(o,s),r.push(`${a}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),S2e(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):tie(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),QV(s)||eG(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)QV(t)||eG(t)||t.nullable||c2e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return this.get(t)!=null}get(t){if(!t)return;let i=this._fieldsMap.get(t);return i||(i=this._fieldsMap.get(ry(t))??this._normalizedFieldsMap.get(wG(t)),i&&this._fieldsMap.set(t,i),i)}getTimeZone(t){const i=this.get(t&&typeof t!="string"?t.name:t);return i?this._timeZoneByFieldName?this._timeZoneByFieldName.get(i.name):i.type==="date"||i.type==="esriFieldTypeDate"?(xe.getLogger("esri.layers.support.FieldsIndex").error(new W("getTimeZone:no-timezone-information",`no time zone information for field '${i.name}'`)),ef):fre.has(i.type)?Yy:null:null}getLuxonTimeZone(t){const i=this.getTimeZone(t);return i?i===Yy?J$.instance:i===ef?Es.utcInstance:qS(Wxe,i,()=>va.create(i)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return x2e(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??void 0}toJSON(){return{fields:this.fields.map(t=>D2(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function ry(e){return e.trim().toLowerCase()}function wG(e){return J_e(e)?.toLowerCase()??""}const fre=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function _G(e){const t=new Map;if(!e.fields)return t;const i=e.datesInUnknownTimezone===!0,{timeInfo:r,editFieldsInfo:s}=e,n=(r?"startField"in r?r.startField:r.startTimeField:"")??"",o=(r?"endField"in r?r.endField:r.endTimeField:"")??"",a=Hxe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?sM(e.dateFieldsTimeReference):null,l=s?zxe(s)?s.timeZone??a:s.dateFieldsTimeReference?sM(s.dateFieldsTimeReference):a??ef:null,u=r?qxe(r)?r.timeZone??a:r.timeReference?sM(r.timeReference):a:null,h=new Map([[ry(s?.creationDateField??""),l],[ry(s?.editDateField??""),l],[ry(n),u],[ry(o),u]]);for(const{name:p,type:f}of e.fields)if(fre.has(f))t.set(p,Yy);else if(f!=="date"&&f!=="esriFieldTypeDate")t.set(p,null);else if(i)t.set(p,Yy);else{const m=h.get(ry(p??""))??a;t.set(p,m)}return t}let L8=1e-6;function to(){return L8}function Jxe(e){L8=e}const Y$=Math.random,Zxe=Math.PI/180,Yxe=180/Math.PI;function N8(e){return e*Zxe}function Kxe(e){return e*Yxe}function Xxe(e,t){return Math.abs(e-t)<=L8*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:Y$,equals:Xxe,getEpsilon:to,setEpsilon:Jxe,toDegree:Kxe,toRadian:N8},Symbol.toStringTag,{value:"Module"}));function Qxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function eTe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function tTe(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}function iTe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function mre(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function yre(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function gre(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function rTe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function sTe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function nTe(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function oTe(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function aTe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function lTe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function uTe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e}function vre(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(i*i+r*r+s*s+n*n)}function bre(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return i*i+r*r+s*s+n*n}function wre(e){const t=e[0],i=e[1],r=e[2],s=e[3];return Math.sqrt(t*t+i*i+r*r+s*s)}function _re(e){const t=e[0],i=e[1],r=e[2],s=e[3];return t*t+i*i+r*r+s*s}function cTe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function hTe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function pTe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3];let o=i*i+r*r+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=i*o,e[1]=r*o,e[2]=s*o,e[3]=n*o),e}function dTe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Sre(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e[3]=a+r*(i[3]-a),e}function fTe(e,t=1){const i=Y$;let r,s,n,o,a,l;do r=2*i()-1,s=2*i()-1,a=r*r+s*s;while(a>=1);do n=2*i()-1,o=2*i()-1,l=n*n+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*r,e[1]=t*s,e[2]=t*n*u,e[3]=t*o*u,e}function mTe(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12]*o,e[1]=i[1]*r+i[5]*s+i[9]*n+i[13]*o,e[2]=i[2]*r+i[6]*s+i[10]*n+i[14]*o,e[3]=i[3]*r+i[7]*s+i[11]*n+i[15]*o,e}function yTe(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],l=i[2],u=i[3],h=u*r+a*n-l*s,p=u*s+l*r-o*n,f=u*n+o*s-a*r,m=-o*r-a*s-l*n;return e[0]=h*u+m*-o+p*-l-f*-a,e[1]=p*u+m*-a+f*-o-h*-l,e[2]=f*u+m*-l+h*-a-p*-o,e[3]=t[3],e}function gTe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function vTe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function bTe(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=t[0],a=t[1],l=t[2],u=t[3],h=to();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(s-l)<=h*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))}const wTe=mre,_Te=yre,STe=gre,xTe=vre,TTe=bre,ETe=wre,MTe=_re;Object.freeze(Object.defineProperty({__proto__:null,add:iTe,ceil:rTe,copy:Qxe,copyVec3:eTe,dist:xTe,distance:vre,div:STe,divide:gre,dot:dTe,equals:bTe,exactEquals:vTe,floor:sTe,inverse:hTe,len:ETe,length:wre,lerp:Sre,max:oTe,min:nTe,mul:_Te,multiply:yre,negate:cTe,normalize:pTe,random:fTe,round:aTe,scale:lTe,scaleAndAdd:uTe,set:tTe,sqrDist:TTe,sqrLen:MTe,squaredDistance:bre,squaredLength:_re,str:gTe,sub:wTe,subtract:mre,transformMat4:mTe,transformQuat:yTe},Symbol.toStringTag,{value:"Module"}));function K$(){return[0,0,0,0]}function ITe(e){return[e[0],e[1],e[2],e[3]]}function db(e,t,i,r){return[e,t,i,r]}function ATe(e,t,i,r){return[e,t,i,r]}function $Te(e,t=K$()){const i=Math.min(4,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function CTe(e,t){return new Float64Array(e,t,4)}function xre(){return K$()}function Tre(){return db(1,1,1,1)}function Ere(){return db(1,0,0,0)}function Mre(){return db(0,1,0,0)}function Ire(){return db(0,0,1,0)}function Are(){return db(0,0,0,1)}const RTe=xre(),OTe=Tre(),PTe=Ere(),LTe=Mre(),NTe=Ire(),kTe=Are();Object.freeze(Object.defineProperty({__proto__:null,ONES:OTe,UNIT_W:kTe,UNIT_X:PTe,UNIT_Y:LTe,UNIT_Z:NTe,ZEROS:RTe,clone:ITe,create:K$,createView:CTe,freeze:ATe,fromArray:$Te,fromValues:db,ones:Tre,unitW:Are,unitX:Ere,unitY:Mre,unitZ:Ire,zeros:xre},Symbol.toStringTag,{value:"Module"}));function $re(e){return"r"in e&&"g"in e&&"b"in e}function Cre(e){return"h"in e&&"s"in e&&"v"in e}function Rre(e){return"l"in e&&"a"in e&&"b"in e}function Ore(e){return"l"in e&&"c"in e&&"h"in e}function DTe(e){return"x"in e&&"y"in e&&"z"in e}const FTe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],jTe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Pre(e,t){const i=[];let r,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let a=0;for(r=0;r<n;r++){for(a=0,s=0;s<o;s++)a+=e[r][s]*t[s];i.push(a)}return i}function Lre(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),i=Pre(FTe,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function k8(e){const t=Pre(jTe,[e.x/100,e.y/100,e.z/100]).map(i=>{const r=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function Nre(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function kre(e){const t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function UTe(e){const t=e.l,i=e.a,r=e.b,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function VTe(e){const t=e.l,i=e.c,r=e.h;return{l:t,a:i*Math.cos(r),b:i*Math.sin(r)}}function GTe(e){return Nre(Lre(e))}function BTe(e){return k8(kre(e))}function zTe(e){return UTe(Nre(Lre(e)))}function qTe(e){return k8(kre(VTe(e)))}function HTe(e){const t=e.r,i=e.g,r=e.b,s=Math.max(t,i,r),n=s-Math.min(t,i,r);let o=s,a=n===0?0:s===t?(i-r)/n%6:s===i?(r-t)/n+2:(t-i)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function WTe(e){const t=(e.h+360)%360/60,i=e.s/100,r=e.v/100*255,s=r*i,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-s),o.g=Math.round(o.g+r-s),o.b=Math.round(o.b+r-s),o}function X$(e){return $re(e)?e:Ore(e)?qTe(e):Rre(e)?BTe(e):DTe(e)?k8(e):Cre(e)?WTe(e):e}function I3(e){return Cre(e)?e:HTe(X$(e))}function SG(e){return Rre(e)?e:GTe(X$(e))}function xG(e){return Ore(e)?e:zTe(X$(e))}function JTe(e,t){const{r:i,g:r,b:s}=e;return .2126*i+.7152*r+.0722*s}var HL;function ept(e,t=HL.High){return JTe(e)>t?new Oe([0,0,0,e.a]):new Oe([255,255,255,e.a])}function tpt(e,t,i={}){if(e.length===0||t<=0)return[];if((e=e.map(r=>typeof r=="string"?new Oe(r):r)).length===1||t===1){const r=[],s=e[0];for(let n=0;n<t;n++)r.push(s.clone());return r}if(i.shuffle&&(e=ZK(K(e),i.seed)),e.length>=t){const r=[],s=(e.length-1)/(t-1);for(let n=0;n<t;n++){const o=Math.round(n*s);r.push(e[o].clone())}return r}return ZTe(e,t,i)}function ZTe(e,t,i={}){const r=[],s=e.length-1,n=Math.ceil((t-e.length)/s);e:for(let o=0;o<s;o++){const a=e[o],l=e[o+1];for(let u=1;u<=n;u++){const h=u/(n+1);if(r.push(YTe(a,l,h,i)),r.length+e.length===t)break e}}return[...e.map(o=>o.clone()),...ZK(r,i.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(HL||(HL={}));const l4=(e,t)=>{const i=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+i))};function YTe(e,t,i,r={}){const s=e.r,n=e.g,o=e.b,a=t.r,l=t.g,u=t.b,h=Math.round(s+(a-s)*i),p=Math.round(n+(l-n)*i),f=Math.round(o+(u-o)*i);if(!r.offset)return new Oe([h,p,f]);const m=JK(r.seed);return new Oe([l4(h,m),l4(p,m),l4(f,m)])}var TG,EG,MG,IG,AG,$G,CG,RG,OG,PG,WL,JL,LG,NG,kG,DG,FG,jG,UG,VG,GG,BG,zG,qG,HG,WG,JG,ZG,YG,KG,XG,QG,eB,tB,iB,rB,sB,nB,oB,aB,lB,uB,cB,hB,pB,dB,fB,mB,yB,gB,vB,bB,wB,_B,SB,xB,TB,EB,MB,IB,AB,$B;(function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"})(TG||(TG={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(EG||(EG={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(MG||(MG={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(IG||(IG={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(AG||(AG={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}($G||($G={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(CG||(CG={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(RG||(RG={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(OG||(OG={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(PG||(PG={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(WL||(WL={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(JL||(JL={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(LG||(LG={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(NG||(NG={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(kG||(kG={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(DG||(DG={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(FG||(FG={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(jG||(jG={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(UG||(UG={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(VG||(VG={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(GG||(GG={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(BG||(BG={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(zG||(zG={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(qG||(qG={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(HG||(HG={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(WG||(WG={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(JG||(JG={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(ZG||(ZG={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(YG||(YG={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(KG||(KG={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(XG||(XG={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(QG||(QG={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(eB||(eB={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(tB||(tB={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(iB||(iB={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(rB||(rB={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(sB||(sB={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(nB||(nB={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(oB||(oB={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(aB||(aB={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(lB||(lB={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(uB||(uB={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(cB||(cB={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(hB||(hB={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(pB||(pB={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(dB||(dB={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(fB||(fB={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(mB||(mB={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(yB||(yB={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(gB||(gB={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(vB||(vB={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(bB||(bB={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(wB||(wB={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(_B||(_B={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(SB||(SB={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(xB||(xB={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(TB||(TB={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(EB||(EB={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(MB||(MB={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(IB||(IB={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(AB||(AB={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}($B||($B={}));const KTe={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},ZL={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:WL.Loop,repeatdelay:0,easing:JL.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}};function ipt(e){return[e.r,e.g,e.b,e.a]}const XTe=` /-,
`;function CB(e){let t=e.length;for(;t--;)if(!XTe.includes(e.charAt(t)))return!1;return!0}function QTe(e,t){const i=[];let r=0,s=-1;do if(s=e.indexOf("[",r),s>=r){if(s>r){const n=e.slice(r,s);i.push([n,null,CB(n)])}if(r=s+1,s=e.indexOf("]",r),s>=r){if(s>r){const n=t[e.slice(r,s)];n&&i.push([null,n,!1])}r=s+1}}while(s!==-1);if(r<e.length){const n=e.slice(r);i.push([n,null,CB(n)])}return i}function eEe(e,t,i,r){let s="",n=null;for(const o of t){const[a,l,u]=o;if(a)u?n=a:(n&&(s+=n,n=null),s+=a);else{let h=l;i!=null&&(h=Vre(l,i));const p=e.attributes[h];p&&(n&&(s+=n,n=null),s+=p)}}return tEe(s,r)}function tEe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function rpt(e,t,i,r,s,n,o=!0){const a=t/s,l=i/n,u=Math.ceil(a/2),h=Math.ceil(l/2);for(let p=0;p<n;p++)for(let f=0;f<s;f++){const m=4*(f+(o?n-p-1:p)*s);let g=0,b=0,w=0,S=0,T=0,x=0,_=0;const M=(p+.5)*l;for(let I=Math.floor(p*l);I<(p+1)*l;I++){const A=Math.abs(M-(I+.5))/h,C=(f+.5)*a,R=A*A;for(let O=Math.floor(f*a);O<(f+1)*a;O++){let k=Math.abs(C-(O+.5))/u;const L=Math.sqrt(R+k*k);L>=-1&&L<=1&&(g=2*L*L*L-3*L*L+1,g>0&&(k=4*(O+I*t),_+=g*e[k+3],w+=g,e[k+3]<255&&(g=g*e[k+3]/250),S+=g*e[k],T+=g*e[k+1],x+=g*e[k+2],b+=g))}}r[m]=S/b,r[m+1]=T/b,r[m+2]=x/b,r[m+3]=_/w}}function Dre(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function Fre(e){return e.data?.symbol??null}function jre(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function Ure(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function spt(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function D8(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const npt=(e,t=0)=>e==null||isNaN(e)?t:e,opt=(e,t)=>e??t,apt=(e,t)=>e??t,lpt=e=>e.tintColor?Dre(e.tintColor):[255,255,255,1],upt=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function cpt(){return ce(()=>import("./geometryEngineJSON-flfHofBb.js").then(e=>e.g),__vite__mapDeps([20,21,1]),import.meta.url)}function hpt(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function ppt(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function dpt(e){let t="normal",i="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?i="bold":r.includes("light")&&(i="lighter")}return{style:t,weight:i}}function fpt(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function RB(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=RB(t);if(i!=null)return i}break;case"CIMTextSymbol":return RB(e.symbol);case"CIMSolidFill":return e.color}return null}function OB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const i of t){const r=OB(i);if(r!=null)return r}break}case"CIMTextSymbol":return OB(e.symbol);case"CIMSolidStroke":return e.color}}function PB(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const i=PB(t);if(i!==void 0)return i}break;case"CIMTextSymbol":return PB(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function mpt(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function ypt(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function iEe(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const gpt=e=>e.includes("data:image/svg+xml");function Q$(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function vpt(e,t,i,r,s,n,o=!0){const{infos:a}=n;let l=1,u=0,h=0,p=0,f=1;for(const{absoluteAnchorPoint:b,offsetX:w,offsetY:S,rotation:T,size:x,frameHeight:_,rotateClockWise:M,scaleSymbolsProportionally:I}of a)f=b?1:l,h=kB(w,S,u,f,h),p=NB(w,S,u,f,p),_&&(I||o)&&(l*=x/_),u=DB(T,M,u);const m=kB(r,s,u,f,h),g=NB(r,s,u,f,p);return{size:e*l,rotation:DB(t,i,u),offsetX:m,offsetY:g}}function rEe(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>rEe(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function sEe(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...KTe[t]];const i=ZL[e];if(!i)throw new Error(`InternalError: default value for type ${e}.`);return i[t]}function nEe(e){return e.split(" ").map(t=>Number(t))}function oEe(e){return typeof e=="string"?nEe(e):e}function aEe(e){return e?.dashTemplate&&(e.dashTemplate=oEe(e.dashTemplate)),e}function YL(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const i of t)if(i.type==="CIMVectorMarker")return YL(i)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const i of t)if(i.symbol)return YL(i.symbol)}}return"Normal"}function bpt(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const r=i.size??ZL.CIMVectorMarker.size;r>t&&(t=r);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const i of e.symbolLayers)if(i)switch(i.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const r=i.width;r!=null&&r>t&&(t=r);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(i.markerPlacement&&D8(i.markerPlacement)){const r=i.size??ZL.CIMVectorMarker.size;r>t&&(t=r)}break;case"CIMPictureFill":{const r=i.height;r!=null&&r>t&&(t=r)}}}return t}}}function Vre(e,t){if(t!==null){const i=t.get(e);return i?i.name:e}return e}function lEe(e){return e.map(t=>({...t,propertyName:Q$(t.propertyName)}))}function LB(e){const t={};for(const i in e){const r=e[i];t[Q$(i)]=r}return t}function NB(e,t,i,r,s){const n=i*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*r+s}return t*r+s}function kB(e,t,i,r,s){const n=i*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*r+s:e*r+s}function DB(e,t,i){return t?i-e:i+e}function wpt(e,t,i){const r=i==="Color"||i==="TintColor"||i==="ToColor",s=i==="Rotation"||i==="Angle"||i==="ToRotation";let n=t[Q$(i)];if(n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180)),n==null&&(n=sEe(t.type,i.toLowerCase()),n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:s&&(n*=Math.PI/180))),t.primitiveName!=null){const o=e[t.primitiveName];if(o!=null){const a=o[i];a==null||(typeof a=="string"||typeof a=="number"||Array.isArray(a)?(n=a,n!=null&&(r?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:s&&(n*=Math.PI/180))):(n={valueExpressionInfo:a,defaultValue:n},n!=null&&(r?n={type:"Process",op:"ArcadeColor",value:n}:s&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${i}".`);return n}function _pt(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function uEe(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function lx(e){if(uEe(e))return e;const{originPosition:t,scale:i,translate:r}=e,s=i[0]??1,n=i[1]??1;return{originPosition:"lowerLeft",scale:[s,t==="lowerLeft"?n:-n,i[2]??1,i[3]??1],translate:[r[0]??0,r[1]??0,r[2]??0,r[3]??0]}}function cEe({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function hEe({scale:e,translate:t},i){return Math.round((i-t[1])/e[1])}function pEe({scale:e,translate:t},i){return Math.round(((i??0)-t[2])/e[2])}function dEe({scale:e,translate:t},i){return i?Math.round((i-t[3])/e[3]):0}function ux({scale:e,translate:t},i){return i*e[0]+t[0]}function cx({scale:e,translate:t},i){return i*e[1]+t[1]}function J2({scale:e,translate:t},i){return(i??0)*e[2]+t[2]}function Z2({scale:e,translate:t},i){return i?i*e[3]+t[3]:0}function F8(e,t){return e&&t?gEe:e&&!t?mEe:!e&&t?yEe:fEe}const fEe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=ux(e,r[0]),n=cx(e,r[1]);i[0]=[s,n];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,f]=t[h];s+=l*p,n+=u*f,i[h]=[s,n]}return i},mEe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=ux(e,r[0]),n=cx(e,r[1]);i[0]=[s,n,J2(e,r[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,f,m]=t[h];s+=l*p,n+=u*f,i[h]=[s,n,J2(e,m)]}return i},yEe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=ux(e,r[0]),n=cx(e,r[1]);i[0]=[s,n,Z2(e,r[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,f,m]=t[h];s+=l*p,n+=u*f,i[h]=[s,n,Z2(e,m)]}return i},gEe=(e,t)=>{const i=new Array(t.length);if(!t.length)return i;const r=t[0];let s=ux(e,r[0]),n=cx(e,r[1]);i[0]=[s,n,J2(e,r[2]),Z2(e,r[3])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let h=1;h<t.length;h++){const[p,f,m,g]=t[h];s+=l*p,n+=u*f,i[h]=[s,n,J2(e,m),Z2(e,g)]}return i};function Gre(e,t,i){const r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=t(e,i[s]);return r}function Spt(e,t,i){const r=lx(e);return t.x=cEe(r,i.x),t.y=hEe(r,i.y),i.z!=null&&(t.z=pEe(r,i.z)),i.m!=null&&(t.m=dEe(r,i.m)),t}function vEe(e,t,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=lx(e);t.points=F8(r,s)(n,i.points),t.hasZ=r,t.hasM=s}return t}function bEe(e,t,i,r=i?.z!=null,s=i?.m!=null){if(i==null)return t;const n=lx(e);return t.x=ux(n,i.x),t.y=cx(n,i.y),r&&(t.z=J2(n,i.z)),s&&(t.m=Z2(n,i.m)),t}function wEe(e,t,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=lx(e);t.rings=Gre(n,F8(r,s),i.rings),t.hasZ=r,t.hasM=s}return t}function _Ee(e,t,i,r=i?.hasZ??!1,s=i?.hasM??!1){if(i!=null){const n=lx(e);t.paths=Gre(n,F8(r,s),i.paths),t.hasZ=r,t.hasM=s}return t}function SEe(e,t,i,r,s){if(e==null)return null;const n=e.referencesGeometry()&&s?xEe(t,r,s):t,o=e.repurposeFeature(n);try{return e.evaluate({...i,$feature:o},e.services)}catch(a){return xe.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const u4=new Map;function xEe(e,t,i){const{transform:r,hasZ:s,hasM:n}=i;u4.has(t)||u4.set(t,TEe(t));const o=u4.get(t)(e.geometry,r,s,n);return{...e,geometry:o}}function TEe(e){const t={};switch(e){case"esriGeometryPoint":return(i,r,s,n)=>bEe(r,t,i,s,n);case"esriGeometryPolygon":return(i,r,s,n)=>wEe(r,t,i,s,n);case"esriGeometryPolyline":return(i,r,s,n)=>_Ee(r,t,i,s,n);case"esriGeometryMultipoint":return(i,r,s,n)=>vEe(r,t,i,s,n);default:return xe.getLogger("esri.views.2d.support.arcadeOnDemand").error(new W("mapview-arcade",`Unable to handle geometryType: ${e}`)),i=>i}}const EEe=e=>{if(!e)return[0,0,0,0];const{r:t,g:i,b:r,a:s}=e;return[t,i,r,255*s]};let Bre=class er{static findApplicableOverrides(t,i,r){if(t&&i){if(t.primitiveName){let s=!1;for(const n of r)if(n.primitiveName===t.primitiveName){s=!0;break}if(!s)for(const n of i)n.primitiveName===t.primitiveName&&r.push(n)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)er.findApplicableOverrides(s,i,r);if(t.symbolLayers)for(const s of t.symbolLayers)er.findApplicableOverrides(s,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const s of t.effects)er.findApplicableOverrides(s,i,r);if(t.markerPlacement&&er.findApplicableOverrides(t.markerPlacement,i,r),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const s of t.markerGraphics)er.findApplicableOverrides(s,i,r),er.findApplicableOverrides(s.symbol,i,r)}else t.type==="CIMCharacterMarker"?er.findApplicableOverrides(t.symbol,i,r):t.type==="CIMHatchFill"?er.findApplicableOverrides(t.lineSymbol,i,r):t.type==="CIMPictureMarker"&&er.findApplicableOverrides(t.animatedSymbolProperties,i,r)}}}static findEffectOverrides(t,i){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&aEe(t),!i||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const r=LB(t),s=t.primitiveName,n=[];for(const o of i)o.primitiveName===s&&n.push(LB(o));return{type:"cim-effect-param",effect:r,overrides:lEe(n)}}static async resolveSymbolOverrides(t,i,r,s,n,o,a){if(!t?.symbol)return null;let{symbol:l,primitiveOverrides:u}=t;const h=!!u;if(!h&&!s)return l;l=K(l),u=K(u);let p=!0;if(i||(i={attributes:{}},p=!1),h){if(p||(u=u.filter(f=>!f.valueExpressionInfo?.expression.includes("$feature"))),a||(u=u.filter(f=>!f.valueExpressionInfo?.expression.includes("$view"))),u.length>0){const f={spatialReference:r,fields:iEe(i.attributes),geometryType:n};await er.createRenderExpressions(u,f),er.evaluateOverrides(u,i,n??"esriGeometryPoint",o,a)}er.applyOverrides(l,u)}return s&&er.applyDictionaryTextOverrides(l,i,s,null),l}static async createRenderExpressions(t,i){const r=[];for(const s of t){const n=s.valueExpressionInfo;if(!n||er._expressionToRenderExpression.has(n.expression))continue;const o=z_e(n.expression,i.spatialReference,i.fields);r.push(o),o.then(a=>er._expressionToRenderExpression.set(n.expression,a))}r.length>0&&await Promise.all(r)}static evaluateOverrides(t,i,r,s,n){const o={$view:{scale:n?.scale}};for(const a of t){a.value&&typeof a.value=="object"&&$re(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=EEe(a.value));const l=a.valueExpressionInfo;if(!l)continue;const u=er._expressionToRenderExpression.get(l.expression);u&&(a.value=SEe(u,i,o,r,s))}}static applyDictionaryTextOverrides(t,i,r,s,n="Normal"){if(t?.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&er.applyDictionaryTextOverrides(a,i,r,s,t.type==="CIMTextSymbol"?t.textCase:n)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&er.applyDictionaryTextOverrides(a,i,r,s)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=QTe(o,r);t.textString=eEe(i,a,s,n)}}}}static applyOverrides(t,i,r,s){if(t.primitiveName){for(const n of i)if(n.primitiveName===t.primitiveName){const o=Q$(n.propertyName);if(s&&s.push({cim:t,nocapPropertyName:o,value:t[o]}),r){let a=!1;for(const l of r)l.primitiveName===t.primitiveName&&(a=!0);a||r.push(n)}n.value!=null&&(t[o]=n.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)er.applyOverrides(n,i,r,s);if(t.symbolLayers)for(const n of t.symbolLayers)er.applyOverrides(n,i,r,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const n of t.effects)er.applyOverrides(n,i,r,s);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const n of t.markerGraphics)er.applyOverrides(n,i,r,s),er.applyOverrides(n.symbol,i,r,s)}}static restoreOverrides(t){for(const i of t)i.cim[i.nocapPropertyName]=i.value}static buildOverrideKey(t){let i="";for(const r of t)r.value!==void 0&&(i+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return i}static toValue(t,i){if(t==="DashTemplate")return i.split(" ").map(r=>Number(r));if(t==="Color"){const r=new Oe(i).toRgba();return r[3]*=255,r}return i}};Bre._expressionToRenderExpression=new Map;const FB="esri.renderers.support.DictionaryLoader",MEe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let zre=class{constructor(t,i,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new O8(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=i,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,i){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{r=await this._dictionaryPromise}catch(p){if(ls(p))return this._dictionaryPromise=null,null}const s=this._dictionaryVersion?.greaterEqual(4,0),n={};if(this.fieldMap)for(const p of this._symbolFields){const f=Vre(this.fieldMap[p],this._fieldIndex);if(f){const m=t.attributes[f];n[p]=s?m:m!=null?""+t.attributes[f]:""}else n[p]=""}let o=null;try{o=r?.(n,i)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),l=[],u=[];for(let p=0;p<a.length;p++){const f=a[p];if(f){if(f.includes("po:")){const m=f.slice(3).split("|");if(m.length===3){const g=m[0],b=m[1];let w=m[2];const S="countrylabel";if(g===S&&b==="TextString"){if(this.fieldMap!=null){let T=this.fieldMap[S];T==null&&(T=S,this.fieldMap[T]=T),t.attributes[T]=w}continue}if(b==="DashTemplate")w=w.split(" ").map(T=>Number(T));else if(b==="Color"){const T=new Oe(w).toRgba();w=[T[0],T[1],T[2],255*T[3]]}else w=Number(w);u.push({primitiveName:g,propertyName:b,value:w,defaultValue:null})}}else if(f.includes("|")){for(const m of f.split("|"))if(this._itemNames.has(m)){l.push(m);break}}else if(this._itemNames.has(f))l.push(f);else if(p===0){l.length=0;let m="Invalid_P";t.geometry!=null&&(zh(t.geometry)?m="Invalid_A":ex(t.geometry)&&(m="Invalid_L")),l.push(m);break}}}const h=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,l,u,h,i)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void xe.getLogger(FB).error("no valid URL!");const i=Ne(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:r}]=await Promise.all([i,Ky()]);if(!r)throw this._dictionaryPromise=null,new W("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:n,expression:o,itemsNames:a}=r,l=o;let u=!1;n&&(this._dictionaryVersion=P8.parse(n),u=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=s.symbol;const h={};if(this.config){const m=this.config;for(const g in m)h[g]=m[g]}if(s.configuration)for(const m of s.configuration)h.hasOwnProperty(m.name)||(h[m.name]=m.value);const p=[];if(t?.fields&&this.fieldMap)for(const m in this.fieldMap){const g=this.fieldMap[m],b=t.fields.filter(w=>w.name.toLowerCase()===g?.toLowerCase());b.length>0&&p.push({...b[0],type:u?b[0].type:"esriFieldTypeString"})}p.length>0&&(this._fieldIndex=new Z$(p));const f=q_e(l,t!=null?t.spatialReference:null,p,h).then(m=>{const g={scale:0};return(b,w)=>{if(m==null)return null;const S=m.repurposeFeature({geometry:null,attributes:b});return g.scale=w!=null?w.scale??void 0:void 0,m.evaluate({$feature:S,$view:g},m.services)}}).catch(m=>(xe.getLogger(FB).error("Creating dictionary expression failed:",m),null));return this._dictionaryPromise=f,f}async _cimPartsToCIMSymbol(t,i,r,s,n){const o=new Array(i.length);for(let u=0;u<i.length;u++)o[u]=this._getSymbolPart(i[u],n);let a=await Promise.all(o);const l=this.fieldMap;if(l){a=K(a);for(const u of a)Bre.applyDictionaryTextOverrides(u,t,l,this._fieldIndex,YL(u))}return new ff({data:IEe(a,r,s)})}async _getSymbolPart(t,i){const r=this._symbolCache.get(t);if(r)return r;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),n=Ne(s,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(t,n),n.finally(()=>this._ongoingRequests.delete(t));try{const o=await n;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function IEe(e,t,i){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const s of e){const n=s;if(n.effects!=null)for(const o of n.symbolLayers)o.effects==null?o.effects=n.effects:o.effects.unshift(...n.effects);r.symbolLayers.unshift(...n.symbolLayers)}}return i&&(r.callout=MEe),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var KL;let Ml=KL=class extends bf(up){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new zre(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r?.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new KL({config:K(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:K(this.fieldMap),url:K(this.url),visualVariables:K(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await Rn(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};c([d({type:zre})],Ml.prototype,"_loader",null),c([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Ml.prototype,"config",void 0),c([d({type:Object,json:{write:!0}})],Ml.prototype,"fieldMap",void 0),c([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Ml.prototype,"scaleExpression",void 0),c([ge("scaleExpression")],Ml.prototype,"writeData",null),c([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],Ml.prototype,"scaleExpressionTitle",void 0),c([d({type:String,json:{write:!0}})],Ml.prototype,"url",void 0),c([ge("visualVariables")],Ml.prototype,"writeVisualVariables",null),Ml=KL=c([F("esri.renderers.DictionaryRenderer")],Ml);const AEe=Ml;var XL;let Kc=XL=class extends ae{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(xe.getLogger(this).error(".field: field must be a string value"),null):HS(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new XL({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:Oe,json:{type:[Number],write:!0}})],Kc.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Kc.prototype,"field",void 0),c([Ht("field")],Kc.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Kc.prototype,"label",void 0),c([d({type:String,json:{write:!0}})],Kc.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Kc.prototype,"valueExpressionTitle",void 0),Kc=XL=c([F("esri.renderers.support.AttributeColorInfo")],Kc);const qre=Kc;var QL;let PM=QL=class extends ae{constructor(){super(...arguments),this.unit=null}clone(){return new QL({unit:this.unit})}};c([d({type:String,json:{write:!0}})],PM.prototype,"unit",void 0),PM=QL=c([F("esri.renderers.support.DotDensityLegendOptions")],PM);const $Ee=PM;var eN;let co=eN=class extends bf(up){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Oe([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new ro,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new bc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new eN({attributes:K(this.attributes),backgroundColor:K(this.backgroundColor),dotBlendingEnabled:K(this.dotBlendingEnabled),dotShape:K(this.dotShape),dotSize:K(this.dotSize),dotValue:K(this.dotValue),legendOptions:K(this.legendOptions),outline:K(this.outline),referenceScale:K(this.referenceScale),seed:K(this.seed),visualVariables:K(this.visualVariables),authoringInfo:K(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(t=>t.field||t.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await Rn(e,t,i.valueExpression),i.field&&e.add(i.field)}};c([d({type:[qre],json:{write:!0}})],co.prototype,"attributes",void 0),c([d({type:Oe,json:{write:!0}})],co.prototype,"backgroundColor",void 0),c([d({type:Boolean,json:{write:!0}})],co.prototype,"dotBlendingEnabled",void 0),c([d({type:String,json:{write:!1}})],co.prototype,"dotShape",void 0),c([d({type:Number,json:{write:!0}})],co.prototype,"dotSize",void 0),c([d({type:$Ee,json:{write:!0}})],co.prototype,"legendOptions",void 0),c([d({type:ro,json:{default:null,write:!0}})],co.prototype,"outline",void 0),c([d({type:Number,json:{write:!0}})],co.prototype,"dotValue",void 0),c([d({type:Number,json:{write:!0}})],co.prototype,"referenceScale",void 0),c([d({type:Number,json:{write:!0}})],co.prototype,"seed",void 0),c([Ue({dotDensity:"dot-density"})],co.prototype,"type",void 0),co=eN=c([F("esri.renderers.DotDensityRenderer")],co);const CEe=co;var tN;let Jw=tN=class extends ae{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new tN({color:this.color&&this.color.clone(),ratio:this.ratio})}};c([d({type:Oe,json:{type:[vt],default:null,write:!0}})],Jw.prototype,"color",void 0),c([d({type:Number,json:{write:!0}})],Jw.prototype,"ratio",void 0),Jw=tN=c([F("esri.renderers.support.HeatmapColorStop")],Jw);const LM=Jw;let f0=class extends Dt(ae){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};c([d({type:String,json:{write:!0}})],f0.prototype,"minLabel",void 0),c([d({type:String,json:{write:!0}})],f0.prototype,"maxLabel",void 0),c([d({type:String,json:{write:!0}})],f0.prototype,"title",void 0),f0=c([F("esri.renderers.support.HeatmapLegendOptions")],f0);const j8=2.4;function REe(e){return sl(e*j8)}function OEe(e){return K2e(e)/j8}function PEe(e,t,i,r){let{color:s,ratio:n}=t,{color:o,ratio:a}=i;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=rl((r-n)/(a-n),0,1);Sre(e,s.toArray(),o.toArray(),l)}function Ept(e){const i=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return i;let r=e[0],s=e[0],n=1;const o=K$();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<e.length;)r=s,s=e[n++];PEe(o,r,s,l),i.set(o,4*a)}return i}function Mpt(e,t,i){const r=Math.sqrt(e**2+t**2)/i;return r>1?0:3/(Math.PI*i**2)*(1-r**2)**2}function Ipt(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var iN;function jB(e){if(e!=null){const{maxDensity:t,minDensity:i,radius:r}=e;if(t!=null||i!=null||r!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=e;return a}}return e}let gs=iN=class extends up{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new LM({ratio:0,color:new Oe("rgba(255, 140, 0, 0)")}),new LM({ratio:.75,color:new Oe("rgba(255, 140, 0, 1)")}),new LM({ratio:.9,color:new Oe("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return jB(e)}get blurRadius(){return OEe(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",REe(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(j8**2*this.blurRadius**4)}read(e,t){e=jB(e),super.read(e,t)}getSymbol(){return new Uo}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,r=this.valueExpression;i&&typeof i=="string"&&eo(e,t,i),r&&typeof r=="string"&&await Rn(e,t,r)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new iN({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:K(this.colorStops),field:this.field,legendOptions:K(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:ax,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],gs.prototype,"authoringInfo",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],gs.prototype,"blurRadius",null),c([d({type:[LM],json:{write:!0}})],gs.prototype,"colorStops",void 0),c([d({type:String,json:{write:!0}})],gs.prototype,"field",void 0),c([d({type:f0,json:{write:!0}})],gs.prototype,"legendOptions",void 0),c([d({type:Number,json:{write:!0}})],gs.prototype,"maxDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],gs.prototype,"maxPixelIntensity",null),c([d({type:Number,json:{write:!0}})],gs.prototype,"minDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],gs.prototype,"minPixelIntensity",null),c([d({type:Number,cast:qt,json:{write:!0}})],gs.prototype,"radius",void 0),c([d({type:Number,range:{min:0},json:{default:0,write:!0}})],gs.prototype,"referenceScale",void 0),c([Ue({heatmap:"heatmap"})],gs.prototype,"type",void 0),c([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],gs.prototype,"valueExpression",void 0),c([d({type:String})],gs.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],gs.prototype,"_pixelIntensityToDensity",null),gs=iN=c([F("esri.renderers.HeatmapRenderer")],gs);const Hre=gs;let sy=class extends Dt(ae){constructor(){super(...arguments),this.color=new Oe([0,0,0,0]),this.label=null,this.threshold=0}};c([d({type:Oe,json:{write:!0}})],sy.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],sy.prototype,"label",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],sy.prototype,"threshold",void 0),sy=c([F("esri.renderers.support.OthersCategory")],sy);const LEe={base:hb,key:"type",typeMap:{size:vf,opacity:T8}};let ho=class extends bf(Dt(up)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Oe([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new sy,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new Uo({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ko)}getAttributeHash(){return this.visualVariables?.reduce((t,i)=>t+i.getAttributeHash(),"")??""}getMeshHash(){return this.getSymbols().reduce((t,i)=>t+JSON.stringify(i),"")}async collectRequiredFields(t,i){await this.collectVVRequiredFields(t,i);for(const r of this.attributes)r.valueExpression&&await Rn(t,i,r.valueExpression),r.field&&t.add(r.field)}};c([d({type:[qre],json:{write:!0}})],ho.prototype,"attributes",void 0),c([d(R8)],ho.prototype,"backgroundFillSymbol",void 0),c([d({type:Oe,json:{write:!0}})],ho.prototype,"defaultColor",void 0),c([d({type:String,json:{write:!0}})],ho.prototype,"defaultLabel",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],ho.prototype,"holePercentage",void 0),c([d({type:sy,json:{write:!0}})],ho.prototype,"othersCategory",void 0),c([d({type:W$,json:{write:!0}})],ho.prototype,"legendOptions",void 0),c([d({type:ro,json:{default:null,write:!0}})],ho.prototype,"outline",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],ho.prototype,"size",void 0),c([Ue({pieChart:"pie-chart"})],ho.prototype,"type",void 0),c([d({types:[LEe]})],ho.prototype,"visualVariables",void 0),ho=c([F("esri.renderers.PieChartRenderer")],ho);const NEe=ho;var rN;let Cm=rN=class extends bf(up){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new rN({description:this.description,label:this.label,symbol:K(this.symbol),visualVariables:K(this.visualVariables),authoringInfo:K(this.authoringInfo)})}};c([d({type:String,json:{write:!0}})],Cm.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Cm.prototype,"label",void 0),c([d(C8)],Cm.prototype,"symbol",void 0),c([Ue({simple:"simple"})],Cm.prototype,"type",void 0),Cm=rN=c([F("esri.renderers.SimpleRenderer")],Cm);const _g=Cm,kEe=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function sN(e){return e instanceof Je}function UB(e){return e instanceof Be?Object.keys(e.items):sN(e)?Is(e).keys():e?Object.keys(e):[]}function ST(e,t){return e instanceof Be?e.items[t]:e[t]}function DEe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function H_(e){return e?e.declaredClass:null}function Wre(e,t){const i=e.diff;if(i&&typeof i=="function")return i(e,t);const r=UB(e),s=UB(t);if(r.length===0&&s.length===0)return;if(!r.length||!s.length||DEe(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(p=>!r.includes(p)),o=r.filter(p=>!s.includes(p)),a=r.filter(p=>s.includes(p)&&ST(e,p)!==ST(t,p)).concat(n,o).sort(),l=H_(e);if(l&&kEe.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const h=sN(e)&&sN(t);for(const p of a){const f=ST(e,p),m=ST(t,p);let g;if((h||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(i&&i[p]&&typeof i[p]=="function")g=i[p]?.(f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&H_(f)===H_(m)?Wre(f,m):{type:"complete",oldValue:f,newValue:m};g!=null&&(u!=null?u.diff[p]=g:u={type:"partial",diff:{[p]:g}})}}return u}function Cpt(e,t){return FEe(e,t)}function FEe(e,t){if(e==null)return!1;const i=t.split(".");let r=e;for(const s of i){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const n=r.diff[s];if(!n)return!1;r=n}}return!0}function Rpt(e,t){if(!e)return!1;if(e.type==="partial"){const i=Object.keys(e.diff);return i.length===1&&i[0]===t}return!1}function jEe(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&H_(e)!==H_(t)?{type:"complete",oldValue:e,newValue:t}:Wre(e,t)}let m0=class extends Dt(ae){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};c([d($M)],m0.prototype,"value",void 0),c([d($M)],m0.prototype,"value2",void 0),c([d($M)],m0.prototype,"value3",void 0),m0=c([F("esri.renderers.support.UniqueValue")],m0);const kv=m0;let Hp=class extends Dt(ae){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const i=typeof(t=Array.isArray(t)?t:[t])[0];return i==="string"||i==="number"?t.map(r=>new kv({value:r})):i==="object"?t[0]instanceof kv?t:t.map(r=>new kv(r)):null}};c([d({type:String,json:{write:!0}})],Hp.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Hp.prototype,"label",void 0),c([d(H$)],Hp.prototype,"symbol",void 0),c([d({type:[kv],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new kv({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const i=[];for(const r of e){const s=[r.value,r.value2,r.value3].filter(ko).map(n=>n.toString());i.push(s)}t.values=i}}}})],Hp.prototype,"values",void 0),c([Ht("values")],Hp.prototype,"castValues",null),Hp=c([F("esri.renderers.support.UniqueValueClass")],Hp);const Jre=Hp;let Zw=class extends Dt(ae){constructor(t){super(t),this.heading=null,this.classes=null}};c([d({type:String,json:{write:!0}})],Zw.prototype,"heading",void 0),c([d({type:[Jre],json:{write:!0}})],Zw.prototype,"classes",void 0),Zw=c([F("esri.renderers.support.UniqueValueGroup")],Zw);const nN=Zw;var oN;let Rm=oN=class extends ae{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new oN({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};c([d({type:String,json:{write:!0}})],Rm.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Rm.prototype,"label",void 0),c([d(C8)],Rm.prototype,"symbol",void 0),c([d($M)],Rm.prototype,"value",void 0),Rm=oN=c([F("esri.renderers.support.UniqueValueInfo")],Rm);const Ey=Rm,VB=new Map;async function UEe(e,t){try{return{data:(await zEe(e,t)).data,baseUrl:f0e(e),styleUrl:e}}catch(i){return _o(i),null}}function VEe(e,t,i){const r=t.portal!=null?t.portal:jo.getDefault();let s;const n=`${r.url} - ${r.user?.username} - ${e}`,o=VB.get(n);if(o)return o;const a=GEe(e,r,i).then(l=>(s=l,l.fetchData())).then(l=>({data:l,baseUrl:s.itemUrl??"",styleName:e}));return VB.set(n,a),a}function GEe(e,t,i){return t.load(i).then(()=>{const r=new Bl({disableExtraQuery:!0,query:`owner:${GB} AND type:${BB} AND typekeywords:"${e}"`});return t.queryItems(r,i)}).then(({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r)){for(const o of r)if(o.typeKeywords?.some(l=>l.toLowerCase()===n)&&o.type===BB&&o.owner===GB){s=o;break}}if(!s)throw new W("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(i)})}function BEe(e,t,i){return e?.styleUrl!=null?UEe(e.styleUrl,i):e?.styleName!=null?VEe(e.styleName,t,i):Promise.reject(new W("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Npt(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function kpt(e,t,i=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!le("enable-feature:force-wosr"))for(const r of i){const s=e.formatInfos.find(n=>n.type===r);if(s)return s.href}return encodeURI(e.webRef)}function zEe(e,t){const i={responseType:"json",query:{f:"json"},...t};return Ne(Ja(e),i)}const GB="esri_en",BB="Style",Dpt="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Yw;const Zre="esri.renderers.UniqueValueRenderer",Ep=()=>xe.getLogger(Zre),zB="uvInfos-watcher",qB="uvGroups-watcher",qEe=",",HEe=bi(Ey);function WEe(e){const{field1:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,a=!(!t||!i);return[{classes:(n??[]).map(l=>{const{symbol:u,label:h,value:p,description:f}=l,[m,g,b]=a?p?.toString()?.split(s||"")||[]:[p],w=[];return(t||o)&&w.push(m),i&&w.push(g),r&&w.push(b),{symbol:u,label:h,values:[w],description:f}})}]}function Bg(e){return e!=null&&e!==""&&(typeof e!="string"||e.trim()!==""&&e.toLowerCase()!=="<null>")||(e=null),e+""}let zi=Yw=class extends bf(up){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,i){if(!t&&!i)return;if(!t||!i)return{type:"complete",oldValue:t,newValue:i};let r=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<i.length;n++){const o=t.find(a=>a.value===i[n].value);o?jEe(o,i[n])?(s.changed.push({type:"complete",oldValue:o,newValue:i[n]}),r=!0):s.unchanged.push({oldValue:o,newValue:i[n]}):(s.added.push(i[n]),r=!0)}for(let n=0;n<t.length;n++)i.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),r=!0);return r?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:HS(e)}writeField(e,t,i,r){typeof e=="string"?t[i]=e:r?.messages?r.messages.push(new W("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Ep().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,i){return i.portal||jo.getDefault()}readStyleOrigin(e,t,i){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=eb(t.styleUrl,i);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,i,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=XS(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?Ep().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Ep().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Ep().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof e=="object"?HEe(e):new Ey({value:e,symbol:Xie(t)}),this.uniqueValueInfos?.push(i),this._valueInfoMap[Bg(i.value)]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Ep().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let i=0;i<t.length;i++){const r=t[i];if(String(r.value)===String(e)){delete this._valueInfoMap[Bg(e)],t.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let i=t;return this.valueExpression&&t?.arcade==null&&(i={...i,arcade:await Ky()}),this._getUniqueValueInfo(e,i)}getSymbol(e,t){return this.valueExpression&&t?.arcade==null?void Ep().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(e,t)?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let i=t;if(this.valueExpression&&i?.arcade==null){const s=await Ky(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),i={...i,arcade:s}}return this._getUniqueValueInfo(e,i)?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),i=this.uniqueValueInfos?.reduce((r,s)=>r+s.getMeshHash(),"");return`${e}.${t}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Yw({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:K(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:K(this.visualVariables),legendOptions:K(this.legendOptions),authoringInfo:K(this.authoringInfo),backgroundFillSymbol:K(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=K(this.uniqueValueInfos),i=K(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(K(this.styleOrigin))),Object.freeze(t),Object.freeze(i)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",i),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const i=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(i)}async collectSymbolFields(e,t){const i=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Rn(e,t,this.valueExpression)];eo(e,t,this.field),eo(e,t,this.field2),eo(e,t,this.field3),await Promise.all(i)}populateFromStyle(){return BEe(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach(i=>{const r=new wg({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:i.name});this.defaultSymbol||i.name!==e.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new Ey({value:i.name,symbol:r});t.push(s),this._valueInfoMap[Bg(i.name)]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",qEe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[Bg(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(zB);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const i of e)t.push(at(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(r,s)=>{r!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,zB)}}_watchUniqueValueGroups(){this.removeHandles(qB);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const i of e){t.push(at(()=>({classes:i.classes}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of i.classes??[])t.push(at(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,qB)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:i,field3:r,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!i);for(const l of n)for(const u of l.classes??[]){const{symbol:h,label:p,values:f,description:m}=u;for(const g of f??[]){const{value:b,value2:w,value3:S}=g,T=[b];i&&T.push(w),r&&T.push(S);const x=a?T.join(s||""):T[0]??void 0;e.push(new Ey({symbol:h,label:p,value:x,description:m}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:i,valueExpression:r,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!r||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!i),a=n.map(u=>{const{symbol:h,label:p,value:f,description:m}=u,[g,b,w]=o?f?.toString()?.split(s||"")||[]:[f];return new Jre({symbol:h,label:p,description:m,values:[new kv({value:g,value2:b,value3:w})]})}),l=[new nN({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:i,scale:r,spatialReference:s,arcade:n,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const h=l.createSyntaxTree(this.valueExpression);a=l.createFunction(h),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:i,scale:r,spatialReference:s}),o));return this._valueInfoMap[Bg(u)]}_getUnqiueValueInfoForFields(e){const t=this.field,i=e.attributes;let r;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(i[t]),s&&o.push(i[s]),n&&o.push(i[n]),r=o.join(this.fieldDelimiter||"")}else t&&(r=i[t]);return this._valueInfoMap[Bg(r)]}static fromPortalStyle(e,t){const i=new Yw(t?.properties);i._set("styleOrigin",Object.freeze({styleName:e})),i._set("portal",t?.portal||jo.getDefault());const r=i.populateFromStyle();return r.catch(s=>{Ep().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),r}static fromStyleUrl(e,t){const i=new Yw(t?.properties);i._set("styleOrigin",Object.freeze({styleUrl:e}));const r=i.populateFromStyle();return r.catch(s=>{Ep().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),r}};c([d({readOnly:!0})],zi.prototype,"_cache",null),c([Ue({uniqueValue:"unique-value"})],zi.prototype,"type",void 0),c([d(R8)],zi.prototype,"backgroundFillSymbol",void 0),c([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],zi.prototype,"field",null),c([Ht("field")],zi.prototype,"castField",null),c([ge("field")],zi.prototype,"writeField",null),c([d({type:String,value:null,json:{write:!0}})],zi.prototype,"field2",null),c([d({type:String,value:null,json:{write:!0}})],zi.prototype,"field3",null),c([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],zi.prototype,"orderByClassesEnabled",void 0),c([d({type:String,value:null,json:{write:!0}})],zi.prototype,"valueExpression",null),c([d({type:String,json:{write:!0}})],zi.prototype,"valueExpressionTitle",void 0),c([d({type:W$,json:{write:!0}})],zi.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],zi.prototype,"defaultLabel",void 0),c([d(iF({...H$},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],zi.prototype,"defaultSymbol",null),c([d({type:String,value:null,json:{write:!0}})],zi.prototype,"fieldDelimiter",null),c([d({type:jo,readOnly:!0})],zi.prototype,"portal",void 0),c([ue("portal",["styleName"])],zi.prototype,"readPortal",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],zi.prototype,"styleOrigin",void 0),c([ue("styleOrigin",["styleName","styleUrl"])],zi.prototype,"readStyleOrigin",null),c([ge("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],zi.prototype,"writeStyleOrigin",null),c([d({type:[nN],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,i)=>(t.uniqueValueGroups||WEe(t)).map(r=>nN.fromJSON(r,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],zi.prototype,"uniqueValueGroups",null),c([d({type:[Ey],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],zi.prototype,"uniqueValueInfos",null),zi=Yw=c([F(Zre)],zi);const fb=zi,hx={key:"type",base:up,typeMap:{heatmap:Hre,simple:_g,"unique-value":fb,"class-breaks":pb,"dot-density":CEe,dictionary:AEe,"pie-chart":NEe},errorContext:"renderer"},Yre={key:"type",base:up,typeMap:{simple:_g,"unique-value":fb,"class-breaks":pb,heatmap:Hre},errorContext:"renderer",validate:JEe};function JEe(e){switch(e.type){case"simple":return ZEe(e);case"unique-value":return YEe(e);case"class-breaks":return KEe(e);case"heatmap":return e}}function ZEe(e){if(e.symbol)return e;xe.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function YEe(e){const t=e.uniqueValueInfos,i=t?.filter(({symbol:r,label:s},n)=>(r||xe.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==t?.length&&(e.uniqueValueInfos=i),e}function KEe(e){const t=e.classBreakInfos,i=t?.filter(({symbol:r,label:s},n)=>(r||xe.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!r));return i?.length!==t?.length&&(e.classBreakInfos=i),e}function b1(e,t){return Y2(e,null,t)}const XEe=K1({types:hx});function Y2(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(i?.messages&&i.messages.push(new Fo("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):XEe(e,t,i):null}let QEe=class Kre{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(gO),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const i=new Kre,r=this._originStores[je.DEFAULTS];r&&r.forEach((s,n)=>{i.set(n,K(s),je.DEFAULTS)});for(let s=je.SERVICE;s<gO;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{t&&t.has(a)||i.set(a,K(o),s)})}return i}get(t,i){const r=i===void 0?this._values:this._originStores[i];return r?r.get(t):void 0}keys(t){const i=t==null?this._values:this._originStores[t];return i?[...i.keys()]:[]}set(t,i,r=je.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,i),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,r),n!==i}return!1}delete(t,i=je.USER){const r=this._originStores[i];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===i){this._values.delete(t);for(let n=i-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,i){const r=i===void 0?this._values:this._originStores[i];return!!r&&r.has(t)}revert(t,i){for(;i>0&&!this.has(t,i);)--i;const r=this._originStores[i],s=r?.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,i),n!==s}originOf(t){return this._propertyOriginMap.get(t)||je.DEFAULTS}forEach(t){this._values.forEach(t)}};const Xre=e=>{let t=class extends e{constructor(...i){super(...i);const r=Is(this),s=r.store,n=new QEe;r.store=n,nQ(r,s,n)}read(i,r){aQ(this,i,r)}getAtOrigin(i,r){const s=c4(this),n=Yn(r);if(typeof i=="string")return s.get(i,n);const o={};return i.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(i){return P2(this.originIdOf(i))}originIdOf(i){return c4(this).originOf(i)}revert(i,r){const s=c4(this),n=Yn(r),o=Is(this);let a;a=typeof i=="string"?i==="*"?s.keys(n):[i]:i,a.forEach(l=>{o.invalidate(l),s.revert(l,n),o.commit(l)})}};return t=c([F("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function c4(e){return Is(e).store}let HB=class extends Xre(Je){};HB=c([F("esri.core.ReadOnlyMultiOriginJSONSupport")],HB);const eMe=e=>{let t=class extends e{constructor(...i){super(...i)}clear(i,r="user"){return h4(this).delete(i,Yn(r))}write(i,r){return cQ(this,i=i||{},r),i}setAtOrigin(i,r,s){Is(this).setAtOrigin(i,r,Yn(s))}removeOrigin(i){const r=h4(this),s=Yn(i),n=r.keys(s);for(const o of n)r.originOf(o)===s&&r.set(o,r.get(o,s),je.USER)}updateOrigin(i,r){const s=h4(this),n=Yn(r),o=Xl(this,i);for(let a=n+1;a<gO;++a)s.delete(i,a);s.set(i,o,n)}toJSON(i){return this.write({},i)}};return t=c([F("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function h4(e){return Is(e).store}const wf=e=>{let t=class extends eMe(Xre(e)){constructor(...i){super(...i)}};return t=c([F("esri.core.MultiOriginJSONSupport")],t),t};let aN=class extends wf(Je){};aN=c([F("esri.core.MultiOriginJSONSupport")],aN);const As=(e=>e)(["operational-layers","basemap","ground"]);var lN;let Om=lN=class extends ae{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new lN({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Om.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],Om.prototype,"name",void 0),c([d({type:["boolean","date","number","string"],json:{write:!0}})],Om.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],Om.prototype,"title",void 0),Om=lN=c([F("esri.form.ExpressionInfo")],Om);const tMe=Om;let Pm=class extends ae{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([d({type:String,json:{write:!0}})],Pm.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Pm.prototype,"label",void 0),c([d()],Pm.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Pm.prototype,"visibilityExpression",void 0),Pm=c([F("esri.form.elements.Element")],Pm);const eg=Pm;let NM=class extends Dt(ae){constructor(t){super(t),this.type=null}};c([d()],NM.prototype,"type",void 0),NM=c([F("esri.form.elements.inputs.attachments.Input")],NM);const tf=NM,eC=["any","capture","upload"];let y0=class extends tf{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};c([d({type:["audio"],readOnly:!0,json:{write:!0}})],y0.prototype,"type",void 0),c([d({type:eC,json:{write:!0}})],y0.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],y0.prototype,"maxDuration",void 0),y0=c([F("esri.form.elements.inputs.attachments.AudioInput")],y0);const WB=y0;let Kw=class extends tf{constructor(t){super(t),this.type="document",this.maxFileSize=null}};c([d({type:["document"],readOnly:!0,json:{write:!0}})],Kw.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Kw.prototype,"maxFileSize",void 0),Kw=c([F("esri.form.elements.inputs.attachments.DocumentInput")],Kw);const JB=Kw;let g0=class extends tf{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};c([d({type:["image"],readOnly:!0,json:{write:!0}})],g0.prototype,"type",void 0),c([d({type:eC,json:{write:!0}})],g0.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],g0.prototype,"maxImageSize",void 0),g0=c([F("esri.form.elements.inputs.attachments.ImageInput")],g0);const ZB=g0;let Xw=class extends tf{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};c([d({type:["signature"],readOnly:!0,json:{write:!0}})],Xw.prototype,"type",void 0),c([d({type:eC,json:{write:!0}})],Xw.prototype,"inputMethod",void 0),Xw=c([F("esri.form.elements.inputs.attachments.SignatureInput")],Xw);const YB=Xw;let v0=class extends tf{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};c([d({type:["video"],readOnly:!0,json:{write:!0}})],v0.prototype,"type",void 0),c([d({type:eC,json:{write:!0}})],v0.prototype,"inputMethod",void 0),c([d({type:Number,json:{write:!0}})],v0.prototype,"maxDuration",void 0),v0=c([F("esri.form.elements.inputs.attachments.VideoInput")],v0);const KB=v0;function Qre(e){return{nestableTypes:{base:tf,key:"type",typeMap:{audio:WB,document:JB,image:ZB,signature:YB,video:KB}},allTypes:{base:tf,key:"type",typeMap:{attachment:e,audio:WB,document:JB,image:ZB,signature:YB,video:KB}}}}function iMe(e,t,i){return e?e.map(r=>il(t.nestableTypes,r)):null}function rMe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function sMe(e,t,i){if(!e)return null;const r=t.nestableTypes.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}let ju=class extends tf{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return iMe(t,p4)}readInputs(t,i){return rMe(i.inputTypes,p4)}writeInputs(t,i){i.inputTypes=sMe(t,p4)}};c([d({type:["attachment"],readOnly:!0,json:{write:!0}})],ju.prototype,"type",void 0),c([d({type:["any","exact","exactOrNone"],json:{write:!0}})],ju.prototype,"attachmentAssociationType",void 0),c([d({json:{write:{isRequired:!0}}})],ju.prototype,"inputTypes",void 0),c([Ht("inputTypes")],ju.prototype,"castInputs",null),c([ue("inputTypes")],ju.prototype,"readInputs",null),c([ge("inputTypes")],ju.prototype,"writeInputs",null),ju=c([F("esri.form.elements.inputs.attachments.AttachmentInput")],ju);const p4=Qre(ju),nMe=ju;var uN;const oMe=Qre(nMe);let Zo=uN=class extends eg{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new uN({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};c([d({type:Boolean,json:{write:!0}})],Zo.prototype,"allowUserRename",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Zo.prototype,"attachmentKeyword",void 0),c([d({type:Boolean,json:{write:!0}})],Zo.prototype,"displayFilename",void 0),c([d({type:String,json:{write:!0}})],Zo.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],Zo.prototype,"filenameExpression",void 0),c([d({types:oMe.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],Zo.prototype,"input",void 0),c([d({type:Number,json:{write:!0}})],Zo.prototype,"maxAttachmentCount",void 0),c([d({type:Number,json:{write:!0}})],Zo.prototype,"minAttachmentCount",void 0),c([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],Zo.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0}})],Zo.prototype,"useOriginalFilename",void 0),Zo=uN=c([F("esri.form.elements.AttachmentElement")],Zo);const XB=Zo;let kM=class extends ae{constructor(t){super(t),this.type=null}};c([d()],kM.prototype,"type",void 0),kM=c([F("esri.form.elements.inputs.Input")],kM);const cp=kM;let Qw=class extends cp{constructor(t){super(t),this.maxLength=null,this.minLength=0}};c([d({type:Number,json:{write:!0}})],Qw.prototype,"maxLength",void 0),c([d({type:Number,json:{write:!0}})],Qw.prototype,"minLength",void 0),Qw=c([F("esri.form.elements.inputs.TextInput")],Qw);const U8=Qw;var cN;let DM=cN=class extends U8{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new cN({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],DM.prototype,"type",void 0),DM=cN=c([F("esri.form.elements.inputs.BarcodeScannerInput")],DM);const aMe=DM;var hN;let b0=hN=class extends cp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new hN({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([d({type:String,json:{write:!0}})],b0.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],b0.prototype,"showNoValueOption",void 0),c([d({type:["combo-box"],json:{read:!1,write:!0}})],b0.prototype,"type",void 0),b0=hN=c([F("esri.form.elements.inputs.ComboBoxInput")],b0);const lMe=b0;var pN;function QB(e){return e??null}function ez(e){return e??null}let Iu=pN=class extends cp{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return QB(t.max)}writeMax(e,t){t.max=ez(e)}readMin(e,t){return QB(t.min)}writeMin(e,t){t.min=ez(e)}clone(){return new pN({max:this.max,min:this.min})}};c([d({type:String,json:{type:String,write:!0}})],Iu.prototype,"max",void 0),c([ue("max")],Iu.prototype,"readMax",null),c([ge("max")],Iu.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Iu.prototype,"min",void 0),c([ue("min")],Iu.prototype,"readMin",null),c([ge("min")],Iu.prototype,"writeMin",null),c([d({type:["date-picker"],json:{read:!1,write:!0}})],Iu.prototype,"type",void 0),Iu=pN=c([F("esri.form.elements.inputs.DatePickerInput")],Iu);const uMe=Iu;var dN;function d4(e){return e??null}function f4(e){return e??null}let po=dN=class extends cp{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return d4(t.max)}writeMax(e,t){t.max=f4(e)}readMin(e,t){return d4(t.min)}writeMin(e,t){t.min=f4(e)}readTimeResolution(e,t){return d4(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=f4(e)}clone(){return new dN({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:Boolean,json:{write:!0}})],po.prototype,"includeTimeOffset",void 0),c([d({type:String,json:{type:String,write:!0}})],po.prototype,"max",void 0),c([ue("max")],po.prototype,"readMax",null),c([ge("max")],po.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],po.prototype,"min",void 0),c([ue("min")],po.prototype,"readMin",null),c([ge("min")],po.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],po.prototype,"timeResolution",void 0),c([ue("timeResolution")],po.prototype,"readTimeResolution",null),c([ge("timeResolution")],po.prototype,"writeTimeResolution",null),c([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],po.prototype,"type",void 0),po=dN=c([F("esri.form.elements.inputs.DateTimeOffsetPickerInput")],po);const cMe=po;var fN;function tz(e){return e!=null?new Date(e):null}function iz(e){return e?e.getTime():null}let Il=fN=class extends cp{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return tz(t.max)}writeMax(e,t){t.max=iz(e)}readMin(e,t){return tz(t.min)}writeMin(e,t){t.min=iz(e)}clone(){return new fN({includeTime:this.includeTime,max:this.max,min:this.min})}};c([d({type:Boolean,json:{write:!0}})],Il.prototype,"includeTime",void 0),c([d({type:Date,json:{type:Number,write:!0}})],Il.prototype,"max",void 0),c([ue("max")],Il.prototype,"readMax",null),c([ge("max")],Il.prototype,"writeMax",null),c([d({type:Date,json:{type:Number,write:!0}})],Il.prototype,"min",void 0),c([ue("min")],Il.prototype,"readMin",null),c([ge("min")],Il.prototype,"writeMin",null),c([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Il.prototype,"type",void 0),Il=fN=c([F("esri.form.elements.inputs.DateTimePickerInput")],Il);const hMe=Il;var mN;let w0=mN=class extends cp{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new mN({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([d({type:String,json:{write:!0}})],w0.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],w0.prototype,"showNoValueOption",void 0),c([d({type:["radio-buttons"],json:{read:!1,write:!0}})],w0.prototype,"type",void 0),w0=mN=c([F("esri.form.elements.inputs.RadioButtonsInput")],w0);const pMe=w0;var yN;let _0=yN=class extends cp{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new yN({offValue:this.offValue,onValue:this.onValue})}};c([d({type:[String,Number],json:{write:!0}})],_0.prototype,"offValue",void 0),c([d({type:[String,Number],json:{write:!0}})],_0.prototype,"onValue",void 0),c([d({type:["switch"],json:{read:!1,write:!0}})],_0.prototype,"type",void 0),_0=yN=c([F("esri.form.elements.inputs.SwitchInput")],_0);const dMe=_0;var gN;let FM=gN=class extends U8{constructor(e){super(e),this.type="text-area"}clone(){return new gN({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-area"],json:{read:!1,write:!0}})],FM.prototype,"type",void 0),FM=gN=c([F("esri.form.elements.inputs.TextAreaInput")],FM);const fMe=FM;var vN;let jM=vN=class extends U8{constructor(e){super(e),this.type="text-box"}clone(){return new vN({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-box"],json:{read:!1,write:!0}})],jM.prototype,"type",void 0),jM=vN=c([F("esri.form.elements.inputs.TextBoxInput")],jM);const mMe=jM;var bN;function m4(e){return e??null}function y4(e){return e??null}let Yo=bN=class extends cp{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return m4(t.max)}writeMax(e,t){t.max=y4(e)}readMin(e,t){return m4(t.min)}writeMin(e,t){t.min=y4(e)}readTimeResolution(e,t){return m4(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=y4(e)}clone(){return new bN({max:this.max,min:this.min,timeResolution:this.timeResolution})}};c([d({type:String,json:{type:String,write:!0}})],Yo.prototype,"max",void 0),c([ue("max")],Yo.prototype,"readMax",null),c([ge("max")],Yo.prototype,"writeMax",null),c([d({type:String,json:{type:String,write:!0}})],Yo.prototype,"min",void 0),c([ue("min")],Yo.prototype,"readMin",null),c([ge("min")],Yo.prototype,"writeMin",null),c([d({type:String,json:{type:String,write:!0}})],Yo.prototype,"timeResolution",void 0),c([ue("timeResolution")],Yo.prototype,"readTimeResolution",null),c([ge("timeResolution")],Yo.prototype,"writeTimeResolution",null),c([d({type:["time-picker"],json:{read:!1,write:!0}})],Yo.prototype,"type",void 0),Yo=bN=c([F("esri.form.elements.inputs.TimePickerInput")],Yo);const yMe=Yo,gMe={base:cp,key:"type",typeMap:{"barcode-scanner":aMe,"combo-box":lMe,"date-picker":uMe,"datetime-picker":hMe,"datetimeoffset-picker":cMe,"radio-buttons":pMe,switch:dMe,"text-area":fMe,"text-box":mMe,"time-picker":yMe}};var wN;let my=wN=class extends ae{constructor(e){super(e),this.name=null,this.code=null}clone(){return new wN({name:this.name,code:this.code})}};c([d({type:String,json:{write:!0}})],my.prototype,"name",void 0),c([d({type:[String,Number],json:{write:!0}})],my.prototype,"code",void 0),my=wN=c([F("esri.layers.support.CodedValue")],my);const vMe=new gt({inherited:"inherited",codedValue:"coded-value",range:"range"});let e_=class extends ae{constructor(t){super(t),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],e_.prototype,"name",void 0),c([Ue(vMe)],e_.prototype,"type",void 0),e_=c([F("esri.layers.support.Domain")],e_);const tC=e_;var _N;let t_=_N=class extends tC{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const i=String(e);this.codedValues.some(r=>(String(r.code)===i&&(t=r.name),!!t))}return t}clone(){return new _N({codedValues:K(this.codedValues),name:this.name})}};c([d({type:[my],json:{write:!0}})],t_.prototype,"codedValues",void 0),c([Ue({codedValue:"coded-value"})],t_.prototype,"type",void 0),t_=_N=c([F("esri.layers.support.CodedValueDomain")],t_);const iC=t_;var SN;let UM=SN=class extends tC{constructor(e){super(e),this.type="inherited"}clone(){return new SN}};c([Ue({inherited:"inherited"})],UM.prototype,"type",void 0),UM=SN=c([F("esri.layers.support.InheritedDomain")],UM);const ese=UM;var xN;let S0=xN=class extends tC{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new xN({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,i){t[i]=[this.minValue||0,e]}}}})],S0.prototype,"maxValue",void 0),c([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,i){t[i]=[e,this.maxValue||0]}}}})],S0.prototype,"minValue",void 0),c([Ue({range:"range"})],S0.prototype,"type",void 0),S0=xN=c([F("esri.layers.support.RangeDomain")],S0);const tse=S0,ise={key:"type",base:tC,typeMap:{range:tse,"coded-value":iC,inherited:ese}};function rC(e){if(!e?.type)return null;switch(e.type){case"range":return tse.fromJSON(e);case"codedValue":return iC.fromJSON(e);case"inherited":return ese.fromJSON(e)}return null}var TN;let Ra=TN=class extends eg{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new TN({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([d({types:ise,json:{read:{reader:rC},write:!0}})],Ra.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Ra.prototype,"editable",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"fieldName",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"hint",void 0),c([d({types:gMe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ra.prototype,"input",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],Ra.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ra.prototype,"valueExpression",void 0),Ra=TN=c([F("esri.form.elements.FieldElement")],Ra);const rz=Ra;var EN;let Xc=EN=class extends eg{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new EN({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:K(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([d({type:Number,json:{write:!0}})],Xc.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],Xc.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],Xc.prototype,"editableExpression",void 0),c([d({type:[t8],json:{write:!0}})],Xc.prototype,"orderByFields",void 0),c([d({type:Number,json:{write:!0}})],Xc.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],Xc.prototype,"type",void 0),Xc=EN=c([F("esri.form.elements.RelationshipElement")],Xc);const sz=Xc;var MN;let x0=MN=class extends eg{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new MN({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};c([d({type:String,json:{write:!0}})],x0.prototype,"text",void 0),c([d({type:String,json:{write:!0}})],x0.prototype,"textFormat",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],x0.prototype,"type",void 0),x0=MN=c([F("esri.form.elements.TextElement")],x0);const nz=x0;function rse(e){return{typesWithGroup:{base:eg,key:"type",typeMap:{attachment:XB,field:rz,group:e,relationship:sz,text:nz}},typesWithoutGroup:{base:eg,key:"type",typeMap:{attachment:XB,field:rz,relationship:sz,text:nz}}}}function sse(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function nse(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function ose(e,t,i=!0){return e?e.map(r=>il(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var IN;let Uu=IN=class extends eg{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return ose(e,g4,!1)}readElements(e,t){return sse(t.formElements,g4,!1)}writeElements(e,t){t.formElements=nse(e,g4,!1)}clone(){return new IN({description:this.description,elements:K(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({json:{write:!0}})],Uu.prototype,"elements",void 0),c([Ht("elements")],Uu.prototype,"castElements",null),c([ue("elements",["formElements"])],Uu.prototype,"readElements",null),c([ge("elements")],Uu.prototype,"writeElements",null),c([d({type:["collapsed","expanded"],json:{write:!0}})],Uu.prototype,"initialState",void 0),c([d({type:String,json:{read:!1,write:!0}})],Uu.prototype,"type",void 0),Uu=IN=c([F("esri.form.elements.GroupElement")],Uu);const g4=rse(Uu),bMe=Uu,wMe=e=>e.type==="field",_Me=e=>e.type==="group",SMe=e=>e.type==="text";var AN;const v4=rse(bMe);let Al=AN=class extends ae{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return ose(e,v4)}readElements(e,t){return sse(t.formElements,v4)}writeElements(e,t){t.formElements=nse(e,v4)}clone(){return new AN({description:this.description,expressionInfos:K(this.expressionInfos),elements:K(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const i=new Set,{description:r,elements:s,expressionInfos:n,title:o}=this;if(W_(i,e,r),W_(i,e,o),!s)return[];const a=xMe(s,n).map(l=>Rn(i,e,l));await Promise.all(a);for(const l of s)ase(i,{fieldsIndex:e,relationships:t},l);return Array.from(i).sort()}};function ase(e,t,i){const{fieldsIndex:r}=t;if(!r||r.fields.length!==e.size)switch(W_(e,r,i.label),W_(e,r,i.description),i.type){case"field":eo(e,r,i.fieldName);break;case"group":i.elements.forEach(s=>ase(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(n=>n.id===i.relationshipId);s&&eo(e,r,s.keyField)}Xy(e,r,i.orderByFields?.map(s=>s.field));break;case"text":W_(e,r,i.text)}}function xMe(e,t){if(!t||t.length===0)return[];const i=lse(e),r=[];for(const s of t)i.has(s.name)&&r.push(s.expression);return r}function lse(e){const t=new Set;for(const i of e)if(EU(t,i.visibilityExpression),!SMe(i)){if(_Me(i))ZI(t,lse(i.elements));else if(EU(t,i.editableExpression),wMe(i)){const{requiredExpression:r,valueExpression:s}=i;ZI(t,[r,s])}}return t}function W_(e,t,i){Xy(e,t,sie(i))}c([d({type:String,json:{write:!0}})],Al.prototype,"description",void 0),c([d({json:{write:!0}})],Al.prototype,"elements",void 0),c([Ht("elements")],Al.prototype,"castElements",null),c([ue("elements",["formElements"])],Al.prototype,"readElements",null),c([ge("elements")],Al.prototype,"writeElements",null),c([d({type:[tMe],json:{write:!0}})],Al.prototype,"expressionInfos",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Al.prototype,"preserveFieldValuesWhenHidden",void 0),c([d({type:String,json:{write:!0}})],Al.prototype,"title",void 0),Al=AN=c([F("esri.form.FormTemplate")],Al);const TMe=Al;async function EMe(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:i}=await ce(async()=>{const{fromItem:r}=await import("./portalLayers-BvrUvbQI.js").then(s=>s.p);return{fromItem:r}},__vite__mapDeps([8,9,10,1]),import.meta.url);try{return await i(t)}catch(r){const s=t?.portalItem,n=s?.id||"unset",o=s?.portal?.url||Kt.portalUrl;throw xe.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",r),r}}const oz={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function b4(e,t,i,r=yc){const s=new va(KF(r)),n=_t.fromJSDate(e,{zone:s}),o=i==="decades"||i==="centuries"?"year":cse(i);return i==="decades"&&(t*=10),i==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function Kpt(e,t,i="milliseconds"){const r=e.getTime(),s=use(t,i,"milliseconds");return new Date(r+s)}function az(e,t,i=yc){const r=new va(KF(i)),s=_t.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=cse(t);return s.startOf(n).toJSDate()}function use(e,t,i){return e===0?0:e*oz[t]/oz[i]}function cse(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Oa;let ia=Oa=class extends ae{static get allTime(){return lz}static get empty(){return MMe}static fromArray(e){return new Oa({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(Oa.allTime)}get isEmpty(){return this.equals(Oa.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new Oa({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,i=this.end?.getTime()??this.end,r=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return t===r&&i===s}expandTo(e,t=yc){if(this.isEmpty||this.isAllTime)return this.clone();let i=this.start;i&&(i=az(i,e,t));let r=this.end;if(r){const s=az(r,e,t);r=r.getTime()===s.getTime()?s:b4(s,1,e,t)}return new Oa({start:i,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Oa.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,i=this.end?.getTime()??1/0,r=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let n,o;return r>=t&&r<=i?n=r:t>=r&&t<=s&&(n=t),i>=r&&i<=s?o=i:s>=t&&s<=i&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?Oa.empty:new Oa({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,i=yc){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Oa,{start:s,end:n}=this;return s!=null&&(r.start=b4(s,e,t,i)),n!=null&&(r.end=b4(n,e,t,i)),r}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return lz.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,i=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Oa({start:t,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],ia.prototype,"end",void 0),c([ue("end")],ia.prototype,"readEnd",null),c([ge("end")],ia.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],ia.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],ia.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],ia.prototype,"start",void 0),c([ue("start")],ia.prototype,"readStart",null),c([ge("start")],ia.prototype,"writeStart",null),ia=Oa=c([F("esri.time.TimeExtent")],ia);const io=ia,lz=new ia,MMe=new ia({start:void 0,end:void 0});let IMe=0,br=class extends ap.EventedMixin(sx(mc)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new bt(-180,-90,180,90,ke.WGS84),this.id=Date.now().toString(16)+"-layer-"+IMe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=ke.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const i=typeof t=="string"?{url:t}:t;return(await ce(async()=>{const{fromUrl:r}=await import("./arcgisLayers-DhFQ3PQy.js");return{fromUrl:r}},__vite__mapDeps([22,1,9,10]),import.meta.url)).fromUrl(i)}static fromPortalItem(t){return EMe(t)}initialize(){this.when().catch(t=>{ls(t)||xe.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const i=this;"layers"in t&&t.layers.includes(i)?t.layers.remove(i):"tables"in t&&t.tables.includes(i)?t.tables.remove(i):"baseLayers"in t&&t.baseLayers.includes(i)?t.baseLayers.remove(i):"referenceLayers"in t&&t.referenceLayers.includes(i)&&t.referenceLayers.remove(i),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const i=this.parent;return t&&i&&"effectiveVisible"in i&&(t&&=i.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return $r(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Ne(t,{query:{f:"json"},responseType:"json"})).data;throw new W("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],br.prototype,"attributionDataUrl",void 0),c([d({readOnly:!0})],br.prototype,"effectiveVisible",null),c([d({type:bt})],br.prototype,"fullExtent",void 0),c([d({readOnly:!0})],br.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],br.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],br.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],br.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],br.prototype,"opacity",void 0),c([d({clonable:!1})],br.prototype,"parent",void 0),c([d({readOnly:!0})],br.prototype,"parsedUrl",null),c([d({type:Boolean,readOnly:!0})],br.prototype,"persistenceEnabled",void 0),c([d({type:Boolean})],br.prototype,"popupEnabled",void 0),c([d({type:Boolean})],br.prototype,"attributionVisible",void 0),c([d({type:ke})],br.prototype,"spatialReference",void 0),c([d({type:String})],br.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],br.prototype,"type",void 0),c([d()],br.prototype,"url",void 0),c([d({type:io})],br.prototype,"visibilityTimeExtent",void 0),c([d({type:Boolean,nonNullable:!0})],br.prototype,"visible",void 0),br=c([F("esri.layers.Layer")],br);const _f=br;let A3=class{constructor(t=i=>i.values().next().value){this._peeker=t,this._observable=new JS,this._items=new Set}get length(){return ht(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return ht(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const i=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),i!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ht(this._observable),yield*this._items}};const hse=new FinalizationRegistry(e=>{e.close()});function AMe(e,t){hse.register(e,t,t)}function $Me(e){hse.unregister(e)}function pse(e,t){return new Proxy({},{get:(i,r,s)=>(...n)=>{let o,a;const l=n[n.length-1];return CMe(l)&&(o=l.signal,a=l.transferList,n.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),n,{transferList:a,signal:o})}})}function CMe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const RMe={statsWorker:()=>ce(()=>import("./statsWorker-CVQavvKU.js"),__vite__mapDeps([23,24,25,26,1]),import.meta.url),geometryEngineWorker:()=>ce(()=>import("./geometryEngineWorker-PEejU9fo.js"),__vite__mapDeps([27,20,21,1]),import.meta.url),CSVSourceWorker:()=>ce(()=>import("./CSVSourceWorker-yopWTB25.js"),__vite__mapDeps([28,29,30,31,32,33,1,34,35,11,12,36,24,25,26,17,37,38]),import.meta.url),EdgeProcessingWorker:()=>ce(()=>import("./EdgeProcessingWorker-Bt8eg2U5.js"),__vite__mapDeps([39,40,41,42,43,44,45,46,47,48,49,1]),import.meta.url),ElevationSamplerWorker:()=>ce(()=>import("./ElevationSamplerWorker-DYngM-2N.js"),__vite__mapDeps([50,32,51,52,53,54,55,56,57,58,59,41,60,1]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>ce(()=>import("./FeatureServiceSnappingSourceWorker-DCi4Gd8Q.js"),__vite__mapDeps([61,30,31,32,33,1,34,35,11,12,36,24,25,26]),import.meta.url),GeoJSONSourceWorker:()=>ce(()=>import("./GeoJSONSourceWorker-CvEPEwQc.js"),__vite__mapDeps([62,30,31,32,33,1,34,35,11,12,36,24,25,26,63,29,37,38,64]),import.meta.url),LercWorker:()=>ce(()=>import("./LercWorker-BB5htouh.js"),__vite__mapDeps([65,1]),import.meta.url),MemorySourceWorker:()=>ce(()=>import("./MemorySourceWorker-B0m-dx7q.js"),__vite__mapDeps([66,67,30,31,32,33,1,34,35,11,12,36,24,25,26,37,38,64,29]),import.meta.url),PBFDecoderWorker:()=>ce(()=>import("./PBFDecoderWorker-BYQFS9vE.js"),__vite__mapDeps([68,1]),import.meta.url),FeaturePipelineWorker:()=>ce(()=>import("./FeaturePipelineWorker-DdNS6n-m.js"),__vite__mapDeps([69,70,71,72,73,49,12,74,75,76,77,78,43,33,1,79,80,81,82,83,84,34,35,11,36,24,25,26,85,63,29,37,38,64,86,87]),import.meta.url),PointCloudWorker:()=>ce(()=>import("./PointCloudWorker-DCDm3GEV.js"),__vite__mapDeps([88,89,53,90,91,92,93,47,94,54,55,56,95,1]),import.meta.url),RasterWorker:()=>ce(()=>import("./RasterWorker-Ce4vx2IR.js"),__vite__mapDeps([96,97,1,98]),import.meta.url),SceneLayerSnappingSourceWorker:()=>ce(()=>import("./SceneLayerSnappingSourceWorker-CfO3UnDn.js"),__vite__mapDeps([99,100,101,53,95,54,90,102,43,44,45,46,40,41,42,47,48,49,1]),import.meta.url),SceneLayerWorker:()=>ce(()=>import("./SceneLayerWorker-DcnOWwYl.js"),__vite__mapDeps([103,1,51,59,101,53,95,54,90,104,105,57,93,47,106,107,108,78,94,89,55,56]),import.meta.url),WFSSourceWorker:()=>ce(()=>import("./WFSSourceWorker-D8zI1vqg.js"),__vite__mapDeps([109,30,31,32,33,1,34,35,11,12,36,24,25,26,63,29,64,110,111]),import.meta.url),WorkerTileHandler:()=>ce(()=>import("./WorkerTileHandler-SA6A9ZbN.js"),__vite__mapDeps([112,113,76,77,114,115,81,1,116,117,49,82,75]),import.meta.url),Lyr3DWorker:()=>ce(()=>import("./Lyr3DWorker-DQnNuUZT.js"),__vite__mapDeps([118,1]),import.meta.url),Feature3DPipelineWorker:()=>ce(()=>import("./HUDMaterial.glsl-BkDpakUf.js").then(e=>e.F),__vite__mapDeps([119,35,11,12,33,1,36,24,25,26,32,46,120,121,122,43,40,41,42,107,108,47,78,123,101,53,95,54,90,100,124,94,89,55,56,125,48,49,126,102,127,73,128,106,105,57,51,91,129]),import.meta.url)},dse="worker:port-closed";var Ts;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(Ts||(Ts={}));let OMe=0;function fse(){return OMe++}function PMe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function K2(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function V8(e,t,i,r){if(t.type===Ts.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==Ts.INVOKE&&t.type!==Ts.RESPONSE)return void e.postMessage(t);let s;if(PMe(i)?(s=uz(i.transferList),t.data=i.result):(s=uz(r),t.data=i),s){if(le("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case Ts.INVOKE:throw o;case Ts.RESPONSE:return void V8(e,{type:Ts.RESPONSE,jobId:t.jobId,error:K2(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function X2(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function uz(e){if(!e?.length)return null;if(le("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(i=>!LMe(i));return t.length?t:null}function LMe(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"}async function edt(e){try{return await e}catch(t){const i=t?.name===dse;if(!(ls(t)||i))throw t;return}}const{CLOSE:cz,ABORT:hz,INVOKE:pz,RESPONSE:Vb,OPEN_PORT:dz,ON:NMe}=Ts,kMe=2;let DMe=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===Ts.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},rf=class T0{static connect(t,i){const r=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new T0(r.port1,{channel:r,client:s,schedule:i});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),T0.clients.set(n,s),r.port2}static loadWorker(t){const i=RMe[t];return i?i():Promise.resolve(null)}constructor(t,i,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new DMe(s=>this._onInvokeMessage(s)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:cz}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=r?.signal,n=r?.transferList;if(!this._port)return Promise.reject(new W(dse,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:i}));const o=fse();return new Promise((a,l)=>{if(ya(s))return this._processWork(),void l(Oi());const u=ha(s,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),Yi(p.abortHandle),this._post({type:hz,jobId:o}),l(Oi()))}),h={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,h),this._post({type:pz,jobId:o,methodName:t,abortable:s!=null},i,n)})}createInvokeProxy(t){return pse(this,t)}on(t,i){const r=new MessageChannel;function s(n){i(n.data)}return this._port.postMessage({type:Ts.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",s),r.port1.start(),ti(()=>{r.port1.postMessage({type:Ts.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:dz,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=kMe)return;const t=this._jobQueue?.pop();if(!t)return;const{methodName:i,data:r,invokeOptions:s,resolver:n}=t;this.apply(i,r,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Yi(t.abortHandle),t.reject(Oi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,i){const r=X2(t);if(r)switch(r.type){case Vb:this._onResponseMessage(r);break;case pz:i?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case hz:this._onAbortMessage(r);break;case cz:this._onCloseMessage();break;case dz:this._onOpenPortMessage(r);break;case NMe:this._onOnMessage(r)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),i.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&T0.clients.get(this)===t&&t.destroy(),T0.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,u=this._client,h=u[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let f=0;f<p.length-1;f++)u=u[p[f]],h=u[p[f+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=h.apply(u,s)}catch(p){return void this._post({type:Vb,jobId:r,error:K2(p)})}Ac(l)?(a.set(r,{controller:o,promise:l}),l.then(p=>{a.has(r)&&(a.delete(r),this._post({type:Vb,jobId:r},p))},p=>{a.has(r)&&(a.delete(r),ls(p)||this._post({type:Vb,jobId:r,error:K2(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:Vb,jobId:r},l)}_onOpenPortMessage(t){new T0(t.port,{client:this._client})}_onOnMessage(t){const{port:i}=t,r=this._client.on(t.eventType,n=>{i.postMessage(n)}),s=GS(t.port,"message",n=>{X2(n)?.type===Ts.CLOSE&&(s.remove(),r.remove(),i.close())})}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs;if(!n.has(i))return;const o=n.get(i);n.delete(i),this._processWork(),Yi(o.abortHandle),r?o.reject(W.fromJSON(JSON.parse(r))):o.resolve(s)}_post(t,i,r){return V8(this._port,t,i,r)}};rf.kernelInfo={buildDate:xQ,fullVersion:vF,revision:TQ},rf.clients=new Map;let FMe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new A3}destroy(){this.close()}get closed(){return!this._clients?.length}open(t,i){return new Promise((r,s)=>{let n=!0;const o=a=>{wi(i.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Ac(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new rf(u,i,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new rf(l,i,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,i,r){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a?.invoke(t,i,r))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Oi(`Worker closing, aborting job calling '${t.methodName}'`));for(const i of this._clientPromises)i.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,$Me(this)}invoke(t,i,r){return this.apply(t,[i],r)}apply(t,i,r){const s=Do();this._ongoingJobsQueue.push({methodName:t,data:i,invokeOptions:r,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a?.jobAdded())}return s.promise}createInvokeProxy(t){return pse(this,t)}on(t,i){return Promise.all(this._clientPromises).then(()=>jS(this._clients.map(r=>r.on(t,i))))}openPorts(){return new Promise(t=>{const i=new Array(this._clientPromises.length);let r=i.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(i[s]=n.openPort()),--r==0&&t(i)})})}get test(){}};const jMe={async request(e,t){const i=e.options,r=i.responseType;i.signal=t?.signal,i.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&PO(e.url)?.after?r:"array-buffer";const s=await Ne(e.url,i),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},fz={};function UMe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...fz.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=fz.baseUrl),t}let VMe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...r)=>t[i](...r)})}},VM=class{constructor(){this._dispatcher=new VMe,this._workerPostMessage({type:Ts.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){HI(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,i,r){this._dispatcher.addEventListener(t,i,r)}removeEventListener(t,i,r){this._dispatcher.removeEventListener(t,i,r)}_workerPostMessage(t){HI(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const i=X2(t);if(i&&i.type===Ts.OPEN){const{modulePath:r,jobId:s}=i;let n=await rf.loadWorker(r);n||(n=await import(r));const o=rf.connect(n);this._workerPostMessage({type:Ts.OPENED,jobId:s,data:o})}}};const $N=()=>xe.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:GMe}=Ts,BMe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let xT,TT;const mz="Failed to create Worker. Fallback to execute module in main thread";async function zMe(){if(!le("esri-workers"))return yz(new VM);if(!xT&&!TT)try{const t=BMe.split("{CONFIGURATION}").join(qMe());xT=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){TT=t||{}}let e;if(xT)try{e=new Worker(xT,{name:"esri-worker-"+HMe++})}catch{$N().warn(mz,TT),e=new VM}else $N().warn(mz,TT),e=new VM;return yz(e)}async function yz(e){return new Promise(t=>{function i(s){const n=X2(s);n&&n.type===GMe&&(e.removeEventListener("message",i),e.removeEventListener("error",r),t(e))}function r(s){s.preventDefault(),e.removeEventListener("message",i),e.removeEventListener("error",r),$N().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new VM).addEventListener("message",i),e.addEventListener("error",r)}e.addEventListener("message",i),e.addEventListener("error",r)})}function qMe(){let e;if(Kt.default!=null){const s={...Kt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Kt));e.assetsPath=ua(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?ua(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Co(),e.has={"esri-csp-restrictions":le("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":le("esri-2d-update-debug"),"esri-2d-log-updating":le("esri-2d-log-updating"),"featurelayer-pbf":le("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":le("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":le("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":le("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":le("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":le("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":le("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":le("featurelayer-snapshot-enabled"),"esri-atomics":le("esri-atomics"),"esri-shared-array-buffer":le("esri-shared-array-buffer"),"esri-tiles-debug":le("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":le("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":le("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ua(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ua(e.workers.workerPath):e.workers.workerPath=ua(ii("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Kt.workers.loaderConfig,i=UMe({baseUrl:t?.baseUrl,locale:Co(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:i,kernelInfo:{buildDate:xQ,fullVersion:vF,revision:TQ}})}let HMe=0;const{ABORT:gz,INVOKE:WMe,OPEN:JMe,OPENED:ZMe,RESPONSE:Gb}=Ts;let YMe=class mse{static async create(t){const i=await zMe();return new mse(i,t)}constructor(t,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=i,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),xe.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,i={}){const{signal:r}=i,s=fse();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:sF(r,()=>{this._outJobs.delete(s),this._post({type:gz,jobId:s})})};this._outJobs.set(s,a),this._post({type:JMe,jobId:s,modulePath:t})})}_onMessage(t){const i=X2(t);if(i)switch(i.type){case ZMe:this._onOpenedMessage(i);break;case Gb:this._onResponseMessage(i);break;case gz:this._onAbortMessage(i);break;case WMe:this._onInvokeMessage(i)}}_onAbortMessage(t){const i=this._inJobs,r=t.jobId,s=i.get(r);s&&(s.controller&&s.controller.abort(),i.delete(r))}_onInvokeMessage(t){const{methodName:i,jobId:r,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=jMe[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,s,{signal:o?o.signal:null})}catch(h){return void this._post({type:Gb,jobId:r,error:K2(h)})}Ac(u)?(a.set(r,{controller:o,promise:u}),u.then(h=>{a.has(r)&&(a.delete(r),this._post({type:Gb,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),h||(h={message:"Error encountered at method"+i}),ls(h)||this._post({type:Gb,jobId:r,error:K2(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:Gb,jobId:r},u)}_onOpenedMessage(t){const{jobId:i,data:r}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),Yi(s.abortHandle),s.resolve(r))}_onResponseMessage(t){const{jobId:i,error:r,data:s}=t,n=this._outJobs.get(i);n&&(this._outJobs.delete(i),Yi(n.abortHandle),r?n.reject(W.fromJSON(JSON.parse(r))):n.resolve(s))}_post(t,i,r){return V8(this.worker,t,i,r)}};const vz=le("host-browser")?Math.min(navigator.hardwareConcurrency-1,le("workers-pool-size")??8):0;let yy=le("esri-mobile")?Math.min(vz,3):vz;yy||(yy=le("safari")&&le("mac")?7:2);let bz=0;const GM=[];function KMe(){gse()}async function ET(e,t){const i=new FMe,{registryTarget:r,...s}=t;return await i.open(e,s),r&&AMe(r,i),i}async function yse(e,t={}){if(typeof e!="string")throw new W("workers:undefined-module","modulePath is missing");let i=t.strategy||"distributed";if(le("host-webworker")&&!le("esri-workers")&&(i="local"),i==="local"){let r=await rf.loadWorker(e);r||(r=await import(e)),wi(t.signal);const s=t.client||r;return ET([rf.connect(r,t.schedule)],{...t,client:s})}if(await gse(),wi(t.signal),i==="dedicated"){const r=bz++%yy;return ET([await GM[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,yy);if(r<yy){const s=new Array(r);for(let n=0;n<r;++n){const o=bz++%yy;s[n]=GM[o].open(e,t)}return ET(s,t)}}return ET(GM.map(r=>r.open(e,t)),t)}let MT=null;async function gse(){if(MT)return MT;new AbortController;const e=[];for(let t=0;t<yy;t++){const i=YMe.create(t).then(r=>(GM[t]=r,r));e.push(i)}return MT=Promise.all(e),MT}function wz(e,t,i){if(e.hasM==null||e.hasZ)for(const r of t)for(const s of r)s.length>2&&(s[2]*=i)}function XMe(e,t,i){if(!e&&!t||!i)return;const r=u1(i);_z(e,i,r),_z(t,i,r)}function _z(e,t,i){if(e)for(const r of e)QMe(r.geometry,t,i)}function QMe(e,t,i){if(!e?.spatialReference||Xi(e.spatialReference,t))return;const r=u1(e.spatialReference)/i;if(r!==1){if("x"in e)e.z!=null&&(e.z*=r);else if("rings"in e)wz(e,e.rings,r);else if("paths"in e)wz(e,e.paths,r);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=r)}}function G8(e,t,i){if(t==null||i==null||i.vcsWkid||Xi(t,i)||Qd(t)||Qd(i))return null;const r=u1(t)/u1(i);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>eIe(s,r);case"polyline":case"esriGeometryPolyline":return s=>iIe(s,r);case"polygon":case"esriGeometryPolygon":return s=>tIe(s,r);case"multipoint":case"esriGeometryMultipoint":return s=>rIe(s,r);case"extent":case"esriGeometryEnvelope":return s=>sIe(s,r);default:return null}}function eIe(e,t){e?.z!=null&&(e.z*=t)}function tIe(e,t){if(e)for(const i of e.rings)for(const r of i)r.length>2&&(r[2]*=t)}function iIe(e,t){if(e)for(const i of e.paths)for(const r of i)r.length>2&&(r[2]*=t)}function rIe(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function sIe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function CN(e,t,i){if(!i?.features||!i.hasZ)return;const r=G8(i.geometryType,t,e.outSpatialReference);if(r!=null)for(const s of i.features)r(s.geometry)}const nIe=new gt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var RN;const oIe=new gt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let on=RN=class extends ae{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?.value??null}readValueType(e,{description:t}){let i=null;try{i=t?JSON.parse(t):null}catch{}return i?oIe.fromJSON(i.fieldValueType):null}clone(){return new RN({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],on.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],on.prototype,"defaultValue",void 0),c([d()],on.prototype,"description",void 0),c([ue("description")],on.prototype,"readDescription",null),c([d({types:ise,json:{read:{reader:rC},write:!0}})],on.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],on.prototype,"editable",void 0),c([d({type:vt,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],on.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],on.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],on.prototype,"nullable",void 0),c([Ue(nIe)],on.prototype,"type",void 0),c([d()],on.prototype,"valueType",void 0),c([ue("valueType",["description"])],on.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],on.prototype,"visible",void 0),on=RN=c([F("esri.layers.support.Field")],on);const na=on;var ON;const PN=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let vs=ON=class extends ae{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const i=ke.fromJSON(t.spatialReference),r=[];for(let s=0;s<e.length;s++){const n=e[s],o=nl.fromJSON(n),a=n.geometry?.spatialReference;o.geometry==null||a||(o.geometry.spatialReference=i);const l=n.aggregateGeometries,u=o.aggregateGeometries;if(l&&u!=null)for(const h in u){const p=u[h],f=l[h],m=f?.spatialReference;p==null||m||(p.spatialReference=i)}r.push(o)}return r}writeGeometryType(e,t,i,r){if(e)return void PN.write(e,t,i,r);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void PN.write(n.geometry.type,t,i,r)}}readQueryGeometry(e,t){if(!e)return null;const i=!!e.spatialReference,r=or(e);return r&&!i&&t.spatialReference&&(r.spatialReference=ke.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:i}=this;if(i){for(const r of i)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new ON(this.cloneProperties())}cloneProperties(){return K({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let i=0;i<t.features.length;i++){const r=t.features[i];if(r.geometry){const s=e?.[i];r.geometry=s?.toJSON()||r.geometry}}return t}quantize(e){const{scale:[t,i],translate:[r,s]}=e,n=u=>Math.round((u-r)/t),o=u=>Math.round((s-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let u=0,h=a.length;u<h;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:i}=this;if(!i)return this;const{translate:[r,s],scale:[n,o]}=i,a=f=>f*n+r,l=f=>s-f*o;let u=null,h=null;if(this.hasZ&&i?.scale?.[2]!=null){const{translate:[,,f],scale:[,,m]}=i;u=g=>g*m+f}if(this.hasM&&i?.scale?.[3]!=null){const{translate:[,,,f],scale:[,,,m]}=i;h=g=>g==null?g:g*m+f}const p=this._getHydrationFunction(e,a,l,u,h);for(const{geometry:f}of t)f!=null&&p&&p(f);return this.transform=null,this}_quantizePoints(e,t,i){let r,s;const n=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),h=i(l[1]);u===r&&h===s||(n.push([u-r,h-s]),r=u,s=h)}else r=t(l[0]),s=i(l[1]),n.push([r,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,i){return e==="point"?r=>(r.x=t(r.x),r.y=i(r.y),r):e==="polyline"||e==="polygon"?r=>{const s=zh(r)?r.rings:r.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._quantizePoints(l,t,i);u&&n.push(u)}return n.length>0?(zh(r)?r.rings=n:r.paths=n,r):null}:e==="multipoint"?r=>{const s=this._quantizePoints(r.points,t,i);return s&&s.length>0?(r.points=s,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,i,r,s){return e==="point"?n=>{n.x=t(n.x),n.y=i(n.y),r&&(n.z=r(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=zh(n)?n.rings:n.paths;let a,l;for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];f>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=i(l)}}if(r&&s)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=r(g[2]),g[3]=s(g[3])}}else if(r)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=r(g[2])}}else if(s)for(let u=0,h=o.length;u<h;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=s(g[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=i(n.ymin),n.xmax=t(n.xmax),n.ymax=i(n.ymax),r&&n.zmax!=null&&n.zmin!=null&&(n.zmax=r(n.zmax),n.zmin=r(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let a,l;for(let u=0,h=o.length;u<h;u++){const p=o[u];u>0?(a+=p[0],l+=p[1]):(a=p[0],l=p[1]),p[0]=t(a),p[1]=i(l)}if(r&&s)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=r(p[2]),p[3]=s(p[3])}else if(r)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=r(p[2])}else if(s)for(let u=0,h=o.length;u<h;u++){const p=o[u];p[2]=s(p[2])}}:null}};c([d({type:String,json:{write:!0}})],vs.prototype,"displayFieldName",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vs.prototype,"exceededTransferLimit",void 0),c([d({type:[nl],json:{write:!0}})],vs.prototype,"features",void 0),c([ue("features")],vs.prototype,"readFeatures",null),c([d({type:[na],json:{write:!0}})],vs.prototype,"fields",void 0),c([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:PN.read}}})],vs.prototype,"geometryType",void 0),c([ge("geometryType")],vs.prototype,"writeGeometryType",null),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vs.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vs.prototype,"hasZ",void 0),c([d({types:cs,json:{write:!0}})],vs.prototype,"queryGeometry",void 0),c([ue("queryGeometry")],vs.prototype,"readQueryGeometry",null),c([d({type:ke,json:{write:!0}})],vs.prototype,"spatialReference",void 0),c([ge("spatialReference")],vs.prototype,"writeSpatialReference",null),c([d({json:{write:!0}})],vs.prototype,"transform",void 0),vs=ON=c([F("esri.rest.support.FeatureSet")],vs),vs.prototype.toJSON.isDefaultToJSON=!0;const Sg=vs;let aIe=0,xh=class extends mc.LoadableMixin(v$(Be)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,i={}){await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);CN(t,this.layer.spatialReference,r);const s=Sg.fromJSON(r);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,i={}){if(this._requiresClientGraphicMapping())throw new W("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const r=await this._connection.invoke("queryFeatures",t?t.toJSON():null,i);return CN(t,this.layer.spatialReference,r),r}queryFeatureCount(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,i))}queryObjectIds(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,i))}queryExtent(t,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,i)).then(r=>({count:r.count,extent:bt.fromJSON(r.extent)}))}querySnapping(t,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",t,i))}async _applyEdits(t){if(!this._connection)throw new W("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let r=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(t.addFeatures&&(r=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const h of t.deleteFeatures){const p=o(h);p!=null&&s.push(p)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const h of t.updateFeatures)if(n.push(this._serializeFeature(h)),a){const p=o(h);p!=null&&a.set(p,h)}}XMe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:s});return this.fullExtent=l,r&&r.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(t,i){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const r=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||r.push(s.load({signal:i}));r.length&&await Promise.all(r)}_updateClientGraphicIds(t,i){if(this._idToClientGraphic){if(t)for(const r of i.updateResults){if(!r.success)continue;const s=t.get(r.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const r of i.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const i=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:i?new W("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(t){const i=new Map,r=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const a=t[o],l=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),r[o]=l,i.set(`${l.uid}`,a)}const n=this;return{features:r,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const u=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),u===-1?delete h.attributes[a]:h.attributes[a]=u,n._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,r=t.attributes?.[i];r!=null&&this._idToClientGraphic.set(r,t)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:i}=t,r=this._geometryForSerialization(t),s=(aIe++).toString();return r?{uid:s,geometry:r.toJSON(),attributes:i}:{uid:s,attributes:i}}_geometryForSerialization(t){const{geometry:i}=t;return i==null?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Rs.fromExtent(i.extent):null:i}async _startWorker(t){this._connection=await yse("MemorySourceWorker",{strategy:le("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:i,spatialReference:r,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const h=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{xe.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const p={features:h.features,fields:i?.map(g=>g.toJSON()),geometryType:fV.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:u?null:r&&r.toJSON(),timeInfo:a?.toJSON()??null,dateFieldsTimeZone:l},f=await this._connection.invoke("load",p,{signal:t});for(const g of f.warnings)xe.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});f.featureErrors.length&&xe.getLogger(this.layer).warn("#load()",`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:f.featureErrors});const m=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(m.geometryType=fV.toJSON(h.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(f.assignedObjectIds)}};c([bF({Type:nl,ensureType:bi(nl)})],xh.prototype,"itemType",void 0),c([d()],xh.prototype,"type",void 0),c([d({constructOnly:!0})],xh.prototype,"layer",void 0),c([d({readOnly:!0})],xh.prototype,"_workerGeometryType",null),c([d()],xh.prototype,"sourceJSON",void 0),xh=c([F("esri.layers.graphics.sources.MemorySource")],xh);function lIe(e){return"portalItem"in e}const B8=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):lIe(this)?this.portalItem?.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([d({type:String})],t.prototype,"apiKey",null),t=c([F("esri.layers.mixins.APIKeyMixin")],t),t},vse={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},bse=Object.values(vse),wse=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${bse.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),uIe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${bse.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),cIe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function hIe(e){return wse.test(e)}function ip(e){if(e==null)return null;const t=$r(e),i=t?.path.match(wse)||t?.path.match(uIe);if(!i)return null;const[,r,s,n,o]=i,a=s.indexOf("/");return{title:z8(a!==-1?s.slice(a+1):s),serverType:vse[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function pIe(e){const t=$r(e).path.match(cIe);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function z8(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function dIe(e,t){const i=[];if(e){const r=ip(e);r!=null&&r.title&&i.push(r.title)}if(t){const r=z8(t);i.push(r)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function q8(e){let t=Za(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function fIe(e,t){return e&&wQ(_Q(e,t))}function mIe(e){let{url:t}=e;if(!t)return{url:t};t=_Q(t,e.logger);const i=$r(t),r=ip(i.path);let s;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(s=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const n=pIe(i.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:wQ(t),layerId:s}}function yIe(e,t,i,r,s){Zy(t,r,"url",s),r.url&&e.layerId!=null&&(r.url=ep(r.url,i,e.layerId.toString()))}function gIe(e){if(!e)return!1;const t=e.toLowerCase(),i=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return i&&(r||s||n)}const sC=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=ip(this.url);if(i!=null&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",fIe(i,xe.getLogger(this)))}};return c([d()],t.prototype,"title",null),c([d({type:String})],t.prototype,"url",null),t=c([F("esri.layers.mixins.ArcGISService")],t),t};function nC(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function vIe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function bIe(e,t,i,r,s,n,o,a,l,u,h,p,f,m,g,b){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=i,w[3]=r,w[4]=s,w[5]=n,w[6]=o,w[7]=a,w[8]=l,w[9]=u,w[10]=h,w[11]=p,w[12]=f,w[13]=m,w[14]=g,w[15]=b,w}function wIe(e,t){return new Float32Array(e,t,16)}const _Ie=nC();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:_Ie,clone:vIe,create:nC,createView:wIe,fromValues:bIe},Symbol.toStringTag,{value:"Module"}));function _se(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Sf(e,t,i,r,s,n,o,a,l,u,h,p,f,m,g,b,w){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=h,e[10]=p,e[11]=f,e[12]=m,e[13]=g,e[14]=b,e[15]=w,e}function oC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xf(e,t){if(e===t){const i=t[1],r=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function SIe(e,t){return Sse(e,t)||oC(e),e}function Sse(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15],T=i*a-r*o,x=i*l-s*o,_=i*u-n*o,M=r*l-s*a,I=r*u-n*a,A=s*u-n*l,C=h*b-p*g,R=h*w-f*g,O=h*S-m*g,k=p*w-f*b,L=p*S-m*b,V=f*S-m*w;let J=T*V-x*L+_*k+M*O-I*R+A*C;return J?(J=1/J,e[0]=(a*V-l*L+u*k)*J,e[1]=(s*L-r*V-n*k)*J,e[2]=(b*A-w*I+S*M)*J,e[3]=(f*I-p*A-m*M)*J,e[4]=(l*O-o*V-u*R)*J,e[5]=(i*V-s*O+n*R)*J,e[6]=(w*_-g*A-S*x)*J,e[7]=(h*A-f*_+m*x)*J,e[8]=(o*L-a*O+u*C)*J,e[9]=(r*O-i*L-n*C)*J,e[10]=(g*I-b*_+S*T)*J,e[11]=(p*_-h*I-m*T)*J,e[12]=(a*R-o*k-l*C)*J,e[13]=(i*k-r*R+s*C)*J,e[14]=(b*x-g*M-w*T)*J,e[15]=(h*M-p*x+f*T)*J,e):null}function xIe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15];return e[0]=a*(f*S-m*w)-p*(l*S-u*w)+b*(l*m-u*f),e[1]=-(r*(f*S-m*w)-p*(s*S-n*w)+b*(s*m-n*f)),e[2]=r*(l*S-u*w)-a*(s*S-n*w)+b*(s*u-n*l),e[3]=-(r*(l*m-u*f)-a*(s*m-n*f)+p*(s*u-n*l)),e[4]=-(o*(f*S-m*w)-h*(l*S-u*w)+g*(l*m-u*f)),e[5]=i*(f*S-m*w)-h*(s*S-n*w)+g*(s*m-n*f),e[6]=-(i*(l*S-u*w)-o*(s*S-n*w)+g*(s*u-n*l)),e[7]=i*(l*m-u*f)-o*(s*m-n*f)+h*(s*u-n*l),e[8]=o*(p*S-m*b)-h*(a*S-u*b)+g*(a*m-u*p),e[9]=-(i*(p*S-m*b)-h*(r*S-n*b)+g*(r*m-n*p)),e[10]=i*(a*S-u*b)-o*(r*S-n*b)+g*(r*u-n*a),e[11]=-(i*(a*m-u*p)-o*(r*m-n*p)+h*(r*u-n*a)),e[12]=-(o*(p*w-f*b)-h*(a*w-l*b)+g*(a*f-l*p)),e[13]=i*(p*w-f*b)-h*(r*w-s*b)+g*(r*f-s*p),e[14]=-(i*(a*w-l*b)-o*(r*w-s*b)+g*(r*l-s*a)),e[15]=i*(a*f-l*p)-o*(r*f-s*p)+h*(r*l-s*a),e}function TIe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],p=e[10],f=e[11],m=e[12],g=e[13],b=e[14],w=e[15];return(t*o-i*n)*(p*w-f*b)-(t*a-r*n)*(h*w-f*g)+(t*l-s*n)*(h*b-p*g)+(i*a-r*o)*(u*w-f*m)-(i*l-s*o)*(u*b-p*m)+(r*l-s*a)*(u*g-h*m)}function xse(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],p=t[8],f=t[9],m=t[10],g=t[11],b=t[12],w=t[13],S=t[14],T=t[15];let x=i[0],_=i[1],M=i[2],I=i[3];return e[0]=x*r+_*a+M*p+I*b,e[1]=x*s+_*l+M*f+I*w,e[2]=x*n+_*u+M*m+I*S,e[3]=x*o+_*h+M*g+I*T,x=i[4],_=i[5],M=i[6],I=i[7],e[4]=x*r+_*a+M*p+I*b,e[5]=x*s+_*l+M*f+I*w,e[6]=x*n+_*u+M*m+I*S,e[7]=x*o+_*h+M*g+I*T,x=i[8],_=i[9],M=i[10],I=i[11],e[8]=x*r+_*a+M*p+I*b,e[9]=x*s+_*l+M*f+I*w,e[10]=x*n+_*u+M*m+I*S,e[11]=x*o+_*h+M*g+I*T,x=i[12],_=i[13],M=i[14],I=i[15],e[12]=x*r+_*a+M*p+I*b,e[13]=x*s+_*l+M*f+I*w,e[14]=x*n+_*u+M*m+I*S,e[15]=x*o+_*h+M*g+I*T,e}function EIe(e,t,i){const r=i[0],s=i[1],n=i[2];if(t===e)e[12]=t[0]*r+t[4]*s+t[8]*n+t[12],e[13]=t[1]*r+t[5]*s+t[9]*n+t[13],e[14]=t[2]*r+t[6]*s+t[10]*n+t[14],e[15]=t[3]*r+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],l=t[2],u=t[3],h=t[4],p=t[5],f=t[6],m=t[7],g=t[8],b=t[9],w=t[10],S=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=h,e[5]=p,e[6]=f,e[7]=m,e[8]=g,e[9]=b,e[10]=w,e[11]=S,e[12]=o*r+h*s+g*n+t[12],e[13]=a*r+p*s+b*n+t[13],e[14]=l*r+f*s+w*n+t[14],e[15]=u*r+m*s+S*n+t[15]}return e}function MIe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function IIe(e,t,i,r){let s=r[0],n=r[1],o=r[2],a=Math.sqrt(s*s+n*n+o*o);if(a<=to())return void _se(e,t);a=1/a,s*=a,n*=a,o*=a;const l=Math.sin(i),u=Math.cos(i),h=1-u,p=t[0],f=t[1],m=t[2],g=t[3],b=t[4],w=t[5],S=t[6],T=t[7],x=t[8],_=t[9],M=t[10],I=t[11],A=s*s*h+u,C=n*s*h+o*l,R=o*s*h-n*l,O=s*n*h-o*l,k=n*n*h+u,L=o*n*h+s*l,V=s*o*h+n*l,J=n*o*h-s*l,y=o*o*h+u;e[0]=p*A+b*C+x*R,e[1]=f*A+w*C+_*R,e[2]=m*A+S*C+M*R,e[3]=g*A+T*C+I*R,e[4]=p*O+b*k+x*L,e[5]=f*O+w*k+_*L,e[6]=m*O+S*k+M*L,e[7]=g*O+T*k+I*L,e[8]=p*V+b*J+x*y,e[9]=f*V+w*J+_*y,e[10]=m*V+S*J+M*y,e[11]=g*V+T*J+I*y,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15])}function AIe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+u*r,e[5]=o*s+h*r,e[6]=a*s+p*r,e[7]=l*s+f*r,e[8]=u*s-n*r,e[9]=h*s-o*r,e[10]=p*s-a*r,e[11]=f*s-l*r,e}function $Ie(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],l=t[3],u=t[8],h=t[9],p=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-u*r,e[1]=o*s-h*r,e[2]=a*s-p*r,e[3]=l*s-f*r,e[8]=n*r+u*s,e[9]=o*r+h*s,e[10]=a*r+p*s,e[11]=l*r+f*s,e}function CIe(e,t,i){const r=Math.sin(i),s=Math.cos(i),n=t[0],o=t[1],a=t[2],l=t[3],u=t[4],h=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+u*r,e[1]=o*s+h*r,e[2]=a*s+p*r,e[3]=l*s+f*r,e[4]=u*s-n*r,e[5]=h*s-o*r,e[6]=p*s-a*r,e[7]=f*s-l*r,e}function RIe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function OIe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function PIe(e,t,i){if(t===0)return oC(e);let r=i[0],s=i[1],n=i[2],o=Math.sqrt(r*r+s*s+n*n);if(o<=to())return null;o=1/o,r*=o,s*=o,n*=o;const a=Math.sin(t),l=Math.cos(t),u=1-l;return e[0]=r*r*u+l,e[1]=s*r*u+n*a,e[2]=n*r*u-s*a,e[3]=0,e[4]=r*s*u-n*a,e[5]=s*s*u+l,e[6]=n*s*u+r*a,e[7]=0,e[8]=r*n*u+s*a,e[9]=s*n*u-r*a,e[10]=n*n*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function LIe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function NIe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function kIe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Tse(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=r+r,l=s+s,u=n+n,h=r*a,p=r*l,f=r*u,m=s*l,g=s*u,b=n*u,w=o*a,S=o*l,T=o*u;return e[0]=1-(m+b),e[1]=p+T,e[2]=f-S,e[3]=0,e[4]=p-T,e[5]=1-(h+b),e[6]=g+w,e[7]=0,e[8]=f+S,e[9]=g-w,e[10]=1-(h+m),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function DIe(e,t){const i=FIe,r=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],p=r*r+s*s+n*n+o*o;return p>0?(i[0]=2*(a*o+h*r+l*n-u*s)/p,i[1]=2*(l*o+h*s+u*r-a*n)/p,i[2]=2*(u*o+h*n+a*s-l*r)/p):(i[0]=2*(a*o+h*r+l*n-u*s),i[1]=2*(l*o+h*s+u*r-a*n),i[2]=2*(u*o+h*n+a*s-l*r)),Tse(e,t,i),e}const FIe=yf();function jIe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function UIe(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return e[0]=Math.sqrt(i*i+r*r+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+h*h),e}function VIe(e,t){const i=t[0]+t[5]+t[10];let r=0;return i>0?(r=2*Math.sqrt(i+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function GIe(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,u=n+n,h=o+o,p=s*l,f=s*u,m=s*h,g=n*u,b=n*h,w=o*h,S=a*l,T=a*u,x=a*h,_=r[0],M=r[1],I=r[2];return e[0]=(1-(g+w))*_,e[1]=(f+x)*_,e[2]=(m-T)*_,e[3]=0,e[4]=(f-x)*M,e[5]=(1-(p+w))*M,e[6]=(b+S)*M,e[7]=0,e[8]=(m+T)*I,e[9]=(b-S)*I,e[10]=(1-(p+g))*I,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function BIe(e,t,i,r,s){const n=t[0],o=t[1],a=t[2],l=t[3],u=n+n,h=o+o,p=a+a,f=n*u,m=n*h,g=n*p,b=o*h,w=o*p,S=a*p,T=l*u,x=l*h,_=l*p,M=r[0],I=r[1],A=r[2],C=s[0],R=s[1],O=s[2],k=(1-(b+S))*M,L=(m+_)*M,V=(g-x)*M,J=(m-_)*I,y=(1-(f+S))*I,E=(w+T)*I,$=(g+x)*A,P=(w-T)*A,G=(1-(f+b))*A;return e[0]=k,e[1]=L,e[2]=V,e[3]=0,e[4]=J,e[5]=y,e[6]=E,e[7]=0,e[8]=$,e[9]=P,e[10]=G,e[11]=0,e[12]=i[0]+C-(k*C+J*R+$*O),e[13]=i[1]+R-(L*C+y*R+P*O),e[14]=i[2]+O-(V*C+E*R+G*O),e[15]=1,e}function zIe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,p=r*a,f=s*o,m=s*a,g=s*l,b=n*o,w=n*a,S=n*l;return e[0]=1-p-g,e[1]=h+S,e[2]=f-w,e[3]=0,e[4]=h-S,e[5]=1-u-g,e[6]=m+b,e[7]=0,e[8]=f+w,e[9]=m-b,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function qIe(e,t,i,r,s,n,o){const a=1/(i-t),l=1/(s-r),u=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(i+t)*a,e[9]=(s+r)*l,e[10]=(o+n)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*u,e[15]=0,e}function HIe(e,t,i,r,s){const n=1/Math.tan(t/2);let o;return e[0]=n/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(r-s),e[10]=(s+r)*o,e[14]=2*s*r*o):(e[10]=-1,e[14]=-2*r),e}function WIe(e,t,i,r){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*u*.5,e[10]=r/(i-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*i/(i-r),e[15]=0,e}function JIe(e,t,i,r,s,n,o){const a=1/(t-i),l=1/(r-s),u=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*a,e[13]=(s+r)*l,e[14]=(o+n)*u,e[15]=1,e}function ZIe(e,t,i,r){const s=t[0],n=t[1],o=t[2];let a=s-i[0],l=n-i[1],u=o-i[2];const h=to();if(Math.abs(a)<h&&Math.abs(l)<h&&Math.abs(u)<h)return void oC(e);let p=1/Math.sqrt(a*a+l*l+u*u);a*=p,l*=p,u*=p;const f=r[0],m=r[1],g=r[2];let b=m*u-g*l,w=g*a-f*u,S=f*l-m*a;p=Math.sqrt(b*b+w*w+S*S),p?(p=1/p,b*=p,w*=p,S*=p):(b=0,w=0,S=0);let T=l*S-u*w,x=u*b-a*S,_=a*w-l*b;p=Math.sqrt(T*T+x*x+_*_),p?(p=1/p,T*=p,x*=p,_*=p):(T=0,x=0,_=0),e[0]=b,e[1]=T,e[2]=a,e[3]=0,e[4]=w,e[5]=x,e[6]=l,e[7]=0,e[8]=S,e[9]=_,e[10]=u,e[11]=0,e[12]=-(b*s+w*n+S*o),e[13]=-(T*s+x*n+_*o),e[14]=-(a*s+l*n+u*o),e[15]=1}function YIe(e,t,i,r){const s=t[0],n=t[1],o=t[2],a=r[0],l=r[1],u=r[2];let h=s-i[0],p=n-i[1],f=o-i[2],m=h*h+p*p+f*f;m>0&&(m=1/Math.sqrt(m),h*=m,p*=m,f*=m);let g=l*f-u*p,b=u*h-a*f,w=a*p-l*h;return m=g*g+b*b+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,b*=m,w*=m),e[0]=g,e[1]=b,e[2]=w,e[3]=0,e[4]=p*w-f*b,e[5]=f*g-h*w,e[6]=h*b-p*g,e[7]=0,e[8]=h,e[9]=p,e[10]=f,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function KIe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function XIe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function QIe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function Ese(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function e3e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function t3e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e[9]=t[9]+i[9]*r,e[10]=t[10]+i[10]*r,e[11]=t[11]+i[11]*r,e[12]=t[12]+i[12]*r,e[13]=t[13]+i[13]*r,e[14]=t[14]+i[14]*r,e[15]=t[15]+i[15]*r,e}function i3e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function r3e(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],m=e[11],g=e[12],b=e[13],w=e[14],S=e[15],T=t[0],x=t[1],_=t[2],M=t[3],I=t[4],A=t[5],C=t[6],R=t[7],O=t[8],k=t[9],L=t[10],V=t[11],J=t[12],y=t[13],E=t[14],$=t[15],P=to();return Math.abs(i-T)<=P*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(r-x)<=P*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(s-_)<=P*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(n-M)<=P*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-I)<=P*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(a-A)<=P*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-C)<=P*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-R)<=P*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(h-O)<=P*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-k)<=P*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(f-L)<=P*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-V)<=P*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(g-J)<=P*Math.max(1,Math.abs(g),Math.abs(J))&&Math.abs(b-y)<=P*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(w-E)<=P*Math.max(1,Math.abs(w),Math.abs(E))&&Math.abs(S-$)<=P*Math.max(1,Math.abs(S),Math.abs($))}function s3e(e){const t=to(),i=e[0],r=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return Math.abs(1-(i*i+n*n+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}function n3e(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const o3e=xse,a3e=Ese;Object.freeze(Object.defineProperty({__proto__:null,add:QIe,adjoint:xIe,copy:_se,determinant:TIe,equals:r3e,exactEquals:i3e,frob:XIe,fromQuat:zIe,fromQuat2:DIe,fromRotation:PIe,fromRotationTranslation:Tse,fromRotationTranslationScale:GIe,fromRotationTranslationScaleOrigin:BIe,fromScaling:OIe,fromTranslation:RIe,fromXRotation:LIe,fromYRotation:NIe,fromZRotation:kIe,frustum:qIe,getRotation:VIe,getScaling:UIe,getTranslation:jIe,hasIdentityRotation:n3e,identity:oC,invert:Sse,invertOrIdentity:SIe,isOrthoNormal:s3e,lookAt:ZIe,mul:o3e,multiply:xse,multiplyScalar:e3e,multiplyScalarAndAdd:t3e,ortho:JIe,perspective:HIe,perspectiveFromFieldOfView:WIe,rotate:IIe,rotateX:AIe,rotateY:$Ie,rotateZ:CIe,scale:MIe,set:Sf,str:KIe,sub:a3e,subtract:Ese,targetTo:YIe,translate:EIe,transpose:xf},Symbol.toStringTag,{value:"Module"}));const l3e=(e,t)=>{const i=Sf(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return xf(i,i)},u3e=(e,t)=>{const i=Sf(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return xf(i,i)},c3e=(e,t)=>{const i=1-t,r=Sf(e,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return xf(r,r)},h3e=(e,t)=>{const i=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),s=Sf(e,.213+.787*r-.213*i,.715-.715*r-.715*i,.072-.072*r+.928*i,0,.213-.213*r+.143*i,.715+.285*r+.14*i,.072-.072*r-.283*i,0,.213-.213*r-.787*i,.715-.715*r+.715*i,.072+.928*r+.072*i,0,0,0,0,1);return xf(s,s)},p3e=(e,t)=>{const i=1-2*t,r=Sf(e,i,0,0,t,0,i,0,t,0,0,i,t,0,0,0,1);return xf(r,r)},d3e=(e,t)=>{const i=Sf(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return xf(i,i)},f3e=(e,t)=>{const i=1-t,r=Sf(e,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return xf(r,r)};let Mse=class Ise{constructor(t,i,r){this.strength=t,this.radius=i,this.threshold=r,this.type="bloom"}interpolate(t,i,r){this.strength=bo(t.strength,i.strength,r),this.radius=bo(t.radius,i.radius,r),this.threshold=bo(t.threshold,i.threshold,r)}clone(){return new Ise(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:J_(this.radius),strength:this.strength,threshold:this.threshold}}},Ase=class $se{constructor(t){this.radius=t,this.type="blur"}interpolate(t,i,r){this.radius=Math.round(bo(t.radius,i.radius,r))}clone(){return new $se(this.radius)}toJSON(){return{type:"blur",radius:J_(this.radius)}}},LN=class Cse{constructor(t,i){this.type=t,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.amount=bo(t.amount,i.amount,r),this._updateMatrix()}clone(){return new Cse(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||nC();switch(this.type){case"brightness":this._colorMatrix=l3e(t,this.amount);break;case"contrast":this._colorMatrix=u3e(t,this.amount);break;case"grayscale":this._colorMatrix=c3e(t,this.amount);break;case"invert":this._colorMatrix=p3e(t,this.amount);break;case"saturate":this._colorMatrix=d3e(t,this.amount);break;case"sepia":this._colorMatrix=f3e(t,this.amount)}}},Rse=class Ose{constructor(t,i,r,s){this.offsetX=t,this.offsetY=i,this.blurRadius=r,this.color=s,this.type="drop-shadow"}interpolate(t,i,r){this.offsetX=bo(t.offsetX,i.offsetX,r),this.offsetY=bo(t.offsetY,i.offsetY,r),this.blurRadius=bo(t.blurRadius,i.blurRadius,r),this.color[0]=Math.round(bo(t.color[0],i.color[0],r)),this.color[1]=Math.round(bo(t.color[1],i.color[1],r)),this.color[2]=Math.round(bo(t.color[2],i.color[2],r)),this.color[3]=bo(t.color[3],i.color[3],r)}clone(){return new Ose(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:J_(this.offsetX),yoffset:J_(this.offsetY),blurRadius:J_(this.blurRadius),color:t}}},Pse=class Lse{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,i,r){this.angle=bo(t.angle,i.angle,r),this._updateMatrix()}clone(){return new Lse(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||nC();this._colorMatrix=h3e(t,this.angle)}},Nse=class kse{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,i,r){this.amount=bo(t.amount,i.amount,r)}clone(){return new kse(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function bo(e,t,i){return e+(t-e)*i}function J_(e){return Math.round(1e3*sl(e))/1e3}function m3e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new LN(e.type,0);case"saturate":case"brightness":case"contrast":return new LN(e.type,1);case"opacity":return new Nse(1);case"hue-rotate":return new Pse(0);case"blur":return new Ase(0);case"drop-shadow":return new Rse(0,0,0,[...LF("transparent")]);case"bloom":return new Mse(0,0,1)}}function y3e(e,t){const i=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,s)=>r.type===i[s].type)}function g3e(e,t){const i=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let s=r.length;s<i.length;s++)r.push(m3e(i[s]))}function v3e(e){const t=e[0];return!!t&&"type"in t}function b3e(e,t){function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i}function Dv(e,t,i,r){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,Dv.prototype),s.expected=t,s.found=i,s.location=r,s.name="SyntaxError",s}function w4(e,t,i){return i=i||" ",e.length>t?e:(t-=e.length,e+(i+=i.repeat(t)).slice(0,t))}function w3e(e,t){var i,r={},s=(t=t!==void 0?t:{}).grammarSource,n={start:Zx},o=Zx,a="none",l=")",u=",",h="(",p="%",f="px",m="cm",g="mm",b="in",w="pt",S="pc",T="deg",x="rad",_="grad",M="turn",I="#",A=".",C="e",R=/^[ \t\n\r]/,O=/^[a-z\-]/,k=/^[0-9a-fA-F]/,L=/^[+\-]/,V=/^[0-9]/,J=pl("none"),y=xi("none",!1),E=xi(")",!1),$=xi(",",!1),P=pl("whitespace"),G=jf([" ","	",`
`,"\r"],!1,!1),Q=pl("function"),se=xi("(",!1),ie=pl("identifier"),ye=jf([["a","z"],"-"],!1,!1),Pe=pl("percentage"),Ie=xi("%",!1),we=pl("length"),De=xi("px",!1),Ze=xi("cm",!1),et=xi("mm",!1),nt=xi("in",!1),$t=xi("pt",!1),zt=xi("pc",!1),Y=pl("angle"),B=xi("deg",!1),re=xi("rad",!1),fe=xi("grad",!1),ve=xi("turn",!1),D=pl("number"),q=pl("color"),N=xi("#",!1),U=jf([["0","9"],["a","f"],["A","F"]],!1,!1),H=jf(["+","-"],!1,!1),ne=jf([["0","9"]],!1,!1),me=xi(".",!1),pe=xi("e",!1),Z=function(){return[]},te=function(X,Se){return{type:"function",name:X,parameters:Se||[]}},Ee=function(X,Se){return Se.length>0?I5(X,Se,3):[X]},Fe=function(X){return{type:"quantity",value:X.value,unit:X.unit}},Tt=function(X){return{type:"color",colorType:X.type,value:X.value}},Wt=function(X){return X},Gt=function(){return Ng()},Qt=function(X){return{value:X,unit:"%"}},be=function(X){return{value:X,unit:"px"}},Ye=function(X){return{value:X,unit:"cm"}},tt=function(X){return{value:X,unit:"mm"}},Pt=function(X){return{value:X,unit:"in"}},jt=function(X){return{value:X,unit:"pt"}},Rr=function(X){return{value:X,unit:"pc"}},ds=function(X){return{value:X,unit:"deg"}},_a=function(X){return{value:X,unit:"rad"}},du=function(X){return{value:X,unit:"grad"}},hl=function(X){return{value:X,unit:"turn"}},Ff=function(X){return{value:X,unit:null}},fp=function(){return{type:"hex",value:Ng()}},fu=function(X){return{type:"function",value:X}},Ib=function(){return{type:"named",value:Ng()}},mp=function(){return parseFloat(Ng())},he=0|t.peg$currPos,ni=he,yp=[{line:1,column:1}],zo=he,Lg=t.peg$maxFailExpected||[],it=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in n))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');o=n[t.startRule]}function Ng(){return e.substring(ni,he)}function xi(X,Se){return{type:"literal",text:X,ignoreCase:Se}}function jf(X,Se,$e){return{type:"class",parts:X,inverted:Se,ignoreCase:$e}}function v5(){return{type:"end"}}function pl(X){return{type:"other",description:X}}function Wx(X){var Se,$e=yp[X];if($e)return $e;if(X>=yp.length)Se=yp.length-1;else for(Se=X;!yp[--Se];);for($e={line:($e=yp[Se]).line,column:$e.column};Se<X;)e.charCodeAt(Se)===10?($e.line++,$e.column=1):$e.column++,Se++;return yp[X]=$e,$e}function Jx(X,Se,$e){var Et=Wx(X),pi=Wx(Se);return{source:s,start:{offset:X,line:Et.line,column:Et.column},end:{offset:Se,line:pi.line,column:pi.column}}}function St(X){he<zo||(he>zo&&(zo=he,Lg=[]),Lg.push(X))}function b5(X,Se,$e){return new Dv(Dv.buildMessage(X,Se),X,Se,$e)}function Zx(){var X;return(X=w5())===r&&(X=_5()),X}function w5(){var X,Se;return it++,X=he,Fr(),e.substr(he,4)===a?(Se=a,he+=4):(Se=r,it===0&&St(y)),Se!==r?(Fr(),ni=X,X=Z()):(he=X,X=r),it--,X===r&&it===0&&St(J),X}function _5(){var X,Se;if(X=[],(Se=Ab())!==r)for(;Se!==r;)X.push(Se),Se=Ab();else X=r;return X}function Ab(){var X,Se,$e,Et;return X=he,Fr(),(Se=S5())!==r?(Fr(),($e=gp())===r&&($e=null),Fr(),e.charCodeAt(he)===41?(Et=l,he++):(Et=r,it===0&&St(E)),Et!==r?(Fr(),ni=X,X=te(Se,$e)):(he=X,X=r)):(he=X,X=r),X}function gp(){var X,Se,$e,Et,pi,Qi,Or,Xs;if(X=he,(Se=$b())!==r){for($e=[],Et=he,pi=Fr(),e.charCodeAt(he)===44?(Qi=u,he++):(Qi=r,it===0&&St($)),Qi===r&&(Qi=null),Or=Fr(),(Xs=$b())!==r?Et=pi=[pi,Qi,Or,Xs]:(he=Et,Et=r);Et!==r;)$e.push(Et),Et=he,pi=Fr(),e.charCodeAt(he)===44?(Qi=u,he++):(Qi=r,it===0&&St($)),Qi===r&&(Qi=null),Or=Fr(),(Xs=$b())!==r?Et=pi=[pi,Qi,Or,Xs]:(he=Et,Et=r);ni=X,X=Ee(Se,$e)}else he=X,X=r;return X}function $b(){var X,Se;return X=he,(Se=x5())===r&&(Se=T5())===r&&(Se=Kx())===r&&(Se=kg()),Se!==r&&(ni=X,Se=Fe(Se)),(X=Se)===r&&(X=he,(Se=E5())!==r&&(ni=X,Se=Tt(Se)),X=Se),X}function Fr(){var X,Se;for(it++,X=[],Se=e.charAt(he),R.test(Se)?he++:(Se=r,it===0&&St(G));Se!==r;)X.push(Se),Se=e.charAt(he),R.test(Se)?he++:(Se=r,it===0&&St(G));return it--,Se=r,it===0&&St(P),X}function S5(){var X,Se,$e;return it++,X=he,(Se=Yx())!==r?(e.charCodeAt(he)===40?($e=h,he++):($e=r,it===0&&St(se)),$e!==r?(ni=X,X=Wt(Se)):(he=X,X=r)):(he=X,X=r),it--,X===r&&(Se=r,it===0&&St(Q)),X}function Yx(){var X,Se,$e;if(it++,X=he,Se=[],$e=e.charAt(he),O.test($e)?he++:($e=r,it===0&&St(ye)),$e!==r)for(;$e!==r;)Se.push($e),$e=e.charAt(he),O.test($e)?he++:($e=r,it===0&&St(ye));else Se=r;return Se!==r&&(ni=X,Se=Gt()),it--,(X=Se)===r&&(Se=r,it===0&&St(ie)),X}function x5(){var X,Se,$e;return it++,X=he,Fr(),(Se=Ks())!==r?(e.charCodeAt(he)===37?($e=p,he++):($e=r,it===0&&St(Ie)),$e!==r?(ni=X,X=Qt(Se)):(he=X,X=r)):(he=X,X=r),it--,X===r&&it===0&&St(Pe),X}function T5(){var X,Se,$e;return it++,X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===f?($e=f,he+=2):($e=r,it===0&&St(De)),$e!==r?(ni=X,X=be(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===m?($e=m,he+=2):($e=r,it===0&&St(Ze)),$e!==r?(ni=X,X=Ye(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===g?($e=g,he+=2):($e=r,it===0&&St(et)),$e!==r?(ni=X,X=tt(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===b?($e=b,he+=2):($e=r,it===0&&St(nt)),$e!==r?(ni=X,X=Pt(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===w?($e=w,he+=2):($e=r,it===0&&St($t)),$e!==r?(ni=X,X=jt(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,Fr(),(Se=Ks())!==r?(e.substr(he,2)===S?($e=S,he+=2):($e=r,it===0&&St(zt)),$e!==r?(ni=X,X=Rr(Se)):(he=X,X=r)):(he=X,X=r)))))),it--,X===r&&it===0&&St(we),X}function Kx(){var X,Se,$e;return it++,X=he,(Se=Ks())!==r?(e.substr(he,3)===T?($e=T,he+=3):($e=r,it===0&&St(B)),$e!==r?(ni=X,X=ds(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,(Se=Ks())!==r?(e.substr(he,3)===x?($e=x,he+=3):($e=r,it===0&&St(re)),$e!==r?(ni=X,X=_a(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,(Se=Ks())!==r?(e.substr(he,4)===_?($e=_,he+=4):($e=r,it===0&&St(fe)),$e!==r?(ni=X,X=du(Se)):(he=X,X=r)):(he=X,X=r),X===r&&(X=he,(Se=Ks())!==r?(e.substr(he,4)===M?($e=M,he+=4):($e=r,it===0&&St(ve)),$e!==r?(ni=X,X=hl(Se)):(he=X,X=r)):(he=X,X=r)))),it--,X===r&&(Se=r,it===0&&St(Y)),X}function kg(){var X,Se;return it++,X=he,Fr(),(Se=Ks())!==r?(ni=X,X=Ff(Se)):(he=X,X=r),it--,X===r&&it===0&&St(D),X}function E5(){var X,Se,$e,Et;if(it++,X=he,e.charCodeAt(he)===35?(Se=I,he++):(Se=r,it===0&&St(N)),Se!==r){if($e=[],Et=e.charAt(he),k.test(Et)?he++:(Et=r,it===0&&St(U)),Et!==r)for(;Et!==r;)$e.push(Et),Et=e.charAt(he),k.test(Et)?he++:(Et=r,it===0&&St(U));else $e=r;$e!==r?(ni=X,X=fp()):(he=X,X=r)}else he=X,X=r;return X===r&&(X=he,(Se=Ab())!==r&&(ni=X,Se=fu(Se)),(X=Se)===r&&(X=he,(Se=Yx())!==r&&(ni=X,Se=Ib()),X=Se)),it--,X===r&&(Se=r,it===0&&St(q)),X}function Ks(){var X,Se,$e,Et,pi,Qi,Or,Xs;for(X=he,Se=e.charAt(he),L.test(Se)?he++:(Se=r,it===0&&St(H)),Se===r&&(Se=null),$e=he,Et=[],pi=e.charAt(he),V.test(pi)?he++:(pi=r,it===0&&St(ne));pi!==r;)Et.push(pi),pi=e.charAt(he),V.test(pi)?he++:(pi=r,it===0&&St(ne));if(e.charCodeAt(he)===46?(pi=A,he++):(pi=r,it===0&&St(me)),pi!==r){if(Qi=[],Or=e.charAt(he),V.test(Or)?he++:(Or=r,it===0&&St(ne)),Or!==r)for(;Or!==r;)Qi.push(Or),Or=e.charAt(he),V.test(Or)?he++:(Or=r,it===0&&St(ne));else Qi=r;Qi!==r?$e=Et=[Et,pi,Qi]:(he=$e,$e=r)}else he=$e,$e=r;if($e===r)if($e=[],Et=e.charAt(he),V.test(Et)?he++:(Et=r,it===0&&St(ne)),Et!==r)for(;Et!==r;)$e.push(Et),Et=e.charAt(he),V.test(Et)?he++:(Et=r,it===0&&St(ne));else $e=r;if($e!==r){if(Et=he,e.charCodeAt(he)===101?(pi=C,he++):(pi=r,it===0&&St(pe)),pi!==r){if(Qi=e.charAt(he),L.test(Qi)?he++:(Qi=r,it===0&&St(H)),Qi===r&&(Qi=null),Or=[],Xs=e.charAt(he),V.test(Xs)?he++:(Xs=r,it===0&&St(ne)),Xs!==r)for(;Xs!==r;)Or.push(Xs),Xs=e.charAt(he),V.test(Xs)?he++:(Xs=r,it===0&&St(ne));else Or=r;Or!==r?Et=pi=[pi,Qi,Or]:(he=Et,Et=r)}else he=Et,Et=r;Et===r&&(Et=null),ni=X,X=mp()}else he=X,X=r;return X}function M5(X,Se){return X.map(function($e){return $e[Se]})}function I5(X,Se,$e){return[X].concat(M5(Se,$e))}if(i=o(),t.peg$library)return{peg$result:i,peg$currPos:he,peg$FAILED:r,peg$maxFailExpected:Lg,peg$maxFailPos:zo};if(i!==r&&he===e.length)return i;throw i!==r&&he<e.length&&St(v5()),b5(Lg,zo<e.length?e.charAt(zo):null,zo<e.length?Jx(zo,zo+1):Jx(zo,zo))}function Dse(e){if(!e||e.length===0)return null;if(typeof e=="string"){const i=Sz(e);return i&&i.length!==0?i:null}const t=e.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new W("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:Sz(i.value)}});t.sort((i,r)=>r.effects.length-i.effects.length);for(let i=0;i<t.length-1;i++){if(!y3e(t[i].effects,t[i+1].effects))throw new W("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[i].effects,b:t[i+1].effects});g3e(t[i].effects,t[i+1].effects)}return t.sort((i,r)=>r.scale-i.scale),t}function Sz(e){let t;if(!e)return[];try{t=w3e(e)}catch(i){throw new W("effect:invalid-syntax","Invalid effect syntax",{value:e,error:i})}return t.map(i=>_3e(i))}function _3e(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return S3e(e);case"opacity":return x3e(e);case"hue-rotate":return T3e(e);case"blur":return E3e(e);case"drop-shadow":return M3e(e);case"bloom":return I3e(e)}}catch(t){throw t.details.filter=e,t}throw new W("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function S3e(e){let t=1;return mb(e.parameters,1),e.parameters.length===1&&(t=Ul(e.parameters[0])),new LN(e.name,t)}function x3e(e){let t=1;return mb(e.parameters,1),e.parameters.length===1&&(t=Ul(e.parameters[0])),new Nse(t)}function T3e(e){let t=0;return mb(e.parameters,1),e.parameters.length===1&&(t=P3e(e.parameters[0])),new Pse(t)}function E3e(e){let t=0;return mb(e.parameters,1),e.parameters.length===1&&(t=J8(e.parameters[0]),px(t,e.parameters[0])),new Ase(t)}function M3e(e){const t=[];let i=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),i)throw new W("effect:type-error","Accepts only one color",{});i=L3e(r)}else{const s=J8(r);if(Object.isFrozen(t))throw new W("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&px(s,r)}if(t.length<2||t.length>3)throw new W("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Rse(t[0],t[1],t[2]||0,i||Fse("black"))}function I3e(e){let t=1,i=0,r=0;return mb(e.parameters,3),e.parameters[0]&&(t=Ul(e.parameters[0])),e.parameters[1]&&(i=J8(e.parameters[1]),px(i,e.parameters[1])),e.parameters[2]&&(r=Ul(e.parameters[2])),new Mse(t,i,r)}function mb(e,t){if(e.length>t)throw new W("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function aC(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in W8)return"<length>";if(e.unit in H8)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function px(e,t){if(e<0)throw new W("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function A3e(e){if(e.type!=="quantity"||e.unit!==null)throw new W("effect:type-error",`Expected <double>, Actual: ${aC(e)}`,{term:e})}function $3e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new W("effect:type-error",`Expected <double> or <percentage>, Actual: ${aC(e)}`,{term:e})}b3e(Dv,Error),Dv.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var i,r=null;for(i=0;i<e.length;i++)if(e[i].source===this.location.source){r=e[i].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,n=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,o=this.location.source+":"+n.line+":"+n.column;if(r){var a=this.location.end,l=w4("",n.line.toString().length," "),u=r[s.line-1],h=(s.line===a.line?a.column:u.length+1)-s.column||1;t+=`
 --> `+o+`
`+l+` |
`+n.line+" | "+u+`
`+l+" | "+w4("",s.column-1," ")+w4("",h,"^")}else t+=`
 at `+o}return t},Dv.buildMessage=function(e,t){var i={literal:function(u){return'"'+s(u.text)+'"'},class:function(u){var h=u.parts.map(function(p){return Array.isArray(p)?n(p[0])+"-"+n(p[1]):n(p)});return"["+(u.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function s(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function n(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+r(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+r(h)})}function o(u){return i[u.type](u)}function a(u){var h,p,f=u.map(o);if(f.sort(),f.length>0){for(h=1,p=1;h<f.length;h++)f[h-1]!==f[h]&&(f[p]=f[h],p++);f.length=p}switch(f.length){case 1:return f[0];case 2:return f[0]+" or "+f[1];default:return f.slice(0,-1).join(", ")+", or "+f[f.length-1]}}function l(u){return u?'"'+s(u)+'"':"end of input"}return"Expected "+a(e)+" but "+l(t)+" found."};const H8={deg:1,grad:.9,rad:180/Math.PI,turn:360};function C3e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&H8[e.unit]!=null))throw new W("effect:type-error",`Expected <angle>, Actual: ${aC(e)}`,{term:e})}const W8={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function R3e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&W8[e.unit]!=null))throw new W("effect:type-error",`Expected <length>, Actual: ${aC(e)}`,{term:e})}function Ul(e){$3e(e);const t=e.value;return px(t,e),e.unit==="%"?.01*t:t}function O3e(e){return A3e(e),px(e.value,e),e.value}function P3e(e){return C3e(e),e.value*H8[e.unit]||0}function J8(e){return R3e(e),e.value*W8[e.unit]||0}function L3e(e){switch(e.colorType){case"hex":return L1e(e.value);case"named":return Fse(e.value);case"function":return D3e(e.value)}}function Fse(e){if(!cee(e))throw new W("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return P1e(e)}const N3e=/^rgba?/i,k3e=/^hsla?/i;function D3e(e){if(mb(e.parameters,4),N3e.test(e.name))return[Ul(e.parameters[0]),Ul(e.parameters[1]),Ul(e.parameters[2]),e.parameters[3]?Ul(e.parameters[3]):1];if(k3e.test(e.name))return hee(O3e(e.parameters[0]),Ul(e.parameters[1]),Ul(e.parameters[2]),e.parameters[3]?Ul(e.parameters[3]):1);throw new W("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Q2(e,t,i){try{return j3e(e)}catch(r){i?.messages?.push(r)}return null}function eS(e,t,i,r){try{const s=F3e(e);Zr(i,s,t)}catch(s){r.messages&&r.messages.push(s)}}function F3e(e){const t=Dse(e);return t?v3e(t)?t.map(i=>i.toJSON()):t.map(({scale:i,effects:r})=>({scale:i,value:r.map(s=>s.toJSON())})):null}function j3e(e){if(!e||e.length===0)return null;if(U3e(e)){const t=[];for(const i of e)t.push({scale:i.scale,value:xz(i.value)});return t}return xz(e)}function U3e(e){const t=e[0];return!!t&&"scale"in t}function xz(e){if(!e?.length)return"";const t=[];for(const i of e){let r=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Nc(i,"amount")];break;case"blur":r=[Nc(i,"radius","pt")];break;case"hue-rotate":r=[Nc(i,"angle","deg")];break;case"drop-shadow":r=[Nc(i,"xoffset","pt"),Nc(i,"yoffset","pt"),Nc(i,"blurRadius","pt"),V3e(i,"color")];break;case"bloom":r=[Nc(i,"strength"),Nc(i,"radius","pt"),Nc(i,"threshold")]}const s=`${i.type}(${r.filter(Boolean).join(" ")})`;Dse(s),t.push(s)}return t.join(" ")}function Nc(e,t,i){if(e[t]==null)throw new W("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return i?e[t]+i:""+e[t]}function V3e(e,t){if(e[t]==null)throw new W("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const i=e[t];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const G3e={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},Tz={read:{reader:Q2},write:{allowNull:!0,writer:eS}},B3e={json:{read:!1,write:!1,origins:{"web-map":Tz,"portal-item":Tz}}},xg=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d(G3e)],t.prototype,"blendMode",void 0),c([d(B3e)],t.prototype,"effect",void 0),t=c([F("esri.layers.mixins.BlendLayer")],t),t},lC=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return c([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],t.prototype,"customParameters",void 0),t=c([F("esri.layers.mixins.CustomParametersMixin")],t),t},z3e="randomUUID"in crypto;function Z8(){if(z3e)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=i=>e[i].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function odt(){return`{${Z8().toUpperCase()}}`}function q3e(){return`{${Z8()}}`}function H3e(e){const t=e.toUpperCase();return e[0]!=="{"?`{${t}}`:t}const W3e=q3e(),jse=new Map,Use=new Map;async function adt(e,t,i){if(!e||!i)return!1;if(!t)return!0;const r=new URL(e).host;let s=jse.get(r);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Ne(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function ldt(e,t,i=!1){if(!e||!t)return!0;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=Use.get(r)?.entries();if(s){for(const[n,o]of s)if(o.name===t){const a=!o.stack?.hasForwardEdits();if(!a&&i){const[{deleteForwardEdits:l},{default:u}]=await Promise.all([ce(()=>import("./deleteForwardEdits-Ciof_9QY.js"),__vite__mapDeps([130,1]),import.meta.url),ce(()=>import("./DeleteForwardEditsParameters-D-xTFbvK.js"),__vite__mapDeps([131,1]),import.meta.url)]),h=await l(r,n,new u({sessionId:W3e,moment:o.moment}));return h.success&&o.stack?.clearForwardEdits(),h.success}return a}}return!0}function J3e(e,t){if(!e)return!1;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=Use.get(i)?.entries();if(r){for(const[s,n]of r)if(n.name===t)return n.lockType==="edit"}return!1}const Y8=new ap.EventEmitter;function Z3e(e){return Y8.on("apply-edits",new WeakRef(e))}function Y3e(e){return Y8.on("update-moment",new WeakRef(e))}function udt(e,t,i=null,r=!1){const s=Do();return r=t==null||r,Y8.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:i,mayReceiveServiceEdits:r,result:s.promise}),s}const Vse=Symbol();function cdt(e){return e!=null&&typeof e=="object"&&Vse in e}function Bb(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function _4(e,t,i){const r=new URL(e).host,s=jse.get(r),n=o=>!o||o===s;return n(t)&&n(i)||t===i}const K3e=e=>{var t;let i=class extends e{constructor(...r){super(...r),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:n,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:u}=s,h=n===this.url,p=o!=null&&this.layerId!=null&&o===this.layerId,f=Bb(this),m=Bb(this)&&_4(n,a,this.gdbVersion);if(!h||f&&!m||!p&&!l)return;const g=u.then(b=>{if(this.lastEditsEventDate=new Date,p&&(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length||b.addedAttachments.length||b.updatedAttachments.length||b.deletedAttachments.length))return this.emit("edits",K(b)),b;const w=b.editedFeatures?.find(({layerId:T})=>T===this.layerId);if(w){const{adds:T,updates:x,deletes:_}=w.editedFeatures,M={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:T?T.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],deletedFeatures:_?_.map(({attributes:I})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],updatedFeatures:x?x.map(({current:{attributes:I}})=>({objectId:this.objectIdField&&I[this.objectIdField],globalId:this.globalIdField&&I[this.globalIdField]})):[],editedFeatures:K(b.editedFeatures),exceededTransferLimit:!1,historicMoment:K(b.historicMoment)};return this.emit("edits",M),M}const S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:K(b.editedFeatures),exceededTransferLimit:!1,historicMoment:K(b.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,S.historicMoment)&&this.emit("edits",S),S}).then(b=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,b.historicMoment)&&(this.historicMoment=b.historicMoment),b));this.emit("apply-edits",{result:g})},this._updateMomentHandler=s=>{const{serviceUrl:n,gdbVersion:o,moment:a}=s,l=n===this.url,u=Bb(this),h=Bb(this)&&_4(n,o,this.gdbVersion),p=Bb(this)&&!_4(n,this.gdbVersion,null);l&&u&&h&&p&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(Z3e(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(Y3e(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(r,s,n){return"historicMoment"in this&&this.historicMoment!==n&&J3e(r,s)}};return t=Vse,c([d()],i.prototype,"lastEditsEventDate",void 0),i=c([F("esri.layers.mixins.EditBusLayer")],i),i};var NN;let Fh=NN=class extends ae{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new NN({mapLayerId:e,gdbVersion:t})}};c([Ue({mapLayer:"map-layer"})],Fh.prototype,"type",void 0),c([d({type:vt,json:{write:!0}})],Fh.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],Fh.prototype,"gdbVersion",void 0),Fh=NN=c([F("esri.layers.support.source.MapLayerSource")],Fh);var kN;let Qc=kN=class extends ae{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:i,spatialReference:r,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:i,spatialReference:r?.clone()??void 0,geometryType:s};return new kN(n)}};c([Ue({queryTable:"query-table"})],Qc.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Qc.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Qc.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],Qc.prototype,"oidFields",void 0),c([d({type:ke,json:{write:!0}})],Qc.prototype,"spatialReference",void 0),c([Ue(b3)],Qc.prototype,"geometryType",void 0),Qc=kN=c([F("esri.layers.support.source.QueryTableDataSource")],Qc);var DN;let E0=DN=class extends ae{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new DN({workspaceId:e,dataSourceName:t})}};c([Ue({raster:"raster"})],E0.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],E0.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],E0.prototype,"workspaceId",void 0),E0=DN=c([F("esri.layers.support.source.RasterDataSource")],E0);var FN;let Lm=FN=class extends ae{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:i}=this;return new FN({workspaceId:e,gdbVersion:t,dataSourceName:i})}};c([Ue({table:"table"})],Lm.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Lm.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Lm.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],Lm.prototype,"dataSourceName",void 0),Lm=FN=c([F("esri.layers.support.source.TableDataSource")],Lm);var jN,UN;const X3e=ar()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Ko=jN=class extends ae{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,i){return Ez()(e,t,i)}castLeftTableSource(e){return il(VN(),e)}readRightTableSource(e,t,i){return Ez()(e,t,i)}castRightTableSource(e){return il(VN(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:i,rightTableSource:r,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:i?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:s};return new jN(n)}};c([Ue({joinTable:"join-table"})],Ko.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ko.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],Ko.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],Ko.prototype,"leftTableSource",void 0),c([ue("leftTableSource")],Ko.prototype,"readLeftTableSource",null),c([Ht("leftTableSource")],Ko.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],Ko.prototype,"rightTableSource",void 0),c([ue("rightTableSource")],Ko.prototype,"readRightTableSource",null),c([Ht("rightTableSource")],Ko.prototype,"castRightTableSource",null),c([Ue(X3e)],Ko.prototype,"joinType",void 0),Ko=jN=c([F("esri.layers.support.source.JoinTableDataSource")],Ko);let S4=null;function Ez(){return S4||(S4=K1({types:VN()})),S4}let x4=null;function VN(){return x4||(x4={key:"type",base:null,typeMap:{"data-layer":Wn,"map-layer":Fh}}),x4}const Q3e={key:"type",base:null,typeMap:{"join-table":Ko,"query-table":Qc,raster:E0,table:Lm}};let Wn=UN=class extends ae{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new UN({fields:e,dataSource:t})}};c([Ue({dataLayer:"data-layer"})],Wn.prototype,"type",void 0),c([d({type:[na],json:{write:!0}})],Wn.prototype,"fields",void 0),c([d({types:Q3e,json:{write:!0}})],Wn.prototype,"dataSource",void 0),Wn=UN=c([F("esri.layers.support.source.DataLayerSource")],Wn),Wn.from=bi(Wn);let Nm=class extends Dt(ae){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],Nm.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],Nm.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],Nm.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],Nm.prototype,"searchType",void 0),Nm=c([F("esri.rest.support.FullTextSearch")],Nm);const eAe=Nm;var GN;const Mz=new gt({upperLeft:"upper-left",lowerLeft:"lower-left"});let km=GN=class extends ae{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new GN(K({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:bt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],km.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],km.prototype,"mode",void 0),c([d({type:String,json:{read:Mz.read,write:Mz.write}})],km.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],km.prototype,"tolerance",void 0),km=GN=c([F("esri.rest.support.QuantizationParameters")],km);const K8=km,X8=new gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var BN;const Iz=new gt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let $l=BN=class extends ae{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=K(e))}clone(){return new BN({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:K(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],$l.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],$l.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],$l.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],$l.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],$l.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:Iz.read},write:{target:"statisticType",writer:Iz.write}}})],$l.prototype,"statisticType",void 0),c([d({type:Object})],$l.prototype,"statisticParameters",void 0),c([ge("statisticParameters")],$l.prototype,"writeStatisticParameters",null),$l=BN=c([F("esri.rest.support.StatisticDefinition")],$l);const Gse=$l;var BM;const tAe=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pt=BM=class extends ae{static from(e){return Ki(BM,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const i={};for(const r in e){const s=e[r];Array.isArray(s)?i[r]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?i[r]=s.getTime():i[r]=s}t.parameterValues=i}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new BM(K({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};pt.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],pt.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],pt.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],pt.prototype,"datumTransformation",void 0),c([Ht("datumTransformation")],pt.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],pt.prototype,"distance",void 0),c([d({type:Wn,json:{write:!0}})],pt.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],pt.prototype,"formatOf3DObjects",void 0),c([d({type:[eAe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],pt.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],pt.prototype,"gdbVersion",void 0),c([d({types:cs,json:{read:or,write:!0}})],pt.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],pt.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],pt.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],pt.prototype,"having",void 0),c([d({type:Date})],pt.prototype,"historicMoment",void 0),c([ge("historicMoment")],pt.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],pt.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:e=>e<1?1:e>pt.MAX_MAX_RECORD_COUNT_FACTOR?pt.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],pt.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],pt.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],pt.prototype,"num",void 0),c([d({json:{write:!0}})],pt.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],pt.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],pt.prototype,"outFields",void 0),c([d({type:ke,json:{name:"outSR",write:!0}})],pt.prototype,"outSpatialReference",void 0),c([d({type:[Gse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],pt.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],pt.prototype,"parameterValues",void 0),c([ge("parameterValues")],pt.prototype,"writeParameterValues",null),c([d({type:Ve,json:{write:!0}})],pt.prototype,"pixelSize",void 0),c([d({type:K8,json:{write:!0}})],pt.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],pt.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],pt.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],pt.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],pt.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],pt.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],pt.prototype,"returnZ",void 0),c([d({type:ke,json:{write:!0}})],pt.prototype,"sourceSpatialReference",void 0),c([Ue(X8,{ignoreUnknown:!1,name:"spatialRel"})],pt.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],pt.prototype,"start",void 0),c([ge("start"),ge("num")],pt.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],pt.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],pt.prototype,"text",void 0),c([d({type:io,json:{write:!0}})],pt.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],pt.prototype,"timeReferenceUnknownClient",void 0),c([Ue(tAe,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],pt.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],pt.prototype,"where",void 0),c([ge("where")],pt.prototype,"writeWhere",null),pt=BM=c([F("esri.rest.support.Query")],pt);const Dr=pt;var zN;const T4=new gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),E4=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Au=zN=class extends ae{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:i,spatialRelationship:r,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new Dr({geometry:K(i),objectIds:K(n),spatialRelationship:r,timeExtent:K(s),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:i,timeExtent:r,objectIds:s,units:n,distance:o}=this;return new zN({geometry:K(t),objectIds:K(s),spatialRelationship:i,timeExtent:K(r),where:e,units:n,distance:o})}};c([d({type:String,json:{write:!0}})],Au.prototype,"where",void 0),c([d({types:cs,json:{write:!0}})],Au.prototype,"geometry",void 0),c([d({type:T4.apiValues,json:{name:"spatialRel",read:{reader:T4.read},write:{allowNull:!1,writer:T4.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],Au.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Au.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],Au.prototype,"objectIds",void 0),c([d({type:E4.apiValues,json:{read:E4.read,write:{writer:E4.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Au.prototype,"units",void 0),c([d({type:io,json:{write:!0}})],Au.prototype,"timeExtent",void 0),Au=zN=c([F("esri.layers.support.FeatureFilter")],Au);const Bse=Au;var qN;const Az={read:{reader:Q2},write:{writer:eS,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},$z={read:{reader:Q2},write:{writer:eS,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},Cz={name:"showExcludedLabels",default:!0};let Dm=qN=class extends ae{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const i=super.write(e,t);if(t?.origin){if(i.filter){const r=Object.keys(i.filter);if(r.length>1||r[0]!=="where")return t.messages?.push(new W("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in i)return t.messages?.push(new W("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return i}clone(){return new qN({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([d({type:Bse,json:{write:{allowNull:!0,writer(e,t,i,r){const s=e?.write({},r);s&&Object.keys(s).length!==0?Zr(i,s,t):Zr(i,null,t)}}}})],Dm.prototype,"filter",void 0),c([d({json:{read:Q2,write:{writer:eS,allowNull:!0},origins:{"web-map":Az,"portal-item":Az}}})],Dm.prototype,"includedEffect",void 0),c([d({json:{read:Q2,write:{writer:eS,allowNull:!0},origins:{"web-map":$z,"portal-item":$z}}})],Dm.prototype,"excludedEffect",void 0),c([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":Cz,"portal-item":Cz}}})],Dm.prototype,"excludedLabelsVisible",void 0),Dm=qN=c([F("esri.layers.support.FeatureEffect")],Dm);const iAe=Dm,Rz={write:{allowNull:!0}},rAe={type:iAe,json:{origins:{"web-map":Rz,"portal-item":Rz}}},sAe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return c([d(rAe)],t.prototype,"featureEffect",void 0),t=c([F("esri.layers.mixins.FeatureEffectLayer")],t),t};var i_;const $3=ar()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),zse=$3.jsonValues.slice();Cme(zse,"orthometric");const Z_=ar()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let Cl=i_=class extends ae{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,i){return $3.write(e,t,i)}readHeightModel(e,t,i){return $3.read(e)||(i?.messages&&i.messages.push(nAe(e,{context:i})),null)}readHeightUnit(e,t,i){return Z_.read(e)||(i?.messages&&i.messages.push(Oz(e,{context:i})),null)}readHeightUnitService(e,t,i){return HQ(e)||Z_.read(e)||(i?.messages&&i.messages.push(Oz(e,{context:i})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new i_({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const i=WQ(t);return new i_({heightModel:e.heightModel,heightUnit:i??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new i_;return t.read(e,{origin:"web-scene"}),t}};function Oz(e,t){return new Fo("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function nAe(e,t){return new Fo("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([d({type:$3.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:zse,default:"ellipsoidal"}}}})],Cl.prototype,"heightModel",void 0),c([ge("web-scene","heightModel")],Cl.prototype,"writeHeightModel",null),c([ue(["web-scene","service"],"heightModel")],Cl.prototype,"readHeightModel",null),c([d({type:Z_.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Z_.jsonValues,write:Z_.write}}}})],Cl.prototype,"heightUnit",void 0),c([ue("web-scene","heightUnit")],Cl.prototype,"readHeightUnit",null),c([ue("service","heightUnit")],Cl.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],Cl.prototype,"vertCRS",void 0),c([ue("service","vertCRS",["vertCRS","ellipsoid","geoid"])],Cl.prototype,"readVertCRS",null),Cl=i_=c([F("esri.geometry.HeightModelInfo")],Cl);const uC=Cl;var HN;let r_=HN=class extends ae{constructor(e){super(e)}async collectRequiredFields(e,t){return Rn(e,t,this.expression)}clone(){return new HN({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};c([d({type:String,json:{write:!0}})],r_.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],r_.prototype,"title",void 0),r_=HN=c([F("esri.symbols.support.FeatureExpressionInfo")],r_);const Pz=r_;function pdt(e){return 1/(E8[e]||1)}function oAe(){const e=Object.keys(E8);return YK(e,"decimal-degrees"),e.sort(),e}const aAe=oAe();var WN;const IT=ar()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),Lz=new gt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let eh=WN=class extends ae{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,i,r){t[i]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new WN({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Zme(this.featureExpressionInfo,e.featureExpressionInfo)}};c([d({type:Pz,json:{write:!0}})],eh.prototype,"featureExpressionInfo",void 0),c([ue("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],eh.prototype,"readFeatureExpressionInfo",null),c([ge("featureExpressionInfo",{featureExpressionInfo:{type:Pz},"featureExpression.value":{type:[0]}})],eh.prototype,"writeFeatureExpressionInfo",null),c([d({type:IT.apiValues,nonNullable:!0,json:{type:IT.jsonValues,read:IT.read,write:{writer:IT.write,isRequired:!0}}})],eh.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],eh.prototype,"offset",void 0),c([d({type:aAe,json:{type:String,read:Lz.read,write:Lz.write}})],eh.prototype,"unit",null),eh=WN=c([F("esri.symbols.support.ElevationInfo")],eh);const qse=eh;let M0=class extends ae{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};c([d({type:String,json:{write:!0}})],M0.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],M0.prototype,"label",void 0),c([d()],M0.prototype,"type",void 0),M0=c([F("esri.tables.elements.AttributeTableElement")],M0);const w1=M0;var JN;let s_=JN=class extends w1{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new JN({description:this.description,displayType:this.displayType,label:this.label})}};c([d({type:["auto"],json:{write:!0}})],s_.prototype,"displayType",void 0),c([d({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],s_.prototype,"type",void 0),s_=JN=c([F("esri.tables.elements.AttributeTableAttachmentElement")],s_);const Nz=s_;var ZN;let n_=ZN=class extends w1{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new ZN({description:this.description,fieldName:this.fieldName,label:this.label})}};c([d({type:String,json:{write:!0}})],n_.prototype,"fieldName",void 0),c([d({type:String,json:{read:!1,write:!0}})],n_.prototype,"type",void 0),n_=ZN=c([F("esri.tables.elements.AttributeTableFieldElement")],n_);const kz=n_;var YN;let o_=YN=class extends w1{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new YN({description:this.description,label:this.label,relationshipId:this.relationshipId})}};c([d({type:Number,json:{write:!0}})],o_.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],o_.prototype,"type",void 0),o_=YN=c([F("esri.tables.elements.AttributeTableRelationshipElement")],o_);const Dz=o_;function Hse(e){return{typesWithGroup:{base:w1,key:"type",typeMap:{attachment:Nz,field:kz,group:e,relationship:Dz}},typesWithoutGroup:{base:w1,key:"type",typeMap:{attachment:Nz,field:kz,relationship:Dz}}}}function Wse(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>r[s.type].fromJSON(s))}function Jse(e,t,i=!0){if(!e)return null;const r=i?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>r[s.type]).map(s=>s.toJSON())}function Zse(e,t,i=!0){return e?e.map(r=>il(i?t.typesWithGroup:t.typesWithoutGroup,r)):null}var KN;let Th=KN=class extends w1{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return Zse(e,M4,!1)}readElements(e,t){return Wse(t.attributeTableElements,M4,!1)}writeElements(e,t){t.attributeTableElements=Jse(e,M4,!1)}clone(){return new KN({description:this.description,elements:K(this.elements),label:this.label})}};c([d({json:{write:!0}})],Th.prototype,"elements",void 0),c([Ht("elements")],Th.prototype,"castElements",null),c([ue("elements",["attributeTableElements"])],Th.prototype,"readElements",null),c([ge("elements")],Th.prototype,"writeElements",null),c([d({type:String,json:{read:!1,write:!0}})],Th.prototype,"type",void 0),Th=KN=c([F("esri.tables.elements.AttributeTableGroupElement")],Th);const M4=Hse(Th),lAe=Th;var XN;const I4=Hse(lAe);let Wp=XN=class extends ae{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return Zse(e,I4)}readElements(e,t){return Wse(t.attributeTableElements,I4)}writeElements(e,t){t.attributeTableElements=Jse(e,I4)}clone(){return new XN({elements:K(this.elements),orderByFields:this.orderByFields})}};c([d({json:{write:!0}})],Wp.prototype,"elements",void 0),c([Ht("elements")],Wp.prototype,"castElements",null),c([ue("elements",["attributeTableElements"])],Wp.prototype,"readElements",null),c([ge("elements")],Wp.prototype,"writeElements",null),c([d({type:[Object],json:{write:!0}})],Wp.prototype,"orderByFields",void 0),Wp=XN=c([F("esri.tables.AttributeTableTemplate")],Wp);const uAe=Wp,cAe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:As}}},dx={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,i){t[i]=!e}}}},Q8={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:As}}},fx={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Zy}}},e9={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:As}}},hAe={value:null,type:qse,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:As}}};function fdt(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Yse={write:{enabled:!0,layerContainerTypes:As},read:!0},C3={type:Number,json:{origins:{"web-document":Yse,"portal-item":{write:!0}}}},pAe={...C3,json:{...C3.json,origins:{"web-document":{...Yse,write:{enabled:!0,layerContainerTypes:As,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,i)=>i&&i.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition?.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?H2(t.layerDefinition.drawingInfo.transparency):void 0:H2(t.drawingInfo.transparency)}}},mdt={type:bt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const i=bt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(i.spatialReference=ke.fromJSON(t.spatialReference)),i}}}},read:!1}},Kse={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},dAe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:As}}},name:"layerDefinition.minScale",write:!0}},fAe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:As}}},name:"layerDefinition.maxScale",write:!0}},Xse={json:{write:{ignoreOrigin:!0,layerContainerTypes:As},origins:{"web-map":{read:!1,write:!1}}}},mAe={type:uAe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}};let th=class extends Dt(ae){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};c([d()],th.prototype,"creatorField",void 0),c([d()],th.prototype,"creationDateField",void 0),c([d()],th.prototype,"editorField",void 0),c([d()],th.prototype,"editDateField",void 0),c([d()],th.prototype,"realm",void 0),c([d(f1("dateFieldsTimeReference",!0))],th.prototype,"timeZone",void 0),th=c([F("esri.layers.support.EditFieldsInfo")],th);const yAe=th;let Vu=class extends Dt(ae){constructor(t){super(t)}};c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"name",void 0),c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"fields",void 0),c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"isAscending",void 0),c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"indexType",void 0),c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"isUnique",void 0),c([d({constructOnly:!0,json:{write:!0}})],Vu.prototype,"description",void 0),Vu=c([F("esri.layers.support.FeatureIndex")],Vu);async function gAe(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=Qse(e));const r=vAe(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=r;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,i);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=r}return n}function vAe(e){return Qse(e)*bAe(e)}function bAe(e){return e.capabilities.query.maxRecordCount||2e3}function Qse(e){return e.capabilities.query.supportsMaxRecordCountFactor?Dr.MAX_MAX_RECORD_COUNT_FACTOR:1}var QN;let bs=QN=class extends ae{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new QN(K({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([d({type:[String],json:{write:!0}})],bs.prototype,"attachmentTypes",void 0),c([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],bs.prototype,"attachmentsWhere",void 0),c([d({type:Boolean,json:{write:!0}})],bs.prototype,"cacheHint",void 0),c([d({type:[String],json:{write:!0}})],bs.prototype,"keywords",void 0),c([d({type:[String],json:{write:!0}})],bs.prototype,"globalIds",void 0),c([d({json:{write:!0}})],bs.prototype,"name",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],bs.prototype,"num",void 0),c([d({type:[Number],json:{write:!0}})],bs.prototype,"objectIds",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],bs.prototype,"returnMetadata",void 0),c([d({type:[Number],json:{write:!0}})],bs.prototype,"size",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],bs.prototype,"start",void 0),c([ge("start"),ge("num")],bs.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],bs.prototype,"where",void 0),bs=QN=c([F("esri.rest.support.AttachmentQuery")],bs),bs.from=bi(bs);const ene=bs;var ek;let tr=ek=class extends ae{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new ek(K({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([d({type:Boolean,json:{write:!0}})],tr.prototype,"cacheHint",void 0),c([d({type:Wn,json:{write:!0}})],tr.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],tr.prototype,"gdbVersion",void 0),c([d({type:Number,json:{write:!0}})],tr.prototype,"geometryPrecision",void 0),c([d({type:Date})],tr.prototype,"historicMoment",void 0),c([ge("historicMoment")],tr.prototype,"_writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],tr.prototype,"maxAllowableOffset",void 0),c([d({json:{write:!0}})],tr.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],tr.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],tr.prototype,"outFields",void 0),c([d({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],tr.prototype,"outSpatialReference",void 0),c([d({json:{write:!0}})],tr.prototype,"relationshipId",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],tr.prototype,"start",void 0),c([ge("start"),ge("num")],tr.prototype,"writeStart",null),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],tr.prototype,"num",void 0),c([d({json:{write:!0}})],tr.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],tr.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],tr.prototype,"returnZ",void 0),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],tr.prototype,"where",void 0),tr=ek=c([F("esri.rest.support.RelationshipQuery")],tr),tr.from=bi(tr);const t9=tr,Fz=Object.freeze(Object.defineProperty({__proto__:null,default:t9},Symbol.toStringTag,{value:"Module"})),tk=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function wAe(e,t,i,r){const s=await Tf(e);if(await i9(e,t,r),!s.addAttachment)throw new W(r,"Layer source does not support addAttachment capability");return s.addAttachment(t,i)}function i9(e,t,i){const{attributes:r}=t,{objectIdField:s}=e;return e.capabilities?.data?.supportsAttachment?t?r?s&&r[s]?Promise.resolve():Promise.reject(new W(i,`feature is missing the identifying attribute ${s}`)):Promise.reject(new W(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new W(i,"A feature is required to add/delete/update attachments")):Promise.reject(new W(i,"this layer doesn't support attachments"))}async function _Ae(e,t,i,r,s){const n=await Tf(e);if(await i9(e,t,s),!n.updateAttachment)throw new W(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,i,r)}async function SAe(e,t,i){const{applyEdits:r}=await ce(()=>import("./editingSupport-BS-in8Jo.js"),__vite__mapDeps([132,1]),import.meta.url),s=await e.load();let n=i;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await GAe(s,t.deleteFeatures,s.globalIdField)}),r(s,s.source,t,i)}async function xAe(e,t,i){const{uploadAssets:r}=await ce(()=>import("./editingSupport-BS-in8Jo.js"),__vite__mapDeps([132,1]),import.meta.url),s=await e.load();return r(s,s.source,t,i)}async function TAe(e,t,i,r){const s=await Tf(e);if(await i9(e,t,r),!s.deleteAttachments)throw new W(r,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,i)}async function EAe(e,t,i){const r=(await e.load({signal:t?.signal})).source;if(!r.fetchRecomputedExtents)throw new W(i,"Layer source does not support fetchUpdates capability");return r.fetchRecomputedExtents(t)}async function MAe(e,t,i,r){t=ene.from(t),await e.load();const s=e.source,n=e.capabilities;if(!n?.data?.supportsAttachment)throw new W(r,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:h,start:p,where:f}=t;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||h?.length>0||u||p||f))throw new W(r,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a?.length||l?.length||f))throw new W(r,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new W(r,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function IAe(e,t,i,r){const s=await Tf(e);if(!s.queryObjectIds)throw new W(r,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Dr.from(t)??e.createQuery(),i)}async function AAe(e,t,i,r){const s=await Tf(e);if(!s.queryFeatureCount)throw new W(r,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Dr.from(t)??e.createQuery(),i)}async function $Ae(e,t,i,r){const s=await Tf(e);if(!s.queryExtent)throw new W(r,"Layer source does not support queryExtent capability");return s.queryExtent(Dr.from(t)??e.createQuery(),i)}async function CAe(e,t,i,r){const s=await Tf(e);if(!s.queryRelatedFeatures)throw new W(r,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(t9.from(t),i)}async function RAe(e,t,i,r){const s=await Tf(e);if(!s.queryRelatedFeaturesCount)throw new W(r,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(t9.from(t),i)}async function OAe(e){const t=e.source;if(t?.refresh)try{const{dataChanged:i,updates:r}=await t.refresh();if(r!=null&&(e.sourceJSON={...e.sourceJSON,...r},e.read(r,{origin:"service",url:e.parsedUrl})),i)return!0}catch{}if(e.definitionExpression)try{return(await Nee(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function PAe(e){const t=new Dr,i=e.capabilities?.data,r=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,r&&(t.compactGeometryEnabled=r.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),i&&(i.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),i.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function tne(e){const{globalIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeGlobalID")return r.name}}function ine(e){const{objectIdField:t,fields:i}=e;if(t)return t;if(i){for(const r of i)if(r.type==="esriFieldTypeOID")return r.name}}function LAe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function NAe(e,t){const{subtypes:i,subtypeField:r}=e;if(!t?.attributes||!i?.length||!r)return null;const s=t.attributes[r];return s==null?null:i.find(n=>n.code===s)}function kAe(e,t){const{fieldsIndex:i,subtypeField:r}=e,{name:s,type:n}=i.get(t)??{};if(!s)return null;if((r&&i.get(r)?.name)===s&&e.subtypes?.length){const o=e.subtypes.map(a=>new my({code:rne(a.code,n),name:a.name}));if(o?.length)return new iC({codedValues:o})}return null}function DAe(e,t){const{fieldsIndex:i}=e,{name:r,type:s}=i.get(t)??{};if(!r)return null;if(("typeIdField"in e?i.get(e.typeIdField)?.name:null)===r&&"types"in e&&e.types?.length){const n=e.types.map(o=>new my({code:rne(o.id,s),name:o.name}));return new iC({codedValues:n})}return null}function rne(e,t){return t?iie({type:t})&&typeof e=="number"?`${e}`:_2e({type:t})&&typeof e=="string"?Number.parseInt(e,10):e:e}async function Tf(e){return(await e.load()).source}async function FAe(e,t){if(!ci||ci.findCredential(e))return;let i;try{const r=await uee(e,t);r&&(i=await ci.checkSignInStatus(`${r}/sharing`))}catch{}if(i)try{const r=t!=null?t.signal:null;await ci.getCredential(e,{signal:r})}catch{}}async function jAe(e,t,i){const r=e.parsedUrl?.path;r&&e.authenticationTriggerEvent===t&&await FAe(r,i)}function UAe(e){return!zM(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const A4=K1({types:Kie});function r9(e,t){if(e.defaultSymbol)return e.types?.length?new fb({defaultSymbol:A4(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(i=>({id:i.id,symbol:A4(i.symbol,i,t)}))}):new _g({symbol:A4(e.defaultSymbol,e,t)})}function VAe(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const i=e.editingInfo?.lastEditDate?.getTime();return i==null||(t*=1e3,Date.now()-i<t)}async function GAe(e,t,i){if(t==null)return null;const r=[],{objectIdField:s}=e;if(t.forEach(u=>{let h=null;if("attributes"in u){const{attributes:p}=u;h={globalId:p[i],objectId:p[s]!=null&&p[s]!==-1?p[s]:null}}else h={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};h.globalId!=null&&(h.objectId!=null&&h.objectId!==-1||r.push(h.globalId))}),r.length===0)return null;const n=e.createQuery();n.where=r.map(u=>`${i}='${u}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,i],n.cacheHint=!1;const o=await K0e(gAe(e,n));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const h=u.attributes[i],p=u.attributes[s];h!=null&&p!=null&&p!==-1&&a.set(H3e(h),p)}return a}function sne(e,t,i){if(!t||!i||!e)return null;const r=i.getAttribute(t);return r==null?null:e.find(s=>{const{id:n}=s;return n!=null&&n.toString()===r.toString()})??null}function zM(e){return e.sourceJSON?.isMultiServicesView||BAe(e)}function BAe(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(",").map(t=>t.trim()).includes("map")}function zAe(e,t,i){const r=t?.queryBins;if(!r)throw new W(i,"Layer source does not support binning");switch(e.binParameters.type){case"auto-interval":if(!r.supportsAutoInterval)throw new W(i,"Layer source does not support auto-interval binning");break;case"date":if(!r.supportsDate)throw new W(i,"Layer source does not support date binning");break;case"fixed-boundaries":if(!r.supportsFixedBoundaries)throw new W(i,"Layer source does not support fixed-boundaries binning");break;case"fixed-interval":if(!r.supportsFixedInterval)throw new W(i,"Layer source does not support fixed-interval binning")}const s=r?.supportedStatistics;if(e.outStatistics&&s){const n=new Map([["count","count"],["sum","sum"],["min","min"],["max","max"],["avg","avg"],["stddev","stddev"],["var","var"],["percentile-continuous","percentileContinuous"],["percentile-discrete","percentileDiscrete"],["centroid-aggregate","centroid"],["convex-hull-aggregate","convexHull"],["envelope-aggregate","envelope"]]);for(const{statisticType:o}of e.outStatistics){const a=n.get(o);if(a&&!s[a])throw new W(i,`Layer source does not support ${o} statistic type`)}}}let I0=class extends Dt(ae){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],I0.prototype,"shapeAreaField",void 0),c([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],I0.prototype,"shapeLengthField",void 0),c([d({type:String,json:{read:e=>U2.read(e)||tp.read(e)}})],I0.prototype,"units",void 0),I0=c([F("esri.layers.support.GeometryFieldsInfo")],I0);const qAe=I0;var ik;let A0=ik=class extends ae{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Be}clone(){return new ik({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([d({type:String,json:{write:!0}})],A0.prototype,"floorField",void 0),c([d({json:{read:!1,write:!1}})],A0.prototype,"viewAllMode",void 0),c([d({json:{read:!1,write:!1}})],A0.prototype,"viewAllLevelIds",void 0),A0=ik=c([F("esri.layers.support.LayerFloorInfo")],A0);const nne=A0,jz=new gt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),Uz=new gt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Pa=class extends Dt(ae){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([d({json:{read:jz.read,write:jz.write}})],Pa.prototype,"cardinality",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"composite",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"id",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"keyField",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"keyFieldInRelationshipTable",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"name",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"relatedTableId",void 0),c([d({json:{read:!0,write:!0}})],Pa.prototype,"relationshipTableId",void 0),c([d({json:{read:Uz.read,write:Uz.write}})],Pa.prototype,"role",void 0),Pa=c([F("esri.layers.support.Relationship")],Pa);const one=Pa;function Qe(e,t,i){return!!ane(e,t,i)}function a_(e,t,i){return ane(e,t,i)}function ane(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}const HAe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function WAe(e){const t=e?.supportedSpatialAggregationStatistics?.map(i=>i.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function mx(e,t){return!!e?.supportedOperationsWithCacheHint?.map(r=>r.toLowerCase())?.includes(t.toLowerCase())}function JAe(e){const t=e?.supportedStatisticTypes?.map(i=>i.toLowerCase());return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function s9(e,t){return{analytics:ZAe(e),attachment:YAe(e),data:KAe(e),metadata:XAe(e),operations:QAe(e.capabilities,e,t),query:e$e(e,t),queryBins:r$e(e),queryRelated:t$e(e),queryTopFeatures:i$e(e),editing:s$e(e)}}function ZAe(e){return{supportsCacheHint:mx(e.advancedQueryCapabilities,"queryAnalytics")}}function YAe(e){const t=e.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:mx(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Qe(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(r=>{const s=HAe[r.name];s&&(i[s]=!!r.isEnabled)}),i}function KAe(e){return{isVersioned:Qe(e,"isDataVersioned",!1),isBranchVersioned:Qe(e,"isDataBranchVersioned",!1),supportsAttachment:Qe(e,"hasAttachments",!1),supportsM:Qe(e,"hasM",!1),supportsZ:Qe(e,"hasZ",!1)}}function XAe(e){return{supportsAdvancedFieldProperties:Qe(e,"supportsFieldDescriptionProperty",!1)}}function QAe(e,t,i){const r=e?e.toLowerCase().split(",").map(f=>f.trim()):[],s=i?ip(i):null,n=r.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=r.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&r.includes("create"),l=o&&r.includes("delete"),u=o&&r.includes("update");const h=r.includes("changetracking"),p=t.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:Qe(t,"supportsCalculate",!1),supportsTruncate:Qe(t,"supportsTruncate",!1),supportsValidateSql:Qe(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:n,supportsQueryAnalytics:Qe(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:Qe(p,"supportsQueryAttachments",!1),supportsQueryBins:Qe(p,"supportsQueryBins",!1),supportsQueryTopFeatures:Qe(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Qe(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:Qe(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:Qe(t,"supportsAsyncConvert3D",!1)}}function e$e(e,t){const i=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t?.includes("MapServer"),a=!o||n>=le("mapserver-pbf-version-support"),l=q8(t),u=new Set((e.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{maxRecordCount:a_(e,"maxRecordCount",void 0),maxRecordCountFactor:a_(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:a_(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:WAe(i),supportsCacheHint:Qe(i,"supportsQueryWithCacheHint",!1)||mx(i,"query"),supportsCentroid:Qe(i,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsDefaultSpatialReference:Qe(i,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:Qe(i,"supportsDisjointSpatialRel",!1),supportsDistance:Qe(i,"supportsQueryWithDistance",!1),supportsDistinct:Qe(i,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Qe(i,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&u.has("pbf"),supportsFullTextSearch:Qe(i,"supportsFullTextSearch",!1),supportsGeometryProperties:Qe(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:Qe(i,"supportsHavingClause",!1),supportsHistoricMoment:Qe(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:Qe(i,"supportsMaxRecordCountFactor",!1),supportsOrderBy:Qe(i,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Qe(i,"supportsPagination",!1),supportsPercentileStatistics:Qe(i,"supportsPercentileStatistics",!1),supportsQuantization:Qe(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Qe(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:Qe(r,"allowAnonymousToQuery",!0),supportsQueryByOthers:Qe(r,"allowOthersToQuery",!0),supportsQueryGeometry:Qe(e,"supportsReturningQueryGeometry",!1),supportsResultType:Qe(i,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:Qe(i,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:Qe(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Qe(e,"useStandardizedQueries",!1),supportsStatistics:Qe(i,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:Qe(i,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:a_(e,"tileMaxRecordCount",void 0)}}function t$e(e){const t=e.advancedQueryCapabilities,i=Qe(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Qe(t,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:mx(t,"queryRelated")}}function i$e(e){return{supportsCacheHint:mx(e.advancedQueryCapabilities,"queryTopFilter")}}function r$e(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:Qe(t,"supportsDateBin",!1),supportsFixedInterval:Qe(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:Qe(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:Qe(t,"supportsFixedBoundariesBin",!1),supportedStatistics:JAe(t)}}function s$e(e){const t=e.ownershipBasedAccessControlForFeatures,i=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:Qe(e,"allowGeometryUpdates",!0),supportsGlobalId:Qe(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Qe(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Qe(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Qe(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Qe(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Qe(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Qe(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Qe(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Qe(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:Qe(i,"supportsAsyncApplyEdits",!1),zDefault:a_(e,"zDefault",void 0)}}function wdt(e){return{operations:{supportsAppend:Qe(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:Qe(e,"supportsExportClip",!1),supportsExportFrameset:Qe(e,"supportsExportFrameset",!1),supportsMensuration:Qe(e,"supportsMensuration",!1),supportsUpdate:Qe(e,"supportsUpdate",!1)}}}let ih=class extends Dt(ae){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const r of Object.keys(t))i[r]=rC(t[r]);return i}writeDomains(t,i){if(!t)return;const r={};for(const s of Object.keys(t))t[s]&&(r[s]=t[s]?.toJSON());i.domains=r}};c([d({type:Number,json:{write:!0}})],ih.prototype,"code",void 0),c([d({type:Object,json:{write:!0}})],ih.prototype,"defaultValues",void 0),c([d({json:{write:!0}})],ih.prototype,"domains",void 0),c([ue("domains")],ih.prototype,"readDomains",null),c([ge("domains")],ih.prototype,"writeDomains",null),c([d({type:String,json:{write:!0}})],ih.prototype,"name",void 0),ih=c([F("esri.layers.support.Subtype")],ih);const n$e=ih,o$e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Be.ofType(Vu)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=ke.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:i}=this;if(i){const{query:s,operations:n,editing:o}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(this.serviceDefinitionExpression?.toLowerCase().includes("current_user"))return"load";if(this.userHasUpdateItemPrivileges){if(VAe(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const r=this.editFieldsInfo;return(r?.creatorField||r?.editorField)&&i?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(i,r){return s9(r,this.url)}readEditingInfo(i,r){const{editingInfo:s}=r;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const i=this.capabilities;if(!i)return null;const r=K(i),{operations:s,editing:n}=r;return zM(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),r):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,r):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),r)}readGlobalIdFieldFromService(i,r){return tne(r)}get hasFullEditingRestrictions(){const i=this.capabilities;if(!i||zM(this))return!1;const{operations:r,editing:s}=i;return r.supportsEditing&&!(r.supportsAdd&&r.supportsDelete&&r.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const i=this.capabilities;if(!i)return!1;const{operations:r,editing:s}=i;return zM(this)?!r.supportsQuery:!(r.supportsAdd&&r.supportsDelete&&r.supportsEditing&&r.supportsQuery&&r.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,r){return r.type==="Table"}readMaxScale(i,r){return r.effectiveMaxScale||i||0}readMinScale(i,r){return r.effectiveMinScale||i||0}readObjectIdFieldFromService(i,r){return ine(r)}readServiceDefinitionExpression(i,r){return r.definitionQuery||r.definitionExpression}set url(i){if(i==null)return void this._set("url",i);const r=mIe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:xe.getLogger(this)});this._set("url",r.url),r.layerId!=null&&this._set("layerId",r.layerId)}writeUrl(i,r,s,n){yIe(this,i,null,r,n)}readVersion(i,r){return LAe(r)}};return c([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),c([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),c([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),c([ue("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),c([d(f1("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),c([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),c([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),c([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),c([d({readOnly:!0,type:yAe})],t.prototype,"editFieldsInfo",void 0),c([d({readOnly:!0})],t.prototype,"editingInfo",void 0),c([ue("editingInfo")],t.prototype,"readEditingInfo",null),c([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),c([d((()=>{const i=K(hAe),r=i.json.origins;return r["web-map"]={read:!1,write:!1},r["portal-item"]={read:!1,write:!1},i})())],t.prototype,"elevationInfo",void 0),c([d({type:nne,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:As}}}}})],t.prototype,"floorInfo",void 0),c([d({type:bt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),c([d()],t.prototype,"gdbVersion",void 0),c([d({readOnly:!0,type:qAe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),c([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:tk.read}}}})],t.prototype,"geometryType",void 0),c([d({type:String})],t.prototype,"globalIdField",void 0),c([ue("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),c([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),c([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),c([d({readOnly:!0,type:uC})],t.prototype,"heightModelInfo",void 0),c([d({type:Date})],t.prototype,"historicMoment",void 0),c([d({type:Be.ofType(Vu),readOnly:!0})],t.prototype,"indexes",void 0),c([d({readOnly:!0})],t.prototype,"isTable",void 0),c([ue("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),c([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),c([d(fAe)],t.prototype,"maxScale",void 0),c([ue("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),c([d(dAe)],t.prototype,"minScale",void 0),c([ue("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),c([d({type:String})],t.prototype,"objectIdField",void 0),c([ue("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),c([d(f1("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),c([d({type:[one],readOnly:!0})],t.prototype,"relationships",void 0),c([d({type:Boolean})],t.prototype,"returnM",void 0),c([d({type:Boolean})],t.prototype,"returnZ",void 0),c([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),c([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),c([ue("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),c([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),c([d()],t.prototype,"sourceJSON",void 0),c([d({type:ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),c([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),c([d({type:[n$e],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),c([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),c([d(fx)],t.prototype,"url",null),c([ge("url")],t.prototype,"writeUrl",null),c([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),c([ue("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=c([F("esri.layers.mixins.FeatureLayerBase")],t),t};let $0=class extends Dt(ae){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};c([d({type:String,json:{write:!0}})],$0.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],$0.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],$0.prototype,"returnType",void 0),$0=c([F("esri.layers.support.ExpressionInfo")],$0);const n9=$0;var rk;let rh=rk=class extends ae{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new rk({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:K(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};c([d({type:Boolean,json:{write:!0}})],rh.prototype,"isAutoGenerated",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"alias",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"onStatisticField",void 0),c([d({type:n9,json:{write:!0}})],rh.prototype,"onStatisticExpression",void 0),c([d({type:String,json:{write:!0}})],rh.prototype,"statisticType",void 0),rh=rk=c([F("esri.layers.support.AggregateField")],rh);const tg=rh;let Gd=class extends ae{constructor(){super(...arguments),this.type=null}};c([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Gd.prototype,"type",void 0),Gd=c([F("esri.layers.support.FeatureReduction")],Gd);const o9="__begin__",a9="__end__",a$e=new RegExp(o9,"ig"),l$e=new RegExp(a9,"ig"),Vz=new RegExp("^"+o9,"i"),Gz=new RegExp(a9+"$","i"),R3='"',u$e=R3+" + ",c$e=" + "+R3;function h$e(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function p$e(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function l9(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=h$e(e.labelExpression),t.type="conventional"),t}function d$e(e){const t=l9(e);if(!t)return null;switch(t.type){case"conventional":return sk(t.expression);case"arcade":return t.expression}return null}function f$e(e){const t=l9(e);if(!t)return null;switch(t.type){case"conventional":return y$e(t.expression);case"arcade":return lne(t.expression)}return null}function sk(e){let t;return e?(t=a$(e,i=>o9+'$feature["'+i+'"]'+a9),t=Vz.test(t)?t.replace(Vz,""):R3+t,t=Gz.test(t)?t.replace(Gz,""):t+R3,t=t.replaceAll(a$e,u$e).replaceAll(l$e,c$e)):t='""',t}const m$e=/^\s*\{([^}]+)\}\s*$/i;function y$e(e){return e?.match(m$e)?.[1].trim()||null}const g$e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,v$e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,b$e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function lne(e){if(!e)return null;let t=g$e.exec(e)||v$e.exec(e);return t?t[1]||t[3]:(t=b$e.exec(e),t?t[2]:null)}var nk;let Jp=nk=class extends ae{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?sk(t.value):e}writeExpression(e,t,i){this.value!=null&&(e=sk(this.value)),e!=null&&(t[i]=e)}clone(){return new nk({expression:this.expression,title:this.title,value:this.value})}};c([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Jp.prototype,"expression",void 0),c([ue("expression",["expression","value"])],Jp.prototype,"readExpression",null),c([ge("expression")],Jp.prototype,"writeExpression",null),c([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Jp.prototype,"title",void 0),c([d({json:{read:!1,write:!1}})],Jp.prototype,"value",void 0),Jp=nk=c([F("esri.layers.support.LabelExpressionInfo")],Jp);const une=Jp;var ok;const AT=new gt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function $T(e,t,i){return{enabled:!sP(i?.layer)}}function cne(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function w$e(e){return e?.type==="map-image"}function hne(e){return!!w$e(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function _$e(e){return cne(e)||hne(e?.layer)}let wr=ok=class extends ae{static evaluateWhere(e,t){const i=(r,s,n)=>{switch(s){case"=":return r==n;case"<>":return r!=n;case">":return r>n;case">=":return r>=n;case"<":return r<n;case"<=":return r<=n}return!1};try{if(e==null)return!0;const r=e.split(" ");if(r.length===3)return i(t[r[0]],r[1],r[2]);if(r.length===7){const s=i(t[r[0]],r[1],r[2]),n=r[3],o=i(t[r[4]],r[5],r[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Pxe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const i=t.labelExpressionInfo;if(!i||!i.value&&!i.expression)return e}writeLabelExpression(e,t,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=p$e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const r=lne(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}}e!=null&&(t[i]=e)}writeLabelExpressionInfo(e,t,i,r){if(e==null&&this.labelExpression!=null&&cne(r))e=new une({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(r);s.expression&&(t[i]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return l9(this)}getLabelExpressionArcade(){return d$e(this)}getLabelExpressionSingleField(){return f$e(this)}hash(){return JSON.stringify(this)}clone(){return new ok({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:K(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:K(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([d({type:String,json:{write:!0}})],wr.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:$T}}}}})],wr.prototype,"allowOverrun",void 0),c([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:$T}}}}})],wr.prototype,"deconflictionStrategy",void 0),c([d({type:String,json:{write:{overridePolicy(e,t,i){return this.labelExpressionInfo&&i?.origin==="service"&&hne(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],wr.prototype,"labelExpression",void 0),c([ue("labelExpression")],wr.prototype,"readLabelExpression",null),c([ge("labelExpression")],wr.prototype,"writeLabelExpression",null),c([d({type:une,json:{write:{overridePolicy:(e,t,i)=>_$e(i)?{allowNull:!0}:{enabled:!1}}}})],wr.prototype,"labelExpressionInfo",void 0),c([ge("labelExpressionInfo")],wr.prototype,"writeLabelExpressionInfo",null),c([d({type:AT.apiValues,json:{type:AT.jsonValues,read:AT.read,write:AT.write}})],wr.prototype,"labelPlacement",void 0),c([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],wr.prototype,"labelPosition",void 0),c([d({type:Number})],wr.prototype,"maxScale",void 0),c([ge("maxScale")],wr.prototype,"writeMaxScale",null),c([d({type:Number})],wr.prototype,"minScale",void 0),c([ge("minScale")],wr.prototype,"writeMinScale",null),c([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:$T}}}}})],wr.prototype,"repeatLabel",void 0),c([d({type:Number,cast:qt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:$T}}}}})],wr.prototype,"repeatLabelDistance",void 0),c([d({types:qSe,json:{origins:{"web-scene":{types:HSe,write:vG,default:null}},write:vG,default:null}})],wr.prototype,"symbol",void 0),c([d({type:Boolean,json:{write:!0}})],wr.prototype,"useCodedValues",void 0),c([d({type:String,json:{write:!0}})],wr.prototype,"where",void 0),wr=ok=c([F("esri.layers.support.LabelClass")],wr);const yx=wr;var ak;let an=ak=class extends Gd{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=qt("12px"),this.fields=[],this.renderer=null}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Zr(i,r,t)}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?Y2(r,t,i)??void 0:r9(t,i)}clone(){return new ak({fields:K(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:K(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:K(this.popupTemplate),renderer:K(this.renderer),binType:K(this.binType),size:this.size})}};c([Ue({binning:"binning"})],an.prototype,"type",void 0),c([Ue({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],an.prototype,"binType",void 0),c([d({type:Number,json:{write:!0}})],an.prototype,"fixedBinLevel",void 0),c([d({type:[yx],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],an.prototype,"labelingInfo",void 0),c([d(Q8)],an.prototype,"labelsVisible",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],an.prototype,"maxScale",void 0),c([d(dx)],an.prototype,"popupEnabled",void 0),c([d({type:df,json:{name:"popupInfo",write:!0}})],an.prototype,"popupTemplate",void 0),c([d({cast:e=>e==="auto"?e:bn(qt(e))})],an.prototype,"size",void 0),c([d({type:[tg],json:{write:!0}})],an.prototype,"fields",void 0),c([ge("fields")],an.prototype,"writeFields",null),c([d({types:hx,json:{write:{target:"drawingInfo.renderer"}}})],an.prototype,"renderer",void 0),c([ue("renderer",["drawingInfo.renderer"])],an.prototype,"readRenderer",null),an=ak=c([F("esri.layers.support.FeatureReductionBinning")],an);const pne=an;var lk;function Bz(e){return e.type==="simple"&&!e.visualVariables?.length}let Gr=lk=class extends ae{constructor(e){super(e),this.type="cluster",this.clusterRadius=qt("80px"),this.clusterMinSize=qt("12px"),this.clusterMaxSize=qt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r?Bz(r)?null:Y2(r,t,i)??void 0:r9(t,i)}readSymbol(e,t,i){const r=t.drawingInfo?.renderer;return r?.authoringInfo?.isAutoGenerated?null:r&&Bz(r)?Y2(r,t,i)?.symbol:null}writeSymbol(e,t,i,r){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new _g({symbol:e});t.drawingInfo={renderer:n.write({},r)}}}writeFields(e,t,i){const r=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());Zr(i,r,t)}readFields(e,t,i){return e.filter(r=>!r.isAutoGenerated).map(r=>tg.fromJSON(r))}clone(){return new lk({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:K(this.labelingInfo),labelsVisible:this.labelsVisible,fields:K(this.fields),maxScale:this.maxScale,renderer:K(this.renderer),symbol:K(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:K(this.popupTemplate)})}};c([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Gr.prototype,"type",void 0),c([d({cast:e=>e==="auto"?e:bn(qt(e)),json:{write:!0}})],Gr.prototype,"clusterRadius",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Gr.prototype,"clusterMinSize",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],Gr.prototype,"clusterMaxSize",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Gr.prototype,"maxScale",void 0),c([d(dx)],Gr.prototype,"popupEnabled",void 0),c([d({type:df,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Gr.prototype,"popupTemplate",void 0),c([d({types:hx,json:{write:{target:"drawingInfo.renderer"}}})],Gr.prototype,"renderer",void 0),c([ue("renderer",["drawingInfo.renderer"])],Gr.prototype,"readRenderer",null),c([d({types:BSe})],Gr.prototype,"symbol",void 0),c([ue("symbol",["drawingInfo.renderer"])],Gr.prototype,"readSymbol",null),c([ge("symbol")],Gr.prototype,"writeSymbol",null),c([d({type:[yx],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Gr.prototype,"labelingInfo",void 0),c([d(Q8)],Gr.prototype,"labelsVisible",void 0),c([d({type:[tg],json:{write:!0}})],Gr.prototype,"fields",void 0),c([ge("fields")],Gr.prototype,"writeFields",null),c([ue("fields")],Gr.prototype,"readFields",null),Gr=lk=c([F("esri.layers.support.FeatureReductionCluster")],Gr);const dne=Gr;var uk;let qM=uk=class extends Gd{constructor(e){super(e),this.type="selection"}clone(){return new uk}};c([d({type:["selection"]})],qM.prototype,"type",void 0),qM=uk=c([F("esri.layers.support.FeatureReductionSelection")],qM);const zz=qM,qz={key:"type",base:Gd,typeMap:{cluster:dne,binning:pne}},S$e={types:{key:"type",base:Gd,typeMap:{selection:zz,cluster:dne,binning:pne}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:qz},"portal-item":{types:qz},"web-scene":{types:{key:"type",base:Gd,typeMap:{selection:zz}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:As}}}}},zg={Base64:0,Hex:1,String:2,Raw:3},Fv=8,fne=(1<<Fv)-1;function Pd(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function x$e(e){const t=[];for(let i=0,r=e.length*Fv;i<r;i+=Fv)t[i>>5]|=(e.charCodeAt(i/Fv)&fne)<<i%32;return t}function T$e(e){const t=[];for(let i=0,r=32*e.length;i<r;i+=Fv)t.push(String.fromCharCode(e[i>>5]>>>i%32&fne));return t.join("")}function E$e(e){const t="0123456789abcdef",i=[];for(let r=0,s=4*e.length;r<s;r++)i.push(t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15));return i.join("")}function M$e(e){const t="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*e.length?r.push(t):r.push(i.charAt(o>>6*(3-a)&63))}return r.join("")}function I$e(e,t){return e<<t|e>>>32-t}function cC(e,t,i,r,s,n){return Pd(I$e(Pd(Pd(t,e),Pd(r,n)),s),i)}function Qs(e,t,i,r,s,n,o){return cC(t&i|~t&r,e,t,s,n,o)}function en(e,t,i,r,s,n,o){return cC(t&r|i&~r,e,t,s,n,o)}function tn(e,t,i,r,s,n,o){return cC(t^i^r,e,t,s,n,o)}function rn(e,t,i,r,s,n,o){return cC(i^(t|~r),e,t,s,n,o)}function A$e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let i=1732584193,r=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const a=i,l=r,u=s,h=n;i=Qs(i,r,s,n,e[o],7,-680876936),n=Qs(n,i,r,s,e[o+1],12,-389564586),s=Qs(s,n,i,r,e[o+2],17,606105819),r=Qs(r,s,n,i,e[o+3],22,-1044525330),i=Qs(i,r,s,n,e[o+4],7,-176418897),n=Qs(n,i,r,s,e[o+5],12,1200080426),s=Qs(s,n,i,r,e[o+6],17,-1473231341),r=Qs(r,s,n,i,e[o+7],22,-45705983),i=Qs(i,r,s,n,e[o+8],7,1770035416),n=Qs(n,i,r,s,e[o+9],12,-1958414417),s=Qs(s,n,i,r,e[o+10],17,-42063),r=Qs(r,s,n,i,e[o+11],22,-1990404162),i=Qs(i,r,s,n,e[o+12],7,1804603682),n=Qs(n,i,r,s,e[o+13],12,-40341101),s=Qs(s,n,i,r,e[o+14],17,-1502002290),r=Qs(r,s,n,i,e[o+15],22,1236535329),i=en(i,r,s,n,e[o+1],5,-165796510),n=en(n,i,r,s,e[o+6],9,-1069501632),s=en(s,n,i,r,e[o+11],14,643717713),r=en(r,s,n,i,e[o],20,-373897302),i=en(i,r,s,n,e[o+5],5,-701558691),n=en(n,i,r,s,e[o+10],9,38016083),s=en(s,n,i,r,e[o+15],14,-660478335),r=en(r,s,n,i,e[o+4],20,-405537848),i=en(i,r,s,n,e[o+9],5,568446438),n=en(n,i,r,s,e[o+14],9,-1019803690),s=en(s,n,i,r,e[o+3],14,-187363961),r=en(r,s,n,i,e[o+8],20,1163531501),i=en(i,r,s,n,e[o+13],5,-1444681467),n=en(n,i,r,s,e[o+2],9,-51403784),s=en(s,n,i,r,e[o+7],14,1735328473),r=en(r,s,n,i,e[o+12],20,-1926607734),i=tn(i,r,s,n,e[o+5],4,-378558),n=tn(n,i,r,s,e[o+8],11,-2022574463),s=tn(s,n,i,r,e[o+11],16,1839030562),r=tn(r,s,n,i,e[o+14],23,-35309556),i=tn(i,r,s,n,e[o+1],4,-1530992060),n=tn(n,i,r,s,e[o+4],11,1272893353),s=tn(s,n,i,r,e[o+7],16,-155497632),r=tn(r,s,n,i,e[o+10],23,-1094730640),i=tn(i,r,s,n,e[o+13],4,681279174),n=tn(n,i,r,s,e[o],11,-358537222),s=tn(s,n,i,r,e[o+3],16,-722521979),r=tn(r,s,n,i,e[o+6],23,76029189),i=tn(i,r,s,n,e[o+9],4,-640364487),n=tn(n,i,r,s,e[o+12],11,-421815835),s=tn(s,n,i,r,e[o+15],16,530742520),r=tn(r,s,n,i,e[o+2],23,-995338651),i=rn(i,r,s,n,e[o],6,-198630844),n=rn(n,i,r,s,e[o+7],10,1126891415),s=rn(s,n,i,r,e[o+14],15,-1416354905),r=rn(r,s,n,i,e[o+5],21,-57434055),i=rn(i,r,s,n,e[o+12],6,1700485571),n=rn(n,i,r,s,e[o+3],10,-1894986606),s=rn(s,n,i,r,e[o+10],15,-1051523),r=rn(r,s,n,i,e[o+1],21,-2054922799),i=rn(i,r,s,n,e[o+8],6,1873313359),n=rn(n,i,r,s,e[o+15],10,-30611744),s=rn(s,n,i,r,e[o+6],15,-1560198380),r=rn(r,s,n,i,e[o+13],21,1309151649),i=rn(i,r,s,n,e[o+4],6,-145523070),n=rn(n,i,r,s,e[o+11],10,-1120210379),s=rn(s,n,i,r,e[o+2],15,718787259),r=rn(r,s,n,i,e[o+9],21,-343485551),i=Pd(i,a),r=Pd(r,l),s=Pd(s,u),n=Pd(n,h)}return[i,r,s,n]}function mne(e,t=zg.Hex){const i=t||zg.Base64,r=A$e(x$e(e),e.length*Fv);switch(i){case zg.Raw:return r;case zg.Hex:return E$e(r);case zg.String:return T$e(r);case zg.Base64:return M$e(r)}}const $$e=()=>xe.getLogger("esri.views.2d.layers.support.clusterUtils");le.add("esri-cluster-arcade-enabled",!0);const C$e=le("esri-cluster-arcade-enabled"),R$e=new Set(["simple-line","simple-fill","picture-fill"]);function Hz(e,t){let i=t.clone();if(!O$e(i))return i;if(t.getSymbols().some(r=>R$e.has(r.type))&&(i=new _g({symbol:new Uo})),i.authoringInfo||(i.authoringInfo=new ax),i.authoringInfo.isAutoGenerated=!0,"visualVariables"in i){const r=(i.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");r.forEach(s=>{s.type==="rotation"?s.field?s.field=qf(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=zb(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=qf(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=qf(e,s.field,"avg","number"):s.valueExpression&&(s.field=zb(e,s.valueExpression,"avg","number"),s.valueExpression=null)}),i.visualVariables=r}switch(i.type){case"simple":break;case"pie-chart":for(const r of i.attributes)r.field?r.field=qf(e,r.field,"sum","number"):r.valueExpression&&(r.field=zb(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":i.field?i.field=qf(e,i.field,"mode","string"):i.valueExpression&&(i.field=zb(e,i.valueExpression,"mode","string"),i.valueExpression=null);break;case"class-breaks":i.normalizationField?(i.field=qf(e,i.field,"avg_norm","number",i.normalizationField),i.normalizationField=null):i.field?i.field=qf(e,i.field,"avg","number"):i.valueExpression&&(i.field=zb(e,i.valueExpression,"avg","number"),i.valueExpression=null)}return i}const O$e=e=>{const t=i=>$$e().error(new W("Unsupported-renderer",i,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const i=e.normalizationType;if(i!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!C$e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function P$e(e,t,i){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const r=i,s="field",n=t.toLowerCase()+",norm:"+s+","+r.toLowerCase();return"cluster_avg_"+mne(n)}}}function zb(e,t,i,r){const s=mne(t),n=i==="mode"?`cluster_type_${s}`:i==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(o=>o.name===n)||e.push(new tg({name:n,isAutoGenerated:!0,onStatisticExpression:new n9({expression:t,returnType:r}),statisticType:i})),n}function qf(e,t,i,r,s){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const n=P$e(i,t,s);return e.some(o=>o.name===n)||(i==="avg_norm"?e.push(new tg({name:n,isAutoGenerated:!0,onStatisticExpression:new n9({expression:`$feature.${t} / $feature.${s}`,returnType:r}),statisticType:"avg"})):e.push(new tg({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:i}))),n}const L$e=e=>{let t=class extends e{constructor(...i){super(...i),this.addHandles(at(()=>this.renderer,()=>{if(this.featureReduction){const r=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",r)}},ns))}set featureReduction(i){const r=this._normalizeFeatureReduction(i);this._set("featureReduction",r)}set renderer(i){}_withClusterVariable(i,r,s){const n=i.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new vf({field:"cluster_count",stops:[new EM({value:1}),new EM({useMinValue:!0,size:r}),new EM({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(i){if(i?.type!=="cluster")return i;const r=i.clone(),s=[new tg({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(r.fields??[]).filter(p=>!p.isAutoGenerated),o=i.renderer&&!i.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:a,clusterMaxSize:l}=r;if(o){r.fields=[...s,...n];const p=this._withClusterVariable(r.renderer,a,l);return r.effectiveFeatureRenderer=p,r.effectiveClusterRenderer=p,r}if(i.symbol){if(r.fields=[...s,...n],r.renderer=null,!this.renderer)return r.effectiveFeatureRenderer=null,r.effectiveClusterRenderer=null,r;const p=Hz(s,this.renderer),f=this._withClusterVariable(p,a,l),m="visualVariables"in f&&f.visualVariables?f.visualVariables:[],g=new _g({symbol:i.symbol,visualVariables:m});return r.fields=[...s,...n],r.effectiveFeatureRenderer=f,r.effectiveClusterRenderer=g,r}if(!this.renderer)return i;const u=Hz(s,this.renderer);r.fields=[...s,...n],r.renderer=u;const h=this._withClusterVariable(u,a,l);return r.effectiveFeatureRenderer=h,r.effectiveClusterRenderer=h,r}};return c([d(S$e)],t.prototype,"featureReduction",null),t=c([F("esri.layers.mixins.FeatureReductionLayer")],t),t},Wz={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},Jz={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},Zz={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},N$e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Wz,"web-map/basemap":Jz,"web-map/tables":Zz,"link-chart/operational-layers":{...Wz,LinkChartLayer:!0},"link-chart/basemap":Jz,"link-chart/tables":Zz,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},yb=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,r,s){return s?.portalItem?.type==="Group Layer"?void 0:i}writeListMode(i,r,s,n){(n&&n.layerContainerType==="ground"||i&&uQ(this,s,{},n))&&(r[s]=i)}writeOperationalLayerType(i,r,s,n){i&&n?.layerContainerType!=="tables"&&(r.layerType=i)}writeTitle(i,r){r.title=i??"Layer"}readTimeExtent(i){return i?io.fromArray(i):null}writeTimeExtent(i,r,s,n){i&&n.layerContainerType!=="tables"&&(i.isEmpty?n?.messages&&n.messages.push(new W("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):r[s]=i.toArray())}read(i,r){r&&(r.layer=this),jge(this,i,s=>super.read(i,s),r)}write(i,r){if(!this.persistenceEnabled&&!r?.ignorePersistenceEnabled)return null;if(r?.origin){const o=`${r.origin}/${r.layerContainerType||"operational-layers"}`;let l=!!N$e[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(l=!1),!l)return r.messages?.push(new W("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const s=super.write(i,{...r,layer:this}),n=!!r&&!!r.messages&&!!r.messages.filter(o=>o instanceof W&&o.name==="web-document-write:property-required").length;return g$(s?.url)?(r?.messages?.push(new W("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return c([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),c([ue("id",["id"])],t.prototype,"readId",null),c([d(Xse)],t.prototype,"listMode",void 0),c([ge("listMode")],t.prototype,"writeListMode",null),c([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:As}}}}})],t.prototype,"operationalLayerType",void 0),c([ge("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),c([d(C3)],t.prototype,"opacity",void 0),c([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),c([ge("title"),ge(["web-scene"],"title")],t.prototype,"writeTitle",null),c([d({type:io,json:{origins:{"web-scene":{write:{layerContainerTypes:As}}}}})],t.prototype,"visibilityTimeExtent",void 0),c([ue("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),c([ge(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[vt,m$]]}})],t.prototype,"writeTimeExtent",null),c([d({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:As}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=c([F("esri.layers.mixins.OperationalLayer")],t),t};var ck;const CT=new gt({asc:"ascending",desc:"descending"});let C0=ck=class extends ae{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new ck({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([d({type:String,json:{write:!0}})],C0.prototype,"field",void 0),c([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],C0.prototype,"valueExpression",void 0),c([d({type:CT.apiValues,json:{type:CT.jsonValues,read:CT.read,write:CT.write}})],C0.prototype,"order",void 0),C0=ck=c([F("esri.layers.support.OrderByInfo")],C0);const yne=C0;function k$e(e,t,i){if(!e)return null;const r=e.find(n=>!!n.field);if(!r)return null;const s=new yne;return s.read(r,i),[s]}function D$e(e,t,i,r){const s=e.find(n=>!!n.field);s&&Zr(i,[s.toJSON()],t)}const F$e={type:[yne],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:k$e},write:{writer:D$e}}},j$e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return c([d(F$e)],t.prototype,"orderBy",void 0),t=c([F("esri.layers.mixins.OrderedLayer")],t),t},Tdt=Math.PI/180,Edt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Mp=mr.radius,yl=mr.eccentricitySquared,U$e={a1:Mp*yl,a2:Mp*yl*Mp*yl,a3:Mp*yl*yl/2,a4:Mp*yl*Mp*yl*2.5,a5:Mp*yl+Mp*yl*yl/2,a6:1-yl},Mdt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:mr.radius,f:mr.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Kd.radius,f:Kd.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:lc.radius,f:lc.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:lc.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var oe;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(oe||(oe={}));const V$e={[oe.WGS84]:{[oe.CGCS2000]:qi,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:qi,[oe.SPHERICAL_ECEF]:K_,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:jv,[oe.PLATE_CARREE]:Uv,[oe.WGS84]:qi,[oe.WGS84_ECEF]:Bv},[oe.CGCS2000]:{[oe.CGCS2000]:qi,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:qi,[oe.SPHERICAL_ECEF]:K_,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:jv,[oe.PLATE_CARREE]:Uv,[oe.WGS84]:qi,[oe.WGS84_ECEF]:Bv},[oe.GCSMARS2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:qi,[oe.GCSMOON2000]:null,[oe.LON_LAT]:qi,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:Xz,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.GCSMOON2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:qi,[oe.LON_LAT]:qi,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:Kz,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.WEB_MERCATOR]:{[oe.CGCS2000]:Y_,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Y_,[oe.SPHERICAL_ECEF]:G$e,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:qi,[oe.PLATE_CARREE]:q$e,[oe.WGS84]:Y_,[oe.WGS84_ECEF]:B$e},[oe.WGS84_ECEF]:{[oe.CGCS2000]:zv,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:zv,[oe.SPHERICAL_ECEF]:eCe,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:tCe,[oe.PLATE_CARREE]:H$e,[oe.WGS84]:zv,[oe.WGS84_ECEF]:qi},[oe.SPHERICAL_ECEF]:{[oe.CGCS2000]:Gv,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Gv,[oe.SPHERICAL_ECEF]:qi,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:K$e,[oe.PLATE_CARREE]:W$e,[oe.WGS84]:Gv,[oe.WGS84_ECEF]:X$e},[oe.SPHERICAL_MARS_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:eq,[oe.GCSMOON2000]:null,[oe.LON_LAT]:eq,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:qi,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.SPHERICAL_MOON_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:Qz,[oe.LON_LAT]:Qz,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:qi,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.UNKNOWN]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:null,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:qi,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.LON_LAT]:{[oe.CGCS2000]:qi,[oe.GCSMARS2000]:qi,[oe.GCSMOON2000]:qi,[oe.LON_LAT]:qi,[oe.SPHERICAL_ECEF]:K_,[oe.SPHERICAL_MARS_PCPF]:Xz,[oe.SPHERICAL_MOON_PCPF]:Kz,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:jv,[oe.PLATE_CARREE]:Uv,[oe.WGS84]:qi,[oe.WGS84_ECEF]:Bv},[oe.PLATE_CARREE]:{[oe.CGCS2000]:Vv,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Vv,[oe.SPHERICAL_ECEF]:J$e,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:Z$e,[oe.PLATE_CARREE]:qi,[oe.WGS84]:Vv,[oe.WGS84_ECEF]:Y$e}};function gne(e,t,i=vne()){return e==null||t==null?null:iCe(e,t,i).projector}function Yz(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=$c(e,1)),d3(e)?t.spatialReferenceId=oe.SPHERICAL_ECEF:zy(e)?t.spatialReferenceId=oe.WGS84:ga(e)?t.spatialReferenceId=oe.WEB_MERCATOR:ove(e)?t.spatialReferenceId=oe.PLATE_CARREE:e.wkt===cve.wkt?t.spatialReferenceId=oe.WGS84_ECEF:e.wkid===By.CGCS2000?t.spatialReferenceId=oe.CGCS2000:e.wkt===MF.wkt?t.spatialReferenceId=oe.SPHERICAL_MARS_PCPF:e.wkt===IF.wkt?t.spatialReferenceId=oe.SPHERICAL_MOON_PCPF:jQ(e)?t.spatialReferenceId=oe.GCSMARS2000:UQ(e)?t.spatialReferenceId=oe.GCSMOON2000:t.spatialReferenceId=oe.UNKNOWN):oe.UNKNOWN}function qi(e,t,i,r){e!==i&&(i[r++]=e[t++],i[r++]=e[t++],i[r]=e[t])}function Y_(e,t,i,r){i[r]=S1*(e[t]/My),i[r+1]=S1*(wne-2*Math.atan(Math.exp(-e[t+1]/My))),i[r+2]=e[t+2]}function G$e(e,t,i,r){const s=e[t]/My,n=wne-2*Math.atan(Math.exp(-e[t+1]/My)),o=My+e[t+2],a=Math.cos(n)*o;i[r]=Math.cos(s)*a,i[r+1]=Math.sin(s)*a,i[r+2]=Math.sin(n)*o}function B$e(e,t,i,r){Y_(e,t,i,r),Bv(i,r,i,r)}function z$e(e,t,i,r,s){const n=.4999999*hC,o=rl(_1*e[t+1],-n,n),a=Math.sin(o);i[r++]=_1*e[t]*s.radius,i[r++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[r]=e[t+2]}function jv(e,t,i,r){z$e(e,t,i,r,mr)}function Uv(e,t,i,r){i[r]=e[t]*tq,i[r+1]=e[t+1]*tq,i[r+2]=e[t+2]}function Vv(e,t,i,r){i[r]=e[t]*iq,i[r+1]=e[t+1]*iq,i[r+2]=e[t+2]}function q$e(e,t,i,r){Y_(e,t,i,r),Uv(i,r,i,r)}function H$e(e,t,i,r){zv(e,t,i,r),Uv(i,r,i,r)}function W$e(e,t,i,r){Gv(e,t,i,r),Uv(i,r,i,r)}function J$e(e,t,i,r){Vv(e,t,i,r),K_(i,r,i,r)}function Z$e(e,t,i,r){Vv(e,t,i,r),jv(i,r,i,r)}function Y$e(e,t,i,r){Vv(e,t,i,r),Bv(i,r,i,r)}function u9(e,t,i,r,s){const n=s+e[t+2],o=_1*e[t+1],a=_1*e[t],l=Math.cos(o)*n;i[r]=Math.cos(a)*l,i[r+1]=Math.sin(a)*l,i[r+2]=Math.sin(o)*n}function Kz(e,t,i,r){u9(e,t,i,r,Kd.radius)}function Xz(e,t,i,r){u9(e,t,i,r,lc.radius)}function K_(e,t,i,r){u9(e,t,i,r,mr.radius)}function c9(e,t,i,r,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),u=N1e(a/(l===0?1:l)),h=Math.atan2(o,n);i[r++]=S1*h,i[r++]=S1*u,i[r]=l-s}function Qz(e,t,i,r){c9(e,t,i,r,Kd.radius)}function eq(e,t,i,r){c9(e,t,i,r,lc.radius)}function Gv(e,t,i,r){c9(e,t,i,r,mr.radius)}function K$e(e,t,i,r){Gv(e,t,i,r),jv(i,r,i,r)}function X$e(e,t,i,r){Gv(e,t,i,r),Bv(i,r,i,r)}function Q$e(e,t,i,r,s){const n=_1*e[t],o=_1*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),h=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);i[r++]=(h+a)*u*Math.cos(n),i[r++]=(h+a)*u*Math.sin(n),i[r++]=(h*(1-s.eccentricitySquared)+a)*l}function Bv(e,t,i,r){Q$e(e,t,i,r,mr)}function zv(e,t,i,r){const s=U$e,n=e[t],o=e[t+1],a=e[t+2];let l,u,h,p,f,m,g,b,w,S,T,x,_,M,I,A,C,R,O,k,L;l=Math.abs(a),u=n*n+o*o,h=Math.sqrt(u),p=u+a*a,f=Math.sqrt(p),k=Math.atan2(o,n),m=a*a/p,g=u/p,M=s.a2/f,I=s.a3-s.a4/f,g>.3?(b=l/f*(1+g*(s.a1+M+m*I)/f),O=Math.asin(b),S=b*b,w=Math.sqrt(1-S)):(w=h/f*(1-m*(s.a5-M-g*I)/f),O=Math.acos(w),S=1-w*w,b=Math.sqrt(S)),T=1-mr.eccentricitySquared*S,x=mr.radius/Math.sqrt(T),_=s.a6*x,M=h-x*w,I=l-_*b,C=w*M+b*I,A=w*I-b*M,R=A/(_/T+C),O+=R,L=C+A*R/2,a<0&&(O=-O),i[r++]=S1*k,i[r++]=S1*O,i[r]=L}function eCe(e,t,i,r){zv(e,t,i,r),K_(i,r,i,r)}function tCe(e,t,i,r){zv(e,t,i,r),jv(i,r,i,r)}function iCe(e,t,i){if(e==null||t==null||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const r=Yz(e,i.source),s=Yz(t,i.dest);return r===oe.UNKNOWN&&s===oe.UNKNOWN?Xi(e,t)?i.projector=qi:i.projector=null:i.projector=V$e[r][s],i}function vne(){return{source:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},projector:qi}}const Idt={spatialReference:null,spatialReferenceId:oe.UNKNOWN},Adt={spatialReference:null,spatialReferenceId:oe.UNKNOWN},bne=vne(),_1=QS(1),S1=pee(1),hC=Math.PI,wne=.5*hC,My=mr.radius,tq=My*hC/180,iq=180/(My*hC);function gx(e,t,i,r,s,n,o=Math.floor(e.length/3)){const a=gne(t,s,bne);if(a==null)return!1;if(a===qi){if(e===r&&i===n)return!0;const u=i+3*o;for(let h=i,p=n;h<u;h++,p++)r[p]=e[h];return!0}const l=i+3*o;for(let u=i,h=n;u<l;u+=3,h+=3)a(e,u,r,h);return!0}const $dt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:gx},Symbol.toStringTag,{value:"Module"}));function rq(e,t,i,r,s,n){return RT[0]=e,RT[1]=t,RT[2]=i,gx(RT,r,0,s,n,0)}const RT=yf();let OT=0,$4=class hk{static fromGE(t){const i=new hk;return i._wkt=t.wkt,i._wkid=t.wkid,i._isInverse=t.isInverse,i}constructor(t){this.uid=OT++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=OT++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=OT++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=OT++}getInverse(){const t=new hk;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},O3=class l_{static cacheKey(t,i){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",i.wkid?.toString()??"-1",i.wkt?.toString()??"",i.wkt2?.toString()??""].join()}static fromGE(t){const i=new l_;let r="";for(const s of t.steps){const n=$4.fromGE(s);i.steps.push(n),r+=n.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=r,i}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const i of t.steps)i instanceof $4?this.steps.push(i):this.steps.push(new $4({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const t=new l_;t.steps=[];for(let i=this.steps.length-1;i>=0;i--){const r=this.steps[i];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const i of this.steps)t+=i.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,i,r){this._cachedProjection[l_.cacheKey(t,i)]=r}getCachedGeTransformation(t,i){let r="";for(const n of this.steps)r+=n.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const s=this._cachedProjection[l_.cacheKey(t,i)];return s===void 0?null:s}},Ql=null,sf=null,X_=null,HM={};const h9=new JS;function Ef(){return!!Ql&&TF()}function _ne(){return!!Ef()||(ht(h9),nf(),!1)}function Sne(e,t){return!e||!t||lu(e,t)||_ne()}function rCe(e,t){return!lu(e,t)&&!Ef()}function nf(e){return X_==null&&(X_=Promise.all([PQ(),ce(()=>import("./geometryEngineBase-CR-T1bpS.js"),__vite__mapDeps([21,1]),import.meta.url).then(t=>t.g),ce(()=>import("./hydrated-CNDFlMdw.js"),__vite__mapDeps([133,1]),import.meta.url)])),X_.then(([,t,{hydratedAdapter:i}])=>{wi(e),sf=i,Ql=t.default,Ql._enableProjection(ive),h9.notify()})}function Mf(e,t,i=null,r=null){return Array.isArray(e)?e.length===0?[]:tS(sf,e,e[0].spatialReference,t,i,r):tS(sf,[e],e.spatialReference,t,i,r)[0]}function tS(e,t,i,r,s=null,n=null){if(i==null||r==null)return t;if(lu(i,r,s))return t.map(o=>WM(o,i,r));if(s==null&&d3(i))return t.map(o=>WM(o,i,ke.WGS84)).map(o=>iS(o,r));if(s==null&&d3(r))return t.map(o=>iS(o,ke.WGS84)).map(o=>WM(o,ke.WGS84,r));if(s==null){const o=O3.cacheKey(i,r);HM[o]!==void 0?s=HM[o]:((s=Tne(i,r,void 0))==null&&(s=new O3),HM[o]=s)}if(Ql==null||e==null)throw new pC;return n!=null?Ql._project(e,t,i,r,s,n):Ql._project(e,t,i,r,s)}function sCe(e,t){const i=xne([e],t);return i.pending!=null?{pending:i.pending,geometry:null}:i.geometries!=null?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function xne(e,t){if(!Ef()){for(const i of e)if(i!=null&&!Xi(i.spatialReference,t)&&Kn(i.spatialReference)&&Kn(t)&&!lu(i.spatialReference,t))return ht(h9),{pending:nf(),geometries:null}}return{pending:null,geometries:e.map(i=>i==null?null:Xi(i.spatialReference,t)?i:Kn(i.spatialReference)&&Kn(t)?iS(i,t):null)}}function Tne(e,t,i=null){if(e==null||t==null)return null;if(Ql==null||sf==null)throw new pC;const r=Ql._getTransformation(sf,e,t,i,i?.spatialReference);return r!==null?O3.fromGE(r):null}function nCe(e,t,i=null){if(Ql==null||sf==null)throw new pC;const r=Ql._getTransformationBySuitability(sf,e,t,i,i?.spatialReference);if(r!==null){const s=[];for(const n of r)s.push(O3.fromGE(n));return s}return[]}let pC=class extends W{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function oCe(){Ql=null,sf=null,X_=null,HM={}}const aCe={get loadPromise(){return X_}};function iS(e,t){try{const i=Mf(e,t);if(i==null)return null;"xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax);const r=G8(i.type,e.spatialReference,t);return r?.(i),i}catch(i){if(!(i instanceof pC))throw i;return null}}async function lCe(e,t,i){const r=e.spatialReference;return r!=null&&t!=null&&await dC(r,t,null,i),iS(e,t)}function lu(e,t,i){return!i&&(!!Xi(e,t)||Kn(e)&&Kn(t)&&!!gne(e,t,bne))}function uCe(e,t){if(Xi(e,t))return!0;if(!Kn(e)||!Kn(t))return!1;const i=zy(e)||ga(e)||WU(e),r=zy(t)||ga(t)||WU(t);return i&&r}async function dC(e,t,i,r){if(Ef())return WI(r);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!lu(s,n,o))return nf(r)}else if(e&&t&&!lu(e,t,i))return nf(r);return WI(r)}function WM(e,t,i){return e?"x"in e?Ene(e,t,new Ve,i,0):"xmin"in e?$ne(e,t,new bt,i,0):"rings"in e?Ane(e,t,new Rs,i,0):"paths"in e?Ine(e,t,new ca,i,0):"points"in e?Mne(e,t,new tb,i,0):null:null}function cCe(e,t,i=t.spatialReference,r=0){return i!=null&&e.spatialReference!=null&&Ene(e,e.spatialReference,t,i,r)!=null}function Ene(e,t,i,r,s){gn[0]=e.x,gn[1]=e.y;const n=e.z;return gn[2]=n!==void 0?n:s,gx(gn,t,0,gn,r,0)?(i.x=gn[0],i.y=gn[1],i.spatialReference=r,n!==void 0||Qd(r)?(i.z=gn[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),e.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function hCe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Mne(e,e.spatialReference,t,i,r)!=null}function Mne(e,t,i,r,s){const{points:n,hasZ:o,hasM:a}=e,l=[],u=n.length,h=[];for(const f of n)h.push(f[0],f[1],o?f[2]:s);if(!gx(h,t,0,h,r,0,u))return null;const p=o||Qd(r);for(let f=0;f<u;++f){const m=3*f,g=h[m],b=h[m+1];p&&a?l.push([g,b,h[m+2],n[f][3]]):p?l.push([g,b,h[m+2]]):a?l.push([g,b,n[f][2]]):l.push([g,b])}return i.points=l,i.spatialReference=r,i.hasZ=o,i.hasM=a,i}function pCe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Ine(e,e.spatialReference,t,i,r)!=null}function Ine(e,t,i,r,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];if(!Cne(n,o??!1,a??!1,t,l,r,s))return null;const u=o||Qd(r);return i.paths=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function dCe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&Ane(e,e.spatialReference,t,i,r)!=null}function Ane(e,t,i,r,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];if(!Cne(n,o??!1,a??!1,t,l,r,s))return null;const u=o||Qd(r);return i.rings=l,i.spatialReference=r,i.hasZ=u,i.hasM=a,i}function fCe(e,t,i=t.spatialReference,r=0){return e.spatialReference!=null&&i!=null&&$ne(e,e.spatialReference,t,i,r)!=null}function $ne(e,t,i,r,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:h}=e,p=u?e.zmin:s;if(!rq(n,o,p,t,gn,r))return null;const f=u||Qd(r);i.xmin=gn[0],i.ymin=gn[1],f&&(i.zmin=gn[2]);const m=u?e.zmax:s;return rq(a,l,m,t,gn,r)?(i.xmax=gn[0],i.ymax=gn[1],f&&(i.zmax=gn[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=r,i):null}function Cne(e,t,i,r,s,n,o=0){const a=new Array;for(const h of e)for(const p of h)a.push(p[0],p[1],t?p[2]:o);if(!gx(a,r,0,a,n,0))return!1;let l=0;s.length=0;const u=t||Qd(n);for(const h of e){const p=new Array;for(const f of h)u&&i?p.push([a[l++],a[l++],a[l++],f[3]]):u?p.push([a[l++],a[l++],a[l++]]):i?(p.push([a[l++],a[l++],f[2]]),l++):(p.push([a[l++],a[l++]]),l++);s.push(p)}return!0}const gn=yf(),Rdt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:lu,getTransformation:Tne,getTransformations:nCe,initializeProjection:dC,isEqualBaseGCS:uCe,isLoaded:Ef,isLoadedOrLoad:_ne,isLoadedOrLoadFor:Sne,load:nf,project:Mf,projectExtent:fCe,projectMany:tS,projectMultipoint:hCe,projectOrLoad:sCe,projectOrLoadMany:xne,projectPoint:cCe,projectPolygon:dCe,projectPolyline:pCe,projectWithZConversion:lCe,projectWithoutEngine:WM,requiresLoad:rCe,test:aCe,tryProjectWithZConversion:iS,unload:oCe},Symbol.toStringTag,{value:"Module"}));async function mCe(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return nv(e);const i=ke.WGS84;return await dC(t,i),Mf(e,i)}function yCe(e,t){if(!Rne(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function Rne(e,t){return!!e.typeKeywords?.includes(t)}function sq(e){return Rne(e,vCe.HOSTED_SERVICE)}function gCe(e,t){const i=e.typeKeywords;if(i){const r=i.indexOf(t);r>-1&&i.splice(r,1)}}function Odt(e,t,i){i?yCe(e,t):gCe(e,t)}async function Pdt(e){const t=e.clone().normalize();let i;if(t.length>1)for(const r of t)i?r.width>i.width&&(i=r):i=r;else i=t[0];return mCe(i)}const vCe={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function nq(e){const{portal:t,isOrgItem:i,itemControl:r}=e,s=t.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!i&&!!s?.includes("features:user:fullEdit");const a=r==="update"||r==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}const gb=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Wi(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,r,s){if(r.itemId)return new Cv({id:r.itemId,portal:s?.portal})}writePortalItem(i,r){i?.id&&(r.itemId=i.id)}async loadFromPortal(i,r){if(this.portalItem?.id)try{const{load:s}=await ce(()=>import("./layersLoader-BQoBnH32.js"),__vite__mapDeps([134,10,1,8,9,7,135]),import.meta.url);return wi(r),await s({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},r)}catch(s){throw ls(s)||xe.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(r=>(_o(r),!0)))}async setUserPrivileges(i,r){if(!Kt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(i,r);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){_o(s)}}async _fetchUserPrivileges(i,r){let s=this.portalItem;if(!i||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(r);const n=i===s.id;if(n&&s.portal.user)return nq(s);let o,a;if(n)o=s.portal.url;else try{o=await uee(this.url,r)}catch(p){_o(p)}if(!o||!n0e(o,s.portal.url))return this._fetchFallbackUserPrivileges(r);try{const p=r!=null?r.signal:null;a=await ci?.getCredential(`${o}/sharing`,{prompt:!1,signal:p})}catch(p){_o(p)}const l=!0,u=!1,h=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:h}};try{if(n?await s.reload():(s=new Cv({id:i,portal:{url:o}}),await s.load(r)),s.portal.user)return nq(s)}catch(p){_o(p)}return{features:{edit:l,fullEdit:u},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(i){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(i)}catch(s){_o(s)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const r=this.url?ci?.findCredential(this.url):null;if(!r)return!0;const s=PT.credential===r?PT.user:await this._fetchEditingUser(i);return PT.credential=r,PT.user=s,s?.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(i){const r=this.portalItem?.portal?.user;if(r)return r;const s=ci?.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=jo.getDefault();if(o&&o.loaded&&Ja(o.restUrl)===Ja(n))return o.user;const a=`${n}/community/self`,l=i!=null?i.signal:null,u=await b$(Ne(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?RF.fromJSON(u.value.data):null}read(i,r){r&&(r.layer=this),super.read(i,r)}write(i,r){const s=r?.portal,n=this.portalItem?.id&&(this.portalItem.portal||jo.getDefault());return s&&n&&!gQ(n.restUrl,s.restUrl)?(r.messages&&r.messages.push(new W("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...r,layer:this})}};return c([d({type:Cv})],t.prototype,"portalItem",null),c([ue("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),c([ge("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),c([d({clonable:!1})],t.prototype,"resourceReferences",void 0),c([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=c([F("esri.layers.mixins.PortalLayer")],t),t},PT={credential:null,user:null};let u_=class extends Je{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};c([d()],u_.prototype,"updating",void 0),c([d()],u_.prototype,"status",void 0),u_=c([F("esri.layers.support.PublishingInfo")],u_);const bCe=u_,wCe=Symbol(),_Ce=e=>{var t;let i=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const r=this._get("publishingInfo");if(r)return r;const s=new bCe;return this._checkPublishingStatus(s),s}_checkPublishingStatus(r){let o=0;const a=async u=>{let h;r.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(r.status==="publishing"&&this.refresh(),l.remove()),r.status=h,r.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return t=wCe,c([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=c([F("esri.layers.mixins.PublishableLayer")],i),i},Ld=new Be,Q_=new WeakMap;function SCe(e){TCe(e)&&Ld.push(new WeakRef(e))}function xCe(e){const t=Ld.find(i=>i.deref()===e);t&&Ld.remove(t)}function TCe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function One(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:One(t,e%t):0}let C4=0,LT=0;function ECe(){const e=Date.now();let t=!1;for(const i of Ld){const r=i.deref();r?r.refreshInterval&&e-(Q_.get(r)??0)+5>=6e4*r.refreshInterval&&(Q_.set(r,e),r.refresh(e)):t=!0}if(t)for(let i=Ld.length-1;i>=0;i--)Ld.at(i).deref()||Ld.removeAt(i)}FX(()=>{const e=Date.now();let t=0;for(const i of Ld){const r=i.deref();r&&(t=One(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Q_.get(r)||Q_.set(r,e):Q_.delete(r))}if(t!==LT){if(LT=t,clearInterval(C4),LT===0)return void(C4=0);C4=setInterval(ECe,LT)}},ns);const oq=.1,vb=e=>{let t=class extends e{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=h$(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||SCe(this)},()=>{})}destroy(){xCe(this)}castRefreshInterval(i){return i>=oq?i:i<=0?0:oq}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){bO(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:r})},r=>{xe.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){}};return c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:As}}}}})],t.prototype,"refreshInterval",void 0),c([Ht("refreshInterval")],t.prototype,"castRefreshInterval",null),c([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),c([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=c([F("esri.layers.mixins.RefreshableLayer")],t),t},Tg=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&MCe(i,r.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===i.minScale&&s.maxScale===i.maxScale?s:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),c([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=c([F("esri.layers.mixins.ScaleRangeLayer")],t),t};function MCe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Pne=ar()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let c_=class extends Dt(ae){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return use(this.value,this.unit,"milliseconds")}};c([Ue(Pne,{nonNullable:!0})],c_.prototype,"unit",void 0),c([d({type:Number,json:{write:!0},nonNullable:!0})],c_.prototype,"value",void 0),c_=c([F("esri.time.TimeInterval")],c_);const P3=c_;function aq(e,t){return P3.fromJSON({value:e,unit:t})}let Ns=class extends Dt(ae){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,i){return i.timeExtent&&Array.isArray(i.timeExtent)&&i.timeExtent.length===2?io.fromArray(i.timeExtent):null}writeFullTimeExtent(t,i){t?.start!=null&&t.end!=null?i.timeExtent=t.toArray():i.timeExtent=null}readInterval(t,i){return i.timeInterval&&i.timeIntervalUnits?aq(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?aq(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(t,i){i.timeInterval=t?.toJSON().value??null,i.timeIntervalUnits=t?.toJSON().unit??null}};c([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ns.prototype,"cumulative",void 0),c([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ns.prototype,"endField",void 0),c([d({type:io,json:{write:{enabled:!0,allowNull:!0}}})],Ns.prototype,"fullTimeExtent",void 0),c([ue("fullTimeExtent",["timeExtent"])],Ns.prototype,"readFullTimeExtent",null),c([ge("fullTimeExtent")],Ns.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,json:{write:!0}})],Ns.prototype,"hasLiveData",void 0),c([d({type:P3,json:{write:{enabled:!0,allowNull:!0}}})],Ns.prototype,"interval",void 0),c([ue("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ns.prototype,"readInterval",null),c([ge("interval")],Ns.prototype,"writeInterval",null),c([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ns.prototype,"startField",void 0),c([d(f1("timeReference",!0))],Ns.prototype,"timeZone",void 0),c([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ns.prototype,"trackIdField",void 0),c([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ns.prototype,"useTime",void 0),c([d({type:[Date],json:{read:!1}})],Ns.prototype,"stops",void 0),Ns=c([F("esri.layers.support.TimeInfo")],Ns);const Lne=Ns,ICe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:As}}},fC=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,r){const s=r.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=Pne.fromJSON(s.timeOffsetUnits);return n&&o?new P3({value:n,unit:o}):null}set timeInfo(i){Wte(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([d({type:io,json:{write:!1}})],t.prototype,"timeExtent",void 0),c([d({type:P3})],t.prototype,"timeOffset",void 0),c([ue("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),c([d({value:null,type:Lne,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),c([d(ICe)],t.prototype,"useViewTime",void 0),t=c([F("esri.layers.mixins.TemporalLayer")],t),t},lq=new gt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Zp=class extends Dt(ae){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([d({json:{write:!0}})],Zp.prototype,"name",void 0),c([d({json:{write:!0}})],Zp.prototype,"description",void 0),c([d({json:{read:lq.read,write:lq.write}})],Zp.prototype,"drawingTool",void 0),c([d({json:{write:!0}})],Zp.prototype,"prototype",void 0),c([d({json:{write:!0}})],Zp.prototype,"thumbnail",void 0),Zp=c([F("esri.layers.support.FeatureTemplate")],Zp);const p9=Zp;let sh=class extends Dt(ae){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const i={};for(const r of Object.keys(t))i[r]=rC(t[r]);return i}writeDomains(t,i){const r={};for(const s of Object.keys(t))t[s]&&(r[s]=t[s]?.toJSON());i.domains=r}};c([d({json:{write:!0}})],sh.prototype,"id",void 0),c([d({json:{write:!0}})],sh.prototype,"name",void 0),c([d({json:{write:!0}})],sh.prototype,"domains",void 0),c([ue("domains")],sh.prototype,"readDomains",null),c([ge("domains")],sh.prototype,"writeDomains",null),c([d({type:[p9],json:{write:!0}})],sh.prototype,"templates",void 0),sh=c([F("esri.layers.support.FeatureType")],sh);const d9=sh;function ACe(){return{fields:{type:[na],value:null,set:function(e){if(e&&le("big-integer-warning-enabled")){const t=e.filter(i=>i.type==="big-integer"||i.type==="oid"&&(i.length||0)>=8);if(t.length){const i=t.map(r=>`'${r.name}'`).join(", ");xe.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${i}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return Z$.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex?.has(t)||xe.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return P$(this.fieldsIndex,e)}}}}const R4=()=>xe.getLogger("esri.layers.support.labelingInfo"),$Ce=/\[([^[\]]+)\]/gi;function O4(e,t,i){return e?e.map(r=>{const s=new yx;if(s.read(r,i),s.labelExpression){const n=t.fields||t.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll($Ce,(o,a)=>`[${CCe(a,n)}]`)}return s}):null}function CCe(e,t){if(!t)return e;const i=e.toLowerCase();for(let r=0;r<t.length;r++){const s=t[r].name;if(s.toLowerCase()===i)return s}return e}const RCe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryMultiPatch:["always-horizontal"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function OCe(e,t){const i=[];for(const r of e){const s=r.labelPlacement,n=RCe[t];if(!r.symbol)return R4().warn("No ILabelClass symbol specified."),[];if(!n)return R4().error(new W("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))i.push(r);else{const o=n[0];s&&R4().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const a=r.clone();a.labelPlacement=o,i.push(a)}}return i}const R0=[];function f9(e,t){if(q8(e.url??""))return!0;const{wkid:i}=t;for(const r of R0){if((e.version??0)>=r[0])return!0;if(typeof r[1]=="function"&&(r[1]=r[1]()),r[1].has(i))return!1}return!0}R0.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),R0.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),R0.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),R0.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),R0.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function PCe(e,t,i){const r=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(r&&r.type==="unique-value"&&r.styleOrigin){const s=await b$(r.populateFromStyle());if(wi(i),s.ok===!1){const n=s.error;t?.messages&&t.messages.push(new Fo("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t?.origin)}}}function m9({displayField:e,editFieldsInfo:t,fields:i,objectIdField:r,title:s},n){if(!i)return null;const o=DCe({editFieldsInfo:t,fields:i,objectIdField:r},n);if(!o.length)return null;const a=UCe({titleBase:s,fields:i,displayField:e}),l=jCe();return new df({title:a,content:l,fieldInfos:o})}function jdt(e){const{title:t,graphic:i}=e??{},{attributes:r,sourceLayer:s}=i??{},n=s&&"displayField"in s?s.displayField:null,o=n?r?.[n]:null,a=i?.getObjectId()?.toString();return t||o||a||""}const LCe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):l2e(e,t);function NCe({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const r=e;return t&&(e=e.filter(s=>!t.includes(s.type))),e===r&&(e=e.slice()),i!==!0&&e.sort(kCe),e}function kCe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:uq(e)?-1:uq(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function DCe(e,t){const i=t?.visibleFieldNames;return NCe({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||VCe,sortDisabled:t?.sortDisabled}).map(r=>new QF({fieldName:r.name,isEditable:a2e(r,e),label:r.alias,format:FCe(r),visible:LCe(r,{...e,visibleFieldNames:i})}))}function FCe(e){switch(e.type){case"small-integer":case"integer":case"single":return new aM({digitSeparator:!0,places:0});case"double":return new aM({digitSeparator:!0,places:2});case"string":return O2e(e.name)?new aM({digitSeparator:!0,places:0}):void 0;default:return}}function jCe(){return[new g1,new y1]}function UCe(e){const t=K_e(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??""}function uq(e){return(e.name&&e.name.toLowerCase())==="name"?!0:e.alias?.toLowerCase()==="name"}const VCe=["geometry","blob","raster","guid","xml"],GCe=1/255.5;var Qu;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Qu||(Qu={}));const Ls="FeatureLayer";function NT(e,t){return new W("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function cq(e){return e&&e instanceof Be}const P4=ACe();function L4(e,t,i){const r=!!i?.writeLayerSchema;return{enabled:r,ignoreOrigin:r}}let Ke=class extends o$e(L$e(sAe(_Ce(K3e(xg(j$e(fC(Tg(vb(sC(yb(gb(wf(lC(B8(Dt(_f))))))))))))))))){constructor(...e){super(...e),this.attributeTableTemplate=null,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=ke.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=h$(async(t,i,r)=>{const{save:s,saveAs:n}=await ce(()=>import("./featureLayerUtils-CXdSKEwo.js"),__vite__mapDeps([136,137,138,139,135,140,10,1]),import.meta.url);switch(t){case Qu.SAVE:return s(this,i);case Qu.SAVE_AS:return n(this,r,i)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(r=>this.initLayerProperties(r))),Promise.resolve(this);const i=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(_o).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const r=await this._fetchFirstValidLayerId(t);r!=null&&(this.layerId=r)}if(!this.url&&!this._hasMemorySource())throw new W("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>jAe(this,"load",e));return this.addResolvingPromise(i),Promise.resolve(this)}warnInvisibleDrapedSymbols(){this.elevationInfo?.mode==="on-the-ground"&&this.renderer?.type==="simple"&&this.renderer.symbol?.type==="polygon-3d"&&this.renderer.symbol.symbolLayers.some(e=>e.type==="fill"&&e.material!=null&&(!e.material.color||e.material.color.a*this.opacity<GCe)&&(this.loadWarnings.push(new Fo("feature-layer:invisible-draped-symbols","FeatureLayer has fully transparent symbols which will no longer render or highlight",{layer:this})),!0))}readCapabilities(e,t){return t=t.layerDefinition||t,s9(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,i){return this._readEditingEnabled(t,!0,i)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,i,r){this._writeEditingEnabled(e,t,!0,r)}get effectiveEditingEnabled(){return UAe(this)}readIsTable(e,t){return(t=t?.layerDefinition??t).type==="Table"||!t.geometryType}writeIsTable(e,t,i,r){r?.writeLayerSchema&&Zr(i,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return tne(t.layerDefinition||t)}readObjectIdField(e,t){return ine(t.layerDefinition||t)}get parsedUrl(){const e=$r(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=ep(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=ep(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){vP(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,i){t=t.layerDefinition||t;const r=t.drawingInfo?.renderer;if(r){const s=Y2(r,t,i)??void 0;return s||xe.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),s}return r9(t,i)}set source(e){const t=this._get("source");t!==e&&(cq(t)&&this._resetMemorySource(t),cq(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Be?new xh({layer:this,items:e}):e:null}readSource(e,t){const i=Sg.fromJSON(t.featureSet);return new xh({layer:this,items:i?.features??[]})}readTemplates(e,t){const i=t.editFieldsInfo,r=i?.creatorField,s=i?.editorField;return e=e?.map(n=>p9.fromJSON(n)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,t){const i=t.layerDefinition?.name??t.name,r=t.title||t.layerDefinition?.title;if(i){const s=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?dIe(this.url,i):i;let n=i;if(!n&&this.url){const o=ip(this.url);o!=null&&(n=o.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==n&&(n=s+" - "+n),z8(n)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}readTypes(e,t){e=(t=t.layerDefinition||t).types;const i=t.editFieldsInfo,r=i?.creatorField,s=i?.editorField;return e?.map(n=>(n=d9.fromJSON(n),this._fixTemplates(n.templates,r),this._fixTemplates(n.templates,s),n))}readVisible(e,t){return t.layerDefinition?.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){const i=await wAe(this,e,t,Ls);return this.lastEditsEventDate=new Date,i}async updateAttachment(e,t,i){const r=await _Ae(this,e,t,i,Ls);return this.lastEditsEventDate=new Date,r}async applyEdits(e,t){return SAe(this,e,t)}async uploadAssets(e,t){return xAe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return m9(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await Dl(ce(()=>import("./FeatureLayerSource-Bgd4qQEJ.js"),__vite__mapDeps([141,1,51,58,142,143,54,89,53,90,132,37,36,38]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=PAe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,i=VF(this.definitionExpression,t);return e.where=i||"1=1",e}async deleteAttachments(e,t){const i=await TAe(this,e,t,Ls);return this.lastEditsEventDate=new Date,i}async fetchRecomputedExtents(e){return EAe(this,e,Ls)}getFeatureType(e){return sne(this.types,this.typeIdField,e)}getFieldDomain(e,t){const i=t?.feature,r=!!this.subtypes?.length;if(r&&!t?.excludeImpliedDomains){const a=kAe(this,e);if(a)return a}const s=r&&NAe(this,i);if(s){const a=s?.domains?.[e];return a?.type==="inherited"?this._getLayerDomain(e):a}const n=this.getFeatureType(i),o=this._getLayerDomain(e);if(n){const a=n.domains&&n.domains[e];if(a&&a?.type!=="inherited")return a}if(o)return o;if(!t?.excludeImpliedDomains){const a=DAe(this,e);if(a)return a}return null}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return MAe(this,e,t,Ls)}async queryFeatures(e,t){const i=await this.load(),r=await i.source.queryFeatures(Dr.from(e)??i.createQuery(),t);if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=i;return r}async queryObjectIds(e,t){return IAe(this,e,t,Ls)}async queryFeatureCount(e,t){return AAe(this,e,t,Ls)}async queryExtent(e,t){return $Ae(this,e,t,Ls)}async queryRelatedFeatures(e,t){return CAe(this,e,t,Ls)}async queryRelatedFeaturesCount(e,t){return RAe(this,e,t,Ls)}async queryTopFeatures(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopFeatures||!r?.query?.supportsTopFeaturesQuery)throw new W(Ls,"Layer source does not support queryTopFeatures capability");const s=await ce(()=>Promise.resolve().then(()=>JT),void 0,import.meta.url),n=await i.queryTopFeatures(s.default.from(e),t);if(n?.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryBins(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryBins||!r?.operations?.supportsQueryBins)throw new W(Ls,"Layer source does not support queryBins capability");zAe(e,r,Ls);const s=await ce(()=>Promise.resolve().then(()=>DNe),void 0,import.meta.url),n=await i.queryBins(s.default.from(e),t);if(n.features)for(const o of n.features)o.layer=o.sourceLayer=this;return n}async queryTopObjectIds(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopObjectIds||!r?.query.supportsTopFeaturesQuery)throw new W(Ls,"Layer source does not support queryTopObjectIds capability");const s=await ce(()=>Promise.resolve().then(()=>JT),void 0,import.meta.url);return i.queryTopObjectIds(s.default.from(e),t)}async queryTopFeaturesExtent(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopExtents||!r?.query?.supportsTopFeaturesQuery)throw new W(Ls,"Layer source does not support queryTopExtents capability");const s=await ce(()=>Promise.resolve().then(()=>JT),void 0,import.meta.url);return i.queryTopExtents(s.default.from(e),t)}async queryTopFeatureCount(e,t){const{source:i,capabilities:r}=await this.load();if(!i.queryTopCount||!r?.query?.supportsTopFeaturesQuery)throw new W(Ls,"Layer source does not support queryFeatureCount capability");const s=await ce(()=>Promise.resolve().then(()=>JT),void 0,import.meta.url);return i.queryTopCount(s.default.from(e),t)}read(e,t){const i=e.featureCollection;if((i||e.type==="Feature Collection")&&(this.resourceInfo=e),i){const r=i.layers;r&&r.length===1&&(super.read(r[0],t),i.showLegend!=null&&super.read({showLegend:i.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:i,layerContainerType:r,messages:s}=t;if(this.dynamicDataSource)return s?.push(NT(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((i==="web-map"||i==="web-scene")&&r!=="tables")return s?.push(NT(this,`a table source can only be written to tables, not ${r}`)),null;if(this._hasMemorySource())return s?.push(NT(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(i==="web-map"||i==="web-scene")&&r==="tables")return s?.push(NT(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new W(Ls,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||f9(this,e))}async save(e){return this._debouncedSaveOperations(Qu.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Qu.SAVE_AS,t,e)}_readEditingEnabled(e,t,i){let r=e.layerDefinition?.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,t&&i?.origin==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,i,r){if(!e){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";Zr("layerDefinition.capabilities",s,t),i&&!r?.writeLayerSchema&&(t.capabilities=s)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Ne(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const i=t.data;if(i)return this.findFirstValidLayerId(i)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),vP(this.renderer,this.fieldsIndex),Wte(this.timeInfo,this.fieldsIndex),PCe(this,{origin:"service"})}async hasDataChanged(){return OAe(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(t=>t.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(i=>{const r=i.prototype?.attributes;r&&t&&delete r[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new W("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new W("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};c([d(mAe)],Ke.prototype,"attributeTableTemplate",void 0),c([ue("service","capabilities")],Ke.prototype,"readCapabilities",null),c([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ke.prototype,"charts",void 0),c([d({readOnly:!0})],Ke.prototype,"createQueryVersion",null),c([d({json:{read:{source:"layerDefinition.copyrightText"}}})],Ke.prototype,"copyright",void 0),c([d({json:{read:{source:"layerDefinition.displayField"}}})],Ke.prototype,"displayField",void 0),c([d({types:Od,readOnly:!0})],Ke.prototype,"defaultSymbol",void 0),c([d({type:Wn})],Ke.prototype,"dynamicDataSource",void 0),c([d({type:Boolean})],Ke.prototype,"editingEnabled",null),c([ue(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ke.prototype,"readEditingEnabled",null),c([ue("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ke.prototype,"readEditingEnabledFromWebMap",null),c([ge(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ke.prototype,"writeEditingEnabled",null),c([ge("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ke.prototype,"writeEditingEnabledToWebMap",null),c([d({readOnly:!0})],Ke.prototype,"effectiveEditingEnabled",null),c([d({...P4.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:L4}}}}})],Ke.prototype,"fields",void 0),c([d(P4.fieldsIndex)],Ke.prototype,"fieldsIndex",void 0),c([d({type:TMe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ke.prototype,"formTemplate",void 0),c([d({json:{read:{source:"layerDefinition.extent"}}})],Ke.prototype,"fullExtent",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:L4,writer(e,t,i){const r=e?tk.toJSON(e):null;r&&Zr(i,r,t)}}}},read:{source:"layerDefinition.geometryType",reader:tk.read}}})],Ke.prototype,"geometryType",void 0),c([d({json:{read:{source:"layerDefinition.hasM"}}})],Ke.prototype,"hasM",void 0),c([d({json:{read:{source:"layerDefinition.hasZ"}}})],Ke.prototype,"hasZ",void 0),c([d(Kse)],Ke.prototype,"id",void 0),c([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ke.prototype,"infoFor3D",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ke.prototype,"isTable",void 0),c([ue("service","isTable",["type","geometryType"]),ue("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ke.prototype,"readIsTable",null),c([ge("web-map","isTable")],Ke.prototype,"writeIsTable",null),c([d(Q8)],Ke.prototype,"labelsVisible",void 0),c([d({type:[yx],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:O4,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:O4,write:{enabled:!0,layerContainerTypes:As}}},name:"layerDefinition.drawingInfo.labelingInfo",read:O4,write:!0}})],Ke.prototype,"labelingInfo",void 0),c([d((()=>{const e=K(pAe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,i,r){Zr(r,D$(t),i)}}},e})())],Ke.prototype,"opacity",void 0),c([d(e9)],Ke.prototype,"legendEnabled",void 0),c([d({type:["show","hide"],json:(()=>{const e=K(Xse.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ke.prototype,"listMode",void 0),c([ue("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ke.prototype,"readGlobalIdField",null),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:L4}}}}})],Ke.prototype,"objectIdField",void 0),c([ue("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ke.prototype,"readObjectIdField",null),c([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ke.prototype,"operationalLayerType",void 0),c([d(P4.outFields)],Ke.prototype,"outFields",void 0),c([d({readOnly:!0})],Ke.prototype,"parsedUrl",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ke.prototype,"path",void 0),c([d(dx)],Ke.prototype,"popupEnabled",void 0),c([d({type:df,json:{name:"popupInfo",write:!0}})],Ke.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],Ke.prototype,"defaultPopupTemplate",null),c([d({types:hx,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Yre,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:As,overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,i)=>({ignoreOrigin:i?.writeLayerSchema})}}})],Ke.prototype,"renderer",null),c([ue("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ue("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ke.prototype,"readRenderer",null),c([d()],Ke.prototype,"resourceInfo",void 0),c([d((()=>{const e=K(cAe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ke.prototype,"screenSizePerspectiveEnabled",void 0),c([d({clonable:!1})],Ke.prototype,"source",null),c([Ht("source")],Ke.prototype,"castSource",null),c([ue("portal-item","source",["featureSet"]),ue("web-map","source",["featureSet"])],Ke.prototype,"readSource",null),c([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ke.prototype,"spatialReference",void 0),c([d({type:Number})],Ke.prototype,"subtypeCode",void 0),c([d({type:[p9]})],Ke.prototype,"templates",void 0),c([ue("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ke.prototype,"readTemplates",null),c([d({type:Lne})],Ke.prototype,"timeInfo",void 0),c([d()],Ke.prototype,"title",void 0),c([ue("service","title",["name"]),ue("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ke.prototype,"readTitle",null),c([ue("web-map","title",["layerDefinition.name","title"])],Ke.prototype,"readTitleFromWebMap",null),c([d({type:String})],Ke.prototype,"sublayerTitleMode",void 0),c([d({json:{read:!1}})],Ke.prototype,"type",void 0),c([d({type:String})],Ke.prototype,"typeIdField",void 0),c([ue("service","typeIdField"),ue("typeIdField",["layerDefinition.typeIdField"])],Ke.prototype,"readTypeIdField",null),c([d({type:[d9]})],Ke.prototype,"types",void 0),c([ue("service","types",["types"]),ue("types",["layerDefinition.types"])],Ke.prototype,"readTypes",null),c([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ke.prototype,"visible",void 0),c([ue("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ke.prototype,"readVisible",null),Ke=c([F("esri.layers.FeatureLayer")],Ke);const y9=Ke,BCe=Object.freeze(Object.defineProperty({__proto__:null,default:y9},Symbol.toStringTag,{value:"Module"}));let e2=class extends Be{constructor(t){super(t),this.addHandles([this.on("before-add",i=>{i.item==null&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(Be.ofType(this.itemType.Type))(t):new Be(t)}};function pk(e,t){return{type:e,cast:RQ,set(i){const r=Yd(i,this._get(t),e);r.owner=this,this._set(t,r)}}}c([d()],e2.prototype,"owner",null),e2=c([F("esri.core.support.OwningCollection")],e2);let Iy=class extends e2{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};c([bF({Type:nl,ensureType:bi(nl)})],Iy.prototype,"itemType",void 0),Iy=c([F("esri.support.GraphicsCollection")],Iy);let nh=class extends xg(Tg(_f)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new Iy,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,i){return super.on(t,i)}graphicChanged(t){this.emit("graphic-update",t)}};c([d({type:qse})],nh.prototype,"elevationInfo",void 0),c([d(pk(Iy,"graphics"))],nh.prototype,"graphics",void 0),c([d({type:["show","hide"]})],nh.prototype,"listMode",void 0),c([d()],nh.prototype,"screenSizePerspectiveEnabled",void 0),c([d({readOnly:!0})],nh.prototype,"type",void 0),c([d({constructOnly:!0})],nh.prototype,"internal",void 0),nh=c([F("esri.layers.GraphicsLayer")],nh);const zCe=nh;var dk;const kT=new gt({flow_from:"flow-from",flow_to:"flow-to"});let ln=dk=class extends bf(ae){constructor(e){super(e),this.density=.8,this.color=new Oe([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:i,flowSpeed:r,trailLength:s,smoothing:n,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),h=(this.visualVariables||[]).map(m=>m.clone()),p=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new dk({density:e,color:u,maxPathLength:t,trailWidth:i,flowSpeed:r,trailLength:s,trailCap:a,background:l,smoothing:n,flowRepresentation:o,visualVariables:h,authoringInfo:p,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};c([d({type:Number,json:{write:!0}})],ln.prototype,"density",void 0),c([d({type:Oe,json:{write:{allowNull:!0}}})],ln.prototype,"color",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],ln.prototype,"maxPathLength",void 0),c([d({type:Number,cast:qt,json:{write:!0}})],ln.prototype,"trailWidth",void 0),c([d({type:Number,json:{write:!0}})],ln.prototype,"flowSpeed",void 0),c([d({type:Number,json:{write:!0}})],ln.prototype,"trailLength",void 0),c([d({type:Number,cast:qt,json:{write:!1}})],ln.prototype,"smoothing",void 0),c([d({type:kT.apiValues,json:{type:kT.jsonValues,read:{reader:kT.read},write:{writer:kT.write}}})],ln.prototype,"flowRepresentation",void 0),c([Ue({flowRenderer:"flow"})],ln.prototype,"type",void 0),c([d({type:ax,json:{write:!0}})],ln.prototype,"authoringInfo",void 0),c([d({type:W$,json:{write:!0}})],ln.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],ln.prototype,"trailCap",void 0),c([d({type:String,json:{write:!0}})],ln.prototype,"background",void 0),ln=dk=c([F("esri.renderers.FlowRenderer")],ln);const Nne=ln;let O0=class extends ae{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};c([d({type:Number,json:{write:!0}})],O0.prototype,"value",void 0),c([d({type:String,json:{write:!0}})],O0.prototype,"label",void 0),c([d({type:Oe,json:{type:[vt],write:!0}})],O0.prototype,"color",void 0),O0=c([F("esri.renderers.support.ColormapInfo")],O0);const kne=O0,zdt=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],g9=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],qCe=new gt({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function DT(e,t){if(!e||!t||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]>t[i]+2||e[i]<t[i]-2)return!1;return!0}function hq(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function HCe(e){if(e.type==="multipart"){const t=e.clone();return t.colorRamps?.length&&(t.colorRamps=t.colorRamps.reverse().map(i=>hq(i))),t}return hq(e)}function pq(e,t){if(!e)return;const i=g9;let r=null;return e.type==="algorithmic"?i.some(s=>{if(DT(e.fromColor.toRgb(),s.fromColor)&&DT(e.toColor.toRgb(),s.toColor))return r=s.id,!0}):e.type==="multipart"&&i.some(s=>{const n=e.colorRamps,o=s.colorRamps;if(n&&o&&n.length===o.length&&!o.some((a,l)=>{if(!DT(n[l].fromColor.toRgb(),new Oe(a.fromColor).toRgb())||!DT(n[l].toColor.toRgb(),new Oe(a.toColor).toRgb()))return!0})){if(r)return!0;r=s.id}}),r}function WCe(e,t,i=!1){if(!e)return;let r=!1,s=pq(e);return s!=null||i||(r=!0,s=pq(e=HCe(e))),s?{id:s,inverted:r}:void 0}function Dne(e,t=!1){const i=typeof e=="string"?e:WCe(e,void 0,t)?.id;return i?qCe.toJSON(i):null}function qdt(e,t="esriCIELabAlgorithm"){const i=g9.find(({id:r})=>r===e);return i?i.colorRamps?{type:"multipart",colorRamps:i.colorRamps.map(r=>({type:"algorithmic",algorithm:t,fromColor:[...r.fromColor],toColor:[...r.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...i.fromColor],toColor:[...i.toColor]}:null}function Fne(e){const t=(e=e||{}).numColors||256,i=e.distanceOffset||0,r=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),s=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:i,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:s,isCustomInterval:r,weights:e.weights}}function JCe(e,t,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i,a=e.s===0,l=t.s===0;let u=e.h,h=t.h;a&&!l?u=h:l&&!a&&(t={...t,h:u},h=u);let p,f=Math.abs(h-u);const m=360;f<m/2?p=(h-u)*n:(f=m-f,p=u>h?f*n:-f*n);const g=(t.s-e.s)*n,b=(t.v-e.v)*n;let{s:w,v:S}=e,T=u;if(s){const _=s/n;T=(T+_*p+m)%m,w+=_*g,S+=_*b}const x=[];for(let _=0;_<r-1;_++)x.push({h:T,s:w,v:S}),T=(T+p+m)%m,w+=g,S+=b;return x.push(o?{h:T,s:w,v:S}:t),x}function ZCe(e,t,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i;let{l:a,a:l,b:u}=e;const h=(t.l-a)*n,p=(t.a-l)*n,f=(t.b-u)*n,m=[];if(s){const g=s/n;a+=g*h,l+=g*p,u+=g*f}for(let g=0;g<r-1;g++)m.push({l:a,a:l,b:u}),a+=h,l+=p,u+=f;return m.push(o?{l:a,a:l,b:u}:t),m}function YCe(e,t,i){const{numColors:r,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=i,a=e.h,l=t.h,u=2*Math.PI;let h;if(a<=l){const T=l-a,x=l-a-u;h=Math.abs(x)<Math.abs(T)?x:T}else{const T=l+u-a,x=l-a;h=Math.abs(x)<Math.abs(T)?x:T}const p=h*n,f=(t.l-e.l)*n,m=(t.c-e.c)*n;let{l:g,c:b,h:w}=e;if(s){const T=s/n;g+=T*f,b+=T*m,w=(w+T*p+u)%u}const S=[];for(let T=0;T<r-1;T++)S.push({l:g,c:b,h:w}),g+=f,b+=m,w=(w+p+u)%u;return S.push(o?{l:g,c:b,h:w}:t),S}function jne(e,t){let{fromColor:i,toColor:r}=e;i=[...i],r=[...r],i.length===3&&(i=i.concat([255])),r.length===3&&(r=r.concat([255]));const s=e.algorithm||"esriCIELabAlgorithm",n=Fne(t),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:u}=n;if(o===1&&a===0)return[i];if(o===2&&a===0&&!l)return[i,r];const h={r:i[0],g:i[1],b:i[2]},p={r:r[0],g:r[1],b:r[2]},f=s==="esriCIELabAlgorithm"?ZCe(SG(h),SG(p),n):s==="esriHSVAlgorithm"?JCe(I3(h),I3(p),n):YCe(xG(h),xG(p),n),m=[],g=i[3]??255,b=((r[3]??255)-g)/(o-1);for(let w=0;w<o;w++){const{r:S,g:T,b:x}=X$(f[w]),_=u?Math.round(g+b*w):255;m.push([S,T,x,_])}return m}function KCe(e,t){const{numColors:i,interpolateAlpha:r}=Fne(t);let s=t?.weights;const{colorRamps:n}=e;if(s){const p=s.reduce((f,m)=>f+m);s=s.map(f=>f/p)}else{s=[];for(let p=0;p<n.length;p++)s[p]=1/n.length}const o=[],a=1/(i-1);let l=0,u=!1;for(let p=0;p<n.length;p++){const f=o.length,m=u?0:f*a-l;l+=s[p];let g=p===n.length-1?i-1-f:(s[p]-m)/a;if(u=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;const b=jne(n[p],{numColors:g,interpolateAlpha:r,distanceOffset:m/s[p],distanceInterval:a/s[p]});o.push(...b)}const h=[...n[n.length-1].toColor];return h.length===3&&h.push(255),o.push(h),o}function XCe(e,t){const i=D2(e)?e.toJSON():e;return i.type==="multipart"?KCe(i,t):jne(i,t)}function x1(e,t){const i=XCe(e,t),r=t?.interpolateAlpha;return i.forEach((s,n)=>{s.unshift(n),r||s.pop()}),i}function QCe(e){const t=[];for(let i=0;i<e.length;i+=4){const r=I3({r:e[i],g:e[i+1],b:e[i+2]});t.push([r.h/60,r.s/100,255*r.v/100])}return t}function dq(e){const t=I3(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function fq(e){return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:dq(e.fromColor),ToColor:dq(e.toColor)}}function Une(e){const t=Dne(e);if(!t)return null;if(e.type==="algorithmic")return{...fq(e),Name:t};if(e.colorRamps){const i=e.colorRamps.map(fq);return{type:"MultiPartColorRamp",NumColorRamps:i.length,ArrayOfColorRamp:i,Name:t}}return null}function e5e(e){const t=e.reverse().map(i=>{const r=i.toString(16);return r.length<2?"0"+r:r});return 4294967295&Number.parseInt(t.join(""),16)}var h_;let p_=h_=class extends ae{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const i=e[0].length===5,r=[...e].sort((s,n)=>s[0]-n[0]).map(s=>kne.fromJSON({value:s[0],color:i?s.slice(1,5):s.slice(1,4).concat([255]),label:t?t[s[0]]??"":s[0]}));return new h_({colormapInfos:r})}static createFromColorramp(e){const t=x1(e);return h_.createFromColormap(t)}clone(){return new h_({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};c([d({type:[kne],json:{write:!0}})],p_.prototype,"colormapInfos",void 0),c([Ue({rasterColormap:"raster-colormap"})],p_.prototype,"type",void 0),p_=h_=c([F("esri.renderers.RasterColormapRenderer")],p_);const v9=p_;var fk;let Xo=fk=class extends ae{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return x8(e)}clone(){return new fk({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:K(this.colorRamp)})}};c([d({type:Number,json:{write:!0}})],Xo.prototype,"altitude",void 0),c([d({type:Number,json:{write:!0}})],Xo.prototype,"azimuth",void 0),c([d({types:S8,json:{write:!0}})],Xo.prototype,"colorRamp",void 0),c([ue("colorRamp")],Xo.prototype,"readColorRamp",null),c([d({type:["traditional","multi-directional"],json:{write:!0}})],Xo.prototype,"hillshadeType",void 0),c([d({type:Number,json:{write:!0}})],Xo.prototype,"pixelSizePower",void 0),c([d({type:Number,json:{write:!0}})],Xo.prototype,"pixelSizeFactor",void 0),c([d({type:["none","adjusted"],json:{write:!0}})],Xo.prototype,"scalingType",void 0),c([Ue({rasterShadedRelief:"raster-shaded-relief"})],Xo.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],Xo.prototype,"zFactor",void 0),Xo=fk=c([F("esri.renderers.RasterShadedReliefRenderer")],Xo);const Vne=Xo,t2=new gt({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),Gne={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var mk;let cr=mk=class extends ae{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return x8(e)}get statistics(){return this._get("statistics")}set statistics(e){Hme(xe.getLogger(this),"statistics",{replacement:"customStatistics",version:"4.31",warnOnce:!0}),this._set("statistics",e)}get customStatistics(){const e=this.statistics;return e&&Array.isArray(e[0])?e.map(t=>({min:t[0],max:t[1],avg:t[2],stddev:t[3]})):e}set customStatistics(e){this._set("statistics",e?.map(t=>[t.min,t.max,t.avg??0,t.stddev??1]))}readCustomStatistics(e){return e?.map(t=>({min:t[0],max:t[1],avg:t[2],stddev:t[3]}))}writeCustomStatistics(e,t,i){e?.length&&(t[i]=e.map(r=>[r.min,r.max,r.avg??0,r.stddev??1]))}readStretchType(e,t){let i=t.stretchType;return typeof i=="number"&&(i=Gne[i]),t2.read(i)}clone(){return new mk({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:K(this.statistics),customStatistics:K(this.customStatistics),gamma:K(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:K(this.colorRamp),histograms:K(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};c([d({types:S8,json:{write:!0}})],cr.prototype,"colorRamp",void 0),c([ue("colorRamp")],cr.prototype,"readColorRamp",null),c([d({type:Boolean,json:{write:!0}})],cr.prototype,"computeGamma",void 0),c([d({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],cr.prototype,"dynamicRangeAdjustment",void 0),c([d({type:[Number],json:{write:!0}})],cr.prototype,"gamma",void 0),c([d({type:Number,json:{write:!0}})],cr.prototype,"maxPercent",void 0),c([d({type:Number,json:{write:!0}})],cr.prototype,"minPercent",void 0),c([d({type:Number,json:{write:!0}})],cr.prototype,"numberOfStandardDeviations",void 0),c([d({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],cr.prototype,"outputMax",void 0),c([d({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],cr.prototype,"outputMin",void 0),c([d({type:Number,json:{write:!0}})],cr.prototype,"sigmoidStrengthLevel",void 0),c([d({})],cr.prototype,"statistics",null),c([d()],cr.prototype,"histograms",void 0),c([d({json:{type:[[Number]],name:"statistics",write:!0}})],cr.prototype,"customStatistics",null),c([ue("customStatistics")],cr.prototype,"readCustomStatistics",null),c([ge("customStatistics")],cr.prototype,"writeCustomStatistics",null),c([d({type:Boolean,json:{write:!0}})],cr.prototype,"useGamma",void 0),c([d({type:t2.apiValues,json:{type:t2.jsonValues,write:t2.write}})],cr.prototype,"stretchType",void 0),c([ue("stretchType",["stretchType"])],cr.prototype,"readStretchType",null),c([Ue({rasterStretch:"raster-stretch"})],cr.prototype,"type",void 0),cr=mk=c([F("esri.renderers.RasterStretchRenderer")],cr);const b9=cr,FT={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ca({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:ke.WebMercator}),minus180Line:new ca({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:ke.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ca({paths:[[[180,-180],[180,180]]],spatialReference:ke.WGS84}),minus180Line:new ca({paths:[[[-180,-180],[-180,180]]],spatialReference:ke.WGS84})}};function gy(e,t){return Math.ceil((e-t)/(2*t))}function Bne(e,t){const i=i2(e);for(const r of i)for(const s of r)s[0]+=t;return e}function i2(e){return zh(e)?e.rings:e.paths}function Ln(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Vi(e){return typeof e=="string"?$r(e):K(e)}function Ys(e,t,i){const r={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))r[s]=n.map(o=>Ys(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(i?.[s]);r[s]=JSON.stringify(o)}else r[s]=JSON.stringify(n);else r[s]=n}return r}async function t5e(e,t,i,r){const s=Vi(e),n=t[0].spatialReference,o={...r,responseType:"json",query:{...s.query,f:"json",sr:Xd(n),target:JSON.stringify({geometryType:Pn(t[0]),geometries:t}),cutter:JSON.stringify(i)}},a=await Ne(s.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const p=or(h);return p.spatialReference=n,p})}}function i5e(e){return{geometryType:Pn(e[0]),geometries:e.map(t=>t.toJSON())}}function r5e(e,t,i){const r=bbe(t);return e.map(s=>{const n=r.fromJSON(s);return n.spatialReference=i,n})}async function s5e(e,t,i){const r=typeof e=="string"?$r(e):e,s=t[0].spatialReference,n=Pn(t[0]),o={...i,query:{...r.query,f:"json",sr:Xd(s),geometries:JSON.stringify(i5e(t))}},{data:a}=await Ne(r.path+"/simplify",o);return r5e(a.geometries,n,s)}const zne=()=>xe.getLogger("esri.geometry.support.normalizeUtils");function n5e(e){return e.type==="polygon"}function o5e(e){return e[0].type==="polygon"}function a5e(e){return e[0].type==="polyline"}function mq(e){const t=[];let i=0,r=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(i=o[0],r=i):(i=Math.min(i,o[0]),r=Math.max(r,o[0]));o&&t.push([(i+r)/2,0])}return t}function l5e(e,t){if(!(e instanceof ca||e instanceof Rs)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw zne().error(s),new W(s)}const i=i2(e),r=[];for(const s of i){const n=[];r.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],u=s[o+1][0],h=s[o+1][1],p=Math.sqrt((u-a)*(u-a)+(h-l)*(h-l)),f=(h-l)/p,m=(u-a)/p,g=p/t;if(g>1){for(let T=1;T<=g-1;T++){const x=T*t,_=m*x+a,M=f*x+l;n.push([_,M])}const b=(p+Math.floor(g-1)*t)/2,w=m*b+a,S=f*b+l;n.push([w,S])}n.push([u,h])}}return n5e(e)?new Rs({rings:r,spatialReference:e.spatialReference}):new ca({paths:r,spatialReference:e.spatialReference})}function yq(e,t,i){if(t){const r=l5e(e,1e6);e=nv(r,!0)}return i&&(e=Bne(e,i)),e}function gq(e,t,i){if(Array.isArray(e)){const r=e[0];if(r>t){const s=gy(r,t);e[0]=r+s*(-2*t)}else if(r<i){const s=gy(r,i);e[0]=r+s*(-2*i)}}else{const r=e.x;if(r>t){const s=gy(r,t);e=e.clone().offset(s*(-2*t),0)}else if(r<i){const s=gy(r,i);e=e.clone().offset(s*(-2*i),0)}}return e}function u5e(e,t){let i=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],n=t.geometries[r],o=i2(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let h=0;for(let f=0;f<l.length;f++){const m=l[f][0];h=m>h?m:h}h=Number(h.toFixed(9));const p=-360*gy(h,180);for(let f=0;f<l.length;f++){const m=n.getPoint(a,f);n.setPoint(a,f,m.clone().offset(p,0))}return!0}})}if(s===i){if(o5e(e))for(const a of i2(n))e[s]=e[s].addRing(a);else if(a5e(e))for(const a of i2(n))e[s]=e[s].addPath(a)}else i=s,e[s]=n}return e}async function hu(e,t,i){if(!Array.isArray(e))return hu([e],t);t&&typeof t!="string"&&zne().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:t?.url??Kt.geometryServiceUrl;let s,n,o,a,l,u,h,p,f=0;const m=[],g=[];for(const _ of e)if(_!=null)if(s||(s=_.spatialReference,n=Cn(s),o=s.isWebMercator,u=o?102100:4326,a=FT[u].maxX,l=FT[u].minX,h=FT[u].plus180Line,p=FT[u].minus180Line),n)if(_.type==="mesh")g.push(_);else if(_.type==="point")g.push(gq(_.clone(),a,l));else if(_.type==="multipoint"){const M=_.clone();M.points=M.points.map(I=>gq(I,a,l)),g.push(M)}else if(_.type==="extent"){const M=_.clone()._normalize(!1,!1,n);g.push(M.rings?new Rs(M):M)}else if(_.extent){const M=_.extent,I=gy(M.xmin,l)*(2*a);let A=I===0?_.clone():Bne(_.clone(),I);M.offset(I,0);let{xmin:C,xmax:R}=M;C=Number(C.toFixed(9)),R=Number(R.toFixed(9)),M.intersects(h)&&R!==a?(f=R>f?R:f,A=yq(A,o),m.push(A),g.push("cut")):M.intersects(p)&&C!==l?(f=R*(2*a)>f?R*(2*a):f,A=yq(A,o,360),m.push(A),g.push("cut")):g.push(A)}else g.push(_.clone());else g.push(_);else g.push(_);let b=gy(f,a),w=-90;const S=b,T=new ca;for(;b>0;){const _=360*b-180;T.addPath([[_,w],[_,-1*w]]),w*=-1,b--}if(m.length>0&&S>0){const _=u5e(m,await t5e(r,m,T,i)),M=[],I=[];for(let R=0;R<g.length;R++){const O=g[R];if(O!=="cut")I.push(O);else{const k=_.shift(),L=e[R];L!=null&&L.type==="polygon"&&L.rings&&L.rings.length>1&&k.rings.length>=L.rings.length?(M.push(k),I.push("simplify")):I.push(o?Ty(k):k)}}if(!M.length)return I;const A=await s5e(r,M,i),C=[];for(let R=0;R<I.length;R++){const O=I[R];O!=="simplify"?C.push(O):C.push(o?Ty(A.shift()):A.shift())}return C}const x=[];for(let _=0;_<g.length;_++){const M=g[_];if(M!=="cut")x.push(M);else{const I=m.shift();x.push(o===!0?Ty(I):I)}}return x}function c5e(e){if(!e)return null;const t=e.extent;if(!t)return null;const i=e.spatialReference&&Cn(e.spatialReference);if(!i)return t;const[r,s]=i.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:u}=t;if([l,u]=[u,l],e.type==="extent"||o===0||o<=s||o>n||l<r||u>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=mq(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=mq(e.paths);break;case"multipoint":a=e.points}const h=t.clone();for(let p=0;p<a.length;p++){let f=a[p][0];f<0?(f+=s,u=Math.max(f,u)):(f-=s,l=Math.min(f,l))}return h.xmin=l,h.xmax=u,h.width<o?(h.xmin-=s,h.xmax-=s,h):t}function w9(e,t,i){const r=Cn(i);if(r==null)return e;const[s,n]=r.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let u=e+(a-l)*o;const h=u-t;return h>n?u-=o:h<s&&(u+=o),u}function Hdt(e,t){const i=Cn(t);if(i){const[r,s]=i.valid,n=s-r;if(e<r)for(;e<r;)e+=n;if(e>s)for(;e>s;)e-=n}return e}let vx=class{constructor(t=null,i=null,r=null){this.minValue=t,this.maxValue=i,this.noDataValue=r}};const h5e=9999999e31,p5e=2e-7,d5e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function Eg(e){return d5e[e]??[-34028234663852886e22,34028234663852886e22]}function Jdt(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function f5e(e){return(e?.startsWith("s")||e?.startsWith("u"))??!1}function Zdt(e,t,i,r){let[s,n]=Eg(i);const o=f5e(i);return o&&(s-=1e-5,n+=1e-5),o?i.startsWith("u")?m5e(e,t,r,[s,n]):y5e(e,t,r,[s,n]):g5e(e,t,r,[s,n])}function Ydt(e,t){for(let i=0;i<t.length;i++)t[i]&&isNaN(e[i])&&(t[i]=0,e[i]=0)}function m5e(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<s||a>n?t[o]=0:i[o]=a+.5|0}}function y5e(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<s||a>n?t[o]=0:i[o]=a+(a>0?.5:-.5)|0}}function g5e(e,t,i,r){const[s,n]=r;for(let o=0;o<t.length;o++)if(t[o]){const a=e[o];a<s||a>n?t[o]=0:i[o]=a}}function _9(e,t,i){if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:s,pixelType:n}=e,o=r[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),u=n==="f32"||n==="f64",h=Eg(n);let p=!1;for(let f=0;f<r.length;f++){const m=typeof t=="number"?t:t[f];if(m==null)continue;const g=s?.[f]?.minValue??h[0],b=s?.[f]?.maxValue??h[1];if(g>m+Number.EPSILON||b<m-Number.EPSILON)continue;const w=a[f]||l.slice(),S=r[f],T=i?.customFloatTolerance;if(u&&T!==0){let x=T;x||(x=Math.abs(m)>=h5e?p5e*Math.abs(m):n==="f32"?2**-23:Number.EPSILON);for(let _=0;_<S.length;_++)w[_]&&Math.abs(S[_]-m)<x&&(S[_]=0,w[_]=0,l[_]=0,p=!0)}else for(let x=0;x<S.length;x++)w[x]&&S[x]===m&&(S[x]=0,w[x]=0,l[x]=0,p=!0);a[f]=w}p&&(e.bandMasks=e.bandMasks||e.pixels.length>1?a:null,e.mask=l),p&&"updateStatistics"in e&&e.updateStatistics()}var Yp;let un=Yp=class extends ae{static createEmptyBand(e,t){return new(Yp.getPixelArrayConstructor(e))(t)}static combineBandMasks(e){if(e.length<2)return e[0];const t=e[0].length,i=new Uint8Array(t).fill(255);for(let r=0;r<e.length;r++){const s=e[r];for(let n=0;n<t;n++)s[n]||(i[n]=0)}return i}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels?.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new W("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new vx)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(i=>v5e(i,this.mask));const e=this.mask;let t=0;if(e!=null)for(let i=0;i<e.length;i++)e[i]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32"||!this.pixels)return;const[t,i]=Eg(e),r=this.pixels,s=this.width*this.height,n=r.length;let o,a,l;const u=[];for(let h=0;h<n;h++){l=Yp.createEmptyBand(e,s),o=r[h];for(let p=0;p<s;p++)a=o[p],l[p]=a>i?i:a<t?t:a;u.push(l)}this.pixels=u,this.pixelType=e}extractBands(e){const{pixels:t,statistics:i}=this;if(e==null||e.length===0||!t||t.length===0)return this;const r=t.length,s=e.some(p=>p>=t.length),n=r===e.length&&!e.some((p,f)=>p!==f);if(s||n)return this;const o=this.bandMasks?.length===r?e.map(p=>this.bandMasks[p]):void 0;let{mask:a,validPixelCount:l}=this;const{width:u,height:h}=this;return o?.length&&(a=Yp.combineBandMasks(o),l=a.filter(p=>!!p).length),new Yp({pixelType:this.pixelType,width:u,height:h,mask:a,bandMasks:o,validPixelCount:l,maskIsAlpha:this.maskIsAlpha,pixels:e.map(p=>t[p]),statistics:i&&e.map(p=>i[p])})}clone(){const e=new Yp({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask!=null&&(e.mask=new Uint8Array(this.mask)),this.bandMasks&&(e.bandMasks=this.bandMasks.map(r=>new Uint8Array(r)));const i=Yp.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const r=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=r?this.pixels[t].slice():new i(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=K(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:i,premultiplyAlpha:r,pixels:s}=this;if(!e||!s?.length)return void xe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let n,o,a,l;n=o=a=s[0],s.length>=3?(o=s[1],a=s[2]):s.length===2&&(o=s[1]);const u=new Uint32Array(e),h=this.width*this.height;if(n.length===h)if(t!=null&&t.length===h)if(i)for(l=0;l<h;l++){const p=t[l];if(p){const f=p/255;u[l]=r?p<<24|a[l]*f<<16|o[l]*f<<8|n[l]*f:p<<24|a[l]<<16|o[l]<<8|n[l]}}else for(l=0;l<h;l++)t[l]&&(u[l]=255<<24|a[l]<<16|o[l]<<8|n[l]);else for(l=0;l<h;l++)u[l]=255<<24|a[l]<<16|o[l]<<8|n[l];else xe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:i,statistics:r}=this;if(!e||!t?.length)return void xe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const s=this.pixelType;let n=1,o=0,a=1;if(r&&r.length>0){for(const b of r)if(b.minValue!=null&&(o=Math.min(o,b.minValue)),b.maxValue!=null&&b.minValue!=null){const w=b.maxValue-b.minValue;a=Math.max(a,w)}n=255/a}else{let b=255;s==="s8"?(o=-128,b=127):s==="u16"?b=65535:s==="s16"?(o=-32768,b=32767):s==="u32"?b=4294967295:s==="s32"?(o=-2147483648,b=2147483647):s==="f32"?(o=-34e38,b=34e38):s==="f64"&&(o=-Number.MAX_VALUE,b=Number.MAX_VALUE),n=255/(b-o)}const l=new Uint32Array(e),u=this.width*this.height;let h,p,f,m,g;if(h=p=f=t[0],h.length!==u)return xe.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(p=t[1],t.length>=3&&(f=t[2]),i!=null&&i.length===u)for(m=0;m<u;m++)i[m]&&(l[m]=255<<24|(f[m]-o)*n<<16|(p[m]-o)*n<<8|(h[m]-o)*n);else for(m=0;m<u;m++)l[m]=255<<24|(f[m]-o)*n<<16|(p[m]-o)*n<<8|(h[m]-o)*n;else if(i!=null&&i.length===u)for(m=0;m<u;m++)g=(h[m]-o)*n,i[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(h[m]-o)*n,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:i}=this;if(!e||!t?.length)return xe.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let r,s,n,o;r=s=n=t[0],t.length>=3?(s=t[1],n=t[2]):t.length===2&&(s=t[1]);const a=this.width*this.height;if(r.length!==a)return xe.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(i!=null&&i.length===a)for(o=0;o<a;o++)e[l++]=r[o],e[l++]=s[o],e[l++]=n[o],e[l++]=1&i[o];else for(o=0;o<a;o++)e[l++]=r[o],e[l++]=s[o],e[l++]=n[o],e[l++]=1}};function v5e(e,t){let i=1/0,r=-1/0;const s=e.length;let n,o=0;if(t!=null)for(n=0;n<s;n++)t[n]&&(o=e[n],i=o<i?o:i,r=o>r?o:r);else for(n=0;n<s;n++)o=e[n],i=o<i?o:i,r=o>r?o:r;return new vx(i,r)}c([d({json:{write:!0}})],un.prototype,"width",void 0),c([d({json:{write:!0}})],un.prototype,"height",void 0),c([d({json:{write:!0}})],un.prototype,"pixelType",void 0),c([Ht("pixelType")],un.prototype,"castPixelType",null),c([d({json:{write:!0}})],un.prototype,"validPixelCount",void 0),c([d({json:{write:!0}})],un.prototype,"mask",void 0),c([d({json:{write:!0}})],un.prototype,"maskIsAlpha",void 0),c([d({json:{write:!0}})],un.prototype,"pixels",void 0),c([d()],un.prototype,"premultiplyAlpha",void 0),c([d({json:{write:!0}})],un.prototype,"statistics",void 0),c([d({json:{write:!0}})],un.prototype,"depthCount",void 0),c([d({json:{write:!0}})],un.prototype,"noDataValues",void 0),c([d({json:{write:!0}})],un.prototype,"bandMasks",void 0),un=Yp=c([F("esri.layers.support.PixelBlock")],un);const At=un;var vq,bq;(function(e){e[e.matchAny=0]="matchAny",e[e.matchAll=1]="matchAll"})(vq||(vq={})),function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(bq||(bq={}));const Kdt=6;function Pi(e){return e!=null&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function Xdt(e){if(!e?.length||e.some(h=>!Pi(h)))return null;if(e.length===1)return e[0]?.clone()??null;const t=e,{width:i,height:r,pixelType:s}=t[0];if(t.some(h=>h.width!==i||h.height!==r))return null;const n=t.map(({mask:h})=>h).filter(h=>h!=null);let o=null;n.length&&(o=new Uint8Array(i*r),o.set(n[0]),n.length>1&&Hne(n.slice(1),o));const a=[];t.forEach(({pixels:h})=>a.push(...h));const l=t.map(({statistics:h})=>h).filter(h=>h?.length),u=[];return l.forEach(h=>u.push(...h)),new At({pixelType:s,width:i,height:r,mask:o,pixels:a,statistics:u.length?u:null})}function qb(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const i=t.sort((p,f)=>p[0]-f[0]);let r=0;i[0][0]<0&&(r=i[0][0]);const s=Math.max(256,i[i.length-1][0]-r+1),n=new Uint8Array(4*s),o=[];let a,l=0,u=0;const h=i[0].length===5;if(s>65536)return i.forEach(p=>{o[p[0]-r]=h?p.slice(1):p.slice(1).concat([255])}),{indexed2DColormap:o,offset:r,alphaSpecified:h};if(e.fillUnspecified)for(a=i[u],l=a[0]-r;l<s;l++)n[4*l]=a[1],n[4*l+1]=a[2],n[4*l+2]=a[3],n[4*l+3]=h?a[4]:255,l===a[0]-r&&(a=u===i.length-1?a:i[++u]);else for(l=0;l<i.length;l++)a=i[l],u=4*(a[0]-r),n[u]=a[1],n[u+1]=a[2],n[u+2]=a[3],n[u+3]=h?a[4]:255;return{indexedColormap:n,offset:r,alphaSpecified:h}}function N4(e,t){if(!Pi(e)||!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const i=e.clone(),r=i.pixels;let s=i.mask;const n=i.width*i.height;if(r.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t;let h=0;const p=r[0],f=new Uint8Array(p.length),m=new Uint8Array(p.length),g=new Uint8Array(p.length);let b,w=0;if(o){const S=o.length-1;if(s!=null)for(h=0;h<n;h++)s[h]&&(w=4*(p[h]-l),w<l||w>S?s[h]=0:(f[h]=o[w],m[h]=o[w+1],g[h]=o[w+2],s[h]=o[w+3]));else{for(s=new Uint8Array(n),h=0;h<n;h++)w=4*(p[h]-l),w<l||w>S?s[h]=0:(f[h]=o[w],m[h]=o[w+1],g[h]=o[w+2],s[h]=o[w+3]);i.mask=s}}else if(a)if(s!=null)for(h=0;h<n;h++)s[h]&&(b=a[p[h]],f[h]=b[0],m[h]=b[1],g[h]=b[2],s[h]=b[3]);else{for(s=new Uint8Array(n),h=0;h<n;h++)b=a[p[h]],f[h]=b[0],m[h]=b[1],g[h]=b[2],s[h]=b[3];i.mask=s}return i.pixels=[f,m,g],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=u,i}function wq(e,t){if(!Pi(e))return null;const{pixels:i,mask:r}=e,s=i.length;let n=t.lut;const{offset:o}=t;n&&n[0].length===1&&(n=i.map(()=>n));const a=[],l=t.outputPixelType||"u8";for(let h=0;h<s;h++){const p=qne(i[h],r,n[h],o||0,l);a.push(p)}const u=new At({width:e.width,height:e.height,pixels:a,mask:r,pixelType:l});return u.updateStatistics(),u}function qne(e,t,i,r,s){const n=e.length,o=At.createEmptyBand(s,n);if(t)for(let a=0;a<n;a++)t[a]&&(o[a]=i[e[a]-r]);else for(let a=0;a<n;a++)o[a]=i[e[a]-r];return o}function b5e(e,t){if(!Pi(e))return null;const i=e.clone(),{pixels:r}=i,s=i.width*i.height,n=t.length,o=Math.floor(n/2),a=t[Math.floor(o)],l=r[0];let u,h,p,f,m,g,b=!1;const w=new Uint8Array(s),S=new Uint8Array(s),T=new Uint8Array(s);let x=i.mask;const _=t[0].mappedColor.length===4;for(x||(x=new Uint8Array(s),x.fill(_?255:1),i.mask=x),m=0;m<s;m++)if(x[m]){for(u=l[m],b=!1,g=o,h=a,p=0,f=n-1;f-p>1;){if(u===h.value){b=!0;break}u>h.value?p=g:f=g,g=Math.floor((p+f)/2),h=t[Math.floor(g)]}b||(u===t[p].value?(h=t[p],b=!0):u===t[f].value?(h=t[f],b=!0):u<t[p].value?(b=!1,h=null):u>t[p].value&&(u<t[f].value?(h=t[p],b=!0):f===n-1?(b=!1,h=null):(h=t[f],b=!0))),b?(w[m]=h.mappedColor[0],S[m]=h.mappedColor[1],T[m]=h.mappedColor[2],x[m]=h.mappedColor[3]):w[m]=S[m]=T[m]=x[m]=0}return i.pixels=[w,S,T],i.mask=x,i.pixelType="u8",i.maskIsAlpha=_,i}function Qdt(e,t){if(!Pi(e))return null;const{width:i,height:r}=e,{inputRanges:s,outputValues:n,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:u}=t,h=e.pixels[0],p=At.createEmptyBand(o,h.length),f=e.mask,m=new Uint8Array(i*r);f?m.set(f):m.fill(255);const g=e.pixelType.startsWith("f")?1e-6:0,b=s.map(_=>_-g);b[0]=s[0],b[b.length-1]=s[s.length-1]+(u?1e-6:0);const w=s.length/2,[S,T]=Eg(o);for(let _=0;_<r;_++)for(let M=0;M<i;M++){const I=_*i+M;if(m[I]){const A=h[I];let C=!1;for(let R=w-1;R>=0;R--)if(A===b[2*R]||A>b[2*R]&&A<b[2*R+1]){p[I]=n[R],C=!0;break}C||(l?p[I]=A>T?T:A<S?S:A:m[I]=0)}}const x=a?.length;if(x)for(let _=0;_<r;_++)for(let M=0;M<i;M++){const I=_*i+M;if(!f||f[I]){const A=h[I];for(let C=0;C<x;C+=2)if(A>=a[C]&&A<=a[C+1]){p[I]=0,m[I]=0;break}}}return new At({width:i,height:r,pixelType:o,pixels:[p],mask:m})}function _q(e,t,i,r){const s=i!=null&&i.length>=2?new Set(i):null,n=i?.length===1?i[0]:null,o=!!t?.length;for(let a=0;a<e.length;a++)if(r[a]){const l=e[a];if(o){let u=!1;for(let h=0;h<t.length;h+=2)if(l>=t[h]&&l<=t[h+1]){u=!0;break}u||(r[a]=0)}r[a]&&(l===n||s?.has(l))&&(r[a]=0)}}function Sq(e,t){const i=e[0].length;for(let r=0;r<i;r++)if(t[r]){let s=!1;for(let n=0;n<e.length;n++)if(e[n][r]){s=!0;break}s||(t[r]=0)}}function Hne(e,t){const i=e[0].length;for(let r=0;r<i;r++)if(t[r]){let s=!1;for(let n=0;n<e.length;n++)if(e[n][r]===0){s=!0;break}s&&(t[r]=0)}}function eft(e,t){if(!Pi(e))return null;const{width:i,height:r,pixels:s}=e,n=i*r,o=new Uint8Array(n);e.mask?o.set(e.mask):o.fill(255);const a=s.length,{includedRanges:l,noDataValues:u,outputPixelType:h,matchAll:p,lookups:f}=t;if(f){const m=[];for(let g=0;g<a;g++){const b=f[g],w=qne(s[g],o,b.lut,b.offset||0,"u8");m.push(w)}m.length===1?o.set(m[0]):p?Sq(m,o):Hne(m,o)}else if(p){const m=[];for(let g=0;g<a;g++){const b=new Uint8Array(n);b.set(o),_q(s[g],l?.slice(2*g,2*g+2),u?.[g],b),m.push(b)}m.length===1?o.set(m[0]):Sq(m,o)}else for(let m=0;m<a;m++)_q(s[m],l?.slice(2*m,2*m+2),u?.[m],o);return new At({width:i,height:r,pixelType:h,pixels:s,mask:o})}function tft(e){const{srcPixelType:t,inputRanges:i,outputValues:r,allowUnmatched:s,noDataRanges:n,isLastInputRangeInclusive:o,outputPixelType:a}=e;if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const l=t.includes("16")?65536:256,u=t.includes("s")?-l/2:0,h=At.createEmptyBand(a,l),p=new Uint8Array(l);s&&p.fill(255);const[f,m]=Eg(a);if(i?.length&&r?.length){const b=i.map(w=>w-1e-6);b[0]=i[0],o&&(b[b.length-1]=i[i.length-1]);for(let w=0;w<b.length;w++){const S=r[w]>m?m:r[w]<f?f:r[w],T=Math.ceil(b[2*w]-u),x=Math.floor(b[2*w+1]-u);for(let _=T;_<=x;_++)h[_]=S,p[_]=255}}if(n?.length)for(let g=0;g<n.length;g++){const b=Math.ceil(n[2*g]-u),w=Math.floor(n[2*g+1]-u);for(let S=b;S<=w;S++)p[S]=0}return{lut:h,offset:u,mask:p}}function ift(e,t,i){if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const r=e.includes("16")?65536:256,s=e.includes("s")?-r/2:0,n=new Uint8Array(r);if(t)for(let o=0;o<t.length;o++){const a=Math.ceil(t[2*o]-s),l=Math.floor(t[2*o+1]-s);for(let u=a;u<=l;u++)n[u]=255}else n.fill(255);if(i)for(let o=0;o<i.length;o++)n[i[o]-s]=0;return{lut:n,offset:s}}function w5e(e,t,i,r,s,n,o,a){return{xmin:s<=i*e?0:s<i*e+e?s-i*e:e,ymin:n<=r*t?0:n<r*t+t?n-r*t:t,xmax:s+o<=i*e?0:s+o<i*e+e?s+o-i*e:e,ymax:n+a<=r*t?0:n+a<r*t+t?n+a-r*t:t}}function rft(e,t){if(!e||e.length===0)return null;const i=e.find(g=>g.pixelBlock);if(i?.pixelBlock==null)return null;const r=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,s=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,n=.01*Math.min(r,s),o=e.sort((g,b)=>Math.abs(g.extent.ymax-b.extent.ymax)>n?b.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-b.extent.xmin)>n?g.extent.xmin-b.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),h=Math.max.apply(null,o.map(g=>g.extent.ymax)),p={x:Math.round((t.xmin-a)/r),y:Math.round((h-t.ymax)/s)},f={width:Math.round((u-a)/r),height:Math.round((h-l)/s)},m={width:Math.round((t.xmax-t.xmin)/r),height:Math.round((t.ymax-t.ymin)/s)};return Math.round(f.width/i.pixelBlock.width)*Math.round(f.height/i.pixelBlock.height)!==o.length||p.x<0||p.y<0||f.width<m.width||f.height<m.height?null:{extent:t,pixelBlock:_5e(o.map(g=>g.pixelBlock),f,{clipOffset:p,clipSize:m})}}function k4(e,t,i,r,s,n){const{width:o,height:a}=i.block,{x:l,y:u}=i.offset,{width:h,height:p}=i.mosaic,f=w5e(o,a,r,s,l,u,h,p);let m=0,g=0;if(n){const b=n.hasGCSSShiftTransform?360:n.halfWorldWidth??0,w=o*n.resolutionX,S=n.startX+r*w;S<b&&S+w>b?g=n.rightPadding:S>=b&&(m=n.leftMargin-n.rightPadding,g=0)}if(f.xmax-=g,typeof t!="number")for(let b=f.ymin;b<f.ymax;b++){const w=(s*a+b-u)*h+(r*o-l)+m,S=b*o;for(let T=f.xmin;T<f.xmax;T++)e[w+T]=t[S+T]}else for(let b=f.ymin;b<f.ymax;b++){const w=(s*a+b-u)*h+(r*o-l)+m;for(let S=f.xmin;S<f.xmax;S++)e[w+S]=t}}function _5e(e,t,i={}){const{clipOffset:r,clipSize:s,alignmentInfo:n,blockWidths:o}=i;if(o)return S5e(e,t,{blockWidths:o});const a=e.find(O=>Pi(O));if(a==null)return null;const l=s?s.width:t.width,u=s?s.height:t.height,h=a.width,p=a.height,f=t.width/h,m=t.height/p,g={offset:r||{x:0,y:0},mosaic:s||t,block:{width:h,height:p}},b=a.pixelType,w=At.getPixelArrayConstructor(b),S=a.pixels.length,T=[];let x,_;for(let O=0;O<S;O++){_=new w(l*u);for(let k=0;k<m;k++)for(let L=0;L<f;L++){const V=e[k*f+L];Pi(V)&&(x=V.pixels[O],k4(_,x,g,L,k,n))}T.push(_)}const M=e.some(O=>O==null||O.mask!=null&&O.mask.length>0),I=e.some(O=>O?.bandMasks&&O.bandMasks.length>1),A=M?new Uint8Array(l*u):void 0,C=I?[]:void 0;if(A){for(let O=0;O<m;O++)for(let k=0;k<f;k++){const L=e[O*f+k],V=L!=null?L.mask:null;k4(A,V??(L?255:0),g,k,O,n)}if(C)for(let O=0;O<S;O++){const k=new Uint8Array(l*u);for(let L=0;L<m;L++)for(let V=0;V<f;V++){const J=e[L*f+V],y=J?.bandMasks?.[O]??J?.mask;k4(k,y??(J?255:0),g,V,L,n)}C.push(k)}}const R=new At({width:l,height:u,pixels:T,pixelType:b,bandMasks:C,mask:A});return R.updateStatistics(),R}function S5e(e,t,i){const r=e.find(w=>w!=null);if(r==null)return null;const s=e.some(w=>w==null||!!w.mask),{width:n,height:o}=t,a=s?new Uint8Array(n*o):null,{blockWidths:l}=i,u=[],h=r.getPlaneCount(),p=At.getPixelArrayConstructor(r.pixelType);if(s)for(let w=0,S=0;w<e.length;S+=l[w],w++){const T=e[w];if(!Pi(T))continue;const x=T.mask;for(let _=0;_<o;_++)for(let M=0;M<l[w];M++)a[_*n+M+S]=x==null?255:x[_*T.width+M]}const f=e.some(w=>w?.bandMasks&&w.bandMasks.length>1),m=f?[]:void 0,g=n*o;for(let w=0;w<h;w++){const S=new p(g),T=f?new Uint8Array(g):void 0;for(let x=0,_=0;x<e.length;_+=l[x],x++){const M=e[x];if(!Pi(M))continue;const I=M.pixels[w];if(I!=null){for(let A=0;A<o;A++)for(let C=0;C<l[x];C++)S[A*n+C+_]=I[A*M.width+C];if(T){const A=M.bandMasks?.[w]??M.mask;for(let C=0;C<o;C++)for(let R=0;R<l[x];R++)T[C*n+R+_]=A?A[C*M.width+R]:255}}}u.push(S),m&&T&&m.push(T)}const b=new At({width:n,height:o,mask:a,bandMasks:m,pixels:u,pixelType:r.pixelType});return b.updateStatistics(),b}function sft(e,t,i){if(!Pi(e))return null;const{width:r,height:s}=e,n=t.x,o=t.y,a=i.width+n,l=i.height+o;if(n<0||o<0||a>r||l>s||n===0&&o===0&&a===r&&l===s)return e;e.mask||(e.mask=new Uint8Array(r*s));const u=e.mask;for(let h=0;h<s;h++){const p=h*r;for(let f=0;f<r;f++)u[p+f]=h<o||h>=l||f<n||f>=a?0:1}return e.updateStatistics(),e}function x5e(e){if(!Pi(e))return null;const t=e.clone(),{width:i,height:r,pixels:s}=e,n=s[0],o=t.pixels[0],a=e.mask;for(let l=2;l<r-1;l++){const u=new Map;for(let p=l-2;p<l+2;p++)for(let f=0;f<4;f++){const m=p*i+f;Hb(u,n[m],a?a[m]:1)}o[l*i]=xq(u),o[l*i+1]=o[l*i+2]=o[l*i];let h=3;for(;h<i-1;h++){let p=(l-2)*i+h+1;Hb(u,n[p],a?a[p]:1),p=(l-1)*i+h+1,Hb(u,n[p],a?a[p]:1),p=l*i+h+1,Hb(u,n[p],a?a[p]:1),p=(l+1)*i+h+1,Hb(u,n[p],a?a[p]:1),p=(l-2)*i+h-3,jT(u,n[p],a?a[p]:1),p=(l-1)*i+h-3,jT(u,n[p],a?a[p]:1),p=l*i+h-3,jT(u,n[p],a?a[p]:1),p=(l+1)*i+h-3,jT(u,n[p],a?a[p]:1),o[l*i+h]=xq(u)}o[l*i+h+1]=o[l*i+h]}for(let l=0;l<i;l++)o[l]=o[i+l]=o[2*i+l],o[(r-1)*i+l]=o[(r-2)*i+l];return t.updateStatistics(),t}function xq(e){if(e.size===0)return 0;let t=0,i=-1,r=0;const s=e.keys();let n=s.next();for(;!n.done;)r=e.get(n.value),r>t&&(i=n.value,t=r),n=s.next();return i}function jT(e,t,i){if(i===0)return;const r=e.get(t);r===1?e.delete(t):e.set(t,r-1)}function Hb(e,t,i){i!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function Wne(e,t,i){let{x:r,y:s}=t;const{width:n,height:o}=i;if(r===0&&s===0&&o===e.height&&n===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,s),h=Math.max(0,r),p=Math.min(r+n,a),f=Math.min(s+o,l);if(p<0||f<0||!Pi(e))return null;r=Math.max(0,-r),s=Math.max(0,-s);const{pixels:m}=e,g=n*o,b=m.length,w=[];for(let _=0;_<b;_++){const M=m[_],I=At.createEmptyBand(e.pixelType,g);for(let A=u;A<f;A++){const C=A*a;let R=(A+s-u)*n+r;for(let O=h;O<p;O++)I[R++]=M[C+O]}w.push(I)}const S=new Uint8Array(g),T=e.mask;for(let _=u;_<f;_++){const M=_*a;let I=(_+s-u)*n+r;for(let A=h;A<p;A++)S[I++]=T?T[M+A]:1}const x=new At({width:i.width,height:i.height,pixelType:e.pixelType,pixels:w,mask:S});return x.updateStatistics(),x}function Jne(e,t=!0){if(!Pi(e))return null;const{pixels:i,width:r,height:s,mask:n,pixelType:o}=e,a=[],l=Math.round(r/2),u=Math.round(s/2),h=s-1,p=r-1;for(let m=0;m<i.length;m++){const g=i[m],b=At.createEmptyBand(o,l*u);let w=0;for(let S=0;S<s;S+=2)for(let T=0;T<r;T+=2){const x=g[S*r+T];if(t){const _=T===p?x:g[S*r+T+1],M=S===h?x:g[S*r+T+r],I=T===p?M:S===h?_:g[S*r+T+r+1];b[w++]=(x+_+M+I)/4}else b[w++]=x}a.push(b)}let f=null;if(n!=null){f=new Uint8Array(l*u);let m=0;for(let g=0;g<s;g+=2)for(let b=0;b<r;b+=2){const w=n[g*r+b];if(t){const S=b===p?w:n[g*r+b+1],T=g===h?w:n[g*r+b+r],x=b===p?T:g===h?S:n[g*r+b+r+1];f[m++]=w*S*T*x?1:0}else f[m++]=w}}return new At({width:l,height:u,pixelType:o,pixels:a,mask:f})}function nft(e,t,i=0,r=!0){if(!Pi(e))return null;const{width:s,height:n}=t;let{width:o,height:a}=e;const l=new Map,u={x:0,y:0},h=1+i;let p=e;for(let f=0;f<h;f++){const m=Math.ceil(o/s),g=Math.ceil(a/n);for(let b=0;b<g;b++){u.y=b*n;for(let w=0;w<m;w++){u.x=w*s;const S=Wne(p,u,t);l.set(`${f}/${b}/${w}`,S)}}f<h-1&&(p=Jne(p,r)),o=Math.round(o/2),a=Math.round(a/2)}return l}function oft(e){const{pixelBlock:t,tileSize:i,level:r,row:s,col:n,useBilinear:o}=e;if(!Pi(t))return null;const{width:a,height:l}=i,u=2**r,h=u*a,p=u*l;let f=Wne(t,{y:s*p,x:n*h},{width:h,height:p});if(!f)return null;for(let m=r;m>0;m--)f=Jne(f,o);return f}function Zne(e,t,i,r,s=0){const{width:n,height:o}=e,{width:a,height:l}=t,u=r.cols,h=r.rows,p=Math.ceil(a/u-.1/u),f=Math.ceil(l/h-.1/h);let m,g,b,w,S,T,x;const _=p*u,M=_*f*h,I=new Float32Array(M),A=new Float32Array(M),C=new Uint32Array(M),R=new Uint32Array(M);let O,k,L=0;for(let V=0;V<f;V++)for(let J=0;J<p;J++){m=12*(V*p+J),g=i[m],b=i[m+1],w=i[m+2],S=i[m+3],T=i[m+4],x=i[m+5];for(let y=0;y<h;y++){L=(V*h+y)*_+J*u,k=(y+.5)/h;for(let E=0;E<y;E++)O=(E+.5)/u,I[L+E]=(g*O+b*k+w)*n+s,A[L+E]=(S*O+T*k+x)*o+s,C[L+E]=Math.floor(I[L+E]),R[L+E]=Math.floor(A[L+E])}m+=6,g=i[m],b=i[m+1],w=i[m+2],S=i[m+3],T=i[m+4],x=i[m+5];for(let y=0;y<h;y++){L=(V*h+y)*_+J*u,k=(y+.5)/h;for(let E=y;E<u;E++)O=(E+.5)/u,I[L+E]=(g*O+b*k+w)*n+s,A[L+E]=(S*O+T*k+x)*o+s,C[L+E]=Math.floor(I[L+E]),R[L+E]=Math.floor(A[L+E])}}return{offsets_x:I,offsets_y:A,offsets_xi:C,offsets_yi:R,gridWidth:_}}function aft(e,t){const{coefficients:i,spacing:r}=t,{offsets_x:s,offsets_y:n,gridWidth:o}=Zne(e,e,i,{rows:r[0],cols:r[1]}),{width:a,height:l}=e,u=new Float32Array(a*l),h=180/Math.PI;for(let p=0;p<l;p++)for(let f=0;f<a;f++){const m=p*o+f,g=p===0?m:m-o,b=p===l-1?m:m+o,w=s[g]-s[b],S=n[b]-n[g];if(isNaN(w)||isNaN(S))u[p*a+f]=90;else{let T=Math.atan2(S,w)*h;T=(360+T)%360,u[p*a+f]=T}}return u}function lft(e,t,i,r,s="nearest"){if(!Pi(e))return null;s==="majority"&&(e=x5e(e));const{pixels:n,mask:o,bandMasks:a,pixelType:l}=e,u=e.width,h=e.height,p=At.getPixelArrayConstructor(l),f=n.length,{width:m,height:g}=t;let b=!1;for(let L=0;L<i.length;L+=3)i[L]===-1&&i[L+1]===-1&&i[L+2]===-1&&(b=!0);const{offsets_x:w,offsets_y:S,offsets_xi:T,offsets_yi:x,gridWidth:_}=Zne({width:u,height:h},t,i,r,s==="majority"?.5:0);let M;const I=(L,V,J,y)=>{const E=L instanceof Float32Array||L instanceof Float64Array?0:.5;for(let $=0;$<g;$++){M=$*_;for(let P=0;P<m;P++){if(w[M]<0||S[M]<0)L[$*m+P]=0;else if(y)L[$*m+P]=V[T[M]+x[M]*u];else{const G=Math.floor(w[M]),Q=Math.floor(S[M]),se=Math.ceil(w[M]),ie=Math.ceil(S[M]),ye=w[M]-G,Pe=S[M]-Q;if(!J||J[G+Q*u]&&J[se+Q*u]&&J[G+ie*u]&&J[se+ie*u]){const Ie=(1-ye)*V[G+Q*u]+ye*V[se+Q*u],we=(1-ye)*V[G+ie*u]+ye*V[se+ie*u];L[$*m+P]=(1-Pe)*Ie+Pe*we+E}else L[$*m+P]=V[T[M]+x[M]*u]}M++}}},A=[];let C;const R=a?.length===f,O=[];for(let L=0;L<f;L++){if(R){const V=new Uint8Array(m*g);I(V,a[L],a[L],!0),O.push(V)}C=new p(m*g),I(C,n[L],R?a[L]:o,s==="nearest"||s==="majority"),A.push(C)}const k=new At({width:m,height:g,pixelType:l,pixels:A,bandMasks:R?O:void 0});if(o!=null)k.mask=new Uint8Array(m*g),I(k.mask,o,o,!0);else if(b){k.mask=new Uint8Array(m*g);for(let L=0;L<m*g;L++)k.mask[L]=w[L]<0||S[L]<0?0:1}return k.updateStatistics(),k}const ny=new Map;ny.set("meter-per-second",1),ny.set("kilometer-per-hour",.277778),ny.set("knots",.514444),ny.set("feet-per-second",.3048),ny.set("mile-per-hour",.44704);const yk=180/Math.PI,S9=5,oa=new gt({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function mC(e,t){return ny.get(e)/ny.get(t)||1}function Yne(e){return(450-e)%360}function x9(e,t="geographic"){const[i,r]=e,s=Math.sqrt(i*i+r*r);let n=Math.atan2(r,i)*yk;return n=(360+n)%360,t==="geographic"&&(n=Yne(n)),[s,n]}function T5e(e,t="geographic"){let i=e[1];t==="geographic"&&(i=Yne(i)),i%=360;const r=e[0];return[r*Math.cos(i/yk),r*Math.sin(i/yk)]}function uft(e,t,i,r="geographic"){if(!Pi(e)||i==null)return e;const s=t==="vector-magdir"?e.clone():gk(e,t),n=s.pixels[1];for(let o=0;o<n.length;o++)n[o]=r==="geographic"?(n[o]+i[o]+270)%360:(n[o]+360-i[o])%360;return t==="vector-magdir"?s:gk(s,"vector-magdir")}function gk(e,t,i="geographic",r=1){if(!Pi(e))return e;const{pixels:s,width:n,height:o}=e,a=n*o,l=s[0],u=s[1],h=e.pixelType.startsWith("f")?e.pixelType:"f32",p=At.createEmptyBand(h,a),f=At.createEmptyBand(h,a);let m=0;for(let b=0;b<o;b++)for(let w=0;w<n;w++)t==="vector-uv"?([p[m],f[m]]=x9([l[m],u[m]],i),p[m]*=r):([p[m],f[m]]=T5e([l[m],u[m]],i),p[m]*=r,f[m]*=r),m++;const g=new At({pixelType:h,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[p,f]});return g.updateStatistics(),g}function E5e(e,t,i=1){if(i===1||!Pi(e))return e;const r=e.clone(),{pixels:s,width:n,height:o}=r,a=s[0];s[1];let l=0;for(let u=0;u<o;u++)for(let h=0;h<n;h++)a[l]*=i,l++;return r.updateStatistics(),r}function cft(e,t,i,r,s){if(s==null||!s.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/r),height:Math.round(i/r),resolution:e.width/t};const n=s.xmin,o=s.ymax,a=(e.xmax-e.xmin)/t*r,l=(e.ymax-e.ymin)/i*r,u=(a+l)/2;return e.xmin=n+Math.floor((e.xmin-n)/a)*a,e.xmax=n+Math.ceil((e.xmax-n)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const M5e=Kne(0,0,0);function Kne(e=0,t=0,i=Math.PI,r=!0){r&&(i=(2*Math.PI-i)%(2*Math.PI));const s=r?-1:1,n=13*s,o=-7*s,a=-2*s,l=-16*s,u=21.75,[h,p]=Us(0,t+n,i,u),[f,m]=Us(e-5.5,t+o,i,u),[g,b]=Us(e+5.5,t+o,i,u),[w,S]=Us(e-1.5,t+a,i,u),[T,x]=Us(e+1.5,t+a,i,u),[_,M]=Us(e-1.5,t+l,i,u),[I,A]=Us(e+1.5,t+l,i,u);return[h,p,f,m,w,S,T,x,g,b,_,M,I,A]}function I5e(e=0,t=Math.PI,i=!0){i&&(t=(2*Math.PI-t)%(2*Math.PI));const r=10,s=i?-1:1,n=5*s,o=20*s,a=25*s,l=45,u=0,h=0,p=2,f=0,m=p*s,g=i?1:-1,b=r/2*g;let[w,S]=[u+b,h-o],[T,x]=[w+p*g,S],[_,M]=[T-f*g,x+m],[I,A]=[u-b,h-a],[C,R]=[I+f*g,A-m],O=Math.ceil(e/S9),k=Math.floor(O/10);O-=8*k;const L=[],V=[];for(let ye=0;ye<O/2;ye++,k--){k<=0&&O%2==1&&ye===(O-1)/2&&(I=u,C=I+f*g,A=(A+S)/2,R=A-m);const[Pe,Ie]=Us(I,A,t,l);if(k>0){const[we,De]=Us(T,A,t,l),[Ze,et]=Us(w,S,t,l);L.push(we),L.push(De),L.push(Pe),L.push(Ie),L.push(Ze),L.push(et)}else{const[we,De]=Us(T,x,t,l),[Ze,et]=Us(_,M,t,l),[nt,$t]=Us(C,R,t,l);V.push(Pe),V.push(Ie),V.push(nt),V.push($t),V.push(Ze),V.push(et),V.push(we),V.push(De)}A+=n,S+=n,x+=n,M+=n,R+=n}const[J,y]=Us(u+b,h+o,t,l),E=(r/2+p)*g,[$,P]=Us(u+E,h+o,t,l),[G,Q]=Us(u+b,h-a,t,l),[se,ie]=Us(u+E,h-a,t,l);return{pennants:L,barbs:V,shaft:[J,y,$,P,G,Q,se,ie]}}function Us(e,t,i,r=1){const s=Math.sqrt(e*e+t*t)/r,n=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[s,(2*Math.PI+n-i)%(2*Math.PI)]}const UT=[0,1,3,6,10,16,21,27,33,40,47,55,63],A5e=[0,.5,1,1.5,2],$5e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function Hf(e,t,i,r){const s=mC(r||"knots",i);let n;for(n=1;n<t.length;n++)if(n===t.length-1){if(e<t[n]*s)break}else if(e<=t[n]*s)break;return Math.min(n-1,t.length-2)}function C5e(e,t,i,r,s){let n=0;switch(t){case"beaufort_kn":n=Hf(e,UT,"knots",i);break;case"beaufort_km":n=Hf(e,UT,"kilometer-per-hour",i);break;case"beaufort_ft":n=Hf(e,UT,"feet-per-second",i);break;case"beaufort_m":n=Hf(e,UT,"meter-per-second",i);break;case"classified_arrow":n=Hf(e,s??[],r,i);break;case"ocean_current_m":n=Hf(e,A5e,"meter-per-second",i);break;case"ocean_current_kn":n=Hf(e,$5e,"knots",i)}return n}function R5e(e,t){const{style:i,inputUnit:r,outputUnit:s,breakValues:n}=t,o=oa.fromJSON(r),a=oa.fromJSON(s),l=7*6,u=15;let h=0,p=0;const{width:f,height:m,mask:g}=e,b=e.pixels[0],w=e.pixels[1],S=g!=null?g.filter(M=>M>0).length:f*m,T=new Float32Array(S*l),x=new Uint32Array(u*S),_=t.invertDirection?Kne(0,0,0,!1):M5e;for(let M=0;M<m;M++)for(let I=0;I<f;I++){const A=M*f+I;if(!g||g[M*f+I]){const C=(w[A]+360)%360/180*Math.PI,R=C5e(b[A],i,o,a,n);for(let k=0;k<_.length;k+=2)T[h++]=(I+.5)/f,T[h++]=(M+.5)/m,T[h++]=_[k],T[h++]=_[k+1]+C,T[h++]=R,T[h++]=b[A];const O=7*(h/l-1);x[p++]=O,x[p++]=O+1,x[p++]=O+2,x[p++]=O+0,x[p++]=O+4,x[p++]=O+3,x[p++]=O+0,x[p++]=O+2,x[p++]=O+3,x[p++]=O+2,x[p++]=O+5,x[p++]=O+3,x[p++]=O+5,x[p++]=O+6,x[p++]=O+3}}return{vertexData:T,indexData:x}}const D4=[];function O5e(e,t){if(D4.length===0)for(let m=0;m<30;m++)D4.push(I5e(5*m,0,!t.invertDirection));const i=mC(oa.fromJSON(t.inputUnit),"knots"),{width:r,height:s,mask:n}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],h=[];let p=0,f=0;for(let m=0;m<s;m++)for(let g=0;g<r;g++){const b=m*r+g,w=o[b]*i;if((!n||n[m*r+g])&&w>=S9){const S=(a[b]+360)%360/180*Math.PI,{pennants:T,barbs:x,shaft:_}=D4[Math.min(Math.floor(w/5),29)];if(T.length+x.length===0)continue;let M=u.length/l;const I=(g+.5)/r,A=(m+.5)/s;for(let C=0;C<T.length;C+=2)u[p++]=I,u[p++]=A,u[p++]=T[C],u[p++]=T[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<x.length;C+=2)u[p++]=I,u[p++]=A,u[p++]=x[C],u[p++]=x[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<_.length;C+=2)u[p++]=I,u[p++]=A,u[p++]=_[C],u[p++]=_[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<T.length/6;C++)h[f++]=M,h[f++]=M+1,h[f++]=M+2,M+=3;for(let C=0;C<x.length/8;C++)h[f++]=M,h[f++]=M+1,h[f++]=M+2,h[f++]=M+1,h[f++]=M+2,h[f++]=M+3,M+=4;h[f++]=M+0,h[f++]=M+1,h[f++]=M+2,h[f++]=M+1,h[f++]=M+3,h[f++]=M+2,M+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(h)}}function P5e(e,t){let r=0,s=0;const{width:n,height:o,mask:a}=e,l=e.pixels[0],u=[],h=[],p=mC(oa.fromJSON(t.inputUnit),"knots"),f=t.style==="wind_speed"?S9:Number.MAX_VALUE;for(let m=0;m<o;m++)for(let g=0;g<n;g++){const b=l[m*n+g]*p;if((!a||a[m*n+g])&&b<f){for(let S=0;S<4;S++)u[r++]=(g+.5)/n,u[r++]=(m+.5)/o,u[r++]=S<2?-.5:.5,u[r++]=S%2==0?-.5:.5,u[r++]=0,u[r++]=b;const w=4*(r/24-1);h[s++]=w,h[s++]=w+1,h[s++]=w+2,h[s++]=w+1,h[s++]=w+2,h[s++]=w+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(h)}}function hft(e,t){return t.style==="simple_scalar"?P5e(e,t):t.style==="wind_speed"?O5e(e,t):R5e(e,t)}function pft(e,t,i,r=[0,0],s=.5){const{width:n,height:o,mask:a}=e,[l,u]=e.pixels,[h,p]=r,f=Math.round((n-h)/i),m=Math.round((o-p)/i),g=f*m,b=new Float32Array(g),w=new Float32Array(g),S=new Uint8Array(g);for(let x=0;x<m;x++)for(let _=0;_<f;_++){let M=0;const I=x*f+_,A=Math.max(0,x*i+p),C=Math.max(0,_*i+h),R=Math.min(o,A+i),O=Math.min(n,C+i);for(let k=A;k<R;k++)for(let L=C;L<O;L++){const V=k*n+L;if(!a||a[V]){M++;const J=[l[V],u[V]],[y,E]=J;b[I]+=y,w[I]+=E}}if(M>=(R-A)*(O-C)*(1-s)){S[I]=1;const[k,L]=x9([b[I]/M,w[I]/M]);b[I]=k,w[I]=L}else S[I]=0,b[I]=0,w[I]=0}const T=new At({width:f,height:m,pixels:[b,w],mask:S});return T.updateStatistics(),T}function L5e(e){const t=[];return vk(Fre(e),t),t.length?new Oe(Dre(t[0])):null}function vk(e,t){if(!e)return;let i;i=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(i?.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||r&&(Ure(s)||jre(s)&&s.markerPlacement&&D8(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&Tq(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach(n=>{vk(n.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":Tq(t,s.color);break;case"CIMHatchFill":vk(s.lineSymbol,t)}}}function Tq(e,t){for(const i of e)if(i.join(".")===t.join("."))return;e.push(t)}function dft(e,t,i){t instanceof Oe||(t=new Oe(t));const r=Fre(e);r&&bk(r,t)}function bk(e,t,i){if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const s=r?.type==="CIMPolygonSymbol";if(r?.symbolLayers)for(const n of r.symbolLayers){if(n.colorLocked||s&&(Ure(n)||jre(n)&&n.markerPlacement&&D8(n.markerPlacement)))continue;const o=t.toArray();switch(n.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":n.tintColor=o;break;case"CIMVectorMarker":n.markerGraphics?.forEach(a=>{bk(a.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":n.color=o;break;case"CIMHatchFill":bk(n.lineSymbol,t)}}}new O8(1e3);new Oe([128,128,128]);const N5e=new Oe("white");function fft(e,t){if(!e)return null;let i=null;return Qy(e)?i=k5e(e):U$(e)&&(i=e.type==="cim"?L5e(e):e.color?new Oe(e.color):null),i?rS(i,t):null}function k5e(e){const t=e.symbolLayers;if(!t)return null;let i=null;return t.forEach(r=>{r.type==="object"&&r.resource?.href||(i=r.type==="water"?r.color:r.material?r.material.color:null)}),i?new Oe(i):null}function rS(e,t){if(t==null||e==null)return e;const i=e.toRgba();return i[3]=i[3]*t,new Oe(i)}function D5e(e,t,i){const r=e.symbolLayers;if(!r)return;const s=n=>rS(t=t??n??(i!=null?N5e:null),i);r.forEach(n=>{if(n.type!=="object"||!n.resource?.href||t)if(n.type==="water")n.color=s(n.color);else{const o=n.material!=null?n.material.color:null,a=s(o);n.material==null?n.material=new Io({color:a}):n.material.color=a,i!=null&&"outline"in n&&n.outline?.color!=null&&(n.outline.color=rS(n.outline.color,i))}})}function F5e(e,t,i){(t=t??e.color)&&(e.color=rS(t,i)),i!=null&&"outline"in e&&e.outline?.color&&(e.outline.color=rS(e.outline.color,i))}function mft(e,t,i){e&&(t||i!=null)&&(t&&(t=new Oe(t)),Qy(e)?D5e(e,t,i):U$(e)&&F5e(e,t,i))}async function j5e(e,t){const i=e.symbolLayers;i&&await W0e(i,async r=>U5e(r,t))}async function U5e(e,t){switch(e.type){case"extrude":G5e(e,t);break;case"icon":case"line":case"text":V5e(e,t);break;case"path":z5e(e,t);break;case"object":await B5e(e,t)}}function V5e(e,t){const i=Xne(t);i!=null&&(e.size=i)}function Xne(e){for(const t of e)if(typeof t=="number")return t;return null}function G5e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function B5e(e,t){const{resourceSize:i,symbolSize:r}=await q5e(e),s=Qne(t,i,r);e.width=r2(t[0],r[0],i[0],s),e.depth=r2(t[1],r[1],i[1],s),e.height=r2(t[2],r[2],i[2],s)}function z5e(e,t){const i=Qne(t,wie,[e.width,void 0,e.height]);e.width=r2(t[0],e.width,1,i),e.height=r2(t[2],e.height,1,i)}function Qne(e,t,i){for(let r=0;r<3;r++){const s=e[r];switch(s){case"symbol-value":{const n=i[r];return n!=null?n/t[r]:1}case"proportional":break;default:if(s&&t[r])return s/t[r]}}return 1}async function q5e(e){const{computeObjectLayerResourceSize:t}=await ce(()=>import("./symbolLayerUtils-Lk0Wvm1V.js"),__vite__mapDeps([144,1]),import.meta.url),i=await t(e,10),{width:r,height:s,depth:n}=e,o=[r,n,s];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function r2(e,t,i,r){switch(e){case"proportional":return i*r;case"symbol-value":return t??i;default:return e}}function H5e(e,t){const i=Xne(t);if(i!=null)switch(e.type){case"simple-marker":e.size=i;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=i,e.height=i*r):(e.width=i*r,e.height=i);break}case"simple-line":e.width=i;break;case"text":e.font.size=i}}async function W5e(e,t){if(e&&t)return Qy(e)?j5e(e,t):void(U$(e)&&H5e(e,t))}function J5e(e,t,i){if(e&&t!=null)if(Qy(e)){const r=e.symbolLayers;r&&r.forEach(s=>{if(s.type==="object")switch(i){case"tilt":s.tilt=(s.tilt??0)+t;break;case"roll":s.roll=(s.roll??0)+t;break;default:s.heading=(s.heading??0)+t}s.type==="icon"&&(s.angle+=t)})}else U$(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}async function yft(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}var wk;const Eq=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),VT=new gt({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),GT=new gt({flow_from:"flow-from",flow_to:"flow-to"});let cn=wk=class extends bf(ae){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return Eq.has(e)?oa.fromJSON(e):null}readOutputUnit(e,t){return Eq.has(e)?oa.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,i=this._createStyleRenderer(e);return i.field=t,i}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new vf({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new G$({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new wk({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:K(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,i=[]){const r=new Array,s=mC(this.inputUnit,this.outputUnit),n=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?gk(e.pixelBlock,"vector-uv",n,s):E5e(e.pixelBlock,"vector-magdir",s);if(o==null)return r;const a=e.extent,l=o.mask!=null&&o.mask.length>0;let u=0;const h=(a.xmax-a.xmin)/o.width,p=(a.ymax-a.ymin)/o.height;for(let f=0;f<o.height;f++)for(let m=0;m<o.width;m++,u++){let g=new Ve({x:a.xmin+m*h+h/2,y:a.ymax-f*p-p/2,spatialReference:a.spatialReference});g=(await hu(g))[0];const b=i.some(w=>w.intersects(g));if((!l||o.mask[u])&&!b){const w={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},S=new nl({geometry:new Ve({x:g.x,y:g.y,spatialReference:a.spatialReference}),attributes:w});S.symbol=this._getVisualVariablesAppliedSymbol(S),r.push(S)}}return r}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new Uo({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new ro({width:0}),size:20,color:e||new Oe([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;const t=this.styleRenderer?.getSymbol(e)?.clone(),i=this.sizeVariables,r=this.rotationVariables;if(i&&i.length&&this.sizeVariables.forEach(s=>W5e(t,lre([s],e))),r&&r.length){const s=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+s,this.rotationVariables.forEach(n=>J5e(t,M8(n,e),n.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new pb(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new Oe([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new Oe([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new Oe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.28084;return t=t.map(s=>s*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new Oe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=2.23694;return t=t.map(s=>s*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new Oe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const i=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.6;return t=t.map(s=>s*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Oe([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Oe([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new Oe([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const r=this.sizeVariables[0].minDataValue,s=this.sizeVariables[0].maxDataValue;if(r&&s){const n=(s-r)/5;t=Array.from(Array(6).keys()).map(o=>r+n*o)}}const i=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,i)}}_createSimpleScalarRenderer(){return{defaultSymbol:qh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(s=>5*s),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],i=qh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),r=e.map((s,n)=>{let o;if(n!==e.length-1)if(n===0)o={minValue:s,maxValue:e[n+1],symbol:i};else{const a=qh.fromJSON({type:"esriPMS",imageData:t[n].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:s,maxValue:e[n+1],symbol:a}}return new v1(o)});return{defaultSymbol:i,classBreakInfos:r}}_getClassBreaks(e,t){return t.map((i,r)=>new v1({minValue:e[r],maxValue:e[r+1],symbol:this._getDefaultSymbol(new Oe(i))}))}};c([d({type:["Magnitude"],json:{write:!0}})],cn.prototype,"attributeField",void 0),c([d({type:GT.apiValues,json:{type:GT.jsonValues,read:{reader:GT.read},write:{writer:GT.write}}})],cn.prototype,"flowRepresentation",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0}})],cn.prototype,"rotationType",void 0),c([d({type:VT.apiValues,json:{type:VT.jsonValues,read:{reader:VT.read},write:{writer:VT.write}}})],cn.prototype,"style",void 0),c([d({json:{write:!0}})],cn.prototype,"symbolTileSize",void 0),c([d({type:oa.apiValues,json:{type:oa.jsonValues,write:{writer:oa.write}}})],cn.prototype,"inputUnit",void 0),c([ue("inputUnit")],cn.prototype,"readInputUnit",null),c([d({type:oa.apiValues,json:{type:oa.jsonValues,read:{reader:oa.read},write:{writer:oa.write}}})],cn.prototype,"outputUnit",void 0),c([ue("outputUnit")],cn.prototype,"readOutputUnit",null),c([Ue({vectorField:"vector-field"})],cn.prototype,"type",void 0),c([d({type:pb})],cn.prototype,"styleRenderer",null),c([d({type:vf})],cn.prototype,"sizeVariables",null),c([d({type:G$})],cn.prototype,"rotationVariables",null),cn=wk=c([F("esri.renderers.VectorFieldRenderer")],cn);const T9=cn,L3={key:"type",base:null,typeMap:{"unique-value":fb,"class-breaks":pb,"raster-colormap":v9,"raster-stretch":b9,"vector-field":T9,"raster-shaded-relief":Vne,flow:Nne}},N3={...L3,typeMap:{...L3.typeMap}};delete N3.typeMap["vector-field"],delete N3.typeMap.flow;const Z5e={uniqueValue:fb,classBreaks:pb,rasterStretch:b9,rasterColormap:v9,vectorField:T9,rasterShadedRelief:Vne,flowRenderer:Nne};function Y5e(e){return e&&Z5e[e.type]||null}function K5e(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const r=e.authoringInfo||{classificationMethod:""};r.classificationMethod=e.classificationMethod,e.authoringInfo=r}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const i=Y5e(e);if(i){const r=new i;return r.read(e,t),r}return t?.messages&&e&&t.messages.push(new Fo("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var _k;let Fm=_k=class extends ae{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new _k({variableName:this.variableName,dimensionName:this.dimensionName,values:K(this.values),isSlice:this.isSlice})}};c([d({type:String,json:{write:!0}})],Fm.prototype,"variableName",void 0),c([d({type:String,json:{write:!0}})],Fm.prototype,"dimensionName",void 0),c([d({type:Rb.array(Rb.oneOf([Rb.native(Number),Rb.array(Rb.native(Number))])),json:{write:!0}})],Fm.prototype,"values",void 0),c([d({type:Boolean,json:{write:!0}})],Fm.prototype,"isSlice",void 0),Fm=_k=c([F("esri.layers.support.DimensionalDefinition")],Fm);const T1=Fm,Bd=ar()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),s2=ar()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),qv=ar()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let Kp=class extends ae{constructor(){super(...arguments),this.pixelType="unknown"}};c([d({type:String,json:{write:!0}})],Kp.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Kp.prototype,"description",void 0),c([d({type:vt,json:{type:vt,write:!0,name:"_object_id"}})],Kp.prototype,"id",void 0),c([d({type:String,json:{type:qv.jsonValues,read:qv.read,write:qv.write}})],Kp.prototype,"pixelType",void 0),c([d({type:String,json:{write:!0}})],Kp.prototype,"type",void 0),Kp=c([F("esri.layers.support.RasterFunctionInfo")],Kp);const X5e=Kp;let oh=class extends ae{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};c([d({type:String,json:{write:!0}})],oh.prototype,"name",void 0),c([d({type:Number,json:{type:vt,write:!0,name:"_object_id"}})],oh.prototype,"id",void 0),c([d({type:Boolean,json:{write:!0}})],oh.prototype,"isDataset",void 0),c([d({type:Boolean,json:{write:!0}})],oh.prototype,"isPublic",void 0),c([d({json:{write:!0}})],oh.prototype,"value",void 0),c([d({type:String,json:{write:!0}})],oh.prototype,"type",void 0),oh=c([F("esri.layers.support.RasterFunctionVariable")],oh);const Q5e=oh,BT={key:"type",base:null,typeMap:{RasterFunctionVariable:Q5e}};let jm=class extends ae{};c([d({types:BT,json:{types:BT,name:"MatchVariable"}})],jm.prototype,"matchVariable",void 0),c([d({types:BT,json:{types:BT,name:"UnionDimension"}})],jm.prototype,"unionDimension",void 0),c([d({type:Number,json:{type:vt,write:!0,name:"_object_id"}})],jm.prototype,"id",void 0),c([d({type:String,json:{write:!0}})],jm.prototype,"type",void 0),jm=c([F("esri.layers.support.RasterFunctionProperties")],jm);const e4e=jm,F4=new gt({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let ws=class extends ae{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};c([d({type:[String],json:{write:!0}})],ws.prototype,"aliases",void 0),c([d({type:Object,json:{write:!0}})],ws.prototype,"arguments",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"description",void 0),c([d({type:X5e,json:{write:!0,name:"function"}})],ws.prototype,"functionInfo",void 0),c([d({type:F4.apiValues,json:{type:[0,1,2],read:F4.read,write:F4.write}})],ws.prototype,"functionType",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"group",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"help",void 0),c([d({type:Number,json:{type:vt,write:!0,name:"_object_id"}})],ws.prototype,"id",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"name",void 0),c([d({type:String,json:{write:!0,name:"definition"}})],ws.prototype,"queryDefinition",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"tag",void 0),c([d({type:e4e,json:{write:!0}})],ws.prototype,"properties",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],ws.prototype,"thumbnailEx",void 0),c([d({json:{type:["RasterFunctionTemplate"],write:!0}})],ws.prototype,"type",void 0),ws=c([F("esri.layers.support.RasterFunctionTemplate")],ws);const eoe=ws;var Sk;const JM=new Set(["raster","raster2","dem","fillraster"]),ZM=new Set(["rasters"]),Mq=e=>e?.rasterFunction?fn.fromJSON(e):e,j4=e=>e&&e instanceof fn?e.toJSON():e,xk=e=>e?.functionName&&!e.declaredClass,Iq=e=>xk(e)?new fn(e):e,t4e=e=>{if(e==null)return null;e=K(e);const t={};for(const i of Object.keys(e))JM.has(i.toLowerCase())?t[i]=Mq(e[i]):ZM.has(i.toLowerCase())&&Array.isArray(e[i])?t[i]=e[i].map(Mq):t[i]=e[i];return t},i4e={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:eoe}},json:{write:!0,name:"rasterFunctionDefinition"}};let fn=Sk=class extends ae{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(i=>JM.has(i.toLowerCase())&&xk(e[i]))||t.some(i=>ZM.has(i.toLowerCase())&&Array.isArray(e[i])&&e[i].some(r=>xk(r)))){e=K(e);for(const i of t)JM.has(i.toLowerCase())?e[i]=Iq(e[i]):ZM.has(i.toLowerCase())&&Array.isArray(e[i])&&(e[i]=e[i].map(r=>Iq(r)))}}this._set("functionArguments",e)}readFunctionArguments(e){return t4e(e)}writeFunctionArguments(e,t,i){const r={};for(const s of Object.keys(e))JM.has(s.toLowerCase())?r[s]=j4(e[s]):ZM.has(s.toLowerCase())&&Array.isArray(e[s])?r[s]=e[s].map(j4):r[s]=j4(e[s]);t[i]=r}readFunctionName(e,t){const i=t.rasterFunctionInfos;return t.name||(i?.length&&i[0].name!=="None"?i[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=e?eoe.fromJSON(e):null}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes('"type":"ClipFunction"'):JSON.stringify(this).includes('"rasterFunction":"Clip"')}clone(){return new Sk({functionName:this.functionName,functionArguments:K(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:K(this.rasterFunctionDefinition)})}};c([d({json:{type:Object,name:"rasterFunctionArguments"}})],fn.prototype,"functionArguments",null),c([ue("functionArguments")],fn.prototype,"readFunctionArguments",null),c([ge("functionArguments")],fn.prototype,"writeFunctionArguments",null),c([d({json:{type:String,write:{target:"rasterFunction"}}})],fn.prototype,"functionName",void 0),c([ue("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],fn.prototype,"readFunctionName",null),c([Ue({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1,default:"unknown"})],fn.prototype,"outputPixelType",void 0),c([d({type:String,json:{read:!0,write:!0}})],fn.prototype,"variableName",void 0),c([d()],fn.prototype,"rasterFunctionDefinition",null),c([d(i4e)],fn.prototype,"functionDefinition",void 0),c([d()],fn.prototype,"hasClipFunction",null),fn=Sk=c([F("esri.layers.support.RasterFunction")],fn);const si=fn,r4e={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},s4e=new Set(["u1","u2","u4","u8","s8","u16","s16"]),n4e={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},o4e=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function toe(e){return o4e.has(e.type)}function Tk(e,t){if(!e||!t)return K(e||t);const i=K(e);if(i.functionDefinition&&t.rasterFunctionDefinition){const r=t.rasterFunctionDefinition;(r.thumbnail||r.thumbnailEx)&&(r.thumbnail=r.thumbnailEx=void 0),ioe(i.functionDefinition.arguments,t),i.rasterFunctionDefinition=i.functionDefinition.toJSON()}else t.functionName?.toLowerCase()!=="none"&&(roe(i.functionArguments).Raster=t);return i}function ioe(e,t){for(const i in e)i.toLowerCase()==="raster"&&(e[i].type==="RasterFunctionVariable"?(e[i]=t.rasterFunctionDefinition,e[i].type="RasterFunctionTemplate"):e[i].type==="RasterFunctionTemplate"&&ioe(e[i].arguments,t))}function wc(e){const t=K(r4e[e.functionName+"Function"]),i=e.functionArguments;for(const r in i)r.toLowerCase()==="raster"?(t.arguments[r]=wc(i[r]),t.arguments[r].type="RasterFunctionTemplate"):r.toLowerCase()==="colormap"?(t.arguments[r].value=f4e(i[r]),t.arguments.ColorSchemeType.value=0):t.arguments[r].value=i[r];return t}function a4e(e,t){switch(t=t||{},e.type){case"raster-stretch":return c4e(e,t);case"class-breaks":return h4e(e,t);case"unique-value":return p4e(e,t);case"raster-colormap":return d4e(e,t);case"vector-field":return l4e(e,t);case"raster-shaded-relief":return u4e(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function roe(e){const t=e?.Raster??e?.raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?roe(t.functionArguments):e}const Wb={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function l4e(e,t){const i=new si;i.functionName="VectorFieldRenderer";const{dataType:r,bandNames:s}=t,n=r==="vector-uv";let o,a;if(s&&s.length===2){const m=s.map(g=>g.toLowerCase());o=m.indexOf("magnitude"),a=m.indexOf("direction")}o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,h=e.visualVariables?e.visualVariables.find(m=>m.field==="Magnitude"):new vf,p={magnitudeBandID:o,directionBandID:a,isUVComponents:n,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:n4e[e.style.toLowerCase().replace("-","_")],minimumMagnitude:h.minDataValue,maximumMagnitude:h.maxDataValue,minimumSymbolSize:h.minSize,maximumSymbolSize:h.maxSize};i.functionArguments=p;const f=wc(i);return t.convertToRFT?si.fromJSON({rasterFunctionDefinition:f}):i}function u4e(e,t){const i=t.convertToRFT;if(t.dataType!=="elevation"&&(t.dataType!=="generic"||t.bandCount!==1||t.pixelType!=="s16"&&t.pixelType!=="s32"&&t.pixelType!=="f32"&&t.pixelType!=="f64"))return new si;const r=new si;r.functionName="Hillshade";const s=e.hillshadeType==="traditional"?0:1,n=e.scalingType==="none"?1:3,o={HillshadeType:s,SlopeType:n,ZFactor:e.zFactor};return s===0&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),n===3&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),r.functionArguments=o,r.variableName="Raster",e.colorRamp&&(r.functionName="ShadedRelief",i?o.ColorRamp=Une(e.colorRamp):o.Colormap=x1(e.colorRamp)),i?new si({rasterFunctionDefinition:wc(r)}):r}function c4e(e,t){const i=t.convertToRFT,r=new si;r.functionName="Stretch";const s=Wb[t2.toJSON(e.stretchType)],n="u8",o=e.customStatistics?.map(l=>[l.min,l.max,l.avg??0,l.stddev??1]),a={StretchType:s,Statistics:o,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(a.Min=e.outputMin),e.outputMax!=null&&(a.Max=e.outputMax),s===Wb.standardDeviation?(a.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType=n):s===Wb.percentClip?(a.MinPercent=e.minPercent,a.MaxPercent=e.maxPercent,r.outputPixelType=n):s===Wb.minMax?r.outputPixelType=n:s===Wb.sigmoid&&(a.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=a,r.variableName="Raster",e.colorRamp){const l=e.colorRamp,u=new si;if(i)u.functionArguments={ColorRamp:Une(l)};else{const h=Dne(l,!0);if(h)u.functionArguments={colorRampName:h};else if(!t.convertColorRampToColormap||l.type!=="algorithmic"&&l.type!=="multipart"){const p=e.colorRamp.toJSON();p.type==="algorithmic"?p.algorithm=p.algorithm||"esriCIELabAlgorithm":p.type==="multipart"&&p.colorRamps?.length&&p.colorRamps.forEach(f=>f.algorithm=f.algorithm||"esriCIELabAlgorithm"),u.functionArguments={colorRamp:p}}else u.functionArguments={Colormap:x1(l)}}return u.variableName="Raster",u.functionName="Colormap",u.functionArguments.Raster=r,i?new si({rasterFunctionDefinition:wc(u)}):u}return i?new si({rasterFunctionDefinition:wc(r)}):r}function h4e(e,t){const i=[],r=[],s=[],n=[],{pixelType:a,rasterAttributeTable:l}=t,u=l==null?null:l.features,h=soe(l);if(h&&u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((w,S)=>{const T=w.symbol?.color;let x;T?.a&&w.minValue!=null&&w.maxValue!=null&&u.forEach(_=>{w.minValue!=null&&w.maxValue!=null&&(x=_.attributes[e.field],(x>=w.minValue&&x<w.maxValue||S===e.classBreakInfos.length-1&&x>=w.minValue)&&n.push([_.attributes[h],T.r,T.g,T.b]))})});const g=a?k3(n,a):n,b=new si;return b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=g,b.variableName="Raster",t.convertToRFT?new si({rasterFunctionDefinition:wc(b)}):b}e.classBreakInfos.forEach((g,b)=>{if(g.minValue==null||g.maxValue==null)return;const w=g.symbol&&g.symbol.color;w?.a?(b===0?i.push(g.minValue,g.maxValue+1e-4):i.push(g.minValue+1e-4,g.maxValue+1e-4),r.push(b),n.push([b,w.r,w.g,w.b])):s.push(g.minValue,g.maxValue)});const p=a?k3(n,a):n,f=new si;f.functionName="Remap",f.functionArguments={InputRanges:i,OutputValues:r,NoDataRanges:s},f.variableName="Raster";const m=new si;return m.functionName="Colormap",m.functionArguments={Colormap:p,Raster:f},t.convertToRFT?new si({rasterFunctionDefinition:wc(m)}):m}function k3(e,t){const i=s4e.has(t)?Eg(t):null;return i&&e.push([Math.floor(i[0]-1),0,0,0],[Math.ceil(i[1]+1),0,0,0]),e}function soe(e){if(e==null)return;const{fields:t}=e;return t?.find(r=>r?.name&&r.name.toLowerCase()==="value")?.name}function p4e(e,t){const i=[],{pixelType:r,rasterAttributeTable:s}=t,n=s==null?null:s.features,o=soe(s),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(n){if(o){const p=new Map;l.forEach(m=>{const g=m.value,b=Aq(m);g!=null&&b?.a&&p.set(String(g),b.toRgb())});const f=e.field;f&&n.forEach(({attributes:m})=>{const g=String(m[f]),b=m[o],w=p.get(g);w?i.push([b,...w]):a&&i.push([b,...a])})}}else for(let p=0;p<l.length;p++){const f=l[p],m=Aq(f),g=+f.value;if(m?.a){if(isNaN(g))return null;i.push([g,m.r,m.g,m.b])}}const u=r?k3(i,r):i,h=new si;return h.functionName="Colormap",h.functionArguments={},h.functionArguments.Colormap=u,h.variableName="Raster",t.convertToRFT?new si({rasterFunctionDefinition:wc(h)}):h}function Aq(e){return e.symbol?.type==="polygon-3d"?e.symbol.symbolLayers?.find(t=>t.type==="fill")?.material?.color:e.symbol?.color}function d4e(e,t){const i=e.extractColormap();if(!i||i.length===0)return null;const{pixelType:r}=t,s=r?k3(i,r):i,n=new si;return n.functionName="Colormap",n.functionArguments={},n.functionArguments.Colormap=s,t.convertToRFT?new si({rasterFunctionDefinition:wc(n)}):n}function f4e(e){const t=[],i=[];return e.forEach(r=>{t.push(r[0]),i.push(e5e([...r.slice(1),255]))}),{type:"RasterColormap",values:t,colors:i}}var Ek;const n2=ar()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),Mk=ar()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function m4e(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return Mk.fromJSON(t)}let es=Ek=class extends ae{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}readMethod(e,t){return m4e(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,i){e!=null&&(e=e.filter(({variableName:r,dimensionName:s})=>r&&r!=="*"||s)).length&&(t[i]=e.map(r=>r.toJSON()))}readOperation(e,t){const i=t.mosaicOperation,r=t.mosaicOperator?.toLowerCase(),s=i||(r?n2.toJSON(r):null);return n2.fromJSON(s)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new Ek({ascending:this.ascending,itemRasterFunction:K(this.itemRasterFunction),lockRasterIds:K(this.lockRasterIds),method:this.method,multidimensionalDefinition:K(this.multidimensionalDefinition),objectIds:K(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:K(this.viewpoint),where:this.where})}};c([d({type:Boolean,json:{write:!0}})],es.prototype,"ascending",void 0),c([ue("ascending",["ascending","sortAscending"])],es.prototype,"readAscending",null),c([d({type:si,json:{name:"itemRenderingRule",write:!0}})],es.prototype,"itemRasterFunction",void 0),c([d({type:[vt],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],es.prototype,"lockRasterIds",void 0),c([d({type:String,json:{type:Mk.jsonValues,write:{target:"mosaicMethod",writer:Mk.write}}})],es.prototype,"method",void 0),c([ue("method",["mosaicMethod","defaultMosaicMethod"])],es.prototype,"readMethod",null),c([d({type:[T1],json:{write:!0}})],es.prototype,"multidimensionalDefinition",void 0),c([ge("multidimensionalDefinition")],es.prototype,"writeMultidimensionalDefinition",null),c([d({type:[vt],json:{name:"fids",write:!0}})],es.prototype,"objectIds",void 0),c([d({json:{type:n2.jsonValues,read:{reader:n2.read},write:{target:"mosaicOperation",writer:n2.write}}})],es.prototype,"operation",void 0),c([ue("operation",["mosaicOperation","mosaicOperator"])],es.prototype,"readOperation",null),c([d({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],es.prototype,"sortField",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],es.prototype,"sortValue",void 0),c([Ht("sortValue")],es.prototype,"castSortValue",null),c([d({type:Ve,json:{write:!0}})],es.prototype,"viewpoint",void 0),c([d({type:String,json:{write:!0}})],es.prototype,"where",void 0),es=Ek=c([F("esri.layers.support.MosaicRule")],es);const aa=es;let _r=class extends ae{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(t,i,r){this.layer.version<10.3||(i[r]=t)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(t,i,r){this.format&&this.format.toLowerCase().includes("jpg")&&t!=null&&(i[r]=t)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(t,i,r){this.format==="lerc"&&t!=null&&(i[r]=t)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(t,i,r){this.format==="lerc"&&this.layer.version>=10.5&&(i[r]=t)}get version(){const t=this.layer;return t.commitProperty("bandIds"),t.commitProperty("format"),t.commitProperty("compressionQuality"),t.commitProperty("compressionTolerance"),t.commitProperty("interpolation"),t.commitProperty("noData"),t.commitProperty("noDataInterpretation"),t.commitProperty("mosaicRule"),t.commitProperty("rasterFunction"),t.commitProperty("adjustAspectRatio"),t.commitProperty("pixelFilter"),t.commitProperty("definitionExpression"),t.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(t){this._set("version",t)}get mosaicRule(){const t=this.layer;let i=t.mosaicRule;const r=t.definitionExpression;return i?r&&r!==i.where&&(i=i.clone(),i.where=r):r&&(i=new aa({where:r})),i}get rasterFunction(){const t=this.layer;let{rasterFunction:i}=t;const r=t.pixelFilter,s=!t.format||t.format.includes("jpg")||t.format.includes("png");i=this._addResampleRasterFunction(i);const n=t.multidimensionalSubset?.areaOfInterest;return n&&(i=y4e(i,n)),s&&!r&&t.renderer?.type!=="vector-field"&&(i=this.combineRendererWithRenderingRule(i)),i}combineRendererWithRenderingRule(t){const i=this.layer,{rasterInfo:r,renderer:s}=i;return t=t||i.rasterFunction,!s||!toe(s)?t:Tk(a4e(s,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandNames:r.bandInfos.map(({name:n})=>n),convertColorRampToColormap:i.version<10.6,convertToRFT:!!t?.rasterFunctionDefinition,bandCount:r.bandCount}),t)}_addResampleRasterFunction(t){if(this.layer.renderer?.type!=="vector-field"||t?.functionName==="Resample")return t;const i=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,r=this.layer.serviceRasterInfo.pixelSize;let s=new si({functionName:"Resample",functionArguments:{ResamplingType:i,InputCellSize:r}});return s=t?.rasterFunctionDefinition?new si({rasterFunctionDefinition:wc(s)}):s,Tk(s,t)}};function y4e(e,t){const i=new si({functionName:"Clip",functionArguments:{ClippingGeometry:t.toJSON(),ClippingType:1}});return Tk(i,e)}c([d()],_r.prototype,"layer",void 0),c([d({json:{write:!0}})],_r.prototype,"adjustAspectRatio",null),c([ge("adjustAspectRatio")],_r.prototype,"writeAdjustAspectRatio",null),c([d({json:{write:!0}})],_r.prototype,"bandIds",null),c([d({json:{write:!0}})],_r.prototype,"compression",void 0),c([d({json:{write:!0}})],_r.prototype,"compressionQuality",null),c([ge("compressionQuality")],_r.prototype,"writeCompressionQuality",null),c([d({json:{write:!0}})],_r.prototype,"compressionTolerance",null),c([ge("compressionTolerance")],_r.prototype,"writeCompressionTolerance",null),c([d({json:{write:!0}})],_r.prototype,"format",null),c([d({type:String,json:{read:{reader:Bd.read},write:{writer:Bd.write}}})],_r.prototype,"interpolation",null),c([d({json:{write:!0}})],_r.prototype,"noData",null),c([d({type:String,json:{read:{reader:s2.read},write:{writer:s2.write}}})],_r.prototype,"noDataInterpretation",null),c([d({json:{write:!0}})],_r.prototype,"pixelType",void 0),c([d({json:{write:!0}})],_r.prototype,"lercVersion",void 0),c([ge("lercVersion")],_r.prototype,"writeLercVersion",null),c([d({type:Number})],_r.prototype,"version",null),c([d({json:{write:!0}})],_r.prototype,"mosaicRule",null),c([d({json:{write:!0,name:"renderingRule"}})],_r.prototype,"rasterFunction",null),_r=c([F("esri.layers.support.ExportImageServiceParameters")],_r);async function D3(e,t,i){let r;try{r=await createImageBitmap(e)}catch(s){throw new W("request:server",`Unable to load ${t}`,{url:t,error:s})}return wi(i),r}async function F3(e,t,i,r,s){let n;try{n=await createImageBitmap(e)}catch(o){throw new W("request:server",`Unable to load tile ${t}/${i}/${r}`,{error:o,level:t,row:i,col:r})}return wi(s),n}var Ik;const g4e={base:Cc,key:"type",typeMap:{extent:bt,polygon:Rs}};let Um=Ik=class extends ae{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Map;e.forEach(r=>{if(!r.dimensionName)return;let s,n;if(Array.isArray(r.values[0])){const o=r.values;s=o[0][0],n=o[r.values.length-1][1]}else{const o=r.values;s=o[0],n=o[r.values.length-1]}if(t.has(r.dimensionName)){const o=t.get(r.dimensionName);o[0]=Math.min(s,o[0]),o[1]=Math.max(n,o[1])}else t.set(r.dimensionName,[s,n])});const i=[];for(const r of t)i.push({name:r[0],extent:r[1]});return i}get variables(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Set;return e.forEach(i=>{i.variableName&&t.add(i.variableName)}),[...t]}clone(){const e=this.subsetDefinitions?.map(i=>i.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new Ik({areaOfInterest:t,subsetDefinitions:e})}};c([d({types:g4e,json:{read:or,write:!0}})],Um.prototype,"areaOfInterest",void 0),c([d({readOnly:!0})],Um.prototype,"dimensions",null),c([d({readOnly:!0})],Um.prototype,"variables",null),c([d({type:[T1],json:{write:!0}})],Um.prototype,"subsetDefinitions",void 0),Um=Ik=c([F("esri.layers.support.MultidimensionalSubset")],Um);const v4e=Um;var Ak;function Wf(e){return e=Number(e),isNaN(e)?void 0:e}let Rl=Ak=class extends ae{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new Ak({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};c([d({json:{name:"BandName",write:!0}})],Rl.prototype,"name",void 0),c([d({json:{name:"WavelengthMin",read:{reader:Wf},write:!0}})],Rl.prototype,"minWavelength",void 0),c([d({json:{name:"WavelengthMax",read:{reader:Wf},write:!0}})],Rl.prototype,"maxWavelength",void 0),c([d({json:{name:"RadianceBias",read:{reader:Wf},write:!0}})],Rl.prototype,"radianceBias",void 0),c([d({json:{name:"RadianceGain",read:{reader:Wf},write:!0}})],Rl.prototype,"radianceGain",void 0),c([d({json:{name:"ReflectanceBias",read:{reader:Wf},write:!0}})],Rl.prototype,"reflectanceBias",void 0),c([d({json:{name:"ReflectanceGain",read:{reader:Wf},write:!0}})],Rl.prototype,"reflectanceGain",void 0),c([d({json:{name:"SolarIrradiance",read:{reader:Wf},write:!0}})],Rl.prototype,"solarIrradiance",void 0),Rl=Ak=c([F("esri.layers.support.RasterBandInfo")],Rl);const $q=Rl;var $k;function Jb(e){return e=Number(e),isNaN(e)?void 0:e}let Qo=$k=class extends ae{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(e){return new Date(e)}writeAcquisitionDate(e,t){t.AcquisitionDate=e.getTime()}clone(){return new $k({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};c([d({json:{name:"AcquisitionDate",write:!0}})],Qo.prototype,"acquisitionDate",void 0),c([ue("acquisitionDate")],Qo.prototype,"readAcquisitionDate",null),c([ge("acquisitionDate")],Qo.prototype,"writeAcquisitionDate",null),c([d({json:{name:"CloudCover",read:{reader:Jb},write:!0}})],Qo.prototype,"cloudCover",void 0),c([d({json:{name:"ProductName",write:!0}})],Qo.prototype,"productName",void 0),c([d({json:{name:"SensorName",write:!0}})],Qo.prototype,"sensorName",void 0),c([d({json:{name:"SensorAzimuth",read:{reader:Jb},write:!0}})],Qo.prototype,"sensorAzimuth",void 0),c([d({json:{name:"SensorElevation",read:{reader:Jb},write:!0}})],Qo.prototype,"sensorElevation",void 0),c([d({json:{name:"SunAzimuth",read:{reader:Jb},write:!0}})],Qo.prototype,"sunAzimuth",void 0),c([d({json:{name:"SunElevation",read:{reader:Jb},write:!0}})],Qo.prototype,"sunElevation",void 0),Qo=$k=c([F("esri.layers.support.RasterSensorInfo")],Qo);const b4e=Qo;var Ck;let ks=Ck=class extends ae{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new Ck({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:K(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:K(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:K(this.tileInfo),transposeInfo:K(this.transposeInfo),blockBoundary:K(this.blockBoundary)})}};c([d({type:Number,json:{write:!0}})],ks.prototype,"blockWidth",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"blockHeight",void 0),c([d({type:String,json:{write:!0}})],ks.prototype,"compression",void 0),c([d({type:Ve,json:{write:!0}})],ks.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"firstPyramidLevel",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"maximumPyramidLevel",void 0),c([d({json:{write:!0}})],ks.prototype,"pyramidResolutions",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"pyramidScalingFactor",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"pyramidBlockWidth",void 0),c([d({type:Number,json:{write:!0}})],ks.prototype,"pyramidBlockHeight",void 0),c([d({type:Boolean,json:{write:!0}})],ks.prototype,"isVirtualTileInfo",void 0),c([d({json:{write:!0}})],ks.prototype,"tileInfo",void 0),c([d()],ks.prototype,"transposeInfo",void 0),c([d()],ks.prototype,"blockBoundary",void 0),ks=Ck=c([F("esri.layers.support.RasterStorageInfo")],ks);const E9=ks;var Rk;let $i=Rk=class extends ae{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const e=this.keyProperties.BandProperties,{bandCount:t}=this;if(!e?.length||e.length<t){const r=[];for(let s=1;s<=t;s++)r.push(new $q({name:"band_"+s}));return r}const i=e.map(r=>$q.fromJSON(r));for(let r=0;r<i.length;r++)i[r].name=i[r].name||"band_"+(r+1);return i}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(this.transform==null||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return b4e.fromJSON(this.keyProperties)}clone(){return new Rk({attributeTable:K(this.attributeTable),bandCount:this.bandCount,colormap:K(this.colormap),extent:K(this.extent),format:this.format,height:this.height,width:this.width,histograms:K(this.histograms),keyProperties:K(this.keyProperties),multidimensionalInfo:K(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:K(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:K(this.spatialReference),statistics:K(this.statistics),storageInfo:K(this.storageInfo),transform:K(this.transform)})}};c([d({json:{write:!0}})],$i.prototype,"attributeTable",void 0),c([d({json:{write:!0}})],$i.prototype,"bandCount",void 0),c([d({readOnly:!0})],$i.prototype,"bandInfos",null),c([d({json:{write:!0}})],$i.prototype,"colormap",void 0),c([d({type:String,readOnly:!0})],$i.prototype,"dataType",null),c([d({type:bt,json:{write:!0}})],$i.prototype,"extent",void 0),c([d({type:bt,json:{write:!0}})],$i.prototype,"nativeExtent",null),c([d({json:{write:!0}})],$i.prototype,"nativePixelSize",null),c([d({json:{write:!0}})],$i.prototype,"format",void 0),c([d({json:{write:!0}})],$i.prototype,"height",void 0),c([d({json:{write:!0}})],$i.prototype,"width",void 0),c([d({json:{write:!0}})],$i.prototype,"hasMultidimensionalTranspose",null),c([d({json:{write:!0}})],$i.prototype,"histograms",void 0),c([d({json:{write:!0}})],$i.prototype,"keyProperties",void 0),c([d({json:{write:!0}})],$i.prototype,"multidimensionalInfo",void 0),c([d({json:{write:!0}})],$i.prototype,"noDataValue",void 0),c([d({json:{write:!0}})],$i.prototype,"pixelSize",void 0),c([d({json:{write:!0}})],$i.prototype,"pixelType",void 0),c([d()],$i.prototype,"isPseudoSpatialReference",void 0),c([d({readOnly:!0})],$i.prototype,"sensorInfo",null),c([d({type:ke,json:{write:!0}})],$i.prototype,"spatialReference",void 0),c([d({json:{write:!0}})],$i.prototype,"statistics",void 0),c([d({type:E9,json:{write:!0}})],$i.prototype,"storageInfo",void 0),c([d({json:{write:!0}})],$i.prototype,"transform",void 0),$i=Rk=c([F("esri.layers.support.RasterInfo")],$i);const yC=$i;let w4e=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await yse("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},i);return r?new At(r):null}computeStatisticsHistograms(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:t.pixelBlock.toJSON()},i)}async decode(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",t,i);return r?new At(r):null}async symbolize(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r={extent:t.extent?.toJSON(),pixelBlock:t.pixelBlock?.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},s=await this._workerThread.invoke("symbolize",r,i);return s?new At(s):null}async updateSymbolizer(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r=t?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:r},i))}async updateRasterFunction(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},i))}async process(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:t.extent?.toJSON(),primaryPixelSizes:t.primaryPixelSizes?.map(s=>s!=null?s.toJSON():null),primaryPixelBlocks:t.primaryPixelBlocks.map(s=>s!=null?s.toJSON():null),primaryRasterIds:t.primaryRasterIds},i);return r?new At(r):null}async stretch(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},s=await this._workerThread.invoke("stretch",r,i);return s?new At(s):null}async split(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel,useBilinear:t.useBilinear},s=await this._workerThread.invoke("split",r,i);return s&&s.forEach((n,o)=>{s.set(o,n?At.fromJSON(n):null)}),s}async clipTile(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={...t,pixelBlock:t.pixelBlock.toJSON()},s=await this._workerThread.invoke("clipTile",r,i);return s?At.fromJSON(s):null}async estimateStatisticsHistograms(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const r={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,i)}async mosaicAndTransform(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");if(!t?.srcPixelBlocks?.length)return{pixelBlock:null};const r={...t,srcPixelBlocks:t.srcPixelBlocks.map(n=>n!=null?n.toJSON():null)},s=await this._workerThread.invoke("mosaicAndTransform",r,i);return{pixelBlock:s.pixelBlock?new At(s.pixelBlock):null,localNorthDirections:s.localNorthDirections}}async createFlowMesh(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:s,simulationSettings:n}=t,o=await this._workerThread.invoke("createFlowMesh",{meshType:s,flowData:r,simulationSettings:n},{...i,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(t,i){if(!this._workerThread)throw new W("raster-jobhandler:no-connection","no available worker connection");const r=t.datumTransformation!=null?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,s=t.rasterTransform!=null?t.rasterTransform.toJSON():null,n={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:r,rasterTransform:s,isAdaptive:t.isAdaptive,includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",n,i)}};function noe(e,t,i){const r=t.shift();if(i.length===0){const n=[];i.push({sliceId:-1,multidimensionalDefinition:n})}const s=i.length;for(let n=0;n<s;n++){const o=i.shift().multidimensionalDefinition;r.values?.forEach(a=>{i.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:e,dimensionName:r.name,values:[a]}]})})}t.length&&noe(e,t,i)}function xft(e,t){const i=[];let r=0;return(t?e.variables.filter(s=>s.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((s,n)=>s.name>n.name?1:-1)).forEach(s=>{const n=[],o=[...s.dimensions].sort((a,l)=>a.name>l.name?-1:1);noe(s.name,o,n),n.forEach(a=>{i.push({...a,sliceId:r++})})}),i}function Tft(e,t,i){let r=e;if(t&&(t=[...t].sort((s,n)=>s.dimensionName<n.dimensionName?-1:1)).forEach(({dimensionName:s,values:n,isSlice:o})=>{n.length&&(r=r.filter(a=>{const l=a.multidimensionalDefinition.find(h=>h.dimensionName===s);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof n[0]=="number"?n.includes(u):n.some(h=>h[0]<=u&&h[1]>=u):typeof n[0]=="number"?n.some(h=>u[0]<=h&&u[1]>=h):o?n.some(h=>h[0]===u[0]&&h[0]===u[1]):n.some(h=>h[0]>=u[0]&&h[0]<=u[1]||h[1]>=u[0]&&h[1]<=u[1]||h[0]<u[0]&&h[1]>u[1])}))}),r.length&&i?.start!=null&&i.end!=null){const s=i.start.getTime(),n=i.end.getTime(),o=r[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(r=r.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return s<=l&&n>=l}))}return r.map(s=>s.sliceId)}function ooe(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function _4e(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function aoe(e){return e.length===1?[e[0],e[0]]:[e[0],e[e.length-1]]}function loe(e,t,i){if(!t?.subsetDefinitions?.length)return e;let r;if(i){const{variables:o}=t;if(o.length&&!o.includes(i))return null;const a=t.subsetDefinitions.find(l=>l.dimensionName===e.name&&l.variableName===i);if(!a?.values?.length)return e;r=aoe(a.values)}else r=t.dimensions.find(({name:a})=>a===e.name)?.extent;const s=r;if(!s?.length)return e;const n=e.values.filter(o=>ooe(o,s));return{...e,extent:[...s],values:n}}function uoe(e,t,i){if(!t?.subsetDefinitions?.length)return!1;const{variables:r}=t;if(r.length&&e.some(({variableName:s})=>s&&!r.includes(s)))return!0;for(let s=0;s<e.length;s++){const n=e[s],o=t.subsetDefinitions.find(a=>(n.variableName===""||a.variableName===n.variableName)&&a.dimensionName===n.dimensionName);if(o?.values.length){const a=aoe(o.values);if(!n.isSlice&&n.values.length===2&&!Array.isArray(n.values[0])&&n.values[0]!==n.values[1]&&i){if(!_4e(n.values,a))return!0}else if(n.values.some(l=>!ooe(l,a)))return!0}}return!1}function U4(e,t){if(e==null)return{isOutside:!1};const{geometry:i,timeExtent:r,multidimensionalDefinition:s}=t;let n=null;if(r!=null&&(n=S4e(e,r),n==null))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&i){const a=i.type==="point"?i:i.type==="extent"?i.center:i.type==="polygon"?i.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return s!=null&&s.length&&uoe(s,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:i,timeExtent:n,multidimensionalDefinition:s}}}function S4e(e,t){const i=e.dimensions.find(({name:o})=>o==="StdTime");if(i==null||t.start==null&&t.end==null)return t;t=t.clone();const{start:r,end:s}=t.toJSON(),n=r===s?[r]:r!=null&&s!=null?[r,s]:[r??s];return n.length===2&&i?.extent.length&&(n[0]=Math.max(n[0],i.extent[0]),n[1]=Math.min(n[1],i.extent[1]??i.extent[0]),n[1]<n[0])||uoe([new T1({variableName:"",dimensionName:"StdTime",isSlice:n.length===1,values:n})],e,!0)?null:(t.start=new Date(n[0]),t.end=new Date(n[1]??n[0]),t)}function x4e(e,t={}){const{multidimensionalInfo:i,keyProperties:r}=e;if(i==null)return null;const{variableName:s,multidimensionalSubset:n,multidimensionalDefinition:o}=t,a=o!=null?o[0]?.variableName:null,l=s||a||r?.DefaultVariable;let{variables:u}=i;return n?.variables?.length&&(u=u.filter(({name:h})=>n.variables.includes(h))),l?u.find(({name:h})=>h===l)??u[0]:u[0]}function T4e(e,t={}){const i=x4e(e,t);if(!i)return null;const r=[],{dimensions:s,name:n}=i;if(s.length===0)return[new T1({variableName:n,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<s.length;o++){const a=loe(s[o],t.multidimensionalSubset,n);if(!a)return null;const{values:l,extent:u}=a;let h=l?.[0]??u?.[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&u&&Math.abs(u[1])<=Math.abs(u[0])&&(h=l?.length?l[l.length-1]:u[1]),r.push(new T1({variableName:n,dimensionName:a.name,values:[h],isSlice:!t.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return r}function Eft(e){return!!e?.length&&e.some(t=>{if(t.values==null)return!0;const i=t.values.length;return i===0||i>1||!t.isSlice&&Array.isArray(t.values[0])})}function E4e(e,t){if(t==null||e==null)return null;let i=t.variables.map(r=>({...r}));return e?.variables?.length&&(i=i.filter(({name:r})=>e.variables.includes(r)),i.forEach(r=>{r.dimensions=r.dimensions.map(s=>loe(s,e,r.name)).filter(ko)})),i}function M4e(e,t){const{values:i}=t;if(i?.length){const a=Array.isArray(i[0]),l=Array.isArray(e);return a!==l?-1:a&&l?i.findIndex(u=>u[0]===e[0]&&u[1]===e[1]):i.indexOf(e)}const{extent:r}=t;if(Array.isArray(e)||!r||e<r[0]||e>r[1])return-1;const s=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-r[0])/s);const n=r[0];let o=-1;switch(t.intervalUnit?.toLowerCase()||"days"){case"seconds":o=Math.round((e-n)/1e3/s);break;case"minutes":o=Math.round((e-n)/6e4/s);break;case"hours":o=Math.round((e-n)/36e5/s);break;case"days":o=Math.round((e-n)/864e5/s);break;case"months":{const a=new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear(),l=new Date(n).getUTCMonth(),u=new Date(e).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear())/s);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear())/10/s)}return o}function Cq(e){let t=e.values?.length;if(t)return t;const{extent:i,unit:r}=e,s=e.interval||1,n=i?i[1]-i[0]:0;if(r!=="ISO8601")return Math.round(n/s);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(n/1e3/s);break;case"minutes":t=Math.round(n/6e4/s);break;case"hours":t=Math.round(n/36e5/s);break;case"days":t=Math.round(n/864e5/s);break;case"months":if(i){const o=new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear(),a=new Date(i[0]).getUTCMonth(),l=new Date(i[1]).getUTCMonth();t=o===0?l-a+1:l+11-a+12*(o-1)+1}else t=0;break;case"years":t=i?Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/s):0;break;case"decades":t=i?Math.round((new Date(i[1]).getUTCFullYear()-new Date(i[0]).getUTCFullYear())/10/s):0;break;default:t=0}return t}function Mft(e,t){let i=0;const r=e[0].variableName,s=[...t.variables].sort((n,o)=>n.name>o.name?1:-1);for(let n=0;n<s.length;n++){const o=s[n],a=[...o.dimensions].sort((h,p)=>h.name>p.name?-1:1);if(o.name!==r){i+=a.map(h=>Cq(h)).reduce((h,p)=>h*p);continue}const l=a.map(h=>Cq(h)),u=a.length;for(let h=0;h<u;h++){const p=e.find(m=>m.dimensionName===a[h].name);if(p==null)return null;const f=M4e(p.values[0],a[h]);if(f===-1)return null;l.shift(),i+=h===u-1?f:f*l.reduce((m,g)=>m*g)}break}return i}var Ift=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function coe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rq,Oq={exports:{}};function I4e(){return Rq||(Rq=1,t=Oq,e=function(){function r(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return r.prototype={ensureBuffer:function(s){var n=this.buffer,o=n?n.byteLength:0;if(s<o)return n;for(var a=512;a<s;)a<<=1;for(var l=new Uint8Array(a),u=0;u<o;++u)l[u]=n[u];return this.buffer=l},getByte:function(){for(var s=this.pos;this.bufferLength<=s;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(s){var n=this.pos;if(s){this.ensureBuffer(n+s);for(var o=n+s;!this.eof&&this.bufferLength<o;)this.readBlock();var a=this.bufferLength;o>a&&(o=a)}else{for(;!this.eof;)this.readBlock();o=this.bufferLength}return this.pos=o,this.buffer.subarray(n,o)},lookChar:function(){for(var s=this.pos;this.bufferLength<=s;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var s=this.pos;this.bufferLength<=s;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(s,n,o){for(var a=s+n;this.bufferLength<=a&&!this.eof;)this.readBlock();return new Stream(this.buffer,s,n,o)},skip:function(s){s||(s=1),this.pos+=s},reset:function(){this.pos=0}},r}(),(i=function(){if(!self||!self.Uint32Array)return null;var r=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],a=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function l(h){throw new Error(h)}function u(h){var p=0,f=h[p++],m=h[p++];f!=-1&&m!=-1||l("Invalid header in flate stream"),(15&f)!=8&&l("Unknown compression method in flate stream"),((f<<8)+m)%31!=0&&l("Bad FCHECK in flate stream"),32&m&&l("FDICT bit set in flate stream"),this.bytes=h,this.bytesPos=p,this.codeSize=0,this.codeBuf=0,e.call(this)}return u.prototype=Object.create(e.prototype),u.prototype.getBits=function(h){for(var p,f=this.codeSize,m=this.codeBuf,g=this.bytes,b=this.bytesPos;f<h;)(p=g[b++])===void 0&&l("Bad encoding in flate stream"),m|=p<<f,f+=8;return p=m&(1<<h)-1,this.codeBuf=m>>h,this.codeSize=f-=h,this.bytesPos=b,p},u.prototype.getCode=function(h){for(var p=h[0],f=h[1],m=this.codeSize,g=this.codeBuf,b=this.bytes,w=this.bytesPos;m<f;){var S;(S=b[w++])===void 0&&l("Bad encoding in flate stream"),g|=S<<m,m+=8}var T=p[g&(1<<f)-1],x=T>>16,_=65535&T;return(m==0||m<x||x==0)&&l("Bad encoding in flate stream"),this.codeBuf=g>>x,this.codeSize=m-x,this.bytesPos=w,_},u.prototype.generateHuffmanTable=function(h){for(var p=h.length,f=0,m=0;m<p;++m)h[m]>f&&(f=h[m]);for(var g=1<<f,b=new Uint32Array(g),w=1,S=0,T=2;w<=f;++w,S<<=1,T<<=1)for(var x=0;x<p;++x)if(h[x]==w){var _=0,M=S;for(m=0;m<w;++m)_=_<<1|1&M,M>>=1;for(m=_;m<g;m+=T)b[m]=w<<16|x;++S}return[b,f]},u.prototype.readBlock=function(){function h(ye,Pe,Ie,we,De){for(var Ze=ye.getBits(Ie)+we;Ze-- >0;)Pe[T++]=De}var p=this.getBits(3);if(1&p&&(this.eof=!0),(p>>=1)!=0){var f,m;if(p==1)f=o,m=a;else if(p==2){for(var g=this.getBits(5)+257,b=this.getBits(5)+1,w=this.getBits(4)+4,S=Array(r.length),T=0;T<w;)S[r[T++]]=this.getBits(3);for(var x=this.generateHuffmanTable(S),_=0,M=(T=0,g+b),I=new Array(M);T<M;){var A=this.getCode(x);A==16?h(this,I,2,3,_):A==17?h(this,I,3,3,_=0):A==18?h(this,I,7,11,_=0):I[T++]=_=A}f=this.generateHuffmanTable(I.slice(0,g)),m=this.generateHuffmanTable(I.slice(g,M))}else l("Unknown block type in flate stream");for(var C=(Q=this.buffer)?Q.length:0,R=this.bufferLength;;){var O=this.getCode(f);if(O<256)R+1>=C&&(C=(Q=this.ensureBuffer(R+1)).length),Q[R++]=O;else{if(O==256)return void(this.bufferLength=R);var k=(O=s[O-=257])>>16;k>0&&(k=this.getBits(k)),_=(65535&O)+k,O=this.getCode(m),(k=(O=n[O])>>16)>0&&(k=this.getBits(k));var L=(65535&O)+k;R+_>=C&&(C=(Q=this.ensureBuffer(R+_)).length);for(var V=0;V<_;++V,++R)Q[R]=Q[R-L]}}}else{var J,y=this.bytes,E=this.bytesPos;(J=y[E++])===void 0&&l("Bad block header in flate stream");var $=J;(J=y[E++])===void 0&&l("Bad block header in flate stream"),$|=J<<8,(J=y[E++])===void 0&&l("Bad block header in flate stream");var P=J;(J=y[E++])===void 0&&l("Bad block header in flate stream"),(P|=J<<8)!=(65535&~$)&&l("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var G=this.bufferLength,Q=this.ensureBuffer(G+$),se=G+$;this.bufferLength=se;for(var ie=G;ie<se;++ie){if((J=y[E++])===void 0){this.eof=!0;break}Q[ie]=J}this.bytesPos=E}},u}())!==void 0&&(t.exports=i)),Oq.exports;var e,t,i}const bx=coe(I4e());let A4e=class hoe{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,i,r){if(!t||t.byteLength<10)throw new W("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:s=0,height:n=0,format:o}=i;const{applyJpegMask:a}=i;if(a&&(!s||!n))throw new W("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let h=null;o==="jpg"&&a&&(h=hoe._getMask(t,{width:s,height:n}));const p=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(p),m=new Image;let g;m.src=f,m.onload=()=>{if(URL.revokeObjectURL(f),ya(r))return void u(Oi());s=m.width,n=m.height,this._canvas&&this._ctx?(this._canvas.width===s&&this._canvas.height===n||(this._canvas.width=s,this._canvas.height=n),this._ctx.clearRect(0,0,s,n)):(this._canvas=document.createElement("canvas"),this._canvas.width=s,this._canvas.height=n,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(m,0,0);const b=this._ctx.getImageData(0,0,s,n);let w;if(g=b.data,i.renderOnCanvas){if(h)for(w=0;w<h.length;w++)h[w]?g[4*w+3]=255:g[4*w+3]=0;return this._ctx.putImageData(b,0,0),void l(null)}const S=s*n,T=new Uint8Array(S),x=new Uint8Array(S),_=new Uint8Array(S);if(h)for(w=0;w<S;w++)T[w]=g[4*w],x[w]=g[4*w+1],_[w]=g[4*w+2];else for(h=new Uint8Array(S),w=0;w<S;w++)T[w]=g[4*w],x[w]=g[4*w+1],_[w]=g[4*w+2],h[w]=g[4*w+3];l({width:s,height:n,pixels:[T,x,_],mask:h,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(f),u("cannot load image")}})}static _getMask(t,i){let r=null;try{const s=new Uint8Array(t),n=Math.ceil(s.length/2);let o=0;const a=s.length-2;for(o=n;o<a&&(s[o]!==255||s[o+1]!==217);o++);if(o+=2,o<s.length-1){const l=new bx(s.subarray(o)).getBytes();r=new Uint8Array(i.width*i.height);let u=0;for(let h=0;h<l.length;h++)for(let p=7;p>=0;p--)r[u++]=l[h]>>p&1}}catch{}return r}};var Pq,Lq={exports:{}};function $4e(){return Pq||(Pq=1,e=Lq,t=function(){var r=function(){function s(n){this.message="JPEG error: "+n}return s.prototype=new Error,s.prototype.name="JpegError",s.constructor=s,s}();return function(){if(!self||!self.Uint8ClampedArray)return null;var s=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,o=799,a=3406,l=2276,u=1567,h=3784,p=5793,f=2896;function m(){this.decodeTransform=null,this.colorTransform=-1}function g(_,M){for(var I,A,C=0,R=[],O=16;O>0&&!_[O-1];)O--;R.push({children:[],index:0});var k,L=R[0];for(I=0;I<O;I++){for(A=0;A<_[I];A++){for((L=R.pop()).children[L.index]=M[C];L.index>0;)L=R.pop();for(L.index++,R.push(L);R.length<=I;)R.push(k={children:[],index:0}),L.children[L.index]=k.children,L=k;C++}I+1<O&&(R.push(k={children:[],index:0}),L.children[L.index]=k.children,L=k)}return R[0].children}function b(_,M,I){return 64*((_.blocksPerLine+1)*M+I)}function w(_,M,I,A,C,R,O,k,L){var V=I.mcusPerLine,J=I.progressive,y=M,E=0,$=0;function P(){if($>0)return $--,E>>$&1;if((E=_[M++])===255){var Z=_[M++];if(Z)throw new r("unexpected marker "+(E<<8|Z).toString(16))}return $=7,E>>>7}function G(Z){for(var te=Z;;){if(typeof(te=te[P()])=="number")return te;if(typeof te!="object")throw new r("invalid huffman sequence")}}function Q(Z){for(var te=0;Z>0;)te=te<<1|P(),Z--;return te}function se(Z){if(Z===1)return P()===1?1:-1;var te=Q(Z);return te>=1<<Z-1?te:te+(-1<<Z)+1}function ie(Z,te){var Ee=G(Z.huffmanTableDC),Fe=Ee===0?0:se(Ee);Z.blockData[te]=Z.pred+=Fe;for(var Tt=1;Tt<64;){var Wt=G(Z.huffmanTableAC),Gt=15&Wt,Qt=Wt>>4;if(Gt!==0){var be=s[Tt+=Qt];Z.blockData[te+be]=se(Gt),Tt++}else{if(Qt<15)break;Tt+=16}}}function ye(Z,te){var Ee=G(Z.huffmanTableDC),Fe=Ee===0?0:se(Ee)<<L;Z.blockData[te]=Z.pred+=Fe}function Pe(Z,te){Z.blockData[te]|=P()<<L}var Ie=0;function we(Z,te){if(Ie>0)Ie--;else for(var Ee=R,Fe=O;Ee<=Fe;){var Tt=G(Z.huffmanTableAC),Wt=15&Tt,Gt=Tt>>4;if(Wt!==0){var Qt=s[Ee+=Gt];Z.blockData[te+Qt]=se(Wt)*(1<<L),Ee++}else{if(Gt<15){Ie=Q(Gt)+(1<<Gt)-1;break}Ee+=16}}}var De,Ze=0;function et(Z,te){for(var Ee,Fe,Tt=R,Wt=O,Gt=0;Tt<=Wt;){var Qt=s[Tt];switch(Ze){case 0:if(Gt=(Fe=G(Z.huffmanTableAC))>>4,(Ee=15&Fe)==0)Gt<15?(Ie=Q(Gt)+(1<<Gt),Ze=4):(Gt=16,Ze=1);else{if(Ee!==1)throw new r("invalid ACn encoding");De=se(Ee),Ze=Gt?2:3}continue;case 1:case 2:Z.blockData[te+Qt]?Z.blockData[te+Qt]+=P()<<L:--Gt==0&&(Ze=Ze===2?3:0);break;case 3:Z.blockData[te+Qt]?Z.blockData[te+Qt]+=P()<<L:(Z.blockData[te+Qt]=De<<L,Ze=0);break;case 4:Z.blockData[te+Qt]&&(Z.blockData[te+Qt]+=P()<<L)}Tt++}Ze===4&&--Ie==0&&(Ze=0)}function nt(Z,te,Ee,Fe,Tt){var Wt=Ee%V;te(Z,b(Z,(Ee/V|0)*Z.v+Fe,Wt*Z.h+Tt))}function $t(Z,te,Ee){te(Z,b(Z,Ee/Z.blocksPerLine|0,Ee%Z.blocksPerLine))}var zt,Y,B,re,fe,ve,D=A.length;ve=J?R===0?k===0?ye:Pe:k===0?we:et:ie;var q,N,U,H,ne=0;for(N=D===1?A[0].blocksPerLine*A[0].blocksPerColumn:V*I.mcusPerColumn;ne<N;){var me=C?Math.min(N-ne,C):N;for(Y=0;Y<D;Y++)A[Y].pred=0;if(Ie=0,D===1)for(zt=A[0],fe=0;fe<me;fe++)$t(zt,ve,ne),ne++;else for(fe=0;fe<me;fe++){for(Y=0;Y<D;Y++)for(U=(zt=A[Y]).h,H=zt.v,B=0;B<H;B++)for(re=0;re<U;re++)nt(zt,ve,ne,B,re);ne++}$=0,(q=x(_,M))&&q.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+q.invalid),M=q.offset);var pe=q&&q.marker;if(!pe||pe<=65280)throw new r("marker was not found");if(!(pe>=65488&&pe<=65495))break;M+=2}return(q=x(_,M))&&q.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+q.invalid),M=q.offset),M-y}function S(_,M,I){var A,C,R,O,k,L,V,J,y,E,$,P,G,Q,se,ie,ye,Pe=_.quantizationTable,Ie=_.blockData;if(!Pe)throw new r("missing required Quantization Table.");for(var we=0;we<64;we+=8)y=Ie[M+we],E=Ie[M+we+1],$=Ie[M+we+2],P=Ie[M+we+3],G=Ie[M+we+4],Q=Ie[M+we+5],se=Ie[M+we+6],ie=Ie[M+we+7],y*=Pe[we],E|$|P|G|Q|se|ie?(E*=Pe[we+1],$*=Pe[we+2],P*=Pe[we+3],G*=Pe[we+4],Q*=Pe[we+5],se*=Pe[we+6],ie*=Pe[we+7],C=(A=(A=p*y+128>>8)+(C=p*G+128>>8)+1>>1)-C,ye=(R=$)*h+(O=se)*u+128>>8,R=R*u-O*h+128>>8,V=(k=(k=f*(E-ie)+128>>8)+(V=Q<<4)+1>>1)-V,L=(J=(J=f*(E+ie)+128>>8)+(L=P<<4)+1>>1)-L,O=(A=A+(O=ye)+1>>1)-O,R=(C=C+R+1>>1)-R,ye=k*l+J*a+2048>>12,k=k*a-J*l+2048>>12,J=ye,ye=L*o+V*n+2048>>12,L=L*n-V*o+2048>>12,V=ye,I[we]=A+J,I[we+7]=A-J,I[we+1]=C+V,I[we+6]=C-V,I[we+2]=R+L,I[we+5]=R-L,I[we+3]=O+k,I[we+4]=O-k):(ye=p*y+512>>10,I[we]=ye,I[we+1]=ye,I[we+2]=ye,I[we+3]=ye,I[we+4]=ye,I[we+5]=ye,I[we+6]=ye,I[we+7]=ye);for(var De=0;De<8;++De)y=I[De],(E=I[De+8])|($=I[De+16])|(P=I[De+24])|(G=I[De+32])|(Q=I[De+40])|(se=I[De+48])|(ie=I[De+56])?(C=(A=4112+((A=p*y+2048>>12)+(C=p*G+2048>>12)+1>>1))-C,ye=(R=$)*h+(O=se)*u+2048>>12,R=R*u-O*h+2048>>12,O=ye,V=(k=(k=f*(E-ie)+2048>>12)+(V=Q)+1>>1)-V,L=(J=(J=f*(E+ie)+2048>>12)+(L=P)+1>>1)-L,ye=k*l+J*a+2048>>12,k=k*a-J*l+2048>>12,J=ye,ye=L*o+V*n+2048>>12,L=L*n-V*o+2048>>12,y=(y=(A=A+O+1>>1)+J)<16?0:y>=4080?255:y>>4,E=(E=(C=C+R+1>>1)+(V=ye))<16?0:E>=4080?255:E>>4,$=($=(R=C-R)+L)<16?0:$>=4080?255:$>>4,P=(P=(O=A-O)+k)<16?0:P>=4080?255:P>>4,G=(G=O-k)<16?0:G>=4080?255:G>>4,Q=(Q=R-L)<16?0:Q>=4080?255:Q>>4,se=(se=C-V)<16?0:se>=4080?255:se>>4,ie=(ie=A-J)<16?0:ie>=4080?255:ie>>4,Ie[M+De]=y,Ie[M+De+8]=E,Ie[M+De+16]=$,Ie[M+De+24]=P,Ie[M+De+32]=G,Ie[M+De+40]=Q,Ie[M+De+48]=se,Ie[M+De+56]=ie):(ye=(ye=p*y+8192>>14)<-2040?0:ye>=2024?255:ye+2056>>4,Ie[M+De]=ye,Ie[M+De+8]=ye,Ie[M+De+16]=ye,Ie[M+De+24]=ye,Ie[M+De+32]=ye,Ie[M+De+40]=ye,Ie[M+De+48]=ye,Ie[M+De+56]=ye)}function T(_,M){for(var I=M.blocksPerLine,A=M.blocksPerColumn,C=new Int16Array(64),R=0;R<A;R++)for(var O=0;O<I;O++)S(M,b(M,R,O),C);return M.blockData}function x(_,M,I){function A(L){return _[L]<<8|_[L+1]}var C=_.length-1,R=I<M?I:M;if(M>=C)return null;var O=A(M);if(O>=65472&&O<=65534)return{invalid:null,marker:O,offset:M};for(var k=A(R);!(k>=65472&&k<=65534);){if(++R>=C)return null;k=A(R)}return{invalid:O.toString(16),marker:k,offset:R}}return m.prototype={parse:function(_){function M(){var Z=_[O]<<8|_[O+1];return O+=2,Z}function I(){var Z=M(),te=O+Z-2,Ee=x(_,te,O);Ee&&Ee.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+Ee.invalid),te=Ee.offset);var Fe=_.subarray(O,te);return O+=Fe.length,Fe}function A(Z){for(var te=Math.ceil(Z.samplesPerLine/8/Z.maxH),Ee=Math.ceil(Z.scanLines/8/Z.maxV),Fe=0;Fe<Z.components.length;Fe++){fe=Z.components[Fe];var Tt=Math.ceil(Math.ceil(Z.samplesPerLine/8)*fe.h/Z.maxH),Wt=Math.ceil(Math.ceil(Z.scanLines/8)*fe.v/Z.maxV),Gt=te*fe.h,Qt=Ee*fe.v*64*(Gt+1);fe.blockData=new Int16Array(Qt),fe.blocksPerLine=Tt,fe.blocksPerColumn=Wt}Z.mcusPerLine=te,Z.mcusPerColumn=Ee}var C,R,O=0,k=null,L=null,V=[],J=[],y=[],E=M();if(E!==65496)throw new r("SOI not found");for(E=M();E!==65497;){var $,P,G;switch(E){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Q=I();E===65504&&Q[0]===74&&Q[1]===70&&Q[2]===73&&Q[3]===70&&Q[4]===0&&(k={version:{major:Q[5],minor:Q[6]},densityUnits:Q[7],xDensity:Q[8]<<8|Q[9],yDensity:Q[10]<<8|Q[11],thumbWidth:Q[12],thumbHeight:Q[13],thumbData:Q.subarray(14,14+3*Q[12]*Q[13])}),E===65518&&Q[0]===65&&Q[1]===100&&Q[2]===111&&Q[3]===98&&Q[4]===101&&(L={version:Q[5]<<8|Q[6],flags0:Q[7]<<8|Q[8],flags1:Q[9]<<8|Q[10],transformCode:Q[11]});break;case 65499:for(var se=M()+O-2;O<se;){var ie=_[O++],ye=new Uint16Array(64);if(ie>>4){if(ie>>4!=1)throw new r("DQT - invalid table spec");for(P=0;P<64;P++)ye[s[P]]=M()}else for(P=0;P<64;P++)ye[s[P]]=_[O++];V[15&ie]=ye}break;case 65472:case 65473:case 65474:if(C)throw new r("Only single frame JPEGs supported");M(),(C={}).extended=E===65473,C.progressive=E===65474,C.precision=_[O++],C.scanLines=M(),C.samplesPerLine=M(),C.components=[],C.componentIds={};var Pe,Ie=_[O++],we=0,De=0;for($=0;$<Ie;$++){Pe=_[O];var Ze=_[O+1]>>4,et=15&_[O+1];we<Ze&&(we=Ze),De<et&&(De=et);var nt=_[O+2];G=C.components.push({h:Ze,v:et,quantizationId:nt,quantizationTable:null}),C.componentIds[Pe]=G-1,O+=3}C.maxH=we,C.maxV=De,A(C);break;case 65476:var $t=M();for($=2;$<$t;){var zt=_[O++],Y=new Uint8Array(16),B=0;for(P=0;P<16;P++,O++)B+=Y[P]=_[O];var re=new Uint8Array(B);for(P=0;P<B;P++,O++)re[P]=_[O];$+=17+B,(zt>>4?J:y)[15&zt]=g(Y,re)}break;case 65501:M(),R=M();break;case 65498:M();var fe,ve=_[O++],D=[];for($=0;$<ve;$++){var q=C.componentIds[_[O++]];fe=C.components[q];var N=_[O++];fe.huffmanTableDC=y[N>>4],fe.huffmanTableAC=J[15&N],D.push(fe)}var U=_[O++],H=_[O++],ne=_[O++],me=w(_,O,C,D,R,U,H,ne>>4,15&ne);O+=me;break;case 65535:_[O]!==255&&O--;break;default:if(_[O-3]===255&&_[O-2]>=192&&_[O-2]<=254){O-=3;break}throw new r("unknown marker "+E.toString(16))}E=M()}for(this.width=C.samplesPerLine,this.height=C.scanLines,this.jfif=k,this.eof=O,this.adobe=L,this.components=[],$=0;$<C.components.length;$++){var pe=V[(fe=C.components[$]).quantizationId];pe&&(fe.quantizationTable=pe),this.components.push({output:T(C,fe),scaleX:fe.h/C.maxH,scaleY:fe.v/C.maxV,blocksPerLine:fe.blocksPerLine,blocksPerColumn:fe.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(_,M){var I,A,C,R,O,k,L,V,J,y,E,$=this.width/_,P=this.height/M,G=0,Q=this.components.length,se=_*M*Q,ie=new Uint8ClampedArray(se),ye=new Uint32Array(_),Pe=4294967288;for(L=0;L<Q;L++){for(A=(I=this.components[L]).scaleX*$,C=I.scaleY*P,G=L,E=I.output,R=I.blocksPerLine+1<<3,O=0;O<_;O++)V=0|O*A,ye[O]=(V&Pe)<<3|7&V;for(k=0;k<M;k++)for(y=R*((V=0|k*C)&Pe)|(7&V)<<3,O=0;O<_;O++)ie[G]=E[y+ye[O]],G+=Q}var Ie=this.decodeTransform;if(Ie)for(L=0;L<se;)for(V=0,J=0;V<Q;V++,L++,J+=2)ie[L]=(ie[L]*Ie[J]>>8)+Ie[J+1];return ie},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(_){for(var M,I,A,C=0,R=_.length;C<R;C+=3)M=_[C],I=_[C+1],A=_[C+2],_[C]=M-179.456+1.402*A,_[C+1]=M+135.459-.344*I-.714*A,_[C+2]=M-226.816+1.772*I;return _},_convertYcckToRgb:function(_){for(var M,I,A,C,R=0,O=0,k=_.length;O<k;O+=4)M=_[O],I=_[O+1],A=_[O+2],C=_[O+3],_[R++]=I*(-660635669420364e-19*I+.000437130475926232*A-54080610064599e-18*M+.00048449797120281*C-.154362151871126)-122.67195406894+A*(-.000957964378445773*A+.000817076911346625*M-.00477271405408747*C+1.53380253221734)+M*(.000961250184130688*M-.00266257332283933*C+.48357088451265)+C*(-.000336197177618394*C+.484791561490776),_[R++]=107.268039397724+I*(219927104525741e-19*I-.000640992018297945*A+.000659397001245577*M+.000426105652938837*C-.176491792462875)+A*(-.000778269941513683*A+.00130872261408275*M+.000770482631801132*C-.151051492775562)+M*(.00126935368114843*M-.00265090189010898*C+.25802910206845)+C*(-.000318913117588328*C-.213742400323665),_[R++]=I*(-.000570115196973677*I-263409051004589e-19*A+.0020741088115012*M-.00288260236853442*C+.814272968359295)-20.810012546947+A*(-153496057440975e-19*A-.000132689043961446*M+.000560833691242812*C-.195152027534049)+M*(.00174418132927582*M-.00255243321439347*C+.116935020465145)+C*(-.000343531996510555*C+.24165260232407);return _},_convertYcckToCmyk:function(_){for(var M,I,A,C=0,R=_.length;C<R;C+=4)M=_[C],I=_[C+1],A=_[C+2],_[C]=434.456-M-1.402*A,_[C+1]=119.541-M+.344*I+.714*A,_[C+2]=481.816-M-1.772*I;return _},_convertCmykToRgb:function(_){for(var M,I,A,C,R=0,O=1/255,k=0,L=_.length;k<L;k+=4)M=_[k]*O,I=_[k+1]*O,A=_[k+2]*O,C=_[k+3]*O,_[R++]=255+M*(-4.387332384609988*M+54.48615194189176*I+18.82290502165302*A+212.25662451639585*C-285.2331026137004)+I*(1.7149763477362134*I-5.6096736904047315*A-17.873870861415444*C-5.497006427196366)+A*(-2.5217340131683033*A-21.248923337353073*C+17.5119270841813)-C*(21.86122147463605*C+189.48180835922747),_[R++]=255+M*(8.841041422036149*M+60.118027045597366*I+6.871425592049007*A+31.159100130055922*C-79.2970844816548)+I*(-15.310361306967817*I+17.575251261109482*A+131.35250912493976*C-190.9453302588951)+A*(4.444339102852739*A+9.8632861493405*C-24.86741582555878)-C*(20.737325471181034*C+187.80453709719578),_[R++]=255+M*(.8842522430003296*M+8.078677503112928*I+30.89978309703729*A-.23883238689178934*C-14.183576799673286)+I*(10.49593273432072*I+63.02378494754052*A+50.606957656360734*C-112.23884253719248)+A*(.03296041114873217*A+115.60384449646641*C-193.58209356861505)-C*(22.33816807309886*C+180.12613974708367);return _},getData:function(_,M,I){if(this.numComponents>4)throw new r("Unsupported color mode");var A=this._getLinearizedBlockData(_,M);if(this.numComponents===1&&I){for(var C=A.length,R=new Uint8ClampedArray(3*C),O=0,k=0;k<C;k++){var L=A[k];R[O++]=L,R[O++]=L,R[O++]=L}return R}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(A);if(this.numComponents===4){if(this._isColorConversionNeeded())return I?this._convertYcckToRgb(A):this._convertYcckToCmyk(A);if(I)return this._convertCmykToRgb(A)}return A}},m}()},(i=t())!==void 0&&(e.exports=i)),Lq.exports;var e,t,i}const poe=coe($4e());let C4e=class{static decode(t,i=!1){const r=new Uint8Array(t),s=new poe;s.parse(r);const{width:n,height:o,numComponents:a,eof:l}=s,u=s.getData(n,o,!0),h=n*o;let p,f=null,m=0,g=0,b=0;if(!i&&l<r.length-1)try{const w=new bx(r.subarray(l)).getBytes();f=new Uint8Array(h);let S=0;for(m=0;m<w.length;m++)for(b=7;b>=0;b--)f[S++]=w[m]>>b&1}catch{}if(a===1&&u.length===n*o){const w=new Uint8Array(u.buffer);p=[w,w,w]}else{for(p=[],m=0;m<3;m++)p.push(new Uint8Array(h));for(b=0,g=0;g<h;g++)for(m=0;m<3;m++)p[m][g]=u[b++]}return{width:n,height:o,pixels:p,mask:f}}};const doe=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let V4=null;function foe(){return V4||(V4=ce(()=>import("./lerc-wasm-3vP2r1Bm.js"),__vite__mapDeps([145,1]),import.meta.url).then(e=>e.l).then(({default:e})=>e({locateFile:t=>ii(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{O4e(e)}),V4)}const j3={getBlobInfo:null,decode:null};function R4e(e){return 16+(e>>3<<3)}function Ip(e,t,i){i.set(e.slice(t,t+i.length))}function O4e(e){const{_malloc:t,_free:i,_lerc_getBlobInfo:r,_lerc_getDataRanges:s,_lerc_decode_4D:n,asm:o}=e;let a;const l=Object.values(o).find(h=>h&&"buffer"in h&&h.buffer===e.HEAPU8.buffer),u=h=>{const p=h.map(b=>R4e(b)),f=p.reduce((b,w)=>b+w),m=t(f);a=new Uint8Array(l.buffer);let g=p[0];p[0]=m;for(let b=1;b<p.length;b++){const w=p[b];p[b]=p[b-1]+g,g=w}return p};j3.getBlobInfo=h=>{const m=new Uint8Array(48),g=new Uint8Array(8*3),[b,w,S]=u([h.length,m.length,g.length]);a.set(h,b),a.set(m,w),a.set(g,S);let T=r(b,h.length,w,S,12,3);if(T)throw i(b),new Error(`lerc-getBlobInfo: error code is ${T}`);a=new Uint8Array(l.buffer),Ip(a,w,m),Ip(a,S,g);const x=new Uint32Array(m.buffer),_=new Float64Array(g.buffer),[M,I,,A,C,R,O,k,L,V,J]=x,y={version:M,depthCount:V,width:A,height:C,validPixelCount:O,bandCount:R,blobSize:k,maskCount:L,dataType:I,minValue:_[0],maxValue:_[1],maxZerror:_[2],statistics:[],bandCountWithNoData:J};if(J&&V>1)return i(b),y;if(V===1&&R===1)return i(b),y.statistics.push({minValue:_[0],maxValue:_[1]}),y;const E=V*R*8,$=new Uint8Array(E),P=new Uint8Array(E);let G=b,Q=0,se=0,ie=!1;if(a.byteLength<b+2*E?(i(b),ie=!0,[G,Q,se]=u([h.length,E,E]),a.set(h,G)):[Q,se]=u([E,E]),a.set($,Q),a.set(P,se),T=s(G,h.length,V,R,Q,se),T)throw i(G),ie||i(Q),new Error(`lerc-getDataRanges: error code is ${T}`);a=new Uint8Array(l.buffer),Ip(a,Q,$),Ip(a,se,P);const ye=new Float64Array($.buffer),Pe=new Float64Array(P.buffer),Ie=y.statistics;for(let we=0;we<R;we++)if(V>1){const De=ye.slice(we*V,(we+1)*V),Ze=Pe.slice(we*V,(we+1)*V),et=Math.min.apply(null,De),nt=Math.max.apply(null,Ze);Ie.push({minValue:et,maxValue:nt,depthStats:{minValues:De,maxValues:Ze}})}else Ie.push({minValue:ye[we],maxValue:Pe[we]});return i(G),ie||i(Q),y},j3.decode=(h,p)=>{const{maskCount:f,depthCount:m,bandCount:g,width:b,height:w,dataType:S,bandCountWithNoData:T}=p,x=doe[S],_=b*w,M=new Uint8Array(_*g),I=_*m*g*x.size,A=new Uint8Array(I),C=new Uint8Array(g),R=new Uint8Array(8*g),[O,k,L,V,J]=u([h.length,M.length,A.length,C.length,R.length]);a.set(h,O),a.set(M,k),a.set(A,L),a.set(C,V),a.set(R,J);const y=n(O,h.length,f,k,m,b,w,g,S,L,V,J);if(y)throw i(O),new Error(`lerc-decode: error code is ${y}`);a=new Uint8Array(l.buffer),Ip(a,L,A),Ip(a,k,M);let E=null;if(T){Ip(a,V,C),Ip(a,J,R),E=[];const $=new Float64Array(R.buffer);for(let P=0;P<C.length;P++)E.push(C[P]?$[P]:null)}return i(O),{data:A,maskData:M,noDataValues:E}}}function P4e(e,t,i,r,s){if(i<2)return e;const n=new r(t*i);for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<i;l++,u+=t)n[u]=e[a++];return n}function moe(e,t={}){const i=t.inputOffset??0,r=e instanceof Uint8Array?e.subarray(i):new Uint8Array(e,i),s=j3.getBlobInfo(r),{data:n,maskData:o,noDataValues:a}=j3.decode(r,s),{width:l,height:u,bandCount:h,depthCount:p,dataType:f,maskCount:m,statistics:g}=s,b=doe[f],w=new b.ctor(n.buffer),S=[],T=[],x=l*u,_=x*p;for(let O=0;O<h;O++){const k=w.subarray(O*_,(O+1)*_);if(t.returnInterleaved)S.push(k);else{const L=P4e(k,x,p,b.ctor);S.push(L)}T.push(o.subarray(O*_,(O+1)*_))}const M=m===0?null:m===1?T[0]:new Uint8Array(x);if(m>1){M.set(T[0]);for(let O=1;O<T.length;O++){const k=T[O];for(let L=0;L<x;L++)M[L]=M[L]&k[L]}}const{noDataValue:I}=t,A=I!=null&&b.range[0]<=I&&b.range[1]>=I;if(m>0&&A)for(let O=0;O<h;O++){const k=S[O],L=T[O]||M;for(let V=0;V<x;V++)L[V]===0&&(k[V]=I)}const C=m===h&&h>1?T:null,{pixelType:R}=b;return{width:l,height:u,bandCount:h,pixelType:R,depthCount:p,statistics:g,pixels:S,mask:M,bandMasks:C,noDataValues:a}}function L4e(e,t,i,r=!0){if(t%4!=0||i%4!=0){const s=new ArrayBuffer(4*Math.ceil(i/4)),n=new Uint8Array(s),o=new Uint8Array(e,t,i);if(r)for(let a=0;a<n.length;a+=4)n[a]=o[a+3],n[a+1]=o[a+2],n[a+2]=o[a+1],n[a+3]=o[a];else n.set(o);return new Uint32Array(n.buffer)}if(r){const s=new Uint8Array(e,t,i),n=new Uint8Array(s.length);for(let o=0;o<n.length;o+=4)n[o]=s[o+3],n[o+1]=s[o+2],n[o+2]=s[o+1],n[o+3]=s[o];return new Uint32Array(n.buffer)}return new Uint32Array(e,t,i/4)}function Nq(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function kq(e,t){for(let i=0;i<t.length;i++)e.push(t[i])}const P0=new Set;function M9(e,t,i,r=!0){const s=L4e(e,t,i,r);let n=9,o=Nq(),a=32,l=o.length,u=[],h=1,p=s[0],f=0;const m=s.length,g=8*(4*m-i),b=[];for(;p!=null;){if(a>=n)a-=n,f=p>>>32-n,p<<=n;else{f=p>>>32-a,p=s[h++];const S=n-a;a=32-S,f=(f<<S)+(p>>>a),p<<=S}if(f===257)break;if(f===256){n=9,o=Nq(),l=o.length,u=[];continue}const w=o[f];if(w==null){if(f>o.length)throw new Error("data integrity issue: code does not exist on code page");u.push(u[0]),o[l++]=u.slice(),kq(b,u)}else kq(b,w),u.push(w[0]),u.length>1&&(o[l++]=u.slice()),u=w.slice();if(P0.has(l)&&n++,a===0&&(p=s[h++],a=32),h>m||h===m&&a<=g)break}return new Uint8Array(b)}P0.add(511),P0.add(1023),P0.add(2047),P0.add(4095),P0.add(8191);const Dq=(e,t)=>{const i=t.width*t.height,r=t.pixelType;return Math.floor(e.byteLength/(i*yoe(r)))},yoe=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},N4e=(e,t)=>{if(8*e.byteLength<t)return null;const i=new Uint8Array(e,0,Math.ceil(t/8)),r=new Uint8Array(t);let s=0,n=0,o=0,a=0;for(o=0;o<i.length-1;o++)for(n=i[o],a=7;a>=0;a--)r[s++]=n>>a&1;for(a=7;s<t-1;)n=i[i.length-1],r[s++]=n>>a&1,a--;return r};let k4e=class{static decode(t,i){const r=i.pixelType,s=[],n=i.width*i.height,o=Dq(t,i),{bandIds:a,format:l}=i,u=a?.length||Dq(t,i),h=t.byteLength-t.byteLength%(n*yoe(r)),p=new r(t,0,n*o);let f,m,g,b,w=null;if(l==="bip")for(f=0;f<u;f++){for(g=new r(n),b=a?a[f]:f,m=0;m<n;m++)g[m]=p[m*o+b];s.push(g)}else if(l==="bsq")for(f=0;f<u;f++)b=a?a[f]:f,s.push(p.subarray(b*n,(b+1)*n));return h<t.byteLength-1&&(w=N4e(t.slice(h),n)),{pixels:s,mask:w}}};function D4e(e,t){let i=0,r="",s=0,n=0;const o=e.length;for(;i<o;)n=e[i++],s=n>>4,s<8?s=1:s===15?(s=4,n=(7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++]):s===14?(s=3,n=(15&n)<<12|(63&e[i++])<<6|63&e[i++]):(s=2,n=(31&n)<<6|63&e[i++]),(n!==0||t)&&(r+=String.fromCharCode(n));return r}const I9=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),F4e=(()=>{const e=I9.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),j4e=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],U4e=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),V4e=(e,t)=>{let i=(t||I9)[e];return i===void 0&&(i="unknown"+String(e)),i},Ok=new Map;Ok.set("EXIFIFD",F4e),Ok.set("GPSIFD",j4e);const Hv={tiffTags:I9,ifdTags:Ok,geoKeys:U4e,getTagName:V4e},A9=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),Fq=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],E1=4294967296,G4e=new Set([1,5,6,7,8,34712,34887]);function $9(e,t){let i="unknown";return e===3?i=t===64?"f64":"f32":e===1?t===1?i="u1":t===2?i="u2":t===4?i="u4":t<=8?i="u8":t<=16?i="u16":t<=32&&(i="u32"):e===2&&(t<=8?i="s8":t<=16?i="s16":t<=32&&(i="s32")),i}function gC(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function B4e(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function goe(e,t){return e.get(t)?.values}function Ay(e,t){return e.get(t)?.values}function jq(e,t){return e.get(t)?.values?.[0]}function Rt(e,t){return e.get(t)?.values?.[0]}function G4(e,t,i,r=0,s=Hv.tiffTags,n=4){const o=n===8,a=o?R9(new DataView(e,i,8),0,t):new DataView(e,i,2).getUint16(0,t),l=4+2*n,u=o?8:2,h=u+a*l;if(i+h>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:h};const p=i+h+4<=e.byteLength?YM(new DataView(e,i+h,n===8?8:4),0,t,n===8):null,f=i+u,m=new Map;let g,b,w,S,T,x=0,_=0;for(let M=0;M<a;M++){b=new DataView(e,f+l*M,l),w=b.getUint16(0,t),T=b.getUint16(2,t),S=Hv.getTagName(w,s);const I=[];n===2?(x=b.getUint16(4,t),_=b.getUint16(6,t)):n===4?(x=b.getUint32(4,t),_=b.getUint32(8,t)):n===8&&(x=YM(b,4,t,!0),_=YM(b,12,t,!0),I.push(b.getUint32(12,t)),I.push(b.getUint32(16,t))),g={id:w,type:T,valueCount:x,valueOffset:_,valueOffsets:I,values:null},Z4e(e,t,g,r,!1,n),m.set(S,g)}return{success:!0,ifd:m,nextIFD:p,requiredBufferSize:h}}const z4e=(e,t)=>moe(e,{inputOffset:t}).pixels[0];function Pk(e,t){if(t!==1&&t!==2&&t!==4)return e;const i=new Uint8Array(e),r=8/t,s=new Uint8Array(e.byteLength*r);let n=0;const o=2**t-1;for(let a=0;a<i.length;a++){const l=i[a];for(let u=0;u<r;u++)s[n++]=l<<t*u>>>8-t&o}return s.buffer}function Lk(e,t,i){const r=new poe;r.parse(e),r.colorTransform=i===6?-1:0;const s=r.getData(r.width,r.height,t!==1&&t!==4);return new Uint8Array(s.buffer)}function Nk(e){const t=new bx(e).getBytes(),i=new ArrayBuffer(t.length),r=new Uint8Array(i);return r.set(t),r}async function kk(e,t,i,r,s){const n=A9===t,o=Rt(i,"BITSPERSAMPLE"),a=Rt(i,"SAMPLESPERPIXEL")??1,l=Rt(i,"PHOTOMETRICINTERPRETATION"),u=Rt(i,"SAMPLEFORMAT")??1,h=$9(u,o),p=Rt(i,"COMPRESSION")??1,f=gC(h);let m,g,b;if(p===34887)return await foe(),z4e(e,r);if(p===1)m=e.slice(r,r+s),g=new Uint8Array(m);else if(p===8||p===32946)g=new Uint8Array(e,r,s),g=Nk(g),m=g.buffer;else if(p===6)g=new Uint8Array(e,r,s),g=Lk(g,a,l),m=g.buffer;else if(p===7){const x=i.get("JPEGTABLES").values,_=x.length-2;g=new Uint8Array(_+s-2);for(let I=0;I<_;I++)g[I]=x[I];const M=new Uint8Array(e,r+2,s-2);for(let I=0;I<M.length;I++)g[_+I]=M[I];g=Lk(g,a,l),m=g.buffer}else{if(p!==5)throw new Error("tiff-decode: unsupport compression "+p);g=M9(e,r,s,t),m=g.buffer}if(m=Pk(m,o),h==="u8"||h==="s8"||n)b=new f(m);else{m=new ArrayBuffer(g.length);const x=new Uint8Array(m);switch(h){case"u16":case"s16":for(let _=0;_<g.length;_+=2)x[_]=g[_+1],x[_+1]=g[_];break;case"u32":case"s32":case"f32":for(let _=0;_<g.length;_+=4)x[_]=g[_+3],x[_+1]=g[_+2],x[_+2]=g[_+1],x[_+3]=g[_]}b=new f(m)}const w=Rt(i,"PREDICTOR")??1,S=Rt(i,"TILEWIDTH"),T=Rt(i,"TILELENGTH");if(w>1&&(p===5||p===8||p===32946)&&S&&T){const x=vC(i),_=new f(b.length);_.set(b),b=eRe(_,T,S,u===3&&w===3,x?1:a)}return b}async function q4e(e,t,i){const r=Ay(i,"TILEOFFSETS");if(r===void 0)return null;const s=Ay(i,"TILEBYTECOUNTS"),{width:n,height:o,pixelType:a,tileWidth:l,tileHeight:u}=C9([i]),h=vC(i,t),p=Rt(i,"SAMPLESPERPIXEL")||t.planes,f=n*o,m=Rt(i,"BITSPERSAMPLE"),g=(Rt(i,"COMPRESSION")??1)===34887,b=gC(a),w=[];for(let $=0;$<p;$++)w.push(new b(f));let S,T,x,_,M,I,A,C,R,O,k,L,V;const J=Math.ceil(n/l),y=new Uint8Array(f).fill(255);let E=!1;if(m%8==0)if(g&&h&&p>1){const $=Math.round(r.length/p);for(S=0;S<$;S++){I=Math.floor(S/J)*u,A=S%J*l,C=I*n+A;for(let P=0;P<p;P++){const G=S*p+P;for(s[G]===0?(x=null,E=!0):x=await kk(e,t.littleEndian,i,r[G],s[G]),O=0,R=C,L=Math.min(l,n-A),k=Math.min(u,o-I),V=w[P],_=0;_<k;_++)for(R=C+_*n,O=_*l,M=0;M<L;M++,R++,O++)x?V[R]=x[O]:y[R]=0}}}else for(S=0;S<r.length;S++)for(I=Math.floor(S/J)*u,A=S%J*l,C=I*n+A,s[S]===0?(x=null,E=!0):x=await kk(e,t.littleEndian,i,r[S],s[S]),O=0,R=C,L=Math.min(l,n-A),k=Math.min(u,o-I),T=0;T<p;T++)if(V=w[T],h||g)for(_=0;_<k;_++)for(R=C+_*n,O=l*u*T+_*l,M=0;M<L;M++,R++,O++)x?V[R]=x[O]:y[R]=0;else for(_=0;_<k;_++)for(R=C+_*n,O=_*l*p+T,M=0;M<L;M++,R++,O+=p)x?V[R]=x[O]:y[R]=0;return{width:n,height:o,pixelType:a,pixels:w,mask:E?y:void 0}}const H4e=(e,t,i)=>{const r=A9===t.littleEndian,s=Ay(i,"STRIPOFFSETS");if(s===void 0)return null;const{width:n,height:o,pixelType:a}=C9([i]),l=Rt(i,"SAMPLESPERPIXEL")||t.planes,u=Rt(i,"PHOTOMETRICINTERPRETATION"),h=n*o,p=Rt(i,"BITSPERSAMPLE"),f=gC(a),m=new f(h*l),g=Ay(i,"STRIPBYTECOUNTS"),b=Rt(i,"ROWSPERSTRIP"),w=Rt(i,"COMPRESSION")??1;let S,T,x,_,M,I,A,C,R;if(p%8==0)for(S=0;S<s.length;S++){if(M=S*(b*n)*l,a==="u8"||a==="s8"||r)w===8||w===32946?(A=new Uint8Array(e,s[S],g[S]),A=Nk(A),I=A.buffer):w===6?(A=new Uint8Array(e,s[S],g[S]),A=Lk(A,l,u),I=A.buffer):w===5?(A=M9(e,s[S],g[S],t.littleEndian),I=A.buffer):I=e.slice(s[S],s[S]+g[S]),I=Pk(I,p),_=new f(I);else{switch(w===6||w===8||w===32946?(A=new Uint8Array(e,s[S],g[S]),C=Nk(A),I=C.buffer):(I=new ArrayBuffer(g[S]),A=new Uint8Array(e,s[S],g[S]),C=new Uint8Array(I)),a){case"u16":case"s16":for(x=0;x<A.length;x+=2)C[x]=A[x+1],C[x+1]=A[x];break;case"u32":case"s32":case"f32":for(x=0;x<A.length;x+=4)C[x]=A[x+3],C[x+1]=A[x+2],C[x+2]=A[x+1],C[x+3]=A[x]}I=Pk(I,p),_=new f(I)}m.set(_,M)}const O=[];if(l===1)O.push(m);else for(S=0;S<l;S++){for(R=new f(h),T=0;T<h;T++)R[T]=m[T*l+S];O.push(R)}return{width:n,height:o,pixelType:a,pixels:O}},W4e=(e,t,i)=>{if(!(e&&e.length>0&&t&&i))return null;let r,s,n;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(r=e[u],s=t[u],n=i[u],u===0)for(let h=0;h<o;h++)l[h]=r[h]<s||r[h]>n?0:1;else for(let h=0;h<o;h++)l[h]&&(l[h]=r[h]<s||r[h]>n?0:1);return l},J4e=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const i=new Map;let r,s,n,o,a;for(let S=0;S<t.length;S++)r=t[S],s=r.slice(6,r.indexOf(">")),o=r.indexOf("sample="),o>-1&&(a=r.slice(o+8,r.indexOf('"',o+8))),o=r.indexOf("name="),o>-1&&(s=r.slice(o+6,r.indexOf('"',o+6))),s&&(n=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),a!=null?i.has(s)?i.get(s)[a]=n:i.set(s,[n]):i.set(s,n)),a=null;const l=i.get("STATISTICS_MINIMUM"),u=i.get("STATISTICS_MAXIMUM"),h=i.get("STATISTICS_MEAN"),p=i.get("STATISTICS_STDDEV");let f=null;if(l&&u){f=[];for(let S=0;S<l.length;S++)f.push({min:parseFloat(l[S]),max:parseFloat(u[S]),avg:h&&parseFloat(h[S]),stddev:p&&parseFloat(p[S])})}const m=i.get("BandName"),g=i.get("WavelengthMin"),b=i.get("WavelengthMax");let w=null;if(m){w=[];for(let S=0;S<m.length;S++)w.push({BandName:m[S],WavelengthMin:g&&parseFloat(g[S]),WavelengthMax:b&&parseFloat(b[S])})}return{statistics:f,bandProperties:w,dataType:i.get("DataType"),rawMetadata:i}};function Z4e(e,t,i,r=0,s=!1,n=4){if(i.values)return!0;const o=i.type,a=i.valueCount;let l=i.valueOffset,u=[];const h=Fq[o],p=8*h,f=a*h,m=a*Fq[o]*8;let g,b;const w=n===8?64:32,S=i.valueOffsets;if(m>w&&f>(s?e.byteLength:e?e.byteLength-l+r:0))return i.offlineOffsetSize=[l,f],i.values=null,!1;if(m<=w){if(!t)if(w<=32)l>>>=32-m;else{const T=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-T)/E1);m<=32?(l=T>>>32-m,S[0]=l):(l=T*2**(32-m)+(x>>>32-m),S[0]=T,S[1]=x>>>32-m)}if(a===1&&p===w)u=[l];else if(w===64){const T=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-T)/E1);let _=T,M=32;for(b=1;b<=a;b++){const I=32-p*b%32;if(M<p){const A=_<<I>>>32-M,C=x<<32-M>>>32-M;_=x,u.push(A+C*2**(p-M)),M-=32-(p-M)}else u.push(_<<I>>>32-p),M-=p;M===0&&(M=32,_=x)}}else for(b=1;b<=a;b++){const T=32-p*b;u.push(l<<T>>>32-p)}}else{l-=r,s&&(l=0);for(let T=l;T<l+f;T+=h){switch(o){case 1:case 2:case 7:g=new DataView(e,T,1).getUint8(0);break;case 3:g=new DataView(e,T,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,T,4).getUint32(0,t);break;case 5:g=new DataView(e,T,4).getUint32(0,t)/new DataView(e,T+4,4).getUint32(0,t);break;case 6:g=new DataView(e,T,1).getInt8(0);break;case 8:g=new DataView(e,T,2).getInt16(0,t);break;case 9:g=new DataView(e,T,4).getInt32(0,t);break;case 10:g=new DataView(e,T,4).getInt32(0,t)/new DataView(e,T+4,4).getInt32(0,t);break;case 11:g=new DataView(e,T,4).getFloat32(0,t);break;case 12:g=new DataView(e,T,8).getFloat64(0,t);break;case 16:case 18:g=R9(new DataView(e,T,8),0,t);break;case 17:g=K4e(new DataView(e,T,8),0,t);break;default:g=null}u.push(g)}}if(o===2){let T="";const x=u;for(u=[],b=0;b<x.length;b++)x[b]===0&&T!==""?(u.push(T),T=""):T+=String.fromCharCode(x[b]);T===""&&u.length!==0||u.push(T)}return i.values=u,!0}function C9(e){const t=e[0],i=Rt(t,"TILEWIDTH"),r=Rt(t,"TILELENGTH"),s=Rt(t,"IMAGEWIDTH"),n=Rt(t,"IMAGELENGTH"),o=Rt(t,"BITSPERSAMPLE"),a=Rt(t,"SAMPLESPERPIXEL"),l=Rt(t,"SAMPLEFORMAT")??1,u=$9(l,o),h=vC(t),p=goe(t,"GDAL_NODATA");let f=null;p?.length&&(f=p.map(se=>parseFloat(se)),f.some(se=>isNaN(se))&&(f=null));const m=Rt(t,"COMPRESSION")??1;let g;switch(m){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(m)}let b=!0,w="";G4e.has(m)||(b=!1,w+="unsupported tag compression "+m),l>3&&(b=!1,w+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(b=!1,w+="unsupported tag bitsPerSample "+o);const S=jq(t,"GEOASCIIPARAMS");let T;if(S){const se=S.split("|").find(ye=>ye.includes("ESRI PE String = ")),ie=se?se.replace("ESRI PE String = ",""):"";T=ie.startsWith("COMPD_CS")||ie.startsWith("PROJCS")||ie.startsWith("GEOGCS")?{wkid:null,wkt:ie}:null}const x=Ay(t,"GEOTIEPOINTS"),_=Ay(t,"GEOPIXELSCALE"),M=Ay(t,"GEOTRANSMATRIX"),I=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let A,C,R=!1,O=!1;if(I){R=Rt(I,"GTRasterTypeGeoKey")===2;const se=Rt(I,"GTModelTypeGeoKey");if(se===2){const ie=Rt(I,"GeographicTypeGeoKey");ie>=1024&&ie<=32766&&(T={wkid:ie}),T||ie!==32767||(O=!0,T={wkid:4326})}else if(se===1){const ie=Rt(I,"ProjectedCSTypeGeoKey");ie>=1024&&ie<=32766&&(T={wkid:ie})}}if(_&&x&&x.length>=6?(A=[_[0],0,x[3]-x[0]*_[0],0,-Math.abs(_[1]),x[4]-x[1]*_[1]],R&&(A[2]-=.5*A[0]+.5*A[1],A[5]-=.5*A[3]+.5*A[4])):M&&M.length===16&&(A=R?[M[0],M[1],M[3]-.5*M[0],M[4],M[5],M[7]-.5*M[5]]:[M[0],M[1],M[3],M[4],M[5],M[7]]),A){const se=[{x:0,y:n},{x:0,y:0},{x:s,y:n},{x:s,y:0}];let ie,ye=Number.POSITIVE_INFINITY,Pe=Number.POSITIVE_INFINITY,Ie=Number.NEGATIVE_INFINITY,we=Number.NEGATIVE_INFINITY;for(let De=0;De<se.length;De++)ie=B4e(se[De],A),ye=ie.x>ye?ye:ie.x,Ie=ie.x<Ie?Ie:ie.x,Pe=ie.y>Pe?Pe:ie.y,we=ie.y<we?we:ie.y;C={xmin:ye,xmax:Ie,ymin:Pe,ymax:we,spatialReference:T}}else C={xmin:-.5,ymin:.5-n,xmax:s-.5,ymax:.5,spatialReference:T};O&&(C.xmax-C.xmin>400||Math.max(Math.abs(C.xmin),Math.abs(C.xmax))>361)&&(T=null,C.spatialReference=null);const k=voe(e);let L,V,J,y,E;if(k.length>0){J=Math.round(Math.log(s/Rt(k[0],"IMAGEWIDTH"))/Math.LN2);const se=k[k.length-1];y=k.length,L=Rt(se,"TILEWIDTH"),V=Rt(se,"TILELENGTH")}L=y!=null&&y>0?L||i:null,V=y!=null&&y>0?V||r:null,i&&(E=[{maxCol:Math.ceil(s/i)-1,maxRow:Math.ceil(n/r)-1,minRow:0,minCol:0}],k.forEach(se=>{E.push({maxCol:Math.ceil(Rt(se,"IMAGEWIDTH")/Rt(se,"TILEWIDTH"))-1,maxRow:Math.ceil(Rt(se,"IMAGELENGTH")/Rt(se,"TILELENGTH"))-1,minRow:0,minCol:0})}));const $=jq(e[0],"GDAL_METADATA"),P=J4e($);w+=" "+woe({width:s,height:n,tileWidth:i,tileHeight:r,planes:a,ifds:e});const G=boe(e).length===k.length+1,Q=k?.length?k.map(se=>({x:s/Rt(se,"IMAGEWIDTH"),y:n/Rt(se,"IMAGELENGTH")})):void 0;return{width:s,height:n,tileWidth:i,tileHeight:r,planes:a,isBSQ:h,pixelType:u,compression:g,noData:f,hasMaskBand:G,isSupported:b,pyramidResolutions:Q,message:w,extent:C,isPseudoGeographic:O,affine:_?null:A,firstPyramidLevel:J,maximumPyramidLevel:y,pyramidBlockWidth:L,pyramidBlockHeight:V,tileBoundary:E,metadata:P}}function vC(e,t){const i=goe(e,"PLANARCONFIGURATION");return i?i[0]===2:!!t&&t.isBSQ}function voe(e){return e.filter(t=>Rt(t,"NEWSUBFILETYPE")===1)}function boe(e){return e.filter(t=>{const i=!(4&~(Rt(t,"NEWSUBFILETYPE")??0)),r=Rt(t,"PHOTOMETRICINTERPRETATION")===4;return i&&r})}function Y4e(e){const{littleEndian:t,isBigTiff:i,firstIFDPos:r}=X4e(e);let s=r;const n=[];do{const o=Q4e(e,t,s,0,Hv.tiffTags,i?8:4);if(!o.success)break;n.push(o.ifd),s=o.nextIFD}while(s>0);return{...C9(n),littleEndian:t,isBigTiff:i,ifds:n,pyramidIFDs:voe(n),maskIFDs:boe(n)}}function R9(e,t,i){const r=e.getUint32(t,i),s=e.getUint32(t+4,i);return i?s*E1+r:r*E1+s}function K4e(e,t,i){let r=i?e.getInt32(t,i):e.getUint32(t,i),s=i?e.getUint32(t+4,i):e.getInt32(t+4,i);const n=(i?r:s)>=0?1:-1;return i?r*=n:s*=n,n*(i?s*E1+r:r*E1+s)}function YM(e,t,i,r){return r?R9(e,t,i):e.getUint32(t,i)}function X4e(e){const t=new DataView(e,0,16),i=t.getUint16(0,!1);let r=null;if(i===18761)r=!0;else{if(i!==19789)throw new Error("unexpected endianess byte");r=!1}const s=t.getUint16(2,r);if(s!==42&&s!==43)throw new Error("unexpected tiff identifier");let n=4;const o=s===43;if(o){const a=t.getUint16(n,r);if(n+=2,a!==8)throw new Error("unsupported bigtiff version");if(t.getUint16(n,r)!==0)throw new Error("unsupported bigtiff version");n+=2}return{littleEndian:r,isBigTiff:o,firstIFDPos:YM(t,n,r,o)}}function Q4e(e,t,i,r=0,s=Hv.tiffTags,n=4){const o=G4(e,t,i,r,s,n);let a;const l=o.ifd;if(l){if(Hv.ifdTags.forEach((u,h)=>{l.has(h)&&(a=l.get(h),a.data=G4(e,t,a.valueOffset-r,r,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const h=u[0]+"."+u[1]+"."+u[2];a.data=G4(e,t,a.valueOffset+6-r,r,Hv.geoKeys,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[h]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[D4e(new Uint8Array(u))])}}return o}function woe(e){const{width:t,height:i,tileHeight:r,tileWidth:s}=e,n=e.planes,o=s?s*r:t*i,a=Rt(e.ifds[0],"BITSPERSAMPLE");let l="";return o*n>2**30/(a>8?a/8:1)&&(l=s?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}function eRe(e,t,i,r,s){const n=r?4:1,o=i*n*s;r&&(e=new Uint8Array(e.buffer));for(let u=0;u<t;u++){const h=u*o;for(let p=s;p<o;p++)e[h+p]+=e[h+p-s]}if(!r)return e;const a=new Uint8Array(e.length),l=i*s;for(let u=0;u<t;u++){const h=u*o;for(let p=0;p<l;p++)for(let f=0;f<n;f++)a[h+p*n+f]=e[h+p+(n-f-1)*l]}return new Float32Array(a.buffer)}async function tRe(e,t){const{headerInfo:i,ifd:r,offsets:s,sizes:n}=t,o=[];for(let R=0;R<s.length;R++){n[R];const O=await kk(e,i.littleEndian,r,s[R],n[R]||e.byteLength);o.push(O)}const a=vC(r,i),l=Rt(r,"BITSPERSAMPLE"),u=$9(Rt(r,"SAMPLEFORMAT")??1,l),h=Rt(r,"SAMPLESPERPIXEL")||i.planes,p=gC(u),f=Rt(r,"TILEWIDTH"),m=Rt(r,"TILELENGTH"),g=Rt(r,"COMPRESSION")??1,b=f*m;let w;const S=[];let T=o[0];const x=g===34887;for(let R=0;R<h;R++){if(w=new p(b),o.length===h)T=o[R],T.length===b&&(w=T);else if(T.length)if(a||x)w=T.length===b?T:T.slice(b*R,b*(R+1));else for(let O=0;O<b;O++)w[O]=T[O*h+R];S.push(w)}const _=i.noData?i.noData[0]:t.noDataValue,M=i.metadata?i.metadata.statistics:null,I=M?M.map(R=>R.min):null,A=M?M.map(R=>R.max):null,C={pixelType:u,width:f,height:m,pixels:S,noDataValue:_};return _!=null?_9(C,_):I&&A&&t.applyMinMaxConstraint&&(C.mask=W4e(S,I,A)),C}async function iRe(e,t={}){const i=t.pyramidLevel||0,r=t.headerInfo||Y4e(e),{ifds:s,noData:n}=r;if(s.length===0)throw new Error("no valid image file directory");const o=woe(r);if(o)throw o;let a=null;const l=i===-1?s[s.length-1]:s[i],u=n??t.noDataValue;return a=r.tileWidth?await q4e(e,r,l):H4e(e,r,l),a&&(u!=null&&_9(a,u),a)}var rRe=function(e){var t,i,r,s,n,o;function a(l){var u,h,p,f,m,g,b,w,S,T,x,_,M;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),w=function(){var I,A;for(A=[],I=0;I<4;++I)A.push(String.fromCharCode(this.data[this.pos++]));return A}.call(this).join(""),w){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),p=this.readUInt16()||100,m.delay=1e3*f/p,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,x=0;0<=u?x<u:x>u;0<=u?++x:--x)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(S=255-this.transparency.indexed.length)>0)for(_=0;0<=S?_<S:_>S;0<=S?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(T=this.read(u)).indexOf(0),b=String.fromCharCode.apply(String,T.slice(0,g)),this.text[b]=String.fromCharCode.apply(String,T.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,h){var p;return typeof u=="function"&&(h=u),(p=new XMLHttpRequest).open("GET",l,!0),p.responseType="arraybuffer",p.onload=function(){var f;return f=new a(new Uint8Array(p.response||p.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&f.render(u),typeof h=="function"?h(f):void 0},p.send(null)},i=1,r=2,t=0,a.prototype.read=function(l){var u,h;for(h=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)h.push(this.data[this.pos++]);return h},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,h,p,f,m,g,b,w,S,T,x,_,M,I,A,C,R,O,k,L,V,J,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new bx(l)).getBytes(),C=(_=this.pixelBitlength/8)*this.width,M=new Uint8Array(C*this.height),g=l.length,A=0,I=0,h=0;I<g;){switch(l[I++]){case 0:for(f=k=0;k<C;f=k+=1)M[h++]=l[I++];break;case 1:for(f=L=0;L<C;f=L+=1)u=l[I++],m=f<_?0:M[h-_],M[h++]=(u+m)%256;break;case 2:for(f=V=0;V<C;f=V+=1)u=l[I++],p=(f-f%_)/_,R=A&&M[(A-1)*C+p*_+f%_],M[h++]=(R+u)%256;break;case 3:for(f=J=0;J<C;f=J+=1)u=l[I++],p=(f-f%_)/_,m=f<_?0:M[h-_],R=A&&M[(A-1)*C+p*_+f%_],M[h++]=(u+Math.floor((m+R)/2))%256;break;case 4:for(f=y=0;y<C;f=y+=1)u=l[I++],p=(f-f%_)/_,m=f<_?0:M[h-_],A===0?R=O=0:(R=M[(A-1)*C+p*_+f%_],O=p&&M[(A-1)*C+(p-1)*_+f%_]),b=m+R-O,w=Math.abs(b-m),T=Math.abs(b-R),x=Math.abs(b-O),S=w<=T&&w<=x?m:T<=x?R:O,M[h++]=(u+S)%256;break;default:throw new Error("Invalid filter algorithm: "+l[I-1])}A++}return M},a.prototype.decodePalette=function(){var l,u,h,p,f,m,g,b,w;for(h=this.palette,m=this.transparency.indexed||[],f=new Uint8Array((m.length||0)+h.length),p=0,h.length,l=0,u=g=0,b=h.length;g<b;u=g+=3)f[p++]=h[u],f[p++]=h[u+1],f[p++]=h[u+2],f[p++]=(w=m[l++])!=null?w:255;return f},a.prototype.copyToImageData=function(l,u){var h,p,f,m,g,b,w,S,T,x,_;if(p=this.colors,T=null,h=this.hasAlphaChannel,this.palette.length&&(T=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),p=4,h=!0),S=(f=l.data||l).length,g=T||u,m=b=0,p===1)for(;m<S;)w=T?4*u[m/4]:b,x=g[w++],f[m++]=x,f[m++]=x,f[m++]=x,f[m++]=h?g[w++]:this.transparency.grayscale&&this.transparency.grayscale===x?0:255,b=w;else for(;m<S;)w=T?4*u[m/4]:b,f[m++]=g[w++],f[m++]=g[w++],f[m++]=g[w++],f[m++]=h?g[w++]:this.transparency.rgb&&this.transparency.rgb[1]===g[w-3]&&this.transparency.rgb[3]===g[w-2]&&this.transparency.rgb[5]===g[w-1]?0:255,b=w},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},n=e.document&&e.document.createElement("canvas"),o=n&&n.getContext("2d"),s=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=n.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,h,p,f,m,g,b,w;if(this.animation){for(w=[],h=m=0,g=(b=this.animation.frames).length;m<g;h=++m)u=b[h],p=l.createImageData(u.width,u.height),f=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(p,f),u.imageData=p,w.push(u.image=s(p));return w}},a.prototype.renderFrame=function(l,u){var h,p,f;return h=(p=this.animation.frames)[u],f=p[u-1],u===0&&l.clearRect(0,0,this.width,this.height),f?.disposeOp===i?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):f?.disposeOp===r&&l.putImageData(f.imageData,f.xOffset,f.yOffset),h.blendOp===t&&l.clearRect(h.xOffset,h.yOffset,h.width,h.height),l.drawImage(h.image,h.xOffset,h.yOffset)},a.prototype.animate=function(l){var u,h,p,f,m,g,b=this;return h=0,g=this.animation,f=g.numFrames,p=g.frames,m=g.numPlays,(u=function(){var w,S;if(w=h++%f,S=p[w],b.renderFrame(l,w),f>1&&h/f<m)return b.animation._timeout=setTimeout(u,S.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,h;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(h=u.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),u.putImageData(h,0,0))},a}(self);const sRe=new Set(["jpg","png","bmp","gif"]);async function nRe(e,t){if(!A9)throw new W("rasterCoded:decode","lerc decoder is not supported on big endian platform");await foe();const{offset:i}=t,{width:r,height:s,pixelType:n,statistics:o,depthCount:a,noDataValues:l,bandMasks:u,pixels:h,mask:p}=moe(e,{inputOffset:i,returnInterleaved:t.returnInterleaved}),f=new At({width:r,height:s,pixelType:n.toLowerCase(),pixels:h,mask:p,statistics:o.map(({minValue:m,maxValue:g})=>new vx(m,g)),bandMasks:u,depthCount:a,noDataValues:l});return o?.length||f.updateStatistics(),f}async function oRe(e,t){const i=await iRe(e,{...t,noDataValue:null});jd(i);const r=new At({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,bandMasks:i.bandMasks,statistics:null});return r.updateStatistics(),r}async function aRe(e,t){const i=await tRe(e,t.customOptions),r=new At({width:i.width,height:i.height,pixels:i.pixels,pixelType:i.pixelType.toLowerCase(),mask:i.mask,statistics:null});return r.updateStatistics(),r}function _oe(e,t){const i=t.pixelType||"u8",r=At.getPixelArrayConstructor(i),s=i==="u8"?e:new r(e.buffer),n=[],o=t.planes||1;if(o===1)n.push(s);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),h=new r(u);for(let p=0;p<u;p++)h[p]=s[p*o+l];n.push(h)}const a=new At({width:t.width||1,height:t.height||e.length,pixels:n,pixelType:i,statistics:null});return a.updateStatistics(),a}function lRe(e,t){return _oe(new bx(new Uint8Array(e)).getBytes(),t)}function uRe(e,t){return _oe(M9(e,t.offset,t.eof,!t.isInputBigEndian),t)}function cRe(e,t,i){const{pixelTypeCtor:r}=mRe(t.pixelType),s=(0,k4e.decode)(e,{width:t.width,height:t.height,pixelType:r,format:i}),n=new At({width:t.width,height:t.height,pixels:s.pixels,pixelType:t.pixelType,mask:s.mask,statistics:null});return n.updateStatistics(),n}function hRe(e,t){const i=C4e.decode(e,t.hasNoZlibMask??void 0),r=new At({width:i.width,height:i.height,pixels:i.pixels,pixelType:"u8",mask:i.mask,statistics:null});return r.updateStatistics(),r}function pRe(e,t){const i=new Uint8Array(e),r=new rRe(i),{width:s,height:n}=t,o=s*n,a=r.decode();let l,u=0,h=0;const p=new Uint8Array(o);for(u=0;u<o;u++)p[u]=a[4*u+3];const f=new At({width:s,height:n,pixels:[],pixelType:"u8",mask:p,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),h=0;h<o;h++)l[h]=a[4*h+u];f.addData({pixels:l})}return f.updateStatistics(),f}async function dRe(e,t,i,r){const s=new A4e,n={applyJpegMask:!1,format:t,...i},o=await s.decode(e,n,r),a=new At(o);return a.updateStatistics(),a}function Soe(e){if(e==null)throw new W("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let i="";return t[0]===255&&t[1]===216?i="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?i="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?i="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?i="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?i="tiff":t[0]===71&&t[1]===73&&t[2]===70?i="gif":t[0]===66&&t[1]===77?i="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(i="error"),i}function fRe(e){let t=null;switch(e){case"lerc":case"lerc2":t=nRe;break;case"jpg":t=hRe;break;case"png":t=pRe;break;case"bsq":case"bip":t=(i,r)=>cRe(i,r,e);break;case"tiff":t=oRe;break;case"deflate":t=lRe;break;case"lzw":t=uRe;break;case"error":t=()=>{throw new W("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new W("rasterCodec:decode","unsupported raster format")}}return t}function mRe(e){let t=null,i=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":i=255,t=Uint8Array;break;case"u16":i=i||65535,t=Uint16Array;break;case"u32":i=i||2**32-1,t=Uint32Array;break;case"s8":i=i||-128,t=Int8Array;break;case"s16":i=i||-32768,t=Int16Array;break;case"s32":i=i||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:i}}function yRe(e,t=1){if(!e)return;const{pixels:i,width:r,height:s,mask:n}=e;if(!i||i.length===0)return;const o=i.length,a=r-1,l=s-1,u=[];let h,p,f,m,g,b,w=null;const S=At.getPixelArrayConstructor(e.pixelType);if(t===0){for(h=0;h<o;h++){for(g=i[h],b=new S(a*l),p=0;p<l;p++)for(m=p*r,f=0;f<a;f++)b[p*a+f]=g[m+f];u.push(b)}if(n!=null)for(w=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*r,f=0;f<a;f++)w[p*a+f]=n[m+f]}else{for(h=0;h<o;h++){for(g=i[h],b=new S(a*l),p=0;p<l;p++)for(m=p*r,f=0;f<a;f++)b[p*a+f]=(g[m+f]+g[m+f+1]+g[m+r+f]+g[m+r+f+1])/4;u.push(b)}if(n)for(w=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*r,f=0;f<a;f++)w[p*a+f]=Math.min.apply(null,[n[m+f],n[m+f+1],n[m+r+f],n[m+r+f+1]])}e.width=a,e.height=l,e.mask=w,e.pixels=u}function gRe(e){let t=Soe(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function Uq(e,t={},i){if(e==null)throw new W("rasterCodec:decode","missing encodeddata parameter.");let r=t.format?.toLowerCase();if(!(r!=="bsq"&&r!=="bip"||t.width!=null&&t.height!=null))throw new W("rasterCodec:decode","requires width and height in options parameter.");if(r==="tiff"&&t.customOptions)return aRe(e,t);if((!r||r!=="bsq"&&r!=="bip"&&r!=="deflate"&&r!=="lzw")&&(r=Soe(e)),t.useCanvas&&sRe.has(r))return dRe(e,r,t,i);const s=fRe(r);let n;t.isPoint&&((t={...t}).width!=null&&t.width++,t.height!=null&&t.height++);const{offsets:o}=t;if(o&&o.length>1){const a=o.map((h,p)=>s(e.slice(h,o[p+1]),t)),l=await Promise.all(a);n=l[0],n.pixels=l.map(h=>h.pixels[0]);const u=l.map(h=>h.mask);l.some(h=>h!=null)&&(u.forEach((h,p)=>{h==null&&(u[p]=new Uint8Array(n.width*n.height).fill(255))}),n.bandMasks=u,n.mask=At.combineBandMasks(u)),n.updateStatistics()}else n=await s(e,{...t,offset:o?.[0]??t.offset});return r!=="jpg"&&t.noDataValue!=null&&n.depthCount===1&&_9(n,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&yRe(n),n}function vRe(e){return["u8","s8"].includes(e.pixelType)&&e.statistics?.[0]?.min!=null&&e.statistics[0]?.max!=null&&e.bandCount===1}function O9(e,t){const{attributeTable:i,bandCount:r}=e;return i==null&&vRe(e)?!0:!(i==null||r>1||t&&i.fields.find(s=>s.name.toLowerCase()===t.toLowerCase())==null)}function xoe(e){const{bandCount:t,dataType:i,pixelType:r}=e;return i==="elevation"||i==="generic"&&t===1&&(r==="s16"||r==="s32"||r==="f32"||r==="f64")}function P9(e,t=!1){const{bandCount:i,colormap:r,pixelType:s}=e;return i===1&&(!!r?.length||!t&&s==="u8")}function bRe(e,t=!1){const{attributeTable:i,bandCount:r}=e;return r===1&&(!t||i!=null||e.histograms!=null)}function L9(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function wRe(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function B4(e){return!!e?.length&&e.length<=16384}const Vq=new gt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),Gq=new gt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Ol=class extends ae{constructor(t){super(t),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",t)}set definedInterval(t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",t)}};c([Ue({classBreaksDef:"class-breaks-definition"})],Ol.prototype,"type",void 0),c([d({json:{write:!0}})],Ol.prototype,"breakCount",void 0),c([d({json:{write:!0}})],Ol.prototype,"classificationField",void 0),c([d({type:String,json:{read:Vq.read,write:Vq.write}})],Ol.prototype,"classificationMethod",void 0),c([d({json:{write:!0}})],Ol.prototype,"normalizationField",void 0),c([d({json:{read:Gq.read,write:Gq.write}})],Ol.prototype,"normalizationType",void 0),c([d({value:null,json:{write:!0}})],Ol.prototype,"standardDeviationInterval",null),c([d({value:null,json:{write:!0}})],Ol.prototype,"definedInterval",null),Ol=c([F("esri.rest.support.ClassBreaksDefinition")],Ol);const Rft=Ol,_Re=.25,SRe=V$.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Bq=V$.fromJSON(g9[0]),Toe=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function xRe(e){return e.presetRenderers?.find(({method:t,value:i})=>t==="raster-function-template"?i===e.rasterFunctionName:t==="variable"&&i===e.variableName)}function TRe(e,t){const{attributeTable:i,colormap:r}=e;if(L9(e)){const s=PRe(e);if(s!=null)return s}if(t?.rasterFunctionColorRamp){const s=zq(e,t);return s.colorRamp=t.rasterFunctionColorRamp,s}if(r!=null){const s=RRe(e);if(s!=null)return s}if(i!=null){const s=$Re(e);if(s!=null)return s}return zq(e,t)}function ERe(e,t=!1){const i=["raster-stretch"];return P9(e,t)&&i.push("raster-colormap"),O9(e)&&i.push("unique-value"),bRe(e,t)&&i.push("class-breaks"),xoe(e)&&i.push("raster-shaded-relief"),L9(e)&&i.push("vector-field"),wRe(e)&&i.push("flow"),i}function Oft(e){return e.datasetFormat==="Function"&&e.rasterFunction.functionName==="Colormap"?e.rasterFunction.colorRamp:void 0}function Pft(e,t,i){const r=["nearest","bilinear","cubic","majority"],s=i?.toLowerCase().replace("bicubic","cubic"),n=r.find(o=>o===s);return t==="Map"?n??"bilinear":e.dataType==="standard-time"?n??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?n==="nearest"||n==="majority"?n:"nearest":n??"bilinear"}function zq(e,t){e=MRe(e,t?.variableName);const{bandCount:i}=e;let{bandIds:r,stretchType:s}=t||{};r?.some(p=>p>=i)&&(r=null);let n=e.statistics,o=e.histograms;i>1?(r=r?.length?r:Eoe(e),n=n==null?null:r?.map(p=>n[p]),o=o==null?null:r?.map(p=>o[p])):r=[0],s==null&&(s=ARe(e)),t?.includeStatisticsInStretch&&(s==="percent-clip"||s==="histogram-equalization")&&e.statistics?.length&&(s="min-max");let a=!1;switch(s){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!n?.length}const{dataType:l}=e,u=r?.length===1&&Toe.has(l)?SRe:null,h=new b9({stretchType:s,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:r?.length===1?[1]:[1,1,1],useGamma:!1});return s==="percent-clip"?h.maxPercent=h.minPercent=_Re:s==="standard-deviation"&&(h.numberOfStandardDeviations=2),a||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(s==="percent-clip"?h.histograms=o:s!=="min-max"&&s!=="standard-deviation"||(h.statistics=n)),h}function MRe(e,t){const{multidimensionalInfo:i}=e;if(!t||!i)return e;const r=i.variables.find(s=>s.name===t);if(!r)return e;if(e=e.clone(),r){const{statistics:s,histograms:n}=r;s?.length&&(e.statistics=s.map(o=>({min:o.min,max:o.max,avg:o.avg,stddev:o.stddev}))),n?.length&&(e.histograms=n)}return e}function Eoe(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const{bandInfos:i}=e;let r;if(i.length===t){const{red:s,green:n,blue:o,nir:a}=IRe(i);s!=null&&n!=null&&o!=null?r=[s,n,o]:a!=null&&s!=null&&n!=null&&(r=[a,s,n])}return!r&&t>=3&&(r=[0,1,2]),r}function IRe(e){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=r.name.toLowerCase();if(s==="red")t.red=i;else if(s==="green")t.green=i;else if(s==="blue")t.blue=i;else if(s==="nearinfrared"||s==="nearinfrared_1"||s==="nir")t.nir=i;else if(r.maxWavelength&&r.minWavelength){const n=r.minWavelength,o=r.maxWavelength;t.blue==null&&n>=410&&n<=480&&o>=480&&o<=540?t.blue=i:t.green==null&&n>=490&&n<=560&&o>=560&&o<=610?t.green=i:t.red==null&&n>=595&&n<=670&&o>=660&&o<=730?t.red=i:t.nir==null&&n>=700&&n<=860&&o>=800&&o<=950&&(t.nir=i)}}return t}function ARe(e){let t="percent-clip";const{pixelType:i,dataType:r,histograms:s,statistics:n,multidimensionalInfo:o}=e,a=Toe.has(r)||r==="generic"&&o!=null;return i!=="u8"||r!=="processed"&&s!=null&&n!=null?i==="u8"||r==="elevation"||a?t="min-max":s!=null?t="percent-clip":n!=null&&(t="min-max"):t="none",t}function $Re(e,t,i,r){if(!O9(e,t))return null;const{attributeTable:s,statistics:n}=e,o=Moe(s,t),a=o2(s,"red"),l=o2(s,"green"),u=o2(s,"blue"),h=new ax,p=[],f=new Set,m=!!(a&&l&&u);if(s!=null)s.features.forEach(g=>{const b=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&b!=null){f.add(b);const w=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!s.features.some(T=>T.attributes[a.name]>1||T.attributes[l.name]>1||T.attributes[u.name]>1),S=w?255:1;p.push(new Ey({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:new bc({style:"solid",outline:null,color:new Oe(m?[g.attributes[a.name]*S,g.attributes[l.name]*S,g.attributes[u.name]*S,1]:[0,0,0,0])})}))}});else if(n?.[0])for(let g=n[0].min;g<=n[0].max;g++)p.push(new Ey({value:g,label:g.toString(),symbol:new bc({style:"solid",outline:null,color:new Oe([0,0,0,0])})}));if(p.sort((g,b)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>b.value?1:-1),!m){const g=x1(Bq,{numColors:p.length});p.forEach((b,w)=>b.symbol.color=new Oe(g[w].slice(1,4))),h.colorRamp=Bq}return new fb({field:o.name,uniqueValueInfos:p,authoringInfo:h})}function Moe(e,t,i){let r;return e!=null?(r=t?e.fields.find(s=>t.toLowerCase()===s.name.toLowerCase()):CRe(e.fields),r||(i||(r=e.fields.find(s=>s.type==="string")),r||(r=o2(e,"value")))):r=new na({name:"value"}),r}function CRe(e){let t;for(let i=0;i<e.length;i++){const r=e[i].name.toLowerCase();if(e[i].type==="string"){if(r.startsWith("class")){t=e[i];break}t==null&&(r.endsWith("name")||r.endsWith("type"))&&(t=e[i])}}return t}function o2(e,t){return e==null?null:e.fields.find(i=>i.name.toLowerCase()===t)}function RRe(e){if(!P9(e))return null;let t;const{attributeTable:i,colormap:r}=e;if(i!=null){const s=o2(i,"value"),n=Moe(i,null,!0);n.type==="string"&&(t={},i.features.forEach(o=>{const a=o.attributes;t[a[s.name]]=n?a[n.name]:a[s.name]}))}return v9.createFromColormap(r,t)}const ORe=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function PRe(e){if(!L9(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:s,maxMagnitude:n}=NRe(e.dataType,e.statistics);t=[new vf({field:"Magnitude",minSize:10,maxSize:40,minDataValue:s,maxDataValue:n})]}const i=e.multidimensionalInfo!=null?ORe.get(e.multidimensionalInfo.variables[0].unit):void 0,r=new T9({visualVariables:t,inputUnit:i,rotationType:"geographic"});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function qq(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function LRe(e){if(e.type==="uniqueValue"){const t=e.uniqueValueInfos;return t?.[0].symbol?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(r=>({value:r.value,label:r.label,symbol:r.symbol?qq(r.symbol):null}))),e}if(e.type==="classBreaks"){const t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(r=>({classMinValue:r.classMinValue,classMaxValue:r.classMaxValue,label:r.label,symbol:r.symbol?qq(r.symbol):null}))),e}return e}function NRe(e,t){let i,r;if(e==="vector-magdir")i=t[0].min,r=t[0].max;else{const s=t[0].min,n=t[0].max,o=t[1].min,a=t[1].max;i=0,r=Math.max(Math.abs(s),Math.abs(o),Math.abs(n),Math.abs(a))}return{minMagnitude:i,maxMagnitude:r}}const z4=1;function Ioe(e,t=256){t=Math.min(t,256);const{size:i,counts:r}=e,s=new Uint8Array(i),n=r.reduce((h,p)=>h+p/t,0);let o=0,a=0,l=0,u=n;for(let h=0;h<i;h++)if(l+=r[h],!(h<i-1&&l+r[h+1]<u)){for(;o<t-1&&u<l;)o++,u+=n;for(let p=a;p<=h;p++)s[p]=o;a=h+1}for(let h=a;h<i;h++)s[h]=t-1;return s}function Hq(e){const{minCutOff:t,maxCutOff:i,gamma:r,pixelType:s,rounding:n}=e,o=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(s))return null;const l=t.length;let u,h,p=0;s==="s8"?p=-127:s==="s16"&&(p=-32767);let f=256;["u16","s16"].includes(s)&&(f=65536);const m=[],g=[],b=a-o;for(u=0;u<l;u++)g[u]=i[u]-t[u],m[u]=g[u]===0?0:b/g[u];let w;const S=[];let T,x,_;if(r&&r.length>=l){const M=Aoe(l,r);for(u=0;u<l;u++){for(_=[],h=0;h<f;h++)if(g[u]!==0)if(T=h+p,w=(T-t[u])/g[u],x=1,r[u]>1&&(x-=(1/b)**(w*M[u])),T<i[u]&&T>t[u]){const I=x*b*w**(1/r[u])+o;_[h]=n==="floor"?Math.floor(I):n==="round"?Math.round(I):I}else T>=i[u]?_[h]=a:_[h]=o;else _[h]=o;S[u]=_}}else for(u=0;u<l;u++){for(_=[],h=0;h<f;h++)if(T=h+p,T<=t[u])_[h]=o;else if(T>=i[u])_[h]=a;else{const M=(T-t[u])*m[u]+o;_[h]=n==="floor"?Math.floor(M):n==="round"?Math.round(M):M}S[u]=_}if(e.contrastOffset!=null){const M=kRe(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(_=S[u],h=0;h<f;h++)_[h]=M[_[h]]}return{lut:S,offset:p}}function kRe(e,t){const i=Math.min(Math.max(e,-100),100),r=Math.min(Math.max(t??0,-100),100),s=255,n=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)i>0&&i<100?a=(200*o-100*s+2*s*r)/(2*(100-i))+n:i<=0&&i>-100?a=(200*o-100*s+2*s*r)*(100+i)/2e4+n:i===100?(a=200*o-100*s+(s+1)*(100-i)+2*s*r,a=a>0?s:0):i===-100&&(a=n),l[o]=a>s?s:a<0?0:a;return l}function DRe(e,t,i){const r=[];for(let s=0;s<t.length;s++){let n=0,o=0,a=0;"min"in t[s]?{min:n,max:o,avg:a}=t[s]:[n,o,a]=t[s];let l=a??0;e!=="u8"&&(l=255*(l-n)/(o-n)),r.push(FRe(l))}return r}function FRe(e){if(e<=0||e>=255)return z4;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const i=255,r=e+t,s=Math.log(e/i),n=Math.log(r/i);if(n===0)return z4;const o=s/n;return isNaN(o)?z4:Math.min(9.9,Math.max(.01,o))}function jRe(e,t,i,r){let s=1/0,n=-1/0,o=0,a=0,l=0,u=0;const h=e.length,p=new Map,f=[];for(let A=0;A<h;A++){const C=e[A];if(!t||t[A]){f.push(C);const R=(p.get(C)??0)+1;p.set(C,R),R>u&&(u=R,l=C),s=C<s?C:s,n=C>n?C:n,o+=C,a++}}if(a===0)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const m=o/a;let g=0;for(let A=0;A<h;A++)t&&!t[A]||(g+=(e[A]-m)**2);const b=t?t.filter(A=>A).length:h,w=b<=1?0:Math.sqrt(g/(b-1));f.sort((A,C)=>A-C);const S=a>>>1,T={min:s,max:n,avg:m,stddev:w,mode:l,median:a%2?f[Math.floor(S)]:(f[S-1]+f[S])/2};if(["u8","s8","u4","u2","u1"].includes(i)){const A=n-s+1,C=new Uint32Array(A);for(let R=0;R<h;R++)t&&!t[R]||C[e[R]-s]++;return{statistics:T,histogram:{min:s-.5,max:n+.5,size:A,counts:C}}}const x=256,_=new Uint32Array(x),M=(n-s)/x;if(M===0)return{statistics:T,histogram:{min:s,max:n,size:1,counts:new Uint32Array(1).fill(a)}};const I=new Uint32Array(x+1);for(let A=0;A<h;A++)t&&!t[A]||I[Math.floor((e[A]-s)/M)]++;for(let A=0;A<x-1;A++)_[A]=I[A];return _[x-1]=I[x-1]+I[x],{statistics:T,histogram:{min:s,max:n,size:x,counts:_}}}function Lft(e){const{pixels:t,mask:i,pixelType:r,bandMasks:s}=e,n=t.map((o,a)=>jRe(o,s?.[a]??i,r));return{statistics:n.map(({statistics:o})=>o),histograms:n.map(({histogram:o})=>o)}}function URe(e){if(!e?.pixels?.length)return null;const{pixels:t,mask:i,bandMasks:r,pixelType:s}=e,n=e.width*e.height,o=t.length,a=[],l=[],u=256;let h,p,f,m;for(let g=0;g<o;g++){f=new Uint32Array(u);const b=t[g],w=r?.[g]??i;if(s==="u8"){if(h=255,p=0,w){for(let k=0;k<n;k++)if(w[k]){const L=b[k];h=L<h?L:h,p=L>p?L:p,f[L]++}}else for(let k=0;k<n;k++){const L=b[k];h=L<h?L:h,p=L>p?L:p,f[L]++}f=f.slice(h,p+1)}else{let k=!1;e.statistics||(e.updateStatistics(),k=!0);const L=e.statistics;h=L[g].minValue,p=L[g].maxValue;const V=(p-h)/u;if(V===0){!L||e.validPixelCount||k||e.updateStatistics();const J=(e.validPixelCount||e.width*e.height)/u;for(let y=0;y<u;y++)f[y]=Math.round(J*(y+1))-Math.round(J*y)}else{m=new Uint32Array(u+1);for(let J=0;J<n;J++)w&&!w[J]||m[Math.floor((b[J]-h)/V)]++;for(let J=0;J<u-1;J++)f[J]=m[J];f[u-1]=m[u-1]+m[u]}}const S=s==="u8"?h-.5:h,T=s==="u8"?p+.5:p;a.push({min:S,max:T,size:f.length,counts:f});let x=0,_=0,M=0;for(let k=0;k<f.length;k++)x+=f[k],_+=k*f[k];const I=_/x;for(let k=0;k<f.length;k++)M+=f[k]*(k-I)**2;const A=Math.sqrt(M/(x-1)),C=(T-S)/f.length,R=(I+(s==="u8"?0:.5))*C+h,O=A*C;l.push({min:h,max:p,avg:R,stddev:O})}return{statistics:l,histograms:a}}function Nft(e){const t=[];for(let i=0;i<e.length;i++){const{min:r,max:s,size:n,counts:o}=e[i];let a=0,l=0;for(let g=0;g<n;g++)a+=o[g],l+=g*o[g];const u=l/a;let h=0;for(let g=0;g<n;g++)h+=o[g]*(g-u)**2;const p=(s-r)/n,f=(u+.5)*p+r,m=Math.sqrt(h/(a-1))*p;t.push({min:r,max:s,avg:f,stddev:m})}return t}function Zb(e,t){const{pixelBlock:i,bandIds:r,returnHistogramLut:s,rasterInfo:n}=t;let o=null,a=null,l=e.stretchType;if(typeof l=="number"&&(l=Gne[l]),e.dra)if(l==="minMax"&&i?.statistics)o=i.statistics.map(O=>[O.minValue,O.maxValue,0,0]);else{const O=URe(i);o=O!=null?O.statistics:null,a=O!=null?O.histograms:null}else o=e.statistics?.length?e.statistics:n.statistics,a="histograms"in e?e.histograms:void 0,a||(a=n.histograms);l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||n.bandCount,h=[],p=[];let f,m,g,b,w,S,T,x,_;o&&!Array.isArray(o[0])&&(o=o.map(O=>[O.min,O.max,O.avg,O.stddev]));const[M,I]=Eg(n.pixelType);if(!o?.length){for(o=[],x=0;x<u;x++)o.push([M,I,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(x=0;x<u;x++)h[x]=M,p[x]=I;break;case"minMax":for(x=0;x<u;x++){const O=o[x];h[x]=O[0],p[x]=O[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:O=2}=e;for(x=0;x<u;x++){const k=o[x];h[x]=k[2]-O*k[3],p[x]=k[2]+O*k[3],h[x]<k[0]&&(h[x]=k[0]),p[x]>k[1]&&(p[x]=k[1])}}break;case"histogramEqualization":for(jd(a),x=0;x<u;x++)h[x]=a[x].min,p[x]=a[x].max;break;case"percentClip":for(jd(a),x=0;x<a.length;x++){for(f=a[x],w=new Uint32Array(f.size),b=[...f.counts],b.length>=20&&(b[0]=b[1]=b[2]=b[b.length-1]=b[b.length-2]=0),g=0,m=(f.max-f.min)/f.size,T=f.min===-.5&&m===1?.5:0,_=0;_<f.size;_++)g+=b[_],w[_]=g;for(S=(e.minPercent||0)*g/100,h[x]=f.min+T,_=0;_<f.size;_++)if(w[_]>S){h[x]=f.min+m*(_+T);break}for(S=(1-(e.maxPercent||0)/100)*g,p[x]=f.max+T,_=f.size-2;_>=0;_--)if(w[_]<S){p[x]=f.min+m*(_+2-T);break}if(p[x]<h[x]){const O=h[x];h[x]=p[x],p[x]=O}}break;default:for(x=0;x<u;x++){const O=o[x];h[x]=O[0],p[x]=O[1]}}let A,C,R;return l==="histogramEqualization"?(jd(a),C=a[0].size||256,A=0,s&&(R=a.map(O=>Ioe(O)))):(C=e.max||255,A=e.min||0),VRe({minCutOff:h,maxCutOff:p,outMax:C,outMin:A,histogramLut:R},r)}function VRe(e,t){if(t==null||t.length===0)return e;const i=Math.max.apply(null,t),{minCutOff:r,maxCutOff:s,outMin:n,outMax:o,histogramLut:a}=e;return r.length===t.length||r.length<=i?e:{minCutOff:t.map(l=>r[l]),maxCutOff:t.map(l=>s[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:n,outMax:o}}function Aoe(e,t){const i=new Float32Array(e);for(let r=0;r<e;r++)t[r]>1?t[r]>2?i[r]=6.5+(t[r]-2)**2.5:i[r]=6.5+100*(2-t[r])**4:i[r]=1;return i}function q4(e,t){if(!e?.pixels?.length)return e;const{mask:i,bandMasks:r,width:s,height:n,pixels:o}=e,{minCutOff:a,maxCutOff:l,gamma:u}=t,h=t.outMin||0,p=t.outMax||255,f=s*n,m=t.outputPixelType||"u8",g=e.pixels.map(()=>At.createEmptyBand(m,f)),b=g.length,w=p-h,S=[],T=[];for(let A=0;A<b;A++)T[A]=l[A]-a[A],S[A]=T[A]===0?0:w/T[A];const x=m.startsWith("u")||m.startsWith("s"),_=u&&u.length>=b,M=!!t.isRenderer;if(_){const A=Aoe(b,u);for(let C=0;C<b;C++){const R=r?.[C]??i;for(let O=0;O<f;O++)if(R==null||R[O]){if(T[C]===0){g[C][O]=h;continue}const k=o[C][O],L=(k-a[C])/T[C];let V=1;if(u[C]>1&&(V-=(1/w)**(L*A[C])),k<l[C]&&k>a[C]){const J=V*w*L**(1/u[C])+h;g[C][O]=M?Math.floor(J):x?Math.round(J):J}else k>=l[C]?g[C][O]=p:g[C][O]=h}}}else for(let A=0;A<b;A++){const C=r?.[A]??i;for(let R=0;R<f;R++)if(C==null||C[R]){const O=o[A][R];if(O<l[A]&&O>a[A]){const k=(O-a[A])*S[A]+h;g[A][R]=M?Math.floor(k):x?Math.round(k):k}else O>=l[A]?g[A][R]=p:g[A][R]=h}}const I=new At({width:s,height:n,mask:i,bandMasks:r,pixels:g,pixelType:m});return I.updateStatistics(),I}const Mn=1,cv=1/111e3;function $oe(e){let{altitude:t,azimuth:i}=e;const{hillshadeType:r,pixelSizePower:s=1,pixelSizeFactor:n=1,scalingType:o,isGCS:a,resolution:l}=e,u=r==="multi-directional"?2*e.zFactor:e.zFactor,{x:h,y:p}=l;let f=u/(8*h),m=u/(8*p);if(a&&u>.001&&(f/=cv,m/=cv),o==="adjusted")if(a){const L=h*cv,V=p*cv;f=(u+L**s*n)/(8*L),m=(u+V**s*n)/(8*V)}else f=(u+h**s*n)/(8*h),m=(u+p**s*n)/(8*p);let g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-i+90)*Math.PI/180,S=Math.sin(g)*Math.cos(w),T=Math.sin(g)*Math.sin(w);const x=[315,270,225,360,180,0],_=[60,60,60,60,60,90],M=new Float32Array([3,5,3,2,1,4]),I=M.reduce((L,V)=>L+V),A=M.map(L=>L/I),C=r==="multi-directional"?x.length:1,R=new Float32Array(6),O=new Float32Array(6),k=new Float32Array(6);if(r==="multi-directional")for(let L=0;L<C;L++)t=_[L],i=x[L],g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-i+90)*Math.PI/180,S=Math.sin(g)*Math.cos(w),T=Math.sin(g)*Math.sin(w),R[L]=b,O[L]=S,k[L]=T;else R.fill(b),O.fill(S),k.fill(T);return{resolution:l,factor:[f,m],sinZcosA:S,sinZsinA:T,cosZ:b,sinZcosAs:O,sinZsinAs:k,cosZs:R,weights:A,hillshadeType:["traditional","multi-directional"].indexOf(r)}}function bC(e,t){const{width:i,height:r}=e,s=i*r,n=new Uint8Array(s),o=e.mask!=null;let a;if(o){a=new Uint8Array(e.mask);for(let I=0;I<a.length;I++)a[I]&&(n[I]=1,a[I]=1)}const l=e.pixels[0],u=new Float32Array(s),h=new Float32Array(s);let p,f=0;if(t){const{resolution:I}=t,A=I?(I.x+I.y)/2:1;f=200*t.zFactor/(A*A),p=new Float32Array(s)}const m=t?.curvatureType;let g,b,w,S,T,x,_,M;for(let I=Mn;I<r-Mn;I++){const A=I*i;for(let C=Mn;C<i-Mn;C++){const R=A+C;if(!a||a[R]!==0){if(a){if(a[R-i-1]+a[R-i]+a[R-i+1]+a[R-1]+a[R+1]+a[R+i-1]+a[R+i]+a[R+i+1]<7){n[R]=0;continue}g=a[R-i-1]?l[R-i-1]:l[R],b=a[R-i]?l[R-i]:l[R],w=a[R-i+1]?l[R-i+1]:l[R],S=a[R-1]?l[R-1]:l[R],T=a[R+1]?l[R+1]:l[R],x=a[R+i-1]?l[R+i-1]:l[R],_=a[R+i]?l[R+i]:l[R],M=a[R+i+1]?l[R+i+1]:l[R]}else g=l[R-i-1],b=l[R-i],w=l[R-i+1],S=l[R-1],T=l[R+1],x=l[R+i-1],_=l[R+i],M=l[R+i+1];if(u[R]=w+T+T+M-(g+S+S+x),h[R]=x+_+_+M-(g+b+b+w),p!=null){const O=l[R],k=.5*(S+T)-O,L=.5*(b+_)-O;if(m==="standard")p[R]=-f*(k+L);else{const V=(-g+w+x-M)/4,J=(-S+T)/2,y=(b-_)/2,E=J*J,$=y*y,P=E+$;P&&(p[R]=m==="profile"?f*(k*E+L*$+V*J*y)/P:-f*(k*$+L*E-V*J*y)/P)}}}}}return{outMask:o?n:null,dzxs:u,dzys:h,curvatures:p}}function wC(e,t,i){for(let r=0;r<i;r++)e[r*t]=e[r*t+1],e[(r+1)*t-1]=e[(r+1)*t-2];for(let r=1;r<t-1;r++)e[r]=e[r+t],e[r+(i-1)*t]=e[r+(i-2)*t]}function GRe(e,t){if(!Pi(e))return e;const{factor:i,sinZcosA:r,sinZsinA:s,cosZ:n,sinZcosAs:o,sinZsinAs:a,cosZs:l,weights:u}=$oe(t),[h,p]=i,f=t.hillshadeType==="traditional",{width:m,height:g}=e,b=new Uint8Array(m*g),{dzxs:w,dzys:S,outMask:T}=bC(e);for(let x=Mn;x<g-Mn;x++){const _=x*m;for(let M=Mn;M<m-Mn;M++){const I=_+M;if(!T||T[I]){const A=w[I]*h,C=S[I]*p,R=Math.sqrt(1+A*A+C*C);let O=0;if(f){let k=255*(n+s*C-r*A)/R;k<0&&(k=0),O=k}else{const k=a.length;for(let L=0;L<k;L++){let V=255*(l[L]+a[L]*C-o[L]*A)/R;V<0&&(V=0),O+=V*u[L]}}b[I]=255&O}}}return wC(b,m,g),new At({width:m,height:g,pixels:[b],mask:T,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[new vx(0,255)]})}function BRe(e,t,i,r){if(!Pi(e)||!Pi(t))return;const{min:s,max:n}=r,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],h=255.00001/(n-s),p=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=i.length-1;for(let b=0;b<u.length;b++){if(l&&l[b]===0)continue;const w=Math.floor((u[b]-s)*h),[S,T]=i[w<0?0:w>g?g:w],x=o[b],_=x*T,M=_*(1-Math.abs(S%2-1)),I=x-_;switch(Math.floor(S)){case 0:p[b]=_+I,f[b]=M+I,m[b]=I;break;case 1:p[b]=M+I,f[b]=_+I,m[b]=I;break;case 2:p[b]=I,f[b]=_+I,m[b]=M+I;break;case 3:p[b]=I,f[b]=M+I,m[b]=_+I;break;case 4:p[b]=M+I,f[b]=I,m[b]=_+I;break;case 5:case 6:p[b]=_+I,f[b]=I,m[b]=M+I}}e.pixels=[p,f,m],e.updateStatistics()}function kft(e,t){if(!Pi(e))return e;const i=t.zFactor,r=t.pixelSizePower??1,s=t.pixelSizeFactor??1,n=t.slopeType,o=t.isGCS,{x:a,y:l}=t.resolution;let u=i/(8*a),h=i/(8*l);o&&Math.abs(i-1)<1e-4&&(u/=cv,h/=cv),n==="adjusted"&&(u=(i+a**r*s)/(8*a),h=(i+l**r*s)/(8*l));const{dzxs:p,dzys:f,outMask:m}=bC(e),{width:g,height:b}=e,w=new Float32Array(g*b);for(let T=Mn;T<b-Mn;T++){const x=T*g;for(let _=Mn;_<g-Mn;_++){const M=x+_;if(!m||m[M]){const I=p[M]*u,A=f[M]*h,C=Math.sqrt(I*I+A*A);w[x+_]=n==="percent-rise"?100*C:57.2957795*Math.atan(C)}}}wC(w,g,b);const S=new At({width:g,height:b,pixels:[w],mask:m,pixelType:"f32",validPixelCount:e.validPixelCount});return S.updateStatistics(),S}function Dft(e,t={}){if(!Pi(e))return e;const{resolution:i}=t,r=i?1/i.x:1,s=i?1/i.y:1,{dzxs:n,dzys:o,outMask:a}=bC(e),{width:l,height:u}=e,h=new Float32Array(l*u);for(let p=Mn;p<u-Mn;p++){const f=p*l;for(let m=Mn;m<l-Mn;m++){const g=f+m;if(!a||a[g]){const b=n[g]*r,w=o[g]*s;let S=-1;b===0&&w===0||(S=90-57.29578*Math.atan2(w,-b),S<0&&(S+=360),S===360?S=0:S>360&&(S%=360)),h[f+m]=S}}}return wC(h,l,u),new At({width:l,height:u,pixels:[h],mask:a,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[new vx(-1,360)]})}function Fft(e,t){if(!Pi(e))return e;const{curvatures:i,outMask:r}=bC(e,t),{width:s,height:n}=e;wC(i,s,n);const o=new At({width:s,height:n,pixels:[i],mask:r,pixelType:"f32",validPixelCount:e.validPixelCount});return o.updateStatistics(),o}function jft(e,t,i){const{hillshadeType:r,altitude:s,azimuth:n,zFactor:o,pixelSizeFactor:a,pixelSizePower:l,slopeType:u}=e;return{hillshadeType:r,altitude:s,azimuth:n,zFactor:o,pixelSizePower:l,pixelSizeFactor:a,scalingType:u==="scaled"?"adjusted":"none",resolution:t,isGCS:i}}let Vm=class extends ae{constructor(t){super(t)}bind(){const{rendererJSON:t}=this;if(!t)return{success:!1};let i;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":i=this._updateUVRenderer(t);break;case"rasterColormap":i=this._updateColormapRenderer(t);break;case"rasterStretch":i=this._updateStretchRenderer(t);break;case"classBreaks":i=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":i=this._updateShadedReliefRenderer(t);break;case"vectorField":i=this._updateVectorFieldRenderer();break;case"flowRenderer":i=this._updateFlowRenderer()}return i}symbolize(t){let i=t?.pixelBlock;if(!Wq(i))return i;if(t.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(i,t.simpleStretchParams);try{let r;switch(i.pixels.length>3&&(i=i.extractBands(t.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(i);break;case"classBreaks":r=this._symbolizeClassBreaks(i);break;case"rasterStretch":r=this._symbolizeStretch(i,t.bandIds);break;case"rasterShadedRelief":{const s=t.extent,n=s.spatialReference.isGeographic,o={x:(s.xmax-s.xmin)/i.width,y:(s.ymax-s.ymin)/i.height};r=this._symbolizeShadedRelief(i,{isGCS:n,resolution:o});break}}return r}catch(r){return xe.getLogger(this).error("symbolize",r.message),i}}simpleStretch(t,i){if(!Wq(t))return t;try{return t.pixels.length>3&&(t=t.extractBands([0,1,2])),q4(t,{...i,isRenderer:!0})}catch(r){return xe.getLogger(this).error("symbolize",r.message),t}}generateWebGLParameters(t){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:a,offset:l}=this.lookup.colormapLut||{};return{colormap:a,colormapOffset:l,isClassBreaks:this.rendererJSON.type==="classBreaks",type:"lut"}}const{pixelBlock:i,isGCS:r,resolution:s,bandIds:n}=t,{rendererJSON:o}=this;return o.type==="rasterStretch"?this._generateStretchWebGLParams(i,o,n):o.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(o,r,s??void 0):o.type==="vectorField"?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(t){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const i=this.rendererJSON.colorRamp;return t?JSON.stringify(i)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(t){return this._isLUTChanged()&&!this.bind().success?t:N4(t,this.lookup.colormapLut)}_symbolizeClassBreaks(t){const{canUseIndexedLUT:i}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?t:i?N4(t,this.lookup.colormapLut):b5e(t,this.lookup.remapLut??[])}_symbolizeStretch(t,i){const{rasterInfo:r}=this,{pixelType:s,bandCount:n}=r,o=this.rendererJSON,a=["u8","u16","s8","s16"].includes(s);let l,u;const{dra:h}=o,{gamma:p}=this.lookup;if(o.stretchType==="histogramEqualization"){const f=h?null:this.lookup?.histogramLut,m=Zb(o,{rasterInfo:r,pixelBlock:t,bandIds:i,returnHistogramLut:!f}),g=q4(t,{...m,gamma:p,isRenderer:!0});u=wq(g,{lut:h?m.histogramLut:f,offset:0})}else if(a){if(h){const f=Zb(o,{rasterInfo:r,pixelBlock:t,bandIds:i});l=Hq({pixelType:s,...f,gamma:p,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return t;l=this.lookup?this.lookup.stretchLut:null}else l=this.lookup?this.lookup.stretchLut:null;if(!l)return t;n>1&&i!=null&&i.length===t?.pixels.length&&l?.lut.length===n&&(l={lut:i.map(f=>l.lut[f]),offset:l.offset}),u=wq(t,l)}else{const f=Zb(o,{rasterInfo:r,pixelBlock:t,bandIds:i});u=q4(t,{...f,gamma:p,isRenderer:!0})}if(o.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return t;u=N4(u,this.lookup?.colormapLut)}return u}_symbolizeShadedRelief(t,i){const r=this.rendererJSON,s={...r,...i},n=GRe(t,s);if(!r.colorRamp)return n;let o;if(this._isLUTChanged(!0)){if(!this.bind().success)return n;o=this.lookup?this.lookup.hsvMap:null}else o=this.lookup?this.lookup.hsvMap:null;if(!o)return n;const a=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return BRe(n,t,o,a),n}_isVectorFieldData(){const{bandCount:t,dataType:i}=this.rasterInfo;return t===2&&(i==="vector-magdir"||i==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(t){const{bandCount:i,attributeTable:r,pixelType:s}=this.rasterInfo,n=t.field1;if(!n)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const o=t.defaultSymbol,a=i===1&&["u8","s8"].includes(s);if(!O9(this.rasterInfo,n)&&!a)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const l=[];if(r!=null){const h=r.fields.find(p=>p.name.toLowerCase()==="value");if(!h)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(p=>{const f=t.uniqueValueInfos?.find(g=>String(g.value)===String(p.attributes[n])),m=f?.symbol?.color;m?l.push([p.attributes[h.name]].concat(m)):o&&l.push([p.attributes[h.name]].concat(o.color))})}else{if(n.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};t.uniqueValueInfos?.forEach(h=>{const p=h?.symbol?.color;p?l.push([parseInt(""+h.value,10)].concat(p)):o&&l.push([parseInt(""+h.value,10)].concat(o?.color))})}if(l.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const u=qb({colormap:l});return this.lookup={rendererJSON:t,colormapLut:u},this.canRenderInWebGL=B4(u?.indexedColormap),{success:!0}}_updateColormapRenderer(t){if(!P9(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const i=t.colormapInfos.map(s=>[s.value].concat(s.color)).sort((s,n)=>s[0]-n[0]);if(!i||i.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=qb({colormap:i});return this.lookup={rendererJSON:t,colormapLut:r},this.canRenderInWebGL=B4(r?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(t){if(!xoe(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(t.colorRamp){const i=x1(t.colorRamp,{interpolateAlpha:!0}),r=qb({colormap:i}),s=QCe(r.indexedColormap);this.lookup={rendererJSON:t,colormapLut:r,hsvMap:s}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(t){const{attributeTable:i,pixelType:r}=this.rasterInfo,s=i!=null?i.fields.find(a=>a.name.toLowerCase()==="value"):null,n=i!=null?i.fields.find(a=>a.name.toLowerCase()===t.field.toLowerCase()):null,o=s!=null&&n!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||o,tableValueField:s,tableBreakField:n}}_updateClassBreaksRenderer(t){const{attributeTable:i}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:s,tableBreakField:n}=this._analyzeClassBreaks(t),o=t.classBreakInfos;if(!o?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const a=o.sort((f,m)=>f.classMaxValue-m.classMaxValue),l=a[a.length-1];let u=t.minValue;if(!r){const f=[];for(let m=0;m<a.length;m++)f.push({value:a[m].classMinValue??u,mappedColor:a[m].symbol.color}),u=a[m].classMaxValue;return f.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:t,remapLut:f},this.canRenderInWebGL=!1,{success:!0}}const h=[];if(i!=null&&s!=null&&n!==null&&s!==n){const f=s.name,m=n.name,g=a[a.length-1],{classMaxValue:b}=g;u=t.minValue;for(const w of i.features){const S=w.attributes[f],T=w.attributes[m],x=T===b?g:T<u?null:a.find(({classMaxValue:_})=>_>T);x&&h.push([S].concat(x.symbol.color))}}else{u=Math.floor(t.minValue);for(let f=0;f<a.length;f++){const m=a[f];for(let g=u;g<m.classMaxValue;g++)h.push([g].concat(m.symbol.color));u=Math.ceil(m.classMaxValue)}l.classMaxValue===u&&h.push([l.classMaxValue].concat(l.symbol.color))}const p=qb({colormap:h,fillUnspecified:!1});return this.lookup={rendererJSON:t,colormapLut:p},this.canRenderInWebGL=B4(p?.indexedColormap),{success:!0}}_updateStretchRenderer(t){let{stretchType:i,dra:r}=t;if(!(i==="none"||t.statistics?.length||HRe(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const s=t.histograms||this.rasterInfo.histograms;!qRe(t.stretchType)||s?.length||r||(i="minMax");const{computeGamma:n,useGamma:o,colorRamp:a}=t;let{gamma:l}=t;if(o&&n&&!l?.length){const p=t.statistics?.length?t.statistics:this.rasterInfo.statistics;l=DRe(this.rasterInfo.pixelType,p)}const u=this.rasterInfo.pixelType,h=!r&&["u8","u16","s8","s16"].includes(u);if(i==="histogramEqualization"){const p=s.map(f=>Ioe(f));this.lookup={rendererJSON:t,histogramLut:p}}else if(h){const p=Zb(t,{rasterInfo:this.rasterInfo}),f=Hq({pixelType:u,...p,gamma:o?l:null,rounding:"floor"});this.lookup={rendererJSON:t,stretchLut:f}}if(a&&!WRe(a)){const p=x1(a,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:t}),this.lookup.colormapLut=qb({colormap:p}),this.lookup.rendererJSON=t}return this.lookup.gamma=o&&l?.length?l:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(t,i,r){let s=null,n=null;const o=this.lookup?.colormapLut;i.colorRamp&&o&&(s=o.indexedColormap,n=o.offset),i.stretchType==="histogramEqualization"&&(i={...i,stretchType:"minMax"});const{gamma:a}=this.lookup,l=!(!i.useGamma||!a?.some(_=>_!==1)),{minCutOff:u,maxCutOff:h,outMin:p,outMax:f}=Zb(i,{rasterInfo:this.rasterInfo,pixelBlock:t,bandIds:r});let m=0;t!=null&&(m=t.getPlaneCount(),m===2&&((t=t.clone()).statistics=[t.statistics[0]],t.pixels=[t.pixels[0]]));const{bandCount:g}=this.rasterInfo,b=Math.min(3,r?.length||m||g,g),w=new Float32Array(b),S=s||l?1:255;let T;for(T=0;T<u.length;T++)w[T]=h[T]===u[T]?0:(f-p)/(h[T]-u[T])/S;const x=new Float32Array(b);if(l&&a)for(T=0;T<b;T++)a[T]>1?a[T]>2?x[T]=6.5+(a[T]-2)**2.5:x[T]=6.5+100*(2-a[T])**4:x[T]=1;return{bandCount:b,outMin:p/S,outMax:f/S,minCutOff:u,maxCutOff:h,factor:w,useGamma:l,gamma:l?a:[1,1,1],gammaCorrection:l?x:[1,1,1],colormap:s,colormapOffset:n,stretchType:i.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(t,i=!1,r={x:0,y:0}){let s=null,n=null;const o=this.lookup?.colormapLut;t.colorRamp&&o&&(s=o.indexedColormap,n=o.offset);const a={...t,isGCS:i,resolution:r},l=$oe(a),u=this.rasterInfo.statistics?.[0];return{...l,minValue:u?.min??0,maxValue:u?.max??8e3,hillshadeType:t.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:s,colormapOffset:n}}_generateVectorFieldWebGLParams(t){const{style:i,inputUnit:r,outputUnit:s,visualVariables:n,symbolTileSize:o,flowRepresentation:a}=t;let l;const u=this.rasterInfo.statistics?.[0].min??0,h=this.rasterInfo.statistics?.[0].max??50,p=n?.find(T=>T.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:h,maxSize:.8*o,minDataValue:u,minSize:.2*o},f=p.minDataValue??u,m=p.maxDataValue??h,g=p.maxSize!=null&&p.minSize!=null?[p.minSize/o,p.maxSize/o]:[.2,.8];if(i==="wind_speed"){const T=(g[0]+g[1])/2;g[0]=g[1]=T}const b=f!=null&&m!=null?[f,m]:null;if(i==="classified_arrow")if(f!=null&&m!=null&&p!=null){l=[];const T=(p.maxDataValue-p.minDataValue)/5;for(let x=0;x<6;x++)l.push(p.minDataValue+T*x)}else l=[0,1e-6,3.5,7,10.5,14];const w=a==="flow_to"==(i==="ocean_current_kn"||i==="ocean_current_m")?0:Math.PI,S=n?.find(T=>T.type==="rotationInfo");return{breakValues:l,dataRange:b,inputUnit:r,outputUnit:s,symbolTileSize:o,symbolPercentRange:g,style:i||"single_arrow",rotation:w,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":S?.rotationType||t.rotationType,type:"vectorField"}}};c([d({json:{write:!0}})],Vm.prototype,"rendererJSON",void 0),c([d({type:yC,json:{write:!0}})],Vm.prototype,"rasterInfo",void 0),c([d({json:{write:!0}})],Vm.prototype,"lookup",void 0),c([d()],Vm.prototype,"canRenderInWebGL",void 0),Vm=c([F("esri.renderers.support.RasterSymbolizer")],Vm);const zRe=Vm;function qRe(e){return e==="percentClip"||e==="histogramEqualization"}function HRe(e){return e!=null&&e.length>0&&e[0].min!=null&&e[0].max!=null}function Wq(e){return Pi(e)&&e.validPixelCount!==0}function WRe(e){return e.type==="algorithmic"&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}let Xp=class extends Dt(ae){constructor(){super(...arguments),this.fromGeometry=null,this.toGeometry=null,this.objectIds=null,this.where=null,this.maxCount=null}};c([d({type:Ve,json:{read:!0}})],Xp.prototype,"fromGeometry",void 0),c([d({type:Ve,json:{read:!0,write:!0}})],Xp.prototype,"toGeometry",void 0),c([d({json:{write:!0}})],Xp.prototype,"objectIds",void 0),c([d({type:String,json:{write:!0}})],Xp.prototype,"where",void 0),c([d({type:Number,json:{write:!0}})],Xp.prototype,"maxCount",void 0),Xp=c([F("esri.rest.support.FindImagesParameters")],Xp);const JRe=Xp,Coe=e=>{let t=class extends e{constructor(){super(...arguments),this.make=null,this.model=null,this.focalLength=null,this.pixelSize=null,this.rows=null,this.cols=null}};return c([d({json:{write:!0}})],t.prototype,"make",void 0),c([d({json:{write:!0}})],t.prototype,"model",void 0),c([d({json:{write:!0}})],t.prototype,"focalLength",void 0),c([d({json:{write:!0}})],t.prototype,"pixelSize",void 0),c([d({json:{write:!0}})],t.prototype,"rows",void 0),c([d({json:{write:!0}})],t.prototype,"cols",void 0),t=c([F("esri.rest.support.CameraInfoMixin")],t),t};let Pl=class extends Coe(ae){constructor(){super(...arguments),this.id=null,this.referenceUri=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.perspectiveCenter=null,this.orientation=null}writeAcquisitionDate(t,i){i.acquisitionDate=t?.getTime()}};c([d({json:{write:!0}})],Pl.prototype,"id",void 0),c([d({json:{name:"uri",write:!0}})],Pl.prototype,"referenceUri",void 0),c([d({type:Date,json:{write:!0}})],Pl.prototype,"acquisitionDate",void 0),c([ge("acquisitionDate")],Pl.prototype,"writeAcquisitionDate",null),c([d({json:{write:!0}})],Pl.prototype,"cameraID",void 0),c([d({type:Ve,json:{write:!0}})],Pl.prototype,"center",void 0),c([d({type:Ve,json:{write:!0}})],Pl.prototype,"perspectiveCenter",void 0),c([d({json:{write:!0}})],Pl.prototype,"orientation",void 0),Pl=c([F("esri.rest.support.ImageInspectionInfo")],Pl);const ZRe=Pl;let KM=class extends ae{constructor(){super(...arguments),this.images=null}};c([d({type:[ZRe],json:{write:!0}})],KM.prototype,"images",void 0),KM=c([F("esri.rest.support.FindImagesResult")],KM);const YRe=KM;var Dk;let Gm=Dk=class extends ae{constructor(e){super(e),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new Dk(K({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};c([d({type:[String],json:{name:"angleName",write:!0}})],Gm.prototype,"angleNames",void 0),c([d({type:Ve,json:{write:!0}})],Gm.prototype,"point",void 0),c([d({type:ke,json:{write:!0}})],Gm.prototype,"spatialReference",void 0),c([d({type:vt,json:{write:!0}})],Gm.prototype,"rasterId",void 0),Gm=Dk=c([F("esri.rest.support.ImageAngleParameters")],Gm);const KRe=Gm;let L0=class extends ae{constructor(t){super(t),this.north=null,this.up=null,this.spatialReference=null}};c([d({type:Number,json:{write:!0}})],L0.prototype,"north",void 0),c([d({type:Number,json:{write:!0}})],L0.prototype,"up",void 0),c([d({type:ke,json:{write:!0}})],L0.prototype,"spatialReference",void 0),L0=c([F("esri.rest.support.ImageAngleResult")],L0);const XRe=L0,Ya=new gt({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let Vl=class extends ae{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.pixelSize=null,this.raster=void 0}};c([d()],Vl.prototype,"type",void 0),c([d({type:Ya.apiValues,json:{read:Ya.read,write:Ya.write}})],Vl.prototype,"measureOperation",void 0),c([d({type:aa,json:{write:!0}})],Vl.prototype,"mosaicRule",void 0),c([d({type:Ve,json:{write:!0}})],Vl.prototype,"pixelSize",void 0),c([d({json:{write:!0}})],Vl.prototype,"raster",void 0),Vl=c([F("esri.rest.support.BaseImageMeasureParameters")],Vl);var Fk;let ah=Fk=class extends Vl{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new Fk(K({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};c([d({types:cs,json:{name:"fromGeometry",read:!0,write:!0}})],ah.prototype,"geometry",void 0),c([ge("geometry")],ah.prototype,"writeGeometry",null),c([d({type:Ya.apiValues,json:{write:Ya.write}})],ah.prototype,"measureOperation",null),c([d({json:{read:!0}})],ah.prototype,"is3D",void 0),c([d({type:String,json:{read:tp.read,write:tp.write}})],ah.prototype,"linearUnit",void 0),c([d({type:String,json:{read:U2.read,write:U2.write}})],ah.prototype,"areaUnit",void 0),ah=Fk=c([F("esri.rest.support.ImageAreaParameters")],ah);const QRe=ah;let Id=class extends ae{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};c([d({type:Number,json:{read:!0,write:!0}})],Id.prototype,"value",void 0),c([d({type:String,json:{read:!0,write:!0}})],Id.prototype,"displayValue",void 0),c([d({type:Number,json:{read:!0,write:!0}})],Id.prototype,"uncertainty",void 0),Id=c([F("esri.rest.support.BaseImageMeasureResult.BaseImageMeasureResultValue")],Id);let Wv=class extends Id{constructor(){super(...arguments),this.unit=null}};c([d({type:String,json:{read:tp.read,write:tp.write}})],Wv.prototype,"unit",void 0),Wv=c([F("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultLengthValue")],Wv);let XM=class extends Id{constructor(){super(...arguments),this.unit=null}};c([d({type:String,json:{read:U2.read,write:U2.write}})],XM.prototype,"unit",void 0),XM=c([F("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAreaValue")],XM);let a2=class extends Id{constructor(){super(...arguments),this.unit=null}};c([d({type:String,json:{read:f3.read,write:f3.write}})],a2.prototype,"unit",void 0),a2=c([F("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAngleValue")],a2);let Nd=class extends ae{constructor(){super(...arguments),this.name=null,this.sensorName=null}};c([d({type:String,json:{read:!0,write:!0}})],Nd.prototype,"name",void 0),c([d({type:String,json:{read:!0,write:!0}})],Nd.prototype,"sensorName",void 0),Nd=c([F("esri.rest.support.BaseImageMeasureResult")],Nd);let d_=class extends Nd{constructor(){super(...arguments),this.area=null,this.perimeter=null}};c([d({type:XM,json:{read:!0,write:!0}})],d_.prototype,"area",void 0),c([d({type:Wv,json:{read:!0,write:!0}})],d_.prototype,"perimeter",void 0),d_=c([F("esri.rest.support.ImageAreaResult")],d_);const eOe=d_;let QM=class extends Dt(ae){constructor(){super(...arguments),this.outSpatialReference=null}};c([d({type:ke,json:{name:"outSR",write:!0}})],QM.prototype,"outSpatialReference",void 0),QM=c([F("esri.rest.support.ImageBoundaryParameters")],QM);const tOe=QM;let N0=class extends ae{constructor(){super(...arguments),this.area=null,this.geometry=null}readGeometry(t,i){return t==null?null:t.rings?Rs.fromJSON(t):bt.fromJSON(t)}};c([d({type:Number,json:{write:!0}})],N0.prototype,"area",void 0),c([d({json:{name:"shape",write:!0}})],N0.prototype,"geometry",void 0),c([ue("geometry")],N0.prototype,"readGeometry",null),N0=c([F("esri.rest.support.ImageBoundaryResult")],N0);const iOe=N0;var jk;let $u=jk=class extends Vl{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new jk(K({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};c([d({type:Ve,json:{read:!0,write:!0}})],$u.prototype,"fromGeometry",void 0),c([ge("fromGeometry")],$u.prototype,"writeFromGeometry",null),c([d({type:Ve,json:{read:!0,write:!0}})],$u.prototype,"toGeometry",void 0),c([d({type:Ya.apiValues,json:{write:Ya.write}})],$u.prototype,"measureOperation",null),c([d({json:{read:!0}})],$u.prototype,"is3D",void 0),c([d({type:String,json:{read:tp.read,write:tp.write}})],$u.prototype,"linearUnit",void 0),c([d({type:String,json:{read:f3.read,write:f3.write}})],$u.prototype,"angularUnit",void 0),$u=jk=c([F("esri.rest.support.ImageDistanceParameters")],$u);const rOe=$u;let k0=class extends Nd{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};c([d({type:Wv,json:{read:!0,write:!0}})],k0.prototype,"distance",void 0),c([d({type:a2,json:{read:!0,write:!0}})],k0.prototype,"azimuthAngle",void 0),c([d({type:a2,json:{read:!0,write:!0}})],k0.prototype,"elevationAngle",void 0),k0=c([F("esri.rest.support.ImageDistanceResult")],k0);const sOe=k0;let lh=class extends Dt(ae){constructor(){super(...arguments),this.geometry=null,this.objectIds=null,this.spatialRelationship="intersects",this.timeExtent=null,this.where=null}writeGeometry(t,i,r){t!=null&&(i.geometryType=Pn(t),i[r]=JSON.stringify(t.toJSON()))}};c([d({types:cs,json:{read:or,write:!0}})],lh.prototype,"geometry",void 0),c([ge("geometry")],lh.prototype,"writeGeometry",null),c([d({json:{write:!0}})],lh.prototype,"objectIds",void 0),c([Ue(X8,{ignoreUnknown:!1,name:"spatialRel"})],lh.prototype,"spatialRelationship",void 0),c([d({type:io,json:{name:"time",write:!0}})],lh.prototype,"timeExtent",void 0),c([d({type:String,json:{write:!0}})],lh.prototype,"where",void 0),lh=c([F("esri.rest.support.ImageGPSInfoParameters")],lh);const nOe=lh;let eI=class extends Coe(ae){constructor(){super(...arguments),this.id=null}};c([d({json:{write:!0}})],eI.prototype,"id",void 0),eI=c([F("esri.rest.support.CameraInfo")],eI);const oOe=eI;let Ll=class extends ae{constructor(){super(...arguments),this.id=null,this.name=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.gps=null,this.orientation=null}writeAcquisitionDate(t,i){i.acquisitionDate=t?.getTime()}};c([d({json:{write:!0}})],Ll.prototype,"id",void 0),c([d({json:{write:!0}})],Ll.prototype,"name",void 0),c([d({type:Date,json:{write:!0}})],Ll.prototype,"acquisitionDate",void 0),c([ge("acquisitionDate")],Ll.prototype,"writeAcquisitionDate",null),c([d({json:{write:!0}})],Ll.prototype,"cameraID",void 0),c([d({type:Ve,json:{write:!0}})],Ll.prototype,"center",void 0),c([d({json:{write:!0}})],Ll.prototype,"gps",void 0),c([d({json:{write:!0}})],Ll.prototype,"orientation",void 0),Ll=c([F("esri.rest.support.ImageGPSInfo")],Ll);const aOe=Ll;let f_=class extends ae{constructor(){super(...arguments),this.images=null,this.cameras=null}};c([d({type:[aOe],json:{write:!0}})],f_.prototype,"images",void 0),c([d({type:[oOe],json:{write:!0}})],f_.prototype,"cameras",void 0),f_=c([F("esri.rest.support.ImageGPSInfoResult")],f_);const lOe=f_;var Uk;let uh=Uk=class extends Vl{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}get measureOperation(){return this.operationType}clone(){return new Uk(K({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};c([d({type:Ve,json:{read:!0}})],uh.prototype,"fromGeometry",void 0),c([ge("fromGeometry")],uh.prototype,"writeFromGeometry",null),c([d({type:Ve,json:{read:!0,write:!0}})],uh.prototype,"toGeometry",void 0),c([d({type:Ya.apiValues,json:{write:Ya.write}})],uh.prototype,"measureOperation",null),c([d({json:{read:!0}})],uh.prototype,"operationType",void 0),c([d({type:String,json:{read:tp.read,write:tp.write}})],uh.prototype,"linearUnit",void 0),uh=Uk=c([F("esri.rest.support.ImageHeightParameters")],uh);const uOe=uh;let tI=class extends Nd{constructor(){super(...arguments),this.height=null}};c([d({type:Wv,json:{read:!0,write:!0}})],tI.prototype,"height",void 0),tI=c([F("esri.rest.support.ImageHeightResult")],tI);const cOe=tI;var Vk;let Cu=Vk=class extends ae{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}clone(){return new Vk(K({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};c([d({types:cs,json:{read:or}})],Cu.prototype,"geometry",void 0),c([ge("geometry")],Cu.prototype,"writeGeometry",null),c([d({type:aa,json:{write:!0}})],Cu.prototype,"mosaicRule",void 0),c([d({type:si,json:{write:!0,name:"renderingRule"}})],Cu.prototype,"rasterFunction",void 0),c([d({type:Ve,json:{write:!0}})],Cu.prototype,"pixelSize",void 0),c([d({json:{write:!0}})],Cu.prototype,"raster",void 0),c([d({type:io,json:{read:{source:"time"},write:{target:"time"}}})],Cu.prototype,"timeExtent",void 0),Cu=Vk=c([F("esri.rest.support.ImageHistogramParameters")],Cu);const hOe=Cu;var Gk;let Sr=Gk=class extends ae{constructor(){super(...arguments),this.geometry=null,this.rasterFunctions=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t?.mosaicMethod&&(t=aa.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,i){e!=null&&(t[i]=JSON.stringify(e.toJSON()))}set rasterFunction(e){let t=e;t?.rasterFunction&&(t=si.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("rasterFunction",t)}writeRasterFunction(e,t,i){e!=null&&(t[i]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[i]=JSON.stringify(e.rasterFunctionDefinition))}writeRasterFunctions(e,t,i){e!=null&&(t[i]=JSON.stringify(e.map(r=>r.rasterFunctionDefinition||r.toJSON())))}writePixelSize(e,t,i){e!=null&&(t[i]=JSON.stringify(e))}writeTimeExtent(e,t,i){if(e!=null){const r=e.start!=null?e.start.getTime():null,s=e.end!=null?e.end.getTime():null;t[i]=r!=null?s!=null?`${r},${s}`:`${r}`:null}}clone(){return new Gk(K({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};c([d({json:{write:!0}})],Sr.prototype,"geometry",void 0),c([ge("geometry")],Sr.prototype,"writeGeometry",null),c([d({type:aa,json:{write:!0}})],Sr.prototype,"mosaicRule",null),c([ge("mosaicRule")],Sr.prototype,"writeMosaicRule",null),c([d({type:si,json:{write:!0,name:"renderingRule"}})],Sr.prototype,"rasterFunction",null),c([ge("rasterFunction")],Sr.prototype,"writeRasterFunction",null),c([d({type:[si],json:{write:!0,name:"renderingRules"}})],Sr.prototype,"rasterFunctions",void 0),c([ge("rasterFunctions")],Sr.prototype,"writeRasterFunctions",null),c([d({type:Ve,json:{write:!0}})],Sr.prototype,"pixelSize",void 0),c([ge("pixelSize")],Sr.prototype,"writePixelSize",null),c([d({type:Boolean,json:{write:!0}})],Sr.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:!0}})],Sr.prototype,"returnCatalogItems",void 0),c([d({type:Boolean,json:{write:!0}})],Sr.prototype,"returnPixelValues",void 0),c([d({type:Number,json:{write:!0}})],Sr.prototype,"maxItemCount",void 0),c([d({type:io,json:{write:{target:"time"}}})],Sr.prototype,"timeExtent",void 0),c([ge("timeExtent")],Sr.prototype,"writeTimeExtent",null),c([d({json:{write:!0}})],Sr.prototype,"raster",void 0),c([d({json:{write:!0}})],Sr.prototype,"viewId",void 0),c([d({type:Boolean,json:{write:!0}})],Sr.prototype,"processAsMultidimensional",void 0),Sr=Gk=c([F("esri.rest.support.ImageIdentifyParameters")],Sr);const Roe=Sr;let Nl=class extends ae{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};c([d({json:{write:!0}})],Nl.prototype,"catalogItemVisibilities",void 0),c([d({type:Sg,json:{write:!0}})],Nl.prototype,"catalogItems",void 0),c([d({type:Ve,json:{write:!0}})],Nl.prototype,"location",void 0),c([d({json:{write:!0}})],Nl.prototype,"name",void 0),c([d({json:{write:!0}})],Nl.prototype,"objectId",void 0),c([d({json:{write:!0}})],Nl.prototype,"processedValues",void 0),c([d({json:{write:!0}})],Nl.prototype,"properties",void 0),c([d({json:{write:!0}})],Nl.prototype,"value",void 0),Nl=c([F("esri.rest.support.ImageIdentifyResult")],Nl);const pOe=Nl;var Bk;let D0=Bk=class extends ae{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,i){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(r=>r.toJSON())}}clone(){return new Bk({geometries:this.geometries?.map(e=>e.clone())??[],rasterId:this.rasterId})}};c([d({type:[Ve],json:{write:!0}})],D0.prototype,"geometries",void 0),c([ge("geometries")],D0.prototype,"writeGeometry",null),c([d({type:vt,json:{write:!0}})],D0.prototype,"rasterId",void 0),D0=Bk=c([F("esri.rest.support.ImagePixelLocationParameters")],D0);const dOe=D0;let iI=class extends ae{constructor(){super(...arguments),this.geometries=null}};c([d({json:{write:!0}})],iI.prototype,"geometries",void 0),iI=c([F("esri.rest.support.ImagePixelLocationResult")],iI);const fOe=iI;var zk;let Bm=zk=class extends Vl{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}get measureOperation(){const{is3D:e,geometry:t}=this;return t.type==="point"?e?"point-3D":"point":e?"centroid-3D":"centroid"}clone(){return new zk(K({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};c([d({types:cs,json:{name:"fromGeometry",read:or}})],Bm.prototype,"geometry",void 0),c([ge("geometry")],Bm.prototype,"writeGeometry",null),c([d({type:Ya.apiValues,json:{read:Ya.read,write:Ya.write}})],Bm.prototype,"measureOperation",null),c([d({json:{read:!0}})],Bm.prototype,"is3D",void 0),Bm=zk=c([F("esri.rest.support.ImagePointParameters")],Bm);const mOe=Bm;let rI=class extends Nd{constructor(){super(...arguments),this.point=null}};c([d({type:Ve,json:{name:"point.value",read:!0,write:!0}})],rI.prototype,"point",void 0),rI=c([F("esri.rest.support.ImagePointResult")],rI);const yOe=rI;var qk;let hn=qk=class extends ae{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]=e.toJSON())}set locations(e){if(e?.length){const t=new tb({spatialReference:e[0].spatialReference,points:e.map(({x:i,y:r})=>[i,r])});this._set("locations",e),this.geometry=t}}clone(){return new qk(K({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};c([d({types:cs,json:{read:or}})],hn.prototype,"geometry",void 0),c([ge("geometry")],hn.prototype,"writeGeometry",null),c([d()],hn.prototype,"locations",null),c([d({type:String,json:{type:Bd.jsonValues,read:Bd.read,write:Bd.write}})],hn.prototype,"interpolation",void 0),c([d({type:aa,json:{write:!0}})],hn.prototype,"mosaicRule",void 0),c([d({type:[String],json:{write:!0}})],hn.prototype,"outFields",void 0),c([d({type:Ve,json:{write:!0}})],hn.prototype,"pixelSize",void 0),c([d({type:String,json:{write:!0}})],hn.prototype,"raster",void 0),c([d({type:Boolean,json:{write:!0}})],hn.prototype,"returnFirstValueOnly",void 0),c([d({type:Number,json:{write:!0}})],hn.prototype,"sampleDistance",void 0),c([d({type:Number,json:{write:!0}})],hn.prototype,"sampleCount",void 0),c([d({type:Number,json:{write:!0}})],hn.prototype,"sliceId",void 0),c([d({type:io,json:{read:{source:"time"},write:{target:"time"}}})],hn.prototype,"timeExtent",void 0),hn=qk=c([F("esri.rest.support.ImageSampleParameters")],hn);const gOe=hn;let ch=class extends ae{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};c([d({json:{write:!0}})],ch.prototype,"attributes",void 0),c([d({type:Ve,json:{write:!0}})],ch.prototype,"location",void 0),c([d({json:{write:!0}})],ch.prototype,"locationId",void 0),c([d({json:{write:!0}})],ch.prototype,"rasterId",void 0),c([d({json:{write:!0}})],ch.prototype,"resolution",void 0),c([d({json:{write:!0}})],ch.prototype,"pixelValue",void 0),ch=c([F("esri.rest.support.ImageSample")],ch);const vOe=ch;let sI=class extends ae{constructor(){super(...arguments),this.samples=null}};c([d({type:[vOe],json:{write:!0}})],sI.prototype,"samples",void 0),sI=c([F("esri.rest.support.ImageSampleResult")],sI);const bOe=sI;let zm=class extends Dt(ae){constructor(){super(...arguments),this.geometries=[],this.rasterIds=null,this.outSpatialReference=null}writeGeometries(t,i,r){i.geometries=t?.length?{geometryType:Pn(t[0]),geometries:t.map(s=>({...s.toJSON(),spatialReference:void 0}))}:null}};c([d({types:[cs]})],zm.prototype,"geometries",void 0),c([ge("geometries")],zm.prototype,"writeGeometries",null),c([d({type:[vt],json:{write:!0}})],zm.prototype,"rasterIds",void 0),c([d({type:ke,json:{name:"outSR",write:!0}})],zm.prototype,"outSpatialReference",void 0),zm=c([F("esri.rest.support.ImageToMapMultirayParameters")],zm);const wOe=zm;let hh=class extends Dt(ae){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.outSpatialReference=null,this.depthOffset=0,this.adjust=!1}writeGeometry(t,i,r){t!=null&&(i.geometryType=Pn(t),i[r]={...t.toJSON(),spatialReference:void 0})}};c([d({types:cs,json:{read:or,write:!0}})],hh.prototype,"geometry",void 0),c([ge("geometry")],hh.prototype,"writeGeometry",null),c([d({json:{write:!0}})],hh.prototype,"rasterId",void 0),c([d({type:ke,json:{name:"outSR",write:!0}})],hh.prototype,"outSpatialReference",void 0),c([d({json:{name:"options.DOff",write:!0}})],hh.prototype,"depthOffset",void 0),c([d({json:{name:"options.Adjust",write:!0}})],hh.prototype,"adjust",void 0),hh=c([F("esri.rest.support.ImageToMapParameters")],hh);const _Oe=hh;let m_=class extends Dt(ae){constructor(){super(...arguments),this.referenceUri=null,this.rasterId=null}};c([d({type:String,json:{name:"uri",write:!0}})],m_.prototype,"referenceUri",void 0),c([d({type:Number,json:{write:!0}})],m_.prototype,"rasterId",void 0),m_=c([F("esri.rest.support.ImageUrlParameters")],m_);const SOe=m_;let nI=class extends ae{constructor(){super(...arguments),this.url=null}};c([d({json:{name:"imageURL",write:!0}})],nI.prototype,"url",void 0),nI=c([F("esri.rest.support.ImageUrlResult")],nI);const xOe=nI;let qm=class extends Dt(ae){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.visibleOnly=!1}writeGeometry(t,i,r){t!=null&&(i.geometryType=Pn(t),i[r]=JSON.stringify(t))}};c([d({types:cs,json:{read:or,write:!0}})],qm.prototype,"geometry",void 0),c([ge("geometry")],qm.prototype,"writeGeometry",null),c([d({json:{write:!0}})],qm.prototype,"rasterId",void 0),c([d({json:{name:"options.VisibleOnly",write:!0}})],qm.prototype,"visibleOnly",void 0),qm=c([F("esri.rest.support.MapToImageParameters")],qm);const TOe=qm;let Qp=class extends ae{constructor(){super(...arguments),this.geometry=null,this.length=null,this.area=null,this.center=null}readCenter(t,i){return t.spatialReference||(t={...t,spatialReference:i.Shape.spatialReference}),Ve.fromJSON(t)}};c([d({types:cs,json:{name:"Shape",read:or,write:!0}})],Qp.prototype,"geometry",void 0),c([d({json:{name:"Length",write:!0}})],Qp.prototype,"length",void 0),c([d({json:{name:"Area",write:!0}})],Qp.prototype,"area",void 0),c([d({json:{name:"Center",write:!0}})],Qp.prototype,"center",void 0),c([ue("center")],Qp.prototype,"readCenter",null),Qp=c([F("esri.rest.support.MeasureAreaFromImageResult")],Qp);const EOe=Qp;var Hk;let F0=Hk=class extends ae{constructor(){super(...arguments),this.geometry=null,this.rasterId=void 0}writeGeometry(e,t,i){e!=null&&(t.geometryType=Pn(e),t[i]={...e.toJSON(),spatialReference:void 0})}clone(){const e=K({geometry:this.geometry,rasterId:this.rasterId});return new Hk(e)}};c([d({types:cs,json:{name:"fromGeometry",read:or,write:!0}})],F0.prototype,"geometry",void 0),c([ge("geometry")],F0.prototype,"writeGeometry",null),c([d({json:{write:!0}})],F0.prototype,"rasterId",void 0),F0=Hk=c([F("esri.rest.support.MeasureFromImageParameters")],F0);const MOe=F0;let y_=class extends ae{constructor(){super(...arguments),this.geometry=null,this.length=null}};c([d({types:cs,json:{name:"Shape",read:or,write:!0}})],y_.prototype,"geometry",void 0),c([d({json:{name:"Length",write:!0}})],y_.prototype,"length",void 0),y_=c([F("esri.rest.support.MeasureLengthFromImageResult")],y_);const IOe=y_;function N9(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const i=[];t.start!=null&&i.push(t.start),t.end==null||i.includes(t.end)||i.push(t.end),e.time=i.join(",")}}async function Ooe(e,t,i){t=Ki(hOe,t);const r=Vi(e),s=t.geometry?[t.geometry]:[],n=await hu(s),o=t.toJSON();N9(o);const a=n?.[0];a!=null&&(o.geometry=_c(a));const l=Ys({...r.query,f:"json",...o});return Ln(l,i)}async function AOe(e,t,i){const r=(t=Ki(KRe,t)).toJSON();r.angleName!=null&&(r.angleName=r.angleName.join(",")),t?.point?.spatialReference?.imageCoordinateSystem&&(r.point.spatialReference=SC(t.point.spatialReference)),t?.spatialReference?.imageCoordinateSystem&&(r.spatialReference=bb(t.spatialReference));const s=Vi(e),n=Ys({...s.query,f:"json",...r}),o=Ln(n,i),{data:a}=await Ne(`${s.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new ke({wkid:0,imageCoordinateSystem:a.spatialReference}):ke.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new XRe(a)}async function $Oe(e,t,i){const r=(t=Ki(dOe,t)).toJSON(),{geometries:s}=t;if(s)for(let u=0;u<s.length;u++)s[u].spatialReference?.imageCoordinateSystem&&(r.geometries.geometries[u].spatialReference=SC(s[u].spatialReference));const n=Vi(e),o=Ys({...n.query,f:"json",...r}),a=Ln(o,i),{data:l}=await Ne(`${n.path}/computePixelLocation`,a);return fOe.fromJSON(l)}async function COe(e,t,i){const r=await Ooe(e,t,i),s=Vi(e),{data:n}=await Ne(`${s.path}/computeStatisticsHistograms`,r),{statistics:o}=n;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:n.histograms}}async function ROe(e,t,i){const r=await Ooe(e,t,i),s=Vi(e),{data:n}=await Ne(`${s.path}/computeHistograms`,r);return{histograms:n.histograms}}async function OOe(e,t,i){const r=(t=Ki(gOe,t)).toJSON();N9(r),r.outFields?.length&&(r.outFields=r.outFields.join(","));const s=await hu(t.geometry),n=s?.[0];n!=null&&(r.geometry=_c(n));const o=Vi(e),a=Ys({...o.query,f:"json",...r}),l=Ln(a,i),{data:u}=await Ne(`${o.path}/getSamples`,l),h=u?.samples?.map(p=>{const f=p.value==="NaN"||p.value===""?null:p.value.split(" ").map(m=>Number(m));return{...p,pixelValue:f}});return bOe.fromJSON({samples:h})}async function Jq(e,t,i){t=Ki(Roe,t);const r=Vi(e),s=t.geometry?[t.geometry]:[];return hu(s).then(n=>{const o=t.toJSON(),a=n?.[0];a!=null&&(o.geometry=JSON.stringify(_c(a)));const l=Ys({...r.query,f:"json",...o}),u=Ln(l,i);return Ne(r.path+"/identify",u)}).then(n=>pOe.fromJSON(n.data))}async function POe(e,t,i){t=Ki(uOe,t);const r=await _C(e,t,[t.fromGeometry,t.toGeometry],i);return cOe.fromJSON(r)}async function LOe(e,t,i){t=Ki(QRe,t);const r=await _C(e,t,[t.geometry],i);return eOe.fromJSON(r)}async function NOe(e,t,i){t=Ki(mOe,t);const r=await _C(e,t,[t.geometry],i);return yOe.fromJSON(r)}async function kOe(e,t,i){t=Ki(rOe,t);const r=await _C(e,t,[t.fromGeometry,t.toGeometry],i);return sOe.fromJSON(r)}async function _C(e,t,i,r){const s=Vi(e),n=await hu(i),o=t.toJSON();n[0]!=null&&(o.fromGeometry=JSON.stringify(_c(n[0]))),n[1]!=null&&(o.toGeometry=JSON.stringify(_c(n[1])));const a=Ys({...s.query,f:"json",...o}),l=Ln(a,r),{data:u}=await Ne(s.path+"/measure",l);return u}async function DOe(e,t,i){const r=await Poe(e,t,i);return IOe.fromJSON(r)}async function FOe(e,t,i){const r=await Poe(e,t,i);return EOe.fromJSON(r)}async function Poe(e,t,i){t=Ki(MOe,t);const r=Vi(e),s=t.toJSON(),n=Ys({...r.query,f:"json",...s}),o=Ln(n,i),{data:a}=await Ne(r.path+"/measureFromImage",o);return a}function _c(e){const t=e.toJSON();return e.spatialReference?.imageCoordinateSystem&&(t.spatialReference=SC(e.spatialReference)),t}function SC(e){const{imageCoordinateSystem:t}=e;if(t){const{id:i,referenceServiceName:r}=t;return i!=null?r?{icsid:i,icsns:r}:{icsid:i}:{ics:t}}return e.toJSON()}function bb(e,t){if(!e.imageCoordinateSystem)return Xd(e);const i=SC(e),{icsid:r,icsns:s}=i;return r==null||s!=null&&!t?.toLowerCase().includes("/"+s.toLowerCase()+"/")?JSON.stringify(i):`0:${r}`}async function jOe(e,t,i){t=Ki(tOe,t);const r=Vi(e),s=t.toJSON();t.outSpatialReference&&(s.outSR=bb(t.outSpatialReference));const n=Ys({...r.query,f:"json",...s}),o=Ln(n,i),{data:a}=await Ne(r.path+"/queryBoundary",o);return iOe.fromJSON(a)}async function UOe(e,t,i){const r=(t=Ki(nOe,t)).toJSON();N9(r),r.objectIds?.length&&(r.objectIds=r.objectIds.join(",")),r.geometry||r.objectIds||r.time||r.where||(r.where="1=1");const s=await hu(t.geometry),n=s?.[0];n!=null&&(r.geometry=_c(n));const o=n?.spatialReference??t.geometry?.spatialReference;o&&(r.inSR=bb(o));const a=Vi(e),l=Ys({...a.query,f:"json",...r}),u=Ln(l,i),{data:h}=await Ne(`${a.path}/queryGPSInfo`,u);return lOe.fromJSON(h)}async function VOe(e,t,i){const r=(t=Ki(_Oe,t)).toJSON();t.geometry.spatialReference.imageCoordinateSystem&&(r.geometry=_c(t.geometry)),t.depthOffset&&t.adjust||delete r.options;const s=Vi(e),n=Ys({...s.query,f:"json",...r}),o=Ln(n,i),{data:a}=await Ne(`${s.path}/imageToMap`,o);return or(a)}async function GOe(e,t,i){const r=(t=Ki(wOe,t)).toJSON();t.rasterIds?.length&&(r.rasterIds=t.rasterIds.join(","));const s=Vi(e),n=Ys({...s.query,f:"json",...r}),o=Ln(n,i),{data:a}=await Ne(`${s.path}/imageToMapMultiray`,o);return or(a)}async function BOe(e,t,i){const r=(t=Ki(TOe,t)).toJSON(),s=await hu(t.geometry),n=s?.[0];n!=null&&(r.geometry=_c(n)),t.visibleOnly||delete r.options;const o=n?.spatialReference??t.geometry?.spatialReference;o&&(r.inSR=bb(o));const a=Vi(e),l=Ys({...a.query,f:"json",...r}),u=Ln(l,i),{data:h}=await Ne(`${a.path}/mapToImage`,u);return or(h)}async function zOe(e,t,i){const r=(t=Ki(SOe,t)).toJSON(),s=Vi(e),n=Ys({...s.query,f:"json",...r}),o=Ln(n,i),{data:a}=await Ne(`${s.path}/getImageUrl`,o);return xOe.fromJSON(a)}async function qOe(e,t,i){const r=(t=Ki(JRe,t)).toJSON(),s=await hu([t.fromGeometry,t.toGeometry]);s[0]!=null&&(r.fromGeometry=_c(s[0]),s[0].spatialReference&&(r.inSR=bb(s[0].spatialReference))),s[1]!=null&&(r.toGeometry=_c(s[1])),t.objectIds?.length&&(r.objectIds=r.objectIds.join(","));const n=Vi(e),o=Ys({...n.query,f:"json",...r}),a=Ln(o,i),{data:l}=await Ne(`${n.path}/find`,a);return YRe.fromJSON(l)}async function Loe(e,t,i){const r=Vi(e),{rasterFunction:s,sourceJSON:n}=t||{},o=s?JSON.stringify(s.rasterFunctionDefinition||s):null,a=Ys({...r.query,renderingRule:o,f:"json"}),l=Ln(a,i);e=r.path;const u=n||await Ne(e,l).then(P=>P.data),h=u.hasRasterAttributeTable?Ne(`${e}/rasterAttributeTable`,l):null,p=u.hasColormap?Ne(`${e}/colormap`,l):null,f=u.hasHistograms?Ne(`${e}/histograms`,l):null,m=u.currentVersion>=10.3?Ne(`${e}/keyProperties`,l):null,g=u.hasMultidimensions?Ne(`${e}/multidimensionalInfo`,l):null,b=await Promise.allSettled([h,p,f,m,g]);let w=null;if(u.minValues&&u.minValues.length===u.bandCount){w=[];for(let P=0;P<u.minValues.length;P++)w.push({min:u.minValues[P],max:u.maxValues[P],avg:u.meanValues[P],stddev:u.stdvValues[P]})}const S=bt.fromJSON(u.extent),T=Math.ceil(S.width/u.pixelSizeX-.1),x=Math.ceil(S.height/u.pixelSizeY-.1),_=ke.fromJSON(u.spatialReference||u.extent.spatialReference),M=b[0].status==="fulfilled"?b[0].value?.data:null,I=M?.features?.length?Sg.fromJSON(M):null,A=b[1].status==="fulfilled"?b[1].value?.data.colormap:null,C=A?.length?A:null,R=b[2].status==="fulfilled"?b[2].value?.data.histograms:null,O=R?.[0]?.counts?.length?R:null,k=b[3].status==="fulfilled"?b[3].value?.data??{}:{},L=b[4].status==="fulfilled"?b[4].value?.data.multidimensionalInfo:null,V=L?.variables?.length?L:null;V&&V.variables.forEach(P=>{P.statistics?.length&&P.statistics.forEach(G=>{G.avg=G.mean,G.stddev=G.standardDeviation})});const{defaultVariable:J,serviceDataType:y}=u;J&&J!==k.DefaultVariable&&(k.DefaultVariable=J),y?.includes("esriImageServiceDataTypeVector")&&!y.includes(k.DataType)&&(k.DataType=y.replace("esriImageServiceDataType",""));let E=u.noDataValue;u.noDataValues?.length&&u.noDataValues.some(P=>P!==E)&&(E=u.noDataValues);const $=u.transposeInfo?new E9({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new Ve({x:u.extent.xmin,y:u.extent.ymax,spatialReference:_}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(T,x))/Math.LN2-8)),transposeInfo:u.transposeInfo}):void 0;return new yC({width:T,height:x,bandCount:u.bandCount,extent:bt.fromJSON(u.extent),spatialReference:_,pixelSize:new Ve({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:_}),pixelType:u.pixelType.toLowerCase(),statistics:w,attributeTable:I,colormap:C,histograms:O,keyProperties:k,noDataValue:E,multidimensionalInfo:V,storageInfo:$})}function Zq(e,t,i){return Loe(e,{sourceJSON:t},i)}function HOe(e,t,i){return Loe(e,{rasterFunction:t},i)}function WOe(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}async function JOe(e,t,i){const r=Vi(e),s=Ys({...r?.query,f:"json"}),n=Ln(s,i),o=`${r?.path}/${t}/info`,a=Ne(`${o}`,n),l=Ne(`${o}/keyProperties`,n),u=await Promise.allSettled([a,l]),h=u[0].status==="fulfilled"?u[0].value.data:null,p=u[1].status==="fulfilled"?u[1].value.data:null;let f=null;h.statistics?.length&&(f=h.statistics.map(_=>({min:_[0],max:_[1],avg:_[2],stddev:_[3]})));const m=bt.fromJSON(h.extent),g=Math.ceil(m.width/h.pixelSizeX-.1),b=Math.ceil(m.height/h.pixelSizeY-.1),w=m.spatialReference,S=new Ve({x:h.pixelSizeX,y:h.pixelSizeY,spatialReference:w}),T=h.histograms?.length?h.histograms:null,x=new E9({origin:h.origin,blockWidth:h.blockWidth,blockHeight:h.blockHeight,firstPyramidLevel:h.firstPyramidLevel,maximumPyramidLevel:h.maxPyramidLevel});return new yC({width:g,height:b,bandCount:h.bandCount,extent:m,spatialReference:w,pixelSize:S,pixelType:h.pixelType.toLowerCase(),statistics:f,histograms:T,keyProperties:p,storageInfo:x})}function Noe(e){const t={};for(const i in e){if(i==="declaredClass")continue;const r=e[i];if(r!=null&&typeof r!="function")if(Array.isArray(r)){t[i]=[];for(let s=0;s<r.length;s++)t[i][s]=Noe(r[s])}else typeof r=="object"?r.toJSON&&(t[i]=JSON.stringify(r)):t[i]=r}return t}var gd;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(gd||(gd={}));const Yq=4294967296,ZOe=new TextDecoder("utf-8"),YOe=le("safari")||le("ios")?6:le("ff")?12:32;let Wk=class oI{constructor(t,i,r=0,s=t?t.byteLength:0){this._tag=0,this._dataType=gd.unknown,this._init(t,i,r,s)}_init(t,i,r,s){this._data=t,this._dataView=i,this._pos=r,this._end=s}asUnsafe(){return this}clone(){return new oI(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getUint32(i+4,!0)*Yq;return this._skip(8),r}getSFixed64(){const t=this._dataView,i=this._pos,r=t.getUint32(i,!0)+t.getInt32(i+4,!0)*Yq;return this._skip(8),r}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),i=this._pos,r=this._toString(this._data,i,i+t);return this._skip(t),r}getBytes(){const t=this._getLength(),i=this._pos,r=this._toBytes(this._data,i,i+t);return this._skip(t),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,i,r,s){const n=this.getMessage(),o=t(n,i,r,s);return n.release(),o}processMessage(t){const i=this.getMessage(),r=t(i);return i.release(),r}getMessage(){const t=this._getLength(),i=oI.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),i}release(){oI.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case gd.varint:this._decodeVarint();break;case gd.fixed64:this._skip(8);break;case gd.delimited:this._skip(this._getLength());break;case gd.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let i=this._pos,r=0,s=0;if(this._end-i>=10)do{if(s=t[i++],r|=127&s,!(128&s)||(s=t[i++],r|=(127&s)<<7,!(128&s))||(s=t[i++],r|=(127&s)<<14,!(128&s))||(s=t[i++],r|=(127&s)<<21,!(128&s))||(s=t[i++],r+=268435456*(127&s),!(128&s))||(s=t[i++],r+=34359738368*(127&s),!(128&s))||(s=t[i++],r+=4398046511104*(127&s),!(128&s))||(s=t[i++],r+=562949953421312*(127&s),!(128&s))||(s=t[i++],r+=72057594037927940*(127&s),!(128&s))||(s=t[i++],r+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;i!==this._end&&(s=t[i],128&s);)++i,r+=(127&s)*n,n*=128;if(i===this._end)throw new Error("Varint overrun!");++i,r+=s*n}return this._pos=i,r}_decodeSVarint(){const t=this._data;let i,r=0,s=0;const n=1&t[this._pos];if(s=t[this._pos++],r|=127&s,!(128&s)||(s=t[this._pos++],r|=(127&s)<<7,!(128&s))||(s=t[this._pos++],r|=(127&s)<<14,!(128&s))||(s=t[this._pos++],r|=(127&s)<<21,!(128&s))||(s=t[this._pos++],r+=268435456*(127&s),!(128&s))||(s=t[this._pos++],r+=34359738368*(127&s),!(128&s))||(s=t[this._pos++],r+=4398046511104*(127&s),!(128&s)))return n?-(r+1)/2:r/2;if(i=BigInt(r),s=t[this._pos++],i+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=t[this._pos++],i+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=t[this._pos++],i+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(i+1n)/2n:i/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==gd.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,i,r){if((r=Math.min(this._end,r))-i>YOe){const o=t.subarray(i,r);return ZOe.decode(o)}let s="",n="";for(let o=i;o<r;++o){const a=t[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,i,r){return r=Math.min(this._end,r),new Uint8Array(t.buffer,i,r-i)}};Wk.pool=new pf(Wk,void 0,e=>{e._data=null,e._dataView=null});const H4=2;let Vo=class j0{constructor(t=[],i=[]){this.lengths=t??[],this.coords=i??[]}static fromJSON(t){return new j0(t.lengths,t.coords)}static fromRect(t){const[i,r,s,n]=t,o=s-i,a=n-r;return new j0([5],[i,r,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,i)=>t+i)}forEachVertex(t){let i=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const s=this.lengths[r];for(let n=0;n<s;n++)t(this.coords[H4*(n+i)],this.coords[H4*(n+i)+1]);i+=s}}deltaDecode(){const t=this.clone(),{coords:i,lengths:r}=t;let s=0;for(const n of r){for(let o=1;o<n;o++)i[2*(s+o)]+=i[2*(s+o)-2],i[2*(s+o)+1]+=i[2*(s+o)-1];s+=n}return t}clone(t){if(this.lengths.length===0)return new j0([],[this.coords[0],this.coords[1]]);const i=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*H4,r=this.coords.slice(0,i);return t?(t.set(r),new j0(this.lengths,t)):new j0(Array.from(this.lengths),Array.from(r))}},ig=class aI{constructor(t=null,i={},r,s){this.geometry=t,this.attributes=i,this.centroid=r,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,i){const r=t.geometry?Vo.fromJSON(t.geometry):null,s=t.centroid?Vo.fromJSON(t.centroid):null,n=t.attributes[i];return new aI(r,t.attributes,s,n)}weakClone(){const t=new aI(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){const t=this.geometry?.clone(),i=new aI(t,{...this.attributes},this.centroid?.clone(),this.objectId);return i.displayId=this.displayId,i.geohashX=this.geohashX,i.geohashY=this.geohashY,i}};function KOe(e){return!!e.geometry?.coords?.length}let koe=class Doe{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Doe;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const Foe=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let vmt=class{constructor(t){this._options=t,this.geometryTypes=Foe,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new koe}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t?.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||Xi(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const i=u1(this._options.sourceSpatialReference)/u1(t.spatialReference);if(i!==1)for(const r of t.features){if(!KOe(r))continue;const s=r.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=i}}addFeature(t,i){t.features.push(i)}createFeature(){return new ig}createSpatialReference(){return{wkid:0}}createGeometry(){return new Vo}addField(t,i){t.fields.push(i)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((i,r)=>i+r,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,i){t.coords[this._coordinatePtr++]=i}addCoordinatePoint(t,i){t.coords.push(i)}addLength(t,i){t.lengths.push(i)}addQueryGeometry(t,i){t.queryGeometry=i.queryGeometry,t.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Vo}};const Kq=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],Xq=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Qq=["upperLeft","lowerLeft"];function eH(e){return e>=Kq.length?null:Kq[e]}function XOe(e){return e>=Xq.length?null:Xq[e]}function tH(e){return e>=Qq.length?null:Qq[e]}function iH(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function QOe(e,t,i){const s=e.asUnsafe(),n=t.createPointGeometry(i);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),a=s.pos()+o;let l=0;for(;s.pos()<a;)t.addCoordinatePoint(n,s.getSInt64(),l++);break}default:s.skip()}return n}function ePe(e,t,i){const n=e.asUnsafe(),o=t.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const l=n.getUInt32(),u=n.pos()+l;let h=0;for(;n.pos()<u;)t.addLength(o,n.getUInt32(),h++);break}case 3:{const l=n.getUInt32(),u=n.pos()+l;let h=0;for(t.allocateCoordinates(o);n.pos()<u;)t.addCoordinate(o,n.getSInt64(),h),h++,h===a&&(h=0);break}default:n.skip()}return o}function tPe(e){const s=e.asUnsafe(),n=new Vo;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.lengths.push(s.getUInt32());break}case 3:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.coords.push(s.getSInt64());break}case 1:o=Foe[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function iPe(e){const h=e.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function rPe(e){const a=e.asUnsafe(),l={type:eH(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=eH(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=XOe(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function sPe(e){const r={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.name=s.getString();break;case 2:r.isSystemMaintained=s.getBool();break;default:s.skip()}return r}function nPe(e,t,i,r){const a=t.createFeature(i);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=r[l++].name;a.attributes[u]=e.processMessage(iPe);break}case 2:a.geometry=e.processMessageWithArgs(ePe,t,i);break;case 4:a.centroid=e.processMessageWithArgs(QOe,t,i);break;default:e.skip()}return a}function oPe(e){const n=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function aPe(e){const n=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function lPe(e){const s={originPosition:tH(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=tH(n.getEnum());break;case 2:s.scale=n.processMessage(oPe);break;case 3:s.translate=n.processMessage(aPe);break;default:n.skip()}return s}function uPe(e){const s={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function cPe(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function hPe(e,t){const b=t.createFeatureResult(),w=e.asUnsafe();b.geometryType=iH(t,0);let S=!1;for(;w.next();)switch(w.tag()){case 1:b.objectIdFieldName=w.getString();break;case 3:b.globalIdFieldName=w.getString();break;case 4:b.geohashFieldName=w.getString();break;case 5:b.geometryProperties=w.processMessage(uPe);break;case 7:b.geometryType=iH(t,w.getEnum());break;case 8:b.spatialReference=w.processMessageWithArgs(cPe,t);break;case 10:b.hasZ=w.getBool();break;case 11:b.hasM=w.getBool();break;case 12:b.transform=w.processMessage(lPe);break;case 9:b.exceededTransferLimit=w.getBool();break;case 13:t.addField(b,w.processMessage(rPe));break;case 15:S||(t.prepareFeatures(b),S=!0),t.addFeature(b,w.processMessageWithArgs(nPe,t,b,b.fields));break;case 2:b.uniqueIdField=w.processMessage(sPe);break;default:w.skip()}return t.finishFeatureResult(b),b}function pPe(e,t){const s={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(tPe);break;case 1:s.featureResult=e.processMessageWithArgs(hPe,t);break;default:e.skip()}return n!=null&&s.featureResult&&t.addQueryGeometry(s,n),s}function dPe(e,t){try{const r=new Wk(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===2?s.queryResult=r.processMessageWithArgs(pPe,t):r.skip();return s}catch(i){throw new W("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function fPe(e,t){const i=dPe(e,t),r=i.queryResult.featureResult,s=i.queryResult.queryGeometry,n=i.queryResult.queryGeometryType;if(r&&r.features&&r.features.length&&r.objectIdFieldName){const o=r.objectIdFieldName;for(const a of r.features)a.attributes&&(a.objectId=a.attributes[o])}return r&&(r.queryGeometry=s,r.queryGeometryType=n),r}const rH="Layer does not support extent calculation.";function mPe(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const i=e.toJSON();return delete i.spatialReference,JSON.stringify(i)}function yPe(e,t){const i=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const s=r;let n,o,a;if(i!=null&&(o=i.spatialReference,a=Xd(o),s.geometryType=Pn(i),s.geometry=mPe(i,e.compactGeometryEnabled),s.inSR=a),r.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(s.objectIds=r.objectIds.join(",")),r.orderByFields&&(s.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete s.outFields:r.outFields.includes("*")?s.outFields="*":s.outFields=r.outFields.join(","),r.outSR?(s.outSR=Xd(r.outSR),n=e.outSpatialReference):i&&(r.returnGeometry||r.returnCentroid)&&(s.outSR=s.inSR,n=o),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(s.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(s.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(s.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&e.quantizationParameters?.extent!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(s.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(s.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(s.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const l=r.timeExtent,{start:u,end:h}=l;u==null&&h==null||(s.time=u===h?u:`${u??"null"},${h??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&n!=null&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function gPe(e,t,i,r){const s=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await wx(e,t,"json",r);return CN(t,i,s.data),s}async function vPe(e,t,i,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:i.createFeatureResult()};const s=await bPe(e,t,r),n=s;return n.data=fPe(s.data,i),n}function bPe(e,t,i){return wx(e,t,"pbf",i)}function wPe(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):wx(e,t,"json",i,{returnIdsOnly:!0})}function _Pe(e,t,i){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):wx(e,t,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}async function SPe(e,t,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await wx(e,t,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}),s=r.data;if(s.hasOwnProperty("extent"))return r;if(s.features)throw new Error(rH);if(s.hasOwnProperty("count"))throw new Error(rH);return r}async function wx(e,t,i,r={},s={}){const n=typeof e=="string"?$r(e):e,o=t.geometry?[t.geometry]:[],a=await hu(o,null,{signal:r.signal}),l=a?.[0];l!=null&&((t=t.clone()).geometry=l);const u=Noe({...n.query,f:i,...s,...yPe(t,s)});return Ne(ep(n.path,xPe(t,s)?"query3d":"query"),{...r,responseType:i==="pbf"?"array-buffer":"json",query:{...u,...r.query}})}function xPe(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function joe(e,t,i){const r=Vi(e),{data:s}=await _Pe(r,Dr.from(t),i);return s.count}async function k9(e,t,i){const r=Vi(e),{data:s}=await wPe(r,Dr.from(t),i);return s.objectIds}async function TPe(e,t,i){const r=await Uoe(e,t,i);return Sg.fromJSON(r)}async function Uoe(e,t,i){const r=Vi(e),s={...i},n=Dr.from(t),{data:o}=await gPe(r,n,n.sourceSpatialReference,s);return o}const Gl=()=>xe.getLogger("esri.views.2d.engine.flow.dataUtils"),EPe=10;async function MPe(e,t,i,r){const s=performance.now(),n=IPe(t,i),o=performance.now(),a=$Pe(t,n,i.width,i.height),l=performance.now(),u=RPe(a),h=performance.now(),p=e==="Streamlines"?OPe(u,EPe):PPe(u),f=performance.now();return le("esri-2d-profiler")&&(Gl().info("I.1","_createFlowFieldFromData (ms)",Math.round(o-s)),Gl().info("I.2","_getStreamlines (ms)",Math.round(l-o)),Gl().info("I.3","createAnimatedLinesData (ms)",Math.round(h-l)),Gl().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(f-h)),Gl().info("I.5","createFlowMesh (ms)",Math.round(f-s)),Gl().info("I.6","Mesh size (bytes)",p.vertexData.buffer.byteLength+p.indexData.buffer.byteLength)),await Promise.resolve(),wi(r),p}function IPe(e,t){const i=CPe(t.data,t.width,t.height,e.smoothing);return e.interpolate?(r,s)=>{const n=Math.floor(r),o=Math.floor(s);if(n<0||n>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=r-n,l=s-o,u=n,h=o,p=n<t.width-1?n+1:n,f=o<t.height-1?o+1:o,m=i[2*(h*t.width+u)],g=i[2*(h*t.width+p)],b=i[2*(f*t.width+u)],w=i[2*(f*t.width+p)],S=i[2*(h*t.width+u)+1],T=i[2*(h*t.width+p)+1];return[(m*(1-l)+b*l)*(1-a)+(g*(1-l)+w*l)*a,(S*(1-l)+i[2*(f*t.width+u)+1]*l)*(1-a)+(T*(1-l)+i[2*(f*t.width+p)+1]*l)*a]}:(r,s)=>{const n=Math.round(r),o=Math.round(s);return n<0||n>=t.width||o<0||o>=t.height?[0,0]:[i[2*(o*t.width+n)],i[2*(o*t.width+n)+1]]}}function APe(e,t,i,r,s,n,o,a,l){const u=[];let h=i,p=r,f=0,[m,g]=t(h,p);m*=e.velocityScale,g*=e.velocityScale;const b=Math.sqrt(m*m+g*g);let w,S;u.push({x:h,y:p,t:f,speed:b});for(let T=0;T<e.verticesPerLine;T++){let[x,_]=t(h,p);x*=e.velocityScale,_*=e.velocityScale;const M=Math.sqrt(x*x+_*_);if(M<e.minSpeedThreshold)return u;const I=x/M,A=_/M;if(h+=I*e.segmentLength,p+=A*e.segmentLength,f+=e.segmentLength/M,Math.acos(I*w+A*S)>e.maxTurnAngle)return u;if(e.collisions){const C=Math.round(h*l),R=Math.round(p*l);if(C<0||C>o-1||R<0||R>a-1)return u;const O=n[R*o+C];if(O!==-1&&O!==s)return u;n[R*o+C]=s}u.push({x:h,y:p,t:f,speed:M}),w=I,S=A}return u}function $Pe(e,t,i,r){const s=[],n=new Mv,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(i*o),l=Math.round(r*o),u=new Int32Array(a*l);for(let p=0;p<u.length;p++)u[p]=-1;const h=[];for(let p=0;p<r;p+=e.lineSpacing)for(let f=0;f<i;f+=e.lineSpacing)h.push({x:f,y:p,sort:n.getFloat()});h.sort((p,f)=>p.sort-f.sort);for(const{x:p,y:f}of h)if(n.getFloat()<e.density){const m=APe(e,t,p,f,s.length,u,a,l,o);if(m.length<2)continue;s.push(m)}return s}function CPe(e,t,i,r){if(r===0)return e;const s=Math.round(3*r),n=new Array(2*s+1);let o=0;for(let u=-s;u<=s;u++){const h=Math.exp(-u*u/(r*r));n[u+s]=h,o+=h}for(let u=-s;u<=s;u++)n[u+s]/=o;const a=new Float32Array(e.length);for(let u=0;u<i;u++)for(let h=0;h<t;h++){let p=0,f=0;for(let m=-s;m<=s;m++){if(h+m<0||h+m>=t)continue;const g=n[m+s];p+=g*e[2*(u*t+(h+m))],f+=g*e[2*(u*t+(h+m))+1]}a[2*(u*t+h)]=p,a[2*(u*t+h)+1]=f}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let h=0;h<i;h++){let p=0,f=0;for(let m=-s;m<=s;m++){if(h+m<0||h+m>=i)continue;const g=n[m+s];p+=g*a[2*((h+m)*t+u)],f+=g*a[2*((h+m)*t+u)+1]}l[2*(h*t+u)]=p,l[2*(h*t+u)+1]=f}return l}function RPe(e,t){const i=new Mv,r=e.reduce((l,u)=>l+u.length,0),s=new Float32Array(4*r),n=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const h of l)s[4*o]=h.x,s[4*o+1]=h.y,s[4*o+2]=h.t,s[4*o+3]=h.speed,o++;n[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:i.getFloat()}}return{lineVertices:s,lineDescriptors:n}}function OPe(e,t){const{lineVertices:r,lineDescriptors:s}=e;let n=0,o=0;for(const m of s)n+=2*m.numberOfVertices,o+=6*(m.numberOfVertices-1);const a=new Float32Array(n*9),l=new Uint32Array(o);let u=0,h=0;function p(){l[h++]=u-2,l[h++]=u,l[h++]=u-1,l[h++]=u,l[h++]=u+1,l[h++]=u-1}function f(m,g,b,w,S,T,x,_){const M=u*9;let I=0;a[M+I++]=m,a[M+I++]=g,a[M+I++]=1,a[M+I++]=b,a[M+I++]=T,a[M+I++]=x,a[M+I++]=w/2,a[M+I++]=S/2,a[M+I++]=_,u++,a[M+I++]=m,a[M+I++]=g,a[M+I++]=-1,a[M+I++]=b,a[M+I++]=T,a[M+I++]=x,a[M+I++]=-w/2,a[M+I++]=-S/2,a[M+I++]=_,u++}for(const m of s){const{totalTime:g,timeSeed:b}=m;let w=null,S=null,T=null,x=null,_=null,M=null;for(let I=0;I<m.numberOfVertices;I++){const A=r[4*(m.startVertex+I)],C=r[4*(m.startVertex+I)+1],R=r[4*(m.startVertex+I)+2],O=r[4*(m.startVertex+I)+3];let k=null,L=null,V=null,J=null;if(I>0){k=A-w,L=C-S;const y=Math.sqrt(k*k+L*L);if(k/=y,L/=y,I>1){let E=k+_,$=L+M;const P=Math.sqrt(E*E+$*$);E/=P,$/=P;const G=Math.min(1/(E*k+$*L),t);E*=G,$*=G,V=-$,J=E}else V=-L,J=k;V!==null&&J!==null&&(f(w,S,T,V,J,g,b,O),p())}w=A,S=C,T=R,_=k,M=L,x=O}f(w,S,T,-M,_,g,b,x)}return{vertexData:a,indexData:l}}function PPe(e){const{lineVertices:s,lineDescriptors:n}=e;let o=0,a=0;for(const y of n){const E=y.numberOfVertices-1;o+=4*E*2,a+=6*E*2}const l=new Float32Array(o*16),u=new Uint32Array(a);let h,p,f,m,g,b,w,S,T,x,_,M,I,A,C=0,R=0;function O(){u[R++]=C-8,u[R++]=C-7,u[R++]=C-6,u[R++]=C-7,u[R++]=C-5,u[R++]=C-6,u[R++]=C-4,u[R++]=C-3,u[R++]=C-2,u[R++]=C-3,u[R++]=C-1,u[R++]=C-2}function k(y,E,$,P,G,Q,se,ie,ye,Pe,Ie,we,De,Ze){const et=C*16;let nt=0;for(const $t of[1,2])for(const zt of[1,2,3,4])l[et+nt++]=y,l[et+nt++]=E,l[et+nt++]=$,l[et+nt++]=P,l[et+nt++]=se,l[et+nt++]=ie,l[et+nt++]=ye,l[et+nt++]=Pe,l[et+nt++]=$t,l[et+nt++]=zt,l[et+nt++]=De,l[et+nt++]=Ze,l[et+nt++]=G/2,l[et+nt++]=Q/2,l[et+nt++]=Ie/2,l[et+nt++]=we/2,C++}function L(y,E){let $=T+_,P=x+M;const G=Math.sqrt($*$+P*P);$/=G,P/=G;const Q=T*$+x*P;$/=Q,P/=Q;let se=_+I,ie=M+A;const ye=Math.sqrt(se*se+ie*ie);se/=ye,ie/=ye;const Pe=_*se+M*ie;se/=Pe,ie/=Pe,k(h,p,f,m,-P,$,g,b,w,S,-ie,se,y,E),O()}function V(y,E,$,P,G,Q){if(T=_,x=M,_=I,M=A,T==null&&x==null&&(T=_,x=M),g!=null&&b!=null){I=y-g,A=E-b;const se=Math.sqrt(I*I+A*A);I/=se,A/=se}T!=null&&x!=null&&L(G,Q),h=g,p=b,f=w,m=S,g=y,b=E,w=$,S=P}function J(y,E){T=_,x=M,_=I,M=A,T==null&&x==null&&(T=_,x=M),T!=null&&x!=null&&L(y,E)}for(const y of n){h=null,p=null,f=null,m=null,g=null,b=null,w=null,S=null,T=null,x=null,_=null,M=null,I=null,A=null;const{totalTime:E,timeSeed:$}=y;for(let P=0;P<y.numberOfVertices;P++)V(s[4*(y.startVertex+P)],s[4*(y.startVertex+P)+1],s[4*(y.startVertex+P)+2],s[4*(y.startVertex+P)+3],E,$);J(E,$)}return{vertexData:l,indexData:u}}function sH(e,t){const i=t.pixels,{width:r,height:s}=t,n=new Float32Array(r*s*2),o=t.mask||new Uint8Array(r*s*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<r*s;a++)n[2*a]=i[0][a],n[2*a+1]=-i[1][a];else if(e==="vector-magdir")for(let a=0;a<r*s;a++){const l=i[0][a],u=QS(i[1][a]),h=Math.cos(u-Math.PI/2),p=Math.sin(u-Math.PI/2);n[2*a]=h*l,n[2*a+1]=p*l}return{data:n,mask:o,width:r,height:s}}async function wmt(e,t,i,r,s,n){const o=performance.now(),a=Cn(t.spatialReference);if(!a){const _=await nH(e,t,i,r,s,n);return le("esri-2d-profiler")&&Gl().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),le("esri-2d-profiler")&&Gl().info("I.9","Number of parts",1),_}const[l,u]=a.valid,h=u-l,p=Math.ceil(t.width/h),f=t.width/p,m=Math.round(i/p);let g=t.xmin;const b=[],w=performance.now();for(let _=0;_<p;_++){const M=new bt({xmin:g,xmax:g+f,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});b.push(nH(e,M,m,r,s,n)),g+=f}const S=await Promise.all(b);le("esri-2d-profiler")&&Gl().info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-w)),le("esri-2d-profiler")&&Gl().info("I.9","Number of parts",S.length);const T={data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r};let x=0;for(const _ of S){for(let M=0;M<_.height;M++)for(let I=0;I<_.width;I++)x+I>=i||(T.data[2*(M*i+x+I)]=_.data[2*(M*_.width+I)],T.data[2*(M*i+x+I)+1]=_.data[2*(M*_.width+I)+1],T.mask[M*i+x+I]=_.mask[M*_.width+I]);x+=_.width}return le("esri-2d-profiler")&&Gl().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),T}async function nH(e,t,i,r,s,n){const o={requestProjectedLocalDirections:!0,signal:n};if(s!=null&&(o.timeExtent=s),e.type==="imagery"){await e.load({signal:n});const u=e.rasterInfo.dataType,h=await e.fetchImage(t,i,r,o);return h?.pixelData?.pixelBlock==null?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:sH(u,h.pixelData.pixelBlock)}await e.load({signal:n});const a=e.serviceRasterInfo.dataType,l=await e.fetchPixels(t,i,r,o);return l?.pixelBlock==null?{data:new Float32Array(i*r*2),mask:new Uint8Array(i*r),width:i,height:r}:sH(a,l.pixelBlock)}const LPe=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),NPe=VX(bn,{min:0,max:255});function kPe(e){const t=JSON.stringify(e),i=t.includes('"rasterFunctionDefinition":{'),r=i?t.match(/"type":"(.*?FunctionArguments")/gi):t.match(/"rasterFunction":"(.*?")/gi),s=r?.map(n=>i?n.slice(8,-18):n.slice(18,-1));return s?s.join("/"):null}const DPe=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new _r({layer:this}))}readServiceSupportsMosaicRule(r,s){return this._isMosaicRuleSupported(s)}get _rasterFunctionNamesIndex(){const r=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.length<1||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.forEach(s=>{r.set(s.name.toLowerCase().replaceAll(/ /gi,"_"),s.name)}),r}readBandIds(r,s){if(Array.isArray(r)&&r.length>0&&r.every(n=>typeof n=="number"))return r}readCapabilities(r,s){return this._readCapabilities(s)}writeCompressionQuality(r,s,n){r!=null&&this.format!=="lerc"&&(s[n]=r)}writeCompressionTolerance(r,s,n){this.format==="lerc"&&r!=null&&(s[n]=r)}readDefaultMosaicRule(r,s){return this._serviceSupportsMosaicRule?aa.fromJSON(s):null}get fieldsIndex(){return this.fields?new Z$(this.fields):null}set format(r){r&&LPe.has(r.toLowerCase())&&this._set("format",r.toLowerCase())}readFormat(r,s){return s.serviceDataType==="esriImageServiceDataTypeVector-UV"||s.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}readMaxScale(r,s){return s.minLOD!=null&&s.maxLOD!=null?r:0}set mosaicRule(r){let s=r;s?.mosaicMethod&&(s=aa.fromJSON({...s.toJSON(),mosaicMethod:s.mosaicMethod,mosaicOperation:s.mosaicOperation})),this._set("mosaicRule",s)}readMosaicRule(r,s){const n=r||s.mosaicRule;return n?aa.fromJSON(n):this._isMosaicRuleSupported(s)?aa.fromJSON(s):null}writeMosaicRule(r,s,n){let o=this.mosaicRule;const a=this.definitionExpression;o?a&&a!==o.where&&(o=o.clone(),o.where=a):a&&(o=new aa({where:a})),this._isValidCustomizedMosaicRule(o)&&(s[n]=o.toJSON())}writeNoData(r,s,n){r!=null&&typeof r=="number"&&(s[n]=NPe(r))}readObjectIdField(r,s){return r||(r=s.fields.find(o=>o.type==="esriFieldTypeOID"||o.type==="oid")?.name),r}get parsedUrl(){return $r(this.url)}readSourceType(r,s){return this._isMosaicDataset(s)?"mosaic-dataset":"raster-dataset"}get renderer(){const{activePresetRendererName:r,presetRenderers:s}=this;return r?s?.find(({name:o})=>o===r)?.renderer.clone():this.internalRenderer}set renderer(r){this.activePresetRendererName=null,this.internalRenderer=r}set internalRenderer(r){this.loaded&&(r=this._configRenderer(r)),this._set("internalRenderer",r)}readRenderer(r,s,n){const o=s?.layerDefinition?.drawingInfo?.renderer,a=K5e(o,n);return a==null?null:(a.type==="vector-field"&&s.symbolTileSize&&!o.symbolTileSize&&(a.symbolTileSize=s.symbolTileSize),toe(a)||xe.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a)}writeRenderer(r,s,n){s.layerDefinition=s.layerDefinition||{},s.layerDefinition.drawingInfo=s.layerDefinition.drawingInfo||{},s.layerDefinition.drawingInfo.renderer=r.toJSON(),r.type==="vector-field"&&(s.symbolTileSize=r.symbolTileSize)}get rasterFields(){const r=this._rasterAttributeTableFieldPrefix,s=new na({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new na({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new na({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let a=this.fields?K(this.fields):[];a.push(n),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&a.push(s),this.version>=10.4&&this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.some(u=>u.name.toLowerCase()==="none")&&a.push(o),this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.filter(u=>u.name.toLowerCase()!=="none").forEach(u=>{a.push(new na({name:"Raster.ServicePixelValue."+u.name,alias:u.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(a.push(new na({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),a.push(new na({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:l}=this.rasterInfo??{};if(l!=null){const u=l.fields.filter(h=>h.type!=="esriFieldTypeOID"&&h.name.toLowerCase()!=="value").map(h=>{const p=K(h);return p.name=r+h.name,p});a=a.concat(u)}return a}set rasterFunction(r){let s=r;s?.rasterFunction&&(s=si.fromJSON({...s.toJSON(),rasterFunction:s.rasterFunction,rasterFunctionArguments:s.rasterFunctionArguments})),this._set("rasterFunction",s)}readRasterFunction(r,s){const n=s.rasterFunctionInfos;return s.renderingRule||n?.length&&n[0].name!=="None"?this._isRFTJson(s.renderingRule)?si.fromJSON({rasterFunctionDefinition:s.renderingRule}):si.fromJSON(s.renderingRule||{rasterFunctionInfos:s.rasterFunctionInfos}):null}readSpatialReference(r,s){const n=r||s.extent.spatialReference;return n?ke.fromJSON(n):null}readPixelType(r){return qv.fromJSON(r)||r}writePixelType(r,s,n){this.serviceRasterInfo!=null&&this.pixelType===this.serviceRasterInfo.pixelType||(s[n]=qv.toJSON(r))}readVersion(r,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("fields")||s.hasOwnProperty("timeInfo")?10:9.3),n}applyFilter(r){let s=r;return this.pixelFilter&&(s=this._clonePixelData(r),this.pixelFilter(s)),s}async applyRenderer(r,s){let n=r;const{renderer:o,symbolizer:a,pixelFilter:l,bandIds:u}=this;if(!this._isPicture()&&o&&a&&!l){const h=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(o.toJSON()),p=this._rasterJobHandler.instance;if(p){h&&(a.bind(),await p.updateSymbolizer(a,s),this._cachedRendererJson=o.toJSON());const f=await p.symbolize({bandIds:u,...r},s);n={extent:r.extent,pixelBlock:f}}else n={extent:r.extent,pixelBlock:a.symbolize({bandIds:u,...r})}}return n}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeAngles)throw new W("imagery-layer:compute-angles","this operation is not supported on the input image service");return AOe(this.url,r,this._getRequestOptions(s))}async computePixelSpaceLocations(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputePixelLocation)throw new W("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return $Oe(this.url,r,this._getRequestOptions(s))}async computeHistograms(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeHistograms)throw new W("imagery-layer:compute-histograms","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),ROe(this.url,r,this._getRequestOptions(s))}async computeStatisticsHistograms(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeStatisticsHistograms)throw new W("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),COe(this.url,r,this._getRequestOptions(s))}async measureHeight(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(r.operationType==="base-and-top"?n.mensuration.supportsHeightFromBaseAndTop:r.operationType==="base-and-top-shadow"?n.mensuration.supportsHeightFromBaseAndTopShadow:n.mensuration.supportsHeightFromTopAndTopShadow))throw new W("imagery-layer:measure-height","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),POe(this.url,r,this._getRequestOptions(s))}async measureAreaAndPerimeter(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsAreaAndPerimeter&&(!r.is3D||n.mensuration.supports3D)))throw new W("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),LOe(this.url,r,this._getRequestOptions(s))}async measureDistanceAndAngle(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsDistanceAndAngle&&(!r.is3D||n.mensuration.supports3D)))throw new W("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),kOe(this.url,r,this._getRequestOptions(s))}async measurePointOrCentroid(r,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsPointOrCentroid&&(!r.is3D||n.mensuration.supports3D)))throw new W("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return r=K(r),this._applyMosaicAndRenderingRules(r),NOe(this.url,r,this._getRequestOptions(s))}async measureLengthFromImage(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMeasureFromImage)throw new W("imagery-layer:measure-length-from-image","this operation is not supported on the input image service");if(r.geometry.type!=="polyline")throw new W("imagery-layer:measure-length-from-image","this input geometry must be a polyline");return DOe(this.url,r,this._getRequestOptions(s))}async measureAreaFromImage(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMeasureFromImage)throw new W("imagery-layer:measure-area-from-image","this operation is not supported on the input image service");if(r.geometry.type!=="polygon")throw new W("imagery-layer:measure-area-from-image","this input geometry must be a polygon");return FOe(this.url,r,this._getRequestOptions(s))}getField(r){const{fieldsIndex:s}=this;return s?.get(r)}getFieldDomain(r,s){const n=this.getField(r);return n?n.domain:null}async fetchImage(r,s,n,o={}){if(r==null||s==null||n==null)throw new W("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const p=await this._generateRasterInfo(this.rasterFunction,{signal:o.signal});p&&(this.rasterInfo=p)}const a=this.getExportImageServiceParameters(r,s,n,o.timeExtent);if(a==null){if(o.requestAsImageElement&&this._canRequestImageElement(this.format)){const S=document.createElement("canvas");return S.width=s,S.height=n,o.returnImageBitmap?{imageBitmap:await D3(S,`${i(this.parsedUrl)}/exportImage`,o.signal)}:{imageOrCanvasElement:S}}const{bandIds:p,rasterInfo:f}=this,m=(p?.length||f.bandCount)??0,g=s*n,b=f.pixelType,w=[];for(let S=0;S<m;S++)w.push(At.createEmptyBand(b,g));return{pixelData:{pixelBlock:new At({width:s,height:n,pixels:w,mask:new Uint8Array(g),pixelType:b}),extent:r}}}const l=!!o.requestAsImageElement&&!this.pixelFilter,u=l&&!!o.returnImageBitmap,h={imageServiceParameters:a,imageProps:{extent:r,width:s,height:n,format:this.format},requestAsImageElement:l,returnImageBitmap:u,signal:o.signal};return this._requestArrayBuffer(h)}fetchKeyProperties(r){return Ne(i(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.rasterFunction:null})}).then(s=>s.data)}fetchRasterAttributeTable(r){return this.version<10.1?Promise.reject(new W("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Ne(i(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.rasterFunction:null})}).then(s=>Sg.fromJSON(s.data))}getCatalogItemRasterInfo(r,s){const n={...s,query:this._getQueryParams()};return JOe(i(this.parsedUrl),r,n)}async getCatalogItemICSInfo(r,s){const{data:n}=await Ne(i(this.parsedUrl)+"/"+r+"/info/ics",{query:this._getQueryParams(),...s}),o=n?.ics;if(!o)return;let a=null;try{a=(await Ne(i(this.parsedUrl)+"/"+r+"/info",{query:this._getQueryParams(),...s})).data.extent}catch{}if(!a?.spatialReference)return{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null};const l=this.version>=10.7?Ne(i(this.parsedUrl)+"/"+r+"/info/icstopixel",{query:this._getQueryParams(),...s}).then(E=>E.data).catch(()=>({})):{},u=a.spatialReference,h={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[a]}),inSR:Xd(u),outSR:"0:"+r},p=Ne(i(this.parsedUrl)+"/project",{query:this._getQueryParams(h),...s}).then(E=>E.data).catch(()=>({})),f=5,m=(a.xmin+a.xmax)/2,g=(a.ymax-a.ymin)/(f+1),b=a.ymin+g,w=[];for(let E=0;E<f;E++)w.push({x:m,y:b+g*E});const S={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:w}),inSR:Xd(u),outSR:"0:"+r},T=Ne(i(this.parsedUrl)+"/project",{query:this._getQueryParams(S),...s}).then(E=>E.data).catch(()=>({})),x=await Promise.all([l,p,T]);let _=x[0].ipxf;if(_==null){const E=o.geodataXform?.xf_0;E?.name?.toLowerCase()==="topup"&&E?.coefficients?.length===6&&(_={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:E.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const M=bt.fromJSON(x[1]?.geometries?.[0]);M&&(M.spatialReference=new ke({wkid:0,imageCoordinateSystem:o}));const I=x[2].geometries?x[2].geometries.filter(E=>E?.x!=null&&E.y!=null&&E.x!=="NaN"&&E.y!=="NaN"):[],A=I.length;if(A<3)return{ics:o,icsToPixelTransform:_,icsExtent:M,northDirection:null};let C=0,R=0,O=0,k=0;for(let E=0;E<A;E++)C+=I[E].x,R+=I[E].y,O+=I[E].x*I[E].x,k+=I[E].x*I[E].y;const L=(A*k-C*R)/(A*O-C*C);let V=0;const J=I[f-1].x>I[0].x,y=I[f-1].y>I[0].y;return L===1/0?V=y?90:270:L===0?V=J?0:180:L>0?V=J?180*Math.atan(L)/Math.PI:180*Math.atan(L)/Math.PI+180:L<0&&(V=y?180+180*Math.atan(L)/Math.PI:360+180*Math.atan(L)/Math.PI),{ics:o,icsToPixelTransform:_,icsExtent:M,northDirection:V}}async generateRasterInfo(r,s){r=Ki(si,r);const n={...s,query:this._getQueryParams()};if(!r||r.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(r))return this.serviceRasterInfo??Zq(i(this.parsedUrl),this.sourceJSON,n);const o=kPe(r);if(!o)throw new W("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[o])return this._functionRasterInfos[o];const a=HOe(i(this.parsedUrl),r,n);this._functionRasterInfos[o]=a;try{return await a}catch(l){throw this._functionRasterInfos[o]=null,l}}getExportImageServiceParameters(r,s,n,o){r=r.clone().shiftCentralMeridian();const a=bb(r.spatialReference,i(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const l=this.exportImageServiceParameters.toJSON(),{bandIds:u,noData:h}=l;let{renderingRule:p}=l;const f=this.rasterFunction?.rasterFunctionDefinition,m=this.renderer?.type,g=!m||m==="raster-stretch"||m==="raster-colormap"||m==="unique-value"||m==="class-breaks"||m==="raster-shaded-relief";if(u?.length&&this._hasRasterFunction(this.rasterFunction)&&!f&&g){const S={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:u}};if(p.rasterFunction==="Stretch")S.rasterFunctionArguments.Raster=p.rasterFunctionArguments.Raster,p.rasterFunctionArguments.Raster=S;else if(p.rasterFunction==="Colormap"){const T=p.rasterFunctionArguments.Raster;T?.rasterFunction==="Stretch"?(S.rasterFunctionArguments.Raster=T.rasterFunctionArguments.Raster,T.rasterFunctionArguments.Raster=S):(S.rasterFunctionArguments.Raster=T,p.rasterFunctionArguments.Raster=S)}else S.rasterFunctionArguments.Raster=p,p=S;l.bandIds=void 0}else l.bandIds=u?.join(",");Array.isArray(h)&&h.length>0&&(l.noData=h.join(","));const b=this._processMultidimensionalIntersection(null,o,this.exportImageServiceParameters.mosaicRule);if(b.isOutSide)return null;l.mosaicRule=b.mosaicRule!=null?JSON.stringify(b.mosaicRule):null,o=b.timeExtent,l.renderingRule=this._getRenderingRuleString(si.fromJSON(p));const w={};if(o!=null){const{start:S,end:T}=o.toJSON();S&&T&&S===T?w.time=""+S:S==null&&T==null||(w.time=`${S??"null"},${T??"null"}`)}return{bbox:r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:a,imageSR:a,size:s+","+n,...l,...w}}async getSamples(r,s){if(!(await this._fetchCapabilities(s?.signal))?.operations.supportsGetSamples)throw new W("imagery-layer:get-samples","getSamples operation is not supported on the input image service");r=K(r);const{raster:o}=this;return o&&r.raster==null&&(r.raster=o),OOe(this.url,r,this._getRequestOptions(s))}async identify(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsIdentify)throw new W("imagery-layer:identify","identify operation is not supported on the input image service");r=K(r),this.version<10.91&&r.geometry?.type==="extent"&&(r.geometry=Rs.fromExtent(r.geometry));const n=this._processMultidimensionalIntersection(r.geometry,r.timeExtent,r.mosaicRule||this.mosaicRule);if(n.isOutSide)throw new W("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");r.timeExtent=n.timeExtent,r.mosaicRule=n.mosaicRule;const{raster:o,rasterFunction:a}=this;return a&&r.rasterFunction==null&&(r.rasterFunction=a),o&&r.raster==null&&(r.raster=o),Jq(this.url,r,this._getRequestOptions(s))}async imageToMap(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsImageToMap)throw new W("imagery-layer:image-to-map","imageToMap operation is not supported on the input image service");return VOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async imageToMapMultiray(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsImageToMapMultiray)throw new W("imagery-layer:image-to-map-multiray","imageToMapMultiray operation is not supported on the input image service");return GOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async mapToImage(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMapToImage)throw new W("imagery-layer:map-to-image","mapToImage operation is not supported on the input image service");return BOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async findImages(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsFindImages)throw new W("imagery-layer:find-images","findImages operation is not supported on the input image service");return qOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async getImageUrl(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsGetImageUrl)throw new W("imagery-layer:get-image-url","getImageUrl operation is not supported on the input image service");return zOe(i(this.parsedUrl),r,this._getRequestOptions(s))}createQuery(){return new Dr({outFields:["*"],returnGeometry:!0,where:this.definitionExpression||"1=1"})}async queryBoundary(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQueryBoundary)throw new W("imagery-layer:query-boundary","queryBoundary operation is not supported on the input image service");return r=r??{outSpatialReference:this.spatialReference},jOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async queryRasters(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),TPe(this.url,r,s)}async queryObjectIds(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),k9(this.url,r,s)}async queryGPSInfo(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQueryGPSInfo)throw new W("imagery-layer:query-gps-info","queryGPSInfo operation is not supported on the input image service");return r=r??{where:"1=1"},UOe(i(this.parsedUrl),r,this._getRequestOptions(s))}async queryRasterCount(r,s){return{query:r,requestOptions:s}=await this._prepareForQuery(r,s),joe(this.url,r,s)}async queryVisibleRasters(r,s){if(!r)throw new W("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:n,returnDomainValues:o,returnTopmostRaster:a,showNoDataRecords:l}=s||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let u=!1,h=null,p=null;const f="raster.servicepixelvalue",m=this._rasterFunctionNamesIndex;if(r.outFields!=null&&(u=r.outFields.some(M=>!M.toLowerCase().includes(f)),this.version>=10.4)){const M=r.outFields.filter(A=>A.toLowerCase().includes(f)&&A.length>f.length).map(A=>{const C=A.slice(f.length+1);return[this._updateRenderingRulesFunctionName(C,m),C]});h=M.map(A=>new si({functionName:A[0]})),p=M.map(A=>A[1]);const{rasterFunction:I}=this;h.length===0?I?.functionName?(h.push(I),p.push(I.functionName)):h=null:I?.functionName&&!h.some(A=>A.functionName===I.functionName)&&(h.push(I),p.push(I.functionName))}const g=r.outSpatialReference==null||r.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:b}=this;let w=r.timeExtent||this.timeExtent;if(b){const{isOutside:M,intersection:I}=U4(b,{geometry:r.geometry,timeExtent:r.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(M)throw new W("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");I?.timeExtent!=null&&(w=I.timeExtent)}const S=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,w);let T=r.geometry;this.version<10.91&&T?.type==="extent"&&(T=Rs.fromExtent(T));const x=this._getQueryParams({geometry:T,timeExtent:w,mosaicRule:S,rasterFunction:this.version<10.4?this.rasterFunction:null,rasterFunctions:h,pixelSize:n,returnCatalogItems:u,returnGeometry:g,raster:this.raster,maxItemCount:a?1:null});delete x.f;const _=new Roe(x);try{await this._generateRasterInfo(this.rasterFunction);const M=await Jq(this.url,_,{signal:s?.signal,query:{...this.customParameters}}),I=r.outFields,A=M.value!=null&&M.value.toLowerCase().includes("nodata");if(!(u&&!g&&M?.catalogItems?.features.length&&(l||!A)))return this._processVisibleRastersResponse(M,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:l,templateFields:I});const C=this.objectIdField||"ObjectId",R=M.catalogItems?.features??[],O=R.map(V=>V.attributes?.[C]),k=new Dr({objectIds:O,returnGeometry:!0,outSpatialReference:r.outSpatialReference,outFields:[C]}),L=await this.queryRasters(k);return L?.features?.length&&L.features.forEach(V=>{R.forEach(J=>{J.attributes[C]===V.attributes[C]&&V.geometry&&(J.geometry=V.geometry.clone(),r.outSpatialReference!=null&&(J.geometry.spatialReference=r.outSpatialReference))})}),this._processVisibleRastersResponse(M,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:l,templateFields:I})}catch{throw new W("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(r,s){const n=Ne(i(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:r}),signal:s}).then(l=>l.data?.statistics),o=Ne(i(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:r}),signal:s}).then(l=>l.data?.histograms),a=await Promise.all([n,o]);return a[0]&&a[0].forEach(l=>{l.avg=l.mean,l.stddev=l.standardDeviation}),{statistics:a[0]||null,histograms:a[1]||null}}async createFlowMesh(r,s){const n=this._rasterJobHandler.instance;return n?n.createFlowMesh(r,s):MPe(r.meshType,r.simulationSettings,r.flowData,s.signal!=null?s.signal:new AbortController().signal)}getMultidimensionalSubsetVariables(r){const s=r??this.serviceRasterInfo.multidimensionalInfo;return E4e(this.multidimensionalSubset,s)}async _fetchService(r){await this._fetchServiceInfo(r),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const s=this.sourceJSON,n=this.serviceRasterInfo!=null?Promise.resolve(this.serviceRasterInfo):Zq(i(this.parsedUrl),s,{signal:r,query:this._getQueryParams()}).then(l=>(this._set("serviceRasterInfo",l),this._set("multidimensionalInfo",l.multidimensionalInfo),WOe(l,s),l)),o=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:r}):null,a=this._getRasterFunctionInfos();return Promise.all([n,o,a]).then(l=>{l[1]?this._set("rasterInfo",l[1]):this._set("rasterInfo",l[0]),l[2]&&this._set("rasterFunctionInfos",l[2]),this.internalRenderer&&!this._isSupportedRenderer(this.internalRenderer)&&(this._set("internalRenderer",null),xe.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("internalRenderer",this._configRenderer(this.renderer)),this.addHandles([at(()=>this.rasterFunction,h=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(h).then(p=>{p&&(this.rasterInfo=p)})})]);const{serviceRasterInfo:u}=this;u.multidimensionalInfo!=null&&this._updateMultidimensionalDefinition(u)})}_combineMosaicRuleWithTimeExtent(r,s){const n=this.timeInfo,{multidimensionalInfo:o}=this.serviceRasterInfo;if(r==null||o==null||s==null||n?.startField==null)return r;const{startField:a}=n,l=o.variables.some(b=>b.dimensions.some(w=>w.name===a))?a:"StdTime";if(r=r.clone(),this.sourceType==="mosaic-dataset")return r.multidimensionalDefinition=r.multidimensionalDefinition?.filter(b=>b.dimensionName!==l),this._cleanupMultidimensionalDefinition(r);r.multidimensionalDefinition=r.multidimensionalDefinition||[];const u=r.multidimensionalDefinition.filter(b=>b.dimensionName===l),h=s.start!=null?s.start.getTime():null,p=s.end!=null?s.end.getTime():null,f=h==null||p==null||h===p,m=f?[h||p]:[[h,p]],g=this.version>=10.8;if(u.length)u.forEach(b=>{b.dimensionName===l&&(g?(b.dimensionName=null,b.isSlice=!1,b.values=[]):(b.isSlice=f,b.values=m))});else if(!g){const b=r.multidimensionalDefinition.filter(w=>w.variableName!=null&&w.dimensionName==null);b.length?b.forEach(w=>{w.dimensionName=l,w.isSlice=f,w.values=m}):r.multidimensionalDefinition.push(new T1({variableName:"",dimensionName:l,isSlice:f,values:m}))}return this._cleanupMultidimensionalDefinition(r)}_cleanupMultidimensionalDefinition(r){return r==null?null:(r.multidimensionalDefinition&&(r.multidimensionalDefinition=r.multidimensionalDefinition.filter(s=>!(!s.variableName&&!s.dimensionName)),r.multidimensionalDefinition.length===0&&(r.multidimensionalDefinition=null)),this.sourceType!=="mosaic-dataset"&&r.multidimensionalDefinition==null?null:r)}async _prepareForQuery(r,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQuery)throw new W("imagery-layer:query-rasters","query operation is not supported on the input image service");return r=r!=null?Ki(Dr,r):this.createQuery(),s=this._getRequestOptions(s),this.raster&&(s.query={...s.query,raster:this.raster}),{query:r,requestOptions:s}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new w4e;this._rasterJobHandler.connectionPromise=r.initialize().then(()=>{this._rasterJobHandler.instance=r},()=>{}),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(r){const{rasterInfo:s,rasterFunction:n}=this;return r.type==="unique-value"&&this._hasRasterFunction(n)&&s?.bandCount===1&&["u8","s8"].includes(s.pixelType)||s!=null&&r!=null&&ERe(s).includes(r.type)}async _fetchCapabilities(r){return this.capabilities||await this._fetchServiceInfo(r),this.capabilities}async _fetchServiceInfo(r){let s=this.sourceJSON;if(!s){const{data:n,ssl:o}=await Ne(i(this.parsedUrl),{query:this._getQueryParams(),signal:r});s=n,this.sourceJSON=s,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(s.capabilities?.toLowerCase().split(",").map(n=>n.trim()).indexOf("tilesonly")>-1)throw new W("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(s,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(r){return r.serviceSourceType?r.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":r.fields?.length>0}_isMosaicRuleSupported(r){if(!r)return!1;const s=this._isMosaicDataset(r),n=r.currentVersion>=10.71&&r.hasMultidimensions&&!(r.fields?.length>1);return s||n}_isVectorFieldResampleFunction(r){if(r==null)return!1;const{functionName:s,functionArguments:n}=r,o=s?.toLowerCase()==="resample",a=n?.ResampleType||n?.resampleType;return o&&(a===7||a===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(r){const s=this._isPicture(),{rasterInfo:n}=this;if(!s&&!this.pixelFilter||this._isVectorDataSet()){const o=this.mosaicRule?.multidimensionalDefinition?.[0].variableName,a=xRe({variableName:o,rasterFunctionName:this.rasterFunction?.functionName,presetRenderers:this.presetRenderers});if(!this.bandIds&&n.bandCount>=3){const u=a?.bandIds??Eoe(n);!u||n.bandCount===3&&u[0]===0&&u[1]===1&&u[2]===2||(this.bandIds=u)}r||(r=a?.renderer??TRe(n,{bandIds:this.bandIds,variableName:this.rasterFunction?null:o}));const l=LRe(r.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=l,this.symbolizer.rasterInfo=n):this.symbolizer=new zRe({rendererJSON:l,rasterInfo:n}),this.symbolizer.bind().success||(this.symbolizer=null)}return r}_clonePixelData(r){return r==null?r:{extent:r.extent&&r.extent.clone(),pixelBlock:r.pixelBlock!=null?r.pixelBlock.clone():null}}_getQueryParams(r){r?.renderingRule!=null&&typeof r.renderingRule!="string"&&(r.renderingRule=this._getRenderingRuleString(r.renderingRule));const{raster:s,viewId:n}=this;return{raster:s,viewId:n,f:"json",...r,...this.customParameters}}_getRequestOptions(r){return{...r,query:{...r?.query,...this.customParameters}}}_decodePixelBlock(r,s,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:r,options:s}):Uq(r,s,n)}async _getRasterFunctionInfos(r){const s=this.sourceJSON.rasterFunctionInfos;return this.loaded?s:s&&this.version>=10.3?s.length===1&&s[0].name.toLowerCase()==="none"?s:(await Ne(i(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:r})).data?.rasterFunctionInfos:null}_canRequestImageElement(r){return!this.pixelFilter&&(!r||r.includes("png"))}async _requestArrayBuffer(r){const{imageProps:s,requestAsImageElement:n,returnImageBitmap:o,signal:a}=r;if(n&&this._canRequestImageElement(s.format)){const b=`${i(this.parsedUrl)}/exportImage`,{data:w}=await Ne(b,{responseType:o?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...r.imageServiceParameters}),signal:a});return w instanceof Blob?{imageBitmap:await D3(w,b,a),params:s}:{imageOrCanvasElement:w,params:s}}const l=this._initJobHandler(),u=Ne(i(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:a}),h=(await Promise.all([u,l]))[0].data,p=s.format||"jpgpng";let f=p;if(f!=="bsq"&&f!=="bip"&&(f=gRe(h)),!f)throw new W("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(h)));const m={signal:a};return{pixelData:{pixelBlock:await(p==="gif"||p==="bmp"||p.includes("png")&&(f==="png"||f==="jpg")?Uq(h,{useCanvas:!0,...s},m):this._decodePixelBlock(h,{width:s.width,height:s.height,planes:null,pixelType:null,noDataValue:null,format:p},m)),extent:s.extent},params:s}}_generateRasterInfo(r,s){return this.generateRasterInfo(r,s).catch(()=>null)}_isValidCustomizedMosaicRule(r){return r&&JSON.stringify(r.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(r){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let s=T4e(r,{multidimensionalSubset:this.multidimensionalSubset});if(s!=null&&s.length>0){this.mosaicRule=this.mosaicRule||new aa;const n=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&this.rasterFunction.functionName?.toLowerCase()!=="none"&&s.forEach(o=>o.variableName=""),s=s.filter(({variableName:o,dimensionName:a})=>o&&o!=="*"||a),!n?.length&&s.length&&(this.mosaicRule.multidimensionalDefinition=s)}}_processVisibleRastersResponse(r,s){s=s||{};const n=r.value,{templateRRFunctionNames:o,showNoDataRecords:a,returnDomainValues:l,templateFields:u}=s,h=r.processedValues;let p=r.catalogItems?.features,f=r.properties?.Values?.map(x=>x.replaceAll(/ /gi,", "))||[];const m=this.objectIdField||"ObjectId",g=typeof n=="string"&&n.toLowerCase().includes("nodata"),b=[];if(n&&!p&&!g){const x={};x[m]=0,f=[n],p=[new nl({geometry:this.fullExtent,attributes:x})]}if(!p)return[];let w,S,T;this._updateResponseFieldNames(p,u),g&&!a&&(p=[]);for(let x=0;x<p.length;x++){if(w=p[x],n!=null){if(S=f[x],T=this.rasterFunction&&h&&h.length>0&&o&&o.length>0&&o.includes(this.rasterFunction.functionName)?h[o.indexOf(this.rasterFunction.functionName)]:n,S.toLowerCase()==="nodata"&&!a)continue;const _="Raster.ItemPixelValue",M="Raster.ServicePixelValue";w.attributes[_]=S,w.attributes[M]=T,this._updateFeatureWithMagDirValues(w,S);const I=this.fields&&this.fields.length>0;let A=this.rasterFunction&&this.serviceRasterInfo.attributeTable!=null?I?S:n:T;this.rasterFunction||(A=I?S:n),this._updateFeatureWithRasterAttributeTableValues(w,A)}if(w.sourceLayer=w.layer=this,l&&this._updateFeatureWithDomainValues(w),o&&h&&o.length===h.length)for(let _=0;_<o.length;_++){const M="Raster.ServicePixelValue."+o[_];w.attributes[M]=h[_]}b.push(p[x])}return b}_processMultidimensionalIntersection(r,s,n){const{multidimensionalSubset:o}=this;if(!o)return{isOutSide:!1,timeExtent:s,mosaicRule:n=this._combineMosaicRuleWithTimeExtent(n,s)};if(o){const{isOutside:a,intersection:l}=U4(o,{geometry:r,timeExtent:s});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null};l?.timeExtent!=null&&(s=l.timeExtent)}if(n=this._combineMosaicRuleWithTimeExtent(n,s),n?.multidimensionalDefinition){const{isOutside:a}=U4(o,{multidimensionalDefinition:n.multidimensionalDefinition});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:s,mosaicRule:n}}_updateFeatureWithRasterAttributeTableValues(r,s){const n=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(n==null)return;const{features:o,fields:a}=n,l=a.map(h=>h.name).find(h=>h.toLowerCase()==="value");if(!l)return;const u=o.filter(h=>h.attributes[l]===(s!=null?parseInt(s,10):null));u&&u[0]&&a.forEach(h=>{const p=this._rasterAttributeTableFieldPrefix+h.name;r.attributes[p]=u[0].attributes[h.name]})}_updateFeatureWithMagDirValues(r,s){if(!this._isVectorDataSet())return;const n=s.split(/,\s*/).map(h=>parseFloat(h)),o=n.map(h=>[h]),a=n.map(h=>({minValue:h,maxValue:h,noDataValue:null})),l=new At({height:1,width:1,pixelType:"f32",pixels:o,statistics:a});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:l,extent:new bt(0,0,0,0,this.spatialReference)});const u=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[l.pixels[0][0],l.pixels[1][0]]:x9([l.pixels[0][0],l.pixels[1][0]]);r.attributes["Raster.Magnitude"]=u[0],r.attributes["Raster.Direction"]=u[1]}_updateFeatureWithDomainValues(r){const s=this.fields&&this.fields.filter(n=>n.domain&&n.domain.type==="coded-value");s?.forEach(n=>{const o=r.attributes[n.name];if(o!=null){const a=n.domain.codedValues.find(l=>l.code===o);a&&(r.attributes[n.name]=a.name)}})}_updateResponseFieldNames(r,s){if(!s||s.length<1)return;const n=this.fieldsIndex;n!=null&&r.forEach(o=>{if(o?.attributes)for(const a of s){const l=n.get(a)?.name;l&&l!==a&&(o.attributes[a]=o.attributes[l],delete o.attributes[l])}})}_getRenderingRuleString(r){if(r){let s=r.toJSON();return s=s.rasterFunctionDefinition??s,(s.thumbnail||s.thumbnailEx)&&(s.thumbnail=s.thumbnailEx=null),JSON.stringify(s)}return null}_hasRasterFunction(r){return r?.functionName!=null&&r.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(r,s){if(!r||r.length<1)return;if(r==="Raw")return r.replace("Raw","None");const n=r.toLowerCase().replaceAll(/ /gi,"_");return s.has(n)?s.get(n):r}_isRFTJson(r){return r?.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_applyMosaicAndRenderingRules(r){const{raster:s,mosaicRule:n,rasterFunction:o}=this;o&&"rasterFunction"in r&&r.rasterFunction==null&&(r.rasterFunction=o),n&&r.mosaicRule==null&&(r.mosaicRule=n),s&&r.raster==null&&(r.raster=s)}_readCapabilities(r){const s=r.capabilities?r.capabilities.toLowerCase().split(",").map(S=>S.trim()):["image","catalog"],{currentVersion:n,advancedQueryCapabilities:o,maxRecordCount:a}=r,l=s.includes("image"),u=r.serviceDataType==="esriImageServiceDataTypeElevation",h=!(!r.spatialReference&&!r.extent?.spatialReference),p=s.includes("edit"),f=s.includes("mensuration")&&h,m=r.mensurationCapabilities==null?[]:r.mensurationCapabilities.toLowerCase().split(",").map(S=>S.trim()),g=f&&m.includes("basic"),b=this._isMosaicDataset(r)&&s.includes("catalog"),w=s.includes("download");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:l,supportsExportImage:l,supportsIdentify:l,supportsImageToMap:n>=11.2&&b,supportsImageToMapMultiray:n>=11.2&&b,supportsMapToImage:n>=11.2&&b,supportsFindImages:n>=11.2&&b,supportsGetImageUrl:n>=11.3&&w,supportsMeasure:f,supportsMeasureFromImage:n>=11.2,supportsDownload:w,supportsQuery:b&&r.fields&&r.fields.length>0,supportsGetSamples:n>=10.2&&l,supportsProject:n>=10.3&&l,supportsComputeStatisticsHistograms:n>=10.4&&l,supportsQueryBoundary:n>=10.6&&l,supportsCalculateVolume:n>=10.7&&u,supportsComputePixelLocation:n>=10.7&&b,supportsComputeAngles:n>=10.91,supportsQueryGPSInfo:n>=11.2&&b,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsUpdate:p,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!!o?.supportsStatistics,supportsOrderBy:!!o?.supportsOrderBy,supportsDistinct:!!o?.supportsDistinct,supportsPagination:!!o?.supportsPagination,supportsStandardizedQueriesOnly:!!o?.useStandardizedQueries,supportsPercentileStatistics:!!o?.supportsPercentileStatistics,supportsCentroid:!!o?.supportsReturningGeometryCentroid,supportsDistance:!!o?.supportsQueryWithDistance,supportsExtent:!!o?.supportsReturningQueryExtent,supportsGeometryProperties:!!o?.supportsReturningGeometryProperties,supportsHavingClause:!!o?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!o?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:g,supportsAreaAndPerimeter:g,supportsPointOrCentroid:g,supportsHeightFromBaseAndTop:f&&m.includes("base-top height"),supportsHeightFromBaseAndTopShadow:f&&m.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:f&&m.includes("top-top shadow height"),supports3D:f&&m.includes("3d")}}}};function i(r){return r?.path??""}return c([d({clonable:!1})],t.prototype,"_functionRasterInfos",void 0),c([d({clonable:!1})],t.prototype,"_rasterJobHandler",void 0),c([d({clonable:!1})],t.prototype,"_cachedRendererJson",void 0),c([d({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),c([ue("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),c([d({readOnly:!0})],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),c([d({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),c([d()],t.prototype,"adjustAspectRatio",void 0),c([d({type:[vt],json:{write:!0}})],t.prototype,"bandIds",void 0),c([ue("bandIds")],t.prototype,"readBandIds",null),c([d({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),c([ue("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),c([d({type:Number})],t.prototype,"compressionQuality",void 0),c([ge("compressionQuality")],t.prototype,"writeCompressionQuality",null),c([d({type:Number})],t.prototype,"compressionTolerance",void 0),c([ge("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),c([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([d({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),c([ue("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),c([d({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),c([d({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),c([d()],t.prototype,"rasterInfo",void 0),c([d({readOnly:!0,type:[na]})],t.prototype,"fields",void 0),c([d({readOnly:!0})],t.prototype,"fieldsIndex",null),c([d({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff","bip","bsq"],json:{write:!0}})],t.prototype,"format",null),c([ue("service","format",["serviceDataType"])],t.prototype,"readFormat",null),c([d({type:bt})],t.prototype,"fullExtent",void 0),c([d({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),c([d({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),c([d({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),c([d({type:String,json:{type:Bd.jsonValues,read:Bd.read,write:Bd.write}})],t.prototype,"interpolation",void 0),c([d()],t.prototype,"minScale",void 0),c([ue("service","minScale")],t.prototype,"readMinScale",null),c([d()],t.prototype,"maxScale",void 0),c([ue("service","maxScale")],t.prototype,"readMaxScale",null),c([d({type:aa})],t.prototype,"mosaicRule",null),c([ue("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),c([ge("mosaicRule")],t.prototype,"writeMosaicRule",null),c([d()],t.prototype,"multidimensionalInfo",void 0),c([d({type:v4e,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),c([d({json:{type:vt}})],t.prototype,"noData",void 0),c([ge("noData")],t.prototype,"writeNoData",null),c([d({type:String,json:{type:s2.jsonValues,read:s2.read,write:s2.write}})],t.prototype,"noDataInterpretation",void 0),c([d({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),c([ue("objectIdField")],t.prototype,"readObjectIdField",null),c([d({readOnly:!0})],t.prototype,"geometryType",void 0),c([d({})],t.prototype,"typeIdField",void 0),c([d({})],t.prototype,"types",void 0),c([d({readOnly:!0})],t.prototype,"parsedUrl",null),c([d({type:Function})],t.prototype,"pixelFilter",void 0),c([d()],t.prototype,"raster",void 0),c([d({readOnly:!0})],t.prototype,"sourceType",void 0),c([ue("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),c([d()],t.prototype,"viewId",void 0),c([d()],t.prototype,"renderer",null),c([d({types:L3,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:N3,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="flow"})}}}}})],t.prototype,"internalRenderer",null),c([ue("internalRenderer")],t.prototype,"readRenderer",null),c([ge("internalRenderer")],t.prototype,"writeRenderer",null),c([d({clonable:!1})],t.prototype,"symbolizer",void 0),c([d(C3)],t.prototype,"opacity",void 0),c([d({readOnly:!0})],t.prototype,"rasterFields",null),c([d({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),c([d({type:si,json:{name:"renderingRule"}})],t.prototype,"rasterFunction",null),c([ue("rasterFunction",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRasterFunction",null),c([d({readOnly:!0})],t.prototype,"serviceDataType",void 0),c([d({readOnly:!0,type:ke})],t.prototype,"spatialReference",void 0),c([ue("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),c([d({json:{type:qv.jsonValues}})],t.prototype,"pixelType",void 0),c([ue("pixelType")],t.prototype,"readPixelType",null),c([ge("pixelType")],t.prototype,"writePixelType",null),c([d({constructOnly:!0,type:yC})],t.prototype,"serviceRasterInfo",void 0),c([d()],t.prototype,"sourceJSON",void 0),c([d(fx)],t.prototype,"url",void 0),c([d({readOnly:!0})],t.prototype,"version",void 0),c([ue("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=c([F("esri.layers.mixins.ArcGISImageService")],t),t};let ed=class extends Dt(ae){constructor(t){super(t),this.name=void 0,this.method="none",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};c([d({type:String,json:{write:!0}})],ed.prototype,"name",void 0),c([d({type:["raster-function-template","variable","none"],json:{write:!0}}),Ue({rasterFunctionTemplate:"raster-function-template",variable:"variable",none:"none"})],ed.prototype,"method",void 0),c([d({type:String,json:{write:!0}})],ed.prototype,"value",void 0),c([d({type:[vt],json:{write:!0}})],ed.prototype,"bandIds",void 0),c([d({types:L3,json:{write:!0,origins:{"web-scene":{types:N3,write:{overridePolicy:e=>({enabled:e&&e.type!=="vector-field"&&e.type!=="flow"})}}}}})],ed.prototype,"renderer",void 0),ed=c([F("esri.renderers.support.RasterPresetRenderer")],ed);const FPe=ed,jPe=e=>{let t=class extends e{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return c([d({type:String,json:{name:"layerDefinition.activePresetRendererName",write:{allowNull:!0}}})],t.prototype,"activePresetRendererName",void 0),c([d({type:[FPe],json:{name:"layerDefinition.presetRenderers",write:!0}})],t.prototype,"presetRenderers",void 0),t=c([F("esri.layers.mixins.RasterPresetRendererMixin")],t),t};let ea=class extends xg(fC(Tg(yb(gb(jPe(DPe(vb(lC(sC(wf(Dt(_f)))))))))))){constructor(...t){super(...t),this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery",this._debouncedSaveOperations=h$(async(i,r,s)=>{const{save:n,saveAs:o}=await ce(()=>import("./imageryUtils-kMJsMCvA.js"),__vite__mapDeps([146,139,137,138,135,140,1]),import.meta.url);switch(i){case Qu.SAVE:return n(this,r);case Qu.SAVE_AS:return o(this,s,r)}})}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},t).catch(_o).then(()=>this._fetchService(i))),Promise.resolve(this)}get legendEnabled(){return!this._isPreviewLayer&&(this._get("legendEnabled")??!0)}set legendEnabled(t){this._set("legendEnabled",t)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(t){this._set("listMode",t)}writeOperationalLayerType(t,i,r){const s=this.renderer?.type==="vector-field";i[r]=s?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(t){const i=this.rasterFields,r=this.title,s=new Set;let n=!1,o=!1;this.capabilities&&(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,o=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const a=new Set;n&&a.add("raster.itempixelvalue");for(const u of i){const h=u.name.toLowerCase();a.has(h)||h.includes("raster.servicepixelvalue.")||s.add(u.name)}o&&s.add("raster.magnitude").add("raster.direction");const l=m9({fields:i,title:r},{...t,visibleFieldNames:s});return l?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&l.fieldInfos.forEach(({format:u,fieldName:h})=>{u&&h&&/^raster\.(item|service)pixelvalue/i.test(h)&&(u.places=2)}),l}queryFeatures(t,i){return this.queryRasters(t,i).then(r=>{if(r?.features)for(const s of r.features)s.layer=s.sourceLayer=this;return r})}queryFeatureCount(t,i){return this.queryRasterCount(t,i)}redraw(){this.emit("redraw")}async save(t){return this._debouncedSaveOperations(Qu.SAVE,t)}async saveAs(t,i){return this._debouncedSaveOperations(Qu.SAVE_AS,i,t)}serviceSupportsSpatialReference(t){return f9(this,t)}write(t,i){if(!this._isPreviewLayer)return super.write(t,i);if(i?.messages){const r=`${i.origin}/${i.layerContainerType||"operational-layers"}`;i.messages.push(new W("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${r}'`,{layer:this}))}return null}};c([d(e9)],ea.prototype,"legendEnabled",null),c([d({type:["show","hide"]})],ea.prototype,"listMode",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ea.prototype,"isReference",void 0),c([d({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],ea.prototype,"operationalLayerType",void 0),c([ge("web-map","operationalLayerType")],ea.prototype,"writeOperationalLayerType",null),c([d(dx)],ea.prototype,"popupEnabled",void 0),c([d({type:df,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],ea.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],ea.prototype,"defaultPopupTemplate",null),c([d({readOnly:!0,json:{read:!1}})],ea.prototype,"type",void 0),c([d({readOnly:!0})],ea.prototype,"_isPreviewLayer",null),ea=c([F("esri.layers.ImageryLayer")],ea);const Voe=ea,xmt=Object.freeze(Object.defineProperty({__proto__:null,default:Voe},Symbol.toStringTag,{value:"Module"})),Goe=96;function Jk(e,t){const i=e.extent,r=e.width,s=$c(i?.spatialReference);return i&&r?i.width/r*s*GQ*Goe:0}function Tmt(e,t){return e/($c(t)*GQ*Goe)}function UPe(e,t,i){return VPe(e,t)&&GPe(e,i)}function VPe(e,t){return t===0||U_(e,t)||e<t}function GPe(e,t){return t===0||U_(e,t)||e>t}const Boe=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(i,r){const s=r.capabilities&&r.capabilities.split(",").map(T=>T.toLowerCase().trim());if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,o=n!=="tile"&&!!r.supportsDynamicLayers,a=s.includes("query"),l=s.includes("map"),u=!!r.exportTilesAllowed,h=s.includes("tilemap"),p=s.includes("data"),f=n!=="tile"&&(!r.tileInfo||o),m=n!=="tile"&&(!r.tileInfo||o),g=n!=="tile",b=r.cimVersion?P8.parse(r.cimVersion):null,w=b?.greaterEqual(1,4)??!1,S=b?.greaterEqual(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:p,supportsTileMap:h},exportMap:l?{supportsArcadeExpressionForLabeling:w,supportsSublayersChanges:g,supportsDynamicLayers:o,supportsSublayerVisibility:f,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:S}:null,exportTiles:u?{maxExportTilesCount:+r.maxExportTilesCount}:null}}readVersion(i,r){let s=r.currentVersion;return s||(s=r.hasOwnProperty("capabilities")||r.hasOwnProperty("tables")?10:r.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),s}async fetchRelatedService(i){const r=this.portalItem;if(!r||!sq(r))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},i).then(n=>n.find(o=>o.type==="Feature Service")??null,()=>null));const s=await this._relatedFeatureServicePromise;return wi(i),s?{itemId:s.id,url:s.url}:null}async fetchSublayerInfo(i,r){const{source:s}=i;if(this?.portalItem&&this.type==="tile"&&s?.type==="map-layer"&&sq(this.portalItem)&&i.originIdOf("url")<je.SERVICE){const a=await this.fetchRelatedService(r);a&&(i.url=ep(a.url,s.mapLayerId.toString()),i.layerItemId=a.itemId)}const{url:n}=i;let o;if(s.type==="data-layer")o=(await Ne(n,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...r})).data;else if(n&&i.originIdOf("url")>je.SERVICE)try{const a=await this._fetchAllLayersAndTablesFromService(n),l=ip(n)?.sublayer??s.mapLayerId;o=a.get(l)}catch{}else{let a=i.id;s?.type==="map-layer"&&(a=s.mapLayerId);try{o=(await this.fetchAllLayersAndTables(r)).get(a)}catch{}}return o}async fetchAllLayersAndTables(i){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,i)}async _fetchAllLayersAndTablesFromService(i,r){await this.load(r),this._allLayersAndTablesMap||=new Map;const s=ip(i),n=qS(this._allLayersAndTablesMap,s?.url.path,()=>Ne(ep(s?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(a=>{const l=new Map,{layers:u,tables:h}=a.data,p=[...u??[],...h??[]];for(const f of p)l.set(f.id,f);return{result:l}},a=>({error:a}))),o=await n;if(wi(r),"result"in o)return o.result;throw o.error}};return c([d({readOnly:!0})],t.prototype,"capabilities",void 0),c([ue("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),c([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([d({type:bt})],t.prototype,"fullExtent",void 0),c([d(Kse)],t.prototype,"id",void 0),c([d({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),c([d(dx)],t.prototype,"popupEnabled",void 0),c([d({type:ke})],t.prototype,"spatialReference",void 0),c([d({readOnly:!0})],t.prototype,"version",void 0),c([ue("service","version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=c([F("esri.layers.mixins.ArcGISMapService")],t),t};let U0=class extends Be{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(FX(()=>this._refresh(),ns))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let i=0;for(const r of t)r!=null&&(i=this._processCollection(i,r));this.splice(i,this.length)}_createNewInstance(t){return new Be(t)}_processCollection(t,i){if(!i)return t;const r=this.itemFilterFunction??(s=>!!s);for(const s of i)if(s){if(r(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};c([d()],U0.prototype,"getCollections",void 0),c([d()],U0.prototype,"getChildrenFunction",void 0),c([d()],U0.prototype,"itemFilterFunction",void 0),U0=c([F("esri.core.CollectionFlattener")],U0);const rg=U0,BPe=[["binary","application/octet-stream","bin",""]];function Mmt(e,t){return Woe(t.name,e?.supportedFormats??[])!=null}function Imt(e,t){if(!e)return!1;const i=zPe(t,e.supportedFormats??[]);return i!=null&&e.editFormats.includes(i)}function zoe(e,t){return F9(WPe(e,t))}function qoe(e,t){return F9(Woe(e,t))}function Amt(e,t){return Joe(HPe(e,t))}function zPe(e,t){return qoe(e.name,t)??zoe(e.type,t)}function xC(e,t,i){return zoe(e,i)??qoe(t,i)}function Hoe({supportedFormats:e}){return xC("model/gltf-binary","glb",e)}function $mt(e){const t=Hoe(e);return t!=null&&e.editFormats.includes(t)}function qPe({supportedFormats:e}){return xC("model/gltf+json","gltf",e)}function Cmt({supportedFormats:e}){return xC("application/esri3do-SR_world","wld",e)}function Rmt({supportedFormats:e}){return xC("application/esri3do-SR_prj","prj",e)}function D9(e){return[...BPe,...e]}function HPe(e,t){return D9(t).find(i=>F9(i)===e)}function WPe(e,t){const i=e.toLowerCase();return D9(t).find(r=>Joe(r)===i)}function Woe(e,t){const i=e.toLowerCase();return D9(t).find(r=>JPe(r).some(s=>i.endsWith(s)))}function F9(e){return e?.[0]}function Joe(e){return e?.[1].toLowerCase()}function JPe(e){return e?.[2].split(",").map(t=>t.toLowerCase())??[]}function Omt(e){return e.tables?.find(t=>t.role==="assetMaps")}async function ZPe(e,t,i){const r=Vi(e),s=await SPe(r,Dr.from(t),{...i}),n=s.data.extent;return!n||isNaN(n.xmin)||isNaN(n.ymin)||isNaN(n.xmax)||isNaN(n.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:bt.fromJSON(n)}}function Ws(e,t){return e?t?4:3:t?3:2}const _x=()=>xe.getLogger("esri.layers.graphics.featureConversionUtils"),Zoe={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},YPe=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n},oH=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+2]},KPe=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+3]},XPe=(e,t,i,r,s,n)=>{e[i]=s,e[i+1]=n,e[i+2]=t[r+2],e[i+3]=t[r+3]};function j9(e,t,i,r){if(e){if(i)return t&&r?XPe:oH;if(t&&r)return KPe}else if(t&&r)return oH;return YPe}function W4({scale:e,translate:t},i){return Math.round((i-t[0])/e[0])}function J4({scale:e,translate:t},i){return Math.round((t[1]-i)/e[1])}function Z4({scale:e,translate:t},i,r){return i*e[r]+t[r]}function Pmt(e,t,i){return e?t?i?G9(e):U9(e):i?V9(e):TC(e):null}function TC(e){const t=e.coords;return{x:t[0],y:t[1]}}function Yoe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function U9(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function QPe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function V9(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function eLe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function G9(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function tLe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function iLe(e,t,i,r){let s=TC;i&&r?s=G9:i?s=U9:r&&(s=V9);for(const n of t){const{geometry:o,attributes:a}=n,l=o!=null?s(o):null;e.push({attributes:a,geometry:l})}return e}function B9(e,t){return e&&t?tLe:e?QPe:t?eLe:Yoe}function rLe(e,t,i,r,s){const n=B9(i,r);for(const{geometry:o,attributes:a}of t){const l=o!=null?n(new Vo,o):null;e.push(new ig(l,a,null,s?a[s]:void 0))}return e}function sLe(e,t,i=B9(t.z!=null,t.m!=null)){return i(e,t)}function nLe(e,t,i,r){for(const{geometry:s,attributes:n}of t)e.push({attributes:n,geometry:s!=null?Koe(s,i,r):null});return e}function Koe(e,t,i){if(e==null)return null;const r=Ws(t,i),s=[];for(let n=0;n<e.coords.length;n+=r){const o=[];for(let a=0;a<r;a++)o.push(e.coords[n+a]);s.push(o)}return t?i?{points:s,hasZ:t,hasM:i}:{points:s,hasZ:t}:i?{points:s,hasM:i}:{points:s}}function oLe(e,t,i,r,s){const n=Ws(i,r);for(const{geometry:o,attributes:a}of t){const l=o!=null?Xoe(new Vo,o,n):null;e.push(new ig(l,a,null,s?a[s]:void 0))}return e}function Xoe(e,t,i=Ws(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const r=e.coords;let s=0;for(const n of t.points)for(let o=0;o<i;o++)r[s++]=n[o];return e}function aLe(e,t,i,r){for(const{geometry:s,attributes:n}of t)e.push({attributes:n,geometry:s!=null?Qoe(s,i,r):null});return e}function Qoe(e,t,i){if(!e)return null;const r=Ws(t,i),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<r;f++)p.push(s[a++]);u.push(p)}o.push(u)}return t?i?{paths:o,hasZ:t,hasM:i}:{paths:o,hasZ:t}:i?{paths:o,hasM:i}:{paths:o}}function lLe(e,t,i,r,s){const n=Ws(i,r);for(const{geometry:o,attributes:a,centroid:l}of t){const u=o!=null?eae(new Vo,o,n):null,h=l!=null?sLe(new Vo,l):null;e.push(new ig(u,a,h,s?a[s]:void 0))}return e}function eae(e,t,i=Ws(t.hasZ,t.hasM)){const{lengths:r,coords:s}=e;let n=0;for(const o of t.paths){for(const a of o)for(let l=0;l<i;l++)s[n++]=a[l];r.push(o.length)}return e}function uLe(e,t,i,r){for(const{geometry:s,attributes:n,centroid:o}of t){const a=s!=null?tae(s,i,r):null;if(o!=null){const l=TC(o);e.push({attributes:n,centroid:l,geometry:a})}else e.push({attributes:n,geometry:a})}return e}function tae(e,t,i){if(!e)return null;const r=Ws(t,i),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<r;f++)p.push(s[a++]);u.push(p)}o.push(u)}return t?i?{rings:o,hasZ:t,hasM:i}:{rings:o,hasZ:t}:i?{rings:o,hasM:i}:{rings:o}}function cLe(e,t,i,r,s){for(const{geometry:n,centroid:o,attributes:a}of t){const l=n!=null?iae(new Vo,n,i,r):null,u=s?a[s]:void 0;o!=null?e.push(new ig(l,a,Yoe(new Vo,o),u)):e.push(new ig(l,a,null,u))}return e}function iae(e,t,i=t.hasZ,r=t.hasM){return hLe(e,t.rings,i,r)}function hLe(e,t,i,r){const s=Ws(i,r),{lengths:n,coords:o}=e;let a=0;Wh(e);for(const l of t){for(const u of l)for(let h=0;h<s;h++)o[a++]=u[h];n.push(l.length)}return e}const Jv=[],l2=[];function Lmt(e,t,i,r,s){Jv[0]=e;const[n]=rae(l2,Jv,t,i,r,s);return uu(Jv),uu(l2),n}function rae(e,t,i,r,s,n){if(uu(e),!i){for(const o of t){const a=n?o.attributes[n]:void 0;e.push(new ig(null,o.attributes,null,a))}return e}switch(i){case"esriGeometryPoint":return rLe(e,t,r,s,n);case"esriGeometryMultipoint":return oLe(e,t,r,s,n);case"esriGeometryPolyline":return lLe(e,t,r,s,n);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return cLe(e,t,r,s,n);default:_x().error("convertToFeatureSet:unknown-geometry",new W(`Unable to parse unknown geometry type '${i}'`)),uu(e)}return e}function Nmt(e,t,i,r){l2[0]=e,nae(Jv,l2,t,i,r);const s=Jv[0];return uu(Jv),uu(l2),s}function kmt(e,t,i){if(e==null)return null;const r=new Vo;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&i==null&&(i=e.hasM),UF(e)?B9(t??e.z!=null,i??e.m!=null)(r,e):zh(e)?iae(r,e,t,i):ex(e)?eae(r,e,Ws(t,i)):jF(e)?Xoe(r,e,Ws(t,i)):void _x().error("convertFromGeometry:unknown-geometry",new W(`Unable to parse unknown geometry type '${e}'`))}function sae(e,t,i,r){const s=e&&("coords"in e?e:e.geometry);if(s==null)return null;switch(t){case"esriGeometryPoint":{let n=TC;return i&&r?n=G9:i?n=U9:r&&(n=V9),n(s)}case"esriGeometryMultipoint":return Koe(s,i,r);case"esriGeometryPolyline":return Qoe(s,i,r);case"esriGeometryPolygon":return tae(s,i,r);default:return _x().error("convertToGeometry:unknown-geometry",new W(`Unable to parse unknown geometry type '${t}'`)),null}}function pLe(e,t){for(const i of t)e.push({attributes:i.attributes});return e}function nae(e,t,i,r,s){if(uu(e),i==null)return pLe(e,t);switch(i){case"esriGeometryPoint":return iLe(e,t,r,s);case"esriGeometryMultipoint":return nLe(e,t,r,s);case"esriGeometryPolyline":return aLe(e,t,r,s);case"esriGeometryPolygon":return uLe(e,t,r,s);default:_x().error("convertToFeatureSet:unknown-geometry",new W(`Unable to parse unknown geometry type '${i}'`))}return e}function Dmt(e){const{objectIdFieldName:t,spatialReference:i,transform:r,fields:s,hasM:n,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:p,queryGeometryType:f}=e,m={features:nae([],a,l,o,n),fields:s,geometryType:l,objectIdFieldName:t,spatialReference:i,uniqueIdField:h,queryGeometry:sae(p,f,!1,!1)};return r&&(m.transform=r),u&&(m.exceededTransferLimit=u),n&&(m.hasM=n),o&&(m.hasZ=o),m}function Fmt(e,t){const i=new koe,{hasM:r,hasZ:s,features:n,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:h,fields:p}=e;return p&&(i.fields=p),i.geometryType=l??null,i.objectIdFieldName=o??t??null,i.spatialReference=a??null,i.objectIdFieldName?(n&&rae(i.features,n,l,s,r,i.objectIdFieldName),u&&(i.exceededTransferLimit=u),r&&(i.hasM=r),s&&(i.hasZ=s),h&&(i.transform=h),i):(_x().error(new W("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function jmt(e){const{transform:t,features:i,hasM:r,hasZ:s}=e;if(!t)return e;for(const n of i)n.geometry!=null&&Yk(n.geometry,n.geometry,r,s,t),n.centroid!=null&&Yk(n.centroid,n.centroid,r,s,t);return e.transform=null,e}function Umt(e,t){const{geometryType:i,features:r,hasM:s,hasZ:n}=t;if(!e)return t;for(let o=0;o<r.length;o++){const a=r[o],l=a.weakClone();l.geometry=new Vo,aH(l.geometry,a.geometry,s,n,i,e),a.centroid&&(l.centroid=new Vo,aH(l.centroid,a.centroid,s,n,"esriGeometryPoint",e)),r[o]=l}return t.transform=e,t}function aH(e,t,i,r,s,n,o=i,a=r){if(Wh(e),!t?.coords.length)return null;const l=Zoe[s],{coords:u,lengths:h}=t,p=Ws(i,r),f=Ws(i&&o,r&&a),m=j9(i,r,o,a);if(!h.length)return m(e.coords,u,0,0,W4(n,u[0]),J4(n,u[1])),Wh(e,p,0),e;let g,b,w,S,T=0,x=0,_=x;for(const M of h){if(M<l)continue;let I=0;x=_,w=g=W4(n,u[T]),S=b=J4(n,u[T+1]),m(e.coords,u,x,T,w,S),I++,T+=p,x+=f;for(let A=1;A<M;A++,T+=p)w=W4(n,u[T]),S=J4(n,u[T+1]),w===g&&S===b||(m(e.coords,u,x,T,w-g,S-b),x+=f,I++,g=w,b=S);I>=l&&(e.lengths.push(I),_=x)}return uu(e.coords,_),e.coords.length?e:null}function Vmt(e,t,i,r,s,n,o=i,a=r){if(Wh(e),!t?.coords.length)return null;const l=Zoe[s],{coords:u,lengths:h}=t,p=Ws(i,r),f=Ws(i&&o,r&&a),m=j9(i,r,o,a);if(!h.length)return m(e.coords,u,0,0,u[0],u[1]),Wh(e,p,0),e;let g=0;const b=n*n;for(const w of h){if(w<l){g+=w*p;continue}const S=e.coords.length/f,T=g,x=g+(w-1)*p;m(e.coords,u,e.coords.length,T,u[T],u[T+1]),Zk(e.coords,u,p,b,m,T,x),m(e.coords,u,e.coords.length,x,u[x],u[x+1]);const _=e.coords.length/f-S;_>=l?e.lengths.push(_):uu(e.coords,S*f),g+=w*p}return e.coords.length?e:null}function dLe(e,t,i,r){const s=e[t],n=e[t+1],o=e[i],a=e[i+1],l=e[r],u=e[r+1];let h=o,p=a,f=l-h,m=u-p;if(f!==0||m!==0){const g=((s-h)*f+(n-p)*m)/(f*f+m*m);g>1?(h=l,p=u):g>0&&(h+=f*g,p+=m*g)}return f=s-h,m=n-p,f*f+m*m}function Zk(e,t,i,r,s,n,o){let a,l=r,u=0;for(let h=n+i;h<o;h+=i)a=dLe(t,h,n,o),a>l&&(u=h,l=a);l>r&&(u-n>i&&Zk(e,t,i,r,s,n,u),s(e,t,e.length,u,t[u],t[u+1]),o-u>i&&Zk(e,t,i,r,s,u,o))}function Gmt(e,t,i,r){if(!t?.coords?.length)return null;const s=Ws(i,r);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let h=0;h<u.length;h+=s){const p=u[h],f=u[h+1];n=Math.min(n,p),a=Math.max(a,p),o=Math.min(o,f),l=Math.max(l,f)}}return QP(e)?wSe(e,n,o,a,l):tbe(n,o,a,l,e),e}function Yk(e,t,i,r,s){const{coords:n,lengths:o}=t,a=Ws(i,r);if(!n.length)return e!==t&&Wh(e),e;jd(s);const{originPosition:l,scale:u,translate:h}=s,p=mLe;p.originPosition=l;const f=p.scale;f[0]=u[0]??1,f[1]=-(u[1]??1),f[2]=u[2]??1,f[3]=u[3]??1;const m=p.translate;if(m[0]=h[0]??0,m[1]=h[1]??0,m[2]=h[2]??0,m[3]=h[3]??0,!o.length){for(let b=0;b<a;++b)e.coords[b]=Z4(p,n[b],b);return e!==t&&Wh(e,a,0),e}let g=0;for(let b=0;b<o.length;b++){const w=o[b];e.lengths[b]=w;for(let x=0;x<a;++x)e.coords[g+x]=Z4(p,n[g+x],x);let S=e.coords[g],T=e.coords[g+1];g+=a;for(let x=1;x<w;x++,g+=a){S+=n[g]*f[0],T+=n[g+1]*f[1],e.coords[g]=S,e.coords[g+1]=T;for(let _=2;_<a;++_)e.coords[g+_]=Z4(p,n[g+_],_)}}return e!==t&&Wh(e,n.length,o.length),e}function Bmt(e,t,i,r,s,n){if(Wh(e),e.lengths.push(...t.lengths),i===s&&r===n)for(let o=0;o<t.coords.length;o++)e.coords.push(t.coords[o]);else{const o=Ws(i,r),a=j9(i,r,s,n),l=t.coords;for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1])}return e}function fLe(e,t,i,r){let s=0,n=e[r*t],o=e[r*(t+1)];for(let a=1;a<i;a++){const l=n+e[r*(t+a)],u=o+e[r*(t+a)+1],h=(l-n)*(u+o);n=l,o=u,s+=h}return .5*s}function zmt(e,t){const{coords:i,lengths:r}=e;let s=0,n=0;for(let o=0;o<r.length;o++){const a=r[o];n+=fLe(i,s,a,t),s+=a}return Math.abs(n)}function Wh(e,t=0,i=0){uu(e.lengths,i),uu(e.coords,t)}function uu(e,t=0){e.length!==t&&(e.length=t)}const mLe={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function yLe(e,t){return t}function z9(e,t,i,r){switch(i){case 0:return sS(e,t+r,0);case 1:return e.originPosition==="lowerLeft"?sS(e,t+r,1):bLe(e,t+r,1)}}function oae(e,t,i,r){return i===2?sS(e,t,2):z9(e,t,i,r)}function gLe(e,t,i,r){return i===2?t===0?0:sS(e,t,3):z9(e,t,i,r)}function vLe(e,t,i,r){return i===3?t===0?0:sS(e,t,3):oae(e,t,i,r)}function sS({translate:e,scale:t},i,r){return e[r]+i*t[r]}function bLe({translate:e,scale:t},i,r){return e[r]-i*t[r]}let wLe=class{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=yLe,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const i=G8(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(i!=null)for(const r of t.features)i(r.geometry)}createSpatialReference(){return{}}addField(t,i){const r=t.fields;jd(r),r.push(i);const s=r.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(t,i){t.features.push(i)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(i,r,s)=>this.addCoordinatePoint(i,r,s),this.createGeometry=i=>this.createPointGeometry(i);break;case"esriGeometryPolygon":this.addCoordinate=(i,r,s)=>this._addCoordinatePolygon(i,r,s),this.createGeometry=i=>this._createPolygonGeometry(i);break;case"esriGeometryPolyline":this.addCoordinate=(i,r,s)=>this._addCoordinatePolyline(i,r,s),this.createGeometry=i=>this._createPolylineGeometry(i);break;case"esriGeometryMultipoint":this.addCoordinate=(i,r,s)=>this._addCoordinateMultipoint(i,r,s),this.createGeometry=i=>this._createMultipointGeometry(i)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,i,r){this._lengths.length===0&&(this._toAddInCurrentPath=i),this._lengths.push(i)}addQueryGeometry(t,i){const{queryGeometry:r,queryGeometryType:s}=i,n=Yk(r.clone(),r,!1,!1,this._transform),o=sae(n,s,!1,!1);t.queryGeometryType=s,t.queryGeometry={...o}}createPointGeometry(t){const i={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(i.z=0),t.hasM&&(i.m=0),i}addCoordinatePoint(t,i,r){const s=this._transform;switch(i=this._applyTransform(s,i,r,0),r){case 0:t.x=i;break;case 1:t.y=i;break;case 2:"z"in t?t.z=i:t.m=i;break;case 3:t.m=i}}_transformPathLikeValue(t,i){let r=0;i<=1&&(r=this._previousCoordinate[i],this._previousCoordinate[i]+=t);const s=this._transform;return this._mValueOffset!==null&&t===0&&i>0&&!(i%this._mValueOffset)?0:this._applyTransform(s,t,i,r)}_addCoordinatePolyline(t,i,r){this._dehydratedAddPointsCoordinate(t.paths,i,r)}_addCoordinatePolygon(t,i,r){this._dehydratedAddPointsCoordinate(t.rings,i,r)}_addCoordinateMultipoint(t,i,r){r===0&&t.points.push([]);const s=this._transformPathLikeValue(i,r);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,i,r){r===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(i,r),n=t[t.length-1];r===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(t){const{hasZ:i,hasM:r}=t;return i&&r?vLe:i?oae:r?gLe:z9}};async function _Le(e,t,i){const r=Vi(e),s={...i},n=Dr.from(t),o=!n.quantizationParameters,{data:a}=await vPe(r,n,new wLe({sourceSpatialReference:n.sourceSpatialReference,applyTransform:o}),s);return a}let La=class extends Je{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return $r(this.url)}async execute(t,i){const r=await this.executeJSON(t,i);return this.featureSetFromJSON(t,r,i)}async executeJSON(t,i){const r=this._normalizeQuery(t),s=t.outStatistics?.[0]!=null,n=le("featurelayer-pbf-statistics"),o=!s||n;let a;if(this.pbfSupported&&o)try{a=await _Le(this.url,r,i)}catch(l){if(l.name!=="query:parsing-pbf")throw l;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await Uoe(this.url,r,i)),this._normalizeFields(a.fields),a}async featureSetFromJSON(t,i,r){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!i.features)return Sg.fromJSON(i);const{meshFeatureSetFromJSON:s}=await Dl(ce(()=>import("./meshFeatureSet-CiDlu10-.js"),__vite__mapDeps([147,148,1,143,54,89,53,90,149,51,58,82,46,95,45,57,52,55,56,59,41,60,142,150]),import.meta.url),r);return s(t,this.infoFor3D,i)}executeForCount(t,i){return joe(this.url,this._normalizeQuery(t),i)}executeForExtent(t,i){return ZPe(this.url,this._normalizeQuery(t),i)}executeForIds(t,i){return k9(this.url,this._normalizeQuery(t),i)}async executeRelationshipQuery(t,i){const[{default:r},{executeRelationshipQuery:s}]=await Dl(Promise.all([ce(()=>Promise.resolve().then(()=>Fz),void 0,import.meta.url),ce(()=>import("./executeRelationshipQuery-SdaJx6qO.js"),__vite__mapDeps([151,1]),import.meta.url)]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,i)}async executeRelationshipQueryForCount(t,i){const[{default:r},{executeRelationshipQueryForCount:s}]=await Dl(Promise.all([ce(()=>Promise.resolve().then(()=>Fz),void 0,import.meta.url),ce(()=>import("./executeRelationshipQuery-SdaJx6qO.js"),__vite__mapDeps([151,1]),import.meta.url)]),i);return t=r.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,i)}async executeAttachmentQuery(t,i){const{executeAttachmentQuery:r,fetchAttachments:s,processAttachmentQueryResult:n}=await Dl(ce(()=>import("./queryAttachments-DubZ2bXZ.js"),__vite__mapDeps([152,1]),import.meta.url),i),o=Vi(this.url);return n(o,await(this.queryAttachmentsSupported?r(o,t,i):s(o,t,i)))}async executeBinsQuery(t,i){const{executeBinsQuery:r}=await Dl(ce(()=>import("./executeBinsQuery-Okh69pCJ.js"),__vite__mapDeps([153,1]),import.meta.url),i);return r(this.parsedUrl,t,i)}async executeTopFeaturesQuery(t,i){const{executeTopFeaturesQuery:r}=await Dl(ce(()=>import("./executeTopFeaturesQuery-CcxSDgVt.js"),__vite__mapDeps([154,155,1]),import.meta.url),i);return r(this.parsedUrl,t,this.sourceSpatialReference,i)}async executeForTopIds(t,i){const{executeForTopIds:r}=await Dl(ce(()=>import("./executeForTopIds-C4ys4Eig.js"),__vite__mapDeps([156,155,1]),import.meta.url),i);return r(this.parsedUrl,t,i)}async executeForTopExtents(t,i){const{executeForTopExtents:r}=await Dl(ce(()=>import("./executeForTopExtents-C_4uawZ7.js"),__vite__mapDeps([157,155,1]),import.meta.url),i);return r(this.parsedUrl,t,i)}async executeForTopCount(t,i){const{executeForTopCount:r}=await Dl(ce(()=>import("./executeForTopCount-D33Dv6pr.js"),__vite__mapDeps([158,155,1]),import.meta.url),i);return r(this.parsedUrl,t,i)}_normalizeQuery(t){let i=Dr.from(t);i.sourceSpatialReference=i.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(i=i===t?i.clone():i,i.gdbVersion=t.gdbVersion||this.gdbVersion,i.dynamicDataSource=t.dynamicDataSource?Wn.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(r!=null&&this._queryIs3DObjectFormat(t)){i=i===t?i.clone():i,i.formatOf3DObjects=null;const s=Hoe(r),n=qPe(r);for(const o of r.queryFormats){if(o===s){i.formatOf3DObjects=o;break}o!==n||i.formatOf3DObjects||(i.formatOf3DObjects=o)}if(!i.formatOf3DObjects)throw new W("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(i.outSpatialReference&&!Xi(i.outSpatialReference,this.sourceSpatialReference))throw new W("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(i.outFields==null||!i.outFields.includes("*")){i=i===t?i.clone():i,i.outFields==null&&(i.outFields=[]);const{originX:o,originY:a,originZ:l,translationX:u,translationY:h,translationZ:p,scaleX:f,scaleY:m,scaleZ:g,rotationX:b,rotationY:w,rotationZ:S,rotationDeg:T}=r.transformFieldRoles;i.outFields.push(o,a,l,u,h,p,f,m,g,b,w,S,T)}}return i}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const i of t){const r=this.fieldsIndex.get(i.name);r&&Object.assign(i,r.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};c([d({type:Wn})],La.prototype,"dynamicDataSource",void 0),c([d()],La.prototype,"fieldsIndex",void 0),c([d()],La.prototype,"gdbVersion",void 0),c([d()],La.prototype,"infoFor3D",void 0),c([d({readOnly:!0})],La.prototype,"parsedUrl",null),c([d()],La.prototype,"pbfSupported",void 0),c([d()],La.prototype,"queryAttachmentsSupported",void 0),c([d()],La.prototype,"sourceSpatialReference",void 0),c([d({type:String})],La.prototype,"url",void 0),La=c([F("esri.layers.graphics.sources.support.QueryTask")],La);const SLe=La;var lI;function Y4(e){return e?.type==="esriSMS"}function K4(e,t,i){const r=this.originIdOf(t)>=Yn(i.origin);return{ignoreOrigin:!0,allowNull:r,enabled:!!i&&i.layer?.type==="map-image"&&(i.writeSublayerStructure||r)}}function X4(e,t,i){return{enabled:!!i&&i.layer?.type==="tile"&&(i.origin&&this.originIdOf(t)>=Yn(i.origin)||this._isOverridden(t))}}function Ta(e,t,i){return{ignoreOrigin:!0,enabled:i&&i.writeSublayerStructure||!1}}function zT(e,t,i){return{ignoreOrigin:!0,enabled:!!i&&(i.writeSublayerStructure||this.originIdOf(t)>=Yn(i.origin))}}let xLe=0;const TLe=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);let ct=lI=class extends wf(sx(mc)){constructor(e){super(e),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,url:i}=this;if(!t&&!i)throw new W("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const r=t?await t.fetchSublayerInfo(this,e):(await Ne(i,{responseType:"json",query:{f:"json"},...e})).data;r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service",layer:t,url:Vi(i)}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:i,supportsQueryAttachments:r},query:{supportsFormatPBF:s,supportsOrderBy:n,supportsPagination:o},data:{supportsAttachment:a},queryRelated:l}=s9(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:r},data:{supportsAttachment:a},query:{supportsFormatPBF:s,supportsOrderBy:n,supportsPagination:o},queryRelated:l}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readMaxScaleRange(e,t){return{minScale:(t=t.layerDefinition||t).minScale??0,maxScale:t.maxScale??0}}get fieldsIndex(){return new Z$(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const i of t.fields)if(i.type==="esriFieldTypeGlobalID")return i.name}}get id(){return this._get("id")??xLe++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,t){return t.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,i,r){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(s=>s.write({},r))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,t){return(t=t.layerDefinition||t).objectIdField?t.objectIdField:t.fields?.find(r=>r.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const{layerDefinition:i}=t;return 1-.01*(i?.transparency??i?.drawingInfo?.transparency??0)}writeOpacity(e,t,i,r){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=d$(this.parent.id):t.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:t,layer:i,url:r}=this,{spatialReference:s}=i,n="gdbVersion"in i?i.gdbVersion:void 0,o=le("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new SLe({fieldsIndex:t,gdbVersion:n,pbfSupported:o,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:s,url:r})}set renderer(e){if(vP(e,this.fieldsIndex),e){for(const t of e.getSymbols())if(Qy(t)){xe.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Fh({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return bi(Be.ofType(lI),e)}writeSublayers(e,t,i){this.sublayers?.length&&(t[i]=this.sublayers.map(r=>r.id).toArray().reverse())}readTitle(e,t){return t.layerDefinition?.name??t.name}readTypeIdField(e,t){let i=(t=t.layerDefinition||t).typeIdField;if(i&&t.fields){i=i.toLowerCase();const r=t.fields.find(s=>s.name.toLowerCase()===i);r&&(i=r.name)}return i}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,t?.type==="map-layer")return`${e.path}/${t.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${Zd(i)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,i,r){t[i]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Is(this),t=new lI;return Is(t).store=e.clone(TLe),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return m9(this,e)}createQuery(){return new Dr({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await ce(async()=>{const{default:s}=await Promise.resolve().then(()=>BCe);return{default:s}},void 0,import.meta.url)).default,{layer:t,url:i}=this;let r;if(i&&this.originIdOf("url")>je.SERVICE)r=new e({url:i});else{if(!t?.parsedUrl)throw new W("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const s=t.parsedUrl;r=new e({url:s.path}),s&&this.source&&(this.source.type==="map-layer"?r.layerId=this.source.mapLayerId:r.dynamicDataSource=this.source)}}return t?.refreshInterval!=null&&(r.refreshInterval=t.refreshInterval),this.definitionExpression&&(r.definitionExpression=this.definitionExpression),this.floorInfo&&(r.floorInfo=K(this.floorInfo)),this.originIdOf("labelingInfo")>je.SERVICE&&(r.labelingInfo=K(this.labelingInfo)),this.originIdOf("labelsVisible")>je.DEFAULTS&&(r.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>je.DEFAULTS&&(r.legendEnabled=this.legendEnabled),this.originIdOf("visible")>je.DEFAULTS&&(r.visible=this.visible),this.originIdOf("minScale")>je.DEFAULTS&&(r.minScale=this.minScale),this.originIdOf("maxScale")>je.DEFAULTS&&(r.maxScale=this.maxScale),this.originIdOf("opacity")>je.DEFAULTS&&(r.opacity=this.opacity),this.originIdOf("popupTemplate")>je.DEFAULTS&&(r.popupTemplate=K(this.popupTemplate)),this.originIdOf("renderer")>je.SERVICE&&(r.renderer=K(this.renderer)),this.source?.type==="data-layer"&&(r.dynamicDataSource=this.source.clone()),this.originIdOf("title")>je.DEFAULTS&&(r.title=this.title),t?.type==="map-image"&&t.originIdOf("customParameters")>je.DEFAULTS&&(r.customParameters=t.customParameters),t?.type==="tile"&&t.originIdOf("customParameters")>je.DEFAULTS&&(r.customParameters=t.customParameters),r}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return sne(this.types,this.typeIdField,e)}getFieldDomain(e,t){const i=t?.feature,r=this.getFeatureType(i);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}async queryAttachments(e,t){await this.load(),e=ene.from(e);const i=this.capabilities;if(!i?.data?.supportsAttachment)throw new W("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:r,objectIds:s,globalIds:n,num:o,size:a,start:l,where:u}=e;if(!i?.operations?.supportsQueryAttachments&&(r?.length>0||n?.length>0||a?.length>0||o||l||u))throw new W("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(s?.length||n?.length||u))throw new W("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatureCount(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new W("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new W("queryFeatureCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...t,query:{...this.layer?.customParameters,token:i}})}async queryFeatures(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new W("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new W("queryFeatures:not-supported","this layer has no url.");const i=await this.queryTask.execute(e,{...t,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(i?.features)for(const r of i.features)r.sourceLayer=this;return i}async queryObjectIds(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new W("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new W("queryObjectIds:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...t,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeatures(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new W("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new W("queryRelatedFeatures:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...t,query:{...this.layer?.customParameters,token:i}})}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new W("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new W("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new W("queryRelatedFeaturesCount:not-supported","this layer has no url.");const i=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...t,query:{...this.layer?.customParameters,token:i}})}toExportImageJSON(e){const t={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},i=VF(e,this.definitionExpression);i!=null&&(t.definitionExpression=i);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((n,o)=>(n[o]=this.originIdOf(o),n),{});if(Object.keys(r).some(n=>r[n]>je.SERVICE)){const n=t.drawingInfo={};if(r.renderer>je.SERVICE&&(n.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>je.SERVICE&&(n.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>je.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(a=>!a.labelPlacement)&&xe.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let o=this.labelingInfo;this.geometryType!=null&&(o=OCe(this.labelingInfo,b3.toJSON(this.geometryType))),n.showLabels=!0,n.labelingInfo=o.filter(a=>a.labelPlacement).map(a=>a.toJSON({origin:"service",layer:this.layer}))}else n.showLabels=!1;r.opacity>je.SERVICE&&(n.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(n.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline?.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const i=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const r of i)Y4(r.symbol)&&t(r.symbol);"symbol"in e&&Y4(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&Y4(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const i=this.layer,r=this._get(e);let s,n;switch(e){case"definitionExpression":case"floorInfo":s="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":s="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":s="supportsDynamicLayers",n="supportsModification"}const o=Is(this).getDefaultOrigin();if(o!=="service"){if(s&&this.layer?.capabilities?.exportMap?.[s]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${s}'`);if(n&&this.capabilities?.exportMap[n]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${n}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&r!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null,i.layer=null}),this.removeAllHandles()),e&&(e.forEach(i=>{i.parent=this,i.layer=this.layer}),this.addHandles([e.on("after-add",({item:i})=>{i.parent=this,i.layer=this.layer}),e.on("after-remove",({item:i})=>{i.parent=null,i.layer=null}),e.on("before-changes",i=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(xe.getLogger(this).error(new W("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),i.preventDefault())})]))}_logLockedError(e,t){const{layer:i,declaredClass:r}=this;xe.getLogger(r).error(new W("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${i?.id}'`,{reason:t,sublayer:this,layer:i}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}};ct.test={isMapImageLayerOverridePolicy:e=>e===Ta||e===K4,isTileImageLayerOverridePolicy:e=>e===X4},c([d({readOnly:!0})],ct.prototype,"capabilities",void 0),c([ue("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ct.prototype,"readCapabilities",null),c([d()],ct.prototype,"defaultPopupTemplate",null),c([d({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:K4}}})],ct.prototype,"definitionExpression",null),c([d({readOnly:!0})],ct.prototype,"effectiveScaleRange",null),c([ue("service","maxScaleRange",["minScale","maxScale"])],ct.prototype,"readMaxScaleRange",null),c([d({type:[na],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ct.prototype,"fields",void 0),c([d({readOnly:!0})],ct.prototype,"fieldsIndex",null),c([d({type:nne,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:K4},origins:{"web-scene":{read:!1,write:!1}}}})],ct.prototype,"floorInfo",null),c([d({type:bt,json:{read:{source:"layerDefinition.extent"}}})],ct.prototype,"fullExtent",void 0),c([d({type:b3.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:b3.read}}}}})],ct.prototype,"geometryType",void 0),c([d({type:String})],ct.prototype,"globalIdField",void 0),c([ue("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ct.prototype,"readGlobalIdFieldFromService",null),c([d({type:vt,json:{write:{ignoreOrigin:!0}}})],ct.prototype,"id",null),c([d({readOnly:!0})],ct.prototype,"isTable",void 0),c([ue("service","isTable",["type"])],ct.prototype,"readIsTable",null),c([d({value:null,type:[yx],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:Ta}}})],ct.prototype,"labelingInfo",null),c([ge("labelingInfo")],ct.prototype,"writeLabelingInfo",null),c([d({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:Ta}}})],ct.prototype,"labelsVisible",null),c([d({value:null})],ct.prototype,"layer",null),c([d({type:String,json:{write:{overridePolicy:X4}}})],ct.prototype,"layerItemId",void 0),c([d({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:zT}}})],ct.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ct.prototype,"listMode",null),c([d({type:Number,value:0,json:{write:{overridePolicy:Ta}}})],ct.prototype,"minScale",null),c([ue("minScale",["minScale","layerDefinition.minScale"])],ct.prototype,"readMinScale",null),c([d({type:Number,value:0,json:{write:{overridePolicy:Ta}}})],ct.prototype,"maxScale",null),c([ue("maxScale",["maxScale","layerDefinition.maxScale"])],ct.prototype,"readMaxScale",null),c([d()],ct.prototype,"objectIdField",void 0),c([ue("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ct.prototype,"readObjectIdFieldFromService",null),c([d({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:Ta}}})],ct.prototype,"opacity",null),c([ue("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ct.prototype,"readOpacity",null),c([ge("opacity")],ct.prototype,"writeOpacity",null),c([d({json:{type:vt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:Ta}}})],ct.prototype,"parent",void 0),c([ge("parent")],ct.prototype,"writeParent",null),c([d({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:zT,writer(e,t,i){t[i]=!e}}}})],ct.prototype,"popupEnabled",void 0),c([d({type:df,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:zT}}})],ct.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],ct.prototype,"queryTask",null),c([d({type:[one],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],ct.prototype,"relationships",void 0),c([d({types:hx,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Ta},origins:{"web-scene":{types:Yre,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:Ta}}}}})],ct.prototype,"renderer",null),c([d({types:{key:"type",base:null,typeMap:{"data-layer":Wn,"map-layer":Fh}},cast(e){if(e){if("mapLayerId"in e)return Ki(Fh,e);if("dataSource"in e)return Ki(Wn,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:Ta}}})],ct.prototype,"source",null),c([d()],ct.prototype,"sourceJSON",void 0),c([d({type:ke,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],ct.prototype,"spatialReference",void 0),c([d({value:null,json:{type:[vt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:Ta}}})],ct.prototype,"sublayers",null),c([Ht("sublayers")],ct.prototype,"castSublayers",null),c([ge("sublayers")],ct.prototype,"writeSublayers",null),c([d({type:String,json:{name:"name",write:{overridePolicy:zT}}})],ct.prototype,"title",void 0),c([ue("service","title",["name","layerDefinition.name"])],ct.prototype,"readTitle",null),c([d({type:String})],ct.prototype,"typeIdField",void 0),c([d({json:{read:!1},readOnly:!0,value:"sublayer"})],ct.prototype,"type",void 0),c([ue("typeIdField",["layerDefinition.typeIdField"])],ct.prototype,"readTypeIdField",null),c([d({type:[d9],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ct.prototype,"types",void 0),c([d({type:String,json:{name:"layerUrl",write:{overridePolicy:X4}}})],ct.prototype,"url",null),c([d({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:Ta}}})],ct.prototype,"visible",null),c([ge("visible")],ct.prototype,"writeVisible",null),ct=lI=c([F("esri.layers.support.Sublayer")],ct);const Sx=ct;function lH(e,t,i){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>i||s.originIdOf("maxScale")>i||s.originIdOf("renderer")>i||s.originIdOf("labelingInfo")>i||s.originIdOf("opacity")>i||s.originIdOf("labelsVisible")>i||s.originIdOf("source")>i)||!aae(e,t)}function ELe(e,t,i){return!!e.some(r=>{const s=r.source,n=!s||s.type==="map-layer"&&s.mapLayerId===r.id&&(s.gdbVersion==null||s.gdbVersion===i);return r.commitProperty("renderer"),r.commitProperty("labelingInfo"),r.commitProperty("opacity"),r.commitProperty("labelsVisible"),!n||r.originIdOf("renderer")>je.SERVICE||r.originIdOf("labelingInfo")>je.SERVICE||r.originIdOf("opacity")>je.SERVICE||r.originIdOf("labelsVisible")>je.SERVICE})||!aae(e,t)}function aae(e,t){if(!e?.length||t==null)return!0;const i=t.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(e.length>i.length)return!1;let r=0;const s=i.length;for(const{id:n}of e){for(;r<s&&i[r]!==n;)r++;if(r>=s)return!1}return!0}function MLe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition?.minScale!=null)}function ILe(e,t){const i=[],r={};return e&&e.forEach(s=>{const n=new Sx;if(n.read(s,t),r[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=r[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else i.unshift(n)}),i}const qT=Be.ofType(Sx);function lae(e,t){e&&e.forEach(i=>{t(i),i.sublayers&&i.sublayers.length&&lae(i.sublayers,t)})}const uae=e=>{let t=class extends e{constructor(...i){super(...i),this.allSublayers=new rg({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.sublayersSourceJSON={[je.SERVICE]:{},[je.PORTAL_ITEM]:{},[je.WEB_SCENE]:{},[je.WEB_MAP]:{}},this.subtables=null,this.addHandles([at(()=>this.sublayers,(r,s)=>this._handleSublayersChange(r,s),ns),at(()=>this.subtables,(r,s)=>this._handleSublayersChange(r,s),ns)])}destroy(){this.allSublayers.destroy()}readSublayers(i,r){if(!r||!i)return;const{sublayersSourceJSON:s}=this,n=Yn(r.origin);if(n<je.SERVICE||(s[n]={context:r,visibleLayers:i.visibleLayers||s[n].visibleLayers,layers:i.layers||s[n].layers},n>je.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=Is(this);l.setDefaultOrigin(a),this._set("sublayers",new qT(o)),l.setDefaultOrigin("user")}findSublayerById(i){return this.allSublayers.find(r=>r.id===i)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(i){const r=Yn(i==="web-document"?"web-map":i);let s=je.SERVICE,n=this.sublayersSourceJSON[je.SERVICE].layers,o=this.sublayersSourceJSON[je.SERVICE].context,a=null;const l=[je.PORTAL_ITEM,je.WEB_SCENE,je.WEB_MAP].filter(g=>g<=r);for(const g of l){const b=this.sublayersSourceJSON[g];MLe(b.layers)&&(s=g,n=b.layers,o=b.context,b.visibleLayers&&(a={visibleLayers:b.visibleLayers,context:b.context}))}const u=[je.PORTAL_ITEM,je.WEB_SCENE,je.WEB_MAP].filter(g=>g>s&&g<=r);let h=null;for(const g of u){const{layers:b,visibleLayers:w,context:S}=this.sublayersSourceJSON[g];b&&(h={layers:b,context:S}),w&&(a={visibleLayers:w,context:S})}const p=ILe(n,o),f=new Map,m=new Set;if(h)for(const g of h.layers)f.set(g.id,g);if(a?.visibleLayers)for(const g of a.visibleLayers)m.add(g);return lae(p,g=>{h&&g.read(f.get(g.id),h.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:P2(s),sublayers:new qT({items:p})}}read(i,r){super.read(i,r),this.readSublayers(i,r)}_handleSublayersChange(i,r){r&&(r.forEach(s=>{s.parent=null,s.layer=null}),this.removeHandles("sublayers-owner")),i&&(i.forEach(s=>{s.parent=this,s.layer=this}),this.addHandles([i.on("after-add",({item:s})=>{s.parent=this,s.layer=this}),i.on("after-remove",({item:s})=>{s.parent=null,s.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(i.on("before-changes",s=>{xe.getLogger("esri.layers.TileLayer").error(new W("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),s.preventDefault()}),"sublayers-owner"))}};return c([d({readOnly:!0})],t.prototype,"allSublayers",void 0),c([d({readOnly:!0,type:Be.ofType(Sx)})],t.prototype,"serviceSublayers",void 0),c([d({value:null,type:qT,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),c([d({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),c([d({type:qT,json:{read:{source:"tables"}}})],t.prototype,"subtables",void 0),t=c([F("esri.layers.mixins.SublayersOwner")],t),t};function Wmt(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?cae(e.view.floors,t.floorInfo.floorField):null}function uH(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?cae(e,t.floorInfo.floorField):null}function cae(e,t){if(!e?.length)return null;const i=e.filter(r=>r!=="").map(r=>`'${r}'`);return i.push("''"),`${t} IN (${i.join(",")}) OR ${t} IS NULL`}const ALe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let Na=class extends Je{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(i=>{const r=uH(this.floors,i);return i.toExportImageJSON(r)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&ELe(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",i=>this.notifyChange(ALe[i.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(i=>i.id).join(","):"show:-1":null}get layerDefs(){const t=!!this.floors?.length,i=this.visibleSublayers.filter(r=>r.definitionExpression!=null||t&&r.floorInfo!=null);return i.length?JSON.stringify(i.reduce((r,s)=>{const n=uH(this.floors,s),o=VF(n,s.definitionExpression);return o!=null&&(r[s.id]=o),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const i=this.layer.sublayers,r=this.scale,s=o=>{o.visible&&(r===0||UPe(r,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):t.unshift(o))};i&&i.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((o,a)=>t[a]!==o)?t:n}toJSON(){const t=this.layer;let i={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?i.dynamicLayers=this.dynamicLayers:i={...i,layers:this.layers,layerDefs:this.layerDefs},i}};c([d({readOnly:!0})],Na.prototype,"dynamicLayers",null),c([d()],Na.prototype,"floors",void 0),c([d({readOnly:!0})],Na.prototype,"hasDynamicLayers",null),c([d()],Na.prototype,"layer",null),c([d({readOnly:!0})],Na.prototype,"layers",null),c([d({readOnly:!0})],Na.prototype,"layerDefs",null),c([d({type:Number})],Na.prototype,"scale",void 0),c([d({readOnly:!0})],Na.prototype,"version",null),c([d({readOnly:!0})],Na.prototype,"visibleSublayers",null),Na=c([F("esri.layers.support.ExportImageParameters")],Na);let hr=class extends xg(fC(Tg(uae(Boe(sC(yb(gb(wf(vb(B8(lC(_f)))))))))))){constructor(...t){super(...t),this._exportImageParameters=new Na({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(_o).then(()=>this._fetchService(i))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(t,i){const r=i.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(t,i,r,s){if(!this.loaded||!t)return;const n=t.slice().reverse().flatten(({sublayers:p})=>p&&p.toArray().reverse()).toArray();let o=!1;const a=Yn(s.origin);if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(a===je.PORTAL_ITEM){const p=this.createSublayersForOrigin("service").sublayers;o=lH(n,p,je.SERVICE)}else if(a>je.PORTAL_ITEM){const p=this.createSublayersForOrigin("portal-item");o=lH(n,p.sublayers,Yn(p.origin))}}const l=[],u={writeSublayerStructure:o,...s};let h=o||this.hasVisibleLayersForOrigin(a);n.forEach(p=>{const f=p.write({},u);l.push(f),h=h||p.originOf("visible")==="user"}),l.some(p=>Object.keys(p).length>1)&&(i.layers=l),h&&(i.visibleLayers=n.filter(p=>p.visible).map(p=>p.id))}createExportImageParameters(t,i,r,s){const n=s?.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian()),this._exportImageParameters.floors=s?.floors??null,this._exportImageParameters.scale=Jk({extent:t,width:i})*n;const o=this._exportImageParameters.toJSON(),a=!s?.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=t?.spatialReference,u=Xd(l);o.dpi*=n;const h={};if(s?.timeExtent){const{start:p,end:f}=s.timeExtent.toJSON();h.time=p&&f&&p===f?""+p:`${p??"null"},${f??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(h.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:u,imageSR:u,size:i+","+r,...o,...a,...h}}async fetchImage(t,i,r,s){const{data:n}=await this._fetchImage("image",t,i,r,s);return n}async fetchImageBitmap(t,i,r,s){const{data:n,url:o}=await this._fetchImage("blob",t,i,r,s);return D3(n,o,s?.signal)}async fetchRecomputedExtents(t={}){const i={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Ne(this.url,i),{extent:s,fullExtent:n,timeExtent:o}=r,a=s||n;return{fullExtent:a&&bt.fromJSON(a),timeExtent:o&&io.fromJSON({start:o[0],end:o[1]})}}loadAll(){return w$(this,t=>{t(this.allSublayers),t(this.subtables)})}serviceSupportsSpatialReference(t){return f9(this,t)}async _fetchImage(t,i,r,s,n){const o={responseType:t,signal:n?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(i,r,s,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new W("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:l}=await Ne(a,o);return{data:l,url:a}}catch(l){throw ls(l)?l:new W("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:l})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:i,ssl:r}=await Ne(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(t){return!(t==null||!this.sublayersSourceJSON[t]?.visibleLayers)}};c([d(f1("dateFieldsTimeReference"))],hr.prototype,"dateFieldsTimeZone",void 0),c([d({type:Boolean})],hr.prototype,"datesInUnknownTimezone",void 0),c([d()],hr.prototype,"dpi",void 0),c([d()],hr.prototype,"gdbVersion",void 0),c([d()],hr.prototype,"imageFormat",void 0),c([ue("imageFormat",["supportedImageFormatTypes"])],hr.prototype,"readImageFormat",null),c([d({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],hr.prototype,"imageMaxHeight",void 0),c([d({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],hr.prototype,"imageMaxWidth",void 0),c([d()],hr.prototype,"imageTransparency",void 0),c([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],hr.prototype,"isReference",void 0),c([d({json:{read:!1,write:!1}})],hr.prototype,"labelsVisible",void 0),c([d({type:["ArcGISMapServiceLayer"]})],hr.prototype,"operationalLayerType",void 0),c([d({json:{read:!1,write:!1}})],hr.prototype,"popupEnabled",void 0),c([d(f1("preferredTimeReference"))],hr.prototype,"preferredTimeZone",void 0),c([d()],hr.prototype,"sourceJSON",void 0),c([d({json:{write:{ignoreOrigin:!0}}})],hr.prototype,"sublayers",void 0),c([ge("sublayers",{layers:{type:[Sx]},visibleLayers:{type:[vt]}})],hr.prototype,"writeSublayers",null),c([d({type:["show","hide","hide-children"]})],hr.prototype,"listMode",void 0),c([d({json:{read:!1},readOnly:!0,value:"map-image"})],hr.prototype,"type",void 0),c([d(fx)],hr.prototype,"url",void 0),hr=c([F("esri.layers.MapImageLayer")],hr);const q9=hr,Ymt=Object.freeze(Object.defineProperty({__proto__:null,default:q9},Symbol.toStringTag,{value:"Module"}));var Kk;let Ru=Kk=class extends ae{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new Kk({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ru.prototype,"cols",void 0),c([d({type:vt,json:{write:!0}})],Ru.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],Ru.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ru.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],Ru.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ru.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],Ru.prototype,"scale",void 0),Ru=Kk=c([F("esri.layers.support.LOD")],Ru);const xt=Ru;let hae=class{constructor(t,i,r,s,n=void 0){this.id=t,this.level=i,this.row=r,this.col=s,this.extent=n}};var td;const cH=new gt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Ds=td=class extends ae{static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:s=ke.WebMercator,numLODs:n=24}=e;if(!Kn(s)){const p=[];if(i)for(let f=0;f<i.length;f++){const m=i[f];p.push(new xt({level:f,scale:m,resolution:m}))}else{let f=5e-4;for(let m=n-1;m>=0;m--)p.unshift(new xt({level:m,scale:f,resolution:f})),f*=2}return new td({dpi:96,lods:p,origin:new Ve(0,0,s),size:[r,r],spatialReference:s})}const o=Cn(s),a=e.origin?new Ve({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Ve(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,u=1/($c(s)*39.37*l),h=[];if(i)for(let p=0;p<i.length;p++){const f=i[p],m=f*u;h.push(new xt({level:p,scale:f,resolution:m}))}else{let p=ZS(s)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const f=Math.ceil(n/t);h.push(new xt({level:0,scale:p,resolution:p*u}));for(let m=1;m<f;m++){const g=p/2**t,b=g*u;h.push(new xt({level:m,scale:g,resolution:b})),p=g}}return new td({dpi:l,lods:h,origin:a,size:[r,r],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=Cn(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return Ve.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const r=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach(n=>{r.push(n.scale),t=n.scale>t?n.scale:t,i=n.scale<i?n.scale:i,s[n.level]=n})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),r=i+1;return t[i]/(t[i]/t[r])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let r=0;for(;r<i;r++){const s=t[r],n=t[r+1];if(s<=e)return r;if(n===e)return r+1;if(s>e&&n<e)return r+Math.log(s/e)/Math.log(s/n)}return r}tileAt(e,t,i,r){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=i;else if(Xi(t.spatialReference,this.spatialReference))n=t.x,o=t.y,r=i;else{const u=x$(t,this.spatialReference);if(u==null)return null;n=u.x,o=u.y,r=i}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return r||(r=new hae(null,0,0,0,Mo())),r.level=e,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=td.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===td.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(i=o)}if(!i)return;const r=e.level-i.level,s=i.resolution*this.size[0]/2**r,n=i.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Mo()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(i==null)return null;const{resolution:r}=i,s=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return td.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const i=[],r=this.lods.length-t;for(let s=0;s<r;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new xt({level:s,scale:o,resolution:a}))}return new td({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const r=e[i];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};c([d({type:Number,json:{write:!0}})],Ds.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],Ds.prototype,"dpi",void 0),c([d({type:String,json:{read:cH.read,write:cH.write,origins:{"web-scene":{read:!1,write:!1}}}})],Ds.prototype,"format",void 0),c([d({readOnly:!0})],Ds.prototype,"isWrappable",null),c([d({type:Ve,json:{write:!0}})],Ds.prototype,"origin",void 0),c([ue("origin")],Ds.prototype,"readOrigin",null),c([d({type:[xt],value:null,json:{write:!0}})],Ds.prototype,"lods",null),c([d({readOnly:!0})],Ds.prototype,"scales",void 0),c([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Ds.prototype,"size",void 0),c([ue("size",["rows","cols"])],Ds.prototype,"readSize",null),c([ge("size",{cols:{type:vt},rows:{type:vt}})],Ds.prototype,"writeSize",null),c([d({type:ke,json:{write:!0}})],Ds.prototype,"spatialReference",void 0),Ds=td=c([F("esri.layers.support.TileInfo")],Ds),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Ds||(Ds={}));const sg=Ds;var Xk;let id=Xk=class extends ae{constructor(e){super(e)}clone(){return new Xk({customLayerParameters:K(this.customLayerParameters),customParameters:K(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};c([d({json:{type:Object,write:!0}})],id.prototype,"customLayerParameters",void 0),c([d({json:{type:Object,write:!0}})],id.prototype,"customParameters",void 0),c([d({type:String,json:{write:!0}})],id.prototype,"layerIdentifier",void 0),c([d({type:String,json:{write:!0}})],id.prototype,"tileMatrixSet",void 0),c([d({type:String,json:{write:!0}})],id.prototype,"url",void 0),id=Xk=c([F("esri.layers.support.WMTSLayerInfo")],id);var Qk;let pr=Qk=class extends xg(vb(Tg(yb(gb(wf(_f)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new bt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,ke.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=ke.WebMercator,this.subDomains=null,this.tileInfo=new sg({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ve({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:ke.WebMercator}),spatialReference:ke.WebMercator,lods:[new xt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new xt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new xt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new xt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new xt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new xt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new xt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new xt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new xt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new xt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new xt({level:10,scale:577790.554289,resolution:152.874056570411}),new xt({level:11,scale:288895.277144,resolution:76.4370282850732}),new xt({level:12,scale:144447.638572,resolution:38.2185141425366}),new xt({level:13,scale:72223.819286,resolution:19.1092570712683}),new xt({level:14,scale:36111.909643,resolution:9.55462853563415}),new xt({level:15,scale:18055.954822,resolution:4.77731426794937}),new xt({level:16,scale:9027.977411,resolution:2.38865713397468}),new xt({level:17,scale:4513.988705,resolution:1.19432856685505}),new xt({level:18,scale:2256.994353,resolution:.597164283559817}),new xt({level:19,scale:1128.497176,resolution:.298582141647617}),new xt({level:20,scale:564.248588,resolution:.14929107082380833}),new xt({level:21,scale:282.124294,resolution:.07464553541190416}),new xt({level:22,scale:141.062147,resolution:.03732276770595208}),new xt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let i="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const r=new oc(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&r.authority?.includes("{subDomain}")&&(i="is missing 'subDomains' property")}else i="spatialReference must match tileInfo.spatialReference";else i="is missing the required 'urlTemplate' property value";if(i)throw new W("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${i}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||ke.fromJSON(t.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:i}=this,r=new oc(t),s=r.scheme?r.scheme+"://":"//",n=s+r.authority+"/",o=r.authority;if(o?.includes("{subDomain}")){if(i&&i.length>0&&o.split(".").length>1)for(const a of i)e.push(s+o.replaceAll(/\{subDomain\}/gi,a)+"/")}else e.push(n);return e.map(bQ)}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new oc(e),i=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.slice(i.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){nu(e)&&(e="https:"+e),e&&(e=e.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),e=Ja(e)),t.templateUrl=e}fetchTile(e,t,i,r={}){const{signal:s}=r,n=this.getTileUrl(e,t,i),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return Ne(n,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,i,r={}){const{signal:s}=r;if(this.fetchTile!==Qk.prototype.fetchTile){const l=await this.fetchTile(e,t,i,r);return F3(l,e,t,i,s)}const n=this.getTileUrl(e,t,i),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await Ne(n,o);return F3(a,e,t,i,s)}getTileUrl(e,t,i){const{levelValues:r,tileServers:s,urlPath:n}=this;if(!r||!s||!n)return"";const o=r[e];return s[t%s.length]+a$(n,{level:o,z:o,col:i,x:i,row:t,y:t})}};c([d({type:String,value:"",json:{write:!0}})],pr.prototype,"copyright",void 0),c([d({type:bt,json:{write:!0},nonNullable:!0})],pr.prototype,"fullExtent",void 0),c([d({readOnly:!0,json:{read:!1,write:!1}})],pr.prototype,"legendEnabled",void 0),c([d({type:["show","hide"]})],pr.prototype,"listMode",void 0),c([d({json:{read:!0,write:!0}})],pr.prototype,"blendMode",void 0),c([d()],pr.prototype,"levelValues",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],pr.prototype,"isReference",void 0),c([d({type:["WebTiledLayer"],value:"WebTiledLayer"})],pr.prototype,"operationalLayerType",void 0),c([d({readOnly:!0,json:{read:!1,write:!1}})],pr.prototype,"popupEnabled",void 0),c([d({type:ke})],pr.prototype,"spatialReference",void 0),c([ue("spatialReference",["spatialReference","fullExtent.spatialReference"])],pr.prototype,"readSpatialReference",null),c([d({type:[String],json:{write:!0}})],pr.prototype,"subDomains",void 0),c([d({type:sg,json:{write:!0}})],pr.prototype,"tileInfo",void 0),c([d({readOnly:!0})],pr.prototype,"tileServers",null),c([d({json:{read:!1}})],pr.prototype,"type",void 0),c([d()],pr.prototype,"urlPath",null),c([d({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],pr.prototype,"urlTemplate",void 0),c([ue("urlTemplate",["urlTemplate","templateUrl"])],pr.prototype,"readUrlTemplate",null),c([ge("urlTemplate",{templateUrl:{type:String}})],pr.prototype,"writeUrlTemplate",null),c([d({type:id,json:{write:!0}})],pr.prototype,"wmtsInfo",void 0),pr=Qk=c([F("esri.layers.WebTileLayer")],pr);const pae=pr,Xmt=Object.freeze(Object.defineProperty({__proto__:null,default:pae},Symbol.toStringTag,{value:"Module"}));let Fn=class extends pae{constructor(...t){super(...t),this.portalItem=null,this.isReference=null,this.tileInfo=new sg({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ve({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:ke.WebMercator}),spatialReference:ke.WebMercator,lods:[new xt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new xt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new xt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new xt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new xt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new xt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new xt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new xt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new xt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new xt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new xt({level:10,scale:577790.554289,resolution:152.874056570411}),new xt({level:11,scale:288895.277144,resolution:76.4370282850732}),new xt({level:12,scale:144447.638572,resolution:38.2185141425366}),new xt({level:13,scale:72223.819286,resolution:19.1092570712683}),new xt({level:14,scale:36111.909643,resolution:9.55462853563415}),new xt({level:15,scale:18055.954822,resolution:4.77731426794937}),new xt({level:16,scale:9027.977411,resolution:2.38865713397468}),new xt({level:17,scale:4513.988705,resolution:1.19432856685505}),new xt({level:18,scale:2256.994353,resolution:.597164283559817}),new xt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new bt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,ke.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};c([d({type:Cv,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Fn.prototype,"portalItem",void 0),c([d({type:Boolean,json:{read:!1,write:!1}})],Fn.prototype,"isReference",void 0),c([d({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Fn.prototype,"refreshInterval",null),c([d({type:sg,json:{write:!1}})],Fn.prototype,"tileInfo",void 0),c([d({type:["show","hide"]})],Fn.prototype,"listMode",void 0),c([d({readOnly:!0,json:{read:!1,write:!1}})],Fn.prototype,"subDomains",void 0),c([d({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],Fn.prototype,"fullExtent",void 0),c([d({readOnly:!0,json:{read:!1,write:!1}})],Fn.prototype,"urlTemplate",void 0),c([d({type:["OpenStreetMap"]})],Fn.prototype,"operationalLayerType",void 0),c([d({json:{read:!1}})],Fn.prototype,"type",void 0),c([d({json:{read:!1,write:!1}})],Fn.prototype,"copyright",void 0),c([d({json:{read:!1,write:!1}})],Fn.prototype,"wmtsInfo",void 0),Fn=c([F("esri.layers.OpenStreetMapLayer")],Fn);const H9=Fn,eyt=Object.freeze(Object.defineProperty({__proto__:null,default:H9},Symbol.toStringTag,{value:"Module"}));let $Le=class{constructor(t,i=0,r=t.lods[t.lods.length-1].level){this.tileInfo=t,this.minLOD=i,this.maxLOD=r,t.lodAt(i)||(this.minLOD=t.lods[0].level),t.lodAt(r)||(this.maxLOD=t.lods[t.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(t,i,r){const s=this.tileInfo?.lodAt(t);return!s||t<this.minLOD||t>this.maxLOD?"unavailable":s.cols&&s.rows?r>=s.cols[0]&&r<=s.cols[1]&&i>=s.rows[0]&&i<=s.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(t,i,r,s){await WI(s);const n=this.getAvailability(t,i,r);if(n==="unavailable")throw new W("tile-map:tile-unavailable","Tile is not available",{level:t,row:i,col:r});return n}async fetchAvailabilityUpsample(t,i,r,s,n){await WI(n),s.level=t,s.row=i,s.col=r;const o=this.tileInfo;return o.updateTileInfo(s),this.fetchAvailability(t,i,r,n).catch(a=>{if(ls(a))throw a;if(o.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,n);throw a})}};var eD;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(eD||(eD={}));function CLe(e,t=!1){return e<=eF?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}let hH=class tD{constructor(t){OLe(t);const{location:i,data:r}=t;this.location=Object.freeze(K(i));const s=this.location.width,n=this.location.height;let o=!0,a=!0;const l=Math.ceil(s*n/32),u=CLe(l);let h=0;for(let p=0;p<r.length;p++){const f=p%32;r[p]?(a=!1,u[h]|=1<<f):o=!1,f===31&&++h}a?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=u,this.byteSize=40+Nme(u))}getAvailability(t,i){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const r=(t-this.location.top)*this.location.width+(i-this.location.left),s=r%32,n=r>>5,o=this._availability;return n<0||n>o.length?"unknown":o[n]&1<<s?"available":"unavailable"}static fromDefinition(t,i){const r=t.service.request||Ne,{row:s,col:n,width:o,height:a}=t,l={query:{f:"json"}};return i=i?{...l,...i}:l,r(RLe(t),i).then(u=>u.data).catch(u=>{if(u?.details?.httpStatus===422)return{location:{top:s,left:n,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw u}).then(u=>{if(u.location&&(u.location.top!==s||u.location.left!==n||u.location.width!==o||u.location.height!==a))throw new W("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:s,left:n,width:o,height:a}});return tD.fromJSON(u)})}static fromJSON(t){return Object.freeze(new tD(t))}};function pH(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function RLe(e){let t;if(e.service.tileServers?.length){const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const i=e.service.query;return i&&(t=`${t}?${i}`),t}function OLe(e){if(!e?.location)throw new W("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new W("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new W("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new W("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new W("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}var oy;function dH(e,t,i){return new W("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})}let Ou=oy=class extends Je{constructor(e){super(e),this._pendingTilemapRequests={},this.request=Ne,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new O8(2*eD.MEGABYTES),this.addHandles(at(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition(),Bs))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(dH(e,t,i)):this._fetchTilemap(e,t,i,r).catch(s=>s).then(s=>{if(s instanceof hH){const n=s.getAvailability(t,i);if(n==="unavailable")throw dH(e,t,i);return n}if(ls(s))throw s;return"unknown"})}fetchAvailabilityUpsample(e,t,i,r,s){r.level=e,r.row=t,r.col=i;const n=this.layer.tileInfo;n.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,s).catch(a=>{if(ls(a))throw a;if(n.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,s);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,s,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,s,n){if(!this._prefetchingEnabled||e==null)return;const o=`prefetch-${e}`;if(this.hasHandles(o))return;const a=new AbortController;n.then(()=>a.abort(),()=>a.abort());let l=!1;const u=ti(()=>{l||(l=!0,a.abort())});if(this.addHandles(u,o),await PX(10,a.signal).catch(()=>{}),l||(l=!0,this.removeHandles(o)),ya(a))return;const h=new hae(e,t,i,r),p={...s,signal:a.signal},f=this.layer.tileInfo;for(let m=0;oy._prefetches.length<oy._maxPrefetch&&f.upsampleTile(h);++m){const g=this.fetchAvailability(h.level,h.row,h.col,p);oy._prefetches.push(g);const b=()=>{oy._prefetches.removeUnordered(g)};g.then(b,b)}}_fetchTilemap(e,t,i,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new W("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const s=this._tmpTilemapDefinition,n=this._tilemapFromCache(e,t,i,s);if(n)return Promise.resolve(n);const o=r?.signal;return r={...r,signal:null},new Promise((a,l)=>{ha(o,()=>l(Oi()));const u=pH(s);let h=this._pendingTilemapRequests[u];if(!h){h=hH.fromDefinition(s,r).then(f=>(this._tilemapCache.put(u,f,f.byteSize),f));const p=()=>{delete this._pendingTilemapRequests[u]};this._pendingTilemapRequests[u]=h,h.then(p,p)}h.then(a,l)})}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:Zd({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const s=pH(r);return this._tilemapCache.get(s)}get test(){}};Ou._maxPrefetch=4,Ou._prefetches=new Ud({initialSize:oy._maxPrefetch}),c([d({constructOnly:!0})],Ou.prototype,"layer",void 0),c([d({constructOnly:!0})],Ou.prototype,"minLOD",void 0),c([d({constructOnly:!0})],Ou.prototype,"maxLOD",void 0),c([d({constructOnly:!0})],Ou.prototype,"request",void 0),c([d({constructOnly:!0})],Ou.prototype,"size",void 0),Ou=oy=c([F("esri.layers.support.TilemapCache")],Ou);const PLe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}readMaxScale(i,r){return r.minLOD!=null&&r.maxLOD!=null?i:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(i,r,s){const n=r.capabilities?.includes("Tilemap");let{minLOD:o,maxLOD:a,minScale:l,maxScale:u}=r;if(o==null&&a==null&&l!==0&&u!==0){const h=p=>Math.round(1e4*p)/1e4;l=h(l||r.tileInfo.lods[0].scale),u=h(u||r.tileInfo.lods[r.tileInfo.lods.length-1].scale);for(const p of r.tileInfo.lods){const f=h(p.scale);o=f>=l?p.level:o,a=f>=u?p.level:a}}if(n)return new Ou({layer:this,minLOD:o,maxLOD:a});if(r.tileInfo){const h=new sg;return h.read(r.tileInfo,s),new $Le(h,o,a)}return null}};return c([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([d()],t.prototype,"minScale",void 0),c([ue("service","minScale")],t.prototype,"readMinScale",null),c([d()],t.prototype,"maxScale",void 0),c([ue("service","maxScale")],t.prototype,"readMaxScale",null),c([d({type:ke})],t.prototype,"spatialReference",void 0),c([d({readOnly:!0})],t.prototype,"supportsBlankTile",null),c([d({type:sg})],t.prototype,"tileInfo",void 0),c([d()],t.prototype,"tilemapCache",void 0),c([ue("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),c([d()],t.prototype,"version",void 0),t=c([F("esri.layers.mixins.ArcGISCachedService")],t),t};var iD;const fH=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let Pr=iD=class extends xg(Tg(uae(PLe(Boe(yb(gb(sC(wf(vb(B8(lC(_f)))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(_o).then(()=>this._fetchService(t))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,t){return(e=e||t.tileInfo?.spatialReference)&&ke.fromJSON(e)}writeSublayers(e,t,i,r){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),n=[],o={writeSublayerStructure:!1,...r};s.forEach(a=>{const l=a.write({},o);n.push(l)}),n.some(a=>Object.keys(a).length>1)&&(t.layers=n)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map(t=>$r(t).path):null}fetchTile(e,t,i,r={}){const{signal:s}=r,n=this.getTileUrl(e,t,i),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return Ne(n,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,i,r={}){const{signal:s}=r;if(this.fetchTile!==iD.prototype.fetchTile){const l=await this.fetchTile(e,t,i,r);return F3(l,e,t,i,s)}const n=this.getTileUrl(e,t,i),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await Ne(n,o);return F3(a,e,t,i,s)}getTileUrl(e,t,i){const r=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,s=Zd({...this.parsedUrl?.query,blankTile:!r&&null,...this.customParameters,token:this.apiKey}),n=this.tileServers;return`${n&&n.length?n[t%n.length]:this.parsedUrl?.path}/tile/${e}/${t}/${i}${s?"?"+s:""}`}loadAll(){return w$(this,e=>{e(this.allSublayers)})}_fetchService(e){return new Promise((t,i)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new W("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new W("tile-layer:undefined-url","layer's url is not defined");const r=ip(this.parsedUrl.path);if(r!=null&&r.serverType==="ImageServer")throw new W("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Ne(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,i)}).then(t=>{let i=this.url;if(t.ssl&&(i=this.url=i.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!q8(i))return this._fetchServerVersion(i,e).then(r=>{this.read({currentVersion:r})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!hIe(e))return Promise.reject();const i=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Ne(i,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(r=>{if(r.data&&r.data.currentVersion)return r.data.currentVersion;throw new W("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i);return t?t[2]:void 0}_getDefaultAttribution(e){if(e==null)return null;let t;e=e.toLowerCase();for(let i=0,r=fH.length;i<r;i++)if(t=fH[i],t.toLowerCase().includes(e))return ua("//static.arcgis.com/attribution/"+t);return null}_getDefaultTileServers(e){if(e==null)return[];const t=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,i=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return t||i?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[dae]}};c([d({readOnly:!0})],Pr.prototype,"attributionDataUrl",null),c([d({type:["show","hide","hide-children"]})],Pr.prototype,"listMode",void 0),c([d({json:{read:!0,write:!0}})],Pr.prototype,"blendMode",void 0),c([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Pr.prototype,"isReference",void 0),c([d({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],Pr.prototype,"operationalLayerType",void 0),c([d({type:Boolean})],Pr.prototype,"resampling",void 0),c([d()],Pr.prototype,"sourceJSON",void 0),c([d({type:ke})],Pr.prototype,"spatialReference",void 0),c([ue("spatialReference",["spatialReference","tileInfo"])],Pr.prototype,"readSpatialReference",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Pr.prototype,"path",void 0),c([d({readOnly:!0})],Pr.prototype,"sublayers",void 0),c([ge("sublayers",{layers:{type:[Sx]}})],Pr.prototype,"writeSublayers",null),c([d({json:{read:!1,write:!1}})],Pr.prototype,"popupEnabled",void 0),c([d()],Pr.prototype,"tileServers",null),c([Ht("tileServers")],Pr.prototype,"castTileServers",null),c([d({readOnly:!0,json:{read:!1}})],Pr.prototype,"type",void 0),c([d(fx)],Pr.prototype,"url",void 0),Pr=iD=c([F("esri.layers.TileLayer")],Pr);const dae=Symbol("default-fetch-tile");Pr.prototype.fetchTile[dae]=!0;const W9=Pr,iyt=Object.freeze(Object.defineProperty({__proto__:null,default:W9},Symbol.toStringTag,{value:"Module"})),LLe=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function rD(e){return e!=null&&LLe.some(([t,i])=>e>=t&&e<=i)}const NLe={visible:"visibleSublayers"};let Eh=class extends Je{constructor(t){super(t),this.scale=0}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("wms-sublayer-update",i=>this.notifyChange(NLe[i.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:t})=>t).map(({name:t})=>t).join()}get version(){this.commitProperty("layers");const t=this.layer;return t&&t.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:t,scale:i}=this,r=t?.sublayers,s=[],n=o=>{const{minScale:a,maxScale:l,sublayers:u,visible:h}=o;h&&(i===0||(a===0||i<=a)&&(l===0||i>=l))&&(u?u.forEach(n):s.push(o))};return r?.forEach(n),s}toJSON(){const{layer:t,layers:i}=this,{imageFormat:r,imageTransparency:s,version:n}=t;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:i}}};c([d()],Eh.prototype,"layer",null),c([d({readOnly:!0})],Eh.prototype,"layers",null),c([d({type:Number})],Eh.prototype,"scale",void 0),c([d({readOnly:!0})],Eh.prototype,"version",null),c([d({readOnly:!0})],Eh.prototype,"visibleSublayers",null),Eh=c([F("esri.layers.support.ExportWMSImageParameters")],Eh);var uI;let kLe=0,ir=uI=class extends sx(aN){constructor(e){super(e),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([au(()=>this.sublayers,"after-add",({item:t})=>{t.parent=this,t.layer=this.layer},ns),au(()=>this.sublayers,"after-remove",({item:t})=>{t.layer=t.parent=null},ns),at(()=>this.sublayers,(t,i)=>{if(i)for(const r of i)r.layer=r.parent=null;if(t)for(const r of t)r.parent=this,r.layer=this.layer},ns),at(()=>this.layer,t=>{if(this.sublayers)for(const i of this.sublayers)i.layer=t},ns)])}get id(){return this._get("id")??kLe++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t.legendUrl??t.legendURL??null}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}castSublayers(e){return bi(Be.ofType(uI),e)}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new uI;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map(t=>t.clone())??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const i=this.layer;this._get(e)!==t&&(this._set(e,t),i&&i.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};c([d()],ir.prototype,"description",void 0),c([d({readOnly:!0})],ir.prototype,"dimensions",void 0),c([d({type:bt,json:{name:"extent"}})],ir.prototype,"fullExtent",void 0),c([d()],ir.prototype,"fullExtents",void 0),c([d({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],ir.prototype,"id",null),c([d({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],ir.prototype,"legendUrl",void 0),c([ue("legendUrl",["legendUrl","legendURL"])],ir.prototype,"readLegendUrl",null),c([d({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ir.prototype,"legendEnabled",void 0),c([d()],ir.prototype,"layer",void 0),c([d()],ir.prototype,"maxScale",void 0),c([d()],ir.prototype,"minScale",void 0),c([d({readOnly:!0})],ir.prototype,"effectiveScaleRange",null),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],ir.prototype,"name",void 0),c([d()],ir.prototype,"parent",void 0),c([d({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],ir.prototype,"popupEnabled",void 0),c([d({type:Boolean,json:{write:{ignoreOrigin:!0}}})],ir.prototype,"queryable",void 0),c([d()],ir.prototype,"sublayers",void 0),c([Ht("sublayers")],ir.prototype,"castSublayers",null),c([d({type:[Number],json:{read:{source:"spatialReferences"}}})],ir.prototype,"spatialReferences",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],ir.prototype,"title",void 0),c([d({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],ir.prototype,"visible",null),ir=uI=c([F("esri.layers.support.WMSSublayer")],ir);const sD=ir,mH={84:4326,83:4269,27:4267};function DLe(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const i=e.documentElement;if(i.nodeName==="ServiceExceptionReport"){const G=Array.prototype.slice.call(i.childNodes).map(Q=>Q.textContent).join(`\r
`);throw new W("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",G)}const r=In("Capability",i),s=In("Service",i),n=r&&In("Request",r);if(!r||!s||!n)return null;const o=In("Layer",r);if(!o)return null;const a=i.nodeName==="WMS_Capabilities"||i.nodeName==="WMT_MS_Capabilities"?i.getAttribute("version"):"1.3.0",l=Zu("Title",s,"")||Zu("Name",s,""),u=Zu("AccessConstraints",s,""),h=/^none$/i.test(u)?"":u,p=Zu("Abstract",s,""),f=parseInt(Zu("MaxWidth",s,"5000"),10),m=parseInt(Zu("MaxHeight",s,"5000"),10),g=gH(n,"GetMap"),b=yH(n,"GetMap"),w=g_(o,a,t);if(!w)return null;let S,T=0;const x=Array.prototype.slice.call(r.childNodes),_=w.sublayers??[],M=G=>{G!=null&&_.push(G)};x.forEach(G=>{G.nodeName==="Layer"&&(T===0?S=G:(T===1&&w.name&&(w.name="",M(g_(S,a,t))),M(g_(G,a,t))),T++)});let I=w.sublayers,A=w.extent;const C=w.fullExtents??[];if(I||(I=[]),I.length===0&&I.push(w),!A){const G=new bt(I[0].extent);w.extent=G.toJSON(),A=w.extent}const R=w.spatialReferences.length>0?w.spatialReferences:fae(w),O=yH(n,"GetFeatureInfo"),k=O?gH(n,"GetFeatureInfo"):null,L=mae(I),V=w.minScale||0,J=w.maxScale||0,y=w.dimensions??[],E=L.reduce((G,Q)=>G.concat(Q.dimensions??[]),[]),$=y.concat(E).filter(gae);let P=null;if($.length){const G=$.map(Q=>{const{extent:se}=Q;return ULe(se)?se.map(ie=>ie.getTime()):se?.map(ie=>[ie.min.getTime(),ie.max.getTime()])}).flat(2).filter(ko);P={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...G),Math.max(...G)]}}return{copyright:h,description:p,dimensions:y,extent:A,fullExtents:C,featureInfoFormats:k,featureInfoUrl:O,mapUrl:b,maxWidth:f,maxHeight:m,maxScale:J,minScale:V,layers:L,spatialReferences:R,supportedImageFormatTypes:g,timeInfo:P,title:l,version:a}}function FLe(e){const t=e.filter(i=>i.popupEnabled&&i.name&&i.queryable);return t.length?t.map(({name:i})=>i).join():null}function fae(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const i=fae(t);if(i.length>0)return i}return[]}function mae(e){let t=[];for(const i of e)t.push(i),i.sublayers?.length&&(t=t.concat(mae(i.sublayers)),delete i.sublayers);return t}function cI(e,t,i){return t.getAttribute(e)??i}function jLe(e,t,i,r){const s=In(e,i);return s?cI(t,s,r):r}function In(e,t){for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];if(yae(r)&&r.nodeName===e)return r}return null}function hI(e,t){if(t==null)return[];const i=[];for(let r=0;r<t.childNodes.length;r++){const s=t.childNodes[r];yae(s)&&s.nodeName===e&&i.push(s)}return i}function Zu(e,t,i){return In(e,t)?.textContent??i}function Yb(e,t,i){if(!e)return null;const r=parseFloat(e.getAttribute("minx")),s=parseFloat(e.getAttribute("miny")),n=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,h;i?(a=isNaN(s)?-Number.MAX_VALUE:s,l=isNaN(r)?-Number.MAX_VALUE:r,u=isNaN(o)?Number.MAX_VALUE:o,h=isNaN(n)?Number.MAX_VALUE:n):(a=isNaN(r)?-Number.MAX_VALUE:r,l=isNaN(s)?-Number.MAX_VALUE:s,u=isNaN(n)?Number.MAX_VALUE:n,h=isNaN(o)?Number.MAX_VALUE:o);const p=new ke({wkid:t});return new bt({xmin:a,ymin:l,xmax:u,ymax:h,spatialReference:p})}function yH(e,t){const i=In(t,e);if(i){const r=In("DCPType",i);if(r){const s=In("HTTP",r);if(s){const n=In("Get",s);if(n){let o=jLe("OnlineResource","xlink:href",n,null);if(o){const a=o.indexOf("&");return a!==-1&&a===o.length-1&&(o=o.slice(0,-1)),GLe(o,["service","request"])}}}}}return null}function gH(e,t){const i=hI("Operation",e);if(!i.length)return hI("Format",In(t,e)).map(({textContent:s})=>s).filter(ko);const r=[];for(const s of i)if(s.getAttribute("name")===t){const n=hI("Format",s);for(const{textContent:o}of n)o!=null&&r.push(o)}return r}function vH(e,t,i){const r=In(t,e);if(!r)return i;const{textContent:s}=r;if(s==null||s==="")return i;const n=Number(s);return isNaN(n)?i:n}function g_(e,t,i){if(!e)return null;const r={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},s=In("LatLonBoundingBox",e),n=In("EX_GeographicBoundingBox",e);let o=null;s&&(o=Yb(s,4326)),n&&(o=new bt(0,0,0,0,new ke({wkid:4326})),o.xmin=parseFloat(Zu("westBoundLongitude",n,"0")),o.ymin=parseFloat(Zu("southBoundLatitude",n,"0")),o.xmax=parseFloat(Zu("eastBoundLongitude",n,"0")),o.ymax=parseFloat(Zu("northBoundLatitude",n,"0"))),s||n||(o=new bt(-180,-90,180,90,new ke({wkid:4326}))),r.minScale=vH(e,"MaxScaleDenominator",0),r.maxScale=vH(e,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(t)?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(l=>{if(l.nodeName==="Name")r.name=l.textContent||"";else if(l.nodeName==="Title")r.title=l.textContent||"";else if(l.nodeName==="Abstract")r.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const p=parseInt(u.slice(5),10);p===0||isNaN(p)||o||(o=t==="1.3.0"?Yb(l,p,rD(p)):Yb(l,p))}const h=u?.indexOf(":");if(h&&h>-1){let p=parseInt(u.slice(h+1),10);p===0||isNaN(p)||(p=mH[p]??p);const f=t==="1.3.0"?Yb(l,p,rD(p)):Yb(l,p);f&&r.fullExtents&&r.fullExtents.push(f)}}else if(l.nodeName===a)(l.textContent?.split(" ")??[]).forEach(u=>{let h=NaN;if(u.includes(":")){const[p,f]=u.toUpperCase().split(":");p!=="CRS"&&p!=="EPSG"||(h=parseInt(f,10))}else h=parseInt(u,10);if(h!==0&&!isNaN(h)){const p=mH[h]??h;r.spatialReferences.includes(p)||r.spatialReferences.push(p)}});else if(l.nodeName!=="Style"||r.legendUrl){if(l.nodeName==="Layer"){const u=g_(l,t,i);u&&(u.parentLayerId=r.id,r.sublayers||(r.sublayers=[]),r.sublayers.push(u))}}else{const u=In("LegendURL",l);if(u){const h=In("OnlineResource",u);h&&(r.legendUrl=h.getAttribute("xlink:href"))}}}),r.extent=o?.toJSON(),r.dimensions=hI("Dimension",e).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),h=l.getAttribute("units"),p=l.textContent,f=l.getAttribute("unitSymbol")??void 0,m=l.getAttribute("default")??void 0,g=cI("default",l,"0")!=="0",b=cI("nearestValue",l,"0")!=="0",w=cI("current",l,"0")!=="0";return gae({name:u,units:h})?{name:"time",units:"ISO8601",extent:_H(p),default:_H(m),multipleValues:g,nearestValue:b,current:w}:VLe({name:u,units:h})?{name:"elevation",units:h,extent:bH(p),unitSymbol:f,default:bH(m),multipleValues:g,nearestValue:b}:{name:u,units:h,extent:wH(p),unitSymbol:f,default:wH(m),multipleValues:g,nearestValue:b}}),r}function ULe(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function yae(e){return e.nodeType===Node.ELEMENT_NODE}function VLe(e){return/^elevation$/i.test(e.name)&&/^(epsg|crs):\d+$/i.test(e.units)}function gae(e){return/^time$/i.test(e.name)&&/^iso8601$/i.test(e.units)}function GLe(e,t){const i=[],r=$r(e);for(const s in r.query)r.query.hasOwnProperty(s)&&(t.includes(s.toLowerCase())||i.push(s+"="+r.query[s]));return r.path+(i.length?"?"+i.join("&"):"")}function bH(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(ko):i.map(r=>parseFloat(r))}function wH(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(ko):i}function _H(e){if(!e)return;const t=e.includes("/"),i=e.split(",");return t?i.map(r=>{const s=r.split("/");return s.length<2?null:{min:Q4(s[0]),max:Q4(s[1]),resolution:s.length>=3&&s[2]!=="0"?BLe(s[2]):void 0}}).filter(ko):i.map(r=>Q4(r))}function Q4(e){return _t.fromISO(e,{zone:Es.utcInstance}).toJSDate()}function BLe(e){const t=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,i=e.match(t);return i?{years:qg(i[1]),months:qg(i[2]),days:qg(i[3]),hours:qg(i[4]),minutes:qg(i[5]),seconds:qg(i[6])}:null}function qg(e){if(!e)return 0;const t=/(?:\d+(?:\.|,)\d+|\d+)/,i=e.match(t);if(!i)return 0;const r=i[0].replace(",",".");return Number(r)}function eR(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const zLe="0000-01-01T00:00:00Z",qLe="9999-12-31T23:59:59Z";function SH(e){if(!e||e.isAllTime||e.isEmpty)return;const{start:t,end:i}=e;return t&&i&&t.getTime()===i.getTime()?`${eR(t)}`:`${t?eR(t):zLe}/${i?eR(i):qLe}`}const xH=new Set([102100,3857,102113,900913]),HLe=new Set([3395,54004]);function WLe(e,t){let i=e.wkid;return t==null?i:(i!=null&&t.includes(i)||!e.latestWkid||(i=e.latestWkid),i!=null&&xH.has(i)?t.find(r=>xH.has(r))||t.find(r=>HLe.has(r))||102100:i)}const tR=new gt({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function TH(e){return e==="text/html"}function EH(e){return e==="text/plain"}let Jt=class extends xg(fC(vb(Tg(yb(gb(wf(_f))))))){constructor(...t){super(...t),this.allSublayers=new rg({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([au(()=>this.sublayers,"after-add",({item:i})=>{i.parent=i.layer=this},ns),au(()=>this.sublayers,"after-remove",({item:i})=>{i.layer=i.parent=null},ns),at(()=>this.sublayers,(i,r)=>{if(r)for(const s of r)s.layer=s.parent=null;if(i)for(const s of i)s.parent=s.layer=this},ns)])}normalizeCtorArgs(t,i){return typeof t=="string"?{url:t,...i}:t}destroy(){this.allSublayers.destroy()}load(t){const i=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(_o).then(()=>this._fetchService(i)).then(()=>this._checkLayerValidity())),Promise.resolve(this)}readFullExtentFromItemOrMap(t,i){const r=i.extent;return r?new bt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]}):null}writeFullExtent(t,i){i.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(TH)??this.featureInfoFormats.find(EH)??null}set featureInfoFormat(t){t==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(TH(t)||EH(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,i){const r=i.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(t,i){return new ke(i.spatialReferences[0])}writeSpatialReferences(t,i){const r=this.spatialReference?.wkid;t&&r?(i.spatialReferences=t.filter(s=>s!==r),i.spatialReferences.unshift(r)):i.spatialReferences=t}readSublayersFromItemOrMap(t,i,r){return MH(i.layers,r,i.visibleLayers)}readSublayers(t,i,r){return MH(i.layers,r)}writeSublayers(t,i,r,s){i.layers=[];const n=new Map,o=t.flatten(({sublayers:a})=>a??[]);for(const a of o)if(typeof a.parent?.id=="number"){const l=n.get(a.parent.id);l!=null?l.push(a.id):n.set(a.parent.id,[a.id])}for(const a of o){const l={sublayer:a,...s},u=a.write({parentLayerId:typeof a.parent?.id=="number"?a.parent.id:-1},l);if(n.has(a.id)&&(u.sublayerIds=n.get(a.id)),!a.sublayers&&a.name){const h=a.write({},l);delete h.id,i.layers.push(h)}}i.visibleLayers=o.filter(({visible:a,sublayers:l})=>a&&!l).map(({name:a})=>a).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:i,query:r}=$r(t);for(const n in r)/^(request|service)$/i.test(n)&&delete r[n];const s=F_(i,r??{});this._set("url",s)}createExportImageParameters(t,i,r,s){const n=s?.pixelRatio??1,o=Jk({extent:t,width:i})*n,a=new Eh({layer:this,scale:o}),{xmin:l,ymin:u,xmax:h,ymax:p,spatialReference:f}=t,m=WLe(f,this.spatialReferences),g=this.version==="1.3.0"&&rD(m)?`${u},${l},${p},${h}`:`${l},${u},${h},${p}`,b=a.toJSON(),w=this.version==="1.3.0"?"crs":"srs";return{bbox:g,[w]:m==null||isNaN(m)?void 0:"EPSG:"+m,...b}}async fetchImage(t,i,r,s){const n=this.mapUrl,o=this.createExportImageParameters(t,i,r,s);if(!o.layers){const u=document.createElement("canvas");return u.width=i,u.height=r,u}const a=SH(s?.timeExtent),l={responseType:"image",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:s?.signal};return Ne(n??"",l).then(u=>u.data)}async fetchImageBitmap(t,i,r,s){const n=this.mapUrl??"",o=this.createExportImageParameters(t,i,r,s);if(!o.layers){const h=document.createElement("canvas");return h.width=i,h.height=r,h}const a=SH(s?.timeExtent),l={responseType:"blob",query:this._mixCustomParameters({width:i,height:r,...o,time:a,...this.refreshParameters}),signal:s?.signal},{data:u}=await Ne(n,l);return D3(u,n,s?.signal)}fetchFeatureInfo(t,i,r,s,n){const o=Jk({extent:t,width:i}),a=new Eh({layer:this,scale:o}),l=FLe(a.visibleSublayers);if(this.featureInfoUrl==null||l==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const u=this.version==="1.3.0"?{I:s,J:n}:{x:s,y:n},h={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:i,height:r,...u},p={...this.createExportImageParameters(t,i,r),...h},f=this._mixCustomParameters(p);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(F_(this.featureInfoUrl,f))}findSublayerById(t){return this.allSublayers.find(i=>i.id===t)}findSublayerByName(t){return this.allSublayers.find(i=>i.name===t)}serviceSupportsSpatialReference(t){return gIe(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(i=>{const r=i===900913?ke.WebMercator:new ke({wkid:i});return Xi(r,t)})}_defaultFetchFeatureInfoFunction(t){const i=document.createElement("iframe");i.src=r0e(t),i.style.border="none",i.style.margin="0",i.style.width="100%",i.setAttribute("sandbox","");const r=new df({title:this.title,content:i}),s=new nl({sourceLayer:this,popupTemplate:r});return Promise.resolve([s])}async _fetchService(t){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:i,query:r}=this.parsedUrl,{data:s}=await Ne(i,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...r,...this.customParameters},responseType:"xml",signal:t});this.resourceInfo=DLe(s)}if(this.parsedUrl){const i=new oc(this.parsedUrl.path),{httpsDomains:r}=Kt.request;i.scheme!=="https"||i.port&&i.port!=="443"||!i.host||r.includes(i.host)||r.push(i.host)}this.read(this.resourceInfo,{origin:"service"})}_checkLayerValidity(){if(!this.allSublayers.length)throw new W("wmslayer:empty-layer","The layer doesn't have any sublayer")}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const i={...this.customParameters,...this.customLayerParameters};for(const r in i)t[r.toLowerCase()]=i[r];return t}};function JLe(e,t){return e.some(i=>{for(const r in i)if(uQ(i,r,null,t))return!0;return!1})}function MH(e,t,i){e=e??[];const r=new Map;e.every(n=>n.id==null)&&(e=K(e)).forEach((n,o)=>n.id=o);for(const n of e){const o=new sD;o.read(n,t),i&&!i.includes(o.name)&&(o.visible=!1),r.set(o.id,o)}const s=[];for(const n of e){const o=n.id!=null?r.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const a=r.get(n.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new Be),a.sublayers.push(o)}else s.push(o)}return s}c([d({readOnly:!0})],Jt.prototype,"allSublayers",void 0),c([d({json:{type:Object,write:!0}})],Jt.prototype,"customParameters",void 0),c([d({json:{type:Object,write:!0}})],Jt.prototype,"customLayerParameters",void 0),c([d({type:String,json:{write:!0}})],Jt.prototype,"copyright",void 0),c([d()],Jt.prototype,"description",void 0),c([d({readOnly:!0})],Jt.prototype,"dimensions",void 0),c([d({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Jt.prototype,"fullExtent",void 0),c([ue(["web-document","portal-item"],"fullExtent",["extent"])],Jt.prototype,"readFullExtentFromItemOrMap",null),c([ge(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Jt.prototype,"writeFullExtent",null),c([d()],Jt.prototype,"fullExtents",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],Jt.prototype,"featureInfoFormat",null),c([d({type:[String],readOnly:!0})],Jt.prototype,"featureInfoFormats",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],Jt.prototype,"featureInfoUrl",void 0),c([d()],Jt.prototype,"fetchFeatureInfoFunction",void 0),c([d({type:String,json:{origins:{"web-document":{default:"image/png",type:tR.jsonValues,read:{reader:tR.read,source:"format"},write:{writer:tR.write,target:"format"}}}}})],Jt.prototype,"imageFormat",void 0),c([ue("imageFormat",["supportedImageFormatTypes"])],Jt.prototype,"readImageFormat",null),c([d({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Jt.prototype,"imageMaxHeight",void 0),c([d({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Jt.prototype,"imageMaxWidth",void 0),c([d()],Jt.prototype,"imageTransparency",void 0),c([d(e9)],Jt.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Jt.prototype,"listMode",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],Jt.prototype,"mapUrl",void 0),c([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Jt.prototype,"isReference",void 0),c([d({type:["WMS"]})],Jt.prototype,"operationalLayerType",void 0),c([d()],Jt.prototype,"resourceInfo",void 0),c([d({type:ke,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Jt.prototype,"spatialReference",void 0),c([ue(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Jt.prototype,"readSpatialReferenceFromItemOrDocument",null),c([d({type:[vt],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Jt.prototype,"spatialReferences",void 0),c([ge(["web-document","portal-item"],"spatialReferences")],Jt.prototype,"writeSpatialReferences",null),c([d({type:Be.ofType(sD),json:{write:{target:"layers",overridePolicy(e,t,i){if(JLe(this.allSublayers,i))return{ignoreOrigin:!0}}}}})],Jt.prototype,"sublayers",void 0),c([ue(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Jt.prototype,"readSublayersFromItemOrMap",null),c([ue("service","sublayers",["layers"])],Jt.prototype,"readSublayers",null),c([ge("sublayers",{layers:{type:[sD]},visibleLayers:{type:[String]}})],Jt.prototype,"writeSublayers",null),c([d({json:{read:!1},readOnly:!0,value:"wms"})],Jt.prototype,"type",void 0),c([d(fx)],Jt.prototype,"url",null),c([d({type:String,json:{write:{ignoreOrigin:!0}}})],Jt.prototype,"version",void 0),Jt=c([F("esri.layers.WMSLayer")],Jt);const vae=Jt,nyt=Object.freeze(Object.defineProperty({__proto__:null,default:vae},Symbol.toStringTag,{value:"Module"}));var nD;let pI=nD=class extends ae{constructor(e){super(e),this.type="none"}clone(){return new nD({type:this.type})}};c([Ue({none:"none",stayAbove:"stay-above"})],pI.prototype,"type",void 0),pI=nD=c([F("esri.ground.NavigationConstraint")],pI);var oD;let ph=oD=class extends WS(mc){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Be;const t=r=>{r.parent&&r.parent!==this&&"remove"in r.parent&&r.parent.remove(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&xe.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>t(r.item)),this.layers.on("after-remove",r=>i(r.item))])}initialize(){this.when().catch(e=>{ls(e)||xe.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)Wi(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Yd(e,this._get("layers")))}writeLayers(e,t,i,r){const s=[];e&&(r={...r,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};lxe(n)().write(o,r)&&s.push(o)}else r?.messages&&r.messages.push(new W("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return w$(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await ce(()=>import("./ElevationQuery-Dl3OvGlG.js"),__vite__mapDeps([159,1]),import.meta.url);wi(t);const r=new i,s=this.layers.filter(IH).toArray();return r.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:i}=await ce(()=>import("./ElevationQuery-Dl3OvGlG.js"),__vite__mapDeps([159,1]),import.meta.url);wi(t);const r=new i,s=this.layers.filter(IH).toArray();return r.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:K(this.surfaceColor),navigationConstraint:K(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new oD({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,i){const r=t?.origin||"web-scene",s=t?.portal||null,n=t?.url||null,{populateOperationalLayers:o}=await ce(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-BRirWqjS.js");return{populateOperationalLayers:l}},__vite__mapDeps([7,8,9,10,1]),import.meta.url);wi(i);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:r,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function ZLe(e){return e&&"createElevationSampler"in e}function IH(e){return e.type==="elevation"||ZLe(e)}c([d({json:{read:!1}})],ph.prototype,"layers",null),c([ge("layers")],ph.prototype,"writeLayers",null),c([d({readOnly:!0})],ph.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:vt,read:{reader:H2,source:"transparency"},write:{writer:(e,t)=>{t.transparency=D$(e)},target:"transparency"}}})],ph.prototype,"opacity",void 0),c([d({type:Oe,json:{type:[vt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],ph.prototype,"surfaceColor",void 0),c([d({type:pI,json:{write:!0}})],ph.prototype,"navigationConstraint",void 0),ph=oD=c([F("esri.Ground")],ph);const U3=ph,HT=new WeakMap;function bae(e){return!e.destroyed&&(HT.has(e)||e.addHandles([at(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||bae(t))},t=>HT.set(e,t),sa),ti(()=>HT.delete(e))]),HT.get(e))}function YLe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function KLe(e){return!(!YLe(e)||!w1e(e)?.operations?.supportsEditing||"editingEnabled"in e&&!S1e(e)||bae(e))}const iR=()=>xe.getLogger("esri.support.basemapUtils");function XLe(){return{}}function QLe(e){for(const t in e){const i=e[t];Wi(i),delete e[t]}}function eNe(e,t){let i;if(typeof e=="string"){const r=e in rP,s=!r&&e.includes("/");if(!r&&!s){if(Kt.apiKey)iR().warn(`Unable to find basemap definition for: ${e}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const n=Object.entries(rP).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");iR().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`)}return null}t&&(i=t[e]),i||(i=r?Ov.fromId(e):new Ov({style:{id:e}}),t&&(t[e]=i))}else i=bi(Ov,e);return i?.destroyed&&(iR().warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function tNe(e){return new rg({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const i=[];return"tables"in t&&i.push(t.tables),"layers"in t&&i.push(t.layers),i},itemFilterFunction:t=>{const i=t.parent;return!!i&&"tables"in i&&i.tables.includes(t)}})}function rR(e){for(const t of e.values())t?.destroy();e.clear()}const AH={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function iNe(e){let t=null;if(typeof e=="string")if(e in AH){const i=AH[e];t=new U3({resourceInfo:{data:{layers:[i]}}})}else xe.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=bi(U3,e);return t}function aD(e,t,i){let r,s;if(e)for(let n=0,o=e.length;n<o;n++){if(r=e.at(n),r?.[t]===i)return r;if(r?.type==="group"&&(s=aD(r.layers,t,i),s))return s}}const rNe=e=>{let t=class extends e{constructor(...i){super(...i),this.layers=new Be;const r=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||xe.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void xe.getLogger(this).error("#add()","Cannot add layer to itself.");r(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const i=this.layers.toArray();for(const r of i)r.destroy();this.layers.destroy()}set layers(i){this._set("layers",Yd(i,this._get("layers")))}add(i,r){const s=this.layers;if(r=s.getNextIndex(r),i instanceof _f){const n=i;n.parent===this?this.reorder(n,r):s.add(n,r)}else Ac(i)?i.then(n=>{this.destroyed||this.add(n,r)}):xe.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,r){const s=this.layers;let n=s.getNextIndex(r);i.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(i){return aD(this.layers,"id",i)}findLayerByUid(i){return aD(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,r){return this.layers.reorder(i,r)}layerAdded(i){}layerRemoved(i){}};return c([d()],t.prototype,"layers",null),t=c([F("esri.support.LayersMixin")],t),t};function lD(e,t,i){if(e)for(let r=0,s=e.length;r<s;r++){const n=e.at(r);if(n[t]===i)return n;if(n?.type==="group"){const o=lD(n.tables,t,i);if(o)return o}}}const sNe=e=>{let t=class extends e{constructor(...i){super(...i),this.tables=new Be,this.addHandles([this.tables.on("after-add",r=>{const s=r.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&xe.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",r=>{r.item.parent=null})])}destroy(){const i=this.tables.toArray();for(const r of i)r.destroy();this.tables.destroy()}set tables(i){this._set("tables",Yd(i,this._get("tables")))}findTableById(i){return lD(this.tables,"id",i)}findTableByUid(i){return lD(this.tables,"uid",i)}};return c([d()],t.prototype,"tables",null),t=c([F("esri.support.TablesMixin")],t),t};let kl=class extends sNe(rNe(ap.EventedMixin(Je))){constructor(t){super(t),this.allLayers=new rg({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=tNe(this),this.basemap=null,this.editableLayers=new rg({getCollections:()=>[this.allLayers],itemFilterFunction:KLe}),this.ground=new U3,this._basemapCache=XLe()}destroy(){QLe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Wi(this.basemap),Wi(this.ground),this._set("ground",null)}castBasemap(t){return eNe(t,this._basemapCache)}castGround(t){return iNe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(i=>i.id===t)}findTableById(t){return this.allTables.find(i=>i.id===t)}};c([d({readOnly:!0,dependsOn:[]})],kl.prototype,"allLayers",void 0),c([d({readOnly:!0})],kl.prototype,"allTables",void 0),c([d({type:Ov,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],kl.prototype,"basemap",void 0),c([Ht("basemap")],kl.prototype,"castBasemap",null),c([d({readOnly:!0})],kl.prototype,"editableLayers",void 0),c([d({type:U3,nonNullable:!0})],kl.prototype,"ground",void 0),c([Ht("ground")],kl.prototype,"castGround",null),c([d()],kl.prototype,"undoRedo",void 0),kl=c([F("esri.Map")],kl);const wae=kl;function nNe(e){const{exifInfo:t,exifName:i,tagName:r}=e;if(!t||!i||!r)return null;const s=t.find(n=>n.name===i);return s?oNe({tagName:r,tags:s.tags}):null}function oNe(e){const{tagName:t,tags:i}=e;return!i||!t?null:i.find(s=>s.name===t)?.value||null}var uD;const aNe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let fo=uD=class extends ae{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=nNe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return aNe[t]||null}clone(){return new uD({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};c([d({type:String})],fo.prototype,"contentType",void 0),c([d()],fo.prototype,"exifInfo",void 0),c([d({readOnly:!0})],fo.prototype,"orientationInfo",null),c([d({type:vt})],fo.prototype,"id",void 0),c([d({type:String})],fo.prototype,"globalId",void 0),c([d({type:String})],fo.prototype,"keywords",void 0),c([d({type:String})],fo.prototype,"name",void 0),c([d({json:{read:!1}})],fo.prototype,"parentGlobalId",void 0),c([d({json:{read:!1}})],fo.prototype,"parentObjectId",void 0),c([d({type:vt})],fo.prototype,"size",void 0),c([d({json:{read:!1}})],fo.prototype,"url",void 0),fo=uD=c([F("esri.rest.query.support.AttachmentInfo")],fo);const ayt=fo,_ae={convertToGEGeometry:lNe,exportPoint:cNe,exportPolygon:pNe,exportPolyline:fNe,exportMultipoint:yNe,exportExtent:vNe};function lNe(e,t){return t==null?null:e.convertJSONToGeometry(t)}let uNe=class{constructor(t,i,r){this.x=t,this.y=i,this.spatialReference=r,this.z=void 0,this.m=void 0}};function cNe(e,t,i){const r=new uNe(e.getPointX(t),e.getPointY(t),i),s=e.hasZ(t),n=e.hasM(t);return s&&(r.z=e.getPointZ(t)),n&&(r.m=e.getPointM(t)),r}let hNe=class{constructor(t,i,r,s){this.rings=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}};function pNe(e,t,i){return new hNe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}let dNe=class{constructor(t,i,r,s){this.paths=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}};function fNe(e,t,i){return new dNe(e.exportPaths(t),i,e.hasZ(t),e.hasM(t))}let mNe=class{constructor(t,i,r,s){this.points=t,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,r&&(this.hasZ=r),s&&(this.hasM=s)}};function yNe(e,t,i){return new mNe(e.exportPoints(t),i,e.hasZ(t),e.hasM(t))}let gNe=class{constructor(t,i,r,s,n){this.xmin=t,this.ymin=i,this.xmax=r,this.ymax=s,this.spatialReference=n,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}};function vNe(e,t,i){const r=e.hasZ(t),s=e.hasM(t),n=new gNe(e.getXMin(t),e.getYMin(t),e.getXMax(t),e.getYMax(t),i);if(r){const o=e.getZExtent(t);n.zmin=o.vmin,n.zmax=o.vmax}if(s){const o=e.getMExtent(t);n.mmin=o.vmin,n.mmax=o.vmax}return n}const sR=[0,0];function Sae(e,t){if(!t)return null;if("x"in t){const i={x:0,y:0};return[i.x,i.y]=e(t.x,t.y,sR),t.z!=null&&(i.z=t.z),t.m!=null&&(i.m=t.m),i}if("xmin"in t){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=e(t.xmin,t.ymin,sR),[i.xmax,i.ymax]=e(t.xmax,t.ymax,sR),t.hasZ&&(i.zmin=t.zmin,i.zmax=t.zmax,i.hasZ=!0),t.hasM&&(i.mmin=t.mmin,i.mmax=t.mmax,i.hasM=!0),i}return"rings"in t?{rings:$H(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:$H(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:xae(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:null}function $H(e,t){const i=[];for(const r of e)i.push(xae(r,t));return i}function xae(e,t){const i=[];for(const r of e){const s=t(r[0],r[1],[0,0]);i.push(s),r.length>2&&s.push(r[2]),r.length>3&&s.push(r[3])}return i}async function Tae(e,t){if(!e||!t)return;const i=Array.isArray(e)?e.map(r=>r.geometry!=null?r.geometry.spatialReference:null).filter(ko):[e];await dC(i.map(r=>({source:r,dest:t})))}const Eae=Sae.bind(null,py),Mae=Sae.bind(null,YS);function Iae(e,t,i,r){if(!e||(i||(i=t,t=e.spatialReference),!Kn(t)||!Kn(i)||Xi(t,i)))return e;if($v(t,i)){const s=ga(i)?Eae(e):Mae(e);return s.spatialReference=i,s}return tS(_ae,[e],t,i,null,r)[0]}let bNe=class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(t,i,r,s){if(!t?.length||!i||!r||Xi(i,r))return t;const n={geometries:t,inSpatialReference:i,outSpatialReference:r,geographicTransformation:s,resolve:Do()};return this._jobs.push(n),this._timer??=setTimeout(this._process,10),n.resolve.promise}_process(){this._timer=null;const t=this._jobs.shift();if(!t)return;const{geometries:i,inSpatialReference:r,outSpatialReference:s,resolve:n,geographicTransformation:o}=t;$v(r,s)?ga(s)?n(i.map(Eae)):n(i.map(Mae)):n(tS(_ae,i,r,s,o,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};const wNe=new bNe;function fyt(e,t,i,r){return wNe.push(e,t,i,r)}const cD=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),CH=Object.freeze({});async function myt(e,t,i){const{outFields:r,orderByFields:s,groupByFieldsForStatistics:n,outStatistics:o}=e;if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),_Ne(e,t,i)}async function _Ne(e,t,i){if(!e)return null;let{where:r}=e;if(e.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||t&&t===r)&&(e.where=null),!e.geometry)return e;let s=await xNe(e);if(e.distance=0,e.units=null,e.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:n}=e.geometry;s=cbe(s),s.spatialReference=n}if(s){await Tae(s.spatialReference,i),s=SNe(s,i);const n=(await hu(or(s)))[0];if(n==null)throw CH;const o="quantizationParameters"in e&&e.quantizationParameters?.tolerance||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,a=o&&Aae(s,i)?{densificationStep:8*o}:void 0,l=n.toJSON(),u=Iae(l,l.spatialReference,i,a);if(!u)throw CH;u.spatialReference=i,e.geometry=u}return e}function Aae(e,t){if(!e)return!1;const i=e.spatialReference;return(M$(e)||zh(e)||ex(e))&&!Xi(i,t)&&!lu(i,t)}function SNe(e,t){const i=e.spatialReference;return Aae(e,t)&&M$(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function xNe(e){const{distance:t,units:i}=e,r=e.geometry;if(t==null||"vertexAttributes"in r)return r;const s=r.spatialReference,n=i?cD.fromJSON(i):Q1(s),o=s&&(ZS(s)||ga(s))?r:await Tae(s,p3).then(()=>Iae(r,p3));return(await TNe())(o.spatialReference,o,t,n)}async function TNe(){return(await ce(async()=>{const{geodesicBuffer:e}=await import("./geometryEngineJSON-flfHofBb.js").then(t=>t.g);return{geodesicBuffer:e}},__vite__mapDeps([20,21,1]),import.meta.url)).geodesicBuffer}let Rh=class extends Dt(ae){constructor(t){super(t),this.alias=null,this.expression=null,this.field=null,this.responseType=null}};c([d({type:String,json:{write:!0}})],Rh.prototype,"alias",void 0),c([d({type:String,json:{write:!0}})],Rh.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],Rh.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],Rh.prototype,"responseType",void 0),Rh=c([F("esri.rest.support.BinParametersAttributes")],Rh);const WT=Rh;Rh.from=bi(Rh);const ENe=new gt({naturalLog:"natural-log",squareRoot:"square-root"});let Pu=class extends Dt(ae){constructor(t){super(t),this.expression=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitByAttributes=null,this.stackByAttributes=null,this.transformation=null}};c([d({type:String,json:{write:!0}})],Pu.prototype,"expression",void 0),c([d({type:String,json:{name:"onField",write:!0}})],Pu.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],Pu.prototype,"firstDayOfWeek",void 0),c([d({type:String,json:{write:!0}})],Pu.prototype,"hideUpperBound",void 0),c([d({type:WT,json:{write:{target:{splitBy:{type:String},splitByField:{type:String},splitByAlias:{type:String}},writer:(e,t)=>{e.field!=null&&(t.splitByField=e.field),e.expression!=null&&(t.splitBy=e.expression),e.alias!=null&&(t.splitByAlias=e.alias)}},read:{source:["splitBy","splitByField","splitByAlias"],reader:(e,t)=>new WT({field:t.splitByField,expression:t.splitBy,alias:t.splitByAlias})}}})],Pu.prototype,"splitByAttributes",void 0),c([d({type:WT,json:{write:{target:{stackBy:{type:String},stackByField:{type:String},stackByAlias:{type:String},jsonStyle:{type:String}},writer:(e,t)=>{e.field!=null&&(t.stackByField=e.field),e.expression!=null&&(t.stackBy=e.expression),e.alias!=null&&(t.stackByAlias=e.alias),e.responseType!=null&&(t.jsonStyle=e.responseType)},overridePolicy(){return{enabled:this.stackByAttributes?.field!=null||this.stackByAttributes?.expression!=null}}},read:{source:["stackBy","stackByField","stackByAlias","jsonStyle"],reader:(e,t)=>new WT({field:t.stackByField,expression:t.stackBy,alias:t.stackByAlias,responseType:t.jsonStyle})}}})],Pu.prototype,"stackByAttributes",void 0),c([Ue(ENe)],Pu.prototype,"transformation",void 0),Pu=c([F("esri.rest.support.BinParametersBase")],Pu);const xx=Pu,MNe=ar()({naturalLog:"natural-log",squareRoot:"square-root",percentOfTotal:"percent-of-total",log:"log",field:"field"}),RH="percent-of-total",OH="field",$ae=e=>{let t=class extends e{constructor(){super(...arguments),this.normalizationField=null,this.normalizationMaxValue=null,this.normalizationMinValue=null,this.normalizationTotal=null}get normalizationType(){let i=this._get("normalizationType");const r=!!this.normalizationField,s=this.normalizationTotal!=null;return r||s?(i=r&&OH||s&&RH||null,r&&s&&xe.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):i!==OH&&i!==RH||(i=null),i}set normalizationType(i){this._set("normalizationType",i)}};return c([d({type:String,json:{name:"parameters.normalizationField",write:!0}})],t.prototype,"normalizationField",void 0),c([d({type:Number,json:{name:"parameters.normalizationMaxValue",write:!0}})],t.prototype,"normalizationMaxValue",void 0),c([d({type:Number,json:{name:"parameters.normalizationMinValue",write:!0}})],t.prototype,"normalizationMinValue",void 0),c([d({type:Number,json:{name:"parameters.normalizationTotal",write:!0}})],t.prototype,"normalizationTotal",void 0),c([Ue(MNe,{name:"parameters.normalizationType"})],t.prototype,"normalizationType",null),t=c([F("esri.rest.support.NormalizationBinParametersMixin")],t),t};function PH(e,t,i){Zr(i,e instanceof Date?e.getTime():e,t)}let Oh=class extends $ae(xx){constructor(t){super(t),this.bins=null,this.end=null,this.start=null,this.type="auto-interval"}};c([d({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],Oh.prototype,"bins",void 0),c([d({json:{name:"parameters.end",write:{writer:PH}}})],Oh.prototype,"end",void 0),c([d({json:{name:"parameters.start",write:{writer:PH}}})],Oh.prototype,"start",void 0),c([Ue({autoIntervalBin:"auto-interval"},{readOnly:!0})],Oh.prototype,"type",void 0),Oh=c([F("esri.rest.support.AutoIntervalBinParameters")],Oh);const INe=Oh;Oh.from=bi(Oh);const ANe=ar()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});let vy=class extends Dt(ae){constructor(t){super(t),this.value=null,this.units=null}};c([d({type:Number,json:{name:"number",write:!0}})],vy.prototype,"value",void 0),c([Ue(ANe,{name:"unit"})],vy.prototype,"units",void 0),vy=c([F("esri.rest.support.DateBinTimeInterval")],vy);const LH=vy;vy.from=bi(vy);function NH(e,t,i){Zr(i,typeof e=="string"?e:e?.getTime(),t)}function kH(e,t){const i=e.parameters[t];return i?typeof i=="string"?i:new Date(i):null}let Wu=class extends xx{constructor(t){super(t),this.end=null,this.interval=null,this.offset=null,this.start=null,this.type="date"}};c([d({cast:e=>e?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.end",read:{reader:(e,t)=>kH(t,"end")},write:{writer:NH}}})],Wu.prototype,"end",void 0),c([d({type:LH,json:{name:"parameters",write:!0}})],Wu.prototype,"interval",void 0),c([d({type:LH,json:{name:"parameters.offset",write:!0}})],Wu.prototype,"offset",void 0),c([d({cast:e=>e?typeof e=="string"?e:new Date(e):null,json:{name:"parameters.start",read:{reader:(e,t)=>kH(t,"start")},write:{writer:NH}}})],Wu.prototype,"start",void 0),c([Ue({dateBin:"date"},{readOnly:!0})],Wu.prototype,"type",void 0),Wu=c([F("esri.rest.support.DateBinParameters")],Wu);const $Ne=Wu;Wu.from=bi(Wu);function CNe(e){return e[0]instanceof Date}function RNe(e,t,i){Zr(i,e&&CNe(e)?e.map(r=>r.getTime()):e,t)}let by=class extends xx{constructor(t){super(t),this.boundaries=null,this.type="fixed-boundaries"}};c([d({json:{name:"parameters.boundaries",write:{writer:RNe}}})],by.prototype,"boundaries",void 0),c([Ue({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],by.prototype,"type",void 0),by=c([F("esri.rest.support.FixedBoundariesBinParameters")],by);const ONe=by;by.from=bi(by);function DH(e,t,i){Zr(i,e instanceof Date?e.getTime():e,t)}let Ph=class extends $ae(xx){constructor(t){super(t),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};c([d({json:{name:"parameters.end",write:{writer:DH}}})],Ph.prototype,"end",void 0),c([d({type:Number,json:{name:"parameters.interval",write:!0}})],Ph.prototype,"interval",void 0),c([d({json:{name:"parameters.start",write:{writer:DH}}})],Ph.prototype,"start",void 0),c([Ue({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],Ph.prototype,"type",void 0),Ph=c([F("esri.rest.support.FixedIntervalBinParameters")],Ph);const PNe=Ph;Ph.from=bi(Ph);const LNe=new gt({asc:"ascending",desc:"descending"}),NNe={base:xx,key:"type",typeMap:{"auto-interval":INe,date:$Ne,"fixed-boundaries":ONe,"fixed-interval":PNe}};let Tr=class extends Dt(ae){constructor(t){super(t),this.binParameters=null,this.binOrder="ascending",this.cacheHint=void 0,this.datumTransformation=null,this.defaultSpatialReference=null,this.distance=void 0,this.geometry=null,this.lowerBoundaryAlias=null,this.outSpatialReference=null,this.outStatistics=null,this.quantizationParameters=null,this.returnDistinctValues=null,this.spatialRelationship="intersects",this.upperBoundaryAlias=null,this.units=null,this.where="1=1"}set outTimeZone(t){this._set("outTimeZone",t),t&&!kte(t)&&xe.getLogger(this).warn("#outTimeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}};c([d({types:NNe,json:{name:"bin",write:!0}})],Tr.prototype,"binParameters",void 0),c([Ue(LNe)],Tr.prototype,"binOrder",void 0),c([d({type:Boolean,json:{write:!0}})],Tr.prototype,"cacheHint",void 0),c([d({json:{write:!0}})],Tr.prototype,"datumTransformation",void 0),c([d({type:ke,json:{name:"defaultSR",write:!0}})],Tr.prototype,"defaultSpatialReference",void 0),c([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Tr.prototype,"distance",void 0),c([d({types:cs,json:{read:or,write:!0}})],Tr.prototype,"geometry",void 0),c([d({type:String,json:{write:!0}})],Tr.prototype,"lowerBoundaryAlias",void 0),c([d({type:ke,json:{name:"outSR",write:!0}})],Tr.prototype,"outSpatialReference",void 0),c([d({type:[Gse],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],Tr.prototype,"outStatistics",void 0),c([d({value:null,json:{name:"outTimeReference",read:{reader:e=>e.ianaTimeZone},write:{writer:(e,t,i)=>{e&&(t[i]={ianaTimeZone:e})}}}})],Tr.prototype,"outTimeZone",null),c([d({type:K8,json:{write:!0}})],Tr.prototype,"quantizationParameters",void 0),c([d({type:Boolean,json:{write:!0}})],Tr.prototype,"returnDistinctValues",void 0),c([Ue(X8,{name:"spatialRel"})],Tr.prototype,"spatialRelationship",void 0),c([d({type:String,json:{write:!0}})],Tr.prototype,"upperBoundaryAlias",void 0),c([d({type:String,json:{read:cD.read,write:{writer:cD.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],Tr.prototype,"units",void 0),c([d({type:String,json:{write:!0}})],Tr.prototype,"where",void 0),Tr=c([F("esri.rest.support.BinsQuery")],Tr);const kNe=Tr;Tr.from=bi(Tr);const DNe=Object.freeze(Object.defineProperty({__proto__:null,default:kNe},Symbol.toStringTag,{value:"Module"}));var hD;let V0=hD=class extends ae{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new hD({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};c([d({type:[String],json:{write:!0}})],V0.prototype,"groupByFields",void 0),c([d({type:Number,json:{write:!0}})],V0.prototype,"topCount",void 0),c([d({type:[String],json:{write:!0}})],V0.prototype,"orderByFields",void 0),V0=hD=c([F("esri.rest.support.TopFilter")],V0);const FNe=V0;var pD;const FH=new gt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),jH=new gt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ni=pD=class extends ae{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new pD(K({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};c([d({type:Boolean,json:{write:!0}})],Ni.prototype,"cacheHint",void 0),c([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Ni.prototype,"distance",void 0),c([d({types:cs,json:{read:or,write:!0}})],Ni.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],Ni.prototype,"geometryPrecision",void 0),c([d({type:Number,json:{write:!0}})],Ni.prototype,"maxAllowableOffset",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ni.prototype,"num",void 0),c([d({json:{write:!0}})],Ni.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],Ni.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],Ni.prototype,"outFields",void 0),c([d({type:ke,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ni.prototype,"outSpatialReference",void 0),c([d({type:String,json:{write:!0}})],Ni.prototype,"resultType",void 0),c([d({json:{write:!0}})],Ni.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ni.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ni.prototype,"returnZ",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Ni.prototype,"start",void 0),c([ge("start"),ge("num")],Ni.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"spatialRel",reader:FH.read},write:{target:"spatialRel",writer:FH.write}}})],Ni.prototype,"spatialRelationship",void 0),c([d({type:io,json:{write:!0}})],Ni.prototype,"timeExtent",void 0),c([d({type:FNe,json:{write:!0}})],Ni.prototype,"topFilter",void 0),c([d({type:String,json:{read:jH.read,write:{writer:jH.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],Ni.prototype,"units",void 0),c([d({type:String,json:{write:!0}})],Ni.prototype,"where",void 0),Ni=pD=c([F("esri.rest.support.TopFeaturesQuery")],Ni),Ni.from=bi(Ni);const jNe=Ni,JT=Object.freeze(Object.defineProperty({__proto__:null,default:jNe},Symbol.toStringTag,{value:"Module"}));let Hm=class extends uP{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hm.prototype,"row",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hm.prototype,"column",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hm.prototype,"rows",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Hm.prototype,"columns",void 0),Hm=c([F("esri.CameraLayout")],Hm);const Cae=Hm;let UNe=class{constructor(t,i){this.min=t,this.max=i,this.range=i-t}normalize(t,i=0,r=!1){return UH(this.range,this.min,this.max,t,i,r)}clamp(t,i=0){return rl(t-i,this.min,this.max)+i}monotonic(t,i,r){return t<i?i:i+dD(this.range,t-i,r)}minimalMonotonic(t,i,r){return UH(this.range,t,t+this.range,i,r)}center(t,i,r){return i=this.monotonic(t,i,r),this.normalize((t+i)/2,r)}diff(t,i,r){return this.monotonic(t,i,r)-t}shortestSignedDiff(t,i){t=this.normalize(t);const r=(i=this.normalize(i))-t,s=i<t?this.minimalMonotonic(t,i)-t:i-this.minimalMonotonic(i,t);return Math.abs(r)<Math.abs(s)?r:s}contains(t,i,r){return i=this.minimalMonotonic(t,i),(r=this.minimalMonotonic(t,r))>t&&r<i}};function UH(e,t,i,r,s=0,n=!1){return(r-=s)<t?r+=dD(e,t-r):r>i&&(r-=dD(e,r-i)),n&&r===i&&(r=t),r+s}function dD(e,t,i=0){return Math.ceil((t-i)/e)*e+i}const VNe=new UNe(0,360);let Lu=class extends Dt(ae){constructor(...t){super(...t),this.position=new Ve([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Cae}normalizeCtorArgs(t,i,r,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return i!=null&&(n.heading=i),r!=null&&(n.tilt=r),s!=null&&(n.fov=s),n}return t}writePosition(t,i,r,s){const n=t.clone();n.x=bn(t.x||0),n.y=bn(t.y||0),n.z=t.hasZ?bn(t.z||0):t.z,i[r]=n.write({},s)}readPosition(t,i){const r=new Ve;return r.read(t,i),r.x=bn(r.x||0),r.y=bn(r.y||0),r.z=r.hasZ?bn(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};c([d({type:Ve,json:{write:{isRequired:!0}}})],Lu.prototype,"position",void 0),c([ge("position")],Lu.prototype,"writePosition",null),c([ue("position")],Lu.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ht(e=>VNe.normalize(bn(e)))],Lu.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ht(e=>rl(bn(e),-180,180))],Lu.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ht(e=>rl(bn(e,55),1,170))],Lu.prototype,"fov",void 0),c([d({type:Cae,nonNullable:!0,json:{read:!1,write:!1}})],Lu.prototype,"layout",void 0),Lu=c([F("esri.Camera")],Lu);const GNe=Lu;var fD;let rd=fD=class extends ae{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new fD({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:nR}}}}})],rd.prototype,"rotation",void 0),c([Ht("rotation")],rd.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:nR}}}}})],rd.prototype,"scale",void 0),c([d({types:cs,json:{read:or,write:!0,origins:{"web-scene":{read:or,write:{overridePolicy:nR}}}}})],rd.prototype,"targetGeometry",void 0),c([d({type:GNe,json:{write:!0}})],rd.prototype,"camera",void 0),rd=fD=c([F("esri.Viewpoint")],rd);const eu=rd;function nR(){return{enabled:!this.camera}}const dI={widthBreakpoint:{getValue(e){const t=e.viewSize[0],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],i=e.breakpoints,r=this.values;return t<=i.xsmall?r.xsmall:t<=i.small?r.small:t<=i.medium?r.medium:t<=i.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,i=t[0],r=t[1],s=this.values;return r>=i?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},oR={xsmall:544,small:768,medium:992,large:1200};function BNe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function aR(e,t){return t?dI[e].valueToClassName[t].split(" "):[]}const zNe=e=>{let t=class extends e{constructor(...i){super(...i),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=oR}initialize(){this.addHandles(at(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Bs))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(i){if(i!==this._get("breakpoints")){if(!BNe(i)){const r=JSON.stringify(oR,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r),i=oR}this._set("breakpoints",{...i})}}_updateClassNames(){if(!this.container)return;const i=Jn.acquire(),r=Jn.acquire();let s,n=!1;for(s in dI){const o=this[s],a=dI[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,aR(s,o).forEach(l=>r.push(l)),aR(s,a).forEach(l=>i.push(l)))}n&&(this._applyClassNameChanges(i,r),Jn.release(i),Jn.release(r))}_applyClassNameChanges(i,r){const s=this.container;s&&(r.forEach(n=>s.classList.remove(n)),i.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let r;for(r in dI)aR(r,this[r]).forEach(s=>i.classList.remove(s))}};return c([d()],t.prototype,"breakpoints",null),c([d()],t.prototype,"orientation",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),c([d()],t.prototype,"heightBreakpoint",void 0),t=c([F("esri.views.BreakpointsOwner")],t),t};function J9(e){return typeof e=="string"?document.getElementById(e):e??null}function VH(e,t){for(;;){const i=e.firstChild;if(!i)break;t.appendChild(i)}}let $y=class extends Je{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,i,r={}){return this._installWatch(t,i,r,at)}addWhen(t,i,r={}){return this._installWatch(t,i,r,vc)}addOnCollectionChange(t,i,{initial:r=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([au(t,"after-changes",this._createSyncUpdatingCallback(),ns),au(t,"change",i,{onListenerAdd:r?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>i({added:[],removed:o.toArray()}):void 0})],n),ti(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const i=++this._handleId;this.addHandles(ti(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(ZT)||this._set("updating",!1))}),i),this._pendingPromises.add(t),this._set("updating",!0);const r=()=>this.removeHandles(i);return t.then(r,r),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,i,r={},s){const n=++this._handleId;r.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,i,r);return this.addHandles(o,n),ti(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,i){const r=this._createSyncUpdatingCallback(),s=at(t,r,{sync:!0,equals:()=>!1});return this.addHandles(s,i),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(ZT),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(zS(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(ZT))}),ZT)}}};c([d({readOnly:!0})],$y.prototype,"updating",void 0),$y=c([F("esri.core.support.UpdatingHandles")],$y);const ZT=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V3=function(){return V3=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},V3.apply(this,arguments)},mD={exports:{}},gr={},yD={exports:{}},Mg={};function Rae(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function qNe(e,t,i){}function HNe(e,t,i){}var WNe=/javascript\s*\:/img;function JNe(e,t){return WNe.test(t)?"":t}Mg.whiteList=Rae();Mg.getDefaultWhiteList=Rae;Mg.onAttr=qNe;Mg.onIgnoreAttr=HNe;Mg.safeAttrValue=JNe;var ZNe={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Kb=ZNe;function YNe(e,t){e=Kb.trimRight(e),e[e.length-1]!==";"&&(e+=";");var i=e.length,r=!1,s=0,n=0,o="";function a(){if(!r){var h=Kb.trim(e.slice(s,n)),p=h.indexOf(":");if(p!==-1){var f=Kb.trim(h.slice(0,p)),m=Kb.trim(h.slice(p+1));if(f){var g=t(s,o.length,f,m,h);g&&(o+=g+"; ")}}}s=n+1}for(;n<i;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var u=e.indexOf("*/",n+2);if(u===-1)break;n=u+1,s=n+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return Kb.trim(o)}var KNe=YNe,YT=Mg,XNe=KNe;function GH(e){return e==null}function QNe(e){var t={};for(var i in e)t[i]=e[i];return t}function Oae(e){e=QNe(e||{}),e.whiteList=e.whiteList||YT.whiteList,e.onAttr=e.onAttr||YT.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||YT.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||YT.safeAttrValue,this.options=e}Oae.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onAttr,n=i.onIgnoreAttr,o=i.safeAttrValue,a=XNe(e,function(l,u,h,p,f){var m=r[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(p):m instanceof RegExp&&(g=m.test(p)),g!==!0&&(g=!1),p=o(h,p),!!p){var b={position:u,sourcePosition:l,source:f,isWhite:g};if(g){var w=s(h,p,b);return GH(w)?h+":"+p:w}else{var w=n(h,p,b);if(!GH(w))return w}}});return a};var eke=Oae;(function(e,t){var i=Mg,r=eke;function s(o,a){var l=new r(a);return l.process(o)}t=e.exports=s,t.FilterCSS=r;for(var n in i)t[n]=i[n]})(yD,yD.exports);var Z9=yD.exports,Y9={indexOf:function(e,t){var i,r;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var r,s;if(Array.prototype.forEach)return e.forEach(t,i);for(r=0,s=e.length;r<s;r++)t.call(i,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,i=t.exec(e);return i?i.index:-1}},tke=Z9.FilterCSS,ike=Z9.getDefaultWhiteList,G3=Y9;function Pae(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Lae=new tke;function rke(e,t,i){}function ske(e,t,i){}function nke(e,t,i){}function oke(e,t,i){}function Nae(e){return e.replace(lke,"&lt;").replace(uke,"&gt;")}function ake(e,t,i,r){if(i=Vae(i),t==="href"||t==="src"){if(i=G3.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(t==="background"){if(KT.lastIndex=0,KT.test(i))return""}else if(t==="style"){if(BH.lastIndex=0,BH.test(i)||(zH.lastIndex=0,zH.test(i)&&(KT.lastIndex=0,KT.test(i))))return"";r!==!1&&(r=r||Lae,i=r.process(i))}return i=Gae(i),i}var lke=/</g,uke=/>/g,cke=/"/g,hke=/&quot;/g,pke=/&#([a-zA-Z0-9]*);?/gim,dke=/&colon;?/gim,fke=/&newline;?/gim,KT=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,BH=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,zH=/u\s*r\s*l\s*\(.*/gi;function kae(e){return e.replace(cke,"&quot;")}function Dae(e){return e.replace(hke,'"')}function Fae(e){return e.replace(pke,function(i,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function jae(e){return e.replace(dke,":").replace(fke," ")}function Uae(e){for(var t="",i=0,r=e.length;i<r;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return G3.trim(t)}function Vae(e){return e=Dae(e),e=Fae(e),e=jae(e),e=Uae(e),e}function Gae(e){return e=kae(e),e=Nae(e),e}function mke(){return""}function yke(e,t){typeof t!="function"&&(t=function(){});var i=!Array.isArray(e);function r(o){return i?!0:G3.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return s.push([n!==!1?n:l.position,h]),n=!1,u}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return G3.forEach(s,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function gke(e){for(var t="",i=0;i<e.length;){var r=e.indexOf("<!--",i);if(r===-1){t+=e.slice(i);break}t+=e.slice(i,r);var s=e.indexOf("-->",r);if(s===-1)break;i=s+3}return t}function vke(e){var t=e.split("");return t=t.filter(function(i){var r=i.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),t.join("")}gr.whiteList=Pae();gr.getDefaultWhiteList=Pae;gr.onTag=rke;gr.onIgnoreTag=ske;gr.onTagAttr=nke;gr.onIgnoreTagAttr=oke;gr.safeAttrValue=ake;gr.escapeHtml=Nae;gr.escapeQuote=kae;gr.unescapeQuote=Dae;gr.escapeHtmlEntities=Fae;gr.escapeDangerHtml5Entities=jae;gr.clearNonPrintableCharacter=Uae;gr.friendlyAttrValue=Vae;gr.escapeAttrValue=Gae;gr.onIgnoreTagStripAll=mke;gr.StripTagBody=yke;gr.stripCommentTag=gke;gr.stripBlankChar=vke;gr.cssFilter=Lae;gr.getDefaultCSSWhiteList=ike;var EC={},vd=Y9;function bke(e){var t=vd.spaceIndex(e),i;return t===-1?i=e.slice(1,-1):i=e.slice(1,t+1),i=vd.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function wke(e){return e.slice(0,2)==="</"}function _ke(e,t,i){var r="",s=0,n=!1,o=!1,a=0,l=e.length,u="",h="";e:for(a=0;a<l;a++){var p=e.charAt(a);if(n===!1){if(p==="<"){n=a;continue}}else if(o===!1){if(p==="<"){r+=i(e.slice(s,a)),n=a,s=a;continue}if(p===">"){r+=i(e.slice(s,n)),h=e.slice(n,a+1),u=bke(h),r+=t(n,r.length,u,h,wke(h)),s=a+1,n=!1;continue}if(p==='"'||p==="'")for(var f=1,m=e.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=p;continue e}m=e.charAt(a-++f)}}else if(p===o){o=!1;continue}}return s<e.length&&(r+=i(e.substr(s))),r}var Ske=/[^a-zA-Z0-9\\_:.-]/gim;function xke(e,t){var i=0,r=0,s=[],n=!1,o=e.length;function a(f,m){if(f=vd.trim(f),f=f.replace(Ske,"").toLowerCase(),!(f.length<1)){var g=t(f,m||"");g&&s.push(g)}}for(var l=0;l<o;l++){var u=e.charAt(l),h,p;if(n===!1&&u==="="){n=e.slice(i,l),i=l+1,r=e.charAt(i)==='"'||e.charAt(i)==="'"?i:Eke(e,l+1);continue}if(n!==!1&&l===r){if(p=e.indexOf(u,l+1),p===-1)break;h=vd.trim(e.slice(r+1,p)),a(n,h),n=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(p=Tke(e,l),p===-1){h=vd.trim(e.slice(i,l)),a(h),n=!1,i=l+1;continue}else{l=p-1;continue}else if(p=Mke(e,l-1),p===-1){h=vd.trim(e.slice(i,l)),h=qH(h),a(n,h),n=!1,i=l+1;continue}else continue}return i<e.length&&(n===!1?a(e.slice(i)):a(n,qH(vd.trim(e.slice(i))))),vd.trim(s.join(" "))}function Tke(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Eke(e,t){for(;t<e.length;t++){var i=e[t];if(i!==" ")return i==="'"||i==='"'?t:-1}}function Mke(e,t){for(;t>0;t--){var i=e[t];if(i!==" ")return i==="="?t:-1}}function Ike(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function qH(e){return Ike(e)?e.substr(1,e.length-2):e}EC.parseTag=_ke;EC.parseAttr=xke;var Ake=Z9.FilterCSS,jl=gr,Bae=EC,$ke=Bae.parseTag,Cke=Bae.parseAttr,fI=Y9;function XT(e){return e==null}function Rke(e){var t=fI.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=fI.trim(e.slice(t+1,-1));var i=e[e.length-1]==="/";return i&&(e=fI.trim(e.slice(0,-1))),{html:e,closing:i}}function Oke(e){var t={};for(var i in e)t[i]=e[i];return t}function Pke(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(r){return r.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}function zae(e){e=Oke(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=jl.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Pke(e.whiteList||e.allowList):e.whiteList=jl.whiteList,e.onTag=e.onTag||jl.onTag,e.onTagAttr=e.onTagAttr||jl.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||jl.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||jl.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||jl.safeAttrValue,e.escapeHtml=e.escapeHtml||jl.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ake(e.css))}zae.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,i=t.options,r=i.whiteList,s=i.onTag,n=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,h=t.cssFilter;i.stripBlankChar&&(e=jl.stripBlankChar(e)),i.allowCommentTag||(e=jl.stripCommentTag(e));var p=!1;i.stripIgnoreTagBody&&(p=jl.StripTagBody(i.stripIgnoreTagBody,n),n=p.onIgnoreTag);var f=$ke(e,function(m,g,b,w,S){var T={sourcePosition:m,position:g,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(r,b)},x=s(b,w,T);if(!XT(x))return x;if(T.isWhite){if(T.isClosing)return"</"+b+">";var _=Rke(w),M=r[b],I=Cke(_.html,function(A,C){var R=fI.indexOf(M,A)!==-1,O=o(b,A,C,R);return XT(O)?R?(C=l(b,A,C,h),C?A+'="'+C+'"':A):(O=a(b,A,C,R),XT(O)?void 0:O):O});return w="<"+b,I&&(w+=" "+I),_.closing&&(w+=" /"),w+=">",w}else return x=n(b,w,T),XT(x)?u(w):x},u);return p&&(f=p.remove(f)),f};var Lke=zae;(function(e,t){var i=gr,r=EC,s=Lke;function n(a,l){var u=new s(l);return u.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in i)t[a]=i[a];for(var l in r)t[l]=r[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(mD,mD.exports);var Hg=mD.exports,Nke=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},kke=function(){function e(t,i){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=V3(V3({},Hg.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?r.sanitizeUrl(a):Hg.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!i?s=t:t&&i?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new Hg.FilterXSS(s)}return e.prototype.sanitize=function(t,i){switch(i===void 0&&(i={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,i);default:return i.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,i){var r=(i??{}).isProtocolRequired,s=r===void 0?!0:r,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?Hg.escapeAttrValue(t):!n&&!s?Hg.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,i,r,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,i,r,s):Hg.safeAttrValue(t,i,r,s)},e.prototype.validate=function(t,i){i===void 0&&(i={});var r=this.sanitize(t,i);return{isValid:t===r,sanitized:r}},e.prototype.encodeHTML=function(t){var i=this;return String(t).replace(/[&<>"'\/]/g,function(r){return i._entityMap[r]})},e.prototype.encodeAttrValue=function(t){var i=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(r,s){return i.test(r)?r:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var i={};return t.forEach(function(r){Object.keys(r).forEach(function(s){Array.isArray(r[s])&&Array.isArray(i[s])?i[s]=i[s].concat(r[s]):i[s]=r[s]})}),i},e.prototype._iterateOverObject=function(t,i){var r=this;i===void 0&&(i={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var u=r.validate(l,i);return u.isValid?a.concat([l]):(s=!0,a.concat([u.sanitized]))},[]);else if(Nke(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var u=t[l],h=r.validate(u,i);return h.isValid?a[l]=u:(s=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const MC=new Map;function qae(){MC.clear()}function Dke(e){return MC.get(e)}function Fke(e,t){MC.set(e,t)}function lR(e){MC.delete(e)}function jke(...e){const t=Jn.acquire();for(let r=0;r<e.length;r++){const s=e[r],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const i=t.join(" ");return Jn.release(t),i}(()=>{const e=new Map,t=new ResizeObserver(r=>{qae();for(const s of r)e.get(s.target)?.(s)}),i=(r,s,n)=>(e.set(r,s),t.observe(r,n),ti(()=>{t.unobserve(r),e.delete(r)}));return(r,s,n)=>{let o=null;return jS([at(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=i(a,s,n))},sa),ti(()=>o?.remove())])}})();function Uke(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function Ayt(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function $yt(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const Vke=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],Gke=Vke.reduce((e,t)=>(e[t]=[],e),{}),Bke=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Hae=new kke({whiteList:Gke,onTagAttr:(e,t,i)=>{const r=`${t}="${i}"`;if(Bke.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function zke(e){return e==="Enter"||e===" "}async function qke(e,t){await Nye(BS(t));const i=typeof e=="function"?e():e;i&&("setFocus"in i&&typeof i.setFocus=="function"?await i.setFocus():i instanceof HTMLElement&&i.focus())}const Wae="http://www.w3.org/",IC=`${Wae}2000/svg`,Jae=`${Wae}1999/xlink`;let HH=[],K9=(e,t)=>{let i={};return Object.keys(e).forEach(r=>{i[r]=e[r]}),t&&Object.keys(t).forEach(r=>{i[r]=t[r]}),i},X9=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Zae=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},Hke=(e,t,i)=>{if(t.vnodeSelector!==""){for(let r=i;r<e.length;r++)if(X9(e[r],t))return r}return-1},uR=(e,t,i,r)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(X9(a,s))throw new Error(`${i.vnodeSelector} had a ${s.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Wke=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},gD=[],vD=!1,Yae=e=>{(e.children||[]).forEach(Yae),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},WH=()=>{vD=!1,gD.forEach(Yae),gD.length=0},JH=e=>{gD.push(e),vD||(vD=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(WH,{timeout:16}):setTimeout(WH,16))},ZH=e=>{let t=e.domNode;if(e.properties){let i=e.properties.exitAnimation;if(i)return t.style.pointerEvents="none",void i(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),JH(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),JH(e))},Jke=(e,t,i)=>{if(!t)return;let r=i.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")wD(e,l,!0);else if(a==="classes"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let f=u[p];l[f]&&e.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let f=u[p],m=l[f];m&&(Zae(m),i.styleApplyer(e,f,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),e[a]=l):i.namespace===IC?a==="href"?e.setAttributeNS(Jae,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=Hae.sanitize(l):bD(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function bD(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let B3,Zke=(e,t,i)=>{if(t)for(let r of t)hv(r,e,void 0,i)},Kae=(e,t,i)=>{Zke(e,t.children,i),t.text&&(e.textContent=t.text),Jke(e,t.properties,i),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,i,t.vnodeSelector,t.properties,t.children])},hv=(e,t,i,r)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),i!==void 0?t.insertBefore(s,i):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let h=o.charAt(n-1),p=o.slice(n,l);h==="."?s.classList.add(p):h==="#"?s.id=p:(p==="svg"&&(r=K9(r,{namespace:IC})),r.namespace!==void 0?s=e.domNode=a.createElementNS(r.namespace,p):(s=e.domNode=e.domNode||a.createElement(p),p==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),i!==void 0?t.insertBefore(s,i):s.parentNode!==t&&t.appendChild(s)),n=l+1}}Kae(s,e,r)}},wD=(e,t,i)=>{t&&t.split(" ").forEach(r=>{r&&e.classList.toggle(r,i)})},Yke=(e,t,i,r)=>{if(!i)return;let s=!1,n=Object.keys(i),o=n.length;for(let a=0;a<o;a++){let l=n[a],u=i[l],h=t[l];if(l==="class")h!==u&&(wD(e,h,!1),wD(e,u,!0));else if(l==="classes"){let p=e.classList,f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let b=f[g],w=!!u[b];w!==!!h[b]&&(s=!0,w?p.add(b):p.remove(b))}}else if(l==="styles"){let p=Object.keys(u),f=p.length;for(let m=0;m<f;m++){let g=p[m],b=u[g];b!==h[g]&&(s=!0,b?(Zae(b),r.styleApplyer(e,g,b)):r.styleApplyer(e,g,""))}}else if(u||typeof h!="string"||(u=""),l!=="value"||bD(e)){if(u!==h){let p=typeof u;p==="function"&&r.eventHandlerInterceptor||(r.namespace===IC?l==="href"?e.setAttributeNS(Jae,l,u):e.setAttribute(l,u):p==="string"?l==="innerHTML"?e[l]=Hae.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):bD(e)&&l in e?e[l]=u:e.setAttribute(l,u):e[l]!==u&&(e[l]=u),s=!0)}}else{let p=e[l];p!==u&&(e["oninput-value"]?p===e["oninput-value"]:u!==h)&&(e[l]=u,e["oninput-value"]=void 0),u!==h&&(s=!0)}}return s},Kke=(e,t,i,r,s)=>{if(i===r)return!1;r=r||HH;let n,o=(i=i||HH).length,a=r.length,l=0,u=0,h=!1;for(;u<a;){let p=l<o?i[l]:void 0,f=r[u];if(p!==void 0&&X9(p,f))h=B3(p,f,s)||h,l++;else{let m=Hke(i,f,l+1);if(m>=0){for(n=l;n<m;n++)ZH(i[n]),uR(i,n,e,"removed");h=B3(i[m],f,s)||h,l=m+1}else hv(f,t,l<o?i[l].domNode:void 0,s),Wke(f),uR(r,u,e,"added")}u++}if(o>l)for(n=l;n<o;n++)ZH(i[n]),uR(i,n,e,"removed");return h};B3=(e,t,i)=>{let r=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=r.ownerDocument.createTextNode(t.text);return r.parentNode.replaceChild(o,r),t.domNode=o,s=!0,s}t.domNode=r}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(i=K9(i,{namespace:IC})),e.text!==t.text&&(n=!0,t.text===void 0?r.removeChild(r.firstChild):r.textContent=t.text),t.domNode=r,n=Kke(t,r,e.children,t.children,i)||n,n=Yke(r,e.properties,t.properties,i)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[r,i,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(r,t.properties,e.properties),s};let Xb=(e,t)=>({getLastRender:()=>e,update:i=>{if(e.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=e;e=i,B3(r,i,t)},domNode:e.domNode});const Xke={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}};let G0=e=>K9(Xke,e),kd={create:(e,t)=>(t=G0(t),hv(e,document.createElement("div"),void 0,t),Xb(e,t)),append:(e,t,i)=>(i=G0(i),hv(t,e,void 0,i),Xb(t,i)),insertBefore:(e,t,i)=>(i=G0(i),hv(t,e.parentNode,e,i),Xb(t,i)),merge:(e,t,i)=>(i=G0(i),t.domNode=e,Kae(e,t,i),Xb(t,i)),replace:(e,t,i)=>(i=G0(i),hv(t,e.parentNode,e,i),e.parentNode.removeChild(e),Xb(t,i))},Xae,Qke=(e,t)=>{let i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i};Xae=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let eDe=(e,t)=>{let i=e;return t.forEach(r=>{i=i&&i.children?Xae(i.children,s=>s.domNode===r):void 0}),i},tDe=(e,t,i)=>{let r=function(s){i("domEvent",s);let n=t(),o=Qke(s.currentTarget,n.domNode);o.reverse();let a,l=eDe(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",s),a};return(s,n,o,a)=>r},YH=e=>{let t,i,r=G0(e),s=r.performanceLogger,n=!0,o=!1,a=[],l=[],u=(p,f,m)=>{let g,b=()=>g;r.eventHandlerInterceptor=tDe(t,b,s),g=p(f,m(),r),a.push(g),l.push(m)},h=()=>{if(i=void 0,n){n=!1,s("renderStart",void 0);for(let p=0;p<a.length;p++){let f=l[p]();s("rendered",void 0),a[p].update(f),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(p,f)=>{u(kd.append,p,f)},insertBefore:(p,f)=>{u(kd.insertBefore,p,f)},merge:(p,f)=>{u(kd.merge,p,f)},replace:(p,f)=>{u(kd.replace,p,f)},detach:p=>{for(let f=0;f<l.length;f++)if(l[f]===p)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},t},sd=class extends Je{constructor(){super(...arguments),this.items=new Be,this._watchUpdatingTracking=new $y,this._callbacks=new Map,this._projector=YH(),this._hiddenProjector=YH()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const r of i.added){const s=()=>r.render();this._callbacks.set(r,s),this._projector.append(this.surface,s)}for(const r of i.removed){const s=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(s.domNode),this._callbacks.delete(r)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const i=this._hiddenSurface,r=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);r.append(i,n),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(n);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(t,i){const r=this.computeBoundingRect(t),s=this.computeBoundingRect(i);return Math.max(r.left,s.left)<=Math.min(r.right,s.right)&&Math.max(r.top,s.top)<=Math.min(r.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,i){const r=!!i?.disableDecorations;if(!this.items.some(n=>n.visible&&!(r&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{r&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],sd.prototype,"surface",void 0),c([d({readOnly:!0})],sd.prototype,"items",void 0),c([d({readOnly:!0})],sd.prototype,"needsRender",null),c([d({readOnly:!0})],sd.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],sd.prototype,"updating",null),sd=c([F("esri.views.overlay.ViewOverlay")],sd);const KH=sd,cR=[0,0];function iDe(e){const t=(e.ownerDocument||window.document).defaultView,i=e.getBoundingClientRect();return cR[0]=i.left+(t?.pageXOffset??0),cR[1]=i.top+(t?.pageYOffset??0),cR}function XH(e){e&&(e.textContent="",e.parentNode&&e.parentNode.removeChild(e))}function rDe(e){const t=document.createElement("div");return e.appendChild(t),t}const Qb=16,QT=750,sDe=512,nDe=2,oDe=e=>{let t=class extends e{constructor(...i){super(...i),this._freqInfo={freq:Qb,time:QT},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([at(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),at(()=>this.navigating,r=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",r.toString())})])}initialize(){this.addHandles([at(()=>this.ui,(i,r)=>this._handleUIChange(i,r),Bs),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=Wi(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(i){const r=this._get("container"),s=J9(i);if(s||typeof i!="string"||xe.getLogger(this).error("#container",`element with id '${i}' not found`),r===s)return;if(this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(XH(this.root),this._set("root",null)),this.userContent&&(VH(this.userContent,r),XH(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",VH(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new KH;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(at(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=n1({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Yi(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(i,r,s){const n=this.position;return i-=n?n[0]:0,r-=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}containerToPage(i,r,s){const n=this.position;return i+=n?n[0]:0,r+=n?n[1]:0,s?(s[0]=i,s[1]=r):s=[i,r],s}_handleUIChange(i,r){this.removeHandles("ui"),r&&r!==i&&r.destroy(),i&&(i.view=this,this.addHandles(at(()=>this.root,s=>{i.container=s?rDe(s):null},Bs),"ui")),this._set("ui",i)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=Qb,i.time=QT,this.addHandles([GS(window,"resize",()=>{i.freq=Qb,i.time=QT}),n1({prepare:r=>{const s=this._measure(),n=this._freqInfo;if(n.time+=r.deltaTime,s&&(n.freq=Qb,this._get("resizing")||this._set("resizing",!0)),n.time<n.freq)return;n.time=0;const o=this._position();n.freq=o||s?Qb:Math.min(QT,n.freq*nDe),!s&&n.freq>=sDe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,r=i?i.clientWidth:0,s=i?i.clientHeight:0;if(r===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return r===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",r),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:r,height:s}),!0)}_position(){const i=this.container,r=this.position,s=i&&iDe(i);return!!s&&(!r||s[0]!==r[0]||s[1]!==r[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],t.prototype,"container",null),c([d({readOnly:!0})],t.prototype,"focused",null),c([d({readOnly:!0})],t.prototype,"height",void 0),c([d()],t.prototype,"messagesCommon",void 0),c([d({type:KH})],t.prototype,"overlay",void 0),c([d({readOnly:!0})],t.prototype,"position",void 0),c([d({readOnly:!0})],t.prototype,"resizing",void 0),c([d({readOnly:!0})],t.prototype,"root",void 0),c([d({value:null,readOnly:!0})],t.prototype,"size",null),c([d({readOnly:!0})],t.prototype,"surface",void 0),c([d({readOnly:!0})],t.prototype,"suspended",void 0),c([d()],t.prototype,"ui",void 0),c([d({readOnly:!0})],t.prototype,"userContent",void 0),c([d({readOnly:!0})],t.prototype,"width",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),t=c([F("esri.views.DOMContainer")],t),t},aDe=le("mac")?"Meta":"Control",lDe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),uDe=e=>lDe.has(e);let cDe=class{constructor(t,i=[]){this.eventType=t,this.keyModifiers=i}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=t.modifiers;for(const r of this.keyModifiers)if(!i.has(r))return!1;return!0}},hs=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const i=this._incoming[t];for(const r of i)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(i=>this._handleEvent(i)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,i,r){let s;typeof i=="function"?(r=i,s=[]):s=i||[];const n=typeof t=="string"?new cDe(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const f=p.indexOf(h);p.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new hDe(n,r,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const i=new pDe(t,{onEmit:(r,s,n,o)=>{this._manager?.emit(r.eventType,s,n,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){const i=this._incoming[t.type];if(i){for(const r of i)if(r.match.matches(t)&&(r.callback?.(t),t.shouldStopPropagation()))break}}},hDe=class{constructor(t,i,r){this.match=t,this._callback=i,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},pDe=class{constructor(t,i){this.eventType=t,this._removed=!1,this._handler=i}emit(t,i,r){this._removed||this._handler.onEmit(this,t,i,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},dDe=class extends hs{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>this._update(i.data))}_update(t){const i=t.native.pointerType==="touch"?"touch":"mouse",{x:r,y:s}=t;i===this._value&&this._x===r&&this._y===s||(this._value=i,this._x=r,this._y=s,this._onChange(i,r,s))}},fDe=class{constructor(t,i){this._observable=new JS,this._value=t,this._equalityFunction=i}get value(){return ht(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function nS(e,t=uX){return new fDe(e,t)}let mDe=class extends hs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=nS(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},yDe=class{constructor(t,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const r in t){const s=t[r],n=new IX(s,void 0,void 0,2,2);this._properties[r]={pool:n,acquired:[]}}this._afterDispatchHandle=Jye(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const i=this._properties[t];for(const r of i.acquired)IU(r)||i.pool.release(r);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(t){const i=this._owner._get(t),r=this._properties[t];let s=r.pool.acquire();for(r.acquired.push(s);s===i;)r.acquired.push(s),s=r.pool.acquire();return s}_release(){for(const t in this._properties){const i=this._properties[t];let r=0;for(const s of i.acquired)IU(s)?i.acquired[r++]=s:i.pool.release(s);i.acquired.length=r}}},ka=class extends Je{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=aDe,this._latestPointerType="mouse",this._propertiesPool=new yDe({latestPointerLocation:bDe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const i of t)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,i,r=zd.INTERNAL){if(this._nameToGroup[t]||i.length===0)return;const s={name:t,handlers:i.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,p,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const i=this._nameToGroup[t];i?(i.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):xe.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,i=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const s=this._handlers[r];s.priorityIndex=r,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const s=this._handlersPriority[r];s.priorityIndex=r;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)uDe(a)||i.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,i,r){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==i||s.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=i,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(t,i){if(t==="pointer-capture-lost"){const n=i;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,i);const r=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,s=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(t,i,r,s)}_updateKeyModifiers(t,i){if(!i)return;let r=!1;const s=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=i.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=i.native;n("Alt",!!o?.altKey),n("Control",!!o?.ctrlKey),n("Ctrl",!!o?.ctrlKey),n("Shift",!!o?.shiftKey),n("Meta",!!o?.metaKey),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new dDe((t,i,r)=>this._setLatestPointer(t,i,r)),this._multiTouchHandler=new mDe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],zd.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,zd.INTERNAL)}_setPointerCapture(t,i,r,s){const n=t.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,i,r,s){this._emitInputEvent(0,t,i,r,s)}_emitInputEvent(t,i,r,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,u={event:new gDe(i,r,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(t){this._currentPropagation={events:new A3,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:i,priorityIndex:r}=t.events.pop(),s=i.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(t.currentHandler=this._handlersPriority[r];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!i.shouldStopPropagation()&&t.currentHandler.eventCallback?.(i),i.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(i.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:i,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const i=new A3;i.push(t);const r=this._currentPropagation;if(r){for(;r.events.length;)i.push(r.events.pop());r.events=i,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,i){if(t.handler.hasSideEffects!==i.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==i.groupPriority)return t.groupPriority>i.groupPriority?-1:1;for(const r of t.handler.incomingEventMatches)for(const s of i.handler.incomingEventMatches){if(r.eventType!==s.eventType)continue;const n=r.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===r.keyModifiers.length!=(n.length===s.keyModifiers.length))return r.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(t){const i=[];for(const r of t){let s=0;for(;s<i.length&&this._compareHandlerPriority(r,i[s])>=0;)s++;i.splice(s,0,r)}return i}get debug(){const t=i=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=r};return{injectEvent:(i,r)=>{t(()=>this._onEventReceived(i,r))},disablePointerCapture:t}}};c([d({readOnly:!0})],ka.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],ka.prototype,"eventSource",void 0),c([d({constructOnly:!0})],ka.prototype,"recognizers",void 0),c([d()],ka.prototype,"_latestPointerType",void 0),c([d()],ka.prototype,"latestPointerType",null),c([d()],ka.prototype,"multiTouchActive",null),c([d({readOnly:!0})],ka.prototype,"latestPointerLocation",void 0),c([d()],ka.prototype,"_paused",void 0),c([d({readOnly:!0})],ka.prototype,"updating",null),ka=c([F("esri.views.input.InputManager")],ka);let gDe=class{constructor(t,i,r,s,n){this.type=t,this.data=i,this.timestamp=r,this.modifiers=s,this.cancelable=n,this._propagationState=bd.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=bd.STOPPED}shouldStopPropagation(){return!!(this._propagationState&bd.STOPPED)}async(t){this._propagationState|=bd.PAUSED;const i=(r,s)=>{this._propagationState&=~bd.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw r;return r};return(typeof t=="function"?t():t).then(r=>i(r,!1),r=>i(r,!0))}shouldPausePropagation(t){return!!(this._propagationState&bd.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var bd;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(bd||(bd={}));const zd={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let vDe=class{};const bDe=vDe;function Ap(e){return e!=null&&"open"in e&&"declaredClass"in e}function QH(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const wDe=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([at(()=>[this.ui,this.popup],([i,r],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&Ap(l)&&(l.view=null,QH(l)&&a.remove(l,n))}i&&Ap(r)&&(r.view=this,QH(r)&&i.add(r,{key:n,position:o,internal:!0}))},Bs),this.on("click",i=>{this.popup&&this.popupEnabled&&(i.pointerType!=="mouse"||i.button===0)&&(Ap(this.popup)?this.popup.viewModel.handleViewClick(i):i.async(async()=>{await this.setupPopup(),Ap(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(i)}))},zd.WIDGET)]),b8(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{ce(()=>import("./Popup-DFpVA4I4.js"),__vite__mapDeps([160,1,3,161,25,16,12,162]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(i){if(Ap(this.popup))return this.popup.open(i);try{if(await this.setupPopup(),!this.popup)return void xe.getLogger(this).error(new W("view:null-popup","Popup is null and can't be opened"));this.popup.open(i)}catch{}}closePopup(){this._popupSetupTask?.abort(),Ap(this.popup)&&this.popup.close()}async fetchPopupFeatures(i,r){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(i,r),r)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Ap(this.popup))return this._popupSetupTask=SF(async i=>{const{default:r}=await ce(()=>import("./Popup-DFpVA4I4.js"),__vite__mapDeps([160,1,3,161,25,16,12,162]),import.meta.url);if(wi(i),!this.popup||Ap(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new r(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:i,hits:r},s){const n=[],o=[];let a=!1;const l=Mye(s,le("popup-view-fetch-timeout")??SDe),u=f=>{const m=new _De(f);return o.push(m),n.push(m.promise),m},h=f=>{const m=o.at(-1);return m&&m.layerView===f&&!a?m:u(f)};for(const f of r)"graphic"in f?(h(f.layerView).graphics.push(f.graphic),a=!1):(n.push(f.layerView.fetchPopupFeaturesAtLocation(f.mapPoint,l)),a=!0);o.map(f=>f.resolve(l));const p=Eye(n).then(f=>f.filter(m=>!!m).flat());return{pendingFeatures:n,allGraphicsPromise:p,location:i}}async _getPopupHits(i,r){const{hits:s,location:n}=await this.popupHitTest(i);wi(r);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,r)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(i,r){return i&&!!i.getEffectivePopupTemplate(r?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(i){return!i||(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesFromGraphics"in i}_isValidPopupLocationLayerView(i){return(!("layer"in i)||!i.suspended)&&"fetchPopupFeaturesAtLocation"in i}};return c([d()],t.prototype,"popup",void 0),c([d()],t.prototype,"popupEnabled",void 0),t=c([F("esri.views.PopupView")],t),t};let _De=class{constructor(t){this.layerView=t,this._resolver=Do(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:i,graphics:r,_resolver:s}=this;if(!i)return s.resolve(r),s.promise;let n;return i.fetchPopupFeaturesFromGraphics(r,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const SDe=5e3;let z3=class extends e2{constructor(t){super(t),this.addHandles(this.on("before-add",i=>{i.item!=null&&i.item.parent===this.owner&&(xe.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};z3=c([F("esri.support.AnalysesCollection")],z3);let nd=class extends Je{constructor(t){super(t),this.view=null,this.baseLayerViews=new Be,this.referenceLayerViews=new Be,this._loadingHandle=at(()=>this.view?.map?.basemap,i=>{i&&i.load().catch(()=>{})},Bs)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;const t=this.view?.map?.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(i=>i.updating)||this.referenceLayerViews.some(i=>i.updating))}};c([d({constructOnly:!0})],nd.prototype,"view",void 0),c([d({readOnly:!0})],nd.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],nd.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],nd.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],nd.prototype,"updating",null),nd=c([F("esri.views.BasemapView")],nd);const xDe=nd;function TDe(e){return"tryRecycleWith"in e}function EDe(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let MDe=class{constructor(t,i,r){this.layer=t,this.view=i,this.layerViewImporter=r,this._controller=new AbortController,this._deferred=Do(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,ha(this._controller.signal,()=>{const s=new W("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!TDe(this.layerView))return null;const i=this.layer.type,r=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==i)continue;const o=this.layerView.tryRecycleWith(n,{signal:r});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(wi(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,h)=>ha(this._controller.signal,()=>h(Oi())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:i,view:r}=this;i.emit("layerview-destroy",{view:r,layerView:t}),r.emit("layerview-destroy",{layer:i,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:i,view:r}=this;this._map=r.map;try{let s,n;if(await i.load({signal:t}),i.prefetchResources&&await i.prefetchResources({signal:t}),ADe(i))s=await i.createLayerView(r,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new W("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(i);wi(t),s="default"in l?new l.default({layer:i,view:r}):new l({layer:i,view:r})}const o=()=>{n=Yi(n),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};n=ha(t,o),wi(t);try{await s.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(i))return o(),void this._deferred.reject(new W("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=s,i.emit("layerview-create",{view:r,layerView:s}),r.emit("layerview-create",{layer:i,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){i.emit("layerview-create-error",{view:r,error:s}),r.emit("layerview-create-error",{layer:i,error:s}),this.done=!0,this._deferred.reject(new W("layerview:create-error","layerview creation failed",{layer:i,error:s}))}}},Da=class extends Je{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new $y,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const i=this.view.map?.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Do(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(zS(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,s=[],n=this.view.ready,o=l=>{if(l!=null){for(const u of l)if(u){r.add(u);const h=this._layerLayerViewInfoMap.get(u);h&&n?h.start():h||this._recyclingInfoMap.has(u)||s.push(u),"layers"in u&&u.layers&&o(u.layers)}}};for(const l of this._rootCollectionNames)o(Xl(this,l));for(const[l,u]of this._layerLayerViewInfoMap)if(!r.has(l)){this._layerLayerViewInfoMap.delete(u.layer);const h=u.tryRecycle(s);h?(this.notifyChange("updating"),this._recyclingInfoMap.set(u.layer,u),h.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule()})):u.destroy()}for(const[l,u]of this._recyclingInfoMap)r.has(l)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy());for(const l of s)this._createLayerView(l);this._refreshCollections();const a=[i?.ground?.layers,i?.basemap?.baseLayers,i?.basemap?.referenceLayers,i?.layers].filter(l=>!!l);r.forEach(l=>"layers"in l&&a.push(l.layers)),this.addHandles(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([au(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),at(()=>{const t=this.view,i=t?.map;return[i?.basemap,i?.ground,i?.layers,t?.ready]},()=>this._reschedule(),sa)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),rR(this._recyclingInfoMap),rR(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Oi()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||tge(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++t;return t}clear(){this.destroyed||(rR(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new W("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,i){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(t);if(!r?.done)return!0;const s=r.layerView;return!(!s||!i||s.parent===i)||!!(r.done&&s&&"layers"in t&&t.layers?.length)&&t.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[t,i]of this._layersToLayerViews)this._populateLayerViewsOwners(Xl(this,t),Xl(this,i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,i,r){if(!t||!i)return void(i&&i.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const a=o.layerView;a.layer=n,a.parent=r,i.at(s)!==a&&i.splice(s,0,a),"layers"in n&&EDe(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<i.length&&i.splice(s,i.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const i=new MDe(t,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),r=>{r&&(ls(r)||r.name==="cancelled:layerview-create")||xe.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],Da.prototype,"_workPromise",void 0),c([d({readOnly:!0})],Da.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Da.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],Da.prototype,"_rootCollectionNames",null),c([d()],Da.prototype,"layerViewImporter",void 0),c([d()],Da.prototype,"supportsGround",void 0),c([d({readOnly:!0})],Da.prototype,"updating",null),c([d({readOnly:!0})],Da.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],Da.prototype,"view",void 0),Da=c([F("esri.views.LayerViewManager")],Da);const IDe=Da;function ADe(e){return"createLayerView"in e&&e.createLayerView!=null}let ta=class extends Je{constructor(t){super(t),this.factor=1.5,this.offset=Ms(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],ta.prototype,"factor",void 0),c([d({nonNullable:!0})],ta.prototype,"offset",void 0),c([d()],ta.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],ta.prototype,"size",void 0),c([d()],ta.prototype,"maskUrl",void 0),c([d()],ta.prototype,"maskEnabled",void 0),c([d()],ta.prototype,"overlayUrl",void 0),c([d()],ta.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],ta.prototype,"version",null),c([d({type:Boolean})],ta.prototype,"visible",void 0),ta=c([F("esri.views.Magnifier")],ta);const Qae=ta;let mI=class{constructor(t){this._observable=new JS,this._map=new Map(t)}get size(){return ht(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const i=this._map.delete(t);return i&&this._observable.notify(),i}entries(){return ht(this._observable),this._map.entries()}forEach(t,i){ht(this._observable),this._map.forEach((r,s)=>t.call(i,r,s,this),i)}get(t){return ht(this._observable),this._map.get(t)}has(t){return ht(this._observable),this._map.has(t)}keys(){return ht(this._observable),this._map.keys()}set(t,i){return this._map.set(t,i),this._observable.notify(),this}values(){return ht(this._observable),this._map.values()}[Symbol.iterator](){return ht(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function eE(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let dh=class extends ap.EventedAccessor{constructor(t){super(t),this._selectionMap=new mI,this._sources=new Be,this._trashCan=[],this._layerEditHandles=new Be,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([at(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),au(()=>this.sources,"change",i=>{const r=this._selectionMap;for(const s of i.removed)r.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new Be;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(i=>"sublayers"in i&&i.sublayers?i.sublayers:null).forEach(i=>{(eE(i)&&!v1e(i)||um(i))&&t.add(i)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Yi)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[i,r]=t;return{layer:i,selection:[...r.selection]}})}get count(){let t=0;for(const i of this._selectionMap.values())t+=i.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Yd(t,this._sources)}async getSelectedFeatures(t,i={},r="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:u}=a,h=um(l)?l.parent:l;if(h==null||!tW(h))return null;if(r==="layer")return iW(h,u,i);if(eW(h))return null;const p=await s.whenLayerView(h).catch(()=>null);return p?iW(p,u,i):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const i=new Map;for(const[n,o]of this._selectionMap)i.set(n,[...o.selection]);let r=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(eE(o)||um(o))&&a!==null){const l=qS(i,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(eE(o)||um(o))&&a!==null){const l=i.get(o),u=l?.indexOf(a);u!==void 0&&u>=0&&(l?.splice(u,1),r=!0)}}if(r){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,u]of i){const h=n.get(l);h!==void 0&&o.push(h),n.set(l,{selection:u}),a.push({layer:l,selection:u,...oU(h!==void 0?h.selection:[],u)})}this._onSelectionChange(a)}}setSelection(t,i){this._setSelection(t,i)}getSelection(t){return this._selectionMap.get(t)?.selection}appendToSelection(t,i){const r=this._selectionMap.get(t),s=r!==void 0?[...r.selection]:[];for(const n of i)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,i){const r=this._selectionMap.get(t);if(!r)return;const s=[];for(const n of r.selection)i.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,i){const r=this._selectionMap.get(t);if(!r||r.selection.length===0)return void this._setSelection(t,i);const s=new Set(r.selection),n=new Set(i),o=Uye(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const i=[];for(const[r,s]of this._selectionMap.entries())i.push({layer:r,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(i)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();const{sources:t,view:i,_selectionMap:r,showHighlight:s}=this,n=this._vizTaskId;for(const o of t){const a=r.get(o),l=um(o)?o.parent:o;if(l!=null&&tW(l)){if(eW(l))continue;i.whenLayerView(l).then(u=>{a?.highlightHandle?.remove(),a!=null&&s&&n===this._vizTaskId&&"highlight"in u&&typeof u.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=u.highlight(a.selection,"selection"))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Yi);for(const t of this.sources){const i=um(t)?t.parent:t;if(i!=null&&eE(i)){const r=i.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(r)}}}_handleEditChanges(t,i){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(i)){const r=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(ko);this.removeFromSelection(i,r)}}_setSelection(t,i){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const r=this._selectionMap.get(t);if(r===void 0||!CDe(r,{selection:i})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(t,{selection:[...i]});const s={layer:t,selection:[...i],...oU(r!==void 0?r.selection:[],i)};this._onSelectionChange([s])}}};c([d({readOnly:!0,nonNullable:!0})],dh.prototype,"selections",null),c([d({readOnly:!0,nonNullable:!0})],dh.prototype,"count",null),c([d({constructOnly:!0,nonNullable:!0})],dh.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],dh.prototype,"hasSelection",null),c([d()],dh.prototype,"showHighlight",void 0),c([d()],dh.prototype,"sources",null),dh=c([F("esri.views.SelectionManager")],dh);const eW=e=>um(e)?e.parent?.isTable===!0:e.isTable,$De=e=>e.layer!==void 0,tW=e=>e?.when!==void 0,CDe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const i=[...e.selection],r=[...t.selection];if(i.length!==r.length)return!1;i.sort(),r.sort();for(let s=0;s<i.length;s++)if(i[s]!==r[s])return!1}return!0},iW=async(e,t,i={})=>{let r;if($De(e)){const s=e;r=s===void 0?null:await s.queryFeatures(new Dr({...i,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;r=s===void 0?null:await s.queryFeatures(new Dr({...i,objectIds:t})).then(n=>({data:n,layer:s}))}return r},RDe=dh;let v_=class extends Dt(Je){constructor(t){super(t),this.accentColor=new Oe([255,127,0]),this.textColor=new Oe([255,255,255])}};c([d({type:Oe,nonNullable:!0})],v_.prototype,"accentColor",void 0),c([d({type:Oe,nonNullable:!0})],v_.prototype,"textColor",void 0),v_=c([F("esri.views.Theme")],v_);const _D=v_;var rW;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(rW||(rW={}));const ele=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],tle={};function ile(e){return!!tle[e]}function ODe(e){for(const t of e)if(!ile(t))return!1;return!0}ele.forEach(e=>{tle[e]=!0});let PDe=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:i,priority:r},s)=>this.inputManager?.installHandlers(s,[i],r))}disconnect(){this.inputManager&&this._handlers.forEach((t,i)=>this.inputManager?.uninstallHandlers(i)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,i,r,s){const n=Array.isArray(t)?t:t.split(",");if(!ODe(n))return n.some(ile)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof r=="function"?o=r:s=r,s=s??zd.DEFAULT;const l=this._createUniqueGroupName(),u=new LDe(this.view,n,a,o);this._handlers.set(l,{handler:u,priority:s});for(const h of n){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),ti(()=>this._removeHandler(l,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,i){if(this._handlers.has(t)){this._handlers.delete(t);for(const r of i){const s=this._handlerCounts.get(r);s===void 0||(s===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},LDe=class extends hs{constructor(t,i,r,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of i)switch(n){case"click":this.registerIncoming("click",r,o=>s(DDe(t,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>s(FDe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>s(jDe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>s(UDe(t,o)));break;case"hold":this.registerIncoming("hold",r,o=>s(VDe(t,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>s(GDe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>s(BDe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>s(ew(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>s(ew(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>s(ew(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>s(zDe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>s(qDe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>s(ew(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>s(ew(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{s(HDe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{s(NDe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{s(kDe(o))})}}_wrapDrag(t){const i=t.data,{x:r,y:s}=i.center,{action:n,pointerType:o,button:a}=i;if(n==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:h,timestamp:p}=t,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:r,y:s,origin:f,pointerType:o,button:a,buttons:u,radius:i.radius,angle:pee(i.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}};function NDe(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function kDe(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function DDe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,screenPoint:Ms(n,o),mapPoint:Tx(e,n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function FDe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"double-click",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:h,mapPoint:Tx(e,n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function jDe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:Tx(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function UDe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:p}=t;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:Tx(e,n,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function VDe(e,t){const{pointerType:i,button:r,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:i,button:r,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:Tx(e,n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function Tx(e,t,i){return e.toMap(Ms(t,i),{exclude:[]})}function GDe(e){const{key:t,repeat:i,native:r}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:i,native:r,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function BDe(e){const{key:t,native:i}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:t,native:i,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function ew(e,t){const{x:i,y:r,button:s,buttons:n,native:o,eventId:a}=e.data,l=o.pointerId,u=o.pointerType,{cancelable:h,timestamp:p}=e;return{type:t,x:i,y:r,pointerId:l,pointerType:u,button:s,buttons:n,native:o,timestamp:p,eventId:a,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}function zDe(e){const{x:t,y:i,buttons:r,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,u=e.data.action,h={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:f}=e;return{type:"pointer-drag",x:t,y:i,pointerId:a,pointerType:l,button:o,buttons:r,action:u,origin:h,native:s,timestamp:f,eventId:n,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function qDe(e){const{cancelable:t,data:i,timestamp:r}=e,{x:s,y:n,deltaY:o,native:a}=i;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:r,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function HDe(e){const{action:t,state:i,device:r}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=i;return{type:"gamepad",device:r,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var oS,sW,nW;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(oS||(oS={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(sW||(sW={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(nW||(nW={}));function WDe(e){return[e.on("before-add",t=>{const i=t.item;if(i==null||e.includes(i))return xe.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();i.onAdd()}),e.on("after-remove",t=>{const i=t.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function SD(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(oS.USER)&&e.getEditableFlag(oS.MANAGER)}function Nu(e){return Ms(e.x,e.y)}function rle(e,t){const i=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return i?Ms(t.clientX-i.left,t.clientY-i.top):Ms(0,0)}function sle(e,t){return t instanceof Event?rle(e,t):Nu(t)}function nle(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let JDe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,i){const r=()=>t.stopPropagation();switch(t.type){case"pointer-move":aW(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:t.action==="start"?this._externallyDragging=!0:t.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!lW(t))break;const s=Nu(t),n=Wg(s,t.pointerType,i.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,i),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&i.activeTool==null&&(this._revertToNullActiveTool=!0,i.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),r());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,i);break;case"pointer-drag":{if(!lW(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const a=Nu(t);a.x=rl(a.x,0,i.view.width),a.y=rl(a.y,0,i.view.height);const l=s.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,u?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,u&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,i)}r();break}case"immediate-click":{const s=Nu(t),n=Wg(s,t.pointerType,i.forEachTool);if(ZDe(t)||i.forEachTool(u=>{if((n==null||n.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let h=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:r}),hR(o,r);break}case"click":{const s=Nu(t),n=Wg(s,t.pointerType,i.forEachTool),o=n?.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),r();break}case"double-click":{const s=Nu(t),n=Wg(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),hR(o,r);break}case"immediate-double-click":{const s=Nu(t),n=Wg(s,t.pointerType,i.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:r}),t.pointerType==="mouse"&&hR(o,r);break}}this._onFocusChange(i.forEachTool)}_releaseManipulatorBeforeDragging(t,i,r){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Nu(i)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(t,i){const r=this._grabbedManipulators.get(t.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Nu(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(i.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=oW(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=oW(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const i=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:s})=>{i.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{r.add(s)}),t(s=>{s.hasGrabbedManipulators=i.has(s),s.hasHoveredManipulators=r.has(s);const n=this._grabbedManipulators.values(),o=Jme(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:i,setActiveTool:r},s=!0,n){const o=(a,l)=>a===t&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(i)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((i,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Ms(i.x,i.y),r,i.pointerType,t)})}handleHoverEvent(t,i){const r=t.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!aW(t.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(t.pointerId):this._updateHoveredStateForPointerAtScreenPosition(Nu(t),t.pointerId,t.pointerType,i))}_updateHoveredStateForPointerAtScreenPosition(t,i,r,s){let n=Wg(t,r,s);const o=this._hoveredManipulators.get(i)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(i,n)):this._hoveredManipulators.delete(i),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(t){this._hoveredManipulators.forEach(({manipulator:i},r)=>{t===r&&(this._hoveredManipulators.delete(t),i.hovering=!1)})}};function oW(e){for(const{manipulator:t}of e.values())if(t!=null&&t.interactive){if(t.grabbing&&t.grabCursor)return t.grabCursor;if(t.cursor)return t.cursor}return null}function Wg(e,t,i){let r=null;return i(s=>{if(s.manipulators==null||!SD(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(r={tool:s,manipulator:n},!0)}),r}function aW(e){return e==="mouse"}function lW(e){return e.pointerType!=="mouse"||e.button===0}function ZDe(e){return!!e.native.shiftKey}function hR(e,t){e?.consumesClicks&&t()}const uW="attached",pR="tools",YDe=1e3;let ku=class extends Je{constructor(t){super(t),this._updatingHandles=new $y,this._clock=Y1,this._manipulatorState=new JDe,this.tools=new Be,this.cursor=null,this._interacting=!1,this._interactingTimeout=YDe,this._interactingTimeoutHandle=null,this._forEachTool=i=>{for(const r of this.tools.items)if(i(r))return}}initialize(){this.addHandles([this.view.on(ele,t=>{this._handleInputEvent(t)},zd.TOOL),...WDe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void xe.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const i=this.activeTool;this._set("activeTool",t),i?.deactivate(),t?.activate(),this._removeIncompleteTools(t);for(const r of this.tools){this._updateToolEditableFlag(r);const s=SD(r);this.activeTool!=null&&s||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Yi(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([at(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),this.view.elevationProvider?.on("elevation-change",t=>this._forEachManipulator(i=>i.onElevationChange(t)))],uW):this.addHandles(at(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(uW),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:r})=>t(r,i))})}_handleInputEvent(t){let i=!1;const r={...t,stopPropagation:()=>{i=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(s=>{!i&&s.visible&&s.handleInputEvent(r)}),!i&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),i||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(pR),this._forEachTool(t=>{if(t instanceof Je){const i=at(()=>[t.cursor,t.visible,t.editable],()=>{SD(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(i,pR)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],pR)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(oS.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(i=>!(i.cursor==null||!i.visible)&&(t=i.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(i=>(t==null||i!==t)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}get test(){}};c([d({constructOnly:!0,nonNullable:!0})],ku.prototype,"view",void 0),c([d({value:null})],ku.prototype,"activeTool",null),c([d({readOnly:!0,type:Be})],ku.prototype,"tools",void 0),c([d({readOnly:!0})],ku.prototype,"cursor",void 0),c([d({readOnly:!0})],ku.prototype,"updating",null),c([d()],ku.prototype,"_interacting",void 0),c([d({readOnly:!0})],ku.prototype,"interacting",null),ku=c([F("esri.views.ToolViewManager")],ku);let B0=class extends Je{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":KDe.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return XDe[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],B0.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],B0.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],B0.prototype,"axisThreshold",null),B0=c([F("esri.views.input.gamepad.GamepadInputDevice")],B0);const Q9=B0,KDe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),XDe={standard:.15,spacemouse:.025,unknown:0};let b_=class extends Je{constructor(...t){super(...t),this.devices=new Be,this.enabledFocusMode="document"}};c([d({type:Be.ofType(Q9),readOnly:!0})],b_.prototype,"devices",void 0),c([d({type:["document","view","none"]})],b_.prototype,"enabledFocusMode",void 0),b_=c([F("esri.views.input.gamepad.GamepadSettings")],b_);const QDe=b_;let yI=class extends Je{constructor(){super(...arguments),this.gamepad=new QDe}};c([d({readOnly:!0})],yI.prototype,"gamepad",void 0),yI=c([F("esri.views.input.Input")],yI);const e6e=yI,ole=()=>Kt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let od=class extends Je{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],od.prototype,"enabled",void 0),c([d({type:Q9})],od.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],od.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],od.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],od.prototype,"velocityFactor",void 0),od=c([F("esri.views.navigation.gamepad.GamepadSettings")],od);const ale=od;let Wm=class extends Je{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new ale,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!ole()}};c([d({type:Boolean})],Wm.prototype,"browserTouchPanEnabled",void 0),c([d({type:ale,nonNullable:!0})],Wm.prototype,"gamepad",void 0),c([d({type:Boolean})],Wm.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],Wm.prototype,"mouseWheelZoomEnabled",void 0),Wm=c([F("esri.views.navigation.Navigation")],Wm);const lle=Wm;var cW;function t6e(e){if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?ip(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&ule(e)&&e.heightModelInfo?e.heightModelInfo:i6e(e)?uC.deriveUnitFromSR(s6e,e.spatialReference):null}function ule(e){return"heightModelInfo"in e}function cle(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function i6e(e){return cle(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):hle(e)}function r6e(e){return e.layers!=null||hle(e)||cle(e)||ule(e)}function hle(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"focusArea":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(cW||(cW={}));const s6e=new uC({heightModel:"gravity-related-height"});var q3;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(q3||(q3={}));let xD,dR=null;async function n6e(e){dR||(dR=ce(()=>import("./geometryServiceUtils-CzF7G2bf.js"),__vite__mapDeps([163,164,1]),import.meta.url).then(t=>xD=t)),await dR,wi(e)}async function ple(e,t,i,r){if(!e)return null;const s=e.spatialReference;return Ef()||lu(s,t)?Mf(e,t):xD?xD.projectGeometry(e,t,i,r):(await Promise.race([n6e(r),nf(r)]),ple(e,t,i,r))}let Ti=class extends Je{constructor(t){super(t),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=O2(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const t=this.map?.(),i=[];return this.priorityCollection!=null&&i.push(this.priorityCollection),i.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),i}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let t;if(this._collectLayers(this.mapCollections,r=>{const s=this._getSupportedSpatialReferences(r);if(s.length>0){const n=this._narrowDownSpatialReferenceCandidates(t,s);n!=null&&(t=n)}return t?.length===1})&&t?.length!==1)return{updating:!0};const i=this._pickSpatialReferenceCandidate(t);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const t=this.map?.(),i=this.spatialReference;if(!i)return{updating:this._spatialReferenceTask.updating};let r;const s=this._collectLayers([{parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers}],n=>!(!("tileInfo"in n)||!n.tileInfo?.spatialReference.equals(i))&&(r=n,!0),n=>"tileInfo"in n);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:s}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let t={};const i=this._collectLayers(this.mapCollections,r=>{const s=t6e(r);return!!s&&(t={heightModelInfo:s,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>r6e(r));return{...t,updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=[],i=this._collectLayers(this.mapCollections,r=>{const s="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),n=this.requiresExtentInSpatialReference?null:s[0],o=s.find(a=>a.spatialReference.equals(this.spatialReference))??n;if(o)return t.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of s)t.push({extent:a,layer:r});return!1});return{candidates:t,updating:i}}get _extentTask(){const{candidates:t,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(t),s=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=O2(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:s.clone(),task:SF(async n=>{try{const o=await ple(r.extent,s,"portalItem"in r.layer?r.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ya(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,i){if(t==null)return i;const r=new Array;for(const s of t)for(const n of i){if(!s.spatialReference.equals(n.spatialReference))continue;const o=a6e(s.viewingMode,n.viewingMode);if(o!==!1){r.push({spatialReference:s.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(t){const i=this.defaultSpatialReference;return t==null||t.length<1?i?{spatialReference:i,viewingMode:null}:null:(i!=null&&t.length>1&&t.some(({spatialReference:r})=>r.equals(i))&&(t=t.filter(({spatialReference:r})=>r.equals(i))),t.length>1&&t.some(({viewingMode:r})=>r!==q3.Local)&&(t=t.filter(({viewingMode:r})=>r!==q3.Local)),t[0])}_getSupportedSpatialReferences(t){const i="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(i.length===0)return[];const r=[];for(const s of i){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(t){const i=this.spatialReference;return t.find(({extent:r})=>i.equals(r.spatialReference))||t[0]}_collectLayers(t,i,r=()=>!0){if(this._loadMaybe(this.map?.())!=="loaded")return!0;const s=new o6e(r,i);for(const n of t)if(this._collectCollection(n,s),s.done||s.preloading===this.sourcePreloadCount)break;return s.updating}_collectCollection(t,i){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const r of t.layers)if(i.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":if(i.updating||(i.done=i.pushLayer(r)),i.done||i.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},i)}if(i.done||i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(i=>{ls(i)}),"loading"):t.loadStatus:"loaded"}};c([d()],Ti.prototype,"required",void 0),c([d({constructOnly:!0})],Ti.prototype,"map",void 0),c([d({constructOnly:!0})],Ti.prototype,"getSpatialReferenceSupport",void 0),c([d()],Ti.prototype,"defaultSpatialReference",void 0),c([d()],Ti.prototype,"userSpatialReference",void 0),c([d()],Ti.prototype,"sourcePreloadCount",void 0),c([d()],Ti.prototype,"priorityCollection",void 0),c([d()],Ti.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Ti.prototype,"suspended",void 0),c([d({readOnly:!0})],Ti.prototype,"ready",null),c([d({readOnly:!0})],Ti.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Ti.prototype,"spatialReference",null),c([d({readOnly:!0})],Ti.prototype,"extent",null),c([d({readOnly:!0})],Ti.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Ti.prototype,"vcsWkid",null),c([d({readOnly:!0})],Ti.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Ti.prototype,"viewingMode",null),c([d({readOnly:!0})],Ti.prototype,"tileInfo",null),c([d({readOnly:!0})],Ti.prototype,"mapCollections",null),c([d({readOnly:!0})],Ti.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Ti.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Ti.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Ti.prototype,"_extentCandidatesTask",null),c([d()],Ti.prototype,"_extentTask",null),c([d()],Ti.prototype,"_projectExtentTask",void 0),Ti=c([F("esri.views.support.DefaultsFromMap")],Ti);let o6e=class{constructor(t,i){this.layerFilter=t,this.pushLayer=i,this.preloading=-1,this.updating=!1,this.done=!1}};function a6e(e,t){return e!=null?t!=null?e===t&&e:e:t}var w_;let rt=w_=class extends ap.EventedMixin(v$(Je)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Z1,this.updatingHandles=new $y,this.allLayerViews=new rg({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:u6e}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Iy,this.analyses=new z3,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Be,this.magnifier=new Qae,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new e6e,this.navigation=new lle,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new PDe(this),this.persistableViewModels=new Be,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(at(()=>this.preconditionsReady,t=>{const i=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,w_.views.add(this)):(this._lockedSpatialReference=null,w_.views.remove(this)),this.notifyChange("spatialReference"),!t&&i)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!i){try{this._startup()}catch(r){return void queueMicrotask(()=>{this.fatalError=new W("startup-error",null,r)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},ns))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,b8(()=>this.ready)))),this.basemapView=new xDe({view:this}),this.layerViewManager=new IDe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new ku({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new RDe({view:this}),this.addHandles([at(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},sa),at(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},ns),at(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},sa)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([at(()=>this.defaultsFromMap?.ready,t=>{const i=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&i){if(e!=null)return;const r=ti(()=>e=O2(e));e=SF(async s=>{try{await CX(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}xe.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(r,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(w_.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Wi(this.graphics),this.analyses=Wi(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),Wi(this.analysisViewManager),this.toolViewManager=Wi(this.toolViewManager),this.layerViewManager=Wi(this.layerViewManager),this.selectionManager=Wi(this.selectionManager),this.basemapView=Wi(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=Wi(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return xe.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Ti({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||mc.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(xe.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),mc.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!Xi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??yc}set timeZone(e){this._userTimeZone=e,kte(e)||xe.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new _D}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}importLayerView(e){throw new W("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&xe.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(vc(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};rt.views=new Be,c([d()],rt.prototype,"_userSpatialReference",void 0),c([d()],rt.prototype,"activeTool",null),c([d({readOnly:!0})],rt.prototype,"allLayerViews",void 0),c([d()],rt.prototype,"groundView",void 0),c([d()],rt.prototype,"animation",null),c([d()],rt.prototype,"basemapView",void 0),c([d()],rt.prototype,"center",null),c([d()],rt.prototype,"defaultsFromMapSettings",null),c([d()],rt.prototype,"defaultsFromMap",null),c([d()],rt.prototype,"fatalError",void 0),c([d({type:bt})],rt.prototype,"extent",null),c([d(pk(Iy,"graphics"))],rt.prototype,"graphics",void 0),c([d(pk(z3,"analyses"))],rt.prototype,"analyses",void 0),c([d({readOnly:!0,type:uC})],rt.prototype,"heightModelInfo",null),c([d({readOnly:!0})],rt.prototype,"interacting",null),c([d({readOnly:!0})],rt.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],rt.prototype,"preconditionsReady",null),c([d({readOnly:!0})],rt.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:Be,readOnly:!0})],rt.prototype,"layerViews",void 0),c([d()],rt.prototype,"resolution",null),c([d({type:Qae})],rt.prototype,"magnifier",void 0),c([d({value:null,type:wae})],rt.prototype,"map",null),c([d()],rt.prototype,"padding",void 0),c([d({readOnly:!0})],rt.prototype,"ready",void 0),c([d({type:ke})],rt.prototype,"spatialReference",null),c([d()],rt.prototype,"spatialReferenceWarningDelay",void 0),c([d()],rt.prototype,"stationary",null),c([d({readOnly:!0})],rt.prototype,"supportsGround",void 0),c([d({type:io})],rt.prototype,"timeExtent",null),c([d({type:String,nonNullable:!0})],rt.prototype,"timeZone",null),c([d()],rt.prototype,"tools",null),c([d()],rt.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],rt.prototype,"type",void 0),c([d({type:Number})],rt.prototype,"scale",void 0),c([d({readOnly:!0})],rt.prototype,"updating",void 0),c([d({readOnly:!0})],rt.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],rt.prototype,"initialExtent",null),c([d()],rt.prototype,"cursor",null),c([d({readOnly:!0})],rt.prototype,"input",void 0),c([d({type:lle,nonNullable:!0})],rt.prototype,"navigation",void 0),c([d()],rt.prototype,"layerViewManager",void 0),c([d()],rt.prototype,"analysisViewManager",void 0),c([d()],rt.prototype,"selectionManager",void 0),c([d()],rt.prototype,"width",void 0),c([d()],rt.prototype,"height",void 0),c([d({readOnly:!0})],rt.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],rt.prototype,"size",null),c([d({readOnly:!0})],rt.prototype,"suspended",void 0),c([d({readOnly:!0})],rt.prototype,"viewEvents",void 0),c([d({readOnly:!0})],rt.prototype,"persistableViewModels",void 0),c([d()],rt.prototype,"_isValid",void 0),c([d()],rt.prototype,"_readyCycleForced",void 0),c([d()],rt.prototype,"_lockedSpatialReference",void 0),c([d()],rt.prototype,"_userTimeZone",void 0),c([d()],rt.prototype,"_lockedTimeZone",void 0),c([d()],rt.prototype,"_userTimeExtent",void 0),c([d()],rt.prototype,"_lockedTimeExtent",void 0),c([d({type:_D})],rt.prototype,"theme",void 0),c([d({readOnly:!0,type:_D})],rt.prototype,"effectiveTheme",null),rt=w_=c([F("esri.views.View")],rt);const fR=globalThis.$arcgis;fR&&!fR.views&&Object.defineProperty(fR,"views",{configurable:!1,enumerable:!0,writable:!1,value:rt.views});const l6e=rt;function u6e(e){return e.layerViews}function fr(){return[0,0]}function c6e(e){return[e[0],e[1]]}function Ex(e,t){return[e,t]}function h6e(e,t=fr()){const i=Math.min(2,e.length);for(let r=0;r<i;++r)t[r]=e[r];return t}function p6e(e,t){return new Float64Array(e,t,2)}function dle(){return fr()}function fle(){return Ex(1,1)}function mle(){return Ex(1,0)}function yle(){return Ex(0,1)}const d6e=dle(),f6e=fle(),m6e=mle(),y6e=yle();Object.freeze(Object.defineProperty({__proto__:null,ONES:f6e,UNIT_X:m6e,UNIT_Y:y6e,ZEROS:d6e,clone:c6e,create:fr,createView:p6e,fromArray:h6e,fromValues:Ex,ones:fle,unitX:mle,unitY:yle,zeros:dle},Symbol.toStringTag,{value:"Module"}));let ad=class extends a3{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Do(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new W("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(t,i){i||(i=Ac(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",i)}};c([d({readOnly:!0})],ad.prototype,"done",null),c([d({readOnly:!0,type:String})],ad.prototype,"state",void 0),c([d()],ad.prototype,"target",void 0),ad=c([F("esri.views.ViewAnimation")],ad),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(ad||(ad={}));const TD=ad;function Zv(e,t){return e[0]=t[0],e[1]=t[1],e}function xs(e,t,i){return e[0]=t,e[1]=i,e}function gle(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function aS(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function vle(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function ble(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function g6e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function v6e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function b6e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function w6e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function _6e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Mx(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function S6e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e}function AC(e,t){const i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)}function H3(e,t){const i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function W3(e){const t=e[0],i=e[1];return Math.sqrt(t*t+i*i)}function wle(e){const t=e[0],i=e[1];return t*t+i*i}function _le(e,t){return e[0]=-t[0],e[1]=-t[1],e}function x6e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function ED(e,t){const i=t[0],r=t[1];let s=i*i+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function Sle(e,t){return e[0]*t[0]+e[1]*t[1]}function xle(e,t,i){const r=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=r,e}function T6e(e,t,i,r){const s=t[0],n=t[1];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e}function E6e(e,t=1){const i=2*Y$()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function M6e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s,e[1]=i[1]*r+i[3]*s,e}function Yu(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[2]*s+i[4],e[1]=i[1]*r+i[3]*s+i[5],e}function I6e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[3]*s+i[6],e[1]=i[1]*r+i[4]*s+i[7],e}function A6e(e,t,i){const r=t[0],s=t[1];return e[0]=i[0]*r+i[4]*s+i[12],e[1]=i[1]*r+i[5]*s+i[13],e}function $6e(e,t,i,r){const s=t[0]-i[0],n=t[1]-i[1],o=Math.sin(r),a=Math.cos(r);return e[0]=s*a-n*o+i[0],e[1]=s*o+n*a+i[1],e}function C6e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1];let o=i*i+r*r;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(i*s+r*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function R6e(e){return"vec2("+e[0]+", "+e[1]+")"}function O6e(e,t){return e[0]===t[0]&&e[1]===t[1]}function P6e(e,t){const i=e[0],r=e[1],s=t[0],n=t[1],o=to();return Math.abs(i-s)<=o*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-n)<=o*Math.max(1,Math.abs(r),Math.abs(n))}function L6e(e,t,i,r,s){let n=t[0]-i[0],o=t[1]-i[1];const a=(r[0]*n+r[1]*o)*(s-1);return n=r[0]*a,o=r[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const N6e=W3,e7=aS,k6e=vle,D6e=ble,F6e=AC,j6e=H3,U6e=wle;Object.freeze(Object.defineProperty({__proto__:null,add:gle,angle:C6e,ceil:g6e,copy:Zv,cross:xle,dist:F6e,distance:AC,div:D6e,divide:ble,dot:Sle,equals:P6e,exactEquals:O6e,floor:v6e,inverse:x6e,len:N6e,length:W3,lerp:T6e,max:w6e,min:b6e,mul:k6e,multiply:vle,negate:_le,normalize:ED,projectAndScale:L6e,random:E6e,rotate:$6e,round:_6e,scale:Mx,scaleAndAdd:S6e,set:xs,sqrDist:j6e,sqrLen:U6e,squaredDistance:H3,squaredLength:wle,str:R6e,sub:e7,subtract:aS,transformMat2:M6e,transformMat2d:Yu,transformMat3:I6e,transformMat4:A6e},Symbol.toStringTag,{value:"Module"}));function V6e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function G6e(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function B6e(e,t,i,r,s,n,o){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e}function t7(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=i*n-r*s;return l?(l=1/l,e[0]=n*l,e[1]=-r*l,e[2]=-s*l,e[3]=i*l,e[4]=(s*a-n*o)*l,e[5]=(r*o-i*a)*l,e):null}function z6e(e){return e[0]*e[3]-e[1]*e[2]}function Tle(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1],p=i[2],f=i[3],m=i[4],g=i[5];return e[0]=r*u+n*h,e[1]=s*u+o*h,e[2]=r*p+n*f,e[3]=s*p+o*f,e[4]=r*m+n*g+a,e[5]=s*m+o*g+l,e}function $C(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(i),h=Math.cos(i);return e[0]=r*h+n*u,e[1]=s*h+o*u,e[2]=r*-u+n*h,e[3]=s*-u+o*h,e[4]=a,e[5]=l,e}function i7(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1];return e[0]=r*u,e[1]=s*u,e[2]=n*h,e[3]=o*h,e[4]=a,e[5]=l,e}function lS(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=i[0],h=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=r*u+n*h+a,e[5]=s*u+o*h+l,e}function Ele(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=-i,e[3]=r,e[4]=0,e[5]=0,e}function Mle(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function r7(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function q6e(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function H6e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function W6e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function Ile(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function J6e(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function Z6e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e}function Y6e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function K6e(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],u=t[1],h=t[2],p=t[3],f=t[4],m=t[5],g=to();return Math.abs(i-l)<=g*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-u)<=g*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=g*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(n-p)<=g*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=g*Math.max(1,Math.abs(a),Math.abs(m))}const X6e=Tle,Q6e=Ile;Object.freeze(Object.defineProperty({__proto__:null,add:W6e,copy:V6e,determinant:z6e,equals:K6e,exactEquals:Y6e,frob:H6e,fromRotation:Ele,fromScaling:Mle,fromTranslation:r7,identity:G6e,invert:t7,mul:X6e,multiply:Tle,multiplyScalar:J6e,multiplyScalarAndAdd:Z6e,rotate:$C,scale:i7,set:B6e,str:q6e,sub:Q6e,subtract:Ile,translate:lS},Symbol.toStringTag,{value:"Module"}));function Jh(){return[1,0,0,1,0,0]}function eFe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function tFe(e,t,i,r,s,n){return[e,t,i,r,s,n]}function iFe(e,t){return new Float64Array(e,t,6)}const rFe=Jh();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:rFe,clone:eFe,create:Jh,createView:iFe,fromValues:tFe},Symbol.toStringTag,{value:"Module"}));const Ale=96,$le=39.37,sFe=180/Math.PI;function Cle(e){return e.wkid?e:e.spatialReference||ke.WGS84}function s7(e,t){return t.type?xs(e,t.x,t.y):Zv(e,t)}function Rle(e){return $c(e)}function CC(e,t,i=0){let r=e.width,s=e.height;if(i!==0){const a=QS(i),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));r=e.width*l+e.height*u,s=e.width*u+e.height*l}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(r/n,s/o)*pFe(e.spatialReference)}async function __(e,t,i,r){let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(Be.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),l=e.some(h=>!h.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const h=new Map;for(const g of e){const b=g.layer,w=h.get(b)||[],S=g.attributes[b.objectIdField];S!=null&&w.push(S),h.set(b,w)}const p=[];h.forEach((g,b)=>{const w=t.allLayerViews.find(S=>S.layer.id===b.id);if(w&&"queryFeatures"in w){const S=b.createQuery();S.objectIds=g,S.returnGeometry=!0,p.push(w.queryFeatures(S))}});const f=await Promise.all(p),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const b of g.features)b.geometry!=null&&m.push(b.geometry);u=m}for(const h of u)r=await __(h,t,i,r);return r}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new Ve(e);else if(e instanceof Cc)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0,s=(await l.queryFeatures(u))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new bt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=c5e(s);break;default:n=s.extent}if(!n)return null;Ef()||lu(n.spatialReference,i)||await nf();const o=Mf(n,i);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=w9(a.x,r.center.x,i),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function nFe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,i=0;for(const r of e){const s=r.layer;s?.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,i=s.maxScale>i?s.maxScale:i)}return t&&i?{min:t,max:i}:null}}}function hW(e,t){const i=Cle(e);return Xi(i,t)||i.imageCoordinateSystem||t.imageCoordinateSystem?e:Mf(e,t)}async function oFe(e,t){if(!e||!t)return new eu({targetGeometry:new Ve,scale:0,rotation:0});let i=t.spatialReference;const{constraints:r,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof eu?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l?.targetGeometry?u=l.targetGeometry:e instanceof bt?u=e:e instanceof Cc?u=await __(e,t,i):e&&(u=await __(e.center,t,i)||await __(e.target,t,i)||await __(e,t,i)),!u&&n?.targetGeometry?u=n.targetGeometry:!u&&t.extent&&(u=t.extent),i||(i=Cle(t.spatialReference||t.extent||u)),Ef()||Xi(u.spatialReference,i)||lu(u.spatialReference,i)||await nf();const h=hW(u,i),p="center"in h?h.center:h;t.pickClosestTarget!==!1&&p.type==="point"&&n.targetGeometry?.type==="point"&&(p.x=w9(p.x,n.targetGeometry.x,p.spatialReference));let f=0;l?f=l.rotation:e.hasOwnProperty("rotation")?f=e.rotation:n&&(f=n.rotation);let m=0;m=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(e.zoom):Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0?n.scale:CC(hW(u.extent,i),a,f);const g=nFe(e.target??e);g&&(g.min&&g.min<m?m=g.min:g.max&&g.max>m&&(m=g.max));let b=new eu({targetGeometry:p,scale:m,rotation:f});return r&&(b=r.fit(b),r.constrainByGeometry(b),r.rotationEnabled||(b.rotation=n.rotation)),b}function An(e,t){const i=e.targetGeometry,r=t.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function aFe(e,t,i){return i?xs(e,.5*(t[0]-i.right+i.left),.5*(t[1]-i.bottom+i.top)):Mx(e,t,.5)}const lFe=function(){const e=fr();return function(t,i,r){const s=i.targetGeometry;s7(e,s);const n=.5*wb(i);return t.xmin=e[0]-n*r[0],t.ymin=e[1]-n*r[1],t.xmax=e[0]+n*r[0],t.ymax=e[1]+n*r[1],t.spatialReference=s.spatialReference,t}}();function uFe(e,t,i,r,s){return MD(e,t,i.center),e.scale=CC(i,r),s?.constraints?.constrain(e),e}function cFe(e,t,i,r){return a7(e,t,i,r),t7(e,e)}const Ole=function(){const e=fr();return function(t,i,r){return e7(t,dFe(t,i),aFe(e,i,r))}}(),hFe=function(){const e=Jh(),t=fr();return function(i,r,s,n){const o=wb(r),a=n7(r);return xs(t,o,o),Mle(e,t),$C(e,e,a),lS(e,e,Ole(t,s,n)),lS(e,e,[0,n.top-n.bottom]),xs(i,e[4],e[5])}}();function wb(e){return e.scale*Ple(e.targetGeometry?.spatialReference)}function Ple(e){return e!=null&&Kn(e)?1/(Rle(e)*$le*Ale):1}function n7(e){return N8(e.rotation)||0}function pFe(e){return Kn(e)?Rle(e)*$le*Ale:1}function dFe(e,t){return Mx(e,t,.5)}const o7=function(){const e=fr(),t=fr(),i=fr();return function(r,s,n,o,a,l){return _le(e,s),Mx(t,n,.5*l),xs(i,1/o*l,-1/o*l),r7(r,t),a&&$C(r,r,a),i7(r,r,i),lS(r,r,e),r}}(),a7=function(){const e=fr();return function(t,i,r,s){const n=wb(i),o=n7(i);return s7(e,i.targetGeometry),o7(t,e,r,n,o,s)}}(),fFe=function(){const e=fr();return function(t,i,r,s){const n=wb(i);return s7(e,i.targetGeometry),o7(t,e,r,n,0,s)}}();function Lle(e){const t=Cn(e);return t?t.valid[1]-t.valid[0]:0}function mFe(e,t){return Math.round(Lle(e)/t)}const yFe=function(){const e=fr(),t=fr(),i=[0,0,0];return function(r,s,n){aS(e,r,s),ED(e,e),aS(t,r,n),ED(t,t),xle(i,e,t);let o=Math.acos(Sle(e,t)/(W3(e)*W3(t)))*sFe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),gFe=function(){const e=fr();return function(t,i,r,s){const n=t.targetGeometry;return An(t,i),hFe(e,i,r,s),n.x+=e[0],n.y+=e[1],t}}(),MD=function(e,t,i){An(e,t);const r=e.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e},vFe=function(){const e=fr();return function(t,i,r,s,n){n||(n="center"),e7(e,r,s),Mx(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":xs(e,0,0);break;case"left":xs(e,-o,0);break;case"top":xs(e,0,a);break;case"right":xs(e,o,0);break;case"bottom":xs(e,0,-a);break;case"top-left":xs(e,-o,a);break;case"bottom-left":xs(e,-o,-a);break;case"top-right":xs(e,o,a);break;case"bottom-right":xs(e,o,-a)}return RC(t,i,e),t}}();function ugt(e,t,i){return An(e,t),e.rotation+=i,e}function bFe(e,t,i){return An(e,t),e.rotation=i,e}const wFe=function(){const e=fr();return function(t,i,r,s,n){return An(t,i),isNaN(r)||r===0||(kle(e,s,i,n),t.scale=i.scale*r,Dle(e,e,t,n),RC(t,t,xs(e,e[0]-s[0],s[1]-e[1]))),t}}();function pW(e,t,i){return An(e,t),e.scale=i,e}const Nle=function(){const e=fr();return function(t,i,r,s,n,o){return An(t,i),isNaN(r)||r===0||(kle(e,n,i,o),t.scale=i.scale*r,t.rotation+=s,Dle(e,e,t,o),RC(t,t,xs(e,e[0]-n[0],n[1]-e[1]))),t}}(),cgt=function(){const e=fr(),t=fr();return function(i,r,s,n,o,a,l){return Ole(t,a,l),gle(e,o,t),n?Nle(i,r,s,n,e,a):wFe(i,r,s,e,a)}}(),kle=function(){const e=Jh();return function(t,i,r,s){return Yu(t,i,cFe(e,r,s,1))}}(),Dle=function(){const e=Jh();return function(t,i,r,s){return Yu(t,i,a7(e,r,s,1))}}(),RC=function(){const e=fr(),t=Jh();return function(i,r,s){An(i,r);const n=wb(r),o=i.targetGeometry;return Ele(t,n7(r)),i7(t,t,Ex(n,n)),Yu(e,s,t),o.x+=e[0],o.y+=e[1],i}}();function Fle(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function _Fe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function SFe(e,t,i,r,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=i,o[3]=r,o[4]=s,o[5]=n,o}function xFe(e,t){return new Float32Array(e,t,6)}function jle(e,t,i,r){const s=t[r],n=t[r+1];e[r]=i[0]*s+i[2]*n+i[4],e[r+1]=i[1]*s+i[3]*n+i[5]}function TFe(e,t,i,r=0,s=0,n=2){const o=s||t.length/n;for(let a=r;a<o;a++)jle(e,t,i,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:_Fe,create:Fle,createView:xFe,fromValues:SFe,transform:jle,transformMany:TFe},Symbol.toStringTag,{value:"Module"}));function EFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function MFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ule(e,t,i,r,s,n,o,a,l,u){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function Vle(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function IFe(e,t){if(e===t){const i=t[1],r=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=r,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function AFe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=h*o-a*u,f=-h*n+a*l,m=u*n-o*l;let g=i*p+r*f+s*m;return g?(g=1/g,e[0]=p*g,e[1]=(-h*r+s*u)*g,e[2]=(a*r-s*o)*g,e[3]=f*g,e[4]=(h*i-s*l)*g,e[5]=(-a*i+s*n)*g,e[6]=m*g,e[7]=(-u*i+r*l)*g,e[8]=(o*i-r*n)*g,e):null}function $Fe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return e[0]=o*h-a*u,e[1]=s*u-r*h,e[2]=r*a-s*o,e[3]=a*l-n*h,e[4]=i*h-s*l,e[5]=s*n-i*a,e[6]=n*u-o*l,e[7]=r*l-i*u,e[8]=i*o-r*n,e}function CFe(e){const t=e[0],i=e[1],r=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*n-o*l)+i*(-u*s+o*a)+r*(l*s-n*a)}function l7(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],p=t[8],f=i[0],m=i[1],g=i[2],b=i[3],w=i[4],S=i[5],T=i[6],x=i[7],_=i[8];return e[0]=f*r+m*o+g*u,e[1]=f*s+m*a+g*h,e[2]=f*n+m*l+g*p,e[3]=b*r+w*o+S*u,e[4]=b*s+w*a+S*h,e[5]=b*n+w*l+S*p,e[6]=T*r+x*o+_*u,e[7]=T*s+x*a+_*h,e[8]=T*n+x*l+_*p,e}function ID(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],p=t[8],f=i[0],m=i[1];return e[0]=r,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=f*r+m*o+u,e[7]=f*s+m*a+h,e[8]=f*n+m*l+p,e}function Gle(e,t,i){const r=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],p=t[8],f=Math.sin(i),m=Math.cos(i);return e[0]=m*r+f*o,e[1]=m*s+f*a,e[2]=m*n+f*l,e[3]=m*o-f*r,e[4]=m*a-f*s,e[5]=m*l-f*n,e[6]=u,e[7]=h,e[8]=p,e}function RFe(e,t,i){const r=i[0],s=i[1],n=i[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function OFe(e,t,i){const r=i[0],s=i[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function PFe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function LFe(e,t){const i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function NFe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function kFe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function DFe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=i+i,a=r+r,l=s+s,u=i*o,h=r*o,p=r*a,f=s*o,m=s*a,g=s*l,b=n*o,w=n*a,S=n*l;return e[0]=1-p-g,e[3]=h-S,e[6]=f+w,e[1]=h+S,e[4]=1-u-g,e[7]=m-b,e[2]=f-w,e[5]=m+b,e[8]=1-u-p,e}function FFe(e,t){const i=t[0],r=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10],p=h*o-a*u,f=-h*n+a*l,m=u*n-o*l,g=i*p+r*f+s*m;if(!g)return null;const b=1/g;return e[0]=p*b,e[1]=(-h*r+s*u)*b,e[2]=(a*r-s*o)*b,e[3]=f*b,e[4]=(h*i-s*l)*b,e[5]=(-a*i+s*n)*b,e[6]=m*b,e[7]=(-u*i+r*l)*b,e[8]=(o*i-r*n)*b,e}function jFe(e,t){const i=t[0],r=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15],T=i*a-r*o,x=i*l-s*o,_=i*u-n*o,M=r*l-s*a,I=r*u-n*a,A=s*u-n*l,C=h*b-p*g,R=h*w-f*g,O=h*S-m*g,k=p*w-f*b,L=p*S-m*b,V=f*S-m*w;let J=T*V-x*L+_*k+M*O-I*R+A*C;return J?(J=1/J,e[0]=(a*V-l*L+u*k)*J,e[1]=(l*O-o*V-u*R)*J,e[2]=(o*L-a*O+u*C)*J,e[3]=(s*L-r*V-n*k)*J,e[4]=(i*V-s*O+n*R)*J,e[5]=(r*O-i*L-n*C)*J,e[6]=(b*A-w*I+S*M)*J,e[7]=(w*_-g*A-S*x)*J,e[8]=(g*I-b*_+S*T)*J,e):null}function UFe(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function VFe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function GFe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function BFe(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function Ble(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function zFe(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function qFe(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e[3]=t[3]+i[3]*r,e[4]=t[4]+i[4]*r,e[5]=t[5]+i[5]*r,e[6]=t[6]+i[6]*r,e[7]=t[7]+i[7]*r,e[8]=t[8]+i[8]*r,e}function HFe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function WFe(e,t){const i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=t[0],f=t[1],m=t[2],g=t[3],b=t[4],w=t[5],S=t[6],T=t[7],x=t[8],_=to();return Math.abs(i-p)<=_*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(r-f)<=_*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(s-m)<=_*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=_*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-b)<=_*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=_*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-S)<=_*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-T)<=_*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-x)<=_*Math.max(1,Math.abs(h),Math.abs(x))}function JFe(e){const t=to(),i=e[0],r=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return Math.abs(1-(i*i+n*n+l*l))<=t&&Math.abs(1-(r*r+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+h*h))<=t}const ZFe=l7,YFe=Ble;Object.freeze(Object.defineProperty({__proto__:null,add:BFe,adjoint:$Fe,copy:MFe,determinant:CFe,equals:WFe,exactEquals:HFe,frob:GFe,fromMat2d:kFe,fromMat4:EFe,fromQuat:DFe,fromRotation:LFe,fromScaling:NFe,fromTranslation:PFe,identity:Vle,invert:AFe,isOrthoNormal:JFe,mul:ZFe,multiply:l7,multiplyScalar:zFe,multiplyScalarAndAdd:qFe,normalFromMat4:jFe,normalFromMat4Legacy:FFe,projection:UFe,rotate:Gle,scale:RFe,scaleByVec2:OFe,set:Ule,str:VFe,sub:YFe,subtract:Ble,translate:ID,transpose:IFe},Symbol.toStringTag,{value:"Module"}));function gI(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function KFe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function XFe(e,t,i,r,s,n,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=l,u}function QFe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:KFe,create:gI,createView:QFe,fromValues:XFe},Symbol.toStringTag,{value:"Module"}));function zle(){return new Float32Array(2)}function e8e(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function M1(e,t){const i=new Float32Array(2);return i[0]=e,i[1]=t,i}function t8e(e,t){return new Float32Array(e,t,2)}function qle(){return zle()}function Hle(){return M1(1,1)}function Wle(){return M1(1,0)}function Jle(){return M1(0,1)}const i8e=qle(),r8e=Hle(),s8e=Wle(),n8e=Jle();Object.freeze(Object.defineProperty({__proto__:null,ONES:r8e,UNIT_X:s8e,UNIT_Y:n8e,ZEROS:i8e,clone:e8e,create:zle,createView:t8e,fromValues:M1,ones:Hle,unitX:Wle,unitY:Jle,zeros:qle},Symbol.toStringTag,{value:"Module"}));function o8e(e){return e instanceof Float32Array&&e.length>=2}function a8e(e){return Array.isArray(e)&&e.length>=2}function mR(e){return o8e(e)||a8e(e)}var AD;const kc=[0,0];let fh=AD=class extends ae{constructor(e){super(e),this._viewpoint2D={center:fr(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new bt,this.id=0,this.inverseTransform=Jh(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Jh(),this.transformNoRotation=Jh(),this.displayMat3=gI(),this.displayViewMat3=gI(),this.viewMat3=gI(),this.viewMat2d=Fle(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,i=e.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=i.spatialReference}this._update()}get visibleArea(){const[e,t]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,t),this.toMap([0,0],e,t),this.toMap([0,0],e,0)]}copy(e){const t=this.size,i=this.viewpoint;return i&&t?(this.viewpoint=An(i,e.viewpoint),this._set("size",Zv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new AD({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,i){return mR(t)?Yu(e,t,this.inverseTransform):(kc[0]=t,kc[1]=i,Yu(e,kc,this.inverseTransform))}toScreen(e,t,i){return mR(t)?Yu(e,t,this.transform):(kc[0]=t,kc[1]=i,Yu(e,kc,this.transform))}toScreenNoRotation(e,t,i){return mR(t)?Yu(e,t,this.transformNoRotation):(kc[0]=t,kc[1]=i,Yu(e,kc,this.transformNoRotation))}wrapMapCoordinate(e,t){Zv(e,t);const[i]=t,[r]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=Lle(n)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(i<o||i>a)&&(e[0]=w9(i,r,n)),e}getScreenTransform(e,t){const{center:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size");return o7(e,i,s,t,0,r),e}_update(){const{center:e,spatialReference:t,scale:i,rotation:r}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new eu({targetGeometry:new Ve(e[0],e[1],t),scale:i,rotation:r});if(this._set("viewpoint",o),!n||!t||!i)return;this.resolution=wb(o),this.rotation=r,this.scale=i,this.spatialReference=t,Zv(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;Ule(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=Vle(this.viewMat3),h=M1(n[0]/2,n[1]/2),p=M1(-n[0]/2,-n[1]/2),f=N8(r);ID(u,u,h),Gle(u,u,f),ID(u,u,p),l7(this.displayViewMat3,this.displayMat3,u);const m=r7(this.viewMat2d,h);return $C(m,m,f),lS(m,m,p),lFe(this.extent,o,n),a7(this.transform,o,n,s),t7(this.inverseTransform,this.transform),fFe(this.transformNoRotation,o,n,s),this.worldScreenWidth=mFe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};c([d({readOnly:!0})],fh.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],fh.prototype,"pixelRatio",null),c([d({json:{write:!0}})],fh.prototype,"size",null),c([d()],fh.prototype,"spatialReference",void 0),c([d({type:eu,json:{write:!0}})],fh.prototype,"viewpoint",null),c([d({readOnly:!0})],fh.prototype,"visibleArea",null),fh=AD=c([F("esri.views.2d.ViewState")],fh);const dW=fh;var $D,CD;let Lh=$D=class extends Je{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new $D({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Lh.prototype,"left",void 0),c([d()],Lh.prototype,"top",void 0),c([d()],Lh.prototype,"right",void 0),c([d()],Lh.prototype,"bottom",void 0),Lh=$D=c([F("esri.views.2d.PaddedViewState.Padding")],Lh);let z0=CD=class extends dW{constructor(...e){super(...e),this.paddedViewState=new dW,this._updateContent=(()=>{const t=fr();return()=>{const i=this._get("size"),r=this._get("padding");if(!i||!r)return;const s=this.paddedViewState;xs(t,r.left+r.right,r.top+r.bottom),aS(t,i,t),Zv(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(at(()=>[this.size,this.padding],()=>this._updateContent(),ns)),this.padding=new Lh,this.size=[0,0]}set padding(e){this._set("padding",e||new Lh)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=e;const i=this._get("padding");i&&(t=gFe(e.clone(),e,this._get("size"),i));const{targetGeometry:r,rotation:s,scale:n}=t,{x:o,y:a,spatialReference:l}=r,u=this._viewpoint2D;u.center[0]=o,u.center[1]=a,u.rotation=s,u.scale=n,u.spatialReference=l,this._update()}}clone(){return new CD({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],z0.prototype,"paddedViewState",void 0),c([d({type:Lh})],z0.prototype,"padding",null),c([d()],z0.prototype,"viewpoint",null),z0=CD=c([F("esri.views.2d.PaddedViewState")],z0);const u7=z0;function ay(e,t,i,r){const s=3*e,n=3*(i-e)-s,o=1-s-n,a=3*t,l=3*(r-t)-a,u=1-a-l;function h(g){return((o*g+n)*g+s)*g}function p(g){return((u*g+l)*g+a)*g}function f(g){return(3*o*g+2*n)*g+s}function m(g,b){let w,S,T,x,_,M;for(T=g,M=0;M<8;M++){if(x=h(T)-g,Math.abs(x)<b)return T;if(_=f(T),Math.abs(_)<1e-6)break;T-=x/_}if(w=0,S=1,T=g,T<w)return w;if(T>S)return S;for(;w<S;){if(x=h(T),Math.abs(x-g)<b)return T;g>x?w=T:S=T,T=.5*(S-w)+w}return T}return function(g,b=1e-6){return p(m(g,b))}}const l8e=/^cubic-bezier\((.*)\)/,Gu={};function u8e(e){let t=Gu[e]||null;if(!t){const i=l8e.exec(e);if(i){const r=i[1].split(",").map(s=>parseFloat(s.trim()));r.length!==4||r.some(s=>isNaN(s))||(t=ay.apply(ay,r))}}return t}Gu.ease=ay(.25,.1,.25,1),Gu.linear=ay(0,0,1,1),Gu.easeIn=Gu["ease-in"]=ay(.42,0,1,1),Gu.easeOut=Gu["ease-out"]=ay(0,0,.58,1),Gu.easeInOut=Gu["ease-in-out"]=ay(.42,0,.58,1);let fW=class{constructor(t){this._view=t,this.viewpoint=new eu({targetGeometry:new Ve,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,i]=this._view.size;return Math.sqrt(t*t+i*i)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Ple(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(t,i){i.pan=KQ(this.center,t.center);let r=Math.abs(t.rotation-this.rotation);r=r>=180?360-r:r,i.rotate=QS(r),i.sourceZoom=this.scale,i.targetZoom=t.scale}interpolate(t,i,r){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=_w(t.center.x,i.center.x,s),l.y=_w(t.center.y,i.center.y,s),this.viewpoint.scale=_w(t.scale,i.scale+a,o);let u=t.rotation;const h=i.rotation;Math.abs(h-u)>=180&&(u+=360*(u<h?1:-1)),this.viewpoint.rotation=_w(u,h,n)}copyFrom(t){An(this.viewpoint,t.viewpoint),this._view=t.view}};const Zle=e=>e*e,c8e=e=>1-Zle(1-e),h8e=e=>2**(10*(e-1)),p8e=e=>1-h8e(1-e);function d8e(e){const t=2*(e-Math.sqrt((e-1)*e)),i=t/2/e;return r=>r<i?e*r*r:t*r-t+1}function f8e(e,t){return(i,r)=>i<t?t*e(i/t,r):1-e((1-i)/(1-t),r)*(1-t)}const mW=f8e(d8e(1),.5);let m8e=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const uS={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Yle={...uS,maxDuration:4e3};let y8e=class Kle{constructor(t){this._createCamera=t,this.compared=new m8e,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:uS.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new Kle(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,i,r){this.source!==t&&this.source.copyFrom(t),this.target!==i&&this.target.copyFrom(i),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??uS.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const i=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/i}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>to()}get hasFov(){return Math.abs(this.compared.fov)>to()}get hasRotate(){return this.compared.rotate>to()}},g8e=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},v8e=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,i)=>t+i.time,0)}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),t*=this.time;let r=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],u=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,i),n.hasPan&&!isNaN(i.pan)&&isFinite(n.compared.pan)?i.pan=(r+u.compared.pan*i.pan)/n.compared.pan:i.pan=1,n.hasRotate&&!isNaN(i.rotate)&&isFinite(n.compared.rotate)?i.rotate=(s+u.compared.rotate*i.rotate)/n.compared.rotate:i.rotate=1,o&&!isNaN(i.zoom)&&isFinite(u.compared.targetZoom)){const{sourceZoom:h,targetZoom:p}=u.compared,f=i.zoom*(p-h)+h,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,b=Math.abs(p-m)>Math.abs(h-m)?p:h;i.zoomOffset=b-g,i.zoom=(f-m)/(b-m)}else i.zoom=1;return i}t-=l.time,r+=u.compared.pan,s+=u.compared.rotate}}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r)}},yR=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,i=t.compared,r=i.sourceZoom,s=i.targetZoom;this._zoomSign=r>s?1:-1,this._panPixelsAtSource=i.pan*t.source.pixelsPerPanAtZoom(r);const n=(t.source.pixelsPerRotate()+t.target.pixelsPerRotate())/2;this._rotatePixels=i.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom,{hasZoom:r,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;r&&(s&&(o=(i/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/i)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&s&&n){const u=o+a+o*a;this._zoomPixelFlow=o*a/u*l,this._panPixelFlow=a/u*l,this._rotatePixelFlow=o/u*l}else if(r&&s){const u=1+o;this._zoomPixelFlow=o/u*l,this._panPixelFlow=1/u*l}else if(r&&n){const u=1+a;this._zoomPixelFlow=a/u*l,this._rotatePixelFlow=1/u*l}else if(s&&n){const u=this._panPixelsAtSource/this._rotatePixels,h=1+u;this._panPixelFlow=u/h*l,this._rotatePixelFlow=1/h*l}else s?this._panPixelFlow=l:r?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const u=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=u,this._panPixelFlow/=u,this._rotatePixelFlow/=u}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/b8e:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,i=t*this._panPixelsAtSource;return Math.log(i*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const i=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(i*(i/r)**-t-i)/(r-i)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:i,segmentEnd:r}=this.definition;return i+t*(r-i)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const i=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(i*t*this._time)-1))/(i*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,i){t=Math.min(Math.max(t,0),1),i.zoom=this._interpolateComponentsZoom(t),i.pan=this._interpolateComponentsPan(t),i.rotate=this._interpolateComponentsRotate(t),i.zoomOffset=0,i.fov=this._interpolateComponentsFov(t)}};const b8e=QS(45);function w8e(e,t,i){const r=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(r);return-e.halfWindowSize*(i.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function _8e(e,t,i){const r=1/t,s=Math.log(e.compared.sourceZoom*r),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,u=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*r*n*o*l*u-e.halfWindowSize*s*n*o*l+e.halfWindowSize*s*n*o*u/(a*a)}function S8e(e,t,i){const r=t-e.compared.sourceZoom,s=1/r,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(i.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(r))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function x8e(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function T8e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function E8e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function M8e(e,t,i){return-e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function I8e(e,t,i){return e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function A8e(e,t,i){return-2*e.compared.pan*e.halfWindowSize*(i.ascensionFactor+i.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function $8e(e,t,i){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function C8e(e,t,i){const r=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-i.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*r*s*n*a+e.halfWindowSize*r*s*n*l/(o*o)+e.halfWindowSize*s*n*a*l/t}function R8e(e,t,i){const r=t-e.compared.targetZoom,s=1/r,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+i.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(r*r)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function O8e(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function P8e(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function L8e(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function N8e(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const i=Math.LN2*e.compared.pan,r=t,s=e.halfWindowPanAtZoom(r),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(i-s):n*(i+s)}function k8e(e,t){let i=D8e(e,t);const r={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=r.ascensionFactor===0,n=r.descensionFactor===0,o=s?x8e:w8e,a=s?T8e:_8e,l=s?E8e:S8e,u=n?O8e:$8e,h=n?P8e:C8e,p=n?L8e:R8e,f=_=>o(e,_,r)+M8e(e,_,r)+u(e,_,r),m=_=>a(e,_,r)+I8e(e,_,r)+h(e,_,r),g=_=>l(e,_,r)+A8e(e,_,r)+p(e,_,r);let b=f(i);const w=N8e(e);let S;const T=t.maximumIterations||20,x=t.maximumDistance!=null?t.maximumDistance:1/0;for(S=0;S<T;S++){const _=t.desiredSlope??1e-6;let M=m(i);Math.abs(M)>_&&(M+=_);const I=M/g(i);if(isNaN(I)||i>=x&&I<0){if(!isFinite(x))return null;i=x,b=f(i);break}if(i-=I,i<e.compared.sourceZoom||i<e.compared.targetZoom)return null;const A=f(i);if(Math.abs(A-b)/b<=.005)break;b=A}return b>w*(1-.3)||i<e.compared.sourceZoom||i<e.compared.targetZoom?null:i}function D8e(e,t){const i=Math.max(e.compared.sourceZoom,e.compared.targetZoom),r=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return r<i?t.maximumDistance!=null?i+(t.maximumDistance-i)/2:1.5*i:t.maximumDistance?Math.min(t.maximumDistance,r):r}let F8e=class extends v8e{constructor(t,i){super(),this._preallocSegments=[new yR,new yR,new yR],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,i)}update(t,i){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const r=i?.apex?k8e(t,i.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,i?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,i,r){t.interpolateComponentsAt(i,r),t===this._ascensionSegment?r.zoom=c8e(r.zoom):t===this._descensionSegment&&(r.zoom=Zle(r.zoom))}_updateWithApex(t,i){const[r,s,n]=this._preallocSegments,o=i?.ascensionFactor??.5,a=Math.min(1-o,i?.ascensionFactor!=null&&i.descensionFactor!=null?i.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=t,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=r.definition.segmentEnd,s.definition.segmentEnd=r.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const j8e=new g8e;let U8e=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=mW,this.definition=new y8e(t),this.path=new F8e}update(t,i,r){this.definition.update(t,i,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(Iye(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?mW:p8e)}cameraAt(t,i){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const r=this.path.interpolateComponentsAt(t,j8e);i.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(t){const i=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(r-i)}_applyTimeSettings(t,i){const r=i.speedFactor!=null?i.speedFactor:1,s=i.minDuration??uS.minDuration/r,n=i.maxDuration??uS.maxDuration/r;return t=i.duration!=null?i.duration:Math.min(Math.max(t/r,s),n)}};const yW=2e3,V8e=64;let G8e=class{constructor(t){this._view=t,this._animation=new U8e(()=>new fW(this._view)),this._current=new fW(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,i,r={}){An(this._current.viewpoint,t),An(this._source.viewpoint,t),An(this._target.viewpoint,i),this._animation.update(this._source,this._target,r)}applyRatio(t,i){this._animation.cameraAt(i,this._current),An(t,this._current.viewpoint)}},q0=class extends Je{constructor(t){super(t),this._animation=null,this._destinationViewState=new u7,this.updateFunction=null,this.easing=Gu.ease,this.viewpoint=new eu({targetGeometry:new Ve,scale:0,rotation:0}),this._updateTask=n1({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new G8e(t.view)}destroy(){this._updateTask=Yi(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,i,r){this.stop();const s=this.viewpoint;An(s,i);const n=(typeof r?.easing=="string"?u8e(r.easing):r?.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(i.scale,o.scale)*V8e,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??Yle.maxDuration,speedFactor:r?.speedFactor,easing:typeof n=="function"?l=>n(l):void 0}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,B8e(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const r=new TD({target:t.clone()}),s=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const i=this.animation;if(i&&i.state!==TD.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,s=this._transition.duration,n=s>0?r/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function B8e(e,t,i,r){if(t?.duration!=null)return!0;const{time:s,isLinear:n}=e,o=t?.speedFactor||1,a=t?.maxDuration??Yle.maxDuration/o;if(le("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",s),console.log("adjusted max duration:	",a),console.log("is linear:",n)),s>a)return le("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(n){const u=fr(),h=Ms(...r.toScreen(u,...i.center)),p=Ms(...i.toScreen(u,...r.center)),f=p!=null&&p.x>-(1.5-.5)*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-(1.5-.5)*i.size[1]&&p.y<(1.5+.5)*i.size[1],m=h!=null&&h.x>-(1.5-.5)*r.size[0]&&h.x<(1.5+.5)*r.size[0]&&h.y>-(1.5-.5)*r.size[1]&&h.y<(1.5+.5)*r.size[1];if(le("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,f),console.log(`start is within ${1.5} screens at dest view:`,m)),s>yW/o&&!f&&!m)return le("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${yW/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}c([d()],q0.prototype,"easing",void 0),c([d()],q0.prototype,"view",void 0),c([d()],q0.prototype,"viewpoint",void 0),q0=c([F("esri.views.2d.AnimationManager")],q0);const z8e=q0;var mn;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(mn||(mn={}));const Xle=Symbol("Yield");let q8e=class{constructor(){this._tasks=new Array,this._runningTasks=nS(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(this.length===0)return Xle;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.push(new gW(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}unshift(t,i,r){return++this._runningTasks.value,new Promise((s,n)=>this._tasks.unshift(new gW(s,n,t,i,r))).finally(()=>--this._runningTasks.value)}_process(t){if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const r=ya(i.signal);if(r&&!i.abortCallback)i.reject(Oi());else{const s=r?i.abortCallback?.(Oi()):i.callback(t);Ac(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(r){i.reject(r)}return!0}cancelAll(){const t=Oi();for(const i of this._tasks)if(i.abortCallback){const r=i.abortCallback(t);i.resolve(r)}else i.reject(t);this._tasks.length=0}},gW=class{constructor(t,i,r,s=void 0,n=void 0){this.resolve=t,this.reject=i,this.callback=r,this.signal=s,this.abortCallback=n}},S_=class extends Je{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],S_.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],S_.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),S_=c([F("esri.views.support.debugFlags")],S_);const H8e=new S_;function W8e(){return new J3.Scheduler}var Ut;(function(e){e.RESOURCE_CONTROLLER_IMMEDIATE="immediate",e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.LOD_RENDERER="LoD renderer",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="clouds generator",e.MAPVIEW_FETCH_QUEUE="mapview fetch queue",e.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",e.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",e[e.NONE=0]="NONE",e[e.TEST_PRIO=1]="TEST_PRIO"})(Ut||(Ut={}));const Ua=0,vW=new Map([[Ut.RESOURCE_CONTROLLER_IMMEDIATE,Ua],[Ut.RESOURCE_CONTROLLER,4],[Ut.SLIDE,Ua],[Ut.STREAM_DATA_LOADER,Ua],[Ut.ELEVATION_QUERY,Ua],[Ut.TERRAIN_SURFACE,1],[Ut.SURFACE_GEOMETRY_UPDATES,1],[Ut.LOD_RENDERER,2],[Ut.GRAPHICS_CORE,2],[Ut.I3S_CONTROLLER,2],[Ut.POINT_CLOUD_LAYER,2],[Ut.FEATURE_TILE_FETCHER,2],[Ut.CLOUDS_GENERATOR,2],[Ut.OVERLAY,4],[Ut.STAGE,4],[Ut.GRAPHICS_DECONFLICTOR,4],[Ut.FILTER_VISIBILITY,4],[Ut.SCALE_VISIBILITY,4],[Ut.FRUSTUM_VISIBILITY,4],[Ut.POINT_OF_INTEREST_FREQUENT,6],[Ut.POINT_OF_INTEREST_INFREQUENT,30],[Ut.LABELER,8],[Ut.FEATURE_QUERY_ENGINE,8],[Ut.FEATURE_TILE_TREE,16],[Ut.FEATURE_TILE_TREE_ACTIVE,Ua],[Ut.ELEVATION_ALIGNMENT,12],[Ut.ELEVATION_ALIGNMENT_SCENE,14],[Ut.TEXT_TEXTURE_ATLAS,12],[Ut.TEXTURE_UNLOAD,12],[Ut.LINE_OF_SIGHT_TOOL,16],[Ut.LINE_OF_SIGHT_TOOL_INTERACTIVE,Ua],[Ut.SNAPPING,Ua],[Ut.SHADOW_ACCUMULATOR,30],[Ut.MAPVIEW_FETCH_QUEUE,Ua],[Ut.MAPVIEW_LAYERVIEW_UPDATE,2],[Ut.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Ua]]);function bW(e){return vW.has(e)?vW.get(e):typeof e=="number"?e:1}const J8e=6.5,wW=1,Z8e=30,Y8e=1e3/30,K8e=100,_W=.9;var J3,Jf;(function(e){class t{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(n=>n.needsUpdate)}constructor(){this._updating=nS(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new k_("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new r,this._state=mn.INTERACTING,this._tasks=new Ud,this._runQueue=new Ud,this._load=0,this._idleStateCallbacks=new Ud,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=at(()=>H8e.SCHEDULER_LOG_SLOW_TASKS,n=>this._debug=n,Bs);for(const n of Object.keys(Ut))this.performanceInfo.tasks.set(Ut[n],new k_(Ut[n]))}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Yi(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(n){this._updatingChanged(),n&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(n,o){const a=new i(this,n,o);return this._tasks.push(a),this._updatingChanged(),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new k_(n)),a}registerIdleStateCallbacks(n,o){const a={idleBegin:n,idleEnd:o};this._idleStateCallbacks.push(a),this.state===mn.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===mn.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==mn.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(n){this._test&&(this._test.usedBudget=0),++this._frameNumber;let o=J8e,a=n.frameDuration,l=wW;switch(this.state){case mn.IDLE:o=0,a=Math.max(K8e,n.frameDuration),l=Z8e;break;case mn.INTERACTING:a=Math.max(Y8e,n.frameDuration);case mn.ANIMATING:}return a=a-n.elapsedFrameTime-o,this.state!==mn.IDLE&&a<wW&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case mn.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case mn.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n),this._updatingChanged()}_updateTask(n){this._tasks.forAll(o=>{o.name===n&&o.setPriority(n)})}_getState(n){if(this._runQueue.some(a=>a.name===n))return Jf.SCHEDULED;let o=Jf.IDLE;return this._tasks.forAll(a=>{a.name===n&&a.needsUpdate&&(a.schedulePriority<=1?o=Jf.READY:o!==Jf.READY&&(o=Jf.WAITING))}),o}_getRuntime(n){let o=0;return this._tasks.forAll(a=>{a.name===n&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&n.set(a.name,(n.get(a.name)||0)+1)}),n.size===0)return null;let o="";return n.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*_W+n*(1-_W)}_schedule(){for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Ua&&n.needsUpdate&&!this._runQueue.includes(n)&&n.blockFrame!==this._frameNumber&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Ua&&a.blockFrame!==this._frameNumber&&(n=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!n)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===Xle&&(a.blockFrame=this._frameNumber)}catch(u){xe.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u),a.blockFrame=this._frameNumber}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,Ut.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Ut))this._frameTaskTimes.set(Ut[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).push(o)),this.performanceInfo.total.push(n)}get test(){return this._test}}e.Scheduler=t;class i{get task(){return this._task.value}get updating(){return this._queue.running}constructor(n,o,a){this._scheduler=n,this.name=o,this.blockFrame=0,this.runtime=0,this._queue=new q8e,this._handles=new Z1,this._basePriority=bW(o),this.schedulePriority=this._basePriority,this._task=nS(a??this._queue),this._handles.add(vc(()=>this.task.running,l=>n.taskRunningChanged(l)))}remove(){this.processQueue(Qle),this._scheduler.removeTask(this),this.schedule=SW.schedule,this.reschedule=SW.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){if(this.name===n)return;this.name=n;const o=bW(n);this._basePriority!==Ua&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,o,a){return this._queue.push(n,o,a)}reschedule(n,o,a){return this._queue.unshift(n,o,a)}processQueue(n){return this._queue.runTask(n)}}class r{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=mn.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(n){return!this.done&&(n()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(n){this._enabled=n}reset(n,o){this._begin=this.now(),this._budget=n,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}e.Budget=r})(J3||(J3={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Jf||(Jf={}));const Qle=(()=>{const e=new J3.Budget;return e.enabled=!1,e})();let X8e=class{remove(){}processQueue(){}schedule(t,i,r){try{if(ya(i)){const s=Oi();return r?Promise.resolve(r(s)):Promise.reject(s)}return wO(t(Qle))}catch(s){return Promise.reject(s)}}reschedule(t,i,r){return this.schedule(t,i,r)}};const SW=new X8e;let Q8e=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=W8e(),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||Ac(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=i=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:s,labelManager:n,state:{id:o}}=this.view;r.forEach(this._updateLayerView,this),n!=null&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=mn.ANIMATING:this.view.interacting?this._scheduler.state=mn.INTERACTING:this._scheduler.state=mn.IDLE,this._scheduler.updateBudget(i)&&this._scheduler.frame()}}destroy(){this.stop(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new u7,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=at(()=>t.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=n1(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const i=this.view.state,r=t.lastUpdateId;r!=null&&(this.stationary||t.moving)||(t.moving=!0),r!==i.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=i.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}},vI=class extends Je{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,i){if(!t)return void xe.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new TD;this.view.animation=r,await b8(()=>this.view.ready,i);const s={...i,animate:i?.animate??!ole(),animationMode:i?.animationMode??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:h,allLayerViews:p}=this.view,f=oFe(t,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:h,allLayerViews:p,pickClosestTarget:i?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},s.animate?this._gotoAnimated(f,s):this._gotoImmediate(f,s)}_gotoImmediate(t,i){const r=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(wi(i),r!==this._gotoTask)throw new W("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(r,s,n,i)}_gotoAnimated(t,i){const r=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(wi(i),r!==this._gotoTask)throw new W("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,i),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,s,n,i)}_cancellableGoTo(t,i,r,s){const n=()=>t===this._gotoTask;return Dl(r,s).finally(()=>{n()&&(i.done||i.stop())})}};c([d({constructOnly:!0})],vI.prototype,"view",void 0),vI=c([F("esri.views.2d.GoToManager")],vI);function ki(){return Promise.all([ce(()=>import("./webglDeps-CHJXL6Ld.js"),__vite__mapDeps([165,73,72,126,166,128,1]),import.meta.url),ce(()=>import("./mapViewDeps-BA7GJ9gA.js"),__vite__mapDeps([167,1,74,75,76,77,71,72,73,49,78,43,168,128,83,169,166,91,170,115,114,82,171,106,80,81,113,165,126,172,86,173,70,12,33,174,124,122,108,125,175,176,84,79,177,178,179,180,181,182,121,183]),import.meta.url)])}const tw=()=>ki().then(()=>ce(()=>import("./TileLayerView2D-CG7CzoZW.js"),__vite__mapDeps([184,106,74,75,76,77,71,72,73,49,78,43,170,169,128,166,91,115,114,82,113,172,86,173,70,12,33,1,168,83,80,81,124,122,108,177,178,185,186,182,187,162,188,180,181,189,190,14,15,16,17,191,192]),import.meta.url)),Zf=()=>ki().then(()=>ce(()=>import("./FeatureLayerView2D-B2YOjOGO.js").then(e=>e.F),__vite__mapDeps([193,170,194,187,162,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,86,171,106,195,192,189]),import.meta.url)),xW={"base-dynamic":()=>ki().then(()=>ce(()=>import("./BaseDynamicLayerView2D-sAaOCzXn.js"),__vite__mapDeps([196,197,169,71,72,73,49,128,166,91,170,115,114,82,187,162,198,186,189,1]),import.meta.url)),"base-tile":tw,"bing-maps":tw,catalog:()=>ki().then(()=>ce(()=>import("./CatalogLayerView2D-B1CvLTPk.js"),__vite__mapDeps([199,187,170,162,1]),import.meta.url)),"catalog-dynamic-group":()=>ki().then(()=>ce(()=>import("./CatalogDynamicGroupLayerView2D-C89SnkxV.js"),__vite__mapDeps([200,187,170,162,1]),import.meta.url)),"catalog-footprint":()=>ki().then(()=>ce(()=>import("./CatalogFootprintLayerView2D-C1HOs0Iw.js"),__vite__mapDeps([201,193,170,194,187,162,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,86,171,106,195,192,189,1]),import.meta.url)),csv:Zf,"geo-rss":()=>ki().then(()=>ce(()=>import("./GeoRSSLayerView2D-BlHeDPxa.js"),__vite__mapDeps([202,187,170,162,179,180,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,177,70,12,33,1,178]),import.meta.url)),feature:Zf,geojson:Zf,parquet:Zf,graphics:()=>ki().then(()=>ce(()=>import("./GraphicsLayerView2D-CbBnD7ma.js"),__vite__mapDeps([203,187,170,162,179,180,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,177,70,12,33,1,178,195]),import.meta.url)),group:()=>ki().then(()=>ce(()=>import("./GroupLayerView2D-BIuZR21U.js"),__vite__mapDeps([204,187,170,162,1]),import.meta.url)),imagery:()=>ki().then(()=>ce(()=>import("./ImageryLayerView2D-BYDDKnf2.js"),__vite__mapDeps([205,206,73,128,49,169,71,72,166,91,170,115,114,82,187,162,177,74,75,76,77,78,43,70,12,33,1,168,83,178,188,180,181,182,197,186,198,98,194,192,189]),import.meta.url)),"imagery-tile":()=>ki().then(()=>ce(()=>import("./ImageryTileLayerView2D-Ru8iKdxz.js"),__vite__mapDeps([207,206,73,128,49,169,71,72,166,91,170,115,114,82,187,162,208,182,209,98,1,194,192,189]),import.meta.url)),kml:()=>ki().then(()=>ce(()=>import("./KMLLayerView2D-D86d-lM4.js"),__vite__mapDeps([210,211,186,170,197,169,71,72,73,49,128,166,91,115,114,82,187,162,179,180,181,74,75,76,77,78,43,182,168,83,177,70,12,33,1,178,98,174,165,126,124,122,108,173,106,125,208]),import.meta.url)),"knowledge-graph":()=>ki().then(()=>ce(()=>import("./KnowledgeGraphLayerView2D-Cpx2PEuo.js"),__vite__mapDeps([212,187,170,162,1]),import.meta.url)),"link-chart":()=>ki().then(()=>ce(()=>import("./KnowledgeGraphLayerView2D-Cpx2PEuo.js"),__vite__mapDeps([212,187,170,162,1]),import.meta.url)),"knowledge-graph-sublayer":Zf,"map-image":()=>ki().then(()=>ce(()=>import("./MapImageLayerView2D-D2Y1TZXG.js"),__vite__mapDeps([213,197,169,71,72,73,49,128,166,91,170,115,114,82,187,162,177,74,75,76,77,78,43,70,12,33,1,168,83,178,188,180,181,182,198,186,194,189,190,14,15,16,17,191,192]),import.meta.url)),"map-notes":()=>ki().then(()=>ce(()=>import("./MapNotesLayerView2D-DgmS4MSJ.js"),__vite__mapDeps([214,187,170,162,179,180,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,177,70,12,33,1,178]),import.meta.url)),media:()=>ki().then(()=>ce(()=>import("./MediaLayerView2D-CQp7XD4P.js"),__vite__mapDeps([215,1,216,178,53,106,74,75,76,77,71,72,73,49,78,43,170,169,128,166,91,115,114,82,113,172,86,173,70,12,33,168,83,80,81,124,122,108,177,176,84,217,187,162]),import.meta.url)),"ogc-feature":()=>ki().then(()=>ce(()=>import("./OGCFeatureLayerView2D-vvDDY9fW.js"),__vite__mapDeps([218,193,170,194,187,162,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,86,171,106,195,192,189,1]),import.meta.url)),"open-street-map":tw,"oriented-imagery":Zf,route:()=>ki().then(()=>ce(()=>import("./RouteLayerView2D-D-SWm0b_.js"),__vite__mapDeps([219,220,187,170,162,179,180,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,177,70,12,33,1,178]),import.meta.url)),stream:()=>ki().then(()=>ce(()=>import("./StreamLayerView2D-CM35_FbH.js"),__vite__mapDeps([221,193,170,194,187,162,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,86,171,106,195,192,189,1]),import.meta.url)),"subtype-group":()=>ki().then(()=>ce(()=>import("./SubtypeGroupLayerView2D-CdIcD5u1.js"),__vite__mapDeps([222,193,170,194,187,162,181,74,75,76,77,71,72,73,49,78,43,182,169,128,166,91,115,114,82,168,83,86,171,106,195,192,189,1]),import.meta.url)),tile:tw,"vector-tile":()=>ki().then(()=>ce(()=>import("./VectorTileLayerView2D-Dzu1vxGN.js"),__vite__mapDeps([223,113,77,175,106,83,76,73,128,114,169,71,72,49,166,91,170,115,82,182,32,116,117,187,162,189,1]),import.meta.url)),video:()=>ki().then(()=>ce(()=>import("./VideoLayerView2D-a8v0ftgx.js"),__vite__mapDeps([224,225,217,91,169,71,72,73,49,128,166,170,115,114,82,168,74,75,76,77,78,43,83,187,162,179,180,181,182,177,70,12,33,1,178]),import.meta.url)),wcs:()=>ki().then(()=>ce(()=>import("./ImageryTileLayerView2D-Ru8iKdxz.js"),__vite__mapDeps([207,206,73,128,49,169,71,72,166,91,170,115,114,82,187,162,208,182,209,98,1,194,192,189]),import.meta.url)),"web-tile":tw,wfs:Zf,wms:()=>ki().then(()=>ce(()=>import("./WMSLayerView2D-BFsJX4df.js"),__vite__mapDeps([226,197,169,71,72,73,49,128,166,91,170,115,114,82,187,162,198,186,189,194,1]),import.meta.url)),wmts:()=>ki().then(()=>ce(()=>import("./WMTSLayerView2D-CH80yv0E.js"),__vite__mapDeps([227,185,186,170,169,71,72,73,49,128,166,91,115,114,82,182,187,162,189,1]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,focusArea:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};function e9e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",i=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new W(`${i}:view-not-supported`,`${t} is not supported in 2D`)}const TW={hasLayerViewModule:e=>xW[e.type]!=null,importLayerView:e=>{const t=xW[e.type];if(t==null)throw e9e(e);return t(e)}};function t9e(e,t){const{spatialReference:i}=t,r=[t.x,t.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let h=0;h<u.length-1;h++){V1e(a,r,u,h);const p=AC(r,a);p<s&&(s=p,n=a[0],o=a[1])}return{coordinate:new Ve({x:n,y:o,spatialReference:i}),distance:s}}var RD;let ly=RD=class extends r8(Je){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Mf(this.geometry,this.spatialReference)}catch(e){return xe.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const i=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?KS(this.normalizedGeometry,i):AF(this.normalizedGeometry,i))return e;const{coordinate:r}=t9e(this.normalizedGeometry,i);return r&&(e.targetGeometry=r),e}clone(){return new RD({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};c([d({constructOnly:!0})],ly.prototype,"geometry",void 0),c([d({readOnly:!0})],ly.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],ly.prototype,"spatialReference",void 0),ly=RD=c([F("esri.views.2d.constraints.GeometryConstraint")],ly);var OD;let x_=OD=class extends r8(Je){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new OD({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],x_.prototype,"enabled",void 0),c([d()],x_.prototype,"rotationEnabled",void 0),x_=OD=c([F("esri.views.2d.constraints.RotationConstraint")],x_);const eue=x_;var PD;let mo=PD=class extends r8(Je){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:i,maxScale:r,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&r!==0&&i<r&&([i,r]=[r,i]),!t?.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",r);t=t.map(h=>h.clone()),t.sort((h,p)=>p.scale-h.scale),t.forEach((h,p)=>h.level=p);for(const h of t)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!u&&r>0&&r>=h.scale&&(a=e?e.level:-1,u=!0),e=h;s===-1&&(s=i===0?0:o),n===-1&&(n=r===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),i=t[s].scale,r=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",r)}constrain(e,t){if(t&&e.scale===t.scale)return e;const i=this.effectiveMinScale,r=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=r!==0&&e.scale<r,a=i!==0&&e.scale>i;if(o||a){const l=a?i:r;if(t&&n){const u=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*u,s.y=n.y+(s.y-n.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),i=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(i>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const i=Math.floor(e),r=Math.ceil(e);return t[i]+(e-i)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let i,r;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(i=t[s],r=t[s+1],r===e)return s+this.effectiveMinZoom+1;if(i>e&&r<e)return s+this.effectiveMinZoom+1-(e-r)/(i-r)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const i=Math.round(this.scaleToZoom(e));return this.zoomToScale(i-1)}clone(){return new PD({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,i)=>Math.abs(i-e)<=Math.abs(t-e)?i:t,this._scales[0])),this._lodByScale[e].scale}};c([d({readOnly:!0})],mo.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],mo.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],mo.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],mo.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],mo.prototype,"effectiveMaxScale",void 0),c([d()],mo.prototype,"lods",void 0),c([d()],mo.prototype,"minZoom",void 0),c([d()],mo.prototype,"maxZoom",void 0),c([d()],mo.prototype,"minScale",void 0),c([d()],mo.prototype,"maxScale",void 0),c([d()],mo.prototype,"snapToZoom",void 0),mo=PD=c([F("esri.views.2d.constraints.ZoomConstraint")],mo);const tue=mo,i9e={base:null,key:"type",typeMap:{extent:bt,polygon:Rs}};let xr=class extends Je{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Be}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new ly({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new eue({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),i=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===i&&t.minZoom===r&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new tue({lods:i,minZoom:r,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const i=this.effectiveMaxScale;return i===0||t>=i}canZoomOutTo(t){const i=this.effectiveMinScale;return i===0||t<=i}constrain(t,i){return this._zoom.constrain(t,i),this._rotation.constrain(t,i),this._geometry.constrain(t,i),this.customConstraints.forEach(r=>r.constrain(t,i)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(i=>i.applyPanConstraint?.(t)),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};c([d({readOnly:!0})],xr.prototype,"effectiveLODs",null),c([d({readOnly:!0})],xr.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],xr.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],xr.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],xr.prototype,"effectiveMaxZoom",null),c([d({types:i9e,value:null})],xr.prototype,"geometry",null),c([d({type:[xt]})],xr.prototype,"lods",void 0),c([d()],xr.prototype,"minScale",void 0),c([d()],xr.prototype,"maxScale",void 0),c([d()],xr.prototype,"minZoom",void 0),c([d()],xr.prototype,"maxZoom",void 0),c([d()],xr.prototype,"rotationEnabled",void 0),c([d()],xr.prototype,"snapToZoom",void 0),c([d({type:Be})],xr.prototype,"customConstraints",void 0),c([d()],xr.prototype,"view",void 0),c([d({readOnly:!0})],xr.prototype,"version",null),c([d({type:ly,readOnly:!0})],xr.prototype,"_geometry",null),c([d({type:eue})],xr.prototype,"_rotation",null),c([d({readOnly:!0,type:tue})],xr.prototype,"_zoom",null),xr=c([F("esri.views.2d.MapViewConstraints")],xr);const iue=xr;let of=class Jm{static getId(t,i,r,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${i}/${r}/${s}`}constructor(t,i,r,s){this.set(t,i,r,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,i=4095&this.col,r=63&this.level;return(3&this.world)<<30|i<<22|t<<8|r}acquire(t,i,r,s){this.set(t,i,r,s)}contains(t){const i=t.level-this.level;return i>=0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}containsChild(t){const i=t.level-this.level;return i>0&&this.row===t.row>>i&&this.col===t.col>>i&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Jm(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,i,r,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+i,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Jm(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,i,r){const s=this.clone();return s.col+=t,s.row+=i,r.normalizeKey(s),s}getChildKeys(){const t=this.level+1,i=this.row<<1,r=this.col<<1,s=this.world;return[new Jm(t,i,r,s),new Jm(t,i,r+1,s),new Jm(t,i+1,r,s),new Jm(t,i+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};of.pool=new pf(of,null,null,25,50);function Jg(e,t){return[e,t]}function Yf(e,t,i){return e[0]=t,e[1]=i,e}function r9e(e,t,i,r,s){return e[0]=t,e[1]=i,e[2]=r,e[3]=s,e}const gl=new of("0/0/0/0");let s9e=class rue{static create(t,i,r=null){const s=Cn(t.spatialReference),n=i.origin||Jg(t.origin.x,t.origin.y),o=Jg(t.size[0]*i.resolution,t.size[1]*i.resolution),a=Jg(-1/0,-1/0),l=Jg(1/0,1/0),u=Jg(1/0,1/0);r!=null&&(Yf(a,Math.max(0,Math.floor((r.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymax)/o[1]))),Yf(l,Math.max(0,Math.floor((r.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-r.ymin)/o[1]))),Yf(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:p}=i;let f,m,g,b;return!r&&h&&p&&(Yf(a,h[0],p[0]),Yf(l,h[1],p[1]),Yf(u,h[1]-h[0]+1,p[1]-p[0]+1)),t.isWrappable?(f=Jg(Math.ceil(Math.round((s.valid[1]-s.valid[0])/i.resolution)/t.size[0]),u[1]),m=!0,g=s.origin,b=s.valid):(f=u,m=!1),new rue(i.level,i.resolution,i.scale,n,a,l,u,o,f,m,g,b)}constructor(t,i,r,s,n,o,a,l,u,h,p,f){this.level=t,this.resolution=i,this.scale=r,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldSize=u,this.wrap=h,this._spatialReferenceOrigin=p,this._spatialReferenceValid=f}normalizeCol(t){if(!this.wrap)return t;const i=this.worldSize[0];return t<0?i-1-Math.abs((t+1)%i):t%i}normalizeKey(t){if(!this.wrap)return;const i=this.worldSize[0],r=t.col;r<0?(t.col=r+i,t.world-=1):r>=i&&(t.col=r-i,t.world+=1)}denormalizeCol(t,i){return this.wrap?this.worldSize[0]*i+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){const i=this.origin[0]+t*this.norm[0],r=this._spatialReferenceOrigin,s=this._spatialReferenceValid;return this.wrap&&r&&s?i===r[0]?s[0]:this.origin[0]===r[0]&&t===this.worldSize[0]?s[1]:i:i}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,i,r=!1){gl.set(i);const s=r?gl.col:this.denormalizeCol(gl.col,gl.world),n=gl.row;return r9e(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,i,r=!1){gl.set(i);const s=r?gl.col:this.denormalizeCol(gl.col,gl.world);return Array.isArray(t)?Yf(t,this.getXForColumn(s),this.getYForRow(gl.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(gl.row)),t}},cS=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:i,colFrom:r,colTo:s}of this.spans)for(let n=r;n<=s;n++){const o=t.getWorldForColumn(n);yield new of(t.level,i,t.normalizeCol(n),o)}}forEach(t,i){const{spans:r,lodInfo:s}=this,{level:n}=s;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++)t.call(i,n,o,s.normalizeCol(u),s.getWorldForColumn(u))}};cS.pool=new pf(cS);let gR=class{constructor(t,i,r){this.row=t,this.colFrom=i,this.colTo=r}};const Gi=new of("0/0/0/0");let n9e=class sue{static create(t,i){t[1]>i[1]&&([t,i]=[i,t]);const[r,s]=t,[n,o]=i,a=n-r,l=o-s,u=l!==0?a/l:0,h=(Math.ceil(s)-s)*u,p=(Math.floor(s)-s)*u;return new sue(r,Math.floor(s),Math.ceil(o),u,a<0?h:p,a<0?p:h,a<0?n:r,a<0?r:n)}constructor(t,i,r,s,n,o,a,l){this.x=t,this.ymin=i,this.ymax=r,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const qo=[[0,0],[0,0],[0,0],[0,0]],o9e=1e-6;let a9e=class{constructor(t,i=null,r=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=r&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>s9e.create(t,a,i));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,i,r=!1){Gi.set(i);const s=this._infoByLevel[Gi.level];return s?s.getTileBounds(t,Gi,r):t}getTileCoords(t,i,r=!1){Gi.set(i);const s=this._infoByLevel[Gi.level];return s?s.getTileCoords(t,Gi,r):t}getTileCoverage(t,i=192,r=!0,s="closest"){if(!r&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=cS.pool.acquire(n),a=this._wrap;let l,u,h,p=1/0,f=-1/0;const m=o.spans;qo[0][0]=qo[0][1]=qo[1][1]=qo[3][0]=-i,qo[1][0]=qo[2][0]=t.size[0]+i,qo[2][1]=qo[3][1]=t.size[1]+i;for(const S of qo)t.toMap(S,S),S[0]=n.getColumnForX(S[0]),S[1]=n.getRowForY(S[1]);const g=[];let b=3;for(let S=0;S<4;S++){if(qo[S][1]===qo[b][1]){b=S;continue}const T=n9e.create(qo[S],qo[b]);p=Math.min(T.ymin,p),f=Math.max(T.ymax,f),g[T.ymin]===void 0&&(g[T.ymin]=[]),g[T.ymin].push(T),b=S}if(p==null||f==null||f-p>100)return null;let w=[];for(l=p;l<f;){g[l]!=null&&(w=w.concat(g[l])),u=1/0,h=-1/0;for(let S=w.length-1;S>=0;S--){const T=w[S];u=Math.min(u,T.getLeftCol()),h=Math.max(h,T.getRightCol())}if(u=Math.floor(u),h=Math.floor(h),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const S=Math.floor(h/n.worldSize[0]);for(let T=Math.floor(u/n.worldSize[0]);T<=S;T++)m.push(new gR(l,Math.max(n.getFirstColumnForWorld(T),u),Math.min(n.getLastColumnForWorld(T),h)))}else m.push(new gR(l,u,h));else u>n.last[0]||h<n.first[0]||(u=Math.max(u,n.first[0]),h=Math.min(h,n.last[0]),m.push(new gR(l,u,h)));l+=1;for(let S=w.length-1;S>=0;S--){const T=w[S];T.ymax>=l?T.incrRow():w.splice(S,1)}}return o}getTileParentId(t){Gi.set(t);const i=this._infoByLevel[Gi.level],r=this._lodInfos.indexOf(i)-1;return r<0?null:(this._getTileIdAtLOD(Gi,this._lodInfos[r],Gi),Gi.id)}getTileResolution(t){const i=this._infoByLevel[typeof t=="object"?t.level:t];return i?i.resolution:-1}getTileScale(t){const i=this._infoByLevel[t.level];return i?i.scale:-1}intersects(t,i){Gi.set(i);const r=this._infoByLevel[Gi.level],s=t.lodInfo;if(s.resolution>r.resolution){this._getTileIdAtLOD(Gi,s,Gi);const o=s.denormalizeCol(Gi.col,Gi.world);for(const a of t.spans)if(a.row===Gi.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<r.resolution){const[o,a,l,u]=t.spans.reduce((b,w)=>(b[0]=Math.min(b[0],w.row),b[1]=Math.max(b[1],w.row),b[2]=Math.min(b[2],w.colFrom),b[3]=Math.max(b[3],w.colTo),b),[1/0,-1/0,1/0,-1/0]),h=r.denormalizeCol(Gi.col,Gi.world),p=s.getColumnForX(r.getXForColumn(h)),f=s.getRowForY(r.getYForRow(Gi.row)),m=s.getColumnForX(r.getXForColumn(h+1))-1,g=s.getRowForY(r.getYForRow(Gi.row+1))-1;return!(p>u||m<l||f>a||g<o)}const n=s.denormalizeCol(Gi.col,Gi.world);return t.spans.some(o=>o.row===Gi.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,i,r){if(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],this._wrap){const s=Cn(this.tileInfo.spatialReference),n=-r*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>i[0])return this._infoByScale[i[0]];for(let r=1;r<i.length-1;r++)if(t>i[r]+o9e)return this._infoByScale[i[r-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(t){const i=this.scales;return this._infoByScale[t]||(t=i.reduce((r,s)=>Math.abs(s-t)<Math.abs(r-t)?s:r,i[0])),this._infoByScale[t]}scaleToLevel(t){const i=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let r=i.length-1;r>=0;r--)if(t<i[r])return r===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[r]].level+(i[r]-t)/(i[r]-i[r+1]);return this._infoByScale[i[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,i,r){const s=this._infoByLevel[r.level];return t.set(r),i.resolution<s.resolution?null:(i.resolution===s.resolution||(t.level=i.level,t.col=Math.floor(r.col*s.resolution/i.resolution+.01),t.row=Math.floor(r.row*s.resolution/i.resolution+.01)),t)}},l9e=class{constructor(t,i){this.item=t,this.controller=i,this.promise=null}},u9e=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new mI,this._controllers=new mI,this._processingItems=new mI,this._pausedSignal=nS(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new A3(t.peeker),this.process=t.process;const i=t.scheduler;t.priority&&i&&(this._task=i.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Yi(this._schedule),this._task=Yi(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const i=this._controllers.get(t);i&&i.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(i=>t.push(i)),this._controllers.clear(),t.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((i,r)=>t(r))}get(t){const i=this._deferreds.get(t);return i?i.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,i){const r=this.get(t);if(r)return r;const s=new AbortController;let n=null;i&&(n=ha(i,()=>s.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),u.reject(Oi())},a=()=>{l.remove(),n?.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=sF(s.signal,o),u=Do();return this._deferreds.set(t,u),this._controllers.set(t,s),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){const t=this._queue.popLast();return t&&(this._deferreds.get(t)?.reject(Oi()),this._removeItem(t)),t}reset(){const t=Array.from(this._processingItems.values());this._processingItems.clear();for(const i of t)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=zS(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(i))}_processError(t,i){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(i))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let i;const r=new AbortController,s=new l9e(t,r);this._processingItems.set(t,s);try{i=this.process(t,r.signal)}catch(n){this._processError(s,n)}Ac(i)?(s.promise=i,i.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,i)}get test(){}};const EW=[0,0];let mh=class extends Je{constructor(t){super(t),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:t,process:i,scheduler:r,priority:s}=this;this._queue=new u9e({concurrency:t,scheduler:r,priority:s,process:(n,o)=>{const a=this._keyToItem.get(n);return i(a,{signal:o})},peeker:n=>this._peek(n)})}destroy(){this.clear(),this._queue=Wi(this._queue)}get length(){return this._queue?this._queue.length:0}abort(t){const i=typeof t=="string"?t:t.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}pause(){this._queue.pause()}push(t){const i=t.key.id;if(this._queue.has(i))return this._queue.get(i);const r=this._queue.push(i),s=this.tileInfoView.getTileScale(t.key),n=qS(this._tilesByScale,s,()=>new Set),o=()=>{n.delete(t.key),n.size===0&&this._tilesByScale.delete(s),this._keyToItem.delete(i)};return n.add(t.key),this._keyToItem.set(i,t),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(t){if(!this.state)return t.values().next().value;const i=new Set;for(const o of t)i.add(this._keyToItem.get(o).key);const r=this.state.scale;let s,n=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(LX(a,l=>i.has(l))){const l=Math.abs(o-r);l<n&&(s=a,n=l)}return this._getClosestTileKey(s,t).id}_getClosestTileKey(t,i){const r=this.tileInfoView,s=this.state.center;let n,o=Number.POSITIVE_INFINITY;for(const a of t)if(i.has(a.id)){r.getTileCoords(EW,a);const l=AC(EW,s);l<o&&(o=l,n=a)}return n}};c([d({constructOnly:!0})],mh.prototype,"concurrency",void 0),c([d({constructOnly:!0})],mh.prototype,"priority",void 0),c([d({constructOnly:!0})],mh.prototype,"process",void 0),c([d({constructOnly:!0})],mh.prototype,"scheduler",void 0),c([d()],mh.prototype,"state",void 0),c([d({constructOnly:!0})],mh.prototype,"tileInfoView",void 0),mh=c([F("esri.views.2d.tiling.TileQueue")],mh);const Pgt=mh;let c9e=class{constructor(t,i,r){this.maxSize=t,this._tileInfoView=i,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const i=this._tilePerId.get(t);if(!i)return;const r=i.key.level,s=this._tileKeysPerLevel[r];MW(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return i.visible=!0,i}add(t){t.visible=!1;const i=t.key,r=i.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,t);const s=i.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(i)}prune(t,i,r){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,i,r,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,i,r,t))}_pruneAroundCenterTile(t,i,r,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],u=r*o[1],h=[0,0],p=[0,0];for(n.sort((f,m)=>(h[0]=a.x+l*(f.col+.5),h[1]=a.y-u*(f.row+.5),p[0]=a.x+l*(m.col+.5),p[1]=a.y-u*(m.row+.5),H3(h,i)-H3(p,i)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--t===this.maxSize)break}return t}_removeTile(t){const i=this._tilePerId.get(t);this._removedFunc&&i&&this._removedFunc(i),MW(this._tilePerId,t)}};function MW(e,t){e.delete(t)}const Kf=new of(0,0,0,0),Dc=new Map,iw=[],vR=[];let Ngt=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new c9e(t.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:i,tileIndex:r}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!i&&(s>a||s<l))return this.tiles.length=0,void this.clear();const h=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!h)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:f}=h,{level:m}=f;this.tiles.length=0,r.forEach(S=>S.visible=!0);let g=0,b=0;if(p.length>0)for(const{row:S,colFrom:T,colTo:x}of p)for(let _=T;_<=x;_++){g++;const M=Kf.set(m,S,f.normalizeCol(_),f.getWorldForColumn(_)).id;let I=r.get(M);if(I)I.isReady?(Dc.set(M,I),b++):u||this._addParentTile(M,Dc);else{if(this._tileCache?.has(M)){if(I=this._tileCache.pop(M),this.tileIndex.set(M,I),I.isReady){Dc.set(M,I),b++;continue}}else I=this.acquireTile(Kf),this.tileIndex.set(M,I);u||this._addParentTile(M,Dc)}}const w=b===g;for(const[S,T]of r){if(Dc.has(S))continue;Kf.set(S);const x=this.tileInfoView.intersects(h,Kf),_=this.cachePolicy==="purge"?Kf.level!==m:Kf.level>m;!x||!u&&w?!_&&x||iw.push(T):T.isReady?_&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Kf,m)?iw.push(T):vR.push(T):_&&iw.push(T)}for(const S of vR)S.isReady&&Dc.set(S.key.id,S);for(const S of iw)this._tileCache?this._tileCache.add(S):this.releaseTile(S),r.delete(S.key.id);for(const S of Dc.values())this.tiles.push(S);for(const S of r.values())Dc.has(S.key.id)||(S.visible=!1);this._tileCache?.prune(m,n,o),cS.pool.release(h),vR.length=0,iw.length=0,Dc.clear()}clear(){const{tileIndex:t}=this;for(const i of t.values())this.releaseTile(i);t.clear()}refresh(t){for(const i of this.tileIndex.values())t(i);this._tileCache?.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,i){let r=t,s=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(s=this.tileIndex.get(r),s?.isReady){i.has(s.key.id)||i.set(s.key.id,s);break}}else if(this._tileCache?.has(r)&&(s=this._tileCache.pop(r),this.tileIndex.set(r,s),s?.isReady)){i.has(s.key.id)||i.set(s.key.id,s);break}}_hasReadyAncestor(t,i){const r=Mo();this.tileInfoView.getTileBounds(r,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=i&&s.key.level<t.level){const n=Mo();if(this.tileInfoView.getTileBounds(n,s.key,!0),ibe(n,r))return!0}return!1}},pn=class extends Je{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([at(()=>this.constraints?.version,i=>{this.constraints&&i&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},ns)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:i}=this.state.paddedViewState;return this.state.commitProperty("id"),new Ve({x:t[0],y:t[1],spatialReference:i})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void xe.getLogger(this).error(new W("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const r=this.viewpoint;MD(r,r,i),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void xe.getLogger(this).error(new W("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let i;try{i=this._project(t,this.state.spatialReference)}catch(s){return void xe.getLogger(this).error(new W("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const r=this.viewpoint;uFe(r,r,i,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const i=this.viewpoint;bFe(i,i,t),this.viewpoint=i}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const i=this.viewpoint;pW(i,i,t),this.viewpoint=i}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let i,r;try{i=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?r=new W("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(r=new W("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new W("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void xe.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const s=new eu({targetGeometry:new Ve,scale:0,rotation:0});An(s,i),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const i=this.constraints?.zoomToScale(t)??0;if(!i)return void this._set("zoom",-1);const r=this.viewpoint;pW(r,r,i),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:i,constraints:r}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),h=u!=null&&r!=null&&r.zoomToScale(u)||void 0;let p,f,m;const g=l?.rotation,b=l?.targetGeometry;b?.type==="extent"?p=b:b?.type==="point"&&(f=b,m=l?.scale);const w=n??p;return{center:s??f??w?.center,rotation:a??g,scale:(o??h??m??(w&&CC(w,[t[0]-i.left-i.right,t[1]-i.top-i.bottom])))||void 0}}startup(t,i,r,s){const n=t.targetGeometry;try{this._project(t,r)}catch(o){xe.getLogger(this).warn(new Fo("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:r,error:o})),t.targetGeometry=s||new Ve({x:0,y:0,spatialReference:r})}this.constraints?.fit(t),this._set("state",new u7({padding:this.padding,size:i,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,i],spatialReference:r,rotation:s,scale:n}=this.state.paddedViewState,o=new Ve({x:t,y:i,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){const i=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=i.scale;else{const l=i.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=l}const r=i.clone(),[s,n]=i.center;let o=null;try{o=this._project(new Ve({x:s,y:n,spatialReference:i.spatialReference}),t)}catch(l){TF()||xe.getLogger(this).warn(new Fo("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:t,error:l}))}o||(o=new Ve({x:0,y:0,spatialReference:t}));const a=MD(new eu({targetGeometry:new Ve,scale:0,rotation:0}),i.viewpoint,o);r.viewpoint=a;try{const u=[i.size[0]/2,i.size[1]/2],h=[u[0]+20,u[1]],p=i.toMap([0,0],h),{x:f,y:m}=this._project(new Ve({x:p[0],y:p[1],spatialReference:i.spatialReference}),t);p[0]=f,p[1]=m,r.toScreen(p,p);const g=yFe(u,p,h),b=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new Ve({x:0,y:0,spatialReference:t})):(a.scale*=b,a.scale>le("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,i){if(!this.ready)return;const r=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.slice();r.size=[t,i],vFe(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const i=[0,0],[r,s]=this.state.toMap(i,[t.x,t.y]),n=this.state.spatialReference;return new Ve({x:r,y:s,spatialReference:n})}toScreen(t,i){if(!this.ready)return null;const r=this._project(t,this.state.spatialReference),s=[r.x,r.y];return i?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Ms(s[0],s[1])}_project(t,i){const r=t?.targetGeometry||t;if(!i)return t;if(!r)return null;if(i.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Xi(i,r.spatialReference))return t;const s=Mf(r,i);if(!s)throw new W("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:i});return h9e(t)?(t.targetGeometry=s,t):s}};function h9e(e){return e?.declaredClass==="esri.Viewpoint"}c([d({type:Ve})],pn.prototype,"center",null),c([d()],pn.prototype,"constraints",void 0),c([d({type:bt})],pn.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],pn.prototype,"padding",null),c([d()],pn.prototype,"ready",void 0),c([d()],pn.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],pn.prototype,"resolution",null),c([d({type:Number})],pn.prototype,"rotation",null),c([d({type:Number})],pn.prototype,"scale",null),c([d({readOnly:!0})],pn.prototype,"state",void 0),c([d({type:eu})],pn.prototype,"viewpoint",null),c([d({readOnly:!0})],pn.prototype,"visibleArea",null),c([d()],pn.prototype,"zoom",null),pn=c([F("esri.views.2d.ViewStateManager")],pn);function c7(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let IW=class extends hs{constructor(t,i){super(!0),this._view=t,this.registerIncoming("double-click",i,r=>this._handleDoubleClick(r,i))}_handleDoubleClick(t,i){c7(t.data,"primary")&&(t.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},p9e=class extends hs{constructor(t,i,r){super(!0),this.view=t,this.pointerType=i,this.registerIncoming("double-tap-drag",r,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:i}=t,{pointerType:r}=i;if(r!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,u=this._startScale*l,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:h}=l;if(!h||!u)return void a.end();const p=l.snapScale(this._currentScale),f=(n.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},OC=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const i=t.data,r=i.pointers.size;switch(i.action){case"start":this._currentCount=r,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},d9e=class extends hs{constructor(t,i,r){super(!0),this.view=t,this.pointerAction=i,this.registerIncoming("drag",r,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new OC({start:(i,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(i,r)=>i===1&&c7(r.data,this.pointerAction)})}_handleDrag(t){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},f9e=class extends hs{constructor(t,i,r){super(!0),this._view=t,this.pointerAction=i;const s=this._view.mapViewNavigation;this._dragEventSeparator=new OC({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&c7(o.data,this.pointerAction)}),this.registerIncoming("drag",r,n=>this._dragEventSeparator.handle(n))}};function nue(e){const t=e[0],i=e[1],r=e[2];return Math.sqrt(t*t+i*i+r*r)}function m9e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function y9e(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e}function g9e(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function oue(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function aue(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function lue(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function v9e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function b9e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function w9e(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function _9e(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function S9e(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function x9e(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function T9e(e,t=0,i=1){return e[0]=Math.min(Math.max(e[0],t),i),e[1]=Math.min(Math.max(e[1],t),i),e[2]=Math.min(Math.max(e[2],t),i),e}function E9e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function uue(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function M9e(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function cue(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(i*i+r*r+s*s)}function hue(e,t){const i=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2];return i*i+r*r+s*s}function pue(e){const t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function I9e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function A9e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function LD(e,t){const i=t[0],r=t[1],s=t[2];let n=i*i+r*r+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function due(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $9e(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],l=i[2];return e[0]=s*l-n*a,e[1]=n*o-r*l,e[2]=r*a-s*o,e}function C9e(e,t,i){const r=t[0],s=t[1],n=t[2],o=i[0],a=i[1],l=i[2],u=s*l-n*a,h=n*o-r*l,p=r*a-s*o,f=Math.sqrt(u*u+h*h+p*p);return e[0]=u/f,e[1]=h/f,e[2]=p/f,e}function R9e(e,t,i,r){const s=t[0],n=t[1],o=t[2];return e[0]=s+r*(i[0]-s),e[1]=n+r*(i[1]-n),e[2]=o+r*(i[2]-o),e}function O9e(e,t,i,r,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),h=o*(3-2*n);return e[0]=t[0]*a+i[0]*l+r[0]*u+s[0]*h,e[1]=t[1]*a+i[1]*l+r[1]*u+s[1]*h,e[2]=t[2]*a+i[2]*l+r[2]*u+s[2]*h,e}function P9e(e,t,i,r,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,h=3*n*a,p=3*l*o,f=l*n;return e[0]=t[0]*u+i[0]*h+r[0]*p+s[0]*f,e[1]=t[1]*u+i[1]*h+r[1]*p+s[1]*f,e[2]=t[2]*u+i[2]*h+r[2]*p+s[2]*f,e}function L9e(e,t=1){const i=Y$,r=2*i()*Math.PI,s=2*i()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=s*t,e}function N9e(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=i[0]*r+i[4]*s+i[8]*n+i[12],e[1]=i[1]*r+i[5]*s+i[9]*n+i[13],e[2]=i[2]*r+i[6]*s+i[10]*n+i[14],e}function k9e(e,t,i){const r=t[0],s=t[1],n=t[2];return e[0]=r*i[0]+s*i[3]+n*i[6],e[1]=r*i[1]+s*i[4]+n*i[7],e[2]=r*i[2]+s*i[5]+n*i[8],e}function D9e(e,t,i){const r=i[0],s=i[1],n=i[2],o=i[3],a=t[0],l=t[1],u=t[2],h=s*u-n*l,p=n*a-r*u,f=r*l-s*a,m=s*f-n*p,g=n*h-r*f,b=r*p-s*h,w=2*o;return e[0]=a+h*w+2*m,e[1]=l+p*w+2*g,e[2]=u+f*w+2*b,e}function F9e(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0],n[1]=s[1]*Math.cos(r)-s[2]*Math.sin(r),n[2]=s[1]*Math.sin(r)+s[2]*Math.cos(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function j9e(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[2]*Math.sin(r)+s[0]*Math.cos(r),n[1]=s[1],n[2]=s[2]*Math.cos(r)-s[0]*Math.sin(r),e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function U9e(e,t,i,r){const s=[],n=[];return s[0]=t[0]-i[0],s[1]=t[1]-i[1],s[2]=t[2]-i[2],n[0]=s[0]*Math.cos(r)-s[1]*Math.sin(r),n[1]=s[0]*Math.sin(r)+s[1]*Math.cos(r),n[2]=s[2],e[0]=n[0]+i[0],e[1]=n[1]+i[1],e[2]=n[2]+i[2],e}function V9e(e,t){LD(AW,e),LD($W,t);const i=due(AW,$W);return i>1?0:i<-1?Math.PI:Math.acos(i)}const AW=yf(),$W=yf();function G9e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function B9e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function z9e(e,t){if(e===t)return!0;const i=e[0],r=e[1],s=e[2],n=t[0],o=t[1],a=t[2],l=to();return Math.abs(i-n)<=l*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function q9e(e,t,i){const r=i[0]-t[0],s=i[1]-t[1],n=i[2]-t[2];let o=r*r+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const H9e=oue,W9e=aue,J9e=lue,Z9e=cue,Y9e=hue,K9e=nue,X9e=pue;Object.freeze(Object.defineProperty({__proto__:null,abs:w9e,add:g9e,angle:V9e,bezier:P9e,ceil:v9e,clamp:T9e,copy:m9e,cross:$9e,crossAndNormalize:C9e,direction:q9e,dist:Z9e,distance:cue,div:J9e,divide:lue,dot:due,equals:z9e,exactEquals:B9e,floor:b9e,hermite:O9e,inverse:A9e,len:K9e,length:nue,lerp:R9e,max:x9e,min:S9e,mul:W9e,multiply:aue,negate:I9e,normalize:LD,random:L9e,rotateX:F9e,rotateY:j9e,rotateZ:U9e,round:E9e,scale:uue,scaleAndAdd:M9e,set:y9e,sign:_9e,sqrDist:Y9e,sqrLen:X9e,squaredDistance:hue,squaredLength:pue,str:G9e,sub:H9e,subtract:oue,transformMat3:k9e,transformMat4:N9e,transformQuat:D9e},Symbol.toStringTag,{value:"Module"}));function vl(e){let t=e*e;return e<0&&(t*=-1),t}function Q9e(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function e7e(e,t,i){const r=i,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(r.translation[0]=vl(s.axes[0]),r.translation[1]=vl(s.axes[1]),r.translation[2]=vl(s.buttons[7])-vl(s.buttons[6]),r.heading=vl(s.axes[2]),r.tilt=vl(s.axes[3])):n.deviceType==="spacemouse"&&(r.translation[0]=1.2*vl(s.axes[0]),r.translation[1]=1.2*vl(s.axes[1]),r.translation[2]=2*-vl(s.axes[2]),r.heading=1.2*vl(s.axes[5]),r.tilt=1.2*vl(s.axes[3])),r.tilt*=o,uue(r.translation,r.translation,a),r}function t7e(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let i7e=class extends hs{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Z1,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([at(()=>this._view.navigation.gamepad?.enabled,i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=n1({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},Bs)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const i=this._view.navigation.gamepad.device;i&&t.data.device!==i||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Q9e(this._transformation)):(this._currentDevice=t.data.device,e7e(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const i=this._transformation;if(t7e(i))return;const r=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=s7e*s*t;RC(r,r,[i.translation[0]*n,-i.translation[1]*n]);const o=1+i.translation[2]*n7e*t,a=this._view.constraints.rotationEnabled?-i.heading*r7e*t:0,l=this._view.size,u=[l[0]/2,l[1]];Nle(r,r,o,a,u,l);const h=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=h}};const r7e=.06,s7e=.7,n7e=6e-4;function fue(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),ti(()=>document.removeEventListener("visibilitychange",t))}let o7e=class extends hs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=fue(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const i=this._currentDirection!=null;if(t!=null){if(i||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else i&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},a7e=class extends hs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",r,s=>this._handleKeyUp(s)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=fue(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,i){const r=t.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),i)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var pv;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(pv||(pv={}));let l7e=class extends hs{constructor(t,i,r){super(!0),this.view=t,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",r,s=>this._handleKeyDown(s)),i.zoomIn.forEach(s=>this._keysToZoomAction[s]=pv.IN),i.zoomOut.forEach(s=>this._keysToZoomAction[s]=pv.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const i=t.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:r}=t.data;if(!(r in this._keysToZoomAction))return;const s=this._keysToZoomAction[r],{mapViewNavigation:n}=this.view;let o=null;switch(s){case pv.IN:o=n.zoomIn();break;case pv.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const u7e=.6;let c7e=class extends hs{constructor(t,i){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,r=>this._handleMouseWheel(r))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:r,y:s,deltaY:n}=t.data,o=1/u7e**(1/60*n),a=i.zoom(o,[r,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},h7e=class extends hs{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new OC({start:(r,s)=>{i.pinch.begin(this.view,s.data),s.stopPropagation()},update:(r,s)=>{i.pinch.update(this.view,s.data),s.stopPropagation()},end:(r,s)=>{i.pinch.end(this.view),s.stopPropagation()},condition:r=>r>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function CW(e){const t=e.native;return t?{buttons:t.buttons.map(i=>i.pressed?i.value||1:0),axes:t.axes.map(i=>f7e(i,e.axisThreshold))}:{buttons:[],axes:[]}}function p7e(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let i=0;i<e.axes.length;i++)if(e.axes[i]!==t.axes[i])return!1;for(let i=0;i<e.buttons.length;i++)if(e.buttons[i]!==t.buttons[i])return!1;return!0}function d7e(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function f7e(e,t){const i=Math.abs(e);return i<t?0:Math.sign(e)*(i-t)/(1-t)}let m7e=class{constructor(t,i){this._element=t,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,CW(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=r&&s,this.supported&&(RW(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const i=new Q9(t);i.deviceType!=="unknown"&&(this._inputDevices[t.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=n1({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),i=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!i;RW(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=CW(n),l=r||d7e(a);o&&(o.timestamp===s.timestamp||!o.active&&l||p7e(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(t,i,r){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!r)return;const o=!n&&r?"start":n&&r?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:i,active:r},this._callback&&this._callback({device:this._inputDevices[t.index],state:i,action:o})}};function y7e(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function RW(e){for(const t of navigator.getGamepads())y7e(t)&&e(t)}const OW=le("edge"),g7e=le("chrome"),v7e=le("ff"),b7e=le("safari"),PW="esri-view-surface",Zg={touchNone:`${PW}--touch-none`,touchPan:`${PW}--touch-pan`};let mue=class yue{constructor(t,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new m7e(t,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=Wi(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const i in this._active)if(!t||!t.has(i)){const r=this._active[i];this._element.removeEventListener(bR[i],r),delete this._active[i]}t&&t.forEach(i=>{if(!this._active[i]&&bR[i]){const r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(bR[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,i){i?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Zg.touchNone:Zg.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Zg.touchPan:Zg.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Zg.touchNone),this._element.classList.remove(Zg.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,i){const r=rle(this._element,t);return yue.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(t,i){const{key:r}=i;r&&t==="key-up"&&this._keyDownState.delete(r);const s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(t,r)}_handlePointerPreventDefault(t,i){const r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(t,r)}_getDeltaFromTrackpadOrMouseWheel(t){return t.shiftKey&&le("mac")&&t.deltaY===0?t.deltaX:t.deltaY}_handleMouseWheel(t,i){let r=this._getDeltaFromTrackpadOrMouseWheel(i);switch(i.deltaMode){case 0:OW&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}OW?r*=.7:g7e||b7e?r*=.6:v7e&&(r*=1.375);const s=100,n=Math.abs(r);n>s&&(r=r/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(t,o)}_handlePointerCaptureLost(t,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(t,i)}_handleDefault(t,i){const r={native:i};i.preventDefault(),this._callback(t,r)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};mue.test={disableSubpixelCoordinates:!1};const bR={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let w7e=class extends hs{constructor(){super(!0),this.registerIncoming("context-menu",t=>t.data.native.preventDefault())}};const Vs={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Z3(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function _7e(e,t){const i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)}function S7e(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Ms()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[x,_]=e,[M,I]=[_.x-x.x,_.y-x.y];return t.radius=Math.sqrt(M*M+I*I)/2,t.center.x=(x.x+_.x)/2,t.center.y=(x.y+_.y)/2,t}let i=0,r=0;for(let x=0;x<e.length;x++)i+=e[x].x,r+=e[x].y;i/=e.length,r/=e.length;const s=e.map(x=>x.x-i),n=e.map(x=>x.y-r);let o=0,a=0,l=0,u=0,h=0,p=0,f=0;for(let x=0;x<s.length;x++){const _=s[x],M=n[x],I=_*_,A=M*M;o+=I,a+=A,l+=_*M,u+=I*_,h+=A*M,p+=_*A,f+=M*I}const m=.5*(u+p),g=.5*(h+f),b=o*a-l*l,w=(m*a-g*l)/b,S=(o*g-l*m)/b,T=Ms(w+i,S+r);return{radius:Math.sqrt(w*w+S*S+(o+a)/e.length),center:T}}function Cy(e){const{native:t}=e,{pointerId:i,button:r,pointerType:s}=t;return s==="mouse"?`${i}:${r}`:`${s}`}let x7e=class extends hs{constructor(t=Vs.maximumDoubleClickDelay,i=Vs.maximumDoubleClickDistance,r=Vs.maximumDoubleTouchDelay,s=Vs.maximumDoubleTouchDistance,n=Y1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ms(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new OC({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Yi(t.doubleTapTimeout)})}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(t){const i=this._pointerState.get(t);i&&(i.doubleTapTimeout=Yi(i.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,i){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:s}=i,{center:n}=r;this._dragStartCenter=n;const o=wR("begin",Ms(0,0),r);this._doubleTapDrag.emit(o,void 0,s),i.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=wR("update",Ms(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:i,modifiers:r}=t,{center:s}=i,n=wR("end",Ms(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),i);this._doubleTapDrag.emit(n,void 0,r),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:i}=t,r=Cy(i),s=this._pointerState.get(r),{pointerType:n}=i.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(r),Z3(s.event.data,i)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:i}=t,{pointerType:r}=i.native,s=Cy(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function wR(e,t,i){const{button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=i;return{action:e,delta:t,button:r,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let T7e=class extends hs{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,i,r,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:s,pointers:E7e(this._activePointerMap),pointer:i,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(t){const i=t.native.pointerId,r=tE(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,s);const n=bI(s,gue(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(r)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const i=t.native.pointerId,r=this._activePointerMap.get(i);r?r.event=t:this._addPointer(t)}_removePointer(t){const i=tE(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(i)}_updatePointerAngles(t){const i=tE(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=bI(r,i)-t,r.lastAngle=bI(r,i)-t})}_emitEvent(t,i,r){const s=tE(this._activePointerMap);this._drag.emit(this._createPayload(t,i,s,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const i=t.data.native.pointerId,r=t.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const i=t.data,r=i.currentEvent,s=t.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,s)):(this._addPointer(r),this._emitEvent("added",r,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function gue(e){const t=[];return e.forEach(i=>{t.push(Ms(i.event.x,i.event.y))}),S7e(t)}function tE(e){const t=gue(e);let i=0;return e.forEach(r=>{let s=bI(r,t),n=s-r.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=r.lastAngle+n,r.lastAngle=s;const o=s-r.initialAngle;i+=o}),i/=e.size||1,{angle:i,radius:t.radius,center:t.center}}function E7e(e){const t=new Map;return e.forEach((i,r)=>t.set(r,i.event)),t}function bI(e,t){const i=e.event,r=i.x-t.center.x,s=i.y-t.center.y;return Math.atan2(s,r)}var LW;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(LW||(LW={}));let M7e=class extends hs{constructor(t=Vs.maximumDoubleClickDelay,i=Vs.maximumDoubleClickDistance,r=Vs.maximumDoubleTouchDelay,s=Vs.maximumDoubleTouchDistance,n=Y1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=Cy(i);if(!this._pointerState.has(r)){const s={downButton:i.native.button,x:i.x,y:i.y,immediateDoubleClick:null};this._pointerState.set(r,s),this.startCapturingPointer(i.native)}}_handlePointerUp(t){const i=t.data,r=Cy(i),s=this._pointerState.get(r);if(s&&s.downButton===i.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),Z3(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(i))):Z3(s,t.data)>o?this._removeState(i):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,i){const r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),r)}}_removeState(t){const i=Cy(t);this._pointerState.delete(i),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},I7e=class extends hs{constructor(t=Vs.maximumClickDelay,i=Vs.movementUntilMouseDrag,r=Vs.movementUntilPenDrag,s=Vs.movementUntilTouchDrag,n=Vs.holdDelay,o=Y1){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=r,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",a=>this._handlePointerDown(a)),this.registerIncoming("pointer-up",a=>this._handlePointerLoss(a,"pointer-up")),this.registerIncoming("pointer-capture-lost",a=>this._handlePointerLoss(a,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",a=>this._handlePointerLoss(a,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",a=>this._handlePointerMove(a)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Yi(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const i=t.data,r=i.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:i,previousEvent:i,startTimestamp:t.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(r,n),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const i=t.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.isDragging?this._pointerDrag.emit(iE("update",s,i),void 0,s.modifiers):_7e(i,s.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(t),s.previousEvent=i)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const i=t.data,r=i.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,r===s.startEvent.native.pointerId?this._pointerDrag.emit(iE("start",s,i)):this._pointerDrag.emit(iE("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,i){const r=t.data,s=r.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(iE("end",n,i==="pointer-up"?r:n.previousEvent),void 0,n.modifiers):i==="pointer-up"&&n.downButton===r.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(s),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function iE(e,t,i){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:i}}let A7e=class extends hs{constructor(t=Vs.maximumDoubleClickDelay,i=Vs.maximumDoubleClickDistance,r=Vs.maximumDoubleTouchDelay,s=Vs.maximumDoubleTouchDistance,n=Y1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=r,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",o=>this._handleImmediateClick(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Yi(t.doubleClickTimer))}get hasPendingInputs(){for(const t of this._pointerState.values())if(t.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(t,i){const r=this._pointerState.get(t);r&&(r.doubleClickTimer=Yi(r.doubleClickTimer),i&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const i=this._pointerState.get(t);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const i=t.data,{pointerType:r}=i.native,s=$7e(i);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Z3(o,i)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const i=Cy(t.data),r=this._pointerState.get(i);r&&(r.pointerDownCount+=1)}_startClick(t){const{data:i}=t,{native:{pointerType:r}}=i,s=Cy(i),n=r==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function $7e(e){const{pointerId:t,pointerType:i,button:r}=e.native;return i==="mouse"?`${t}:${r}`:`${i}`}const rE={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Zm=class extends Je{initialize(){const t=()=>this.view?.ready;this.addHandles([vc(()=>!t(),()=>this._disconnect()),vc(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(t){return this._inputManager?.isModifierKeyDown(t)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=Wi(this._inputManager)}_connect(){const t=this.view.surface,i=new mue(t,this.view.input),r=[new M7e,new I7e,new A7e,new T7e(this.view.navigation),new x7e],s=new ka({eventSource:i,recognizers:r});s.installHandlers("prevent-context-menu",[new w7e],zd.INTERNAL),s.installHandlers("navigation",[new h7e(this.view),new i7e(this.view),new c7e(this.view),new IW(this.view),new IW(this.view,[rE.counter]),new d9e(this.view,"primary"),new o7e(this.view,rE.pan),new l7e(this.view,rE.zoom),new a7e(this.view,rE.rotate),new f9e(this.view,"secondary"),new p9e(this.view,"touch")],zd.INTERNAL),this.view.viewEvents.connect(s),this._source=i,this._inputManager=s,at(()=>this.view?.navigation?.browserTouchPanEnabled,n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},Bs)}get test(){}};c([d()],Zm.prototype,"view",void 0),c([d()],Zm.prototype,"latestPointerType",null),c([d()],Zm.prototype,"latestPointerLocation",null),c([d()],Zm.prototype,"multiTouchActive",null),Zm=c([F("esri.views.2d.input.MapViewInputManager")],Zm);const C7e=Zm;function R7e(e,t,i,r,s){vue(e,t,i||0,r||e.length-1,s||O7e)}function vue(e,t,i,r,s){for(;r>i;){if(r-i>600){var n=r-i+1,o=t-i+1,a=Math.log(n),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(n-l)/n)*(o-n/2<0?-1:1);vue(e,t,Math.max(i,Math.floor(t-o*l/n+u)),Math.min(r,Math.floor(t+(n-o)*l/n+u)),s)}var h=e[t],p=i,f=r;for(rw(e,i,t),s(e[r],h)>0&&rw(e,i,r);p<f;){for(rw(e,p,f),p++,f--;s(e[p],h)<0;)p++;for(;s(e[f],h)>0;)f--}s(e[i],h)===0?rw(e,i,f):rw(e,++f,r),f<=t&&(i=f+1),t<=f&&(r=f-1)}}function rw(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function O7e(e,t){return e<t?-1:e>t?1:0}function Y3(e,t){if(!(this instanceof Y3))return new Y3(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function P7e(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function Yg(e,t){T_(e,0,e.children.length,t,e)}function T_(e,t,i,r,s){s||(s=H0(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<i;o++)n=e.children[o],E_(s,e.leaf?r(n):n);return s}function E_(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function NW(e,t){return e.minX-t.minX}function kW(e,t){return e.minY-t.minY}function _R(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function sE(e){return e.maxX-e.minX+(e.maxY-e.minY)}function L7e(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function N7e(e,t){var i=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-i)*Math.max(0,n-r)}function SR(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function nE(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function H0(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function DW(e,t,i,r,s){for(var n,o=[t,i];o.length;)(i=o.pop())-(t=o.pop())<=r||(n=t+Math.ceil((i-t)/r/2)*r,R7e(e,n,t,i,s),o.push(t,n,n,i))}Y3.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!nE(e,t))return i;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],nE(e,a=t.leaf?r(o):o)&&(t.leaf?i.push(o):SR(e,a)?this._all(o,i):l.push(o));t=l.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!nE(e,t))return!1;for(var r,s,n,o,a=[];t;){for(r=0,s=t.children.length;r<s;r++)if(n=t.children[r],nE(e,o=t.leaf?i(n):n)){if(t.leaf||SR(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var s=this.data;this.data=r,r=s}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=H0([]),this},remove:function(e,t){if(e==null)return this;for(var i,r,s,n,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],i=u.pop(),n=!0),o.leaf&&(s=P7e(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!SR(o,a)?r?(i++,o=r.children[i],n=!1):o=null:(l.push(o),u.push(i),i=0,r=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:NW,compareMinY:kW,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,r){var s,n=i-t+1,o=this._maxEntries;if(n<=o)return Yg(s=H0(e.slice(t,i+1)),this.toBBox),s;r||(r=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,r-1))),(s=H0([])).leaf=!1,s.height=r;var a,l,u,h,p=Math.ceil(n/o),f=p*Math.ceil(Math.sqrt(o));for(DW(e,t,i,f,this.compareMinX),a=t;a<=i;a+=f)for(DW(e,a,u=Math.min(a+f-1,i),p,this.compareMinY),l=a;l<=u;l+=p)h=Math.min(l+p-1,u),s.children.push(this._build(e,l,h,r-1));return Yg(s,this.toBBox),s},_chooseSubtree:function(e,t,i,r){for(var s,n,o,a,l,u,h,p;r.push(t),!t.leaf&&r.length-1!==i;){for(h=p=1/0,s=0,n=t.children.length;s<n;s++)l=_R(o=t.children[s]),(u=L7e(e,o)-l)<p?(p=u,h=l<h?l:h,a=o):u===p&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,s=i?e:r(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),E_(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);var n=this._chooseSplitIndex(i,s,r),o=H0(i.children.splice(n,i.children.length-n));o.height=i.height,o.leaf=i.leaf,Yg(i,this.toBBox),Yg(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(e,t){this.data=H0([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Yg(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,s,n,o,a,l,u,h;for(l=u=1/0,r=t;r<=i-t;r++)o=N7e(s=T_(e,0,r,this.toBBox),n=T_(e,r,i,this.toBBox)),a=_R(s)+_R(n),o<l?(l=o,h=r,u=a<u?a:u):o===l&&a<u&&(u=a,h=r);return h},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:NW,s=e.leaf?this.compareMinY:kW;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,s)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,n,o=this.toBBox,a=T_(e,0,t,o),l=T_(e,i-t,i,o),u=sE(a)+sE(l);for(s=t;s<i-t;s++)n=e.children[s],E_(a,e.leaf?o(n):n),u+=sE(a);for(s=i-t-1;s>=t;s--)n=e.children[s],E_(l,e.leaf?o(n):n),u+=sE(l);return u},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)E_(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)e[i].children.length===0?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():Yg(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let FW=class bue{constructor(t,i){this.key=new of(0,0,0,0),this.bounds=Mo(),this.objectIds=new Set,this.key.set(i);const r=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=t.zoomToScale(r.level-1),this.maxScale=t.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return bt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),i=Jn.acquire();for(let r=0;r<t.length;r++)i[r]=new bue(this.tileInfoView,t[r]);return i}getQuantizationParameters(){return K8.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Xf={added:[],removed:[]},xR=new Set,k7e=new of(0,0,0,0);function D7e(e,t){const i=Cn(t);if(!i)return null;const[r,s]=i.valid;return e[2]>s?[Mo([e[0],e[1],s,e[3]]),Mo([r,e[1],r+e[2]-s,e[3]])]:e[0]<r?[Mo([r,e[1],e[2],e[3]]),Mo([s-(r-e[0]),e[1],s,e[3]])]:null}let F7e=class extends ap{constructor(t){super(),this._tiles=new Map,this._index=Y3(9,le("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||wee(t)===0||_ee(t)===0)return[];const i=D7e(t,this.tileScheme.spatialReference);return i!=null?[...new Set([...this.boundsIntersections(i[0]),...this.boundsIntersections(i[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const i={added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const s=new FW(this.tileScheme,r);this._tiles.set(r,s),this._index.insert(s),i.added.push(s)}for(const r of t.removed)if(this.has(r)){const s=this.get(r);this._tiles.delete(r),this._index.remove(s),i.removed.push(s)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(t){const i=this.tileScheme.getTileCoverage(t,0);if(!i)return;const{spans:r,lodInfo:s}=i,{level:n}=s;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let u=a;u<=l;u++){const h=k7e.set(n,o,s.normalizeCol(u),s.getWorldForColumn(u)).id;if(xR.add(h),!this.has(h)){const p=new FW(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),Xf.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];xR.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Xf.removed.push(a))}(Xf.added.length||Xf.removed.length)&&this.emit("update",Xf),cS.pool.release(i),xR.clear(),Xf.added.length=0,Xf.removed.length=0}};const s0t=1e-30,jW=512,oE=16777216,n0t=8,o0t=29,a0t=24,l0t=4,u0t=0,c0t=0,h0t=0,p0t=1,d0t=2,f0t=3,m0t=4,y0t=5,g0t=6,v0t=12,b0t=13,w0t=5,j7e=6,_0t=5,S0t=6;var UW;(function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2",e[e.LocalTimeOrigin=7]="LocalTimeOrigin"})(UW||(UW={}));const wue=6,U7e=1<<wue,x0t=U7e<<1,T0t=1.05,E0t=3,M0t=1,I0t=3,A0t=3,$0t=5,C0t=6,R0t=1.15,V7e=2,O0t=128,G7e=256,P0t=G7e-2*V7e,L0t=2,N0t=128,k0t=10,D0t=1024,F0t=128,j0t=4,U0t=1,V0t=1<<20,G0t=.75,B0t=10,z0t=.75,q0t=256,H0t=32,W0t=512,J0t=0,Z0t=1,B7e=1,Y0t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],K0t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],sw=256,z7e=new Oe("cyan"),q7e=1,H7e=.25;new Oe("black");const W7e="default",J7e="temporary",Z7e=new Oe("yellow");let Ym=class extends Je{constructor(t){super(t),this.color=z7e.clone(),this.haloOpacity=q7e,this.fillOpacity=H7e}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity}};c([d({type:Oe})],Ym.prototype,"color",void 0),c([d({type:Oe})],Ym.prototype,"haloColor",void 0),c([d()],Ym.prototype,"haloOpacity",void 0),c([d()],Ym.prototype,"fillOpacity",void 0),Ym=c([F("esri.views.support.HighlightOptions")],Ym);const Y7e=Ym;var ND;let M_=ND=class extends Y7e{constructor(e){super(e),this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(e){return super.equals(e)&&this.haloWidth===e.haloWidth&&this.haloBlur===e.haloBlur}get optionsKey(){return`${this.color};${this.haloColor};${this.haloOpacity};${this.fillOpacity};${this.haloWidth};${this.haloBlur}`}clone(){return new ND({color:this.color.clone(),haloColor:this.haloColor?.clone(),haloOpacity:this.haloOpacity,fillOpacity:this.fillOpacity,haloWidth:this.haloWidth,haloBlur:this.haloBlur})}};c([d()],M_.prototype,"haloWidth",void 0),c([d()],M_.prototype,"haloBlur",void 0),M_=ND=c([F("esri.views.2d.support.HighlightOptions")],M_);const ng=M_;var VW,GW,BW,zW,kD,qW,HW,Bu,DD,u2,is,K3,za,Fi,Xe,hS,Mh,WW,JW,ZW;(function(e){e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e[e.COLOR=16384]="COLOR"})(VW||(VW={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(GW||(GW={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(BW||(BW={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(zW||(zW={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",e[e.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(kD||(kD={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(qW||(qW={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(HW||(HW={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=5131]="HALF_FLOAT"}(Bu||(Bu={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(DD||(DD={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(u2||(u2={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(is||(is={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(K3||(K3={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(za||(za={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(Fi||(Fi={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(Xe||(Xe={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(hS||(hS={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(Mh||(Mh={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(WW||(WW={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(JW||(JW={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(ZW||(ZW={}));const Q0t=33984;var X3,YW,KW;(function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.TransformFeedback=7]="TransformFeedback",e[e.Sync=8]="Sync",e[e.UNCOUNTED=9]="UNCOUNTED",e[e.LinesOfCode=9]="LinesOfCode",e[e.Uniform=10]="Uniform",e[e.COUNT=11]="COUNT"})(X3||(X3={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(YW||(YW={})),function(e){e[e.NONE=0]="NONE",e[e.BACK=1029]="BACK"}(KW||(KW={}));const evt=33306;var Fs,XW,QW,eJ,tJ,iJ,rJ;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(Fs||(Fs={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(XW||(XW={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(QW||(QW={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(eJ||(eJ={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(tJ||(tJ={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(iJ||(iJ={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(rJ||(rJ={}));const K7e=()=>xe.getLogger("esri.views.webgl.checkWebGLError");function X7e(e,t){switch(t){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const _ue=!!le("enable-feature:webgl-debug");function Sue(){return _ue}function tvt(){return _ue}function Kg(e){if(Sue()){const t=e.getError();if(t){const i=X7e(e,t),r=new Error().stack;K7e().error(new W("webgl-error","WebGL error occurred",{message:i,stack:r}))}}}var FD;(function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"})(FD||(FD={}));function Q7e(e){switch(e){case Bu.BYTE:case Bu.UNSIGNED_BYTE:return 1;case Bu.SHORT:case Bu.UNSIGNED_SHORT:case Bu.HALF_FLOAT:return 2;case Bu.FLOAT:case Bu.INT:case Bu.UNSIGNED_INT:return 4}}function eje(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function ivt(e,t,i,r,s=0){const n=e.gl;e.bindBuffer(i);for(const o of r){const a=t.get(o.name);if(a==null){console.warn(`There is no location for vertex attribute '${o.name}' defined.`);continue}const l=s*o.stride;if(o.count<=4)n.vertexAttribPointer(a,o.count,o.type,o.normalized,o.stride,o.offset+l),n.enableVertexAttribArray(a),o.divisor>0&&e.gl.vertexAttribDivisor(a,o.divisor);else if(o.count===9)for(let u=0;u<3;u++)n.vertexAttribPointer(a+u,3,o.type,o.normalized,o.stride,o.offset+12*u+l),n.enableVertexAttribArray(a+u),o.divisor>0&&e.gl.vertexAttribDivisor(a+u,o.divisor);else if(o.count===16)for(let u=0;u<4;u++)n.vertexAttribPointer(a+u,4,o.type,o.normalized,o.stride,o.offset+16*u+l),n.enableVertexAttribArray(a+u),o.divisor>0&&e.gl?.vertexAttribDivisor(a+u,o.divisor);else console.error("Unsupported vertex attribute element count: "+o.count);if(Sue()){const u=eje(e),h=Q7e(o.type),p=o.offset,f=Math.round(h/p)!==h/p?`. Offset not a multiple of stride. DataType requires ${h} bytes, but descriptor has an offset of ${p}`:"";u&&console.error(`Unable to bind vertex attribute "${o.name}" with baseInstanceOffset ${l}${f}:`,u,o)}}}function rvt(e,t,i,r){const s=e.gl;e.bindBuffer(i);for(const n of r){const o=t.get(n.name);if(n.count<=4)s.disableVertexAttribArray(o),n.divisor&&n.divisor>0&&e.gl?.vertexAttribDivisor(o,0);else if(n.count===9)for(let a=0;a<3;a++)s.disableVertexAttribArray(o+a),n.divisor&&n.divisor>0&&e.gl?.vertexAttribDivisor(o+a,0);else if(n.count===16)for(let a=0;a<4;a++)s.disableVertexAttribArray(o+a),n.divisor&&n.divisor>0&&e.gl?.vertexAttribDivisor(o+a,0);else console.error("Unsupported vertex attribute element count: "+n.count)}e.unbindBuffer(kD.ARRAY_BUFFER)}function tje(e){switch(e){case Fi.ALPHA:case Fi.LUMINANCE:case Fi.RED:case Fi.RED_INTEGER:case Xe.R8:case Xe.R8I:case Xe.R8UI:case Xe.R8_SNORM:case Mh.STENCIL_INDEX8:return 1;case Fi.LUMINANCE_ALPHA:case Fi.RG:case Fi.RG_INTEGER:case Xe.RGBA4:case Xe.R16F:case Xe.R16I:case Xe.R16UI:case Xe.RG8:case Xe.RG8I:case Xe.RG8UI:case Xe.RG8_SNORM:case Xe.RGB565:case Xe.RGB5_A1:case Mh.DEPTH_COMPONENT16:return 2;case Fi.DEPTH_COMPONENT:case Fi.RGB:case Fi.RGB_INTEGER:case Xe.RGB8:case Xe.RGB8I:case Xe.RGB8UI:case Xe.RGB8_SNORM:case Xe.SRGB8:case Mh.DEPTH_COMPONENT24:return 3;case Fi.DEPTH_STENCIL:case Fi.DEPTH24_STENCIL8:case Fi.RGBA:case Fi.RGBA_INTEGER:case Xe.RGBA8:case Xe.R32F:case Xe.R11F_G11F_B10F:case Xe.RG16F:case Xe.R32I:case Xe.R32UI:case Xe.RG16I:case Xe.RG16UI:case Xe.RGBA8I:case Xe.RGBA8UI:case Xe.RGBA8_SNORM:case Xe.SRGB8_ALPHA8:case Xe.RGB9_E5:case Xe.RGB10_A2UI:case Xe.RGB10_A2:case Mh.DEPTH_STENCIL:case Mh.DEPTH_COMPONENT32F:case Mh.DEPTH24_STENCIL8:return 4;case Mh.DEPTH32F_STENCIL8:return 5;case Xe.RGB16F:case Xe.RGB16I:case Xe.RGB16UI:return 6;case Xe.RG32F:case Xe.RG32I:case Xe.RG32UI:case Xe.RGBA16F:case Xe.RGBA16I:case Xe.RGBA16UI:return 8;case Xe.RGB32F:case Xe.RGB32I:case Xe.RGB32UI:return 12;case Xe.RGBA32F:case Xe.RGBA32I:case Xe.RGBA32UI:return 16;case Fs.COMPRESSED_RGB_S3TC_DXT1_EXT:case Fs.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Fs.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Fs.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Fs.COMPRESSED_R11_EAC:case Fs.COMPRESSED_SIGNED_R11_EAC:case Fs.COMPRESSED_RGB8_ETC2:case Fs.COMPRESSED_SRGB8_ETC2:case Fs.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Fs.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Fs.COMPRESSED_RG11_EAC:case Fs.COMPRESSED_SIGNED_RG11_EAC:case Fs.COMPRESSED_RGBA8_ETC2_EAC:case Fs.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let xue=class{constructor(t=0,i=t){this.width=t,this.height=i,this.target=za.TEXTURE_2D,this.pixelFormat=Fi.RGBA,this.dataType=hS.UNSIGNED_BYTE,this.samplingMode=is.LINEAR,this.wrapMode=K3.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}};function ije(e){return e.width<=0||e.height<=0?0:Math.round(e.width*e.height*(e.hasMipmap?4/3:1)*(e.internalFormat==null?4:tje(e.internalFormat))*(e.target===za.TEXTURE_CUBE_MAP?6:1))}let rje=class Tue extends xue{constructor(t,i){switch(super(),this.context=t,Object.assign(this,i),this.internalFormat){case Xe.R16F:case Xe.R16I:case Xe.R16UI:case Xe.R32F:case Xe.R32I:case Xe.R32UI:case Xe.R8_SNORM:case Xe.R8:case Xe.R8I:case Xe.R8UI:this.pixelFormat=Fi.RED}}static validate(t,i){return new Tue(t,i)}},Eue=class Fa{constructor(t,i=null,r=null){if(this.type=FD.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in t)this._descriptor=t,r=i;else{const s=rje.validate(t,i);if(!s)throw new W("Texture descriptor invalid");this._descriptor=s}this._descriptor.target===za.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return ije(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(X3.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(t,i){const r=this._descriptor;if(r.width!==t||r.height!==i){if(this._wasImmutablyAllocated)throw new W("Immutable textures can't be resized!");r.width=t,r.height=i,this._descriptor.target===za.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let i=za.TEXTURE_CUBE_MAP_POSITIVE_X;i<=za.TEXTURE_CUBE_MAP_NEGATIVE_Z;i++)this._setData(t,i)}setData(t){this._setData(t)}_setData(t,i){const r=this._descriptor.context?.gl;if(!r)return;Kg(r),this._glName||(this._glName=r.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(X3.Texture,this));const s=this._descriptor,n=i??s.target,o=nw(n),a=this._descriptor.context.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),aE(s),this._configurePixelStorage(),Kg(r);const l=this._deriveInternalFormat();if(oJ(t)){let u="width"in t?t.width:t.codedWidth,h="height"in t?t.height:t.codedHeight;const p=1;t instanceof HTMLVideoElement&&(u=t.videoWidth,h=t.videoHeight),s.width&&s.height,o&&s.depth,s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,s.hasMipmap,u,h,p),this._texImage(n,0,l,u,h,p,t),Kg(r),s.hasMipmap&&(this.generateMipmap(),Kg(r)),s.width||(s.width=u),s.height||(s.height=h),o&&!s.depth&&(s.depth=p)}else{const{width:u,height:h,depth:p}=s;if(u==null||h==null)throw new W("Width and height must be specified!");if(o&&p==null)throw new W("Depth must be specified!");if(s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,s.hasMipmap,u,h,p),wI(t)){const f=t.levels,m=aJ(n,u,h,p),g=Math.min(m-1,f.length-1);r.texParameteri(s.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,g);const b=l;if(!oje(b))throw new W("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((w,S,T,x)=>{const _=f[Math.min(w,f.length-1)];this._compressedTexImage(n,w,b,S,T,x,_)},g)}else this._texImage(n,0,l,u,h,p,t),Kg(r),s.hasMipmap&&this.generateMipmap()}sJ(r,this._descriptor),nJ(r,this._descriptor),sje(this._descriptor.context,this._descriptor),Kg(r),this._descriptor.context.bindTexture(a,Fa.TEXTURE_UNIT_FOR_UPDATES)}updateData(t,i,r,s,n,o,a=0){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const l=this._descriptor,u=this._deriveInternalFormat(),{context:h,pixelFormat:p,dataType:f,target:m,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new W("Cannot update immutable texture before allocation!");const b=h.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>l.width||r+n>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:w}=h;a&&w.pixelStorei(w.UNPACK_SKIP_ROWS,a),oJ(o)?w.texSubImage2D(m,t,i,r,s,n,p,f,o):wI(o)?w.compressedTexSubImage2D(m,t,i,r,s,n,u,o.levels[t]):w.texSubImage2D(m,t,i,r,s,n,p,f,o),a&&w.pixelStorei(w.UNPACK_SKIP_ROWS,0),h.bindTexture(b,Fa.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(t,i,r,s,n,o,a,l){l||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const u=this._descriptor,h=this._deriveInternalFormat(),{context:p,pixelFormat:f,dataType:m,isImmutable:g,target:b}=u;if(g&&!this._wasImmutablyAllocated)throw new W("Cannot update immutable texture before allocation!");nw(b)||console.warn("Attempting to set 3D texture data on a non-3D texture");const w=p.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);p.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+n>u.width||r+o>u.height||s+a>u.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:S}=p;if(wI(l))l=l.levels[t],S.compressedTexSubImage3D(b,t,i,r,s,n,o,a,h,l);else{const T=l;S.texSubImage3D(b,t,i,r,s,n,o,a,f,m,T)}p.bindTexture(w,Fa.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const t=this._descriptor;if(!t.hasMipmap){if(this._wasImmutablyAllocated)throw new W("Cannot add mipmaps to immutable texture after allocation");t.hasMipmap=!0,this._samplingModeDirty=!0,aE(t)}t.samplingMode===is.LINEAR?(this._samplingModeDirty=!0,t.samplingMode=is.LINEAR_MIPMAP_NEAREST):t.samplingMode===is.NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=is.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,Fa.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Fa.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(t.target),this._descriptor.context.bindTexture(i,Fa.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const t=this._descriptor;if(t.hasMipmap){if(this._wasImmutablyAllocated)throw new W("Cannot delete mipmaps to immutable texture after allocation");t.hasMipmap=!1,this._samplingModeDirty=!0,aE(t)}t.samplingMode===is.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,t.samplingMode=is.LINEAR):t.samplingMode===is.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,t.samplingMode=is.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,aE(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,i=t.context.gl;this._samplingModeDirty&&(sJ(i,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(nJ(i,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.internalFormat!=null)return this._descriptor.internalFormat===Fi.DEPTH_STENCIL&&(this._descriptor.internalFormat=Fi.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case hS.FLOAT:switch(this._descriptor.pixelFormat){case Fi.RGBA:return this._descriptor.internalFormat=Xe.RGBA32F;case Fi.RGB:return this._descriptor.internalFormat=Xe.RGB32F;default:throw new W("Unable to derive format")}case hS.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case Fi.RGBA:return this._descriptor.internalFormat=Xe.RGBA8;case Fi.RGB:return this._descriptor.internalFormat=Xe.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===Fi.DEPTH_STENCIL?Fi.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:i,flipped:r,preMultiplyAlpha:s}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,i),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,r?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s?1:0)}_texStorage(t,i,r,s,n,o){const{gl:a}=this._descriptor.context;if(!nje(i))throw new W("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?aJ(t,s,n,o):1;if(nw(t)){if(o==null)throw new W("Missing depth dimension for 3D texture upload");a.texStorage3D(t,l,i,s,n,o)}else a.texStorage2D(t,l,i,s,n);this._wasImmutablyAllocated=!0}_texImage(t,i,r,s,n,o,a){const l=this._descriptor.context.gl,u=nw(t),{isImmutable:h,pixelFormat:p,dataType:f}=this._descriptor;if(h){if(a!=null){const m=a;if(u){if(o==null)throw new W("Missing depth dimension for 3D texture upload");l.texSubImage3D(t,i,0,0,0,s,n,o,p,f,m)}else l.texSubImage2D(t,i,0,0,s,n,p,f,m)}}else{const m=a;if(u){if(o==null)throw new W("Missing depth dimension for 3D texture upload");l.texImage3D(t,i,r,s,n,o,0,p,f,m)}else l.texImage2D(t,i,r,s,n,0,p,f,m)}}_compressedTexImage(t,i,r,s,n,o,a){const l=this._descriptor.context.gl,u=nw(t);if(this._descriptor.isImmutable){if(a!=null)if(u){if(o==null)throw new W("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(t,i,0,0,0,s,n,o,r,a)}else l.compressedTexSubImage2D(t,i,0,0,s,n,r,a)}else if(u){if(o==null)throw new W("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(t,i,r,s,n,o,0,a)}else l.compressedTexImage2D(t,i,r,s,n,0,a)}_forEachMipmapLevel(t,i=1/0){let{width:r,height:s,depth:n,hasMipmap:o,target:a}=this._descriptor;const l=a===za.TEXTURE_3D;if(r==null||s==null||l&&n==null)throw new W("Missing texture dimensions for mipmap calculation");for(let u=0;t(u,r,s,n),o&&(r!==1||s!==1||l&&n!==1)&&!(u>=i);++u)r=Math.max(1,r>>1),s=Math.max(1,s>>1),l&&(n=Math.max(1,n>>1))}};function aE(e){(e.width!=null&&e.width<0||e.height!=null&&e.height<0||e.depth!=null&&e.depth<0)&&console.error("Negative dimension parameters are not allowed!")}function sJ(e,t){let i=t.samplingMode,r=t.samplingMode;i===is.LINEAR_MIPMAP_NEAREST||i===is.LINEAR_MIPMAP_LINEAR?(i=is.LINEAR,t.hasMipmap||(r=is.LINEAR)):i!==is.NEAREST_MIPMAP_NEAREST&&i!==is.NEAREST_MIPMAP_LINEAR||(i=is.NEAREST,t.hasMipmap||(r=is.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}function nJ(e,t){typeof t.wrapMode=="number"?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}function sje(e,t){const i=e.capabilities.textureFilterAnisotropic;i&&e.gl.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}function nje(e){return e in Xe}function oje(e){return e in Fs}function wI(e){return e!=null&&"type"in e&&e.type==="compressed"}function aje(e){return e!=null&&"byteLength"in e}function oJ(e){return e!=null&&!wI(e)&&!aje(e)}function nw(e){return e===za.TEXTURE_3D||e===za.TEXTURE_2D_ARRAY}function aJ(e,t,i,r=1){let s=Math.max(t,i);return e===za.TEXTURE_3D&&(s=Math.max(s,r)),Math.round(Math.log(s)/Math.LN2)+1}Eue.TEXTURE_UNIT_FOR_UPDATES=0;const TR=()=>xe.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function lje(e,t){t.fillColor[0]=e.color.r/255,t.fillColor[1]=e.color.g/255,t.fillColor[2]=e.color.b/255,t.fillColor[3]=e.color.a,e.haloColor?(t.outlineColor[0]=e.haloColor.r/255,t.outlineColor[1]=e.haloColor.g/255,t.outlineColor[2]=e.haloColor.b/255,t.outlineColor[3]=e.haloColor.a):(t.outlineColor[0]=t.fillColor[0],t.outlineColor[1]=t.fillColor[1],t.outlineColor[2]=t.fillColor[2],t.outlineColor[3]=t.fillColor[3]),t.fillColor[3]*=e.fillOpacity,t.outlineColor[3]*=e.haloOpacity,t.fillColor[0]*=t.fillColor[3],t.fillColor[1]*=t.fillColor[3],t.fillColor[2]*=t.fillColor[3],t.outlineColor[0]*=t.outlineColor[3],t.outlineColor[1]*=t.outlineColor[3],t.outlineColor[2]*=t.outlineColor[3],t.outlineWidth=(1-e.haloBlur)*e.haloWidth,t.outerHaloWidth=e.haloBlur*e.haloWidth/2,t.innerHaloWidth=e.haloBlur*e.haloWidth/2,t.outlinePosition=0}const uje=[0,0,0,0];let Mue=class{constructor(){this.type="single",this._highlightOptions=new ng,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*sw),this._minMaxDistance=[0,0]}setHighlightOptions(t){this._highlightOptions=t}applyHighlightOptions(t,i){this._updateGradientTexture(t),t.bindTexture(this._shadeTex,j7e),i.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<wue)-1,activeGradient:this}]}_updateGradientTexture(t){const{optionsKey:i}=this._highlightOptions;if(i===this._optionsShadeTexKey)return;this._optionsShadeTexKey=i,lje(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,s=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,n=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*B7e,u=Math.abs(s)>l?Math.round(10*(Math.abs(s)-l))/10:0,h=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let p;u&&!h?TR().error("The outer rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!u&&h?TR().error("The inner rim of the highlight is "+h+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):u&&h&&TR().error("The highlight is "+Math.max(u,h)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function m(b,w,S){f[0]=(1-S)*b[0]+S*w[0],f[1]=(1-S)*b[1]+S*w[1],f[2]=(1-S)*b[2]+S*w[2],f[3]=(1-S)*b[3]+S*w[3]}const{_texelData:g}=this;for(let b=0;b<sw;++b)p=s+b/(sw-1)*(a-s),p<s?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):p<n?m(uje,r.outlineColor,(p-s)/(n-s)):p<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:p<a?m(r.outlineColor,r.fillColor,(p-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,g[4*b]=255*f[0],g[4*b+1]=255*f[1],g[4*b+2]=255*f[2],g[4*b+3]=255*f[3];if(this._minMaxDistance[0]=s,this._minMaxDistance[1]=a,!this._shadeTex){const b=new xue;b.wrapMode=K3.CLAMP_TO_EDGE,b.width=sw,b.height=1,this._shadeTex=new Eue(t,b)}this._shadeTex.updateData(0,0,0,sw,1,this._texelData)}},cje=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(t){for(let i=0;i<t.length;i++)this.gradients[i]||(this.gradients[i]=new Mue),this.gradients[i].setHighlightOptions(t[i].options);for(let i=t.length+1;i<this.gradients.length;i++)this.gradients[i].destroy();this.gradients.length=t.length}destroy(){for(const t of this.gradients)t.destroy()}getReasonsWithGradients(){let t=1;const i=[];for(let r=0;r<this.gradients.length;r++){const s=this.gradients[r];i.push({activeReasons:t,activeGradient:s}),t<<=1}return i}};var lJ,uJ,cJ,hJ,pJ,dJ,Q3,fJ,mJ;(function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT",e[e.LABEL=4]="LABEL"})(lJ||(lJ={})),function(e){e[e.NONE=0]="NONE",e[e.MAP=1]="MAP",e[e.LABEL=2]="LABEL",e[e.LABEL_ALPHA=4]="LABEL_ALPHA",e[e.HITTEST=8]="HITTEST",e[e.HIGHLIGHT=16]="HIGHLIGHT",e[e.CLIP=32]="CLIP",e[e.DEBUG=64]="DEBUG",e[e.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(uJ||(uJ={})),function(e){e[e.SIZE=0]="SIZE",e[e.COLOR=1]="COLOR",e[e.OPACITY=2]="OPACITY",e[e.ROTATION=3]="ROTATION"}(cJ||(cJ={})),function(e){e[e.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",e[e.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",e[e.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",e[e.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(hJ||(hJ={})),function(e){e[e.SPRITE=0]="SPRITE",e[e.GLYPH=1]="GLYPH"}(pJ||(pJ={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SIMPLE=1]="SIMPLE",e[e.DOT_DENSITY=2]="DOT_DENSITY",e[e.OUTLINE_FILL=3]="OUTLINE_FILL",e[e.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",e[e.HEATMAP=5]="HEATMAP",e[e.PIE_CHART=6]="PIE_CHART"}(dJ||(dJ={})),function(e){e[e.All=0]="All",e[e.Highlight=1]="Highlight",e[e.InsideEffect=2]="InsideEffect",e[e.OutsideEffect=3]="OutsideEffect"}(Q3||(Q3={})),function(e){e[e.BATCHING=0]="BATCHING",e[e.STRICT_ORDER=1]="STRICT_ORDER",e[e.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"}(fJ||(fJ={})),function(e){e[e.FILL=0]="FILL",e[e.LINE=1]="LINE",e[e.MARKER=2]="MARKER",e[e.TEXT=3]="TEXT"}(mJ||(mJ={}));const Iue={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:DD.EQUAL,mask:255,op:{fail:u2.KEEP,zFail:u2.KEEP,zPass:u2.REPLACE}}}},hje={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},pje={...Iue,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function dje({pixelRatio:e,state:t,displayLevel:i,requiredLevel:r},s){const n=1/2**(i-s.key.level),o=1/2**(r-s.key.level);return{displayMat3:t.displayMat3,displayViewMat3:t.displayViewMat3,displayViewScreenMat3:s.transforms.displayViewScreenMat3,viewMat3:t.viewMat3,tileMat3:s.transforms.tileMat3,displayZoomFactor:n,requiredZoomFactor:o,tileOffset:[s.x,s.y],currentScale:t.scale,currentZoom:i,metersPerSRUnit:$c(t.spatialReference),rotation:t.rotation,pixelRatio:e}}function Aue(e){return e.passOptions?.type==="highlight"}function $ue(e){return e.passOptions?.type==="hittest"}function fje(e){if(!$ue(e))return null;const{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}=e.passOptions;return{position:t,distance:i,smallSymbolDistance:r,smallSymbolSizeThreshold:s}}function mje(e){if(!Aue(e))return null;const{activeReasons:t,highlightAll:i}=e.passOptions;return{activeReasons:t,highlightAll:i?1:0}}function avt(e,t,i){const r={};for(const s in i)i[s]instanceof Function?r[s]=i[s](e,t):r[s]=i[s];return r}function lvt(e,t){const{attributeView:i,context:r}=e;return{storage:i.getUniforms(r),view:dje(e,t),hittestRequest:fje(e),highlight:mje(e)}}function uvt(e){return{inside:e.selection===Q3.InsideEffect,outside:e.selection===Q3.OutsideEffect}}function yje(e){return $ue(e)?hje:Aue(e)&&e.passOptions.stepType==="clear"?pje:Iue}function cvt(e){const{row:t,col:i}=e.key,r=i*jW,s=t*jW;return{tileOffsetFromLocalOrigin:[r%oE,s%oE],maxIntsToLocalOrigin:[Math.floor(r/oE),Math.floor(s/oE)]}}const gje=new gt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function hvt(e){return gje.toJSON(e)}function pvt(e){const{bandCount:t,attributeTable:i,colormap:r,pixelType:s}=e.raster.rasterInfo;return t===1&&(i!=null||r!=null||s==="u8"||s==="s8")}function vje(e,t){return t==null?(e?.destroy(),null):(e?.type==="single"&&Array.isArray(t)&&(e.destroy(),e=null),e?.type!=="multi"||Array.isArray(t)||(e.destroy(),e=null),e||(e=Array.isArray(t)?new cje:new Mue),Array.isArray(t)?e.type==="multi"&&e.setHighlightOptions(t):e.type==="single"&&e.setHighlightOptions(t),e)}function dvt(e,t,i,r){const{painter:s,highlightGradient:n}=e,{highlight:o}=s.effects;if(!n)return;const a=e.passOptions,l=n.getReasonsWithGradients();for(let u=0;u<l.length;u++){const h={...e,passOptions:{type:"highlight",activeGradient:r!=null?l[r].activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"burn",highlightAll:t}};if(o.bind(h),i(h),u<l.length-1){let f=0;for(let m=u+1;m<l.length;m++)f|=l[m].activeReasons;i({...e,passOptions:{type:"highlight",activeGradient:r!=null?l[r].activeGradient:l[u].activeGradient,activeReasons:f,stepType:"clear",highlightAll:t}})}const p={...e,passOptions:{type:"highlight",activeGradient:r!=null?l[r].activeGradient:l[u].activeGradient,activeReasons:l[u].activeReasons,stepType:"draw",highlightAll:t}};s.setPipelineState(yje(e)),s.updatePipelineState(e.context),o.draw(p),o.unbind()}e.passOptions=a}const lE=e=>parseFloat(e)/100;function bje(e,t,i){const r=typeof e.left=="string"?lE(e.left)*t:e.left,s=typeof e.right=="string"?lE(e.right)*t:e.right,n=typeof e.top=="string"?lE(e.top)*i:e.top,o=typeof e.bottom=="string"?lE(e.bottom)*i:e.bottom,a=n;return{xmin:r,xmax:Math.max(t-s,r),ymin:a,ymax:Math.max(i-o,n)}}function Cue(e,t,i,r){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:l,ymax:u}=bje(t,s,n),{x:h,y:p}=i;return h>o&&h<a&&p>l&&p<u}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||$F(t.path,[i.x,i.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?AF(t.geometry,r):KS(t.geometry,r))}}var jD;let dv=jD=class extends Je{constructor(...e){super(...e),this.name="default",this.options=new ng}clone(){return new jD({name:this.name,options:this.options.clone()})}};c([d({type:String})],dv.prototype,"name",void 0),c([d({type:ng})],dv.prototype,"options",void 0),dv=jD=c([F("esri.views.2d.support.HighlightGroup")],dv);const Rue=Be.ofType(dv);function Oue(){return new Rue([{name:W7e,options:new ng},{name:J7e,options:new ng({color:Z7e})}])}Oue().items.map(e=>e.name);function wje(e){if(!e.highlights)return null;const t=e.highlights.findIndex(i=>i.name==="default");return t===-1?null:e.highlights.items[t].options}function _je(e,t){if(!e.highlights){if(!t)return;e.highlights=new Rue([{name:"default",options:new ng}])}const i=e.highlights.findIndex(r=>r.name==="default");t?e.highlights.items[i].options=t:e.highlights.removeAt(i)}async function Sje(e,t,i){const r=nle(t)?sle(e,t):t;if(!e.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;i?.include?gJ(i.include,yJ(e,f=>{s.add(f),ER(f,m=>n.add(m))},(f,m)=>{n.add(f),s.add(m)},f=>{a||(a=new Set),a.add(f)},f=>s.add(f),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(f=>{ER(f,m=>n.add(m))})),i?.exclude&&gJ(i.exclude,yJ(e,f=>{s.delete(f),ER(f,m=>n.delete(m))},f=>n.delete(f),f=>{l||(l=new Set),l.add(f)}));const u=e.toMap(r),h=e.allLayerViews.filter(f=>!f.suspended&&s.has(f)&&f.clips.every(m=>Cue(e,m,r,u))).reverse();let p=[...o?e.graphicsView.hitTest(u).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:u})):[],...await Promise.all(h.map(f=>f.hitTest(u,r)).toArray())].filter(ko).flat().filter(ko);return p=p.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||n.has(f.graphic.layer)),a&&(p=p.filter(f=>!("graphic"in f)||!f.graphic||a?.has(UD(f.graphic)))),l&&(p=p.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(UD(f.graphic)))),{screenPoint:r,results:p}}function yJ(e,t,i,r,s,n){return o=>{if(o instanceof nl){if(o.layer===e)n?.();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&s?.(a)}r(UD(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&i(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function gJ(e,t){if(e)if(GI(e))for(const i of e)if(GI(i))for(const r of i)t(r);else t(i);else t(e)}function UD(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function ER({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(i=>{t(i)})}let ow=null,eA=!0;function xje(e,t,i){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(eA)try{return new ImageData(e,t)}catch{eA=!1}return Pue(e,t,i)}function fvt(e,t,i,r){if(!t||!i)throw new Error("Cannot construct image data without dimensions");if(eA)try{return new ImageData(e,t,i)}catch{eA=!1}const s=Pue(t,i,r);return s.data.set(e,0),s}function Tje(){return ow||(ow=document.createElement("canvas"),ow.width=1,ow.height=1),ow}function Pue(e,t,i){return i||(i=Tje()),i.getContext("2d").createImageData(e,t)}async function Eje(e,t){const i=window.URL.createObjectURL(e);try{const{data:r}=await Ne(i,{...t,responseType:"image"});return r}catch(r){throw ls(r)?r:new W("invalid-image",`Could not fetch requested image at ${i}`)}finally{window.URL.revokeObjectURL(i)}}async function mvt(e,t){const{arrayBuffer:i,mediaType:r}=await Mje(e,t),s=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:n,parseGif:o}=await ce(()=>import("./gif-G0km9A3U.js"),__vite__mapDeps([228,1]),import.meta.url);if(n(i))return o(i,t)}if(s){const{isAnimatedPNG:n,parseApng:o}=await ce(()=>import("./apng-DjUnDj3O.js"),__vite__mapDeps([229,1]),import.meta.url);if(n(i))return o(i,t)}return Eje(new Blob([i],{type:r}),t)}async function Mje(e,t){const i=a1(e);if(i?.isBase64)return{arrayBuffer:pQ(i.data),mediaType:i.mediaType};const r=await Ne(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function Lue(e,t,i){const{ctx:r,canvas:s}=kue(e,i),n=r.getImageData(0,0,e.width,e.height),o=Fue(s,t);return Due(s),{dataUrl:o,data:n}}function Nue(e,t){const{ctx:i,canvas:r}=kue(e,t),s=i.getImageData(0,0,e.width,e.height);return Due(r),s}function kue(e,t){const i=Ije();t.premultipliedAlpha&&Rje(e),i.width=e.width,i.height=e.height;const r=i.getContext("2d",{willReadFrequently:!0});return r.putImageData(e,0,0),t.flipY&&Cje(r),{ctx:r,canvas:i}}function Due(e){e.width=0,e.height=0}function Ije(){return MR==null&&(MR=document.createElement("canvas")),MR}let MR=null;function Fue(e,t){const i=Oje[t.format],r=t.quality/100;return e.toDataURL(i,r)}function jue(e,t){const i=$je(e),r=Lje[i];return{format:i,quality:rl(t??r,0,100)}}function Uue(e,t){return t/Math.max(e[0],e[1])}function Aje(e,t,i,r=0,s=0,n=e.width-r,o=e.height-s,a=!1){const{data:l}=e,{width:u,height:h,data:p}=t,f=n/u,m=o/h,g=Math.ceil(f/2),b=Math.ceil(m/2),w=e.width;for(let S=0;S<h;S++)for(let T=0;T<u;T++){const x=4*(T+(a?h-S-1:S)*u);let _=0,M=0,I=0,A=0,C=0,R=0;const O=(S+.5)*m;for(let k=Math.floor(S*m);k<(S+1)*m;k++){const L=Math.abs(O-(k+.5))/b,V=(T+.5)*f,J=L*L;for(let y=Math.floor(T*f);y<(T+1)*f;y++){const E=Math.abs(V-(y+.5))/g,$=Math.sqrt(J+E*E);if($>=1)continue;let P=2*$*$*$-3*$*$+1;const G=4*(r+y+(s+k)*w);R+=P*l[G+3],M+=P,!i&&l[G+3]<255&&(P=P*l[G+3]/255),I+=P*l[G],A+=P*l[G+1],C+=P*l[G+2],_+=P}}p[x]=I/_,p[x+1]=A/_,p[x+2]=C/_,p[x+3]=R/M}return t}function $je(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return Pje}}function Cje(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function Rje(e){const t=e.data,i=t.length;for(let r=0;r<i;r+=4){const s=t[r+3];if(s!==255&&s>0){const n=255/s;t[r]=t[r]*n,t[r+1]=t[r+1]*n,t[r+2]=t[r+2]*n}}}const Oje={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},vJ=98,Pje="png",Lje={png:100,jpg:vJ,jpeg:vJ},yvt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:xje,encode:Lue,encodeData:Nue,getFormatAndQuality:jue,getMaximumResolutionScale:Uue,resampleHermite:Aje,toDataUrl:Fue},Symbol.toStringTag,{value:"Module"})),Vue={flipY:!0,premultipliedAlpha:!0};async function Nje(e,t){const i=await Gue(e,t),{format:r,quality:s}=jue(t?.format,t?.quality);return Lue(i,{format:r,quality:s},Vue)}async function kje(e,t){const i=await Gue(e,t);return Nue(i,Vue)}function Gue(e,t){const i=jje(t||{},Fje(e.stage,e.size),e.size,e.padding),r=Dje(t,e.allLayerViews);return e.stage.takeScreenshot(i,r,e.backgroundColor,t?.rotation)}function Dje(e={},t){if(!e.layers)return;const i=[];return e.layers.forEach(r=>{const s=t.find(n=>n.layer.id===r.id);s?.container&&i.push(s.container)}),i}function Fje(e,t){return Math.min(4,Uue(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function jje(e,t,i,r){e.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=i[0]-(r.left+r.right),o=i[1]-(r.top+r.bottom);let a,l,u=e.area||{x:0,y:0,width:n,height:o};if(s){const h=n/o,p=s[0]/s[1];if(p>h){const f=u.width/p;u={x:u.x,y:Math.round(u.y+(u.height-f)/2),width:u.width,height:Math.round(f)}}else{const f=u.height*p;u={x:Math.round(u.x+(u.width-f)/2),y:u.y,width:Math.round(f),height:u.height}}}else s=[u.width,u.height];return s[0]>u.width?(a=Math.min(s[0]/u.width,t),l=s[0]/u.width/a):(a=1,l=s[0]/u.width),{cropArea:{x:Math.round((u.x+r.left)*a),y:Math.round((u.y+r.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const bJ=160;let I_=class extends Je{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=bJ&&this.clear()},bJ))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],I_.prototype,"_timer",void 0),c([d()],I_.prototype,"stationary",null),I_=c([F("esri.views.2d.support.StationaryManager")],I_);const Uje=e=>e.includes("Brush");let Bue=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),Uje(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}},IR;function Vje(){return IR||(IR=zje()),IR}let Gje=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function Bje(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let i=t.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(i==null&&(i=t.getContext("webgl2"),i!=null&&(e.majorPerformanceCaveat=!0)),i==null)return i;e.available=!0,e.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),i}function zje(){const e=new Gje,t=Bje(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function qje(e){const t=Vje();return t.available?e==="3d"&&t.majorPerformanceCaveat?new W("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new W("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new W("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new W("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Hje(e){return e&&"nodeType"in e}function Wje(e){return e&&typeof e.render=="function"}const wJ={component:"esri-component"};let Km=class extends Je{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){const i=this._get("node");t!==i&&(t&&t.classList.add(wJ.component),i&&i.classList.remove(wJ.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?typeof t=="string"||Hje(t)?(this._set("widget",null),J9(t)):(Wje(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};c([d()],Km.prototype,"id",null),c([d()],Km.prototype,"node",null),c([Ht("node")],Km.prototype,"castNode",null),c([d({readOnly:!0})],Km.prototype,"widget",void 0),Km=c([F("esri.views.ui.Component")],Km);const _I=Km,zue="calcite-mode-";function Jje(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function Zje(){return Jje().startsWith("dark")}function Yje(){return`${zue}${Zje()?"dark":"light"}`}function Kje(e){Xje(e),e.classList.add(Yje())}function Xje(e){Array.from(e.classList).forEach(t=>{t.startsWith(zue)&&e.classList.remove(t)})}const Qje={left:0,top:0,bottom:0,right:0},que={bottom:30,top:15,right:15,left:15},Fc="esri-ui",oo={ui:Fc,corner:`${Fc}-corner`,innerContainer:`${Fc}-inner-container`,manualContainer:`${Fc}-manual-container`,cornerContainer:`${Fc}-corner-container`,topLeft:`${Fc}-top-left`,topRight:`${Fc}-top-right`,bottomLeft:`${Fc}-bottom-left`,bottomRight:`${Fc}-bottom-right`};function eUe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function uE(e){return e===0?"0":`${e}px`}function AR(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function $R(e,{top:t,bottom:i,left:r,right:s}){e.style.top=t,e.style.bottom=i,e.style.left=r,e.style.right=s}let Du=class extends ap.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Co(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&$R(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&$R(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([at(()=>[this.view?.padding,this.container],this._applyViewPadding,Bs),at(()=>this.padding,this._applyUIPadding,Bs),at(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},Bs),ree(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(oo.ui),Kje(e),this._attachContainers(e)),t&&(t.classList.remove(oo.ui),$R(t,{top:"",bottom:"",left:"",right:""}),t.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const t=this._getViewPadding(),{top:i,bottom:r}=t;return Math.max(e-i-r,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...que,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const t=this._getViewPadding(),{left:i,right:r}=t;return Math.max(e-i-r,0)}add(e,t){let i,r,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const n=AR(e);n&&({index:i,position:t,component:e,key:r}=n),t&&typeof t=="object"&&({index:i,key:r,position:t,internal:s}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,i,r,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,t));const i=this._find(e);if(i){if(this._componentMap.has(i)&&this._componentMap.get(i)?.key!==t)return;const r=this._components.indexOf(i);return i.node.parentNode?.removeChild(i.node),this._componentMap.delete(i),i.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(r,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,t);return}const i=this._positionNameToContainerLookup[e??"manual"],r=Array.prototype.slice.call(i.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||t.removeInternal);for(const s of r)this.remove(s)}move(e,t){if(Array.isArray(e)&&e.forEach(n=>this.move(n,t)),!e)return;let i;const r=AR(e)||AR(t);if(r&&(i=r.index,t=r.position,e=r.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:i})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(i=>this._getComponentsAtPosition(i,t)):this._getComponentsAtPosition(e,t):this._components.filter(i=>t.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:r})=>i??r)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,i,r,s){e instanceof _I||(e=new _I({node:e}));const{widget:n}=e;n!=null&&n instanceof Je&&n.addHandles(ti(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:i}),this._components.push(e),this._componentMap.set(e,{key:r,internal:s})}_find(e){return e?e instanceof _I?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??Qje}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(oo.innerContainer,oo.cornerContainer);const t=document.createElement("div");t.classList.add(oo.innerContainer,oo.manualContainer);const i=document.createElement("div");i.classList.add(oo.topLeft,oo.corner),e.appendChild(i);const r=document.createElement("div");r.classList.add(oo.topRight,oo.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(oo.bottomLeft,oo.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(oo.bottomRight,oo.corner),e.appendChild(n),this._innerContainer=e,this._manualContainer=t;const o=Uke();this._cornerNameToContainerLookup={"top-left":i,"top-right":r,"bottom-left":s,"bottom-right":n,"top-leading":o?r:i,"top-trailing":o?i:r,"bottom-leading":o?n:s,"bottom-trailing":o?s:n},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.position??"manual",{component:i,index:r}=e,s=this._positionNameToContainerLookup[t],n=r!=null&&r>-1;if(eUe(i.widget)&&i.widget.startup(),!n)return void s.appendChild(i.node);const o=Array.from(s.children);if(r===0){const{firstChild:l}=s;return void(l?l.parentNode?.insertBefore(i.node,l):s.appendChild(i.node))}if(r>=o.length)return void s.appendChild(i.node);const a=o[r];a.parentNode?.insertBefore(i.node,a)}_toPixelPosition(e){return{top:uE(e.top),left:uE(e.left),right:uE(e.right),bottom:uE(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){const i=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(i.children).map(r=>this._findByNode(r)).filter(ko).filter(r=>t.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:s})=>r??s)}};c([d()],Du.prototype,"_locale",void 0),c([d()],Du.prototype,"container",null),c([d()],Du.prototype,"height",null),c([d({value:que})],Du.prototype,"padding",null),c([Ht("padding")],Du.prototype,"castPadding",null),c([d()],Du.prototype,"view",void 0),c([d()],Du.prototype,"width",null),Du=c([F("esri.views.ui.UI")],Du);const tUe=Du,iUe={handleInterceptedEvent:(e,t,i,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||i,[r]))},rUe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,i)=>{t.charAt(0)==="-"?e.style.setProperty(t,i):e.style[t]=i}},sUe=e=>({...rUe,...e}),nUe=(e,t)=>{const i=[];for(;e&&e!==t;)i.push(e),e=e.parentNode;return i},oUe=(e,t)=>e.find(t),_J=(e,t,i=!1)=>{let r=e;return t.forEach((s,n)=>{const o=r?.children?oUe(r.children,a=>a.domNode===s):void 0;i&&!o&&n!==t.length-1||(r=o)}),r},aUe=e=>{let t;const i={...iUe,...e},r=sUe(i),s=r.performanceLogger;let n,o=!0,a=!1;const l=[],u=[],h=(f,m,g)=>{let b;r.eventHandlerInterceptor=(S,T,x,_)=>function(M){let I;s("domEvent",M);const A=nUe(M.currentTarget,b.domNode),C=A.some(O=>customElements.get(O?.tagName?.toLowerCase()));if(M.eventPhase===Event.CAPTURING_PHASE||!C)A.reverse(),I=_J(b.getLastRender(),A);else{const O=M.composedPath(),k=O.slice(O.indexOf(M.currentTarget),O.indexOf(b.domNode)).reverse();I=_J(b.getLastRender(),k,!0)}let R;return I&&(R=i.handleInterceptedEvent(t,I,this,M)),s("domEventProcessed",M),R},i.postProcessProjectionOptions?.(r);const w=g();b=f(m,w,r),r.eventHandlerInterceptor=void 0,l.push(b),u.push(g),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(b,w)};let p=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let f=0;f<l.length;f++){const m=u[f]();s("rendered",void 0);try{l[f].update(m)}catch(g){console.error(g)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,u)),t={renderNow:p,scheduleRender:()=>{n||a||(n=requestAnimationFrame(p))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(f,m)=>{h(kd.append,f,m)},insertBefore:(f,m)=>{h(kd.insertBefore,f,m)},merge:(f,m)=>{h(kd.merge,f,m)},replace:(f,m)=>{h(kd.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const Hue="calcite-mode-auto",Wue="calcite-mode-dark",lUe="calcite-mode-light",_vt={autoMode:Hue,darkMode:Wue,lightMode:lUe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},Svt={filter:250,nextTick:0,resize:150,reposition:100};var qa={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},uUe=Object.defineProperty,cUe=(e,t)=>{for(var i in t)uUe(e,i,{get:t[i],enumerable:!0})},Jue=new WeakMap,Ig=e=>Jue.get(e),hUe=(e,t)=>{const i={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Jue.set(e,i)},SJ=(e,t)=>t in e,Ix=(e,t)=>(0,console.error)(e,t),tA=new Map,pUe=[],dUe="slot-fb{display:contents}slot-fb[hidden]{display:none}",xJ="http://www.w3.org/1999/xlink",Ax=typeof window<"u"?window:{},tu=Ax.document||{head:{}},xvt=Ax.HTMLElement||class{},Os={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,i,r)=>e.addEventListener(t,i,r),rel:(e,t,i,r)=>e.removeEventListener(t,i,r),ce:(e,t)=>new CustomEvent(e,t)},fUe=(()=>{let e=!1;try{tu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),mUe=e=>Promise.resolve(e),yUe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),VD=!1,GD=[],Zue=[],Yue=(e,t)=>i=>{e.push(i),VD||(VD=!0,t&&Os.$flags$&4?gUe(BD):Os.raf(BD))},TJ=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(i){Ix(i)}e.length=0},BD=()=>{TJ(GD),TJ(Zue),(VD=GD.length>0)&&Os.raf(BD)},gUe=e=>mUe().then(e),Tvt=Yue(GD,!1),vUe=Yue(Zue,!0),bUe=e=>{const t=new URL(e,Os.$resourcesUrl$);return t.origin!==Ax.location.origin?t.href:t.pathname},wUe=e=>Os.$resourcesUrl$=e,EJ={},_Ue="http://www.w3.org/2000/svg",SUe="http://www.w3.org/1999/xhtml",xUe=e=>e!=null,h7=e=>(e=typeof e,e==="object"||e==="function");function TUe(e){var t,i,r;return(r=(i=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:i.getAttribute("content"))!=null?r:void 0}var EUe={};cUe(EUe,{err:()=>Kue,map:()=>MUe,ok:()=>zD,unwrap:()=>IUe,unwrapErr:()=>AUe});var zD=e=>({isOk:!0,isErr:!1,value:e}),Kue=e=>({isOk:!1,isErr:!0,value:e});function MUe(e,t){if(e.isOk){const i=t(e.value);return i instanceof Promise?i.then(r=>zD(r)):zD(i)}if(e.isErr){const i=e.value;return Kue(i)}throw"should never get here"}var IUe=e=>{if(e.isOk)return e.value;throw e.value},AUe=e=>{if(e.isErr)return e.value;throw e.value},og=(e,t="")=>()=>{},Xue=(e,t,...i)=>{let r=null,s=null,n=null,o=!1,a=!1;const l=[],u=p=>{for(let f=0;f<p.length;f++)r=p[f],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((o=typeof e!="function"&&!h7(r))&&(r=String(r)),o&&a?l[l.length-1].$text$+=r:l.push(o?iA(null,r):r),a=o)};if(u(i),t){t.key&&(s=t.key),t.name&&(n=t.name);{const p=t.className||t.class;p&&(t.class=typeof p!="object"?p:Object.keys(p).filter(f=>p[f]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,RUe);const h=iA(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),h.$key$=s,h.$name$=n,h},iA=(e,t)=>{const i={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},$Ue={},CUe=e=>e&&e.$tag$===$Ue,RUe={forEach:(e,t)=>e.map(MJ).forEach(t),map:(e,t)=>e.map(MJ).map(t).map(OUe)},MJ=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),OUe=e=>{if(typeof e.vtag=="function"){const i={...e.vattrs};return e.vkey&&(i.key=e.vkey),e.vname&&(i.name=e.vname),Xue(e.vtag,i,...e.vchildren||[])}const t=iA(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},PUe=e=>pUe.map(t=>t(e)).find(t=>!!t),LUe=(e,t)=>e!=null&&!h7(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,NUe=e=>e,Evt=(e,t,i)=>{const r=NUe(e);return{emit:s=>kUe(r,t,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:s})}},kUe=(e,t,i)=>{const r=Os.ce(t,i);return e.dispatchEvent(r),r},IJ=new WeakMap,DUe=(e,t,i)=>{let r=tA.get(e);yUe&&i?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,tA.set(e,r)},FUe=(e,t,i)=>{var r;const s=Que(t,i),n=tA.get(s);if(e=e.nodeType===11?e:tu,n)if(typeof n=="string"){e=e.head||e;let o=IJ.get(e),a;if(o||IJ.set(e,o=new Set),!o.has(s)){{a=tu.createElement("style"),a.innerHTML=n;const l=(r=Os.$nonce$)!=null?r:TUe(tu);l!=null&&a.setAttribute("nonce",l),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=dUe),o&&o.add(s)}}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return s},jUe=e=>{const t=e.$cmpMeta$,i=e.$hostElement$,r=t.$flags$,s=og("attachStyles",t.$tagName$),n=FUe(i.shadowRoot?i.shadowRoot:i.getRootNode(),t,e.$modeName$);r&10&&r&2&&(i["s-sc"]=n,i.classList.add(n+"-h"),r&2&&i.classList.add(n+"-s")),s()},Que=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),AJ=(e,t,i,r,s,n)=>{if(i!==r){let o=SJ(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=$J(i),h=$J(r);l.remove(...u.filter(p=>p&&!h.includes(p))),l.add(...h.filter(p=>p&&!u.includes(p)))}else if(t==="style"){for(const l in i)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!i||r[l]!==i[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):SJ(Ax,a)?t=a.slice(2):t=a[2]+t.slice(3),i||r){const l=t.endsWith(ece);t=t.replace(VUe,""),i&&Os.rel(e,t,i,l),r&&Os.ael(e,t,r,l)}}else{const l=h7(r);if((o||l&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const h=r??"";t==="list"?o=!1:(i==null||e[t]!=h)&&(e[t]=h)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(xJ,t):e.removeAttribute(t)):(!o||n&4||s)&&!l&&(r=r===!0?"":r,u?e.setAttributeNS(xJ,t,r):e.setAttribute(t,r))}}},UUe=/\s/,$J=e=>e?e.split(UUe):[],ece="Capture",VUe=new RegExp(ece+"$"),tce=(e,t,i)=>{const r=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||EJ,n=t.$attrs$||EJ;for(const o of CJ(Object.keys(s)))o in n||AJ(r,o,s[o],void 0,i,t.$flags$);for(const o of CJ(Object.keys(n)))AJ(r,o,s[o],n[o],i,t.$flags$)};function CJ(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var W0,qD,I1,rA=!1,sA=!1,p7=!1,ra=!1,nA=(e,t,i,r)=>{var s;const n=t.$children$[i];let o=0,a,l,u;if(rA||(p7=!0,n.$tag$==="slot"&&(W0&&r.classList.add(W0+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)a=n.$elm$=tu.createTextNode(n.$text$);else if(n.$flags$&1)a=n.$elm$=tu.createTextNode("");else{if(ra||(ra=n.$tag$==="svg"),a=n.$elm$=tu.createElementNS(ra?_Ue:SUe,!rA&&qa.slotRelocation&&n.$flags$&2?"slot-fb":n.$tag$),ra&&n.$tag$==="foreignObject"&&(ra=!1),tce(null,n,ra),!!a.getRootNode().querySelector("body")&&qa.scoped&&xUe(W0)&&a["s-si"]!==W0&&a.classList.add(a["s-si"]=W0),f7(a,r),n.$children$)for(o=0;o<n.$children$.length;++o)l=nA(e,n,o,a),l&&a.appendChild(l);n.$tag$==="svg"?ra=!1:a.tagName==="foreignObject"&&(ra=!0)}return a["s-hn"]=I1,n.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=qD,a["s-sn"]=n.$name$||"",a["s-rf"]=(s=n.$attrs$)==null?void 0:s.ref,u=e&&e.$children$&&e.$children$[i],u&&u.$tag$===n.$tag$&&e.$elm$&&pS(e.$elm$,!1)),a},pS=(e,t)=>{Os.$flags$|=1;const i=Array.from(e.childNodes);if(e["s-sr"]&&qa.experimentalSlotFixes){let r=e;for(;r=r.nextSibling;)r&&r["s-sn"]===e["s-sn"]&&r["s-sh"]===I1&&i.push(r)}for(let r=i.length-1;r>=0;r--){const s=i[r];s["s-hn"]!==I1&&s["s-ol"]&&(qd(sce(s),s,d7(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,p7=!0),t&&pS(s,t)}Os.$flags$&=-2},ice=(e,t,i,r,s,n)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===I1&&(o=o.shadowRoot);s<=n;++s)r[s]&&(a=nA(null,i,s,e),a&&(r[s].$elm$=a,qd(o,a,d7(t))))},rce=(e,t,i)=>{for(let r=t;r<=i;++r){const s=e[r];if(s){const n=s.$elm$;ace(s),n&&(sA=!0,n["s-ol"]?n["s-ol"].remove():pS(n,!0),n.remove())}}},GUe=(e,t,i,r,s=!1)=>{let n=0,o=0,a=0,l=0,u=t.length-1,h=t[0],p=t[u],f=r.length-1,m=r[0],g=r[f],b,w;for(;n<=u&&o<=f;)if(h==null)h=t[++n];else if(p==null)p=t[--u];else if(m==null)m=r[++o];else if(g==null)g=r[--f];else if(cE(h,m,s))J0(h,m,s),h=t[++n],m=r[++o];else if(cE(p,g,s))J0(p,g,s),p=t[--u],g=r[--f];else if(cE(h,g,s))(h.$tag$==="slot"||g.$tag$==="slot")&&pS(h.$elm$.parentNode,!1),J0(h,g,s),qd(e,h.$elm$,p.$elm$.nextSibling),h=t[++n],g=r[--f];else if(cE(p,m,s))(h.$tag$==="slot"||g.$tag$==="slot")&&pS(p.$elm$.parentNode,!1),J0(p,m,s),qd(e,p.$elm$,h.$elm$),p=t[--u],m=r[++o];else{for(a=-1,l=n;l<=u;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===m.$key$){a=l;break}a>=0?(w=t[a],w.$tag$!==m.$tag$?b=nA(t&&t[o],i,a,e):(J0(w,m,s),t[a]=void 0,b=w.$elm$),m=r[++o]):(b=nA(t&&t[o],i,o,e),m=r[++o]),b&&qd(sce(h.$elm$),b,d7(h.$elm$))}n>u?ice(e,r[f+1]==null?null:r[f+1].$elm$,i,r,o,f):o>f&&rce(t,n,u)},cE=(e,t,i=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&i&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:i?!0:e.$key$===t.$key$:!1,d7=e=>e&&e["s-ol"]||e,sce=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,J0=(e,t,i=!1)=>{const r=t.$elm$=e.$elm$,s=e.$children$,n=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(ra=o==="svg"?!0:o==="foreignObject"?!1:ra,o==="slot"&&!rA||tce(e,t,ra),s!==null&&n!==null?GUe(r,s,t,n,i):n!==null?(e.$text$!==null&&(r.textContent=""),ice(r,null,t,n,0,n.length-1)):!i&&qa.updatable&&s!==null&&rce(s,0,s.length-1),ra&&o==="svg"&&(ra=!1)):(l=r["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(r.data=a)},nce=e=>{const t=e.childNodes;for(const i of t)if(i.nodeType===1){if(i["s-sr"]){const r=i["s-sn"];i.hidden=!1;for(const s of t)if(s!==i){if(s["s-hn"]!==i["s-hn"]||r!==""){if(s.nodeType===1&&(r===s.getAttribute("slot")||r===s["s-sn"])||s.nodeType===3&&r===s["s-sn"]){i.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){i.hidden=!0;break}}}nce(i)}},Nh=[],oce=e=>{let t,i,r;for(const s of e.childNodes){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){i=t.parentNode.childNodes;const n=s["s-sn"];for(r=i.length-1;r>=0;r--)if(t=i[r],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==s["s-hn"]&&!qa.experimentalSlotFixes)if(RJ(t,n)){let o=Nh.find(a=>a.$nodeToRelocate$===t);sA=!0,t["s-sn"]=t["s-sn"]||n,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],Nh.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&Nh.map(a=>{RJ(a.$nodeToRelocate$,t["s-sn"])&&(o=Nh.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else Nh.some(o=>o.$nodeToRelocate$===t)||Nh.push({$nodeToRelocate$:t})}s.nodeType===1&&oce(s)}},RJ=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",ace=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(ace)},qd=(e,t,i)=>{const r=e?.insertBefore(t,i);return f7(t,e),r},lce=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...lce(e.parentElement)),t},f7=(e,t,i=!1)=>{var r;if(e&&t&&e.nodeType===1){const s=new Set(lce(t).filter(Boolean));if(s.size&&((r=e.classList)==null||r.add(...e["s-scs"]=[...s]),e["s-ol"]||i))for(const n of Array.from(e.childNodes))f7(n,e,!0)}},BUe=(e,t,i=!1)=>{var r,s,n,o,a;const l=e.$hostElement$,u=e.$cmpMeta$,h=e.$vnode$||iA(null,null),p=CUe(t)?t:Xue(null,null,t);if(I1=l.tagName,u.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},u.$attrsToReflect$.map(([f,m])=>p.$attrs$[m]=l[f])),i&&p.$attrs$)for(const f of Object.keys(p.$attrs$))l.hasAttribute(f)&&!["key","ref","style","class"].includes(f)&&(p.$attrs$[f]=l[f]);p.$tag$=null,p.$flags$|=4,e.$vnode$=p,p.$elm$=h.$elm$=l.shadowRoot||l,W0=l["s-sc"],rA=(u.$flags$&1)!==0,qD=l["s-cr"],sA=!1,J0(h,p,i);{if(Os.$flags$|=1,p7){oce(p.$elm$);for(const f of Nh){const m=f.$nodeToRelocate$;if(!m["s-ol"]){const g=tu.createTextNode("");g["s-nr"]=m,qd(m.parentNode,m["s-ol"]=g,m)}}for(const f of Nh){const m=f.$nodeToRelocate$,g=f.$slotRefNode$;if(g){const b=g.parentNode;let w=g.nextSibling;{let S=(r=m["s-ol"])==null?void 0:r.previousSibling;for(;S;){let T=(s=S["s-nr"])!=null?s:null;if(T&&T["s-sn"]===m["s-sn"]&&b===T.parentNode){for(T=T.nextSibling;T===m||T?.["s-sr"];)T=T?.nextSibling;if(!T||!T["s-nr"]){w=T;break}}S=S.previousSibling}}(!w&&b!==m.parentNode||m.nextSibling!==w)&&m!==w&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),qd(b,m,w),m.nodeType===1&&(m.hidden=(n=m["s-ih"])!=null?n:!1)),m&&typeof g["s-rf"]=="function"&&g["s-rf"](m)}else m.nodeType===1&&(i&&(m["s-ih"]=(o=m.hidden)!=null?o:!1),m.hidden=!0)}}sA&&nce(p.$elm$),Os.$flags$&=-2,Nh.length=0}if(qa.experimentalScopedSlotChanges&&u.$flags$&2)for(const f of p.$elm$.childNodes)f["s-hn"]!==I1&&!f["s-sh"]&&(i&&f["s-ih"]==null&&(f["s-ih"]=(a=f.hidden)!=null?a:!1),f.hidden=!0);qD=void 0},zUe=(e,t)=>{},m7=(e,t)=>(e.$flags$|=16,zUe(e,e.$ancestorComponent$),vUe(()=>qUe(e,t))),qUe=(e,t)=>{const i=e.$hostElement$,r=og("scheduleUpdate",e.$cmpMeta$.$tagName$),s=i;if(!s)throw new Error(`Can't render component <${i.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let n;return t?n=Yv(s,"componentWillLoad"):n=Yv(s,"componentWillUpdate"),n=OJ(n,()=>Yv(s,"componentWillRender")),r(),OJ(n,()=>WUe(e,s,t))},OJ=(e,t)=>HUe(e)?e.then(t).catch(i=>{console.error(i),t()}):t(),HUe=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",WUe=async(e,t,i)=>{const r=e.$hostElement$,s=og("update",e.$cmpMeta$.$tagName$);r["s-rc"],i&&jUe(e);const n=og("render",e.$cmpMeta$.$tagName$);JUe(e,t,r,i),n(),s(),ZUe(e)},PJ=null,JUe=(e,t,i,r)=>{try{PJ=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(qa.hasRenderFn||qa.reflect)&&(qa.vdomRender||qa.reflect)&&(qa.hydrateServerSide||BUe(e,t,r))}catch(l){Ix(l,e.$hostElement$)}return PJ=null,null},ZUe=e=>{const t=e.$cmpMeta$.$tagName$,i=e.$hostElement$,r=og("postUpdate",t),s=i;e.$ancestorComponent$,Yv(s,"componentDidRender"),e.$flags$&64?(Yv(s,"componentDidUpdate"),r()):(e.$flags$|=64,Yv(s,"componentDidLoad"),r())},Mvt=e=>{{const t=Ig(e),i=t.$hostElement$.isConnected;return i&&(t.$flags$&18)===2&&m7(t,!1),i}},Yv=(e,t,i)=>{if(e&&e[t])try{return e[t](i)}catch(r){Ix(r)}},YUe=(e,t)=>Ig(e).$instanceValues$.get(t),KUe=(e,t,i,r)=>{const s=Ig(e),n=e,o=s.$instanceValues$.get(t),a=s.$flags$,l=n;i=LUe(i,r.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){s.$instanceValues$.set(t,i);{if(r.$watchers$&&a&128){const p=r.$watchers$[t];p&&p.map(f=>{try{l[f](i,o,t)}catch(m){Ix(m,n)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,t)===!1)return;m7(s,!1)}}}},XUe=(e,t,i)=>{var r,s;const n=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((r=t.$members$)!=null?r:{});o.map(([a,[l]])=>{(l&31||l&32)&&Object.defineProperty(n,a,{get(){return YUe(this,a)},set(u){KUe(this,a,u,t)},configurable:!0,enumerable:!0})});{const a=new Map;n.attributeChangedCallback=function(l,u,h){Os.jmp(()=>{var p;const f=a.get(l);if(this.hasOwnProperty(f))h=this[f],delete this[f];else{if(n.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==h)return;if(f==null){const m=Ig(this),g=m?.$flags$;if(g&&!(g&8)&&g&128&&h!==u){const w=this,S=(p=t.$watchers$)==null?void 0:p[l];S?.forEach(T=>{w[T]!=null&&w[T].call(w,h,u,l)})}return}}this[f]=h===null&&typeof this[f]=="boolean"?!1:h})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...o.filter(([l,u])=>u[0]&15).map(([l,u])=>{var h;const p=u[1]||l;return a.set(p,l),u[0]&512&&((h=t.$attrsToReflect$)==null||h.push([l,p])),p})]))}}return e},QUe=async(e,t,i,r)=>{let s;if(!(t.$flags$&32)){t.$flags$|=32,i.$lazyBundleId$;{s=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(t.$modeName$=PUe(e),t.$modeName$&&(o=s.style[t.$modeName$]));const a=Que(i,t.$modeName$);if(!tA.has(a)){const l=og("registerStyles",i.$tagName$);DUe(a,o,!!(i.$flags$&1)),l()}}}t.$ancestorComponent$,m7(t,!0)},LJ=e=>{},eVe=e=>{if(!(Os.$flags$&1)){const t=Ig(e),i=t.$cmpMeta$,r=og("connectedCallback",i.$tagName$);t.$flags$&1?(uce(e,t,i.$listeners$),t?.$lazyInstance$?LJ(t.$lazyInstance$):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>LJ(t.$lazyInstance$))):(t.$flags$|=1,i.$flags$&12&&tVe(e),i.$members$&&Object.entries(i.$members$).map(([s,[n]])=>{if(n&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),QUe(e,t,i)),r()}},tVe=e=>{const t=e["s-cr"]=tu.createComment("");t["s-cn"]=!0,qd(e,t,e.firstChild)},iVe=async e=>{if(!(Os.$flags$&1)){const t=Ig(e);t.$rmListeners$&&(t.$rmListeners$.map(i=>i()),t.$rmListeners$=void 0)}},Ivt=(e,t)=>{const i={$flags$:t[0],$tagName$:t[1]};i.$members$=t[2],i.$listeners$=t[3],i.$watchers$=e.$watchers$,i.$attrsToReflect$=[];const r=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){hUe(this,i)},connectedCallback(){const n=Ig(this);uce(this,n,i.$listeners$),eVe(this),r&&r.call(this)},disconnectedCallback(){iVe(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${i.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=i.$tagName$,XUe(e,i)},Avt=(e,t)=>t,uce=(e,t,i,r)=>{i&&i.map(([s,n,o])=>{const a=sVe(e,s),l=rVe(t,o),u=nVe(s);Os.ael(a,n,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Os.rel(a,n,l,u))})},rVe=(e,t)=>i=>{var r;try{qa.lazyLoad||e.$hostElement$[t](i)}catch(s){Ix(s)}},sVe=(e,t)=>t&4?tu:t&8?Ax:t&16?tu.body:e,nVe=e=>fUe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const c2=globalThis.calciteConfig,$vt=c2?.focusTrapStack||[];c2?.logLevel;const NJ="2.13.2",oVe="2024-10-24",aVe="e38e2977d";function lVe(){if(c2&&c2.version)return;console.info(`Using Calcite Components ${NJ} [Date: ${oVe}, Revision: ${aVe}]`);const e=c2||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:NJ,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const uVe=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function kJ(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>e.contains(Wue)||e.contains(Hue)&&t?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&r(o),n=o};let n=i();r(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function cVe(){uVe()&&(document.readyState==="interactive"?kJ():document.addEventListener("DOMContentLoaded",()=>kJ(),{once:!0})),lVe()}const hVe=cVe;hVe();let cce;function pVe(){try{bUe(".")}catch{wUe(ua(ii(cce)))}}function y7(e){const t=[];for(const i of Object.keys(e))customElements.get(`calcite-${i}`)||t.push(e[i]?.());return t.length>0?Promise.all(t):null}cce="components/assets";const hce=Symbol("widget"),pce=Symbol("widget-test-data"),dVe=[],fVe={},oA=new WeakMap;function dce(e,t){let i=t.children;if(i?.length)for(let s=0;s<i.length;++s)i[s]=dce(e,i[s]);else i=dVe;const r=t.vnodeSelector;if(aA(r)){const s=t.properties||fVe,n=s.key||r,o={key:n,afterCreate:mVe,afterUpdate:yVe,afterRemoved:fce,parentWidget:e,widgetConstructor:r,widgetProperties:{...s,key:n,children:i}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function mVe(e,t,i,{parentWidget:r,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=e,oA.set(e,o),o.afterCreate?.(o,e),r.addHandles(ti(()=>fce(e))),queueMicrotask(()=>{o[pce].projector.renderNow()})}function yVe(e,t,i,{widgetProperties:r}){const s=oA.get(e);s&&(s.set(r),s.afterUpdate?.(s,e))}function fce(e){const t=oA.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),oA.delete(e))}function aA(e){return typeof e=="function"&&e[hce]}const DJ=new Set;function gVe(e){DJ.add(e),e.finally(()=>DJ.delete(e))}var mce;const vVe="esri.widgets.Widget";let bVe=0;function yce(e,t){const i=Object.prototype.hasOwnProperty;for(const r in t)i.call(t,r)&&i.call(e,r)&&(e[r]!=null&&t[r]!=null&&typeof e[r]=="object"&&typeof t[r]=="object"?yce(e[r],t[r]):e[r]=t[r]);return e}const wVe=aUe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,i=/capture$/i;e.eventHandlerInterceptor=(r,s,n,o)=>{const a=t?.(r,s,n,o),l=i.test(r);if(!((r=r.replace(i,"")).toLowerCase()in n)||l){const u=r[2].toLowerCase()+r.slice(3),h=m=>a?.call(n,m);n.addEventListener(u,h,l);const p=()=>n.removeEventListener(u,h,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),p()}}return a}},handleInterceptedEvent(e,t,i,r){const{eventPhase:s,type:n}=r,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(qae(),e.scheduleRender(),l[a].call(l.bind||i,r))}});let CR=!1,Br=class extends v$(ap.EventedAccessor){constructor(t,i){super(t,i),this._attached=!1,this._projector=wVe,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=h$(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:u,propertyName:h})=>{if(this.destroyed)return;let p=await aee(u);this.uiStrings&&Object.keys(this.uiStrings)&&(p=yce(K(p),this.uiStrings)),this[h]=p}));if(this.destroyed)return;for(const u of l)u.status==="rejected"&&xe.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()}),pVe();const r="esri-widget-uid-"+Z8(),s=this.render.bind(this);this._trackingTarget=new p$(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),u=l.properties??={};if(u.key??=r,aA(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?u.styles||(u.styles={}):(u.class="",u.styles={display:"none"}),u.styles.display??="";let h=0;return l.children?.forEach(p=>{aA(p.vnodeSelector)||(p.properties??={},p.properties.key??=`${this.id}--${h++}`)}),dce(this,l)};this.render=()=>{if(CR)return o();let l=Dke(this)??null;if(l)return l;this._trackingTarget.clear(),CR=!0;try{l=Qh(this._trackingTarget,o)}catch(u){throw xe.getLogger(this).error(u),u}finally{CR=!1}return l&&Fke(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),gVe(this._resourcesFetch)}normalizeCtorArgs(t,i){const r={...t};return i&&(r.container=i),r}postInitialize(){}beforeFirstRender(){const t=this.loadDependencies();return this._messageBundleProps?.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch(TU):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Wi(this._trackingTarget),Wi(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,lR(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return J9(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+bVe++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(mce=hce,pce)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(lR(this),this._projector.scheduleRender())}own(t){mX(xe.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return jke.apply(this,t)}renderNow(){lR(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(at(()=>this.viewModel,(i,r)=>{r&&this.removeHandles("delegated-events"),i&&c$(i)&&this.addHandles(this._delegatedEventNames.map(s=>GS(i,s,n=>{this.emit(s,n)})),"delegated-events")},sa)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(TU),this.scheduleRender()};this.addHandles([ree(t),at(()=>this.uiStrings,t),vc(()=>this.container,i=>{this.destroyed||this._attach(i)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}};Br[mce]=!0,Br.vnodeSelector="div",c([d()],Br.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Br.prototype,"container",null),c([Ht("container")],Br.prototype,"castContainer",null),c([d()],Br.prototype,"icon",null),c([d()],Br.prototype,"id",null),c([d()],Br.prototype,"label",null),c([d()],Br.prototype,"renderable",null),c([d()],Br.prototype,"uiStrings",void 0),c([d()],Br.prototype,"viewModel",void 0),c([d({value:!0})],Br.prototype,"visible",null),c([d()],Br.prototype,"key",void 0),c([d()],Br.prototype,"children",void 0),c([d()],Br.prototype,"afterCreate",void 0),c([d()],Br.prototype,"afterUpdate",void 0),c([d()],Br.prototype,"afterRemoved",void 0),Br=c([F(vVe)],Br);const PC=Br,_Ve=new Map;function SVe(e){return _Ve.get(e)}function FJ(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function xVe(e,t){return e.length!==t.length||e.some((i,r)=>i.text!==t[r].text)}function aw(e,t,i){!i||!t||e.find(r=>r.layerView===t&&r.text===i)||e.push({text:i,layerView:t})}function TVe(e){return e.type==="bing-maps"}const jc=[];let Z0=class extends Je{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Be,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const i=this.view?.allLayerViews;i&&(this.addHandles(i.map(r=>at(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),i.forEach(r=>{r.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([au(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),vc(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e?.allLayerViews;if(jc.length=0,!e||!t)return void this._clear();t.forEach(r=>{if(r.suspended||!r.layer?.attributionVisible)return;const s=r.layer;if(FJ(s,"user"))return void aw(jc,r,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(r)){const o=this._fetchedAttributionData.get(r);return void(o?aw(jc,r,this._getDynamicAttribution(o,e,s)):FJ(s)&&aw(jc,r,s.copyright))}return void this._fetchAttributionData(r)}const n="portalItem"in s?s.portalItem?.accessInformation:void 0;aw(jc,r,n||s.copyright)});const i=t.find(r=>r.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const r=SVe(this.view);if(r){const s=r.getAttributionText();for(let n=0;n<s.length;++n)aw(jc,i,s[n])}}xVe(this.items,jc)&&(this.items.removeAll(),this.items.addMany(jc)),jc.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await b$(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const i=t.ok?this._createContributionIndex(t.value,TVe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,i)}this._updateAttributionItems()}_createContributionIndex(e,t){const i=e.contributors,r={};if(!i)return r;for(let s=0;s<i.length;s++){const n=i[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),p=new bt({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:ke.WGS84}),f={extent:Ty(p),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let m=u;m<=h;m++)r[m]??=[],r[m].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,t,i){const{extent:r,scale:s}=t;let n=i.tileInfo?.scaleToZoom(s)??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!r||n==null||n<=-1)return"";const o=e[n],a=x$(r.center.clone().normalize(),ke.WebMercator),l=new Set;return o?o.filter(u=>{const h=u.id,p=!l.has(h)&&a&&u.extent&&KS(u.extent,a);return p&&l.add(h),p}).sort((u,h)=>h.score-u.score||u.objectId-h.objectId).map(u=>u.attribution).join(", "):""}};c([d({readOnly:!0,type:Be})],Z0.prototype,"items",void 0),c([d({readOnly:!0})],Z0.prototype,"state",null),c([d()],Z0.prototype,"view",void 0),Z0=c([F("esri.widgets.Attribution.AttributionViewModel")],Z0);const gce=Z0,uc={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function EVe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:IVe(e[t])}}}function MVe(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function IVe(e){return function(t,...i){MVe(t)?zke(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...i)}}function LC(e){return(t,i)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:i})}}var AVe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},vce=function(e,t){for(var i=0,r=e.length;i<r;i++){var s=e[i];Array.isArray(s)?vce(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=AVe(s)),t.push(s))}},$Ve=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:i[0],domNode:null};var s=[];return vce(i,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function Ao(e,t,...i){return typeof e!="function"||aA(e)?$Ve(e,t,...i):e(t,...i)}function Rvt(...e){return e}const Xg="esri-attribution",Qg={base:Xg,poweredBy:`${Xg}__powered-by`,sources:`${Xg}__sources`,open:`${Xg}--open`,sourcesOpen:`${Xg}__sources--open`,link:`${Xg}__link`};let jn=class extends PC{constructor(t,i){super(t,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new gce}initialize(){this.addHandles(au(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,i)=>(t.includes(i.text)||t.push(i.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Qg.open]:this._isOpen};return Ao("div",{bind:this,class:this.classes(Qg.base,uc.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Ao("div",{class:Qg.poweredBy},"Powered by"," ",Ao("a",{class:Qg.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,i=this._isInteractive,r=i?0:void 0,{attributionText:s}=this,n={[Qg.sourcesOpen]:t,[uc.interactive]:i};return Ao("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Qg.sources,n),innerHTML:s,tabIndex:r})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let i=!1;const{clientHeight:r,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],jn.prototype,"_isOpen",void 0),c([d()],jn.prototype,"_isInteractive",null),c([d()],jn.prototype,"_attributionTextOverflowed",void 0),c([d()],jn.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],jn.prototype,"attributionText",null),c([d()],jn.prototype,"icon",null),c([d()],jn.prototype,"itemDelimiter",void 0),c([d()],jn.prototype,"label",null),c([d(),LC("esri/widgets/Attribution/t9n/Attribution")],jn.prototype,"messages",void 0),c([d()],jn.prototype,"view",null),c([d({type:gce})],jn.prototype,"viewModel",void 0),c([EVe()],jn.prototype,"_toggleState",null),jn=c([F("esri.widgets.Attribution")],jn);const CVe=jn;function RVe(){const e=le("mapview-essential-goto-duration");return e==null?e:e}function OVe(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}const PVe=e=>{let t=class extends e{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:r}=this;return jd(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return c([d()],t.prototype,"goToOverride",void 0),c([d()],t.prototype,"view",void 0),t=c([F("esri.widgets.support.GoTo")],t),t};let Xm=class extends PVe(Je){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(at(()=>this.view,this._updateRotationWatcher,Bs))}destroy(){this.view=null}get canShowNorth(){return OVe(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:RVe()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const i=-t.heading;this._set("orientation",{x:0,y:0,z:i})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?at(()=>t?.rotation,this._updateForRotation,Bs):at(()=>t?.camera,this._updateForCamera,Bs))}};c([d({readOnly:!0})],Xm.prototype,"canShowNorth",null),c([d({readOnly:!0})],Xm.prototype,"orientation",void 0),c([d({readOnly:!0})],Xm.prototype,"state",null),c([d()],Xm.prototype,"view",void 0),Xm=c([F("esri.widgets.Compass.CompassViewModel")],Xm);const bce=Xm,jJ="esri-compass",UJ={base:jJ,iconContainer:`${jJ}__icon-container`};let yh=class extends PC{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new bce,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return y7({button:()=>ce(()=>import("./calcite-button-CzVpsj1P.js"),__vite__mapDeps([230,231,232,233,234,235,236,237,238,239,240,241,242,243,1]),import.meta.url),icon:()=>ce(()=>import("./calcite-icon-DzcqWTO2.js"),__vite__mapDeps([244,241,232,239,1]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:i}=this.viewModel,{messages:r}=this;return Ao("div",{class:this.classes(UJ.base,uc.widget)},Ao("calcite-button",{class:uc.widgetButton,disabled:i==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Ao("div",{"aria-hidden":"true",class:UJ.iconContainer,title:r.reset},Ao("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};c([d()],yh.prototype,"goToOverride",null),c([d()],yh.prototype,"icon",null),c([d()],yh.prototype,"label",null),c([d(),LC("esri/widgets/Compass/t9n/Compass")],yh.prototype,"messages",void 0),c([d()],yh.prototype,"view",null),c([d({type:bce})],yh.prototype,"viewModel",void 0),yh=c([F("esri.widgets.Compass")],yh);const LVe=yh,VJ="esri-navigation-toggle",GJ={base:VJ,isLayoutHorizontal:`${VJ}--horizontal`};let Y0=class extends Je{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(vc(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){const t=this.view?.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};c([d({readOnly:!0})],Y0.prototype,"state",null),c([d()],Y0.prototype,"_navigationMode",void 0),c([d()],Y0.prototype,"view",void 0),Y0=c([F("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Y0);const wce=Y0;let gh=class extends PC{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new wce,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;qke(r),this.toggle()}}loadDependencies(){return y7({button:()=>ce(()=>import("./calcite-button-CzVpsj1P.js"),__vite__mapDeps([230,231,232,233,234,235,236,237,238,239,240,241,242,243,1]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.viewModel?.state==="disabled",i=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Ao("div",{class:this.classes(GJ.base,uc.widget,{[GJ.isLayoutHorizontal]:this.layout==="horizontal"})},Ao("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:i?"outline-fill":"solid",class:uc.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?void 0:-1,title:r}),Ao("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:i?"solid":"outline-fill",class:uc.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:i?-1:void 0,title:r}))}};c([d()],gh.prototype,"icon",null),c([d()],gh.prototype,"label",null),c([d({value:"vertical"})],gh.prototype,"layout",null),c([d(),LC("esri/widgets/NavigationToggle/t9n/NavigationToggle")],gh.prototype,"messages",void 0),c([d()],gh.prototype,"view",null),c([d({type:wce})],gh.prototype,"viewModel",void 0),gh=c([F("esri.widgets.NavigationToggle")],gh);const NVe=gh;let Qm=class extends Je{get canZoomIn(){if(!this.view?.ready)return!1;const i=this.view?.constraints?.effectiveMaxScale;return i===0||this._scale>i}get canZoomOut(){const{view:t}=this;if(!t?.ready)return!1;const r=t.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const t=this.view?.animation?.target;return(t&&"then"in t?void 0:t?.scale)??this.view?.scale??0}};c([d({readOnly:!0})],Qm.prototype,"canZoomIn",null),c([d({readOnly:!0})],Qm.prototype,"canZoomOut",null),c([d()],Qm.prototype,"view",void 0),c([d()],Qm.prototype,"_scale",null),Qm=c([F("esri.widgets.Zoom.ZoomConditions2D")],Qm);const kVe=Qm;let K0=class extends Je{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],K0.prototype,"canZoomIn",null),c([d({readOnly:!0})],K0.prototype,"canZoomOut",null),c([d()],K0.prototype,"view",void 0),K0=c([F("esri.widgets.Zoom.ZoomConditions3D")],K0);const DVe=K0;let ld=class extends Je{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new kVe({view:t}):t.type==="3d"&&(this._zoomConditions=new DVe({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():bO(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():bO(t.goTo({zoomFactor:.5}))}};c([d()],ld.prototype,"_zoomConditions",void 0),c([d()],ld.prototype,"canZoomIn",null),c([d()],ld.prototype,"canZoomOut",null),c([d({readOnly:!0})],ld.prototype,"state",null),c([d()],ld.prototype,"view",null),ld=c([F("esri.widgets.Zoom.ZoomViewModel")],ld);const _ce=ld,BJ={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let vh=class extends PC{constructor(t,i){super(t,i),this.messages=null,this.viewModel=new _ce,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return y7({button:()=>ce(()=>import("./calcite-button-CzVpsj1P.js"),__vite__mapDeps([230,231,232,233,234,235,236,237,238,239,240,241,242,243,1]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[BJ.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:i,canZoomOut:r}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return Ao("div",{class:this.classes(BJ.base,uc.widget,t)},Ao("calcite-button",{class:uc.widgetButton,disabled:!i,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),Ao("calcite-button",{class:uc.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};c([d()],vh.prototype,"icon",null),c([d()],vh.prototype,"label",null),c([d({value:"vertical"})],vh.prototype,"layout",null),c([d(),LC("esri/widgets/Zoom/t9n/Zoom")],vh.prototype,"messages",void 0),c([d()],vh.prototype,"view",null),c([d({type:_ce})],vh.prototype,"viewModel",void 0),vh=c([F("esri.widgets.Zoom")],vh);const FVe=vh;function jVe(e){return e?.view!==void 0}let SI=class extends tUe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=i=>{this.components.forEach(r=>{const s=this._find(r),n=s?.widget;jVe(n)&&(n.view=i)})},this._componentsWatcher=(i,r)=>{this._removeComponents(r),this._addComponents(i),this._adjustPadding(i)}}initialize(){this.addHandles([at(()=>this.components,this._componentsWatcher,Bs),at(()=>this.view,this._updateViewAwareWidgets,Bs)])}_add(t,i,r,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,i,r,s,n)}_removeComponents(t){t.forEach(i=>{const r=this._find(i);r&&(this.remove(r),r.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(t){this.constructed&&t.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(t){const i=this._createWidget(t);return new _I({id:t,node:i})}_createWidget(t){const i=this.view;switch(t){case"attribution":return new CVe({view:i});case"compass":return new LVe({view:i});case"navigation-toggle":return new NVe({view:i});case"zoom":return new FVe({view:i})}}};c([d()],SI.prototype,"components",void 0),SI=c([F("esri.views.ui.DefaultUI")],SI);const Sce=SI;let xI=class extends Sce{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],xI.prototype,"components",void 0),xI=c([F("esri.views.ui.2d.DefaultUI2D")],xI);const xce=xI;class UVe extends P8{constructor(t,i){super(t,i,"webmap")}}function RR(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}new UVe(2,32);var HD;let TI=HD=class extends ae{constructor(e){super(e),this.color=new Oe([0,0,0,1])}clone(){return new HD(K({color:this.color}))}};c([d({type:Oe,json:{write:!0}})],TI.prototype,"color",void 0),TI=HD=c([F("esri.webmap.background.ColorBackground")],TI);const Tce=TI;let Ece,Mce,Ice,Ace,$ce,Cce,Rce;async function VVe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:i,MapViewNavigation:r,MagnifierView2D:s,GridView2D:n,Stage:o}]=await Promise.all([ce(()=>import("./webglDeps-CHJXL6Ld.js"),__vite__mapDeps([165,73,72,126,166,128,1]),import.meta.url),ce(()=>import("./mapViewDeps-BA7GJ9gA.js"),__vite__mapDeps([167,1,74,75,76,77,71,72,73,49,78,43,168,128,83,169,166,91,170,115,114,82,171,106,80,81,113,165,126,172,86,173,70,12,33,174,124,122,108,125,175,176,84,79,177,178,179,180,181,182,121,183]),import.meta.url)]);Mce=e,Ice=t,Ace=i,$ce=r,Cce=s,Rce=n,Ece=o}let wt=class extends zNe(wDe(oDe(l6e))){constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new rg({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new vI({view:this}),this.graphicsView=null,this.stateManager=new pn({constraints:new iue({view:this})}),this.stationaryManager=new I_,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Q8e(this),this.floors=new Be,this.grid=null,this.highlights=Oue(),this.inputManager=new C7e({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Bue,this.type="2d",this.view2dType=null,this.ui=new xce,this.test={takeScreenshot:async t=>kje(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([at(()=>this.viewpoint,()=>this.stationaryManager.flip(),ns),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),KMe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Wi(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new F7e(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:i,viewpoint:r,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(t?.effectiveLODs||(n=-1),(!i||e===0&&n===-1)&&(r?.targetGeometry==null||r.targetGeometry.type!=="extent"&&!r.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,i=this.spatialReference;return Sne(t.spatialReference,i)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e);const i=()=>{this.destroyed||e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};e.when(i,i)}get background(){return RR(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get highlightOptions(){return wje(this)}set highlightOptions(e){_je(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(i=>!i.destroyed&&!("layerViews"in i)&&i.updating===!0)||e);if(le("esri-2d-log-updating")){const i=this.allLayerViews.reduce((r,s)=>({...r,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(i)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new Rs({rings:[e.map(t=>[t[0],t[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return Sje(this,e,t)}async takeScreenshot(e){return Nje(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=nle(e)?sle(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,i,r){return this.inputManager&&this.viewEvents.on(e,t,i,r)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return RR(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return RR(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(e){return TW.hasLayerViewModule(e)}importLayerView(e){return TW.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(xe.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),i=await this.hitTest(e),r=this.allLayerViews.toArray().filter(l=>l.clips.every(u=>Cue(this,u,e,t))).reverse(),s=new globalThis.Map(r.map(l=>[l.layer.uid,l])),n=[];let o=0,a=0;for(;o<i.results.length||a<r.length;){const l=i.results.at(o);if(l&&l.type!=="graphic"){++o;continue}const u=s.get((l?.layer??l?.graphic.layer)?.uid);if((!l||u)&&a<r.length&&r.at(a)!==u){const h=r.at(a);"fetchPopupFeaturesAtLocation"in h&&n.push({mapPoint:t,layerView:h}),++a}else l&&(n.push({graphic:l.graphic,layerView:u}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=qje(this.type);if(le("safari")&&le("safari")<9&&(e=new W("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:le("safari")})),e!=null)throw xe.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return VVe()}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:i,padding:r,size:s}=this;if(!e)return null;const n=i&&"initialViewProperties"in i?i.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=n?.viewpoint,l=a?.targetGeometry?.extent??t,u=l?.center,h=a?.rotation??0,p=a?.scale||l&&CC(l,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),f=o.center??u,m=o.rotation??h,g=o.scale??p;return f&&g?new eu({targetGeometry:f,scale:g,rotation:m}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new Ece(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Cce,this._magnifierView.magnifier=this.magnifier,this._gridView=new Rce;const i=new Ace({view:this});this._set("labelManager",i);const r=new z8e({view:this});this._set("animationManager",r);const s=new $ce({view:this,animationManager:r});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",o=>this.fatalError=o.error),at(()=>this.stationary,o=>t.stationary=o,sa),at(()=>this.background,o=>{t.backgroundColor=o?.color,this._magnifierView.backgroundColor=o?.color},sa),at(()=>this.magnifier,o=>this._magnifierView.magnifier=o,sa),at(()=>this.grid,o=>this._gridView.grid=o,sa),at(()=>this.renderingOptions,o=>t.renderingOptions=o,sa),at(()=>this.highlights.items.map(o=>({name:o.name,options:{fillColor:o.options.color,haloColor:o.options.haloColor,fillOpacity:o.options.fillOpacity,haloOpacity:o.options.haloOpacity,haloWidth:o.options.haloWidth,haloBlur:o.options.haloBlur}})),()=>{t.highlightGradient=vje(t.highlightGradient,this.highlights.items)},sa),at(()=>this.state.id,()=>t.state=this.state,sa)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(o=>o(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new a9e(sg.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new Mce({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ice(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:i,size:r,stage:s}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:i,size:r,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};wt.type="2d",c([d({readOnly:!0})],wt.prototype,"animationManager",void 0),c([d({constructOnly:!0})],wt.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],wt.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],wt.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],wt.prototype,"fullOpacity",void 0),c([d()],wt.prototype,"goToManager",void 0),c([d({readOnly:!0})],wt.prototype,"graphicsTileStore",null),c([d()],wt.prototype,"graphicsView",void 0),c([d()],wt.prototype,"stateManager",void 0),c([d()],wt.prototype,"constraintsInfo",null),c([d({readOnly:!0})],wt.prototype,"state",null),c([d()],wt.prototype,"initialExtentRequired",null),c([d()],wt.prototype,"labelManager",void 0),c([d({readOnly:!0})],wt.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],wt.prototype,"renderCanvas",void 0),c([d()],wt.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],wt.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],wt.prototype,"supportsGround",void 0),c([d()],wt.prototype,"defaultsFromMapSettings",null),c([d({readOnly:!0})],wt.prototype,"typeSpecificPreconditionsReady",null),c([d()],wt.prototype,"animation",null),c([d({type:Tce})],wt.prototype,"background",null),c([d()],wt.prototype,"center",null),c([d({type:iue})],wt.prototype,"constraints",null),c([d()],wt.prototype,"extent",null),c([d()],wt.prototype,"floors",void 0),c([d()],wt.prototype,"grid",void 0),c([d({type:ng})],wt.prototype,"highlightOptions",null),c([d({type:Be.ofType(dv)})],wt.prototype,"highlights",void 0),c([d({readOnly:!0})],wt.prototype,"inputManager",void 0),c([d()],wt.prototype,"map",void 0),c([d()],wt.prototype,"padding",null),c([d({readOnly:!0})],wt.prototype,"rendering",null),c([d()],wt.prototype,"resizeAlign",null),c([d({readOnly:!0})],wt.prototype,"resolution",null),c([d()],wt.prototype,"rotation",null),c([d()],wt.prototype,"scale",null),c([d({constructOnly:!0})],wt.prototype,"spatialReferenceLocked",void 0),c([d()],wt.prototype,"stationary",null),c([d({readOnly:!0})],wt.prototype,"tileInfo",null),c([d({type:Bue,readOnly:!0})],wt.prototype,"timeline",void 0),c([d({readOnly:!0})],wt.prototype,"type",void 0),c([d({readOnly:!0})],wt.prototype,"updating",null),c([d({readOnly:!0})],wt.prototype,"view2dType",void 0),c([d()],wt.prototype,"viewpoint",null),c([d({readOnly:!0})],wt.prototype,"visibleArea",null),c([d()],wt.prototype,"zoom",null),c([d({readOnly:!0})],wt.prototype,"navigating",null),c([d(),Ht(e=>e instanceof Sce?e:Ki(xce,e))],wt.prototype,"ui",void 0),wt=c([F("esri.views.View2D")],wt);const GVe=wt;let EI=class extends GVe{constructor(e){super(e),this.view2dType="map"}};c([d({readOnly:!0})],EI.prototype,"view2dType",void 0),EI=c([F("esri.views.MapView")],EI);const BVe=EI;class Ot{wkid;latestWkid;wkt;constructor(t,i){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=i)}isEqual(t){return!!(this.isWebMercator()&&t.isWebMercator()||this.wkid&&t.wkid&&this.wkid===t.wkid||this.wkt&&t.wkt&&this.wkt===t.wkt||this.latestWkid&&t.latestWkid&&this.latestWkid===t.latestWkid)}clone(){const t=new Ot("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new Ot(4326)}static fromConfig(t){if(t.wkt)return new Ot(t.wkt);if(t.wkid)return new Ot(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof Ot?t.clone():typeof t=="string"&&t.startsWith("EPSG:")?new Ot(parseInt(t.substring(5).trim())):new Ot(t):Ot.latLongSR()}static fromESRI(t){if(t.wkt)return new Ot(t.wkt);{const i=t.toJSON().latestWkid,r=new Ot(t.wkid);return i&&(r.latestWkid=i),r}}toESRI(){return new ke(this.lean())}static fromGeoJSON(t){const i=Ot.parseGeoJsonCrs(t);return i.substring(0,5)==="EPSG:"?new Ot(parseInt(i.slice(5))):new Ot(i)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=t.properties.name,s=r.match(i);if(s)return"EPSG:"+s[1];if(r.substring(0,7)!=="urn:ogc")return r}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class Ag{sr;id;constructor(t,i){this.id=t?t.toString():"",this.sr=Ot.parseSR(i)}get type(){return Vt.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===Vt.NONE||this.type===Vt.UNKNOWN}geoJsonFactory(t,i){const r={type:t,coordinates:i};return this.sr&&(r.crs=this.sr.toGeoJSON()),r}}class If extends Ag{constructor(){super("no_geometry")}get type(){return Vt.NONE}}let Xn=class A_ extends Ag{rawArray;constructor(t,i,r,s){super(t,i.sr||r),s?this.rawArray=i.slice():this.rawArray=A_.parseXY(i)}get type(){return Vt.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let i;if(Array.isArray(t)&&t.length===2)i=t;else{if(t instanceof A_)return t.toArray();i=[t.x,t.y]}if(isNaN(i[0])||isNaN(i[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(i[0]),parseFloat(i[1])]}static fromESRI(t,i){return new A_(i,[t.x,t.y],Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new Ve({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new A_(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.POINT,this.toArray())}};class $o extends Ag{rawArray;constructor(t,i,r,s){super(t,i.sr||r),s?this.rawArray=$o.arrayDeepCopy(i):i instanceof $o?this.rawArray=i.toArray():this.rawArray=$o.parsePointSet(i)}get pointArray(){return this.rawArray.map((t,i)=>new Xn(this.childIdGenerator(i),t,this.sr,!0))}getAt(t){return new Xn(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,i){this.rawArray[i]=Xn.parseXY(t)}get length(){return this.rawArray.length}toArray(){return $o.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(i=>Xn.parseXY(i))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(i=>i.slice())}}class Kv extends $o{constructor(t,i,r,s){super(t,i,r,s)}get type(){return Vt.MULTIPOINT}static fromESRI(t,i){return new Kv(i,t.points,Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new tb({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new Kv(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.MULTIPOINT,this.toArray())}}class Hd extends $o{constructor(t,i,r,s){if(super(t,i,r,s),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return Vt.LINESTRING}static fromESRI(t,i){return new Hd(i,t.paths[0],Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new ca({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new Hd(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.LINESTRING,this.toArray())}}class zl extends Ag{rawArray;constructor(t,i,r,s){if(super(t,i.sr||r),s)this.rawArray=zl.arrayDeepCopy(i);else if(i instanceof zl)this.rawArray=i.toArray();else if(i instanceof $o)this.rawArray=[i.toArray()];else if(Array.isArray(i)){if(i.length===0)throw new Error("no lines provided");this.rawArray=i.map(n=>$o.parsePointSet(n))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,i)=>new Hd(this.childIdGenerator(i),t,this.sr,!0))}getAt(t){return new Hd(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,i){this.rawArray[i]=$o.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return Vt.MULTILINESTRING}toArray(){return zl.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.slice()))}static fromESRI(t,i){return new zl(i,t.paths,Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new ca({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new zl(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.MULTILINESTRING,this.toArray())}}class Ry extends $o{constructor(t,i,r,s){if(super(t,i,r,s),Ry.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return Vt.LINEARRING}updateAt(t,i){const r=this.length-1;i===0?super.updateAt(t,r):i===r&&super.updateAt(t,0),super.updateAt(t,i)}static closeRing(t){const i=t[0],r=t[t.length-1];(i[0]!==r[0]||i[1]!==r[1])&&t.push(i.slice())}static fromESRI(t,i){return new Ry(i,t.rings[0],Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new Rs({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new Ry(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.POLYGON,[this.toArray()])}}class wn extends Ag{rawArray;constructor(t,i,r,s){super(t,i.sr||r),s?this.rawArray=wn.arrayDeepCopy(i):this.rawArray=wn.parsePolygon(i)}addLinearRings(t){t.forEach(i=>this.rawArray.push(i.toArray()))}get ringArray(){return this.rawArray.map((t,i)=>new Ry(this.childIdGenerator(i),t,this.sr,!0))}get type(){return Vt.POLYGON}toArray(){return wn.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let i=[];if(t instanceof wn)return t.toArray();if(t instanceof zl)i=t.toArray();else if(t instanceof $o)i=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");i=t.map(r=>$o.parsePointSet(r))}else throw new Error("invalid input format for parsePolygon");return i.forEach(r=>Ry.closeRing(r)),i}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.slice()))}static fromESRI(t,i){return new wn(i,t.rings,Ot.fromESRI(t.spatialReference),!0)}toESRI(){return new Rs({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new wn(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.POLYGON,this.toArray())}}class kh extends Ag{rawArray;constructor(t,i,r,s){super(t,i.sr||r),s?this.rawArray=kh.arrayDeepCopy(i):this.rawArray=kh.parseMultiPolygon(i)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,i)=>new wn(this.childIdGenerator(i),t,this.sr,!0))}get type(){return Vt.MULTIPOLYGON}toArray(){return kh.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof kh)return t.toArray();if(t instanceof wn)return[t.toArray()];if(t instanceof zl||t instanceof $o)return[wn.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(i=>wn.parsePolygon(i))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(i=>i.map(r=>r.map(s=>s.slice())))}static fromESRI(t,i){return new kh(i,[t.rings],Ot.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(i=>{i.forEach(r=>t.push(r))}),new Rs({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,i){return new kh(i,t.coordinates,Ot.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Mr.MULTIPOLYGON,this.toArray())}}class nr extends Ag{rawMin;rawMax;constructor(t,i,r,s){super(t,i.sr||s),this.rawMin=Xn.parseXY(i),this.rawMax=Xn.parseXY(r)}get type(){return Vt.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new Xn(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return nr.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new nr(this.id,this.rawMin,this.rawMax,this.sr)}contains(t){return this.sr.isEqual(t.sr)?this.xmin<=t.x&&this.xmax>=t.x&&this.ymin<=t.y&&this.ymax>=t.y:(console.error("Extent.contains(point) must have point in same spatial reference as the extent."),!1)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new wn(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,i,r,s,n,o){return new nr(t,[i,r],[s,n],o)}static fromConfig(t,i){return new nr(t,[i.xmin,i.ymin],[i.xmax,i.ymax],Ot.fromConfig(i.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,i){return nr.fromParams(i,t.xmin,t.ymin,t.xmax,t.ymax,Ot.fromESRI(t.spatialReference))}toESRI(){return new bt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,i){return nr.fromESRI(bt.fromJSON(t),i)}static fromGeoJSON(t,i){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const r=t.coordinates[0].slice(),s=r.slice();return[1,2,3].forEach(n=>{[0,1].forEach(o=>{const a=t.coordinates[n];r[o]>a[o]&&(r[o]=a[o]),s[o]<a[o]&&(s[o]=a[o])})}),new nr(i,r,s,Ot.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(Mr.POLYGON,this.toPolygonArray())}}class rp{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const i=t.length;if(i<3||i>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map((r,s)=>s===3?r:parseInt(r)),i===3&&this.c.push(1)}else if(typeof t=="string"){const i=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(r=>{const s=i.substring(r,r+2);return rp.hexToInt(s)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((i,r)=>{i<0&&(console.error("Negative value passed to colour"),this.c[r]=0),i>255&&(console.error("Rotund value passed to colour"),this.c[r]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(i=>rp.intToHex(i)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new Oe(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const i=t.toString(16);return i.length===1?`0${i}`:i}}class Dh{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let i;const r=t.length;if(r===0)return;const s=t.substring(r-2);return s==="px"?i=parseFloat(t.substring(0,r-2))*1.333333:s==="pt"?i=parseFloat(t.substring(0,r-2)):i=parseFloat(t),i}else return t}}class Dd extends Dh{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:Bc.CIRCLE},super(),this._style=t.style||Bc.CIRCLE,t.style===Bc.ICON){const i=t;this._icon=i.icon||"",this._height=Dh.convToPoints(i.height)||16.5,this._width=Dh.convToPoints(i.width)||16.5,this._size=0,this._colour=new rp,this._outline=new cc,this._path=""}else{const i=t;this._size=Dh.convToPoints(i.size)||12,this._colour=new rp(i.colour??"#ffffff40"),this._outline=new cc(i.outline),this._path=this._style===Bc.PATH&&i.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=Dh.convToPoints(t.xOffset)||0,this._yOffset=Dh.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===Bc.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===Bc.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===Bc.ICON?Dd.isImageUrl(this.icon)?(t=new qh,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Uo,t.color=new Oe(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Uo,t.color=new Oe(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const i={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const r=i;r.style=t.style,r.colour=t.color.toRgba(),r.size=t.size,r.path=t.path,r.outline=cc.fromESRI(t.outline).toOptions()}else{const r=i;r.style=Bc.ICON,r.width=t.width,r.height=t.height,r.icon=t.url}return new Dd(i)}static fromArcServer(t){return Dd.fromESRI($8(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class cc extends Dh{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||yo.SOLID;const i=Dh.convToPoints(t.width);this._width=typeof i>"u"||i<0?.75:i,this._colour=new rp(t.colour),this._miter=t.miter??2,this._cap=t.cap||zK.ROUND,this._join=t.join||BK.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new ro;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const i={width:t.width,colour:t.color.toRgba(),style:t.style};return new cc(i)}static fromArcServer(t){return cc.fromESRI($8(t))}}class dS extends Dh{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new rp(t.fill.colour),this._fillStyle=t.fill.style||qK.SOLID,this._outlineStyle=new cc(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),i=new Oe(this.fillColour.rgba),r=new bc;return r.style=this.fillStyleType,r.color=i,r.outline=t,r}static fromESRI(t){const i={fill:{colour:t.color.toRgba(),style:t.style},outline:cc.fromESRI(t.outline).toOptions()};return new dS(i)}static fromArcServer(t){return dS.fromESRI($8(t))}}class zVe{Extent=nr;Graphic=su;LineString=Hd;LineStyle=cc;LinearRing=Ry;MultiLineString=zl;MultiPoint=Kv;MultiPolygon=kh;Point=Xn;PointStyle=Dd;Polygon=wn;PolygonStyle=dS;SpatialReference=Ot;esriMapClickToRamp(t,i){return{mapPoint:Xn.fromESRI(t.mapPoint,i),screenX:t.x,screenY:t.y,button:t.button,input:t.native.pointerType,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,i){switch(t.type){case"point":return Xn.fromESRI(t,i);case"polyline":{const r=t;return r.paths.length===1?Hd.fromESRI(r,i):zl.fromESRI(r,i)}case"polygon":return wn.fromESRI(t,i);case"extent":return nr.fromESRI(t,i);case"multipoint":return Kv.fromESRI(t,i);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,i){switch(t.type){case Mr.POINT:return Xn.fromGeoJSON(t,i);case Mr.LINESTRING:return Hd.fromGeoJSON(t,i);case Mr.POLYGON:return wn.fromGeoJSON(t,i);case Mr.MULTIPOINT:return Kv.fromGeoJSON(t,i);case Mr.MULTILINESTRING:return zl.fromGeoJSON(t,i);case Mr.MULTIPOLYGON:return kh.fromGeoJSON(t,i);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){const i={},r={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:i};return Object.keys(t.attributes).forEach(s=>r.properties[s]=t.attributes[s]),r}graphicGeoJsonToRamp(t,i){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const r=this.geomGeoJsonToRamp(t.geometry,i),s={};return Object.keys(t.properties.forEach(o=>s[o]=t.properties[o])),new su(r,"",s)}graphicRampToEsri(t){const i={attributes:{},id:t.id};return i.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(r=>i.attributes[r]=t.attributes[r]),t.style&&(i.symbol=this.styleRampToEsri(t.style)),new nl(i)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return Dd.fromESRI(t);case"simple-line":return cc.fromESRI(t);case"simple-fill":return dS.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new Dd}}serverGeomTypeToRampGeomType(t){if(!t)return Vt.NONE;switch(t){case"esriGeometryPolygon":return Vt.POLYGON;case"esriGeometryPolyline":return Vt.LINESTRING;case"esriGeometryPoint":return Vt.POINT;case"esriGeometryMultipoint":return Vt.MULTIPOINT;case"esriGeometryEnvelope":return Vt.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),Vt.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return Vt.NONE;switch(t){case"polygon":return Vt.POLYGON;case"polyline":return Vt.LINESTRING;case"point":return Vt.POINT;case"multipoint":return Vt.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),Vt.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(t){switch(t){case Mr.POINT:return"point";case Mr.LINESTRING:case Mr.MULTILINESTRING:return"polyline";case Mr.POLYGON:case Mr.MULTIPOLYGON:return"polygon";case Mr.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${t}`)}}isImageUrl(t){return Dd.isImageUrl(t)}}class lA{layerIdx;name;children;uid;isRoot;constructor(t,i,r="",s=!0){this.layerIdx=t,this.name=r,this.isRoot=s,this.children=[],this.uid=i}findChildByUid(t){if(this.uid===t)return this;{let i;return this.children.some(r=>i=r.findChildByUid(t)),i}}findChildByIdx(t){if(this.layerIdx===t)return this;{let i;return this.children.some(r=>i=r.findChildByIdx(t)),i}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class Oce{minScale;maxScale;constructor(t=0,i=0){this.minScale=t,this.maxScale=i}isOffScale(t){const i={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(i.offScale=!0,i.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(i.offScale=!0,i.zoomIn=!0),i}}class Pce{sql;cache;extent;constructor(t="",i=""){this.sql={[Hn.PERMANENT]:t,[Hn.INITIAL]:i},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const i=this.sql,r=Object.keys(i).filter(s=>i[s]);return t.length===0?r:r.filter(s=>t.indexOf(s)===-1)}isActive(){return this.sqlActiveFilters([Hn.PERMANENT]).length>0}getCombinedSql(t=[]){const i=this.sqlActiveFilters(t),r=i.length;return r===0?"":r===1?this.sql[i[0]]:i.map(s=>`(${this.sql[s]})`).join(" AND ")}setSql(t,i){t===Hn.PERMANENT?console.error("Attempted to overwrite a permanent filter. Not allowed."):(this.sql[t]=i,this.clearCacheSet(t))}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(Hn.EXTENT))}getCacheKey(t,i){return`_cache$${t.sort().join("$")}${i?"$"+Hn.EXTENT:""}$`}getCache(t,i){const r=this.getCacheKey(t,i);return this.cache[r]}setCache(t,i,r){const s=this.getCacheKey(i,r);this.cache[s]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(i=>t[i])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(i=>{i.indexOf(`$${t}$`)>-1&&delete this.cache[i]})}clearAll(){this.sql={[Hn.PERMANENT]:this.sql[Hn.PERMANENT]},this.extent=void 0,this.clearAllCaches()}}class fS{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,i,r=void 0,s=void 0){this.id=t,this.sr=i.sr.clone(),this._defaultExtent=i.clone(),this._fullExtent=r?.clone(),this._maximumExtent=s?.clone(),r&&!r.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${r.sr}`),s&&!s.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${s.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new fS(t.id,nr.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?nr.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?nr.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new fS(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class Wr{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,i)=>{this.resolveMe=r=>{t(r)},this.rejectMe=i})}}var hE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $x(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qVe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),i}var OR,zJ;function HVe(){if(zJ)return OR;zJ=1;var e=function(T){return t(T)&&!i(T)};function t(S){return!!S&&typeof S=="object"}function i(S){var T=Object.prototype.toString.call(S);return T==="[object RegExp]"||T==="[object Date]"||n(S)}var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103;function n(S){return S.$$typeof===s}function o(S){return Array.isArray(S)?[]:{}}function a(S,T){return T.clone!==!1&&T.isMergeableObject(S)?b(o(S),S,T):S}function l(S,T,x){return S.concat(T).map(function(_){return a(_,x)})}function u(S,T){if(!T.customMerge)return b;var x=T.customMerge(S);return typeof x=="function"?x:b}function h(S){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(S).filter(function(T){return Object.propertyIsEnumerable.call(S,T)}):[]}function p(S){return Object.keys(S).concat(h(S))}function f(S,T){try{return T in S}catch{return!1}}function m(S,T){return f(S,T)&&!(Object.hasOwnProperty.call(S,T)&&Object.propertyIsEnumerable.call(S,T))}function g(S,T,x){var _={};return x.isMergeableObject(S)&&p(S).forEach(function(M){_[M]=a(S[M],x)}),p(T).forEach(function(M){m(S,M)||(f(S,M)&&x.isMergeableObject(T[M])?_[M]=u(M,x)(S[M],T[M],x):_[M]=a(T[M],x))}),_}function b(S,T,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=a;var _=Array.isArray(T),M=Array.isArray(S),I=_===M;return I?_?x.arrayMerge(S,T,x):g(S,T,x):a(T,x)}b.all=function(T,x){if(!Array.isArray(T))throw new Error("first argument should be an array");return T.reduce(function(_,M){return b(_,M,x)},{})};var w=b;return OR=w,OR}var WVe=HVe();const Lce=$x(WVe);class JVe{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i==="x"?r:r&3|8).toString(16)})}convertImageToCanvas(t,i,r=!0){const s=i??document.createElement("canvas"),n=document.createElement("img");r&&(n.crossOrigin="anonymous");const o=new Promise((a,l)=>{n.addEventListener("load",()=>{s.width=n.width,s.height=n.height,s.getContext("2d")?.drawImage(n,0,0),a(s)}),n.addEventListener("error",u=>l(u))});return n.src=t,o}async convertImagetoDataURL(t,i="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(r=>r.toDataURL(i)).catch(r=>(console.error("Failed to load crossorigin image",t,r),t))}parseUrlIndex(t){const i={rootUrl:t,index:0},r=/\/(\d+)\/?$/,s=t.match(r);if(s){const n=s[1];i.index=isNaN(parseInt(n))?void 0:parseInt(n),i.rootUrl=t.substr(0,t.length-s[0].length)}else console.warn("Cannot extract layer index from url "+t);return i}controlAvailable(t,i){return i?.disabledControls?.includes(t)?!1:i?.controls?i?.controls?.includes(t):!0}}class uA{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((i,r)=>{const[s,n]=r.split("=");return i[s]=n,i},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const i=Lce.all([{},this.queryMap,t]);return`${this.base}${Object.entries(i).filter(([,s])=>s!==void 0).map(([s,n],o)=>`${o===0?"?":""}${s}=${n}`).join("&")}`}}var MI={exports:{}},ZVe=MI.exports,qJ;function Nce(){return qJ||(qJ=1,function(e,t){(function(i,r){e.exports=r(),typeof window=="object"&&(i.Terraformer=r())})(ZVe,function(){var i={},r=6378137,s=57.29577951308232,n=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(D){return Object.prototype.toString.call(D)==="[object Array]"}function u(){var D=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,D)}function h(D,q){for(var N in q)q.hasOwnProperty(N)&&(D[N]=q[N]);return D}function p(D){if(D.type)switch(D.type){case"Point":return[D.coordinates[0],D.coordinates[1],D.coordinates[0],D.coordinates[1]];case"MultiPoint":return g(D.coordinates);case"LineString":return g(D.coordinates);case"MultiLineString":return f(D.coordinates);case"Polygon":return f(D.coordinates);case"MultiPolygon":return m(D.coordinates);case"Feature":return D.geometry?p(D.geometry):null;case"FeatureCollection":return b(D);case"GeometryCollection":return w(D);default:throw new Error("Unknown type: "+D.type)}return null}function f(D){for(var q=null,N=null,U=null,H=null,ne=0;ne<D.length;ne++)for(var me=D[ne],pe=0;pe<me.length;pe++){var Z=me[pe],te=Z[0],Ee=Z[1];(q===null||te<q)&&(q=te),(N===null||te>N)&&(N=te),(U===null||Ee<U)&&(U=Ee),(H===null||Ee>H)&&(H=Ee)}return[q,U,N,H]}function m(D){for(var q=null,N=null,U=null,H=null,ne=0;ne<D.length;ne++)for(var me=D[ne],pe=0;pe<me.length;pe++)for(var Z=me[pe],te=0;te<Z.length;te++){var Ee=Z[te],Fe=Ee[0],Tt=Ee[1];(q===null||Fe<q)&&(q=Fe),(N===null||Fe>N)&&(N=Fe),(U===null||Tt<U)&&(U=Tt),(H===null||Tt>H)&&(H=Tt)}return[q,U,N,H]}function g(D){for(var q=null,N=null,U=null,H=null,ne=0;ne<D.length;ne++){var me=D[ne],pe=me[0],Z=me[1];(q===null||pe<q)&&(q=pe),(N===null||pe>N)&&(N=pe),(U===null||Z<U)&&(U=Z),(H===null||Z>H)&&(H=Z)}return[q,U,N,H]}function b(D){for(var q=[],N,U=D.features.length-1;U>=0;U--)N=p(D.features[U].geometry),q.push([N[0],N[1]]),q.push([N[2],N[3]]);return g(q)}function w(D){for(var q=[],N,U=D.geometries.length-1;U>=0;U--)N=p(D.geometries[U]),q.push([N[0],N[1]]),q.push([N[2],N[3]]);return g(q)}function S(D){var q=p(D);return{x:q[0],y:q[1],w:Math.abs(q[0]-q[2]),h:Math.abs(q[1]-q[3])}}function T(D){return D*s}function x(D){return D*n}function _(D,q){for(var N=0;N<D.length;N++)typeof D[N][0]=="number"&&(D[N]=q(D[N])),typeof D[N]=="object"&&(D[N]=_(D[N],q));return D}function M(D){var q=D[0],N=D[1];return[T(q/r)-Math.floor((T(q/r)+180)/360)*360,T(Math.PI/2-2*Math.atan(Math.exp(-1*N/r)))]}function I(D){var q=D[0],N=Math.max(Math.min(D[1],89.99999),-89.99999);return[x(q)*r,r/2*Math.log((1+Math.sin(x(N)))/(1-Math.sin(x(N))))]}function A(D,q,N){if(D.type==="Point")D.coordinates=q(D.coordinates);else if(D.type==="Feature")D.geometry=A(D.geometry,q,!0);else if(D.type==="FeatureCollection")for(var U=0;U<D.features.length;U++)D.features[U]=A(D.features[U],q,!0);else if(D.type==="GeometryCollection")for(var H=0;H<D.geometries.length;H++)D.geometries[H]=A(D.geometries[H],q,!0);else D.coordinates=_(D.coordinates,q);return N||q===I&&(D.crs=o),q===M&&delete D.crs,D}function C(D){return A(D,I)}function R(D){return A(D,M)}function O(D,q){return D<q?-1:D>q?1:0}function k(D,q){return D[0]>q[0]?-1:D[0]<q[0]?1:D[1]>q[1]?-1:D[1]<q[1]?1:0}function L(D,q,N){return O((q[0]-D[0])*(N[1]-D[1])-(N[0]-D[0])*(q[1]-D[1]),0)}function V(D,q){var N=q[0]-D[0],U=q[1]-D[1];return N*N+U*U}function J(D,q){var N=q;for(var U in D){var H=L(q,N,D[U]);(H===-1||H===0&&V(q,D[U])>V(q,N))&&(N=D[U])}return N}function y(D){if(D.length===0)return[];if(D.length===1)return D;for(var q=[D.sort(k)[0]],N=0;N<q.length;N++){var U=J(D,q[N]);U!==q[0]&&q.push(U)}return q}function E(D){for(var q,N=0;N<D.length-3;N++){var U=D[N],H=D[N+1],ne=D[N+2],me=[H[0]-U[0],H[1]-U[1]],pe=ne[0]*me[1]-ne[1]*me[0]+me[0]*U[1]-me[1]*U[0];if(N===0)pe<0?q=!0:q=!1;else if(q&&pe>0||!q&&pe<0)return!1}return!0}function $(D,q){for(var N=!1,U=-1,H=D.length,ne=H-1;++U<H;ne=U)(D[U][1]<=q[1]&&q[1]<D[ne][1]||D[ne][1]<=q[1]&&q[1]<D[U][1])&&q[0]<(D[ne][0]-D[U][0])*(q[1]-D[U][1])/(D[ne][1]-D[U][1])+D[U][0]&&(N=!N);return N}function P(D,q){if(D&&D.length){if(D.length===1)return $(D[0],q);if($(D[0],q)){for(var N=1;N<D.length;N++)if($(D[N],q))return!1;return!0}else return!1}else return!1}function G(D,q,N,U){var H=(U[0]-N[0])*(D[1]-N[1])-(U[1]-N[1])*(D[0]-N[0]),ne=(q[0]-D[0])*(D[1]-N[1])-(q[1]-D[1])*(D[0]-N[0]),me=(U[1]-N[1])*(q[0]-D[0])-(U[0]-N[0])*(q[1]-D[1]);if(me!==0){var pe=H/me,Z=ne/me;if(0<=pe&&pe<=1&&0<=Z&&Z<=1)return!0}return!1}function Q(D){return!isNaN(parseFloat(D))&&isFinite(D)}function se(D,q){if(Q(D[0][0])){if(Q(q[0][0])){for(var N=0;N<D.length-1;N++)for(var U=0;U<q.length-1;U++)if(G(D[N],D[N+1],q[U],q[U+1]))return!0}else for(var H=0;H<q.length;H++)if(se(D,q[H]))return!0}else for(var ne=0;ne<D.length;ne++)if(se(D[ne],q))return!0;return!1}function ie(D){for(var q=[],N=0;N<D.length;N++){var U=D[N].slice();ye(U[0],U[U.length-1])===!1&&U.push(U[0]),q.push(U)}return q}function ye(D,q){for(var N=0;N<D.length;N++)if(D[N]!==q[N])return!1;return!0}function Pe(D,q){if(D.length!==q.length)return!1;for(var N=D.slice().sort(k),U=q.slice().sort(k),H=0;H<N.length;H++){if(N[H].length!==U[H].length)return!1;for(var ne=0;ne<N.length;ne++)if(N[H][ne]!==U[H][ne])return!1}return!0}var Ie=["length"];function we(D){if(D)switch(D.type){case"Point":return new De(D);case"MultiPoint":return new Ze(D);case"LineString":return new et(D);case"MultiLineString":return new nt(D);case"Polygon":return new $t(D);case"MultiPolygon":return new zt(D);case"Feature":return new Y(D);case"FeatureCollection":return new B(D);case"GeometryCollection":return new re(D);default:throw new Error("Unknown type: "+D.type)}}we.prototype.toMercator=function(){return C(this)},we.prototype.toGeographic=function(){return R(this)},we.prototype.envelope=function(){return S(this)},we.prototype.bbox=function(){return p(this)},we.prototype.convexHull=function(){var D=[],q,N;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)D=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)D=D.concat(this.coordinates[q]);if(D.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)for(N=0;N<this.coordinates[q].length;N++)D=D.concat(this.coordinates[q][N]);if(D.length<3)return null}else return null;else if(this.type==="Feature"){var U=new we(this.geometry);return U.convexHull()}return new $t({type:"Polygon",coordinates:ie([y(D)])})},we.prototype.toJSON=function(){var D={};for(var q in this)this.hasOwnProperty(q)&&Ie.indexOf(q)===-1&&(D[q]=this[q]);return D.bbox=p(this),D},we.prototype.contains=function(D){return new we(D).within(this)},we.prototype.within=function(D){var q,N,U,H;if(D.type==="Feature"&&(D=D.geometry),D.type==="Point"&&this.type==="Point")return ye(this.coordinates,D.coordinates);if(D.type==="MultiLineString"&&this.type==="Point")for(N=0;N<D.coordinates.length;N++){var ne={type:"LineString",coordinates:D.coordinates[N]};if(this.within(ne))return!0}if((D.type==="LineString"||D.type==="MultiPoint")&&this.type==="Point")for(N=0;N<D.coordinates.length;N++){if(this.coordinates.length!==D.coordinates[N].length)return!1;if(ye(this.coordinates,D.coordinates[N]))return!0}if(D.type==="Polygon")if(this.type==="Polygon"){if(D.coordinates.length===this.coordinates.length){for(N=0;N<this.coordinates.length;N++)if(Pe(this.coordinates[N],D.coordinates[N]))return!0}return this.coordinates.length&&P(D.coordinates,this.coordinates[0][0])?!se(ie(this.coordinates),ie(D.coordinates)):!1}else{if(this.type==="Point")return P(D.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(N=0;N<this.coordinates.length;N++)if(P(D.coordinates,this.coordinates[N])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(N=0;N<this.coordinates.length;N++){var me=new et(this.coordinates[N]);if(me.within(D)===!1)return H++,!1}return!0}else if(this.type==="MultiPolygon"){for(N=0;N<this.coordinates.length;N++){var pe=new we({type:"Polygon",coordinates:this.coordinates[N]});if(pe.within(D)===!1)return!1}return!0}}if(D.type==="MultiPolygon"){if(this.type==="Point"){if(D.coordinates.length){for(N=0;N<D.coordinates.length;N++)if(q=D.coordinates[N],P(q,this.coordinates)&&se([this.coordinates],D.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(N=0;N<this.coordinates.length;N++)if(D.coordinates[N].length===this.coordinates.length){for(U=0;U<this.coordinates.length;U++)if(Pe(this.coordinates[U],D.coordinates[N][U]))return!0}if(se(this.coordinates,D.coordinates)===!1&&D.coordinates.length){for(N=0;N<D.coordinates.length;N++)q=D.coordinates[N],P(q,this.coordinates[0][0])===!1?H=!1:H=!0;return H}}else if(this.type==="LineString"||this.type==="MultiPoint")for(N=0;N<D.coordinates.length;N++){var Z={type:"Polygon",coordinates:D.coordinates[N]};return!!this.within(Z)}else if(this.type==="MultiLineString"){for(N=0;N<this.coordinates.length;N++){var te=new et(this.coordinates[N]);if(te.within(D)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(N=0;N<D.coordinates.length;N++){var Ee={type:"Polygon",coordinates:D.coordinates[N]};if(this.within(Ee)===!1)return!1}return!0}}return!1},we.prototype.intersects=function(D){D.type==="Feature"&&(D=D.geometry);var q=new we(D);if(this.within(D)||q.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&D.type!=="Point"&&D.type!=="MultiPoint")return se(this.coordinates,D.coordinates);if(this.type==="Feature"){var N=new we(this.geometry);return N.intersects(D)}return u("Type "+this.type+" to "+D.type+" intersection is not supported by intersects"),!1};function De(D){var q=Array.prototype.slice.call(arguments);if(D&&D.type==="Point"&&D.coordinates)h(this,D);else if(D&&l(D))this.coordinates=D;else if(q.length>=2)this.coordinates=q;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}De.prototype=new we,De.prototype.constructor=De;function Ze(D){if(D&&D.type==="MultiPoint"&&D.coordinates)h(this,D);else if(l(D))this.coordinates=D;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}Ze.prototype=new we,Ze.prototype.constructor=Ze,Ze.prototype.forEach=function(D){for(var q=0;q<this.coordinates.length;q++)D.apply(this,[this.coordinates[q],q,this.coordinates]);return this},Ze.prototype.addPoint=function(D){return this.coordinates.push(D),this},Ze.prototype.insertPoint=function(D,q){return this.coordinates.splice(q,0,D),this},Ze.prototype.removePoint=function(D){return typeof D=="number"?this.coordinates.splice(D,1):this.coordinates.splice(this.coordinates.indexOf(D),1),this},Ze.prototype.get=function(D){return new De(this.coordinates[D])};function et(D){if(D&&D.type==="LineString"&&D.coordinates)h(this,D);else if(l(D))this.coordinates=D;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}et.prototype=new we,et.prototype.constructor=et,et.prototype.addVertex=function(D){return this.coordinates.push(D),this},et.prototype.insertVertex=function(D,q){return this.coordinates.splice(q,0,D),this},et.prototype.removeVertex=function(D){return this.coordinates.splice(D,1),this};function nt(D){if(D&&D.type==="MultiLineString"&&D.coordinates)h(this,D);else if(l(D))this.coordinates=D;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}nt.prototype=new we,nt.prototype.constructor=nt,nt.prototype.forEach=function(D){for(var q=0;q<this.coordinates.length;q++)D.apply(this,[this.coordinates[q],q,this.coordinates])},nt.prototype.get=function(D){return new et(this.coordinates[D])};function $t(D){if(D&&D.type==="Polygon"&&D.coordinates)h(this,D);else if(l(D))this.coordinates=D;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}$t.prototype=new we,$t.prototype.constructor=$t,$t.prototype.addVertex=function(D){return this.insertVertex(D,this.coordinates[0].length-1),this},$t.prototype.insertVertex=function(D,q){return this.coordinates[0].splice(q,0,D),this},$t.prototype.removeVertex=function(D){return this.coordinates[0].splice(D,1),this},$t.prototype.close=function(){this.coordinates=ie(this.coordinates)},$t.prototype.hasHoles=function(){return this.coordinates.length>1},$t.prototype.holes=function(){var D=[];if(this.hasHoles())for(var q=1;q<this.coordinates.length;q++)D.push(new $t([this.coordinates[q]]));return D};function zt(D){if(D&&D.type==="MultiPolygon"&&D.coordinates)h(this,D);else if(l(D))this.coordinates=D;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}zt.prototype=new we,zt.prototype.constructor=zt,zt.prototype.forEach=function(D){for(var q=0;q<this.coordinates.length;q++)D.apply(this,[this.coordinates[q],q,this.coordinates])},zt.prototype.get=function(D){return new $t(this.coordinates[D])},zt.prototype.close=function(){var D=[];return this.forEach(function(q){D.push(ie(q))}),this.coordinates=D,this};function Y(D){if(D&&D.type==="Feature")h(this,D);else if(D&&D.type&&D.coordinates)this.geometry=D;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}Y.prototype=new we,Y.prototype.constructor=Y;function B(D){if(D&&D.type==="FeatureCollection"&&D.features)h(this,D);else if(l(D))this.features=D;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}B.prototype=new we,B.prototype.constructor=B,B.prototype.forEach=function(D){for(var q=0;q<this.features.length;q++)D.apply(this,[this.features[q],q,this.features])},B.prototype.get=function(D){var q;return this.forEach(function(N){N.id===D&&(q=N)}),new Y(q)};function re(D){if(D&&D.type==="GeometryCollection"&&D.geometries)h(this,D);else if(l(D))this.geometries=D;else if(D.coordinates&&D.type)this.type="GeometryCollection",this.geometries=[D];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}re.prototype=new we,re.prototype.constructor=re,re.prototype.forEach=function(D){for(var q=0;q<this.geometries.length;q++)D.apply(this,[this.geometries[q],q,this.geometries])},re.prototype.get=function(D){return new we(this.geometries[D])};function fe(D,q,N){for(var U=I(D),H=N||64,ne={type:"Polygon",coordinates:[[]]},me=1;me<=H;me++){var pe=me*(360/H)*Math.PI/180;ne.coordinates[0].push([U[0]+q*Math.cos(pe),U[1]+q*Math.sin(pe)])}return ne.coordinates=ie(ne.coordinates),R(ne)}function ve(D,q,N){var U=N||64,H=q||250;if(!D||D.length<2||!H||!U)throw new Error("Terraformer: missing parameter for Terraformer.Circle");h(this,new Y({type:"Feature",geometry:fe(D,H,U),properties:{radius:H,center:D,steps:U}}))}return ve.prototype=new we,ve.prototype.constructor=ve,ve.prototype.recalculate=function(){return this.geometry=fe(this.properties.center,this.properties.radius,this.properties.steps),this},ve.prototype.center=function(D){return D&&(this.properties.center=D,this.recalculate()),this.properties.center},ve.prototype.radius=function(D){return D&&(this.properties.radius=D,this.recalculate()),this.properties.radius},ve.prototype.steps=function(D){return D&&(this.properties.steps=D,this.recalculate()),this.properties.steps},ve.prototype.toJSON=function(){var D=we.prototype.toJSON.call(this);return D},i.Primitive=we,i.Point=De,i.MultiPoint=Ze,i.LineString=et,i.MultiLineString=nt,i.Polygon=$t,i.MultiPolygon=zt,i.Feature=Y,i.FeatureCollection=B,i.GeometryCollection=re,i.Circle=ve,i.toMercator=C,i.toGeographic=R,i.Tools={},i.Tools.positionToMercator=I,i.Tools.positionToGeographic=M,i.Tools.applyConverter=A,i.Tools.toMercator=C,i.Tools.toGeographic=R,i.Tools.createCircle=fe,i.Tools.calculateBounds=p,i.Tools.calculateEnvelope=S,i.Tools.coordinatesContainPoint=$,i.Tools.polygonContainsPoint=P,i.Tools.arraysIntersectArrays=se,i.Tools.coordinatesContainPoint=$,i.Tools.coordinatesEqual=Pe,i.Tools.convexHull=y,i.Tools.isConvex=E,i.MercatorCRS=o,i.GeographicCRS=a,i})}(MI)),MI.exports}var YVe=Nce();function KVe(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ag=1,lg=2,Xv=3,XVe=4,WD=5,HJ=6378137,QVe=6356752314e-3,WJ=.0066943799901413165,h2=484813681109536e-20,Ae=Math.PI/2,eGe=.16666666666666666,tGe=.04722222222222222,iGe=.022156084656084655,ze=1e-10,js=.017453292519943295,ec=57.29577951308232,yi=Math.PI/4,mS=Math.PI*2,Nr=3.14159265359,Go={};Go.greenwich=0;Go.lisbon=-9.131906111111;Go.paris=2.337229166667;Go.bogota=-74.080916666667;Go.madrid=-3.687938888889;Go.rome=12.452333333333;Go.bern=7.439583333333;Go.jakarta=106.807719444444;Go.ferro=-17.666666666667;Go.brussels=4.367975;Go.stockholm=18.058277777778;Go.athens=23.7163375;Go.oslo=10.722916666667;const rGe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var JJ=/[\s_\-\/\(\)]/g;function af(e,t){if(e[t])return e[t];for(var i=Object.keys(e),r=t.toLowerCase().replace(JJ,""),s=-1,n,o;++s<i.length;)if(n=i[s],o=n.toLowerCase().replace(JJ,""),o===r)return e[n]}function JD(e){var t={},i=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),r,s,n,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*js},lat_1:function(a){t.lat1=a*js},lat_2:function(a){t.lat2=a*js},lat_ts:function(a){t.lat_ts=a*js},lon_0:function(a){t.long0=a*js},lon_1:function(a){t.long1=a*js},lon_2:function(a){t.long2=a*js},alpha:function(a){t.alpha=parseFloat(a)*js},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*js},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=af(rGe,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*js},pm:function(a){var l=af(Go,a);t.from_greenwich=(l||parseFloat(a))*js},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(r in i)s=i[r],r in o?(n=o[r],typeof n=="function"?n(s):t[n]=s):t[r]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var yS=1,kce=2,Dce=3,cA=4,Fce=5,g7=-1,sGe=/\s/,nGe=/[A-Za-z]/,oGe=/[A-Za-z84_]/,NC=/[,\]]/,jce=/[\d\.E\-\+]/;function hp(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=yS}hp.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==cA)for(;sGe.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case yS:return this.neutral(e);case kce:return this.keyword(e);case cA:return this.quoted(e);case Fce:return this.afterquote(e);case Dce:return this.number(e);case g7:return}};hp.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=cA;return}if(NC.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};hp.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=yS;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=yS,this.currentObject=this.stack.pop(),this.currentObject||(this.state=g7);return}};hp.prototype.number=function(e){if(jce.test(e)){this.word+=e;return}if(NC.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};hp.prototype.quoted=function(e){if(e==='"'){this.state=Fce;return}this.word+=e};hp.prototype.keyword=function(e){if(oGe.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=yS;return}if(NC.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};hp.prototype.neutral=function(e){if(nGe.test(e)){this.word=e,this.state=kce;return}if(e==='"'){this.word="",this.state=cA;return}if(jce.test(e)){this.word=e,this.state=Dce;return}if(NC.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};hp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===g7)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function aGe(e){var t=new hp(e);return t.output()}function ZJ(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var r=t?{}:e,s=i.reduce(function(n,o){return fv(o,n),n},r);t&&(e[t]=s)}function fv(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},fv(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var r;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&fv(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&fv(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],ZJ(t,i,e);return;default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return fv(e,t[i]);return ZJ(t,i,e)}}var lGe=.017453292519943295;function uGe(e,t){var i=t[0],r=t[1];!(i in e)&&r in e&&(e[i]=e[r],t.length===3&&(e[i]=t[2](e[i])))}function gu(e){return e*lGe}function cGe(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,r=e.AXIS.length;i<r;++i){var s=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var n=e.GEOGCS;e.type==="GEOGCS"&&(n=e),n&&(n.DATUM?e.datumCode=n.DATUM.name.toLowerCase():e.datumCode=n.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(e.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=n.DATUM.SPHEROID.a,e.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(e.datum_params=n.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var h=e.to_meter||1;return u*h}var a=function(u){return uGe(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gu],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",gu],["lat0","latitude_of_origin",gu],["lat0","standard_parallel_1",gu],["lat1","standard_parallel_1",gu],["lat2","standard_parallel_2",gu],["azimuth","Azimuth"],["alpha","azimuth",gu],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=gu(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=gu(e.lat0>0?90:-90))}function Uce(e){var t=aGe(e),i=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",i]);var s={};return fv(t,s),cGe(s),s}function zn(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?zn[e]=JD(arguments[1]):zn[e]=Uce(arguments[1]):zn[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(r){Array.isArray(r)?zn.apply(t,r):zn(r)});if(typeof e=="string"){if(e in zn)return zn[e]}else"EPSG"in e?zn["EPSG:"+e.EPSG]=e:"ESRI"in e?zn["ESRI:"+e.ESRI]=e:"IAU2000"in e?zn["IAU2000:"+e.IAU2000]=e:console.log(e);return}}KVe(zn);function hGe(e){return typeof e=="string"}function pGe(e){return e in zn}var dGe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function fGe(e){return dGe.some(function(t){return e.indexOf(t)>-1})}var mGe=["3857","900913","3785","102113"];function yGe(e){var t=af(e,"authority");if(t){var i=af(t,"epsg");return i&&mGe.indexOf(i)>-1}}function gGe(e){var t=af(e,"extension");if(t)return af(t,"proj4")}function vGe(e){return e[0]==="+"}function bGe(e){if(hGe(e)){if(pGe(e))return zn[e];if(fGe(e)){var t=Uce(e);if(yGe(t))return zn["EPSG:3857"];var i=gGe(t);return i?JD(i):t}if(vGe(e))return JD(e)}else return e}function YJ(e,t){e=e||{};var i,r;if(!t)return e;for(r in t)i=t[r],i!==void 0&&(e[r]=i);return e}function Sc(e,t,i){var r=e*t;return i/Math.sqrt(1-r*r)}function Cx(e){return e<0?-1:1}function He(e){return Math.abs(e)<=Nr?e:e-Cx(e)*mS}function iu(e,t,i){var r=e*i,s=.5*e;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(Ae-t))/r}function gS(e,t){for(var i=.5*e,r,s,n=Ae-2*Math.atan(t),o=0;o<=15;o++)if(r=e*Math.sin(n),s=Ae-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-n,n+=s,Math.abs(s)<=1e-10)return n;return-9999}function wGe(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function _Ge(e){var t=e.x,i=e.y;if(i*ec>90&&i*ec<-90&&t*ec>180&&t*ec<-180)return null;var r,s;if(Math.abs(Math.abs(i)-Ae)<=ze)return null;if(this.sphere)r=this.x0+this.a*this.k0*He(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(yi+.5*i));else{var n=Math.sin(i),o=iu(this.e,i,n);r=this.x0+this.a*this.k0*He(t-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return e.x=r,e.y=s,e}function SGe(e){var t=e.x-this.x0,i=e.y-this.y0,r,s;if(this.sphere)s=Ae-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var n=Math.exp(-i/(this.a*this.k0));if(s=gS(this.e,n),s===-9999)return null}return r=He(this.long0+t/(this.a*this.k0)),e.x=r,e.y=s,e}var xGe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const TGe={init:wGe,forward:_Ge,inverse:SGe,names:xGe};function EGe(){}function KJ(e){return e}var MGe=["longlat","identity"];const IGe={init:EGe,forward:KJ,inverse:KJ,names:MGe};var AGe=[TGe,IGe],II={},hA=[];function Vce(e,t){var i=hA.length;return e.names?(hA[i]=e,e.names.forEach(function(r){II[r.toLowerCase()]=i}),this):(console.log(t),!0)}function $Ge(e){if(!e)return!1;var t=e.toLowerCase();if(typeof II[t]<"u"&&hA[II[t]])return hA[II[t]]}function CGe(){AGe.forEach(Vce)}const RGe={start:CGe,add:Vce,get:$Ge};var Ft={};Ft.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ft.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ft.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ft.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ft.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ft.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ft.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ft.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ft.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ft.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ft.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ft.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ft.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ft.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ft.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ft.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ft.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ft.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ft.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ft.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ft.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ft.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ft.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ft.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ft.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ft.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ft.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ft.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ft.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ft.hough={a:6378270,rf:297,ellipseName:"Hough"};Ft.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ft.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ft.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ft.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ft.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ft.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ft.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ft.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ft.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ft.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ft.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ft.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var OGe=Ft.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ft.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function PGe(e,t,i,r){var s=e*e,n=t*t,o=(s-n)/s,a=0;r?(e*=1-o*(eGe+o*(tGe+o*iGe)),s=e*e,o=0):a=Math.sqrt(o);var l=(s-n)/n;return{es:o,e:a,ep2:l}}function LGe(e,t,i,r,s){if(!e){var n=af(Ft,r);n||(n=OGe),e=n.a,t=n.b,i=n.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<ze)&&(s=!0,t=e),{a:e,b:t,rf:i,sphere:s}}var ps={};ps.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ps.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ps.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ps.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ps.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ps.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ps.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ps.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ps.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};ps.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ps.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ps.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ps.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ps.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ps.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ps.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ps.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ps.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function NGe(e,t,i,r,s,n,o){var a={};return e===void 0||e==="none"?a.datum_type=WD:a.datum_type=XVe,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=ag),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=lg,a.datum_params[3]*=h2,a.datum_params[4]*=h2,a.datum_params[5]*=h2,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Xv,a.grids=o),a.a=i,a.b=r,a.es=s,a.ep2=n,a}var Gce={};function kGe(e,t){var i=new DataView(t),r=jGe(i),s=UGe(i,r),n=VGe(i,s,r),o={header:s,subgrids:n};return Gce[e]=o,o}function DGe(e){if(e===void 0)return null;var t=e.split(",");return t.map(FGe)}function FGe(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:Gce[e]||null,isNull:!1}}function mv(e){return e/3600*Math.PI/180}function jGe(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function UGe(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:ZD(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function ZD(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function VGe(e,t,i){for(var r=176,s=[],n=0;n<t.nSubgrids;n++){var o=BGe(e,r,i),a=zGe(e,r,o,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[mv(o.lowerLongitude),mv(o.lowerLatitude)],del:[mv(o.longitudeInterval),mv(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:GGe(a)}),r+=176+o.gridNodeCount*16}return s}function GGe(e){return e.map(function(t){return[mv(t.longitudeShift),mv(t.latitudeShift)]})}function BGe(e,t,i){return{name:ZD(e,t+8,t+16).trim(),parent:ZD(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function zGe(e,t,i,r){for(var s=t+176,n=16,o=[],a=0;a<i.gridNodeCount;a++){var l={latitudeShift:e.getFloat32(s+a*n,r),longitudeShift:e.getFloat32(s+a*n+4,r),latitudeAccuracy:e.getFloat32(s+a*n+8,r),longitudeAccuracy:e.getFloat32(s+a*n+12,r)};o.push(l)}return o}function hc(e,t){if(!(this instanceof hc))return new hc(e);t=t||function(u){if(u)throw u};var i=bGe(e);if(typeof i!="object"){t("Could not parse to valid json: "+e);return}var r=hc.projections.get(i.projName);if(!r){t("Could not get projection name from: "+e);return}if(i.datumCode&&i.datumCode!=="none"){var s=af(ps,i.datumCode);s&&(i.datum_params=i.datum_params||(s.towgs84?s.towgs84.split(","):null),i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var n=LGe(i.a,i.b,i.rf,i.ellps,i.sphere),o=PGe(n.a,n.b,n.rf,i.R_A),a=DGe(i.nadgrids),l=i.datum||NGe(i.datumCode,i.datum_params,n.a,n.b,o.es,o.ep2,a);YJ(this,i),YJ(this,r),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}hc.projections=RGe;hc.projections.start();function qGe(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===ag?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===lg?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function Bce(e,t,i){var r=e.x,s=e.y,n=e.z?e.z:0,o,a,l,u;if(s<-Ae&&s>-1.001*Ae)s=-Ae;else if(s>Ae&&s<1.001*Ae)s=Ae;else{if(s<-Ae)return{x:-1/0,y:-1/0,z:e.z};if(s>Ae)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(s),u=Math.cos(s),l=a*a,o=i/Math.sqrt(1-t*l),{x:(o+n)*u*Math.cos(r),y:(o+n)*u*Math.sin(r),z:(o*(1-t)+n)*a}}function zce(e,t,i,r){var s=1e-12,n=s*s,o=30,a,l,u,h,p,f,m,g,b,w,S,T,x,_=e.x,M=e.y,I=e.z?e.z:0,A,C,R;if(a=Math.sqrt(_*_+M*M),l=Math.sqrt(_*_+M*M+I*I),a/i<s){if(A=0,l/i<s)return C=Ae,R=-r,{x:e.x,y:e.y,z:e.z}}else A=Math.atan2(M,_);u=I/l,h=a/l,p=1/Math.sqrt(1-t*(2-t)*h*h),g=h*(1-t)*p,b=u*p,x=0;do x++,m=i/Math.sqrt(1-t*b*b),R=a*g+I*b-m*(1-t*b*b),f=t*m/(m+R),p=1/Math.sqrt(1-f*(2-f)*h*h),w=h*(1-f)*p,S=u*p,T=S*g-w*b,g=w,b=S;while(T*T>n&&x<o);return C=Math.atan(S/Math.abs(w)),{x:A,y:C,z:R}}function HGe(e,t,i){if(t===ag)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===lg){var r=i[0],s=i[1],n=i[2],o=i[3],a=i[4],l=i[5],u=i[6];return{x:u*(e.x-l*e.y+a*e.z)+r,y:u*(l*e.x+e.y-o*e.z)+s,z:u*(-a*e.x+o*e.y+e.z)+n}}}function WGe(e,t,i){if(t===ag)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===lg){var r=i[0],s=i[1],n=i[2],o=i[3],a=i[4],l=i[5],u=i[6],h=(e.x-r)/u,p=(e.y-s)/u,f=(e.z-n)/u;return{x:h+l*p-a*f,y:-l*h+p+o*f,z:a*h-o*p+f}}}function pE(e){return e===ag||e===lg}function JGe(e,t,i){if(qGe(e,t)||e.datum_type===WD||t.datum_type===WD)return i;var r=e.a,s=e.es;if(e.datum_type===Xv){var n=XJ(e,!1,i);if(n!==0)return;r=HJ,s=WJ}var o=t.a,a=t.b,l=t.es;if(t.datum_type===Xv&&(o=HJ,a=QVe,l=WJ),s===l&&r===o&&!pE(e.datum_type)&&!pE(t.datum_type))return i;if(i=Bce(i,s,r),pE(e.datum_type)&&(i=HGe(i,e.datum_type,e.datum_params)),pE(t.datum_type)&&(i=WGe(i,t.datum_type,t.datum_params)),i=zce(i,l,o,a),t.datum_type===Xv){var u=XJ(t,!0,i);if(u!==0)return}return i}function XJ(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-i.x,y:i.y},s={x:Number.NaN,y:Number.NaN},n=[];e:for(var o=0;o<e.grids.length;o++){var a=e.grids[o];if(n.push(a.name),a.isNull){s=r;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,h=l.length;u<h;u++){var p=l[u],f=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,m=p.ll[0]-f,g=p.ll[1]-f,b=p.ll[0]+(p.lim[0]-1)*p.del[0]+f,w=p.ll[1]+(p.lim[1]-1)*p.del[1]+f;if(!(g>r.y||m>r.x||w<r.y||b<r.x)&&(s=ZGe(r,t,p),!isNaN(s.x)))break e}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*ec+" "+r.y*ec+" tried: '"+n+"'"),-1):(i.x=-s.x,i.y=s.y,0)}function ZGe(e,t,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var s={x:e.x,y:e.y};s.x-=i.ll[0],s.y-=i.ll[1],s.x=He(s.x-Math.PI)+Math.PI;var n=QJ(s,i);if(t){if(isNaN(n.x))return r;n.x=s.x-n.x,n.y=s.y-n.y;var o=9,a=1e-12,l,u;do{if(u=QJ(n,i),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:s.x-(u.x+n.x),y:s.y-(u.y+n.y)},n.x+=l.x,n.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=He(n.x+i.ll[0]),r.y=n.y+i.ll[1]}else isNaN(n.x)||(r.x=e.x+n.x,r.y=e.y+n.y);return r}function QJ(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},s={x:i.x-1*r.x,y:i.y-1*r.y},n={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=t.lim[0]||r.y<0||r.y>=t.lim[1])return n;o=r.y*t.lim[0]+r.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var h={x:t.cvs[o][0],y:t.cvs[o][1]},p=s.x*s.y,f=s.x*(1-s.y),m=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return n.x=m*a.x+f*l.x+g*h.x+p*u.x,n.y=m*a.y+f*l.y+g*h.y+p*u.y,n}function eZ(e,t,i){var r=i.x,s=i.y,n=i.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&i.z===void 0))switch(l===0?(o=r,"ew".indexOf(e.axis[l])!==-1?a="x":a="y"):l===1?(o=s,"ns".indexOf(e.axis[l])!==-1?a="y":a="x"):(o=n,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":i[a]!==void 0&&(u.z=o);break;case"d":i[a]!==void 0&&(u.z=-o);break;default:return null}return u}function qce(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function YGe(e){tZ(e.x),tZ(e.y)}function tZ(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function KGe(e,t){return(e.datum.datum_type===ag||e.datum.datum_type===lg||e.datum.datum_type===Xv)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ag||t.datum.datum_type===lg||t.datum.datum_type===Xv)&&e.datumCode!=="WGS84"}function pA(e,t,i,r){var s;Array.isArray(i)?i=qce(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var n=i.z!==void 0;if(YGe(i),e.datum&&t.datum&&KGe(e,t)&&(s=new hc("WGS84"),i=pA(e,s,i,r),e=s),r&&e.axis!=="enu"&&(i=eZ(e,!1,i)),e.projName==="longlat")i={x:i.x*js,y:i.y*js,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=JGe(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*ec,y:i.y*ec,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),r&&t.axis!=="enu"?eZ(t,!0,i):(i&&!n&&delete i.z,i)}var iZ=hc("WGS84");function PR(e,t,i,r){var s,n,o;return Array.isArray(i)?(s=pA(e,t,i,r)||{x:NaN,y:NaN},i.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(i.slice(3)):[s.x,s.y,i[2]].concat(i.slice(3)):[s.x,s.y].concat(i.slice(2)):[s.x,s.y]):(n=pA(e,t,i,r),o=Object.keys(i),o.length===2||o.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;n[a]=i[a]}),n)}function rZ(e){return e instanceof hc?e:e.oProj?e.oProj:hc(e)}function Ci(e,t,i){e=rZ(e);var r=!1,s;return typeof t>"u"?(t=e,e=iZ,r=!0):(typeof t.x<"u"||Array.isArray(t))&&(i=t,t=e,e=iZ,r=!0),t=rZ(t),i?PR(e,t,i):(s={forward:function(n,o){return PR(e,t,n,o)},inverse:function(n,o){return PR(t,e,n,o)}},r&&(s.oProj=t),s)}var sZ=6,Hce="AJSAJS",Wce="AFAFAF",yv=65,go=73,ja=79,$_=86,C_=90;const XGe={forward:Jce,inverse:QGe,toPoint:Zce};function Jce(e,t){return t=t||5,iBe(eBe({lat:e[1],lon:e[0]}),t)}function QGe(e){var t=v7(Kce(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Zce(e){var t=v7(Kce(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function LR(e){return e*(Math.PI/180)}function nZ(e){return 180*(e/Math.PI)}function eBe(e){var t=e.lat,i=e.lon,r=6378137,s=.00669438,n=.9996,o,a,l,u,h,p,f,m=LR(t),g=LR(i),b,w;w=Math.floor((i+180)/6)+1,i===180&&(w=60),t>=56&&t<64&&i>=3&&i<12&&(w=32),t>=72&&t<84&&(i>=0&&i<9?w=31:i>=9&&i<21?w=33:i>=21&&i<33?w=35:i>=33&&i<42&&(w=37)),o=(w-1)*6-180+3,b=LR(o),a=s/(1-s),l=r/Math.sqrt(1-s*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),h=a*Math.cos(m)*Math.cos(m),p=Math.cos(m)*(g-b),f=r*((1-s/4-3*s*s/64-5*s*s*s/256)*m-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*m)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*m)-35*s*s*s/3072*Math.sin(6*m));var S=n*l*(p+(1-u+h)*p*p*p/6+(5-18*u+u*u+72*h-58*a)*p*p*p*p*p/120)+5e5,T=n*(f+l*Math.tan(m)*(p*p/2+(5-u+9*h+4*h*h)*p*p*p*p/24+(61-58*u+u*u+600*h-330*a)*p*p*p*p*p*p/720));return t<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(S),zoneNumber:w,zoneLetter:tBe(t)}}function v7(e){var t=e.northing,i=e.easting,r=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var n=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,p,f,m,g,b,w,S,T,x=i-5e5,_=t;r<"N"&&(_-=1e7),w=(s-1)*6-180+3,l=a/(1-a),b=_/n,S=b/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),T=S+(3*u/2-27*u*u*u/32)*Math.sin(2*S)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*S)+151*u*u*u/96*Math.sin(6*S),h=o/Math.sqrt(1-a*Math.sin(T)*Math.sin(T)),p=Math.tan(T)*Math.tan(T),f=l*Math.cos(T)*Math.cos(T),m=o*(1-a)/Math.pow(1-a*Math.sin(T)*Math.sin(T),1.5),g=x/(h*n);var M=T-h*Math.tan(T)/m*(g*g/2-(5+3*p+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*p+298*f+45*p*p-252*l-3*f*f)*g*g*g*g*g*g/720);M=nZ(M);var I=(g-(1+2*p+f)*g*g*g/6+(5-2*f+28*p-3*f*f+8*l+24*p*p)*g*g*g*g*g/120)/Math.cos(T);I=w+nZ(I);var A;if(e.accuracy){var C=v7({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});A={top:C.lat,right:C.lon,bottom:M,left:I}}else A={lat:M,lon:I};return A}function tBe(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function iBe(e,t){var i="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+rBe(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+r.substr(r.length-5,t)}function rBe(e,t,i){var r=Yce(i),s=Math.floor(e/1e5),n=Math.floor(t/1e5)%20;return sBe(s,n,r)}function Yce(e){var t=e%sZ;return t===0&&(t=sZ),t}function sBe(e,t,i){var r=i-1,s=Hce.charCodeAt(r),n=Wce.charCodeAt(r),o=s+e-1,a=n+t,l=!1;o>C_&&(o=o-C_+yv-1,l=!0),(o===go||s<go&&o>go||(o>go||s<go)&&l)&&o++,(o===ja||s<ja&&o>ja||(o>ja||s<ja)&&l)&&(o++,o===go&&o++),o>C_&&(o=o-C_+yv-1),a>$_?(a=a-$_+yv-1,l=!0):l=!1,(a===go||n<go&&a>go||(a>go||n<go)&&l)&&a++,(a===ja||n<ja&&a>ja||(a>ja||n<ja)&&l)&&(a++,a===go&&a++),a>$_&&(a=a-$_+yv-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function Kce(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,r="",s,n=0;!/[A-Z]/.test(s=e.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+e;r+=s,n++}var o=parseInt(r,10);if(n===0||n+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(n++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;i=e.substring(n,n+=2);for(var l=Yce(o),u=nBe(i.charAt(0),l),h=oBe(i.charAt(1),l);h<aBe(a);)h+=2e6;var p=t-n;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var f=p/2,m=0,g=0,b,w,S,T,x;return f>0&&(b=1e5/Math.pow(10,f),w=e.substring(n,n+f),m=parseFloat(w)*b,S=e.substring(n+f),g=parseFloat(S)*b),T=m+u,x=g+h,{easting:T,northing:x,zoneLetter:a,zoneNumber:o,accuracy:b}}function nBe(e,t){for(var i=Hce.charCodeAt(t-1),r=1e5,s=!1;i!==e.charCodeAt(0);){if(i++,i===go&&i++,i===ja&&i++,i>C_){if(s)throw"Bad character: "+e;i=yv,s=!0}r+=1e5}return r}function oBe(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=Wce.charCodeAt(t-1),r=0,s=!1;i!==e.charCodeAt(0);){if(i++,i===go&&i++,i===ja&&i++,i>$_){if(s)throw"Bad character: "+e;i=yv,s=!0}r+=1e5}return r}function aBe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function A1(e,t,i){if(!(this instanceof A1))return new A1(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}A1.fromMGRS=function(e){return new A1(Zce(e))};A1.prototype.toMGRS=function(e){return Jce([this.x,this.y],e)};var lBe=1,uBe=.25,oZ=.046875,aZ=.01953125,lZ=.01068115234375,cBe=.75,hBe=.46875,pBe=.013020833333333334,dBe=.007120768229166667,fBe=.3645833333333333,mBe=.005696614583333333,yBe=.3076171875;function b7(e){var t=[];t[0]=lBe-e*(uBe+e*(oZ+e*(aZ+e*lZ))),t[1]=e*(cBe-e*(oZ+e*(aZ+e*lZ)));var i=e*e;return t[2]=i*(hBe-e*(pBe+e*dBe)),i*=e,t[3]=i*(fBe-e*mBe),t[4]=i*e*yBe,t}function _b(e,t,i,r){return i*=t,t*=t,r[0]*e-i*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))}var gBe=20;function w7(e,t,i){for(var r=1/(1-t),s=e,n=gBe;n;--n){var o=Math.sin(s),a=1-t*o*o;if(a=(_b(s,o,Math.cos(s),i)-e)*(a*Math.sqrt(a))*r,s-=a,Math.abs(a)<ze)return s}return s}function vBe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=b7(this.es),this.ml0=_b(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function bBe(e){var t=e.x,i=e.y,r=He(t-this.long0),s,n,o,a=Math.sin(i),l=Math.cos(i);if(this.es){var h=l*r,p=Math.pow(h,2),f=this.ep2*Math.pow(l,2),m=Math.pow(f,2),g=Math.abs(l)>ze?Math.tan(i):0,b=Math.pow(g,2),w=Math.pow(b,2);s=1-this.es*Math.pow(a,2),h=h/Math.sqrt(s);var S=_b(i,a,l,this.en);n=this.a*(this.k0*h*(1+p/6*(1-b+f+p/20*(5-18*b+w+14*f-58*b*f+p/42*(61+179*w-w*b-479*b)))))+this.x0,o=this.a*(this.k0*(S-this.ml0+a*r*h/2*(1+p/12*(5-b+9*f+4*m+p/30*(61+w-58*b+270*f-330*b*f+p/56*(1385+543*w-w*b-3111*b))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<ze)return 93;if(n=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>ze)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=n,e.y=o,e}function wBe(e){var t,i,r,s,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,i=w7(t,this.es,this.en),Math.abs(i)<Ae){var p=Math.sin(i),f=Math.cos(i),m=Math.abs(f)>ze?Math.tan(i):0,g=this.ep2*Math.pow(f,2),b=Math.pow(g,2),w=Math.pow(m,2),S=Math.pow(w,2);t=1-this.es*Math.pow(p,2);var T=n*Math.sqrt(t)/this.k0,x=Math.pow(T,2);t=t*m,r=i-t*x/(1-this.es)*.5*(1-x/12*(5+3*w-9*g*w+g-4*b-x/30*(61+90*w-252*g*w+45*S+46*g-x/56*(1385+3633*w+4095*S+1574*S*w)))),s=He(this.long0+T*(1-x/6*(1+2*w+g-x/20*(5+28*w+24*S+8*g*w+6*g-x/42*(61+662*w+1320*S+720*S*w))))/f)}else r=Ae*Cx(o),s=0;else{var a=Math.exp(n/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,h=Math.cos(u);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(t),o<0&&(r=-r),l===0&&h===0?s=0:s=He(Math.atan2(l,h)+this.long0)}return e.x=s,e.y=r,e}var _Be=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const AI={init:vBe,forward:bBe,inverse:wBe,names:_Be};function Xce(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function To(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),r=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}function SBe(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function xBe(e){var t=Math.abs(e);return t=SBe(t*(1+t/(To(1,t)+1))),e<0?-t:t}function _7(e,t){for(var i=2*Math.cos(2*t),r=e.length-1,s=e[r],n=0,o;--r>=0;)o=-n+i*s+e[r],n=s,s=o;return t+o*Math.sin(2*t)}function TBe(e,t){for(var i=2*Math.cos(t),r=e.length-1,s=e[r],n=0,o;--r>=0;)o=-n+i*s+e[r],n=s,s=o;return Math.sin(t)*o}function EBe(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Qce(e,t,i){for(var r=Math.sin(t),s=Math.cos(t),n=Xce(i),o=EBe(i),a=2*s*o,l=-2*r*n,u=e.length-1,h=e[u],p=0,f=0,m=0,g,b;--u>=0;)g=f,b=p,f=h,p=m,h=-g+a*f-l*p+e[u],m=-b+l*f+a*p;return a=r*o,l=s*n,[a*h-l*m,a*m+l*h]}function MBe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(AI.init.apply(this),this.forward=AI.forward,this.inverse=AI.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var r=_7(this.cbg,this.lat0);this.Zb=-this.Qn*(r+TBe(this.gtu,2*r))}function IBe(e){var t=He(e.x-this.long0),i=e.y;i=_7(this.cbg,i);var r=Math.sin(i),s=Math.cos(i),n=Math.sin(t),o=Math.cos(t);i=Math.atan2(r,o*s),t=Math.atan2(n*s,To(r,s*o)),t=xBe(Math.tan(t));var a=Qce(this.gtu,2*i,2*t);i=i+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function ABe(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var r,s;if(Math.abs(t)<=2.623395162778){var n=Qce(this.utg,2*i,2*t);i=i+n[0],t=t+n[1],t=Math.atan(Xce(t));var o=Math.sin(i),a=Math.cos(i),l=Math.sin(t),u=Math.cos(t);i=Math.atan2(o*u,To(l,u*a)),t=Math.atan2(l,u*a),r=He(t+this.long0),s=_7(this.cgb,i)}else r=1/0,s=1/0;return e.x=r,e.y=s,e}var $Be=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const $I={init:MBe,forward:IBe,inverse:ABe,names:$Be};function CBe(e,t){if(e===void 0){if(e=Math.floor((He(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var RBe="etmerc";function OBe(){var e=CBe(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*js,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,$I.init.apply(this),this.forward=$I.forward,this.inverse=$I.inverse}var PBe=["Universal Transverse Mercator System","utm"];const LBe={init:OBe,names:PBe,dependsOn:RBe};function S7(e,t){return Math.pow((1-e)/(1+e),t)}var NBe=20;function kBe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+yi)/(Math.pow(Math.tan(.5*this.lat0+yi),this.C)*S7(this.e*e,this.ratexp))}function DBe(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+yi),this.C)*S7(this.e*Math.sin(i),this.ratexp))-Ae,e.x=this.C*t,e}function FBe(e){for(var t=1e-14,i=e.x/this.C,r=e.y,s=Math.pow(Math.tan(.5*r+yi)/this.K,1/this.C),n=NBe;n>0&&(r=2*Math.atan(s*S7(this.e*Math.sin(e.y),-.5*this.e))-Ae,!(Math.abs(r-e.y)<t));--n)e.y=r;return n?(e.x=i,e.y=r,e):null}var jBe=["gauss"];const x7={init:kBe,forward:DBe,inverse:FBe,names:jBe};function UBe(){x7.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function VBe(e){var t,i,r,s;return e.x=He(e.x-this.long0),x7.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*r),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function GBe(e){var t,i,r,s,n;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,n=To(e.x,e.y)){var o=2*Math.atan2(n,this.R2);t=Math.sin(o),i=Math.cos(o),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/n),r=Math.atan2(e.x*t,n*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,r=0;return e.x=r,e.y=s,x7.inverse.apply(this,[e]),e.x=He(e.x+this.long0),e}var BBe=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const zBe={init:UBe,forward:VBe,inverse:GBe,names:BBe};function qBe(e,t,i){return t*=i,Math.tan(.5*(Ae+e))*Math.pow((1-t)/(1+t),.5*i)}function HBe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ze&&(this.k0=.5*(1+Cx(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ze&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ze&&Math.abs(Math.cos(this.lat_ts))>ze&&(this.k0=.5*this.cons*Sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/iu(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Sc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ae,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function WBe(e){var t=e.x,i=e.y,r=Math.sin(i),s=Math.cos(i),n,o,a,l,u,h,p=He(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=ze&&Math.abs(i+this.lat0)<=ze?(e.x=NaN,e.y=NaN,e):this.sphere?(n=2*this.k0/(1+this.sinlat0*r+this.coslat0*s*Math.cos(p)),e.x=this.a*n*s*Math.sin(p)+this.x0,e.y=this.a*n*(this.coslat0*r-this.sinlat0*s*Math.cos(p))+this.y0,e):(o=2*Math.atan(this.ssfn_(i,r,this.e))-Ae,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=ze?(u=iu(this.e,i*this.con,this.con*r),h=2*this.a*this.k0*u/this.cons,e.x=this.x0+h*Math.sin(t-this.long0),e.y=this.y0-this.con*h*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<ze?(n=2*this.a*this.k0/(1+l*Math.cos(p)),e.y=n*a):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(p))),e.y=n*(this.cosX0*a-this.sinX0*l*Math.cos(p))+this.y0),e.x=n*l*Math.sin(p)+this.x0,e))}function JBe(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,s,n,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,i=this.lat0,o<=ze?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<ze?this.lat0>0?t=He(this.long0+Math.atan2(e.x,-1*e.y)):t=He(this.long0+Math.atan2(e.x,e.y)):t=He(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=ze){if(o<=ze)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,r=o*this.cons/(2*this.a*this.k0),i=this.con*gS(this.e,r),t=this.con*He(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=ze?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/o),t=He(this.long0+Math.atan2(e.x*Math.sin(s),o*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*gS(this.e,Math.tan(.5*(Ae+n)));return e.x=t,e.y=i,e}var ZBe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const YBe={init:HBe,forward:WBe,inverse:JBe,names:ZBe,ssfn_:qBe};function KBe(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,r=this.rf,s=1/r,n=2*s-Math.pow(s,2),o=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(t,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function XBe(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(r))-Math.PI/4),n=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function QBe(e){for(var t=e.x-this.x0,i=e.y-this.y0,r=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,l=0,u=n,h=-1e3,p=0;Math.abs(u-h)>1e-7;){if(++p>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var eze=["somerc"];const tze={init:KBe,forward:XBe,inverse:QBe,names:eze};var X0=1e-7;function ize(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function rze(){var e,t,i,r,s,n,o,a,l,u,h=0,p,f=0,m=0,g=0,b=0,w=0,S=0;this.no_off=ize(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),T&&(S=this.alpha),x&&(h=this.rectified_grid_angle*js),T||x)f=this.longc;else if(m=this.long1,b=this.lat1,g=this.long2,w=this.lat2,Math.abs(b-w)<=X0||(e=Math.abs(b))<=X0||Math.abs(e-Ae)<=X0||Math.abs(Math.abs(this.lat0)-Ae)<=X0||Math.abs(Math.abs(w)-Ae)<=X0)throw new Error;var _=1-this.es;t=Math.sqrt(_),Math.abs(this.lat0)>ze?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*t/e,r=this.B*t/(i*Math.sqrt(e)),s=r*r-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=r,this.E*=Math.pow(iu(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=r=s=1),T||x?(T?(p=Math.asin(Math.sin(S)/r),x||(h=S)):(p=h,S=Math.asin(r*Math.sin(p))),this.lam0=f-Math.asin(.5*(s-1/s)*Math.tan(p))/this.B):(n=Math.pow(iu(this.e,b,Math.sin(b)),this.B),o=Math.pow(iu(this.e,w,Math.sin(w)),this.B),s=this.E/n,l=(o-n)/(o+n),u=this.E*this.E,u=(u-o*n)/(u+o*n),e=m-g,e<-Math.pi?g-=mS:e>Math.pi&&(g+=mS),this.lam0=He(.5*(m+g)-Math.atan(u*Math.tan(.5*this.B*(m-g))/l)/this.B),p=Math.atan(2*Math.sin(this.B*He(m-this.lam0))/(s-1/s)),h=S=Math.asin(r*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(yi-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(yi+s))}function sze(e){var t={},i,r,s,n,o,a,l,u;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Ae)>ze){if(o=this.E/Math.pow(iu(this.e,e.y,Math.sin(e.y)),this.B),a=1/o,i=.5*(o-a),r=.5*(o+a),n=Math.sin(this.B*e.x),s=(i*this.singam-n*this.cosgam)/r,Math.abs(Math.abs(s)-1)<ze)throw new Error;u=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*e.x),Math.abs(a)<X0?l=this.A*e.x:l=this.ArB*Math.atan2(i*this.cosgam+n*this.singam,a)}else u=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function nze(e){var t,i,r,s,n,o,a,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*i),s=.5*(r-1/r),n=.5*(r+1/r),o=Math.sin(this.BrA*t),a=(o*this.cosgam+s*this.singam)/n,Math.abs(Math.abs(a)-1)<ze)l.x=0,l.y=a<0?-Ae:Ae;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=gS(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var oze=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const aze={init:rze,forward:sze,inverse:nze,names:oze};function lze(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ze)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),r=Sc(this.e,t,i),s=iu(this.e,this.lat1,t),n=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Sc(this.e,n,o),l=iu(this.e,this.lat2,n),u=iu(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ze?this.ns=Math.log(r/a)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function uze(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=ze&&(i=Cx(i)*(Ae-2*ze));var r=Math.abs(Math.abs(i)-Ae),s,n;if(r>ze)s=iu(this.e,i,Math.sin(i)),n=this.a*this.f0*Math.pow(s,this.ns);else{if(r=i*this.ns,r<=0)return null;n=0}var o=this.ns*He(t-this.long0);return e.x=this.k0*(n*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,e}function cze(e){var t,i,r,s,n,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),i=1):(t=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(t!==0&&(l=Math.atan2(i*o,i*a)),t!==0||this.ns>0){if(i=1/this.ns,r=Math.pow(t/(this.a*this.f0),i),s=gS(this.e,r),s===-9999)return null}else s=-Ae;return n=He(l/this.ns+this.long0),e.x=n,e.y=s,e}var hze=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const pze={init:lze,forward:uze,inverse:cze,names:hze};function dze(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function fze(e){var t,i,r,s,n,o,a,l=e.x,u=e.y,h=He(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-h*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(s)),o=this.n*n,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function mze(e){var t,i,r,s,n,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),n=Math.atan2(e.y,e.x),s=n/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),i=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,a=t,l=0;var h=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,h+=1;while(l===0&&h<15);return h>=15?null:e}var yze=["Krovak","krovak"];const gze={init:dze,forward:fze,inverse:mze,names:yze};function Qn(e,t,i,r,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)}function Rx(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Ox(e){return .375*e*(1+.25*e*(1+.46875*e))}function Px(e){return .05859375*e*e*(1+.75*e)}function Lx(e){return e*e*e*(35/3072)}function $1(e,t,i){var r=t*i;return e/Math.sqrt(1-r*r)}function Af(e){return Math.abs(e)<Ae?e:e-Cx(e)*Math.PI}function dA(e,t,i,r,s){var n,o;n=e/t;for(var a=0;a<15;a++)if(o=(e-(t*n-i*Math.sin(2*n)+r*Math.sin(4*n)-s*Math.sin(6*n)))/(t-2*i*Math.cos(2*n)+4*r*Math.cos(4*n)-6*s*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function vze(){this.sphere||(this.e0=Rx(this.es),this.e1=Ox(this.es),this.e2=Px(this.es),this.e3=Lx(this.es),this.ml0=this.a*Qn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function bze(e){var t,i,r=e.x,s=e.y;if(r=He(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(r)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var n=Math.sin(s),o=Math.cos(s),a=$1(this.a,this.e,n),l=Math.tan(s)*Math.tan(s),u=r*Math.cos(s),h=u*u,p=this.es*o*o/(1-this.es),f=this.a*Qn(this.e0,this.e1,this.e2,this.e3,s);t=a*u*(1-h*l*(1/6-(8-l+8*p)*h/120)),i=f-this.ml0+a*n/o*h*(.5+(5-l+6*p)*h/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function wze(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,s;if(this.sphere){var n=i+this.lat0;r=Math.asin(Math.sin(n)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(n))}else{var o=this.ml0/this.a+i,a=dA(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ae)<=ze)return e.x=this.long0,e.y=Ae,i<0&&(e.y*=-1),e;var l=$1(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),p=t*this.a/l,f=p*p;r=a-l*Math.tan(a)/u*p*p*(.5-(1+3*h)*p*p/24),s=p*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(a)}return e.x=He(s+this.long0),e.y=Af(r),e}var _ze=["Cassini","Cassini_Soldner","cass"];const Sze={init:vze,forward:bze,inverse:wze,names:_ze};function Wd(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var xze=1,Tze=2,Eze=3,Mze=4;function Ize(){var e=Math.abs(this.lat0);if(Math.abs(e-Ae)<ze?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ze?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Wd(this.e,1),this.mmf=.5/(1-this.es),this.apa=kze(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Wd(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Aze(e){var t,i,r,s,n,o,a,l,u,h,p=e.x,f=e.y;if(p=He(p-this.long0),this.sphere){if(n=Math.sin(f),h=Math.cos(f),r=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+h*r:1+this.sinph0*n+this.cosph0*h*r,i<=ze)return null;i=Math.sqrt(2/i),t=i*h*Math.sin(p),i*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<ze)return null;i=yi-f*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(p),i*=r}}else{switch(a=0,l=0,u=0,r=Math.cos(p),s=Math.sin(p),n=Math.sin(f),o=Wd(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Ae+f,o=this.qp-o;break;case this.S_POLE:u=f-Ae,o=this.qp+o;break}if(Math.abs(u)<ze)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?i=this.ymf*u*(this.cosb1*a-this.sinb1*l*r):i=(u=Math.sqrt(2/(1+l*r)))*a*this.ymf,t=this.xmf*u*l*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*s,i=r*(this.mode===this.S_POLE?u:-u)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function $ze(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,r,s,n,o,a,l,u;if(this.sphere){var h=0,p,f=0;if(p=Math.sqrt(t*t+i*i),s=p*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(s),h=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(p)<=ze?0:Math.asin(i*f/p),t*=f,i=h*p;break;case this.OBLIQ:s=Math.abs(p)<=ze?this.lat0:Math.asin(h*this.sinph0+i*f*this.cosph0/p),t*=f*this.cosph0,i=(h-Math.sin(s)*this.sinph0)*p;break;case this.N_POLE:i=-i,s=Ae-s;break;case this.S_POLE:s-=Ae;break}r=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,l=Math.sqrt(t*t+i*i),l<ze)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*l/this.rq),n=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=n*this.sinb1+i*o*this.cosb1/l,a=this.qp*u,i=l*this.cosb1*n-i*this.sinb1*o):(u=i*o/l,a=this.qp*u,i=l*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),a=t*t+i*i,!a)return e.x=this.long0,e.y=this.lat0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(t,i),s=Dze(Math.asin(u),this.apa)}return e.x=He(this.long0+r),e.y=s,e}var Cze=.3333333333333333,Rze=.17222222222222222,Oze=.10257936507936508,Pze=.06388888888888888,Lze=.0664021164021164,Nze=.016415012942191543;function kze(e){var t,i=[];return i[0]=e*Cze,t=e*e,i[0]+=t*Rze,i[1]=t*Pze,t*=e,i[0]+=t*Oze,i[1]+=t*Lze,i[2]=t*Nze,i}function Dze(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var Fze=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const jze={init:Ize,forward:Aze,inverse:$ze,names:Fze,S_POLE:xze,N_POLE:Tze,EQUIT:Eze,OBLIQ:Mze};function lf(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function Uze(){Math.abs(this.lat1+this.lat2)<ze||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Sc(this.e3,this.sin_po,this.cos_po),this.qs1=Wd(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Sc(this.e3,this.sin_po,this.cos_po),this.qs2=Wd(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Wd(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ze?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Vze(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=Wd(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,n=this.ns0*He(t-this.long0),o=s*Math.sin(n)+this.x0,a=this.rh-s*Math.cos(n)+this.y0;return e.x=o,e.y=a,e}function Gze(e){var t,i,r,s,n,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),s=0,t!==0&&(s=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,i)),n=He(s/this.ns0+this.long0),e.x=n,e.y=o,e}function Bze(e,t){var i,r,s,n,o,a=lf(.5*t);if(e<ze)return a;for(var l=e*e,u=1;u<=25;u++)if(i=Math.sin(a),r=Math.cos(a),s=e*i,n=1-s*s,o=.5*n*n/r*(t/(1-l)-i/n+.5/e*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var zze=["Albers_Conic_Equal_Area","Albers","aea"];const qze={init:Uze,forward:Vze,inverse:Gze,names:zze,phi1z:Bze};function Hze(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Wze(e){var t,i,r,s,n,o,a,l,u=e.x,h=e.y;return r=He(u-this.long0),t=Math.sin(h),i=Math.cos(h),s=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*s,n=1,o>0||Math.abs(o)<=ze?(a=this.x0+this.a*n*i*Math.sin(r)/o,l=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*i*s)/o):(a=this.x0+this.infinity_dist*i*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=a,e.y=l,e}function Jze(e){var t,i,r,s,n,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),r=Math.cos(s),o=lf(r*this.sin_p14+e.y*i*this.cos_p14/t),n=Math.atan2(e.x*i,t*this.cos_p14*r-e.y*this.sin_p14*i),n=He(this.long0+n)):(o=this.phic0,n=0),e.x=n,e.y=o,e}var Zze=["gnom"];const Yze={init:Hze,forward:Wze,inverse:Jze,names:Zze};function Kze(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*Ae:Ae;for(var r=Math.asin(.5*t),s,n,o,a,l=0;l<30;l++)if(n=Math.sin(r),o=Math.cos(r),a=e*n,s=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-n/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),r+=s,Math.abs(s)<=1e-10)return r;return NaN}function Xze(){this.sphere||(this.k0=Sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Qze(e){var t=e.x,i=e.y,r,s,n=He(t-this.long0);if(this.sphere)r=this.x0+this.a*n*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=Wd(this.e,Math.sin(i));r=this.x0+this.a*this.k0*n,s=this.y0+this.a*o*.5/this.k0}return e.x=r,e.y=s,e}function eqe(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=He(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=Kze(this.e,2*e.y*this.k0/this.a),t=He(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var tqe=["cea"];const iqe={init:Xze,forward:Qze,inverse:eqe,names:tqe};function rqe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function sqe(e){var t=e.x,i=e.y,r=He(t-this.long0),s=Af(i-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*s,e}function nqe(e){var t=e.x,i=e.y;return e.x=He(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Af(this.lat0+(i-this.y0)/this.a),e}var oqe=["Equirectangular","Equidistant_Cylindrical","eqc"];const aqe={init:rqe,forward:sqe,inverse:nqe,names:oqe};var uZ=20;function lqe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Rx(this.es),this.e1=Ox(this.es),this.e2=Px(this.es),this.e3=Lx(this.es),this.ml0=this.a*Qn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function uqe(e){var t=e.x,i=e.y,r,s,n,o=He(t-this.long0);if(n=o*Math.sin(i),this.sphere)Math.abs(i)<=ze?(r=this.a*o,s=-1*this.a*this.lat0):(r=this.a*Math.sin(n)/Math.tan(i),s=this.a*(Af(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=ze)r=this.a*o,s=-1*this.ml0;else{var a=$1(this.a,this.e,Math.sin(i))/Math.tan(i);r=a*Math.sin(n),s=this.a*Qn(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+a*(1-Math.cos(n))}return e.x=r+this.x0,e.y=s+this.y0,e}function cqe(e){var t,i,r,s,n,o,a,l,u;if(r=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=ze)t=He(r/this.a+this.long0),i=0;else{o=this.lat0+s/this.a,a=r*r/this.a/this.a+o*o,l=o;var h;for(n=uZ;n;--n)if(h=Math.tan(l),u=-1*(o*(l*h+1)-l-.5*(l*l+a)*h)/((l-o)/h-1),l+=u,Math.abs(u)<=ze){i=l;break}t=He(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=ze)i=0,t=He(this.long0+r/this.a);else{o=(this.ml0+s)/this.a,a=r*r/this.a/this.a+o*o,l=o;var p,f,m,g,b;for(n=uZ;n;--n)if(b=this.e*Math.sin(l),p=Math.sqrt(1-b*b)*Math.tan(l),f=this.a*Qn(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(p*g+1)-g-.5*p*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*p)+(o-g)*(p*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=ze){i=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=He(this.long0+Math.asin(r*p/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var hqe=["Polyconic","poly"];const pqe={init:lqe,forward:uqe,inverse:cqe,names:hqe};function dqe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function fqe(e){var t,i=e.x,r=e.y,s=r-this.lat0,n=i-this.long0,o=s/h2*1e-5,a=n,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var h=u,p=a,f=1,m=0,g,b,w=0,S=0;for(t=1;t<=6;t++)g=f*h-m*p,b=m*h+f*p,f=g,m=b,w=w+this.B_re[t]*f-this.B_im[t]*m,S=S+this.B_im[t]*f+this.B_re[t]*m;return e.x=S*this.a+this.x0,e.y=w*this.a+this.y0,e}function mqe(e){var t,i=e.x,r=e.y,s=i-this.x0,n=r-this.y0,o=n/this.a,a=s/this.a,l=1,u=0,h,p,f=0,m=0;for(t=1;t<=6;t++)h=l*o-u*a,p=u*o+l*a,l=h,u=p,f=f+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var b=f,w=m,S,T,x=o,_=a;for(t=2;t<=6;t++)S=b*f-w*m,T=w*f+b*m,b=S,w=T,x=x+(t-1)*(this.B_re[t]*b-this.B_im[t]*w),_=_+(t-1)*(this.B_im[t]*b+this.B_re[t]*w);b=1,w=0;var M=this.B_re[1],I=this.B_im[1];for(t=2;t<=6;t++)S=b*f-w*m,T=w*f+b*m,b=S,w=T,M=M+t*(this.B_re[t]*b-this.B_im[t]*w),I=I+t*(this.B_im[t]*b+this.B_re[t]*w);var A=M*M+I*I;f=(x*M+_*I)/A,m=(_*M-x*I)/A}var C=f,R=m,O=1,k=0;for(t=1;t<=9;t++)O=O*C,k=k+this.D[t]*O;var L=this.lat0+k*h2*1e5,V=this.long0+R;return e.x=V,e.y=L,e}var yqe=["New_Zealand_Map_Grid","nzmg"];const gqe={init:dqe,forward:fqe,inverse:mqe,names:yqe};function vqe(){}function bqe(e){var t=e.x,i=e.y,r=He(t-this.long0),s=this.x0+this.a*r,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=n,e}function wqe(e){e.x-=this.x0,e.y-=this.y0;var t=He(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var _qe=["Miller_Cylindrical","mill"];const Sqe={init:vqe,forward:bqe,inverse:wqe,names:_qe};var xqe=20;function Tqe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=b7(this.es)}function Eqe(e){var t,i,r=e.x,s=e.y;if(r=He(r-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var n=this.n*Math.sin(s),o=xqe;o;--o){var a=(this.m*s+Math.sin(s)-n)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<ze)break}t=this.a*this.C_x*r*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),u=Math.cos(s);i=this.a*_b(s,l,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e}function Mqe(e){var t,i,r,s;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(t))),this.m?t=lf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=lf(Math.sin(t)/this.n)),r=He(r+this.long0),t=Af(t)):(t=w7(e.y/this.a,this.es,this.en),s=Math.abs(t),s<Ae?(s=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),r=He(i)):s-ze<Ae&&(r=this.long0)),e.x=r,e.y=t,e}var Iqe=["Sinusoidal","sinu"];const Aqe={init:Tqe,forward:Eqe,inverse:Mqe,names:Iqe};function $qe(){}function Cqe(e){for(var t=e.x,i=e.y,r=He(t-this.long0),s=i,n=Math.PI*Math.sin(i);;){var o=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=o,Math.abs(o)<ze)break}s/=2,Math.PI/2-Math.abs(i)<ze&&(r=0);var a=.900316316158*this.a*r*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=a,e.y=l,e}function Rqe(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var r=He(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=r,e.y=s,e}var Oqe=["Mollweide","moll"];const Pqe={init:$qe,forward:Cqe,inverse:Rqe,names:Oqe};function Lqe(){Math.abs(this.lat1+this.lat2)<ze||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Rx(this.es),this.e1=Ox(this.es),this.e2=Px(this.es),this.e3=Lx(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Sc(this.e,this.sinphi,this.cosphi),this.ml1=Qn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ze?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Sc(this.e,this.sinphi,this.cosphi),this.ml2=Qn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Qn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Nqe(e){var t=e.x,i=e.y,r;if(this.sphere)r=this.a*(this.g-i);else{var s=Qn(this.e0,this.e1,this.e2,this.e3,i);r=this.a*(this.g-s)}var n=this.ns*He(t-this.long0),o=this.x0+r*Math.sin(n),a=this.y0+this.rh-r*Math.cos(n);return e.x=o,e.y=a,e}function kqe(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,r,s;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var n=0;if(i!==0&&(n=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=He(this.long0+n/this.ns),r=Af(this.g-i/this.a),e.x=s,e.y=r,e;var o=this.g-i/this.a;return r=dA(o,this.e0,this.e1,this.e2,this.e3),s=He(this.long0+n/this.ns),e.x=s,e.y=r,e}var Dqe=["Equidistant_Conic","eqdc"];const Fqe={init:Lqe,forward:Nqe,inverse:kqe,names:Dqe};function jqe(){this.R=this.a}function Uqe(e){var t=e.x,i=e.y,r=He(t-this.long0),s,n;Math.abs(i)<=ze&&(s=this.x0+this.R*r,n=this.y0);var o=lf(2*Math.abs(i/Math.PI));(Math.abs(r)<=ze||Math.abs(Math.abs(i)-Ae)<=ze)&&(s=this.x0,i>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,u=Math.sin(o),h=Math.cos(o),p=h/(u+h-1),f=p*p,m=p*(2/u-1),g=m*m,b=Math.PI*this.R*(a*(p-g)+Math.sqrt(l*(p-g)*(p-g)-(g+l)*(f-g)))/(g+l);r<0&&(b=-b),s=this.x0+b;var w=l+p;return b=Math.PI*this.R*(m*w-a*Math.sqrt((g+l)*(l+1)-w*w))/(g+l),i>=0?n=this.y0+b:n=this.y0-b,e.x=s,e.y=n,e}function Vqe(e){var t,i,r,s,n,o,a,l,u,h,p,f,m;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,r=e.x/p,s=e.y/p,n=r*r+s*s,o=-Math.abs(s)*(1+n),a=o-2*s*s+r*r,l=-2*o+1+2*s*s+n*n,m=s*s/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,h=2*Math.sqrt(-u/3),p=3*m/u/h,Math.abs(p)>1&&(p>=0?p=1:p=-1),f=Math.acos(p)/3,e.y>=0?i=(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:i=-(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<ze?t=this.long0:t=He(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(r*r-s*s)+n*n))/2/r),e.x=t,e.y=i,e}var Gqe=["Van_der_Grinten_I","VanDerGrinten","vandg"];const Bqe={init:jqe,forward:Uqe,inverse:Vqe,names:Gqe};function zqe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function qqe(e){var t=e.x,i=e.y,r=Math.sin(e.y),s=Math.cos(e.y),n=He(t-this.long0),o,a,l,u,h,p,f,m,g,b,w,S,T,x,_,M,I,A,C,R,O,k,L;return this.sphere?Math.abs(this.sin_p12-1)<=ze?(e.x=this.x0+this.a*(Ae-i)*Math.sin(n),e.y=this.y0-this.a*(Ae-i)*Math.cos(n),e):Math.abs(this.sin_p12+1)<=ze?(e.x=this.x0+this.a*(Ae+i)*Math.sin(n),e.y=this.y0+this.a*(Ae+i)*Math.cos(n),e):(A=this.sin_p12*r+this.cos_p12*s*Math.cos(n),M=Math.acos(A),I=M?M/Math.sin(M):1,e.x=this.x0+this.a*I*s*Math.sin(n),e.y=this.y0+this.a*I*(this.cos_p12*r-this.sin_p12*s*Math.cos(n)),e):(o=Rx(this.es),a=Ox(this.es),l=Px(this.es),u=Lx(this.es),Math.abs(this.sin_p12-1)<=ze?(h=this.a*Qn(o,a,l,u,Ae),p=this.a*Qn(o,a,l,u,i),e.x=this.x0+(h-p)*Math.sin(n),e.y=this.y0-(h-p)*Math.cos(n),e):Math.abs(this.sin_p12+1)<=ze?(h=this.a*Qn(o,a,l,u,Ae),p=this.a*Qn(o,a,l,u,i),e.x=this.x0+(h+p)*Math.sin(n),e.y=this.y0+(h+p)*Math.cos(n),e):(f=r/s,m=$1(this.a,this.e,this.sin_p12),g=$1(this.a,this.e,r),b=Math.atan((1-this.es)*f+this.es*m*this.sin_p12/(g*s)),w=Math.atan2(Math.sin(n),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(n)),w===0?C=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(w)-Math.PI)<=ze?C=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):C=Math.asin(Math.sin(n)*Math.cos(b)/Math.sin(w)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(w)/Math.sqrt(1-this.es),x=S*T,_=T*T,R=C*C,O=R*C,k=O*C,L=k*C,M=m*C*(1-R*_*(1-_)/6+O/8*x*(1-2*_)+k/120*(_*(4-7*_)-3*S*S*(1-7*_))-L/48*x),e.x=this.x0+M*Math.sin(w),e.y=this.y0+M*Math.cos(w),e))}function Hqe(e){e.x-=this.x0,e.y-=this.y0;var t,i,r,s,n,o,a,l,u,h,p,f,m,g,b,w,S,T,x,_,M,I,A,C;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Ae*this.a?void 0:(i=t/this.a,r=Math.sin(i),s=Math.cos(i),n=this.long0,Math.abs(t)<=ze?o=this.lat0:(o=lf(s*this.sin_p12+e.y*r*this.cos_p12/t),a=Math.abs(this.lat0)-Ae,Math.abs(a)<=ze?this.lat0>=0?n=He(this.long0+Math.atan2(e.x,-e.y)):n=He(this.long0-Math.atan2(-e.x,e.y)):n=He(this.long0+Math.atan2(e.x*r,t*this.cos_p12*s-e.y*this.sin_p12*r))),e.x=n,e.y=o,e)):(l=Rx(this.es),u=Ox(this.es),h=Px(this.es),p=Lx(this.es),Math.abs(this.sin_p12-1)<=ze?(f=this.a*Qn(l,u,h,p,Ae),t=Math.sqrt(e.x*e.x+e.y*e.y),m=f-t,o=dA(m/this.a,l,u,h,p),n=He(this.long0+Math.atan2(e.x,-1*e.y)),e.x=n,e.y=o,e):Math.abs(this.sin_p12+1)<=ze?(f=this.a*Qn(l,u,h,p,Ae),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-f,o=dA(m/this.a,l,u,h,p),n=He(this.long0+Math.atan2(e.x,e.y)),e.x=n,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),w=Math.atan2(e.x,e.y),g=$1(this.a,this.e,this.sin_p12),S=Math.cos(w),T=this.e*this.cos_p12*S,x=-T*T/(1-this.es),_=3*this.es*(1-x)*this.sin_p12*this.cos_p12*S/(1-this.es),M=t/g,I=M-x*(1+x)*Math.pow(M,3)/6-_*(1+3*x)*Math.pow(M,4)/24,A=1-x*I*I/2-M*I*I*I/6,b=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*S),n=He(this.long0+Math.asin(Math.sin(w)*Math.sin(I)/Math.cos(b))),C=Math.sin(b),o=Math.atan2((C-this.es*A*this.sin_p12)*Math.tan(b),C*(1-this.es)),e.x=n,e.y=o,e))}var Wqe=["Azimuthal_Equidistant","aeqd"];const Jqe={init:zqe,forward:qqe,inverse:Hqe,names:Wqe};function Zqe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Yqe(e){var t,i,r,s,n,o,a,l,u=e.x,h=e.y;return r=He(u-this.long0),t=Math.sin(h),i=Math.cos(h),s=Math.cos(r),o=this.sin_p14*t+this.cos_p14*i*s,n=1,(o>0||Math.abs(o)<=ze)&&(a=this.a*n*i*Math.sin(r),l=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*i*s)),e.x=a,e.y=l,e}function Kqe(e){var t,i,r,s,n,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=lf(t/this.a),r=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(t)<=ze?(a=this.lat0,e.x=o,e.y=a,e):(a=lf(s*this.sin_p14+e.y*r*this.cos_p14/t),n=Math.abs(this.lat0)-Ae,Math.abs(n)<=ze?(this.lat0>=0?o=He(this.long0+Math.atan2(e.x,-e.y)):o=He(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=He(this.long0+Math.atan2(e.x*r,t*this.cos_p14*s-e.y*this.sin_p14*r)),e.x=o,e.y=a,e))}var Xqe=["ortho"];const Qqe={init:Zqe,forward:Yqe,inverse:Kqe,names:Xqe};var dr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},gi={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function eHe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ae-yi/2?this.face=dr.TOP:this.lat0<=-(Ae-yi/2)?this.face=dr.BOTTOM:Math.abs(this.long0)<=yi?this.face=dr.FRONT:Math.abs(this.long0)<=Ae+yi?this.face=this.long0>0?dr.RIGHT:dr.LEFT:this.face=dr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function tHe(e){var t={x:0,y:0},i,r,s,n,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,r=e.x,this.face===dr.TOP)n=Ae-i,r>=yi&&r<=Ae+yi?(l.value=gi.AREA_0,s=r-Ae):r>Ae+yi||r<=-(Ae+yi)?(l.value=gi.AREA_1,s=r>0?r-Nr:r+Nr):r>-(Ae+yi)&&r<=-yi?(l.value=gi.AREA_2,s=r+Ae):(l.value=gi.AREA_3,s=r);else if(this.face===dr.BOTTOM)n=Ae+i,r>=yi&&r<=Ae+yi?(l.value=gi.AREA_0,s=-r+Ae):r<yi&&r>=-yi?(l.value=gi.AREA_1,s=-r):r<-yi&&r>=-(Ae+yi)?(l.value=gi.AREA_2,s=-r-Ae):(l.value=gi.AREA_3,s=r>0?-r+Nr:-r-Nr);else{var u,h,p,f,m,g,b;this.face===dr.RIGHT?r=Qv(r,+Ae):this.face===dr.BACK?r=Qv(r,+Nr):this.face===dr.LEFT&&(r=Qv(r,-Ae)),f=Math.sin(i),m=Math.cos(i),g=Math.sin(r),b=Math.cos(r),u=m*b,h=m*g,p=f,this.face===dr.FRONT?(n=Math.acos(u),s=dE(n,p,h,l)):this.face===dr.RIGHT?(n=Math.acos(h),s=dE(n,p,-u,l)):this.face===dr.BACK?(n=Math.acos(-u),s=dE(n,p,-h,l)):this.face===dr.LEFT?(n=Math.acos(-h),s=dE(n,p,u,l)):(n=s=0,l.value=gi.AREA_0)}return a=Math.atan(12/Nr*(s+Math.acos(Math.sin(s)*Math.cos(yi))-Ae)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),l.value===gi.AREA_1?a+=Ae:l.value===gi.AREA_2?a+=Nr:l.value===gi.AREA_3&&(a+=1.5*Nr),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function iHe(e){var t={lam:0,phi:0},i,r,s,n,o,a,l,u,h,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=gi.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=gi.AREA_1,i-=Ae):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=gi.AREA_2,i=i<0?i+Nr:i-Nr):(p.value=gi.AREA_3,i+=Ae),h=Nr/12*Math.tan(i),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(i),n=Math.tan(r),l=1-s*s*n*n*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===dr.TOP)u=Math.acos(l),t.phi=Ae-u,p.value===gi.AREA_0?t.lam=a+Ae:p.value===gi.AREA_1?t.lam=a<0?a+Nr:a-Nr:p.value===gi.AREA_2?t.lam=a-Ae:t.lam=a;else if(this.face===dr.BOTTOM)u=Math.acos(l),t.phi=u-Ae,p.value===gi.AREA_0?t.lam=-a+Ae:p.value===gi.AREA_1?t.lam=-a:p.value===gi.AREA_2?t.lam=-a-Ae:t.lam=a<0?-a-Nr:-a+Nr;else{var f,m,g;f=l,h=f*f,h>=1?g=0:g=Math.sqrt(1-h)*Math.sin(a),h+=g*g,h>=1?m=0:m=Math.sqrt(1-h),p.value===gi.AREA_1?(h=m,m=-g,g=h):p.value===gi.AREA_2?(m=-m,g=-g):p.value===gi.AREA_3&&(h=m,m=g,g=-h),this.face===dr.RIGHT?(h=f,f=-m,m=h):this.face===dr.BACK?(f=-f,m=-m):this.face===dr.LEFT&&(h=f,f=m,m=-h),t.phi=Math.acos(-g)-Ae,t.lam=Math.atan2(m,f),this.face===dr.RIGHT?t.lam=Qv(t.lam,-Ae):this.face===dr.BACK?t.lam=Qv(t.lam,-Nr):this.face===dr.LEFT&&(t.lam=Qv(t.lam,+Ae))}if(this.es!==0){var b,w,S;b=t.phi<0?1:0,w=Math.tan(t.phi),S=this.b/Math.sqrt(w*w+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),b&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function dE(e,t,i,r){var s;return e<ze?(r.value=gi.AREA_0,s=0):(s=Math.atan2(t,i),Math.abs(s)<=yi?r.value=gi.AREA_0:s>yi&&s<=Ae+yi?(r.value=gi.AREA_1,s-=Ae):s>Ae+yi||s<=-(Ae+yi)?(r.value=gi.AREA_2,s=s>=0?s-Nr:s+Nr):(r.value=gi.AREA_3,s+=Ae)),s}function Qv(e,t){var i=e+t;return i<-Nr?i+=mS:i>+Nr&&(i-=mS),i}var rHe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const sHe={init:eHe,forward:tHe,inverse:iHe,names:rHe};var YD=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],R_=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ehe=.8487,the=1.3523,ihe=ec/5,nHe=1/ihe,gv=18,fA=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},oHe=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function aHe(e,t,i,r){for(var s=t;r;--r){var n=e(s);if(s-=n,Math.abs(n)<i)break}return s}function lHe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function uHe(e){var t=He(e.x-this.long0),i=Math.abs(e.y),r=Math.floor(i*ihe);r<0?r=0:r>=gv&&(r=gv-1),i=ec*(i-nHe*r);var s={x:fA(YD[r],i)*t,y:fA(R_[r],i)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*ehe+this.x0,s.y=s.y*this.a*the+this.y0,s}function cHe(e){var t={x:(e.x-this.x0)/(this.a*ehe),y:Math.abs(e.y-this.y0)/(this.a*the)};if(t.y>=1)t.x/=YD[gv][0],t.y=e.y<0?-Ae:Ae;else{var i=Math.floor(t.y*gv);for(i<0?i=0:i>=gv&&(i=gv-1);;)if(R_[i][0]>t.y)--i;else if(R_[i+1][0]<=t.y)++i;else break;var r=R_[i],s=5*(t.y-r[0])/(R_[i+1][0]-r[0]);s=aHe(function(n){return(fA(r,n)-t.y)/oHe(r,n)},s,ze,100),t.x/=fA(YD[i],s),t.y=(5*i+s)*js,e.y<0&&(t.y=-t.y)}return t.x=He(t.x+this.long0),t}var hHe=["Robinson","robin"];const pHe={init:lHe,forward:uHe,inverse:cHe,names:hHe};function dHe(){this.name="geocent"}function fHe(e){var t=Bce(e,this.es,this.a);return t}function mHe(e){var t=zce(e,this.es,this.a,this.b);return t}var yHe=["Geocentric","geocentric","geocent","Geocent"];const gHe={init:dHe,forward:fHe,inverse:mHe,names:yHe};var vn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},lw={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function vHe(){if(Object.keys(lw).forEach(function(i){if(typeof this[i]>"u")this[i]=lw[i].def;else{if(lw[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);lw[i].num&&(this[i]=parseFloat(this[i]))}lw[i].degrees&&(this[i]=this[i]*js)}.bind(this)),Math.abs(Math.abs(this.lat0)-Ae)<ze?this.mode=this.lat0<0?vn.S_POLE:vn.N_POLE:Math.abs(this.lat0)<ze?this.mode=vn.EQUIT:(this.mode=vn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function bHe(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),r=Math.cos(e.x),s,n;switch(this.mode){case vn.OBLIQ:n=this.sinph0*t+this.cosph0*i*r;break;case vn.EQUIT:n=i*r;break;case vn.S_POLE:n=-t;break;case vn.N_POLE:n=t;break}switch(n=this.pn1/(this.p-n),s=n*i*Math.sin(e.x),this.mode){case vn.OBLIQ:n*=this.cosph0*t-this.sinph0*i*r;break;case vn.EQUIT:n*=t;break;case vn.N_POLE:n*=-(i*r);break;case vn.S_POLE:n*=i*r;break}var o,a;return o=n*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-n*this.sg)*this.cw*a,n=o*a,e.x=s*this.a,e.y=n*this.a,e}function wHe(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,r,s;s=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*s,r=this.pn1*e.y*this.cw*s,e.x=i*this.cg+r*this.sg,e.y=r*this.cg-i*this.sg;var n=To(e.x,e.y);if(Math.abs(n)<ze)t.x=0,t.y=e.y;else{var o,a;switch(a=1-n*n*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-a*a),this.mode){case vn.OBLIQ:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/n),e.y=(o-this.sinph0*Math.sin(t.y))*n,e.x*=a*this.cosph0;break;case vn.EQUIT:t.y=Math.asin(e.y*a/n),e.y=o*n,e.x*=a;break;case vn.N_POLE:t.y=Math.asin(o),e.y=-e.y;break;case vn.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var _He=["Tilted_Perspective","tpers"];const SHe={init:vHe,forward:bHe,inverse:wHe,names:_He};function xHe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function THe(e){var t=e.x,i=e.y,r,s,n,o;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var a=this.radius_p/To(this.radius_p*Math.cos(i),Math.sin(i));if(s=a*Math.cos(t)*Math.cos(i),n=a*Math.sin(t)*Math.cos(i),o=a*Math.sin(i),(this.radius_g-s)*s-n*n-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;r=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/To(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(n/r),e.y=this.radius_g_1*Math.atan(o/To(n,r)))}else this.shape==="sphere"&&(r=Math.cos(i),s=Math.cos(t)*r,n=Math.sin(t)*r,o=Math.sin(i),r=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/To(o,r)),e.y=this.radius_g_1*Math.atan(o/r)):(e.x=this.radius_g_1*Math.atan(n/r),e.y=this.radius_g_1*Math.atan(o/To(n,r))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function EHe(e){var t=-1,i=0,r=0,s,n,o,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*To(1,r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*To(1,i));var l=r/this.radius_p;if(s=i*i+l*l+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+r*r)):(i=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),s=i*i+r*r+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,i*=a,r*=a,e.x=Math.atan2(i,t),e.y=Math.atan(r*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var MHe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const IHe={init:xHe,forward:THe,inverse:EHe,names:MHe};var p2=1.340264,d2=-.081106,f2=893e-6,m2=.003796,mA=Math.sqrt(3)/2;function AHe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function $He(e){var t=He(e.x-this.long0),i=e.y,r=Math.asin(mA*Math.sin(i)),s=r*r,n=s*s*s;return e.x=t*Math.cos(r)/(mA*(p2+3*d2*s+n*(7*f2+9*m2*s))),e.y=r*(p2+d2*s+n*(f2+m2*s)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function CHe(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,i=12,r=e.y,s,n,o,a,l,u;for(u=0;u<i&&(s=r*r,n=s*s*s,o=r*(p2+d2*s+n*(f2+m2*s))-e.y,a=p2+3*d2*s+n*(7*f2+9*m2*s),r-=l=o/a,!(Math.abs(l)<t));++u);return s=r*r,n=s*s*s,e.x=mA*e.x*(p2+3*d2*s+n*(7*f2+9*m2*s))/Math.cos(r),e.y=Math.asin(Math.sin(r)/mA),e.x=He(e.x+this.long0),e}var RHe=["eqearth","Equal Earth","Equal_Earth"];const OHe={init:AHe,forward:$He,inverse:CHe,names:RHe};var vS=1e-10;function PHe(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<vS)throw new Error;this.es?(this.en=b7(this.es),this.m1=_b(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=NHe,this.forward=LHe):(Math.abs(this.phi1)+vS>=Ae?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=DHe,this.forward=kHe)}function LHe(e){var t=He(e.x-(this.long0||0)),i=e.y,r,s,n;return r=this.am1+this.m1-_b(i,s=Math.sin(i),n=Math.cos(i),this.en),s=n*t/(r*Math.sqrt(1-this.es*s*s)),e.x=r*Math.sin(s),e.y=this.am1-r*Math.cos(s),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function NHe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,r,s;if(i=To(e.x,e.y=this.am1-e.y),s=w7(this.am1+this.m1-i,this.es,this.en),(t=Math.abs(s))<Ae)t=Math.sin(s),r=i*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(s);else if(Math.abs(t-Ae)<=vS)r=0;else throw new Error;return e.x=He(r+(this.long0||0)),e.y=Af(s),e}function kHe(e){var t=He(e.x-(this.long0||0)),i=e.y,r,s;return s=this.cphi1+this.phi1-i,Math.abs(s)>vS?(e.x=s*Math.sin(r=t*Math.cos(i)/s),e.y=this.cphi1-s*Math.cos(r)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function DHe(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,i,r=To(e.x,e.y=this.cphi1-e.y);if(i=this.cphi1+this.phi1-r,Math.abs(i)>Ae)throw new Error;return Math.abs(Math.abs(i)-Ae)<=vS?t=0:t=r*Math.atan2(e.x,e.y)/Math.cos(i),e.x=He(t+(this.long0||0)),e.y=Af(i),e}var FHe=["bonne","Bonne (Werner lat_1=90)"];const jHe={init:PHe,names:FHe};function UHe(e){e.Proj.projections.add(AI),e.Proj.projections.add($I),e.Proj.projections.add(LBe),e.Proj.projections.add(zBe),e.Proj.projections.add(YBe),e.Proj.projections.add(tze),e.Proj.projections.add(aze),e.Proj.projections.add(pze),e.Proj.projections.add(gze),e.Proj.projections.add(Sze),e.Proj.projections.add(jze),e.Proj.projections.add(qze),e.Proj.projections.add(Yze),e.Proj.projections.add(iqe),e.Proj.projections.add(aqe),e.Proj.projections.add(pqe),e.Proj.projections.add(gqe),e.Proj.projections.add(Sqe),e.Proj.projections.add(Aqe),e.Proj.projections.add(Pqe),e.Proj.projections.add(Fqe),e.Proj.projections.add(Bqe),e.Proj.projections.add(Jqe),e.Proj.projections.add(Qqe),e.Proj.projections.add(sHe),e.Proj.projections.add(pHe),e.Proj.projections.add(gHe),e.Proj.projections.add(SHe),e.Proj.projections.add(IHe),e.Proj.projections.add(OHe),e.Proj.projections.add(jHe)}Ci.defaultDatum="WGS84";Ci.Proj=hc;Ci.WGS84=new Ci.Proj("WGS84");Ci.Point=A1;Ci.toPoint=qce;Ci.defs=zn;Ci.nadgrid=kGe;Ci.transform=pA;Ci.mgrs=XGe;Ci.version="__VERSION__";UHe(Ci);const VHe="EPSG:4326";class GHe{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,Ci.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Ci.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Ci.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),Ci.defs("EPSG:102100",Ci.defs("EPSG:3857")),Ci.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Ci.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const i=t<10?`0${t}`:t;Ci.defs(`EPSG:326${i}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}addProjection(t,i){t=typeof t=="number"?`EPSG:${t}`:t,Ci.defs(t,i)}defaultEpsgLookup(t){const i=/urn:ogc:def:crs:EPSG::(\d+)/,r=/EPSG:(\d+)/,s=String(t).match(i)||String(t).match(r)||[];if(s.length<2)throw new Error("Invalid code provided.");return new Promise((n,o)=>{const a=`https://epsg.io/${s[1]}.proj4`;Ne(a,{responseType:"text"}).then(h=>{h.data?n(h.data):o()},h=>{o(h)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let i,r="";try{i=this.normalizeProj(t)}catch{return!1}if(!i.startsWith("EPSG:"))return!0;typeof t=="object"&&t.latestWkid&&(r=this.normalizeProj(t.latestWkid));const s=(l,u)=>{l!==u&&Ci.defs(u,Ci.defs(l))};if(Ci.defs(i))return!0;if(r&&Ci.defs(r))return s(r,i),!0;const n=async l=>{try{const u=await this.epsgLookup(l);return u===null||u===""?!1:(Ci.defs(l,u),!0)}catch{return!1}};return await(r?n(r):Promise.resolve(!1))?(s(r,i),!0):n(i)}async checkProjBomber(t){if(t.length>0){const i=t.pop();if(await this.checkProj(i))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",i),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,i,r){let s,n;if(i?s=this.normalizeProj(i):s=Ot.parseGeoJsonCrs(t.crs),r?n=this.normalizeProj(r):n=VHe,n===s)return t;await this.checkProjBomber([s,n]);const o=Ci(s,n).forward;return YVe.Tools.applyConverter(t,o)}async projectGeometry(t,i){if(i.type===Vt.EXTENT)return this.projectExtent(t,i);await this.checkProjBomber([t,i.sr]);const r=i.toGeoJSON(),s=await this.projectGeoJson(r,this.normalizeProj(i.sr),this.normalizeProj(t)),n=s1.geom.geomGeoJsonToRamp(s,i.id);return n.sr=Ot.parseSR(t),n}async projectExtent(t,i){const r=(b,w,S)=>{if(S===0)return[b,w];const T=[(b[0]+w[0])/2,(b[1]+w[1])/2];if(S===1)return[b,T,w];if(S>1){const x=r(b,T,S-1),_=r(T,w,S-1);return x.concat(_.slice(1))}return[[]]},s=i.toPolygonArray().pop()||[];let n=[];[0,1,2,3].map(b=>r(s[b],s[b+1],3).slice(1)).forEach(b=>n=n.concat(b));const o=new wn("warpy",[n],i.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(b=>b[0]),h=l.map(b=>b[1]),p=Math.min.apply(null,u),f=Math.max.apply(null,u),m=Math.min.apply(null,h),g=Math.max.apply(null,h);return nr.fromParams(i.id+"_projected",p,m,f,g,a.sr)}}class BHe{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new GHe,this.geom=new zVe,this.sharedUtils=new JVe}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const i=r=>r.map(s=>({level:s[0],resolution:s[1],scale:s[2]}));if(t===this.DEFAULT_LAMBERT)return i([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return i([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class Kr{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function zHe(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function qHe(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(i=>e[i]!==void 0)}function rhe(e){return typeof e=="object"&&Object.keys(e).every(t=>typeof t=="string")&&Object.values(e).every(t=>t instanceof HTMLElement)}function HHe(e){return typeof e=="object"&&e.default!==void 0}var fE={exports:{}},cZ;function WHe(){if(cZ)return fE.exports;cZ=1;function e(){}return e.prototype={on:function(t,i,r){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:i,ctx:r}),this},once:function(t,i,r){var s=this;function n(){s.off(t,n),i.apply(r,arguments)}return n._=i,this.on(t,n,r)},emit:function(t){var i=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=r.length;for(s;s<n;s++)r[s].fn.apply(r[s].ctx,i);return this},off:function(t,i){var r=this.e||(this.e={}),s=r[t],n=[];if(s&&i)for(var o=0,a=s.length;o<a;o++)s[o].fn!==i&&s[o].fn._!==i&&n.push(s[o]);return n.length?r[t]=n:delete r[t],this}},fE.exports=e,fE.exports.TinyEmitter=e,fE.exports}var JHe=WHe();/**
* @vue/shared v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Bo(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const ei={},Oy=[],Ka=()=>{},she=()=>!1,Sb=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),kC=e=>e.startsWith("onUpdate:"),Li=Object.assign,DC=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ZHe=Object.prototype.hasOwnProperty,li=(e,t)=>ZHe.call(e,t),st=Array.isArray,Py=e=>$g(e)==="[object Map]",$f=e=>$g(e)==="[object Set]",KD=e=>$g(e)==="[object Date]",nhe=e=>$g(e)==="[object RegExp]",Mt=e=>typeof e=="function",_i=e=>typeof e=="string",cu=e=>typeof e=="symbol",Si=e=>e!==null&&typeof e=="object",FC=e=>(Si(e)||Mt(e))&&Mt(e.then)&&Mt(e.catch),T7=Object.prototype.toString,$g=e=>T7.call(e),ohe=e=>$g(e).slice(8,-1),Nx=e=>$g(e)==="[object Object]",jC=e=>_i(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ly=Bo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),YHe=Bo("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),UC=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},KHe=/-(\w)/g,zs=UC(e=>e.replace(KHe,(t,i)=>i?i.toUpperCase():"")),XHe=/\B([A-Z])/g,En=UC(e=>e.replace(XHe,"-$1").toLowerCase()),xb=UC(e=>e.charAt(0).toUpperCase()+e.slice(1)),e1=UC(e=>e?`on${xb(e)}`:""),_n=(e,t)=>!Object.is(e,t),Ny=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},E7=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},bS=e=>{const t=parseFloat(e);return isNaN(t)?e:t},wS=e=>{const t=_i(e)?Number(e):NaN;return isNaN(t)?e:t};let hZ;const M7=()=>hZ||(hZ=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),QHe=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function eWe(e){return QHe.test(e)?`__props.${e}`:`__props[${JSON.stringify(e)}]`}function tWe(e,t){return e+JSON.stringify(t,(i,r)=>typeof r=="function"?r.toString():r)}const iWe={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},rWe={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},sWe={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},nWe={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},oWe={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},aWe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",I7=Bo(aWe),lWe=I7,pZ=2;function uWe(e,t=0,i=e.length){if(t=Math.max(0,Math.min(t,e.length)),i=Math.max(0,Math.min(i,e.length)),t>i)return"";let r=e.split(/(\r?\n)/);const s=r.filter((a,l)=>l%2===1);r=r.filter((a,l)=>l%2===0);let n=0;const o=[];for(let a=0;a<r.length;a++)if(n+=r[a].length+(s[a]&&s[a].length||0),n>=t){for(let l=a-pZ;l<=a+pZ||i>n;l++){if(l<0||l>=r.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${r[l]}`);const h=r[l].length,p=s[l]&&s[l].length||0;if(l===a){const f=t-(n-(h+p)),m=Math.max(1,i>n?h-f:i-t);o.push("   |  "+" ".repeat(f)+"^".repeat(m))}else if(l>a){if(i>n){const f=Math.max(Math.min(i-n,h),1);o.push("   |  "+"^".repeat(f))}n+=h+p}}break}return o.join(`
`)}function Cf(e){if(st(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=_i(r)?ahe(r):Cf(r);if(s)for(const n in s)t[n]=s[n]}return t}else if(_i(e)||Si(e))return e}const cWe=/;(?![^(]*\))/g,hWe=/:([^]+)/,pWe=/\/\*[^]*?\*\//g;function ahe(e){const t={};return e.replace(pWe,"").split(cWe).forEach(i=>{if(i){const r=i.split(hWe);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function dWe(e){let t="";if(!e||_i(e))return t;for(const i in e){const r=e[i];if(_i(r)||typeof r=="number"){const s=i.startsWith("--")?i:En(i);t+=`${s}:${r};`}}return t}function Cr(e){let t="";if(_i(e))t=e;else if(st(e))for(let i=0;i<e.length;i++){const r=Cr(e[i]);r&&(t+=r+" ")}else if(Si(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}function lhe(e){if(!e)return null;let{class:t,style:i}=e;return t&&!_i(t)&&(e.class=Cr(t)),i&&(e.style=Cf(i)),e}const fWe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",mWe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",yWe="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",gWe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",vWe=Bo(fWe),bWe=Bo(mWe),wWe=Bo(yWe),_We=Bo(gWe),uhe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",che=Bo(uhe),SWe=Bo(uhe+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function A7(e){return!!e||e===""}const xWe=/[>/="'\u0009\u000a\u000c\u0020]/,NR={};function TWe(e){if(NR.hasOwnProperty(e))return NR[e];const t=xWe.test(e);return t&&console.error(`unsafe attribute name: ${e}`),NR[e]=!t}const EWe={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},MWe=Bo("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),IWe=Bo("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),AWe=Bo("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function $We(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}const CWe=/["'&<>]/;function RWe(e){const t=""+e,i=CWe.exec(t);if(!i)return t;let r="",s,n,o=0;for(n=i.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}o!==n&&(r+=t.slice(o,n)),o=n+1,r+=s}return o!==n?r+t.slice(o,n):r}const OWe=/^-?>|<!--|-->|--!>|<!-$/g;function PWe(e){return e.replace(OWe,"")}const hhe=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function LWe(e,t){return e.replace(hhe,i=>t?i==='"'?'\\\\\\"':`\\\\${i}`:`\\${i}`)}function NWe(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=sp(e[r],t[r]);return i}function sp(e,t){if(e===t)return!0;let i=KD(e),r=KD(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=cu(e),r=cu(t),i||r)return e===t;if(i=st(e),r=st(t),i||r)return i&&r?NWe(e,t):!1;if(i=Si(e),r=Si(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,n=Object.keys(t).length;if(s!==n)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!sp(e[o],t[o]))return!1}}return String(e)===String(t)}function kx(e,t){return e.findIndex(i=>sp(i,t))}const phe=e=>!!(e&&e.__v_isRef===!0),Ui=e=>_i(e)?e:e==null?"":st(e)||Si(e)&&(e.toString===T7||!Mt(e.toString))?phe(e)?Ui(e.value):JSON.stringify(e,dhe,2):String(e),dhe=(e,t)=>phe(t)?dhe(e,t.value):Py(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s],n)=>(i[kR(r,n)+" =>"]=s,i),{})}:$f(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>kR(i))}:cu(t)?kR(t):Si(t)&&!st(t)&&!Nx(t)?String(t):t,kR=(e,t="")=>{var i;return cu(e)?`Symbol(${(i=e.description)!=null?i:t})`:e},Gvt=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:Oy,EMPTY_OBJ:ei,NO:she,NOOP:Ka,PatchFlagNames:rWe,PatchFlags:iWe,ShapeFlags:sWe,SlotFlags:nWe,camelize:zs,capitalize:xb,cssVarNameEscapeSymbolsRE:hhe,def:E7,escapeHtml:RWe,escapeHtmlComment:PWe,extend:Li,genCacheKey:tWe,genPropsAccessExp:eWe,generateCodeFrame:uWe,getEscapedCssVarName:LWe,getGlobalThis:M7,hasChanged:_n,hasOwn:li,hyphenate:En,includeBooleanAttr:A7,invokeArrayFns:Ny,isArray:st,isBooleanAttr:SWe,isBuiltInDirective:YHe,isDate:KD,isFunction:Mt,isGloballyAllowed:I7,isGloballyWhitelisted:lWe,isHTMLTag:vWe,isIntegerKey:jC,isKnownHtmlAttr:MWe,isKnownMathMLAttr:AWe,isKnownSvgAttr:IWe,isMap:Py,isMathMLTag:wWe,isModelListener:kC,isObject:Si,isOn:Sb,isPlainObject:Nx,isPromise:FC,isRegExp:nhe,isRenderableAttrValue:$We,isReservedProp:Ly,isSSRSafeAttrName:TWe,isSVGTag:bWe,isSet:$f,isSpecialBooleanAttr:che,isString:_i,isSymbol:cu,isVoidTag:_We,looseEqual:sp,looseIndexOf:kx,looseToNumber:bS,makeMap:Bo,normalizeClass:Cr,normalizeProps:lhe,normalizeStyle:Cf,objectToString:T7,parseStringStyle:ahe,propsToAttrMap:EWe,remove:DC,slotFlagsText:oWe,stringifyStyle:dWe,toDisplayString:Ui,toHandlerKey:e1,toNumber:wS,toRawType:ohe,toTypeString:$g},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let qn;class $7{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=qn,!t&&qn&&(this.index=(qn.scopes||(qn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=qn;try{return qn=this,t()}finally{qn=i}}}on(){qn=this}off(){qn=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function VC(e){return new $7(e)}function C7(){return qn}function fhe(e,t=!1){qn&&qn.cleanups.push(e)}let Di;const DR=new WeakSet;class _S{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,qn&&qn.active&&qn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,DR.has(this)&&(DR.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||yhe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,dZ(this),ghe(this);const t=Di,i=ru;Di=this,ru=!0;try{return this.fn()}finally{vhe(this),Di=t,ru=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)P7(t);this.deps=this.depsTail=void 0,dZ(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?DR.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){XD(this)&&this.run()}get dirty(){return XD(this)}}let mhe=0,vv;function yhe(e){e.flags|=8,e.next=vv,vv=e}function R7(){mhe++}function O7(){if(--mhe>0)return;let e;for(;vv;){let t=vv,i;for(;t;)t.flags&=-9,t=t.next;for(t=vv,vv=void 0;t;){if(t.flags&1)try{t.trigger()}catch(r){e||(e=r)}i=t.next,t.next=void 0,t=i}}if(e)throw e}function ghe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function vhe(e){let t,i=e.depsTail,r=i;for(;r;){const s=r.prevDep;r.version===-1?(r===i&&(i=s),P7(r),kWe(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=i}function XD(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(bhe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function bhe(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===SS))return;e.globalVersion=SS;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!XD(e)){e.flags&=-3;return}const i=Di,r=ru;Di=e,ru=!0;try{ghe(e);const s=e.fn(e._value);(t.version===0||_n(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Di=i,ru=r,vhe(e),e.flags&=-3}}function P7(e,t=!1){const{dep:i,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r),!i.subs&&i.computed){i.computed.flags&=-5;for(let n=i.computed.deps;n;n=n.nextDep)P7(n,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function kWe(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}function DWe(e,t){e.effect instanceof _S&&(e=e.effect.fn);const i=new _S(e);t&&Li(i,t);try{i.run()}catch(s){throw i.stop(),s}const r=i.run.bind(i);return r.effect=i,r}function FWe(e){e.effect.stop()}let ru=!0;const whe=[];function Rf(){whe.push(ru),ru=!1}function Of(){const e=whe.pop();ru=e===void 0?!0:e}function dZ(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Di;Di=void 0;try{t()}finally{Di=i}}}let SS=0;class jWe{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class GC{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Di||!ru||Di===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Di)i=this.activeLink=new jWe(Di,this),Di.deps?(i.prevDep=Di.depsTail,Di.depsTail.nextDep=i,Di.depsTail=i):Di.deps=Di.depsTail=i,_he(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=Di.depsTail,i.nextDep=void 0,Di.depsTail.nextDep=i,Di.depsTail=i,Di.deps===i&&(Di.deps=r)}return i}trigger(t){this.version++,SS++,this.notify(t)}notify(t){R7();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{O7()}}}function _he(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)_he(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const yA=new WeakMap,ky=Symbol(""),QD=Symbol(""),xS=Symbol("");function On(e,t,i){if(ru&&Di){let r=yA.get(e);r||yA.set(e,r=new Map);let s=r.get(i);s||(r.set(i,s=new GC),s.target=e,s.map=r,s.key=i),s.track()}}function Zh(e,t,i,r,s,n){const o=yA.get(e);if(!o){SS++;return}const a=l=>{l&&l.trigger()};if(R7(),t==="clear")o.forEach(a);else{const l=st(e),u=l&&jC(i);if(l&&i==="length"){const h=Number(r);o.forEach((p,f)=>{(f==="length"||f===xS||!cu(f)&&f>=h)&&a(p)})}else switch(i!==void 0&&a(o.get(i)),u&&a(o.get(xS)),t){case"add":l?u&&a(o.get("length")):(a(o.get(ky)),Py(e)&&a(o.get(QD)));break;case"delete":l||(a(o.get(ky)),Py(e)&&a(o.get(QD)));break;case"set":Py(e)&&a(o.get(ky));break}}O7()}function UWe(e,t){const i=yA.get(e);return i&&i.get(t)}function e0(e){const t=kt(e);return t===e?t:(On(t,"iterate",xS),fa(e)?t:t.map(Sn))}function BC(e){return On(e=kt(e),"iterate",xS),e}const VWe={__proto__:null,[Symbol.iterator](){return FR(this,Symbol.iterator,Sn)},concat(...e){return e0(this).concat(...e.map(t=>st(t)?e0(t):t))},entries(){return FR(this,"entries",e=>(e[1]=Sn(e[1]),e))},every(e,t){return Uc(this,"every",e,t,void 0,arguments)},filter(e,t){return Uc(this,"filter",e,t,i=>i.map(Sn),arguments)},find(e,t){return Uc(this,"find",e,t,Sn,arguments)},findIndex(e,t){return Uc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Uc(this,"findLast",e,t,Sn,arguments)},findLastIndex(e,t){return Uc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Uc(this,"forEach",e,t,void 0,arguments)},includes(...e){return jR(this,"includes",e)},indexOf(...e){return jR(this,"indexOf",e)},join(e){return e0(this).join(e)},lastIndexOf(...e){return jR(this,"lastIndexOf",e)},map(e,t){return Uc(this,"map",e,t,void 0,arguments)},pop(){return uw(this,"pop")},push(...e){return uw(this,"push",e)},reduce(e,...t){return fZ(this,"reduce",e,t)},reduceRight(e,...t){return fZ(this,"reduceRight",e,t)},shift(){return uw(this,"shift")},some(e,t){return Uc(this,"some",e,t,void 0,arguments)},splice(...e){return uw(this,"splice",e)},toReversed(){return e0(this).toReversed()},toSorted(e){return e0(this).toSorted(e)},toSpliced(...e){return e0(this).toSpliced(...e)},unshift(...e){return uw(this,"unshift",e)},values(){return FR(this,"values",Sn)}};function FR(e,t,i){const r=BC(e),s=r[t]();return r!==e&&!fa(e)&&(s._next=s.next,s.next=()=>{const n=s._next();return n.value&&(n.value=i(n.value)),n}),s}const GWe=Array.prototype;function Uc(e,t,i,r,s,n){const o=BC(e),a=o!==e&&!fa(e),l=o[t];if(l!==GWe[t]){const p=l.apply(e,n);return a?Sn(p):p}let u=i;o!==e&&(a?u=function(p,f){return i.call(this,Sn(p),f,e)}:i.length>2&&(u=function(p,f){return i.call(this,p,f,e)}));const h=l.call(o,u,r);return a&&s?s(h):h}function fZ(e,t,i,r){const s=BC(e);let n=i;return s!==e&&(fa(e)?i.length>3&&(n=function(o,a,l){return i.call(this,o,a,l,e)}):n=function(o,a,l){return i.call(this,o,Sn(a),l,e)}),s[t](n,...r)}function jR(e,t,i){const r=kt(e);On(r,"iterate",xS);const s=r[t](...i);return(s===-1||s===!1)&&WC(i[0])?(i[0]=kt(i[0]),r[t](...i)):s}function uw(e,t,i=[]){Rf(),R7();const r=kt(e)[t].apply(e,i);return O7(),Of(),r}const BWe=Bo("__proto__,__v_isRef,__isVue"),She=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(cu));function zWe(e){cu(e)||(e=String(e));const t=kt(this);return On(t,"has",e),t.hasOwnProperty(e)}class xhe{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){const s=this._isReadonly,n=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return n;if(i==="__v_raw")return r===(s?n?$he:Ahe:n?Ihe:Mhe).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=st(t);if(!s){let l;if(o&&(l=VWe[i]))return l;if(i==="hasOwnProperty")return zWe}const a=Reflect.get(t,i,ui(t)?t:r);return(cu(i)?She.has(i):BWe(i))||(s||On(t,"get",i),n)?a:ui(a)?o&&jC(i)?a:a.value:Si(a)?s?N7(a):Js(a):a}}class The extends xhe{constructor(t=!1){super(!1,t)}set(t,i,r,s){let n=t[i];if(!this._isShallow){const l=uf(n);if(!fa(r)&&!uf(r)&&(n=kt(n),r=kt(r)),!st(t)&&ui(n)&&!ui(r))return l?!1:(n.value=r,!0)}const o=st(t)&&jC(i)?Number(i)<t.length:li(t,i),a=Reflect.set(t,i,r,ui(t)?t:s);return t===kt(s)&&(o?_n(r,n)&&Zh(t,"set",i,r):Zh(t,"add",i,r)),a}deleteProperty(t,i){const r=li(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&r&&Zh(t,"delete",i,void 0),s}has(t,i){const r=Reflect.has(t,i);return(!cu(i)||!She.has(i))&&On(t,"has",i),r}ownKeys(t){return On(t,"iterate",st(t)?"length":ky),Reflect.ownKeys(t)}}class Ehe extends xhe{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const qWe=new The,HWe=new Ehe,WWe=new The(!0),JWe=new Ehe(!0),L7=e=>e,zC=e=>Reflect.getPrototypeOf(e);function mE(e,t,i=!1,r=!1){e=e.__v_raw;const s=kt(e),n=kt(t);i||(_n(t,n)&&On(s,"get",t),On(s,"get",n));const{has:o}=zC(s),a=r?L7:i?k7:Sn;if(o.call(s,t))return a(e.get(t));if(o.call(s,n))return a(e.get(n));e!==s&&e.get(t)}function yE(e,t=!1){const i=this.__v_raw,r=kt(i),s=kt(e);return t||(_n(e,s)&&On(r,"has",e),On(r,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function gE(e,t=!1){return e=e.__v_raw,!t&&On(kt(e),"iterate",ky),Reflect.get(e,"size",e)}function mZ(e,t=!1){!t&&!fa(e)&&!uf(e)&&(e=kt(e));const i=kt(this);return zC(i).has.call(i,e)||(i.add(e),Zh(i,"add",e,e)),this}function yZ(e,t,i=!1){!i&&!fa(t)&&!uf(t)&&(t=kt(t));const r=kt(this),{has:s,get:n}=zC(r);let o=s.call(r,e);o||(e=kt(e),o=s.call(r,e));const a=n.call(r,e);return r.set(e,t),o?_n(t,a)&&Zh(r,"set",e,t):Zh(r,"add",e,t),this}function gZ(e){const t=kt(this),{has:i,get:r}=zC(t);let s=i.call(t,e);s||(e=kt(e),s=i.call(t,e)),r&&r.call(t,e);const n=t.delete(e);return s&&Zh(t,"delete",e,void 0),n}function vZ(){const e=kt(this),t=e.size!==0,i=e.clear();return t&&Zh(e,"clear",void 0,void 0),i}function vE(e,t){return function(r,s){const n=this,o=n.__v_raw,a=kt(o),l=t?L7:e?k7:Sn;return!e&&On(a,"iterate",ky),o.forEach((u,h)=>r.call(s,l(u),l(h),n))}}function bE(e,t,i){return function(...r){const s=this.__v_raw,n=kt(s),o=Py(n),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=s[e](...r),h=i?L7:t?k7:Sn;return!t&&On(n,"iterate",l?QD:ky),{next(){const{value:p,done:f}=u.next();return f?{value:p,done:f}:{value:a?[h(p[0]),h(p[1])]:h(p),done:f}},[Symbol.iterator](){return this}}}}function $p(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ZWe(){const e={get(n){return mE(this,n)},get size(){return gE(this)},has:yE,add:mZ,set:yZ,delete:gZ,clear:vZ,forEach:vE(!1,!1)},t={get(n){return mE(this,n,!1,!0)},get size(){return gE(this)},has:yE,add(n){return mZ.call(this,n,!0)},set(n,o){return yZ.call(this,n,o,!0)},delete:gZ,clear:vZ,forEach:vE(!1,!0)},i={get(n){return mE(this,n,!0)},get size(){return gE(this,!0)},has(n){return yE.call(this,n,!0)},add:$p("add"),set:$p("set"),delete:$p("delete"),clear:$p("clear"),forEach:vE(!0,!1)},r={get(n){return mE(this,n,!0,!0)},get size(){return gE(this,!0)},has(n){return yE.call(this,n,!0)},add:$p("add"),set:$p("set"),delete:$p("delete"),clear:$p("clear"),forEach:vE(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=bE(n,!1,!1),i[n]=bE(n,!0,!1),t[n]=bE(n,!1,!0),r[n]=bE(n,!0,!0)}),[e,i,t,r]}const[YWe,KWe,XWe,QWe]=ZWe();function qC(e,t){const i=t?e?QWe:XWe:e?KWe:YWe;return(r,s,n)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(li(i,s)&&s in r?i:r,s,n)}const eJe={get:qC(!1,!1)},tJe={get:qC(!1,!0)},iJe={get:qC(!0,!1)},rJe={get:qC(!0,!0)},Mhe=new WeakMap,Ihe=new WeakMap,Ahe=new WeakMap,$he=new WeakMap;function sJe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nJe(e){return e.__v_skip||!Object.isExtensible(e)?0:sJe(ohe(e))}function Js(e){return uf(e)?e:HC(e,!1,qWe,eJe,Mhe)}function Che(e){return HC(e,!1,WWe,tJe,Ihe)}function N7(e){return HC(e,!0,HWe,iJe,Ahe)}function oJe(e){return HC(e,!0,JWe,rJe,$he)}function HC(e,t,i,r,s){if(!Si(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=s.get(e);if(n)return n;const o=nJe(e);if(o===0)return e;const a=new Proxy(e,o===2?r:i);return s.set(e,a),a}function Xa(e){return uf(e)?Xa(e.__v_raw):!!(e&&e.__v_isReactive)}function uf(e){return!!(e&&e.__v_isReadonly)}function fa(e){return!!(e&&e.__v_isShallow)}function WC(e){return e?!!e.__v_raw:!1}function kt(e){const t=e&&e.__v_raw;return t?kt(t):e}function Jr(e){return!li(e,"__v_skip")&&Object.isExtensible(e)&&E7(e,"__v_skip",!0),e}const Sn=e=>Si(e)?Js(e):e,k7=e=>Si(e)?N7(e):e;function ui(e){return e?e.__v_isRef===!0:!1}function _e(e){return Rhe(e,!1)}function Dx(e){return Rhe(e,!0)}function Rhe(e,t){return ui(e)?e:new aJe(e,t)}class aJe{constructor(t,i){this.dep=new GC,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:kt(t),this._value=i?t:Sn(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||fa(t)||uf(t);t=r?t:kt(t),_n(t,i)&&(this._rawValue=t,this._value=r?t:Sn(t),this.dep.trigger())}}function lJe(e){e.dep&&e.dep.trigger()}function lt(e){return ui(e)?e.value:e}function uJe(e){return Mt(e)?e():lt(e)}const cJe={get:(e,t,i)=>t==="__v_raw"?e:lt(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return ui(s)&&!ui(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function D7(e){return Xa(e)?e:new Proxy(e,cJe)}class hJe{constructor(t){this.__v_isRef=!0,this._value=void 0;const i=this.dep=new GC,{get:r,set:s}=t(i.track.bind(i),i.trigger.bind(i));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Ohe(e){return new hJe(e)}function Phe(e){const t=st(e)?new Array(e.length):{};for(const i in e)t[i]=Lhe(e,i);return t}class pJe{constructor(t,i,r){this._object=t,this._key=i,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return UWe(kt(this._object),this._key)}}class dJe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function fJe(e,t,i){return ui(e)?e:Mt(e)?new dJe(e):Si(e)&&arguments.length>1?Lhe(e,t,i):_e(e)}function Lhe(e,t,i){const r=e[t];return ui(r)?r:new pJe(e,t,i)}class mJe{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new GC(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=SS-1,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Di!==this)return yhe(this),!0}get value(){const t=this.dep.track();return bhe(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function yJe(e,t,i=!1){let r,s;return Mt(e)?r=e:(r=e.get,s=e.set),new mJe(r,s,i)}const gJe={GET:"get",HAS:"has",ITERATE:"iterate"},vJe={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},wE={},gA=new WeakMap;let wd;function bJe(){return wd}function Nhe(e,t=!1,i=wd){if(i){let r=gA.get(i);r||gA.set(i,r=[]),r.push(e)}}function wJe(e,t,i=ei){const{immediate:r,deep:s,once:n,scheduler:o,augmentJob:a,call:l}=i,u=_=>s?_:fa(_)||s===!1||s===0?jh(_,1):jh(_);let h,p,f,m,g=!1,b=!1;if(ui(e)?(p=()=>e.value,g=fa(e)):Xa(e)?(p=()=>u(e),g=!0):st(e)?(b=!0,g=e.some(_=>Xa(_)||fa(_)),p=()=>e.map(_=>{if(ui(_))return _.value;if(Xa(_))return u(_);if(Mt(_))return l?l(_,2):_()})):Mt(e)?t?p=l?()=>l(e,2):e:p=()=>{if(f){Rf();try{f()}finally{Of()}}const _=wd;wd=h;try{return l?l(e,3,[m]):e(m)}finally{wd=_}}:p=Ka,t&&s){const _=p,M=s===!0?1/0:s;p=()=>jh(_(),M)}const w=C7(),S=()=>{h.stop(),w&&DC(w.effects,h)};if(n&&t){const _=t;t=(...M)=>{_(...M),S()}}let T=b?new Array(e.length).fill(wE):wE;const x=_=>{if(!(!(h.flags&1)||!h.dirty&&!_))if(t){const M=h.run();if(s||g||(b?M.some((I,A)=>_n(I,T[A])):_n(M,T))){f&&f();const I=wd;wd=h;try{const A=[M,T===wE?void 0:b&&T[0]===wE?[]:T,m];l?l(t,3,A):t(...A),T=M}finally{wd=I}}}else h.run()};return a&&a(x),h=new _S(p),h.scheduler=o?()=>o(x,!1):x,m=_=>Nhe(_,!1,h),f=h.onStop=()=>{const _=gA.get(h);if(_){if(l)l(_,4);else for(const M of _)M();gA.delete(h)}},t?r?x(!0):T=h.run():o?o(x.bind(null,!0),!0):h.run(),S.pause=h.pause.bind(h),S.resume=h.resume.bind(h),S.stop=S,S}function jh(e,t=1/0,i){if(t<=0||!Si(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,ui(e))jh(e.value,t,i);else if(st(e))for(let r=0;r<e.length;r++)jh(e[r],t,i);else if($f(e)||Py(e))e.forEach(r=>{jh(r,t,i)});else if(Nx(e)){for(const r in e)jh(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&jh(e[r],t,i)}return e}/**
* @vue/runtime-core v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const khe=[];function _Je(e){khe.push(e)}function SJe(){khe.pop()}function xJe(e,t){}const TJe={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},EJe={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Tb(e,t,i,r){try{return r?e(...r):e()}catch(s){Cg(s,t,i)}}function ol(e,t,i,r){if(Mt(e)){const s=Tb(e,t,i,r);return s&&FC(s)&&s.catch(n=>{Cg(n,t,i)}),s}if(st(e)){const s=[];for(let n=0;n<e.length;n++)s.push(ol(e[n],t,i,r));return s}}function Cg(e,t,i,r=!0){const s=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ei;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](e,l,u)===!1)return}a=a.parent}if(n){Rf(),Tb(n,null,10,[e,l,u]),Of();return}}MJe(e,i,s,r,o)}function MJe(e,t,i,r=!0,s=!1){if(s)throw e;console.error(e)}let TS=!1,e6=!1;const Zn=[];let zu=0;const t1=[];let _d=null,Q0=0;const Dhe=Promise.resolve();let F7=null;function Oc(e){const t=F7||Dhe;return e?t.then(this?e.bind(this):e):t}function IJe(e){let t=TS?zu+1:0,i=Zn.length;for(;t<i;){const r=t+i>>>1,s=Zn[r],n=ES(s);n<e||n===e&&s.flags&2?t=r+1:i=r}return t}function j7(e){if(!(e.flags&1)){const t=ES(e),i=Zn[Zn.length-1];!i||!(e.flags&2)&&t>=ES(i)?Zn.push(e):Zn.splice(IJe(t),0,e),e.flags|=1,Fhe()}}function Fhe(){!TS&&!e6&&(e6=!0,F7=Dhe.then(jhe))}function vA(e){st(e)?t1.push(...e):_d&&e.id===-1?_d.splice(Q0+1,0,e):e.flags&1||(t1.push(e),e.flags|=1),Fhe()}function bZ(e,t,i=TS?zu+1:0){for(;i<Zn.length;i++){const r=Zn[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Zn.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function bA(e){if(t1.length){const t=[...new Set(t1)].sort((i,r)=>ES(i)-ES(r));if(t1.length=0,_d){_d.push(...t);return}for(_d=t,Q0=0;Q0<_d.length;Q0++){const i=_d[Q0];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}_d=null,Q0=0}}const ES=e=>e.id==null?e.flags&2?-1:1/0:e.id;function jhe(e){e6=!1,TS=!0;try{for(zu=0;zu<Zn.length;zu++){const t=Zn[zu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Tb(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zu<Zn.length;zu++){const t=Zn[zu];t&&(t.flags&=-2)}zu=0,Zn.length=0,bA(),TS=!1,F7=null,(Zn.length||t1.length)&&jhe()}}let ev,_E=[];function Uhe(e,t){var i,r;ev=e,ev?(ev.enabled=!0,_E.forEach(({event:s,args:n})=>ev.emit(s,...n)),_E=[]):typeof window<"u"&&window.HTMLElement&&!((r=(i=window.navigator)==null?void 0:i.userAgent)!=null&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(n=>{Uhe(n,t)}),setTimeout(()=>{ev||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,_E=[])},3e3)):_E=[]}let os=null,JC=null;function MS(e){const t=os;return os=e,JC=e&&e.type.__scopeId||null,t}function AJe(e){JC=e}function $Je(){JC=null}const CJe=e=>Yr;function Yr(e,t=os,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&u6(-1);const n=MS(t);let o;try{o=e(...s)}finally{MS(n),r._d&&u6(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Mi(e,t){if(os===null)return e;const i=Gx(os),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[n,o,a,l=ei]=t[s];n&&(Mt(n)&&(n={mounted:n,updated:n}),n.deep&&jh(o),r.push({dir:n,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Ju(e,t,i,r){const s=e.dirs,n=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[r];l&&(Rf(),ol(l,i,8,[e.el,a,e,t]),Of())}}const Vhe=Symbol("_vte"),Ghe=e=>e.__isTeleport,y2=e=>e&&(e.disabled||e.disabled===""),RJe=e=>e&&(e.defer||e.defer===""),wZ=e=>typeof SVGElement<"u"&&e instanceof SVGElement,_Z=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,t6=(e,t)=>{const i=e&&e.to;return _i(i)?t?t(i):null:i},OJe={name:"Teleport",__isTeleport:!0,process(e,t,i,r,s,n,o,a,l,u){const{mc:h,pc:p,pbc:f,o:{insert:m,querySelector:g,createText:b,createComment:w}}=u,S=y2(t.props);let{shapeFlag:T,children:x,dynamicChildren:_}=t;if(e==null){const M=t.el=b(""),I=t.anchor=b("");m(M,i,r),m(I,i,r);const A=(R,O)=>{T&16&&(s&&s.isCE&&(s.ce._teleportTarget=R),h(x,R,O,s,n,o,a,l))},C=()=>{const R=t.target=t6(t.props,g),O=zhe(R,t,b,m);R&&(o!=="svg"&&wZ(R)?o="svg":o!=="mathml"&&_Z(R)&&(o="mathml"),S||(A(R,O),CI(t)))};S&&(A(i,I),CI(t)),RJe(t.props)?Ss(C,n):C()}else{t.el=e.el,t.targetStart=e.targetStart;const M=t.anchor=e.anchor,I=t.target=e.target,A=t.targetAnchor=e.targetAnchor,C=y2(e.props),R=C?i:I,O=C?M:A;if(o==="svg"||wZ(I)?o="svg":(o==="mathml"||_Z(I))&&(o="mathml"),_?(f(e.dynamicChildren,_,R,s,n,o,a),J7(e,t,!0)):l||p(e,t,R,O,s,n,o,a,!1),S)C?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):SE(t,i,M,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const k=t.target=t6(t.props,g);k&&SE(t,k,null,u,0)}else C&&SE(t,I,A,u,1);CI(t)}},remove(e,t,i,{um:r,o:{remove:s}},n){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:p,props:f}=e;if(p&&(s(u),s(h)),n&&s(l),o&16){const m=n||!y2(f);for(let g=0;g<a.length;g++){const b=a[g];r(b,t,i,m,!!b.dynamicChildren)}}},move:SE,hydrate:PJe};function SE(e,t,i,{o:{insert:r},m:s},n=2){n===0&&r(e.targetAnchor,t,i);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=e,p=n===2;if(p&&r(o,t,i),(!p||y2(h))&&l&16)for(let f=0;f<u.length;f++)s(u[f],t,i,2);p&&r(a,t,i)}function PJe(e,t,i,r,s,n,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},p){const f=t.target=t6(t.props,l);if(f){const m=f._lpa||f.firstChild;if(t.shapeFlag&16)if(y2(t.props))t.anchor=p(o(e),t,a(e),i,r,s,n),t.targetStart=m,t.targetAnchor=m&&o(m);else{t.anchor=o(e);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,f._lpa=t.targetAnchor&&o(t.targetAnchor);break}}g=o(g)}t.targetAnchor||zhe(f,t,h,u),p(m&&o(m),t,f,i,r,s,n)}CI(t)}return t.anchor&&o(t.anchor)}const Bhe=OJe;function CI(e){const t=e.ctx;if(t&&t.ut){let i=e.targetStart;for(;i&&i!==e.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function zhe(e,t,i,r){const s=t.targetStart=i(""),n=t.targetAnchor=i("");return s[Vhe]=n,e&&(r(s,e),r(n,e)),n}const Sd=Symbol("_leaveCb"),xE=Symbol("_enterCb");function U7(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nn(()=>{e.isMounted=!0}),Pc(()=>{e.isUnmounting=!0}),e}const Ea=[Function,Array],V7={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ea,onEnter:Ea,onAfterEnter:Ea,onEnterCancelled:Ea,onBeforeLeave:Ea,onLeave:Ea,onAfterLeave:Ea,onLeaveCancelled:Ea,onBeforeAppear:Ea,onAppear:Ea,onAfterAppear:Ea,onAppearCancelled:Ea},qhe=e=>{const t=e.subTree;return t.component?qhe(t.component):t},LJe={name:"BaseTransition",props:V7,setup(e,{slots:t}){const i=us(),r=U7();return()=>{const s=t.default&&ZC(t.default(),!0);if(!s||!s.length)return;const n=Hhe(s),o=kt(e),{mode:a}=o;if(r.isLeaving)return UR(n);const l=SZ(n);if(!l)return UR(n);let u=C1(l,o,r,i,f=>u=f);l.type!==Hr&&np(l,u);const h=i.subTree,p=h&&SZ(h);if(p&&p.type!==Hr&&!ql(l,p)&&qhe(i).type!==Hr){const f=C1(p,o,r,i);if(np(p,f),a==="out-in"&&l.type!==Hr)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,i.job.flags&8||i.update(),delete f.afterLeave},UR(n);a==="in-out"&&l.type!==Hr&&(f.delayLeave=(m,g,b)=>{const w=Jhe(r,p);w[String(p.key)]=p,m[Sd]=()=>{g(),m[Sd]=void 0,delete u.delayedLeave},u.delayedLeave=b})}return n}}};function Hhe(e){let t=e[0];if(e.length>1){for(const i of e)if(i.type!==Hr){t=i;break}}return t}const Whe=LJe;function Jhe(e,t){const{leavingVNodes:i}=e;let r=i.get(t.type);return r||(r=Object.create(null),i.set(t.type,r)),r}function C1(e,t,i,r,s){const{appear:n,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:f,onLeave:m,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:w,onAppear:S,onAfterAppear:T,onAppearCancelled:x}=t,_=String(e.key),M=Jhe(i,e),I=(R,O)=>{R&&ol(R,r,9,O)},A=(R,O)=>{const k=O[1];I(R,O),st(R)?R.every(L=>L.length<=1)&&k():R.length<=1&&k()},C={mode:o,persisted:a,beforeEnter(R){let O=l;if(!i.isMounted)if(n)O=w||l;else return;R[Sd]&&R[Sd](!0);const k=M[_];k&&ql(e,k)&&k.el[Sd]&&k.el[Sd](),I(O,[R])},enter(R){let O=u,k=h,L=p;if(!i.isMounted)if(n)O=S||u,k=T||h,L=x||p;else return;let V=!1;const J=R[xE]=y=>{V||(V=!0,y?I(L,[R]):I(k,[R]),C.delayedLeave&&C.delayedLeave(),R[xE]=void 0)};O?A(O,[R,J]):J()},leave(R,O){const k=String(e.key);if(R[xE]&&R[xE](!0),i.isUnmounting)return O();I(f,[R]);let L=!1;const V=R[Sd]=J=>{L||(L=!0,O(),J?I(b,[R]):I(g,[R]),R[Sd]=void 0,M[k]===e&&delete M[k])};M[k]=e,m?A(m,[R,V]):V()},clone(R){const O=C1(R,t,i,r,s);return s&&s(O),O}};return C}function UR(e){if(Fx(e))return e=Tc(e),e.children=null,e}function SZ(e){if(!Fx(e))return Ghe(e.type)&&e.children?Hhe(e.children):e;const{shapeFlag:t,children:i}=e;if(i){if(t&16)return i[0];if(t&32&&Mt(i.default))return i.default()}}function np(e,t){e.shapeFlag&6&&e.component?(e.transition=t,np(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ZC(e,t=!1,i){let r=[],s=0;for(let n=0;n<e.length;n++){let o=e[n];const a=i==null?o.key:String(i)+String(o.key!=null?o.key:n);o.type===Ri?(o.patchFlag&128&&s++,r=r.concat(ZC(o.children,t,a))):(t||o.type!==Hr)&&r.push(a!=null?Tc(o,{key:a}):o)}if(s>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Xt(e,t){return Mt(e)?Li({name:e.name},t,{setup:e}):e}function NJe(){const e=us();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function G7(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function i6(e){const t=us(),i=Dx(null);if(t){const s=t.refs===ei?t.refs={}:t.refs;Object.defineProperty(s,e,{enumerable:!0,get:()=>i.value,set:n=>i.value=n})}return i}function wA(e,t,i,r,s=!1){if(st(e)){e.forEach((g,b)=>wA(g,t&&(st(t)?t[b]:t),i,r,s));return}if(Jd(r)&&!s)return;const n=r.shapeFlag&4?Gx(r.component):r.el,o=s?null:n,{i:a,r:l}=e,u=t&&t.r,h=a.refs===ei?a.refs={}:a.refs,p=a.setupState,f=kt(p),m=p===ei?()=>!1:g=>li(f,g);if(u!=null&&u!==l&&(_i(u)?(h[u]=null,m(u)&&(p[u]=null)):ui(u)&&(u.value=null)),Mt(l))Tb(l,a,12,[o,h]);else{const g=_i(l),b=ui(l);if(g||b){const w=()=>{if(e.f){const S=g?m(l)?p[l]:h[l]:l.value;s?st(S)&&DC(S,n):st(S)?S.includes(n)||S.push(n):g?(h[l]=[n],m(l)&&(p[l]=h[l])):(l.value=[n],e.k&&(h[e.k]=l.value))}else g?(h[l]=o,m(l)&&(p[l]=o)):b&&(l.value=o,e.k&&(h[e.k]=o))};o?(w.id=-1,Ss(w,i)):w()}}}let xZ=!1;const t0=()=>{xZ||(console.error("Hydration completed but contains mismatches."),xZ=!0)},kJe=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",DJe=e=>e.namespaceURI.includes("MathML"),TE=e=>{if(e.nodeType===1){if(kJe(e))return"svg";if(DJe(e))return"mathml"}},bv=e=>e.nodeType===8;function FJe(e){const{mt:t,p:i,o:{patchProp:r,createText:s,nextSibling:n,parentNode:o,remove:a,insert:l,createComment:u}}=e,h=(x,_)=>{if(!_.hasChildNodes()){i(null,x,_),bA(),_._vnode=x;return}p(_.firstChild,x,null,null,null),bA(),_._vnode=x},p=(x,_,M,I,A,C=!1)=>{C=C||!!_.dynamicChildren;const R=bv(x)&&x.data==="[",O=()=>b(x,_,M,I,A,R),{type:k,ref:L,shapeFlag:V,patchFlag:J}=_;let y=x.nodeType;_.el=x,J===-2&&(C=!1,_.dynamicChildren=null);let E=null;switch(k){case Yh:y!==3?_.children===""?(l(_.el=s(""),o(x),x),E=x):E=O():(x.data!==_.children&&(t0(),x.data=_.children),E=n(x));break;case Hr:T(x)?(E=n(x),S(_.el=x.content.firstChild,x,M)):y!==8||R?E=O():E=n(x);break;case Fy:if(R&&(x=n(x),y=x.nodeType),y===1||y===3){E=x;const $=!_.children.length;for(let P=0;P<_.staticCount;P++)$&&(_.children+=E.nodeType===1?E.outerHTML:E.data),P===_.staticCount-1&&(_.anchor=E),E=n(E);return R?n(E):E}else O();break;case Ri:R?E=g(x,_,M,I,A,C):E=O();break;default:if(V&1)(y!==1||_.type.toLowerCase()!==x.tagName.toLowerCase())&&!T(x)?E=O():E=f(x,_,M,I,A,C);else if(V&6){_.slotScopeIds=A;const $=o(x);if(R?E=w(x):bv(x)&&x.data==="teleport start"?E=w(x,x.data,"teleport end"):E=n(x),t(_,$,null,M,I,TE($),C),Jd(_)){let P;R?(P=Bt(Ri),P.anchor=E?E.previousSibling:$.lastChild):P=x.nodeType===3?Kh(""):Bt("div"),P.el=x,_.component.subTree=P}}else V&64?y!==8?E=O():E=_.type.hydrate(x,_,M,I,A,C,e,m):V&128&&(E=_.type.hydrate(x,_,M,I,TE(o(x)),A,C,e,p))}return L!=null&&wA(L,null,I,_),E},f=(x,_,M,I,A,C)=>{C=C||!!_.dynamicChildren;const{type:R,props:O,patchFlag:k,shapeFlag:L,dirs:V,transition:J}=_,y=R==="input"||R==="option";if(y||k!==-1){V&&Ju(_,null,M,"created");let E=!1;if(T(x)){E=xpe(I,J)&&M&&M.vnode.props&&M.vnode.props.appear;const P=x.content.firstChild;E&&J.beforeEnter(P),S(P,x,M),_.el=x=P}if(L&16&&!(O&&(O.innerHTML||O.textContent))){let P=m(x.firstChild,_,x,M,I,A,C);for(;P;){EE(x,1)||t0();const G=P;P=P.nextSibling,a(G)}}else if(L&8){let P=_.children;P[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(P=P.slice(1)),x.textContent!==P&&(EE(x,0)||t0(),x.textContent=_.children)}if(O){if(y||!C||k&48){const P=x.tagName.includes("-");for(const G in O)(y&&(G.endsWith("value")||G==="indeterminate")||Sb(G)&&!Ly(G)||G[0]==="."||P)&&r(x,G,null,O[G],void 0,M)}else if(O.onClick)r(x,"onClick",null,O.onClick,void 0,M);else if(k&4&&Xa(O.style))for(const P in O.style)O.style[P]}let $;($=O&&O.onVnodeBeforeMount)&&vo($,M,_),V&&Ju(_,null,M,"beforeMount"),(($=O&&O.onVnodeMounted)||V||E)&&Ppe(()=>{$&&vo($,M,_),E&&J.enter(x),V&&Ju(_,null,M,"mounted")},I)}return x.nextSibling},m=(x,_,M,I,A,C,R)=>{R=R||!!_.dynamicChildren;const O=_.children,k=O.length;for(let L=0;L<k;L++){const V=R?O[L]:O[L]=So(O[L]),J=V.type===Yh;x?(J&&!R&&L+1<k&&So(O[L+1]).type===Yh&&(l(s(x.data.slice(V.children.length)),M,n(x)),x.data=V.children),x=p(x,V,I,A,C,R)):J&&!V.children?l(V.el=s(""),M):(EE(M,1)||t0(),i(null,V,M,null,I,A,TE(M),C))}return x},g=(x,_,M,I,A,C)=>{const{slotScopeIds:R}=_;R&&(A=A?A.concat(R):R);const O=o(x),k=m(n(x),_,O,M,I,A,C);return k&&bv(k)&&k.data==="]"?n(_.anchor=k):(t0(),l(_.anchor=u("]"),O,k),k)},b=(x,_,M,I,A,C)=>{if(EE(x.parentElement,1)||t0(),_.el=null,C){const k=w(x);for(;;){const L=n(x);if(L&&L!==k)a(L);else break}}const R=n(x),O=o(x);return a(x),i(null,_,O,R,M,I,TE(O),A),R},w=(x,_="[",M="]")=>{let I=0;for(;x;)if(x=n(x),x&&bv(x)&&(x.data===_&&I++,x.data===M)){if(I===0)return n(x);I--}return x},S=(x,_,M)=>{const I=_.parentNode;I&&I.replaceChild(x,_);let A=M;for(;A;)A.vnode.el===_&&(A.vnode.el=A.subTree.el=x),A=A.parent},T=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[h,p]}const TZ="data-allow-mismatch",jJe={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function EE(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(TZ);)e=e.parentElement;const i=e&&e.getAttribute(TZ);if(i==null)return!1;if(i==="")return!0;{const r=i.split(",");return t===0&&r.includes("children")?!0:i.split(",").includes(jJe[t])}}const UJe=(e=1e4)=>t=>{const i=requestIdleCallback(t,{timeout:e});return()=>cancelIdleCallback(i)};function VJe(e){const{top:t,left:i,bottom:r,right:s}=e.getBoundingClientRect(),{innerHeight:n,innerWidth:o}=window;return(t>0&&t<n||r>0&&r<n)&&(i>0&&i<o||s>0&&s<o)}const GJe=e=>(t,i)=>{const r=new IntersectionObserver(s=>{for(const n of s)if(n.isIntersecting){r.disconnect(),t();break}},e);return i(s=>{if(s instanceof Element){if(VJe(s))return t(),r.disconnect(),!1;r.observe(s)}}),()=>r.disconnect()},BJe=e=>t=>{if(e){const i=matchMedia(e);if(i.matches)t();else return i.addEventListener("change",t,{once:!0}),()=>i.removeEventListener("change",t)}},zJe=(e=[])=>(t,i)=>{_i(e)&&(e=[e]);let r=!1;const s=o=>{r||(r=!0,n(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},n=()=>{i(o=>{for(const a of e)o.removeEventListener(a,s)})};return i(o=>{for(const a of e)o.addEventListener(a,s,{once:!0})}),n};function qJe(e,t){if(bv(e)&&e.data==="["){let i=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(t(r)===!1)break}else if(bv(r))if(r.data==="]"){if(--i===0)break}else r.data==="["&&i++;r=r.nextSibling}}else t(e)}const Jd=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Zhe(e){Mt(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:r,delay:s=200,hydrate:n,timeout:o,suspensible:a=!0,onError:l}=e;let u=null,h,p=0;const f=()=>(p++,u=null,m()),m=()=>{let g;return u||(g=u=t().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),l)return new Promise((w,S)=>{l(b,()=>w(f()),()=>S(b),p+1)});throw b}).then(b=>g!==u&&u?u:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),h=b,b)))};return Xt({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(g,b,w){const S=n?()=>{const T=n(w,x=>qJe(g,x));T&&(b.bum||(b.bum=[])).push(T)}:w;h?S():m().then(()=>!b.isUnmounted&&S())},get __asyncResolved(){return h},setup(){const g=ss;if(G7(g),h)return()=>VR(h,g);const b=x=>{u=null,Cg(x,g,13,!r)};if(a&&g.suspense||Vx)return m().then(x=>()=>VR(x,g)).catch(x=>(b(x),()=>r?Bt(r,{error:x}):null));const w=_e(!1),S=_e(),T=_e(!!s);return s&&setTimeout(()=>{T.value=!1},s),o!=null&&setTimeout(()=>{if(!w.value&&!S.value){const x=new Error(`Async component timed out after ${o}ms.`);b(x),S.value=x}},o),m().then(()=>{w.value=!0,g.parent&&Fx(g.parent.vnode)&&g.parent.update()}).catch(x=>{b(x),S.value=x}),()=>{if(w.value&&h)return VR(h,g);if(S.value&&r)return Bt(r,{error:S.value});if(i&&!T.value)return Bt(i)}}})}function VR(e,t){const{ref:i,props:r,children:s,ce:n}=t.vnode,o=Bt(e,r,s);return o.ref=i,o.ce=n,delete t.vnode.ce,o}const Fx=e=>e.type.__isKeepAlive,HJe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const i=us(),r=i.ctx;if(!r.renderer)return()=>{const T=t.default&&t.default();return T&&T.length===1?T[0]:T};const s=new Map,n=new Set;let o=null;const a=i.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:p}}}=r,f=p("div");r.activate=(T,x,_,M,I)=>{const A=T.component;u(T,x,_,0,a),l(A.vnode,T,x,_,A,a,M,T.slotScopeIds,I),Ss(()=>{A.isDeactivated=!1,A.a&&Ny(A.a);const C=T.props&&T.props.onVnodeMounted;C&&vo(C,A.parent,T)},a)},r.deactivate=T=>{const x=T.component;SA(x.m),SA(x.a),u(T,f,null,1,a),Ss(()=>{x.da&&Ny(x.da);const _=T.props&&T.props.onVnodeUnmounted;_&&vo(_,x.parent,T),x.isDeactivated=!0},a)};function m(T){GR(T),h(T,i,a,!0)}function g(T){s.forEach((x,_)=>{const M=f6(x.type);M&&!T(M)&&b(_)})}function b(T){const x=s.get(T);x&&(!o||!ql(x,o))?m(x):o&&GR(o),s.delete(T),n.delete(T)}qs(()=>[e.include,e.exclude],([T,x])=>{T&&g(_=>O_(T,_)),x&&g(_=>!O_(x,_))},{flush:"post",deep:!0});let w=null;const S=()=>{w!=null&&(xA(i.subTree.type)?Ss(()=>{s.set(w,ME(i.subTree))},i.subTree.suspense):s.set(w,ME(i.subTree)))};return Nn(S),jx(S),Pc(()=>{s.forEach(T=>{const{subTree:x,suspense:_}=i,M=ME(x);if(T.type===M.type&&T.key===M.key){GR(M);const I=M.component.da;I&&Ss(I,_);return}m(T)})}),()=>{if(w=null,!t.default)return o=null;const T=t.default(),x=T[0];if(T.length>1)return o=null,T;if(!xc(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let _=ME(x);if(_.type===Hr)return o=null,_;const M=_.type,I=f6(Jd(_)?_.type.__asyncResolved||{}:M),{include:A,exclude:C,max:R}=e;if(A&&(!I||!O_(A,I))||C&&I&&O_(C,I))return _.shapeFlag&=-257,o=_,x;const O=_.key==null?M:_.key,k=s.get(O);return _.el&&(_=Tc(_),x.shapeFlag&128&&(x.ssContent=_)),w=O,k?(_.el=k.el,_.component=k.component,_.transition&&np(_,_.transition),_.shapeFlag|=512,n.delete(O),n.add(O)):(n.add(O),R&&n.size>parseInt(R,10)&&b(n.values().next().value)),_.shapeFlag|=256,o=_,xA(x.type)?x:_}}},WJe=HJe;function O_(e,t){return st(e)?e.some(i=>O_(i,t)):_i(e)?e.split(",").includes(t):nhe(e)?(e.lastIndex=0,e.test(t)):!1}function Yhe(e,t){Xhe(e,"a",t)}function Khe(e,t){Xhe(e,"da",t)}function Xhe(e,t,i=ss){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(YC(t,r,i),i){let s=i.parent;for(;s&&s.parent;)Fx(s.parent.vnode)&&JJe(r,t,i,s),s=s.parent}}function JJe(e,t,i,r){const s=YC(t,e,r,!0);Eb(()=>{DC(r[t],s)},i)}function GR(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ME(e){return e.shapeFlag&128?e.ssContent:e}function YC(e,t,i=ss,r=!1){if(i){const s=i[e]||(i[e]=[]),n=t.__weh||(t.__weh=(...o)=>{Rf();const a=cg(i),l=ol(t,i,e,o);return a(),Of(),l});return r?s.unshift(n):s.push(n),n}}const pp=e=>(t,i=ss)=>{(!Vx||e==="sp")&&YC(e,(...r)=>t(...r),i)},KC=pp("bm"),Nn=pp("m"),Qhe=pp("bu"),jx=pp("u"),Pc=pp("bum"),Eb=pp("um"),epe=pp("sp"),tpe=pp("rtg"),ipe=pp("rtc");function rpe(e,t=ss){YC("ec",e,t)}const B7="components",ZJe="directives";function qr(e,t){return z7(B7,e,!0,t)||e}const spe=Symbol.for("v-ndc");function npe(e){return _i(e)?z7(B7,e,!1)||e:e||spe}function Ii(e){return z7(ZJe,e)}function z7(e,t,i=!0,r=!1){const s=os||ss;if(s){const n=s.type;if(e===B7){const a=f6(n,!1);if(a&&(a===t||a===zs(t)||a===xb(zs(t))))return n}const o=EZ(s[e]||n[e],t)||EZ(s.appContext[e],t);return!o&&r?n:o}}function EZ(e,t){return e&&(e[t]||e[zs(t)]||e[xb(zs(t))])}function Rg(e,t,i,r){let s;const n=i&&i[r],o=st(e);if(o||_i(e)){const a=o&&Xa(e);let l=!1;a&&(l=!fa(e),e=BC(e)),s=new Array(e.length);for(let u=0,h=e.length;u<h;u++)s[u]=t(l?Sn(e[u]):e[u],u,void 0,n&&n[u])}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,n&&n[a])}else if(Si(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,n&&n[l]));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];s[l]=t(e[h],h,l,n&&n[l])}}else s=[];return i&&(i[r]=s),s}function YJe(e,t){for(let i=0;i<t.length;i++){const r=t[i];if(st(r))for(let s=0;s<r.length;s++)e[r[s].name]=r[s].fn;else r&&(e[r.name]=r.key?(...s)=>{const n=r.fn(...s);return n&&(n.key=r.key),n}:r.fn)}return e}function tc(e,t,i={},r,s){if(os.ce||os.parent&&Jd(os.parent)&&os.parent.ce)return t!=="default"&&(i.name=t),Re(),Ji(Ri,null,[Bt("slot",i,r&&r())],64);let n=e[t];n&&n._c&&(n._d=!1),Re();const o=n&&q7(n(i)),a=Ji(Ri,{key:(i.key||o&&o.key||`_${t}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function q7(e){return e.some(t=>xc(t)?!(t.type===Hr||t.type===Ri&&!q7(t.children)):!0)?e:null}function KJe(e,t){const i={};for(const r in e)i[t&&/[A-Z]/.test(r)?`on:${r}`:e1(r)]=e[r];return i}const r6=e=>e?jpe(e)?Gx(e):r6(e.parent):null,g2=Li(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>r6(e.parent),$root:e=>r6(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>H7(e),$forceUpdate:e=>e.f||(e.f=()=>{j7(e.update)}),$nextTick:e=>e.n||(e.n=Oc.bind(e.proxy)),$watch:e=>IZe.bind(e)}),BR=(e,t)=>e!==ei&&!e.__isScriptSetup&&li(e,t),s6={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:s,props:n,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return n[t]}else{if(BR(r,t))return o[t]=1,r[t];if(s!==ei&&li(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&li(u,t))return o[t]=3,n[t];if(i!==ei&&li(i,t))return o[t]=4,i[t];n6&&(o[t]=0)}}const h=g2[t];let p,f;if(h)return t==="$attrs"&&On(e.attrs,"get",""),h(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(i!==ei&&li(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,li(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:n}=e;return BR(s,t)?(s[t]=i,!0):r!==ei&&li(r,t)?(r[t]=i,!0):li(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:n}},o){let a;return!!i[o]||e!==ei&&li(e,o)||BR(t,o)||(a=n[0])&&li(a,o)||li(r,o)||li(g2,o)||li(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:li(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}},XJe=Li({},s6,{get(e,t){if(t!==Symbol.unscopables)return s6.get(e,t,e)},has(e,t){return t[0]!=="_"&&!I7(t)}});function QJe(){return null}function eZe(){return null}function tZe(e){}function iZe(e){}function rZe(){return null}function sZe(){}function nZe(e,t){return null}function oZe(){return ope().slots}function aZe(){return ope().attrs}function ope(){const e=us();return e.setupContext||(e.setupContext=Gpe(e))}function IS(e){return st(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function lZe(e,t){const i=IS(e);for(const r in t){if(r.startsWith("__skip"))continue;let s=i[r];s?st(s)||Mt(s)?s=i[r]={type:s,default:t[r]}:s.default=t[r]:s===null&&(s=i[r]={default:t[r]}),s&&t[`__skip_${r}`]&&(s.skipFactory=!0)}return i}function uZe(e,t){return!e||!t?e||t:st(e)&&st(t)?e.concat(t):Li({},IS(e),IS(t))}function cZe(e,t){const i={};for(const r in e)t.includes(r)||Object.defineProperty(i,r,{enumerable:!0,get:()=>e[r]});return i}function hZe(e){const t=us();let i=e();return h6(),FC(i)&&(i=i.catch(r=>{throw cg(t),r})),[i,()=>cg(t)]}let n6=!0;function pZe(e){const t=H7(e),i=e.proxy,r=e.ctx;n6=!1,t.beforeCreate&&MZ(t.beforeCreate,e,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:b,deactivated:w,beforeDestroy:S,beforeUnmount:T,destroyed:x,unmounted:_,render:M,renderTracked:I,renderTriggered:A,errorCaptured:C,serverPrefetch:R,expose:O,inheritAttrs:k,components:L,directives:V,filters:J}=t;if(u&&dZe(u,r,null),o)for(const $ in o){const P=o[$];Mt(P)&&(r[$]=P.bind(i))}if(s){const $=s.call(i,i);Si($)&&(e.data=Js($))}if(n6=!0,n)for(const $ in n){const P=n[$],G=Mt(P)?P.bind(i,i):Mt(P.get)?P.get.bind(i,i):Ka,Q=!Mt(P)&&Mt(P.set)?P.set.bind(i):Ka,se=Zt({get:G,set:Q});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>se.value,set:ie=>se.value=ie})}if(a)for(const $ in a)ape(a[$],r,i,$);if(l){const $=Mt(l)?l.call(i):l;Reflect.ownKeys($).forEach(P=>{upe(P,$[P])})}h&&MZ(h,e,"c");function E($,P){st(P)?P.forEach(G=>$(G.bind(i))):P&&$(P.bind(i))}if(E(KC,p),E(Nn,f),E(Qhe,m),E(jx,g),E(Yhe,b),E(Khe,w),E(rpe,C),E(ipe,I),E(tpe,A),E(Pc,T),E(Eb,_),E(epe,R),st(O))if(O.length){const $=e.exposed||(e.exposed={});O.forEach(P=>{Object.defineProperty($,P,{get:()=>i[P],set:G=>i[P]=G})})}else e.exposed||(e.exposed={});M&&e.render===Ka&&(e.render=M),k!=null&&(e.inheritAttrs=k),L&&(e.components=L),V&&(e.directives=V),R&&G7(e)}function dZe(e,t,i=Ka){st(e)&&(e=o6(e));for(const r in e){const s=e[r];let n;Si(s)?"default"in s?n=$s(s.from||r,s.default,!0):n=$s(s.from||r):n=$s(s),ui(n)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[r]=n}}function MZ(e,t,i){ol(st(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function ape(e,t,i,r){let s=r.includes(".")?$pe(i,r):()=>i[r];if(_i(e)){const n=t[e];Mt(n)&&qs(s,n)}else if(Mt(e))qs(s,e.bind(i));else if(Si(e))if(st(e))e.forEach(n=>ape(n,t,i,r));else{const n=Mt(e.handler)?e.handler.bind(i):t[e.handler];Mt(n)&&qs(s,n,e)}}function H7(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let l;return a?l=a:!s.length&&!i&&!r?l=t:(l={},s.length&&s.forEach(u=>_A(l,u,o,!0)),_A(l,t,o)),Si(t)&&n.set(t,l),l}function _A(e,t,i,r=!1){const{mixins:s,extends:n}=t;n&&_A(e,n,i,!0),s&&s.forEach(o=>_A(e,o,i,!0));for(const o in t)if(!(r&&o==="expose")){const a=fZe[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const fZe={data:IZ,props:AZ,emits:AZ,methods:P_,computed:P_,beforeCreate:Un,created:Un,beforeMount:Un,mounted:Un,beforeUpdate:Un,updated:Un,beforeDestroy:Un,beforeUnmount:Un,destroyed:Un,unmounted:Un,activated:Un,deactivated:Un,errorCaptured:Un,serverPrefetch:Un,components:P_,directives:P_,watch:yZe,provide:IZ,inject:mZe};function IZ(e,t){return t?e?function(){return Li(Mt(e)?e.call(this,this):e,Mt(t)?t.call(this,this):t)}:t:e}function mZe(e,t){return P_(o6(e),o6(t))}function o6(e){if(st(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Un(e,t){return e?[...new Set([].concat(e,t))]:t}function P_(e,t){return e?Li(Object.create(null),e,t):t}function AZ(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:Li(Object.create(null),IS(e),IS(t??{})):t}function yZe(e,t){if(!e)return t;if(!t)return e;const i=Li(Object.create(null),e);for(const r in t)i[r]=Un(e[r],t[r]);return i}function lpe(){return{app:null,config:{isNativeTag:she,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gZe=0;function vZe(e,t){return function(r,s=null){Mt(r)||(r=Li({},r)),s!=null&&!Si(s)&&(s=null);const n=lpe(),o=new WeakSet,a=[];let l=!1;const u=n.app={_uid:gZe++,_component:r,_props:s,_container:null,_context:n,_instance:null,version:zpe,get config(){return n.config},set config(h){},use(h,...p){return o.has(h)||(h&&Mt(h.install)?(o.add(h),h.install(u,...p)):Mt(h)&&(o.add(h),h(u,...p))),u},mixin(h){return n.mixins.includes(h)||n.mixins.push(h),u},component(h,p){return p?(n.components[h]=p,u):n.components[h]},directive(h,p){return p?(n.directives[h]=p,u):n.directives[h]},mount(h,p,f){if(!l){const m=u._ceVNode||Bt(r,s);return m.appContext=n,f===!0?f="svg":f===!1&&(f=void 0),p&&t?t(m,h):e(m,h,f),l=!0,u._container=h,h.__vue_app__=u,Gx(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(ol(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(h,p){return n.provides[h]=p,u},runWithContext(h){const p=Dy;Dy=u;try{return h()}finally{Dy=p}}};return u}}let Dy=null;function upe(e,t){if(ss){let i=ss.provides;const r=ss.parent&&ss.parent.provides;r===i&&(i=ss.provides=Object.create(r)),i[e]=t}}function $s(e,t,i=!1){const r=ss||os;if(r||Dy){const s=Dy?Dy._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Mt(t)?t.call(r&&r.proxy):t}}function cpe(){return!!(ss||os||Dy)}const hpe={},ppe=()=>Object.create(hpe),dpe=e=>Object.getPrototypeOf(e)===hpe;function bZe(e,t,i,r=!1){const s={},n=ppe();e.propsDefaults=Object.create(null),fpe(e,t,s,n);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=r?s:Che(s):e.type.props?e.props=s:e.props=n,e.attrs=n}function wZe(e,t,i,r){const{props:s,attrs:n,vnode:{patchFlag:o}}=e,a=kt(s),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let p=0;p<h.length;p++){let f=h[p];if(XC(e.emitsOptions,f))continue;const m=t[f];if(l)if(li(n,f))m!==n[f]&&(n[f]=m,u=!0);else{const g=zs(f);s[g]=a6(l,a,g,m,e,!1)}else m!==n[f]&&(n[f]=m,u=!0)}}}else{fpe(e,t,s,n)&&(u=!0);let h;for(const p in a)(!t||!li(t,p)&&((h=En(p))===p||!li(t,h)))&&(l?i&&(i[p]!==void 0||i[h]!==void 0)&&(s[p]=a6(l,a,p,void 0,e,!0)):delete s[p]);if(n!==a)for(const p in n)(!t||!li(t,p))&&(delete n[p],u=!0)}u&&Zh(e.attrs,"set","")}function fpe(e,t,i,r){const[s,n]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Ly(l))continue;const u=t[l];let h;s&&li(s,h=zs(l))?!n||!n.includes(h)?i[h]=u:(a||(a={}))[h]=u:XC(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(n){const l=kt(i),u=a||ei;for(let h=0;h<n.length;h++){const p=n[h];i[p]=a6(s,l,p,u[p],e,!li(u,p))}}return o}function a6(e,t,i,r,s,n){const o=e[i];if(o!=null){const a=li(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Mt(l)){const{propsDefaults:u}=s;if(i in u)r=u[i];else{const h=cg(s);r=u[i]=l.call(null,t),h()}}else r=l;s.ce&&s.ce._setProp(i,r)}o[0]&&(n&&!a?r=!1:o[1]&&(r===""||r===En(i))&&(r=!0))}return r}const _Ze=new WeakMap;function mpe(e,t,i=!1){const r=i?_Ze:t.propsCache,s=r.get(e);if(s)return s;const n=e.props,o={},a=[];let l=!1;if(!Mt(e)){const h=p=>{l=!0;const[f,m]=mpe(p,t,!0);Li(o,f),m&&a.push(...m)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!n&&!l)return Si(e)&&r.set(e,Oy),Oy;if(st(n))for(let h=0;h<n.length;h++){const p=zs(n[h]);$Z(p)&&(o[p]=ei)}else if(n)for(const h in n){const p=zs(h);if($Z(p)){const f=n[h],m=o[p]=st(f)||Mt(f)?{type:f}:Li({},f),g=m.type;let b=!1,w=!0;if(st(g))for(let S=0;S<g.length;++S){const T=g[S],x=Mt(T)&&T.name;if(x==="Boolean"){b=!0;break}else x==="String"&&(w=!1)}else b=Mt(g)&&g.name==="Boolean";m[0]=b,m[1]=w,(b||li(m,"default"))&&a.push(p)}}const u=[o,a];return Si(e)&&r.set(e,u),u}function $Z(e){return e[0]!=="$"&&!Ly(e)}const ype=e=>e[0]==="_"||e==="$stable",W7=e=>st(e)?e.map(So):[So(e)],SZe=(e,t,i)=>{if(t._n)return t;const r=Yr((...s)=>W7(t(...s)),i);return r._c=!1,r},gpe=(e,t,i)=>{const r=e._ctx;for(const s in e){if(ype(s))continue;const n=e[s];if(Mt(n))t[s]=SZe(s,n,r);else if(n!=null){const o=W7(n);t[s]=()=>o}}},vpe=(e,t)=>{const i=W7(t);e.slots.default=()=>i},bpe=(e,t,i)=>{for(const r in t)(i||r!=="_")&&(e[r]=t[r])},xZe=(e,t,i)=>{const r=e.slots=ppe();if(e.vnode.shapeFlag&32){const s=t._;s?(bpe(r,t,i),i&&E7(r,"_",s,!0)):gpe(t,r)}else t&&vpe(e,t)},TZe=(e,t,i)=>{const{vnode:r,slots:s}=e;let n=!0,o=ei;if(r.shapeFlag&32){const a=t._;a?i&&a===1?n=!1:bpe(s,t,i):(n=!t.$stable,gpe(t,s)),o=t}else t&&(vpe(e,t),o={default:1});if(n)for(const a in s)!ype(a)&&o[a]==null&&delete s[a]},Ss=Ppe;function wpe(e){return Spe(e)}function _pe(e){return Spe(e,FJe)}function Spe(e,t){const i=M7();i.__VUE__=!0;const{insert:r,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:p,nextSibling:f,setScopeId:m=Ka,insertStaticContent:g}=e,b=(Y,B,re,fe=null,ve=null,D=null,q=void 0,N=null,U=!!B.dynamicChildren)=>{if(Y===B)return;Y&&!ql(Y,B)&&(fe=De(Y),ie(Y,ve,D,!0),Y=null),B.patchFlag===-2&&(U=!1,B.dynamicChildren=null);const{type:H,ref:ne,shapeFlag:me}=B;switch(H){case Yh:w(Y,B,re,fe);break;case Hr:S(Y,B,re,fe);break;case Fy:Y==null&&T(B,re,fe,q);break;case Ri:L(Y,B,re,fe,ve,D,q,N,U);break;default:me&1?M(Y,B,re,fe,ve,D,q,N,U):me&6?V(Y,B,re,fe,ve,D,q,N,U):(me&64||me&128)&&H.process(Y,B,re,fe,ve,D,q,N,U,nt)}ne!=null&&ve&&wA(ne,Y&&Y.ref,D,B||Y,!B)},w=(Y,B,re,fe)=>{if(Y==null)r(B.el=a(B.children),re,fe);else{const ve=B.el=Y.el;B.children!==Y.children&&u(ve,B.children)}},S=(Y,B,re,fe)=>{Y==null?r(B.el=l(B.children||""),re,fe):B.el=Y.el},T=(Y,B,re,fe)=>{[Y.el,Y.anchor]=g(Y.children,B,re,fe,Y.el,Y.anchor)},x=({el:Y,anchor:B},re,fe)=>{let ve;for(;Y&&Y!==B;)ve=f(Y),r(Y,re,fe),Y=ve;r(B,re,fe)},_=({el:Y,anchor:B})=>{let re;for(;Y&&Y!==B;)re=f(Y),s(Y),Y=re;s(B)},M=(Y,B,re,fe,ve,D,q,N,U)=>{B.type==="svg"?q="svg":B.type==="math"&&(q="mathml"),Y==null?I(B,re,fe,ve,D,q,N,U):R(Y,B,ve,D,q,N,U)},I=(Y,B,re,fe,ve,D,q,N)=>{let U,H;const{props:ne,shapeFlag:me,transition:pe,dirs:Z}=Y;if(U=Y.el=o(Y.type,D,ne&&ne.is,ne),me&8?h(U,Y.children):me&16&&C(Y.children,U,null,fe,ve,zR(Y,D),q,N),Z&&Ju(Y,null,fe,"created"),A(U,Y,Y.scopeId,q,fe),ne){for(const Ee in ne)Ee!=="value"&&!Ly(Ee)&&n(U,Ee,null,ne[Ee],D,fe);"value"in ne&&n(U,"value",null,ne.value,D),(H=ne.onVnodeBeforeMount)&&vo(H,fe,Y)}Z&&Ju(Y,null,fe,"beforeMount");const te=xpe(ve,pe);te&&pe.beforeEnter(U),r(U,B,re),((H=ne&&ne.onVnodeMounted)||te||Z)&&Ss(()=>{H&&vo(H,fe,Y),te&&pe.enter(U),Z&&Ju(Y,null,fe,"mounted")},ve)},A=(Y,B,re,fe,ve)=>{if(re&&m(Y,re),fe)for(let D=0;D<fe.length;D++)m(Y,fe[D]);if(ve){let D=ve.subTree;if(B===D||xA(D.type)&&(D.ssContent===B||D.ssFallback===B)){const q=ve.vnode;A(Y,q,q.scopeId,q.slotScopeIds,ve.parent)}}},C=(Y,B,re,fe,ve,D,q,N,U=0)=>{for(let H=U;H<Y.length;H++){const ne=Y[H]=N?xd(Y[H]):So(Y[H]);b(null,ne,B,re,fe,ve,D,q,N)}},R=(Y,B,re,fe,ve,D,q)=>{const N=B.el=Y.el;let{patchFlag:U,dynamicChildren:H,dirs:ne}=B;U|=Y.patchFlag&16;const me=Y.props||ei,pe=B.props||ei;let Z;if(re&&Qf(re,!1),(Z=pe.onVnodeBeforeUpdate)&&vo(Z,re,B,Y),ne&&Ju(B,Y,re,"beforeUpdate"),re&&Qf(re,!0),(me.innerHTML&&pe.innerHTML==null||me.textContent&&pe.textContent==null)&&h(N,""),H?O(Y.dynamicChildren,H,N,re,fe,zR(B,ve),D):q||P(Y,B,N,null,re,fe,zR(B,ve),D,!1),U>0){if(U&16)k(N,me,pe,re,ve);else if(U&2&&me.class!==pe.class&&n(N,"class",null,pe.class,ve),U&4&&n(N,"style",me.style,pe.style,ve),U&8){const te=B.dynamicProps;for(let Ee=0;Ee<te.length;Ee++){const Fe=te[Ee],Tt=me[Fe],Wt=pe[Fe];(Wt!==Tt||Fe==="value")&&n(N,Fe,Tt,Wt,ve,re)}}U&1&&Y.children!==B.children&&h(N,B.children)}else!q&&H==null&&k(N,me,pe,re,ve);((Z=pe.onVnodeUpdated)||ne)&&Ss(()=>{Z&&vo(Z,re,B,Y),ne&&Ju(B,Y,re,"updated")},fe)},O=(Y,B,re,fe,ve,D,q)=>{for(let N=0;N<B.length;N++){const U=Y[N],H=B[N],ne=U.el&&(U.type===Ri||!ql(U,H)||U.shapeFlag&70)?p(U.el):re;b(U,H,ne,null,fe,ve,D,q,!0)}},k=(Y,B,re,fe,ve)=>{if(B!==re){if(B!==ei)for(const D in B)!Ly(D)&&!(D in re)&&n(Y,D,B[D],null,ve,fe);for(const D in re){if(Ly(D))continue;const q=re[D],N=B[D];q!==N&&D!=="value"&&n(Y,D,N,q,ve,fe)}"value"in re&&n(Y,"value",B.value,re.value,ve)}},L=(Y,B,re,fe,ve,D,q,N,U)=>{const H=B.el=Y?Y.el:a(""),ne=B.anchor=Y?Y.anchor:a("");let{patchFlag:me,dynamicChildren:pe,slotScopeIds:Z}=B;Z&&(N=N?N.concat(Z):Z),Y==null?(r(H,re,fe),r(ne,re,fe),C(B.children||[],re,ne,ve,D,q,N,U)):me>0&&me&64&&pe&&Y.dynamicChildren?(O(Y.dynamicChildren,pe,re,ve,D,q,N),(B.key!=null||ve&&B===ve.subTree)&&J7(Y,B,!0)):P(Y,B,re,ne,ve,D,q,N,U)},V=(Y,B,re,fe,ve,D,q,N,U)=>{B.slotScopeIds=N,Y==null?B.shapeFlag&512?ve.ctx.activate(B,re,fe,q,U):J(B,re,fe,ve,D,q,U):y(Y,B,U)},J=(Y,B,re,fe,ve,D,q)=>{const N=Y.component=Fpe(Y,fe,ve);if(Fx(Y)&&(N.ctx.renderer=nt),Upe(N,!1,q),N.asyncDep){if(ve&&ve.registerDep(N,E,q),!Y.el){const U=N.subTree=Bt(Hr);S(null,U,B,re)}}else E(N,Y,B,re,ve,D,q)},y=(Y,B,re)=>{const fe=B.component=Y.component;if(PZe(Y,B,re))if(fe.asyncDep&&!fe.asyncResolved){$(fe,B,re);return}else fe.next=B,fe.update();else B.el=Y.el,fe.vnode=B},E=(Y,B,re,fe,ve,D,q)=>{const N=()=>{if(Y.isMounted){let{next:me,bu:pe,u:Z,parent:te,vnode:Ee}=Y;{const Qt=Tpe(Y);if(Qt){me&&(me.el=Ee.el,$(Y,me,q)),Qt.asyncDep.then(()=>{Y.isUnmounted||N()});return}}let Fe=me,Tt;Qf(Y,!1),me?(me.el=Ee.el,$(Y,me,q)):me=Ee,pe&&Ny(pe),(Tt=me.props&&me.props.onVnodeBeforeUpdate)&&vo(Tt,te,me,Ee),Qf(Y,!0);const Wt=RI(Y),Gt=Y.subTree;Y.subTree=Wt,b(Gt,Wt,p(Gt.el),De(Gt),Y,ve,D),me.el=Wt.el,Fe===null&&Z7(Y,Wt.el),Z&&Ss(Z,ve),(Tt=me.props&&me.props.onVnodeUpdated)&&Ss(()=>vo(Tt,te,me,Ee),ve)}else{let me;const{el:pe,props:Z}=B,{bm:te,m:Ee,parent:Fe,root:Tt,type:Wt}=Y,Gt=Jd(B);if(Qf(Y,!1),te&&Ny(te),!Gt&&(me=Z&&Z.onVnodeBeforeMount)&&vo(me,Fe,B),Qf(Y,!0),pe&&zt){const Qt=()=>{Y.subTree=RI(Y),zt(pe,Y.subTree,Y,ve,null)};Gt&&Wt.__asyncHydrate?Wt.__asyncHydrate(pe,Y,Qt):Qt()}else{Tt.ce&&Tt.ce._injectChildStyle(Wt);const Qt=Y.subTree=RI(Y);b(null,Qt,re,fe,Y,ve,D),B.el=Qt.el}if(Ee&&Ss(Ee,ve),!Gt&&(me=Z&&Z.onVnodeMounted)){const Qt=B;Ss(()=>vo(me,Fe,Qt),ve)}(B.shapeFlag&256||Fe&&Jd(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&Y.a&&Ss(Y.a,ve),Y.isMounted=!0,B=re=fe=null}};Y.scope.on();const U=Y.effect=new _S(N);Y.scope.off();const H=Y.update=U.run.bind(U),ne=Y.job=U.runIfDirty.bind(U);ne.i=Y,ne.id=Y.uid,U.scheduler=()=>j7(ne),Qf(Y,!0),H()},$=(Y,B,re)=>{B.component=Y;const fe=Y.vnode.props;Y.vnode=B,Y.next=null,wZe(Y,B.props,fe,re),TZe(Y,B.children,re),Rf(),bZ(Y),Of()},P=(Y,B,re,fe,ve,D,q,N,U=!1)=>{const H=Y&&Y.children,ne=Y?Y.shapeFlag:0,me=B.children,{patchFlag:pe,shapeFlag:Z}=B;if(pe>0){if(pe&128){Q(H,me,re,fe,ve,D,q,N,U);return}else if(pe&256){G(H,me,re,fe,ve,D,q,N,U);return}}Z&8?(ne&16&&we(H,ve,D),me!==H&&h(re,me)):ne&16?Z&16?Q(H,me,re,fe,ve,D,q,N,U):we(H,ve,D,!0):(ne&8&&h(re,""),Z&16&&C(me,re,fe,ve,D,q,N,U))},G=(Y,B,re,fe,ve,D,q,N,U)=>{Y=Y||Oy,B=B||Oy;const H=Y.length,ne=B.length,me=Math.min(H,ne);let pe;for(pe=0;pe<me;pe++){const Z=B[pe]=U?xd(B[pe]):So(B[pe]);b(Y[pe],Z,re,null,ve,D,q,N,U)}H>ne?we(Y,ve,D,!0,!1,me):C(B,re,fe,ve,D,q,N,U,me)},Q=(Y,B,re,fe,ve,D,q,N,U)=>{let H=0;const ne=B.length;let me=Y.length-1,pe=ne-1;for(;H<=me&&H<=pe;){const Z=Y[H],te=B[H]=U?xd(B[H]):So(B[H]);if(ql(Z,te))b(Z,te,re,null,ve,D,q,N,U);else break;H++}for(;H<=me&&H<=pe;){const Z=Y[me],te=B[pe]=U?xd(B[pe]):So(B[pe]);if(ql(Z,te))b(Z,te,re,null,ve,D,q,N,U);else break;me--,pe--}if(H>me){if(H<=pe){const Z=pe+1,te=Z<ne?B[Z].el:fe;for(;H<=pe;)b(null,B[H]=U?xd(B[H]):So(B[H]),re,te,ve,D,q,N,U),H++}}else if(H>pe)for(;H<=me;)ie(Y[H],ve,D,!0),H++;else{const Z=H,te=H,Ee=new Map;for(H=te;H<=pe;H++){const tt=B[H]=U?xd(B[H]):So(B[H]);tt.key!=null&&Ee.set(tt.key,H)}let Fe,Tt=0;const Wt=pe-te+1;let Gt=!1,Qt=0;const be=new Array(Wt);for(H=0;H<Wt;H++)be[H]=0;for(H=Z;H<=me;H++){const tt=Y[H];if(Tt>=Wt){ie(tt,ve,D,!0);continue}let Pt;if(tt.key!=null)Pt=Ee.get(tt.key);else for(Fe=te;Fe<=pe;Fe++)if(be[Fe-te]===0&&ql(tt,B[Fe])){Pt=Fe;break}Pt===void 0?ie(tt,ve,D,!0):(be[Pt-te]=H+1,Pt>=Qt?Qt=Pt:Gt=!0,b(tt,B[Pt],re,null,ve,D,q,N,U),Tt++)}const Ye=Gt?EZe(be):Oy;for(Fe=Ye.length-1,H=Wt-1;H>=0;H--){const tt=te+H,Pt=B[tt],jt=tt+1<ne?B[tt+1].el:fe;be[H]===0?b(null,Pt,re,jt,ve,D,q,N,U):Gt&&(Fe<0||H!==Ye[Fe]?se(Pt,re,jt,2):Fe--)}}},se=(Y,B,re,fe,ve=null)=>{const{el:D,type:q,transition:N,children:U,shapeFlag:H}=Y;if(H&6){se(Y.component.subTree,B,re,fe);return}if(H&128){Y.suspense.move(B,re,fe);return}if(H&64){q.move(Y,B,re,nt);return}if(q===Ri){r(D,B,re);for(let me=0;me<U.length;me++)se(U[me],B,re,fe);r(Y.anchor,B,re);return}if(q===Fy){x(Y,B,re);return}if(fe!==2&&H&1&&N)if(fe===0)N.beforeEnter(D),r(D,B,re),Ss(()=>N.enter(D),ve);else{const{leave:me,delayLeave:pe,afterLeave:Z}=N,te=()=>r(D,B,re),Ee=()=>{me(D,()=>{te(),Z&&Z()})};pe?pe(D,te,Ee):Ee()}else r(D,B,re)},ie=(Y,B,re,fe=!1,ve=!1)=>{const{type:D,props:q,ref:N,children:U,dynamicChildren:H,shapeFlag:ne,patchFlag:me,dirs:pe,cacheIndex:Z}=Y;if(me===-2&&(ve=!1),N!=null&&wA(N,null,re,Y,!0),Z!=null&&(B.renderCache[Z]=void 0),ne&256){B.ctx.deactivate(Y);return}const te=ne&1&&pe,Ee=!Jd(Y);let Fe;if(Ee&&(Fe=q&&q.onVnodeBeforeUnmount)&&vo(Fe,B,Y),ne&6)Ie(Y.component,re,fe);else{if(ne&128){Y.suspense.unmount(re,fe);return}te&&Ju(Y,null,B,"beforeUnmount"),ne&64?Y.type.remove(Y,B,re,nt,fe):H&&!H.hasOnce&&(D!==Ri||me>0&&me&64)?we(H,B,re,!1,!0):(D===Ri&&me&384||!ve&&ne&16)&&we(U,B,re),fe&&ye(Y)}(Ee&&(Fe=q&&q.onVnodeUnmounted)||te)&&Ss(()=>{Fe&&vo(Fe,B,Y),te&&Ju(Y,null,B,"unmounted")},re)},ye=Y=>{const{type:B,el:re,anchor:fe,transition:ve}=Y;if(B===Ri){Pe(re,fe);return}if(B===Fy){_(Y);return}const D=()=>{s(re),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(Y.shapeFlag&1&&ve&&!ve.persisted){const{leave:q,delayLeave:N}=ve,U=()=>q(re,D);N?N(Y.el,D,U):U()}else D()},Pe=(Y,B)=>{let re;for(;Y!==B;)re=f(Y),s(Y),Y=re;s(B)},Ie=(Y,B,re)=>{const{bum:fe,scope:ve,job:D,subTree:q,um:N,m:U,a:H}=Y;SA(U),SA(H),fe&&Ny(fe),ve.stop(),D&&(D.flags|=8,ie(q,Y,B,re)),N&&Ss(N,B),Ss(()=>{Y.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},we=(Y,B,re,fe=!1,ve=!1,D=0)=>{for(let q=D;q<Y.length;q++)ie(Y[q],B,re,fe,ve)},De=Y=>{if(Y.shapeFlag&6)return De(Y.component.subTree);if(Y.shapeFlag&128)return Y.suspense.next();const B=f(Y.anchor||Y.el),re=B&&B[Vhe];return re?f(re):B};let Ze=!1;const et=(Y,B,re)=>{Y==null?B._vnode&&ie(B._vnode,null,null,!0):b(B._vnode||null,Y,B,null,null,null,re),B._vnode=Y,Ze||(Ze=!0,bZ(),bA(),Ze=!1)},nt={p:b,um:ie,m:se,r:ye,mt:J,mc:C,pc:P,pbc:O,n:De,o:e};let $t,zt;return t&&([$t,zt]=t(nt)),{render:et,hydrate:$t,createApp:vZe(et,$t)}}function zR({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Qf({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function xpe(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function J7(e,t,i=!1){const r=e.children,s=t.children;if(st(r)&&st(s))for(let n=0;n<r.length;n++){const o=r[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=xd(s[n]),a.el=o.el),!i&&a.patchFlag!==-2&&J7(o,a)),a.type===Yh&&(a.el=o.el)}}function EZe(e){const t=e.slice(),i=[0];let r,s,n,o,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(s=i[i.length-1],e[s]<u){t[r]=s,i.push(r);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,e[i[a]]<u?n=a+1:o=a;u<e[i[n]]&&(n>0&&(t[r]=i[n-1]),i[n]=r)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=t[o];return i}function Tpe(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Tpe(t)}function SA(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Epe=Symbol.for("v-scx"),Mpe=()=>$s(Epe);function MZe(e,t){return Ux(e,null,t)}function Ipe(e,t){return Ux(e,null,{flush:"post"})}function Ape(e,t){return Ux(e,null,{flush:"sync"})}function qs(e,t,i){return Ux(e,t,i)}function Ux(e,t,i=ei){const{immediate:r,deep:s,flush:n,once:o}=i,a=Li({},i);let l;if(Vx)if(n==="sync"){const f=Mpe();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!t||r)a.once=!0;else{const f=()=>{};return f.stop=Ka,f.resume=Ka,f.pause=Ka,f}const u=ss;a.call=(f,m,g)=>ol(f,u,m,g);let h=!1;n==="post"?a.scheduler=f=>{Ss(f,u&&u.suspense)}:n!=="sync"&&(h=!0,a.scheduler=(f,m)=>{m?f():j7(f)}),a.augmentJob=f=>{t&&(f.flags|=4),h&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const p=wJe(e,t,a);return l&&l.push(p),p}function IZe(e,t,i){const r=this.proxy,s=_i(e)?e.includes(".")?$pe(r,e):()=>r[e]:e.bind(r,r);let n;Mt(t)?n=t:(n=t.handler,i=t);const o=cg(this),a=Ux(s,n.bind(r),i);return o(),a}function $pe(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function AZe(e,t,i=ei){const r=us(),s=zs(t),n=En(t),o=Cpe(e,t),a=Ohe((l,u)=>{let h,p=ei,f;return Ape(()=>{const m=e[t];_n(h,m)&&(h=m,u())}),{get(){return l(),i.get?i.get(h):h},set(m){const g=i.set?i.set(m):m;if(!_n(g,h)&&!(p!==ei&&_n(m,p)))return;const b=r.vnode.props;b&&(t in b||s in b||n in b)&&(`onUpdate:${t}`in b||`onUpdate:${s}`in b||`onUpdate:${n}`in b)||(h=m,u()),r.emit(`update:${t}`,g),_n(m,g)&&_n(m,p)&&!_n(g,f)&&u(),p=m,f=g}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ei:a,done:!1}:{done:!0}}}},a}const Cpe=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${zs(t)}Modifiers`]||e[`${En(t)}Modifiers`];function $Ze(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||ei;let s=i;const n=t.startsWith("update:"),o=n&&Cpe(r,t.slice(7));o&&(o.trim&&(s=i.map(h=>_i(h)?h.trim():h)),o.number&&(s=i.map(bS)));let a,l=r[a=e1(t)]||r[a=e1(zs(t))];!l&&n&&(l=r[a=e1(En(t))]),l&&ol(l,e,6,s);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ol(u,e,6,s)}}function Rpe(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const n=e.emits;let o={},a=!1;if(!Mt(e)){const l=u=>{const h=Rpe(u,t,!0);h&&(a=!0,Li(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!n&&!a?(Si(e)&&r.set(e,null),null):(st(n)?n.forEach(l=>o[l]=null):Li(o,n),Si(e)&&r.set(e,o),o)}function XC(e,t){return!e||!Sb(t)?!1:(t=t.slice(2).replace(/Once$/,""),li(e,t[0].toLowerCase()+t.slice(1))||li(e,En(t))||li(e,t))}function RI(e){const{type:t,vnode:i,proxy:r,withProxy:s,propsOptions:[n],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:p,data:f,setupState:m,ctx:g,inheritAttrs:b}=e,w=MS(e);let S,T;try{if(i.shapeFlag&4){const _=s||r,M=_;S=So(u.call(M,_,h,p,m,f,g)),T=a}else{const _=t;S=So(_.length>1?_(p,{attrs:a,slots:o,emit:l}):_(p,null)),T=t.props?a:RZe(a)}}catch(_){v2.length=0,Cg(_,e,1),S=Bt(Hr)}let x=S;if(T&&b!==!1){const _=Object.keys(T),{shapeFlag:M}=x;_.length&&M&7&&(n&&_.some(kC)&&(T=OZe(T,n)),x=Tc(x,T,!1,!0))}return i.dirs&&(x=Tc(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(i.dirs):i.dirs),i.transition&&np(x,i.transition),S=x,MS(w),S}function CZe(e,t=!0){let i;for(let r=0;r<e.length;r++){const s=e[r];if(xc(s)){if(s.type!==Hr||s.children==="v-if"){if(i)return;i=s}}else return}return i}const RZe=e=>{let t;for(const i in e)(i==="class"||i==="style"||Sb(i))&&((t||(t={}))[i]=e[i]);return t},OZe=(e,t)=>{const i={};for(const r in e)(!kC(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function PZe(e,t,i){const{props:r,children:s,component:n}=e,{props:o,children:a,patchFlag:l}=t,u=n.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?CZ(r,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let p=0;p<h.length;p++){const f=h[p];if(o[f]!==r[f]&&!XC(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?CZ(r,o,u):!0:!!o;return!1}function CZ(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const n=r[s];if(t[n]!==e[n]&&!XC(i,n))return!0}return!1}function Z7({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const xA=e=>e.__isSuspense;let l6=0;const LZe={name:"Suspense",__isSuspense:!0,process(e,t,i,r,s,n,o,a,l,u){if(e==null)kZe(t,i,r,s,n,o,a,l,u);else{if(n&&n.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}DZe(e,t,i,r,s,o,a,l,u)}},hydrate:FZe,normalize:jZe},NZe=LZe;function AS(e,t){const i=e.props&&e.props[t];Mt(i)&&i()}function kZe(e,t,i,r,s,n,o,a,l){const{p:u,o:{createElement:h}}=l,p=h("div"),f=e.suspense=Ope(e,s,r,t,p,i,n,o,a,l);u(null,f.pendingBranch=e.ssContent,p,null,r,f,n,o),f.deps>0?(AS(e,"onPending"),AS(e,"onFallback"),u(null,e.ssFallback,t,i,r,null,n,o),i1(f,e.ssFallback)):f.resolve(!1,!0)}function DZe(e,t,i,r,s,n,o,a,{p:l,um:u,o:{createElement:h}}){const p=t.suspense=e.suspense;p.vnode=t,t.el=e.el;const f=t.ssContent,m=t.ssFallback,{activeBranch:g,pendingBranch:b,isInFallback:w,isHydrating:S}=p;if(b)p.pendingBranch=f,ql(f,b)?(l(b,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0?p.resolve():w&&(S||(l(g,m,i,r,s,null,n,o,a),i1(p,m)))):(p.pendingId=l6++,S?(p.isHydrating=!1,p.activeBranch=b):u(b,s,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),w?(l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0?p.resolve():(l(g,m,i,r,s,null,n,o,a),i1(p,m))):g&&ql(f,g)?(l(g,f,i,r,s,p,n,o,a),p.resolve(!0)):(l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0&&p.resolve()));else if(g&&ql(f,g))l(g,f,i,r,s,p,n,o,a),i1(p,f);else if(AS(t,"onPending"),p.pendingBranch=f,f.shapeFlag&512?p.pendingId=f.component.suspenseId:p.pendingId=l6++,l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0)p.resolve();else{const{timeout:T,pendingId:x}=p;T>0?setTimeout(()=>{p.pendingId===x&&p.fallback(m)},T):T===0&&p.fallback(m)}}function Ope(e,t,i,r,s,n,o,a,l,u,h=!1){const{p,m:f,um:m,n:g,o:{parentNode:b,remove:w}}=u;let S;const T=UZe(e);T&&t&&t.pendingBranch&&(S=t.pendingId,t.deps++);const x=e.props?wS(e.props.timeout):void 0,_=n,M={vnode:e,parent:t,parentComponent:i,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:l6++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(I=!1,A=!1){const{vnode:C,activeBranch:R,pendingBranch:O,pendingId:k,effects:L,parentComponent:V,container:J}=M;let y=!1;M.isHydrating?M.isHydrating=!1:I||(y=R&&O.transition&&O.transition.mode==="out-in",y&&(R.transition.afterLeave=()=>{k===M.pendingId&&(f(O,J,n===_?g(R):n,0),vA(L))}),R&&(b(R.el)===J&&(n=g(R)),m(R,V,M,!0)),y||f(O,J,n,0)),i1(M,O),M.pendingBranch=null,M.isInFallback=!1;let E=M.parent,$=!1;for(;E;){if(E.pendingBranch){E.effects.push(...L),$=!0;break}E=E.parent}!$&&!y&&vA(L),M.effects=[],T&&t&&t.pendingBranch&&S===t.pendingId&&(t.deps--,t.deps===0&&!A&&t.resolve()),AS(C,"onResolve")},fallback(I){if(!M.pendingBranch)return;const{vnode:A,activeBranch:C,parentComponent:R,container:O,namespace:k}=M;AS(A,"onFallback");const L=g(C),V=()=>{M.isInFallback&&(p(null,I,O,L,R,null,k,a,l),i1(M,I))},J=I.transition&&I.transition.mode==="out-in";J&&(C.transition.afterLeave=V),M.isInFallback=!0,m(C,R,null,!0),J||V()},move(I,A,C){M.activeBranch&&f(M.activeBranch,I,A,C),M.container=I},next(){return M.activeBranch&&g(M.activeBranch)},registerDep(I,A,C){const R=!!M.pendingBranch;R&&M.deps++;const O=I.vnode.el;I.asyncDep.catch(k=>{Cg(k,I,0)}).then(k=>{if(I.isUnmounted||M.isUnmounted||M.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:L}=I;p6(I,k,!1),O&&(L.el=O);const V=!O&&I.subTree.el;A(I,L,b(O||I.subTree.el),O?null:g(I.subTree),M,o,C),V&&w(V),Z7(I,L.el),R&&--M.deps===0&&M.resolve()})},unmount(I,A){M.isUnmounted=!0,M.activeBranch&&m(M.activeBranch,i,I,A),M.pendingBranch&&m(M.pendingBranch,i,I,A)}};return M}function FZe(e,t,i,r,s,n,o,a,l){const u=t.suspense=Ope(t,r,i,e.parentNode,document.createElement("div"),null,s,n,o,a,!0),h=l(e,u.pendingBranch=t.ssContent,i,u,n,o);return u.deps===0&&u.resolve(!1,!0),h}function jZe(e){const{shapeFlag:t,children:i}=e,r=t&32;e.ssContent=RZ(r?i.default:i),e.ssFallback=r?RZ(i.fallback):Bt(Hr)}function RZ(e){let t;if(Mt(e)){const i=ug&&e._c;i&&(e._d=!1,Re()),e=e(),i&&(e._d=!0,t=$n,Lpe())}return st(e)&&(e=CZe(e)),e=So(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(i=>i!==e)),e}function Ppe(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):vA(e)}function i1(e,t){e.activeBranch=t;const{vnode:i,parentComponent:r}=e;let s=t.el;for(;!s&&t.component;)t=t.component.subTree,s=t.el;i.el=s,r&&r.subTree===i&&(r.vnode.el=s,Z7(r,s))}function UZe(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Ri=Symbol.for("v-fgt"),Yh=Symbol.for("v-txt"),Hr=Symbol.for("v-cmt"),Fy=Symbol.for("v-stc"),v2=[];let $n=null;function Re(e=!1){v2.push($n=e?null:[])}function Lpe(){v2.pop(),$n=v2[v2.length-1]||null}let ug=1;function u6(e){ug+=e,e<0&&$n&&($n.hasOnce=!0)}function Npe(e){return e.dynamicChildren=ug>0?$n||Oy:null,Lpe(),ug>0&&$n&&$n.push(e),e}function We(e,t,i,r,s,n){return Npe(Me(e,t,i,r,s,n,!0))}function Ji(e,t,i,r,s){return Npe(Bt(e,t,i,r,s,!0))}function xc(e){return e?e.__v_isVNode===!0:!1}function ql(e,t){return e.type===t.type&&e.key===t.key}function VZe(e){}const kpe=({key:e})=>e??null,OI=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?_i(e)||ui(e)||Mt(e)?{i:os,r:e,k:t,f:!!i}:e:null);function Me(e,t=null,i=null,r=0,s=null,n=e===Ri?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&kpe(t),ref:t&&OI(t),scopeId:JC,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:os};return a?(Y7(l,i),n&128&&e.normalize(l)):i&&(l.shapeFlag|=_i(i)?8:16),ug>0&&!o&&$n&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&$n.push(l),l}const Bt=GZe;function GZe(e,t=null,i=null,r=0,s=null,n=!1){if((!e||e===spe)&&(e=Hr),xc(e)){const a=Tc(e,t,!0);return i&&Y7(a,i),ug>0&&!n&&$n&&(a.shapeFlag&6?$n[$n.indexOf(e)]=a:$n.push(a)),a.patchFlag=-2,a}if(YZe(e)&&(e=e.__vccOpts),t){t=Dpe(t);let{class:a,style:l}=t;a&&!_i(a)&&(t.class=Cr(a)),Si(l)&&(WC(l)&&!st(l)&&(l=Li({},l)),t.style=Cf(l))}const o=_i(e)?1:xA(e)?128:Ghe(e)?64:Si(e)?4:Mt(e)?2:0;return Me(e,t,i,r,s,o,n,!0)}function Dpe(e){return e?WC(e)||dpe(e)?Li({},e):e:null}function Tc(e,t,i=!1,r=!1){const{props:s,ref:n,patchFlag:o,children:a,transition:l}=e,u=t?K7(s||{},t):s,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&kpe(u),ref:t&&t.ref?i&&n?st(n)?n.concat(OI(t)):[n,OI(t)]:OI(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ri?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Tc(e.ssContent),ssFallback:e.ssFallback&&Tc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&np(h,l.clone(h)),h}function Kh(e=" ",t=0){return Bt(Yh,null,e,t)}function BZe(e,t){const i=Bt(Fy,null,e);return i.staticCount=t,i}function sr(e="",t=!1){return t?(Re(),Ji(Hr,null,e)):Bt(Hr,null,e)}function So(e){return e==null||typeof e=="boolean"?Bt(Hr):st(e)?Bt(Ri,null,e.slice()):xc(e)?xd(e):Bt(Yh,null,String(e))}function xd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Tc(e)}function Y7(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(st(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Y7(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!dpe(t)?t._ctx=os:s===3&&os&&(os.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Mt(t)?(t={default:t,_ctx:os},i=32):(t=String(t),r&64?(i=16,t=[Kh(t)]):i=8);e.children=t,e.shapeFlag|=i}function K7(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Cr([t.class,r.class]));else if(s==="style")t.style=Cf([t.style,r.style]);else if(Sb(s)){const n=t[s],o=r[s];o&&n!==o&&!(st(n)&&n.includes(o))&&(t[s]=n?[].concat(n,o):o)}else s!==""&&(t[s]=r[s])}return t}function vo(e,t,i,r=null){ol(e,t,7,[i,r])}const zZe=lpe();let qZe=0;function Fpe(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||zZe,n={uid:qZe++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $7(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mpe(r,s),emitsOptions:Rpe(r,s),emit:null,emitted:null,propsDefaults:ei,inheritAttrs:r.inheritAttrs,ctx:ei,data:ei,props:ei,attrs:ei,slots:ei,refs:ei,setupState:ei,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=$Ze.bind(null,n),e.ce&&e.ce(n),n}let ss=null;const us=()=>ss||os;let TA,c6;{const e=M7(),t=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),n=>{s.length>1?s.forEach(o=>o(n)):s[0](n)}};TA=t("__VUE_INSTANCE_SETTERS__",i=>ss=i),c6=t("__VUE_SSR_SETTERS__",i=>Vx=i)}const cg=e=>{const t=ss;return TA(e),e.scope.on(),()=>{e.scope.off(),TA(t)}},h6=()=>{ss&&ss.scope.off(),TA(null)};function jpe(e){return e.vnode.shapeFlag&4}let Vx=!1;function Upe(e,t=!1,i=!1){t&&c6(t);const{props:r,children:s}=e.vnode,n=jpe(e);bZe(e,r,n,t),xZe(e,s,i);const o=n?HZe(e,t):void 0;return t&&c6(!1),o}function HZe(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,s6);const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?Gpe(e):null,n=cg(e);Rf();const o=Tb(r,e,0,[e.props,s]);if(Of(),n(),FC(o)){if(Jd(e)||G7(e),o.then(h6,h6),t)return o.then(a=>{p6(e,a,t)}).catch(a=>{Cg(a,e,0)});e.asyncDep=o}else p6(e,o,t)}else Vpe(e,t)}function p6(e,t,i){Mt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Si(t)&&(e.setupState=D7(t)),Vpe(e,i)}let EA,d6;function WZe(e){EA=e,d6=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,XJe))}}const JZe=()=>!EA;function Vpe(e,t,i){const r=e.type;if(!e.render){if(!t&&EA&&!r.render){const s=r.template||H7(e).template;if(s){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Li(Li({isCustomElement:n,delimiters:a},o),l);r.render=EA(s,u)}}e.render=r.render||Ka,d6&&d6(e)}{const s=cg(e);Rf();try{pZe(e)}finally{Of(),s()}}}const ZZe={get(e,t){return On(e,"get",""),e[t]}};function Gpe(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,ZZe),slots:e.slots,emit:e.emit,expose:t}}function Gx(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(D7(Jr(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in g2)return g2[i](e)},has(t,i){return i in t||i in g2}})):e.proxy}function f6(e,t=!0){return Mt(e)?e.displayName||e.name:e.name||t&&e.__name}function YZe(e){return Mt(e)&&"__vccOpts"in e}const Zt=(e,t)=>yJe(e,t,Vx);function Jl(e,t,i){const r=arguments.length;return r===2?Si(t)&&!st(t)?xc(t)?Bt(e,null,[t]):Bt(e,t):Bt(e,null,t):(r>3?i=Array.prototype.slice.call(arguments,2):r===3&&xc(i)&&(i=[i]),Bt(e,t,i))}function KZe(){}function XZe(e,t,i,r){const s=i[r];if(s&&Bpe(s,e))return s;const n=t();return n.memo=e.slice(),n.cacheIndex=r,i[r]=n}function Bpe(e,t){const i=e.memo;if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++)if(_n(i[r],t[r]))return!1;return ug>0&&$n&&$n.push(e),!0}const zpe="3.5.9",QZe=Ka,eYe=EJe,tYe=ev,iYe=Uhe,rYe={createComponentInstance:Fpe,setupComponent:Upe,renderComponentRoot:RI,setCurrentRenderingInstance:MS,isVNode:xc,normalizeVNode:So,getComponentPublicInstance:Gx,ensureValidVNode:q7,pushWarningContext:_Je,popWarningContext:SJe},sYe=rYe,nYe=null,oYe=null,aYe=null;/**
* @vue/runtime-dom v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let m6;const OZ=typeof window<"u"&&window.trustedTypes;if(OZ)try{m6=OZ.createPolicy("vue",{createHTML:e=>e})}catch{}const qpe=m6?e=>m6.createHTML(e):e=>e,lYe="http://www.w3.org/2000/svg",uYe="http://www.w3.org/1998/Math/MathML",Ih=typeof document<"u"?document:null,PZ=Ih&&Ih.createElement("template"),cYe={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t==="svg"?Ih.createElementNS(lYe,e):t==="mathml"?Ih.createElementNS(uYe,e):i?Ih.createElement(e,{is:i}):Ih.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Ih.createTextNode(e),createComment:e=>Ih.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ih.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,n){const o=i?i.previousSibling:t.lastChild;if(s&&(s===n||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===n||!(s=s.nextSibling)););else{PZ.innerHTML=qpe(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=PZ.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Cp="transition",cw="animation",R1=Symbol("_vtc"),Hpe={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Wpe=Li({},V7,Hpe),hYe=e=>(e.displayName="Transition",e.props=Wpe,e),X7=hYe((e,{slots:t})=>Jl(Whe,Jpe(e),t)),em=(e,t=[])=>{st(e)?e.forEach(i=>i(...t)):e&&e(...t)},LZ=e=>e?st(e)?e.some(t=>t.length>1):e.length>1:!1;function Jpe(e){const t={};for(const L in e)L in Hpe||(t[L]=e[L]);if(e.css===!1)return t;const{name:i="v",type:r,duration:s,enterFromClass:n=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:a=`${i}-enter-to`,appearFromClass:l=n,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:p=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:m=`${i}-leave-to`}=e,g=pYe(s),b=g&&g[0],w=g&&g[1],{onBeforeEnter:S,onEnter:T,onEnterCancelled:x,onLeave:_,onLeaveCancelled:M,onBeforeAppear:I=S,onAppear:A=T,onAppearCancelled:C=x}=t,R=(L,V,J)=>{ud(L,V?h:a),ud(L,V?u:o),J&&J()},O=(L,V)=>{L._isLeaving=!1,ud(L,p),ud(L,m),ud(L,f),V&&V()},k=L=>(V,J)=>{const y=L?A:T,E=()=>R(V,L,J);em(y,[V,E]),NZ(()=>{ud(V,L?l:n),bh(V,L?h:a),LZ(y)||kZ(V,r,b,E)})};return Li(t,{onBeforeEnter(L){em(S,[L]),bh(L,n),bh(L,o)},onBeforeAppear(L){em(I,[L]),bh(L,l),bh(L,u)},onEnter:k(!1),onAppear:k(!0),onLeave(L,V){L._isLeaving=!0;const J=()=>O(L,V);bh(L,p),bh(L,f),Ype(),NZ(()=>{L._isLeaving&&(ud(L,p),bh(L,m),LZ(_)||kZ(L,r,w,J))}),em(_,[L,J])},onEnterCancelled(L){R(L,!1),em(x,[L])},onAppearCancelled(L){R(L,!0),em(C,[L])},onLeaveCancelled(L){O(L),em(M,[L])}})}function pYe(e){if(e==null)return null;if(Si(e))return[qR(e.enter),qR(e.leave)];{const t=qR(e);return[t,t]}}function qR(e){return wS(e)}function bh(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[R1]||(e[R1]=new Set)).add(t)}function ud(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const i=e[R1];i&&(i.delete(t),i.size||(e[R1]=void 0))}function NZ(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let dYe=0;function kZ(e,t,i,r){const s=e._endId=++dYe,n=()=>{s===e._endId&&r()};if(i!=null)return setTimeout(n,i);const{type:o,timeout:a,propCount:l}=Zpe(e,t);if(!o)return r();const u=o+"end";let h=0;const p=()=>{e.removeEventListener(u,f),n()},f=m=>{m.target===e&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),e.addEventListener(u,f)}function Zpe(e,t){const i=window.getComputedStyle(e),r=g=>(i[g]||"").split(", "),s=r(`${Cp}Delay`),n=r(`${Cp}Duration`),o=DZ(s,n),a=r(`${cw}Delay`),l=r(`${cw}Duration`),u=DZ(a,l);let h=null,p=0,f=0;t===Cp?o>0&&(h=Cp,p=o,f=n.length):t===cw?u>0&&(h=cw,p=u,f=l.length):(p=Math.max(o,u),h=p>0?o>u?Cp:cw:null,f=h?h===Cp?n.length:l.length:0);const m=h===Cp&&/\b(transform|all)(,|$)/.test(r(`${Cp}Property`).toString());return{type:h,timeout:p,propCount:f,hasTransform:m}}function DZ(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,r)=>FZ(i)+FZ(e[r])))}function FZ(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ype(){return document.body.offsetHeight}function fYe(e,t,i){const r=e[R1];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const MA=Symbol("_vod"),Kpe=Symbol("_vsh"),Q7={beforeMount(e,{value:t},{transition:i}){e[MA]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):hw(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(e),hw(e,!0),r.enter(e)):r.leave(e,()=>{hw(e,!1)}):hw(e,t))},beforeUnmount(e,{value:t}){hw(e,t)}};function hw(e,t){e.style.display=t?e[MA]:"none",e[Kpe]=!t}function mYe(){Q7.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Xpe=Symbol("");function yYe(e){const t=us();if(!t)return;const i=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(n=>IA(n,s))},r=()=>{const s=e(t.proxy);t.ce?IA(t.ce,s):y6(t.subTree,s),i(s)};KC(()=>{Ipe(r)}),Nn(()=>{const s=new MutationObserver(r);s.observe(t.subTree.el.parentNode,{childList:!0}),Eb(()=>s.disconnect())})}function y6(e,t){if(e.shapeFlag&128){const i=e.suspense;e=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{y6(i.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)IA(e.el,t);else if(e.type===Ri)e.children.forEach(i=>y6(i,t));else if(e.type===Fy){let{el:i,anchor:r}=e;for(;i&&(IA(i,t),i!==r);)i=i.nextSibling}}function IA(e,t){if(e.nodeType===1){const i=e.style;let r="";for(const s in t)i.setProperty(`--${s}`,t[s]),r+=`--${s}: ${t[s]};`;i[Xpe]=r}}const gYe=/(^|;)\s*display\s*:/;function vYe(e,t,i){const r=e.style,s=_i(i);let n=!1;if(i&&!s){if(t)if(_i(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&PI(r,a,"")}else for(const o in t)i[o]==null&&PI(r,o,"");for(const o in i)o==="display"&&(n=!0),PI(r,o,i[o])}else if(s){if(t!==i){const o=r[Xpe];o&&(i+=";"+o),r.cssText=i,n=gYe.test(i)}}else t&&e.removeAttribute("style");MA in e&&(e[MA]=n?r.display:"",e[Kpe]&&(r.display="none"))}const jZ=/\s*!important$/;function PI(e,t,i){if(st(i))i.forEach(r=>PI(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=bYe(e,t);jZ.test(i)?e.setProperty(En(r),i.replace(jZ,""),"important"):e[r]=i}}const UZ=["Webkit","Moz","ms"],HR={};function bYe(e,t){const i=HR[t];if(i)return i;let r=zs(t);if(r!=="filter"&&r in e)return HR[t]=r;r=xb(r);for(let s=0;s<UZ.length;s++){const n=UZ[s]+r;if(n in e)return HR[t]=n}return t}const VZ="http://www.w3.org/1999/xlink";function GZ(e,t,i,r,s,n=che(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(VZ,t.slice(6,t.length)):e.setAttributeNS(VZ,t,i):i==null||n&&!A7(i)?e.removeAttribute(t):e.setAttribute(t,n?"":cu(i)?String(i):i)}function wYe(e,t,i,r){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?qpe(i):i);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,a=i==null?e.type==="checkbox"?"on":"":String(i);(o!==a||!("_value"in e))&&(e.value=a),i==null&&e.removeAttribute(t),e._value=i;return}let n=!1;if(i===""||i==null){const o=typeof e[t];o==="boolean"?i=A7(i):i==null&&o==="string"?(i="",n=!0):o==="number"&&(i=0,n=!0)}try{e[t]=i}catch{}n&&e.removeAttribute(t)}function Uh(e,t,i,r){e.addEventListener(t,i,r)}function _Ye(e,t,i,r){e.removeEventListener(t,i,r)}const BZ=Symbol("_vei");function SYe(e,t,i,r,s=null){const n=e[BZ]||(e[BZ]={}),o=n[t];if(r&&o)o.value=r;else{const[a,l]=xYe(t);if(r){const u=n[t]=MYe(r,s);Uh(e,a,u,l)}else o&&(_Ye(e,a,o,l),n[t]=void 0)}}const zZ=/(?:Once|Passive|Capture)$/;function xYe(e){let t;if(zZ.test(e)){t={};let r;for(;r=e.match(zZ);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):En(e.slice(2)),t]}let WR=0;const TYe=Promise.resolve(),EYe=()=>WR||(TYe.then(()=>WR=0),WR=Date.now());function MYe(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;ol(IYe(r,i.value),t,5,[r])};return i.value=e,i.attached=EYe(),i}function IYe(e,t){if(st(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const qZ=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,AYe=(e,t,i,r,s,n)=>{const o=s==="svg";t==="class"?fYe(e,r,o):t==="style"?vYe(e,i,r):Sb(t)?kC(t)||SYe(e,t,i,r,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$Ye(e,t,r,o))?(wYe(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&GZ(e,t,r,o,n,t!=="value")):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),GZ(e,t,r,o))};function $Ye(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&qZ(t)&&Mt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return qZ(t)&&_i(i)?!1:!!(t in e||e._isVueCE&&(/[A-Z]/.test(t)||!_i(i)))}const HZ={};/*! #__NO_SIDE_EFFECTS__ */function Qpe(e,t,i){const r=Xt(e,t);Nx(r)&&Li(r,t);class s extends QC{constructor(o){super(r,o,i)}}return s.def=r,s}/*! #__NO_SIDE_EFFECTS__ */const CYe=(e,t)=>Qpe(e,t,hde),RYe=typeof HTMLElement<"u"?HTMLElement:class{};class QC extends RYe{constructor(t,i={},r=hg){super(),this._def=t,this._props=i,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==hg?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof QC){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,Oc(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const s of r)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(r,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:n,styles:o}=r;let a;if(n&&!st(n))for(const l in n){const u=n[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=wS(this._props[l])),(a||(a=Object.create(null)))[zs(l)]=!0)}this._numberProps=a,s&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},i=this._def.__asyncLoader;i?this._pendingResolve=i().then(r=>t(this._def=r,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const i=this._instance&&this._instance.exposed;if(i)for(const r in i)li(this,r)||Object.defineProperty(this,r,{get:()=>lt(i[r])})}_resolveProps(t){const{props:i}=t,r=st(i)?i:Object.keys(i||{});for(const s of Object.keys(this))s[0]!=="_"&&r.includes(s)&&this._setProp(s,this[s]);for(const s of r.map(zs))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(n){this._setProp(s,n,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const i=this.hasAttribute(t);let r=i?this.getAttribute(t):HZ;const s=zs(t);i&&this._numberProps&&this._numberProps[s]&&(r=wS(r)),this._setProp(s,r,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,s=!1){i!==this._props[t]&&(i===HZ?delete this._props[t]:(this._props[t]=i,t==="key"&&this._app&&(this._app._ceVNode.key=i)),s&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(En(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(En(t),i+""):i||this.removeAttribute(En(t))))}_update(){w2(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const i=Bt(this._def,Li(t,this._props));return this._instance||(i.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const s=(n,o)=>{this.dispatchEvent(new CustomEvent(n,Nx(o[0])?Li({detail:o},o[0]):{detail:o}))};r.emit=(n,...o)=>{s(n,o),En(n)!==n&&s(En(n),o)},this._setParent()}),i}_applyStyles(t,i){if(!t)return;if(i){if(i===this._def||this._styleChildren.has(i))return;this._styleChildren.add(i)}const r=this._nonce;for(let s=t.length-1;s>=0;s--){const n=document.createElement("style");r&&n.setAttribute("nonce",r),n.textContent=t[s],this.shadowRoot.prepend(n)}}_parseSlots(){const t=this._slots={};let i;for(;i=this.firstChild;){const r=i.nodeType===1&&i.getAttribute("slot")||"default";(t[r]||(t[r]=[])).push(i),this.removeChild(i)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),i=this._instance.type.__scopeId;for(let r=0;r<t.length;r++){const s=t[r],n=s.getAttribute("name")||"default",o=this._slots[n],a=s.parentNode;if(o)for(const l of o){if(i&&l.nodeType===1){const u=i+"-s",h=document.createTreeWalker(l,1);l.setAttribute(u,"");let p;for(;p=h.nextNode();)p.setAttribute(u,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function ede(e){const t=us(),i=t&&t.ce;return i||null}function OYe(){const e=ede();return e&&e.shadowRoot}function PYe(e="$style"){{const t=us();if(!t)return ei;const i=t.type.__cssModules;if(!i)return ei;const r=i[e];return r||ei}}const tde=new WeakMap,ide=new WeakMap,AA=Symbol("_moveCb"),WZ=Symbol("_enterCb"),LYe=e=>(delete e.props.mode,e),NYe=LYe({name:"TransitionGroup",props:Li({},Wpe,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=us(),r=U7();let s,n;return jx(()=>{if(!s.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!jYe(s[0].el,i.vnode.el,o))return;s.forEach(kYe),s.forEach(DYe);const a=s.filter(FYe);Ype(),a.forEach(l=>{const u=l.el,h=u.style;bh(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=u[AA]=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",p),u[AA]=null,ud(u,o))};u.addEventListener("transitionend",p)})}),()=>{const o=kt(e),a=Jpe(o);let l=o.tag||Ri;if(s=[],n)for(let u=0;u<n.length;u++){const h=n[u];h.el&&h.el instanceof Element&&(s.push(h),np(h,C1(h,a,r,i)),tde.set(h,h.el.getBoundingClientRect()))}n=t.default?ZC(t.default()):[];for(let u=0;u<n.length;u++){const h=n[u];h.key!=null&&np(h,C1(h,a,r,i))}return Bt(l,null,n)}}}),ej=NYe;function kYe(e){const t=e.el;t[AA]&&t[AA](),t[WZ]&&t[WZ]()}function DYe(e){ide.set(e,e.el.getBoundingClientRect())}function FYe(e){const t=tde.get(e),i=ide.get(e),r=t.left-i.left,s=t.top-i.top;if(r||s){const n=e.el.style;return n.transform=n.webkitTransform=`translate(${r}px,${s}px)`,n.transitionDuration="0s",e}}function jYe(e,t,i){const r=e.cloneNode(),s=e[R1];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),i.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(r);const{hasTransform:o}=Zpe(r);return n.removeChild(r),o}const cf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return st(t)?i=>Ny(t,i):t};function UYe(e){e.target.composing=!0}function JZ(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qa=Symbol("_assign"),$A={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e[Qa]=cf(s);const n=r||s.props&&s.props.type==="number";Uh(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;i&&(a=a.trim()),n&&(a=bS(a)),e[Qa](a)}),i&&Uh(e,"change",()=>{e.value=e.value.trim()}),t||(Uh(e,"compositionstart",UYe),Uh(e,"compositionend",JZ),Uh(e,"change",JZ))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:s,number:n}},o){if(e[Qa]=cf(o),e.composing)return;const a=(n||e.type==="number")&&!/^0\d/.test(e.value)?bS(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||s&&e.value.trim()===l)||(e.value=l))}},tj={deep:!0,created(e,t,i){e[Qa]=cf(i),Uh(e,"change",()=>{const r=e._modelValue,s=O1(e),n=e.checked,o=e[Qa];if(st(r)){const a=kx(r,s),l=a!==-1;if(n&&!l)o(r.concat(s));else if(!n&&l){const u=[...r];u.splice(a,1),o(u)}}else if($f(r)){const a=new Set(r);n?a.add(s):a.delete(s),o(a)}else o(sde(e,n))})},mounted:ZZ,beforeUpdate(e,t,i){e[Qa]=cf(i),ZZ(e,t,i)}};function ZZ(e,{value:t},i){e._modelValue=t;let r;st(t)?r=kx(t,i.props.value)>-1:$f(t)?r=t.has(i.props.value):r=sp(t,sde(e,!0)),e.checked!==r&&(e.checked=r)}const ij={created(e,{value:t},i){e.checked=sp(t,i.props.value),e[Qa]=cf(i),Uh(e,"change",()=>{e[Qa](O1(e))})},beforeUpdate(e,{value:t,oldValue:i},r){e[Qa]=cf(r),t!==i&&(e.checked=sp(t,r.props.value))}},rde={deep:!0,created(e,{value:t,modifiers:{number:i}},r){const s=$f(t);Uh(e,"change",()=>{const n=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>i?bS(O1(o)):O1(o));e[Qa](e.multiple?s?new Set(n):n:n[0]),e._assigning=!0,Oc(()=>{e._assigning=!1})}),e[Qa]=cf(r)},mounted(e,{value:t}){YZ(e,t)},beforeUpdate(e,t,i){e[Qa]=cf(i)},updated(e,{value:t}){e._assigning||YZ(e,t)}};function YZ(e,t){const i=e.multiple,r=st(t);if(!(i&&!r&&!$f(t))){for(let s=0,n=e.options.length;s<n;s++){const o=e.options[s],a=O1(o);if(i)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=kx(t,a)>-1}else o.selected=t.has(a);else if(sp(O1(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function O1(e){return"_value"in e?e._value:e.value}function sde(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const nde={created(e,t,i){IE(e,t,i,null,"created")},mounted(e,t,i){IE(e,t,i,null,"mounted")},beforeUpdate(e,t,i,r){IE(e,t,i,r,"beforeUpdate")},updated(e,t,i,r){IE(e,t,i,r,"updated")}};function ode(e,t){switch(e){case"SELECT":return rde;case"TEXTAREA":return $A;default:switch(t){case"checkbox":return tj;case"radio":return ij;default:return $A}}}function IE(e,t,i,r,s){const o=ode(e.tagName,i.props&&i.props.type)[s];o&&o(e,t,i,r)}function VYe(){$A.getSSRProps=({value:e})=>({value:e}),ij.getSSRProps=({value:e},t)=>{if(t.props&&sp(t.props.value,e))return{checked:!0}},tj.getSSRProps=({value:e},t)=>{if(st(e)){if(t.props&&kx(e,t.props.value)>-1)return{checked:!0}}else if($f(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},nde.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const i=ode(t.type.toUpperCase(),t.props&&t.props.type);if(i.getSSRProps)return i.getSSRProps(e,t)}}const GYe=["ctrl","shift","alt","meta"],BYe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>GYe.some(i=>e[`${i}Key`]&&!t.includes(i))},e5=(e,t)=>{const i=e._withMods||(e._withMods={}),r=t.join(".");return i[r]||(i[r]=(s,...n)=>{for(let o=0;o<t.length;o++){const a=BYe[t[o]];if(a&&a(s,t))return}return e(s,...n)})},zYe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ade=(e,t)=>{const i=e._withKeys||(e._withKeys={}),r=t.join(".");return i[r]||(i[r]=s=>{if(!("key"in s))return;const n=En(s.key);if(t.some(o=>o===n||zYe[o]===n))return e(s)})},lde=Li({patchProp:AYe},cYe);let b2,KZ=!1;function ude(){return b2||(b2=wpe(lde))}function cde(){return b2=KZ?b2:_pe(lde),KZ=!0,b2}const w2=(...e)=>{ude().render(...e)},qYe=(...e)=>{cde().hydrate(...e)},hg=(...e)=>{const t=ude().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=dde(r);if(!s)return;const n=t._component;!Mt(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,pde(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t},hde=(...e)=>{const t=cde().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=dde(r);if(s)return i(s,!0,pde(s))},t};function pde(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function dde(e){return _i(e)?document.querySelector(e):e}let XZ=!1;const HYe=()=>{XZ||(XZ=!0,VYe(),mYe())},Bvt=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Whe,BaseTransitionPropsValidators:V7,Comment:Hr,DeprecationTypes:aYe,EffectScope:$7,ErrorCodes:TJe,ErrorTypeStrings:eYe,Fragment:Ri,KeepAlive:WJe,ReactiveEffect:_S,Static:Fy,Suspense:NZe,Teleport:Bhe,Text:Yh,TrackOpTypes:gJe,Transition:X7,TransitionGroup:ej,TriggerOpTypes:vJe,VueElement:QC,assertNumber:xJe,callWithAsyncErrorHandling:ol,callWithErrorHandling:Tb,camelize:zs,capitalize:xb,cloneVNode:Tc,compatUtils:oYe,computed:Zt,createApp:hg,createBlock:Ji,createCommentVNode:sr,createElementBlock:We,createElementVNode:Me,createHydrationRenderer:_pe,createPropsRestProxy:cZe,createRenderer:wpe,createSSRApp:hde,createSlots:YJe,createStaticVNode:BZe,createTextVNode:Kh,createVNode:Bt,customRef:Ohe,defineAsyncComponent:Zhe,defineComponent:Xt,defineCustomElement:Qpe,defineEmits:eZe,defineExpose:tZe,defineModel:sZe,defineOptions:iZe,defineProps:QJe,defineSSRCustomElement:CYe,defineSlots:rZe,devtools:tYe,effect:DWe,effectScope:VC,getCurrentInstance:us,getCurrentScope:C7,getCurrentWatcher:bJe,getTransitionRawChildren:ZC,guardReactiveProps:Dpe,h:Jl,handleError:Cg,hasInjectionContext:cpe,hydrate:qYe,hydrateOnIdle:UJe,hydrateOnInteraction:zJe,hydrateOnMediaQuery:BJe,hydrateOnVisible:GJe,initCustomFormatter:KZe,initDirectivesForSSR:HYe,inject:$s,isMemoSame:Bpe,isProxy:WC,isReactive:Xa,isReadonly:uf,isRef:ui,isRuntimeOnly:JZe,isShallow:fa,isVNode:xc,markRaw:Jr,mergeDefaults:lZe,mergeModels:uZe,mergeProps:K7,nextTick:Oc,normalizeClass:Cr,normalizeProps:lhe,normalizeStyle:Cf,onActivated:Yhe,onBeforeMount:KC,onBeforeUnmount:Pc,onBeforeUpdate:Qhe,onDeactivated:Khe,onErrorCaptured:rpe,onMounted:Nn,onRenderTracked:ipe,onRenderTriggered:tpe,onScopeDispose:fhe,onServerPrefetch:epe,onUnmounted:Eb,onUpdated:jx,onWatcherCleanup:Nhe,openBlock:Re,popScopeId:$Je,provide:upe,proxyRefs:D7,pushScopeId:AJe,queuePostFlushCb:vA,reactive:Js,readonly:N7,ref:_e,registerRuntimeCompiler:WZe,render:w2,renderList:Rg,renderSlot:tc,resolveComponent:qr,resolveDirective:Ii,resolveDynamicComponent:npe,resolveFilter:nYe,resolveTransitionHooks:C1,setBlockTracking:u6,setDevtoolsHook:iYe,setTransitionHooks:np,shallowReactive:Che,shallowReadonly:oJe,shallowRef:Dx,ssrContextKey:Epe,ssrUtils:sYe,stop:FWe,toDisplayString:Ui,toHandlerKey:e1,toHandlers:KJe,toRaw:kt,toRef:fJe,toRefs:Phe,toValue:uJe,transformVNodeArgs:VZe,triggerRef:lJe,unref:lt,useAttrs:aZe,useCssModule:PYe,useCssVars:yYe,useHost:ede,useId:NJe,useModel:AZe,useSSRContext:Mpe,useShadowRoot:OYe,useSlots:oZe,useTemplateRef:i6,useTransitionState:U7,vModelCheckbox:tj,vModelDynamic:nde,vModelRadio:ij,vModelSelect:rde,vModelText:$A,vShow:Q7,version:zpe,warn:QZe,watch:qs,watchEffect:MZe,watchPostEffect:Ipe,watchSyncEffect:Ape,withAsyncContext:hZe,withCtx:Yr,withDefaults:nZe,withDirectives:Mi,withKeys:ade,withMemo:XZe,withModifiers:e5,withScopeId:CJe},Symbol.toStringTag,{value:"Module"}));var WYe=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let fde;const t5=e=>fde=e,mde=Symbol();function g6(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var _2;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(_2||(_2={}));function JYe(){const e=VC(!0),t=e.run(()=>_e({}));let i=[],r=[];const s=Jr({install(n){t5(s),s._a=n,n.provide(mde,s),n.config.globalProperties.$pinia=s,r.forEach(o=>i.push(o)),r=[]},use(n){return!this._a&&!WYe?r.push(n):i.push(n),this},_p:i,_a:null,_e:e,_s:new Map,state:t});return s}const yde=()=>{};function QZ(e,t,i,r=yde){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};return!i&&C7()&&fhe(s),s}function i0(e,...t){e.slice().forEach(i=>{i(...t)})}const ZYe=e=>e();function v6(e,t){e instanceof Map&&t instanceof Map&&t.forEach((i,r)=>e.set(r,i)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const i in t){if(!t.hasOwnProperty(i))continue;const r=t[i],s=e[i];g6(s)&&g6(r)&&e.hasOwnProperty(i)&&!ui(r)&&!Xa(r)?e[i]=v6(s,r):e[i]=r}return e}const YYe=Symbol();function KYe(e){return!g6(e)||!e.hasOwnProperty(YYe)}const{assign:cd}=Object;function XYe(e){return!!(ui(e)&&e.effect)}function QYe(e,t,i,r){const{state:s,actions:n,getters:o}=t,a=i.state.value[e];let l;function u(){a||(i.state.value[e]=s?s():{});const h=Phe(i.state.value[e]);return cd(h,n,Object.keys(o||{}).reduce((p,f)=>(p[f]=Jr(Zt(()=>{t5(i);const m=i._s.get(e);return o[f].call(m,m)})),p),{}))}return l=gde(e,u,t,i,r,!0),l}function gde(e,t,i={},r,s,n){let o;const a=cd({actions:{}},i),l={deep:!0};let u,h,p=[],f=[],m;const g=r.state.value[e];!n&&!g&&(r.state.value[e]={}),_e({});let b;function w(C){let R;u=h=!1,typeof C=="function"?(C(r.state.value[e]),R={type:_2.patchFunction,storeId:e,events:m}):(v6(r.state.value[e],C),R={type:_2.patchObject,payload:C,storeId:e,events:m});const O=b=Symbol();Oc().then(()=>{b===O&&(u=!0)}),h=!0,i0(p,R,r.state.value[e])}const S=n?function(){const{state:R}=i,O=R?R():{};this.$patch(k=>{cd(k,O)})}:yde;function T(){o.stop(),p=[],f=[],r._s.delete(e)}function x(C,R){return function(){t5(r);const O=Array.from(arguments),k=[],L=[];function V(E){k.push(E)}function J(E){L.push(E)}i0(f,{args:O,name:C,store:M,after:V,onError:J});let y;try{y=R.apply(this&&this.$id===e?this:M,O)}catch(E){throw i0(L,E),E}return y instanceof Promise?y.then(E=>(i0(k,E),E)).catch(E=>(i0(L,E),Promise.reject(E))):(i0(k,y),y)}}const _={_p:r,$id:e,$onAction:QZ.bind(null,f),$patch:w,$reset:S,$subscribe(C,R={}){const O=QZ(p,C,R.detached,()=>k()),k=o.run(()=>qs(()=>r.state.value[e],L=>{(R.flush==="sync"?h:u)&&C({storeId:e,type:_2.direct,events:m},L)},cd({},l,R)));return O},$dispose:T},M=Js(_);r._s.set(e,M);const A=(r._a&&r._a.runWithContext||ZYe)(()=>r._e.run(()=>(o=VC()).run(t)));for(const C in A){const R=A[C];if(ui(R)&&!XYe(R)||Xa(R))n||(g&&KYe(R)&&(ui(R)?R.value=g[C]:v6(R,g[C])),r.state.value[e][C]=R);else if(typeof R=="function"){const O=x(C,R);A[C]=O,a.actions[C]=R}}return cd(M,A),cd(kt(M),A),Object.defineProperty(M,"$state",{get:()=>r.state.value[e],set:C=>{w(R=>{cd(R,C)})}}),r._p.forEach(C=>{cd(M,o.run(()=>C({store:M,app:r._a,pinia:r,options:a})))}),g&&n&&i.hydrate&&i.hydrate(M.$state,g),u=!0,h=!0,M}function vr(e,t,i){let r,s;const n=typeof t=="function";typeof e=="string"?(r=e,s=n?i:t):(s=e,r=e.id);function o(a,l){const u=cpe();return a=a||(u?$s(mde,null):null),a&&t5(a),a=fde,a._s.has(r)||(n?gde(r,t,s,a):QYe(r,s,a)),a._s.get(r)}return o.$id=r,o}const CA=vr("appbar",()=>{const e=_e({}),t=_e([]),i=_e([]),r=Zt(()=>t.value.map(o=>o.map(a=>e.value[a]).filter(a=>{if(typeof a=="string"||a.componentId)return!0})).filter(o=>o.length>0));function s(o){i.value.includes(o)||i.value.push(o)}function n(o){const a=i.value.indexOf(o);a!==-1&&i.value.splice(a,1),o in e.value&&delete e.value[o],t.value.forEach(l=>{const u=l.indexOf(o);u!==-1&&l.splice(u,1)})}return{items:e,order:t,temporary:i,visible:r,addTempButton:s,removeButton:n}}),b6=vr("grid",()=>{const e=_e({}),t=_e(),i=_e();function r(a){e.value={...e.value,[a.id]:a}}function s(a){e.value[a]!==void 0&&delete e.value[a]}function n(a){return Object.keys(e.value).find(l=>e.value[l].layerIds.includes(a))}function o(a,l){e.value[a].layerIds=e.value[a].layerIds.filter(u=>u!==l)}return{grids:e,panel:t,currentId:i,addGrid:r,removeGrid:s,getGridId:n,removeLayer:o}});function wy(e,t,i,r){var s,n=!1,o=0;function a(){s&&clearTimeout(s)}function l(){a(),n=!0}typeof t!="boolean"&&(r=i,i=t,t=void 0);function u(){for(var h=arguments.length,p=new Array(h),f=0;f<h;f++)p[f]=arguments[f];var m=this,g=Date.now()-o;if(n)return;function b(){o=Date.now(),i.apply(m,p)}function w(){s=void 0}r&&!s&&b(),a(),r===void 0&&g>e?b():t!==!0&&(s=setTimeout(r?w:b,r===void 0?e-g:e))}return u.cancel=l,u}function RA(e,t,i){return i===void 0?wy(e,t,!1):wy(e,i,t!==!1)}const Fd=vr("map-caption",()=>{const e=_e({text:{},logo:{}}),t=_e({}),i=_e({}),r=_e({});function s(o){o!==void 0?t.value.isImperialScale=o:t.value.isImperialScale=!t.value.isImperialScale}function n(o){e.value.text.value=o.text.value,e.value.text.disabled=o.text.disabled,e.value.logo.altText=o.logo.altText,e.value.logo.link=o.logo.link,e.value.logo.value=o.logo.value,e.value.logo.disabled=o.logo.disabled}return{attribution:e,scale:t,coords:i,langtoggle:r,toggleScale:s,setAttribution:n}}),JR=(e,t)=>{const i=[...e];for(;i.length>0;){const r=i.shift();if(t(r))return r;r&&i.push(...r.sublayers)}},ic=vr("layer",()=>{const e=_e([]),t=_e([]),i=_e([]);function r(p){return JR(e.value,f=>f?.uid===p)}function s(p){return JR(e.value,f=>f?.id===p)}function n(p){return JR(e.value,f=>f!==void 0&&(f.id===p||f.uid===p))}function o(p){t.value=[...t.value,p]}function a(p,f=void 0){e.value=[...e.value,p],p.mapLayer&&((f===void 0||f<0)&&(console.error("Map layer added to store with invalid index!"),f=i.value.length),i.value.splice(f,0,p.id),i.value=[...i.value])}function l(p,f){if(!p.mapLayer){console.error("Data layer passed to layer store reorder");return}if(f<0){console.error("Negative index passed to layer store reorder");return}f>=i.value.length&&(f=i.value.length-1);const m=i.value.findIndex(g=>g===p.id);m!==-1&&m!==f&&(i.value.splice(m,1),i.value.splice(f,0,p.id),i.value=[...i.value])}function u(p){const f=e.value.filter(m=>m.id!==p.id||m.uid!==p.uid);if(e.value=f,p.mapLayer){const m=i.value.filter(g=>g!==p.id);i.value=m}}function h(p){const f=t.value.filter(m=>m.id!==p);t.value=f}return{layers:e,mapOrder:i,layerConfigs:t,getLayerByUid:r,getLayerById:s,getLayerByAny:n,addLayerConfig:o,addLayer:a,reorderLayer:l,removeLayer:u,removeLayerConfig:h}}),Eo=vr("config",()=>{const e=_e({map:{lodSets:[],extentSets:[],tileSchemas:[],basemaps:[],initialBasemapId:""},fixtures:{},layers:[]}),t=_e([]),i=_e(),r=_e({}),s=_e({});function n(l){if(r.value[s.value[l]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return r.value[s.value[l]]}function o(l){const u={...e.value,...l};if(e.value=u,Array.isArray(e.value.layers)){const h=ic();h.layerConfigs=[...h.layerConfigs,e.value.layers]}}function a(l){const u=l.configLangs,h=l.config,p=l.allLangs;u!==void 0&&u.length>0&&u.forEach(f=>{r.value[f]=h,s.value[f]=f}),p!==void 0&&p.length>0&&p.forEach(f=>{s.value[f]=Object.keys(r.value)[0]})}return{config:e,startingFixtures:t,activeBasemapConfig:i,registeredConfigs:r,registeredLangs:s,getActiveConfig:n,newConfig:o,registerConfig:a}}),vde=vr("details",()=>{const e=_e([]),t=_e({}),i=_e({}),r=_e(),s=_e(0),n=_e(0),o=_e(!0),a=_e();function l(h){const p=e.value.findIndex(f=>f.uid===h.uid);p!==-1&&e.value.splice(p,1)}function u(h){t.value={...t.value,[h.id]:h}}return{payload:e,properties:t,defaultTemplates:i,currentFeatureId:r,activeGreedy:s,lastHilight:n,hilightToggle:o,origin:a,removeLayer:l,addConfigProperty:u}}),Va=vr("fixture",()=>{const e=_e({}),t=_e({});function i(o){return o.map(a=>t.value[a].getPromise())}function r(o){if(e.value={...e.value,[o.id]:Jr(o)},o.id in t.value)t.value[o.id].resolveMe(Jr(o));else{const a=new Wr;a.resolveMe(Jr(o)),t.value={...t.value,[o.id]:a}}typeof o.added=="function"&&o.added()}function s(o){delete e.value[o.id],e.value={...e.value},delete t.value[o.id],t.value={...t.value},typeof o.removed=="function"&&o.removed()}function n(o){t.value={...t.value,[o]:new Wr}}return{items:e,loadPromises:t,getLoadPromises:i,addFixture:r,removeFixture:s,addLoadPromise:n}});var ot=(e=>(e.APPBAR_BUTTON_CLICK="appbar/click",e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_TOGGLE="details/toggle",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LANG_CHANGE="lang/change",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",e.LAYER_LAYERSTATECHANGE="layer/layerstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_FOCUS="map/focus",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSELEAVE="map/mouseleave",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_TOGGLE="metadata/toggle",e.PANEL_CLOSED="panel/closed",e.PANEL_MINIMIZED="panel/minimized",e.PANEL_OPENED="panel/opened",e.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",e.REORDER_TOGGLE="reorder/toggle",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_TOGGLE="wizard/toggle",e))(ot||{}),w6=(e=>(e.CONFIG_CHANGE_UPDATES_MAP_ATTRIBS="ramp_config_change_updates_map_attribs",e.LAYER_ERROR_UPDATES_LEGEND="ramp_layer_error_updates_legend",e.LAYER_REGISTER_BINDS_LEGEND="ramp_layer_register_binds_legend",e.LAYER_RELOAD_END_BINDS_LEGEND="ramp_layer_reload_end_binds_legend",e.LAYER_RELOAD_START_UPDATES_LEGEND="ramp_layer_reload_start_updates_legend",e.LAYER_REMOVE_UPDATES_DETAILS="ramp_layer_remove_updates_details",e.LAYER_REMOVE_CHECKS_GRID="ramp_layer_remove_checks_grid",e.LAYER_REMOVE_UPDATES_LEGEND="ramp_layer_remove_updates_legend",e.LAYER_USERADD_UPDATES_LEGEND="ramp_layer_useradd_updates_legend",e.MAP_BASEMAP_CHECKS_TILE_PROJ="ramp_map_basemap_checks_tile_proj",e.MAP_BASEMAP_UPDATES_MAP_ATTRIBS="ramp_map_basemap_updates_map_attribs",e.MAP_BLUR_UPDATES_KEY_HANDLER="ramp_map_blur_updates_key_handler",e.MAP_CLICK_RUNS_IDENTIFY="ramp_map_click_runs_identify",e.MAP_CREATED_INITIALIZES_FIXTURES="ramp_map_created_initializes_fixtures",e.MAP_CREATED_UPDATES_MAP_ATTRIBS="ramp_map_created_updates_map_attribs",e.MAP_EXTENT_UPDATES_MAPTIP="ramp_map_extent_updates_maptip",e.MAP_GRAPHICHIT_CREATES_MAPTIP="ramp_map_graphichit_creates_maptip",e.MAP_IDENTIFY_OPENS_IDENTIFY_RESULTS="ramp_map_identify_opens_identify_results",e.MAP_KEYDOWN_UPDATES_COORDS="ramp_map_keydown_updates_coords",e.MAP_KEYDOWN_UPDATES_KEY_HANDLER="ramp_map_keydown_updates_key_handler",e.MAP_KEYUP_UPDATES_KEY_HANDLER="ramp_map_keyup_updates_key_handler",e.MAP_MOUSE_UPDATES_COORDS="ramp_map_mouse_updates_coords",e.MAP_MOUSE_UPDATES_MAPTIP="ramp_map_mouse_updates_maptip",e.MAP_MOUSELEAVE_REMOVES_MAPTIP="ramp_map_mouseleave_removes_maptip",e.MAP_RESIZE_UPDATES_SCALEBAR="ramp_map_resize_updates_scalebar",e.MAP_SCALE_UPDATES_SCALEBAR="ramp_map_scale_updates_scalebar",e.PANEL_CLOSE_UPDATES_APPBAR="ramp_panel_close_updates_appbar",e.PANEL_OPEN_UPDATES_APPBAR="ramp_panel_open_updates_appbar",e.TOGGLE_DETAILS="ramp_toggle_details",e.TOGGLE_GRID="ramp_toggle_grid",e.TOGGLE_HELP="ramp_toggle_help",e.TOGGLE_METADATA="ramp_toggle_metadata",e.TOGGLE_REORDER="ramp_toggle_reorder",e.TOGGLE_SETTINGS="ramp_toggle_settings",e.TOGGLE_WIZARD="ramp_toggle_wizard",e))(w6||{});class eKe{eventName;handlerName;handlerFunc;constructor(t,i,r){this.eventName=t,this.handlerName=i,this.handlerFunc=r}}class tKe extends Kr{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new JHe.TinyEmitter,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(ot).filter(i=>typeof i=="string"&&i.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(i=>i.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(r=>{this._nameRegister.indexOf(r)===-1&&this._nameRegister.push(r)})}eventNames(){return this._nameRegister.slice()}on(t,i,r=""){if(this.findHandler(r))throw new Error("Duplicate handler name registration: "+r);r||(r=this.handlerNamer(t));const s=new eKe(t,r,i);return this._eventRegister.push(s),this._eventBus.on(t,i),r}off(t){const i=this.findHandler(t);i&&(this._eventRegister.splice(this._eventRegister.indexOf(i),1),this._eventBus.off(i.eventName,i.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(r=>this.off(r))}removeDefaultEvents(){Object.values(w6).forEach(t=>{this.off(t)})}emit(t,...i){this._eventBus.emit(t,...i)}once(t,i,r=""){r||(r=this.handlerNamer(t));const s=(...n)=>{i(...n),this.off(r)};return this.on(t,s,r)}activeHandlers(t=""){return t===""?this._eventRegister.map(i=>i.handlerName):this._eventRegister.filter(i=>i.eventName===t).map(i=>i.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=Object.values(w6)),t.map(i=>this.defaultHandlerFactory(i))}defaultHandlerFactory(t){let i;switch(t){case"ramp_config_change_updates_map_attribs":i=r=>{const s=r.map.basemaps.find(n=>n.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(s?.attribution)},this.$iApi.event.on("config/configchanged",i,t);break;case"ramp_layer_error_updates_legend":i=r=>{if(r.layer.layerState===Ar.ERROR){const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r.layer)}},this.$iApi.event.on("layer/layerstatechange",i,t);break;case"ramp_layer_register_binds_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r)},this.$iApi.event.on("layer/registered",i,t);break;case"ramp_layer_reload_end_binds_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(r)},this.$iApi.event.on("layer/reloadend",i,t);break;case"ramp_layer_reload_start_updates_legend":i=r=>{if(!r.isSublayer){const s=this.$iApi.fixture.get("legend");s&&s.reloadLayerItem(r.uid)}},this.$iApi.event.on("layer/reloadstart",i,t);break;case"ramp_layer_remove_checks_grid":i=r=>{if(this.$iApi.fixture.get("grid")){const s=b6(this.$vApp.$pinia),n=s.getGridId(r.id);if(n===void 0)return;if(s.removeLayer(n,r.id),s.grids[n].layerIds.length===0){s.removeGrid(n);const o=s.currentId;if(n===o){const a=this.$iApi.panel.get("grid");this.$iApi.panel.close(a),s.currentId=void 0}}}},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_remove_updates_details":i=r=>{const s=vde(this.$vApp.$pinia);this.$iApi.fixture.get("details")&&s.removeLayer(r)},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_remove_updates_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&(s.removeLayerItem(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("legend.alert.layerRemoved",{name:r.name})))},this.$iApi.event.on("layer/remove",i,t);break;case"ramp_layer_useradd_updates_legend":i=r=>{const s=this.$iApi.fixture.get("legend");s&&s.addLayerItem(r)},this.$iApi.event.on("user/layeradded",i,t);break;case"ramp_map_basemap_checks_tile_proj":i=r=>{r.schemaChanged&&this.$iApi.geo.layer.allLayers().filter(s=>s.layerType===ft.TILE).forEach(s=>{s.checkProj()})},this.$iApi.event.on("map/basemapchanged",i,t);break;case"ramp_map_basemap_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(Eo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.event.on("map/basemapchanged",i,t);break;case"ramp_map_blur_updates_key_handler":i=()=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",i,t);break;case"ramp_map_click_runs_identify":i=r=>{r.button===0&&this.$iApi.geo.map.runIdentify(r)},this.on("map/click",i,t);break;case"ramp_map_created_initializes_fixtures":i=()=>{const r=Va(this.$vApp.$pinia).items;Object.keys(r).forEach(s=>{r[s].initialized?.()})},this.$iApi.geo.map.created&&i(),this.$iApi.event.on("map/created",i,t);break;case"ramp_map_created_updates_map_attribs":i=()=>{this.$iApi.geo.map.caption.updateAttribution(Eo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.geo.map.created&&i(),this.$iApi.event.on("map/created",i,t);break;case"ramp_map_extent_updates_maptip":i=()=>{if(this.$iApi.geo.map.keysActive){const r=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(r)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",wy(50,!0,()=>i()),t);break;case"ramp_map_graphichit_creates_maptip":i=r=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(r)},this.$iApi.event.on("map/graphichit",i,t);break;case"ramp_map_identify_opens_identify_results":i=r=>{const s=this.$iApi.fixture.get("details");s&&s.openDetails(r.results)},this.on("map/identify",i,t);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",wy(50,()=>{const r=Fd(this.$vApp.$pinia);r.coords?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(n=>{r.coords={formattedString:n}})}),t);break;case"ramp_map_keydown_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyDown(r)},this.$iApi.event.on("map/keydown",i,t);break;case"ramp_map_keyup_updates_key_handler":i=r=>{this.$iApi.geo.map.mapKeyUp(r)},this.$iApi.event.on("map/keyup",i,t);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",wy(50,r=>{const s=Fd(this.$vApp.$pinia);s.coords?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(r)).then(o=>{s.coords={formattedString:o}})}),t);break;case"ramp_map_mouse_updates_maptip":i=r=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:r.screenX,screenY:r.screenY})},this.$iApi.event.on("map/mousemove",wy(50,r=>i(r)),t);break;case"ramp_map_mouseleave_removes_maptip":i=()=>{this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/mouseleave",i);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",RA(100,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",RA(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_panel_close_updates_appbar":i=r=>{const s=CA(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&!s.order.flat().find(n=>n===r.id)&&s.removeButton(r.id)},this.on("panel/closed",i,t);break;case"ramp_panel_open_updates_appbar":i=r=>{const s=CA(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&(!r.teleport||r.teleport?.showAppbarButton)&&!s.order.flat().find(n=>n===r.id)&&s.addTempButton(r.id)},this.on("panel/opened",i,t);break;case"ramp_toggle_details":i=(r,s)=>{const n=this.$iApi.fixture.get("details");n&&n.toggleFeature(r,s)},this.$iApi.event.on("details/toggle",i,t);break;case"ramp_toggle_grid":i=(r,s)=>{const n=this.$iApi.fixture.get("grid");n&&n.toggleGrid(r.id,s)},this.$iApi.event.on("grid/toggle",i,t);break;case"ramp_toggle_help":i=r=>{const s=this.$iApi.fixture.get("help");s&&s.toggleHelp(r)},this.$iApi.event.on("help/toggle",i,t);break;case"ramp_toggle_metadata":i=(r,s)=>{const n=this.$iApi.fixture.get("metadata");n&&n.toggleMetadata(r,s)},this.$iApi.event.on("metadata/toggle",i,t);break;case"ramp_toggle_reorder":i=r=>{const s=this.$iApi.fixture.get("layer-reorder");s&&s.toggleLayerReorder(r)},this.$iApi.event.on("reorder/toggle",i,t);break;case"ramp_toggle_settings":i=(r,s)=>{const n=this.$iApi.fixture.get("settings");n&&n.toggleSettings(r,s)},this.$iApi.event.on("settings/toggle",i,t);break;case"ramp_toggle_wizard":i=r=>{const s=this.$iApi.fixture.get("wizard");s&&s.toggleWizard(r)},this.$iApi.event.on("wizard/toggle",i,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}/*!
  * shared v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const OA=typeof window<"u",Pf=(e,t=!1)=>t?Symbol.for(e):Symbol(e),iKe=(e,t,i)=>rKe({l:e,k:t,s:i}),rKe=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),kr=e=>typeof e=="number"&&isFinite(e),sKe=e=>wde(e)==="[object Date]",hf=e=>wde(e)==="[object RegExp]",i5=e=>Nt(e)&&Object.keys(e).length===0,Hs=Object.assign,nKe=Object.create,Ei=(e=null)=>nKe(e);let eY;const Vh=()=>eY||(eY=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Ei());function tY(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const oKe=Object.prototype.hasOwnProperty;function Zl(e,t){return oKe.call(e,t)}const Zi=Array.isArray,ji=e=>typeof e=="function",qe=e=>typeof e=="string",Yt=e=>typeof e=="boolean",hi=e=>e!==null&&typeof e=="object",aKe=e=>hi(e)&&ji(e.then)&&ji(e.catch),bde=Object.prototype.toString,wde=e=>bde.call(e),Nt=e=>{if(!hi(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},lKe=e=>e==null?"":Zi(e)||Nt(e)&&e.toString===bde?JSON.stringify(e,null,2):String(e);function uKe(e,t=""){return e.reduce((i,r,s)=>s===0?i+r:i+t+r,"")}function r5(e){let t=e;return()=>++t}function cKe(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const AE=e=>!hi(e)||Zi(e);function LI(e,t){if(AE(e)||AE(t))throw new Error("Invalid value");const i=[{src:e,des:t}];for(;i.length;){const{src:r,des:s}=i.pop();Object.keys(r).forEach(n=>{n!=="__proto__"&&(hi(r[n])&&!hi(s[n])&&(s[n]=Array.isArray(r[n])?[]:Ei()),AE(s[n])||AE(r[n])?s[n]=r[n]:i.push({src:r[n],des:s[n]}))})}}/*!
  * message-compiler v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function hKe(e,t,i){return{line:e,column:t,offset:i}}function PA(e,t,i){return{start:e,end:t}}const pKe=/\{([0-9a-zA-Z]+)\}/g;function _de(e,...t){return t.length===1&&dKe(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(pKe,(i,r)=>t.hasOwnProperty(r)?t[r]:"")}const Sde=Object.assign,iY=e=>typeof e=="string",dKe=e=>e!==null&&typeof e=="object";function xde(e,t=""){return e.reduce((i,r,s)=>s===0?i+r:i+t+r,"")}const rj={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},fKe={[rj.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function mKe(e,t,...i){const r=_de(fKe[e],...i||[]),s={message:String(r),code:e};return t&&(s.location=t),s}const It={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},yKe={[It.EXPECTED_TOKEN]:"Expected token: '{0}'",[It.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[It.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[It.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[It.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[It.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[It.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[It.EMPTY_PLACEHOLDER]:"Empty placeholder",[It.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[It.INVALID_LINKED_FORMAT]:"Invalid linked format",[It.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[It.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[It.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[It.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[It.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[It.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Mb(e,t,i={}){const{domain:r,messages:s,args:n}=i,o=_de((s||yKe)[e]||"",...n||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=r,a}function gKe(e){throw e}const Vc=" ",vKe="\r",Gn=`
`,bKe="\u2028",wKe="\u2029";function _Ke(e){const t=e;let i=0,r=1,s=1,n=0;const o=A=>t[A]===vKe&&t[A+1]===Gn,a=A=>t[A]===Gn,l=A=>t[A]===wKe,u=A=>t[A]===bKe,h=A=>o(A)||a(A)||l(A)||u(A),p=()=>i,f=()=>r,m=()=>s,g=()=>n,b=A=>o(A)||l(A)||u(A)?Gn:t[A],w=()=>b(i),S=()=>b(i+n);function T(){return n=0,h(i)&&(r++,s=0),o(i)&&i++,i++,s++,t[i]}function x(){return o(i+n)&&n++,n++,t[i+n]}function _(){i=0,r=1,s=1,n=0}function M(A=0){n=A}function I(){const A=i+n;for(;A!==i;)T();n=0}return{index:p,line:f,column:m,peekOffset:g,charAt:b,currentChar:w,currentPeek:S,next:T,peek:x,reset:_,resetPeek:M,skipToPeek:I}}const Rp=void 0,SKe=".",rY="'",xKe="tokenizer";function TKe(e,t={}){const i=t.location!==!1,r=_Ke(e),s=()=>r.index(),n=()=>hKe(r.line(),r.column(),r.index()),o=n(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:h}=t;function p(N,U,H,...ne){const me=u();if(U.column+=H,U.offset+=H,h){const pe=i?PA(me.startLoc,U):null,Z=Mb(N,pe,{domain:xKe,args:ne});h(Z)}}function f(N,U,H){N.endLoc=n(),N.currentType=U;const ne={type:U};return i&&(ne.loc=PA(N.startLoc,N.endLoc)),H!=null&&(ne.value=H),ne}const m=N=>f(N,14);function g(N,U){return N.currentChar()===U?(N.next(),U):(p(It.EXPECTED_TOKEN,n(),0,U),"")}function b(N){let U="";for(;N.currentPeek()===Vc||N.currentPeek()===Gn;)U+=N.currentPeek(),N.peek();return U}function w(N){const U=b(N);return N.skipToPeek(),U}function S(N){if(N===Rp)return!1;const U=N.charCodeAt(0);return U>=97&&U<=122||U>=65&&U<=90||U===95}function T(N){if(N===Rp)return!1;const U=N.charCodeAt(0);return U>=48&&U<=57}function x(N,U){const{currentType:H}=U;if(H!==2)return!1;b(N);const ne=S(N.currentPeek());return N.resetPeek(),ne}function _(N,U){const{currentType:H}=U;if(H!==2)return!1;b(N);const ne=N.currentPeek()==="-"?N.peek():N.currentPeek(),me=T(ne);return N.resetPeek(),me}function M(N,U){const{currentType:H}=U;if(H!==2)return!1;b(N);const ne=N.currentPeek()===rY;return N.resetPeek(),ne}function I(N,U){const{currentType:H}=U;if(H!==8)return!1;b(N);const ne=N.currentPeek()===".";return N.resetPeek(),ne}function A(N,U){const{currentType:H}=U;if(H!==9)return!1;b(N);const ne=S(N.currentPeek());return N.resetPeek(),ne}function C(N,U){const{currentType:H}=U;if(!(H===8||H===12))return!1;b(N);const ne=N.currentPeek()===":";return N.resetPeek(),ne}function R(N,U){const{currentType:H}=U;if(H!==10)return!1;const ne=()=>{const pe=N.currentPeek();return pe==="{"?S(N.peek()):pe==="@"||pe==="%"||pe==="|"||pe===":"||pe==="."||pe===Vc||!pe?!1:pe===Gn?(N.peek(),ne()):L(N,!1)},me=ne();return N.resetPeek(),me}function O(N){b(N);const U=N.currentPeek()==="|";return N.resetPeek(),U}function k(N){const U=b(N),H=N.currentPeek()==="%"&&N.peek()==="{";return N.resetPeek(),{isModulo:H,hasSpace:U.length>0}}function L(N,U=!0){const H=(me=!1,pe="",Z=!1)=>{const te=N.currentPeek();return te==="{"?pe==="%"?!1:me:te==="@"||!te?pe==="%"?!0:me:te==="%"?(N.peek(),H(me,"%",!0)):te==="|"?pe==="%"||Z?!0:!(pe===Vc||pe===Gn):te===Vc?(N.peek(),H(!0,Vc,Z)):te===Gn?(N.peek(),H(!0,Gn,Z)):!0},ne=H();return U&&N.resetPeek(),ne}function V(N,U){const H=N.currentChar();return H===Rp?Rp:U(H)?(N.next(),H):null}function J(N){const U=N.charCodeAt(0);return U>=97&&U<=122||U>=65&&U<=90||U>=48&&U<=57||U===95||U===36}function y(N){return V(N,J)}function E(N){const U=N.charCodeAt(0);return U>=97&&U<=122||U>=65&&U<=90||U>=48&&U<=57||U===95||U===36||U===45}function $(N){return V(N,E)}function P(N){const U=N.charCodeAt(0);return U>=48&&U<=57}function G(N){return V(N,P)}function Q(N){const U=N.charCodeAt(0);return U>=48&&U<=57||U>=65&&U<=70||U>=97&&U<=102}function se(N){return V(N,Q)}function ie(N){let U="",H="";for(;U=G(N);)H+=U;return H}function ye(N){w(N);const U=N.currentChar();return U!=="%"&&p(It.EXPECTED_TOKEN,n(),0,U),N.next(),"%"}function Pe(N){let U="";for(;;){const H=N.currentChar();if(H==="{"||H==="}"||H==="@"||H==="|"||!H)break;if(H==="%")if(L(N))U+=H,N.next();else break;else if(H===Vc||H===Gn)if(L(N))U+=H,N.next();else{if(O(N))break;U+=H,N.next()}else U+=H,N.next()}return U}function Ie(N){w(N);let U="",H="";for(;U=$(N);)H+=U;return N.currentChar()===Rp&&p(It.UNTERMINATED_CLOSING_BRACE,n(),0),H}function we(N){w(N);let U="";return N.currentChar()==="-"?(N.next(),U+=`-${ie(N)}`):U+=ie(N),N.currentChar()===Rp&&p(It.UNTERMINATED_CLOSING_BRACE,n(),0),U}function De(N){return N!==rY&&N!==Gn}function Ze(N){w(N),g(N,"'");let U="",H="";for(;U=V(N,De);)U==="\\"?H+=et(N):H+=U;const ne=N.currentChar();return ne===Gn||ne===Rp?(p(It.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,n(),0),ne===Gn&&(N.next(),g(N,"'")),H):(g(N,"'"),H)}function et(N){const U=N.currentChar();switch(U){case"\\":case"'":return N.next(),`\\${U}`;case"u":return nt(N,U,4);case"U":return nt(N,U,6);default:return p(It.UNKNOWN_ESCAPE_SEQUENCE,n(),0,U),""}}function nt(N,U,H){g(N,U);let ne="";for(let me=0;me<H;me++){const pe=se(N);if(!pe){p(It.INVALID_UNICODE_ESCAPE_SEQUENCE,n(),0,`\\${U}${ne}${N.currentChar()}`);break}ne+=pe}return`\\${U}${ne}`}function $t(N){return N!=="{"&&N!=="}"&&N!==Vc&&N!==Gn}function zt(N){w(N);let U="",H="";for(;U=V(N,$t);)H+=U;return H}function Y(N){let U="",H="";for(;U=y(N);)H+=U;return H}function B(N){const U=H=>{const ne=N.currentChar();return ne==="{"||ne==="%"||ne==="@"||ne==="|"||ne==="("||ne===")"||!ne||ne===Vc?H:(H+=ne,N.next(),U(H))};return U("")}function re(N){w(N);const U=g(N,"|");return w(N),U}function fe(N,U){let H=null;switch(N.currentChar()){case"{":return U.braceNest>=1&&p(It.NOT_ALLOW_NEST_PLACEHOLDER,n(),0),N.next(),H=f(U,2,"{"),w(N),U.braceNest++,H;case"}":return U.braceNest>0&&U.currentType===2&&p(It.EMPTY_PLACEHOLDER,n(),0),N.next(),H=f(U,3,"}"),U.braceNest--,U.braceNest>0&&w(N),U.inLinked&&U.braceNest===0&&(U.inLinked=!1),H;case"@":return U.braceNest>0&&p(It.UNTERMINATED_CLOSING_BRACE,n(),0),H=ve(N,U)||m(U),U.braceNest=0,H;default:{let me=!0,pe=!0,Z=!0;if(O(N))return U.braceNest>0&&p(It.UNTERMINATED_CLOSING_BRACE,n(),0),H=f(U,1,re(N)),U.braceNest=0,U.inLinked=!1,H;if(U.braceNest>0&&(U.currentType===5||U.currentType===6||U.currentType===7))return p(It.UNTERMINATED_CLOSING_BRACE,n(),0),U.braceNest=0,D(N,U);if(me=x(N,U))return H=f(U,5,Ie(N)),w(N),H;if(pe=_(N,U))return H=f(U,6,we(N)),w(N),H;if(Z=M(N,U))return H=f(U,7,Ze(N)),w(N),H;if(!me&&!pe&&!Z)return H=f(U,13,zt(N)),p(It.INVALID_TOKEN_IN_PLACEHOLDER,n(),0,H.value),w(N),H;break}}return H}function ve(N,U){const{currentType:H}=U;let ne=null;const me=N.currentChar();switch((H===8||H===9||H===12||H===10)&&(me===Gn||me===Vc)&&p(It.INVALID_LINKED_FORMAT,n(),0),me){case"@":return N.next(),ne=f(U,8,"@"),U.inLinked=!0,ne;case".":return w(N),N.next(),f(U,9,".");case":":return w(N),N.next(),f(U,10,":");default:return O(N)?(ne=f(U,1,re(N)),U.braceNest=0,U.inLinked=!1,ne):I(N,U)||C(N,U)?(w(N),ve(N,U)):A(N,U)?(w(N),f(U,12,Y(N))):R(N,U)?(w(N),me==="{"?fe(N,U)||ne:f(U,11,B(N))):(H===8&&p(It.INVALID_LINKED_FORMAT,n(),0),U.braceNest=0,U.inLinked=!1,D(N,U))}}function D(N,U){let H={type:14};if(U.braceNest>0)return fe(N,U)||m(U);if(U.inLinked)return ve(N,U)||m(U);switch(N.currentChar()){case"{":return fe(N,U)||m(U);case"}":return p(It.UNBALANCED_CLOSING_BRACE,n(),0),N.next(),f(U,3,"}");case"@":return ve(N,U)||m(U);default:{if(O(N))return H=f(U,1,re(N)),U.braceNest=0,U.inLinked=!1,H;const{isModulo:me,hasSpace:pe}=k(N);if(me)return pe?f(U,0,Pe(N)):f(U,4,ye(N));if(L(N))return f(U,0,Pe(N));break}}return H}function q(){const{currentType:N,offset:U,startLoc:H,endLoc:ne}=l;return l.lastType=N,l.lastOffset=U,l.lastStartLoc=H,l.lastEndLoc=ne,l.offset=s(),l.startLoc=n(),r.currentChar()===Rp?f(l,14):D(r,l)}return{nextToken:q,currentOffset:s,currentPosition:n,context:u}}const EKe="parser",MKe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function IKe(e,t,i){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(t||i,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function AKe(e={}){const t=e.location!==!1,{onError:i,onWarn:r}=e;function s(x,_,M,I,...A){const C=x.currentPosition();if(C.offset+=I,C.column+=I,i){const R=t?PA(M,C):null,O=Mb(_,R,{domain:EKe,args:A});i(O)}}function n(x,_,M,I,...A){const C=x.currentPosition();if(C.offset+=I,C.column+=I,r){const R=t?PA(M,C):null;r(mKe(_,R,A))}}function o(x,_,M){const I={type:x};return t&&(I.start=_,I.end=_,I.loc={start:M,end:M}),I}function a(x,_,M,I){t&&(x.end=_,x.loc&&(x.loc.end=M))}function l(x,_){const M=x.context(),I=o(3,M.offset,M.startLoc);return I.value=_,a(I,x.currentOffset(),x.currentPosition()),I}function u(x,_){const M=x.context(),{lastOffset:I,lastStartLoc:A}=M,C=o(5,I,A);return C.index=parseInt(_,10),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function h(x,_,M){const I=x.context(),{lastOffset:A,lastStartLoc:C}=I,R=o(4,A,C);return R.key=_,M===!0&&(R.modulo=!0),x.nextToken(),a(R,x.currentOffset(),x.currentPosition()),R}function p(x,_){const M=x.context(),{lastOffset:I,lastStartLoc:A}=M,C=o(9,I,A);return C.value=_.replace(MKe,IKe),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function f(x){const _=x.nextToken(),M=x.context(),{lastOffset:I,lastStartLoc:A}=M,C=o(8,I,A);return _.type!==12?(s(x,It.UNEXPECTED_EMPTY_LINKED_MODIFIER,M.lastStartLoc,0),C.value="",a(C,I,A),{nextConsumeToken:_,node:C}):(_.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,bl(_)),C.value=_.value||"",a(C,x.currentOffset(),x.currentPosition()),{node:C})}function m(x,_){const M=x.context(),I=o(7,M.offset,M.startLoc);return I.value=_,a(I,x.currentOffset(),x.currentPosition()),I}function g(x){const _=x.context(),M=o(6,_.offset,_.startLoc);let I=x.nextToken();if(I.type===9){const A=f(x);M.modifier=A.node,I=A.nextConsumeToken||x.nextToken()}switch(I.type!==10&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(I)),I=x.nextToken(),I.type===2&&(I=x.nextToken()),I.type){case 11:I.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(I)),M.key=m(x,I.value||"");break;case 5:I.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(I)),M.key=h(x,I.value||"");break;case 6:I.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(I)),M.key=u(x,I.value||"");break;case 7:I.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(I)),M.key=p(x,I.value||"");break;default:{s(x,It.UNEXPECTED_EMPTY_LINKED_KEY,_.lastStartLoc,0);const A=x.context(),C=o(7,A.offset,A.startLoc);return C.value="",a(C,A.offset,A.startLoc),M.key=C,a(M,A.offset,A.startLoc),{nextConsumeToken:I,node:M}}}return a(M,x.currentOffset(),x.currentPosition()),{node:M}}function b(x){const _=x.context(),M=_.currentType===1?x.currentOffset():_.offset,I=_.currentType===1?_.endLoc:_.startLoc,A=o(2,M,I);A.items=[];let C=null,R=null;do{const L=C||x.nextToken();switch(C=null,L.type){case 0:L.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(L)),A.items.push(l(x,L.value||""));break;case 6:L.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(L)),A.items.push(u(x,L.value||""));break;case 4:R=!0;break;case 5:L.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(L)),A.items.push(h(x,L.value||"",!!R)),R&&(n(x,rj.USE_MODULO_SYNTAX,_.lastStartLoc,0,bl(L)),R=null);break;case 7:L.value==null&&s(x,It.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,bl(L)),A.items.push(p(x,L.value||""));break;case 8:{const V=g(x);A.items.push(V.node),C=V.nextConsumeToken||null;break}}}while(_.currentType!==14&&_.currentType!==1);const O=_.currentType===1?_.lastOffset:x.currentOffset(),k=_.currentType===1?_.lastEndLoc:x.currentPosition();return a(A,O,k),A}function w(x,_,M,I){const A=x.context();let C=I.items.length===0;const R=o(1,_,M);R.cases=[],R.cases.push(I);do{const O=b(x);C||(C=O.items.length===0),R.cases.push(O)}while(A.currentType!==14);return C&&s(x,It.MUST_HAVE_MESSAGES_IN_PLURAL,M,0),a(R,x.currentOffset(),x.currentPosition()),R}function S(x){const _=x.context(),{offset:M,startLoc:I}=_,A=b(x);return _.currentType===14?A:w(x,M,I,A)}function T(x){const _=TKe(x,Sde({},e)),M=_.context(),I=o(0,M.offset,M.startLoc);return t&&I.loc&&(I.loc.source=x),I.body=S(_),e.onCacheKey&&(I.cacheKey=e.onCacheKey(x)),M.currentType!==14&&s(_,It.UNEXPECTED_LEXICAL_ANALYSIS,M.lastStartLoc,0,x[M.offset]||""),a(I,_.currentOffset(),_.currentPosition()),I}return{parse:T}}function bl(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"…":t}function $Ke(e,t={}){const i={ast:e,helpers:new Set};return{context:()=>i,helper:n=>(i.helpers.add(n),n)}}function sY(e,t){for(let i=0;i<e.length;i++)sj(e[i],t)}function sj(e,t){switch(e.type){case 1:sY(e.cases,t),t.helper("plural");break;case 2:sY(e.items,t);break;case 6:{sj(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function CKe(e,t={}){const i=$Ke(e);i.helper("normalize"),e.body&&sj(e.body,i);const r=i.context();e.helpers=Array.from(r.helpers)}function RKe(e){const t=e.body;return t.type===2?nY(t):t.cases.forEach(i=>nY(i)),e}function nY(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let i=0;i<e.items.length;i++){const r=e.items[i];if(!(r.type===3||r.type===9)||r.value==null)break;t.push(r.value)}if(t.length===e.items.length){e.static=xde(t);for(let i=0;i<e.items.length;i++){const r=e.items[i];(r.type===3||r.type===9)&&delete r.value}}}}const OKe="minifier";function tv(e){switch(e.t=e.type,e.type){case 0:{const t=e;tv(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,i=t.cases;for(let r=0;r<i.length;r++)tv(i[r]);t.c=i,delete t.cases;break}case 2:{const t=e,i=t.items;for(let r=0;r<i.length;r++)tv(i[r]);t.i=i,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;tv(t.key),t.k=t.key,delete t.key,t.modifier&&(tv(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw Mb(It.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:OKe,args:[e.type]})}delete e.type}const PKe="parser";function LKe(e,t){const{sourceMap:i,filename:r,breakLineCode:s,needIndent:n}=t,o=t.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:n,indentLevel:0};o&&e.loc&&(a.source=e.loc.source);const l=()=>a;function u(w,S){a.code+=w}function h(w,S=!0){const T=S?s:"";u(n?T+"  ".repeat(w):T)}function p(w=!0){const S=++a.indentLevel;w&&h(S)}function f(w=!0){const S=--a.indentLevel;w&&h(S)}function m(){h(a.indentLevel)}return{context:l,push:u,indent:p,deindent:f,newline:m,helper:w=>`_${w}`,needIndent:()=>a.needIndent}}function NKe(e,t){const{helper:i}=e;e.push(`${i("linked")}(`),P1(e,t.key),t.modifier?(e.push(", "),P1(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function kKe(e,t){const{helper:i,needIndent:r}=e;e.push(`${i("normalize")}([`),e.indent(r());const s=t.items.length;for(let n=0;n<s&&(P1(e,t.items[n]),n!==s-1);n++)e.push(", ");e.deindent(r()),e.push("])")}function DKe(e,t){const{helper:i,needIndent:r}=e;if(t.cases.length>1){e.push(`${i("plural")}([`),e.indent(r());const s=t.cases.length;for(let n=0;n<s&&(P1(e,t.cases[n]),n!==s-1);n++)e.push(", ");e.deindent(r()),e.push("])")}}function FKe(e,t){t.body?P1(e,t.body):e.push("null")}function P1(e,t){const{helper:i}=e;switch(t.type){case 0:FKe(e,t);break;case 1:DKe(e,t);break;case 2:kKe(e,t);break;case 6:NKe(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${i("interpolate")}(${i("list")}(${t.index}))`,t);break;case 4:e.push(`${i("interpolate")}(${i("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw Mb(It.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:PKe,args:[t.type]})}}const jKe=(e,t={})=>{const i=iY(t.mode)?t.mode:"normal",r=iY(t.filename)?t.filename:"message.intl",s=!!t.sourceMap,n=t.breakLineCode!=null?t.breakLineCode:i==="arrow"?";":`
`,o=t.needIndent?t.needIndent:i!=="arrow",a=e.helpers||[],l=LKe(e,{mode:i,filename:r,sourceMap:s,breakLineCode:n,needIndent:o});l.push(i==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${xde(a.map(p=>`${p}: _${p}`),", ")} } = ctx`),l.newline()),l.push("return "),P1(l,e),l.deindent(o),l.push("}"),delete e.helpers;const{code:u,map:h}=l.context();return{ast:e,code:u,map:h?h.toJSON():void 0}};function UKe(e,t={}){const i=Sde({},t),r=!!i.jit,s=!!i.minify,n=i.optimize==null?!0:i.optimize,a=AKe(i).parse(e);return r?(n&&RKe(a),s&&tv(a),{ast:a,code:""}):(CKe(a,i),jKe(a,i))}/*!
  * core-base v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function VKe(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Vh().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Vh().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Vh().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Lf=[];Lf[0]={w:[0],i:[3,0],"[":[4],o:[7]};Lf[1]={w:[1],".":[2],"[":[4],o:[7]};Lf[2]={w:[2],i:[3,0],0:[3,0]};Lf[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Lf[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Lf[5]={"'":[4,0],o:8,l:[5,0]};Lf[6]={'"':[4,0],o:8,l:[6,0]};const GKe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function BKe(e){return GKe.test(e)}function zKe(e){const t=e.charCodeAt(0),i=e.charCodeAt(e.length-1);return t===i&&(t===34||t===39)?e.slice(1,-1):e}function qKe(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function HKe(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:BKe(t)?zKe(t):"*"+t}function WKe(e){const t=[];let i=-1,r=0,s=0,n,o,a,l,u,h,p;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=HKe(o),o===!1))return!1;f[1]()}};function m(){const g=e[i+1];if(r===5&&g==="'"||r===6&&g==='"')return i++,a="\\"+g,f[0](),!0}for(;r!==null;)if(i++,n=e[i],!(n==="\\"&&m())){if(l=qKe(n),p=Lf[r],u=p[l]||p.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=f[u[1]],h&&(a=n,h()===!1))))return;if(r===7)return t}}const oY=new Map;function JKe(e,t){return hi(e)?e[t]:null}function ZKe(e,t){if(!hi(e))return null;let i=oY.get(t);if(i||(i=WKe(t),i&&oY.set(t,i)),!i)return null;const r=i.length;let s=e,n=0;for(;n<r;){const o=s[i[n]];if(o===void 0||ji(s))return null;s=o,n++}return s}const YKe=e=>e,KKe=e=>"",XKe="text",QKe=e=>e.length===0?"":uKe(e),eXe=lKe;function aY(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function tXe(e){const t=kr(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(kr(e.named.count)||kr(e.named.n))?kr(e.named.count)?e.named.count:kr(e.named.n)?e.named.n:t:t}function iXe(e,t){t.count||(t.count=e),t.n||(t.n=e)}function rXe(e={}){const t=e.locale,i=tXe(e),r=hi(e.pluralRules)&&qe(t)&&ji(e.pluralRules[t])?e.pluralRules[t]:aY,s=hi(e.pluralRules)&&qe(t)&&ji(e.pluralRules[t])?aY:void 0,n=S=>S[r(i,S.length,s)],o=e.list||[],a=S=>o[S],l=e.named||Ei();kr(e.pluralIndex)&&iXe(i,l);const u=S=>l[S];function h(S){const T=ji(e.messages)?e.messages(S):hi(e.messages)?e.messages[S]:!1;return T||(e.parent?e.parent.message(S):KKe)}const p=S=>e.modifiers?e.modifiers[S]:YKe,f=Nt(e.processor)&&ji(e.processor.normalize)?e.processor.normalize:QKe,m=Nt(e.processor)&&ji(e.processor.interpolate)?e.processor.interpolate:eXe,g=Nt(e.processor)&&qe(e.processor.type)?e.processor.type:XKe,w={list:a,named:u,plural:n,linked:(S,...T)=>{const[x,_]=T;let M="text",I="";T.length===1?hi(x)?(I=x.modifier||I,M=x.type||M):qe(x)&&(I=x||I):T.length===2&&(qe(x)&&(I=x||I),qe(_)&&(M=_||M));const A=h(S)(w),C=M==="vnode"&&Zi(A)&&I?A[0]:A;return I?p(I)(C,M):C},message:h,type:g,interpolate:m,normalize:f,values:Hs(Ei(),o,l)};return w}let $S=null;function sXe(e){$S=e}function nXe(e,t,i){$S&&$S.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:i})}const oXe=aXe("function:translate");function aXe(e){return t=>$S&&$S.emit(e,t)}const Tde=rj.__EXTEND_POINT__,tm=r5(Tde),lXe={NOT_FOUND_KEY:Tde,FALLBACK_TO_TRANSLATE:tm(),CANNOT_FORMAT_NUMBER:tm(),FALLBACK_TO_NUMBER_FORMAT:tm(),CANNOT_FORMAT_DATE:tm(),FALLBACK_TO_DATE_FORMAT:tm(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:tm(),__EXTEND_POINT__:tm()},Ede=It.__EXTEND_POINT__,im=r5(Ede),Yl={INVALID_ARGUMENT:Ede,INVALID_DATE_ARGUMENT:im(),INVALID_ISO_DATE_ARGUMENT:im(),NOT_SUPPORT_NON_STRING_MESSAGE:im(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:im(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:im(),NOT_SUPPORT_LOCALE_TYPE:im(),__EXTEND_POINT__:im()};function rc(e){return Mb(e,null,void 0)}function nj(e,t){return t.locale!=null?lY(t.locale):lY(e.locale)}let ZR;function lY(e){if(qe(e))return e;if(ji(e)){if(e.resolvedOnce&&ZR!=null)return ZR;if(e.constructor.name==="Function"){const t=e();if(aKe(t))throw rc(Yl.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ZR=t}else throw rc(Yl.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw rc(Yl.NOT_SUPPORT_LOCALE_TYPE)}function uXe(e,t,i){return[...new Set([i,...Zi(t)?t:hi(t)?Object.keys(t):qe(t)?[t]:[i]])]}function Mde(e,t,i){const r=qe(i)?i:L1,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let n=s.__localeChainCache.get(r);if(!n){n=[];let o=[i];for(;Zi(o);)o=uY(n,o,t);const a=Zi(t)||!Nt(t)?t:t.default?t.default:null;o=qe(a)?[a]:a,Zi(o)&&uY(n,o,!1),s.__localeChainCache.set(r,n)}return n}function uY(e,t,i){let r=!0;for(let s=0;s<t.length&&Yt(r);s++){const n=t[s];qe(n)&&(r=cXe(e,t[s],i))}return r}function cXe(e,t,i){let r;const s=t.split("-");do{const n=s.join("-");r=hXe(e,n,i),s.splice(-1,1)}while(s.length&&r===!0);return r}function hXe(e,t,i){let r=!1;if(!e.includes(t)&&(r=!0,t)){r=t[t.length-1]!=="!";const s=t.replace(/!/g,"");e.push(s),(Zi(i)||Nt(i))&&i[s]&&(r=i[s])}return r}const pXe="9.14.2",s5=-1,L1="en-US",cY="",hY=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function dXe(){return{upper:(e,t)=>t==="text"&&qe(e)?e.toUpperCase():t==="vnode"&&hi(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&qe(e)?e.toLowerCase():t==="vnode"&&hi(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&qe(e)?hY(e):t==="vnode"&&hi(e)&&"__v_isVNode"in e?hY(e.children):e}}let Ide;function pY(e){Ide=e}let Ade;function fXe(e){Ade=e}let $de;function mXe(e){$de=e}let Cde=null;const yXe=e=>{Cde=e},gXe=()=>Cde;let Rde=null;const dY=e=>{Rde=e},vXe=()=>Rde;let fY=0;function bXe(e={}){const t=ji(e.onWarn)?e.onWarn:cKe,i=qe(e.version)?e.version:pXe,r=qe(e.locale)||ji(e.locale)?e.locale:L1,s=ji(r)?L1:r,n=Zi(e.fallbackLocale)||Nt(e.fallbackLocale)||qe(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s,o=Nt(e.messages)?e.messages:YR(s),a=Nt(e.datetimeFormats)?e.datetimeFormats:YR(s),l=Nt(e.numberFormats)?e.numberFormats:YR(s),u=Hs(Ei(),e.modifiers,dXe()),h=e.pluralRules||Ei(),p=ji(e.missing)?e.missing:null,f=Yt(e.missingWarn)||hf(e.missingWarn)?e.missingWarn:!0,m=Yt(e.fallbackWarn)||hf(e.fallbackWarn)?e.fallbackWarn:!0,g=!!e.fallbackFormat,b=!!e.unresolving,w=ji(e.postTranslation)?e.postTranslation:null,S=Nt(e.processor)?e.processor:null,T=Yt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter,_=ji(e.messageCompiler)?e.messageCompiler:Ide,M=ji(e.messageResolver)?e.messageResolver:Ade||JKe,I=ji(e.localeFallbacker)?e.localeFallbacker:$de||uXe,A=hi(e.fallbackContext)?e.fallbackContext:void 0,C=e,R=hi(C.__datetimeFormatters)?C.__datetimeFormatters:new Map,O=hi(C.__numberFormatters)?C.__numberFormatters:new Map,k=hi(C.__meta)?C.__meta:{};fY++;const L={version:i,cid:fY,locale:r,fallbackLocale:n,messages:o,modifiers:u,pluralRules:h,missing:p,missingWarn:f,fallbackWarn:m,fallbackFormat:g,unresolving:b,postTranslation:w,processor:S,warnHtmlMessage:T,escapeParameter:x,messageCompiler:_,messageResolver:M,localeFallbacker:I,fallbackContext:A,onWarn:t,__meta:k};return L.datetimeFormats=a,L.numberFormats=l,L.__datetimeFormatters=R,L.__numberFormatters=O,__INTLIFY_PROD_DEVTOOLS__&&nXe(L,i,k),L}const YR=e=>({[e]:Ei()});function oj(e,t,i,r,s){const{missing:n,onWarn:o}=e;if(n!==null){const a=n(e,i,t,s);return qe(a)?a:t}else return t}function pw(e,t,i){const r=e;r.__localeChainCache=new Map,e.localeFallbacker(e,i,t)}function wXe(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function _Xe(e,t){const i=t.indexOf(e);if(i===-1)return!1;for(let r=i+1;r<t.length;r++)if(wXe(e,t[r]))return!0;return!1}function KR(e){return i=>SXe(i,e)}function SXe(e,t){const i=TXe(t);if(i==null)throw CS(0);if(aj(i)===1){const n=MXe(i);return e.plural(n.reduce((o,a)=>[...o,mY(e,a)],[]))}else return mY(e,i)}const xXe=["b","body"];function TXe(e){return Nf(e,xXe)}const EXe=["c","cases"];function MXe(e){return Nf(e,EXe,[])}function mY(e,t){const i=AXe(t);if(i!=null)return e.type==="text"?i:e.normalize([i]);{const r=CXe(t).reduce((s,n)=>[...s,_6(e,n)],[]);return e.normalize(r)}}const IXe=["s","static"];function AXe(e){return Nf(e,IXe)}const $Xe=["i","items"];function CXe(e){return Nf(e,$Xe,[])}function _6(e,t){const i=aj(t);switch(i){case 3:return $E(t,i);case 9:return $E(t,i);case 4:{const r=t;if(Zl(r,"k")&&r.k)return e.interpolate(e.named(r.k));if(Zl(r,"key")&&r.key)return e.interpolate(e.named(r.key));throw CS(i)}case 5:{const r=t;if(Zl(r,"i")&&kr(r.i))return e.interpolate(e.list(r.i));if(Zl(r,"index")&&kr(r.index))return e.interpolate(e.list(r.index));throw CS(i)}case 6:{const r=t,s=LXe(r),n=kXe(r);return e.linked(_6(e,n),s?_6(e,s):void 0,e.type)}case 7:return $E(t,i);case 8:return $E(t,i);default:throw new Error(`unhandled node on format message part: ${i}`)}}const RXe=["t","type"];function aj(e){return Nf(e,RXe)}const OXe=["v","value"];function $E(e,t){const i=Nf(e,OXe);if(i)return i;throw CS(t)}const PXe=["m","modifier"];function LXe(e){return Nf(e,PXe)}const NXe=["k","key"];function kXe(e){const t=Nf(e,NXe);if(t)return t;throw CS(6)}function Nf(e,t,i){for(let r=0;r<t.length;r++){const s=t[r];if(Zl(e,s)&&e[s]!=null)return e[s]}return i}function CS(e){return new Error(`unhandled node type: ${e}`)}const Ode=e=>e;let wv=Ei();function N1(e){return hi(e)&&aj(e)===0&&(Zl(e,"b")||Zl(e,"body"))}function Pde(e,t={}){let i=!1;const r=t.onError||gKe;return t.onError=s=>{i=!0,r(s)},{...UKe(e,t),detectError:i}}const DXe=(e,t)=>{if(!qe(e))throw rc(Yl.NOT_SUPPORT_NON_STRING_MESSAGE);{Yt(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||Ode)(e),s=wv[r];if(s)return s;const{code:n,detectError:o}=Pde(e,t),a=new Function(`return ${n}`)();return o?a:wv[r]=a}};function FXe(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&qe(e)){Yt(t.warnHtmlMessage)&&t.warnHtmlMessage;const r=(t.onCacheKey||Ode)(e),s=wv[r];if(s)return s;const{ast:n,detectError:o}=Pde(e,{...t,location:!1,jit:!0}),a=KR(n);return o?a:wv[r]=a}else{const i=e.cacheKey;if(i){const r=wv[i];return r||(wv[i]=KR(e))}else return KR(e)}}const yY=()=>"",Ba=e=>ji(e);function gY(e,...t){const{fallbackFormat:i,postTranslation:r,unresolving:s,messageCompiler:n,fallbackLocale:o,messages:a}=e,[l,u]=S6(...t),h=Yt(u.missingWarn)?u.missingWarn:e.missingWarn,p=Yt(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,f=Yt(u.escapeParameter)?u.escapeParameter:e.escapeParameter,m=!!u.resolvedMessage,g=qe(u.default)||Yt(u.default)?Yt(u.default)?n?l:()=>l:u.default:i?n?l:()=>l:"",b=i||g!=="",w=nj(e,u);f&&jXe(u);let[S,T,x]=m?[l,w,a[w]||Ei()]:Lde(e,l,w,o,p,h),_=S,M=l;if(!m&&!(qe(_)||N1(_)||Ba(_))&&b&&(_=g,M=_),!m&&(!(qe(_)||N1(_)||Ba(_))||!qe(T)))return s?s5:l;let I=!1;const A=()=>{I=!0},C=Ba(_)?_:Nde(e,l,T,_,M,A);if(I)return _;const R=GXe(e,T,x,u),O=rXe(R),k=UXe(e,C,O),L=r?r(k,l):k;if(__INTLIFY_PROD_DEVTOOLS__){const V={timestamp:Date.now(),key:qe(l)?l:Ba(_)?_.key:"",locale:T||(Ba(_)?_.locale:""),format:qe(_)?_:Ba(_)?_.source:"",message:L};V.meta=Hs({},e.__meta,gXe()||{}),oXe(V)}return L}function jXe(e){Zi(e.list)?e.list=e.list.map(t=>qe(t)?tY(t):t):hi(e.named)&&Object.keys(e.named).forEach(t=>{qe(e.named[t])&&(e.named[t]=tY(e.named[t]))})}function Lde(e,t,i,r,s,n){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=e,h=u(e,r,i);let p=Ei(),f,m=null;const g="translate";for(let b=0;b<h.length&&(f=h[b],p=o[f]||Ei(),(m=l(p,t))===null&&(m=p[t]),!(qe(m)||N1(m)||Ba(m)));b++)if(!_Xe(f,h)){const w=oj(e,t,f,n,g);w!==t&&(m=w)}return[m,f,p]}function Nde(e,t,i,r,s,n){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Ba(r)){const u=r;return u.locale=u.locale||i,u.key=u.key||t,u}if(o==null){const u=()=>r;return u.locale=i,u.key=t,u}const l=o(r,VXe(e,i,s,r,a,n));return l.locale=i,l.key=t,l.source=r,l}function UXe(e,t,i){return t(i)}function S6(...e){const[t,i,r]=e,s=Ei();if(!qe(t)&&!kr(t)&&!Ba(t)&&!N1(t))throw rc(Yl.INVALID_ARGUMENT);const n=kr(t)?String(t):(Ba(t),t);return kr(i)?s.plural=i:qe(i)?s.default=i:Nt(i)&&!i5(i)?s.named=i:Zi(i)&&(s.list=i),kr(r)?s.plural=r:qe(r)?s.default=r:Nt(r)&&Hs(s,r),[n,s]}function VXe(e,t,i,r,s,n){return{locale:t,key:i,warnHtmlMessage:s,onError:o=>{throw n&&n(o),o},onCacheKey:o=>iKe(t,i,o)}}function GXe(e,t,i,r){const{modifiers:s,pluralRules:n,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:h}=e,f={locale:t,modifiers:s,pluralRules:n,messages:m=>{let g=o(i,m);if(g==null&&h){const[,,b]=Lde(h,m,t,a,l,u);g=o(b,m)}if(qe(g)||N1(g)){let b=!1;const S=Nde(e,m,t,g,m,()=>{b=!0});return b?yY:S}else return Ba(g)?g:yY}};return e.processor&&(f.processor=e.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),kr(r.plural)&&(f.pluralIndex=r.plural),f}function vY(e,...t){const{datetimeFormats:i,unresolving:r,fallbackLocale:s,onWarn:n,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[l,u,h,p]=x6(...t),f=Yt(h.missingWarn)?h.missingWarn:e.missingWarn;Yt(h.fallbackWarn)?h.fallbackWarn:e.fallbackWarn;const m=!!h.part,g=nj(e,h),b=o(e,s,g);if(!qe(l)||l==="")return new Intl.DateTimeFormat(g,p).format(u);let w={},S,T=null;const x="datetime format";for(let I=0;I<b.length&&(S=b[I],w=i[S]||{},T=w[l],!Nt(T));I++)oj(e,l,S,f,x);if(!Nt(T)||!qe(S))return r?s5:l;let _=`${S}__${l}`;i5(p)||(_=`${_}__${JSON.stringify(p)}`);let M=a.get(_);return M||(M=new Intl.DateTimeFormat(S,Hs({},T,p)),a.set(_,M)),m?M.formatToParts(u):M.format(u)}const kde=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function x6(...e){const[t,i,r,s]=e,n=Ei();let o=Ei(),a;if(qe(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw rc(Yl.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw rc(Yl.INVALID_ISO_DATE_ARGUMENT)}}else if(sKe(t)){if(isNaN(t.getTime()))throw rc(Yl.INVALID_DATE_ARGUMENT);a=t}else if(kr(t))a=t;else throw rc(Yl.INVALID_ARGUMENT);return qe(i)?n.key=i:Nt(i)&&Object.keys(i).forEach(l=>{kde.includes(l)?o[l]=i[l]:n[l]=i[l]}),qe(r)?n.locale=r:Nt(r)&&(o=r),Nt(s)&&(o=s),[n.key||"",a,n,o]}function bY(e,t,i){const r=e;for(const s in i){const n=`${t}__${s}`;r.__datetimeFormatters.has(n)&&r.__datetimeFormatters.delete(n)}}function wY(e,...t){const{numberFormats:i,unresolving:r,fallbackLocale:s,onWarn:n,localeFallbacker:o}=e,{__numberFormatters:a}=e,[l,u,h,p]=T6(...t),f=Yt(h.missingWarn)?h.missingWarn:e.missingWarn;Yt(h.fallbackWarn)?h.fallbackWarn:e.fallbackWarn;const m=!!h.part,g=nj(e,h),b=o(e,s,g);if(!qe(l)||l==="")return new Intl.NumberFormat(g,p).format(u);let w={},S,T=null;const x="number format";for(let I=0;I<b.length&&(S=b[I],w=i[S]||{},T=w[l],!Nt(T));I++)oj(e,l,S,f,x);if(!Nt(T)||!qe(S))return r?s5:l;let _=`${S}__${l}`;i5(p)||(_=`${_}__${JSON.stringify(p)}`);let M=a.get(_);return M||(M=new Intl.NumberFormat(S,Hs({},T,p)),a.set(_,M)),m?M.formatToParts(u):M.format(u)}const Dde=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function T6(...e){const[t,i,r,s]=e,n=Ei();let o=Ei();if(!kr(t))throw rc(Yl.INVALID_ARGUMENT);const a=t;return qe(i)?n.key=i:Nt(i)&&Object.keys(i).forEach(l=>{Dde.includes(l)?o[l]=i[l]:n[l]=i[l]}),qe(r)?n.locale=r:Nt(r)&&(o=r),Nt(s)&&(o=s),[n.key||"",a,n,o]}function _Y(e,t,i){const r=e;for(const s in i){const n=`${t}__${s}`;r.__numberFormatters.has(n)&&r.__numberFormatters.delete(n)}}VKe();/*!
  * vue-i18n v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const BXe="9.14.2";function zXe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Vh().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Vh().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Vh().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Vh().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Vh().__INTLIFY_PROD_DEVTOOLS__=!1)}const Fde=lXe.__EXTEND_POINT__,Gc=r5(Fde);Gc(),Gc(),Gc(),Gc(),Gc(),Gc(),Gc(),Gc(),Gc();const jde=Yl.__EXTEND_POINT__,ao=r5(jde),as={UNEXPECTED_RETURN_TYPE:jde,INVALID_ARGUMENT:ao(),MUST_BE_CALL_SETUP_TOP:ao(),NOT_INSTALLED:ao(),NOT_AVAILABLE_IN_LEGACY_MODE:ao(),REQUIRED_VALUE:ao(),INVALID_VALUE:ao(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:ao(),NOT_INSTALLED_WITH_PROVIDE:ao(),UNEXPECTED_ERROR:ao(),NOT_COMPATIBLE_LEGACY_VUE_I18N:ao(),BRIDGE_SUPPORT_VUE_2_ONLY:ao(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:ao(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:ao(),__EXTEND_POINT__:ao()};function Cs(e,...t){return Mb(e,null,void 0)}const E6=Pf("__translateVNode"),M6=Pf("__datetimeParts"),I6=Pf("__numberParts"),Ude=Pf("__setPluralRules"),Vde=Pf("__injectWithOption"),A6=Pf("__dispose");function RS(e){if(!hi(e))return e;for(const t in e)if(Zl(e,t))if(!t.includes("."))hi(e[t])&&RS(e[t]);else{const i=t.split("."),r=i.length-1;let s=e,n=!1;for(let o=0;o<r;o++){if(i[o]in s||(s[i[o]]=Ei()),!hi(s[i[o]])){n=!0;break}s=s[i[o]]}n||(s[i[r]]=e[t],delete e[t]),hi(s[i[r]])&&RS(s[i[r]])}return e}function n5(e,t){const{messages:i,__i18n:r,messageResolver:s,flatJson:n}=t,o=Nt(i)?i:Zi(r)?Ei():{[e]:Ei()};if(Zi(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||Ei(),LI(u,o[l])):LI(u,o)}else qe(a)&&LI(JSON.parse(a),o)}),s==null&&n)for(const a in o)Zl(o,a)&&RS(o[a]);return o}function Gde(e){return e.type}function Bde(e,t,i){let r=hi(t.messages)?t.messages:Ei();"__i18nGlobal"in i&&(r=n5(e.locale.value,{messages:r,__i18n:i.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(n=>{e.mergeLocaleMessage(n,r[n])});{if(hi(t.datetimeFormats)){const n=Object.keys(t.datetimeFormats);n.length&&n.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(hi(t.numberFormats)){const n=Object.keys(t.numberFormats);n.length&&n.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function SY(e){return Bt(Yh,null,e,0)}const xY="__INTLIFY_META__",TY=()=>[],qXe=()=>!1;let EY=0;function MY(e){return(t,i,r,s)=>e(i,r,us()||void 0,s)}const HXe=()=>{const e=us();let t=null;return e&&(t=Gde(e)[xY])?{[xY]:t}:null};function lj(e={},t){const{__root:i,__injectWithOption:r}=e,s=i===void 0,n=e.flatJson,o=OA?_e:Dx,a=!!e.translateExistCompatible;let l=Yt(e.inheritLocale)?e.inheritLocale:!0;const u=o(i&&l?i.locale.value:qe(e.locale)?e.locale:L1),h=o(i&&l?i.fallbackLocale.value:qe(e.fallbackLocale)||Zi(e.fallbackLocale)||Nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:u.value),p=o(n5(u.value,e)),f=o(Nt(e.datetimeFormats)?e.datetimeFormats:{[u.value]:{}}),m=o(Nt(e.numberFormats)?e.numberFormats:{[u.value]:{}});let g=i?i.missingWarn:Yt(e.missingWarn)||hf(e.missingWarn)?e.missingWarn:!0,b=i?i.fallbackWarn:Yt(e.fallbackWarn)||hf(e.fallbackWarn)?e.fallbackWarn:!0,w=i?i.fallbackRoot:Yt(e.fallbackRoot)?e.fallbackRoot:!0,S=!!e.fallbackFormat,T=ji(e.missing)?e.missing:null,x=ji(e.missing)?MY(e.missing):null,_=ji(e.postTranslation)?e.postTranslation:null,M=i?i.warnHtmlMessage:Yt(e.warnHtmlMessage)?e.warnHtmlMessage:!0,I=!!e.escapeParameter;const A=i?i.modifiers:Nt(e.modifiers)?e.modifiers:{};let C=e.pluralRules||i&&i.pluralRules,R;R=(()=>{s&&dY(null);const Z={version:BXe,locale:u.value,fallbackLocale:h.value,messages:p.value,modifiers:A,pluralRules:C,missing:x===null?void 0:x,missingWarn:g,fallbackWarn:b,fallbackFormat:S,unresolving:!0,postTranslation:_===null?void 0:_,warnHtmlMessage:M,escapeParameter:I,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};Z.datetimeFormats=f.value,Z.numberFormats=m.value,Z.__datetimeFormatters=Nt(R)?R.__datetimeFormatters:void 0,Z.__numberFormatters=Nt(R)?R.__numberFormatters:void 0;const te=bXe(Z);return s&&dY(te),te})(),pw(R,u.value,h.value);function k(){return[u.value,h.value,p.value,f.value,m.value]}const L=Zt({get:()=>u.value,set:Z=>{u.value=Z,R.locale=u.value}}),V=Zt({get:()=>h.value,set:Z=>{h.value=Z,R.fallbackLocale=h.value,pw(R,u.value,Z)}}),J=Zt(()=>p.value),y=Zt(()=>f.value),E=Zt(()=>m.value);function $(){return ji(_)?_:null}function P(Z){_=Z,R.postTranslation=Z}function G(){return T}function Q(Z){Z!==null&&(x=MY(Z)),T=Z,R.missing=x}const se=(Z,te,Ee,Fe,Tt,Wt)=>{k();let Gt;try{__INTLIFY_PROD_DEVTOOLS__,s||(R.fallbackContext=i?vXe():void 0),Gt=Z(R)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(R.fallbackContext=void 0)}if(Ee!=="translate exists"&&kr(Gt)&&Gt===s5||Ee==="translate exists"&&!Gt){const[Qt,be]=te();return i&&w?Fe(i):Tt(Qt)}else{if(Wt(Gt))return Gt;throw Cs(as.UNEXPECTED_RETURN_TYPE)}};function ie(...Z){return se(te=>Reflect.apply(gY,null,[te,...Z]),()=>S6(...Z),"translate",te=>Reflect.apply(te.t,te,[...Z]),te=>te,te=>qe(te))}function ye(...Z){const[te,Ee,Fe]=Z;if(Fe&&!hi(Fe))throw Cs(as.INVALID_ARGUMENT);return ie(te,Ee,Hs({resolvedMessage:!0},Fe||{}))}function Pe(...Z){return se(te=>Reflect.apply(vY,null,[te,...Z]),()=>x6(...Z),"datetime format",te=>Reflect.apply(te.d,te,[...Z]),()=>cY,te=>qe(te))}function Ie(...Z){return se(te=>Reflect.apply(wY,null,[te,...Z]),()=>T6(...Z),"number format",te=>Reflect.apply(te.n,te,[...Z]),()=>cY,te=>qe(te))}function we(Z){return Z.map(te=>qe(te)||kr(te)||Yt(te)?SY(String(te)):te)}const Ze={normalize:we,interpolate:Z=>Z,type:"vnode"};function et(...Z){return se(te=>{let Ee;const Fe=te;try{Fe.processor=Ze,Ee=Reflect.apply(gY,null,[Fe,...Z])}finally{Fe.processor=null}return Ee},()=>S6(...Z),"translate",te=>te[E6](...Z),te=>[SY(te)],te=>Zi(te))}function nt(...Z){return se(te=>Reflect.apply(wY,null,[te,...Z]),()=>T6(...Z),"number format",te=>te[I6](...Z),TY,te=>qe(te)||Zi(te))}function $t(...Z){return se(te=>Reflect.apply(vY,null,[te,...Z]),()=>x6(...Z),"datetime format",te=>te[M6](...Z),TY,te=>qe(te)||Zi(te))}function zt(Z){C=Z,R.pluralRules=C}function Y(Z,te){return se(()=>{if(!Z)return!1;const Ee=qe(te)?te:u.value,Fe=fe(Ee),Tt=R.messageResolver(Fe,Z);return a?Tt!=null:N1(Tt)||Ba(Tt)||qe(Tt)},()=>[Z],"translate exists",Ee=>Reflect.apply(Ee.te,Ee,[Z,te]),qXe,Ee=>Yt(Ee))}function B(Z){let te=null;const Ee=Mde(R,h.value,u.value);for(let Fe=0;Fe<Ee.length;Fe++){const Tt=p.value[Ee[Fe]]||{},Wt=R.messageResolver(Tt,Z);if(Wt!=null){te=Wt;break}}return te}function re(Z){const te=B(Z);return te??(i?i.tm(Z)||{}:{})}function fe(Z){return p.value[Z]||{}}function ve(Z,te){if(n){const Ee={[Z]:te};for(const Fe in Ee)Zl(Ee,Fe)&&RS(Ee[Fe]);te=Ee[Z]}p.value[Z]=te,R.messages=p.value}function D(Z,te){p.value[Z]=p.value[Z]||{};const Ee={[Z]:te};if(n)for(const Fe in Ee)Zl(Ee,Fe)&&RS(Ee[Fe]);te=Ee[Z],LI(te,p.value[Z]),R.messages=p.value}function q(Z){return f.value[Z]||{}}function N(Z,te){f.value[Z]=te,R.datetimeFormats=f.value,bY(R,Z,te)}function U(Z,te){f.value[Z]=Hs(f.value[Z]||{},te),R.datetimeFormats=f.value,bY(R,Z,te)}function H(Z){return m.value[Z]||{}}function ne(Z,te){m.value[Z]=te,R.numberFormats=m.value,_Y(R,Z,te)}function me(Z,te){m.value[Z]=Hs(m.value[Z]||{},te),R.numberFormats=m.value,_Y(R,Z,te)}EY++,i&&OA&&(qs(i.locale,Z=>{l&&(u.value=Z,R.locale=Z,pw(R,u.value,h.value))}),qs(i.fallbackLocale,Z=>{l&&(h.value=Z,R.fallbackLocale=Z,pw(R,u.value,h.value))}));const pe={id:EY,locale:L,fallbackLocale:V,get inheritLocale(){return l},set inheritLocale(Z){l=Z,Z&&i&&(u.value=i.locale.value,h.value=i.fallbackLocale.value,pw(R,u.value,h.value))},get availableLocales(){return Object.keys(p.value).sort()},messages:J,get modifiers(){return A},get pluralRules(){return C||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(Z){g=Z,R.missingWarn=g},get fallbackWarn(){return b},set fallbackWarn(Z){b=Z,R.fallbackWarn=b},get fallbackRoot(){return w},set fallbackRoot(Z){w=Z},get fallbackFormat(){return S},set fallbackFormat(Z){S=Z,R.fallbackFormat=S},get warnHtmlMessage(){return M},set warnHtmlMessage(Z){M=Z,R.warnHtmlMessage=Z},get escapeParameter(){return I},set escapeParameter(Z){I=Z,R.escapeParameter=Z},t:ie,getLocaleMessage:fe,setLocaleMessage:ve,mergeLocaleMessage:D,getPostTranslationHandler:$,setPostTranslationHandler:P,getMissingHandler:G,setMissingHandler:Q,[Ude]:zt};return pe.datetimeFormats=y,pe.numberFormats=E,pe.rt=ye,pe.te=Y,pe.tm=re,pe.d=Pe,pe.n=Ie,pe.getDateTimeFormat=q,pe.setDateTimeFormat=N,pe.mergeDateTimeFormat=U,pe.getNumberFormat=H,pe.setNumberFormat=ne,pe.mergeNumberFormat=me,pe[Vde]=r,pe[E6]=et,pe[M6]=$t,pe[I6]=nt,pe}function WXe(e){const t=qe(e.locale)?e.locale:L1,i=qe(e.fallbackLocale)||Zi(e.fallbackLocale)||Nt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,r=ji(e.missing)?e.missing:void 0,s=Yt(e.silentTranslationWarn)||hf(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,n=Yt(e.silentFallbackWarn)||hf(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=Yt(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=Nt(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,h=ji(e.postTranslation)?e.postTranslation:void 0,p=qe(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,m=Yt(e.sync)?e.sync:!0;let g=e.messages;if(Nt(e.sharedMessages)){const I=e.sharedMessages;g=Object.keys(I).reduce((C,R)=>{const O=C[R]||(C[R]={});return Hs(O,I[R]),C},g||{})}const{__i18n:b,__root:w,__injectWithOption:S}=e,T=e.datetimeFormats,x=e.numberFormats,_=e.flatJson,M=e.translateExistCompatible;return{locale:t,fallbackLocale:i,messages:g,flatJson:_,datetimeFormats:T,numberFormats:x,missing:r,missingWarn:s,fallbackWarn:n,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:h,warnHtmlMessage:p,escapeParameter:f,messageResolver:e.messageResolver,inheritLocale:m,translateExistCompatible:M,__i18n:b,__root:w,__injectWithOption:S}}function $6(e={},t){{const i=lj(WXe(e)),{__extender:r}=e,s={id:i.id,get locale(){return i.locale.value},set locale(n){i.locale.value=n},get fallbackLocale(){return i.fallbackLocale.value},set fallbackLocale(n){i.fallbackLocale.value=n},get messages(){return i.messages.value},get datetimeFormats(){return i.datetimeFormats.value},get numberFormats(){return i.numberFormats.value},get availableLocales(){return i.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(n){},get missing(){return i.getMissingHandler()},set missing(n){i.setMissingHandler(n)},get silentTranslationWarn(){return Yt(i.missingWarn)?!i.missingWarn:i.missingWarn},set silentTranslationWarn(n){i.missingWarn=Yt(n)?!n:n},get silentFallbackWarn(){return Yt(i.fallbackWarn)?!i.fallbackWarn:i.fallbackWarn},set silentFallbackWarn(n){i.fallbackWarn=Yt(n)?!n:n},get modifiers(){return i.modifiers},get formatFallbackMessages(){return i.fallbackFormat},set formatFallbackMessages(n){i.fallbackFormat=n},get postTranslation(){return i.getPostTranslationHandler()},set postTranslation(n){i.setPostTranslationHandler(n)},get sync(){return i.inheritLocale},set sync(n){i.inheritLocale=n},get warnHtmlInMessage(){return i.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(n){i.warnHtmlMessage=n!=="off"},get escapeParameterHtml(){return i.escapeParameter},set escapeParameterHtml(n){i.escapeParameter=n},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(n){},get pluralizationRules(){return i.pluralRules||{}},__composer:i,t(...n){const[o,a,l]=n,u={};let h=null,p=null;if(!qe(o))throw Cs(as.INVALID_ARGUMENT);const f=o;return qe(a)?u.locale=a:Zi(a)?h=a:Nt(a)&&(p=a),Zi(l)?h=l:Nt(l)&&(p=l),Reflect.apply(i.t,i,[f,h||p||{},u])},rt(...n){return Reflect.apply(i.rt,i,[...n])},tc(...n){const[o,a,l]=n,u={plural:1};let h=null,p=null;if(!qe(o))throw Cs(as.INVALID_ARGUMENT);const f=o;return qe(a)?u.locale=a:kr(a)?u.plural=a:Zi(a)?h=a:Nt(a)&&(p=a),qe(l)?u.locale=l:Zi(l)?h=l:Nt(l)&&(p=l),Reflect.apply(i.t,i,[f,h||p||{},u])},te(n,o){return i.te(n,o)},tm(n){return i.tm(n)},getLocaleMessage(n){return i.getLocaleMessage(n)},setLocaleMessage(n,o){i.setLocaleMessage(n,o)},mergeLocaleMessage(n,o){i.mergeLocaleMessage(n,o)},d(...n){return Reflect.apply(i.d,i,[...n])},getDateTimeFormat(n){return i.getDateTimeFormat(n)},setDateTimeFormat(n,o){i.setDateTimeFormat(n,o)},mergeDateTimeFormat(n,o){i.mergeDateTimeFormat(n,o)},n(...n){return Reflect.apply(i.n,i,[...n])},getNumberFormat(n){return i.getNumberFormat(n)},setNumberFormat(n,o){i.setNumberFormat(n,o)},mergeNumberFormat(n,o){i.mergeNumberFormat(n,o)},getChoiceIndex(n,o){return-1}};return s.__extender=r,s}}const uj={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function JXe({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((r,s)=>[...r,...s.type===Ri?s.children:[s]],[]):t.reduce((i,r)=>{const s=e[r];return s&&(i[r]=s()),i},Ei())}function zde(e){return Ri}const ZXe=Xt({name:"i18n-t",props:Hs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>kr(e)||!isNaN(e)}},uj),setup(e,t){const{slots:i,attrs:r}=t,s=e.i18n||lr({useScope:e.scope,__useComponent:!0});return()=>{const n=Object.keys(i).filter(p=>p!=="_"),o=Ei();e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=qe(e.plural)?+e.plural:e.plural);const a=JXe(t,n),l=s[E6](e.keypath,a,o),u=Hs(Ei(),r),h=qe(e.tag)||hi(e.tag)?e.tag:zde();return Jl(h,u,l)}}}),IY=ZXe;function YXe(e){return Zi(e)&&!qe(e[0])}function qde(e,t,i,r){const{slots:s,attrs:n}=t;return()=>{const o={part:!0};let a=Ei();e.locale&&(o.locale=e.locale),qe(e.format)?o.key=e.format:hi(e.format)&&(qe(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((f,m)=>i.includes(m)?Hs(Ei(),f,{[m]:e.format[m]}):f,Ei()));const l=r(e.value,o,a);let u=[o.key];Zi(l)?u=l.map((f,m)=>{const g=s[f.type],b=g?g({[f.type]:f.value,index:m,parts:l}):[f.value];return YXe(b)&&(b[0].key=`${f.type}-${m}`),b}):qe(l)&&(u=[l]);const h=Hs(Ei(),n),p=qe(e.tag)||hi(e.tag)?e.tag:zde();return Jl(p,h,u)}}const KXe=Xt({name:"i18n-n",props:Hs({value:{type:Number,required:!0},format:{type:[String,Object]}},uj),setup(e,t){const i=e.i18n||lr({useScope:e.scope,__useComponent:!0});return qde(e,t,Dde,(...r)=>i[I6](...r))}}),AY=KXe,XXe=Xt({name:"i18n-d",props:Hs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},uj),setup(e,t){const i=e.i18n||lr({useScope:e.scope,__useComponent:!0});return qde(e,t,kde,(...r)=>i[M6](...r))}}),$Y=XXe;function QXe(e,t){const i=e;if(e.mode==="composition")return i.__getInstance(t)||e.global;{const r=i.__getInstance(t);return r!=null?r.__composer:e.global.__composer}}function eQe(e){const t=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw Cs(as.UNEXPECTED_ERROR);const h=QXe(e,a.$),p=CY(u);return[Reflect.apply(h.t,h,[...RY(p)]),h]};return{created:(o,a)=>{const[l,u]=t(a);OA&&e.global===u&&(o.__i18nWatcher=qs(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{OA&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=CY(a);o.textContent=Reflect.apply(l.t,l,[...RY(u)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function CY(e){if(qe(e))return{path:e};if(Nt(e)){if(!("path"in e))throw Cs(as.REQUIRED_VALUE,"path");return e}else throw Cs(as.INVALID_VALUE)}function RY(e){const{path:t,locale:i,args:r,choice:s,plural:n}=e,o={},a=r||{};return qe(i)&&(o.locale=i),kr(s)&&(o.plural=s),kr(n)&&(o.plural=n),[t,a,o]}function tQe(e,t,...i){const r=Nt(i[0])?i[0]:{},s=!!r.useI18nComponentName;(Yt(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":IY.name,"I18nT"].forEach(o=>e.component(o,IY)),[AY.name,"I18nN"].forEach(o=>e.component(o,AY)),[$Y.name,"I18nD"].forEach(o=>e.component(o,$Y))),e.directive("t",eQe(t))}function iQe(e,t,i){return{beforeCreate(){const r=us();if(!r)throw Cs(as.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const n=s.i18n;if(s.__i18n&&(n.__i18n=s.__i18n),n.__root=t,this===this.$root)this.$i18n=OY(e,n);else{n.__injectWithOption=!0,n.__extender=i.__vueI18nExtend,this.$i18n=$6(n);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=OY(e,s);else{this.$i18n=$6({__i18n:s.__i18n,__injectWithOption:!0,__extender:i.__vueI18nExtend,__root:t});const n=this.$i18n;n.__extender&&(n.__disposer=n.__extender(this.$i18n))}else this.$i18n=e;s.__i18nGlobal&&Bde(t,s,s),this.$t=(...n)=>this.$i18n.t(...n),this.$rt=(...n)=>this.$i18n.rt(...n),this.$tc=(...n)=>this.$i18n.tc(...n),this.$te=(n,o)=>this.$i18n.te(n,o),this.$d=(...n)=>this.$i18n.d(...n),this.$n=(...n)=>this.$i18n.n(...n),this.$tm=n=>this.$i18n.tm(n),i.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=us();if(!r)throw Cs(as.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),i.__deleteInstance(r),delete this.$i18n}}}function OY(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Ude](t.pluralizationRules||e.pluralizationRules);const i=n5(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(i).forEach(r=>e.mergeLocaleMessage(r,i[r])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(r=>e.mergeDateTimeFormat(r,t.datetimeFormats[r])),t.numberFormats&&Object.keys(t.numberFormats).forEach(r=>e.mergeNumberFormat(r,t.numberFormats[r])),e}const rQe=Pf("global-vue-i18n");function sQe(e={},t){const i=__VUE_I18N_LEGACY_API__&&Yt(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=Yt(e.globalInjection)?e.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&i?!!e.allowComposition:!0,n=new Map,[o,a]=nQe(e,i),l=Pf("");function u(f){return n.get(f)||null}function h(f,m){n.set(f,m)}function p(f){n.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&i?"legacy":"composition"},get allowComposition(){return s},async install(m,...g){if(m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,f),Nt(g[0])){const S=g[0];f.__composerExtend=S.__composerExtend,f.__vueI18nExtend=S.__vueI18nExtend}let b=null;!i&&r&&(b=fQe(m,f.global)),__VUE_I18N_FULL_INSTALL__&&tQe(m,f,...g),__VUE_I18N_LEGACY_API__&&i&&m.mixin(iQe(a,a.__composer,f));const w=m.unmount;m.unmount=()=>{b&&b(),f.dispose(),w()}},get global(){return a},dispose(){o.stop()},__instances:n,__getInstance:u,__setInstance:h,__deleteInstance:p};return f}}function lr(e={}){const t=us();if(t==null)throw Cs(as.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw Cs(as.NOT_INSTALLED);const i=oQe(t),r=lQe(i),s=Gde(t),n=aQe(e,s);if(__VUE_I18N_LEGACY_API__&&i.mode==="legacy"&&!e.__useComponent){if(!i.allowComposition)throw Cs(as.NOT_AVAILABLE_IN_LEGACY_MODE);return pQe(t,n,r,e)}if(n==="global")return Bde(r,e,s),r;if(n==="parent"){let l=uQe(i,t,e.__useComponent);return l==null&&(l=r),l}const o=i;let a=o.__getInstance(t);if(a==null){const l=Hs({},e);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=lj(l),o.__composerExtend&&(a[A6]=o.__composerExtend(a)),hQe(o,t,a),o.__setInstance(t,a)}return a}function nQe(e,t,i){const r=VC();{const s=__VUE_I18N_LEGACY_API__&&t?r.run(()=>$6(e)):r.run(()=>lj(e));if(s==null)throw Cs(as.UNEXPECTED_ERROR);return[r,s]}}function oQe(e){{const t=$s(e.isCE?rQe:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw Cs(e.isCE?as.NOT_INSTALLED_WITH_PROVIDE:as.UNEXPECTED_ERROR);return t}}function aQe(e,t){return i5(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function lQe(e){return e.mode==="composition"?e.global:e.global.__composer}function uQe(e,t,i=!1){let r=null;const s=t.root;let n=cQe(t,i);for(;n!=null;){const o=e;if(e.mode==="composition")r=o.__getInstance(n);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(n);a!=null&&(r=a.__composer,i&&r&&!r[Vde]&&(r=null))}if(r!=null||s===n)break;n=n.parent}return r}function cQe(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function hQe(e,t,i){Nn(()=>{},t),Eb(()=>{const r=i;e.__deleteInstance(t);const s=r[A6];s&&(s(),delete r[A6])},t)}function pQe(e,t,i,r={}){const s=t==="local",n=Dx(null);if(s&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw Cs(as.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Yt(r.inheritLocale)?r.inheritLocale:!qe(r.locale),a=_e(!s||o?i.locale.value:qe(r.locale)?r.locale:L1),l=_e(!s||o?i.fallbackLocale.value:qe(r.fallbackLocale)||Zi(r.fallbackLocale)||Nt(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=_e(n5(a.value,r)),h=_e(Nt(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),p=_e(Nt(r.numberFormats)?r.numberFormats:{[a.value]:{}}),f=s?i.missingWarn:Yt(r.missingWarn)||hf(r.missingWarn)?r.missingWarn:!0,m=s?i.fallbackWarn:Yt(r.fallbackWarn)||hf(r.fallbackWarn)?r.fallbackWarn:!0,g=s?i.fallbackRoot:Yt(r.fallbackRoot)?r.fallbackRoot:!0,b=!!r.fallbackFormat,w=ji(r.missing)?r.missing:null,S=ji(r.postTranslation)?r.postTranslation:null,T=s?i.warnHtmlMessage:Yt(r.warnHtmlMessage)?r.warnHtmlMessage:!0,x=!!r.escapeParameter,_=s?i.modifiers:Nt(r.modifiers)?r.modifiers:{},M=r.pluralRules||s&&i.pluralRules;function I(){return[a.value,l.value,u.value,h.value,p.value]}const A=Zt({get:()=>n.value?n.value.locale.value:a.value,set:B=>{n.value&&(n.value.locale.value=B),a.value=B}}),C=Zt({get:()=>n.value?n.value.fallbackLocale.value:l.value,set:B=>{n.value&&(n.value.fallbackLocale.value=B),l.value=B}}),R=Zt(()=>n.value?n.value.messages.value:u.value),O=Zt(()=>h.value),k=Zt(()=>p.value);function L(){return n.value?n.value.getPostTranslationHandler():S}function V(B){n.value&&n.value.setPostTranslationHandler(B)}function J(){return n.value?n.value.getMissingHandler():w}function y(B){n.value&&n.value.setMissingHandler(B)}function E(B){return I(),B()}function $(...B){return n.value?E(()=>Reflect.apply(n.value.t,null,[...B])):E(()=>"")}function P(...B){return n.value?Reflect.apply(n.value.rt,null,[...B]):""}function G(...B){return n.value?E(()=>Reflect.apply(n.value.d,null,[...B])):E(()=>"")}function Q(...B){return n.value?E(()=>Reflect.apply(n.value.n,null,[...B])):E(()=>"")}function se(B){return n.value?n.value.tm(B):{}}function ie(B,re){return n.value?n.value.te(B,re):!1}function ye(B){return n.value?n.value.getLocaleMessage(B):{}}function Pe(B,re){n.value&&(n.value.setLocaleMessage(B,re),u.value[B]=re)}function Ie(B,re){n.value&&n.value.mergeLocaleMessage(B,re)}function we(B){return n.value?n.value.getDateTimeFormat(B):{}}function De(B,re){n.value&&(n.value.setDateTimeFormat(B,re),h.value[B]=re)}function Ze(B,re){n.value&&n.value.mergeDateTimeFormat(B,re)}function et(B){return n.value?n.value.getNumberFormat(B):{}}function nt(B,re){n.value&&(n.value.setNumberFormat(B,re),p.value[B]=re)}function $t(B,re){n.value&&n.value.mergeNumberFormat(B,re)}const zt={get id(){return n.value?n.value.id:-1},locale:A,fallbackLocale:C,messages:R,datetimeFormats:O,numberFormats:k,get inheritLocale(){return n.value?n.value.inheritLocale:o},set inheritLocale(B){n.value&&(n.value.inheritLocale=B)},get availableLocales(){return n.value?n.value.availableLocales:Object.keys(u.value)},get modifiers(){return n.value?n.value.modifiers:_},get pluralRules(){return n.value?n.value.pluralRules:M},get isGlobal(){return n.value?n.value.isGlobal:!1},get missingWarn(){return n.value?n.value.missingWarn:f},set missingWarn(B){n.value&&(n.value.missingWarn=B)},get fallbackWarn(){return n.value?n.value.fallbackWarn:m},set fallbackWarn(B){n.value&&(n.value.missingWarn=B)},get fallbackRoot(){return n.value?n.value.fallbackRoot:g},set fallbackRoot(B){n.value&&(n.value.fallbackRoot=B)},get fallbackFormat(){return n.value?n.value.fallbackFormat:b},set fallbackFormat(B){n.value&&(n.value.fallbackFormat=B)},get warnHtmlMessage(){return n.value?n.value.warnHtmlMessage:T},set warnHtmlMessage(B){n.value&&(n.value.warnHtmlMessage=B)},get escapeParameter(){return n.value?n.value.escapeParameter:x},set escapeParameter(B){n.value&&(n.value.escapeParameter=B)},t:$,getPostTranslationHandler:L,setPostTranslationHandler:V,getMissingHandler:J,setMissingHandler:y,rt:P,d:G,n:Q,tm:se,te:ie,getLocaleMessage:ye,setLocaleMessage:Pe,mergeLocaleMessage:Ie,getDateTimeFormat:we,setDateTimeFormat:De,mergeDateTimeFormat:Ze,getNumberFormat:et,setNumberFormat:nt,mergeNumberFormat:$t};function Y(B){B.locale.value=a.value,B.fallbackLocale.value=l.value,Object.keys(u.value).forEach(re=>{B.mergeLocaleMessage(re,u.value[re])}),Object.keys(h.value).forEach(re=>{B.mergeDateTimeFormat(re,h.value[re])}),Object.keys(p.value).forEach(re=>{B.mergeNumberFormat(re,p.value[re])}),B.escapeParameter=x,B.fallbackFormat=b,B.fallbackRoot=g,B.fallbackWarn=m,B.missingWarn=f,B.warnHtmlMessage=T}return KC(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw Cs(as.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const B=n.value=e.proxy.$i18n.__composer;t==="global"?(a.value=B.locale.value,l.value=B.fallbackLocale.value,u.value=B.messages.value,h.value=B.datetimeFormats.value,p.value=B.numberFormats.value):s&&Y(B)}),zt}const dQe=["locale","fallbackLocale","availableLocales"],PY=["t","rt","d","n","tm","te"];function fQe(e,t){const i=Object.create(null);return dQe.forEach(s=>{const n=Object.getOwnPropertyDescriptor(t,s);if(!n)throw Cs(as.UNEXPECTED_ERROR);const o=ui(n.value)?{get(){return n.value.value},set(a){n.value.value=a}}:{get(){return n.get&&n.get()}};Object.defineProperty(i,s,o)}),e.config.globalProperties.$i18n=i,PY.forEach(s=>{const n=Object.getOwnPropertyDescriptor(t,s);if(!n||!n.value)throw Cs(as.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,n)}),()=>{delete e.config.globalProperties.$i18n,PY.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}zXe();__INTLIFY_JIT_COMPILATION__?pY(FXe):pY(DXe);fXe(ZKe);mXe(Mde);if(__INTLIFY_PROD_DEVTOOLS__){const e=Vh();e.__INTLIFY__=!0,sXe(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const mQe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Switch to metric map scale","map.toggleScaleToImperial":"Switch to imperial map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Press enter or space to access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.controls.items":"Use the arrow keys to navigate the items","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw","layer.mismatch":"{name} cannot be displayed in the current projection","layer.filtersdisabled":"Filters have been disabled for {name}","layer.filterwarning":"You are attempting to use a grid that contains unmodifiable layers. Filtering will be partially disabled.","layer.noexportmap":"{name} was attempted to be added as a Map Image Layer but Map Export is not enabled for the service","caption.attributionDefaultText":"Powered by ESRI","caption.attributionLogoAltText":"ESRI logo","caption.attributionLink":"https://www.esri.com/","select.items":" Use Arrow-up/down to select a value. Use Alt+Shift+Arrow-up/down to toggle the select menu"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"français","lang-native":"Français","ramp.about.open":"Ouvrir À propos de PCAR","ramp.about":"À propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous déplacer entre les sections de l'application.","keyboardInstructions.lists":"Lorsqu'un élément de la liste est sélectionné, vous pouvez appuyer sur « Espace » ou « Entrée » pour cliquer sur l'élément. Vous pouvez également vous déplacer au sein de l'élément de la liste au moyen de la touche « Tab ».","keyboardInstructions.map":"Lorsque la carte est sélectionnée, utilisez le pavé curseur pour vous déplacer et appuyez sur « Entrée »  pour sélectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Passer à l'échelle métrique","map.toggleScaleToImperial":"Passer à l'échelle impériale","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Français","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fenêtre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"Développer","notifications.controls.collapse":"Réduire","notifications.controls.clearAll":"Effacer tout","panels.access":"Appuyez sur Entrée ou sur la barre d'espacement pour accéder au panneau","panels.controls.close":"Fermer","panels.controls.pin":"Épingler","panels.controls.unpin":"Désépingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"Réduire","panels.controls.expand":"Développer","panels.controls.collapse":"Réduire","panels.controls.moveRight":"Aller à droite","panels.controls.moveLeft":"Aller à gauche","panels.controls.items":"Utilisez les touches fléchées pour naviguer entre les éléments","panels.alert.open":"Fenêtre {name} ouverte","panels.alert.close":"Fenêtre {name} fermée","panels.alert.minimize":"Fenêtre {name} réduite","layer.error":"Échec du chargement de {id}","layer.longload":"Le chargement de {id} met plus de temps que prévu","layer.longdraw":"{id} prend plus de temps que prévu à extraire","layer.mismatch":"{id} ne peut pas s'afficher dans la projection actuelle","layer.filtersdisabled":"Les filtres ont été désactivés pour {name}","layer.filterwarning":"Vous essayez d'utiliser une grille qui contient des couches non modifiables. Le filtrage sera partiellement désactivé.","layer.noexportmap":"La tentative d’ajouter {name} comme couche d’imagerie cartographique a échouée car elle n’a pu être activé pour ce service","caption.attributionDefaultText":"Propulsé par ESRI","caption.attributionLogoAltText":"Logo ESRI","caption.attributionLink":"https://www.esri.com/fr-fr/home","select.items":"Utilisez Flèche haut/bas pour sélectionner une valeur. Utilisez Alt+Shift+Flèche haut/bas pour basculer le menu de sélection"}},LY="en",yQe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function gQe(){return sQe({legacy:!1,locale:document.documentElement.getAttribute("lang")||LY,fallbackLocale:LY,globalInjection:!0,messages:mQe,numberFormats:yQe})}var XR={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/var NY;function vQe(){return NY||(NY=1,function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},i=e.exports,r=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,h={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)h[a[0][l]]=o[l];return h}return!1}(),s={change:r.fullscreenchange,error:r.fullscreenerror},n={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var h=o[r.requestFullscreen]();h instanceof Promise&&h.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[r.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=s[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=s[o];l&&t.removeEventListener(l,a,!1)},raw:r};if(!r){i?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(n,{isFullscreen:{get:function(){return!!t[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!t[r.fullscreenEnabled]}}}),i?e.exports=n:window.screenfull=n})()}(XR)),XR.exports}var bQe=vQe();const vu=$x(bQe);var L_={exports:{}};L_.exports;var kY;function wQe(){return kY||(kY=1,function(e,t){var i=200,r="__lodash_hash_undefined__",s=9007199254740991,n="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",h="[object Function]",p="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",b="[object Promise]",w="[object RegExp]",S="[object Set]",T="[object String]",x="[object Symbol]",_="[object WeakMap]",M="[object ArrayBuffer]",I="[object DataView]",A="[object Float32Array]",C="[object Float64Array]",R="[object Int8Array]",O="[object Int16Array]",k="[object Int32Array]",L="[object Uint8Array]",V="[object Uint8ClampedArray]",J="[object Uint16Array]",y="[object Uint32Array]",E=/[\\^$.*+?()[\]{}|]/g,$=/\w*$/,P=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,Q={};Q[n]=Q[o]=Q[M]=Q[I]=Q[a]=Q[l]=Q[A]=Q[C]=Q[R]=Q[O]=Q[k]=Q[f]=Q[m]=Q[g]=Q[w]=Q[S]=Q[T]=Q[x]=Q[L]=Q[V]=Q[J]=Q[y]=!0,Q[u]=Q[h]=Q[_]=!1;var se=typeof hE=="object"&&hE&&hE.Object===Object&&hE,ie=typeof self=="object"&&self&&self.Object===Object&&self,ye=se||ie||Function("return this")(),Pe=t&&!t.nodeType&&t,Ie=Pe&&!0&&e&&!e.nodeType&&e,we=Ie&&Ie.exports===Pe;function De(z,de){return z.set(de[0],de[1]),z}function Ze(z,de){return z.add(de),z}function et(z,de){for(var Te=-1,ut=z?z.length:0;++Te<ut&&de(z[Te],Te,z)!==!1;);return z}function nt(z,de){for(var Te=-1,ut=de.length,Ps=z.length;++Te<ut;)z[Ps+Te]=de[Te];return z}function $t(z,de,Te,ut){for(var Ps=-1,so=z?z.length:0;++Ps<so;)Te=de(Te,z[Ps],Ps,z);return Te}function zt(z,de){for(var Te=-1,ut=Array(z);++Te<z;)ut[Te]=de(Te);return ut}function Y(z,de){return z?.[de]}function B(z){var de=!1;if(z!=null&&typeof z.toString!="function")try{de=!!(z+"")}catch{}return de}function re(z){var de=-1,Te=Array(z.size);return z.forEach(function(ut,Ps){Te[++de]=[Ps,ut]}),Te}function fe(z,de){return function(Te){return z(de(Te))}}function ve(z){var de=-1,Te=Array(z.size);return z.forEach(function(ut){Te[++de]=ut}),Te}var D=Array.prototype,q=Function.prototype,N=Object.prototype,U=ye["__core-js_shared__"],H=function(){var z=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),ne=q.toString,me=N.hasOwnProperty,pe=N.toString,Z=RegExp("^"+ne.call(me).replace(E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=we?ye.Buffer:void 0,Ee=ye.Symbol,Fe=ye.Uint8Array,Tt=fe(Object.getPrototypeOf,Object),Wt=Object.create,Gt=N.propertyIsEnumerable,Qt=D.splice,be=Object.getOwnPropertySymbols,Ye=te?te.isBuffer:void 0,tt=fe(Object.keys,Object),Pt=Dg(ye,"DataView"),jt=Dg(ye,"Map"),Rr=Dg(ye,"Promise"),ds=Dg(ye,"Set"),_a=Dg(ye,"WeakMap"),du=Dg(Object,"create"),hl=Vf(Pt),Ff=Vf(jt),fp=Vf(Rr),fu=Vf(ds),Ib=Vf(_a),mp=Ee?Ee.prototype:void 0,he=mp?mp.valueOf:void 0;function ni(z){var de=-1,Te=z?z.length:0;for(this.clear();++de<Te;){var ut=z[de];this.set(ut[0],ut[1])}}function yp(){this.__data__=du?du(null):{}}function zo(z){return this.has(z)&&delete this.__data__[z]}function Lg(z){var de=this.__data__;if(du){var Te=de[z];return Te===r?void 0:Te}return me.call(de,z)?de[z]:void 0}function it(z){var de=this.__data__;return du?de[z]!==void 0:me.call(de,z)}function Ng(z,de){var Te=this.__data__;return Te[z]=du&&de===void 0?r:de,this}ni.prototype.clear=yp,ni.prototype.delete=zo,ni.prototype.get=Lg,ni.prototype.has=it,ni.prototype.set=Ng;function xi(z){var de=-1,Te=z?z.length:0;for(this.clear();++de<Te;){var ut=z[de];this.set(ut[0],ut[1])}}function jf(){this.__data__=[]}function v5(z){var de=this.__data__,Te=kg(de,z);if(Te<0)return!1;var ut=de.length-1;return Te==ut?de.pop():Qt.call(de,Te,1),!0}function pl(z){var de=this.__data__,Te=kg(de,z);return Te<0?void 0:de[Te][1]}function Wx(z){return kg(this.__data__,z)>-1}function Jx(z,de){var Te=this.__data__,ut=kg(Te,z);return ut<0?Te.push([z,de]):Te[ut][1]=de,this}xi.prototype.clear=jf,xi.prototype.delete=v5,xi.prototype.get=pl,xi.prototype.has=Wx,xi.prototype.set=Jx;function St(z){var de=-1,Te=z?z.length:0;for(this.clear();++de<Te;){var ut=z[de];this.set(ut[0],ut[1])}}function b5(){this.__data__={hash:new ni,map:new(jt||xi),string:new ni}}function Zx(z){return Xx(this,z).delete(z)}function w5(z){return Xx(this,z).get(z)}function _5(z){return Xx(this,z).has(z)}function Ab(z,de){return Xx(this,z).set(z,de),this}St.prototype.clear=b5,St.prototype.delete=Zx,St.prototype.get=w5,St.prototype.has=_5,St.prototype.set=Ab;function gp(z){this.__data__=new xi(z)}function $b(){this.__data__=new xi}function Fr(z){return this.__data__.delete(z)}function S5(z){return this.__data__.get(z)}function Yx(z){return this.__data__.has(z)}function x5(z,de){var Te=this.__data__;if(Te instanceof xi){var ut=Te.__data__;if(!jt||ut.length<i-1)return ut.push([z,de]),this;Te=this.__data__=new St(ut)}return Te.set(z,de),this}gp.prototype.clear=$b,gp.prototype.delete=Fr,gp.prototype.get=S5,gp.prototype.has=Yx,gp.prototype.set=x5;function T5(z,de){var Te=A5(z)||Sme(z)?zt(z.length,String):[],ut=Te.length,Ps=!!ut;for(var so in z)me.call(z,so)&&!(Ps&&(so=="length"||vme(so,ut)))&&Te.push(so);return Te}function Kx(z,de,Te){var ut=z[de];(!(me.call(z,de)&&Qj(ut,Te))||Te===void 0&&!(de in z))&&(z[de]=Te)}function kg(z,de){for(var Te=z.length;Te--;)if(Qj(z[Te][0],de))return Te;return-1}function E5(z,de){return z&&Yj(de,$5(de),z)}function Ks(z,de,Te,ut,Ps,so,Lc){var no;if(ut&&(no=so?ut(z,Ps,so,Lc):ut(z)),no!==void 0)return no;if(!Qx(z))return z;var iU=A5(z);if(iU){if(no=mme(z),!de)return pme(z,no)}else{var Fg=Uf(z),rU=Fg==h||Fg==p;if(Tme(z))return Et(z,de);if(Fg==g||Fg==n||rU&&!so){if(B(z))return so?z:{};if(no=yme(rU?{}:z),!de)return dme(z,E5(no,z))}else{if(!Q[Fg])return so?z:{};no=gme(z,Fg,Ks,de)}}Lc||(Lc=new gp);var sU=Lc.get(z);if(sU)return sU;if(Lc.set(z,no),!iU)var nU=Te?fme(z):$5(z);return et(nU||z,function(C5,eT){nU&&(eT=C5,C5=z[eT]),Kx(no,eT,Ks(C5,de,Te,ut,eT,z,Lc))}),no}function M5(z){return Qx(z)?Wt(z):{}}function I5(z,de,Te){var ut=de(z);return A5(z)?ut:nt(ut,Te(z))}function X(z){return pe.call(z)}function Se(z){if(!Qx(z)||wme(z))return!1;var de=tU(z)||B(z)?Z:P;return de.test(Vf(z))}function $e(z){if(!Xj(z))return tt(z);var de=[];for(var Te in Object(z))me.call(z,Te)&&Te!="constructor"&&de.push(Te);return de}function Et(z,de){if(de)return z.slice();var Te=new z.constructor(z.length);return z.copy(Te),Te}function pi(z){var de=new z.constructor(z.byteLength);return new Fe(de).set(new Fe(z)),de}function Qi(z,de){var Te=de?pi(z.buffer):z.buffer;return new z.constructor(Te,z.byteOffset,z.byteLength)}function Or(z,de,Te){var ut=de?Te(re(z),!0):re(z);return $t(ut,De,new z.constructor)}function Xs(z){var de=new z.constructor(z.source,$.exec(z));return de.lastIndex=z.lastIndex,de}function ume(z,de,Te){var ut=de?Te(ve(z),!0):ve(z);return $t(ut,Ze,new z.constructor)}function cme(z){return he?Object(he.call(z)):{}}function hme(z,de){var Te=de?pi(z.buffer):z.buffer;return new z.constructor(Te,z.byteOffset,z.length)}function pme(z,de){var Te=-1,ut=z.length;for(de||(de=Array(ut));++Te<ut;)de[Te]=z[Te];return de}function Yj(z,de,Te,ut){Te||(Te={});for(var Ps=-1,so=de.length;++Ps<so;){var Lc=de[Ps],no=void 0;Kx(Te,Lc,no===void 0?z[Lc]:no)}return Te}function dme(z,de){return Yj(z,Kj(z),de)}function fme(z){return I5(z,$5,Kj)}function Xx(z,de){var Te=z.__data__;return bme(de)?Te[typeof de=="string"?"string":"hash"]:Te.map}function Dg(z,de){var Te=Y(z,de);return Se(Te)?Te:void 0}var Kj=be?fe(be,Object):Ime,Uf=X;(Pt&&Uf(new Pt(new ArrayBuffer(1)))!=I||jt&&Uf(new jt)!=f||Rr&&Uf(Rr.resolve())!=b||ds&&Uf(new ds)!=S||_a&&Uf(new _a)!=_)&&(Uf=function(z){var de=pe.call(z),Te=de==g?z.constructor:void 0,ut=Te?Vf(Te):void 0;if(ut)switch(ut){case hl:return I;case Ff:return f;case fp:return b;case fu:return S;case Ib:return _}return de});function mme(z){var de=z.length,Te=z.constructor(de);return de&&typeof z[0]=="string"&&me.call(z,"index")&&(Te.index=z.index,Te.input=z.input),Te}function yme(z){return typeof z.constructor=="function"&&!Xj(z)?M5(Tt(z)):{}}function gme(z,de,Te,ut){var Ps=z.constructor;switch(de){case M:return pi(z);case a:case l:return new Ps(+z);case I:return Qi(z,ut);case A:case C:case R:case O:case k:case L:case V:case J:case y:return hme(z,ut);case f:return Or(z,ut,Te);case m:case T:return new Ps(z);case w:return Xs(z);case S:return ume(z,ut,Te);case x:return cme(z)}}function vme(z,de){return de=de??s,!!de&&(typeof z=="number"||G.test(z))&&z>-1&&z%1==0&&z<de}function bme(z){var de=typeof z;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?z!=="__proto__":z===null}function wme(z){return!!H&&H in z}function Xj(z){var de=z&&z.constructor,Te=typeof de=="function"&&de.prototype||N;return z===Te}function Vf(z){if(z!=null){try{return ne.call(z)}catch{}try{return z+""}catch{}}return""}function _me(z){return Ks(z,!0,!0)}function Qj(z,de){return z===de||z!==z&&de!==de}function Sme(z){return xme(z)&&me.call(z,"callee")&&(!Gt.call(z,"callee")||pe.call(z)==n)}var A5=Array.isArray;function eU(z){return z!=null&&Eme(z.length)&&!tU(z)}function xme(z){return Mme(z)&&eU(z)}var Tme=Ye||Ame;function tU(z){var de=Qx(z)?pe.call(z):"";return de==h||de==p}function Eme(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=s}function Qx(z){var de=typeof z;return!!z&&(de=="object"||de=="function")}function Mme(z){return!!z&&typeof z=="object"}function $5(z){return eU(z)?T5(z):$e(z)}function Ime(){return[]}function Ame(){return!1}e.exports=_me}(L_,L_.exports)),L_.exports}var _Qe=wQe();const DY=$x(_Qe),LA=vr("maptip",()=>{const e=_e(void 0),t=_e(void 0),i=_e("");function r(o){e.value=o}function s(o){t.value=o}function n(o){i.value=o}return{maptipInstance:e,maptipPoint:t,content:i,setMaptipInstance:r,setMaptipPoint:s,setMaptipContent:n}}),SQe=Xt({__name:"esri-map",setup(e){const t=LA(),i=$s("iApi"),r=Zt(()=>t.maptipPoint),s=Zt(()=>t.maptipInstance),n=Zt(()=>t.content),o=Js([]);o.push(qs(r,()=>{if(r.value){let l,u;const h=i.geo.map.getPixelWidth()/2,p=0,f=i.geo.map.mapPointToScreenPoint(r.value);l=f.screenX-h,u=p-f.screenY,s.value.setProps({offset:[l,u]}),n.value&&n.value!==""&&s.value.show()}else s.value.hide()})),o.push(qs(n,l=>{l&&l!==""&&r?(s.value.setContent(l),s.value.show()):s.value.hide()})),Pc(()=>{o.forEach(l=>l())});const a=()=>{i.geo.map.setMouseFocus()};return(l,u)=>{const h=Ii("tippy");return Mi((Re(),We("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:a,onKeydown:u[0]||(u[0]=ade(e5(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[h,{allowHTML:!0,zIndex:150,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}}});var Hde={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},cj={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},xQe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],NA={CSS:{},springs:{}};function sc(e,t,i){return Math.min(Math.max(e,t),i)}function S2(e,t){return e.indexOf(t)>-1}function QR(e,t){return e.apply(null,t)}var yt={arr:function(e){return Array.isArray(e)},obj:function(e){return S2(Object.prototype.toString.call(e),"Object")},pth:function(e){return yt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||yt.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return yt.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return yt.hex(e)||yt.rgb(e)||yt.hsl(e)},key:function(e){return!Hde.hasOwnProperty(e)&&!cj.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Wde(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function Jde(e,t){var i=Wde(e),r=sc(yt.und(i[0])?1:i[0],.1,100),s=sc(yt.und(i[1])?100:i[1],.1,100),n=sc(yt.und(i[2])?10:i[2],.1,100),o=sc(yt.und(i[3])?0:i[3],.1,100),a=Math.sqrt(s/r),l=n/(2*Math.sqrt(s*r)),u=l<1?a*Math.sqrt(1-l*l):0,h=1,p=l<1?(l*a+-o)/u:-o+a;function f(g){var b=t?t*g/1e3:g;return l<1?b=Math.exp(-b*l*a)*(h*Math.cos(u*b)+p*Math.sin(u*b)):b=(h+p*b)*Math.exp(-b*a),g===0||g===1?g:1-b}function m(){var g=NA.springs[e];if(g)return g;for(var b=1/6,w=0,S=0;;)if(w+=b,f(w)===1){if(S++,S>=16)break}else S=0;var T=w*b*1e3;return NA.springs[e]=T,T}return t?f:m}function TQe(e){return e===void 0&&(e=10),function(t){return Math.ceil(sc(t,1e-6,1)*e)*(1/e)}}var EQe=function(){var e=11,t=1/(e-1);function i(h,p){return 1-3*p+3*h}function r(h,p){return 3*p-6*h}function s(h){return 3*h}function n(h,p,f){return((i(p,f)*h+r(p,f))*h+s(p))*h}function o(h,p,f){return 3*i(p,f)*h*h+2*r(p,f)*h+s(p)}function a(h,p,f,m,g){var b,w,S=0;do w=p+(f-p)/2,b=n(w,m,g)-h,b>0?f=w:p=w;while(Math.abs(b)>1e-7&&++S<10);return w}function l(h,p,f,m){for(var g=0;g<4;++g){var b=o(p,f,m);if(b===0)return p;var w=n(p,f,m)-h;p-=w/b}return p}function u(h,p,f,m){if(!(0<=h&&h<=1&&0<=f&&f<=1))return;var g=new Float32Array(e);if(h!==p||f!==m)for(var b=0;b<e;++b)g[b]=n(b*t,h,f);function w(S){for(var T=0,x=1,_=e-1;x!==_&&g[x]<=S;++x)T+=t;--x;var M=(S-g[x])/(g[x+1]-g[x]),I=T+M*t,A=o(I,h,f);return A>=.001?l(S,I,h,f):A===0?I:a(S,T,T+t,h,f)}return function(S){return h===p&&f===m||S===0||S===1?S:n(w(S),p,m)}}return u}(),Zde=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var s,n=4;r<((s=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((s*3-2)/22-r,2)}},Elastic:function(r,s){r===void 0&&(r=1),s===void 0&&(s=.5);var n=sc(r,1,10),o=sc(s,.1,2);return function(a){return a===0||a===1?a:-n*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/o)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,s){t[r]=function(){return function(n){return Math.pow(n,s+2)}}}),Object.keys(t).forEach(function(r){var s=t[r];e["easeIn"+r]=s,e["easeOut"+r]=function(n,o){return function(a){return 1-s(n,o)(1-a)}},e["easeInOut"+r]=function(n,o){return function(a){return a<.5?s(n,o)(a*2)/2:1-s(n,o)(a*-2+2)/2}},e["easeOutIn"+r]=function(n,o){return function(a){return a<.5?(1-s(n,o)(1-a*2))/2:(s(n,o)(a*2-1)+1)/2}}}),e}();function hj(e,t){if(yt.fnc(e))return e;var i=e.split("(")[0],r=Zde[i],s=Wde(e);switch(i){case"spring":return Jde(e,t);case"cubicBezier":return QR(EQe,s);case"steps":return QR(TQe,s);default:return QR(r,s)}}function Yde(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function o5(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,s=[],n=0;n<i;n++)if(n in e){var o=e[n];t.call(r,o,n,e)&&s.push(o)}return s}function a5(e){return e.reduce(function(t,i){return t.concat(yt.arr(i)?a5(i):i)},[])}function FY(e){return yt.arr(e)?e:(yt.str(e)&&(e=Yde(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function pj(e,t){return e.some(function(i){return i===t})}function dj(e){var t={};for(var i in e)t[i]=e[i];return t}function C6(e,t){var i=dj(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function l5(e,t){var i=dj(e);for(var r in t)i[r]=yt.und(e[r])?t[r]:e[r];return i}function MQe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function IQe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(a,l,u,h){return l+l+u+u+h+h}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),s=parseInt(r[1],16),n=parseInt(r[2],16),o=parseInt(r[3],16);return"rgba("+s+","+n+","+o+",1)"}function AQe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,n=t[4]||1;function o(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var a,l,u;if(r==0)a=l=u=s;else{var h=s<.5?s*(1+r):s+r-s*r,p=2*s-h;a=o(p,h,i+1/3),l=o(p,h,i),u=o(p,h,i-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+n+")"}function $Qe(e){if(yt.rgb(e))return MQe(e);if(yt.hex(e))return IQe(e);if(yt.hsl(e))return AQe(e)}function Xh(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function CQe(e){if(S2(e,"translate")||e==="perspective")return"px";if(S2(e,"rotate")||S2(e,"skew"))return"deg"}function R6(e,t){return yt.fnc(e)?e(t.target,t.id,t.total):e}function nc(e,t){return e.getAttribute(t)}function fj(e,t,i){var r=Xh(t);if(pj([i,"deg","rad","turn"],r))return t;var s=NA.CSS[t+i];if(!yt.und(s))return s;var n=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=n+i;var l=n/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return NA.CSS[t+i]=u,u}function Kde(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?fj(e,s,i):s}}function mj(e,t){if(yt.dom(e)&&!yt.inp(e)&&(!yt.nil(nc(e,t))||yt.svg(e)&&e[t]))return"attribute";if(yt.dom(e)&&pj(xQe,t))return"transform";if(yt.dom(e)&&t!=="transform"&&Kde(e,t))return"css";if(e[t]!=null)return"object"}function Xde(e){if(yt.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,s;s=i.exec(t);)r.set(s[1],s[2]);return r}}function RQe(e,t,i,r){var s=S2(t,"scale")?1:0+CQe(t),n=Xde(e).get(t)||s;return i&&(i.transforms.list.set(t,n),i.transforms.last=t),r?fj(e,n,r):n}function yj(e,t,i,r){switch(mj(e,t)){case"transform":return RQe(e,t,r,i);case"css":return Kde(e,t,i);case"attribute":return nc(e,t);default:return e[t]||0}}function gj(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Xh(e)||0,s=parseFloat(t),n=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return s+n+r;case"-":return s-n+r;case"*":return s*n+r}}function Qde(e,t){if(yt.col(e))return $Qe(e);if(/\s/g.test(e))return e;var i=Xh(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function vj(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function OQe(e){return Math.PI*2*nc(e,"r")}function PQe(e){return nc(e,"width")*2+nc(e,"height")*2}function LQe(e){return vj({x:nc(e,"x1"),y:nc(e,"y1")},{x:nc(e,"x2"),y:nc(e,"y2")})}function efe(e){for(var t=e.points,i=0,r,s=0;s<t.numberOfItems;s++){var n=t.getItem(s);s>0&&(i+=vj(r,n)),r=n}return i}function NQe(e){var t=e.points;return efe(e)+vj(t.getItem(t.numberOfItems-1),t.getItem(0))}function tfe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return OQe(e);case"rect":return PQe(e);case"line":return LQe(e);case"polyline":return efe(e);case"polygon":return NQe(e)}}function kQe(e){var t=tfe(e);return e.setAttribute("stroke-dasharray",t),t}function DQe(e){for(var t=e.parentNode;yt.svg(t)&&yt.svg(t.parentNode);)t=t.parentNode;return t}function ife(e,t){var i=t||{},r=i.el||DQe(e),s=r.getBoundingClientRect(),n=nc(r,"viewBox"),o=s.width,a=s.height,l=i.viewBox||(n?n.split(" "):[0,0,o,a]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function FQe(e,t){var i=yt.str(e)?Yde(e)[0]:e,r=t||100;return function(s){return{property:s,el:i,svg:ife(i),totalLength:tfe(i)*(r/100)}}}function jQe(e,t,i){function r(h){h===void 0&&(h=0);var p=t+h>=1?t+h:0;return e.el.getPointAtLength(p)}var s=ife(e.el,e.svg),n=r(),o=r(-1),a=r(1),l=i?1:s.w/s.vW,u=i?1:s.h/s.vH;switch(e.property){case"x":return(n.x-s.x)*l;case"y":return(n.y-s.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function jY(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Qde(yt.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:yt.str(e)||t?r.split(i):[]}}function bj(e){var t=e?a5(yt.arr(e)?e.map(FY):FY(e)):[];return o5(t,function(i,r,s){return s.indexOf(i)===r})}function rfe(e){var t=bj(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:Xde(i)}}})}function UQe(e,t){var i=dj(t);if(/^spring/.test(i.easing)&&(i.duration=Jde(i.easing)),yt.arr(e)){var r=e.length,s=r===2&&!yt.obj(e[0]);s?e={value:e}:yt.fnc(t.duration)||(i.duration=t.duration/r)}var n=yt.arr(e)?e:[e];return n.map(function(o,a){var l=yt.obj(o)&&!yt.pth(o)?o:{value:o};return yt.und(l.delay)&&(l.delay=a?0:t.delay),yt.und(l.endDelay)&&(l.endDelay=a===n.length-1?t.endDelay:0),l}).map(function(o){return l5(o,i)})}function VQe(e){for(var t=o5(a5(e.map(function(n){return Object.keys(n)})),function(n){return yt.key(n)}).reduce(function(n,o){return n.indexOf(o)<0&&n.push(o),n},[]),i={},r=function(n){var o=t[n];i[o]=e.map(function(a){var l={};for(var u in a)yt.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},s=0;s<t.length;s++)r(s);return i}function GQe(e,t){var i=[],r=t.keyframes;r&&(t=l5(VQe(r),t));for(var s in t)yt.key(s)&&i.push({name:s,tweens:UQe(t[s],e)});return i}function BQe(e,t){var i={};for(var r in e){var s=R6(e[r],t);yt.arr(s)&&(s=s.map(function(n){return R6(n,t)}),s.length===1&&(s=s[0])),i[r]=s}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function zQe(e,t){var i;return e.tweens.map(function(r){var s=BQe(r,t),n=s.value,o=yt.arr(n)?n[1]:n,a=Xh(o),l=yj(t.target,e.name,a,t),u=i?i.to.original:l,h=yt.arr(n)?n[0]:u,p=Xh(h)||Xh(l),f=a||p;return yt.und(o)&&(o=u),s.from=jY(h,f),s.to=jY(gj(o,h),f),s.start=i?i.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=hj(s.easing,s.duration),s.isPath=yt.pth(n),s.isPathTargetInsideSVG=s.isPath&&yt.svg(t.target),s.isColor=yt.col(s.from.original),s.isColor&&(s.round=1),i=s,s})}var sfe={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,s){if(r.list.set(t,i),t===r.last||s){var n="";r.list.forEach(function(o,a){n+=a+"("+o+") "}),e.style.transform=n}}};function nfe(e,t){var i=rfe(e);i.forEach(function(r){for(var s in t){var n=R6(t[s],r),o=r.target,a=Xh(n),l=yj(o,s,a,r),u=a||Xh(l),h=gj(Qde(n,u),l),p=mj(o,s);sfe[p](o,s,h,r.transforms,!0)}})}function qQe(e,t){var i=mj(e.target,t.name);if(i){var r=zQe(t,e),s=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:s.end,delay:r[0].delay,endDelay:s.endDelay}}}function HQe(e,t){return o5(a5(e.map(function(i){return t.map(function(r){return qQe(i,r)})})),function(i){return!yt.und(i)})}function ofe(e,t){var i=e.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},s={};return s.duration=i?Math.max.apply(Math,e.map(function(n){return r(n)+n.duration})):t.duration,s.delay=i?Math.min.apply(Math,e.map(function(n){return r(n)+n.delay})):t.delay,s.endDelay=i?s.duration-Math.max.apply(Math,e.map(function(n){return r(n)+n.duration-n.endDelay})):t.endDelay,s}var UY=0;function WQe(e){var t=C6(Hde,e),i=C6(cj,e),r=GQe(i,e),s=rfe(e.targets),n=HQe(s,r),o=ofe(n,i),a=UY;return UY++,l5(t,{id:a,children:[],animatables:s,animations:n,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var Hl=[],afe=function(){var e;function t(){!e&&(!VY()||!yr.suspendWhenDocumentHidden)&&Hl.length>0&&(e=requestAnimationFrame(i))}function i(s){for(var n=Hl.length,o=0;o<n;){var a=Hl[o];a.paused?(Hl.splice(o,1),n--):(a.tick(s),o++)}e=o>0?requestAnimationFrame(i):void 0}function r(){yr.suspendWhenDocumentHidden&&(VY()?e=cancelAnimationFrame(e):(Hl.forEach(function(s){return s._onDocumentVisibility()}),afe()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),t}();function VY(){return!!document&&document.hidden}function yr(e){e===void 0&&(e={});var t=0,i=0,r=0,s,n=0,o=null;function a(T){var x=window.Promise&&new Promise(function(_){return o=_});return T.finished=x,x}var l=WQe(e);a(l);function u(){var T=l.direction;T!=="alternate"&&(l.direction=T!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(x){return x.reversed=l.reversed})}function h(T){return l.reversed?l.duration-T:T}function p(){t=0,i=h(l.currentTime)*(1/yr.speed)}function f(T,x){x&&x.seek(T-x.timelineOffset)}function m(T){if(l.reversePlayback)for(var _=n;_--;)f(T,s[_]);else for(var x=0;x<n;x++)f(T,s[x])}function g(T){for(var x=0,_=l.animations,M=_.length;x<M;){var I=_[x],A=I.animatable,C=I.tweens,R=C.length-1,O=C[R];R&&(O=o5(C,function(we){return T<we.end})[0]||O);for(var k=sc(T-O.start-O.delay,0,O.duration)/O.duration,L=isNaN(k)?1:O.easing(k),V=O.to.strings,J=O.round,y=[],E=O.to.numbers.length,$=void 0,P=0;P<E;P++){var G=void 0,Q=O.to.numbers[P],se=O.from.numbers[P]||0;O.isPath?G=jQe(O.value,L*Q,O.isPathTargetInsideSVG):G=se+L*(Q-se),J&&(O.isColor&&P>2||(G=Math.round(G*J)/J)),y.push(G)}var ie=V.length;if(!ie)$=y[0];else{$=V[0];for(var ye=0;ye<ie;ye++){V[ye];var Pe=V[ye+1],Ie=y[ye];isNaN(Ie)||(Pe?$+=Ie+Pe:$+=Ie+" ")}}sfe[I.type](A.target,I.property,$,A.transforms),I.currentValue=$,x++}}function b(T){l[T]&&!l.passThrough&&l[T](l)}function w(){l.remaining&&l.remaining!==!0&&l.remaining--}function S(T){var x=l.duration,_=l.delay,M=x-l.endDelay,I=h(T);l.progress=sc(I/x*100,0,100),l.reversePlayback=I<l.currentTime,s&&m(I),!l.began&&l.currentTime>0&&(l.began=!0,b("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,b("loopBegin")),I<=_&&l.currentTime!==0&&g(0),(I>=M&&l.currentTime!==x||!x)&&g(x),I>_&&I<M?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,b("changeBegin")),b("change"),g(I)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,b("changeComplete")),l.currentTime=sc(I,0,x),l.began&&b("update"),T>=x&&(i=0,w(),l.remaining?(t=r,b("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,b("loopComplete"),b("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var T=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=T==="reverse",l.remaining=l.loop,s=l.children,n=s.length;for(var x=n;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||T==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=p,l.set=function(T,x){return nfe(T,x),l},l.tick=function(T){r=T,t||(t=r),S((r+(i-t))*yr.speed)},l.seek=function(T){S(h(T))},l.pause=function(){l.paused=!0,p()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Hl.push(l),p(),afe())},l.reverse=function(){u(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.remove=function(T){var x=bj(T);lfe(x,l)},l.reset(),l.autoplay&&l.play(),l}function GY(e,t){for(var i=t.length;i--;)pj(e,t[i].animatable.target)&&t.splice(i,1)}function lfe(e,t){var i=t.animations,r=t.children;GY(e,i);for(var s=r.length;s--;){var n=r[s],o=n.animations;GY(e,o),!o.length&&!n.children.length&&r.splice(s,1)}!i.length&&!r.length&&t.pause()}function JQe(e){for(var t=bj(e),i=Hl.length;i--;){var r=Hl[i];lfe(t,r)}}function ZQe(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?hj(t.easing):null,s=t.grid,n=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",h=yt.arr(e),p=parseFloat(h?e[0]:e),f=h?parseFloat(e[1]):0,m=Xh(h?e[1]:e)||0,g=t.start||0+(h?p:0),b=[],w=0;return function(S,T,x){if(a&&(o=0),l&&(o=(x-1)/2),u&&(o=x-1),!b.length){for(var _=0;_<x;_++){if(!s)b.push(Math.abs(o-_));else{var M=l?(s[0]-1)/2:o%s[0],I=l?(s[1]-1)/2:Math.floor(o/s[0]),A=_%s[0],C=Math.floor(_/s[0]),R=M-A,O=I-C,k=Math.sqrt(R*R+O*O);n==="x"&&(k=-R),n==="y"&&(k=-O),b.push(k)}w=Math.max.apply(Math,b)}r&&(b=b.map(function(V){return r(V/w)*w})),i==="reverse"&&(b=b.map(function(V){return n?V<0?V*-1:-V:Math.abs(w-V)}))}var L=h?(f-p)/w:p;return g+L*(Math.round(b[T]*100)/100)+m}}function YQe(e){e===void 0&&(e={});var t=yr(e);return t.duration=0,t.add=function(i,r){var s=Hl.indexOf(t),n=t.children;s>-1&&Hl.splice(s,1);function o(f){f.passThrough=!0}for(var a=0;a<n.length;a++)o(n[a]);var l=l5(i,C6(cj,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=yt.und(r)?u:gj(r,u),o(t),t.seek(l.timelineOffset);var h=yr(l);o(h),n.push(h);var p=ofe(n,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}yr.version="3.2.1";yr.speed=1;yr.suspendWhenDocumentHidden=!0;yr.running=Hl;yr.remove=JQe;yr.get=yj;yr.set=nfe;yr.convertPx=fj;yr.path=FQe;yr.setDashoffset=kQe;yr.stagger=ZQe;yr.timeline=YQe;yr.easing=hj;yr.penner=Zde;yr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};class ufe{resizeObserver;constructor(t){this.resizeObserver="ResizeObserver"in self?new ResizeObserver(function(i){const r={xs:200,sm:576,md:768,lg:960};i.forEach(function(s){const n=s.target.dataset.breakpoints?JSON.parse(s.target.dataset.breakpoints):t??r;Object.keys(n).forEach(function(o){const a=n[o];s.contentRect.width>=a?s.target.classList.add(o):s.target.classList.remove(o)})})}):void 0}observe(t){this.resizeObserver?.observe(t)}}const KQe=["data-cy"],cfe=Xt({__name:"panel-container",props:{panel:{type:Object,required:!0}},setup(e){const t=_e(null),i=e,r=_e(!1);Nn(()=>{i.panel.teleport&&new ufe({xs:0,sm:461,...i.panel.teleport.breakpoints}).observe(t.value)});const s=(l,u,h)=>{if(r.value)return u();yr({targets:l,opacity:{value:h,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:u})},n=(l,u)=>{s(l,u,[0,1])},o=l=>{l.classList.contains("screen-spinner")||(r.value=i.panel.isScreenLoaded(i.panel.route.screen),t.value.querySelectorAll("[focus-item").forEach(u=>u.classList.remove("default-focus-style")))},a=(l,u)=>{s(l,u,[0,1])};return(l,u)=>{const h=Ii("focus-container");return Re(),We("div",{class:Cr(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:Cf(e.panel.style),"data-cy":e.panel.id,ref_key:"componentEl",ref:t},[Bt(X7,{onBeforeLeave:o,onLeave:a,onEnter:n},{default:Yr(()=>[Mi((Re(),Ji(npe(e.panel.route.screen),K7({class:"h-full"},e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[h]])]),_:1})],14,KQe)}}}),pg=vr("panel",()=>{const e=_e(void 0),t=_e(void 0),i=_e(0),r=_e(0),s=_e(!1),n=_e(!0),o=_e({}),a=_e({}),l=_e([]),u=_e([]),h=_e([]),p=Zt(()=>r.value);function f(k){return k==="xs"&&h.value.length>0?[h.value.slice().pop()]:h.value}function m(k){const L=[];return k.forEach(V=>{V in a.value&&L.push(a.value[V].getPromise())}),L}function g(k){I(k),_(),t.value=void 0}function b(k){A(k),_()}function w(k,L){C(k,L),_()}function S(k){R(k),_()}function T(k){i.value=k,_()}function x(k){s.value=k}function _(){let k=i.value;const L=[],V=350,J=12,y=600;for(let E=l.value.length-1;E>=0;E--){const $=l.value[E];let P=$.width||V;if(s.value?P=k:P+=J,$.id==="grid"&&(P=Math.max(Math.min(P,k),y)),(k>=P&&!s.value||L.length===0)&&(k-=P,L.unshift($)),$.id==="grid"&&k<y)break}if(e.value&&!L.includes(e.value)&&!s.value){let E;for(let Q=0;Q<L.length-1&&k<(e.value.width||V)+J;Q++)E=L.shift(),k+=E.width||V;k>=(e.value.width||V)?L.unshift(e.value):t.value||(E=L.shift(),L.unshift(e.value));const $=l.value.indexOf(e.value),P=l.value.indexOf(E),G=l.value.slice();P>-1&&(G.splice($,1),G.splice(P,0,e.value)),l.value=G}r.value=k,h.value=L}function M(k){if(o.value={...o.value,[k.id]:k},k.id in a.value)a.value[k.id].resolveMe(k);else{const L=new Wr;L.resolveMe(k),a.value={...a.value,[k.id]:L}}}function I(k){k.teleport?u.value=[...u.value,k]:(l.value=[...l.value,k],t.value=k)}function A(k){if(k.teleport){const L=u.value.indexOf(k);L!==-1&&(u.value=[...u.value.slice(0,L),...u.value.slice(L+1)])}else{const L=l.value.indexOf(k);L!==-1&&(l.value=[...l.value.slice(0,L),...l.value.slice(L+1)])}}function C(k,L){const V=l.value.indexOf(k),J=L==="right"?1:-1;h.value.includes(l.value[V+J])&&([l.value[V],l.value[V+J]]=[l.value[V+J],l.value[V]])}function R(k){o.value[k.id]!==void 0&&delete o.value[k.id],a.value[k.id]!==void 0&&delete a.value[k.id];const L=h.value.indexOf(k);L!==-1&&(h.value=[...h.value.slice(0,L),...h.value.slice(L+1)]),e.value&&e.value.id==k.id&&(e.value=void 0)}function O(k){a.value={...a.value,[k]:new Wr}}return{items:o,regPromises:a,orderedItems:l,pinned:e,priority:t,visible:h,stackWidth:i,remWidth:r,mobileView:s,reorderable:n,teleported:u,getRemainingWidth:p,getVisible:f,getRegPromises:m,openPanel:g,closePanel:b,movePanel:w,removePanel:S,setStackWidth:T,setMobileView:x,updateVisible:_,registerPanel:M,addRegPromise:O}}),XQe=Xt({__name:"panel-stack",setup(e){const t=pg(),i=$s("iApi"),r=_e(),s=Zt(()=>t.mobileView);Nn(()=>{new ResizeObserver(h=>{const p=!(i?.$vApp.$root?.$refs["app-size"]).classList.contains("sm");s.value!==p&&(t.mobileView=p,i?.event.emit(ot.RAMP_MOBILEVIEW_CHANGE,p)),t.setStackWidth(h[0].contentRect.width)}).observe(r.value?.$el)});const n=u=>t.getVisible(u),o=(u,h)=>{l(u,h,[[6,0],[0,1]])},a=(u,h)=>{const[p,f]=[u.children[0].getBoundingClientRect(),u.parentElement.getBoundingClientRect()];u.style.width=`${p.width}px`,u.style.height=`${p.height}px`,u.style.left=`${p.left-f.left}px`,u.style.position="absolute",l(u,h,[[0,-6],[1,0]])},l=(u,h,p)=>{yr({targets:u,duration:300,translateY:{value:p[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:p[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:h})};return(u,h)=>(Re(),Ji(ej,{onEnter:o,onLeave:a,name:"panel-container",tag:"div",ref_key:"el",ref:r},{default:Yr(()=>[(Re(!0),We(Ri,null,Rg(n(lt(i).screenSize),p=>(Re(),Ji(cfe,{key:`${p.id}`,panel:p},null,8,["panel"]))),128))]),_:1},512))}}),dp=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},QQe=dp(XQe,[["__scopeId","data-v-f32e4f15"]]);var Oo="top",al="bottom",ll="right",Po="left",wj="auto",Bx=[Oo,al,ll,Po],k1="start",OS="end",eet="clippingParents",hfe="viewport",dw="popper",tet="reference",BY=Bx.reduce(function(e,t){return e.concat([t+"-"+k1,t+"-"+OS])},[]),pfe=[].concat(Bx,[wj]).reduce(function(e,t){return e.concat([t,t+"-"+k1,t+"-"+OS])},[]),iet="beforeRead",ret="read",set="afterRead",net="beforeMain",oet="main",aet="afterMain",uet="beforeWrite",cet="write",het="afterWrite",pet=[iet,ret,set,net,oet,aet,uet,cet,het];function Ec(e){return e?(e.nodeName||"").toLowerCase():null}function ba(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function dg(e){var t=ba(e).Element;return e instanceof t||e instanceof Element}function el(e){var t=ba(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function _j(e){if(typeof ShadowRoot>"u")return!1;var t=ba(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function det(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},n=t.elements[i];!el(n)||!Ec(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function fet(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],n=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!el(s)||!Ec(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}const met={name:"applyStyles",enabled:!0,phase:"write",fn:det,effect:fet,requires:["computeStyles"]};function pc(e){return e.split("-")[0]}var jy=Math.max,kA=Math.min,D1=Math.round;function O6(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function dfe(){return!/^((?!chrome|android).)*safari/i.test(O6())}function F1(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var r=e.getBoundingClientRect(),s=1,n=1;t&&el(e)&&(s=e.offsetWidth>0&&D1(r.width)/e.offsetWidth||1,n=e.offsetHeight>0&&D1(r.height)/e.offsetHeight||1);var o=dg(e)?ba(e):window,a=o.visualViewport,l=!dfe()&&i,u=(r.left+(l&&a?a.offsetLeft:0))/s,h=(r.top+(l&&a?a.offsetTop:0))/n,p=r.width/s,f=r.height/n;return{width:p,height:f,top:h,right:u+p,bottom:h+f,left:u,x:u,y:h}}function Sj(e){var t=F1(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function ffe(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&_j(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function op(e){return ba(e).getComputedStyle(e)}function yet(e){return["table","td","th"].indexOf(Ec(e))>=0}function kf(e){return((dg(e)?e.ownerDocument:e.document)||window.document).documentElement}function u5(e){return Ec(e)==="html"?e:e.assignedSlot||e.parentNode||(_j(e)?e.host:null)||kf(e)}function zY(e){return!el(e)||op(e).position==="fixed"?null:e.offsetParent}function get(e){var t=/firefox/i.test(O6()),i=/Trident/i.test(O6());if(i&&el(e)){var r=op(e);if(r.position==="fixed")return null}var s=u5(e);for(_j(s)&&(s=s.host);el(s)&&["html","body"].indexOf(Ec(s))<0;){var n=op(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function zx(e){for(var t=ba(e),i=zY(e);i&&yet(i)&&op(i).position==="static";)i=zY(i);return i&&(Ec(i)==="html"||Ec(i)==="body"&&op(i).position==="static")?t:i||get(e)||t}function xj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function x2(e,t,i){return jy(e,kA(t,i))}function vet(e,t,i){var r=x2(e,t,i);return r>i?i:r}function mfe(){return{top:0,right:0,bottom:0,left:0}}function yfe(e){return Object.assign({},mfe(),e)}function gfe(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var bet=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,yfe(typeof t!="number"?t:gfe(t,Bx))};function wet(e){var t,i=e.state,r=e.name,s=e.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=pc(i.placement),l=xj(a),u=[Po,ll].indexOf(a)>=0,h=u?"height":"width";if(!(!n||!o)){var p=bet(s.padding,i),f=Sj(n),m=l==="y"?Oo:Po,g=l==="y"?al:ll,b=i.rects.reference[h]+i.rects.reference[l]-o[l]-i.rects.popper[h],w=o[l]-i.rects.reference[l],S=zx(n),T=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=b/2-w/2,_=p[m],M=T-f[h]-p[g],I=T/2-f[h]/2+x,A=x2(_,I,M),C=l;i.modifiersData[r]=(t={},t[C]=A,t.centerOffset=A-I,t)}}function _et(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||ffe(t.elements.popper,s)&&(t.elements.arrow=s))}const xet={name:"arrow",enabled:!0,phase:"main",fn:wet,effect:_et,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function j1(e){return e.split("-")[1]}var Tet={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Eet(e,t){var i=e.x,r=e.y,s=t.devicePixelRatio||1;return{x:D1(i*s)/s||0,y:D1(r*s)/s||0}}function qY(e){var t,i=e.popper,r=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,h=e.roundOffsets,p=e.isFixed,f=o.x,m=f===void 0?0:f,g=o.y,b=g===void 0?0:g,w=typeof h=="function"?h({x:m,y:b}):{x:m,y:b};m=w.x,b=w.y;var S=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),x=Po,_=Oo,M=window;if(u){var I=zx(i),A="clientHeight",C="clientWidth";if(I===ba(i)&&(I=kf(i),op(I).position!=="static"&&a==="absolute"&&(A="scrollHeight",C="scrollWidth")),I=I,s===Oo||(s===Po||s===ll)&&n===OS){_=al;var R=p&&I===M&&M.visualViewport?M.visualViewport.height:I[A];b-=R-r.height,b*=l?1:-1}if(s===Po||(s===Oo||s===al)&&n===OS){x=ll;var O=p&&I===M&&M.visualViewport?M.visualViewport.width:I[C];m-=O-r.width,m*=l?1:-1}}var k=Object.assign({position:a},u&&Tet),L=h===!0?Eet({x:m,y:b},ba(i)):{x:m,y:b};if(m=L.x,b=L.y,l){var V;return Object.assign({},k,(V={},V[_]=T?"0":"",V[x]=S?"0":"",V.transform=(M.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",V))}return Object.assign({},k,(t={},t[_]=T?b+"px":"",t[x]=S?m+"px":"",t.transform="",t))}function Met(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:pc(t.placement),variation:j1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,qY(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,qY(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Iet={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Met,data:{}};var CE={passive:!0};function Aet(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=ba(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&u.forEach(function(h){h.addEventListener("scroll",i.update,CE)}),a&&l.addEventListener("resize",i.update,CE),function(){n&&u.forEach(function(h){h.removeEventListener("scroll",i.update,CE)}),a&&l.removeEventListener("resize",i.update,CE)}}const $et={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Aet,data:{}};var Cet={left:"right",right:"left",bottom:"top",top:"bottom"};function NI(e){return e.replace(/left|right|bottom|top/g,function(t){return Cet[t]})}var Ret={start:"end",end:"start"};function HY(e){return e.replace(/start|end/g,function(t){return Ret[t]})}function Tj(e){var t=ba(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Ej(e){return F1(kf(e)).left+Tj(e).scrollLeft}function Oet(e,t){var i=ba(e),r=kf(e),s=i.visualViewport,n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;var u=dfe();(u||!u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a+Ej(e),y:l}}function Pet(e){var t,i=kf(e),r=Tj(e),s=(t=e.ownerDocument)==null?void 0:t.body,n=jy(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=jy(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+Ej(e),l=-r.scrollTop;return op(s||i).direction==="rtl"&&(a+=jy(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function Mj(e){var t=op(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function vfe(e){return["html","body","#document"].indexOf(Ec(e))>=0?e.ownerDocument.body:el(e)&&Mj(e)?e:vfe(u5(e))}function T2(e,t){var i;t===void 0&&(t=[]);var r=vfe(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),n=ba(r),o=s?[n].concat(n.visualViewport||[],Mj(r)?r:[]):r,a=t.concat(o);return s?a:a.concat(T2(u5(o)))}function P6(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Let(e,t){var i=F1(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function WY(e,t,i){return t===hfe?P6(Oet(e,i)):dg(t)?Let(t,i):P6(Pet(kf(e)))}function Net(e){var t=T2(u5(e)),i=["absolute","fixed"].indexOf(op(e).position)>=0,r=i&&el(e)?zx(e):e;return dg(r)?t.filter(function(s){return dg(s)&&ffe(s,r)&&Ec(s)!=="body"}):[]}function ket(e,t,i,r){var s=t==="clippingParents"?Net(e):[].concat(t),n=[].concat(s,[i]),o=n[0],a=n.reduce(function(l,u){var h=WY(e,u,r);return l.top=jy(h.top,l.top),l.right=kA(h.right,l.right),l.bottom=kA(h.bottom,l.bottom),l.left=jy(h.left,l.left),l},WY(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function bfe(e){var t=e.reference,i=e.element,r=e.placement,s=r?pc(r):null,n=r?j1(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(s){case Oo:l={x:o,y:t.y-i.height};break;case al:l={x:o,y:t.y+t.height};break;case ll:l={x:t.x+t.width,y:a};break;case Po:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?xj(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(n){case k1:l[u]=l[u]-(t[h]/2-i[h]/2);break;case OS:l[u]=l[u]+(t[h]/2-i[h]/2);break}}return l}function U1(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,n=i.strategy,o=n===void 0?e.strategy:n,a=i.boundary,l=a===void 0?eet:a,u=i.rootBoundary,h=u===void 0?hfe:u,p=i.elementContext,f=p===void 0?dw:p,m=i.altBoundary,g=m===void 0?!1:m,b=i.padding,w=b===void 0?0:b,S=yfe(typeof w!="number"?w:gfe(w,Bx)),T=f===dw?tet:dw,x=e.rects.popper,_=e.elements[g?T:f],M=ket(dg(_)?_:_.contextElement||kf(e.elements.popper),l,h,o),I=F1(e.elements.reference),A=bfe({reference:I,element:x,strategy:"absolute",placement:s}),C=P6(Object.assign({},x,A)),R=f===dw?C:I,O={top:M.top-R.top+S.top,bottom:R.bottom-M.bottom+S.bottom,left:M.left-R.left+S.left,right:R.right-M.right+S.right},k=e.modifiersData.offset;if(f===dw&&k){var L=k[s];Object.keys(O).forEach(function(V){var J=[ll,al].indexOf(V)>=0?1:-1,y=[Oo,al].indexOf(V)>=0?"y":"x";O[V]+=L[y]*J})}return O}function Det(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?pfe:l,h=j1(r),p=h?a?BY:BY.filter(function(g){return j1(g)===h}):Bx,f=p.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=p);var m=f.reduce(function(g,b){return g[b]=U1(e,{placement:b,boundary:s,rootBoundary:n,padding:o})[pc(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function Fet(e){if(pc(e)===wj)return[];var t=NI(e);return[HY(e),t,HY(t)]}function jet(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,h=i.boundary,p=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,b=i.allowedAutoPlacements,w=t.options.placement,S=pc(w),T=S===w,x=l||(T||!g?[NI(w)]:Fet(w)),_=[w].concat(x).reduce(function(Pe,Ie){return Pe.concat(pc(Ie)===wj?Det(t,{placement:Ie,boundary:h,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ie)},[]),M=t.rects.reference,I=t.rects.popper,A=new Map,C=!0,R=_[0],O=0;O<_.length;O++){var k=_[O],L=pc(k),V=j1(k)===k1,J=[Oo,al].indexOf(L)>=0,y=J?"width":"height",E=U1(t,{placement:k,boundary:h,rootBoundary:p,altBoundary:f,padding:u}),$=J?V?ll:Po:V?al:Oo;M[y]>I[y]&&($=NI($));var P=NI($),G=[];if(n&&G.push(E[L]<=0),a&&G.push(E[$]<=0,E[P]<=0),G.every(function(Pe){return Pe})){R=k,C=!1;break}A.set(k,G)}if(C)for(var Q=g?3:1,se=function(Ie){var we=_.find(function(De){var Ze=A.get(De);if(Ze)return Ze.slice(0,Ie).every(function(et){return et})});if(we)return R=we,"break"},ie=Q;ie>0;ie--){var ye=se(ie);if(ye==="break")break}t.placement!==R&&(t.modifiersData[r]._skip=!0,t.placement=R,t.reset=!0)}}const Uet={name:"flip",enabled:!0,phase:"main",fn:jet,requiresIfExists:["offset"],data:{_skip:!1}};function JY(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function ZY(e){return[Oo,ll,al,Po].some(function(t){return e[t]>=0})}function Vet(e){var t=e.state,i=e.name,r=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=U1(t,{elementContext:"reference"}),a=U1(t,{altBoundary:!0}),l=JY(o,r),u=JY(a,s,n),h=ZY(l),p=ZY(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const Get={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Vet};function Bet(e,t,i){var r=pc(e),s=[Po,Oo].indexOf(r)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[Po,ll].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function zet(e){var t=e.state,i=e.options,r=e.name,s=i.offset,n=s===void 0?[0,0]:s,o=pfe.reduce(function(h,p){return h[p]=Bet(p,t.rects,n),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}const qet={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:zet};function Het(e){var t=e.state,i=e.name;t.modifiersData[i]=bfe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Wet={name:"popperOffsets",enabled:!0,phase:"read",fn:Het,data:{}};function Jet(e){return e==="x"?"y":"x"}function Zet(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,h=i.altBoundary,p=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,b=g===void 0?0:g,w=U1(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:h}),S=pc(t.placement),T=j1(t.placement),x=!T,_=xj(S),M=Jet(_),I=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,R=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,O=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(I){if(n){var V,J=_==="y"?Oo:Po,y=_==="y"?al:ll,E=_==="y"?"height":"width",$=I[_],P=$+w[J],G=$-w[y],Q=m?-C[E]/2:0,se=T===k1?A[E]:C[E],ie=T===k1?-C[E]:-A[E],ye=t.elements.arrow,Pe=m&&ye?Sj(ye):{width:0,height:0},Ie=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:mfe(),we=Ie[J],De=Ie[y],Ze=x2(0,A[E],Pe[E]),et=x?A[E]/2-Q-Ze-we-O.mainAxis:se-Ze-we-O.mainAxis,nt=x?-A[E]/2+Q+Ze+De+O.mainAxis:ie+Ze+De+O.mainAxis,$t=t.elements.arrow&&zx(t.elements.arrow),zt=$t?_==="y"?$t.clientTop||0:$t.clientLeft||0:0,Y=(V=k?.[_])!=null?V:0,B=$+et-Y-zt,re=$+nt-Y,fe=x2(m?kA(P,B):P,$,m?jy(G,re):G);I[_]=fe,L[_]=fe-$}if(a){var ve,D=_==="x"?Oo:Po,q=_==="x"?al:ll,N=I[M],U=M==="y"?"height":"width",H=N+w[D],ne=N-w[q],me=[Oo,Po].indexOf(S)!==-1,pe=(ve=k?.[M])!=null?ve:0,Z=me?H:N-A[U]-C[U]-pe+O.altAxis,te=me?N+A[U]+C[U]-pe-O.altAxis:ne,Ee=m&&me?vet(Z,N,te):x2(m?Z:H,N,m?te:ne);I[M]=Ee,L[M]=Ee-N}t.modifiersData[r]=L}}const Yet={name:"preventOverflow",enabled:!0,phase:"main",fn:Zet,requiresIfExists:["offset"]};function Ket(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Xet(e){return e===ba(e)||!el(e)?Tj(e):Ket(e)}function Qet(e){var t=e.getBoundingClientRect(),i=D1(t.width)/e.offsetWidth||1,r=D1(t.height)/e.offsetHeight||1;return i!==1||r!==1}function ett(e,t,i){i===void 0&&(i=!1);var r=el(t),s=el(t)&&Qet(t),n=kf(t),o=F1(e,s,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Ec(t)!=="body"||Mj(n))&&(a=Xet(t)),el(t)?(l=F1(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=Ej(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ttt(e){var t=new Map,i=new Set,r=[];e.forEach(function(n){t.set(n.name,n)});function s(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&s(l)}}),r.push(n)}return e.forEach(function(n){i.has(n.name)||s(n)}),r}function itt(e){var t=ttt(e);return pet.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function rtt(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function stt(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var YY={placement:"bottom",modifiers:[],strategy:"absolute"};function KY(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ntt(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,n=s===void 0?YY:s;return function(a,l,u){u===void 0&&(u=n);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},YY,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,m={state:h,setOptions:function(S){var T=typeof S=="function"?S(h.options):S;b(),h.options=Object.assign({},n,h.options,T),h.scrollParents={reference:dg(a)?T2(a):a.contextElement?T2(a.contextElement):[],popper:T2(l)};var x=itt(stt([].concat(r,h.options.modifiers)));return h.orderedModifiers=x.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var S=h.elements,T=S.reference,x=S.popper;if(KY(T,x)){h.rects={reference:ett(T,zx(x),h.options.strategy==="fixed"),popper:Sj(x)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(O){return h.modifiersData[O.name]=Object.assign({},O.data)});for(var _=0;_<h.orderedModifiers.length;_++){if(h.reset===!0){h.reset=!1,_=-1;continue}var M=h.orderedModifiers[_],I=M.fn,A=M.options,C=A===void 0?{}:A,R=M.name;typeof I=="function"&&(h=I({state:h,options:C,name:R,instance:m})||h)}}}},update:rtt(function(){return new Promise(function(w){m.forceUpdate(),w(h)})}),destroy:function(){b(),f=!0}};if(!KY(a,l))return m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){h.orderedModifiers.forEach(function(w){var S=w.name,T=w.options,x=T===void 0?{}:T,_=w.effect;if(typeof _=="function"){var M=_({state:h,name:S,instance:m,options:x}),I=function(){};p.push(M||I)}})}function b(){p.forEach(function(w){return w()}),p=[]}return m}}var ott=[$et,Wet,Iet,met,qet,Uet,Yet,xet,Get],att=ntt({defaultModifiers:ott});const ltt=["content","aria-label"],Ij=Xt({__name:"dropdown-menu",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default(){return{}}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipPlacementAlt:{type:String,default:"top"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0},ariaLabel:{type:String}},setup(e){const t=_e(!1),i=_e(null),r=Js([]),s=_e(),n=_e(),o=_e(),a=e;r.push(qs(t,()=>{i.value.update()}));const l=()=>{t.value=!t.value,o.value._tippy.hide()},u=()=>{o.value._tippy.setProps({placement:t.value?a.tooltipPlacementAlt:a.tooltipPlacement}),o.value._tippy.show()},h=()=>{o.value._tippy.hide()};return Nn(()=>{window.addEventListener("click",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)},{capture:!0}),window.addEventListener("blur",()=>{t.value=!1}),window.addEventListener("focusin",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)}),o.value.addEventListener("focus",u),o.value.addEventListener("blur",h),o.value.addEventListener("mouseover",u),o.value.addEventListener("mouseleave",h),Oc(()=>{const p={name:"overflowScroll",enabled:!0,phase:"main",fn({state:f}){const{bottom:m}=U1(f);m>0?(f.styles.popper.overflowY=m>100?"auto":void 0,f.styles.popper.overflowX="hidden",f.styles.popper.height=`${f.rects.popper.height-m-8}px`):f.styles.popper.height="auto"}};o.value&&n.value&&(i.value=att(o.value,n.value,{placement:a.position||"bottom",modifiers:[p,{name:"offset",options:{offset:[0,5]}}],...a.popperOptions}))})}),Pc(()=>{r.forEach(p=>p()),window.removeEventListener("click",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)},{capture:!0}),window.removeEventListener("blur",()=>{t.value=!1}),window.removeEventListener("focusin",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)}),o.value.removeEventListener("focus",u),o.value.removeEventListener("blur",h),o.value.removeEventListener("mouseover",u),o.value.removeEventListener("mouseleave",h),t.value=!1}),(p,f)=>{const m=Ii("tippy");return Re(),We("div",{ref_key:"el",ref:s},[Mi((Re(),We("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:l,content:e.tooltip,"aria-label":e.ariaLabel?String(e.ariaLabel):String(e.tooltip),ref_key:"dropdownTrigger",ref:o},[tc(p.$slots,"header")],8,ltt)),[[m,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent",trigger:"manual"}]]),Mi(Me("div",{onClick:f[0]||(f[0]=g=>i.value.update()),class:Cr(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref_key:"dropdown",ref:n},[tc(p.$slots,"default",{close:()=>t.value=!t.value})],2),[[Q7,t.value]])],512)}}}),dc=vr("notification",()=>{const e=_e([]),t=_e({}),i=Zt(()=>e.value.length>=99?99:e.value.length);function r(u){e.value=[u,...e.value]}function s(u){if(e.value.includes(u)){const h=e.value.indexOf(u);u instanceof wfe&&l(u),h>-1&&e.value.splice(h,1)}}function n(u){t.value[u.id]=u}function o(u,h){t.value[u]&&(t.value[u].messageList.push(h),e.value.includes(t.value[u])||(e.value=[t.value[u],...e.value]))}function a(){Object.values(t.value).forEach(u=>l(u)),e.value=[]}function l(u){const h=e.value.indexOf(u);h>-1&&e.value.splice(h,1),u.messageList=[]}return{notificationStack:e,groups:t,notificationNumber:i,showNotification:r,removeNotification:s,registerGroup:n,addToGroup:o,clearAll:a}}),utt={class:"h-full flex flex-col"},ctt={class:"w-full flex mb-6"},htt=["content","aria-label"],ptt=Xt({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const t=dc(),{t:i}=lr(),r=Zt(()=>t.notificationNumber),s=()=>t.clearAll();return(n,o)=>{const a=qr("panel-screen"),l=Ii("tippy");return Re(),Ji(a,{panel:e.panel},{header:Yr(()=>[Kh(Ui(lt(i)("notifications.title")),1)]),content:Yr(()=>[Me("div",utt,[Me("div",ctt,[Mi((Re(),We("button",{type:"button",onClick:s,class:Cr(["p-4 ml-auto",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:lt(i)("notifications.controls.clearAll"),"aria-label":lt(i)("notifications.controls.clearAll")},o[0]||(o[0]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Me("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Me("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Me("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Me("path",{d:"M22 22l-5 -5"}),Me("path",{d:"M17 22l5 -5"})],-1)]),10,htt)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),Bt(_fe,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}}});var ma=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(ma||{});class dtt extends Kr{notificationStore;constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":Jr(ptt)},alertName:"notifications.title"}}),this.notificationStore=dc(this.$vApp.$pinia)}show(t,i){this.notificationStore.showNotification({type:t,message:i})}addGroup(t,i,r){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const s=new wfe(this.$iApi,t,i,r);return this.notificationStore.registerGroup(s),s}getGroup(t){return this.notificationStore.groups[t]}}class wfe extends Kr{notificationStore=dc(this.$vApp.$pinia);id;message;type;messageList=[];constructor(t,i,r,s){super(t),this.id=i,this.type=r,this.message=s}show(t){this.notificationStore.addToGroup(this.id,t)}}const ftt=["content"],mtt={class:"flex items-center text-left"},ytt={class:"select-text cursor-text"},gtt=["content"],vtt={key:0,class:"text-left"},btt=Xt({__name:"notification-item",props:{notification:{type:Object,required:!0}},setup(e){const t=dc(),{t:i}=lr(),r=e,s=_e(!1),n=Js({[ma.WARNING]:"⚠",[ma.INFO]:"ℹ️",[ma.ERROR]:"❌"}),o=l=>{t.removeNotification(l)},a=()=>{if(!r.notification.messageList)return!1};return(l,u)=>{const h=Ii("tippy");return Mi((Re(),We("li",{class:Cr(["flex-col default-focus-style p-4",e.notification.messageList?"cursor-pointer":""]),content:lt(i)(s.value?"notifications.controls.collapse":"notifications.controls.expand"),onClick:u[1]||(u[1]=p=>s.value=!s.value)},[Me("div",mtt,[Me("span",null,[Kh(Ui(n[e.notification.type])+" ",1),Me("span",ytt,Ui(e.notification.message),1)]),u[4]||(u[4]=Me("span",{class:"flex-grow"},null,-1)),e.notification.messageList?(Re(),We("div",{key:0,class:Cr(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":s.value}])},u[2]||(u[2]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[Me("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)):sr("",!0),Mi((Re(),We("button",{type:"button",onClick:u[0]||(u[0]=e5(p=>o(e.notification),["stop"])),class:"mx-4 p-4 text-gray-500 hover:text-black",content:lt(i)("notifications.controls.dismiss")},u[3]||(u[3]=[Me("svg",{class:"fill-current",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105.16 122.88","fill-rule":"evenodd"},[Me("path",{d:"M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z"})],-1)]),8,gtt)),[[h,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&s.value?(Re(),We("div",vtt,[(Re(!0),We(Ri,null,Rg(e.notification.messageList,(p,f)=>(Re(),We("p",{key:e.notification.id+p+f},Ui(p),1))),128))])):sr("",!0)],10,ftt)),[[h,{onShow:a,theme:"ramp4",animation:"scale"}]])}}}),wtt=["content"],_tt={key:0,class:"w-full border-b border-black"},Stt={key:1,class:"flex flex-col items-center h-full"},_fe=Xt({__name:"notification-list",setup(e){const t=dc(),{t:i}=lr(),r=_e(),s=()=>{r.value._tippy.hide()},n=a=>{a.key==="Tab"&&r.value?.matches(":focus")&&r.value._tippy.show()};Nn(()=>{r.value?.addEventListener("blur",s),r.value?.addEventListener("keyup",n)}),Pc(()=>{r.value?.removeEventListener("blur",s),r.value?.removeEventListener("keyup",n)});const o=Zt(()=>t.notificationStack);return(a,l)=>{const u=Ii("focus-item"),h=Ii("focus-list"),p=Ii("tippy");return Re(),We("div",null,[o.value.length>0?Mi((Re(),We("ul",{key:0,content:lt(i)("panels.controls.items"),ref_key:"el",ref:r},[(Re(!0),We(Ri,null,Rg(o.value,(f,m)=>(Re(),We(Ri,{key:f.message+m},[m>0?(Re(),We("div",_tt)):sr("",!0),Mi(Bt(btt,{class:Cr([f.type]),notification:f},null,8,["class","notification"]),[[u]])],64))),128))],8,wtt)),[[h],[p,{trigger:"manual",placement:"top-start",touch:!1}]]):(Re(),We("div",Stt,[l[0]||(l[0]=Me("span",{class:"flex-grow"},null,-1)),l[1]||(l[1]=Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[Me("path",{d:"M0 0h24v24H0z",fill:"none"}),Me("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1)),Me("span",null,Ui(lt(i)("notifications.empty")),1),l[2]||(l[2]=Me("span",{style:{"flex-grow":"6"}},null,-1))]))])}}}),xtt={class:"flex items-center hover:text-white"},Ttt=["aria-label"],Ett={key:0,class:"number rounded-full w-18 text-white"},Mtt={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},Itt={class:"pb-8 border-b border-gray-600"},Att={class:"absolute flex right-3 top-3"},$tt=["content","aria-label"],Ctt=Xt({__name:"caption-button",setup(e){const t=dc(),{t:i}=lr(),r=Zt(()=>t.notificationNumber),s=()=>t.clearAll();return(n,o)=>{const a=qr("close"),l=Ii("tippy");return Re(),Ji(Ij,{position:"top-start",tooltip:lt(i)("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:Yr(()=>[Me("div",xtt,[(Re(),We("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":lt(i)("notifications.open")},o[0]||(o[0]=[Me("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)]),8,Ttt)),r.value&&r.value>0?(Re(),We("span",Ett,Ui(r.value),1)):sr("",!0)])]),default:Yr(u=>[Me("div",Mtt,[Me("div",null,[Me("h4",Itt,Ui(lt(i)("notifications.title")),1),Me("div",Att,[Mi((Re(),We("button",{type:"button",onClick:s,class:Cr(["p-4 mr-6",[r.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:lt(i)("notifications.controls.clearAll"),"aria-label":lt(i)("notifications.controls.clearAll")},o[1]||(o[1]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Me("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Me("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Me("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Me("path",{d:"M22 22l-5 -5"}),Me("path",{d:"M17 22l5 -5"})],-1)]),10,$tt)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),Bt(a,{onClick:u.close},null,8,["onClick"])])]),Bt(_fe,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}}}),Rtt=dp(Ctt,[["__scopeId","data-v-77b1750c"]]),Ott={class:"flex hover:text-white"},Ptt=["aria-label"],Ltt={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},Ntt={class:"pb-8 border-b border-gray-600 mb-10"},ktt={class:"absolute right-5 top-5"},Dtt={class:"select-text"},Ftt={class:"font-bold cursor-text"},jtt={class:"text-sm cursor-text"},Utt={class:"text-sm cursor-text"},Vtt=Xt({__name:"about-ramp-dropdown",props:{position:{type:String,default:"top-start"}},setup(e){const{t}=lr(),i=Zt(()=>`${mw.major}.${mw.minor}.${mw.patch}`),r=Zt(()=>mw.hash.slice(0,9)),s=Zt(()=>{let n=new Date(mw.timestamp);if(isNaN(n))return"dev mode, no date";{const o=a=>a<10?"0"+a.toString():a.toString();return`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${o(n.getMinutes())}:${o(n.getSeconds())}`}});return(n,o)=>{const a=qr("close"),l=qr("dropdown-menu"),u=Ii("focus-item");return Mi((Re(),Ji(l,{class:"pointer-events-auto sm:flex",position:e.position,tooltip:lt(t)("ramp.about"),tooltipPlacement:e.position},{header:Yr(()=>[Me("div",Ott,[(Re(),We("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":lt(t)("ramp.about.open")},o[0]||(o[0]=[Me("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)]),8,Ptt))])]),default:Yr(h=>[Me("div",Ltt,[Me("div",null,[Me("h4",Ntt,Ui(lt(t)("ramp.about")),1),Me("div",ktt,[Bt(a,{onClick:h.close},null,8,["onClick"])]),Me("div",Dtt,[Me("div",null,[Me("span",Ftt,Ui(i.value),1),Me("span",jtt," ["+Ui(r.value)+"] ",1)]),Me("div",null,[Me("span",Utt,Ui(s.value),1)]),o[1]||(o[1]=Me("div",{class:"mt-5"},[Me("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[Me("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),Kh(" ramp4-pcar4 ")])],-1))])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[u]])}}}),Gtt=dp(Vtt,[["__scopeId","data-v-bb2f62b1"]]),Btt={class:"map-caption absolute bottom-0 h-29 sm:h-38 flex justify-end pointer-events-auto cursor-default select-none text-gray-200 bg-black-75 left-0 right-0 py-2 sm:py-6"},ztt={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},qtt=["href","aria-label"],Htt=["src","alt"],Wtt={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},Jtt={class:"flex min-w-fit justify-end"},Ztt={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},Ytt=["aria-pressed","aria-label","content"],Ktt={class:"relative top-1 text-sm sm:text-base"},Xtt={class:"text-gray-200 hover:text-white text-sm sm:text-base pb-5"},Qtt=["onClick"],eit={key:0,class:"sr-only"},tit=Xt({__name:"map-caption",setup(e){const t=Fd(),i=Eo(),{t:r}=lr(),s=$s("iApi"),n=Zt(()=>t.scale),o=Zt(()=>t.attribution),a=Zt(()=>t.coords),l=Zt(()=>t.langtoggle),u=Zt(()=>i.config.map),h=_e([]),p=Js([]);p.push(qs(u,b=>{b&&s.geo.map.caption.createCaption(u.value?.caption)})),Pc(()=>{p.forEach(b=>b())}),jx(()=>{Oc(()=>{s.$i18n.locale.value&&h.value.length==0&&(h.value=s.$i18n.availableLocales)})});const f=b=>{s.$i18n.locale.value!=b&&s.setLanguage(b)},m=()=>{t.toggleScale(),s.geo.map.caption.updateScale()},g=(b=!1)=>r(b?"map.toggleScaleToMetric":"map.toggleScaleToImperial");return(b,w)=>{const S=qr("dropdown-menu"),T=Ii("truncate"),x=Ii("tippy");return Re(),We("div",Btt,[Bt(Gtt,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),Bt(Rtt,{class:"sm:block display-none"}),o.value?.logo.disabled?sr("",!0):(Re(),We("span",ztt,[Me("a",{class:"pointer-events-auto cursor-pointer",href:o.value?.logo.link,target:"_blank","aria-label":o.value?.logo.altText},[Me("img",{class:"object-contain h-18 sm:h-26",src:o.value?.logo.value,alt:o.value?.logo.altText},null,8,Htt)],8,qtt)])),o.value?.text.disabled?sr("",!0):Mi((Re(),We("span",Wtt,[Kh(Ui(o.value?.text.value),1)])),[[T,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),w[0]||(w[0]=Me("span",{class:"flex-grow w-15"},null,-1)),Me("div",Jtt,[a.value?.disabled?sr("",!0):Mi((Re(),We("div",Ztt,[Kh(Ui(a.value?.formattedString),1)])),[[T,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),n.value?.disabled?sr("",!0):Mi((Re(),We("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:m,"aria-pressed":n.value?.isImperialScale,"aria-label":`
                    ${n.value?.label} - ${g(n.value?.isImperialScale)}
                `,content:g(n.value?.isImperialScale)},[Me("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:Cf({width:n.value?.width})},null,4),Me("span",Ktt,Ui(n.value?.label),1)],8,Ytt)),[[x,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),l.value?.disabled?sr("",!0):(Re(),Ji(S,{key:2,class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",tooltip:lt(r)("map.changeLanguage"),ariaLabel:`${lt(r)("map.language.short")} - ${lt(r)("map.changeLanguage")}`,tooltipPlacement:"top-start",tooltipPlacementAlt:"left-end"},{header:Yr(()=>[Me("span",Xtt,Ui(lt(r)("map.language.short")),1)]),default:Yr(()=>[(Re(!0),We(Ri,null,Rg(h.value,(_,M)=>(Re(),We("a",{key:`${_}-${M}`,class:Cr(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":_===lt(s).$i18n.locale.value}]),href:"javascript:;",onClick:I=>f(_)},[Kh(Ui(lt(r)("map.language."+_))+" ",1),_===lt(s).$i18n.locale.value?(Re(),We("span",eit,Ui(lt(r)("map.language.curr")),1)):sr("",!0)],10,Qtt))),128))]),_:1},8,["tooltip","ariaLabel"]))])])}}}),iit=["content","aria-label"],rit={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"},sit=Xt({__name:"floating-button",setup(e){const t=dc(),i=$s("iApi"),{t:r}=lr(),s=Zt(()=>t.notificationNumber);return(n,o)=>{const a=Ii("tippy");return Mi((Re(),We("button",{type:"button",onClick:o[0]||(o[0]=l=>lt(i).panel.get("notifications").open()),class:"pointer-events-auto items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:lt(r)("notifications.title"),"aria-label":lt(r)("notifications.title")},[o[1]||(o[1]=Me("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Me("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),s.value&&s.value>0?(Re(),We("span",rit,Ui(s.value),1)):sr("",!0)],8,iit)),[[a]])}}}),nit=dp(sit,[["__scopeId","data-v-db7ed22c"]]),oit={class:"flex items-center mb-20"},ait={class:"text-xl"},lit=Xt({__name:"keyboard-instructions",setup(e){const t=$s("iApi"),{t:i}=lr(),r=_e(!1),s=_e(["app","lists","map"]),n=_e([]),o=_e(null),a=_e(null);Nn(()=>{n.value.push(t.event.on("openKeyboardInstructions",()=>{r.value=!0,Oc(()=>{o.value.focus()})}))}),Pc(()=>{n.value.forEach(u=>t?.event.off(u))});const l=u=>{u.key==="Tab"?u.shiftKey&&u.target===o.value?(u.preventDefault(),a.value.focus()):!u.shiftKey&&u.target===a.value&&(u.preventDefault(),o.value.focus()):u.key==="Escape"&&(u.preventDefault(),r.value=!1)};return(u,h)=>{const p=qr("close");return r.value?(Re(),We("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:h[3]||(h[3]=f=>r.value=!1),onKeydown:l},[Me("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:h[2]||(h[2]=e5(()=>{},["stop","prevent"])),tabindex:"0",ref_key:"firstEl",ref:o},[Me("div",oit,[Me("h2",ait,Ui(lt(i)("keyboardInstructions.title")),1),Bt(p,{class:"ml-auto",onClick:h[0]||(h[0]=f=>r.value=!1)})]),(Re(!0),We(Ri,null,Rg(s.value,f=>(Re(),We("p",{class:"whitespace-pre-line pb-10",key:f},Ui(lt(i)(`keyboardInstructions.${f}`)),1))),128)),Me("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:h[1]||(h[1]=f=>r.value=!1),ref_key:"lastEl",ref:a},Ui(lt(i)("keyboardInstructions.OK")),513)],512)],32)):sr("",!0)}}}),iv=vr("instance",()=>({started:_e(!1)})),uit={class:"h-full relative"},cit={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},hit={class:"absolute top-8 w-full flex justify-center"},pit={key:1,class:"w-full h-full"},dit=Xt({__name:"shell",setup(e){const t=$s("iApi"),i=iv(),r=Va(),s=pg(),{t:n}=lr(),o=Zt(()=>r.items.appbar),a=()=>{t?.event.emit("openKeyboardInstructions")},l=()=>s.teleported;return(u,h)=>(Re(),We("div",uit,[Me("div",cit,[h[0]||(h[0]=Me("div",{class:"sr-only screen-reader-alert"},null,-1)),Me("div",hit,[Me("button",{type:"button",class:"bg-white hidden-until-focus z-50 shadow-md px-10",onClick:a},Ui(lt(n)("keyboardInstructions.open")),1)]),Bt(lit),Bt(QQe,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),o.value?sr("",!0):(Re(),Ji(nit,{key:0})),Bt(tit,{class:"z-30"})]),lt(i).started?(Re(),Ji(SQe,{key:0})):(Re(),We("div",pit,h[1]||(h[1]=[Me("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)]))),(Re(!0),We(Ri,null,Rg(l(),p=>(Re(),Ji(Bhe,{to:p.teleport?.target,key:p.id},[(Re(),Ji(cfe,{key:`${p.id}`,panel:p},null,8,["panel"]))],8,["to"]))),128))]))}}),fit=dp(dit,[["__scopeId","data-v-14234f96"]]);/*!
  * vue-tippy v6.4.4
  * (c) 2024 
  * @license MIT
  */var Lo="top",ul="bottom",cl="right",No="left",Aj="auto",qx=[Lo,ul,cl,No],V1="start",PS="end",mit="clippingParents",Sfe="viewport",fw="popper",yit="reference",XY=qx.reduce(function(e,t){return e.concat([t+"-"+V1,t+"-"+PS])},[]),xfe=[].concat(qx,[Aj]).reduce(function(e,t){return e.concat([t,t+"-"+V1,t+"-"+PS])},[]),git="beforeRead",vit="read",bit="afterRead",wit="beforeMain",_it="main",Sit="afterMain",xit="beforeWrite",Tit="write",Eit="afterWrite",Mit=[git,vit,bit,wit,_it,Sit,xit,Tit,Eit];function Mc(e){return e?(e.nodeName||"").toLowerCase():null}function pu(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function G1(e){var t=pu(e).Element;return e instanceof t||e instanceof Element}function tl(e){var t=pu(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Tfe(e){if(typeof ShadowRoot>"u")return!1;var t=pu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Iit(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var r=t.styles[i]||{},s=t.attributes[i]||{},n=t.elements[i];!tl(n)||!Mc(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function Ait(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(r){var s=t.elements[r],n=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:i[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!tl(s)||!Mc(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var Efe={name:"applyStyles",enabled:!0,phase:"write",fn:Iit,effect:Ait,requires:["computeStyles"]};function fc(e){return e.split("-")[0]}var Uy=Math.max,DA=Math.min,B1=Math.round;function z1(e,t){t===void 0&&(t=!1);var i=e.getBoundingClientRect(),r=1,s=1;if(tl(e)&&t){var n=e.offsetHeight,o=e.offsetWidth;o>0&&(r=B1(i.width)/o||1),n>0&&(s=B1(i.height)/n||1)}return{width:i.width/r,height:i.height/s,top:i.top/s,right:i.right/r,bottom:i.bottom/s,left:i.left/r,x:i.left/r,y:i.top/s}}function $j(e){var t=z1(e),i=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:r}}function Mfe(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&Tfe(i)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Ic(e){return pu(e).getComputedStyle(e)}function $it(e){return["table","td","th"].indexOf(Mc(e))>=0}function Df(e){return((G1(e)?e.ownerDocument:e.document)||window.document).documentElement}function c5(e){return Mc(e)==="html"?e:e.assignedSlot||e.parentNode||(Tfe(e)?e.host:null)||Df(e)}function QY(e){return!tl(e)||Ic(e).position==="fixed"?null:e.offsetParent}function Cit(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,i=navigator.userAgent.indexOf("Trident")!==-1;if(i&&tl(e)){var r=Ic(e);if(r.position==="fixed")return null}for(var s=c5(e);tl(s)&&["html","body"].indexOf(Mc(s))<0;){var n=Ic(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function Hx(e){for(var t=pu(e),i=QY(e);i&&$it(i)&&Ic(i).position==="static";)i=QY(i);return i&&(Mc(i)==="html"||Mc(i)==="body"&&Ic(i).position==="static")?t:i||Cit(e)||t}function Cj(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function E2(e,t,i){return Uy(e,DA(t,i))}function Rit(e,t,i){var r=E2(e,t,i);return r>i?i:r}function Ife(){return{top:0,right:0,bottom:0,left:0}}function Afe(e){return Object.assign({},Ife(),e)}function $fe(e,t){return t.reduce(function(i,r){return i[r]=e,i},{})}var Oit=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Afe(typeof t!="number"?t:$fe(t,qx))};function Pit(e){var t,i=e.state,r=e.name,s=e.options,n=i.elements.arrow,o=i.modifiersData.popperOffsets,a=fc(i.placement),l=Cj(a),u=[No,cl].indexOf(a)>=0,h=u?"height":"width";if(!(!n||!o)){var p=Oit(s.padding,i),f=$j(n),m=l==="y"?Lo:No,g=l==="y"?ul:cl,b=i.rects.reference[h]+i.rects.reference[l]-o[l]-i.rects.popper[h],w=o[l]-i.rects.reference[l],S=Hx(n),T=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=b/2-w/2,_=p[m],M=T-f[h]-p[g],I=T/2-f[h]/2+x,A=E2(_,I,M),C=l;i.modifiersData[r]=(t={},t[C]=A,t.centerOffset=A-I,t)}}function Lit(e){var t=e.state,i=e.options,r=i.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Mfe(t.elements.popper,s)&&(t.elements.arrow=s))}var Nit={name:"arrow",enabled:!0,phase:"main",fn:Pit,effect:Lit,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function q1(e){return e.split("-")[1]}var kit={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dit(e){var t=e.x,i=e.y,r=window,s=r.devicePixelRatio||1;return{x:B1(t*s)/s||0,y:B1(i*s)/s||0}}function eK(e){var t,i=e.popper,r=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,h=e.roundOffsets,p=e.isFixed,f=h===!0?Dit(o):typeof h=="function"?h(o):o,m=f.x,g=m===void 0?0:m,b=f.y,w=b===void 0?0:b,S=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),x=No,_=Lo,M=window;if(u){var I=Hx(i),A="clientHeight",C="clientWidth";if(I===pu(i)&&(I=Df(i),Ic(I).position!=="static"&&a==="absolute"&&(A="scrollHeight",C="scrollWidth")),I=I,s===Lo||(s===No||s===cl)&&n===PS){_=ul;var R=p&&M.visualViewport?M.visualViewport.height:I[A];w-=R-r.height,w*=l?1:-1}if(s===No||(s===Lo||s===ul)&&n===PS){x=cl;var O=p&&M.visualViewport?M.visualViewport.width:I[C];g-=O-r.width,g*=l?1:-1}}var k=Object.assign({position:a},u&&kit);if(l){var L;return Object.assign({},k,(L={},L[_]=T?"0":"",L[x]=S?"0":"",L.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",L))}return Object.assign({},k,(t={},t[_]=T?w+"px":"",t[x]=S?g+"px":"",t.transform="",t))}function Fit(e){var t=e.state,i=e.options,r=i.gpuAcceleration,s=r===void 0?!0:r,n=i.adaptive,o=n===void 0?!0:n,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:fc(t.placement),variation:q1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,eK(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,eK(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var jit={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fit,data:{}},RE={passive:!0};function Uit(e){var t=e.state,i=e.instance,r=e.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=pu(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&u.forEach(function(h){h.addEventListener("scroll",i.update,RE)}),a&&l.addEventListener("resize",i.update,RE),function(){n&&u.forEach(function(h){h.removeEventListener("scroll",i.update,RE)}),a&&l.removeEventListener("resize",i.update,RE)}}var Vit={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Uit,data:{}},Git={left:"right",right:"left",bottom:"top",top:"bottom"};function kI(e){return e.replace(/left|right|bottom|top/g,function(t){return Git[t]})}var Bit={start:"end",end:"start"};function tK(e){return e.replace(/start|end/g,function(t){return Bit[t]})}function Rj(e){var t=pu(e),i=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:i,scrollTop:r}}function Oj(e){return z1(Df(e)).left+Rj(e).scrollLeft}function zit(e){var t=pu(e),i=Df(e),r=t.visualViewport,s=i.clientWidth,n=i.clientHeight,o=0,a=0;return r&&(s=r.width,n=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,a=r.offsetTop)),{width:s,height:n,x:o+Oj(e),y:a}}function qit(e){var t,i=Df(e),r=Rj(e),s=(t=e.ownerDocument)==null?void 0:t.body,n=Uy(i.scrollWidth,i.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Uy(i.scrollHeight,i.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+Oj(e),l=-r.scrollTop;return Ic(s||i).direction==="rtl"&&(a+=Uy(i.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function Pj(e){var t=Ic(e),i=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+s+r)}function Cfe(e){return["html","body","#document"].indexOf(Mc(e))>=0?e.ownerDocument.body:tl(e)&&Pj(e)?e:Cfe(c5(e))}function M2(e,t){var i;t===void 0&&(t=[]);var r=Cfe(e),s=r===((i=e.ownerDocument)==null?void 0:i.body),n=pu(r),o=s?[n].concat(n.visualViewport||[],Pj(r)?r:[]):r,a=t.concat(o);return s?a:a.concat(M2(c5(o)))}function L6(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Hit(e){var t=z1(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function iK(e,t){return t===Sfe?L6(zit(e)):G1(t)?Hit(t):L6(qit(Df(e)))}function Wit(e){var t=M2(c5(e)),i=["absolute","fixed"].indexOf(Ic(e).position)>=0,r=i&&tl(e)?Hx(e):e;return G1(r)?t.filter(function(s){return G1(s)&&Mfe(s,r)&&Mc(s)!=="body"&&(i?Ic(s).position!=="static":!0)}):[]}function Jit(e,t,i){var r=t==="clippingParents"?Wit(e):[].concat(t),s=[].concat(r,[i]),n=s[0],o=s.reduce(function(a,l){var u=iK(e,l);return a.top=Uy(u.top,a.top),a.right=DA(u.right,a.right),a.bottom=DA(u.bottom,a.bottom),a.left=Uy(u.left,a.left),a},iK(e,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Rfe(e){var t=e.reference,i=e.element,r=e.placement,s=r?fc(r):null,n=r?q1(r):null,o=t.x+t.width/2-i.width/2,a=t.y+t.height/2-i.height/2,l;switch(s){case Lo:l={x:o,y:t.y-i.height};break;case ul:l={x:o,y:t.y+t.height};break;case cl:l={x:t.x+t.width,y:a};break;case No:l={x:t.x-i.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?Cj(s):null;if(u!=null){var h=u==="y"?"height":"width";switch(n){case V1:l[u]=l[u]-(t[h]/2-i[h]/2);break;case PS:l[u]=l[u]+(t[h]/2-i[h]/2);break}}return l}function LS(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=r===void 0?e.placement:r,n=i.boundary,o=n===void 0?mit:n,a=i.rootBoundary,l=a===void 0?Sfe:a,u=i.elementContext,h=u===void 0?fw:u,p=i.altBoundary,f=p===void 0?!1:p,m=i.padding,g=m===void 0?0:m,b=Afe(typeof g!="number"?g:$fe(g,qx)),w=h===fw?yit:fw,S=e.rects.popper,T=e.elements[f?w:h],x=Jit(G1(T)?T:T.contextElement||Df(e.elements.popper),o,l),_=z1(e.elements.reference),M=Rfe({reference:_,element:S,strategy:"absolute",placement:s}),I=L6(Object.assign({},S,M)),A=h===fw?I:_,C={top:x.top-A.top+b.top,bottom:A.bottom-x.bottom+b.bottom,left:x.left-A.left+b.left,right:A.right-x.right+b.right},R=e.modifiersData.offset;if(h===fw&&R){var O=R[s];Object.keys(C).forEach(function(k){var L=[cl,ul].indexOf(k)>=0?1:-1,V=[Lo,ul].indexOf(k)>=0?"y":"x";C[k]+=O[V]*L})}return C}function Zit(e,t){t===void 0&&(t={});var i=t,r=i.placement,s=i.boundary,n=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?xfe:l,h=q1(r),p=h?a?XY:XY.filter(function(g){return q1(g)===h}):qx,f=p.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=p);var m=f.reduce(function(g,b){return g[b]=LS(e,{placement:b,boundary:s,rootBoundary:n,padding:o})[fc(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function Yit(e){if(fc(e)===Aj)return[];var t=kI(e);return[tK(e),t,tK(t)]}function Kit(e){var t=e.state,i=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,h=i.boundary,p=i.rootBoundary,f=i.altBoundary,m=i.flipVariations,g=m===void 0?!0:m,b=i.allowedAutoPlacements,w=t.options.placement,S=fc(w),T=S===w,x=l||(T||!g?[kI(w)]:Yit(w)),_=[w].concat(x).reduce(function(Pe,Ie){return Pe.concat(fc(Ie)===Aj?Zit(t,{placement:Ie,boundary:h,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ie)},[]),M=t.rects.reference,I=t.rects.popper,A=new Map,C=!0,R=_[0],O=0;O<_.length;O++){var k=_[O],L=fc(k),V=q1(k)===V1,J=[Lo,ul].indexOf(L)>=0,y=J?"width":"height",E=LS(t,{placement:k,boundary:h,rootBoundary:p,altBoundary:f,padding:u}),$=J?V?cl:No:V?ul:Lo;M[y]>I[y]&&($=kI($));var P=kI($),G=[];if(n&&G.push(E[L]<=0),a&&G.push(E[$]<=0,E[P]<=0),G.every(function(Pe){return Pe})){R=k,C=!1;break}A.set(k,G)}if(C)for(var Q=g?3:1,se=function(Ie){var we=_.find(function(De){var Ze=A.get(De);if(Ze)return Ze.slice(0,Ie).every(function(et){return et})});if(we)return R=we,"break"},ie=Q;ie>0;ie--){var ye=se(ie);if(ye==="break")break}t.placement!==R&&(t.modifiersData[r]._skip=!0,t.placement=R,t.reset=!0)}}var Xit={name:"flip",enabled:!0,phase:"main",fn:Kit,requiresIfExists:["offset"],data:{_skip:!1}};function rK(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function sK(e){return[Lo,cl,ul,No].some(function(t){return e[t]>=0})}function Qit(e){var t=e.state,i=e.name,r=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=LS(t,{elementContext:"reference"}),a=LS(t,{altBoundary:!0}),l=rK(o,r),u=rK(a,s,n),h=sK(l),p=sK(u);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}var ert={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Qit};function trt(e,t,i){var r=fc(e),s=[No,Lo].indexOf(r)>=0?-1:1,n=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[No,cl].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function irt(e){var t=e.state,i=e.options,r=e.name,s=i.offset,n=s===void 0?[0,0]:s,o=xfe.reduce(function(h,p){return h[p]=trt(p,t.rects,n),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}var rrt={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:irt};function srt(e){var t=e.state,i=e.name;t.modifiersData[i]=Rfe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var nrt={name:"popperOffsets",enabled:!0,phase:"read",fn:srt,data:{}};function ort(e){return e==="x"?"y":"x"}function art(e){var t=e.state,i=e.options,r=e.name,s=i.mainAxis,n=s===void 0?!0:s,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,h=i.altBoundary,p=i.padding,f=i.tether,m=f===void 0?!0:f,g=i.tetherOffset,b=g===void 0?0:g,w=LS(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:h}),S=fc(t.placement),T=q1(t.placement),x=!T,_=Cj(S),M=ort(_),I=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,R=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,O=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),k=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(I){if(n){var V,J=_==="y"?Lo:No,y=_==="y"?ul:cl,E=_==="y"?"height":"width",$=I[_],P=$+w[J],G=$-w[y],Q=m?-C[E]/2:0,se=T===V1?A[E]:C[E],ie=T===V1?-C[E]:-A[E],ye=t.elements.arrow,Pe=m&&ye?$j(ye):{width:0,height:0},Ie=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ife(),we=Ie[J],De=Ie[y],Ze=E2(0,A[E],Pe[E]),et=x?A[E]/2-Q-Ze-we-O.mainAxis:se-Ze-we-O.mainAxis,nt=x?-A[E]/2+Q+Ze+De+O.mainAxis:ie+Ze+De+O.mainAxis,$t=t.elements.arrow&&Hx(t.elements.arrow),zt=$t?_==="y"?$t.clientTop||0:$t.clientLeft||0:0,Y=(V=k?.[_])!=null?V:0,B=$+et-Y-zt,re=$+nt-Y,fe=E2(m?DA(P,B):P,$,m?Uy(G,re):G);I[_]=fe,L[_]=fe-$}if(a){var ve,D=_==="x"?Lo:No,q=_==="x"?ul:cl,N=I[M],U=M==="y"?"height":"width",H=N+w[D],ne=N-w[q],me=[Lo,No].indexOf(S)!==-1,pe=(ve=k?.[M])!=null?ve:0,Z=me?H:N-A[U]-C[U]-pe+O.altAxis,te=me?N+A[U]+C[U]-pe-O.altAxis:ne,Ee=m&&me?Rit(Z,N,te):E2(m?Z:H,N,m?te:ne);I[M]=Ee,L[M]=Ee-N}t.modifiersData[r]=L}}var lrt={name:"preventOverflow",enabled:!0,phase:"main",fn:art,requiresIfExists:["offset"]};function urt(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function crt(e){return e===pu(e)||!tl(e)?Rj(e):urt(e)}function hrt(e){var t=e.getBoundingClientRect(),i=B1(t.width)/e.offsetWidth||1,r=B1(t.height)/e.offsetHeight||1;return i!==1||r!==1}function prt(e,t,i){i===void 0&&(i=!1);var r=tl(t),s=tl(t)&&hrt(t),n=Df(t),o=z1(e,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!i)&&((Mc(t)!=="body"||Pj(n))&&(a=crt(t)),tl(t)?(l=z1(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=Oj(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function drt(e){var t=new Map,i=new Set,r=[];e.forEach(function(n){t.set(n.name,n)});function s(n){i.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=t.get(a);l&&s(l)}}),r.push(n)}return e.forEach(function(n){i.has(n.name)||s(n)}),r}function frt(e){var t=drt(e);return Mit.reduce(function(i,r){return i.concat(t.filter(function(s){return s.phase===r}))},[])}function mrt(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function yrt(e){var t=e.reduce(function(i,r){var s=i[r.name];return i[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,i},{});return Object.keys(t).map(function(i){return t[i]})}var nK={placement:"bottom",modifiers:[],strategy:"absolute"};function oK(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function grt(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,r=i===void 0?[]:i,s=t.defaultOptions,n=s===void 0?nK:s;return function(a,l,u){u===void 0&&(u=n);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},nK,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,m={state:h,setOptions:function(S){var T=typeof S=="function"?S(h.options):S;b(),h.options=Object.assign({},n,h.options,T),h.scrollParents={reference:G1(a)?M2(a):a.contextElement?M2(a.contextElement):[],popper:M2(l)};var x=frt(yrt([].concat(r,h.options.modifiers)));return h.orderedModifiers=x.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var S=h.elements,T=S.reference,x=S.popper;if(oK(T,x)){h.rects={reference:prt(T,Hx(x),h.options.strategy==="fixed"),popper:$j(x)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(O){return h.modifiersData[O.name]=Object.assign({},O.data)});for(var _=0;_<h.orderedModifiers.length;_++){if(h.reset===!0){h.reset=!1,_=-1;continue}var M=h.orderedModifiers[_],I=M.fn,A=M.options,C=A===void 0?{}:A,R=M.name;typeof I=="function"&&(h=I({state:h,options:C,name:R,instance:m})||h)}}}},update:mrt(function(){return new Promise(function(w){m.forceUpdate(),w(h)})}),destroy:function(){b(),f=!0}};if(!oK(a,l))return m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){h.orderedModifiers.forEach(function(w){var S=w.name,T=w.options,x=T===void 0?{}:T,_=w.effect;if(typeof _=="function"){var M=_({state:h,name:S,instance:m,options:x}),I=function(){};p.push(M||I)}})}function b(){p.forEach(function(w){return w()}),p=[]}return m}}var vrt=[Vit,nrt,jit,Efe,rrt,Xit,lrt,Nit,ert],brt=grt({defaultModifiers:vrt}),wrt="tippy-box",Ofe="tippy-content",Pfe="tippy-backdrop",Lfe="tippy-arrow",Nfe="tippy-svg-arrow",ey={passive:!0,capture:!0},kfe=function(){return document.body};function eO(e,t,i){if(Array.isArray(e)){var r=e[t];return r??(Array.isArray(i)?i[t]:i)}return e}function Lj(e,t){var i={}.toString.call(e);return i.indexOf("[object")===0&&i.indexOf(t+"]")>-1}function Dfe(e,t){return typeof e=="function"?e.apply(void 0,t):e}function aK(e,t){if(t===0)return e;var i;return function(r){clearTimeout(i),i=setTimeout(function(){e(r)},t)}}function _rt(e,t){var i=Object.assign({},e);return t.forEach(function(r){delete i[r]}),i}function Srt(e){return e.split(/\s+/).filter(Boolean)}function uy(e){return[].concat(e)}function lK(e,t){e.indexOf(t)===-1&&e.push(t)}function xrt(e){return e.filter(function(t,i){return e.indexOf(t)===i})}function Ffe(e){return e.split("-")[0]}function H1(e){return[].slice.call(e)}function uK(e){return Object.keys(e).reduce(function(t,i){return e[i]!==void 0&&(t[i]=e[i]),t},{})}function Vy(){return document.createElement("div")}function h5(e){return["Element","Fragment"].some(function(t){return Lj(e,t)})}function Trt(e){return Lj(e,"NodeList")}function Nj(e){return Lj(e,"MouseEvent")}function Ert(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Mrt(e){return h5(e)?[e]:Trt(e)?H1(e):Array.isArray(e)?e:H1(document.querySelectorAll(e))}function tO(e,t){e.forEach(function(i){i&&(i.style.transitionDuration=t+"ms")})}function NS(e,t){e.forEach(function(i){i&&i.setAttribute("data-state",t)})}function jfe(e){var t,i=uy(e),r=i[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Irt(e,t){var i=t.clientX,r=t.clientY;return e.every(function(s){var n=s.popperRect,o=s.popperState,a=s.props,l=a.interactiveBorder,u=Ffe(o.placement),h=o.modifiersData.offset;if(!h)return!0;var p=u==="bottom"?h.top.y:0,f=u==="top"?h.bottom.y:0,m=u==="right"?h.left.x:0,g=u==="left"?h.right.x:0,b=n.top-r+p>l,w=r-n.bottom-f>l,S=n.left-i+m>l,T=i-n.right-g>l;return b||w||S||T})}function iO(e,t,i){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){e[r](s,i)})}function cK(e,t){for(var i=t;i;){var r;if(e.contains(i))return!0;i=i.getRootNode==null||(r=i.getRootNode())==null?void 0:r.host}return!1}var Ku={isTouch:!1},hK=0;function Art(){Ku.isTouch||(Ku.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ufe))}function Ufe(){var e=performance.now();e-hK<20&&(Ku.isTouch=!1,document.removeEventListener("mousemove",Ufe)),hK=e}function $rt(){var e=document.activeElement;if(Ert(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Crt(){document.addEventListener("touchstart",Art,ey),window.addEventListener("blur",$rt)}var Rrt=typeof window<"u"&&typeof document<"u",Ort=Rrt?!!window.msCrypto:!1,Prt={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Lrt={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Kl=Object.assign({appendTo:kfe,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Prt,Lrt),Nrt=Object.keys(Kl),krt=function(t){var i=Object.keys(t);i.forEach(function(r){Kl[r]=t[r]})};function Vfe(e){var t=e.plugins||[],i=t.reduce(function(r,s){var n=s.name,o=s.defaultValue;if(n){var a;r[n]=e[n]!==void 0?e[n]:(a=Kl[n])!=null?a:o}return r},{});return Object.assign({},e,i)}function Drt(e,t){var i=t?Object.keys(Vfe(Object.assign({},Kl,{plugins:t}))):Nrt,r=i.reduce(function(s,n){var o=(e.getAttribute("data-tippy-"+n)||"").trim();if(!o)return s;if(n==="content")s[n]=o;else try{s[n]=JSON.parse(o)}catch{s[n]=o}return s},{});return r}function pK(e,t){var i=Object.assign({},t,{content:Dfe(t.content,[e])},t.ignoreAttributes?{}:Drt(e,t.plugins));return i.aria=Object.assign({},Kl.aria,i.aria),i.aria={expanded:i.aria.expanded==="auto"?t.interactive:i.aria.expanded,content:i.aria.content==="auto"?t.interactive?null:"describedby":i.aria.content},i}var Frt=function(){return"innerHTML"};function N6(e,t){e[Frt()]=t}function dK(e){var t=Vy();return e===!0?t.className=Lfe:(t.className=Nfe,h5(e)?t.appendChild(e):N6(t,e)),t}function fK(e,t){h5(t.content)?(N6(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?N6(e,t.content):e.textContent=t.content)}function FA(e){var t=e.firstElementChild,i=H1(t.children);return{box:t,content:i.find(function(r){return r.classList.contains(Ofe)}),arrow:i.find(function(r){return r.classList.contains(Lfe)||r.classList.contains(Nfe)}),backdrop:i.find(function(r){return r.classList.contains(Pfe)})}}function Gfe(e){var t=Vy(),i=Vy();i.className=wrt,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var r=Vy();r.className=Ofe,r.setAttribute("data-state","hidden"),fK(r,e.props),t.appendChild(i),i.appendChild(r),s(e.props,e.props);function s(n,o){var a=FA(t),l=a.box,u=a.content,h=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(n.content!==o.content||n.allowHTML!==o.allowHTML)&&fK(u,e.props),o.arrow?h?n.arrow!==o.arrow&&(l.removeChild(h),l.appendChild(dK(o.arrow))):l.appendChild(dK(o.arrow)):h&&l.removeChild(h)}return{popper:t,onUpdate:s}}Gfe.$$tippy=!0;var jrt=1,OE=[],rO=[];function Urt(e,t){var i=pK(e,Object.assign({},Kl,Vfe(uK(t)))),r,s,n,o=!1,a=!1,l=!1,u=!1,h,p,f,m=[],g=aK(B,i.interactiveDebounce),b,w=jrt++,S=null,T=xrt(i.plugins),x={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},_={id:w,reference:e,popper:Vy(),popperInstance:S,props:i,state:x,plugins:T,clearDelayTimeouts:Z,setProps:te,setContent:Ee,show:Fe,hide:Tt,hideWithInteractivity:Wt,enable:me,disable:pe,unmount:Gt,destroy:Qt};if(!i.render)return _;var M=i.render(_),I=M.popper,A=M.onUpdate;I.setAttribute("data-tippy-root",""),I.id="tippy-"+_.id,_.popper=I,e._tippy=_,I._tippy=_;var C=T.map(function(be){return be.fn(_)}),R=e.hasAttribute("aria-expanded");return $t(),Q(),$(),P("onCreate",[_]),i.showOnCreate&&H(),I.addEventListener("mouseenter",function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()}),I.addEventListener("mouseleave",function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&J().addEventListener("mousemove",g)}),_;function O(){var be=_.props.touch;return Array.isArray(be)?be:[be,0]}function k(){return O()[0]==="hold"}function L(){var be;return!!((be=_.props.render)!=null&&be.$$tippy)}function V(){return b||e}function J(){var be=V().parentNode;return be?jfe(be):document}function y(){return FA(I)}function E(be){return _.state.isMounted&&!_.state.isVisible||Ku.isTouch||h&&h.type==="focus"?0:eO(_.props.delay,be?0:1,Kl.delay)}function $(be){be===void 0&&(be=!1),I.style.pointerEvents=_.props.interactive&&!be?"":"none",I.style.zIndex=""+_.props.zIndex}function P(be,Ye,tt){if(tt===void 0&&(tt=!0),C.forEach(function(jt){jt[be]&&jt[be].apply(jt,Ye)}),tt){var Pt;(Pt=_.props)[be].apply(Pt,Ye)}}function G(){var be=_.props.aria;if(be.content){var Ye="aria-"+be.content,tt=I.id,Pt=uy(_.props.triggerTarget||e);Pt.forEach(function(jt){var Rr=jt.getAttribute(Ye);if(_.state.isVisible)jt.setAttribute(Ye,Rr?Rr+" "+tt:tt);else{var ds=Rr&&Rr.replace(tt,"").trim();ds?jt.setAttribute(Ye,ds):jt.removeAttribute(Ye)}})}}function Q(){if(!(R||!_.props.aria.expanded)){var be=uy(_.props.triggerTarget||e);be.forEach(function(Ye){_.props.interactive?Ye.setAttribute("aria-expanded",_.state.isVisible&&Ye===V()?"true":"false"):Ye.removeAttribute("aria-expanded")})}}function se(){J().removeEventListener("mousemove",g),OE=OE.filter(function(be){return be!==g})}function ie(be){if(!(Ku.isTouch&&(l||be.type==="mousedown"))){var Ye=be.composedPath&&be.composedPath()[0]||be.target;if(!(_.props.interactive&&cK(I,Ye))){if(uy(_.props.triggerTarget||e).some(function(tt){return cK(tt,Ye)})){if(Ku.isTouch||_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[_,be]);_.props.hideOnClick===!0&&(_.clearDelayTimeouts(),_.hide(),a=!0,setTimeout(function(){a=!1}),_.state.isMounted||we())}}}function ye(){l=!0}function Pe(){l=!1}function Ie(){var be=J();be.addEventListener("mousedown",ie,!0),be.addEventListener("touchend",ie,ey),be.addEventListener("touchstart",Pe,ey),be.addEventListener("touchmove",ye,ey)}function we(){var be=J();be.removeEventListener("mousedown",ie,!0),be.removeEventListener("touchend",ie,ey),be.removeEventListener("touchstart",Pe,ey),be.removeEventListener("touchmove",ye,ey)}function De(be,Ye){et(be,function(){!_.state.isVisible&&I.parentNode&&I.parentNode.contains(I)&&Ye()})}function Ze(be,Ye){et(be,Ye)}function et(be,Ye){var tt=y().box;function Pt(jt){jt.target===tt&&(iO(tt,"remove",Pt),Ye())}if(be===0)return Ye();iO(tt,"remove",p),iO(tt,"add",Pt),p=Pt}function nt(be,Ye,tt){tt===void 0&&(tt=!1);var Pt=uy(_.props.triggerTarget||e);Pt.forEach(function(jt){jt.addEventListener(be,Ye,tt),m.push({node:jt,eventType:be,handler:Ye,options:tt})})}function $t(){k()&&(nt("touchstart",Y,{passive:!0}),nt("touchend",re,{passive:!0})),Srt(_.props.trigger).forEach(function(be){if(be!=="manual")switch(nt(be,Y),be){case"mouseenter":nt("mouseleave",re);break;case"focus":nt(Ort?"focusout":"blur",fe);break;case"focusin":nt("focusout",fe);break}})}function zt(){m.forEach(function(be){var Ye=be.node,tt=be.eventType,Pt=be.handler,jt=be.options;Ye.removeEventListener(tt,Pt,jt)}),m=[]}function Y(be){var Ye,tt=!1;if(!(!_.state.isEnabled||ve(be)||a)){var Pt=((Ye=h)==null?void 0:Ye.type)==="focus";h=be,b=be.currentTarget,Q(),!_.state.isVisible&&Nj(be)&&OE.forEach(function(jt){return jt(be)}),be.type==="click"&&(_.props.trigger.indexOf("mouseenter")<0||o)&&_.props.hideOnClick!==!1&&_.state.isVisible?tt=!0:H(be),be.type==="click"&&(o=!tt),tt&&!Pt&&ne(be)}}function B(be){var Ye=be.target,tt=V().contains(Ye)||I.contains(Ye);if(!(be.type==="mousemove"&&tt)){var Pt=U().concat(I).map(function(jt){var Rr,ds=jt._tippy,_a=(Rr=ds.popperInstance)==null?void 0:Rr.state;return _a?{popperRect:jt.getBoundingClientRect(),popperState:_a,props:i}:null}).filter(Boolean);Irt(Pt,be)&&(se(),ne(be))}}function re(be){var Ye=ve(be)||_.props.trigger.indexOf("click")>=0&&o;if(!Ye){if(_.props.interactive){_.hideWithInteractivity(be);return}ne(be)}}function fe(be){_.props.trigger.indexOf("focusin")<0&&be.target!==V()||_.props.interactive&&be.relatedTarget&&I.contains(be.relatedTarget)||ne(be)}function ve(be){return Ku.isTouch?k()!==be.type.indexOf("touch")>=0:!1}function D(){q();var be=_.props,Ye=be.popperOptions,tt=be.placement,Pt=be.offset,jt=be.getReferenceClientRect,Rr=be.moveTransition,ds=L()?FA(I).arrow:null,_a=jt?{getBoundingClientRect:jt,contextElement:jt.contextElement||V()}:e,du={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(fp){var fu=fp.state;if(L()){var Ib=y(),mp=Ib.box;["placement","reference-hidden","escaped"].forEach(function(he){he==="placement"?mp.setAttribute("data-placement",fu.placement):fu.attributes.popper["data-popper-"+he]?mp.setAttribute("data-"+he,""):mp.removeAttribute("data-"+he)}),fu.attributes.popper={}}}},hl=[{name:"offset",options:{offset:Pt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Rr}},du];L()&&ds&&hl.push({name:"arrow",options:{element:ds,padding:3}}),hl.push.apply(hl,Ye?.modifiers||[]),_.popperInstance=brt(_a,I,Object.assign({},Ye,{placement:tt,onFirstUpdate:f,modifiers:hl}))}function q(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function N(){var be=_.props.appendTo,Ye,tt=V();_.props.interactive&&be===kfe||be==="parent"?Ye=tt.parentNode:Ye=Dfe(be,[tt]),Ye.contains(I)||Ye.appendChild(I),_.state.isMounted=!0,D()}function U(){return H1(I.querySelectorAll("[data-tippy-root]"))}function H(be){_.clearDelayTimeouts(),be&&P("onTrigger",[_,be]),Ie();var Ye=E(!0),tt=O(),Pt=tt[0],jt=tt[1];Ku.isTouch&&Pt==="hold"&&jt&&(Ye=jt),Ye?r=setTimeout(function(){_.show()},Ye):_.show()}function ne(be){if(_.clearDelayTimeouts(),P("onUntrigger",[_,be]),!_.state.isVisible){we();return}if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(be.type)>=0&&o)){var Ye=E(!1);Ye?s=setTimeout(function(){_.state.isVisible&&_.hide()},Ye):n=requestAnimationFrame(function(){_.hide()})}}function me(){_.state.isEnabled=!0}function pe(){_.hide(),_.state.isEnabled=!1}function Z(){clearTimeout(r),clearTimeout(s),cancelAnimationFrame(n)}function te(be){if(!_.state.isDestroyed){P("onBeforeUpdate",[_,be]),zt();var Ye=_.props,tt=pK(e,Object.assign({},Ye,uK(be),{ignoreAttributes:!0}));_.props=tt,$t(),Ye.interactiveDebounce!==tt.interactiveDebounce&&(se(),g=aK(B,tt.interactiveDebounce)),Ye.triggerTarget&&!tt.triggerTarget?uy(Ye.triggerTarget).forEach(function(Pt){Pt.removeAttribute("aria-expanded")}):tt.triggerTarget&&e.removeAttribute("aria-expanded"),Q(),$(),A&&A(Ye,tt),_.popperInstance&&(D(),U().forEach(function(Pt){requestAnimationFrame(Pt._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[_,be])}}function Ee(be){_.setProps({content:be})}function Fe(){var be=_.state.isVisible,Ye=_.state.isDestroyed,tt=!_.state.isEnabled,Pt=Ku.isTouch&&!_.props.touch,jt=eO(_.props.duration,0,Kl.duration);if(!(be||Ye||tt||Pt)&&!V().hasAttribute("disabled")&&(P("onShow",[_],!1),_.props.onShow(_)!==!1)){if(_.state.isVisible=!0,L()&&(I.style.visibility="visible"),$(),Ie(),_.state.isMounted||(I.style.transition="none"),L()){var Rr=y(),ds=Rr.box,_a=Rr.content;tO([ds,_a],0)}f=function(){var hl;if(!(!_.state.isVisible||u)){if(u=!0,I.offsetHeight,I.style.transition=_.props.moveTransition,L()&&_.props.animation){var Ff=y(),fp=Ff.box,fu=Ff.content;tO([fp,fu],jt),NS([fp,fu],"visible")}G(),Q(),lK(rO,_),(hl=_.popperInstance)==null||hl.forceUpdate(),P("onMount",[_]),_.props.animation&&L()&&Ze(jt,function(){_.state.isShown=!0,P("onShown",[_])})}},N()}}function Tt(){var be=!_.state.isVisible,Ye=_.state.isDestroyed,tt=!_.state.isEnabled,Pt=eO(_.props.duration,1,Kl.duration);if(!(be||Ye||tt)&&(P("onHide",[_],!1),_.props.onHide(_)!==!1)){if(_.state.isVisible=!1,_.state.isShown=!1,u=!1,o=!1,L()&&(I.style.visibility="hidden"),se(),we(),$(!0),L()){var jt=y(),Rr=jt.box,ds=jt.content;_.props.animation&&(tO([Rr,ds],Pt),NS([Rr,ds],"hidden"))}G(),Q(),_.props.animation?L()&&De(Pt,_.unmount):_.unmount()}}function Wt(be){J().addEventListener("mousemove",g),lK(OE,g),g(be)}function Gt(){_.state.isVisible&&_.hide(),_.state.isMounted&&(q(),U().forEach(function(be){be._tippy.unmount()}),I.parentNode&&I.parentNode.removeChild(I),rO=rO.filter(function(be){return be!==_}),_.state.isMounted=!1,P("onHidden",[_]))}function Qt(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),zt(),delete e._tippy,_.state.isDestroyed=!0,P("onDestroy",[_]))}}function dt(e,t){t===void 0&&(t={});var i=Kl.plugins.concat(t.plugins||[]);Crt();var r=Object.assign({},t,{plugins:i}),s=Mrt(e),n=s.reduce(function(o,a){var l=a&&Urt(a,r);return l&&o.push(l),o},[]);return h5(e)?n[0]:n}dt.defaultProps=Kl;dt.setDefaultProps=krt;dt.currentInput=Ku;var Vrt=Object.assign({},Efe,{effect:function(t){var i=t.state,r={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(i.elements.popper.style,r.popper),i.styles=r,i.elements.arrow&&Object.assign(i.elements.arrow.style,r.arrow)}}),Grt=function(t,i){var r;i===void 0&&(i={});var s=t,n=[],o=[],a,l=i.overrides,u=[],h=!1;function p(){o=s.map(function(_){return uy(_.props.triggerTarget||_.reference)}).reduce(function(_,M){return _.concat(M)},[])}function f(){n=s.map(function(_){return _.reference})}function m(_){s.forEach(function(M){_?M.enable():M.disable()})}function g(_){return s.map(function(M){var I=M.setProps;return M.setProps=function(A){I(A),M.reference===a&&_.setProps(A)},function(){M.setProps=I}})}function b(_,M){var I=o.indexOf(M);if(M!==a){a=M;var A=(l||[]).concat("content").reduce(function(C,R){return C[R]=s[I].props[R],C},{});_.setProps(Object.assign({},A,{getReferenceClientRect:typeof A.getReferenceClientRect=="function"?A.getReferenceClientRect:function(){var C;return(C=n[I])==null?void 0:C.getBoundingClientRect()}}))}}m(!1),f(),p();var w={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function(I){I.props.showOnCreate&&!h&&(h=!0,a=null)},onShow:function(I){I.props.showOnCreate&&!h&&(h=!0,b(I,n[0]))},onTrigger:function(I,A){b(I,A.currentTarget)}}}},S=dt(Vy(),Object.assign({},_rt(i,["overrides"]),{plugins:[w].concat(i.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},i.popperOptions,{modifiers:[].concat(((r=i.popperOptions)==null?void 0:r.modifiers)||[],[Vrt])})})),T=S.show;S.show=function(_){if(T(),!a&&_==null)return b(S,n[0]);if(!(a&&_==null)){if(typeof _=="number")return n[_]&&b(S,n[_]);if(s.indexOf(_)>=0){var M=_.reference;return b(S,M)}if(n.indexOf(_)>=0)return b(S,_)}},S.showNext=function(){var _=n[0];if(!a)return S.show(0);var M=n.indexOf(a);S.show(n[M+1]||_)},S.showPrevious=function(){var _=n[n.length-1];if(!a)return S.show(_);var M=n.indexOf(a),I=n[M-1]||_;S.show(I)};var x=S.setProps;return S.setProps=function(_){l=_.overrides||l,x(_)},S.setInstances=function(_){m(!0),u.forEach(function(M){return M()}),s=_,m(!1),f(),p(),u=g(S),S.setProps({triggerTarget:o})},u=g(S),S},Brt={name:"animateFill",defaultValue:!1,fn:function(t){var i;if(!((i=t.props.render)!=null&&i.$$tippy))return{};var r=FA(t.popper),s=r.box,n=r.content,o=t.props.animateFill?zrt():null;return{onCreate:function(){o&&(s.insertBefore(o,s.firstElementChild),s.setAttribute("data-animatefill",""),s.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=s.style.transitionDuration,u=Number(l.replace("ms",""));n.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,NS([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&NS([o],"hidden")}}}};function zrt(){var e=Vy();return e.className=Pfe,NS([e],"hidden"),e}var k6={clientX:0,clientY:0},PE=[];function Bfe(e){var t=e.clientX,i=e.clientY;k6={clientX:t,clientY:i}}function qrt(e){e.addEventListener("mousemove",Bfe)}function Hrt(e){e.removeEventListener("mousemove",Bfe)}var Wrt={name:"followCursor",defaultValue:!1,fn:function(t){var i=t.reference,r=jfe(t.props.triggerTarget||i),s=!1,n=!1,o=!0,a=t.props;function l(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){r.addEventListener("mousemove",f)}function h(){r.removeEventListener("mousemove",f)}function p(){s=!0,t.setProps({getReferenceClientRect:null}),s=!1}function f(b){var w=b.target?i.contains(b.target):!0,S=t.props.followCursor,T=b.clientX,x=b.clientY,_=i.getBoundingClientRect(),M=T-_.left,I=x-_.top;(w||!t.props.interactive)&&t.setProps({getReferenceClientRect:function(){var C=i.getBoundingClientRect(),R=T,O=x;S==="initial"&&(R=C.left+M,O=C.top+I);var k=S==="horizontal"?C.top:O,L=S==="vertical"?C.right:R,V=S==="horizontal"?C.bottom:O,J=S==="vertical"?C.left:R;return{width:L-J,height:V-k,top:k,right:L,bottom:V,left:J}}})}function m(){t.props.followCursor&&(PE.push({instance:t,doc:r}),qrt(r))}function g(){PE=PE.filter(function(b){return b.instance!==t}),PE.filter(function(b){return b.doc===r}).length===0&&Hrt(r)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(w,S){var T=S.followCursor;s||T!==void 0&&a.followCursor!==T&&(g(),T?(m(),t.state.isMounted&&!n&&!l()&&u()):(h(),p()))},onMount:function(){t.props.followCursor&&!n&&(o&&(f(k6),o=!1),l()||u())},onTrigger:function(w,S){Nj(S)&&(k6={clientX:S.clientX,clientY:S.clientY}),n=S.type==="focus"},onHidden:function(){t.props.followCursor&&(p(),h(),o=!0)}}}};function Jrt(e,t){var i;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((i=e.popperOptions)==null?void 0:i.modifiers)||[]).filter(function(r){var s=r.name;return s!==t.name}),[t])})}}var Zrt={name:"inlinePositioning",defaultValue:!1,fn:function(t){var i=t.reference;function r(){return!!t.props.inlinePositioning}var s,n=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;r()&&(a.indexOf(g.placement)!==-1&&(a=[]),s!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),t.setProps({getReferenceClientRect:function(){return u(g.placement)}})),s=g.placement)}};function u(f){return Yrt(Ffe(f),i.getBoundingClientRect(),H1(i.getClientRects()),n)}function h(f){o=!0,t.setProps(f),o=!1}function p(){o||h(Jrt(t.props,l))}return{onCreate:p,onAfterUpdate:p,onTrigger:function(m,g){if(Nj(g)){var b=H1(t.reference.getClientRects()),w=b.find(function(T){return T.left-2<=g.clientX&&T.right+2>=g.clientX&&T.top-2<=g.clientY&&T.bottom+2>=g.clientY}),S=b.indexOf(w);n=S>-1?S:n}},onHidden:function(){n=-1}}}};function Yrt(e,t,i,r){if(i.length<2||e===null)return t;if(i.length===2&&r>=0&&i[0].left>i[1].right)return i[r]||t;switch(e){case"top":case"bottom":{var s=i[0],n=i[i.length-1],o=e==="top",a=s.top,l=n.bottom,u=o?s.left:n.left,h=o?s.right:n.right,p=h-u,f=l-a;return{top:a,bottom:l,left:u,right:h,width:p,height:f}}case"left":case"right":{var m=Math.min.apply(Math,i.map(function(I){return I.left})),g=Math.max.apply(Math,i.map(function(I){return I.right})),b=i.filter(function(I){return e==="left"?I.left===m:I.right===g}),w=b[0].top,S=b[b.length-1].bottom,T=m,x=g,_=x-T,M=S-w;return{top:w,bottom:S,left:T,right:x,width:_,height:M}}default:return t}}var Krt={name:"sticky",defaultValue:!1,fn:function(t){var i=t.reference,r=t.popper;function s(){return t.popperInstance?t.popperInstance.state.elements.reference:i}function n(u){return t.props.sticky===!0||t.props.sticky===u}var o=null,a=null;function l(){var u=n("reference")?s().getBoundingClientRect():null,h=n("popper")?r.getBoundingClientRect():null;(u&&mK(o,u)||h&&mK(a,h))&&t.popperInstance&&t.popperInstance.update(),o=u,a=h,t.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){t.props.sticky&&l()}}}};function mK(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}dt.setDefaultProps({render:Gfe});dt.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function kj(e,t={},i={mount:!0,appName:"Tippy"}){i=Object.assign({mount:!0,appName:"Tippy"},i);const r=us(),s=_e(),n=_e({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1}),o=Dx();let a=null;const l=()=>a||(a=document.createDocumentFragment(),a),u=A=>{let C,R=ui(A)?A.value:A;return xc(R)?(o.value||(o.value=hg({name:i.appName,setup:()=>()=>ui(A)?A.value:A}),r&&Object.assign(o.value._context,r.appContext),o.value.mount(l())),C=()=>l()):typeof R=="object"?(o.value||(o.value=hg({name:i.appName,setup:()=>()=>Jl(ui(A)?A.value:A)}),r&&Object.assign(o.value._context,r.appContext),o.value.mount(l())),C=()=>l()):C=R,C},h=A=>{let C={};return ui(A)?C=A.value||{}:Xa(A)?C={...A}:C={...A},C.content&&(C.content=u(C.content)),C.triggerTarget&&(C.triggerTarget=ui(C.triggerTarget)?C.triggerTarget.value:C.triggerTarget),(!C.plugins||!Array.isArray(C.plugins))&&(C.plugins=[]),C.plugins=C.plugins.filter(R=>R.name!=="vueTippyReactiveState"),C.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){n.value.isEnabled=!0},onMount(){n.value.isMounted=!0},onShow(){n.value.isMounted=!0,n.value.isVisible=!0},onShown(){n.value.isShown=!0},onHide(){n.value.isMounted=!1,n.value.isVisible=!1},onHidden(){n.value.isShown=!1},onUnmounted(){n.value.isMounted=!1},onDestroy(){n.value.isDestroyed=!0}})}),C},p=()=>{s.value&&s.value.setProps(h(t))},f=()=>{!s.value||!t.content||s.value.setContent(u(t.content))},m=A=>{var C;(C=s.value)===null||C===void 0||C.setContent(u(A))},g=A=>{var C;(C=s.value)===null||C===void 0||C.setProps(h(A))},b=()=>{var A;s.value&&(s.value.destroy(),s.value=void 0),a=null,(A=o.value)===null||A===void 0||A.unmount(),o.value=void 0},w=()=>{var A;(A=s.value)===null||A===void 0||A.show()},S=()=>{var A;(A=s.value)===null||A===void 0||A.hide()},T=()=>{var A;(A=s.value)===null||A===void 0||A.disable(),n.value.isEnabled=!1},x=()=>{var A;(A=s.value)===null||A===void 0||A.enable(),n.value.isEnabled=!0},_=()=>{var A;(A=s.value)===null||A===void 0||A.unmount()},M=()=>{if(!e)return;let A=ui(e)?e.value:e;typeof A=="function"&&(A=A()),A&&(s.value=dt(A,h(t)),A.$tippy=I)},I={tippy:s,refresh:p,refreshContent:f,setContent:m,setProps:g,destroy:b,hide:S,show:w,disable:T,enable:x,unmount:_,mount:M,state:n};return i.mount&&(r?r.isMounted?M():Nn(M):M()),r&&Eb(()=>{b()}),ui(t)||Xa(t)?qs(t,p,{immediate:!1}):ui(t.content)&&qs(t.content,f,{immediate:!1}),I}function Xrt(e,t){const i=_e();return Nn(()=>{const s=(Array.isArray(e)?e.map(n=>n.value):typeof e=="function"?e():e.value).map(n=>n instanceof Element?n._tippy:n).filter(Boolean);i.value=Grt(s,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:i}}function Qrt(e){return typeof e=="function"?e():lt(e)}function est(e){var t,i;const r=Qrt(e);return(i=(t=r)===null||t===void 0?void 0:t.$el)!==null&&i!==void 0?i:r}const tst=Xt({props:{to:{type:[String,Function]},tag:{type:[String,Object],default:"span"},contentTag:{type:[String,Object],default:"span"},contentClass:{type:String,default:null},appendTo:{default:()=>dt.defaultProps.appendTo},aria:{default:()=>dt.defaultProps.aria},delay:{default:()=>dt.defaultProps.delay},duration:{default:()=>dt.defaultProps.duration},getReferenceClientRect:{default:()=>dt.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>dt.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>dt.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>dt.defaultProps.interactive},interactiveBorder:{default:()=>dt.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>dt.defaultProps.interactiveDebounce},moveTransition:{default:()=>dt.defaultProps.moveTransition},offset:{default:()=>dt.defaultProps.offset},onAfterUpdate:{default:()=>dt.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>dt.defaultProps.onBeforeUpdate},onCreate:{default:()=>dt.defaultProps.onCreate},onDestroy:{default:()=>dt.defaultProps.onDestroy},onHidden:{default:()=>dt.defaultProps.onHidden},onHide:{default:()=>dt.defaultProps.onHide},onMount:{default:()=>dt.defaultProps.onMount},onShow:{default:()=>dt.defaultProps.onShow},onShown:{default:()=>dt.defaultProps.onShown},onTrigger:{default:()=>dt.defaultProps.onTrigger},onUntrigger:{default:()=>dt.defaultProps.onUntrigger},onClickOutside:{default:()=>dt.defaultProps.onClickOutside},placement:{default:()=>dt.defaultProps.placement},plugins:{default:()=>dt.defaultProps.plugins},popperOptions:{default:()=>dt.defaultProps.popperOptions},render:{default:()=>dt.defaultProps.render},showOnCreate:{type:Boolean,default:()=>dt.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>dt.defaultProps.touch},trigger:{default:()=>dt.defaultProps.trigger},triggerTarget:{default:()=>dt.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>dt.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>dt.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>dt.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>dt.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>dt.defaultProps.allowHTML},animation:{default:()=>dt.defaultProps.animation},arrow:{default:()=>dt.defaultProps.arrow},content:{default:()=>dt.defaultProps.content},inertia:{default:()=>dt.defaultProps.inertia},maxWidth:{default:()=>dt.defaultProps.maxWidth},role:{default:()=>dt.defaultProps.role},theme:{default:()=>dt.defaultProps.theme},zIndex:{default:()=>dt.defaultProps.zIndex}},emits:["state"],setup(e,{slots:t,emit:i,expose:r}){const s=_e(),n=_e(),o=_e(),a=_e(!1),l=()=>{let m={...e};for(const g of["to","tag","contentTag","contentClass"])m.hasOwnProperty(g)&&delete m[g];return m};let u=()=>est(s);e.to&&(typeof Element<"u"&&e.to instanceof Element?u=()=>e.to:e.to==="parent"?u=()=>{let m=s.value;return m||(m=s.value=n.value.parentElement),m}:(typeof e.to=="string"||e.to instanceof String)&&(u=()=>document.querySelector(e.to)));const h=kj(u,l());let p=t.content;!p&&e.to==="parent"&&(p=t.default),Nn(()=>{a.value=!0,Oc(()=>{p&&h.setContent(()=>o.value)})}),qs(h.state,()=>{i("state",lt(h.state))},{immediate:!0,deep:!0}),qs(()=>e,()=>{h.setProps(l()),p&&h.setContent(()=>o.value)},{deep:!0});let f=Js({elem:s,contentElem:o,mounted:a,...h});return r(f),()=>{const m=(typeof e.contentTag=="string",e.contentTag),g=p?Jl(m,{ref:o,style:{display:a.value?"inherit":"none"},class:e.contentClass},p(f)):null;if(e.to==="parent"){const S=[];if(!s.value){const T=Jl("span",{ref:n,"data-v-tippy":"",style:{display:"none"}});S.push(T)}return g&&S.push(g),S}const b=t.default?t.default(f):[];if(!e.tag){const S=Jl(b[0],{ref:s,"data-v-tippy":""});return g?[S,g]:S}const w=(typeof e.tag=="string",e.tag);return Jl(w,{ref:s,"data-v-tippy":""},g?[b,g]:b)}}}),ist=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let D6={};Object.keys(dt.defaultProps).forEach(e=>{ist.includes(e)?D6[e]={type:Boolean,default:function(){return dt.defaultProps[e]}}:D6[e]={default:function(){return dt.defaultProps[e]}}});const rst=Xt({props:D6,setup(e){const t=_e([]),{singleton:i}=Xrt(t,e);return{instances:t,singleton:i}},mounted(){var e;const i=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(i).map(r=>r._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return Jl(()=>e)}}),sst={mounted(e,t,i){const r=typeof t.value=="string"?{content:t.value}:t.value||{},s=Object.keys(t.modifiers||{}),n=s.find(a=>a!=="arrow"),o=s.findIndex(a=>a==="arrow")!==-1;n&&(r.placement=r.placement||n),o&&(r.arrow=r.arrow!==void 0?r.arrow:!0),i.props&&i.props.onTippyShow&&(r.onShow=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),i.props&&i.props.onTippyShown&&(r.onShown=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),i.props&&i.props.onTippyHidden&&(r.onHidden=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),i.props&&i.props.onTippyHide&&(r.onHide=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),i.props&&i.props.onTippyMount&&(r.onMount=function(...a){var l;return(l=i.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),kj(e,r)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const i=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(i||{}):e._tippy&&e._tippy.setProps(i||{})}},nst={install(e,t={}){dt.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",sst),e.component(t.component||"tippy",tst),e.component(t.componentSingleton||"tippy-singleton",rst)}},zfe=dt.setDefaultProps;zfe({ignoreAttributes:!0,plugins:[Krt,Zrt,Wrt,Brt]});const ost=Xt({name:"App",components:{Shell:fit},setup(){const e=us();Nn(()=>{new ufe().observe(e?.proxy?.$refs["app-size"]),zfe({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:()=>document.fullscreenElement||document.body})})}}),ast=["lang"],lst={class:"h-full",ref:"app-size"};function ust(e,t,i,r,s,n){const o=qr("shell");return Re(),We("div",{class:"ramp-app ramp-styles animation-enabled",lang:e.$i18n.locale},[Me("div",lst,[Bt(o)],512)],8,ast)}const cst=dp(ost,[["render",ust]]),Xu="focus-list",rm="focus-item",hst="focus-icon",pst="focus-container",r1=`[${Xu}],[${pst}]`,LE="truncate-text",NE="show-truncate",_v="focused",F6=`button,input,select,a,textarea,[contenteditable],[${Xu}],[${hst}],[tabIndex]`,dst={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(Xu,!0),new fst(e,t.value)},updated(e){qfe(e)}};function qfe(e){e.querySelectorAll(F6).forEach(i=>{if(i.closest(r1)===e||i.closest(r1)===i&&i.parentElement.closest(r1)===e)if(i.closest(`[${Xu}],.${_v}`).classList.contains(_v))i.setAttribute("tabindex","0");else{i.setAttribute("tabindex","-1");return}})}class fst{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(t,i){this.element=t,this.highlightedItem=this.element,this.isHorizontal=i==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const r=this;t.addEventListener("keydown",function(s){r.onKeydown(s)}),t.addEventListener("focus",function(){r.onFocus()}),t.addEventListener("blur",function(){r.onBlur()}),t.addEventListener("mousedown",function(){r.onMousedown()}),t.addEventListener("touchstart",function(){r.onTouchstart()}),document.addEventListener("click",function(s){t.contains(s.target)?r.onClick(s):r.defocusItem(r.highlightedItem)})}setTabIndex(t,i=this.element){i.querySelectorAll(F6).forEach(s=>{(t===-1||s.closest(r1)===this.element||s.closest(r1)===s&&s.parentElement.closest(r1)===this.element||s.closest(`[${Xu}],.${_v}`).classList.contains(_v))&&s.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(_v),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(rm)===NE&&t.querySelector(`[${LE}]`)?._tippy?.hide()}focusItem(t){t.classList.add(_v),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&!this.isTapped&&t._tippy.show(),t.getAttribute(rm)===NE&&t.querySelector(`[${LE}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,i=!1){if(this.defocusItem(this.highlightedItem),i)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const r=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[r-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const r=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[r+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const i=this,r=Array.prototype.filter.call(this.element.querySelectorAll(`[${rm}]`),s=>s.closest(`[${Xu}]`)===i.element&&!!s.offsetParent);if(r.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(r);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break;case"Tab":this.highlightedItem!==this.element&&(this.highlightedItem.querySelectorAll(F6).length===0&&this.defocusItem(this.highlightedItem),t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus()))}}onClick(t){this.defocusItem(this.highlightedItem);let i=t.target;if(!i.hasAttribute(Xu))for(;i.parentElement.closest(`[${Xu}]`)!==this.element;)i=i.parentElement.closest(`[${Xu}]`);this.highlightedItem=i.closest(`[${rm}]`)||i.closest(`[${Xu}]`)||this.highlightedItem,i.hasAttribute(`${rm}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(rm)===NE&&this.highlightedItem.querySelector(`[${LE}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element?this.highlightedItem!==this.element&&this.focusItem(this.highlightedItem):this.setAriaActiveDescendant(this.highlightedItem),qfe(this.element),this.highlightedItem&&this.highlightedItem!==this.element&&this.highlightedItem.setAttribute("tabindex","-1")}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(rm)===NE&&this.highlightedItem.querySelector(`[${LE}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const yK="focus-item",mst={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",yst()),t.value?e.setAttribute(yK,t.value):e.toggleAttribute(yK,!0)}};function yst(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const Dj="focus-container",Hfe="focus-list",gst="focus-icon",sO=`[${Hfe}],[${Dj}]`,gK=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${Hfe}],[${Dj}],[${gst}],[tabIndex]`;let nO=[];const vst={mounted(e){[...document.querySelectorAll(".inner-shell")].some(i=>i.contains(e))&&nO.push(new bst(e))},beforeUnmount(e){nO=nO.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class bst{element;constructor(t){this.element=t,this.element.toggleAttribute(Dj,!0),this.element.tabIndex=0,setTimeout(()=>this.disableTabbing(),600);const i=this;this.element.addEventListener("keypress",function(r){i.onKeypress(r)}),this.element.addEventListener("click",function(){i.onClick()}),this.element.addEventListener("focusout",function(r){i.onFocusOut(r)}),this.element.addEventListener("focus",function(){i.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(i){t.onKeypress(i)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(i){t.onFocusOut(i)}),this.element.removeEventListener("focus",function(){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&this.enableTabbing().focus()}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(gK),()=>!0).forEach(i=>{i.tabIndex=-1})}enableTabbing(){let t;return Array.prototype.map.call(this.element.querySelectorAll(gK),i=>{(i.closest(sO)===this.element||i.closest(sO)===i&&i.parentElement.closest(sO)===this.element)&&i.offsetParent&&(i.tabIndex=0,t===void 0&&(t=i))}),t}}const wst="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mögensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",_st="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5تصالات6رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत_म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里_大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",W1=(e,t)=>{for(const i in t)e[i]=t[i];return e},j6="numeric",U6="ascii",V6="alpha",DI="asciinumeric",kE="alphanumeric",G6="domain",Wfe="emoji",Sst="scheme",xst="slashscheme",vK="whitespace";function Tst(e,t){return e in t||(t[e]=[]),t[e]}function _y(e,t,i){t[j6]&&(t[DI]=!0,t[kE]=!0),t[U6]&&(t[DI]=!0,t[V6]=!0),t[DI]&&(t[kE]=!0),t[V6]&&(t[kE]=!0),t[kE]&&(t[G6]=!0),t[Wfe]&&(t[G6]=!0);for(const r in t){const s=Tst(r,i);s.indexOf(e)<0&&s.push(e)}}function Est(e,t){const i={};for(const r in t)t[r].indexOf(e)>=0&&(i[r]=!0);return i}function la(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}la.groups={};la.prototype={accepts(){return!!this.t},go(e){const t=this,i=t.j[e];if(i)return i;for(let r=0;r<t.jr.length;r++){const s=t.jr[r][0],n=t.jr[r][1];if(n&&s.test(e))return n}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,i,r){for(let s=0;s<e.length;s++)this.tt(e[s],t,i,r)},tr(e,t,i,r){r=r||la.groups;let s;return t&&t.j?s=t:(s=new la(t),i&&r&&_y(t,i,r)),this.jr.push([e,s]),s},ts(e,t,i,r){let s=this;const n=e.length;if(!n)return s;for(let o=0;o<n-1;o++)s=s.tt(e[o]);return s.tt(e[n-1],t,i,r)},tt(e,t,i,r){r=r||la.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const n=t;let o,a=s.go(e);if(a?(o=new la,W1(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new la,n){if(r)if(o.t&&typeof o.t=="string"){const l=W1(Est(o.t,r),i);_y(n,l,r)}else i&&_y(n,i,r);o.t=n}return s.j[e]=o,o}};const mt=(e,t,i,r,s)=>e.ta(t,i,r,s),Ma=(e,t,i,r,s)=>e.tr(t,i,r,s),bK=(e,t,i,r,s)=>e.ts(t,i,r,s),Le=(e,t,i,r,s)=>e.tt(t,i,r,s),wh="WORD",B6="UWORD",kS="LOCALHOST",z6="TLD",q6="UTLD",FI="SCHEME",rv="SLASH_SCHEME",jA="NUM",Jfe="WS",Fj="NL",Sv="OPENBRACE",I2="OPENBRACKET",A2="OPENANGLEBRACKET",$2="OPENPAREN",cy="CLOSEBRACE",xv="CLOSEBRACKET",Tv="CLOSEANGLEBRACKET",hy="CLOSEPAREN",UA="AMPERSAND",VA="APOSTROPHE",GA="ASTERISK",Td="AT",BA="BACKSLASH",zA="BACKTICK",qA="CARET",Ad="COLON",jj="COMMA",HA="DOLLAR",qu="DOT",WA="EQUALS",Uj="EXCLAMATION",Hu="HYPHEN",JA="PERCENT",ZA="PIPE",YA="PLUS",KA="POUND",XA="QUERY",Vj="QUOTE",Gj="SEMI",Ah="SLASH",C2="TILDE",QA="UNDERSCORE",Zfe="EMOJI",e$="SYM";var Yfe=Object.freeze({__proto__:null,WORD:wh,UWORD:B6,LOCALHOST:kS,TLD:z6,UTLD:q6,SCHEME:FI,SLASH_SCHEME:rv,NUM:jA,WS:Jfe,NL:Fj,OPENBRACE:Sv,OPENBRACKET:I2,OPENANGLEBRACKET:A2,OPENPAREN:$2,CLOSEBRACE:cy,CLOSEBRACKET:xv,CLOSEANGLEBRACKET:Tv,CLOSEPAREN:hy,AMPERSAND:UA,APOSTROPHE:VA,ASTERISK:GA,AT:Td,BACKSLASH:BA,BACKTICK:zA,CARET:qA,COLON:Ad,COMMA:jj,DOLLAR:HA,DOT:qu,EQUALS:WA,EXCLAMATION:Uj,HYPHEN:Hu,PERCENT:JA,PIPE:ZA,PLUS:YA,POUND:KA,QUERY:XA,QUOTE:Vj,SEMI:Gj,SLASH:Ah,TILDE:C2,UNDERSCORE:QA,EMOJI:Zfe,SYM:e$});const r0=/[a-z]/,oO=/\p{L}/u,aO=/\p{Emoji}/u,lO=/\d/,wK=/\s/,_K=`
`,Mst="️",Ist="‍";let DE=null,FE=null;function Ast(e){e===void 0&&(e=[]);const t={};la.groups=t;const i=new la;DE==null&&(DE=SK(wst)),FE==null&&(FE=SK(_st)),Le(i,"'",VA),Le(i,"{",Sv),Le(i,"[",I2),Le(i,"<",A2),Le(i,"(",$2),Le(i,"}",cy),Le(i,"]",xv),Le(i,">",Tv),Le(i,")",hy),Le(i,"&",UA),Le(i,"*",GA),Le(i,"@",Td),Le(i,"`",zA),Le(i,"^",qA),Le(i,":",Ad),Le(i,",",jj),Le(i,"$",HA),Le(i,".",qu),Le(i,"=",WA),Le(i,"!",Uj),Le(i,"-",Hu),Le(i,"%",JA),Le(i,"|",ZA),Le(i,"+",YA),Le(i,"#",KA),Le(i,"?",XA),Le(i,'"',Vj),Le(i,"/",Ah),Le(i,";",Gj),Le(i,"~",C2),Le(i,"_",QA),Le(i,"\\",BA);const r=Ma(i,lO,jA,{[j6]:!0});Ma(r,lO,r);const s=Ma(i,r0,wh,{[U6]:!0});Ma(s,r0,s);const n=Ma(i,oO,B6,{[V6]:!0});Ma(n,r0),Ma(n,oO,n);const o=Ma(i,wK,Jfe,{[vK]:!0});Le(i,_K,Fj,{[vK]:!0}),Le(o,_K),Ma(o,wK,o);const a=Ma(i,aO,Zfe,{[Wfe]:!0});Ma(a,aO,a),Le(a,Mst,a);const l=Le(a,Ist);Ma(l,aO,a);const u=[[r0,s]],h=[[r0,null],[oO,n]];for(let p=0;p<DE.length;p++)Op(i,DE[p],z6,wh,u);for(let p=0;p<FE.length;p++)Op(i,FE[p],q6,B6,h);_y(z6,{tld:!0,ascii:!0},t),_y(q6,{utld:!0,alpha:!0},t),Op(i,"file",FI,wh,u),Op(i,"mailto",FI,wh,u),Op(i,"http",rv,wh,u),Op(i,"https",rv,wh,u),Op(i,"ftp",rv,wh,u),Op(i,"ftps",rv,wh,u),_y(FI,{scheme:!0,ascii:!0},t),_y(rv,{slashscheme:!0,ascii:!0},t),e=e.sort((p,f)=>p[0]>f[0]?1:-1);for(let p=0;p<e.length;p++){const f=e[p][0],g=e[p][1]?{[Sst]:!0}:{[xst]:!0};f.indexOf("-")>=0?g[G6]=!0:r0.test(f)?lO.test(f)?g[DI]=!0:g[U6]=!0:g[j6]=!0,bK(i,f,f,g)}return bK(i,"localhost",kS,{ascii:!0}),i.jd=new la(e$),{start:i,tokens:W1({groups:t},Yfe)}}function $st(e,t){const i=Cst(t.replace(/[A-Z]/g,a=>a.toLowerCase())),r=i.length,s=[];let n=0,o=0;for(;o<r;){let a=e,l=null,u=0,h=null,p=-1,f=-1;for(;o<r&&(l=a.go(i[o]));)a=l,a.accepts()?(p=0,f=0,h=a):p>=0&&(p+=i[o].length,f++),u+=i[o].length,n+=i[o].length,o++;n-=p,o-=f,u-=p,s.push({t:h.t,v:t.slice(n-u,n),s:n-u,e:n})}return s}function Cst(e){const t=[],i=e.length;let r=0;for(;r<i;){let s=e.charCodeAt(r),n,o=s<55296||s>56319||r+1===i||(n=e.charCodeAt(r+1))<56320||n>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Op(e,t,i,r,s){let n;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?n=e.j[l]:(n=new la(r),n.jr=s.slice(),e.j[l]=n),e=n}return n=new la(i),n.jr=s.slice(),e.j[t[o-1]]=n,n}function SK(e){const t=[],i=[];let r=0,s="0123456789";for(;r<e.length;){let n=0;for(;s.indexOf(e[r+n])>=0;)n++;if(n>0){t.push(i.join(""));let o=parseInt(e.substring(r,r+n),10);for(;o>0;o--)i.pop();r+=n}else e[r]==="_"?(t.push(i.join("")),r++):(i.push(e[r]),r++)}return t}const DS={defaultProtocol:"http",events:null,format:xK,formatHref:xK,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Bj(e,t){t===void 0&&(t=null);let i=W1({},DS);e&&(i=W1(i,e instanceof Bj?e.o:e));const r=i.ignoreTags,s=[];for(let n=0;n<r.length;n++)s.push(r[n].toUpperCase());this.o=i,t&&(this.defaultRender=t),this.ignoreTags=s}Bj.prototype={o:DS,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,i){const r=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=i.t in s?s[i.t]:DS[e],typeof s=="function"&&r&&(s=s(t,i))):typeof s=="function"&&r&&(s=s(t,i.t,i)),s)},getObj(e,t,i){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,i.t,i)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function xK(e){return e}function Kfe(e,t){this.t="token",this.v=e,this.tk=t}Kfe.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),i=e.get("truncate",t,this),r=e.get("format",t,this);return i&&r.length>i?r.substring(0,i)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=DS.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,i=this.toFormattedHref(e),r=e.get("tagName",i,t),s=this.toFormattedString(e),n={},o=e.get("className",i,t),a=e.get("target",i,t),l=e.get("rel",i,t),u=e.getObj("attributes",i,t),h=e.getObj("events",i,t);return n.href=i,o&&(n.class=o),a&&(n.target=a),l&&(n.rel=l),u&&W1(n,u),{tagName:r,attributes:n,content:s,eventListeners:h}}};function p5(e,t){class i extends Kfe{constructor(s,n){super(s,n),this.t=e}}for(const r in t)i.prototype[r]=t[r];return i.t=e,i}const TK=p5("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),EK=p5("text"),Rst=p5("nl"),sm=p5("url",{isLink:!0,toHref(e){return e===void 0&&(e=DS.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==kS&&e[1].t===Ad}}),ms=e=>new la(e);function Ost(e){let{groups:t}=e;const i=t.domain.concat([UA,GA,Td,BA,zA,qA,HA,WA,Hu,jA,JA,ZA,YA,KA,Ah,e$,C2,QA]),r=[VA,Tv,cy,xv,hy,Ad,jj,qu,Uj,A2,Sv,I2,$2,XA,Vj,Gj],s=[UA,VA,GA,BA,zA,qA,cy,HA,WA,Hu,jA,Sv,JA,ZA,YA,KA,XA,Ah,e$,C2,QA],n=ms(),o=Le(n,C2);mt(o,s,o),mt(o,t.domain,o);const a=ms(),l=ms(),u=ms();mt(n,t.domain,a),mt(n,t.scheme,l),mt(n,t.slashscheme,u),mt(a,s,o),mt(a,t.domain,a);const h=Le(a,Td);Le(o,Td,h),Le(l,Td,h),Le(u,Td,h);const p=Le(o,qu);mt(p,s,o),mt(p,t.domain,o);const f=ms();mt(h,t.domain,f),mt(f,t.domain,f);const m=Le(f,qu);mt(m,t.domain,f);const g=ms(TK);mt(m,t.tld,g),mt(m,t.utld,g),Le(h,kS,g);const b=Le(f,Hu);mt(b,t.domain,f),mt(g,t.domain,f),Le(g,qu,m),Le(g,Hu,b);const w=Le(g,Ad);mt(w,t.numeric,TK);const S=Le(a,Hu),T=Le(a,qu);mt(S,t.domain,a),mt(T,s,o),mt(T,t.domain,a);const x=ms(sm);mt(T,t.tld,x),mt(T,t.utld,x),mt(x,t.domain,a),mt(x,s,o),Le(x,qu,T),Le(x,Hu,S),Le(x,Td,h);const _=Le(x,Ad),M=ms(sm);mt(_,t.numeric,M);const I=ms(sm),A=ms();mt(I,i,I),mt(I,r,A),mt(A,i,I),mt(A,r,A),Le(x,Ah,I),Le(M,Ah,I);const C=Le(l,Ad),R=Le(u,Ad),O=Le(R,Ah);Le(O,Ah,C),mt(l,t.domain,a),Le(l,qu,T),Le(l,Hu,S),mt(u,t.domain,a),Le(u,qu,T),Le(u,Hu,S),mt(C,t.domain,I),Le(C,Ah,I);const k=Le(I,Sv),L=Le(I,I2),V=Le(I,A2),J=Le(I,$2);Le(A,Sv,k),Le(A,I2,L),Le(A,A2,V),Le(A,$2,J),Le(k,cy,I),Le(L,xv,I),Le(V,Tv,I),Le(J,hy,I),Le(k,cy,I);const y=ms(sm),E=ms(sm),$=ms(sm),P=ms(sm);mt(k,i,y),mt(L,i,E),mt(V,i,$),mt(J,i,P);const G=ms(),Q=ms(),se=ms(),ie=ms();return mt(k,r),mt(L,r),mt(V,r),mt(J,r),mt(y,i,y),mt(E,i,E),mt($,i,$),mt(P,i,P),mt(y,r,y),mt(E,r,E),mt($,r,$),mt(P,r,P),mt(G,i,G),mt(Q,i,E),mt(se,i,$),mt(ie,i,P),mt(G,r,G),mt(Q,r,Q),mt(se,r,se),mt(ie,r,ie),Le(E,xv,I),Le($,Tv,I),Le(P,hy,I),Le(y,cy,I),Le(Q,xv,I),Le(se,Tv,I),Le(ie,hy,I),Le(G,hy,I),Le(n,kS,x),Le(n,Fj,Rst),{start:n,tokens:Yfe}}function Pst(e,t,i){let r=i.length,s=0,n=[],o=[];for(;s<r;){let a=e,l=null,u=null,h=0,p=null,f=-1;for(;s<r&&!(l=a.go(i[s].t));)o.push(i[s++]);for(;s<r&&(u=l||a.go(i[s].t));)l=null,a=u,a.accepts()?(f=0,p=a):f>=0&&f++,s++,h++;if(f<0)s-=h,s<r&&(o.push(i[s]),s++);else{o.length>0&&(n.push(uO(EK,t,o)),o=[]),s-=f,h-=f;const m=p.t,g=i.slice(s-h,s);n.push(uO(m,t,g))}}return o.length>0&&n.push(uO(EK,t,o)),n}function uO(e,t,i){const r=i[0].s,s=i[i.length-1].e,n=t.slice(r,s);return new e(n,i)}const Bn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Lst(){Bn.scanner=Ast(Bn.customSchemes);for(let e=0;e<Bn.tokenQueue.length;e++)Bn.tokenQueue[e][1]({scanner:Bn.scanner});Bn.parser=Ost(Bn.scanner.tokens);for(let e=0;e<Bn.pluginQueue.length;e++)Bn.pluginQueue[e][1]({scanner:Bn.scanner,parser:Bn.parser});Bn.initialized=!0}function Nst(e){return Bn.initialized||Lst(),Pst(Bn.parser.start,e,$st(Bn.scanner.start,e))}var kst={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"'},Dst=/^#[xX]([A-Fa-f0-9]+)$/,Fst=/^#([0-9]+)$/,jst=/^([A-Za-z0-9]+)$/,Ust=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var i=t.match(Dst);if(i)return String.fromCharCode(parseInt(i[1],16));if(i=t.match(Fst),i)return String.fromCharCode(parseInt(i[1],10));if(i=t.match(jst),i)return this.named[i[1]]||"&"+i[1]+";"}},e}(),Vst=/[\t\n\f ]/,Gst=/[A-Za-z]/,Bst=/\r\n?/g;function sn(e){return Vst.test(e)}function MK(e){return Gst.test(e)}function zst(e){return e.replace(Bst,`
`)}var qst=function(){function e(t,i,r){r===void 0&&(r="precompile"),this.delegate=t,this.entityParser=i,this.mode=r,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var s=this.peek();if(s==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&s===`
`){var n=this.tagNameBuffer.toLowerCase();(n==="pre"||n==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var s=this.peek(),n=this.tagNameBuffer;s==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):s==="&"&&n!=="script"&&n!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(s))},tagOpen:function(){var s=this.consume();s==="!"?this.transitionTo("markupDeclarationOpen"):s==="/"?this.transitionTo("endTagOpen"):(s==="@"||s===":"||MK(s))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(s))},markupDeclarationOpen:function(){var s=this.consume();if(s==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();n==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var s=this.consume();sn(s)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var s=this.consume();sn(s)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase()))},doctypeName:function(){var s=this.consume();sn(s)?this.transitionTo("afterDoctypeName"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase())},afterDoctypeName:function(){var s=this.consume();if(!sn(s))if(s===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),o=n.toUpperCase()==="PUBLIC",a=n.toUpperCase()==="SYSTEM";(o||a)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),o?this.transitionTo("afterDoctypePublicKeyword"):a&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var s=this.peek();sn(s)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):s==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):s==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):s===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},doctypePublicIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},afterDoctypePublicIdentifier:function(){var s=this.consume();sn(s)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var s=this.consume();sn(s)||(s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},doctypeSystemIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},afterDoctypeSystemIdentifier:function(){var s=this.consume();sn(s)||s===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var s=this.consume();s==="-"?this.transitionTo("commentStartDash"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(s),this.transitionTo("comment"))},commentStartDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var s=this.consume();s==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(s)},commentEndDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+s),this.transitionTo("comment"))},commentEnd:function(){var s=this.consume();s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+s),this.transitionTo("comment"))},tagName:function(){var s=this.consume();sn(s)?this.transitionTo("beforeAttributeName"):s==="/"?this.transitionTo("selfClosingStartTag"):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(s)},endTagName:function(){var s=this.consume();sn(s)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):s==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(s)},beforeAttributeName:function(){var s=this.peek();if(sn(s)){this.consume();return}else s==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var s=this.peek();sn(s)?(this.transitionTo("afterAttributeName"),this.consume()):s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==='"'||s==="'"||s==="<"?(this.delegate.reportSyntaxError(s+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(s)):(this.consume(),this.delegate.appendToAttributeName(s))},afterAttributeName:function(){var s=this.peek();if(sn(s)){this.consume();return}else s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s))},beforeAttributeValue:function(){var s=this.peek();sn(s)?this.consume():s==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(s))},attributeValueDoubleQuoted:function(){var s=this.consume();s==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueSingleQuoted:function(){var s=this.consume();s==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueUnquoted:function(){var s=this.peek();sn(s)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):s===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(s))},afterAttributeValueQuoted:function(){var s=this.peek();sn(s)?(this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var s=this.peek();s===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var s=this.consume();(s==="@"||s===":"||MK(s))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(s))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=zst(t);this.index<this.input.length;){var i=this.states[this.state];if(i!==void 0)i.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var i=this.input.slice(this.index,t),r=this.entityParser.parse(i);if(r){for(var s=i.length;s;)this.consume(),s--;return this.consume(),r}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),Hst=function(){function e(t,i){i===void 0&&(i={}),this.options=i,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new qst(this,t,i.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var i=0;i<arguments.length;i++)if(t.type===arguments[i])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var i=this.current("Doctype");i.publicIdentifier===void 0?i.publicIdentifier=t:i.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var i=this.current("Doctype");i.systemIdentifier===void 0?i.systemIdentifier=t:i.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function Wst(e,t){var i=new Hst(new Ust(kst),t);return i.tokenize(e)}const Xfe="LinkifyResult",t$="StartTag",Qfe="EndTag",H6="Chars",Jst="Comment",Zst="Doctype";function Yst(e,t){t===void 0&&(t={});const i=Wst(e),r=[],s=[],n=new Bj(t,Qst);for(let o=0;o<i.length;o++){const a=i[o];if(a.type===t$){r.push(a);const l=a.tagName.toUpperCase();if(!(l==="A"||n.ignoreTags.indexOf(l)>=0))continue;let h=r.length;Xst(l,i,++o,r),o+=r.length-h-1}else if(a.type!==H6)r.push(a);else{const l=Kst(a.chars,n);r.push.apply(r,l)}}for(let o=0;o<r.length;o++){const a=r[o];switch(a.type){case Xfe:s.push(a.rendered);break;case t$:{let l="<"+a.tagName;a.attributes.length>0&&(l+=" "+tnt(a.attributes).join(" ")),a.selfClosing&&(l+=" /"),l+=">",s.push(l);break}case Qfe:s.push(`</${a.tagName}>`);break;case H6:s.push(W6(a.chars));break;case Jst:s.push(`<!--${W6(a.chars)}-->`);break;case Zst:{let l=`<!DOCTYPE ${a.name}`;a.publicIdentifier&&(l+=` PUBLIC "${a.publicIdentifier}"`),a.systemIdentifier&&(l+=` "${a.systemIdentifier}"`),l+=">",s.push(l);break}}}return s.join("")}function Kst(e,t){const i=Nst(e),r=[];for(let s=0;s<i.length;s++){const n=i[s];n.t==="nl"&&t.get("nl2br")?r.push({type:t$,tagName:"br",attributes:[],selfClosing:!0}):!n.isLink||!t.check(n)?r.push({type:H6,chars:n.toString()}):r.push({type:Xfe,rendered:t.render(n)})}return r}function Xst(e,t,i,r){let s=1;for(;i<t.length&&s>0;){let n=t[i];n.type===t$&&n.tagName.toUpperCase()===e?s++:n.type===Qfe&&n.tagName.toUpperCase()===e&&s--,r.push(n),i++}return r}function Qst(e){let{tagName:t,attributes:i,content:r}=e;return`<${t} ${ent(i)}>${W6(r)}</${t}>`}function W6(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function eme(e){return e.replace(/"/g,"&quot;")}function ent(e){const t=[];for(const i in e){const r=e[i]+"";t.push(`${i}="${eme(r)}"`)}return t.join(" ")}function tnt(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i][0],s=e[i][1]+"";t.push(`${r}="${eme(s)}"`)}return t}const int="truncate-text",rnt="truncate-trigger",snt={beforeMount(e,t){!e.classList.contains("truncate")&&!t.value?.noTruncateClass&&e.classList.add("truncate"),e.toggleAttribute(int,!0)},mounted(e,t){let i;t.value&&t.value.externalTrigger&&(i=e.closest(`[${rnt}]`)),kj(e,{content:IK(e.textContent),onShow:nnt,allowHTML:!0,placement:"bottom-start",maxWidth:320,triggerTarget:i,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(IK(e.textContent)),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function nnt(e){if(!(e.reference.clientWidth<e.reference.scrollWidth||e.reference.clientHeight<e.reference.scrollHeight))return!1}function IK(e){if(e===null)return"";let t=Yst(e,{target:"_blank",validate:{url:i=>/^https?:\/\//.test(i)}});return t=`<div style='word-break: break-word;'>${t}</div>`,t}const ont=["content"],ant={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden"},lnt={class:"flex-grow text-lg py-16 pl-8 min-w-0",tabIndex:"0"},unt={key:1},cnt={key:0,class:"flex"},hnt=["innerHTML"],pnt={key:2,class:"px-8 py-16 border-t border-gray-400 default-focus-style"},dnt=Xt({__name:"panel-screen",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0},screenId:{type:String,required:!1}},setup(e,{expose:t}){const{t:i}=lr(),r=pg(),s=CA(),n=$s("iApi"),o=i6("el"),a=i6("contentEl"),l=_e();t({el:o});const u=e,h=Zt(()=>n?.fixture.get("appbar")?s.temporary:[]),p=Zt(()=>r.mobileView),f=Zt(()=>r.reorderable),m=S=>S.scrollHeight>S.clientHeight,g=()=>!p.value&&!u.panel.teleport,b=S=>{u.panel.move(S),S==="left"&&Oc(()=>{(o.value?.querySelector(".move-left")).focus()})},w=Zt(()=>u.screenId?u.panel.screens[u.screenId][n?.$i18n.locale.value??"en"]:null);return Nn(()=>{o.value?.addEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.addEventListener("keyup",S=>{S.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()}),l.value=new ResizeObserver(()=>{m(a.value)?a.value?.setAttribute("tabIndex","0"):a.value?.removeAttribute("tabIndex")}),l.value.observe(a.value)}),Pc(()=>{o.value?.removeEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.removeEventListener("keyup",S=>{S.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()}),l.value.disconnect()}),(S,T)=>{const x=qr("back"),_=qr("panel-options-menu"),M=qr("left"),I=qr("right"),A=qr("pin"),C=qr("expand"),R=qr("minimize"),O=qr("close"),k=Ii("truncate"),L=Ii("focus-item"),V=Ii("tippy");return Mi((Re(),We("div",{class:"h-full flex flex-col items-stretch",content:`<div style='word-break: break-word;'>${lt(i)(e.panel.alertName)+". "+lt(i)("panels.access")}</div>`,ref_key:"el",ref:o},[e.header?(Re(),We("header",ant,[Bt(x,{class:Cr(e.panel.teleport?"display-none":"block sm:display-none"),onClick:T[0]||(T[0]=J=>e.panel.close())},null,8,["class"]),Mi((Re(),We("h2",lnt,[S.$slots.header?tc(S.$slots,"header",{key:0}):(Re(),We("div",unt,Ui(lt(i)(e.panel.alertName)),1))])),[[k]]),S.$slots.controls?(Re(),Ji(_,{key:0},{default:Yr(()=>[tc(S.$slots,"controls")]),_:3})):sr("",!0),Me("div",{class:Cr(e.panel.teleport?"flex":"display-none sm:flex")},[e.panel.teleport?sr("",!0):(Re(),We("div",cnt,[f.value?(Re(),Ji(M,{key:0,onClick:T[1]||(T[1]=J=>b("left")),active:!e.panel.isLeftMostPanel},null,8,["active"])):sr("",!0),f.value?(Re(),Ji(I,{key:1,onClick:T[2]||(T[2]=J=>b("right")),active:!e.panel.isRightMostPanel},null,8,["active"])):sr("",!0),Bt(A,{onClick:T[3]||(T[3]=J=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(Re(),Ji(C,{key:2,onClick:T[4]||(T[4]=J=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):sr("",!0)])),e.panel.button&&h.value?.includes(e.panel.id)?(Re(),Ji(R,{key:1,onClick:T[5]||(T[5]=J=>e.panel.minimize())})):sr("",!0),Bt(O,{onClick:T[6]||(T[6]=J=>e.panel.close())})],2)])):sr("",!0),e.content?(Re(),We("div",{key:1,class:"p-8 flex-grow overflow-y-auto",ref_key:"contentEl",ref:a},[S.$slots.content?tc(S.$slots,"content",{key:0}):w.value?(Re(),We("div",{key:1,innerHTML:w.value.innerHTML},null,8,hnt)):sr("",!0)],512)):sr("",!0),e.footer?Mi((Re(),We("div",pnt,[tc(S.$slots,"footer")])),[[L]]):sr("",!0)],8,ont)),[[V,{trigger:"manual",touch:!1,onShow:g,allowHTML:!0,maxWidth:e.panel.style["flex-basis"]??350,popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}}),fnt={class:"relative"},mnt=["content","aria-label"],ynt=["transform"],gnt=Xt({__name:"pin",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",fnt,[Mi((Re(),We("button",{type:"button",class:Cr(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:lt(t)(e.active?"panels.controls.unpin":"panels.controls.pin"),"aria-label":lt(t)(e.active?"panels.controls.unpin":"panels.controls.pin")},[(Re(),We("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},r[0]||(r[0]=[Me("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1)]),8,ynt))],10,mnt)),[[s,{placement:"bottom",hideOnClick:!1}]])])}}}),vnt={class:"relative"},bnt=["content","aria-label"],wnt=Xt({__name:"close",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",vnt,[Mi((Re(),We("button",{type:"button",class:Cr(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:lt(t)("panels.controls.close"),"aria-label":lt(t)("panels.controls.close")},r[0]||(r[0]=[Me("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[Me("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)]),10,bnt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),_nt={class:"relative"},Snt=["content","aria-label"],xnt=Xt({__name:"back",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",_nt,[Mi((Re(),We("button",{type:"button",class:Cr(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:lt(t)("panels.controls.back"),"aria-label":lt(t)("panels.controls.back")},r[0]||(r[0]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[Me("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1)]),10,Snt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Tnt={class:"w-32 h-32"},Ent=["content"],Mnt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},Int={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},Ant=Xt({__name:"expand",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",Tnt,[Mi((Re(),We("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:lt(t)(`panels.controls.${e.active?"collapse":"expand"}`)},[e.active?(Re(),We("svg",Int,r[1]||(r[1]=[Me("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Me("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Me("path",{d:"M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"},null,-1),Me("path",{d:"M4 12h16v2H4z"},null,-1)]))):(Re(),We("svg",Mnt,r[0]||(r[0]=[Me("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Me("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Me("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1)])))],8,Ent)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}}}),$nt={class:"relative"},Cnt=["content","aria-label"],Rnt=Xt({__name:"minimize",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",$nt,[Mi((Re(),We("button",{type:"button",class:Cr(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:lt(t)("panels.controls.minimize"),"aria-label":lt(t)("panels.controls.minimize")},r[0]||(r[0]=[Me("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Me("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Me("path",{d:"M6 19h12v2H6z"})],-1)]),10,Cnt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Ont={class:"relative"},Pnt=["content","aria-label"],Lnt=Xt({__name:"right",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",Ont,[Mi((Re(),We("button",{type:"button",class:Cr(["p-8",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:lt(t)("panels.controls.moveRight"),"aria-label":lt(t)("panels.controls.moveRight")},r[0]||(r[0]=[Me("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Me("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"})],-1)]),10,Pnt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Nnt={class:"relative"},knt=["content","aria-label"],Dnt=Xt({__name:"left",props:{active:Boolean},setup(e){const{t}=lr();return(i,r)=>{const s=Ii("tippy");return Re(),We("div",Nnt,[Mi((Re(),We("button",{type:"button",class:Cr(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:lt(t)("panels.controls.moveLeft"),"aria-label":lt(t)("panels.controls.moveLeft")},r[0]||(r[0]=[Me("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Me("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"})],-1)]),10,knt)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),Fnt=Xt({__name:"panel-options-menu",setup(e){const{t}=lr();return(i,r)=>(Re(),Ji(Ij,{class:"flex",tooltip:lt(t)("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:Yr(()=>r[0]||(r[0]=[Me("div",{class:"p-6"},[Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[Me("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)])),default:Yr(()=>[tc(i.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"]))}}),jnt=dp(Fnt,[["__scopeId","data-v-5a275ac2"]]),Unt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},Vnt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},Gnt=Xt({__name:"fullscreen-nav",setup(e){const{t}=lr(),i=$s("iApi"),r=()=>{i.toggleFullscreen()};return(s,n)=>{const o=qr("mapnav-button");return Re(),Ji(o,{onClickFunction:r,tooltip:lt(t)("mapnav.fullscreen")},{default:Yr(()=>[lt(i).isFullscreen?(Re(),We("svg",Unt,n[0]||(n[0]=[Me("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Me("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)]))):(Re(),We("svg",Vnt,n[1]||(n[1]=[Me("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Me("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])))]),_:1},8,["tooltip"])}}}),Bnt=Xt({__name:"geolocator-nav",setup(e){const{t}=lr(),i=$s("iApi");let r=Js([]);const s=async()=>{if(r.length)n(r);else{const a=await o({maximumAge:1/0,timeout:5e3}).catch(l=>{l.code===GeolocationPositionError.PERMISSION_DENIED?i.notify.show(ma.ERROR,t("mapnav.geolocator.error.permission")):i.notify.show(ma.ERROR,t("mapnav.geolocator.error.internal"))});a&&(r=[a.coords.longitude,a.coords.latitude],n(r))}},n=a=>{let l=new Xn("geolocation",a,Ot.latLongSR(),!0);i.geo.map.zoomMapTo(l)},o=a=>new Promise((l,u)=>navigator.geolocation.getCurrentPosition(l,u,a));return(a,l)=>{const u=qr("mapnav-button");return Re(),Ji(u,{onClickFunction:s,tooltip:lt(t)("mapnav.geolocator")},{default:Yr(()=>l[0]||(l[0]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Me("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1)])),_:1},8,["tooltip"])}}}),znt=Xt({__name:"home-nav",setup(e){const{t}=lr(),i=$s("iApi"),r=()=>{const s=i.geo.map.getExtentSet();i.geo.map.zoomMapTo(s.fullExtent)};return(s,n)=>{const o=qr("mapnav-button");return Re(),Ji(o,{onClickFunction:r,tooltip:lt(t)("mapnav.home")},{default:Yr(()=>n[0]||(n[0]=[Me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Me("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),Me("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["tooltip"])}}}),qnt={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},Hnt=["content","aria-label"],Wnt=Xt({__name:"button",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){return(t,i)=>{const r=Ii("focus-item"),s=Ii("tippy");return Re(),We("div",qnt,[Mi((Re(),We("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:i[0]||(i[0]=n=>e.onClickFunction()),content:e.tooltip,"aria-label":typeof e.tooltip=="string"?e.tooltip:""},[tc(t.$slots,"default")],8,Hnt)),[[r],[s,{placement:"left"}]])])}}}),Jnt={class:"relative",tabindex:"-1"},Znt=["aria-label","content"],Ynt=Xt({__name:"button",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){const t=$s("iApi"),i=e,r=()=>t?.event.emit(ot.APPBAR_BUTTON_CLICK,i.id);return(s,n)=>{const o=Ii("focus-item"),a=Ii("tippy");return Re(),We("div",Jnt,[Mi((Re(),We("button",{type:"button",class:"py-6 w-full h-full",onClick:n[0]||(n[0]=()=>{e.onClickFunction(),r()}),"aria-label":String(e.tooltip),content:`<div style='word-break: break-word;'>${e.tooltip}</div>`},[tc(s.$slots,"default",{},void 0,!0)],8,Znt)),[[o],[a,{allowHTML:!0,placement:"right"}]])])}}}),Knt=dp(Ynt,[["__scopeId","data-v-4e07c09f"]]),Xnt=vr("areas-of-interest",()=>({areas:_e([])})),Qnt=vr("export",()=>{const e=_e({title:!0,map:!0,mapElements:!0,legend:!0,footnote:!0,timestamp:!0}),t=_e("");function i(r){if(e.value[r.name]!==void 0){const s=e.value[r.name];e.value[r.name]=r.selected!==void 0?r.selected:!s}}return{componentSelectedState:e,fileName:t,toggleSelected:i}}),eot=vr("extentguard",()=>{const e=_e(!1);function t(l){e.value=l}const i=_e(!1);function r(l){i.value=l}const s=_e(!1);function n(l){s.value=l}const o=_e([]);function a(l){o.value=l}return{active:e,setActive:t,enforcing:i,setEnforcing:r,alwaysOn:s,setAlwaysOn:n,extentSetIds:o,setExtentSetIds:a}}),d5=function e(t){function i(s,n,o){var a,l={};if(Array.isArray(s))return s.concat(n);for(a in s)l[o?a.toLowerCase():a]=s[a];for(a in n){var u=o?a.toLowerCase():a,h=n[a];l[u]=u in l&&typeof h=="object"?i(l[u],h,u=="headers"):h}return l}function r(s,n,o,a,l){var u=typeof s!="string"?(n=s).url:s,h={config:n},p=i(t,n),f={};a=a||p.data,(p.transformRequest||[]).map(function(m){a=m(a,p.headers)||a}),p.auth&&(f.authorization=p.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),f["content-type"]="application/json");try{f[p.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+p.xsrfCookieName+"=([^;]*)"))[2])}catch{}return p.baseURL&&(u=u.replace(/^(?!.*\/\/)\/?/,p.baseURL+"/")),p.params&&(u+=(~u.indexOf("?")?"&":"?")+(p.paramsSerializer?p.paramsSerializer(p.params):new URLSearchParams(p.params))),(p.fetch||fetch)(u,{method:(o||p.method||"get").toUpperCase(),body:a,headers:i(p.headers,f,!0),credentials:p.withCredentials?"include":l}).then(function(m){for(var g in m)typeof m[g]!="function"&&(h[g]=m[g]);return p.responseType=="stream"?(h.data=m.body,h):m[p.responseType||"text"]().then(function(b){h.data=b,h.data=JSON.parse(b)}).catch(Object).then(function(){return(p.validateStatus?p.validateStatus(m.status):m.ok)?h:Promise.reject(h)})})}return t=t||{},r.request=r,r.get=function(s,n){return r(s,n,"get")},r.delete=function(s,n){return r(s,n,"delete")},r.head=function(s,n){return r(s,n,"head")},r.options=function(s,n){return r(s,n,"options")},r.post=function(s,n,o){return r(s,o,"post",n)},r.put=function(s,n,o){return r(s,o,"put",n)},r.patch=function(s,n,o){return r(s,o,"patch",n)},r.all=Promise.all.bind(Promise),r.spread=function(s){return s.apply.bind(s,s)},r.CancelToken=typeof AbortController=="function"?AbortController:Object,r.defaults=t,r.create=e,r}(),tot={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60},cO={en:{},fr:{}};class iot{list={};listFetched=!1;constructor(t,i){d5.get(i).then(r=>{r.data.definitions.forEach(s=>cO[t][s.code]=s.description),Object.keys(cO[t]).forEach(s=>{this.list[s]=cO[t][s]}),this.listFetched=!0})}fsaToProvinces(t){const i={};let r=tot[t.substring(0,1).toUpperCase()];return typeof r=="number"&&(r=[r]),r.forEach(s=>{i[s]=this.list[s]}),i}}function rot(e,t){return new iot(e,t)}const jE={en:{ADDRESS:"Street Address",FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale"},fr:{ADDRESS:"Adresse Municipale",FSA:"Région De Tri D'Acheminement",NTS:"Système National De Référence Cartographique",COORD:"Latitude/Longitude",SCALE:"Échelle"}};class sot{allTypes={};validTypes={};filterComplete=!1;typesFetched=!1;constructor(t,i){d5.get(i).then(r=>{r.data.definitions.forEach(s=>{jE[t][s.code]=s.term.split(`${s.code}-`)[1]}),Object.keys(jE[t]).forEach(s=>{this.allTypes[s]=jE[t][s],this.validTypes[s]=jE[t][s]}),this.typesFetched=!0})}filterValidTypes(t){if(this.filterComplete)return this.validTypes;if(t=typeof t=="string"?[t]:t,t&&t.length>0)for(const i of t)delete this.validTypes[i];return this.filterComplete=!0,this.validTypes}}function not(e,t){return new sot(e,t)}function oot(e,t){const i=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/,r=/^\d{2,3}[A-P]/,s=/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/;if(i.test(t)&&!e.disabledSearchTypes.includes("LAT/LNG")){const n=t.slice(0,-1);return new aot(e,n)}else return s.test(t)&&!e.disabledSearchTypes.includes("FSA")?new lot(e,t):r.test(t)&&!e.disabledSearchTypes.includes("NTS")?new uot(e,t.substring(0,6).toUpperCase()):new cot(e,t)}class f5{config;query;failedServs=[];results=[];onComplete;latLongResult;featureResults=[];resultType="geoname";constructor(t,i){this.query=i,this.config=t}search(){return this.jsonRequest(this.getUrl()).then(t=>this.normalizeNameItems(t.items)).catch(()=>(console.error("Geoname service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}getUrl(t,i,r,s){let n="";return t?n=this.config.geoLocateUrl+"?q="+this.query:(r&&s?n=`${this.config.geoNameUrl}?lat=${r}&lon=${s}&num=${this.config.maxResults}`:n=`${this.config.geoNameUrl}?q=${this.query}&num=${this.config.maxResults}`,this.config.categories.length>0&&(n+=`&concise=${this.config.categories.join(",")}`),this.config.officialOnly&&(n+="&category=O")),n}normalizeNameItems(t){return t.filter(i=>this.config.types.validTypes[i.concise.code]).map(i=>({name:i.name,location:i.location,province:this.config.provinces.list[i.province.code],type:this.config.types.allTypes[i.concise.code],LatLon:{lat:i.latitude,lon:i.longitude},bbox:i.bbox,order:this.config.sortOrder.indexOf(i.concise.code)>=0?this.config.sortOrder.indexOf(i.concise.code):this.config.sortOrder.length}))}jsonRequest(t){return new Promise((i,r)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="json",s.onload=()=>{if(s.status===200){const n=typeof s.response=="string"?JSON.parse(s.response):s.response;i(n)}else r("Could not load results from remote service.")},s.send()})}locateByQuery(){return this.jsonRequest(this.getUrl(!0,void 0))}nameByLatLon(t,i,r){return this.jsonRequest(this.getUrl(!1,r,t,i)).then(s=>this.normalizeNameItems(s.items)).catch(()=>(console.error("LatLon service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}}class aot extends f5{constructor(t,i){super(t,i),this.resultType="latlong";const s=i.split(/[\s|,|;|]/).filter(a=>!isNaN(a)&&a!=="").map(a=>parseFloat(a)),n=.015,o=[s[1]-n,s[0]-n,s[1]+n,s[0]+n];this.latLongResult={name:`${s[0]},${s[1]}`,location:{latitude:s[0],longitude:s[1]},type:"Latitude/Longitude",position:[s[1],s[0]],bbox:o},this.onComplete=new Promise((a,l)=>{this.nameByLatLon(s[0],s[1]).then(u=>{u?(this.results=u,a(this)):l("Given lat lon coordinates cannot be found")})})}}class lot extends f5{constructor(t,i){i=i.substring(0,3).toUpperCase(),super(t,i),this.resultType="fsa",this.onComplete=new Promise(r=>{this.formatLocationResult().then(s=>{s?(this.featureResults.push(s),this.nameByLatLon(s.LatLon.lat,s.LatLon.lon,Object.keys(s._provinces).map(n=>parseInt(n))).then(n=>{this.results=n,r(this)})):(console.log("FSA code given cannot be found."),r(this))})})}formatLocationResult(){return this.locateByQuery().then(t=>{if(t.length===1&&this.query){const i=this.config.provinces.fsaToProvinces(this.query);return{fsa:this.query,code:"FSA",desc:this.config.types.allTypes.FSA,province:Object.keys(i).map(r=>i[r]).join(","),_provinces:i,LatLon:{lat:t[0].geometry.coordinates[1],lon:t[0].geometry.coordinates[0]}}}}).catch(()=>{console.error("FSA service failed"),this.failedServs.push("geolocation")})}}class uot extends f5{unitName;unit;mapSheets=[];constructor(t,i){super(t,i),this.resultType="nts",i=isNaN(parseInt(i[2]))?"0"+i:i,this.unitName=i,this.onComplete=new Promise(r=>{this.locateByQuery().then(s=>{if(s.length>0&&this.query){const n=this.locateToResult(s);this.unit=n[0],this.mapSheets=n,this.featureResults.push(this.unit),this.nameByLatLon(this.unit.LatLon.lat,this.unit.LatLon.lon).then(o=>{this.results=o,r(this)})}else console.log("Given NTS code not found"),r(this)}).catch(()=>{console.error("NTS service failed"),this.failedServs.push("geolocation"),r(this)})})}locateToResult(t){return t.map(r=>{const s=r.title.split(" ");return{nts:s.shift()||"",location:s.join(" "),code:"NTS",desc:this.config.types.allTypes.NTS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]},bbox:r.bbox}})}equals(t){return this.unitName===t.unitName}}class cot extends f5{constructor(t,i){i=encodeURIComponent(i.trim()),super(t,i),this.resultType="address",this.onComplete=new Promise(r=>{this.locateByQuery().then(s=>{this.featureResults=this.locateToResult(s),this.search().then(n=>{this.results=n,r(this)})}).catch(()=>{this.failedServs.push("geolocation"),console.error("Address service failed"),this.search().then(s=>{this.results=s,r(this)})})})}locateToResult(t){return this.config.categories.length>0&&!this.config.categories.includes("ADDR")?[]:t.filter(r=>r.type?.includes("Street")).map(r=>{const[s,n,o]=r.title.split(", ");return{name:s,city:n.split(" Of ").pop(),province:o,desc:this.config.types.allTypes.ADDRESS,LatLon:{lat:r.geometry.coordinates[1],lon:r.geometry.coordinates[0]}}})}}const AK="https://geogratis.gc.ca/services/geolocation/@{language}/locate",$K="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",CK="https://geogratis.gc.ca/services/geoname/@{language}/codes/province.json",RK="https://geogratis.gc.ca/services/geoname/@{language}/codes/concise.json",hot={10:"NL",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB",59:"BC",60:"YU",61:"NT",62:"NU",72:"UF",73:"IW"};class OK{config;constructor(t,i){let r,s,n,o;const a=i?.serviceUrls;a?(r=a.geoLocation?a.geoLocation:AK,s=a.geoNames?a.geoNames:$K,n=a.geoProvince?a.geoProvince:CK,o=a.geoTypes?a.geoTypes:RK):(r=AK,s=$K,n=CK,o=RK),r=r.replace("@{language}",t),s=s.replace("@{language}",t),n=n.replace("@{language}",t),o=o.replace("@{language}",t);const l=i?.settings;let u,h,p,f,m;l?(u=l.categories?l.categories:[],h=l.sortOrder?l.sortOrder:[],p=l.disabledSearchTypes?l.disabledSearchTypes:[],f=l.maxResults>0?l.maxResults:100,m=!!l.officialOnly):(u=[],h=[],p=[],f=100,m=!1),this.config={language:t,geoNameUrl:s,geoLocateUrl:r,types:not(t,o),provinces:rot(t,n),categories:u,sortOrder:h,disabledSearchTypes:p,maxResults:f,officialOnly:m},this.config.types.filterValidTypes(i?.excludeTypes),this._provinceList=[],this._typeList=[],this._excludedTypes=i?.excludeTypes||[]}get provinceList(){return this._provinceList}get typeList(){return this._typeList}set provinceList(t){this._provinceList=t}set typeList(t){this._typeList=t}levenshteinDistance(t,i){i=i.toLowerCase().trim();const r=decodeURI(t.query.toLowerCase().replace("*","")),s=[];for(let n=0;n<=i.length;n++){s[n]=[n];for(let o=1;o<=r.length;o++)s[n][o]=n===0?o:Math.min(s[n][o-1]+1,s[n-1][o]+.2,s[n-1][o-1]+(r[o-1]===i[n-1]?0:1))}return s[i.length][r.length]}findProvinceObj(t){return this.provinceList.find(i=>i.name===t)}query(t){return oot(this.config,t.toUpperCase()).onComplete.then(i=>{let r=[];i.featureResults.length>0?i.resultType==="fsa"?r=i.featureResults.map(n=>({name:n.fsa,bbox:[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:-1})):i.resultType==="nts"?r=i.featureResults.map(n=>({name:n.nts,bbox:n.bbox??[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon},order:-1})):i.resultType==="address"&&(r=i.featureResults.map(n=>({name:n.name,bbox:[n.LatLon.lon+.002,n.LatLon.lat-.002,n.LatLon.lon-.002,n.LatLon.lat+.002],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.city,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:this.config.sortOrder.indexOf("ADDR")>=0?this.config.sortOrder.indexOf("ADDR"):this.config.sortOrder.length})),this.config.sortOrder.length>0&&(r=r.sort((n,o)=>this.levenshteinDistance(i,n.name)>this.levenshteinDistance(i,o.name)?1:-1))):i.resultType==="latlong"&&(r=[i.latLongResult],r[0].order=-1);const s=i.results.map(n=>({name:n.name,bbox:n.bbox,type:n.type,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:n.order}));return{results:r.concat(s).slice(0,this.config.maxResults).sort((n,o)=>this.config.sortOrder.length>0?n.order>o.order?1:-1:this.levenshteinDistance(i,n.name)>this.levenshteinDistance(i,o.name)?1:-1),failedServs:i.failedServs}})}fetchProvinces(){return new Promise(t=>{const i=setInterval(()=>{if(this.config.provinces.listFetched){clearInterval(i);const r=[],s={code:-1,abbr:"...",name:"..."};r.push(s);const n=this.config.provinces.list;for(const o in n)r.push({code:o,abbr:hot[o],name:n[o]});this.provinceList=r,t(this.provinceList)}})})}fetchTypes(){return new Promise(t=>{const i=setInterval(()=>{if(this.config.types.typesFetched){clearInterval(i);const r=[],s={code:-1,name:"..."};r.push(s);const n=this.config.types.allTypes;for(const o in n)this._excludedTypes.includes(o)||r.push({code:o,name:n[o]});this.typeList=r,t(this.typeList)}},250)})}}function PK(e,t,i){return e&&t.extent&&(i=i.filter(r=>r.bbox[0]<=t.extent.xmax&&r.bbox[1]<=t.extent.ymax&&r.bbox[2]>=t.extent.xmin&&r.bbox[3]>=t.extent.ymin)),t.province&&t.province!=="..."&&(i=i.filter(r=>r.location.province?.name&&r.location.province.name===t.province)),t.type&&t.type!=="..."&&(i=i.filter(r=>r.type===t.type)),i}const pot=vr("geosearch",()=>{const e=_e(new OK("en",void 0)),t=_e({type:"",province:"",extent:void 0}),i=_e(!1),r=_e(""),s=_e(""),n=_e(""),o=_e([]),a=_e([]),l=_e(!1),u=_e([]),h=Zt(()=>new Promise(x=>{e.value.fetchProvinces().then(_=>{_.sort((M,I)=>M.name>I.name?1:-1),x(_)})})),p=Zt(()=>new Promise(x=>{e.value.fetchTypes().then(_=>{_.sort((M,I)=>M.name>I.name?1:-1),x(_)})}));function f(x,_){e.value=new OK(x,_)}function m(x){l.value=!0;const _=r.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim();if(!_)o.value=[],a.value=[],l.value=!1;else if(_&&_!==n.value||x){const M=setInterval(()=>{e.value.config.provinces.listFetched&&e.value.config.types.typesFetched&&(clearInterval(M),e.value.query(`${_}*`).then(I=>{u.value=I.failedServs,n.value=_,a.value=I.results;const A=PK(i.value,t.value,a.value);o.value=A||[],l.value=!1}))},250)}else{const M=PK(i.value,t.value,a.value);o.value=M||[],l.value=!1}}function g(x){t.value.province=typeof x.province>"u"?"":x.province,m(x.forceReRun)}function b(x){t.value.type=typeof x.type>"u"?"":x.type,m(x.forceReRun)}function w(x){n.value=r.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim(),r.value=x,m()}function S(x){const _={a:"àáâãäåāăąǎȁȃȧạảấầẩẫậắằẳẵặ",b:"ḃɓḅḇ",c:"çćĉċč",d:"ďḋḍḏḑḓ",e:"èéêëēĕėęěȅȇẹẻẽếềểễệ",f:"ƒḟ",g:"ĝğġģǧǵḡ",h:"ĥȟḣḥḧḩḫẖ",i:"ìíîïĩīĭįıȉȋịỉĩ",j:"ĵǰɉ",k:"ķĸƙḳḵ",l:"ĺļľŀłḷḹḻḽ",m:"ḿṁṃ",n:"ñńņňŉŋǹṅṇṉṋ",o:"òóôõöōŏőơǒǫǭȍȏȯọỏốồổỗộớờởỡợ",p:"ṕṗ",r:"ŕŗřȑȓṛṝṟ",s:"śŝşšșṡṣṥṧṩ",t:"ţťŧțṫṭṯṱẗ",u:"ùúûüũūŭůűųưǔǖǘǚǜȕȗụủứừửữự",v:"ṽṿ",w:"ẁẃŵẅẇẉẋ",x:"ẋẍ",y:"ỳýŷÿỹȳẏẙỵỷỹ",z:"źżžẑẓẕ"};x=x.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),s.value=Array.from(x).map(M=>Object.keys(_).includes(M)?"["+M+_[M]+"]":M.replace(/["$!*+?^{}()|[\]\\]/g,"").replace(/[.\\]/g,"\\$&").trim()).join("")}function T(x){if(x.visible!==void 0&&(i.value=x.visible),x.extent.sr.wkid!==4326)throw new Error("an extent that was not projected to wkid 4326 was passed to the geosearch store");t.value.extent=x.extent,m()}return{GSservice:e,queryParams:t,resultsVisible:i,searchVal:r,searchRegex:s,lastSearchVal:n,searchResults:o,savedResults:a,loadingResults:l,failedServices:u,getProvinces:h,getTypes:p,initService:f,runQuery:m,setProvince:g,setType:b,setSearchTerm:w,setSearchRegex:S,setMapExtent:T}}),dot=vr("help",()=>({location:_e("./help/")}));var tme=(e=>(e.Visibility="visibilityButton",e.Expand="expandButton",e))(tme||{}),J6=(e=>(e.Item="item",e.Placeholder="placeholder",e.Error="error",e))(J6||{});class ime extends Kr{_uid;_name;_type;_children=[];_parent=void 0;_loadPromise;_hidden;_expanded;_visibility;_exclusive;_controls;_disabledControls;_lastVisible;_visibleChildren;constructor(t,i,r){super(t),this._uid=s1.sharedUtils.generateUUID(),this._name=i.name,this._type=i.type??"placeholder",this._parent=r,this._children=[],this._loadPromise=new Wr,this._hidden=i.hidden??!1,this._expanded=i.expanded??!0,this._visibility=!0,this._exclusive=i.exclusive??!1,this._controls=i.controls?.slice()??["visibilityButton","expandButton"],this._disabledControls=i.disabledControls?.slice(),this._lastVisible,this._visibleChildren=[]}get uid(){return this._uid}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}get children(){return this._children}set children(t){this._children=t}get parent(){return this._parent}set parent(t){this._parent=t}get loadPromise(){return this._loadPromise.getPromise()}get hidden(){return this._hidden}get expanded(){return this._expanded}get visibility(){return this._visibility}get exclusive(){return this._exclusive}controlAvailable(t){return this._disabledControls?.includes(t)?!1:this._controls?.includes(t)}setControl(t,i){i&&this._disabledControls?.includes(t)?(this._disabledControls=this._disabledControls.filter(r=>r!==t),this._controls?.push(t)):!i&&this._controls?.includes(t)&&(this._controls=this._controls.filter(r=>r!==t),this._disabledControls?.push(t))}toggleHidden(t){this._hidden=t??!this.hidden}toggleExpanded(t){this._expanded=t??!this.expanded}toggleVisibility(t,i=!0){if(this.visibility!==t){if(this._visibility=t??!this.visibility,!this.exclusive)this.visibility?this._visibleChildren.length>0?this._visibleChildren.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!0,!1)):this.children.forEach(r=>r.toggleVisibility(!1,!1));else if(this.visibility)if(this._lastVisible&&(!(this._lastVisible instanceof hd)||this._lastVisible.layerControlAvailable(Lr.Visibility)))this._lastVisible.toggleVisibility(!0);else{const r=this.children.find(s=>!(s instanceof hd)||s.layerControlAvailable(Lr.Visibility));r&&r.toggleVisibility(!0)}else this._lastVisible=this.children.find(r=>r.visibility),this._lastVisible?.toggleVisibility(!1);this.parent&&i&&this.parent.checkVisibility(this)}}checkVisibilityRules(){this.parent&&!this.parent.visibility?this.toggleVisibility(!1,!1):this.parent?.exclusive&&this.parent.children.some(i=>i.visibility&&i!==this&&i.type==="item")&&this.toggleVisibility(!1,!1)}checkVisibility(t){this instanceof hd&&!this.layerControlAvailable(Lr.Visibility)||(this.exclusive?t.visibility?(this.children.forEach(i=>{i.uid!==t.uid&&i.toggleVisibility(!1,!1)}),this._lastVisible=t,this._visibility=!0,this instanceof hd&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this instanceof hd&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1),this._lastVisible=t):this.children.some(i=>i.visibility)?(this._visibility=!0,this._visibleChildren=this.children.filter(i=>i.visibility),this instanceof hd&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this._visibleChildren=[],this instanceof hd&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1)),this.parent&&this.parent.checkVisibility(this))}getConfig(){const t={name:this._name,hidden:this._hidden,expanded:this._expanded,exclusive:this._exclusive,controls:this._controls,disabledControls:this._disabledControls},i=[];return this.children.forEach(r=>{i.push(r.getConfig())}),this.exclusive?t.exclusiveVisibility=i:t.children=i,t}onAdded(){}onRemoved(){this.toggleVisibility(!1)}load(){this._type="item",this._loadPromise.resolveMe(),this.checkVisibilityRules()}reload(){this._type="placeholder",this._loadPromise=new Wr}error(){this._type!=="error"&&(this._type="error",this._loadPromise.getPromise().catch(()=>{}),this._loadPromise.rejectMe(),this.checkVisibilityRules())}}class hd extends ime{_layerId;_layerIdx;_layerUid="";_isSublayer=!1;_layer;_layerInitVis;_layerRedrawing=!1;_layerOffscale=!1;_treeGrown=!1;_customSymbology=!1;_coverIcon;_description;_symbologyExpanded;_origLayerControls;_origLayerDisabledControls;_layerControls;_layerDisabledControls;_maxLines;_symbologyRenderStyle;_symbologyStack;handlers=[];constructor(t,i,r){super(t,i,r),this._type=J6.Placeholder,this._layerId=i.layerId,this._layerIdx=i.sublayerIndex,this._isSublayer=i.sublayerIndex!==void 0,this._layerControls=i.layerControls??[],this._origLayerControls=i.layerControls,this._layerDisabledControls=i.disabledLayerControls??[],this._origLayerDisabledControls=i.disabledLayerControls,this._layerRedrawing=!1,this._symbologyExpanded=i.symbologyExpanded||!1,i.coverIcon&&(this._coverIcon=i.coverIcon),i.description&&(this._description=i.description),this._symbologyRenderStyle=i.symbologyRenderStyle??"icons",this._customSymbology=!!i.symbologyStack,this._symbologyStack=i.symbologyStack?.map(s=>({uid:this.$iApi.geo.shared.generateUUID(),label:s.text,definitionClause:s.sqlQuery,imgUrl:s.image??"",drawPromise:Promise.resolve(),visibility:!0,lastVisibility:!0})),this._maxLines=i.maxLines&&[1,2,3,4,5,6].includes(i.maxLines)?i.maxLines:void 0}get parentLayerId(){return this._isSublayer?this._layerId.slice(0,this._layerId.length-`-${this._layerIdx}`.length):void 0}get layerId(){return this._layerId}get layerIdx(){return this._layerIdx}get isSublayer(){return this._isSublayer}get layerUid(){return this._layerUid}get layer(){return this._layer}set layer(t){this._layer=t,this._layerId=t.id,this._layerIdx=t.isSublayer?t.layerIdx:void 0,this._layerUid=t.uid,this._name=this._name||t.name,this._symbologyStack=this._customSymbology?this._symbologyStack:t.legend,this.updateLayerControls()}get layerOffscale(){return this._layerOffscale}set layerOffscale(t){this._layerOffscale=t}get layerRedrawing(){return this._layerRedrawing}set layerRedrawing(t){this._layerRedrawing=t}get coverIcon(){return this._coverIcon}set coverIcon(t){this._coverIcon=t}get description(){return this._description}set description(t){this._description=t}get symbologyExpanded(){return this._symbologyExpanded}get treeGrown(){return this._treeGrown}set treeGrown(t){this._treeGrown=t}get origLayerControls(){return this._origLayerControls}get origDisabledLayerControls(){return this._origLayerDisabledControls}set symbologyRenderStyle(t){this._symbologyRenderStyle=t}get symbologyRenderStyle(){return this._symbologyRenderStyle}set symbologyStack(t){this._symbologyStack=t}get symbologyStack(){return this._symbologyStack}get maxLines(){return this._maxLines}getConfig(){const t={layerId:this._layerId,sublayerIndex:this._layerIdx,layerControls:this._layerControls,disabledLayerControls:this._layerDisabledControls,symbologyExpanded:this._symbologyExpanded,coverIcon:this._coverIcon,description:this._description,maxLines:this._maxLines};return{...super.getConfig(),...t}}toggleVisibility(t,i=!0,r=!1){if(!(!this.layerControlAvailable(Lr.Visibility)&&!r)&&(super.toggleVisibility(t,i),this.layer&&this.layer.layerExists)){this.layer.visibility=this.visibility;const s=this._symbologyStack.some(n=>n.lastVisbility);this._symbologyStack.forEach(n=>{s||(n.lastVisbility=!0),n.visibility=this.visibility?n.lastVisbility:!1})}}toggleSymbology(t){return this._symbologyExpanded=t??!this._symbologyExpanded,this._symbologyExpanded}setSymbologyVisibility(t,i){this._symbologyStack.some(r=>((t===void 0||r.uid===t)&&(r.visibility=i,r.lastVisbility=i),t!==void 0&&r.uid===t))}load(t){const i=t instanceof qj?t:this.$iApi.geo.layer.getLayer(this._layerId??this._layerUid);i&&(this.layer=i,this._layerRedrawing=i.mapLayer&&i.drawState!==xo.UP_TO_DATE,i.loadPromise().then(()=>{this._layerInitVis=typeof this._layerInitVis<"u"?this._visibility:i.visibility,super.load(),this.toggleVisibility(this._layerInitVis,!0,!0),i.visibility||this.setSymbologyVisibility(void 0,!1),this.handlers.push(this.$iApi.event.on(ot.LAYER_VISIBILITYCHANGE,r=>{r.layer.uid===this.layer.uid&&this._type===J6.Item&&this.toggleVisibility(r.visibility,!0,!0)})),this.handlers.push(this.$iApi.event.on(ot.LAYER_DRAWSTATECHANGE,r=>{this.layer.uid===r.layer.uid&&(r.layer.drawState===xo.REFRESH?this.layerRedrawing=!0:setTimeout(()=>{this.layerRedrawing=r.layer.drawState===xo.REFRESH},500))})),this._layerOffscale=this.$iApi.geo.map.created?i.isOffscale():!1,this.handlers.push(this.$iApi.event.on(ot.MAP_SCALECHANGE,()=>{this.$iApi.geo.map.created&&(this._layerOffscale=this.layer?.isOffscale())}))}).catch(()=>{this.error()}))}error(){this.updateLayerControls(),super.error()}layerControlAvailable(t){return this._layerDisabledControls?.includes(t)?!1:!!this._layerControls?.includes(t)}updateLayerControls(){const t=this.$iApi.geo.layer.getLayerControls(this.layerId)??this.$iApi.geo.layer.getLayerControls(this.parentLayerId??"");this._origLayerControls||(this._layerControls=t?.controls??[]),this._origLayerDisabledControls||(this._layerDisabledControls=t?.disabledControls??[])}}var fot=(e=>(e.Title="title",e.Text="text",e.Image="image",e.Markdown="markdown",e.Template="template",e))(fot||{});class LK extends ime{_infoType;_content;constructor(t,i,r){super(t,i,r),this._infoType=i.infoType??"title",this._content=i.content??"",i.infoType==="template"&&this.$element.component(`${this._uid}-info-section`,{template:this._content}),(i.infoType||i.content)&&(this._controls=i.controls?.slice()??[tme.Expand]),super.load()}get infoType(){return this._infoType}get content(){return this._content}set content(t){this._content=t}getConfig(){const t={infoType:this._infoType,content:this._content};return{...super.getConfig(),...t}}}const mot=vr("legend",()=>{const e=_e(),t=_e([]),i=_e([]),r=_e(!0),s=_e(3);function n(l){if(l.parent===void 0)t.value.push(l.item);else{if(!(l.item instanceof LK)&&!(l.item instanceof hd)){console.error("attempted to add an unsupported legend item type");return}l.parent.children.push(l.item)}}function o(l){const u=h=>(h=h.filter(p=>(p===l&&!p.children.length&&p.onRemoved(),p!==l)),h.forEach(p=>{p.children=u(p.children)}),h=h.filter(p=>!(p instanceof LK&&!p.children.length&&p.content==="")),h);t.value=u(t.value)}function a(l){if(l.oldItem.parent===void 0){const u=t.value,h=u.indexOf(l.oldItem);h>-1&&(t.value[h]=l.newItem),t.value=u}else{const u=l.oldItem.parent.children,h=u.indexOf(l.oldItem);h>-1&&(u[h]=l.newItem),l.oldItem.parent.children=u}}return{legendConfig:e,multilineItems:r,maxLines:s,children:t,headerControls:i,addItem:n,removeItem:o,replaceItem:a}}),yot=vr("mapnav",()=>{const e=_e({}),t=_e([]);function i(r){r in e.value&&delete e.value[r];const s=t.value.indexOf(r);s!==-1&&t.value.splice(s,1)}return{items:e,order:t,removeItem:i}}),got=vr("metadata",()=>{const e=_e(""),t=_e({type:"LineString",coordinates:[]});return{status:e,response:t}}),vot=vr("northarrow",()=>{const e=_e(""),t=_e("");return{arrowIcon:e,poleIcon:t}}),bot=vr("overviewmap",()=>{const e=_e({lodSets:[],extentSets:[],basemaps:[],tileSchemas:[],initialBasemapId:""}),t=_e({}),i=_e(!0),r=_e(1.5),s=_e("#FF0000"),n=_e(1),o=_e("#000000"),a=_e(.25);function l(u){e.value.initialBasemapId=u}return{mapConfig:e,basemaps:t,startMinimized:i,expandFactor:r,borderColour:s,borderWidth:n,areaColour:o,areaOpacity:a,updateInitialBasemap:l}}),wot=vr("scrollguard",()=>{const e=_e(!1);function t(i){e.value=i}return{enabled:e,setEnabled:t}});var dn=(e=>(e[e.UPLOAD=0]="UPLOAD",e[e.FORMAT=1]="FORMAT",e[e.CONFIGURE=2]="CONFIGURE",e))(dn||{});const _ot=vr("wizard",()=>{const e={id:"Placeholder",layerType:ft.UNKNOWN,url:""},t=_e(),i=_e(""),r=_e(""),s=_e(!0),n=_e(null),o=_e({config:e,configOptions:[]}),a=_e(dn.UPLOAD);function l(u){switch(a.value){case dn.UPLOAD:u===dn.UPLOAD?i.value="":u===dn.FORMAT&&(a.value=dn.FORMAT);break;case dn.FORMAT:u===dn.UPLOAD?(n.value&&(i.value="",n.value=null),r.value="",a.value=dn.UPLOAD):u===dn.CONFIGURE&&(a.value=dn.CONFIGURE);break;case dn.CONFIGURE:u===dn.UPLOAD?(i.value="",r.value="",n.value=null,s.value=!0,o.value={config:e,configOptions:[]},a.value=dn.UPLOAD):u===dn.FORMAT&&(o.value={config:e,configOptions:[]},s.value=!0,a.value=dn.FORMAT);break}}return{layerSource:t,url:i,typeSelection:r,nested:s,fileData:n,layerInfo:o,currStep:a,goToStep:l}});class Sot{fixture;panel;event;geo;notify;ui;startRequired=!1;_eventsOn=!1;$vApp;$element;$i18n;$rootEl;_isFullscreen;constructor(t,i,r){this.event=new tKe(this);const s=xot(t,this);this.$vApp=s.app,this.$element=s.element,this.$i18n=s.i18n,this.$rootEl=s.app.$root?.$el,this.fixture=new Fat(this),this.panel=new jat(this),this.geo=new kat(this),this.ui={maptip:this.geo.map.maptip,exposeOids:!1,exposeMeasurements:!0,getZoomIcon:()=>"",formatNumber:()=>"",scrollToInstance:!1,suppressNumberLocalization:!1,escapeHtml:()=>"",isPlainText:()=>!0},this.notify=new dtt(this),this._isFullscreen=vu.isEnabled&&!!this.$vApp.$root&&vu.isFullscreen&&vu.element===this.$vApp.$root.$el,vu.isEnabled&&vu.onchange(()=>{this._isFullscreen=vu.isEnabled&&!!this.$vApp.$root&&vu.isFullscreen&&vu.element===this.$vApp.$root.$el}),this.initialize(!0,i,r)}initialize(t,i,r){const s=Eo(this.$vApp.$pinia),n=pg(this.$vApp.$pinia),o=LA(this.$vApp.$pinia);if(i?.configs!==void 0){const l=i.configs,u=l[this.$i18n.locale.value]??l[Object.keys(l)[0]];s.newConfig(u),s.registerConfig({config:u,configLangs:Object.keys(l),allLangs:Object.keys(this.$i18n.messages.value)});for(const g in l)s.registerConfig({config:l[g],configLangs:[g]});s.activeBasemapConfig=u.map.basemaps.find(g=>g.id===u.map.initialBasemapId);const h=setInterval(()=>{const g=this.$vApp.$el.querySelector("#esriMap");if(g&&(clearInterval(h),this.geo.map.createMap(u.map,g),g._tippy.hide(0),o.setMaptipInstance(g._tippy),u.layers&&u.layers.length>0)){let b=0;u.layers.forEach(w=>{const S=this.geo.layer.createLayer(w);this.geo.map.addLayer(S,b).catch(()=>{}),S.mapLayer&&b++})}},100);if(u.panels){if(u.panels.open&&u.panels.open.length>0){const g=u.panels.open.map(b=>b.id);this.panel.isRegistered(g).then(()=>{u.panels?.open?.forEach(b=>{this.panel.open({id:b.id,screen:b.screen}),b.pin&&this.panel.pin(b.id)})})}n.reorderable=u.panels.reorderable??!0}!u.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),u.system?.proxyUrl&&(this.geo.proxy=u.system.proxyUrl),u.system?.exposeOid&&(this.ui.exposeOids=u.system.exposeOid),u.system?.exposeMeasurements!=null&&(this.ui.exposeMeasurements=u.system.exposeMeasurements),u.system?.scrollToInstance&&(this.ui.scrollToInstance=u.system?.scrollToInstance),u.system?.suppressNumberLocalization&&(this.ui.suppressNumberLocalization=u.system?.suppressNumberLocalization);const p={magnify:'<svg class="m-auto" xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /><path d="M0 0h24v24H0V0z" fill="none" /><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></svg>',globe:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="16" height="16" viewBox="0 0 16 16" xml:space="preserve"><g transform="matrix(0.67 0 0 0.67 8 8)"><path style=" stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: #979797; fill-rule: nonzero; opacity: 1;" transform=" translate(-12, -12)" d="M 12 2 C 6.48 2 2 6.48 2 12 C 2 17.52 6.48 22 12 22 C 17.52 22 22 17.52 22 12 C 22 6.48 17.52 2 12 2 z M 11 19.93 C 7.05 19.44 4 16.08 4 12 C 4 11.38 4.08 10.79 4.21 10.21 L 9 15 L 9 16 C 9 17.1 9.9 18 11 18 L 11 19.93 z M 17.9 17.39 C 17.639999999999997 16.580000000000002 16.9 16 15.999999999999998 16 L 14.999999999999998 16 L 14.999999999999998 13 C 14.999999999999998 12.45 14.549999999999999 12 13.999999999999998 12 L 8 12 L 8 10 L 10 10 C 10.55 10 11 9.55 11 9 L 11 7 L 13 7 C 14.1 7 15 6.1 15 5 L 15 4.59 C 17.93 5.779999999999999 20 8.649999999999999 20 12 C 20 14.08 19.2 15.97 17.9 17.39 z" stroke-linecap="round" /></g></svg>'},f=u.system?.zoomIcon||"globe",m=p[f]||f;this.ui.getZoomIcon=()=>m,this.ui.formatNumber=g=>this.ui.suppressNumberLocalization?g.toString():this.$i18n.n(g,"number"),this.ui.escapeHtml=g=>{const b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return g.replace(/[<>"']/g,w=>b[w])},this.ui.isPlainText=g=>typeof g=="string"?!this.containsValidHtml(g)&&!this.representsObject(g):!1}r||(r={});const a=iv(this.$vApp.$pinia);r?.startRequired?(this.startRequired=!0,a.started=!1):(this.startRequired=!1,a.started=!0,this.event.emit(ot.MAP_START)),t&&(r.loadDefaultFixtures!==!1||i?.startingFixtures!==void 0)?this.fixture.addDefaultFixtures(i?.startingFixtures):t||this.fixture.restore(),r.loadDefaultEvents!==!1&&!this._eventsOn&&(this.event.addDefaultEvents(),this._eventsOn=!0)}reload(t,i){const r=iv(this.$vApp.$pinia),s=dc(this.$vApp.$pinia),n=Eo(this.$vApp.$pinia),o=Va(this.$vApp.$pinia),a=ic(this.$vApp.$pinia),l=b6(this.$vApp.$pinia),u=!!t;u?Object.keys(o.items).forEach(f=>{this.fixture.exists(f)&&this.fixture.remove(f)}):this.fixture.flush(),Object.keys(l.grids).forEach(p=>{l.removeGrid(p)}),r.started=!1,this.geo.map.destroyMap(),a.$reset(),i?.loadDefaultEvents===!1&&(this.event.removeDefaultEvents(),this._eventsOn=!1),t===void 0&&(t=JSON.parse(JSON.stringify({startingFixtures:n.startingFixtures,configs:n.registeredConfigs}))),s.clearAll(),this.geo.map.maptip.clear(),this.initialize(u,t,i)}component(t,i){if(i){const r=this.$element.component(t,i);return this.event.emit(ot.COMPONENT,t),r}return this.$element.component(t)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const t=this.$vApp.$root.$refs["app-size"].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=Eo(this.$vApp.$pinia);return JSON.parse(JSON.stringify(t.getActiveConfig(this.language)))}useStore(t){if(!(["appbar","areas-of-interest","details","export","extentguard","geosearch","grid","help","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","wizard"].includes(t)&&!this.fixture.exists(t)))switch(t){case"appbar":return CA(this.$vApp.$pinia);case"areas-of-interest":return Xnt(this.$vApp.$pinia);case"details":return vde(this.$vApp.$pinia);case"export":return Qnt(this.$vApp.$pinia);case"extentguard":return eot(this.$vApp.$pinia);case"geosearch":return pot(this.$vApp.$pinia);case"grid":return b6(this.$vApp.$pinia);case"help":return dot(this.$vApp.$pinia);case"legend":return mot(this.$vApp.$pinia);case"mapnav":return yot(this.$vApp.$pinia);case"metadata":return got(this.$vApp.$pinia);case"northarrow":return vot(this.$vApp.$pinia);case"overviewmap":return bot(this.$vApp.$pinia);case"scrollguard":return wot(this.$vApp.$pinia);case"wizard":return _ot(this.$vApp.$pinia);case"config":return Eo(this.$vApp.$pinia);case"fixture":return Va(this.$vApp.$pinia);case"instance":return iv(this.$vApp.$pinia);case"layer":return ic(this.$vApp.$pinia);case"map-caption":return Fd(this.$vApp.$pinia);case"maptip":return LA(this.$vApp.$pinia);case"notification":return dc(this.$vApp.$pinia);case"panel":return pg(this.$vApp.$pinia);default:console.error(`The store ${t} does not exist.`);return}}setLanguage(t){if(this.$i18n.locale.value===t)return;const i=Eo(this.$vApp.$pinia),r=dc(this.$vApp.$pinia),s=i.registeredLangs;Object.keys(i.registeredConfigs).length===1&&r.clearAll();const n=this.$i18n.locale.value;this.$i18n.locale.value=t;const o=this.getConfig();s[n]!==s[t]&&(this.event.emit(ot.CONFIG_CHANGE,o),this.reload()),this.event.emit(ot.LANG_CHANGE,{oldLang:n,newLang:t})}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){vu.isEnabled&&vu.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}get started(){return iv(this.$vApp.$pinia).started}updateAlert(t){const i=this.$vApp.$el.querySelector(".screen-reader-alert");i.childNodes.length>0&&(i.innerHTML="");const r=document.createElement("span");r.setAttribute("role","alert");const s=document.createTextNode(t);r.appendChild(s),i.insertBefore(r,null)}scrollToInstance(){this.ui.scrollToInstance&&this.$element._container?.scrollIntoView({behavior:"smooth"})}start(){const t=iv(this.$vApp.$pinia);!t.started&&this.startRequired?(this.event.emit(ot.MAP_START),t.started=!0):t.started&&console.warn("start has already been called")}containsValidHtml(t){return/<(\w+)([^>]*)>(.*?)<\/\1>/.test(t)}representsObject(t){return/^(?:\[\s*(?:[\s\S]*?)\s*\]|\{\s*(?:[\s\S]*?)\s*\})$/.test(t)}}function xot(e,t){const i=JYe();i.use(({store:o})=>{const a=DY(o.$state);o.$reset=()=>o.$patch(DY(a))});const r=gQe(),s=hg(cst).use(r).use(nst,{directive:"tippy",component:"tippy"}).use(i);s.directive("focus-container",vst),s.directive("focus-list",dst),s.directive("focus-item",mst),s.directive("truncate",snt),s.component("panel-screen",dnt),s.component("pin",gnt),s.component("close",wnt),s.component("back",xnt),s.component("expand",Ant),s.component("panel-options-menu",jnt),s.component("dropdown-menu",Ij),s.component("minimize",Rnt),s.component("right",Lnt),s.component("left",Dnt),s.component("fullscreen-nav-button",Gnt),s.component("geolocator-nav-button",Bnt),s.component("home-nav-button",znt),s.component("mapnav-button",Wnt),s.component("appbar-button",Knt),s.component("transition",X7),s.component("transition-group",ej),s.config.globalProperties.$iApi=t,s.config.globalProperties.$pinia=i,s.provide("iApi",t);const n=s.mount(e);return{element:s,app:n,i18n:r.global}}class Tot{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new Ov({baseLayers:t.layers.map(i=>{if(i.layerType===ft.TILE)return new W9({url:i.url,opacity:i.opacity});if(i.layerType===ft.MAPIMAGE)return new q9({url:i.url,opacity:i.opacity});if(i.layerType===ft.OSM)return new H9({opacity:i.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${i.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t||""}get description(){return this.config.description}set description(t){this.config.description=t||""}get altText(){return this.config.altText}set altText(t){this.config.altText=t||""}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}get backgroundColour(){return this.config.backgroundColour??"#FFFFFF"}}class Eot extends Kr{esriMap;_basemapStore;created=!1;trackFirstBasemap=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new Wr,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}labelsDefault={visible:void 0};createMap(t,i){this._basemapStore=t.basemaps.map(s=>{const n=new Tot(s);return n.esriBasemap.baseLayers.forEach(o=>{o.watch("loadStatus",()=>{o.loadStatus==="loaded"?this.trackFirstBasemap=!1:o.loadStatus==="failed"&&(this.$iApi.notify.show(ma.ERROR,this.$iApi.$i18n.t("layer.error",{id:n.name})),this.trackFirstBasemap&&this.recoverBasemap(n.tileSchemaId))})}),n}),t.labelsDefault&&(this.labelsDefault.visible=t.labelsDefault.visible);const r={};this.esriMap=Jr(new wae(r)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=i,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,i){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,i)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new Wr,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const i=this._basemapStore.find(r=>r.id===t);if(i)return i;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const i=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=kt(i.esriBasemap)}setBasemap(t){return this.abstractError(),!1}recoverBasemap(t){}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,i,r=!0,s=200,n="ease"){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const o=await this.geomToMapSR(t),a={target:this.$iApi.geo.geom.geomRampToEsri(o)};o.type===Vt.POINT&&(a.scale=i||this.pointZoomScale);const l={animate:r,duration:s,easing:n};return this.viewPromise.then(()=>this.esriView.goTo(a,l))}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?nr.fromESRI(this.esriView.extent):(this.noMapErr(),nr.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),fS.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Ot.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class Mot extends Kr{maptipStore;constructor(t){super(t),this.maptipStore=LA(this.$vApp.$pinia)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const i=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!i){this.clear();return}const r=this.$iApi.geo.layer.getLayer(i.layerId);if(r?.geomType!=Vt.POLYGON&&this.#e&&this.#e.layerId===i.layerId&&this.#e.oid===i.oid&&this.#e.layerIdx===i.layerIdx)return;if(this.clear(),this.#e=i,!r){console.error(`graphic hit test returned non-existent layer id: ${i.layerId}`);return}if(!r.hovertips)return;const s=await r.getIcon(i.oid),n=await r.getGraphic(i.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(ot.MAP_GRAPHICHIT,{layer:r,graphicHit:i,attributes:n.attributes,icon:s,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="line-clamp-3">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.#e=void 0,this.maptipStore.setMaptipPoint(void 0),this.maptipStore.setMaptipContent("")}getInstance(){return this.maptipStore.maptipInstance}getPoint(){return this.maptipStore.maptipPoint}setPoint(t){this.maptipStore.setMaptipPoint(t)}setContent(t){this.maptipStore.setMaptipContent(t)}}class Iot extends Kr{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!t)return;const i=Fd(this.$vApp.$pinia);if(i.coords.disabled=!1,i.scale.disabled=!1,i.scale.isImperialScale=!1,t.mapCoords)if(t.mapCoords.disabled)i.coords.disabled=!0;else{const r=t.mapCoords.formatter;r!==void 0&&this.setPointFormatter(r)}if(t.scaleBar)if(t.scaleBar.disabled)i.scale.disabled=!0;else{const r=t.scaleBar.imperialScale;r!==void 0&&(i.toggleScale(r),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}i.langtoggle={disabled:t?.langToggle?.disabled??!1}}updateAttribution(t){const i={disabled:!1,value:this.$iApi.$i18n.t("caption.attributionDefaultText")},r={disabled:!1,altText:this.$iApi.$i18n.t("caption.attributionLogoAltText"),link:this.$iApi.$i18n.t("caption.attributionLink"),value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"},s={text:{value:"",disabled:!1},logo:{disabled:!1,altText:"",link:"",value:""}};if(t?(t.logo?t.logo.disabled?s.logo.disabled=!0:(s.logo.altText=t.logo.altText||r.altText,s.logo.link=t.logo.link||r.link,s.logo.value=t.logo.value||r.value):(s.logo.altText=r.altText,s.logo.link=r.link,s.logo.value=r.value),t.text?t.text.disabled?s.text.disabled=!0:s.text.value=t.text.value||i.value:s.text.value=i.value,Fd(this.$vApp.$pinia).setAttribution(s)):(s.logo.altText=r.altText,s.logo.link=r.link,s.logo.value=r.value,s.text.value=i.value),!t||t.text?.disabled||!t.text){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let n="";const o=5e3,a=20,l=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(u=>new Promise(h=>{let p=0;const f=o/a,m=setInterval(function(){u.loaded&&!u.loadError?(clearInterval(m),h(u)):p>f&&(clearInterval(m),h(null)),p++},a)})).toArray();Promise.all(l).then(u=>{n=u.filter(p=>p?.copyright).map(p=>p.copyright).join(" | "),s.text.value=n||s.text.value||i.value,Fd(this.$vApp.$pinia).setAttribution(s)})}}updateScale(){const t=Fd(this.$vApp.$pinia),i=t.scale;if(i?.disabled)return;const r=i?.isImperialScale||!1,s=this.scaleHelper().find(n=>n.isImperialScale===r)??{isImperialScale:!1,units:"error",pixels:1,distance:1};t.scale={width:`${s.pixels}px`,label:`${this.$iApi.$i18n.n(s.distance,"number")}${s.units}`,isImperialScale:r}}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,i=this.$iApi.geo.map.getResolution(),r=[],s=i*t,n=1609.34,o=3.28084,a=s>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(r.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),s>1e3){const h=i*t/(u?n:1e3),p=Math.round(h).toString().length,f=Math.pow(10,p-1);r[l].distance=Math.ceil(h/f)*f,r[l].pixels=r[l].distance*(u?n:1e3)/i}else r[l].distance=Math.ceil(u?s*o:s),r[l].pixels=s/i}return r}wrapValue(t,i,r){return((t-i)%(r-i)+(r-i))%(r-i)+i}async formatLatLongDMS(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n="°",o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.floor(Math.abs((r-o)*60)),l=Math.floor((Math.abs(r)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(s))*(s<0?-1:1),h=Math.floor(Math.abs((s-u)*60)),p=Math.floor((Math.abs(s)-Math.abs(u)-h/60)*3600);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(u),"number")}${n} ${this.$iApi.$i18n.n(h,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(p,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDDM(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n="°",o=Math.floor(Math.abs(r))*(r<0?-1:1),a=Math.abs((r-o)*60),l=Math.floor(Math.abs(s))*(s<0?-1:1),u=Math.abs((s-l)*60);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(l),"number")}${n} ${this.$iApi.$i18n.n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDD(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n="°",o=Math.abs(r),a=Math.abs(s);return`${this.$iApi.$i18n.n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} | ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatMercator(t){const i=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$i18n.n(Math.floor(i.x),"number")} m | ${this.$iApi.$i18n.n(Math.floor(i.y),"number")} m`}async formatLambert(t){const i=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$i18n.n(Math.abs(Math.floor(i.x)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(0>i.x?"west":"east"))} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(i.y)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(i.y>0?"north":"south"))}`}async formatUTM(t){const i=await this.$iApi.geo.proj.projectGeometry(4326,t),r=this.wrapValue(i.y,-90,90),s=this.wrapValue(i.x,-180,180),n=Math.ceil((s+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+n),t);return`${this.$iApi.$i18n.n(n,"number",{minimumIntegerDigits:2})} ${this.$iApi.$i18n.t("map.coordinates."+(r>0?"north":"south"))} ${this.$iApi.$i18n.n(Math.floor(o.x),"number")} m${this.$iApi.$i18n.t("map.coordinates.east")} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$i18n.t("map.coordinates.north")}`}async formatBasemap(t){const i=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$i18n.n(i.x,"number")} | ${this.$iApi.$i18n.n(i.y,"number")}`}}class Aot extends Eot{maptip;caption;mapMouseThrottle;layerDefaultTimes={draw:0,load:0,fail:0};constructor(t){super(t),this.maptip=new Mot(t),this.caption=new Iot(t),this.mapMouseThrottle=0}createMap(t,i){this.setMapMouseThrottle(t.mapMouseThrottle??0),this.trackFirstBasemap=!0,super.createMap(t,i),this.layerDefaultTimes.draw=t.layerTimeDefault?.expectedDrawTime??1e4,this.layerDefaultTimes.load=t.layerTimeDefault?.expectedLoadTime??1e4,this.layerDefaultTimes.fail=t.layerTimeDefault?.maxLoadTime||9e4,this.viewPromise.then(()=>{this.$iApi.event.emit(ot.MAP_CREATED)})}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayersOnMap(!1).map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(ot.MAP_DESTROYED)}createMapView(t){const r=Eo(this.$vApp.$pinia).config.map;if(!r)throw new Error("Attempted to create map view without a map config");const s=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(r.initialBasemapId),n=r.tileSchemas.find(l=>l.id===s.tileSchemaId);if(!n)throw new Error(`Could not find tile schema for the given basemap id: ${s.id}`);const o=r.extentSets.find(l=>l.id===n.extentSetId);if(!o)throw new Error(`Could not find extent set with the given id: ${n.extentSetId}`);this._rampExtentSet=fS.fromConfig(o),this._rampSR=this._rampExtentSet.sr.clone();const a=r.lodSets.find(l=>l.id===n.lodSetId);if(!a)throw new Error(`Could not find lod set with the given id: ${n.lodSetId}`);this.esriView=Jr(new BVe({map:this.esriMap,container:this._targetDiv,constraints:{lods:a.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1},background:{color:s.backgroundColour}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",l=>{if(l){const u=this.$iApi.geo.geom.geomEsriToRamp(l,"map_extent_event");this.$iApi.event.emit(ot.MAP_EXTENTCHANGE,u),this.$iApi.event.emit(ot.FILTER_CHANGE,{extent:u,filterKey:Hn.EXTENT})}})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",l=>{this.$iApi.event.emit(ot.MAP_SCALECHANGE,l)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",l=>{this.$iApi.event.emit(ot.MAP_RESIZED,{height:l.height,width:l.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",l=>{this.$iApi.event.emit(ot.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",l=>{this.$iApi.event.emit(ot.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",RA(100,!0,l=>{this.$iApi.event.emit(ot.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",RA(100,l=>{this.$iApi.event.emit(ot.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-leave",handler:this.esriView.on("pointer-leave",l=>{setTimeout(()=>{this.$iApi.event.emit(ot.MAP_MOUSELEAVE,l.native)},Math.max(this.mapMouseThrottle,100)+1)})}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",l=>{this.$iApi.event.emit(ot.MAP_MOUSEDOWN,l.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",l=>{this.$iApi.event.emit(ot.MAP_KEYDOWN,l.native),l.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",l=>{this.$iApi.event.emit(ot.MAP_KEYUP,l.native),l.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",l=>{this.$iApi.event.emit(ot.MAP_FOCUS,l.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",l=>{this.$iApi.event.emit(ot.MAP_BLUR,l.native)})}),this.esriView.container.addEventListener("touchmove",l=>{l.preventDefault()}),this.esriView.watch("fatalError",()=>{const l=new IntersectionObserver(u=>{u.forEach(h=>{h.isIntersecting&&(this.esriView?.tryFatalErrorRecovery(),l.disconnect())})});l.observe(this.esriView.container)}),this.esriView.when(()=>{if(this._viewPromise.resolveMe(),this.created=!0,this.applyBasemap(s),n.recoveryBasemap?.basemapId){const l=n.recoveryBasemap.timeout??8e3;l>0&&setTimeout(()=>{this.trackFirstBasemap&&this.recoverBasemap(n.id)},l)}})}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const i=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=kt(i.esriBasemap);const r=Eo(this.$vApp.$pinia);r.activeBasemapConfig=i.config}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const i=Eo(this.$vApp.$pinia),r=this.findBasemap(t),n=i.activeBasemapConfig.tileSchemaId!==r.tileSchemaId;if(n){const o=this.getExtent().center(),a=this.getScale();this._viewPromise=new Wr,this.created=!1,this.$iApi.event.emit(ot.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(r),this.viewPromise.then(()=>{this.$iApi.event.emit(ot.MAP_REFRESH_END),this.$iApi.event.emit(ot.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n});const l=this.findClosestScale(a);this.$iApi.geo.proj.projectGeometry(this._rampSR,o).then(u=>this.zoomMapTo(u,l,!1))})}else this.applyBasemap(r),this.esriView.background=new Tce({color:new rp(r.backgroundColour).toESRI()}),this.$iApi.event.emit(ot.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n});return n}recoverBasemap(t){this.esriMap||this.noMapErr(),this.trackFirstBasemap=!1;const r=Eo(this.$vApp.$pinia).config.map;if(r){const s=r.tileSchemas.find(n=>n.id===t);if(s?.recoveryBasemap?.basemapId){const n=this.findBasemap(s.recoveryBasemap.basemapId);this.applyBasemap(n)}}}addLayer(t,i=void 0){return new Promise((r,s)=>{if(this.esriMap||(this.noMapErr(),s()),t.initiationState!==rr.INITIATING&&t.initiationState!==rr.INITIATED&&t.layerState!==Ar.ERROR&&t.initiate(),t.mapLayer&&i===void 0){const u=this.$iApi.geo.layer.layerOrderIds();if(t.isCosmetic)i=u.length;else{const h=this.$iApi.geo.layer.allLayers();let p=!0;for(let f=u.length-1;f>=0&&p;f--){const m=h.find(g=>g.id===u[f]);m&&!m.isCosmetic&&(i=f+1,p=!1)}p&&(i=0)}}ic(this.$vApp.$pinia).addLayer(t,i),this.$iApi.event.emit(ot.LAYER_REGISTERED,t);const o=Date.now();let a=0;const l=setInterval(()=>{a+=250,a>=t.expectedTime.fail||t.layerState===Ar.ERROR?(clearInterval(l),t.lastCancel<o&&console.error(`Failed to add layer: ${t.id}.`),s()):t.initiationState===rr.INITIATED&&(t.esriLayer||!t.mapLayer)&&(clearInterval(l),t.mapLayer?this.insertToEsriMap(t):t.onLoad(),r())},250)})}insertToEsriMap(t){let i=0;const r=this.$iApi.geo.layer.getLayerPosition(t.id)??-1;if(r>0){const s=this.$iApi.geo.layer.layerOrderIds(),n=this.$iApi.geo.layer.allLayers();for(let o=r-1;o>-1;o--){const a=s[o],l=n.find(u=>u.id===a);if(l&&l.esriLayer){const u=this.esriMap.layers.indexOf(l.esriLayer);if(u>-1){i=u+1;break}}else l||console.error("ESRI Layer insert encountered bad state. Layer likely inserted at bottom of map.")}}r>-1&&this.esriMap?.add(t.esriLayer,i)}reorder(t,i,r=!1){if(i<0){console.error("Negative index passed to map reorder");return}if(!this.esriMap){this.noMapErr();return}if(t.isSublayer&&(t=t.parentLayer),!t.mapLayer){console.error("Attempted to reorder a data layer");return}const s=this.$iApi.geo.layer.allLayers();let n=this.$iApi.geo.layer.layerOrderIds();if(r){if(t.isCosmetic)return;if(i>0){const l=n.filter(u=>{const h=s.find(p=>p.id===u);return h?!h.isCosmetic:(console.error("Layer reorder had critical error"),!1)});i>=l.length&&(console.error("non-cosmetic reorder index was too high"),i=l.length-1),i=n.indexOf(l[i])}}else i>=n.length&&(console.error("reorder index was too high"),i=n.length-1);const o=n.indexOf(t.id);if(o===i)return;if(ic(this.$vApp.$pinia).reorderLayer(t,i),t.esriLayer&&this.esriMap.layers.indexOf(t.esriLayer)>-1){let l=0;if(i>0){n=this.$iApi.geo.layer.layerOrderIds();for(let u=i-1;u>-1;u--){const h=n[u],p=s.find(f=>f.id===h);if(p&&p.esriLayer){const f=this.esriMap.layers.indexOf(p.esriLayer);if(f>-1){const m=i<o?1:0;l=f+m;break}}else p||console.error("Layer reorder had critical error")}}this.esriMap.reorder(t.esriLayer,l)}this.$iApi.event.emit(ot.MAP_REORDER,{layer:t,newIndex:i})}removeSublayer(t){let i,r;if(typeof t=="string")i=t,r=this.$iApi.geo.layer.getLayer(i);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);i=t.uid,r=t}if(!r)throw new Error("Sublayer could not be found for removal.");r.visibility=!1,r.isRemoved=!0,this.$iApi.event.emit(ot.LAYER_REMOVE,t),r.parentLayer?.sublayers.every(s=>s.isRemoved)&&this.removeLayer(r.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let i;if(t instanceof qj?i=t:i=this.$iApi.geo.layer.getLayer(t),!i)throw new Error("Layer could not be found for removal.");if(i.isSublayer){this.removeSublayer(i);return}i.supportsSublayers&&i.sublayers.forEach(s=>{s.isRemoved||this.removeSublayer(s)});const r=ic(this.$vApp.$pinia);r.removeLayer(i),r.removeLayerConfig(i.id),i.removeEsriLayer(),i.initiationState===rr.INITIATED&&i.terminate(),i.isRemoved=!0,this.$iApi.event.emit(ot.LAYER_REMOVE,i)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const i=this.handlers.findIndex(r=>r.type==="pointer-move");if(i!==-1){const r=this.handlers[i];this.handlers.splice(i,1),r.handler.remove()}return i!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return wy(this.mapMouseThrottle,t=>{this.$iApi.event.emit(ot.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const i=t.isOffScale(this.getScale());if(!i.offScale)return;const r=this.esriView.constraints.lods;if(!r)return this.zoomMapTo(this.getExtent().center(),(i.zoomIn,t.minScale));const s=i.zoomIn?r:[...r].reverse(),n=s.find(o=>i.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||s[s.length-1];return this.zoomToLevel(n.level)}findClosestScale(t){const i=this.esriView?.constraints.lods;if(!i)return t;const r=i.map(n=>Math.abs(n.scale-t)),s=r.indexOf(Math.min(...r));return i[s].scale}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?Xn.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new Xn("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const i=this.esriView.toScreen(t.toESRI());return{screenX:i.x,screenY:i.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){const i=this.$iApi.geo.layer.allLayersOnMap(!1).filter(u=>u.canIdentify());let r;if(t instanceof Xn){const u=this.mapPointToScreenPoint(t);r={mapPoint:t,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else r=t;if(i===void 0)return{click:r,results:[]};let s=Promise.resolve([]);i.some(u=>u.identifyMode===rs.HYBRID||u.identifyMode===rs.SYMBOLIC)&&(s=this.esriView.hitTest({x:r.screenX,y:r.screenY}).then(u=>u.results.map(h=>({layerId:h.layer.id,layerIdx:0,oid:h.graphic.getObjectId()}))));const n={geometry:r.mapPoint,hitTest:s},o=i.filter(u=>u.supportsIdentify).map(u=>(n.tolerance=r.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(n))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:r};return this.$iApi.event.emit(ot.MAP_IDENTIFY,l),l}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}const i=this.$iApi.geo.layer.allLayersOnMap(!1).filter(l=>l.supportsFeatures||l.layerType===ft.GRAPHIC);if(i.length===0)return;const r=await this.esriView.hitTest({x:t.screenX,y:t.screenY});if(r.results.length===0)return;const s=r.results;let n,o;const a=new Set;if(s.some(l=>{if(a.has(l.layer.id))return!1;const u=i.find(h=>h.id===l.layer.id);return u?(!u.isCosmetic&&u.layerType!==ft.GRAPHIC&&(n=u,o=l.graphic),!0):(a.add(l.layer.id),!1)}),n&&o)return{oid:o.getObjectId(),layerId:n.id,layerIdx:n.layerIdx}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(t){const i=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(s=>i.includes(s))||this.keyPan()):i.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"?this.runIdentify(this.getExtent().center()):t.key==="Tab"&&this._activeKeys.push(t.key)}mapKeyUp(t){const i=["=","-"];this._activeKeys.includes(t.key)&&!i.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(r=>i.includes(r))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),i=this.mapPointToScreenPoint(t),r=this.screenPointToMapPoint({screenX:i.screenX+5,screenY:i.screenY+5}),s=Math.abs(r.x-t.x),n=Math.abs(r.y-t.y);let o=0,a=0,l=1;for(let h=0;h<this._activeKeys.length;++h)switch(this._activeKeys[h]){case"ArrowLeft":o-=s;break;case"ArrowRight":o+=s;break;case"ArrowUp":a+=n;break;case"ArrowDown":a-=n;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const $ot={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},Cot={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},Rot={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},Oot={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}},Pot={circlePoint:$ot,solidLine:Cot,outlinedPoly:Rot,boundingBoxPoly:Oot};var jI={exports:{}},Lot=jI.exports,NK;function Not(){return NK||(NK=1,function(e,t){(function(i,r){if(e.exports=r(Nce()),typeof i.navigator=="object"){if(!i.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");i.Terraformer.ArcGIS=r(i.Terraformer)}})(Lot,function(i){var r={};function s(w){var S=0,T=0,x=[],_,M,I,A;I=w.match(/((\+|\-)[^\+\-]+)/g),A=parseInt(I[0],32);for(var C=1;C<I.length;C+=2)_=parseInt(I[C],32)+S,S=_,M=parseInt(I[C+1],32)+T,T=M,x.push([_/A,M/A]);return x}function n(w){return o(w[0],w[w.length-1])||w.push(w[0]),w}function o(w,S){for(var T=0;T<w.length;T++)if(w[T]!==S[T])return!1;return!0}function a(w){var S={};for(var T in w)w.hasOwnProperty(T)&&(S[T]=w[T]);return S}function l(w){var S=0,T=0,x=w.length,_=w[T],M;for(T;T<x-1;T++)M=w[T+1],S+=(M[0]-_[0])*(M[1]+_[1]),_=M;return S>=0}function u(w){var S=[],T=w.slice(0),x=n(T.shift().slice(0));if(x.length>=4){l(x)||x.reverse(),S.push(x);for(var _=0;_<T.length;_++){var M=n(T[_].slice(0));M.length>=4&&(l(M)&&M.reverse(),S.push(M))}}return S}function h(w){for(var S=[],T=0;T<w.length;T++)for(var x=u(w[T]),_=x.length-1;_>=0;_--){var M=x[_].slice(0);S.push(M)}return S}function p(w,S){var T=i.Tools.arraysIntersectArrays(w,S),x=i.Tools.coordinatesContainPoint(w,S[0]);return!!(!T&&x)}function f(w){for(var S=[],T=[],x,_,M,I=0;I<w.length;I++){var A=n(w[I].slice(0));if(!(A.length<4))if(l(A)){var C=[A.slice().reverse()];S.push(C)}else T.push(A.slice().reverse())}for(var R=[];T.length;){M=T.pop();var O=!1;for(x=S.length-1;x>=0;x--)if(_=S[x][0],p(_,M)){S[x].push(M),O=!0;break}O||R.push(M)}for(;R.length;){M=R.pop();var k=!1;for(x=S.length-1;x>=0;x--)if(_=S[x][0],i.Tools.arraysIntersectArrays(_,M)){S[x].push(M),k=!0;break}k||S.push([M.reverse()])}return S.length===1?{type:"Polygon",coordinates:S[0]}:{type:"MultiPolygon",coordinates:S}}function m(w,S){var T={};return S=S||{},S.idAttribute=S.idAttribute||void 0,w.spatialReference&&(w.spatialReference.wkid===3857||w.spatialReference.wkid===102100)&&(T.crs=i.MercatorCRS),typeof w.x=="number"&&typeof w.y=="number"&&(T.type="Point",T.coordinates=[w.x,w.y],(w.z||w.m)&&T.coordinates.push(w.z),w.m&&T.coordinates.push(w.m)),w.points&&(T.type="MultiPoint",T.coordinates=w.points.slice(0)),w.paths&&(w.paths.length===1?(T.type="LineString",T.coordinates=w.paths[0].slice(0)):(T.type="MultiLineString",T.coordinates=w.paths.slice(0))),w.rings&&(T=f(w.rings.slice(0))),typeof w.xmin=="number"&&typeof w.ymin=="number"&&typeof w.xmax=="number"&&typeof w.ymax=="number"&&(T.type="Polygon",T.coordinates=[[[w.xmax,w.ymax],[w.xmin,w.ymax],[w.xmin,w.ymin],[w.xmax,w.ymin],[w.xmax,w.ymax]]]),(w.compressedGeometry||w.geometry||w.attributes)&&(T.type="Feature",w.compressedGeometry&&(w.geometry={paths:[s(w.compressedGeometry)]}),T.geometry=w.geometry?m(w.geometry):null,T.properties=w.attributes?a(w.attributes):null,w.attributes&&(T.id=w.attributes[S.idAttribute]||w.attributes.OBJECTID||w.attributes.FID)),new i.Primitive(T)}function g(w,S){var T;S=S||{};var x=S.idAttribute||"OBJECTID";S.sr?T={wkid:S.sr}:w&&w.crs&&w.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?T=null:T={wkid:4326};var _={},M;switch(w.type){case"Point":_.x=w.coordinates[0],_.y=w.coordinates[1],w.coordinates[2]&&(_.z=w.coordinates[2]),w.coordinates[3]&&(_.m=w.coordinates[3]),_.spatialReference=T;break;case"MultiPoint":_.points=w.coordinates.slice(0),_.spatialReference=T;break;case"LineString":_.paths=[w.coordinates.slice(0)],_.spatialReference=T;break;case"MultiLineString":_.paths=w.coordinates.slice(0),_.spatialReference=T;break;case"Polygon":_.rings=u(w.coordinates.slice(0)),_.spatialReference=T;break;case"MultiPolygon":_.rings=h(w.coordinates.slice(0)),_.spatialReference=T;break;case"Feature":w.geometry&&(_.geometry=g(w.geometry,S)),_.attributes=w.properties?a(w.properties):{},w.id&&(_.attributes[x]=w.id);break;case"FeatureCollection":for(_=[],M=0;M<w.features.length;M++)_.push(g(w.features[M],S));break;case"GeometryCollection":for(_=[],M=0;M<w.geometries.length;M++)_.push(g(w.geometries[M],S));break}return _}function b(w){return new i.LineString(s(w))}return r.parse=m,r.convert=g,r.toGeoJSON=m,r.fromGeoJSON=g,r.parseCompressedGeometry=b,r})}(jI)),jI.exports}var kot=Not();const Dot=$x(kot);function rme(e){return new Function("d","return {"+e.map(function(t,i){return JSON.stringify(t)+": d["+i+"]"}).join(",")+"}")}function Fot(e,t){var i=rme(e);return function(r,s){return t(i(r),s,e)}}function jot(e){var t=Object.create(null),i=[];return e.forEach(function(r){for(var s in r)s in t||i.push(t[s]=s)}),i}function zj(e){var t=new RegExp('["'+e+`
]`),i=e.charCodeAt(0);function r(u,h){var p,f,m=s(u,function(g,b){if(p)return p(g,b-1);f=g,p=h?Fot(g,h):rme(g)});return m.columns=f,m}function s(u,h){var p={},f={},m=[],g=u.length,b=0,w=0,S,T;function x(){if(b>=g)return f;if(T)return T=!1,p;var M=b,I;if(u.charCodeAt(M)===34){for(var A=M;A++<g;)if(u.charCodeAt(A)===34){if(u.charCodeAt(A+1)!==34)break;++A}return b=A+2,I=u.charCodeAt(A+1),I===13?(T=!0,u.charCodeAt(A+2)===10&&++b):I===10&&(T=!0),u.slice(M+1,A).replace(/""/g,'"')}for(;b<g;){var C=1;if(I=u.charCodeAt(b++),I===10)T=!0;else if(I===13)T=!0,u.charCodeAt(b)===10&&(++b,++C);else if(I!==i)continue;return u.slice(M,b-C)}return u.slice(M)}for(;(S=x())!==f;){for(var _=[];S!==p&&S!==f;)_.push(S),S=x();h&&(_=h(_,w++))==null||m.push(_)}return m}function n(u,h){return h==null&&(h=jot(u)),[h.map(l).join(e)].concat(u.map(function(p){return h.map(function(f){return l(p[f])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:r,parseRows:s,format:n,formatRows:o}}var m5=zj(","),Uot=m5.parse,Vot=m5.parseRows,Got=m5.format,Bot=m5.formatRows,y5=zj("	"),zot=y5.parse,qot=y5.parseRows,Hot=y5.format,Wot=y5.formatRows;const Jot=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:Got,csvFormatRows:Bot,csvParse:Uot,csvParseRows:Vot,dsvFormat:zj,tsvFormat:Hot,tsvFormatRows:Wot,tsvParse:zot,tsvParseRows:qot},Symbol.toStringTag,{value:"Module"})),Zot=qVe(Jot);var nm={exports:{}},kK;function Yot(){if(kK)return nm.exports;kK=1,nm.exports=e,nm.exports.pair=n,nm.exports.format=i,nm.exports.formatPair=t,nm.exports.coordToDMS=r;function e(a,l){var u=s(a,l);return u===null?null:u.val}function t(a){return i(a.lat,"lat")+" "+i(a.lon,"lon")}function i(a,l){var u=r(a,l);return u.whole+"° "+(u.minutes?u.minutes+"' ":"")+(u.seconds?u.seconds+'" ':"")+u.dir}function r(a,l){var u={lat:["N","S"],lon:["E","W"]}[l]||"",h=u[a>=0?0:1],p=Math.abs(a),f=Math.floor(p),m=p-f,g=m*60,b=Math.floor(g),w=Math.floor((g-b)*60);return{whole:f,minutes:b,seconds:w,dir:h}}function s(a,l){if(l||(l="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var u=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,h=a.match(u);if(!h)return null;var p=h[0],f;if(h[1]&&h[5]?(f=h[1],p=p.slice(0,-1)):f=h[1]||h[5],f&&l.indexOf(f)===-1)return null;var m=h[2]?parseFloat(h[2]):0,g=h[3]?parseFloat(h[3])/60:0,b=h[4]?parseFloat(h[4])/3600:0,w=m<0?-1:1;return(f==="S"||f==="W")&&(w*=-1),{val:(Math.abs(m)+g+b)*w,dim:f,matched:p,remain:a.slice(p.length)}}function n(a,l){a=a.trim();var u=s(a,l);if(!u)return null;a=u.remain.trim();var h=s(a,l);return!h||h.remain?null:u.dim?o(u.val,h.val,u.dim):[u.val,h.val]}function o(a,l,u){if(u==="N"||u==="S")return[a,l];if(u==="W"||u==="E")return[l,a]}return nm.exports}var hO,DK;function Kot(){if(DK)return hO;DK=1;var e=Zot,t=Yot(),i=/(Lat)(itude)?/gi,r=/(L)(on|ng)(gitude)?/i;function s(w,S){var T,x,_;for(var M in w)x=M.match(S),x&&(!T||x[0].length/M.length>_)&&(_=x[0].length/M.length,T=M);return T}function n(w){return s(w,i)}function o(w){return s(w,r)}function a(w){return!!w.match(i)}function l(w){return!!w.match(r)}function u(w){return typeof w=="object"?Object.keys(w).length:0}function h(w){var S=[",",";","	","|"],T=[];return S.forEach(function(x){var _=e.dsvFormat(x).parse(w);if(_.length>=1){for(var M=u(_[0]),I=0;I<_.length;I++)if(u(_[I])!==M)return;T.push({delimiter:x,arity:Object.keys(_[0]).length})}}),T.length?T.sort(function(x,_){return _.arity-x.arity})[0].delimiter:null}function p(w){return delete w.columns,w}function f(w){var S=h(w);return S?p(e.dsvFormat(S).parse(w)):null}function m(w,S,T){T||(T=S,S={}),S.delimiter=S.delimiter||",";var x=S.latfield||"",_=S.lonfield||"",M=S.crs||"",I=[],A={type:"FeatureCollection",features:I};if(M!==""&&(A.crs={type:"name",properties:{name:M}}),S.delimiter==="auto"&&typeof w=="string"&&(S.delimiter=h(w),!S.delimiter)){T({type:"Error",message:"Could not autodetect delimiter"});return}var C=S.numericFields?S.numericFields.split(","):null,R=typeof w=="string"?e.dsvFormat(S.delimiter).parse(w,function(P){if(C)for(var G in P)C.includes(G)&&(P[G]=+P[G]);return P}):w;if(!R.length){T(null,A);return}var O=[],k;x||(x=n(R[0])),_||(_=o(R[0]));var L=!x||!_;if(L){for(k=0;k<R.length;k++)I.push({type:"Feature",properties:R[k],geometry:null});T(O.length?O:null,A);return}for(k=0;k<R.length;k++)if(R[k][_]!==void 0&&R[k][x]!==void 0){var V=R[k][_],J=R[k][x],y,E,$;$=t(V,"EW"),$&&(V=$),$=t(J,"NS"),$&&(J=$),y=parseFloat(V),E=parseFloat(J),isNaN(y)||isNaN(E)?O.push({message:"A row contained an invalid value for latitude or longitude",row:R[k],index:k}):(S.includeLatLon||(delete R[k][_],delete R[k][x]),I.push({type:"Feature",properties:R[k],geometry:{type:"Point",coordinates:[parseFloat(y),parseFloat(E)]}}))}T(O.length?O:null,A)}function g(w){for(var S=w.features,T={type:"Feature",geometry:{type:"LineString",coordinates:[]}},x=0;x<S.length;x++)T.geometry.coordinates.push(S[x].geometry.coordinates);return T.properties=S.reduce(function(_,M){for(var I in M.properties)_[I]||(_[I]=[]),_[I].push(M.properties[I]);return _},{}),{type:"FeatureCollection",features:[T]}}function b(w){for(var S=w.features,T={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},x=0;x<S.length;x++)T.geometry.coordinates[0].push(S[x].geometry.coordinates);return T.properties=S.reduce(function(_,M){for(var I in M.properties)_[I]||(_[I]=[]),_[I].push(M.properties[I]);return _},{}),{type:"FeatureCollection",features:[T]}}return hO={isLon:l,isLat:a,guessLatHeader:n,guessLonHeader:o,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:f,csv2geojson:m,toLine:g,toPolygon:b},hO}var pO=Kot();const Xot={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function Qot(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,i=!0;for(let r=0;r<e.features.length;r++){const s=e.features[r];Object.assign(s.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in s&&typeof s.id<"u"&&(s.properties.ID_FILE=s.id,t=!1),"OBJECTID"in s.properties&&(s.properties.OBJECTID_FILE=s.properties.OBJECTID,delete s.properties.OBJECTID,i=!1),s.id=r+1}if(t)for(let r=0;r<e.features.length;r++)delete e.features[r].properties.ID_FILE;if(i)for(let r=0;r<e.features.length;r++)delete e.features[r].properties.OBJECTID_FILE}function eat(e,t){const i=r=>r.indexOf(" ")>-1;t.fields?.forEach(r=>{if(r.name&&i(r.name)){const s=r.name;let n,o="_",a;do n=s.replace(/ /g,o),a=t.fields?.find(l=>l.name===n),a&&(o+="_");while(a);r.alias=s,r.name=n;for(let l=0;l<e.features.length;l++){const u=e.features[l];u.properties[n]=u.properties[s],delete u.properties[s]}}})}function tat(e,t){const i=e.features[t].geometry.geometries;if(i.length===1)e.features[t].geometry={type:i[0].type,coordinates:i[0].coordinates};else{const r=i.map(s=>s.coordinates);e.features[t].geometry={type:`Multi${i[0].type}`,coordinates:r}}}function iat(e){return e==="MultiLineString"?"LineString":e==="MultiPolygon"?"Polygon":e}class rat extends Kr{async fetchFileData(t,i){const r=await d5.get(t,{responseType:"arrayBuffer"});switch(i){case ft.GEOJSON:case ft.DATAJSON:return JSON.parse(this.arbToStr(r.data));case ft.SHAPEFILE:case ft.GEOJSONZIPPED:case ft.FLATGEOBUF:case ft.FLATGEOBUFZIPPED:return r.data;case ft.CSV:case ft.DATACSV:return this.arbToStr(r.data);default:console.error(`Unsupported file type passed to fetchFileData- '${i}'`)}}extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let i="";for(let o=0;o<t.features.length;o++){const a=t.features[o];if(a.geometry.type==="GeometryCollection"){const h=a.geometry.geometries;if(h===void 0||h.length===0)throw new Error("GeoJSON file has geometry collection with missing/incomplete geometries");const p=h[0].type;for(let f=0;f<h.length;f++)if(h[f].type!==p)throw new Error("GeoJSON file has geometry collection containing multiple geometry types");tat(t,o)}const u=iat(a.geometry.type);if(i==="")i=u;else if(i!==u)throw new Error("GeoJSON file contains multiple geometry types")}const r=Object.keys(t.features[0].properties).map(o=>({name:o,type:"string"}));let s=0;const n=Object.keys(t.features[0].properties);for(;s<t.features.length;){const o=t.features[s];if(o.properties&&Object.keys(o.properties).filter(a=>n.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=r.findIndex(h=>h.name===a);r[u]={name:a,type:this.inferType(l)},n.splice(n.indexOf(a),1)}}),n.length===0)break;s++}return r}extractCsvFields(t,i=","){return pO.dsv.dsvFormat(i).parseRows(t)[0].map(s=>({name:s,type:$h.STRING}))}filterCsvLatLonFields(t,i=","){const r=pO.dsv.dsvFormat(i).parseRows(t),s=r[0],n={lat:JSON.parse(JSON.stringify(s)),lon:JSON.parse(JSON.stringify(s))};for(let o=0;o<s.length;o++)for(let a=1;a<r.length;a++){const l=Number(r[a][o]),u=n.lat.indexOf(s[o]),h=n.lon.indexOf(s[o]);if((isNaN(l)||l<-90||l>90)&&u!==-1&&n.lat.splice(u,1),(isNaN(l)||l<-180||l>180)&&h!==-1&&n.lon.splice(h,1),u===-1&&h===-1)break}return n}async geoJsonToEsriJson(t,i){let r,s="",n;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:$h.OID}]};Qot(t);const a=t.features[0].geometry.type,l=Xot[a],u=JSON.parse(JSON.stringify(Pot[l]));if(i){if(i.sourceProjection&&(s=this.$iApi.geo.proj.normalizeProj(i.sourceProjection)),i.targetSR)r=i.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");i.layerId?n=i.layerId:n=this.$iApi.geo.shared.generateUUID(),i.colour&&(u.renderer.symbol.color=new rp(i.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");s||(s=Ot.parseGeoJsonCrs(t.crs)),o.renderer=_g.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(i.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(t).filter(b=>i.fieldMetadata?.fieldInfo?.find(w=>w.name===b.name)):this.extractGeoJsonFields(t)),i.fieldMetadata?.enforceOrder&&i.fieldMetadata?.fieldInfo&&i.fieldMetadata?.fieldInfo.length>0&&(o.fields=this.$iApi.geo.attributes.orderFields(o.fields,i.fieldMetadata?.fieldInfo)),eat(t,o);const h=this.$iApi.geo.proj.normalizeProj(r);if(i){if(i.latField){const b=o.fields.find(w=>w.name===i.latField||w.alias===i.latField);b&&(b.type=$h.DOUBLE)}if(i.lonField){const b=o.fields.find(w=>w.name===i.lonField||w.alias===i.lonField);b&&(b.type=$h.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([s,r]);const p=Ot.parseSR(r).toESRI();await this.$iApi.geo.proj.projectGeoJson(t,s,h);const f=Dot.convert(t,{sr:8888});o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a);const m=o.fields.map(b=>b.name);for(let b=0;b<f.length;b++){const w=f[b];w.geometry.spatialReference=p,w.geometry.type=o.geometryType,Object.keys(w.attributes).forEach(S=>{m.includes(S)?(Array.isArray(w.attributes[S])||typeof w.attributes[S]=="object")&&w.attributes[S]!=null&&(w.attributes[S]=JSON.stringify(w.attributes[S])):delete w.attributes[S]})}return(i.fieldMetadata?.fieldInfo&&i.fieldMetadata?.fieldInfo.length>0?i.fieldMetadata.fieldInfo.filter(b=>b.trim&&m.includes(b.name)).map(b=>b.name):[]).forEach(b=>{for(let w=0;w<f.length;w++){const S=f[w].attributes;typeof S[b]=="string"&&(S[b]=S[b].trim())}}),o.source=f,o.spatialReference=p,o.id=n,o}async csvToGeoJson(t,i){const r={latfield:"Lat",lonfield:"Long",delimiter:","};return i&&(i.latfield&&(r.latfield=i.latfield),i.lonfield&&(r.lonfield=i.lonfield),i.delimiter&&(r.delimiter=i.delimiter)),new Promise((s,n)=>{pO.csv2geojson(t,r,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),n(o)):(a.features.map(l=>{l.properties[r.lonfield]=l.geometry.coordinates[0],l.properties[r.latfield]=l.geometry.coordinates[1]}),s(a))})})}async shapefileToGeoJson(t){return(await ce(()=>import("./shp.min-DPqiq-kn.js").then(r=>r.s),__vite__mapDeps([245,246]),import.meta.url)).default(t)}fgbToGeoJson(t,i){return ce(async()=>{const{geojson:s}=await import("./flatgeobuf-Xmj1HQyn.js");return{geojson:s}},[],import.meta.url).then(({geojson:s})=>new Promise(n=>{let o=!1,a=null;const l=s.deserialize(new Uint8Array(t),void 0,p=>{a=p.crs,o=!0});let u=0;const h=setInterval(()=>{if(l&&o){clearInterval(h);let p;a&&(a.code&&a.code!==4326&&a.org==="EPSG"?p=new Ot(a.code):a.wkt?p=new Ot(a.wkt):console.error("Encountered FlatGeobuf with non-EPSG org: ",a)),p&&(l.crs=p.toGeoJSON()),n(l)}else u+=60,u>i&&(clearInterval(h),n({}))},60)}))}inferType(t){return typeof t=="number"?$h.DOUBLE:$h.STRING}rawDataJsonParser(t,i=!1){let r;return typeof t=="string"?r=JSON.parse(t):i?r=structuredClone(t):r=t,r}async unzipSingleFile(t){const i=await ce(()=>import("./jszip.min-BCMfXGdl.js").then(o=>o.j),__vite__mapDeps([247,246]),import.meta.url),s=await new i.default().loadAsync(t),n=Object.keys(s.files)[0];if(n&&s.file(n))return await s.file(n).async("arraybuffer");throw new Error("Could not find file in zipfile data.")}async binaryInitHelper(t){if(t.rawData&&t.rawData instanceof ArrayBuffer)return t.rawData;if(t.url)return this.$iApi.geo.layer.files.fetchFileData(t.url,t.layerType);throw new Error(`${t.layerType} config contains no url or invalid/missing raw data`)}arbToStr(t){return new TextDecoder("utf-8").decode(new Uint8Array(t))}}const sat=JSON.parse("[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700]");function fg(e,t){return e.then(function(i){return[null,i]}).catch(function(i){return[i,void 0]})}class nat extends Kr{async loadWfsData(t,i=-1,r=0,s=1e3,n={type:"FeatureCollection",features:[]},o=!1){let a={offset:r.toString(),limit:s.toString()};i===-1&&(a={resulttype:"hits"});const u=new uA(t).updateQuery(a),[h,p]=await fg(d5.get(u));if(!p)return console.error(`WFS data failed to load for ${t}`,h),Promise.reject(h);const f=p.data;if(i===-1)return i=p.data.numberMatched,this.loadWfsData(t,i,r,s,n,o);if(n.features=n.features.concat(f.features),f.features.length<i-r){const m=Math.min(s,i-r-f.features.length);return this.loadWfsData(u,i,f.features.length+r,m,n,o)}else return o&&n.features.length>0&&n.features[0].geometry.type===Mr.POINT&&n.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),n}reversedAxisWKIDs(){return sat}parseCapabilities(t){const i=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new uA(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Ne(o,{responseType:"xml"}).then(a=>a.data)},r=new Promise(o=>{i().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(i())})}),s=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,h=l.Title;let p=l.Style;const f=[],m={};return p&&(Array.isArray(p)||(p=[p]),p.forEach(g=>{const b=g.Name;if(f.push(b),g.LegendURL){const S=g.LegendURL.OnlineResource["@_xlink:href"];m[b]=S.replaceAll("&amp;","&")}})),{name:u?.toString()??null,title:h,queryable:l["@_queryable"]==="1",layers:s(l),allStyles:f,styleToURL:m,currentStyle:f[0]}})):[]},n=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return ce(async()=>{const{XMLParser:o}=await import("./fxp-rjvO85py.js").then(a=>a.f);return{XMLParser:o}},[],import.meta.url).then(({XMLParser:o})=>r.then(a=>{if(!a)return[];const l=new XMLSerializer().serializeToString(a),u={ignoreAttributes:!1},h=new o(u).parse(l);if("ServiceExceptionReport"in h)return console.error(h.ServiceExceptionReport.ServiceException),[];const p=h.WMS_Capabilities.Capability;return{layers:s(p),queryTypes:n(p.Request.GetFeatureInfo)}}))}}class FS{static makeRawItem(t,i){const r=Promise.resolve();return Js({format:t,data:i,started:!0,loaded:!0,loading:r,load(){return r}})}static makeOidItem(t,i){const r=new Wr,s={format:Ev.ESRI,data:void 0,started:!1,loaded:!1,loading:r.getPromise(),async load(){if(!this.started){this.started=!0;const n=await i.getGraphic(t,{getAttribs:!0});this.data=n.attributes,this.loaded=!0,r.resolveMe()}return r.getPromise()}};return Js(s)}}class oat extends Kr{files;ogc;constructor(t){super(t),this.files=new rat(t),this.ogc=new nat(t)}createLayer(t){let i;switch(t.layerType){case ft.FEATURE:i=mat;break;case ft.MAPIMAGE:i=yat;break;case ft.GRAPHIC:i=lat;break;case ft.TILE:i=wat;break;case ft.WFS:i=Sat;break;case ft.DATATABLE:i=Tat;break;case ft.WMS:i=_at;break;case ft.GEOJSON:i=uat;break;case ft.GEOJSONZIPPED:i=pat;break;case ft.FLATGEOBUFZIPPED:i=fat;break;case ft.CSV:i=hat;break;case ft.DATAJSON:i=xat;break;case ft.IMAGERY:i=bat;break;case ft.SHAPEFILE:i=cat;break;case ft.FLATGEOBUF:i=dat;break;case ft.OSM:i=vat;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new i(t,this.$iApi)}getLayer(t){return ic(this.$vApp.$pinia).getLayerByAny(t)}getSublayer(t,i){const r=ic(this.$vApp.$pinia).getLayerById(t);if(r&&r.supportsSublayers&&i<r.sublayers.length)return r.sublayers[i]}getLayerPosition(t){const i=this.getLayer(t);if(i&&i.mapLayer){const r=i.isSublayer?i.parentLayer.id:i.id,s=this.layerOrderIds().findIndex(n=>n===r);return s===-1?void 0:s}else return}layerOrderIds(){return ic(this.$vApp.$pinia).mapOrder.slice(0)||[]}allLayers(){return ic(this.$vApp.$pinia).layers||[]}allActiveLayers(){return this.allLayers().filter(t=>t.layerState!==Ar.ERROR&&t.initiationState===rr.INITIATED)}allLayersOnMap(t=!0){let i=this.allLayers().filter(r=>r.mapLayer&&r.initiationState===rr.INITIATED);if(t){const r=this.layerOrderIds(),s=new Map(r.map((n,o)=>[n,o]));i.sort((n,o)=>s.get(n.id)-s.get(o.id))}return i}allDataLayers(){return this.allLayers().filter(t=>!t.mapLayer&&t.initiationState===rr.INITIATED)}allErrorLayers(){return this.allLayers().filter(t=>t.layerState===Ar.ERROR)}allInitiatingLayers(){return this.allLayers().filter(t=>t.initiationState===rr.INITIATING)}getLayerControls(t){const i=this.getLayer(t);if(!i)return;const r=i.config.controls?.slice()??[Lr.BoundaryZoom,Lr.Datatable,Lr.Identify,Lr.Metadata,Lr.Opacity,Lr.Refresh,Lr.Reload,Lr.Remove,Lr.Settings,Lr.Symbology,Lr.Visibility],s=[];return i.supportsFeatures||s.push(Lr.Datatable),i.extent===void 0&&s.push(Lr.BoundaryZoom),(i.config?.metadata||(i.isSublayer?i.parentLayer?.config?.metadata:{})||{}).url||s.push(Lr.Metadata),!i.mapLayer&&!i.config.controls?.includes(Lr.Settings)&&s.push(Lr.Settings),s.forEach(o=>{const a=r?.indexOf(o)??-1;a!==-1&&r?.splice(a,1)}),{controls:r,disabledControls:i.config.disabledControls??[]}}async loadLayerMetadata(t){if(!t.trim())throw new Error("url missing on layer server metadata request.");const[i,r]=await fg(Ne(t,{query:{f:"json"}}));if(!r)throw console.error(`Service metadata load error: ${t}`,i),new Error(`Service metadata load error: ${t}`);if(!r.data)throw console.error(`Service metadata load error: ${t}`),new Error(`Service metadata load error: ${t}`);const s=r.data,n={geometryType:Vt.NONE,minScale:0,maxScale:0,canModifyLayer:!0,extent:void 0,defaultVisibility:!0,fields:[],displayField:"",objectIdField:"",renderer:void 0,currentVersion:0,name:"",dataFormat:Gs.UNKNOWN,mapLayer:!0};if(n.name=s.name||"",n.currentVersion=s.currentVersion||-1,n.minScale=s.effectiveMinScale||s.minScale||0,n.maxScale=s.effectiveMaxScale||s.maxScale||0,n.extent=s.extent?nr.fromArcServer(s.extent,"layer_extent"):void 0,n.defaultVisibility=s.defaultVisibility??!0,n.canModifyLayer=s.canModifyLayer??!0,s.type==="Feature Layer"||s.type==="Table"){if(n.dataFormat=Gs.ESRI_FEATURE,n.displayField=s.displayField||"",Array.isArray(s.fields)){const o=s.fields.map(l=>na.fromJSON(l));n.fields=o.map(l=>({name:l.name,alias:l.alias,type:l.type,length:l.length})),o.every(l=>l.type==="oid"?(n.objectIdField=l.name,!1):!0)&&(n.objectIdField=s.objectIdField||(console.error(`Encountered service with no OID defined: ${t}`),"")),s.type==="Feature Layer"?(n.geometryType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(s.geometryType),s.drawingInfo?.renderer&&(n.renderer=b1(s.drawingInfo.renderer)),s.sourceSpatialReference&&(n.sourceSR=Ot.fromConfig(s.sourceSpatialReference))):n.mapLayer=!1}}else n.dataFormat=Gs.ESRI_RASTER;return n}async loadFeatureCount(t,i=""){if(!t)return console.error("A layer without a url attempted to run the server based feature count routine."),0;const r={query:{f:"json",where:i||"1=1",returnCountOnly:!0,returnGeometry:!1}},[s,n]=await fg(Ne(`${t}/query`,r));return n?n.data?Number.isInteger(n.data.count)?n.data.count:(console.error(`Funny result (${n.data.count}) during feature count: ${t}`),0):(console.error(`Unable to load feature count: ${t}`),0):(console.error(`Feature count request unsuccessful: ${t}`,s),0)}}class qj extends Kr{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;mapLayer;featureCount;fields;fieldList;nameField;oidField;expectedTime;lastCancel;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;esriLayer;esriSubLayer;esriView;extent;sourceSR;canModifyLayer;canReload;url;_parentLayer;_sublayers;constructor(t,i){super(i),this.config=t,this.id="",this.uid="",this.name="error",this.layerState=Ar.NEW,this.drawState=xo.NOT_LOADED,this.initiationState=rr.NEW,this.layerIdx=-1,this.layerFormat=wa.UNKNOWN,this.layerType=ft.UNKNOWN,this.dataFormat=Gs.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=rs.NONE,this.supportsFeatures=!1,this.mapLayer=!0,this.featureCount=0,this.fields=[],this.fieldList="",this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=!1,this.userAdded=!1,this.identify=!1,this.hovertips=!1,this.geomType=Vt.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0,fail:0},this.lastCancel=0,this.canModifyLayer=!0,this.canReload=!0,this.url=""}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}cancelLoad(){}removeEsriLayer(){}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getFieldsToTrim(){return[]}getLayerTree(){return new lA(0,"Fake tree","getLayerTree() was not implemented in layer")}getSR(){return Ot.latLongSR()}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new Oce}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(t){}get touchTolerance(){return 0}set touchTolerance(t){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(t){return[]}getAttributes(){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}downloadedAttributes(){return 0}attribLoadAborted(){return!1}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,i){return Promise.resolve(new su(new If))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,i){}applySqlFilter(t=[]){}getFilterOIDs(t=[],i=void 0){return Promise.resolve(void 0)}getGraphicExtent(t){return Promise.resolve(nr.fromParams("fake",0,0,0,0))}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}onError(t=!0){}updateLayerState(t,i=!1){}updateDrawState(t){}updateInitiationState(t){}uidToIdx(t){if(t===this.uid)return-1;{const i=this._sublayers.findIndex(r=>r?.uid===t);if(i===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return i}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let i;if(typeof t=="string"?i=this.uidToIdx(t):i=t,this._sublayers[i]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[i]}controlAvailable(t){const i=this.$iApi.geo.layer.getLayerControls(this.id);return this.$iApi.geo.shared.controlAvailable(t,i)}}class sme extends qj{timers;origRampConfig;loadDefProm;loadPromDone;layerTree;constructor(t,i){super(t,i),this.name=t.name||"",this.geomType=Vt.NONE,this.dataFormat=Gs.UNKNOWN,this.layerType=ft.UNKNOWN,this.layerFormat=wa.UNKNOWN;const r=i.geo.map.layerDefaultTimes;this.expectedTime.draw=t.expectedDrawTime??r.draw,this.expectedTime.load=t.expectedLoadTime??r.load,this.expectedTime.fail=t.maxLoadTime||r.fail,this.lastCancel=0,this.timers={draw:void 0,load:void 0},this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isCosmetic=!1,this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.mapLayer=!0,this.identifyMode=rs.NONE,this.supportsFeatures=!1,this.hovertips=!1,this.supportsSublayers=!1,this.isFile=!1,this.layerState=Ar.NEW,this.initiationState=rr.NEW,this.drawState=xo.NOT_LOADED,this.loadDefProm=new Wr,this.url=this.origRampConfig.url,this.canReload=!!(this.url||this.origRampConfig.caching),this.loadPromDone=!1,this.layerTree=new lA(0,this.uid,this.name,!0)}updateInitiationState(t){this.initiationState=t,this.$iApi.event.emit(ot.LAYER_INITIATIONSTATECHANGE,{state:t,layer:this})}updateLayerState(t,i=!1){this.layerState=t,this.$iApi.event.emit(ot.LAYER_LAYERSTATECHANGE,{state:t,layer:this,userCancel:i})}updateDrawState(t){this.drawState=t,t===xo.REFRESH?this.startTimer("draw"):t===xo.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(ot.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){this.updateInitiationState(rr.INITIATING),this.startTimer("load");const t=n=>{this.layerState!==Ar.ERROR&&(console.error(n),this.onError())},i=Date.now(),r=setTimeout(()=>{i>this.lastCancel&&(this.lastCancel=Date.now(),t("Layer timed out during initialize. Id: "+this.id))},this.expectedTime.fail),[s]=await fg(this.onInitiate());clearTimeout(r),i>this.lastCancel&&(this.drawState!==xo.UP_TO_DATE&&this.startTimer("draw"),s?t(`Init error on layer id: ${this.id} . ${s.message}`):this.updateInitiationState(rr.INITIATED))}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();this.initiationState===rr.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`)}async terminate(){this.updateInitiationState(rr.TERMINATING),await Promise.all(this.sublayers.map(t=>t.terminate())),this.loadDefProm=new Wr,this.loadPromDone=!1,this.updateLayerState(Ar.NEW),this.updateDrawState(xo.NOT_LOADED),this.updateInitiationState(rr.TERMINATED)}onLoad(){const t=Date.now();let i=!1;const r=setTimeout(()=>{i=!0,this.onError()},this.expectedTime.fail);try{const s=this.onLoadActions();Promise.all(s).then(()=>{clearTimeout(r),i?this.visibility=!1:(this.stopTimer("load"),t>this.lastCancel&&(this.loadPromDone&&(this.loadDefProm=new Wr),this.loadDefProm.resolveMe(),this.loadPromDone=!0,this.sublayers.forEach(n=>n.onLoad()),this.updateLayerState(Ar.LOADED)))}).catch(()=>{clearTimeout(r),this.onError()})}catch(s){console.error("Encountered error on layer load: ",s),clearTimeout(r),this.onError()}}onError(t=!0){this.layerState!==Ar.ERROR&&(this.initiationState===rr.INITIATING&&this.updateInitiationState(rr.NEW),this.loadPromDone&&(this.loadDefProm=new Wr),this.loadDefProm.rejectMe(),this.loadPromDone=!0,this.sublayers.forEach(i=>i.onError(t)),t&&this.$iApi.notify.show(ma.ERROR,this.$iApi.$i18n.t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(Ar.ERROR,!t))}onLoadActions(){return[]}cancelLoad(){this.isLoaded||this.initiationState===rr.NEW||this.initiationState===rr.TERMINATING||this.initiationState===rr.TERMINATED||(this.lastCancel=Date.now(),this.esriLayer&&this.esriLayer.loadStatus==="loading"&&this.esriLayer.cancelLoad(),this.removeEsriLayer(),this.onError(!1))}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===Ar.LOADED}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}getLayerTree(){return this.layerTree}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,i){return this.stubError(),Promise.resolve(new su(new If))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,i){this.stubError()}getFilterOIDs(t=[],i=void 0){return this.stubError(),Promise.resolve(void 0)}getGraphicExtent(t){return this.stubError(),Promise.resolve(nr.fromParams("fake",0,0,0,0))}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,i,r=!0){this.stubError()}startTimer(t){this.stopTimer(t),this.expectedTime[t]>0&&(this.timers[t]=window.setTimeout(()=>this.$iApi.notify.show(ma.WARNING,this.$iApi.$i18n.t(`layer.long${t}`,{id:this.name||this.id})),this.expectedTime[t]))}stopTimer(t){this.timers[t]&&(clearTimeout(this.timers[t]),this.timers[t]=void 0)}}class Og extends sme{_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";viewDefProm;esriWatches;constructor(t,i){super(t,i),this._scaleSet=new Oce,this._mouseTolerance=t.mouseTolerance!=null?t.mouseTolerance:5,this._touchTolerance=t.touchTolerance!=null?t.touchTolerance:15,this._drawOrder=[],this._serverVisibility=void 0,this.isCosmetic=t.cosmetic||!1,this.extent=t.extent?nr.fromConfig(`${this.id}_extent`,t.extent):void 0,this.viewDefProm=new Wr,this.esriWatches=[]}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed. Layer id "+this.id),console.trace()}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded. Layer id "+this.id),console.trace()}async onInitiate(){if(await super.onInitiate(),!this.esriLayer){this.noLayerErr();return}this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(ot.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(ot.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const i={"not-loaded":Ar.LOADING,loading:Ar.LOADING,loaded:Ar.LOADED,failed:Ar.ERROR};t==="loaded"?this.onLoad():t==="failed"?this.onError():this.updateLayerState(i[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",i=>{this.updateDrawState(i?xo.REFRESH:xo.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(t=>t.initiate())}async terminate(){this.esriLayer=void 0,await super.terminate(),this.viewDefProm=new Wr,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[]}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.removeEsriLayer();const t=Date.now();if(this.$iApi.event.emit(ot.LAYER_RELOAD_START,this),this.sublayers.forEach(i=>this.$iApi.event.emit(ot.LAYER_RELOAD_START,i)),await this.terminate(),await this.initiate(),!(this.lastCancel>t)){if(!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.insertToEsriMap(this),this.$iApi.event.emit(ot.LAYER_RELOAD_END,this),this.sublayers.forEach(i=>this.$iApi.event.emit(ot.LAYER_RELOAD_END,i))}}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}removeEsriLayer(){this.esriLayer&&this.$iApi.geo.map.esriMap&&this.$iApi.geo.map.esriMap.layers.findIndex(i=>i.id===this.id)>-1&&this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer)}onLoadActions(){const t=super.onLoadActions();this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify);const i=this.$iApi.geo.proj.checkProj(this.getSR()).then(r=>r?Promise.resolve():Promise.reject());return t.push(i),t}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),console.trace(),!1)}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let i;if(typeof t>"u")if(this.mapCheck())i=this.$iApi.geo.map.getScale();else return!1;else i=t;return this.scaleSet.isOffScale(i).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=t}get touchTolerance(){return this._touchTolerance}set touchTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=t}get layerExists(){return this.initiationState===rr.INITIATED&&!!this.esriLayer}get drawOrder(){return this._drawOrder}get visibility(){return this.layerExists?this.esriLayer.visible:!1}set visibility(t){this.layerExists?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&this.layerExists&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.layerExists?this.esriLayer.opacity:0}set opacity(t){this.layerExists?this.esriLayer.opacity=t:this.noLayerErr()}getSR(){return this.esriLayer?Ot.fromESRI(this.esriLayer.spatialReference):(this.noLayerErr(),Ot.latLongSR())}}class Hj extends Og{attribs;renderer;serviceUrl;canModifyLayer;filter;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.geomType=Vt.UNKNOWN,this.serviceUrl="",this.fieldList="",this.canModifyLayer=!0,this.filter=new Pce(t.permanentFilteredQuery||"",t.initialFilteredQuery||""),this.hovertips=t.state?.hovertips??!0,this.attribs=new ome}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const i=Date.now(),r=await this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl);if(!(i<this.lastCancel))if(this.geomType=r.geometryType,this.attribs.quickCache=new lme(this.geomType),this.scaleSet.minScale=r.minScale,this.scaleSet.maxScale=r.maxScale,this.dataFormat=r.dataFormat,this.extent=this.extent??r.extent,this._serverVisibility=r.defaultVisibility,this.dataFormat===Gs.ESRI_FEATURE){this.supportsFeatures=!0,this.canModifyLayer=this.layerType===ft.SUBLAYER?r.canModifyLayer:!0,this.fields=r.fields,this.nameField=r.displayField,this.oidField=r.objectIdField,this.sourceSR=r.sourceSR,this.drawOrder.forEach(o=>{o.field&&this.fields.findIndex(a=>a.name===o.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${o.field}`)});const s=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:r.renderer;this.renderer=this.$iApi.geo.symbology.makeRenderer(s,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const n={supportsLimit:(r.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*",permanentFilter:this.getSqlFilter(Hn.PERMANENT)};this.attribs.attLoader=new ame(this.$iApi,n),this.origRampConfig.name||(this.name=r.name??this.id)}else this.supportsFeatures=!1,this.supportsIdentify=!1}getAttributes(){return this.attribs.attLoader.getAttribs()}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}getFieldsToTrim(){return this.fields.filter(t=>t.trim).map(t=>t.name)}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,i){let r={},s=new If;const n=this.$iApi.geo.map;let o=!1,a=!1,l=0;if(i.getAttribs||i.getStyle){const h=this.attribs.quickCache.getAttribs(t);if(h)r=h;else if(this.attribs.attLoader.isLoaded()||this.isFile){const p=await this.attribs.attLoader.getAttribs();r=p.features[p.oidIndex[t]]}else o=!0}if(i.getGeom){l=n.getScale();const h=this.attribs.quickCache.getGeom(t,l);h?s=h:a=!0}if(o||a){const h={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList,fieldsToTrim:this.getFieldsToTrim()};a&&(h.mapSR=n.getSR().wkid?.toString(),this.attribs.quickCache.isPoint||(h.maxOffset=n.esriView?.resolution));const p=await this.$iApi.geo.attributes.loadSingleFeature(h);a&&(this.attribs.quickCache.setGeom(t,p.geometry,l),s=p.geometry),(o||typeof this.attribs.quickCache.getAttribs(t)>"u")&&(this.attribs.quickCache.setAttribs(t,p.attributes),o&&(r=p.attributes))}const u=new su(s,"",i.getAttribs?r:void 0);if(i.getStyle){const h=kt(this.renderer.getGraphicSymbol(r));u.style=this.$iApi.geo.geom.styleEsriToRamp(h)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const i=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(i.attributes||{},this.renderer)}setSqlFilter(t,i){const r=this.filter.getSql(t);if(i===r)return;this.filter.setSql(t,i),this.$iApi.event.emit(ot.FILTER_CHANGE,{uid:this.uid,filterKey:t});const s=`${this.uid}-${t}-${i}`;this._lastFilterUpdate=s,setTimeout(()=>{this._lastFilterUpdate===s&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error(`attempted to apply sql filter ${t} to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter`)}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],i=void 0){const r=this.filter.getCombinedSql(t),s=!!i;if(!(r||s))return;i&&this.filter.setExtent(i);const n=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(n,s);if(!o){const a={filterGeometry:i,filterSql:r,includeGeometry:!1,sourceSR:this.sourceSR};o=this.queryOIDs(a),this.filter.setCache(o,n,s)}return o}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const i={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(i)}async queryFeaturesDiscrete(t){const i=await this.queryOIDs(t),r={getGeom:!!t.includeGeometry,getAttribs:!0};return i.map(s=>({oid:s,graphic:this.getGraphic(s,r)}))}async queryFeatures(t){const i=await this.queryFeaturesDiscrete(t);return Promise.all(i.map(r=>r.graphic))}configDrawOrder(t,i){Array.isArray(t.drawOrder)&&t.drawOrder.length>0&&(i.orderBy=t.drawOrder.map(r=>{const s=r.ascending??!0?"ascending":"descending";return r.field?{field:r.field,order:s}:{valueExpression:r.arcade,order:s}}),this._drawOrder=t.drawOrder.slice())}}class aat extends Og{constructor(t,i){super(t,i),this.dataFormat=Gs.ESRI_FEATURE,this.layerFormat=wa.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getGraphicCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(i=>i.id===t)}getEsriGraphic(t){return this.esriLayer?.graphics.find(i=>i.id===t)}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.layerExists){this.noLayerErr();return}let i;t instanceof Array?i=t:i=[t];const r=i.filter(l=>this._graphics.findIndex(h=>h.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),s=this.$iApi.geo.map.getSR(),n=r.map(l=>this.$iApi.geo.proj.projectGeometry(s,l.geometry)),o=await Promise.all(n),a=r.map((l,u)=>{const h=new su(o[u],l.id,l.attributes);return h.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(h)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.layerExists){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let i;Array.isArray(t)?i=t:i=[t],i.map(s=>typeof s=="string"?s:s.id).forEach(s=>{const n=this.esriLayer.graphics.findIndex(a=>a.id===s);n>-1&&this.esriLayer.graphics.removeAt(n);const o=this._graphics.findIndex(a=>a.id===s);o>-1&&this._graphics.splice(o,1)})}}class lat extends aat{constructor(t,i){super(t,i),this.layerType=ft.GRAPHIC}async onInitiate(){this.esriLayer=Jr(new zCe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(xo.UP_TO_DATE),t}}class Pg extends Hj{esriJson;sourceGeoJson;tooltipField;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=Gs.ESRI_FEATURE,this.layerFormat=wa.FEATURE,this.tooltipField="",this.layerIdx=0,t.identifyMode&&t.identifyMode!==rs.NONE?this.identifyMode=t.identifyMode:this.identifyMode=rs.HYBRID}async reload(){if(this.origRampConfig.caching!==!0&&!this.origRampConfig.url){console.error("Attempted to reload file layer from non server source without caching enabled.");return}await super.reload()}async onInitiate(){if(!this.sourceGeoJson)throw new Error("File Layer is missing source data.");const t={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata,latField:this.origRampConfig.latField||"",lonField:this.origRampConfig.longField||""};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(this.sourceGeoJson,t),this.esriLayer=Jr(new y9(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData,delete this.sourceGeoJson,await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t),r="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(n=>{i[n]=this.esriJson[n]}),this.origRampConfig.nameField?i.displayField=this.$iApi.geo.attributes.fieldValidator(i.fields,this.origRampConfig.nameField)||r:i.displayField=r,i.outFields=["*"],delete i.url,this.configDrawOrder(t,i),i}onLoadActions(){const t=super.onLoadActions();return this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=b1(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.tooltipField)||this.nameField:this.tooltipField=this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewDefProm.getPromise()),this.filter.getCombinedSql()&&Promise.all(t).then(()=>{this.applySqlFilter()}),t}runIdentify(t){if(!this.canIdentify())return[];const i=new Wr,r=Js({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[],a=[];if(this.identifyMode===rs.HYBRID||this.identifyMode===rs.GEOMETRIC){const l={includeGeometry:!1};this.geomType!==Vt.POLYGON&&t.geometry.type===Vt.POINT?l.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):l.filterGeometry=t.geometry,l.filterSql=this.getCombinedSqlFilter(),n=this.queryFeatures(l).then(u=>{o=u})}return t.hitTest&&(this.identifyMode===rs.HYBRID||this.identifyMode===rs.SYMBOLIC)&&(s=n.then(async()=>{const l=await t.hitTest;a=await Promise.all(l.filter(u=>u.layerId===this.id&&o.findIndex(h=>u.oid===h.attributes[this.oidField])===-1).map(u=>u.oid))})),Promise.all([s,n]).then(()=>{o.forEach(l=>{r.items.push(FS.makeRawItem(Ev.ESRI,l.attributes))}),a.forEach(l=>{r.items.push(FS.makeOidItem(l,this))}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=this.extent??nr.fromESRI(t.fullExtent,this.id+"_extent");const i=Jr(t.fields.slice());this.fields=i.map(s=>({name:s.name,alias:s.alias,type:s.type,length:s.length})),this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const r={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1,fieldsToTrim:[]};this.attribs.attLoader=new Mat(this.$iApi,r)}async getGraphic(t,i){let r;if(!i.getGeom&&this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();r=new su(new If,"",s.features[s.oidIndex[t]])}else{const s={filterOIDs:[t],includeGeometry:!!i.getGeom},n=await this.queryFeatures(s);if(n.length===0)throw new Error(`Could not find object id ${t}`);n.length!==1&&console.warn("did not get a single result on a query for a specific object id"),r=n[0]}if(i.getStyle){const s=kt(this.renderer.getGraphicSymbol(r.attributes));r.style=this.$iApi.geo.geom.styleEsriToRamp(s)}return r}async queryFeatures(t){const i={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(i)}async queryOIDs(t){const i={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(i)).map(s=>s.attributes?s.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const i=this.filter.getCombinedSql(t);kt(this.esriView).filter=new Bse({where:i})}}class uat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.GEOJSON}async onInitiate(){let t;const i=Date.now();if(this.origRampConfig.rawData)t=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");i>this.lastCancel&&(this.sourceGeoJson=t,await super.onInitiate())}}class cat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.SHAPEFILE}async onInitiate(){const t=Date.now(),i=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const r=await this.$iApi.geo.layer.files.shapefileToGeoJson(i);t>this.lastCancel&&(this.sourceGeoJson=r,await super.onInitiate())}}}class hat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;const i=Date.now();if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");if(i>this.lastCancel){const r=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField});i>this.lastCancel&&(this.sourceGeoJson=r,await super.onInitiate())}}}class pat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.GEOJSONZIPPED}async onInitiate(){const t=Date.now(),i=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const r=await this.$iApi.geo.layer.files.unzipSingleFile(i);t>this.lastCancel&&(this.sourceGeoJson=JSON.parse(this.$iApi.geo.layer.files.arbToStr(r)),await super.onInitiate())}}}class dat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.FLATGEOBUF}async onInitiate(){const t=Date.now(),i=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const r=await this.$iApi.geo.layer.files.fgbToGeoJson(i,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=r,await super.onInitiate())}}}class fat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.FLATGEOBUFZIPPED}async onInitiate(){const t=Date.now(),i=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const r=await this.$iApi.geo.layer.files.unzipSingleFile(i);if(t>this.lastCancel){const s=await this.$iApi.geo.layer.files.fgbToGeoJson(r,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=s,await super.onInitiate())}}}}class mat extends Hj{tooltipField;constructor(t,i){super(t,i),this.dataFormat=Gs.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=ft.FEATURE,this.layerFormat=wa.FEATURE,t.identifyMode&&t.identifyMode!==rs.NONE?this.identifyMode=t.identifyMode:this.identifyMode=rs.HYBRID}async onInitiate(){Jr(this.esriLayer=new y9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t);return(t.initialFilteredQuery||t.permanentFilteredQuery)&&(i.definitionExpression=this.filter.getCombinedSql()),this.configDrawOrder(t,i),i}onLoadActions(){const t=Date.now(),i=super.onLoadActions(),r=this.esriLayer&&this.origRampConfig.customRenderer?.type;r&&(this.esriLayer.renderer=b1(this.origRampConfig.customRenderer));const s=this.esriLayer.parsedUrl.path,o=this.$iApi.geo.shared.parseUrlIndex(s).index||0;this.layerIdx=o,this.serviceUrl=s;const a=this.loadLayerMetadata(r?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{t>this.lastCancel&&(this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim()))}),l=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Hn.PERMANENT)).then(u=>{t>this.lastCancel&&(this.featureCount=u)});return this.layerTree.name=this.name,this.layerTree.layerIdx=o,i.push(a,l),i}runIdentify(t){if(!this.canIdentify())return[];const i=new Wr,r=Js({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[];if(this.identifyMode===rs.HYBRID||this.identifyMode===rs.GEOMETRIC){const a={includeGeometry:!1,sourceSR:this.sourceSR};this.geomType!==Vt.POLYGON&&t.geometry.type===Vt.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),n=this.queryOIDs(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===rs.HYBRID||this.identifyMode===rs.SYMBOLIC)&&(s=n.then(async()=>{(await t.hitTest).filter(l=>l.layerId===this.id&&o.findIndex(u=>l.oid===u)===-1).forEach(l=>{o.push(l.oid)})})),Promise.all([s,n]).then(()=>{o.forEach(a=>{r.items.push(FS.makeOidItem(a,this))}),r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}applySqlFilter(t=[]){if(this.layerExists){const i=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=i}else this.noLayerErr()}getGraphicExtent(t){return new Promise((i,r)=>{if(!this.layerExists)this.noLayerErr(),r();else if(!["multipoint","polyline","polygon"].includes(this.esriLayer.geometryType))console.error(`Attempted to query extent for invalid geometry type ${this.esriLayer.geometryType}.`),r();else{const s=this.attribs.quickCache.getExtent(t);s?i(s):this.esriLayer.queryExtent({objectIds:[t],outSpatialReference:this.$iApi.geo.map.getSR().toESRI()}).then(n=>{const o=nr.fromESRI(n.extent);this.attribs.quickCache.setExtent(t,o),i(o)}).catch(()=>{console.error(`Extent querying failed for ${t}.`),r()})}})}}class yat extends Og{isDynamic;origState;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=ft.MAPIMAGE,this.layerFormat=wa.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=rs.GEOMETRIC}async onInitiate(){this.esriLayer=Jr(new q9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t);return this.origState={visibility:i.visible,opacity:i.opacity},i.visible=!1,t.imageFormat&&(i.imageFormat=t.imageFormat),i}onLoadActions(){const t=super.onLoadActions();if(!this.layerExists)return this.noLayerErr(),t;const i=Date.now();if(this.layerTree.name=this.name,!this.esriLayer.capabilities.exportMap)throw this.$iApi.notify.show(ma.WARNING,this.$iApi.$i18n.t("layer.noexportmap",{name:this.name||this.id})),new Error("Service does not support Map Image Layer, Map Export is not enabled");this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??nr.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const r=l=>{const u=this.esriLayer?.allSublayers.find(h=>h.id===l);if(!u)throw new Error("attempt to find map image sublayer failed");return u},s={};this.origRampConfig.sublayers.forEach(l=>{s[l.index||0]=l});const n=[],o=(l,u)=>{const h=l.id,p=s[h];if(l.sublayers&&l.sublayers.length>0){const f=(p?p.name:"")||l.title||"",m=new lA(h,"",f,!1);u.findChildByIdx(h)||u.children.push(m),l.sublayers.reverse().forEach(g=>{o(g,m)})}else{this._sublayers[h]||(this._sublayers[h]=new gat({id:`${this.id}-${h}`,index:h,layerType:ft.SUBLAYER,name:p?.name,state:p?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:p?.extent,controls:p?.controls,disabledControls:p?.disabledControls,initialFilteredQuery:p?.initialFilteredQuery,permanentFilteredQuery:p?.permanentFilteredQuery,labels:p?.labels},this.$iApi,this));const f=this._sublayers[h];if(f.isRemoved)return;if(f.name=p?.name||l.title||"",n.push(f),!u.children.map(m=>m.layerIdx).includes(h)){const m=new lA(h,f.uid,f.name,!1);u.children.push(m)}f.esriWatches.push(l.watch("visible",()=>{this.$iApi.event.emit(ot.LAYER_VISIBILITYCHANGE,{visibility:f.visibility,layer:f}),f.parentLayer?.checkVisibility()}),l.watch("opacity",m=>{this.$iApi.event.emit(ot.LAYER_OPACITYCHANGE,{opacity:m,layer:f})}))}};this.origRampConfig.sublayers.forEach(l=>{if(!l.cosmetic){const u=r(l.index||0);o(u,this.layerTree)}});const a=n.map(async l=>{const u=r(l.layerIdx),h=s[l.layerIdx];if(l.serviceUrl=u.url,l.fetchEsriSublayer(this),await l.initiate(),i<this.lastCancel)return;const p=l.esriSubLayer&&h?.customRenderer?.type;if(p&&(l.esriSubLayer.renderer=b1(h.customRenderer)),await l.loadLayerMetadata(p?{customRenderer:l.esriSubLayer?.renderer}:{}),i<this.lastCancel)return;const f=s[l.layerIdx];if(f?(l.visibility=l.isRemoved?!1:f.state?.visibility??(this.origState.visibility?l._serverVisibility??this.origState.visibility:this.origState.visibility??l._serverVisibility)??!0,l.opacity=f.state?.opacity??this.origState.opacity??1,l.nameField=f.nameField||l.nameField||"",this.$iApi.geo.attributes.applyFieldMetadata(l,f.fieldMetadata),l.canModifyLayer||this.$iApi.notify.show(ma.WARNING,this.$iApi.$i18n.t("layer.filtersdisabled",{name:l.name||l.id}))):this.$iApi.geo.attributes.applyFieldMetadata(l),l.supportsFeatures){l.updateFieldList(),l.updateFieldsToTrim();const m=await this.$iApi.geo.layer.loadFeatureCount(l.serviceUrl,l.getSqlFilter(Hn.PERMANENT));i>this.lastCancel&&(l.featureCount=m)}});return t.push(...a),this.esriLayer.allSublayers.forEach(l=>{!l.sublayers&&!n.find(u=>u.layerIdx===l.id)?(l.visible=!1,l.opacity=0):l.sublayers&&(l.visible=!0)}),this.visibility=this.origState.visibility??!0,t}updateLayerState(t,i=!1){super.updateLayerState(t,i),this.sublayers.forEach(r=>r.updateLayerState(t,i))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(i=>i.updateDrawState(t))}runIdentify(t){if(!this.canIdentify())return[];t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(s=>typeof s=="number"?this.layerTree?.findChildByIdx(s)?.uid:s));const i=t.sublayerIds?this._sublayers.filter(s=>t.sublayerIds?.includes(s.uid)):this._sublayers.filter(s=>s.canIdentify());if(i.length===0)return[];let r;return t.geometry.type===Vt.POINT&&(r=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),i.map(s=>{const n=new Wr,o={},a=Js({items:[],loading:n.getPromise(),loaded:!1,errored:!1,uid:s.uid,layerId:s.id,requestTime:Date.now()});return s.geomType!==Vt.POLYGON&&r?o.filterGeometry=r:o.filterGeometry=t.geometry,o.filterSql=s.getCombinedSqlFilter(),o.sourceSR=s.sourceSR,s.queryOIDs(o).then(l=>{l.forEach(u=>{a.items.push(FS.makeOidItem(u,s))}),a.loaded=!0,n.resolveMe()}).catch(()=>{a.errored=!0,n.resolveMe()}),a})}}class gat extends Hj{tooltipField;constructor(t,i,r){if(super(t,i),this.layerType=ft.SUBLAYER,this.layerFormat=wa.MAPIMAGE,this.isSublayer=!0,this.layerIdx=t.index,this.parentLayer=r,this.dataFormat=Gs.ESRI_FEATURE,this.supportsFeatures=!0,this.tooltipField="",this.hovertips=!1,this.url=this.parentLayer?.url,this.canReload=!!(this.url||this.origRampConfig.caching),!r.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(r),(t.initialFilteredQuery||t.permanentFilteredQuery)&&this.applySqlFilter()}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=Jr(t.esriLayer.allSublayers.find(i=>i.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=rr.INITIATED;const t=this.labelVizOverride();t!==void 0&&(this.labelVisibility=t)}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}cancelLoad(){this.parentLayer?.cancelLoad()}get layerExists(){return!!(this.parentLayer?.layerExists&&this.esriSubLayer&&this.initiationState===rr.INITIATED)}get visibility(){return this.layerExists?this.esriSubLayer.visible:!1}set visibility(t){this.layerExists?this.esriSubLayer.visible=t:this.noLayerErr()}get opacity(){return this.layerExists?this.esriSubLayer.opacity:0}set opacity(t){if(!this.layerExists){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get mouseTolerance(){return this.layerExists?this.parentLayer.mouseTolerance:0}set mouseTolerance(t){this.layerExists?this.parentLayer.mouseTolerance=t:this.noLayerErr()}get touchTolerance(){return this.layerExists?this.parentLayer.touchTolerance:0}set touchTolerance(t){this.layerExists?this.parentLayer.touchTolerance=t:this.noLayerErr()}applySqlFilter(t=[]){if(this.parentLayer?.layerExists&&this.esriSubLayer)if(this.supportsFeatures){const i=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=i}else console.error("Attempted to apply an SQL filter to a sublayer that does not support it (likely Raster datatype)");else this.noLayerErr()}getSR(){return this.parentLayer?.esriLayer?Ot.fromESRI(this._parentLayer?.esriLayer?.spatialReference):(this.noLayerErr(),Ot.latLongSR())}updateFieldList(){this.attribs.attLoader.updateFieldList(this.fieldList)}updateFieldsToTrim(){this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim())}get labelVisibility(){return this.layerExists?this.esriSubLayer.labelsVisible:!1}set labelVisibility(t){this.layerExists?this.esriSubLayer.labelsVisible=t:this.noLayerErr()}labelVizOverride(){let t=this.origRampConfig.labels?.visible;if(t!==void 0||(t=this.$iApi.geo.map.labelsDefault?.visible,t!==void 0))return t}}class vat extends Og{constructor(t,i){super(t,i),this.supportsIdentify=!1,this.layerType=ft.OSM,this.layerFormat=wa.OSM,this.dataFormat=Gs.OSM_TILE,this.supportsFeatures=!1}async onInitiate(){this.esriLayer=Jr(new H9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),r={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:i.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(r),t}}class bat extends Og{constructor(t,i){super(t,i),this.supportsIdentify=!1,this.layerType=ft.IMAGERY,this.layerFormat=wa.IMAGERY,this.dataFormat=Gs.ESRI_RASTER}async onInitiate(){this.esriLayer=Jr(new Voe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=Date.now(),r=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(s=>{i>this.lastCancel&&(this.legend=s)});return t.push(r),t}}class wat extends Og{constructor(t,i){super(t,i),this.supportsIdentify=!1,this.layerType=ft.TILE,this.layerFormat=wa.TILE,this.dataFormat=Gs.ESRI_TILE}async onInitiate(){this.esriLayer=Jr(new W9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions(),i=Date.now();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(s=>{i>this.lastCancel&&(this.legend=s)});return t.push(r),t.push(this.checkProj()),t}checkProj(){const t=this.getSR(),r=this.$iApi.geo.map.getSR().isEqual(t);if(this.layerState===Ar.LOADED&&!r)this.$iApi.notify.show(ma.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),this.onError();else if(this.layerState===Ar.ERROR&&r)this.reload();else if(this.layerState!==Ar.ERROR&&!r)return this.$iApi.notify.show(ma.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),Promise.reject();return Promise.resolve()}}class _at extends Og{sublayerNames;mimeType;constructor(t,i){super(t,i),this.supportsIdentify=!0,this.layerType=ft.WMS,this.layerFormat=wa.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=Gs.OGC_RASTER,this.identifyMode=rs.GEOMETRIC}async onInitiate(){this.esriLayer=Jr(new vae(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const i=super.makeEsriLayerConfig(t),r=t.sublayers;this.sublayerNames=r.map(n=>n.id||"error_no_wms_id");const s=r.map(n=>n.currentStyle).join();return i.customParameters={styles:s},t.url.indexOf("/geomet")!==-1&&(i.customParameters.layers=r[0].id),i}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const i=r=>{let s=!1;return r.forEach(n=>{this.sublayerNames.indexOf(n.name)>-1||n.sublayers&&n.sublayers.length>0&&i(n.sublayers)?s=!0:n.visible=!1}),s};return this.layerExists?i(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),t}canIdentify(){return super.canIdentify()}runIdentify(t){if(t.geometry.type!==Vt.POINT)throw new Error("a point must be used for WMS Identify");if(!this.canIdentify())return[];const i=new Wr,r=Js({items:[],loading:i.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(s=>{if(s){let n=!0,o;typeof s!="string"?o=Ev.JSON:s.indexOf("Search returned no results")===-1&&s!==""?o=Ev.TEXT:(n=!1,o=Ev.UNKNOWN),n&&r.items.push(FS.makeRawItem(o,s))}r.loaded=!0,i.resolveMe()}).catch(()=>{r.errored=!0,i.resolveMe()}),[r]}setCustomParameter(t,i,r=!0){this.layerExists?(this.esriLayer.customLayerParameters||(this.esriLayer.customLayerParameters={}),this.esriLayer.customLayerParameters[t]=i,r&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,i,r){const s=this.$iApi.geo.map,n=this.esriLayer;if(!s.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!n)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=s.getExtent(),u=n.spatialReferences,h=t.join(","),p=s.esriView.toScreen(i.toESRI()),f=Math.floor(p.x),m=Math.floor(p.y),b={"application/json":"json","text/html":"text","text/plain":"text"}[r]||"text",w=s.getSR();w.wkid?o=w.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(w.latestWkid&&u.indexOf(w.latestWkid)>-1?o=w.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),n.version==="1.3"||n.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:f,J:m,STYLES:"",FORMAT:n.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:f,Y:m},Object.prototype.hasOwnProperty.call(a,"BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const S={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:n.version,WIDTH:s.getPixelWidth(),HEIGHT:s.getPixelHeight(),QUERY_LAYERS:h,LAYERS:h,INFO_FORMAT:r},T=n.customLayerParameters;return T&&Object.keys(T).forEach(x=>{x.toLowerCase()!=="styles"&&(S[x]=T[x])}),Object.keys(S).forEach(x=>a[x]=S[x]),Ne(n.url.split("?")[0],{query:a,responseType:b})}getLegendUrls(t){if(!this.layerExists)return this.noLayerErr(),[];const i=new Map;this.esriLayer.allSublayers.forEach(s=>{s.visible&&(s.legendUrl&&this.origRampConfig.sublayers?.forEach(n=>{if(n.id&&n.currentStyle&&n.id===s.name){const o=new uA(s.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==n.currentStyle&&(s.legendUrl=o.updateQuery({STYLE:n.currentStyle}))}}),i.set(s.name,s.legendUrl))});const r=t.map(s=>s.styleLegends&&s.currentStyle?s.styleLegends.find(n=>n.name===s.currentStyle).url:void 0);return r.forEach((s,n)=>{s||(r[n]=i.get(t[n].id))}),r}getWMSLayerTitle(t){if(!this.esriLayer)return"";let i;return this.esriLayer.allSublayers.some(r=>{if(r.name===t)return i=r.title,!0}),i||""}loadSymbology(){const t=Date.now(),i=this.config.sublayers,r=this.getLegendUrls(i.map(s=>({id:s.id,styleLegends:s.styleLegends,currentStyle:s.currentStyle}))).map((s,n)=>{const o=i[n].name||this.getWMSLayerTitle(i[n].id)||i[n].id,a={uid:this.$iApi.geo.shared.generateUUID(),label:o,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(s).then(l=>{t>this.lastCancel&&(a.svgcode=l.svgcode,a.imgHeight=l.imgHeight,a.imgWidth=l.imgWidth)})};return a});this.legend=r}}class Sat extends Pg{constructor(t,i){super(t,i),this.layerType=ft.WFS}async onInitiate(){const t=Date.now(),i=new uA(this.config.url),{offset:r,limit:s}=i.queryMap,n=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(r)||0,parseInt(s)||1e3,void 0,this.config.xyInAttribs);t>this.lastCancel&&(this.sourceGeoJson=n,await super.onInitiate())}}class nme extends sme{sourceJson;attribs;_visibility;constructor(t,i){super(t,i),this.dataFormat=Gs.ESRI_FEATURE,this.layerFormat=wa.NOLAYER,this.drawState=xo.NOT_VISUAL,this.attribs=new ome,this.supportsFeatures=!0,this.mapLayer=!1,this.isFile=!1,this._visibility=t.state?.visibility??!0,this.expectedTime.draw=0}async onInitiate(){if(this.sourceJson){const t=this.sourceJson;if(t.data.length===0||t.fields.length===0)throw new Error("Data layer with no columns or now rows.");const i=t.fields.slice(),r=t.data[0].slice(),s=/ /gi;this.fields=i.map((o,a)=>{let l="",u=o;o.indexOf(" ")>-1&&(l=o,u=o.trim().replace(s,"-"),t.fields[a]=u);const h=this.$iApi.geo.layer.files.inferType(r[a]);return{name:u,alias:l,type:h,length:h===$h.STRING?256:void 0}}),this.oidField="rampOID",this.fields.push({name:this.oidField,type:$h.OID}),t.fields.push(this.oidField),t.data.forEach((o,a)=>o.push(a+1)),this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.fieldList="*";const n={batchSize:-1,sourceDataJson:t,oidField:this.oidField,attribs:"*",fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new Iat(this.$iApi,n),await this.attribs.attLoader.getAttribs(),this.featureCount=t.data.length,this.origRampConfig.nameField?this.nameField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.nameField)||this.oidField:this.nameField=this.oidField,this.sourceJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData}else throw new Error("Attempted to initiate file based data layer, sourceJson is missing")}async terminate(){await super.terminate()}async reload(){this.$iApi.event.emit(ot.LAYER_RELOAD_START,this),await this.terminate(),await this.initiate(),this.layerState!==Ar.ERROR&&this.onLoad(),setTimeout(()=>{this.$iApi.event.emit(ot.LAYER_RELOAD_END,this)},300)}onLoadActions(){const t=super.onLoadActions();return this.legend=[{uid:this.$iApi.geo.shared.generateUUID(),label:"",svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.getIcon(0).then(i=>{this.legend[0].svgcode=i})}],t}getAttributes(){return this.attribs.attLoader.getAttribs()}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,i){let r={};if(this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();r=s.features[s.oidIndex[t]]}else throw new Error("Non ESRI data layer did not have attributes populated.");return new su(new If,"",r)}async getIcon(t){return'<svg id="SvgjsSvg1012" width="32" height="32" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 32 32">                      <defs id="SvgjsDefs1013"></defs>                      <rect id="SvgjsRect1014" width="28"  height="28" x="2" y="2" fill="#2e8b57"></rect>                      <text id="SvgjsText1015" font-family="Roboto" font-size="23" fill="#ffffff" font-weight="bold" x="7.6875" y="-6.40000057220459" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}">                          <tspan id="SvgjsTspan1016" class="grid-icons" dy="29.900000000000002" x="7.6875" svgjs:data="{&quot;newLined&quot;:true}">D</tspan>                      </text>                </svg>'}async getFilterOIDs(t=[],i=void 0){}abortAttributeLoad(){}attribLoadAborted(){return!1}clearFeatureCache(){}downloadedAttributes(){return this.featureCount}get layerExists(){return this.isLoaded}get visibility(){return this._visibility}set visibility(t){this._visibility!==t&&(this._visibility=t,this.$iApi.event.emit(ot.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this}))}}class xat extends nme{constructor(t,i){super(t,i),this.layerType=ft.DATAJSON}async onInitiate(){const t=Date.now();let i;if(this.origRampConfig.rawData)i=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)i=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Json Data layer config contains no raw data or url");t>this.lastCancel&&(this.sourceJson=i,await super.onInitiate())}}class Tat extends nme{filter;serviceUrl;constructor(t,i){super(t,i),this.layerType=ft.DATATABLE,this.serviceUrl=t.url,this.filter=new Pce(t.permanentFilteredQuery||"",t.initialFilteredQuery||"")}async onInitiate(){}onLoadActions(){const t=super.onLoadActions(),i=Date.now(),s=this.$iApi.geo.shared.parseUrlIndex(this.serviceUrl).index||0,n=this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl).then(a=>{if(i<this.lastCancel)return;this.name||(this.name=a.name),this.layerTree.name=this.name,this.oidField=a.objectIdField,this.nameField=this.origRampConfig.nameField||a.displayField||this.oidField,this.fields=a.fields,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata);const l={supportsLimit:(a.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:this.fieldList,permanentFilter:this.getSqlFilter(Hn.PERMANENT),fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new ame(this.$iApi,l),this.attribs.quickCache=new lme(this.geomType)}),o=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Hn.PERMANENT)).then(a=>{i>this.lastCancel&&(this.featureCount=a)});return this.layerTree.layerIdx=s,t.push(n,o),t}async getGraphic(t,i){let r={};const s=this.attribs.quickCache.getAttribs(t);if(s)r=s;else if(this.attribs.attLoader.isLoaded()){const o=await this.attribs.attLoader.getAttribs();r=o.features[o.oidIndex[t]]}else{const o={oid:t,serviceUrl:this.serviceUrl,includeGeometry:!1,attribs:this.fieldList},a=await this.$iApi.geo.attributes.loadSingleFeature(o);this.attribs.quickCache.setAttribs(t,a.attributes),r=a.attributes}return new su(new If,"",r)}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}setSqlFilter(t,i){const r=this.filter.getSql(t);i!==r&&(this.filter.setSql(t,i),this.$iApi.event.emit(ot.FILTER_CHANGE,{uid:this.uid,filterKey:t}))}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],i=void 0){const r=this.filter.getCombinedSql(t);if(!r)return;const s=this.filter.sqlActiveFilters(t);let n=this.filter.getCache(s,!1);if(!n){const o={filterSql:r,includeGeometry:!1};n=this.queryOIDs(o),this.filter.setCache(n,s,!1)}return n}queryOIDs(t){const i={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(i)}async queryFeaturesDiscrete(t){const i=await this.queryOIDs(t),r={getAttribs:!0};return i.map(s=>({oid:s,graphic:this.getGraphic(s,r)}))}async queryFeatures(t){const i=await this.queryFeaturesDiscrete(t);return Promise.all(i.map(r=>r.graphic))}}class Eat extends Kr{oidIndexer(t,i){t.features.forEach((r,s)=>{t.oidIndex[r[i]]=s})}async arcGisBatchLoad(t,i){if(i.loadAbortFlag)return[];const r=t.permanentFilter?` AND ${t.permanentFilter}`:"",s={query:{where:`${t.oidField}>${t.maxId}${r}`,outFields:t.attribs,orderByFields:t.oidField,returnGeometry:"false",f:"json"}},[n,o]=await fg(Ne(t.serviceUrl+"/query",s));if(!o)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!o.data||!o.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));let a=o.data.features;const l=a.length;if(l>0){i.loadedCount+=l;let u;if(t.supportsLimit?u=o.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=l),u=l>=t.batchSize),a=this.trimFeatureSetAttributes(a,t.fieldsToTrim??[]),u){t.maxId=a[l-1].attributes[t.oidField];const h=await this.arcGisBatchLoad(t,i);return i.loadAbortFlag?[]:a.concat(h)}else return i.loadAbortFlag?[]:a}else return[]}async loadArcGisServerAttributes(t,i){t.maxId=-1,t.batchSize=-1;const s={features:(await this.arcGisBatchLoad(t,i)).map(n=>n.attributes),oidIndex:{}};return this.oidIndexer(s,t.oidField),i.loadIsDone=!0,s}async loadGraphicsAttributes(t,i){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const s={features:t.sourceGraphics.map(n=>kt(n).attributes).toArray(),oidIndex:{}};return this.oidIndexer(s,t.oidField),i.loadIsDone=!0,i.loadedCount=s.features.length,s}async loadCompactJsonAttributes(t,i){if(!t.sourceDataJson)throw new Error("No .sourceDataJson provided to file data-layer attribute loader");const r=t.sourceDataJson.fields,s=t.fieldsToTrim??[],o={features:t.sourceDataJson.data.map(a=>{const l={};return a.forEach((u,h)=>{l[r[h]]=typeof u=="string"&&s.includes(r[h])?u.trim():u}),l}),oidIndex:{}};return this.oidIndexer(o,t.oidField),i.loadIsDone=!0,i.loadedCount=o.features.length,t.sourceDataJson=void 0,o}async loadSingleFeature(t){const i={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(i.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(i.query.outSR=t.mapSR),typeof t.geometryPrecision<"u"&&t.geometryPrecision>=0&&(i.query.geometryPrecision=t.geometryPrecision);const[r,s]=await fg(Ne(t.serviceUrl+"/query",i));if(!s)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,r),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!s.data||!s.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const n=s.data.features;if(n.length>0){let o,a=this.trimFeatureSetAttributes([n[0]],t.fieldsToTrim??[])[0];if(t.includeGeometry){a.geometry.spatialReference=s.data.spatialReference;const l=or(a.geometry);o=this.$iApi.geo.geom.geomEsriToRamp(l)}else o=new If;return new su(o,"",a.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}trimFeatureSetAttributes(t,i){return i.forEach(r=>{t.forEach(s=>{typeof s.attributes[r]=="string"&&(s.attributes[r]=s.attributes[r].trim())})}),t}orderFields(t,i){const r=(n,o)=>n.findIndex(a=>a.name===o),s=(n,o)=>{const a=r(i,n.name),l=r(i,o.name);return a===-1&&l===-1?r(t,n.name)-r(t,o.name):a===-1?1:l===-1?-1:a-l};return t.slice().sort(s)}applyFieldMetadata(t,i=void 0){if(!i||!i.fieldInfo){t.fieldList="*";return}let r=i.fieldInfo.filter(s=>s.trim).map(s=>s.name);if(t.fields.forEach(s=>{r.includes(s.name)&&(s.trim=!0)}),i?.enforceOrder&&i?.fieldInfo&&i?.fieldInfo.length>0&&(t.fields=this.orderFields(t.fields,i.fieldInfo),t.fieldList=i.fieldInfo.map(s=>s.name).join(",")),i.exclusiveFields){i.fieldInfo.find(n=>n.name===t.oidField)||i.fieldInfo.push({name:t.oidField}),t.fieldList=i.fieldInfo.map(n=>n.name).join(",");const s=i.fieldInfo;t.fields=t.fields.filter(n=>s.find(o=>o.name===n.name))}else t.fieldList="*";i.fieldInfo.forEach(s=>{if(s.alias){const n=t.fields.find(o=>o.name===s.name);n&&(n.alias=s.alias)}})}fieldValidator(t,i){if(t.findIndex(r=>r.name===i)===-1){const r=t.find(s=>s.alias===i);return r?r.name:(console.warn(`Cannot find name field in layer field list: ${i}`),"")}else return i}async generateTabularAttributes(t,i){return i.attLoader.tabularAttributesCache||(i.attLoader.tabularAttributesCache=this.$iApi.geo.attributes.generateTabularAttributesWorker(t,i)),i.attLoader.tabularAttributesCache}async generateTabularAttributesWorker(t,i){if(t.dataFormat===Gs.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const r=await i.attLoader.getAttribs();if(!r.features||r.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const s=t.fields.filter(o=>Object.prototype.hasOwnProperty.call(r.features[0],kt(o).name)).map(o=>({data:kt(o).name,title:kt(o).alias||kt(o).name})),n=r.features.map(o=>{const a=Lce({},o);return a.rvInteractive="",a.rvSymbol=t.getIcon(o[t.oidField]),a.rvUid=t.uid,a});return s.forEach(o=>{if(o.data.slice(-2)==="()"){const a=function(){return this[o.data]},l=o.data.slice(0,-2);n.forEach(u=>{u[l]=a})}}),{columns:s,rows:n,fields:t.fields,oidField:t.oidField}}}class ome{_attribLoader;_quickCache;get attLoader(){if(this._attribLoader)return this._attribLoader;throw console.trace(),new Error("Attempted to load attributes prior to layer being loaded.")}set attLoader(t){this._attribLoader=t}get quickCache(){if(this._quickCache)return this._quickCache;throw console.trace(),new Error("Attempted to access attribute cache prior to layer being loaded.")}set quickCache(t){this._quickCache=t}clearAll(){this._attribLoader&&this._attribLoader.destroyAttribs(),this._quickCache&&this._quickCache.clearAll()}}class FK{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class Wj extends Kr{aac;loadPromise;details;tabularAttributesCache;constructor(t,i){super(t),this.aac=new FK,this.details=i}updateFieldList(t){this.details.attribs=t}updateFieldsToTrim(t){this.details.fieldsToTrim=t}getAttribs(){return this.loadPromise||(this.aac=new FK,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class ame extends Wj{constructor(t,i){super(t,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class Mat extends Wj{constructor(t,i){super(t,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class Iat extends Wj{constructor(t,i){super(t,i)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadCompactJsonAttributes(this.details,this.aac)}}class lme{attribs;geoms;extents;isPoint;constructor(t){this.attribs={},this.geoms={},this.extents={},this.isPoint=t===Vt.POINT||t===Vt.MULTIPOINT}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,i){this.attribs[t]=i}getGeom(t,i=void 0){return this.getGeomStore(i)[t]}setGeom(t,i,r=void 0){const s=this.getGeomStore(r);s[t]=i}getExtent(t){return this.extents[t]}setExtent(t,i){this.extents[t]=i}clearAll(){this.attribs={},this.geoms={},this.extents={}}}class Jj{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,i,r=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=r,this.type=i$.Unknown}makeSearchParams(t){return t}searchRenderer(t){const i=this.makeSearchParams(t),r=this.symbolUnits.find(n=>n.match(i));if(r)return r;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${i}`);const s=new g5(this);return s.svgCode="",s}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}getFieldDelimiter(t,i){let r="'";if(!i||i.length===0)return r;const s=i.find(n=>n.name===t);return s&&s.type&&s.type!=="string"&&(r=""),r}cleanFieldName(t,i){if(!t)return t;let r=i.find(s=>s.name===t);if(r)return t;{const s=t.toLowerCase();return r=i.find(n=>n.name.toLowerCase()===s),r?r.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(i=>i.definitionClause).join(" OR ")}))`}}class g5{isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new Uo}match(t){return!!t}}class Aat extends Jj{constructor(t,i){super(t,i),this.type=i$.Simple;const r=new g5(this);r.label=t.label||"",r.symbol=t.symbol,r.definitionClause="",this.symbolUnits.push(r)}}class $at extends Jj{delim;keyFields;constructor(t,i,r=!1){super(t,i,r),this.type=i$.Unique,this.delim=t.fieldDelimiter||", ";const s=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,i));const n=this.keyFields.map(o=>this.getFieldDelimiter(o,i));if(t.uniqueValueInfos.forEach(o=>{const a=new jK(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((h,p)=>l[p]==="<Null>"?`${h} IS NULL`:`${h} = ${n[p]}${s(l[p])}${n[p]}`).join(" AND ");a.definitionClause=`(${u})`,a.matchValue=a.matchValue.replace(/<Null>/g,"")}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new jK(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(i=>{let r=t[i]===null?"":t[i];return typeof r!="string"&&(r=r.toString()),r}).join(this.delim)}}class jK extends g5{matchValue;constructor(t,i){super(t),typeof i=="number"?this.matchValue=i.toString():this.matchValue=i}match(t){return this.matchValue===t}}class Cat extends Jj{valField;constructor(t,i,r=!1){if(super(t,i,r),this.valField=this.cleanFieldName(t.field,i),t.classBreakInfos.forEach((s,n)=>{const o=n===0,a=new UK(this,s.minValue,s.maxValue,o);a.label=s.label||"",a.symbol=s.symbol,this.falseRenderer||(a.definitionClause=`(${this.valField} >${o?"=":""}  ${s.minValue} AND ${this.valField} <= ${s.maxValue})`),this.symbolUnits.push(a)}),t.defaultSymbol){const s=new UK(this,0,0,!1);s.isDefault=!0,s.label=t.defaultLabel||"",s.symbol=t.defaultSymbol,s.definitionClause=this.makeElseClause(),this.defaultUnit=s}}makeSearchParams(t){return parseFloat(t[this.valField])}}class UK extends g5{minValue;maxValue;firstBreak;constructor(t,i,r,s){super(t),this.minValue=i,this.maxValue=r,this.firstBreak=s}match(t){return this.minValue===this.maxValue?this.maxValue===t:this.firstBreak?this.minValue<=t&&this.maxValue>=t:this.minValue<t&&this.maxValue>=t}}var UI={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/var Rat=UI.exports,VK;function Oat(){return VK||(VK=1,function(e,t){(function(i,r){e.exports=i.document?r(i,i.document):function(s){return r(s,s.document)}})(typeof window<"u"?window:Rat,function(i,r){var s=typeof this<"u"?this:i,n=s.SVG=function(y){if(n.supported)return y=new n.Doc(y),n.parser.draw||n.prepare(),y};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=function(){return!!r.createElementNS&&!!r.createElementNS(n.ns,"svg").createSVGRect}(),!n.supported)return!1;n.did=1e3,n.eid=function(y){return"Svgjs"+w(y)+n.did++},n.create=function(y){var E=r.createElementNS(this.ns,y);return E.setAttribute("id",this.eid(y)),E},n.extend=function(){var y,E,$,P;for(y=[].slice.call(arguments),E=y.pop(),P=y.length-1;P>=0;P--)if(y[P])for($ in E)y[P].prototype[$]=E[$];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(y){var E=typeof y.create=="function"?y.create:function(){this.constructor.call(this,n.create(y.create))};return y.inherit&&(E.prototype=new y.inherit),y.extend&&n.extend(E,y.extend),y.construct&&n.extend(y.parent||n.Container,y.construct),E},n.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var E;return y.nodeName=="svg"?E=y.parentNode instanceof i.SVGElement?new n.Nested:new n.Doc:y.nodeName=="linearGradient"?E=new n.Gradient("linear"):y.nodeName=="radialGradient"?E=new n.Gradient("radial"):n[w(y.nodeName)]?E=new n[w(y.nodeName)]:E=new n.Element(y),E.type=y.nodeName,E.node=y,y.instance=E,E instanceof n.Doc&&E.namespace().defs(),E.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),E},n.prepare=function(){var y=r.getElementsByTagName("body")[0],E=(y?new n.Doc(y):n.adopt(r.documentElement).nested()).size(2,0);n.parser={body:y||r.documentElement,draw:E.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:E.polyline().node,path:E.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},r.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(y,E){var $,P=y.length,G=[];for($=0;$<P;$++)G.push(E(y[$]));return G},filter:function(y,E){var $,P=y.length,G=[];for($=0;$<P;$++)E(y[$])&&G.push(y[$]);return G},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(E){return E instanceof i.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(y){var E;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?n.regex.isRgb.test(y)?(E=n.regex.rgb.exec(y.replace(n.regex.whitespace,"")),this.r=parseInt(E[1]),this.g=parseInt(E[2]),this.b=parseInt(E[3])):n.regex.isHex.test(y)&&(E=n.regex.hex.exec(S(y)),this.r=parseInt(E[1],16),this.g=parseInt(E[2],16),this.b=parseInt(E[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+T(this.r)+T(this.g)+T(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new n.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new n.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),n.Color.test=function(y){return y+="",n.regex.isHex.test(y)||n.regex.isRgb.test(y)},n.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},n.Color.isColor=function(y){return n.Color.isRgb(y)||n.Color.test(y)},n.Array=function(y,E){y=(y||[]).valueOf(),y.length==0&&E&&(y=E.valueOf()),this.value=this.parse(y)},n.extend(n.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var E=this.value[this.value.length-1],$=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push($);for(;this.value.length<this.destination.length;)this.value.push(E)}return this},settle:function(){for(var y=0,E=this.value.length,$=[];y<E;y++)$.indexOf(this.value[y])==-1&&$.push(this.value[y]);return this.value=$},at:function(y){if(!this.destination)return this;for(var E=0,$=this.value.length,P=[];E<$;E++)P.push(this.value[E]+(this.destination[E]-this.value[E])*y);return new n.Array(P)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=f(this.value),y}}),n.PointArray=function(y,E){n.Array.call(this,y,E||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var y=0,E=this.value.length,$=[];y<E;y++)$.push(this.value[y].join(","));return $.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var E=0,$=this.value.length,P=[];E<$;E++)P.push([this.value[E][0]+(this.destination[E][0]-this.value[E][0])*y,this.value[E][1]+(this.destination[E][1]-this.value[E][1])*y]);return new n.PointArray(P)},parse:function(y){var E=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(G){return G.slice()});if(y[0].x!=null)return y.map(function(G){return[G.x,G.y]})}else y=y.trim().split(n.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var $=0,P=y.length;$<P;$=$+2)E.push([y[$],y[$+1]]);return E},move:function(y,E){var $=this.bbox();if(y-=$.x,E-=$.y,!isNaN(y)&&!isNaN(E))for(var P=this.value.length-1;P>=0;P--)this.value[P]=[this.value[P][0]+y,this.value[P][1]+E];return this},size:function(y,E){var $,P=this.bbox();for($=this.value.length-1;$>=0;$--)P.width&&(this.value[$][0]=(this.value[$][0]-P.x)*y/P.width+P.x),P.height&&(this.value[$][1]=(this.value[$][1]-P.y)*E/P.height+P.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var o={M:function(y,E,$){return E.x=$.x=y[0],E.y=$.y=y[1],["M",E.x,E.y]},L:function(y,E){return E.x=y[0],E.y=y[1],["L",y[0],y[1]]},H:function(y,E){return E.x=y[0],["H",y[0]]},V:function(y,E){return E.y=y[0],["V",y[0]]},C:function(y,E){return E.x=y[4],E.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,E){return E.x=y[2],E.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,E){return E.x=y[2],E.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,E){return E.x=y[0],E.y=y[1],["T",y[0],y[1]]},Z:function(y,E,$){return E.x=$.x,E.y=$.y,["Z"]},A:function(y,E){return E.x=y[5],E.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(E,$,P){if(y=="H")E[0]=E[0]+$.x;else if(y=="V")E[0]=E[0]+$.y;else if(y=="A")E[5]=E[5]+$.x,E[6]=E[6]+$.y;else for(var G=0,Q=E.length;G<Q;++G)E[G]=E[G]+(G%2?$.y:$.x);return o[y](E,$,P)}}(a[l].toUpperCase());n.PathArray=function(y,E){n.Array.call(this,y,E||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return C(this.value)},move:function(y,E){var $=this.bbox();if(y-=$.x,E-=$.y,!isNaN(y)&&!isNaN(E))for(var P,G=this.value.length-1;G>=0;G--)P=this.value[G][0],P=="M"||P=="L"||P=="T"?(this.value[G][1]+=y,this.value[G][2]+=E):P=="H"?this.value[G][1]+=y:P=="V"?this.value[G][1]+=E:P=="C"||P=="S"||P=="Q"?(this.value[G][1]+=y,this.value[G][2]+=E,this.value[G][3]+=y,this.value[G][4]+=E,P=="C"&&(this.value[G][5]+=y,this.value[G][6]+=E)):P=="A"&&(this.value[G][6]+=y,this.value[G][7]+=E);return this},size:function(y,E){var $,P,G=this.bbox();for($=this.value.length-1;$>=0;$--)P=this.value[$][0],P=="M"||P=="L"||P=="T"?(this.value[$][1]=(this.value[$][1]-G.x)*y/G.width+G.x,this.value[$][2]=(this.value[$][2]-G.y)*E/G.height+G.y):P=="H"?this.value[$][1]=(this.value[$][1]-G.x)*y/G.width+G.x:P=="V"?this.value[$][1]=(this.value[$][1]-G.y)*E/G.height+G.y:P=="C"||P=="S"||P=="Q"?(this.value[$][1]=(this.value[$][1]-G.x)*y/G.width+G.x,this.value[$][2]=(this.value[$][2]-G.y)*E/G.height+G.y,this.value[$][3]=(this.value[$][3]-G.x)*y/G.width+G.x,this.value[$][4]=(this.value[$][4]-G.y)*E/G.height+G.y,P=="C"&&(this.value[$][5]=(this.value[$][5]-G.x)*y/G.width+G.x,this.value[$][6]=(this.value[$][6]-G.y)*E/G.height+G.y)):P=="A"&&(this.value[$][1]=this.value[$][1]*y/G.width,this.value[$][2]=this.value[$][2]*E/G.height,this.value[$][6]=(this.value[$][6]-G.x)*y/G.width+G.x,this.value[$][7]=(this.value[$][7]-G.y)*E/G.height+G.y);return this},equalCommands:function(y){var E,$,P;for(y=new n.PathArray(y),P=this.value.length===y.value.length,E=0,$=this.value.length;P&&E<$;E++)P=this.value[E][0]===y.value[E][0];return P},morph:function(y){return y=new n.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var E=this.value,$=this.destination.value,P=[],G=new n.PathArray,Q,se,ie,ye;for(Q=0,se=E.length;Q<se;Q++){for(P[Q]=[E[Q][0]],ie=1,ye=E[Q].length;ie<ye;ie++)P[Q][ie]=E[Q][ie]+($[Q][ie]-E[Q][ie])*y;P[Q][0]==="A"&&(P[Q][4]=+(P[Q][4]!=0),P[Q][5]=+(P[Q][5]!=0))}return G.value=P,G},parse:function(y){if(y instanceof n.PathArray)return y.valueOf();var E,P,$={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(n.regex.numbersWithDots,p).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):y=y.reduce(function(ye,Pe){return[].concat.call(ye,Pe)},[]);var P=[],G=new n.Point,Q=new n.Point,se=0,ie=y.length;do n.regex.isPathLetter.test(y[se])?(E=y[se],++se):E=="M"?E="L":E=="m"&&(E="l"),P.push(o[E].call(null,y.slice(se,se=se+$[E.toUpperCase()]).map(parseFloat),G,Q));while(ie>se);return P},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(y,E){this.value=0,this.unit=E||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(E=y.match(n.regex.numberAndUnit),E&&(this.value=parseFloat(E[1]),E[5]=="%"?this.value/=100:E[5]=="s"&&(this.value*=1e3),this.unit=E[5])):y instanceof n.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new n.Number(y),new n.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new n.Number(y),new n.Number(this-y,this.unit||y.unit)},times:function(y){return y=new n.Number(y),new n.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new n.Number(y),new n.Number(this/y,this.unit||y.unit)},to:function(y){var E=new n.Number(this);return typeof y=="string"&&(E.unit=y),E},morph:function(y){return this.destination=new n.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new n.Number(this.destination).minus(this).times(y).plus(this):this}}}),n.Element=n.invent({create:function(y){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,E){return this.x(y).y(E)},center:function(y,E){return this.cx(y).cy(E)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,E){var $=x(this,y,E);return this.width(new n.Number($.width)).height(new n.Number($.height))},clone:function(y){this.writeDataToDom();var E=R(this.node.cloneNode(!0));return y?y.add(E):this.after(E),E},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,E){var $=this.bbox();return y>$.x&&E>$.y&&y<$.x+$.width&&E<$.y+$.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(n.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var E=this.classes();E.push(y),this.attr("class",E.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(E){return E!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return n.get(this.attr(y))},parent:function(y){var E=this;if(!E.node.parentNode)return null;if(E=n.adopt(E.node.parentNode),!y)return E;for(;E&&E.node instanceof i.SVGElement;){if(typeof y=="string"?E.matches(y):E instanceof y)return E;if(!E.node.parentNode||E.node.parentNode.nodeName=="#document"||E.node.parentNode.nodeName=="#document-fragment")return null;E=n.adopt(E.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(y){var E=[],$=this;do{if($=$.parent(y),!$||!$.node)break;E.push($)}while($.parent);return E},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var E=r.createElement("svg");if(y&&this instanceof n.Parent){E.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var $=0,P=E.firstChild.childNodes.length;$<P;$++)this.node.appendChild(E.firstChild.firstChild)}else return E.appendChild(y=r.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),E.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),n.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},n.morph=function(y){return function(E,$){return new n.MorphObj(E,$).at(y)}},n.Situation=n.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(y.duration).valueOf(),this.delay=new n.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,E,$){typeof y=="object"&&(E=y.ease,$=y.delay,y=y.duration);var P=new n.Situation({duration:y||1e3,delay:$||0,ease:n.easing[E||"-"]||E});return this.queue(P),this},delay:function(y){var E=new n.Situation({duration:y,delay:0,ease:n.easing["-"]});return this.queue(E)},target:function(y){return y&&y instanceof n.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=i.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){i.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof n.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,E,$,P=this.situation;if(P.init)return this;for(y in P.animations)for($=this.target()[y](),Array.isArray($)||($=[$]),Array.isArray(P.animations[y])||(P.animations[y]=[P.animations[y]]),E=$.length;E--;)P.animations[y][E]instanceof n.Number&&($[E]=new n.Number($[E])),P.animations[y][E]=$[E].morph(P.animations[y][E]);for(y in P.attrs)P.attrs[y]=new n.MorphObj(this.target().attr(y),P.attrs[y]);for(y in P.styles)P.styles[y]=new n.MorphObj(this.target().style(y),P.styles[y]);return P.initialTransformation=this.target().matrixify(),P.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,E){var $=this.active;return this.active=!1,E&&this.clearQueue(),y&&this.situation&&(!$&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,E){var $=this.situation.duration/this._speed;return this.absPos=y,E||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*$,this.situation.finish=this.situation.start+$,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,E){var $=this.last();return $.loops=y??!0,$.loop=0,E&&($.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var E=this.last();return typeof y>"u"?E.reversed=!E.reversed:E.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var E=this.last(),$=function P(G){G.detail.situation==E&&(y.call(this,E),this.off("finished.fx",P))};return this.target().on("finished.fx",$),this._callStart()},during:function(y){var E=this.last(),$=function(P){P.detail.situation==E&&y.call(this,P.detail.pos,n.morph(P.detail.pos),P.detail.eased,E)};return this.target().off("during.fx",$).on("during.fx",$),this.after(function(){this.off("during.fx",$)}),this._callStart()},afterAll:function(y){var E=function $(P){y.call(this),this.off("allfinished.fx",$)};return this.target().off("allfinished.fx",E).on("allfinished.fx",E),this._callStart()},duringAll:function(y){var E=function($){y.call(this,$.detail.pos,n.morph($.detail.pos),$.detail.eased,$.detail.situation)};return this.target().off("during.fx",E).on("during.fx",E),this.afterAll(function(){this.off("during.fx",E)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,E,$){return this.last()[$||"animations"][y]=E,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var E,$,P;E=Math.max(this.absPos,0),$=Math.floor(E),this.situation.loops===!0||$<this.situation.loops?(this.pos=E-$,P=this.situation.loop,this.situation.loop=$):(this.absPos=this.situation.loops,this.pos=1,P=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-P)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var G=this.situation.ease(this.pos);for(var Q in this.situation.once)Q>this.lastPos&&Q<=G&&(this.situation.once[Q].call(this.target(),this.pos,G),delete this.situation.once[Q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:G,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=G,this):this},eachAt:function(){var y,E,$,P=this,G=this.target(),Q=this.situation;for(y in Q.animations)$=[].concat(Q.animations[y]).map(function(ie){return typeof ie!="string"&&ie.at?ie.at(Q.ease(P.pos),P.pos):ie}),G[y].apply(G,$);for(y in Q.attrs)$=[y].concat(Q.attrs[y]).map(function(ie){return typeof ie!="string"&&ie.at?ie.at(Q.ease(P.pos),P.pos):ie}),G.attr.apply(G,$);for(y in Q.styles)$=[y].concat(Q.styles[y]).map(function(ie){return typeof ie!="string"&&ie.at?ie.at(Q.ease(P.pos),P.pos):ie}),G.style.apply(G,$);if(Q.transforms.length){for($=Q.initialTransformation,y=0,E=Q.transforms.length;y<E;y++){var se=Q.transforms[y];if(se instanceof n.Matrix){se.relative?$=$.multiply(new n.Matrix().morph(se).at(Q.ease(this.pos))):$=$.morph(se).at(Q.ease(this.pos));continue}se.relative||se.undo($.extract()),$=$.multiply(se.at(Q.ease(this.pos)))}G.matrix($)}return this},once:function(y,E,$){var P=this.last();return $||(y=P.ease(y)),P.once[y]=E,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(y,E,$){return(this.fx||(this.fx=new n.FX(this))).animate(y,E,$)},delay:function(y){return(this.fx||(this.fx=new n.FX(this))).delay(y)},stop:function(y,E){return this.fx&&this.fx.stop(y,E),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),n.MorphObj=n.invent({create:function(y,E){if(n.Color.isColor(E))return new n.Color(y).morph(E);if(n.regex.delimiter.test(y))return n.regex.pathLetters.test(y)?new n.PathArray(y).morph(E):new n.Array(y).morph(E);if(n.regex.numberAndUnit.test(E))return new n.Number(y).morph(E);this.value=y,this.destination=E},extend:{at:function(y,E){return E<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(y,E,$){if(typeof y=="object")for(var P in y)this.attr(P,y[P]);else this.add(y,E,"attrs");return this},style:function(y,E){if(typeof y=="object")for(var $ in y)this.style($,y[$]);else this.add(y,E,"styles");return this},x:function(y,E){if(this.target()instanceof n.G)return this.transform({x:y},E),this;var $=new n.Number(y);return $.relative=E,this.add("x",$)},y:function(y,E){if(this.target()instanceof n.G)return this.transform({y},E),this;var $=new n.Number(y);return $.relative=E,this.add("y",$)},cx:function(y){return this.add("cx",new n.Number(y))},cy:function(y){return this.add("cy",new n.Number(y))},move:function(y,E){return this.x(y).y(E)},center:function(y,E){return this.cx(y).cy(E)},size:function(y,E){if(this.target()instanceof n.Text)this.attr("font-size",y);else{var $;(!y||!E)&&($=this.target().bbox()),y||(y=$.width/$.height*E),E||(E=$.height/$.width*y),this.add("width",new n.Number(y)).add("height",new n.Number(E))}return this},width:function(y){return this.add("width",new n.Number(y))},height:function(y){return this.add("height",new n.Number(y))},plot:function(y,E,$,P){return arguments.length==4?this.plot([y,E,$,P]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new n.Number(y)):this},viewbox:function(y,E,$,P){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(y,E,$,P)),this},update:function(y){if(this.target()instanceof n.Stop){if(typeof y=="number"||y instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),n.Box=n.invent({create:function(y,E,$,P){if(typeof y=="object"&&!(y instanceof n.Element))return n.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=E,this.width=$,this.height=P),O(this)},extend:{merge:function(y){var E=new this.constructor;return E.x=Math.min(this.x,y.x),E.y=Math.min(this.y,y.y),E.width=Math.max(this.x+this.width,y.x+y.width)-E.x,E.height=Math.max(this.y+this.height,y.y+y.height)-E.y,O(E)},transform:function(y){var E=1/0,$=-1/0,P=1/0,G=-1/0,Q,se=[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)];return se.forEach(function(ie){ie=ie.transform(y),E=Math.min(E,ie.x),$=Math.max($,ie.x),P=Math.min(P,ie.y),G=Math.max(G,ie.y)}),Q=new this.constructor,Q.x=E,Q.width=$-E,Q.y=P,Q.height=G-P,O(Q),Q}}}),n.BBox=n.invent({create:function(y){if(n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element){var E;try{if(r.documentElement.contains){if(!r.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var $=y.node;$.parentNode;)$=$.parentNode;if($!=r)throw new Exception("Element not in the dom")}E=y.node.getBBox()}catch{if(y instanceof n.Shape){var P=y.clone(n.parser.draw.instance).show();E=P.node.getBBox(),P.remove()}else E={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}n.Box.call(this,E)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(y){n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element&&n.Box.call(this,y.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=i.pageXOffset,this.y+=i.pageYOffset,this}},construct:{rbox:function(y){return y?new n.RBox(this).transform(y.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(y){var E,$=M([1,0,0,1,0,0]);for(y=y instanceof n.Element?y.matrixify():typeof y=="string"?M(y.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?M([].slice.call(arguments)):Array.isArray(y)?M(y):typeof y=="object"?y:$,E=V.length-1;E>=0;--E)this[V[E]]=y[V[E]]!=null?y[V[E]]:$[V[E]]},extend:{extract:function(){var y=_(this,0,1),E=_(this,1,0),$=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos($*Math.PI/180)+this.f*Math.sin($*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos($*Math.PI/180)+this.e*Math.sin(-$*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-$,skewY:180/Math.PI*Math.atan2(E.y,E.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:$,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(y){return this.destination=new n.Matrix(y),this},at:function(y){if(!this.destination)return this;var E=new n.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return E},multiply:function(y){return new n.Matrix(this.native().multiply(I(y).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(y,E){return new n.Matrix(this.native().translate(y||0,E||0))},scale:function(y,E,$,P){return arguments.length==1?E=y:arguments.length==3&&(P=$,$=E,E=y),this.around($,P,new n.Matrix(y,0,0,E,0,0))},rotate:function(y,E,$){return y=n.utils.radians(y),this.around(E,$,new n.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,E){return y=="x"?this.scale(-1,1,E,0):y=="y"?this.scale(1,-1,0,E):this.scale(-1,-1,y,E??y)},skew:function(y,E,$,P){return arguments.length==1?E=y:arguments.length==3&&(P=$,$=E,E=y),y=n.utils.radians(y),E=n.utils.radians(E),this.around($,P,new n.Matrix(1,Math.tan(E),Math.tan(y),1,0,0))},skewX:function(y,E,$){return this.skew(y,0,E,$)},skewY:function(y,E,$){return this.skew(0,y,E,$)},around:function(y,E,$){return this.multiply(new n.Matrix(1,0,0,1,y||0,E||0)).multiply($).multiply(new n.Matrix(1,0,0,1,-y||0,-E||0))},native:function(){for(var y=n.parser.native.createSVGMatrix(),E=V.length-1;E>=0;E--)y[V[E]]=this[V[E]];return y},toString:function(){return"matrix("+L(this.a)+","+L(this.b)+","+L(this.c)+","+L(this.d)+","+L(this.e)+","+L(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var y=this.rect(1,1),E=y.node.getScreenCTM();return y.remove(),new n.Matrix(E)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(y,E){var $,P={x:0,y:0};$=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:E??y}:P,this.x=$.x,this.y=$.y},extend:{clone:function(){return new n.Point(this)},morph:function(y,E){return this.destination=new n.Point(y,E),this},at:function(y){if(!this.destination)return this;var E=new n.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return E},native:function(){var y=n.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new n.Point(this.native().matrixTransform(y.native()))}}}),n.extend(n.Element,{point:function(y,E){return new n.Point(y,E).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(y,E,$){if(y==null){for(y={},E=this.node.attributes,$=E.length-1;$>=0;$--)y[E[$].nodeName]=n.regex.isNumber.test(E[$].nodeValue)?parseFloat(E[$].nodeValue):E[$].nodeValue;return y}else if(typeof y=="object")for(E in y)this.attr(E,y[E]);else if(E===null)this.node.removeAttribute(y);else{if(E==null)return E=this.node.getAttribute(y),E==null?n.defaults.attrs[y]:n.regex.isNumber.test(E)?parseFloat(E):E;y=="stroke-width"?this.attr("stroke",parseFloat(E)>0?this._stroke:null):y=="stroke"&&(this._stroke=E),(y=="fill"||y=="stroke")&&(n.regex.isImage.test(E)&&(E=this.doc().defs().image(E,0,0)),E instanceof n.Image&&(E=this.doc().defs().pattern(0,0,function(){this.add(E)}))),typeof E=="number"?E=new n.Number(E):n.Color.isColor(E)?E=new n.Color(E):Array.isArray(E)&&(E=new n.Array(E)),y=="leading"?this.leading&&this.leading(E):typeof $=="string"?this.node.setAttributeNS($,y,E.toString()):this.node.setAttribute(y,E.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,E)}return this}}),n.extend(n.Element,{transform:function(y,E){var $=this,P,G;if(typeof y!="object")return P=new n.Matrix($).extract(),typeof y=="string"?P[y]:P;if(P=new n.Matrix($),E=!!E||!!y.relative,y.a!=null)P=E?P.multiply(new n.Matrix(y)):new n.Matrix(y);else if(y.rotation!=null)A(y,$),P=E?P.rotate(y.rotation,y.cx,y.cy):P.rotate(y.rotation-P.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if(A(y,$),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!E){var Q=P.extract();y.scaleX=y.scaleX*1/Q.scaleX,y.scaleY=y.scaleY*1/Q.scaleY}P=P.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if(A(y,$),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!E){var Q=P.extract();P=P.multiply(new n.Matrix().skew(Q.skewX,Q.skewY,y.cx,y.cy).inverse())}P=P.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?$.bbox()["c"+y.flip]:y.offset:y.offset==null?(G=$.bbox(),y.flip=G.cx,y.offset=G.cy):y.flip=y.offset,P=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(E?P=P.translate(y.x,y.y):(y.x!=null&&(P.e=y.x),y.y!=null&&(P.f=y.y)));return this.attr("transform",P)}}),n.extend(n.FX,{transform:function(y,E){var $=this.target(),P,G;return typeof y!="object"?(P=new n.Matrix($).extract(),typeof y=="string"?P[y]:P):(E=!!E||!!y.relative,y.a!=null?P=new n.Matrix(y):y.rotation!=null?(A(y,$),P=new n.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?(A(y,$),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,P=new n.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?(A(y,$),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,P=new n.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?$.bbox()["c"+y.flip]:y.offset:y.offset==null?(G=$.bbox(),y.flip=G.cx,y.offset=G.cy):y.flip=y.offset,P=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(P=new n.Translate(y.x,y.y)),P?(P.relative=E,this.last().transforms.push(P),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(E){var $=E.trim().split("(");return[$[0],$[1].split(n.regex.delimiter).map(function(P){return parseFloat(P)})]}).reduce(function(E,$){return $[0]=="matrix"?E.multiply(M($[1])):E[$[0]].apply(E,$[1])},new n.Matrix);return y},toParent:function(y){if(this==y)return this;var E=this.screenCTM(),$=y.screenCTM().inverse();return this.addTo(y).untransform().transform($.multiply(E)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(y,E){if(arguments.length>1&&typeof E!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var $=0,P=this.arguments.length;$<P;++$)this[this.arguments[$]]=y[$];else if(typeof y=="object")for(var $=0,P=this.arguments.length;$<P;++$)this[this.arguments[$]]=y[this.arguments[$]];this.inversed=!1,E===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var E=[],$=0,P=this.arguments.length;$<P;++$)E.push(this[this.arguments[$]]);var G=this._undo||new n.Matrix;return G=new n.Matrix().morph(n.Matrix.prototype[this.method].apply(G,E)).at(y),this.inversed?G.inverse():G},undo:function(y){for(var E=0,$=this.arguments.length;E<$;++E)y[this.arguments[E]]=typeof this[this.arguments[E]]>"u"?0:y[this.arguments[E]];return y.cx=this.cx,y.cy=this.cy,this._undo=new n[w(this.method)](y,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,E){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,E){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var E=new n.Matrix().rotate(new n.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?E.inverse():E},undo:function(y){return this._undo=y,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,E){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,E){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(y,E){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(E in y)this.style(E,y[E]);else if(n.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function($){return!!$}).map(function($){return $.split(/\s*:\s*/)});E=y.pop();)this.style(E[0],E[1]);else return this.node.style[b(y)];else this.node.style[b(y)]=E===null||n.regex.isBlank.test(E)?"":E;return this}}),n.Parent=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(y){return n.adopt(y)})},add:function(y,E){return E==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[E]&&this.node.insertBefore(y.node,this.node.childNodes[E]),this},put:function(y,E){return this.add(y,E),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return n.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,E){var $,P,G=this.children();for($=0,P=G.length;$<P;$++)G[$]instanceof n.Element&&y.apply(G[$],[$,G]),E&&G[$]instanceof n.Container&&G[$].each(y,E);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(y,E){return E===0||this instanceof n.Defs||this.node==n.parser.draw?this:(y=y||(this instanceof n.Doc?this:this.parent(n.Parent)),E=E||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(y,E-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,E){return this.ungroup(y,E)}}),n.Container=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(y){var E=[0,0,0,0],$,P,G,Q,se,ie,ye,Pe=1,Ie=1,we=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof n.Element){for(ie=y,ye=y,se=(y.attr("viewBox")||"").match(we),y.bbox,G=new n.Number(y.width()),Q=new n.Number(y.height());G.unit=="%";)Pe*=G.value,G=new n.Number(ie instanceof n.Doc?ie.parent().offsetWidth:ie.parent().width()),ie=ie.parent();for(;Q.unit=="%";)Ie*=Q.value,Q=new n.Number(ye instanceof n.Doc?ye.parent().offsetHeight:ye.parent().height()),ye=ye.parent();this.x=0,this.y=0,this.width=G*Pe,this.height=Q*Ie,this.zoom=1,se&&($=parseFloat(se[0]),P=parseFloat(se[1]),G=parseFloat(se[2]),Q=parseFloat(se[3]),this.zoom=this.width/this.height>G/Q?this.height/Q:this.width/G,this.x=$,this.y=P,this.width=G,this.height=Q)}else y=typeof y=="string"?y.match(we).map(function(De){return parseFloat(De)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):E,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,E,$,P){return this.destination=new n.ViewBox(y,E,$,P),this},at:function(y){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:n.Container,construct:{viewbox:function(y,E,$,P){return arguments.length==0?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(y,E,$,P))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){n.Element.prototype[y]=function(E){return E==null?n.off(this,y):n.on(this,y,E),this}}),n.listenerId=0,n.on=function(y,E,$,P,G){var Q=$.bind(P||y),se=y instanceof n.Element?y.node:y;se.instance=se.instance||{_events:{}};var ie=se.instance._events;$._svgjsListenerId||($._svgjsListenerId=++n.listenerId),E.split(n.regex.delimiter).forEach(function(ye){var Pe=ye.split(".")[0],Ie=ye.split(".")[1]||"*";ie[Pe]=ie[Pe]||{},ie[Pe][Ie]=ie[Pe][Ie]||{},ie[Pe][Ie][$._svgjsListenerId]=Q,se.addEventListener(Pe,Q,G||!1)})},n.off=function(y,E,$,P){var G=y instanceof n.Element?y.node:y;if(G.instance&&!(typeof $=="function"&&($=$._svgjsListenerId,!$))){var Q=G.instance._events;(E||"").split(n.regex.delimiter).forEach(function(se){var ie=se&&se.split(".")[0],ye=se&&se.split(".")[1],Pe,Ie;if($)Q[ie]&&Q[ie][ye||"*"]&&(G.removeEventListener(ie,Q[ie][ye||"*"][$],P||!1),delete Q[ie][ye||"*"][$]);else if(ie&&ye){if(Q[ie]&&Q[ie][ye]){for(Ie in Q[ie][ye])n.off(G,[ie,ye].join("."),Ie);delete Q[ie][ye]}}else if(ye)for(se in Q)for(Pe in Q[se])ye===Pe&&n.off(G,[se,ye].join("."));else if(ie){if(Q[ie]){for(Pe in Q[ie])n.off(G,[ie,Pe].join("."));delete Q[ie]}}else{for(se in Q)n.off(G,se);G.instance._events={}}})}},n.extend(n.Element,{on:function(y,E,$,P){return n.on(this,y,E,$,P),this},off:function(y,E){return n.off(this.node,y,E),this},fire:function(y,E){return y instanceof i.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new n.CustomEvent(y,{detail:E,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),E=this.transform();return y.x+=E.x,y.x2+=E.x,y.cx+=E.x,y.y+=E.y,y.y2+=E.y,y.cy+=E.y,y}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(y){y&&(y=typeof y=="string"?r.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,n.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(y):this._defs=new n.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(y){this.writeDataToDom();var E=this.node,$=R(E.cloneNode(!0));return y?(y.node||y).appendChild($.node):E.parentNode.insertBefore($.node,E.nextSibling),$}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,E=this.parent();return E.removeElement(this).add(this,y),E instanceof n.Doc&&E.node.appendChild(E.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof n.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var E=this.position();return this.parent().add(y,E),this},after:function(y){y.remove();var E=this.position();return this.parent().add(y,E+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(y){return this.masker=y instanceof n.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(y){return this.clipper=y instanceof n.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(y){this.constructor.call(this,n.create(y+"Gradient")),this.type=y},inherit:n.Container,extend:{at:function(y,E,$){return this.put(new n.Stop).update(y,E,$)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,E,$){return y=="transform"&&(y="gradientTransform"),n.Container.prototype.attr.call(this,y,E,$)}},construct:{gradient:function(y,E){return this.defs().gradient(y,E)}}}),n.extend(n.Gradient,n.FX,{from:function(y,E){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(y),fy:new n.Number(E)}):this.attr({x1:new n.Number(y),y1:new n.Number(E)})},to:function(y,E){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(y),cy:new n.Number(E)}):this.attr({x2:new n.Number(y),y2:new n.Number(E)})}}),n.extend(n.Defs,{gradient:function(y,E){return this.put(new n.Gradient(y)).update(E)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof n.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new n.Number(y.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,E,$){return y=="transform"&&(y="patternTransform"),n.Container.prototype.attr.call(this,y,E,$)}},construct:{pattern:function(y,E,$){return this.defs().pattern(y,E,$)}}}),n.extend(n.Defs,{pattern:function(y,E,$){return this.put(new n.Pattern).update($).attr({x:0,y:0,width:y,height:E,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element}),n.Bare=n.invent({create:function(y,E){if(this.constructor.call(this,n.create(y)),E)for(var $ in E.prototype)typeof E.prototype[$]=="function"&&(this[$]=E.prototype[$])},inherit:n.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(r.createTextNode(y)),this}}}),n.extend(n.Parent,{element:function(y,E){return this.put(new n.Bare(y,E))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(y,E){return this.attr("href",(E||"")+"#"+y,n.xlink)}},construct:{use:function(y,E){return this.put(new n.Use).element(y,E)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(y,E){return this.put(new n.Rect).size(y,E)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(y){return this.put(new n.Circle).rx(new n.Number(y).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(y,E){return this.put(new n.Ellipse).size(y,E).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),n.extend(n.Circle,n.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new n.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new n.Number(y).divide(2))},size:function(y,E){var $=x(this,y,E);return this.rx(new n.Number($.width).divide(2)).ry(new n.Number($.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,E,$,P){return y==null?this.array():(typeof E<"u"?y={x1:y,y1:E,x2:$,y2:P}:y=new n.PointArray(y).toLine(),this.attr(y))},move:function(y,E){return this.attr(this.array().move(y,E).toLine())},size:function(y,E){var $=x(this,y,E);return this.attr(this.array().size($.width,$.height).toLine())}},construct:{line:function(y,E,$,P){return n.Line.prototype.plot.apply(this.put(new n.Line),y!=null?[y,E,$,P]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(y){return this.put(new n.Polyline).plot(y||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(y){return this.put(new n.Polygon).plot(y||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new n.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,E){return this.attr("points",this.array().move(y,E))},size:function(y,E){var $=x(this,y,E);return this.attr("points",this.array().size($.width,$.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var E=this.bbox();return y==null?E.width:this.size(y,E.height)},height:function(y){var E=this.bbox();return y==null?E.height:this.size(E.width,y)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new n.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,E){return this.attr("d",this.array().move(y,E))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,E){var $=x(this,y,E);return this.attr("d",this.array().size($.width,$.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new n.Path).plot(y||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(y){if(!y)return this;var E=this,$=new i.Image;return n.on($,"load",function(){n.off($);var P=E.parent(n.Pattern);P!==null&&(E.width()==0&&E.height()==0&&E.size($.width,$.height),P&&P.width()==0&&P.height()==0&&P.size(E.width(),E.height()),typeof E._loaded=="function"&&E._loaded.call(E,{width:$.width,height:$.height,ratio:$.width/$.height,url:y}))}),n.on($,"error",function(P){n.off($),typeof E._error=="function"&&E._error.call(E,P)}),this.attr("href",$.src=this.src=y,n.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,E,$){return this.put(new n.Image).load(y).size(E||0,$||E||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var E=this.attr("y"),$=typeof E=="number"?E-this.bbox().y:0;return y==null?typeof E=="number"?E-$:E:this.attr("y",typeof y.valueOf()=="number"?y+$:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",E=this.node.childNodes,$=0,P=E.length;$<P;++$)$!=0&&E[$].nodeType!=3&&n.adopt(E[$]).dom.newLined==!0&&(y+=`
`),y+=E[$].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var $=0,G=y.length;$<G;$++)this.tspan(y[$]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new n.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,E=n.utils.map(n.utils.filterSVGElements(y.childNodes),function($){return n.adopt($)});return new n.Set(E)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var E=this,$=0,P=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(E.textPath()||this.attr("x",E.attr("x")),this.text()==`
`?$+=P:(this.attr("dy",P+$),$=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new n.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new n.Text).text(y)},plain:function(y){return this.put(new n.Text).plain(y)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(n.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(r.createTextNode(y)),this},tspan:function(y){var E=(this.textPath&&this.textPath()||this).node,$=new n.Tspan;return this._build===!1&&this.clear(),E.appendChild($.node),$.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(y){for(var E=new n.TextPath,$=this.doc().defs().path(y);this.node.hasChildNodes();)E.node.appendChild(this.node.firstChild);return this.node.appendChild(E.node),E.attr("href","#"+$,n.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var E=this.track(),$=null;return E&&($=E.plot(y)),y==null?$:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(y){return this.attr("href",y,n.xlink)},show:function(y){return this.attr("show",y,n.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new n.A).to(y)}}}),n.extend(n.Element,{linkTo:function(y){var E=new n.A;return typeof y=="function"?y.call(E,E):E.to(y),this.parent().put(E).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,E){return this.attr("refX",y).attr("refY",E)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,E,$){return this.defs().marker(y,E,$)}}}),n.extend(n.Defs,{marker:function(y,E,$){return this.put(new n.Marker).size(y,E).ref(y/2,E/2).viewbox(0,0,y,E).attr("orient","auto").update($)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(y,E,$,P){var G=["marker"];return y!="all"&&G.push(y),G=G.join("-"),y=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(E,$,P),this.attr(G,y)}});var h={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,E){return E=="color"?y:y+"-"+E}};["fill","stroke"].forEach(function(y){var E,$={};$[y]=function(P){if(typeof P>"u")return this;if(typeof P=="string"||n.Color.isRgb(P)||P&&typeof P.fill=="function")this.attr(y,P);else for(E=h[y].length-1;E>=0;E--)P[h[y][E]]!=null&&this.attr(h.prefix(y,h[y][E]),P[h[y][E]]);return this},n.extend(n.Element,n.FX,$)}),n.extend(n.Element,n.FX,{rotate:function(y,E,$){return this.transform({rotation:y,cx:E,cy:$})},skew:function(y,E,$,P){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:E,cy:$}):this.transform({skewX:y,skewY:E,cx:$,cy:P})},scale:function(y,E,$,P){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:E,cy:$}):this.transform({scaleX:y,scaleY:E,cx:$,cy:P})},translate:function(y,E){return this.transform({x:y,y:E})},flip:function(y,E){return E=typeof y=="number"?y:E,this.transform({flip:y||"both",offset:E})},matrix:function(y){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new n.Number(y).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(y){return this.y(new n.Number(y).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(y,E){return this.dx(y).dy(E)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(y,E){var $=(this._target||this).type;return $=="radial"||$=="circle"?this.attr("r",new n.Number(y)):this.rx(y).ry(E??y)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(y,E){if(typeof y=="object")for(E in y)this.font(E,y[E]);return y=="leading"?this.leading(E):y=="anchor"?this.attr("text-anchor",E):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,E):this.attr(y,E)}}),n.Set=n.invent({create:function(y){y instanceof n.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,E,$=[].slice.call(arguments);for(y=0,E=$.length;y<E;y++)this.members.push($[y]);return this},remove:function(y){var E=this.index(y);return E>-1&&this.members.splice(E,1),this},each:function(y){for(var E=0,$=this.members.length;E<$;E++)y.apply(this.members[E],[E,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new n.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new n.Set(y)}}}),n.FX.Set=n.invent({create:function(y){this.set=y}}),n.Set.inherit=function(){var y,E=[];for(var y in n.Shape.prototype)typeof n.Shape.prototype[y]=="function"&&typeof n.Set.prototype[y]!="function"&&E.push(y);E.forEach(function($){n.Set.prototype[$]=function(){for(var P=0,G=this.members.length;P<G;P++)this.members[P]&&typeof this.members[P][$]=="function"&&this.members[P][$].apply(this.members[P],arguments);return $=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),E=[];for(var y in n.FX.prototype)typeof n.FX.prototype[y]=="function"&&typeof n.FX.Set.prototype[y]!="function"&&E.push(y);E.forEach(function($){n.FX.Set.prototype[$]=function(){for(var P=0,G=this.set.members.length;P<G;P++)this.set.members[P].fx[$].apply(this.set.members[P].fx,arguments);return this}})},n.extend(n.Element,{data:function(y,E,$){if(typeof y=="object")for(E in y)this.data(E,y[E]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,E===null?null:$===!0||typeof E=="string"||typeof E=="number"?E:JSON.stringify(E));return this}}),n.extend(n.Element,{remember:function(y,E){if(typeof arguments[0]=="object")for(var E in y)this.remember(E,y[E]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=E}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(y){var E=r.getElementById(k(y)||y);return n.adopt(E)},n.select=function(y,E){return new n.Set(n.utils.map((E||r).querySelectorAll(y),function($){return n.adopt($)}))},n.extend(n.Parent,{select:function(y){return n.select(y,this.node)}});function p(y,E,$,P){return $+P.replace(n.regex.dots," .")}function f(y){for(var E=y.slice(0),$=E.length;$--;)Array.isArray(E[$])&&(E[$]=f(E[$]));return E}function m(y,E){return y instanceof E}function g(y,E){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,E)}function b(y){return y.toLowerCase().replace(/-(.)/g,function(E,$){return $.toUpperCase()})}function w(y){return y.charAt(0).toUpperCase()+y.slice(1)}function S(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function T(y){var E=y.toString(16);return E.length==1?"0"+E:E}function x(y,E,$){if(E==null||$==null){var P=y.bbox();E==null?E=P.width/P.height*$:$==null&&($=P.height/P.width*E)}return{width:E,height:$}}function _(y,E,$){return{x:E*y.a+$*y.c+0,y:E*y.b+$*y.d+0}}function M(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function I(y){return y instanceof n.Matrix||(y=new n.Matrix(y)),y}function A(y,E){y.cx=y.cx==null?E.bbox().cx:y.cx,y.cy=y.cy==null?E.bbox().cy:y.cy}function C(y){for(var E=0,$=y.length,P="";E<$;E++)P+=y[E][0],y[E][1]!=null&&(P+=y[E][1],y[E][2]!=null&&(P+=" ",P+=y[E][2],y[E][3]!=null&&(P+=" ",P+=y[E][3],P+=" ",P+=y[E][4],y[E][5]!=null&&(P+=" ",P+=y[E][5],P+=" ",P+=y[E][6],y[E][7]!=null&&(P+=" ",P+=y[E][7])))));return P+" "}function R(y){for(var E=y.childNodes.length-1;E>=0;E--)y.childNodes[E]instanceof i.SVGElement&&R(y.childNodes[E]);return n.adopt(y).id(n.eid(y.nodeName))}function O(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function k(y){var E=(y||"").toString().match(n.regex.reference);if(E)return E[1]}function L(y){return Math.abs(y)>1e-37?y:0}var V="abcdef".split("");if(typeof i.CustomEvent!="function"){var J=function(y,E){E=E||{bubbles:!1,cancelable:!1,detail:void 0};var $=r.createEvent("CustomEvent");return $.initCustomEvent(y,E.bubbles,E.cancelable,E.detail),$};J.prototype=i.Event.prototype,n.CustomEvent=J}else n.CustomEvent=i.CustomEvent;return function(y){for(var E=0,$=["moz","webkit"],P=0;P<$.length&&!i.requestAnimationFrame;++P)y.requestAnimationFrame=y[$[P]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[$[P]+"CancelAnimationFrame"]||y[$[P]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(G){var Q=new Date().getTime(),se=Math.max(0,16-(Q-E)),ie=y.setTimeout(function(){G(Q+se)},se);return E=Q+se,ie},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(i),n})}(UI)),UI.exports}var Pat=Oat();const s0=$x(Pat);class Lat extends Kr{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,i){return i.getGraphicIcon(t)}getGraphicSymbol(t,i){return i.getGraphicSymbol(t)}makeRenderer(t,i,r=!1){switch(t.type){case this.SIMPLE:return new Aat(t,i);case this.CLASS_BREAKS:return new Cat(t,i,r);case this.UNIQUE_VALUE:return new $at(t,i,r);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const i=s0(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),r={svgcode:"",imgHeight:"",imgWidth:""};if(t){const s=await this.renderSymbologyImage(t);if(s){r.svgcode=s;const n=document.createElement("span");n.innerHTML=s;const o=n.firstElementChild?.lastElementChild;r.imgHeight=o?.getAttribute("height")||"",r.imgWidth=o?.getAttribute("width")||""}else r.svgcode=i.svg()}else r.svgcode=i.svg();return r}listToSymbology(t,i){return i.map(({text:s,image:n})=>{const o={name:s,image:n,svgcode:""};return t(n).then(a=>{o.svgcode=a}),o})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,i=null){i===null&&(i=s0(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const r=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(r===t)return"";const{loader:s}=await this.svgDrawImage(i,r);return i.viewbox(0,0,s.width,s.height),i.svg()}async renderSymbologyIcon(t,i=null){if(i===null){const n=document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(n),i=s0(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const r=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:s}=await this.svgDrawImage(i,r);return s.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(s,this.CONTENT_IMAGE_SIZE),i.svg()}generatePlaceholderSymbology(t,i="#000"){const r=s0(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return r.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(i),r.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).tspan(t[0].toUpperCase()).addClass("grid-icons").attr({dy:"29.900000000000002",x:"7.6875"}),{name:t,svgcode:r.svg()}}async generateBlankSymbology(){return s0(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const i=this,r=1.33333,s=document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(s);const n=s0(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:b}){return n.path(b).size(g*r)},circle({size:g}){return n.circle(g*r)},cross({size:g}){return n.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*r)},x({size:g}){return n.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*r)},triangle({size:g}){return n.path("M 20,20 L 10,0 0,20 Z").size(g*r)},diamond({size:g}){return n.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*r)},square({size:g}){return n.path("M 0,0 20,0 20,20 0,20 Z").size(g*r)}},a={[yo.SOLID]:"none",[yo.NONE]:"none",[yo.DASH]:"5.333,4",[yo.DOT]:"1.333,4",[yo.DASHDOT]:"5.333,4,1.333,4",[yo.LONGDASH]:"10.666,4",[yo.LONGDASHDOT]:"10.666,4,1.333,4",[yo.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[yo.SHORTDOT]:"1.333,1.333",[yo.SHORTDASH]:"5.333,1.333",[yo.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[yo.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},h={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,b)=>n.pattern(5,5,S=>S.line(0,5/2,5,5/2)).stroke(b),vertical:(g,b)=>n.pattern(5,5,S=>S.line(5/2,0,5/2,5)).stroke(b),"forward-diagonal":(g,b)=>n.pattern(5,5,S=>{S.line(0,0,5,5).stroke(b),S.line(0,0,5,5).move(0,5).stroke(b),S.line(0,0,5,5).move(5,0).stroke(b)}),"backward-diagonal":(g,b)=>n.pattern(5,5,S=>{S.line(5,0,0,5).stroke(b),S.line(5,0,0,5).move(5/2,5/2).stroke(b),S.line(5,0,0,5).move(-5/2,-5/2).stroke(b)}),cross:(g,b)=>n.pattern(5,5,S=>{S.line(5/2,0,5/2,5).stroke(b),S.line(0,5/2,5,5/2).stroke(b)}),"diagonal-cross":(g,b)=>n.pattern(7,7,S=>{S.line(0,0,7,7).stroke(b),S.line(7,0,0,7).stroke(b)})},p={"simple-marker"(){const g=m(t.color);t.outline=t.outline||u;const b=m(t.outline.color),w=f({color:b.colour,opacity:b.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),S=o[t.style](t).fill({color:g.colour,opacity:g.opacity}).stroke(w).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(t.angle||0);i.fitInto(S,i.CONTENT_SIZE)},"simple-line"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),w=i.CONTENT_PADDING,S=i.CONTAINER_SIZE-i.CONTENT_PADDING;n.line(w,w,S,S).stroke(b)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity}),w=h[t.style](g,b);t.outline=t.outline||u;const S=m(t.outline.color),T=f({color:S.colour,opacity:S.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});n.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(w).stroke(T)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,b=t.width*t.xscale,w=t.height*t.yscale;t.outline=t.outline||u;const S=m(t.outline.color),T=f({color:S.colour,opacity:S.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return i.$iApi.geo.shared.convertImagetoDataURL(g).then(_=>{const M=n.pattern(b,w,I=>I.image(_,b,w));n.rect(i.CONTENT_SIZE,i.CONTENT_SIZE).center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).fill(M).stroke(T)})},"picture-marker"(){const g=t.source,b=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:t.url;return i.$iApi.geo.shared.convertImagetoDataURL(b).then(S=>i.svgDrawImage(n,S)).then(({image:S})=>{S.center(i.CONTAINER_CENTER,i.CONTAINER_CENTER).rotate(t.angle||0),i.fitInto(S,i.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(p[t.type]()),document.body.removeChild(s),n.svg()}catch(g){return console.error(g),this.generateBlankSymbology()}function f(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}async svgDrawImage(t,i,r=0,s=0,n=!0){return new Promise((o,a)=>{const l=t.image(i,r,s,n).loaded(u=>o({image:l,loader:u})).error(u=>{a(u),console.error(u)})})}fitInto(t,i){const r=t.node.getBoundingClientRect(),s=i/Math.max(r.width,r.height);s<1&&t.scale(s)}rendererToLegend(t){let i;const r=t.symbolUnits.slice(0);if(t.defaultUnit&&r.push(t.defaultUnit),t.falseRenderer)i=r.map(s=>[s]);else{const s=new Map;r.forEach(n=>{const o=s.get(n.label);o?o.push(n):s.set(n.label,[n])}),i=[],s.forEach(n=>i.push(n))}return i.map(s=>{const n=s[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:n.label||"",definitionClause:s.length===1?n.definitionClause:`(${s.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(n.symbol).then(a=>{o.svgcode=a,s.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const i={query:{f:"json"}},r={layers:[]},[s,n]=await fg(Ne(`${t}/legend`,i));return n?n.data?n.data:(console.error(`Error loading legend data for ${t}`),r):(console.error(`Error loading legend for ${t}`,s),r)}mapServerLegendToRenderer(t,i){const r=t.layers.find(n=>n.layerId===i);let s;if(typeof r<"u")return s={type:"uniqueValue",field:"fakefield",uniqueValueInfos:r.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))},this.makeRenderer(b1(s),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const i=t.layers.map(s=>s.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))),r={type:"uniqueValue",field1:"fakefield",uniqueValueInfos:[].concat(...i)};return this.makeRenderer(b1(r),[],!0)}async mapServerToLocalLegend(t,i=void 0){const r=await this.getMapServerLegend(t);let s,n;return typeof i>"u"?(n=0,s=this.mapServerLegendToRendererAll(r)):(n=parseInt(i),s=this.mapServerLegendToRenderer(r,n)),this.rendererToLegend(s)}}class Nat extends Kr{constructor(t){super(t)}async arcGisServerQueryIds(t){if(!(t.filterGeometry||t.filterSql))return console.error("arcGisServerQueryIds called without any filter"),[];const i=new Dr;i.returnGeometry=!1,t.filterSql&&(i.where=t.filterSql),t.filterGeometry&&(i.geometry=await this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),i.spatialRelationship="intersects");const r=await k9(t.url,i);return Array.isArray(r)?r:[]}async geoJsonQuery(t){const i=new Dr;if(i.returnGeometry=!!t.includeGeometry,i.outFields=["*"],t.filterGeometry&&(i.geometry=await this.queryGeometryHelper(t.filterGeometry,!0),i.spatialRelationship="intersects"),t.filterSql&&(i.where=t.filterSql),t.filterOIDs&&(i.objectIds=t.filterOIDs),await t.layer.loadPromise(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(i)).features.map((s,n)=>{let o;return i.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(s.geometry,`queryResult${n}`):o=new If,new su(o,"",s.attributes)})}async queryGeometryHelper(t,i,r,s){return!i&&t.type===Vt.EXTENT&&s&&!s.isEqual(t.sr)&&!(r&&r>2e7&&t.sr.wkid===3978&&s.wkid===4326)?(await this.$iApi.geo.proj.projectExtent(s,t)).toESRI():t.toESRI()}makeClickBuffer(t,i=5){const r=this.$iApi.geo.map,s=r.getExtent(),n=i*(s.xmax-s.xmin)/r.getPixelWidth();return new nr("ze_buffer",[t.x-n,t.y-n],[t.x+n,t.y+n],t.sr)}}class kat extends Kr{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=s1.geom,this.proj=s1.proj,this.shared=s1.sharedUtils,this.map=new Aot(t),this.layer=new oat(t),this.attributes=new Eat(t),this.query=new Nat(t),this.symbology=new Lat(t),Array.isArray(Kt.request.interceptors)||(Kt.request.interceptors=[]),Kt.request.interceptors.push({before:i=>{i.url.includes("?blankTile=false")&&(i.url=i.url.replace("?blankTile=false","?blankTile=true"))}})}set proxy(t){Kt.request.proxyUrl=t}get proxy(){return Kt.request.proxyUrl||""}}const Dat=Object.assign({"../fixtures/appbar/index.ts":()=>ce(()=>import("./index-B-hGt9u3.js"),__vite__mapDeps([248,1,249]),import.meta.url),"../fixtures/areas-of-interest/index.ts":()=>ce(()=>import("./index-BxcF2rm5.js"),__vite__mapDeps([250,251,252,1]),import.meta.url),"../fixtures/basemap/index.ts":()=>ce(()=>import("./index-CeG679i5.js"),__vite__mapDeps([253,1]),import.meta.url),"../fixtures/crosshairs/index.ts":()=>ce(()=>import("./index-DHebMCZa.js"),__vite__mapDeps([254,1,255]),import.meta.url),"../fixtures/details/index.ts":()=>ce(()=>import("./index-qyNAGExa.js"),__vite__mapDeps([256,1,257]),import.meta.url),"../fixtures/export-footnote/index.ts":()=>ce(()=>import("./index-CvQFTMTb.js"),__vite__mapDeps([258,259,1]),import.meta.url),"../fixtures/export-legend/index.ts":()=>ce(()=>import("./index-KrSzqvbR.js"),__vite__mapDeps([260,259,1]),import.meta.url),"../fixtures/export-map/index.ts":()=>ce(()=>import("./index-BEVSVFaz.js"),__vite__mapDeps([261,259,1]),import.meta.url),"../fixtures/export-northarrow/index.ts":()=>ce(()=>import("./index-DhojNK45.js"),__vite__mapDeps([262,259,1]),import.meta.url),"../fixtures/export-scalebar/index.ts":()=>ce(()=>import("./index-L--U6_kC.js"),__vite__mapDeps([263,259,1]),import.meta.url),"../fixtures/export-timestamp/index.ts":()=>ce(()=>import("./index-Dha6vOU_.js"),__vite__mapDeps([264,259,1]),import.meta.url),"../fixtures/export-title/index.ts":()=>ce(()=>import("./index-3Vn9gKsB.js"),__vite__mapDeps([265,259,1]),import.meta.url),"../fixtures/export/index.ts":()=>ce(()=>import("./index-DVMrXndI.js"),__vite__mapDeps([266,1,267]),import.meta.url),"../fixtures/extentguard/index.ts":()=>ce(()=>import("./index-DCCDwarA.js"),__vite__mapDeps([268,1]),import.meta.url),"../fixtures/gazebo/index.ts":()=>ce(()=>import("./index-BBwzOXRO.js"),__vite__mapDeps([269,1]),import.meta.url),"../fixtures/geosearch/index.ts":()=>ce(()=>import("./index-BnpHkGff.js"),__vite__mapDeps([270,1]),import.meta.url),"../fixtures/grid/index.ts":()=>ce(()=>import("./index-BqB_LaSy.js"),__vite__mapDeps([271,1,272]),import.meta.url),"../fixtures/help/index.ts":()=>ce(()=>import("./index-sDErnGaa.js"),__vite__mapDeps([273,1]),import.meta.url),"../fixtures/hilight/index.ts":()=>ce(()=>import("./index-BT2i9fnH.js"),__vite__mapDeps([274,257,1]),import.meta.url),"../fixtures/layer-reorder/index.ts":()=>ce(()=>import("./index-rzM0Qtgg.js"),__vite__mapDeps([275,1]),import.meta.url),"../fixtures/legend/index.ts":()=>ce(()=>import("./index-BcO6TbIC.js"),__vite__mapDeps([276,1]),import.meta.url),"../fixtures/mapnav/index.ts":()=>ce(()=>import("./index-PY8PCBWD.js"),__vite__mapDeps([277,1,278]),import.meta.url),"../fixtures/metadata/index.ts":()=>ce(()=>import("./index-Bxc3uaOz.js"),__vite__mapDeps([279,1]),import.meta.url),"../fixtures/northarrow/index.ts":()=>ce(()=>import("./index-CokotBHm.js"),__vite__mapDeps([280,1]),import.meta.url),"../fixtures/overviewmap/index.ts":()=>ce(()=>import("./index-DrkQhNIu.js"),__vite__mapDeps([281,1,282]),import.meta.url),"../fixtures/panguard/index.ts":()=>ce(()=>import("./index-FoybaFA8.js"),__vite__mapDeps([283,1,284]),import.meta.url),"../fixtures/scrollguard/index.ts":()=>ce(()=>import("./index-CUHsIO2I.js"),__vite__mapDeps([285,1,286]),import.meta.url),"../fixtures/settings/index.ts":()=>ce(()=>import("./index-BHmFUj4Y.js"),__vite__mapDeps([287,1]),import.meta.url),"../fixtures/snowman/index.ts":()=>ce(()=>import("./index-Cum5qKUJ.js"),__vite__mapDeps([288,1]),import.meta.url),"../fixtures/wizard/index.ts":()=>ce(()=>import("./index-DKwQRnDJ.js"),__vite__mapDeps([289,1]),import.meta.url)});class Fat extends Kr{constructor(t){super(t)}exists(t){return t in Va(this.$vApp.$pinia).items}async add(t,i){let r;if(t in Va(this.$vApp.$pinia).items)return this.get(t);if(i){if(typeof i!="function")throw new Error("malformed fixture constructor");r=Zj.updateBaseToInstance(new i,t,this.$iApi)}else{const s=(await Dat[`../fixtures/${t}/index.ts`]()).default;r=new s(t,this.$iApi)}return Va(this.$vApp.$pinia).addFixture(r),this.$iApi.event.emit(ot.FIXTURE_ADDED,r),this.$iApi.geo.map.created&&r.initialized?.(),r}remove(t){const i=this.get(t);if(!i)throw new Error(`Could not find fixture ${t} for removal`);return Va(this.$vApp.$pinia).removeFixture(i),this.$iApi.event.emit(ot.FIXTURE_REMOVED,i),i}flush(){const t=Va(this.$vApp.$pinia);Object.keys(t.items).forEach(r=>{const s=this.get(r);s?.persist&&typeof s?.removed=="function"?s.removed():s&&this.remove(r)})}restore(){const t=Va(this.$vApp.$pinia);Object.keys(t.items).forEach(r=>{const s=t.items[r];typeof s.added=="function"&&s.added(),this.$iApi.geo.map.created&&typeof s.initialized=="function"&&s.initialized()})}get(t){const i=[];typeof t=="string"?i.push(t):Array.isArray(t)?i.push(...t):i.push(t.id);const r=i.map(s=>{const n=Va(this.$vApp.$pinia).items[s];if(n)return n});return r.length===1?r[0]:r}isLoaded(t){const i=Va(this.$vApp.$pinia),r=Array.isArray(t)?t:[t];r.forEach(n=>{i.loadPromises[n]===void 0&&i.addLoadPromise(n)});const s=i.getLoadPromises(r);return Array.isArray(t)?Promise.all(s):s[0]}addDefaultFixtures(t){(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","panguard","scrollguard","settings","wizard"]);const i=Eo(this.$vApp.$pinia);return i.startingFixtures=t,Promise.all(t.map(r=>this.add(r)))}}class Zj extends Kr{static updateBaseToInstance(t,i,r){const s=new Zj(i,r);return Object.defineProperties(t,{id:{value:i},$iApi:{value:r},persist:{value:t.persist??!0},$vApp:{get(){return s.$vApp}},remove:{value:s.remove},extend:{value:s.extend},config:{get(){return s.config}},mount:{value:s.mount}}),t}id;persist;constructor(t,i){super(i),this.id=t,this.persist=!0}remove(){return this.$iApi.fixture.remove(this),this}extend(t,i={}){const r=Xt({extends:t,iApi:this.$iApi,data(){return{...i}}}),s=hg(r),{el:n}=this.mount(r,{props:{...i.propsData},app:s});return n}mount(t,{props:i,children:r,element:s,app:n}={}){let o=s,a=Jl(t,i,r);return n&&n._context&&(a.appContext=n._context),o?w2(a,o):w2(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&w2(null,o),o=null,a=null},el:o}}get config(){return Eo(this.$vApp.$pinia).config.fixtures[this.id]}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){const t={},i=(r,s=void 0)=>{if(r.fixtures&&r.fixtures[this.id]!==void 0){let n=r.id;s!==void 0&&(n=`${s.id}-${r.index}`),t[n]=r.fixtures[this.id]}r.sublayers&&r.sublayers.forEach(n=>i(n,r))};return this.$iApi.geo.layer.allLayers().forEach(r=>i(r.config)),t}handlePanelWidths(t){if(this.config?.panelWidth){const i={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&t.forEach(r=>{i[r]=this.config.panelWidth.default});for(const r in this.config.panelWidth)r!="default"&&(i[r]=this.config.panelWidth[r]);for(const r in i){const s=this.$iApi.panel.get(r);this.$iApi.panel.setStyle(s,{"flex-basis":`${i[r]}px`})}}}handlePanelTeleports(t){if(this.config?.panelTeleport){const i=pg(this.$vApp.$pinia),r=!!this.config.panelTeleport.target;t.forEach(s=>{i.items[s].teleport=r?this.config.panelTeleport:this.config.panelTeleport[s],i.items[s].style.width="100%"})}}}class jat extends Kr{panelStore=pg(this.$vApp.$pinia);updateHTML(t,i,r){const s=this.get(t),n=r?s.screens[r]:Object.values(s.screens)[0];if(rhe(n))for(const o in i)n[o].innerHTML=i[o]instanceof HTMLElement?i[o].outerHTML:i[o];else console.error("Screen must be an HTML object")}registerHTMLConfig(t){for(const r in t.content)if(typeof t.content[r]=="string"){const s=document.createElement("div");s.innerHTML=t.content[r],t.content[r]=s}const i={};return i[t.id]={screens:{},style:t.style??{width:"350px"},alertName:t.alertName},i[t.id].screens[t.id]=t.content,i}registerHTML(t){const i=this.get(t.id);if(i)return console.error("panel already exist"),i;const r=this.registerHTMLConfig(t);return this.register(r,t.options)}register(t,i){const r=Uat(t)?{[t.id]:t.config}:t;if(i){const n=i.i18n||{},o=this.$iApi.$i18n;Object.entries(n.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(n.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(n.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const s=Object.entries(r).reduce((n,[o,a])=>(n.push(new UE(this.$iApi,o,a)),n),[]);return s.forEach(n=>this.panelStore.registerPanel(n)),s.length===1?s[0]:s.reduce((n,o)=>(n[o.id]=o,n),{})}async isRegistered(t){const i=Array.isArray(t)?t:[t];i.forEach(s=>{this.panelStore.regPromises[s]===void 0&&this.panelStore.addRegPromise(s)});const r=this.panelStore.getRegPromises(i);return Array.isArray(t)?Promise.all(r):r[0]}remove(t){const i=this.get(t);i&&(i.isOpen&&this.close(i),this.panelStore.removePanel(i))}get(t){const i=typeof t=="string"?t:t.id;return this.panelStore.items[i]}open(t){let i,r,s;if(typeof t=="string"||t instanceof UE?i=this.get(t):(i=this.get(t.id),{screen:r,props:s}=t),!i)return i;if(i.isOpen&&!i.isVisible)i.minimize();else if(i.isOpen)return i;return r||(i.route&&!s?{screen:r,props:s}=i.route:r=Object.keys(i.screens).pop()),this.show(i,{screen:r,props:s})?(this.panelStore.openPanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.open",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(ot.PANEL_OPENED,i)):console.error(`Failed to open ${i.id} panel.`),i}get opened(){return this.panelStore.orderedItems.concat(this.panelStore.teleported)}get visible(){return this.panelStore.visible.concat(this.panelStore.teleported)}close(t){const i=this.get(t);return i&&(i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.close",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(ot.PANEL_CLOSED,i),i)}minimize(t){const i=this.get(t);return i&&(i.isPinned&&i.pin(!1),this.panelStore.closePanel(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.minimize",{name:i.alertName?this.$iApi.$i18n.t(i.alertName):i.id})),this.$iApi.event.emit(ot.PANEL_MINIMIZED,i),i)}move(t,i){const r=this.get(t);return r&&(this.panelStore.movePanel(r,i),r)}toggle(t,i){let r;return typeof t=="string"||t instanceof UE?r=this.get(t):r=this.get(t.id),r&&(i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(t):this.close(r)),r)}toggleMinimize(t,i){let r;return typeof t=="string"||t instanceof UE?r=this.get(t):r=this.get(t.id),r&&(i=typeof i<"u"?i:!r.isVisible,i!==r.isVisible&&(i?this.open(r):this.minimize(r)),r)}pin(t,i){const r=this.get(t);return!r||(i=typeof i<"u"?i:!r.isPinned,!r.isPinned&&!i)||(this.panelStore.pinned=i?r:void 0),r}get pinned(){return this.panelStore.pinned||void 0}show(t,i){const r=this.get(t);if(!r)return r;if(r.screens[i.screen]){if(r.screens[i.screen]?.props){const s=Object.keys(r.screens[i.screen]?.props).filter(o=>o!=="panel"),n=i.props?Object.keys(i.props):[];for(let o=0;o<s.length;o++)if(!n.includes(s[o])&&r.screens[i.screen].props[s[o]].required)return}return i.screen in this.$element._context.components||r.registerScreen(i.screen),r.teleport&&(i.props={header:!!r.teleport?.showHeader,...i.props}),this.panelStore.items[r.id].route=i,r}}setStyle(t,i,r=!1){const s=this.get(t);return s&&(this.panelStore.items[s.id].style=r?i:{...s.style,...i},s)}expand(t,i){const r=this.get(t);return r&&(this.panelStore.items[r.id].expanded=i!==void 0?i:!r.expanded,r)}}function Uat(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const Vat={};function Gat(e,t){const i=qr("panel-screen");return Re(),Ji(i,{header:!1,class:"screen-spinner"},{content:Yr(()=>t[0]||(t[0]=[Me("div",{class:"loader"},null,-1)])),_:1})}const Bat=dp(Vat,[["render",Gat],["__scopeId","data-v-d6b3771a"]]),zat=Object.assign({"../fixtures/areas-of-interest/screen.vue":()=>ce(()=>import("./screen-Drm_y4Dn.js"),__vite__mapDeps([290,251,252,1]),import.meta.url),"../fixtures/basemap/screen.vue":()=>ce(()=>import("./screen-BUkjh5GX.js"),__vite__mapDeps([291,1,292]),import.meta.url),"../fixtures/export/screen.vue":()=>ce(()=>import("./screen-l038elOg.js"),__vite__mapDeps([293,267,1]),import.meta.url),"../fixtures/geosearch/screen.vue":()=>ce(()=>import("./screen-LS9IskPR.js"),__vite__mapDeps([294,1,295]),import.meta.url),"../fixtures/grid/screen.vue":()=>ce(()=>import("./screen-S3enEgLd.js"),__vite__mapDeps([296,272,1,297]),import.meta.url),"../fixtures/help/screen.vue":()=>ce(()=>import("./screen-Kk0Q_TzR.js"),__vite__mapDeps([298,299,1,300]),import.meta.url),"../fixtures/layer-reorder/screen.vue":()=>ce(()=>import("./screen-2yFcmf47.js"),__vite__mapDeps([301,302,1,303]),import.meta.url),"../fixtures/legend/screen.vue":()=>ce(()=>import("./screen-S1c-G6A0.js"),__vite__mapDeps([304,1]),import.meta.url),"../fixtures/metadata/screen.vue":()=>ce(()=>import("./screen-DhxlZLDh.js"),__vite__mapDeps([305,299,1,306]),import.meta.url),"../fixtures/settings/screen.vue":()=>ce(()=>import("./screen-DUxGnDN3.js"),__vite__mapDeps([307,302,308,309,1,310]),import.meta.url),"../fixtures/wizard/screen.vue":()=>ce(()=>import("./screen-y0s1N7Nq.js"),__vite__mapDeps([311,302,1,312]),import.meta.url)});class UE extends Kr{id;screens;loadedScreens=[];alertName;teleport;controls;button;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const i=this.screens[t];let r;if(qHe(i)||zHe(i))r=i,this.loadedScreens.push(t);else if(rhe(i))r={template:`<panel-screen :panel="this" :screenId="'${t}'">
                           </panel-screen>`};else{let s;typeof i=="string"?s=zat[`../fixtures/${i}`]():s=i();const n=new Promise((o,a)=>{s.then(l=>{this.loadedScreens.push(t),o(HHe(l)?l.default:l)}),s.catch(l=>a(l))});r=Zhe({loader:()=>n,loadingComponent:Bat,delay:200})}this.$iApi.$element.component(t,r)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,i,r){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:i,style:{},expanded:!1,controls:{expand:!1,...r.controls},...r},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(t){return this.$iApi.panel.move(this,t),this}get isLeftMostPanel(){if(this.$iApi.panel.visible.length>0){for(const t of this.$iApi.panel.visible)if(!t.teleport)return this.id===t.id}return!1}get isRightMostPanel(){if(this.$iApi.panel.visible.length>0){for(let t=this.$iApi.panel.visible.length-1;t>=0;t--)if(!this.$iApi.panel.visible[t].teleport)return this.id===this.$iApi.panel.visible[t].id}return!1}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return!!this.$iApi.panel.pinned&&this.$iApi.panel.pinned.id===this.id}show(t){const i=typeof t=="string"?{screen:t}:t;return this.route=i,this.$iApi.panel.show(this,i),this}setStyles(t,i=!1){return this.$iApi.panel.setStyle(this,t,i),this}expand(t){return this.$iApi.panel.expand(this,t),this}}function qat(e){const t={};(Array.isArray(e)?e:[e]).forEach(o=>{o.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),o.language="en");const a=Hat(o);t[o.language]=a});const r=Object.entries(t).map(o=>{const a=o[1].fixturesEnabled;return delete o[1].fixturesEnabled,a});let s=!1;const n=r.reduce((o,a)=>o.filter(l=>{const u=a.includes(l);return s=s||!u,u}));return s&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),n.push("grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:n,configs:t}}function Hat(e){const t={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0,exposeOid:!1,exposeMeasurements:!0},fixturesEnabled:[]};return Zat(e.services,t),Wat(e.map,t),Yat(e.ui,t),e.plugins&&Kat(e.plugins,t),t}function Wat(e,t){if(e.layers&&e.layers.forEach(i=>{t.layers.unshift(Jat(i))}),e.initialBasemapId&&(t.map.initialBasemapId=e.initialBasemapId),e.components){if(e.components.geoSearch&&(e.components.geoSearch.enabled&&t.fixturesEnabled.push("geosearch"),typeof e.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof e.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),e.components.overviewMap&&e.components.overviewMap.enabled&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.startMinimized=!e.components.overviewMap.initiallyExpanded,t.fixtures.overviewmap.expandFactor=e.components.overviewMap.expandFactor??1.5),e.components.northArrow&&e.components.northArrow.enabled){const i={};e.components.northArrow.arrowIcon&&(i.arrowIcon=e.components.northArrow.arrowIcon),e.components.northArrow.poleIcon&&(i.poleIcon=e.components.northArrow.poleIcon),i&&(t.fixtures.northarrow=i,t.fixturesEnabled.push("northarrow"))}if(e.components.scaleBar&&e.components.scaleBar.enabled){switch(t.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:e?.components?.scaleBar?.scalebarUnit==="english"||e?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},e.components?.mouseInfo?.spatialReference?.wkid){case 4326:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:t.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:t.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}e.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}e.components.basemap&&e.components.basemap.enabled&&t.fixturesEnabled.push("basemap")}e.extentSets&&(t.map.extentSets=[],e.extentSets.forEach(i=>{const r={id:i.id,default:{xmin:i.default.xmin,xmax:i.default.xmax,ymin:i.default.ymin,ymax:i.default.ymax,spatialReference:i.spatialReference}};i.full&&(r.full={xmin:i.full.xmin,xmax:i.full.xmax,ymin:i.full.ymin,ymax:i.full.ymax,spatialReference:i.spatialReference}),i.maximum&&(r.maximum={xmin:i.maximum.xmin,xmax:i.maximum.xmax,ymin:i.maximum.ymin,ymax:i.maximum.ymax,spatialReference:i.spatialReference}),t.map.extentSets.push(r)})),e.lodSets&&(t.map.lodSets=e.lodSets),e.tileSchemas&&(t.map.tileSchemas=[],e.tileSchemas.forEach(i=>{const r={id:i.id,name:i.name,extentSetId:i.extentSetId,lodSetId:i.lodSetId,thumbnailTileUrls:[],hasNorthPole:i.hasNorthPole||!1};i.overviewUrl&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.basemaps[i.id]={id:i.overviewUrl.id||`overviewmap-basemap-${i.id}`,tileSchemaId:i.id,layers:[{id:i.overviewUrl.id||`overviewmap-basemap-${i.id}-0`,layerType:i.overviewUrl.layerType==="esriDynamic"?ft.MAPIMAGE:ft.TILE,url:i.overviewUrl.url,opacity:i.overviewUrl.opacity??1}]}),t.map.tileSchemas.push(r)})),e.baseMaps&&(t.map.basemaps=[],e.baseMaps.forEach(i=>{const r={id:i.id,tileSchemaId:i.tileSchemaId,name:i.name,description:i.description,altText:i.altText,thumbnailUrl:i.thumbnailUrl,layers:[]};i.attribution&&(r.attribution={text:{},logo:{}},i.attribution.text&&(r.attribution.text.disabled=!i.attribution.text.enabled,r.attribution.text.value=i.attribution.text.value),i.attribution.logo&&(r.attribution.logo.disabled=!i.attribution.logo.enabled,r.attribution.logo.altText=i.attribution.logo.altText,r.attribution.logo.value=i.attribution.logo.value,r.attribution.logo.link=i.attribution.logo.link)),i.layers.forEach((s,n)=>{const o={id:s.id||`${i.id}-${n}`,layerType:s.layerType==="esriDynamic"?ft.MAPIMAGE:ft.TILE,url:s.url,opacity:s.opacity??1};r.layers.push(o)}),t.map.basemaps.push(r)})),e.legend&&(t.fixturesEnabled.push("legend"),e.legend.type==="autopopulate"?(t.fixtures.legend={root:{name:"I'm root",children:[]}},t.layers&&t.layers.toReversed().forEach(i=>{if(i.type==="esri-map-image"||i.type==="ogc-wms"){const r={name:i.name??`${i.id} Group`,children:[]};i.sublayers.forEach(s=>{const n={layerId:i.id};s.name&&(n.name=s.name),s.controls&&(n.controls=s.controls),s.disabledControls&&(n.disabledControls=s.disabledControls),i.type==="esri-map-image"?n.sublayerIndex=s.index:(n.sublayerId=s.id,console.warn(`sublayerId property defined in legend entry ${n.layerId} is currently not supported.`)),r.children.push(n)}),t.fixtures.legend.root.children.push(r)}else{const r={layerId:i.id};i.controls&&(r.controls=i.controls),i.disabledControls&&(r.disabledControls=i.disabledControls),t.fixtures.legend.root.children.push(r)}})):t.fixtures.legend={root:Z6(e.legend.root)})}function Z6(e){const t={name:e.name,children:[]};typeof e.hidden<"u"&&(t.hidden=e.hidden),typeof e.expanded<"u"&&(t.expanded=e.expanded);const i=["identify","opacity","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=J1(e.controls,i),e.controls.includes("visibility")&&t.controls.push("visibilityButton"),(e.controls.length!==1||e.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),t.controls.push("expandButton")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=J1(e.disabledControls,i),e.disabledControls.includes("visibility")&&t.disabledControls.push("visibilityButton"),(e.disabledControls.length!==1||e.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),e.children.forEach(r=>{if(r.layerId)t.children.push(GK(r));else if(r.infoType)r.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`):(t.children.push({infoType:r.infoType,content:r.content}),typeof r.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`));else if(r.exclusiveVisibility){const s={name:"Visibility Set",children:[],exclusive:!0};typeof r.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`),r.exclusiveVisibility.forEach(n=>{n.layerId?s.children.push(GK(n)):s.children.push(Z6(n))}),t.children.push(s)}else t.children.push(Z6(r))}),t}function GK(e){const t=e,i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.layerControls=J1(e.controls,i),t.layerControls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledLayerControls=J1(e.disabledControls,i)),e.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),delete t.controlledIds),e.entryIndex&&(t.sublayerIndex=e.entryIndex,delete e.entryIndex),e.entryId&&console.warn(`entryId property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),t}function Jat(e){const t=dO(e);switch(t.id=e.id,t.url=e.url,e.refreshInterval&&(t.refreshInterval=e.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),e.expectedResponseTime&&(t.expectedLoadTime=e.expectedResponseTime),e.metadataUrl&&(t.metadata={url:e.metadataUrl}),e.catalogueUrl&&(t.catalogueUrl=e.catalogueUrl),typeof e.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.tooltipField&&(t.tooltipField=e.tooltipField),e.tolerance&&(t.mouseTolerance=e.tolerance,e.layerType==="esriDynamic"&&(t.touchTolerance=e.tolerance+10)),e.customRenderer&&(t.customRenderer=e.customRenderer),e.layerType){case"esriDynamic":t.layerType="esri-map-image",typeof e.singleEntryCollapse<"u"&&(t.singleEntryCollapse=e.singleEntryCollapse),e.imageFormat&&(t.imageFormat=e.imageFormat),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(i=>{const r=dO(i);r.index=i.index,t.sublayers.push(r)}));break;case"esriFeature":t.layerType="esri-feature",e.fileType&&(t.layerType=e.fileType==="shapefile"?"file-shape":`file-${e.fileType}`,e.colour&&(t.colour=e.colour),e.latField&&(t.latField=e.latField),e.longField&&(t.longField=e.longField));break;case"ogcWfs":t.layerType="ogc-wfs",e.colour&&(t.colour=e.colour),typeof e.xyInAttribs<"u"&&(t.xyInAttribs=e.xyInAttribs);break;case"ogcWms":t.layerType="ogc-wms",e.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.featureInfoMimeType&&(e.featureInfoMimeType==="text/html;fgpv=summary"?t.featureInfoMimeType="text/html":t.featureInfoMimeType=e.featureInfoMimeType),e.legendMimeType&&console.warn(`legendMimeType property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(i=>{const r=dO(i);r.id=i.id,i.currentStyle&&(r.currentStyle=i.currentStyle,console.warn(`currentStyle property provided in layer entry ${i.id} of layer ${e.id} is currently not supported.`)),i.allStyles&&console.warn(`allStyles property provided in layer entry ${i.id} of layer ${e.id} cannot be mapped and will be skipped.`),t.sublayers.push(r)}));break;case"esriImage":t.layerType="esri-imagery";break;case"esriTile":t.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${e.layerType}`)}return e.details&&console.warn(`Details config provided in layer ${e.id} cannot be mapped and will be skipped.`),t}function dO(e){const t={};e.name&&(t.name=e.name),e.nameField&&(t.nameField=e.nameField),e.extent&&(t.extent=e.extent);const i=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=J1(e.controls,i),t.controls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=J1(e.disabledControls,i)),e.state&&(t.state={opacity:e.state.opacity??1,visibility:e.state.visibility??!0,identify:e.state.query??!0,hovertips:e.state.hovertips??!0},typeof e.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`)),typeof e.stateOnly<"u"&&(t.cosmetic=e.stateOnly),e.initialFilteredQuery&&(t.initialFilteredQuery=e.initialFilteredQuery),Xat(e,t),(typeof e.toggleSymbology<"u"||e.table)&&(t.fixtures={},typeof e.toggleSymbology<"u"&&(t.fixtures.legend={toggleSymbology:e.toggleSymbology}),e.table&&(t.fixtures.grid={},e.table.title&&(t.fixtures.grid.title=e.table.title),e.table.description&&console.warn(`description property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.search&&(e.table.search.enabled&&(t.fixtures.grid.search=e.table.search.enabled),e.table.search.value&&(t.fixtures.grid.searchFilter=e.table.search.value)),typeof e.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.applyMap<"u"&&(t.fixtures.grid.applyMap=e.table.applyMap),typeof e.table.showFilter<"u"&&(t.fixtures.grid.showFilter=e.table.showFilter),typeof e.table.filterByExtent<"u"&&(t.fixtures.grid.filterByExtent=e.table.filterByExtent),typeof e.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.columns&&(t.fixtures.grid.columns=[],e.table.columns.forEach(r=>{const s={field:r.data};r.title&&(s.title=r.title),r.description&&console.warn(`description property provided in column property in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof r.visible<"u"&&(s.visible=r.visible),r.width&&(s.width=r.width),r.sort&&(s.sort=r.sort),typeof r.searchable<"u"&&(s.searchable=r.searchable),r.filter&&(s.filter=r.filter),t.fixtures.grid.columns.push(s)})))),t}function J1(e,t){const i=[];return e.forEach(r=>{t.includes("identify")&&r==="query"?i.push("identify"):t.includes("datatable")&&r==="data"?i.push("datatable"):t.includes(r)?i.push(r):console.warn(`Ignored invalid control: ${r}`)}),i}function Zat(e,t){if(!e)return;e.search&&(t.fixtures.geosearch={},t.fixtures.geosearch.serviceUrls={geoNames:e.search.serviceUrls.geoNames,geoLocation:e.search.serviceUrls.geoLocation,geoProvince:e.search.serviceUrls.provinces,geoTypes:e.search.serviceUrls.types},e.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),e.search.settings&&(t.fixtures.geosearch.settings=e.search.settings),e.search.disabledSearches&&(t.fixtures.geosearch.settings.disabledSearchTypes=e.search.disabledSearches.filter(r=>r!=="SCALE"))),e.export&&(t.fixtures.export||(t.fixtures.export={},t.fixturesEnabled.push("export")),e.export.title&&(t.fixtures.export.title={selected:e.export.title.isSelected??!0,selectable:e.export.title.isSelectable??!0,value:e.export.title.value??"RAMP-Map / PCAR-Carte"}),e.export.map&&(t.fixtures.export.map={selected:e.export.map.isSelected??!0,selectable:e.export.map.isSelectable??!0},e.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),e.export.mapElements&&(t.fixtures.export.mapElements={selected:e.export.mapElements.isSelected??!0,selectable:e.export.mapElements.isSelectable??!0},e.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),e.export.legend&&(t.fixtures.export.legend={selected:e.export.legend.isSelected??!0,selectable:e.export.legend.isSelectable??!0},e.export.legend.columnWidth&&(t.fixtures.export.legend.columnWidth=e.export.legend.columnWidth),e.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),e.export.footnote&&(t.fixtures.export.footnote={selected:e.export.footnote.isSelected??!0,selectable:e.export.footnote.isSelectable??!0,value:e.export.footnote.value??""}),e.export.timestamp&&(t.fixtures.export.timestamp={selected:e.export.timestamp.isSelected??!0,selectable:e.export.timestamp.isSelectable??!0},e.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),e.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof e.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),e.proxyUrl&&(t.system.proxyUrl=e.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(r=>{typeof e[r]<"u"&&console.warn(`${r} property provided in services config cannot be mapped and will be skipped.`)})}function Yat(e,t){if(e.navBar){t.fixtures.mapnav={zoomOption:e.navBar.zoom||"buttons",items:[]};const s=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];e.navBar.extra.forEach(n=>{const o=n.toLowerCase();s.includes(o)?t.fixtures.mapnav.items.push(o):console.warn(`Ignored invalid mapnav item: ${n}`)}),t.fixturesEnabled.push("mapnav")}if(e.help&&(t.fixtures.help={location:e.help.folderName&&e.help.folderName!=="default"?`./${e.help.folderName}`:"./help",panelWidth:350},t.fixturesEnabled.push("help")),e.legend){const s=["groupToggle","visibilityToggle"];e.legend.reorderable&&s.push("layerReorder"),e.legend.allowImport&&s.push("wizard"),t.fixtures.legend?t.fixtures.legend.headerControls=s:(t.fixturesEnabled.push("legend"),t.fixtures.legend={headerControls:s,root:{}}),e.legend.isOpen&&e.legend.isOpen.large&&t.panels.open.push({id:"legend"})}t.fixtures.appbar={items:[]},t.fixturesEnabled.push("appbar");const i=["layers","basemap","export","help","geoSearch"];e.appBar?(e.appBar.layers!==!1&&(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")),e.appBar.geoSearch!==!1&&t.fixturesEnabled.includes("geosearch")&&t.fixtures.appbar.items.push("geosearch"),e.appBar.basemap!==!1&&t.fixtures.appbar.items.push("basemap")):(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend"),t.fixtures.appbar.items.push("geosearch"),t.fixtures.appbar.items.push("basemap")),e.sideMenu&&e.sideMenu.items&&e.sideMenu.items.length>0&&e.sideMenu.items.forEach(s=>{s.forEach(n=>{n==="layers"&&!t.fixtures.appbar.items.includes("legend")?(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")):n!=="layers"&&i.includes(n)&&!t.fixtures.appbar.items.includes(n.toLowerCase())&&(t.fixtures.appbar.items.push(n.toLowerCase()),(n.toLowerCase()==="help"||n.toLowerCase()==="export"&&!t.fixturesEnabled.includes(n.toLowerCase()))&&t.fixturesEnabled.push(n.toLowerCase()))})}),e.tableIsOpen&&e.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(s=>{typeof e[s]<"u"&&console.warn(`${s} property provided in services config cannot be mapped and will be skipped.`)})}function Kat(e,t){e.areasOfInterest.enable&&(t.fixturesEnabled.includes("areas-of-interest")||t.fixturesEnabled.push("areas-of-interest"),e.areasOfInterest.areas&&(t.fixtures["areas-of-interest"]={areas:e.areasOfInterest.areas.map(i=>({title:`${i["title-en-CA"]} / ${i["title-fr-CA"]}`,thumbnail:i.thumbnailUrl,altText:i.altText??"",description:i.description??"",extent:{xmin:i.xmin,xmax:i.xmax,ymin:i.ymin,ymax:i.ymax,spatialReference:{wkid:i.wkid}}}))}))}function Xat(e,t){const i=e.outfields&&e.outfields!=="*";if(!i&&!e.fieldMetadata)return;const r={fieldInfo:[],exclusiveFields:!1,enforceOrder:!1};e.fieldMetadata?(r.fieldInfo=e.fieldMetadata.map(s=>{const n={name:s.data};return s.alias&&(n.alias=s.alias),n}),i&&(e.outfields.split(",").map(n=>n.trim()).forEach(n=>{r.fieldInfo.findIndex(o=>o.name===n)===-1&&r.fieldInfo.push({name:n})}),r.exclusiveFields=!0)):i&&(r.fieldInfo=e.outfields.split(",").map(s=>({name:s.trim()})),r.exclusiveFields=!0),t.fieldMetadata=r}var sv={major:"4",minor:"10",patch:"0",timestamp:"Thu Dec 19 14:34:34 2024 -0500",hash:"1f32f5c4dedad7ac35a7895e7f740d9e48359903"};console.info(`RAMP v${sv.major}.${sv.minor}.${sv.patch} [${sv.hash.slice(0,9)}] (Built on ${new Date(sv.timestamp.toString()).toLocaleString()})`);const mw=sv;function zvt(e){return qat(e)}const qvt=(e,t,i)=>new Sot(e,t,i),s1=new BHe;export{odt as $,qvt as A,_o as B,ci as C,Ve as D,R2 as E,ko as F,xe as G,B9e as H,$r as I,wi as J,zPe as K,Gut as L,xC as M,Mxe as N,Ixe as O,Axe as P,le as Q,f0e as R,Cv as S,K as T,Ne as U,cdt as V,udt as W,Do as X,S1e as Y,w1e as Z,a1 as _,gCe as a,ca as a$,hu as a0,Be as a1,nl as a2,$mt as a3,Uct as a4,ZS as a5,Xi as a6,zy as a7,ga as a8,to as a9,WW as aA,X3 as aB,Kg as aC,Bu as aD,tX as aE,rX as aF,sX as aG,nlt as aH,kme as aI,blt as aJ,ivt as aK,uJ as aL,Q3 as aM,dvt as aN,M$ as aO,O0t as aP,V7e as aQ,BW as aR,qW as aS,HW as aT,zW as aU,_s as aV,Tdt as aW,Mdt as aX,Edt as aY,ke as aZ,Ki as a_,Qxe as aa,tTe as ab,iTe as ac,lTe as ad,dTe as ae,Sre as af,wre as ag,_re as ah,pTe as ai,vTe as aj,bTe as ak,due as al,$9e as am,K9e as an,LD as ao,yf as ap,ab as aq,Y$ as ar,a$ as as,o$ as at,Mct as au,YF as av,ep as aw,rut as ax,coe as ay,kD as az,BEe as b,wct as b$,Rs as b0,rl as b1,pX as b2,Mo as b3,Cn as b4,D2 as b5,FT as b6,UF as b7,jF as b8,zh as b9,Sg as bA,Amt as bB,qS as bC,nX as bD,eF as bE,But as bF,lu as bG,gx as bH,iS as bI,uve as bJ,MF as bK,IF as bL,cve as bM,_$ as bN,S$ as bO,r0e as bP,out as bQ,ayt as bR,Noe as bS,jNe as bT,CN as bU,Pn as bV,Xd as bW,tb as bX,S2e as bY,Fct as bZ,jct as b_,ex as ba,yct as bb,Bne as bc,B1e as bd,gy as be,TG as bf,EG as bg,zut as bh,ti as bi,WL as bj,Llt as bk,Zj as bl,Lce as bm,Xn as bn,na as bo,_t as bp,bt as bq,Co as br,dlt as bs,Vi as bt,Ln as bu,Ys as bv,c as bw,d as bx,F as by,ae as bz,r$ as c,Spt as c$,_ct as c0,Tct as c1,xct as c2,ef as c3,Sct as c4,Iy as c5,a9e as c6,Pgt as c7,Ut as c8,Ngt as c9,Eue as cA,XW as cB,Fi as cC,d6e as cD,F_ as cE,Kt as cF,nx as cG,eL as cH,vct as cI,mht as cJ,Tht as cK,Yd as cL,RQ as cM,rg as cN,Ud as cO,fO as cP,R7e as cQ,HK as cR,Dt as cS,Xue as cT,uVe as cU,Mvt as cV,bUe as cW,Ivt as cX,xvt as cY,$Ue as cZ,ave as c_,ls as ca,of as cb,au as cc,Nct as cd,P$ as ce,at as cf,Bs as cg,df as ch,b1 as ci,_g as cj,Wi as ck,Ef as cl,nf as cm,Mf as cn,$c as co,jO as cp,Hi as cq,FO as cr,VO as cs,h3 as ct,Tne as cu,xue as cv,Xe as cw,hS as cx,is as cy,K3 as cz,ip as d,v3 as d$,Mpt as d0,oz as d1,x2e as d2,Ky as d3,K2e as d4,Ipt as d5,ap as d6,xht as d7,Gmt as d8,fct as d9,x$ as dA,koe as dB,o8 as dC,oue as dD,uue as dE,pue as dF,g9e as dG,m9e as dH,Fo as dI,glt as dJ,u0e as dK,o1 as dL,gF as dM,Jme as dN,dC as dO,b3 as dP,hIe as dQ,tbe as dR,y9e as dS,cue as dT,nue as dU,q9e as dV,Hut as dW,Sse as dX,xf as dY,N9e as dZ,PIe as d_,ig as da,Vo as db,p3 as dc,Z$ as dd,nIe as de,c2e as df,Dct as dg,Tae as dh,SF as di,kmt as dj,Iae as dk,sae as dl,rae as dm,Nmt as dn,Lmt as dp,J_e as dq,tie as dr,T2e as ds,Gct as dt,iie as du,Vct as dv,Kn as dw,Jut as dx,ua as dy,Dmt as dz,jo as e,zS as e$,O8 as e0,bht as e1,Mht as e2,zvt as e3,$ut as e4,pdt as e5,Ue as e6,Z8 as e7,Plt as e8,nF as e9,hAe as eA,WX as eB,l$ as eC,OF as eD,XS as eE,V2 as eF,Yn as eG,pa as eH,o1e as eI,g$ as eJ,a1e as eK,mne as eL,Qlt as eM,jut as eN,ns as eO,je as eP,P2 as eQ,ge as eR,cb as eS,y9 as eT,uct as eU,sCe as eV,mct as eW,act as eX,Zr as eY,zCe as eZ,pV as e_,WS as ea,sx as eb,Je as ec,xg as ed,vb as ee,yb as ef,gb as eg,Tg as eh,wf as ei,ue as ej,Kse as ek,e9 as el,fx as em,Zs as en,ro as eo,qh as ep,Uo as eq,bc as er,_f as es,sC as et,lC as eu,B8 as ev,pee as ew,S9e as ex,x9e as ey,H9e as ez,vCe as f,lt as f$,Evt as f0,Tvt as f1,Svt as f2,Cc as f3,or as f4,yse as f5,Ac as f6,nv as f7,Ty as f8,tlt as f9,nSe as fA,oSe as fB,aSe as fC,QS as fD,VIe as fE,iSe as fF,GIe as fG,i3e as fH,Xut as fI,ii as fJ,T0t as fK,Xt as fL,lr as fM,pg as fN,Qnt as fO,Zt as fP,qr as fQ,Ii as fR,Mi as fS,Re as fT,Ji as fU,Yr as fV,Me as fW,We as fX,Rg as fY,Cr as fZ,Ui as f_,$y as fa,h$ as fb,Slt as fc,zd as fd,_lt as fe,Ift as ff,uCe as fg,WM as fh,Iut as fi,sut as fj,gt as fk,mc as fl,SLe as fm,jAe as fn,XMe as fo,ldt as fp,J3e as fq,adt as fr,W3e as fs,io as ft,q8 as fu,YK as fv,CX as fw,Omt as fx,Dr as fy,TPe as fz,zEe as g,Bse as g$,Ri as g0,$s as g1,_e as g2,i6 as g3,RA as g4,KC as g5,qs as g6,Nn as g7,Pc as g8,Kh as g9,t9 as gA,kNe as gB,sF as gC,Vle as gD,ID as gE,M1 as gF,Gle as gG,OFe as gH,l7 as gI,TU as gJ,gI as gK,b4 as gL,sg as gM,jS as gN,bO as gO,VF as gP,YW as gQ,O2 as gR,w0e as gS,pF as gT,Zd as gU,Na as gV,oct as gW,IFe as gX,xs as gY,$Fe as gZ,Ule as g_,sr as ga,eot as gb,ot as gc,nr as gd,Ht as ge,jFe as gf,Zut as gg,EFe as gh,k9e as gi,Put as gj,WU as gk,jQ as gl,UQ as gm,_se as gn,I9e as go,xse as gp,MIe as gq,Wut as gr,nve as gs,Yz as gt,Idt as gu,Adt as gv,oe as gw,RIe as gx,V$e as gy,oC as gz,oU as h,Jr as h$,Z1 as h0,fr as h1,vc as h2,GS as h3,Ms as h4,Oe as h5,Eh as h6,Bt as h7,Zhe as h8,Rft as h9,p9 as hA,ACe as hB,sNe as hC,rNe as hD,tNe as hE,lV as hF,w$ as hG,Qu as hH,Is as hI,sa as hJ,b8 as hK,flt as hL,fV as hM,d9 as hN,Y2 as hO,r9 as hP,qse as hQ,vt as hR,fAe as hS,dAe as hT,pAe as hU,GW as hV,Hdt as hW,RFe as hX,fJ as hY,VW as hZ,Xnt as h_,ult as ha,D9e as hb,M9e as hc,bi as hd,r5e as he,F3 as hf,hae as hg,xt as hh,Zy as hi,j$e as hj,L$e as hk,sAe as hl,fC as hm,vP as hn,Wte as ho,m9 as hp,mAe as hq,f1 as hr,Q8 as hs,yx as ht,O4 as hu,C3 as hv,dx as hw,hx,Yre as hy,cAe as hz,yCe as i,hue as i$,CA as i0,yot as i1,b6 as i2,got as i3,JO as i4,eD as i5,VNe as i6,_ut as i7,Sut as i8,xut as i9,DFe as iA,mTe as iB,ove as iC,gne as iD,K$ as iE,dve as iF,tSe as iG,q3 as iH,_9e as iI,aue as iJ,At as iK,gk as iL,Lft as iM,Uq as iN,zRe as iO,URe as iP,nft as iQ,oft as iR,_5e as iS,lft as iT,aft as iU,uft as iV,MPe as iW,O3 as iX,db as iY,pf as iZ,R9e as i_,Tut as ia,Eut as ib,Mut as ic,JS as id,ht as ie,elt as ig,DD as ih,u2 as ii,Lle as ij,N8 as ik,hE as il,$x as im,py as io,tS as ip,_ae as iq,G8 as ir,Yk as is,Vht as it,zE as iu,fPe as iv,sSe as iw,w9e as ix,Y9e as iy,X9e as iz,$8 as j,ibe as j$,uC as j0,dIe as j1,z8 as j2,mIe as j3,yIe as j4,mI as j5,yne as j6,tge as j7,nS as j8,TMe as j9,Dl as jA,TAe as jB,EAe as jC,NAe as jD,MAe as jE,IAe as jF,AAe as jG,$Ae as jH,CAe as jI,RAe as jJ,Lne as jK,Zme as jL,bn as jM,uP as jN,xne as jO,mot as jP,Q7 as jQ,dp as jR,PLe as jS,wlt as jT,J$ as jU,ib as jV,Es as jW,va as jX,pct as jY,jd as jZ,b$ as j_,o$e as ja,K3e as jb,SAe as jc,sne as jd,OAe as je,f9 as jf,hQ as jg,gQ as jh,dCe as ji,K1 as jj,up as jk,fb as jl,pb as jm,fft as jn,tpt as jo,dft as jp,mft as jq,PAe as jr,kAe as js,uAe as jt,hre as ju,cre as jv,ure as jw,UAe as jx,wAe as jy,_Ae as jz,q_ as k,$Le as k$,Dse as k0,y3e as k1,g3e as k2,UW as k3,p0t as k4,d0t as k5,v0t as k6,b0t as k7,f0t as k8,m0t as k9,Phe as kA,tc as kB,K7 as kC,fJe as kD,HI as kE,N1e as kF,l8 as kG,yht as kH,fht as kI,Iye as kJ,Nlt as kK,Rmt as kL,Cmt as kM,zoe as kN,Hoe as kO,qVe as kP,X7 as kQ,$A as kR,ui as kS,gPe as kT,X6 as kU,Q6 as kV,qt as kW,sl as kX,rD as kY,j as kZ,vut as k_,y0t as ka,g0t as kb,e5 as kc,ade as kd,vde as ke,FS as kf,pot as kg,dot as kh,LK as ki,hd as kj,ime as kk,qj as kl,ft as km,vot as kn,Eo as ko,Js as kp,Bc as kq,su as kr,Dd as ks,Cf as kt,Kr as ku,d5 as kv,uA as kw,_ot as kx,$F as ky,qve as kz,Pdt as l,cs as l$,id as l0,pae as l1,$vt as l2,Avt as l3,_vt as l4,LC as l5,PC as l6,y7 as l7,Ao as l8,Yje as l9,Y3 as lA,E0t as lB,M0t as lC,I0t as lD,U7e as lE,Hht as lF,Wht as lG,qht as lH,Bre as lI,Bmt as lJ,Pmt as lK,Qoe as lL,tae as lM,Koe as lN,Gve as lO,Zve as lP,iae as lQ,KS as lR,Lut as lS,aat as lT,wat as lU,lat as lV,wot as lW,yee as lX,Jk as lY,ELe as lZ,uH as l_,qke as la,Dme as lb,ha as lc,ya as ld,oc as le,Xlt as lf,qge as lg,Ja as lh,y$ as li,nut as lj,tje as lk,FD as ll,evt as lm,ZW as ln,za as lo,Sue as lp,Mh as lq,JW as lr,tvt as ls,Vmt as lt,aH as lu,jW as lv,J1e as lw,W1e as lx,ect as ly,dct as lz,Npt as m,cct as m$,Tmt as m0,Xy as m1,rft as m2,cft as m3,vr as m4,hlt as m5,plt as m6,clt as m7,mg as m8,a0e as m9,Pee as mA,cbe as mB,rct as mC,Yi as mD,BS as mE,CH as mF,_Ne as mG,Aie as mH,Qle as mI,myt as mJ,fyt as mK,u1 as mL,K0e as mM,NX as mN,Ult as mO,jlt as mP,SPe as mQ,H3e as mR,vPe as mS,vmt as mT,jmt as mU,Fmt as mV,jye as mW,Fye as mX,_Pe as mY,llt as mZ,Lme as m_,Eot as ma,bot as mb,BVe as mc,dS as md,Tot as me,dv as mf,ng as mg,vje as mh,wje as mi,_je as mj,v$ as mk,wn as ml,Ot as mm,Mv as mn,Jl as mo,Z9e as mp,i8e as mq,r8e as mr,Ome as ms,P8 as mt,Sht as mu,f6e as mv,lue as mw,wy as mx,npe as my,_pt as mz,mL as n,see as n$,V2e as n0,P3 as n1,$ct as n2,GAe as n3,Imt as n4,Mmt as n5,Gd as n6,zz as n7,nne as n8,H2 as n9,Sb as nA,e1 as nB,she as nC,Ly as nD,_We as nE,vWe as nF,bWe as nG,wWe as nH,ahe as nI,Bo as nJ,uWe as nK,Bvt as nL,Gvt as nM,Nee as nN,rf as nO,G3e as nP,B3e as nQ,rAe as nR,S$e as nS,F$e as nT,iX as nU,Ou as nV,nu as nW,wQ as nX,Klt as nY,VQ as nZ,kU as n_,ICe as na,LIe as nb,EIe as nc,IIe as nd,Eye as ne,k0t as nf,Ele as ng,Fle as nh,lS as ni,e7 as nj,ED as nk,gle as nl,Mx as nm,zlt as nn,Q7e as no,zle as np,_i as nq,Ka as nr,Si as ns,Li as nt,cu as nu,xb as nv,zs as nw,ei as nx,st as ny,YHe as nz,Dpt as o,_9 as o$,Vje as o0,aut as o1,mr as o2,wdt as o3,Qht as o4,Bxe as o5,Yut as o6,AFe as o7,$6e as o8,T6e as o9,Q0t as oA,eje as oB,iJ as oC,tJ as oD,PFe as oE,wmt as oF,hft as oG,P5e as oH,xG as oI,X$ as oJ,SG as oK,ay as oL,Jn as oM,Wk as oN,fdt as oO,aN as oP,X0e as oQ,fie as oR,mdt as oS,u9e as oT,fIe as oU,Eft as oV,Mft as oW,E9 as oX,x9 as oY,xft as oZ,Tft as o_,Ex as oa,qut as ob,r8 as oc,mvt as od,eut as oe,$X as of,Hn as og,Lr as oh,kt as oi,ic as oj,J6 as ok,tme as ol,BZe as om,fot as on,fg as oo,rr as op,ar as oq,Od as or,Ar as os,W$ as ot,rxe as ou,zg as ov,Gse as ow,ene as ox,wie as oy,KW as oz,eb as p,mX as p$,T1 as p0,Bd as p1,v4e as p2,si as p3,L3 as p4,N3 as p5,Hme as p6,K5e as p7,hOe as p8,T4e as p9,Hv as pA,Q4e as pB,Z4e as pC,vC as pD,C9 as pE,jPe as pF,U1 as pG,Oc as pH,att as pI,dc as pJ,jx as pK,us as pL,Gtt as pM,Yst as pN,Vt as pO,fvt as pP,hht as pQ,cht as pR,gSe as pS,dht as pT,pht as pU,mF as pV,BIe as pW,UIe as pX,A9e as pY,jIe as pZ,_Se as p_,uoe as pa,x4e as pb,LRe as pc,MRe as pd,E4e as pe,Pft as pf,xRe as pg,Eoe as ph,Oft as pi,TRe as pj,w4e as pk,Jdt as pl,Xve as pm,yC as pn,gut as po,Nft as pp,gRe as pq,Oi as pr,sft as ps,WOe as pt,Zq as pu,A9 as pv,D4e as pw,X4e as px,voe as py,boe as pz,pIe as q,bje as q$,upe as q0,rpe as q1,dn as q2,cS as q3,Nme as q4,KFe as q5,jEe as q6,FEe as q7,Pht as q8,Lht as q9,wue as qA,sB as qB,lB as qC,Kut as qD,vpt as qE,W0t as qF,H0t as qG,o0t as qH,a0t as qI,MG as qJ,Yu as qK,G6e as qL,$C as qM,YO as qN,h0t as qO,B6e as qP,Tle as qQ,mJ as qR,$ue as qS,V0t as qT,G0t as qU,B0t as qV,z0t as qW,$0t as qX,R0t as qY,C0t as qZ,hLe as q_,Nht as qa,Xl as qb,x0t as qc,cJ as qd,l0t as qe,RVe as qf,eu as qg,RC as qh,iht as qi,Ole as qj,Nle as qk,aFe as ql,ugt as qm,yFe as qn,Zv as qo,cgt as qp,Kxe as qq,_w as qr,Kpt as qs,wSe as qt,yc as qu,Yy as qv,z_e as qw,V_e as qx,h$e as qy,q0t as qz,tut as r,j0t as r$,ts as r0,E8 as r1,n0t as r2,Ept as r3,AG as r4,OCe as r5,U_ as r6,iAe as r7,Wmt as r8,kct as r9,D8 as rA,lpt as rB,npt as rC,lEe as rD,sEe as rE,apt as rF,PB as rG,RB as rH,OB as rI,fpt as rJ,dpt as rK,mpt as rL,ypt as rM,rEe as rN,Q$ as rO,D0t as rP,i7 as rQ,Jh as rR,oEe as rS,N0t as rT,L0t as rU,rpt as rV,rje as rW,P0t as rX,pJ as rY,u0t as rZ,c0t as r_,Rct as ra,Pct as rb,Oct as rc,Lct as rd,eo as re,Bct as rf,hvt as rg,uU as rh,Cct as ri,w2 as rj,rde as rk,Ev as rl,UE as rm,$h as rn,ma as ro,Wr as rp,pvt as rq,pft as rr,wpt as rs,JL as rt,opt as ru,ZL as rv,bpt as rw,$re as rx,ipt as ry,Dre as rz,W as s,bq as s$,F0t as s0,J0t as s1,Z0t as s2,w0t as s3,Y0t as s4,K0t as s5,j7e as s6,B7e as s7,A0t as s8,Bue as s9,bPe as sA,Umt as sB,FMe as sC,Rpt as sD,Cpt as sE,FW as sF,Ydt as sG,Zdt as sH,Eg as sI,f5e as sJ,Dft as sK,Pi as sL,S8 as sM,qCe as sN,zdt as sO,x8 as sP,XCe as sQ,x1 as sR,qdt as sS,qb as sT,B4 as sU,vx as sV,Xdt as sW,kRe as sX,wq as sY,cv as sZ,Fft as s_,n1 as sa,U0t as sb,iut as sc,l5e as sd,Sne as se,LFe as sf,w9 as sg,avt as sh,lvt as si,uvt as sj,yje as sk,Aue as sl,_0t as sm,S0t as sn,dje as so,cvt as sp,s0t as sq,edt as sr,sLe as ss,W4 as st,J4 as su,GQ as sv,KOe as sw,zmt as sx,rPe as sy,lPe as sz,Vut as t,yB as t$,jft as t0,GRe as t1,$oe as t2,vq as t3,ift as t4,Kdt as t5,eft as t6,cV as t7,tft as t8,qne as t9,Rvt as tA,jdt as tB,s8 as tC,B2e as tD,z2e as tE,YH as tF,yft as tG,W5e as tH,J5e as tI,PVe as tJ,Nye as tK,WG as tL,GG as tM,j1e as tN,BG as tO,Qut as tP,aEe as tQ,nB as tR,zG as tS,gct as tT,YG as tU,dB as tV,fB as tW,mB as tX,sbe as tY,sct as tZ,G1e as t_,Qdt as ta,QCe as tb,BRe as tc,kft as td,Zb as te,Hq as tf,q4 as tg,Aoe as th,O2e as ti,Ect as tj,uc as tk,$yt as tl,Ayt as tm,Uke as tn,jke as to,QF as tp,LM as tq,slt as tr,N2e as ts,ole as tt,Zje as tu,L2e as tv,B2 as tw,q2 as tx,g1 as ty,mlt as tz,Odt as u,oS as u$,nct as u0,Iht as u1,TFe as u2,spt as u3,gpt as u4,hpt as u5,ppt as u6,EB as u7,FG as u8,CG as u9,Sve as uA,eFe as uB,t7 as uC,tct as uD,q1e as uE,S6e as uF,wle as uG,Sle as uH,W3 as uI,z9e as uJ,H3 as uK,O6e as uL,UNe as uM,C6e as uN,y6e as uO,Aut as uP,aDe as uQ,Rut as uR,_ve as uS,but as uT,wut as uU,Lye as uV,Kje as uW,tht as uX,XQ as uY,d3 as uZ,Cut as u_,RG as ua,OG as ub,KG as uc,TB as ud,IB as ue,jG as uf,F$ as ug,lct as uh,upt as ui,cpt as uj,GCe as uk,Fs as ul,x0e as um,wht as un,_ht as uo,n3e as up,s3e as uq,aS as ur,xle as us,ff as ut,PQ as uu,TF as uv,zO as uw,Ict as ux,YQ as uy,xve as uz,PCe as v,FX as v0,AC as v1,h6e as v2,P6e as v3,$Te as v4,L6e as v5,ict as v6,SW as v7,zht as v8,sht as v9,Sf as vA,Ght as vB,$dt as vC,Rdt as vD,BCe as vE,xmt as vF,Ymt as vG,Xmt as vH,eyt as vI,iyt as vJ,nyt as vK,yvt as vL,b6e as va,w6e as vb,U9e as vc,ept as vd,Nu as ve,m6e as vf,lx as vg,Cme as vh,ZI as vi,alt as vj,qIe as vk,r3e as vl,bre as vm,ZIe as vn,rht as vo,rlt as vp,$me as vq,ilt as vr,vht as vs,ght as vt,rvt as vu,RTe as vv,ATe as vw,OTe as vx,hct as vy,Eht as vz,Rne as w,Qy as x,kpt as y,s1 as z};
