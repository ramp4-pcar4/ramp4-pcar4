import{al as I,dS as X,dU as y,ao as T,am as l,ap as N,kB as W,g_ as Y,iB as Z,dQ as C,dB as _,dC as x,dE as H,b0 as tt,H as L}from"./main-DCIX61zy.js";import{e as nt}from"./mat3f64-Dh9_zhFu.js";import{e as st}from"./mat4f64-Dn1WEGBx.js";import{e as rt}from"./quatf64-C16JxGFv.js";function P(t,n){return I(t,n)/X(t)}function at(t,n){const s=I(t,n)/(X(t)*X(n));return-y(s)}function ct(t,n,s){T(A,t),T(Q,n);const r=I(A,Q),a=y(r),e=l(A,A,Q);return I(e,s)<0?2*Math.PI-a:a}const A=N(),Q=N();let M=class h{constructor(n){this._create=n,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&W(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const n=2*this._itemsPtr;this._items.length>n&&(this._items.length=n),this._itemsPtr=0}static createVec2f64(){return new h(Y)}static createVec3f64(){return new h(N)}static createVec4f64(){return new h(Z)}static createMat3f64(){return new h(nt)}static createMat4f64(){return new h(st)}static createQuatf64(){return new h(rt)}get test(){}};const it=M.createVec2f64(),f=M.createVec3f64(),z=M.createVec4f64();M.createMat3f64();const et=M.createMat4f64(),ot=M.createQuatf64();function ut(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],s=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,s,r))}function It(t,n){const s=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),r=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),a=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return C(t,s,r,a),t}function J(t,n,s){Math.abs(t[0])>Math.abs(t[1])?C(n,0,1,0):C(n,1,0,0),l(s,t,n),l(n,s,t),T(s,s),T(n,n)}function B(t=D){return[t[0],t[1],t[2],t[3]]}function ft(t=D[0],n=D[1],s=D[2],r=D[3]){return k(t,n,s,r,z.get())}function $(t,n){return k(n[0],n[1],n[2],n[3],t)}function Nt(t){return t}function k(t,n,s,r,a=B()){return a[0]=t,a[1]=n,a[2]=s,a[3]=r,a}function j(t,n,s){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],a=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return s[0]=n[0]*a,s[1]=n[1]*a,s[2]=n[2]*a,s[3]=-(s[0]*t[0]+s[1]*t[1]+s[2]*t[2]),s}function G(t,n,s,r=B()){const a=s[0]-n[0],e=s[1]-n[1],i=s[2]-n[2],c=t[0]-n[0],O=t[1]-n[1],U=t[2]-n[2],m=e*U-i*O,R=i*c-a*U,q=a*O-e*c,V=m*m+R*R+q*q,v=Math.abs(V-1)>1e-5&&V>1e-12?1/Math.sqrt(V):1;return r[0]=m*v,r[1]=R*v,r[2]=q*v,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function K(t,n,s,r=0,a=Math.floor(s*(1/3)),e=Math.floor(s*(2/3))){if(s<3)return!1;n(g,r);let i=a,c=!1;for(;i<s-1&&!c;)n(S,i),i++,c=!L(g,S);if(!c)return!1;for(i=Math.max(i,e),c=!1;i<s&&!c;)n(E,i),i++,_(F,g,S),T(F,F),_(b,S,E),T(b,b),c=!L(g,E)&&!L(S,E)&&Math.abs(I(F,b))<Et;return c?(G(g,S,E,t),!0):(r!==0||a!==1||e!==2)&&K(t,n,s,0,1,2)}const Et=.99619469809,g=N(),S=N(),E=N(),F=N(),b=N();function ht(t,n,s){return n!==t&&$(t,n),t[3]=-I(t,s),t}function Tt(t,n,s,r){return l(E,n,t),j(s,E,r)}function _t(t,n,s,r){return p(w(t,n,_(f.get(),s,n),Ct,r))}function Mt(t,n,s){return n!=null&&p(w(t,n.origin,n.direction,Pt,s))}function St(t,n,s){return p(w(t,n.origin,n.vector,u.NONE,s))}function mt(t,n,s){return p(w(t,n.origin,n.vector,u.CLAMP,s))}function gt(t,n){return d(t,n)>=0}function Dt(t,n,s){const r=x(f.get(),t,-t[3]),a=Ut(t,_(f.get(),n,r),f.get());return H(s,a,r),s}function Ot(t,n,s,r){const a=t,e=f.get(),i=f.get();J(a,e,i);const c=_(f.get(),s,n),O=P(e,c),U=P(i,c),m=P(a,c);return C(r,O,U,m)}function Ut(t,n,s){const r=x(f.get(),t,I(t,n));return _(s,n,r),s}function lt(t,n){return Math.abs(d(t,n))}function d(t,n){return I(t,n)+t[3]}var o;function p(t){return t===o.INTERSECTS_INSIDE_OUT||t===o.INTERSECTS_OUTSIDE_IN}function w(t,n,s,r,a){const e=I(t,s),i=d(t,n);if(e===0)return i>=0?o.INSIDE:o.OUTSIDE;let c=-i/e;return r&u.CLAMP&&(c=tt(c,0,1)),!(r&u.INFINITE_MIN)&&c<0||!(r&u.INFINITE_MAX)&&c>1?i>=0?o.INSIDE:o.OUTSIDE:(H(a,n,x(a,s,c)),i>=0?o.INTERSECTS_INSIDE_OUT:o.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(o||(o={}));const D=[0,0,1,0];var u;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(u||(u={}));const Ct=u.INFINITE_MIN|u.INFINITE_MAX,Pt=u.INFINITE_MAX;export{ft as D,Dt as H,Ot as J,B as M,Nt as O,Tt as P,lt as Q,k as U,d as V,et as a,at as b,f as c,J as d,P as f,It as g,$ as h,_t as k,j as l,ut as m,ot as o,G as p,St as q,z as r,it as t,ct as u,K as v,mt as w,Mt as x,ht as y,gt as z};
