{"version":3,"file":"webStyleSymbolUtils-C8zbY7A8.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import l from\"../../core/Error.js\";import{urlToObject as o,removeFile as n}from\"../../core/urlUtils.js\";import s from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as m}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as u,requestJSON as p,makeCIMSymbolRef as f,Style2DUrlTemplate as y,symbolUrlFromStyleItem as c}from\"./styleUtils.js\";import{Thumbnail as b}from\"./Thumbnail.js\";function g(t,e,r,o){const n=t.name;return null==n?Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):\"Esri2DPointSymbolsStyle\"===t.styleName?d(n,e,o):u(t,e,o).then((t=>h(t,n,e,r,c,o)))}function j(t,e){return e.items.find((e=>e.name===t))}function h(u,y,c,g,h,d){const U=null!=c?.portal?c.portal:s.getDefault(),N={portal:U,url:o(u.baseUrl),origin:\"portal-item\"},w=j(y,u.data);if(!w){const t=`The symbol name '${y}' could not be found`;return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:y}))}let S=i(h(w,g),N),D=w.thumbnail?.href??null;const O=w.thumbnail?.imageData;e()&&(S=r(S)??\"\",D=r(D));const P={portal:U,url:o(n(S)),origin:\"portal-item\"};return p(S,d).then((e=>{const r=\"cimRef\"===g?f(e.data):e.data,l=m(r,P);if(l&&t(l)){if(D){const t=i(D,N);l.thumbnail=new b({url:t})}else O&&(l.thumbnail=new b({url:`data:image/png;base64,${O}`}));u.styleUrl?l.styleOrigin=new a({portal:c.portal,styleUrl:u.styleUrl,name:y}):u.styleName&&(l.styleOrigin=new a({portal:c.portal,styleName:u.styleName,name:y}))}return l}))}function d(t,e,r){const l=y.replaceAll(/\\{SymbolName\\}/gi,t),i=null!=e.portal?e.portal:s.getDefault();return p(l,r).then((t=>{const e=f(t.data);return m(e,{portal:i,url:o(n(l)),origin:\"portal-item\"})}))}export{h as fetchSymbolFromStyle,j as getStyleItemFromStyle,g as resolveWebStyleSymbol};\n"],"names":["g","t","e","r","o","n","l","d","u","h","c","j","y","U","s","N","w","S","i","D","O","p","f","m","b","a"],"mappings":";;AAI8kB,SAASA,EAAEC,GAAEC,GAAEC,GAAEC,GAAE;AAAC,QAAMC,IAAEJ,EAAE;AAAK,SAAaI,KAAN,OAAQ,QAAQ,OAAO,IAAIC,EAAE,wDAAuD,wCAAwC,CAAC,IAA8BL,EAAE,cAA9B,4BAAwCM,EAAEF,GAAEH,GAAEE,CAAC,IAAEI,EAAEP,GAAEC,GAAEE,CAAC,EAAE,KAAM,CAAAH,MAAGQ,EAAER,GAAEI,GAAEH,GAAEC,GAAEO,GAAEN,CAAC,CAAC;AAAE;AAAC,SAASO,EAAEV,GAAEC,GAAE;AAAC,SAAOA,EAAE,MAAM,KAAM,CAAAA,MAAGA,EAAE,SAAOD,CAAC;AAAE;AAAC,SAASQ,EAAED,GAAEI,GAAEF,GAAEV,GAAES,GAAEF,GAAE;AAAC,QAAMM,IAAQH,GAAG,UAAT,OAAgBA,EAAE,SAAOI,EAAE,WAAU,GAAGC,IAAE,EAAC,QAAOF,GAAE,KAAIT,EAAEI,EAAE,OAAO,GAAE,QAAO,cAAa,GAAEQ,IAAEL,EAAEC,GAAEJ,EAAE,IAAI;AAAE,MAAG,CAACQ,GAAE;AAAC,UAAMf,IAAE,oBAAoBW,CAAC;AAAuB,WAAO,QAAQ,OAAO,IAAIN,EAAE,0CAAyCL,GAAE,EAAC,YAAWW,EAAC,CAAC,CAAC;AAAA,EAAC;AAAC,MAAIK,IAAEC,EAAET,EAAEO,GAAEhB,CAAC,GAAEe,CAAC,GAAEI,IAAEH,EAAE,WAAW,QAAM;AAAK,QAAMI,IAAEJ,EAAE,WAAW;AAAUd,EAAAA,EAAC,MAAKe,IAAEd,EAAEc,CAAC,KAAG,IAAGE,IAAEhB,EAAEgB,CAAC;AAAG,QAAM,IAAE,EAAC,QAAON,GAAE,KAAIT,EAAEC,EAAEY,CAAC,CAAC,GAAE,QAAO,cAAa;AAAE,SAAOI,EAAEJ,GAAEV,CAAC,EAAE,KAAM,CAAAL,MAAG;AAAC,UAAMC,IAAaH,MAAX,WAAasB,EAAEpB,EAAE,IAAI,IAAEA,EAAE,MAAKI,IAAEiB,EAAEpB,GAAE,CAAC;AAAE,QAAGG,KAAGL,EAAEK,CAAC,GAAE;AAAC,UAAGa,GAAE;AAAC,cAAMlB,IAAEiB,EAAEC,GAAEJ,CAAC;AAAE,QAAAT,EAAE,YAAU,IAAIkB,EAAE,EAAC,KAAIvB,EAAC,CAAC;AAAA,MAAC,MAAM,CAAAmB,MAAId,EAAE,YAAU,IAAIkB,EAAE,EAAC,KAAI,yBAAyBJ,CAAC,GAAE,CAAC;AAAG,MAAAZ,EAAE,WAASF,EAAE,cAAY,IAAImB,EAAE,EAAC,QAAOf,EAAE,QAAO,UAASF,EAAE,UAAS,MAAKI,EAAC,CAAC,IAAEJ,EAAE,cAAYF,EAAE,cAAY,IAAImB,EAAE,EAAC,QAAOf,EAAE,QAAO,WAAUF,EAAE,WAAU,MAAKI,EAAC,CAAC;AAAA,IAAE;AAAC,WAAON;AAAA,EAAC,CAAG;AAAA;AAAC,SAASC,EAAEN,GAAEC,GAAEC,GAAE;AAAC,QAAMG,IAAEM,EAAE,WAAW,oBAAmBX,CAAC,GAAEiB,IAAQhB,EAAE,UAAR,OAAeA,EAAE,SAAOY,EAAE,WAAY;AAAC,SAAOO,EAAEf,GAAEH,CAAC,EAAE,KAAM,CAAAF,MAAG;AAAC,UAAMC,IAAEoB,EAAErB,EAAE,IAAI;AAAE,WAAOsB,EAAErB,GAAE,EAAC,QAAOgB,GAAE,KAAId,EAAEC,EAAEC,CAAC,CAAC,GAAE,QAAO,cAAa,CAAC;AAAA,EAAC,CAAG;AAAA;","x_google_ignoreList":[0]}