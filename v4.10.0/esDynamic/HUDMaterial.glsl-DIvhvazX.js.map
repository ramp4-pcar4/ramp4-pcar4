{"version":3,"file":"HUDMaterial.glsl-DIvhvazX.js","sources":["../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Tile3DManager.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/featureSet/TiledFeatureStore.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Tile.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/featureSet/PBFPointFeatureSetView.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/fetching/Tile3DFetcher.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/placementUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DrawParameters.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/BufferRange.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/DrawCommand.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerBufferData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerOriginData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/DirectRenderer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/fov.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js","../../node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/Intersector.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/LodRenderer.js","../../node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js","../../node_modules/@arcgis/core/core/libs/gl-matrix-2/types/mat4.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ScaleInfo.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl.js","../../node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/FeaturePipelineRenderManager.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderGeometryBufferWriter.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderCommandEncoder.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderCommandContext.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/featureData/interfaces.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/featureData/processingUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/featureData/FeatureData.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/symbolizationUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BufferVectorMath.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/primitiveObjectUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/TestObjectSymbol.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/TestSymbol.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/UniqueValueFeatureRenderer.js","../../node_modules/@arcgis/core/geometry/projection/projectVectorToPoint.js","../../node_modules/@arcgis/core/geometry/support/coordinateSystem.js","../../node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js","../../node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/Symbolizer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipelineWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function t(t){t.code.add(o`const float MAX_RGBA_FLOAT =\n255.0 / 256.0 +\n255.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 +\n255.0 / 256.0 / 256.0 / 256.0 / 256.0;\nconst vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\nvec4 float2rgba(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\nvec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\nconst float toU8AsFloat = 1.0 / 255.0;\nreturn fixedPointU8 * toU8AsFloat;\n}`),t.code.add(o`const vec4 RGBA_2_FLOAT_FACTORS = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, RGBA_2_FLOAT_FACTORS);\n}`),t.code.add(o`const vec4 uninterpolatedRGBAToFloatFactors = vec4(\n1.0 / 256.0,\n1.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0,\n1.0 / 256.0 / 256.0 / 256.0 / 256.0\n);\nfloat uninterpolatedRGBAToFloat(vec4 rgba) {\nreturn (dot(round(rgba * 255.0), uninterpolatedRGBAToFloatFactors) - 0.5) * 2.0;\n}`)}export{t as RgbaFloatEncoding};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"vec4\",e.Draw,((e,s,t)=>e.setUniform4fv(r,o(s,t))))}}export{o as Float4DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import o from\"../../../../../core/Accessor.js\";import{createTask as r}from\"../../../../../core/asyncUtils.js\";import{throwIfAborted as s}from\"../../../../../core/promiseUtils.js\";import t from\"../../../../../core/ReactiveMap.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let a=class extends o{constructor(e){super(e),this._removing=0,this._tiles=new t}destroy(){for(const e of this._tiles.values())e.remove();this._tiles.clear()}get updating(){if(this._removing>0)return!0;for(const e of this._tiles.values())if(!e.finished)return!0;return!1}async onTileTreeChange(e){const{added:o,removed:s}=e,t=this._tiles,i=[];for(const r of s){const e=t.get(r);null!=e&&(e.abort(),t.delete(r),i.push({tileId:r}))}for(const c of o)t.has(c.id)||t.set(c.id,r((e=>this._addTile(c,e))));await this._removeTiles(i)}async _addTile(e,o){const r=await this.addTile(e,o);return s(o),r}async _removeTiles(e){this._removing++,await this.removeTiles(e),this._removing--}};e([i()],a.prototype,\"updating\",null),e([i({constructOnly:!0})],a.prototype,\"addTile\",void 0),e([i({constructOnly:!0})],a.prototype,\"removeTiles\",void 0),e([i()],a.prototype,\"_removing\",void 0),a=e([c(\"esri.views.3d.layers.graphics.pipeline.Tile3DManager\")],a);export{a as Tile3DManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Evented.js\";import{PooledRBush as t,BBox as i}from\"../../../../../../core/libs/rbush/PooledRBush.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../../../layers/graphics/centroid.js\";import s from\"../../../../../../layers/graphics/OptimizedGeometry.js\";class n{constructor(e,t){this._index=e,this._view=t}getObjectId(){return this._view.getObjectId(this._index)}getAttribute(e){return this._view.getAttribute(this._index,e)}getAttributeAsTimestamp(e){return this._view.getAttributeAsTimestamp(this._index,e)}getAttributes(){return this._view.getAttributes(this._index)}getOptimizedGeometry(){return this._view.getOptimizedGeometry(this._index)}getCentroid(e){return this._view.getCentroid(this._index,e)}getBounds(){return this._view.getBounds(this._index)}getBoundingBox(){return this._view.getBoundingBox(this._index)}cloneWithGeometry(e){return new o(this._index,this._view,e)}}class o extends n{constructor(e,t,i){super(e,t),this._geometryOverride=i}getOptimizedGeometry(){return this._geometryOverride}getCentroid(e){return r(new s,this._geometryOverride,e.hasZ,e.hasM)}}class d{constructor(){this._storedTiles=new Map,this._pageBounds=new Map,this.events=new e,this.featureAdapter=a.shared}addTile(e){this._storedTiles.set(e.descriptor.id,e);for(const t of e.pages)this._addPage(t)}removeTile(e){const t=this._storedTiles,i=t.get(e);if(null!=i){t.delete(e);for(const e of i.pages)this._removePage(e)}}_addPage(e){const{featureCount:i}=e;if(0===i)return;const r=new t(9,(t=>e.getBounds(t))),s=new Array;for(let t=0;t<i;++t)s[t]=t;r.load(s),this._pageBounds.set(e,r),this.events.emit(\"changed\")}_removePage(e){this._pageBounds.delete(e),this.events.emit(\"changed\")}clear(){this._storedTiles.clear(),this._pageBounds.clear(),this.events.emit(\"changed\")}forEach(e){for(const[t,i]of this._pageBounds)i.all((i=>e(new n(i,t))))}forEachInBounds(e,t){h.minX=e[0],h.minY=e[1],h.maxX=e[2],h.maxY=e[3];for(const[i,r]of this._pageBounds)r.search(h,(e=>t(new n(e,i))))}forEachBounds(e,t){for(const i of e)t(i.getBoundingBox())}getFullExtent(e){let t=1/0,i=1/0,r=-1/0,s=-1/0;for(const n of this._pageBounds.values()){const{minX:e,minY:o,maxX:d,maxY:a}=n.toJSON();t=Math.min(t,e),i=Math.min(i,o),r=Math.min(r,d),s=Math.min(s,a)}return{xmin:t,ymin:i,xmax:r,ymax:s,spatialReference:e}}}class a{getObjectId(e){return e.getObjectId()}getAttribute(e,t){return e.getAttribute(t)}getAttributeAsTimestamp(e,t){return e.getAttributeAsTimestamp(t)}getAttributes(e){return e.getAttributes()}getGeometry(e){return e.getOptimizedGeometry()}getCentroid(e,t){return e.getCentroid(t)}cloneWithGeometry(e,t){return e.cloneWithGeometry(t)}}a.shared=new a;const h=new i;export{n as FeatureHandle,d as TiledFeatureStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(s,t){this.descriptor=s,this.pages=t}}export{s as Tile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Error.js\";import t from\"../../../../../../core/pbf.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BBox as s}from\"../../../../../../core/libs/rbush/PooledRBush.js\";import{fromValues as n}from\"../../../../../../geometry/support/aaBoundingBox.js\";import{normalizeTransform as o}from\"../../../../../../geometry/support/quantizationUtils.js\";import i from\"../../../../../../layers/graphics/OptimizedGeometry.js\";import a from\"../../../../../../layers/support/FieldsIndex.js\";import{parseField as c,parseTransform as d}from\"../../../../../../rest/query/operations/pbfFeatureServiceParser.js\";class u{constructor(e){const r=new t(new Uint8Array(e),new DataView(e));this._reader=r,this._index=g(r)}get featureCount(){return this._index.featureIndices.length}get exceededTransferLimit(){return this._index.exceededTransferLimit}getObjectId(e){return this.getAttribute(e,this._index.objectIdFieldName)}getAttribute(e,t){const{_index:{fieldsIndex:r,attributeIndices:s}}=this,n=r.get(t)?.index;if(null==n)return;const o=s[e*r.fields.length+n],i=this._reader;return i.move(o),m(i)}getAttributeAsTimestamp(e,t){const r=this.getAttribute(e,t);return\"string\"==typeof r?new Date(r).getTime():\"number\"==typeof r||null==r?r:null}getAttributes(e){const{_index:{fieldsIndex:t,attributeIndices:r}}=this,s=e*t.fields.length,n=this._reader,o={};for(const i of t.fields){const e=r[s+i.index];n.move(e),o[i.name]=m(n)}return o}getCoordinates(e,t,r=0){const s=this._reader,{transform:n,featureIndices:o}=this._index,{scale:i,translate:a}=n;s.move(o[e]),this._readCoordinates(i,a,t,r)}getOptimizedGeometry(e){const t=r();return this.getCoordinates(e,t),new i([],t)}getCentroid(e,{hasZ:t,hasM:r}){this.getCoordinates(e,h);const[s,n,o]=h,a=[s,n];return t&&(a[3]=o),r&&(a[t?4:3]=0),new i([],a)}getBounds(e){this.getCoordinates(e,h);const[t,r]=h,n=new s;return n.minX=t,n.minY=r,n.maxX=t,n.maxY=r,n}getBoundingBox(e){this.getCoordinates(e,h);const[t,r,s]=h;return n(t,r,s,t,r,s)}readAllObjectIds(e,t=0){const r=this._reader,{_index:s,featureCount:n}=this,{objectIdFieldName:o,attributeIndices:i,fieldsIndex:a}=s,c=a.get(o).index,d=a.fields.length;for(let u=0;u<n;++u){const s=i[u*d+c];r.move(s),e[t++]=m(r)}return t}readAllCoordinates(e,t=0){const r=this._reader,{transform:s,featureIndices:n}=this._index,{scale:o,translate:i}=s;for(const a of n)r.move(a),t=this._readCoordinates(o,i,e,t);return t}_readCoordinates([e,t,r],[s,n,o],i,a){const c=2,d=3,u=this._reader,g=u.getLength(),f=u.pos()+g;for(;u.pos()<f&&u.next();)switch(u.tag()){case c:{const c=u.getLength(),g=u.pos()+c;for(;u.pos()<g&&u.next();)if(u.tag()===d)u.getUInt32(),i[a++]=s+e*u.getSInt64(),i[a++]=n+t*u.getSInt64(),i[a++]=o+r*u.getSInt64();else u.skip();break}default:u.skip()}return a}}function g(e){const t=2;for(;e.next();){if(e.tag()===t)return f(e.getMessage());e.skip()}p()}function f(e){const t=1;for(;e.next();){if(e.tag()===t)return l(e.getMessage());e.skip()}p()}function l(e){const t=9,r=12,s=13,n=15,i=7,u=0,g=10,f=1,l=1;let m,h,x=!1,b=!1,I=0;const w=new Array,_=new Array,k=new Array;for(;e.next();)switch(e.tag()){case l:h=e.getString();break;case i:e.getEnum()!==u&&p();break;case t:x=e.getBool()??!1;break;case r:m=o(e.processMessage(d));break;case s:{const t=e.processMessage(c);t.index=I++,w.push(t);break}case n:{_.push(e.pos());const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r&&e.next();)if(e.tag()===f)k.push(e.pos()),e.skip();else e.skip();break}case g:b=e.getBool()??!1;break;default:e.skip()}const j=new a(w);return null!=m&&b&&null!=h&&j.has(h)||p(),{transform:m,exceededTransferLimit:x,fieldsIndex:j,objectIdFieldName:h,featureIndices:_,attributeIndices:k}}function p(){const t=new e(\"pbf-parsing-failed\",\"Error while parsing PBF\",new Error);throw console.error(t),t}function m(e){const t=1,r=2,s=3,n=4,o=5,i=6,a=7,c=8,d=9,u=e.getLength(),g=e.pos()+u;for(;e.pos()<g&&e.next();)switch(e.tag()){case t:return e.getString();case r:return e.getFloat();case s:return e.getDouble();case n:return e.getSInt32();case o:return e.getUInt32();case i:return e.getInt64();case a:return e.getUInt64();case c:return e.getSInt64();case d:return e.getBool();default:return e.skip(),null}return null}const h=r();export{u as PBFPointFeatureSetView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../../../core/promiseUtils.js\";import{toExtent as t}from\"../../../../../../geometry/support/aaBoundingRect.js\";import{executeQueryPBFBuffer as r}from\"../../../../../../rest/query/operations/query.js\";import{Tile as o}from\"../Tile.js\";import{PBFPointFeatureSetView as s}from\"../featureSet/PBFPointFeatureSetView.js\";const i=8e3,a=4,n=4;class c{constructor(e,t,r,o,s){this.spatialReference=e,this.url=r,this.objectIdField=o,this.capabilities=s;const{supportsMaxRecordCountFactor:n,maxRecordCount:c}=this.capabilities.query,u=n?a:1,p=(c??i)*u;this._pageSize=Math.min(i,p);const l=t.clone();l.cacheHint=!0,l.resultType=\"tile\",l.outSpatialReference=e,l.returnGeometry=!0,l.returnZ=!0,l.maxRecordCountFactor=u,l.num=this._pageSize,l.outFields=[o],this._baseQuery=l}async fetch(r,s){const{spatialReference:i}=this,a=t(r.extent,i),c=this._baseQuery.clone();c.geometry=a;const u=new Array;let p=0,l=!1,h=1;for(;!l;){const t=[];for(let e=0;e<h;++e)t.push(this._fetchPage(c,p++,s));const r=await Promise.all(t);e(s);for(const e of r){const t=0!==e.featureCount;l||=!e.exceededTransferLimit||!t,t&&u.push(e)}h=Math.min(h+1,n)}return new o(r,u)}async _fetchPage(t,o,i){const a=t.clone();a.start=o*this._pageSize;const n=(await r(this.url,a,{signal:i})).data;return e(i),new s(n)}}export{c as Tile3DFetcher};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{debugFlags as e}from\"../../support/debugFlags.js\";import{getFontMetrics as i}from\"./FontMetrics.js\";import{getTextHelperCanvas as n}from\"./TextHelperCanvas.js\";const s=1;class r{constructor(t,e,i,n){this.text=t,this._alignment=e,this._parameters=i,this._maxSize=n,this._textWidths=[],this._lineWidths=[],this._renderPixelRatio=null,this._metricsCached=null,this.key=`${t}--${this._parameters.key}-${this._alignment}`,this._lines=t.replaceAll(\" \",\" \").split(/\\r?\\n/)}get displayWidth(){return Math.ceil(this._displayWidth+2*this._horizontalPadding)}get displayHeight(){let t=this._metrics.firstLineAscent;for(let e=0;e<this._lines.length-1;e++)t+=this._lineSpacing;return t+=this._metrics.lastLineDescent,Math.ceil(t+2*this._haloSize+2*this._verticalPadding)}get renderedWidth(){return this._toRoundedRenderUnit(this.displayWidth)}get renderedHeight(){return this._toRoundedRenderUnit(this.displayHeight)}get firstRenderedBaselinePosition(){return this._toRenderUnit(this._firstLineYOffset+this._metrics.firstLineAscent)}get _firstLineYOffset(){return this._verticalPadding+this._haloSize}get _metrics(){if(null==this._metricsCached){const t=n(a,l,l).getContext(\"2d\"),e=this._parameters.definition.pixelRatio,s=this._fontSize*e;this._parameters.setFontProperties(t,s);let r=2*this._haloSize;const h=this._parameters.definition.font;\"italic\"!==h.style&&\"oblique\"!==h.style&&\"bold\"!==h.weight&&\"bolder\"!==h.weight||(r+=.3*t.measureText(\"A\").width),this._textWidths.length=0,this._lineWidths.length=0;let o=0,d=0,_=0,g=0,m=0;this._lines.forEach(((i,n)=>{const s=t.measureText(i),h=s.width/e,a=h+r;this._textWidths.push(h),this._lineWidths.push(a),o=Math.max(o,a),g=Math.max(g,s.actualBoundingBoxAscent/e),m=Math.max(m,s.actualBoundingBoxDescent/e),0===n&&(d=s.actualBoundingBoxAscent/e),n===this._lines.length-1&&(_=s.actualBoundingBoxDescent/e)}));const f=i(this._parameters),u=Math.max(g,f.maxAscent),p=Math.max(m,f.maxDescent),x=d,R=\"underline\"===this._parameters.definition.font.decoration?p:_,S=o;this._metricsCached=new c(x,R,u,p,S)}return this._metricsCached}get _lineSpacing(){return(this._midLineHeight+this._linePadding)*this._parameters.definition.lineSpacingFactor}get _midLineHeight(){return this._metrics.midLineHeight}get _linePadding(){return this._midLineHeight*d}get _midLineAscent(){return this._metrics.maxLineAscent}get _renderedFontSize(){return this._toRenderUnit(this._fontSize)}get _fontSize(){return this._parameters.definition.size}get _renderedHaloSize(){return this._toRenderUnit(this._haloSize)}get _haloSize(){return this._parameters.haloSize}get _horizontalPadding(){return this._hasBackground?this._parameters.definition.background.padding[0]:0}get _verticalPadding(){return Math.max(this._hasBackground?this._parameters.definition.background.padding[1]:0,s)}get _hasBackground(){return!!this._parameters.backgroundStyle}get renderPixelRatio(){if(null==this._renderPixelRatio){const t=this._parameters.definition.pixelRatio;this._renderPixelRatio=Math.min(t,Math.min(this._maxSize[0]/this.displayWidth,this._maxSize[1]/this.displayHeight))}return this._renderPixelRatio}_getLineXOffset(t){switch(this._alignment){case o.Left:return this._horizontalPadding;case o.Center:return(this.displayWidth-this._lineWidths[t])/2;case o.Right:return this.displayWidth-this._horizontalPadding-this._lineWidths[t]}}render(t,i,n){t.save();const s=i/=this.renderPixelRatio,r=n/=this.renderPixelRatio,h=this._haloSize,o=this._firstLineYOffset+this._metrics.firstLineAscent;i+=h,n+=o;const a=this._haloSize>0;a&&this._renderHalo(t,s,r,h,o),this._parameters.setFontProperties(t,this._renderedFontSize);for(let e=0;e<this._lines.length;++e){const s=this._lines[e],r=this._getLineXOffset(e);a&&(t.globalCompositeOperation=\"destination-out\",t.fillStyle=\"rgb(0, 0, 0)\",this._fillText(t,s,i+r,n),this._renderLineDecoration(t,i+r,n,this._textWidths[e])),t.globalCompositeOperation=\"source-over\",t.fillStyle=this._parameters.textStyle,this._fillText(t,s,i+this._getLineXOffset(e),n),this._renderLineDecoration(t,i+r,n,this._textWidths[e]),n+=this._lineSpacing}if(e.TEXT_SHOW_BASELINE){t.strokeStyle=_,t.setLineDash([2,2]),t.lineWidth=1;let e=r+o;for(let i=0;i<this._lines.length;++i)this._drawLine(t,[s,e],[s+this.displayWidth,e]),e+=this._lineSpacing}if(e.TEXT_SHOW_BORDER&&(t.strokeStyle=_,t.setLineDash([]),t.lineWidth=1,this._drawBox(t,[s,r],[this.displayWidth,this.displayHeight])),this._hasBackground){const e=this._parameters.definition.background.borderRadius*this.renderPixelRatio;this._roundedRect(t,s,r,e),t.globalCompositeOperation=\"destination-over\",t.fillStyle=this._parameters.backgroundStyle,t.fill()}t.restore()}_renderLineDecoration(t,e,i,n,s=!1){if(\"none\"===this._parameters.definition.font.decoration||0===n)return;const r=1,h=Math.max(this._parameters.definition.size/16,r);switch(this._parameters.definition.font.decoration){case\"underline\":i+=2*h;break;case\"line-through\":i-=.33*this._midLineAscent}const o=s?this._haloSize:0;t.strokeStyle=s?this._parameters.haloStyle:this._parameters.textStyle,t.lineWidth=this._toRenderUnit(h+2*o),t.beginPath(),t.moveTo(this._toRenderUnit(e-o),this._toRenderUnit(i)),t.lineTo(this._toRenderUnit(e+n+o),this._toRenderUnit(i)),t.stroke()}_roundedRect(e,i,n,s){i=this._toRenderUnit(i),n=this._toRenderUnit(n);const r=this.renderedWidth,h=this.renderedHeight;0!==s?(s=t(s,0,Math.floor(h/2)),e.beginPath(),e.moveTo(i,n+s),e.arcTo(i,n,i+s,n,s),e.lineTo(i+r-s,n),e.arcTo(i+r,n,i+r,n+s,s),e.lineTo(i+r,n+h-s),e.arcTo(i+r,n+h,i+r-s,n+h,s),e.lineTo(i+s,n+h),e.arcTo(i,n+h,i,n+h-s,s),e.closePath()):e.rect(i,n,r,h)}_renderHalo(t,e,i,s,r){const h=this.renderedWidth,o=this.renderedHeight,d=n(a,Math.max(h,l),Math.max(o,l)),_=d.getContext(\"2d\");_.clearRect(0,0,h,o),this._parameters.setFontProperties(_,this._renderedFontSize),_.fillStyle=this._parameters.haloStyle,_.strokeStyle=this._parameters.haloStyle;const c=this._renderedHaloSize<3;_.lineJoin=c?\"miter\":\"round\",c?this._renderHaloEmulated(_,s,r):this._renderHaloNative(_,s,r);let g=r;for(let n=0;n<this._lines.length;++n){const t=this._getLineXOffset(n);this._renderLineDecoration(_,s+t,g,this._textWidths[n],!0),g+=this._lineSpacing}t.globalAlpha=this._parameters.definition.halo.color[3],t.drawImage(d,0,0,h,o,this._toRenderUnit(e),this._toRenderUnit(i),h,o),t.globalAlpha=1}_renderHaloEmulated(t,e,i){for(let n=0;n<this._lines.length;++n){const s=this._lines[n],r=this._getLineXOffset(n);for(const[n,o]of h)this._fillText(t,s,e+r+this._haloSize*n,i+this._haloSize*o);i+=this._lineSpacing}}_renderHaloNative(t,e,i){const n=2*this._haloSize;for(let s=0;s<this._lines.length;++s){const r=this._lines[s],h=this._getLineXOffset(s),o=5,a=.1;for(let s=0;s<o;s++){const d=1-(o-1)*a+s*a;t.lineWidth=this._toRenderUnit(d*n),this._strokeText(t,r,e+h,i)}i+=this._lineSpacing}}get _displayWidth(){return this._metrics.displayWidth}_toRenderUnit(t){return t*this.renderPixelRatio}_toRoundedRenderUnit(t){return Math.round(t*this.renderPixelRatio)}_fillText(t,e,i,n){t.fillText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_strokeText(t,e,i,n){t.strokeText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_drawLine(t,e,i){t.beginPath(),t.moveTo(this._toRoundedRenderUnit(e[0])+.5,this._toRoundedRenderUnit(e[1])+.5),t.lineTo(this._toRoundedRenderUnit(i[0])+.5,this._toRoundedRenderUnit(i[1])+.5),t.stroke()}_drawBox(t,e,i){const n=this._toRenderUnit(e[0]),s=this._toRenderUnit(e[1]),r=this._toRenderUnit(i[0]),h=this._toRenderUnit(i[1]),o=Math.floor(n)+.5,a=Math.ceil(n+r)-.5,d=Math.floor(s)+.5,l=Math.ceil(s+h)-.5;t.beginPath(),t.moveTo(o,d),t.lineTo(a,d),t.lineTo(a,l),t.lineTo(o,l),t.lineTo(o,d),t.stroke()}}const h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var o;!function(t){t[t.Left=0]=\"Left\",t[t.Center=1]=\"Center\",t[t.Right=2]=\"Right\"}(o||(o={}));const a={canvas:null},d=.2,l=512,_=\"rgb(255, 0, 255, 0.5)\";class c{get firstLineHeight(){return this.firstLineAscent+this.maxLineDescent}get midLineHeight(){return this.maxLineAscent+this.maxLineDescent}get lastLineHeight(){return this.maxLineAscent+this.lastLineDescent}constructor(t,e,i,n,s){this.firstLineAscent=t,this.lastLineDescent=e,this.maxLineAscent=i,this.maxLineDescent=n,this.displayWidth=s}}export{o as TextRenderAlignment,r as TextRenderer,s as textVerticalPaddingPx};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t,set as e}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as r,ZEROS as o}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{TextRenderAlignment as c,textVerticalPaddingPx as n}from\"../../webgl-engine/lib/TextRenderer.js\";const i=Object.freeze({left:0,center:.5,right:1}),s=Object.freeze({\"bottom-left\":r(0,0),bottom:r(.5,0),\"bottom-right\":r(1,0),left:r(0,.5),center:r(.5,.5),right:r(1,.5),\"top-left\":r(0,1),top:r(.5,1),\"top-right\":r(1,1)});function f(t){switch(t){case\"left\":return c.Left;case\"right\":return c.Right;default:return c.Center}}function a(t){switch(t){case\"bottom-left\":case\"left\":case\"top-left\":return\"left\";case\"bottom\":case\"center\":case\"top\":return\"center\";case\"bottom-right\":case\"right\":case\"top-right\":return\"right\"}}function l(t){switch(t){case\"bottom-left\":case\"bottom\":case\"bottom-right\":return\"bottom\";case\"left\":case\"center\":case\"right\":return\"center\";case\"top-left\":case\"top\":case\"top-right\":return\"top\"}}function m(t,e){switch(e){case\"bottom\":return\"left\"===t?\"bottom-left\":\"right\"===t?\"bottom-right\":\"bottom\";case\"center\":return t;case\"top\":return\"left\"===t?\"top-left\":\"right\"===t?\"top-right\":\"top\"}}function u(t){return\"middle\"===t?\"center\":t}function h(r,c){switch(r){case\"top\":return e(c,0,n);case\"bottom\":return e(c,0,-n);default:return t(c,o)}}export{m as anchorFromPlacements,a as horizontalPlacementFromAnchor,i as horizontalPlacementToAnchorX,s as namedAnchorToHUDMaterialAnchorPos,f as textRenderAlignmentFromHorizontalPlacement,u as verticalPlacementFromAlignment,l as verticalPlacementFromAnchor,h as verticalScreenOffsetFromAlignment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Accessor.js\";import{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutput.js\";const t={required:[]},s={required:[r.Depth]};class n extends e{precompile(e){const r=this.acquireTechniques(e);return c(r),null!=r}consumes(){return t}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}modify(e){}get numGeometries(){return 0}get hasOccludees(){return!1}get hasEmissions(){return!1}forEachGeometry(e){}queryRenderOccludedState(e){return!1}}class u extends n{}class o extends n{}function c(e){Array.isArray(e)?e.forEach((e=>e?.release())):e?.release()}export{o as AsyncRenderPlugin,s as ConsumesDepth,t as ConsumesNone,u as SyncRenderPlugin,c as releaseTechniques};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ResourceState as s}from\"./basicInterfaces.js\";class t{constructor(s,t){this._material=s,this._repository=t,this._map=new Map}dispose(){this._map.forEach(((s,t)=>{null!=s&&this._repository.release(this._material,t)}))}load(t,e,r){const i=this._material.produces.get(e);if(!i?.(r))return null;this._map.has(r)||this._map.set(r,this._repository.acquire(this._material,e,r));const a=this._map.get(r);if(null!=a){if(a.ensureResources(t)===s.LOADED)return a;this._repository.requestRender()}return null}}export{t as GLMaterials};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{VertexNormalDrawParameters as e}from\"../core/shaderLibrary/attributes/VertexNormal.glsl.js\";class i extends e{constructor(e=r()){super(),this.origin=e}get slicePlaneLocalOrigin(){return this.origin}}export{i as DrawParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar E,I;!function(E){E[E.ADD=0]=\"ADD\",E[E.UPDATE=1]=\"UPDATE\",E[E.REMOVE=2]=\"REMOVE\"}(E||(E={})),function(E){E[E.NONE=0]=\"NONE\",E[E.VISIBILITY=1]=\"VISIBILITY\",E[E.GEOMETRY=2]=\"GEOMETRY\",E[E.TRANSFORMATION=4]=\"TRANSFORMATION\",E[E.HIGHLIGHT=8]=\"HIGHLIGHT\",E[E.OCCLUDEE=16]=\"OCCLUDEE\"}(I||(I={}));export{E as DirtyOperation,I as DirtyState};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t=0,o=0){this.from=t,this.to=o}get numElements(){return this.to-this.from}}function o(t){const o=new Map;t.forAll((t=>o.set(t.from,t)));let e=!0;for(;e;){e=!1;for(let r=0;r<t.length;++r){const n=t.data[r],s=o.get(n.to);if(!s)return;n.to=s.to,o.delete(s.from),t.removeUnordered(s),e=!0}}}export{t as BufferRange,o as mergeAdjacentRanges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferRange as e}from\"./BufferRange.js\";class i extends e{constructor(e,i,s){super(i,s),this.geometry=e}get isVisible(){return this.geometry.visible}get hasHighlights(){return this.isVisible&&this.geometry.hasHighlights}foreachHighlightGroup(e){this.isVisible&&this.geometry.foreachHighlightGroup(e)}get hasOccludees(){return null!=this.geometry.occludees}}export{i as Instance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.first=0,this.count=0}}export{t as DrawCommand};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport s from\"../../../../../core/PooledArray.js\";import{BufferRange as t}from\"./BufferRange.js\";import{DrawCommand as e}from\"./DrawCommand.js\";class n{constructor(){this._numElements=0,this._instances=new Map,this.holes=new s({allocator:s=>s||new t,deallocator:null}),this.hasHiddenInstances=!1,this.hasOccludees=!1,this.drawCommandsDirty=!0,this.highlightGroups=new Set,this.drawCommandsDefault=h(),this.drawCommandsHighlights=new Map,this.drawCommandsOccludees=h(),this.drawCommandsShadowHighlightRest=h()}get numElements(){return this._numElements}get instances(){return this._instances}get hasHighlights(){return this.highlightGroups.size>0}resetInstanceSummary(){this.hasHiddenInstances=!1,this.hasOccludees=!1,this.highlightGroups.clear()}updateIfDrawCommandsDirty(s){if(this.drawCommandsDirty){this.resetInstanceSummary();for(const s of this.instances.values())this.updateDrawState(s);this.updateDrawCommands(s)}}addInstance(s,t){this.deleteInstance(s),this._instances.set(s,t),this._numElements+=t.numElements}deleteInstance(s){const t=this._instances.get(s);t&&(this._numElements-=t.numElements,this._instances.delete(s))}updateInstance(s,t,e){const n=this._instances.get(s);n&&(this._numElements-=n.numElements,n.from=t,n.to=e,this._numElements+=n.numElements)}updateDrawState(s){s.isVisible?(s.foreachHighlightGroup((s=>this.highlightGroups.add(s))),s.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(s){if(this.drawCommandsDefault.clear(),this.drawCommandsHighlights.clear(),this.drawCommandsOccludees.clear(),this.drawCommandsShadowHighlightRest.clear(),this.drawCommandsDirty=!1,0===this._instances.size)return;if(!this.needsMultipleCommands()){const t=this.drawCommandsDefault.pushNew(),e=this.holes.front();return null!=this.vao&&1===this.holes.length&&e.to===Math.floor(this.vao.byteSize/s)?(t.first=0,void(t.count=e.from)):(t.first=1/0,t.count=0,this._instances.forEach((s=>{t.first=Math.min(t.first,s.from),t.count=Math.max(t.count,s.to)})),void(t.count-=t.first))}const t=Array.from(this._instances.values()).sort(((s,t)=>s.from===t.from?s.to-t.to:s.from-t.from)),{drawCommandsHighlights:e}=this;for(const n of t)n.isVisible&&(o(n.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,n),n.hasHighlights?n.foreachHighlightGroup((s=>{let t=e.get(s);t||(t=h(),e.set(s,t)),o(t,n)})):o(this.drawCommandsShadowHighlightRest,n))}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}class i extends n{}function a(s){return null!=s.vao}function h(){return new s({allocator:s=>s||new e,deallocator:s=>s})}function o(s,t){const e=s.back();if(null==e){const e=s.pushNew();return e.first=t.from,void(e.count=t.numElements)}if(r(e,t)){const s=t.from-e.first+t.numElements;e.count=s}else{const e=s.pushNew();e.first=t.from,e.count=t.numElements}}function r(s,t){return s.first+s.count>=t.from}export{n as PerBufferData,i as PerVaoData,a as hasVao};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(s){this.origin=s,this.buffers=new Array}dispose(){this.buffers.forEach((s=>s.vao.dispose())),this.buffers.length=0}findBuffer(s){return this.buffers.find((r=>r.instances.has(s)))}}export{s as PerOriginData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{removeUnordered as t,filterInPlace as r}from\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import{nextHighestPowerOfTwo as i}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as s}from\"../../../../../core/maybe.js\";import{NestedMap as o}from\"../../../../../core/NestedMap.js\";import a from\"../../../../../core/PooledArray.js\";import{addMany as n}from\"../../../../../core/SetUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import{subclass as u}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{copy as h,invert as f,transpose as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{glLayout as d}from\"../../../support/buffer/glUtil.js\";import{ShaderOutput as g}from\"../../core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as p}from\"../../effects/RenderPlugin.js\";import{GLMaterials as y}from\"../../lib/GLMaterials.js\";import{DirtyState as _}from\"../../lib/ModelDirtyTypes.js\";import{RenderSlot as b}from\"../../lib/RenderSlot.js\";import{assert as w}from\"../../lib/Util.js\";import{DrawParameters as v}from\"../DrawParameters.js\";import{BufferRange as C,mergeAdjacentRanges as O}from\"./BufferRange.js\";import{Instance as A}from\"./Instance.js\";import{PerBufferData as E,hasVao as B}from\"./PerBufferData.js\";import{PerOriginData as S}from\"./PerOriginData.js\";let x=class extends p{get _hasAnyHighlight(){return this._highlightGroups.size>0}constructor(e){super(e),this._dataByOrigin=new Map,this._drawParameters=new v,this._highlightGroups=new Set,this.drapedPriority=0,this._produces=new Map,this._hasOccludees=!1}destroy(){this._glMaterials=s(this._glMaterials),this._dataByOrigin.forEach((e=>e.dispose())),this._dataByOrigin.clear(),this._vaoCache=null}initialize(){this.material.produces.forEach(((e,t)=>{this._produces.set(t,(t=>!(0===this._dataByOrigin.size||!(t!==g.Highlight&&t!==g.ShadowHighlight||this._hasAnyHighlight))&&e(t)))}))}initializeRenderContext(e,t){this._glMaterials=new y(this.material,t??e.materials),this._bufferWriter=this.material.createBufferWriter(),this._vaoCache=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,d(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}get produces(){return this._produces}get hasOccludees(){return this._hasOccludees}get hasEmissions(){return this.material.hasEmissions}get isDecoration(){return this.material.parameters.isDecoration}queryRenderOccludedState(e){return this.material.queryRenderOccludedState(e)}get numGeometries(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.instances.size),0))),e}get usedMemory(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.vao.usedMemory),0))),e}forEachGeometry(e){this._dataByOrigin.forEach((t=>t.buffers.forEach((t=>t.instances.forEach((({geometry:t})=>e(t)))))))}modify(e){this._updateGeometries(e.updates),this._addAndRemoveGeometries(e.adds,e.removes),this._updateDrawCommands()}_updateGeometries(e){const t=this._bufferWriter;if(null==t)return;const r=t.vertexBufferLayout.stride/4;for(const i of e){const e=i.renderGeometry,s=this._dataByOrigin.get(e.localOrigin.id),o=s?.findBuffer(e.id);if(null==o)return;const a=o.instances.get(e.id);if(i.updateType&(_.GEOMETRY|_.TRANSFORMATION)){const i=W(t.elementCount(a.geometry.geometry.attributes)*r),s=t.vertexBufferLayout.createView(i.buffer);this._writeGeometry(e,s,0),o.vao.vertexBuffers.get(\"geometry\").setSubData(i,a.from*r,0,a.numElements*r)}i.updateType&(_.HIGHLIGHT|_.OCCLUDEE|_.VISIBILITY)&&(o.drawCommandsDirty=!0)}}_computeDeltas(e,t){const r=new o;for(const i of e){const e=i.localOrigin;if(null==e)continue;let t=r.get(e.id,null);null==t&&(t=new D(e.vec3),r.set(e.id,null,t)),t.changes.push(i)}for(const i of t){const e=i.localOrigin;if(null==e)continue;const t=this._dataByOrigin.get(e.id),s=t?.findBuffer(i.id);if(null==s)continue;let o=r.get(e.id,s);null==o&&(o=new D(e.vec3),r.set(e.id,s,o)),o.changes.push(i)}return r}_addAndRemoveGeometries(e,r){if(null==this._bufferWriter||null==this._vaoCache)return;const{_bufferWriter:i,_dataByOrigin:s}=this,o=i.vertexBufferLayout.stride/4,a=this._computeDeltas(e,r);a.forEach(((e,r)=>{const n=e.get(null),l=n?.changes??[];a.delete(r,null);let u=s.get(r);if(e.forEach(((e,n)=>{if(a.delete(r,n),null==n)return void w(!1,\"No VAO for removed geometries\");if(n.instances.size===e.changes.length)return this._vaoCache.deleteVao(n.vao),t(u.buffers,n),void(0===u.buffers.length&&0===l.length&&s.delete(r));const h=n.numElements,f=n.vao.byteSize/4,c=l.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),m=e.changes.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),d=Math.min((h+c-m)*o,z),g=d>f;d>H&&d<f/2?(e.changes.forEach((({id:e})=>n.deleteInstance(e))),n.instances.forEach((({geometry:e})=>l.push(e))),this._vaoCache.deleteVao(n.vao),t(u.buffers,n)):g?this._applyAndRebuild(n,l,e):this._applyRemoves(n,e)})),l.length>0)for(null==u&&(u=new S(n.origin),s.set(r,u)),u.buffers.forEach((e=>this._applyAdds(e,l)));l.length>0;)u.buffers.push(this._applyAndRebuild(new E,l,null))}))}_updateDrawCommands(){this._highlightGroups.clear(),this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.buffers.forEach((e=>{e.updateIfDrawCommandsDirty(this._bufferWriter.vertexBufferLayout.stride),e.hasHighlights&&n(this._highlightGroups,e.highlightGroups),this._hasOccludees=this._hasOccludees||e.hasOccludees}))}))}_applyAndRebuild(e,t,r){if(r)for(const m of r.changes)e.deleteInstance(m.id);const i=this._bufferWriter,s=i.vertexBufferLayout.stride,o=s/4,a=Math.floor(z/o);let n=e.numElements;for(;t.length>0;){const r=t.pop(),s=i.elementCount(r.geometry.attributes);if(n+s>a&&n>0){t.push(r);break}n+=s;const o=new A(r,0,0);w(null==e.instances.get(r.id)),e.addInstance(r.id,o)}const l=n*o,u=W(l),h=i.vertexBufferLayout.createView(u.buffer);let f=0;e.resetInstanceSummary(),e.instances.forEach(((t,r)=>{this._writeGeometry(t.geometry,h,f);const s=f;f+=i.elementCount(t.geometry.geometry.attributes),e.updateInstance(r,s,f),e.updateDrawState(t)})),this._vaoCache.deleteVao(e.vao),e.vao=this._vaoCache.newVao(V(l)),e.vao.vertexBuffers.get(\"geometry\").setSubData(u,0,0,f*o),e.holes.clear();const c=e.holes.pushNew();return c.from=f,c.to=Math.floor(e.vao.byteSize/s),e.updateDrawCommands(s),e}_applyRemoves(e,t){if(0===t.changes.length||null==this._bufferWriter)return;for(const a of t.changes){const t=a.id,r=e.instances.get(t);if(!r)continue;e.deleteInstance(t);const i=G.back();if(i){if(i.to===r.from){i.to=r.to;continue}if(i.from===r.to){i.from=r.from;continue}}const s=G.pushNew();s.from=r.from,s.to=r.to}O(G);const r=this._bufferWriter.vertexBufferLayout.stride/4,i=G.reduce(((e,t)=>Math.max(e,t.numElements)),0)*r,s=W(i);s.fill(0,0,i);const o=e.vao.vertexBuffers.get(\"geometry\");G.forAll((e=>o.setSubData(s,e.from*r,0,e.numElements*r))),e.holes.pushArray(G.data,G.length),G.forAll(((e,t)=>G.data[t]=null)),G.clear(),e.drawCommandsDirty=!0}_applyAdds(e,t){if(0===t.length||null==this._bufferWriter)return;if(!B(e))return void this._applyAndRebuild(e,t,null);const i=this._bufferWriter,s=i.vertexBufferLayout.stride/4,o=e.numElements,a=t.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),n=Math.min((o+a)*s,z),l=4*n;if(e.vao.byteSize<V(z-H)&&l>e.vao.byteSize)return void this._applyAndRebuild(e,t,null);O(e.holes);const u=new Array;for(const r of t){const t=i.elementCount(r.geometry.attributes),s=R(e.holes,t);u.push(s)}const h=e.vao.vertexBuffers.get(\"geometry\");let f=0,c=0,m=0;const d=W(n),g=i.vertexBufferLayout.createView(d.buffer);t.forEach(((t,r)=>{const o=u[r];if(null==o)return;if(!(m===o)){const e=m-c;e>0&&h.setSubData(d,c*s,0,e*s),c=o,f=0}const a=i.elementCount(t.geometry.attributes);this._writeGeometry(t,g,f),f+=a,m=o+a;const n=new A(t,o,o+a);w(null==e.instances.get(t.id)),e.addInstance(t.id,n),e.drawCommandsDirty=!0}));const p=m-c;p>0&&h.setSubData(d,c*s,0,p*s),r(t,((e,t)=>null==u[t]))}_writeGeometry(e,t,r){null!=this._bufferWriter&&(h(j,e.transformation),j[12]-=e.localOrigin.vec3[0],j[13]-=e.localOrigin.vec3[1],j[14]-=e.localOrigin.vec3[2],f(M,j),c(M,M),this._bufferWriter.write(j,M,e.geometry.attributes,e.geometry.objectAndLayerIdColor,t,r))}updateAnimation(e){return this.material.update(e)}acquireTechniques(e){if(!this.material.shouldRender(e))return null;const{output:t,bind:r}=e,i=this.material.produces.get(r.slot);if(!i?.(t))return null;const{highlightGroupName:s,slot:o}=r,a=t===g.ShadowHighlight,n=t===g.Highlight,l=n||a,u=e=>l&&(0===this._highlightGroups.size||n&&!!s&&!e.has(s));if(u(this._highlightGroups))return null;const h=t===g.ShadowExcludeHighlight,f=!(l||h);for(const{buffers:c}of this._dataByOrigin.values())for(const i of c){if(u(i.highlightGroups))continue;const n=a?i.drawCommandsHighlights.size>0:l?s?i.drawCommandsHighlights.get(s):i.drawCommandsHighlights.size>0:((h&&i.needsMultipleCommands()?i.drawCommandsShadowHighlightRest:i.drawCommandsDefault)||null)?.length??!1,c=f&&i.drawCommandsOccludees||null;if(n||c?.length){const i=this._glMaterials.load(e.rctx,o,t),s=i?.beginSlot(r);if(s)return s}}return null}render(e,t){const{output:r,bind:i}=e,{slot:s,highlightGroupName:o}=i,a=r===g.Highlight;if(a&&!o)return;const n=r===g.ShadowHighlight,l=a||n,u=r===g.ShadowExcludeHighlight,h=!(l||u),f=s===b.OCCLUDER_MATERIAL||s===b.TRANSPARENT_OCCLUDER_MATERIAL?s:null,{rctx:c}=e;c.runAppleAmdDriverHelper();const m=c.bindTechnique(t,i,this.material.parameters);for(const d of this._dataByOrigin.values())for(const e of d.buffers){if(a&&(!e.hasHighlights||!e.drawCommandsHighlights.has(o)))continue;if(n&&!e.hasHighlights)continue;const r=()=>{const t=[];for(const r of e.drawCommandsHighlights.values())t.push(r);return t},s=l&&!n?e.drawCommandsHighlights.get(o)??null:null,g=n?r():l?s?[s]:N:(u&&e.needsMultipleCommands()?[e.drawCommandsShadowHighlightRest]:[e.drawCommandsDefault])||N,p=g.some((e=>e.length>0)),y=h&&e.drawCommandsOccludees||null;if(p||y?.length){if(this._drawParameters.origin=d.origin,m.bindDraw(i,this.material.parameters,this._drawParameters),t.ensureAttributeLocations(e.vao),c.bindVAO(e.vao),p)for(const e of g)c.setPipelineState(t.getPipeline(!1,f)),e.forAll((e=>c.drawArrays(t.primitiveType,e.first,e.count)));y?.length&&(c.setPipelineState(t.getPipeline(!0,f)),y.forAll((e=>c.drawArrays(t.primitiveType,e.first,e.count))))}}}get test(){}};e([l({constructOnly:!0})],x.prototype,\"material\",void 0),x=e([u(\"esri.views.3d.webgl-engine.materials.renderers.MergedRenderer\")],x);class D{constructor(e){this.origin=e,this.changes=new Array}}function R(e,t){const r=e.find((e=>e.numElements>=t));if(null==r)return null;const i=r.from;return r.from+=t,r.from>=r.to&&e.removeUnordered(r),i}const j=m(),M=m(),G=new a({allocator:e=>e||new C,deallocator:null}),H=65536,L=4*H,I=1024,T=16777216,z=T/4;let P=new Float32Array(H);function W(e){return P.length<e&&(P=new Float32Array(e)),P}function V(e){const t=4*e;return t<=I?I:t<L?i(t):Math.max(Math.min(Math.ceil(1.5*t/L)*L,T),t)}const N=[];export{x as MergedRenderer,V as sizeForVao};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{glLayout as i}from\"../../../../support/buffer/glUtil.js\";import{ShaderOutput as s}from\"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as o}from\"../../../../webgl-engine/effects/RenderPlugin.js\";import{GLMaterials as a}from\"../../../../webgl-engine/lib/GLMaterials.js\";import{RenderSlot as n}from\"../../../../webgl-engine/lib/RenderSlot.js\";import{DrawParameters as l}from\"../../../../webgl-engine/materials/DrawParameters.js\";import{sizeForVao as h}from\"../../../../webgl-engine/materials/renderers/MergedRenderer.js\";let m=class extends o{constructor(e){super(e),this._hasHighlights=!1,this._glMaterials=null,this._produces=new Map,this._renderGeometries=new Map,this._vaoCache=null,this._drawParameters=new l,this._bufferWriter=null}get produces(){return this._produces}initialize(){this._bufferWriter=this.material.createBufferWriter(),this.material.produces.forEach(((e,r)=>{this._produces.set(r,(r=>!!(r!==s.Highlight&&r!==s.ShadowHighlight||this._hasHighlights)&&e(r)))}))}destroy(){this._glMaterials.dispose();const e=this._renderGeometries.keys();for(const r of e)this.removeRenderGeometry(r)}acquireTechniques(e){const r=this.material;if(!r.shouldRender(e))return null;const{output:t,bind:i}=e,o=r.produces.get(i.slot);if(!o?.(t))return null;if((t===s.Highlight||t===s.ShadowHighlight)&&!this._hasHighlights)return null;const a=this._glMaterials.load(e.rctx,i.slot,t);return a?.beginSlot(i)}render(e,r){const t=this._renderGeometries;if(0===t.size)return;const{bind:i}=e,s=i.slot===n.OCCLUDER_MATERIAL||i.slot===n.TRANSPARENT_OCCLUDER_MATERIAL?i.slot:null,o=e.rctx;o.runAppleAmdDriverHelper(),o.bindTechnique(r,i,this.material.parameters);const a=r.program;for(const[n,l]of t)this._drawParameters.origin=l.localOrigin,a.bindDraw(i,this.material.parameters,this._drawParameters),r.ensureAttributeLocations(l.vao),o.bindVAO(l.vao),o.setPipelineState(r.getPipeline(!1,s)),o.drawArrays(r.primitiveType,0,l.numElements)}initializeRenderContext(e,r){this._glMaterials=new a(this.material,e.materials);const t=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,i(this._bufferWriter.vertexBufferLayout));this._vaoCache=t}uninitializeRenderContext(){}addRenderGeometry(e,r,t){this.removeRenderGeometry(e);const i=this._bufferWriter.vertexBufferLayout.stride,s=this._vaoCache.newVao(h(r.data.byteLength));s.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data),0,0,r.elementCount*i);const o={localOrigin:t,vao:s,numElements:r.elementCount};return this._renderGeometries.set(e,o),o}removeRenderGeometry(e){const r=this._renderGeometries.get(e);null!=r&&(this._vaoCache.deleteVao(r.vao),this._renderGeometries.delete(e))}};e([r({constructOnly:!0})],m.prototype,\"material\",void 0),m=e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")],m);export{m as DirectRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}export{n as fovd2fovx,r as fovd2fovy,t as fovx2fovd,a as fovy2fovd};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{MaterialChangeSet as e}from\"./ChangeSet.js\";var r,t;function n(r){const t=new Map,n=r=>{let n=t.get(r);return n||(n=new e,t.set(r,n)),n};return r.removes.forAll((e=>{o(e)&&n(e.material).removes.push(e)})),r.adds.forAll((e=>{o(e)&&n(e.material).adds.push(e)})),r.updates.forAll((e=>{o(e.renderGeometry)&&n(e.renderGeometry.material).updates.push(e)})),t}function o(e){return e.geometry.indexCount>=1}!function(e){e[e.Default=0]=\"Default\",e[e.Screenshot=1]=\"Screenshot\",e[e.ObjectAndLayerID=2]=\"ObjectAndLayerID\"}(r||(r={})),function(e){e[e.TOP=0]=\"TOP\",e[e.RIGHT=1]=\"RIGHT\",e[e.BOTTOM=2]=\"BOTTOM\",e[e.LEFT=3]=\"LEFT\"}(t||(t={}));export{t as PaddingSide,r as RendererTarget,n as splitRenderGeometryChangeSetByMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import e from\"../../../core/Logger.js\";import{lerp as r}from\"../../../core/mathUtils.js\";import{createScreenPointArray as s,createRenderScreenPointArray3 as o}from\"../../../core/screenUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{copy as a,multiply as p,invert as u,transpose as l,frustum as _,equals as c,lookAt as v}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as w}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{copy as d,exactEquals as y}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as g}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{d as m,i as f,j as x,c as M,p as D,a as j,f as T,z as R,y as P,h as F,l as V,e as O,n as C,o as b}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{d as I,e as E,a as L,c as H,f as A,t as G}from\"../../../chunks/vec42.js\";import{fromValues as B,create as U}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{create as k,copy as z,fromMatrix as W}from\"../../../geometry/support/frustum.js\";import{create as X}from\"../../../geometry/support/ray.js\";import{projectPointSignedLength as Y}from\"../../../geometry/support/vector.js\";import{ViewingMode as q}from\"../../ViewingMode.js\";import{fovd2fovx as N,fovx2fovd as J,fovd2fovy as K,fovy2fovd as Q}from\"../webgl-engine/lib/fov.js\";import{PaddingSide as Z}from\"../webgl-engine/lib/rendererUtils.js\";var $;let tt=$=class extends i{constructor(t){super(t),this._ray=X(),this._viewport=B(0,0,1,1),this._padding=B(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=g(1,1e3),this._viewDirty=!0,this._viewMatrix=w(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=w(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=w(),this._frustumDirty=!0,this._frustum=k(),this._fullViewport=U(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=S(),this._up=S(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,\"_center\")}get ray(){return m(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,\"_up\")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){a(this._viewMatrix,t),this.notifyChange(\"_viewMatrix\"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),f(S(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),f(S(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),f(S(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_nearFar\"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_nearFar\"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=I(U(),this._viewport,1/this.pixelRatio),i=this._get(\"screenViewport\");return i&&E(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=I(U(),this._padding,1/this.pixelRatio),i=this._get(\"screenPadding\");return i&&E(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[Z.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[Z.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get fullWidth(){return this._viewport[2]+this._padding[Z.RIGHT]+this._padding[Z.LEFT]}set fullWidth(t){this.width=t-(this._padding[Z.RIGHT]+this._padding[Z.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[Z.TOP]+this._padding[Z.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[Z.TOP]+this._padding[Z.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[Z.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[Z.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){L(this._padding,t)||(this._viewport[0]+=t[Z.LEFT]-this._padding[Z.LEFT],this._viewport[1]+=t[Z.BOTTOM]-this._padding[Z.BOTTOM],this._viewport[2]-=t[Z.RIGHT]+t[Z.LEFT]-(this._padding[Z.RIGHT]+this._padding[Z.LEFT]),this._viewport[3]-=t[Z.TOP]+t[Z.BOTTOM]-(this._padding[Z.TOP]+this._padding[Z.BOTTOM]),H(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_padding\"),this.notifyChange(\"_viewport\"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&(p(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return u(w(),this.projectionMatrix)||this._get(\"inverseProjectionMatrix\")||w()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return N(this._fov,this.width,this.height)}set fovX(t){this._fov=J(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return K(this._fov,this.width,this.height)}set fovY(t){this._fov=Q(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return x(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&(u(this._viewInverseTransposeMatrix,this.viewMatrix),l(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2)*2,r=e*this._aspect,s=e/this.rows,o=r/this.columns,n=-r/2+this.column*o,h=n+o,a=-e/2+this.row*s,p=a+s,u=_(w(),n*(1+2*this._padding[Z.LEFT]/t),h*(1+2*this._padding[Z.RIGHT]/t),a*(1+2*this._padding[Z.BOTTOM]/i),p*(1+2*this._padding[Z.TOP]/i),this.near,this.far),l=this._get(\"projectionMatrix\");return l&&c(l,u)?l:u}copyFrom(t){M(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,H(this._viewport,t.viewport),this.notifyChange(\"_viewport\"),H(this._padding,t.padding),this.notifyChange(\"_padding\"),d(this._nearFar,t.nearFar),this.notifyChange(\"_nearFar\"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||(a(this._viewMatrix,t.viewMatrix),this.notifyChange(\"_viewMatrix\")),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||(z(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(a(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),H(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return(new $).copyFrom(this)}equals(t){return D(this.eye,t.eye)&&D(this.center,t.center)&&D(this.up,t.up)&&L(this._viewport,t.viewport)&&L(this._padding,t.padding)&&y(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||A(t.screenPadding,this.screenPadding)>=i||A(this.screenViewport,t.screenViewport)>=i||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;j(st,t.eye,t.center),j(ot,this.eye,this.center);const e=T(st,ot),r=R(st),s=R(ot),o=5e-4;return e*e>=(1-1e-10)*r*s&&P(t.eye,this.eye)<Math.max(r,s)*o*o}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs(Y(this.viewForward,m(st,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=s()){return t[0]=(this.padding[Z.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[Z.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[Z.LEFT]+this.width*i,t[1]=this.padding[Z.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==et&&M(et,t),et[3]=1,G(et,et,this.projectionMatrix);const e=Math.abs(et[3]);F(et,et,1/e);const s=this.fullViewport;i[0]=r(0,s[0]+s[2],.5+.5*et[0]),i[1]=r(0,s[1]+s[3],.5+.5*et[1]),i[2]=.5*(et[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;et[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],et[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],et[2]=(2*t[2]-1)*t[3],et[3]=t[3],null!=this.inverseProjectionMatrix&&(G(et,et,this.inverseProjectionMatrix),i[0]=et[0],i[1]=et[1],i[2]=et[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,nt),this.renderToScreen(nt,i),i}projectToRenderScreen(t,i){if(et[0]=t[0],et[1]=t[1],et[2]=t[2],et[3]=1,G(et,et,this.viewProjectionMatrix),0===et[3])return null;const e=et;F(e,e,1/Math.abs(et[3]));const s=this.fullViewport,o=r(0,s[0]+s[2],.5+.5*e[0]),n=r(0,s[1]+s[3],.5+.5*e[1]);return\"x\"in i?(i.x=o,i.y=n):(i[0]=o,i[1]=n,i.length>2&&(i[2]=.5*(e[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,nt),i)}unprojectFromRenderScreen(t,i){if(p(rt,this.projectionMatrix,this.viewMatrix),!u(rt,rt))return null;const e=this.fullViewport;return et[0]=2*(t[0]-e[0])/e[2]-1,et[1]=2*(t[1]-e[1])/e[3]-1,et[2]=2*t[2]-1,et[3]=1,G(et,et,rt),0===et[3]?null:(i[0]=et[0]/et[3],i[1]=et[1]/et[3],i[2]=et[2]/et[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,o=i*this.pixelRatio,n=Math.max(s-e/2,0),h=Math.max(this.fullHeight-o-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-o-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),l=r-p- -Math.min(o-r/2,0);return[Math.round(n),Math.round(h),Math.round(u),Math.round(l)]}computeUp(t){t===q.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){m(st,this.center,this.eye);const t=V(this.center);t<1?(f(this._up,0,0,1),this._markViewDirty(),this.notifyChange(\"_up\")):Math.abs(T(st,this.center))>.9999*V(st)*t||(O(this._up,st,this.center),O(this._up,this._up,st),C(this._up,this._up),this.notifyChange(\"_up\"),this._markViewDirty())}_computeUpLocal(){b(st,this.eye,this.center),Math.abs(st[2])<=.9999&&(F(st,st,st[2]),f(this._up,-st[0],-st[1],1-st[2]),C(this._up,this._up),this.notifyChange(\"_up\"),this._markViewDirty())}_compareAndSetView(t,i,r=\"\"){\"number\"==typeof t[0]&&isFinite(t[0])&&\"number\"==typeof t[1]&&isFinite(t[1])&&\"number\"==typeof t[2]&&isFinite(t[2])?D(t,i)||(M(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):e.getLogger(\"esri.views.3d.webgl-engine.lib.RenderCamera\").warn(\"RenderCamera vector contains invalid number, ignoring value\")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&(W(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(v(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange(\"_viewMatrix\"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};t([n()],tt.prototype,\"_viewport\",void 0),t([n()],tt.prototype,\"_padding\",void 0),t([n()],tt.prototype,\"_fov\",void 0),t([n()],tt.prototype,\"_nearFar\",void 0),t([n()],tt.prototype,\"_viewDirty\",void 0),t([n()],tt.prototype,\"_viewMatrix\",void 0),t([n()],tt.prototype,\"_pixelRatio\",void 0),t([n()],tt.prototype,\"pixelRatio\",null),t([n()],tt.prototype,\"row\",void 0),t([n()],tt.prototype,\"column\",void 0),t([n()],tt.prototype,\"_rows\",void 0),t([n()],tt.prototype,\"rows\",null),t([n()],tt.prototype,\"_columns\",void 0),t([n()],tt.prototype,\"columns\",null),t([n()],tt.prototype,\"eye\",null),t([n()],tt.prototype,\"center\",null),t([n()],tt.prototype,\"_center\",void 0),t([n()],tt.prototype,\"up\",null),t([n()],tt.prototype,\"_up\",void 0),t([n()],tt.prototype,\"viewMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"viewForward\",null),t([n({readOnly:!0})],tt.prototype,\"viewUp\",null),t([n({readOnly:!0})],tt.prototype,\"viewRight\",null),t([n({readOnly:!0})],tt.prototype,\"nearFar\",null),t([n()],tt.prototype,\"near\",null),t([n()],tt.prototype,\"far\",null),t([n()],tt.prototype,\"viewport\",null),t([n({readOnly:!0})],tt.prototype,\"screenViewport\",null),t([n({readOnly:!0})],tt.prototype,\"screenPadding\",null),t([n()],tt.prototype,\"x\",null),t([n()],tt.prototype,\"y\",null),t([n()],tt.prototype,\"width\",null),t([n()],tt.prototype,\"height\",null),t([n()],tt.prototype,\"fullWidth\",null),t([n()],tt.prototype,\"fullHeight\",null),t([n({readOnly:!0})],tt.prototype,\"_aspect\",null),t([n()],tt.prototype,\"padding\",null),t([n({readOnly:!0})],tt.prototype,\"projectionMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"inverseProjectionMatrix\",null),t([n()],tt.prototype,\"fov\",null),t([n()],tt.prototype,\"fovX\",null),t([n()],tt.prototype,\"fovY\",null),t([n()],tt.prototype,\"viewInverseTransposeMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"_projectionMatrixInternal\",null),t([n()],tt.prototype,\"relativeElevation\",void 0),tt=$=t([h(\"esri.views.3d.webgl.RenderCamera\")],tt);const it=tt,et=U(),rt=w(),st=S(),ot=S(),nt=o();export{it as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferObject as e}from\"../../../../webgl/BufferObject.js\";import{Usage as t}from\"../../../../webgl/enums.js\";class r{constructor(r,i,s){this._elementSize=i,this._buffer=e.createVertex(r,t.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.usedMemory}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{reallocShrinkThreshold as t,reallocGrowthFactor as i,reallocShrinkFactor as e}from\"../../../../../core/arrayUtils.js\";import{BufferViewVec3f as s,BufferViewMat3f as a,BufferViewVec4f as r,BufferViewVec4u8 as n}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as h}from\"../Util.js\";import{VertexAttribute as d}from\"../VertexAttribute.js\";import _ from\"./BackedBufferObject.js\";class c{constructor(t){this.modelOriginHi=t.getField(d.INSTANCEMODELORIGINHI,s),this.modelOriginLo=t.getField(d.INSTANCEMODELORIGINLO,s),this.model=t.getField(d.INSTANCEMODEL,a),this.modelNormal=t.getField(d.INSTANCEMODELNORMAL,a),this.featureAttribute=t.getField(d.INSTANCEFEATUREATTRIBUTE,r),this.color=t.getField(d.INSTANCECOLOR,n),this.objectAndLayerIdColor=t.getField(d.INSTANCEOBJECTANDLAYERIDCOLOR,n)}}class f{constructor(t,i){this._rctx=t,this._instanceBufferLayout=i,this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){h(!this._updating,\"already updating\"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){h(this._updating,\"not updating\"),this.size<t*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){h(this._updating,\"not updating\"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),h(this._headIndex!==this._tailIndex,\"invalid pointers\"),t}freeTail(){h(this._updating,\"not updating\"),h(this.size>0,\"invalid size\");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(u,Math.floor(this._capacity*i));this._resize(t)}_shrink(){const t=Math.max(u,Math.floor(this._capacity*e));this._resize(t)}_resize(t){if(h(this._updating,\"not updating\"),t===this._capacity)return;const i=new _(this._rctx,this._instanceBufferLayout.stride,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);h(e===t,\"invalid compaction\"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const u=64;export{f as RenderInstanceData,c as RenderInstanceDataView,u as initialCapacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{reallocGrowthFactor as s}from\"../../../../../core/arrayUtils.js\";import i from\"../../../../../core/Evented.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{fromMat4 as o,invert as h,transpose as l}from\"../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as n}from\"../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{multiply as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as g}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as m}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BufferViewMat4f64 as d,BufferViewVec3f64 as _,BufferViewMat3f as p,BufferViewVec2f as T,BufferViewVec4f64 as u,BufferViewVec4f as L,BufferViewVec4u8 as E,BufferViewUint8 as A}from\"../../../../../geometry/support/buffer/BufferView.js\";import{scaleFromMatrix as v}from\"../../../support/mathUtils.js\";import{newLayout as M}from\"../../../support/buffer/InterleavedLayout.js\";import{assert as O}from\"../Util.js\";import{VertexAttribute as I}from\"../VertexAttribute.js\";import{initialCapacity as S}from\"./RenderInstanceData.js\";var F;function C(t){let e=M().mat4f64(I.LOCALTRANSFORM).mat4f64(I.GLOBALTRANSFORM).vec4f64(I.BOUNDINGSPHERE).vec3f64(I.MODELORIGIN).mat3f(I.INSTANCEMODEL).mat3f(I.INSTANCEMODELNORMAL).vec2f(I.MODELSCALEFACTORS);return t.includes(I.FEATUREATTRIBUTE)&&(e=e.vec4f(I.FEATUREATTRIBUTE)),t.includes(I.COLOR)&&(e=e.vec4u8(I.COLOR)),t.includes(I.OBJECTANDLAYERIDCOLOR)&&(e=e.vec4u8(I.OBJECTANDLAYERIDCOLOR)),e=e.u8(I.STATE).u8(I.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]=\"ALLOCATED\",t[t.DEFAULT_ACTIVE=2]=\"DEFAULT_ACTIVE\",t[t.VISIBLE=4]=\"VISIBLE\",t[t.HIGHLIGHT=8]=\"HIGHLIGHT\",t[t.HIGHLIGHT_ACTIVE=16]=\"HIGHLIGHT_ACTIVE\",t[t.REMOVE=32]=\"REMOVE\",t[t.TRANSFORM_CHANGED=64]=\"TRANSFORM_CHANGED\",t[t.ACTIVE=18]=\"ACTIVE\"}(F||(F={}));class R{constructor(t){this.localTransform=t.getField(I.LOCALTRANSFORM,d),this.globalTransform=t.getField(I.GLOBALTRANSFORM,d),this.modelOrigin=t.getField(I.MODELORIGIN,_),this.model=t.getField(I.INSTANCEMODEL,p),this.modelNormal=t.getField(I.INSTANCEMODELNORMAL,p),this.modelScaleFactors=t.getField(I.MODELSCALEFACTORS,T),this.boundingSphere=t.getField(I.BOUNDINGSPHERE,u),this.featureAttribute=t.getField(I.FEATUREATTRIBUTE,L),this.color=t.getField(I.COLOR,E),this.objectAndLayerIdColor=t.getField(I.OBJECTANDLAYERIDCOLOR,E),this.state=t.getField(I.STATE,A),this.lodLevel=t.getField(I.LODLEVEL,A)}}let b=class extends e{constructor(t,e){super(t),this.events=new i,this._capacity=0,this._size=0,this._next=0,this._highlightGroupMap=new Map,this._highlightGroupMapPrev=new Map,this._layout=C(e),this._capacity=S,this._buffer=this._layout.createBuffer(this._capacity),this._view=new R(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,F.ALLOCATED),this._size++,this.events.emit(\"instances-changed\"),t}removeInstance(t){const e=this._view.state;O(t>=0&&t<this._capacity&&!!(e.get(t)&F.ALLOCATED),\"invalid instance handle\"),this._getStateFlag(t,F.ACTIVE)?this._setStateFlags(t,F.REMOVE):this.freeInstance(t),this.events.emit(\"instances-changed\")}freeInstance(t){const e=this._view.state;O(t>=0&&t<this._capacity&&!!(e.get(t)&F.ALLOCATED),\"invalid instance handle\"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=G,i=y;e.localTransform.getMat(t,D),e.globalTransform.getMat(t,N);const a=c(N,N,D);m(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),o(i,a),e.model.setMat(t,i);const r=v(G,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),h(i,i),l(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,F.TRANSFORM_CHANGED),this.events.emit(\"instance-transform-changed\",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,y),s.modelOrigin.getVec(t,G),e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=0,e[4]=y[3],e[5]=y[4],e[6]=y[5],e[7]=0,e[8]=y[6],e[9]=y[7],e[10]=y[8],e[11]=0,e[12]=G[0],e[13]=G[1],e[14]=G[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(G,this,t),e*=Math.max(G[0],G[1],G[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(G,this,t),e*=w(G[0],G[1],G[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,F.VISIBLE,e),this.events.emit(\"instance-visibility-changed\",{index:t}))}getVisible(t){return this._getStateFlag(t,F.VISIBLE)}setHighlight(t,e,s){let i=this._highlightGroupMap.get(t);e?(i||(i=new Set,this._highlightGroupMap.set(t,i)),i.add(s)&&(this._setStateFlag(t,F.HIGHLIGHT,!0),this.events.emit(\"instance-highlight-changed\"))):i?.delete(s)&&(0===i.size&&(this._highlightGroupMap.delete(t),this._setStateFlag(t,F.HIGHLIGHT,!1)),this.events.emit(\"instance-highlight-changed\"))}getHighlight(t){return this._getStateFlag(t,F.HIGHLIGHT)}foreachHighlightGroupPrev(t,e){this._highlightGroupMapPrev.get(t)?.forEach(e),this._highlightGroupMapPrev.delete(t)}foreachHighlightGroup(t,e){const s=this._highlightGroupMap.get(t);s?.forEach(e),s?this._highlightGroupMapPrev.set(t,new Set(s)):this._highlightGroupMapPrev.delete(t)}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(S,Math.floor(this._capacity*s)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new R(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&F.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function w(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}t([a({constructOnly:!0})],b.prototype,\"shaderTransformation\",void 0),t([a()],b.prototype,\"_size\",void 0),t([a({readOnly:!0})],b.prototype,\"size\",null),b=t([r(\"esri.views.3d.webgl-engine.lib.lodRendering.InstanceData\")],b);const G=f(),y=n(),D=g(),N=g();export{b as InstanceData,R as InstanceDataView,F as StateFlags};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e}from\"../../../../../chunks/vec32.js\";import{w as s,c as i,a as r}from\"../../../../../chunks/sphere.js\";import{maxScale as a}from\"../../../support/mathUtils.js\";import h from\"../Octree.js\";class n extends h{constructor(e,r){super((t=>s(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);e(r(this._tmpSphere),this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*a(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}export{n as InstanceOctree};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}export{e as LevelSelector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clone as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class t{constructor(s,t,r){this.object=s,this.geometryId=t,this.triangleNr=r}}class r extends t{constructor(t,r,c,e){super(t,r,c),this.center=null!=e?s(e):null}}class c extends r{}class e{constructor(s){this.layerUid=s}}class o extends e{constructor(s,t){super(s),this.graphicUid=t}}export{o as Graphic3DTarget,r as HudTarget,e as LayerTarget,t as ObjectTarget,c as ValidHudTarget};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{m as t}from\"../../../../chunks/vec32.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{e}from\"../../../../chunks/boundedPlane.js\";import{IntersectorType as n}from\"./IntersectorInterfaces.js\";function o(t){return null!=t?.dist}function c(r){return(n,o,c)=>(t(u,n,o,c),!e(r,u))}function s(t){return o(t)&&t.intersector===n.OBJECT&&!!t.target}function i(t){return o(t)&&t.intersector===n.HUD&&!!t.target&&\"center\"in t.target&&null!=t.target.center}const u=r();export{i as isHudIntersectorResult,s as isObjectIntersectorResult,o as isValidIntersectorResult,c as sliceFilterPredicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as r,IDENTITY as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{g as s,t as e,h as a,l as n,c as o,n as h}from\"../../../../chunks/vec32.js\";import{create as l,UNIT_Z as d}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as c}from\"../../../../chunks/vec42.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{create as m,fromPoints as y,copy as u}from\"../../../../geometry/support/ray.js\";import{ViewingMode as p}from\"../../../ViewingMode.js\";import{IntersectorOptions as g,StoreResults as _,IntersectorType as O}from\"./IntersectorInterfaces.js\";import{HudTarget as L}from\"./IntersectorTarget.js\";import{isValidIntersectorResult as v}from\"./intersectorUtils.js\";import{IntersectorTransform as j,getVerticalOffsetObject3D as w}from\"./verticalOffsetUtils.js\";const E=1e-5;class b{constructor(t){this.options=new g,this._results=new A,this.transform=new j,this.tolerance=E,this.verticalOffset=null,this._ray=m(),this._rayEnd=l(),this._rayBeginTransformed=l(),this._rayEndTransformed=l(),this.viewingMode=t??p.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,i){this.resetWithRay(y(t,r,this._ray),i)}resetWithRay(t,r){this.camera=r,t!==this._ray&&u(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===p.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,s(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,i,s,e){this.point=r,this.filterPredicate=s,this.tolerance=i??E;const a=w(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const i of t){const t=i.getSpatialQueryAccelerator?.();null!=t?(null!=a?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,a):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):i.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const s=t.effectiveTransformation,a=w(this.verticalOffset);for(const n of r){if(!n.visible)continue;const{material:r,id:o}=n;if(!r.visible)continue;this.transform.setAndInvalidateLazyTransforms(s,n.transformation),e(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),e(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const h=this.transform.transform;null!=a&&(a.objectTransform=this.transform),r.intersect(n,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,s,e,a,n,l)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const d=a?this._results.hud:this._results,c=a?a=>{const h=new L(t,o,e,l);a.set(O.HUD,h,r,s,i,n)}:i=>i.set(O.OBJECT,{object:t,geometryId:o,triangleNr:e},r,s,h,n);if((null==d.min.drapedLayerOrder||n>=d.min.drapedLayerOrder)&&(null==d.min.dist||r<d.min.dist)&&c(d.min),this.options.store!==_.MIN&&(null==d.max.drapedLayerOrder||n<d.max.drapedLayerOrder)&&(null==d.max.dist||r>d.max.dist)&&c(d.max),this.options.store===_.ALL)if(a){const t=new I(this._ray);c(t),this._results.hud.all.push(t)}else{const t=new B(this._ray);c(t),this._results.all.push(t)}}}))}}sortResults(t=this._results.all){t.sort(((t,r)=>t.dist!==r.dist?(t.dist??0)-(r.dist??0):t.drapedLayerOrder!==r.drapedLayerOrder?x(t.drapedLayerOrder,r.drapedLayerOrder):x(t.drapedLayerGraphicOrder,r.drapedLayerGraphicOrder)))}}function x(t,r){return(r??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}function T(t){return new b(t)}class A{constructor(){this.min=new B(m()),this.max=new B(m()),this.hud={min:new I(m()),max:new I(m()),all:new Array},this.ground=new B(m()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class B{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?(a(M,this.ray.direction,this.dist),n(M)):null}getIntersectionPoint(t){return!!v(this)&&(a(M,this.ray.direction,this.dist),s(t,this.ray.origin,M),!0)}getTransformedNormal(t){return o(R,this.normal),R[3]=0,c(R,R,this.transformation),o(t,R),h(t,t)}constructor(t){this.intersector=O.OBJECT,this.normal=l(),this.transformation=r(),this._ray=m(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=O.OBJECT,u(t,this._ray)}set(r,s,e,a,n,h,l){this.intersector=r,this.dist=e,o(this.normal,a??d),t(this.transformation,n??i),this.target=s,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=l}copy(r){u(r.ray,this._ray),this.intersector=r.intersector,this.dist=r.dist,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,o(this.normal,r.normal),t(this.transformation,r.transformation)}}class I extends B{constructor(){super(...arguments),this.intersector=O.HUD}}function G(t){return new B(t)}const M=l(),R=f();export{E as defaultTolerance,T as newIntersector,G as newIntersectorResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VertexArrayObject as e}from\"../../../webgl/VertexArrayObject.js\";class r extends e{}export{r as VertexArrayObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{IntersectorType as t}from\"../IntersectorInterfaces.js\";import{Graphic3DTarget as r}from\"../IntersectorTarget.js\";import{isValidIntersectorResult as e}from\"../intersectorUtils.js\";class s extends r{constructor(t,r,e,s,i,o){super(t,r),this.layerUid=t,this.graphicUid=r,this.geometryId=e,this.triangleNr=s,this.baseBoundingSphere=i,this.numLodLevels=o}}function i(r){return e(r)&&r.intersector===t.LOD&&!!r.target}export{s as LodTarget,i as isLodIntersectorResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glLayout as t}from\"../../../support/buffer/glUtil.js\";import{ContentObject as e}from\"../ContentObject.js\";import{Default3D as r}from\"../DefaultVertexAttributeLocations.js\";import{GLMaterials as s}from\"../GLMaterials.js\";import{newIntersectorResult as o}from\"../Intersector.js\";import{IntersectorType as n,StoreResults as i}from\"../IntersectorInterfaces.js\";import{VertexArrayObject as a}from\"../VertexArrayObject.js\";import{LodTarget as u}from\"./Intersector.js\";import{BufferObject as m}from\"../../../../webgl/BufferObject.js\";import{Usage as l}from\"../../../../webgl/enums.js\";function f(t,e,r,s=null){const o=t.createBufferWriter(),n=o.vertexBufferLayout,i=o.elementCount(e),a=n.createBuffer(i);return o.write(null,null,e,s,a,0),{material:t,vertexBufferLayout:n,buffer:a.buffer,elementCount:i,boundingInfo:r}}class d{constructor(o,n){const i=o.renderContext.rctx,u=n.geometry;let d=null;d=u instanceof e?f(u.material,u.attributes,u.boundingInfo):u;const c=d.material;this._materials=o.materials,c.setParameters({instancedDoublePrecision:!0}),this.geometry=u,this.material=c,this.glMaterials=new s(c,this._materials),this.vertexBufferLayout=d.vertexBufferLayout,this.vbo=m.createVertex(i,l.STATIC_DRAW,d.buffer),this.vao=new a(i,r,new Map([[\"geometry\",t(d.vertexBufferLayout)]]),new Map([[\"geometry\",this.vbo]])),this.vertexCount=d.elementCount}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(t,r,s,a,m,l,f,d){if(!(this.geometry instanceof e))return;const c=this.geometry.id;this.material.intersect(this.geometry,t.transform.transform,t,s,a,((e,s,a,p,y)=>{if(e>=0){if(null!=r&&!r(t.rayBegin,t.rayEnd,e))return;const p=new u(l.layerUid,l.graphicUid(m),c,a,f,d);if((null==t.results.min.drapedLayerOrder||y>=t.results.min.drapedLayerOrder)&&(null==t.results.min.dist||e<t.results.min.dist)&&t.results.min.set(n.LOD,p,e,s,t.transform.transform,y),t.options.store!==i.MIN&&(null==t.results.max.drapedLayerOrder||y>=t.results.max.drapedLayerOrder)&&(null==t.results.max.dist||e>t.results.max.dist)&&t.results.max.set(n.LOD,p,e,s,t.transform.transform,y),t.options.store===i.ALL){const r=o(t.results.min.ray);r.set(n.LOD,p,e,s,t.transform.transform,y),t.results.all.push(r)}}}))}}export{d as LodComponentData,f as createLodComponentRenderGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/arrayUtils.js\";import{isAborted as n,throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as r,expandWithVec3 as i,center as s,diameter as c}from\"../../../../../geometry/support/aaBoundingBox.js\";import{LodComponentData as u}from\"./LodComponentData.js\";class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((o=>e.controller.schedule((()=>new u(e,o)),i)))),c=s.map((o=>\"fulfilled\"===o.status?o.value:null)).filter(o);if(n(i)||c.length!==s.length){c.forEach((o=>o.destroy())),t(i);for(const o of s)if(\"rejected\"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach((o=>o.destroy()))}intersect(o,n,t,e,r,i,s){this.components.forEach((c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const o=r();this.components.forEach((n=>{null!=n.boundingInfo&&(i(o,n.boundingInfo.bbMin),i(o,n.boundingInfo.bbMax))})),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=e();s(o,n),this._boundingSphere={center:n,radius:.5*c(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((o,n)=>o+n.triangleCount),0)}}export{a as LodLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{encodeDoubleArray as e}from\"../../../../webgl/doublePrecisionUtils.js\";function n(t,e){return null==t&&(t=[]),t.push(e),t}function r(t,e){if(null==t)return null;const n=t.filter((t=>t!==e));return 0===n.length?null:n}function l(t,n,r,l,i){o[0]=t.get(n,0),o[1]=t.get(n,1),o[2]=t.get(n,2),e(o,s,3),r.set(i,0,s[0]),l.set(i,0,s[1]),r.set(i,1,s[2]),l.set(i,1,s[3]),r.set(i,2,s[4]),l.set(i,2,s[5])}const o=t(),s=new Float32Array(6);export{n as addObject3DStateID,l as encodeDoubleVec3,r as removeObject3DStateID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../../core/arrayUtils.js\";import r from\"../../../../../core/Error.js\";import{someMap as n}from\"../../../../../core/MapUtils.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{isAborted as s,throwIfAborted as i}from\"../../../../../core/promiseUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as c}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{d as h,f as d,t as u}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as m,fromValues as p}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{debugFlags as _}from\"../../../support/debugFlags.js\";import{glLayout as g}from\"../../../support/buffer/glUtil.js\";import{newLayout as I}from\"../../../support/buffer/InterleavedLayout.js\";import y from\"../../../webgl/RenderCamera.js\";import{ShaderOutput as C}from\"../../core/shaderLibrary/ShaderOutput.js\";import{AsyncRenderPlugin as v}from\"../../effects/RenderPlugin.js\";import{Default3D as E}from\"../DefaultVertexAttributeLocations.js\";import{IntersectorType as R}from\"../IntersectorInterfaces.js\";import b from\"../Octree.js\";import{RenderSlot as D}from\"../RenderSlot.js\";import{assert as A}from\"../Util.js\";import{VertexAttribute as T}from\"../VertexAttribute.js\";import{InstanceData as L,StateFlags as S}from\"./InstanceData.js\";import{InstanceOctree as O}from\"./InstanceOctree.js\";import{LevelSelector as M}from\"./LevelSelector.js\";import{LodLevel as j}from\"./LodLevel.js\";import{RenderInstanceData as x}from\"./RenderInstanceData.js\";import{colorMixModes as N}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as w}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as U}from\"../../shaders/DefaultMaterialTechnique.js\";import{TaskPriority as H,noBudget as F}from\"../../../../support/Scheduler.js\";import{bindVertexBufferLayout as V,unbindVertexBufferLayout as B}from\"../../../../webgl/Util.js\";const G=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new M(t,r)};let q=class extends v{constructor(e,t){super(e),this.type=R.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDataMap=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new y,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[D.OPAQUE_MATERIAL,e=>this._produces(e)],[D.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new L({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(H.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=k(this.optionalFields),this._glInstanceBufferLayout=g(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on(\"instances-changed\",(()=>this._requestUpdateCycle())),this._instanceData.events.on(\"instance-transform-changed\",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on(\"instance-visibility-changed\",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on(\"instance-highlight-changed\",(()=>this._requestUpdateCycle(!0)))])}get _allRenderInstanceData(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDataMap)e.push(t[1]);return e}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerUid(){return this.metadata.layerUid}get instanceData(){return this._instanceData}get hasEmissions(){return this.baseMaterial.hasEmissions}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),0)}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const n=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,a=e.triangleCount;t.push({renderedInstances:n,renderedTriangles:n*a,trianglesPerInstance:a})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}_createRenderInstanceDataArray(e=[]){const{rctx:t}=this._context.renderContext;return this.symbol.levels.map((r=>{e.push(new x(t,this._instanceBufferLayout))})),e}async initializeRenderContext(e,r){this._context=e,this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const n=await Promise.allSettled(this.symbol.levels.map((t=>j.create(e,t,r)))),a=n.map((e=>\"fulfilled\"===e.status?e.value:null)).filter(t);if(s(r)||a.length!==n.length){a.forEach((e=>e.destroy())),i(r);for(const e of n)if(\"rejected\"===e.status)throw e.reason}this._levels=a,this._levelSelector=G(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceDataMap.forEach((e=>e.forEach((e=>e.destroy()))))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>{const t=e.material.produces.get(D.TRANSPARENT_MATERIAL);return t?.(C.Color)}))))}hasHighlights(){return n(this._highlightRenderInstanceDataMap,(e=>e.some((e=>e.size>0))))}_produces(e){return e!==C.Highlight&&e!==C.ShadowHighlight||this.hasHighlights()}prepareRender(e){if(!_.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(F),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,n=this.levels;return t.forEach((t=>n.forEach((({components:n},a)=>n.forEach((n=>r.push(this._beginComponent(e,t[a],n)))))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let n=0;e.rctx.bindVAO();const a=this.levels;r.forEach((r=>a.forEach((({components:a},s)=>a.forEach((a=>this._renderComponent(e,t[n++],r[s],a,s)))))))}_getInstanceDatas(e){const{output:t,bind:r}=e,n=t===C.Highlight,a=!n&&t!==C.ShadowHighlight,s=t!==C.ShadowExcludeHighlight;if(a)return s?this._allRenderInstanceData:[this._defaultRenderInstanceData];if(s){if(n){const{highlightGroupName:e}=r;if(!e)return null;const t=this._highlightRenderInstanceDataMap.get(e);return t?[t]:null}const e=[];for(const t of this._highlightRenderInstanceDataMap)e.push(t[1]);return e}return null}intersect(e,t,r,n){if(!this.baseMaterial.visible||null==this._octree)return;const a=f();h(a,n,r);const s=a=>{this._instanceData.getCombinedModelTransform(a,Y),e.transform.set(Y),u(J,r,e.transform.inverse),u(Q,n,e.transform.inverse);const s=this._instanceData.getState(a),i=this._instanceData.getLodLevel(a),o=this._levels.length;A(!!(s&S.ACTIVE),\"invalid instance state\"),A(i>=0&&i<o,\"invaid lod level\"),this._levels[i].intersect(e,t,J,Q,a,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(s):this._octree.forEachAlongRay(r,a,s)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new O(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&S.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=a(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return{near:1/0,far:-1/0};const t=e.viewForward,r=this._octree.findClosest(t,b.DepthOrder.FRONT_TO_BACK,e.frustum),n=this._octree.findClosest(t,b.DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==n)return{near:1/0,far:-1/0};const a=e.eye,s=this._instanceData.view;s.boundingSphere.getVec(r,K),h(K,K,a);const i=d(K,t)-K[3];s.boundingSphere.getVec(n,K),h(K,K,a);const o=d(K,t)+K[3];return{near:Math.max(e.near,i),far:Math.min(e.far,o)}}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:n,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const s=this._instanceData,i=s.view;let o=s.size;const l=s.capacity;let c=this._instanceIndex;const h=Math.ceil(l/500);for(let d=0;d<o&&!e.done;++d){c===this._cycleStartIndex&&this._startUpdateCycle();const d=i.state.get(c);let u=0;if(!(d&S.ALLOCATED)){c=c+1===l?0:c+1,o++;continue}const f=i.lodLevel.get(c);if(d&S.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[f].freeTail(),d&S.HIGHLIGHT_ACTIVE&&s.foreachHighlightGroupPrev(c,(e=>{const t=this._highlightRenderInstanceDataMap.get(e);if(!t)throw new r(\"Internal error in lodRenderer\");t[f].freeTail()})),d&S.REMOVE)s.freeInstance(c);else if(d&S.VISIBLE){let e=0;t&&(i.modelOrigin.getVec(c,W),e=a.selectLevel(W,s.getCombinedMedianScaleFactor(c),n)),u=d&~(S.ACTIVE|S.TRANSFORM_CHANGED),e>=0&&(d&S.HIGHLIGHT?(s.foreachHighlightGroup(c,(t=>{let n=this._highlightRenderInstanceDataMap.get(t);if(n||(n=this._createRenderInstanceDataArray(),n.forEach((e=>e.beginUpdate())),this._highlightRenderInstanceDataMap.set(t,n)),e>=n.length)throw new r(`LodRenderer internal error - missing lodLevel ${e}`);P(n[e],i,c)})),u|=S.HIGHLIGHT_ACTIVE):(P(this._defaultRenderInstanceData[e],i,c),u|=S.DEFAULT_ACTIVE)),i.state.set(c,u),i.lodLevel.set(c,e)}else u=d&~(S.ACTIVE|S.TRANSFORM_CHANGED),i.state.set(c,u);if(null!=this._octreeCached){const e=!!(d&S.ACTIVE),t=!!(u&S.ACTIVE);!e&&t?this._octreeCached.addInstance(c):e&&!t?this._octreeCached.removeInstance(c):e&&t&&d&S.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(c),this._octreeCached.addInstance(c))}c=c+1===l?0:c+1,c%h==0&&e.madeProgress()}this._instanceIndex=c,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const n=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return n?.beginSlot(e.bind)}_renderComponent(e,t,r,n,a){if(!t)return;const{bind:s,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,s,n.material.parameters,$);i.bindVAO(n.vao),t.ensureAttributeLocations(n.vao),_.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===C.Color&&(o.setUniform4fv(\"externalColor\",Z[Math.min(a,Z.length-1)]),o.setUniform1i(\"colorMixMode\",N.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,f=(e,a)=>{V(i,E,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,n.vertexCount,a-e),B(i,E,r.buffer,u)};n.material.parameters.transparent&&null!=d?c>h?(A(d>=h&&d<=c,\"invalid firstIndex\"),f(d,c),f(h,d)):c<h&&(d<=c?(A(d>=0&&d<=c,\"invalid firstIndex\"),f(d,c),f(h,l),f(0,d)):(A(d>=h&&d<=l,\"invalid firstIndex\"),f(d,l),f(0,c),f(h,d))):c>h?f(h,c):c<h&&(f(0,c),f(h,l)),i.bindVAO(null)}};function P(e,t,r){const n=e.allocateHead();z(t,r,e.view,n)}function z(e,t,r,n){w(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,n),r.model.copyFrom(n,e.model,t),r.modelNormal.copyFrom(n,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(n,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(n,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(n,e.featureAttribute,t)}function k(e){let t=I().vec3f(T.INSTANCEMODELORIGINHI).vec3f(T.INSTANCEMODELORIGINLO).mat3f(T.INSTANCEMODEL).mat3f(T.INSTANCEMODELNORMAL);return null!=e&&e.includes(\"featureAttribute\")&&(t=t.vec4f(T.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes(\"color\")&&(t=t.vec4u8(T.INSTANCECOLOR)),null!=e&&e.includes(\"objectAndLayerIdColor\")&&(t=t.vec4u8(T.INSTANCEOBJECTANDLAYERIDCOLOR)),t}e([o({constructOnly:!0})],q.prototype,\"symbol\",void 0),e([o({constructOnly:!0})],q.prototype,\"optionalFields\",void 0),e([o({constructOnly:!0})],q.prototype,\"metadata\",void 0),e([o({constructOnly:!0})],q.prototype,\"shaderTransformation\",void 0),e([o()],q.prototype,\"_instanceData\",void 0),e([o()],q.prototype,\"_cycleStartIndex\",void 0),e([o({readOnly:!0})],q.prototype,\"_enableLevelSelection\",null),e([o()],q.prototype,\"_updateCyclesWithStaticCamera\",void 0),e([o({readOnly:!0})],q.prototype,\"running\",null),q=e([l(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")],q);const W=f(),K=m(),Y=c(),J=f(),Q=f(),Z=[p(1,0,1,1),p(0,0,1,1),p(0,1,0,1),p(1,1,0,1),p(1,0,0,1)],$=new U;export{q as LodRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{unique as e}from\"../../../../../core/arrayUtils.js\";import{ContentObject as t}from\"../ContentObject.js\";import{VertexAttribute as r}from\"../VertexAttribute.js\";class n{constructor(e,t=null){this.geometry=e,this.textures=t}get material(){return this.geometry.material}get numTriangles(){return this.geometry instanceof t?this.geometry.indexCount/3:this.geometry.elementCount/3}}function s(e){return e instanceof t?e.attributes.get(r.POSITION).indices.length:e.elementCount}class o{constructor(t,r,n){this.components=t,this.minScreenSpaceRadius=r,this.pivotOffset=n;const o=e(this.components.map((e=>e.geometry)));this.numVertices=o.reduce(((e,t)=>e+s(t)),0)}}class c{constructor(e){this.levels=e,this.levels.sort(((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius))}}function i(t){const r=[];return t.levels.forEach((e=>e.components.forEach((e=>r.push(e.geometry.material))))),e(r)}function u(t){const r=new Array;return t.levels.forEach((e=>e.components.forEach((e=>{null!=e.textures&&r.push(...e.textures)})))),e(r)}function a(r){const n=new Array;return r.levels.forEach((e=>e.components.forEach((e=>{e.geometry instanceof t&&n.push(e.geometry)})))),e(n)}export{n as LodComponentResources,o as LodLevelResources,c as LodResources,a as geometriesFromLodResources,i as materialsFromLodResources,u as texturesFromLodResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import has from\"../../../../../../core/has.js\";import{throwIfAborted as r}from\"../../../../../../core/promiseUtils.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{VertexAttribute as n}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as t}from\"../../../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{materialsFromLodResources as o,texturesFromLodResources as a,LodComponentResources as i,LodLevelResources as d,LodResources as l}from\"../../../../webgl-engine/lib/lodRendering/LodResources.js\";let c=class{constructor(e){this._optionalFields=new Array,this._instanceIndexToFeatureId=new Map,this._featureIdToInstanceIndex=new Map,this._disposeResourceHandles=new Array,this._lodRendererResources=null,this.layerUid=e.layerUid,this.view=e.view,this.sharedResources=this.view.sharedSymbolResources,this.scheduler=this.view.resourceController.scheduler}async doLoad(e,s,t){has(\"enable-feature:objectAndLayerId-rendering\")&&this._optionalFields.push(n.OBJECTANDLAYERIDCOLOR);const i=u((e=>s(e)),e),d=this.view._stage,l=o(i);d.addMany(l),this._addDisposeResource((()=>d.removeMany(l)));const c=a(i);d.addMany(c),this._addDisposeResource((()=>{c.forEach((e=>e.unload())),d.removeMany(c)})),await Promise.all(c.map((e=>this.view._stage.schedule((()=>e.load(d.renderView.renderingContext)),t)))),r(t);const h=await this._createLodRenderer(i,t);this._lodRendererResources={lodRenderer:h,materials:l,textures:c}}addInstances(e){const r=this._lodRendererResources;if(null==r)return;const{featureIds:s,localTransforms:n,globalTransforms:t}=e,o=r.lodRenderer;if(null==o)return;const a=o.instanceData,i=s.length;for(let d=0;d<i;++d){const e=s[d],r=a.addInstance(),o=a.view,i=16*d;o.localTransform.copyFromTypedBuffer(r,n,i),o.globalTransform.copyFromTypedBuffer(r,t,i),a.updateModelTransform(r),a.setVisible(r,!0),this._instanceIndexToFeatureId.set(r,e),this._featureIdToInstanceIndex.set(e,r)}}removeInstances(e){const r=this._lodRendererResources;if(null==r)return;const s=r?.lodRenderer,n=s.instanceData,t=this._instanceIndexToFeatureId,o=this._featureIdToInstanceIndex,a=e.length;for(let i=0;i<a;++i){const r=e[i],s=o.get(r);null!=s&&(n.removeInstance(s),t.delete(s),o.delete(r))}}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createLodRenderer(e,r){const s=this.view._stage,n={layerUid:this.layerUid,graphicUid:e=>1,notifyGraphicGeometryChanged:e=>1,notifyGraphicVisibilityChanged:e=>1},o=new t({symbol:e,optionalFields:this._optionalFields,metadata:n,shaderTransformation:null},this.scheduler);return o.slicePlaneEnabled=!1,this._addDisposeResource((()=>{s.removeRenderPlugin(o),o.destroy()})),await s.addRenderPlugin(o,r),o}};function u(e,r){const s=r.levels.map((r=>{const s=r.components.map((r=>{const s=e(r.materialId);if(!h(s))throw new Error(\"LodRenderer only supports DefaultMaterial\");const n=s.createBufferWriter(),t={material:s,vertexBufferLayout:n.vertexBufferLayout,buffer:r.renderGeometryBuffer.data,elementCount:r.renderGeometryBuffer.elementCount,boundingInfo:r.boundingInfo};return new i(t)}));return new d(s,r.minScreenSpaceRadius)}));return new l(s)}function h(e){return null!=e&&\"materialType\"in e&&\"default\"===e.materialType}c=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.LodRenderer\")],c);export{c as LodRenderer,h as isDefaultMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{Texture as r}from\"../../webgl-engine/lib/Texture.js\";import{TextureWrapMode as n}from\"../../../webgl/enums.js\";const e=128,o=.5;function a(t){return\"cross\"===t||\"x\"===t}function u(t,a=e,u=a*o,s=0){const i=c(t,a,u,s);return new r(i,{mipmap:!1,wrap:{s:n.CLAMP_TO_EDGE,t:n.CLAMP_TO_EDGE},width:a,height:a,components:4,noUnpackFlip:!0,reloadable:!0})}function c(t,r=e,n=r*o,a=0){switch(t){case\"circle\":default:return s(r,n);case\"square\":return i(r,n);case\"cross\":return h(r,n,a);case\"x\":return M(r,n,a);case\"kite\":return f(r,n);case\"triangle\":return l(r,n);case\"arrow\":return m(r,n)}}function s(t,r){const n=t/2-.5;return x(t,T(n,n,r/2))}function i(t,r){return p(t,r,!1)}function f(t,r){return p(t,r,!0)}function h(t,r,n=0){return b(t,r,!1,n)}function M(t,r,n=0){return b(t,r,!0,n)}function l(t,r){return x(t,w(t/2,r,r/2))}function m(t,r){const n=r,e=r/2,o=t/2,a=.8*n,u=T(o,(t-r)/2-a,Math.sqrt(a*a+e*e)),c=w(o,n,e);return x(t,((t,r)=>Math.max(c(t,r),-u(t,r))))}function p(t,r,n){return n&&(r/=Math.SQRT2),x(t,((e,o)=>{let a=e-.5*t+.25,u=.5*t-o-.75;if(n){const t=(a+u)/Math.SQRT2;u=(u-a)/Math.SQRT2,a=t}return Math.max(Math.abs(a),Math.abs(u))-.5*r}))}function b(t,r,n,e=0){r-=e,n&&(r*=Math.SQRT2);const o=.5*r;return x(t,((r,a)=>{let u,c=r-.5*t,s=.5*t-a-1;if(n){const t=(c+s)/Math.SQRT2;s=(s-c)/Math.SQRT2,c=t}return c=Math.abs(c),s=Math.abs(s),u=c>s?c>o?Math.sqrt((c-o)*(c-o)+s*s):s:s>o?Math.sqrt(c*c+(s-o)*(s-o)):c,u-=e/2,u}))}function T(t,r,n){return(e,o)=>{const a=e-t,u=o-r;return Math.sqrt(a*a+u*u)-n}}function w(t,r,n){const e=Math.sqrt(r*r+n*n);return(o,a)=>{const u=Math.abs(o-t)-n,c=a-t+r/2+.75,s=(r*u+n*c)/e,i=-c;return Math.max(s,i)}}function x(r,n){const e=new Uint8Array(4*r*r);for(let o=0;o<r;o++)for(let a=0;a<r;a++){const u=a+r*o;let c=n(a,o);c=c/r+.5,t(c,e,4*u)}return e}export{m as createArrow,s as createCircle,h as createCross,f as createKite,c as createPrimitive,i as createSquare,u as createTexture,l as createTriangle,M as createX,o as defaultSymbolSizeRatio,e as defaultTexSize,a as requiresHalfTexelOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction n(n){return n instanceof Float32Array&&n.length>=16}function r(n){return Array.isArray(n)&&n.length>=16}function t(t){return n(t)||r(t)}export{t as isMat4,n as isMat4f32,r as isMat4f64};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{addVerticalOffset as e}from\"../attributes/VerticalOffset.glsl.js\";import{ScreenSizePerspective as t,addScreenSizePerspectiveAlignment as o}from\"../util/ScreenSizePerspective.glsl.js\";import{addProjViewLocalOrigin as a,addCameraPosition as s,addViewNormal as i,addPixelRatio as r}from\"../util/View.glsl.js\";import{Float4PassUniform as n}from\"../../shaderModules/Float4PassUniform.js\";import{FloatPassUniform as f}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as c}from\"../../../lib/VertexAttribute.js\";const p=.5;function d(d,u){d.include(t),d.attributes.add(c.POSITION,\"vec3\"),d.attributes.add(c.NORMAL,\"vec3\"),d.attributes.add(c.CENTEROFFSETANDDISTANCE,\"vec4\");const v=d.vertex;a(v,u),s(v,u),v.uniforms.add(new n(\"viewport\",((e,t)=>t.camera.fullViewport)),new f(\"polygonOffset\",(e=>e.shaderPolygonOffset)),new f(\"cameraGroundRelative\",((e,t)=>t.camera.aboveGround?1:-1))),u.hasVerticalOffset&&e(v),v.constants.add(\"smallOffsetAngle\",\"float\",.984807753012208),v.code.add(l`struct ProjectHUDAux {\nvec3 posModel;\nvec3 posView;\nvec3 vnormal;\nfloat distanceToCamera;\nfloat absCosAngle;\n};`),v.code.add(l`\n    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {\n      float pointGroundSign = ${u.terrainDepthTest?l.float(0):l`sign(pointGroundDistance)`};\n      if (pointGroundSign == 0.0) {\n        pointGroundSign = cameraGroundRelative;\n      }\n\n      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground\n      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise\n      float groundRelative = cameraGroundRelative * pointGroundSign;\n\n      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is\n      // dropped is instead introduced using the ground-relative position of the symbol and the camera\n      if (polygonOffset > .0) {\n        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);\n        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;\n        float factor = (1.0 - tanAlpha / viewport[2]);\n\n        // same side of the terrain\n        if (groundRelative > 0.0) {\n          posView *= factor;\n        }\n        // opposite sides of the terrain\n        else {\n          posView /= factor;\n        }\n      }\n\n      return groundRelative;\n    }\n  `),u.draped&&!u.hasVerticalOffset||i(v),u.draped||(v.uniforms.add(new f(\"perDistancePixelRatio\",((e,t)=>Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2)))),v.code.add(l`\n    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {\n      float distanceToCamera = length(posView);\n\n      // Compute offset in world units for a half pixel shift\n      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${l.float(p)};\n\n      // Apply offset along normal in the direction away from the ground surface\n      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;\n\n      // Apply the same offset also on the view space position\n      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n\n      posModel += modelOffset;\n      posView += viewOffset;\n    }\n  `)),u.screenCenterOffsetUnitsEnabled&&r(v),u.hasScreenSizePerspective&&o(v),v.code.add(l`\n    vec4 projectPositionHUD(out ProjectHUDAux aux) {\n      vec3 centerOffset = centerOffsetAndDistance.xyz;\n      float pointGroundDistance = centerOffsetAndDistance.w;\n\n      aux.posModel = position;\n      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;\n      aux.vnormal = normal;\n      ${u.draped?\"\":\"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);\"}\n\n      // Screen sized offset in world space, used for example for line callouts\n      // Note: keep this implementation in sync with the CPU implementation, see\n      //   - MaterialUtil.verticalOffsetAtDistance\n      //   - HUDMaterial.applyVerticalOffsetTransformation\n\n      aux.distanceToCamera = length(aux.posView);\n\n      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);\n      float cosAngle = dot(aux.vnormal, viewDirObjSpace);\n\n      aux.absCosAngle = abs(cosAngle);\n\n      ${u.hasScreenSizePerspective&&(u.hasVerticalOffset||u.screenCenterOffsetUnitsEnabled)?\"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);\":\"\"}\n\n      ${u.hasVerticalOffset?u.hasScreenSizePerspective?\"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);\":\"float verticalOffsetScreenHeight = verticalOffset.x;\":\"\"}\n\n      ${u.hasVerticalOffset?l`\n            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);\n            vec3 modelOffset = aux.vnormal * worldOffset;\n            aux.posModel += modelOffset;\n            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;\n            aux.posView += viewOffset;\n            // Since we elevate the object, we need to take that into account\n            // in the distance to ground\n            pointGroundDistance += worldOffset;`:\"\"}\n\n      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);\n\n      ${u.screenCenterOffsetUnitsEnabled?\"\":l`\n            // Apply x/y in view space, but z in screen space (i.e. along posView direction)\n            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);\n\n            // Same material all have same z != 0.0 condition so should not lead to\n            // branch fragmentation and will save a normalization if it's not needed\n            if (centerOffset.z != 0.0) {\n              aux.posView -= normalize(aux.posView) * centerOffset.z;\n            }\n          `}\n\n      vec4 posProj = proj * vec4(aux.posView, 1.0);\n\n      ${u.screenCenterOffsetUnitsEnabled?u.hasScreenSizePerspective?\"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);\":\"float centerOffsetY = centerOffset.y;\":\"\"}\n\n      ${u.screenCenterOffsetUnitsEnabled?\"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;\":\"\"}\n\n      // constant part of polygon offset emulation\n      posProj.z -= groundRelative * polygonOffset * posProj.w;\n      return posProj;\n    }\n  `)}export{d as HUD,p as HUDVerticalPixelOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.factor=new c,this.factorAlignment=new c}}class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}export{c as ScaleFactor,t as ScaleInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BooleanPassUniform as e}from\"../../shaderModules/BooleanPassUniform.js\";import{glsl as i}from\"../../shaderModules/interfaces.js\";function o(o){o.uniforms.add(new e(\"alignPixelEnabled\",((e,i)=>i.alignPixelEnabled))),o.code.add(i`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {\nif (!alignPixelEnabled)\nreturn clipCoord;\nvec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;\nvec2 pixelSz = vec2(1.0) / widthHeight;\nvec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;\nvec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\nreturn vec4(result, clipCoord.zw);\n}`),o.code.add(i`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {\nif (!alignPixelEnabled)\nreturn clipCoord;\nvec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;\nvec2 pixelSz = vec2(1.0) / widthHeight;\nvec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;\nvec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;\nreturn vec4(result, clipCoord.zw);\n}`)}export{o as AlignPixel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{AlignPixel as e}from\"./AlignPixel.glsl.js\";import{terrainDepthTest as o}from\"../shading/TerrainDepthTest.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function r(r,i){const{vertex:p,fragment:s}=r;r.include(o,i),p.include(e),i.terrainDepthTest&&r.varyings.add(\"depth\",\"float\"),p.main.add(t`\n    vec4 posProjCenter;\n    if (dot(position, position) > 0.0) {\n      // Render single point to center of the pixel to avoid subpixel filtering to affect the marker color\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      posProjCenter = alignToPixelCenter(posProj, viewport.zw);\n\n      ${i.terrainDepthTest?t`depth = projectAux.posView.z;`:\"\"}\n      vec3 vpos = projectAux.posModel;\n      if (rejectBySlice(vpos)) {\n        // Project out of clip space\n        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n      }\n\n    } else {\n      // Project out of clip space\n      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n\n    gl_Position = posProjCenter;\n    gl_PointSize = 1.0;\n  `),s.main.add(t`fragColor = vec4(1);\nif(terrainDepthTest(depth)) {\nfragColor.g = 0.5;\n}`)}export{r as HUDOcclusionPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar c;!function(c){c[c.Occluded=0]=\"Occluded\",c[c.NotOccluded=1]=\"NotOccluded\",c[c.Both=2]=\"Both\",c[c.COUNT=3]=\"COUNT\"}(c||(c={}));export{c as HUDRenderStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{AlignPixel as e}from\"./AlignPixel.glsl.js\";import{HUDRenderStyle as r}from\"./HUDRenderStyle.js\";import{Float4PassUniform as o}from\"../../shaderModules/Float4PassUniform.js\";import{FloatPassUniform as i}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as s}from\"../../shaderModules/Texture2DPassUniform.js\";function t(t){t.vertex.uniforms.add(new i(\"renderTransparentlyOccludedHUD\",((e,o)=>o.hudRenderStyle===r.Occluded?1:o.hudRenderStyle===r.NotOccluded?0:.75)),new o(\"viewport\",((e,r)=>r.camera.fullViewport)),new s(\"hudVisibilityTexture\",((e,r)=>r.hudVisibility?.getTexture()))),t.vertex.include(e),t.vertex.code.add(l`bool testHUDVisibility(vec4 posProj) {\nvec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);\nvec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);\nif (renderTransparentlyOccludedHUD > 0.5) {\nreturn occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;\n}\nreturn occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;\n}`)}export{t as HUDVisibility};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{set as e,copy as o}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{ZEROS as i,fromValues as t}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{earth as a}from\"../geometry/support/Ellipsoid.js\";import{ShaderOutput as l}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as s}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ObjectAndLayerIdColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{AlignPixel as c}from\"../views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl.js\";import{HUD as d}from\"../views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js\";import{HUDOcclusionPass as u}from\"../views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl.js\";import{HUDVisibility as p}from\"../views/3d/webgl-engine/core/shaderLibrary/hud/HUDVisibility.glsl.js\";import{OutputHighlight as f}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{VisualVariables as g}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{alphaCutoff as m}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{ColorConversion as v}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{RgbaFloatEncoding as b}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{ScreenSizePerspective as h,addScreenSizePerspective as w,addScreenSizePerspectiveAlignment as x}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js\";import{addPixelRatio as C}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2PassUniform as P}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float4DrawUniform as z}from\"../views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js\";import{Float4PassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as j}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as y,If as A}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as O}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as F}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{OITPass as $}from\"../views/3d/webgl-engine/lib/OITPass.js\";import{VertexAttribute as D}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";const L={occludedFadeFactor:.6};function T(o){const r=new O,T=o.signedDistanceFieldEnabled;if(r.include(d,o),r.include(s,o),o.occlusionPass)return r.include(u,o),r;const{vertex:M,fragment:H}=r;r.include(h),r.include(g,o),r.include(n,o),r.include(p),H.include(b),H.include(v),r.varyings.add(\"vcolor\",\"vec4\"),r.varyings.add(\"vtc\",\"vec2\"),r.varyings.add(\"vsize\",\"vec2\"),r.varyings.add(\"voccluded\",\"float\"),M.uniforms.add(new S(\"viewport\",((e,o)=>o.camera.fullViewport)),new P(\"screenOffset\",((o,r)=>e(R,2*o.screenOffset[0]*r.camera.pixelRatio,2*o.screenOffset[1]*r.camera.pixelRatio))),new P(\"anchorPosition\",(e=>E(e))),new S(\"materialColor\",(e=>e.color)),new j(\"materialRotation\",(e=>e.rotation))),C(M),T&&(M.uniforms.add(new S(\"outlineColor\",(e=>e.outlineColor))),H.uniforms.add(new S(\"outlineColor\",(e=>B(e)?e.outlineColor:i)),new j(\"outlineSize\",(e=>B(e)?e.outlineSize:0)))),o.horizonCullingEnabled&&M.uniforms.add(new z(\"pointDistanceSphere\",((e,o)=>{const r=o.camera.eye,i=e.origin;return t(i[0]-r[0],i[1]-r[1],i[2]-r[2],a.radius)}))),o.pixelSnappingEnabled&&M.include(c),o.hasScreenSizePerspective&&(w(M),x(M)),o.debugDrawLabelBorder&&r.varyings.add(\"debugBorderCoords\",\"vec4\"),r.attributes.add(D.UV0,\"vec2\"),r.attributes.add(D.COLOR,\"vec4\"),r.attributes.add(D.SIZE,\"vec2\"),r.attributes.add(D.ROTATION,\"float\"),r.attributes.add(D.FEATUREATTRIBUTE,\"vec4\"),M.code.add(o.horizonCullingEnabled?y`bool behindHorizon(vec3 posModel) {\nvec3 camToEarthCenter = pointDistanceSphere.xyz - localOrigin;\nvec3 camToPos = pointDistanceSphere.xyz + posModel;\nfloat earthRadius = pointDistanceSphere.w;\nfloat a = dot(camToPos, camToPos);\nfloat b = dot(camToPos, camToEarthCenter);\nfloat c = dot(camToEarthCenter, camToEarthCenter) - earthRadius * earthRadius;\nreturn  b > 0.0 && b < a && b * b  > a * c;\n}`:y`bool behindHorizon(vec3 posModel) { return false; }`),M.main.add(y`\n      ProjectHUDAux projectAux;\n      vec4 posProj = projectPositionHUD(projectAux);\n      forwardObjectAndLayerIdColor();\n\n      if (rejectBySlice(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n\n      if (behindHorizon(projectAux.posModel)) {\n        // Project outside of clip plane\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n        return;\n      }\n\n      vec2 inputSize;\n      ${A(o.hasScreenSizePerspective,y`\n          inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);\n          vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);`,y`\n          inputSize = size;\n          vec2 screenOffsetScaled = screenOffset;`)}\n      ${A(o.vvSize,y`inputSize *= vvScale(featureAttribute).xx;`)}\n\n      vec2 combinedSize = inputSize * pixelRatio;\n      vec4 quadOffset = vec4(0.0);\n      bool visible = testHUDVisibility(posProj);\n      voccluded = visible ? 0.0 : 1.0;\n    `);const U=y`\n      vec2 uv01 = floor(uv0);\n      vec2 uv = uv0 - uv01;\n      quadOffset.xy = (uv01 - anchorPosition) * 2.0 * combinedSize;\n\n      ${A(o.hasRotation,y`\n          float angle = radians(materialRotation + rotation);\n          float cosAngle = cos(angle);\n          float sinAngle = sin(angle);\n          mat2 rotate = mat2(cosAngle, -sinAngle, sinAngle,  cosAngle);\n\n          quadOffset.xy = rotate * quadOffset.xy;\n        `)}\n\n      quadOffset.xy = (quadOffset.xy + screenOffsetScaled) / viewport.zw * posProj.w;\n  `,V=o.pixelSnappingEnabled?T?y`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:y`posProj += quadOffset;\nif (inputSize.x == size.x) {\nposProj = alignToPixelOrigin(posProj, viewport.zw);\n}`:y`posProj += quadOffset;`;M.main.add(y`\n    ${A(o.occlusionTestEnabled,y`\n      if (!visible) {\n        vtc = vec2(0.0);\n        ${A(o.debugDrawLabelBorder,\"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);\")}\n        return;\n      }`)}\n    ${U}\n    ${o.vvColor?\"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;\":\"vcolor = color / 255.0 * materialColor;\"}\n\n    ${A(o.output===l.ObjectAndLayerIdColor,y`vcolor.a = 1.0;`)}\n\n    bool alphaDiscard = vcolor.a < ${y.float(m)};\n    ${A(T,`alphaDiscard = alphaDiscard && outlineColor.a < ${y.float(m)};`)}\n    if (alphaDiscard) {\n      // \"early discard\" if both symbol color (= fill) and outline color (if applicable) are transparent\n      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n      return;\n    } else {\n      ${V}\n      gl_Position = posProj;\n    }\n\n    vtc = uv;\n\n    ${A(o.debugDrawLabelBorder,y`debugBorderCoords = vec4(uv01, 1.5 / combinedSize);`)}\n    vsize = inputSize;\n  `),H.uniforms.add(new F(\"tex\",(e=>e.texture))),o.occludedFragmentFade&&(H.uniforms.add(new F(\"depthMap\",((e,o)=>o.mainDepth))),H.uniforms.add(new j(\"fadeFactor\",(()=>L.occludedFadeFactor))));const _=o.debugDrawLabelBorder?y`(isBorder > 0.0 ? 0.0 : ${y.float(m)})`:y.float(m),I=o.output===l.Highlight,q=y`\n    ${A(o.debugDrawLabelBorder,y`float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`)}\n\n    ${A(o.sampleSignedDistanceFieldTexelCenter,y`\n      float txSize = float(textureSize(tex, 0).x);\n      float texelSize = 1.0 / txSize;\n\n      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel\n      vec2 scaleFactor = (vsize - txSize) * texelSize;\n      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;`,y`vec2 samplePos = vtc;`)}\n\n    ${T?y`\n      vec4 fillPixelColor = vcolor;\n\n      // Get distance and map it into [-0.5, 0.5]\n      float d = rgba2float(texture(tex, samplePos)) - 0.5;\n\n      // Distance in output units (i.e. pixels)\n      float dist = d * vsize.x;\n\n      // Create smooth transition from the icon into its outline\n      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);\n      fillPixelColor.a *= fillAlphaFactor;\n\n      if (outlineSize > 0.25) {\n        vec4 outlinePixelColor = outlineColor;\n        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);\n\n        // Create smooth transition around outline\n        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);\n        outlinePixelColor.a *= outlineAlphaFactor;\n\n        if (\n          outlineAlphaFactor + fillAlphaFactor < ${_} ||\n          fillPixelColor.a + outlinePixelColor.a < ${y.float(m)}\n        ) {\n          discard;\n        }\n\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)\n        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);\n        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +\n          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);\n\n        ${A(!I,y`fragColor = vec4(compositeColor, compositeAlpha);`)}\n      } else {\n        if (fillAlphaFactor < ${_}) {\n          discard;\n        }\n\n        ${A(!I,y`fragColor = premultiplyAlpha(fillPixelColor);`)}\n      }\n\n      // visualize SDF:\n      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);\n      `:y`\n          vec4 texColor = texture(tex, vtc, -0.5);\n          if (texColor.a < ${_}) {\n            discard;\n          }\n          ${A(!I,y`fragColor = texColor * premultiplyAlpha(vcolor);`)}\n          `}\n\n    ${A(o.occludedFragmentFade&&!I,y`\n        float zSample = texelFetch(depthMap, ivec2(gl_FragCoord.xy), 0).x;\n        if (zSample < gl_FragCoord.z) {\n          fragColor *= fadeFactor;\n        }\n        `)}\n\n    ${A(!I&&o.debugDrawLabelBorder,y`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`)}\n  `;switch(o.output){case l.Color:o.oitPass===$.ColorAlpha&&(r.outputs.add(\"fragColor\",\"vec4\",0),r.outputs.add(\"fragAlpha\",\"float\",1)),H.main.add(y`\n        ${q}\n        ${A(o.oitPass===$.FrontFace,y`fragColor.rgb /= fragColor.a;`)}\n        ${A(o.oitPass===$.ColorAlpha,y`fragAlpha = fragColor.a;`)}`);break;case l.ObjectAndLayerIdColor:H.main.add(y`\n        ${q}\n        outputObjectAndLayerIdColor();`);break;case l.Highlight:r.include(f,o),H.main.add(y`\n        ${q}\n        outputHighlight(voccluded == 1.0);`)}return r}function B(e){return e.outlineColor[3]>0&&e.outlineSize>0}function E(e,r=R){return e.textureIsSignedDistanceField?M(e.anchorPosition,e.distanceFieldBoundingBox,r):o(r,e.anchorPosition),r}function M(o,r,i){null!=r?e(i,o[0]*(r[2]-r[0])+r[0],o[1]*(r[3]-r[1])+r[1]):e(i,0,0)}const R=r(),H=Object.freeze(Object.defineProperty({__proto__:null,build:T,calculateAnchorPosForRendering:E,shaderSettings:L},Symbol.toStringTag,{value:\"Module\"}));export{H,T as b,E as c,L as s};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as t}from\"../lib/OITPass.js\";import{oitBlending as s,getDrawBuffers as i}from\"../lib/OrderIndependentTransparency.js\";import{H as l}from\"../../../../chunks/HUDMaterial.glsl.js\";import{PrimitiveType as n,CompareFunction as a}from\"../../../webgl/enums.js\";import{defaultDepthWrite as p,makePipelineState as d,blendWithPremultipliedAlpha as u,defaultColorWrite as m}from\"../../../webgl/renderState.js\";class c extends o{constructor(e,o,t){super(e,o,new r(l,(()=>import(\"./HUDMaterial.glsl.js\"))),t),this.primitiveType=o.occlusionPass?n.POINTS:n.TRIANGLES}initializePipeline(r){const{oitPass:o,hasPolygonOffset:l,draped:n,output:c,depthTestEnabled:f}=r,T=o===t.NONE,g=l?h:null,j=o===t.ColorAlpha,b=n||!f||j||c===e.Highlight?null:p;return d({blending:c===e.Color?T?u:s(o):null,depthTest:f&&!n?{func:a.LEQUAL}:null,depthWrite:b,drawBuffers:i(o,c),colorWrite:m,polygonOffset:g})}}const h={factor:0,units:-4};export{c as HUDMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as s}from\"../materials/DefaultTechniqueConfiguration.js\";class r extends s{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.objectAndLayerIdColorInstanced=!1,this.horizonCullingEnabled=!0,this.textureCoordinateType=t.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.hasSliceInVertexProgram=!0,this.hasVvInstancing=!1}}e([i()],r.prototype,\"screenCenterOffsetUnitsEnabled\",void 0),e([i()],r.prototype,\"occlusionTestEnabled\",void 0),e([i()],r.prototype,\"signedDistanceFieldEnabled\",void 0),e([i()],r.prototype,\"sampleSignedDistanceFieldTexelCenter\",void 0),e([i()],r.prototype,\"vvSize\",void 0),e([i()],r.prototype,\"vvColor\",void 0),e([i()],r.prototype,\"hasVerticalOffset\",void 0),e([i()],r.prototype,\"hasScreenSizePerspective\",void 0),e([i()],r.prototype,\"hasRotation\",void 0),e([i()],r.prototype,\"debugDrawLabelBorder\",void 0),e([i()],r.prototype,\"hasSlicePlane\",void 0),e([i()],r.prototype,\"hasPolygonOffset\",void 0),e([i()],r.prototype,\"depthTestEnabled\",void 0),e([i()],r.prototype,\"pixelSnappingEnabled\",void 0),e([i()],r.prototype,\"draped\",void 0),e([i()],r.prototype,\"terrainDepthTest\",void 0),e([i()],r.prototype,\"cullAboveTerrain\",void 0),e([i()],r.prototype,\"occlusionPass\",void 0),e([i()],r.prototype,\"occludedFragmentFade\",void 0),e([i()],r.prototype,\"objectAndLayerIdColorInstanced\",void 0),e([i()],r.prototype,\"horizonCullingEnabled\",void 0);export{r as HUDMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as e,deg2rad as t}from\"../../../../core/mathUtils.js\";import{fromMat4 as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as r}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o,rotate as n}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as c,fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as f,t as h,n as p,d as m,h as u,c as d,l as g,j as S,g as O,q as T,f as b}from\"../../../../chunks/vec32.js\";import{create as v,fromValues as A}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromArray as E,create as I,freeze as _}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isMat4 as R}from\"../../../../core/libs/gl-matrix-2/types/mat4.js\";import{create as C}from\"../../../../geometry/support/aaBoundingRect.js\";import{BufferViewVec4u8 as x}from\"../../../../geometry/support/buffer/BufferView.js\";import{evaluateModelTransformScale as P}from\"../../layers/support/FastSymbolUpdates.js\";import{debugFlags as y}from\"../../support/debugFlags.js\";import{newLayout as D}from\"../../support/buffer/InterleavedLayout.js\";import{isColorHighlightOrOID as j,ShaderOutput as F}from\"../core/shaderLibrary/ShaderOutput.js\";import{HUDVerticalPixelOffset as N}from\"../core/shaderLibrary/hud/HUD.glsl.js\";import{alphaCutoff as z}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{olidEnabled as L}from\"../effects/geometry/olidUtils.js\";import{GLTextureMaterial as U,GLTextureMaterialBindParameters as M}from\"../lib/GLTextureMaterial.js\";import{Material as w,RenderOccludedFlag as V}from\"../lib/Material.js\";import{RenderSlot as B}from\"../lib/RenderSlot.js\";import{applyScaleFactor as q,applyPrecomputedScaleFactor as G,precomputeScaleFactor as H}from\"../lib/screenSizePerspectiveUtils.js\";import{assert as W}from\"../lib/Util.js\";import{VertexAttribute as X}from\"../lib/VertexAttribute.js\";import{ScaleInfo as Y}from\"./ScaleInfo.js\";import{writePosition as Z,writeNormal as k,writeColor as J,writeBufferFloat as K,writeBufferVec4 as Q,writeBufferVec4Zeros as $,writeObjectAndLayerIdColor as ee}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as te}from\"./internal/MaterialUtil.js\";import{c as se}from\"../../../../chunks/HUDMaterial.glsl.js\";import{HUDMaterialTechnique as ie}from\"../shaders/HUDMaterialTechnique.js\";import{HUDMaterialTechniqueConfiguration as re}from\"../shaders/HUDMaterialTechniqueConfiguration.js\";class ae extends w{constructor(e,t){super(e,ye),this.produces=new Map([[B.HUD_MATERIAL,e=>j(e)&&!this.parameters.drawInSecondSlot],[B.LABEL_MATERIAL,e=>j(e)&&this.parameters.drawInSecondSlot],[B.OCCLUSION_PIXELS,()=>this.parameters.occlusionTest],[B.DRAPED_MATERIAL,e=>this.parameters.draped&&j(e)]]),this._visible=!0,this._configuration=new re(t)}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled=\"screen\"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.draped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===B.OCCLUSION_PIXELS,this._configuration.occludedFragmentFade=this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===B.OCCLUSION_PIXELS,e===F.Color&&(this._configuration.debugDrawLabelBorder=!!y.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,t,i,a,o,n){const{options:{selectionMode:c,hud:l,excludeLabels:O},point:T,camera:b}=i,{parameters:A}=this;if(!c||!l||O&&A.isLabel||!e.visible||!T)return;const{scaleX:E,scaleY:I}=this._getScreenScale(e,b.pixelRatio);s(Te,t),e.attributes.has(X.FEATUREATTRIBUTE)&&le(Te);const _=e.attributes.get(X.POSITION),R=e.attributes.get(X.SIZE),C=e.attributes.get(X.NORMAL),x=e.attributes.get(X.ROTATION),P=e.attributes.get(X.CENTEROFFSETANDDISTANCE);W(_.size>=3);const y=se(A),D=\"screen\"===this.parameters.centerOffsetUnits;for(let s=0;s<_.data.length/_.size;s++){const e=s*_.size;f(pe,_.data[e],_.data[e+1],_.data[e+2]),h(pe,pe,t),h(pe,pe,b.viewMatrix);const a=s*P.size;if(f(Ae,P.data[a],P.data[a+1],P.data[a+2]),!D&&(pe[0]+=Ae[0],pe[1]+=Ae[1],0!==Ae[2])){const e=Ae[2];p(Ae,pe),m(pe,pe,u(Ae,Ae,e))}const o=s*C.size;if(f(me,C.data[o],C.data[o+1],C.data[o+2]),ce(me,Te,b,_e),this._applyVerticalOffsetTransformationView(pe,_e,b,he),b.applyProjection(pe,ue),ue[0]>-1){D&&(Ae[0]||Ae[1])&&(ue[0]+=Ae[0]*b.pixelRatio,0!==Ae[1]&&(ue[1]+=q(Ae[1],he.factorAlignment)*b.pixelRatio),b.unapplyProjection(ue,pe)),ue[0]+=this.parameters.screenOffset[0]*b.pixelRatio,ue[1]+=this.parameters.screenOffset[1]*b.pixelRatio,ue[0]=Math.floor(ue[0]),ue[1]=Math.floor(ue[1]);const e=s*R.size;xe[0]=R.data[e],xe[1]=R.data[e+1],G(xe,he.factor,xe);const t=Re*b.pixelRatio;let a=0;if(A.textureIsSignedDistanceField){a=Math.min(A.outlineSize,.5*xe[0])*b.pixelRatio/2}xe[0]*=E,xe[1]*=I;const o=s*x.size,c=A.rotation+x.data[o];if(fe(T,ue[0],ue[1],xe,t,a,c,A,y)){const e=i.ray;if(h(ge,pe,r(ve,b.viewMatrix)),ue[0]=T[0],ue[1]=T[1],b.unprojectFromRenderScreen(ue,pe)){const t=v();d(t,e.direction);const s=1/g(t);u(t,t,s);n(S(e.origin,pe)*s,t,-1,!0,1,ge)}}}}}intersectDraped(e,t,s,i,r,a){const o=e.attributes.get(X.POSITION),n=e.attributes.get(X.SIZE),c=e.attributes.get(X.ROTATION),l=this.parameters,f=se(l),{scaleX:h,scaleY:p}=this._getScreenScale(e,e.screenToWorldRatio),m=Ce*e.screenToWorldRatio;for(let u=0;u<o.data.length/o.size;u++){const t=u*o.size,s=o.data[t],d=o.data[t+1],g=u*n.size;xe[0]=n.data[g],xe[1]=n.data[g+1];let S=0;if(l.textureIsSignedDistanceField){S=Math.min(l.outlineSize,.5*xe[0])*e.screenToWorldRatio/2}xe[0]*=h,xe[1]*=p;const O=u*c.size,T=l.rotation+c.data[O];fe(i,s,d,xe,m,S,T,l,f)&&r(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new Fe}_updateScaleInfo(e,t,s){const i=this.parameters;null!=i.screenSizePerspective?H(s,t,i.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=i.screenSizePerspectiveAlignment?H(s,t,i.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}applyShaderOffsetsView(e,t,s,i,r,a,o){const n=ce(t,s,r,_e);return this._applyVerticalGroundOffsetView(e,n,r,o),this._applyVerticalOffsetTransformationView(o,n,r,a),this._applyPolygonOffsetView(o,n,i[3],r,o),this._applyCenterOffsetView(o,i,o),o}applyShaderOffsetsNDC(e,t,s,i,r){return this._applyCenterOffsetNDC(e,t,s,i),null!=r&&d(r,i),this._applyPolygonOffsetNDC(i,t,s,i),i}_applyPolygonOffsetView(t,s,i,r,a){const o=r.aboveGround?1:-1;let n=Math.sign(i);0===n&&(n=o);const c=o*n;if(this.parameters.shaderPolygonOffset<=0)return d(a,t);const l=e(Math.abs(s.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/r.viewport[2];return u(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,s,i){const r=g(e),a=s.aboveGround?1:-1,o=s.computeRenderPixelSizeAtDist(r)*N,n=u(pe,t.normal,a*o);return O(i,e,n),i}_applyVerticalOffsetTransformationView(e,t,s,i){const r=this.parameters;if(!r.verticalOffset?.screenLength){if(r.screenSizePerspective||r.screenSizePerspectiveAlignment){const s=g(e);this._updateScaleInfo(i,s,t.cosAngle)}else i.factor.scale=1,i.factorAlignment.scale=1;return e}const a=g(e),o=r.screenSizePerspectiveAlignment??r.screenSizePerspective,n=te(s,a,r.verticalOffset,t.cosAngle,o);return this._updateScaleInfo(i,a,t.cosAngle),u(t.normal,t.normal,n),O(e,e,t.normal)}_applyCenterOffsetView(e,t,s){const i=\"screen\"!==this.parameters.centerOffsetUnits;return s!==e&&d(s,e),i&&(s[0]+=t[0],s[1]+=t[1],t[2]&&(p(me,s),O(s,s,u(me,me,t[2])))),s}_applyCenterOffsetNDC(e,t,s,i){const r=\"screen\"!==this.parameters.centerOffsetUnits;return i!==e&&d(i,e),r||(i[0]+=t[0]/s.fullWidth*2,i[1]+=t[1]/s.fullHeight*2),i}_applyPolygonOffsetNDC(e,t,s,i){const r=this.parameters.shaderPolygonOffset;if(e!==i&&d(i,e),r){const e=s.aboveGround?1:-1,a=e*Math.sign(t[3]);i[2]-=(a||e)*r}return i}set visible(e){this._visible=e}get visible(){const{color:e,outlineSize:t,outlineColor:s}=this.parameters,i=e[3]>=z||t>=z&&s[3]>=z;return this._visible&&i}createGLMaterial(e){return new oe(e)}calculateRelativeScreenBounds(e,t,s=C()){return ne(this.parameters,e,t,s),s[2]=s[0]+e[0],s[3]=s[1]+e[1],s}_getScreenScale(e,t){const s=e.attributes.get(X.FEATUREATTRIBUTE);if(null==s)return{scaleX:t,scaleY:t};const i=E(s.data,Ie);return P(Ee,this.parameters,i),{scaleX:Ee[0]*t,scaleY:Ee[1]*t}}}class oe extends U{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.acquireTechnique(ie,e)}}function ne(e,t,s,i){i[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*s,i[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*s}function ce(e,t,i,r){return R(t)&&(t=s(be,t)),T(r.normal,e,t),h(r.normal,r.normal,i.viewInverseTransposeMatrix),r.cosAngle=b(de,Pe),r}function le(e){const t=e[0],s=e[1],i=e[2],r=e[3],a=e[4],o=e[5],n=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+s*s+i*i),h=1/Math.sqrt(r*r+a*a+o*o),p=1/Math.sqrt(n*n+c*c+l*l);return e[0]=t*f,e[1]=s*f,e[2]=i*f,e[3]=r*h,e[4]=a*h,e[5]=o*h,e[6]=n*p,e[7]=c*p,e[8]=l*p,e}function fe(e,s,i,r,a,c,l,f,h){let p=s-a-r[0]*h[0],m=p+r[0]+2*a,u=i-a-r[1]*h[1],d=u+r[1]+2*a;const g=f.distanceFieldBoundingBox;return f.textureIsSignedDistanceField&&null!=g&&(p+=r[0]*g[0],u+=r[1]*g[1],m-=r[0]*(1-g[2]),d-=r[1]*(1-g[3]),p-=c,m+=c,u-=c,d+=c),o(Oe,s,i),n(Se,e,Oe,t(l)),Se[0]>p&&Se[0]<m&&Se[1]>u&&Se[1]<d}const he=new Y,pe=v(),me=v(),ue=I(),de=v(),ge=v(),Se=c(),Oe=c(),Te=i(),be=i(),ve=a(),Ae=v(),Ee=v(),Ie=I(),_e={normal:de,cosAngle:0},Re=1,Ce=2,xe=[0,0],Pe=A(0,0,1);class ye extends M{constructor(){super(...arguments),this.renderOccluded=V.Occlude,this.isDecoration=!1,this.color=_(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=l(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=_(1,1,1,1),this.outlineSize=0,this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.centerOffsetUnits=\"world\",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.draped=!1,this.isLabel=!1}}const De=D().vec3f(X.POSITION).vec3f(X.NORMAL).vec2f(X.UV0).vec4u8(X.COLOR).vec2f(X.SIZE).f32(X.ROTATION).vec4f(X.CENTEROFFSETANDDISTANCE).vec4f(X.FEATUREATTRIBUTE),je=De.clone().vec4u8(X.OBJECTANDLAYERIDCOLOR);class Fe{constructor(){this.vertexBufferLayout=L()?je:De}elementCount(e){return 6*e.get(X.POSITION).indices.length}write(e,t,s,i,r,a){Z(s.get(X.POSITION),e,r.position,a,6),k(s.get(X.NORMAL),t,r.normal,a,6);const o=s.get(X.UV0)?.data;let n=0,c=0,l=1,f=1;o&&o.length>=4&&(n=o[0],c=o[1],l=o[2],f=o[3]),l=Math.min(1.99999,l+1),f=Math.min(1.99999,f+1);let h=s.get(X.POSITION).indices.length,p=a;const m=r.uv0;for(let S=0;S<h;++S)m.set(p,0,n),m.set(p,1,c),p++,m.set(p,0,l),m.set(p,1,c),p++,m.set(p,0,l),m.set(p,1,f),p++,m.set(p,0,l),m.set(p,1,f),p++,m.set(p,0,n),m.set(p,1,f),p++,m.set(p,0,n),m.set(p,1,c),p++;J(s.get(X.COLOR),4,r.color,a,6);const{data:u,indices:d}=s.get(X.SIZE);h=d.length;const g=r.size;p=a;for(let S=0;S<h;++S){const e=u[2*d[S]],t=u[2*d[S]+1];for(let s=0;s<6;++s)g.set(p,0,e),g.set(p,1,t),p++}if(K(s.get(X.ROTATION),r.rotation,a,6),s.get(X.CENTEROFFSETANDDISTANCE)?Q(s.get(X.CENTEROFFSETANDDISTANCE),r.centerOffsetAndDistance,a,6):$(r.centerOffsetAndDistance,a,6*h),s.get(X.FEATUREATTRIBUTE)?Q(s.get(X.FEATUREATTRIBUTE),r.featureAttribute,a,6):$(r.featureAttribute,a,6*h),null!=i){const e=s.get(X.POSITION)?.indices;if(e){const t=e.length,s=r.getField(X.OBJECTANDLAYERIDCOLOR,x);ee(i,s,t,a,6)}}}}export{ae as HUDMaterial,ye as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import{makeHandle as t}from\"../../../../../../core/handleUtils.js\";import{releaseMaybe as i}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{ONES as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as o}from\"../../../../../ViewingMode.js\";import{namedAnchorToHUDMaterialAnchorPos as d}from\"../../placementUtils.js\";import{DirectRenderer as c}from\"./DirectRenderer.js\";import{LodRenderer as l}from\"./LodRenderer.js\";import{createTexture as m,requiresHalfTexelOffset as u,defaultSymbolSizeRatio as h}from\"../../../../support/engineContent/sdfPrimitives.js\";import{CullFaceOptions as p}from\"../../../../webgl-engine/lib/basicInterfaces.js\";import{DefaultMaterial as w}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";import{HUDMaterial as f}from\"../../../../webgl-engine/materials/HUDMaterial.js\";import{schematicMRRFactors as g}from\"../../../../webgl-engine/materials/pbrUtils.js\";let y=class extends r{constructor(e){super(),this.view=null,this.layerUid=null,this._renderGeometries=new Map,this._materials=new Map,this._directRenderers=new Map,this._lodRenderers=new Map,this.view=e.view,this.layerUid=e.layerUid}initialize(){}destroy(){}async executeRenderCommands(e){for(const r of e)switch(r.id){case\"create-material\":await this._createMaterial(r);break;case\"create-direct-renderer\":await this._createDirectRenderer(r);break;case\"add-direct-renderer-geometry\":await this._addDirectRendererGeometry(r);break;case\"remove-direct-renderer-geometry\":await this._removeDirectRendererGeometry(r);break;case\"create-lod-renderer\":await this._createLodRenderer(r);break;case\"add-lod-instances\":await this._addLodInstances(r);break;case\"remove-lod-instances\":await this._removeLodInstances(r)}}async _createMaterial(e){const{view:r}=this,{sharedSymbolResources:s}=r;if(null==s)throw new Error(\"No shared symbol resources found!\");const{textures:n}=s,a=r.state.viewingMode===o.Global;let d=null;switch(e.type){case\"default\":d=_(s,{physicalBasedRenderingEnabled:!0,slicePlaneEnabled:!1,castShadows:!0,isPrimitive:!0,screenSizePerspectiveEnabled:!0,doublePrecisionRequiresObfuscation:r._stage.renderView.renderingContext.driverTest.doublePrecisionRequiresObfuscation.result},a);break;case\"hud\":{const[e,r]=b(n,a);this.addHandles([t((()=>i(r)))]),d=e}break;default:throw new Error(`unable to create unknown material type ${e.type}`)}this._materials.set(e.materialId,d)}_getMaterial(e){return this._materials.get(e)}async _createDirectRenderer(e){const r=e.materialId,t=this._getMaterial(r);if(null==t)throw new Error(`material not found ${r}`);const{view:i}=this,s=new c({material:t});this._directRenderers.set(r,s),i._stage.addRenderPlugin(s),i._stage.renderView.renderer.updateHasFlags()}async _addDirectRendererGeometry(e){const r=e.renderGeometryId,t=e.materialId;null!=this._renderGeometries.get(r)&&await this._removeDirectRendererGeometry({renderGeometryId:r});const i=this._directRenderers.get(t);if(null==i)return void console.error(\"no renderer assigned to provided material\");const s=i.addRenderGeometry(r,e.renderGeometryBuffer,e.localOrigin);this._renderGeometries.set(r,{renderGeometry:s,materialId:t}),this.view._stage.renderView.requestRender()}async _removeDirectRendererGeometry(e){const r=e.renderGeometryId,t=this._renderGeometries.get(r);if(null==t)return;const i=t.materialId,s=this._directRenderers.get(i);null!=s?s.removeRenderGeometry(e.renderGeometryId):console.error(\"no renderer assigned to provided material\")}async _createLodRenderer(e){const r=new l({view:this.view,layerUid:this.layerUid}),t=new AbortController,i=e=>this._getMaterial(e);await r.doLoad(e.lodRenderGeometry,i,t.signal),this._lodRenderers.set(e.lodRendererId,r)}async _addLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.addInstances(e.data)}async _removeLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.removeInstances(e.featureIds)}};function b(e,r){const t={anchorPosition:d.center,occlusionTest:!0,hasSlicePlane:!1},i=t,s=1;i.color=[1,0,0,1],i.outlineColor=[0,0,0,1],i.outlineSize=s;const n=null;if(null!=e){const r=e.fromData(\"circle-icon\",(()=>m(\"circle\")));i.textureId=r.texture.id,i.textureIsSignedDistanceField=!0,i.sampleSignedDistanceFieldTexelCenter=u(\"circle\")}return i.distanceFieldBoundingBox=v,[new f(t,r),n]}function _(e,r,t){const i={usePBR:r.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:g,ambient:n,diffuse:n,hasSlicePlane:r.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:r.castShadows,offsetTransparentBackfaces:!r.isPrimitive};return R(i),r.screenSizePerspectiveEnabled&&(i.screenSizePerspective=e.screenSizePerspectiveSettings),i.externalColor=a,i.isInstanced=!0,new w(i,{spherical:t,doublePrecisionRequiresObfuscation:!0})}function R(e){const r=e.opacity??1,t=r<1;return e.transparent=t,e.opacity=r,e.cullFace=t?p.None:p.Back,e}y=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.FeaturePipelineRenderManager\")],y);const v=[h/2,h/2,1-h/2,1-h/2];export{y as FeaturePipelineRenderManager,_ as createDefaultMaterial,b as createHudMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as r,invert as e,transpose as t}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";class n{constructor(r){this._bufferWriter=null,this._bufferWriter=r.createBufferWriter()}createBuffer(o,n){const s=this._bufferWriter;let l=null;if(o.transformation&&n)r(f,o.transformation),f[12]-=n[0],f[13]-=n[1],f[14]-=n[2],l=f;else{if(n)throw new Error(\"not implemented\");o.transformation&&(l=o.transformation)}let u=null;l&&(e(a,f),t(a,a),u=a);const m=o.attributes,c=s.elementCount(m),b=s.vertexBufferLayout.stride/4;c>Math.floor(i/b)&&console.warn(\"geometry with very large number of elements encountered\");const h=s.vertexBufferLayout.createBuffer(c),d=0;return s.write(l,u,m,o.objectAndLayerIdColor,h,d),{data:h.buffer,elementCount:c}}}const f=o(),a=o(),i=16777216/4;export{n as RenderGeometryBufferWriter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getContinuousIndexArray as e}from\"../../../../../../geometry/support/Indices.js\";import{createHudMaterial as r}from\"./FeaturePipelineRenderManager.js\";import{RenderGeometryBufferWriter as t}from\"./RenderGeometryBufferWriter.js\";import{BoundingInfo as n}from\"../../../../webgl-engine/lib/BoundingInfo.js\";import{VertexAttribute as a}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as s}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";class d{constructor(e){this._context=e,this._commands=[],this._transferables=new Set}createMaterial(e){const n=this._context,a=n.generateId(\"material\");switch(e){case\"default\":{const e=new s({},{spherical:this._context.globalViewingMode,doublePrecisionRequiresObfuscation:!0}),r=new t(e);n.registerRenderGeometryBufferWriter(a,r)}break;case\"hud\":{const e=r(null,this._context.globalViewingMode)[0],s=new t(e);n.registerRenderGeometryBufferWriter(a,s)}}return this._commands.push({id:\"create-material\",type:e,materialId:a}),a}createDirectRenderer(e){const r=this._context.generateId(\"material-renderer\");return this._commands.push({id:\"create-direct-renderer\",materialRendererId:r,materialId:e}),r}addDirectRendererGeometry(e,r,t){const n=r.materialId,a=this._context.getRenderGeometryBufferWriter(n);if(null==a)throw new Error(`no bufferwriter found for material ${n}`);const s=a.createBuffer(r,t);this._transferables.add(s.data),this._commands.push({id:\"add-direct-renderer-geometry\",renderGeometryId:e,materialId:n,renderGeometryBuffer:s,localOrigin:t})}removeDirectRendererGeometry(e){this._commands.push({id:\"remove-direct-renderer-geometry\",renderGeometryId:e})}createLodRenderer(r){const t=this._context.generateId(\"lod-renderer\"),s={levels:r.levels.map((r=>({components:r.components.map((r=>{const t=r.attributes.get(a.POSITION);if(!t||0===t.indices.length)throw new Error(\"positions attribute expected\");const s=3,d=e(t.indices.length/s),i=new n(d,s,t),o=this._context.getRenderGeometryBufferWriter(r.materialId);if(null==o)throw new Error(\"writer not found\");const m=o.createBuffer(r,null);this._transferables.add(m.data);return{materialId:r.materialId,renderGeometryBuffer:m,boundingInfo:{bbMax:i.bbMax,bbMin:i.bbMin}}})),minScreenSpaceRadius:r.minScreenSpaceRadius})))};return this._commands.push({id:\"create-lod-renderer\",lodRendererId:t,lodRenderGeometry:s}),t}addLodInstances(e,r){this._commands.push({id:\"add-lod-instances\",lodRendererId:e,data:r}),this._transferables.add(r.featureIds.buffer),this._transferables.add(r.globalTransforms.buffer),this._transferables.add(r.localTransforms.buffer)}removeLodInstances(e,r){this._commands.push({id:\"remove-lod-instances\",lodRendererId:e,featureIds:r}),this._transferables.add(r.buffer)}async dispatch(){const e=this._commands,r=Array.from(this._transferables);this._clearCommandBuffer(),this._context.dispatchRenderCommands(e,r)}_clearCommandBuffer(){this._commands=[],this._transferables.clear()}}export{d as RenderCommandEncoder,a as VertexAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ViewingMode as e}from\"../../../../../ViewingMode.js\";import{RenderCommandEncoder as r}from\"./RenderCommandEncoder.js\";class t{constructor(r){this._idCounter=0,this._bufferWriters=new Map,this._dispatchRenderCommandsCallback=async()=>{},this.globalViewingMode=!1,this.globalViewingMode=r.viewingMode===e.Global,this._dispatchRenderCommandsCallback=r.dispatchRenderCommandsCallback}generateId(e=\"\"){return`${e}${this._idCounter++}`}createEncoder(){return new r(this)}async dispatchRenderCommands(e,r){this._dispatchRenderCommandsCallback(e,r)}registerRenderGeometryBufferWriter(e,r){this._bufferWriters.set(e,r)}getRenderGeometryBufferWriter(e){return this._bufferWriters.get(e)}}export{t as RenderCommandContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar E;!function(E){E[E.OBJECT_ID=0]=\"OBJECT_ID\",E[E.PARTITION_ID=1]=\"PARTITION_ID\",E[E.GEOMETRY_MAP_COORDINATES=2]=\"GEOMETRY_MAP_COORDINATES\",E[E.GEOMETRY_RENDER_COORDINATES=3]=\"GEOMETRY_RENDER_COORDINATES\",E[E.TILE_CENTER_RENDER_COORDINATES=4]=\"TILE_CENTER_RENDER_COORDINATES\"}(E||(E={}));export{E as FeatureDataItem};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBuffer as t}from\"../../../../../../geometry/projection/projectBuffer.js\";import{projectVectorToVector as r}from\"../../../../../../geometry/projection/projectVectorToVector.js\";import{center as o}from\"../../../../../../geometry/support/aaBoundingRect.js\";import{FeatureDataItem as n}from\"./interfaces.js\";async function a(e,t){const{numFeatures:r,tile:o,partitionInfo:n}=e,{pages:a}=o;if(0===a.length||0===r)return new Uint32Array;const i=new Uint32Array(r);if(n){const e=a.reduce(((e,{featureCount:t})=>e+t),0),t=new Uint32Array(e);let o=0;for(const r of a)o=r.readAllObjectIds(t,o);const c=n.tileIndices;for(let n=0;n<r;++n){const e=t[c[n]];i[n]=e}}else{let e=0;for(const t of a)e=t.readAllObjectIds(i,e)}return i}async function i(e,t){const{numFeatures:r,tile:o,partitionInfo:n}=e,{pages:a}=o;if(0===a.length||0===r)return new Float64Array;const i=new Float64Array(3*r);if(n){const e=a.reduce(((e,{featureCount:t})=>e+t),0),t=new Float64Array(3*e);let o=0;for(const r of a)o=r.readAllCoordinates(t,o);const c=n.tileIndices;for(let n=0;n<r;++n){const e=c[n],r=t[3*e+0],o=t[3*e+1],a=t[3*e+2];i[3*n+0]=r,i[3*n+1]=o,i[3*n+2]=a}}else{let e=0;for(const t of a)e=t.readAllCoordinates(i,e)}return i}async function c(e,r){await e.provision([n.GEOMETRY_MAP_COORDINATES],r);const{numFeatures:o,tile:a,mapCoordinates:i}=e,{pages:c}=a;if(0===c.length||0===o)return new Float64Array;const s=r.viewSpatialReference,f=r.renderSpatialReference,l=new Float64Array(3*o);if(!t(i,s,0,l,f,0,o))throw new Error(\"Failed to project coordinates\");return l}async function s(t,n){const a=n.viewSpatialReference,i=n.renderSpatialReference,c=t.tile.descriptor.extent,s=o(c),f=e();return r([s[0],s[1],0],a,f,i),f}export{i as getMapCoordinates,a as getObjectIds,c as getRenderCoordinates,s as getTileCenterRenderCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureDataItem as t}from\"./interfaces.js\";import{getTileCenterRenderCoordinates as e,getRenderCoordinates as r,getMapCoordinates as i,getObjectIds as n}from\"./processingUtils.js\";class s{constructor(t,e,r=null){this._tile=t,this._numFeatures=e,this._partitionInfo=r}get partitionInfo(){return this._partitionInfo}get tile(){return this._tile}get numFeatures(){return this._numFeatures}get tileId(){return this._tile.descriptor.id}get objectIds(){if(null==this._objectIds)throw new Error(\"objectIds haven't been provisioned yet\");return this._objectIds}get partitionIds(){if(null==this._partitionIds)throw new Error(\"partitionIds haven't been provisioned yet\");return this._partitionIds}get mapCoordinates(){if(null==this._mapCoordinates)throw new Error(\"mapCoordinates haven't been provisioned yet\");return this._mapCoordinates}get renderCoordinates(){if(null==this._renderCoordinates)throw new Error(\"renderCoordinates haven't been provisioned yet\");return this._renderCoordinates}get tileCenterRenderCoordinates(){if(null==this._tileCenterRenderCoordinates)throw new Error(\"tileCenterRenderCoordinates hasn't been provisioned yet\");return this._tileCenterRenderCoordinates}async provision(s,o){for(const a of s)switch(a){case t.OBJECT_ID:if(this._objectIds)return;this._objectIds=await n(this);break;case t.PARTITION_ID:if(this._partitionIds)return;this._partitionIds=new Uint32Array(this._numFeatures);break;case t.GEOMETRY_MAP_COORDINATES:if(this._mapCoordinates)return;this._mapCoordinates=await i(this);break;case t.GEOMETRY_RENDER_COORDINATES:if(this._renderCoordinates)return;this._renderCoordinates=await r(this,o);break;case t.TILE_CENTER_RENDER_COORDINATES:if(this._tileCenterRenderCoordinates)return;this._tileCenterRenderCoordinates=await e(this,o);break;default:throw new Error(\"not implemented\")}}dispose(){if(this.partitions){for(const t of this.partitions)t.dispose();this.partitions=void 0}}}export{s as FeatureData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t}from\"../../../../core/unitUtils.js\";import{rotateZ as e,rotateX as r,rotateY as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{fromArray as o,ONES as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as l}from\"../../../../chunks/vec42.js\";import{clone as u,ONES as a}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectPoint as c}from\"../../../../geometry/projection.js\";import{width as m,depth as p,height as f}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as h}from\"../../../../geometry/support/aaBoundingRect.js\";import{ringsCentroid as y}from\"../../../../geometry/support/centroid.js\";import{getPointOnPath as x,getPathLength as g}from\"../../../../geometry/support/coordsUtils.js\";import{vertexSpaceOriginToPoint as d}from\"../../../../geometry/support/meshVertexSpaceUtils.js\";import{makeDehydratedPoint as j}from\"../../../../layers/graphics/dehydratedPoint.js\";import{isHydratedGeometry as v,clonePoint as z}from\"../../../../layers/graphics/hydratedFeatures.js\";function b(t,e){if(\"point\"===t.type)return P(t,e,!1);if(v(t))switch(t.type){case\"extent\":return P(t.center,e,!1);case\"polygon\":return P(t.centroid,e,!1);case\"polyline\":return P(w(t),e,!0);case\"mesh\":return P(d(t.vertexSpace,t.spatialReference)??t.extent.center,e,!1);case\"multipoint\":return}else switch(t.type){case\"extent\":return P(M(t),e,!0);case\"polygon\":return P(R(t),e,!0);case\"polyline\":return P(w(t),e,!0);case\"multipoint\":return}}function w(t){const e=t.paths[0];if(!e||0===e.length)return null;const r=x(e,g(e)/2);return j(r[0],r[1],r[2],t.spatialReference)}function M(t){return j(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}function R(t){const e=t.rings[0];if(!e||0===e.length)return null;const r=y(t.rings,!!t.hasZ);return j(r[0],r[1],r[2],t.spatialReference)}function P(t,e,r){const n=r?t:z(t);return e&&t?c(t,n,e)?n:null:n}function F(t){if(!t)return 0;switch(t.type){case\"point\":return t.z;case\"extent\":return t.zmax;case\"polygon\":return t.hasZ?t.rings.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case\"polyline\":return t.hasZ?t.paths.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case\"mesh\":return t.extent.zmax;case\"multipoint\":return}}function S(t,e,r,n=0){if(t){e||(e=h());const i=t;let o=.5*i.width*(r-1),s=.5*i.height*(r-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),l(e,i.xmin-o-n,i.ymin-s-n,i.xmax+o+n,i.ymax+s+n),e}return null}function A(t,e,r=null){const n=u(a);return null!=t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),null!=e?n[3]=e:null!=t&&t.length>3&&(n[3]=t[3]),r&&(n[0]*=r,n[1]*=r,n[2]*=r,n[3]*=r),n}function B(t,e,r,n,i,o=[0,0,0,0]){for(let s=0;s<3;++s)o[s]=null!=t?.[s]?t[s]:null!=r?.[s]?r[s]:i[s];return o[3]=null!=e?e:null!=n?n:i[3],o}function D(t=s,e,r,n=1){const i=new Array(3);if(null==e||null==r)i[0]=1,i[1]=1,i[2]=1;else{let n,o=0;for(let s=2;s>=0;s--){const l=t[s];let u;const a=null!=l,c=0===s&&!n&&!a,m=r[s];\"symbol-value\"===l||c?u=0!==m?e[s]/m:1:a&&\"proportional\"!==l&&isFinite(l)&&(u=0!==m?l/m:1),null!=u&&(i[s]=u,n=u,o=Math.max(o,Math.abs(u)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=n:0===i[t]&&(i[t]=.001*o)}for(let o=2;o>=0;o--)i[o]/=n;return o(i)}function I(t){return null!=t.isPrimitive}function U(t){return Z(I(t)?[t.width,t.depth,t.height]:t)?null:\"Symbol sizes may not be negative values\"}function Z(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function k(t,o,s,l=i()){return t&&e(l,l,-t/180*Math.PI),o&&r(l,l,o/180*Math.PI),s&&n(l,l,s/180*Math.PI),l}function E(e,r,n){if(null!=n.minDemResolution)return n.minDemResolution;const i=t(r),o=m(e)*i,s=p(e)*i,l=f(e)*(r.isGeographic?1:i);return 0===o&&0===s&&0===l?n.minDemResolutionForPoints:.01*Math.max(o,s,l)}export{b as computeCentroid,F as computeMaxZ,k as computeObjectRotation,D as computeObjectScale,E as demResolutionForBoundingBox,S as enlargeExtent,Z as isValidSize,A as mixinColorAndOpacity,B as overrideColor,U as validateSymbolLayerSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{compactIndices as o}from\"../../../../../../geometry/support/Indices.js\";function n(n){const t=new Map;for(const[r,s]of n)t.set(r,{...s,indices:o(s.indices)});return t}function t(o){const n=[];for(const[t,r]of o)n.push([t,r]);return n}export{t as attributesMapToInputAttributes,n as inputAttributesToAttributesMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar n;!function(n){function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)}function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u}function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c}function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]}function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}n.length=t,n.normalize=c,n.scale=o,n.add=r,n.subtract=u}(n||(n={}));export{n as Vec3Compact};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{d as t,e as n,n as e,h as o,g as s,f as r,i as l,c as h,t as u}from\"../../../../chunks/vec32.js\";import{fromValues as c,create as a,clone as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import{clone as p,create as i,fromValues as w}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newDoubleArray as g}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as O,floatArrayFrom as m}from\"../../../../geometry/support/FloatArray.js\";import{getZeroIndexArray as M,getContinuousIndexArray as A}from\"../../../../geometry/support/Indices.js\";import{create as I,fromPositionAndNormal as y,intersectRay as N}from\"../../../../geometry/support/plane.js\";import{wrap as P}from\"../../../../geometry/support/ray.js\";import{Attribute as T}from\"./Attribute.js\";import{Vec3Compact as S}from\"./BufferVectorMath.js\";import{ContentObjectType as R}from\"./ContentObjectType.js\";import{Geometry as b}from\"./Geometry.js\";import{assert as L}from\"./Util.js\";import{VertexAttribute as j}from\"./VertexAttribute.js\";const d=S,E=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],U=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],V=[0,0,1,0,1,1,0,1],x=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],F=new Array(36);for(let Nt=0;Nt<6;Nt++)for(let t=0;t<6;t++)F[6*Nt+t]=Nt;const v=new Array(36);for(let Nt=0;Nt<6;Nt++)v[6*Nt]=0,v[6*Nt+1]=1,v[6*Nt+2]=2,v[6*Nt+3]=2,v[6*Nt+4]=3,v[6*Nt+5]=0;function C(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let o=0;o<8;o++)e[3*o]=E[o][0]*n[0],e[3*o+1]=E[o][1]*n[1],e[3*o+2]=E[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,x,3,!0)],[j.NORMAL,new T(U,F,3)],[j.UV0,new T(V,v,2)]])}const G=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],D=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],q=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],B=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function k(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let o=0;o<6;o++)e[3*o]=G[o][0]*n[0],e[3*o+1]=G[o][1]*n[1],e[3*o+2]=G[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,q,3,!0)],[j.NORMAL,new T(D,B,3)]])}const z=c(-.5,0,-.5),Z=c(.5,0,-.5),H=c(0,0,.5),J=c(0,.5,0),K=a(),Q=a(),W=a(),X=a(),Y=a();t(K,z,J),t(Q,z,Z),n(W,K,Q),e(W,W),t(K,Z,J),t(Q,Z,H),n(X,K,Q),e(X,X),t(K,H,J),t(Q,H,z),n(Y,K,Q),e(Y,Y);const $=[z,Z,H,J],_=[0,-1,0,W[0],W[1],W[2],X[0],X[1],X[2],Y[0],Y[1],Y[2]],tt=[0,1,2,3,1,0,3,2,1,3,0,2],nt=[0,0,0,1,1,1,2,2,2,3,3,3];function et(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let o=0;o<4;o++)e[3*o]=$[o][0]*n[0],e[3*o+1]=$[o][1]*n[1],e[3*o+2]=$[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,tt,3,!0)],[j.NORMAL,new T(_,nt,3)]])}function ot(t,n,e,o,s={uv:!0}){const r=-Math.PI,l=2*Math.PI,h=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(o)),f=(c+1)*(a+1),p=O(3*f),i=O(3*f),w=O(2*f),g=[];let m=0;for(let O=0;O<=a;O++){const t=[],e=O/a,o=h+e*u,s=Math.cos(o);for(let h=0;h<=c;h++){const u=h/c,a=r+u*l,f=Math.cos(a)*s,g=Math.sin(o),O=-Math.sin(a)*s;p[3*m]=f*n,p[3*m+1]=g*n,p[3*m+2]=O*n,i[3*m]=f,i[3*m+1]=g,i[3*m+2]=O,w[2*m]=u,w[2*m+1]=e,t.push(m),++m}g.push(t)}const A=new Array;for(let O=0;O<a;O++)for(let t=0;t<c;t++){const n=g[O][t],e=g[O][t+1],o=g[O+1][t+1],s=g[O+1][t];0===O?(A.push(n),A.push(o),A.push(s)):O===a-1?(A.push(n),A.push(e),A.push(o)):(A.push(n),A.push(e),A.push(o),A.push(o),A.push(s),A.push(n))}const I=[[j.POSITION,new T(p,A,3,!0)],[j.NORMAL,new T(i,A,3,!0)]];return s.uv&&I.push([j.UV0,new T(w,A,2,!0)]),s.offset&&(I[0][0]=j.OFFSET,I.push([j.POSITION,new T(Float64Array.from(s.offset),M(A.length),3,!0)])),new b(t,I)}function st(t,n,e,o){const s=rt(n,e,o);return new b(t,s)}function rt(t,n,e){const o=t;let s,r;if(e)s=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=o*(1+Math.sqrt(5))/2;s=[-o,t,0,o,t,0,-o,-t,0,o,-t,0,0,-o,t,0,o,t,0,-o,-t,0,o,-t,t,0,-o,t,0,o,-t,0,-o,-t,0,o],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let c=0;c<s.length;c+=3)d.scale(s,c,t/d.length(s,c));let l={};function h(n,e){n>e&&([n,e]=[e,n]);const o=n.toString()+\".\"+e.toString();if(l[o])return l[o];let r=s.length;return s.length+=3,d.add(s,3*n,s,3*e,s,r),d.scale(s,r,t/d.length(s,r)),r/=3,l[o]=r,r}for(let c=0;c<n;c++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],o=r[e+1],s=r[e+2],l=h(t,o),u=h(o,s),c=h(s,t),a=4*e;n[a]=t,n[a+1]=l,n[a+2]=c,n[a+3]=o,n[a+4]=u,n[a+5]=l,n[a+6]=s,n[a+7]=c,n[a+8]=u,n[a+9]=l,n[a+10]=u,n[a+11]=c}r=n,l={}}const u=m(s);for(let c=0;c<u.length;c+=3)d.normalize(u,c);return[[j.POSITION,new T(m(s),r,3,!0)],[j.NORMAL,new T(u,r,3,!0)]]}function lt(t,n,e,o,s,r,l,h,u,c=null){const a=e?p(e):i(),f=n?p(n):w(0,0,1),g=o?[255*o[0],255*o[1],255*o[2],o.length>3?255*o[3]:255]:[255,255,255,255],O=null!=r&&2===r.length?r:[1,1],m=null!=s?[s]:[0],A=M(1),I=[[j.POSITION,new T(a,A,3,!0)],[j.NORMAL,new T(f,A,3,!0)],[j.COLOR,new T(g,A,4,!0)],[j.SIZE,new T(O,A,2)],[j.ROTATION,new T(m,A,1,!0)]];if(h&&I.push([j.UV0,new T(h,A,h.length)]),null!=l&&(l=[l[0],l[1],l[2],l[3]],I.push([j.CENTEROFFSETANDDISTANCE,new T(l,A,4)])),u){const t=[u[0],u[1],u[2],u[3]];I.push([j.FEATUREATTRIBUTE,new T(t,A,4)])}return new b(t,I,null,R.Point,c)}const ht=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function ut(t,n=ht){const e=new Array(12);for(let c=0;c<4;c++)for(let t=0;t<3;t++)e[3*c+t]=n[c][t];const o=[0,1,2,2,3,0],s=[0,0,1],r=[0,0,0,0,0,0],l=[0,0,1,0,1,1,0,1],h=[255,255,255,255],u=[[j.POSITION,new T(e,o,3,!0)],[j.NORMAL,new T(s,r,3,!0)],[j.UV0,new T(l,o,2,!0)],[j.COLOR,new T(h,r,4,!0)]];return new b(t,u)}function ct(t,n,e,o,s=!0,r=!0){let l=0;const h=n,u=t;let a=c(0,l,0),f=c(0,l+u,0),p=c(0,-1,0),i=c(0,1,0);o&&(l=u,f=c(0,0,0),a=c(0,l,0),p=c(0,1,0),i=c(0,-1,0));const w=[f,a],g=[p,i],m=e+2,M=Math.sqrt(u*u+h*h);if(o)for(let O=e-1;O>=0;O--){const t=O*(2*Math.PI/e),n=c(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=c(u*Math.cos(t)/M,-h/M,u*Math.sin(t)/M);g.push(o)}else for(let O=0;O<e;O++){const t=O*(2*Math.PI/e),n=c(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=c(u*Math.cos(t)/M,h/M,u*Math.sin(t)/M);g.push(o)}const A=new Array,I=new Array;if(s){for(let t=3;t<w.length;t++)A.push(1),A.push(t-1),A.push(t),I.push(0),I.push(0),I.push(0);A.push(w.length-1),A.push(2),A.push(1),I.push(0),I.push(0),I.push(0)}if(r){for(let t=3;t<w.length;t++)A.push(t),A.push(t-1),A.push(0),I.push(t),I.push(t-1),I.push(1);A.push(0),A.push(2),A.push(w.length-1),I.push(1),I.push(2),I.push(g.length-1)}const y=O(3*m);for(let c=0;c<m;c++)y[3*c]=w[c][0],y[3*c+1]=w[c][1],y[3*c+2]=w[c][2];const N=O(3*m);for(let c=0;c<m;c++)N[3*c]=g[c][0],N[3*c+1]=g[c][1],N[3*c+2]=g[c][2];return[[j.POSITION,new T(y,A,3,!0)],[j.NORMAL,new T(N,I,3,!0)]]}function at(t,n,e,o,s,r=!0,l=!0){return new b(t,ct(n,e,o,s,r,l))}function ft(t,h,u,p,i,w,g){const m=i?f(i):c(1,0,0),M=w?f(w):c(0,0,0);g??=!0;const A=a();e(A,m);const I=a();o(I,A,Math.abs(h));const y=a();o(y,I,-.5),s(y,y,M);const N=c(0,1,0);Math.abs(1-r(A,N))<.2&&l(N,0,0,1);const P=a();n(P,A,N),e(P,P),n(N,P,A);const S=2*p+(g?2:0),R=p+(g?2:0),L=O(3*S),d=O(3*R),E=O(2*S),U=new Array(3*p*(g?4:2)),V=new Array(3*p*(g?4:2));g&&(L[3*(S-2)]=y[0],L[3*(S-2)+1]=y[1],L[3*(S-2)+2]=y[2],E[2*(S-2)]=0,E[2*(S-2)+1]=0,L[3*(S-1)]=L[3*(S-2)]+I[0],L[3*(S-1)+1]=L[3*(S-2)+1]+I[1],L[3*(S-1)+2]=L[3*(S-2)+2]+I[2],E[2*(S-1)]=1,E[2*(S-1)+1]=1,d[3*(R-2)]=-A[0],d[3*(R-2)+1]=-A[1],d[3*(R-2)+2]=-A[2],d[3*(R-1)]=A[0],d[3*(R-1)+1]=A[1],d[3*(R-1)+2]=A[2]);const x=(t,n,e)=>{U[t]=n,V[t]=e};let F=0;const v=a(),C=a();for(let n=0;n<p;n++){const t=n*(2*Math.PI/p);o(v,N,Math.sin(t)),o(C,P,Math.cos(t)),s(v,v,C),d[3*n]=v[0],d[3*n+1]=v[1],d[3*n+2]=v[2],o(v,v,u),s(v,v,y),L[3*n]=v[0],L[3*n+1]=v[1],L[3*n+2]=v[2],E[2*n]=n/p,E[2*n+1]=0,L[3*(n+p)]=L[3*n]+I[0],L[3*(n+p)+1]=L[3*n+1]+I[1],L[3*(n+p)+2]=L[3*n+2]+I[2],E[2*(n+p)]=n/p,E[2*n+1]=1;const e=(n+1)%p;x(F++,n,n),x(F++,n+p,n),x(F++,e,e),x(F++,e,e),x(F++,n+p,n),x(F++,e+p,e)}if(g){for(let t=0;t<p;t++){const n=(t+1)%p;x(F++,S-2,R-2),x(F++,t,R-2),x(F++,n,R-2)}for(let t=0;t<p;t++){const n=(t+1)%p;x(F++,t+p,R-1),x(F++,S-1,R-1),x(F++,n+p,R-1)}}const G=[[j.POSITION,new T(L,U,3,!0)],[j.NORMAL,new T(d,V,3,!0)],[j.UV0,new T(E,U,2,!0)]];return new b(t,G)}function pt(t,n,e,o,s,r){o=o||10,s=null==s||s,L(n.length>1);const l=[[0,0,0]],h=[],u=[];for(let c=0;c<o;c++){h.push([0,-c-1,-(c+1)%o-1]);const t=c/o*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return it(t,u,n,l,h,s,r)}function it(r,u,a,f,p,w,g=c(0,0,0)){const m=u.length,M=O(a.length*m*3+(6*f.length||0)),A=O(a.length*m*3+(f?6:0)),S=new Array,R=new Array;let L=0,d=0;const E=i(),U=i(),V=i(),x=i(),F=i(),v=i(),C=i(),G=i(),D=i(),q=i(),B=i(),k=i(),z=i(),Z=I();l(D,0,1,0),t(U,a[1],a[0]),e(U,U),w?(s(G,a[0],g),e(V,G)):l(V,0,0,1),At(U,V,D,D,F,V,It),h(x,V),h(k,F);for(let t=0;t<f.length;t++)o(v,F,f[t][0]),o(G,V,f[t][2]),s(v,v,G),s(v,v,a[0]),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2];A[d++]=-U[0],A[d++]=-U[1],A[d++]=-U[2];for(let t=0;t<p.length;t++)S.push(p[t][0]>0?p[t][0]:-p[t][0]-1+f.length),S.push(p[t][1]>0?p[t][1]:-p[t][1]-1+f.length),S.push(p[t][2]>0?p[t][2]:-p[t][2]-1+f.length),R.push(0),R.push(0),R.push(0);let H=f.length;const J=f.length-1;for(let l=0;l<a.length;l++){let r=!1;if(l>0){h(E,U),l<a.length-1?(t(U,a[l+1],a[l]),e(U,U)):r=!0,s(q,E,U),e(q,q),s(B,a[l-1],x),y(a[l],q,Z);N(Z,P(B,E),G)?(t(G,G,a[l]),e(V,G),n(F,q,V),e(F,F)):At(q,x,k,D,F,V,It),h(x,V),h(k,F)}w&&(s(G,a[l],g),e(z,G));for(let t=0;t<m;t++)if(o(v,F,u[t][0]),o(G,V,u[t][1]),s(v,v,G),e(C,v),A[d++]=C[0],A[d++]=C[1],A[d++]=C[2],s(v,v,a[l]),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2],!r){const n=(t+1)%m;S.push(H+t),S.push(H+m+t),S.push(H+n),S.push(H+n),S.push(H+m+t),S.push(H+m+n);for(let t=0;t<6;t++){const n=S.length-6;R.push(S[n+t]-J)}}H+=m}const K=a[a.length-1];for(let t=0;t<f.length;t++)o(v,F,f[t][0]),o(G,V,f[t][1]),s(v,v,G),s(v,v,K),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2];const Q=d/3;A[d++]=U[0],A[d++]=U[1],A[d++]=U[2];const W=H-m;for(let t=0;t<p.length;t++)S.push(p[t][0]>=0?H+p[t][0]:-p[t][0]-1+W),S.push(p[t][2]>=0?H+p[t][2]:-p[t][2]-1+W),S.push(p[t][1]>=0?H+p[t][1]:-p[t][1]-1+W),R.push(Q),R.push(Q),R.push(Q);const X=[[j.POSITION,new T(M,S,3,!0)],[j.NORMAL,new T(A,R,3,!0)]];return new b(r,X)}function wt(t,n,e,o){L(n.length>1,\"createPolylineGeometry(): polyline needs at least 2 points\"),L(3===n[0].length,\"createPolylineGeometry(): malformed vertex\"),L(null==e||e.length===n.length,\"createPolylineGeometry: need same number of points and normals\"),L(null==e||3===e[0].length,\"createPolylineGeometry(): malformed normal\");const s=g(3*n.length),r=new Array(2*(n.length-1));let l=0,h=0;for(let c=0;c<n.length;c++){for(let t=0;t<3;t++)s[l++]=n[c][t];c>0&&(r[h++]=c-1,r[h++]=c)}const u=[[j.POSITION,new T(s,r,3,!0)]];if(e){const t=O(3*e.length);let o=0;for(let s=0;s<n.length;s++)for(let n=0;n<3;n++)t[o++]=e[s][n];u.push([j.NORMAL,new T(t,r,3,!0)])}return o&&u.push([j.COLOR,new T(o,A(o.length/4),4)]),new b(t,u,null,R.Line)}function gt(t,n,e,o,s,r=0){const l=new Array(18),h=[[-e,r,s/2],[o,r,s/2],[0,n+r,s/2],[-e,r,-s/2],[o,r,-s/2],[0,n+r,-s/2]],u=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let c=0;c<6;c++)l[3*c]=h[c][0],l[3*c+1]=h[c][1],l[3*c+2]=h[c][2];return new b(t,[[j.POSITION,new T(l,u,3,!0)]])}function Ot(t,n){const e=t.getMutableAttribute(j.POSITION).data;for(let o=0;o<e.length;o+=3){const t=e[o],s=e[o+1],r=e[o+2];l(yt,t,s,r),u(yt,yt,n),e[o]=yt[0],e[o+1]=yt[1],e[o+2]=yt[2]}}function mt(t,n=t){const e=t.attributes,o=e.get(j.POSITION).data,s=e.get(j.NORMAL).data;if(s){const t=n.getMutableAttribute(j.NORMAL).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}if(o){const t=n.getMutableAttribute(j.POSITION).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}}function Mt(t,o,s,l,h){return!(Math.abs(r(o,t))>h)&&(n(s,t,o),e(s,s),n(l,s,t),e(l,l),!0)}function At(t,n,e,o,s,r,l){return Mt(t,n,s,r,l)||Mt(t,e,s,r,l)||Mt(t,o,s,r,l)}const It=.99619469809,yt=i();export{mt as cgToGIS,C as createBoxGeometry,at as createConeGeometry,ct as createConeGeometryData,ft as createCylinderGeometry,k as createDiamondGeometry,gt as createExtrudedTriangle,it as createPathExtrusionGeometry,lt as createPointGeometry,rt as createPolySphereData,st as createPolySphereGeometry,wt as createPolylineGeometry,ot as createSphereGeometry,ut as createSquareGeometry,et as createTetrahedronGeometry,pt as createTubeGeometry,At as makeOrthoBasisDirUpFallback,Ot as transformInPlace};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../../../core/has.js\";import{inputAttributesToAttributesMap as e}from\"./symbolizationUtils.js\";import{cloneAttributeData as t}from\"../../../../webgl-engine/lib/AttributeArray.js\";import{createConeGeometryData as n}from\"../../../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as i}from\"../../../../webgl-engine/lib/VertexAttribute.js\";function r(t,i){const r=(t,n,r=!1)=>({levels:t.map((t=>{const o=e(n(t.tesselation));r&&a(o);return{components:[{attributes:o,objectAndLayerIdColor:void 0,transformation:null,materialId:i}],minScreenSpaceRadius:t.minScreenSpaceRadius}}))});switch(t){case\"cone\":return r(s,(e=>n(1,.5,e,!1)),!0);case\"sphere\":case\"cube\":case\"inverted-cone\":case\"cylinder\":case\"tetrahedron\":case\"diamond\":throw new Error(\"not implemented\");default:return}}function a(e){const t=e,n=t.get(i.POSITION).data,r=t.get(i.NORMAL).data;if(r){const t=o(e,i.NORMAL).data;for(let e=0;e<r.length;e+=3){const n=r[e+1];t[e+1]=-r[e+2],t[e+2]=n}}if(n){const t=o(e,i.POSITION).data;for(let e=0;e<n.length;e+=3){const i=n[e+1];t[e+1]=-n[e+2],t[e+2]=i}}}function o(e,n){let i=e.get(n);return i&&!i.exclusive&&(i={...i,exclusive:!0,data:t(i.data)},e.set(n,i)),i}const s=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];export{a as convertCoordinatesToZUp,r as createPrimitiveGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{identity as o,scale as s}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as i}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{fromArray as a,create as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as c}from\"../../../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{create as l,size as d}from\"../../../../../../geometry/support/aaBoundingBox.js\";import{objectSymbolLayerPrimitiveBoundingBox as m,objectSymbolLayerSizeWithResourceSize as p}from\"../../../../../../symbols/support/symbolLayerUtils3D.js\";import{computeObjectScale as f}from\"../../graphicUtils.js\";import{FeatureDataItem as u}from\"../featureData/interfaces.js\";import{createPrimitiveGeometry as h}from\"./primitiveObjectUtils.js\";let j=class extends r{constructor(e){super(),this._context=e,this.lodRendererId=null,this._loaded=!1}get loaded(){return this._loaded}async load(e){const r=e.createMaterial(\"default\"),t=h(\"cone\",r);this.lodRendererId=e.createLodRenderer(t),this._loaded=!0}async add(e,r){if(null==this.lodRendererId)throw new Error(\"expected lod renderer id to not be null\");await this._provisionFeatureData(e);const t=e.numFeatures,o=!0,s=l(m(\"cone\")),i=a(d(s)),n=a(p(i,{isPrimitive:o,width:100,depth:null,height:null})),c=new Float64Array(16*t),f=new Float64Array(16*t),u=e.mapCoordinates;for(let a=0;a<t;++a){const e=a,r=u[3*a+0],t=u[3*a+1],o=u[3*a+2],s=this._computeGlobalTransform(r,t,o,this._context.viewSpatialReference,b),l=this._computeLocalTransform(n,i,y);this._writeMatrixToTypedBuffer(c,e,l),this._writeMatrixToTypedBuffer(f,e,s)}const h={featureIds:new Uint32Array(e.objectIds),localTransforms:c,globalTransforms:f};r.addLodInstances(this.lodRendererId,h)}async remove(e,r){if(null==this.lodRendererId)return;const t=new Uint32Array(e.objectIds);r.removeLodInstances(this.lodRendererId,t)}async _provisionFeatureData(e){await e.provision([u.GEOMETRY_MAP_COORDINATES,u.OBJECT_ID],this._context)}_writeMatrixToTypedBuffer(e,r,t){let o=16*r;for(let s=0;s<16;s++)e[o++]=t[s]}_computeGlobalTransform(e,r,t,o,s){return _[0]=e,_[1]=r,_[2]=t,c(o,_,s,this._context.renderSpatialReference),s}_computeLocalTransform(e,r,t){return o(t),this._applyObjectScale(e,r,t),t}_applyObjectScale(e,r,t){const o=f(e,e,r,this._context.renderCoordsHelper.unitInMeters);1===o[0]&&1===o[1]&&1===o[2]||s(t,t,o)}};j=e([t(\"esri.views.3d.layers.graphics.pipeline.symbolization.TestObjectSymbol\")],j);const _=n(),y=i(),b=i();export{j as TestObjectSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{FeatureDataItem as a}from\"../featureData/interfaces.js\";import{inputAttributesToAttributesMap as i}from\"./symbolizationUtils.js\";import{Attribute as s}from\"../../../../webgl-engine/lib/Attribute.js\";import{VertexAttribute as n}from\"../../../../webgl-engine/lib/VertexAttribute.js\";let l=class extends r{constructor(e){super(),this._context=e,this.materialId=null,this._loaded=!1}get loaded(){return this._loaded}async load(e){this.materialId=e.createMaterial(\"hud\"),e.createDirectRenderer(this.materialId),this._loaded=!0}async add(e,r){if(null==this.materialId)throw new Error(\"expected material not to be null\");await this._provisionFeatureData(e);const{numFeatures:t,tileId:a,renderCoordinates:l,tileCenterRenderCoordinates:m}=e,d=new Float64Array([0,0,1]),c=new Float64Array([255,255,255,255]),p=new Float64Array([24,24]),w=new Float64Array([0,0,0,1]),y=new Float64Array([0,0]),u=new Float64Array([0]),A=new Uint32Array(t);for(let o=0;o<t;++o)A[o]=o;const E=new Uint32Array(t);for(let o=0;o<t;++o)E[o]=0;const I=new s(l,A,3,!0),R=new s(d,E,3,!0),f=new s(y,E,2,!0),h=new s(c,E,4,!0),b=new s(u,E,1,!0),j=new s(p,E,2,!0),O=new s(w,E,4,!0),_=[[n.POSITION,I],[n.NORMAL,R],[n.UV0,f],[n.COLOR,h],[n.ROTATION,b],[n.SIZE,j],[n.CENTEROFFSETANDDISTANCE,O]],D={attributes:i(_),objectAndLayerIdColor:void 0,transformation:o(),materialId:this.materialId};r.addDirectRendererGeometry(a,D,m)}async remove(e,r){r.removeDirectRendererGeometry(e.tileId)}async _provisionFeatureData(e){await e.provision([a.GEOMETRY_RENDER_COORDINATES,a.TILE_CENTER_RENDER_COORDINATES],this._context)}};l=e([t(\"esri.views.3d.layers.graphics.pipeline.symbolization.TestSymbol\")],l);export{l as TestSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureData as t}from\"../featureData/FeatureData.js\";import{FeatureDataItem as i}from\"../featureData/interfaces.js\";import{TestObjectSymbol as o}from\"./TestObjectSymbol.js\";import{TestSymbol as a}from\"./TestSymbol.js\";class s{constructor(t){this._symbols=new Map,this._context=t}async load(){this._symbols.set(0,new a(this._context)),this._symbols.set(1,new o(this._context))}async add(t,i){await this._provisionFeatureData(t,this._context);const o=this._partition(t);await Promise.all(o.map((async t=>{const o=await this._provisionSymbol(t.partitionInfo?.index,i);o&&await o.add(t,i)})))}async remove(t,i){const o=t.partitions;if(!o)throw new Error(\"partitioned featureset expected\");await Promise.all(o.map((async t=>{const o=await this._provisionSymbol(t.partitionInfo?.index,i);o&&await o.remove(t,i)})))}async _provisionFeatureData(t,o){await t.provision([i.PARTITION_ID,i.OBJECT_ID],o)}async _provisionSymbol(t,i){if(null==t)return null;const o=this._symbols.get(t);return o?(o.loaded||await o.load(i),o):null}_partition(i){const{numFeatures:o,objectIds:a,partitionIds:s}=i,e=[[],[]];for(let t=0;t<o;++t){const i=a[t]%2;e[i].push(t),s[t]=i}return i.partitions=e.filter((t=>t.length>0)).map(((o,a)=>{const s=o.length,e={index:a,tileIndices:new Uint32Array(o)};return new t(i.tile,s,e)})),i.partitions}}export{s as UniqueValueFeatureRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{initializeProjection as e}from\"../projection.js\";import{projectVectorToVector as o}from\"./projectVectorToVector.js\";function t(r,e,t){return!!o(r,e,i,t.spatialReference)&&(t.x=i[0],t.y=i[1],t.z=i[2],!0)}async function c(r,o,c,i){return await e(o,c.spatialReference,null,i),t(r,o,c)}const i=r();export{t as projectVectorToPoint,c as projectVectorToPointAsync};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{i as e,f as n,c as o,n as r,e as i}from\"../../chunks/vec32.js\";import{create as u}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as a}from\"../ellipsoidUtils.js\";import s from\"../SpatialReference.js\";import{getSphericalPCPF as c}from\"../spatialReferenceEllipsoidUtils.js\";import{Axis as l}from\"./Axis.js\";import{f,b as p}from\"../../chunks/boundedPlane.js\";import{f as m,s as v}from\"../../chunks/sphere.js\";function h(t){const{value:e,operations:n}=t;return{operations:n,value:n.create(e)}}function j(t,e,n){return t.operations.setExtent(t.value,e,n.value),n}function d(t,e){return t.operations.getExtent(t.value,e),e}function x(t){return{operations:t,value:t.create()}}function A(t,e,n=x(t)){return n.operations=t,t.copy(e,n.value),n}function b(t){return A(v,m(0,0,0,a(t).radius))}const g=2**50;function P(){return A(p,f([0,0,0],[g,0,0],[0,g,0]))}function R(t,e,n){return t.operations.axisAt(t.value,e,l.Z,n)}function S(t,e,n,o){return t.operations.axisAt(t.value,e,n,o)}function k(t,e,n){return t.operations.intersectRay(t.value,e,n)}function y(t,e,n){return t.operations.closestPoint(t.value,e,n)}function E(t,e,n){return t.operations.intersectRayClosestSilhouette(t.value,e,n)}function C(t,e,n){return t.operations.closestPointOnSilhouette(t.value,e,n)}function U(t,e){return t.operations.distanceToSilhouette(t.value,e)}function G(t,e){return t.operations.altitudeAt(t.value,e)}function O(t,e,n,o){return t.operations.setAltitudeAt(t.value,e,n,o)}function T(n,o,r,i){return o!==i&&t(i,o),e(q,i[12],i[13],i[14]),O(n,q,r,q),i[12]=q[0],i[13]=q[1],i[14]=q[2],i}function Z(t,e,n){return t.operations.elevate(t.value,e,n.value)}const q=u();function w(t,e,o,r,i){return i[0]=n(t,e),i[1]=n(t,o),i[2]=n(t,r),i}function z(t,e,n,u,a){o(n,t),o(D,e),r(D,D),i(u,D,n),i(a,u,n)}function B(t,e){return t?c(e):e.isGeographic?s.PlateCarree:e}const D=u();export{G as altitudeAt,S as axisAt,y as closestPoint,C as closestPointOnSilhouette,z as coordinateSystemFromOneAxisAndNormalVector,h as create,x as createFromOperations,b as createGlobal,P as createLocal,U as distanceToSilhouette,Z as elevate,A as fromValues,d as getExtent,k as intersectRay,E as intersectRayClosestSilhouette,R as normalAt,B as renderSRFromViewSR,O as setAltitudeAt,T as setAltitudeOfTransformation,j as setExtent,w as vectorCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t){return\"point\"===t.type}export{t as isDehydratedPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{rad2deg as t}from\"../../../core/mathUtils.js\";import{getMetersPerUnitForSR as e,getMetersPerCartesianUnitForSR as o}from\"../../../core/unitUtils.js\";import{set as r}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{c as i}from\"../../../chunks/vec32.js\";import{getReferenceEllipsoid as s}from\"../../../geometry/ellipsoidUtils.js\";import{getSphericalPCPF as n}from\"../../../geometry/spatialReferenceEllipsoidUtils.js\";import{projectPointToVector as a}from\"../../../geometry/projection/projectPointToVector.js\";import{projectVectorToPoint as m}from\"../../../geometry/projection/projectVectorToPoint.js\";import{projectVectorToVector as c}from\"../../../geometry/projection/projectVectorToVector.js\";import{create as l}from\"../../../geometry/support/aaBoundingRect.js\";import{Axis as p}from\"../../../geometry/support/Axis.js\";import{create as d,setExtent as h,getExtent as u,altitudeAt as f,setAltitudeAt as y,setAltitudeOfTransformation as g,normalAt as j,axisAt as S,elevate as _,intersectRayClosestSilhouette as w,intersectRay as A,createGlobal as P,createLocal as C}from\"../../../geometry/support/coordinateSystem.js\";import{intersectRay as R}from\"../../../geometry/support/plane.js\";import{angleAroundAxis as M}from\"../../../geometry/support/vector.js\";import{sv3d as U}from\"../../../geometry/support/vectorStacks.js\";import{isDehydratedPoint as v}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";import{ViewingMode as x}from\"../../ViewingMode.js\";class B{constructor(t,e,o,r){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=o,this._coordinateSystem=r,this._tmpCoordinateSystem=d(r),this.referenceEllipsoid=s(e),this.sphericalPCPF=n(e)}set extent(t){t&&h(this._coordinateSystem,t,this._coordinateSystem)}get extent(){return u(this._coordinateSystem,l())}getAltitude(t){return f(this._coordinateSystem,t)}setAltitude(t,e,o=t){return y(this._coordinateSystem,o,e,t)}setAltitudeOfTransformation(t,e){g(this._coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return j(this._coordinateSystem,t,e)}worldBasisAtPosition(t,e,o){return S(this._coordinateSystem,t,e,o)}basisMatrixAtPosition(t,e){const o=this.worldBasisAtPosition(t,p.X,U.get()),i=this.worldBasisAtPosition(t,p.Y,U.get()),s=this.worldBasisAtPosition(t,p.Z,U.get());return r(e,o[0],o[1],o[2],0,i[0],i[1],i[2],0,s[0],s[1],s[2],0,0,0,0,1),e}headingAtPosition(e,o){const r=this.worldUpAtPosition(e,U.get()),i=this.worldBasisAtPosition(e,p.Y,U.get()),s=M(o,i,r);return t(s)}intersectManifoldClosestSilhouette(t,e,o){return _(this._coordinateSystem,e,this._tmpCoordinateSystem),w(this._tmpCoordinateSystem,t,o),o}intersectManifold(t,e,o){_(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=U.get();return A(this._tmpCoordinateSystem,t,r)?i(o,r):null}intersectInfiniteManifold(t,e,o){if(this.viewingMode===x.Global)return this.intersectManifold(t,e,o);_(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=this._tmpCoordinateSystem.value,s=U.get();return R(r.plane,t,s)?i(o,s):null}toRenderCoords(t,e,o){return v(t)?a(t,e,this.spatialReference):c(t,e,o,this.spatialReference)}fromRenderCoords(t,e,o=null){return v(e)?(null!=o&&(e.spatialReference=o),m(t,this.spatialReference,e)?e:null):c(t,this.spatialReference,e,o)?e:null}static create(t,o){switch(t){case x.Local:return new B(x.Local,o,e(o),C());case x.Global:return new B(x.Global,o,1,P(o))}}static renderUnitScaleFactor(t,e){return o(t)/o(e)}}export{B as RenderCoordsHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureData as e}from\"../featureData/FeatureData.js\";import{UniqueValueFeatureRenderer as t}from\"./UniqueValueFeatureRenderer.js\";import{RenderCoordsHelper as r}from\"../../../../support/RenderCoordsHelper.js\";class a{constructor(e){this._tileFeatureData=new Map,this._context={viewSpatialReference:e.viewSpatialReference,renderSpatialReference:e.renderSpatialReference,renderCoordsHelper:r.create(e.viewingMode,e.renderSpatialReference)}}async add(e,r){this._featureRenderer||(this._featureRenderer=new t(this._context),await this._featureRenderer.load());const a=this._addTileFeatureData(e);await this._featureRenderer.add(a,r)}async remove(e,t){const r=this._getFeatureSetFromTileId(e);r&&(this._featureRenderer&&this._featureRenderer.remove(r,t),this._removeTileFeatureData(e))}_getFeatureSetFromTileId(e){return this._tileFeatureData.get(e)}_addTileFeatureData(t){const r=t.descriptor.id,a=t.pages.reduce(((e,{featureCount:t})=>e+t),0),i=new e(t,a);return this._tileFeatureData.set(r,i),i}_removeTileFeatureData(e){const t=this._tileFeatureData.get(e);t&&(t.dispose(),this._tileFeatureData.delete(e))}}export{a as Symbolizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import{throwIfAborted as r}from\"../../../../../core/promiseUtils.js\";import{watch as i,initial as s}from\"../../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../../geometry/SpatialReference.js\";import{QueryEngine as u}from\"../../../../../layers/graphics/data/QueryEngine.js\";import l from\"../../../../../rest/support/Query.js\";import{Tile3DManager as c}from\"./Tile3DManager.js\";import{TiledFeatureStore as d}from\"./featureSet/TiledFeatureStore.js\";import{Tile3DFetcher as m}from\"./fetching/Tile3DFetcher.js\";import{RenderCommandContext as h}from\"./rendering/RenderCommandContext.js\";import{Symbolizer as y}from\"./symbolization/Symbolizer.js\";let p=class extends t.EventedAccessor{constructor(){super(...arguments),this.remoteClient=null,this._featureStore=new d,this._tileManager=new c({addTile:(e,t)=>this._addTile(e,t),removeTiles:e=>this._removeTiles(e)}),this._renderCommandContext=null,this._fetcher=null,this._symbolizer=null,this._queryEngine=null,this._defaultQueryJSON=null}get updating(){return this._tileManager.updating}destroy(){this._featureStore.clear(),this._tileManager.destroy()}async setup({viewSpatialReference:e,renderSpatialReference:t,viewingMode:r,baseQuery:n,url:o,objectIdField:c,capabilities:d,fieldsIndex:p,timeInfo:f}){this._renderCommandContext=new h({viewingMode:r,dispatchRenderCommandsCallback:(e,t)=>this.remoteClient.invoke(\"dispatchRenderCommands\",e,{transferList:t})});const g=a.fromJSON(e),S=a.fromJSON(t);return this._fetcher=new m(g,l.fromJSON(n),o,c,d),this._symbolizer=new y({viewSpatialReference:g,renderSpatialReference:S,viewingMode:r}),this._queryEngine=new u({hasZ:!0,hasM:!1,geometryType:\"esriGeometryPoint\",objectIdField:c,fieldsIndex:p,availableFields:[c],spatialReference:e,featureStore:this._featureStore,timeInfo:f}),this._defaultQueryJSON=new l({outSpatialReference:g}).toJSON(),this.addHandles(i((()=>this.updating),(async e=>{this.emit(\"notify-updating\",{updating:e})})),s),_}async executeQuery(e,t){return{result:await this._queryEngine.executeQuery(this._ensureQuery(e),t)}}async executeQueryForIds(e,t){const r=await this._queryEngine.executeQueryForIdSet(this._ensureQuery(e),t);return{result:Array.from(r)}}async executeQueryForCount(e,t){return{result:await this._queryEngine.executeQueryForCount(this._ensureQuery(e),t)}}async executeQueryForExtent(e,t){return{result:await this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t)}}async executeQueryForLatestObservations(e,t){return{result:await this._queryEngine.executeQueryForLatestObservations(this._ensureQuery(e),t)}}async onTileTreeChange(e){return await this._tileManager.onTileTreeChange(e),_}async _addTile(e,t){const i=await this._fetcher.fetch(e,t);r(t),this._featureStore.addTile(i);const s=this._renderCommandContext.createEncoder();return await this._symbolizer.add(i,s),await s.dispatch(),i}async _removeTiles(e){const t=this._renderCommandContext.createEncoder(),r=this._featureStore,i=this._symbolizer;for(const s of e)r.removeTile(s.tileId),await i.remove(s.tileId,t);await t.dispatch()}_ensureQuery(e){return e??this._defaultQueryJSON}};e([n()],p.prototype,\"updating\",null),p=e([o(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorker\")],p);const f=p,_={result:void 0};export{f as default};\n"],"names":["t","o","o$c","r","e","a","s","i","c","o$b","n","d$4","h","d","a$9","g","m","u","f","p","l","x","b","I","w","_","k","j","c$9","n$8","u$4","o$9","t$a","i$6","E","t$9","i$5","t$8","s$8","v","y","W","D","z","H","S","A","V","G","O","B","R","M","N","D$2","C","L","T","P","$","tt","X","U","Z","J","K","Q","st","ot","Y","et","F","nt","rt","q","it","r$5","f$4","R$4","n$5","e$2","e$1","o$6","s$7","d$3","a$5","n$4","o$3","c$6","has","t$4","c$3","HUDMaterial_glsl","r$1","ae","ye","re","Te","le","se","pe","Ae","me","ce","_e","he","ue","xe","Re","fe","ge","ve","Ce","Fe","te","oe","ne","Ie","Ee","ie","be","de","Pe","Oe","Se","De","je","ee","d$1","t$2","s$2","Nt","ct"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71]}