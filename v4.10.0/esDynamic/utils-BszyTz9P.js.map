{"version":3,"file":"utils-BszyTz9P.js","sources":["../../node_modules/@arcgis/core/smartMapping/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{convertDateFormatToIntlOptions as t,formatDate as e,formatTimestamp as r,formatTimeOnly as i,formatDateOnly as n}from\"../../intl/date.js\";import{isDateField as s,isDateOnlyField as o,isTimestampOffsetField as a}from\"../../layers/support/fieldUtils.js\";import{loadArcade as c}from\"../../support/arcadeOnDemand.js\";import{getWellKnownBasemapId as l}from\"../../support/basemapUtils.js\";import{getTimeZoneFormattingOptions as g,utc as d}from\"../../time/timeZoneUtils.js\";const m=\",\",u={light:[\"streets\",\"gray\",\"topo\",\"terrain\",\"oceans\",\"osm\",\"gray-vector\",\"streets-vector\",\"topo-vector\",\"streets-relief-vector\",\"streets-navigation-vector\",\"topo-3d\",\"navigation-3d\",\"streets-3d\",\"osm-3d\",\"gray-3d\",\"arcgis-light-gray\",\"arcgis-navigation\",\"arcgis-streets\",\"arcgis-streets-relief\",\"arcgis-topographic\",\"arcgis-oceans\",\"osm-standard\",\"osm-standard-relief\",\"osm-streets\",\"osm-streets-relief\",\"osm-light-gray\",\"arcgis-terrain\",\"arcgis-charted-territory\",\"arcgis-community\",\"arcgis-colored-pencil\",\"arcgis-modern-antique\",\"arcgis-midcentury\",\"arcgis-newspaper\",\"arcgis-hillshade-light\"],dark:[\"satellite\",\"hybrid\",\"dark-gray\",\"dark-gray-vector\",\"streets-night-vector\",\"navigation-dark-3d\",\"streets-dark-3d\",\"dark-gray-3d\",\"arcgis-imagery\",\"arcgis-imagery-standard\",\"arcgis-dark-gray\",\"arcgis-navigation-night\",\"arcgis-streets-night\",\"osm-dark-gray\",\"arcgis-nova\",\"arcgis-hillshade-dark\"]},f=\"percent-of-total\",p=\"field\",y={exclude:[\"median\"]},h={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864e5},v=new Set([\"integer\",\"small-integer\"]);let T=null;const Z=[\"date\",\"date-only\",\"timestamp-offset\"];function $(t){return s(t)||o(t)||a(t)}async function w(t){const{field:e,field2:r,field3:i,normalizationField:n,valueExpression:s}=t;let o=[];if(s){if(!T){const{arcadeUtils:t}=await c();T=t}o=T.extractFieldNames(s)}return e&&o.push(e),r&&o.push(r),i&&o.push(i),n&&o.push(n),o}function U(t){let e=t.normalizationType;return e||(t.normalizationField?e=p:null!=t.normalizationTotal&&(e=f)),e??void 0}function k(t){return String(t).padStart(2,\"0\")}function D(t,e,r){let i;if(\"date\"===e||\"number\"===e){\"number\"===e&&(t=new Date(t));i=`TIMESTAMP'${r?t.getFullYear():t.getUTCFullYear()}-${k((r?t.getMonth():t.getUTCMonth())+1)}-${k(r?t.getDate():t.getUTCDate())} ${k(r?t.getHours():t.getUTCHours())}:${k(r?t.getMinutes():t.getUTCMinutes())}:${k(r?t.getSeconds():t.getUTCSeconds())}'`}else i=t;return i}function S(t,e,r,i){const{hasQueryEngine:n}=t,s=`(${D(r,C(t,r),n)} - ${D(e,C(t,e),n)})`;let o=h[i],a=\"/\";o<1&&(o=1/o,a=\"*\");return{sqlExpression:1===o?s:`(${s} ${a} ${o})`,sqlWhere:null}}function C(t,e){if(e instanceof Date)return\"date\";if(\"number\"==typeof e)return\"number\";if(\"string\"==typeof e){const r=t.getField(e);if(\"<now>\"===e.toLowerCase())return;if(s(r))return\"field\"}}function F(t,e=u){for(const r in e)if(e[r].includes(t))return r}function b(t,e,r=!0){let i=null;return t&&(\"string\"==typeof t?e.includes(t)&&(i=t):i=l(t)),r?i||\"gray\":i}function M(t,e){const r=e&&t.getField(e);return!!r&&v.has(r.type)}function N(t){return`cast(${t} as float)`}function j(s,o){const{format:a,timeZoneOptions:c,fieldType:l}=o??{};let m,u;if(c&&({timeZone:m,timeZoneName:u}=g(c.layerTimeZone,c.datesInUnknownTimezone,c.viewTimeZone,t(a||\"short-date-short-time\"),l)),\"string\"==typeof s&&isNaN(Date.parse(\"time-only\"===l?`1970-01-01T${s}Z`:s)))return s;switch(l){case\"date-only\":{const r=t(a||\"short-date\");return\"string\"==typeof s?n(s,{...r}):e(s,{...r,timeZone:d})}case\"time-only\":{const r=t(a||\"short-time\");return\"string\"==typeof s?i(s,r):e(s,{...r,timeZone:d})}case\"timestamp-offset\":{if(!m&&\"string\"==typeof s&&new Date(s).toISOString()!==s)return s;const i=a||c?t(a||\"short-date-short-time\"):void 0,n=i?{...i,timeZone:m,timeZoneName:u}:void 0;return\"string\"==typeof s?r(s,n):e(s,n)}default:{const r=a||c?t(a||\"short-date-short-time\"):void 0;return e(\"string\"==typeof s?new Date(s):s,r?{...r,timeZone:m,timeZoneName:u}:void 0)}}}export{N as castIntegerFieldToFloat,Z as dateTypes,u as defaultBasemapGroups,y as defaultStatisticTypes,m as fieldDelimiter,j as formatAnyDate,F as getBasemapGroup,b as getBasemapId,S as getDateDiffSQL,C as getDateType,w as getFieldsList,U as getNormalizationType,$ as isAnyDateField,M as isIntegerField,h as unitValueInDays};\n"],"names":["$","t","s","o","a","j","c","l","m","u","g","r","n","e","d","i"],"mappings":";AAI+lD,SAASA,EAAEC,GAAE;AAAC,SAAOC,EAAED,CAAC,KAAGE,EAAEF,CAAC,KAAGG,EAAEH,CAAC;AAAC;AAAo4C,SAASI,EAAEH,GAAEC,GAAE;AAAC,QAAK,EAAC,QAAOC,GAAE,iBAAgBE,GAAE,WAAUC,EAAC,IAAEJ,KAAG;AAAG,MAAIK,GAAEC;AAAE,MAAGH,MAAI,EAAC,UAASE,GAAE,cAAaC,EAAC,IAAEC,EAAEJ,EAAE,eAAcA,EAAE,wBAAuBA,EAAE,cAAaL,EAAEG,KAAG,uBAAuB,GAAEG,CAAC,IAAa,OAAOL,KAAjB,YAAoB,MAAM,KAAK,MAAoBK,MAAd,cAAgB,cAAcL,CAAC,MAAIA,CAAC,CAAC,EAAE,QAAOA;AAAE,UAAOK;IAAG,KAAI,aAAY;AAAC,YAAMI,IAAEV,EAAEG,KAAG,YAAY;AAAE,aAAgB,OAAOF,KAAjB,WAAmBU,EAAEV,GAAE,EAAC,GAAGS,EAAC,CAAC,IAAEE,EAAEX,GAAE,EAAC,GAAGS,GAAE,UAASG,EAAC,CAAC;AAAA,IAAC;AAAA,IAAC,KAAI,aAAY;AAAC,YAAMH,IAAEV,EAAEG,KAAG,YAAY;AAAE,aAAgB,OAAOF,KAAjB,WAAmBa,EAAEb,GAAES,CAAC,IAAEE,EAAEX,GAAE,EAAC,GAAGS,GAAE,UAASG,EAAC,CAAC;AAAA,IAAC;AAAA,IAAC,KAAI,oBAAmB;AAAC,UAAG,CAACN,KAAa,OAAON,KAAjB,YAAoB,IAAI,KAAKA,CAAC,EAAE,YAAW,MAAKA,EAAE,QAAOA;AAAE,YAAMa,IAAEX,KAAGE,IAAEL,EAAEG,KAAG,uBAAuB,IAAE,QAAOQ,IAAEG,IAAE,EAAC,GAAGA,GAAE,UAASP,GAAE,cAAaC,EAAC,IAAE;AAAO,aAAgB,OAAOP,KAAjB,WAAmBS,EAAET,GAAEU,CAAC,IAAEC,EAAEX,GAAEU,CAAC;AAAA,IAAC;AAAA,IAAC,SAAQ;AAAC,YAAMD,IAAEP,KAAGE,IAAEL,EAAEG,KAAG,uBAAuB,IAAE;AAAO,aAAOS,EAAY,OAAOX,KAAjB,WAAmB,IAAI,KAAKA,CAAC,IAAEA,GAAES,IAAE,EAAC,GAAGA,GAAE,UAASH,GAAE,cAAaC,EAAC,IAAE,MAAM;AAAA,IAAC;AAAA,EAAC;AAAC;","x_google_ignoreList":[0]}