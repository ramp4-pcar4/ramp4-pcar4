import { bg as o$3, e$ as DateTime, h as has } from './main-5658cd6e.js';
import { i as i$2 } from './executionError-ed2c63c0.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
function a$1(a,n){const t=l$2[a.toLowerCase()];if(null==t)throw new Error("Function Not Recognised");if(n.length<t.minParams||n.length>t.maxParams)throw new Error(`Invalid Parameter count for call to ${a.toUpperCase()}`);return t.evaluate(n)}function n$3(a,n){const t=l$2[a.toLowerCase()];return null!=t&&n>=t.minParams&&n<=t.maxParams}const l$2={min:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.min.apply(Math,a[0])},max:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.max.apply(Math,a[0])},avg:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:t$2(a[0])},sum:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:r$1(a[0])},stddev:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sqrt(e$1(a[0]))},count:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].length},var:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:e$1(a[0])}};function t$2(a){let n=0;for(let l=0;l<a.length;l++)n+=a[l];return n/a.length}function r$1(a){let n=0;for(let l=0;l<a.length;l++)n+=a[l];return n}function e$1(a){const n=t$2(a),l=a.length;let r=0;for(const t of a)r+=(t-n)**2;return l>1?r/(l-1):0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
var t$1;!function(e){e.InvalidFunctionParameters="InvalidFunctionParameters",e.UnsupportedSqlFunction="UnsupportedSqlFunction",e.UnsupportedOperator="UnsupportedOperator",e.UnsupportedSyntax="UnsupportedSyntax",e.UnsupportedIsRhs="UnsupportedIsRhs",e.UnsupportedIsLhs="UnsupportedIsLhs",e.InvalidDataType="InvalidDataType",e.CannotCastValue="CannotCastValue",e.MissingStatisticParameters="MissingStatisticParameters";}(t$1||(t$1={}));const a={[t$1.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[t$1.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[t$1.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[t$1.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[t$1.UnsupportedOperator]:"Unsupported operator - {operator}",[t$1.UnsupportedSyntax]:"Unsupported syntax - {node}",[t$1.UnsupportedSqlFunction]:"Sql function not found = {function}",[t$1.InvalidDataType]:"Invalid sql data type",[t$1.CannotCastValue]:"Cannot cast value to the required data type"};let s$1 = class s extends Error{constructor(t,n){super(i$2(a[t],n)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,s);}};var n$2;!function(e){e.NeverReach="NeverReach",e.NotImplemented="NotImplemented",e.Cancelled="Cancelled",e.InvalidStatResponse="InvalidStatResponse",e.InvalidRequest="InvalidRequest",e.RequestFailed="RequestFailed",e.MissingFeatures="MissingFeatures",e.AggregationFieldNotFound="AggregationFieldNotFound",e.DataElementsNotFound="DataElementsNotFound";}(n$2||(n$2={}));const r={[n$2.Cancelled]:"Cancelled",[n$2.InvalidStatResponse]:"Invalid statistics response from service",[n$2.InvalidRequest]:"Invalid request",[n$2.RequestFailed]:"Request failed - {reason}",[n$2.MissingFeatures]:"Missing features",[n$2.AggregationFieldNotFound]:"Aggregation field not found",[n$2.DataElementsNotFound]:"Data elements not found on service",[n$2.NeverReach]:"Encountered unreachable logic",[n$2.NotImplemented]:"Not implemented"};let o$2 = class o extends Error{constructor(t,a){super(i$2(r[t],a)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,o);}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
let n$1 = class n{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0;}static _fixDefaults(a){if(null!==a.precision||null!==a.secondary)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static _parseSecondsComponent(a,e){if(e.includes(".")){const t=e.split(".");a.second=parseFloat(t[0]),a.millis=parseInt(t[1],10);}else a.second=parseFloat(e);}static createFromMilliseconds(a){const e=new n;return e.second=a/1e3,e}static createFromValueAndQualifer(a,e,t){let r=null;const l=new n;if(l.op="-"===t?"-":"+","interval-period"===e.type){n._fixDefaults(e);const t=new RegExp("^[0-9]{1,}$");if("year"===e.period||"month"===e.period)throw new Error("Year-Month Intervals not supported");if("second"===e.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(a))throw new Error("Illegal Interval");n._parseSecondsComponent(l,a);}else {if(!t.test(a))throw new Error("Illegal Interval");l[e.period]=parseFloat(a);}}else {if(n._fixDefaults(e.start),n._fixDefaults(e.end),"year"===e.start.period||"month"===e.start.period)throw new Error("Year-Month Intervals not supported");if("year"===e.end.period||"month"===e.end.period)throw new Error("Year-Month Intervals not supported");switch(e.start.period){case"day":switch(e.end.period){case"hour":if(r=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!r.test(a))throw new Error("Illegal Interval");l[e.start.period]=parseFloat(a.split(" ")[0]),l[e.end.period]=parseFloat(a.split(" ")[1]);break;case"minute":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!r.test(a))throw new Error("Illegal Interval");{l[e.start.period]=parseFloat(a.split(" ")[0]);const t=a.split(" ")[1].split(":");l.hour=parseFloat(t[0]),l.minute=parseFloat(t[1]);}break;case"second":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(a))throw new Error("Illegal Interval");{l[e.start.period]=parseFloat(a.split(" ")[0]);const t=a.split(" ")[1].split(":");l.hour=parseFloat(t[0]),l.minute=parseFloat(t[1]),n._parseSecondsComponent(l,t[2]);}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(e.end.period){case"minute":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!r.test(a))throw new Error("Illegal Interval");l.hour=parseFloat(a.split(":")[0]),l.minute=parseFloat(a.split(":")[1]);break;case"second":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(a))throw new Error("Illegal Interval");{const e=a.split(":");l.hour=parseFloat(e[0]),l.minute=parseFloat(e[1]),n._parseSecondsComponent(l,e[2]);}break;default:throw new Error("Invalid Interval.")}break;case"minute":if("second"!==e.end.period)throw new Error("Invalid Interval.");if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(a))throw new Error("Illegal Interval");{const e=a.split(":");l.minute=parseFloat(e[0]),n._parseSecondsComponent(l,e[1]);}break;default:throw new Error("Invalid Interval.")}}return l}valueInMilliseconds(){return ("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};function l$1(a,e){const t=c$1[a.toLowerCase()];if(null==t)throw new Error("Function Not Recognised");if(e.length<t.minParams||e.length>t.maxParams)throw new Error(`Invalid Parameter count for call to ${a.toUpperCase()}`);return t.evaluate(e)}function s(a,e){const t=c$1[a.toLowerCase()];return null!=t&&e>=t.minParams&&e<=t.maxParams}function o$1(a){return "string"==typeof a||a instanceof String}function i$1(a){return a instanceof Date}function u$2(a){const e=new Date(a.getTime());return e.setHours(0,0,0,0),e}function m$1(t,n){if(i$1(t))return n?u$2(t):t;if(o$1(t)){const a=DateTime.fromSQL(t);if(a.isValid)return n?u$2(a.toJSDate()):a.toJSDate()}throw new s$1(t$1.CannotCastValue)}const c$1={extract:{minParams:2,maxParams:2,evaluate:([a,e])=>{if(null==e)return null;if(e instanceof Date)switch(a.toUpperCase()){case"SECOND":return e.getSeconds();case"MINUTE":return e.getMinutes();case"HOUR":return e.getHours();case"DAY":return e.getDate();case"MONTH":return e.getMonth()+1;case"YEAR":return e.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const[e,t]=a;return null==e||null==t?null:e.toString().substring(t-1)}if(3===a.length){const[e,t,r]=a;return null==e||null==t||null==r?null:r<=0?"":e.toString().substring(t-1,t+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([a,e])=>null==a||null==e?null:e.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{const e=3===a.length,r=e?a[1]:" ",n=e?a[2]:a[1];if(null==r||null==n)return null;const l=`(${o$3(r)})`;switch(a[0]){case"BOTH":return n.replace(new RegExp(`^${l}*|${l}*$`,"g"),"");case"LEADING":return n.replace(new RegExp(`^${l}*`,"g"),"");case"TRAILING":return n.replace(new RegExp(`${l}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0]>0?1:a[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const e=a[0],t=2===a.length?10**a[1]:1;return null==e?null:Math.round(e*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>"string"==typeof a[0]||a[0]instanceof String?a[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:a=>{let e="";for(let t=0;t<a.length;t++){if(null==a[t])return null;e+=a[t].toString();}return e}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:a=>{for(const e of a)if(null!==e)return e;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:a=>{const e=a[0],t=a[1];return (e instanceof Date?e.valueOf():e)===(t instanceof Date?t.valueOf():t)?null:e}},cast:{minParams:2,maxParams:2,evaluate:t=>{const r=t[0],n=t[1];if(null===r)return null;switch(n.type){case"integer":{const t=parseInt(r,10);if(isNaN(t))throw new s$1(t$1.CannotCastValue);return t}case"smallint":{const t=parseInt(r,10);if(isNaN(t))throw new s$1(t$1.CannotCastValue);if(t>32767||t<-32767)throw new s$1(t$1.CannotCastValue);return t}case"float":case"real":{const t=parseFloat(r);if(isNaN(t))throw new s$1(t$1.CannotCastValue);return t}case"date":return m$1(r,!0);case"timestamp":return m$1(r,!1);case"varchar":{const t=r.toString();if(t.length>n.size)throw new s$1(t$1.CannotCastValue);return t}default:throw new s$1(t$1.InvalidDataType)}}}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
var t,n,e={};n=function(){function r(r,t){function n(){this.constructor=r;}n.prototype=t.prototype,r.prototype=new n;}function t(r,n,e,u){var o=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(o,t.prototype),o.expected=n,o.found=e,o.location=u,o.name="SyntaxError",o}function n(r,t,n){return n=n||" ",r.length>t?r:(t-=r.length,r+(n+=n.repeat(t)).slice(0,t))}function e(r,n){var e,u={},o=(n=void 0!==n?n:{}).grammarSource,i={start:Eu},a=Eu,s="!",c="=",f=">=",l=">",p="<=",v="<>",d="<",h="!=",y="+",b="-",A="||",C="*",g="/",m="@",L="'",E="N'",T="''",w=".",x="null",N="true",R="false",O="in",I="is",S="like",F="escape",M="not",H="and",D="or",j="between",U="from",P="for",_="substring",B="extract",G="trim",z="position",Z="timestamp",V="date",W="leading",Y="trailing",k="both",q="cast",K="as",X="integer",$="smallint",J="float",Q="real",rr="varchar",tr="to",nr="interval",er="year",ur="month",or="day",ir="hour",ar="minute",sr="second",cr="case",fr="end",lr="when",pr="then",vr="else",dr=",",hr="(",yr=")",br="`",Ar=/^[A-Za-z_\x80-\uFFFF]/,Cr=/^[A-Za-z0-9_]/,gr=/^[A-Za-z0-9_.\x80-\uFFFF]/,mr=/^[^']/,Lr=/^[0-9]/,Er=/^[eE]/,Tr=/^[+\-]/,wr=/^[ \t\n\r]/,xr=/^[^`]/,Nr=yu("!",!1),Rr=yu("=",!1),Or=yu(">=",!1),Ir=yu(">",!1),Sr=yu("<=",!1),Fr=yu("<>",!1),Mr=yu("<",!1),Hr=yu("!=",!1),Dr=yu("+",!1),jr=yu("-",!1),Ur=yu("||",!1),Pr=yu("*",!1),_r=yu("/",!1),Br=bu([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),Gr=bu([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),zr=bu([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Zr=yu("@",!1),Vr=yu("'",!1),Wr=yu("N'",!1),Yr=yu("''",!1),kr=bu(["'"],!0,!1),qr=yu(".",!1),Kr=bu([["0","9"]],!1,!1),Xr=bu(["e","E"],!1,!1),$r=bu(["+","-"],!1,!1),Jr=yu("NULL",!0),Qr=yu("TRUE",!0),rt=yu("FALSE",!0),tt=yu("IN",!0),nt=yu("IS",!0),et=yu("LIKE",!0),ut=yu("ESCAPE",!0),ot=yu("NOT",!0),it=yu("AND",!0),at=yu("OR",!0),st=yu("BETWEEN",!0),ct=yu("FROM",!0),ft=yu("FOR",!0),lt=yu("SUBSTRING",!0),pt=yu("EXTRACT",!0),vt=yu("TRIM",!0),dt=yu("POSITION",!0),ht=yu("TIMESTAMP",!0),yt=yu("DATE",!0),bt=yu("LEADING",!0),At=yu("TRAILING",!0),Ct=yu("BOTH",!0),gt=yu("CAST",!0),mt=yu("AS",!0),Lt=yu("INTEGER",!0),Et=yu("SMALLINT",!0),Tt=yu("FLOAT",!0),wt=yu("REAL",!0),xt=yu("VARCHAR",!0),Nt=yu("TO",!0),Rt=yu("INTERVAL",!0),Ot=yu("YEAR",!0),It=yu("MONTH",!0),St=yu("DAY",!0),Ft=yu("HOUR",!0),Mt=yu("MINUTE",!0),Ht=yu("SECOND",!0),Dt=yu("CASE",!0),jt=yu("END",!0),Ut=yu("WHEN",!0),Pt=yu("THEN",!0),_t=yu("ELSE",!0),Bt=yu(",",!1),Gt=yu("(",!1),zt=yu(")",!1),Zt=bu([" ","\t","\n","\r"],!1,!1),Vt=yu("`",!1),Wt=bu(["`"],!0,!1),Yt=function(r){return r},kt=function(r,t){var n={type:"expression-list"},e=Mi(r,t);return n.value=e,n},qt=function(r,t){return Hi(r,t)},Kt=function(r,t){return Hi(r,t)},Xt=function(r){return Ii("NOT",r)},$t=function(r,t){return ""==t||null==t||null==t?r:"arithmetic"==t.type?Hi(r,t.tail):Si(t.op,r,t.right,t.escape)},Jt=function(r){return {type:"arithmetic",tail:r}},Qt=function(r,t){return {op:r+"NOT",right:t}},rn=function(r,t){return {op:r,right:t}},tn=function(r,t,n){return {op:"NOT"+r,right:{type:"expression-list",value:[t,n]}}},nn=function(r,t,n){return {op:r,right:{type:"expression-list",value:[t,n]}}},en=function(r){return r[0]+" "+r[2]},un=function(r){return r[0]+" "+r[2]},on=function(r,t,n){return {op:r,right:t,escape:n.value}},an=function(r,t){return {op:r,right:t,escape:""}},sn=function(r,t){return {op:r,right:t}},cn=function(r){return {op:r,right:{type:"expression-list",value:[]}}},fn=function(r,t){return {op:r,right:t}},ln=function(r,t){return Hi(r,t)},pn=function(r,t){return Hi(r,t)},vn=function(r){return r.paren=!0,r},dn=function(r){return /^CURRENT_DATE$/i.test(r)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(r)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:r}},hn=function(r){return r},yn=function(r,t){return r+t.join("")},bn=function(r,t){return r+t.join("")},An=function(r){return {type:"parameter",value:r[1]}},Cn=function(r,t){return {type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:r},t]}}},gn=function(r,t,n){return {type:"function",name:"substring",args:{type:"expression-list",value:n?[r,t,n[2]]:[r,t]}}},mn=function(r,t){return {type:"function",name:"cast",args:{type:"expression-list",value:[r,t]}}},Ln=function(){return {type:"data-type",value:{type:"integer"}}},En=function(){return {type:"data-type",value:{type:"smallint"}}},Tn=function(){return {type:"data-type",value:{type:"float"}}},wn=function(){return {type:"data-type",value:{type:"real"}}},xn=function(){return {type:"data-type",value:{type:"date"}}},Nn=function(){return {type:"data-type",value:{type:"timestamp"}}},Rn=function(r){return {type:"data-type",value:{type:"varchar",size:parseInt(r)}}},On=function(r,t,n){return {type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:r??"BOTH"},t,n]}}},In=function(r,t){return {type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:r??"BOTH"},t]}}},Sn=function(r,t){return {type:"function",name:"position",args:{type:"expression-list",value:[r,t]}}},Fn=function(r,t){return {type:"function",name:r,args:t||{type:"expression-list",value:[]}}},Mn=function(r){return {type:"timestamp",value:r.value}},Hn=function(r,t,n){return {type:"interval",value:t,qualifier:n,op:r}},Dn=function(r,t){return {type:"interval",value:r,qualifier:t,op:""}},jn=function(r,t){return {type:"interval-qualifier",start:r,end:t}},Un=function(r,t){return {type:"interval-period",period:r.value,precision:t,secondary:null}},Pn=function(r){return {type:"interval-period",period:r.value,precision:null,secondary:null}},_n=function(r){return {type:"interval-period",period:r.value,precision:null,secondary:null}},Bn=function(r,t){return {type:"interval-period",period:"second",precision:r,secondary:t}},Gn=function(r){return {type:"interval-period",period:"second",precision:r,secondary:null}},zn=function(){return {type:"interval-period",period:"second",precision:null,secondary:null}},Zn=function(r,t){return {type:"interval-period",period:r.value,precision:t,secondary:null}},Vn=function(r){return {type:"interval-period",period:r.value,precision:null,secondary:null}},Wn=function(r,t){return {type:"interval-period",period:"second",precision:r,secondary:t}},Yn=function(r){return {type:"interval-period",period:"second",precision:r,secondary:null}},kn=function(){return {type:"interval-period",period:"second",precision:null,secondary:null}},qn=function(){return {type:"string",value:"day"}},Kn=function(){return {type:"string",value:"hour"}},Xn=function(){return {type:"string",value:"minute"}},$n=function(){return {type:"string",value:"month"}},Jn=function(){return {type:"string",value:"year"}},Qn=function(r){return parseFloat(r)},re=function(r){return parseFloat(r)},te=function(r){return {type:"date",value:r.value}},ne=function(){return {type:"null",value:null}},ee=function(){return {type:"boolean",value:!0}},ue=function(){return {type:"boolean",value:!1}},oe=function(){return "'"},ie=function(r){return {type:"string",value:r.join("")}},ae=function(r,t){return {type:"case-expression",format:"simple",operand:r,clauses:t,else:null}},se=function(r,t,n){return {type:"case-expression",format:"simple",operand:r,clauses:t,else:n.value}},ce=function(r){return {type:"case-expression",format:"searched",clauses:r,else:null}},fe=function(r,t){return {type:"case-expression",format:"searched",clauses:r,else:t.value}},le=function(r,t){return {type:"when-clause",operand:r,value:t}},pe=function(r,t){return {type:"when-clause",operand:r,value:t}},ve=function(r){return {type:"else-clause",value:r}},de=function(r){return {type:"number",value:r}},he=function(r,t,n){return parseFloat(r+t+n)},ye=function(r,t){return parseFloat(r+t)},be=function(r,t){return parseFloat(r+t)},Ae=function(r){return parseFloat(r)},Ce=function(r,t){return r[0]+t},ge=function(r){return "."+(null!=r?r:"")},me=function(r,t){return r+t},Le=function(r){return r.join("")},Ee=function(r,t){return "e"+(null===t?"":t)},Te=function(){return "IN"},we=function(){return "IS"},xe=function(){return "LIKE"},Ne=function(){return "ESCAPE"},Re=function(){return "NOT"},Oe=function(){return "AND"},Ie=function(){return "OR"},Se=function(){return "BETWEEN"},Fe=function(){return "FROM"},Me=function(){return "FOR"},He=function(){return "SUBSTRING"},De=function(){return "EXTRACT"},je=function(){return "TRIM"},Ue=function(){return "POSITION"},Pe=function(){return "TIMESTAMP"},_e=function(){return "DATE"},Be=function(){return "LEADING"},Ge=function(){return "TRAILING"},ze=function(){return "BOTH"},Ze=function(){return "CAST"},Ve=function(){return "AS"},We=function(){return "INTEGER"},Ye=function(){return "SMALLINT"},ke=function(){return "FLOAT"},qe=function(){return "REAL"},Ke=function(){return "VARCHAR"},Xe=function(){return "TO"},$e=function(){return "INTERVAL"},Je=function(){return "YEAR"},Qe=function(){return "MONTH"},ru=function(){return "DAY"},tu=function(){return "HOUR"},nu=function(){return "MINUTE"},eu=function(){return "SECOND"},uu=function(){return "CASE"},ou=function(){return "END"},iu=function(){return "WHEN"},au=function(){return "THEN"},su=function(){return "ELSE"},cu=function(r){return r},fu=function(r){return r.join("")},lu=0,pu=[{line:1,column:1}],vu=0,du=[],hu=0;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');a=i[n.startRule];}function yu(r,t){return {type:"literal",text:r,ignoreCase:t}}function bu(r,t,n){return {type:"class",parts:r,inverted:t,ignoreCase:n}}function Au(){return {type:"end"}}function Cu(t){var n,e=pu[t];if(e)return e;for(n=t-1;!pu[n];)n--;for(e={line:(e=pu[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return pu[t]=e,e}function gu(r,t){var n=Cu(r),e=Cu(t);return {source:o,start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function mu(r){lu<vu||(lu>vu&&(vu=lu,du=[]),du.push(r));}function Lu(r,n,e){return new t(t.buildMessage(r,n),r,n,e)}function Eu(){var r,t;return r=lu,Ni(),(t=wu())!==u?(Ni(),r=Yt(t)):(lu=r,r=u),r}function Tu(){var r,t,n,e,o,i,a,s;if(r=lu,(t=wu())!==u){for(n=[],e=lu,o=Ni(),(i=Ti())!==u?(a=Ni(),(s=wu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);e!==u;)n.push(e),e=lu,o=Ni(),(i=Ti())!==u?(a=Ni(),(s=wu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);r=kt(t,n);}else lu=r,r=u;return r}function wu(){var r,t,n,e,o,i,a,s;if(r=lu,(t=xu())!==u){for(n=[],e=lu,o=Ni(),(i=Wo())!==u?(a=Ni(),(s=xu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);e!==u;)n.push(e),e=lu,o=Ni(),(i=Wo())!==u?(a=Ni(),(s=xu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);r=qt(t,n);}else lu=r,r=u;return r}function xu(){var r,t,n,e,o,i,a,s;if(r=lu,(t=Nu())!==u){for(n=[],e=lu,o=Ni(),(i=Vo())!==u?(a=Ni(),(s=Nu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);e!==u;)n.push(e),e=lu,o=Ni(),(i=Vo())!==u?(a=Ni(),(s=Nu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);r=Kt(t,n);}else lu=r,r=u;return r}function Nu(){var t,n,e,o,i;return t=lu,(n=Zo())===u&&(n=lu,33===r.charCodeAt(lu)?(e=s,lu++):(e=u,0===hu&&mu(Nr)),e!==u?(o=lu,hu++,61===r.charCodeAt(lu)?(i=c,lu++):(i=u,0===hu&&mu(Rr)),hu--,i===u?o=void 0:(lu=o,o=u),o!==u?n=e=[e,o]:(lu=n,n=u)):(lu=n,n=u)),n!==u?(e=Ni(),(o=Nu())!==u?t=Xt(o):(lu=t,t=u)):(lu=t,t=u),t===u&&(t=Ru()),t}function Ru(){var r,t,n;return r=lu,(t=Pu())!==u?(Ni(),(n=Ou())===u&&(n=null),r=$t(t,n)):(lu=r,r=u),r}function Ou(){var r;return (r=Iu())===u&&(r=Uu())===u&&(r=Mu())===u&&(r=Fu())===u&&(r=ju()),r}function Iu(){var r,t,n,e,o,i;if(r=[],t=lu,n=Ni(),(e=Su())!==u?(o=Ni(),(i=Pu())!==u?t=n=[n,e,o,i]:(lu=t,t=u)):(lu=t,t=u),t!==u)for(;t!==u;)r.push(t),t=lu,n=Ni(),(e=Su())!==u?(o=Ni(),(i=Pu())!==u?t=n=[n,e,o,i]:(lu=t,t=u)):(lu=t,t=u);else r=u;return r!==u&&(r=Jt(r)),r}function Su(){var t;return r.substr(lu,2)===f?(t=f,lu+=2):(t=u,0===hu&&mu(Or)),t===u&&(62===r.charCodeAt(lu)?(t=l,lu++):(t=u,0===hu&&mu(Ir)),t===u&&(r.substr(lu,2)===p?(t=p,lu+=2):(t=u,0===hu&&mu(Sr)),t===u&&(r.substr(lu,2)===v?(t=v,lu+=2):(t=u,0===hu&&mu(Fr)),t===u&&(60===r.charCodeAt(lu)?(t=d,lu++):(t=u,0===hu&&mu(Mr)),t===u&&(61===r.charCodeAt(lu)?(t=c,lu++):(t=u,0===hu&&mu(Rr)),t===u&&(r.substr(lu,2)===h?(t=h,lu+=2):(t=u,0===hu&&mu(Hr)))))))),t}function Fu(){var r,t,n,e;return r=lu,(t=Bo())!==u?(Ni(),(n=Zo())!==u?(Ni(),(e=Pu())!==u?r=Qt(t,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Bo())!==u?(Ni(),(n=Pu())!==u?r=rn(t,n):(lu=r,r=u)):(lu=r,r=u)),r}function Mu(){var r,t,n,e,o,i;return r=lu,(t=Zo())!==u?(Ni(),(n=Yo())!==u?(Ni(),(e=Pu())!==u?(Ni(),(o=Vo())!==u?(Ni(),(i=Pu())!==u?r=tn(n,e,i):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Yo())!==u?(Ni(),(n=Pu())!==u?(Ni(),(e=Vo())!==u?(Ni(),(o=Pu())!==u?r=nn(t,n,o):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)),r}function Hu(){var r,t,n,e,o;return r=lu,t=lu,(n=Zo())!==u?(e=Ni(),(o=Go())!==u?t=n=[n,e,o]:(lu=t,t=u)):(lu=t,t=u),t!==u&&(t=en(t)),(r=t)===u&&(r=Go()),r}function Du(){var r,t,n,e,o;return r=lu,t=lu,(n=Zo())!==u?(e=Ni(),(o=_o())!==u?t=n=[n,e,o]:(lu=t,t=u)):(lu=t,t=u),t!==u&&(t=un(t)),(r=t)===u&&(r=_o()),r}function ju(){var r,t,n,e;return r=lu,(t=Hu())!==u?(Ni(),(n=go())!==u?(Ni(),zo()!==u?(Ni(),(e=mo())!==u?r=on(t,n,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Hu())!==u?(Ni(),(n=go())!==u?r=an(t,n):(lu=r,r=u)):(lu=r,r=u)),r}function Uu(){var r,t,n,e;return r=lu,(t=Du())!==u?(Ni(),(n=wi())!==u?(Ni(),(e=Tu())!==u?(Ni(),xi()!==u?r=sn(t,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Du())!==u?(Ni(),(n=wi())!==u?(Ni(),(e=xi())!==u?r=cn(t):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Du())!==u?(Ni(),(n=Xu())!==u?r=fn(t,n):(lu=r,r=u)):(lu=r,r=u))),r}function Pu(){var r,t,n,e,o,i,a,s;if(r=lu,(t=Bu())!==u){for(n=[],e=lu,o=Ni(),(i=_u())!==u?(a=Ni(),(s=Bu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);e!==u;)n.push(e),e=lu,o=Ni(),(i=_u())!==u?(a=Ni(),(s=Bu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);r=ln(t,n);}else lu=r,r=u;return r}function _u(){var t;return 43===r.charCodeAt(lu)?(t=y,lu++):(t=u,0===hu&&mu(Dr)),t===u&&(45===r.charCodeAt(lu)?(t=b,lu++):(t=u,0===hu&&mu(jr)),t===u&&(r.substr(lu,2)===A?(t=A,lu+=2):(t=u,0===hu&&mu(Ur)))),t}function Bu(){var r,t,n,e,o,i,a,s;if(r=lu,(t=zu())!==u){for(n=[],e=lu,o=Ni(),(i=Gu())!==u?(a=Ni(),(s=zu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);e!==u;)n.push(e),e=lu,o=Ni(),(i=Gu())!==u?(a=Ni(),(s=zu())!==u?e=o=[o,i,a,s]:(lu=e,e=u)):(lu=e,e=u);r=pn(t,n);}else lu=r,r=u;return r}function Gu(){var t;return 42===r.charCodeAt(lu)?(t=C,lu++):(t=u,0===hu&&mu(Pr)),t===u&&(47===r.charCodeAt(lu)?(t=g,lu++):(t=u,0===hu&&mu(_r))),t}function zu(){var r,t;return (r=io())===u&&(r=$u())===u&&(r=Ju())===u&&(r=to())===u&&(r=eo())===u&&(r=Qu())===u&&(r=uo())===u&&(r=Lo())===u&&(r=Zu())===u&&(r=Xu())===u&&(r=lu,wi()!==u?(Ni(),(t=wu())!==u?(Ni(),xi()!==u?r=vn(t):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)),r}function Zu(){var r;return (r=Vu())!==u&&(r=dn(r)),r}function Vu(){var r;return (r=Wu())!==u&&(r=hn(r)),r}function Wu(){var r,t,n,e;if(r=lu,(t=ku())!==u){for(n=[],e=Ku();e!==u;)n.push(e),e=Ku();r=yn(t,n);}else lu=r,r=u;return r}function Yu(){var r,t,n,e;if(r=lu,(t=ku())!==u){for(n=[],e=qu();e!==u;)n.push(e),e=qu();r=bn(t,n);}else lu=r,r=u;return r}function ku(){var t;return Ar.test(r.charAt(lu))?(t=r.charAt(lu),lu++):(t=u,0===hu&&mu(Br)),t}function qu(){var t;return Cr.test(r.charAt(lu))?(t=r.charAt(lu),lu++):(t=u,0===hu&&mu(Gr)),t}function Ku(){var t;return gr.test(r.charAt(lu))?(t=r.charAt(lu),lu++):(t=u,0===hu&&mu(zr)),t}function Xu(){var t,n,e;return t=lu,64===r.charCodeAt(lu)?(n=m,lu++):(n=u,0===hu&&mu(Zr)),n!==u&&(e=Yu())!==u?t=n=[n,e]:(lu=t,t=u),t!==u&&(t=An(t)),t}function $u(){var r,t,n;return r=lu,Xo()!==u?(Ni(),wi()!==u?(Ni(),(t=oo())!==u?(Ni(),ko()!==u?(Ni(),(n=wu())!==u?(Ni(),xi()!==u?r=Cn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function Ju(){var r,t,n,e,o,i,a;return r=lu,Ko()!==u?(Ni(),wi()!==u?(Ni(),(t=wu())!==u?(Ni(),ko()!==u?(Ni(),(n=wu())!==u?(Ni(),e=lu,(o=qo())!==u?(i=Ni(),(a=wu())!==u?e=o=[o,i,a,Ni()]:(lu=e,e=u)):(lu=e,e=u),e===u&&(e=null),(o=xi())!==u?r=gn(t,n,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function Qu(){var r,t,n;return r=lu,ui()!==u?(Ni(),wi()!==u?(Ni(),(t=wu())!==u?(Ni(),oi()!==u?(Ni(),(n=ro())!==u?(Ni(),xi()!==u?r=mn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function ro(){var r,t,n;return r=lu,(t=ii())!==u&&(t=Ln()),(r=t)===u&&(r=lu,(t=ai())!==u&&(t=En()),(r=t)===u&&(r=lu,(t=si())!==u&&(t=Tn()),(r=t)===u&&(r=lu,(t=ci())!==u&&(t=wn()),(r=t)===u&&(r=lu,(t=ri())!==u&&(t=xn()),(r=t)===u&&(r=lu,(t=Qo())!==u&&(t=Nn()),(r=t)===u&&(r=lu,(t=fi())!==u?(Ni(),wi()!==u?(Ni(),(n=Mo())!==u?(Ni(),xi()!==u?r=Rn(n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u))))))),r}function to(){var r,t,n,e;return r=lu,$o()!==u?(Ni(),wi()!==u?(Ni(),(t=no())===u&&(t=null),Ni(),(n=wu())!==u?(Ni(),ko()!==u?(Ni(),(e=wu())!==u?(Ni(),xi()!==u?r=On(t,n,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,$o()!==u?(Ni(),wi()!==u?(Ni(),(t=no())===u&&(t=null),Ni(),(n=wu())!==u?(Ni(),xi()!==u?r=In(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)),r}function no(){var r;return (r=ti())===u&&(r=ni())===u&&(r=ei()),r}function eo(){var r,t,n;return r=lu,Jo()!==u?(Ni(),wi()!==u?(Ni(),(t=wu())!==u?(Ni(),_o()!==u?(Ni(),(n=wu())!==u?(Ni(),xi()!==u?r=Sn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function uo(){var r,t,n;return r=lu,(t=Oi())!==u?(Ni(),wi()!==u?(Ni(),(n=Tu())===u&&(n=null),Ni(),xi()!==u?r=Fn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function oo(){var r;return (r=vi())===u&&(r=di())===u&&(r=hi())===u&&(r=yi())===u&&(r=bi())===u&&(r=Ai()),r}function io(){var r;return (r=mo())===u&&(r=Ro())===u&&(r=Co())===u&&(r=Ao())===u&&(r=bo())===u&&(r=ao())===u&&(r=so()),r}function ao(){var r,t;return r=lu,Qo()!==u?(Ni(),(t=go())!==u?r=Mn(t):(lu=r,r=u)):(lu=r,r=u),r}function so(){var t,n,e,o;return t=lu,pi()!==u?(Ni(),45===r.charCodeAt(lu)?(n=b,lu++):(n=u,0===hu&&mu(jr)),n===u&&(43===r.charCodeAt(lu)?(n=y,lu++):(n=u,0===hu&&mu(Dr))),n!==u?(Ni(),(e=go())!==u?(Ni(),(o=co())!==u?t=Hn(n,e,o):(lu=t,t=u)):(lu=t,t=u)):(lu=t,t=u)):(lu=t,t=u),t===u&&(t=lu,pi()!==u?(Ni(),(n=go())!==u?(Ni(),(e=co())!==u?t=Dn(n,e):(lu=t,t=u)):(lu=t,t=u)):(lu=t,t=u)),t}function co(){var r,t,n;return r=lu,(t=fo())!==u?(Ni(),li()!==u?(Ni(),(n=lo())!==u?r=jn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=po()),r}function fo(){var r,t,n;return r=lu,(t=vo())!==u?(Ni(),wi()!==u?(Ni(),(n=yo())!==u?(Ni(),xi()!==u?r=Un(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=vo())!==u&&(t=Pn(t)),r=t),r}function lo(){var r,t,n,e;return r=lu,(t=vo())!==u&&(t=_n(t)),(r=t)===u&&(r=lu,(t=Ai())!==u?(Ni(),wi()!==u?(Ni(),(n=yo())!==u?(Ni(),Ti()!==u?(Ni(),(e=ho())!==u?(Ni(),xi()!==u?r=Bn(n,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Ai())!==u?(Ni(),wi()!==u?(Ni(),(n=yo())!==u?(Ni(),xi()!==u?r=Gn(n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Ai())!==u&&(t=zn()),r=t))),r}function po(){var r,t,n,e;return r=lu,(t=vo())!==u?(Ni(),wi()!==u?(Ni(),(n=ho())!==u?(Ni(),xi()!==u?r=Zn(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=vo())!==u&&(t=Vn(t)),(r=t)===u&&(r=lu,(t=Ai())!==u?(Ni(),wi()!==u?(Ni(),(n=yo())!==u?(Ni(),Ti()!==u?(Ni(),(e=ho())!==u?(Ni(),xi()!==u?r=Wn(n,e):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Ai())!==u?(Ni(),wi()!==u?(Ni(),(n=ho())!==u?(Ni(),xi()!==u?r=Yn(n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r===u&&(r=lu,(t=Ai())!==u&&(t=kn()),r=t)))),r}function vo(){var r,t;return r=lu,(t=hi())!==u&&(t=qn()),(r=t)===u&&(r=lu,(t=yi())!==u&&(t=Kn()),(r=t)===u&&(r=lu,(t=bi())!==u&&(t=Xn()),(r=t)===u&&(r=lu,(t=di())!==u&&(t=$n()),(r=t)===u&&(r=lu,(t=vi())!==u&&(t=Jn()),r=t)))),r}function ho(){var r;return (r=Mo())!==u&&(r=Qn(r)),r}function yo(){var r;return (r=Mo())!==u&&(r=re(r)),r}function bo(){var r,t;return r=lu,ri()!==u?(Ni(),(t=go())!==u?r=te(t):(lu=r,r=u)):(lu=r,r=u),r}function Ao(){var r;return (r=jo())!==u&&(r=ne()),r}function Co(){var r,t;return r=lu,(t=Uo())!==u&&(t=ee()),(r=t)===u&&(r=lu,(t=Po())!==u&&(t=ue()),r=t),r}function go(){var r;return (r=mo())===u&&(r=Xu()),r}function mo(){var t,n,e,o,i;if(t=lu,39===r.charCodeAt(lu)?(n=L,lu++):(n=u,0===hu&&mu(Vr)),n===u&&(r.substr(lu,2)===E?(n=E,lu+=2):(n=u,0===hu&&mu(Wr))),n!==u){for(e=[],o=lu,r.substr(lu,2)===T?(i=T,lu+=2):(i=u,0===hu&&mu(Yr)),i!==u&&(i=oe()),(o=i)===u&&(mr.test(r.charAt(lu))?(o=r.charAt(lu),lu++):(o=u,0===hu&&mu(kr)));o!==u;)e.push(o),o=lu,r.substr(lu,2)===T?(i=T,lu+=2):(i=u,0===hu&&mu(Yr)),i!==u&&(i=oe()),(o=i)===u&&(mr.test(r.charAt(lu))?(o=r.charAt(lu),lu++):(o=u,0===hu&&mu(kr)));39===r.charCodeAt(lu)?(o=L,lu++):(o=u,0===hu&&mu(Vr)),o!==u?t=ie(e):(lu=t,t=u);}else lu=t,t=u;return t}function Lo(){var r;return (r=Eo())===u&&(r=To()),r}function Eo(){var r,t,n,e,o;if(r=lu,Ci()!==u)if(Ni(),(t=wu())!==u){for(Ni(),n=[],e=xo();e!==u;)n.push(e),e=xo();e=Ni(),(o=gi())!==u?r=ae(t,n):(lu=r,r=u);}else lu=r,r=u;else lu=r,r=u;if(r===u)if(r=lu,Ci()!==u)if(Ni(),(t=wu())!==u){for(Ni(),n=[],e=xo();e!==u;)n.push(e),e=xo();e=Ni(),(o=No())!==u?(Ni(),gi()!==u?r=se(t,n,o):(lu=r,r=u)):(lu=r,r=u);}else lu=r,r=u;else lu=r,r=u;return r}function To(){var r,t,n,e;if(r=lu,Ci()!==u){for(Ni(),t=[],n=wo();n!==u;)t.push(n),n=wo();n=Ni(),(e=gi())!==u?r=ce(t):(lu=r,r=u);}else lu=r,r=u;if(r===u)if(r=lu,Ci()!==u){for(Ni(),t=[],n=wo();n!==u;)t.push(n),n=wo();n=Ni(),(e=No())!==u?(Ni(),gi()!==u?r=fe(t,e):(lu=r,r=u)):(lu=r,r=u);}else lu=r,r=u;return r}function wo(){var r,t,n;return r=lu,mi()!==u?(Ni(),(t=wu())!==u?(Ni(),Li()!==u?(Ni(),(n=wu())!==u?r=le(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function xo(){var r,t,n;return r=lu,mi()!==u?(Ni(),(t=wu())!==u?(Ni(),Li()!==u?(Ni(),(n=wu())!==u?r=pe(t,n):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u)):(lu=r,r=u),r}function No(){var r,t;return r=lu,Ei()!==u?(Ni(),(t=wu())!==u?r=ve(t):(lu=r,r=u)):(lu=r,r=u),r}function Ro(){var r,t,n,e;return r=lu,(t=Oo())!==u?(n=lu,hu++,e=ku(),hu--,e===u?n=void 0:(lu=n,n=u),n!==u?r=de(t):(lu=r,r=u)):(lu=r,r=u),r}function Oo(){var r,t,n,e;return r=lu,(t=Io())!==u&&(n=So())!==u&&(e=Fo())!==u?r=he(t,n,e):(lu=r,r=u),r===u&&(r=lu,(t=Io())!==u&&(n=So())!==u?r=ye(t,n):(lu=r,r=u),r===u&&(r=lu,(t=Io())!==u&&(n=Fo())!==u?r=be(t,n):(lu=r,r=u),r===u&&(r=lu,(t=Io())!==u&&(t=Ae(t)),r=t))),r}function Io(){var t,n,e;return (t=Mo())===u&&(t=lu,45===r.charCodeAt(lu)?(n=b,lu++):(n=u,0===hu&&mu(jr)),n===u&&(43===r.charCodeAt(lu)?(n=y,lu++):(n=u,0===hu&&mu(Dr))),n!==u&&(e=Mo())!==u?t=Ce(n,e):(lu=t,t=u)),t}function So(){var t,n,e;return t=lu,46===r.charCodeAt(lu)?(n=w,lu++):(n=u,0===hu&&mu(qr)),n!==u?((e=Mo())===u&&(e=null),t=ge(e)):(lu=t,t=u),t}function Fo(){var r,t,n;return r=lu,(t=Do())!==u&&(n=Mo())!==u?r=me(t,n):(lu=r,r=u),r}function Mo(){var r,t;if(r=[],(t=Ho())!==u)for(;t!==u;)r.push(t),t=Ho();else r=u;return r!==u&&(r=Le(r)),r}function Ho(){var t;return Lr.test(r.charAt(lu))?(t=r.charAt(lu),lu++):(t=u,0===hu&&mu(Kr)),t}function Do(){var t,n,e;return t=lu,Er.test(r.charAt(lu))?(n=r.charAt(lu),lu++):(n=u,0===hu&&mu(Xr)),n!==u?(Tr.test(r.charAt(lu))?(e=r.charAt(lu),lu++):(e=u,0===hu&&mu($r)),e===u&&(e=null),t=Ee(n,e)):(lu=t,t=u),t}function jo(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===x?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Jr)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=n=[n,e]:(lu=t,t=u)):(lu=t,t=u),t}function Uo(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===N?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Qr)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=n=[n,e]:(lu=t,t=u)):(lu=t,t=u),t}function Po(){var t,n,e,o;return t=lu,r.substr(lu,5).toLowerCase()===R?(n=r.substr(lu,5),lu+=5):(n=u,0===hu&&mu(rt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=n=[n,e]:(lu=t,t=u)):(lu=t,t=u),t}function _o(){var t,n,e,o;return t=lu,r.substr(lu,2).toLowerCase()===O?(n=r.substr(lu,2),lu+=2):(n=u,0===hu&&mu(tt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Te():(lu=t,t=u)):(lu=t,t=u),t}function Bo(){var t,n,e,o;return t=lu,r.substr(lu,2).toLowerCase()===I?(n=r.substr(lu,2),lu+=2):(n=u,0===hu&&mu(nt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=we():(lu=t,t=u)):(lu=t,t=u),t}function Go(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===S?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(et)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=xe():(lu=t,t=u)):(lu=t,t=u),t}function zo(){var t,n,e,o;return t=lu,r.substr(lu,6).toLowerCase()===F?(n=r.substr(lu,6),lu+=6):(n=u,0===hu&&mu(ut)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ne():(lu=t,t=u)):(lu=t,t=u),t}function Zo(){var t,n,e,o;return t=lu,r.substr(lu,3).toLowerCase()===M?(n=r.substr(lu,3),lu+=3):(n=u,0===hu&&mu(ot)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Re():(lu=t,t=u)):(lu=t,t=u),t}function Vo(){var t,n,e,o;return t=lu,r.substr(lu,3).toLowerCase()===H?(n=r.substr(lu,3),lu+=3):(n=u,0===hu&&mu(it)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Oe():(lu=t,t=u)):(lu=t,t=u),t}function Wo(){var t,n,e,o;return t=lu,r.substr(lu,2).toLowerCase()===D?(n=r.substr(lu,2),lu+=2):(n=u,0===hu&&mu(at)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ie():(lu=t,t=u)):(lu=t,t=u),t}function Yo(){var t,n,e,o;return t=lu,r.substr(lu,7).toLowerCase()===j?(n=r.substr(lu,7),lu+=7):(n=u,0===hu&&mu(st)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Se():(lu=t,t=u)):(lu=t,t=u),t}function ko(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===U?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(ct)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Fe():(lu=t,t=u)):(lu=t,t=u),t}function qo(){var t,n,e,o;return t=lu,r.substr(lu,3).toLowerCase()===P?(n=r.substr(lu,3),lu+=3):(n=u,0===hu&&mu(ft)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Me():(lu=t,t=u)):(lu=t,t=u),t}function Ko(){var t,n,e,o;return t=lu,r.substr(lu,9).toLowerCase()===_?(n=r.substr(lu,9),lu+=9):(n=u,0===hu&&mu(lt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=He():(lu=t,t=u)):(lu=t,t=u),t}function Xo(){var t,n,e,o;return t=lu,r.substr(lu,7).toLowerCase()===B?(n=r.substr(lu,7),lu+=7):(n=u,0===hu&&mu(pt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=De():(lu=t,t=u)):(lu=t,t=u),t}function $o(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===G?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(vt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=je():(lu=t,t=u)):(lu=t,t=u),t}function Jo(){var t,n,e,o;return t=lu,r.substr(lu,8).toLowerCase()===z?(n=r.substr(lu,8),lu+=8):(n=u,0===hu&&mu(dt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ue():(lu=t,t=u)):(lu=t,t=u),t}function Qo(){var t,n,e,o;return t=lu,r.substr(lu,9).toLowerCase()===Z?(n=r.substr(lu,9),lu+=9):(n=u,0===hu&&mu(ht)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Pe():(lu=t,t=u)):(lu=t,t=u),t}function ri(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===V?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(yt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=_e():(lu=t,t=u)):(lu=t,t=u),t}function ti(){var t,n,e,o;return t=lu,r.substr(lu,7).toLowerCase()===W?(n=r.substr(lu,7),lu+=7):(n=u,0===hu&&mu(bt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Be():(lu=t,t=u)):(lu=t,t=u),t}function ni(){var t,n,e,o;return t=lu,r.substr(lu,8).toLowerCase()===Y?(n=r.substr(lu,8),lu+=8):(n=u,0===hu&&mu(At)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ge():(lu=t,t=u)):(lu=t,t=u),t}function ei(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===k?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Ct)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=ze():(lu=t,t=u)):(lu=t,t=u),t}function ui(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===q?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(gt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ze():(lu=t,t=u)):(lu=t,t=u),t}function oi(){var t,n,e,o;return t=lu,r.substr(lu,2).toLowerCase()===K?(n=r.substr(lu,2),lu+=2):(n=u,0===hu&&mu(mt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ve():(lu=t,t=u)):(lu=t,t=u),t}function ii(){var t,n,e,o;return t=lu,r.substr(lu,7).toLowerCase()===X?(n=r.substr(lu,7),lu+=7):(n=u,0===hu&&mu(Lt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=We():(lu=t,t=u)):(lu=t,t=u),t}function ai(){var t,n,e,o;return t=lu,r.substr(lu,8).toLowerCase()===$?(n=r.substr(lu,8),lu+=8):(n=u,0===hu&&mu(Et)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ye():(lu=t,t=u)):(lu=t,t=u),t}function si(){var t,n,e,o;return t=lu,r.substr(lu,5).toLowerCase()===J?(n=r.substr(lu,5),lu+=5):(n=u,0===hu&&mu(Tt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=ke():(lu=t,t=u)):(lu=t,t=u),t}function ci(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===Q?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(wt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=qe():(lu=t,t=u)):(lu=t,t=u),t}function fi(){var t,n,e,o;return t=lu,r.substr(lu,7).toLowerCase()===rr?(n=r.substr(lu,7),lu+=7):(n=u,0===hu&&mu(xt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Ke():(lu=t,t=u)):(lu=t,t=u),t}function li(){var t,n,e,o;return t=lu,r.substr(lu,2).toLowerCase()===tr?(n=r.substr(lu,2),lu+=2):(n=u,0===hu&&mu(Nt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Xe():(lu=t,t=u)):(lu=t,t=u),t}function pi(){var t,n,e,o;return t=lu,r.substr(lu,8).toLowerCase()===nr?(n=r.substr(lu,8),lu+=8):(n=u,0===hu&&mu(Rt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=$e():(lu=t,t=u)):(lu=t,t=u),t}function vi(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===er?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Ot)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Je():(lu=t,t=u)):(lu=t,t=u),t}function di(){var t,n,e,o;return t=lu,r.substr(lu,5).toLowerCase()===ur?(n=r.substr(lu,5),lu+=5):(n=u,0===hu&&mu(It)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=Qe():(lu=t,t=u)):(lu=t,t=u),t}function hi(){var t,n,e,o;return t=lu,r.substr(lu,3).toLowerCase()===or?(n=r.substr(lu,3),lu+=3):(n=u,0===hu&&mu(St)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=ru():(lu=t,t=u)):(lu=t,t=u),t}function yi(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===ir?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Ft)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=tu():(lu=t,t=u)):(lu=t,t=u),t}function bi(){var t,n,e,o;return t=lu,r.substr(lu,6).toLowerCase()===ar?(n=r.substr(lu,6),lu+=6):(n=u,0===hu&&mu(Mt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=nu():(lu=t,t=u)):(lu=t,t=u),t}function Ai(){var t,n,e,o;return t=lu,r.substr(lu,6).toLowerCase()===sr?(n=r.substr(lu,6),lu+=6):(n=u,0===hu&&mu(Ht)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=eu():(lu=t,t=u)):(lu=t,t=u),t}function Ci(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===cr?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Dt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=uu():(lu=t,t=u)):(lu=t,t=u),t}function gi(){var t,n,e,o;return t=lu,r.substr(lu,3).toLowerCase()===fr?(n=r.substr(lu,3),lu+=3):(n=u,0===hu&&mu(jt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=ou():(lu=t,t=u)):(lu=t,t=u),t}function mi(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===lr?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Ut)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=iu():(lu=t,t=u)):(lu=t,t=u),t}function Li(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===pr?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(Pt)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=au():(lu=t,t=u)):(lu=t,t=u),t}function Ei(){var t,n,e,o;return t=lu,r.substr(lu,4).toLowerCase()===vr?(n=r.substr(lu,4),lu+=4):(n=u,0===hu&&mu(_t)),n!==u?(e=lu,hu++,o=qu(),hu--,o===u?e=void 0:(lu=e,e=u),e!==u?t=su():(lu=t,t=u)):(lu=t,t=u),t}function Ti(){var t;return 44===r.charCodeAt(lu)?(t=dr,lu++):(t=u,0===hu&&mu(Bt)),t}function wi(){var t;return 40===r.charCodeAt(lu)?(t=hr,lu++):(t=u,0===hu&&mu(Gt)),t}function xi(){var t;return 41===r.charCodeAt(lu)?(t=yr,lu++):(t=u,0===hu&&mu(zt)),t}function Ni(){var r,t;for(r=[],t=Ri();t!==u;)r.push(t),t=Ri();return r}function Ri(){var t;return wr.test(r.charAt(lu))?(t=r.charAt(lu),lu++):(t=u,0===hu&&mu(Zt)),t}function Oi(){var t,n,e,o;if(t=lu,(n=Yu())!==u&&(n=cu(n)),(t=n)===u)if(t=lu,96===r.charCodeAt(lu)?(n=br,lu++):(n=u,0===hu&&mu(Vt)),n!==u){if(e=[],xr.test(r.charAt(lu))?(o=r.charAt(lu),lu++):(o=u,0===hu&&mu(Wt)),o!==u)for(;o!==u;)e.push(o),xr.test(r.charAt(lu))?(o=r.charAt(lu),lu++):(o=u,0===hu&&mu(Wt));else e=u;e!==u?(96===r.charCodeAt(lu)?(o=br,lu++):(o=u,0===hu&&mu(Vt)),o!==u?t=fu(e):(lu=t,t=u)):(lu=t,t=u);}else lu=t,t=u;return t}function Ii(r,t){return {type:"unary-expression",operator:r,expr:t}}function Si(r,t,n,e){var u={type:"binary-expression",operator:r,left:t,right:n};return void 0!==e&&(u.escape=e),u}function Fi(r,t){for(var n=[r],e=0;e<t.length;e++)n.push(t[e][3]);return n}function Mi(r,t,n){return Fi(r,t)}function Hi(r,t){for(var n=r,e=0;e<t.length;e++)n=Si(t[e][1],n,t[e][3]);return n}if((e=a())!==u&&lu===r.length)return e;throw e!==u&&lu<r.length&&mu(Au()),Lu(du,vu<r.length?r.charAt(vu):null,vu<r.length?gu(vu,vu+1):gu(vu,vu))}return r(t,Error),t.prototype.format=function(r){var t="Error: "+this.message;if(this.location){var e,u=null;for(e=0;e<r.length;e++)if(r[e].source===this.location.source){u=r[e].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,i=this.location.source+":"+o.line+":"+o.column;if(u){var a=this.location.end,s=n("",o.line.toString().length," "),c=u[o.line-1],f=(o.line===a.line?a.column:c.length+1)-o.column||1;t+="\n --\x3e "+i+"\n"+s+" |\n"+o.line+" | "+c+"\n"+s+" | "+n("",o.column-1," ")+n("",f,"^");}else t+="\n at "+i;}return t},t.buildMessage=function(r,t){var n={literal:function(r){return '"'+u(r.text)+'"'},class:function(r){var t=r.parts.map((function(r){return Array.isArray(r)?o(r[0])+"-"+o(r[1]):o(r)}));return "["+(r.inverted?"^":"")+t.join("")+"]"},any:function(){return "any character"},end:function(){return "end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return "\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return "\\x"+e(r)}))}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return "\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return "\\x"+e(r)}))}function i(r){return n[r.type](r)}function a(r){var t,n,e=r.map(i);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n;}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}function s(r){return r?'"'+u(r)+'"':"end of input"}return "Expected "+a(r)+" but "+s(t)+" found."},{SyntaxError:t,parse:e}},(t={get exports(){return e},set exports(r){e=r;}}).exports&&(t.exports=n());let u$1 = class u{static parse(r){return e.parse(r)}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.26/esri/copyright.txt for details.
*/
const i=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,o=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,c=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,h=new Set(["current_timestamp","current_date","current_time"]);function d(e,t){return (e+="").length>=t?e:new Array(t-e.length+1).join("0")+e}function p(e,t,a="0",r="0",s="0",n="0",i="",l="0",u="0"){if("+"===i||"-"===i){const o=`${d(parseInt(e,10),4)}-${d(parseInt(t,10),2)}-${d(parseInt(a,10),2)}`;let c="";parseFloat(n)<10&&(c="0");const h=`${d(parseInt(r,10),2)}:${d(parseInt(s,10),2)}:${c+parseFloat(n).toString()}`,p=`${i}${d(parseInt(l,10),2)}:${d(parseInt(u,10),2)}`;return new Date(o+"T"+h+p)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(a,10),parseInt(r,10),parseInt(s,10),parseFloat(n))}class v{static makeBool(e){return g(e)}static featureValue(e,t,a,r){return M(e,t,a,r)}static equalsNull(e){return null===e}static applyLike(e,t,a){return D(e,t,a)}static ensureArray(e){return _(e)}static applyIn(e,t){return y(e,t)}static currentDate(){const e=new Date;return e.setHours(0,0,0,0),e}static makeSqlInterval(e,t,r){return n$1.createFromValueAndQualifer(e,t,r)}static convertInterval(e){return e instanceof n$1?e.valueInMilliseconds():e}static currentTimestamp(){return new Date}static compare(e,t,a){return E(e,t,a)}static calculate(e,t,a){return x(e,t,a)}static makeComparable(e){return b(e)}static evaluateFunction(e,t){return l$1(e,t)}static lookup(e,t){const a=t[e];return void 0===a?null:a}static between(e,t){return null==e||null==t[0]||null==t[1]?null:e>=t[0]&&e<=t[1]}static notbetween(e,t){return null==e||null==t[0]||null==t[1]?null:e<t[0]||e>t[1]}static ternaryNot(e){return T(e)}static ternaryAnd(e,t){return S(e,t)}static ternaryOr(e,t){return w(e,t)}}class f{constructor(e,t){this.fieldsIndex=t,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=u$1.parse(e);const{isStandardized:a,isAggregate:r,referencedFieldNames:s}=this._extractExpressionInfo(t);this._referencedFieldNames=s,this.isStandardized=a,this.isAggregate=r;}static create(e,t){return new f(e,t)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=O){const a={};for(const r of this.fieldNames)a[r]=e.map((e=>t.getAttribute(e,r)));return !!this._evaluateNode(this.parseTree,{attributes:a},O)}calculateValue(e,t=O){const r=this._evaluateNode(this.parseTree,e,t);return r instanceof n$1?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(e,t=O){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this._datefields):has("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this._datefields))}testFeature(e,t=O){return !!this._evaluateNode(this.parseTree,e,t)}testFeatureCompiled(e,t=O){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this._datefields):has("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this._datefields))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||h.has(e.name.toLowerCase()));}))),this._hasDateFunctions}getFunctions(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase());})),Array.from(e)}getExpressions(){const e=new Map;return this._visitAll(this.parseTree,(t=>{if("function"===t.type){const a=t.name.toLowerCase(),r=t.args.value[0];if("column-reference"===r.type){const t=r.column,s=`${a}-${t}`;e.has(s)||e.set(s,{aggregateType:a,field:t});}}})),[...e.values()]}getVariables(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase());})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",e).bind(v);}_extractExpressionInfo(t){const a=[],s$1=new Set;let n=!0,i=!0;return this._visitAll(this.parseTree,(l=>{switch(l.type){case"column-reference":{const e=t?.get(l.column);let r,n;e?r=n=e.name??"":(n=l.column,r=n.toLowerCase()),e&&e.name&&("date"===e.type||"esriFieldTypeDate"===e.type)&&(this._datefields[e.name]=1),s$1.has(r)||(s$1.add(r),a.push(n)),l.column=n;break}case"function":{const{name:t,args:a}=l,s$1=a.value.length;n&&(n=s(t,s$1)),i&&(i=n$3(t,s$1));break}}})),{referencedFieldNames:Array.from(a),isStandardized:n,isAggregate:i}}_visitAll(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":this._visitAll(e.operand,t),this._visitAll(e.value,t);break;case"case-expression":for(const a of e.clauses)this._visitAll(a,t);"simple"===e.format&&this._visitAll(e.operand,t),null!==e.else&&this._visitAll(e.else,t);break;case"expression-list":for(const a of e.value)this._visitAll(a,t);break;case"unary-expression":this._visitAll(e.expr,t);break;case"binary-expression":this._visitAll(e.left,t),this._visitAll(e.right,t);break;case"function":this._visitAll(e.args,t);}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return "this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const a="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";t="( ";for(let r=0;r<e.clauses.length;r++)t+=" ("+a+" === this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )";}else {t="( ";for(let a=0;a<e.clauses.length;a++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[a].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[a].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )";}return t}case"parameter":return "this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const a of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(a);return t+="]",t}case"unary-expression":return "this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return "this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return "this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return "this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return "(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return "this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return "this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return "this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"NOTBETWEEN":return "this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"LIKE":return "this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return "this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return "this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"*":case"-":case"+":case"/":case"||":return "this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw new Error("Not Supported Operator "+e.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"date":return "(new Date("+N(e.value).getTime().toString()+"))";case"timestamp":return "(new Date("+m(e.value).getTime().toString()+"))";case"current-time":return "date"===e.mode?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return "this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case"function":return "this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw new Error("Unsupported sql syntax "+e.type)}_evaluateNode(e,r,n){switch(e.type){case"interval":{const t=this._evaluateNode(e.value,r,n);return n$1.createFromValueAndQualifer(t,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const t=b(this._evaluateNode(e.operand,r,n));for(let a=0;a<e.clauses.length;a++)if(t===b(this._evaluateNode(e.clauses[a].operand,r,n)))return this._evaluateNode(e.clauses[a].value,r,n);if(null!==e.else)return this._evaluateNode(e.else,r,n)}else {for(let t=0;t<e.clauses.length;t++)if(g(this._evaluateNode(e.clauses[t].operand,r,n)))return this._evaluateNode(e.clauses[t].value,r,n);if(null!==e.else)return this._evaluateNode(e.else,r,n)}return null;case"parameter":return this.parameters[e.value.toLowerCase()];case"expression-list":{const t=[];for(const a of e.value)t.push(this._evaluateNode(a,r,n));return t}case"unary-expression":return T(this._evaluateNode(e.expr,r,n));case"binary-expression":switch(e.operator){case"AND":return S(this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n));case"OR":return w(this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n));case"IS":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null===this._evaluateNode(e.left,r,n);case"ISNOT":if("null"!==e.right.type)throw new Error("Unsupported RHS for IS");return null!==this._evaluateNode(e.left,r,n);case"IN":{const t=_(this._evaluateNode(e.right,r,n));return y(this._evaluateNode(e.left,r,n),t)}case"NOT IN":{const t=_(this._evaluateNode(e.right,r,n));return T(y(this._evaluateNode(e.left,r,n),t))}case"BETWEEN":{const t=this._evaluateNode(e.left,r,n),a=this._evaluateNode(e.right,r,n);return null==t||null==a[0]||null==a[1]?null:t>=b(a[0])&&t<=b(a[1])}case"NOTBETWEEN":{const t=this._evaluateNode(e.left,r,n),a=this._evaluateNode(e.right,r,n);return null==t||null==a[0]||null==a[1]?null:t<b(a[0])||t>b(a[1])}case"LIKE":return D(this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n),e.escape);case"NOT LIKE":return T(D(this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return E(e.operator,this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n));case"-":case"+":case"*":case"/":case"||":return x(e.operator,this._evaluateNode(e.left,r,n),this._evaluateNode(e.right,r,n))}case"null":case"boolean":case"string":case"number":return e.value;case"date":return N(e.value);case"timestamp":return m(e.value);case"current-time":{const t=new Date;return "date"===e.mode&&t.setHours(0,0,0,0),t}case"column-reference":return M(r,e.column,this._datefields,n);case"data-type":return e.value;case"function":{const a=this._evaluateNode(e.args,r,n);return this.isAggregate?a$1(e.name,a):l$1(e.name,a)}}throw new Error("Unsupported sql syntax "+e.type)}}function m(e){let t=l.exec(e);if(null!==t){const[,e,a,r,s,n,i]=t;return p(e,a,r,s,n,i)}if(t=u.exec(e),null!==t){const[,e,a,r,s,n,i,l,u,o]=t;return p(e,a,r,s,n,i,l,u,o)}if(t=o.exec(e),null!==t){const[,e,a,r,s,n,i,l,u]=t;return p(e,a,r,s,n,"0",i,l,u)}if(t=c.exec(e),null!==t){const[,e,a,r,s,n]=t;return p(e,a,r,s,n)}if(t=i.exec(e),null!==t){const[,e,a,r]=t;return p(e,a,r)}throw new Error("SQL Invalid Timestamp")}function N(e){const t=i.exec(e);if(null===t)try{return m(e)}catch{throw new Error("SQL Invalid Date")}const[,a,r,s]=t;return new Date(parseInt(a,10),parseInt(r,10)-1,parseInt(s,10))}function g(e){return !0===e}function _(e){return Array.isArray(e)?e:[e]}function T(e){return null!==e?!0!==e:null}function S(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function w(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function y(e,t){if(null==e)return null;let a=!1;for(const r of t)if(null==r)a=null;else if(e===r){a=!0;break}return a}const I="-[]/{}()*+?.\\^$|";var J;function A(e,t){const a=t;let r="",s=J.Normal;for(let n=0;n<e.length;n++){const t=e.charAt(n);switch(s){case J.Normal:t===a?s=J.Escaped:I.includes(t)?r+="\\"+t:r+="%"===t?".*":"_"===t?".":t;break;case J.Escaped:I.includes(t)?r+="\\"+t:r+=t,s=J.Normal;}}return new RegExp("^"+r+"$","m")}function D(e,t,a){if(null==e)return null;return A(t,a).test(e)}function b(e){return e instanceof Date?e.valueOf():e}function E(e,t,a){if(null==t||null==a)return null;const r=b(t),s=b(a);switch(e){case"<>":return r!==s;case"=":return r===s;case">":return r>s;case"<":return r<s;case">=":return r>=s;case"<=":return r<=s}}function x(e,t,r){if("||"===e)return l$1("concat",[t,r]);if(t instanceof n$1)if(r instanceof Date)switch(e){case"+":return new Date(t.valueInMilliseconds()+r.getTime());case"-":return t.valueInMilliseconds()-r.getTime();case"*":return t.valueInMilliseconds()*r.getTime();case"/":return t.valueInMilliseconds()/r.getTime()}else if(r instanceof n$1)switch(e){case"+":return n$1.createFromMilliseconds(t.valueInMilliseconds()+r.valueInMilliseconds());case"-":return n$1.createFromMilliseconds(t.valueInMilliseconds()-r.valueInMilliseconds());case"*":return t.valueInMilliseconds()*r.valueInMilliseconds();case"/":return t.valueInMilliseconds()/r.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(r instanceof n$1)if(t instanceof Date)switch(e){case"+":return new Date(r.valueInMilliseconds()+t.getTime());case"-":return new Date(t.getTime()-r.valueInMilliseconds());case"*":return t.getTime()*r.valueInMilliseconds();case"/":return t.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();else if(t instanceof Date&&"number"==typeof r)switch(r=24*r*60*60*1e3,t=t.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}else if(r instanceof Date&&"number"==typeof t)switch(t=24*t*60*60*1e3,r=r.getTime(),e){case"+":return new Date(t+r);case"-":return new Date(t-r);case"*":return new Date(t*r);case"/":return new Date(t/r)}switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r}}function F(e){return e&&"object"==typeof e.attributes}function M(e,t,a,r){const s=r.getAttribute(e,t);return null!=s&&1===a[t]?new Date(s):s}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped";}(J||(J={}));const O={getAttribute:(e,t)=>(F(e)?e.attributes:e)[t]};

const WhereClause = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
	__proto__: null,
	WhereClause: f,
	defaultAttributeAdapter: O
}, Symbol.toStringTag, { value: 'Module' }));

export { WhereClause as W, f, n$2 as n, o$2 as o, s$1 as s, t$1 as t };
