const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./loadGLTFMesh-DOBwL0eF.js","./main-48Jy8Lgr.js","./preload-helper-dJJaZANz.js","./main-BjH693uE.css","./mat3f64-DiVtVT5k.js","./BufferView-CQevY14v.js","./vec3-Bg3oIamZ.js","./DefaultMaterial_COLOR_GAMMA-auHep7GT.js","./mat4f64-D1udxz0O.js","./enums-CgzwTbC2.js","./quat-3PTO0K8F.js","./quatf64-BVXz_O4E.js","./resourceUtils-Ch7rmr34.js","./basicInterfaces-WNnrzIVI.js","./Indices-Bkmtp4j_.js","./types-iH5tHpma.js","./georeference-CnpGSqiR.js","./computeTranslationToOriginAndRotation--R1YdmD1.js","./DoubleArray-FC5bar02.js","./meshVertexSpaceUtils-BcuDQJXG.js","./MeshLocalVertexSpace-CjxPtc_P.js","./imageUtils-DJafUqn-.js","./earcut-B9Bfurzd.js","./deduplicate-CyxPmdDE.js","./plane-0glEmQci.js","./triangle-DucQomTT.js","./Util-CcpJDLeq.js","./ObjectStack-Bz0I7slx.js","./lineSegment-BKHAcz2d.js","./VertexAttribute-NSFkUlX8.js","./External-B0DuqjXq.js","./gltfexport-OrGXL0OZ.js"])))=>i.map(i=>d[i]);
import { _ as __vitePreload } from './preload-helper-dJJaZANz.js';
import { be as H$2, eE as n$3, nF as D$1, cl as n$4, aW as e$1, aX as y$3, g2 as f$5, ex as r, e3 as o$1, aY as c$6, c1 as f$6, eg as m$7, c2 as v$1, dW as i$3, ai as u$9, jg as s$1, H as s$2, W as a$3, s as s$3, hw as h$6, hZ as n$5, bd as W$1, kU as L$1, fv as o$2, nG as a$5, nH as D$2, bo as i$5, nI as c$8, aH as M$2, cu as e$4, cx as u$a, gT as h$7, J as s$4, F as x$2, R as Rt, nJ as G$2, mt as g$6, jL as c$a, lP as u$b, jf as l$3, a3 as V$1, aZ as v$2, fw as S$1, ck as z$1, iZ as h$9, eD as O$2, nK as D$3, lZ as _$1, hH as l$4, j8 as c$b, nL as O$3, j5 as f$7, nM as y$6, nN as I$3, i$ as n$6, hY as p$9, cw as g$7, eZ as m$8, jT as n$7, b2 as d$5, cm as r$1, aE as j$4, nO as i$7, eN as n$8 } from './main-48Jy8Lgr.js';
import { G as G$1, c as c$9, Q as Q$2, I as I$1, V as V$2, _, b as b$3, d as d$4, A as A$1, y as y$5, k, a as O$4, j as j$3, h as h$a, E as E$2, e as _$2, f as b$4, w as w$2 } from './georeference-CnpGSqiR.js';
import { c as c$7 } from './imageUtils-DJafUqn-.js';
import { i as i$6, a as a$7 } from './MeshLocalVertexSpace-CjxPtc_P.js';
import { g as g$5, p as p$8, u as u$d, h as h$b, l as l$5 } from './meshVertexSpaceUtils-BcuDQJXG.js';
import { i as i$4 } from './earcut-B9Bfurzd.js';
import { a as a$4, e as e$3, t as t$2 } from './DoubleArray-FC5bar02.js';
import { t as t$1 } from './Indices-Bkmtp4j_.js';
import { e as e$2 } from './deduplicate-CyxPmdDE.js';
import { E as E$1, F as F$1, X as X$1 } from './plane-0glEmQci.js';
import './triangle-DucQomTT.js';
import { e as e$6 } from './mat4f64-D1udxz0O.js';
import './basicInterfaces-WNnrzIVI.js';
import './VertexAttribute-NSFkUlX8.js';
import { u as u$c, y as y$4, h as h$8 } from './External-B0DuqjXq.js';
import { e as e$5 } from './mat3f64-DiVtVT5k.js';
import { I as I$2 } from './quat-3PTO0K8F.js';
import { e as e$7, o as o$3 } from './quatf64-BVXz_O4E.js';
import { a as a$6, R } from './computeTranslationToOriginAndRotation--R1YdmD1.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function c$5(e,o,c,i){if(H$2(e.spatialReference,c)){f$4[0]=e.x,f$4[1]=e.y;const r=e.z;return f$4[2]=r??i??0,n$3(f$4,e.spatialReference,0,o,c,0,1)}const s=D$1(e,c);return !!s&&(o[0]=s?.x,o[1]=s?.y,o[2]=s?.z??i??0,!0)}const f$4=n$4();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
var p$7;const d$3=new WeakMap;let h$5=0,u$8=p$7=class extends f$6{constructor(t){super(t),this.wrap="repeat";}get url(){return this._get("url")||null}set url(t){this._set("url",t),t&&this._set("data",null);}get data(){return this._get("data")||null}set data(t){this._set("data",t),t&&this._set("url",null);}writeData(t,e,a,r){if(t instanceof HTMLImageElement){const s={type:"image-element",src:m$7(t.src,r),crossOrigin:t.crossOrigin};e[a]=s;}else if(t instanceof HTMLCanvasElement){const r=t.getContext("2d").getImageData(0,0,t.width,t.height),s={type:"canvas-element",imageData:this._encodeImageData(r)};e[a]=s;}else if(t instanceof HTMLVideoElement){const s={type:"video-element",src:m$7(t.src,r),autoplay:t.autoplay,loop:t.loop,muted:t.muted,crossOrigin:t.crossOrigin,preload:t.preload};e[a]=s;}else if(t instanceof ImageData){const r={type:"image-data",imageData:this._encodeImageData(t)};e[a]=r;}}readData(t){switch(t.type){case"image-element":{const e=new Image;return e.src=t.src,e.crossOrigin=t.crossOrigin,e}case"canvas-element":{const e=this._decodeImageData(t.imageData),a=document.createElement("canvas");return a.width=e.width,a.height=e.height,a.getContext("2d").putImageData(e,0,0),a}case"image-data":return this._decodeImageData(t.imageData);case"video-element":{const e=document.createElement("video");return e.src=t.src,e.crossOrigin=t.crossOrigin,e.autoplay=t.autoplay,e.loop=t.loop,e.muted=t.muted,e.preload=t.preload,e}default:return}}get transparent(){const t=this.data,e=this.url;if(t instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(t.getContext("2d").getImageData(0,0,t.width,t.height));if(t instanceof ImageData)return this._imageDataContainsTransparent(t);if(e){const t=e.substr(e.length-4,4).toLowerCase(),a=e.substr(0,15).toLocaleLowerCase();if(".png"===t||"data:image/png;"===a)return !0}return !1}set transparent(t){this._overrideIfSome("transparent",t);}get contentHash(){const t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",e=(e="")=>`d:${e},t:${this.transparent},w:${t}`;return null!=this.url?e(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?e(this.data.src):(d$3.has(this.data)||d$3.set(this.data,++h$5),e(d$3.get(this.data))):e()}get memoryUsage(){let t=0;if(t+=null!=this.url?this.url.length:0,null!=this.data){const e=this.data;"data"in e?t+=e.data.byteLength:e instanceof HTMLImageElement?t+=e.naturalWidth*e.naturalHeight*3:e instanceof HTMLCanvasElement&&(t+=e.width*e.height*3);}return t}clone(){const t={url:this.url,data:this.data,wrap:this._cloneWrap()};return new p$7(t)}cloneWithDeduplication(t){const e=t.get(this);if(e)return e;const a=this.clone();return t.set(this,a),a}_cloneWrap(){return "string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(t){let e="";for(let a=0;a<t.data.length;a++)e+=String.fromCharCode(t.data[a]);return {data:btoa(e),width:t.width,height:t.height}}_decodeImageData(t){const a=atob(t.data),r=new Uint8ClampedArray(a.length);for(let e=0;e<a.length;e++)r[e]=a.charCodeAt(e);return c$7(r,t.width,t.height)}_imageDataContainsTransparent(t){for(let e=3;e<t.data.length;e+=4)if(255!==t.data[e])return !0;return !1}static from(t){return "string"==typeof t?new p$7({url:t}):t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData||t instanceof HTMLVideoElement?new p$7({data:t}):v$1(p$7,t)}};e$1([y$3({type:String,json:{write:f$5}})],u$8.prototype,"url",null),e$1([y$3({json:{write:{overridePolicy(){return {enabled:!this.url}}}}}),y$3()],u$8.prototype,"data",null),e$1([r("data")],u$8.prototype,"writeData",null),e$1([o$1("data")],u$8.prototype,"readData",null),e$1([y$3({type:Boolean,json:{write:{overridePolicy(){return {enabled:this._isOverridden("transparent")}}}}})],u$8.prototype,"transparent",null),e$1([y$3({json:{write:!0}})],u$8.prototype,"wrap",void 0),e$1([y$3({readOnly:!0})],u$8.prototype,"contentHash",null),u$8=p$7=e$1([c$6("esri.geometry.support.MeshTexture")],u$8);const m$6=u$8;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
let p$6=class p extends(i$3(f$6)){constructor(o){super(o),this.offset=[0,0],this.rotation=0,this.scale=[1,1];}};e$1([y$3({type:[Number],nonNullable:!0,json:{write:!0}})],p$6.prototype,"offset",void 0),e$1([y$3({type:Number,nonNullable:!0,json:{write:!0}})],p$6.prototype,"rotation",void 0),e$1([y$3({type:[Number],nonNullable:!0,json:{write:!0}})],p$6.prototype,"scale",void 0),p$6=e$1([c$6("esri.geometry.support.MeshTextureTransform")],p$6);const c$4=p$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
var n$2;let u$7=n$2=class extends f$6{constructor(o){super(o),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0;}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(o,r){const e=null!=o?o.get(this):null;if(e)return e;const t=new n$2(this.clonePropertiesWithDeduplication(r));return null!=o&&o.set(this,t),t}clonePropertiesWithDeduplication(o){return {color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(o),normalTexture:this.normalTexture?.cloneWithDeduplication(o),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let o=0;return o+=null!=this.color?16:0,null!=this.colorTexture&&(o+=this.colorTexture.memoryUsage),o+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(o+=this.normalTexture.memoryUsage),o+=null!=this.normalTextureTransform?20:0,o}};e$1([y$3({type:u$9,json:{write:!0}})],u$7.prototype,"color",void 0),e$1([y$3({type:m$6,json:{write:!0}})],u$7.prototype,"colorTexture",void 0),e$1([y$3({type:c$4,json:{write:!0}})],u$7.prototype,"colorTextureTransform",void 0),e$1([y$3({type:m$6,json:{write:!0}})],u$7.prototype,"normalTexture",void 0),e$1([y$3({type:c$4,json:{write:!0}})],u$7.prototype,"normalTextureTransform",void 0),e$1([y$3({nonNullable:!0,json:{write:!0}})],u$7.prototype,"alphaMode",void 0),e$1([y$3({nonNullable:!0,json:{write:!0}})],u$7.prototype,"alphaCutoff",void 0),e$1([y$3({nonNullable:!0,json:{write:!0}})],u$7.prototype,"doubleSided",void 0),u$7=n$2=e$1([c$6("esri.geometry.support.MeshMaterial")],u$7);const a$2=u$7;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
var n$1;let u$6=n$1=class extends a$2{constructor(e){super(e),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0;}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,s){const o=null!=e?e.get(this):null;if(o)return o;const t=new n$1(this.clonePropertiesWithDeduplication(s));return null!=e&&e.set(this,t),t}getMemoryUsage(){let e=super.getMemoryUsage();return e+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(e+=this.emissiveTexture.memoryUsage),e+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(e+=this.occlusionTexture.memoryUsage),e+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(e+=this.metallicRoughnessTexture.memoryUsage),e+=null!=this.metallicRoughnessTextureTransform?20:0,e}clonePropertiesWithDeduplication(e){return {...super.clonePropertiesWithDeduplication(e),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(e),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(e),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(e),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};e$1([y$3({type:u$9,json:{write:!0}})],u$6.prototype,"emissiveColor",void 0),e$1([y$3({type:m$6,json:{write:!0}})],u$6.prototype,"emissiveTexture",void 0),e$1([y$3({type:c$4,json:{write:!0}})],u$6.prototype,"emissiveTextureTransform",void 0),e$1([y$3({type:m$6,json:{write:!0}})],u$6.prototype,"occlusionTexture",void 0),e$1([y$3({type:c$4,json:{write:!0}})],u$6.prototype,"occlusionTextureTransform",void 0),e$1([y$3({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],u$6.prototype,"metallic",void 0),e$1([y$3({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],u$6.prototype,"roughness",void 0),e$1([y$3({type:m$6,json:{write:!0}})],u$6.prototype,"metallicRoughnessTexture",void 0),e$1([y$3({type:c$4,json:{write:!0}})],u$6.prototype,"metallicRoughnessTextureTransform",void 0),u$6=n$1=e$1([c$6("esri.geometry.support.MeshMaterialMetallicRoughness")],u$6);const m$5=u$6;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
var i$2;let l$2=i$2=class extends f$6{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null;}castColor(t){return c$3(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},s$2.getLogger(this))}castPosition(t){t&&t instanceof Float32Array&&s$2.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return c$3(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},s$2.getLogger(this))}castUv(t){return c$3(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},s$2.getLogger(this))}castNormal(t){return c$3(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},s$2.getLogger(this))}castTangent(t){return c$3(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},s$2.getLogger(this))}clone(){const t={position:a$3(this.position),uv:a$3(this.uv),normal:a$3(this.normal),tangent:a$3(this.tangent),color:a$3(this.color)};return new i$2(t)}clonePositional(){const t={position:a$3(this.position),normal:a$3(this.normal),tangent:a$3(this.tangent),uv:this.uv,color:this.color};return new i$2(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,null!=this.uv&&(t+=this.uv.byteLength),null!=this.normal&&(t+=this.normal.byteLength),null!=this.tangent&&(t+=this.tangent.byteLength),null!=this.color&&(t+=this.color.byteLength),t}};function g$4(t,r,o,e){const{loggerTag:n,stride:s}=r;return t.length%s!=0?(e.error(n,`Invalid array length, expected a multiple of ${s}`),new o([])):t}function c$3(t,r,o,e,n){if(!t)return t;if(t instanceof r)return g$4(t,e,r,n);for(const s of o)if(t instanceof s)return g$4(new r(t),e,r,n);if(Array.isArray(t))return g$4(new r(t),e,r,n);{const e=o.map((t=>`'${t.name}'`));return n.error(`Failed to set property, expected one of ${e}, but got ${t.constructor.name}`),new r([])}}function p$5(t,r,o){r[o]=u$5(t);}function u$5(t){const r=new Array(t.length);for(let o=0;o<t.length;o++)r[o]=t[o];return r}e$1([y$3({json:{write:p$5}})],l$2.prototype,"color",void 0),e$1([s$1("color")],l$2.prototype,"castColor",null),e$1([y$3({nonNullable:!0,json:{write:p$5}})],l$2.prototype,"position",void 0),e$1([s$1("position")],l$2.prototype,"castPosition",null),e$1([y$3({json:{write:p$5}})],l$2.prototype,"uv",void 0),e$1([s$1("uv")],l$2.prototype,"castUv",null),e$1([y$3({json:{write:p$5}})],l$2.prototype,"normal",void 0),e$1([s$1("normal")],l$2.prototype,"castNormal",null),e$1([y$3({json:{write:p$5}})],l$2.prototype,"tangent",void 0),e$1([s$1("tangent")],l$2.prototype,"castTangent",null),l$2=i$2=e$1([c$6("esri.geometry.support.MeshVertexAttributes")],l$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
var p$4;let u$4=p$4=class extends f$6{static from(t){return v$1(p$4,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1;}castFaces(t){return c$3(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},s$2.getLogger(this))}castMaterial(t){return v$1(t&&"object"==typeof t&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?m$5:a$2,t)}clone(){return new p$4({faces:a$3(this.faces),shading:this.shading,material:a$3(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,r){const s={faces:a$3(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,r):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new p$4(s)}get memoryUsage(){let t=0;return null!=this.faces&&(t+=this.faces.byteLength),null!=this.material&&(t+=this.material.memoryUsage),t}};e$1([y$3({json:{write:!0}})],u$4.prototype,"faces",void 0),e$1([s$1("faces")],u$4.prototype,"castFaces",null),e$1([y$3({type:a$2,json:{write:!0}})],u$4.prototype,"material",void 0),e$1([s$1("material")],u$4.prototype,"castMaterial",null),e$1([y$3()],u$4.prototype,"name",void 0),e$1([y$3({type:String,json:{write:!0}})],u$4.prototype,"shading",void 0),e$1([y$3({type:Boolean})],u$4.prototype,"trustSourceNormals",void 0),u$4=p$4=e$1([c$6("esri.geometry.support.MeshComponent")],u$4);const h$4=u$4;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
const t="Mesh must be loaded before applying operations",e="Provided component is not part of the list of components",n="Expected polygon to be a Polygon instance",s="Expected location to be a Point instance";let i$1 = class i extends s$3{constructor(){super("invalid-input:location",s);}};

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function h$3(t,o,n,a){const s=(t=>!Array.isArray(t[0]))(o)?(t,e)=>o[3*t+e]:(t,e)=>o[t][e],c=a?W$1(a)/L$1(a):1;return X$1(t,((t,e)=>o$2(t,s(e,0)*c,s(e,1)*c,s(e,2))),n)}function j$2(e,r,o){const i=h$3(y$2,e,r,o)?F$1(y$2):[0,0,1];return Math.abs(i[2])>Math.cos(h$6(80))?n$5.Z:Math.abs(i[1])>Math.abs(i[0])?n$5.Y:n$5.X}const y$2=E$1();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function f$3(t){const e=g$3(t.rings,t.hasZ,u$3.CCW_IS_HOLE,t.spatialReference),s=new Array;let c=0,f=0;for(const r of e.polygons){const t=r.count,l=r.index,h=a$4(e.position,3*l,3*t),g=r.holeIndices.map((n=>n-l)),a=t$1(i$4(h,g,3));s.push({position:h,faces:a}),c+=h.length,f+=a.length;}const a=h$2(s,c,f),p=Array.isArray(a.position)?e$2(a.position,3,{originalIndices:a.faces}):e$2(a.position.buffer,6,{originalIndices:a.faces});return a.position=e$3(new Float64Array(p.buffer)),a.faces=p.indices,a}function h$2(n,t,e){if(1===n.length)return n[0];const o=t$2(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3;}return {position:o,faces:t$1(r)}}function g$3(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0,h=0,g=0,d=0;for(let s=0;s<r;++s)d+=n[s].length;const m=t$2(3*d);let y=0;for(let s=r-1;s>=0;s--){const d=n[s],A=e===u$3.CCW_IS_HOLE&&p$3(d,t,o);if(A&&1!==r)i[f++]=d;else {let n=d.length;for(let t=0;t<f;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:y,count:d.length}),y=A?a$1(d,d.length-1,-1,m,y,d.length,t):a$1(d,0,1,m,y,d.length,t);for(let o=0;o<f;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:y,count:n.length}),y=a$1(n,0,1,m,y,n.length,t);}f=0,e.count>0&&(l[h++]=e);}}for(let s=0;s<f;++s){const n=i[s];n.length>0&&(c[g++]={index:y,count:n.length}),y=a$1(n,0,1,m,y,n.length,t);}return l.length=h,c.length=g,{position:m,polygons:l,outlines:c}}function a$1(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e;}return r/3}function p$3(n,o,r){if(o){const o=n.length-1,s=j$2(n,o,r);if(s===n$5.X)return !a$5(n,n$5.Y,n$5.Z);if(s===n$5.Y)return !a$5(n,n$5.X,n$5.Z)}return !a$5(n,n$5.X,n$5.Y)}var u$3;!function(n){n[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE";}(u$3||(u$3={}));

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function o([e,n,r,I,o,m],u,a,f){i??=new Float64Array(24);const s=i;return s[0]=e,s[1]=n,s[2]=r,s[3]=e,s[4]=o,s[5]=r,s[6]=I,s[7]=o,s[8]=r,s[9]=I,s[10]=n,s[11]=r,s[12]=e,s[13]=n,s[14]=m,s[15]=e,s[16]=o,s[17]=m,s[18]=I,s[19]=o,s[20]=m,s[21]=I,s[22]=n,s[23]=m,G$1({positions:s,transform:u,vertexSpace:a,inSpatialReference:f,outSpatialReference:f,outPositions:s}),N$1(s,f)}let i=null;function m$4(e){if(0===e.length)return D$2;const t=i$5([Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY,-Number.POSITIVE_INFINITY]);return c$8(t,e),t}function N$1(n,r){const[I,t,o,i,N,u]=m$4(n);return new M$2({xmin:I,ymin:t,zmin:o,xmax:i,ymax:N,zmax:u,spatialReference:r})}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
const p$2="esri.geometry.support.meshUtils.centerAt";function l$1(e,t,r){if(!e.vertexAttributes?.position)return;const{vertexSpace:i}=e,o=r?.origin??e.anchor,a=r?.geographic,c=c$9(p$2,i,o.spatialReference,a);g$5(i)?f$2(e,t,o):c?g$2(e,t,o):d$2(e,t,o);}function f$2(s,a,c){const{vertexSpace:l}=s;if(!g$5(l))return;const f=u$2,g=j$1;if(!c$5(a,g,s.spatialReference))return void s$2.getLogger(p$2).error(`Failed to project centerAt location (wkid:${a.spatialReference.wkid}) to mesh spatial reference (wkid:${s.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!c$5(c,f,s.spatialReference)){const t=s.origin;f[0]=t.x,f[1]=t.y,f[2]=t.z,s$2.getLogger(p$2).error(`Failed to project specified origin (wkid:${c.spatialReference.wkid}) to mesh spatial reference (wkid:${s.spatialReference.wkid}). Projection may be possible after calling projection.load().`);}const d=e$4(b$2,g,f);l.origin=u$a(n$4(),l.origin,d);}function g$2(e,t,r){const i=Q$2(e.vertexAttributes,r),{position:o,normal:n,tangent:s}=I$1(i,t,!1);e.vertexAttributes.position=o,e.vertexAttributes.normal=n,e.vertexAttributes.tangent=s,e.vertexAttributesChanged();}function d$2(t,r,i){const n=u$2,s=j$1;if(c$5(r,s,t.spatialReference)){if(!c$5(i,n,t.spatialReference)){const r=t.origin;n[0]=r.x,n[1]=r.y,n[2]=r.z,s$2.getLogger(p$2).error(`Failed to project specified origin (wkid:${i.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);}m$3(t.vertexAttributes.position,s,n),t.vertexAttributesChanged();}else s$2.getLogger(p$2).error(`Failed to project centerAt location (wkid:${r.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);}function m$3(e,t,r){if(e)for(let i=0;i<e.length;i+=3)for(let o=0;o<3;o++)e[i+o]+=t[o]-r[o];}const j$1=n$4(),u$2=n$4(),b$2=n$4();

async function c$2(e,n,r){const{source:o}=n,{loadGLTFMesh:i}=await h$7(__vitePreload(() => import('./loadGLTFMesh-DOBwL0eF.js'),true?__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]):void 0,import.meta.url),r),a=await f$1(o,r);s$4(r);const c=i(new x$2({x:0,y:0,z:0,spatialReference:e.spatialReference}),a.url,{resolveFile:u$1(a),signal:r?.signal,expectedType:a.type});c.then((()=>a.dispose()),(()=>a.dispose()));const{vertexAttributes:m,components:p}=await c;e.vertexAttributes=m,e.components=p;}function u$1(e){const t=Rt(e.url);return s=>{const n=G$2(s,t,t),r=n?n.replace(/^ *\.\//,""):null;return (r?e.files.get(r):null)??s}}async function f$1(t,s){if(Array.isArray(t)){if(!t.length)throw new s$3("mesh-load-external:missing-assets","There must be at least one file to load");return t[0]instanceof File?h$1(t):y$1(t,s)}return p$1(t)}async function m$2(e,t){const{parts:n,assetMimeType:r,assetName:o}=e;if(1===n.length)return new j(n[0].partUrl);const i=await e.toBlob(t);return s$4(t),j.fromBlob(i,x$1(o,r))}function p$1(e){return j.fromBlob(e,x$1(e.name,e.type))}function h$1(e){return T$1(e.map((e=>({name:e.name,mimeType:e.type,source:p$1(e)}))))}async function y$1(e,t){const i=await g$6(e.map((async e=>{const n=await m$2(e);return s$4(t),{name:e.assetName,mimeType:e.assetMimeType,source:n}})));if(c$a(t))throw i.forEach((e=>e.source.dispose())),u$b();return T$1(i)}const w$1=/^model\/gltf\+json$/,d$1=/^model\/gltf-binary$/,g$1=/\.gltf$/i,b$1=/\.glb$/i;function T$1(t){const s=new Map;let n,r=null;for(const{name:e,mimeType:o,source:i}of t)null===r&&(w$1.test(o)||g$1.test(e)?(r=i.url,n="gltf"):(d$1.test(o)||b$1.test(e))&&(r=i.url,n="glb")),s.set(e,i.url),i.files.forEach(((e,t)=>s.set(t,e)));if(null==r)throw new s$3("mesh-load-external:missing-files","Missing files to load external mesh source");return new j(r,(()=>t.forEach((({source:e})=>e.dispose()))),s,n)}class j{constructor(e,t=(()=>{}),s=new Map,n){this.url=e,this.dispose=t,this.files=s,this.type=n;}static fromBlob(e,t){const s=URL.createObjectURL(e);return new j(s,(()=>URL.revokeObjectURL(s)),void 0,t)}}function x$1(e,t){return w$1.test(t)||g$1.test(e)?"gltf":d$1.test(t)||g$1.test(e)?"glb":void 0}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
let a=class extends l$3{constructor(){super(),this.externalSources=new V$1,this._explicitDisplaySource=null,this.addHandles(v$2((()=>this.externalSources),"after-remove",(({item:e})=>{e===this._explicitDisplaySource&&(this._explicitDisplaySource=null);}),{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}));}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(e){if(null!=e&&!u$c(e))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=e,e&&this.externalSources.every((r=>!y$4(r,e)))&&this.externalSources.add(e);}clearSources(){this.externalSources.removeAll();}getExternalSourcesOnService(e){return this.externalSources.items.filter((r=>h$8(r,e)))}get _implicitDisplaySource(){return this.externalSources.find(u$c)}};e$1([y$3()],a.prototype,"externalSources",void 0),e$1([y$3()],a.prototype,"displaySource",null),e$1([y$3()],a.prototype,"_implicitDisplaySource",null),e$1([y$3()],a.prototype,"_explicitDisplaySource",void 0),a=e$1([c$6("esri.geometry.support.meshUtils.Metadata")],a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function l(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:r}=M$1,n=4*t.length,o=new Float64Array(3*n),s=new Float32Array(3*n),a=new Float32Array(2*n),i=new Uint32Array(2*t.length*3);let l=0,c=0,f=0,u=0;for(let h=0;h<t.length;h++){const n=t[h],p=l/3;for(const t of e)i[u++]=p+t;const m=n.corners;for(let t=0;t<4;t++){const e=m[t];let i=0;a[f++]=.25*r[t][0]+n.uvOrigin[0],a[f++]=n.uvOrigin[1]-.25*r[t][1];for(let t=0;t<3;t++)0!==n.axis[t]?(o[l++]=.5*n.axis[t],s[c++]=n.axis[t]):(o[l++]=.5*e[i++],s[c++]=0);}}return {position:o,normal:s,uv:a,faces:i}}function c$1(t,e){const r=t.components[0],n=r.faces,s=F[e],a=6*s,i=new Array(6),l=new Array(n.length-6);let c=0,f=0;for(let o=0;o<n.length;o++)o>=a&&o<a+6?i[c++]=n[o]:l[f++]=n[o];if(null!=t.vertexAttributes.uv){const e=new Float32Array(t.vertexAttributes.uv),r=4*s*2,n=[0,1,1,1,1,0,0,0];for(let t=0;t<n.length;t++)e[r+t]=n[t];t.vertexAttributes.uv=e;}return t.components=[new h$4({faces:i,material:r.material}),new h$4({faces:l})],t}function f(t=0){const e=Math.round(8*2**t),r=2*e,n=(e-1)*(r+1)+2*r,o=new Float64Array(3*n),s=new Float32Array(3*n),a=new Float32Array(2*n),i=new Uint32Array(3*((e-1)*r*2));let l=0,c=0,f=0,u=0;for(let h=0;h<=e;h++){const t=h/e*Math.PI+.5*Math.PI,n=Math.cos(t),p=Math.sin(t);b[2]=p;const m=0===h||h===e,w=m?r-1:r;for(let g=0;g<=w;g++){const t=g/w*2*Math.PI;b[0]=-Math.sin(t)*n,b[1]=Math.cos(t)*n;for(let e=0;e<3;e++)o[l]=.5*b[e],s[l]=b[e],++l;a[c++]=(g+(m?.5:0))/r,a[c++]=h/e,0!==h&&g!==r&&(h!==e&&(i[f++]=u,i[f++]=u+1,i[f++]=u-r),1!==h&&(i[f++]=u,i[f++]=u-r,i[f++]=u-r-1)),u++;}}return {position:o,normal:s,uv:a,faces:i}}function u(t=0){const e=5,r=Math.round(16*2**t),n=(e-1)*(r+1)+2*r,o=new Float64Array(3*n),s=new Float32Array(3*n),a=new Float32Array(2*n),i=new Uint32Array(3*(4*r));let l=0,c=0,f=0,u=0,h=0;for(let p=0;p<=e;p++){const t=0===p||p===e,n=p<=1||p>=e-1,m=2===p||4===p,w=t?r-1:r;for(let g=0;g<=w;g++){const v=g/w*2*Math.PI,A=t?0:.5;b[0]=A*Math.sin(v),b[1]=A*-Math.cos(v),b[2]=p<=2?.5:-.5;for(let t=0;t<3;t++)o[l++]=b[t],s[c++]=n?2===t?p<=1?1:-1:0:2===t?0:b[t]/A;a[f++]=(g+(t?.5:0))/r,a[f++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,m||0===p||g===r||(p!==e&&(i[u++]=h,i[u++]=h+1,i[u++]=h-r),1!==p&&(i[u++]=h,i[u++]=h-r,i[u++]=h-r-1)),h++;}}return {position:o,normal:s,uv:a,faces:i}}function h(t,e){const r="number"==typeof e?e:null!=e?e.width:1,n="number"==typeof e?e:null!=e?e.height:1;switch(t){case"up":case"down":return {width:r,depth:n};case"north":case"south":return {width:r,height:n};case"east":case"west":return {depth:r,height:n}}}function p(t){const e=v.facingAxisOrderSwap[t],r=v.position,n=v.normal,o=new Float64Array(r.length),s=new Float32Array(n.length);let a=0;for(let i=0;i<4;i++){const t=a;for(let i=0;i<3;i++){const l=e[i],c=Math.abs(l)-1,f=l>=0?1:-1;o[a]=r[t+c]*f,s[a]=n[t+c]*f,a++;}}return {position:o,normal:s,uv:new Float32Array(v.uv),faces:new Uint32Array(v.faces),isPlane:!0}}const m$1=1,w=2,g=3,v={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[g,m$1,w],west:[-g,-m$1,w],north:[-m$1,g,w],south:[m$1,-g,w],up:[m$1,w,g],down:[m$1,-w,-g]}};function A(t,e,r){t.isPlane||x(t),d(t,y(r?.size,r?.unit,e.spatialReference));const{vertexAttributes:n,vertexSpace:i,transform:l}=V$2(t,e,{vertexSpace:r?.vertexSpace,geographic:r?.geographic});return {vertexAttributes:new l$2({...n,uv:t.uv}),vertexSpace:i,transform:l,components:[new h$4({faces:t.faces,material:r?.material||null})],spatialReference:e.spatialReference}}function x(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5;}function y(t,e,r){const n=_(e,r);if(null==t&&1===n)return null;if(null==t)return [n,n,n];if("number"==typeof t){const e=t*n;return [e,e,e]}return [null!=t.width?t.width*n:n,null!=t.depth?t.depth*n:n,null!=t.height?t.height*n:n]}function d(t,n){if(null!=n){O$1[0]=n[0],O$1[4]=n[1],O$1[8]=n[2];for(let r=0;r<t.position.length;r+=3){for(let e=0;e<3;e++)b[e]=t.position[r+e];S$1(b,b,O$1);for(let e=0;e<3;e++)t.position[r+e]=b[e];}if(n[0]!==n[1]||n[1]!==n[2]){O$1[0]=1/n[0],O$1[4]=1/n[1],O$1[8]=1/n[2];for(let n=0;n<t.normal.length;n+=3){for(let e=0;e<3;e++)b[e]=t.normal[n+e];S$1(b,b,O$1),z$1(b,b);for(let e=0;e<3;e++)t.normal[n+e]=b[e];}}}}const M$1={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},F={south:0,east:1,north:2,west:3,up:4,down:5},b=n$4(),O$1=e$5();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
function c(o,c,{vertexSpace:f,spatialReference:a}){if("georeferenced"===f.type){const r=o;if(!c$5(c,r,a))return !1;const{origin:e}=f;return e$4(o,r,e),!0}const p=a$6(a),l=o;if(!c$5(c,l,p))return !1;const{origin:j}=f,u=m;if(!R(a,j,u,p))return !1;const g=h$9(m,u);return null!=g&&(O$2(o,l,g),!0)}const m=e$6();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
const V="esri.geometry.support.meshUtils.rotate";function D(e,t,r){if(!e.vertexAttributes?.position||0===t[3])return;const{spatialReference:o,vertexSpace:i}=e,s=r?.origin??e.anchor,a=r?.geographic,n=c$9(V,i,o,a);p$8(e)?E(e,t,s):n?O(e,t,s):B(e,t,s);}function E(t,r,l){t.transform??=new d$4;const{vertexSpace:c$1,transform:f,spatialReference:u}=t,[j,v,A]=c$1.origin,w=new x$2({x:j,y:v,z:A,spatialReference:u}),R=H$1;if(w.equals(l))o$2(R,0,0,0);else if(!c(R,l,t))return void s$2.getLogger(V).error(`Failed to project specified origin (wkid:${l.spatialReference.wkid}) to mesh (wkid:${u.wkid}) ${c$1.type} vertex space. Projection may be possible after calling projection.load().`);I$2(W,y$5(r),A$1(r));const P=D$3(I,W,l$4,_$1,R),{localMatrix:S}=f,T=c$b(I,P,S);f.scale=O$3(n$4(),T),f$7(T,T,y$6(H$1,f.scale)),f.rotation=k(T),f.translation=I$3(n$4(),T);}function O(e,r,o){const i=e.spatialReference,s=a$6(i),a=Q$1;c$5(o,a,s)||c$5(e.origin,a,s);const n=e.vertexAttributes.position,l=e.vertexAttributes.normal,c=e.vertexAttributes.tangent,m=new Float64Array(n.length),f=null!=l?new Float32Array(l.length):null,p=null!=c?new Float32Array(c.length):null;R(s,a,K$1,s),n$6(N,K$1);const g=J$1;S$1(y$5(J$1),y$5(r),N),g[3]=r[3],O$4(n,i,m),null!=l&&null!=f&&j$3(l,n,m,i,f),null!=c&&null!=p&&h$a(c,n,m,i,p),G(m,g,3,a),E$2(m,n,i),null!=l&&null!=f&&(G(f,g,3),_$2(f,n,m,i,l)),null!=c&&null!=p&&(G(p,g,4),b$4(p,n,m,i,c)),e.vertexAttributesChanged();}function B(t,r,o){const i=Q$1;if(!c$5(o,i,t.spatialReference)){const r=t.origin;i[0]=r.x,i[1]=r.y,i[2]=r.z,s$2.getLogger(V).error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);}G(t.vertexAttributes.position,r,3,i),G(t.vertexAttributes.normal,r,3),G(t.vertexAttributes.tangent,r,4),t.vertexAttributesChanged();}function G(e,t,r,o=l$4){if(null!=e){p$9(K$1,A$1(t),y$5(t));for(let t=0;t<e.length;t+=r){for(let r=0;r<3;r++)H$1[r]=e[t+r]-o[r];O$2(H$1,H$1,K$1);for(let r=0;r<3;r++)e[t+r]=H$1[r]+o[r];}}}const H$1=n$4(),I=e$6(),J$1=b$3(),K$1=e$6(),N=e$5(),Q$1=n$4(),W=e$7();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
const $$1="esri.geometry.support.meshUtils.scale";function P(e,t,r){if(!e.vertexAttributes?.position)return;const{vertexSpace:o,spatialReference:i}=e,s=r?.origin??e.anchor,n=r?.geographic,a=c$9($$1,o,i,n);p$8(e)?S(e,t,s):a?U(e,t,s):C(e,t,s);}function S(n,f,u){n.transform??=new d$4;const{vertexSpace:j,transform:h,spatialReference:b}=n,[v,w,A]=j.origin,k$1=new x$2({x:v,y:w,z:A,spatialReference:b}),y=q;if(k$1.equals(u))o$2(y,0,0,0);else if(!c(y,u,n))return void s$2.getLogger($$1).error(`Failed to project specified origin (wkid:${u.spatialReference.wkid}) to mesh (wkid:${b.wkid}) ${j.type} vertex space. Projection may be possible after calling projection.load().`);const R=o$2(z,f,f,f),P=D$3(M,o$3,l$4,R,y),{localMatrix:S}=h,U=c$b(M,P,S);h.scale=O$3(n$4(),U),f$7(U,U,y$6(q,h.scale)),h.rotation=k(U),h.translation=I$3(n$4(),U);}function U(e,t,r){const o=e.spatialReference,i=a$6(o),s=T;c$5(r,s,i)||c$5(e.origin,s,i);const n=e.vertexAttributes.position,a=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(n.length),f=null!=a?new Float32Array(a.length):null,p=null!=l?new Float32Array(l.length):null;O$4(n,o,c),null!=a&&null!=f&&j$3(a,n,c,o,f),null!=l&&null!=p&&h$a(l,n,c,o,p),L(c,t,s),E$2(c,n,o),null!=a&&null!=f&&_$2(f,n,c,o,a),null!=l&&null!=p&&b$4(p,n,c,o,l),e.vertexAttributesChanged();}function C(t,r,o){const i=T;if(!c$5(o,i,t.spatialReference)){const r=t.origin;i[0]=r.x,i[1]=r.y,i[2]=r.z,s$2.getLogger($$1).error(`Failed to project specified origin (wkid:${o.spatialReference.wkid}) to mesh spatial reference (wkid:${t.spatialReference.wkid}). Projection may be possible after calling projection.load().`);}L(t.vertexAttributes.position,r,i),t.vertexAttributesChanged();}function L(e,t,r=l$4){if(e)for(let o=0;o<e.length;o+=3){for(let t=0;t<3;t++)q[t]=e[o+t]-r[t];g$7(q,q,t);for(let t=0;t<3;t++)e[o+t]=q[t]+r[t];}}const q=n$4(),z=n$4(),M=e$6(),T=n$4();

var H;const K="esri.geometry.Mesh";function J(){return s$2.getLogger(K)}const Q={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:i$6,local:a$7}};let X=H=class extends(m$8.LoadableMixin(n$7(n$8))){constructor(e){super(e),this.components=null,this.vertexSpace=new i$6,this.transform=null,this.metadata=new a,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new l$2,this.type="mesh";}initialize(){(0===this.metadata.externalSources.length||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when((()=>{this.addHandles(d$5((()=>({vertexAttributes:this.vertexAttributes,components:this.components?.map((e=>e.clone()))})),(()=>this._clearSources()),{once:!0,sync:!0}));}));}get hasExtent(){return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):null!=this.metadata.displaySource?.extent}get _transformedExtent(){const{components:e,spatialReference:t,vertexAttributes:r,vertexSpace:o$1}=this,s=r.position;if(0===s.length||e&&0===e.length)return new M$2({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t});if(g$5(o$1)){const{_untransformedBounds:e,transform:r}=this;return o(e,r,o$1,t)}return N$1(s,t)}get _untransformedBounds(){return m$4(this.vertexAttributes.position)}get anchor(){const e=u$d(this.vertexSpace,this.spatialReference);if(null!=e)return e;const{center:t,zmin:r}=this._transformedExtent;return new x$2({x:t.x,y:t.y,z:r,spatialReference:this.spatialReference})}get origin(){const e=u$d(this.vertexSpace,this.spatialReference);return null!=e?e:this._transformedExtent.center}get extent(){return this.loaded||null==this.metadata?.displaySource?.extent?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(e){this._checkIfLoaded("addComponent()")&&(this.components||(this.components=[]),this.components.push(h$4.from(e)),this.notifyChange("components"));}removeComponent(e$1){if(this._checkIfLoaded("removeComponent()")){if(this.components){const t=this.components.indexOf(e$1);if(-1!==t)return this.components.splice(t,1),void this.notifyChange("components")}J().error("removeComponent()",e);}}rotate(e,t,r,o){return w$2(e,t,r,Y),D(this,Y,o),this}offset(e,t,r){if(!this._checkIfLoaded("offset()"))return this;const{vertexSpace:o,vertexAttributes:s}=this,n=s?.position;if(!n)return this;if(g$5(o)){const[s,n,i]=o.origin;o.origin=r$1(s+e,n+t,i+r);}else {for(let o=0;o<n.length;o+=3)n[o]+=e,n[o+1]+=t,n[o+2]+=r;this.vertexAttributesChanged();}return this}scale(e,t){return this._checkIfLoaded("scale()")?(P(this,e,t),this):this}centerAt(e,t){return this._checkIfLoaded("centerAt()")?(l$1(this,e,t),this):this}load(e){const{metadata:{displaySource:t}}=this;return t&&this.addResolvingPromise(c$2(this,t,e)),Promise.resolve(this)}addExternalSources(e){this.metadata.externalSources.addMany(e);}updateDisplaySource(e){this.metadata.displaySource=e;}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(e){let t=null;if(this.components){const e=new Map,r=new Map;t=this.components.map((t=>t.cloneWithDeduplication(e,r)));}const r={components:t,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:e,transform:this.transform?.clone()??null,metadata:this.metadata.clone()};return new H(r)}cloneShallow(){return new H({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes");}async toBinaryGLTF(e){const t=__vitePreload(() => import('./gltfexport-OrGXL0OZ.js'),true?__vite__mapDeps([31,1,2,3,8,10,4,11,20,16,17,18,19,6,5,9,12,13,21,22,14,23,24,25,26,27,28,29,30]):void 0,import.meta.url),r=this.load(),o=await Promise.all([t,r]),{toBinaryGLTF:s}=o[0];return s(this,e)}get memoryUsage(){let e=0;if(e+=this.vertexAttributes.memoryUsage,null!=this.components)for(const t of this.components)e+=t.memoryUsage;return e}_clearSources(){this.metadata.clearSources();}_checkIfLoaded(e){return !!this.loaded||(J().error(e,t),!1)}static createBox(e,t){if(!(e instanceof x$2))return J().error(".createBox()",s),null;const r=new H(A(l(),e,t));return t?.imageFace&&"all"!==t.imageFace?c$1(r,t.imageFace):r}static createSphere(e,t){return e instanceof x$2?new H(A(f(t?.densificationFactor||0),e,t)):(J().error(".createSphere()",s),null)}static createCylinder(e,t){return e instanceof x$2?new H(A(u(t?.densificationFactor||0),e,t)):(J().error(".createCylinder()",s),null)}static createPlane(e,t){if(!(e instanceof x$2))return J().error(".createPlane()",s),null;const r=t?.facing??"up",o=h(r,t?.size);return new H(A(p(r),e,{...t,size:o}))}static createFromPolygon(e,t){if(!(e instanceof j$4))return J().error(".createFromPolygon()",n),null;const r=f$3(e);return new H({vertexAttributes:new l$2({position:r.position}),components:[new h$4({faces:r.faces,shading:"flat",material:t?.material??null})],spatialReference:e.spatialReference,vertexSpace:new i$6})}static async createFromGLTF(e,t,r){if(!(e instanceof x$2)){const e=new i$1;throw J().error(".createfromGLTF()",e.message),e}const{loadGLTFMesh:o}=await h$7(__vitePreload(() => import('./loadGLTFMesh-DOBwL0eF.js'),true?__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]):void 0,import.meta.url),r);return new H(await o(e,t,r))}static async createFromFiles(e,o,s){i$7(J(),"`Mesh.createFromFiles` is deprecated in favor of 'SceneLayer.convertMesh'",{replacement:"SceneLayer.convertMesh",version:"4.29"});const n=e=>J().error(".createFromFiles()",e.message);if(!(e instanceof x$2)){const e=new i$1;throw n(e),e}if(!s?.layer)throw new s$3("invalid:no-layer","SceneLayer required for file to mesh conversion.");return s.layer.convertMesh(o,{location:e,...s})}static createWithExternalSource(e,t,r){const o=r?.extent??null,{x:s,y:n,z:i,spatialReference:a$1}=e,c=r?.transform?.clone()??new d$4,p=r$1(s,n,i??0),m=h$b(r?.vertexSpace??l$5(a$1),p),h={source:t,extent:o},u=new a;return u.externalSources.push(h),new H({metadata:u,transform:c,vertexSpace:m,spatialReference:a$1})}static createIncomplete(e,t){const{x:o,y:s,z:n,spatialReference:i}=e,a=t?.transform?.clone()??new d$4,c=r$1(o,s,n??0),p=h$b(t?.vertexSpace??l$5(i),c),m=new H({transform:a,vertexSpace:p,spatialReference:i});return m.addResolvingPromise(Promise.reject(new s$3("mesh-incomplete","Mesh resources are not complete"))),m}};e$1([y$3({type:[h$4],json:{write:!0}})],X.prototype,"components",void 0),e$1([y$3({nonNullable:!0,types:Q,constructOnly:!0,json:{write:!0}})],X.prototype,"vertexSpace",void 0),e$1([y$3({type:d$4,json:{write:!0}})],X.prototype,"transform",void 0),e$1([y$3({constructOnly:!0})],X.prototype,"metadata",void 0),e$1([y$3()],X.prototype,"hasExtent",null),e$1([y$3()],X.prototype,"_transformedExtent",null),e$1([y$3()],X.prototype,"_untransformedBounds",null),e$1([y$3()],X.prototype,"anchor",null),e$1([y$3()],X.prototype,"origin",null),e$1([y$3({readOnly:!0,json:{read:!1}})],X.prototype,"extent",null),e$1([y$3({readOnly:!0,json:{read:!1,write:!0,default:!0}})],X.prototype,"hasZ",void 0),e$1([y$3({readOnly:!0,json:{read:!1,write:!0,default:!1}})],X.prototype,"hasM",void 0),e$1([y$3({type:l$2,nonNullable:!0,json:{write:!0}})],X.prototype,"vertexAttributes",void 0),X=H=e$1([c$6(K)],X);const Y=b$3(),$=X;

export { $, m$5 as a, c$4 as c, h$4 as h, l$2 as l, m$6 as m };
