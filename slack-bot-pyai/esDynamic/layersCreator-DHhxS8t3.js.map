{"version":3,"file":"layersCreator-DHhxS8t3.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import t from\"../../portal/PortalItem.js\";import{isMapNotesLayer as y,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function c(e,r,a){if(!r)return;const t=r.map((e=>f(e,a))),y=await Promise.allSettled(t);for(const i of y)\"rejected\"===i.status||i.value&&e.add(i.value)}const l={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",PointCloudLayer:\"PointCloudLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",GroupLayer:\"GroupLayer\",GeoJSON:\"GeoJSONLayer\",WebTiledLayer:\"WebTileLayer\",CSV:\"CSVLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",KML:\"KMLLayer\",RasterDataLayer:\"UnsupportedLayer\",Voxel:\"VoxelLayer\",LineOfSightLayer:\"LineOfSightLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",WebTiledLayer:\"WebTileLayer\",VectorTileLayer:\"VectorTileLayer\",ArcGISImageServiceLayer:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",DefaultTileLayer:\"TileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoRSS:\"GeoRSSLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"UnsupportedLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"UnsupportedLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WebTiledLayer:\"WebTileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},g={...d},T={...I};async function f(e,r){return G(await M(e,r),e,r)}async function G(e,r,a){const t=new e;return t.read(r,a.context),\"group\"===t.type&&(\"GroupLayer\"===r.layerType?await w(t,r,a):b(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await o(t,a.context),t}async function M(e,o){const c=o.context,l=v(c);let s=e.layerType||e.type;!s&&o?.defaultLayerType&&(s=o.defaultLayerType);const p=l[s];let S=p?a[p]:a.UnknownLayer;if(b(e)){const y=c?.portal;if(e.itemId){const i=new t({id:e.itemId,portal:y});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?y(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||b(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function b(e){return\"Feature Collection\"===e.type}function v(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=l}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=g;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function w(r,a,t){const y=new e,i=c(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new t({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=a.FeatureLayer,i=await y(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const o={...t,ignoreDefaults:!0};return F(L,e,r,y,o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}export{w as populateGroupLayer,c as populateOperationalLayers};\n"],"names":["e","t","r","n","c","a","f","y","i","l","s","p","S","u","d","I","m","g","T","G","M","w","b","h","A","C","o","v","L","F"],"mappings":"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","x_google_ignoreList":[0,1]}