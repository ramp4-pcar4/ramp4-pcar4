{"version":3,"file":"index-CWSiKeIP.js","sources":["../../src/fixtures/settings/api/settings.ts","../../src/fixtures/settings/lang/lang.csv?raw","../../src/fixtures/settings/index.ts"],"sourcesContent":["import { FixtureInstance, LayerInstance } from '@/api';\nexport class SettingsAPI extends FixtureInstance {\n    /**\n     * Opens the settings panel. Passes the provided LayerInstance object to the panel.\n     *\n     * @param {LayerInstance} layer controlled layer\n     * @param {boolean} open force panel open or closed\n     */\n    toggleSettings(layer: LayerInstance, open?: boolean): void {\n        const panel = this.$iApi.panel.get('settings');\n\n        // open if closed and not forced to close\n        if (!panel.isOpen && open !== false) {\n            this.$iApi.panel.open({\n                id: 'settings',\n                props: { layer: layer }\n            });\n        } else {\n            const currentUid = (panel.route.props! as any).layer.uid;\n            // close if open and not forced to open\n            if (open !== true) panel.close();\n            if (currentUid !== layer.uid) {\n                // close and reopen settings panel to indicate settings for a different layer\n                setTimeout(() => {\n                    this.$iApi.panel.open({\n                        id: 'settings',\n                        props: { layer: layer }\n                    });\n                }, 100);\n            }\n        }\n    }\n}\n","export default \"key,enValue,enValid,frValue,frValid\\nsettings.title,Settings,1,Paramètres,1\\nsettings.layer.loading,The layer is loading...,1,La couche est en cours de chargement...,1\\nsettings.label.display,Display,1,Affichage,1\\nsettings.label.visibility,Show layer,1,Afficher la couche,1\\nsettings.label.opacity,Opacity,1,Opacité,1\\nsettings.label.boundingBox,Bounding box,1,Zone de délimitation,1\\nsettings.label.data,Data,1,Données,1\\nsettings.label.identify,Toggle identify,1,Basculer vers la désignation,1\\nsettings.label.interval,Refresh interval,1,Intervalle d'actualisation,1\\nsettings.label.refreshHint,Refresh interval in minutes,1,Intervalle d'actualisation en minutes,1\\nsettings.label.refreshOff, Leave blank or 0 to turn off automatic refresh,1,Laisser le champ vide ou y inscrire 0 pour désactiver l'actualisation automatique,1\\nsettings.label.no.layer,The layer has been removed,1,La couche a été supprimée.,1\"","import { markRaw } from 'vue';\nimport { SettingsAPI } from './api/settings';\nimport SettingsScreenV from './screen.vue';\nimport messages from './lang/lang.csv?raw';\nimport { useAppbarStore } from '../appbar/store';\n\nclass SettingsFixture extends SettingsAPI {\n    async added() {\n        // console.log(`[fixture] ${this.id} added`);\n\n        this.$iApi.panel.register(\n            {\n                settings: {\n                    screens: {\n                        'settings-screen-content': markRaw(SettingsScreenV)\n                    },\n                    style: {\n                        width: '350px'\n                    },\n                    button: {\n                        tooltip: 'settings.title',\n                        // https://fonts.google.com/icons?selected=Material%20Icons%3Asettings\n                        icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><g><path d=\"M0,0h24v24H0V0z\" fill=\"none\" /><path d=\"M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z\" /></g></svg>'\n                    },\n                    alertName: 'settings.title'\n                }\n            },\n            { i18n: { messages } }\n        );\n\n        this.handlePanelTeleports(['settings']);\n    }\n\n    removed() {\n        // console.log(`[fixture] ${this.id} removed`);\n        if (this.$iApi.fixture.exists('appbar')) {\n            const appbarStore = useAppbarStore(this.$vApp.$pinia);\n            appbarStore.removeButton('settings');\n        }\n        this.$iApi.panel.remove('settings');\n    }\n}\n\nexport default SettingsFixture;\n"],"names":["SettingsAPI","FixtureInstance","layer","open","panel","currentUid","messages","SettingsFixture","markRaw","SettingsScreenV","useAppbarStore"],"mappings":";;AACO,MAAMA,UAAoBC,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO7C,eAAeC,GAAsBC,GAAsB;AACvD,UAAMC,IAAQ,KAAK,MAAM,MAAM,IAAI,UAAU;AAG7C,QAAI,CAACA,EAAM,UAAUD,MAAS;AACrB,WAAA,MAAM,MAAM,KAAK;AAAA,QAClB,IAAI;AAAA,QACJ,OAAO,EAAE,OAAAD,EAAa;AAAA,MAAA,CACzB;AAAA,SACE;AACH,YAAMG,IAAcD,EAAM,MAAM,MAAe,MAAM;AAEjD,MAAAD,MAAS,MAAMC,EAAM,MAAM,GAC3BC,MAAeH,EAAM,OAErB,WAAW,MAAM;AACR,aAAA,MAAM,MAAM,KAAK;AAAA,UAClB,IAAI;AAAA,UACJ,OAAO,EAAE,OAAAA,EAAa;AAAA,QAAA,CACzB;AAAA,SACF,GAAG;AAAA,IAEd;AAAA,EACJ;AACJ;AChCA,MAAeI,IAAA,EAAC,IAAK,EAAC,kBAAiB,YAAW,0BAAyB,2BAA0B,0BAAyB,WAAU,6BAA4B,cAAa,0BAAyB,WAAU,8BAA6B,gBAAe,uBAAsB,QAAO,2BAA0B,mBAAkB,2BAA0B,oBAAmB,8BAA6B,+BAA8B,6BAA4B,mDAAkD,2BAA0B,6BAA4B,GAAE,IAAK,EAAC,kBAAiB,cAAa,0BAAyB,2CAA0C,0BAAyB,aAAY,6BAA4B,sBAAqB,0BAAyB,WAAU,8BAA6B,wBAAuB,uBAAsB,WAAU,2BAA0B,gCAA+B,2BAA0B,8BAA6B,8BAA6B,yCAAwC,6BAA4B,qFAAoF,2BAA0B,6BAA4B,EAAC;ACMvsC,MAAMC,UAAwBP,EAAY;AAAA,EACtC,MAAM,QAAQ;AAGV,SAAK,MAAM,MAAM;AAAA,MACb;AAAA,QACI,UAAU;AAAA,UACN,SAAS;AAAA,YACL,2BAA2BQ,EAAQC,CAAe;AAAA,UACtD;AAAA,UACA,OAAO;AAAA,YACH,OAAO;AAAA,UACX;AAAA,UACA,QAAQ;AAAA,YACJ,SAAS;AAAA;AAAA,YAET,MAAM;AAAA,UACV;AAAA,UACA,WAAW;AAAA,QACf;AAAA,MACJ;AAAA,MACA,EAAE,MAAM,EAAE,UAAAH,IAAW;AAAA,IAAA,GAGpB,KAAA,qBAAqB,CAAC,UAAU,CAAC;AAAA,EAC1C;AAAA,EAEA,UAAU;AAEN,IAAI,KAAK,MAAM,QAAQ,OAAO,QAAQ,KACdI,EAAe,KAAK,MAAM,MAAM,EACxC,aAAa,UAAU,GAElC,KAAA,MAAM,MAAM,OAAO,UAAU;AAAA,EACtC;AACJ;"}