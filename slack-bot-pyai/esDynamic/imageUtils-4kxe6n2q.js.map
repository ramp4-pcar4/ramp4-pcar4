{"version":3,"file":"imageUtils-4kxe6n2q.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,o=null){super(e,s,r,i,a,n),this.bitmap=new t(o),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){this.bitmap.beforeRender(e),super.beforeRender(e)}afterRender(e){this.bitmap.afterRender(e),super.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{displayViewScreenMat3:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.displayViewScreenMat3=this.transforms.displayViewScreenMat3}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{brushes as r}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import s from\"./webgl/TileContainer.js\";class n extends s{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),s=this._tileInfoView.getTileResolution(r.level),[n,o]=this._tileInfoView.tileInfo.size;return new i(r,s,t[0],t[3],n,o)}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[r.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),i]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return s=i([e(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n"],"names":["s","i","a","n","o","t","e","n$1","r","l","u","c","g","h","d","m","v","I","M","F","L"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}