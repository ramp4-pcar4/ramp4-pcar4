{"version":3,"file":"index-Dl1tuqxb.js","sources":["../../src/fixtures/crosshairs/crosshairs.vue","../../src/fixtures/crosshairs/index.ts"],"sourcesContent":["<template>\n    <div class=\"crosshairs absolute duration-150 top-1/2 left-1/2 h-230 w-230\" :class=\"{ 'opacity-0': !visible }\">\n        <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fit=\"\"\n            height=\"100%\"\n            width=\"100%\"\n            preserveAspectRatio=\"xMidYMid meet\"\n            viewBox=\"0 0 24 24\"\n            focusable=\"false\"\n        >\n            <g fill=\"#545353\" stroke=\"#fff\" id=\"crosshairs\">\n                <ellipse ry=\".254\" rx=\".262\" id=\"path3808\" cx=\"12\" cy=\"12\" stroke-width=\".076\"></ellipse>\n                <path\n                    d=\"M.045 12.047l6.093.051 4.264.068v-.332l-4.264.067-6.093.064v.039z\"\n                    id=\"rect4632-6\"\n                    stroke-width=\".09\"\n                ></path>\n                <path\n                    d=\"M12.047 23.955l.051-6.093.068-4.264h-.332l.067 4.264.064 6.093h.039z\"\n                    id=\"rect4632-6-0\"\n                    stroke-width=\".09\"\n                ></path>\n                <path\n                    d=\"M23.955 11.953l-6.093-.051-4.264-.068v.332l4.264-.067 6.093-.064v-.039z\"\n                    id=\"rect4632-6-4\"\n                    stroke-width=\".09\"\n                ></path>\n                <path\n                    d=\"M11.953.045l-.051 6.093-.068 4.264h.332l-.067-4.264-.064-6.093h-.039z\"\n                    id=\"rect4632-6-9\"\n                    stroke-width=\".09\"\n                ></path>\n            </g>\n        </svg>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { GlobalEvents } from '@/api';\nimport type { InstanceAPI } from '@/api';\n\nconst iApi = inject<InstanceAPI>('iApi')!;\n\nconst visible = ref<Boolean>(false);\nconst handlers = ref<Array<string>>([]);\n\nonMounted(() => {\n    handlers.value.push(\n        iApi.event.on(GlobalEvents.MAP_EXTENTCHANGE, () => {\n            // display crosshairs if pan/zoom keys are active\n            if (iApi.geo.map.keysActive) {\n                visible.value = true;\n            }\n        })\n    );\n\n    handlers.value.push(\n        iApi.event.on(GlobalEvents.MAP_FOCUS, () => {\n            // display crosshairs only when focused with keyboard controls\n            if (!iApi.geo.map.mouseFocus) {\n                visible.value = true;\n            }\n        })\n    );\n\n    handlers.value.push(\n        iApi.event.on(GlobalEvents.MAP_MOUSEDOWN, () => {\n            visible.value = false;\n        })\n    );\n\n    handlers.value.push(\n        iApi.event.on(GlobalEvents.MAP_BLUR, () => {\n            visible.value = false;\n        })\n    );\n});\n\nonBeforeUnmount(() => {\n    handlers.value.forEach(h => iApi.event.off(h));\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.crosshairs {\n    transform: translate(-50%, -50%);\n}\n</style>\n","import CrosshairsV from './crosshairs.vue';\n\nimport { FixtureInstance } from '@/api';\n\nclass CrosshairsFixture extends FixtureInstance {\n    added(): void {\n        // console.log(`[fixture] ${this.id} added`);\n        const { destroy, el } = this.mount(CrosshairsV, {\n            app: this.$element\n        });\n\n        const innerShell = this.$vApp.$el.getElementsByClassName('inner-shell')[0];\n        innerShell.appendChild(el.childNodes[0]);\n\n        // override the removed method here to get access to scope\n        this.removed = () => {\n            // console.log(`[fixture] ${this.id} removed`);\n            destroy();\n        };\n    }\n}\n\nexport default CrosshairsFixture;\n"],"names":["iApi","inject","visible","ref","handlers","onMounted","GlobalEvents","onBeforeUnmount","h","CrosshairsFixture","FixtureInstance","destroy","el","CrosshairsV"],"mappings":";;;;AA2CM,UAAAA,IAAOC,EAAoB,MAAM,GAEjCC,IAAUC,EAAa,EAAK,GAC5BC,IAAWD,EAAmB,CAAA,CAAE;AAEtC,WAAAE,EAAU,MAAM;AACZ,MAAAD,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,kBAAkB,MAAM;AAE3C,UAAAN,EAAK,IAAI,IAAI,eACbE,EAAQ,QAAQ;AAAA,QACpB,CACH;AAAA,MAAA,GAGLE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,WAAW,MAAM;AAExC,UAAKN,EAAK,IAAI,IAAI,eACdE,EAAQ,QAAQ;AAAA,QACpB,CACH;AAAA,MAAA,GAGLE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,eAAe,MAAM;AAC5C,UAAAJ,EAAQ,QAAQ;AAAA,QAAA,CACnB;AAAA,MAAA,GAGLE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,UAAU,MAAM;AACvC,UAAAJ,EAAQ,QAAQ;AAAA,QAAA,CACnB;AAAA,MAAA;AAAA,IACL,CACH,GAEDK,EAAgB,MAAM;AAClB,MAAAH,EAAS,MAAM,QAAQ,CAAAI,MAAKR,EAAK,MAAM,IAAIQ,CAAC,CAAC;AAAA,IAAA,CAChD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9ED,MAAMC,UAA0BC,EAAgB;AAAA,EAC5C,QAAc;AAEV,UAAM,EAAE,SAAAC,GAAS,IAAAC,EAAA,IAAO,KAAK,MAAMC,GAAa;AAAA,MAC5C,KAAK,KAAK;AAAA,IAAA,CACb;AAGD,IADmB,KAAK,MAAM,IAAI,uBAAuB,aAAa,EAAE,CAAC,EAC9D,YAAYD,EAAG,WAAW,CAAC,CAAC,GAGvC,KAAK,UAAU,MAAM;AAET,MAAAD;IAAA;AAAA,EAEhB;AACJ;"}