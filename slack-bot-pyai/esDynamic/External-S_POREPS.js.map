{"version":3,"file":"External-S_POREPS.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeFormatId as n,getFilenameFormatId as a}from\"../../../layers/support/infoFor3D.js\";class i{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class o{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function u(t){return p(t?.source)}function c(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof i))}const f=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,l=/\\.(gltf|glb)/i;function p(t){if(!t)return!1;if(Array.isArray(t)){return t.some(m)}return m(t)}function m(t){if(t instanceof File){const{type:r,name:e}=t;return f.test(r)||l.test(e)}return f.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){if(!t)return!1;const{source:e}=t;return g(e,r)}function y(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(c(e)&&c(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function g(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>b(t,r)))}return b(t,r)}function b(t,r){return t instanceof i&&t.isOnService(r)}function N(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,r)??a(t.assetName,r)}function A(t){return Array.isArray(t)?t:[t]}function v(t){return!!t.original}export{i as ServiceAsset,o as ServiceAssetPart,N as assetFormatId,b as assetIsOnService,h as externalIsOnService,A as externalSourceToMultiPart,y as externalSourcesAreEqual,m as isDisplayAsset,u as isDisplayExternal,p as isDisplaySource,v as isOriginalExternal,g as sourceIsOnService};\n"],"names":["i","t","r","e","s","o","u","p","c","f","m","h","g","y","n","b","N","a","A","v"],"mappings":"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","x_google_ignoreList":[0]}