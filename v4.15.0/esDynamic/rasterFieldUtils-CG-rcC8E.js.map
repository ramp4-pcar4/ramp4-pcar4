{"version":3,"file":"rasterFieldUtils-CG-rcC8E.js","sources":["../../node_modules/@arcgis/core/layers/support/rasterFieldUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"./Field.js\";const a=\"Raster.\",n=\"Raster.Dim.\",t=\".Max\",i={servicePixelValue:\"Raster.ServicePixelValue\",rawServicePixelValue:\"Raster.ServicePixelValue.Raw\",itemPixelValue:\"Raster.ItemPixelValue\",magnitude:\"Raster.Magnitude\",direction:\"Raster.Direction\",variable:\"Raster.Variable\"},r=new Map([[\"quarters\",\"Quarter\"],[\"months\",\"Month\"],[\"weeks\",\"Week of the year\"],[\"days\",\"Day of the year\"]]);function l(a,n){return new e({name:a,alias:n,domain:null,editable:!1,length:50,type:\"string\"})}function s(a,n){return new e({name:a,alias:n,domain:null,editable:!1,type:\"double\"})}function u(a,n){return new e({name:a,alias:n,domain:null,editable:!1,type:\"date\"})}function o(e){return l(i.servicePixelValue,e??\"Service Pixel Value\")}function c(e){return l(i.rawServicePixelValue,e??\"Raw Service Pixel Value\")}function m(){return l(i.itemPixelValue,\"Item Pixel Value\")}function f(e){return l(`${i.servicePixelValue}.${e}`,e)}function d(e){return s(`${i.magnitude}`,\"Magnitude\"+(e?` (${e})`:\"\"))}function $(){return s(`${i.direction}`,\"Direction (Â°)\")}function v(e){return e.fields.filter(e=>\"oid\"!==e.type&&\"value\"!==e.name.toLowerCase()).map(e=>{const n=e.clone();return n.name=`${a}${e.name}`,n})}function p(e){const a=new Set,r=new Set,o=new Map;e.variables.forEach(({dimensions:e})=>{e.forEach(e=>{if(e.recurring)o.set(e.name,e.unit);else{const n=\"ISO8601\"===e.unit?.trim()||\"stdtime\"===e.name?.trim()?.toLowerCase()?a:r;n.add(e.name),e.hasRanges&&n.add(`${e.name}${t}`)}})});return[l(i.variable,\"Variable\"),...[...a].map(e=>u(`${n}${e}`,x(e))),...[...r].map(e=>s(`${n}${e}`,x(e))),...[...o].map(([e,a])=>s(`${n}${e}`,h(e,a)))]}function h(e,a){return a=a?.toLowerCase(),a&&r.has(a)?r.get(a):x(e)}function x(e){const a=e.endsWith(t),n=a?e.slice(0,-4):e,i=\"StdTime\"===n?\"Standard Time\":\"StdZ\"===n?\"Standard Z\":n;return a?`${i} Max`:i}function w(e,a){return a?new Date(e):e}function V(e,a,r){r?.length&&(a[i.variable]=r[0].variableName,r.forEach(({dimensionName:i,values:r})=>{if(i&&r?.length){const l=`${n}${i}`,s=e.find(({name:e})=>e===l);if(!s)return;const u=\"date\"===s.type,o=r[0];if(Array.isArray(o)){if(a[`${n}${i}`]=w(o[0],u),null!=o[1]){const r=`${n}${i}${t}`;if(e.some(({name:e})=>e===r)){const e=w(o[1],u);a[r]=e}}}else a[`${n}${i}`]=w(o,u)}}))}function b(e,a){if(a.pixelType.startsWith(\"f\")&&e.forEach(({format:e,fieldName:a})=>{e&&a&&/^raster\\.(item|service)pixelvalue/i.test(a)&&(e.places=2)}),a.multidimensionalInfo){const i=a.multidimensionalInfo.variables.flatMap(({dimensions:e})=>e);e.forEach(({format:e,fieldName:a})=>{if(e&&a?.startsWith(n)){const r=a.slice(n.length),l=`${r}${t}`,s=i.find(({name:e})=>e===r||e===l);s?.values?.every(e=>Number.isInteger(e))&&(e.places=0)}})}}export{V as addMultidimensionalFieldValues,i as commonRasterFieldNames,$ as getDirectionField,m as getItemPixelValueField,d as getMagnitudeField,p as getMultidimensionalFields,f as getProcessedServicePixelValueField,v as getRasterAttributeTableFields,c as getRawServicePixelValueField,o as getServicePixelValueField,n as rasterDimensionFieldPrefix,a as rasterFieldPrefix,b as setDefaultRasterFieldFormats};\n"],"names":["a","n","t","i","r","l","e","s","u","o","c","m","f","d","$","v","p","x","h","w","V","b"],"mappings":"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","x_google_ignoreList":[0]}