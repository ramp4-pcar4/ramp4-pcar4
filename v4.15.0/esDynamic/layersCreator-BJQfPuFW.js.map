{"version":3,"file":"layersCreator-BJQfPuFW.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import has from\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import y from\"../../portal/PortalItem.js\";import{isMapNotesLayer as t,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function l(e,r,a){if(!r)return;const y=r.map(e=>f(e,a)),t=await Promise.allSettled(y);for(const i of t)\"rejected\"===i.status||i.value&&e.add(i.value)}const s={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GaussianSplatLayer:\"GaussianSplatLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",Object3DTilesLayer:\"UnsupportedLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",KML:\"KMLLayer\",LineOfSightLayer:\"LineOfSightLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",PointCloudLayer:\"PointCloudLayer\",RasterDataLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",ViewshedLayer:\"ViewshedLayer\",Voxel:\"VoxelLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},c={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISImageServiceLayer:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",WebTiledLayer:\"WebTileLayer\"},u={IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\"},d={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISVideoLayer:\"VideoLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"KnowledgeGraphLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",get ParquetLayer(){return has(\"parquetlayer-persistence-enabled\")?\"ParquetLayer\":\"UnsupportedLayer\"},SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},I={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"SubtypeGroupLayer\"},g={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},m={...d,LinkChartLayer:\"LinkChartLayer\"},T={...I},G={...g};async function f(e,r){return M(await b(e,r),e,r)}async function M(e,r,a){const y=new e;return y.read(r,a.context),\"group\"===y.type&&(\"GroupLayer\"===r.layerType?await C(y,r,a):w(r)?h(y,r,a.context):A(r)&&await W(y,r,a.context)),await o(y,a.context),y}async function b(e,o){const l=o.context,s=v(l);let c=e.layerType||e.type;!c&&o?.defaultLayerType&&(c=o.defaultLayerType);const p=s[c];let S=p?a[p]:a.UnknownLayer;if(w(e)){const t=l?.portal;if(e.itemId){const i=new y({id:e.itemId,portal:t});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===c?t(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===c&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||w(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function w(e){return\"Feature Collection\"===e.type}function v(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap-base-layers\":r=S;break;case\"basemap-ground-layers\":r=u;break;case\"ground\":r=c;break;case\"tables\":r=p;break;default:r=s}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap-base-layers\":r=G;break;case\"tables\":r=T;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap-base-layers\":r=g;break;case\"tables\":r=I;break;default:r=d}}return r}async function C(r,a,y){const t=new e,i=l(t,Array.isArray(a.layers)?a.layers:[],y);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(t),r}catch(L){r.destroy();for(const e of t)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new y({id:r.itemId,portal:a?.portal}),e.when(()=>{const y=y=>{const t=y.layerId;F(y,e,r,t,a);const i=r.featureCollection?.layers?.[t];i&&y.read(i,a)};e.layers?.forEach(y),e.tables?.forEach(y)}))}async function W(e,r,y){const t=a.FeatureLayer,i=await t(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map((a,t)=>{const L=new i;L.read(a,y);const o={...y,ignoreDefaults:!0};return F(L,e,r,t,o),null!=n&&L.read({showLegend:n},o),L});e.layers.addMany(o??[])}function F(e,r,a,y,t){e.read({id:`${r.id}-sublayer-${y}`,visibility:a.visibleLayers?.includes(y)??!0},t)}export{C as populateGroupLayer,l as populateOperationalLayers};\n"],"names":["e","t","r","n","l","a","y","f","i","s","c","p","S","u","d","has","I","g","m","T","G","M","b","C","w","h","A","W","o","v","L","F"],"mappings":"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","x_google_ignoreList":[0,1]}