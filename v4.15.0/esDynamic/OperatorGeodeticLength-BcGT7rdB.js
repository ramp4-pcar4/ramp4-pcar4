import{es as d,et as S}from"./main-pOgmbpmS.js";import{b as E,j as G,a as x,f as P,x as T}from"./Point2D-BVUQyGsf.js";import{w}from"./OperatorShapePreservingLength-DMKTihyZ.js";import{H as v,J as C,b as D,m as X,A as b,T as q,q as L,Z as Y,C as A,D as I}from"./ProjectionTransformation-Dhp-B94n.js";class _{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,n,l){return!1}canAccelerateGeometry(t){return!1}execute(t,n,l,o){if(l===4)return new w().execute(t,n,o);if(n.getCoordinateSystemType()===0&&E(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const s=n.getGCS(),r=v();s.querySpheroidData(r);const c=r.majorSemiAxis,u=r.e2,m=s.getUnit().getUnitToBaseFactor();let e;const a=t.getGeometryType();if(a===x.enumPolygon?e=t.getBoundary():a===x.enumEnvelope?e=C(t):P(a)?(e=new D({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new X().execute(e,0,n.getTolerance(0),0,o)),s!==n){const i=n.getSRToGCSTransform();if(n.isPannable()){e=b(e,n),a===x.enumPolyline&&e===t&&(e=t.clone());const f=new T;n.getPannableExtent().queryIntervalX(f);for(let g=0,h=e.getPointCount();g<h;g++){const y=e.getXY(g);y.x=q(y.x,f),e.setXY(g,y)}}const p=e.createInstance();e=Y(i,e,p,o)?p:new L().execute(e,i,o)}return this._ExecuteMultiPathGeodeticLength(e,l,c,u,m)}_ExecuteMultiPathGeodeticLength(t,n,l,o,s){const r={stack:[],error:void 0,hasError:!1};try{const c=d(r,new A,!1);let u=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),a=e.getStartXY(),i=e.getEndXY();a.scale(s),i.scale(s),I.geodeticDistance(l,o,a.x,a.y,i.x,i.y,c,null,null,n),u+=c.val}return u}catch(c){r.error=c,r.hasError=!0}finally{S(r)}}}export{_ as OperatorGeodeticLength};
