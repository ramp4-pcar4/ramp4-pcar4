{"version":3,"file":"featuresetstring-DbYrtsaM.js","sources":["../../node_modules/@arcgis/core/arcade/functions/featuresetstring.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport n from\"../Dictionary.js\";import{ArcadeExecutionError as a}from\"../executionError.js\";import{B as e,k as t,S as r,u as o,m as i,a3 as c,W as s,K as d,U as u,a4 as m,T as f,a5 as l,J as y,t as v,V as w}from\"../../chunks/languageUtils.js\";import{layerFieldEsriConstants as p}from\"../featureset/support/shared.js\";function h(a,e){return a&&a.domain?\"coded-value\"===a.domain.type||\"codedValue\"===a.domain.type?n.convertObjectToArcadeDictionary({type:\"codedValue\",name:a.domain.name,dataType:p[a.field.type],codedValues:a.domain.codedValues.map(n=>({name:n.name,code:n.code}))},d(e)):n.convertObjectToArcadeDictionary({type:\"range\",name:a.domain.name,dataType:p[a.field.type],min:a.domain.minValue,max:a.domain.maxValue},d(e)):null}function T(p){\"async\"===p.mode&&(p.functions.domain=function(n,s){return p.standardFunctionAsync(n,s,async(d,u,m)=>{if(e(m,2,3,n,s),t(m[0])){return h(r(m[0],o(m[1]),void 0===m[2]?void 0:m[2]),n)}if(i(m[0])){await m[0]._ensureLoaded();return h(c(o(m[1]),m[0],null,void 0===m[2]?void 0:m[2]),n)}throw new a(n,\"InvalidParameter\",s)})},p.functions.subtypes=function(r,o){return p.standardFunctionAsync(r,o,async(c,u,m)=>{if(e(m,1,1,r,o),t(m[0])){const a=s(m[0]);return a?n.convertObjectToArcadeDictionary(a,d(r)):null}if(i(m[0])){await m[0]._ensureLoaded();const a=m[0].subtypeMetaData();return a?n.convertObjectToArcadeDictionary(a,d(r)):null}throw new a(r,\"InvalidParameter\",o)})},p.functions.domainname=function(n,r){return p.standardFunctionAsync(n,r,async(s,d,f)=>{if(e(f,2,4,n,r),t(f[0]))return u(f[0],o(f[1]),f[2],void 0===f[3]?void 0:f[3]);if(i(f[0])){await f[0]._ensureLoaded();const n=c(o(f[1]),f[0],null,void 0===f[3]?void 0:f[3]);return m(n,f[2])}throw new a(n,\"InvalidParameter\",r)})},p.signatures.push({name:\"domainname\",min:2,max:4}),p.functions.domaincode=function(n,r){return p.standardFunctionAsync(n,r,async(s,d,u)=>{if(e(u,2,4,n,r),t(u[0]))return f(u[0],o(u[1]),u[2],void 0===u[3]?void 0:u[3]);if(i(u[0])){await u[0]._ensureLoaded();const n=c(o(u[1]),u[0],null,void 0===u[3]?void 0:u[3]);return l(n,u[2])}throw new a(n,\"InvalidParameter\",r)})},p.signatures.push({name:\"domaincode\",min:2,max:4}),p.functions.text=function(n,t){return p.standardFunctionAsync(n,t,async(r,o,c)=>{if(e(c,1,2,n,t),i(c[0])){const e=y(c[1],\"\");if(\"\"===e)return c[0].castToText();if(\"schema\"===e.toLowerCase())return c[0].convertToText(\"schema\",r.abortSignal);if(\"featureset\"===e.toLowerCase())return c[0].convertToText(\"featureset\",r.abortSignal);throw new a(n,\"InvalidParameter\",t)}return v(c[0],c[1])})},p.functions.gdbversion=function(n,r){return p.standardFunctionAsync(n,r,async(o,c,s)=>{if(e(s,1,1,n,r),t(s[0]))return s[0].gdbVersion();if(i(s[0])){return(await s[0].load()).gdbVersion}throw new a(n,\"InvalidParameter\",r)})},p.functions.schema=function(r,o){return p.standardFunctionAsync(r,o,async(c,s,u)=>{if(e(u,1,1,r,o),i(u[0]))return await u[0].load(),n.convertObjectToArcadeDictionary(u[0].schema(),d(r));if(t(u[0])){const a=w(u[0]);return a?n.convertObjectToArcadeDictionary(a,d(r)):null}throw new a(r,\"InvalidParameter\",o)})})}export{T as registerFunctions};\n"],"names":["h","a","n","p","d","T","s","u","m","e","t","r","o","i","c","f","l","y","v","w"],"mappings":";;;AAI6T,SAASA,EAAEC,GAAE,GAAE;AAAC,SAAOA,KAAGA,EAAE,SAAuBA,EAAE,OAAO,SAAzB,iBAA8CA,EAAE,OAAO,SAAxB,eAA6BC,EAAE,gCAAgC,EAAC,MAAK,cAAa,MAAKD,EAAE,OAAO,MAAK,UAASE,EAAEF,EAAE,MAAM,IAAI,GAAE,aAAYA,EAAE,OAAO,YAAY,IAAI,CAAAC,OAAI,EAAC,MAAKA,EAAE,MAAK,MAAKA,EAAE,KAAI,EAAE,EAAC,GAAEE,EAAE,CAAC,CAAC,IAAEF,EAAE,gCAAgC,EAAC,MAAK,SAAQ,MAAKD,EAAE,OAAO,MAAK,UAASE,EAAEF,EAAE,MAAM,IAAI,GAAE,KAAIA,EAAE,OAAO,UAAS,KAAIA,EAAE,OAAO,SAAQ,GAAEG,EAAE,CAAC,CAAC,IAAE;AAAI;AAAC,SAASC,EAAEF,GAAE;AAAC,EAAUA,EAAE,SAAZ,YAAmBA,EAAE,UAAU,SAAO,SAASD,GAAEI,GAAE;AAAC,WAAOH,EAAE,sBAAsBD,GAAEI,GAAE,OAAMF,GAAEG,GAAEC,MAAI;AAAC,UAAGC,EAAED,GAAE,GAAE,GAAEN,GAAEI,CAAC,GAAEI,EAAEF,EAAE,CAAC,CAAC;AAAG,eAAOR,EAAEW,EAAEH,EAAE,CAAC,GAAEI,EAAEJ,EAAE,CAAC,CAAC,GAAWA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC,GAAEN,CAAC;AAAE,UAAGW,EAAEL,EAAE,CAAC,CAAC;AAAG,qBAAMA,EAAE,CAAC,EAAE,cAAa,GAAUR,EAAEc,EAAEF,EAAEJ,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,GAAE,MAAcA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC,GAAEN,CAAC;AAAE,YAAM,IAAID,EAAEC,GAAE,oBAAmBI,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAEH,EAAE,UAAU,WAAS,SAASQ,GAAEC,GAAE;AAAC,WAAOT,EAAE,sBAAsBQ,GAAEC,GAAE,OAAME,GAAEP,GAAEC,MAAI;AAAC,UAAGC,EAAED,GAAE,GAAE,GAAEG,GAAEC,CAAC,GAAEF,EAAEF,EAAE,CAAC,CAAC,GAAE;AAAC,cAAMP,IAAEK,EAAEE,EAAE,CAAC,CAAC;AAAE,eAAOP,IAAEC,EAAE,gCAAgCD,GAAEG,EAAEO,CAAC,CAAC,IAAE;AAAA,MAAI;AAAC,UAAGE,EAAEL,EAAE,CAAC,CAAC,GAAE;AAAC,cAAMA,EAAE,CAAC,EAAE,cAAa;AAAG,cAAMP,IAAEO,EAAE,CAAC,EAAE,gBAAe;AAAG,eAAOP,IAAEC,EAAE,gCAAgCD,GAAEG,EAAEO,CAAC,CAAC,IAAE;AAAA,MAAI;AAAC,YAAM,IAAIV,EAAEU,GAAE,oBAAmBC,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAET,EAAE,UAAU,aAAW,SAASD,GAAES,GAAE;AAAC,WAAOR,EAAE,sBAAsBD,GAAES,GAAE,OAAML,GAAEF,GAAEW,MAAI;AAAC,UAAGN,EAAEM,GAAE,GAAE,GAAEb,GAAES,CAAC,GAAED,EAAEK,EAAE,CAAC,CAAC,EAAE,QAAOR,EAAEQ,EAAE,CAAC,GAAEH,EAAEG,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,GAAWA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC;AAAE,UAAGF,EAAEE,EAAE,CAAC,CAAC,GAAE;AAAC,cAAMA,EAAE,CAAC,EAAE,cAAa;AAAG,cAAMb,IAAEY,EAAEF,EAAEG,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,GAAE,MAAcA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC;AAAE,eAAOP,EAAEN,GAAEa,EAAE,CAAC,CAAC;AAAA,MAAC;AAAC,YAAM,IAAId,EAAEC,GAAE,oBAAmBS,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAER,EAAE,WAAW,KAAK,EAAC,MAAK,cAAa,KAAI,GAAE,KAAI,EAAC,CAAC,GAAEA,EAAE,UAAU,aAAW,SAASD,GAAES,GAAE;AAAC,WAAOR,EAAE,sBAAsBD,GAAES,GAAE,OAAML,GAAEF,GAAEG,MAAI;AAAC,UAAGE,EAAEF,GAAE,GAAE,GAAEL,GAAES,CAAC,GAAED,EAAEH,EAAE,CAAC,CAAC,EAAE,QAAOQ,EAAER,EAAE,CAAC,GAAEK,EAAEL,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,GAAWA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC;AAAE,UAAGM,EAAEN,EAAE,CAAC,CAAC,GAAE;AAAC,cAAMA,EAAE,CAAC,EAAE,cAAa;AAAG,cAAML,IAAEY,EAAEF,EAAEL,EAAE,CAAC,CAAC,GAAEA,EAAE,CAAC,GAAE,MAAcA,EAAE,CAAC,MAAZ,SAAc,SAAOA,EAAE,CAAC,CAAC;AAAE,eAAOS,EAAEd,GAAEK,EAAE,CAAC,CAAC;AAAA,MAAC;AAAC,YAAM,IAAIN,EAAEC,GAAE,oBAAmBS,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAER,EAAE,WAAW,KAAK,EAAC,MAAK,cAAa,KAAI,GAAE,KAAI,EAAC,CAAC,GAAEA,EAAE,UAAU,OAAK,SAASD,GAAEQ,GAAE;AAAC,WAAOP,EAAE,sBAAsBD,GAAEQ,GAAE,OAAMC,GAAEC,GAAEE,MAAI;AAAC,UAAGL,EAAEK,GAAE,GAAE,GAAEZ,GAAEQ,CAAC,GAAEG,EAAEC,EAAE,CAAC,CAAC,GAAE;AAAC,cAAML,IAAEQ,EAAEH,EAAE,CAAC,GAAE,EAAE;AAAE,YAAQL,MAAL,GAAO,QAAOK,EAAE,CAAC,EAAE,WAAU;AAAG,YAAcL,EAAE,YAAW,MAAxB,SAA2B,QAAOK,EAAE,CAAC,EAAE,cAAc,UAASH,EAAE,WAAW;AAAE,YAAkBF,EAAE,kBAAjB,aAA+B,QAAOK,EAAE,CAAC,EAAE,cAAc,cAAaH,EAAE,WAAW;AAAE,cAAM,IAAIV,EAAEC,GAAE,oBAAmBQ,CAAC;AAAA,MAAC;AAAC,aAAOQ,EAAEJ,EAAE,CAAC,GAAEA,EAAE,CAAC,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAEX,EAAE,UAAU,aAAW,SAASD,GAAES,GAAE;AAAC,WAAOR,EAAE,sBAAsBD,GAAES,GAAE,OAAMC,GAAEE,GAAER,MAAI;AAAC,UAAGG,EAAEH,GAAE,GAAE,GAAEJ,GAAES,CAAC,GAAED,EAAEJ,EAAE,CAAC,CAAC,EAAE,QAAOA,EAAE,CAAC,EAAE,WAAU;AAAG,UAAGO,EAAEP,EAAE,CAAC,CAAC;AAAG,gBAAO,MAAMA,EAAE,CAAC,EAAE,KAAI,GAAI;AAAW,YAAM,IAAIL,EAAEC,GAAE,oBAAmBS,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC,GAAER,EAAE,UAAU,SAAO,SAASQ,GAAEC,GAAE;AAAC,WAAOT,EAAE,sBAAsBQ,GAAEC,GAAE,OAAME,GAAE,GAAEP,MAAI;AAAC,UAAGE,EAAEF,GAAE,GAAE,GAAEI,GAAEC,CAAC,GAAEC,EAAEN,EAAE,CAAC,CAAC,EAAE,QAAO,MAAMA,EAAE,CAAC,EAAE,KAAI,GAAGL,EAAE,gCAAgCK,EAAE,CAAC,EAAE,OAAM,GAAGH,EAAEO,CAAC,CAAC;AAAE,UAAGD,EAAEH,EAAE,CAAC,CAAC,GAAE;AAAC,cAAMN,IAAEkB,EAAEZ,EAAE,CAAC,CAAC;AAAE,eAAON,IAAEC,EAAE,gCAAgCD,GAAEG,EAAEO,CAAC,CAAC,IAAE;AAAA,MAAI;AAAC,YAAM,IAAIV,EAAEU,GAAE,oBAAmBC,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC;AAAE;","x_google_ignoreList":[0]}