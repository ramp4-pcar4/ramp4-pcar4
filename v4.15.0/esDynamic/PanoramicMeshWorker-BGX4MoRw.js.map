{"version":3,"file":"PanoramicMeshWorker-BGX4MoRw.js","sources":["../../node_modules/@arcgis/core/widgets/PanoramicViewer/support/PanoramicMeshWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../../core/mathUtils.js\";import r from\"../../../layers/support/PixelBlock.js\";function e({distance:r,yaw:e,horizontalFieldOfView:n,pitch:o,verticalFieldOfView:i,origin:s=[0,0,0],positionLength:a=25}){const f=a-1,l=a*a,c=new Float32Array(2*l),u=new Float64Array(3*l),h=new Float32Array(3*l).fill(0),p=new Uint32Array(f**2*6);for(let w=0,m=0;w<l;w++){const l=Math.floor(w/a),g=w%a,y=1-g/f,A=l/f,b=2*w,d=3*w;c[b]=y,c[b+1]=A;const F=o+i/2-A*i,M=t(e-n/2+y*n),L=t(F),D=Math.sin(L),O=Math.cos(L),j=[D*Math.sin(M),Math.cos(M)*D,-O];u[d]=s[0]+r*j[0],u[d+1]=s[1]+r*j[1],u[d+2]=s[2]+r*j[2],h[d]=-j[0],h[d+1]=-j[1],h[d+2]=-j[2],l!==f&&g!==f&&(p[m++]=w,p[m++]=w+a,p[m++]=w+a+1,p[m++]=w,p[m++]=w+a+1,p[m++]=w+1)}return{result:{position:u,uv:c,normal:h,faces:p},transferList:[u.buffer,c.buffer,h.buffer,p?.buffer]}}function n(t){const e=r.fromJSON(t);e.premultiplyAlpha=!0;const n=e.getAsRGBA(),o=e.width,i=e.height,s=new ImageData(n,o,i);return{result:s,transferList:[s.data.buffer]}}function o({oldDistance:t,newDistance:r,position:e,origin:n=[0,0,0]}){const o=e.length/3;for(let i=0;i<o;i+=3){const o=3*i;e[o]=n[0]+(e[o]-n[0])*(r/t),e[o+1]=n[1]+(e[o+1]-n[1])*(r/t),e[o+2]=n[2]+(e[o+2]-n[2])*(r/t)}return{result:e,transferList:[e.buffer]}}export{n as convertPixelBlockToImageData,e as getFacesWithVertexAttributes,o as recomputePositions};\n"],"names":["e","r","n","o","i","s","a","f","l","c","u","h","p","w","m","g","y","A","b","d","F","t","L","D","O","j"],"mappings":";;AAI0G,SAASA,EAAE,EAAC,UAASC,GAAE,KAAI,GAAE,uBAAsBC,GAAE,OAAMC,GAAE,qBAAoBC,GAAE,QAAOC,IAAE,CAAC,GAAE,GAAE,CAAC,GAAE,gBAAeC,IAAE,GAAE,GAAE;AAAC,QAAMC,IAAED,IAAE,GAAEE,IAAEF,IAAEA,GAAEG,IAAE,IAAI,aAAa,IAAED,CAAC,GAAEE,IAAE,IAAI,aAAa,IAAEF,CAAC,GAAEG,IAAE,IAAI,aAAa,IAAEH,CAAC,EAAE,KAAK,CAAC,GAAEI,IAAE,IAAI,YAAYL,KAAG,IAAE,CAAC;AAAE,WAAQM,IAAE,GAAEC,IAAE,GAAED,IAAEL,GAAEK,KAAI;AAAC,UAAML,IAAE,KAAK,MAAMK,IAAEP,CAAC,GAAES,IAAEF,IAAEP,GAAEU,IAAE,IAAED,IAAER,GAAEU,IAAET,IAAED,GAAEW,IAAE,IAAEL,GAAEM,IAAE,IAAEN;AAAE,IAAAJ,EAAES,CAAC,IAAEF,GAAEP,EAAES,IAAE,CAAC,IAAED;AAAE,UAAMG,IAAEjB,IAAEC,IAAE,IAAEa,IAAEb,GAAE,IAAEiB,EAAE,IAAEnB,IAAE,IAAEc,IAAEd,CAAC,GAAEoB,IAAED,EAAED,CAAC,GAAEG,IAAE,KAAK,IAAID,CAAC,GAAEE,IAAE,KAAK,IAAIF,CAAC,GAAEG,IAAE,CAACF,IAAE,KAAK,IAAI,CAAC,GAAE,KAAK,IAAI,CAAC,IAAEA,GAAE,CAACC,CAAC;AAAE,IAAAd,EAAES,CAAC,IAAEd,EAAE,CAAC,IAAEJ,IAAEwB,EAAE,CAAC,GAAEf,EAAES,IAAE,CAAC,IAAEd,EAAE,CAAC,IAAEJ,IAAEwB,EAAE,CAAC,GAAEf,EAAES,IAAE,CAAC,IAAEd,EAAE,CAAC,IAAEJ,IAAEwB,EAAE,CAAC,GAAEd,EAAEQ,CAAC,IAAE,CAACM,EAAE,CAAC,GAAEd,EAAEQ,IAAE,CAAC,IAAE,CAACM,EAAE,CAAC,GAAEd,EAAEQ,IAAE,CAAC,IAAE,CAACM,EAAE,CAAC,GAAEjB,MAAID,KAAGQ,MAAIR,MAAIK,EAAEE,GAAG,IAAED,GAAED,EAAEE,GAAG,IAAED,IAAEP,GAAEM,EAAEE,GAAG,IAAED,IAAEP,IAAE,GAAEM,EAAEE,GAAG,IAAED,GAAED,EAAEE,GAAG,IAAED,IAAEP,IAAE,GAAEM,EAAEE,GAAG,IAAED,IAAE;AAAA,EAAE;AAAC,SAAM,EAAC,QAAO,EAAC,UAASH,GAAE,IAAGD,GAAE,QAAOE,GAAE,OAAMC,EAAC,GAAE,cAAa,CAACF,EAAE,QAAOD,EAAE,QAAOE,EAAE,QAAOC,GAAG,MAAM,EAAC;AAAC;AAAC,SAASV,EAAEmB,GAAE;AAAC,QAAM,IAAEpB,EAAE,SAASoB,CAAC;AAAE,IAAE,mBAAiB;AAAG,QAAMnB,IAAE,EAAE,UAAS,GAAGC,IAAE,EAAE,OAAMC,IAAE,EAAE,QAAOC,IAAE,IAAI,UAAUH,GAAEC,GAAEC,CAAC;AAAE,SAAM,EAAC,QAAOC,GAAE,cAAa,CAACA,EAAE,KAAK,MAAM,EAAC;AAAC;AAAC,SAASF,EAAE,EAAC,aAAYkB,GAAE,aAAYpB,GAAE,UAASD,GAAE,QAAOE,IAAE,CAAC,GAAE,GAAE,CAAC,EAAC,GAAE;AAAC,QAAMC,IAAEH,EAAE,SAAO;AAAE,WAAQI,IAAE,GAAEA,IAAED,GAAEC,KAAG,GAAE;AAAC,UAAMD,IAAE,IAAEC;AAAE,IAAAJ,EAAEG,CAAC,IAAED,EAAE,CAAC,KAAGF,EAAEG,CAAC,IAAED,EAAE,CAAC,MAAID,IAAEoB,IAAGrB,EAAEG,IAAE,CAAC,IAAED,EAAE,CAAC,KAAGF,EAAEG,IAAE,CAAC,IAAED,EAAE,CAAC,MAAID,IAAEoB,IAAGrB,EAAEG,IAAE,CAAC,IAAED,EAAE,CAAC,KAAGF,EAAEG,IAAE,CAAC,IAAED,EAAE,CAAC,MAAID,IAAEoB;AAAA,EAAE;AAAC,SAAM,EAAC,QAAOrB,GAAE,cAAa,CAACA,EAAE,MAAM,EAAC;AAAC;","x_google_ignoreList":[0]}