import{ci as v}from"./main-pOgmbpmS.js";import{c as V}from"./PixelBlock-DKNwVpro.js";function P({distance:o,yaw:n,horizontalFieldOfView:r,pitch:a,verticalFieldOfView:f,origin:i=[0,0,0],positionLength:t=25}){const h=t-1,w=t*t,g=new Float32Array(2*w),p=new Float64Array(3*w),m=new Float32Array(3*w).fill(0),s=new Uint32Array(h**2*6);for(let e=0,c=0;e<w;e++){const A=Math.floor(e/t),b=e%t,d=1-b/h,y=A/h,F=2*e,l=3*e;g[F]=d,g[F+1]=y;const x=a+f/2-y*f,M=v(n-r/2+d*r),D=v(x),L=Math.sin(D),O=Math.cos(D),u=[L*Math.sin(M),Math.cos(M)*L,-O];p[l]=i[0]+o*u[0],p[l+1]=i[1]+o*u[1],p[l+2]=i[2]+o*u[2],m[l]=-u[0],m[l+1]=-u[1],m[l+2]=-u[2],A!==h&&b!==h&&(s[c++]=e,s[c++]=e+t,s[c++]=e+t+1,s[c++]=e,s[c++]=e+t+1,s[c++]=e+1)}return{result:{position:p,uv:g,normal:m,faces:s},transferList:[p.buffer,g.buffer,m.buffer,s?.buffer]}}function k(o){const n=V.fromJSON(o);n.premultiplyAlpha=!0;const r=n.getAsRGBA(),a=n.width,f=n.height,i=new ImageData(r,a,f);return{result:i,transferList:[i.data.buffer]}}function B({oldDistance:o,newDistance:n,position:r,origin:a=[0,0,0]}){const f=r.length/3;for(let i=0;i<f;i+=3){const t=3*i;r[t]=a[0]+(r[t]-a[0])*(n/o),r[t+1]=a[1]+(r[t+1]-a[1])*(n/o),r[t+2]=a[2]+(r[t+2]-a[2])*(n/o)}return{result:r,transferList:[r.buffer]}}export{k as convertPixelBlockToImageData,P as getFacesWithVertexAttributes,B as recomputePositions};
