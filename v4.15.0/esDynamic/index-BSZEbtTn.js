import"./index-DeSMSad9.js";import"./customElement-BtFgiF0H.js";import{c as te,D as Ae}from"./jsxFactory-CFfRsm5M.js";import{cE as ee,cF as ie,cD as L,cC as T,cG as hi,cO as tt,cH as ne}from"./main-pOgmbpmS.js";import{i as Dt}from"./keyed-DGKiXVHg.js";import{a as st,j as ui}from"./dom-CKwXpsIh.js";import"./index-CGgB_Ahz.js";import"./index-DGDflNpH.js";import"./customElement-DICMDEVC.js";import"./index-CbR_Ojbl.js";import{u as _e,I as Te}from"./interactive-BLRPXmmu.js";import{u as Pe}from"./useCancelable-tD5BFghf.js";import{u as Oe}from"./useT9n-8mQd7-cZ.js";import{u as Le}from"./useSetFocus-DI8P3HW-.js";import{d as Fe}from"./debounce-BgMoWmzF.js";import{c as fi}from"./observers-kiotQAUQ.js";import{b as xt,i as Nt,l as ae,u as pi,c as oe,e as Me}from"./utils2-B-XPxwi3.js";import{n as ke}from"./input-1jLZbBca.js";import{g as gi}from"./guid-Dls486Er.js";function mi(t){return t}function vi(t){return t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}const pt={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},gt={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"},bi=ee`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`;class Ei extends ie{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}static{this.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=bi}handleActionsStartSlotChange(e){this.hasActionsStart=st(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=st(e)}handleContentStartSlotChange(e){this.hasContentStart=st(e)}handleContentEndSlotChange(e){this.hasContentEnd=st(e)}renderActionsStart(){const{hasActionsStart:e}=this;return Dt("actions-start-container",T`<div class=${L(pt.actionsStart)} .hidden=${!e}><slot name=${gt.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return Dt("actions-end-container",T`<div class=${L(pt.actionsEnd)} .hidden=${!e}><slot name=${gt.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return T`<div class=${L(pt.contentStart)} .hidden=${!e}><slot name=${gt.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return T`<div class=${L(pt.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return T`<div class=${L(pt.contentEnd)} .hidden=${!e}><slot name=${gt.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return T`<div class=${L(pt.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}}te("calcite-stack",Ei);function $e(t){if(t==null)return"";if(typeof t=="string")return t;if(Array.isArray(t))return t.map($e).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function yi(t,e=mi){if(t==null)return t;for(const i in t)if(e(t[i],i,t)===!1)break;return t}function Ii(t){return vi($e(t))}const re=(t,e,i)=>{const n=Ii(e),a=new RegExp(n,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const o=(r,s,l)=>{if(r?.constant||r?.filterDisabled)return!0;let c=!1;return yi(r,(h,u)=>{typeof h=="function"||h==null||l&&!l.includes(u)||(Array.isArray(h)||typeof h=="object"&&h!==null?o(h,s)&&(c=!0):s.test(h)&&(c=!0))}),c};return t.filter(r=>o(r,a,i))},wi={container:"container"},Si={search:"search"},Di=ee`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`;class xi extends ie{constructor(){super(...arguments),this.cancelable=Pe()(this),this.filterDebounced=Fe((e,i=!1,n)=>this.updateFiltered(re(this.items??[],e,this.filterProps),i,n),Ae.filter),this.textInput=hi(),this._value="",this.messages=Oe(),this.focusSetter=Le()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=tt({cancelable:!1})}static{this.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=Di}get value(){return this._value}set value(e){const i=this._value;e!==i&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(i=>{this.value=e,this.updateFiltered(re(this.items??[],e,this.filterProps),!1,i)})}async setFocus(e){return this.focusSetter(()=>this.textInput.value,e)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(re(this.items??[],this.value,this.filterProps))}willUpdate(e){(e.has("items")&&(this.hasUpdated||this.items?.length>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){_e(this)}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const i=e.target;this.value=i.value,this.filterDebounced(i.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,i=!1,n){this.filteredItems=e,i&&this.calciteFilterChange.emit(),n?.()}render(){const{disabled:e,scale:i}=this;return Te({disabled:e,children:T`<div class=${L(wi.container)}><label><calcite-input clearable .disabled=${e} .icon=${Si.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${i} type=text .value=${this.value} ${ne(this.textInput)}></calcite-input></label></div>`})}}te("calcite-filter",xi);function Ne(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,n)}return i}function Y(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ne(Object(i),!0).forEach(function(n){Ci(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ne(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function Rt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rt=function(e){return typeof e}:Rt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rt(t)}function Ci(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function V(){return V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},V.apply(this,arguments)}function Ai(t,e){if(t==null)return{};var i={},n=Object.keys(t),a,o;for(o=0;o<n.length;o++)a=n[o],!(e.indexOf(a)>=0)&&(i[a]=t[a]);return i}function _i(t,e){if(t==null)return{};var i=Ai(t,e),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var Ti="1.15.6";function K(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Z=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ct=K(/Edge/i),Re=K(/firefox/i),At=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),le=K(/iP(ad|od|hone)/i),He=K(/chrome/i)&&K(/android/i),Xe={capture:!1,passive:!1};function E(t,e,i){t.addEventListener(e,i,!Z&&Xe)}function b(t,e,i){t.removeEventListener(e,i,!Z&&Xe)}function Ht(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Be(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function X(t,e,i,n){if(t){i=i||document;do{if(e!=null&&(e[0]===">"?t.parentNode===i&&Ht(t,e):Ht(t,e))||n&&t===i)return t;if(t===i)break}while(t=Be(t))}return null}var ze=/\s+/g;function N(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(ze," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(ze," ")}}function f(t,e,i){var n=t&&t.style;if(n){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),e===void 0?i:i[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=i+(typeof i=="string"?"":"px")}}function mt(t,e){var i="";if(typeof t=="string")i=t;else do{var n=f(t,"transform");n&&n!=="none"&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(i)}function Ye(t,e,i){if(t){var n=t.getElementsByTagName(e),a=0,o=n.length;if(i)for(;a<o;a++)i(n[a],a);return n}return[]}function j(){var t=document.scrollingElement;return t||document.documentElement}function x(t,e,i,n,a){if(!(!t.getBoundingClientRect&&t!==window)){var o,r,s,l,c,h,u;if(t!==window&&t.parentNode&&t!==j()?(o=t.getBoundingClientRect(),r=o.top,s=o.left,l=o.bottom,c=o.right,h=o.height,u=o.width):(r=0,s=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||i)&&t!==window&&(a=a||t.parentNode,!Z))do if(a&&a.getBoundingClientRect&&(f(a,"transform")!=="none"||i&&f(a,"position")!=="static")){var I=a.getBoundingClientRect();r-=I.top+parseInt(f(a,"border-top-width")),s-=I.left+parseInt(f(a,"border-left-width")),l=r+o.height,c=s+o.width;break}while(a=a.parentNode);if(n&&t!==window){var m=mt(a||t),v=m&&m.a,y=m&&m.d;m&&(r/=y,s/=v,u/=v,h/=y,l=r+h,c=s+u)}return{top:r,left:s,bottom:l,right:c,width:u,height:h}}}function je(t,e,i){for(var n=et(t,!0),a=x(t)[e];n;){var o=x(n)[i],r=void 0;if(r=a>=o,!r)return n;if(n===j())break;n=et(n,!1)}return!1}function vt(t,e,i,n){for(var a=0,o=0,r=t.children;o<r.length;){if(r[o].style.display!=="none"&&r[o]!==p.ghost&&(n||r[o]!==p.dragged)&&X(r[o],i.draggable,t,!1)){if(a===e)return r[o];a++}o++}return null}function se(t,e){for(var i=t.lastElementChild;i&&(i===p.ghost||f(i,"display")==="none"||e&&!Ht(i,e));)i=i.previousElementSibling;return i||null}function H(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==p.clone&&(!e||Ht(t,e))&&i++;return i}function Ue(t){var e=0,i=0,n=j();if(t)do{var a=mt(t),o=a.a,r=a.d;e+=t.scrollLeft*o,i+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,i]}function Pi(t,e){for(var i in t)if(t.hasOwnProperty(i)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i)}return-1}function et(t,e){if(!t||!t.getBoundingClientRect)return j();var i=t,n=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var a=f(i);if(i.clientWidth<i.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return j();if(n||e)return i;n=!0}}while(i=i.parentNode);return j()}function Oi(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function ce(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var _t;function Ge(t,e){return function(){if(!_t){var i=arguments,n=this;i.length===1?t.call(n,i[0]):t.apply(n,i),_t=setTimeout(function(){_t=void 0},e)}}}function Li(){clearTimeout(_t),_t=void 0}function We(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Ve(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Ke(t,e,i){var n={};return Array.from(t.children).forEach(function(a){var o,r,s,l;if(!(!X(a,e.draggable,t,!1)||a.animated||a===i)){var c=x(a);n.left=Math.min((o=n.left)!==null&&o!==void 0?o:1/0,c.left),n.top=Math.min((r=n.top)!==null&&r!==void 0?r:1/0,c.top),n.right=Math.max((s=n.right)!==null&&s!==void 0?s:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var M="Sortable"+new Date().getTime();function Fi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(f(n,"display")==="none"||n===p.ghost)){t.push({target:n,rect:x(n)});var a=Y({},t[t.length-1].rect);if(n.thisAnimationDuration){var o=mt(n,!0);o&&(a.top-=o.f,a.left-=o.e)}n.fromRect=a}})}},addAnimationState:function(i){t.push(i)},removeAnimationState:function(i){t.splice(Pi(t,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var a=!1,o=0;t.forEach(function(r){var s=0,l=r.target,c=l.fromRect,h=x(l),u=l.prevFromRect,I=l.prevToRect,m=r.rect,v=mt(l,!0);v&&(h.top-=v.f,h.left-=v.e),l.toRect=h,l.thisAnimationDuration&&ce(u,h)&&!ce(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(s=ki(m,u,I,n.options)),ce(h,c)||(l.prevFromRect=c,l.prevToRect=h,s||(s=n.options.animation),n.animate(l,m,h,s)),s&&(a=!0,o=Math.max(o,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(e),a?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),t=[]},animate:function(i,n,a,o){if(o){f(i,"transition",""),f(i,"transform","");var r=mt(this.el),s=r&&r.a,l=r&&r.d,c=(n.left-a.left)/(s||1),h=(n.top-a.top)/(l||1);i.animatingX=!!c,i.animatingY=!!h,f(i,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=Mi(i),f(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),f(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){f(i,"transition",""),f(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Mi(t){return t.offsetWidth}function ki(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}var bt=[],de={initializeByDefault:!0},Tt={mount:function(t){for(var e in de)de.hasOwnProperty(e)&&!(e in t)&&(t[e]=de[e]);bt.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),bt.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var a=t+"Global";bt.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][a]&&e[o.pluginName][a](Y({sortable:e},i)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](Y({sortable:e},i)))})},initializePlugins:function(t,e,i,n){bt.forEach(function(r){var s=r.pluginName;if(!(!t.options[s]&&!r.initializeByDefault)){var l=new r(t,e,t.options);l.sortable=t,l.options=t.options,t[s]=l,V(i,l.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var o=this.modifyOption(t,a,t.options[a]);typeof o<"u"&&(t.options[a]=o)}},getEventProperties:function(t,e){var i={};return bt.forEach(function(n){typeof n.eventProperties=="function"&&V(i,n.eventProperties.call(e[n.pluginName],t))}),i},modifyOption:function(t,e,i){var n;return bt.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(n=a.optionListeners[e].call(t[a.pluginName],i))}),n}};function $i(t){var e=t.sortable,i=t.rootEl,n=t.name,a=t.targetEl,o=t.cloneEl,r=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,u=t.newDraggableIndex,I=t.originalEvent,m=t.putSortable,v=t.extraEventProperties;if(e=e||i&&i[M],!!e){var y,U=e.options,O="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Z&&!Ct?y=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(n,!0,!0)),y.to=r||i,y.from=s||i,y.item=a||i,y.clone=o,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=h,y.newDraggableIndex=u,y.originalEvent=I,y.pullMode=m?m.lastPutMode:void 0;var G=Y(Y({},v),Tt.getEventProperties(n,e));for(var _ in G)y[_]=G[_];i&&i.dispatchEvent(y),U[O]&&U[O].call(e,y)}}var Ni=["evt"],k=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,a=_i(i,Ni);Tt.pluginEvent.bind(p)(t,e,Y({dragEl:d,parentEl:D,ghostEl:g,rootEl:w,nextEl:ct,lastDownEl:Xt,cloneEl:S,cloneHidden:it,dragStarted:Ot,putSortable:A,activeSortable:p.active,originalEvent:n,oldIndex:Et,oldDraggableIndex:Pt,newIndex:R,newDraggableIndex:nt,hideGhostForTarget:ii,unhideGhostForTarget:ni,cloneNowHidden:function(){it=!0},cloneNowShown:function(){it=!1},dispatchSortableEvent:function(o){F({sortable:e,name:o,originalEvent:n})}},a))};function F(t){$i(Y({putSortable:A,cloneEl:S,targetEl:d,rootEl:w,oldIndex:Et,oldDraggableIndex:Pt,newIndex:R,newDraggableIndex:nt},t))}var d,D,g,w,ct,Xt,S,it,Et,R,Pt,nt,Bt,A,yt=!1,zt=!1,Yt=[],dt,B,he,ue,Ze,qe,Ot,It,Lt,Ft=!1,jt=!1,Ut,P,fe=[],pe=!1,Gt=[],Wt=typeof document<"u",Vt=le,Qe=Ct||Z?"cssFloat":"float",Ri=Wt&&!He&&!le&&"draggable"in document.createElement("div"),Je=function(){if(Wt){if(Z)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),ti=function(t,e){var i=f(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=vt(t,0,e),o=vt(t,1,e),r=a&&f(a),s=o&&f(o),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+x(a).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+x(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&r.float&&r.float!=="none"){var h=r.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===h)?"vertical":"horizontal"}return a&&(r.display==="block"||r.display==="flex"||r.display==="table"||r.display==="grid"||l>=n&&i[Qe]==="none"||o&&i[Qe]==="none"&&l+c>n)?"vertical":"horizontal"},Hi=function(t,e,i){var n=i?t.left:t.top,a=i?t.right:t.bottom,o=i?t.width:t.height,r=i?e.left:e.top,s=i?e.right:e.bottom,l=i?e.width:e.height;return n===r||a===s||n+o/2===r+l/2},Xi=function(t,e){var i;return Yt.some(function(n){var a=n[M].options.emptyInsertThreshold;if(!(!a||se(n))){var o=x(n),r=t>=o.left-a&&t<=o.right+a,s=e>=o.top-a&&e<=o.bottom+a;if(r&&s)return i=n}}),i},ei=function(t){function e(a,o){return function(r,s,l,c){var h=r.options.group.name&&s.options.group.name&&r.options.group.name===s.options.group.name;if(a==null&&(o||h))return!0;if(a==null||a===!1)return!1;if(o&&a==="clone")return a;if(typeof a=="function")return e(a(r,s,l,c),o)(r,s,l,c);var u=(o?r:s).options.group.name;return a===!0||typeof a=="string"&&a===u||a.join&&a.indexOf(u)>-1}}var i={},n=t.group;(!n||Rt(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},ii=function(){!Je&&g&&f(g,"display","none")},ni=function(){!Je&&g&&f(g,"display","")};Wt&&!He&&document.addEventListener("click",function(t){if(zt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),zt=!1,!1},!0);var ht=function(t){if(d){t=t.touches?t.touches[0]:t;var e=Xi(t.clientX,t.clientY);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[M]._onDragOver(i)}}},Bi=function(t){d&&d.parentNode[M]._isOutsideThisEl(t.target)};function p(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=V({},e),t[M]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ti(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,r){o.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:p.supportPointer!==!1&&"PointerEvent"in window&&(!At||le),emptyInsertThreshold:5};Tt.initializePlugins(this,t,i);for(var n in i)!(n in e)&&(e[n]=i[n]);ei(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Ri,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?E(t,"pointerdown",this._onTapStart):(E(t,"mousedown",this._onTapStart),E(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(t,"dragover",this),E(t,"dragenter",this)),Yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),V(this,Fi())}p.prototype={constructor:p,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(It=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,a=n.preventOnFilter,o=t.type,r=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(r||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=n.filter;if(Ki(i),!d&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||n.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&At&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=X(s,n.draggable,i,!1),!(s&&s.animated)&&Xt!==s)){if(Et=H(s),Pt=H(s,n.draggable),typeof c=="function"){if(c.call(this,t,s,this)){F({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),k("filter",e,{evt:t}),a&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=X(l,h.trim(),i,!1),h)return F({sortable:e,rootEl:h,name:"filter",targetEl:s,fromEl:i,toEl:i}),k("filter",e,{evt:t}),!0}),c)){a&&t.preventDefault();return}n.handle&&!X(l,n.handle,i,!1)||this._prepareDragStart(t,r,s)}}},_prepareDragStart:function(t,e,i){var n=this,a=n.el,o=n.options,r=a.ownerDocument,s;if(i&&!d&&i.parentNode===a){var l=x(i);if(w=a,d=i,D=d.parentNode,ct=d.nextSibling,Xt=i,Bt=o.group,p.dragged=d,dt={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},Ze=dt.clientX-l.left,qe=dt.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",s=function(){if(k("delayEnded",n,{evt:t}),p.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!Re&&n.nativeDraggable&&(d.draggable=!0),n._triggerDragStart(t,e),F({sortable:n,name:"choose",originalEvent:t}),N(d,o.chosenClass,!0)},o.ignore.split(",").forEach(function(c){Ye(d,c.trim(),ge)}),E(r,"dragover",ht),E(r,"mousemove",ht),E(r,"touchmove",ht),o.supportPointer?(E(r,"pointerup",n._onDrop),!this.nativeDraggable&&E(r,"pointercancel",n._onDrop)):(E(r,"mouseup",n._onDrop),E(r,"touchend",n._onDrop),E(r,"touchcancel",n._onDrop)),Re&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),k("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Ct||Z))){if(p.eventCanceled){this._onDrop();return}o.supportPointer?(E(r,"pointerup",n._disableDelayedDrag),E(r,"pointercancel",n._disableDelayedDrag)):(E(r,"mouseup",n._disableDelayedDrag),E(r,"touchend",n._disableDelayedDrag),E(r,"touchcancel",n._disableDelayedDrag)),E(r,"mousemove",n._delayedDragTouchMoveHandler),E(r,"touchmove",n._delayedDragTouchMoveHandler),o.supportPointer&&E(r,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(s,o.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&ge(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"pointerup",this._disableDelayedDrag),b(t,"pointercancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):e?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(w,"dragstart",this._onDragStart));try{document.selection?Zt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(yt=!1,w&&d){k("dragStarted",this,{evt:e}),this.nativeDraggable&&E(document,"dragover",Bi);var i=this.options;!t&&N(d,i.dragClass,!1),N(d,i.ghostClass,!0),p.active=this,t&&this._appendGhost(),F({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(B){this._lastX=B.clientX,this._lastY=B.clientY,ii();for(var t=document.elementFromPoint(B.clientX,B.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(B.clientX,B.clientY),t!==e);)e=t;if(d.parentNode[M]._isOutsideThisEl(t),e)do{if(e[M]){var i=void 0;if(i=e[M]._onDragOver({clientX:B.clientX,clientY:B.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=Be(e));ni()}},_onTouchMove:function(t){if(dt){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,a=t.touches?t.touches[0]:t,o=g&&mt(g,!0),r=g&&o&&o.a,s=g&&o&&o.d,l=Vt&&P&&Ue(P),c=(a.clientX-dt.clientX+n.x)/(r||1)+(l?l[0]-fe[0]:0)/(r||1),h=(a.clientY-dt.clientY+n.y)/(s||1)+(l?l[1]-fe[1]:0)/(s||1);if(!p.active&&!yt){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(g){o?(o.e+=c-(he||0),o.f+=h-(ue||0)):o={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");f(g,"webkitTransform",u),f(g,"mozTransform",u),f(g,"msTransform",u),f(g,"transform",u),he=c,ue=h,B=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!g){var t=this.options.fallbackOnBody?document.body:w,e=x(d,!0,Vt,!0,t),i=this.options;if(Vt){for(P=t;f(P,"position")==="static"&&f(P,"transform")==="none"&&P!==document;)P=P.parentNode;P!==document.body&&P!==document.documentElement?(P===document&&(P=j()),e.top+=P.scrollTop,e.left+=P.scrollLeft):P=j(),fe=Ue(P)}g=d.cloneNode(!0),N(g,i.ghostClass,!1),N(g,i.fallbackClass,!0),N(g,i.dragClass,!0),f(g,"transition",""),f(g,"transform",""),f(g,"box-sizing","border-box"),f(g,"margin",0),f(g,"top",e.top),f(g,"left",e.left),f(g,"width",e.width),f(g,"height",e.height),f(g,"opacity","0.8"),f(g,"position",Vt?"absolute":"fixed"),f(g,"zIndex","100000"),f(g,"pointerEvents","none"),p.ghost=g,t.appendChild(g),f(g,"transform-origin",Ze/parseInt(g.style.width)*100+"% "+qe/parseInt(g.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,a=i.options;if(k("dragStart",this,{evt:t}),p.eventCanceled){this._onDrop();return}k("setupClone",this),p.eventCanceled||(S=Ve(d),S.removeAttribute("id"),S.draggable=!1,S.style["will-change"]="",this._hideClone(),N(S,this.options.chosenClass,!1),p.clone=S),i.cloneId=Zt(function(){k("clone",i),!p.eventCanceled&&(i.options.removeCloneOnHide||w.insertBefore(S,d),i._hideClone(),F({sortable:i,name:"clone"}))}),!e&&N(d,a.dragClass,!0),e?(zt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(b(document,"mouseup",i._onDrop),b(document,"touchend",i._onDrop),b(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",a.setData&&a.setData.call(i,n,d)),E(document,"drop",i),f(d,"transform","translateZ(0)")),yt=!0,i._dragStartId=Zt(i._dragStarted.bind(i,e,t)),E(document,"selectstart",i),Ot=!0,window.getSelection().removeAllRanges(),At&&f(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,n,a,o,r=this.options,s=r.group,l=p.active,c=Bt===s,h=r.sort,u=A||l,I,m=this,v=!1;if(pe)return;function y(St,ci){k(St,m,Y({evt:t,isOwner:c,axis:I?"vertical":"horizontal",revert:o,dragRect:n,targetRect:a,canSort:h,fromSortable:u,target:i,completed:O,onMove:function(Ce,di){return Kt(w,e,d,n,Ce,x(Ce),t,di)},changed:G},ci))}function U(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==u&&u.captureAnimationState()}function O(St){return y("dragOverCompleted",{insertion:St}),St&&(c?l._hideClone():l._showClone(m),m!==u&&(N(d,A?A.options.ghostClass:l.options.ghostClass,!1),N(d,r.ghostClass,!0)),A!==m&&m!==p.active?A=m:m===p.active&&A&&(A=null),u===m&&(m._ignoreWhileAnimating=i),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(i===d&&!d.animated||i===e&&!i.animated)&&(It=null),!r.dragoverBubble&&!t.rootEl&&i!==document&&(d.parentNode[M]._isOutsideThisEl(t.target),!St&&ht(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function G(){R=H(d),nt=H(d,r.draggable),F({sortable:m,name:"change",toEl:e,newIndex:R,newDraggableIndex:nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=X(i,r.draggable,e,!0),y("dragOver"),p.eventCanceled)return v;if(d.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||m._ignoreWhileAnimating===i)return O(!1);if(zt=!1,l&&!r.disabled&&(c?h||(o=D!==w):A===this||(this.lastPutMode=Bt.checkPull(this,l,d,t))&&s.checkPut(this,l,d,t))){if(I=this._getDirection(t,i)==="vertical",n=x(d),y("dragOverValid"),p.eventCanceled)return v;if(o)return D=w,U(),this._hideClone(),y("revert"),p.eventCanceled||(ct?w.insertBefore(d,ct):w.appendChild(d)),O(!0);var _=se(e,r.draggable);if(!_||Ui(t,I,this)&&!_.animated){if(_===d)return O(!1);if(_&&e===t.target&&(i=_),i&&(a=x(i)),Kt(w,e,d,n,i,a,t,!!i)!==!1)return U(),_&&_.nextSibling?e.insertBefore(d,_.nextSibling):e.appendChild(d),D=e,G(),O(!0)}else if(_&&ji(t,I,this)){var at=vt(e,0,r,!0);if(at===d)return O(!1);if(i=at,a=x(i),Kt(w,e,d,n,i,a,t,!1)!==!1)return U(),e.insertBefore(d,at),D=e,G(),O(!0)}else if(i.parentNode===e){a=x(i);var z=0,ot,wt=d.parentNode!==e,ut=!Hi(d.animated&&d.toRect||n,i.animated&&i.toRect||a,I),$=I?"top":"left",Q=je(i,"top","top")||je(d,"top","top"),$t=Q?Q.scrollTop:void 0;It!==i&&(ot=a[$],Ft=!1,jt=!ut&&r.invertSwap||wt),z=Gi(t,i,a,I,ut?1:r.swapThreshold,r.invertedSwapThreshold==null?r.swapThreshold:r.invertedSwapThreshold,jt,It===i);var W;if(z!==0){var ft=H(d);do ft-=z,W=D.children[ft];while(W&&(f(W,"display")==="none"||W===g))}if(z===0||W===i)return O(!1);It=i,Lt=z;var rt=i.nextElementSibling,J=!1;J=z===1;var lt=Kt(w,e,d,n,i,a,t,J);if(lt!==!1)return(lt===1||lt===-1)&&(J=lt===1),pe=!0,setTimeout(Yi,30),U(),J&&!rt?e.appendChild(d):i.parentNode.insertBefore(d,J?rt:i),Q&&We(Q,0,$t-Q.scrollTop),D=d.parentNode,ot!==void 0&&!jt&&(Ut=Math.abs(ot-x(i)[$])),G(),O(!0)}if(e.contains(d))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",ht),b(document,"mousemove",ht),b(document,"touchmove",ht)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"pointercancel",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(R=H(d),nt=H(d,i.draggable),k("drop",this,{evt:t}),D=d&&d.parentNode,R=H(d),nt=H(d,i.draggable),p.eventCanceled){this._nulling();return}yt=!1,jt=!1,Ft=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),me(this.cloneId),me(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),At&&f(document.body,"user-select",""),f(d,"transform",""),t&&(Ot&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(w===D||A&&A.lastPutMode!=="clone")&&S&&S.parentNode&&S.parentNode.removeChild(S),d&&(this.nativeDraggable&&b(d,"dragend",this),ge(d),d.style["will-change"]="",Ot&&!yt&&N(d,A?A.options.ghostClass:this.options.ghostClass,!1),N(d,this.options.chosenClass,!1),F({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:t}),w!==D?(R>=0&&(F({rootEl:D,name:"add",toEl:D,fromEl:w,originalEvent:t}),F({sortable:this,name:"remove",toEl:D,originalEvent:t}),F({rootEl:D,name:"sort",toEl:D,fromEl:w,originalEvent:t}),F({sortable:this,name:"sort",toEl:D,originalEvent:t})),A&&A.save()):R!==Et&&R>=0&&(F({sortable:this,name:"update",toEl:D,originalEvent:t}),F({sortable:this,name:"sort",toEl:D,originalEvent:t})),p.active&&((R==null||R===-1)&&(R=Et,nt=Pt),F({sortable:this,name:"end",toEl:D,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){k("nulling",this),w=d=D=g=ct=S=Xt=it=dt=B=Ot=R=nt=Et=Pt=It=Lt=A=Bt=p.dragged=p.ghost=p.clone=p.active=null,Gt.forEach(function(t){t.checked=!0}),Gt.length=he=ue=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),zi(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,n=0,a=i.length,o=this.options;n<a;n++)e=i[n],X(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Vi(e));return t},sort:function(t,e){var i={},n=this.el;this.toArray().forEach(function(a,o){var r=n.children[o];X(r,this.options.draggable,n,!1)&&(i[a]=r)},this),e&&this.captureAnimationState(),t.forEach(function(a){i[a]&&(n.removeChild(i[a]),n.appendChild(i[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return X(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var n=Tt.modifyOption(this,t,e);typeof n<"u"?i[t]=n:i[t]=e,t==="group"&&ei(i)},destroy:function(){k("destroy",this);var t=this.el;t[M]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yt.splice(Yt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!it){if(k("hideClone",this),p.eventCanceled)return;f(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),it=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(it){if(k("showClone",this),p.eventCanceled)return;d.parentNode==w&&!this.options.group.revertClone?w.insertBefore(S,d):ct?w.insertBefore(S,ct):w.appendChild(S),this.options.group.revertClone&&this.animate(d,S),f(S,"display",""),it=!1}}};function zi(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Kt(t,e,i,n,a,o,r,s){var l,c=t[M],h=c.options.onMove,u;return window.CustomEvent&&!Z&&!Ct?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=a||e,l.relatedRect=o||x(e),l.willInsertAfter=s,l.originalEvent=r,t.dispatchEvent(l),h&&(u=h.call(c,l,r)),u}function ge(t){t.draggable=!1}function Yi(){pe=!1}function ji(t,e,i){var n=x(vt(i.el,0,i.options,!0)),a=Ke(i.el,i.options,g),o=10;return e?t.clientX<a.left-o||t.clientY<n.top&&t.clientX<n.right:t.clientY<a.top-o||t.clientY<n.bottom&&t.clientX<n.left}function Ui(t,e,i){var n=x(se(i.el,i.options.draggable)),a=Ke(i.el,i.options,g),o=10;return e?t.clientX>a.right+o||t.clientY>n.bottom&&t.clientX>n.left:t.clientY>a.bottom+o||t.clientX>n.right&&t.clientY>n.top}function Gi(t,e,i,n,a,o,r,s){var l=n?t.clientY:t.clientX,c=n?i.height:i.width,h=n?i.top:i.left,u=n?i.bottom:i.right,I=!1;if(!r){if(s&&Ut<c*a){if(!Ft&&(Lt===1?l>h+c*o/2:l<u-c*o/2)&&(Ft=!0),Ft)I=!0;else if(Lt===1?l<h+Ut:l>u-Ut)return-Lt}else if(l>h+c*(1-a)/2&&l<u-c*(1-a)/2)return Wi(e)}return I=I||r,I&&(l<h+c*o/2||l>u-c*o/2)?l>h+c/2?1:-1:0}function Wi(t){return H(d)<H(t)?1:-1}function Vi(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Ki(t){Gt.length=0;for(var e=t.getElementsByTagName("input"),i=e.length;i--;){var n=e[i];n.checked&&Gt.push(n)}}function Zt(t){return setTimeout(t,0)}function me(t){return clearTimeout(t)}Wt&&E(document,"touchmove",function(t){(p.active||yt)&&t.cancelable&&t.preventDefault()}),p.utils={on:E,off:b,css:f,find:Ye,is:function(t,e){return!!X(t,e,t,!1)},extend:Oi,throttle:Ge,closest:X,toggleClass:N,clone:Ve,index:H,nextTick:Zt,cancelNextTick:me,detectDirection:ti,getChild:vt,expando:M},p.get=function(t){return t[M]},p.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(p.utils=Y(Y({},p.utils),n.utils)),Tt.mount(n)})},p.create=function(t,e){return new p(t,e)},p.version=Ti;var C=[],Mt,ve,be=!1,Ee,ye,qt,kt;function Zi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):i.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),ai(),Qt(),Li()},nulling:function(){qt=ve=Mt=be=kt=Ee=ye=null,C.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var n=this,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(a,o);if(qt=e,i||this.options.forceAutoScrollFallback||Ct||Z||At){Ie(e,this.options,r,i);var s=et(r,!0);be&&(!kt||a!==Ee||o!==ye)&&(kt&&ai(),kt=setInterval(function(){var l=et(document.elementFromPoint(a,o),!0);l!==s&&(s=l,Qt()),Ie(e,n.options,l,i)},10),Ee=a,ye=o)}else{if(!this.options.bubbleScroll||et(r,!0)===j()){Qt();return}Ie(e,this.options,et(r,!1),!1)}}},V(t,{pluginName:"scroll",initializeByDefault:!0})}function Qt(){C.forEach(function(t){clearInterval(t.pid)}),C=[]}function ai(){clearInterval(kt)}var Ie=Ge(function(t,e,i,n){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,s=e.scrollSpeed,l=j(),c=!1,h;ve!==i&&(ve=i,Qt(),Mt=e.scroll,h=e.scrollFn,Mt===!0&&(Mt=et(i,!0)));var u=0,I=Mt;do{var m=I,v=x(m),y=v.top,U=v.bottom,O=v.left,G=v.right,_=v.width,at=v.height,z=void 0,ot=void 0,wt=m.scrollWidth,ut=m.scrollHeight,$=f(m),Q=m.scrollLeft,$t=m.scrollTop;m===l?(z=_<wt&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),ot=at<ut&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(z=_<wt&&($.overflowX==="auto"||$.overflowX==="scroll"),ot=at<ut&&($.overflowY==="auto"||$.overflowY==="scroll"));var W=z&&(Math.abs(G-a)<=r&&Q+_<wt)-(Math.abs(O-a)<=r&&!!Q),ft=ot&&(Math.abs(U-o)<=r&&$t+at<ut)-(Math.abs(y-o)<=r&&!!$t);if(!C[u])for(var rt=0;rt<=u;rt++)C[rt]||(C[rt]={});(C[u].vx!=W||C[u].vy!=ft||C[u].el!==m)&&(C[u].el=m,C[u].vx=W,C[u].vy=ft,clearInterval(C[u].pid),(W!=0||ft!=0)&&(c=!0,C[u].pid=setInterval(function(){n&&this.layer===0&&p.active._onTouchMove(qt);var J=C[this.layer].vy?C[this.layer].vy*s:0,lt=C[this.layer].vx?C[this.layer].vx*s:0;typeof h=="function"&&h.call(p.dragged.parentNode[M],lt,J,t,qt,C[this.layer].el)!=="continue"||We(C[this.layer].el,lt,J)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&I!==l&&(I=et(I,!1)));be=c}},30),oi=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,a=t.activeSortable,o=t.dispatchSortableEvent,r=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=i||a;r();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(h)&&(o("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function we(){}we.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=vt(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:oi},V(we,{pluginName:"revertOnSpill"});function Se(){}Se.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,n=i||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:oi},V(Se,{pluginName:"removeOnSpill"}),p.mount(new Zi),p.mount(Se,we);const Jt=new Set,qi={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function Qi(t){if(li(t))return;ri(t),Jt.add(t);const e="id",{group:i,handleSelector:n,dragSelector:a,sortDisabled:o}=t;t.sortable=p.create(t.el,{dataIdAttr:e,swapThreshold:.5,...qi,...!!a&&{draggable:a},...!!i&&{sort:!o,group:{name:i,...!!t.canPull&&{pull:(r,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPull({toEl:r.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})},...!!t.canPut&&{put:(r,s,l,{newDraggableIndex:c,oldDraggableIndex:h})=>t.canPut({toEl:r.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:h})}}},onMove:({from:r,dragged:s,to:l,related:c})=>{t.onDragMove&&t.onDragMove({fromEl:r,dragEl:s,toEl:l,relatedEl:c})},handle:n,filter:`${n}[disabled]`,onStart:({from:r,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{De.active=!0,Ji(),t.onDragStart({fromEl:r,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onEnd:({from:r,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{De.active=!1,tn(),t.onDragEnd({fromEl:r,dragEl:s,toEl:l,newIndex:c,oldIndex:h})},onSort:({from:r,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:h})=>{t.onDragSort({fromEl:r,dragEl:s,toEl:l,newIndex:c,oldIndex:h})}})}function ri(t){li(t)||(Jt.delete(t),t.sortable?.destroy(),t.sortable=null)}const De={active:!1};function li(t){return t.dragEnabled&&De.active}function Ji(){Array.from(Jt).forEach(t=>t.onGlobalDragStart())}function tn(){Array.from(Jt).forEach(t=>t.onGlobalDragEnd())}const q={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},xe={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},en=ee`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,nn=`${oe}, ${xt}`;class si extends ie{constructor(){super(),this.dragSelector=xt,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=fi("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=Pe()(this),this.updateListItemsDebounced=Fe(this.updateListItems,Ae.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=Oe({blocking:!0}),this.focusSetter=Le()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=tt({cancelable:!1}),this.calciteListChange=tt({cancelable:!1}),this.calciteListDragEnd=tt({cancelable:!1}),this.calciteListDragStart=tt({cancelable:!1}),this.calciteListFilter=tt({cancelable:!1}),this.calciteListMoveHalt=tt({cancelable:!1}),this.calciteListOrderChange=tt({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}static{this.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=en}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(e){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(i=>i.active),e)}emitOrderChangeEvent(e){this.calciteListOrderChange.emit(e)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("canPull")&&this.hasUpdated||e.has("canPut")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){_e(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),ri(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:e,selectionMode:i,interactionMode:n,dragEnabled:a,el:o,filterEl:r,displayMode:s,scale:l,sortDisabled:c,sortHandleMenuItems:h}=this,u=Array.from(this.el.querySelectorAll(xt)),I=o,m=Array.from(I.children).filter(Nt);if(u.forEach(v=>{v.scale=l,v.selectionAppearance=e,v.selectionMode=i,v.interactionMode=n,v.closest(ae)===o&&(v.moveToItems=h.filter(y=>this.validateSortMenuItem({type:"move",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.addToItems=this.sortHandleMenuItems.filter(y=>this.validateSortMenuItem({type:"add",fromEl:I,toEl:y.element,dragEl:v,newIndex:0,oldIndex:m.indexOf(v)})),v.dragHandle=a,v.displayMode=s,v.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=u,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),r&&(r.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(v=>!v.closed&&!v.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(v=>!v.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:i}=this,n=i.findIndex(a=>a.active)-1;i[n]&&this.focusRow(i[n])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:n}=this;n.forEach(a=>{a.active=a===i})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleReorder(e))}handleSortAdd(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleAdd(e))}handleSortMove(e){this.parentListEl||e.defaultPrevented||(e.preventDefault(),this.handleMove(e))}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const i=e.target,{listItems:n,selectionMode:a}=this;i.selected&&(a==="single"||a==="single-persist")&&n.forEach(o=>o.selected=o===i),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:i,detail:n}=e,{focusableItems:a,lastSelectedInfo:o}=this,r=i;if(n.selectMultiple&&o){const s=a.indexOf(r),l=a.indexOf(o.selectedItem),c=Math.min(l,s),h=Math.max(l,s);a.slice(c,h+1).forEach(u=>u.selected=o.selected)}else this.lastSelectedInfo={selectedItem:r,selected:r.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:e,defaultSlotEl:i}=this;e&&(i&&pi(i),Qi(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(e)}setParentList(){this.parentListEl=this.el.parentElement?.closest(ae)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(oe))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=st(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=st(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=st(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(i=>i.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(i=>i.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:i,visibleParents:n}){const a=!n.has(e)&&!i.includes(e);e.filterHidden=a;const o=e.parentElement.closest(nn);o&&(a||n.add(o),this.filterElements({el:o,filteredItems:i,visibleParents:n}))}allParentListItemsExpanded(e){const i=e.parentElement?.closest(xt);if(i){if(!i.expanded)return!1}else return!0;return this.allParentListItemsExpanded(i)}borderItems(){const e=this.visibleItems.filter(i=>!i.filterHidden&&this.allParentListItemsExpanded(i));e.forEach(i=>i.bordered=i!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:i,filterText:n,filterPredicate:a}=this,o=e?.filter(l=>e.every(c=>c===l||!l.contains(c))),r=a?e.filter(a):n?i.map(l=>l.el):e||[],s=new WeakSet;o.forEach(l=>this.filterElements({el:l,filteredItems:r,visibleParents:s})),this.filteredItems=r,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:i,effectiveFilterProps:n}=this;e&&(e.value=i,e.filterProps=n,this.filterAndUpdateData())}setDefaultSlotEl(e){this.defaultSlotEl=e}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:i}=e.currentTarget;this.filterText=i,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(i=>i.contains(e)).map(i=>i.heading)}updateGroupItems(){const{el:e,group:i,scale:n}=this,a=ui(e),o=i?Array.from(a.querySelectorAll(`${ae}[group="${i}"]`)).filter(r=>!r.disabled&&r.dragEnabled):[];this.sortHandleMenuItems=o.map(r=>({element:r,label:r.label??r.id,id:gi()})),Array.from(this.el.querySelectorAll(oe)).forEach(r=>{r.scale=n})}focusRow(e){const{focusableItems:i}=this;e&&(i.forEach(n=>n.active=n===e),e.setFocus())}isNavigable(e){const i=e.parentElement?.closest(xt);return i?i.expanded&&this.isNavigable(i):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:i}=e,n=this.focusableItems.filter(o=>this.isNavigable(o)),a=n.findIndex(o=>o.active);if(i==="ArrowDown"){e.preventDefault();const o=e.target===this.filterEl?0:a+1;n[o]&&this.focusRow(n[o])}else if(i==="ArrowUp"){if(e.preventDefault(),a===0&&this.filterEnabled){this.filterEl.setFocus();return}const o=a-1;n[o]&&this.focusRow(n[o])}else if(i==="Home"){e.preventDefault();const o=n[0];o&&this.focusRow(o)}else if(i==="End"){e.preventDefault();const o=n[n.length-1];o&&this.focusRow(o)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:e,toEl:i,dragEl:n,newIndex:a,oldIndex:o,type:r}){if(!e||!i||i===e||n.contains(i))return!1;const s=e.canPull?.({toEl:i,fromEl:e,dragEl:n,newIndex:a,oldIndex:o})??!0,l=i.canPut?.({toEl:i,fromEl:e,dragEl:n,newIndex:a,oldIndex:o})??!0;return(r==="add"?s==="clone":s===!0)&&l}handleAdd(e){const{addTo:i}=e.detail,n=e.target,a=n?.parentElement,o=i.element,r=Array.from(a.children).filter(Nt).indexOf(n),s=0;if(!this.validateSortMenuItem({type:"add",fromEl:a,toEl:o,dragEl:n,newIndex:s,oldIndex:r}))return;n.sortHandleOpen=!1,this.disconnectObserver();const l=n.cloneNode();o.prepend(l),Me(n),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:n,fromEl:a,toEl:o,newIndex:s,oldIndex:r};this.calciteListOrderChange.emit(c),o.emitOrderChangeEvent(c)}handleMove(e){const{moveTo:i}=e.detail,n=e.target,a=n?.parentElement,o=i.element,r=Array.from(a.children).filter(Nt).indexOf(n),s=0;if(!this.validateSortMenuItem({type:"move",fromEl:a,toEl:o,dragEl:n,newIndex:s,oldIndex:r}))return;n.sortHandleOpen=!1,this.disconnectObserver(),o.prepend(n),Me(n),this.updateListItemsDebounced(),this.connectObserver();const l={dragEl:n,fromEl:a,toEl:o,newIndex:s,oldIndex:r};this.calciteListOrderChange.emit(l),o.emitOrderChangeEvent(l)}handleReorder(e){const{reorder:i}=e.detail,n=e.target,a=n?.parentElement;if(!a)return;n.sortHandleOpen=!1;const o=Array.from(a.children).filter(Nt),r=o.length-1,s=o.indexOf(n);let l=s;switch(i){case"top":l=0;break;case"bottom":l=r;break;case"up":l=s===0?0:s-1;break;case"down":l=s===r?r:s+1;break}this.disconnectObserver();const c=i==="up"||i==="top"?o[l]:o[l].nextSibling;a.insertBefore(n,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:n,fromEl:a,toEl:a,newIndex:l,oldIndex:s})}render(){const{loading:e,label:i,disabled:n,dataForFilter:a,filterEnabled:o,filterPlaceholder:r,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:u}=this;return Te({disabled:this.disabled,children:T`<div class=${L({[q.container]:!0,[q.containerHeight]:this.listItems.length<1&&e})}>${this.dragEnabled?T`<span aria-live=assertive class=${L(q.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?T`<calcite-scrim class=${L(q.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${i||""} class=${L(q.table)} @keydown=${this.handleListKeydown} role=treegrid>${o||c||h?T`<div class=${L(q.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${L(q.stack)}><slot name=${xe.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${gt.actionsStart}></slot><calcite-filter .ariaLabel=${r} .disabled=${n} .filterProps=${u} .items=${a} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${r} .scale=${this.scale} .value=${s} ${ne(this.setFilterEl)}></calcite-filter><slot name=${xe.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${gt.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${L(q.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${ne(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${xe.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:i,parentListEl:n,messages:{_lang:a},numberingSystem:o}=this;return ke.numberFormatOptions={locale:a,numberingSystem:o},n?null:T`<div aria-live=polite class=${L(q.assistiveText)}>${this.hasActiveFilter?Dt("aria-filter-enabled",T`<div>${e.filterEnabled}</div>`):null}${Dt("aria-item-count",T`<div>${e.total.replace("{count}",ke.localize(i.length.toString()))}</div>`)}${i.length?Dt("aria-item-list",T`<ol>${i.map(r=>T`<li>${r.label}</li>`)}</ol>`):null}</div>`}}te("calcite-list",si);export{si as List};
