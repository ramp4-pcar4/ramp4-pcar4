{"version":3,"file":"triangulationUtils-BeYE9ET6.js","sources":["../../node_modules/@arcgis/core/geometry/support/polygonUtils.js","../../node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../core/mathUtils.js\";import{getMetersPerUnitForSR as r,getMetersPerVerticalUnitForSR as o}from\"../../core/unitUtils.js\";import{j as s}from\"../../chunks/vec32.js\";import{getNormal as a,create as n,fromManyPoints as c}from\"./plane.js\";function i(r,o,s){const n=m(e,r,o,s)?a(e):[0,0,1];return Math.abs(n[2])>Math.cos(t(80))?2:Math.abs(n[1])>Math.abs(n[0])?1:0}function m(t,a,n,i){const m=(t=>!Array.isArray(t[0]))(a)?(t,r)=>a[3*t+r]:(t,r)=>a[t][r],e=i?r(i)/o(i):1;return c(t,(t,r)=>s(t,m(r,0)*e,m(r,1)*e,m(r,2)),n)}const e=n();export{m as fitPlane,i as leastSignificantAxis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{isClockwise as t}from\"./coordsUtils.js\";import{doubleSubArray as e,doubleArrayFrom as o,newDoubleArray as r}from\"./DoubleArray.js\";import{compactMeshIndices as s}from\"./Indices.js\";import{leastSignificantAxis as i}from\"./polygonUtils.js\";import{deduplicate as l}from\"./meshUtils/deduplicate.js\";function c(t){const r=h(t.rings,t.hasZ,1,t.spatialReference),i=new Array;let c=0,a=0;for(const o of r.polygons){const t=o.count,l=o.index,f=e(r.position,3*l,3*t),h=o.holeIndices.map(n=>n-l),g=s(n(f,h,3));i.push({position:f,faces:g}),c+=f.length,a+=g.length}const g=f(i,c,a),u=Array.isArray(g.position)?l(g.position,3,{originalIndices:g.faces}):l(g.position.buffer,6,{originalIndices:g.faces});return g.position=o(new Float64Array(u.buffer)),g.faces=u.indices,g}function f(n,t,e){if(1===n.length)return n[0];const o=r(t),i=new Array(e);let l=0,c=0,f=0;for(const r of n){for(let n=0;n<r.position.length;n++)o[l++]=r.position[n];for(const n of r.faces)i[c++]=n+f;f=l/3}return{position:o,faces:s(i)}}function h(n,t,e,o){const s=n.length,i=new Array(s),l=new Array(s),c=new Array(s);let f=0;for(let r=0;r<s;++r)f+=n[r].length;let h=0,u=0,p=0;const d=r(3*f);let m=0;for(let r=s-1;r>=0;r--){const f=n[r],y=1===e&&g(f,t,o);if(y&&1!==s)i[h++]=f;else{let n=f.length;for(let t=0;t<h;++t)n+=i[t].length;const e={index:m,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=f.length,f.length>0&&(c[p++]={index:m,count:f.length}),m=y?a(f,f.length-1,-1,d,m,f.length,t):a(f,0,1,d,m,f.length,t);for(let o=0;o<h;++o){const n=i[o];e.holeIndices[o]=m,e.pathLengths[o+1]=n.length,n.length>0&&(c[p++]={index:m,count:n.length}),m=a(n,0,1,d,m,n.length,t)}h=0,e.count>0&&(l[u++]=e)}}for(let r=0;r<h;++r){const n=i[r];n.length>0&&(c[p++]={index:m,count:n.length}),m=a(n,0,1,d,m,n.length,t)}return l.length=u,c.length=p,{position:d,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i&&s[2]?s[2]:0,t+=e}return r/3}function g(n,e,o){if(!e)return!t(n);const r=n.length-1;switch(i(n,r,o)){case 0:return!t(n,1,2);case 1:return!t(n,0,2);case 2:return!t(n,0,1)}}export{g as isCounterClockwise,h as ringsToTriangulationInfo,c as triangulate};\n"],"names":["i","r","s","n","m","e","a","t","o","c","h","l","f","g","u","p","d","y"],"mappings":"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","x_google_ignoreList":[0,1]}