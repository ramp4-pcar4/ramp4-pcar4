import{_ as e,X as i,Y as p,Z as f,bH as m,cd as j,G as M,i_ as k,l9 as O,ch as C,z as J,a6 as E,a5 as S,bF as x,lE as K,hK as H,s as T,lF as z,bs as _}from"./main-pOgmbpmS.js";import{a as l}from"./layerContainerType-CJrPp4UB.js";import{c as U}from"./ElevationInfo-CYCCxvNt.js";const R={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,ParquetLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},B={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},F={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},X={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GaussianSplatLayer:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-base-layers":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap-ground-layers":{IntegratedMesh3DTilesLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":R,"web-map/basemap-base-layers":B,"web-map/tables":F,"link-chart/operational-layers":{...R,LinkChartLayer:!0},"link-chart/basemap-base-layers":B,"link-chart/tables":F,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let u=class extends f{constructor(r){super(r),this.description=null,this.label=null,this.type=null}};e([i({type:String,json:{write:!0}})],u.prototype,"description",void 0),e([i({type:String,json:{write:!0}})],u.prototype,"label",void 0),e([i()],u.prototype,"type",void 0),u=e([p("esri.tables.elements.AttributeTableElement")],u);const b=u;let g=class extends m(b){constructor(r){super(r),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};e([i({type:["auto"],json:{write:!0}})],g.prototype,"displayType",void 0),e([i({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=e([p("esri.tables.elements.AttributeTableAttachmentElement")],g);const N=g;let c=class extends m(b){constructor(r){super(r),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};e([i({type:String,json:{read:!1,write:!1}})],c.prototype,"description",void 0),e([i({type:String,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"fieldName",void 0),e([i({type:String,json:{read:!1,write:!1}})],c.prototype,"label",void 0),e([i({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],c.prototype,"type",void 0),c=e([p("esri.tables.elements.AttributeTableFieldElement")],c);const W=c;let w=class extends m(b){constructor(r){super(r),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};e([i({type:Number,json:{type:j,write:{enabled:!0,isRequired:!0}}})],w.prototype,"relationshipId",void 0),e([i({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],w.prototype,"type",void 0),w=e([p("esri.tables.elements.AttributeTableRelationshipElement")],w);const D=w,V={base:b,key:"type",typeMap:{attachment:N,field:W,relationship:D}};function Y(r){return{typesWithGroup:{base:b,key:"type",typeMap:{attachment:N,field:W,group:r,relationship:D}},typesWithoutGroup:V}}let L=class extends m(b){constructor(r){super(r),this.elements=null,this.type="group"}clone(){return super.clone()}};e([i({types:[V],json:{name:"attributeTableElements",write:!0}})],L.prototype,"elements",void 0),e([i({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],L.prototype,"type",void 0),L=e([p("esri.tables.elements.AttributeTableGroupElement")],L);const Z=L;let v=class extends m(f){constructor(r){super(r),this.field=null,this.order=null}};e([i({type:String,json:{write:!0}})],v.prototype,"field",void 0),e([i({type:["asc","desc"],json:{write:!0}})],v.prototype,"order",void 0),v=e([p("esri.tables.support.FieldOrder")],v);const Q=v;var A;const ee=Y(Z);let I=A=class extends f{constructor(r){super(r),this.elements=null,this.orderByFields=null}clone(){return new A({elements:M(this.elements),orderByFields:M(this.orderByFields)})}};e([i({types:[ee.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],I.prototype,"elements",void 0),e([i({type:[Q],json:{write:!0}})],I.prototype,"orderByFields",void 0),I=A=e([p("esri.tables.AttributeTableTemplate")],I);const q=I,re={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:l}}},te={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(r,s)=>!s.disablePopup},write:{enabled:!0,writer(r,s,t){s[t]=!r}}}},ie={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:l}}},ae={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:k}}},ne={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:l}}},se={value:null,type:U,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:l}}};function oe(r){return{type:r,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const $={write:{enabled:!0,layerContainerTypes:l},read:!0},h={type:Number,json:{origins:{"web-document":$,"portal-item":{write:{layerContainerTypes:l}}}}},le={...h,json:{...h.json,origins:{"web-document":{...$,write:{enabled:!0,layerContainerTypes:l,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(r,s,t)=>t&&t.origin!=="service"||!s.drawingInfo||s.drawingInfo.transparency===void 0?s.layerDefinition?.drawingInfo&&s.layerDefinition.drawingInfo.transparency!==void 0?O(s.layerDefinition.drawingInfo.transparency):void 0:O(s.drawingInfo.transparency)}}},ye={type:C,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(r,s)=>{const t=C.fromJSON(r);return s.spatialReference!=null&&typeof s.spatialReference=="object"&&(t.spatialReference=J.fromJSON(s.spatialReference)),t}}}},read:!1}},pe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},de={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:l}}},ce={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:l}}},P={json:{write:{ignoreOrigin:!0,layerContainerTypes:l},origins:{"web-map":{read:!1,write:!1}}}},ue={type:q,json:{name:"attributeTableInfo",write:!0}},be=r=>{const s=r;let t=class extends s{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(n,a,o){return o?.portalItem?.type==="Group Layer"?void 0:n}writeListMode(n,a,o,y){(y&&y.layerContainerType==="ground"||n&&H(this,o,{},y))&&(a[o]=n)}writeOperationalLayerType(n,a,o){n&&(a[o]=n)}writeTitle(n,a){a.title=n??"Layer"}readVisibilityTimeExtent(n){return n?x.fromArray(n):null}writeVisibilityTimeExtent(n,a,o,y){n&&y.layerContainerType!=="tables"&&(n.isEmpty?y?.messages&&y.messages.push(new T("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):a[o]=n.toArray())}read(n,a){a&&(a.layer=this),z(this,n,o=>super.read(n,o),a)}write(n,a){if(!this.persistenceEnabled&&!a?.ignorePersistenceEnabled)return null;if(a?.origin){const d=`${a.origin}/${a.layerContainerType||"operational-layers"}`;let G=!!X[d]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&d==="web-scene/operational-layers"&&(G=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&d==="web-map/operational-layers"&&(G=!1),!G)return a.messages?.push(new T("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${d}'`,{layer:this})),null}const o=super.write(n,{...a,layer:this}),y=!!a&&!!a.messages&&!!a.messages.filter(d=>d instanceof T&&d.name==="web-document-write:property-required").length;return _(o?.url)?(a?.messages?.push(new T("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&y?null:o}beforeSave(){}};return e([i({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),e([E("id",["id"])],t.prototype,"readId",null),e([i(P)],t.prototype,"listMode",void 0),e([S("listMode")],t.prototype,"writeListMode",null),e([i({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:l,isRequired:!0}}}}})],t.prototype,"operationalLayerType",void 0),e([S("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),e([i(h)],t.prototype,"opacity",void 0),e([i({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),e([i({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),e([S("title"),S(["web-scene"],"title")],t.prototype,"writeTitle",null),e([i({type:x,json:{origins:{"web-scene":{write:{layerContainerTypes:l}}}}})],t.prototype,"visibilityTimeExtent",void 0),e([E("visibilityTimeExtent")],t.prototype,"readVisibilityTimeExtent",null),e([S(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[j,K]]}})],t.prototype,"writeVisibilityTimeExtent",null),e([i({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:l}}})],t.prototype,"visible",void 0),t=e([p("esri.layers.mixins.OperationalLayer")],t),t};export{ue as I,P as T,le as a,be as b,q as c,ne as d,oe as e,ye as g,de as j,te as l,se as m,ie as p,re as s,pe as u,ce as v,h as w,ae as y};
