{"version":3,"file":"rasterizingUtils-DqyPfNPV.js","sources":["../../node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as o}from\"../../core/floatRGBA.js\";import{nextPowerOfTwo as t}from\"../../core/mathUtils.js\";import{dashRadius as a}from\"./constants.js\";const r=o=>\"vertical\"===o||\"horizontal\"===o||\"cross\"===o||\"esriSFSCross\"===o||\"esriSFSVertical\"===o||\"esriSFSHorizontal\"===o;function e(o,a,e){const i=a.style,n=t(Math.ceil(e)),s=r(i)?8*n:16*n,l=2*n;o.width=s,o.height=s;const h=o.getContext(\"2d\");h.strokeStyle=\"#FFFFFF\",h.lineWidth=n,h.beginPath(),\"vertical\"!==i&&\"cross\"!==i&&\"esriSFSCross\"!==i&&\"esriSFSVertical\"!==i||(h.moveTo(s/2,-l),h.lineTo(s/2,s+l)),\"horizontal\"!==i&&\"cross\"!==i&&\"esriSFSCross\"!==i&&\"esriSFSHorizontal\"!==i||(h.moveTo(-l,s/2),h.lineTo(s+l,s/2)),\"backward-diagonal\"!==i&&\"diagonal-cross\"!==i&&\"esriSFSDiagonalCross\"!==i&&\"esriSFSBackwardDiagonal\"!==i||(h.moveTo(-l,-l),h.lineTo(s+l,s+l),h.moveTo(s-l,-l),h.lineTo(s+l,l),h.moveTo(-l,s-l),h.lineTo(l,s+l)),\"forward-diagonal\"!==i&&\"diagonal-cross\"!==i&&\"esriSFSForwardDiagonal\"!==i&&\"esriSFSDiagonalCross\"!==i||(h.moveTo(s+l,-l),h.lineTo(-l,s+l),h.moveTo(l,-l),h.lineTo(-l,l),h.moveTo(s+l,s-l),h.lineTo(s-l,s+l)),h.stroke();const c=h.getImageData(0,0,o.width,o.height),m=new Uint8Array(c.data);let S;for(let t=0;t<m.length;t+=4)S=m[t+3]/255,m[t]=m[t]*S,m[t+1]=m[t+1]*S,m[t+2]=m[t+2]*S;return[m,o.width,o.height,n]}function i(t,r){const e=\"Butt\"===r,i=\"Square\"===r,n=!e&&!i;t.length%2==1&&(t=[...t,...t]);const s=a,l=2*s;let h=0;for(const o of t)h+=o;const c=Math.round(h*s),m=new Float32Array(c*l),S=.5*s;let F=0,g=0,T=.5,d=!0;for(const o of t){for(F=g,g+=o*s;T<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+T-.5,a=n?(o-s)*(o-s):Math.abs(o-s);m[t]=d?e?Math.max(Math.max(F+S-T,a),Math.max(T-g+S,a)):a:n?Math.min((T-F)*(T-F)+a,(T-g)*(T-g)+a):i?Math.min(Math.max(T-F,a),Math.max(g-T,a)):Math.min(Math.max(T-F+S,a),Math.max(g+S-T,a)),o++}T++}d=!d}const f=m.length,M=new Uint8Array(4*f);for(let a=0;a<f;++a){const t=(n?Math.sqrt(m[a]):m[a])/s;o(t,M,4*a)}return[M,c,l]}export{i as rasterizeDash,e as rasterizeFillStyle};\n"],"names":["r","o","e","a","i","n","t","s","l","h","c","m","S","F","g","T","d","f","M"],"mappings":"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","x_google_ignoreList":[0]}