{"version":3,"file":"interactive-DvjzvdHh.js","sources":["../../node_modules/@esri/calcite-components/dist/components/interactive.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\n * v2.6.0\n */\nimport { Build, h } from '@stencil/core/internal/client/index.js';\n\nfunction getUserAgentData() {\n    return navigator.userAgentData;\n}\nfunction getUserAgentString() {\n    if (!Build.isBrowser) {\n        return \"\";\n    }\n    const uaData = getUserAgentData();\n    return uaData?.brands\n        ? uaData.brands.map(({ brand, version }) => `${brand}/${version}`).join(\" \")\n        : navigator.userAgent;\n}\n\n// ⚠️ browser-sniffing is not a best practice and should be avoided ⚠️\nconst isFirefox = /firefox/i.test(getUserAgentString());\nconst disabledElementToParent = isFirefox\n    ? new WeakMap()\n    : null;\nfunction interceptedClick() {\n    const { disabled } = this;\n    if (!disabled) {\n        HTMLElement.prototype.click.call(this);\n    }\n}\nfunction onPointerDown(event) {\n    const interactiveElement = event.target;\n    if (isFirefox && !disabledElementToParent.get(interactiveElement)) {\n        return;\n    }\n    const { disabled } = interactiveElement;\n    if (disabled) {\n        // prevent click from moving focus on host\n        event.preventDefault();\n    }\n}\nconst nonBubblingWhenDisabledMouseEvents = [\"mousedown\", \"mouseup\", \"click\"];\nfunction onNonBubblingWhenDisabledMouseEvent(event) {\n    const interactiveElement = event.target;\n    if (isFirefox && !disabledElementToParent.get(interactiveElement)) {\n        return;\n    }\n    // prevent disallowed mouse events from being emitted on the disabled host (per https://github.com/whatwg/html/issues/5886)\n    // ⚠ we generally avoid stopping propagation of events, but this is needed to adhere to the intended spec changes above ⚠\n    if (interactiveElement.disabled) {\n        event.stopImmediatePropagation();\n        event.preventDefault();\n    }\n}\nconst captureOnlyOptions = { capture: true };\n/**\n * This helper updates the host element to prevent keyboard interaction on its subtree and sets the appropriate aria attribute for accessibility.\n *\n * This should be used in the `componentDidRender` lifecycle hook.\n *\n * **Notes**\n *\n * this util is not needed for simple components whose root element or elements are an interactive component (custom element or native control). For those cases, set the `disabled` props on the root components instead.\n * technically, users can override `tabindex` and restore keyboard navigation, but this will be considered user error\n *\n * @param component\n */\nfunction updateHostInteraction(component) {\n    if (component.disabled) {\n        component.el.setAttribute(\"aria-disabled\", \"true\");\n        if (component.el.contains(document.activeElement)) {\n            document.activeElement.blur();\n        }\n        blockInteraction(component);\n        return;\n    }\n    restoreInteraction(component);\n    component.el.removeAttribute(\"aria-disabled\");\n}\nfunction blockInteraction(component) {\n    component.el.click = interceptedClick;\n    if (isFirefox) {\n        const currentParent = getParentElement(component);\n        const trackedParent = disabledElementToParent.get(component.el);\n        if (trackedParent !== currentParent) {\n            removeInteractionListeners(trackedParent);\n            disabledElementToParent.set(component.el, currentParent);\n        }\n        addInteractionListeners(disabledElementToParent.get(component.el));\n        return;\n    }\n    addInteractionListeners(component.el);\n}\nfunction addInteractionListeners(element) {\n    if (!element) {\n        // this early return path is only applicable to Firefox\n        return;\n    }\n    element.addEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\n    nonBubblingWhenDisabledMouseEvents.forEach((event) => element.addEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\n}\nfunction getParentElement(component) {\n    return (component.el.parentElement || component.el); /* assume element is host if it has no parent when connected */\n}\nfunction restoreInteraction(component) {\n    delete component.el.click; // fallback on HTMLElement.prototype.click\n    if (isFirefox) {\n        removeInteractionListeners(disabledElementToParent.get(component.el));\n        disabledElementToParent.delete(component.el);\n        return;\n    }\n    removeInteractionListeners(component.el);\n}\nfunction removeInteractionListeners(element) {\n    if (!element) {\n        // this early return path is only applicable to Firefox\n        return;\n    }\n    element.removeEventListener(\"pointerdown\", onPointerDown, captureOnlyOptions);\n    nonBubblingWhenDisabledMouseEvents.forEach((event) => element.removeEventListener(event, onNonBubblingWhenDisabledMouseEvent, captureOnlyOptions));\n}\n/**\n * This utility helps disable components consistently in Firefox.\n *\n * It needs to be called in `connectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\n *\n * @param component\n */\nfunction connectInteractive(component) {\n    if (!component.disabled || !isFirefox) {\n        return;\n    }\n    blockInteraction(component);\n}\n/**\n * This utility restores interactivity to disabled components consistently in Firefox.\n *\n * It needs to be called in `disconnectedCallback` and is only needed for Firefox as it does not call capture event listeners before non-capture ones (see https://bugzilla.mozilla.org/show_bug.cgi?id=1731504).\n *\n * @param component\n */\nfunction disconnectInteractive(component) {\n    if (!isFirefox) {\n        return;\n    }\n    restoreInteraction(component);\n}\nconst CSS = {\n    container: \"interaction-container\",\n};\nfunction InteractiveContainer({ disabled }, children) {\n    return (h(\"div\", { class: CSS.container, inert: disabled }, ...children));\n}\n\nexport { InteractiveContainer as I, connectInteractive as c, disconnectInteractive as d, getUserAgentString as g, updateHostInteraction as u };\n\n//# sourceMappingURL=interactive.js.map"],"names":["getUserAgentData","getUserAgentString","uaData","brand","version","isFirefox","disabledElementToParent","interceptedClick","disabled","onPointerDown","event","interactiveElement","nonBubblingWhenDisabledMouseEvents","onNonBubblingWhenDisabledMouseEvent","captureOnlyOptions","updateHostInteraction","component","blockInteraction","restoreInteraction","currentParent","getParentElement","trackedParent","removeInteractionListeners","addInteractionListeners","element","connectInteractive","disconnectInteractive","CSS","InteractiveContainer","children","h"],"mappings":"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","x_google_ignoreList":[0]}