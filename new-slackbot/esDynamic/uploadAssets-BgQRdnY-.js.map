{"version":3,"file":"uploadAssets-BgQRdnY-.js","sources":["../../node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js","../../node_modules/@arcgis/core/support/progressUtils.js","../../node_modules/@arcgis/core/layers/graphics/sources/support/uploads.js","../../node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nconst e={upload:{createFromFiles:.8,loadMesh:.2},uploadAssetBlobs:{prepareAssetItems:.9,uploadAssetItems:.1},uploadConvertibleSource:{uploadEditSource:.5,serviceAssetsToGlb:.5},uploadLocalMesh:{meshToAssetBlob:.5,uploadAssetBlobs:.5}};export{e as uploadProgressWeights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{makeHandle as s}from\"../core/handleUtils.js\";import has from\"../core/has.js\";import{getOrCreateMapValue as t}from\"../core/MapUtils.js\";import{millisecondsFromSeconds as e,Seconds as r,Milliseconds as o}from\"../core/time.js\";function i(s,t=(s=>{}),e){return new n(s,t,e)}class n{constructor(s,t=(s=>{}),e){if(this.onProgress=t,this.taskName=e,this._progressMap=new Map,this._startTime=void 0,this._timingsMap=new Map,\"number\"==typeof s){this._weights={};for(let t=0;t<s;t++){const e=t,r=1/s;this._weights[e]=r,this._progressMap.set(e,0)}}else this._weights=s;this.emitProgress()}emitProgress(){let s=0;for(const[t,e]of this._progressMap.entries()){s+=e*this._weights[t]}if(1===s&&has(\"enable-feature:esri-3dofl-upload-timings\")){const s=Math.round(performance.now()-(this._startTime??0))/1e3;console.log(`${this.taskName} done in ${s} sec`);for(const[t,e]of this._timingsMap){const r=Math.round(e.end-e.start)/1e3,o=Math.round(r/s*100);console.log(this.taskName??\"Task\",{stepKey:t,stepTime:r,relativeTime:o})}}this.onProgress(s)}setProgress(s,e){if(this._progressMap.set(s,e),has(\"enable-feature:esri-3dofl-upload-timings\")){const r=performance.now();this._startTime??=r;const o=t(this._timingsMap,s,(()=>({start:r,end:0})));1===e&&(o.end=r)}this.emitProgress()}simulate(s,t){return a((t=>this.setProgress(s,t)),t)}makeOnProgress(s){return t=>this.setProgress(s,t)}}function a(t=(s=>{}),e=l){const r=performance.now();t(0);const o=setInterval((()=>{const s=performance.now()-r,o=1-Math.exp(-s/e);t(o)}),g);return s((()=>{clearInterval(o),t(1)}))}function h(s,t=c){return e(r(s*f/t))}function m(s,t=p){return e(r(s*f/t))}const c=10,p=10,f=8e-6,g=o(50),l=o(1e3);export{n as ProgressManager,m as estimatedConversionTime,h as estimatedTransferTime,i as makeProgressManager,a as simulateProgress};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{throwIfAborted as o}from\"../../../../core/promiseUtils.js\";import{join as t}from\"../../../../core/urlUtils.js\";import{isHostedAgolService as r}from\"../../../support/arcgisLayerUrl.js\";import{makeProgressManager as s,estimatedTransferTime as a}from\"../../../../support/progressUtils.js\";const n=1e6,i=20*n,p=2e9,l=3;async function m({data:m,name:f,description:d},u,h){let w=null;try{const y=t(u,\"uploads\"),j=t(y,\"info\"),{data:g}=await e(j,{query:{f:\"json\"},responseType:\"json\"});o(h);const q=r(u),z=g.maxUploadFileSize*n,T=q?p:z,U=q?Math.min(i,z):i;if(m.size>T)throw new Error(\"Data too large\");const A=t(y,\"register\"),{data:E}=await e(A,{query:{f:\"json\",itemName:c(f),description:d},responseType:\"json\",method:\"post\"});if(o(h),!E.success)throw new Error(\"Registration failed\");const{itemID:P}=E.item;w=t(y,P);const D=t(w,\"uploadPart\"),I=Math.ceil(m.size/U),M=new Array;for(let e=0;e<I;++e)M.push(m.slice(e*U,Math.min((e+1)*U,m.size)));const v=M.slice().reverse(),x=new Array,F=s(I,h?.onProgress,\"uploadItem\"),_=async()=>{for(;0!==v.length;){const t=M.length-v.length,r=v.pop(),s=new FormData,n=F.simulate(t,a(r.size));try{s.append(\"f\",\"json\"),s.append(\"file\",r),s.append(\"partId\",`${t}`);const{data:a}=await e(D,{timeout:0,body:s,responseType:\"json\",method:\"post\"});if(o(h),!a.success)throw new Error(\"Part upload failed\")}finally{n.remove()}}};for(let e=0;e<l&&0!==v.length;++e)x.push(_());await Promise.all(x);const b=t(w,\"commit\"),{data:C}=await e(b,{query:{f:\"json\",parts:M.map(((e,o)=>o)).join(\",\")},responseType:\"json\",method:\"post\"});if(o(h),!C.success)throw new Error(\"Commit failed\");return C.item}catch(y){if(null!=w){const o=t(w,\"delete\");await e(o,{query:{f:\"json\"},responseType:\"json\",method:\"post\"})}throw y}}function c(e){return e.replaceAll(\"/\",\"_\").replaceAll(\"\\\\\",\"_\")}export{m as uploadItem};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport s from\"../../../../request.js\";import\"../../../../core/has.js\";import e from\"../../../../core/Logger.js\";import{throwIfAborted as t,after as r,throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Milliseconds as n}from\"../../../../core/time.js\";import{join as a,parseData as i}from\"../../../../core/urlUtils.js\";import{generateBracedUUID as c}from\"../../../../core/uuid.js\";import{externalIsOnService as u,assetFormatId as l,ServiceAsset as p,ServiceAssetPart as m,externalSourceToMultiPart as f}from\"../../../../geometry/support/meshUtils/External.js\";import{UnsupportedError as d,NoSupportedSourceError as g,BadResponseError as y,UploadFailedError as w,UnsupportedFormatUploadedError as h,Convert3DFailedError as P,NoGlbSupportError as T,NotBase64Error as b,UnableToPrepareOptionsError as j}from\"./uploadAssetErrors.js\";import{uploadProgressWeights as A}from\"./uploadProgressWeights.js\";import{uploadItem as F}from\"./uploads.js\";import{getFormatIdMimeType as U,getMimeTypeFormatId as S,getFilenameFormatId as x}from\"../../../support/infoFor3D.js\";import{makeProgressManager as E,estimatedConversionTime as N,simulateProgress as D}from\"../../../../support/progressUtils.js\";async function O(s,e,t){const r=s.length;if(!r)return t?.onProgress?.(1),[];const o=E(r,t?.onProgress,\"uploadAssets\");return Promise.all(s.map(((s,r)=>v(s,e,{...t,onProgress:o.makeOnProgress(r)}))))}async function v(s,{layer:e,ongoingUploads:t},r){const o=t.get(s);if(o)return o;if(!Z(e))throw new d;if(I(s,e))return r?.onProgress?.(1),s;const n=k(s,e,r);t.set(s,n);try{await n}finally{t.delete(s)}return s}function I(s,e){const{parsedUrl:t}=e;return null!=t&&s.metadata.externalSources.some((s=>u(s,t)))}async function k(s,e,r){const{metadata:o}=s,{displaySource:n}=o,a=H(n?.source,e),i=!!a,c=o.externalSources.length>0,u=i?B(a,e,r):c?R(s,e,r):C(s,e,r),l=await u;return t(r),s.addExternalSources([l]),s}async function B(s,e,t){return{source:await G(s,e,t),original:!0}}async function R(s,e,t){const r=_(e),{externalSources:o}=s.metadata,n=q(o,e);if(!n)throw new g;const a=E(A.uploadConvertibleSource,t?.onProgress,\"uploadConvertibleSource\"),i=await G(n,e,{onProgress:a.makeOnProgress(\"uploadEditSource\")});s.addExternalSources([{source:i,original:!0}]);const c=n.reduce(((s,{asset:e})=>e instanceof File?s+e.size:s),0),u=a.simulate(\"serviceAssetsToGlb\",N(c));try{return{source:await V(i,e,r)}}finally{u.remove()}}async function C(s,e,t){const r=E(A.uploadLocalMesh,t?.onProgress,\"uploadLocalMesh\"),o=L(s,e,{...t,onProgress:r.makeOnProgress(\"meshToAssetBlob\")});return{source:await J([o],e,{...t,onProgress:r.makeOnProgress(\"uploadAssetBlobs\")}),extent:s.extent.clone(),original:!0}}async function L(s,e,r){const o=_(e),n=await s.load(r),a=await n.toBinaryGLTF({ignoreLocalTransform:!0});t(r);const i=await a.buffer();return t(r),{blob:new Blob([i.data],{type:i.type}),assetName:`${c()}.glb`,assetType:o}}function q(s,e){for(const t of s){const s=H(t.source,e);if(s)return s}return null}function H(s,e){if(!s)return null;const{infoFor3D:{supportedFormats:t,editFormats:r}}=e,o=f(s),n=new Array;let a=!1;for(let i=0;i<o.length;++i){const s=$(o[i],t);if(!s)return null;r.includes(s.assetType)&&(a=!0),n.push(s)}return a?n:null}function $(s,e){const t=l(s,e);return t?{asset:s,assetType:t}:null}async function G(s,e,t){return J(s.map((s=>M(s,t))),e,t)}async function J(s,e,r){const o=E(A.uploadAssetBlobs,r?.onProgress,\"uploadAssetBlobs\"),n=await z(s,e,{...r,onProgress:o.makeOnProgress(\"prepareAssetItems\")});t(r);const a=n.map((({item:s})=>s)),{uploadResults:i}=await K(a,e,{...r,onProgress:o.makeOnProgress(\"uploadAssetItems\")});return t(r),s.map(((s,t)=>Q(n[t],i[t],e)))}async function M(s,e){const{asset:r,assetType:o}=s;if(r instanceof File)return{blob:r,assetName:r.name,assetType:o};const n=await r.toBlob(e);return t(e),{blob:n,assetName:r.assetName,assetType:o}}async function W(s,e,r){const{blob:n,assetType:a,assetName:c}=s;let u=null;try{const s=await F({data:n,name:c},e.url,r);t(r),u={assetType:a,assetUploadId:s.itemID}}catch(l){o(l),ss().warnOnce(`Service ${e.url} does not support the REST Uploads API.`)}if(!u){const s=await i(n);if(t(r),!s.isBase64)throw new b;u={assetType:a,assetData:s.data}}if(!u)throw new j;return{item:u,assetName:c}}function z(s,e,r){const o=E(s.length,r?.onProgress,\"prepareAssetItems\");return Promise.all(s.map((async(s,n)=>{const a=W(await s,e,{...r,onProgress:o.makeOnProgress(n)});return t(r),a})))}async function K(e,r,o){const n=D(o?.onProgress);try{const n=await s(a(r.parsedUrl.path,\"uploadAssets\"),{timeout:0,query:{f:\"json\",assets:JSON.stringify(e)},method:\"post\",responseType:\"json\"});if(t(o),n.data.uploadResults.length!==e.length)throw new y(e.length,n.data.uploadResults.length);return n.data}finally{n.remove()}}function Q(s,e,t){const{success:r}=e;if(!r){const{error:t}=e;throw new w(s.assetName,t)}const{assetHash:o}=e,{assetName:n,item:{assetType:a}}=s,{infoFor3D:{supportedFormats:i}}=t,c=U(a,i);if(!c)throw new h(a);return new p(n,c,[new m(`${t.parsedUrl.path}/assets/${o}`,o)])}async function V(s,e,t){const r=s.map((({assetName:s,parts:e})=>({assetName:s,assetHash:e[0].partHash}))),o=e.capabilities?.operations.supportsAsyncConvert3D,n={f:\"json\",assets:JSON.stringify(r),transportType:\"esriTransportTypeUrl\",targetFormat:t,async:o},i=a(e.parsedUrl.path,\"convert3D\");let c;try{c=(await(o?Y:X)(i,{query:n,responseType:\"json\",timeout:0})).data}catch(l){throw new P}const{supportedFormats:u}=e.infoFor3D;return c.assets.map((s=>{const e=S(s.contentType,u);if(!e)throw new h(e);return new p(s.assetName,s.contentType,[new m(s.assetURL,s.assetHash)])}))}function X(e,t){return s(e,t)}async function Y(e,t){const o=(await s(e,t)).data.statusUrl;for(;;){const e=(await s(o,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return s(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new Error(e.status);case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new Error}await r(es)}}function Z(s){return!!s.infoFor3D&&!!s.url}function _(s){const{infoFor3D:e}=s,t=S(\"model/gltf-binary\",e.supportedFormats)??x(\"glb\",e.supportedFormats);if(!t)throw new T;return t}function ss(){return e.getLogger(\"esri.layers.graphics.sources.support.uploadAssets\")}const es=n(1e3);export{O as uploadAssets};\n"],"names":["e","i","s","t","n","n$1","has","r","o","a","l","g","h","c","f","m","p","d","u","w","y","j","q","z","T","U","A","E","P","D","I","M","v","x","F","_","b","C","O","Z","k","H","B","R","G","N","V","L","J","$","K","Q","W","ss","Y","X","S","es"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}