{"version":3,"file":"openCloseComponent-fTUxB9Xb.js","sources":["../../node_modules/@esri/calcite-components/dist/components/openCloseComponent.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.\n * v2.6.0\n */\nimport { readTask } from '@stencil/core/internal/client/index.js';\n\nfunction isOpen(component) {\n    return \"opened\" in component ? component.opened : component.open;\n}\nfunction emitImmediately(component, nonOpenCloseComponent = false) {\n    (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n        ? component.onBeforeOpen()\n        : component.onBeforeClose();\n    (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n        ? component.onOpen()\n        : component.onClose();\n}\n/**\n * Helper to determine globally set transition duration on the given openTransitionProp, which is imported and set in the @Watch(\"open\").\n * Used to emit (before)open/close events both for when the opacity transition is present and when there is none (transition-duration is set to 0).\n *\n * @example\n * import { onToggleOpenCloseComponent, OpenCloseComponent } from \"../../utils/openCloseComponent\";\n *\n * async componentWillLoad() {\n * // When component initially renders, if `open` was set we need to trigger on load as watcher doesn't fire.\n * if (this.open) {\n *    onToggleOpenCloseComponent(this);\n * }\n * @Watch(\"open\")\n * async toggleModal(value: boolean): Promise<void> {\n *    onToggleOpenCloseComponent(this);\n * }\n *\n * @param component - OpenCloseComponent uses `open` prop to emit (before)open/close.\n * @param nonOpenCloseComponent - OpenCloseComponent uses `expanded` prop to emit (before)open/close.\n */\nfunction onToggleOpenCloseComponent(component, nonOpenCloseComponent = false) {\n    readTask(() => {\n        if (component.transitionEl) {\n            const { transitionDuration: allDurations, transitionProperty: allProps } = getComputedStyle(component.transitionEl);\n            const allTransitionDurationsArray = allDurations.split(\",\");\n            const allTransitionPropsArray = allProps.split(\",\");\n            const openTransitionPropIndex = allTransitionPropsArray.indexOf(component.openTransitionProp);\n            const transitionDuration = allTransitionDurationsArray[openTransitionPropIndex] ??\n                /* Safari will have a single transition value if multiple props share it,\n                so we fall back to it if there's no matching prop duration */\n                allTransitionDurationsArray[0];\n            if (transitionDuration === \"0s\") {\n                emitImmediately(component, nonOpenCloseComponent);\n                return;\n            }\n            const fallbackTimeoutId = setTimeout(() => {\n                component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n                component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n                component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n                emitImmediately(component, nonOpenCloseComponent);\n            }, parseFloat(transitionDuration) * 1000);\n            component.transitionEl.addEventListener(\"transitionstart\", onStart);\n            component.transitionEl.addEventListener(\"transitionend\", onEndOrCancel);\n            component.transitionEl.addEventListener(\"transitioncancel\", onEndOrCancel);\n            function onStart(event) {\n                if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n                    clearTimeout(fallbackTimeoutId);\n                    component.transitionEl.removeEventListener(\"transitionstart\", onStart);\n                    (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n                        ? component.onBeforeOpen()\n                        : component.onBeforeClose();\n                }\n            }\n            function onEndOrCancel(event) {\n                if (event.propertyName === component.openTransitionProp && event.target === component.transitionEl) {\n                    (nonOpenCloseComponent ? component[component.transitionProp] : isOpen(component))\n                        ? component.onOpen()\n                        : component.onClose();\n                    component.transitionEl.removeEventListener(\"transitionend\", onEndOrCancel);\n                    component.transitionEl.removeEventListener(\"transitioncancel\", onEndOrCancel);\n                }\n            }\n        }\n    });\n}\n\nexport { onToggleOpenCloseComponent as o };\n\n//# sourceMappingURL=openCloseComponent.js.map"],"names":["isOpen","component","emitImmediately","nonOpenCloseComponent","onToggleOpenCloseComponent","readTask","onStart","event","fallbackTimeoutId","onEndOrCancel","allDurations","allProps","allTransitionDurationsArray","openTransitionPropIndex","transitionDuration"],"mappings":";AAOA,SAASA,EAAOC,GAAW;AACvB,SAAO,YAAYA,IAAYA,EAAU,SAASA,EAAU;AAChE;AACA,SAASC,EAAgBD,GAAWE,IAAwB,IAAO;AAC/D,GAACA,IAAwBF,EAAUA,EAAU,cAAc,IAAID,EAAOC,CAAS,KACzEA,EAAU,aAAc,IACxBA,EAAU,cAAa,IAC5BE,IAAwBF,EAAUA,EAAU,cAAc,IAAID,EAAOC,CAAS,KACzEA,EAAU,OAAQ,IAClBA,EAAU,QAAO;AAC3B;AAqBA,SAASG,EAA2BH,GAAWE,IAAwB,IAAO;AAC1E,EAAAE,EAAS,MAAM;AACX,QAAIJ,EAAU,cAAc;AAsBxB,UAASK,IAAT,SAAiBC,GAAO;AACpB,QAAIA,EAAM,iBAAiBN,EAAU,sBAAsBM,EAAM,WAAWN,EAAU,iBAClF,aAAaO,CAAiB,GAC9BP,EAAU,aAAa,oBAAoB,mBAAmBK,CAAO,IACpEH,IAAwBF,EAAUA,EAAU,cAAc,IAAID,EAAOC,CAAS,KACzEA,EAAU,aAAc,IACxBA,EAAU,cAAa;AAAA,MAEpC,GACQQ,IAAT,SAAuBF,GAAO;AAC1B,QAAIA,EAAM,iBAAiBN,EAAU,sBAAsBM,EAAM,WAAWN,EAAU,kBACjFE,IAAwBF,EAAUA,EAAU,cAAc,IAAID,EAAOC,CAAS,KACzEA,EAAU,OAAQ,IAClBA,EAAU,QAAO,GACvBA,EAAU,aAAa,oBAAoB,iBAAiBQ,CAAa,GACzER,EAAU,aAAa,oBAAoB,oBAAoBQ,CAAa;AAAA,MAEnF;AAtCD,YAAM,EAAE,oBAAoBC,GAAc,oBAAoBC,EAAQ,IAAK,iBAAiBV,EAAU,YAAY,GAC5GW,IAA8BF,EAAa,MAAM,GAAG,GAEpDG,IAD0BF,EAAS,MAAM,GAAG,EACM,QAAQV,EAAU,kBAAkB,GACtFa,IAAqBF,EAA4BC,CAAuB;AAAA;AAAA,MAG1ED,EAA4B,CAAC;AACjC,UAAIE,MAAuB,MAAM;AAC7B,QAAAZ,EAAgBD,GAAWE,CAAqB;AAChD;AAAA,MACH;AACD,YAAMK,IAAoB,WAAW,MAAM;AACvC,QAAAP,EAAU,aAAa,oBAAoB,mBAAmBK,CAAO,GACrEL,EAAU,aAAa,oBAAoB,iBAAiBQ,CAAa,GACzER,EAAU,aAAa,oBAAoB,oBAAoBQ,CAAa,GAC5EP,EAAgBD,GAAWE,CAAqB;AAAA,MACnD,GAAE,WAAWW,CAAkB,IAAI,GAAI;AACxC,MAAAb,EAAU,aAAa,iBAAiB,mBAAmBK,CAAO,GAClEL,EAAU,aAAa,iBAAiB,iBAAiBQ,CAAa,GACtER,EAAU,aAAa,iBAAiB,oBAAoBQ,CAAa;AAAA,IAmB5E;AAAA,EACT,CAAK;AACL;","x_google_ignoreList":[0]}