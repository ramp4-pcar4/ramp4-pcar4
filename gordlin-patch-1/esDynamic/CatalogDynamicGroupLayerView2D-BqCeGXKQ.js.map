{"version":3,"file":"CatalogDynamicGroupLayerView2D-BqCeGXKQ.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/CatalogDynamicGroupLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Collection.js\";import t from\"../../../core/Logger.js\";import{debounce as i}from\"../../../core/promiseUtils.js\";import{when as s,watch as a}from\"../../../core/reactiveUtils.js\";import{sqlAnd as o}from\"../../../core/sql.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as d}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as n}from\"./LayerView2D.js\";import l from\"../../layers/LayerView.js\";const c=Symbol();let p=class extends(n(l)){constructor(){super(...arguments),this.layerViews=new r,this._debouncedUpdate=i((async()=>{const{layer:e,parent:{footprintLayerView:r}}=this;let t=[];if(r){const i=this._createQuery(),{features:s}=await r.queryFeatures(i);this.suspended||(t=s.map((r=>e.acquireLayer(r))))}this.removeHandles(c),this.addHandles(t,c)}))}attach(){this.addAttachHandles([this._updatingHandles.addOnCollectionChange((()=>this.layerViews),(()=>this._updateStageChildren()),{initial:!0}),s((()=>!1===this.parent.footprintLayerView?.dataUpdating),(()=>this._updateLayers())),a((()=>[this.layer.maximumVisibleSublayers,this.suspended,this.parent.footprintLayerView?.filter]),(()=>this._updateLayers()))])}detach(){this.container.removeAllChildren(),this.removeHandles(c)}update(e){}moveStart(){}viewChange(){}moveEnd(){}isUpdating(){return this.layerViews.some((e=>e.updating))}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}_updateLayers(){this.suspended?this.removeHandles(c):this._updatingHandles.addPromise(this._debouncedUpdate().catch((e=>{t.getLogger(this).error(e)})))}_createQuery(){const{parent:{footprintLayerView:e},layer:{maximumVisibleSublayers:r,parent:{itemTypeField:t,itemSourceField:i,objectIdField:s,orderBy:a}}}=this,d=`${t} <> 'Scene Service'`,n=e.createQuery();n.returnGeometry=!1,n.num=r,n.outFields=[s,i],n.where=o(n.where,d);const l=a?.find((e=>e.field&&!e.valueExpression));return l?.field&&(n.orderByFields=[`${l.field} ${\"descending\"===l.order?\"DESC\":\"ASC\"}`]),n}};p=e([d(\"esri.views.2d.layers.CatalogDynamicGroupLayerView2D\")],p);const h=p;export{h as default};\n"],"names":["c","p","n","l","r","i","t","s","a","d","o","e","h"],"mappings":";;AAIujB,MAAMA,IAAE,OAAQ;AAAC,IAAIC,IAAE,cAAcC,EAAEC,CAAC,EAAE;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,aAAW,IAAIC,KAAE,KAAK,mBAAiBC,EAAG,YAAS;AAAC,YAAK,EAAC,OAAM,GAAE,QAAO,EAAC,oBAAmBD,EAAC,EAAC,IAAE;AAAK,UAAIE,IAAE,CAAE;AAAC,UAAGF,GAAE;AAAC,cAAMC,IAAE,KAAK,aAAc,GAAC,EAAC,UAASE,EAAC,IAAE,MAAMH,EAAE,cAAcC,CAAC;AAAE,aAAK,cAAYC,IAAEC,EAAE,IAAK,CAAAH,MAAG,EAAE,aAAaA,CAAC,CAAG;AAAA,MAAC;AAAC,WAAK,cAAcJ,CAAC,GAAE,KAAK,WAAWM,GAAEN,CAAC;AAAA,IAAC,CAAC;AAAA,EAAE;AAAA,EAAC,SAAQ;AAAC,SAAK,iBAAiB,CAAC,KAAK,iBAAiB,sBAAuB,MAAI,KAAK,YAAa,MAAI,KAAK,qBAAsB,GAAE,EAAC,SAAQ,GAAE,CAAC,GAAEO,EAAG,MAAS,KAAK,OAAO,oBAAoB,iBAArC,IAAoD,MAAI,KAAK,cAAe,CAAA,GAAGC,EAAG,MAAI,CAAC,KAAK,MAAM,yBAAwB,KAAK,WAAU,KAAK,OAAO,oBAAoB,MAAM,GAAI,MAAI,KAAK,cAAe,CAAA,CAAE,CAAC;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,SAAK,UAAU,kBAAiB,GAAG,KAAK,cAAcR,CAAC;AAAA,EAAC;AAAA,EAAC,OAAO,GAAE;AAAA,EAAE;AAAA,EAAA,YAAW;AAAA,EAAA;AAAA,EAAE,aAAY;AAAA,EAAE;AAAA,EAAA,UAAS;AAAA,EAAA;AAAA,EAAE,aAAY;AAAC,WAAO,KAAK,WAAW,KAAM,OAAG,EAAE,QAAQ;AAAA,EAAE;AAAA,EAAC,uBAAsB;AAAC,SAAK,UAAU,kBAAiB,GAAG,KAAK,WAAW,QAAS,CAAC,GAAEI,MAAI,KAAK,UAAU,WAAW,EAAE,WAAUA,CAAC,CAAG;AAAA,EAAA;AAAA,EAAC,gBAAe;AAAC,SAAK,YAAU,KAAK,cAAcJ,CAAC,IAAE,KAAK,iBAAiB,WAAW,KAAK,iBAAgB,EAAG,MAAO,OAAG;AAACM,MAAAA,EAAE,UAAU,IAAI,EAAE,MAAM,CAAC;AAAA,IAAC,CAAG,CAAA;AAAA,EAAC;AAAA,EAAC,eAAc;AAAC,UAAK,EAAC,QAAO,EAAC,oBAAmB,EAAC,GAAE,OAAM,EAAC,yBAAwBF,GAAE,QAAO,EAAC,eAAcE,GAAE,iBAAgBD,GAAE,eAAcE,GAAE,SAAQC,EAAC,EAAC,EAAC,IAAE,MAAKC,IAAE,GAAGH,CAAC,uBAAsBJ,IAAE,EAAE,YAAW;AAAGA,IAAAA,EAAE,iBAAe,IAAGA,EAAE,MAAIE,GAAEF,EAAE,YAAU,CAACK,GAAEF,CAAC,GAAEH,EAAE,QAAMQ,EAAER,EAAE,OAAMO,CAAC;AAAE,UAAMN,IAAEK,GAAG,KAAM,CAAAG,MAAGA,EAAE,SAAO,CAACA,EAAE,eAAiB;AAAC,WAAOR,GAAG,UAAQD,EAAE,gBAAc,CAAC,GAAGC,EAAE,KAAK,IAAmBA,EAAE,UAAjB,eAAuB,SAAO,KAAK,EAAE,IAAGD;AAAAA,EAAC;AAAC;AAAED,IAAEU,EAAE,CAACF,EAAE,qDAAqD,CAAC,GAAER,CAAC;AAAO,MAACW,IAAEX;","x_google_ignoreList":[0]}