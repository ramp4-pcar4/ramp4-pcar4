{"version":3,"file":"featuresetstats-mSgpVJ0U.js","sources":["../../node_modules/@arcgis/core/arcade/functions/featuresetstats.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{ArcadeDate as n}from\"../ArcadeDate.js\";import{ArcadeExecutionError as t,ExecutionErrorCodes as e}from\"../executionError.js\";import{H as a,u as r,o as i,c as o,q as s,K as c,N as u}from\"../../chunks/languageUtils.js\";import{calculateStat as f}from\"./fieldStats.js\";import{SqlTimeStampOffset as d}from\"../../core/sql/SqlTimestampOffset.js\";import{WhereClause as l}from\"../../core/sql/WhereClause.js\";async function m(n,t,e,a,o,u){if(1===a.length){if(i(a[0]))return f(n,a[0],c(a[1],-1));if(s(a[0]))return f(n,a[0].toArray(),c(a[1],-1))}else if(2===a.length){if(i(a[0]))return f(n,a[0],c(a[1],-1));if(s(a[0]))return f(n,a[0].toArray(),c(a[1],-1));if(r(a[0])){const e=await a[0].load(),r=await A(l.create(a[1],e.getFieldsIndex(),e.dateFieldsTimeZoneDefaultUTC),u,o);return g(o,await a[0].calculateStatistic(n,r,c(a[2],1e3),t.abortSignal))}}else if(3===a.length&&r(a[0])){const e=await a[0].load(),r=await A(l.create(a[1],e.getFieldsIndex(),e.dateFieldsTimeZoneDefaultUTC),u,o);return g(o,await a[0].calculateStatistic(n,r,c(a[2],1e3),t.abortSignal))}return f(n,a,-1)}function g(t,e){return e instanceof d?n.fromReaderAsTimeStampOffset(e.toStorageFormat()):e instanceof Date?n.dateJSAndZoneToArcadeDate(e,u(t)):e}async function A(n,t,e){const a=n.getVariables();if(a.length>0){const r=[];for(let n=0;n<a.length;n++){const i={name:a[n]};r.push(await t.evaluateIdentifier(e,i))}const i={};for(let n=0;n<a.length;n++)i[a[n]]=r[n];return n.parameters=i,n}return n}function y(n){\"async\"===n.mode&&(n.functions.stdev=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"stdev\",e,a,r,t,n)))},n.functions.variance=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"variance\",e,a,r,t,n)))},n.functions.average=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"mean\",e,a,r,t,n)))},n.functions.mean=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"mean\",e,a,r,t,n)))},n.functions.sum=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"sum\",e,a,r,t,n)))},n.functions.min=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"min\",e,a,r,t,n)))},n.functions.max=function(t,e){return n.standardFunctionAsync(t,e,((e,a,r)=>m(\"max\",e,a,r,t,n)))},n.functions.count=function(c,u){return n.standardFunctionAsync(c,u,((n,f,d)=>{if(a(d,1,1,c,u),r(d[0]))return d[0].count(n.abortSignal);if(i(d[0])||o(d[0]))return d[0].length;if(s(d[0]))return d[0].length();throw new t(c,e.InvalidParameter,u)}))})}export{y as registerFunctions};\n"],"names":["m","t","e","a","o","u","i","f","c","s","r","A","l","g","d","n","y"],"mappings":"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","x_google_ignoreList":[0]}