{"version":3,"file":"executeRelationshipQuery-D51PGEJX.js","sources":["../../node_modules/@arcgis/core/rest/query/operations/queryRelatedRecords.js","../../node_modules/@arcgis/core/rest/query/executeRelationshipQuery.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport e from\"../../../request.js\";import{srToRESTValue as t}from\"../../../geometry/support/spatialReferenceUtils.js\";import{mapParameters as o}from\"../../operations/urlUtils.js\";function r(e,o){const r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(\",\")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(\",\")),r.outFields&&!o?.returnCountOnly?r.outFields.includes(\"*\")?r.outFields=\"*\":r.outFields=r.outFields.join(\",\"):delete r.outFields,r.outSR&&(r.outSR=t(r.outSR)),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}async function s(e,t,o){const r=await a(e,t,o),s=r.data,n=s.geometryType,d=s.spatialReference,c={};for(const a of s.relatedRecordGroups){const e={fields:void 0,objectIdFieldName:void 0,geometryType:n,spatialReference:d,hasZ:!!s.hasZ,hasM:!!s.hasM,features:a.relatedRecords};if(null!=a.objectId)c[a.objectId]=e;else for(const t of Object.keys(a))\"relatedRecords\"!==t&&(c[a[t]]=e)}return{...r,data:c}}async function n(e,t,o){const r=await a(e,t,o,{returnCountOnly:!0}),s=r.data,n={};for(const a of s.relatedRecordGroups)null!=a.objectId&&(n[a.objectId]=a.count);return{...r,data:n}}async function a(t,s,n={},a){const d=o({...t.query,f:\"json\",...a,...r(s,a)});return e(t.path+\"/queryRelatedRecords\",{...n,query:{...n.query,...d}})}export{s as executeRelationshipQuery,n as executeRelationshipQueryForCount,r as toQueryStringParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{parseUrl as t}from\"../utils.js\";import{executeRelationshipQuery as r,executeRelationshipQueryForCount as e}from\"./operations/queryRelatedRecords.js\";import o from\"../support/FeatureSet.js\";import s from\"../support/RelationshipQuery.js\";async function n(e,n,u){n=s.from(n);const a=t(e);return r(a,n,u).then((t=>{const r=t.data,e={};return Object.keys(r).forEach((t=>e[t]=o.fromJSON(r[t]))),e}))}async function u(r,o,n){o=s.from(o);const u=t(r);return e(u,o,{...n}).then((t=>t.data))}export{n as executeRelationshipQuery,u as executeRelationshipQueryForCount};\n"],"names":["r","e","o","t","s","a","n","d","u"],"mappings":";AAImL,SAASA,EAAEC,GAAEC,GAAE;AAAC,QAAMF,IAAEC,EAAE,OAAM;AAAG,SAAOD,EAAE,cAAYA,EAAE,YAAUA,EAAE,UAAU,KAAK,GAAG,IAAGA,EAAE,kBAAgBA,EAAE,gBAAcA,EAAE,cAAc,KAAK,GAAG,IAAGA,EAAE,aAAW,CAACE,GAAG,kBAAgBF,EAAE,UAAU,SAAS,GAAG,IAAEA,EAAE,YAAU,MAAIA,EAAE,YAAUA,EAAE,UAAU,KAAK,GAAG,IAAE,OAAOA,EAAE,WAAUA,EAAE,UAAQA,EAAE,QAAMG,EAAEH,EAAE,KAAK,IAAGA,EAAE,sBAAoBA,EAAE,QAAM,KAAK,UAAU,EAAC,QAAOA,EAAE,kBAAiB,CAAC,GAAE,OAAOA,EAAE,oBAAmBA;AAAC;AAAC,eAAeI,EAAEH,GAAE,GAAEC,GAAE;AAAC,QAAMF,IAAE,MAAMK,EAAEJ,GAAE,GAAEC,CAAC,GAAEE,IAAEJ,EAAE,MAAKM,IAAEF,EAAE,cAAaG,IAAEH,EAAE,kBAAiB,IAAE;AAAG,aAAUC,KAAKD,EAAE,qBAAoB;AAAC,UAAMH,IAAE,EAAC,QAAO,QAAO,mBAAkB,QAAO,cAAaK,GAAE,kBAAiBC,GAAE,MAAK,CAAC,CAACH,EAAE,MAAK,MAAK,CAAC,CAACA,EAAE,MAAK,UAASC,EAAE,eAAc;AAAE,QAASA,EAAE,YAAR,KAAiB,GAAEA,EAAE,QAAQ,IAAEJ;AAAA,QAAO,YAAUE,KAAK,OAAO,KAAKE,CAAC,EAAE,CAAmBF,MAAnB,qBAAuB,EAAEE,EAAEF,CAAC,CAAC,IAAEF;AAAA,EAAE;AAAC,SAAM,EAAC,GAAGD,GAAE,MAAK,EAAC;AAAC;AAAC,eAAeM,EAAEL,GAAE,GAAEC,GAAE;AAAC,QAAMF,IAAE,MAAMK,EAAEJ,GAAE,GAAEC,GAAE,EAAC,iBAAgB,GAAE,CAAC,GAAEE,IAAEJ,EAAE,MAAKM,IAAE;AAAG,aAAUD,KAAKD,EAAE,oBAAoB,CAAMC,EAAE,YAAR,SAAmBC,EAAED,EAAE,QAAQ,IAAEA,EAAE;AAAO,SAAM,EAAC,GAAGL,GAAE,MAAKM,EAAC;AAAC;AAAC,eAAeD,EAAEF,GAAEC,GAAEE,IAAE,CAAA,GAAG,GAAE;AAAC,QAAMC,IAAEL,EAAE,EAAC,GAAGC,EAAE,OAAM,GAAE,QAAO,GAAG,GAAE,GAAGH,EAAEI,GAAE,CAAC,EAAC,CAAC;AAAE,SAAOH,EAAEE,EAAE,OAAK,wBAAuB,EAAC,GAAGG,GAAE,OAAM,EAAC,GAAGA,EAAE,OAAM,GAAGC,EAAC,EAAC,CAAC;AAAC;ACAtjC,eAAeD,EAAEL,GAAEK,GAAEE,GAAE;AAAC,EAAAF,IAAEF,EAAE,KAAKE,CAAC;AAAE,QAAM,IAAEH,EAAEF,CAAC;AAAE,SAAOD,EAAE,GAAEM,GAAEE,CAAC,EAAE,KAAM,CAAAL,MAAG;AAAC,UAAMH,IAAEG,EAAE,MAAKF,IAAE,CAAE;AAAC,WAAO,OAAO,KAAKD,CAAC,EAAE,QAAS,CAAAG,MAAGF,EAAEE,CAAC,IAAED,EAAE,SAASF,EAAEG,CAAC,CAAC,CAAC,GAAGF;AAAA,EAAC,CAAG;AAAA;AAAC,eAAeO,EAAE,GAAEN,GAAEI,GAAE;AAAC,EAAAJ,IAAEE,EAAE,KAAKF,CAAC;AAAE,QAAMM,IAAEL,EAAE,CAAC;AAAE,SAAOF,EAAEO,GAAEN,GAAE,EAAC,GAAGI,EAAC,CAAC,EAAE,KAAM,CAAAH,MAAGA,EAAE,IAAM;AAAA;","x_google_ignoreList":[0,1]}