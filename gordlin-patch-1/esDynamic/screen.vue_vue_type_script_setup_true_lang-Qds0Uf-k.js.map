{"version":3,"file":"screen.vue_vue_type_script_setup_true_lang-Qds0Uf-k.js","sources":["../../src/fixtures/basemap/item.vue","../../src/fixtures/basemap/screen.vue"],"sourcesContent":["<template>\n    <div class=\"mb-10\">\n        <button\n            class=\"basemap-item-button bg-gray-300 w-full h-full\"\n            type=\"button\"\n            :aria-label=\"t('basemap.select')\"\n            @click=\"selectBasemap(basemap)\"\n            v-focus-item\n        >\n            <!-- thumbnail -->\n            <div>\n                <div\n                    class=\"flex hover:opacity-50 basemap-item-image basemap-item-container\"\n                    :class=\"!basemap.hideThumbnail ? 'h-180' : 'h-30'\"\n                >\n                    <!-- text-only mode -->\n                    <div v-if=\"basemap.hideThumbnail\" class=\"w-full h-30 hidden\" />\n                    <!-- Else if, use basemap thumbnail url -->\n                    <img\n                        v-else-if=\"basemap.thumbnailUrl\"\n                        class=\"w-full h-180\"\n                        :alt=\"basemap.altText\"\n                        :src=\"basemap.thumbnailUrl\"\n                    />\n                    <!-- Else if, Use tileSchema tile urls -->\n                    <div\n                        v-for=\"layer in basemap.layers\"\n                        :key=\"layer.id\"\n                        v-else-if=\"\n                            tileSchema.thumbnailTileUrls &&\n                            tileSchema.thumbnailTileUrls.length > 0 &&\n                            basemap.layers.every(layer => layer.layerType === 'esri-tile')\n                        \"\n                        class=\"flex basemap-item-inner h-180\"\n                    >\n                        <img\n                            class=\"w-full\"\n                            v-for=\"(url, idx) in tileSchema.thumbnailTileUrls\"\n                            :alt=\"basemap.altText\"\n                            :src=\"layer.url + url\"\n                            :key=\"idx\"\n                        />\n                    </div>\n                    <!-- Else, Use placeholder image -->\n                    <img\n                        v-else\n                        class=\"w-full bg-white h-180\"\n                        :alt=\"basemap.altText\"\n                        src=\"https://openclipart.org/image/800px/275366\"\n                    />\n                </div>\n            </div>\n\n            <div\n                class=\"absolute flex w-full bg-black text-white h-30 bottom-6 items-center\"\n                :class=\"basemap.hideThumbnail && basemap.id === selectedBasemap.id ? 'opacity-85' : 'opacity-75'\"\n            >\n                <div class=\"pl-5\" v-truncate>\n                    <span>{{ basemap.name }}</span>\n                </div>\n\n                <div class=\"ml-auto pr-5\">\n                    <a\n                        @click.stop\n                        @keydown.enter.space.prevent\n                        :content=\"basemap.description\"\n                        v-tippy=\"{\n                            placement: 'bottom',\n                            trigger: 'click focus'\n                        }\"\n                    >\n                        <svg class=\"fill-current w-16 h-16\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                            <path d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n                            <path\n                                d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"\n                            />\n                        </svg>\n                    </a>\n                </div>\n            </div>\n\n            <div\n                class=\"rv-basemap-check absolute top-0 right-0\"\n                v-if=\"basemap.id === selectedBasemap.id && !basemap.hideThumbnail\"\n            >\n                <svg class=\"fill-current w-25 h-25 relative\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                    <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\n                </svg>\n            </div>\n        </button>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject } from 'vue';\nimport type { PropType } from 'vue';\nimport type { RampBasemapConfig, RampTileSchemaConfig } from '@/geo/api';\n\nimport type { InstanceAPI } from '@/api';\nimport { useI18n } from 'vue-i18n';\nimport { useConfigStore } from '@/stores/config';\n\nconst { t } = useI18n();\nconst iApi = inject<InstanceAPI>('iApi');\nconst configStore = useConfigStore();\n\ndefineProps({\n    basemap: {\n        type: Object as PropType<RampBasemapConfig>,\n        required: true\n    },\n    tileSchema: {\n        type: Object as PropType<RampTileSchemaConfig>,\n        required: true\n    }\n});\n\nconst selectedBasemap = computed<RampBasemapConfig>(() => configStore.activeBasemapConfig as RampBasemapConfig);\n\nconst selectBasemap = (basemap: any) => {\n    if (basemap.id !== selectedBasemap.value.id) {\n        iApi?.geo.map.setBasemap(basemap.id);\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.basemap-item-container {\n    display: grid;\n    place-items: center;\n    grid-template-areas: 'inner-div';\n}\n\n.basemap-item-inner {\n    grid-area: inner-div;\n}\n\n[focus-list]:focus [focus-item].focused.basemap-item-button {\n    border: solid black 2px;\n}\n\n[focus-list]:focus [focus-item].focused.basemap-item-button .basemap-item-image {\n    opacity: 0.5;\n}\n\n.rv-basemap-check {\n    &::before {\n        content: '';\n        position: absolute;\n        border-top: 50px solid rgba(250, 250, 250, 1);\n        border-left: 50px solid transparent;\n        right: 0;\n        top: 0;\n    }\n}\n</style>\n","<template>\n    <panel-screen :panel=\"panel\">\n        <template #header>\n            {{ t('basemap.title') }}\n        </template>\n\n        <template #content>\n            <div class=\"h-600 overflow-y-auto\">\n                <div class=\"mx-5\" v-for=\"(tileSchema, idx) in tileSchemas\" :key=\"tileSchema.id\">\n                    <!-- use mt-5 if it's the first basemap title schema, use mt-36 otherwise -->\n                    <div :class=\"(idx === 0 ? 'mt-5' : 'mt-36') + ' flex mb-5'\">\n                        <h3 class=\"font-bold text-xl\" v-truncate>\n                            {{ tileSchema.name }}\n                        </h3>\n                    </div>\n\n                    <ul class=\"border-t border-b border-gray-600\" v-focus-list v-if=\"basemaps.length > 0\">\n                        <li v-for=\"basemap in filterBasemaps(tileSchema.id)\" :key=\"basemap.id\">\n                            <basemap-item\n                                :basemap=\"basemap\"\n                                :tileSchema=\"tileSchema\"\n                                class=\"block relative overflow-hidden\"\n                            ></basemap-item>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </template>\n    </panel-screen>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref } from 'vue';\nimport type { PropType } from 'vue';\n\nimport BasemapItem from './item.vue';\nimport type { RampBasemapConfig, RampMapConfig, RampTileSchemaConfig } from '@/geo/api';\nimport type { PanelInstance } from '@/api';\nimport { useI18n } from 'vue-i18n';\nimport { useConfigStore } from '@/stores/config';\n\nconst { t } = useI18n();\nconst configStore = useConfigStore();\ndefineProps({\n    panel: {\n        type: Object as PropType<PanelInstance>\n    }\n});\n\nconst tileSchemas = ref<Array<RampTileSchemaConfig>>([]);\nconst basemaps = ref<Array<RampBasemapConfig>>([]);\n\nonMounted(() => {\n    const mapConfig = configStore.config.map as RampMapConfig;\n    tileSchemas.value = mapConfig.tileSchemas;\n    basemaps.value = mapConfig.basemaps;\n});\n\n// filter out all the basemaps that match the current schema\nconst filterBasemaps = (schemaId: string) =>\n    basemaps.value.filter((basemap: RampBasemapConfig) => basemap.tileSchemaId === schemaId);\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["t","useI18n","iApi","inject","configStore","useConfigStore","selectedBasemap","computed","selectBasemap","basemap","tileSchemas","ref","basemaps","onMounted","mapConfig","filterBasemaps","schemaId"],"mappings":";;;;;;;;;;;;;;;;;;;;AAsGM,UAAA,EAAE,GAAAA,MAAMC,KACRC,IAAOC,EAAoB,MAAM,GACjCC,IAAcC,KAadC,IAAkBC,EAA4B,MAAMH,EAAY,mBAAwC,GAExGI,IAAgB,CAACC,MAAiB;AACpC,MAAIA,EAAQ,OAAOH,EAAgB,MAAM,MACrCJ,GAAM,IAAI,IAAI,WAAWO,EAAQ,EAAE;AAAA,IACvC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjFE,UAAA,EAAE,GAAAT,MAAMC,KACRG,IAAcC,KAOdK,IAAcC,EAAiC,CAAA,CAAE,GACjDC,IAAWD,EAA8B,CAAA,CAAE;AAEjD,IAAAE,EAAU,MAAM;AACN,YAAAC,IAAYV,EAAY,OAAO;AACrC,MAAAM,EAAY,QAAQI,EAAU,aAC9BF,EAAS,QAAQE,EAAU;AAAA,IAAA,CAC9B;AAGK,UAAAC,IAAiB,CAACC,MACpBJ,EAAS,MAAM,OAAO,CAACH,MAA+BA,EAAQ,iBAAiBO,CAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}