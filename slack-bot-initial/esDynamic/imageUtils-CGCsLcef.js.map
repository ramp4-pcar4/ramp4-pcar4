{"version":3,"file":"imageUtils-CGCsLcef.js","sources":["../../node_modules/@arcgis/core/core/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport t from\"../request.js\";import e from\"./Error.js\";import{isAbortError as r}from\"./promiseUtils.js\";import{dataComponents as a}from\"./urlUtils.js\";import{base64ToArrayBuffer as n}from\"../support/base64Utils.js\";let i=null,o=!0;function s(t,e,r){if(!t||!e)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e)}catch(a){o=!1}return m(t,e,r)}function c(t,e,r,a){if(!e||!r)throw new Error(\"Cannot construct image data without dimensions\");if(o)try{return new ImageData(t,e,r)}catch(i){o=!1}const n=m(e,r,a);return n.data.set(t,0),n}function f(){return i||(i=document.createElement(\"canvas\"),i.width=1,i.height=1),i}function m(t,e,r){return r||(r=f()),r.getContext(\"2d\").createImageData(t,e)}async function u(a,n){const i=window.URL.createObjectURL(a);try{const{data:e}=await t(i,{...n,responseType:\"image\"});return e}catch(o){if(!r(o))throw new e(\"invalid-image\",`Could not fetch requested image at ${i}`);throw o}finally{window.URL.revokeObjectURL(i)}}async function p(t,e){const{arrayBuffer:r,mediaType:a}=await d(t,e),n=\"image/png\"===a;if(\"image/gif\"===a){const{isAnimatedGIF:t,parseGif:a}=await import(\"./image/gif.js\");if(t(r))return a(r,e)}if(n){const{isAnimatedPNG:t,parseApng:a}=await import(\"./image/apng.js\");if(t(r))return a(r,e)}return u(new Blob([r],{type:a}),e)}async function d(e,r){const i=a(e);if(i?.isBase64)return{arrayBuffer:n(i.data),mediaType:i.mediaType};const o=await t(e,{responseType:\"array-buffer\",...r});return{arrayBuffer:o.data,mediaType:o.getHeader?.(\"Content-Type\")??\"\"}}export{s as createEmptyImageData,p as getImageData,c as wrapImageData};\n"],"names":["i","o","s","t","e","r","m","c","a","n","f","u","p","d"],"mappings":";AAIuN,IAAIA,IAAE,MAAKC,IAAE;AAAG,SAASC,EAAEC,GAAEC,GAAEC,GAAE;AAAC,MAAG,CAACF,KAAG,CAACC,EAAE,OAAM,IAAI,MAAM,gDAAgD;AAAE,MAAGH,EAAE,KAAG;AAAC,WAAO,IAAI,UAAUE,GAAEC,CAAC;AAAA,EAAC,QAAS;AAAC,IAAAH,IAAE;AAAA,EAAE;AAAC,SAAOK,EAAEH,GAAEC,GAAEC,CAAC;AAAC;AAAC,SAASE,EAAEJ,GAAEC,GAAEC,GAAEG,GAAE;AAAC,MAAG,CAACJ,KAAG,CAACC,EAAE,OAAM,IAAI,MAAM,gDAAgD;AAAE,MAAGJ,EAAE,KAAG;AAAC,WAAO,IAAI,UAAUE,GAAEC,GAAEC,CAAC;AAAA,EAAC,QAAS;AAAC,IAAAJ,IAAE;AAAA,EAAE;AAAC,QAAMQ,IAAEH,EAAEF,GAAEC,GAAEG,CAAC;AAAE,SAAOC,EAAE,KAAK,IAAIN,GAAE,CAAC,GAAEM;AAAC;AAAC,SAASC,IAAG;AAAC,SAAOV,MAAIA,IAAE,SAAS,cAAc,QAAQ,GAAEA,EAAE,QAAM,GAAEA,EAAE,SAAO,IAAGA;AAAC;AAAC,SAASM,EAAEH,GAAEC,GAAEC,GAAE;AAAC,SAAOA,MAAIA,IAAEK,EAAC,IAAIL,EAAE,WAAW,IAAI,EAAE,gBAAgBF,GAAEC,CAAC;AAAC;AAAC,eAAeO,EAAEH,GAAEC,GAAE;AAAC,QAAMT,IAAE,OAAO,IAAI,gBAAgBQ,CAAC;AAAE,MAAG;AAAC,UAAK,EAAC,MAAKJ,EAAC,IAAE,MAAMD,EAAEH,GAAE,EAAC,GAAGS,GAAE,cAAa,QAAO,CAAC;AAAE,WAAOL;AAAA,EAAC,SAAOH,GAAE;AAAC,UAAII,EAAEJ,CAAC,IAA+EA,IAAvE,IAAIG,EAAE,iBAAgB,sCAAsCJ,CAAC,EAAE;AAAA,EAAS,UAAC;AAAQ,WAAO,IAAI,gBAAgBA,CAAC;AAAA,EAAC;AAAC;AAAC,eAAeY,EAAET,GAAEC,GAAE;AAAC,QAAK,EAAC,aAAYC,GAAE,WAAUG,EAAC,IAAE,MAAMK,EAAEV,GAAEC,CAAC,GAAEK,IAAgBD,MAAd;AAAgB,MAAiBA,MAAd,aAAgB;AAAC,UAAK,EAAC,eAAcL,GAAE,UAASK,EAAC,IAAE,MAAM,OAAO,mBAAgB;AAAE,QAAGL,EAAEE,CAAC,EAAE,QAAOG,EAAEH,GAAED,CAAC;AAAA,EAAC;AAAC,MAAGK,GAAE;AAAC,UAAK,EAAC,eAAcN,GAAE,WAAUK,EAAC,IAAE,MAAM,OAAO,oBAAiB;AAAE,QAAGL,EAAEE,CAAC,EAAE,QAAOG,EAAEH,GAAED,CAAC;AAAA,EAAC;AAAC,SAAOO,EAAE,IAAI,KAAK,CAACN,CAAC,GAAE,EAAC,MAAKG,EAAC,CAAC,GAAEJ,CAAC;AAAC;AAAC,eAAeS,EAAE,GAAER,GAAE;AAAC,QAAML,IAAEQ,EAAE,CAAC;AAAE,MAAGR,GAAG,SAAS,QAAM,EAAC,aAAYS,EAAET,EAAE,IAAI,GAAE,WAAUA,EAAE,UAAS;AAAE,QAAMC,IAAE,MAAME,EAAE,GAAE,EAAC,cAAa,gBAAe,GAAGE,EAAC,CAAC;AAAE,SAAM,EAAC,aAAYJ,EAAE,MAAK,WAAUA,EAAE,YAAY,cAAc,KAAG,GAAE;AAAC;","x_google_ignoreList":[0]}