{"version":3,"file":"deduplicate-1-a6zD7r.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";import{newIndexArray as n,compactIndices as r}from\"../Indices.js\";function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=n(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=r(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)if(M[t]===b){o(h,(d?A[t]:t)*s,C,b*s,s),b++}if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=r(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;export{e as deduplicate};\n"],"names":["e","s","u","c","a","h","y","A","g","m","w","n","U","i","t","b","d","p","M","j","q","k","x","r","f","o","l","C"],"mappings":"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","x_google_ignoreList":[0]}