{"version":3,"file":"shared-B2DdSqBX.js","sources":["../../node_modules/@arcgis/core/arcade/featureset/support/shared.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ArcadeDate as e}from\"../../ArcadeDate.js\";import{DateOnly as r}from\"../../../core/sql/DateOnly.js\";import{TimeOnly as t}from\"../../../core/sql/TimeOnly.js\";import i from\"../../../geometry/Extent.js\";import n from\"../../../layers/support/Field.js\";import{DateTime as o}from\"luxon\";var l,s;function y(e){return n.fromJSON(e.toJSON())}function u(e){return e.toJSON?e.toJSON():e}function p(e){return\"string\"==typeof e||e instanceof String}function a(e){return\"boolean\"==typeof e}function c(e){return\"number\"==typeof e}function m(e){return Array.isArray(e)}function f(e){return e instanceof Date}function d(e){return e instanceof o}function g(r){return r instanceof e}function T(e){return e instanceof r}function F(e){return e instanceof t}function G(e,r){return e===r||!(!f(e)&&!g(e)||!f(r)&&!g(r))&&e.getTime()===r.getTime()}function S(e){const r={};for(const t in e)r[t]=e[t];return r}function O(e){if(null==e)return null;if(\"number\"==typeof e)return e;switch(e.toLowerCase()){case\"meters\":case\"meter\":return 109404;case\"miles\":case\"mile\":return 109439;case\"kilometers\":case\"kilometer\":case\"km\":return 109414}return null}function v(e){if(null==e)return null;switch(e.type){case\"polygon\":case\"multipoint\":case\"polyline\":return e.extent;case\"point\":return new i({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case\"extent\":return e}return null}function b(e){if(null==e)return null;if(\"number\"==typeof e)return e;if(\"number\"==typeof e)return e;switch(e.toLowerCase()){case\"meters\":case\"meter\":return 9001;case\"miles\":case\"mile\":return 9093;case\"kilometers\":case\"kilometer\":case\"km\":return 9036}return null}function I(e,r){return e===r||(\"point\"===e&&\"esriGeometryPoint\"===r||(\"polyline\"===e&&\"esriGeometryPolyline\"===r||(\"polygon\"===e&&\"esriGeometryPolygon\"===r||(\"extent\"===e&&\"esriGeometryEnvelope\"===r||(\"multipoint\"===e&&\"esriGeometryMultipoint\"===r||(\"point\"===r&&\"esriGeometryPoint\"===e||(\"polyline\"===r&&\"esriGeometryPolyline\"===e||(\"polygon\"===r&&\"esriGeometryPolygon\"===e||(\"extent\"===r&&\"esriGeometryEnvelope\"===e||\"multipoint\"===r&&\"esriGeometryMultipoint\"===e)))))))))}!function(e){e[e.Standardised=0]=\"Standardised\",e[e.StandardisedNoInterval=1]=\"StandardisedNoInterval\",e[e.SqlServer=2]=\"SqlServer\",e[e.Oracle=3]=\"Oracle\",e[e.Postgres=4]=\"Postgres\",e[e.PGDB=5]=\"PGDB\",e[e.FILEGDB=6]=\"FILEGDB\",e[e.NotEvaluated=7]=\"NotEvaluated\"}(l||(l={})),function(e){e[e.InFeatureSet=0]=\"InFeatureSet\",e[e.NotInFeatureSet=1]=\"NotInFeatureSet\",e[e.Unknown=2]=\"Unknown\"}(s||(s={}));const D=1e3;function P(e){return function(r){e.reject(r)}}function x(e,r){return function(){try{e.apply(null,arguments)}catch(t){r.reject(t)}}}const N={point:\"point\",polygon:\"polygon\",polyline:\"polyline\",multipoint:\"multipoint\",extent:\"extent\",esriGeometryPoint:\"point\",esriGeometryPolygon:\"polygon\",esriGeometryPolyline:\"polyline\",esriGeometryMultipoint:\"multipoint\",esriGeometryEnvelope:\"extent\",envelope:\"extent\"},w={point:\"esriGeometryPoint\",polygon:\"esriGeometryPolygon\",polyline:\"esriGeometryPolyline\",multipoint:\"esriGeometryMultipoint\",extent:\"esriGeometryEnvelope\",esriGeometryPoint:\"esriGeometryPoint\",esriGeometryPolygon:\"esriGeometryPolygon\",esriGeometryPolyline:\"esriGeometryPolyline\",esriGeometryMultipoint:\"esriGeometryMultipoint\",esriGeometryEnvelope:\"esriGeometryEnvelope\",envelope:\"esriGeometryEnvelope\"},E={\"small-integer\":\"esriFieldTypeSmallInteger\",integer:\"esriFieldTypeInteger\",long:\"esriFieldTypeLong\",single:\"esriFieldTypeSingle\",double:\"esriFieldTypeDouble\",string:\"esriFieldTypeString\",date:\"esriFieldTypeDate\",\"date-only\":\"esriFieldTypeDateOnly\",\"time-only\":\"esriFieldTypeTimeOnly\",\"timestamp-offset\":\"esriFieldTypeTimestampOffset\",oid:\"esriFieldTypeOID\",geometry:\"esriFieldTypeGeometry\",blob:\"esriFieldTypeBlob\",raster:\"esriFieldTypeRaster\",guid:\"esriFieldTypeGUID\",\"global-id\":\"esriFieldTypeGlobalID\",xml:\"esriFieldTypeXML\",\"big-integer\":\"esriFieldTypeBigInteger\",esriFieldTypeSmallInteger:\"esriFieldTypeSmallInteger\",esriFieldTypeInteger:\"esriFieldTypeInteger\",esriFieldTypeLong:\"esriFieldTypeLong\",esriFieldTypeSingle:\"esriFieldTypeSingle\",esriFieldTypeDouble:\"esriFieldTypeDouble\",esriFieldTypeString:\"esriFieldTypeString\",esriFieldTypeDate:\"esriFieldTypeDate\",esriFieldTypeDateOnly:\"esriFieldTypeDateOnly\",esriFieldTypeTimeOnly:\"esriFieldTypeTimeOnly\",esriFieldTypeTimestampOffset:\"esriFieldTypeTimestampOffset\",esriFieldTypeOID:\"esriFieldTypeOID\",esriFieldTypeGeometry:\"esriFieldTypeGeometry\",esriFieldTypeBlob:\"esriFieldTypeBlob\",esriFieldTypeRaster:\"esriFieldTypeRaster\",esriFieldTypeGUID:\"esriFieldTypeGUID\",esriFieldTypeGlobalID:\"esriFieldTypeGlobalID\",esriFieldTypeXML:\"esriFieldTypeXML\",esriFieldTypeBigInteger:\"esriFieldTypeBigInteger\"};function h(e){switch(e){case\"point\":default:return\"esriGeometryPoint\";case\"polygon\":return\"esriGeometryPolygon\";case\"multipoint\":return\"esriGeometryMultipoint\";case\"polyline\":return\"esriGeometryPolyline\"}}function k(e){return void 0===e?\"\":e=(e=(e=e.replace(/\\/featureserver\\/[0-9]*/i,\"/FeatureServer\")).replace(/\\/mapserver\\/[0-9]*/i,\"/MapServer\")).split(\"?\")[0]}function J(e,r){r||(r={}),\"function\"==typeof r&&(r={cmp:r});const t=\"boolean\"==typeof r.cycles&&r.cycles,i=r.cmp&&(n=r.cmp,function(e){return function(r,t){const i={key:r,value:e[r]},o={key:t,value:e[t]};return n(i,o)}});var n;const o=[];return function e(r){if(r?.toJSON&&\"function\"==typeof r.toJSON&&(r=r.toJSON()),void 0===r)return;if(\"number\"==typeof r)return isFinite(r)?\"\"+r:\"null\";if(\"object\"!=typeof r)return JSON.stringify(r);let n,l;if(Array.isArray(r)){for(l=\"[\",n=0;n<r.length;n++)n&&(l+=\",\"),l+=e(r[n])||\"null\";return l+\"]\"}if(null===r)return\"null\";if(o.includes(r)){if(t)return JSON.stringify(\"__cycle__\");throw new TypeError(\"Converting circular structure to JSON\")}const s=o.push(r)-1,y=Object.keys(r).sort(i?.(r));for(l=\"\",n=0;n<y.length;n++){const t=y[n],i=e(r[t]);i&&(l&&(l+=\",\"),l+=JSON.stringify(t)+\":\"+i)}return o.splice(s,1),\"{\"+l+\"}\"}(e)}function M(e){switch(e.type){case\"catalog\":case\"csv\":case\"feature\":case\"geojson\":case\"oriented-imagery\":case\"subtype-group\":case\"wfs\":return!0;default:return!1}}function j(e){switch(e.type){case\"catalog-footprint\":case\"subtype-sublayer\":return!0;default:return M(e)}}export{l as FeatureServiceDatabaseType,s as IdState,x as callback,S as cloneAttributes,y as cloneField,b as convertLinearUnitsToCode,O as convertSquareUnitsToCode,D as defaultMaxRecords,G as equalityTest,P as errback,u as esriFieldToJson,k as extractServiceUrl,g as isArcadeDate,T as isArcadeDateOnly,F as isArcadeTime,m as isArray,a as isBoolean,f as isDate,d as isLuxonDate,c as isNumber,p as isString,j as isSupportedLayer,M as isSupportedSourceLayer,E as layerFieldEsriConstants,N as layerGeometryEsriConstants,w as layerGeometryEsriRestConstants,I as sameGeomType,v as shapeExtent,J as stableStringify,h as toEsriGeometryType};\n"],"names":["l","s","y","n","u","f","d","o","g","r","e","T","F","t","O","v","i","b","D","N","w","E","k","J","M","j"],"mappings":"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","x_google_ignoreList":[0]}