{"version":3,"file":"webStyleSymbolUtils-DndKwcG-.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import l from\"../../core/Error.js\";import{urlToObject as o,removeFile as n}from\"../../core/urlUtils.js\";import s from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as m}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as u,requestJSON as p,makeCIMSymbolRef as f,Style2DUrlTemplate as y,symbolUrlFromStyleItem as c}from\"./styleUtils.js\";import{Thumbnail as b}from\"./Thumbnail.js\";function g(t,e,r,o){const n=t.name;return null==n?Promise.reject(new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):\"Esri2DPointSymbolsStyle\"===t.styleName?d(n,e,o):u(t,e,o).then((t=>h(t,n,e,r,c,o)))}function j(t,e){return e.items.find((e=>e.name===t))}function h(u,y,c,g,h,d){const U=null!=c?.portal?c.portal:s.getDefault(),N={portal:U,url:o(u.baseUrl),origin:\"portal-item\"},w=j(y,u.data);if(!w){const t=`The symbol name '${y}' could not be found`;return Promise.reject(new l(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:y}))}let S=i(h(w,g),N),D=w.thumbnail?.href??null;const O=w.thumbnail?.imageData;e()&&(S=r(S)??\"\",D=r(D));const P={portal:U,url:o(n(S)),origin:\"portal-item\"};return p(S,d).then((e=>{const r=\"cimRef\"===g?f(e.data):e.data,l=m(r,P);if(l&&t(l)){if(D){const t=i(D,N);l.thumbnail=new b({url:t})}else O&&(l.thumbnail=new b({url:`data:image/png;base64,${O}`}));u.styleUrl?l.styleOrigin=new a({portal:c.portal,styleUrl:u.styleUrl,name:y}):u.styleName&&(l.styleOrigin=new a({portal:c.portal,styleName:u.styleName,name:y}))}return l}))}function d(t,e,r){const l=y.replaceAll(/\\{SymbolName\\}/gi,t),i=null!=e.portal?e.portal:s.getDefault();return p(l,r).then((t=>{const e=f(t.data);return m(e,{portal:i,url:o(n(l)),origin:\"portal-item\"})}))}export{h as fetchSymbolFromStyle,j as getStyleItemFromStyle,g as resolveWebStyleSymbol};\n"],"names":["g","r","o","n","l","d","u","t","h","c","j","e","y","U","s","N","w","S","i","D","O","P","p","f","m","b","a"],"mappings":";;;AAI8kB,SAASA,EAAE,GAAE,GAAEC,GAAEC,GAAE;AAAC,QAAMC,IAAE,EAAE;AAAK,SAAaA,KAAN,OAAQ,QAAQ,OAAO,IAAIC,EAAE,wDAAuD,wCAAwC,CAAC,IAA8B,EAAE,cAA9B,4BAAwCC,EAAEF,GAAE,GAAED,CAAC,IAAEI,EAAE,GAAE,GAAEJ,CAAC,EAAE,KAAM,CAAAK,MAAGC,EAAED,GAAEJ,GAAE,GAAEF,GAAEQ,GAAEP,CAAC,CAAC;AAAE;AAAC,SAASQ,EAAE,GAAE,GAAE;AAAC,SAAO,EAAE,MAAM,KAAM,CAAAC,MAAGA,EAAE,SAAO,CAAC;AAAE;AAAC,SAASH,EAAEF,GAAEM,GAAEH,GAAET,GAAEQ,GAAEH,GAAE;AAAC,QAAMQ,IAAQJ,GAAG,UAAT,OAAgBA,EAAE,SAAOK,EAAE,WAAU,GAAGC,IAAE,EAAC,QAAOF,GAAE,KAAIX,EAAEI,EAAE,OAAO,GAAE,QAAO,cAAa,GAAEU,IAAEN,EAAEE,GAAEN,EAAE,IAAI;AAAE,MAAG,CAACU,GAAE;AAAC,UAAMT,IAAE,oBAAoBK,CAAC;AAAuB,WAAO,QAAQ,OAAO,IAAIR,EAAE,0CAAyCG,GAAE,EAAC,YAAWK,EAAC,CAAC,CAAC;AAAA,EAAC;AAAC,MAAIK,IAAEC,EAAEV,EAAEQ,GAAEhB,CAAC,GAAEe,CAAC,GAAEI,IAAEH,EAAE,WAAW,QAAM;AAAK,QAAMI,IAAEJ,EAAE,WAAW;AAAUL,EAAAA,EAAC,MAAKM,IAAEhB,EAAEgB,CAAC,KAAG,IAAGE,IAAElB,EAAEkB,CAAC;AAAG,QAAME,IAAE,EAAC,QAAOR,GAAE,KAAIX,EAAEC,EAAEc,CAAC,CAAC,GAAE,QAAO,cAAa;AAAE,SAAOK,EAAEL,GAAEZ,CAAC,EAAE,KAAM,CAAAM,MAAG;AAAC,UAAMV,IAAaD,MAAX,WAAauB,EAAEZ,EAAE,IAAI,IAAEA,EAAE,MAAKP,IAAEoB,EAAEvB,GAAEoB,CAAC;AAAE,QAAGjB,KAAGG,EAAEH,CAAC,GAAE;AAAC,UAAGe,GAAE;AAAC,cAAMZ,IAAEW,EAAEC,GAAEJ,CAAC;AAAE,QAAAX,EAAE,YAAU,IAAIqB,EAAE,EAAC,KAAIlB,EAAC,CAAC;AAAA,MAAC,MAAM,CAAAa,MAAIhB,EAAE,YAAU,IAAIqB,EAAE,EAAC,KAAI,yBAAyBL,CAAC,GAAE,CAAC;AAAG,MAAAd,EAAE,WAASF,EAAE,cAAY,IAAIsB,EAAE,EAAC,QAAOjB,EAAE,QAAO,UAASH,EAAE,UAAS,MAAKM,EAAC,CAAC,IAAEN,EAAE,cAAYF,EAAE,cAAY,IAAIsB,EAAE,EAAC,QAAOjB,EAAE,QAAO,WAAUH,EAAE,WAAU,MAAKM,EAAC,CAAC;AAAA,IAAE;AAAC,WAAOR;AAAA,EAAC,CAAG;AAAA;AAAC,SAASC,EAAE,GAAE,GAAEJ,GAAE;AAAC,QAAMG,IAAEQ,EAAE,WAAW,oBAAmB,CAAC,GAAEM,IAAQ,EAAE,UAAR,OAAe,EAAE,SAAOJ,EAAE,WAAY;AAAC,SAAOQ,EAAElB,GAAEH,CAAC,EAAE,KAAM,CAAAM,MAAG;AAAC,UAAMI,IAAEY,EAAEhB,EAAE,IAAI;AAAE,WAAOiB,EAAEb,GAAE,EAAC,QAAOO,GAAE,KAAIhB,EAAEC,EAAEC,CAAC,CAAC,GAAE,QAAO,cAAa,CAAC;AAAA,EAAC,CAAG;AAAA;","x_google_ignoreList":[0]}