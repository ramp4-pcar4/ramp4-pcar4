{"version":3,"file":"CSVSourceWorker-b595ILmA.js","sources":["../../node_modules/@arcgis/core/layers/support/locationUtils.js","../../node_modules/@arcgis/core/layers/graphics/sources/csv/csv.js","../../node_modules/@arcgis/core/layers/graphics/sources/support/CSVSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{normalizeFieldName as e}from\"./fieldUtils.js\";function n(n,d,i){d=e(d)?.toLowerCase(),i=e(i)?.toLowerCase();const o=n.map((e=>e.toLowerCase())),a=d?n[o.indexOf(d)]:null,u=i?n[o.indexOf(i)]:null;return{longitudeFieldName:a||n[o.indexOf(t.find((e=>o.includes(e))))],latitudeFieldName:u||n[o.indexOf(l.find((e=>o.includes(e))))]}}const l=[\"lat\",\"lat83\",\"latitude\",\"latitude83\",\"latdecdeg\",\"lat_dd\",\"y\",\"ycenter\",\"point_y\"],t=[\"lon\",\"lng\",\"lng83\",\"long\",\"long83\",\"longitude\",\"longitude83\",\"longdecdeg\",\"long_dd\",\"x\",\"xcenter\",\"point_x\"];export{n as inferLocationInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isDateString as e}from\"../../../../core/date.js\";import{_parseInfo as t}from\"../../../../core/number.js\";import{normalizeFieldName as n,getFieldDefaultLength as r}from\"../../../support/fieldUtils.js\";import{inferLocationInfo as i}from\"../../../support/locationUtils.js\";const o=/^\\s*\"([\\S\\s]*)\"\\s*$/,l=/\"\"/g,s=\"\\n\",u=[\",\",\" \",\";\",\"|\",\"\\t\"];function*c(e,t,n){let r=0;for(;r<=e.length;){const i=e.indexOf(t,r),o=e.slice(r,i>-1?i:void 0);r+=o.length+t.length,n&&!o.trim()||(yield o)}}function f(e){const t=e.includes(\"\\r\\n\")?\"\\r\\n\":s;return c(e,t,!0)}function a(e,t){return c(e,t,!1)}function d(e,t,n){e=e.trim(),t=t?.trim();const r=[],o=Array.from(new Set([n?.delimiter,...u])).filter((e=>null!=e));for(const i of o){const n=g(e,i).length,o=g(t,i).length??n;n>1&&r.push({weight:Math.min(n,o),delimiter:i})}const l=r.sort((({weight:e},{weight:t})=>t-e)).map((({delimiter:e})=>e));for(const s of l){const t=m(e,s).names,r=i(t,n?.longitudeField,n?.latitudeField);if(r.longitudeFieldName&&r.latitudeFieldName)return{delimiter:s,locationInfo:r}}return{delimiter:l[0],locationInfo:null}}function*p(e,t,n,r=()=>Object.create(null)){const i=f(e);i.next();let u=\"\",c=\"\",d=0,p=r(),m=0;e:for(const f of i){const e=a(f,n);for(const i of e)if(u+=c+i,c=\"\",d+=h(i),d%2==0){if(d>0){const e=o.exec(u);if(!e){p=r(),m=0,u=\"\",d=0;continue e}p[t[m]]=e[1].replaceAll(l,'\"'),m++}else p[t[m]]=u,m++;u=\"\",d=0}else c=n;0===d?(yield p,p=r(),m=0):c=s}}function m(e,t){const r=g(e,t).filter((e=>null!=e)),i=r.map((e=>n(e)));for(let n=i.length-1;n>=0;n--)i[n]||(i.splice(n,1),r.splice(n,1));return{names:i,aliases:r}}function g(e,t){if(!e?.length)return[];const n=[];let r=\"\",i=\"\",s=0;const u=a(e,t);for(const c of u)if(r+=i+c,i=\"\",s+=h(c),s%2==0){if(s>0){const e=o.exec(r);e&&n.push(e[1].replaceAll(l,'\"'))}else n.push(r);r=\"\",s=0}else i=t;return n}function h(e){let t=0,n=0;for(n=e.indexOf('\"',n);n>=0;)t++,n=e.indexOf('\"',n+1);return t}function N(e,t,n,i,o){const l=[],s=p(e,n,t),u=[];for(const r of s){if(10===u.length)break;u.push(r)}for(let c=0;c<n.length;c++){const e=n[c],t=i[c];if(e===o.longitudeFieldName||e===o.latitudeFieldName)l.push({name:e,type:\"esriFieldTypeDouble\",alias:t});else{let n;switch(b(u.map((t=>t[e])))){case\"integer\":n=\"esriFieldTypeInteger\";break;case\"double\":n=\"esriFieldTypeDouble\";break;case\"date\":n=\"esriFieldTypeDate\";break;default:n=\"esriFieldTypeString\"}l.push({name:e,type:n,alias:t,length:r(n)})}}return l}function b(t){if(!t.length)return\"string\";const n=/[^+\\-.,0-9]/;return t.map((t=>{if(\"\"!==t){if(!n.test(t)){let e=x(t);if(!isNaN(e))return/[.,]/.test(t)||!Number.isInteger(e)||e>214783647||e<-214783648?\"double\":\"integer\";if(t.includes(\"E\")){if(e=Number(t),!Number.isNaN(e))return\"double\";if(t.includes(\",\")&&(t=t.replace(\",\",\".\"),e=Number(t),!Number.isNaN(e)))return\"double\"}}return e(t)?\"date\":\"string\"}})).reduce(((e,t)=>void 0===e?t:void 0===t?e:e===t?t:\"string\"===e||\"string\"===t?\"string\":\"double\"===e||\"double\"===t?\"double\":void 0))}const x=function(){const e=t(),n=new RegExp(\"^\"+e.regexp+\"$\"),r=new RegExp(\"[\"+e.group+\"\\\\s\\\\xa0]\",\"g\"),i=e.factor;return t=>{const o=n.exec(t);if(e.factor=i,!o)return NaN;let l=o[1];if(!o[1]){if(!o[2])return NaN;l=o[2],e.factor*=-1}return l=l.replace(r,\"\").replace(e.decimal,\".\"),+l*e.factor}}();function y(e){return JSON.parse(JSON.stringify(e))}export{m as extractFieldNamesAndAliasesFromRow,d as inferDelimiterAndLocationInfo,b as inferFieldType,N as inferFields,x as parseNumber,p as parseRows,a as readRowParts,f as readRows,y as severSlicedString,g as splitSingleRow};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import e from\"../../../../request.js\";import{createTask as t}from\"../../../../core/asyncUtils.js\";import{parseDate as i}from\"../../../../core/date.js\";import n from\"../../../../core/Error.js\";import r from\"../../../../core/Logger.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{urlToObject as o,getFilename as a}from\"../../../../core/urlUtils.js\";import{projectMany as l}from\"../../../../geometry/projection.js\";import{jsonAdapter as m}from\"../../../../geometry/geometryAdapters/json.js\";import{equals as c,isWebMercator as d,wgs84 as u}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as f}from\"../../../../geometry/support/webMercatorUtils.js\";import{OptimizedFeature as p}from\"../../OptimizedFeature.js\";import y from\"../../OptimizedGeometry.js\";import h from\"../../data/FeatureStore.js\";import{checkProjectionSupport as g}from\"../../data/projectionSupport.js\";import{QueryEngine as I}from\"../../data/QueryEngine.js\";import{parseRows as _,parseNumber as F,severSlicedString as w,readRows as E,inferDelimiterAndLocationInfo as j,extractFieldNamesAndAliasesFromRow as T,inferFields as x}from\"../csv/csv.js\";import{createDefaultAttributesFunction as N,createDrawingInfo as S}from\"./clientSideDefaults.js\";import q from\"../../../support/FieldsIndex.js\";import{getFieldDefaultValue as b}from\"../../../support/fieldUtils.js\";import{utc as C}from\"../../../../time/timeZoneUtils.js\";import O from\"../../../../geometry/SpatialReference.js\";const v=S(\"esriGeometryPoint\"),D=[\"csv\"],k=[0,0];class P{constructor(e,t){this.x=e,this.y=t}}class R{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t={}){this._loadOptions=e;const[i]=await Promise.all([this._fetch(t.signal),this._checkProjection(e?.parsingOptions?.spatialReference)]),n=V(i,e);this._locationInfo=n.locationInfo,this._delimiter=n.delimiter,this._queryEngine=this._createQueryEngine(n);const r=await this._createFeatures(i);this._queryEngine.featureStore.addMany(r);const{fullExtent:s,timeExtent:o}=await this._queryEngine.fetchRecomputedExtents();if(n.layerDefinition.extent=s,o){const{start:e,end:t}=o;n.layerDefinition.timeInfo.timeExtent=[e,t]}return n}async applyEdits(){throw new n(\"csv-layer:editing-not-supported\",\"applyEdits() is not supported on CSVLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){this._loadOptions.customParameters=e,this._snapshotTask?.abort(),this._snapshotTask=t(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),s(e)||r.getLogger(\"esri.layers.CSVLayer\").error(new n(\"csv-layer:refresh\",\"An error occurred during refresh\",{error:e}))})),await this._waitSnapshotComplete();const{fullExtent:i,timeExtent:o}=await this._queryEngine.fetchRecomputedExtents();return{extent:i,timeExtent:o}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(t){const{url:i,customParameters:r}=this._loadOptions;if(!i)throw new n(\"csv-layer:invalid-source\",\"url not defined\");const s=o(i);return(await e(s.path,{query:{...s.query,...r},responseType:\"text\",signal:t})).data}_createQueryEngine(e){const{objectIdField:t,fields:i,extent:n,timeInfo:r}=e.layerDefinition,s=new h({geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1});return new I({fieldsIndex:q.fromLayerJSON({fields:i,dateFieldsTimeReference:{timeZoneIANA:C}}),geometryType:\"esriGeometryPoint\",hasM:!1,hasZ:!1,timeInfo:r,objectIdField:t,spatialReference:n.spatialReference||{wkid:4326},featureStore:s})}async _createFeatures(e){const{latitudeFieldName:t,longitudeFieldName:n}=this._locationInfo,{objectIdField:r,fieldsIndex:s,spatialReference:o}=this._queryEngine;let a=[];const u=[],h=s.fields.filter((e=>e.name!==r)).map((e=>e.name));let g=0;const I={};for(const i of s.fields)if(\"esriFieldTypeOID\"!==i.type&&\"esriFieldTypeGlobalID\"!==i.type){const e=b(i);void 0!==e&&(I[i.name]=e)}const E=_(e,h,this._delimiter,N(I,r));for(const l of E){const e=this._parseCoordinateValue(l[t]),o=this._parseCoordinateValue(l[n]);if(null!=o&&null!=e&&!isNaN(e)&&!isNaN(o)){l[t]=e,l[n]=o;for(const e in l)if(e!==t&&e!==n)if(s.isDateField(e))l[e]=i(l[e]);else if(s.isNumericField(e)){const t=F(l[e]);isNaN(t)?l[e]=null:l[e]=t}else null!=l[e]&&(l[e]=w(l[e]));l[r]=g,g++,a.push(new P(o,e)),u.push(l)}}if(!c({wkid:4326},o))if(d(o))for(const i of a)[i.x,i.y]=f(i.x,i.y,k);else a=l(m,a,O.WGS84,o,null,null);const j=[];for(let i=0;i<a.length;i++){const{x:e,y:t}=a[i],n=u[i];n[r]=i+1,j.push(new p(new y([],[e,t]),n,null,n[r]))}return j}_parseCoordinateValue(e){if(null==e||\"\"===e)return null;let t=F(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}async _checkProjection(e){try{await g(u,e)}catch{throw new n(\"csv-layer:projection-not-supported\",\"Projection not supported\")}}}function V(e,t){const i=t.parsingOptions||{},r={delimiter:i.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:i.latitudeField,longitudeFieldName:i.longitudeField}},s=r.layerDefinition={name:a(t.url,D)||\"csv\",dateFieldsTimeReference:{timeZoneIANA:C},drawingInfo:v,geometryType:\"esriGeometryPoint\",objectIdField:null,fields:[],timeInfo:i.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:i.spatialReference||{wkid:4326}}},o=E(e),l=o.next().value?.trim(),m=o.next().value?.trim();if(!l)throw new n(\"csv-layer:empty-csv\",\"CSV is empty\",{csv:e});const{delimiter:c,locationInfo:d}=j(l,m,i);if(!c)throw new n(\"csv-layer:invalid-delimiter\",\"Unable to detect the delimiter from CSV\",{firstLine:l,secondLine:m,parsingOptions:i});if(!d)throw new n(\"csv-layer:location-fields-not-found\",\"Unable to identify latitude and longitude fields from the CSV file\",{firstLine:l,secondLine:m,parsingOptions:i});r.locationInfo=d,r.delimiter=c;const{names:u,aliases:f}=T(l,c),p=x(e,r.delimiter,u,f,r.locationInfo);if(i.fields?.length){const e=new q(i.fields);for(const t of p){const i=e.get(t.name);i&&Object.assign(t,i)}}if(!p.some((e=>\"esriFieldTypeOID\"===e.type&&(s.objectIdField=e.name,!0)))){const e={name:\"__OBJECTID\",alias:\"__OBJECTID\",type:\"esriFieldTypeOID\",editable:!1,nullable:!1};s.objectIdField=e.name,p.unshift(e)}s.fields=p;const y=new q(s.fields);if(r.locationInfo&&(r.locationInfo.latitudeFieldName=y.get(r.locationInfo.latitudeFieldName).name,r.locationInfo.longitudeFieldName=y.get(r.locationInfo.longitudeFieldName).name),s.timeInfo){const e=s.timeInfo;if(e.startTimeField){const t=y.get(e.startTimeField);t?(e.startTimeField=t.name,t.type=\"esriFieldTypeDate\"):e.startTimeField=null}if(e.endTimeField){const t=y.get(e.endTimeField);t?(e.endTimeField=t.name,t.type=\"esriFieldTypeDate\"):e.endTimeField=null}if(e.trackIdField){const t=y.get(e.trackIdField);e.trackIdField=t?t.name:null}e.startTimeField||e.endTimeField||(s.timeInfo=null)}return r}export{R as default};\n"],"names":["n","d","i","e","o","a","u","t","l","s","c","r","f","g","m","p","h","N","b","x","y","v","S","D","k","P","R","V","I","q","C","E","_","F","w","O","j","T"],"mappings":"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","x_google_ignoreList":[0,1,2]}