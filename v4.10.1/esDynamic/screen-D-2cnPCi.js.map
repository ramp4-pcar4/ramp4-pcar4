{"version":3,"file":"screen-D-2cnPCi.js","sources":["../../src/fixtures/legend/screen.vue"],"sourcesContent":["<template>\n    <panel-screen :panel=\"panel\">\n        <template #header> {{ t('legend.title') }} </template>\n\n        <template #content>\n            <legend-header />\n            <div\n                v-focus-list\n                :content=\"t('panels.controls.items')\"\n                v-tippy=\"{\n                    trigger: 'manual',\n                    placement: 'top-end',\n                    touch: false,\n                    maxWidth: 190\n                }\"\n                ref=\"el\"\n            >\n                <legend-item v-for=\"item in children\" :legendItem=\"item\" :key=\"item.uid\" />\n            </div>\n        </template>\n    </panel-screen>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, defineAsyncComponent, inject, onBeforeUnmount, onMounted, ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\n\nimport type { InstanceAPI, PanelInstance } from '@/api';\nimport type { PropType } from 'vue';\nimport type { LegendAPI } from './api/legend';\nimport type { LegendItem } from './store/legend-item';\n\nconst legendHeader = defineAsyncComponent(() => import('./header.vue'));\nconst legendItem = defineAsyncComponent(() => import('./components/item.vue'));\n\nconst { t } = useI18n();\nconst iApi = inject('iApi') as InstanceAPI;\nconst el = ref<Element>();\n\nconst blurEvent = () => {\n    (el.value as any)._tippy.hide();\n};\n\nconst keyupEvent = (e: Event) => {\n    const evt = e as KeyboardEvent;\n    if (evt.key === 'Tab' && el.value?.matches(':focus')) {\n        (el.value as any)._tippy.show();\n    }\n};\n\nonMounted(() => {\n    el.value?.addEventListener('blur', blurEvent);\n\n    el.value?.addEventListener('keyup', keyupEvent);\n});\n\nonBeforeUnmount(() => {\n    el.value?.removeEventListener('blur', blurEvent);\n\n    el.value?.removeEventListener('keyup', keyupEvent);\n});\n\ndefineProps({\n    panel: {\n        type: Object as PropType<PanelInstance>,\n        required: true\n    }\n});\n\nconst children = computed<Array<LegendItem>>(() => {\n    let legendApi = iApi.fixture.get<LegendAPI>('legend');\n    if (legendApi) {\n        return [...legendApi.getLegend()];\n    }\n    return [];\n});\n</script>\n\n<style lang=\"scss\" scoped></style>\n"],"names":["legendHeader","defineAsyncComponent","legendItem","t","useI18n","iApi","inject","el","ref","blurEvent","keyupEvent","e","onMounted","onBeforeUnmount","children","computed","legendApi"],"mappings":";;;;;;;;;;AAgCA,UAAMA,IAAeC,EAAqB,MAAM,OAAO,sBAAc,CAAC,GAChEC,IAAaD,EAAqB,MAAM,OAAO,oBAAuB,CAAC,GAEvE,EAAE,GAAAE,EAAE,IAAIC,EAAQ,GAChBC,IAAOC,EAAO,MAAM,GACpBC,IAAKC,EAAa,GAElBC,IAAY,MAAM;AACnB,MAAAF,EAAG,MAAc,OAAO,KAAK;AAAA,IAClC,GAEMG,IAAa,CAACC,MAAa;AAE7B,MADYA,EACJ,QAAQ,SAASJ,EAAG,OAAO,QAAQ,QAAQ,KAC9CA,EAAG,MAAc,OAAO,KAAK;AAAA,IAEtC;AAEA,IAAAK,EAAU,MAAM;AACT,MAAAL,EAAA,OAAO,iBAAiB,QAAQE,CAAS,GAEzCF,EAAA,OAAO,iBAAiB,SAASG,CAAU;AAAA,IAAA,CACjD,GAEDG,EAAgB,MAAM;AACf,MAAAN,EAAA,OAAO,oBAAoB,QAAQE,CAAS,GAE5CF,EAAA,OAAO,oBAAoB,SAASG,CAAU;AAAA,IAAA,CACpD;AASK,UAAAI,IAAWC,EAA4B,MAAM;AAC/C,UAAIC,IAAYX,EAAK,QAAQ,IAAe,QAAQ;AACpD,aAAIW,IACO,CAAC,GAAGA,EAAU,WAAW,IAE7B,CAAC;AAAA,IAAA,CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}