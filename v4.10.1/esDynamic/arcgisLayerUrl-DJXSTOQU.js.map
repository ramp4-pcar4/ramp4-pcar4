{"version":3,"file":"arcgisLayerUrl-DJXSTOQU.js","sources":["../../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{urlToObject as e,getOrigin as r,removeTrailingSlash as t,removeQueryParameters as s,join as n,Url as l,makeAbsolute as i}from\"../../core/urlUtils.js\";import{w as u}from\"../../chunks/persistableUrlUtils.js\";const o={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",knowledgegraphserver:\"KnowledgeGraphServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\",\"3dtilesserver\":\"3DTilesServer\",videoserver:\"VideoServer\"},a=Object.values(o),c=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),f=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function p(e){return c.test(e)}function d(r){if(null==r)return null;const t=e(r),s=t?.path.match(c)||t?.path.match(v);if(!s)return null;const[,n,l,i,u]=s,a=l.indexOf(\"/\");return{title:m(-1!==a?l.slice(a+1):l),serverType:o[i.toLowerCase()],sublayer:null!=u&&\"\"!==u?parseInt(u,10):null,url:{path:n}}}function h(r){const t=e(r).path.match(f);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function m(e){return(e=e.replaceAll(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function w(e,r){const t=[];if(e){const r=d(e);null!=r&&r.title&&t.push(r.title)}if(r){const e=m(r);t.push(e)}if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(\" - \")}function g(e){let t=r(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(\".arcgis.com\")&&(t.startsWith(\"services\")||t.startsWith(\"tiles\")||t.startsWith(\"features\")))}function y(e,r){return e?t(s(e,r)):e}function S(r){let{url:n}=r;if(!n)return{url:n};n=s(n,r.logger);const l=e(n),i=d(l.path);let u;if(null!=i)null!=i.sublayer&&null==r.layer.layerId&&(u=i.sublayer),n=i.url.path;else if(r.nonStandardUrlAllowed){const e=h(l.path);null!=e&&(n=e.serviceUrl,u=e.sublayerId)}return{url:t(n),layerId:u}}function C(e,r,t,s,l){u(r,s,\"url\",l),s.url&&null!=e.layerId&&(s.url=n(s.url,t,e.layerId.toString()))}function b(e){if(!e)return!1;const r=e.toLowerCase(),t=r.includes(\"/services/\"),s=r.includes(\"/mapserver/wmsserver\"),n=r.includes(\"/imageserver/wmsserver\"),l=r.includes(\"/wmsserver\");return t&&(s||n||l)}function I(e){if(!e)return!1;const r=new l(i(e)),t=r.authority?.toLowerCase();return\"server.arcgisonline.com\"===t||\"services.arcgisonline.com\"===t}export{m as cleanTitle,p as isArcGISUrl,g as isHostedAgolService,I as isServerOrServicesAGOLUrl,b as isWmsServer,d as parse,h as parseNonStandardSublayerUrl,y as sanitizeUrl,S as sanitizeUrlWithLayerId,a as serverTypes,w as titleFromUrlAndName,C as writeUrlWithLayerId};\n"],"names":["o","a","c","v","f","p","e","d","t","s","n","l","i","m","h","w","r","g","y","S","u","C","b"],"mappings":"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","x_google_ignoreList":[0]}