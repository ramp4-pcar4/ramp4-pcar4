{"version":3,"file":"diffUtils-CkT4754r.js","sources":["../../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../Accessor.js\";import e from\"../Collection.js\";import{getProperties as n}from\"./utils.js\";const o=new Set([\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"]);function r(e){return e instanceof t}function f(t){return t instanceof e?Object.keys(t.items):r(t)?n(t).keys():t?Object.keys(t):[]}function i(t,n){return t instanceof e?t.items[n]:t[n]}function l(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function u(t){return t?t.declaredClass:null}function c(t,e){const n=t.diff;if(n&&\"function\"==typeof n)return n(t,e);const s=f(t),p=f(e);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||l(t,e))return{type:\"complete\",oldValue:t,newValue:e};const a=p.filter((t=>!s.includes(t))),y=s.filter((t=>!p.includes(t))),d=s.filter((n=>p.includes(n)&&i(t,n)!==i(e,n))).concat(a,y).sort(),m=u(t);if(m&&o.has(m)&&d.length)return{type:\"complete\",oldValue:t,newValue:e};let h;const b=r(t)&&r(e);for(const o of d){const r=i(t,o),f=i(e,o);let l;if((b||\"function\"!=typeof r&&\"function\"!=typeof f)&&(r!==f&&(null!=r||null!=f))){if(n&&n[o]&&\"function\"==typeof n[o])l=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;l={type:\"complete\",oldValue:r,newValue:f}}else l=\"object\"==typeof r&&\"object\"==typeof f&&u(r)===u(f)?c(r,f):{type:\"complete\",oldValue:r,newValue:f};null!=l&&(null!=h?h.diff[o]=l:h={type:\"partial\",diff:{[o]:l}})}}return h}function s(t,e){return p(t,e)}function p(t,e){if(null==t)return!1;const n=e.split(\".\");let o=t;for(const r of n){if(\"complete\"===o.type)return!0;if(\"partial\"!==o.type)return!1;{const t=o.diff[r];if(!t)return!1;o=t}}return!0}function a(t,e){for(const n of e)if(p(t,n))return!0;return!1}function y(t,e){if(!t)return!1;if(\"partial\"===t.type){const n=Object.keys(t.diff);return 1===n.length&&n[0]===e}return!1}function d(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(null!=t||null!=e))return null==t||null==e||\"object\"==typeof t&&\"object\"==typeof e&&u(t)!==u(e)?{type:\"complete\",oldValue:t,newValue:e}:c(t,e)}function m(t){if(null==t)return!0;switch(t.type){case\"complete\":return!1;case\"collection\":{const e=t;for(const t of e.added)if(!m(t))return!1;for(const t of e.removed)if(!m(t))return!1;for(const t of e.changed)if(!m(t))return!1;return!0}case\"partial\":for(const e in t.diff){if(!m(t.diff[e]))return!1}return!0}}export{d as diff,p as hasDiff,a as hasDiffAny,s as hasRootDiff,y as hasRootDiffOnly,m as isEmpty};\n"],"names":["o","r","t","f","e","n","i","l","u","c","s","p","a","y","h","b","d"],"mappings":"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","x_google_ignoreList":[0]}