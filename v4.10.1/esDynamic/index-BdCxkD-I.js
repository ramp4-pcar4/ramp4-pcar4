import{dM as E,dN as w,e2 as y,e3 as h,gd as m,e8 as _,dE as p,e9 as M,dY as T,dX as A,d$ as x,e0 as R,dU as $,fN as N,F as P}from"./main-Dv0FawL-.js";const D={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}},I={class:"pg-label"},S=E({__name:"map-panguard",setup(v){const{t:r}=w(),a=y("iApi"),t=h(),d=h(-1),o=m([]),n=m([]);_(()=>{u(),n.push(a.event.on(p.MAP_CREATED,()=>{u()})),n.push(a.event.on(p.MAP_DESTROYED,()=>{o.forEach(e=>e.remove())})),n.push(a.event.on(p.MAP_REFRESH_START,()=>{o.forEach(e=>e.remove())})),n.push(a.event.on(p.MAP_REFRESH_END,()=>{u()}))}),M(()=>{n.forEach(e=>a.event.off(e)),o.forEach(e=>e.remove())});const u=()=>{const e=new Map;a.geo.map.viewPromise.then(()=>{o.push(a.geo.map.esriView.on("pointer-down",s=>{s.pointerType==="touch"&&e.set(s.pointerId,{x:s.x,y:s.y})})),o.push(a.geo.map.esriView.on(["pointer-up","pointer-leave"],s=>{s.pointerType==="touch"&&window.setTimeout(()=>{e.delete(s.pointerId)},200)})),o.push(a.geo.map.esriView.on("pointer-move",s=>{const{pointerId:g,pointerType:f,x:c,y:l}=s,i=e.get(g);if(!i||f!=="touch"||e.size!==1){t.value.classList.remove("pg-active");return}Math.sqrt(Math.pow(c-i.x,2)+Math.pow(l-i.y,2))<20||(t.value.classList.add("pg-active"),d.value!==-1&&clearTimeout(d.value),d.value=window.setTimeout(()=>{t.value.classList.remove("pg-active")},2e3),window.scrollBy(i.x-c,i.y-l))}))})};return(e,s)=>($(),T("div",{class:"pg",ref_key:"panGuard",ref:t},[A("p",I,x(R(r)("panguard.instructions")),1)],512))}}),C=N(S,[["__scopeId","data-v-e91f9000"]]);class L extends P{added(){Object.entries(D).forEach(t=>this.$iApi.$i18n.mergeLocaleMessage(...t));const{destroy:r,el:a}=this.mount(C,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(a.childNodes[0]),this.removed=()=>{r()}}}export{L as default};
