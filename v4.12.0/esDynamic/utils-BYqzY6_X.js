import{i as W,n as T}from"./defaultCIMValues-gWpu7WSC.js";function X(e){return typeof e=="function"}function Y(e,r,t,o){return X(e)?e(r,t,o):e}function $(e){return[e.r,e.g,e.b,e.a]}const J=` /-,
`;function G(e){let r=e.length;for(;r--;)if(!J.includes(e.charAt(r)))return!1;return!0}function Q(e,r){const t=[];let o=0,a=-1;do if(a=e.indexOf("[",o),a>=o){if(a>o){const n=e.slice(o,a);t.push([n,null,G(n)])}if(o=a+1,a=e.indexOf("]",o),a>=o){if(a>o){const n=r[e.slice(o,a)];n&&t.push([null,n,!1])}o=a+1}}while(a!==-1);if(o<e.length){const n=e.slice(o);t.push([n,null,G(n)])}return t}function K(e,r,t,o){let a="",n=null;for(const M of r){const[s,u,f]=M;if(s)f?n=s:(n&&(a+=n,n=null),a+=s);else{let m=u;t!=null&&(m=q(u,t));const l=e.attributes[m];l&&(n&&(a+=n,n=null),a+=l)}}return Z(a,o)}function Z(e,r){switch(typeof e!="string"&&(e=String(e)),r){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function _(e,r,t,o,a,n,M=!0){const s=r/a,u=t/n,f=Math.ceil(s/2),m=Math.ceil(u/2);for(let l=0;l<n;l++)for(let i=0;i<a;i++){const h=4*(i+(M?n-l-1:l)*a);let c=0,p=0,b=0,d=0,S=0,P=0,k=0;const L=(l+.5)*u;for(let I=Math.floor(l*u);I<(l+1)*u;I++){const v=Math.abs(L-(I+.5))/m,H=(i+.5)*s,U=v*v;for(let g=Math.floor(i*s);g<(i+1)*s;g++){let y=Math.abs(H-(g+.5))/f;const C=Math.sqrt(U+y*y);C>=-1&&C<=1&&(c=2*C*C*C-3*C*C+1,c>0&&(y=4*(g+I*r),k+=c*e[y+3],b+=c,e[y+3]<255&&(c=c*e[y+3]/250),d+=c*e[y],S+=c*e[y+1],P+=c*e[y+2],p+=c))}}o[h]=d/p,o[h+1]=S/p,o[h+2]=P/p,o[h+3]=k/b}}function V(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function ee(e){return e.data?.symbol??null}function re(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function te(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function ne(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function z(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const oe=(e,r=0)=>e==null||isNaN(e)?r:e,ae=(e,r)=>e??r,se=(e,r)=>e??r,le=e=>e.tintColor?V(e.tintColor):[255,255,255,1],ie=e=>{if(!e)return!1;for(const r of e)switch(r.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function ce(){return import("./geometryEngineJSON-CGn_tfx8.js").then(e=>e.g)}function ue(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function fe(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Me(e){let r="normal",t="normal";if(e){const o=e.toLowerCase();o.includes("italic")?r="italic":o.includes("oblique")&&(r="oblique"),o.includes("bold")?t="bold":o.includes("light")&&(t="lighter")}return{style:r,weight:t}}function ye(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function A(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const t=A(r);if(t!=null)return t}break;case"CIMTextSymbol":return A(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const r=e.symbolLayers;if(r)for(const t of r){const o=x(t);if(o!=null)return o}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function N(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const r of e.symbolLayers){const t=N(r);if(t!==void 0)return t}break;case"CIMTextSymbol":return N(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function me(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Ce(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function he(e){return(e?Object.keys(e):[]).map(r=>({name:r,alias:r,type:typeof e[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const pe=e=>e.includes("data:image/svg+xml");function Ie(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function w(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function be(e,r,t,o,a,n,M=!0){const{infos:s}=n;let u=1,f=0,m=0,l=0,i=1;for(const{absoluteAnchorPoint:p,offsetX:b,offsetY:d,rotation:S,size:P,frameHeight:k,rotateClockWise:L,scaleSymbolsProportionally:I}of s)i=p?1:u,m=R(b,d,f,i,m),l=B(b,d,f,i,l),k&&(I||M)&&(u*=P/k),f=j(S,L,f);const h=R(o,a,f,i,m),c=B(o,a,f,i,l);return{size:e*u,rotation:j(r,t,f),offsetX:h,offsetY:c}}function E(e){if(e==null)return!1;if(Array.isArray(e))return e.every(r=>E(r));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function O(e,r){if(r==="color"||r==="outlinecolor"||r==="backgroundcolor"||r==="borderlinecolor"||r==="tintcolor")return[...W[r]];const t=T[e];if(!t)throw new Error(`InternalError: default value for type ${e}.`);return t[r]}function de(e){return e.split(" ").map(r=>Number(r))}function D(e){return typeof e=="string"?de(e):e}function ke(e){return e?.dashTemplate&&(e.dashTemplate=D(e.dashTemplate)),e}function F(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=e.symbolLayers;if(!r)return"Normal";for(const t of r)if(t.type==="CIMVectorMarker")return F(t)}break;case"CIMVectorMarker":{const r=e.markerGraphics;if(!r)return"Normal";for(const t of r)if(t.symbol)return F(t.symbol)}}return"Normal"}function Se(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let r=0;if(e.symbolLayers){for(const t of e.symbolLayers)if(t)switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const o=t.size??T.CIMVectorMarker.size;o>r&&(r=o);break}}}return r}case"CIMLineSymbol":case"CIMPolygonSymbol":{let r=0;if(e.symbolLayers){for(const t of e.symbolLayers)if(t)switch(t.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const o=t.width;o!=null&&o>r&&(r=o);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(t.markerPlacement&&z(t.markerPlacement)){const o=t.size??T.CIMVectorMarker.size;o>r&&(r=o)}break;case"CIMPictureFill":{const o=t.height;o!=null&&o>r&&(r=o)}}}return r}}}function q(e,r){if(r!==null){const t=r.get(e);return t?t.name:e}return e}function Pe(e){return e.map(r=>({...r,propertyName:w(r.propertyName)}))}function ge(e){const r={};for(const t in e){const o=e[t];r[w(t)]=o}return r}function B(e,r,t,o,a){const n=t*Math.PI/180;if(n){const M=Math.cos(n);return(Math.sin(n)*e+M*r)*o+a}return r*o+a}function R(e,r,t,o,a){const n=t*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*r)*o+a:e*o+a}function j(e,r,t){return r?t-e:t+e}function we(e,r,t){const o=t==="Color"||t==="TintColor"||t==="ToColor",a=t==="Rotation"||t==="Angle"||t==="ToRotation";let n=r[w(t)];if(n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180)),n==null&&(n=O(r.type,t.toLowerCase()),n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:a&&(n*=Math.PI/180))),r.primitiveName!=null){const M=e[r.primitiveName];if(M!=null){const s=M[t];s==null||(typeof s=="string"||typeof s=="number"||Array.isArray(s)?(n=s,n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180))):(n={valueExpressionInfo:s,defaultValue:n},n!=null&&(o?n={type:"Process",op:"ArcadeColor",value:n}:a&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${t}".`);return n}function Le(e,r){return Math.max(Math.min((e??r)/100,1),0)}export{x as A,ke as B,ne as C,O as D,be as E,Ce as F,pe as G,Se as H,z as I,q as J,we as K,ye as L,re as M,me as N,E as O,fe as P,Le as Q,F as R,ce as S,A as T,Pe as U,Ie as V,ge as W,Q as a,se as b,K as c,le as d,V as f,ue as g,ae as h,ie as k,te as m,Y as n,$ as o,oe as p,D as q,_ as u,he as v,Me as w,N as x,ee as y,w as z};
