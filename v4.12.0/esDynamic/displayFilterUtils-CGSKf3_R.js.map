{"version":3,"file":"displayFilterUtils-CGSKf3_R.js","sources":["../../node_modules/@arcgis/core/layers/support/displayFilterUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{floatGreaterThan as e,floatLessThan as n,floatEqualAbsolute as t,floatGreaterThanOrEqual as r}from\"../../core/mathUtils.js\";import{sqlOr as o}from\"../../core/sql.js\";function i(e,n){return{...n,filterMode:e.mode}}function u(e,n){return l(e,n).next().value??null}function c(t,r,i){const u=f(t);if(u&&(e(r,u[0])||n(i,u[1])))return\"\";const c=Array.from(l(t,r,i)),m=a(c,r,i)?\"1=1\":c.map((e=>e.where||\"1=1\")).reduce(((e,n)=>o(e,n)),\"\");return m&&\"1=1\"!==m?m:\"\"}function f(e){if(\"manual\"===s(e))return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:r}of e.filters)n[0]=Math.max(n[0],I(t)),n[1]=Math.min(n[1],d(r));return n}function*l(e,n,t){if(\"manual\"===s(e)){const n=e.filters.find((n=>n.id===e.activeFilterId));n&&(yield n)}else{\"object\"==typeof n&&(n=n.scale);for(const r of e.filters)m(r.minScale,r.maxScale,n,t)&&(yield r)}}function a(t,r,o){if(0===t.length)return!0;const i=I(t.at(0)?.minScale),u=d(t.at(-1)?.maxScale);if(n(i,r)||e(u,o))return!0;for(let e=0;e<t.length-1;e++){const r=t[e],o=t[e+1];if(n(I(o.minScale),d(r.maxScale)))return!0}return!1}function m(e,n,o,i){return e=I(e),o=I(o),n=d(n),!(!t(o,e)&&(i??o)>e)&&(!r(n,o)&&(void 0===i||!t(i,e)))}function s(e){return\"mode\"in e?e.mode:e.filterMode}function I(e){return e||Number.POSITIVE_INFINITY}function d(e){return e||0}export{i as createDisplayFilterJSONContext,c as getClauseForScaleRange,u as getEffectiveDisplayFilter};\n"],"names":["i","e","n","u","l","c","t","f","m","a","o","s","r","I","d"],"mappings":";AAI6K,SAASA,EAAEC,GAAEC,GAAE;AAAC,SAAM,EAAC,GAAGA,GAAE,YAAWD,EAAE,KAAI;AAAC;AAAC,SAASE,EAAEF,GAAEC,GAAE;AAAC,SAAOE,EAAEH,GAAEC,CAAC,EAAE,KAAM,EAAC,SAAO;AAAI;AAAC,SAASG,EAAEC,GAAE,GAAEN,GAAE;AAAC,QAAMG,IAAEI,EAAED,CAAC;AAAE,MAAGH,MAAIF,EAAE,GAAEE,EAAE,CAAC,CAAC,KAAGD,EAAEF,GAAEG,EAAE,CAAC,CAAC,GAAG,QAAM;AAAG,QAAME,IAAE,MAAM,KAAKD,EAAEE,GAAE,GAAEN,CAAC,CAAC,GAAEQ,IAAEC,EAAEJ,GAAE,GAAEL,CAAC,IAAE,QAAMK,EAAE,IAAK,CAAAJ,MAAGA,EAAE,SAAO,KAAK,EAAG,OAAQ,CAACA,GAAEC,MAAIQ,EAAET,GAAEC,CAAC,GAAG,EAAE;AAAE,SAAOM,KAAWA,MAAR,QAAUA,IAAE;AAAE;AAAC,SAASD,EAAEN,GAAE;AAAC,MAAcU,EAAEV,CAAC,MAAd,SAAgB,QAAO;AAAK,QAAMC,IAAE,CAAC,OAAO,mBAAkB,OAAO,iBAAiB;AAAE,aAAS,EAAC,UAASI,GAAE,UAASM,EAAC,KAAIX,EAAE,QAAQ,CAAAC,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEW,EAAEP,CAAC,CAAC,GAAEJ,EAAE,CAAC,IAAE,KAAK,IAAIA,EAAE,CAAC,GAAEY,EAAEF,CAAC,CAAC;AAAE,SAAOV;AAAC;AAAC,UAASE,EAAEH,GAAEC,GAAEI,GAAE;AAAC,MAAcK,EAAEV,CAAC,MAAd,UAAgB;AAAC,UAAMC,IAAED,EAAE,QAAQ,KAAM,CAAAC,MAAGA,EAAE,OAAKD,EAAE,cAAc;AAAG,IAAAC,MAAI,MAAMA;AAAA,EAAE,OAAK;AAAC,IAAU,OAAOA,KAAjB,aAAqBA,IAAEA,EAAE;AAAO,eAAUU,KAAKX,EAAE,QAAQ,CAAAO,EAAEI,EAAE,UAASA,EAAE,UAASV,GAAEI,CAAC,MAAI,MAAMM;AAAA,EAAE;AAAC;AAAC,SAASH,EAAEH,GAAE,GAAEI,GAAE;AAAC,MAAOJ,EAAE,WAAN,EAAa,QAAM;AAAG,QAAMN,IAAEa,EAAEP,EAAE,GAAG,CAAC,GAAG,QAAQ,GAAEH,IAAEW,EAAER,EAAE,GAAG,EAAE,GAAG,QAAQ;AAAE,MAAGJ,EAAEF,GAAE,CAAC,KAAGC,EAAEE,GAAEO,CAAC,EAAE,QAAM;AAAG,WAAQT,IAAE,GAAEA,IAAEK,EAAE,SAAO,GAAEL,KAAI;AAAC,UAAMW,IAAEN,EAAEL,CAAC,GAAES,IAAEJ,EAAEL,IAAE,CAAC;AAAE,QAAGC,EAAEW,EAAEH,EAAE,QAAQ,GAAEI,EAAEF,EAAE,QAAQ,CAAC,EAAE,QAAM;AAAA,EAAE;AAAC,SAAM;AAAE;AAAC,SAASJ,EAAEP,GAAEC,GAAEQ,GAAEV,GAAE;AAAC,SAAOC,IAAEY,EAAEZ,CAAC,GAAES,IAAEG,EAAEH,CAAC,GAAER,IAAEY,EAAEZ,CAAC,GAAE,EAAE,CAACI,EAAEI,GAAET,CAAC,MAAID,KAAGU,KAAGT,MAAK,CAACW,EAAEV,GAAEQ,CAAC,MAAaV,MAAT,UAAY,CAACM,EAAEN,GAAEC,CAAC;AAAG;AAAC,SAASU,EAAEV,GAAE;AAAC,SAAM,UAASA,IAAEA,EAAE,OAAKA,EAAE;AAAU;AAAC,SAASY,EAAEZ,GAAE;AAAC,SAAOA,KAAG,OAAO;AAAiB;AAAC,SAASa,EAAEb,GAAE;AAAC,SAAOA,KAAG;AAAC;","x_google_ignoreList":[0]}