import{x as l,z as h,K as S,a3 as b,bx as g}from"./main-DnzmeE4U.js";import"./jsxFactory-C5LxVioS.js";let w=t=>({vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}),f=(t,o,e)=>{for(let s=0,r=o.length;s<r;s++){let i=o[s];Array.isArray(i)?f(t,i,e):i!=null&&i!==!1&&(typeof i=="string"&&(i=w(i)),e.push(i))}};function C(t,o,e){if(Array.isArray(o))e=o,o=void 0;else if(o&&(typeof o=="string"||o.hasOwnProperty("vnodeSelector"))||e&&(typeof e=="string"||e.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let s,r;return e&&e.length===1&&typeof e[0]=="string"?s=e[0]:e&&(r=[],f(t,e,r),r.length===0&&(r=void 0)),{vnodeSelector:t,properties:o,children:r,text:s===""?void 0:s,domNode:null}}const v={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let n=class extends b{get position(){return[this.x,this.y]}set position(t){this._set("x",t[0]),this._set("y",t[1])}get _textShadowColor(){const{textColor:t,backgroundColor:o}=this,e=o.clone();return e.a*=t.a,e}get _textShadow(){const t=this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${t}`}get padding(){return .5*this.fontSize}get borderRadius(){return this.padding}set borderRadius(t){this._overrideIfSome("borderRadius",t)}constructor(t){super(t),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new g([0,0,0,.6]),this.textColor=new g([255,255,255]),this._textShadowSize=1}render(){return C("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this.borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(t){if(!this.visible)return;const o=t.font.replace(/^(.*?)px/,"");t.font=`${this.fontSize}px ${o}`;const{padding:e,borderRadius:s}=this,r=t.measureText(this.text).width,i=this.text!==""?this.fontSize:0,a=_[this.anchor];t.textAlign="center",t.textBaseline="middle";const d=r+2*e,x=i+2*e,u=this.x+a.x*d,m=this.y+a.y*x;this._roundedRect(t,u,m,d,x,s),t.fillStyle=this.backgroundColor.toCss(!0),t.fill();const c=this.x+(a.x+.5)*d,y=this.y+(a.y+.5)*x;this._renderTextShadow(t,this.text,c,y),t.fillStyle=this.textColor.toCss(!0),t.fillText(this.text,c,y)}_renderTextShadow(t,o,e,s){t.lineJoin="miter",t.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/p.length})`;const r=this._textShadowSize;for(const[i,a]of p)t.fillText(o,e+r*i,s+r*a)}_roundedRect(t,o,e,s,r,i){i=Math.min(i,r/2,s/2),t.beginPath(),t.moveTo(o,e+i),t.arcTo(o,e,o+i,e,i),t.lineTo(o+s-i,e),t.arcTo(o+s,e,o+s,e+i,i),t.lineTo(o+s,e+r-i),t.arcTo(o+s,e+r,o+s-i,e+r,i),t.lineTo(o+i,e+r),t.arcTo(o,e+r,o,e+r-i,i),t.closePath()}_cssClasses(){const t={"esri-text-overlay-item":!0};let o;for(o in v)t[v[o]]=this.anchor===o;return t}};l([h()],n.prototype,"x",void 0),l([h()],n.prototype,"y",void 0),l([h()],n.prototype,"position",null),l([h()],n.prototype,"text",void 0),l([h()],n.prototype,"fontSize",void 0),l([h()],n.prototype,"anchor",void 0),l([h()],n.prototype,"visible",void 0),l([h()],n.prototype,"isDecoration",void 0),l([h()],n.prototype,"backgroundColor",void 0),l([h()],n.prototype,"textColor",void 0),l([h()],n.prototype,"_textShadowSize",void 0),l([h()],n.prototype,"_textShadowColor",null),l([h()],n.prototype,"_textShadow",null),l([h()],n.prototype,"padding",null),l([h()],n.prototype,"borderRadius",null),n=l([S("esri.views.overlay.TextOverlayItem")],n);const _={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},p=[];for(let t=0;t<360;t+=360/16)p.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)]);const z=n;export{z as x};
