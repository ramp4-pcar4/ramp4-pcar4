import{x as o,z as i,K as y,G as A,V as G,af as R,bm as S,M as N,bC as V,bg as _,a2 as J,D as Z,B as $}from"./main-DnzmeE4U.js";import{b as D}from"./labelingInfo-D9WqyhOx.js";import{i as X}from"./Field-Cj6Pz3TI.js";const Y=[["binary","application/octet-stream","bin",""]];function tt(t,e){return O(e.name,t?.supportedFormats??[])!=null}function et(t,e){if(!t)return!1;const s=M(e,t.supportedFormats??[]);return s!=null&&t.editFormats.includes(s)}function x(t,e){return E(at(t,e))}function I(t,e){return E(O(t,e))}function st(t,e){return L(pt(t,e))}function M(t,e){return I(t.name,e)??x(t.type,e)}function g(t,e,s){return x(t,s)??I(e,s)}function b({supportedFormats:t}){return g("model/gltf-binary","glb",t)}function rt(t){const e=b(t);return e!=null&&t.editFormats.includes(e)}function ot({supportedFormats:t}){return g("model/gltf+json","gltf",t)}function j(t){if(!t)return null;const e=b(t),s=ot(t);let n=null;for(const p of t.queryFormats){if(p===e)return p;p===s&&(n=p)}return n}function nt({supportedFormats:t}){return g("application/esri3do-SR_world","wld",t)}function it({supportedFormats:t}){return g("application/esri3do-SR_prj","prj",t)}function Q(t){return[...Y,...t]}function pt(t,e){return Q(e).find(s=>E(s)===t)}function at(t,e){const s=t.toLowerCase();return Q(e).find(n=>L(n)===s)}function O(t,e){const s=t.toLowerCase();return Q(e).find(n=>ut(n).some(p=>s.endsWith(p)))}function E(t){return t?.[0]}function L(t){return t?.[1].toLowerCase()}function ut(t){return t?.[2].split(",").map(e=>e.toLowerCase())??[]}function lt(t){return t.tables?.find(e=>e.role==="assetMaps")}function dt(t){return"portalItem"in t}const ct=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):dt(this)?this.portalItem?.apiKey:null}set apiKey(s){s!=null?this._override("apiKey",s):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return o([i({type:String})],e.prototype,"apiKey",null),e=o([y("esri.layers.mixins.APIKeyMixin")],e),e};var B;let m=B=class extends A{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new G}clone(){return new B({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};o([i({type:String,json:{write:{isRequired:!0}}})],m.prototype,"floorField",void 0),o([i({json:{read:!1,write:!1}})],m.prototype,"viewAllMode",void 0),o([i({json:{read:!1,write:!1}})],m.prototype,"viewAllLevelIds",void 0),m=B=o([y("esri.layers.support.LayerFloorInfo")],m);const yt=m,z=new R({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),k=new R({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let a=class extends S.ClonableMixin(A){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};o([i({json:{read:z.read,write:z.write}})],a.prototype,"cardinality",void 0),o([i({json:{name:"catalogID"}})],a.prototype,"catalogId",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"composite",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"id",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"keyField",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"keyFieldInRelationshipTable",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"name",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"relatedTableId",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"relationshipTableId",void 0),o([i({json:{read:k.read,write:k.write}})],a.prototype,"role",void 0),a=o([y("esri.layers.support.Relationship")],a);const mt=a;function r(t,e,s){return!!q(t,e,s)}function w(t,e,s){return q(t,e,s)}function q(t,e,s){return t&&t.hasOwnProperty(e)?t[e]:s}const ft={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function ht(t){const e=t?.supportedSpatialAggregationStatistics?.map(s=>s.toLowerCase());return{envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function F(t,e){return!!t?.supportedOperationsWithCacheHint?.map(s=>s.toLowerCase())?.includes(e.toLowerCase())}function vt(t){const e=t?.supportedStatisticTypes?.map(s=>s.toLowerCase());return{count:!!e?.includes("count"),sum:!!e?.includes("sum"),min:!!e?.includes("min"),max:!!e?.includes("max"),avg:!!e?.includes("avg"),var:!!e?.includes("var"),stddev:!!e?.includes("stddev"),percentileContinuous:!!e?.includes("percentile_continuous"),percentileDiscrete:!!e?.includes("percentile_discrete"),envelope:!!e?.includes("envelopeaggregate"),centroid:!!e?.includes("centroidaggregate"),convexHull:!!e?.includes("convexhullaggregate")}}function gt(t){const e=t?.supportedNormalizationTypes?.map(s=>s.toLowerCase());return{field:!!e?.includes("field"),log:!!e?.includes("log"),naturalLog:!!e?.includes("naturallog"),percentOfTotal:!!e?.includes("percentoftotal"),squareRoot:!!e?.includes("squareroot")}}function wt(t,e){return{analytics:Ft(t),attachment:Ct(t),data:At(t),metadata:Tt(t),operations:Rt(t.capabilities,t,e),query:St(t,e),queryAttributeBins:Qt(t),queryRelated:xt(t),queryTopFeatures:bt(t),editing:Et(t)}}function Ft(t){return{supportsCacheHint:F(t.advancedQueryCapabilities,"queryAnalytics")}}function Ct(t){const e=t.attachmentProperties,s={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:F(t.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:r(t.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:r(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(n=>{const p=ft[n.name];p&&(s[p]=!!n.isEnabled)}),s}function At(t){return{isVersioned:r(t,"isDataVersioned",!1),isBranchVersioned:r(t,"isDataBranchVersioned",!1),supportsAttachment:r(t,"hasAttachments",!1),supportsM:r(t,"hasM",!1),supportsZ:r(t,"hasZ",!1)}}function Tt(t){return{supportsAdvancedFieldProperties:r(t,"supportsFieldDescriptionProperty",!1)}}function Rt(t,e,s){const n=t?t.toLowerCase().split(",").map(W=>W.trim()):[],p=s?N(s):null,d=n.includes(p!=null&&p.serverType==="MapServer"?"data":"query"),c=n.includes("editing")&&!e.datesInUnknownTimezone;let f=c&&n.includes("create"),h=c&&n.includes("delete"),v=c&&n.includes("update");const T=n.includes("changetracking"),C=e.advancedQueryCapabilities;return c&&!(f||h||v)&&(f=h=v=!0),{supportsCalculate:r(e,"supportsCalculate",!1),supportsTruncate:r(e,"supportsTruncate",!1),supportsValidateSql:r(e,"supportsValidateSql",!1),supportsAdd:f,supportsDelete:h,supportsEditing:c,supportsChangeTracking:T,supportsQuery:d,supportsQueryAnalytics:r(C,"supportsQueryAnalytic",!1),supportsQueryAttachments:r(C,"supportsQueryAttachments",!1),supportsQueryBins:r(C,"supportsQueryBins",!1),supportsQueryTopFeatures:r(C,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:r(e,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:v,supportsExceedsLimitStatistics:r(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:r(e,"supportsAsyncConvert3D",!1)}}function St(t,e){const s=t.advancedQueryCapabilities,n=t.ownershipBasedAccessControlForFeatures,p=t.archivingInfo,d=t.currentVersion,c=e?.includes("MapServer"),f=!c||d>=V("mapserver-pbf-version-support"),h=_(e),v=new Set((t.supportedQueryFormats??"").split(",").map(T=>T.toLowerCase().trim()));return{maxRecordCount:w(t,"maxRecordCount",void 0),maxRecordCountFactor:w(t,"maxRecordCountFactor",void 0),standardMaxRecordCount:w(t,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:ht(s),supportsCacheHint:r(s,"supportsQueryWithCacheHint",!1)||F(s,"query"),supportsCentroid:r(s,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:h,supportsCurrentUser:r(s,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:r(s,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:r(s,"supportsDisjointSpatialRel",!1),supportsDistance:r(s,"supportsQueryWithDistance",!1),supportsDistinct:r(s,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:r(s,"supportsReturningQueryExtent",!1),supportsFormatPBF:f&&v.has("pbf"),supportsFullTextSearch:r(s,"supportsFullTextSearch",!1),supportsGeometryProperties:r(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:r(s,"supportsHavingClause",!1),supportsHistoricMoment:r(p,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:r(s,"supportsMaxRecordCountFactor",!1),supportsOrderBy:r(s,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:r(s,"supportsPagination",!1),supportsPercentileStatistics:r(s,"supportsPercentileStatistics",!1),supportsQuantization:r(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:r(t,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:r(n,"allowAnonymousToQuery",!0),supportsQueryByOthers:r(n,"allowOthersToQuery",!0),supportsQueryGeometry:r(t,"supportsReturningQueryGeometry",!1),supportsResultType:r(s,"supportsQueryWithResultType",!1),supportsReturnMesh:!!j(t.infoFor3D),supportsSpatialAggregationStatistics:r(s,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:r(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:r(t,"useStandardizedQueries",!1),supportsStatistics:r(s,"supportsStatistics",t.supportsStatistics),supportsTopFeaturesQuery:r(s,"supportsTopFeaturesQuery",!1),supportsTrueCurve:r(s,"supportsTrueCurve",!1),tileMaxRecordCount:w(t,"tileMaxRecordCount",void 0)}}function xt(t){const e=t.advancedQueryCapabilities,s=r(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:r(e,"supportsQueryRelatedPagination",!1),supportsCount:s,supportsOrderBy:s,supportsCacheHint:F(e,"queryRelated")}}function bt(t){return{supportsCacheHint:F(t.advancedQueryCapabilities,"queryTopFilter")}}function Qt(t){const e=t?t.queryBinsCapabilities:void 0;return{supportsDate:r(e,"supportsDateBin",!1),supportsFixedInterval:r(e,"supportsFixedIntervalBin",!1),supportsAutoInterval:r(e,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:r(e,"supportsFixedBoundariesBin",!1),supportsStackBy:r(e,"supportsStackBy",!1),supportsSplitBy:r(e,"supportsSplitBy",!1),supportsSnapToData:r(e,"supportsSnapToData",!1),supportsReturnFullIntervalBin:r(e,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:r(e,"supportsFirstDayOfWeek",!1),supportsNormalization:r(e,"supportsNormalization",!1),supportedStatistics:vt(e),supportedNormalizationTypes:gt(e)}}function Et(t){const e=t.ownershipBasedAccessControlForFeatures,s=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:r(t,"allowGeometryUpdates",!0),supportsGlobalId:r(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:r(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:r(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:r(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:r(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:r(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:r(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:r(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:r(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:r(s,"supportsAsyncApplyEdits",!1),zDefault:w(t,"zDefault",void 0)}}function Bt(t){return{operations:{supportsAppend:r(t,"supportsAppend",!1),supportsCoverageQuery:t?.playbackInfo?.klv["0601"]??!1,supportsExportClip:r(t,"supportsExportClip",!1),supportsExportFrameset:r(t,"supportsExportFrameset",!1),supportsMensuration:r(t,"supportsMensuration",!1),supportsUpdate:r(t,"supportsUpdate",!1)}}}function P(t,e,s){if(!t)return null;const n=t.find(d=>!!d.field);if(!n)return null;const p=new D;return p.read(n,s),[p]}function Dt(t,e,s,n){const p=t.find(d=>!!d.field);p&&J(s,[p.toJSON()],e)}const U={type:[D],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:P},write:{writer:Dt}}},It=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return o([i(U)],e.prototype,"orderBy",void 0),e=o([y("esri.layers.mixins.OrderedLayer")],e),e},H=new R({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let l=class extends S.ClonableMixin(A){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};o([i({json:{write:!0}})],l.prototype,"name",void 0),o([i({json:{write:!0}})],l.prototype,"description",void 0),o([i({json:{read:H.read,write:H.write}})],l.prototype,"drawingTool",void 0),o([i({json:{write:!0}})],l.prototype,"prototype",void 0),o([i({json:{write:!0}})],l.prototype,"thumbnail",void 0),l=o([y("esri.layers.support.FeatureTemplate")],l);const K=l;let u=class extends S.ClonableMixin(A){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const e={};for(const s of Object.keys(t))e[s]=X(t[s]);return e}writeDomains(t,e){const s={};for(const n of Object.keys(t))t[n]&&(s[n]=t[n]?.toJSON());e.domains=s}};o([i({json:{write:!0}})],u.prototype,"id",void 0),o([i({json:{write:!0}})],u.prototype,"name",void 0),o([i({json:{write:!0}})],u.prototype,"domains",void 0),o([Z("domains")],u.prototype,"readDomains",null),o([$("domains")],u.prototype,"writeDomains",null),o([i({type:[K],json:{write:!0}})],u.prototype,"templates",void 0),u=o([y("esri.layers.support.FeatureType")],u);const Mt=u;export{Bt as A,it as F,wt as a,yt as b,M as c,j as d,P as e,g as f,mt as g,lt as h,ct as i,Mt as j,b as k,It as l,nt as m,K as n,U as o,rt as p,tt as q,et as r,st as s,x as u};
