import{ah as R,ai as c,aj as g,ak as b,al as v,Q as W}from"./main-DnzmeE4U.js";import{e as C}from"./projectVectorToVector-D0K_S4MR.js";function m(e){return"declaredClass"in e}function f(e){return"declaredClass"in e}function j(e){return"declaredClass"in e}function A(e,a){return e?j(e)?e:new R({layer:a,sourceLayer:a,visible:e.visible,symbol:c(e.symbol),attributes:c(e.attributes),geometry:h(e.geometry)}):null}function h(e){return e==null?null:m(e)?e:g(J(e))}function J(e){const{wkid:a,wkt:n,wkt2:l,latestWkid:o}=e.spatialReference,t={wkid:a,wkt:n,wkt2:l,latestWkid:o};switch(e.type){case"point":{const{x:s,y:r,z:i,m:u}=e;return{x:s,y:r,z:i,m:u,spatialReference:t}}case"polygon":{const{rings:s,hasZ:r,hasM:i}=e;return{rings:p(s),hasZ:r,hasM:i,spatialReference:t}}case"polyline":{const{paths:s,hasZ:r,hasM:i}=e;return{paths:p(s),hasZ:r,hasM:i,spatialReference:t}}case"extent":{const{xmin:s,xmax:r,ymin:i,ymax:u,zmin:k,zmax:d,mmin:w,mmax:M,hasZ:Z,hasM:z}=e;return{xmin:s,xmax:r,ymin:i,ymax:u,zmin:k,zmax:d,mmin:w,mmax:M,hasZ:Z,hasM:z,spatialReference:t}}case"multipoint":{const{points:s,hasZ:r,hasM:i}=e;return{points:y(s)?x(s):s,hasZ:r,hasM:i,spatialReference:t}}default:return}}function p(e){return O(e)?e.map(a=>x(a)):e}function x(e){return e.map(a=>Array.from(a))}function O(e){for(const a of e)if(a.length!==0)return y(a);return!1}function y(e){return e.length>0&&(b(e[0])||v(e[0]))}function Q(e,a){if(!e)return null;let n;if(f(e)){if(a==null)return e.clone();if(f(a))return a.copy(e)}return a!=null?(n=a,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=C(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function S(e){const{wkid:a,wkt:n,wkt2:l,latestWkid:o}=e,t={wkid:a,wkt:n,wkt2:l,latestWkid:o};return W.fromJSON(t)}export{A as c,S as k,m as o,h as u,Q as x};
