import{l as E}from"./vec2f64-CEUyUoff.js";import{P as C,U as A,L as _,D as O,o as i,G as d}from"./enums-DBi1-Mm2.js";import{p as T,w as h}from"./Texture-DXSFJsEu.js";function w(a,e,t="nearest",s=!1){const n=!(s&&e.pixelType==="u8"),o=n?A.FLOAT:A.UNSIGNED_BYTE,u=e.pixels==null||e.pixels.length===0?null:n?e.getAsRGBAFloat():e.getAsRGBA(),f=a.capabilities.textureFloatLinear,r=new T;return r.width=e.width,r.height=e.height,r.internalFormat=n?C.RGBA32F:d.RGBA,r.samplingMode=!f||t!=="bilinear"&&t!=="cubic"?_.NEAREST:_.LINEAR,r.dataType=o,r.wrapMode=O.CLAMP_TO_EDGE,new h(a,r,u)}function L(a,e){const{spacing:t,offsets:s,coefficients:n,size:[o,u]}=e,f=t[0]>1,r=new T;r.width=f?4*o:o,r.height=u,r.internalFormat=C.RGBA32F,r.dataType=A.FLOAT,r.samplingMode=_.NEAREST,r.wrapMode=O.CLAMP_TO_EDGE;const l=new Float32Array(f?o*u*16:2*s.length);if(f&&n!=null)for(let m=0,c=0;m<n.length;m++)l[c++]=n[m],m%3==2&&(l[c++]=1);else for(let m=0;m<u;m++)for(let c=0;c<o;c++){const g=4*(m*o+c),p=2*(c*u+m);l[g]=s[p],l[g+1]=s[p+1],l[g+3]=s[p]===-1?0:1}return new h(a,r,l)}function U(a,e){const t=new T;return t.internalFormat=d.RGBA,t.width=e.length/4,t.height=1,t.samplingMode=_.NEAREST,t.wrapMode=O.CLAMP_TO_EDGE,new h(a,t,e)}function b(a,e,t,s=1,n=!0){return{u_flipY:n,u_applyTransform:!!a,u_opacity:s,u_transformSpacing:a?a.spacing:E,u_transformGridSize:a?a.size:E,u_targetImageSize:e,u_srcImageSize:t}}function F(a,e){return{u_colormapOffset:e||0,u_colormapMaxIndex:a?a.length/4-1:0}}function x(a,e){return{u_scale:a,u_offset:e}}function M(a){return{u_bandCount:a.bandCount,u_minOutput:a.minOutput,u_maxOutput:a.maxOutput,u_minCutOff:a.minCutOff,u_maxCutOff:a.maxCutOff,u_factor:a.factor,u_useGamma:a.useGamma,u_gamma:a.gamma,u_gammaCorrection:a.gammaCorrection}}function G(a){return{u_hillshadeType:a.hillshadeType,u_sinZcosAs:a.sinZcosAs,u_sinZsinAs:a.sinZsinAs,u_cosZs:a.cosZs,u_weights:a.weights,u_factor:a.factor,u_minValue:a.minValue,u_maxValue:a.maxValue}}function V(a,e){const t=a.gl,s=e.glName,n=new Map;if(s==null)return n;const o=t.getProgramParameter(s,t.ACTIVE_UNIFORMS);let u;for(let f=0;f<o;f++)u=t.getActiveUniform(s,f),u&&n.set(u.name,{location:t.getUniformLocation(s,u.name),info:u});return n}function k(a,e,t){Object.keys(t).forEach(s=>{const n=e.get(s)||e.get(s+"[0]");n&&v(a,s,t[s],n)})}function N(a,e,t,s){t.length===s.length&&(s.some(n=>n==null)||t.some(n=>n==null)||t.forEach((n,o)=>{e.setUniform1i(n,o),a.bindTexture(s[o],o)}))}function v(a,e,t,s){if(s===null||t==null)return!1;const{info:n}=s;switch(n.type){case i.FLOAT:n.size>1?a.setUniform1fv(e,t):a.setUniform1f(e,t);break;case i.FLOAT_VEC2:a.setUniform2fv(e,t);break;case i.FLOAT_VEC3:a.setUniform3fv(e,t);break;case i.FLOAT_VEC4:a.setUniform4fv(e,t);break;case i.FLOAT_MAT3:a.setUniformMatrix3fv(e,t);break;case i.FLOAT_MAT4:a.setUniformMatrix4fv(e,t);break;case i.INT:n.size>1?a.setUniform1iv(e,t):a.setUniform1i(e,t);break;case i.BOOL:a.setUniform1i(e,t?1:0);break;case i.INT_VEC2:case i.BOOL_VEC2:a.setUniform2iv(e,t);break;case i.INT_VEC3:case i.BOOL_VEC3:a.setUniform3iv(e,t);break;case i.INT_VEC4:case i.BOOL_VEC4:a.setUniform4iv(e,t);break;default:return!1}return!0}export{G as A,k as O,V as T,F as _,U as c,w as f,x as g,N as h,b as l,L as m,M as p};
