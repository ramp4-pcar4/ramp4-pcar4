import{dw as h,dx as S}from"./main-DnzmeE4U.js";import{P as w,j as G,a as x,O as P,f as E,c as T,w as v,Q as C,R as X,S as D,T as L,W as Y,Z as q,_ as I,G as b}from"./ProjectionTransformation-BocI5WO-.js";import{w as j}from"./OperatorShapePreservingLength-BM4MoAaG.js";class A{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,n,u){return!1}canAccelerateGeometry(t){return!1}execute(t,n,u,s){if(u===4)return new j().execute(t,n,s);if(n.getCoordinateSystemType()===0&&w(""),G(t),t.isEmpty()||t.getDimension()<1)return 0;const o=n.getGCS(),a=b();o.querySpheroidData(a);const c=a.majorSemiAxis,l=a.e2,g=o.getUnit().getUnitToBaseFactor();let e;const r=t.getGeometryType();if(r===x.enumPolygon?e=t.getBoundary():r===x.enumEnvelope?e=P(t):E(r)?(e=new T({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new v().execute(e,0,n.getTolerance(0),0,s)),o!==n){const i=n.getSRToGCSTransform();if(n.isPannable()){e=C(e,n),r===x.enumPolyline&&e===t&&(e=t.clone());const d=new X;n.getPannableExtent().queryIntervalX(d);for(let m=0,f=e.getPointCount();m<f;m++){const y=e.getXY(m);y.x=D(y.x,d),e.setXY(m,y)}}const p=e.createInstance();e=L(i,e,p,s)?p:new Y().execute(e,i,s)}return this._ExecuteMultiPathGeodeticLength(e,u,c,l,g)}_ExecuteMultiPathGeodeticLength(t,n,u,s,o){const a={stack:[],error:void 0,hasError:!1};try{const c=h(a,new q,!1);let l=0;const g=t.querySegmentIterator();for(;g.nextPath();)for(;g.hasNextSegment();){const e=g.nextSegment(),r=e.getStartXY(),i=e.getEndXY();r.scale(o),i.scale(o),I.geodeticDistance(u,s,r.x,r.y,i.x,i.y,c,null,null,n),l+=c.val}return l}catch(c){a.error=c,a.hasError=!0}finally{S(a)}}}export{A as OperatorGeodeticLength};
