{"version":3,"file":"imageUtils-O-zHRU7h.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,o=null){super(e,s,r,i,a,n),this.bitmap=new t(o),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){this.bitmap.beforeRender(e),super.beforeRender(e)}afterRender(e){this.bitmap.afterRender(e),super.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{displayViewScreenMat3:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.displayViewScreenMat3=this.transforms.displayViewScreenMat3}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import n from\"./webgl/TileContainer.js\";import{BitmapTechnique as r}from\"./webgl/shaderGraph/techniques/bitmap/BitmapTechnique.js\";class s extends n{constructor(){super(...arguments),this._bitmapTechnique=null}get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(t){const n=this.tileInfoView.getTileBounds(e(),t),r=this.tileInfoView.getTileResolution(t.level),[s,o]=this.tileInfoView.tileInfo.size;return new i(t,r,n[0],n[3],s,o)}onAttach(){super.onAttach(),this._bitmapTechnique=new r}onDetach(){super.onDetach(),this._bitmapTechnique?.shutdown(),this._bitmapTechnique=null}renderChildren(e){if(super.renderChildren(e),!this.visible||e.drawPhase!==t.MAP||null==this._bitmapTechnique)return;const i=this.children.map((e=>e.bitmap));this._bitmapTechnique.render(e,{bitmaps:i})}}export{s as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/Error.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return s=i([e(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n"],"names":["s","i","a","n","o","t","e","r","l","u","c","g","h","d","f","m","v","w","I","M","F","L"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}