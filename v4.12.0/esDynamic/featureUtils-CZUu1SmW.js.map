{"version":3,"file":"featureUtils-CZUu1SmW.js","sources":["../../node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import e from\"../../../core/Logger.js\";import{replace as t}from\"../../../core/string.js\";import{convertDateFormatToIntlOptions as n,formatDate as r}from\"../../../intl/date.js\";import{formatNumber as i,convertNumberFormatToIntlOptions as o}from\"../../../intl/number.js\";import{isRasterPixelValueField as a,featureHasFields as l,isTimeOnlyField as u}from\"../../../layers/support/fieldUtils.js\";import{getEffectiveLayerCapabilities as s}from\"../../../layers/support/layerUtils.js\";import{formatAnyDate as f,isAnyDateField as c}from\"../../../smartMapping/support/utils.js\";import{loadArcade as d}from\"../../../support/arcadeOnDemand.js\";import{getTimeZoneFormattingOptions as p}from\"../../../time/timeZoneUtils.js\";const y=\"esri.widgets.Feature.support.featureUtils\",m=()=>e.getLogger(y),b=/href=(\"\"|'')/gi,g=/(\\{([^{\\r\\n]+)\\})/g,I=/'/g,h=/^\\s*expression\\//i,w=/(\\n)/gi,T=/[\\u00A0-\\u9999<>&]/gim,F=/href\\s*=\\s*(?:\"([^\"]+)\"|'([^']+)')/gi,j=/^(?:mailto:|tel:)/,N=\"relationships/\",Z=n(\"short-date-short-time\");function L(e){if(null!=e)return(e.sourceLayer||e.layer)??void 0}async function q({type:e,value:t,event:n}){try{return\"function\"==typeof t?t(n):await t}catch(r){return void m().error(\"error\",`An error occurred when calling the \"${e}\" function`,{error:r,graphic:n.graphic,value:t})}}function x(e=\"\"){if(e)return!j.test(e.trim().toLowerCase())}function E(e){return!!e&&h.test(e)}function v(e,t){if(!t||!E(t)||!e)return;const n=t.replace(h,\"\").toLowerCase();return e.find((({name:e})=>e.toLowerCase()===n))}function C(e,t){const n=v(t,e?.fieldName);return n?n.title||null:e?e.label||e.fieldName:null}function U(e,t){const n=t.get(e.toLowerCase());return`{${n?.fieldName||e}}`}function A(e){return e.replaceAll(b,\"\")}function M(e,t){const n=$(t,e);return n?n.name:e}function R(e,t){return e&&e.map((e=>M(e,t)))}function $(e,t){return e&&\"function\"==typeof e.getField&&t?e.getField(t)??null:null}function k(e){return`${e}`.trim()}function D({attributes:e,globalAttributes:t,layer:n,text:r,expressionAttributes:i,fieldInfoMap:o}){return r?O({formattedAttributes:t,template:P(r,{...t,...i,...e},n),fieldInfoMap:o}):\"\"}function O({formattedAttributes:e,template:n,fieldInfoMap:r}){return k(A(t(t(n,(e=>U(e,r))),e)))}function z(e,t,n=!1){const r=t[e];if(\"string\"==typeof r){const i=\"%27\",o=(n?encodeURIComponent(r):r).replaceAll(I,i);t[e]=o}}function G(e,t=!1){const n={...e};return Object.keys(n).forEach((e=>z(e,n,t))),n}function S(e,n,r){const i=(n=k(n))&&\"{\"!==n[0];return t(e,G(r,i||!1))}function Q(e,t){return e.replaceAll(g,((e,n,r)=>{const i=$(t,r);return i?`{${i.name}}`:n}))}function P(e,t,n){const r=Q(e,n);return r?r.replaceAll(F,((e,n,r)=>S(e,n||r,t))):r}function _(e,t){if(\"string\"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){const t=Number(e);if(!isNaN(t))return t}return e}function H(e){return null!=e&&\"object\"==typeof e&&\"fieldsIndex\"in e&&\"geometryType\"in e&&\"getField\"in e&&\"load\"in e&&\"loaded\"in e&&\"objectIdField\"in e&&\"spatialReference\"in e&&\"type\"in e&&(\"feature\"===e.type||\"scene\"===e.type||\"subtype-group\"===e.type||\"subtype-sublayer\"===e.type||\"sublayer\"===e.type)&&\"when\"in e}function B(e){return null!=e&&\"object\"==typeof e&&\"createQuery\"in e&&\"queryFeatureCount\"in e&&\"queryObjectIds\"in e&&\"queryRelatedFeatures\"in e&&\"queryRelatedFeaturesCount\"in e&&\"relationships\"in e}function J(e){return H(e)&&B(e)}function K(e){return!(!(e&&\"object\"==typeof e&&\"createQuery\"in e&&\"getField\"in e&&\"queryFeatureCount\"in e&&\"queryFeatures\"in e&&\"queryObjectIds\"in e&&\"capabilities\"in e&&\"fields\"in e&&\"fieldsIndex\"in e&&\"type\"in e)||\"feature\"!==e.type&&\"subtype-group\"!==e.type&&\"subtype-sublayer\"!==e.type&&\"sublayer\"!==e.type||!(\"when\"in e))&&(\"subtype-sublayer\"===e.type&&\"parent\"in e&&e.parent&&\"object\"==typeof e.parent?\"globalIdField\"in e.parent:\"globalIdField\"in e)}function V(e){return!!e&&\"object\"==typeof e&&\"sourceLayer\"in e&&J(e.sourceLayer)}function W(e,t){const{fieldInfos:n,fieldName:r,preventPlacesFormatting:l,layer:u,timeZone:s}=t,c=ee(n,r),d=$(u,r);if(c&&!a(r)){const t=d?.type,n=c.format?.dateFormat;if(\"date\"===t||\"date-only\"===t||\"time-only\"===t||\"timestamp-offset\"===t||n)return f(e,{format:n,fieldType:t,timeZoneOptions:{layerTimeZone:u&&\"preferredTimeZone\"in u?u.preferredTimeZone:null,viewTimeZone:s,datesInUnknownTimezone:!(!u||!(\"datesInUnknownTimezone\"in u))&&!!u.datesInUnknownTimezone}})}const p=c?.format;return\"string\"==typeof e&&a(r)&&p?X(e,p):\"string\"==typeof(e=_(e,p))||null==e||null==p?le(e):i(e,l?{...o(p),minimumFractionDigits:0,maximumFractionDigits:20}:o(p))}function X(e,t){return e=e.trim(),/\\d{2}-\\d{2}/.test(e)?e:e.includes(\",\")?Y(e,\",\",\", \",t):e.includes(\";\")?Y(e,\";\",\"; \",t):e.includes(\" \")?Y(e,\" \",\" \",t):i(Number(e),o(t))}function Y(e,t,n,r){return e.trim().split(t).map((e=>i(Number(e),o(r)))).join(n)}function ee(e,t){if(e?.length&&t)return e.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))}function te({fieldName:e,graphic:t,layer:n}){if(pe(e))return null;if(!n||\"function\"!=typeof n.getFeatureType)return null;const{typeIdField:r}=n;if(!r||e!==r)return null;const i=n.getFeatureType(t);return i?i.name:null}function ne({fieldName:e,value:t,graphic:n,layer:r}){if(pe(e))return null;if(!r||\"function\"!=typeof r.getFieldDomain)return null;const i=n&&r.getFieldDomain(e,{feature:n,excludeImpliedDomains:has(\"esri-widget-legacy-field-domain-calculation\")});return i&&\"coded-value\"===i.type?i.getName(t):null}function re(e,t,n,i){const{creatorField:o,creationDateField:a,editorField:l,editDateField:u}=e;if(!t)return;const s=p(i&&\"preferredTimeZone\"in i?i.preferredTimeZone:null,!(!i||!(\"datesInUnknownTimezone\"in i))&&!!i.datesInUnknownTimezone,n,Z,\"date\"),f={...Z,...s},c=t[u];if(\"number\"==typeof c){const e=t[l];return{type:\"edit\",date:r(c,f),user:e}}const d=t[a];if(\"number\"==typeof d){const e=t[o];return{type:\"create\",date:r(d,f),user:e}}return null}function ie(e,t){const n=new Map;if(!e)return n;for(const r of e){if(!r.fieldName)continue;const e=M(r.fieldName,t);r.fieldName=e,n.set(e.toLowerCase(),r)}return n}function oe(e){const t=[];if(!e)return t;const{fieldInfos:n,content:r}=e;return n&&t.push(...n),r&&Array.isArray(r)?(r.forEach((e=>{if(\"fields\"===e.type){const n=e?.fieldInfos;n&&t.push(...n)}})),t):t}function ae(e){return e.replaceAll(T,(e=>`&#${e.charCodeAt(0)};`))}function le(e){return\"string\"==typeof e?e.replaceAll(w,'<br class=\"esri-text-new-line\" />'):e}function ue(e){const{value:t,fieldName:n,fieldInfos:r,fieldInfoMap:i,layer:o,graphic:a,timeZone:l}=e;if(null==t)return\"\";const s=ne({fieldName:n,value:t,graphic:a,layer:o});if(s)return s;const d=te({fieldName:n,graphic:a,layer:o});if(d)return d;if(i.get(n.toLowerCase()))return W(t,{fieldInfos:r||Array.from(i.values()),fieldName:n,layer:o,timeZone:l});const p=o?.fieldsIndex?.get(n);return p&&(c(p)||u(p))?f(t,{fieldType:p.type,timeZoneOptions:{layerTimeZone:o&&\"preferredTimeZone\"in o?o.preferredTimeZone:null,viewTimeZone:l,datesInUnknownTimezone:!(!o||!(\"datesInUnknownTimezone\"in o))&&!!o.datesInUnknownTimezone}}):le(t)}function se({fieldInfos:e,attributes:t,layer:n,graphic:r,fieldInfoMap:i,relatedInfos:o,timeZone:a}){const l={};return o?.forEach((t=>be({attributes:l,relatedInfo:t,fieldInfoMap:i,fieldInfos:e,layer:n,timeZone:a}))),t&&Object.keys(t).forEach((o=>{const u=t[o];l[o]=ue({fieldName:o,fieldInfos:e,fieldInfoMap:i,layer:n,value:u,graphic:r,timeZone:a})})),l}async function fe(e,t){const{layer:n,graphic:r,outFields:i,objectIds:o,returnGeometry:a,spatialReference:l}=e,u=o[0];if(\"number\"!=typeof u&&\"string\"!=typeof u){const e=\"Could not query required fields for the specified feature. The feature's ID is invalid.\",t={layer:n,graphic:r,objectId:u,requiredFields:i};return m().warn(e,t),null}if(!s(n)?.operations?.supportsQuery){const e=\"The specified layer cannot be queried. The following fields will not be available.\",t={layer:n,graphic:r,requiredFields:i,returnGeometry:a};return m().warn(e,t),null}const f=n.createQuery();f.objectIds=o,f.outFields=i?.length?i:[n.objectIdField],f.returnGeometry=!!a,f.returnZ=!!a,f.returnM=!!a,f.outSpatialReference=l;return(await n.queryFeatures(f,t)).features[0]}async function ce(e){if(!e.expressionInfos?.length)return!1;const t=await d(),{arcadeUtils:{hasGeometryFunctions:n}}=t;return n(e)}async function de({graphic:e,popupTemplate:t,layer:n,spatialReference:r},i){if(!n||!t)return;if(\"function\"==typeof n.load&&await n.load(i),!e.attributes)return;const o=n.objectIdField,a=e.attributes[o];if(null==a)return;const u=[a],s=await t.getRequiredFields(n.fieldsIndex),f=l(s,e),c=f?[]:s.includes(o)?s:[...s,o],d=t.returnGeometry||await ce(t);if(f&&!d)return;const p=await fe({layer:n,graphic:e,outFields:c,objectIds:u,returnGeometry:d,spatialReference:r},i);p&&(p.geometry&&(e.geometry=p.geometry),p.attributes&&(e.attributes={...e.attributes,...p.attributes}))}function pe(e=\"\"){return!!e&&e.includes(N)}function ye(e){return`${N}${e.layerId}/${e.fieldName}`}function me({attributes:e,graphic:t,relatedInfo:n,fieldInfos:r,fieldInfoMap:i,layer:o,timeZone:a}){e&&t&&n&&Object.keys(t.attributes).forEach((l=>{const u=ye({layerId:n.relation.id.toString(),fieldName:l}),s=t.attributes[l];e[u]=ue({fieldName:u,fieldInfos:r,fieldInfoMap:i,layer:o,value:s,graphic:t,timeZone:a})}))}function be({attributes:e,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}){e&&t&&(t.relatedFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}))),t.relatedStatsFeatures?.forEach((a=>me({attributes:e,graphic:a,relatedInfo:t,fieldInfoMap:n,fieldInfos:r,layer:i,timeZone:o}))))}const ge=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes(\"CURRENT_TIMESTAMP\")||t.includes(\"CURRENT_DATE\")||t.includes(\"CURRENT_TIME\")},Ie=({layer:e,method:t,query:n,definitionExpression:r})=>{if(!e.capabilities?.query?.supportsCacheHint||\"attachments\"===t)return;const i=null!=n.where?n.where:null,o=null!=n.geometry?n.geometry:null;ge(r)||ge(i)||\"extent\"===o?.type||\"tile\"===n.resultType||(n.cacheHint=!0)},he=({query:e,layer:t,method:n})=>{Ie({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??\"\"}`})},we=({queryPayload:e,layer:t,method:n})=>{Ie({layer:t,method:n,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression??\"\"}`})};function Te(e,t,n){return e&&t&&n?\"sublayer\"===t.type?Ne({layers:t.layer?.sublayers,map:e,relatedLayer:t,relationship:n})||Ne({layers:t.layer?.subtables,map:e,relatedLayer:t,relationship:n}):Ne({layers:e.allLayers,map:e,relatedLayer:t,relationship:n})||Ne({layers:e.allTables,map:e,relatedLayer:t,relationship:n}):null}function Fe(e,t){return e&&\"utilityNetworks\"in e&&t?e.utilityNetworks?.find((e=>e.isUtilityLayer(t))):null}function je(e,t){return e?.allTables.find((e=>\"feature\"===e.type&&e.layerId===t.id&&e.url===t.layer?.url))}function Ne({map:e,relationship:t,relationship:{relatedTableId:n},relatedLayer:r,layers:i}){if(!i)return null;for(const o of i){if(\"map-image\"===o.type){const n=Ne({layers:o.sublayers,map:e,relatedLayer:r,relationship:t})||Ne({layers:o.subtables,map:e,relatedLayer:r,relationship:t});if(n)return n;continue}if(!J(o))continue;if(\"sublayer\"===r.type){if(o!==r&&o.id===n)return o.isTable?je(e,o):o;continue}const i=\"scene\"===r.type&&r.associatedLayer?r.associatedLayer.url:r.url;if(!i)return null;if(\"sublayer\"!==o.type){if(o!==r&&o.url===i&&o.layerId===n)return o}else if(o!==r&&o.layer?.url===i&&o.id===n)return o.isTable?je(e,o):o}return null}function Ze(e){const t=e.getObjectId();return null!=t?`oid:${t}`:`uid:${e.uid}`}export{le as applyTextFormattingHTML,ie as createFieldInfoMap,Te as findRelatedLayer,Fe as findUtilityNetwork,Q as fixTokens,se as formatAttributes,re as formatEditInfo,W as formatValueToFieldInfo,oe as getAllFieldInfos,ee as getFieldInfo,C as getFieldInfoLabel,M as getFixedFieldName,R as getFixedFieldNames,Ze as getHighlightKeyForFeature,L as getSourceLayer,q as graphicCallback,ae as htmlEntities,K as isAssociatedFeatureSupportedLayer,E as isExpressionField,H as isFeatureSupportedLayer,V as isGraphicForRelatableFeatureSupportedLayer,J as isRelatableFeatureSupportedLayer,B as isRelatableLayer,pe as isRelatedField,he as preLayerQueryCallback,we as preRequestCallback,fe as querySourceLayer,de as queryUpdatedFeature,x as shouldOpenInNewTab,O as substituteAttributes,D as substituteFieldsInLinksAndAttributes};\n"],"names":["y","m","e","b","g","I","h","w","T","F","j","N","Z","n","L","q","r","x","E","v","C","U","A","M","$","R","k","D","i","o","O","P","t","z","G","S","Q","_","H","B","J","K","V","W","l","u","s","c","ee","d","a","f","p","X","le","Y","te","pe","ne","has","re","ie","oe","ae","ue","se","be","fe","ce","de","ye","me","ge","Ie","he","we","Te","Ne","Fe","je","Ze"],"mappings":"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","x_google_ignoreList":[0]}