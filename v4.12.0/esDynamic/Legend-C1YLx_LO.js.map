{"version":3,"file":"Legend-C1YLx_LO.js","sources":["../../node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/relationshipRampUtils.js","../../node_modules/@arcgis/core/widgets/smartMapping/support/utils.js","../../node_modules/@arcgis/core/smartMapping/renderers/support/referenceSizeUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/clusterUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js","../../node_modules/@arcgis/core/widgets/Legend/LegendViewModel.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/css.js","../../node_modules/@arcgis/core/widgets/Legend/support/styleUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/utils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/univariateUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/CardView.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/css.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ClassicView.js","../../node_modules/@arcgis/core/widgets/Legend.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{generateFillAttributes as e,generateStrokeAttributes as a,renderDef as l,renderShape as r,getBoundingBox as t,computeBBox as s,getTransformMatrix as o}from\"../../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as i}from\"../../../../symbols/support/utils.js\";import{isRTL as n,classes as d}from\"../../../support/widgetUtils.js\";import{tsx as m}from\"../../../support/jsxFactory.js\";const b=\"esri-relationship-ramp\",u=`${b}--diamond`,c=`${b}--square`,f=\"http://www.w3.org/2000/svg\",p={diamondContainer:`${u}__container`,diamondLeftCol:`${u}__left-column`,diamondRightCol:`${u}__right-column`,diamondMidCol:`${u}__middle-column`,diamondMidColLabel:`${u}__middle-column--label`,diamondMidColRamp:`${u}__middle-column--ramp`,squareTable:`${c}__table`,squareTableRow:`${c}__table-row`,squareTableCell:`${c}__table-cell`,squareTableLabel:`${c}__table-label`,squareTableLabelLeftBottom:`${c}__table-label--left-bottom`,squareTableLabelRightBottom:`${c}__table-label--right-bottom`,squareTableLabelLeftTop:`${c}__table-label--left-top`,squareTableLabelRightTop:`${c}__table-label--right-top`};function k(e,a,l={}){const{focus:r,labels:t}=e,s=!!r,o=T(e,a,l),i={justifyContent:\"center\"},b=n(),u=l.key??a;return s?m(\"div\",{class:p.diamondContainer,key:`${u}-container`,styles:i},m(\"div\",{class:p.diamondLeftCol},b?t.right:t.left),m(\"div\",{class:p.diamondMidCol},m(\"div\",{class:p.diamondMidColLabel},t.top),o,m(\"div\",{class:p.diamondMidColLabel},t.bottom)),m(\"div\",{class:p.diamondRightCol},b?t.left:t.right)):m(\"div\",{class:p.squareTable,key:`${u}-container`},m(\"div\",{class:p.squareTableRow},m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelRightBottom)},b?t.top:t.left),m(\"div\",{class:p.squareTableCell}),m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelLeftBottom)},b?t.left:t.top)),m(\"div\",{class:p.squareTableRow},m(\"div\",{class:p.squareTableCell}),o,m(\"div\",{class:p.squareTableCell})),m(\"div\",{class:p.squareTableRow},m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelRightTop)},b?t.right:t.bottom),m(\"div\",{class:p.squareTableCell}),m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelLeftTop)},b?t.bottom:t.right)))}function h(e,a,l){const r=`${l}_arrowStart`,t=`${l}_arrowEnd`,s=\"left\"===e,o={markerStart:null,markerEnd:null};switch(a){case\"HL\":s?o.markerStart=`url(#${t})`:o.markerEnd=`url(#${r})`;break;case\"LL\":o.markerStart=`url(#${t})`;break;case\"LH\":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${t})`;break;default:o.markerEnd=`url(#${r})`}return o}function T(n,d,b={}){const{focus:u,numClasses:c,colors:k,rotation:T}=n,{opacity:_,effectList:q,ariaLabel:$}=b,L=b.size??60,g=!!u,C=Math.sqrt(L**2+L**2)+(g?0:5),v=[],w=[],y=[],x=(L||75)/c;for(let s=0;s<c;s++){const o=s*x;for(let i=0;i<c;i++){const n=i*x,d=e(k[s][i]),m=a(null),b={type:\"rect\",x:n,y:o,width:x,height:x},u=l(d);u&&v.push(u);const c=r(b,d.fill,m,null);c&&w.push(c),y.push(t(b))}}const R=15,E=15,M=10;let S=null;g||(S=\"margin: -15px -15px -18px -15px\");const j=h(\"left\",u,d),B=h(\"right\",u,d),H=s(y),U=o(H,C,C,0,!1,T,!1),W=o(H,C,C,0,!1,g?-45:null,!1),X={filter:i(q)??void 0,opacity:null==_?\"\":`${_}`};return m(\"div\",{class:g?p.diamondMidColRamp:p.squareTableCell,styles:X},m(\"svg\",{\"aria-label\":$,focusable:!1,height:C,role:\"image\",style:S,width:C,xmlns:f},m(\"defs\",null,m(\"marker\",{id:`${d}_arrowStart`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"5\",refY:\"5\"},m(\"polyline\",{fill:\"none\",points:\"0,0 5,5 0,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),m(\"marker\",{id:`${d}_arrowEnd`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"0\",refY:\"5\"},m(\"polyline\",{fill:\"none\",points:\"5,0 0,5 5,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),v),m(\"g\",{transform:U},w),m(\"g\",{transform:W},m(\"line\",{fill:\"none\",\"marker-end\":j.markerEnd,\"marker-start\":j.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:-10,x2:-10,y1:L-R,y2:R}),m(\"line\",{fill:\"none\",\"marker-end\":B.markerEnd,\"marker-start\":B.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:E,x2:L-E,y1:L+M,y2:L+M}))))}export{k as renderRelationshipRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../core/lang.js\";import{getStroke as o,getFill as e}from\"../../../symbols/support/gfxUtils.js\";import{getSymbolLayerFill as r}from\"../../../symbols/support/previewSymbol3D.js\";const s={HH:315,HL:45,LL:135,LH:225},l={2:[[\"HL\",\"HH\"],[\"LL\",\"LH\"]],3:[[\"HL\",\"HM\",\"HH\"],[\"ML\",\"MM\",\"MH\"],[\"LL\",\"LM\",\"LH\"]],4:[[\"HL\",\"HM1\",\"HM2\",\"HH\"],[\"M2L\",\"M2M1\",\"M2M2\",\"M2H\"],[\"M1L\",\"M1M1\",\"M1M2\",\"M1H\"],[\"LL\",\"LM1\",\"LM2\",\"LH\"]]};function n(t){if(!t)return;const{type:s}=t;if(s.includes(\"3d\"))return r(t.symbolLayers.at(0));if(\"simple-line\"===s){const e=o(t);return e&&e.color}if(\"simple-marker\"===t.type&&(\"x\"===t.style||\"cross\"===t.style)){const e=o(t);return e&&e.color}return e(t)}function H(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){case\"HH\":default:return{top:e,bottom:r,left:s,right:l};case\"HL\":return{top:s,bottom:l,left:r,right:e};case\"LL\":return{top:r,bottom:e,left:l,right:s};case\"LH\":return{top:l,bottom:s,left:e,right:r}}}function L(o,e){const r=[],s=o.length**.5,l=t(o),n=(e||\"HH\").split(\"\"),H=n[0],L=\"H\"===n[1];for(;l.length;){const t=[];for(;t.length<s;)t.push(l.shift());L&&t.reverse(),r.push(t)}return\"L\"===H&&r.reverse(),r}function i(t){const{focus:o,infos:e,numClasses:r}=t,s=l[r],L={};e.forEach((t=>{L[t.value]={label:t.label,fill:n(t.symbol)}}));const i=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=L[s[l][o]];t.push(e.fill)}i.push(t)}return{type:\"relationship-ramp\",numClasses:r,focus:o,colors:i,labels:H(o,L),rotation:u(o)}}function u(t){let o=s[t];return t&&null==o&&(o=s.HH),o||0}export{L as getRelationshipRampColors2D,i as getRelationshipRampElement,u as getRotationAngleForFocus};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import{formatDate as n}from\"../../../intl/date.js\";import{formatNumber as i}from\"../../../intl/number.js\";import{timelineDateFormatOptions as o}from\"../../../renderers/support/utils.js\";import e from\"../../../renderers/visualVariables/SizeVariable.js\";function r(t){return n(new Date(t),o)}function s(t){const n=2,o=Math.floor(Math.log10(Math.abs(t)))+1,e=o<4||o>6?4:o,r=1e6,s=Math.abs(t)>=r?\"compact\":\"standard\";return i(t,{notation:s,minimumSignificantDigits:n,maximumSignificantDigits:e})}function a(t,n,i){if(null==n||null==t)return[];const o=[];for(let e=-1*i;e<=i;e++)0!==e&&o.push(n+e*t);return o}function u(t){const{max:n,min:i,padding:o,pathHeight:e,pathWidth:r,stops:s}=t,a=n-i;let u,h=`M0 0 L${r} 0 `;const m=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],f=Math.min.apply(Math,m.map((t=>t.size))),l=Math.max(Math.abs(m[0].size-m[1].size),Math.abs(m[2].size-m[1].size));return m.reverse(),m.forEach((({size:t,value:n},s)=>{const m=Math.round((t-f)/l*100)/100,c=Math.round(e-(n-i)/a*e);u=m*r,0===u&&(u=o*r),0===s&&(h+=`L${u} 0 `),h+=`L${u} ${c} `})),h+=`L${u} ${e} L0 ${e} L0 0 Z`,h}function h(t){const{bottomValue:n,bottomWidth:i,max:o,min:e,pathHeight:r,pathWidth:s,topValue:a,topWidth:u}=t,h=u*s,m=i*s,f=o-e,l=Math.round(r-(n-e)/f*r);return`M${h} 0 L${h} ${Math.round(r-(a-e)/f*r)} L${m} ${l} L${m} ${r} L0 ${r} L0 0 Z`}function m(t){let n=t.maxSize,i=t.minSize;return n instanceof e&&(n=n.stops[0].size),i instanceof e&&(i=i.stops[0].size),[n,i]}function f(t,n,i){const o=i.length-1;if(o<0)return[];const e=i[0],r=i[o]-e,s=n-t,a=[];for(let u=1;u<o;u++){const n=(i[u]-e)/r*s+t;a.push({index:u,value:n})}return a.unshift({index:0,value:t}),a.push({index:o,value:n}),a}function l(n){return n instanceof t?n.toCss(!0):t.fromString(n??\"\").toCss(!0)}export{r as formatDateLabel,s as formatNumberLabel,a as getDeviationValues,u as getDynamicPathForSizeStops,l as getFillFromColor,h as getPathForSizeStops,m as getSizesFromVariable,f as getStopChanges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{clone as r}from\"../../../core/lang.js\";import n from\"../../../renderers/visualVariables/support/SizeStop.js\";import t from\"../../../symbols/CIMSymbol.js\";import{PlacementPolygonCenterMethod as i}from\"../../../symbols/cim/enums.js\";var a;function o(r){if(null!=r.minDataValue&&null!=r.maxDataValue&&null!=r.minSize&&null!=r.maxSize&&\"number\"==typeof r.minSize&&\"number\"==typeof r.maxSize)return[new n({value:r.minDataValue,size:r.minSize}),new n({value:r.maxDataValue,size:r.maxSize})];throw new e(\"create-reference-size-symbol\",\"Invalid size variable\")}function l(e){const{view:r,field:n,normalizationField:t,sizeStops:i,sizeByScaleEnabled:o}=e,{value:l,size:s}=i[0],{value:m,size:c}=i[1];let u,y=0;n&&(y=`$feature[\"${n}\"]`,u=`\\n      if(!HasValue($feature, \"${n}\")){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n    `),t&&(y=`$feature[\"${n}\"] / $feature[\"${t}\"]`,u=`if(!HasValue($feature, \"${n}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n      $feature[\"${t}\"];`);const p={type:\"CIMExpressionInfo\",title:\"Size in pixels of outer ring\",expression:o?`\\n      ${u}\\n      var maxSize = ${c};\\n      var referenceScale = ${r.scale};\\n      return (maxSize * (referenceScale / $view.scale));\\n    `:`${u}\\n      return ${c}`,returnType:\"Default\"},f={type:\"CIMExpressionInfo\",title:\"Size in pixels of inner ring\",expression:`\\n        ${u}\\n        var value = ${y};\\n\\n        var referenceScale = ${r.scale};\\n        var referenceScaleRatio = ${o?\"(referenceScale / $view.scale)\":1};\\n        var maxSize = ${c} * referenceScaleRatio;\\n        var minSize = ${s} * referenceScaleRatio;\\n\\n        var minDataValue = ${l};\\n        var maxDataValue = ${m};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var innerDotSize = Constrain(maxSize * ratio, minSize, maxSize);\\n        return innerDotSize;\\n      `,returnType:\"Default\"};return[{type:\"CIMPrimitiveOverride\",primitiveName:a.OuterRing,propertyName:\"Size\",valueExpressionInfo:p},{type:\"CIMPrimitiveOverride\",primitiveName:a.InnerDot,propertyName:\"Size\",valueExpressionInfo:f}]}function s(e){switch(e){case\"circle\":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case\"square\":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case\"diamond\":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case\"hexagon-pointy\":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case\"hexagon-flat\":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function m(e){const{type:r,color:n,colorLocked:t}=e;return{type:\"CIMVectorMarker\",enable:!0,colorLocked:!1,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:a.OuterRing,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray(),colorLocked:!!t,effects:[{type:\"CIMGeometricEffectDonut\",width:.75}]}]}}],scaleSymbolsProportionally:!1,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:i.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:20}}function c(e){const{type:r,color:n}=e;return{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:a.InnerDot,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:s(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:i.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:10}}function u(e){const{primitiveOverrides:r}=e;return new t({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[m(e),c(e)]},primitiveOverrides:r}})}function y(e){return\"CIMVectorMarker\"===e?.type?e.markerGraphics?.[0]:void 0}function p(e){return\"CIMPolygonSymbol\"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function f(e,r){\"CIMVectorMarker\"===e?.type&&null!=r&&(e.size=r)}function v(e,r){const n=y(e);n&&null!=r&&(n.geometry=s(r))}function S(e,r){const n=p(y(e));n&&null!=r&&(n.color=r.toArray())}function z(e,r,n){const t=p(y(e));t&&null!=r&&n&&(t.colorLocked=r)}function d(e,n){const{outerRingSize:t,innerDotSize:i,type:o,color:l,colorLocked:s,primitiveOverrides:m}=n,c=\"CIMPolygonSymbol\"===e.data.symbol?.type?e.data.symbol.symbolLayers:null;if(2===c?.length)for(const r of c){const e=r.primitiveName===a.OuterRing;f(r,e?t:i),v(r,o),S(r,l),z(r,s,e)}return null!=t&&null!=i&&(e.data.primitiveOverrides=null),void 0!==m&&(e.data.primitiveOverrides=r(m)),e}!function(e){e.OuterRing=\"reference-size-outer-ring\",e.InnerDot=\"reference-size-inner-dot\"}(a||(a={}));export{l as createPrimitiveOverrides,u as createReferenceSizeSymbol,o as getReferenceSizeStops,d as updateReferenceSizeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";function l(l,i,s){const a=l.effectiveClusterRenderer;if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const n=a.visualVariables.find((e=>\"size\"===e.type));if(!(\"stops\"in n)||!n.stops)return null;const t=n.stops.find((e=>e.useMinValue)),u=n.stops.find((e=>e.useMaxValue));if(null==t||null==u)return null;const r=s.featuresTilingScheme.getClosestInfoForScale(s.scale).level,f=n.field,o=i.getDisplayStatistics(r,f);return o?new e({field:n.field,minSize:l.clusterMinSize,minDataValue:o.minValue,maxSize:l.clusterMaxSize,maxDataValue:o.maxValue}):null}export{l as getEffectiveClusterSizeVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{round as l,numDigits as t,percentChange as n}from\"../../../renderers/support/numberUtils.js\";import{updateReferenceSizeSymbol as o}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import s from\"../../../symbols/SimpleLineSymbol.js\";import i from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as r}from\"../../../symbols/support/cimSymbolUtils.js\";import{isSymbol3D as a}from\"../../../symbols/support/typeUtils.js\";import{isVolumetricSymbol as u,getSymbolOutlineSize as c}from\"../../../symbols/support/utils.js\";import{getReferenceSizeAuthoringInfoVisualVariable as m,getSymbolForFlowRenderer as p,createStopLabel as f}from\"./utils.js\";import\"../../support/widgetUtils.js\";import{isDarkTheme as y}from\"../../../support/themeUtils.js\";const b=30,h=12,d=24,w=[255,255,255],S=[200,200,200],g=[128,128,128],v=20,z=5;function j(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function k(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function V(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function x(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function U(e,l){const t=e.length-1;return e.map(((e,n)=>f(e,n,t,l)))}async function I(e,t,n,o,s,i,r){const a=t.legendOptions,p=a?.customValues,f=r||await D(e,n),y=t.stops,b=!!f,h=!!p,w=null!=t.minSize&&null!=t.maxSize,S=y&&y.length>1,g=!!t.target;if(!b||!h&&!(w||S&&!g))return;const v=u(f);let z=!1,j=null,k=null;j=v&&!S?l([t.minDataValue,t.maxDataValue]):p??await T(t,f,o,s?.type);const V=e?.authoringInfo,x=\"univariate-color-size\"===V?.type,I=x&&\"above-and-below\"===V?.univariateTheme,q=!!m(e);if(!j&&S&&(j=y.map((e=>e.value)),z=y.some((e=>!!e.label)),\"flow\"===e.type&&(j=l(j)),z&&(k=y.map((e=>e.label)))),v&&null!=j&&j?.length>2&&!I&&(j=[j[0],j[j.length-1]]),!j)return null;x&&5!==j?.length&&(j=P({minSize:j[0],maxSize:j[j.length-1]}));const B=v?L(e,j):null,E=c(f),R=z?null:U(j,i);return(await Promise.all(j.map((async(l,i)=>{const r=v?B[i]:await H(t,f,l,o,s?.type);return{value:l,symbol:!q||\"class-breaks\"!==e.type&&\"unique-value\"!==e.type?O(I&&\"class-breaks\"===e.type?C(e,i):f,r):M(e,r,t.maxSize,n)??f,label:z?k[i]:R[i],size:q?d:r,outlineSize:E}})))).reverse()}function L(e,l){const t=e?.authoringInfo,n=\"univariate-color-size\"===t?.type;let o=[h,b];if(n){const e=l[0],t=l[l.length-1],n=h,s=b;o=l.map((l=>n+(l-e)/(t-e)*(s-n)))}return n&&\"below\"===t?.univariateTheme&&o.reverse(),o}function M(l,t,n,s){const i=\"class-breaks\"===l.type,r=i?l.classBreakInfos?.[0]?.symbol?.clone():l.uniqueValueInfos?.[0]?.symbol?.clone();return r&&\"type\"in r&&\"cim\"===r.type?(o(r,{color:s??(i?null:new e(S)),innerDotSize:t*(d/n)||1,outerRingSize:d}),r):null}function C(e,l){const t=e.classBreakInfos,n=t.length,o=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone(),s=e.visualVariables?.some((e=>\"color\"===e.type));return s&&(o.type.includes(\"3d\")?B(o):E(o)),o}async function D(e,l){if(\"flow\"===e.type)return p(e,l);if(\"pie-chart\"===e.type)return new i({color:null,outline:e.outline?.width?e.outline:new s});let t=null,n=null;if(\"simple\"===e.type)t=e.symbol;else if(\"class-breaks\"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if(\"unique-value\"===e.type){const l=e.uniqueValueInfos;t=l?.[0]?.symbol,n=null!=l&&l.length>1}return!t||q(t)?null:(t=t.clone(),(l||n)&&(t.type.includes(\"3d\")?B(t):E(t)),t)}function q(e){return a(e)?e.symbolLayers?.some((e=>\"fill\"===e?.type))??!1:e?.type.includes(\"fill\")??!1}function B(e){\"line-3d\"===e.type?e.symbolLayers.forEach((e=>{e.material={color:g}})):e.symbolLayers.forEach((e=>{\"icon\"!==e.type||e.resource?.href?e.material={color:S}:(e.material={color:w},e.outline={color:g,size:1.5})}))}function E(l){const t=y();if(\"cim\"===l.type)r(l,new e(S));else if(l.type.includes(\"line\"))l.color=g;else if(l.color=t?g:w,\"simple-marker\"===l.type)if(l.outline){const e=l.outline?.color?.toHex();\"#ffffff\"===e&&(l.outline.color=g)}else l.outline={color:g,width:1.5}}async function T(e,t,n,o){const s=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,n,o),i=s&&P(s);if(!s||!i)return;let r=i.map((l=>R(l,e,s)));r=l(r);for(let l=1;l<r.length-1;l++){const s=await A(e,t,r[l],r[l-1],n,o);s&&(r[l]=s[0],i[l]=s[1])}return r}function P(e){const l=e.minSize,t=e.maxSize,n=z,o=(t-l)/(n-1),s=[];for(let i=0;i<n;i++)s.push(l+o*i);return s}function R(e,l,t){const n=t.minSize,o=t.maxSize,s=l.minDataValue,i=l.maxDataValue;let r;if(e<=n)r=s;else if(e>=o)r=i;else{r=(e-n)/(o-n)*(i-s)+s}return r}async function A(e,o,s,i,r,a){const u=await H(e,o,s,r,a),c=await H(e,o,i,r,a),m=t(s),p=m.fractional,f=v;let y=m.integer,b=null,h=null;s>0&&s<1&&(b=10**p,y=t(s*=b).integer);for(let t=y-1;t>=0;t--){const i=10**t;let m=Math.floor(s/i)*i,p=Math.ceil(s/i)*i;null!=b&&(m/=b,p/=b);let y=(m+p)/2;[,y]=l([m,y,p],{indexes:[1]});const d=await H(e,o,m,r,a),w=await H(e,o,p,r,a),S=await H(e,o,y,r,a),g=n(u,d,c,null),v=n(u,w,c,null),z=n(u,S,c,null);let j=g.previous<=f,k=v.previous<=f;if(j&&k&&(g.previous<=v.previous?(j=!0,k=!1):(k=!0,j=!1)),j?h=[m,d]:k?h=[p,w]:z.previous<=f&&(h=[y,S]),h)break}return h}async function H(e,l,t,n,o){const{getSize:s}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return s(e,t,{scale:n,view:o,shape:\"simple-marker\"===l.type?l.style:null})}function O(e,l){const t=e.clone();if(a(t))u(t)||t.symbolLayers.forEach((e=>{\"fill\"!==e.type&&(e.size=l)}));else if(j(t))t.size=l;else if(k(t)){const e=t.width,n=t.height;t.height=l,t.width=l*(e/n)}else V(t)?t.width=l:x(t)&&t.font&&(t.font.size=l);return t}export{I as getRampStops,M as getReferenceSizeSymbol,b as realWorldMaxSize,h as realWorldMinSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import\"../../../intl.js\";import{addTokenParameter as s}from\"../../../kernel.js\";import i from\"../../../request.js\";import l from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import n from\"../../../core/Collection.js\";import has from\"../../../core/has.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{debounce as u}from\"../../../core/promiseUtils.js\";import{on as c,watch as d,whenOnce as y,initial as h}from\"../../../core/reactiveUtils.js\";import{px2pt as m}from\"../../../core/screenUtils.js\";import{parseWhereClause as p}from\"../../../core/sql.js\";import{addQueryParameters as f}from\"../../../core/urlUtils.js\";import{property as g}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as b}from\"../../../core/accessorSupport/decorators/subclass.js\";import{OriginId as S}from\"../../../core/accessorSupport/PropertyOrigin.js\";import{EffectView as _}from\"../../../layers/effects/EffectView.js\";import{effectFunctionsFromJSON as w}from\"../../../layers/effects/jsonUtils.js\";import{getEffectiveDisplayFilter as v}from\"../../../layers/support/displayFilterUtils.js\";import{ExportImageParameters as L}from\"../../../layers/support/ExportImageParameters.js\";import{getRendererFields as E}from\"../../../layers/support/fieldUtils.js\";import{isFeatureLayer as C}from\"../../../layers/support/layerUtils.js\";import{getPixelValueRange as I}from\"../../../layers/support/rasterFormats/pixelRangeUtils.js\";import{fromJSON as F}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as R}from\"../../../renderers/support/rendererConversion.js\";import V from\"../../../renderers/visualVariables/SizeVariable.js\";import D from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{updateReferenceSizeSymbol as x}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import z from\"../../../symbols/SimpleFillSymbol.js\";import T from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as j}from\"../../../symbols/support/cimSymbolUtils.js\";import{SymbolSizeDefaults as O}from\"../../../symbols/support/previewUtils.js\";import{renderSymbol as P}from\"../../../symbols/support/renderUtils.js\";import{renderColorRampPreviewHTML as A,renderDotDensityPreviewHTML as M,renderPieChartPreviewHTML as U,renderPreviewHTML as k}from\"../../../symbols/support/symbolUtils.js\";import{isVolumetricSymbol as B}from\"../../../symbols/support/utils.js\";import{getEffectiveClusterSizeVariable as N}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as q,getRampStopsForPointCloud as H,getStretchRampStops as $,getRampStops as W}from\"./colorRampUtils.js\";import{getHeatmapRampStops as G}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as J,getRelationshipRampElement as Q}from\"./relationshipRampUtils.js\";import{getRampStops as Z,realWorldMaxSize as K,realWorldMinSize as X}from\"./sizeRampUtils.js\";import{specialCharsLessThan as Y,specialCharsGreaterThan as ee,getReferenceSizeAuthoringInfoVisualVariable as te,getSymbolForFlowRenderer as se,getMedianColor as ie,rgbImgSource as le,getDateFormatOptions as re}from\"./utils.js\";import{formatNumberLabel as ne}from\"../../smartMapping/support/utils.js\";import{fetchMessageBundle as ae}from\"../../../intl/messages.js\";import{substitute as oe}from\"../../../intl/substitute.js\";const ue=16,ce=\"https://utility.arcgis.com/sharing/tools/legend\",de=\"esri.layers.ImageryLayer\",ye=\"esri.layers.ImageryTileLayer\",he=\"esri.layers.WCSLayer\",me=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,pe=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),fe=new T({size:6,outline:{color:[128,128,128,.5],width:.5}}),ge=new z({style:\"solid\"});function be(e){return\"flow\"===e.type}function Se(e){return\"vector-field\"===e.type}function _e(e){return\"raster-colormap\"===e.type}function we(e){return\"raster-stretch\"===e.type}function ve(e){return\"raster-shaded-relief\"===e.type}function Le(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function Ee(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function Ce(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function Ie(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function Fe(e){return Ve(e)||De(e)||xe(e)||Re(e)}function Re(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function Ve(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function De(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function xe(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function ze(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function Te(e){return\"esri.renderers.PieChartRenderer\"===e.declaredClass}function je(e,t){return Le(e)||Ee(e)||Ce(e)||Ie(e)||ze(e)||Te(e)?\"2d\"===t.type||R(e):we(e)||_e(e)||ve(e)||Ve(e)||De(e)||xe(e)||Se(e)||be(e)}function Oe(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function Pe(e){return\"esri.layers.SubtypeGroupLayer\"===e.declaredClass}function Ae(e){return\"esri.layers.VoxelLayer\"===e.declaredClass}function Me(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function Ue(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function ke(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function Be(e){return\"esri.layers.TileLayer\"===e.declaredClass}function Ne(e){return e.declaredClass===de}function qe(e){return e.declaredClass===ye}function He(e){return e.declaredClass===he}function $e(e){return\"stretch-ramp\"===e.type}function We(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type}function Ge(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type&&\"above-and-below\"===t?.univariateTheme}function Je(e){return\"sublayers\"in e}async function Qe(e,t){const s=await ae(\"esri/widgets/Legend/t9n/Legend\");return\"previewTemplateAriaLabel\"!==e||t||(e=\"previewAriaLabel\"),oe(s[e],{label:t})}function Ze(e,t){const{field:s,field2:i,field3:l,fieldDelimiter:r,valueExpression:n}=e;if(!s)return null;const a=!(!s&&!n||!i&&!l)?t?.toString().split(r||\"\"):[t],o=s?{[s]:a?.[0]}:null;return o&&(i&&(o[i]=a?.[1]),l&&(o[l]=a?.[2])),o}const Ke=new T({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let Xe={},Ye=class extends l{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new n,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this.addHandles([c((()=>this.children),\"change\",(t=>{const{added:s,removed:i}=t;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles(d((()=>t.ready),e,h),s)})),i.forEach((e=>this.removeHandles(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(Xe={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Xe=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return\"effect\"in e&&e.effect&&(t=new _,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,s=this.layer.parent,i=s&&\"uid\"in s?this._getParentLayerOpacity(s):null;return null!=t?t*e:null!=i?i*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"effect\"in e&&e.effect&&Array.isArray(e.effect))return!0;if(\"featureReduction\"in e&&e.featureReduction){if(\"cluster\"===e.featureReduction.type)return!0;if(\"binning\"===e.featureReduction.type&&\"renderer\"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return\"renderer\"in e&&e.renderer?!!(\"displayFilterInfo\"in e&&e.displayFilterInfo&&Ce(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange(\"ready\");const t=Array.from(e,(e=>{if(C(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,s=t?.drawingInfo,i=s&&F(s.renderer),l=pe.read(t.geometryType);return i?this._getRendererLegendElements(i,{title:e.name,geometryType:l}):(o.getLogger(this).warn(\"drawingInfo not available!\"),null)}return null}));try{const e=[],s=await Promise.allSettled(t);for(const t of s)if(\"fulfilled\"===t.status)for(const s of t.value??[])e.push(s);this.legendElements=e,this.notifyChange(\"ready\")}catch(s){o.getLogger(this).warn(\"error while building legend for layer!\",s)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForTools(){const e=this.layer;if(Ae(e))this._constructLegendElementsForVoxelLayer();else if(Ue(e))this._constructLegendElementsForWMTSlayer();else if(Me(e))await this._constructLegendElementsForWMSSublayers();else if(Oe(e))await this._constructLegendElementsForBuildingSceneLayer();else if(ke(e)||Be(e)||Pe(e))await this._constructLegendElementsForSublayers();else{this.removeHandles(\"imageryLayers-watcher\");let t=\"default\";if(Ne(e)){const s=e;t=(s?.rasterFunction?.functionName||\"default\")+\"_\"+(e.bandIds?.length?e.bandIds.join(\"\"):\"###\")}if(qe(e)||\"link-chart\"===e.type)return;await this._getLegendLayers(`${e.uid}-${t}`).then((async t=>{this.legendElements=[],this.notifyChange(\"ready\");const s=t.map((async t=>{if(Ne(e)){const t=d((()=>[e.rasterFunction,e.bandIds]),(()=>u((async()=>{Xe.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(t,\"imageryLayers-watcher\")}const s=this._generateSymbolTableElementForLegendLayer(t);s?.infos.length&&(Ne(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange(\"ready\")}));await Promise.allSettled(s)})).catch((e=>{o.getLogger(this).warn(\"Request to server for legend has failed!\",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&\"createQuery\"in t&&\"queryFeatureCount\"in t;if(!s&&!(t&&\"createQuery\"in e&&\"queryFeatureCount\"in e))return!0;await y((()=>!t.updating));const i=s?\"createQuery\"in t&&t.createQuery():\"createQuery\"in e&&e.createQuery();if(!i)return!0;i.geometry=this.view.extent;return 0!==(s?\"queryFeatureCount\"in t&&await t.queryFeatureCount(i):\"queryFeatureCount\"in e&&await e.queryFeatureCount(i))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&\"uid\"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){return this.children.some((e=>e.ready))}_isRendererScaleDriven(e){if(\"dot-density\"===e.type)return!0;const t=\"valueExpression\"in e?e.valueExpression:null;if(me.test(t))return!0;const s=\"visualVariables\"in e?e.visualVariables:null;return!!s?.some((e=>this._isScaleDrivenSizeVariable(e)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case\"simple\":return this._isScaleDrivenSymbol(e.symbol);case\"class-breaks\":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some((e=>this._isScaleDrivenSymbol(e.symbol)));case\"unique-value\":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some((e=>this._isScaleDrivenSymbol(e.symbol)))}return!1}_isScaleDrivenSymbol(e){if(\"cim\"===e?.type){const{primitiveOverrides:t,minScale:s,maxScale:i}=e.data,l=t?.some((e=>/\\$view\\.scale/.test(e.valueExpressionInfo?.expression||\"\")))??!1;return null!=s||null!=i||l}return!1}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,s=t.minSize,i=t.maxSize;return!(\"object\"!=typeof s||!s||!this._isScaleDrivenSizeVariable(s))||(!(\"object\"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||me.test(t.valueExpression))}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&ke(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const s of t.sourceJSON.layers??[])if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this.legendElements=[],this.removeHandles(\"voxel-style-watcher\"),this.removeHandles(\"voxel-current-variable\");const e=this.layer;this.addHandles(d((()=>e.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-current-variable\"),this.addHandles(d((()=>e.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-style-watcher\");const t=e.getVariableStyle(null),s=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new z({color:t.color,outline:null})})})),e.length&&s.push({type:\"symbol-table\",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:i}=t.transferFunction,l=e.toArray().reverse(),r=i.map(((e,t)=>`${0===t?Y:ee} ${ne(e)}`)).reverse(),n=l.map((e=>({color:e.color,value:null,label:null})));n[0].label=r[0],n[n.length-1].label=r[1],s.push({type:\"color-ramp\",title:t.label,infos:n,preview:A(l.map((e=>e.color)),{ariaLabel:await Qe(\"previewColorRampAriaLabel\")})})}const i=e.opacity,l=s.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).map((e=>this._getSymbolPreview(e,i)));await Promise.allSettled(l),this.legendElements=s,this.notifyChange(\"ready\")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;this.addHandles(d((()=>{const{layer:e}=this;return e&&\"activeLayer\"in e&&e.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),\"wmts-activeLayer-watcher\");const t=e.styleId?e.styles?.find((({id:t})=>t===e.styleId))?.legendUrl:void 0;t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(d((()=>{const{layer:e}=this;return e&&\"sublayers\"in e&&e.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const s=this.layer,i=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\");const l=this.sublayerIds?.map((e=>s.findSublayerById(e)))?.filter(r)??[],n=l.length?l:e.toArray();for(const r of n){const e=d((()=>[r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e?.infos.length&&i.unshift(e)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let s=e.legendUrl;if(!s)return;const l={type:\"symbol-table\",title:e.title||e.name||String(e.id??\"\"),infos:[]};t&&(s=f(s,t));let r=null;const n=e.layer?.opacity;try{r=(await i(s,{responseType:\"image\"})).data,r&&(r.style.opacity=n)}catch{}return l.infos.push({src:s,preview:r,opacity:n}),l}_getLegendLayers(e,t){const s=Xe&&Xe[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return Xe[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:\"json\",dynamicLayers:e};if(Ne(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(s.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:i,customParameters:l}=t;s={raster:e,viewId:i,...s,...l}}}let l=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&+t.version>=10.01){const e=l.indexOf(\"?\");e>-1?l=l.slice(0,e)+\"/legend\"+l.slice(e):l+=\"/legend\"}else{const e=l.toLowerCase().indexOf(\"/rest/\"),t=-1===e?l:l.slice(0,e)+l.slice(e+5);l=ce+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return i(l,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;this.addHandles(d((()=>e.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");const i=e.toArray();for(const l of i){const e=d((()=>[\"renderer\"in l&&l.renderer,l.opacity,l.title,l.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||l.visible){const e=null!=l?.opacity?l.opacity:null,i=null!=e?e*t:t;if(\"building-group\"===l.type){const e={type:\"symbol-table\",title:l.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(l.sublayers,i);e.infos.push(...t),s=[e,...s]}else if(l.renderer){s=[...await this._getRendererLegendElements(l.renderer,{title:l.title,opacity:i,sublayer:l}),...s]}}}return s.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;if(ke(e)||Be(e)||Pe(e)){this.addHandles(d((()=>e.sublayers),(()=>this._constructLegendElementsForSublayers)),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}}async _generateLegendElementsForSublayers(e,t,s){const i=this.layer;let l=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForSublayers())),\"sublayers-watcher\");let n=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(n=Pe(i)?this.sublayerIds.map((e=>i.findSublayerForSubtypeCode(e))).filter(r):this.sublayerIds.map((e=>i.findSublayerById(e))).filter(r));for(const r of n){const e=d((()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const e=null!=r?.opacity?r.opacity:null,i=null!=e?e*t:t,n=!Je(r)||r.originIdOf(\"renderer\")>S.SERVICE&&!r.sublayers;if(r.renderer&&n){await r.load();l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:i,sublayer:r}),...l]}else if(Je(r)){const e=await this._generateSymbolTableElementForSublayer(r,i,s);e&&l.unshift(e)}}}return l.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,i=e.source;let l=null;if(!(!i||\"map-layer\"===i.type&&i.mapLayerId===e.id&&(!i.gdbVersion||i.gdbVersion===(\"gdbVersion\"in t&&t.gdbVersion)))||e.originIdOf(\"renderer\")>S.SERVICE||e.originIdOf(\"labelingInfo\")>S.SERVICE||e.originIdOf(\"labelsVisible\")>S.SERVICE){const e=new L({layer:this.layer});l=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const r=l||`${t.uid}-default`;(await this._getLegendLayers(r,l)).forEach((e=>s.set(e.layerId,e)))}const i=s.get(e.id);if((!i||i?.subLayerIds&&i.defaultVisibility)&&e.sublayers){const i=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return{type:\"symbol-table\",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t?.renderer;let l=t?.title||e.layerName;if(i&&(!t||t?.originIdOf(\"renderer\")>S.SERVICE)){const e=t?.title||this._getRendererTitle(i,t);e&&(l&&\"string\"!=typeof e&&\"title\"in e&&(e.title=l),l=e)}const r={type:\"symbol-table\",title:l,legendType:e.legendType||null,infos:[]},n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach((t=>{const i={type:\"symbol-table\",title:t.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(n.filter((e=>e.groupId===t.id)),e.layerId,s)};i.infos?.length>0&&r.infos.push(i)})):r.infos=this._generateSymbolTableElementInfosForLegendLayer(n,e.layerId,s),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map((e=>{let l=e.url;if(e.imageData&&e.imageData.length>0)l=`data:image/png;base64,${e.imageData}`;else{if(0===l.indexOf(\"http\"))return null;l=s(`${this.layer.url}/${t}/images/${l}`)}return{label:e.label,src:l,opacity:i??this.opacity,width:e.width,height:e.height}})).filter(r)}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return!(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let i=null,l=null,r=!0;return!s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(i=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(l=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(i=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,l=Math.max(s.maxScale,e.maxScale)),(i>0&&i<this.scale||l>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const s=t.renderer,i=e.some((e=>e.values));let l=0,r=null;return i&&e.some(((e,t)=>(e.values||(l=t,r=e,r.label||(r.label=\"others\")),null!=r))),s?\"unique-value\"===s.type?r&&(e.splice(l,1),e.push(r)):\"class-breaks\"===s.type&&(r&&e.splice(l,1),s.legendOptions?.order||e.reverse(),r&&e.push(r)):r&&(e.splice(l,1),e.push(r)),e}async _getRendererLegendElements(e,t={}){if(!je(e,this.view))return o.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Fe(e))return this._constructPointCloudRendererLegendElements(e,t);if(ze(e))return this._constructDotDensityRendererLegendElements(e);const s=await this._loadRenderer(e);return Te(s)?this._constructPieChartRendererLegendElements(s):this._constructRendererLegendElements(s,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return\"binning\"===e.type?t=e.renderer:\"cluster\"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??\"\"}async _constructPointCloudRendererLegendElements(e,t={}){const s=t.title,i=[];let l=null,r=null;if(Ve(e))l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{l.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(fe,e.color)})}));else if(De(e)){const t=e.stops;let i=null;if(t?.length&&(1===t.length&&(i=t[0].color),!i)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){i=q(e+(s-e)/2,t)}}l={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(fe,i||fe.color)}]};const n=H(e.stops??[])??[];r={type:\"color-ramp\",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:A(n.map((e=>e.color)),{ariaLabel:await Qe(\"previewColorRampAriaLabel\")})}}else xe(e)&&(l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach((e=>{l.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(fe,e.color)})})));l?.infos.length&&i.push(l),r?.infos.length&&i.push(r);const n=i.reduce(((e,t)=>[...e,...t.infos??[]]),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return await Promise.allSettled(n),i}async _getElementInfoForDotDensity(e,t){const{color:s,label:i,valueExpressionTitle:l}=t,{backgroundColor:r,outline:n,dotSize:a}=e,o=this.effectList,u=o?.effects.map((e=>e.toJSON())),c=w(u),d=await Qe(\"previewTemplateAriaLabel\",i||l),y=a+\"-\"+s+\"-\"+r+\"-\"+(n&&JSON.stringify(n.toJSON()))+\"-\"+c,h=this._dotDensityUrlCache,m=h.has(y)?h.get(y):M(e,s,{ariaLabel:d});h.set(y,m);const p={shape:{type:\"image\",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]},f=P([[p]],[m.width,m.height],{effectView:this.effectList,ariaLabel:d});return{opacity:1,src:m.src,preview:f,width:m.width,height:m.height}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions?.unit,i={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:s||\"\"},infos:[]};for(const l of e.attributes){const t=await this._getElementInfoForDotDensity(e,l);t.label=l.label||l.valueExpressionTitle||l.field,i.infos.push(t)}return[i]}async _constructPieChartRendererLegendElements(e){const t=this.layer.opacity,s=[];let i=null;const l=e.outline;e.attributes.forEach((e=>{const t=new T({color:e.color,outline:l}),i=e.label||e.valueExpressionTitle||e.field;s.push({label:i,symbol:t})}));const r=s.length?[...s]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const t=new T({color:e.othersCategory.color,outline:l});i=e.othersCategory.label||\"Other\",s.push({label:i,symbol:t})}if(e.defaultColor?.a){const t=new T({color:e.defaultColor,outline:l});s.push({label:e.defaultLabel,symbol:t})}const n=await this._getVisualVariableLegendElements(e,this.layer)||[];if(s.length){n.unshift({type:\"symbol-table\",title:null,infos:s});const t=r.filter((e=>e.label!==i)).map((e=>e.symbol.color)).filter(Boolean),a=U(t,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,effectList:this.effectList,outline:l,ariaLabel:await Qe(\"previewPieChartAriaLabel\")});n.unshift({type:\"pie-chart-ramp\",title:this._getRendererTitle(e,this.layer),infos:s,preview:a})}const a=n.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol&&!e?.preview)).map((e=>this._getSymbolPreview(e,t,{effectList:this.effectList})));return await Promise.allSettled(a),n}async _getWhereClause(e,t,s){const i=await p(e,s),l=await E(t,s),r=new Set(l.map((e=>e.toLowerCase()))),n=i?.fieldNames.map((e=>e.toLowerCase()));return n?.some((e=>!r.has(e)))?null:i}async _processDefinitionExpression(e,t){if(!(\"definitionExpression\"in e))return;const s=e.definitionExpression;s&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==s&&(this._layerDefinitionExpressionClause=await this._getWhereClause(s,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=s}async _processDisplayFilter(e,t){if(!(\"displayFilterInfo\"in e))return;const s=e.displayFilterInfo?v(e.displayFilterInfo,this.view):null;return s?.where?this._layerDisplayFilterId!==s?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(s.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=s?.id,s}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:i}=t,l=i||this.layer,r=te(e);let n=null;Ce(e)&&(await this._processDefinitionExpression(l,e),n=await this._processDisplayFilter(l,e)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const a=await this._getVisualVariableLegendElements(e,l)||[],o={type:\"symbol-table\",title:s||this._getRendererTitle(e,l),infos:[]};let u=null,c=!1;const d=new Set;if(be(e)&&!this._hasSizeRamp){const t=await se(e);o.infos.push({label:null,symbol:t})}else if(We(e)){let t=s;const i=Ge(e)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",l=a.findIndex((e=>\"color-ramp\"===e.type)),r=-1!==l?a.splice(l,1)[0]:null,n=a.findIndex((e=>\"size-ramp\"===e.type)),o=-1!==n?a.splice(n,1)[0]:null,u=[];r&&(t=r.title,u.push(r)),o&&(t=o.title,u.push(o)),u.length>0&&a.push({type:i,title:t,infos:u})}else if(Ie(e)){const t=G(e);a.push({type:\"heatmap-ramp\",title:s||this._getRendererTitle(e,l),infos:t,preview:A(t.map((e=>e.color)),{effectList:this.effectList,ariaLabel:await Qe(\"previewColorRampAriaLabel\")})})}else if(Ce(e)){const t=e.authoringInfo;if(t&&\"relationship\"===t.type){const{numClasses:s,field1:i,field2:r}=t,n=t.focus;if(s&&i&&r){const t=[i,r];let u=J(n)||0;for(const e of t){const{field:t,normalizationField:s,label:i}=e,r=i||{field:this._getFieldAlias(t,l),normField:s&&this._getFieldAlias(s,l)},n=Ke.clone();n.angle=u,o.infos.push({label:r,symbol:n}),d.add(n),u+=90}const c=Q({focus:n,numClasses:s,infos:e.uniqueValueInfos??[]});a.unshift(c)}}else if(Ne(this.layer)||qe(this.layer))e.uniqueValueInfos?.forEach((t=>{t.symbol&&this._checkClausesForUVR(e,t.value)&&o.infos.push({label:t.label||t.value,value:t.value,symbol:t.symbol})}));else{const{field:t,field2:i,field3:a,fieldDelimiter:u,valueExpression:d,defaultSymbol:y}=e,h=!(!t&&!d||!i&&!a),m=this._layerDisplayFilterClause?n?.title:null,p=[];if(e.uniqueValueGroups?.forEach((s=>{const n={type:\"symbol-table\",title:m||s.heading,infos:[]};s.classes?.forEach((s=>{const{symbol:o,values:c}=s;if(o){const y=[],m=[];for(const e of c??[]){const{value:s,value2:r,value3:n}=e,o=[],c=[];(t||d)&&(o.push(s),c.push(this._getDomainName(t,s,l))),i&&(o.push(r),c.push(this._getDomainName(i,r,l))),a&&(o.push(n),c.push(this._getDomainName(a,n,l))),y.push(h?o.join(u||\"\"):o[0]),m.push(c.join(\" - \"))}const p=y.join(\", \");let f=s.label;if(!f){const e=m.filter(Boolean);f=e.length?e.join(\", \"):p}const g=o.clone();\"cim\"===g.type&&r&&x(g,{innerDotSize:.5*ue,outerRingSize:ue}),y.some((t=>this._checkClausesForUVR(e,t)))&&n.infos.push({label:f,value:p,symbol:g})}})),n.infos.length&&p.push(n)})),p.length){const t=p[0];1===p.length&&\"title\"in t&&!t.title?o.infos.push(...t.infos??[]):(y&&(p.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:y}]}),c=!0),o.infos.push(...p)),s||e.legendOptions?.title||e.valueExpressionTitle||(o.title=null)}}e.defaultSymbol&&!c&&(o.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),c=!0)}else if(Ee(e)){if(!r){u=this._isUnclassedRenderer(e);if(!u||!this._hasSizeRamp){const t=e.classBreakInfos.filter((({symbol:e})=>e)),s=\"ascending-values\"===e.legendOptions?.order;for(const{label:e,minValue:i,maxValue:l,symbol:r}of t){const t={label:e||(u?null:`${i} - ${l}`),value:[i,l],symbol:r};s?o.infos.push(t):o.infos.unshift(t)}u&&(o.title=null),this._updateInfosForClassedSizeRenderer(e,o.infos)}e.defaultSymbol&&!u&&(o.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),c=!0)}}else if(we(e))if(qe(this.layer)||He(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);$e(t)?a.push(t):o.infos=t}else{const t=this.layer;let s,i;e.customStatistics?.length&&({min:s,max:i}=e.customStatistics[0]);let l=[],r=t.serviceRasterInfo;if(t.rasterFunction)try{r=await t.generateRasterInfo(t.rasterFunction)}catch{}const n=I(r.pixelType);if(1===r.bandCount){const l=t.bandIds?.[0]||0;s=null!=s?s:r.statistics?r.statistics[l].min:n[0],i=null!=i?i:r.statistics?r.statistics[l].max:n[1],s||i?a.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)s=null!=s?s:r.statistics?r.statistics[t.bandIds[0]].min:n[0],i=null!=i?i:r.statistics?r.statistics[t.bandIds[0]].max:n[1],s||i?a.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend();else if(r.bandCount>=3){const{bandInfos:e}=r,{bandIds:s}=t;e.length>=r.bandCount?3===s?.length?(l=s.map((t=>e[t].name)),o.infos=this._createSymbolTableElementMultiBand(l)):\"lerc\"===t.format?(l=[0,1,2].map((t=>e[t].name)),o.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():\"lerc\"===t.format?(l=[\"band1\",\"band2\",\"band3\"],o.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(_e(e))e.colormapInfos.forEach((e=>{o.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(ge,e.color)})}));else if(Le(e)){let s=e.symbol;switch(t.geometryType){case\"point\":s=\"pointSymbol\"in l?l.pointSymbol:null;break;case\"polyline\":s=\"lineSymbol\"in l?l.lineSymbol:null;break;case\"polygon\":s=\"polygonSymbol\"in l?l.polygonSymbol:null}const i=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&i&&o.infos.push({label:e.label,symbol:s})}else if(Se(e)){e.outputUnit&&(this.title=\"(\"+e.toJSON().outputUnit+\")\"),o.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach((e=>{o.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})})):o.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else ve(e)&&a.push(await this._getStretchLegendElements(e,{min:0,max:255}));const y=e.defaultSymbol;!y||c||Le(e)||u&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||a.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:y}]}),o.infos.length&&a.unshift(o);const h=null==t.opacity?this.opacity:t.opacity,m=this._isTallSymbol(\"visualVariables\"in e?e.visualVariables:null),p=Ne(this.layer)||qe(this.layer),f=a.reduce(((e,t)=>[...e,...this._getAllInfos(t)]),[]).filter((e=>!!e?.symbol)).filter((e=>{if(\"cim\"===e.symbol.type){const{minScale:t,maxScale:s}=e.symbol.data;if(t&&t<this.scale||s&&s>this.scale)return!1}return!0})).map((e=>this._getSymbolPreview(e,h,{isDefault:e.symbol===y,applyScaleDrivenSize:!d.has(e.symbol),symbolConfig:{isTall:m,isSquareFill:p},effectList:d.has(e.symbol)?null:this.effectList})));return e=null,await Promise.allSettled(f),a}_checkClausesForUVR(e,t){const s=Ze(e,t);return!s||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(s))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(s))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,s=t.symbolizer.rasterInfo??t.raster.rasterInfo;let i,l;const r=e?.customStatistics?.length?e.customStatistics:s?.statistics;if(r)({min:i,max:l}=r[0]);else{const e=I(s.pixelType);i=e[0],l=e[1]}if(t.hasStandardTime()&&(i=t.getStandardTimeValue(i),l=t.getStandardTimeValue(l)),1===s.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:i,max:l});const n=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map((e=>s.bandInfos[e].name));return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),this._createSymbolTableElementMultiBand(n)}async _getStretchLegendElements(e,t){const s=e.colorRamp,i=$(s,t);return{type:\"stretch-ramp\",title:\"\",infos:i,preview:A(i.map((e=>e.color)),{ariaLabel:await Qe(\"previewColorRampAriaLabel\")})}}_getClusterSymbol(){const e=this.layer,t=\"featureReduction\"in e&&e.featureReduction,s=t&&\"symbol\"in t&&t.renderer;return s&&!0!==s?.authoringInfo?.isAutoGenerated?null:t&&\"symbol\"in t?t.symbol:null}async _getSizeLegendElement(e,t,s,i){return{type:\"size-ramp\",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await Z(s,t,await ie(s),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],s=[\"red\",\"green\",\"blue\"];return e.forEach(((e,i)=>{t.push({label:{colorName:s[i],bandName:e},src:le[i],opacity:this.opacity??1})})),t}_updateInfosForClassedSizeRenderer(e,t){const s=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,i=e.classBreakInfos.some((e=>B(e.symbol)));if(s&&i){const s=K,i=X,l=e.classBreakInfos.length,r=(s-i)/(l>1?l-1:l);t.forEach(((e,t)=>{e.size=s-r*t}))}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let i=0;i<e.length&&(!t||!s);i++){const l=e[i];\"size\"===l.type&&(\"height\"===l.axis&&(t=!0),\"width-and-depth\"===l.axis&&(s=!0))}return t&&s}async _getSymbolPreview(e,t,s){let i=!s?.isDefault&&null==e.size&&this._hasSizeRamp?m(O.size):e.size;if(this._scaleDrivenSizeVariable&&s?.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");i=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}const l=!s?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!s?.applyScaleDrivenSize);return k(e.symbol,{size:i,opacity:t,scale:!1,symbolConfig:s?.symbolConfig,effectView:s?.effectList,style:\"legend\",cimOptions:{allowScalingUp:l,viewParams:this.isScaleDriven?{viewingMode:\"2d\"===this.view?.type?\"map\":this.view?.viewingMode,scale:this.view?.scale}:null},ariaLabel:e.label&&\"string\"!=typeof e.label?null:await Qe(\"previewTemplateAriaLabel\",e.label)}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}_getClusterRenderer(e){this._hasClusterSizeVariable=!1;const t=\"renderer\"in this.layer?this.layer.renderer:null,s=e.renderer?.clone()||t?.clone(),i=N(e,this.layerView,this.view);if(i&&null!=s&&\"visualVariables\"in s){const t=s.visualVariables?.some((e=>\"size\"===e.type&&\"outline\"!==e.target&&!me.test(e.valueExpression)));if(!t){if(\"clusterMinSize\"in e&&\"clusterMaxSize\"in e){const{clusterMinSize:t,clusterMaxSize:s}=e;i.legendOptions=new D({showLegend:t!==s})}const t=s.visualVariables||[];s.visualVariables=t.concat([i]),this._hasClusterSizeVariable=!0}}return s}async _loadRenderer(e){const t=[],s=e.clone(),i=await ie(s);if(Ee(s)||Ce(s)){const e=(s.classBreakInfos||s.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,i).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(s.symbol||s.defaultSymbol,s.defaultSymbol?null:i).then((e=>{this._applySymbolToRenderer(s,e,Le(s))})).catch((()=>{this._applySymbolToRenderer(s,null,Le(s))}))),await Promise.allSettled(t),s}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(\"web-style\"===e.type){const s=this._webStyleSymbolCache;try{const i=await(\"2d\"===this.view.type?e.fetchCIMSymbol({cache:s}):e.fetchSymbol({cache:s}));return this._getAppliedCloneSymbol(i,t)}catch{throw o.getLogger(this).warn(\"Fetching web-style failed!\"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const i=e.clone(),l=s&&s.toRgba();return i.type.includes(\"3d\")?this._applyColorTo3dSymbol(i,l):\"cim\"===i.type?j(i,s):i.color&&(i.color=new t(l||i.color)),i}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new t(s))}))}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||\"vector-field\"===e.type)return null;const s=e.visualVariables??[],i=[],l=[],n=[],a=te(e);if(2===a?.sizeStops?.length&&(Ee(e)||Ce(e))){const[e,t]=a.sizeStops;l.push(new V({field:a.field??void 0,normalizationField:a.normalizationField,minSize:e.size,maxSize:t.size,minDataValue:e.value,maxDataValue:t.value}))}for(const r of s)\"color\"===r.type?i.push(r):\"size\"===r.type?l.push(r):\"opacity\"===r.type&&n.push(r);const o=[...i,...l,...n];let u,c;if(0===i.length&&Ee(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];u=t&&t.symbol}if(0===i.length&&Le(e)&&(u=e.symbol),u)if(u.type.includes(\"3d\")){const e=u.symbolLayers.at(0);\"water\"===e.type?null!=e.color&&(c=e.color):null!=e.material?.color&&(c=e.material.color)}else u.url||(c=u.color);const d=this.effectList;return(await Promise.all(o.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const i=be(e)?s.field:this._getRampTitle(s,t);let l=null;const r=re(t,s,this.view.timeZone);if(\"color\"===s.type){const e=await W(s,null,r)??[];l={type:\"color-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:d,ariaLabel:await Qe(\"previewColorRampAriaLabel\")})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if(\"size\"===s.type&&\"outline\"!==s.target)me.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(l=await this._getSizeLegendElement(i,s,e,r),this._hasSizeRamp||(this._hasSizeRamp=!(null==l.infos||!l.infos.length)));else if(\"opacity\"===s.type){const e=await W(s,c,r)??[];l={type:\"opacity-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:d,ariaLabel:await Qe(\"previewColorRampAriaLabel\")})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return l?.infos?l:null}})))).filter(r)}_getDomainName(e,t,s){if(e&&\"function\"!=typeof e){const i=\"getField\"in s&&s.getField?.(e),l=i&&\"getFieldDomain\"in s&&s.getFieldDomain?s.getFieldDomain(i.name,{excludeImpliedDomains:has(\"esri-widget-legacy-field-domain-calculation\")}):null;return\"coded-value\"===l?.type?l.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,i=\"popupTemplate\"in e&&e.popupTemplate,l=i&&i.fieldInfos;if(l)for(const t of l)if(t.fieldName===s)return\"cluster_count\"===s?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let s=e.field,i=e.normalizationField,l=!1,r=!1,n=!1,a=null;s=\"function\"==typeof s?null:s,i=\"function\"==typeof i?null:i;const o=e.legendOptions?.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if(\"color\"===s.type){if(\"ratio\"===s.style){l=!0;break}if(\"percent\"===s.style){r=!0;break}if(\"percent-of-total\"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:i&&this._getFieldAlias(i,t),ratio:l,ratioPercent:r,ratioPercentTotal:n}}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions?.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let i=s.field,l=null,r=null;if(Ee(s)&&(l=s.normalizationField,r=\"percent-of-total\"===s.normalizationType),i=\"function\"==typeof i?null:i,l=\"function\"==typeof l?null:l,Ce(s)){const{field2:e,field3:l,fieldDelimiter:r}=s;let n=i&&this._getFieldAlias(i,t);return e&&(n=`<${n}>${r}<${this._getFieldAlias(e,t)}>`,l&&(n=`${n}${r}<${this._getFieldAlias(l,t)}>`)),n}let n=null;return(i||l)&&(n={field:i&&this._getFieldAlias(i,t),normField:l&&this._getFieldAlias(l,t),normByPct:r}),n}_getFieldAlias(e,t){const s=\"popupTemplate\"in t?t.popupTemplate:null,i=s?.fieldInfos;let l=i?.find((t=>e===t.fieldName)),r=null;\"getField\"in t&&t.getField?r=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(r=t.fieldsIndex.get(e));let n=null;const a=\"featureReduction\"in t&&t.featureReduction;a&&(l??=\"popupTemplate\"in a?a.popupTemplate?.fieldInfos?.find((t=>e?.toLowerCase()===t.fieldName?.toLowerCase())):void 0,\"fields\"in a&&a.fields&&(n=a.fields.find((t=>t.name?.toLowerCase()===e?.toLowerCase()))));const o=l||r||n;let u=null;return o&&(u=l?.label||r?.alias||n?.alias||\"name\"in o&&o.name||\"fieldName\"in o&&o.fieldName||null),u}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return Ee(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e([g()],Ye.prototype,\"children\",void 0),e([g({readOnly:!0})],Ye.prototype,\"effectList\",null),e([g()],Ye.prototype,\"layerView\",void 0),e([g()],Ye.prototype,\"layer\",void 0),e([g()],Ye.prototype,\"legendElements\",void 0),e([g({readOnly:!0})],Ye.prototype,\"opacity\",null),e([g()],Ye.prototype,\"parent\",void 0),e([g({readOnly:!0,dependsOn:[]})],Ye.prototype,\"ready\",null),e([g()],Ye.prototype,\"hideLayersNotInCurrentView\",void 0),e([g()],Ye.prototype,\"keepCacheOnDestroy\",void 0),e([g()],Ye.prototype,\"respectLayerDefinitionExpression\",void 0),e([g()],Ye.prototype,\"respectLayerVisibility\",void 0),e([g({readOnly:!0})],Ye.prototype,\"scale\",null),e([g()],Ye.prototype,\"sublayerIds\",void 0),e([g({readOnly:!0})],Ye.prototype,\"isScaleDriven\",null),e([g()],Ye.prototype,\"title\",void 0),e([g({readOnly:!0,dependsOn:[\"ready\"],value:0})],Ye.prototype,\"version\",null),e([g()],Ye.prototype,\"view\",void 0),Ye=e([b(\"esri.widgets.Legend.support.ActiveLayerInfo\")],Ye);const et=Ye;export{et as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{watch as t,initial as s,when as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{get as l}from\"../../core/accessorSupport/get.js\";import{getEffectiveFeatureReduction as y}from\"../../views/2d/layers/features/layerAdapters/featureReductionUtils.js\";import d from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as h}from\"../../intl/locale.js\";const c={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},L=r.ofType(d),p=new Set([\"esri.layers.BuildingSceneLayer\",\"esri.layers.CatalogLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.OrientedImageryLayer\",\"esri.layers.ParquetLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.SubtypeGroupLayer\",\"esri.layers.TileLayer\",\"esri.layers.VoxelLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\",\"esri.layers.LinkChartLayer\",\"esri.layers.catalog.CatalogFootprintLayer\",\"esri.layers.catalog.CatalogDynamicGroupLayer\",\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\",\"esri.layers.KnowledgeGraphLayer\"]),u=\"view.basemapView.baseLayerViews\",f=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",_=[u,f,\"view.layerViews\",v];let w=class extends i{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this.activeLayerInfos=new L,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(t((()=>this.view),(()=>this._viewHandles()),s),c.view),this.addHandles(h((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?\"ready\":\"disabled\"}_viewHandles(){this.removeHandles(c.state),this.view&&this.addHandles(t((()=>this.state),(()=>this._stateHandles()),s),c.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([c.allLayerViews,c.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i?.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on(\"change\",(e=>this._allLayerViewsChangeHandle(e))),c.allLayerViews),this.addHandles(t((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),c.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((i=>{if(!i.parent){const t=i.layer.parent,s=t&&\"uid\"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&e.includes(a)&&(r.push(i),i.parent=a,a.children.add(i),this._sortActiveLayerInfos(a.children))}})),e.removeMany(r);const t={};i.allLayerViews.forEach(((e,i)=>t[e.layer.uid]=i)),e.sort(((e,i)=>{const r=t[e.layer.uid]||0;return(t[i.layer.uid]||0)-r}))}_generateLayerViews(){const e=[];return _.filter(this._filterLayerViews,this).map((e=>l(this,e))).filter((e=>null!=e)).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===u||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!p.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(t((()=>[e.legendEnabled,e.layer?.legendEnabled]),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}_buildActiveLayerInfo(e){const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const t=void 0!==n?.title&&n.layer.uid===i.uid;o=new d({layer:i,layerView:e,title:t?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=o}const l=i.parent&&\"uid\"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[l?.uid],!this.hasHandles(r)){const n=[t((()=>i.title),(e=>this._titleHandle(e,o))),t((()=>[i.opacity,\"renderer\"in i&&i.renderer,\"pointSymbol\"in i&&i.pointSymbol,\"lineSymbol\"in i&&i.lineSymbol,\"polygonSymbol\"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(o))),a((()=>!0===this.view?.stationary),(()=>this._scaleHandle(o)),s),t((()=>e.layer?y(e.layer,e.view):null),(()=>this._constructLegendElements(o))),t((()=>e.updating),(()=>{if(null==e.layer)return;null!=y(e.layer,e.view)&&this._constructLegendElements(o)})),t((()=>\"effect\"in i&&i.effect),(()=>this._constructLegendElements(o))),a((()=>this.view?.timeZone),(()=>this._constructLegendElements(o)),s)];if(this.respectLayerVisibility){const r=t((()=>e.legendEnabled),(e=>this._legendEnabledHandle(e,o))),s=t((()=>i.legendEnabled),(e=>this._legendEnabledHandle(e,o)));n.push(r,s)}if(this.respectLayerDefinitionExpression&&\"definitionExpression\"in i){const e=t((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{o.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(o)}));n.push(e)}this.addHandles(n,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const i=e.parent;if(i)i.children.includes(e)||i.children.push(e),this._sortActiveLayerInfos(i.children);else{const i=this.layerInfos?.some((e=>e.layer.uid===r.uid)),t=r.parent;(t&&\"uid\"in t?this._layerViewByLayerId[t.uid]:null)&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&\"uid\"in r?this._layerViewByLayerId[r?.uid]:null,s=this._activeLayerInfosByLayerViewId[t?.uid];s&&(e.push(i),i.parent=s)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;\"featureCollections\"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):\"featureReduction\"in i&&i.featureReduction&&\"renderer\"in i.featureReduction&&(\"binning\"===i.featureReduction.type||\"cluster\"===i.featureReduction.type)&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):\"renderer\"in i&&i.renderer&&!(\"sublayers\"in i)?e.buildLegendElementsForRenderer(i.renderer):\"url\"in i&&i.url&&\"catalog\"!==i.type&&\"knowledge-graph\"!==i.type?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};e([n({type:L})],w.prototype,\"activeLayerInfos\",void 0),e([n()],w.prototype,\"basemapLegendVisible\",void 0),e([n()],w.prototype,\"groundLegendVisible\",void 0),e([n()],w.prototype,\"hideLayersNotInCurrentView\",void 0),e([n()],w.prototype,\"keepCacheOnDestroy\",void 0),e([n()],w.prototype,\"respectLayerDefinitionExpression\",void 0),e([n()],w.prototype,\"respectLayerVisibility\",void 0),e([n()],w.prototype,\"layerInfos\",void 0),e([n({readOnly:!0})],w.prototype,\"state\",null),e([n()],w.prototype,\"view\",void 0),w=e([o(\"esri.widgets.Legend.LegendViewModel\")],w);const I=w;export{I as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend--card\",a=\"esri-legend\",r={activated:`${e}__carousel-indicator--activated`,base:e,stacked:`${a}--stacked`,carouselTitle:`${e}__carousel-title`,indicator:`${e}__carousel-indicator`,intervalSeparator:`${e}__interval-separator`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageLabel:`${e}__image-label`,layerCaption:`${e}__layer-caption`,labelElement:`${e}__label-element`,layerRow:`${e}__layer-row`,labelCell:`${e}__label-cell`,message:`${e}__message`,rampLabel:`${e}__ramp-label`,section:`${e}__section`,relationshipSection:`${e}__relationship-section`,serviceCaptionText:`${e}__service-caption-text`,serviceContent:`${e}__service-content`,service:`${e}__service`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,symbol:`${e}__symbol`,sizeRampRow:`${e}__size-ramp-row`,symbolRow:`${e}__symbol-row`,symbolCell:`${e}__symbol-cell`,carousel:`${e}__carousel`,carouselItem:`${e}__carousel-item`,indicatorContainer:`${e}__carousel-indicator-container`,intervalSeparatorsContainer:`${e}__interval-separators-container`,relationshipLabelContainer:`${e}__relationship-label-container`,labelContainer:`${e}__label-container`,serviceCaptionContainer:`${e}__service-caption-container`,symbolContainer:`${e}__symbol-container`,colorRampContainer:`${e}__color-ramp-container`,sizeRampContainer:`${e}__size-ramp-container`,sizeRampPreview:`${e}__size-ramp-preview`,pieChartRampPreview:`${e}__pie-chart-ramp-preview`,rampContainer:`${a}__ramps`,sizeRampHorizontal:`${a}__size-ramp--horizontal`,rampLabelsContainer:`${a}__ramp-labels`,layerInfo:`${a}__layer-cell ${a}__layer-cell--info`,univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\"};export{r as css};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{stripHTML as e}from\"../../../core/string.js\";import{substitute as t}from\"../../../intl/substitute.js\";import{formatNumber as n}from\"../../../intl/number.js\";function r(e,t){return t}function i(e){const t=this;e.appendChild(t)}function o(n,i,o){if(!i)return;if(\"number\"==typeof i)return i;if(\"string\"==typeof i)return e(i);if(\"value\"in i||\"unit\"in i)return t(n.dotValue,i);if(\"colorName\"in i&&\"bandName\"in i)return n[i.colorName]+\": \"+(n[i.bandName]||i.bandName);if(\"showCount\"in i)return i.showCount?n.clusterCountTitle:void 0;let u=null;return r(i,o)?u=i.ratioPercentTotal?\"showRatioPercentTotal\":i.ratioPercent?\"showRatioPercent\":i.ratio?\"showRatio\":i.normField?\"showNormField\":i.field?\"showField\":null:l(i,o)&&(u=i.normField?\"showNormField\":i.normByPct?\"showNormPct\":i.field?\"showField\":null),u?t(\"showField\"===u?\"{field}\":n[u],{field:i.field,normField:i.normField}):void 0}function l(e,t){return!t}function u(e,t){return!!(t&&\"Stretched\"===t&&\"version\"in e&&\"number\"==typeof e.version&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}function a(e,t){return e.label?t[e.label]+\": \"+(\"string\"==typeof e.value?e.value:n(e.value??0,{style:\"decimal\",notation:e.value?.toString().toLowerCase().includes(\"e\")?\"scientific\":\"standard\"})):\"\"}export{i as attachToNode,a as getStretchStopLabel,o as getTitle,u as isImageryStretchedLegend,l as isRendererTitle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getStretchStopLabel as t,getTitle as e,isRendererTitle as r}from\"../../support/styleUtils.js\";function l(e,r,l){switch(r){case\"heatmap-ramp\":return l[e.label]||e.label;case\"stretch-ramp\":return t(e,l);default:return e.label}}function i(t,l){if(!t.title||\"string\"==typeof t.title)return t.title;const i=\"color-ramp\"===t.type||\"opacity-ramp\"===t.type,a=t.title,p=e(l,a,i);return r(a,i)&&a.title?`${a.title} (${p})`:p}export{i as getLegendElementTitle,l as getRampStopLabel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as s}from\"../../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as o}from\"../../../../symbols/support/utils.js\";import i from\"../../../Widget.js\";import{css as l}from\"./css.js\";import{getRampStopLabel as p}from\"../support/utils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const n=25,c=25,m=100;let d=class extends i{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return a(\"div\",{class:this.classes(l.layerRow,l.colorRampContainer)},this._renderRampLabel(e[0]),a(\"div\",{class:l.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,r=\"heatmap-ramp\"===this.legendElement.type,i=e.length-1,l=c,p=i>2&&!r?n*i:m,d=p+20,h=10,y=[[{shape:{type:\"path\",path:`M0 ${l/2} L${h} 0 L${h} ${l} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:h,y:0,width:p,height:l},fill:{type:\"linear\",x1:h,y1:0,x2:p+h,y2:0,colors:e.map(((e,t)=>({color:e.color,offset:r&&\"ratio\"in e?e.ratio:t/i})))},stroke:{width:0}},{shape:{type:\"path\",path:`M${p+h} 0 L${d} ${l/2} L${p+h} ${l} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],f=s(y,d,l),u={filter:o(this.effectList)??void 0,opacity:null==t?void 0:`${t}`};return a(\"div\",{styles:u},f)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?a(\"div\",{class:l.intervalSeparatorsContainer},a(\"div\",{class:l.intervalSeparator},\"|\"),this._renderRampLabel(t)):null}_renderRampLabel(e){return a(\"div\",{class:l.rampLabel},p(e,this.legendElement.type,this.messages))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([r(\"esri.widgets.Legend.styles.card.ColorRamp\")],d);const h=d;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{pt2px as t}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{attachToNode as n}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const l=\"#ddd\",c=window.devicePixelRatio;function p(e){if(!e)return;if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t.resource?.primitive;return\"circle\"===s||\"cross\"===s||\"kite\"===s||\"sphere\"===s||\"cube\"===s||\"diamond\"===s}const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}function d(e){if(e){if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t?.resource?.primitive;return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let m=class extends r{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,hasIndicators:t,opacity:s}=this,o=e.infos,{label:r,...l}=o.at(0),{label:c,...p}=o.at(-1);let d=l.preview,m=p.preview;const y={\"flex-direction\":t?\"column\":\"row-reverse\"};d&&(d=d.cloneNode(!0),d.style.display=\"flex\"),m&&(m=m.cloneNode(!0),m.style.display=\"flex\");const u={opacity:null!=s?`${s}`:\"\"};return a(\"div\",{class:this.classes(i.layerRow,{[i.sizeRampRow]:t})},a(\"div\",{class:i.rampLabel},t?r:c),a(\"div\",{class:i.sizeRampContainer,styles:y},a(\"div\",{afterCreate:n,bind:d,class:i.sizeRampPreview,styles:u}),this._renderSizeRampLines(e),a(\"div\",{afterCreate:n,bind:m,class:i.sizeRampContainer,styles:u})),a(\"div\",{class:i.rampLabel},t?c:r))}_renderSizeRampLines(e){const s=e.infos,o=s[0],r=s.at(-1),i=o.symbol,m=this.hasIndicators,y=t(o.size+o.outlineSize)*c,u=t(r.size+r.outlineSize)*c,f=m?y:y+50*c,h=m?y/2+50*c:y,g=d(i),v=p(i),b=document.createElement(\"canvas\");b.width=f,b.height=h,b.style.width=b.width/c+\"px\",b.style.height=b.height/c+\"px\";const x=b.getContext(\"2d\");if(m){x.beginPath();const e=0,t=0,s=f/2-u/2,o=h;x.moveTo(e,t),x.lineTo(s,o);const r=f,i=0,n=f/2+u/2,a=h;x.moveTo(r,i),x.lineTo(n,a)}else{x.beginPath();const e=0,t=h/2-u/2,s=f,o=0;x.moveTo(e,t),x.lineTo(s,o);const r=0,i=h/2+u/2,n=f,a=h;x.moveTo(r,i),x.lineTo(n,a)}return x.strokeStyle=l,x.stroke(),a(\"div\",{afterCreate:n,bind:b,styles:m?{display:\"flex\",marginTop:`-${g?0:v?y/2:0}px`,marginBottom:`-${g?u:v?u/2:0}px`}:{display:\"flex\",marginRight:`-${g?0:v?y/2:0}px`,marginLeft:`-${g?0:v?u/2:0}px`}})}};e([s()],m.prototype,\"hasIndicators\",void 0),e([s()],m.prototype,\"legendElement\",void 0),e([s()],m.prototype,\"messages\",void 0),e([s()],m.prototype,\"opacity\",void 0),m=e([o(\"esri.widgets.Legend.styles.card.SizeRamp\")],m);const y=m;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{renderColorRampPreviewHTML as i}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as o}from\"../../../support/jsxFactory.js\";const l=t(),n=10,r=20,s=10,a=20,c={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function f(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?o(\"svg\",{height:\"4\",width:\"10\"},o(\"line\",{style:t,x1:\"0\",x2:\"10\",y1:\"2\",y2:\"2\"})):o(\"svg\",{height:\"10\",width:\"10\"},o(\"line\",{style:t,x1:\"5\",x2:\"5\",y1:\"0\",y2:\"10\"}))}function p(e,t=\"vertical\"){const i=document.createElement(\"div\");return i.style.height=`${r}px`,i.className=c.univariateAboveAndBelowSymbol,null!=e&&(i.style.opacity=e.toString()),l.append(i,f.bind(null,t)),i}function m(t,i,o=\"vertical\",l){t.infos.forEach(((t,n)=>{if(l&&2===n)t.preview=p(i,o);else{const i=e(t.size)+(\"horizontal\"===o?a:s),l=t.preview,n=\"div\"===l?.tagName.toLowerCase(),r=n?l:document.createElement(\"div\");r.className=c.univariateAboveAndBelowSymbol,\"horizontal\"===o?r.style.width=`${i}px`:r.style.height=`${i}px`,!n&&l&&r.appendChild(l),t.preview=r}}))}function u(t,i=\"classic\"){const o=t.infos;return\"classic\"===i?(e(o[0].size)+s)/2:(e(o[0].size)-e(o[o.length-1].size))/2}function h(e,t){if(!e)return null;const o=e.infos.map((e=>e.color)),l=i(\"full\"===t.type?o:\"above\"===t.type?o.slice(0,3):o.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return l.className=c.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function v(t,i,o,l=\"vertical\"){let c=0;const f=t.infos,p=Math.floor(f.length/2),m=\"full\"===i||\"above\"===i?0:p,u=\"full\"===i||\"below\"===i?f.length-1:p;for(let h=m;h<=u;h++)if(o&&h===p)c+=\"horizontal\"===l?n:r;else{c+=e(f[h].size)+(\"horizontal\"===l?a:s)}return Math.round(c)}function d(t,i,o,l=\"vertical\"){const c=v(t,i,o,l),f=t.infos,p=Math.floor(f.length/2),m=\"full\"===i||\"above\"===i?0:p,u=\"full\"===i||\"below\"===i?f.length-1:p,h=\"full\"===i?f[m].size+f[u].size:\"above\"===i?f[m].size:f[u].size,d=o?\"vertical\"===l?r:n:0,y=\"vertical\"===l?s*(\"full\"===i?2:1):a*(\"full\"===i?2:1);return Math.round(c-(e(h)/2+d/2+y/2))}function y(e,t,i=\"vertical\"){const o=e.infos;let l=o.find((({type:e})=>\"size-ramp\"===e)),n=o.find((({type:e})=>\"color-ramp\"===e));return l&&(l={...l},l.infos=[...l.infos],m(l,t,i,!0)),n&&(n={...n},n.infos=[...n.infos]),\"horizontal\"===i&&(l?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:l,colorRampElement:n}}function b(e,t=\"vertical\"){const i=e.infos;let o=i.find((({type:e})=>\"size-ramp\"===e)),l=i.find((({type:e})=>\"color-ramp\"===e));return o&&(o={...o},o.infos=[...o.infos],m(o,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),\"horizontal\"===t&&(o?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:o,colorRampElement:l}}const g={marginLeft:\"3px\"},z={display:\"table-cell\",verticalAlign:\"middle\"},w={display:\"flex\",alignItems:\"flex-start\"};export{y as getUnivariateAboveAndBelowRampElements,u as getUnivariateColorRampMargin,h as getUnivariateColorRampPreview,d as getUnivariateColorRampSize,b as getUnivariateColorSizeRampElements,v as getUnivariateSizeRampSize,g as univariateColorRampContainerStyles,z as univariateColorRampStyles,w as univariateRampContainerStyles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateSizeRampSize as a,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";let f=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:f,colorRampElement:y}=r(e,t,\"horizontal\");if(!f)return null;const h=a(f,\"full\",!0,\"horizontal\"),u=l(f,\"above\",!0,\"horizontal\"),v=l(f,\"below\",!0,\"horizontal\"),g=12,b=this.messages?.previewColorRampAriaLabel,w=p(y,{width:u,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"above\",effectList:o,ariaLabel:b}),j=p(y,{width:v,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"below\",effectList:o,ariaLabel:b}),x=n(f,\"card\"),L=f.infos.map((e=>e.label)),z=L.length-1,C=L.map(((e,t)=>0===t||t===z?d(\"div\",{key:t},e):null)),R={display:\"flex\",flexDirection:\"column\"},A={display:\"flex\",flexDirection:\"row\"},k={marginTop:\"3px\",display:\"flex\"};m(this.container)?k.marginRight=`${x}px`:k.marginLeft=`${x}px`;const E={width:`${h}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return d(\"div\",{class:i.layerRow,key:`${s}-container`,styles:R},d(\"div\",{class:this.classes(i.symbolContainer,i.sizeRampHorizontal),styles:A},f.infos.map(((e,t)=>d(\"div\",{afterCreate:c,bind:e.preview,class:i.symbol,key:t})))),w?d(\"div\",{class:i.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:k},d(\"div\",{afterCreate:c,bind:w}),d(\"div\",{afterCreate:c,bind:j})):null,d(\"div\",{class:i.layerInfo},d(\"div\",{class:i.rampLabelsContainer,styles:E},C)))}};e([t()],f.prototype,\"effectList\",void 0),e([t()],f.prototype,\"legendElement\",void 0),e([t()],f.prototype,\"messages\",void 0),e([t()],f.prototype,\"opacity\",void 0),f=e([o(\"esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp\")],f);const y=f;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as r}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateSizeRampSize as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as f}from\"../../../support/jsxFactory.js\";let d=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:d,colorRampElement:y}=i(e,\"horizontal\");if(!d)return null;const u=l(d,\"full\",!1,\"horizontal\"),h=a(d,\"full\",!1,\"horizontal\"),v=p(y,{width:h,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\",effectList:o,ariaLabel:this.messages?.previewColorRampAriaLabel}),g=n(d,\"card\"),j=d.infos.length-1,x=d.infos.map(((e,t)=>0===t||t===j?f(\"div\",{key:t},e.label):null)),b={display:\"flex\",flexDirection:\"column\"},w={display:\"flex\",flexDirection:\"row\"},L={marginTop:\"3px\",display:\"flex\"};m(this.container)?L.marginRight=`${g}px`:L.marginLeft=`${g}px`;const C={width:`${u}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return f(\"div\",{class:r.layerRow,key:`${s}-container`,styles:b},f(\"div\",{class:this.classes(r.symbolContainer,r.sizeRampHorizontal),styles:w},d.infos.map(((e,t)=>f(\"div\",{afterCreate:c,bind:e.preview,class:r.symbol,key:t})))),f(\"div\",{class:r.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:L},f(\"div\",{afterCreate:c,bind:v})),f(\"div\",{class:r.layerInfo},f(\"div\",{class:r.rampLabelsContainer,styles:C},x)))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([o(\"esri.widgets.Legend.styles.card.UnivariateColorSizeRamp\")],d);const y=d;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../Color.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getCSSFilterFromEffectList as r}from\"../../../../symbols/support/utils.js\";import a from\"../../../Widget.js\";import o from\"./ColorRamp.js\";import{css as l}from\"./css.js\";import n from\"./SizeRamp.js\";import c from\"./UnivariateAboveAndBelowRamp.js\";import p from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as h}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as m}from\"../support/utils.js\";import{attachToNode as d,isImageryStretchedLegend as y,getTitle as g}from\"../../support/styleUtils.js\";import{Heading as f,incrementHeadingLevel as u}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";var b;let L=b=class extends a{constructor(e,s){super(e,s),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=m(this.legendElement,this.messages),t=this.hasIndicators&&!this.isChild?v(\"div\",null,v(f,{class:l.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),v(f,{class:l.layerCaption,level:u(this.headingLevel)},s)):s?v(f,{class:l.layerCaption,level:this.headingLevel},s):null;return v(\"section\",{\"aria-labelledby\":this.key,class:l.section,id:`${this.key}-panel`,key:this.key,role:\"tabpanel\",tabIndex:0},t,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return v(n,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return v(o,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return h(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return v(\"div\",{afterCreate:d,bind:this.legendElement.preview,class:l.pieChartRampPreview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return v(c,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return v(p,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);if(!s.length)return null;const t=this.activeLayerInfo.legendElements.some((({type:e})=>\"relationship-ramp\"===e)),i=s[0]?.properties?.classes?.[l.symbolRow],r={[l.labelContainer]:!i&&!t,[l.relationshipLabelContainer]:t};return v(\"div\",{class:this.classes(r)},s)}_renderElementInfo(e,s){const{layer:t}=this,i=\"label\"in e?e.label:null,r=`${this.key}-${i}`;if(\"type\"in e&&e.type)return v(b,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:r,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const a=y(t,s),o=g(this.messages,i,!1)||\"\";if(\"src\"in e&&e.src)return v(\"div\",{class:l.layerRow,key:`${r}-row`},this._renderImage(e,t,a),v(\"div\",{class:l.imageLabel},o));if(\"symbol\"in e&&e.preview){if(!e.symbol?.type.includes(\"simple-fill\")){if(!e.label)return v(\"div\",{afterCreate:d,bind:e.preview,key:`${r}-row`});const s={[l.symbolCell]:this.hasIndicators};return v(\"div\",{class:this.classes(l.layerRow,{[l.symbolRow]:this.hasIndicators}),key:`${r}-row`},v(\"div\",{afterCreate:d,bind:e.preview,class:this.classes(s)}),v(\"div\",{class:this.classes(l.imageLabel,{[l.labelCell]:this.hasIndicators})},o))}return v(\"div\",{class:l.layerRow,key:`${r}-row`},v(\"div\",{class:l.labelElement,styles:this._getBackgroundStyles(e)},o))}return null}_getBackgroundStyles(e){const t=e.symbol,i=t.color,a=!!i?.a,o=\"outline\"in t?t.outline:null,l=!!o?.color?.a,n=new s(a&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),c=l&&o.color?new s([o.color.r,o.color.g,o.color.b,o.color.a*this.layer.opacity]):new s([255,255,255,0]),p=e.symbol.color?.isBright??!0,h=p?\"black\":\"white\",m=p?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\";return{background:a?n.toCss(!0):\"none\",color:h,textShadow:`-1px -1px 0 ${m},\\n                  1px -1px 0 ${m},\\n                  -1px 1px 0 ${m},\\n                  1px 1px 0 ${m}`,border:l?`1px solid ${c.toCss(!0)}`:\"none\",filter:r(this.effectList)??void 0}}_renderImage(e,s,t){const{label:i,src:r,opacity:a}=e,o={[l.imageryLayerStretchedImage]:t,[l.symbol]:!t},n={opacity:`${a??s.opacity}`},c=g(this.messages,i,!1);return v(\"img\",{alt:c,\"aria-label\":c,border:0,class:this.classes(o),height:e.height,src:r,styles:n,width:e.width})}};e([t()],L.prototype,\"activeLayerInfo\",void 0),e([t()],L.prototype,\"effectList\",void 0),e([t()],L.prototype,\"hasIndicators\",void 0),e([t()],L.prototype,\"headingLevel\",void 0),e([t()],L.prototype,\"isChild\",void 0),e([t()],L.prototype,\"layer\",void 0),e([t()],L.prototype,\"legendElement\",void 0),e([t()],L.prototype,\"messages\",void 0),L=b=e([i(\"esri.widgets.Legend.styles.card.LegendElement\")],L);const w=L;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../intl.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import i from\"./LegendElement.js\";import{loadCalciteComponents as n}from\"../../../support/componentsUtils.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as a}from\"../../../support/decorators/messageBundle.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";import{substitute as c}from\"../../../../intl/substitute.js\";const d=768;let p=class extends r{constructor(e,s){super(e,s),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout=\"stack\",this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}loadDependencies(){return n({carousel:()=>import(\"@esri/calcite-components/dist/components/calcite-carousel\"),\"carousel-item\":()=>import(\"@esri/calcite-components/dist/components/calcite-carousel-item\")})}render(){this._hasIndicators=\"auto\"===this.layout&&this.view&&this.view.container.clientWidth<=d||\"stack\"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),s={[o.stacked]:this._hasIndicators};return l(\"div\",{class:this.classes(o.base,s)},e||l(\"div\",{class:o.message},this.messages.noLegend))}_renderCarousel(){const e=[],s=this.activeLayerInfos;if(s)for(const t of s)this._renderSections(t,e);return e?.length?l(\"calcite-carousel\",{class:o.carousel,label:this.messages.carousel},e.map(((s,t)=>l(\"calcite-carousel-item\",{class:o.carouselItem,key:t,label:c(this.messagesCommon.pagination.pageText,{index:t+1,total:e.length})},s)))):null}_renderLayers(){const e=this.activeLayerInfos,s=e?.toArray()?.map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?s:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const s=e.children.toArray().map(this._renderLegendForLayer,this);return l(\"section\",{class:this.classes(o.service,o.groupLayer),key:e.layer.uid},l(\"div\",{class:o.serviceCaptionContainer},e.title),s)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const s=e.legendElements?.filter(Boolean);if(!s?.length)return null;const t=s.map((s=>l(i,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),r={[o.groupLayerChild]:!!e.parent};return l(\"section\",{class:this.classes(o.service,r),key:e.layer.uid},l(\"div\",{class:o.serviceCaptionContainer},l(\"div\",{class:o.serviceCaptionText},e.title)),l(\"div\",{class:o.serviceContent},t))}_renderSections(e,s){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,s);const t=e.legendElements;if(t?.length)for(const r of t){const t=l(i,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${r.type}`,layer:e.layer,legendElement:r,messages:this.messages});t&&s.push(t)}}};e([s()],p.prototype,\"activeLayerInfos\",void 0),e([s()],p.prototype,\"headingLevel\",void 0),e([s()],p.prototype,\"layout\",void 0),e([s(),a(\"esri/widgets/Legend/t9n/Legend\")],p.prototype,\"messages\",void 0),e([s(),a(\"esri/t9n/common\")],p.prototype,\"messagesCommon\",void 0),e([s({readOnly:!0})],p.prototype,\"type\",void 0),e([s()],p.prototype,\"view\",void 0),p=e([t(\"esri.widgets.Legend.styles.card.CardView\")],p);const h=p;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend\",a={service:`${e}__service`,label:`${e}__service-label`,layer:`${e}__layer`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,layerTable:`${e}__layer-table`,layerTableSizeRamp:`${e}__layer-table--size-ramp`,layerChildTable:`${e}__layer-child-table`,layerCaption:`${e}__layer-caption`,layerBody:`${e}__layer-body`,layerRow:`${e}__layer-row`,layerCell:`${e}__layer-cell`,layerInfo:`${e}__layer-cell ${e}__layer-cell--info`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${e}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${e}__imagery-layer-info--stretched`,symbolContainer:`${e}__layer-cell ${e}__layer-cell--symbols`,symbol:`${e}__symbol`,rampContainer:`${e}__ramps`,sizeRamp:`${e}__size-ramp`,colorRamp:`${e}__color-ramp`,opacityRamp:`${e}__opacity-ramp`,borderlessRamp:`${e}__borderless-ramp`,rampTick:`${e}__ramp-tick`,rampFirstTick:`${e}__ramp-tick-first`,rampLastTick:`${e}__ramp-tick-last`,rampLabelsContainer:`${e}__ramp-labels`,rampLabel:`${e}__ramp-label`,message:`${e}__message`,univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\"};export{a as css,e as legend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getRampStopLabel as i}from\"../support/utils.js\";import{attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";const a=24;let n=class extends r{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=\"opacity-ramp\"===this.legendElement.type?o.opacityRamp:\"\";return e.className=`${o.colorRamp} ${t}`,null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const s={width:`${a}px`},r={height:t.style.height};return l(\"div\",{class:o.layerRow,key:`${this.key}-row`},l(\"div\",{class:o.symbolContainer,styles:s},l(\"div\",{afterCreate:p,bind:t,class:o.rampContainer})),l(\"div\",{class:o.layerInfo},l(\"div\",{class:o.rampLabelsContainer,styles:r},e.infos.map(((t,s)=>this._renderRampLabel(t,s,e.type))))))}_renderRampLabel(e,t,s){return l(\"div\",{class:e.label?o.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},i(e,s,this.messages))}};e([t()],n.prototype,\"_preview\",null),e([t()],n.prototype,\"legendElement\",void 0),e([t()],n.prototype,\"messages\",void 0),e([t()],n.prototype,\"opacity\",void 0),n=e([s(\"esri.widgets.Legend.styles.classic.ColorRamp\")],n);const c=n;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../Widget.js\";import{css as t}from\"./css.js\";import{getTitle as i,attachToNode as l}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";let a=class extends o{constructor(s,e){super(s,e),this.legendElement=null}render(){const s=this.legendElement.infos.map((s=>this._renderRow(s))).filter(Boolean);return s.length?p(\"div\",{class:t.layerBody},s):null}_renderRow(s){return s.preview?p(\"div\",{class:t.layerRow,key:`${this.key}-${s.label}-row`},p(\"div\",{class:this.classes(t.symbolContainer,t.sizeRamp)},p(\"div\",{afterCreate:l,bind:s.preview,class:t.symbol})),p(\"div\",{class:t.layerInfo},i(this.messages,s.label,!1)||\"\")):null}};s([e()],a.prototype,\"legendElement\",void 0),s([e()],a.prototype,\"messages\",void 0),a=s([r(\"esri.widgets.Legend.styles.classic.SizeRamp\")],a);const m=a;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as a,getUnivariateColorRampMargin as p,univariateColorRampContainerStyles as n,univariateColorRampStyles as c,univariateRampContainerStyles as m}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";let y=class extends i{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:i}=this,{sizeRampElement:y,colorRampElement:b}=r(e,s);if(!y)return null;const f=this.messages.previewColorRampAriaLabel,u=l(y,\"above\",!0),g=l(y,\"below\",!0),h=12,L=a(b,{width:h,height:u,rampAlignment:\"vertical\",opacity:s,type:\"above\",effectList:t,ariaLabel:f}),w=a(b,{width:h,height:g,rampAlignment:\"vertical\",opacity:s,type:\"below\",effectList:t,ariaLabel:f}),j=p(y),A=y.infos.map((e=>e.label)),$=A.map(((e,s)=>{const t=2===s;return 0===s?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-above-label-${e??s}`},e):t?v(\"div\",null):null})),C=A.length-1,R=Math.floor(A.length/2),k=A.map(((e,s)=>s===R||s===C?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-below-label-${e??s}`},e):null)),x={display:\"table-cell\",verticalAlign:\"middle\"},E={marginTop:`${j}px`},B={height:`${u}px`},U={height:`${g}px`};return v(\"div\",{key:`${i}-container`,styles:m},v(\"div\",{class:o.layerBody},y.infos.map(((e,s)=>v(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${i}-row-${s}`},v(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:x}),L||s%2!=0?null:v(\"div\",{class:o.layerInfo},A[s]))))),L?v(\"div\",{styles:E},v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:L,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:B},$))),v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:w,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:U},k)))):null)}};e([s()],y.prototype,\"effectList\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([t(\"esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp\")],y);const b=y;export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../Widget.js\";import{css as r}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateColorRampMargin as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,univariateColorRampContainerStyles as c,univariateColorRampStyles as m,univariateRampContainerStyles as n}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";let f=class extends o{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:o}=this,{sizeRampElement:f,colorRampElement:v}=i(e);if(!f)return null;const u=l(f),g=12,b=a(f,\"full\",!1),h=p(v,{width:g,height:b,rampAlignment:\"vertical\",opacity:s,type:\"full\",effectList:t,ariaLabel:this.messages?.previewColorRampAriaLabel}),j=f.infos.length-1,L=f.infos.map(((e,s)=>0===s||s===j?y(\"div\",{class:e.label?v?r.univariateAboveAndBelowLabel:r.rampLabel:void 0,key:`${o}-color-ramp-label-${e.label??s}`},e.label):null)),w={display:\"table-cell\",verticalAlign:\"middle\"},C={marginTop:`${u}px`},R={height:`${b}px`};return y(\"div\",{key:`${o}-container`,styles:n},y(\"div\",{class:r.layerBody},f.infos.map(((e,s)=>y(\"div\",{class:this.classes(r.layerRow,r.sizeRamp),key:`${o}-row-${s}`},y(\"div\",{afterCreate:d,bind:e.preview,class:r.symbol,styles:w}))))),y(\"div\",{styles:C},y(\"div\",{styles:c},y(\"div\",{styles:m},y(\"div\",{afterCreate:d,bind:h,class:r.rampContainer})),y(\"div\",{styles:m},y(\"div\",{class:r.rampLabelsContainer,styles:R},L)))))}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),e([s()],f.prototype,\"opacity\",void 0),f=e([t(\"esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp\")],f);const v=f;export{v as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import i from\"./ColorRamp.js\";import{css as a}from\"./css.js\";import l from\"./SizeRamp.js\";import o from\"./UnivariateAboveAndBelowRamp.js\";import n from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as m}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as p}from\"../support/utils.js\";import{attachToNode as c,isImageryStretchedLegend as h,getTitle as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";var g;let f=g=class extends r{constructor(e,s){super(e,s),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=p(this.legendElement,this.messages),t=this.isChild?a.layerChildTable:a.layerTable,r=s?y(\"div\",{class:a.layerCaption},s):null,i={[a.layerTableSizeRamp]:\"size-ramp\"===this.legendElement.type||!this.isChild};return y(\"section\",{class:this.classes(t,i),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return y(l,{key:this.key,legendElement:this.legendElement,messages:this.messages});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return y(i,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return m(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return y(\"div\",{afterCreate:c,bind:this.legendElement.preview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return y(o,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return y(n,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);return s.length?y(\"div\",{class:a.layerBody},s):null}_renderElementInfo(e,s){const{layer:t}=this,r=\"label\"in e?e.label:null,i=`${this.key}-${r}`;if(\"type\"in e&&e.type)return y(g,{effectList:this.effectList,isChild:!0,key:i,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const l=h(t,s),o={[a.imageryLayerInfoStretched]:l},n={[a.imageryLayerInfoStretched]:l};return y(\"div\",{class:a.layerRow,key:`${i}-row`},y(\"div\",{class:this.classes(a.symbolContainer,n)},this._renderPreview(e,l)),y(\"div\",{class:this.classes(a.layerInfo,o)},d(this.messages,r,!1)||\"\"))}_renderPreview(e,s){const{layer:t}=this;return\"preview\"in e&&e.preview?y(\"div\",{afterCreate:c,bind:e.preview,class:a.symbol}):\"src\"in e&&e.src?this._renderImage(e,t,s):null}_renderImage(e,s,t){const{label:r,src:i,opacity:l}=e,o={[a.imageryLayerStretchedImage]:t,[a.symbol]:!t},n={opacity:`${l??s.opacity}`},m=d(this.messages,r,!1);return y(\"img\",{alt:m,\"aria-label\":m,border:0,class:this.classes(o),height:e.height,src:i,styles:n,width:e.width})}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"isChild\",void 0),e([s()],f.prototype,\"layer\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),f=g=e([t(\"esri.widgets.Legend.styles.classic.LegendElement\")],f);const u=f;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../Widget.js\";import{css as o,legend as i}from\"./css.js\";import n from\"./LegendElement.js\";import{globalCss as l}from\"../../../support/globalCss.js\";import{Heading as a}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as c}from\"../../../support/decorators/messageBundle.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";const d=`${i}__`;let m=class extends t{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,s=e?.toArray().map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?p(\"section\",null,s):p(\"div\",{class:o.message,key:\"no-legend\"},this.messages.noLegend)}_renderLegendForLayer(e,s){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,t=`${d}${s?`${s}-`:\"\"}${r}`,i=e.title?a({level:this.headingLevel,class:this.classes(l.heading,o.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map((e=>this._renderLegendForLayer(e,r)));return p(\"section\",{class:this.classes(o.service,o.groupLayer),key:t},i,s)}return this._renderLegendElementsForLayer(e,i,t)}_renderLegendElementsForLayer(e,s,r){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const i=t.map((s=>p(n,{effectList:e.effectList,isChild:!1,key:`${r}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),l={[o.groupLayerChild]:!!e.parent};return p(\"section\",{class:this.classes(o.service,l),key:r},s,p(\"div\",{class:o.layer},i))}};e([s()],m.prototype,\"activeLayerInfos\",void 0),e([s()],m.prototype,\"headingLevel\",void 0),e([s(),c(\"esri/widgets/Legend/t9n/Legend\")],m.prototype,\"messages\",void 0),e([s({readOnly:!0})],m.prototype,\"type\",void 0),m=e([r(\"esri.widgets.Legend.styles.classic.ClassicView\")],m);const g=m;export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{on as t,watch as s,initial as i}from\"../core/reactiveUtils.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{cast as o}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import a from\"./Widget.js\";import l from\"./Legend/LegendViewModel.js\";import d from\"./Legend/styles/card/CardView.js\";import p from\"./Legend/styles/classic/ClassicView.js\";import{globalCss as c}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as y}from\"./support/decorators/messageBundle.js\";import{tsx as h}from\"./support/jsxFactory.js\";const v={base:\"esri-legend\"};let g=class extends a{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.style=new p,this.viewModel=new l}initialize(){this.addHandles([t((()=>this.view),\"resize\",(()=>this.scheduleRender())),t((()=>this.activeLayerInfos),\"change\",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),s((()=>this.headingLevel),(e=>{const{style:t}=this;t&&(t.headingLevel=e)})),s((()=>this.style),((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)}),i)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return\"legend\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}castStyle(e){if(e instanceof d||e instanceof p)return e;if(\"string\"==typeof e)return\"card\"===e?new d:new p;if(e&&\"string\"==typeof e.type){const t={...e};return delete t.type,\"card\"===e.type?new d(t):new p(t)}return new p}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return h(\"div\",{class:this.classes(v.base,c.widget,this.style instanceof p?c.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const r=s((()=>e.version),(()=>this.scheduleRender()));this.addHandles(r,`version_${e.layer.uid}`);const o=t((()=>e.children),\"change\",(()=>e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))),i);this.addHandles(o,`version_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};e([r()],g.prototype,\"activeLayerInfos\",null),e([r()],g.prototype,\"basemapLegendVisible\",null),e([r()],g.prototype,\"groundLegendVisible\",null),e([r()],g.prototype,\"headingLevel\",void 0),e([r()],g.prototype,\"hideLayersNotInCurrentView\",null),e([r()],g.prototype,\"keepCacheOnDestroy\",null),e([r()],g.prototype,\"respectLayerDefinitionExpression\",null),e([r()],g.prototype,\"respectLayerVisibility\",null),e([r()],g.prototype,\"icon\",null),e([r()],g.prototype,\"label\",null),e([r()],g.prototype,\"layerInfos\",null),e([r(),y(\"esri/widgets/Legend/t9n/Legend\")],g.prototype,\"messages\",void 0),e([r()],g.prototype,\"style\",void 0),e([o(\"style\")],g.prototype,\"castStyle\",null),e([r()],g.prototype,\"view\",null),e([r()],g.prototype,\"viewModel\",void 0),g=e([n(\"esri.widgets.Legend\")],g);const u=g;export{u as default};\n"],"names":["b","u","c","f","p","k","a","l","t","s","o","T","i","n","m","d","h","_","q","$","L","g","C","v","w","y","x","e","r","R","E","M","S","j","B","H","U","W","X","z","V","I","D","P","O","A","ue","ce","de","ye","he","me","pe","fe","ge","be","Se","_e","we","ve","Le","Ee","Ce","Ie","Fe","Ve","De","xe","Re","ze","Te","je","Oe","Pe","Ae","Me","Ue","ke","Be","Ne","qe","He","$e","We","Ge","Je","Qe","ae","oe","Ze","Ke","Xe","Ye","F","Y","ee","ne","te","se","G","J","Q","Z","ie","le","K","N","re","has","et"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]}