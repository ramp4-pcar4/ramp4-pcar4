{"version":3,"file":"Graphics3DSymbolLayerFactory-BDfabyla.js","sources":["../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ToneMapping.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js","../../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/polygon.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer.js","../../node_modules/@arcgis/core/chunks/FocusAreaColor.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/focusArea/FocusAreaColorTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/focusArea/FocusAreaColorNode.js","../../node_modules/@arcgis/core/chunks/FocusAreaMask.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/focusArea/FocusAreaMaskTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/effects/focusArea/FocusAreaMaskNode.js","../../node_modules/@arcgis/core/views/FocusAreas.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/LabelParameters.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderParameters.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureAtlas.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js","../../node_modules/@arcgis/core/chunks/LineMarker.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/LineMarkerMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DIconSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/meshAutoFastUpdateConstants.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshObject3DGraphicLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/MeshFastUpdateProcessor.js","../../node_modules/@arcgis/core/chunks/NativeLine.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/NativeLineMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshFillSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLodInstanceGraphicLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/lodResourceUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/webStyleUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Path.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathBuilder.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathCapBuilder.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathExtruder.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometry.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometryData.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/pathGeometryUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathProfile.js","../../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2.js","../../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2f64.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathVertex.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PathVertexPosition.glsl.js","../../node_modules/@arcgis/core/chunks/Path.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/layers/support/uvUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PatternStyle.js","../../node_modules/@arcgis/core/chunks/Pattern.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PatternTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PatternTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PatternMaterial.js","../../node_modules/@arcgis/core/views/3d/layers/support/patternUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPolygonFillSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureFactory.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DTextSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js","../../node_modules/@arcgis/core/chunks/WaterSurface.glsl.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechniqueConfiguration.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/waterMaterialUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWaterSymbolLayer.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolLayerFactory.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/glsl.js\";function o(o){o.fragment.code.add(t`float normals2FoamIntensity(vec3 n, float waveStrength){\nfloat normalizationFactor =  max(0.015, waveStrength);\nreturn max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);\n}`)}function n(o){o.fragment.code.add(t`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){\nreturn foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;\n}`)}export{n as FoamColor,o as FoamIntensity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{colorGamma as o}from\"../../../../../../colorUtils.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";function e(e){e.fragment.code.add(r`\n    const float GAMMA = ${r.float(o)};\n    const float INV_GAMMA = ${r.float(1/o)};\n\n    vec4 delinearizeGamma(vec4 color) {\n      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.a);\n    }\n\n    vec3 linearizeGamma(vec3 color) {\n      return pow(color, vec3(GAMMA));\n    }\n  `)}export{e as Gamma};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReadDepth as e}from\"../output/ReadDepth.glsl.js\";import{Float2BindUniform as t}from\"../../shaderModules/Float2BindUniform.js\";import{FloatBindUniform as o}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as r}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as i}from\"../../shaderModules/Matrix4BindUniform.js\";import{Texture2DBindUniform as a}from\"../../shaderModules/Texture2DBindUniform.js\";function d(d,n){if(!n.screenSpaceReflections)return;const c=d.fragment;c.include(e),c.uniforms.add(new t(\"nearFar\",(e=>e.camera.nearFar)),new a(\"depthMap\",(e=>e.depth?.attachment)),new i(\"proj\",(e=>e.camera.projectionMatrix)),new o(\"invResolutionHeight\",(e=>1/e.camera.height)),new i(\"reprojectionMatrix\",(e=>e.ssr.reprojectionMatrix))).code.add(r`\n  vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n  {\n    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\n    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\n    reprojectedCoord.xy /= reprojectedCoord.w;\n    return reprojectedCoord.xy * 0.5 + 0.5;\n  }\n\n  const int maxSteps = ${n.highStepCount?\"150\":\"75\"};\n\n  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)\n  {\n    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);\n    projectedCoord.xy /= projectedCoord.w;\n    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;\n    return projectedCoord;\n  }\n\n  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)\n  {\n    vec3 viewPos = startPosition;\n    vec3 viewPosEnd = startPosition;\n\n    // Project the start position to the screen\n    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);\n    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space\n    float k0 = 1.0/ projectedCoordStart.w;\n\n    // advance the position in the direction of the reflection\n    viewPos += dir;\n\n    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);\n\n    // Project the advanced position to the screen\n    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);\n    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space\n    float k1 = 1.0/ projectedCoordEnd.w;\n\n    // calculate the reflection direction in the screen space\n    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);\n    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);\n\n    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);\n\n    float projectedCoordDirLength = length(projectedCoordDir);\n    float maxSt = float(maxSteps);\n\n    // normalize the projection direction depending on maximum steps\n    // this determines how blocky the reflection looks\n    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);\n\n    // Normalize the homogeneous camera space coordinates\n    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);\n    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);\n\n    // initialize the variables for ray marching\n    vec2 P = projectedCoordStart.xy;\n    vec3 Q = Q0;\n    float k = k0;\n    float rayStartZ = -startPosition.z; // estimated ray start depth value\n    float rayEndZ = -startPosition.z;   // estimated ray end depth value\n    float prevEstimateZ = -startPosition.z;\n    float rayDiffZ = 0.0;\n    float dDepth;\n    float depth;\n    float rayDiffZOld = 0.0;\n\n    // early outs\n    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)\n      return vec3(P, 0.0);\n    float dDepthBefore = 0.0;\n\n    for(int i = 0; i < maxSteps-1; i++)\n    {\n      depth = -linearDepthFromTexture(depthMap, P); // get linear depth from the depth buffer\n\n      // estimate depth of the marching ray\n      rayStartZ = prevEstimateZ;\n      dDepth = -rayStartZ - depth;\n      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));\n      rayDiffZ = rayEndZ- rayStartZ;\n      prevEstimateZ = rayEndZ;\n\n      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )\n      {\n        return vec3(P, 0.);\n      }\n\n      // If we detect a hit - return the intersection point, two conditions:\n      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth\n      //  - if difference between dDepth and rayDiffZOld is not too large\n      //  - if difference between dDepth and 0.025/abs(k) is not too large\n      //  - if the sampled depth is not behind far plane or in front of near plane\n\n      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)\n      {\n        float weight = dDepth / (dDepth - dDepthBefore);\n        vec2 Pf = mix(P - dP, P, 1.0 - weight);\n        if (abs(Pf.y - projectedCoordStart.y) > invResolutionHeight) {\n          return vec3(Pf, depth);\n        }\n        else {\n          return vec3(P, depth);\n        }\n      }\n\n      // continue with ray marching\n      P = clamp(P + dP, vec2(0.0), vec2(0.999));\n      Q.z += dQ.z;\n      k += dk;\n      rayDiffZOld = rayDiffZ;\n      dDepthBefore = dDepth;\n    }\n    return vec3(P, 0.0);\n  }\n  `)}export{d as ScreenSpaceReflections};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../core/shaderModules/glsl.js\";function o(o){o.code.add(e`vec3 tonemapACES(vec3 x) {\nreturn clamp((x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14), 0.0, 1.0);\n}`)}export{o as ToneMapping};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{FoamColor as e}from\"./FoamRendering.glsl.js\";import{Gamma as o}from\"./Gamma.glsl.js\";import{PhysicallyBasedRenderingWater as t}from\"./PhysicallyBasedRendering.glsl.js\";import{distanceFadeStart as r,distanceFadeEnd as i}from\"./ScreenSpaceConstants.js\";import{ScreenSpaceReflections as n}from\"./ScreenSpaceReflections.glsl.js\";import{CloudsParallaxShading as a}from\"../util/CloudsParallaxShading.glsl.js\";import{FloatBindUniform as l}from\"../../shaderModules/FloatBindUniform.js\";import{glsl as d}from\"../../shaderModules/glsl.js\";import{Matrix4BindUniform as c}from\"../../shaderModules/Matrix4BindUniform.js\";import{Texture2DBindUniform as s}from\"../../shaderModules/Texture2DBindUniform.js\";import{ToneMapping as f}from\"../../../shaders/ToneMapping.glsl.js\";function m(m,v){m.include(t,v),m.include(o),m.include(e),v.cloudReflections&&m.include(a),m.include(n,v);const u=m.fragment;u.include(f),u.constants.add(\"fresnelSky\",\"vec3\",[.02,1,15]),u.constants.add(\"fresnelMaterial\",\"vec2\",[.02,.1]),u.constants.add(\"roughness\",\"float\",.015),u.constants.add(\"foamIntensityExternal\",\"float\",1.7),u.constants.add(\"ssrIntensity\",\"float\",.65),u.constants.add(\"ssrHeightFadeStart\",\"float\",r),u.constants.add(\"ssrHeightFadeEnd\",\"float\",i),u.constants.add(\"waterDiffusion\",\"float\",.92),u.constants.add(\"waterSeaColorMod\",\"float\",.8),u.constants.add(\"correctionViewingPowerFactor\",\"float\",.4),u.constants.add(\"skyZenitColor\",\"vec3\",[.52,.68,.9]),u.constants.add(\"skyColor\",\"vec3\",[.67,.79,.9]),u.constants.add(\"cloudFresnelModifier\",\"vec2\",[1.2,.01]),u.code.add(d`PBRShadingWater shadingInfo;\nvec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\nfloat exponent = pow((1.0 - cosTheta), fresnelSky[2]);\nreturn mix(zenit, horizon, exponent);\n}`),u.uniforms.add(new l(\"lightingSpecularStrength\",(e=>e.lighting.mainLight.specularStrength)),new l(\"lightingEnvironmentStrength\",(e=>e.lighting.mainLight.environmentStrength))),u.code.add(d`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {\nfloat reflectionHit = 0.0;\nfloat reflectionHitDiffused = 0.0;\nvec3 seaWaterColor = linearizeGamma(color);\nvec3 h = normalize(l + v);\nshadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);\nshadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);\nshadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\nshadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\nshadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\nfloat upDotV = max(dot(localUp,v), 0.0);\nvec3 skyHorizon = linearizeGamma(skyColor);\nvec3 skyZenit = linearizeGamma(skyZenitColor);\nvec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );\nfloat upDotL = max(dot(localUp,l),0.0);\nfloat daytimeMod = 0.1 + upDotL * 0.9;\nskyColor *= daytimeMod;\nfloat shadowModifier = clamp(shadow, 0.8, 1.0);\nvec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);\nvec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;\nvec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;\nvec3 specular = vec3(0.0);\nif(upDotV > 0.0 && upDotL > 0.0) {\nvec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);\nvec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;\nfloat NdotL = clamp(dot(n, l), 0.0, 1.0);\nspecular = lightingSpecularStrength * NdotL * incidentLight * specularSun;\n}\nvec3 foam = vec3(0.0);\nif(upDotV > 0.0) {\nfoam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);\n}\nfloat correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);\nvec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);\nvec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),v.cloudReflections&&u.uniforms.add(new l(\"cloudsOpacity\",(e=>e.clouds.opacity))).code.add(d`vec4 cloudsColor = renderClouds(reflectedWorld, position);\ncloudsColor.a = 1.0 - cloudsColor.a;\ncloudsColor = pow(cloudsColor, vec4(GAMMA));\ncloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * cloudsOpacity;`),v.screenSpaceReflections?u.uniforms.add(new c(\"view\",(e=>e.camera.viewMatrix)),new s(\"lastFrameColorTexture\",(e=>e.ssr.lastFrameColor?.getTexture())),new l(\"fadeFactorSSR\",(e=>e.ssr.fadeFactor))).code.add(d`vec3 viewDir = normalize(viewPosition);\nvec4 viewNormalVectorCoordinate = view * vec4(n, 0.0);\nvec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);\nvec4 viewUp = view * vec4(localUp, 0.0);\nvec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);\nvec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));\nvec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);\nvec3 reflectedColor = vec3(0.0);\nif (hitCoordinate.z > 0.0)\n{\nvec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);\nvec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));\nfloat heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);\nreflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;\nreflectionHitDiffused = waterDiffusion * reflectionHit;\nreflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *\nreflectionHitDiffused * fresnelModifier.y * ssrIntensity;\n}\nfloat seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);\nvec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +\nreflSea * seaColorMod + specular + foam);`):u.code.add(d`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),v.cloudReflections?v.screenSpaceReflections?u.code.add(d`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;\n}`):u.code.add(d`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;\n}`):u.code.add(d`return waterRenderedColor;\n}`)}export{m as Water};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{e as t}from\"../../../../chunks/earcut.js\";import e from\"../../../../geometry/Extent.js\";import r from\"../../../../geometry/Polygon.js\";import{Axis as i}from\"../../../../geometry/support/Axis.js\";import{getZeroIndexArray as o}from\"../../../../geometry/support/Indices.js\";import{leastSignificantAxis as n}from\"../../../../geometry/support/polygonUtils.js\";import{Attribute as a}from\"../../webgl-engine/lib/Attribute.js\";import{ContentObjectType as s}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as u}from\"../../webgl-engine/lib/Geometry.js\";import{VertexAttribute as c}from\"../../webgl-engine/lib/VertexAttribute.js\";function p(e,r,o){const a=(r.length>0?r[0]:e.length/3)-1,s=n(e,a,o);if(s!==i.Z){e=e.slice();for(let t=0;t<e.length;t+=3)e[t+s]=e[t+2]}return t(e,r,3)}function l(t){const e=[[c.POSITION,new a(t.attributeData.position,t.indices,3,!0)]],r=o(t.indices.length);return null!=t.attributeData.colorFeature?e.push([c.COLORFEATUREATTRIBUTE,new a([t.attributeData.colorFeature],r,1,!0)]):t.attributeData.color&&e.push([c.COLOR,new a(t.attributeData.color,r,4,!0)]),t.attributeData.uvMapSpace&&e.push([c.UVMAPSPACE,new a(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([c.BOUNDINGRECT,new a(t.attributeData.boundingRect,t.indices,9,!0)]),new u(t.material,e,t.mapPositions,s.Mesh,t.attributeData.objectAndLayerIdColor)}function m(t,e=null){const r=[[c.POSITION,new a(t.attributeData.position,t.indices,3,!0)],[c.UV0,new a(t.attributeData.uv0,t.indices,2,!0)]];return new u(t.material,r,t.mapPositions,s.Mesh,e)}function b(t){switch(t.type){case\"extent\":if(t instanceof e)return r.fromExtent(t);break;case\"polygon\":return t}return null}class g{constructor(t,e,r){this.renderData=t,this.layerUid=e,this.graphicUid=r,this.outGeometries=new Array}}export{g as PolygonCreationDataBase,l as createColorGeometry,p as createIndices3D,m as createWaterGeometry,b as geometryAsPolygon};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{projectBuffer as o}from\"../../../../geometry/projection/projectBuffer.js\";import{newDoubleArray as t,doubleSubArray as n}from\"../../../../geometry/support/DoubleArray.js\";import{ringsToTriangulationInfo as s,CounterClockwiseMode as i}from\"../../../../geometry/support/triangulationUtils.js\";import{applyPerVertexElevationAlignment as e}from\"../../layers/graphics/elevationAlignmentUtils.js\";import{drapedZ as r}from\"../../terrain/OverlayRenderer.js\";function p(o,n,r,p){const c=s(o.rings,!!o.hasZ&&\"on-the-ground\"!==p.mode,i.CCW_IS_HOLE,o.spatialReference),a=t(c.position.length),h=e(c.position,o.spatialReference,0,a,0,c.position,0,c.position.length/3,n,r,p),m=null!=h;return new g(c.position,a,u(c.polygons,c.position,a),l(c.outlines,c.position,a),m,h)}function c(t,n){const e=s(t.rings,!1,i.CCW_IS_HOLE),p=o(e.position,t.spatialReference,0,e.position,n,0);for(let o=2;o<e.position.length;o+=3)e.position[o]=r;return{position:e.position,polygons:u(e.polygons,e.position),outlines:l(e.outlines,e.position),projectionSuccess:p}}function l(o,t,s=null){return o.filter((({count:o})=>o>1)).map((({index:o,count:i})=>{const e=3*o,r=3*i;return null!=s?new h(o,i,n(t,e,r),n(s,e,r)):new a(o,i,n(t,e,r))}))}function u(o,t,s=null){const i=new Array;for(const{index:e,count:r,holeIndices:p,pathLengths:c}of o){if(r<=1)continue;const o=3*e,l=3*r,u=p.map((o=>o-e)),a=null!=s?new m(e,r,n(t,3*e,3*r),n(s,o,l),u,c):new f(e,r,n(t,3*e,3*r),u,c);i.push(a)}return i}class a{constructor(o,t,n){this.index=o,this.count=t,this.position=n}}class h extends a{constructor(o,t,n,s){super(o,t,n),this.mapPositions=s}}class m extends h{constructor(o,t,n,s,i,e){super(o,t,n,s),this.holeIndices=i,this.pathLengths=e}}class f extends a{constructor(o,t,n,s,i){super(o,t,n),this.holeIndices=s,this.pathLengths=i}}class g{constructor(o,t,n,s,i,e){this.position=o,this.mapPositions=t,this.polygons=n,this.outlines=s,this.projectionSuccess=i,this.sampledElevation=e}}export{g as PolygonRenderInfo,m as PolygonVertexData,f as PolygonVertexDataDraped,p as geometryToRenderInfo,c as geometryToRenderInfoDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import t from\"../../../../core/Error.js\";import{clone as e}from\"../../../../core/lang.js\";import{getMetersPerVerticalUnitForSR as r}from\"../../../../core/unitUtils.js\";import{e as s}from\"../../../../chunks/earcut.js\";import{normalFromMat4 as o}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as n,invertOrIdentity as a}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{F as c,c as m,n as p,i as h,d as g,e as d,t as u,a as f}from\"../../../../chunks/vec32.js\";import{fromArray as y,clone as b,ZEROS as _,create as x}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as S}from\"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{create as j,fromBuffer as P,intersectsClippingArea as E}from\"../../../../geometry/support/aaBoundingBox.js\";import{newDoubleArray as w}from\"../../../../geometry/support/DoubleArray.js\";import{newIndexArray as O,getZeroIndexArray as v}from\"../../../../geometry/support/Indices.js\";import{t as C}from\"../../../../chunks/vec3.js\";import{makeVertexCandidate as M,makeEdgeCandidate as I}from\"../../../../layers/graphics/data/SnappingCandidate.js\";import{getDriverAxisSizeValue as A}from\"../../../../renderers/support/renderingInfoUtils.js\";import{ViewingMode as L}from\"../../../ViewingMode.js\";import{needsElevationUpdates3D as z,SampleElevationInfo as B}from\"./elevationAlignmentUtils.js\";import{Object3DEdgeState as D,Graphics3DObject3DGraphicLayer as R}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as T}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as U,computeCentroid as G}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as N}from\"./interfaces.js\";import{geometryAsPolygon as V}from\"./polygonUtils.js\";import{createMaterial as F}from\"../support/edgeUtils.js\";import{debugFlags as k}from\"../../support/debugFlags.js\";import{SamplePosition as H}from\"../../support/ElevationProvider.js\";import{geometryToRenderInfo as W}from\"../../support/renderInfoUtils/polygon.js\";import{NormalType as q}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{Attribute as Z}from\"../../webgl-engine/lib/Attribute.js\";import{CullFaceOptions as J}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ContentObjectType as K}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as Q}from\"../../webgl-engine/lib/Geometry.js\";import{isGeometryWithMapPositions as X}from\"../../webgl-engine/lib/GeometryWithMapPositions.js\";import{compressNormals as Y,compressNormal as $}from\"../../webgl-engine/lib/Normals.js\";import{Object3D as tt}from\"../../webgl-engine/lib/Object3D.js\";import{VertexAttribute as et}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as rt}from\"../../webgl-engine/materials/DefaultMaterial.js\";const st=[\"polygon\",\"extent\"];class ot extends T{constructor(t,e,r,s){super(t,e,r,s),this.ensureDrapedStatus(!1)}async doLoad(){if(!this._drivenProperties.size){const e=U(this._getSymbolSize());if(e)throw new t(\"graphics3dextrudesymbollayer:invalid-size\",e)}const e=this.symbolLayer?.material?.color,r=this._getCombinedOpacityAndColor(e),s=y(r),o=r[3],i=o<1||this.needsDrivenTransparentPass,n=this.symbolLayer?.material?.emissiveFactor,a=n?c(b(n)):_,l={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,diffuse:s,ambient:s,opacity:o,transparent:i,cullFace:i?J.None:J.Back,hasVertexColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,emissiveFactor:a,offsetTransparentBackfaces:!0,normalType:q.Compressed};this._materials[It.Main]=new rt(l,this._context),this._materials[It.Bottom]=new rt({...l,cullFace:J.Back},this._context),this._context.stage.addMany(this._materials)}destroy(){super.destroy(),this._context.stage.removeMany(this._materials),this._materials.length=0}createGraphics3DGraphic(t){const e=t.graphic;if(!this._validateGeometry(e.geometry,st,this.symbolLayer.type))return null;const r=this._getVertexOpacityAndColor(t.renderingInfo,255),s=this.setGraphicElevationContext(e);return this._createAs3DShape(e,t.renderingInfo,r,s,e.uid)}layerOpacityChanged(t,e){const r=this.symbolLayer?.material?.color,s=this._getCombinedOpacity(r),o=s<1||this.needsDrivenTransparentPass;this._materials[It.Main]?.setParameters({opacity:s,transparent:o}),this._materials[It.Bottom]?.setParameters({opacity:s,transparent:o});const i=this._getLayerOpacity();t.forEach((t=>e(t)?.layerOpacityChanged(i,this._context.isAsync)))}layerElevationInfoChanged(t,e){return this.updateGraphics3DGraphicElevationInfo(t,e,z)}slicePlaneEnabledChanged(t,e){return this._materials[It.Main]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._materials[It.Bottom]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),t.forEach((t=>{const r=e(t);null!=r&&r.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)})),!0}physicalBasedRenderingChanged(){const t={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0};return this._materials[It.Main]?.setParameters(t),this._materials[It.Bottom]?.setParameters(t),!0}_getExtrusionSize(t){let e;return e=t.size&&this._drivenProperties.size?A(t.size,2)??0:this._getSymbolSize(),e/=this._context.renderCoordsHelper.unitInMeters,e}applyRendererDiff(t,e){return this._drivenPropertiesChanged(e)?N.RecreateSymbol:N.RecreateGraphics}async queryForSnapping(t,s,o,i){const n=this._getExtrusionSize(o)*this._context.renderCoordsHelper.unitInMeters/r(s),{objectId:a,target:l}=t,c=e(l);switch(c.z=(c.z??0)+n,t.type){case\"edge\":{const{start:r,end:s}=t,o=e(r),i=e(s);return o.z=(o.z??0)+n,i.z=(i.z??0)+n,[I(a,c,1/0,o,i)]}case\"vertex\":return[M(a,c,1/0),I(a,l,1/0,l,c)];default:return[]}}_getSymbolSize(){return this.symbolLayer.size??1}_createAs3DShape(t,e,r,a,c){const m=V(t.geometry);if(null==m)return null;if(0===m.rings.length||!m.rings.some((t=>t.length>0)))return this._logGeometryValidationWarnings(m.rings,\"rings\",\"ExtrudeSymbol3DLayer\"),null;const p=W(m,this._context.elevationProvider,this._context.renderCoordsHelper,a);this._logGeometryCreationWarnings(p,m.rings,\"rings\",\"ExtrudeSymbol3DLayer\");const h=G(m);if(null==h)return null;const g=new Array,d=new Array,u=j(),f=l(),y=x(),b=this._context.renderCoordsHelper.viewingMode===L.Global;b||this._context.renderCoordsHelper.worldUpAtPosition(null,y),S(m.spatialReference,[h.x,h.y,0],f,this._context.renderCoordsHelper.spatialReference);const _=l();n(_,f);const v=i();o(v,_);const{polygons:M,mapPositions:I,position:A}=p,B=new Map,T=this._materials[It.Main];for(const o of M){const t=o.count;if(this._context.clippingExtent&&(P(o.mapPositions,u),!E(u,this._context.clippingExtent)))continue;const i=s(o.mapPositions,o.holeIndices,3);if(0===i.length)continue;const n=i.length,a=6*t,l=O(a+n),m=O(n),p=w(3*a),h=w(3*a),x=w(3*a),S=w(a);nt(A,I,i,o,p,x,h,S,l,m,this._getExtrusionSize(e),y,b),C(p,p,_);const j=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:c,layerUid:this._context.layer.uid}),v=new At(p,x,Y(h),S),M=it(T,l,l.length-m.length,v,r,j),L=t,z=t,D=2*o.count,R=new Lt(L,z,D,n/3);_t(M,R,f),B.set(M,R),g.push(M,it(this._materials[It.Bottom],m,0,v,r,j)),d.push(v.heights)}if(0===g.length)return null;const U=new tt({geometries:g,layerUid:this._context.layer.uid,graphicUid:c,isElevationSource:!0});U.transformation=f;const N=F(this.symbolLayer,{opacity:this._getLayerOpacity()}),k=N?new D(this._materials[It.Main],N,this._context.slicePlaneEnabled):null,H=new R(this,U,g,null,null,((t,e,r,s,o)=>bt(t,e,r,s,o,d,B)),a,k);return H.alignedSampledElevation=p.sampledElevation,H.needsElevationUpdates=z(a.mode),H}}function it(t,e,r,s,o,i){const n=v(e.length),a=[[et.POSITION,new Z(s.positions,e,3,!0)],[et.NORMALCOMPRESSED,new Z(s.normals,e,2,!0)],[et.COLOR,new Z(o,n,4,!0)]];return new Q(t,a,s.elevation,K.Mesh,i,r)}function nt(t,e,r,s,o,i,n,a,l,c,m,p,h){{const g=r.length/3,d=2*s.count;at(t,e,s.index,s.count,r,0,g,o,i,n,a,l,c,d,m,p,h)}{let t=0,e=2*s.count,r=0;const c=s.pathLengths[0];mt(o,i,a,n,t,c,s.count,e,l,r,m),e+=4*c,r+=2*c,t+=c;for(let p=1;p<s.pathLengths.length;++p){const c=s.pathLengths[p];mt(o,i,a,n,t,c,s.count,e,l,r,m),e+=4*c,r+=2*c,t+=c}}}function at(t,e,r,s,o,i,n,a,l,c,h,g,d,u,f,y,b){m(St,y);{const o=f>0?1:-1;let i=3*r,n=0,m=3*n,g=s,d=3*g;for(let r=0;r<s;++r){const r=t[i],s=t[i+1],u=t[i+2];b&&(St[0]=r,St[1]=s,St[2]=u,p(St,St)),a[m+0]=r,a[m+1]=s,a[m+2]=u;const y=e[i+0],_=e[i+1],x=e[i+2];l[m+0]=y,l[m+1]=_,l[m+2]=x,c[m+0]=-o*St[0],c[m+1]=-o*St[1],c[m+2]=-o*St[2],h[n]=0,a[d+0]=r+f*St[0],a[d+1]=s+f*St[1],a[d+2]=u+f*St[2],l[d+0]=y,l[d+1]=_,l[d+2]=x,h[g]=f,m+=3,d+=3,i+=3,n+=1,g+=1}}{let t=3*i,e=0,r=3*u;const a=f<0?Et:Pt,l=f<0?Pt:Et;for(let i=0;i<n;++i)d[e]=o[t+a[0]],d[e+1]=o[t+a[1]],d[e+2]=o[t+a[2]],g[r]=o[t+l[0]]+s,g[r+1]=o[t+l[1]]+s,g[r+2]=o[t+l[2]]+s,e+=3,r+=3,t+=3}}function lt(t,e,r,s,o,i,n){s[i]=s[n],n*=3,t[i*=3]=t[n],t[i+1]=t[n+1],t[i+2]=t[n+2],e[i]=e[n],e[i+1]=e[n+1],e[i+2]=e[n+2],r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2]}const ct=x();function mt(t,e,r,s,o,i,n,a,l,c,m){let p=o,h=o+1,g=o+n,d=o+n+1,u=a,f=a+1,y=a+2*i,b=a+2*i+1;m<0&&(p=o+n+1,d=o);let _=3*c;for(let x=0;x<i;++x)x===i-1&&(h=o,m>0?d=o+n:p=o+n),ft(t,p,h,g,ct),lt(t,e,s,r,ct,u,p),lt(t,e,s,r,ct,f,h),lt(t,e,s,r,ct,y,g),lt(t,e,s,r,ct,b,d),l[_]=u,l[_+1]=y,l[_+2]=b,l[_+3]=u,l[_+4]=b,l[_+5]=f,_+=6,p++,h++,g++,d++,u+=2,f+=2,y+=2,b+=2}const pt=x(),ht=x(),gt=x(),dt=x(),ut=x();function ft(t,e,r,s,o){e*=3,r*=3,s*=3,h(pt,t[e++],t[e++],t[e++]),h(ht,t[r++],t[r++],t[r++]),h(gt,t[s++],t[s++],t[s++]),g(dt,ht,pt),g(ut,gt,pt),d(o,ut,dt),p(o,o)}const yt=x();function bt(t,e,r,s,o,i,n){const c=t.stageObject,m=c.geometries,p=m.length,g=\"absolute-height\"!==e.mode;let d=0;const f=c.transformation,y=a(l(),f);for(let a=0;a<p;a+=2){const t=m[a];if(!X(t))continue;const e=t.getMutableAttribute(et.POSITION).data,l=i[a/2],p=new H(t.mapPositions),b=e.length/3;let _=!1,x=0;{let t=0;for(let i=0;i<b;i++){yt[0]=e[t],yt[1]=e[t+1],yt[2]=e[t+2],s(p,jt),g&&(x+=jt.sampledElevation),k.TESTS_DISABLE_OPTIMIZATIONS?(h(xt,p.array[p.offset],p.array[p.offset+1],jt.z+l[t/3]),null!=r&&o.toRenderCoords(xt,r,xt),u(xt,xt,y)):(h(xt,e[t],e[t+1],e[t+2]),u(xt,xt,f),o.setAltitude(xt,jt.z+l[t/3]),u(xt,xt,y)),e[t]=xt[0],e[t+1]=xt[1],e[t+2]=xt[2];const i=wt/o.unitInMeters;(Math.abs(yt[0]-e[t])>=i||Math.abs(yt[1]-e[t+1])>=i||Math.abs(yt[2]-e[t+2])>=i)&&(_=!0),p.offset+=3,t+=3}}if(_){const e=n.get(t);e&&_t(t,e,f),c.geometryVertexAttributeUpdated(m[a],et.NORMALCOMPRESSED),t.invalidateBoundingInfo(),c.geometryVertexAttributeUpdated(m[a],et.POSITION),m[a+1].invalidateBoundingInfo(),c.geometryVertexAttributeUpdated(m[a+1],et.POSITION)}d+=x/b}return d/p}function _t(t,e,r){const s=t.getMutableAttribute(et.POSITION),o=t.getMutableAttribute(et.NORMALCOMPRESSED).data,{topVertexStart:i,topVertexCount:n,topFaceStart:a,topFaceCount:l}=e,c=s.data,m=n,g=t.attributes.get(et.POSITION).indices,y=a+l,b=i+n,_=w(3*m);for(let p=0;p<m;++p){const t=3*p;_[t+0]=0,_[t+1]=0,_[t+2]=0}const x=Ot,S=vt,j=Ct,P=Mt,E=St;for(let w=a;w<y;++w){const t=3*w;for(let e=0;e<3;++e){const s=g[t+e];P[e]=s;const o=3*s;h(xt,c[o+0],c[o+1],c[o+2]),u(x[e],xt,r)}f(S,x[1],x[0]),f(j,x[2],x[0]),d(E,S,j),p(E,E);for(let e=0;e<3;++e){const t=3*(P[e]-i);_[t+0]+=E[0],_[t+1]+=E[1],_[t+2]+=E[2]}}for(let p=i;p<b;++p){const t=3*(p-i),e=_[t+0],r=_[t+1],s=_[t+2],n=Math.sqrt(e*e+r*r+s*s);$(o,p,e/n,r/n,s/n)}}const xt=x(),St=x(),jt=new B,Pt=[0,2,1],Et=[0,1,2],wt=.01,Ot=[x(),x(),x()],vt=x(),Ct=x(),Mt=[0,0,0];var It;!function(t){t[t.Main=0]=\"Main\",t[t.Bottom=1]=\"Bottom\"}(It||(It={}));class At{constructor(t,e,r,s){this.positions=t,this.elevation=e,this.normals=r,this.heights=s}}class Lt{constructor(t,e,r,s){this.topVertexStart=t,this.topVertexCount=e,this.topFaceStart=r,this.topFaceCount=s}}export{ot as Graphics3DExtrudeSymbolLayer,nt as extrudePolygon};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{glsl as r}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerPassUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Texture2DPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as a}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as l}from\"../views/webgl/ShaderBuilder.js\";class t extends a{}function c(){const a=new l;return a.include(e),a.outputs.add(\"fragColor\",\"vec4\",0),a.fragment.uniforms.add(new s(\"colorTexture\",(e=>e.color)),new s(\"focusArea\",(e=>e.focusArea)),new o(\"focusAreaEffectMode\",(e=>e.effect??1))).main.add(r`float mask = texture( focusArea, uv, 0.0 ).r;\nvec4 color = texture( colorTexture, uv, 0.0 );\nvec4 colorDeSaturate = vec4(color.r * 0.25 + color.g * 0.5 + color.b * 0.25);\nif (focusAreaEffectMode == 1) {\nfragColor = mask > 0.0 ? color : 0.55 * colorDeSaturate + 0.45;\n} else {\nfragColor = mask > 0.0 ? color : 0.33 * mix(color, colorDeSaturate, 0.);\n}`),a}const u=Object.freeze(Object.defineProperty({__proto__:null,FocusAreaColorPassParameters:t,build:c},Symbol.toStringTag,{value:\"Module\"}));export{t as F,u as a,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{a as o}from\"../../../../../chunks/FocusAreaColor.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class a extends r{constructor(r,s){super(r,s,new e(o,(()=>import(\"../../shaders/FocusAreaColor.glsl.js\"))))}initializePipeline(){return s({colorWrite:i})}}export{a as FocusAreaColorTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{RenderCategory as o,InternalRenderCategory as t}from\"../../../webgl.js\";import i from\"../../../webgl/RenderNode.js\";import{FocusAreaColorTechnique as c}from\"./FocusAreaColorTechnique.js\";import{F as a}from\"../../../../../chunks/FocusAreaColor.glsl.js\";let n=class extends i{constructor(e){super({...e,view:e.focusAreas.view}),this.consumes={required:[o.COMPOSITE,t.FOCUSAREA]},this.produces=o.COMPOSITE,this._passParameters=new a}precompile(){this.techniques.precompile(c)}render(e){const r=this.techniques.get(c),s=e.find((({name:e})=>e===o.COMPOSITE));if(!r.compiled)return this.requestRender(),s;const i=this.bindParameters,a=i.camera,n=a.fullViewport[2],p=a.fullViewport[3],m=e.find((({name:e})=>e===t.FOCUSAREA)),h=this.fboCache.acquire(n,p,this.produces),d=this.renderingContext;return d.gl.clear(d.gl.STENCIL_BUFFER_BIT),d.bindFramebuffer(h.fbo),this._passParameters.color=s.getTexture(),this._passParameters.focusArea=m.getTexture(),this._passParameters.effect=u[this.focusAreas.style],d.bindTechnique(r,i,this._passParameters),d.screen.draw(),h.attachDepth(s.getAttachment(this.gl.DEPTH_STENCIL_ATTACHMENT)),h}};var p;e([r()],n.prototype,\"consumes\",void 0),e([r()],n.prototype,\"produces\",void 0),e([r({constructOnly:!0})],n.prototype,\"focusAreas\",void 0),n=e([s(\"esri.views.3d.webgl-engine.effects.focusArea.FocusAreaColorNode\")],n),function(e){e[e.NONE=0]=\"NONE\",e[e.BRIGHT=1]=\"BRIGHT\",e[e.DARK=2]=\"DARK\"}(p||(p={}));const u={none:p.NONE,bright:p.BRIGHT,dark:p.DARK};export{n as FocusAreaColorNode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{translate as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ZEROS as o}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{glsl as i}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Matrix4DrawUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform.js\";import{VertexAttribute as a}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{NoParameters as m}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as n}from\"../views/webgl/ShaderBuilder.js\";class l extends m{constructor(){super(...arguments),this.origin=o}}function d(){const r=new n;return r.attributes.add(a.POSITION,\"vec3\"),r.outputs.add(\"fragColor\",\"vec4\",0),r.vertex.uniforms.add(new t(\"proj\",(e=>e.camera.projectionMatrix)),new s(\"view\",((r,o)=>e(c,o.camera.viewMatrix,r.origin)))).main.add(i`gl_Position = proj * view * vec4(position, 1.0);`),r.fragment.main.add(i`fragColor = vec4(1., 0., 0., 1.);`),r}const c=r(),f=Object.freeze(Object.defineProperty({__proto__:null,FocusAreaMaskDrawParameters:l,build:d},Symbol.toStringTag,{value:\"Module\"}));export{l as F,f as a,d as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{a as s}from\"../../../../../chunks/FocusAreaMask.glsl.js\";import{CompareFunction as o}from\"../../../../webgl/enums.js\";import{makePipelineState as t,defaultColorWrite as a}from\"../../../../webgl/renderState.js\";class i extends r{constructor(r,o){super(r,o,new e(s,(()=>import(\"../../shaders/FocusAreaMask.glsl.js\"))))}initializePipeline(){return t({colorWrite:a,depthTest:{func:o.LEQUAL}})}}export{i as FocusAreaMaskTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{InternalRenderCategory as r,RenderCategory as o}from\"../../../webgl.js\";import{ColorFormat as i}from\"../../../webgl/formats.js\";import n from\"../../../webgl/RenderNode.js\";import{FocusAreaMaskTechnique as a}from\"./FocusAreaMaskTechnique.js\";import{Default3D as c}from\"../../lib/DefaultVertexAttributeLocations.js\";import{Pos3 as h}from\"../../lib/DefaultVertexBufferLayouts.js\";import{VertexArrayObject as p}from\"../../lib/VertexArrayObject.js\";import{F as l}from\"../../../../../chunks/FocusAreaMask.glsl.js\";import{BufferObject as u}from\"../../../../webgl/BufferObject.js\";import{FramebufferBit as m,Face as d,StencilOperation as g,CompareFunction as f,PrimitiveType as A,Usage as E}from\"../../../../webgl/enums.js\";import{noParameters as _}from\"../../../../webgl/NoParameters.js\";let b=class extends n{constructor(e){super({...e,view:e.focusAreas.view}),this.consumes={required:[r.FOCUSAREA,o.TRANSPARENT]},this.produces=r.FOCUSAREA,this._vaos=new Array,this._counts=new Array,this._origins=new Array,this._maskParameters=new l}initialize(){this.updateGeometries()}destroy(){this._vaos.forEach((e=>e.dispose())),this._vaos.length=this._counts.length=this._origins.length=0}precompile(){this.techniques.precompile(a)}render(e){const t=this.techniques.get(a),s=this.bindParameters,n=s.camera,c=n.fullViewport[2],h=n.fullViewport[3],p=this.fboCache.acquire(c,h,r.FOCUSAREA,i.RGBA);if(!t.compiled||!this._vaos)return this.requestRender(),p;const l=e.find((({name:e})=>e===o.TRANSPARENT)),u=this.renderingContext;p.attachDepth(l.getAttachment(this.gl.DEPTH_STENCIL_ATTACHMENT)),u.bindFramebuffer(p.fbo),u.clear(m.COLOR|m.STENCIL),u.setViewport(0,0,c,h),u.gl.clearStencil(0),u.gl.clear(u.gl.STENCIL_BUFFER_BIT),u.setClearStencil(0);const E=u.bindTechnique(t,s);u.setFaceCullingEnabled(!1),u.setStencilTestEnabled(!0),u.setStencilOpSeparate(d.FRONT,g.KEEP,g.INCR_WRAP,g.KEEP),u.setStencilOpSeparate(d.BACK,g.KEEP,g.DECR_WRAP,g.KEEP),u.setDepthWriteEnabled(!1);for(let r=0;r<this._vaos.length;r++){const e=this._vaos[r],t=this._counts[r];this._maskParameters.origin=this._origins[r],E.bindDraw(s,_,this._maskParameters),u.bindVAO(e),u.setStencilWriteMask(255),u.setStencilFunction(f.ALWAYS,0,255),u.setColorMask(!1,!1,!1,!1),u.drawArrays(A.TRIANGLES,0,t),u.setStencilWriteMask(0),u.setStencilFunction(f.NOTEQUAL,0,255),u.setColorMask(!0,!0,!0,!0),u.drawArrays(A.TRIANGLES,0,t)}return p}updateGeometries(){if(!this.view._stage)return;this._vaos.forEach((e=>e.dispose())),this._vaos.length=this._counts.length=this._origins.length=0;const e=this.focusAreas.geometries;for(const t of e){const e=new Array,s=t.indicesBottom;for(let n=0;n<s.length;n++)e.push(t.positions[3*(s[n]-1)]),e.push(t.positions[3*(s[n]-1)+1]),e.push(t.positions[3*(s[n]-1)+2]);const r=t.indicesExtruded;for(let n=0;n<r.length;n++)e.push(t.positions[3*r[n]]),e.push(t.positions[3*r[n]+1]),e.push(t.positions[3*r[n]+2]);const o=new Float32Array(e),i=new p(this.renderingContext,c,new Map([[\"geometry\",h]]),new Map([[\"geometry\",u.createVertex(this.renderingContext,E.STATIC_DRAW,o)]]));this._vaos.push(i),this._counts.push(s.length+r.length),this._origins.push(t.origin)}this.requestRender()}};e([t()],b.prototype,\"consumes\",void 0),e([t()],b.prototype,\"produces\",void 0),e([t({constructOnly:!0})],b.prototype,\"focusAreas\",void 0),b=e([s(\"esri.views.3d.webgl-engine.effects.focusArea.FocusAreaMaskNode\")],b);class w{constructor(e,t,s,r,o,i){this.positions=e,this.indicesBottom=t,this.indicesExtruded=s,this.height=r,this.origin=o,this.color=i}}var R;!function(e){e[e.NONE=0]=\"NONE\",e[e.BRIGHT=1]=\"BRIGHT\",e[e.DARK=2]=\"DARK\"}(R||(R={}));export{R as FocusAreaEffect,w as FocusAreaGeometry,b as FocusAreaMaskNode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import o from\"../core/Accessor.js\";import s from\"../core/Collection.js\";import{destroyMaybe as r}from\"../core/maybe.js\";import{watch as t,syncAndInitial as i}from\"../core/reactiveUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import{e as c}from\"../chunks/earcut.js\";import{create as m}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{n as d}from\"../chunks/vec32.js\";import{create as p}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import l from\"../geometry/Point.js\";import{computeTranslationToOriginAndRotation as h}from\"../geometry/projection/computeTranslationToOriginAndRotation.js\";import{newDoubleArray as u}from\"../geometry/support/DoubleArray.js\";import{newIndexArray as f}from\"../geometry/support/Indices.js\";import{t as g}from\"../chunks/vec3.js\";import{ViewingMode as y}from\"./ViewingMode.js\";import{ElevationContext as v}from\"./3d/layers/graphics/ElevationContext.js\";import{extrudePolygon as j}from\"./3d/layers/graphics/Graphics3DExtrudeSymbolLayer.js\";import{computeCentroid as _}from\"./3d/layers/graphics/graphicUtils.js\";import{geometryToRenderInfo as w}from\"./3d/support/renderInfoUtils/polygon.js\";import{FocusAreaColorNode as A}from\"./3d/webgl-engine/effects/focusArea/FocusAreaColorNode.js\";import{FocusAreaGeometry as b,FocusAreaMaskNode as R}from\"./3d/webgl-engine/effects/focusArea/FocusAreaMaskNode.js\";const G=0,N=5e6,k=.42,x=.32;function C(e,o){if(e){if(\"bright\"===o){const o=(e[0]+e[1]+e[2])/3;return[o*x+(1-x),o*x+(1-x),o*x+(1-x),e[3]*x]}return\"dark\"===o?[e[0]*k,e[1]*k,e[2]*k,e[3]*k]:e}}let F=class extends o{constructor(e){super(e),this.style=\"dark\",this.geometries=new Array,this._areas=new s,this._elevationContext=new v}initialize(){this.addHandles([t((()=>this.style),(()=>this._updateRenderNodes()),i)]),this.addHandles([t((()=>this.activePolygons),(()=>this._updateFocusAreaGeometries()),i)])}get activePolygons(){const e=new s;for(const o of this.areas)if(o.enabled)for(const s of o.geometries)e.push(s);return e}add(e){this.areas.add(e),this._updateFocusAreaGeometries()}addMany(e){this.areas.addMany(e),this._updateFocusAreaGeometries()}remove(e){this.areas.remove(e),this._updateFocusAreaGeometries()}removeMany(e){this.areas.removeMany(e),this._updateFocusAreaGeometries()}removeAll(){this.areas.removeAll(),this._updateFocusAreaGeometries()}containsGeometry(e){let o=!0;const s=new l(e);return o=this.areas.some((e=>!!e.enabled&&(!!e?.geometries.length&&e.geometries.some((e=>e.contains(s)))))),o}get areas(){return this._areas}_updateFocusAreaGeometries(){this._extrudePolygons(),this._updateRenderNodes()}_extrudePolygons(){if(!this.view.renderCoordsHelper)return;this.geometries.length=0;const e=N-G,o=p(),s=this.view.renderCoordsHelper.viewingMode===y.Global,r=m(),t=m();s||this.view.renderCoordsHelper.worldUpAtPosition([0,0,0],o);for(const i of this.areas)if(i.enabled)for(const a of i.geometries){const n=_(a);if(null==n)continue;h(a.spatialReference,[n.x,n.y,0],r,this.view.renderCoordsHelper.spatialReference);const m=d(P,[r[12]-G*o[0],r[13]-G*o[1],r[14]-G*o[2]]);t[12]=-r[12],t[13]=-r[13],t[14]=-r[14];const p=w(a,this.view.elevationProvider,this.view.renderCoordsHelper,this._elevationContext),{polygons:l,mapPositions:y,position:v}=p;for(const a of l){const n=a.count,d=c(a.mapPositions,a.holeIndices,3);if(0===d.length)continue;const p=d.length,l=6*n,h=f(l+p),_=f(p),w=u(3*l),A=u(3*l),R=u(3*l),N=u(l);j(v,y,d,a,w,R,A,N,h,_,e,o,s),g(w,w,t);const k=new b(w,_,h,e,[r[12]+G*m[0],r[13]+G*m[1],r[14]+G*m[2]],i.outline?.color);this.geometries.push(k)}}this._maskRenderNode?.updateGeometries()}_updateRenderNodes(){this.view._stage&&(\"none\"===this.style||0===this.geometries.length?(this._maskRenderNode=r(this._maskRenderNode),this._colorRenderNode=r(this._colorRenderNode)):(this._maskRenderNode??=new R({focusAreas:this}),this._colorRenderNode??=new A({focusAreas:this})))}};e([a()],F.prototype,\"activePolygons\",null),e([a()],F.prototype,\"style\",void 0),e([a()],F.prototype,\"geometries\",void 0),e([a({constructOnly:!0})],F.prototype,\"view\",void 0),e([a()],F.prototype,\"_areas\",void 0),F=e([n(\"esri.views.FocusAreas\")],F);const P=p();export{F as FocusAreas,C as focusAreaHUDColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as e}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as s}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";class i{constructor(i,r=\"center\",c=!1,a=t(),o=s(0,0,0,-1),l=\"world\",f=e(),n=0){this.verticalOffset=i,this.anchor=r,this.hasLabelVerticalOffset=c,this.screenOffset=a,this.centerOffset=o,this.centerOffsetUnits=l,this.translation=f,this.elevationOffset=n}}class r{constructor(e,s=\"center\",i=\"center\",r=null,c=t(),a=!0){this.placement=e,this.horizontalPlacement=s,this.verticalPlacement=i,this.text=r,this.displaySize=c,this.isFocused=a}}export{r as LabelParameters,i as LabelPlacement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport o from\"../../../../Color.js\";import{isCachedFontFace as t,loadFont as e}from\"../../../../core/fontUtils.js\";import i from\"../../../../core/Logger.js\";import{pt2px as r}from\"../../../../core/screenUtils.js\";import{ZEROS as n}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";class s{constructor(o){this.definition=o,this.key=JSON.stringify(o),this.haloSize=Math.round(o.halo.size),this.textStyle=a(o.color),this.haloStyle=l(o.halo.color),this.backgroundStyle=0!==o.background.color[3]?a(o.background.color):null}fontString(o){const t=this.definition.font,e=\"sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji\";return`${t.style} ${t.weight} ${o}px ${t.family}, ${e}`}setFontProperties(o,t){o.font=this.fontString(t),o.textAlign=\"left\",o.textBaseline=\"alphabetic\"}static async fromSymbol(l,a){const f=l?.material?.color,m=o.toUnitRGBA(f)??n,g=null!=l.size?r(l.size):12,u=l.lineHeight,d=null!=l.background?o.toUnitRGBA(l.background.color):n,h={family:l.font?.family??\"sans-serif\",decoration:l.font?.decoration??\"none\",weight:l.font?.weight??\"normal\",style:l.font?.style??\"normal\"},y=l.halo,b=null!=y?.color&&y.size>0?{size:r(y.size),color:o.toUnitRGBA(y.color)}:{size:0,color:n},p=new s({color:m,size:g,background:{color:d,padding:null!=l.background?[.65*g,.5*g]:[0,0],borderRadius:null!=l.background?g*(6/16):0},lineSpacingFactor:u,font:h,halo:b,pixelRatio:a});if(l.font){let o=!1;const r=p.fontString(g);try{o=(await document.fonts.load(r)).some((o=>!t(o)))}catch(S){i.getLogger(\"esri.views.3d.webgl-engine.lib.TextRenderParameters\").warnOnce(`Failed to preload font '${r}'. Some text symbology may be rendered using the default browser font.`)}if(!o&&!c.has(l.font.family))try{await e(l.font)}catch(S){}}return p}}function l(o){return`rgb(${o.slice(0,3).map((o=>Math.floor(255*o))).toString()})`}function a(o){return`rgba(${o.slice(0,3).map((o=>Math.floor(255*o))).toString()},${o[3]})`}const c=new Set([\"Arial\",\"Times New Roman\",\"Courier New\",\"serif\",\"sans-serif\",\"monospace\",\"cursive\",\"fantasy\",\"system-ui\",\"ui-serif\",\"ui-sans-serif\",\"ui-monospace\",\"ui-rounded\",\"math\",\"emoji\",\"fangsong\"]);export{s as TextRenderParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import s from\"../../../../core/Evented.js\";import\"../../../../core/has.js\";import{disposeMaybe as i,removeMaybe as r}from\"../../../../core/maybe.js\";import{generateUID as h}from\"../../../../core/uid.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as o,s as l}from\"../../../../chunks/vec42.js\";import{ZEROS as _,create as c}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ContentObjectType as d}from\"./ContentObjectType.js\";import{textTextureAtlas as u}from\"./testUtils.js\";import{applyTextureResizeModulo as m}from\"./textureUtils.js\";import{TaskPriority as p}from\"../../../support/Scheduler.js\";import{Yield as g}from\"../../../support/Yield.js\";import{TextureWrapMode as f,TextureSamplingMode as x}from\"../../../webgl/enums.js\";import{Texture as v}from\"../../../webgl/Texture.js\";import{TextureDescriptor as w}from\"../../../webgl/TextureDescriptor.js\";const T=4096;let k=class extends t{constructor(e){super(e),this.type=d.Texture,this.id=h(),this.events=new s,this._glTexture=null,this._atlas=new A(256,256),this._needsRepack=!1,this._canRepack=!0,this._elementsToRender=new Map,this._elements=new Map,this._uvCallbacks=new Map,this.updating=!1}initialize(){this._canvas=document.createElement(\"canvas\"),this._canvas.setAttribute(\"id\",\"textAtlasCanvas\"),this._canvas.setAttribute(\"style\",\"display:none\"),this._ctx=this._canvas.getContext(\"2d\"),this._stage=this.view._stage,this._stage.add(this),this._updateCanvasElementSize(this._atlas),this._reset()}unload(){this._glTexture=i(this._glTexture),this._frameWorker=r(this._frameWorker),this.updating=!1,this.events.emit(\"unloaded\")}get glTexture(){return this._glTexture}static get maxSize(){return j=u.stableRendering?R:0,[T-R-j,T-R-j-y]}load(e){if(this._glTexture)return this._glTexture;const t=new w;return t.wrapMode=f.CLAMP_TO_EDGE,t.samplingMode=x.LINEAR_MIPMAP_LINEAR,t.hasMipmap=!0,t.preMultiplyAlpha=!0,t.maxAnisotropy=e.parameters.maxMaxAnisotropy,this._glTexture=new v(e,t,this._canvas),this._frameWorker=this.view.resourceController.scheduler.registerTask(p.TEXT_TEXTURE_ATLAS,this),this.setDirty(),this._glTexture}dispose(){this._elements.clear(),this._elementsToRender.clear(),this._frameWorker=r(this._frameWorker),this._glTexture&&(this._stage.remove(this),this._glTexture=i(this._glTexture)),this._canvas.width=0,this._canvas.height=0,this._canvas=null,this._ctx=null}_updateCanvasElementSize(e){this._canvas.width=e.width,this._canvas.height=e.height}_resizeAtlas(e,t){const{width:s,height:i}=this._atlas;s===e&&i===t||(this._atlas.width=e,this._atlas.height=t,this._glTexture?.resize(e,t),this._glTexture?.updateData(0,0,0,s,i,this._canvas),this._updateCanvasElementSize(this._atlas),this._elements.forEach((e=>this._uvCallbacks.get(e.textRenderer.key)?.forEach((t=>t(e.uv))))),this._reset())}_reset(){this._elementsToRender.clear(),this._atlas.reset(),this._needsRepack=!0,this.setDirty()}_addAtlasElement(e,t,s,i){const r=this._atlas;if(r.width<s||r.height<i)return!1;let h=r.cursors.get(i);if(!h){if(r.height<r.nextY+i)return!1;h=[new C(r.nextY)],r.cursors.set(i,h),r.nextY+=i}let n=h.find((e=>r.width>=e.x+s));if(null==n){if(r.height<r.nextY+i)return!1;n=new C(r.nextY),r.nextY+=i,h.push(n)}return e.setNewPosition(n),this._elements.set(t,e),this._elementsToRender.set(t,e),n.x+=s,!0}_ensureCallbacks(e){const t=this._uvCallbacks.get(e);if(t)return t;const s=new Set;return this._uvCallbacks.set(e,s),s}_addCallback(e,t){this._ensureCallbacks(e).add(t)}_removeCallback(e,t){const s=this._uvCallbacks.get(e);return!(!s?.delete(t)||0!==s.size)&&(this._uvCallbacks.delete(e),!0)}_processAddition(e){const t=e.textRenderer.key;if(this._needsRepack)return void this._elements.set(t,e);const s=this._atlas,i=e.textRenderer.renderedWidth,r=e.textRenderer.renderedHeight,h=i+R,n=r+R+y;if(!this._addAtlasElement(e,t,h,n)){if(this._canRepack)this._reset();else if(s.width<h){const e=Math.min(m(Math.max(h,1.5*s.width)),T);this._resizeAtlas(e,s.height)}else{const e=s.nextY+n,t=Math.min(m(Math.max(e,1.5*s.height)),T);if(t>s.height)this._resizeAtlas(s.width,t);else if(s.width<T){const e=Math.min(m(1.5*s.width),T);this._resizeAtlas(e,s.height)}}this._elements.set(t,e)}}_renderElement(e){const t=e.commitNewPosition(),s=e.textRenderer;this._ctx.clearRect(t[0]-R,t[1]-R,s.renderedWidth+2*R,s.renderedHeight+2*R),s.render(this._ctx,t[0],t[1]),this._uvCallbacks.get(s.key)?.forEach((t=>t(e.uv)))}get running(){return this.updating}runTask(e){if(null==this._glTexture)return g;for(;this._needsRepack&&(this._canRepack||this._atlas.height<T&&this._atlas.height<T);){this._canRepack=this._needsRepack=!1;const t=this._elements;this._elements=new Map,t.forEach((e=>this._processAddition(e))),e.madeProgress()}if(this._elementsToRender.size>0){for(const[t,s]of this._elementsToRender){if(e.done)break;this._renderElement(s),this._elementsToRender.delete(t),e.madeProgress()}this._glTexture.setData(this._canvas)}this.updating=this._elementsToRender.size>0}addText(e,t){const s=e.key;this._addCallback(s,t);let i=this._elements.get(s);return i?o(i.uv,_)||t(i.uv):(i=new b(this._atlas,e),this._processAddition(i),this.setDirty()),{remove:()=>this._removeText(e,t)}}_removeText(e,t){const s=e.key;this._elements.get(s)&&this._removeCallback(s,t)&&(this._elements.delete(s),this._elementsToRender.delete(s),this._canRepack=!0)}setDirty(){this._glTexture&&(this.updating=!0)}get test(){}};e([n({constructOnly:!0})],k.prototype,\"view\",void 0),e([n({type:Boolean})],k.prototype,\"updating\",void 0),k=e([a(\"esri.views.3d.webgl-engine.lib.TextTextureAtlas\")],k);const R=2,y=2;class b{constructor(e,t){this._atlas=e,this.textRenderer=t,this._uv=c(),this._newPosition=[0,0]}get uv(){if(null==this._xOffset||null==this._yOffset)return _;const{renderedWidth:e,renderedHeight:t}=this.textRenderer;return l(this._uv,this._xOffset/this._atlas.width,(this._yOffset+t)/this._atlas.height,(this._xOffset+e)/this._atlas.width,this._yOffset/this._atlas.height)}setNewPosition(e){this._newPosition[0]=e.x,this._newPosition[1]=e.y}commitNewPosition(){return this._xOffset=this._newPosition[0],this._yOffset=this._newPosition[1],this._newPosition}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}}class A{constructor(e,t){this.width=e,this.height=t,this.cursors=new Map,this.nextY=0}reset(){this.cursors.clear(),this.nextY=j}}class C{constructor(e){this.y=e,this.x=j}}let j=0;export{k as TextTextureAtlas};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/glsl.js\";function r(r,c){c.spherical?r.vertex.code.add(e`vec3 getLocalUp(in vec3 pos, in vec3 origin) {\nreturn normalize(pos + origin);\n}`):r.vertex.code.add(e`vec3 getLocalUp(in vec3 pos, in vec3 origin) {\nreturn vec3(0.0, 0.0, 1.0);\n}`),c.spherical?r.vertex.code.add(e`mat3 getTBNMatrix(in vec3 n) {\nvec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));\nvec3 b = normalize(cross(n, t));\nreturn mat3(t, b, n);\n}`):r.vertex.code.add(e`mat3 getTBNMatrix(in vec3 n) {\nvec3 t = vec3(1.0, 0.0, 0.0);\nvec3 b = normalize(cross(n, t));\nreturn mat3(t, b, n);\n}`)}export{r as NormalUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{markerTextureSize as e,markerSymbolSize as r,markerTipThicknessFactor as i}from\"../views/3d/support/engineContent/marker.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{RibbonVertexPosition as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{OutputHighlight as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{MarkerSizing as n}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js\";import{terrainDepthTest as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as c}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{RgbaFloatEncoding as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\";import{addProjViewLocalOrigin as p,addViewNormal as d,addPixelRatio as v}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2BindUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{Float4BindUniform as h}from\"../views/3d/webgl-engine/core/shaderModules/Float4BindUniform.js\";import{Float4PassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{glsl as u,If as w}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as y}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Texture2DPassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as b}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{LineMarkerSpace as x,LineMarkerAnchor as P}from\"../views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js\";import{outputColorHighlightOID as z}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as j}from\"../views/webgl/ShaderBuilder.js\";function L(L){const k=new j,{space:M,anchor:C,hasTip:D}=L,O=M===x.World;k.include(t,L),k.include(n,L),k.include(s,L);const{vertex:$,fragment:T}=k;T.include(l),p($,L),k.attributes.add(b.POSITION,\"vec3\"),k.attributes.add(b.PREVPOSITION,\"vec3\"),k.attributes.add(b.UV0,\"vec2\"),k.varyings.add(\"vColor\",\"vec4\"),k.varyings.add(\"vpos\",\"vec3\"),k.varyings.add(\"vUV\",\"vec2\"),k.varyings.add(\"vSize\",\"float\"),D&&k.varyings.add(\"vLineWidth\",\"float\"),$.uniforms.add(new m(\"nearFar\",(({camera:e})=>e.nearFar)),new h(\"viewport\",(({camera:e})=>e.fullViewport))),$.code.add(u`vec4 projectAndScale(vec4 pos) {\nvec4 posNdc = proj * pos;\nposNdc.xy *= viewport.zw / posNdc.w;\nreturn posNdc;\n}`),$.code.add(u`void clip(vec4 pos, inout vec4 prev) {\nfloat vnp = nearFar[0] * 0.99;\nif (prev.z > -nearFar[0]) {\nfloat interpolation = (-vnp - pos.z) / (prev.z - pos.z);\nprev = mix(pos, prev, interpolation);\n}\n}`),O?(k.attributes.add(b.NORMAL,\"vec3\"),d($),$.constants.add(\"tiltThreshold\",\"float\",.7),$.code.add(u`vec3 perpendicular(vec3 v) {\nvec3 n = (viewNormal * vec4(normal.xyz, 1.0)).xyz;\nvec3 n2 = cross(v, n);\nvec3 forward = vec3(0.0, 0.0, 1.0);\nfloat tiltDot = dot(forward, n);\nreturn abs(tiltDot) < tiltThreshold ? n : n2;\n}`)):$.code.add(u`vec2 perpendicular(vec2 v) {\nreturn vec2(v.y, -v.x);\n}`);const W=O?\"vec3\":\"vec2\";return $.code.add(u`\n      ${W} normalizedSegment(${W} pos, ${W} prev) {\n        ${W} segment = pos - prev;\n        float segmentLen = length(segment);\n\n        // normalize or zero if too short\n        return (segmentLen > 0.001) ? segment / segmentLen : ${O?\"vec3(0.0, 0.0, 0.0)\":\"vec2(0.0, 0.0)\"};\n      }\n\n      ${W} displace(${W} pos, ${W} prev, float displacementLen) {\n        ${W} segment = normalizedSegment(pos, prev);\n\n        ${W} displacementDirU = perpendicular(segment);\n        ${W} displacementDirV = segment;\n\n        ${C===P.Tip?\"pos -= 0.5 * displacementLen * displacementDirV;\":\"\"}\n\n        return pos + displacementLen * (uv0.x * displacementDirU + uv0.y * displacementDirV);\n      }\n    `),M===x.Screen&&($.uniforms.add(new y(\"inverseProjectionMatrix\",(({camera:e})=>e.inverseProjectionMatrix))),$.code.add(u`vec3 inverseProject(vec4 posScreen) {\nposScreen.xy = (posScreen.xy / viewport.zw) * posScreen.w;\nreturn (inverseProjectionMatrix * posScreen).xyz;\n}`),$.code.add(u`bool rayIntersectPlane(vec3 rayDir, vec3 planeOrigin, vec3 planeNormal, out vec3 intersection) {\nfloat cos = dot(rayDir, planeNormal);\nfloat t = dot(planeOrigin, planeNormal) / cos;\nintersection = t * rayDir;\nreturn abs(cos) > 0.001 && t > 0.0;\n}`),$.uniforms.add(new g(\"perScreenPixelRatio\",(({camera:e})=>e.perScreenPixelRatio))),$.code.add(u`\n      vec4 toFront(vec4 displacedPosScreen, vec3 posLeft, vec3 posRight, vec3 prev, float lineWidth) {\n        // Project displaced position back to camera space\n        vec3 displacedPos = inverseProject(displacedPosScreen);\n\n        // Calculate the plane that we want the marker to lie in. Note that this will always be an approximation since ribbon lines are generally\n        // not planar and we do not know the actual position of the displaced prev vertices (they are offset in screen space, too).\n        vec3 planeNormal = normalize(cross(posLeft - posRight, posLeft - prev));\n        vec3 planeOrigin = posLeft;\n\n        ${w(L.hasCap,\"if(prev.z > posLeft.z) {\\n                vec2 diff = posLeft.xy - posRight.xy;\\n                planeOrigin.xy += perpendicular(diff) / 2.0;\\n             }\")};\n\n        // Move the plane towards the camera by a margin dependent on the line width (approximated in world space). This tolerance corrects for the\n        // non-planarity in most cases, but sharp joins can place the prev vertices at arbitrary positions so markers can still clip.\n        float offset = lineWidth * perScreenPixelRatio;\n        planeOrigin *= (1.0 - offset);\n\n        // Intersect camera ray with the plane and make sure it is within clip space\n        vec3 rayDir = normalize(displacedPos);\n        vec3 intersection;\n        if (rayIntersectPlane(rayDir, planeOrigin, planeNormal, intersection) && intersection.z < -nearFar[0] && intersection.z > -nearFar[1]) {\n          return vec4(intersection.xyz, 1.0);\n        }\n\n        // Fallback: use depth of pos or prev, whichever is closer to the camera\n        float minDepth = planeOrigin.z > prev.z ? length(planeOrigin) : length(prev);\n        displacedPos *= minDepth / length(displacedPos);\n        return vec4(displacedPos.xyz, 1.0);\n      }\n  `)),v($),$.main.add(u`\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      float lineWidth = getLineWidth();\n      float screenMarkerSize = getScreenMarkerSize();\n\n      vec4 pos  = view * vec4(position, 1.0);\n      vec4 prev = view * vec4(prevPosition, 1.0);\n      clip(pos, prev);\n\n      ${O?u`${w(L.hideOnShortSegments,u`\n                if (areWorldMarkersHidden(pos, prev)) {\n                  // Project out of clip space\n                  gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n                  return;\n                }`)}\n            pos.xyz = displace(pos.xyz, prev.xyz, getWorldMarkerSize(pos));\n            vec4 displacedPosScreen = projectAndScale(pos);`:u`\n            vec4 posScreen = projectAndScale(pos);\n            vec4 prevScreen = projectAndScale(prev);\n            vec4 displacedPosScreen = posScreen;\n\n            displacedPosScreen.xy = displace(posScreen.xy, prevScreen.xy, screenMarkerSize);\n            ${w(M===x.Screen,u`\n                vec2 displacementDirU = perpendicular(normalizedSegment(posScreen.xy, prevScreen.xy));\n\n                // We need three points of the ribbon line in camera space to calculate the plane it lies in\n                // Note that we approximate the third point, since we have no information about the join around prev\n                vec3 lineRight = inverseProject(posScreen + lineWidth * vec4(displacementDirU.xy, 0.0, 0.0));\n                vec3 lineLeft = pos.xyz + (pos.xyz - lineRight);\n\n                pos = toFront(displacedPosScreen, lineLeft, lineRight, prev.xyz, lineWidth);\n                displacedPosScreen = projectAndScale(pos);`)}`}\n      forwardViewPosDepth(pos.xyz);\n      // Convert back into NDC\n      displacedPosScreen.xy = (displacedPosScreen.xy / viewport.zw) * displacedPosScreen.w;\n\n      // Convert texture coordinate into [0,1]\n      vUV = (uv0 + 1.0) / 2.0;\n      ${w(!O,\"vUV *= displacedPosScreen.w;\")}\n      ${w(D,\"vLineWidth = lineWidth;\")}\n\n      vSize = screenMarkerSize;\n      vColor = getColor();\n\n      // Use camera space for slicing\n      vpos = pos.xyz;\n\n      gl_Position = displacedPosScreen;\n    }`),k.fragment.include(o,L),k.include(z,L),T.uniforms.add(new f(\"intrinsicColor\",(e=>e.color)),new S(\"tex\",(e=>e.markerTexture))),T.include(c),T.constants.add(\"texelSize\",\"float\",1/e),T.code.add(u`float markerAlpha(vec2 samplePos) {\nsamplePos += vec2(0.5, -0.5) * texelSize;\nfloat sdf = rgbaTofloat(texture(tex, samplePos)) - 0.5;\nfloat distance = sdf * vSize;\ndistance -= 0.5;\nreturn clamp(0.5 - distance, 0.0, 1.0);\n}`),D&&T.constants.add(\"relativeMarkerSize\",\"float\",r/e).constants.add(\"relativeTipLineWidth\",\"float\",i).code.add(u`\n    float tipAlpha(vec2 samplePos) {\n      // Convert coordinates s.t. they are in pixels and relative to the tip of an arrow marker\n      samplePos -= vec2(0.5, 0.5 + 0.5 * relativeMarkerSize);\n      samplePos *= vSize;\n\n      float halfMarkerSize = 0.5 * relativeMarkerSize * vSize;\n      float halfTipLineWidth = 0.5 * max(1.0, relativeTipLineWidth * vLineWidth);\n\n      ${w(O,\"halfTipLineWidth *= fwidth(samplePos.y);\")}\n\n      float distance = max(abs(samplePos.x) - halfMarkerSize, abs(samplePos.y) - halfTipLineWidth);\n      return clamp(0.5 - distance, 0.0, 1.0);\n    }\n  `),k.include(a,L),T.main.add(u`\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n\n    vec4 finalColor = intrinsicColor * vColor;\n\n    // Cancel out perspective correct interpolation if in screen space or draped\n    vec2 samplePos = vUV ${w(!O,\"* gl_FragCoord.w\")};\n    finalColor.a *= ${D?\"max(markerAlpha(samplePos), tipAlpha(samplePos))\":\"markerAlpha(samplePos)\"};\n    outputColorHighlightOID(finalColor, vpos);`),k}const k=Object.freeze(Object.defineProperty({__proto__:null,build:L},Symbol.toStringTag,{value:\"Module\"}));export{k as L,L as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as e,ShaderOutput as i}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as t}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{blending as l,oitDepthTest as n,depthWrite as s,getDrawBuffers as o}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as p}from\"../lib/RenderSlot.js\";import{stencilWriteMaskOn as c,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as a,depthCompareAlways as d,stencilToolTransparentOccluderParams as T,stencilWriteMaskOff as h,stencilToolMaskOccluderParams as m,depthCompareLess as P}from\"../lib/StencilUtils.js\";import{VertexAttribute as f}from\"../lib/VertexAttribute.js\";import{L as O}from\"../../../../chunks/LineMarker.glsl.js\";import{LineMarkerSpace as E}from\"./LineMarkerTechniqueConfiguration.js\";import{SpecialDrawBuffers as R}from\"../../../webgl/enums.js\";import{makePipelineState as _,defaultColorWrite as S,premultipliedAlphaToPremultipliedAlpha as A}from\"../../../webgl/renderState.js\";class W extends r{constructor(e,i){super(e,i,new t(O,(()=>import(\"./LineMarker.glsl.js\"))),b)}_makePipelineState(t,r){const{output:p,oitPass:d,space:T,hasOccludees:h}=t;return _({blending:e(p)?l(d):null,depthTest:T===E.Draped?null:{func:n(d)},depthWrite:s(t),drawBuffers:p===i.Depth?{buffers:[R.NONE]}:o(d,p),colorWrite:S,stencilWrite:h?c:null,stencilTest:h?r?u:a:null,polygonOffset:{factor:0,units:-10}})}initializePipeline(e){return e.occluder?(this._occluderPipelineTransparent=_({blending:A,depthTest:d,depthWrite:null,colorWrite:S,stencilWrite:null,stencilTest:T}),this._occluderPipelineOpaque=_({blending:A,depthTest:d,depthWrite:null,colorWrite:S,stencilWrite:h,stencilTest:m}),this._occluderPipelineMaskWrite=_({blending:null,depthTest:P,depthWrite:null,colorWrite:null,stencilWrite:c,stencilTest:u})):this._occluderPipelineTransparent=this._occluderPipelineOpaque=this._occluderPipelineMaskWrite=null,this._occludeePipelineState=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,i){return e?this._occludeePipelineState:i===p.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent??super.getPipeline():i===p.OCCLUDER_MATERIAL?this._occluderPipelineOpaque??super.getPipeline():this._occluderPipelineMaskWrite??super.getPipeline()}}const b=new Map([[f.POSITION,0],[f.PREVPOSITION,1],[f.UV0,2],[f.NORMAL,3],[f.COLOR,4],[f.COLORFEATUREATTRIBUTE,4],[f.SIZE,5],[f.SIZEFEATUREATTRIBUTE,5],[f.OPACITYFEATUREATTRIBUTE,6]]);export{W as LineMarkerTechnique,b as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{i as e,I as t,t as r}from\"../../../../chunks/vec32.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newLayout as a}from\"../../support/buffer/InterleavedLayout.js\";import{ShaderOutput as s,isColor as n,isDepth as o,isColorHighlightOrDepth as h,isColorOrColorEmission as c}from\"../core/shaderLibrary/ShaderOutput.js\";import{GLTextureMaterial as p}from\"../lib/GLTextureMaterial.js\";import{Material as m,RenderOccludedFlag as l}from\"../lib/Material.js\";import{RenderSlot as u}from\"../lib/RenderSlot.js\";import{VertexAttribute as T}from\"../lib/VertexAttribute.js\";import{VisualVariablePassParameters as d}from\"./VisualVariablePassParameters.js\";import{vertexAttributeLocations as f,LineMarkerTechnique as A}from\"../shaders/LineMarkerTechnique.js\";import{LineMarkerTechniqueConfiguration as _,LineMarkerSpace as v,LineMarkerAnchor as E}from\"../shaders/LineMarkerTechniqueConfiguration.js\";import{CapType as g}from\"../shaders/RibbonLineTechniqueConfiguration.js\";import{alphaCutoff as O}from\"../../../../webscene/support/AlphaCutoff.js\";class S extends m{constructor(e){super(e,I),this._configuration=new _,this.vertexAttributeLocations=f,this.produces=new Map([[u.OPAQUE_MATERIAL,e=>e===s.Highlight||n(e)&&this.parameters.renderOccluded===l.OccludeAndTransparentStencil],[u.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>o(e)],[u.OCCLUDER_MATERIAL,e=>h(e)&&this.parameters.renderOccluded===l.OccludeAndTransparentStencil],[u.TRANSPARENT_OCCLUDER_MATERIAL,e=>h(e)&&this.parameters.renderOccluded===l.OccludeAndTransparentStencil],[u.TRANSPARENT_MATERIAL,e=>n(e)&&this.parameters.writeDepth],[u.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>n(e)&&!this.parameters.writeDepth],[u.DRAPED_MATERIAL,e=>c(e)||e===s.Highlight]]),this._layout=this.createLayout()}getConfiguration(e,t){return this._configuration.output=e,this._configuration.space=t.slot===u.DRAPED_MATERIAL?v.Draped:this.parameters.worldSpace?v.World:v.Screen,this._configuration.hideOnShortSegments=this.parameters.hideOnShortSegments,this._configuration.hasCap=this.parameters.cap!==g.BUTT,this._configuration.anchor=this.parameters.anchor,this._configuration.hasTip=this.parameters.hasTip,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=t.hasOccludees,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.occluder=this.parameters.renderOccluded===l.OccludeAndTransparentStencil,this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest&&c(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}get visible(){return this.parameters.color[3]>=O}intersect(){}createLayout(){const e=a().vec3f(T.POSITION).vec3f(T.PREVPOSITION).vec2f(T.UV0);return this.parameters.worldSpace&&e.vec3f(T.NORMAL),this.parameters.vvSize?e.f32(T.SIZEFEATUREATTRIBUTE):e.f32(T.SIZE),this.parameters.vvColor?e.f32(T.COLORFEATUREATTRIBUTE):e.vec4f(T.COLOR),this.parameters.vvOpacity&&e.f32(T.OPACITYFEATUREATTRIBUTE),e}createBufferWriter(){return new P(this._layout,this.parameters)}createGLMaterial(e){return new R(e)}}class R extends p{constructor(){super(...arguments),this._markerPrimitive=null}dispose(){super.dispose(),this._markerTextures.release(this._markerPrimitive),this._markerPrimitive=null}beginSlot(e){const t=this._material.parameters.markerPrimitive;return t!==this._markerPrimitive&&(this._material.setParameters({markerTexture:this._markerTextures.swap(t,this._markerPrimitive)}),this._markerPrimitive=t),this._material.setParameters(this.textureBindParameters),this.getTechnique(A,e)}}class I extends d{constructor(){super(...arguments),this.width=0,this.color=[1,1,1,1],this.markerPrimitive=\"arrow\",this.placement=\"end\",this.cap=g.BUTT,this.anchor=E.Center,this.hasTip=!1,this.worldSpace=!1,this.hideOnShortSegments=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.markerTexture=null}}class P{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t}elementCount(){return\"begin-end\"===this._parameters.placement?12:6}write(i,a,s,n,o,h){const c=s.get(T.POSITION).data,p=c.length/3;let m=[1,0,0];const l=s.get(T.NORMAL);this._parameters.worldSpace&&null!=l&&(m=l.data);let u=1,d=0;this._parameters.vvSize?d=s.get(T.SIZEFEATUREATTRIBUTE).data[0]:s.has(T.SIZE)&&(u=s.get(T.SIZE).data[0]);let f=[1,1,1,1],A=0;this._parameters.vvColor?A=s.get(T.COLORFEATUREATTRIBUTE).data[0]:s.has(T.COLOR)&&(f=s.get(T.COLOR).data);let _=0;this._parameters.vvOpacity&&(_=s.get(T.OPACITYFEATUREATTRIBUTE).data[0]);const v=new Float32Array(o.buffer);let E=h*(this.vertexBufferLayout.stride/4);const g=(e,t,r,i)=>{if(v[E++]=e[0],v[E++]=e[1],v[E++]=e[2],v[E++]=t[0],v[E++]=t[1],v[E++]=t[2],v[E++]=r[0],v[E++]=r[1],this._parameters.worldSpace&&(v[E++]=m[0],v[E++]=m[1],v[E++]=m[2]),this._parameters.vvSize?v[E++]=d:v[E++]=u,this._parameters.vvColor)v[E++]=A;else{const e=Math.min(4*i,f.length-4);v[E++]=f[e],v[E++]=f[e+1],v[E++]=f[e+2],v[E++]=f[e+3]}this._parameters.vvOpacity&&(v[E++]=_)};let O;!function(e){e[e.ASCENDING=1]=\"ASCENDING\",e[e.DESCENDING=-1]=\"DESCENDING\"}(O||(O={}));const S=(a,s)=>{const n=e(L,c[3*a],c[3*a+1],c[3*a+2]),o=C;let h=a+s;do{e(o,c[3*h],c[3*h+1],c[3*h+2]),h+=s}while(t(n,o)&&h>=0&&h<p);i&&(r(n,n,i),r(o,o,i)),g(n,o,[-1,-1],a),g(n,o,[1,-1],a),g(n,o,[1,1],a),g(n,o,[-1,-1],a),g(n,o,[1,1],a),g(n,o,[-1,1],a)},R=this._parameters.placement;\"begin\"!==R&&\"begin-end\"!==R||S(0,O.ASCENDING),\"end\"!==R&&\"begin-end\"!==R||S(p-1,O.DESCENDING)}}const L=i(),C=i();export{S as LineMarkerMaterial,I as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{i as e}from\"../../../../chunks/vec32.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as i,empty as r,expandWithRect as s,center as o,set as d,toRect as n}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{demResolutionForBoundingBox as h}from\"./graphicUtils.js\";import{Object3DState as c}from\"../../webgl-engine/lib/basicInterfaces.js\";import{DirtyOperation as g,DirtyState as m}from\"../../webgl-engine/lib/ModelDirtyTypes.js\";class l{constructor(e,t,i,r){this.graphics3DSymbolLayer=e,this.renderGeometries=t,this.boundingBox=i,this._drapeSourceRenderer=r,this.type=\"draped\",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(e){this.stage=e.stage}setVisibility(e){if(null!=this.stage&&this._visible!==e){if(this._visible=e,e&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,g.ADD);if(e||this._addedToStage){for(const e of this.renderGeometries)e.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,m.VISIBILITY)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,g.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(i=t()){return e(i,0,0,0)}getBoundingBoxObjectSpace(e=i()){return r(e)}addObjectState(e){e.stateType===c.Highlight&&(this.renderGeometries.forEach((t=>{const i=t.geometry.allocateIdAndHighlight(e.highlightName);e.addRenderGeometry(t,i,this)})),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,m.HIGHLIGHT))}removeObjectState(e){this.renderGeometries.forEach((t=>e.removeByObject(t)))}updateHighlights(e){}removeRenderGeometryObjectState(e,t){t.channel===c.Highlight&&(e.geometry.removeHighlight(t),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries([e],m.HIGHLIGHT))}computeAttachmentOrigin(e){for(const t of this.renderGeometries)t.geometry.computeAttachmentOrigin(f)&&(e.draped.origin[0]+=f[0],e.draped.origin[1]+=f[1],e.draped.num++)}async getProjectedBoundingBox(e,t,i,d,n){r(n);for(let r=0;r<this.renderGeometries.length;r++){const t=this.renderGeometries[r];this._getRenderGeometryProjectedBoundingRect(t,e,u,i),s(n,u)}if(t){let e;o(n,f);const i=h(n,t.service.spatialReference,t);try{e=await t.service.queryElevation(f[0],f[1],d,i,\"ground\")}catch(a){}null!=e&&(n[2]=Math.min(n[2],e),n[5]=Math.max(n[5],e))}return n}_getRenderGeometryProjectedBoundingRect(e,t,i,r){if(this.boundingBox)d(p,this.boundingBox);else{const t=e.boundingSphere,i=t[3];p[0]=t[0]-i,p[1]=t[1]-i,p[2]=t[2]-i,p[3]=t[0]+i,p[4]=t[1]+i,p[5]=t[2]+i}return t(p,0,2),this.calculateRelativeScreenBounds&&r.push({location:o(p),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),n(p,i)}}const u=a(),p=i(),f=t();export{l as Graphics3DDrapedGraphicLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{result as t,createTask as r}from\"../../../../core/asyncUtils.js\";import i from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import{clone as s}from\"../../../../core/lang.js\";import{abortMaybe as o,releaseMaybe as a}from\"../../../../core/maybe.js\";import{throwIfAbortError as n,throwIfAborted as l}from\"../../../../core/promiseUtils.js\";import{pt2px as c,px2pt as h}from\"../../../../core/screenUtils.js\";import{numericHash as u}from\"../../../../core/string.js\";import{dataComponents as m}from\"../../../../core/urlUtils.js\";import{fromValues as d,create as p}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as _,fromValues as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as y}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectPointToVector as g}from\"../../../../geometry/projection/projectPointToVector.js\";import{containsPoint as x}from\"../../../../geometry/support/aaBoundingBox.js\";import{createRendererExpression as b}from\"../../../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as v}from\"../../../../symbols/cim/CIMSymbolHelper.js\";import{evaluateValueOrFunction as S}from\"../../../../symbols/cim/utils.js\";import{scaleCIMSymbol as P}from\"../../../../symbols/support/cimSymbolUtils.js\";import{defaultPrimitive as R}from\"../../../../symbols/support/IconSymbol3DLayerResource.js\";import{Symbol3DAnchorPosition2D as w}from\"../../../../symbols/support/Symbol3DAnchorPosition2D.js\";import{getIconHref as C}from\"../../../../symbols/support/utils.js\";import{focusAreaHUDColor as z}from\"../../../FocusAreas.js\";import{transparentUnit as O}from\"./constants.js\";import{perObjectElevationAligner as j}from\"./ElevationAligners.js\";import{SymbolUpdateType as M,elevationModeChangeUpdateType as I,needsElevationUpdates2D as T}from\"./elevationAlignmentUtils.js\";import{Graphics3DDrapedGraphicLayer as E}from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as D}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as F}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as A}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as U}from\"./interfaces.js\";import{namedAnchorToHUDMaterialAnchorPos as L}from\"./placementUtils.js\";import{placePointOnGeometry as G,updateStageObjectGeometry as V,getLocalOriginForPoint as H,extendPointGraphicElevationContext as k,createStageObject as B}from\"./pointUtils.js\";import{initFastSymbolUpdatesState as N,updateFastSymbolUpdatesState as $,evaluateModelTransformScale as W,ConvertOptions as q}from\"../support/FastSymbolUpdates.js\";import{createTexture as J,requiresHalfTexelOffset as Z,defaultBoundingBox as K,defaultSymbolSizeRatio as Q,defaultTexSize as X}from\"../../support/engineContent/sdfPrimitives.js\";import{drapedZ as Y}from\"../../terrain/OverlayRenderer.js\";import{createPointGeometry as ee}from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderGeometry as te}from\"../../webgl-engine/lib/RenderGeometry.js\";import{Texture as re}from\"../../webgl-engine/lib/Texture.js\";import{HUDMaterial as ie}from\"../../webgl-engine/materials/HUDMaterial.js\";const se=f(0,0,1),oe=16,ae=1.5,ne=[X*Q,X*Q];class le extends F{getCachedSize(){return{size:this._getIconSize()}}constructor(e,t,r,i){super(e,t,r,i),this._cimData=null,this._overrideHelperClass=null,this._arcadeInfo=null,this._cimSymbolMaterials=new Map,this._cimSymbolTextures=new Map,this._cimMaterialParametersInfo=null,this._cimScaleFactorOrFunction=null,this._size=null,this._symbolTextureRatio=1,this._outlineSize=0,this._textureHandle=null,this._patchTask=null,this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!0}}async doLoad(e){this._validateOrThrow();const t=this._prepareMaterialParameters(),r=this._getPrimitive();if(null!=r)this._prepareResourcesPrimitive(t,r);else{const r=C(this.symbolLayer),i=ue(r);null!=i?await this._prepareResourcesCIM(t,JSON.parse(i),e):await this._prepareResourcesHref(t,r,e)}}_validateOrThrow(){if(this._drivenProperties.size)return;const e=A(this._getIconSize());if(e)throw new i(\"graphics3diconsymbollayer:invalid-size\",e)}_getIconSize(){const e=this.symbolLayer,t=Math.round(null!=e.size?c(e.size):oe);return this._drivenProperties.size?Math.max(t,64):t}_generateTextureCIM(e){const t=this._overrideHelperClass;let r=this._cimData;if(t&&r&&r.symbol||this.logger.error(\"Can't create texture, CIM data is undefined\"),r.primitiveOverrides){r=s(r);const i=r.primitiveOverrides;t.evaluateOverrides(i,e,this._arcadeInfo.geometryType,null,null),t.applyOverrides(r.symbol,i)}const i=u(JSON.stringify(r));let o=this._cimSymbolTextures.get(i);if(o)return o;const a=this._context.sharedResources.cimSymbolRasterizer,n=this._context.renderer&&\"dictionary\"===this._context.renderer.type?this._context.renderer.fieldMap:null;n&&t.applyDictionaryTextOverrides(r.symbol,e,n,null);const l=null!=this._cimScaleFactorOrFunction?S(this._cimScaleFactorOrFunction,e):1;1!==l&&r.symbol&&P(r.symbol,l,!0);const c=v.getEnvelope(r,null,a.resourceManager);if(c?.width&&c.height){const e=c.x+c.width/2,t=c.y+c.height/2,i=a.rasterize({type:\"cim\",data:r},c.width,c.height,e,t,1,\"esriGeometryPoint\",0,null,this._context.graphicsCoreOwner.view.state.rasterPixelRatio),s=new w({x:-c.x/c.width-.5,y:(c.height+c.y)/c.height-.5});this._cimMaterialParametersInfo.anchorPosition=me(\"relative\",s),o=new re(i,{width:i?.width??1,height:i?.height??1,reloadable:!0})}else o=new re(new ImageData(1,1),{width:1,height:1,reloadable:!0});return this._cimSymbolTextures.set(i,o),this._context.stage.add(o),o}_prepareMaterialParameters(){const e={anchorPosition:me(this.symbolLayer.anchor,this.symbolLayer.anchorPosition),rotation:this.symbolLayer.angle},t=this.symbol;if(ce(t)){const{screenLength:r,minWorldLength:i,maxWorldLength:s}=t.verticalOffset;e.verticalOffset={screenLength:c(r),minWorldLength:i||0,maxWorldLength:null!=s?s:1/0}}this._context.screenSizePerspectiveEnabled&&(e.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),(0!==e.rotation||this._drivenProperties.rotation)&&(e.hasRotation=!0);const r=!!has(\"enable-feature:non-occluded-hud\");return e.occlusionTest=!r,e.occludedFragmentFade=r,e.horizonCullingEnabled=r&&this._context.spherical,e.hasSlicePlane=this._context.slicePlaneEnabled,e}_prepareResourcesPrimitive(e,t){const r=this._getOutlineSize();if(he(t)&&0===r)throw new Error(\"Nothing to render\");if(this._outlineSize=r,e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,null!=this._context.sharedResources.textures){const r=this._context.sharedResources.textures.fromData(`${t}-icon`,(()=>J(t)));this._textureHandle=r,e.textureId=r.texture.id}e.textureIsSignedDistanceField=!0,e.sampleSignedDistanceFieldTexelCenter=Z(t),e.distanceFieldBoundingBox=K;const i=this._getIconSize();this._size=[i,i],this._symbolTextureRatio=1/Q,this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesHref(e,r,s){this._outlineSize=this._getOutlineSize(),e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,e.textureIsSignedDistanceField=!1;const o=this._getIconSize(),a=o*this._context.graphicsCoreOwner.view.state.rasterPixelRatio;if(null!=this._context.sharedResources.textures){const l=await t(this._context.sharedResources.textures.fromUrl(r,a,{signal:s}));if(!1===l.ok){n(l.error);throw new i(\"graphics3diconsymbollayer:request-failed\",`Failed to load (Request for icon resource failed: ${r})`)}this._textureHandle=l.value;const c=l.value.texture;this._size=de(c,o),e.textureId=c.id}this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesCIM(e,t,r){const{OverrideHelper:i}=await import(\"../../../../symbols/cim/OverrideHelper.js\");if(this._overrideHelperClass=i,this._cimData=t,!this._context.sharedResources.cimSymbolRasterizer){const e=(await import(\"../../../../symbols/cim/CIMSymbolRasterizer.js\")).CIMSymbolRasterizer;l(r),this._context.sharedResources.cimSymbolRasterizer||(this._context.sharedResources.cimSymbolRasterizer=new e(this._context.renderCoordsHelper.spatialReference))}const s=this._context.sharedResources.cimSymbolRasterizer,o=[],a=t,n=a?.symbol;v.fetchResources(n,s.resourceManager,o,r),v.fetchFonts(n,s.resourceManager,o);const c=this._context.layer.fields?this._context.layer.fields.map((e=>e.toJSON())):[],h=this._context.renderCoordsHelper.spatialReference;if(this._arcadeInfo={spatialReference:h,fields:c,geometryType:\"esriGeometryPoint\"},a?.primitiveOverrides&&o.push(i.createRenderExpressions(a.primitiveOverrides,this._arcadeInfo)),o.length>0&&(await Promise.all(o),l(r)),this._context.renderer&&\"dictionary\"===this._context.renderer.type&&this._context.renderer.scaleExpression){const e=this._context.renderer;if(e.scaleExpression){const t=e.scaleExpression,r=await b(t,this._context.layer.spatialReference,c),{default:i}=await import(\"../../../2d/arcade/callExpressionWithFeature.js\");this._cimScaleFactorOrFunction=(e,t,s)=>{const o=i(r,e,{$view:s},\"esriGeometryPoint\",t);return null!==o?o:1}}}l(r),this._cimMaterialParametersInfo=e,this._cimMaterialParametersInfo.color=this._getFillColor(),this._cimMaterialParametersInfo.outlineColor=[0,0,0,0],this._cimMaterialParametersInfo.outlineSize=0,this._cimMaterialParametersInfo.textureIsSignedDistanceField=!1}_getPrimitive(){return this.symbolLayer.resource?.href?null:this.symbolLayer.resource?.primitive??R}_getOutlineSize(){let e=0;const t=this.symbolLayer;if(null!=t.outline?.size)return Math.max(c(t.outline.size),0);return e=he(this._getPrimitive())?ae:0,Math.max(e,0)}_getOutlineColor(){const t=this._getLayerOpacity(),r=this.symbolLayer,i=r?.outline?.color;if(null!=i){const r=e.toUnitRGB(i),s=i.a*t;return[r[0],r[1],r[2],s]}return[0,0,0,0]}_getFillColor(){if(he(this._getPrimitive()))return O;const e=null==this._getPrimitive(),t=this.symbolLayer?.material?.color;return this._getCombinedOpacityAndColor(t,{hasIntrinsicColor:e})}_createMaterialAndAddToStage(e,t){const r=this._context.spherical;if(this._cimData){this._fastUpdates=null;let i=e.textureId?this._cimSymbolMaterials.get(e.textureId):null;return i||(i=new ie(e,r),this._cimSymbolMaterials.set(e.textureId??0,i),t.add(i)),i}if(this._fastUpdates=N(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates&&(e={...e,...this._fastUpdates.materialParameters}),this._materials[0]=new ie(e,r),t.add(this._materials[0]),this._context.graphicsCoreOwner.view.focusAreas.activePolygons.length>0){e.isFocused=!1;const i=this._context.stage.view.focusAreas.style;e.color=z(e.color,i),e.outlineColor=z(e.outlineColor,i),this._materials[1]=new ie(e,r),t.add(this._materials[1])}return this._materials[0]}_setDrapingDependentMaterialParameters(){this.draped&&(this._forEachMaterial((e=>{e.setParameters({verticalOffset:null,screenSizePerspective:null,occlusionTest:!1,hasSlicePlane:!1,shaderPolygonOffset:0,draped:this.draped})})),this.layerOpacityChanged())}destroy(){super.destroy(),this._patchTask=o(this._patchTask),this._forEachMaterial((e=>this._context.stage.remove(e))),this._materials.length=0,this._cimSymbolMaterials.clear(),this._cimSymbolTextures.forEach((e=>this._context.stage.remove(e))),this._cimSymbolTextures.clear(),this._textureHandle=a(this._textureHandle)}_getScaleFactor(e,t){if(this._drivenProperties.size&&e.size){const r=Array.from(e.size);for(let e=0;e<3;e++){const t=r[e];t&&\"symbol-value\"!==t&&\"proportional\"!==t&&(r[e]=c(t))}if(\"symbol-value\"===r[0])return 1;if(isFinite(+r[0]))return+r[0]/t;if(isFinite(+r[2]))return+r[2]/t}return 1}_getDrivenRotation(e){return this._drivenProperties.rotation?e.heading??0:0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;let r,i=[0,0];const s=G(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`),null;const o=this._context.stage.view.focusAreas.containsGeometry(s);if(this._cimData){if(!this._cimData.symbol)return null;const e=this._generateTextureCIM(t),s={textureId:e.id,isFocused:o,...this._cimMaterialParametersInfo};r=this._createMaterialAndAddToStage(s,this._context.stage);const a=this._context.graphicsCoreOwner.view.state.rasterPixelRatio;i=[e.parameters.width/a,e.parameters.height/a]}else i=this._size,r=o||1===this._materials.length?this._materials[0]:this._materials[1];if(null==s)return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`),null;const a=e.renderingInfo,n=this._getVertexOpacityAndColor(a),l=this._getDrivenRotation(a);let c=1;if(!this._fastUpdates?.visualVariables.size){const e=i[0]>i[1]?i[0]:i[1];c=this._getScaleFactor(a,e)}c*=this._symbolTextureRatio;const h=d(i[0]*c,i[1]*c),u=this.setGraphicElevationContext(t);return this.ensureDrapedStatus(\"on-the-ground\"===u.mode)&&this._setDrapingDependentMaterialParameters(),this.draped?this._createAsOverlay(t,s,r,n,l,h,e.layer.uid):this._createAs3DShape(t,s,r,n,l,h,u,t.uid)}layerOpacityChanged(){const e=this._getFillColor(),t=this._getOutlineColor();this._forEachMaterial((r=>{r.setParameters({color:e}),r.setParameters({outlineColor:t})}))}updateGeometry(e,t){if(this.draped||!this._validateGeometry(t))return!1;const{elevationContext:r,stageObject:i}=e;if(r.mode!==this.getGeometryElevationMode(t))return!1;const s=G(t);if(!s)return!1;const o=V(i,this._context,s,r);if(null==o)return!1;const a=H(this._context,s);return i.geometries[0].localOrigin===a&&(e.alignedSampledElevation=o,k(e,s,this._context.elevationProvider),!0)}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,s=I(le.elevationModeChangeTypes,r,i);if(s!==M.UPDATE)return s;const o=T(i)||\"absolute-height\"===i;return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>o))}slicePlaneEnabledChanged(){return this.draped||this._forEachMaterial((e=>{e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),!0}physicalBasedRenderingChanged(){return!0}get pixelRatioChanged(){return null!=this._getPrimitive()}applyRendererDiff(e,t){for(const r in e.diff){if(\"visualVariables\"!==r)return U.RecreateSymbol;if(!$(this._fastUpdates,t,this._fastVisualVariableConvertOptions()))return U.RecreateSymbol;this._materials[0]?.setParameters(this._fastUpdates.materialParameters)}return U.FastUpdate}updateFocus(e,t){t.forEach((t=>{const r=this._context.stage.view.focusAreas.containsGeometry(t.graphic.geometry);t.layers.forEach((i=>{if(i?.graphics3DSymbolLayer===this){i.stageObject.geometries.some((e=>e.material.parameters.isFocused!==r))&&e(t)}}))}))}prepareSymbolLayerPatch(e){if(this._patchTask?.abort(),\"partial\"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchResource(e,t),this._preparePatchRotation(e,t)}_preparePatchResource(e,s){if(!s.resource||\"partial\"!==s.resource.type)return;const c=s.resource.diff;if(\"complete\"!==c?.href?.type)return;const h=c.href.newValue,{textures:u}=this._context.sharedResources;if(null==h||null==u||null!=ue(h))return;const m=this._getIconSize(),d=m*this._context.graphicsCoreOwner.view.state.pixelRatio;e.symbolLayerStatePatches.push((()=>{this._patchTask=o(this._patchTask),this._patchTask=r((e=>this._context.schedule((async(e,r)=>{const s=await t(u.fromUrl(h,d,{signal:r}));l(r);const o=!s.ok;if(o&&n(s.error),this._textureHandle=a(this._textureHandle),this._patchTask=null,o){this._forEachMaterial((e=>{e.visible=!1,e.setParameters({textureId:null})}));const e=`Failed to load (Request for icon resource failed: ${h})`;return void this.logger.error(new i(\"graphics3diconsymbollayer:request-failed\",e))}this._textureHandle=s.value;const c=s.value.texture;this._size=de(c,m),this._forEachMaterial((e=>{e.setParameters({textureId:c.id}),e.visible=!0}))}),e)))})),delete c.href}_preparePatchRotation(e,t){if(!t.angle||\"complete\"!==t.angle.type)return;const r=t.angle.newValue??0,i=0!==r||this._drivenProperties.rotation;e.symbolLayerStatePatches.push((()=>{this._forEachMaterial((e=>e.setParameters({rotation:r,hasRotation:i})))})),delete t.angle}_defaultElevationInfoNoZ(){return pe}_createAs3DShape(e,t,r,i,s,o,a,n){const l=this.getFastUpdateAttrValues(e),c=this._context.layer.uid,h=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:n,layerUid:c}),u=ee(r,{normal:se,color:i,rotation:s,size:o,centerOffsetAndDistance:_e,featureAttribute:l,objectAndLayerIdColor:h}),m=B(this._context,t,u,a,n);if(null==m)return null;const d=new D(this,m.object,[u],null,null,j,a);return d.alignedSampledElevation=m.sampledElevation,d.needsElevationUpdates=T(a.mode)||\"absolute-height\"===a.mode,d.getScreenSize=this._createScreenSizeGetter(o,l),d.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(d.getScreenSize(),1,e),k(d,t,this._context.elevationProvider),d}_createAsOverlay(e,t,r,i,s,o,a){r.renderPriority=this._renderPriority;const n=_();g(t,n,this._context.overlaySR),n[2]=Y;const l=this._context.clippingExtent;if(null!=l&&!x(l,n))return null;const c=this.getFastUpdateAttrValues(e),h=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:e.uid,layerUid:this._context.layer.uid}),u=ee(r,{normal:se,position:n,color:i,rotation:s,size:o,featureAttribute:c,objectAndLayerIdColor:h}),m=new te(u,{layerUid:a,graphicUid:e.uid}),d=new E(this,[m],null,this._context.drapeSourceRenderer);return d.getScreenSize=this._createScreenSizeGetter(o,c),d.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(d.getScreenSize(),1,e),d}_createScreenSizeGetter(e,t){const r=this._outlineSize+2;if(this._fastUpdates&&t){const i=e[0]/this._symbolTextureRatio,s=e[1]/this._symbolTextureRatio;return(e=p())=>{const[o,a]=W(fe,this._fastUpdates.materialParameters,t);return e[0]=o*i+r,e[1]=a*s+r,e}}const i=e[0]/this._symbolTextureRatio+r,s=e[1]/this._symbolTextureRatio+r;return(e=p())=>(e[0]=i,e[1]=s,e)}_fastVisualVariableConvertOptions(){const e=Math.max(this._size[0],this._size[1]),t=f(e,e,e),r=h(1),i=e*r,s=f(i,i,i);return new q({size:!0,color:!0,rotation:!0,opacity:!1},t,s,r)}_forEachMaterial(e){this._materials.forEach(e),this._cimSymbolMaterials.forEach(e)}test(){return{...super.test(),material:this._materials[0]}}}function ce(e){return e&&\"point-3d\"===e.type&&e.hasVisibleVerticalOffset()}function he(e){return null!=e&&(\"cross\"===e||\"x\"===e)}function ue(e){const t=m(e);return\"application/json\"===t?.mediaType?t.data:void 0}function me(e,t){return\"relative\"===e?d((t.x||0)+.5,.5-(t.y||0)):e in L?L[e]:L.center}function de({parameters:e},t){const r=(e.width??1)/(e.height??1);return r>1?[t,Math.round(t/r)]:[Math.round(t*r),t]}le.PRIMITIVE_SIZE=ne,le.elevationModeChangeTypes={definedChanged:M.UPDATE,staysOnTheGround:M.NONE,onTheGroundChanged:M.RECREATE};const pe={mode:\"relative-to-ground\",offset:0},_e=y(0,0,0,1),fe=_();export{le as Graphics3DIconSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{CapType as e}from\"../../webgl-engine/shaders/RibbonLineTechniqueConfiguration.js\";function n(n){switch(n){case\"butt\":return e.BUTT;case\"square\":return e.SQUARE;case\"round\":return e.ROUND;default:return null}}function r(e){return\"diamond\"===e?\"kite\":e}export{n as parseCapType,r as parseLineMarkerStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{px2pt as t,pt2px as r}from\"../../../../core/screenUtils.js\";import{fromValues as i,clone as a}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import s from\"../../../../geometry/Extent.js\";import n from\"../../../../geometry/Polygon.js\";import{create as o,fromBuffer as l,intersectsClippingArea as h,empty as m,expandWithAABB as p,expandWithBuffer as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{getDriverAxisSizeValueAny as d}from\"../../../../renderers/support/renderingInfoUtils.js\";import{sharedGeometryElevationAligner as y}from\"./ElevationAligners.js\";import{SymbolUpdateType as u,elevationModeChangeUpdateType as _,needsElevationUpdates2D as g}from\"./elevationAlignmentUtils.js\";import{Graphics3DDrapedGraphicLayer as f}from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as b}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as M}from\"./Graphics3DSymbolLayer.js\";import{ApplyRendererDiffResult as L}from\"./interfaces.js\";import{parseCapType as E,parseLineMarkerStyle as P}from\"./lineUtils.js\";import{initFastSymbolUpdatesState as v,updateFastSymbolUpdatesState as C,getAttributeValue as R,ConvertOptions as w}from\"../support/FastSymbolUpdates.js\";import{debugFlags as x}from\"../../support/debugFlags.js\";import{createGeometry as D}from\"../../support/engineContent/line.js\";import{geometryToRenderInfo as k,geometryToRenderInfoDraped as j}from\"../../support/renderInfoUtils/line.js\";import{Object3D as S}from\"../../webgl-engine/lib/Object3D.js\";import{RenderGeometry as A}from\"../../webgl-engine/lib/RenderGeometry.js\";import{LineMarkerMaterial as U}from\"../../webgl-engine/materials/LineMarkerMaterial.js\";import{getStipplePatternForLinePattern as z}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{RibbonLineMaterial as W}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";const G=[\"polyline\",\"polygon\",\"extent\"],O=new w({size:!0,color:!0,rotation:!1,opacity:!0});class V extends M{constructor(e,t,r,i){super(e,t,r,i)}async doLoad(){if(this._fastUpdates=v(this._context.renderer,O),!this._drivenProperties.size){if((null!=this.symbolLayer.size?this.symbolLayer.size:t(1))<0)throw new e(\"graphics3dlinesymbollayer:invalid-size\",\"Symbol sizes may not be negative values\")}}_getMaterialParameters(e,t=!1){const r=this._getCombinedOpacityAndColor(t&&this._markerColor||this._materialColor);this._patternHidesLine&&!t&&(r[3]=0);const i={width:this._computeMaterialWidth(this.symbolLayer?.size),color:r,hasPolygonOffset:!0,join:this.symbolLayer.join||\"miter\",cap:E(this.symbolLayer.cap||\"butt\"),hasSlicePlane:this._context.slicePlaneEnabled,isClosed:e,stipplePattern:z(this.symbolLayer.pattern)};return this._fastUpdates?.visualVariables?{...i,...this._fastUpdates.materialParameters}:i}get _materialColor(){return this.symbolLayer.material?.color}get _markerColor(){return this.symbolLayer.marker?.color}get _lineMaterial(){return null==this._materials[H.Line]&&(this._materials[H.Line]=new W(this._getMaterialParameters(!1)),this._context.stage.add(this._materials[H.Line])),this._materials[H.Line]}get _ringMaterial(){return null==this._materials[H.Ring]&&(this._materials[H.Ring]=new W(this._getMaterialParameters(!0)),this._context.stage.add(this._materials[H.Ring])),this._materials[H.Ring]}get _wireframeLineMaterial(){return null==this._materials[H.LineWireframe]&&(this._materials[H.LineWireframe]=new W({...this._getMaterialParameters(!1),wireframe:!0}),this._context.stage.add(this._materials[H.LineWireframe])),this._materials[H.LineWireframe]}get _wireframeRingMaterial(){return null==this._materials[H.RingWireframe]&&(this._materials[H.RingWireframe]=new W({...this._getMaterialParameters(!0),wireframe:!0}),this._context.stage.add(this._materials[H.RingWireframe])),this._materials[H.RingWireframe]}get _markerMaterial(){return null==this._materials[H.Marker]&&null!=this.symbolLayer.marker&&(this._materials[H.Marker]=new U({...this._getMaterialParameters(!1,!0),placement:this.symbolLayer.marker.placement,markerPrimitive:P(this.symbolLayer.marker.style)}),this._context.stage.add(this._materials[H.Marker])),this._materials[H.Marker]}destroy(){super.destroy(),this._forEachMaterial((e=>this._context.stage.remove(e))),this._materials.length=0}_getDrivenSize(e){return this._drivenProperties.size&&e.size?r(d(e.size)):1}_getDrivenColor(e){const t=i(1,1,1,1);return this._drivenProperties.color&&e.color&&(t[0]=e.color[0],t[1]=e.color[1],t[2]=e.color[2],e.color.length>0&&(t[3]=e.color[3])),this._drivenProperties.opacity&&e.opacity&&(t[3]=e.opacity),t}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,G,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus(\"on-the-ground\"===r.mode),this.draped?this._createAsOverlay(e,this._context.layer.uid):this._createAs3DShape(e,r,t.uid)}applyRendererDiff(e,t){for(const r in e.diff){if(\"visualVariables\"!==r)return L.RecreateSymbol;{const e=this._fastUpdates;if(!C(e,t,O))return L.RecreateSymbol;this._forEachMaterial((t=>t?.setParameters(e.materialParameters)))}}return L.FastUpdate}prepareSymbolLayerPatch(e){if(\"partial\"!==e.diff.type)return;const t=e.diff.diff,r={};\"complete\"===t.size?.type&&(r.width=this._computeMaterialWidth(t.size.newValue),delete t.size),\"complete\"===t.cap?.type&&(r.cap=E(t.cap.newValue??\"butt\"),delete t.cap);const i=this._prepareMarkerPatch(e,t);this._prepareMaterialPatch(e,t,i),e.symbolLayerStatePatches.push((()=>this._forEachMaterial((e=>e?.setParameters(r)))))}layerOpacityChanged(){this._forEachMaterial(((e,t)=>this._updateMaterialLayerOpacity(e,t===H.Marker)))}_forEachMaterial(e){this._materials.forEach(e)}_updateMaterialLayerOpacity(e,t=!1){if(null==e)return;const r=e.parameters.color,a=this.symbolLayer?.material?.color,s=this._patternHidesLine&&!t?0:this._getCombinedOpacity(a),n=i(r[0],r[1],r[2],s);e.setParameters({color:n})}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,a=_(V.elevationModeChangeTypes,r,i);if(a!==u.UPDATE)return a;const s=g(i);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>s))}slicePlaneEnabledChanged(){const e={hasSlicePlane:this._context.slicePlaneEnabled};return this._forEachMaterial((t=>t?.setParameters(e))),!0}physicalBasedRenderingChanged(){return!0}_createAs3DShape(e,t,r){const i=I(e.graphic.geometry),a=\"polygon\"===i.type?i.rings:i.paths,s=new Array,n=o(),m=k(i,this._context.elevationProvider,this._context.renderCoordsHelper,t),p=\"polygon\"===i.type?\"rings\":\"paths\";this._logGeometryCreationWarnings(m,a,p,\"LineSymbol3DLayer\");for(let o=0;o<m.lines.length;o++){const t=m.lines[o],a=t.position,p=t.mapPositions;if(null!=this._context.clippingExtent&&(l(p,n),!h(n,this._context.clippingExtent)))continue;const c=this._createGeometry(\"polygon\"===i.type?this._ringMaterial:this._lineMaterial,e,a,p,i.type,F.ELEVATED,r);s.push(c),x.LINE_WIREFRAMES&&s.push(c.instantiate({material:\"polygon\"===i.type?this._wireframeRingMaterial:this._wireframeLineMaterial})),null!=this._markerMaterial&&s.push(c.instantiate({material:this._markerMaterial}))}if(0===s.length)return null;const c=new S({geometries:s,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:r}),d=new b(this,c,s,null,null,y,t);return d.alignedSampledElevation=m.sampledElevation,d.needsElevationUpdates=g(t.mode),d}_createGeometry(e,t,r,i,a,s,n){const o=s===F.DRAPED?{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper}:null,l=\"polygon\"===a,h=this._fastUpdates?.visualVariables.color,m=this._fastUpdates?.visualVariables.size,p=this._fastUpdates?.visualVariables.opacity,c=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:n,layerUid:this._context.layer.uid}),d={position:r,size:m?null:this._getDrivenSize(t.renderingInfo),color:h?null:this._getDrivenColor(t.renderingInfo),sizeFeature:m?R(m.field,t.graphic):null,colorFeature:h?R(h.field,t.graphic):null,opacityFeature:p?R(p.field,t.graphic):null};return D(e,{overlayInfo:o,removeDuplicateStartEnd:l,mapPositions:i,attributeData:d},c)}_createAsOverlay(e,t){const r=e.graphic,i=I(r.geometry),a=\"polygon\"===i.type?i.rings:i.paths,s=\"polygon\"===i.type?this._ringMaterial:this._lineMaterial;s.renderPriority=this._renderPriority;const n=x.LINE_WIREFRAMES?\"polygon\"===i.type?this._wireframeRingMaterial:this._wireframeLineMaterial:null,d=this._markerMaterial;null!=n&&(n.renderPriority=this._renderPriority-.001),null!=d&&(d.renderPriority=this._renderPriority-.002);const y=new Array,u=o(),_=m(),g=j(i,this._context.overlaySR),b=\"polygon\"===i.type?\"rings\":\"paths\";this._logGeometryCreationWarnings(g,a,b,\"LineSymbol3DLayer\");for(const o of g.lines){if(l(o.position,u),!h(u,this._context.clippingExtent))continue;p(_,u);const a=a=>{const s=this._createGeometry(a,e,o.position,void 0,i.type,F.DRAPED,r.uid),n=new A(s,{layerUid:t,graphicUid:r.uid});y.push(n)};if(null!=d){a(d);const e=this.symbolLayer.marker.placement;\"begin\"!==e&&\"begin-end\"!==e||c(u,o.position,0,1),\"end\"!==e&&\"begin-end\"!==e||c(u,o.position,o.position.length-3,1)}a(s),x.LINE_WIREFRAMES&&a(n)}return new f(this,y,_,this._context.drapeSourceRenderer)}get _patternHidesLine(){const e=this.symbolLayer.pattern;return null!=e&&\"style\"===e.type&&\"none\"===e.style}_computeMaterialWidth(e){return e=e??t(1),this._drivenProperties.size?this._fastUpdates?.visualVariables.size?r(1):1:r(e)}_prepareMaterialPatch(e,t,r){const i=t.material;if(null==i)return void(r.changed&&r.useMaterialColor&&T(this._getCombinedOpacityAndColor(this._materialColor),this._materials[H.Marker],e));if(\"collection\"===i.type)return;const s=\"complete\"===i.type?i.newValue?.color:\"complete\"===i.diff.color?.type?i.diff.color.newValue:null,n=this._getCombinedOpacityAndColor(s);r.useMaterialColor&&T(a(n),this._materials[H.Marker],e),this._patternHidesLine&&(n[3]=0),T(n,this._materials[H.Line],e),delete t.material}_prepareMarkerPatch(e,t){const r=t.marker,i=this._markerMaterial;if(null==r||\"partial\"!==r.type||null==r.diff||null!=r.diff.placement||null!=r.diff.style&&\"complete\"!==r.diff.style.type||null!=r.diff.color&&\"complete\"!==r.diff.color.type||null==i)return{changed:!1,useMaterialColor:null==this._markerColor};const a=r.diff.color,s=null!=a,n=s?a.newValue:null,o=null==n&&null==this._markerColor;n&&T(this._getCombinedOpacityAndColor(n),i,e);const l=r.diff.style?.newValue;return l&&e.symbolLayerStatePatches.push((()=>i.setParameters({markerPrimitive:P(l)}))),delete t.marker,{changed:s,useMaterialColor:o}}}function I(e){switch(e.type){case\"extent\":if(e instanceof s)return n.fromExtent(e);break;case\"polygon\":case\"polyline\":return e}return null}function T(e,t,r){null!=t&&r.symbolLayerStatePatches.push((()=>t.setParameters({color:e})))}var F,H;V.elevationModeChangeTypes={definedChanged:u.RECREATE,staysOnTheGround:u.NONE,onTheGroundChanged:u.RECREATE},function(e){e[e.DRAPED=0]=\"DRAPED\",e[e.ELEVATED=1]=\"ELEVATED\"}(F||(F={})),function(e){e[e.Line=0]=\"Line\",e[e.Ring=1]=\"Ring\",e[e.LineWireframe=2]=\"LineWireframe\",e[e.RingWireframe=3]=\"RingWireframe\",e[e.Marker=4]=\"Marker\"}(H||(H={}));export{V as Graphics3DLineSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e={disableDelayMs:2e3};export{e as meshAutoFastUpdateConstants};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getTranslation as t,multiply as e,invert as a,copy as s,fromTranslation as r}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{h as n}from\"../../../../chunks/vec32.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{perObjectElevationAligner as l}from\"./ElevationAligners.js\";import{evaluateElevationInfoAtPoint as f}from\"./elevationAlignmentUtils.js\";import{setContextFeature as d}from\"./featureExpressionInfoUtils.js\";import{Graphics3DObject3DGraphicLayer as c}from\"./Graphics3DObject3DGraphicLayer.js\";import{meshAutoFastUpdateConstants as h}from\"./meshAutoFastUpdateConstants.js\";class p extends c{constructor(){super(...arguments),this.fastTransformUpdatesAllowed=!1,this._originalGeometries=[],this._fastTransformUpdatesEnabled=!1,this._autoDisableFastUpdatesTimeoutId=0}get fastTransformUpdatesEnabled(){return this._fastTransformUpdatesEnabled}destroy(){super.destroy(),this._cancelAutoDisableFastUpdates()}enableFastTransformUpdates(e,a){if(!this.fastTransformUpdatesAllowed||this._fastTransformUpdatesEnabled)return;this._cancelAutoDisableFastUpdates(),this._fastTransformUpdatesEnabled=!0;const{stageObject:s}=this,r=s.geometries.slice();s.removeAllGeometries();const i=t(g,s.transformation),o=a.getOrigin(i);for(const t of r){const a=e(t.material),r=t.instantiate({material:a});r.localOrigin=o,s.addGeometry(r)}this._originalGeometries=r}autoDisableFastTransformUpdates(t){this._cancelAutoDisableFastUpdates(),this._autoDisableFastUpdatesTimeoutId=setTimeout((()=>{this._autoDisableFastUpdatesTimeoutId=0,t()}),h.disableDelayMs)}updateAutoDisableFastTransformUpdates(t){this._autoDisableFastUpdatesTimeoutId&&this.autoDisableFastTransformUpdates(t)}_cancelAutoDisableFastUpdates(){clearTimeout(this._autoDisableFastUpdatesTimeoutId),this._autoDisableFastUpdatesTimeoutId=0}disableFastTransformUpdates(t){if(!this._fastTransformUpdatesEnabled)return;this._cancelAutoDisableFastUpdates(),this._fastTransformUpdatesEnabled=!1;const{stageObject:e}=this,a=e.geometries.map((e=>t(e.material)));e.removeAllGeometries();for(let s=0;s<this._originalGeometries.length;s++){const t=this._originalGeometries[s],r=a[s];r.setParameters({modelTransformation:null}),r===t.material?e.addGeometry(t):e.addGeometry(t.instantiate({material:r}))}this._originalGeometries.length=0}updateFastLocalOrigin(e,a,s){if(!this._fastTransformUpdatesEnabled)return;const{stageObject:r}=this;if(0===r.geometries.length)return;const o=r.geometries[0].localOrigin,n=t(g,e),m=s.getOrigin(n);if(m===o)return;const l=a?.localMatrix??i;r.shaderTransformation=null,r.transformation=e,r.geometries.forEach((t=>{t.transformation=l,t.localOrigin=m}))}updateTransform(t,s,r){const{stageObject:o}=this,n=s?.localMatrix??i;if(!this._fastTransformUpdatesEnabled)return o.shaderTransformation=null,o.transformation=t,o.geometries.forEach((t=>t.transformation=n)),void this._updateEdgeTransform(r);const m=o.transformation,l=o.geometries[0].transformation,f=t,d=n,c=e(u,m,l),h=e(T,f,d),p=e(_,h,a(_,l));o.shaderTransformation=p,this._setFastMaterialTransformation({matA:c,matB:h}),this._updateEdgeTransform(r)}alignWithElevation(t,a,r,i){if(!this._fastTransformUpdatesEnabled)return void super.alignWithElevation(t,a,r,i);null!=r&&d(this.elevationContext.featureExpressionInfoContext,r);const o=(e,s)=>f(e,t,this.elevationContext,a,s),{stageObject:n}=this;if(!n.geometries[0].material.parameters.modelTransformation)return;const m=n.transformation,c=n.geometries[0].transformation,h=e(u,m,c),p=n.effectiveTransformation,g=s(b,p);this.alignedSampledElevation=l(this,this.elevationContext,t.spatialReference,o,a,g),n.shaderTransformation=g;const _=n.geometries[0].transformation,U=e(T,g,_);this._setFastMaterialTransformation({matA:h,matB:U}),this._updateEdgeTransform(i)}_setFastMaterialTransformation({matA:t,matB:s}){const{stageObject:i}=this;if(0===i.geometries.length)return;const o=i.geometries[0].localOrigin,m=r(F,n(g,o.vec3,-1)),l=e(U,m,t),f=e(E,m,s),d=a(U,l),c=e(E,f,d);for(const e of i.geometries)e.material.setParameters({modelTransformation:c})}_updateEdgeTransform(t){const{stageObject:e,_stageLayer:a}=this;a.stage.renderer.withEdgeView((a=>{a.fastUpdateObject3DEdgesTransform(e)||this.resetEdgeObject(t)}))}}const g=m(),u=o(),T=o(),b=o(),_=o(),U=o(),E=o(),F=o();export{p as Graphics3DMeshObject3DGraphicLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{DefaultMaterial as a}from\"../../webgl-engine/materials/DefaultMaterial.js\";class r{constructor(){this._fastTransformOriginalMaterials=new Map,this._fastTransformClonedMaterials=new Map,this._graphicReferenceCount=0}enable(r,t,e){r.enableFastTransformUpdates((r=>{if(this._graphicReferenceCount<=1){if(this._fastTransformOriginalMaterials.has(r))return r;const a=t.byMaterial(r);return this._fastTransformOriginalMaterials.set(r,a),t.delete(r),r}const s=new a(r.parameters,e);return e.stage.add(s),this._fastTransformClonedMaterials.set(s,r),s}),e.localOriginFactory)}disable(a,r,t){const e=new Set,s=new Set;a.disableFastTransformUpdates((a=>{if(!this._fastTransformClonedMaterials.has(a)){const t=a,i=this._fastTransformOriginalMaterials.get(t);return r.has(i.uid)?(e.add(t),r.byUid(i.uid).material):(s.add(t),i.material)}const i=a,n=this._fastTransformClonedMaterials.get(i);return this._fastTransformClonedMaterials.delete(i),t.stage.remove(i),n}));for(const i of e)this._fastTransformOriginalMaterials.delete(i),t.stage.remove(i);for(const i of s){const a=this._fastTransformOriginalMaterials.get(i);this._fastTransformOriginalMaterials.delete(i),r.set(a.uid,a)}}onAddGraphic(){this._graphicReferenceCount++}onRemoveGraphic(a,r,t){this._graphicReferenceCount--,this.disable(a,r,t)}forEachMaterialInfo(a){this._fastTransformOriginalMaterials.forEach(a)}forEachClonedMaterial(a){this._fastTransformClonedMaterials.forEach(a)}destroy(a){a.removeMany(Array.from(this._fastTransformClonedMaterials.keys())),a.removeMany(Array.from(this._fastTransformOriginalMaterials.values(),(({material:a})=>a))),this._fastTransformClonedMaterials.clear(),this._fastTransformOriginalMaterials.clear()}}class t{constructor(){this._byUid=new Map,this._byMaterial=new Map}get materials(){return Array.from(this._byUid.values(),(a=>a.material))}byUid(a){return this._byUid.get(a)}byMaterial(a){return this._byMaterial.get(a)}set(a,r){this._byUid.set(a,r),this._byMaterial.set(r.material,r)}delete(a){const r=this._byMaterial.get(a)?.uid;r&&(this._byUid.delete(r),this._byMaterial.delete(a))}has(a){return this._byUid.has(a)}forEachMaterialInfo(a){this._byUid.forEach(a)}clear(){this._byUid.clear(),this._byMaterial.clear()}}export{t as MaterialInfoCache,r as MeshFastUpdateProcessor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e,isColorOrColorEmission as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{OutputHighlight as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{addProjViewLocalOrigin as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{VertexAttribute as c}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{ShaderBuilder as g}from\"../views/webgl/ShaderBuilder.js\";import{alphaCutoff as m}from\"../webscene/support/AlphaCutoff.js\";function u(u){const p=new g,{vertex:w,fragment:f}=p;return p.include(i,u),p.include(s,u),l(w,u),p.attributes.add(c.POSITION,\"vec3\"),p.varyings.add(\"vpos\",\"vec3\"),w.main.add(d`vpos = position;\nforwardNormalizedVertexColor();\ngl_Position = transformPosition(proj, view, vpos);`),p.include(t,u),p.fragment.include(o,u),f.uniforms.add(new n(\"alphaCoverage\",((e,r)=>Math.min(1,e.width*r.camera.pixelRatio)))),u.hasVertexColors||f.uniforms.add(new a(\"constantColor\",(e=>e.color))),f.main.add(d`\n    discardBySlice(vpos);\n\n    vec4 color = ${u.hasVertexColors?\"vColor\":\"constantColor\"};\n\n    ${u.output===e.ObjectAndLayerIdColor?\"color.a = 1.0;\":\"\"}\n\n    if (color.a < ${d.float(m)}) {\n      discard;\n    }\n\n    ${r(u.output)?d`fragColor = applySlice(color, vpos);`:\"\"}\n    calculateOcclusionAndOutputHighlight();\n  `),p}const p=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:\"Module\"}));export{p as N,u as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as e}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{depthCompareLess as t,stencilWriteMaskOn as l,stencilToolMaskBaseParams as s,stencilBaseAllZerosParams as n}from\"../lib/StencilUtils.js\";import{N as o}from\"../../../../chunks/NativeLine.glsl.js\";import{PrimitiveType as u}from\"../../../webgl/enums.js\";import{makePipelineState as p,defaultColorWrite as c,defaultDepthWrite as a,premultipliedAlphaToPremultipliedAlpha as m}from\"../../../webgl/renderState.js\";class d extends r{constructor(e,r){super(e,r,new i(o,(()=>import(\"./NativeLine.glsl.js\")))),this.primitiveType=u.LINES}initializePipeline(i){const{hasOccludees:r,output:o,transparent:u}=i,d=(e,i=null,o=null)=>p({blending:i,depthTest:t,depthWrite:o,colorWrite:c,stencilWrite:r?l:null,stencilTest:r?e?s:n:null});return e(o)?(this._occludeePipeline=d(!0,u?m:null,a),d(!1,u?m:null,a)):d(!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}export{d as NativeLineTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as r}from\"../materials/DefaultTechniqueConfiguration.js\";class s extends r{constructor(){super(...arguments),this.hasVertexColors=!1,this.transparent=!1,this.hasOccludees=!1}}e([o()],s.prototype,\"hasVertexColors\",void 0),e([o()],s.prototype,\"transparent\",void 0),e([o()],s.prototype,\"hasOccludees\",void 0);export{s as NativeLineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{clamp as r}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as t}from\"../../../../core/screenUtils.js\";import{copy as o}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{i as s,d as i,f as a,h as n,g as c,c as m,l,j as f}from\"../../../../chunks/vec32.js\";import{create as u}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as p}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{PlaneIndex as h}from\"../../../../geometry/support/frustum.js\";import{create as g,distance2 as d,fromPoints as j,closestLineSegmentPoint as b}from\"../../../../geometry/support/lineSegment.js\";import{create as A,fromPoints as S,signedDistance as x,getNormal as L}from\"../../../../geometry/support/plane.js\";import{isColorHighlightOrOID as y}from\"../core/shaderLibrary/ShaderOutput.js\";import N from\"../lib/GLMaterial.js\";import{Material as R,MaterialParameters as v}from\"../lib/Material.js\";import{RenderSlot as E}from\"../lib/RenderSlot.js\";import{isTranslationMatrix as M}from\"../lib/Util.js\";import{VertexAttribute as T}from\"../lib/VertexAttribute.js\";import{DefaultBufferWriter as _}from\"./DefaultBufferWriter.js\";import{PositionColorLayout as w,PositionLayout as O}from\"./DefaultLayouts.js\";import{NativeLineTechnique as V}from\"../shaders/NativeLineTechnique.js\";import{NativeLineTechniqueConfiguration as C}from\"../shaders/NativeLineTechniqueConfiguration.js\";import{alphaCutoff as P}from\"../../../../webscene/support/AlphaCutoff.js\";class U extends R{constructor(e){super(e,q),this._configuration=new C,this.produces=new Map([[E.OPAQUE_MATERIAL,e=>y(e)]])}getConfiguration(e,r){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.transparent=this.parameters.color[3]<1||this.parameters.width<1,this._configuration.hasOccludees=r.hasOccludees,this._configuration}get visible(){return this.parameters.color[3]>=P}intersect(r,t,u,p,g,A){if(!u.options.selectionMode||!r.visible)return;if(!M(t))return void e.getLogger(\"esri.views.3d.webgl-engine.materials.NativeLineMaterial\").error(\"intersection assumes a translation-only matrix\");const y=r.attributes.get(T.POSITION).data,N=u.camera,R=H;o(R,u.point);const v=2;s(J[0],R[0]-v,R[1]+v,0),s(J[1],R[0]+v,R[1]+v,0),s(J[2],R[0]+v,R[1]-v,0),s(J[3],R[0]-v,R[1]-v,0);for(let e=0;e<4;e++)if(!N.unprojectFromRenderScreen(J[e],K[e]))return;S(N.eye,K[0],K[1],Y),S(N.eye,K[1],K[2],$),S(N.eye,K[2],K[3],ee),S(N.eye,K[3],K[0],re);let E=Number.MAX_VALUE,_=0;for(let e=0;e<y.length-5;e+=3){if(B[0]=y[e]+t[12],B[1]=y[e+1]+t[13],B[2]=y[e+2]+t[14],D[0]=y[e+3]+t[12],D[1]=y[e+4]+t[13],D[2]=y[e+5]+t[14],x(Y,B)<0&&x(Y,D)<0||x($,B)<0&&x($,D)<0||x(ee,B)<0&&x(ee,D)<0||x(re,B)<0&&x(re,D)<0)continue;if(N.projectToRenderScreen(B,G),N.projectToRenderScreen(D,k),G[2]<0&&k[2]>0){i(W,B,D);const e=N.frustum,r=-x(e[h.NEAR],B)/a(W,L(e[h.NEAR]));n(W,W,r),c(B,B,W),N.projectToRenderScreen(B,G)}else if(G[2]>0&&k[2]<0){i(W,D,B);const e=N.frustum,r=-x(e[h.NEAR],D)/a(W,L(e[h.NEAR]));n(W,W,r),c(D,D,W),N.projectToRenderScreen(D,k)}else if(G[2]<0&&k[2]<0)continue;G[2]=0,k[2]=0;const r=d(j(G,k,Z),R);r<E&&(E=r,m(F,B),m(Q,D),_=e/3)}const w=u.rayBegin,O=u.rayEnd;if(E<v*v){let e=Number.MAX_VALUE;if(b(j(F,Q,Z),j(w,O,z),X)){i(X,X,w);const r=l(X);n(X,X,1/r),e=r/f(w,O)}A(e,X,_,!1)}}intersectDraped(e,t,o,s,i,a){if(!o.options.selectionMode)return;const n=e.attributes.get(T.POSITION).data,c=e.attributes.get(T.SIZE),m=c?c.data[0]:0,l=s[0],f=s[1],u=((m+1)/2+4)*e.screenToWorldRatio;let p=Number.MAX_VALUE,h=0;for(let g=0;g<n.length-5;g+=3){const e=n[g],t=n[g+1],o=l-e,s=f-t,i=n[g+3]-e,a=n[g+4]-t,c=r((i*o+a*s)/(i*i+a*a),0,1),m=i*c-o,u=a*c-s,d=m*m+u*u;d<p&&(p=d,h=g/3)}p<u*u&&i(a.dist,a.normal,h,!1)}createGLMaterial(e){return new I(e)}createBufferWriter(){const e=this.parameters.hasVertexColors?w:O;return new _(e)}}class I extends N{beginSlot(e){return this.getTechnique(V,e)}}class q extends v{constructor(){super(...arguments),this.color=p,this.hasVertexColors=!1,this.hasSlicePlane=!1,this.width=1}}const B=u(),D=u(),W=u(),X=u(),G=t(),k=t(),F=u(),Q=u(),Z=g(),z=g(),H=u(),J=[t(),t(),t(),t()],K=[u(),u(),u(),u()],Y=A(),$=A(),ee=A(),re=A();export{U as NativeLineMaterial,q as Parameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import\"../../../../core/has.js\";import{deg2rad as t}from\"../../../../core/mathUtils.js\";import{releaseMaybe as r}from\"../../../../core/maybe.js\";import{isPromiseLike as o}from\"../../../../core/promiseUtils.js\";import{normalFromMat4 as a,fromMat4 as n}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{fromTranslation as i,multiply as l,invert as c,getTranslation as u}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m,IDENTITY as f,clone as p}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ONES as h}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as d,g,h as x,t as _,q as T,n as b,b as y,f as v,d as w,e as M}from\"../../../../chunks/vec32.js\";import{ZEROS as R,ONES as j,create as P}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as C}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{canProjectWithoutEngine as A}from\"../../../../geometry/projection.js\";import{computeTranslationToOriginAndRotation as E}from\"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as O}from\"../../../../geometry/projection/projectBuffer.js\";import{projectVectorToPoint as N}from\"../../../../geometry/projection/projectVectorToPoint.js\";import{create as I,fromBuffer as S,intersectsClippingArea as U}from\"../../../../geometry/support/aaBoundingBox.js\";import{newFloatArray as B}from\"../../../../geometry/support/FloatArray.js\";import{getZeroIndexArray as F,getContinuousIndexArray as D}from\"../../../../geometry/support/Indices.js\";import G from\"../../../../geometry/support/MeshComponent.js\";import V from\"../../../../geometry/support/MeshMaterialMetallicRoughness.js\";import L from\"../../../../geometry/support/MeshTextureTransform.js\";import{isRelativeVertexSpace as $,isAbsoluteVertexSpace as H}from\"../../../../geometry/support/meshVertexSpaceUtils.js\";import{equals as q,isPlateCarree as k}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{t as z}from\"../../../../chunks/vec3.js\";import{transformNormal as W,transformVectorENUPlateCarree as Y,VectorType as J,transformVectorWMPlateCarree as K,projectNormalToPCPF as Q,transformTangent as X,projectTangentToPCPF as Z}from\"../../../../geometry/support/meshUtils/projection.js\";import{projectMeshVertexPositions as ee}from\"../../../../geometry/support/meshUtils/projectMeshVertexPositions.js\";import{makeDehydratedPoint as te}from\"../../../../layers/graphics/dehydratedPoint.js\";import{MeshTransformUpdateAction as re}from\"../../../../layers/graphics/sources/interfaces.js\";import{ViewingMode as oe}from\"../../../ViewingMode.js\";import{isEncodedMeshTexture as ae}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as ne}from\"../../glTF/internal/TextureTransformUtils.js\";import{perObjectElevationAligner as se}from\"./ElevationAligners.js\";import{needsElevationUpdates3D as ie,evaluateElevationInfoAtPoint as le}from\"./elevationAlignmentUtils.js\";import{Graphics3DMeshObject3DGraphicLayer as ce}from\"./Graphics3DMeshObject3DGraphicLayer.js\";import{Object3DEdgeState as ue}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as me}from\"./Graphics3DSymbolLayer.js\";import{MaterialInfoCache as fe,MeshFastUpdateProcessor as pe}from\"./MeshFastUpdateProcessor.js\";import{createMaterial as he}from\"../support/edgeUtils.js\";import{parseColorMixMode as de,encodeSymbolColor as ge}from\"../support/symbolColorUtils.js\";import{debugFlags as xe}from\"../../support/debugFlags.js\";import{Attribute as _e}from\"../../webgl-engine/lib/Attribute.js\";import{AlphaDiscardMode as Te,CullFaceOptions as be}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ContentObjectType as ye}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Geometry as ve}from\"../../webgl-engine/lib/Geometry.js\";import{Object3D as we}from\"../../webgl-engine/lib/Object3D.js\";import{Texture as Me}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as Re}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as je}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{NativeLineMaterial as Pe}from\"../../webgl-engine/materials/NativeLineMaterial.js\";import{useSchematicPBR as Ce,advancedMRRFactors as Ae,schematicMRRFactors as Ee}from\"../../webgl-engine/materials/pbrUtils.js\";import{TextureWrapMode as Oe}from\"../../../webgl/enums.js\";const Ne=[\"mesh\"];class Ie extends me{constructor(e,t,r,o){super(e,t,r,o),this._materialInfoCache=new fe,this._fastUpdateProcessor=new pe,this._textures=new Map,this.ensureDrapedStatus(!1)}async doLoad(){xe.DRAW_MESH_GEOMETRY_NORMALS&&(this._debugVertexNormalMaterial=new Pe({color:[1,0,1,1]}),this._debugTangentNormalMaterial=new Pe({color:[1,.5,0,1]}),this._debugFaceNormalMaterial=new Pe({color:[0,1,1,1]}))}destroy(){super.destroy(),this._textures.forEach((e=>e.unload())),this._context.stage.removeMany(this._materialInfoCache.materials),this._context.stage.removeMany(Array.from(this._textures.values())),this._materialInfoCache.clear(),this._textures.clear(),this._fastUpdateProcessor.destroy(this._context.stage)}get materials(){return this._materialInfoCache.materials}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Ne,\"fill on mesh-3d\"))return null;const r=this.setGraphicElevationContext(t),o=e.renderingInfo;return this._createAs3DShape(t,o,r,t.uid)}onRemoveGraphic(e){this._fastUpdateProcessor.onRemoveGraphic(e,this._materialInfoCache,this._context)}layerOpacityChanged(e,t){const r=this._getLayerOpacity();this._updateMaterialParameters((e=>{e.material.setParameters({layerOpacity:r});const t=e.material.parameters;this._setMaterialTransparentParameter(t,e),e.material.setParameters({transparent:t.transparent})})),e.forEach((e=>t(e)?.layerOpacityChanged(r,this._context.isAsync)))}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,ie)}slicePlaneEnabledChanged(e,t){return this._updateMaterialParameters((({material:e})=>{e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),e.forEach((e=>t(e)?.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync))),!0}physicalBasedRenderingChanged(){const e=this._usePBR();return this._updateMaterialParameters((({material:t})=>t.setParameters({usePBR:e}))),!0}updateTransform(e,t,r,o){if(!e.fastTransformUpdatesAllowed)return!1;const a=e.fastTransformUpdatesEnabled;switch(o){case re.EnableFastUpdates:if(a)return!0;break;case re.DisableFastUpdates:if(!a)return!0;break;default:if(!a)return!!this.updateTransform(e,t,r,re.EnableFastUpdates)&&(e.autoDisableFastTransformUpdates((()=>this.updateTransform(e,t,r,re.DisableFastUpdates))),!0)}const n=this._context.renderCoordsHelper.spatialReference,s=at,{origin:i,transform:l}=r;if(!E(t,d(Ze,i.x,i.y,i.z??0),s,n))return!1;switch(o){case re.EnableFastUpdates:this._fastUpdateProcessor.enable(e,this._materialInfoCache,this._context);break;case re.DisableFastUpdates:this._fastUpdateProcessor.disable(e,this._materialInfoCache,this._context);break;case re.UpdateFastLocalOrigin:e.updateFastLocalOrigin(s,l,this._context.localOriginFactory)}const{elevationContext:c}=e;c.centerPointInElevationSR=this._getCenterPointInElevationSR(s);const{elevationProvider:u,renderCoordsHelper:m}=this._context,f=(e,t)=>le(e,u,c,m,t);return e.alignedSampledElevation=se(e,c,u.spatialReference,f,m,s),e.updateTransform(s,l,this._context.isAsync),e.updateAutoDisableFastTransformUpdates((()=>this.updateTransform(e,t,r,re.DisableFastUpdates))),!0}_requiresSymbolVertexColors(){return this._drivenProperties.color||this._drivenProperties.opacity}_materialPropertiesDefault(e,t){const r=this._requiresSymbolVertexColors(),o=!!e.vertexAttributes.color,a=!!e.vertexAttributes.tangent;return{hasSymbolVertexColors:r,hasVertexColors:o,hasVertexTangents:a,uid:`vc:${o},vt:${a},vct${t},svc:${r}`}}_materialProperties(e,t,r){const o=this._materialPropertiesDefault(e,r);if(!t.material)return o;const{color:a,colorTexture:n,colorTextureTransform:s,normalTexture:i,normalTextureTransform:l,doubleSided:c,alphaCutoff:u,alphaMode:m}=t.material,f=Ye(a),p=Ye(n),h=Je(s),d=Ye(i),g=Je(l);if(o.color=a,o.colorTexture=n,o.normalTexture=i,o.uid=`${o.uid},cmuid:${f},ctmuid:${p},cttuid:${h},ntmuid:${d},nttuid:${g},ds:${c},ac:${u},am:${m}`,t.material instanceof V){const{metallic:e,roughness:r,metallicRoughnessTexture:a,metallicRoughnessTextureTransform:n,emissiveColor:i,emissiveTexture:c,emissiveTextureTransform:u,occlusionTexture:m,occlusionTextureTransform:f}=t.material,p=Ye(a),h=Je(n),d=Ye(i),g=Ye(c),x=Je(u),_=Ye(m),T=Je(f);o.metallic=e,o.roughness=r,o.metallicRoughnessTexture=a,o.emissiveColor=i,o.emissiveTexture=c,o.occlusionTexture=m,o.colorTextureTransform=$e(s),o.normalTextureTransform=$e(l),o.emissiveTextureTransform=$e(u),o.occlusionTextureTransform=$e(f),o.metallicRoughnessTextureTransform=$e(n),o.uid=`${o.uid},mrm:${e},mrr:${r},mrt:${p},mrtt:${h},emuid:${d},etmuid:${g},ett:${x},otmuid:${_},ott:${T}`}return o}_getInternalTexture(e,t=Te.Opaque){const a=We(e);if(!a)return null;const n=`${e.contentHash}/${t}`;let s=this._textures.get(n);if(s){const e=this._context.stage.renderView.textures;let t=null;const a=e.acquire(s.id);return null==a||o(a)||(s.events.on(\"unloaded\",(()=>t=r(t))),t=a),s}let i=null;const l=this._context.stage.renderView.renderingContext.parameters.maxMaxAnisotropy,c={wrap:He(e.wrap),noUnpackFlip:!0,maxAnisotropy:l,mipmap:l>1};return ae(a)?(i=a.data,c.preMultiplyAlpha=!1,c.encoding=a.encoding):(i=a,c.preMultiplyAlpha=t!==Te.Opaque,c.downsampleUncompressed=this._context.graphicsCoreOwner.view.qualitySettings.graphics3D.uncompressedTextureDownsamplingEnabled),s=new Me(i,c),this._textures.set(n,s),s.load(this._context.stage.renderView.renderingContext),this._context.stage.add(s),s.events.on(\"unloaded\",(()=>{this._textures.delete(n)})),s}_setInternalMaterialTextureParameters(t,r){if(null!=t.colorTexture){const e=this._getInternalTexture(t.colorTexture,r.textureAlphaMode);e?(r.textureId=e.id,r.textureAlphaPremultiplied=!!e.parameters.preMultiplyAlpha):r.textureId=void 0}t.normalTexture&&(r.normalTextureId=this._getInternalTexture(t.normalTexture)?.id),t.emissiveColor&&(r.emissiveFactor=e.toUnitRGB(t.emissiveColor)),t.emissiveTexture&&(r.emissiveTextureId=this._getInternalTexture(t.emissiveTexture)?.id),t.occlusionTexture&&(r.occlusionTextureId=this._getInternalTexture(t.occlusionTexture)?.id),t.metallicRoughnessTexture&&(r.metallicRoughnessTextureId=this._getInternalTexture(t.metallicRoughnessTexture)?.id)}_setInternalMaterialParameters(e,t){null!=e.color&&ze(e.color,t),this._setInternalMaterialTextureParameters(e,t),t.colorTextureTransformMatrix=ne(e.colorTextureTransform),t.normalTextureTransformMatrix=ne(e.normalTextureTransform);const r=null!=e.normalTextureTransform?.scale?e.normalTextureTransform?.scale:h;t.scale=[r[0],r[1]],t.occlusionTextureTransformMatrix=ne(e.occlusionTextureTransform),t.emissiveTextureTransformMatrix=ne(e.emissiveTextureTransform),t.metallicRoughnessTextureTransformMatrix=ne(e.metallicRoughnessTextureTransform)}_setExternalMaterialParameters(t,r=this.symbolLayer?.material?.color){const o=this._drivenProperties.color;let a=this.symbolLayer.material?.colorMixMode??null;if(o)t.externalColor=C;else{const o=r??null;o?t.externalColor=e.toUnitRGBA(o):(a=null,t.externalColor=C)}a&&(t.colorMixMode=a),t.castShadows=!!this.symbolLayer.castShadows}_getOrCreateMaterial(t,r){const o=r.material?.color,a=r.material?.colorTexture,n=r.material?.alphaMode,s=\"blend\"===n,i=!(\"opaque\"===n)&&(ke(t)||null!=o&&o.a<1||a?.transparent||s),l=this._materialProperties(t,r,i),c=this._materialInfoCache.byUid(l.uid);if(c)return this._setInternalMaterialTextureParameters(l,c.material.parameters),c.material;const u={uid:l.uid,material:null,isComponentTransparent:i,alphaMode:r.material?r.material.alphaMode:\"opaque\"},m=Ce({normalTexture:l.normalTexture,metallicRoughnessTexture:l.metallicRoughnessTexture,metallicFactor:l.metallic,roughnessFactor:l.roughness,emissiveTexture:l.emissiveTexture,emissiveFactor:e.toUnitRGB(l.emissiveColor),occlusionTexture:l.occlusionTexture}),f={usePBR:this._usePBR(),isSchematic:m,hasVertexColors:l.hasVertexColors,hasSymbolColors:l.hasSymbolVertexColors,hasVertexTangents:l.hasVertexTangents,ambient:R,diffuse:j,opacity:1,doubleSided:!0,doubleSidedType:\"winding-order\",cullFace:be.None,layerOpacity:this._getLayerOpacity(),hasSlicePlane:this._context.slicePlaneEnabled};f.mrrFactors=m?Ee:[l.metallic,l.roughness,Ae[2]],r.material&&(f.doubleSided=r.material.doubleSided,f.cullFace=r.material.doubleSided?be.None:be.Back,f.textureAlphaCutoff=r.material.alphaCutoff),this._setExternalMaterialParameters(f),this._setMaterialTransparentParameter(f,u),this._setInternalMaterialParameters(l,f);const p=new je(f,this._context);return u.material=p,this._materialInfoCache.set(l.uid,u),this._context.stage.add(p),p}prepareSymbolLayerPatch(e){if(\"partial\"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchColor(e,t)}_preparePatchColor(e,t){if(!t.material||\"partial\"!==t.material.type)return;const r=t.material.diff;if(!r.color||\"complete\"!==r.color.type||null==r.color.newValue||null==r.color.oldValue)return;const o=r.color.newValue;delete r.color,e.symbolLayerStatePatches.push((()=>{this._updateMaterialParameters((e=>{const t=e.material.parameters;this._setExternalMaterialParameters(t,o),this._setMaterialTransparentParameter(t,e),e.material.setParameters({externalColor:t.externalColor,transparent:t.transparent})}))}))}_usePBR(){return this._context.physicalBasedRenderingEnabled}_setMaterialTransparentParameter(e,t){e.transparent=this.needsDrivenTransparentPass||t.isComponentTransparent||e.layerOpacity<1||e.opacity<1||e.externalColor&&e.externalColor[3]<1,\"auto\"===t.alphaMode?e.textureAlphaMode=e.transparent?Te.MaskBlend:Te.Opaque:e.textureAlphaMode=\"opaque\"===t.alphaMode?Te.Opaque:\"mask\"===t.alphaMode?Te.Mask:Te.Blend}_createFaceDebugNormals(e,t){const r=t.length,o=e.spatialReference.isGeographic?20015077/180:1,n=.1*Math.max(e.extent.width*o,e.extent.height*o,e.extent.zmax-e.extent.zmin),i=[],l=[],c=t[0].transformation,u=a(s(),c);for(let a=0;a<r;a++){const e=t[a].attributes.get(Re.POSITION);if(!e)continue;const r=e.data,o=e.indices;for(let t=0;t<o.length;t+=3)Le(r,o,t,rt),Ve(r,o,t,Ze,et,tt),g(Ze,Ze,et),g(Ze,Ze,tt),x(Ze,Ze,1/3),_(Ze,Ze,c),i.push(...Ze),T(rt,rt,u),b(rt,rt),y(Ze,Ze,rt,n),i.push(...Ze),l.push(l.length),l.push(l.length)}return i.length?new ve(this._debugFaceNormalMaterial,[[Re.POSITION,new _e(i,l,3,!0)]],null,ye.Line):null}_createPerVertexDebugVectors(e,t,r,o,i){const l=t.length,c=e.spatialReference.isGeographic?20015077/180:1,u=.1*i*Math.max(e.extent.width*c,e.extent.height*c,e.extent.zmax-e.extent.zmin),m=[],f=[],p=t[0].transformation,h=a(s(),p);r===Re.TANGENT&&n(h,p);for(let a=0;a<l;a++){const e=t[a],o=e.attributes.get(Re.POSITION),n=e.attributes.get(r);if(!o||!n)continue;const s=o.data,i=o.indices,l=n.data,c=n.indices;for(let t=0;t<i.length;t++){const e=3*i[t],r=c[t]*n.stride;d(Ze,s[e+0],s[e+1],s[e+2]),_(Ze,Ze,p),m.push(...Ze),d(et,l[r+0],l[r+1],l[r+2]),T(et,et,h),b(et,et),y(Ze,Ze,et,u),m.push(...Ze),f.push(f.length),f.push(f.length)}}return m.length?new ve(o,[[Re.POSITION,new _e(m,f,3,!0)]],null,ye.Line):null}_createAs3DShape(e,t,r,o){const a=e.geometry;if(\"mesh\"!==a.type)return null;const n=this._createGeometryInfo(a,t,o);if(null==n)return null;const{geometries:s,objectTransformation:i}=n;if(xe.DRAW_MESH_GEOMETRY_NORMALS){const e=this._createPerVertexDebugVectors(a,s,Re.NORMAL,this._debugVertexNormalMaterial,1),t=this._createPerVertexDebugVectors(a,s,Re.TANGENT,this._debugTangentNormalMaterial,.5),r=this._createFaceDebugNormals(a,s);e&&s.push(e),t&&s.push(t),r&&s.push(r)}const l=new we({geometries:s,layerUid:this._context.layer.uid,graphicUid:o,isElevationSource:!0});l.transformation=i;const c=he(this.symbolLayer,{opacity:this._getLayerOpacity()}),u=c?new ue(s[0].material,c,this._context.slicePlaneEnabled):null,m=new ce(this,l,s,null,null,se,r,u);this._fastUpdateProcessor.onAddGraphic(),m.needsElevationUpdates=ie(r.mode),m.useObjectOriginAsAttachmentOrigin=!0,m.fastTransformUpdatesAllowed=this._fastTransformUpdatesAllowed(a),r.centerPointInElevationSR=this._getCenterPointInElevationSR(l.transformation);const{elevationProvider:f,renderCoordsHelper:p}=this._context,h=(e,t)=>le(e,f,r,p,t);return m.alignedSampledElevation=se(m,r,f.spatialReference,h,p),m}_fastTransformUpdatesAllowed(e){const{vertexSpace:t,spatialReference:r}=e;if(!$(t))return!1;const{type:o}=t,{view:a}=this._context.graphicsCoreOwner,{viewingMode:n}=a.state,s=a.spatialReference;return n===oe.Global&&\"local\"===o||n===oe.Local&&q(s,r)&&\"georeferenced\"===o&&!r.isGeographic}_getCenterPointInElevationSR(e){const t=te(0,0,0,this._context.elevationProvider.spatialReference??null);return N([e[12],e[13],e[14]],this._context.renderCoordsHelper.spatialReference,t),t}_passthroughReprojectionInfo(e){return e.reprojection===it.NONE&&!!e.objectTransformation}_createPositionBuffer(e,t){const r=e.vertexAttributes.position;let o,a=r;if(t.reprojection===it.NONE)return{position:a,georeferencedPositionBuffer:o};const n=t.reprojection===it.RENDER?t.transformBeforeProject:null;n&&(a=z(new Float64Array(a.length),a,n));const{normal:s,tangent:i}=e.vertexAttributes;this._passthroughReprojectionInfo(t)||!s&&!i||(o=a);const l=a===r||a===o?new Float64Array(a.length):a;return O(a,e.spatialReference,0,l,this._context.renderCoordsHelper.spatialReference,0),{position:l,georeferencedPositionBuffer:o}}_createNormalBuffer(e,t,r,o){const a=e.vertexAttributes.normal;if(null==a)return null;let n=a;const s=o.reprojection===it.RENDER?o.transformBeforeProject:null;s&&(n=W(n,new Float32Array(n.length),s));const i=this._context.graphicsCoreOwner.view.viewingMode;if(o.reprojection===it.NONE)return n;if(\"local\"===i){if(!k(this._context.renderCoordsHelper.spatialReference))return n;if(null==r)return null;if(e.spatialReference.isGeographic){const e=n===a?new Float32Array(n.length):n;return Y(n,J.NORMAL,r,e)}if(e.spatialReference.isWebMercator){const e=n===a?new Float32Array(n.length):n;return K(n,J.NORMAL,r,e)}return n}if(null==r)return null;const l=n===a?new Float32Array(n.length):n,c=this._context.renderCoordsHelper.spatialReference;return Q(n,r,e.spatialReference,t,c,l)}_createTangentBuffer(e,t,r,o){const a=e.vertexAttributes.tangent;if(null==a)return null;let n=a;const s=o.reprojection===it.RENDER?o.transformBeforeProject:null;s&&(n=X(n,new Float32Array(n.length),s));const i=this._context.graphicsCoreOwner.view.viewingMode;if(o.reprojection===it.NONE)return n;if(\"local\"===i){if(!k(this._context.renderCoordsHelper.spatialReference))return n;if(null==r)return null;if(e.spatialReference.isGeographic){const e=n===a?new Float32Array(n.length):n;return Y(n,J.TANGENT,r,e)}if(e.spatialReference.isWebMercator){const e=n===a?new Float32Array(n.length):n;return K(n,J.TANGENT,r,e)}return n}if(null==r)return null;const l=n===a?new Float32Array(n.length):n,c=this._context.renderCoordsHelper.spatialReference;return Z(n,r,e.spatialReference,t,c,l)}_createSymbolColorBuffer(e){if(this._requiresSymbolVertexColors()){const t=this._getVertexOpacityAndColor(e),r=de(this.symbolLayer?.material?.colorMixMode),o=new Uint8Array(4);return ge(t,r,o),o}return null}_createBuffers(e,t){const r=e.vertexAttributes&&e.vertexAttributes.position;if(!r)return this.logger.warn(\"Mesh geometry must contain position vertex attributes\"),null;const o=e.vertexAttributes.normal,a=e.vertexAttributes.uv,n=e.vertexAttributes.tangent;if(o&&o.length!==r.length)return this.logger.warn(\"Mesh normal vertex buffer must contain the same number of elements as the position buffer\"),null;if(n&&n.length/4!=r.length/3)return this.logger.warn(\"Mesh tangent vertex buffer must contain the same number of elements as the position buffer\"),null;if(a&&a.length/2!=r.length/3)return this.logger.warn(\"Mesh uv vertex buffer must contain the same number of elements as the position buffer\"),null;const s=this._computeReprojectionInfo(e),{position:i,georeferencedPositionBuffer:l}=this._createPositionBuffer(e,s),c=Ke(e),u=this._createSymbolColorBuffer(t),f=this._createNormalBuffer(e,i,l,s),p=this._createTangentBuffer(e,i,l,s),h=a,{transformation:d,position:g,normal:x,tangent:_}=this._passthroughReprojectionInfo(s)?{transformation:s.objectTransformation,position:i,normal:f,tangent:p}:this._transformOriginLocal(e,i,f,p);return{positionBuffer:g,normalBuffer:x,tangentBuffer:_,uvBuffer:h,colorBuffer:c,symbolColorBuffer:u,objectTransformation:d,geometryTransformation:s.reprojection===it.NONE&&s.geometryTransformation?s.geometryTransformation:m()}}_computeReprojectionInfo(e){const{vertexSpace:t}=e,r=\"georeferenced\"===t.type?q(this._context.renderCoordsHelper.spatialReference,e.spatialReference)?it.NONE:it.RENDER:it.NONE;if(H(t))return{reprojection:r};const o=t.origin,a=m(),n=e.transform?.localMatrix??f;if(r===it.NONE){E(e.spatialReference,o,a,this._context.renderCoordsHelper.spatialReference);return{reprojection:r,objectTransformation:a,geometryTransformation:p(n)}}const s=i(m(),o);return l(s,s,n),{reprojection:r,transformBeforeProject:s}}_transformOriginLocal(e,t,r,o){const a=this._context.renderCoordsHelper.spatialReference,n=e.origin;Xe[0]=n.x,Xe[1]=n.y,Xe[2]=n.z??0;const s=m();E(e.spatialReference,Xe,s,a),c(ot,s);const{position:i,normal:l,tangent:u}=e.vertexAttributes,f=t===i?new Float64Array(t.length):t;z(f,t,ot);const p=r?r===l?new Float32Array(r.length):r:null,h=o?o===u?new Float32Array(o.length):o:null;return r&&p&&W(r,p,ot),o&&h&&X(o,h,ot),{transformation:s,position:f,normal:p,tangent:h}}_validateFaces(e,t){const r=e.vertexAttributes.position.length/3,o=t.faces;if(o){let e=-1;for(let t=0;t<o.length;t++){const r=o[t];r>e&&(e=r)}if(r<=e)return this.logger.warn(`Vertex index ${e} is out of bounds of the mesh position buffer`),!1}else if(r%3!=0)return this.logger.warn(\"Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)\"),!1;return!0}_isOutsideClippingArea(e){if(!this._context.clippingExtent)return!1;const t=e.vertexAttributes?.position;if(!t)return!1;const r=this._context.elevationProvider.spatialReference,o=ee(e,r??e.spatialReference);return!!o&&(S(o,nt),!U(nt,this._context.clippingExtent))}_createGeometryInfo(e,t,r){if(!A(e.spatialReference,this._context.renderCoordsHelper.spatialReference))return this.logger.warn(\"Geometry spatial reference is not compatible with the view\"),null;if(!this._validateVertexSpace(e))return null;if(this._isOutsideClippingArea(e))return null;const o=this._createBuffers(e,t);if(null==o)return null;const{positionBuffer:a,uvBuffer:n,colorBuffer:s,symbolColorBuffer:i,normalBuffer:l,tangentBuffer:c,objectTransformation:m,geometryTransformation:f}=o,p=e.components??st,h=new Array;let d=!1;const g=u(Ze,m),x=this._context.localOriginFactory.getOrigin(g);for(const u of p){if(!this._validateFaces(e,u))return null;const t=Ue(e,u);if(0===t.length)continue;const o=Be(a,l,u,t);o.didFlipNormals&&(d=!0);const m=[[Re.POSITION,new _e(a,t,3,!0)],[Re.NORMAL,new _e(o.normals,o.indices,3,!0)]];s&&m.push([Re.COLOR,new _e(s,t,4,!0)]),i&&m.push([Re.SYMBOLCOLOR,new _e(i,F(t.length),4,!0)]),n&&m.push([Re.UV0,new _e(n,t,2,!0)]),c&&m.push([Re.TANGENT,new _e(c,t,4,!0)]);const p=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:r,layerUid:this._context.layer.uid}),g=this._getOrCreateMaterial(e,u),_=new ve(g,m,null,ye.Mesh,p);_.transformation=f,_.localOrigin=x,h.push(_)}return d&&this.logger.warn(\"Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals.\"),{geometries:h,objectTransformation:m}}_updateMaterialParameters(e){this._materialInfoCache.forEachMaterialInfo(e),this._fastUpdateProcessor.forEachMaterialInfo(e),this._fastUpdateProcessor.forEachClonedMaterial(((e,t)=>{t.setParameters(e.parameters)}))}_validateVertexSpace(e){const{_context:{graphicsCoreOwner:{view:{state:{viewingMode:t}}}}}=this,{vertexSpace:r}=e;return t!==oe.Local||\"local\"!==r.type||(this.logger.warn(\"Displaying a mesh with a local vertex space in a view in local viewing mode is not supported.\"),!1)}test(){return{...super.test(),materials:this._materialInfoCache.materials}}}class Se{constructor(e,t,r){this.normals=e,this.indices=t,this.didFlipNormals=r}}function Ue(e,t){return t.faces??D(e.vertexAttributes.position.length/3)}function Be(e,t,r,o){switch(r.shading||\"flat\"){default:case\"source\":return De(e,t,r,o);case\"flat\":return Fe(e,o);case\"smooth\":return Ge(e,o)}}function Fe(e,t){const r=B(t.length),o=new Array(3*t.length);for(let a=0;a<t.length;a+=3){const n=Le(e,t,a,rt);for(let e=0;e<3;e++)r[a+e]=n[e],o[a+e]=a/3}return new Se(r,o,!1)}function De(e,t,r,o){if(null==t)return Fe(e,o);let a=!1;if(!r.trustSourceNormals)for(let n=0;n<o.length;n+=3){Le(e,o,n,rt);for(let e=0;e<3;e++){const r=3*o[n+e];Ze[0]=t[r],Ze[1]=t[r+1],Ze[2]=t[r+2],v(rt,Ze)<0&&(t[r]=-t[r],t[r+1]=-t[r+1],t[r+2]=-t[r+2],a=!0)}}return new Se(t,o,a)}function Ge(e,t){const r={};for(let n=0;n<t.length;n+=3){const o=Le(e,t,n,rt);for(let e=0;e<3;e++){const a=t[n+e];let s=r[a];s||(s={normal:P(),count:0},r[a]=s),g(s.normal,s.normal,o),s.count++}}const o=B(3*t.length),a=new Array(3*t.length);for(let n=0;n<t.length;n++){const e=r[t[n]];1!==e.count&&(b(e.normal,e.normal),e.count=1);for(let t=0;t<3;t++)o[3*n+t]=e.normal[t];a[n]=n}return new Se(o,a,!1)}function Ve(e,t,r,o,a,n){const s=3*t[r],i=3*t[r+1],l=3*t[r+2];o[0]=e[s],o[1]=e[s+1],o[2]=e[s+2],a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],n[0]=e[l],n[1]=e[l+1],n[2]=e[l+2]}function Le(e,t,r,o){return Ve(e,t,r,Ze,et,tt),w(et,et,Ze),w(tt,tt,Ze),M(Ze,et,tt),b(o,Ze),o}function $e(e){if(!e)return null;const{scale:r,offset:o,rotation:a}=e;return{scale:r,offset:o,rotation:t(a)}}function He(e=\"repeat\"){if(\"string\"==typeof e){const t=qe(e);return{s:t,t}}return{s:qe(e.horizontal),t:qe(e.vertical)}}function qe(e){switch(e){case\"clamp\":return Oe.CLAMP_TO_EDGE;case\"mirror\":return Oe.MIRRORED_REPEAT;default:return Oe.REPEAT}}function ke(e){const t=e.vertexAttributes.color;if(null==t)return!1;for(let r=3;r<t.length;r+=4)if(255!==t[r])return!0;return!1}function ze(t,r){r.diffuse=e.toUnitRGB(t),r.opacity=t.a}function We(e){return e.data??e.url}function Ye(t){return null==t?\"-\":t instanceof e?t.toHex():t.contentHash}function Je(e){const{offset:t,scale:r,rotation:o}=e??Qe;return`${t[0]},${t[1]},${o},${r[0]},${r[1]}`}function Ke(e){return e.vertexAttributes.color}const Qe=new L,Xe=P(),Ze=P(),et=P(),tt=P(),rt=P(),ot=m(),at=m(),nt=I(),st=[new G];var it;!function(e){e[e.NONE=0]=\"NONE\",e[e.RENDER=1]=\"RENDER\"}(it||(it={}));export{Ie as Graphics3DMeshFillSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e,i}from\"../../../../chunks/vec32.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as s,expandWithVec3 as a,create as h,isPoint as o,center as r,offset as l}from\"../../../../geometry/support/aaBoundingBox.js\";import{evaluateElevationInfoAtPoint as g}from\"./elevationAlignmentUtils.js\";import{setContextFeature as c}from\"./featureExpressionInfoUtils.js\";import{demResolutionForBoundingBox as d}from\"./graphicUtils.js\";import{Object3DState as m}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3DHighlightStateID as p}from\"../../webgl-engine/lib/Object3DStateID.js\";class u{constructor(t,e,i,n,s){this.graphics3DSymbolLayer=t,this.instanceIndex=e,this.elevationAligner=i,this.elevationContext=n,this._highlightOrderMap=s,this.type=\"lod-instance\",this._highlights=new Set,this.alignedSampledElevation=0,this.isElevationSource=!1,this.needsElevationUpdates=!1,this._highlightName=null}initialize(){}setVisibility(t){const{instanceData:e}=this;t!==e.getVisible(this.instanceIndex)&&e.setVisible(this.instanceIndex,t)}destroy(){null!=this.instanceIndex&&(this.instanceData.removeInstance(this.instanceIndex),this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this))}alignWithElevation(t,e,i){if(this.elevationAligner){c(this.elevationContext.featureExpressionInfoContext,i);const n=(i,n)=>g(i,t,this.elevationContext,e,n),s=this.elevationAligner(this,this.elevationContext,t.spatialReference,n,e);null!=s&&(this.alignedSampledElevation=s)}}getCenterObjectSpace(t=n()){return this.instanceData.getCombinedLocalTransform(this.instanceIndex,_),e(t,this._lodRenderer.baseBoundingSphere.center,_)}getBoundingBoxObjectSpace(t=h()){this.instanceData.getCombinedLocalTransform(this.instanceIndex,_);const n=this._lodRenderer.baseBoundingBox;s(t);for(let s=0;s<8;++s)i(b,1&s?n[3]:n[0],2&s?n[4]:n[1],4&s?n[5]:n[2]),e(b,b,_),a(t,b);return t}computeAttachmentOrigin(t){this.instanceData.getGlobalTransform(this.instanceIndex,_),t.render.origin[0]+=_[12],t.render.origin[1]+=_[13],t.render.origin[2]+=_[14],t.render.num++}async getProjectedBoundingBox(t,i,n,a,h){const g=this.getBoundingBoxObjectSpace(h),c=x,m=o(g)?1:c.length;this.instanceData.getGlobalTransform(this.instanceIndex,_);for(let s=0;s<m;s++){const t=c[s];b[0]=g[t[0]],b[1]=g[t[1]],b[2]=g[t[2]],e(b,b,_),f[3*s]=b[0],f[3*s+1]=b[1],f[3*s+2]=b[2]}if(!t(f,0,m))return null;s(g);let p=null;this.calculateRelativeScreenBounds&&(p=this.calculateRelativeScreenBounds());for(let e=0;e<3*m;e+=3){for(let t=0;t<3;t++)g[t]=Math.min(g[t],f[e+t]),g[t+3]=Math.max(g[t+3],f[e+t]);p&&n.push({location:f.slice(e,e+3),screenSpaceBoundingRect:p})}if(i&&(r(g,v),\"absolute-height\"!==this.elevationContext.mode)){let t;const e=d(g,i.service.spatialReference,i);try{t=await i.service.queryElevation(v[0],v[1],a,e,\"ground\")}catch(u){}null!=t&&l(g,0,0,-this.alignedSampledElevation+t)}return g}addObjectState(t){t.stateType===m.Highlight&&this.addObjectHighlightState(t)}addObjectHighlightState(t){const e=new p(t.highlightName);this._addHighlightId(e),t.addExternal((t=>{this._removeHighlightId(t)}),e)}removeObjectState(t){this._highlights.forEach((e=>t.remove(e)))}updateHighlights(t){this._highlightOrderMap=t,this._updateHighlightOptions()}_calculateHighlightOptions(){let t=-1,e=null;return this._highlights.forEach((({highlightName:i})=>{const n=this._highlightOrderMap.get(i);void 0!==n&&n>t&&(t=n,e=i)})),e}_addHighlightId(t){this._highlights.add(t),this._updateHighlightOptions()}_removeHighlightId(t){this._highlights.delete(t),this._updateHighlightOptions()}_updateHighlightOptions(){const t=this._calculateHighlightOptions();t!==this._highlightName&&(this._highlightName=t,this.instanceData.setHighlight(this.instanceIndex,t))}get _lodRenderer(){return this.graphics3DSymbolLayer.lodRenderer}get instanceData(){return this._lodRenderer.instanceData}}const f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=n(),v=n(),x=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],_=t();export{u as Graphics3DLodInstanceGraphicLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{LodResources as e,LodComponentResources as n,LodComponentEngineGeometry as o,LodLevelResources as r}from\"../../webgl-engine/lib/lodRendering/LodResources.js\";function t(e,t){const s=e.stageResources.geometries.map((r=>new n(new o(r),e.stageResources.textures))),l=null==e.lodThreshold||0===e.lodThreshold&&t>0?u(s):e.lodThreshold;return new r(s,l,e.pivotOffset)}function s(n){return new e(n.map(((e,n)=>t(e,n))))}function u(e){const n=e.reduce(((e,n)=>e+n.numTriangles),0);return Math.sqrt(n*l/Math.PI)}const l=20;export{s as makeLodResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport l from\"../../../../core/Error.js\";import{fetchStyle as t,symbolUrlFromStyleItem as e}from\"../../../../symbols/support/styleUtils.js\";import{getStyleItemFromStyle as s,fetchSymbolFromStyle as n}from\"../../../../symbols/support/webStyleSymbolUtils.js\";async function r(r){if(null==r||null==r.styleName&&null==r.styleUrl)return null;const o=r.name;if(null==o)throw new l(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\");const u={portal:r.portal},i=await t(r,u).catch((()=>null));if(null===i)return null;const m=s(o,i.data);if(m&&!m.formatInfos?.some((l=>\"gltf_basisu\"===l.type)))return null;const a=await n(i,o,u,e,{acceptedFormats:[\"web-gltf-basisu\",\"web-gltf\",\"web\"]}).catch((()=>null));if(null===a||\"point-3d\"!==a.type)return null;const y=a.symbolLayers.items[0];return\"object\"===y.type?y.resource:null}export{r as getResourceUrlFromSymbolStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{pt2px as s}from\"../../../../core/screenUtils.js\";import{identity as r,scale as i,translate as a,copy as o}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{l,F as c,v as h,c as d,C as m,g as p,i as u}from\"../../../../chunks/vec32.js\";import{fromArray as y,clone as f,ZEROS as _,ONES as g,fromValues as b,create as P}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as R,create as x}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{computeTranslationToOriginAndRotation as v}from\"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectPointToVector as L}from\"../../../../geometry/projection/projectPointToVector.js\";import{create as C,size as S,containsPoint as w,center as E}from\"../../../../geometry/support/aaBoundingBox.js\";import{defaultPrimitive as j}from\"../../../../symbols/support/ObjectSymbol3DLayerResource.js\";import{objectSymbolLayerPrimitiveBoundingBox as U,objectSymbolLayerSizeWithResourceSize as T}from\"../../../../symbols/support/symbolLayerUtils3D.js\";import{estimateNumVerticesForLods as O,defaultSymbolLayerMemoryComplexity as B}from\"./defaultSymbolComplexity.js\";import{perLodInstanceElevationAligner as G}from\"./ElevationAligners.js\";import{needsElevationUpdates3D as I,evaluateElevationInfoAtPoint as D,SampleElevationInfo as F}from\"./elevationAlignmentUtils.js\";import{Graphics3DLodInstanceGraphicLayer as A}from\"./Graphics3DLodInstanceGraphicLayer.js\";import{Graphics3DSymbolLayer as M}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as z,mixinColorAndOpacity as V,computeObjectScale as k,computeObjectRotation as H}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as W}from\"./interfaces.js\";import{LoadStatus as q}from\"./Loadable.js\";import{makeLodResources as N}from\"./lodResourceUtils.js\";import{fetch as J}from\"./objectResourceUtils.js\";import{placePointOnGeometry as Y,extendPointGraphicElevationContext as $}from\"./pointUtils.js\";import{isValidPrimitive as K,primitiveLodResources as Q}from\"./primitiveObjectSymbolUtils.js\";import{SymbolComplexity as X}from\"./SymbolComplexity.js\";import{getResourceUrlFromSymbolStyle as Z}from\"./webStyleUtils.js\";import{initFastSymbolUpdatesState as ee,updateFastSymbolUpdatesState as te,ConvertOptions as se,evaluateModelTransform as re,evaluateModelTransformScale as ie}from\"../support/FastSymbolUpdates.js\";import{olidEnabled as ae}from\"../../webgl-engine/effects/geometry/olidUtils.js\";import{CullFaceOptions as oe}from\"../../webgl-engine/lib/basicInterfaces.js\";import{VertexAttribute as ne}from\"../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as le}from\"../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{DefaultMaterial as ce}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{schematicMRRFactors as he}from\"../../webgl-engine/materials/pbrUtils.js\";class de{constructor(e,t,s,r,i,a,o,n,l,c,h,d){this.lodResources=e,this.lodRenderer=t,this.stageResources=s,this.originalMaterialParameters=r,this.resourceSize=i,this.isEsriSymbolResource=a,this.isWosr=o,this.resourceBoundingBox=n,this.symbolSize=l,this.extentPadding=c,this.physicalBasedRenderingEnabled=h,this.pivotOffset=d}}class me extends M{getCachedSize(){const[e,t,s]=null!=this._resources?this._resources.symbolSize:[1,1,1];return{width:e,depth:t,height:s}}constructor(e,t,s,r){super(e,t,s,r),this._resources=null,this._optionalFields=new Array,this._instanceIndexToGraphicUid=new Map,this._hasLoadedPBRTextures=!1,this._disposeResourceHandles=new Array,this.skipHighSymbolLodsChanged=!1,this.ensureDrapedStatus(!1),this._hasLoadedPBRTextures=s.physicalBasedRenderingEnabled}async doLoad(e){if(!this._drivenProperties.size){const e=z(this.symbolLayer);if(e)throw new Error(e)}if(this._isPrimitive){const t=this.symbolLayer.resource,s=t&&K(t?.primitive)?t.primitive:j;this._resources=await this._createResourcesForPrimitive(s,e)}else{const t=await Z(this.symbol.styleOrigin),s=t?.href??this.symbolLayer.resource?.href;this._resources=await this._createResourcesForUrl(s,e)}this.layerOpacityChanged(),this.slicePlaneEnabledChanged(),this.physicalBasedRenderingChanged(),this.complexity=this.computeComplexity()}get extentPadding(){return null!=this._resources?this._resources.extentPadding:0}get _isPrimitive(){return!this.symbolLayer.resource?.href}get lodRenderer(){return this._resources?.lodRenderer}get materials(){return this._resources?.stageResources.materials??[]}_setMaterialTransparencyParameters(e,t=this.symbolLayer?.material?.color){const s=this._getCombinedOpacity(t),r=s<1||this.needsDrivenTransparentPass;return e.transparent=r,e.opacity=s,e.cullFace=r?oe.None:oe.Back,e}async _createResourcesForPrimitive(t,r){const i=this.symbolLayer,a=C(U(t)),o=y(S(a)),n=y(T(o,i)),h=l(n),d=!1,m=!1,p=this.symbolLayer?.material?.emissiveFactor,u=p?c(f(p)):_,b={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:he,ambient:g,diffuse:g,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,emissiveFactor:u,offsetTransparentBackfaces:!this.symbolLayer.isPrimitive},P=!!b.usePBR;this._setMaterialTransparencyParameters(b);const x=this.symbol;if(\"point-3d\"===x.type&&x.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:r}=x.verticalOffset;b.verticalOffset={screenLength:s(e),minWorldLength:t||0,maxWorldLength:null!=r?r:1/0},b.castShadows=!1}if(this._context.screenSizePerspectiveEnabled&&(b.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),this._drivenProperties.color)b.externalColor=R;else{const t=null!=i.material?i.material.color:null,s=null!=t?e.toUnitRGBA(t):R;b.externalColor=s}this._fastUpdates=ee(this._context.renderer,this._fastVisualVariableConvertOptions(a,n,o,null)),b.isInstanced=!0,this._fastUpdates?(Object.assign(b,this._fastUpdates.materialParameters),this._optionalFields.push(ne.FEATUREATTRIBUTE)):this._hasPerInstanceColor()&&(b.hasInstancedColor=!0,this._optionalFields.push(ne.COLOR)),ae()&&this._optionalFields.push(ne.OBJECTANDLAYERIDCOLOR);const v=new ce(b,this._context),L=Q(t,v);if(!L)throw new Error(`Unknown object symbol primitive: ${t}`);const w=L.getMaterials().map((e=>({opacity:1,transparent:e.parameters.transparent}))),E=await this._createStageResources(L,P,r),j=await this._createLodRenderer(L,r);return new de(L,j,E,w,o,d,m,a,n,h,P,null)}async _createResourcesForUrl(e,t){const r={isInstanced:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows},i={spherical:this._context.spherical,doublePrecisionRequiresObfuscation:this._context.doublePrecisionRequiresObfuscation,materialParameters:r,streamDataRequester:this._context.streamDataRequester,cache:this._context.sharedResources.objectResourceCache};this._fastUpdates=ee(this._context.renderer,this._fastVisualVariableConvertOptions(null,null,null,null)),this._fastUpdates?(Object.assign(i.materialParameters,this._fastUpdates.materialParameters),this._optionalFields.push(ne.FEATUREATTRIBUTE)):this._hasPerInstanceColor()&&(i.materialParameters.hasInstancedColor=!0,this._optionalFields.push(ne.COLOR)),ae()&&this._optionalFields.push(ne.OBJECTANDLAYERIDCOLOR);const a=this.symbol;if(\"point-3d\"===a.type&&a.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:r}=a.verticalOffset;i.materialParameters.verticalOffset={screenLength:s(e),minWorldLength:t||0,maxWorldLength:null!=r?r:1/0},i.materialParameters.castShadows=!1}const o=this._context.physicalBasedRenderingEnabled;i.signal=t,i.usePBR=o,i.skipHighLods=this._context.skipHighSymbolLods;const n=await J(e,i),c=n.isEsriSymbolResource,h=n.isWosr,d=N(n.lods),m=this._context,p=this.symbolLayer.material,u=this._getExternalColorParameters(p),f=this.symbolLayer?.material?.color,_=this._getCombinedOpacity(f,{hasIntrinsicColor:!0}),g=this.needsDrivenTransparentPass,b=d.getMaterials(),P=d.getMaterials().map((e=>({opacity:e.parameters.opacity||1,transparent:e.parameters.transparent})));b.forEach((e=>{const t=e.parameters;e.setParameters(u);const s=t.opacity*_,r=s<1||g||t.transparent;e.setParameters({opacity:s,transparent:r}),m.screenSizePerspectiveEnabled&&e.setParameters({screenSizePerspective:m.sharedResources.screenSizePerspectiveSettings})}));const R=n.referenceBoundingBox,x=y(S(R)),v=y(d.levels[0].pivotOffset),L=y(T(x,this.symbolLayer)),C=l(L),w=this._fastUpdates;te(w,this._context.renderer,this._fastVisualVariableConvertOptions(R,L,x,v))&&b.forEach((e=>e.setParameters(w.materialParameters)));const E=await this._createStageResources(d,o,t),j=await this._createLodRenderer(d,t);return new de(d,j,E,P,x,c,h,R,L,C,o,v)}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createStageResources(e,s,r){const i=this._context.stage,a=e.getMaterials();s!==this._context.physicalBasedRenderingEnabled&&this.physicalBasedRenderingChanged(),i.addMany(a),this._addDisposeResource((()=>i.removeMany(a)));const o=e.getTextures();i.addMany(o),this._addDisposeResource((()=>{o.forEach((e=>e.unload())),i.removeMany(o)})),await Promise.all(o.map((e=>this._context.stage.schedule((()=>e.load(i.renderView.renderingContext)),r)))),t(r);const n=e.getEngineGeometries();return i.addMany(n),this._addDisposeResource((()=>i.removeMany(n))),{materials:a,textures:o,geometries:n}}async _createLodRenderer(e,t){const s=this._context.stage,r={layerUid:this._context.layer.uid,graphicUid:e=>this._instanceIndexToGraphicUid.get(e),notifyGraphicGeometryChanged:e=>this._context.notifyGraphicGeometryChanged(this._instanceIndexToGraphicUid.get(e)),notifyGraphicVisibilityChanged:e=>this._context.notifyGraphicVisibilityChanged(this._instanceIndexToGraphicUid.get(e))},i=this._fastUpdates,a=i?{applyTransform:(e,t,s)=>{e.getFeatureAttribute(t,ge),o(s,re(i.materialParameters,ge,s))},scaleFactor:(e,t,s)=>{t.getFeatureAttribute(s,ge),ie(e,i.materialParameters,ge)}}:null,n=new le({symbol:e,optionalFields:this._optionalFields,metadata:r,shaderTransformation:a},this._context.scheduler);return n.slicePlaneEnabled=this._context.slicePlaneEnabled,this._addDisposeResource((()=>{s.removeRenderPlugin(n),n.destroy()})),await s.addRenderPlugin(n,t),n}_getExternalColorParameters(t){const s={};return this._drivenProperties.color?s.externalColor=R:null!=t?.color?s.externalColor=e.toUnitRGBA(t.color):(s.externalColor=R,s.colorMixMode=\"ignore\"),s}destroy(){super.destroy(),this._cleanupResources()}_cleanupResources(){this._disposeResourceHandles.forEach((e=>e())),this._disposeResourceHandles.length=0,this._resources=null}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;const s=Y(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for object symbol: ${t.geometry.type}`),null;const r=this.setGraphicElevationContext(t),i=e.renderingInfo;return this._createAs3DShape(t,s,i,r,t.uid,e.layer.uid)}notifyDestroyGraphicLayer(e){this._instanceIndexToGraphicUid.delete(e.instanceIndex)}graphicLayerToGraphicId(){return 0}layerOpacityChanged(){if(null==this._resources)return;const e=this._drivenProperties.opacity,t=!this._isPrimitive,s=this._resources.stageResources.materials,r=this._resources.originalMaterialParameters;for(let i=0;i<s.length;i++){const a=s[i],o=this.symbolLayer?.material?.color,n=r[i],l=this._getCombinedOpacity(o,{hasIntrinsicColor:t})*n.opacity,c=l<1||e||n.transparent;a.setParameters({opacity:l,transparent:c}),this._isPrimitive&&a.setParameters({cullFace:c?oe.None:oe.Back})}}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,I)}slicePlaneEnabledChanged(){if(null==this._resources)return!0;this._resources.lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;for(const e of this._resources.stageResources.materials)e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled});return!0}physicalBasedRenderingChanged(){if(null==this._resources)return!0;const{stageResources:e,isWosr:t}=this._resources;for(const s of e.materials)this._isPrimitive?s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}):t||s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!1});return!1!==this._hasLoadedPBRTextures||!0!==this._context.physicalBasedRenderingEnabled||(this._hasLoadedPBRTextures=!0,!1)}applyRendererDiff(e,t){if(null==this._resources)return W.RecreateSymbol;const{stageResources:{materials:s},lodRenderer:r,resourceBoundingBox:i,symbolSize:a,resourceSize:o,pivotOffset:n}=this._resources;for(const l in e.diff){if(\"visualVariables\"!==l)return W.RecreateSymbol;if(!te(this._fastUpdates,t,this._fastVisualVariableConvertOptions(i,a,o,n)))return W.RecreateSymbol;for(const e of s)e.setParameters(this._fastUpdates.materialParameters);r.notifyShaderTransformationChanged()}return W.FastUpdate}computeComplexity(){if(null==this._resources)return super.computeComplexity();const e=this._resources.lodResources,t=O(e.levels),s=e.computeUsedMemory(),r={...B(this.symbol,this.symbolLayer),resourceBytes:s};return new X({verticesPerFeature:t,memory:r})}_hasLodRenderer(){return null!=this._resources}_createAs3DShape(e,t,s,r,i,a){if(!this._hasLodRenderer()||null==this._resources)return null;const o=this.getFastUpdateAttrValues(e),n=this._context.clippingExtent;if(L(t,ye,this._context.elevationProvider.spatialReference),null!=n&&!w(n,ye))return null;const l=ue(r),c=this._computeGlobalTransform(t,r,_e,be),h=this._computeLocalTransform(this._resources,this.symbolLayer,s,fe),d=this._resources.lodRenderer.instanceData,m=d.addInstance();this._instanceIndexToGraphicUid.set(m,i),d.setLocalTransform(m,h,!1),d.setGlobalTransform(m,c),o&&d.setFeatureAttribute(m,o),null==this._fastUpdates&&this._hasPerInstanceColor()&&d.setColor(m,V(s.color,s.opacity,255));const p=this._context.stage.renderView.olidRenderHelper;p&&d.setObjectAndLayerIdColor(m,p.getObjectAndLayerIdColor({graphicUid:i,layerUid:a}));const u=new A(this,m,G,r,this._context.stage.view.state.highlightOrderMap);return l&&(u.alignedSampledElevation=be.sampledElevation),u.needsElevationUpdates=I(r.mode),$(u,t,this._context.elevationProvider),u}_computeGlobalTransform(e,t,s,r){return D(e,this._context.elevationProvider,t,this._context.renderCoordsHelper,r),ye[0]=e.x,ye[1]=e.y,ye[2]=r.z,v(e.spatialReference,ye,s,this._context.renderCoordsHelper.spatialReference),s}_computeLocalTransform(e,t,s,i){return r(i),this._applyObjectRotation(s,!1,i),this._applyObjectRotation(t,!0,i),this._applyObjectScale(e,s,i),this._applyAnchor(e,t,i),i}_applyObjectScale(e,t,s){if(this._fastUpdates?.requiresShaderTransformation)return;const r=this._drivenProperties.size&&t.size?t.size:e.symbolSize,a=k(r,e.symbolSize,e.resourceSize,this._context.renderCoordsHelper.unitInMeters);1===a[0]&&1===a[1]&&1===a[2]||i(s,s,a)}prepareSymbolLayerPatch(e){if(\"partial\"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchTransform(e,t),this._preparePatchColor(e,t)}updateGeometry(e,t){if(null==this._resources)return!0;const s=t&&Y(t);if(null==s)return!1;const r=this.getGeometryElevationMode(t);return e.elevationContext.mode===r&&(this._computeGlobalTransform(s,e.elevationContext,_e,be),ue(e.elevationContext)&&(e.alignedSampledElevation=be.sampledElevation),this._resources.lodRenderer.instanceData.setGlobalTransform(e.instanceIndex,_e,!0),$(e,s,this._context.elevationProvider),!0)}_preparePatchTransform(e,t){if(!(t.heading||t.tilt||t.roll||t.width||t.height||t.depth||t.anchor||t.anchorPosition))return;if(null==this._resources)return;const s=(e,t,s)=>(null!=e&&\"complete\"===e.type?e.newValue:t)??s,r=s(t.heading,this.symbolLayer.heading,0),i=s(t.tilt,this.symbolLayer.tilt,0),a=s(t.roll,this.symbolLayer.roll,0),o=s(t.width,this.symbolLayer.width,void 0),n=s(t.height,this.symbolLayer.height,void 0),l=s(t.depth,this.symbolLayer.depth,void 0),c=s(t.anchor,this.symbolLayer.anchor,void 0),h=s(t.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete t.heading,delete t.tilt,delete t.roll,delete t.width,delete t.height,delete t.depth,delete t.anchor,delete t.anchorPosition;const d={heading:r,tilt:i,roll:a,anchor:c,anchorPosition:h},m=this._resources;this.loadStatus===q.LOADED&&e.symbolLayerStatePatches.push((()=>{m.symbolSize=y(T(m.resourceSize,{width:o,height:n,depth:l,isPrimitive:this.symbolLayer.isPrimitive}))})),e.graphics3DGraphicPatches.push((({instanceIndex:e},t)=>{const s=this._computeLocalTransform(m,d,t,fe);m.lodRenderer.instanceData.setLocalTransform(e,s,!0)}))}_preparePatchColor(t,s){if(!s.material||\"partial\"!==s.material.type)return;const r=s.material.diff;if(!r.color||\"complete\"!==r.color.type||null==r.color.newValue||null==r.color.oldValue)return;const i=r.color.newValue,a=null!=i?e.toUnitRGBA(i):R;delete r.color;const o=this._resources;null!=o&&t.graphics3DGraphicPatches.push((({instanceIndex:e})=>{let t;this._hasPerInstanceColor()?(o.lodRenderer.instanceData.setColor(e,a),t=this._setMaterialTransparencyParameters({},i)):t=this._setMaterialTransparencyParameters({externalColor:a},i);for(const s of o.stageResources.materials)s.setParameters(t)}))}_applyObjectRotation(e,t,s){if(!this._fastUpdates?.requiresShaderTransformation||!t)return H(e.heading,e.tilt,e.roll,s)}_applyAnchor(e,t,s){if(this._fastUpdates?.requiresShaderTransformation)return;const r=pe(e.resourceBoundingBox,e.pivotOffset,t);r&&a(s,s,r)}_hasPerInstanceColor(){return this._drivenProperties.color||this._drivenProperties.opacity}_fastVisualVariableConvertOptions(e,t,s,r){const i=null!=e?y(S(e)):g,a=null!=e?pe(e,r,this.symbolLayer):_,o=this._context.renderCoordsHelper.unitInMeters,n=k(null!=t?t:void 0,t,s,o),l=b(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return new se({size:!0,color:!0,rotation:!0,opacity:!1},i,t??g,o,a,n,l)}}function pe(e,t,s){const r=P();switch(s.anchor){case\"center\":d(r,E(e)),h(r,r);break;case\"top\":{const t=E(e);u(r,-t[0],-t[1],-e[5]);break}case\"bottom\":{const t=E(e);u(r,-t[0],-t[1],-e[2]);break}case\"relative\":{const t=E(e),i=S(e),a=s.anchorPosition,o=a?b(a.x,a.y,a.z):_;m(r,i,o),p(r,r,t),h(r,r);break}default:null!=t?h(r,t):d(r,_)}return r}function ue(e){return\"absolute-height\"!==e.mode}const ye=P(),fe=n(),_e=n(),ge=x(),be=new F;export{me as Graphics3DObjectSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{estimateNumberArrayMemory as t}from\"../../../../core/memoryEstimations.js\";import{l as i,n as s,c as o}from\"../../../../chunks/vec32.js\";import{fromValues as e}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newFloatArray as h}from\"../../../../geometry/support/FloatArray.js\";class n{constructor(t,i,s,o){this.vertices=t,this.positionsES=i,this.offset=o;const n=t.length,r=Math.floor(n/2),g=this.offset+3*r,v=s[g],f=s[g+1],c=s[g+2];this.origin=e(v,f,c),this.positions=h(3*n);const a=this.offset+3*n;for(let e=this.offset;e<a;e+=3)this.positions[e]=s[e]-v,this.positions[e+1]=s[e+1]-f,this.positions[e+2]=s[e+2]-c;this.updatePathVertexInformation()}get usedMemory(){return t(this.positions)}updatePathVertexInformation(){const t=this.vertices.length,e=this.vertices[0];let h=this.offset;const n=this.positions;e.vRight[0]=n[h+3]-n[h],e.vRight[1]=n[h+4]-n[h+1],e.vRight[2]=n[h+5]-n[h+2],h+=3;let r=i(e.vRight);e.vMinSiblingLength=r,s(e.vRight,e.vRight);let g=e;for(let v=1;v<t;++v){const e=this.vertices[v];if(e.vLeft=g.vRight,v<t-1){e.vRight[0]=n[h+3]-n[h],e.vRight[1]=n[h+4]-n[h+1],e.vRight[2]=n[h+5]-n[h+2];const t=i(e.vRight);e.vMinSiblingLength=Math.min(r,t),r=t,s(e.vRight,e.vRight)}else o(e.vRight,e.vLeft),e.vMinSiblingLength=r;g=e,h+=3}}}export{n as Path};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{estimateNumberArrayMemory as t}from\"../../../../core/memoryEstimations.js\";import{newFloatArray as e,floatSubArray as i}from\"../../../../geometry/support/FloatArray.js\";import{newIntArray as s,compactIndices as r}from\"../../../../geometry/support/Indices.js\";class o{constructor(t,r,o,h,p,n={}){this.path=t,this.profile=r,this.extruder=o,this.startCap=h,this.endCap=p,this.options=n,this._extrusionVertexCount=0;const l=this.path.vertices.length-2;this.numExtrusionProfiles=o.numProfilesPerJoin()*l+2,this.numVerticesTotal=r.vertices.length*this.numExtrusionProfiles,this.startCap.vertexBufferStart=this.numVerticesTotal;const a=this.startCap.numVertices;this.numVerticesTotal+=a,this.endCap.vertexBufferStart=this.numVerticesTotal;const u=this.endCap.numVertices;this.numVerticesTotal+=u,this.pathVertexData=s(1*this.numVerticesTotal),this.profileRightAxes=e(4*this.numVerticesTotal),this.profileUpAxes=e(4*this.numVerticesTotal),this.profileVertexAndNormals=e(4*this.numVerticesTotal),this.positions=i(t.positions,t.offset,3*t.vertices.length),this._rebuildGeometry(),this.buildTopology()}get usedMemory(){return t(this.pathVertexData,this.profileRightAxes,this.profileUpAxes,this.profileVertexAndNormals)+this.path.usedMemory+this.profile.usedMemory}emitVertex(t,e,i,s,r){const o=4*this._extrusionVertexCount;if(this.profileRightAxes[o]=e.right[0],this.profileRightAxes[o+1]=e.right[1],this.profileRightAxes[o+2]=e.right[2],this.profileUpAxes[o]=e.up[0],this.profileUpAxes[o+1]=e.up[1],this.profileUpAxes[o+2]=e.up[2],this.profileVertexAndNormals[o]=i[0],this.profileVertexAndNormals[o+1]=i[1],this.profileVertexAndNormals[o+2]=s[0],this.profileVertexAndNormals[o+3]=s[1],this.pathVertexData[this._extrusionVertexCount]=t,r){const e=this.path.vertices[t],i=e.maxStretchDistance;this.profileRightAxes[o+3]=e.rotationRight[0]*i,this.profileUpAxes[o+3]=e.rotationRight[1]*i}else this.profileRightAxes[o+3]=0,this.profileUpAxes[o+3]=0;++this._extrusionVertexCount}emitCapVertex(t,e,i,s,r,o){const h=4*this._extrusionVertexCount;this.profileRightAxes[h]=e.right[0],this.profileRightAxes[h+1]=e.right[1],this.profileRightAxes[h+2]=e.right[2],this.profileRightAxes[h+3]=r,this.profileUpAxes[h]=e.up[0],this.profileUpAxes[h+1]=e.up[1],this.profileUpAxes[h+2]=e.up[2],this.profileUpAxes[h+3]=o,this.profileVertexAndNormals[h]=i[0],this.profileVertexAndNormals[h+1]=i[1],this.profileVertexAndNormals[h+2]=s[0],this.profileVertexAndNormals[h+3]=s[1],this.pathVertexData[this._extrusionVertexCount]=t,++this._extrusionVertexCount}_rebuildGeometry(){this._extrusionVertexCount=0;const{positions:t,offset:e,vertices:s}=this.path;this.positions=i(t,e,3*s.length);let r=0;const o=(t,e,i,s,o)=>this.emitCapVertex(r,t,e,i,s,o),h=(t,e,i,s)=>this.emitVertex(r,t,e,i,s);for(this.startCap.rebuildConnectingProfileGeometry(s[r],this.profile,o),r=1;r<s.length-1;++r)this.extruder.extrude(s[r],this.profile,h);this.endCap.rebuildConnectingProfileGeometry(s[r],this.profile,o),r=0,this.startCap.rebuildCapGeometry(s[r],o),r=s.length-1,this.endCap.rebuildCapGeometry(s[r],o)}buildTopology(){const t=this.profile.vertices.length,e=this.profile.numSegments,i=this.numExtrusionProfiles-1;let s=3*(2*(e*i));this.startCap.indexBufferStart=s,this.startCap.firstProfileVertexIndex=0,s+=this.startCap.numIndices,this.endCap.indexBufferStart=s,this.endCap.firstProfileVertexIndex=t*(this.numExtrusionProfiles-1);const o=new Array,h=new Array,p=new Array,n=(t,e,i)=>{o.push(t),o.push(e),o.push(i),h.push(t),h.push(e),h.push(i),p.push(this.pathVertexData[t]),p.push(this.pathVertexData[e]),p.push(this.pathVertexData[i])};for(let r=0;r<e;++r){const e=this.profile.indices[2*r],s=this.profile.indices[2*r+1];for(let r=0;r<i;++r){const i=r*t+e,o=(r+1)*t+s,h=r*t+s;n(i,(r+1)*t+e,o),n(i,o,h)}}this.startCap.buildTopology(this.path.vertices[0],n),this.endCap.buildTopology(this.path.vertices[this.path.vertices.length-1],n),this.vertexIndices=r(o),this.normalIndices=r(h),this.pathVertexIndices=r(p)}onPathChanged(){this._rebuildGeometry()}}export{o as PathBuilder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{set as e,subtract as t,scale as s,add as i,normalize as r}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";class o{rebuildConnectingProfileGeometry(e,t,s){for(let i=0;i<t.vertices.length;++i)s(e.frame,t.vertices[i],t.normals[i],0,0)}}class l extends o{constructor(){super(),this.numVertices=0,this.numIndices=0}rebuildCapGeometry(){}buildTopology(){}}class f extends o{constructor(e,t=0,s=!1){super(),this.profile=e,this.profilePlaneOffset=t,this.flip=s}get numVertices(){return this.profile.vertices.length}get numIndices(){return 3*this.profile.numSegments}rebuildConnectingProfileGeometry(e,t,s){const i=this.profilePlaneOffset;for(let r=0;r<t.vertices.length;++r)s(e.frame,t.vertices[r],t.normals[r],i,0)}rebuildCapGeometry(t,s){const i=this.profile,r=this.flip?1:-1,n=this.profilePlaneOffset,o=m;e(o,0,0);for(let e=0;e<i.vertices.length;++e)s(t.frame,i.vertices[e],o,n,r)}buildTopology(e,t){const s=this.profile,i=this.vertexBufferStart+s.indices[0];for(let r=1;r<s.numSegments;++r){const e=s.indices[2*r],n=s.indices[2*r+1],o=this.vertexBufferStart+e,l=this.vertexBufferStart+n;this.flip?t(l,o,i):t(i,o,l)}}}class h extends o{constructor(e){super(),this.flip=!1,this.sign=0,this.breakNormals=!1,this.numSegments=3,this.profile=e.profile,this.flip=e.flip,this.sign=this.flip?1:-1,this.breakNormals=e.breakNormals,this.numSegments=e.subdivisions}get numVertices(){let e=this.profile.vertices.length*(this.numSegments-1)+this.profile.poles.length;return this.breakNormals&&(e+=this.profile.vertices.length),e}get numIndices(){let e=0;const t=this.profile;e+=2*t.numSegments*(this.numSegments-1);for(let s=0;s<t.numSegments;++s){const i=t.indices[2*s],r=t.indices[2*s+1];t.poleIndices[i]===t.poleIndices[r]?e+=1:e+=2}return 3*e}rebuildCapGeometry(n,o){const l=this.profile,f=n.frame,h=.5*this.sign,p=c,a=m;e(a,0,0);for(const e of l.poles)e.normal?o(f,e.position,e.normal,h,0):o(f,e.position,a,h,this.sign);if(this.breakNormals)for(let e=0;e<l.vertices.length;++e)o(f,l.vertices[e],l.normals[e],0,0);for(let e=0;e<this.numSegments-1;++e){const n=(1-(e+1)/this.numSegments)*Math.PI*.5,c=Math.sin(n),m=Math.cos(n);for(let e=0;e<l.vertices.length;++e){const n=l.poles[l.poleIndices[e]];t(p,l.vertices[e],n.position),s(p,p,c),n.normal?(i(p,p,n.position),o(f,p,n.normal,h*m,0)):(r(a,p),s(a,a,c),i(p,p,n.position),o(f,p,a,h*m,this.sign*m))}}}buildTopology(e,t){const s=this.profile,i=this.breakNormals?this.vertexBufferStart+s.poles.length:this.firstProfileVertexIndex,r=this.breakNormals?this.vertexBufferStart+s.poles.length+s.vertices.length:this.vertexBufferStart+s.poles.length;for(let n=0;n<s.numSegments;++n){const e=s.indices[2*n],o=s.indices[2*n+1],l=this.vertexBufferStart+s.poleIndices[e],f=this.vertexBufferStart+s.poleIndices[o];let h=i+e,c=i+o;for(let i=0;i<this.numSegments-1;++i){const n=r+i*s.vertices.length+e,l=r+i*s.vertices.length+o;this.flip?(t(n,c,h),t(c,n,l)):(t(h,c,n),t(l,n,c)),h=n,c=l}this.flip?(t(l,c,h),l!==f&&t(l,f,c)):(t(h,c,l),l!==f&&t(c,f,l))}}}const c=n(),m=n();export{l as NoCapBuilder,o as PathCapBuilder,h as RoundCapBuilder,f as TriangulationCapBuilder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fromRotation as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as e}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{dot as r}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as i}from\"../../../../chunks/vec32.js\";import{create as o}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class n{}class c{numProfilesPerJoin(){return 1}extrude(t,e,r){for(let s=0;s<e.vertices.length;++s)r(t.frame,e.vertices[s],e.normals[s],!1)}}class a{constructor(t,e){this.cutoffAngle=t,this.numBendSubdivisions=e}numProfilesPerJoin(){return this.numBendSubdivisions+1}extrude(e,s,i){const o=h,{rotationAngle:n,rotationRight:c,frame:a}=e;if(Math.abs(n)>=this.cutoffAngle){const l=e.rotationFrameUp;for(let h=0;h<this.numBendSubdivisions+1;++h){t(u,.5*-n+h*n/this.numBendSubdivisions,l),m(o,a,u);for(let t=0;t<s.vertices.length;++t){if(r(s.vertices[t],c)*n>=0)i(o,s.vertices[t],s.normals[t],!1);else{i(a,e.applyMiterStretch(f,s.vertices[t]),s.normals[t],!0)}}}}else for(let t=0;t<this.numBendSubdivisions+1;++t)for(let o=0;o<s.vertices.length;++o){const t=r(s.vertices[o],c)*n>=0;i(a,e.applyMiterStretch(f,s.vertices[o]),s.normals[o],!t)}}}class l{constructor(){this.up=o(),this.right=o()}}function m(t,e,r){i(t.up,e.up,r),i(t.right,e.right,r)}const f=s(),u=e(),h=new l;export{l as Frame2D,a as MiterExtruder,n as PathExtruder,c as SimpleExtruder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ContentObjectType as t}from\"./ContentObjectType.js\";import{Geometry as r}from\"./Geometry.js\";class e extends r{constructor(r,e,o,n,s,i){super(r,e,null,t.Mesh,i),this.path=o,this.geometrySR=n,this.stencilWidth=s}}var o;function n(t){return\"path\"in t}!function(t){t[t.World=0]=\"World\",t[t.Path=1]=\"Path\"}(o||(o={}));export{e as PathGeometry,o as UpVectorAlignment,n as isPathGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{set as t,length as e,normalize as r,dot as i,scale as s,add as o}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as n,e as h}from\"../../../../chunks/vec32.js\";import{create as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as c}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{newFloatArray as u}from\"../../../../geometry/support/FloatArray.js\";import{getZeroIndexArray as b}from\"../../../../geometry/support/Indices.js\";import{Attribute as v,Vertices as m}from\"./Attribute.js\";import{compressNormal as p}from\"./Normals.js\";import{intersectTriangles as x}from\"./RayIntersections.js\";import{VertexAttribute as A}from\"./VertexAttribute.js\";class d{constructor(t){this.builder=t}onPathChanged(t){this.builder.onPathChanged()}}class f extends d{constructor(t){super(t),this.vertexAttributeColor=c(255,255,255,255),this.size=new Array,this.vertexAttributePosition=u(3*this.builder.numVerticesTotal),this.vertexAttributeNormal=new Int16Array(2*this.builder.numVerticesTotal)}bakeVertexColors(t){this.vertexAttributeColor[0]=255*t[0],this.vertexAttributeColor[1]=255*t[1],this.vertexAttributeColor[2]=255*t[2],this.vertexAttributeColor[3]=255*(t.length>3?t[3]:1)}bake(a){this.size=a;const{numVerticesTotal:l,pathVertexData:c,path:u,positions:b,profileRightAxes:v,profileUpAxes:m,profileVertexAndNormals:x}=this.builder;for(let A=0;A<l;++A){let l=c[A];const d=0===l||l===u.vertices.length-1;l*=3;const f=V;let g=0,D=0;const N=4*A,j=n(R,v[N],v[N+1],v[N+2]),E=n(w,m[N],m[N+1],m[N+2]),y=t(P,x[N]*a[0],x[N+1]*a[1]);if(d)h(f,E,j),g=v[N+3]*a[0],D=m[N+3];else{const a=I,h=C;t(a,v[N+3],m[N+3]);const l=e(a);r(a,a);const c=i(y,a);if(Math.abs(c)>l){t(h,-a[1],a[0]);const e=i(y,h);s(a,a,l*Math.sign(c)),s(h,h,e),o(y,a,h)}n(f,0,0,0)}const T=n(O,j[0]*y[0]+E[0]*y[1],j[1]*y[0]+E[1]*y[1],j[2]*y[0]+E[2]*y[1]),L=3*A;this.vertexAttributePosition[L]=b[l]+T[0]+f[0]*g,this.vertexAttributePosition[L+1]=b[l+1]+T[1]+f[1]*g,this.vertexAttributePosition[L+2]=b[l+2]+T[2]+f[2]*g;const M=t(P,x[N+2],x[N+3]);p(this.vertexAttributeNormal,A,j[0]*M[0]+E[0]*M[1]+f[0]*D,j[1]*M[0]+E[1]*M[1]+f[1]*D,j[2]*M[0]+E[2]*M[1]+f[2]*D)}}createGeometryData(){const t=this.builder.vertexIndices.length,{normalIndices:e,vertexIndices:r}=this.builder;return[[A.POSITION,new v(this.vertexAttributePosition,r,3,!0)],[A.NORMALCOMPRESSED,new v(this.vertexAttributeNormal,e,2,!0)],[A.COLOR,new v(this.vertexAttributeColor,b(t),4)]]}onPathChanged(t){super.onPathChanged(t),this.bake(this.size)}intersect(t,e,r,i){const s=this.builder.vertexIndices,o=new m(this.vertexAttributePosition,3),a=s.length/3;x(t,e,0,a,s,o,void 0,r,((t,e,r)=>i(t,r,e,!1)))}}class g extends d{constructor(t,e,r,i){super(t),this.sizeAttributeValue=e,this.colorAttributeValue=r,this.opacityAttributeValue=i,this.vvData=null,this.baked=new f(t),this.vvData=u(4*this.builder.path.vertices.length);for(let s=0;s<this.builder.path.vertices.length;++s){this.vvData[4*s]=e,this.vvData[4*s+1]=r,this.vvData[4*s+2]=i;const t=0===s||s===this.builder.path.vertices.length-1;this.vvData[4*s+3]=t?1:0}}createGeometryData(){const{positions:t,profileRightAxes:e,profileUpAxes:r,profileVertexAndNormals:i,pathVertexIndices:s,vertexIndices:o}=this.builder;return[[A.POSITION,new v(t,s,3,!0)],[A.PROFILERIGHT,new v(e,o,4,!0)],[A.PROFILEUP,new v(r,o,4,!0)],[A.PROFILEVERTEXANDNORMAL,new v(i,o,4,!0)],[A.FEATUREVALUE,new v(this.vvData,s,4,!0)]]}onPathChanged(t){super.onPathChanged(t);const e=t.getMutableAttribute(A.POSITION);e&&(e.data=this.builder.positions)}}const P=a(),I=a(),C=a(),O=l(),V=l(),R=l(),w=l();export{g as FastUpdatePathGeometry,d as PathGeometryData,f as StaticPathGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{c as t,i as e,g as r,l as s,n as o,e as i}from\"../../../../chunks/vec32.js\";import{create as m}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as a,fromPositionAndNormal as f,intersectRay as p}from\"../../../../geometry/support/plane.js\";import{wrap as c}from\"../../../../geometry/support/ray.js\";import{makeOrthoBasisDirUpFallback as g}from\"./GeometryUtil.js\";function l(l,v){let h=null;const u=l.vertices.length,j=.99619469809,R=m(),y=m(),x=m(),L=m(),b=m(),k=m(),q=a();let G=l.vertices[0];t(y,v),e(R,0,1,0),g(G.vRight,y,R,R,x,y,j),t(G.frame.up,y),t(G.frame.right,x);const M=l.positions;let U=l.offset;h=G;for(let m=1;m<u;++m){G=l.vertices[m],r(b,G.vLeft,G.vRight);let a=s(b);a>0?(a=1/Math.sqrt(a),b[0]=b[0]*a,b[1]=b[1]*a,b[2]=b[2]*a):(b[0]=G.vRight[0],b[1]=G.vRight[1],b[2]=G.vRight[2]),k[0]=M[U]+h.frame.up[0],k[1]=M[U+1]+h.frame.up[1],k[2]=M[U+2]+h.frame.up[2],U+=3;const v=e(n,M[U],M[U+1],M[U+2]);f(v,b,q);p(q,c(k,G.vLeft),L)?(L[0]-=M[U],L[1]-=M[U+1],L[2]-=M[U+2],o(y,L),i(x,b,y),o(x,x)):g(b,h.frame.up,h.frame.right,R,x,y,j),t(G.frame.up,y),t(G.frame.right,x),h=G}}const n=m();export{l as computeMinimumRotationTangentFrame};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{estimateNumberArrayMemory as t}from\"../../../../core/memoryEstimations.js\";import{fromValues as e,clone as s}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{pathNumCircleProfileSubdivisions as o}from\"../../layers/graphics/Graphics3DPathSymbolLayerConstants.js\";class r{constructor(){this.vertices=new Array,this.normals=new Array,this.indices=new Array,this.poles=new Array,this.poleIndices=new Array}addVertex(t,e){return this.vertices.push(s(t)),this.normals.push(s(e)),this.vertices.length-1}addPole(t,e=null){return this.poles.push({position:s(t),normal:e?s(e):null}),this.poles.length-1}addSegment(t,e=null){this.indices.push(t.v0),this.indices.push(t.v1),e&&(this.poleIndices.push(e.v0),this.poleIndices.push(e.v1))}get numSegments(){return this.indices.length/2}translate(t,e){for(const s of this.vertices)s[0]+=t,s[1]+=e;for(const s of this.poles)s.position[0]+=t,s.position[1]+=e}get usedMemory(){return this.vertices.length*t(this.vertices[0])*2+t(this.indices)}}const n={top:[0,-.5],bottom:[0,.5]};function i(t){const s=.5,i=o,d=new r,a={v0:0,v1:0};d.addPole(e(0,0));for(let o=0;o<i;++o){const t=2*o*Math.PI/i,r=Math.cos(t),n=Math.sin(t),a=e(r*s,n*s),c=e(r,n);d.addVertex(a,c)}for(let e=0;e<i-1;++e){const t={v0:e,v1:e+1};d.addSegment(t,a)}const c={v0:i-1,v1:0};if(d.addSegment(c,a),\"center\"!==t){const e=n[t];d.translate(e[0],e[1])}return d}const d={center:i(\"center\"),top:i(\"top\"),bottom:i(\"bottom\")},a={center:c(\"center\"),top:c(\"top\"),bottom:c(\"bottom\")};function c(t){const s=1,o=1,i=new r,d=e(-.5,-.5),a=e(.5*s,-.5),c=e(.5*s,.5*o),h=e(-.5,.5*o),l=e(0,-1),v=e(1,0),m=e(0,1),p=e(-1,0);if(i.addPole(e(0,.5*o),m),i.addPole(e(0,.5*o)),i.addPole(e(0,-.5)),i.addPole(e(0,-.5),l),i.addVertex(d,l),i.addVertex(a,l),i.addSegment({v0:0,v1:1},{v0:3,v1:3}),i.addVertex(a,v),i.addVertex(c,v),i.addSegment({v0:2,v1:3},{v0:2,v1:1}),i.addVertex(c,m),i.addVertex(h,m),i.addSegment({v0:4,v1:5},{v0:0,v1:0}),i.addVertex(h,p),i.addVertex(d,p),i.addSegment({v0:6,v1:7},{v0:1,v1:2}),\"center\"!==t){const e=n[t];i.translate(e[0],e[1])}return i}export{r as PathProfile,d as circleProfiles,a as quadProfiles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getEpsilon as t}from\"./common.js\";function n(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function a(t,n,r,a,u){return t[0]=n,t[1]=r,t[2]=a,t[3]=u,t}function u(t,n){if(t===n){const r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function o(t,n){const r=n[0],a=n[1],u=n[2],o=n[3];let e=r*o-u*a;return e?(e=1/e,t[0]=o*e,t[1]=-a*e,t[2]=-u*e,t[3]=r*e,t):null}function e(t,n){const r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t}function c(t){return t[0]*t[3]-t[2]*t[1]}function s(t,n,r){const a=n[0],u=n[1],o=n[2],e=n[3],c=r[0],s=r[1],i=r[2],f=r[3];return t[0]=a*c+o*s,t[1]=u*c+e*s,t[2]=a*i+o*f,t[3]=u*i+e*f,t}function i(t,n,r){const a=n[0],u=n[1],o=n[2],e=n[3],c=Math.sin(r),s=Math.cos(r);return t[0]=a*s+o*c,t[1]=u*s+e*c,t[2]=a*-c+o*s,t[3]=u*-c+e*s,t}function f(t,n,r){const a=n[0],u=n[1],o=n[2],e=n[3],c=r[0],s=r[1];return t[0]=a*c,t[1]=u*c,t[2]=o*s,t[3]=e*s,t}function l(t,n){const r=Math.sin(n),a=Math.cos(n);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t}function M(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function h(t){return\"mat2(\"+t[0]+\", \"+t[1]+\", \"+t[2]+\", \"+t[3]+\")\"}function b(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2)}function m(t,n,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,n,r]}function d(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function p(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function y(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function x(n,r){const a=n[0],u=n[1],o=n[2],e=n[3],c=r[0],s=r[1],i=r[2],f=r[3],l=t();return Math.abs(a-c)<=l*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-s)<=l*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(o-i)<=l*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(e-f)<=l*Math.max(1,Math.abs(e),Math.abs(f))}function S(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function j(t,n,r,a){return t[0]=n[0]+r[0]*a,t[1]=n[1]+r[1]*a,t[2]=n[2]+r[2]*a,t[3]=n[3]+r[3]*a,t}const _=s,g=p,q=Object.freeze(Object.defineProperty({__proto__:null,LDU:m,add:d,adjoint:e,copy:n,determinant:c,equals:x,exactEquals:y,frob:b,fromRotation:l,fromScaling:M,identity:r,invert:o,mul:_,multiply:s,multiplyScalar:S,multiplyScalarAndAdd:j,rotate:i,scale:f,set:a,str:h,sub:g,subtract:p,transpose:u},Symbol.toStringTag,{value:\"Module\"}));export{m as LDU,d as add,e as adjoint,n as copy,c as determinant,x as equals,y as exactEquals,b as frob,l as fromRotation,M as fromScaling,r as identity,o as invert,q as m,_ as mul,s as multiply,S as multiplyScalar,j as multiplyScalarAndAdd,i as rotate,f as scale,a as set,h as str,g as sub,p as subtract,u as transpose};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3]]}function t(e,r,t,n){return[e,r,t,n]}function n(e,r){return new Float64Array(e,r,4)}const o=Object.freeze(Object.defineProperty({__proto__:null,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{r as clone,e as create,n as createView,t as fromValues,o as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{acosClamped as t,reciprocalClamped as i}from\"../../../../core/mathUtils.js\";import{set as r}from\"../../../../core/libs/gl-matrix-2/math/mat2.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat2f64.js\";import{set as e,transformMat2 as a}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{UNIT_X as h,create as o}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{c as n,g as m,n as g,h as f,f as c,d as u,e as l,v as p}from\"../../../../chunks/vec32.js\";import{create as v}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Frame2D as M}from\"./PathExtruder.js\";import{UpVectorAlignment as b}from\"./PathGeometry.js\";class R{constructor(){this.vLeft=v(),this.vRight=v(),this.vMinSiblingLength=0,this.frame=new M}setFrameFromUpVector(t){n(this.frame.up,t),m(D,this.vLeft,this.vRight),g(D,D),f(I,this.frame.up,c(D,this.frame.up)),u(k,D,I),g(k,k),l(this.frame.right,k,this.frame.up)}get foldingAngle(){return Math.PI-this.rotationAngle}}class x extends R{get rotationFrameUp(){return this.frame.up}get rotationRight(){return h}get rotationAngle(){f(w,this.frame.up,c(this.frame.up,this.vLeft)),u(w,this.vLeft,w),p(w,w),g(w,w),f(y,this.frame.up,c(this.frame.up,this.vRight)),u(y,this.vRight,y),g(y,y),l(U,this.rotationFrameUp,this.vLeft);return Math.sign(c(U,this.vRight))*(Math.PI-t(c(w,y)))}get maxStretchDistance(){return Math.abs(this.vMinSiblingLength/Math.cos(.5*this.foldingAngle))}applyMiterStretch(t,r){const s=this.rotationAngle;if(Math.abs(s)<=0)return r;const a=i(Math.cos(.5*s));return e(t,(a-1+1)*r[0],r[1])}}class L extends R{get rotationFrameUp(){const t=Math.sign(c(this.frame.right,this.vRight));return l(A,this.vRight,this.vLeft),f(A,A,t),g(A,A)}get rotationRight(){const t=this.rotationFrameUp,i=c(t,this.frame.up),r=c(t,this.frame.right);return f(F,this.frame.up,-r),f(P,this.frame.right,i),m(F,F,P),g(F,F),j(S,this.frame,F),S}get rotationAngle(){const i=Math.sign(c(this.frame.right,this.vRight));return p(U,this.vLeft),-i*(Math.PI-t(c(U,this.vRight)))}get maxStretchDistance(){return Math.abs(this.vMinSiblingLength*i(Math.cos(.5*this.foldingAngle)))}applyMiterStretch(t,s){const e=this.rotationAngle;if(0===Math.abs(e))return s;const h=i(Math.cos(.5*e)),o=this.rotationRight,n=r(E,1+(h-1)*o[0]*o[0],(h-1)*o[0]*o[1],(h-1)*o[0]*o[1],1+(h-1)*o[1]*o[1]);return a(t,s,n)}}function j(t,i,r){e(t,c(r,i.right),c(r,i.up))}function d(t){switch(t){case b.World:return new x;case b.Path:return new L}}const A=v(),S=o(),F=v(),P=v(),U=v(),w=v(),y=v(),I=v(),D=v(),k=v(),E=s();export{R as PathVertex,d as newPathVertex};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fromValues as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{PositionAttribute as o}from\"./PositionAttribute.glsl.js\";import{Float2PassUniform as i}from\"../../shaderModules/Float2PassUniform.js\";import{Float3PassUniform as r}from\"../../shaderModules/Float3PassUniform.js\";import{Float4sPassUniform as t}from\"../../shaderModules/Float4sPassUniform.js\";import{FloatsPassUniform as a}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as l}from\"../../shaderModules/glsl.js\";import{VertexAttribute as v}from\"../../../lib/VertexAttribute.js\";import{vvColorNumber as s,VisualVariablePassParameters as c}from\"../../../materials/VisualVariablePassParameters.js\";const p=8;function f(e,c){const f=v.FEATUREVALUE;e.attributes.add(f,\"vec4\");const n=e.vertex;n.code.add(l`\n  bool isCapVertex() {\n    return ${f}.w == 1.0;\n  }\n  `),n.uniforms.add(new i(\"size\",(e=>e.size))),c.vvSize?(n.uniforms.add(new r(\"vvSizeMinSize\",(e=>e.vvSize.minSize)),new r(\"vvSizeMaxSize\",(e=>e.vvSize.maxSize)),new r(\"vvSizeOffset\",(e=>e.vvSize.offset)),new r(\"vvSizeFactor\",(e=>e.vvSize.factor))),n.code.add(l`\n    vec2 getSize() {\n      return size * clamp(vvSizeOffset + ${f}.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).xz;\n    }\n    `)):n.code.add(l`vec2 getSize(){\nreturn size;\n}`),c.vvOpacity?(n.constants.add(\"vvOpacityNumber\",\"int\",p),n.uniforms.add(new a(\"vvOpacityValues\",(e=>e.vvOpacity.values),p),new a(\"vvOpacityOpacities\",(e=>e.vvOpacity.opacityValues),p)),n.code.add(l`\n    vec4 applyOpacity(vec4 color) {\n      float value = ${f}.z;\n      if (value <= vvOpacityValues[0]) {\n        return vec4( color.xyz, vvOpacityOpacities[0]);\n      }\n\n      for (int i = 1; i < vvOpacityNumber; ++i) {\n        if (vvOpacityValues[i] >= value) {\n          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\n          return vec4( color.xyz, mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f));\n        }\n      }\n\n      return vec4( color.xyz, vvOpacityOpacities[vvOpacityNumber - 1]);\n    }\n    `)):n.code.add(l`vec4 applyOpacity(vec4 color){\nreturn color;\n}`),c.vvColor?(n.constants.add(\"vvColorNumber\",\"int\",s),n.uniforms.add(new a(\"vvColorValues\",(e=>e.vvColor.values),s),new t(\"vvColorColors\",(e=>e.vvColor.colors),s)),n.code.add(l`\n    vec4 getColor() {\n      float value = ${f}.y;\n      if (value <= vvColorValues[0]) {\n        return applyOpacity(vvColorColors[0]);\n      }\n\n      for (int i = 1; i < vvColorNumber; ++i) {\n        if (vvColorValues[i] >= value) {\n          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n          return applyOpacity(mix(vvColorColors[i-1], vvColorColors[i], f));\n        }\n      }\n\n      return applyOpacity(vvColorColors[vvColorNumber - 1]);\n    }\n    `)):n.code.add(l`vec4 getColor(){\nreturn applyOpacity(vec4(1, 1, 1, 1));\n}`),e.include(o),e.attributes.add(v.PROFILERIGHT,\"vec4\"),e.attributes.add(v.PROFILEUP,\"vec4\"),e.attributes.add(v.PROFILEVERTEXANDNORMAL,\"vec4\"),n.code.add(l`vec3 calculateVPos() {\nvec2 size = getSize();\nvec3 origin = position;\nvec3 right = profileRight.xyz;\nvec3 up = profileUp.xyz;\nvec3 forward = cross(up, right);\nvec2 profileVertex = profileVertexAndNormal.xy * size;\nvec2 profileNormal = profileVertexAndNormal.zw;\nfloat positionOffsetAlongProfilePlaneNormal = 0.0;\nfloat normalOffsetAlongProfilePlaneNormal = 0.0;`),n.code.add(l`if(!isCapVertex()) {\nvec2 rotationRight = vec2(profileRight.w, profileUp.w);\nfloat maxDistance = length(rotationRight);`),n.code.add(l`rotationRight = maxDistance > 0.0 ? normalize(rotationRight) : vec2(0, 0);\nfloat rx = dot(profileVertex, rotationRight);\nif (abs(rx) > maxDistance) {\nvec2 rotationUp = vec2(-rotationRight.y, rotationRight.x);\nfloat ry = dot(profileVertex, rotationUp);\nprofileVertex = rotationRight * maxDistance * sign(rx) + rotationUp * ry;\n}\n}else{\npositionOffsetAlongProfilePlaneNormal = profileRight.w * size[0];\nnormalOffsetAlongProfilePlaneNormal = profileUp.w;\n}\nvec3 offset = right * profileVertex.x + up * profileVertex.y + forward * positionOffsetAlongProfilePlaneNormal;\nreturn origin + offset;\n}`),n.code.add(l`vec3 localNormal() {\nvec3 right = profileRight.xyz;\nvec3 up = profileUp.xyz;\nvec3 forward = cross(up, right);\nvec2 profileNormal = profileVertexAndNormal.zw;\nvec3 normal = right * profileNormal.x + up * profileNormal.y;\nif(isCapVertex()) {\nnormal += forward * profileUp.w;\n}\nreturn normal;\n}`)}class n extends c{constructor(){super(...arguments),this.size=e(1,1)}}export{f as PathVertexPosition,n as PathVertexPositionPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e,addNearFar as i}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{isColorOrColorEmission as a,ShaderOutput as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as n}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ObjectAndLayerIdColor as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{PathVertexPosition as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PathVertexPosition.glsl.js\";import{OutputDepth as d}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js\";import{OutputHighlight as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{EvaluateAmbientOcclusion as c}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as g,addAmbientBoostFactor as m,addLightingGlobalFactor as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{addMainLightIntensity as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{Normals as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{NormalUtils as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js\";import{PhysicallyBasedRenderingParameters as b,PBRMode as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapDraw as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ColorConversion as j}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as L,addViewNormal as P,addCameraPosition as S}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as O}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as C}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as A,If as D}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{outputColorHighlightOID as I}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as B}from\"../views/webgl/ShaderBuilder.js\";function F(F){const V=new B,{vertex:_,fragment:x}=V;L(_,F),V.varyings.add(\"vpos\",\"vec3\"),V.include(s,F);const{output:z,spherical:M,pbrMode:H,receiveShadows:N}=F,k=a(z);switch((k||z===o.ObjectAndLayerIdColor)&&(V.include(n,F),V.include(f,F),V.include(e,F),V.include(l,F),V.include(y,F),V.varyings.add(\"vnormal\",\"vec3\"),V.varyings.add(\"vcolor\",\"vec4\"),_.main.add(A`\n      vpos = calculateVPos();\n      vnormal = normalize(localNormal());\n      forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n\n      gl_Position = transformPosition(proj, view, vpos);\n\n      ${k?\"forwardLinearDepth();\":\"\"}\n      forwardObjectAndLayerIdColor();\n\n      vcolor = getColor();`)),z){case o.ColorEmission:case o.Color:V.include(b,F),V.include(g,F),V.include(c,F),V.include(f,F),V.include(p,F),V.fragment.include(r,F),V.include(I,F),S(x,F),m(x),v(x),x.uniforms.add(_.uniforms.get(\"localOrigin\"),new O(\"ambient\",(e=>e.ambient)),new O(\"diffuse\",(e=>e.diffuse)),new O(\"specular\",(e=>e.specular)),new C(\"opacity\",(e=>e.opacity))),x.include(j),h(x),x.main.add(A`\n        discardBySlice(vpos);\n        discardByTerrainDepth();\n\n        shadingParams.viewDirection = normalize(vpos - cameraPosition);\n        shadingParams.normalView = vnormal;\n        vec3 normal = shadingNormal(shadingParams);\n        float ssao = evaluateAmbientOcclusionInverse();\n\n        vec3 posWorld = vpos + localOrigin;\n        vec3 normalGround = ${M?\"normalize(posWorld);\":\"vec3(0.0, 0.0, 1.0);\"}\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(posWorld);\n        vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        float shadow = ${N?\"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth));\":M?\"lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"0.0;\"}\n        vec3 albedo = vcolor.rgb * max(ambient, diffuse); // combine the old material parameters into a single one\n        float combinedOpacity = vcolor.a * opacity;\n        albedo += 0.25 * specular; // don't completely ignore specular for now\n\n        ${D(H===w.Schematic,\"float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];\\n           vec4 emission = getEmissions();\")}\n\n        vec3 shadedColor = ${H===w.Schematic?\"evaluateSceneLightingPBR(normal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);\":\"evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight);\"}\n        vec4 finalColor = vec4(shadedColor, combinedOpacity);\n        outputColorHighlightOID(finalColor, vpos);`);break;case o.Depth:V.include(n,F),_.main.add(A`vpos = calculateVPos();\ngl_Position = transformPosition(proj, view, vpos);`),V.fragment.include(r,F),x.main.add(A`discardBySlice(vpos);`);break;case o.Shadow:case o.ShadowHighlight:case o.ShadowExcludeHighlight:case o.ViewshedShadow:V.include(n,F),i(V),V.varyings.add(\"depth\",\"float\"),_.main.add(A`vpos = calculateVPos();\ngl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);`),V.fragment.include(r,F),V.include(d,F),x.main.add(A`discardBySlice(vpos);\noutputDepth(depth);`);break;case o.ObjectAndLayerIdColor:V.fragment.include(r,F),x.main.add(A`discardBySlice(vpos);\noutputObjectAndLayerIdColor();`);break;case o.Normal:V.include(n,F),V.include(u,F),P(_),V.varyings.add(\"vnormal\",\"vec3\"),_.main.add(A`vpos = calculateVPos();\nvnormal = normalize((viewNormal * vec4(localNormal(), 1.0)).xyz);\ngl_Position = transformPosition(proj, view, vpos);`),V.fragment.include(r,F),x.main.add(A`discardBySlice(vpos);\nvec3 normal = normalize(vnormal);\nif (gl_FrontFacing == false) normal = -normal;\nfragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);`);break;case o.Highlight:V.include(n,F),V.include(u,F),V.varyings.add(\"vnormal\",\"vec3\"),_.main.add(A`vpos = calculateVPos();\ngl_Position = transformPosition(proj, view, vpos);`),V.fragment.include(r,F),V.include(t,F),x.main.add(A`discardBySlice(vpos);\ncalculateOcclusionAndOutputHighlight();`)}return V}const V=Object.freeze(Object.defineProperty({__proto__:null,build:F},Symbol.toStringTag,{value:\"Module\"}));export{V as P,F as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{freeze as e,create as r,ZEROS as t}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{isColorOrColorEmission as s,ShaderOutput as i}from\"../core/shaderLibrary/ShaderOutput.js\";import{PathVertexPositionPassParameters as l}from\"../core/shaderLibrary/attributes/PathVertexPosition.glsl.js\";import{NormalsDoubleSidedMode as o}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{ReloadableShaderModule as n}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as a}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as u}from\"../lib/OITPass.js\";import{blending as m,oitDepthTest as c,getDrawBuffers as h,OITPolygonOffset as p}from\"../lib/OrderIndependentTransparency.js\";import{stencilWriteMaskOn as d,stencilBaseAllZerosParams as f}from\"../lib/StencilUtils.js\";import{VertexAttribute as b}from\"../lib/VertexAttribute.js\";import{advancedMRRFactors as O}from\"./pbrUtils.js\";import{P as j}from\"../../../../chunks/Path.glsl.js\";import{SpecialDrawBuffers as P}from\"../../../webgl/enums.js\";import{makePipelineState as g,frontFaceCullingParams as E,defaultDepthWrite as T,defaultColorWrite as x}from\"../../../webgl/renderState.js\";class N extends l{constructor(){super(...arguments),this.ambient=e(.2,.2,.2),this.diffuse=e(.8,.8,.8),this.specular=e(0,0,0),this.opacity=1,this.origin=r(),this.modelTransformation=null,this.mrrFactors=O,this.emissiveFactor=t,this.texture=null,this.textureNormal=null,this.textureEmissive=null,this.textureOcclusion=null,this.textureMetallicRoughness=null}}class R extends a{constructor(e,r){super(e,r,new n(j,(()=>import(\"../shaders/Path.glsl.js\"))),L)}initializePipeline(e){const{output:r,transparent:t,hasSlicePlane:l,doubleSidedMode:n,hasOccludees:a,oitPass:b}=e,O=b===u.NONE,j=b===u.FrontFace;return g({blending:s(r)&&t?m(b):null,culling:l&&!t&&n!==o.None?E:null,depthTest:{func:c(b)},depthWrite:O||j?T:null,drawBuffers:r===i.Depth?{buffers:[P.NONE]}:h(b,r),colorWrite:x,stencilWrite:a?d:null,stencilTest:a?f:null,polygonOffset:O||j?null:p})}}const L=new Map([[b.POSITION,0],[b.PROFILERIGHT,1],[b.PROFILEUP,2],[b.PROFILEVERTEXANDNORMAL,3],[b.FEATUREVALUE,4],[b.OBJECTANDLAYERIDCOLOR,5]]);export{N as PathPassParameters,R as PathTechnique,L as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as i}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as r}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as a}from\"./DefaultTechniqueConfiguration.js\";class n extends a{constructor(e,s){super(),this.spherical=e,this.doublePrecisionRequiresObfuscation=s,this.pbrMode=r.Disabled,this.doubleSidedMode=i.None,this.emissionSource=o.None,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.transparent=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=t.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.useCustomDTRExponentForWater=!1,this.useFillLights=!1,this.hasColorTexture=!1,this.objectAndLayerIdColorInstanced=!1,this.hasMetallicRoughnessTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1}get discardInvisibleFragments(){return this.transparent}}e([s({count:r.COUNT})],n.prototype,\"pbrMode\",void 0),e([s({count:i.COUNT})],n.prototype,\"doubleSidedMode\",void 0),e([s({count:o.COUNT})],n.prototype,\"emissionSource\",void 0),e([s()],n.prototype,\"receiveShadows\",void 0),e([s()],n.prototype,\"receiveAmbientOcclusion\",void 0),e([s()],n.prototype,\"vvSize\",void 0),e([s()],n.prototype,\"vvColor\",void 0),e([s()],n.prototype,\"vvOpacity\",void 0),e([s()],n.prototype,\"transparent\",void 0),e([s()],n.prototype,\"hasOccludees\",void 0),e([s()],n.prototype,\"terrainDepthTest\",void 0),e([s()],n.prototype,\"cullAboveTerrain\",void 0);export{n as PathTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{clamp as e}from\"../../../../core/mathUtils.js\";import{p as t}from\"../../../../chunks/vec32.js\";import{ZEROS as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as r}from\"../../../../geometry/support/aaBoundingBox.js\";import{newLayout as s}from\"../../support/buffer/InterleavedLayout.js\";import{isShadowRelatedOutput as a,is3DGeometryOutputMRT as o,isColorOrColorEmission as n,ShaderOutput as c}from\"../core/shaderLibrary/ShaderOutput.js\";import{EmissionSource as h}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as u}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as m}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{olidEnabled as p}from\"../effects/geometry/olidUtils.js\";import f from\"../lib/GLMaterial.js\";import{Material as l}from\"../lib/Material.js\";import{isPathGeometry as d}from\"../lib/PathGeometry.js\";import{MeshIntersectionOptions as b,intersectAabbInvDir as g}from\"../lib/RayIntersections.js\";import{RenderSlot as v}from\"../lib/RenderSlot.js\";import{VertexAttribute as S}from\"../lib/VertexAttribute.js\";import{DefaultBufferWriter as _}from\"./DefaultBufferWriter.js\";import{vertexAttributeLocations as A,PathTechnique as P,PathPassParameters as R}from\"./PathTechnique.js\";import{PathTechniqueConfiguration as j}from\"./PathTechniqueConfiguration.js\";import{alphaCutoff as O}from\"../../../../webscene/support/AlphaCutoff.js\";class y extends l{constructor(e,t){super(e,E),this._vertexBufferLayout=L(),this.vertexAttributeLocations=A,this.supportsEdges=!0,this.produces=new Map([[v.OPAQUE_MATERIAL,e=>(this.parameters.castShadows&&a(e)||o(e))&&!this.parameters.transparent],[v.TRANSPARENT_MATERIAL,e=>(this.parameters.castShadows&&a(e)||o(e))&&this.parameters.transparent]]),this._configuration=new j(t.spherical,t.doublePrecisionRequiresObfuscation)}get hasEmissions(){return!t(this.parameters.emissiveFactor,i)}getConfiguration(e,t){return this._configuration.output=e,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasOccludees=t.hasOccludees,n(e)?(this._configuration.doubleSidedMode=this.parameters.doubleSided&&\"normal\"===this.parameters.doubleSidedType?u.View:this.parameters.doubleSided&&\"winding-order\"===this.parameters.doubleSidedType?u.WindingOrder:u.None,this._configuration.receiveShadows=t.shadowMap.enabled,this._configuration.receiveAmbientOcclusion=null!=t.ssao):this._configuration.receiveShadows=this._configuration.receiveAmbientOcclusion=!1,this._configuration.pbrMode=this.parameters.usePBR?m.Schematic:m.Disabled,this._configuration.emissionSource=this.parameters.usePBR?h.Value:h.None,this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}isVisibleForOutput(e){return e!==c.Shadow&&e!==c.ShadowExcludeHighlight&&e!==c.ShadowHighlight||this.parameters.castShadows}get visible(){return this.parameters.opacity>=O}intersect(t,i,s,a,o,n){const c=t;if(!d(c))return;const h=c.path,u=[this.parameters.size[0],this.parameters.size[1]];if(this.parameters.vvSize){const{offset:t,factor:i,minSize:r,maxSize:s}=this.parameters.vvSize,a=h.sizeAttributeValue;u[0]*=e(t[0]+a*i[0],r[0],s[0]),u[1]*=e(t[2]+a*i[2],r[2],s[2])}const m=new b(!1,s.options.normalRequired),p=Math.max(u[0],u[1]),f=t.boundingInfo;if(null==f)return void w(h,u,a,o,m,n);const l=r(f.bbMin[0]-p,f.bbMin[1]-p,f.bbMin[2]-p,f.bbMax[0]+p,f.bbMax[1]+p,f.bbMax[2]+p),v=[o[0]-a[0],o[1]-a[1],o[2]-a[2]],S=Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]),_=[S/v[0],S/v[1],S/v[2]];g(l,a,_,s.tolerance)&&w(h,u,a,o,m,n)}createBufferWriter(){return new _(this._vertexBufferLayout)}createGLMaterial(e){return new T(e)}}function L(){const e=s().vec3f(S.POSITION).vec4f(S.PROFILERIGHT).vec4f(S.PROFILEUP).vec4f(S.PROFILEVERTEXANDNORMAL).vec4f(S.FEATUREVALUE);return p()&&e.vec4u8(S.OBJECTANDLAYERIDCOLOR),e}class T extends f{beginSlot(e){return this.getTechnique(P,e)}}function w(e,t,i,r,s,a){e.baked.size&&e.baked.size[0]===t[0]&&e.baked.size[1]===t[1]||e.baked.bake(t),e.baked.intersect(i,r,s,a)}class E extends R{constructor(){super(...arguments),this.doubleSided=!1,this.doubleSidedType=\"normal\",this.castShadows=!0,this.hasSlicePlane=!1,this.transparent=!1,this.usePBR=!1}}export{E as Parameters,y as PathMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import e from\"../../../../core/Error.js\";import{translate as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as i,create as r}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as s,scale as a}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as o,fromArray as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{F as l,i as h}from\"../../../../chunks/vec32.js\";import{clone as c,ZEROS as m,fromArray as p,create as d}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBuffer as f}from\"../../../../geometry/projection/projectBuffer.js\";import{create as u,fromSubBuffer as y,intersectsClippingArea as b}from\"../../../../geometry/support/aaBoundingBox.js\";import{newDoubleArray as g,doubleArrayFrom as _}from\"../../../../geometry/support/DoubleArray.js\";import{needsElevationUpdates3D as v,evaluateElevationAlignmentAtPoint as x,SampleElevationInfo as w}from\"./elevationAlignmentUtils.js\";import{Graphics3DObject3DGraphicLayer as P}from\"./Graphics3DObject3DGraphicLayer.js\";import{pathNumRoundJoinSubdivisions as j,pathNumRoundCapExtrusionSubdivisions as S}from\"./Graphics3DPathSymbolLayerConstants.js\";import{Graphics3DSymbolLayer as D}from\"./Graphics3DSymbolLayer.js\";import{isValidSize as C}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as L}from\"./interfaces.js\";import{ConvertOptions as V,initFastSymbolUpdatesState as U,updateFastSymbolUpdatesState as A,getAttributeValue as E}from\"../support/FastSymbolUpdates.js\";import{SamplePosition as R}from\"../../support/ElevationProvider.js\";import{NormalType as z}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{CullFaceOptions as k}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Object3D as I}from\"../../webgl-engine/lib/Object3D.js\";import{Path as G}from\"../../webgl-engine/lib/Path.js\";import{PathBuilder as B}from\"../../webgl-engine/lib/PathBuilder.js\";import{RoundCapBuilder as M,TriangulationCapBuilder as O,NoCapBuilder as F}from\"../../webgl-engine/lib/PathCapBuilder.js\";import{SimpleExtruder as q,MiterExtruder as H}from\"../../webgl-engine/lib/PathExtruder.js\";import{UpVectorAlignment as N,PathGeometry as T,isPathGeometry as W}from\"../../webgl-engine/lib/PathGeometry.js\";import{FastUpdatePathGeometry as Z,StaticPathGeometry as J}from\"../../webgl-engine/lib/PathGeometryData.js\";import{computeMinimumRotationTangentFrame as K}from\"../../webgl-engine/lib/pathGeometryUtils.js\";import{quadProfiles as Q,circleProfiles as X}from\"../../webgl-engine/lib/PathProfile.js\";import{newPathVertex as Y}from\"../../webgl-engine/lib/PathVertex.js\";import{VertexAttribute as $}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as ee}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{PathMaterial as te}from\"../../webgl-engine/materials/PathMaterial.js\";const ie=[\"polyline\"];class re extends D{get usedMemory(){return this._usedMemory+super.usedMemory}constructor(e,t,i,r){super(e,t,i,r),this._intrinsicSize=o(1,1),this._upVectorAlignment=N.Path,this._stencilWidth=.1,this._usedMemory=0,this.ensureDrapedStatus(!1)}async doLoad(){const t=null!=this.symbolLayer.width?this.symbolLayer.width:this.symbolLayer.height,i=null!=this.symbolLayer.height?this.symbolLayer.height:t;this._vvConvertOptions=new V({size:!0,color:!0,rotation:!1,opacity:!0},[1,1,1],[t,1,i],this._context.renderCoordsHelper.unitInMeters);const r=this._context.renderer?.visualVariables;this._fastUpdates=r?.length?U(this._context.renderer,this._vvConvertOptions):null;const o=this.symbolLayer.anchor||\"center\";this._upVectorAlignment=\"heading\"===this.symbolLayer.profileRotation?N.World:N.Path;const h=this.symbolLayer.profile||\"circle\";switch(h){default:case\"circle\":this._profile=X[o];break;case\"quad\":this._profile=Q[o]}switch(this.symbolLayer.join){case\"round\":this._extruder=new H(0,j);break;case\"bevel\":this._extruder=new H(0,1);break;case\"miter\":this._extruder=new H(.8*Math.PI,1);break;default:this._extruder=new q}const d=this.symbolLayer.cap||\"butt\";switch(d){case\"none\":this._startCap=new F,this._endCap=new F;break;case\"butt\":default:this._startCap=new O(this._profile,0),this._endCap=new O(this._profile,0,!0);break;case\"square\":this._startCap=new O(this._profile,-.5),this._endCap=new O(this._profile,.5,!0);break;case\"round\":{const e=\"quad\"===h;this._startCap=new M({profile:this._profile,flip:!1,breakNormals:e,subdivisions:S}),this._endCap=new M({profile:this._profile,flip:!0,breakNormals:e,subdivisions:S});break}}const f=this.symbolLayer?.material?.emissiveFactor,u=f?l(c(f)):m,y=this.symbolLayer?.material?.color,b=this._getCombinedOpacityAndColor(y),g=p(b),_=b[3],v=_<1||this.needsDrivenTransparentPass,x={diffuse:g,ambient:g,emissiveFactor:u,opacity:_,transparent:v,hasVertexColors:!1,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:v||\"none\"===d?k.None:k.Back,offsetTransparentBackfaces:!0};if(!this._drivenProperties.size&&(s(this._intrinsicSize,t,i),!C(this._intrinsicSize[0])||!C(this._intrinsicSize[1])))throw new e(\"graphics3dpathsymbollayer:invalid-size\",\"Symbol sizes may not be negative values\");if(this._fastUpdates?.visualVariables.size||a(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters),this._fastUpdates){const e={...x,...this._fastUpdates.materialParameters,size:n(this._intrinsicSize)};this._materials[0]=new te(e,this._context)}else x.hasVertexColors=this._drivenProperties.color||this._drivenProperties.opacity,x.normalType=z.Compressed,this._materials[0]=new ee(x,this._context);this._materials[0].setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._context.stage.add(this._materials[0])}destroy(){super.destroy(),this._context.stage.remove(this._materials[0]),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,ie,this.symbolLayer.type))return null;const i=this.setGraphicElevationContext(t),r=e.renderingInfo;return this._createAs3DShape(t,r,i,t.uid)}layerOpacityChanged(){const e=this.symbolLayer?.material?.color,t=this._getCombinedOpacity(e),i=t<1||this.needsDrivenTransparentPass;this._materials[0]?.setParameters({opacity:t,transparent:i})}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,v)}slicePlaneEnabledChanged(){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return this._materials[0]?.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}applyRendererDiff(e,t){for(const i in e.diff){if(\"visualVariables\"!==i)return L.RecreateSymbol;if(!A(this._fastUpdates,t,this._vvConvertOptions))return L.RecreateSymbol;this._materials[0]?.setParameters(this._fastUpdates.materialParameters)}return L.FastUpdate}_getVertexData(e){let t=0;const i=e.paths,r=[],s=e.spatialReference,a=this._context.elevationProvider.spatialReference,o=this._context.renderCoordsHelper.spatialReference;for(const c of i)t+=c.length;const n=g(3*t);let l,h=0;for(const c of i){r.push({offset:h,numVertices:c.length});for(const t of c)n[h++]=t[0],n[h++]=t[1],n[h++]=e.hasZ?t[2]:0}return null==a||s.equals(a)||f(n,s,0,n,a,0,t)?(null==a||a.equals(o)?l=_(n):(l=g(3*t),f(n,a,0,l,o,0,t)),{pathVertexDataInfos:r,vertexDataES:n,vertexDataRS:l}):null}_createAs3DShape(e,s,a,o){this._usedMemory=0;const n=e.geometry,l=this._getVertexData(n);if(null==l)return this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)\"),null;if(0===l.pathVertexDataInfos.length)return 0!==n.paths.length&&n.paths.some((e=>e.length>0))||this.logger.warn(\"PathSymbol3DLayer geometry failed to be created (no paths were defined)\"),null;const c=new Array,m=n.spatialReference,p=u(),d=this._context.renderCoordsHelper,f=new R(l.vertexDataES);for(const u of l.pathVertexDataInfos){const n=u.numVertices;if(n<2)continue;const g=u.offset;if(null!=this._context.clippingExtent&&(y(l.vertexDataES,g,n,p),!b(p,this._context.clippingExtent)))continue;const _=new Array,v=g+3*n;for(let e=g;e<v;e+=3){f.offset=e;const t=x(f,this._context.elevationProvider,a,d);h(le,l.vertexDataRS[e],l.vertexDataRS[e+1],l.vertexDataRS[e+2]),d.setAltitude(le,t),l.vertexDataRS[e]=le[0],l.vertexDataRS[e+1]=le[1],l.vertexDataRS[e+2]=le[2],_.push(Y(this._upVectorAlignment))}const w=new G(_,l.vertexDataES,l.vertexDataRS,g);se(w,this._upVectorAlignment,this._context.renderCoordsHelper);const P=new B(w,this._profile,this._extruder,this._startCap,this._endCap);let j=null;if(this._fastUpdates){const t=this._fastUpdates.visualVariables,i=E(t.size?.field,e)??0,r=E(t.color?.field,e)??0,s=E(t.opacity?.field,e)??0;j=new Z(P,i,r,s)}else{const e=[this._intrinsicSize[0],this._intrinsicSize[1]];if(this._drivenProperties.size){const t=s.size;e[0]*=ae(t[0],\"symbol-value\"===t[2]?this.symbolLayer.height||0:t[2],this.symbolLayer.width||0),e[1]*=ae(t[2],\"symbol-value\"===t[0]?this.symbolLayer.width||0:t[0],this.symbolLayer.height||0)}let t;this._drivenProperties.color&&(t=s.color),this._drivenProperties.opacity&&null!=s.opacity&&(t=t?[t[0],t[1],t[2],s.opacity]:[1,1,1,s.opacity]);const i=new J(P);i.bake(e),t&&i.bakeVertexColors(t),j=i}const S=j.createGeometryData(),D=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:this._context.layer.uid}),C=new T(this._materials[0],S,j,m,this._stencilWidth,D);C.transformation=t(r(),i,P.path.origin),c.push(C),this._usedMemory+=P.usedMemory}if(0===c.length)return null;const g=new I({geometries:c,layerUid:this._context.layer.uid,graphicUid:o}),_=new P(this,g,c,null,null,((e,t,i,r,s)=>ne(e,t,r,s,this._upVectorAlignment)),a);return _.alignedSampledElevation=0,_.needsElevationUpdates=v(a.mode),_}}function se(e,t,i){const{origin:r,positions:s}=e;let a=e.offset;switch(t){default:case N.World:for(const t of e.vertices)le[0]=s[a++]+r[0],le[1]=s[a++]+r[1],le[2]=s[a++]+r[2],i.worldUpAtPosition(le,le),t.setFrameFromUpVector(le);break;case N.Path:le[0]=s[a]+r[0],le[1]=s[a+1]+r[1],le[2]=s[a+2]+r[2],i.worldUpAtPosition(le,le),K(e,le)}}function ae(e,t,i){switch(e){case\"symbol-value\":return i;case\"proportional\":return t;default:return e}}function oe(e,t,i,r){let s=0;const{origin:a,vertices:o,positions:n,positionsES:l}=e,c=e.offset+3*o.length;for(let m=e.offset;m<c;m+=3)h(le,l[m],l[m+1],l[m+2]),i(le,he),s+=he.sampledElevation,le[0]=n[m]+a[0],le[1]=n[m+1]+a[1],le[2]=n[m+2]+a[2],r.setAltitude(le,he.z),n[m]=le[0]-a[0],n[m+1]=le[1]-a[1],n[m+2]=le[2]-a[2];return e.updatePathVertexInformation(),s/o.length}function ne(e,t,i,r,s){const a=e.stageObject,o=a.geometries;let n=0;for(const l of o){if(!W(l))continue;const e=l.path,o=e.builder.path;n+=oe(o,t,i,r),s!==N.World&&se(o,s,r),e.onPathChanged(l),l.invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l,$.POSITION)}return n/o.length}const le=d(),he=new w;export{re as Graphics3DPathSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as e,f as s,d as i,h as a,g as m,c as n,b as c,n as l,e as f}from\"../../../../chunks/vec32.js\";import{create as I}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as h}from\"../../../../geometry/ellipsoidUtils.js\";import{lonLatToWebMercatorComparable as p}from\"../../../../geometry/projection/projectors.js\";import{newDoubleArray as N}from\"../../../../geometry/support/DoubleArray.js\";import{create as g,fromArray as b,getNormal as u}from\"../../../../geometry/support/plane.js\";import{ViewingMode as j}from\"../../../ViewingMode.js\";function T(t,r,e,s,i=1){if(e.isGeographic&&s===j.Global){const t=N(r.length),o=r.length,s=h(e);for(let e=0;e<o;e+=3)p(r,e,t,e,s);r=t}o(y,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);for(let o=0;o<r.length;o+=3)y[0]=Math.min(y[0],r[o]),y[1]=Math.min(y[1],r[o+1]);const a=y[0]%i,m=y[1]%i,n=y[0]-a,c=y[1]-m;for(let o=0;o<r.length;o+=3){const e=o/3*4;t[e]=(r[o]-n)/i,t[e+1]=(r[o+1]-c)/i,t[e+2]=n/i,t[e+3]=c/i}}function M(t,r,n,c,l=1){e(F,1,0,0),e(Y,0,1,0),e(_,0,0,1),D(x,n),b(V,n)&&O(V,F,Y,_,c,x),o(y,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),o(P,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let o=0;o<n.length;o+=3){e(E,n[o],n[o+1],n[o+2]);const t=s(F,E),r=s(Y,E);y[0]=Math.min(y[0],t),y[1]=Math.min(y[1],r),P[0]=Math.max(P[0],t),P[1]=Math.max(P[1],r)}const f=s(_,x);q(v,y[0],y[1],f,F,Y,_),q(A,P[0],y[1],f,F,Y,_),q(G,y[0],P[1],f,F,Y,_),i(A,A,v),a(A,A,.5),i(G,G,v),a(G,G,.5),m(v,v,A),m(v,v,G);const I=y[0]%l,h=y[1]%l,p=y[0]-I,N=y[1]-h;for(let o=0;o<n.length;o+=3){e(E,n[o],n[o+1],n[o+2]);const i=o/3,a=4*i;t[a]=(s(F,E)-p)/l,t[a+1]=(s(Y,E)-N)/l,t[a+2]=p/l,t[a+3]=N/l;const m=9*i;for(let t=0;t<3;t++)r[m+t]=v[t],r[m+t+3]=A[t],r[m+t+6]=G[t]}}const x=I(),E=I(),V=g(),F=I(),Y=I(),_=I(),y=r(),P=r(),v=I(),A=I(),G=I();function O(t,o,r,i,m,I){null!=m?(m.basisMatrixAtPosition(I,S),e(d,S[0],S[1],S[2]),e(k,S[4],S[5],S[6]),e(w,S[8],S[9],S[10])):(e(d,1,0,0),e(k,0,1,0),e(w,0,0,1));const h=u(t);s(h,w)<0&&a(h,h,-1),n(i,h);const p=s(h,k),N=s(h,d);Math.abs(p)>Math.abs(N)?(c(o,d,h,-N),l(o,o),f(r,o,h),l(r,r),a(r,r,-1)):(c(r,k,h,-p),l(r,r),f(o,r,h),l(o,o))}const S=t(),d=I(),k=I(),w=I();function D(t,o){e(U,0,0,0);for(let r=0;r<o.length-3;r+=3)U[0]+=o[r],U[1]+=o[r+1],U[2]+=o[r+2];a(t,U,1/(o.length/3-1))}const U=I();function q(t,o,r,s,i,a,m){e(t,o*i[0]+r*a[0]+s*m[0],o*i[1]+r*a[1]+s*m[1],o*i[2]+r*a[2]+s*m[2])}export{M as createMapSpaceUVCoords,T as createMapSpaceUVCoordsDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.Horizontal=0]=\"Horizontal\",a[a.Vertical=1]=\"Vertical\",a[a.Cross=2]=\"Cross\",a[a.ForwardDiagonal=3]=\"ForwardDiagonal\",a[a.BackwardDiagonal=4]=\"BackwardDiagonal\",a[a.DiagonalCross=5]=\"DiagonalCross\",a[a.COUNT=6]=\"COUNT\"}(a||(a={}));export{a as Style};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ObjectAndLayerIdColor as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{VertexColor as a}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{terrainDepthTest as i}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{VisualVariables as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{ColorConversion as n}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as c,addCameraPosition as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{glsl as g}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{VertexAttribute as p}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{Style as m}from\"../views/3d/webgl-engine/materials/PatternStyle.js\";import{outputColorHighlightOID as f}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as u}from\"../views/webgl/ShaderBuilder.js\";const w=.70710678118,b=w,h=.08715574274,y=10,S=1;function j(j){const C=new u,{vertex:T,fragment:P,attributes:R,varyings:V}=C,D=j.output===e.Highlight;c(T,j),C.include(r,j),C.include(a,j),C.include(l,j),C.include(t,j),C.fragment.include(o,j),C.include(f,j),C.include(i,j),j.draped?T.uniforms.add(new v(\"worldToScreenRatio\",(e=>1/e.screenToPCSRatio))):R.add(p.BOUNDINGRECT,\"mat3\"),R.add(p.POSITION,\"vec3\"),R.add(p.UVMAPSPACE,\"vec4\"),j.vvColor&&R.add(p.COLORFEATUREATTRIBUTE,\"float\"),j.hasVertexColors||V.add(\"vColor\",\"vec4\"),V.add(\"vpos\",\"vec3\"),V.add(\"vuv\",\"vec2\"),T.uniforms.add(new s(\"uColor\",(e=>e.color)));const O=j.style===m.ForwardDiagonal||j.style===m.BackwardDiagonal||j.style===m.DiagonalCross;return O&&T.code.add(g`\n      const mat2 rotate45 = mat2(${g.float(w)}, ${g.float(-.70710678118)},\n                                 ${g.float(b)}, ${g.float(w)});\n    `),j.draped||(d(T,j),T.uniforms.add(new v(\"worldToScreenPerDistanceRatio\",(e=>1/e.camera.perScreenPixelRatio))),T.code.add(g`vec3 projectPointToLineSegment(vec3 center, vec3 halfVector, vec3 point) {\nfloat projectedLength = dot(halfVector, point - center) / dot(halfVector, halfVector);\nreturn center + halfVector * clamp(projectedLength, -1.0, 1.0);\n}`),T.code.add(g`vec3 intersectRayPlane(vec3 rayDir, vec3 rayOrigin, vec3 planeNormal, vec3 planePoint) {\nfloat d = dot(planeNormal, planePoint);\nfloat t = (d - dot(planeNormal, rayOrigin)) / dot(planeNormal, rayDir);\nreturn rayOrigin + t * rayDir;\n}`),T.code.add(g`\n      float boundingRectDistanceToCamera() {\n        vec3 center = vec3(boundingRect[0][0], boundingRect[0][1], boundingRect[0][2]);\n        vec3 halfU = vec3(boundingRect[1][0], boundingRect[1][1], boundingRect[1][2]);\n        vec3 halfV = vec3(boundingRect[2][0], boundingRect[2][1], boundingRect[2][2]);\n        vec3 n = normalize(cross(halfU, halfV));\n\n        vec3 viewDir = - vec3(view[0][2], view[1][2], view[2][2]);\n\n        float viewAngle = dot(viewDir, n);\n        float minViewAngle = ${g.float(h)};\n\n        if (abs(viewAngle) < minViewAngle) {\n          // view direction is (almost) parallel to plane -> clamp it to min angle\n          float normalComponent = sign(viewAngle) * minViewAngle - viewAngle;\n          viewDir = normalize(viewDir + normalComponent * n);\n        }\n\n        // intersect view direction with infinite plane that contains bounding rect\n        vec3 planeProjected = intersectRayPlane(viewDir, cameraPosition, n, center);\n\n        // clip to bounds by projecting to u and v line segments individually\n        vec3 uProjected = projectPointToLineSegment(center, halfU, planeProjected);\n        vec3 vProjected = projectPointToLineSegment(center, halfV, planeProjected);\n\n        // use to calculate the closest point to camera on bounding rect\n        vec3 closestPoint = uProjected + vProjected - center;\n\n        return length(closestPoint - cameraPosition);\n      }\n    `)),T.code.add(g`\n    vec2 scaledUV() {\n      vec2 uv = uvMapSpace.xy ${O?\" * rotate45\":\"\"};\n      vec2 uvCellOrigin = uvMapSpace.zw ${O?\" * rotate45\":\"\"};\n\n      ${j.draped?\"\":g`\n            float distanceToCamera = boundingRectDistanceToCamera();\n            float worldToScreenRatio = worldToScreenPerDistanceRatio / distanceToCamera;\n          `}\n\n      // Logarithmically discretize ratio to avoid jittering\n      float step = 0.1;\n      float discreteWorldToScreenRatio = log(worldToScreenRatio);\n      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;\n      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);\n\n      vec2 uvOffset = mod(uvCellOrigin * discreteWorldToScreenRatio, ${g.float(y)});\n      return uvOffset + (uv * discreteWorldToScreenRatio);\n    }\n  `),T.main.add(g`\n    vuv = scaledUV();\n    vpos = position;\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    forwardNormalizedVertexColor();\n    forwardObjectAndLayerIdColor();\n    ${j.hasVertexColors?\"vColor *= uColor;\":j.vvColor?\"vColor = uColor * interpolateVVColor(colorFeatureAttribute);\":\"vColor = uColor;\"}\n    gl_Position = transformPosition(proj, view, vpos);\n  `),P.include(n),j.draped&&P.uniforms.add(new v(\"texelSize\",(e=>1/e.camera.pixelRatio))),D||(P.code.add(g`\n      const float lineWidth = ${g.float(S)};\n      const float spacing = ${g.float(y)};\n      const float spacingINV = ${g.float(1/y)};\n\n      float coverage(float p, float txlSize) {\n        p = mod(p, spacing);\n\n        float halfTxlSize = txlSize / 2.0;\n\n        float start = p - halfTxlSize;\n        float end = p + halfTxlSize;\n\n        float coverage = (ceil(end * spacingINV) - floor(start * spacingINV)) * lineWidth;\n        coverage -= min(lineWidth, mod(start, spacing));\n        coverage -= max(lineWidth - mod(end, spacing), 0.0);\n\n        return coverage / txlSize;\n      }\n    `),j.draped||P.code.add(g`const int maxSamples = 5;\nfloat sampleAA(float p) {\nvec2 dxdy = abs(vec2(dFdx(p), dFdy(p)));\nfloat fwidth = dxdy.x + dxdy.y;\nivec2 samples = 1 + ivec2(clamp(dxdy, 0.0, float(maxSamples - 1)));\nvec2 invSamples = 1.0 / vec2(samples);\nfloat accumulator = 0.0;\nfor (int j = 0; j < maxSamples; j++) {\nif(j >= samples.y) {\nbreak;\n}\nfor (int i = 0; i < maxSamples; i++) {\nif(i >= samples.x) {\nbreak;\n}\nvec2 step = vec2(i,j) * invSamples - 0.5;\naccumulator += coverage(p + step.x * dxdy.x + step.y * dxdy.y, fwidth);\n}\n}\naccumulator /= float(samples.x * samples.y);\nreturn accumulator;\n}`)),P.main.add(g`\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    vec4 color = vColor;\n    ${D?\"\":g`color.a *= ${x(j)};`}\n    outputColorHighlightOID(color, vpos);\n  `),C}function x(e){function o(o){return e.draped?g`coverage(vuv.${o}, texelSize)`:g`sampleAA(vuv.${o})`}switch(e.style){case m.ForwardDiagonal:case m.Horizontal:return o(\"y\");case m.BackwardDiagonal:case m.Vertical:return o(\"x\");case m.DiagonalCross:case m.Cross:return g`1.0 - (1.0 - ${o(\"x\")}) * (1.0 - ${o(\"y\")})`;default:return\"0.0\"}}const C=Object.freeze(Object.defineProperty({__proto__:null,build:j},Symbol.toStringTag,{value:\"Module\"}));export{C as P,j as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as e,ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{olidEnabled as s}from\"../effects/geometry/olidUtils.js\";import{OITPass as l}from\"../lib/OITPass.js\";import{blending as n,oitDepthTest as o,depthWrite as p,getDrawBuffers as a,getOITPolygonOffset as u}from\"../lib/OrderIndependentTransparency.js\";import{stencilWriteMaskOn as c,stencilToolMaskBaseParams as O,stencilBaseAllZerosParams as f}from\"../lib/StencilUtils.js\";import{VertexAttribute as m}from\"../lib/VertexAttribute.js\";import{P as d}from\"../../../../chunks/Pattern.glsl.js\";import{SpecialDrawBuffers as T}from\"../../../webgl/enums.js\";import{makePipelineState as P,cullingParams as h,defaultColorWrite as E}from\"../../../webgl/renderState.js\";class S extends i{constructor(e,t){super(e,t,new r(d,(()=>import(\"./Pattern.glsl.js\"))),s()?j:b)}_setPipelineState(r,i){const{oitPass:s,output:m,cullFace:d,draped:S,hasOccludees:b,polygonOffset:j,enableOffset:g}=r,A=s===l.NONE,I=s===l.FrontFace;return P({blending:e(m)?n(s):null,culling:h(d),depthTest:S?null:{func:o(s)},depthWrite:p(r),drawBuffers:m===t.Depth?{buffers:[T.NONE]}:a(s,m),colorWrite:E,stencilWrite:b?c:null,stencilTest:b?i?O:f:null,polygonOffset:A||I?j?R:null:u(g)})}initializePipeline(e){return this._occludeePipelineState=this._setPipelineState(e,!0),this._setPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const R={factor:1,units:1},b=new Map([[m.POSITION,0],[m.COLOR,3],[m.UVMAPSPACE,4],[m.COLORFEATUREATTRIBUTE,5],[m.BOUNDINGRECT,6]]),j=new Map([[m.POSITION,0],[m.COLOR,3],[m.UVMAPSPACE,4],[m.COLORFEATUREATTRIBUTE,5],[m.BOUNDINGRECT,6],[m.OBJECTANDLAYERIDCOLOR,9]]);export{S as PatternTechnique,b as vertexAttributeLocations,j as vertexAttributeLocationsOID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as e}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as s}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as r}from\"../lib/basicInterfaces.js\";import{DefaultTechniqueConfiguration as i}from\"../materials/DefaultTechniqueConfiguration.js\";import{Style as a}from\"../materials/PatternStyle.js\";class n extends i{constructor(){super(...arguments),this.cullFace=r.None,this.style=a.Horizontal,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasOccludees=!1,this.enableOffset=!0,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.vvColor=!1,this.draped=!1,this.textureCoordinateType=e.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.writeDepth=!0,this.occlusionPass=!1,this.hasVvInstancing=!1,this.vvSize=!1,this.vvOpacity=!1,this.objectAndLayerIdColorInstanced=!1}}t([s({count:r.COUNT})],n.prototype,\"cullFace\",void 0),t([s({count:a.COUNT})],n.prototype,\"style\",void 0),t([s()],n.prototype,\"hasVertexColors\",void 0),t([s()],n.prototype,\"polygonOffset\",void 0),t([s()],n.prototype,\"hasOccludees\",void 0),t([s()],n.prototype,\"enableOffset\",void 0),t([s()],n.prototype,\"terrainDepthTest\",void 0),t([s()],n.prototype,\"cullAboveTerrain\",void 0),t([s()],n.prototype,\"vvColor\",void 0),t([s()],n.prototype,\"draped\",void 0);export{n as PatternTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fromValues as e}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{BufferViewMat3f as t,BufferViewVec4f as r}from\"../../../../geometry/support/buffer/BufferView.js\";import{newLayout as s}from\"../../support/buffer/InterleavedLayout.js\";import{isHighlightOrOID as i,isColorOrColorEmission as o,isDepth as a,isColorEmissionHighlightOrOID as n}from\"../core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as f}from\"../effects/geometry/olidUtils.js\";import{CullFaceOptions as c}from\"../lib/basicInterfaces.js\";import l from\"../lib/GLMaterial.js\";import{OITPolygonOffsetLimit as u}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as p}from\"../lib/RenderSlot.js\";import{assert as h}from\"../lib/Util.js\";import{VertexAttribute as m}from\"../lib/VertexAttribute.js\";import{DefaultBufferWriter as d}from\"./DefaultBufferWriter.js\";import{Style as g}from\"./PatternStyle.js\";import{TriangleMaterial as A}from\"./TriangleMaterial.js\";import{VisualVariablePassParameters as T}from\"./VisualVariablePassParameters.js\";import{writeDefaultAttributes as b,writeBufferVec4 as v}from\"./internal/bufferWriterUtils.js\";import{vertexAttributeLocationsOID as O,vertexAttributeLocations as _,PatternTechnique as j}from\"../shaders/PatternTechnique.js\";import{PatternTechniqueConfiguration as C}from\"../shaders/PatternTechniqueConfiguration.js\";import{alphaCutoff as E}from\"../../../../webscene/support/AlphaCutoff.js\";class P extends A{constructor(e){super(e,I),this._configuration=new C,this.vertexAttributeLocations=f()?O:_,this.supportsEdges=!0,this.produces=new Map([[p.OPAQUE_MATERIAL,e=>i(e)],[p.TRANSPARENT_MATERIAL,e=>o(e)],[p.TRANSPARENT_MATERIAL_WITHOUT_NORMALS,e=>a(e)],[p.DRAPED_MATERIAL,e=>this.parameters.draped&&n(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.style=this.parameters.style,this._configuration.draped=this.parameters.draped,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<u,this._configuration.terrainDepthTest=t.terrainDepthTest&&o(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration}get visible(){return this.parameters.color[3]>=E}createGLMaterial(e){return new R(e)}createBufferWriter(){const e=s().vec3f(m.POSITION).vec4f(m.UVMAPSPACE);return this.parameters.draped||e.mat3f(m.BOUNDINGRECT),this.parameters.vvColor?e.f32(m.COLORFEATUREATTRIBUTE):e.vec4u8(m.COLOR),f()&&e.vec4u8(m.OBJECTANDLAYERIDCOLOR),new y(e)}}class R extends l{beginSlot(e){return this.getTechnique(j,e)}}class y extends d{write(e,s,i,o,a,n){b(i,o,this.vertexBufferLayout,e,s,a,n);for(const f of this.vertexBufferLayout.fields.keys()){const s=i.get(f),o=s?.indices;if(s&&o)switch(f){case m.UVMAPSPACE:{h(4===s.size);const e=a.getField(f,r);e&&v(s,e,n);break}case m.BOUNDINGRECT:{h(9===s.size);const r=a.getField(f,t);r&&L(s,e,r,n);break}}}}}function L(e,t,r,s){const{data:i,indices:o}=e,a=t,n=r.typedBuffer,f=r.typedBufferStride,c=o.length;s*=f;for(let l=0;l<c;++l){const e=9*o[l],t=i[e],r=i[e+1],c=i[e+2];n[s]=a[0]*t+a[4]*r+a[8]*c+a[12],n[s+1]=a[1]*t+a[5]*r+a[9]*c+a[13],n[s+2]=a[2]*t+a[6]*r+a[10]*c+a[14];for(let o=3;o<9;++o)n[s+o]=i[e+o];s+=f}}class I extends T{constructor(){super(...arguments),this.color=e(1,1,1,1),this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=c.None,this.hasOccludees=!1,this.style=g.Cross,this.draped=!0}}export{I as Parameters,P as PatternMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{fromValues as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{perVertexElevationAligner as e}from\"../graphics/ElevationAligners.js\";import{createMapSpaceUVCoords as r}from\"./uvUtils.js\";import{VertexAttribute as a}from\"../../webgl-engine/lib/VertexAttribute.js\";import{ColorMaterial as o}from\"../../webgl-engine/materials/ColorMaterial.js\";import{PatternMaterial as n}from\"../../webgl-engine/materials/PatternMaterial.js\";import{Style as i}from\"../../webgl-engine/materials/PatternStyle.js\";function s(e,r){const a=e?.pattern;return null==a?new o(r):\"none\"===a.style||\"solid\"===a.style?(\"none\"===a.style&&(r.color=t(0,0,0,0),r.forceTransparentMode=!0),new o(r)):(r.style=l(a.style),new n(r))}function l(t){switch(t){case\"horizontal\":return i.Horizontal;case\"vertical\":return i.Vertical;case\"cross\":return i.Cross;case\"forward-diagonal\":return i.ForwardDiagonal;case\"backward-diagonal\":return i.BackwardDiagonal;case\"diagonal-cross\":return i.DiagonalCross;default:return}}function c(t){return t.material instanceof n&&!t.material.parameters.draped}function u(t,e){if(c(t)){const o=t.attributes.get(a.POSITION).data,n=t.getMutableAttribute(a.UVMAPSPACE).data,i=t.getMutableAttribute(a.BOUNDINGRECT).data;r(n,i,o,e)}}function m(t,r,a,o,n){const i=e(t,r,a,o,n),s=t.stageObject.geometries;for(const e of s)u(e,n);return i}export{s as createMaterial,l as parsePatternStyle,c as requiresUVUpdates,u as updateMapSpaceUVCoords,m as uvElevationAligner};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{pt2px as t}from\"../../../../core/screenUtils.js\";import{e as i}from\"../../../../chunks/earcut.js\";import{create as r,fromBuffer as s,intersectsClippingArea as o,empty as n,expandWithAABB as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{newDoubleArray as l,doubleSubArray as c}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as p,floatSubArray as h}from\"../../../../geometry/support/FloatArray.js\";import{SymbolUpdateType as u,elevationModeChangeUpdateType as d,needsElevationUpdates2D as m}from\"./elevationAlignmentUtils.js\";import{Graphics3DDrapedGraphicLayer as y}from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as _}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as g}from\"./Graphics3DSymbolLayer.js\";import{mixinColorAndOpacity as f}from\"./graphicUtils.js\";import{ApplyRendererDiffResult as b}from\"./interfaces.js\";import{parseCapType as x}from\"./lineUtils.js\";import{geometryAsPolygon as O,createIndices3D as v,createColorGeometry as D,PolygonCreationDataBase as C}from\"./polygonUtils.js\";import{initFastSymbolUpdatesState as S,updateFastSymbolUpdatesState as j,getAttributeValue as A,ConvertOptions as P}from\"../support/FastSymbolUpdates.js\";import{createMaterial as U,uvElevationAligner as E}from\"../support/patternUtils.js\";import{createMapSpaceUVCoords as G,createMapSpaceUVCoordsDraped as L}from\"../support/uvUtils.js\";import{createGeometry as F}from\"../../support/engineContent/line.js\";import{geometryToRenderInfo as w,geometryToRenderInfoDraped as R}from\"../../support/renderInfoUtils/polygon.js\";import{Object3D as I}from\"../../webgl-engine/lib/Object3D.js\";import{RenderGeometry as M}from\"../../webgl-engine/lib/RenderGeometry.js\";import{getStipplePatternForLinePattern as V}from\"../../webgl-engine/materials/lineStippleUtils.js\";import{PatternMaterial as B}from\"../../webgl-engine/materials/PatternMaterial.js\";import{RibbonLineMaterial as T}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";const z=[\"polyline\",\"polygon\",\"extent\"],H=new P({size:!1,color:!0,rotation:!1,opacity:!1});class N extends g{constructor(e,t,i,r){super(e,t,i,r),this._needsUV=!1}async doLoad(){this._fastUpdates=S(this._context.renderer,H)}_createMaterials(){if(this._materials.length>0)return;const e=this.symbolLayer?.material?.color,i=this._getCombinedOpacityAndColor(e);this._materials[J.Fill]=U(this.symbolLayer,{color:i,forceTransparentMode:this.needsDrivenTransparentPass,discardInvisibleFragments:!0,polygonOffset:!1,hasVertexColors:!0,draped:this.draped,hasSlicePlane:this._context.slicePlaneEnabled,...this._fastUpdates?.materialParameters}),this._needsUV=this._materials[J.Fill]instanceof B;const r=this.symbolLayer.outline;if(K(r)){const e=V(r.pattern);this._materials[J.Outline]=new T({width:t(r.size),color:this._getOutlineColor(),hasPolygonOffset:!0,hasSlicePlane:this._context.slicePlaneEnabled,isClosed:!0,stipplePattern:e,cap:x(r.patternCap||\"butt\")})}this._context.stage.addMany(this._materials)}destroy(){super.destroy(),this._context.stage.removeMany(this._materials),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,z,this.symbolLayer.type))return null;const i=this._getVertexOpacityAndColor(e.renderingInfo,255),r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus(\"on-the-ground\"===r.mode),this._createMaterials(),this.draped?this._createAsOverlay(t,i):this._createAs3DShape(t,i,r)}applyRendererDiff(e,t){for(const i in e.diff){if(\"visualVariables\"!==i)return b.RecreateSymbol;if(!j(this._fastUpdates,t,H))return b.RecreateSymbol;this._materials[J.Fill]?.setParameters(this._fastUpdates.materialParameters)}return b.FastUpdate}layerOpacityChanged(){if(null!=this._materials[J.Fill]){const e=this._materials[J.Fill].parameters.color,t=this.symbolLayer?.material?.color,i=this._getCombinedOpacity(t);this._materials[J.Fill].setParameters({color:[e[0],e[1],e[2],i],forceTransparentMode:this.needsDrivenTransparentPass})}if(null!=this._materials[J.Outline]){const e=this._materials[J.Outline].parameters.color;this._materials[J.Outline].setParameters({color:[e[0],e[1],e[2],this._getOutlineOpacity()]})}}layerElevationInfoChanged(e,t,i){const r=this._elevationContext.mode,s=d(N.elevationModeChangeTypes,i,r);if(s!==u.UPDATE)return s;const o=m(r);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>o))}slicePlaneEnabledChanged(){if(this._materials[J.Fill]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._materials[J.Outline]){const e={hasSlicePlane:this._context.slicePlaneEnabled};this._materials[J.Outline].setParameters(e)}return!0}physicalBasedRenderingChanged(){return!0}_createAs3DShape(e,t,i){const r=O(e.geometry);if(!r)return null;const s=w(r,this._context.elevationProvider,this._context.renderCoordsHelper,i),o=new k(s,t,this._context.layer.uid,e.uid),n=o.renderData.position.length/3;if(this._needsUV&&(o.uvMapSpace=p(4*n,!0),o.boundingRect=l(9*n,!0),G(o.uvMapSpace,o.boundingRect,o.renderData.position,this._context.renderCoordsHelper)),o.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(o),this._createAs3DShapeFill(e,o),this._materials[J.Outline]&&this._createAs3DShapeOutline(o),this._logGeometryCreationWarnings(o.renderData,r.rings,\"rings\",\"FillSymbol3DLayer\"),0===o.outGeometries.length)return null;const a=new I({geometries:o.outGeometries,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:e.uid}),c=new _(this,a,o.outGeometries,null,null,E,i);return c.alignedSampledElevation=o.renderData.sampledElevation,c.needsElevationUpdates=m(i.mode),c}_createAs3DShapeFill(e,t){const i=t.renderData.polygons;for(const{position:r,mapPositions:n,holeIndices:a,index:l,count:p}of i){if(null!=this._context.clippingExtent&&(s(n,W),!o(W,this._context.clippingExtent)))continue;const i=v(n,a,this._context.elevationProvider.spatialReference);if(0===i.length)continue;const u=this._fastUpdates?.visualVariables.color,d=D({material:this._materials[J.Fill],indices:i,mapPositions:n,attributeData:{position:r,color:u?null:t.color,colorFeature:u?A(u.field,e):null,uvMapSpace:this._needsUV?h(t.uvMapSpace,4*l,4*p):null,boundingRect:this._needsUV?c(t.boundingRect,9*l,9*p):null,objectAndLayerIdColor:t.objectAndLayerIdColor}});t.outGeometries.push(d)}}_createAs3DShapeOutline(e){if(null==this._materials[J.Outline])return;const t=e.renderData.outlines;for(const{mapPositions:i,position:r}of t){if(null!=this._context.clippingExtent&&(s(i,W),!o(W,this._context.clippingExtent)))continue;const t=F(this._materials[J.Outline],{overlayInfo:null,removeDuplicateStartEnd:!0,mapPositions:i,attributeData:{position:r}},e.objectAndLayerIdColor);e.outGeometries.push(t)}}_createAsOverlay(e,t){const i=O(e.geometry);if(null==i)return null;this._materials[J.Fill].renderPriority=this._renderPriority+this._renderPriorityStep/2,null!=this._materials[J.Outline]&&(this._materials[J.Outline].renderPriority=this._renderPriority);const r=R(i,this._context.overlaySR),s=new q(r,t,this._context.layer.uid,e.uid),o=s.renderData.position.length/3;return this._needsUV&&(s.uvMapSpace=p(4*o,!0),L(s.uvMapSpace,s.renderData.position,this._context.overlaySR,this._context.graphicsCoreOwner.view.state.viewingMode)),s.outBoundingBox=n(),s.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(s),this._createAsOverlayFill(e,s),this._materials[J.Outline]&&this._createAsOverlayOutline(s),this._logGeometryCreationWarnings(s.renderData,i.rings,\"rings\",\"FillSymbol3DLayer\"),0===s.outGeometries.length?null:new y(this,s.outGeometries,s.outBoundingBox,this._context.drapeSourceRenderer)}_createAsOverlayFill(e,t){const r=t.renderData.polygons;for(const{position:n,holeIndices:l,index:c,count:p}of r){const r=s(n,W);if(!o(r,this._context.clippingExtent))continue;const u=i(n,l,3);if(0===u.length)continue;a(t.outBoundingBox,r);const d=this._fastUpdates?.visualVariables.color,m=D({material:this._materials[J.Fill],indices:u,attributeData:{position:n,color:d?null:t.color,colorFeature:d?A(d.field,e):null,uvMapSpace:this._needsUV?h(t.uvMapSpace,4*c,4*p):null,objectAndLayerIdColor:t.objectAndLayerIdColor}});t.outGeometries.push(new M(m,t))}}_createAsOverlayOutline(e){if(null==this._materials[J.Outline])return;const t=e.renderData.outlines;for(let i=0;i<t.length;++i){const{position:r}=t[i];if(s(r,W),!o(W,this._context.clippingExtent))continue;a(e.outBoundingBox,W);const n=F(this._materials[J.Outline],{overlayInfo:{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper},removeDuplicateStartEnd:!0,attributeData:{position:r}},e.objectAndLayerIdColor);e.outGeometries.push(new M(n,e))}}_getOutlineOpacity(){const e=this.symbolLayer?.outline?.color;return(this.draped?1:this._getLayerOpacity())*(null!=e?e.a:0)}_getOutlineColor(){const t=this.symbolLayer?.outline?.color,i=this._getOutlineOpacity();return f(null!=t?e.toUnitRGB(t):null,i)}test(){return{...super.test(),createAsOverlay:(e,t)=>this._createAsOverlay(e,t),createAs3DShape:(e,t,i)=>this._createAs3DShape(e,t,i)}}}N.elevationModeChangeTypes={definedChanged:u.RECREATE,staysOnTheGround:u.NONE,onTheGroundChanged:u.RECREATE};const W=r();class k extends C{constructor(e,t,i,r){super(e,i,r),this.color=t}}class q extends C{constructor(e,t,i,r){super(e,i,r),this.color=t}}var J;function K(e){return null!=e?.size&&e.size>0&&null!=e.color&&(null==e.pattern||\"style\"!==e.pattern.type||\"none\"!==e.pattern.style)}!function(e){e[e.Fill=0]=\"Fill\",e[e.Outline=1]=\"Outline\"}(J||(J={}));export{N as Graphics3DPolygonFillSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{getTextHelperCanvas as e}from\"./TextHelperCanvas.js\";import{TextRenderer as r}from\"./TextRenderer.js\";import{TextTextureAtlas as t}from\"./TextTextureAtlas.js\";import{Texture as n}from\"./Texture.js\";import{TextureWrapMode as s}from\"../../../webgl/enums.js\";class i{constructor(e,n,s){this._renderer=new r(e,n,s,t.maxSize)}get key(){return this._renderer.key}get baselineAnchorY(){return 1-this._renderer.firstRenderedBaselinePosition/this._renderer.renderedHeight}get displayWidth(){return this._renderer.displayWidth}get displayHeight(){return this._renderer.displayHeight}create(){const r=e(d,this._renderer.renderedWidth,this._renderer.renderedHeight),t=r.getContext(\"2d\");return t.save(),this._renderer.render(t,0,0),t.restore(),new n(r,{wrap:{s:s.CLAMP_TO_EDGE,t:s.CLAMP_TO_EDGE},noUnpackFlip:!1,mipmap:!0,preMultiplyAlpha:!0})}}const d={canvas:null};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import{releaseMaybe as t}from\"../../../../core/maybe.js\";import{isPromiseLike as s}from\"../../../../core/promiseUtils.js\";import{pt2px as r}from\"../../../../core/screenUtils.js\";import{fromValues as o,ZEROS as n,create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{freeze as a}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{hasCalloutSupport as c,textSymbolLayerSupportsVerticalOffset as m}from\"../../../../symbols/callouts/calloutUtils.js\";import{focusAreaHUDColor as f}from\"../../../FocusAreas.js\";import{perObjectElevationAligner as h}from\"./ElevationAligners.js\";import{SymbolUpdateType as u,needsElevationUpdates2D as p}from\"./elevationAlignmentUtils.js\";import{ElevationContext as d}from\"./ElevationContext.js\";import{Graphics3DObject3DGraphicLayer as g}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DObjectMetadata as y}from\"./Graphics3DObjectMetadata.js\";import{Graphics3DSymbolLayer as x}from\"./Graphics3DSymbolLayer.js\";import{validateSymbolLayerSize as v}from\"./graphicUtils.js\";import{LabelParameters as b,LabelPlacement as O}from\"./LabelParameters.js\";import{verticalScreenOffsetFromAlignment as P,verticalPlacementFromAlignment as w,textRenderAlignmentFromHorizontalPlacement as _,horizontalPlacementToAnchorX as j,anchorFromPlacements as E,namedAnchorToHUDMaterialAnchorPos as S}from\"./placementUtils.js\";import{placePointOnGeometry as L,updateStageObjectGeometry as G,getLocalOriginForPoint as A,extendPointGraphicElevationContext as C,createStageObject as z}from\"./pointUtils.js\";import{getFontMetrics as F}from\"../../webgl-engine/lib/FontMetrics.js\";import{createPointGeometry as U}from\"../../webgl-engine/lib/GeometryUtil.js\";import{TextRenderParameters as D}from\"../../webgl-engine/lib/TextRenderParameters.js\";import R from\"../../webgl-engine/lib/TextTextureFactory.js\";import{HUDMaterial as T}from\"../../webgl-engine/materials/HUDMaterial.js\";const H=a(0,0,1);class W extends x{constructor(e,t,s,r){super(e,t,s,r),this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1},this.ensureDrapedStatus(!1)}async doLoad(){if(!this._drivenProperties.size){const t=v(this.symbolLayer.size);if(t)throw new e(\"graphics3dtextsymbollayer:invalid-size\",t)}await this._createTextRenderParameters()}async _createTextRenderParameters(){const e=this._context.graphicsCoreOwner.view.state.rasterPixelRatio;this._textRenderParameters=await D.fromSymbol(this.symbolLayer,e)}destroy(){super.destroy()}createGraphics3DGraphic(e){const t=e.graphic,s=L(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`),null;const r=this._context.stage.view.focusAreas.containsGeometry(s),o=this.symbolLayer.text;if(null==o||\"\"===o)return null;const n=c(this.symbol)&&this.symbol.hasVisibleVerticalOffset()?this.symbol.verticalOffset:null;if(null!=n&&!m(this.symbolLayer))return this.logger.errorOncePerTick(`Callouts and vertical offset on text symbols are currently only supported with 'center' horizontal alignment (not with '${this.symbolLayer.horizontalAlignment}' alignment)`),null;const{verticalAlignment:i}=this.symbolLayer,a=new O(n);P(i,a.screenOffset);const l=new b(a,this.symbolLayer.horizontalAlignment,w(i));return l.isFocused=r??l.isFocused,this._createAs3DShape(t,s,o,l)}updateFocus(e,t){t.forEach((t=>{const s=this._context.stage.view.focusAreas.containsGeometry(t.graphic.geometry);t.layers.forEach((r=>{if(r?.graphics3DSymbolLayer===this){r.stageObject.geometries.some((e=>e.material.parameters.isFocused!==s))&&e(t)}}))}))}createLabel(e,t,s,r,o){const n=e.graphic,i=L(n.geometry);if(null==i)return this.logger.warn(`unsupported geometry type for label: ${n.geometry.type}`),null;const a=this._context.stage.view.focusAreas.containsGeometry(i),l=t.text;return!l||/^\\s+$/.test(l)?null:(t.isFocused=a??t.isFocused,this._createAs3DShape(n,i,l,t,s,r,o))}setGraphicElevationContext(e,t=new d,s=0){return super.setGraphicElevationContext(e,t),t.addOffsetRenderUnits(s),t}layerOpacityChanged(){return this.logger.warn(\"layer opacity change not yet implemented in Graphics3DTextSymbolLayer\"),!1}layerElevationInfoChanged(e,t){return I(e,t,((e,t)=>{this.updateGraphicElevationContext(t,e)})),u.UPDATE}slicePlaneEnabledChanged(e,t){return I(e,t,(e=>{for(const t of e.stageObject.geometries)t.material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),!0}physicalBasedRenderingChanged(){return!0}get pixelRatioChanged(){return!1}updateGraphicElevationContext(e,t){const{elevationContext:s,metadata:r}=t;this.setGraphicElevationContext(e,s,r?.elevationOffset??0),t.needsElevationUpdates=p(s.mode)||\"absolute-height\"===s.mode}updateGeometry(e,t){if(this.draped||!this._validateGeometry(t))return!1;const{elevationContext:s,stageObject:r}=e;if(s.mode!==this.getGeometryElevationMode(t))return!1;const o=L(t);if(!o)return!1;const n=G(r,this._context,o,s);if(null==n)return!1;const i=A(this._context,o);return r.geometries[0].localOrigin===i&&(e.alignedSampledElevation=n,C(e,o,this._context.elevationProvider),!0)}_defaultElevationInfoNoZ(){return V}_createAs3DShape(e,a,c,m,u=null,x=null,v=()=>m.placement.elevationOffset){const b=this.setGraphicElevationContext(e,new d,m.placement.elevationOffset),O=\"polyline\"===e.geometry?.type,P=e.uid;let w=null,j=null;if(null==x){const e=_(m.horizontalPlacement);w=new R(c,e,this._textRenderParameters);let r=null;if(null!=this._context.sharedResources.textures){j=this._context.sharedResources.textures.fromData(w.key,(()=>w.create())),j.texture.events.on(\"unloaded\",(()=>r=t(r)));const e=this._context.stage.renderView.textures.acquire(j.texture.id);if(null==e||s(e))return j.release(),null;r=e}}const E=!!has(\"enable-feature:non-occluded-hud\"),S=M(w,m),L={occlusionTest:!E,occludedFragmentFade:E,horizonCullingEnabled:E&&this._context.spherical,screenOffset:m.placement.screenOffset,anchorPosition:S,polygonOffset:!0,color:[1,1,1,1],centerOffsetUnits:m.placement.centerOffsetUnits,depthEnabled:!1,drawAsLabel:!0,isLabel:!0,isFocused:m.isFocused};if(O&&(L.shaderPolygonOffset=1e-4),x?L.textureId=x.id:j&&(L.textureId=j.texture.id),null!=m.placement.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:s}=m.placement.verticalOffset;L.verticalOffset={screenLength:r(e),minWorldLength:t||0,maxWorldLength:null!=s?s:1/0}}const G=this._context.graphicsCoreOwner.view.focusAreas.activePolygons.length,A={screenOffset:L.screenOffset,anchorPosition:S,centerOffsetUnits:L.centerOffsetUnits,verticalOffset:L.verticalOffset,shaderPolygonOffset:L.shaderPolygonOffset,occlusionTest:L.occlusionTest,isFocused:m.isFocused,focusEffect:this._context.stage.view.focusAreas?.style};if(this._context.screenSizePerspectiveEnabled){const{screenSizePerspectiveSettings:e,screenSizePerspectiveSettingsLabels:t}=this._context.sharedResources,s=F(this._textRenderParameters);L.screenSizePerspective=t.overrideFontHeight(s.maxHeight),L.screenSizePerspectiveAlignment=e,A.fontHeight=s.maxHeight}L.hasSlicePlane=this._context.slicePlaneEnabled;const D=this._context.spherical,W=u?JSON.stringify(A):\"\";let I=u?.get(W);if(null==I){if(!m.isFocused&&G>0){const e=this._context.stage.view.focusAreas?.style;L.color=f(L.color,e),L.outlineColor=f(L.outlineColor,e)}I=new T(L,D),u?.add(W,I)}const V=m.placement.translation,$=w?o(w.displayWidth,w.displayHeight):n,k=m.placement.centerOffset,N=H,q=x?l(0,0,0,0):null,B=U(I,{normal:N,position:V,size:$,centerOffsetAndDistance:k,uvs:q}),J=z(this._context,a,B,b,P);if(null==J)return null;const Y=(t,s,r,o,n,i)=>{const a=v()||m.placement.elevationOffset,l=this.setGraphicElevationContext(e,s,a);return h(t,l,r,o,n,i)},Z=new g(this,J.object,[B],null==u?[I]:null,j,Y,b);Z.alignedSampledElevation=J.sampledElevation,Z.needsElevationUpdates=p(b.mode)||\"absolute-height\"===b.mode,Z.getScreenSize=(e=i())=>(e[0]=w?w.displayWidth:m.displaySize[0],e[1]=w?w.displayHeight:m.displaySize[1],e);const K=new y(m.placement.elevationOffset,c);return Z.metadata=K,C(Z,a,this._context.elevationProvider),Z}}function I(e,t,s){e?.forEach((e=>{const r=t(e);null!=r&&s(r,e.graphic)}))}function M(e,t){if(\"baseline\"===t.verticalPlacement){const s=j[t.horizontalPlacement],r=null!=e?e.baselineAnchorY:0;return o(s,r)}const s=E(t.horizontalPlacement,t.verticalPlacement);return S[s]}const V={mode:\"relative-to-ground\",offset:0};export{W as Graphics3DTextSymbolLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{s as r}from\"../../../../../../chunks/vec42.js\";import{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{FoamIntensity as o}from\"./FoamRendering.glsl.js\";import{ReadShadowMapPassParameters as m}from\"./ReadShadowMap.glsl.js\";import{Float2PassUniform as s}from\"../../shaderModules/Float2PassUniform.js\";import{Float4PassUniform as v}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as l}from\"../../shaderModules/glsl.js\";import{Texture2DPassUniform as i}from\"../../shaderModules/Texture2DPassUniform.js\";function u(t){t.fragment.uniforms.add(new i(\"texWaveNormal\",(e=>e.waveNormal)),new i(\"texWavePerturbation\",(e=>e.wavePerturbation)),new v(\"waveParams\",(e=>r(c,e.waveStrength,e.waveTextureRepeat,e.flowStrength,e.flowOffset))),new s(\"waveDirection\",(t=>e(n,t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)))),t.include(o),t.fragment.code.add(l`const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);\nvec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\nreturn 2.0 * texture(_tex, _uv).rg - 1.0;\n}\nfloat sampleNoiseTexture(vec2 _uv) {\nreturn texture(texWavePerturbation, _uv).b;\n}\nvec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\nreturn 2.0 * texture(_tex, _uv).rgb - 1.0;\n}\nfloat computeProgress(vec2 uv, float time) {\nreturn fract(time);\n}\nfloat computeWeight(vec2 uv, float time) {\nfloat progress = computeProgress(uv, time);\nreturn 1.0 - abs(1.0 - 2.0 * progress);\n}\nvec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {\nfloat flowStrength = waveParams[2];\nfloat flowOffset = waveParams[3];\nvec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;\nfloat progress = computeProgress(uv, time + phaseOffset);\nfloat weight = computeWeight(uv, time + phaseOffset);\nvec2 result = uv;\nresult -= flowVector * (progress + flowOffset);\nresult += phaseOffset;\nresult += (time - progress) * FLOW_JUMP;\nreturn vec3(result, weight);\n}\nconst float TIME_NOISE_TEXTURE_REPEAT = 0.3737;\nconst float TIME_NOISE_STRENGTH = 7.77;\nvec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\nfloat waveStrength = waveParams[0];\nvec2 waveMovement = time * -_waveDir;\nfloat timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\nvec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);\nvec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);\nvec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\nvec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\nvec3 mixNormal = normalize(normal_A + normal_B);\nmixNormal.xy *= waveStrength;\nmixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\nreturn mixNormal;\n}\nvec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {\nfloat waveTextureRepeat = waveParams[1];\nvec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\nfloat foam  = normals2FoamIntensity(normal, waveParams[0]);\nreturn vec4(normal, foam);\n}`)}class f extends m{}const c=a(),n=t();export{u as WaterDistortion,f as WaterDistortionPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{isColorOrColorEmission as r,ShaderOutput as i}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ObjectAndLayerIdColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{OutputHighlight as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{EvaluateAmbientLighting as t}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js\";import{addMainLightDirection as l,addMainLightIntensity as d}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{NormalUtils as g}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js\";import{PBRMode as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapDraw as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as c}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{Water as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js\";import{WaterDistortion as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{ColorConversion as u}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as f,addCameraPosition as h}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float4PassUniform as b}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as y}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as j}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{VertexAttribute as L}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as C}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{ShaderBuilder as P}from\"../views/webgl/ShaderBuilder.js\";import{alphaCutoff as x}from\"../webscene/support/AlphaCutoff.js\";function O(O){const S=new P,{vertex:D,fragment:N}=S,{output:_,draped:F,receiveShadows:M}=O;f(D,O),S.include(a,O),S.attributes.add(L.POSITION,\"vec3\"),S.attributes.add(L.UV0,\"vec2\");const z=new b(\"waterColor\",(e=>e.color));if(r(_)&&F)return S.varyings.add(\"vpos\",\"vec3\"),D.uniforms.add(z),D.main.add(j`\n      if (waterColor.a < ${j.float(x)}) {\n        // Discard this vertex\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        return;\n      }\n\n      vpos = position;\n      gl_Position = transformPosition(proj, view, vpos);`),N.uniforms.add(z),N.main.add(j`fragColor = waterColor;`),S;switch(r(_)&&(S.include(g,O),S.include(e,O),S.varyings.add(\"vuv\",\"vec2\"),S.varyings.add(\"vpos\",\"vec3\"),S.varyings.add(\"vnormal\",\"vec3\"),S.varyings.add(\"vtbnMatrix\",\"mat3\"),D.uniforms.add(z),D.main.add(j`\n      if (waterColor.a < ${j.float(x)}) {\n        // Discard this vertex\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        return;\n      }\n\n      vuv = uv0;\n      vpos = position;\n\n      vnormal = getLocalUp(vpos, localOrigin);\n      vtbnMatrix = getTBNMatrix(vnormal);\n      forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n\n      gl_Position = transformPosition(proj, view, vpos);\n      forwardLinearDepth();`)),S.include(c,O),O.output){case i.Color:case i.ColorEmission:S.include(t,{pbrMode:m.Disabled,lightingSphericalHarmonicsOrder:2}),S.include(w),S.include(v,O),S.include(p,O),S.fragment.include(o,O),S.include(C,O),N.include(u),h(N,O),l(N),d(N),N.uniforms.add(z,new y(\"timeElapsed\",(({timeElapsed:e})=>e)),D.uniforms.get(\"view\"),D.uniforms.get(\"localOrigin\")).main.add(j`\n        discardBySlice(vpos);\n        discardByTerrainDepth();\n        vec3 localUp = vnormal;\n        // the created normal is in tangent space\n        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n\n        // we rotate the normal according to the tangent-bitangent-normal-Matrix\n        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);\n        vec3 v = -normalize(vpos - cameraPosition);\n        float shadow = ${M?j`1.0 - readShadowMap(vpos, linearDepth)`:\"1.0\"};\n        vec4 vPosView = view * vec4(vpos, 1.0);\n        vec4 final = vec4(getSeaColor(n, v, mainLightDirection, waterColor.rgb, mainLightIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz, vpos + localOrigin), waterColor.w);\n\n        // gamma correction\n        fragColor = delinearizeGamma(final);\n        outputColorHighlightOID(fragColor, vpos);`);break;case i.Normal:S.include(g,O),S.include(w,O),S.fragment.include(o,O),S.varyings.add(\"vpos\",\"vec3\"),S.varyings.add(\"vuv\",\"vec2\"),D.uniforms.add(z),D.main.add(j`\n        if (waterColor.a < ${j.float(x)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vuv = uv0;\n        vpos = position;\n\n        gl_Position = transformPosition(proj, view, vpos);`),N.uniforms.add(new y(\"timeElapsed\",(({timeElapsed:e})=>e))).main.add(j`discardBySlice(vpos);\nvec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\ntangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);\nfragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);`);break;case i.Highlight:S.include(n,O),S.varyings.add(\"vpos\",\"vec3\"),D.uniforms.add(z),D.main.add(j`\n        if (waterColor.a < ${j.float(x)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vpos = position;\n        gl_Position = transformPosition(proj, view, vpos);`),S.fragment.include(o,O),N.main.add(j`discardBySlice(vpos);\ncalculateOcclusionAndOutputHighlight();`);break;case i.ObjectAndLayerIdColor:S.include(s,O),S.varyings.add(\"vpos\",\"vec3\"),D.uniforms.add(z),D.main.add(j`\n        if (waterColor.a < ${j.float(x)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vpos = position;\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardObjectAndLayerIdColor();`),S.fragment.include(o,O),N.main.add(j`discardBySlice(vpos);\noutputObjectAndLayerIdColor();`)}return S}const S=Object.freeze(Object.defineProperty({__proto__:null,build:O},Symbol.toStringTag,{value:\"Module\"}));export{S as W,O as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutput.js\";import{WaterDistortionPassParameters as e}from\"../core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{ReloadableShaderModule as t}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as o}from\"../lib/OITPass.js\";import{blending as a,oitDepthTest as n,depthWrite as i,getDrawBuffers as l,getOITPolygonOffset as d}from\"../lib/OrderIndependentTransparency.js\";import{W as p}from\"../../../../chunks/WaterSurface.glsl.js\";import{makePipelineState as c,defaultColorWrite as u}from\"../../../webgl/renderState.js\";class m extends e{}class f extends s{constructor(r,e){super(r,e,new t(p,(()=>import(\"../shaders/WaterSurface.glsl.js\"))))}initializePipeline(e){const{oitPass:t,output:s,transparent:p,draped:m,enableOffset:f}=e,h=t===o.NONE,j=t===o.FrontFace;return c({blending:s!==r.Normal&&s!==r.Highlight&&s!==r.ObjectAndLayerIdColor&&p?a(t):null,depthTest:m?null:{func:n(t)},depthWrite:i(e),drawBuffers:l(t,s),colorWrite:u,polygonOffset:h||j?null:d(f)})}}export{m as WaterMaterialPassParameters,f as WaterTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../lib/GLMaterial.js\";import{WaterTechnique as t}from\"./WaterTechnique.js\";class r extends e{ensureResources(e){return this._techniques.context.waterTextures.ensureResources(e)}beginSlot(e){const r=this._techniques.context.waterTextures.passParameters;return this._material.setParameters({wavePerturbation:r.wavePerturbation,waveNormal:r.waveNormal}),this.getTechnique(t,e)}}export{r as WaterGLMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as r}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{PBRMode as o}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as s}from\"./DefaultTechniqueConfiguration.js\";class n extends s{constructor(e,i){super(),this.spherical=e,this.doublePrecisionRequiresObfuscation=i,this.receiveShadows=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.screenSpaceReflections=!1,this.cloudReflections=!1,this.objectAndLayerIdColorInstanced=!1,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=t.None,this.emissionSource=r.None,this.pbrMode=o.Water,this.occlusionPass=!1,this.useCustomDTRExponentForWater=!0,this.highStepCount=!0,this.useFillLights=!1}get discardInvisibleFragments(){return this.transparent&&this.writeDepth}}e([i()],n.prototype,\"receiveShadows\",void 0),e([i()],n.prototype,\"transparent\",void 0),e([i()],n.prototype,\"enableOffset\",void 0),e([i()],n.prototype,\"writeDepth\",void 0),e([i()],n.prototype,\"screenSpaceReflections\",void 0),e([i()],n.prototype,\"cloudReflections\",void 0),e([i()],n.prototype,\"objectAndLayerIdColorInstanced\",void 0),e([i()],n.prototype,\"draped\",void 0),e([i()],n.prototype,\"terrainDepthTest\",void 0),e([i()],n.prototype,\"cullAboveTerrain\",void 0);export{n as WaterTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{secondsFromMilliseconds as t}from\"../../../../core/time.js\";import{fromValues as e}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as i}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isColorOrColorEmission as a,isHighlightOrOID as s,ShaderOutput as o}from\"../core/shaderLibrary/ShaderOutput.js\";import{olidEnabled as n}from\"../effects/geometry/olidUtils.js\";import{MaterialParameters as l}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as c}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as m}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as h}from\"./DefaultBufferWriter.js\";import{PositionUVLayoutObjectAndLayerId as f,PositionUVLayout as p}from\"./DefaultLayouts.js\";import{TriangleMaterial as u}from\"./TriangleMaterial.js\";import{WaterGLMaterial as d}from\"./WaterGLMaterial.js\";import{WaterTechniqueConfiguration as g}from\"./WaterTechniqueConfiguration.js\";class _ extends u{constructor(t,e){super(t,v),this.produces=new Map([[m.OPAQUE_MATERIAL,t=>a(t)&&!this.parameters.transparent||s(t)],[m.TRANSPARENT_MATERIAL,t=>a(t)&&this.parameters.transparent||s(t)],[m.DRAPED_MATERIAL,t=>this.parameters.draped&&a(t)||s(t)],[m.DRAPED_WATER,t=>t===o.Normal]]),this._configuration=new g(e.spherical,e.doublePrecisionRequiresObfuscation)}getConfiguration(t,e){return this._configuration.output=t,this._configuration.writeDepth=!0,this._configuration.receiveShadows=e.shadowMap.enabled,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.screenSpaceReflections=null!=e.ssr.lastFrameColor,this._configuration.cloudReflections=null!=e.clouds.data,this._configuration.draped=this.parameters.draped,this._configuration.oitPass=e.oitPass,this._configuration.enableOffset=e.camera.relativeElevation<c,this._configuration.terrainDepthTest=e.terrainDepthTest&&a(t),this._configuration.cullAboveTerrain=e.cullAboveTerrain,this._configuration}get visible(){return!0}update(e){return this.setParameters({timeElapsed:t(e.time)*this.parameters.animationSpeed},!1),this._animationEnabled(e.camera)&&e.dt>0}_animationEnabled(t){const e=Math.min(t.relativeElevation,t.distance);return Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*e<b}createGLMaterial(t){return new d(t)}createBufferWriter(){return new h(n()?f:p)}get test(){}}class v extends l{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=e(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=i(0,0,0,0),this.transparent=!0,this.hasSlicePlane=!1,this.draped=!1,this.origin=r(),this.modelTransformation=null}}const b=35e3;export{v as Parameters,_ as WaterMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nconst e={\"calm-small\":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},\"rippled-small\":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},\"slight-small\":{waveStrength:.05,perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},\"moderate-small\":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},\"calm-medium\":{waveStrength:.003125,perturbationStrength:.01,textureRepeat:8,waveVelocity:.02},\"rippled-medium\":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},\"slight-medium\":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},\"moderate-medium\":{waveStrength:.09,perturbationStrength:.03,textureRepeat:4,waveVelocity:.12},\"calm-large\":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},\"rippled-large\":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},\"slight-large\":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},\"moderate-large\":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}};export{e as wavePresets};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../../Color.js\";import{getMetersPerUnitForSR as t}from\"../../../../core/unitUtils.js\";import{e as r}from\"../../../../chunks/earcut.js\";import{set as o}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as i,create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{b as s}from\"../../../../chunks/vec42.js\";import{toRadian as a}from\"../../../../core/libs/gl-matrix-2/math/common.js\";import{create as l,fromBuffer as c,intersectsClippingArea as h,empty as m,expandWithAABB as u}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as p,empty as d,expandPointInPlace as g}from\"../../../../geometry/support/aaBoundingRect.js\";import{newDoubleArray as y,doubleSubArray as f}from\"../../../../geometry/support/DoubleArray.js\";import{perVertexElevationAligner as _}from\"./ElevationAligners.js\";import{SymbolUpdateType as x,elevationModeChangeUpdateType as v,needsElevationUpdates2D as b}from\"./elevationAlignmentUtils.js\";import{Graphics3DDrapedGraphicLayer as C}from\"./Graphics3DDrapedGraphicLayer.js\";import{Graphics3DObject3DGraphicLayer as D}from\"./Graphics3DObject3DGraphicLayer.js\";import{Graphics3DSymbolLayer as j}from\"./Graphics3DSymbolLayer.js\";import{geometryAsPolygon as S,createWaterGeometry as w,PolygonCreationDataBase as G}from\"./polygonUtils.js\";import{geometryToRenderInfo as E,geometryToRenderInfoDraped as A}from\"../../support/renderInfoUtils/polygon.js\";import{Object3D as L}from\"../../webgl-engine/lib/Object3D.js\";import{RenderGeometry as O}from\"../../webgl-engine/lib/RenderGeometry.js\";import{Parameters as P,WaterMaterial as T}from\"../../webgl-engine/materials/WaterMaterial.js\";import{wavePresets as R}from\"../../webgl-engine/materials/internal/waterMaterialUtils.js\";const I=[\"polyline\",\"polygon\",\"extent\"];class B extends j{constructor(e,t,r,o){super(e,t,r,o)}async doLoad(){}destroy(){super.destroy(),this._context.stage.remove(this._materials[0]),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,I,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus(\"on-the-ground\"===r.mode),this.ensureMaterial(),this.draped?this._createAsOverlay(t):this._createAs3DShape(t,r,t.uid)}ensureMaterial(){if(this._materials[0])return;const t=new P,r=this.symbolLayer.color;null!=r&&(t.color=e.toUnitRGBA(r));const o=this._getCombinedOpacity(r,{hasIntrinsicColor:!0});t.color=[t.color[0],t.color[1],t.color[2],o],t.transparent=o<1||this.needsDrivenTransparentPass,t.waveDirection=null!=this.symbolLayer.waveDirection?U(this.symbolLayer.waveDirection):i(0,0);const n=this.symbolLayer.waveStrength+\"-\"+this.symbolLayer.waterbodySize,s=R[n];t.waveStrength=s.waveStrength,t.waveTextureRepeat=s.textureRepeat,t.waveVelocity=s.waveVelocity,t.flowStrength=s.perturbationStrength,t.hasSlicePlane=this._context.slicePlaneEnabled,t.draped=this.draped,this._materials[0]=new T(t,this._context),this._context.stage.add(this._materials[0])}layerOpacityChanged(){if(null==this._materials[0])return;const e=this._materials[0].parameters.color,t=this._getCombinedOpacity(this.symbolLayer.color,{hasIntrinsicColor:!0}),r=t<1||this.needsDrivenTransparentPass;this._materials[0].setParameters({color:[e[0],e[1],e[2],t],transparent:r})}layerElevationInfoChanged(e,t,r){const o=this._elevationContext.mode,i=v(B.elevationModeChangeTypes,r,o);if(i!==x.UPDATE)return i;const n=b(o);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>n))}slicePlaneEnabledChanged(){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}_createAs3DShape(e,t,r){const o=S(e.geometry);if(null==o)return null;const i=E(o,this._context.elevationProvider,this._context.renderCoordsHelper,t),n=i.position.length/3,s=y(2*n);M(s,i.mapPositions,n,this._context.elevationProvider.spatialReference);const a=new N(i,s,this._context.layer.uid,e.uid);if(a.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(a),this._create3DShapeGeometries(a),this._logGeometryCreationWarnings(a.renderData,o.rings,\"rings\",\"WaterSymbol3DLayer\"),0===a.outGeometries.length)return null;const l=new L({geometries:a.outGeometries,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:r}),c=new D(this,l,a.outGeometries,null,null,_,t);return c.alignedSampledElevation=a.renderData.sampledElevation,c.needsElevationUpdates=b(t.mode),c}_create3DShapeGeometries(e){const t=e.renderData.polygons,o=e.uvCoords;for(const{count:i,index:n,position:s,mapPositions:a,holeIndices:l}of t){if(null!=this._context.clippingExtent&&(c(a,k),!h(k,this._context.clippingExtent)))continue;const t=r(a,l,3);if(0===t.length)continue;const m=f(o,2*n,2*i),u=w({material:this._materials[0],indices:t,mapPositions:a,attributeData:{position:s,uv0:m}},e.objectAndLayerIdColor);e.outGeometries.push(u)}}_createAsOverlay(e){const t=S(e.geometry);if(null==t)return null;this._materials[0].renderPriority=this._renderPriority;const r=A(t,this._context.overlaySR),o=r.position.length/3,i=y(2*o);M(i,r.position,o,this._context.overlaySR);const n=new H(r,i,this._context.layer.uid,e.uid);return n.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(n),n.outBoundingBox=m(),this._createAsOverlayWater(n),this._logGeometryCreationWarnings(n.renderData,t.rings,\"rings\",\"WaterSymbol3DLayer\"),0===n.outGeometries.length?null:new C(this,n.outGeometries,n.outBoundingBox,this._context.drapeSourceRenderer)}_createAsOverlayWater(e){const t=e.uvCoords,o=e.renderData.polygons;for(const{position:i,holeIndices:n,index:s,count:a}of o){if(c(i,k),!h(k,this._context.clippingExtent))continue;u(e.outBoundingBox,k);const o=r(i,n,3);if(0===o.length)continue;const l=f(t,2*s,2*a),m=w({material:this._materials[0],indices:o,attributeData:{position:i,uv0:l}},e.objectAndLayerIdColor);e.outGeometries.push(new O(m,e))}}test(){return{...super.test(),create3DShape:e=>this._createAs3DShape(e.graphic,e.elevationContext,e.graphicUid),ensureMaterial:()=>this.ensureMaterial()}}}function U(e){const t=n(),r=a(e);return t[0]=Math.sin(r),t[1]=Math.cos(r),t}function M(e,r,i,n){const a=t(n);d(z);for(let t=0;t<i;t++)o(V,r[3*t],r[3*t+1]),g(z,V);s(z,z,a);const l=z[0]%B.unitSizeOfTexture,c=z[1]%B.unitSizeOfTexture;W[0]=z[0]-l,W[1]=z[1]-c;for(let t=0;t<i;t++)e[2*t]=(r[3*t]*a-W[0])/B.unitSizeOfTexture,e[2*t+1]=(r[3*t+1]*a-W[1])/B.unitSizeOfTexture}B.unitSizeOfTexture=100,B.elevationModeChangeTypes={definedChanged:x.RECREATE,staysOnTheGround:x.NONE,onTheGroundChanged:x.RECREATE};const W=n(),z=p(),V=n(),k=l();class N extends G{constructor(e,t,r,o){super(e,r,o),this.uvCoords=t}}class H extends G{constructor(e,t,r,o){super(e,r,o),this.uvCoords=t}}export{B as Graphics3DWaterSymbolLayer,U as headingVectorFromAngle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";import{Graphics3DExtrudeSymbolLayer as o}from\"./Graphics3DExtrudeSymbolLayer.js\";import{Graphics3DIconSymbolLayer as e}from\"./Graphics3DIconSymbolLayer.js\";import{Graphics3DLineSymbolLayer as t}from\"./Graphics3DLineSymbolLayer.js\";import{Graphics3DMeshFillSymbolLayer as i}from\"./Graphics3DMeshFillSymbolLayer.js\";import{Graphics3DObjectSymbolLayer as m}from\"./Graphics3DObjectSymbolLayer.js\";import{Graphics3DPathSymbolLayer as a}from\"./Graphics3DPathSymbolLayer.js\";import{Graphics3DPolygonFillSymbolLayer as s}from\"./Graphics3DPolygonFillSymbolLayer.js\";import{Graphics3DTextSymbolLayer as y}from\"./Graphics3DTextSymbolLayer.js\";import{Graphics3DWaterSymbolLayer as p}from\"./Graphics3DWaterSymbolLayer.js\";function c(o,e,t,i){const m=h[o.type]?.[e.type]||l[e.type];return m?new m(o,e,t,i):(r.getLogger(\"esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory\").error(\"GraphicsLayerFactory#make\",`unknown symbol type ${e.type}`),null)}const l={icon:e,object:m,line:t,path:a,fill:s,extrude:o,text:y,water:p};function n(r,o){l[r]=o}const h={\"mesh-3d\":{fill:i}};export{c as make,n as setSymbolClass};\n"],"names":["o","t","n","e","r","d","c","a","i","m","v","u","f","l","s","p","b","g$4","h","g","a$6","h$5","f$9","g$3","st","ot$1","T","U","y","_","J","q","It","rt","z","A","N","I","M","V","W","G","j","x","L","S","B","P","E","O","w","nt","C","At","Y","it","D","R","Lt","_t","tt","F","k","H","bt","et","Z","Q","K","at","mt","St","Et","Pt","lt","ct","ft","pt","ht","gt","dt","ut","yt","X","jt","xt","wt","Ot","vt","Ct","Mt","$","t$3","a$5","FocusAreaColor_glsl","l$9","FocusAreaMask_glsl","i$3","r$8","s$4","b$7","A$2","C$3","LineMarker_glsl","I$7","se","oe","ae","ne","le$1","le","ue","me","re","ce","has","he","de","ie","pe","ee","_e","te","fe","V$5","p$3","r$5","d$6","NativeLine_glsl","s$3","U$3","I$5","Ne","Ie","xe","Pe","Ze","Ye","Je","$e","Te","We","He","Me","ze","ke","Ce","be","Ee","Ae","je","Re","Le","Ve","ve","ye","we","ge","Ke","Xe","ot","Ue","Be","Se","De","Fe","Ge","qe","Oe","Qe","u$5","o$3","o$2","l$5","h$4","a$3","l$4","d$5","f$3","g$1","x$2","L$3","n$4","N$2","R$2","y$3","T$1","E$1","S$1","n$2","I$2","N$1","W$1","WaterSurface_glsl"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]}