import{dO as C,F as $,e1 as R,dQ as S,e2 as k,r as v,dS as m,e4 as B,e6 as M,dG as g,e7 as N,dU as O,c$ as z,d0 as p,gn as V,dV as G,go as H,d$ as P,d1 as T,c_ as W}from"./main-DnzmeE4U.js";const D={class:"swipe-container"},F=["id","aria-valuenow","aria-label","content"],I=["swipe-position","view"],U=C({__name:"swipe",props:{fixture:{type:$,required:!0},message:String},setup(_){const r=R("iApi"),c=S(),a=k("slider"),y=v(45),u=v(0),d=v(0),L=v(50),h=v(),t=v(),x=m(()=>{const i=30+d.value-d.value,e=a.value?.getBoundingClientRect()?a.value?.getBoundingClientRect().right-a.value?.getBoundingClientRect().left:0,l=+y.value/90,n=(e-i)*l,f=(a.value?.getBoundingClientRect().x??0)+n+(i-5.25)/2;return L.value=f/r.$rootEl.clientWidth*100+.2,`${f}px`}),b=m(()=>`${u.value}px`),A=m(()=>`${-u.value/2-18}px`);B(()=>{u.value=r.$rootEl?.clientHeight??1200});const E=()=>{u.value=r.$rootEl?.clientHeight??u.value,d.value++,setTimeout(()=>{d.value++},50)},s=()=>{c.setOpacity(.1),a.value.style.background=""},o=()=>{c.setOpacity(1),a.value.style.background="inherit"};M(async()=>{"ontouchstart"in document.documentElement||!window.matchMedia("(pointer:fine)").matches||(a.value.style.background="inherit"),window.addEventListener("resize",E),a.value?.addEventListener("focus",s),a.value?.addEventListener("blur",o),a.value?.addEventListener("mouseover",s),a.value?.addEventListener("mouseleave",o),a.value?.addEventListener("touchstart",s),a.value?.addEventListener("touchend",o),setTimeout(()=>{d.value++},50),await w(),r.event.on(g.MAP_BASEMAPCHANGE,async i=>{i.schemaChanged&&(t.value?.trailingLayers.forEach(e=>{t.value?.trailingLayers.remove(e)}),t.value?.leadingLayers.forEach(e=>{t.value?.leadingLayers.remove(e)}),await w())}),r.event.on(g.LAYER_RELOAD_END,i=>{t.value?.trailingLayers.forEach(e=>{e.id===i.id&&(t.value?.trailingLayers.remove(e),t.value?.trailingLayers.add(i.esriLayer))}),t.value?.leadingLayers.forEach(e=>{e.id===i.id&&(t.value?.leadingLayers.remove(e),t.value?.leadingLayers.add(i.esriLayer))})}),r.event.on(g.LAYER_REMOVE,i=>{t.value?.trailingLayers.forEach(e=>{e.id===i.id&&t.value?.trailingLayers.remove(e)}),t.value?.leadingLayers.forEach(e=>{e.id===i.id&&t.value?.leadingLayers.remove(e)})})});const w=async()=>{await r.geo.map.viewPromise,h.value=r.geo.map.esriView;const i=["Nature","WFSLayer"],e=["Water","GeoMet"];i.forEach(l=>{r.geo.layer.awaitLayer(l,!0).then(n=>{n.esriLayer?t.value?.trailingLayers.add(n.esriLayer):console.warn(`Invalid layer instance: ${l}`)})}),e.forEach(l=>{r.geo.layer.awaitLayer(l,!0).then(n=>{n.esriLayer?t.value?.leadingLayers.add(n.esriLayer):console.warn(`Invalid layer instance: ${l}`)})})};return N(()=>{window.removeEventListener("resize",E),a.value?.removeEventListener("focus",()=>s),a.value?.removeEventListener("blur",()=>o),a.value?.removeEventListener("mouseover",s),a.value?.removeEventListener("mouseleave",o),a.value?.removeEventListener("touchstart",s),a.value?.removeEventListener("touchend",o)}),(i,e)=>{const l=O("tippy");return T(),z("div",D,[p("div",{class:"verticalLine",style:V({left:x.value,height:b.value,bottom:A.value})},null,4),G(p("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),id:"layerSlider"+P(r).$element._uid,class:"layerSliderElement",type:"range",ref_key:"slider",ref:a,min:"0","aria-valuemin":"0","aria-valuemax":"90","aria-valuenow":y.value,"aria-label":i.$t("map.layerSwipe.label"),max:"90",step:"0.5",content:i.$t("map.layerSwipe.drag"),style:{"z-index":10}},null,8,F),[[H,y.value],[l,{followCursor:!0,trigger:"mouseenter"}]]),p("arcgis-swipe",{direction:"horizontal","swipe-position":L.value,view:h.value,"auto-destroy-disable":"",ref_key:"swipeComponent",ref:t},null,8,I)])}}}),Y=W(U,[["__scopeId","data-v-0804fa06"]]);class Q extends ${async added(){const{el:r,destroy:c}=this.mount(Y,{app:this.$element,props:{message:"This is a swipe.",fixture:this}});r.childNodes[0]&&this.$vApp.$el.appendChild(r.childNodes[0]),this.removed=()=>{c()}}}export{Q as default};
