import"./index-Cezzb5s0.js";import"./customElement-B5RyutyI.js";import{S as ee,M as Oe}from"./jsxFactory-C5LxVioS.js";import{cK as ne,cL as ie,cI as P,cJ as M,cR as st}from"./main-DnzmeE4U.js";import{i as xt}from"./keyed-BMAvP6cM.js";import{u as ct,p as Pn}from"./dom-BYU3NyXf.js";import"./index-Buwx-j9b.js";import"./index-O937z6z8.js";import"./customElement-DYCpmMfo.js";import"./index-DBbiKKfA.js";import{e as On,n as Fe}from"./ref-CeH0N1rX.js";import{S as Me,a as Fn,i as Le,b as oe,c as re,r as Mn,f as Ln,d as ke}from"./debounce-B9WUP9Xk.js";import{m as $e,p as Ne}from"./interactive-zE84MPIe.js";import{r as Re}from"./loadable-6U0DTqmj.js";import{s as je}from"./useT9n-ao51JRwP.js";import{b as kn}from"./observers-BKdf62mV.js";import{i as Ct,c as ae,h as $n,o as le,d as se,a as Nn}from"./utils-BV7fKXT2.js";import{q as Xe}from"./input-CCJ2dDrH.js";import{i as Rn}from"./guid-Cv9vc9qs.js";function jn(t,e){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}var He=Array.isArray,Xn=1/0,ze=Me?Me.prototype:void 0,Be=ze?ze.toString:void 0;function Ye(t){if(typeof t=="string")return t;if(He(t))return jn(t,Ye)+"";if(Fn(t))return Be?Be.call(t):"";var e=t+"";return e=="0"&&1/t==-Xn?"-0":e}function Hn(t){return t}var zn="[object AsyncFunction]",Bn="[object Function]",Yn="[object GeneratorFunction]",Un="[object Proxy]";function Gn(t){if(!Le(t))return!1;var e=oe(t);return e==Bn||e==Yn||e==zn||e==Un}var Wn=9007199254740991,qn=/^(?:0|[1-9]\d*)$/;function Vn(t,e){var n=typeof t;return e=e??Wn,!!e&&(n=="number"||n!="symbol"&&qn.test(t))&&t>-1&&t%1==0&&t<e}var Zn=9007199254740991;function Ue(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Zn}function Jn(t){return t!=null&&Ue(t.length)&&!Gn(t)}var Kn=Object.prototype;function Qn(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Kn;return t===n}function ti(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var ei="[object Arguments]";function Ge(t){return re(t)&&oe(t)==ei}var We=Object.prototype,ni=We.hasOwnProperty,ii=We.propertyIsEnumerable,oi=Ge(function(){return arguments}())?Ge:function(t){return re(t)&&ni.call(t,"callee")&&!ii.call(t,"callee")};function ri(){return!1}var qe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ve=qe&&typeof module=="object"&&module&&!module.nodeType&&module,ai=Ve&&Ve.exports===qe,Ze=ai?Mn.Buffer:void 0,li=Ze?Ze.isBuffer:void 0,si=li||ri,ci="[object Arguments]",di="[object Array]",hi="[object Boolean]",ui="[object Date]",pi="[object Error]",fi="[object Function]",gi="[object Map]",mi="[object Number]",vi="[object Object]",bi="[object RegExp]",yi="[object Set]",Ei="[object String]",wi="[object WeakMap]",Si="[object ArrayBuffer]",Ii="[object DataView]",Di="[object Float32Array]",xi="[object Float64Array]",Ci="[object Int8Array]",Ai="[object Int16Array]",Ti="[object Int32Array]",_i="[object Uint8Array]",Pi="[object Uint8ClampedArray]",Oi="[object Uint16Array]",Fi="[object Uint32Array]",w={};w[Di]=w[xi]=w[Ci]=w[Ai]=w[Ti]=w[_i]=w[Pi]=w[Oi]=w[Fi]=!0,w[ci]=w[di]=w[Si]=w[hi]=w[Ii]=w[ui]=w[pi]=w[fi]=w[gi]=w[mi]=w[vi]=w[bi]=w[yi]=w[Ei]=w[wi]=!1;function Mi(t){return re(t)&&Ue(t.length)&&!!w[oe(t)]}function Li(t){return function(e){return t(e)}}var Je=typeof exports=="object"&&exports&&!exports.nodeType&&exports,At=Je&&typeof module=="object"&&module&&!module.nodeType&&module,ki=At&&At.exports===Je,ce=ki&&Ln.process,Ke=function(){try{var t=At&&At.require&&At.require("util").types;return t||ce&&ce.binding&&ce.binding("util")}catch{}}(),Qe=Ke&&Ke.isTypedArray,$i=Qe?Li(Qe):Mi;function Ni(t,e){var n=He(t),i=!n&&oi(t),o=!n&&!i&&si(t),r=!n&&!i&&!o&&$i(t),a=n||i||o||r,s=a?ti(t.length,String):[],l=s.length;for(var c in t)a&&(c=="length"||o&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Vn(c,l))||s.push(c);return s}function Ri(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ji=Object.prototype,Xi=ji.hasOwnProperty;function Hi(t){if(!Le(t))return Ri(t);var e=Qn(t),n=[];for(var i in t)i=="constructor"&&(e||!Xi.call(t,i))||n.push(i);return n}function zi(t){return Jn(t)?Ni(t):Hi(t)}function Bi(t){return t==null?"":Ye(t)}function Yi(t){return function(e,n,i){for(var o=-1,r=Object(e),a=i(e),s=a.length;s--;){var l=a[++o];if(n(r[l],l,r)===!1)break}return e}}var Ui=Yi();function Gi(t){return typeof t=="function"?t:Hn}var tn=/[\\^$.*+?()[\]{}|]/g,Wi=RegExp(tn.source);function qi(t){return t=Bi(t),t&&Wi.test(t)?t.replace(tn,"\\$&"):t}function Vi(t,e){return t==null?t:Ui(t,Gi(e),zi)}const gt={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},mt={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"},Zi=ne`:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`;class Ji extends ie{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}static{this.properties={hasActionsEnd:16,hasActionsStart:16,hasContentEnd:16,hasContentStart:16,disabled:7}}static{this.styles=Zi}handleActionsStartSlotChange(e){this.hasActionsStart=ct(e)}handleActionsEndSlotChange(e){this.hasActionsEnd=ct(e)}handleContentStartSlotChange(e){this.hasContentStart=ct(e)}handleContentEndSlotChange(e){this.hasContentEnd=ct(e)}renderActionsStart(){const{hasActionsStart:e}=this;return xt("actions-start-container",P`<div class=${M(gt.actionsStart)} .hidden=${!e}><slot name=${mt.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:e}=this;return xt("actions-end-container",P`<div class=${M(gt.actionsEnd)} .hidden=${!e}><slot name=${mt.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:e}=this;return P`<div class=${M(gt.contentStart)} .hidden=${!e}><slot name=${mt.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return P`<div class=${M(gt.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:e}=this;return P`<div class=${M(gt.contentEnd)} .hidden=${!e}><slot name=${mt.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return P`<div class=${M(gt.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}}ee("calcite-stack",Ji);const de=(t,e,n)=>{const i=qi(e),o=new RegExp(i,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const r=(a,s,l)=>{if(a?.constant||a?.filterDisabled)return!0;let c=!1;return Vi(a,(h,u)=>{typeof h=="function"||h==null||l&&!l.includes(u)||(Array.isArray(h)||typeof h=="object"&&h!==null?r(h,s)&&(c=!0):s.test(h)&&(c=!0))}),c};return t.filter(a=>r(a,o,n))},Ki={container:"container"},Qi={search:"search"},to=ne`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-spacing-sm)}:host([scale=m]) .container{padding:var(--calcite-spacing-md)}:host([scale=l]) .container{padding:var(--calcite-spacing-lg)}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}input[type=text]{margin-block-end:.25rem;inline-size:100%;border-style:none;background-color:transparent;padding-block:.25rem;font-family:inherit;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-color-text-1);padding-inline-end:.25rem;padding-inline-start:1.5rem;transition:padding var(--calcite-animation-timing),box-shadow var(--calcite-animation-timing)}input[type=text]::-ms-clear{display:none}calcite-input{inline-size:100%}.search-icon{position:absolute;display:flex;color:var(--calcite-color-text-2);inset-inline-start:0;transition:inset-inline-start var(--calcite-animation-timing),inset-inline-end var(--calcite-animation-timing),opacity var(--calcite-animation-timing)}input[type=text]:focus{border-color:var(--calcite-color-brand);outline:2px solid transparent;outline-offset:2px;padding-inline:.25rem}input[type=text]:focus~.search-icon{inset-inline-start:-1rem;opacity:0}.clear-button{display:flex;cursor:pointer;align-items:center;border-width:0px;background-color:transparent;color:var(--calcite-color-text-2)}.clear-button:hover,.clear-button:focus{color:var(--calcite-color-text-1)}:host([hidden]){display:none}[hidden]{display:none}`;class eo extends ie{constructor(){super(...arguments),this.filterDebounced=ke((e,n=!1,i)=>this.updateFiltered(de(this.items??[],e,this.filterProps),n,i),Oe.filter),this.textInput=On(),this._value="",this.disabled=!1,this.filteredItems=[],this.items=[],this.messages=je(),this.scale="m",this.calciteFilterChange=st({cancelable:!1})}static{this.properties={disabled:7,filterProps:0,filteredItems:0,items:0,label:1,messageOverrides:0,placeholder:1,scale:3,value:1}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=to}get value(){return this._value}set value(e){const n=this._value;e!==n&&(this._value=e,this.valueHandler(e))}async filter(e=this.value){return new Promise(n=>{this.value=e,this.updateFiltered(de(this.items??[],e,this.filterProps),!1,n)})}async setFocus(){return await Re(this),this.textInput.value?.setFocus()}async load(){this.updateFiltered(de(this.items??[],this.value,this.filterProps))}willUpdate(e){(e.has("items")&&(this.hasUpdated||this.items?.length>0)||e.has("filterProps"))&&this.filterDebounced(this.value)}updated(){$e(this)}loaded(){}disconnectedCallback(){super.disconnectedCallback(),this.filterDebounced.cancel()}valueHandler(e){this.filterDebounced(e)}inputHandler(e){const n=e.target;this.value=n.value,this.filterDebounced(n.value,!0)}keyDownHandler(e){e.defaultPrevented||(e.key==="Escape"&&(this.clear(),e.preventDefault()),e.key==="Enter"&&e.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(e,n=!1,i){this.filteredItems=e,n&&this.calciteFilterChange.emit(),i?.()}render(){const{disabled:e,scale:n}=this;return Ne({disabled:e,children:P`<div class=${M(Ki.container)}><label><calcite-input clearable .disabled=${e} .icon=${Qi.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${n} type=text .value=${this.value} ${Fe(this.textInput)}></calcite-input></label></div>`})}}ee("calcite-filter",eo);function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?en(Object(n),!0).forEach(function(i){no(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function jt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jt=function(e){return typeof e}:jt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(t)}function no(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V(){return V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},V.apply(this,arguments)}function io(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,r;for(r=0;r<i.length;r++)o=i[r],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function oo(t,e){if(t==null)return{};var n=io(t,e),i,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var ro="1.15.6";function Z(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var J=Z(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Tt=Z(/Edge/i),nn=Z(/firefox/i),_t=Z(/safari/i)&&!Z(/chrome/i)&&!Z(/android/i),he=Z(/iP(ad|od|hone)/i),on=Z(/chrome/i)&&Z(/android/i),rn={capture:!1,passive:!1};function b(t,e,n){t.addEventListener(e,n,!J&&rn)}function v(t,e,n){t.removeEventListener(e,n,!J&&rn)}function Xt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function an(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function H(t,e,n,i){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xt(t,e):Xt(t,e))||i&&t===n)return t;if(t===n)break}while(t=an(t))}return null}var ln=/\s+/g;function R(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(ln," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(ln," ")}}function p(t,e,n){var i=t&&t.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=n+(typeof n=="string"?"":"px")}}function vt(t,e){var n="";if(typeof t=="string")n=t;else do{var i=p(t,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function sn(t,e,n){if(t){var i=t.getElementsByTagName(e),o=0,r=i.length;if(n)for(;o<r;o++)n(i[o],o);return i}return[]}function U(){var t=document.scrollingElement;return t||document.documentElement}function x(t,e,n,i,o){if(!(!t.getBoundingClientRect&&t!==window)){var r,a,s,l,c,h,u;if(t!==window&&t.parentNode&&t!==U()?(r=t.getBoundingClientRect(),a=r.top,s=r.left,l=r.bottom,c=r.right,h=r.height,u=r.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(o=o||t.parentNode,!J))do if(o&&o.getBoundingClientRect&&(p(o,"transform")!=="none"||n&&p(o,"position")!=="static")){var E=o.getBoundingClientRect();a-=E.top+parseInt(p(o,"border-top-width")),s-=E.left+parseInt(p(o,"border-left-width")),l=a+r.height,c=s+r.width;break}while(o=o.parentNode);if(i&&t!==window){var m=vt(o||t),A=m&&m.a,y=m&&m.d;m&&(a/=y,s/=A,u/=A,h/=y,l=a+h,c=s+u)}return{top:a,left:s,bottom:l,right:c,width:u,height:h}}}function cn(t,e,n){for(var i=tt(t,!0),o=x(t)[e];i;){var r=x(i)[n],a=void 0;if(a=o>=r,!a)return i;if(i===U())break;i=tt(i,!1)}return!1}function bt(t,e,n,i){for(var o=0,r=0,a=t.children;r<a.length;){if(a[r].style.display!=="none"&&a[r]!==f.ghost&&(i||a[r]!==f.dragged)&&H(a[r],n.draggable,t,!1)){if(o===e)return a[r];o++}r++}return null}function ue(t,e){for(var n=t.lastElementChild;n&&(n===f.ghost||p(n,"display")==="none"||e&&!Xt(n,e));)n=n.previousElementSibling;return n||null}function X(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==f.clone&&(!e||Xt(t,e))&&n++;return n}function dn(t){var e=0,n=0,i=U();if(t)do{var o=vt(t),r=o.a,a=o.d;e+=t.scrollLeft*r,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function ao(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n)}return-1}function tt(t,e){if(!t||!t.getBoundingClientRect)return U();var n=t,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=p(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return U();if(i||e)return n;i=!0}}while(n=n.parentNode);return U()}function lo(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function pe(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Pt;function hn(t,e){return function(){if(!Pt){var n=arguments,i=this;n.length===1?t.call(i,n[0]):t.apply(i,n),Pt=setTimeout(function(){Pt=void 0},e)}}}function so(){clearTimeout(Pt),Pt=void 0}function un(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function pn(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function fn(t,e,n){var i={};return Array.from(t.children).forEach(function(o){var r,a,s,l;if(!(!H(o,e.draggable,t,!1)||o.animated||o===n)){var c=x(o);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,c.left),i.top=Math.min((a=i.top)!==null&&a!==void 0?a:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var k="Sortable"+new Date().getTime();function co(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(i){if(!(p(i,"display")==="none"||i===f.ghost)){t.push({target:i,rect:x(i)});var o=Y({},t[t.length-1].rect);if(i.thisAnimationDuration){var r=vt(i,!0);r&&(o.top-=r.f,o.left-=r.e)}i.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(ao(t,{target:n}),1)},animateAll:function(n){var i=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var o=!1,r=0;t.forEach(function(a){var s=0,l=a.target,c=l.fromRect,h=x(l),u=l.prevFromRect,E=l.prevToRect,m=a.rect,A=vt(l,!0);A&&(h.top-=A.f,h.left-=A.e),l.toRect=h,l.thisAnimationDuration&&pe(u,h)&&!pe(c,h)&&(m.top-h.top)/(m.left-h.left)===(c.top-h.top)/(c.left-h.left)&&(s=uo(m,u,E,i.options)),pe(h,c)||(l.prevFromRect=c,l.prevToRect=h,s||(s=i.options.animation),i.animate(l,m,h,s)),s&&(o=!0,r=Math.max(r,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(e),o?e=setTimeout(function(){typeof n=="function"&&n()},r):typeof n=="function"&&n(),t=[]},animate:function(n,i,o,r){if(r){p(n,"transition",""),p(n,"transform","");var a=vt(this.el),s=a&&a.a,l=a&&a.d,c=(i.left-o.left)/(s||1),h=(i.top-o.top)/(l||1);n.animatingX=!!c,n.animatingY=!!h,p(n,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=ho(n),p(n,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),p(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){p(n,"transition",""),p(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},r)}}}}function ho(t){return t.offsetWidth}function uo(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}var yt=[],fe={initializeByDefault:!0},Ot={mount:function(t){for(var e in fe)fe.hasOwnProperty(e)&&!(e in t)&&(t[e]=fe[e]);yt.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),yt.push(t)},pluginEvent:function(t,e,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var o=t+"Global";yt.forEach(function(r){e[r.pluginName]&&(e[r.pluginName][o]&&e[r.pluginName][o](Y({sortable:e},n)),e.options[r.pluginName]&&e[r.pluginName][t]&&e[r.pluginName][t](Y({sortable:e},n)))})},initializePlugins:function(t,e,n,i){yt.forEach(function(a){var s=a.pluginName;if(!(!t.options[s]&&!a.initializeByDefault)){var l=new a(t,e,t.options);l.sortable=t,l.options=t.options,t[s]=l,V(n,l.defaults)}});for(var o in t.options)if(t.options.hasOwnProperty(o)){var r=this.modifyOption(t,o,t.options[o]);typeof r<"u"&&(t.options[o]=r)}},getEventProperties:function(t,e){var n={};return yt.forEach(function(i){typeof i.eventProperties=="function"&&V(n,i.eventProperties.call(e[i.pluginName],t))}),n},modifyOption:function(t,e,n){var i;return yt.forEach(function(o){t[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[e]=="function"&&(i=o.optionListeners[e].call(t[o.pluginName],n))}),i}};function po(t){var e=t.sortable,n=t.rootEl,i=t.name,o=t.targetEl,r=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,u=t.newDraggableIndex,E=t.originalEvent,m=t.putSortable,A=t.extraEventProperties;if(e=e||n&&n[k],!!e){var y,G=e.options,F="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!J&&!Tt?y=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(i,!0,!0)),y.to=a||n,y.from=s||n,y.item=o||n,y.clone=r,y.oldIndex=l,y.newIndex=c,y.oldDraggableIndex=h,y.newDraggableIndex=u,y.originalEvent=E,y.pullMode=m?m.lastPutMode:void 0;var W=Y(Y({},A),Ot.getEventProperties(i,e));for(var _ in W)y[_]=W[_];n&&n.dispatchEvent(y),G[F]&&G[F].call(e,y)}}var fo=["evt"],$=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.evt,o=oo(n,fo);Ot.pluginEvent.bind(f)(t,e,Y({dragEl:d,parentEl:D,ghostEl:g,rootEl:S,nextEl:dt,lastDownEl:Ht,cloneEl:I,cloneHidden:et,dragStarted:Mt,putSortable:T,activeSortable:f.active,originalEvent:i,oldIndex:Et,oldDraggableIndex:Ft,newIndex:j,newDraggableIndex:nt,hideGhostForTarget:wn,unhideGhostForTarget:Sn,cloneNowHidden:function(){et=!0},cloneNowShown:function(){et=!1},dispatchSortableEvent:function(r){L({sortable:e,name:r,originalEvent:i})}},o))};function L(t){po(Y({putSortable:T,cloneEl:I,targetEl:d,rootEl:S,oldIndex:Et,oldDraggableIndex:Ft,newIndex:j,newDraggableIndex:nt},t))}var d,D,g,S,dt,Ht,I,et,Et,j,Ft,nt,zt,T,wt=!1,Bt=!1,Yt=[],ht,z,ge,me,gn,mn,Mt,St,Lt,kt=!1,Ut=!1,Gt,O,ve=[],be=!1,Wt=[],qt=typeof document<"u",Vt=he,vn=Tt||J?"cssFloat":"float",go=qt&&!on&&!he&&"draggable"in document.createElement("div"),bn=function(){if(qt){if(J)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),yn=function(t,e){var n=p(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=bt(t,0,e),r=bt(t,1,e),a=o&&p(o),s=r&&p(r),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+x(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+x(r).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return r&&(s.clear==="both"||s.clear===h)?"vertical":"horizontal"}return o&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=i&&n[vn]==="none"||r&&n[vn]==="none"&&l+c>i)?"vertical":"horizontal"},mo=function(t,e,n){var i=n?t.left:t.top,o=n?t.right:t.bottom,r=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===a||o===s||i+r/2===a+l/2},vo=function(t,e){var n;return Yt.some(function(i){var o=i[k].options.emptyInsertThreshold;if(!(!o||ue(i))){var r=x(i),a=t>=r.left-o&&t<=r.right+o,s=e>=r.top-o&&e<=r.bottom+o;if(a&&s)return n=i}}),n},En=function(t){function e(o,r){return function(a,s,l,c){var h=a.options.group.name&&s.options.group.name&&a.options.group.name===s.options.group.name;if(o==null&&(r||h))return!0;if(o==null||o===!1)return!1;if(r&&o==="clone")return o;if(typeof o=="function")return e(o(a,s,l,c),r)(a,s,l,c);var u=(r?a:s).options.group.name;return o===!0||typeof o=="string"&&o===u||o.join&&o.indexOf(u)>-1}}var n={},i=t.group;(!i||jt(i)!="object")&&(i={name:i}),n.name=i.name,n.checkPull=e(i.pull,!0),n.checkPut=e(i.put),n.revertClone=i.revertClone,t.group=n},wn=function(){!bn&&g&&p(g,"display","none")},Sn=function(){!bn&&g&&p(g,"display","")};qt&&!on&&document.addEventListener("click",function(t){if(Bt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Bt=!1,!1},!0);var ut=function(t){if(d){t=t.touches?t.touches[0]:t;var e=vo(t.clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[k]._onDragOver(n)}}},bo=function(t){d&&d.parentNode[k]._isOutsideThisEl(t.target)};function f(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=V({},e),t[k]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,a){r.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:f.supportPointer!==!1&&"PointerEvent"in window&&(!_t||he),emptyInsertThreshold:5};Ot.initializePlugins(this,t,n);for(var i in n)!(i in e)&&(e[i]=n[i]);En(e);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=e.forceFallback?!1:go,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?b(t,"pointerdown",this._onTapStart):(b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),V(this,co())}f.prototype={constructor:f,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(St=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,i=this.options,o=i.preventOnFilter,r=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,s=(a||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=i.filter;if(Co(n),!d&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||i.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&_t&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=H(s,i.draggable,n,!1),!(s&&s.animated)&&Ht!==s)){if(Et=X(s),Ft=X(s,i.draggable),typeof c=="function"){if(c.call(this,t,s,this)){L({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),$("filter",e,{evt:t}),o&&t.preventDefault();return}}else if(c&&(c=c.split(",").some(function(h){if(h=H(l,h.trim(),n,!1),h)return L({sortable:e,rootEl:h,name:"filter",targetEl:s,fromEl:n,toEl:n}),$("filter",e,{evt:t}),!0}),c)){o&&t.preventDefault();return}i.handle&&!H(l,i.handle,n,!1)||this._prepareDragStart(t,a,s)}}},_prepareDragStart:function(t,e,n){var i=this,o=i.el,r=i.options,a=o.ownerDocument,s;if(n&&!d&&n.parentNode===o){var l=x(n);if(S=o,d=n,D=d.parentNode,dt=d.nextSibling,Ht=n,zt=r.group,f.dragged=d,ht={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},gn=ht.clientX-l.left,mn=ht.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",s=function(){if($("delayEnded",i,{evt:t}),f.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!nn&&i.nativeDraggable&&(d.draggable=!0),i._triggerDragStart(t,e),L({sortable:i,name:"choose",originalEvent:t}),R(d,r.chosenClass,!0)},r.ignore.split(",").forEach(function(c){sn(d,c.trim(),ye)}),b(a,"dragover",ut),b(a,"mousemove",ut),b(a,"touchmove",ut),r.supportPointer?(b(a,"pointerup",i._onDrop),!this.nativeDraggable&&b(a,"pointercancel",i._onDrop)):(b(a,"mouseup",i._onDrop),b(a,"touchend",i._onDrop),b(a,"touchcancel",i._onDrop)),nn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),$("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Tt||J))){if(f.eventCanceled){this._onDrop();return}r.supportPointer?(b(a,"pointerup",i._disableDelayedDrag),b(a,"pointercancel",i._disableDelayedDrag)):(b(a,"mouseup",i._disableDelayedDrag),b(a,"touchend",i._disableDelayedDrag),b(a,"touchcancel",i._disableDelayedDrag)),b(a,"mousemove",i._delayedDragTouchMoveHandler),b(a,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&b(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(s,r.delay)}else s()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&ye(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._disableDelayedDrag),v(t,"touchend",this._disableDelayedDrag),v(t,"touchcancel",this._disableDelayedDrag),v(t,"pointerup",this._disableDelayedDrag),v(t,"pointercancel",this._disableDelayedDrag),v(t,"mousemove",this._delayedDragTouchMoveHandler),v(t,"touchmove",this._delayedDragTouchMoveHandler),v(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?b(document,"pointermove",this._onTouchMove):e?b(document,"touchmove",this._onTouchMove):b(document,"mousemove",this._onTouchMove):(b(d,"dragend",this),b(S,"dragstart",this._onDragStart));try{document.selection?Jt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(wt=!1,S&&d){$("dragStarted",this,{evt:e}),this.nativeDraggable&&b(document,"dragover",bo);var n=this.options;!t&&R(d,n.dragClass,!1),R(d,n.ghostClass,!0),f.active=this,t&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(z){this._lastX=z.clientX,this._lastY=z.clientY,wn();for(var t=document.elementFromPoint(z.clientX,z.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(z.clientX,z.clientY),t!==e);)e=t;if(d.parentNode[k]._isOutsideThisEl(t),e)do{if(e[k]){var n=void 0;if(n=e[k]._onDragOver({clientX:z.clientX,clientY:z.clientY,target:t,rootEl:e}),n&&!this.options.dragoverBubble)break}t=e}while(e=an(e));Sn()}},_onTouchMove:function(t){if(ht){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=g&&vt(g,!0),a=g&&r&&r.a,s=g&&r&&r.d,l=Vt&&O&&dn(O),c=(o.clientX-ht.clientX+i.x)/(a||1)+(l?l[0]-ve[0]:0)/(a||1),h=(o.clientY-ht.clientY+i.y)/(s||1)+(l?l[1]-ve[1]:0)/(s||1);if(!f.active&&!wt){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(g){r?(r.e+=c-(ge||0),r.f+=h-(me||0)):r={a:1,b:0,c:0,d:1,e:c,f:h};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");p(g,"webkitTransform",u),p(g,"mozTransform",u),p(g,"msTransform",u),p(g,"transform",u),ge=c,me=h,z=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!g){var t=this.options.fallbackOnBody?document.body:S,e=x(d,!0,Vt,!0,t),n=this.options;if(Vt){for(O=t;p(O,"position")==="static"&&p(O,"transform")==="none"&&O!==document;)O=O.parentNode;O!==document.body&&O!==document.documentElement?(O===document&&(O=U()),e.top+=O.scrollTop,e.left+=O.scrollLeft):O=U(),ve=dn(O)}g=d.cloneNode(!0),R(g,n.ghostClass,!1),R(g,n.fallbackClass,!0),R(g,n.dragClass,!0),p(g,"transition",""),p(g,"transform",""),p(g,"box-sizing","border-box"),p(g,"margin",0),p(g,"top",e.top),p(g,"left",e.left),p(g,"width",e.width),p(g,"height",e.height),p(g,"opacity","0.8"),p(g,"position",Vt?"absolute":"fixed"),p(g,"zIndex","100000"),p(g,"pointerEvents","none"),f.ghost=g,t.appendChild(g),p(g,"transform-origin",gn/parseInt(g.style.width)*100+"% "+mn/parseInt(g.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,o=n.options;if($("dragStart",this,{evt:t}),f.eventCanceled){this._onDrop();return}$("setupClone",this),f.eventCanceled||(I=pn(d),I.removeAttribute("id"),I.draggable=!1,I.style["will-change"]="",this._hideClone(),R(I,this.options.chosenClass,!1),f.clone=I),n.cloneId=Jt(function(){$("clone",n),!f.eventCanceled&&(n.options.removeCloneOnHide||S.insertBefore(I,d),n._hideClone(),L({sortable:n,name:"clone"}))}),!e&&R(d,o.dragClass,!0),e?(Bt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(v(document,"mouseup",n._onDrop),v(document,"touchend",n._onDrop),v(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",o.setData&&o.setData.call(n,i,d)),b(document,"drop",n),p(d,"transform","translateZ(0)")),wt=!0,n._dragStartId=Jt(n._dragStarted.bind(n,e,t)),b(document,"selectstart",n),Mt=!0,window.getSelection().removeAllRanges(),_t&&p(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,n=t.target,i,o,r,a=this.options,s=a.group,l=f.active,c=zt===s,h=a.sort,u=T||l,E,m=this,A=!1;if(be)return;function y(Dt,Tn){$(Dt,m,Y({evt:t,isOwner:c,axis:E?"vertical":"horizontal",revert:r,dragRect:i,targetRect:o,canSort:h,fromSortable:u,target:n,completed:F,onMove:function(Pe,_n){return Zt(S,e,d,i,Pe,x(Pe),t,_n)},changed:W},Tn))}function G(){y("dragOverAnimationCapture"),m.captureAnimationState(),m!==u&&u.captureAnimationState()}function F(Dt){return y("dragOverCompleted",{insertion:Dt}),Dt&&(c?l._hideClone():l._showClone(m),m!==u&&(R(d,T?T.options.ghostClass:l.options.ghostClass,!1),R(d,a.ghostClass,!0)),T!==m&&m!==f.active?T=m:m===f.active&&T&&(T=null),u===m&&(m._ignoreWhileAnimating=n),m.animateAll(function(){y("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(n===d&&!d.animated||n===e&&!n.animated)&&(St=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(d.parentNode[k]._isOutsideThisEl(t.target),!Dt&&ut(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),A=!0}function W(){j=X(d),nt=X(d,a.draggable),L({sortable:m,name:"change",toEl:e,newIndex:j,newDraggableIndex:nt,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=H(n,a.draggable,e,!0),y("dragOver"),f.eventCanceled)return A;if(d.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||m._ignoreWhileAnimating===n)return F(!1);if(Bt=!1,l&&!a.disabled&&(c?h||(r=D!==S):T===this||(this.lastPutMode=zt.checkPull(this,l,d,t))&&s.checkPut(this,l,d,t))){if(E=this._getDirection(t,n)==="vertical",i=x(d),y("dragOverValid"),f.eventCanceled)return A;if(r)return D=S,G(),this._hideClone(),y("revert"),f.eventCanceled||(dt?S.insertBefore(d,dt):S.appendChild(d)),F(!0);var _=ue(e,a.draggable);if(!_||So(t,E,this)&&!_.animated){if(_===d)return F(!1);if(_&&e===t.target&&(n=_),n&&(o=x(n)),Zt(S,e,d,i,n,o,t,!!n)!==!1)return G(),_&&_.nextSibling?e.insertBefore(d,_.nextSibling):e.appendChild(d),D=e,W(),F(!0)}else if(_&&wo(t,E,this)){var ot=bt(e,0,a,!0);if(ot===d)return F(!1);if(n=ot,o=x(n),Zt(S,e,d,i,n,o,t,!1)!==!1)return G(),e.insertBefore(d,ot),D=e,W(),F(!0)}else if(n.parentNode===e){o=x(n);var B=0,rt,It=d.parentNode!==e,pt=!mo(d.animated&&d.toRect||i,n.animated&&n.toRect||o,E),N=E?"top":"left",K=cn(n,"top","top")||cn(d,"top","top"),Rt=K?K.scrollTop:void 0;St!==n&&(rt=o[N],kt=!1,Ut=!pt&&a.invertSwap||It),B=Io(t,n,o,E,pt?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Ut,St===n);var q;if(B!==0){var ft=X(d);do ft-=B,q=D.children[ft];while(q&&(p(q,"display")==="none"||q===g))}if(B===0||q===n)return F(!1);St=n,Lt=B;var at=n.nextElementSibling,Q=!1;Q=B===1;var lt=Zt(S,e,d,i,n,o,t,Q);if(lt!==!1)return(lt===1||lt===-1)&&(Q=lt===1),be=!0,setTimeout(Eo,30),G(),Q&&!at?e.appendChild(d):n.parentNode.insertBefore(d,Q?at:n),K&&un(K,0,Rt-K.scrollTop),D=d.parentNode,rt!==void 0&&!Ut&&(Gt=Math.abs(rt-x(n)[N])),W(),F(!0)}if(e.contains(d))return F(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",ut),v(document,"mousemove",ut),v(document,"touchmove",ut)},_offUpEvents:function(){var t=this.el.ownerDocument;v(t,"mouseup",this._onDrop),v(t,"touchend",this._onDrop),v(t,"pointerup",this._onDrop),v(t,"pointercancel",this._onDrop),v(t,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;if(j=X(d),nt=X(d,n.draggable),$("drop",this,{evt:t}),D=d&&d.parentNode,j=X(d),nt=X(d,n.draggable),f.eventCanceled){this._nulling();return}wt=!1,Ut=!1,kt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ee(this.cloneId),Ee(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_t&&p(document.body,"user-select",""),p(d,"transform",""),t&&(Mt&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),g&&g.parentNode&&g.parentNode.removeChild(g),(S===D||T&&T.lastPutMode!=="clone")&&I&&I.parentNode&&I.parentNode.removeChild(I),d&&(this.nativeDraggable&&v(d,"dragend",this),ye(d),d.style["will-change"]="",Mt&&!wt&&R(d,T?T.options.ghostClass:this.options.ghostClass,!1),R(d,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:D,newIndex:null,newDraggableIndex:null,originalEvent:t}),S!==D?(j>=0&&(L({rootEl:D,name:"add",toEl:D,fromEl:S,originalEvent:t}),L({sortable:this,name:"remove",toEl:D,originalEvent:t}),L({rootEl:D,name:"sort",toEl:D,fromEl:S,originalEvent:t}),L({sortable:this,name:"sort",toEl:D,originalEvent:t})),T&&T.save()):j!==Et&&j>=0&&(L({sortable:this,name:"update",toEl:D,originalEvent:t}),L({sortable:this,name:"sort",toEl:D,originalEvent:t})),f.active&&((j==null||j===-1)&&(j=Et,nt=Ft),L({sortable:this,name:"end",toEl:D,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){$("nulling",this),S=d=D=g=dt=I=Ht=et=ht=z=Mt=j=nt=Et=Ft=St=Lt=T=zt=f.dragged=f.ghost=f.clone=f.active=null,Wt.forEach(function(t){t.checked=!0}),Wt.length=ge=me=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),yo(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,n=this.el.children,i=0,o=n.length,r=this.options;i<o;i++)e=n[i],H(e,r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||xo(e));return t},sort:function(t,e){var n={},i=this.el;this.toArray().forEach(function(o,r){var a=i.children[r];H(a,this.options.draggable,i,!1)&&(n[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(i.removeChild(n[o]),i.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return H(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(e===void 0)return n[t];var i=Ot.modifyOption(this,t,e);typeof i<"u"?n[t]=i:n[t]=e,t==="group"&&En(n)},destroy:function(){$("destroy",this);var t=this.el;t[k]=null,v(t,"mousedown",this._onTapStart),v(t,"touchstart",this._onTapStart),v(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(t,"dragover",this),v(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yt.splice(Yt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!et){if($("hideClone",this),f.eventCanceled)return;p(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),et=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(et){if($("showClone",this),f.eventCanceled)return;d.parentNode==S&&!this.options.group.revertClone?S.insertBefore(I,d):dt?S.insertBefore(I,dt):S.appendChild(I),this.options.group.revertClone&&this.animate(d,I),p(I,"display",""),et=!1}}};function yo(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function Zt(t,e,n,i,o,r,a,s){var l,c=t[k],h=c.options.onMove,u;return window.CustomEvent&&!J&&!Tt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=o||e,l.relatedRect=r||x(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),h&&(u=h.call(c,l,a)),u}function ye(t){t.draggable=!1}function Eo(){be=!1}function wo(t,e,n){var i=x(bt(n.el,0,n.options,!0)),o=fn(n.el,n.options,g),r=10;return e?t.clientX<o.left-r||t.clientY<i.top&&t.clientX<i.right:t.clientY<o.top-r||t.clientY<i.bottom&&t.clientX<i.left}function So(t,e,n){var i=x(ue(n.el,n.options.draggable)),o=fn(n.el,n.options,g),r=10;return e?t.clientX>o.right+r||t.clientY>i.bottom&&t.clientX>i.left:t.clientY>o.bottom+r||t.clientX>i.right&&t.clientY>i.top}function Io(t,e,n,i,o,r,a,s){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,h=i?n.top:n.left,u=i?n.bottom:n.right,E=!1;if(!a){if(s&&Gt<c*o){if(!kt&&(Lt===1?l>h+c*r/2:l<u-c*r/2)&&(kt=!0),kt)E=!0;else if(Lt===1?l<h+Gt:l>u-Gt)return-Lt}else if(l>h+c*(1-o)/2&&l<u-c*(1-o)/2)return Do(e)}return E=E||a,E&&(l<h+c*r/2||l>u-c*r/2)?l>h+c/2?1:-1:0}function Do(t){return X(d)<X(t)?1:-1}function xo(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Co(t){Wt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var i=e[n];i.checked&&Wt.push(i)}}function Jt(t){return setTimeout(t,0)}function Ee(t){return clearTimeout(t)}qt&&b(document,"touchmove",function(t){(f.active||wt)&&t.cancelable&&t.preventDefault()}),f.utils={on:b,off:v,css:p,find:sn,is:function(t,e){return!!H(t,e,t,!1)},extend:lo,throttle:hn,closest:H,toggleClass:R,clone:pn,index:X,nextTick:Jt,cancelNextTick:Ee,detectDirection:yn,getChild:bt,expando:k},f.get=function(t){return t[k]},f.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(f.utils=Y(Y({},f.utils),i.utils)),Ot.mount(i)})},f.create=function(t,e){return new f(t,e)},f.version=ro;var C=[],$t,we,Se=!1,Ie,De,Kt,Nt;function Ao(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):this.options.supportPointer?b(document,"pointermove",this._handleFallbackAutoScroll):n.touches?b(document,"touchmove",this._handleFallbackAutoScroll):b(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),In(),Qt(),so()},nulling:function(){Kt=we=$t=Se=Nt=Ie=De=null,C.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var i=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,r);if(Kt=e,n||this.options.forceAutoScrollFallback||Tt||J||_t){xe(e,this.options,a,n);var s=tt(a,!0);Se&&(!Nt||o!==Ie||r!==De)&&(Nt&&In(),Nt=setInterval(function(){var l=tt(document.elementFromPoint(o,r),!0);l!==s&&(s=l,Qt()),xe(e,i.options,l,n)},10),Ie=o,De=r)}else{if(!this.options.bubbleScroll||tt(a,!0)===U()){Qt();return}xe(e,this.options,tt(a,!1),!1)}}},V(t,{pluginName:"scroll",initializeByDefault:!0})}function Qt(){C.forEach(function(t){clearInterval(t.pid)}),C=[]}function In(){clearInterval(Nt)}var xe=hn(function(t,e,n,i){if(e.scroll){var o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,s=e.scrollSpeed,l=U(),c=!1,h;we!==n&&(we=n,Qt(),$t=e.scroll,h=e.scrollFn,$t===!0&&($t=tt(n,!0)));var u=0,E=$t;do{var m=E,A=x(m),y=A.top,G=A.bottom,F=A.left,W=A.right,_=A.width,ot=A.height,B=void 0,rt=void 0,It=m.scrollWidth,pt=m.scrollHeight,N=p(m),K=m.scrollLeft,Rt=m.scrollTop;m===l?(B=_<It&&(N.overflowX==="auto"||N.overflowX==="scroll"||N.overflowX==="visible"),rt=ot<pt&&(N.overflowY==="auto"||N.overflowY==="scroll"||N.overflowY==="visible")):(B=_<It&&(N.overflowX==="auto"||N.overflowX==="scroll"),rt=ot<pt&&(N.overflowY==="auto"||N.overflowY==="scroll"));var q=B&&(Math.abs(W-o)<=a&&K+_<It)-(Math.abs(F-o)<=a&&!!K),ft=rt&&(Math.abs(G-r)<=a&&Rt+ot<pt)-(Math.abs(y-r)<=a&&!!Rt);if(!C[u])for(var at=0;at<=u;at++)C[at]||(C[at]={});(C[u].vx!=q||C[u].vy!=ft||C[u].el!==m)&&(C[u].el=m,C[u].vx=q,C[u].vy=ft,clearInterval(C[u].pid),(q!=0||ft!=0)&&(c=!0,C[u].pid=setInterval(function(){i&&this.layer===0&&f.active._onTouchMove(Kt);var Q=C[this.layer].vy?C[this.layer].vy*s:0,lt=C[this.layer].vx?C[this.layer].vx*s:0;typeof h=="function"&&h.call(f.dragged.parentNode[k],lt,Q,t,Kt,C[this.layer].el)!=="continue"||un(C[this.layer].el,lt,Q)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&E!==l&&(E=tt(E,!1)));Se=c}},30),Dn=function(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||o;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(h)&&(r("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Ce(){}Ce.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=bt(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Dn},V(Ce,{pluginName:"revertOnSpill"});function Ae(){}Ae.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable,i=n||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:Dn},V(Ae,{pluginName:"removeOnSpill"}),f.mount(new Ao),f.mount(Ae,Ce);const te=new Set,To={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function _o(t){if(Cn(t))return;xn(t),te.add(t);const e="id",{group:n,handleSelector:i,dragSelector:o}=t;t.sortable=f.create(t.el,{dataIdAttr:e,...To,...!!o&&{draggable:o},...!!n&&{group:{name:n,...!!t.canPull&&{pull:(r,a,s,{newDraggableIndex:l,oldDraggableIndex:c})=>t.canPull({toEl:r.el,fromEl:a.el,dragEl:s,newIndex:l,oldIndex:c})},...!!t.canPut&&{put:(r,a,s,{newDraggableIndex:l,oldDraggableIndex:c})=>t.canPut({toEl:r.el,fromEl:a.el,dragEl:s,newIndex:l,oldIndex:c})}}},onMove:({from:r,dragged:a,to:s,related:l})=>{t.onDragMove&&t.onDragMove({fromEl:r,dragEl:a,toEl:s,relatedEl:l})},handle:i,filter:`${i}[disabled]`,onStart:({from:r,item:a,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{Te.active=!0,Po(),t.onDragStart({fromEl:r,dragEl:a,toEl:s,newIndex:l,oldIndex:c})},onEnd:({from:r,item:a,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{Te.active=!1,Oo(),t.onDragEnd({fromEl:r,dragEl:a,toEl:s,newIndex:l,oldIndex:c})},onSort:({from:r,item:a,to:s,newDraggableIndex:l,oldDraggableIndex:c})=>{t.onDragSort({fromEl:r,dragEl:a,toEl:s,newIndex:l,oldIndex:c})}})}function xn(t){Cn(t)||(te.delete(t),t.sortable?.destroy(),t.sortable=null)}const Te={active:!1};function Cn(t){return t.dragEnabled&&Te.active}function Po(){Array.from(te).forEach(t=>t.onGlobalDragStart())}function Oo(){Array.from(te).forEach(t=>t.onGlobalDragEnd())}const it={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text"},_e={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},Fo=ne`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,Mo=`${le}, ${Ct}`;class An extends ie{constructor(){super(),this.dragSelector=Ct,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=kn("mutation",()=>{this.willPerformFilter=!0,this.updateListItems()}),this.updateListItems=ke(()=>{this.updateGroupItems();const{selectionAppearance:e,selectionMode:n,interactionMode:i,dragEnabled:o,el:r,filterEl:a,moveToItems:s,displayMode:l,scale:c}=this,h=Array.from(this.el.querySelectorAll(Ct));if(h.forEach(u=>{u.scale=c,u.selectionAppearance=e,u.selectionMode=n,u.interactionMode=i,u.closest(ae)===r&&(u.moveToItems=s.filter(E=>E.element!==r&&!u.contains(E.element)),u.dragHandle=o,u.displayMode=l)}),this.parentListEl){this.setUpSorting();return}this.listItems=h,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),a&&(a.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(u=>!u.closed&&!u.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(u=>!u.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()},Oe.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.moveToItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.messages=je({blocking:!0}),this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.calciteInternalListDefaultSlotChange=st({cancelable:!1}),this.calciteListChange=st({cancelable:!1}),this.calciteListDragEnd=st({cancelable:!1}),this.calciteListDragStart=st({cancelable:!1}),this.calciteListFilter=st({cancelable:!1}),this.calciteListOrderChange=st({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}static{this.properties={assistiveText:16,dataForFilter:16,hasFilterActionsEnd:16,hasFilterActionsStart:16,hasFilterNoResults:16,moveToItems:16,hasActiveFilter:16,showNoResultsContainer:16,canPull:0,canPut:0,disabled:7,dragEnabled:7,filterEnabled:7,filterPredicate:0,filterLabel:3,filterPlaceholder:3,filterProps:0,filterText:3,filteredData:0,filteredItems:0,group:3,interactionMode:3,label:1,loading:7,messageOverrides:0,displayMode:3,numberingSystem:1,scale:3,selectedItems:0,selectionAppearance:3,selectionMode:3}}static{this.styles=Fo}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(){return await Re(this),this.filterEnabled?this.filterEl?.setFocus():this.focusableItems.find(e=>e.active)?.setFocus()}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItems(),this.setUpSorting(),this.setParentList(),this.setListItemGroups()}async load(){this.handleInteractionModeWarning()}willUpdate(e){(e.has("filterText")||e.has("filterProps")||e.has("filterPredicate"))&&this.performFilter(),(e.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||e.has("group")||e.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||e.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||e.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||e.has("displayMode")&&this.hasUpdated||e.has("scale")&&this.hasUpdated||e.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){$e(this)}loaded(){}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),xn(this)}handleListItemChange(){this.willPerformFilter=!0,this.updateListItems()}handleCalciteListItemToggle(e){this.parentListEl||(e.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(e){if(this.parentListEl)return;e.stopPropagation();const{focusableItems:n}=this,i=n.findIndex(o=>o.active)-1;n[i]&&this.focusRow(n[i])}handleCalciteInternalListItemActive(e){if(this.parentListEl)return;e.stopPropagation();const n=e.target,{listItems:i}=this;i.forEach(o=>{o.active=o===n})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(e){this.assistiveText=e.detail.message,e.stopPropagation()}handleSortReorder(e){this.parentListEl||this.handleReorder(e)}handleSortMove(e){this.parentListEl||this.handleMove(e)}handleCalciteInternalListItemSelect(e){if(this.parentListEl)return;e.stopPropagation();const n=e.target,{listItems:i,selectionMode:o}=this;n.selected&&(o==="single"||o==="single-persist")&&i.forEach(r=>r.selected=r===n),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(e){if(this.parentListEl)return;e.stopPropagation();const{target:n,detail:i}=e,{focusableItems:o,lastSelectedInfo:r}=this,a=n;if(i.selectMultiple&&r){const s=o.indexOf(a),l=o.indexOf(r.selectedItem),c=Math.min(l,s),h=Math.max(l,s);o.slice(c,h+1).forEach(u=>u.selected=r.selected)}else this.lastSelectedInfo={selectedItem:a,selected:a.selected}}handleCalciteInternalListItemChange(e){this.parentListEl||(e.stopPropagation(),this.updateListItems())}handleCalciteInternalListItemGroupDefaultSlotChange(e){e.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:e}=this;e&&_o(this)}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(e){this.calciteListDragEnd.emit(e)}onDragMove({relatedEl:e}){e.open=!0}onDragStart(e){e.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(e)}onDragSort(e){this.setParentList(),this.updateListItems(),this.calciteListOrderChange.emit(e)}setParentList(){this.parentListEl=this.el.parentElement?.closest(ae)}handleDefaultSlotChange(e){$n(e.target),this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(le))}handleFilterActionsStartSlotChange(e){this.hasFilterActionsStart=ct(e)}handleFilterActionsEndSlotChange(e){this.hasFilterActionsEnd=ct(e)}handleFilterNoResultsSlotChange(e){this.hasFilterNoResults=ct(e)}setActiveListItem(){const{focusableItems:e}=this;e.some(n=>n.active)||e[0]&&(e[0].active=!0)}async updateSelectedItems(e=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(n=>n.selected),e&&this.calciteListChange.emit()}filterElements({el:e,filteredItems:n,visibleParents:i}){const o=!i.has(e)&&!n.includes(e);e.filterHidden=o;const r=e.parentElement.closest(Mo);r&&(o||i.add(r),this.filterElements({el:r,filteredItems:n,visibleParents:i}))}allParentListItemsOpen(e){const n=e.parentElement?.closest(Ct);if(n){if(!n.open)return!1}else return!0;return this.allParentListItemsOpen(n)}borderItems(){const e=this.visibleItems.filter(n=>!n.filterHidden&&this.allParentListItemsOpen(n));e.forEach(n=>n.bordered=n!==e[e.length-1])}updateFilteredItems(){const{visibleItems:e,filteredData:n,filterText:i,filterPredicate:o}=this,r=e?.filter(l=>e.every(c=>c===l||!l.contains(c))),a=o?e.filter(o):i?n.map(l=>l.el):e||[],s=new WeakSet;r.forEach(l=>this.filterElements({el:l,filteredItems:a,visibleParents:s})),this.filteredItems=a,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:e}=this;e&&(e.filteredItems&&(this.filteredData=e.filteredItems),this.updateListItems())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(e=>e!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:e,filterText:n,effectiveFilterProps:i}=this;e&&(e.value=n,e.filterProps=i,this.filterAndUpdateData())}setFilterEl(e){this.filterEl=e,this.performFilter()}handleFilterChange(e){e.stopPropagation();const{value:n}=e.currentTarget;this.filterText=n,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(e=>({label:e.label,description:e.description,metadata:e.metadata,heading:this.getGroupHeading(e),el:e}))}getGroupHeading(e){return this.listItemGroups.filter(n=>n.contains(e)).map(n=>n.heading)}updateGroupItems(){const{el:e,group:n,scale:i}=this,o=Pn(e),r=n?Array.from(o.querySelectorAll(`${ae}[group="${n}"]`)).filter(a=>!a.disabled&&a.dragEnabled):[];this.moveToItems=r.map(a=>({element:a,label:a.label??a.id,id:Rn()})),Array.from(this.el.querySelectorAll(le)).forEach(a=>{a.scale=i})}focusRow(e){const{focusableItems:n}=this;e&&(n.forEach(i=>i.active=i===e),e.setFocus())}isNavigable(e){const n=e.parentElement?.closest(Ct);return n?n.open&&this.isNavigable(n):!0}handleListKeydown(e){if(e.defaultPrevented||this.parentListEl)return;const{key:n}=e,i=this.focusableItems.filter(r=>this.isNavigable(r)),o=i.findIndex(r=>r.active);if(n==="ArrowDown"){e.preventDefault();const r=e.target===this.filterEl?0:o+1;i[r]&&this.focusRow(i[r])}else if(n==="ArrowUp"){if(e.preventDefault(),o===0&&this.filterEnabled){this.filterEl?.setFocus();return}const r=o-1;i[r]&&this.focusRow(i[r])}else if(n==="Home"){e.preventDefault();const r=i[0];r&&this.focusRow(r)}else if(n==="End"){e.preventDefault();const r=i[i.length-1];r&&this.focusRow(r)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}handleMove(e){const{moveTo:n}=e.detail,i=e.target,o=i?.parentElement,r=n.element,a=Array.from(o.children).filter(se).indexOf(i);if(!o)return;i.sortHandleOpen=!1,this.disconnectObserver(),r.prepend(i),Nn(i);const s=Array.from(r.children).filter(se).indexOf(i);this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:o,toEl:r,newIndex:s,oldIndex:a})}handleReorder(e){const{reorder:n}=e.detail,i=e.target,o=i?.parentElement;if(!o)return;i.sortHandleOpen=!1;const r=Array.from(o.children).filter(se),a=r.length-1,s=r.indexOf(i);let l=s;switch(n){case"top":l=0;break;case"bottom":l=a;break;case"up":l=s===0?0:s-1;break;case"down":l=s===a?a:s+1;break}this.disconnectObserver();const c=n==="up"||n==="top"?r[l]:r[l].nextSibling;o.insertBefore(i,c),this.updateListItems(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:o,toEl:o,newIndex:l,oldIndex:s})}render(){const{loading:e,label:n,disabled:i,dataForFilter:o,filterEnabled:r,filterPlaceholder:a,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:h,effectiveFilterProps:u}=this;return Ne({disabled:this.disabled,children:P`<div class=${M(it.container)}>${this.dragEnabled?P`<span aria-live=assertive class=${M(it.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${e?P`<calcite-scrim class=${M(it.scrim)} .loading=${e}></calcite-scrim>`:null}<div .ariaBusy=${e} .ariaLabel=${n||""} class=${M(it.table)} @keydown=${this.handleListKeydown} role=treegrid>${r||c||h?P`<div class=${M(it.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${M(it.stack)}><slot name=${_e.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${mt.actionsStart}></slot><calcite-filter .ariaLabel=${a} .disabled=${i} .filterProps=${u} .items=${o} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${a} .scale=${this.scale} .value=${s} ${Fe(this.setFilterEl)}></calcite-filter><slot name=${_e.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${mt.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${M(it.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${_e.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:e,filteredItems:n,parentListEl:i,messages:{_lang:o},numberingSystem:r}=this;return Xe.numberFormatOptions={locale:o,numberingSystem:r},i?null:P`<div aria-live=polite class=${M(it.assistiveText)}>${this.hasActiveFilter?xt("aria-filter-enabled",P`<div>${e.filterEnabled}</div>`):null}${xt("aria-item-count",P`<div>${e.total.replace("{count}",Xe.localize(n.length.toString()))}</div>`)}${n.length?xt("aria-item-list",P`<ol>${n.map(a=>P`<li>${a.label}</li>`)}</ol>`):null}</div>`}}ee("calcite-list",An);export{An as List};
