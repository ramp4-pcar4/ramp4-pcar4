{"version":3,"file":"triangulationUtils-KRNFVU70.js","sources":["../../node_modules/@arcgis/core/geometry/support/polygonUtils.js","../../node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{deg2rad as r}from\"../../core/mathUtils.js\";import{getMetersPerUnitForSR as t,getMetersPerVerticalUnitForSR as o}from\"../../core/unitUtils.js\";import{i as s}from\"../../chunks/vec32.js\";import{Axis as i}from\"./Axis.js\";import{create as a,getNormal as n,fromManyPoints as m}from\"./plane.js\";function c(t,o,s){const a=e(f,t,o,s)?n(f):[0,0,1];return Math.abs(a[2])>Math.cos(r(80))?i.Z:Math.abs(a[1])>Math.abs(a[0])?i.Y:i.X}function e(r,i,a,n){const c=(r=>!Array.isArray(r[0]))(i)?(r,t)=>i[3*r+t]:(r,t)=>i[r][t],e=n?t(n)/o(n):1;return m(r,((r,t)=>s(r,c(t,0)*e,c(t,1)*e,c(t,2))),a)}const f=a();export{e as fitPlane,c as leastSignificantAxis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{Axis as t}from\"./Axis.js\";import{isClockwise as e}from\"./coordsUtils.js\";import{doubleSubArray as o,doubleArrayFrom as r,newDoubleArray as s}from\"./DoubleArray.js\";import{compactIndices as i}from\"./Indices.js\";import{leastSignificantAxis as l}from\"./polygonUtils.js\";import{deduplicate as c}from\"./meshUtils/deduplicate.js\";function f(t){const e=a(t.rings,t.hasZ,p.CCW_IS_HOLE,t.spatialReference),s=new Array;let l=0,f=0;for(const r of e.polygons){const t=r.count,c=r.index,h=o(e.position,3*c,3*t),a=r.holeIndices.map((n=>n-c)),g=i(n(h,a,3));s.push({position:h,faces:g}),l+=h.length,f+=g.length}const g=h(s,l,f),u=Array.isArray(g.position)?c(g.position,3,{originalIndices:g.faces}):c(g.position.buffer,6,{originalIndices:g.faces});return g.position=r(new Float64Array(u.buffer)),g.faces=u.indices,g}function h(n,t,e){if(1===n.length)return n[0];const o=s(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:i(r)}}function a(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0;for(let s=0;s<r;++s)f+=n[s].length;let h=0,a=0,m=0;const d=s(3*f);let y=0;for(let s=r-1;s>=0;s--){const f=n[s],A=e===p.CCW_IS_HOLE&&u(f,t,o);if(A&&1!==r)i[h++]=f;else{let n=f.length;for(let t=0;t<h;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=f.length,f.length>0&&(c[m++]={index:y,count:f.length}),y=A?g(f,f.length-1,-1,d,y,f.length,t):g(f,0,1,d,y,f.length,t);for(let o=0;o<h;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}h=0,e.count>0&&(l[a++]=e)}}for(let s=0;s<h;++s){const n=i[s];n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}return l.length=a,c.length=m,{position:d,polygons:l,outlines:c}}function g(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i&&s[2]?s[2]:0,t+=e}return r/3}function u(n,o,r){if(!o)return!e(n);const s=n.length-1;switch(l(n,s,r)){case t.X:return!e(n,t.Y,t.Z);case t.Y:return!e(n,t.X,t.Z);case t.Z:return!e(n,t.X,t.Y)}}var p;!function(n){n[n.NONE=0]=\"NONE\",n[n.CCW_IS_HOLE=1]=\"CCW_IS_HOLE\"}(p||(p={}));export{p as CounterClockwiseMode,u as isCounterClockwise,a as ringsToTriangulationInfo,f as triangulate};\n"],"names":["c","t","s","a","e","f","n","r","i","o","m","p","l","h","g","u","d","y","A"],"mappings":"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","x_google_ignoreList":[0,1]}