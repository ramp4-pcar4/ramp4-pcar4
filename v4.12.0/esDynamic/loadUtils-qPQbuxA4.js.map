{"version":3,"file":"loadUtils-qPQbuxA4.js","sources":["../../node_modules/@arcgis/core/layers/support/LayerLoadContext.js","../../node_modules/@arcgis/core/portal/support/loadUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await t(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&\"object\"==typeof a&&(e?e(a):a.customParameters)||null}}export{e as LayerLoadContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{getLayerModuleType as r}from\"../../layers/support/fetchService.js\";function t(e){const t={id:e.id,name:e.name},a=r(e.type);return\"FeatureLayer\"!==a&&(t.layerType=a),t}async function a(e,r,a){if(null==e?.layers||null==e?.tables){const s=await a.fetchServiceMetadata(r,{customParameters:l(e)?.customParameters});(e=e||{}).layers=e.layers||s?.layers?.map(t),e.tables=e.tables||s?.tables?.map(t)}return e}function l(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function s(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find((e=>e.id===r))}function n(e,r){return[...e.layers||[],...e.tables||[]].filter((({layerType:e})=>e?r.includes(e):r.includes(\"ArcGISFeatureLayer\")))}function u(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function c(e){switch(e){case\"catalog\":return[\"CatalogLayer\"];case\"feature\":return[\"ArcGISFeatureLayer\"];case\"oriented-imagery\":return[\"OrientedImageryLayer\"];case\"subtype-group\":return[\"SubtypeGroupLayer\",\"SubtypeGroupTable\"]}return null}function i(e){switch(e){case\"CatalogLayer\":return\"CatalogLayer\";case\"OrientedImageryLayer\":return\"OrientedImageryLayer\";case\"SubtypeGroupLayer\":case\"SubtypeGroupTable\":return\"SubtypeGroupLayer\"}return\"FeatureLayer\"}async function o(r,a,s){if(!r?.url)return a??{};if(a??={},!a.layers){const e=await s.fetchServiceMetadata(r.url);a.layers=e.layers?.map(t)}const{serverUrl:n,portalItem:u}=await e(r.url,{sceneLayerItem:r,customParameters:l(a)?.customParameters}).catch((()=>({serverUrl:null,portalItem:null})));if(null==n)return a.tables=[],a;if(!a.tables&&u){const e=await u.fetchData().catch((()=>null));if(e?.tables)a.tables=e.tables.map(t);else{const r=await s.fetchServiceMetadata(n,{customParameters:l(e)?.customParameters}).catch((()=>null));a.tables=r?.tables?.map(t)}}if(a.tables)for(const e of a.tables)e.url=`${n}/${e.id}`;return a}export{t as createSublayerData,l as getFirstLayerOrTable,s as getLayerOrTable,u as getNumLayersAndTables,n as getSublayersByLayerType,c as instanceTypeToLayerTypes,i as layerTypeToLayerModuleType,o as populateSceneServiceItemData,a as preprocessFSItemData};\n"],"names":["e","s","r","t","a","n","u","c","i","o"],"mappings":"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","x_google_ignoreList":[0,1]}