import{a as l,r as c}from"./unitConversion-BXECx7w3.js";import{n as d}from"./TimeOnly-C3SOkmg2.js";import{F as m,o as w,U as a,j as S,w as o}from"./arcade-Dg73dEoh.js";import{u as f,l as O}from"./SpatialFilter-zxnOyqfk.js";import{a as i}from"./operatorsWorkerConnection-DkxyJ5dM.js";function u(s){return async(t,e,n)=>{if(w(n,2,2,t,e),(n=m(n))[0]===null&&n[1]===null)return!1;if(o(n[0])){if(a(n[1]))return new O({parentfeatureset:n[0],relation:s,relationGeom:n[1]});if(n[1]===null)return new f({parentfeatureset:n[0]});throw new l(t,c.InvalidParameter,e)}if(a(n[0])){if(a(n[1])){switch(s){case"esriSpatialRelEnvelopeIntersects":{const p=d(n[0]),r=d(n[1]);return p!=null&&r!=null&&i("intersects",[p.toJSON(),r.toJSON()])}case"esriSpatialRelIntersects":return i("intersects",[n[0].toJSON(),n[1].toJSON()]);case"esriSpatialRelContains":return i("contains",[n[0].toJSON(),n[1].toJSON()]);case"esriSpatialRelOverlaps":return i("overlaps",[n[0].toJSON(),n[1].toJSON()]);case"esriSpatialRelWithin":return i("within",[n[0].toJSON(),n[1].toJSON()]);case"esriSpatialRelTouches":return i("touches",[n[0].toJSON(),n[1].toJSON()]);case"esriSpatialRelCrosses":return i("crosses",[n[0].toJSON(),n[1].toJSON()])}throw new l(t,c.InvalidParameter,e)}if(o(n[1]))return new O({parentfeatureset:n[1],relation:s,relationGeom:n[0]});if(n[1]===null)return!1;throw new l(t,c.InvalidParameter,e)}if(n[0]===null){if(o(n[1]))return new f({parentfeatureset:n[1]});if(a(n[1])||n[1]===null)return!1}throw new l(t,c.InvalidParameter,e)}}function J(s){s.mode==="async"&&(s.functions.intersects=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelIntersects"))},s.functions.envelopeintersects=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelEnvelopeIntersects"))},s.signatures.push({name:"envelopeintersects",min:2,max:2}),s.functions.contains=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelContains"))},s.functions.overlaps=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelOverlaps"))},s.functions.within=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelWithin"))},s.functions.touches=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelTouches"))},s.functions.crosses=function(t,e){return s.standardFunctionAsync(t,e,u("esriSpatialRelCrosses"))},s.functions.relate=function(t,e){return s.standardFunctionAsync(t,e,async(n,p,r)=>{if(r=m(r),w(r,3,3,t,e),a(r[0])&&a(r[1]))return i("relate",[r[0].toJSON(),r[1].toJSON(),S(r[2])]);if(a(r[0])&&r[1]===null||a(r[1])&&r[0]===null)return!1;if(o(r[0])&&r[1]===null)return new f({parentfeatureset:r[0]});if(o(r[1])&&r[0]===null)return new f({parentfeatureset:r[1]});if(o(r[0])&&a(r[1]))return r[0].relate(r[1],S(r[2]));if(o(r[1])&&a(r[0]))return r[1].relate(r[0],S(r[2]));if(r[0]===null&&r[1]===null)return!1;throw new l(t,c.InvalidParameter,e)})})}export{J as registerFunctions};
