const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./layersLoader-G4aBnBhg.js","./main-D6UWMbWJ.js","./preload-helper-ExcqyqRp.js","./main-DCJluy1C.css","./fetchService-Qa3swvC2.js","./loadUtils-DywOwfkm.js","./associatedFeatureServiceUtils-DL1VQ_AY.js","./PortalItem-BUPtFYt9.js","./jsonContext-BPKshDab.js","./portalItemUtils-HRSUZPvT.js","./projection-F5U3p10J.js","./styleUtils-BIJgkUhv.js"])))=>i.map(i=>d[i]);
import{j6 as U,c9 as b,ak as M,v as a,J as u,ai as O,j7 as me,j8 as ge,c8 as v,fE as be,a5 as ae,j9 as Se,ja as fe,x as l,D as ne,is as ve,a_ as oe,B as G,z as m,iR as H,gX as we,ar as q,O as Ie,bA as Le,jb as Te,gL as $e,s as L,jc as Ee,jd as Oe,d8 as Ge,U as _e,bc as Ae,n as Me,be as S,cp as je,bf as _,ht as Pe,je as Ce,C as K,dI as z,_ as xe,b9 as Ne,jf as Ue,jg as Re}from"./main-D6UWMbWJ.js";import{a as y}from"./layerContainerType-C5CzMsLd.js";import{h as De}from"./ElevationInfo-DLPjeENV.js";import{p as X}from"./TimeExtent-CVFHym4n.js";import{_ as Fe}from"./preload-helper-ExcqyqRp.js";import j from"./PortalItem-BUPtFYt9.js";import{f as We}from"./portalItemUtils-HRSUZPvT.js";let Be=class le{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(U),this._values=new Map,this.multipleOriginsSupported=!0}clone(r){const e=new le,t=this._originStores[b.DEFAULTS];t&&t.forEach((i,n)=>{e.set(n,M(i),b.DEFAULTS)});for(let i=b.SERVICE;i<U;i++){const n=this._originStores[i];n&&n.forEach((o,p)=>{r&&r.has(p)||e.set(p,M(o),i)})}return e}get(r,e){const t=e===void 0?this._values:this._originStores[e];return t?t.get(r):void 0}keys(r){const e=r==null?this._values:this._originStores[r];return e?[...e.keys()]:[]}set(r,e,t=b.USER){let i=this._originStores[t];if(i||(i=new Map,this._originStores[t]=i),i.set(r,e),!this._values.has(r)||this._propertyOriginMap.get(r)<=t){const n=this._values.get(r);return this._values.set(r,e),this._propertyOriginMap.set(r,t),n!==e}return!1}delete(r,e=b.USER){const t=this._originStores[e];if(!t)return;const i=t.get(r);if(t.delete(r),this._values.has(r)&&this._propertyOriginMap.get(r)===e){this._values.delete(r);for(let n=e-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(r)){this._values.set(r,o.get(r)),this._propertyOriginMap.set(r,n);break}}}return i}has(r,e){const t=e===void 0?this._values:this._originStores[e];return!!t&&t.has(r)}revert(r,e){for(;e>0&&!this.has(r,e);)--e;const t=this._originStores[e],i=t?.get(r),n=this._values.get(r);return this._values.set(r,i),this._propertyOriginMap.set(r,e),n!==i}originOf(r){return this._propertyOriginMap.get(r)||b.DEFAULTS}forEach(r){this._values.forEach(r)}};const pe=s=>{let r=class extends s{constructor(...e){super(...e);const t=O(this),i=t.store,n=new Be;t.store=n,me(t,i,n)}read(e,t){ge(this,e,t)}getAtOrigin(e,t){const i=P(this),n=v(t);if(typeof e=="string")return i.get(e,n);const o={};return e.forEach(p=>{o[p]=i.get(p,n)}),o}originOf(e){return be(this.originIdOf(e))}originIdOf(e){return P(this).originOf(e)}revert(e,t){const i=P(this),n=v(t),o=O(this);let p;p=typeof e=="string"?e==="*"?i.keys(n):[e]:e,p.forEach(c=>{o.invalidate(c),i.revert(c,n),o.commit(c)})}};return r=a([u("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function P(s){return O(s).store}let Z=class extends pe(ae){};Z=a([u("esri.core.ReadOnlyMultiOriginJSONSupport")],Z);const Je=s=>{let r=class extends s{constructor(...e){super(...e)}clear(e,t="user"){return C(this).delete(e,v(t))}write(e,t){return Se(this,e=e||{},t),e}setAtOrigin(e,t,i){O(this).setAtOrigin(e,t,v(i))}removeOrigin(e){const t=C(this),i=v(e),n=t.keys(i);for(const o of n)t.originOf(o)===i&&t.set(o,t.get(o,i),b.USER)}updateOrigin(e,t){const i=C(this),n=v(t),o=fe(this,e);for(let p=n+1;p<U;++p)i.delete(e,p);i.set(e,o,n)}toJSON(e){return this.write({},e)}};return r=a([u("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function C(s){return O(s).store}const ke=s=>{let r=class extends Je(pe(s)){constructor(...e){super(...e)}};return r=a([u("esri.core.MultiOriginJSONSupport")],r),r};let Q=class extends ke(ae){};Q=a([u("esri.core.MultiOriginJSONSupport")],Q);const Y={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},ee={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},te={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},Ve={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":Y,"web-map/basemap":ee,"web-map/tables":te,"link-chart/operational-layers":{...Y,LinkChartLayer:!0},"link-chart/basemap":ee,"link-chart/tables":te,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let f=class extends ne{constructor(r){super(r),this.description=null,this.label=null,this.type=null}};a([l({type:String,json:{write:!0}})],f.prototype,"description",void 0),a([l({type:String,json:{write:!0}})],f.prototype,"label",void 0),a([l()],f.prototype,"type",void 0),f=a([u("esri.tables.elements.AttributeTableElement")],f);const w=f;var R;let T=R=class extends w{constructor(s){super(s),this.displayType="auto",this.type="attachment"}clone(){return new R({description:this.description,displayType:this.displayType,label:this.label})}};a([l({type:["auto"],json:{write:!0}})],T.prototype,"displayType",void 0),a([l({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=R=a([u("esri.tables.elements.AttributeTableAttachmentElement")],T);const re=T;var D;let $=D=class extends w{constructor(s){super(s),this.fieldName=null,this.type="field"}clone(){return new D({description:this.description,fieldName:this.fieldName,label:this.label})}};a([l({type:String,json:{write:!0}})],$.prototype,"fieldName",void 0),a([l({type:String,json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=D=a([u("esri.tables.elements.AttributeTableFieldElement")],$);const ie=$;var F;let E=F=class extends w{constructor(s){super(s),this.relationshipId=null,this.type="relationship"}clone(){return new F({description:this.description,label:this.label,relationshipId:this.relationshipId})}};a([l({type:Number,json:{write:!0}})],E.prototype,"relationshipId",void 0),a([l({type:["relationship"],json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=F=a([u("esri.tables.elements.AttributeTableRelationshipElement")],E);const se=E;function ye(s){return{typesWithGroup:{base:w,key:"type",typeMap:{attachment:re,field:ie,group:s,relationship:se}},typesWithoutGroup:{base:w,key:"type",typeMap:{attachment:re,field:ie,relationship:se}}}}function ue(s,r,e=!0){if(!s)return null;const t=e?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return s.filter(i=>t[i.type]).map(i=>t[i.type].fromJSON(i))}function ce(s,r,e=!0){if(!s)return null;const t=e?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return s.filter(i=>t[i.type]).map(i=>i.toJSON())}function de(s,r,e=!0){return s?s.map(t=>ve(e?r.typesWithGroup:r.typesWithoutGroup,t)):null}var W;let d=W=class extends w{constructor(s){super(s),this.elements=null,this.type="group"}castElements(s){return de(s,x,!1)}readElements(s,r){return ue(r.attributeTableElements,x,!1)}writeElements(s,r){r.attributeTableElements=ce(s,x,!1)}clone(){return new W({description:this.description,elements:M(this.elements),label:this.label})}};a([l({json:{write:!0}})],d.prototype,"elements",void 0),a([oe("elements")],d.prototype,"castElements",null),a([G("elements",["attributeTableElements"])],d.prototype,"readElements",null),a([m("elements")],d.prototype,"writeElements",null),a([l({type:String,json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=W=a([u("esri.tables.elements.AttributeTableGroupElement")],d);const x=ye(d),He=d;var B;const N=ye(He);let h=B=class extends ne{constructor(s){super(s),this.elements=null,this.orderByFields=null}castElements(s){return de(s,N)}readElements(s,r){return ue(r.attributeTableElements,N)}writeElements(s,r){r.attributeTableElements=ce(s,N)}clone(){return new B({elements:M(this.elements),orderByFields:this.orderByFields})}};a([l({json:{write:!0}})],h.prototype,"elements",void 0),a([oe("elements")],h.prototype,"castElements",null),a([G("elements",["attributeTableElements"])],h.prototype,"readElements",null),a([m("elements")],h.prototype,"writeElements",null),a([l({type:[Object],json:{write:!0}})],h.prototype,"orderByFields",void 0),h=B=a([u("esri.tables.AttributeTableTemplate")],h);const qe=h,at={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:y}}},nt={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(s,r)=>!r.disablePopup},write:{enabled:!0,writer(s,r,e){r[e]=!s}}}},ot={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:y}}},lt={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:we}}},pt={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:y}}},yt={value:null,type:De,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:y}}};function ut(s){return{type:s,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const he={write:{enabled:!0,layerContainerTypes:y},read:!0},J={type:Number,json:{origins:{"web-document":he,"portal-item":{write:{layerContainerTypes:y}}}}},ct={...J,json:{...J.json,origins:{"web-document":{...he,write:{enabled:!0,layerContainerTypes:y,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(s,r,e)=>e&&e.origin!=="service"||!r.drawingInfo||r.drawingInfo.transparency===void 0?r.layerDefinition?.drawingInfo&&r.layerDefinition.drawingInfo.transparency!==void 0?H(r.layerDefinition.drawingInfo.transparency):void 0:H(r.drawingInfo.transparency)}}},dt={type:q,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(s,r)=>{const e=q.fromJSON(s);return r.spatialReference!=null&&typeof r.spatialReference=="object"&&(e.spatialReference=Ie.fromJSON(r.spatialReference)),e}}}},read:!1}},ht={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},mt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:y}}},gt={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:y}}},Ke={json:{write:{ignoreOrigin:!0,layerContainerTypes:y},origins:{"web-map":{read:!1,write:!1}}}},bt={type:qe,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}},St=s=>{let r=class extends s{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,i){return i?.portalItem?.type==="Group Layer"?void 0:e}writeListMode(e,t,i,n){(n&&n.layerContainerType==="ground"||e&&$e(this,i,{},n))&&(t[i]=e)}writeOperationalLayerType(e,t,i){e&&(t[i]=e)}writeTitle(e,t){t.title=e??"Layer"}readVisibilityTimeExtent(e){return e?X.fromArray(e):null}writeVisibilityTimeExtent(e,t,i,n){e&&n.layerContainerType!=="tables"&&(e.isEmpty?n?.messages&&n.messages.push(new L("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[i]=e.toArray())}read(e,t){t&&(t.layer=this),Ee(this,e,i=>super.read(e,i),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const o=`${t.origin}/${t.layerContainerType||"operational-layers"}`;let c=!!Ve[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(c=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(c=!1),!c)return t.messages?.push(new L("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const i=super.write(e,{...t,layer:this}),n=!!t&&!!t.messages&&!!t.messages.filter(o=>o instanceof L&&o.name==="web-document-write:property-required").length;return Oe(i?.url)?(t?.messages?.push(new L("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:i}beforeSave(){}};return a([l({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],r.prototype,"id",void 0),a([G("id",["id"])],r.prototype,"readId",null),a([l(Ke)],r.prototype,"listMode",void 0),a([m("listMode")],r.prototype,"writeListMode",null),a([l({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:y,isRequired:!0}}}}})],r.prototype,"operationalLayerType",void 0),a([m("operationalLayerType")],r.prototype,"writeOperationalLayerType",null),a([l(J)],r.prototype,"opacity",void 0),a([l({type:Boolean,readOnly:!1})],r.prototype,"persistenceEnabled",void 0),a([l({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],r.prototype,"title",void 0),a([m("title"),m(["web-scene"],"title")],r.prototype,"writeTitle",null),a([l({type:X,json:{origins:{"web-scene":{write:{layerContainerTypes:y}}}}})],r.prototype,"visibilityTimeExtent",void 0),a([G("visibilityTimeExtent")],r.prototype,"readVisibilityTimeExtent",null),a([m(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[Le,Te]]}})],r.prototype,"writeVisibilityTimeExtent",null),a([l({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:y}}})],r.prototype,"visible",void 0),r=a([u("esri.layers.mixins.OperationalLayer")],r),r},ft=s=>{let r=class extends s{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=Ge(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new j({id:t.itemId,portal:i?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await Fe(()=>import("./layersLoader-G4aBnBhg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url);return _e(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap,populateGroupLayer:e.populateGroupLayer},t)}catch(i){throw Ae(i)||Me.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${i}`),i}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch(t=>(S(t),!0)))}async setUserPrivileges(e,t){if(!je.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:i,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(i){S(i)}}async _fetchUserPrivileges(e,t){let i=this.portalItem;if(!e||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=!_?.findCredential(this.url),o=e===i.id;if(o&&i.portal.user)return this._getUserPrivileges(i,n);let p,c;if(o)p=i.portal.url;else try{p=await Pe(this.url,t)}catch(g){S(g)}if(!p||!Ce(p,i.portal.url))return this._fetchFallbackUserPrivileges(t);try{const g=t!=null?t.signal:null;c=await _?.getCredential(`${p}/sharing`,{prompt:!1,signal:g})}catch(g){S(g)}const I=!0,k=!1,V=!1;if(!c)return{features:{edit:I,fullEdit:k},content:{updateItem:V}};try{if(o?await i.reload():(i=new j({id:e,portal:{url:p}}),await i.load(t)),i.portal.user)return this._getUserPrivileges(i,n)}catch(g){S(g)}return{features:{edit:I,fullEdit:k},content:{updateItem:V}}}_getUserPrivileges(e,t){const i=We(e);return t&&(i.features.edit=!0),i}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(i){S(i)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?_?.findCredential(this.url):null;if(!t)return!0;const i=A.credential===t?A.user:await this._fetchEditingUser(e);return A.credential=t,A.user=i,i?.privileges==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=_?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const n=`${i.owningSystemUrl}/sharing/rest`,o=K.getDefault();if(o&&o.loaded&&z(o.restUrl)===z(n))return o.user;const p=`${n}/community/self`,c=e!=null?e.signal:null,I=await xe(Ne(p,{authMode:"no-prompt",query:{f:"json"},signal:c}));return I.ok?Ue.fromJSON(I.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||K.getDefault());return i&&n&&!Re(n.restUrl,i.restUrl)?(t.messages&&t.messages.push(new L("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return a([l({type:j})],r.prototype,"portalItem",null),a([G("web-document","portalItem",["itemId"])],r.prototype,"readPortalItem",null),a([m("web-document","portalItem",{itemId:{type:String}})],r.prototype,"writePortalItem",null),a([l({clonable:!1})],r.prototype,"resourceReferences",void 0),a([l({type:Boolean,readOnly:!0})],r.prototype,"userHasEditingPrivileges",void 0),a([l({type:Boolean,readOnly:!0})],r.prototype,"userHasFullEditingPrivileges",void 0),a([l({type:Boolean,readOnly:!0})],r.prototype,"userHasUpdateItemPrivileges",void 0),r=a([u("esri.layers.mixins.PortalLayer")],r),r},A={credential:null,user:null};export{bt as I,ke as S,Ke as T,mt as a,St as b,yt as c,pt as d,ct as e,J as f,ut as g,dt as h,qe as i,ft as j,nt as l,Q as m,ot as p,at as s,ht as u,gt as v,lt as y};
