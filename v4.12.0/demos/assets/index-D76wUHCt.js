const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./point-icon-hrNVLaIT.js","./main-D6UWMbWJ.js","./preload-helper-ExcqyqRp.js","./main-DCJluy1C.css","./polyline-icon-BiB8JIHA.js","./polygon-icon-BlGYzLeA.js","./circle-icon-CEWMA6hh.js","./rectangle-icon-alS3H8cJ.js","./edit-icon-DsvnTMQR.js"])))=>i.map(i=>d[i]);
import{d1 as I,d4 as a,d2 as m,dO as $,dP as k,e1 as x,iJ as T,dT as S,ed as w,dX as A,d3 as l,d$ as v,fi as _,ee as h,dS as E,e0 as y,dY as V,dW as b,iH as F,dZ as N,fk as C,a2 as B,e6 as R,e7 as H,dU as O,dV as Z,e9 as D,F as j,eb as Y}from"./main-D6UWMbWJ.js";import{_ as f}from"./preload-helper-ExcqyqRp.js";import{u as U}from"./draw-store-BaFsNOTl.js";const W={},q={class:"border-b p-0 self-center w-2/3"};function G(g,s){return a(),m("span",q)}const L=I(W,[["render",G]]),J=$({__name:"zoom-nav",setup(g){const{t:s}=k(),e=x("iApi"),t=T(400,!0,()=>e.geo.map.zoomIn()),o=T(400,!0,()=>e.geo.map.zoomOut());return(d,n)=>{const c=S("mapnav-button");return a(),m("div",null,[w(c,{onClickFunction:v(t),tooltip:v(s)("mapnav.zoomIn")},{default:A(()=>n[0]||(n[0]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[l("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),l("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"]),w(L),w(c,{onClickFunction:v(o),tooltip:v(s)("mapnav.zoomOut")},{default:A(()=>n[1]||(n[1]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[l("path",{d:"M19 13H5v-2h14v2z"}),l("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["onClickFunction","tooltip"])])}}}),X={class:"mapnav-section bg-white-75 hover:bg-white"},K=$({__name:"draw-nav-section",setup(g){const s=x("iApi"),{t:e}=k(),t=U(),o=[{type:"point",icon:_(h(()=>f(()=>import("./point-icon-hrNVLaIT.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)))},{type:"polyline",icon:_(h(()=>f(()=>import("./polyline-icon-BiB8JIHA.js"),__vite__mapDeps([4,1,2,3]),import.meta.url)))},{type:"polygon",icon:_(h(()=>f(()=>import("./polygon-icon-BlGYzLeA.js"),__vite__mapDeps([5,1,2,3]),import.meta.url)))},{type:"circle",icon:_(h(()=>f(()=>import("./circle-icon-CEWMA6hh.js"),__vite__mapDeps([6,1,2,3]),import.meta.url)))},{type:"rectangle",icon:_(h(()=>f(()=>import("./rectangle-icon-alS3H8cJ.js"),__vite__mapDeps([7,1,2,3]),import.meta.url)))}],d=E(()=>{const r=o.filter(i=>t.supportedTypes.some(p=>p.type===i.type));return r.push({type:"edit",icon:_(h(()=>f(()=>import("./edit-icon-DsvnTMQR.js"),__vite__mapDeps([8,1,2,3]),import.meta.url)))}),r}),n=r=>{t.activeTool===r?t.setActiveTool(null):t.setActiveTool(r)},c=()=>{s.geo.map.setMouseFocus()};return(r,i)=>{const p=S("mapnav-button");return a(),m("div",X,[(a(!0),m(y,null,V(d.value,u=>(a(),b(p,{key:u.type,onMousedown:c,onClickFunction:()=>n(u.type),tooltip:v(e)(`draw.${u.type}.tooltip`),class:N({"active-tool":v(t).activeTool===u.type})},{default:A(()=>[(a(),b(F(u.icon),{class:"fill-current w-32 h-20"}))]),_:2},1032,["onClickFunction","tooltip","class"]))),128))])}}}),Q=I(K,[["__scopeId","data-v-59c9c2c2"]]),ee={class:"mapnav absolute right-0 bottom-0 pb-36 sm:pb-48 pr-12"},te=["content"],oe={class:"mapnav-section bg-white-75 hover:bg-white"},ne=$({__name:"mapnav",setup(g){const s=x("iApi"),e=C(),{t}=k(),o=B(),d=E(()=>s.getConfig().fixtures.mapnav.items.some(i=>i==="draw")),n=()=>{o.value._tippy.hide()},c=i=>{i.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()};R(()=>{o.value?.addEventListener("blur",n),o.value?.addEventListener("keyup",c)}),H(()=>{o.value?.removeEventListener("blur",n),o.value?.removeEventListener("keyup",c)});const r=E(()=>e.order.map(i=>e.items[i]).filter(i=>i.componentId&&i.id!=="draw"));return(i,p)=>{const u=O("focus-list"),M=O("tippy");return a(),m("div",ee,[Z((a(),m("div",{class:"flex flex-col",content:v(t)("panels.controls.items"),ref_key:"el",ref:o},[d.value?(a(),m(y,{key:0},[w(Q),p[0]||(p[0]=l("span",{class:"py-1"},null,-1))],64)):D("",!0),w(J,{class:"mapnav-section bg-white-75 hover:bg-white"}),p[1]||(p[1]=l("span",{class:"py-1"},null,-1)),l("div",oe,[(a(!0),m(y,null,V(r.value,(z,P)=>(a(),m(y,{key:z.id+"button"},[(a(),b(F(z.id+"-nav-button"))),P!==r.value.length-1?(a(),b(L,{key:0,class:"mapnav-divider"})):D("",!0)],64))),128))])],8,te)),[[u],[M,{trigger:"manual",placement:"top-end",touch:!1,maxWidth:190}]])])}}}),se=I(ne,[["__scopeId","data-v-acc79bff"]]);class ae extends j{mapnavStore=C(this.$vApp.$pinia);get config(){return super.config}_parseConfig(s){if(!s)return;const e=s.items.map(t=>({id:t}));this.mapnavStore.items=e.reduce((t,o)=>(t[o.id]=o,t),{}),this.mapnavStore.order=e.map(t=>t.id),this._validateItems()}_validateItems(){const s=["geolocator","zoom","home","fullscreen"];this.mapnavStore.order.forEach(e=>{(this.$iApi.fixture.exists(e)||s.includes(e))&&(this.mapnavStore.items[e].componentId=`${e}-nav-button`)})}}const ie={en:{"mapnav.zoomIn":"Zoom In","mapnav.zoomOut":"Zoom Out","mapnav.home":"Home","mapnav.fullscreen":"Full Screen","mapnav.geolocator":"Your Location","mapnav.geolocator.error.permission":"The location request was denied. Please check your browser permission settings.","mapnav.geolocator.error.internal":"Your location could not be found."},fr:{"mapnav.zoomIn":"Zoom avant","mapnav.zoomOut":"Zoom arrière","mapnav.home":"Accueil","mapnav.fullscreen":"Plein Écran","mapnav.geolocator":"Votre position","mapnav.geolocator.error.permission":"Demande de localisation refusée. Veuillez vérifier les paramètres d'autorisation de votre navigateur.","mapnav.geolocator.error.internal":"Votre emplacement n'a pu être trouvé."}};class le extends ae{async added(){Object.entries(ie).forEach(n=>this.$iApi.$i18n.mergeLocaleMessage(...n));const{destroy:s,el:e}=this.mount(se,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(e.childNodes[0]),this._parseConfig(this.config);const o=this.$vApp.$watch(()=>this.config,n=>this._parseConfig(n)),d=this.$iApi.event.on(Y.COMPONENT,()=>{this._parseConfig(this.config)});this.removed=()=>{o(),this.$iApi.event.off(d);const n=C(this.$vApp.$pinia),c={...n.items};Object.keys(c).forEach(r=>n.removeItem(r)),n.$reset(),s()}}}export{le as default};
