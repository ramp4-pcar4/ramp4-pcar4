import{dz as S,dA as f}from"./main-D6UWMbWJ.js";import{P as G,j as P,a as x,O as E,f as v,c as w,w as T,Q as C,R as L,S as X,T as D,W as Y,Z as b,_ as j,G as q}from"./ProjectionTransformation-DYBnfgxa.js";import{w as A}from"./OperatorShapePreservingLength-D45tgs7e.js";import"./preload-helper-ExcqyqRp.js";import"./SimpleGeometryCursor-B92kdZ15.js";class M{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,l){return!1}canAccelerateGeometry(t){return!1}execute(t,r,l,a){if(l===4)return new A().execute(t,r,a);if(r.getCoordinateSystemType()===0&&G(""),P(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),n=q();s.querySpheroidData(n);const c=n.majorSemiAxis,g=n.e2,u=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===x.enumPolygon?e=t.getBoundary():o===x.enumEnvelope?e=E(t):v(o)?(e=new w({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new T().execute(e,0,r.getTolerance(0),0,a)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=C(e,r),o===x.enumPolyline&&e===t&&(e=t.clone());const y=new L;r.getPannableExtent().queryIntervalX(y);for(let m=0,h=e.getPointCount();m<h;m++){const p=e.getXY(m);p.x=X(p.x,y),e.setXY(m,p)}}const d=e.createInstance();e=D(i,e,d,a)?d:new Y().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,l,c,g,u)}_ExecuteMultiPathGeodeticLength(t,r,l,a,s){const n={stack:[],error:void 0,hasError:!1};try{const c=S(n,new b,!1);let g=0;const u=t.querySegmentIterator();for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),j.geodeticDistance(l,a,o.x,o.y,i.x,i.y,c,null,null,r),g+=c.val}return g}catch(c){n.error=c,n.hasError=!0}finally{f(n)}}}export{M as OperatorGeodeticLength};
