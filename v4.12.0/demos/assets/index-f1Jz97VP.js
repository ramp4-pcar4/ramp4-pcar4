import{dO as d,hp as l,dP as p,e1 as u,a2 as g,dS as h,e6 as v,eb as m,e7 as f,d2 as $,d3 as _,d_ as S,d$ as A,d4 as b,d1 as w,F as E}from"./main-D6UWMbWJ.js";import"./preload-helper-ExcqyqRp.js";const C={en:{"scrollguard.instructions":"Use ctrl + scroll to zoom the map"},fr:{"scrollguard.instructions":"Utilisez les touches Ctrl et + pour faire un zoom de la carte"}},y={class:"sg-label"},x=d({__name:"map-scrollguard",setup(c){const e=l(),{t:a}=p(),s=u("iApi"),n=g(),t=h(()=>e.enabled);v(()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.addEventListener("wheel",o,{capture:!0}),s.event.on(m.MAP_CREATED,()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.addEventListener("wheel",o,{capture:!0})})}),f(()=>{s.$vApp.$el.querySelector(".inner-shell + .esri-view")?.removeEventListener("wheel",o,{capture:!0})});const o=i=>{if(!t.value)return;const r=n.value.classList;i.ctrlKey?(r.remove("sg-active"),r.add("sg-scrolling")):(i.stopPropagation(),r.remove("sg-scrolling"),r.add("sg-active"),window.setTimeout(()=>r.remove("sg-active"),2e3))};return(i,r)=>(b(),$("div",{class:"sg",ref_key:"scrollGuard",ref:n},[_("p",y,S(A(a)("scrollguard.instructions")),1)],512))}}),L=w(x,[["__scopeId","data-v-cd7bd252"]]);class B extends E{setEnabled(e){l(this.$vApp.$pinia).enabled=e}_parseConfig(e){l(this.$vApp.$pinia).enabled=e?.enabled||!1}get config(){return super.config}}class P extends B{added(){Object.entries(C).forEach(t=>this.$iApi.$i18n.mergeLocaleMessage(...t)),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,t=>this._parseConfig(t)),{destroy:a,el:s}=this.mount(L,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(s.childNodes[0]),this.removed=()=>{e(),a(),l(this.$vApp.$pinia).$reset()}}}export{P as default};
