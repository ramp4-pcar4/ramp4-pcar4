import{n as i,s as l}from"./main-D6UWMbWJ.js";import{B as m,H as p,D as d,C as f}from"./quantizationUtils-B28qRRbX.js";import"./preload-helper-ExcqyqRp.js";function G(n,r,e,a,t){if(n==null)return null;const o=n.references("geometry")&&t?g(r,a,t):r,s=n.repurposeFeature(o);try{return n.evaluate({...e,$feature:s},n.services)}catch(c){return i.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const u=new Map;function g(n,r,e){const{transform:a,hasZ:t,hasM:o}=e;u.has(r)||u.set(r,y(r));const s=u.get(r)(n.geometry,a,t,o);return{...n,geometry:s}}function y(n){const r={};switch(n){case"esriGeometryPoint":return(e,a,t,o)=>f(a,r,e,t,o);case"esriGeometryPolygon":return(e,a,t,o)=>d(a,r,e,t,o);case"esriGeometryPolyline":return(e,a,t,o)=>p(a,r,e,t,o);case"esriGeometryMultipoint":return(e,a,t,o)=>m(a,r,e,t,o);default:return i.getLogger("esri.views.2d.support.arcadeOnDemand").error(new l("mapview-arcade",`Unable to handle geometryType: ${n}`)),e=>e}}export{G as default};
