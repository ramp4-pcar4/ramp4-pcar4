import{bu as m,bv as N,bw as s,bx as l,by as S}from"./main-D6UWMbWJ.js";function y(n,r){return{...r,filterMode:n.mode}}function F(n,r){return I(n,r).next().value??null}function p(n,r,e){const t=b(n);if(t&&(s(r,t[0])||l(e,t[1])))return"";const i=Array.from(I(n,r,e)),u=x(i,r,e)?"1=1":i.map(a=>a.where||"1=1").reduce((a,f)=>S(a,f),"");return u&&u!=="1=1"?u:""}function b(n){if(d(n)==="manual")return null;const r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:e,maxScale:t}of n.filters)r[0]=Math.max(r[0],c(e)),r[1]=Math.min(r[1],o(t));return r}function*I(n,r,e){if(d(n)==="manual"){const t=n.filters.find(i=>i.id===n.activeFilterId);t&&(yield t)}else{typeof r=="object"&&(r=r.scale);for(const t of n.filters)T(t.minScale,t.maxScale,r,e)&&(yield t)}}function x(n,r,e){if(n.length===0)return!0;const t=c(n.at(0)?.minScale),i=o(n.at(-1)?.maxScale);if(l(t,r)||s(i,e))return!0;for(let u=0;u<n.length-1;u++){const a=n[u],f=n[u+1];if(l(c(f.minScale),o(a.maxScale)))return!0}return!1}function T(n,r,e,t){return n=c(n),e=c(e),r=o(r),!(!m(e,n)&&(t??e)>n)&&!N(r,e)&&(t===void 0||!m(t,n))}function d(n){return"mode"in n?n.mode:n.filterMode}function c(n){return n||Number.POSITIVE_INFINITY}function o(n){return n||0}export{p as c,y as i,F as u};
