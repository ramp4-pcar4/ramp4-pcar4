import{v as o,x as i,J as m,D as C,V as k,ah as R,bo as x,K as P,bE as U,bi as H,a4 as K,B as W,z as G}from"./main-D6UWMbWJ.js";import{b as D}from"./labelingInfo-BSNsKUPw.js";import{i as N}from"./Field-BRKBBmM6.js";const V=[["binary","application/octet-stream","bin",""]];function Ae(e,t){return O(t.name,e?.supportedFormats??[])!=null}function Se(e,t){if(!e)return!1;const s=_(t,e.supportedFormats??[]);return s!=null&&e.editFormats.includes(s)}function I(e,t){return b(Y(e,t))}function j(e,t){return b(O(e,t))}function Re(e,t){return L(X(e,t))}function _(e,t){return j(e.name,t)??I(e.type,t)}function T(e,t,s){return I(e,s)??j(t,s)}function M({supportedFormats:e}){return T("model/gltf-binary","glb",e)}function xe(e){const t=M(e);return t!=null&&e.editFormats.includes(t)}function J({supportedFormats:e}){return T("model/gltf+json","gltf",e)}function Z(e){if(!e)return null;const t=M(e),s=J(e);let n=null;for(const p of e.queryFormats){if(p===t)return p;p===s&&(n=p)}return n}function $e({supportedFormats:e}){return T("application/esri3do-SR_world","wld",e)}function be({supportedFormats:e}){return T("application/esri3do-SR_prj","prj",e)}function $(e){return[...V,...e]}function X(e,t){return $(t).find(s=>b(s)===e)}function Y(e,t){const s=e.toLowerCase();return $(t).find(n=>L(n)===s)}function O(e,t){const s=e.toLowerCase();return $(t).find(n=>ee(n).some(p=>s.endsWith(p)))}function b(e){return e?.[0]}function L(e){return e?.[1].toLowerCase()}function ee(e){return e?.[2].split(",").map(t=>t.toLowerCase())??[]}function Qe(e){return e.tables?.find(t=>t.role==="assetMaps")}function te(e){return"portalItem"in e}const Ee=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):te(this)?this.portalItem?.apiKey:null}set apiKey(s){s!=null?this._override("apiKey",s):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return o([i({type:String})],t.prototype,"apiKey",null),t=o([m("esri.layers.mixins.APIKeyMixin")],t),t};var S;let y=S=class extends C{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new k}clone(){return new S({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};o([i({type:String,json:{write:{isRequired:!0}}})],y.prototype,"floorField",void 0),o([i({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),o([i({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0),y=S=o([m("esri.layers.support.LayerFloorInfo")],y);const Be=y,Q=new R({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),E=new R({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let a=class extends x.ClonableMixin(C){constructor(t){super(t),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};o([i({json:{read:Q.read,write:Q.write}})],a.prototype,"cardinality",void 0),o([i({json:{name:"catalogID"}})],a.prototype,"catalogId",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"composite",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"id",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"keyField",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"keyFieldInRelationshipTable",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"name",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"relatedTableId",void 0),o([i({json:{read:!0,write:!0}})],a.prototype,"relationshipTableId",void 0),o([i({json:{read:E.read,write:E.write}})],a.prototype,"role",void 0),a=o([m("esri.layers.support.Relationship")],a);const Ie=a;function r(e,t,s){return!!z(e,t,s)}function g(e,t,s){return z(e,t,s)}function z(e,t,s){return e&&e.hasOwnProperty(t)?e[t]:s}const se={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function re(e){const t=e?.supportedSpatialAggregationStatistics?.map(s=>s.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function w(e,t){return!!e?.supportedOperationsWithCacheHint?.map(n=>n.toLowerCase())?.includes(t.toLowerCase())}function oe(e){const t=e?.supportedStatisticTypes?.map(s=>s.toLowerCase());return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function ne(e){const t=e?.supportedNormalizationTypes?.map(s=>s.toLowerCase());return{field:!!t?.includes("field"),log:!!t?.includes("log"),naturalLog:!!t?.includes("naturallog"),percentOfTotal:!!t?.includes("percentoftotal"),squareRoot:!!t?.includes("squareroot")}}function je(e,t){return{analytics:ie(e),attachment:pe(e),data:ae(e),metadata:ue(e),operations:le(e.capabilities,e,t),query:de(e,t),queryAttributeBins:me(e),queryRelated:ce(e),queryTopFeatures:ye(e),editing:fe(e)}}function ie(e){return{supportsCacheHint:w(e.advancedQueryCapabilities,"queryAnalytics")}}function pe(e){const t=e.attachmentProperties,s={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:w(e.advancedQueryCapabilities,"queryAttachments"),supportsOrderByFields:r(e.advancedQueryCapabilities,"supportsQueryAttachmentOrderByFields",!1),supportsResize:r(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(n=>{const p=se[n.name];p&&(s[p]=!!n.isEnabled)}),s}function ae(e){return{isVersioned:r(e,"isDataVersioned",!1),isBranchVersioned:r(e,"isDataBranchVersioned",!1),supportsAttachment:r(e,"hasAttachments",!1),supportsM:r(e,"hasM",!1),supportsZ:r(e,"hasZ",!1)}}function ue(e){return{supportsAdvancedFieldProperties:r(e,"supportsFieldDescriptionProperty",!1)}}function le(e,t,s){const n=e?e.toLowerCase().split(",").map(q=>q.trim()):[],p=s?P(s):null,d=n.includes(p!=null&&p.serverType==="MapServer"?"data":"query"),c=n.includes("editing")&&!t.datesInUnknownTimezone;let f=c&&n.includes("create"),h=c&&n.includes("delete"),v=c&&n.includes("update");const A=n.includes("changetracking"),F=t.advancedQueryCapabilities;return c&&!(f||h||v)&&(f=h=v=!0),{supportsCalculate:r(t,"supportsCalculate",!1),supportsTruncate:r(t,"supportsTruncate",!1),supportsValidateSql:r(t,"supportsValidateSql",!1),supportsAdd:f,supportsDelete:h,supportsEditing:c,supportsChangeTracking:A,supportsQuery:d,supportsQueryAnalytics:r(F,"supportsQueryAnalytic",!1),supportsQueryAttachments:r(F,"supportsQueryAttachments",!1),supportsQueryBins:r(F,"supportsQueryBins",!1),supportsQueryTopFeatures:r(F,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:r(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:v,supportsExceedsLimitStatistics:r(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:r(t,"supportsAsyncConvert3D",!1)}}function de(e,t){const s=e.advancedQueryCapabilities,n=e.ownershipBasedAccessControlForFeatures,p=e.archivingInfo,d=e.currentVersion,c=t?.includes("MapServer"),f=!c||d>=U("mapserver-pbf-version-support"),h=H(t),v=new Set((e.supportedQueryFormats??"").split(",").map(A=>A.toLowerCase().trim()));return{maxRecordCount:g(e,"maxRecordCount",void 0),maxRecordCountFactor:g(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:g(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:re(s),supportsCacheHint:r(s,"supportsQueryWithCacheHint",!1)||w(s,"query"),supportsCentroid:r(s,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:h,supportsCurrentUser:r(s,"supportsCurrentUserQueries",!1),supportsDefaultSpatialReference:r(s,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:r(s,"supportsDisjointSpatialRel",!1),supportsDistance:r(s,"supportsQueryWithDistance",!1),supportsDistinct:r(s,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:r(s,"supportsReturningQueryExtent",!1),supportsFormatPBF:f&&v.has("pbf"),supportsFullTextSearch:r(s,"supportsFullTextSearch",!1),supportsGeometryProperties:r(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:r(s,"supportsHavingClause",!1),supportsHistoricMoment:r(p,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:r(s,"supportsMaxRecordCountFactor",!1),supportsOrderBy:r(s,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:r(s,"supportsPagination",!1),supportsPercentileStatistics:r(s,"supportsPercentileStatistics",!1),supportsQuantization:r(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:r(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:r(n,"allowAnonymousToQuery",!0),supportsQueryByOthers:r(n,"allowOthersToQuery",!0),supportsQueryGeometry:r(e,"supportsReturningQueryGeometry",!1),supportsResultType:r(s,"supportsQueryWithResultType",!1),supportsReturnMesh:!!Z(e.infoFor3D),supportsSpatialAggregationStatistics:r(s,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:r(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:r(e,"useStandardizedQueries",!1),supportsStatistics:r(s,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:r(s,"supportsTopFeaturesQuery",!1),supportsTrueCurve:r(s,"supportsTrueCurve",!1),tileMaxRecordCount:g(e,"tileMaxRecordCount",void 0)}}function ce(e){const t=e.advancedQueryCapabilities,s=r(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:r(t,"supportsQueryRelatedPagination",!1),supportsCount:s,supportsOrderBy:s,supportsCacheHint:w(t,"queryRelated")}}function ye(e){return{supportsCacheHint:w(e.advancedQueryCapabilities,"queryTopFilter")}}function me(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:r(t,"supportsDateBin",!1),supportsFixedInterval:r(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:r(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:r(t,"supportsFixedBoundariesBin",!1),supportsStackBy:r(t,"supportsStackBy",!1),supportsSplitBy:r(t,"supportsSplitBy",!1),supportsSnapToData:r(t,"supportsSnapToData",!1),supportsReturnFullIntervalBin:r(t,"supportsReturnFullIntervalBin",!1),supportsFirstDayOfWeek:r(t,"supportsFirstDayOfWeek",!1),supportsNormalization:r(t,"supportsNormalization",!1),supportedStatistics:oe(t),supportedNormalizationTypes:ne(t)}}function fe(e){const t=e.ownershipBasedAccessControlForFeatures,s=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:r(e,"allowGeometryUpdates",!0),supportsGlobalId:r(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:r(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:r(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:r(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:r(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:r(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:r(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:r(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:r(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:r(s,"supportsAsyncApplyEdits",!1),zDefault:g(e,"zDefault",void 0)}}function Me(e){return{operations:{supportsAppend:r(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:r(e,"supportsExportClip",!1),supportsExportFrameset:r(e,"supportsExportFrameset",!1),supportsMensuration:r(e,"supportsMensuration",!1),supportsUpdate:r(e,"supportsUpdate",!1)}}}function he(e,t,s){if(!e)return null;const n=e.find(d=>!!d.field);if(!n)return null;const p=new D;return p.read(n,s),[p]}function ve(e,t,s,n){const p=e.find(d=>!!d.field);p&&K(s,[p.toJSON()],t)}const ge={type:[D],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:he},write:{writer:ve}}},Oe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return o([i(ge)],t.prototype,"orderBy",void 0),t=o([m("esri.layers.mixins.OrderedLayer")],t),t},B=new R({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let l=class extends x.ClonableMixin(C){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};o([i({json:{write:!0}})],l.prototype,"name",void 0),o([i({json:{write:!0}})],l.prototype,"description",void 0),o([i({json:{read:B.read,write:B.write}})],l.prototype,"drawingTool",void 0),o([i({json:{write:!0}})],l.prototype,"prototype",void 0),o([i({json:{write:!0}})],l.prototype,"thumbnail",void 0),l=o([m("esri.layers.support.FeatureTemplate")],l);const we=l;let u=class extends x.ClonableMixin(C){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const s of Object.keys(e))t[s]=N(e[s]);return t}writeDomains(e,t){const s={};for(const n of Object.keys(e))e[n]&&(s[n]=e[n]?.toJSON());t.domains=s}};o([i({json:{write:!0}})],u.prototype,"id",void 0),o([i({json:{write:!0}})],u.prototype,"name",void 0),o([i({json:{write:!0}})],u.prototype,"domains",void 0),o([W("domains")],u.prototype,"readDomains",null),o([G("domains")],u.prototype,"writeDomains",null),o([i({type:[we],json:{write:!0}})],u.prototype,"templates",void 0),u=o([m("esri.layers.support.FeatureType")],u);const Le=u;export{Me as A,be as F,je as a,Be as b,_ as c,Z as d,he as e,T as f,Ie as g,Qe as h,Ee as i,Le as j,M as k,Oe as l,$e as m,we as n,ge as o,xe as p,Ae as q,Se as r,Re as s,I as u};
