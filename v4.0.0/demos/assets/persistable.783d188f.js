import{_}from"./preload-helper.387dac8f.js";import{dF as d,lF as O,e as u,kE as P,lG as h,i as v,lH as S,lI as F,lJ as N,lK as z,lL as w,lM as E,ku as k,G as J,dE as K,lN as A}from"./main.efb50b2c.js";import{i as B}from"./multiOriginJSONSupportUtils.8128aa52.js";function g(t){return y[G(t)]||T}function G(t){return t instanceof Blob?t.type:L(t.url)}function L(t){const i=d(t);return f[i]||I}const y={},I="text/plain",T=y[I],f={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const t in f)y[f[t]]=t;function Y(t){const i=u(t)&&t.origins?t.origins:[void 0];return(r,n)=>{const o=V(t,r,n);for(const a of i){const s=O(r,a,n);for(const e in o)s[e]=o[e]}}}function V(t,i,r){if(u(t)&&t.type==="resource")return $(t,i,r);switch(u(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:n,write:o}=A;return{read:n,write:o}}}}function $(t,i,r){const n=E(i,r);return{type:String,read:(o,a,s)=>{const e=P(o,a,s);return n.type===String?e:typeof n.type=="function"?new n.type({url:e}):void 0},write:{writer(o,a,s,e){if(!e||!e.resources)return typeof o=="string"?void(a[s]=h(o,e)):void(a[s]=o.write({},e));const c=q(o),p=c?h(c,{...e,verifyItemRelativeUrls:e&&e.verifyItemRelativeUrls?{writtenUrls:e.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},S.NO):null,l=n.type!==String&&(!B(this)||e&&e.origin&&this.originIdOf(r)>F(e.origin));e&&e.portalItem&&u(p)&&!N(p)?l?D(this,r,o,p,a,s,e,t):H(p,a,s,e):e&&e.portalItem&&(v(p)||u(z(p))||w(p)||l)?b(this,r,o,p,a,s,e,t):a[s]=p}}}}function b(t,i,r,n,o,a,s,e){const c=k(),p=U(r,n,s),l=J(K(e,"prefix"),c),j=`${l}.${g(p)}`,m=s.portalItem.resourceFromPath(j);w(n)&&s.resources.pendingOperations.push(M(n).then(R=>{m.path=`${l}.${g(R)}`,o[a]=m.itemRelativeUrl}).catch(()=>{})),x(t,i,m,p,s.resources.toAdd),o[a]=m.itemRelativeUrl}function D(t,i,r,n,o,a,s,e){const c=s.portalItem.resourceFromPath(n),p=U(r,n,s);g(p)===d(c.path)?(x(t,i,c,p,s.resources.toUpdate),o[a]=n):b(t,i,r,n,o,a,s,e)}function H(t,i,r,n){n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(t)}),i[r]=t}function x(t,i,r,n,o){o.push({resource:r,content:n,finish:a=>{C(t,i,a)}})}function U(t,i,r){return typeof t=="string"?{url:i}:new Blob([JSON.stringify(t.toJSON(r))],{type:"application/json"})}async function M(t){const i=(await _(()=>import("./main.efb50b2c.js").then(function(n){return n.nb}),["assets/main.efb50b2c.js","assets/main.908c9a86.css","assets/preload-helper.387dac8f.js"])).default,{data:r}=await i(t,{responseType:"blob"});return r}function q(t){return v(t)?null:typeof t=="string"?t:t.url}function C(t,i,r){typeof t[i]=="string"?t[i]=r.url:t[i].url=r.url}export{Y as w};
