import{aH as N,aI as $,aJ as S,d as c,aK as w,aL as R,s as U,e as D,B as O,aM as f,aN as j,aO as v,aP as g,aQ as d,aR as x}from"./main.efb50b2c.js";import{c as B,a as h}from"./devEnvironmentUtils.8c6e6b72.js";import"./preload-helper.387dac8f.js";function L(e,a,t,l){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?H(e,a,l):R(e,a,l).then(o=>F(o,e.name,a,t,l)):Promise.reject(new U("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function F(e,a,t,l,o){const u=e.data,m=t&&D(t.portal)?t.portal:O.getDefault(),p={portal:m,url:c(e.baseUrl),origin:"portal-item"},r=u.items.find(s=>s.name===a);if(!r){const s=`The symbol name '${a}' could not be found`;return Promise.reject(new U("symbolstyleutils:symbol-name-not-found",s,{symbolName:a}))}let i=f(j(r,l),p),y=r.thumbnail&&r.thumbnail.href;const b=r.thumbnail&&r.thumbnail.imageData;B()&&(i=h(i),y=h(y));const P={portal:m,url:c(w(i)),origin:"portal-item"};return N(i,o).then(s=>{const E=l==="cimRef"?$(s.data):s.data,n=S(E,P);if(n&&v(n)){if(y){const M=f(y,p);n.thumbnail=new g({url:M})}else b&&(n.thumbnail=new g({url:`data:image/png;base64,${b}`}));e.styleUrl?n.styleOrigin=new d({portal:t.portal,styleUrl:e.styleUrl,name:a}):e.styleName&&(n.styleOrigin=new d({portal:t.portal,styleName:e.styleName,name:a}))}return n})}function H(e,a,t){const l=x.replace(/\{SymbolName\}/gi,e.name),o=D(a.portal)?a.portal:O.getDefault();return N(l,t).then(u=>{const m=$(u.data);return S(m,{portal:o,url:c(w(l)),origin:"portal-item"})})}export{F as fetchSymbolFromStyle,L as resolveWebStyleSymbol};
