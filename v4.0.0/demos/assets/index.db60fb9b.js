import{gs as N,gD as n,gE as M,g6 as w,gF as x,gv as y,g7 as I,g8 as b,gg as T,g9 as l,ga as k,gb as _,gB as $,gm as p,gf as a,ge as d,gc as r,go as m,gp as E,gh as A,gr as F,gG as G,gq as P,gw as H,gH as R}from"./main.efb50b2c.js";import{H as z}from"./hilight-defs.8b611028.js";import{T as C}from"./toggle-switch-control.693b1977.js";import{l as O}from"./linkify-html.module.38598c19.js";import"./preload-helper.387dac8f.js";const D="details";class S extends N{get config(){return super.config}openDetails(t){this.$vApp.$store.set(n.setPayload,t),this.$iApi.panel.get("details-layers").isOpen||this.$iApi.panel.open({id:"details-layers"})}toggleFeature(t,i){const s=this.$iApi.panel.get("details-layers");s.isOpen&&this.$iApi.panel.close(s);const o=this.$iApi.panel.get("details-items"),h={result:{items:[{data:t.data,format:t.format,loaded:!0,loading:Promise.resolve()}],uid:t.uid,loading:Promise.resolve(),loaded:!0}},c=this.$vApp.$store.get(n.currentFeatureId),g=`${t.uid}-${t.data.OBJECTID}`;this.$vApp.$store.set(n.currentFeatureId,t.data?g:null),i===!1?this.$iApi.panel.close(o):o.isOpen?c!==g||i===!0?o.show({screen:"item-screen",props:h}):this.$iApi.panel.close(o):this.$iApi.panel.open({id:"details-items",screen:"item-screen",props:h})}_parseConfig(t){t&&t.templates&&this.$vApp.$store.set(n.defaultTemplates,t.templates),this.handlePanelWidths(["details-items","details-layers"]);const i=this.getLayerFixtureConfigs(),s=[];Object.keys(i).forEach(h=>{s.push({id:h,name:i[h].name,template:i[h].template})});const o=s.map(h=>new M(h));this.$vApp.$store.set(n.properties,o.reduce((h,c)=>(h[c.id]=c,h),{})),this._validateItems()}_validateItems(){Object.values(this.$vApp.$store.get(n.properties)).forEach(t=>{t.template in this.$vApp.$options.components&&this.$vApp.$store.set(`${n.properties}@${t.id}.componentId`,t.template)})}async hilightDetailsItems(t,i){const s=t instanceof Array?t:[t],o=this.$iApi.fixture.get("hilight");if(o){await o.removeHilight(o.getGraphicsByKey(origin=D));const h=await this.getHilightGraphics(s,i);o.addHilight(h)}}removeDetailsHilight(){const t=this.$iApi.fixture.get("hilight");t&&t.removeHilight(t.getGraphicsByKey(origin=D))}async reloadDetailsHilight(t,i){const s=t instanceof Array?t:[t],o=this.$iApi.fixture.get("hilight");if(o){const h=await this.getHilightGraphics(s,i);o.reloadHilight(h)}}async getHilightGraphics(t,i){const s=this.$iApi.geo.layer.getLayer(i),o=this.$iApi.fixture.get("hilight"),h=[];return s&&await Promise.all(t.map(async c=>{const g=c.data[s.oidField],u=await s.getGraphic(g,{getGeom:!0,getAttribs:!0,getStyle:!0});u.id=o.constructGraphicKey(D,i,g),h.push(u)})),h}onHilightToggle(t,i,s){t?(this.hilightDetailsItems(i,s),this.$vApp.$store.set(n.hilightToggle,!0)):(this.removeDetailsHilight(),this.$vApp.$store.set(n.hilightToggle,!1))}hasHilighter(){const t=this.$iApi.fixture.get("hilight");return t&&t.hilightMode.mode!==z.NONE}}const j=w({name:"DetailsLayersScreenV",props:{panel:x},data(){return{layerResults:[],lastLayerUid:"",activeGreedy:this.get(n.activeGreedy),slowLoadingFlag:this.get(n.slowLoadingFlag),payload:this.get(n.payload),detailProperties:this.get(n.properties),getLayerByUid:this.get("layer/getLayerByUid"),layers:this.get("layer/layers"),mobileMode:this.get("panel/mobileView"),remainingWidth:this.get("panel/getRemainingWidth"),handlers:[],watchers:[]}},computed:{totalResultCount(){return this.layerResults.map(e=>e.items.length).reduce((e,t)=>e+t,0)}},created(){this.watchers.push(this.$watch("payload",e=>{this.loadPayloadItems(e)},{deep:!1,immediate:!0}))},mounted(){this.handlers.push(this.$iApi.event.on(y.PANEL_CLOSED,e=>{(e.id==="details-items"||e.id==="details-layers")&&this.$iApi.$vApp.$store.set(n.activeGreedy,0)})),this.watchers.push(this.$watch("activeGreedy",e=>{e===0&&this.$iApi.$vApp.$store.set(n.slowLoadingFlag,!1)}))},beforeUnmount(){this.handlers.forEach(e=>this.$iApi.event.off(e)),this.watchers.forEach(e=>e())},methods:{loadPayloadItems(e){if(e===void 0)return;const t=this.$iApi.panel.get("details-items"),i=t.width||350,s=this.mobileMode||this.remainingWidth<i&&!t.isOpen||e.length===0?0:e[0].requestTime;this.$iApi.$vApp.$store.set(n.activeGreedy,s),this.$iApi.$vApp.$store.set(n.slowLoadingFlag,!1),this.layerResults=e,this.calculateGrandTotal(e),this.autoOpen(e)},autoOpen(e){const t=this.$iApi.panel.get("details-items");if(this.lastLayerUid&&t.isOpen){const i=this.layerResults.findIndex(s=>s.uid===this.lastLayerUid);if(i!==-1){const s=this.layerResults[i];s.loading.then(()=>{s.requestTime===this.activeGreedy&&(s.items.length>0?(this.$iApi.$vApp.$store.set(n.activeGreedy,0),this.openResult(i)):this.autoOpenAny(e))})}else this.autoOpenAny(e)}else this.autoOpenAny(e);setTimeout(()=>{this.activeGreedy!==0&&e[0].requestTime===this.activeGreedy&&this.$iApi.$vApp.$store.set(n.slowLoadingFlag,!0)},500)},autoOpenAny(e){const t=e.map(s=>s.loading.then(()=>s.items.length>0?Promise.resolve(s):Promise.reject())),i=e.length===0?0:e[0].requestTime;Promise.any(t).then(s=>{if(s.requestTime!==this.activeGreedy)return;const o=this.layerResults.findIndex(h=>h.uid===s.uid);this.$iApi.$vApp.$store.set(n.activeGreedy,0),o!==-1&&this.openResult(o)}).catch(()=>{i===this.activeGreedy&&(this.lastLayerUid="",this.$iApi.$vApp.$store.set(n.activeGreedy,0),this.closeResult())})},calculateGrandTotal(e){Promise.all(e.map(t=>t.loading)).then(()=>{this.$iApi.updateAlert(this.$iApi.$vApp.$t("details.layers.found",{numResults:this.totalResultCount,numLayers:e.length}))})},closeResult(){const e=this.$iApi.panel.get("details-items");e.isOpen&&e.close()},openResult(e){if(this.payload[e].items.length>0){this.$iApi.$vApp.$store.set(n.activeGreedy,0);let t=this.$iApi.panel.get("details-items"),i={result:this.payload[e]};this.lastLayerUid=this.payload[e].uid,t.isOpen?t.show({screen:"item-screen",props:i}):this.$iApi.panel.open({id:"details-items",screen:"item-screen",props:i})}},layerName(e){const t=this.payload[e];let i=this.getLayerByUid(t.uid);return i&&this.detailProperties[i.id]&&this.detailProperties[i.id].name?this.detailProperties[i.id].name:i?.name??""}}}),V={key:0},B={class:"p-5"},q=["onClick","disabled"],U=r("div",{class:"flex-auto"},null,-1),W={key:0,class:"px-5"},Z={key:1,class:"animate-spin spinner h-20 w-20 px-5"},K={class:"flex justify-center py-10 items-center"},Y=r("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),J=r("div",null,null,-1);function Q(e,t,i,s,o,h){const c=b("panel-screen"),g=T("truncate");return l(),k(c,{panel:e.panel},{header:_(()=>[$(p(e.$t("details.layers.title")),1)]),content:_(()=>[e.activeGreedy===0?(l(),a("div",V,[d(" grond total "),r("div",B,p(e.$t("details.layers.found",{numResults:e.totalResultCount,numLayers:e.payload.length})),1),d(" clicker for each layer "),(l(!0),a(m,null,E(e.layerResults,(u,f)=>(l(),a("button",{type:"button",class:"w-full px-20 py-10 text-md flex hover:bg-gray-200 cursor-pointer disabled:cursor-default",key:u.uid,onClick:v=>u.loaded&&e.openResult(f),disabled:!(u.loaded&&u.items.length>0)},[A((l(),a("div",null,[$(p(e.layerName(f)||e.$t("details.layers.loading")),1)])),[[g]]),U,d(" display the count if item exists, else display the loading spinner "),u.loaded?(l(),a("div",W,p(u.items.length),1)):(l(),a("div",Z))],8,q))),128))])):e.slowLoadingFlag?(l(),a(m,{key:1},[d(" show loading spinner when waiting for identify results "),r("div",K,[Y,$(" "+p(e.$t("details.item.loading")),1)])],2112)):(l(),a(m,{key:2},[d(" clear panel when new identify request came in "),J],2112))]),_:1},8,["panel"])}var X=I(j,[["render",Q],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/details/layers-screen.vue"]]);const ee=w({name:"DetailsResultScreenV",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},previousItemIndex:{type:Number,default:-1}},components:{Toggle:C},data(){return{icon:[],layerExists:!1,detailProperties:this.get(n.properties),activeGreedy:this.get(n.activeGreedy),slowLoadingFlag:this.get(n.slowLoadingFlag),handlers:[],details:this.$iApi.fixture.get("details"),hilightToggle:!0}},computed:{nameField(){return this.$iApi.geo.layer.getLayer(this.result.uid)?.nameField},layerName(){const e=this.$iApi.geo.layer.getLayer(this.result.uid);return e&&this.detailProperties[e.id]&&this.detailProperties[e.id].name?this.detailProperties[e.id].name:e?.name??""}},mounted(){this.layerExists=this.$iApi.geo.layer.getLayer(this.result.uid)!==void 0,this.hilightToggle=this.$store.get(n.hilightToggle)??this.hilightToggle,this.hilightToggle&&this.details.hilightDetailsItems(this.result.items,this.result.uid),this.$iApi.updateAlert(this.$iApi.$vApp.$t("details.item.alert.show.list",{layerName:this.layerName})),this.handlers.push(this.$iApi.event.on(y.LAYER_REMOVE,e=>{this.result.uid===e.uid&&this.panel.close()})),this.handlers.push(this.$iApi.event.on(y.PANEL_CLOSED,e=>{e.id=="details-items"&&this.detailsClosed()})),this.handlers.push(this.$iApi.event.on(y.PANEL_MINIMIZED,e=>{e.id=="details-items"&&this.detailsMinimized()})),this.handlers.push(this.$iApi.event.on(y.MAP_BASEMAPCHANGE,()=>{this.hilightToggle&&this.details.reloadDetailsHilight(this.result.items,this.result.uid)}))},beforeUnmount(){this.handlers.forEach(e=>this.$iApi.event.off(e))},methods:{detailsClosed(){this.details.removeDetailsHilight(),this.$store.set(n.hilightToggle,!0)},detailsMinimized(){this.details.removeDetailsHilight()},openResult(e){this.panel.show({screen:"item-screen",props:{result:this.result,itemIndex:e}})},itemIcon(e,t){const i=this.$iApi.geo.layer.getLayer(this.result.uid);if(i===void 0){console.warn(`could not find layer for uid ${this.result.uid} during icon lookup`);return}const s=i.oidField;return i.getIcon(e[s]).then(o=>{this.icon[t]!==o&&(this.icon[t]=o)}),this.icon[t]},onHilightToggle(e){this.hilightToggle=e,this.details.onHilightToggle(e,this.result.items,this.result.uid)}}}),te={key:0},ie={key:0},se={key:0},le={key:0,class:"flex justify-between py-8 px-8 mb-8 bg-gray-100"},ae={class:"p-8 font-bold break-words"},re={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},ne=["onClick","disabled"],oe=["innerHTML"],de={key:1,class:"flex-initial py-5 px-10"},he={key:2,class:"animate-spin spinner h-20 w-20 px-5"},pe={key:1},ue={class:"p-5"},ce={class:"flex justify-center py-10 items-center"},ge=r("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),me=r("div",null,null,-1);function ye(e,t,i,s,o,h){const c=b("Toggle"),g=b("panel-screen"),u=T("truncate"),f=T("focus-item");return l(),k(g,{panel:e.panel},{header:_(()=>[$(p(e.$t("details.items.title")),1)]),content:_(()=>[e.result.loaded&&e.activeGreedy===0?(l(),a("div",te,[e.layerExists?(l(),a("div",ie,[e.result.items.length>0?(l(),a("div",se,[d(" layer name "),e.layerExists?(l(),a("div",le,[r("div",ae,p(e.layerName),1)])):d("v-if",!0),d(" highlight toggle "),e.details.hasHilighter()?(l(),a("div",re,[r("div",null,p(e.$t("details.togglehilight.title")),1),F(c,{config:{value:e.hilightToggle,disabled:!1},onToggled:e.onHilightToggle},null,8,["config","onToggled"])])):d("v-if",!0),d(" result list "),(l(!0),a(m,null,E(e.result.items,(v,L)=>A((l(),a("button",{type:"button",class:"w-full flex px-16 py-10 text-md hover:bg-gray-200 cursor-pointer",key:L,onClick:ht=>v.loaded&&e.openResult(L),disabled:!v.loaded},[d(" ifs on each span as wrapper breaks aligment. smart person might improve things "),v.loaded?(l(),a("span",{key:0,innerHTML:e.itemIcon(v.data,L),class:"flex-none symbologyIcon"},null,8,oe)):d("v-if",!0),v.loaded?A((l(),a("span",de,[$(p(e.nameField?v.data[e.nameField]:e.$t("details.result.default.name",[L+1])),1)])),[[u]]):d("v-if",!0),v.loaded?d("v-if",!0):(l(),a("span",he))],8,ne)),[[f],[u]])),128))])):(l(),a("div",pe,p(e.$t("details.layers.results.empty")),1))])):(l(),a(m,{key:1},[d(" layer does not exist anymore, show no data text "),r("div",ue,p(e.$t("details.item.no.data")),1)],2112))])):e.slowLoadingFlag?(l(),a(m,{key:1},[d(" result is loading "),r("div",ce,[ge,$(" "+p(e.$t("details.item.loading")),1)])],2112)):(l(),a(m,{key:2},[d(" clear panel when new identify request came in "),me],2112))]),_:1},8,["panel"])}var fe=I(ee,[["render",ye],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/details/result-screen.vue"]]);const $e=w({name:"ESRIDefaultV",props:{fields:{type:Object,required:!0},identifyData:{type:Object,required:!0}},methods:{itemData(){const e={};Object.assign(e,this.identifyData.data),e.Symbol!==void 0&&delete e.Symbol;let t={};return this.fields.forEach(i=>{t[i.name]=i.alias||i.name}),Object.keys(e).map(i=>{e[i]={value:typeof e[i]=="number"?this.$iApi.$vApp.$n(e[i],"number"):e[i],alias:t[i]||i}}),e},makeHtmlLink(e){if(!e)return e;if(!!e.trim().match(/\.(jpeg|jpg|gif|png)$/)||!!e.trim().match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i))return`<img src="${e}" />`;const t="underline text-blue-600 break-all",i=document.createElement("div");return i.innerHTML=e.trim(),i.firstElementChild?.tagName=="A"?(i.firstElementChild.className=t,i.innerHTML):O(e,{className:t,target:"_blank",validate:{url:o=>/^https?:\/\//.test(o)}})}}}),ve={class:"inline font-bold"},Ae=r("span",{class:"flex-auto"},null,-1),_e=["innerHTML"];function be(e,t,i,s,o,h){return l(),a("div",null,[(l(!0),a(m,null,E(e.itemData(),(c,g,u)=>(l(),a("div",{class:"p-5 pl-3 flex justify-end flex-wrap even:bg-gray-300",key:u},[r("span",ve,p(c.alias),1),Ae,r("span",{class:"inline",innerHTML:e.makeHtmlLink(c.value)},null,8,_e)]))),128))])}var we=I($e,[["render",be],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/details/templates/esri-default.vue"]]);const Ie=w({name:"HTMLDefaultV",props:{identifyData:{type:Object,required:!0}}}),Le=["innerHTML"],Te={key:1};function ke(e,t,i,s,o,h){return e.identifyData?(l(),a("div",{key:0,class:"whitespace-pre-wrap break-words h-full overflow-auto",innerHTML:e.identifyData.data},null,8,Le)):(l(),a("div",Te,p(e.$t("details.layers.results.empty")),1))}var He=I(Ie,[["render",ke],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/details/templates/html-default.vue"]]);const De=w({name:"DetailsItemScreenV",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},itemIndex:{type:Number,default:0}},components:{"esri-default":we,"html-default":He,Toggle:C},data(){return{defaultTemplates:this.get(n.defaultTemplates),detailProperties:this.get(n.properties),activeGreedy:this.get(n.activeGreedy),slowLoadingFlag:this.get(n.slowLoadingFlag),identifyTypes:G.UNKNOWN,icon:"",currentIdx:0,layerExists:!1,handlers:[],details:this.$iApi.fixture.get("details"),hilightToggle:!0}},mounted(){this.initDetails(),this.handlers.push(this.$iApi.event.on(y.LAYER_REMOVE,e=>{this.result.uid===e.uid&&this.panel.close()})),this.handlers.push(this.$iApi.event.on(y.PANEL_CLOSED,e=>{e.id=="details-items"&&this.detailsClosed()})),this.handlers.push(this.$iApi.event.on(y.PANEL_MINIMIZED,e=>{e.id=="details-items"&&this.detailsMinimized()})),this.handlers.push(this.$iApi.event.on(y.MAP_BASEMAPCHANGE,()=>{this.hilightToggle&&this.details.reloadDetailsHilight(this.result.items[this.currentIdx],this.result.uid)}))},beforeUnmount(){this.handlers.forEach(e=>this.$iApi.event.off(e))},beforeUpdate(){this.initDetails()},computed:{identifyItem(){return this.result.items[this.currentIdx]},itemName(){const t=this.$iApi.geo.layer.getLayer(this.result.uid)?.nameField;return t&&this.identifyItem.loaded?this.identifyItem.data[t]:this.$t("details.items.title")},layerName(){const e=this.$iApi.geo.layer.getLayer(this.result.uid);return e&&this.detailProperties[e.id]&&this.detailProperties[e.id].name?this.detailProperties[e.id].name:e?.name??""},layerType(){return this.$iApi.geo.layer.getLayer(this.result.uid)?.layerType||""},supportsFeatures(){return this.$iApi.geo.layer.getLayer(this.result.uid)?.supportsFeatures??!1},fieldsList(){return this.supportsFeatures?this.$iApi.geo.layer.getLayer(this.result.uid)?.fields||[]:[]},detailsTemplate(){const e=this.$iApi.geo.layer.getLayer(this.result.uid);return e&&this.detailProperties[e.id]&&this.detailProperties[e.id].template?this.detailProperties[e.id].template:this.defaultTemplates&&this.defaultTemplates[this.identifyItem.format]?this.defaultTemplates[this.identifyItem.format]:this.supportsFeatures?"esri-default":"html-default"}},methods:{detailsClosed(){this.details.removeDetailsHilight(),this.$store.set(n.hilightToggle,!0)},detailsMinimized(){this.details.removeDetailsHilight()},initDetails(){this.currentIdx=this.itemIndex??0,this.layerExists=!0,this.hilightToggle=this.$store.get(n.hilightToggle)??this.hilightToggle,this.itemChanged()},itemChanged(){if(this.identifyItem.loaded)this.$iApi.geo.layer.getLayer(this.result.uid)||(this.layerExists=!1),this.fetchIcon(),this.$iApi.updateAlert(`${this.$iApi.$vApp.$t("details.item.alert.show.item",{itemName:this.itemName})} ${this.result.items.length>1?this.$iApi.$vApp.$t("details.item.count",[this.currentIdx+1,this.result.items.length]):""}`),this.hilightToggle&&this.details.hilightDetailsItems(this.result.items[this.currentIdx],this.result.uid);else{const e=this.currentIdx;this.identifyItem.loading.then(()=>{e===this.currentIdx&&this.itemChanged()})}},seeList(){this.panel.show({screen:"results-screen",props:{result:this.result,previousItemIndex:this.currentIdx}})},advanceItemIndex(e){this.currentIdx+=e,this.itemChanged()},fetchIcon(){if(this.icon="",!(this.identifyItem&&this.identifyItem.loaded))return;const e=this.$iApi.geo.layer.getLayer(this.result.uid);if(e===void 0){console.warn(`could not find layer for uid ${this.result.uid} during icon lookup`);return}if(e.supportsFeatures){const t=e.oidField;let i=this.currentIdx;e.getIcon(this.identifyItem.data[t]).then(s=>{this.currentIdx===i&&(this.icon=s)})}},zoomToFeature(){const e=this.$iApi.geo.layer.getLayer(this.result.uid);if(e===void 0){console.warn(`Could not find layer for uid ${this.result.uid} during zoom geometry lookup`);return}if(!this.identifyItem.loaded){console.warn("Details zoomToFeature call on item that is still loading. Should be impossible, alert the devs.");return}const t=this.identifyItem.data[e.oidField],i={getGeom:!0};e.getGraphic(t,i).then(s=>{s.geometry.invalid()?console.error(`Could not find graphic for objectid ${t}`):this.$iApi.geo.map.zoomMapTo(s.geometry)}),this.$iApi.updateAlert(this.$iApi.$vApp.$t("details.item.alert.zoom"))},onHilightToggle(e){this.hilightToggle=e,this.details.onHilightToggle(e,this.result.items[this.currentIdx],this.result.uid)}}}),Ee={key:0},Fe={key:0,class:"p-8 font-bold break-words mb-8 bg-gray-100"},Ce={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},Ne={key:2,class:"flex flex-col justify-between p-8 mb-8 bg-gray-100"},Me={class:"flex justify-between"},xe=["aria-label"],Ge={class:"flex bg-gray-200 py-8 items-center"},Pe=["content","aria-label","disabled"],Re=r("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[r("g",null,[r("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),ze=[Re],Oe={class:"px-8"},Se=["content","aria-label","disabled"],je=r("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[r("g",null,[r("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),Ve=[je],Be={key:3},qe={key:0},Ue={key:0,class:"flex py-8"},We=["innerHTML"],Ze={key:1,class:"m-auto"},Ke=r("div",{class:"animate-spin spinner h-20 w-20"},null,-1),Ye=[Ke],Je={class:"flex-grow my-auto text-lg px-8"},Qe=["content","aria-label"],Xe=r("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 24 24",width:"20"},[r("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})],-1),et=[Xe],tt={class:"flex justify-center py-10 items-center"},it=r("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),st={class:"p-5"},lt={class:"flex justify-center py-10 items-center"},at=r("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),rt=r("div",null,null,-1);function nt(e,t,i,s,o,h){const c=b("Toggle"),g=b("panel-screen"),u=T("tippy");return l(),k(g,{panel:e.panel},{header:_(()=>[$(p(e.$t("details.items.title")),1)]),content:_(()=>[e.result.loaded&&e.activeGreedy===0?(l(),a("div",Ee,[d(" layer name "),e.layerExists?(l(),a("div",Fe,p(e.layerName),1)):d("v-if",!0),d(" highlight toggle "),e.details.hasHilighter()?(l(),a("div",Ce,[r("div",null,p(e.$t("details.togglehilight.title")),1),F(c,{config:{value:e.hilightToggle,disabled:!1},onToggled:e.onHilightToggle},null,8,["config","onToggled"])])):d("v-if",!0),d(" paginator and list button for multiple features "),e.layerExists&&e.result.items.length>1?(l(),a("div",Ne,[r("div",Me,[r("button",{type:"button",class:"px-8 font-bold hover:bg-gray-200 focus:bg-gray-200","aria-label":e.$t("details.item.see.list"),onClick:t[0]||(t[0]=(...f)=>e.seeList&&e.seeList(...f))},p(e.$t("details.item.see.list")),9,xe),r("div",Ge,[A((l(),a("button",{type:"button",content:e.$t("details.item.previous.item"),onClick:t[1]||(t[1]=f=>e.advanceItemIndex(-1)),class:"mx-2 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":e.$t("details.item.previous.item"),disabled:e.currentIdx===0},ze,8,Pe)),[[u,{placement:"top"}]]),r("span",Oe,p(e.$t("details.item.count",[e.currentIdx+1,e.result.items.length])),1),A((l(),a("button",{type:"button",content:e.$t("details.item.next.item"),onClick:t[2]||(t[2]=f=>e.advanceItemIndex(1)),class:"mx-2 rotate-180 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":e.$t("details.item.next.item"),disabled:e.currentIdx===e.result.items.length-1},Ve,8,Se)),[[u,{placement:"top"}]])])])])):d("v-if",!0),d(" actual details section "),e.layerExists?(l(),a("div",Be,[e.identifyItem.loaded?(l(),a("div",qe,[d(" fancy header for esri features "),e.supportsFeatures?(l(),a("div",Ue,[e.icon?(l(),a("span",{key:0,class:"flex-none m-auto symbologyIcon",innerHTML:e.icon},null,8,We)):(l(),a("div",Ze,Ye)),r("span",Je,p(e.itemName),1),A((l(),a("button",{type:"button",content:e.$t("details.item.zoom"),"aria-label":e.$t("details.item.zoom"),onClick:t[3]||(t[3]=f=>e.zoomToFeature()),class:"text-gray-600 m-8"},et,8,Qe)),[[u,{placement:"bottom"}]])])):d("v-if",!0),(l(),k(P(e.detailsTemplate),{identifyData:e.identifyItem,fields:e.fieldsList},null,8,["identifyData","fields"]))])):(l(),a(m,{key:1},[d(" identified item is loading "),r("div",tt,[it,$(" "+p(e.$t("details.item.loading")),1)])],2112))])):(l(),a(m,{key:4},[d(" layer does not exist anymore, show no data text "),r("div",st,p(e.$t("details.item.no.data")),1)],2112))])):e.slowLoadingFlag?(l(),a(m,{key:1},[d(" result is loading "),r("div",lt,[at,$(" "+p(e.$t("details.item.loading")),1)])],2112)):(l(),a(m,{key:2},[d(" clear panel when new identify request came in "),rt],2112))]),_:1},8,["panel"])}var ot=I(De,[["render",nt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/details/item-screen.vue"]]),dt={en:{"details.layers.title":"Identified Layers","details.layers.found":"Found {numResults} results in {numLayers} layers","details.layers.loading":"The layer is loading...","details.layers.results.empty":"No results found for the selected layer.","details.result.default.name":"Identify Item {0}","details.items.title":"Details","details.item.see.list":"See List","details.item.zoom":"Zoom to feature","details.item.previous.item":"Previous item","details.item.next.item":"Next item","details.item.count":"{0} of {1}","details.item.loading":"Loading results...","details.item.no.data":"No data to show because the layer has been removed","details.item.alert.zoom":"Zoomed into feature","details.item.alert.show.item":"Showing result {itemName}","details.item.alert.show.list":"Showing all results for {layerName}","details.togglehilight.title":"Toggle Highlight"},fr:{"details.layers.title":"Couches d\xE9sign\xE9es","details.layers.found":"{numResults} r\xE9sultats trouv\xE9s dans {numLayers} couches","details.layers.loading":"La couche est en cours de chargement...","details.layers.results.empty":"Aucun r\xE9sultat trouv\xE9 pour la couche s\xE9lectionn\xE9e.","details.result.default.name":"D\xE9signer l'\xE9l\xE9ment {0}","details.items.title":"D\xE9tails","details.item.see.list":"Voir la liste","details.item.zoom":"Zoom \xE0 l'\xE9l\xE9ment","details.item.previous.item":"\xC9l\xE9ment pr\xE9c\xE9dent","details.item.next.item":"\xC9l\xE9ment suivant","details.item.count":"{0} de {1}","details.item.loading":"Chargement des r\xE9sultats...","details.item.no.data":"[fr] Aucune donn\xE9e \xE0 afficher","details.item.alert.zoom":"Zoom sur la caract\xE9ristique","details.item.alert.show.item":"Affichage du r\xE9sultat {itemName}","details.item.alert.show.list":"Affichage de tous les r\xE9sultats pour {layerName}","details.togglehilight.title":"Basculer vers l'\xE9l\xE9ment principal"}};class yt extends S{async added(){this.$iApi.panel.register({"details-layers":{screens:{"layers-screen":H(X)},style:{width:"350px"},button:{tooltip:"details.layers.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>'},alertName:"details.layers.title"},"details-items":{screens:{"results-screen":H(fe),"item-screen":H(ot)},style:{width:"350px"},button:{tooltip:"details.items.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></svg>'},alertName:"details.items.title"}},{i18n:{messages:dt}}),this.$vApp.$store.registerModule("details",R()),this._parseConfig(this.config);const t=this.$vApp.$watch(()=>this.config,s=>this._parseConfig(s)),i=[];i.push(this.$iApi.event.on(y.RAMP_MOBILEVIEW_CHANGE,s=>{const o=["details-items","details-layers"];if(s)for(const h of o)this.$iApi.panel.setStyle(h,{width:"100%"});else this.handlePanelWidths(o)})),this.removed=()=>{t(),i.forEach(s=>this.$iApi.event.off(s)),this.$iApi.panel.remove("details-items"),this.$iApi.panel.remove("details-layers"),this.$iApi.fixture.get("appbar")&&(this.$iApi.$vApp.$store.dispatch("appbar/removeButton","details-layers"),this.$iApi.$vApp.$store.dispatch("appbar/removeButton","details-items")),this.$vApp.$store.unregisterModule("details")}}}export{yt as default};
