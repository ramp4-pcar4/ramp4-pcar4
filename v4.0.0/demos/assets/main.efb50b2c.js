import{_ as Be}from"./preload-helper.387dac8f.js";var Rm=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))(Rm||{}),kh=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(kh||{}),ko=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(ko||{}),uZ=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(uZ||{}),cZ=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(cZ||{}),hZ=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(hZ||{}),br=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(br||{}),UT=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(UT||{}),Cr=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.OSM="osm-tile",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(Cr||{}),rc=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(rc||{}),Ua=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(Ua||{}),Yi=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(Yi||{}),Fn=(e=>(e.GEOMETRIC="geometric",e.SYMBOLIC="symbolic",e.HYBRID="hybrid",e.NONE="none",e))(Fn||{}),ka=(e=>(e.NEW="new",e.INITIATING="initiating",e.INITIATED="initiated",e.TERMINATING="terminating",e.TERMINATED="terminated",e))(ka||{}),co=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(co||{}),Dc=(e=>(e.NOT_LOADED="not-loaded",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(Dc||{}),rg=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(rg||{}),Nf=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.INITIAL="initial",e.API="api",e))(Nf||{}),Qs=(e=>(e.BoundaryZoom="boundaryZoom",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(Qs||{});class Ip{attributes;geometry;style;id;constructor(t,r,i){this.geometry=t,r?this.id=r:this.id=N2.sharedUtils.generateUUID(),i?this.attributes=i:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}function h(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function jpe(e){return e&&e.release&&typeof e.release=="function"}function Upe(e){return e&&e.acquire&&typeof e.acquire=="function"}class zu{constructor(t,r,i,n=1,s=0){if(this.ctor=t,this.acquireFunction=r,this.releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let o=0;o<s;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(zu.test.disabled)r=new this.ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this.ctor}r=this._pool.pop()}return this.acquireFunction?this.acquireFunction(r,...t):Upe(r)&&r.acquire(...t),r}release(t){t&&!zu.test.disabled&&(this.releaseFunction?this.releaseFunction(t):jpe(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}zu.test={disabled:!1};function Vpe(e){e.length=0}class fo{constructor(t=50,r=50){this._pool=new zu(Array,void 0,Vpe,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return f$.acquire()}static release(t){return f$.release(t)}static prune(){f$.prune()}}const f$=new fo(100);function xst(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function Sst(e,t){for(const r of e)if(r!=null&&t(r))return r}function Wk(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const Bpe=null;function de(e){return e!=null}function Ne(e){return e==null}function qc(e,t){return de(e)?t(e):Bpe}function Est(e){return e}function zpe(e,t){if(Ne(e))throw new Error(t);return e}function VT(e,t){return de(e)?e:typeof t=="function"?t():t}function Mst(e,t){return de(e)?e:t}function La(e){return de(e)&&e.destroy(),null}function Ist(e){return de(e)&&e.dispose(),null}function Jo(e){return de(e)&&e.remove(),null}function V5(e){return de(e)&&e.abort(),null}function Tst(e){return de(e)&&e.release(),null}function Gpe(e,t,r){return de(e)&&de(t)?de(r)?r(e,t):e.equals(t):e===t}function qpe(e){return null}function Ast(e,t){const r=new Array;for(const i of e)r.push(Dw(i,null,t));return r}function $st(e,t){for(const r of e)qc(r,t)}function Dw(e,t,r){return de(e)?r(e):t}function Cst(e){return e.filter(t=>de(t))}function pZ(e,...t){let r=e;for(let i=0;i<t.length&&r;++i)r=r[t[i]];return r}function kst(e){return e}function BT(e){return ib(()=>e.forEach(t=>de(t)&&t.remove()))}function ib(e){return{remove:()=>{e&&(e(),e=void 0)}}}class Na{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Na._m}getInt(){return this._seed=(Na._a*this._seed+Na._c)%Na._m,this._seed}getFloat(){return this.getInt()/(Na._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Na._m*i}}Na._m=2147483647,Na._a=48271,Na._c=0;function Hpe(e,t){return t?e.filter((r,i,n)=>n.findIndex(t.bind(null,r))===i):e.filter((r,i,n)=>n.indexOf(r)===i)}function GL(e,t,r){if(Ne(e)&&Ne(t))return!0;if(Ne(e)||Ne(t)||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Ost(e,t){let r=e.length!==t.length;e.length=t.length;for(let i=0;i<t.length;++i)e[i]!==t[i]&&(e[i]=t[i],r=!0);return r}function Rst(e,t,r){let i,n;return r?(i=t.filter(s=>!e.some(o=>r(o,s))),n=e.filter(s=>!t.some(o=>r(o,s)))):(i=t.filter(s=>!e.includes(s)),n=e.filter(s=>!t.includes(s))),{added:i,removed:n}}function Pst(e){return e&&typeof e.length=="number"}const Wpe=!!Array.prototype.fill;function Jpe(e,t){if(Wpe)return new Array(e).fill(t);const r=new Array(e);for(let i=0;i<e;i++)r[i]=t;return r}function Lst(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let i=e;i<t;i++)r[i-e]=i;return r}class dZ{constructor(){this.last=0}}const fZ=new dZ;function mZ(e,t,r,i){i=i||fZ;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function qL(e,t,r,i){const n=r??e.length,s=mZ(e,t,n,i);if(s!==-1)return e[s]=e[n-1],r==null&&e.pop(),t}const Jl=new Set;function Zpe(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;Jl.clear();for(let a=0;a<i;++a)Jl.add(t[a]);n=n||fZ;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(Jl.has(e[a])&&(s&&s.push(e[a]),Jl.delete(e[a]),e[a]=e[r-1],--r,--a,Jl.size===0||r===0))return Jl.clear(),r;for(let a=0;a<o;++a)if(Jl.has(e[a])&&(s&&s.push(e[a]),Jl.delete(e[a]),e[a]=e[r-1],--r,--a,Jl.size===0||r===0))return Jl.clear(),r;return Jl.clear(),r}new Na;function Kpe(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}let lf;function We(e){return typeof lf[e]=="function"?lf[e]=lf[e](globalThis):lf[e]}lf=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},We.add=(e,t,r,i)=>((i||lf[e]===void 0)&&(lf[e]=t),r&&We(e)),We.cache=lf,We.add("esri-deprecation-warnings",!0),(()=>{We.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(We.add("host-browser",e),We.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),We.add("dom",e),We("host-browser")){const t=navigator,r=t.userAgent,i=t.appVersion,n=parseFloat(i);if(We.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),We.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),We.add("khtml",i.includes("Konqueror")?n:void 0),We.add("edge",parseFloat(r.split("Edge/")[1])||void 0),We.add("opr",parseFloat(r.split("OPR/")[1])||void 0),We.add("webkit",!We("wp")&&!We("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),We.add("chrome",!We("edge")&&!We("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),We.add("android",!We("wp")&&parseFloat(r.split("Android ")[1])||void 0),We.add("safari",!i.includes("Safari")||We("wp")||We("chrome")||We("android")||We("edge")||We("opr")?void 0:parseFloat(i.split("Version/")[1])),We.add("mac",i.includes("Macintosh")),!We("wp")&&r.match(/(iPhone|iPod|iPad)/)){const s=RegExp.$1.replace(/P/,"p"),o=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replace(/_/g,""));We.add(s,a),We.add("ios",a)}We.add("trident",parseFloat(i.split("Trident/")[1])||void 0),We("webkit")||(!r.includes("Gecko")||We("wp")||We("khtml")||We("trident")||We("edge")||We.add("mozilla",n),We("mozilla")&&We.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&We.add("esri-mobile",t),r&&We.add("esri-iPhone",r),We.add("esri-geolocation",!!navigator.geolocation)}We.add("esri-canvas-svg-support",!We("trident")),We.add("esri-wasm","WebAssembly"in globalThis),We.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),We.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),We.add("esri-atomics","Atomics"in globalThis),We.add("esri-workers","Worker"in globalThis),We.add("web-feat:cache","caches"in globalThis),We.add("esri-workers-arraybuffer-transfer",!We("safari")||Number(We("safari"))>=12),We.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),We.add("featurelayer-simplify-payload-size-factors",[1,1,4]),We.add("featurelayer-snapshot-enabled",!0),We.add("featurelayer-snapshot-point-min-threshold",8e4),We.add("featurelayer-snapshot-point-max-threshold",4e5),We.add("featurelayer-snapshot-point-coverage",.1),We.add("featurelayer-advanced-symbols",!1),We.add("featurelayer-pbf",!0),We.add("featurelayer-pbf-statistics",!1),We.add("feature-layers-workers",!0),We.add("feature-polyline-generalization-factor",1),We.add("mapview-transitions-duration",200),We.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),We.add("mapserver-pbf-enabled",!1),We.add("mapimagelayer-popup-identify-max-tolerance",20),We.add("heatmap-allow-raster-fallback",!0),We.add("heatmap-force-raster",!1),We("host-webworker")||We("host-browser")&&(We.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),We.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{We.add("esri-image-decode",!0,!0,!0)}).catch(()=>{We.add("esri-image-decode",!1,!0,!0)})}return!1}),We.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function Nst(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function Ype(e,t,r){if(e.slice)return e.slice(t,r);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),r===void 0?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const i=Math.max(0,r-t),n=new e.constructor(i);for(let s=0;s<i;s++)n[s]=e[t+s];return n}function Dst(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function Qpe(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function Xpe(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function ede(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function tde(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function rde(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function ide(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function nde(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function sde(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function ode(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function yZ(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&yZ(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function Pe(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=wZ(e);if(de(t))return t;if(gZ(e))return e.clone();if(vZ(e))return e.map(Pe);if(bZ(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=Pe(e[i]);return r}function Jk(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=wZ(e);if(de(t))return t;if(vZ(e)){let r=!0;const i=e.map(n=>{const s=Jk(n);return n!=null&&s==null&&(r=!1),s});return r?i:null}if(gZ(e))return e.clone();if(!bZ(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const n=e[i],s=Jk(n);if(n!=null&&s==null)return null;r[i]=s}return r}return null}function gZ(e){return typeof e.clone=="function"}function vZ(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function bZ(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function Mj(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function wZ(e){if(Qpe(e)||Xpe(e)||ede(e)||tde(e)||rde(e)||ide(e)||nde(e)||sde(e)||ode(e))return Ype(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;return e.forEach((r,i)=>{t.set(i,Pe(r))}),t}if(e instanceof Set){const t=new Set;return e.forEach(r=>{t.add(Pe(r))}),t}return null}function HL(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function ade(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&GL(e,t):e instanceof Set?t instanceof Set&&ude(e,t):e instanceof Map?t instanceof Map&&cde(e,t):!!Mj(e)&&Mj(t)&&lde(e,t))}function lde(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function ude(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function cde(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const n=t.get(r);if(n!==i||n===void 0&&!t.has(r))return!1}return!0}function Mn(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function hde(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function nM(e,t,r){return r?B5(e,t,{policy:r,path:""}):B5(e,t,null)}function B5(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=null,o="merge";if(r&&(s=r.path?`${r.path}.${n}`:n,o=r.policy(s)),o==="replace")return i[n]=t[n],i;if(i[n]===void 0)return i[n]=Pe(t[n]),i;let a=i[n],l=t[n];if(a===l)return i;if(Array.isArray(l)||Array.isArray(i))a=a?Array.isArray(a)?i[n]=a.concat():i[n]=[a]:i[n]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.includes(u)||a.push(u)}));else if(l&&typeof l=="object")if(r){const u=r.path;r.path=s,i[n]=B5(a,l,r),r.path=u}else i[n]=B5(a,l,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=l);return i},e||{}):e}function _Z(e){return Array.isArray(e)?e:e.split(".")}function Ij(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function pde(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Ij(r));return t}return Ij(e)}function xZ(e,t,r,i){const n=pde(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return BT(s)}return i(e,n[0],r)}function SZ(e){let t=!1;return()=>{t||(t=!0,e())}}function EZ(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const i=Mn(t);return hde(i,r)?i.get(r):t[r]}function MZ(e,t,r){if(e==null)return e;const i=EZ(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:MZ(i,t,r+1)}function Wx(e,t,r=0){return typeof t!="string"||t.includes(".")?MZ(e,_Z(t),r):EZ(t,e)}function z5(e,t){return Wx(e,t)}function Tj(e,t){return Wx(t,e)!==void 0}var Hc;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Hc||(Hc={}));class Aj{constructor(t){this.autoDestroy=!1,this.properties=t}}function Jx(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const i=Object.create(t.properties),n=t.autoDestroy;for(const s in i)i[s]=Pe(i[s]);t=new Aj(i),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new Aj({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function dde(e){return Jx(e).properties}function zT(e,t){const r=dde(e);let i=r[t];return i||(i=r[t]={}),i}function fde(e,t){return nM(e,t,yde)}const mde=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function yde(e){return mde.test(e)?"replace":"merge"}function IZ(e,t,r=!1){return AZ(e,t,r)}function nb(e,t){if(t!=null)return t[e]||TZ(e.split("."),!1,t)}function ra(e,t,r){const i=e.split("."),n=i.pop(),s=TZ(i,!0,r);s&&n&&(s[n]=t)}function TZ(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function AZ(e,t,r){return t?Object.keys(t).reduce((i,n)=>{let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=Pe(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.concat():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.includes(a)||s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=AZ(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}const _r={apiKey:void 0,applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(IZ(_r,globalThis.esriConfig,!0),delete _r.has),!_r.assetsPath){const e="4.24.7";_r.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}_r.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(_r,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),_r.request.corsEnabledServers=[],_r.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const gde=/\{([^\}]+)\}/g;function $j(e){return e??""}function Gu(e,t){return e.replace(gde,typeof t=="object"?(r,i)=>$j(nb(i,t)):(r,i)=>$j(t(i)))}function $Z(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.includes(r)?r:`\\${r}`)}function WL(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function Fst(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const Cj={info:0,warn:1,error:2,none:3};class ot{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,ot._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=ot.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const r=ot._loggers;return ot._loggers=t,r},set throttlingDisabled(t){ot._throttlingDisabled=t}}}static getLogger(t){let r=ot._loggers[t];return r||(r=new ot({module:t})),r}_log(t,r,...i){if(!!this._matchLevel(t)){if(r!=="always"&&!ot._throttlingDisabled){const n=this._argsToKey(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=ot._tickCounter)return;this._loggedMessages[t].set(n,ot._tickCounter),ot._scheduleTickCounterIncrement()}for(const n of _r.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;de(i);){const n=i[t];if(de(n))return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...i){console[t](`[${r}]`,...i)}_matchLevel(t){const r=_r.log.level?_r.log.level:"warn";return Cj[this._parentWithMember("level",r)]<=Cj[t]}_argsToKey(...t){const r=(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return WL(JSON.stringify(t,r))}static _scheduleTickCounterIncrement(){ot._tickCounterScheduled||(ot._tickCounterScheduled=!0,Promise.resolve().then(()=>{ot._tickCounter++,ot._tickCounterScheduled=!1}))}}ot._loggers={},ot._tickCounter=0,ot._tickCounterScheduled=!1,ot._throttlingDisabled=!1;var bt;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.USER=6]="USER"})(bt||(bt={}));const Zk=bt.USER+1;function zo(e){switch(e){case"defaults":return bt.DEFAULTS;case"service":return bt.SERVICE;case"portal-item":return bt.PORTAL_ITEM;case"web-scene":return bt.WEB_SCENE;case"web-map":return bt.WEB_MAP;case"user":return bt.USER}}function D2(e){switch(e){case bt.DEFAULTS:return"defaults";case bt.SERVICE:return"service";case bt.PORTAL_ITEM:return"portal-item";case bt.WEB_SCENE:return"web-scene";case bt.WEB_MAP:return"web-map";case bt.USER:return"user"}return void 0}function vde(e){return D2(e)}var Hr;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Hr||(Hr={}));let G5,Fw=[];const bde=ot.getLogger("esri.core.Accessor");function ir(e){G5!==void 0&&G5.onObservableAccessed(e)}let sM=!1,oM=!1;function Tp(e,t,r){if(sM)return JL(e,t,r);CZ(e);const i=t.call(r);return kZ(),i}function wde(e,t){return Tp(void 0,e,t)}function JL(e,t,r){const i=sM;sM=!0,CZ(e);let n=null;try{n=t.call(r)}catch(s){oM&&bde.error(s)}return kZ(),sM=i,n}function CZ(e){G5=e,Fw.push(e)}function kZ(){const e=Fw.pop();G5=Fw.length>0?Fw[Fw.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function OZ(e,t){if(t.flags&Hr.DepTrackingInitialized)return;const r=oM;oM=!1,t.flags&Hr.AutoTracked?JL(t,t.metadata.get,e):RZ(e,t),oM=r}const _de=[];function RZ(e,t){t.flags&Hr.ExplicitlyTracking||(t.flags|=Hr.ExplicitlyTracking,JL(t,()=>{const r=t.metadata.dependsOn||_de;for(const i of r)if(typeof i!="string"||i.includes(".")){const n=_Z(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=kj(o,n[s],s!==n.length-1)}else kj(e,i,!1)}),t.flags&=~Hr.ExplicitlyTracking)}function kj(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(i,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.getItemAt(s)}const n=Mn(e)?.properties.get(i);return n&&(ir(n),OZ(e,n)),r?e[i]:void 0}class PZ{constructor(t,r){this._observers=t,this._observer=r}remove(){Kpe(this._observers,this._observer)}}class Oj{constructor(t,r,i){this.properties=t,this.propertyName=r,this.metadata=i,this._observers=null,this._accessed=null,this._handles=null,this.flags=Hr.Dirty|(i.nonNullable?Hr.NonNullable:0)|(i.hasOwnProperty("value")?Hr.HasDefaultValue:0)|(i.get===void 0?Hr.DepTrackingInitialized:0)|(i.dependsOn===void 0?Hr.AutoTracked:0)}destroy(){if(this.flags&Hr.Dirty&&this._observers){const t=this._observers.slice();for(const r of t)r.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){ir(this);const t=this.properties.store,r=this.propertyName,i=this.flags,n=t.get(r);if(i&Hr.Computing||~i&Hr.Dirty&&t.has(r))return n;this.flags|=Hr.Computing;const s=this.properties.host;let o;i&Hr.AutoTracked?o=Tp(this,this.metadata.get,s):(RZ(s,this),o=this.metadata.get.call(s)),t.set(r,o,bt.COMPUTED);const a=t.get(r);return a===n?this.flags&=~Hr.Dirty:wde(this.commit,this),this.flags&=~Hr.Computing,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Hr.DepTrackingInitialized;const t=this._accessed;if(t===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let i=0;i<t.length;++i)r.push(t[i].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new PZ(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&Hr.Overriden&&(this.flags|=Hr.Dirty);const t=this._observers;if(t!==null)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=~Hr.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}class ZL{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new ZL;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,Pe(i))}),r}get(t){return this._values.get(t)}originOf(){return bt.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function f3(e,t,r){return e!==void 0}function Rj(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&Hr.NonNullable)||(i.lifecycle,Hc.INITIALIZING,!1))}function xde(e){return e&&typeof e.destroy=="function"}ot.getLogger("esri.core.accessorSupport.Properties");class Sde{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Hc.INITIALIZING,this.store=new ZL,this._origin=bt.USER;const r=this.host.constructor.__accessorMetadata__,i=r.properties;for(const n in i){const s=new Oj(this,n,i[n]);this.properties.set(n,s)}this.metadatas=i,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=Hc.CONSTRUCTING}constructed(){this.lifecycle=Hc.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,r]of this.properties){const i=this.internalGet(t);i&&xde(i)&&(i.destroy(),~r.flags&Hr.NonNullable&&this._internalSet(r,null)),r.destroy()}else for(const[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==Hc.INITIALIZING}get(t){const r=this.properties.get(t);if(r.metadata.get)return r.getComputed();ir(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.properties.get(t);if(i!==void 0&&i.flags&Hr.HasDefaultValue)return"defaults"}return D2(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const r=this.properties.get(t);if(f3(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.properties.get(t);f3(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.properties.get(r);if(!f3(n))return"";const s=new Set,o=Tp({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>n.metadata.get?.call(t));let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;i+="  ";for(const l of s){if(!(l instanceof Oj))continue;const u=l.properties.host,c=l.propertyName,p=Mn(u);a+=p?p.getDependsInfo(u,c,i):`${i}${c}: undefined
`}return a}setAtOrigin(t,r,i){const n=this.properties.get(t);if(f3(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.properties.get(t);return r!==void 0&&!!(r.flags&Hr.Overriden)}clearOverride(t){const r=this.properties.get(t);r!==void 0&&r.flags&Hr.Overriden&&(r.flags&=~Hr.Overriden,r.notifyChange())}override(t,r){const i=this.properties.get(t);if(!Rj(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(m$.release(s),!o)return;r=a}i.flags|=Hr.Overriden,this._internalSet(i,r)}set(t,r){const i=this.properties.get(t);if(!Rj(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:l}=o;if(m$.release(o),!a)return;r=l}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=zo(t)}getDefaultOrigin(){return D2(this._origin)}notifyChange(t){const r=this.properties.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.properties.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.properties.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==Hc.INITIALIZING?this._origin:bt.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&HL(r,n.get(s))&&~t.flags&Hr.Overriden&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),OZ(this.host,t))}_cast(t,r){const i=m$.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}}class Ede{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const m$=new zu(Ede);function Mde(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(r,i)=>{if(i==="")return"$";const n=nb(i,t),s=n??"";if(s===void 0)throw new Error(`could not find key "${i}" in template`);return s.toString()})}class GT{constructor(t,r,i){this.name=t,this.details=i,this.message=void 0,this instanceof GT&&(this.message=r&&Mde(r,i)||"")}toString(){return"["+this.name+"]: "+this.message}}class $e extends GT{constructor(t,r,i){if(super(t,r,i),!(this instanceof $e))return new $e(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return Pe(r)}catch{return"[object]"}}))}}catch(t){throw ot.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new $e(t.name,t.message,t.details)}}$e.prototype.type="error";function q5(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))q5(e,i,t[i]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(n.length-1,1)[0];return void q5(z5(e,n),s,r)}const i=e.__accessor__;i!=null&&Ide(t,i),e[t]=r}}function Ide(e,t){if(We("esri-unknown-property-errors")&&!Tde(e,t))throw new $e("set:unknown-property",Ade(e,t))}function Tde(e,t){return t.metadatas[e]!=null}function Ade(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}ot.getLogger("esri.core.accessorSupport.set");class LZ extends zu{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=qpe(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const m3=[];function H5(e){m3.push(e),m3.length===1&&queueMicrotask(()=>{const t=m3.slice();m3.length=0;for(const r of t)r()})}const $de=29;class z_{constructor(t,r=$de){this.name=t,this._counter=0,this._items=new Array(r)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,r)=>t-r)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,r)=>t+r,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var Kk;(function(e){const t=(s,o,a,l)=>{let u=o,c=o;const p=a>>>1,d=s[u-1];for(;c<=p;){c=u<<1,c<a&&l(s[c-1],s[c])<0&&++c;const m=s[c-1];if(l(m,d)<=0)break;s[u-1]=m,u=c}s[u-1]=d},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(s,c,a,l);const u=o+1;for(let c=a-1;c>o;c--){const p=s[o];s[o]=s[c],s[c]=p,t(s,u,c,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(s,c,a,l),yield;const u=o+1;for(let c=a-1;c>o;c--){const p=s[o];s[o]=s[c],s[c]=p,t(s,u,c,l),yield}}e.sort=i,e.iterableSort=n})(Kk||(Kk={}));const Pj=Kk,Cde=1.5,kde=1.1;class bf{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new dZ,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>Lj(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const n=this.data[i];t(n)&&r.push(n)}return r}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,Lj(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=mZ(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){const r=qL(this.data,t,this.length,this._hint);return r!==void 0&&(this.length=this.length-1),this._shrink(),r}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=Zpe(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){t>=this.length||r>=this.length||t===r||([this.data[t],this.data[r]]=[this.data[r],this.data[t]])}sort(t){Pj.sort(this.data,0,this.length,t)}iterableSort(t){return Pj.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const i=this.length,n=this.data;for(let s=0;s<i;++s)t.call(r,n[s],s,n)}forEach(t,r){for(let i=0;i<this.length;++i)t.call(r,this.data[i],i,this.data)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}}function Lj(e){e.data.length>Cde*e.length&&(e.data.length=Math.floor(e.length*kde))}function Ode(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(i)}}}}const Zx=Ode(globalThis),Nj=new Set;function Rde(e,t,r=!1){r&&Nj.has(t)||(r&&Nj.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function Pde(e,t,r={}){if(We("esri-deprecation-warnings")){const{moduleName:i}=r;NZ(e,`Property: ${(i?i+"::":"")+t}`,r)}}function NZ(e,t,r={}){if(We("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${i}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),s&&(a+=`
	\u{1F517} See ${s} for more details.`),Rde(e,a,o)}}function qT(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function HT(e,t,r){if(!qT(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const i=t.slice();for(const n of i)e.addEventListener(n,r);return{remove(){for(const n of i)e.removeEventListener(n,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function DZ(e,t,r){if(!qT(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=HT(e,t,n=>{i.remove(),r.call(e,n)});return{remove(){i.remove()}}}const Lde={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function _y({key:e}){return Lde[e]||e}function wi(e="Aborted"){return new $e("AbortError",e)}function ui(e,t="Aborted"){if(Za(e))throw wi(t)}function WT(e){return de(e)?"aborted"in e?e:e.signal:e}function Za(e){const t=WT(e);return de(t)&&t.aborted}function Fp(e){if(Vn(e))throw e}function Yk(e){if(!Vn(e))throw e}function Ka(e,t){const r=WT(e);if(!Ne(r)){if(!r.aborted)return DZ(r,"abort",()=>t());t()}}function KL(e,t){const r=WT(e);if(!Ne(r))return ui(r),DZ(r,"abort",()=>t(wi()))}function Nde(e,t){const r=WT(t);return Ne(r)?e:new Promise((i,n)=>{let s=Ka(t,()=>n(wi()));const o=()=>s=Jo(s);e.then(o,o),e.then(i,n)})}function Vn(e){return e&&e.name==="AbortError"}async function Qk(e){try{return await e}catch(t){if(!Vn(t))throw t}}function Ap(){let e=null;const t=new Promise((r,i)=>{e={promise:void 0,resolve:r,reject:i}});return e.promise=t,e}async function ia(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),n=await ia(i),s={};return r.map((o,a)=>s[o]=n[a]),s}const t=e;return new Promise(r=>{const i=[];let n=t.length;n===0&&r(i),t.forEach(s=>{const o={promise:s||Promise.resolve(s)};i.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--n,n===0&&r(i)})})})}async function Dde(e){return(await ia(e)).filter(t=>!!t.value).map(t=>t.value)}function YL(e,t,r){const i=new AbortController;return Ka(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);Ka(i,()=>{o&&(clearTimeout(o),s(wi()))})})}function jp(e){return e&&typeof e.then=="function"}function W5(e){return jp(e)?e:Promise.resolve(e)}function FZ(e,t=-1){let r,i,n,s,o=null;const a=(...l)=>{if(r){i=l,s&&s.reject(wi()),s=Ap();const d=s.promise;if(o){const m=o;o=null,m.abort()}return d}if(n=s||Ap(),s=null,t>0){const d=new AbortController;r=W5(e(...l,d.signal));const m=r;YL(t).then(()=>{r===m&&(s?d.abort():o=d)})}else r=1,r=W5(e(...l));const u=()=>{const d=i;i=n=r=o=null,d!=null&&a(...d)},c=r,p=n;return c.then(u,u),c.then(p.resolve,p.reject),p.promise};return a}function jZ(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>Zx.setTimeout(()=>i.reject(s),n),i.promise=r,i}function UZ(e,t){let r,i=new AbortController;const n=e(i.signal);let s={promise:n,finished:!1,abort:()=>{i&&(i.abort(),i=null)}};const o=()=>{s&&(s.finished=!0,s=null),de(r)&&(r.remove(),r=null),i=null};return n.then(o,o),r=Ka(t,()=>{de(s)&&s.abort()}),s}async function Dj(e){await Promise.resolve(),ui(e)}function jst(e){return e}class Fde{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class jde{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let Xk=0;const Qb={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},eO=["prepare","preRender","render","postRender","update","finish"],tO=[],wg=new bf;class Ude{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const J5={frameTasks:wg,willDispatch:!1,clearFrameTasks:Vde,dispatch:zZ,executeFrameTasks:Bde};function sb(e){const t=new jde(e);return tO.push(t),J5.willDispatch||(J5.willDispatch=!0,H5(zZ)),t}function dv(e){const t=new Fde(e);return wg.push(t),Z5==null&&(Xk=performance.now(),Z5=requestAnimationFrame(VZ)),new Ude(t)}let Z5=null;function Vde(e=!1){wg.forAll(t=>{t.removed=!0}),e&&BZ()}function VZ(){const e=performance.now();Z5=null,Z5=wg.length>0?requestAnimationFrame(VZ):null,J5.executeFrameTasks(e)}function Bde(e){const t=e-Xk;Xk=e;const r=1e3/60,i=Math.max(0,t-r);for(let n=0;n<eO.length;n++){const s=performance.now(),o=eO[n];wg.forAll(a=>{a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(Qb.time=e,Qb.deltaTime=a.ticks===0?0:t,Qb.elapsedFrameTime=performance.now()-e,Qb.frameDuration=r-i,a.phases[o]?.call(a,Qb)))}),Gde[n].record(performance.now()-s)}BZ(),qde.record(performance.now()-e)}const y3=new bf;function BZ(){wg.forAll(e=>{e.removed&&y3.push(e)}),wg.removeUnorderedMany(y3.data,y3.length),y3.clear()}function zZ(){for(;tO.length;){const e=tO.shift();e.isActive&&e.callback()}J5.willDispatch=!1}function zde(e=1,t){const r=jZ(),i=()=>{Za(t)?r.reject(wi()):e===0?r():(--e,H5(()=>i()))};return i(),r.promise}const Gde=eO.map(e=>new z_(e)),qde=new z_("total");function Hde(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}let Wde=0;function G_(){return++Wde}class JT{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed;for(let i=0;i<r.length;++i)t.push(r[i].observe(this));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}let H1=!1;const K5=[];function GZ(e,t){let r=new JT(s),i=null,n=!1;function s(){if(!r||n)return;if(H1)return void WZ(s);const a=i;r.clear(),H1=!0,n=!0,i=Tp(r,e),n=!1,H1=!1,t(i,a),JZ()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=Tp(r,e),n=!1,{remove:o}}function qZ(e,t){let r=new JT(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Tp(r,e),i):null}return o(),{remove:s}}function HZ(e){let t=new JT(i),r=!1;function i(){t&&!r&&(H1?WZ(i):(t.clear(),H1=!0,r=!0,Tp(t,e),r=!1,H1=!1,JZ()))}function n(){t&&(t.destroy(),t=null)}return r=!0,Tp(t,e),r=!1,{remove:n}}function WZ(e){K5.includes(e)||K5.unshift(e)}function JZ(){for(;K5.length;)K5.pop()()}var q_;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(q_||(q_={}));class F2{constructor(){this.uid=G_(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(q_.Untracked,t,r,i,n,s,HL)}static acquireTracked(t,r,i,n){return this.pool.acquire(q_.Tracked,t,r,i,null,null,n)}notify(t,r){this.type===q_.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,i,n,s,o,a){this.uid=G_(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=G_(),this.removed=!0}}F2.pool=new LZ(F2);const aM=new fo,bp=new Set;let Y5;function Q5(e){bp.delete(e),bp.add(e),Y5||(Y5=sb(Kde))}function Jde(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Zde(e){for(const t of bp.values())t.target===e&&(t.removed=!0)}function Kde(){let e=10;for(;Y5&&e--;){Y5=null;const t=Yde(),r=aM.acquire();for(const i of t){const n=i.uid;Jde(i),n===i.uid&&i.removed&&r.push(i)}for(const i of bp)i.removed&&(r.push(i),bp.delete(i));for(const i of r)F2.pool.release(i);aM.release(r),aM.release(t),rO.forEach(i=>i())}}function Yde(){const e=aM.acquire();e.length=bp.size;let t=0;for(const r of bp)e[t]=r,++t;return bp.clear(),e}const rO=new Set;function Qde(e){return rO.add(e),{remove(){rO.delete(e)}}}function Xde(e,t,r){let i=xZ(e,t,r,(n,s,o)=>{let a,l,u=qZ(()=>Wx(n,s),(c,p)=>{n.__accessor__.destroyed||a&&a.uid!==l?i.remove():(a||(a=F2.acquireUntracked(c,o,p,n,s),l=a.uid),Q5(a))});return{remove:SZ(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,Q5(a)),a=null),i=u=null})}});return i}function efe(e,t,r){const i=xZ(e,t,r,(n,s,o)=>{let a=!1;return GZ(()=>Wx(n,s),(l,u)=>{n.__accessor__.destroyed?i.remove():a||(a=!0,HL(u,l)||o.call(n,l,u,s,n),a=!1)})});return i}function tfe(e,t,r,i=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?efe(e,t,r):Xde(e,t,r)}function rfe(e,t,r){let i,n,s=qZ(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=F2.acquireTracked(o,t,a,r),n=i.uid),Q5(i))});return{remove:SZ(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,Q5(i)),i=null),s=null})}}function ife(e,t,r){let i=!1;return GZ(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function nfe(e,t,r=!1,i=ade){return r?ife(e,t,i):rfe(e,t,i)}function Fj(e){return Hde(bp,t=>t.oldValue===e)}function ZT(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function ZZ(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}const W1=ot.getLogger("esri.core.Accessor");function sfe(e){return e==null?e:new Date(e)}function ofe(e){return e==null?e:!!e}function Kx(e){return e==null?e:e.toString()}function Da(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function KT(e){return e==null?e:Math.round(parseFloat(e))}function KZ(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function X5(e,t){return t!=null&&e&&!(t instanceof e)}function YZ(e){return e&&"isCollection"in e}function jj(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function afe(e,t){if(!t||!t.constructor||!YZ(t.constructor))return iO(e,t)?t:new e(t);const r=jj(e.prototype.itemType),i=jj(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(iO(e,t),t):new e(t):t}function iO(e,t){return!!KZ(t)&&(W1.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+YT(e)+"'"),!0)}function Tl(e,t){return t==null?t:YZ(e)?afe(e,t):X5(e,t)?iO(e,t)?t:new e(t):t}function YT(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const lfe=new WeakMap;function ufe(e){switch(e){case Number:return Da;case fr:return KT;case Boolean:return ofe;case String:return Kx;case Date:return sfe;default:return ZZ(lfe,e,()=>Tl.bind(null,e))}}function Bi(e,t){const r=ufe(e);return arguments.length===1?r:r(t)}function j2(e,t,r){return arguments.length===1?j2.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function cfe(e,t){return arguments.length===1?j2(Bi.bind(null,e)):j2(Bi.bind(null,e),t)}function QZ(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>QZ(e,t-1,i)):e(r)}function eI(e,t,r){if(arguments.length===2)return eI.bind(null,e,t);if(!r)return r;let i=t,n=r=QZ(e,t,r);for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function hfe(e,t,r){return arguments.length===2?eI(Bi.bind(null,e),t):eI(Bi.bind(null,e),t,r)}function XZ(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function nO(e,t){if(arguments.length===2)return nO(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,c=u==="string"||u==="number";return c&&(r.has(a)||n.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&n.some(p=>!X5(a,p))?a:(c&&i.length?(s||(s=i.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),W1.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(p=>YT(p)).join(", ")),W1.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):W1.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function oh(e,t){if(arguments.length===2)return oh(e).call(null,t);const r={},i=[],n=[];for(const l in e.typeMap){const u=e.typeMap[l];r[l]=Bi(u),i.push(YT(u)),n.push(l)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!X5(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,c=r[u];if(!c)return W1.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!X5(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!KZ(l)){const p={};for(const d in l)d!==e.key&&(p[d]=l[d]);return c(p)}return c(l)}}class fr{}const Xb={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function pfe(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function eK(e){switch(e.type){case"native":return Bi(e.value);case"array":return j2(eK(e.value));case"one-of":return dfe(e);default:return null}}function dfe(e){let t=null;return(r,i)=>oO(r,e)?r:(t==null&&(t=sO(e)),W1.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function sO(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case fr:return"integer";case Date:return"date";default:return YT(e.value)}case"array":return`array of ${sO(e.value)}`;case"one-of":{const t=e.values.map(r=>sO(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function oO(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case fr:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!oO(r,t.value));case"one-of":return t.values.some(r=>oO(e,r))}}function f(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=zT(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&ot.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let c;n.dependsOn=[l],n.get=function(){let p=z5(this,l);if(typeof p=="function"){c||(c=l.split(".").slice(0,-1).join("."));const d=z5(this,c);d&&(p=p.bind(d))}return p},n.readOnly||(n.set=u?function(p){p!==void 0?this._override(r,p):this._clearOverride(r)}:function(p){q5(this,l,p)})}const o=e.type,a=e.types;n.cast||(o?n.cast=ffe(o):a&&(Array.isArray(a)?n.cast=j2(oh(a[0])):n.cast=oh(a))),e.range&&(n.cast=rK(n.cast,e.range)),fde(n,e)}}function tK(e,t,r){const i=zT(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function ffe(e){let t=0,r=e;if(pfe(e))return eK(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(XZ(i))return t===0?nO(i):eI(nO(i),t);if(t===1)return cfe(i);if(t>1)return hfe(i,t);const n=e;return n.from?n.from:Bi(n)}function rK(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function mfe(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}class zs extends GT{constructor(t,r,i){if(super(t,r,i),!(this instanceof zs))return new zs(t,r,i)}}zs.prototype.type="warning";function iK(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const aO=ot.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Uj(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||vfe(e)&&ra("read.reader",ob(e),t))}function ob(e){const t=e.ndimArray??0;if(t>1)return gfe(e);if(t===1)return Vj(e);if("type"in e&&sK(e.type)){const r=e.type.prototype?.itemType?.Type,i=Vj(typeof r=="function"?{type:r}:{types:r});return(n,s,o)=>{const a=i(n,s,o);return a&&new e.type(a)}}return QL(e)}function QL(e){return"type"in e?yfe(e.type):bfe(e.types)}function yfe(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void aO.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function nK(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>nK(e,n,r,i-1)):e(t,void 0,r)}function gfe(e){const t=QL(e),r=nK.bind(null,t),i=e.ndimArray??0;return(n,s,o)=>{if(n==null)return n;n=r(n,o,i);let a=i,l=n;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)n=[n];return n}}function Vj(e){const t=QL(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function sK(e){if(!iK(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?XL(t.Type):oK(t.Type))}function vfe(e){return"types"in e?oK(e.types):XL(e.type)}function XL(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||sK(e))}function oK(e){for(const t in e.typeMap)if(!XL(e.typeMap[t]))return!1;return!0}function bfe(e){let t=null;const r=e.errorContext??"type";return(i,n,s)=>{if(i==null)return i;const o=typeof i;if(o!=="object")return void aO.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);t||(t=wfe(e));const a=e.key;if(typeof a!="string")return;const l=i[a],u=l?t[l]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const p=`Type '${l||"unknown"}' is not supported`;return s&&s.messages&&i&&s.messages.push(new zs(`${r}:unsupported`,p,{definition:i,context:s})),void aO.error(p)}const c=new u;return c.read(i,s),c}}function wfe(e){const t={};for(const r in e.typeMap){const i=e.typeMap[r],n=Jx(i.prototype);if(typeof e.key=="function")continue;const s=n.properties[e.key];if(!s)continue;s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"&&(t[s.json.type[0]]=i);const o=s.json?.write;if(!o||!o.writer){t[r]=i;continue}const a=o.target,l=typeof a=="string"?a:e.key,u={};o.writer(r,u,l),u[l]&&(t[u[l]]=i)}return t}function _fe(e){if(e.json||(e.json={}),zj(e.json),Gj(e.json),Bj(e.json),e.json.origins)for(const t in e.json.origins)zj(e.json.origins[t]),Gj(e.json.origins[t]),Bj(e.json.origins[t]);return!0}function Bj(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function zj(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function Gj(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const xfe=ot.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function qj(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;e&&(r===1||"type"in e&&iK(e.type))?t.write.writer=Mfe:r>1?t.write.writer=Ife(r):t.types?Array.isArray(t.types)?t.write.writer=Efe(t.types[0]):t.write.writer=Sfe(t.types):t.write.writer=U2}function Sfe(e){return(t,r,i,n)=>t?aK(t,e,n)?U2(t,r,i,n):void 0:U2(t,r,i,n)}function aK(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r?.messages){const i=t.errorContext??"type",n=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new $e(`${i}:unsupported`,n,{definition:e,context:r})),xfe.error(n)}return!1}function Efe(e){return(t,r,i,n)=>!t||!Array.isArray(t)?U2(t,r,i,n):U2(t.filter(s=>aK(s,e,n)),r,i,n)}function U2(e,t,r,i){ra(r,tI(e,i),t)}function tI(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?rI(e):e}function rI(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Mfe(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>tI(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[tI(e,i)],ra(r,n,t)}function lK(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>lK(i,t,r-1)):tI(e,t)}function Ife(e){return(t,r,i,n)=>{let s;if(t===null)s=null;else{s=lK(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}ra(i,s,r)}}function lO(e,t){return eN(e,"read",t)}function uK(e,t){return eN(e,"write",t)}function eN(e,t,r){let i=e&&e.json;if(e&&e.json&&e.json.origins&&r){const n=e.json.origins[r.origin];n&&(t==="any"||t in n)&&(i=n)}return i}function Tfe(e){const t=Afe(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],n=i.types?$fe(i):t;Uj(n,i,!1),i.types&&!i.write&&e.json.write&&e.json.write.enabled&&(i.write={...e.json.write}),qj(n,i)}Uj(t,e.json,!0),qj(t,e.json)}function Afe(e){return e.json.types?uO(e.json):e.type?cK(e):uO(e)}function $fe(e){return e.type?cK(e):uO(e)}function cK(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!XZ(r);)r=r[0],t++;return{type:r,ndimArray:t}}function uO(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Cfe(e){_fe(e)&&(mfe(e),Tfe(e))}const y$=new Set,g$=new Set;function me(e){return t=>{t.prototype.declaredClass=e,Ofe(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!y$.has(n.initialize)&&(y$.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!g$.has(n.destroy)&&(g$.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);y$.clear(),g$.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0;for(let u=0;u<i.length;u++)i[u].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=Jx(t.prototype),s.prototype.declaredClass=e,s}}function kfe(e,t){return t.get==null?function(){const r=this.__accessor__.properties.get(e);if(r===void 0)return;ir(r);const i=this.__accessor__.store;return i.has(e)?i.get(e):r.metadata.value}:function(){const r=this.__accessor__.properties.get(e);if(r!==void 0)return r.getComputed()}}function Ofe(e){const t=e.prototype,r=Jx(t).properties,i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];Cfe(s),i[n]={enumerable:!0,configurable:!0,get:kfe(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===Hc.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}var hK;function Rfe(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const jw=Symbol("Accessor-Handles");class kt{constructor(...t){if(this[hK]=null,this.constructor===kt)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Sde(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}Jx(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const c=this.inherited;let p;this.inherited=function(...d){if(s.prototype[a])return s.prototype[a].apply(this,d)};try{p=l.apply(this,u)}catch(d){throw this.inherited=c,d}return this.inherited=c,p}:t[a]}for(const a in r){const l=Rfe(r[a]);f(l)(o.prototype,a)}return me(i)(o)}postscript(t){const r=this.__accessor__,i=r.ctorArgs||t;r.initialize(),i&&(this.set(i),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(qc(this[jw],t=>{t.forEach(r=>r.remove())}),this[jw]=null,Zde(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===Hc.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return z5(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return q5(this,t,r),this}watch(t,r,i){return tfe(this,t,r,i)}own(t){let r=this[jw];if(Ne(r)&&(r=this[jw]=new Set),Wk(t))for(const i of t)r.add(i);else r.add(t)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}hK=jw;class J1{constructor(){this._emitter=new J1.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this.target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return BT(a)}if(n.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=h([me("esri.core.Evented")],n),n};let r=class extends kt{constructor(){super(...arguments),this._emitter=new J1.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=h([me("esri.core.Evented")],r),e.EventedAccessor=r})(J1||(J1={}));const im=J1;var Ur;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Ur||(Ur={}));function tN(e){return(t,r)=>{t[r]=e}}class pK{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new PZ(this._observers,t)}notify(){const t=this._observers.slice();for(let r=0;r<t.length;++r){const i=t[r];i.onInvalidated(),i.onCommitted()}}}var lp;class Pfe{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const ol=new zu(Pfe,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Lfe=()=>{};function v$(e){return e?e instanceof xy?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function b$(e){if(e&&e.length)return e[0]}function Nfe(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function dK(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),dK(e,r.call(i,n,s,o),r,i)})}const Qp=new Set,Xp=new Set,ed=new Set,w$=new Map;let Dfe=0,xy=lp=class extends im.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new pK,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Dfe++})}static isCollection(e){return e!=null&&e instanceof lp}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof lp?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return ir(this._observable),this._items}set items(e){this._emitBeforeChanges(Ur.ADD)||(this._splice(0,this.length,v$(e)),this._emitAfterChanges(Ur.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Lfe,i.removed=!0,r.splice(r.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(ir(this._observable),this._emitBeforeChanges(Ur.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(Ur.ADD),this}addMany(e,t=this._items.length){if(ir(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(Ur.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,v$(e)),this._emitAfterChanges(Ur.ADD),this}at(e){if(ir(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ir(this._observable),!this.length||this._emitBeforeChanges(Ur.REMOVE))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(Ur.REMOVE),e}clone(){return ir(this._observable),this._createNewInstance({items:this._items.map(Pe)})}concat(...e){ir(this._observable);const t=e.map(v$);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ir(this._observable),!this.length||this._emitBeforeChanges(Ur.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(Ur.REMOVE)}every(e,t){return ir(this._observable),this._items.every(e,t)}filter(e,t){let r;return ir(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return ir(this._observable),this._items.find(e,t)}findIndex(e,t){return ir(this._observable),this._items.findIndex(e,t)}flatten(e,t){ir(this._observable);const r=[];return dK(r,this,e,t),new lp(r)}forEach(e,t){return ir(this._observable),this._items.forEach(e,t)}getItemAt(e){return ir(this._observable),this._items[e]}getNextIndex(e){ir(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ir(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ir(this._observable),this._items.indexOf(e,t)}join(e=","){return ir(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ir(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ir(this._observable);const r=this._items.map(e,t);return new lp({items:r})}reorder(e,t=this.length-1){ir(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(Ur.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(Ur.MOVE)}return e}}pop(){if(ir(this._observable),!this.length||this._emitBeforeChanges(Ur.REMOVE))return;const e=b$(this._splice(this.length-1,1));return this._emitAfterChanges(Ur.REMOVE),e}push(...e){return ir(this._observable),this._emitBeforeChanges(Ur.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Ur.ADD)),this.length}reduce(e,t){ir(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){ir(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return ir(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ir(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Ur.REMOVE))return;const t=b$(this._splice(e,1));return this._emitAfterChanges(Ur.REMOVE),t}removeMany(e){if(ir(this._observable),!e||!e.length||this._emitBeforeChanges(Ur.REMOVE))return[];const t=e instanceof lp?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+Nfe(t,r,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&i.push.apply(i,u),s+=l-1}}return this._emitAfterChanges(Ur.REMOVE),i}reverse(){if(ir(this._observable),this._emitBeforeChanges(Ur.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Ur.MOVE),this}shift(){if(ir(this._observable),!this.length||this._emitBeforeChanges(Ur.REMOVE))return;const e=b$(this._splice(0,1));return this._emitAfterChanges(Ur.REMOVE),e}slice(e=0,t=this.length){return ir(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ir(this._observable),this._items.some(e,t)}sort(e){if(ir(this._observable),!this.length||this._emitBeforeChanges(Ur.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Ur.MOVE),this}splice(e,t,...r){ir(this._observable);const i=(t?Ur.REMOVE:0)|(r.length?Ur.ADD:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return ir(this._observable),this._items.slice()}toJSON(){return ir(this._observable),this.toArray()}toLocaleString(){return ir(this._observable),this._items.toLocaleString()}toString(){return ir(this._observable),this._items.toString()}unshift(...e){return ir(this._observable),!e.length||this._emitBeforeChanges(Ur.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Ur.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=sb(()=>this._dispatchChange())),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=ol.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,s),e+=1,l-=1,u-=1);ol.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=ol.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);ol.release(a)}}if(r&&r.length){if(n){const c=[];for(const p of r){const d=n.ensureType(p);d==null&&p!=null||c.push(d)}r=c}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const c=ol.acquire();c.target=this,c.cancellable=!0;const p=ol.acquire();p.target=this,p.cancellable=!1;for(const d of r)a?(c.reset(d),this.emit("before-add",c),c.defaultPrevented||(u?i.push(d):i.splice(e++,0,d),this._set("length",i.length),l&&(p.reset(d),this.emit("after-add",p)))):(u?i.push(d):i.splice(e++,0,d),this._set("length",i.length),p.reset(d),this.emit("after-add",p));ol.release(p),ol.release(c)}else{if(u)for(const c of r)i.push(c);else i.splice(e,0,...r);this._set("length",i.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=ol.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,ol.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=ol.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),ol.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Qp.clear(),Xp.clear(),ed.clear();for(const{added:l,removed:u}of r){if(l)if(ed.size===0&&Xp.size===0)for(const c of l)Qp.add(c);else for(const c of l)Xp.has(c)?(ed.add(c),Xp.delete(c)):ed.has(c)||Qp.add(c);if(u)if(ed.size===0&&Qp.size===0)for(const c of u)Xp.add(c);else for(const c of u)Qp.has(c)?Qp.delete(c):(ed.delete(c),Xp.add(c))}const i=fo.acquire();Qp.forEach(l=>{i.push(l)});const n=fo.acquire();Xp.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=fo.acquire();if(ed.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||n.length||a.length)){const l={target:this,added:i,removed:n,moved:a},u=t.listeners.length;for(let c=0;c<u;c++){const p=t.listeners[c];p.removed||p.callback.call(this,l)}}fo.release(i),fo.release(n),fo.release(a)}Qp.clear(),Xp.clear(),ed.clear()}};xy.ofType=e=>{if(!e)return lp;if(w$.has(e))return w$.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends lp{};return h([tN({Type:e,ensureType:typeof e=="function"?Bi(e):oh(e)})],r.prototype,"itemType",void 0),r=h([me(`esri.core.Collection<${t}>`)],r),w$.set(e,r),r},h([f()],xy.prototype,"length",void 0),h([f()],xy.prototype,"items",null),xy=lp=h([me("esri.core.Collection")],xy);const Lt=xy;function _g(e,t,r=Lt){return t||(t=new r),t===e||(t.removeAll(),Ffe(e)?t.addMany(e):e&&t.add(e)),t}function fK(e){return e}function Ffe(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}class rN{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new rN;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,Pe(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||i?.origin===r?i?.value:void 0}originOf(t){return this._values.get(t)?.origin??bt.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>this._values.get(i)?.origin===t)}set(t,r,i){if((i=this._normalizeOrigin(i))===bt.DEFAULTS){const n=this._values.get(t);if(n&&n.origin!=null&&n.origin>i)return}this._values.set(t,new jfe(r,i))}delete(t,r){(r=this._normalizeOrigin(r))!=null&&this._values.get(t)?.origin!==r||this._values.delete(t)}has(t,r){return(r=this._normalizeOrigin(r))!=null?this._values.get(t)?.origin===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===bt.DEFAULTS?t:bt.USER}}class jfe{constructor(t,r){this.value=t,this.origin=r}}function mK(e,t,r){t.keys().forEach(n=>{r.set(n,t.get(n),bt.DEFAULTS)});const i=e.metadatas;Object.keys(i).forEach(n=>{e.internalGet(n)&&r.set(n,e.internalGet(n),bt.DEFAULTS)})}function Ufe(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&Tj(i,r))return!0}else for(const n of i)if(n===t||n.includes(".")&&n.indexOf(t)===0&&Tj(n,r))return!0;return!1}function Vfe(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Bfe(e,t,r,i,n){let s=lO(t[r],n);Vfe(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=lO(t[o],n),Ufe(s,r,i)&&(e[o]=!0)}function zfe(e,t,r,i){const n=r.metadatas,s=eN(n[t],"any",i),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const yK={origin:"service"};function gK(e,t,r=yK){if(!t||typeof t!="object")return;const i=Mn(e),n=i.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))Bfe(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=lO(n[o],r).read,l=a&&a.source;let u;u=l&&typeof l=="string"?Wx(t,l):t[o],a&&a.reader&&(u=a.reader.call(e,u,t,r)),u!==void 0&&i.set(o,u)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(n))s[o]||zfe(e,o,i,r)}i.setDefaultOrigin("user")}function Gfe(e,t,r,i=yK){const n={...i,messages:[]};r(n),n.messages?.forEach(s=>{s.type!=="warning"||e.loaded?i&&i.messages&&i.messages.push(s):e.loadWarnings.push(s)})}const qfe=ot.getLogger("esri.core.accessorSupport.write");function Hfe(e,t,r,i,n){const s={};return t.write?.writer?.call(e,i,s,r,n),s}function vK(e,t,r,i,n,s){if(!i||!i.write)return!1;const o=e.get(r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new $e("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&qfe.error(a.name,a.message),!1}return!(o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||(!t.store.multipleOriginsSupported||t.store.originOf(r)===bt.DEFAULTS)&&Wfe(e,r,s,i,o)||!n.ignoreOrigin&&s&&s.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<zo(s.origin))}function Wfe(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r);return GL(o,n)}return!1}return s===n}function bK(e,t,r,i){const n=Mn(e),s=n.metadatas,o=uK(s[t],i);return!!o&&vK(e,n,t,o,r,i)}function wK(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return nM(t,e.toJSON(r));const i=Mn(e),n=i.metadatas;for(const s in n){const o=uK(n[s],r);if(!vK(e,i,s,o,void 0,r))continue;const a=e.get(s),l=Hfe(e,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,r);Object.keys(l).length>0&&(t=nM(t,l),r?.resources?.pendingOperations?.length&&Promise.all(r.resources.pendingOperations).then(()=>nM(t,l)),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:s,oldOrigin:vde(i.store.originOf(s)),newOrigin:r.origin}))}return t}const Yx=e=>{let t=class extends e{constructor(...r){super(...r);const i=Mn(this),n=i.store,s=new rN;i.store=s,mK(i,n,s)}read(r,i){gK(this,r,i)}write(r={},i){return wK(this,r,i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Jfe.call(this,r,i)}};return t=h([me("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Jfe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let Je=class extends Yx(kt){};Je=h([me("esri.core.JSONSupport")],Je);var Jd;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Jd||(Jd={}));class Zfe{constructor(t){this.instance=t,this._resolver=Ap(),this._status=Jd.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Jd.RESOLVED,this._cleanUp()},()=>{this._status=Jd.REJECTED,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Jd.RESOLVED}isRejected(){return this._status===Jd.REJECTED}isFulfilled(){return this._status!==Jd.PENDING}abort(){this._resolver.reject(wi())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=Ap(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==i||Vn(n)||this._resolver.reject(n)}),t.resolve()}}const Qx=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new Zfe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return new Promise((n,s)=>{this._promiseProps.when(n,s)}).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=h([me("esri.core.Promise")],t),t};let iI=class extends Qx(kt){};iI=h([me("esri.core.Promise")],iI);const Kfe="not-loaded",Yfe="loading",Qfe="failed",Hj="loaded",_K=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=KL(s,l);this.destroyed&&l(new $e("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===Kfe){this._set("loadStatus",Yfe);const a=this._loadController=new AbortController;n({signal:a.signal}),Ka(a.signal,()=>{this._promiseProps.abort()})}return i(),o}})),this.when(()=>{this._set("loadStatus",Hj),this._loadController=null},i=>{this._set("loadStatus",Qfe),this._set("loadError",i),this._loadController=null})}get loaded(){return this.loadStatus===Hj}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new $e("load:cancelled","Cancelled")),this._loadController?.abort()),this}};return h([f({readOnly:!0})],t.prototype,"loaded",null),h([f({readOnly:!0})],t.prototype,"loadError",void 0),h([f({clonable:!1})],t.prototype,"loadStatus",void 0),h([f({type:[zs],readOnly:!0})],t.prototype,"loadWarnings",null),t=h([me("esri.core.Loadable")],t),t};let Uw=class extends _K(iI){};Uw=h([me("esri.core.Loadable")],Uw),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=_K,e.isLoadable=t}(Uw||(Uw={}));const Ya=Uw;function Xfe(e,t,r){return ia(e.map((i,n)=>t.apply(r,[i,n])))}async function eme(e,t,r){return(await ia(e.map((i,n)=>t.apply(r,[i,n])))).map(i=>i.value)}async function QT(e){if(Ne(e))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await e}}catch(t){return{ok:!1,error:t}}}async function Ust(e){try{return{ok:!0,value:await e}}catch(t){return Fp(t),{ok:!1,error:t}}}async function iN(e,t){return await e.load(),tme(e,t)}async function tme(e,t){const r=[],i=(...s)=>{for(const o of s)Ne(o)||(Array.isArray(o)?i(...o):Lt.isCollection(o)?o.forEach(a=>i(a)):Ya.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await eme(r,async s=>{(await QT(rme(s)?s.loadAll():s.load())).ok!==!1||n||(n=s)}),n)throw n.loadError;return e}function rme(e){return"loadAll"in e&&typeof e.loadAll=="function"}const ime=ot.getLogger("esri.core.urlUtils"),ab=_r.request,Wj="esri/config: esriConfig.request.proxyUrl is not set.",xK=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,SK=/^\s*http:/i,nme=/^\s*https:/i,sme=/^\s*file:/i,ome=/:\d+$/,ame=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,lme=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ume=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class Qc{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(lme);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(ume),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const g3={},cme=new Qc(_r.applicationUrl);let Ns=cme;const hme=pme();let nN=hme;const sN=()=>Ns,Vst=()=>nN;function pme(){const e=Ns.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ns.scheme}://${Ns.host}${Ns.port!=null?`:${Ns.port}`:""}`}${t}`}function fn(e){const t={path:null,query:null},r=new Qc(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=EK(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function EK(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function Jj(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function Df(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t&&t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>Jj(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):Jj(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function dme(e=!1){let t,r=ab.proxyUrl;if(typeof e=="string"){t=bme(e);const i=XT(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw ime.warn(Wj),new $e("urlutils:proxy-not-set",Wj);return t&&cO()&&(r=cN(r)),fn(r)}function Bst(e){const t=XT(e);let r,i;if(t){const n=oN(t.proxyUrl);r=n.path,i=n.query?EK(n.query):null}if(r){const n=fn(e);e=r+"?"+n.path;const s=Df({...i,...n.query});s&&(e=`${e}?${s}`)}return e}const ew={path:"",query:""};function oN(e){const t=e.indexOf("?");return t!==-1?(ew.path=e.slice(0,t),ew.query=e.slice(t+1)):(ew.path=e,ew.query=null),ew}function MK(e){return e=(e=nI(e=Mme(e=oN(e).path),!0)).toLowerCase()}function fme(e){const t={proxyUrl:e.proxyUrl,urlPrefix:MK(e.urlPrefix)},r=ab.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function XT(e){const t=ab.proxyRules,r=MK(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function IK(e,t){return e=Zj(e),t=Zj(t),nI(e)===nI(t)}function Zj(e){const t=(e=Va(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function TK(e){const t=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i),r=ab.interceptors;if(r){for(const i of r)if(Array.isArray(i.urls)){if(i.urls.some(t))return i}else if(t(i.urls))return i}return null}function V2(e,t,r=!1){const i=pO(e),n=pO(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function aN(e){if(typeof e=="string"){if(!Ba(e))return!0;e=pO(e)}if(V2(e,Ns))return!0;const t=ab.trustedServers||[];for(let r=0;r<t.length;r++){const i=mme(t[r]);for(let n=0;n<i.length;n++)if(V2(e,i[n]))return!0}return!1}function mme(e){return g3[e]||(uN(e)||qu(e)?g3[e]=[new Qc(Ol(e))]:g3[e]=[new Qc(`http://${e}`),new Qc(`https://${e}`)]),g3[e]}function Ol(e,t=nN,r){return qu(e)?r&&r.preserveProtocolRelative?e:Ns.scheme==="http"&&Ns.authority===Du(e).slice(2)?`http:${e}`:`https:${e}`:uN(e)?e:xg(e[0]==="/"?Sme(t):t,e)}function lN(e,t=nN,r){if(!Ba(e))return e;const i=Va(e),n=i.toLowerCase(),s=Va(t).toLowerCase().replace(/\/+$/,""),o=r?Va(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(p,d,m)=>(m=p.indexOf(d,m))===-1?p.length:m;let l=a(n,"/",n.indexOf("//")+2),u=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==n.length);)l=a(n,"/",l+1);if(u===-1||o&&u<o.length)return e;e=i.slice(u);const c=s.slice(u-1).replace(/[^/]+/g,"").length;if(c>0)for(let p=0;p<c;p++)e=`../${e}`;else e=`./${e}`;return e}function Va(e){return e=Ame(e=Tme(e=Ime(e=Ol(e=e.trim()))))}function xg(...e){const t=e.filter(de);if(!t||!t.length)return;const r=[];if(Ba(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),_me(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function Du(e,t=!1){if(e4(e)||Wg(e))return null;let r=e.indexOf("://");if(r===-1&&qu(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=nI(e,!0)),e}function Ba(e){return qu(e)||uN(e)}function e4(e){return e!=null&&e.slice(0,5)==="blob:"}function Wg(e){return e.slice(0,5)==="data:"}function zst(e){const t=AK(e);if(!t||!t.isBase64)return null;const r=atob(t.data),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}function Gst(e){return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const yme=/^data:(.*?)(;base64)?,(.*)$/;function AK(e){const t=e.match(yme);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function $K(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function qst(e,t){gme(e,t)||vme(e,t)}function gme(e,t){if(!e)return!1;const r=document.createElement("a");if(!("download"in r))return!1;const i=URL.createObjectURL(e);return r.download=t,r.href=i,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),!0}function vme(e,t){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(e,t)}function qu(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function uN(e){return xK.test(e)}function bme(e){return nme.test(e)||Ns.scheme==="https"&&qu(e)}function wme(e){return SK.test(e)||Ns.scheme==="http"&&qu(e)}function _me(e){return sme.test(e)}function cN(e){return qu(e)?`https:${e}`:e.replace(SK,"https:")}function xme(){return Ns.scheme==="http"}function cO(){return Ns.scheme==="https"}function nI(e,t=!1){return qu(e)?e.slice(2):(e=e.replace(xK,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Sme(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Eme(e){let t=0;if(Ba(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function Hst(e,t){if(!e)return"";const r=fn(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!t?.length)return i;const n=new RegExp(`.(${t.join("|")})$`,"ig");return i.replace(n,"")}function Mme(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function CK(e){return e.replace(/\/+$/,"")}function Ime(e){if(/^https?:\/\//i.test(e)){const t=oN(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Tme(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ame(e){const t=ab.httpsDomains;if(!wme(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),ome.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return xme()&&i===Ns.authority&&!ame.test(e)||(cO()&&i===Ns.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||cO()&&!XT(e))&&(e=cN(e)),e}function hO(e,t,r){if(!(t&&r&&e&&Ba(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function pO(e){return typeof e=="string"?new Qc(Ol(e)):(e.scheme||(e.scheme=Ns.scheme),e)}function Wst(e){return Cme.test(e)}function kK(e,t){const r=fn(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function OK(e,t,r){const i=fn(e),n=i.query||{};return n[t]=String(r),`${i.path}?${Df(n)}`}function lM(e,t){const r=fn(e),i=r.query||{};for(const s in t)i[s]=t[s];const n=Df(i);return n?`${r.path}?${n}`:r.path}function Jst(e){if(Ne(e))return null;const t=e.match($me);return t?t[1]:null}const $me=/.*?\.([^\/]*)$/,Cme=/(^data:image\/svg|\.svg$)/i;function et(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of i){const u=tK(s,l,n);u.write&&typeof u.write=="object"||(u.write={}),r&&(u.write.target=r),u.write.writer=a[o]}}}var kl;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(kl||(kl={}));let w;const pe={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(w=2e3;w<=2045;w++)pe[w]=0;for(w=2056;w<=2065;w++)pe[w]=0;for(w=2067;w<=2135;w++)pe[w]=0;for(w=2137;w<=2154;w++)pe[w]=0;for(w=2161;w<=2170;w++)pe[w]=0;for(w=2172;w<=2193;w++)pe[w]=0;for(w=2195;w<=2198;w++)pe[w]=0;for(w=2200;w<=2203;w++)pe[w]=0;for(w=2205;w<=2217;w++)pe[w]=0;for(w=2222;w<=2224;w++)pe[w]=1;for(w=2225;w<=2250;w++)pe[w]=2;for(w=2251;w<=2253;w++)pe[w]=1;for(w=2257;w<=2264;w++)pe[w]=2;for(w=2274;w<=2279;w++)pe[w]=2;for(w=2280;w<=2282;w++)pe[w]=1;for(w=2283;w<=2289;w++)pe[w]=2;for(w=2290;w<=2292;w++)pe[w]=0;for(w=2308;w<=2313;w++)pe[w]=0;for(w=2315;w<=2491;w++)pe[w]=0;for(w=2494;w<=2866;w++)pe[w]=0;for(w=2867;w<=2869;w++)pe[w]=1;for(w=2870;w<=2888;w++)pe[w]=2;for(w=2891;w<=2895;w++)pe[w]=2;for(w=2896;w<=2898;w++)pe[w]=1;for(w=2902;w<=2908;w++)pe[w]=2;for(w=2915;w<=2920;w++)pe[w]=2;for(w=2921;w<=2923;w++)pe[w]=1;for(w=2924;w<=2930;w++)pe[w]=2;for(w=2931;w<=2962;w++)pe[w]=0;for(w=2964;w<=2968;w++)pe[w]=2;for(w=2969;w<=2973;w++)pe[w]=0;for(w=2975;w<=2991;w++)pe[w]=0;for(w=2995;w<=3051;w++)pe[w]=0;for(w=3054;w<=3079;w++)pe[w]=0;for(w=3081;w<=3088;w++)pe[w]=0;for(w=3092;w<=3101;w++)pe[w]=0;for(w=3106;w<=3138;w++)pe[w]=0;for(w=3146;w<=3151;w++)pe[w]=0;for(w=3153;w<=3166;w++)pe[w]=0;for(w=3168;w<=3172;w++)pe[w]=0;for(w=3174;w<=3203;w++)pe[w]=0;for(w=3294;w<=3358;w++)pe[w]=0;for(w=3367;w<=3403;w++)pe[w]=0;for(w=3408;w<=3416;w++)pe[w]=0;for(w=3417;w<=3438;w++)pe[w]=2;for(w=3441;w<=3446;w++)pe[w]=2;for(w=3447;w<=3450;w++)pe[w]=0;for(w=3451;w<=3459;w++)pe[w]=2;for(w=3460;w<=3478;w++)pe[w]=0;for(w=3554;w<=3559;w++)pe[w]=0;for(w=3560;w<=3570;w++)pe[w]=2;for(w=3571;w<=3581;w++)pe[w]=0;for(w=3594;w<=3597;w++)pe[w]=0;for(w=3601;w<=3604;w++)pe[w]=0;for(w=3637;w<=3639;w++)pe[w]=0;for(w=3665;w<=3667;w++)pe[w]=0;for(w=3693;w<=3695;w++)pe[w]=0;for(w=3701;w<=3727;w++)pe[w]=0;for(w=3728;w<=3739;w++)pe[w]=2;for(w=3740;w<=3751;w++)pe[w]=0;for(w=3753;w<=3760;w++)pe[w]=2;for(w=3761;w<=3773;w++)pe[w]=0;for(w=3775;w<=3777;w++)pe[w]=0;for(w=3779;w<=3781;w++)pe[w]=0;for(w=3783;w<=3785;w++)pe[w]=0;for(w=3788;w<=3791;w++)pe[w]=0;for(w=3797;w<=3802;w++)pe[w]=0;for(w=3814;w<=3816;w++)pe[w]=0;for(w=3825;w<=3829;w++)pe[w]=0;for(w=3832;w<=3841;w++)pe[w]=0;for(w=3844;w<=3852;w++)pe[w]=0;for(w=3873;w<=3885;w++)pe[w]=0;for(w=3890;w<=3893;w++)pe[w]=0;for(w=3907;w<=3912;w++)pe[w]=0;for(w=3942;w<=3950;w++)pe[w]=0;for(w=3968;w<=3970;w++)pe[w]=0;for(w=3973;w<=3976;w++)pe[w]=0;for(w=3986;w<=3989;w++)pe[w]=0;for(w=3994;w<=3997;w++)pe[w]=0;for(w=4048;w<=4051;w++)pe[w]=0;for(w=4056;w<=4063;w++)pe[w]=0;for(w=4093;w<=4096;w++)pe[w]=0;for(w=4390;w<=4398;w++)pe[w]=0;for(w=4399;w<=4413;w++)pe[w]=2;for(w=4418;w<=4433;w++)pe[w]=2;for(w=4455;w<=4457;w++)pe[w]=2;for(w=4484;w<=4489;w++)pe[w]=0;for(w=4491;w<=4554;w++)pe[w]=0;for(w=4568;w<=4589;w++)pe[w]=0;for(w=4652;w<=4656;w++)pe[w]=0;for(w=4766;w<=4800;w++)pe[w]=0;for(w=5014;w<=5016;w++)pe[w]=0;for(w=5069;w<=5072;w++)pe[w]=0;for(w=5105;w<=5130;w++)pe[w]=0;for(w=5173;w<=5188;w++)pe[w]=0;for(w=5253;w<=5259;w++)pe[w]=0;for(w=5269;w<=5275;w++)pe[w]=0;for(w=5292;w<=5311;w++)pe[w]=0;for(w=5329;w<=5331;w++)pe[w]=0;for(w=5343;w<=5349;w++)pe[w]=0;for(w=5355;w<=5357;w++)pe[w]=0;for(w=5387;w<=5389;w++)pe[w]=0;for(w=5459;w<=5463;w++)pe[w]=0;for(w=5479;w<=5482;w++)pe[w]=0;for(w=5518;w<=5520;w++)pe[w]=0;for(w=5530;w<=5539;w++)pe[w]=0;for(w=5550;w<=5552;w++)pe[w]=0;for(w=5562;w<=5583;w++)pe[w]=0;for(w=5623;w<=5625;w++)pe[w]=2;for(w=5631;w<=5639;w++)pe[w]=0;for(w=5649;w<=5653;w++)pe[w]=0;for(w=5663;w<=5680;w++)pe[w]=0;for(w=5682;w<=5685;w++)pe[w]=0;for(w=5875;w<=5877;w++)pe[w]=0;for(w=5896;w<=5899;w++)pe[w]=0;for(w=5921;w<=5940;w++)pe[w]=0;for(w=6050;w<=6125;w++)pe[w]=0;for(w=6244;w<=6275;w++)pe[w]=0;for(w=6328;w<=6348;w++)pe[w]=0;for(w=6350;w<=6356;w++)pe[w]=0;for(w=6366;w<=6372;w++)pe[w]=0;for(w=6381;w<=6387;w++)pe[w]=0;for(w=6393;w<=6404;w++)pe[w]=0;for(w=6480;w<=6483;w++)pe[w]=0;for(w=6511;w<=6514;w++)pe[w]=0;for(w=6579;w<=6581;w++)pe[w]=0;for(w=6619;w<=6624;w++)pe[w]=0;for(w=6625;w<=6627;w++)pe[w]=2;for(w=6628;w<=6632;w++)pe[w]=0;for(w=6634;w<=6637;w++)pe[w]=0;for(w=6669;w<=6692;w++)pe[w]=0;for(w=6707;w<=6709;w++)pe[w]=0;for(w=6720;w<=6723;w++)pe[w]=0;for(w=6732;w<=6738;w++)pe[w]=0;for(w=6931;w<=6933;w++)pe[w]=0;for(w=6956;w<=6959;w++)pe[w]=0;for(w=7005;w<=7007;w++)pe[w]=0;for(w=7057;w<=7070;w++)pe[w]=2;for(w=7074;w<=7082;w++)pe[w]=0;for(w=7109;w<=7118;w++)pe[w]=0;for(w=7119;w<=7127;w++)pe[w]=1;for(w=7374;w<=7376;w++)pe[w]=0;for(w=7528;w<=7586;w++)pe[w]=0;for(w=7587;w<=7645;w++)pe[w]=2;for(w=7692;w<=7696;w++)pe[w]=0;for(w=7755;w<=7787;w++)pe[w]=0;for(w=7791;w<=7795;w++)pe[w]=0;for(w=7799;w<=7801;w++)pe[w]=0;for(w=7803;w<=7805;w++)pe[w]=0;for(w=7825;w<=7831;w++)pe[w]=0;for(w=7845;w<=7859;w++)pe[w]=0;for(w=8013;w<=8032;w++)pe[w]=0;for(w=8065;w<=8068;w++)pe[w]=1;for(w=8518;w<=8529;w++)pe[w]=2;for(w=8533;w<=8536;w++)pe[w]=2;for(w=8538;w<=8540;w++)pe[w]=2;for(w=8677;w<=8679;w++)pe[w]=0;for(w=8836;w<=8840;w++)pe[w]=0;for(w=8857;w<=8859;w++)pe[w]=0;for(w=8908;w<=8910;w++)pe[w]=0;for(w=9154;w<=9159;w++)pe[w]=0;for(w=9205;w<=9218;w++)pe[w]=0;for(w=9271;w<=9273;w++)pe[w]=0;for(w=9295;w<=9297;w++)pe[w]=0;for(w=9356;w<=9360;w++)pe[w]=0;for(w=9404;w<=9407;w++)pe[w]=0;for(w=9476;w<=9482;w++)pe[w]=0;for(w=9487;w<=9494;w++)pe[w]=0;for(w=9697;w<=9699;w++)pe[w]=0;for(w=20002;w<=20032;w++)pe[w]=0;for(w=20062;w<=20092;w++)pe[w]=0;for(w=20135;w<=20138;w++)pe[w]=0;for(w=20248;w<=20258;w++)pe[w]=0;for(w=20348;w<=20358;w++)pe[w]=0;for(w=20436;w<=20440;w++)pe[w]=0;for(w=20822;w<=20824;w++)pe[w]=0;for(w=20904;w<=20932;w++)pe[w]=0;for(w=20934;w<=20936;w++)pe[w]=0;for(w=21004;w<=21032;w++)pe[w]=0;for(w=21035;w<=21037;w++)pe[w]=0;for(w=21095;w<=21097;w++)pe[w]=0;for(w=21148;w<=21150;w++)pe[w]=0;for(w=21207;w<=21264;w++)pe[w]=0;for(w=21307;w<=21364;w++)pe[w]=0;for(w=21413;w<=21423;w++)pe[w]=0;for(w=21453;w<=21463;w++)pe[w]=0;for(w=21473;w<=21483;w++)pe[w]=0;for(w=21780;w<=21782;w++)pe[w]=0;for(w=21891;w<=21894;w++)pe[w]=0;for(w=21896;w<=21899;w++)pe[w]=0;for(w=22171;w<=22177;w++)pe[w]=0;for(w=22181;w<=22187;w++)pe[w]=0;for(w=22191;w<=22197;w++)pe[w]=0;for(w=22234;w<=22236;w++)pe[w]=0;for(w=22521;w<=22525;w++)pe[w]=0;for(w=22991;w<=22994;w++)pe[w]=0;for(w=23028;w<=23038;w++)pe[w]=0;for(w=23830;w<=23853;w++)pe[w]=0;for(w=23866;w<=23872;w++)pe[w]=0;for(w=23877;w<=23884;w++)pe[w]=0;for(w=23886;w<=23894;w++)pe[w]=0;for(w=23946;w<=23948;w++)pe[w]=0;for(w=24311;w<=24313;w++)pe[w]=0;for(w=24342;w<=24347;w++)pe[w]=0;for(w=24370;w<=24374;w++)pe[w]=10;for(w=24375;w<=24381;w++)pe[w]=0;for(w=24718;w<=24721;w++)pe[w]=0;for(w=24817;w<=24821;w++)pe[w]=0;for(w=24877;w<=24882;w++)pe[w]=0;for(w=24891;w<=24893;w++)pe[w]=0;for(w=25391;w<=25395;w++)pe[w]=0;for(w=25828;w<=25838;w++)pe[w]=0;for(w=26191;w<=26195;w++)pe[w]=0;for(w=26391;w<=26393;w++)pe[w]=0;for(w=26701;w<=26722;w++)pe[w]=0;for(w=26729;w<=26799;w++)pe[w]=2;for(w=26801;w<=26803;w++)pe[w]=2;for(w=26811;w<=26813;w++)pe[w]=2;for(w=26847;w<=26870;w++)pe[w]=2;for(w=26891;w<=26899;w++)pe[w]=0;for(w=26901;w<=26923;w++)pe[w]=0;for(w=26929;w<=26946;w++)pe[w]=0;for(w=26948;w<=26998;w++)pe[w]=0;for(w=27037;w<=27040;w++)pe[w]=0;for(w=27205;w<=27232;w++)pe[w]=0;for(w=27258;w<=27260;w++)pe[w]=0;for(w=27391;w<=27398;w++)pe[w]=0;for(w=27561;w<=27564;w++)pe[w]=0;for(w=27571;w<=27574;w++)pe[w]=0;for(w=27581;w<=27584;w++)pe[w]=0;for(w=27591;w<=27594;w++)pe[w]=0;for(w=28191;w<=28193;w++)pe[w]=0;for(w=28348;w<=28358;w++)pe[w]=0;for(w=28402;w<=28432;w++)pe[w]=0;for(w=28462;w<=28492;w++)pe[w]=0;for(w=29118;w<=29122;w++)pe[w]=0;for(w=29168;w<=29172;w++)pe[w]=0;for(w=29177;w<=29185;w++)pe[w]=0;for(w=29187;w<=29195;w++)pe[w]=0;for(w=29900;w<=29903;w++)pe[w]=0;for(w=30161;w<=30179;w++)pe[w]=0;for(w=30491;w<=30494;w++)pe[w]=0;for(w=30729;w<=30732;w++)pe[w]=0;for(w=31251;w<=31259;w++)pe[w]=0;for(w=31265;w<=31268;w++)pe[w]=0;for(w=31275;w<=31279;w++)pe[w]=0;for(w=31281;w<=31297;w++)pe[w]=0;for(w=31461;w<=31469;w++)pe[w]=0;for(w=31491;w<=31495;w++)pe[w]=0;for(w=31917;w<=31922;w++)pe[w]=0;for(w=31965;w<=32e3;w++)pe[w]=0;for(w=32001;w<=32003;w++)pe[w]=2;for(w=32005;w<=32031;w++)pe[w]=2;for(w=32033;w<=32060;w++)pe[w]=2;for(w=32064;w<=32067;w++)pe[w]=2;for(w=32074;w<=32077;w++)pe[w]=2;for(w=32081;w<=32086;w++)pe[w]=0;for(w=32107;w<=32130;w++)pe[w]=0;for(w=32133;w<=32158;w++)pe[w]=0;for(w=32164;w<=32167;w++)pe[w]=2;for(w=32180;w<=32199;w++)pe[w]=0;for(w=32201;w<=32260;w++)pe[w]=0;for(w=32301;w<=32360;w++)pe[w]=0;for(w=32601;w<=32662;w++)pe[w]=0;for(w=32664;w<=32667;w++)pe[w]=2;for(w=32701;w<=32761;w++)pe[w]=0;for(w=53001;w<=53004;w++)pe[w]=0;for(w=53008;w<=53019;w++)pe[w]=0;for(w=53021;w<=53032;w++)pe[w]=0;for(w=53034;w<=53037;w++)pe[w]=0;for(w=53042;w<=53046;w++)pe[w]=0;for(w=53074;w<=53080;w++)pe[w]=0;for(w=54001;w<=54004;w++)pe[w]=0;for(w=54008;w<=54019;w++)pe[w]=0;for(w=54021;w<=54032;w++)pe[w]=0;for(w=54034;w<=54037;w++)pe[w]=0;for(w=54042;w<=54046;w++)pe[w]=0;for(w=54048;w<=54053;w++)pe[w]=0;for(w=54074;w<=54080;w++)pe[w]=0;for(w=54098;w<=54101;w++)pe[w]=0;for(w=102001;w<=102040;w++)pe[w]=0;for(w=102042;w<=102063;w++)pe[w]=0;for(w=102065;w<=102067;w++)pe[w]=0;for(w=102070;w<=102117;w++)pe[w]=0;for(w=102122;w<=102216;w++)pe[w]=0;for(w=102221;w<=102377;w++)pe[w]=0;for(w=102382;w<=102388;w++)pe[w]=0;for(w=102389;w<=102398;w++)pe[w]=2;for(w=102399;w<=102444;w++)pe[w]=0;for(w=102445;w<=102447;w++)pe[w]=2;for(w=102448;w<=102458;w++)pe[w]=0;for(w=102459;w<=102468;w++)pe[w]=2;for(w=102469;w<=102499;w++)pe[w]=0;for(w=102500;w<=102519;w++)pe[w]=1;for(w=102520;w<=102524;w++)pe[w]=0;for(w=102525;w<=102529;w++)pe[w]=2;for(w=102530;w<=102588;w++)pe[w]=0;for(w=102590;w<=102598;w++)pe[w]=0;for(w=102601;w<=102603;w++)pe[w]=0;for(w=102605;w<=102628;w++)pe[w]=0;for(w=102629;w<=102646;w++)pe[w]=2;for(w=102648;w<=102700;w++)pe[w]=2;for(w=102701;w<=102703;w++)pe[w]=0;for(w=102707;w<=102730;w++)pe[w]=2;for(w=102733;w<=102758;w++)pe[w]=2;for(w=102767;w<=102900;w++)pe[w]=0;for(w=102901;w<=102933;w++)pe[w]=2;for(w=102934;w<=102950;w++)pe[w]=13;for(w=102951;w<=102955;w++)pe[w]=0;for(w=102961;w<=102963;w++)pe[w]=0;for(w=102965;w<=102969;w++)pe[w]=0;for(w=102971;w<=102973;w++)pe[w]=0;for(w=102975;w<=102989;w++)pe[w]=0;for(w=102990;w<=102992;w++)pe[w]=1;for(w=102997;w<=103002;w++)pe[w]=0;for(w=103003;w<=103008;w++)pe[w]=2;for(w=103009;w<=103011;w++)pe[w]=0;for(w=103012;w<=103014;w++)pe[w]=2;for(w=103019;w<=103021;w++)pe[w]=0;for(w=103022;w<=103024;w++)pe[w]=2;for(w=103029;w<=103031;w++)pe[w]=0;for(w=103032;w<=103034;w++)pe[w]=2;for(w=103065;w<=103068;w++)pe[w]=0;for(w=103074;w<=103076;w++)pe[w]=0;for(w=103077;w<=103079;w++)pe[w]=1;for(w=103080;w<=103082;w++)pe[w]=0;for(w=103083;w<=103085;w++)pe[w]=2;for(w=103090;w<=103093;w++)pe[w]=0;for(w=103097;w<=103099;w++)pe[w]=0;for(w=103100;w<=103102;w++)pe[w]=2;for(w=103107;w<=103109;w++)pe[w]=0;for(w=103110;w<=103112;w++)pe[w]=2;for(w=103113;w<=103116;w++)pe[w]=0;for(w=103117;w<=103120;w++)pe[w]=2;for(w=103153;w<=103157;w++)pe[w]=0;for(w=103158;w<=103162;w++)pe[w]=2;for(w=103163;w<=103165;w++)pe[w]=0;for(w=103166;w<=103168;w++)pe[w]=1;for(w=103169;w<=103171;w++)pe[w]=2;for(w=103186;w<=103188;w++)pe[w]=0;for(w=103189;w<=103191;w++)pe[w]=2;for(w=103192;w<=103195;w++)pe[w]=0;for(w=103196;w<=103199;w++)pe[w]=2;for(w=103200;w<=103224;w++)pe[w]=0;for(w=103225;w<=103227;w++)pe[w]=1;for(w=103232;w<=103237;w++)pe[w]=0;for(w=103238;w<=103243;w++)pe[w]=2;for(w=103244;w<=103246;w++)pe[w]=0;for(w=103247;w<=103249;w++)pe[w]=2;for(w=103254;w<=103256;w++)pe[w]=0;for(w=103257;w<=103259;w++)pe[w]=2;for(w=103264;w<=103266;w++)pe[w]=0;for(w=103267;w<=103269;w++)pe[w]=2;for(w=103300;w<=103375;w++)pe[w]=0;for(w=103381;w<=103383;w++)pe[w]=0;for(w=103384;w<=103386;w++)pe[w]=1;for(w=103387;w<=103389;w++)pe[w]=0;for(w=103390;w<=103392;w++)pe[w]=2;for(w=103397;w<=103399;w++)pe[w]=0;for(w=103400;w<=103471;w++)pe[w]=2;for(w=103476;w<=103478;w++)pe[w]=0;for(w=103479;w<=103481;w++)pe[w]=2;for(w=103486;w<=103488;w++)pe[w]=0;for(w=103489;w<=103491;w++)pe[w]=2;for(w=103492;w<=103495;w++)pe[w]=0;for(w=103496;w<=103499;w++)pe[w]=2;for(w=103528;w<=103543;w++)pe[w]=0;for(w=103544;w<=103548;w++)pe[w]=2;for(w=103549;w<=103551;w++)pe[w]=0;for(w=103552;w<=103554;w++)pe[w]=1;for(w=103555;w<=103557;w++)pe[w]=2;for(w=103558;w<=103560;w++)pe[w]=0;for(w=103571;w<=103573;w++)pe[w]=0;for(w=103574;w<=103576;w++)pe[w]=2;for(w=103577;w<=103580;w++)pe[w]=0;for(w=103581;w<=103583;w++)pe[w]=2;for(w=103595;w<=103694;w++)pe[w]=0;for(w=103696;w<=103699;w++)pe[w]=0;for(w=103700;w<=103793;w++)pe[w]=2;for(w=103794;w<=103887;w++)pe[w]=0;for(w=103900;w<=103971;w++)pe[w]=2;const kme={102113:!0,102100:!0,3857:!0,3785:!0},Ome={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},Kj='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',v3=[-20037508342788905e-9,20037508342788905e-9],b3=[-20037508342787e-6,20037508342787e-6],RK={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:v3,origin:b3,dx:1e-5},102100:{wkTemplate:Kj,valid:v3,origin:b3,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:v3,origin:b3,dx:1e-5},3857:{wkTemplate:Kj,valid:v3,origin:b3,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Xn(e,t){return!Ne(e)&&!Ne(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Sg(e)&&Sg(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function za(e){return Gs(e)&&e.wkid&&RK[e.wkid]||null}function hN(e){return!!Gs(e)&&(e.wkid?pe[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Rme(e){return!(lb(e)||ub(e))}function B2(e){return Gs(e)&&e.wkid===4326}function Zst(e){return Gs(e)&&e.wkid===kl.CGCS2000}function Sg(e){return Gs(e)&&e.wkid!=null&&kme[e.wkid]===!0}function Pme(e){return Gs(e)&&e.wkid===32662}function pN(e){return e===kl.GCSMARS2000||e===kl.GCSMARS2000_SPHERE}function lb(e){return Gs(e)&&e.wkid!=null&&pN(e.wkid)}function dN(e){return e===kl.GCSMOON2000}function ub(e){return Gs(e)&&e.wkid!=null&&dN(e.wkid)}function Lme(e){return Gs(e)&&e.wkid!=null&&Ome[e.wkid]===!0}function Gs(e){return de(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Nme={wkid:4326,wkt:Gu(RK[4326].wkTemplate,{Central_Meridian:"0.0"})},Dme={wkid:102100,latestWkid:3857},Fme={wkid:32662};var vc;let Yr=vc=class extends Je{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return vc.WebMercator;if(e.wkid===4326)return vc.WGS84}const t=new vc;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return B2(this)}get isWebMercator(){return Sg(this)}get isGeographic(){return hN(this)}get isWrappable(){return Lme(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===vc.WGS84)return vc.WGS84;if(this===vc.WebMercator)return vc.WebMercator;const e=new vc;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Pe(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Xn(this,e)}toJSON(e){return this.write(void 0,e)}};Yr.GCS_NAD_1927=null,Yr.WGS84=null,Yr.WebMercator=null,Yr.PlateCarree=null,h([f({readOnly:!0})],Yr.prototype,"isWGS84",null),h([f({readOnly:!0})],Yr.prototype,"isWebMercator",null),h([f({readOnly:!0})],Yr.prototype,"isGeographic",null),h([f({readOnly:!0})],Yr.prototype,"isWrappable",null),h([f({type:fr,json:{write:!0}})],Yr.prototype,"latestWkid",void 0),h([f({type:fr,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],Yr.prototype,"wkid",void 0),h([f({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],Yr.prototype,"wkt",void 0),h([et("wkt"),et("web-scene","wkt")],Yr.prototype,"writeWkt",null),h([f({type:fr,json:{write:!0}})],Yr.prototype,"vcsWkid",void 0),h([f({type:fr,json:{write:!0}})],Yr.prototype,"latestVcsWkid",void 0),h([f()],Yr.prototype,"imageCoordinateSystem",void 0),Yr=vc=h([me("esri.geometry.SpatialReference")],Yr),Yr.prototype.toJSON.isDefaultToJSON=!0,Yr.GCS_NAD_1927=new Yr({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Yr.WGS84=new Yr(Nme),Yr.WebMercator=new Yr(Dme),Yr.PlateCarree=new Yr(Fme),Object.freeze&&(Object.freeze(Yr.GCS_NAD_1927),Object.freeze(Yr.WGS84),Object.freeze(Yr.WebMercator));const wt=Yr,PK="20220708",LK="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",NK="4.24",jme={async request(e,t){const{default:r}=await Be(()=>Promise.resolve().then(function(){return rye}),void 0),i=e.options,n=i.responseType;i.signal=t?.signal,i.responseType=n==="native"||n==="native-request-init"?"native-request-init":["blob","json","text"].includes(n)&&TK(e.url)?.after?n:"array-buffer";const s=await r(e.url,i),o={data:s.data,ssl:s.ssl};switch(s.requestOptions.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let cn;function Kst(e){cn=e}function Yst(e){const t=cn&&cn.findCredential(e);return t&&t.token?OK(e,"token",t.token):e}We("host-webworker")||(We("edge")||We("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const Ume=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function DK(e){const t=Du(e,!0);return t&&t.endsWith(".arcgis.com")&&!Ume.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function Vme(e,t,r=!1,i){return new Promise((n,s)=>{if(Za(i))return void s(Yj());let o=()=>{u(),s(new Error(`Unable to load ${t}`))},a=()=>{const c=e;u(),n(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",s(Yj())};const u=()=>{We("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,de(i)&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};de(i)&&i.addEventListener("abort",l),We("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function Yj(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}function Bme(e){_r.request.crossOriginNoCorsDomains||(_r.request.crossOriginNoCorsDomains={});const t=_r.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Du(r)]=0:(t[Du("http://"+r)]=0,t[Du("https://"+r)]=0)}function zme(e){const t=_r.request.crossOriginNoCorsDomains;if(t){let r=Du(e);if(r)return r=r.toLowerCase(),!V2(r,sN())&&t[r]<Date.now()-36e5}return!1}async function Gme(e){const t=_r.request.crossOriginNoCorsDomains;t&&(t[Du(e).toLowerCase()]=Date.now());const r=fn(e);e=r.path,r.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Mt(e,t){const r=Wg(e),i=e4(e);i||r||(e=Va(e));const n={url:e,requestOptions:{...t}};let s=TK(e);if(s){const u=await Qme(s,n);if(u!=null)return{data:u,getHeader:fN,requestOptions:n.requestOptions,url:n.url};s.after||s.error||(s=null)}if(e=n.url,(t=n.requestOptions).responseType==="image"){if(We("host-webworker")||We("host-node"))throw Ou("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),n)}else if(r)throw Ou("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),n);if(t.method==="head"){if(t.body)throw Ou("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),n);if(r||i)throw Ou("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),n)}if(await Zme(),sI)return sI.execute(e,t);const o=new AbortController;Ka(t,()=>o.abort());const a={controller:o,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:s,params:n,redoRequest:!1,useIdentity:xu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await eye(a);return s?.after?.(l),l}let sI;const xu=_r.request,FK="FormData"in globalThis,qme=[499,498,403,401],Hme=["COM_0056","COM_0057","SB_0008"],Wme=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],fN=()=>null,dO=Symbol();function Jme(e){const t=Du(e);t&&!Mt._corsServers.includes(t)&&Mt._corsServers.push(t)}function Qj(e){const t=Du(e);return!t||t.endsWith(".arcgis.com")||Mt._corsServers.includes(t)||aN(t)}function Ou(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:fN,ssl:!1};if(t instanceof $e)return t.details?(t.details=Pe(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(u=>i.headers.get(u)),a=i&&i.status,l=t.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=dO in t?t[dO]:t}return Vn(t)?wi():new $e(e,n,s)}async function Zme(){We("host-webworker")?sI||(sI=await Be(()=>import("./request.b7a6168a.js"),["assets/request.b7a6168a.js","assets/preload-helper.387dac8f.js"])):Mt._abortableFetch||(Mt._abortableFetch=globalThis.fetch.bind(globalThis))}async function fO(){cn||await Be(()=>import("./IdentityManager.5148a033.js"),["assets/IdentityManager.5148a033.js","assets/preload-helper.387dac8f.js"])}async function Kme(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null;if(FK&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(s=new FormData(n))),typeof n=="string"&&(o=n),e.fetchOptions={cache:r.cacheBust&&!Mt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:xu.priority,redirect:"follow",signal:i},(s||o)&&(e.fetchOptions.body=s||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||s?.get("token")),!e.hasToken&&_r.apiKey&&DK(t)&&(r.query||(r.query={}),r.query.token=_r.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!jK(t)&&!Za(i)){let a;r.authMode==="immediate"?(await fO(),a=await cn.getCredential(t,{signal:i}),e.credential=a):r.authMode==="no-prompt"?(await fO(),a=await cn.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=a):cn&&(a=cn.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function jK(e){return Wme.some(t=>t.test(e))}async function Yme(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions,n=e4(t)||Wg(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:xu.timeout;let a=!1;if(!n){e.useSSL&&(t=cN(t)),r.cacheBust&&i.cache==="default"&&(t=OK(t,"request.preventCache",Date.now()));let d={...r.query};e.credentialToken&&(d.token=e.credentialToken);let m=Df(d);We("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let b;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>xu.maxUrlLength;const v=r.useProxy||!!XT(t);if(v){const _=dme(t);b=_.path,!a&&b.length+1+g>xu.maxUrlLength&&(a=!0),_.query&&(d={..._.query,...d})}if(i.method==="HEAD"&&(a||v)){if(a)throw g>xu.maxUrlLength?Ou("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Ou("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(v)throw Ou("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=lM(t,d):(i.body=Df(d),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=lM(t,d),v&&(e.useProxy=!0,t=`${b}?${t}`),d.token&&FK&&i.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)&&i.body.set("token",d.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!V2(t,sN())){if(aN(t))e.withCredentials=!0;else if(cn){const _=cn.findServerInfo(t);_&&_.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include",zme(t)&&await Gme(a?lM(t,d):t))}let l,u,c=0,p=!1;o>0&&(c=setTimeout(()=>{p=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")u=i,u.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||Xme(r.headers)||!n&&!e.useProxy&&xu.proxyUrl&&!Qj(t)){if(l=await Mt._abortableFetch(t,i),e.useProxy||Jme(t),r.responseType==="native")u=l;else if(i.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=Xj(u,"application/xml");break;case"document":u=Xj(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const d=l.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(d)&&u[s==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}s==="image"&&u instanceof Blob&&(u=await eU(URL.createObjectURL(u),e,!0))}}else u=await l.text()}else u=await eU(t,e)}catch(d){if(d.name==="AbortError")throw p?new Error("Timeout exceeded"):wi("Request canceled");if(!(!l&&d instanceof TypeError&&xu.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||Qj(t))throw d;e.redoRequest=!0,fme({proxyUrl:xu.proxyUrl,urlPrefix:Du(t)})}finally{c&&clearTimeout(c)}return[l,u]}async function Qme(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=Ou("request:interceptor",n,t)}if((i instanceof Error||i instanceof $e)&&(r=Ou("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Xme(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function Xj(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function eye(e){let t,r;await Kme(e);try{do[t,r]=await Yme(e);while(!await tye(e,t,r))}catch(s){const o=Ou("request:server",s,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(o),o}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!aN(i)){const s=Du(i,!0);s&&xu.trustedServers.push(s)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Bme(r.authorizedCrossOriginNoCorsDomains)}const n=e.credential;if(n&&cn){const s=cn.findServerInfo(n.server);let o=s&&s.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=cn.findCredential(o,n.userId);a&&cn._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:r,getHeader:t?s=>t.headers.get(s):fN,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function tye(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s,o,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[dO]=r,n;r?.error&&(n=r.error),n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const l=i.authMode;if(s===403&&(o===4||n.message&&n.message.toLowerCase().includes("ssl")&&!n.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&qme.includes(s)&&!jK(e.params.url)&&(s!==403||!Hme.includes(a)&&(o==null||o===2&&e.credentialToken))){await fO();try{const u=await cn.getCredential(e.params.url,{error:Ou("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=u}}if(n)throw n;return!0}function eU(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.fetchPriority=xu.priority,n.src=e,Vme(n,e,r,i)}Mt._abortableFetch=null,Mt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var rye=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"}));function Ke(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(l=>{const u=tK(s,l,n);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],r&&(u.read.source=(u.read.source||[]).concat(r))})}}let bc=class extends Je{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=wt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof wt)return e;if(e!=null){const r=new wt;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};h([f()],bc.prototype,"type",void 0),h([f({readOnly:!0})],bc.prototype,"cache",null),h([f({readOnly:!0})],bc.prototype,"extent",null),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bc.prototype,"hasM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],bc.prototype,"hasZ",void 0),h([f({type:wt,json:{write:!0}})],bc.prototype,"spatialReference",void 0),h([Ke("spatialReference")],bc.prototype,"readSpatialReference",null),bc=h([me("esri.geometry.Geometry")],bc);const na=bc,iye=Object.prototype.toString;function nye(e){const t="__accessorMetadata__"in e?Bi(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return sye.apply(this,r)}}function sye(e,t,r,i){zT(e,t).cast=i}function oye(e){return(t,r)=>{zT(t,e).cast=t[r]}}function ur(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&iye.call(e[0])==="[object Function]"?nye(e[0]):e.length===1&&typeof e[0]=="string"?oye(e[0]):void 0}function aye(e,t,r,i){return e.x=e.x+t,e.y=e.y+r,i!=null&&(e.z=(e.z??0)+i),e}function lye(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}class mN{constructor(t,r,i,n){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const fi=new mN(6378137,1/298.257223563,3e5,.006694379990137799),wp=new mN(3396190,1/169.8944472236118,23e4),Ff=new mN(1737400,0,0),uye=57.29577951308232,cye=.017453292519943;function tU(e){return e*uye}function rU(e){return e*cye}function iU(e){return e/fi.radius}function nU(e){return Math.PI/2-2*Math.atan(Math.exp(-e/fi.radius))}function mO(e){return e.wkid!=null||e.wkt!=null}const _$=[0,0];function oI(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,_$,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,_$,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,_$,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let c=0;c<a.length;c++){const p=a[c];u=[],l.push(u);for(let d=0;d<p.length;d++)u.push(t(p[d][0],p[d][1],[0,0],i)),p[d].length>2&&u[d].push(p[d][2]),p[d].length>3&&u[d].push(p[d][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],i),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return n}function uM(e,t){const r=e&&(mO(e)?e:e.spatialReference),i=t&&(mO(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Xn(i,r)||Sg(i)&&B2(r)||Sg(r)&&B2(i))}function t4(e,t){if(Ne(e))return null;const r=e.spatialReference,i=t&&(mO(t)?t:t.spatialReference);return uM(r,i)?Xn(r,i)?Pe(e):Sg(i)?oI(e,A1,wt.WebMercator,!1,Pe(e)):B2(i)?oI(e,H_,wt.WGS84,!1,Pe(e)):null:null}function A1(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=rU(t);return r[0]=rU(e)*fi.radius,r[1]=fi.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function H_(e,t,r=[0,0],i=!1){const n=tU(e/fi.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=tU(Math.PI/2-2*Math.atan(Math.exp(-t/fi.radius))),r}function wf(e,t=!1,r=Pe(e)){return oI(e,A1,wt.WebMercator,t,r)}function $1(e,t=!1,r=Pe(e)){return oI(e,H_,wt.WGS84,t,r)}var cM;const tw=[0,0];function sU(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const w3=ot.getLogger("esri.geometry.Point");let Xs=cM=class extends na{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new wt(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)w3.warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)w3.warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=A1(s.longitude,s.latitude,tw);e=a[0],t=a[1]}}}else sU(r)?(n=r,r=null):sU(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?w3.warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&w3.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return H_(t,r,tw)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",A1(r,e,tw)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return H_(e,t,tw)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",A1(e,t,tw)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new cM;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return cM.copy(e,this),this}equals(e){if(Ne(e))return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:c}=e;if(!s.equals(c))if(s.isWebMercator&&c.isWGS84)[l,u]=A1(l,u),c=s;else{if(!s.isWGS84||!c.isWebMercator)return!1;[l,u]=H_(l,u),c=s}return t===l&&r===u&&i===o&&n===a&&s.wkid===c.wkid}offset(e,t,r){return aye(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=za(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return lye(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};h([f({readOnly:!0})],Xs.prototype,"cache",null),h([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xs.prototype,"hasM",null),h([f({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Xs.prototype,"hasZ",null),h([f({type:Number})],Xs.prototype,"latitude",null),h([f({type:Number})],Xs.prototype,"longitude",null),h([f({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),ur(e=>isNaN(e)?e:Da(e))],Xs.prototype,"x",void 0),h([et("x")],Xs.prototype,"writeX",null),h([Ke("x")],Xs.prototype,"readX",null),h([f({type:Number,json:{write:!0}})],Xs.prototype,"y",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xs.prototype,"z",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xs.prototype,"m",void 0),Xs=cM=h([me("esri.geometry.Point")],Xs),Xs.prototype.toJSON.isDefaultToJSON=!0;const At=Xs,x$=[0,0];function r4(e,t){return!!de(t)&&so(e,t.x,t.y,t.z)}function Qst(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!fv(e,r))return!1;return!0}function hye(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?so(e,r,i,n)&&so(e,r,o,n)&&so(e,s,o,n)&&so(e,s,i,n)&&so(e,r,i,a)&&so(e,r,o,a)&&so(e,s,o,a)&&so(e,s,i,a):so(e,r,i)&&so(e,r,o)&&so(e,s,o)&&so(e,s,i)}function fv(e,t){return so(e,t[0],t[1])}function pye(e,t){return so(e,t[0],t[1],t[2])}function so(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function UK(e,t){return x$[1]=t.y,x$[0]=t.x,dye(e,x$)}function dye(e,t){return VK(e.rings,t)}function VK(e,t){if(!e)return!1;if(fye(e))return oU(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=oU(r,e[i],t);return r}function fye(e){return!Array.isArray(e[0][0])}function oU(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,c]=t[a],[p,d]=t[o];(c<n&&d>=n||d<n&&c>=n)&&u+(n-c)/(d-c)*(p-u)<i&&(s=!s)}return s}function mye(e,t){return r4(e,t)}function yye(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function gye(e,t){const{points:r,hasZ:i}=t,n=i?pye:fv;for(const s of r)if(n(e,s))return!0;return!1}const Eg=[0,0],Mg=[0,0],Ig=[0,0],Tg=[0,0],vye=[Eg,Mg,Ig,Tg],BK=[[Ig,Eg],[Eg,Mg],[Mg,Tg],[Tg,Ig]];function bye(e,t){return wye(e,t.rings)}function wye(e,t){Eg[0]=e.xmin,Eg[1]=e.ymax,Mg[0]=e.xmax,Mg[1]=e.ymax,Ig[0]=e.xmin,Ig[1]=e.ymin,Tg[0]=e.xmax,Tg[1]=e.ymin;for(const r of vye)if(VK(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(fv(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(fv(e,s)||zK(i,s,BK))return!0;i=s}}return!1}function _ye(e,t){Eg[0]=e.xmin,Eg[1]=e.ymax,Mg[0]=e.xmax,Mg[1]=e.ymax,Ig[0]=e.xmin,Ig[1]=e.ymin,Tg[0]=e.xmax,Tg[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(fv(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(fv(e,o)||zK(n,o,BK))return!0;n=o}}return!1}const zn=[0,0];function xye(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],c=e[a][l+1];if(yO(s,o,u,c,zn)&&!(zn[0]===s[0]&&zn[1]===s[1]||zn[0]===u[0]&&zn[1]===u[1]||zn[0]===o[0]&&zn[1]===o[1]||zn[0]===c[0]&&zn[1]===c[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let l=n+2;l<s;l++){const u=r[l],c=r[l+1];if(yO(o,a,u,c,zn)&&!(zn[0]===o[0]&&zn[1]===o[1]||zn[0]===u[0]&&zn[1]===u[1]||zn[0]===a[0]&&zn[1]===a[1]||zn[0]===c[0]&&zn[1]===c[1]))return!0}}}return!1}function zK(e,t,r){for(let i=0;i<r.length;i++)if(yO(e,t,r[i][0],r[i][1]))return!0;return!1}function yO(e,t,r,i,n){const[s,o]=e,[a,l]=t,[u,c]=r,[p,d]=i,m=p-u,g=s-u,b=a-s,v=d-c,_=o-c,E=l-o,I=v*b-m*E;if(I===0)return!1;const x=(m*_-v*g)/I,T=(b*_-E*g)/I;return x>=0&&x<=1&&T>=0&&T<=1&&(n&&(n[0]=s+x*(a-s),n[1]=o+x*(l-o)),!0)}function Sye(e){switch(e){case"esriGeometryEnvelope":case"extent":return yye;case"esriGeometryMultipoint":case"multipoint":return gye;case"esriGeometryPoint":case"point":return mye;case"esriGeometryPolygon":case"polygon":return bye;case"esriGeometryPolyline":case"polyline":return _ye}}var dl;function Eye(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function td(e,t,r){return t==null?r:r==null?t:e(t,r)}let Cn=dl=class extends na{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return Eye(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?wt.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??wt.WGS84}}static fromBounds(e,t){return new dl({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new dl({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new At({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new dl;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&uM(t,r)&&(e=t.isWebMercator?wf(e):$1(e,!0)),e.type==="point"?r4(this,e):e.type==="extent"&&hye(this,e)}equals(e){if(this===e)return!0;if(Ne(e))return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&uM(t,r)&&(e=t.isWebMercator?wf(e):$1(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(Ne(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&uM(t,r)&&(e=t.isWebMercator?wf(e):$1(e,!0)),Sye(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=td(Math.min,this.zmin,e.zmin),this.zmax=td(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=td(Math.min,this.mmin,e.mmin),this.mmax=td(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:Ne(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=td(Math.max,this.zmin,e.zmin),this.zmax=td(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=td(Math.max,this.mmin,e.mmin),this.mmax=td(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=za(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?$1(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=this._normalizeX(i.x,e).x),this.spatialReference=new wt(Gu(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;if(!(r=r||za(i)))return this;const n=this._getParts(r).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return n;let s=!0,o=!0;return n.forEach(a=>{a.hasZ||(s=!1),a.hasM||(o=!1)}),{rings:n.map(a=>{const l=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s){const u=(a.zmax-a.zmin)/2;for(let c=0;c<l.length;c++)l[c].push(u)}if(o){const u=(a.mmax-a.mmin)/2;for(let c=0;c<l.length;c++)l[c].push(u)}return l}),hasZ:s,hasM:o,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let c;e=e||za(o);const[p,d]=e.valid;c=this._normalizeX(this.xmin,e);const m=c.x,g=c.frameId;c=this._normalizeX(this.xmax,e);const b=c.x,v=c.frameId,_=m===b&&a>0;if(a>2*d){const E=new dl(l<u?m:b,n,d,s,o),I=new dl(p,n,l<u?b:m,s,o),x=new dl(0,n,d,s,o),T=new dl(p,n,0,s,o),M=[],k=[];E.contains(x)&&M.push(g),E.contains(T)&&k.push(g),I.contains(x)&&M.push(v),I.contains(T)&&k.push(v);for(let D=g+1;D<v;D++)M.push(D),k.push(D);t.push({extent:E,frameIds:[g]},{extent:I,frameIds:[v]},{extent:x,frameIds:M},{extent:T,frameIds:k})}else m>b||_?t.push({extent:new dl(m,n,d,s,o),frameIds:[g]},{extent:new dl(p,n,b,s,o),frameIds:[v]}):t.push({extent:new dl(m,n,b,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}_normalizeX(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}};h([f({readOnly:!0})],Cn.prototype,"cache",null),h([f({readOnly:!0})],Cn.prototype,"center",null),h([f({readOnly:!0})],Cn.prototype,"extent",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Cn.prototype,"hasM",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Cn.prototype,"hasZ",null),h([f({readOnly:!0})],Cn.prototype,"height",null),h([f({readOnly:!0})],Cn.prototype,"width",null),h([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Cn.prototype,"xmin",void 0),h([f({type:Number,json:{write:!0}})],Cn.prototype,"ymin",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Cn.prototype,"mmin",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Cn.prototype,"zmin",void 0),h([f({type:Number,json:{write:!0}})],Cn.prototype,"xmax",void 0),h([f({type:Number,json:{write:!0}})],Cn.prototype,"ymax",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Cn.prototype,"mmax",void 0),h([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Cn.prototype,"zmax",void 0),Cn=dl=h([me("esri.geometry.Extent")],Cn),Cn.prototype.toJSON.isDefaultToJSON=!0;const qt=Cn;let W_;const Mye=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function GK(){return Mye??globalThis.navigator?.language??"en"}function Ga(){return W_===void 0&&(W_=GK()),W_}const J_=[];function Iye(e){return J_.push(e),{remove(){J_.splice(J_.indexOf(e),1)}}}const gO=[];function yN(e){return gO.push(e),{remove(){J_.splice(gO.indexOf(e),1)}}}function Tye(){const e=GK();W_!==e&&(W_=e,[...gO].forEach(t=>{t.call(null,e)}),[...J_].forEach(t=>{t.call(null,e)}))}globalThis.addEventListener?.("languagechange",Tye);class Xt{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&ra(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){if(this.apiToJSON.hasOwnProperty(t)){const r=this.apiToJSON[t];return this.options.useNumericKeys?+r:r}return this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}_invertMap(t){const r={};for(const i in t)r[t[i]]=i;return r}_getKeysSorted(t){const r=[];for(const i in t)r.push(i);return r.sort(),r}}function en(){return function(e,t){return new Xt(e,{ignoreUnknown:!0,...t})}}var vO;const Aye=new Xt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let fl=vO=class extends kt{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new vO({categories:this.categories?Pe(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,i;if(this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o)),this.extent){const o=t4(this.extent,wt.WGS84);de(o)&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Aye.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};h([f()],fl.prototype,"categories",void 0),h([f()],fl.prototype,"disableExtraQuery",void 0),h([f({type:qt})],fl.prototype,"extent",void 0),h([f()],fl.prototype,"filter",void 0),h([f()],fl.prototype,"num",void 0),h([f()],fl.prototype,"query",void 0),h([f()],fl.prototype,"sortField",void 0),h([f()],fl.prototype,"sortOrder",null),h([f()],fl.prototype,"start",void 0),fl=vO=h([me("esri.portal.PortalQueryParams")],fl);const pp=fl;let Pm=class extends kt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};h([f()],Pm.prototype,"nextQueryParams",void 0),h([f()],Pm.prototype,"queryParams",void 0),h([f()],Pm.prototype,"results",void 0),h([f()],Pm.prototype,"total",void 0),Pm=h([me("esri.portal.PortalQueryResult")],Pm);const $ye=Pm;let Oh=class extends Je{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new $e("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};h([f({type:Date})],Oh.prototype,"created",void 0),h([f()],Oh.prototype,"id",void 0),h([f()],Oh.prototype,"portal",void 0),h([f()],Oh.prototype,"title",void 0),h([f({readOnly:!0})],Oh.prototype,"url",null),h([f()],Oh.prototype,"username",void 0),Oh=h([me("esri.portal.PortalFolder")],Oh);const Cye=Oh;let kn=class extends Je{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new $e("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=Bi(pp,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new pp,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new pp,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const n=new pp;return n.disableExtraQuery=!0,n.num=1,n.query=i,this.portal.queryGroups(n,t)}throw new $e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],n=new pp;return n.num=1,n.query=`typekeywords:"${e}"`,i.queryItems(n,t)}throw new $e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(i=>{const n=i&&i.categorySchema;return n&&n.length?n:[]}):[])}};h([f()],kn.prototype,"access",void 0),h([f({type:Date})],kn.prototype,"created",void 0),h([f()],kn.prototype,"description",void 0),h([f()],kn.prototype,"id",void 0),h([f()],kn.prototype,"isInvitationOnly",void 0),h([f({type:Date})],kn.prototype,"modified",void 0),h([f()],kn.prototype,"owner",void 0),h([f()],kn.prototype,"portal",void 0),h([f()],kn.prototype,"snippet",void 0),h([f()],kn.prototype,"sortField",void 0),h([f()],kn.prototype,"sortOrder",void 0),h([f()],kn.prototype,"tags",void 0),h([f()],kn.prototype,"thumbnail",void 0),h([f({readOnly:!0})],kn.prototype,"thumbnailUrl",null),h([f()],kn.prototype,"title",void 0),h([f({readOnly:!0})],kn.prototype,"url",null),kn=h([me("esri.portal.PortalGroup")],kn);const bO=kn;var kye=Object.freeze(Object.defineProperty({__proto__:null,default:bO},Symbol.toStringTag,{value:"Module"})),wO;let gi=wO=class extends Je{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,i=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal._request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(i=>i.id);if(r.length){const i={method:"post",query:{items:r.join(",")}};return this.portal._request(t,i).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=Cye.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=bO.fromJSON(r);return i.portal=this.portal,i}):[],t})}fetchItems(e){e||(e={});let t,r=this.userContentUrl;return e.folder&&(r+="/"+e.folder.id),Be(()=>Promise.resolve().then(function(){return qK}),void 0).then(({default:i})=>{t=i;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(r,{query:n})}).then(i=>{let n;return i&&i.items?(n=i.items.map(s=>{const o=t.fromJSON(s);return o.portal=this.portal,o}),Promise.all(n.map(s=>s.load())).catch(s=>s).then(()=>({items:n,nextStart:i.nextStart,total:i.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new bO({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new $e("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new $e("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new wO;return t.sourceJSON=e,t.read(e),t}};h([f()],gi.prototype,"access",void 0),h([f({type:Date})],gi.prototype,"created",void 0),h([f()],gi.prototype,"culture",void 0),h([f()],gi.prototype,"description",void 0),h([f()],gi.prototype,"email",void 0),h([f()],gi.prototype,"favGroupId",void 0),h([f()],gi.prototype,"fullName",void 0),h([f({type:Date})],gi.prototype,"modified",void 0),h([f()],gi.prototype,"orgId",void 0),h([f()],gi.prototype,"portal",void 0),h([f()],gi.prototype,"preferredView",void 0),h([f()],gi.prototype,"privileges",void 0),h([f()],gi.prototype,"region",void 0),h([f()],gi.prototype,"role",void 0),h([f()],gi.prototype,"roleId",void 0),h([f()],gi.prototype,"sourceJSON",void 0),h([f()],gi.prototype,"thumbnail",void 0),h([f({readOnly:!0})],gi.prototype,"thumbnailUrl",null),h([f()],gi.prototype,"units",void 0),h([f({readOnly:!0})],gi.prototype,"userContentUrl",null),h([f({readOnly:!0})],gi.prototype,"url",null),h([f()],gi.prototype,"username",void 0),h([f()],gi.prototype,"userType",void 0),gi=wO=h([me("esri.portal.PortalUser")],gi);const gN=gi;var Oye=Object.freeze(Object.defineProperty({__proto__:null,default:gN},Symbol.toStringTag,{value:"Module"})),va;let S$;const aU={PortalGroup:()=>Be(()=>Promise.resolve().then(function(){return kye}),void 0),PortalItem:()=>Be(()=>Promise.resolve().then(function(){return qK}),void 0),PortalUser:()=>Be(()=>Promise.resolve().then(function(){return Oye}),void 0)};let yt=va=class extends Yx(Ya){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=_r.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)_r.request.trustedServers.includes(t)||_r.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=gN.fromJSON(e),t.portal=this),t}load(e){const t=Be(()=>Promise.resolve().then(function(){return Yye}),void 0).then(({default:r})=>{ui(e),S$=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(r=>{if(cn){const i=cn;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==va.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=i.on("credential-create",()=>{i.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await Be(()=>import("./ElevationLayer.be2602cf.js"),["assets/ElevationLayer.be2602cf.js","assets/preload-helper.387dac8f.js"])).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}fetchBasemaps(e,t){const r=new pp;return r.query=e||(_r.apiKey&&DK(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(i=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',i.total){const n=i.results[0];return r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc",n.queryItems(r,t)}return null}).then(i=>{let n;return n=i&&i.total?i.results.filter(s=>s.type==="Web Map").map(s=>new S$({portalItem:s})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Za(e)?Promise.reject(wi()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new pp;if(r.num=100,r.sortField="title",t&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return Za(e)?Promise.reject(wi()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||Ga();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||Ga();return this._request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return va._default&&!va._default.destroyed||(va._default=new va),va._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new $e("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new va({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new $e("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new $e("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Ga().toLowerCase()},...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(i,n)}_queryPortal(e,t,r,i){const n=Bi(pp,t),s=o=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const l=n.clone();return l.start=a.nextStart,new $ye({nextQueryParams:l,queryParams:n,total:a.total,results:va._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(Fp(l),a)));return r&&aU[r]?aU[r]().then(({default:o})=>(ui(i),s(o))):s()}_signIn(){if(this.authMode===va.AUTH_MODE_ANONYMOUS)return Promise.reject(new $e("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return cn?cn.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then(i=>{const n=va._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=S$.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===va.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return Mt(this._normalizeSSL(e),u).then(c=>c.data)}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=de(i)?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};yt.AUTH_MODE_ANONYMOUS="anonymous",yt.AUTH_MODE_AUTO="auto",yt.AUTH_MODE_IMMEDIATE="immediate",h([f()],yt.prototype,"access",void 0),h([f()],yt.prototype,"allSSL",void 0),h([f()],yt.prototype,"authMode",void 0),h([f()],yt.prototype,"authorizedCrossOriginDomains",void 0),h([Ke("authorizedCrossOriginDomains")],yt.prototype,"readAuthorizedCrossOriginDomains",null),h([f()],yt.prototype,"basemapGalleryGroupQuery",void 0),h([f()],yt.prototype,"bingKey",void 0),h([f()],yt.prototype,"canListApps",void 0),h([f()],yt.prototype,"canListData",void 0),h([f()],yt.prototype,"canListPreProvisionedItems",void 0),h([f()],yt.prototype,"canProvisionDirectPurchase",void 0),h([f()],yt.prototype,"canSearchPublic",void 0),h([f()],yt.prototype,"canShareBingPublic",void 0),h([f()],yt.prototype,"canSharePublic",void 0),h([f()],yt.prototype,"canSignInArcGIS",void 0),h([f()],yt.prototype,"canSignInIDP",void 0),h([f()],yt.prototype,"colorSetsGroupQuery",void 0),h([f()],yt.prototype,"commentsEnabled",void 0),h([f({type:Date})],yt.prototype,"created",void 0),h([f()],yt.prototype,"credential",void 0),h([f()],yt.prototype,"culture",void 0),h([f()],yt.prototype,"currentVersion",void 0),h([f()],yt.prototype,"customBaseUrl",void 0),h([f()],yt.prototype,"defaultBasemap",void 0),h([Ke("defaultBasemap")],yt.prototype,"readDefaultBasemap",null),h([f()],yt.prototype,"defaultDevBasemap",void 0),h([Ke("defaultDevBasemap")],yt.prototype,"readDefaultDevBasemap",null),h([f({type:qt})],yt.prototype,"defaultExtent",void 0),h([f()],yt.prototype,"defaultVectorBasemap",void 0),h([Ke("defaultVectorBasemap")],yt.prototype,"readDefaultVectorBasemap",null),h([f()],yt.prototype,"description",void 0),h([f()],yt.prototype,"devBasemapGalleryGroupQuery",void 0),h([f()],yt.prototype,"eueiEnabled",void 0),h([f({readOnly:!0})],yt.prototype,"extraQuery",null),h([f()],yt.prototype,"featuredGroups",void 0),h([f()],yt.prototype,"featuredItemsGroupQuery",void 0),h([f()],yt.prototype,"galleryTemplatesGroupQuery",void 0),h([f()],yt.prototype,"livingAtlasGroupQuery",void 0),h([f()],yt.prototype,"hasCategorySchema",void 0),h([f()],yt.prototype,"helpBase",void 0),h([f()],yt.prototype,"helperServices",void 0),h([f()],yt.prototype,"helpMap",void 0),h([f()],yt.prototype,"homePageFeaturedContent",void 0),h([f()],yt.prototype,"homePageFeaturedContentCount",void 0),h([f()],yt.prototype,"httpPort",void 0),h([f()],yt.prototype,"httpsPort",void 0),h([f()],yt.prototype,"id",void 0),h([f()],yt.prototype,"ipCntryCode",void 0),h([f({readOnly:!0})],yt.prototype,"isOrganization",null),h([f()],yt.prototype,"isPortal",void 0),h([f()],yt.prototype,"isReadOnly",void 0),h([f()],yt.prototype,"layerTemplatesGroupQuery",void 0),h([f()],yt.prototype,"maxTokenExpirationMinutes",void 0),h([f({type:Date})],yt.prototype,"modified",void 0),h([f()],yt.prototype,"name",void 0),h([f()],yt.prototype,"portalHostname",void 0),h([f()],yt.prototype,"portalMode",void 0),h([f()],yt.prototype,"portalProperties",void 0),h([f()],yt.prototype,"region",void 0),h([f({readOnly:!0})],yt.prototype,"restUrl",null),h([f()],yt.prototype,"rotatorPanels",void 0),h([f()],yt.prototype,"showHomePageDescription",void 0),h([f()],yt.prototype,"sourceJSON",void 0),h([f()],yt.prototype,"staticImagesUrl",void 0),h([f({json:{name:"2DStylesGroupQuery"}})],yt.prototype,"stylesGroupQuery2d",void 0),h([f({json:{name:"stylesGroupQuery"}})],yt.prototype,"stylesGroupQuery3d",void 0),h([f()],yt.prototype,"supportsHostedServices",void 0),h([f()],yt.prototype,"symbolSetsGroupQuery",void 0),h([f()],yt.prototype,"templatesGroupQuery",void 0),h([f()],yt.prototype,"thumbnail",void 0),h([f({readOnly:!0})],yt.prototype,"thumbnailUrl",null),h([f()],yt.prototype,"units",void 0),h([f()],yt.prototype,"url",void 0),h([f()],yt.prototype,"urlKey",void 0),h([Ke("urlKey")],yt.prototype,"readUrlKey",null),h([f()],yt.prototype,"user",void 0),h([Ke("user")],yt.prototype,"readUser",null),h([f()],yt.prototype,"useStandardizedQuery",void 0),h([f()],yt.prototype,"useVectorBasemaps",void 0),h([f()],yt.prototype,"vectorBasemapGalleryGroupQuery",void 0),yt=va=h([me("esri.portal.Portal")],yt);const qs=yt,Rye=ot.getLogger("esri.assets");function $r(e){if(!_r.assetsPath)throw Rye.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new $e("assets:path-not-set","config.assetsPath is not set");return xg(_r.assetsPath,e)}const Pye=ot.getLogger("esri.portal.PortalItemResource");let wd=class extends kt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){de(e)&&Ba(e)?Pye.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(Ne(r))throw new $e("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:pZ(t,"signal")})}async update(e,t){return(await Be(()=>import("./resourceUtils.f7842c11.js"),["assets/resourceUtils.f7842c11.js","assets/preload-helper.387dac8f.js"])).addOrUpdateResource(this,"update",e,t)}hasPath(){return de(this.path)}_normalizePath(e,t){return Ne(e)?e:(e=e.replace(/^\/+/,""),de(t)&&Ba(e)&&(e=lN(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};h([f()],wd.prototype,"portalItem",void 0),h([f({type:String,value:null})],wd.prototype,"path",null),h([ur("path")],wd.prototype,"_castPath",null),h([f({type:String,readOnly:!0})],wd.prototype,"url",null),h([f({type:String,readOnly:!0})],wd.prototype,"itemRelativeUrl",null),wd=h([me("esri.portal.PortalItemResource")],wd);const Lye=wd;let Vw=class extends kt{constructor(e){super(e),this.created=null,this.rating=null}};h([f()],Vw.prototype,"created",void 0),h([f()],Vw.prototype,"rating",void 0),Vw=h([me("esri.portal.PortalRating")],Vw);const E$=Vw;var U0;let pr=U0=class extends Yx(Ya){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return Tl(U0,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?r=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")&&(r="Instant App"),r}readExtent(e){return e&&e.length?new qt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,l=!1,u=!1,c=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),u=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),n=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":c?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?"mediaservice":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":e==="geodata service"?"geodataservice":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="hub project"?"hubproject":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="experience builder widget"?"experiencebuilderwidget":e==="experience builder widget package"?"experiencebuilderwidgetpackage":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":e==="notebook code snippets"?"notebookcodesnippets":e==="suitability model"?"suitabilitymodel":e==="esri classifier definition"?"classifierdefinition":e==="esri classification schema"?"classificationschema":e==="insights data engineering workbook"?"dataengineeringworkbook":e==="insights data engineering model"?"dataengineeringmodel":e==="deep learning studio project"?"deeplearningproject":"maps",n?$r(r+n+i+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const e=this.get("portal.restUrl");return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=qs.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:de(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof E$&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new E$({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Pe(this.applicationProxies),avgRating:this.avgRating,categories:Pe(this.categories),created:Pe(this.created),culture:this.culture,description:this.description,extent:Pe(this.extent),groupCategories:Pe(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Pe(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Pe(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:Pe(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Pe(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new U0({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]&&(e[r]=e[r].join(", "));const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new E$(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},U0)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new $e("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Wg(t)?i.query={data:t}:i.query={url:Ol(t)},de(r)&&(i.query.filename=r);else{const n=new FormData;de(r)?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new $e("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await Be(()=>import("./resourceUtils.f7842c11.js"),["assets/resourceUtils.f7842c11.js","assets/preload-helper.387dac8f.js"])).fetchResources(this,e,t)}async addResource(e,t,r){const i=await Be(()=>import("./resourceUtils.f7842c11.js"),["assets/resourceUtils.f7842c11.js","assets/preload-helper.387dac8f.js"]);return e.portalItem=this,i.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await Be(()=>import("./resourceUtils.f7842c11.js"),["assets/resourceUtils.f7842c11.js","assets/preload-helper.387dac8f.js"]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new $e("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return(await Be(()=>import("./resourceUtils.f7842c11.js"),["assets/resourceUtils.f7842c11.js","assets/preload-helper.387dac8f.js"])).removeAllResources(this,e)}resourceFromPath(e){return new Lye({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:Pe(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:Pe(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Pe(this.typeKeywords),url:this.url};return yZ(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new U0({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};h([f({type:["private","shared","org","public"]})],pr.prototype,"access",void 0),h([f()],pr.prototype,"accessInformation",void 0),h([f({type:String})],pr.prototype,"apiKey",void 0),h([f({json:{read:{source:"appProxies"}}})],pr.prototype,"applicationProxies",void 0),h([f()],pr.prototype,"avgRating",void 0),h([f()],pr.prototype,"categories",void 0),h([f({type:Date})],pr.prototype,"created",void 0),h([f()],pr.prototype,"culture",void 0),h([f()],pr.prototype,"description",void 0),h([f({readOnly:!0})],pr.prototype,"displayName",null),h([f({type:qt})],pr.prototype,"extent",void 0),h([Ke("extent")],pr.prototype,"readExtent",null),h([f()],pr.prototype,"groupCategories",void 0),h([f({readOnly:!0})],pr.prototype,"iconUrl",null),h([f()],pr.prototype,"id",void 0),h([f({readOnly:!0})],pr.prototype,"isLayer",null),h([f()],pr.prototype,"itemControl",void 0),h([f({readOnly:!0})],pr.prototype,"itemUrl",null),h([f()],pr.prototype,"licenseInfo",void 0),h([f({type:Date})],pr.prototype,"modified",void 0),h([f()],pr.prototype,"name",void 0),h([f()],pr.prototype,"numComments",void 0),h([f()],pr.prototype,"numRatings",void 0),h([f()],pr.prototype,"numViews",void 0),h([f()],pr.prototype,"owner",void 0),h([f()],pr.prototype,"ownerFolder",void 0),h([f({type:qs})],pr.prototype,"portal",void 0),h([f()],pr.prototype,"screenshots",void 0),h([f()],pr.prototype,"size",void 0),h([f()],pr.prototype,"snippet",void 0),h([f()],pr.prototype,"sourceJSON",void 0),h([f({type:String})],pr.prototype,"spatialReference",void 0),h([f()],pr.prototype,"tags",void 0),h([f()],pr.prototype,"thumbnail",void 0),h([f({readOnly:!0})],pr.prototype,"thumbnailUrl",null),h([f()],pr.prototype,"title",void 0),h([f()],pr.prototype,"type",void 0),h([f()],pr.prototype,"typeKeywords",void 0),h([f({type:String,json:{read(e,t){if(t.type!=="KML")return e;const r=this.portal?.restUrl;return e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null),e}}})],pr.prototype,"url",void 0),h([f({readOnly:!0})],pr.prototype,"userItemUrl",null),pr=U0=h([me("esri.portal.PortalItem")],pr);const z2=pr;var qK=Object.freeze(Object.defineProperty({__proto__:null,default:z2},Symbol.toStringTag,{value:"Module"}));const lU=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Nye={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function uU(e){return Nye[e]??!1}const Bw=[],Z1=new Map;function cU(e){for(const t of Z1.keys())WK(e.pattern,t)&&Z1.delete(t)}function Dye(e){return Bw.includes(e)||(cU(e),Bw.unshift(e)),{remove(){const t=Bw.indexOf(e);t>-1&&(Bw.splice(t,1),cU(e))}}}async function HK(e){const t=Ga();Z1.has(e)||Z1.set(e,jye(e,t));const r=Z1.get(e);return await Uye.add(r),r}function Fye(e){if(!lU.test(e))return null;const[,t,r]=lU.exec(e),i=t+(r?"-"+r.toUpperCase():"");return uU(i)?i:uU(t)?t:null}async function jye(e,t){const r=[];for(const i of Bw)if(WK(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new $e("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new $e("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function WK(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}yN(()=>{Z1.clear()});const Uye=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ap())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Vye(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e,r=await HK("esri/t9n/basemaps");return r[e]||r[t]}const _O={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return $r("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return $r("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return $r("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return $r("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return $r("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return $r("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return $r("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return $r("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return $r("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return $r("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return $r("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return $r("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return $r("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return $r("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return $r("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function hU(e){const t=e?.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function Bye(e){const t=e?.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}function vN(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Xst(e){return e?.type==="feature"&&e.source?.type==="feature-layer"}function zye(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const r=e.activeLayer.tileMatrixSets;if(r)return r}return null}const Gye=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),qye=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Hye(e){return e.layerContainerType==="basemap"?Gye:e.layerContainerType==="operational-layers"?qye:null}function Wye(e,t){if(t.restrictedWebMapWriting){const r=Hye(t);return!de(r)||r.has(e.type)&&!vN(e)}return!0}function Jye(e,t){if(vN(e)){const r=nb("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&M$(e,i)}else e.type==="stream"?M$(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&M$(e,t)}function M$(e,t){"maxScale"in e&&(t.maxScale=rI(e.maxScale)),"minScale"in e&&(t.minScale=rI(e.minScale))}function Zye(e,t){if(Jye(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=rI(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(vN(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function pU(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new $e("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Wye(e,r)){const i={};return e.write(i,r)?i:null}return de(t)&&Zye(e,t=Pe(t)),t}var hM;let Kye=0;const I$=ot.getLogger("esri.Basemap");let ml=hM=class extends Yx(Ya){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Kye++,this.baseLayers=new Lt,this.referenceLayers=new Lt;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&I$.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{I$.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.removeAll();for(const r of e)r.destroy();const t=this.referenceLayers.removeAll();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem?.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",_g(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=pU(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);de(s)&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=pU(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);de(s)&&(s.isReference=!0,i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",_g(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return iN(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new hM({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=Pe(r);return i.url&&qu(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&qu(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;ui(e);const i=[];if(t){const n=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const s=t.data.id;i.push(Vye(s).then(o=>{o&&this.read({title:o},t.context)}))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,r){const i=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||i&&i.portal||null,s=i&&i.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await Be(()=>import("./layersCreator.fdfc4b2e.js"),["assets/layersCreator.fdfc4b2e.js","assets/lazyLayerLoader.e0a392f3.js","assets/preload-helper.387dac8f.js","assets/portalLayers.029442f0.js","assets/layersLoader.c832ef21.js","assets/jsonContext.4a2dd7f6.js","assets/portalItemUtils.aa871d92.js"]),a=[];if(ui(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=o(this.baseLayers,e.baseMapLayers.filter(p=>!p.isReference),l);a.push(u);const c=o(this.referenceLayers,e.baseMapLayers.filter(p=>p.isReference),l);a.push(c)}await ia(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=fn(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||qs.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||qs.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=_O[e];if(t){if(t.deprecated){let r=null;e==="dark-gray"?r="dark-gray-vector":e==="gray"?r="gray-vector":e==="streets"?r="streets-vector":e==="topo"&&(r="topo-vector"),NZ(I$,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return hM.fromJSON(t)}return null}};h([f({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Lt}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],ml.prototype,"baseLayers",null),h([f({type:String,json:{origins:{"web-scene":{write:!0}}}})],ml.prototype,"id",void 0),h([f({type:z2})],ml.prototype,"portalItem",void 0),h([f()],ml.prototype,"referenceLayers",null),h([f({readOnly:!0})],ml.prototype,"resourceInfo",void 0),h([f({type:wt})],ml.prototype,"spatialReference",void 0),h([f()],ml.prototype,"thumbnailUrl",void 0),h([f({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],ml.prototype,"title",void 0),h([et("title")],ml.prototype,"writeTitle",null),ml=hM=h([me("esri.Basemap")],ml);const jf=ml;var Yye=Object.freeze(Object.defineProperty({__proto__:null,default:jf},Symbol.toStringTag,{value:"Module"}));const aI={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function JK(e){return aI[e]||aI[e.toLowerCase()]}function bN(e){return aI[e]??aI[e.toLowerCase()]}function Qye(e){return[...bN(e)]}function T$(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function ZK(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*T$(o,s,n+1/3)),Math.round(255*T$(o,s,n)),Math.round(255*T$(o,s,n-1/3)),i]}function Xye(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}function aa(){return[0,0,0]}function ege(e){return[e[0],e[1],e[2]]}function cb(e,t,r){return[e,t,r]}function tge(e){const t=aa(),r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function rge(e,t){return new Float64Array(e,t,3)}function KK(){return aa()}function YK(){return cb(1,1,1)}function QK(){return cb(1,0,0)}function XK(){return cb(0,1,0)}function eY(){return cb(0,0,1)}const ige=KK(),tY=YK(),nge=QK(),sge=XK(),oge=eY();Object.freeze(Object.defineProperty({__proto__:null,create:aa,clone:ege,fromValues:cb,fromArray:tge,createView:rge,zeros:KK,ones:YK,unitX:QK,unitY:XK,unitZ:eY,ZEROS:ige,ONES:tY,UNIT_X:nge,UNIT_Y:sge,UNIT_Z:oge},Symbol.toStringTag,{value:"Module"}));const Qt=1e-6,uf=Math.random,age=Math.PI/180,lge=180/Math.PI;function wN(e){return e*age}function uge(e){return e*lge}function cge(e,t){return Math.abs(e-t)<=Qt*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:Qt,RANDOM:uf,toRadian:wN,toDegree:uge,equals:cge},Symbol.toStringTag,{value:"Module"}));function _N(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function lI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function rY(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function iY(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Z_(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function nY(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function sY(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function hge(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function pge(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function dge(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function fge(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function mge(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function yge(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function gge(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function xN(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function vge(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function oY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function aY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function lY(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function bge(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function wge(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function xO(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function uI(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _ge(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function xge(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function Sge(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),c=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*u+n[0]*c,e[1]=t[1]*a+r[1]*l+i[1]*u+n[1]*c,e[2]=t[2]*a+r[2]*l+i[2]*u+n[2]*c,e}function Ege(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,c=3*s*a,p=3*l*o,d=l*s;return e[0]=t[0]*u+r[0]*c+i[0]*p+n[0]*d,e[1]=t[1]*u+r[1]*c+i[1]*p+n[1]*d,e[2]=t[2]*u+r[2]*c+i[2]*p+n[2]*d,e}function Mge(e,t){t=t||1;const r=2*uf()*Math.PI,i=2*uf()-1,n=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=i*t,e}function Ige(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function Tge(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function Age(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],u=t[2];let c=n*u-s*l,p=s*a-i*u,d=i*l-n*a,m=n*d-s*p,g=s*c-i*d,b=i*p-n*c;const v=2*o;return c*=v,p*=v,d*=v,m*=2,g*=2,b*=2,e[0]=a+c+m,e[1]=l+p+g,e[2]=u+d+b,e}function $ge(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Cge(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function kge(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Oge(e,t){lI(_3,e),lI(x3,t),xO(_3,_3),xO(x3,x3);const r=uI(_3,x3);return r>1?0:r<-1?Math.PI:Math.acos(r)}const _3=aa(),x3=aa();function Rge(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Pge(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Lge(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(r-s)<=Qt*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=Qt*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=Qt*Math.max(1,Math.abs(n),Math.abs(a))}function Nge(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Dge=Z_,Fge=nY,jge=sY,Uge=oY,Vge=aY,Bge=_N,zge=lY;Object.freeze(Object.defineProperty({__proto__:null,length:_N,copy:lI,set:rY,add:iY,subtract:Z_,multiply:nY,divide:sY,ceil:hge,floor:pge,abs:dge,sign:fge,min:mge,max:yge,round:gge,scale:xN,scaleAndAdd:vge,distance:oY,squaredDistance:aY,squaredLength:lY,negate:bge,inverse:wge,normalize:xO,dot:uI,cross:_ge,lerp:xge,hermite:Sge,bezier:Ege,random:Mge,transformMat4:Ige,transformMat3:Tge,transformQuat:Age,rotateX:$ge,rotateY:Cge,rotateZ:kge,angle:Oge,str:Rge,exactEquals:Pge,equals:Lge,direction:Nge,sub:Dge,mul:Fge,div:jge,dist:Uge,sqrDist:Vge,len:Bge,sqrLen:zge},Symbol.toStringTag,{value:"Module"}));function Gge(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function qge(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function Hge(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function uY(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function cY(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function hY(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Wge(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Jge(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Zge(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Kge(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Yge(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Qge(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Xge(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function pY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function dY(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function fY(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function mY(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function e0e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function t0e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function r0e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function i0e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function yY(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function n0e(e,t){let r,i,n,s,o,a;t=t||1;do r=2*uf()-1,i=2*uf()-1,o=r*r+i*i;while(o>=1);do n=2*uf()-1,s=2*uf()-1,a=n*n+s*s;while(a>=1);const l=Math.sqrt((1-o)/a);return e[0]=t*r,e[1]=t*i,e[2]=t*n*l,e[3]=t*s*l,e}function s0e(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function o0e(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],u=r[3],c=u*i+a*s-l*n,p=u*n+l*i-o*s,d=u*s+o*n-a*i,m=-o*i-a*n-l*s;return e[0]=c*u+m*-o+p*-l-d*-a,e[1]=p*u+m*-a+d*-o-c*-l,e[2]=d*u+m*-l+c*-a-p*-o,e[3]=t[3],e}function a0e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function l0e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function u0e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],u=t[3];return Math.abs(r-o)<=Qt*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=Qt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=Qt*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=Qt*Math.max(1,Math.abs(s),Math.abs(u))}const c0e=uY,h0e=cY,p0e=hY,d0e=pY,f0e=dY,m0e=fY,y0e=mY;Object.freeze(Object.defineProperty({__proto__:null,copy:Gge,set:qge,add:Hge,subtract:uY,multiply:cY,divide:hY,ceil:Wge,floor:Jge,min:Zge,max:Kge,round:Yge,scale:Qge,scaleAndAdd:Xge,distance:pY,squaredDistance:dY,length:fY,squaredLength:mY,negate:e0e,inverse:t0e,normalize:r0e,dot:i0e,lerp:yY,random:n0e,transformMat4:s0e,transformQuat:o0e,str:a0e,exactEquals:l0e,equals:u0e,sub:c0e,mul:h0e,div:p0e,dist:d0e,sqrDist:f0e,len:m0e,sqrLen:y0e},Symbol.toStringTag,{value:"Module"}));const dU=new Float32Array(1);function eot(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function sa(e,t,r){return Math.min(Math.max(e,t),r)}function tot(e){return(e&e-1)==0}function rot(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function iot(e,t,r){return e+(t-e)*r}function C1(e){return e*Math.PI/180}function gY(e){return 180*e/Math.PI}function not(e){return Math.acos(sa(e,-1,1))}function vY(e){return Math.asin(sa(e,-1,1))}function g0e(e,t,r=1e-6){if(isNaN(e)||isNaN(t))return!1;if(e===t)return!0;const i=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(e===0||t===0||n<1e-12&&s<1e-12){if(i>.01*r)return!1}else if(i/(n+s)>r)return!1;return!0}function K1(e,t,r=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=r}function v0e(e){return bY(Math.max(-SO,Math.min(e,SO)))}function bY(e){return dU[0]=e,dU[0]}function sot(e,t){const r=_N(e),i=vY(e[2]/r),n=Math.atan2(e[1]/r,e[0]/r);return rY(t,r,i,n),t}function oot(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(K1(t,1)&&K1(r,1)&&K1(i,1))}const SO=bY(34028234663852886e22);function S3(e){return sa(KT(e),0,255)}function E3(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class on{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,i,n=new on){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),on.fromArray(a,r)}return on.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return on.fromArray(ZK(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new on){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const i=t.length===4?4:8,n=(1<<i)-1;let s=Number("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=i,r[o]=i===4?17*a:a}),r.a=1,r)}static fromArray(t,r=new on){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=JK(t)?bN(t):null;return i&&on.fromArray(i,r)||on.fromRgb(t,r)||on.fromHex(t,r)}static fromJSON(t){return t&&new on([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return de(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return de(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?on.fromString(t,this):Array.isArray(t)?on.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof on||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),i=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${i.length<2?"0"+i:i}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=on.AlphaMode.ALWAYS){const r=S3(this.r),i=S3(this.g),n=S3(this.b);return t===on.AlphaMode.ALWAYS||this.a!==1?[r,i,n,S3(255*this.a)]:[r,i,n]}clone(){return new on(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return de(t)&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(E3(this.r,0,255)),this.g=Math.round(E3(this.g,0,255)),this.b=Math.round(E3(this.b,0,255)),this.a=E3(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}}on.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(on||(on={}));const xt=on;function mv(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var EO;function fU(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function b0e(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let _d=EO=class extends na{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):b0e(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points&&r.points[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new qt,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=fU(Math.min),a=fU(Math.max);let l,u,c,p,[d,m]=s,[g,b]=s;for(let v=0,_=e.length;v<_;v++){const E=e[v],[I,x]=E;if(d=o(d,I),m=o(m,x),g=a(g,I),b=a(b,x),r&&E.length>2){const T=E[2];l=o(l,T),c=a(c,T)}if(i&&E.length>n){const T=E[n];u=o(u,T),p=a(p,T)}}return t.xmin=d,t.ymin=m,t.xmax=g,t.ymax=b,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=c):(t.zmin=null,t.zmax=null),i?(t.mmin=u,t.mmax=p):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=Pe(this.points)}addPoint(e){return mv(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:Pe(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new EO(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new At(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new At(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(mv(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};h([f({readOnly:!0})],_d.prototype,"cache",null),h([f()],_d.prototype,"extent",null),h([f({type:[[Number]],json:{write:{isRequired:!0}}})],_d.prototype,"points",void 0),h([et("points")],_d.prototype,"writePoints",null),_d=EO=h([me("esri.geometry.Multipoint")],_d),_d.prototype.toJSON.isDefaultToJSON=!0;const nm=_d;function w0e(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function _0e(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function x0e(e,t,r,i){const[n,s]=t,[o,a]=r[i],[l,u]=r[i+1],c=l-o,p=u-a,d=c*c+p*p,m=(n-o)*c+(s-a)*p,g=Math.min(1,Math.max(0,m/d));return e[0]=o+c*g,e[1]=a+p*g,e}function S0e(e,t){return _0e(e,t,.5)}function SN(e,t,r){const i=e.length;let n=0,s=0,o=0;for(let a=0;a<i;a++){const l=e[a],u=e[(a+1)%i];let c=2;n+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&r&&(s+=l[0]*u[2]-u[0]*l[2],c=3),l.length>c&&u.length>c&&t&&(o+=l[0]*u[c]-u[0]*l[c])}return n<=0&&s<=0&&o<=0}function aot(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!SN(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function lot(e){if("rings"in e)for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]])}function uot(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function E0e(e){return e?M0e(e.rings,e.hasZ):null}function M0e(e,t){if(!e||!e.length)return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=I0e(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?T0e(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function I0e(e,t,r){let i=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,c=e.length&&t?e[0][2]:0;for(let d=0;d<e.length;d++){const m=e[d],g=e[(d+1)%e.length],[b,v,_]=m,E=b-l,I=v-u,x=t?_-c:void 0,[T,M,k]=g,D=T-l,B=M-u,G=t?k-c:void 0,W=E*B-D*I;if(o+=W,i+=(E+D)*W,n+=(I+B)*W,t&&m.length>2&&g.length>2){const K=E*G-D*x;s+=(x+G)*K,a+=K}b<r[0]&&(r[0]=b),b>r[1]&&(r[1]=b),v<r[2]&&(r[2]=v),v>r[3]&&(r[3]=v),t&&(_<r[4]&&(r[4]=_),_>r[5]&&(r[5]=_))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[i/(6*o)+l,n/(6*o)+u,o];return t&&(r[4]===r[5]||a===0?(p[3]=(r[4]+r[5])/2,p[4]=0):(p[3]=s/(6*a)+c,p[4]=a)),p}function T0e(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const c=e[l],p=e[l+1];if(c&&p){r[0]=c[0],r[1]=c[1],i[0]=p[0],i[1]=p[1],t&&c.length>2&&p.length>2&&(r[2]=c[2],i[2]=p[2]);const d=w0e(r,i);if(d){n+=d;const m=S0e(c,p);s+=d*m[0],o+=d*m[1],t&&m.length>2&&(a+=d*m[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function wY(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function _Y(e){return e.points!==void 0}function xY(e){return e.x!==void 0&&e.y!==void 0}function SY(e){return e.paths!==void 0}function EY(e){return e.rings!==void 0}function MY(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}const cf=MY(Math.min),hf=MY(Math.max);function cot(e,t){return SY(t)?yv(e,t.paths,!1,!1):EY(t)?yv(e,t.rings,!1,!1):_Y(t)?EN(e,t.points,!1,!1,!1,!1):wY(t)?IY(e,t):(xY(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function hot(e,t){return SY(t)?yv(e,t.paths,!0,!1):EY(t)?yv(e,t.rings,!0,!1):_Y(t)?EN(e,t.points,!0,!1,!0,!1):wY(t)?IY(e,t,!0,!1,!0,!1):(xY(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function yv(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[u,c]=t[0][0],[p,d]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let b=0;b<g.length;b++){const v=g[b],[_,E]=v;if(u=cf(u,_),c=cf(c,E),p=hf(p,_),d=hf(d,E),r&&v.length>2){const I=v[2];s=cf(s,I),o=hf(o,I)}if(i&&v.length>n){const I=v[n];a=cf(s,I),l=hf(o,I)}}}return r?i?(e[0]=u,e[1]=c,e[2]=s,e[3]=a,e[4]=p,e[5]=d,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=c,e[2]=s,e[3]=p,e[4]=d,e[5]=o,e.length=6,e):i?(e[0]=u,e[1]=c,e[2]=a,e[3]=p,e[4]=d,e[5]=l,e.length=6,e):(e[0]=u,e[1]=c,e[2]=p,e[3]=d,e.length=4,e)}function IY(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let c=t.zmin,p=t.zmax,d=t.mmin,m=t.mmax;return n?(c=c||0,p=p||0,s?(d=d||0,m=m||0,e[0]=o,e[1]=l,e[2]=c,e[3]=d,e[4]=a,e[5]=u,e[6]=p,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=p,e)):s?(d=d||0,m=m||0,e[0]=o,e[1]=l,e[2]=d,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function EN(e,t,r,i,n,s){const o=r?3:2,a=i&&s,l=r&&n;if(!t.length||!t[0].length)return null;let u,c,p,d,[m,g]=t[0],[b,v]=t[0];for(let _=0;_<t.length;_++){const E=t[_],[I,x]=E;if(m=cf(m,I),g=cf(g,x),b=hf(b,I),v=hf(v,x),l&&E.length>2){const T=E[2];u=cf(u,T),c=hf(c,T)}if(a&&E.length>o){const T=E[o];p=cf(u,T),d=hf(c,T)}}return n?(u=u||0,c=c||0,s?(p=p||0,d=d||0,e[0]=m,e[1]=g,e[2]=u,e[3]=p,e[4]=b,e[5]=v,e[6]=c,e[7]=d,e):(e[0]=m,e[1]=g,e[2]=u,e[3]=b,e[4]=v,e[5]=c,e)):s?(p=p||0,d=d||0,e[0]=m,e[1]=g,e[2]=p,e[3]=b,e[4]=v,e[5]=d,e):(e[0]=m,e[1]=g,e[2]=b,e[3]=v,e)}function A0e(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function $0e(e){return e.points!==void 0}function C0e(e){return e.x!==void 0&&e.y!==void 0}function k0e(e){return e.paths!==void 0}function O0e(e){return e.rings!==void 0}const MN=[];function TY(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function AY(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function $Y(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function CY(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function IN(e,t=!1,r=!1){return t?r?CY(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):AY(e[0],e[1],e[2],e[3],e[4],e[5]):r?$Y(e[0],e[1],e[2],e[3],e[4],e[5]):TY(e[0],e[1],e[2],e[3])}function pot(e){return e?A0e(e)?e:C0e(e)?P0e(e):O0e(e)?kY(e):k0e(e)?OY(e):$0e(e)?R0e(e):null:null}function R0e(e){const{hasZ:t,hasM:r,points:i}=e;return IN(EN(MN,i,t,r),t,r)}function P0e(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?CY(t,r,i,n,t,r,i,n):AY(t,r,i,t,r,i):s?$Y(t,r,n,t,r,n):TY(t,r,t,r)}function kY(e){const{hasZ:t,hasM:r,rings:i}=e,n=yv(MN,i,t,r);return n?IN(n,t,r):null}function OY(e){const{hasZ:t,hasM:r,paths:i}=e,n=yv(MN,i,t,r);return n?IN(n,t,r):null}var pM;function mU(e){return!Array.isArray(e[0])}let wc=pM=class extends na{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new pM(s)}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||wt.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=s.length>3):r===void 0?r=i?s.length>3:s.length>2:i===void 0&&(i=r?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=E0e(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new At;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=kY(this);if(!t)return null;const r=new qt(t);return r.spatialReference=e,r}get isSelfIntersecting(){return xye(this.rings)}writeRings(e,t){t.rings=Pe(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(mU(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new pM;return e.spatialReference=this.spatialReference,e.rings=Pe(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(Ne(e))return!1;const t=this.spatialReference,r=e.spatialReference;if(de(t)!==de(r)||de(t)&&de(r)&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[l,u,c,p])=>n===l&&s===u&&(o==null&&c==null||o===c)&&(a==null&&p==null||a===p);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!GL(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=t4(e,this.spatialReference);return UK(this,de(t)?t:e)}isClockwise(e){let t;return t=mU(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,SN(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new At(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new At(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new At(r[0],r[1],r[2],r[3],this.spatialReference):new At(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(mv(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new At(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new At(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(mv(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([f({readOnly:!0})],wc.prototype,"cache",null),h([f({readOnly:!0})],wc.prototype,"centroid",null),h([f({readOnly:!0})],wc.prototype,"extent",null),h([f({readOnly:!0})],wc.prototype,"isSelfIntersecting",null),h([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],wc.prototype,"rings",void 0),h([et("rings")],wc.prototype,"writeRings",null),wc=pM=h([me("esri.geometry.Polygon")],wc),wc.prototype.toJSON.isDefaultToJSON=!0;const wo=wc;var MO;function L0e(e){return!Array.isArray(e[0])}let xd=MO=class extends na{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||wt.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=!1):r===void 0?r=!i&&s.length>3:i===void 0&&(i=!r&&s.length>3)),{paths:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=OY(this);if(!t)return null;const r=new qt(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=Pe(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(L0e(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new MO;return e.spatialReference=this.spatialReference,e.paths=Pe(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new At(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new At(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new At(r[0],r[1],r[2],r[3],this.spatialReference):new At(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(mv(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new At(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new At(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(mv(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([f({readOnly:!0})],xd.prototype,"cache",null),h([f({readOnly:!0})],xd.prototype,"extent",null),h([f({type:[[[Number]]],json:{write:{isRequired:!0}}})],xd.prototype,"paths",void 0),h([et("paths")],xd.prototype,"writePaths",null),xd=MO=h([me("esri.geometry.Polyline")],xd),xd.prototype.toJSON.isDefaultToJSON=!0;const Ds=xd;function RY(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function TN(e){return e.points!==void 0}function AN(e){return e.x!==void 0&&e.y!==void 0}function $N(e){return e.paths!==void 0}function ig(e){return e.rings!==void 0}function Hu(e){return Ne(e)?null:e instanceof na?e:AN(e)?At.fromJSON(e):$N(e)?Ds.fromJSON(e):ig(e)?wo.fromJSON(e):TN(e)?nm.fromJSON(e):RY(e)?qt.fromJSON(e):null}function Jg(e){return e?AN(e)?"esriGeometryPoint":$N(e)?"esriGeometryPolyline":ig(e)?"esriGeometryPolygon":RY(e)?"esriGeometryEnvelope":TN(e)?"esriGeometryMultipoint":null:null}const N0e={esriGeometryPoint:At,esriGeometryPolyline:Ds,esriGeometryPolygon:wo,esriGeometryEnvelope:qt,esriGeometryMultipoint:nm};function D0e(e){return e&&N0e[e]||null}const F0e=en()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),yU=en()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Up={base:na,key:"type",typeMap:{extent:qt,multipoint:nm,point:At,polyline:Ds,polygon:wo}};oh(Up);var gv;function j0e(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return gv.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return gv.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(gv||(gv={}));let A$;function $p(){return A$||(A$=(async()=>{const e=await Be(()=>import("./arcadeUtils.b942efba.js").then(function(t){return t.t}),["assets/arcadeUtils.b942efba.js","assets/preload-helper.387dac8f.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),A$}const dot=(e,t,r)=>Xx.create(e,t,r,null,["$feature"]),fot=(e,t,r)=>Xx.create(e,t,r,null,["$feature","$view"]),U0e=(e,t,r,i)=>Xx.create(e,t,r,i,["$feature","$view"]);class Xx{constructor(t,r,i,n,s,o,a,l){this.script=t,this.evaluate=s;const u=Array.isArray(a)?a:a.fields;this.fields=u,this._syntaxTree=n,this._arcade=r,this._arcadeDictionary=i,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:l,Dictionary:u}=await $p(),c=wt.fromJSON(r),p=a.parseScript(t,o),d=s.reduce((T,M)=>({...T,[M]:null}),{});let m=null;de(n)&&(m=new u(n),m.immutable=!0,d.$config=null);const g=a.scriptUsesGeometryEngine(p)&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),v=a.scriptIsAsync(p)&&a.enableAsyncSupport(),_={vars:d,spatialReference:c,useAsync:!!v},E=new u;E.immutable=!1,E.setField("scale",0);const I=a.compileScript(p,_),x=T=>("$view"in T&&T.$view&&(E.setField("scale",T.$view.scale),T.$view=E),m&&(T.$config=m),I({vars:T,spatialReference:c}));return await Promise.all([g,b,v]),new Xx(t,a,u,p,x,new l,i,c)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const V0e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],B0e=["field","normalizationField"];function gU(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(vU(V0e,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)vU(B0e,i,t)}}function vU(e,t,r){if(e)for(const i of e){const n=nb(i,t),s=n&&typeof n!="function"&&r.get(n);s&&ra(i,s.name,t)}}function PY(e,t){if(e!=null&&t?.fields.length)if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=i&&i.name||null}}const $$=new Set;function LY(e,t){return e&&t?($$.clear(),G2($$,e,t),Array.from($$).sort()):[]}function G2(e,t,r){if(r)if(t?.fields?.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)Dl(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)e.add(i)}}function Dl(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function mot(e,t){return Ne(t)||Ne(e)?[]:t.includes("*")?e.fields.map(r=>r.name):t}async function _o(e,t,r){if(!r)return;const{arcadeUtils:i}=await $p(),n=i.extractFieldNames(r,t?.fields?.map(s=>s.name));for(const s of n)Dl(e,t,s)}async function NY(e,t,r){if(r&&r!=="1=1"){const i=(await Be(()=>import("./WhereClause.5a38bf79.js"),["assets/WhereClause.5a38bf79.js","assets/preload-helper.387dac8f.js"])).WhereClause.create(r,t);if(!i.isStandardized)throw new $e("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});G2(e,t,i.fieldNames)}}function z0e({displayField:e,fields:t}){return e||(t&&t.length?C$(t,"name-or-title")||C$(t,"unique-identifier")||C$(t,"type-or-category")||G0e(t):null)}function G0e(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function C$(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function yot(e,t){if(!t)return;const r=nb("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function q0e(e,t,r){r.outStatistic.onStatisticValueExpression?_o(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}async function got(e,t,r){if(!t||!r||!("fields"in r))return;const i=[];if(r.popupTemplate?.expressionInfos&&i.push(...r.popupTemplate.expressionInfos.map(n=>_o(e,t.fieldsIndex,n.expression))),Array.isArray(r.popupTemplate?.content)){const n=r.popupTemplate.content;for(const s of n)s.type==="expression"&&s.expressionInfo&&i.push(_o(e,t.fieldsIndex,s.expressionInfo.expression))}r.fields&&i.push(...r.fields.map(n=>q0e(e,t.fieldsIndex,n))),await Promise.all(i)}async function vot(e,t,r){t&&(t.timeInfo&&de(r)&&r.timeExtent&&G2(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&G2(e,t.fieldsIndex,[t.floorInfo.floorField]),de(r)&&de(r.where)&&await NY(e,t.fieldsIndex,r.where))}async function bot(e,t,r){t&&r&&await Promise.all(r.map(i=>H0e(e,t,i)))}async function H0e(e,t,r){t&&r&&(r.valueExpression?await _o(e,t.fieldsIndex,r.valueExpression):r.field&&Dl(e,t.fieldsIndex,r.field))}function wot(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?LY(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function _ot(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r&&r.length&&await Promise.all(r.map(n=>W0e(e,i,n)))}async function W0e(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await _o(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Dl(e,t,o.slice(1,-1))})}await NY(e,t,n)}function J0e(e){const t=e.defaultValue;return t!==void 0&&jY(e,t)?t:e.nullable?null:void 0}function DY(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Z0e(e){return e===null||DY(e)}const CN="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function K0e(e){return e===null||CN(e)}function FY(e){return e!=null&&typeof e=="string"}function Y0e(e){return e===null||FY(e)}function Q0e(){return!0}function jY(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?K0e:CN;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Z0e:DY;break;case"string":case"esriFieldTypeString":r=e.nullable?Y0e:FY;break;default:r=Q0e}return arguments.length===1?r:r(t)}const X0e=["integer","small-integer","single","double"],e1e=new Set([...X0e,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function kN(e){return e!=null&&e1e.has(e.type)}function xot(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var cI,hI;function Sot(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Eot(e,t){return e.nullable&&t===null?null:kN(e)&&!t1e(e.type,Number(t))?cI.OUT_OF_RANGE:jY(e,t)?e.domain?j0e(e.domain,t):null:hI.INVALID_TYPE}function t1e(e,t){const r=typeof e=="string"?UY(e):e;return!!r&&(r.isInteger?CN(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}function UY(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return r1e;case"esriFieldTypeInteger":case"integer":return i1e;case"esriFieldTypeSingle":case"single":return n1e;case"esriFieldTypeDouble":case"double":return s1e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(cI||(cI={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(hI||(hI={}));const r1e={min:-32768,max:32767,isInteger:!0},i1e={min:-2147483648,max:2147483647,isInteger:!0},n1e={min:-34e37,max:12e37,isInteger:!1},s1e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Mot(e,t,r){switch(e){case gv.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case gv.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case hI.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case cI.OUT_OF_RANGE:{const{min:i,max:n}=UY(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function o1e(e,t){return!a1e(e,t,null)}function a1e(e,t,r){if(!t||!t.attributes||!e){if(de(r))for(const s of e)r.add(s);return!0}const i=t.attributes;let n=!1;for(const s of e)if(!(s in i)){if(n=!0,!de(r))break;r.add(s)}return n}function VY(e){return["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let dM=class extends Je{constructor(e){super(e),this.type=null}};h([f({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],dM.prototype,"type",void 0),dM=h([me("esri.popup.content.Content")],dM);const Zg=dM;var IO;let Lm=IO=class extends Zg{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new IO({description:this.description,displayType:this.displayType,title:this.title})}};h([f({type:String,json:{write:!0}})],Lm.prototype,"description",void 0),h([f({type:["auto","preview","list"],json:{write:!0}})],Lm.prototype,"displayType",void 0),h([f({type:String,json:{write:!0}})],Lm.prototype,"title",void 0),h([f({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Lm.prototype,"type",void 0),Lm=IO=h([me("esri.popup.content.AttachmentsContent")],Lm);const q2=Lm;var TO;let Nm=TO=class extends Zg{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new TO({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Pe(this.outFields):null})}};h([f()],Nm.prototype,"creator",void 0),h([f()],Nm.prototype,"destroyer",void 0),h([f()],Nm.prototype,"outFields",void 0),h([f({type:["custom"],readOnly:!0})],Nm.prototype,"type",void 0),Nm=TO=h([me("esri.popup.content.CustomContent")],Nm);const l1e=Nm;var AO;let V0=AO=class extends Je{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new AO({title:this.title,expression:this.expression})}};h([f({type:String,json:{write:!0}})],V0.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],V0.prototype,"expression",void 0),h([f({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],V0.prototype,"returnType",void 0),V0=AO=h([me("esri.popup.ElementExpressionInfo")],V0);const BY=V0;var $O;let zw=$O=class extends Zg{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new $O({expressionInfo:this.expressionInfo?.clone()})}};h([f({type:BY,json:{write:!0}})],zw.prototype,"expressionInfo",void 0),h([f({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],zw.prototype,"type",void 0),zw=$O=h([me("esri.popup.content.ExpressionContent")],zw);const ON=zw;function Ft(e,t={}){const r=e instanceof Xt?e:new Xt(e,t),i={type:t?.ignoreUnknown??1?r.apiValues:String,json:{type:r.jsonValues,read:!t?.readOnly&&{reader:r.read},write:{writer:r.write}}};return t?.readOnly!==void 0&&(i.readOnly=!!t.readOnly),t?.default!==void 0&&(i.json.default=t.default),t?.name!==void 0&&(i.json.name=t.name),f(i)}const H2=en()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});H2.toJSON.bind(H2);H2.fromJSON.bind(H2);const hc={year:"numeric",month:"numeric",day:"numeric"},rw={year:"numeric",month:"long",day:"numeric"},iw={year:"numeric",month:"short",day:"numeric"},nw={year:"numeric",month:"long",weekday:"long",day:"numeric"},yl={hour:"numeric",minute:"numeric"},Zl={...yl,second:"numeric"},RN={"short-date":hc,"short-date-short-time":{...hc,...yl},"short-date-short-time-24":{...hc,...yl,hour12:!1},"short-date-long-time":{...hc,...Zl},"short-date-long-time-24":{...hc,...Zl,hour12:!1},"short-date-le":hc,"short-date-le-short-time":{...hc,...yl},"short-date-le-short-time-24":{...hc,...yl,hour12:!1},"short-date-le-long-time":{...hc,...Zl},"short-date-le-long-time-24":{...hc,...Zl,hour12:!1},"long-month-day-year":rw,"long-month-day-year-short-time":{...rw,...yl},"long-month-day-year-short-time-24":{...rw,...yl,hour12:!1},"long-month-day-year-long-time":{...rw,...Zl},"long-month-day-year-long-time-24":{...rw,...Zl,hour12:!1},"day-short-month-year":iw,"day-short-month-year-short-time":{...iw,...yl},"day-short-month-year-short-time-24":{...iw,...yl,hour12:!1},"day-short-month-year-long-time":{...iw,...Zl},"day-short-month-year-long-time-24":{...iw,...Zl,hour12:!1},"long-date":nw,"long-date-short-time":{...nw,...yl},"long-date-short-time-24":{...nw,...yl,hour12:!1},"long-date-long-time":{...nw,...Zl},"long-date-long-time-24":{...nw,...Zl,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":yl,"long-time":Zl},W2=en()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});W2.apiValues;W2.toJSON.bind(W2);W2.fromJSON.bind(W2);const u1e={ar:"ar-u-nu-latn-ca-gregory"};let fM=new WeakMap,zY=RN["short-date-short-time"];function c1e(e){const t=e||zY;if(!fM.has(t)){const r=Ga(),i=u1e[Ga()]||r;fM.set(t,new Intl.DateTimeFormat(i,t))}return fM.get(t)}function PN(e){return RN[e]||null}function Cp(e,t){return c1e(t).format(e)}yN(()=>{fM=new WeakMap,zY=RN["short-date-short-time"]});const h1e={ar:"ar-u-nu-latn"};let mM=new WeakMap,GY={};function p1e(e){const t=e||GY;if(!mM.has(t)){const r=Ga(),i=h1e[Ga()]||r;mM.set(t,new Intl.NumberFormat(i,e))}return mM.get(t)}function qY(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Uf(e,t){return e===-0&&(e=0),p1e(t).format(e)}yN(()=>{mM=new WeakMap,GY={}});var CO;let Dm=CO=class extends Je{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new CO({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?Cp(e,{...PN(this.dateFormat),...this.dateTimeFormatOptions}):Uf(e,qY(this))}formatRasterPixelValue(e){let t,r;return e.trim().includes(",")?(t=",",r=t+" ",this._formatDelimitedString(e,t,r,this)):e.trim().includes(";")?(t=";",r=t+" ",this._formatDelimitedString(e,t,r,this)):e.trim().includes(" ")?(t=r=" ",this._formatDelimitedString(e,t,r,this)):this.format(Number(e))}_formatDelimitedString(e,t,r,i){return e&&t&&r&&i?e.trim().split(t).map(n=>this.format(Number(n))).join(r):e}};h([Ft(H2)],Dm.prototype,"dateFormat",void 0),h([f({type:Object,json:{read:!1}})],Dm.prototype,"dateTimeFormatOptions",void 0),h([f({type:Boolean,json:{write:!0}})],Dm.prototype,"digitSeparator",void 0),h([f({type:fr,json:{write:!0}})],Dm.prototype,"places",void 0),Dm=CO=h([me("esri.popup.support.FieldInfoFormat")],Dm);const k1=Dm;var kO;let tu=kO=class extends Je{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new kO({fieldName:this.fieldName,format:this.format?Pe(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};h([f({type:String,json:{write:!0}})],tu.prototype,"fieldName",void 0),h([f({type:k1,json:{write:!0}})],tu.prototype,"format",void 0),h([f({type:Boolean,json:{write:!0,default:!1}})],tu.prototype,"isEditable",void 0),h([f({type:String,json:{write:!0}})],tu.prototype,"label",void 0),h([Ft(new Xt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],tu.prototype,"stringFieldOption",void 0),h([f({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],tu.prototype,"statisticType",void 0),h([f({type:String,json:{write:!0}})],tu.prototype,"tooltip",void 0),h([f({type:Boolean,json:{write:!0}})],tu.prototype,"visible",void 0),tu=kO=h([me("esri.popup.FieldInfo")],tu);const eS=tu;var OO;let Rh=OO=class extends Zg{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new OO(Pe({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};h([f({type:Object,json:{write:!0}})],Rh.prototype,"attributes",void 0),h([f({type:String,json:{write:!0}})],Rh.prototype,"description",void 0),h([f({type:[eS]})],Rh.prototype,"fieldInfos",void 0),h([et("fieldInfos")],Rh.prototype,"writeFieldInfos",null),h([f({type:String,json:{write:!0}})],Rh.prototype,"title",void 0),h([f({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Rh.prototype,"type",void 0),Rh=OO=h([me("esri.popup.content.FieldsContent")],Rh);const vv=Rh;let Fm=class extends Je{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};h([f({type:String,json:{write:!0}})],Fm.prototype,"altText",void 0),h([f({type:String,json:{write:!0}})],Fm.prototype,"caption",void 0),h([f({type:String,json:{write:!0}})],Fm.prototype,"title",void 0),h([f({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Fm.prototype,"type",void 0),Fm=h([me("esri.popup.content.mixins.MediaInfo")],Fm);const LN=Fm;var RO;let B0=RO=class extends kt{constructor(e){super(e),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new RO({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};h([f()],B0.prototype,"fieldName",void 0),h([f()],B0.prototype,"tooltip",void 0),h([f()],B0.prototype,"value",void 0),B0=RO=h([me("esri.popup.content.support.ChartMediaInfoValueSeries")],B0);const HY=B0;var PO;let jm=PO=class extends Je{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new PO({fields:Pe(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};h([f({type:[String],json:{write:!0}})],jm.prototype,"fields",void 0),h([f({type:String,json:{write:!0}})],jm.prototype,"normalizeField",void 0),h([f({type:[HY],json:{read:!1}})],jm.prototype,"series",void 0),h([f({type:String,json:{write:!0}})],jm.prototype,"tooltipField",void 0),jm=PO=h([me("esri.popup.content.support.ChartMediaInfoValue")],jm);const d1e=jm;let Gw=class extends LN{constructor(e){super(e),this.type=null,this.value=null}};h([f({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Gw.prototype,"type",void 0),h([f({type:d1e,json:{write:!0}})],Gw.prototype,"value",void 0),Gw=h([me("esri.popup.content.mixins.ChartMediaInfo")],Gw);const i4=Gw,n4=en()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var LO;let yM=LO=class extends i4{constructor(e){super(e),this.type="bar-chart"}clone(){return new LO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([f({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:n4.write}})],yM.prototype,"type",void 0),yM=LO=h([me("esri.popup.content.BarChartMediaInfo")],yM);const WY=yM;var NO;let gM=NO=class extends i4{constructor(e){super(e),this.type="column-chart"}clone(){return new NO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([f({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:n4.write}})],gM.prototype,"type",void 0),gM=NO=h([me("esri.popup.content.ColumnChartMediaInfo")],gM);const JY=gM;var DO;let qw=DO=class extends Je{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new DO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};h([f({type:String,json:{write:!0}})],qw.prototype,"linkURL",void 0),h([f({type:String,json:{write:!0}})],qw.prototype,"sourceURL",void 0),qw=DO=h([me("esri.popup.content.support.ImageMediaInfoValue")],qw);const f1e=qw;var FO;let z0=FO=class extends LN{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new FO({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};h([f({type:Number,json:{write:!0}})],z0.prototype,"refreshInterval",void 0),h([f({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],z0.prototype,"type",void 0),h([f({type:f1e,json:{write:!0}})],z0.prototype,"value",void 0),z0=FO=h([me("esri.popup.content.ImageMediaInfo")],z0);const ZY=z0;var jO;let vM=jO=class extends i4{constructor(e){super(e),this.type="line-chart"}clone(){return new jO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([f({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:n4.write}})],vM.prototype,"type",void 0),vM=jO=h([me("esri.popup.content.LineChartMediaInfo")],vM);const KY=vM;var UO;let bM=UO=class extends i4{constructor(e){super(e),this.type="pie-chart"}clone(){return new UO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};h([f({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:n4.write}})],bM.prototype,"type",void 0),bM=UO=h([me("esri.popup.content.PieChartMediaInfo")],bM);const YY=bM,QY={base:LN,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":WY,"column-chart":JY,"line-chart":KY,"pie-chart":YY,image:ZY}};var VO;let ru=VO=class extends Zg{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?ZY.fromJSON(t):t.type==="barchart"?WY.fromJSON(t):t.type==="columnchart"?JY.fromJSON(t):t.type==="linechart"?KY.fromJSON(t):t.type==="piechart"?YY.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new VO(Pe({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};h([f()],ru.prototype,"activeMediaInfoIndex",void 0),h([f({type:Object,json:{write:!0}})],ru.prototype,"attributes",void 0),h([f({type:String,json:{write:!0}})],ru.prototype,"description",void 0),h([f({types:[QY]})],ru.prototype,"mediaInfos",void 0),h([Ke("mediaInfos")],ru.prototype,"readMediaInfos",null),h([et("mediaInfos")],ru.prototype,"writeMediaInfos",null),h([f({type:String,json:{write:!0}})],ru.prototype,"title",void 0),h([f({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],ru.prototype,"type",void 0),ru=VO=h([me("esri.popup.content.MediaContent")],ru);const J2=ru;var BO;let Hw=BO=class extends Zg{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new BO({text:this.text})}};h([f({type:String,json:{write:!0}})],Hw.prototype,"text",void 0),h([f({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Hw.prototype,"type",void 0),Hw=BO=h([me("esri.popup.content.TextContent")],Hw);const bv=Hw,m1e={base:null,key:"type",typeMap:{attachment:q2,media:J2,text:bv,expression:ON,field:vv}};var zO;let Um=zO=class extends Je{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new zO({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([f({type:String,json:{write:!0}})],Um.prototype,"name",void 0),h([f({type:String,json:{write:!0}})],Um.prototype,"title",void 0),h([f({type:String,json:{write:!0}})],Um.prototype,"expression",void 0),h([f({type:["string","number"],json:{write:!0}})],Um.prototype,"returnType",void 0),Um=zO=h([me("esri.popup.ExpressionInfo")],Um);const XY=Um;var GO;let Ww=GO=class extends Je{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new GO({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};h([f({type:Boolean,json:{write:!0}})],Ww.prototype,"returnTopmostRaster",void 0),h([f({type:Boolean,json:{write:!0}})],Ww.prototype,"showNoDataRecords",void 0),Ww=GO=h([me("esri.popup.LayerOptions")],Ww);const y1e=Ww;var qO;let Jw=qO=class extends Je{constructor(e){super(e),this.field=null,this.order=null}clone(){return new qO({field:this.field,order:this.order})}};h([f({type:String,json:{write:!0}})],Jw.prototype,"field",void 0),h([f({type:["asc","desc"],json:{write:!0}})],Jw.prototype,"order",void 0),Jw=qO=h([me("esri.popup.support.RelatedRecordsInfoFieldOrder")],Jw);const eQ=Jw;var HO;let Zw=HO=class extends Je{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new HO({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Pe(this.orderByFields):null})}};h([f({type:Boolean,json:{write:!0}})],Zw.prototype,"showRelatedRecords",void 0),h([f({type:[eQ],json:{write:!0}})],Zw.prototype,"orderByFields",void 0),Zw=HO=h([me("esri.popup.RelatedRecordsInfo")],Zw);const g1e=Zw;let v1e=0;const tS=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+v1e++})}};return t=h([me("esri.core.Identifiable")],t),t};let bU=class extends tS(class{}){};bU=h([me("esri.core.Identifiable")],bU);var WO;let iu=WO=class extends tS(kt){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new WO({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};h([f()],iu.prototype,"active",void 0),h([f()],iu.prototype,"className",void 0),h([f()],iu.prototype,"disabled",void 0),h([f()],iu.prototype,"id",void 0),h([f()],iu.prototype,"indicator",void 0),h([f()],iu.prototype,"title",void 0),h([f()],iu.prototype,"type",void 0),h([f()],iu.prototype,"visible",void 0),iu=WO=h([me("esri.support.actions.ActionBase")],iu);const s4=iu;var JO;let wM=JO=class extends s4{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new JO({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};h([f()],wM.prototype,"image",void 0),wM=JO=h([me("esri.support.Action.ActionButton")],wM);const hb=wM;var ZO;let Kw=ZO=class extends s4{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new ZO({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};h([f()],Kw.prototype,"image",void 0),h([f()],Kw.prototype,"value",void 0),Kw=ZO=h([me("esri.support.Action.ActionToggle")],Kw);const tQ=Kw;var KO;const b1e=Lt.ofType({key:"type",defaultKeyValue:"button",base:s4,typeMap:{button:hb,toggle:tQ}}),w1e={base:Zg,key:"type",typeMap:{media:J2,custom:l1e,text:bv,attachments:q2,fields:vv,expression:ON}},rQ="esri.PopupTemplate",_1e=ot.getLogger(rQ),x1e=["attachments","fields","media","text","expression"];let mn=KO=class extends Je{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>oh(w1e,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||jp(e)?e:(_1e.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,i){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>x1e.includes(n.type)).map(n=>n&&n.toJSON(i)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,r,i){const{content:n}=this,s=Array.isArray(n)?n:null;if(e){const o=s?s.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>l.fieldInfos?.length);t.fieldInfos=e.filter(Boolean).map(l=>{const u=l.toJSON(i);return a&&(u.visible=!1),u})}if(s)for(const o of s)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,r,i){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?Pe(e.toArray()):[];return new KO({actions:t,content:Array.isArray(this.content)?Pe(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?Pe(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?Pe(this.fieldInfos):null,layerOptions:this.layerOptions?Pe(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?Pe(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?Pe(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(e,t,[...r,...this._getContentExpressionInfos(this.content,r)]),G2(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=Pe(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(i=>{const n=t.fieldInfos.find(s=>s.fieldName.toLowerCase()===i.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(i)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=Pe(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const i={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!t||i.mediaInfos||(n.mediaInfos=t,i.mediaInfos=!0),J2.fromJSON(n)):n.type==="text"?(n.text||!e||i.description||(n.text=e,i.description=!0),bv.fromJSON(n)):n.type==="attachments"?q2.fromJSON(n):n.type==="fields"?vv.fromJSON(n):n.type==="expression"?ON.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const i=[];return e?i.push(new bv({text:e})):i.push(new vv),Array.isArray(t)&&t.length&&i.push(J2.fromJSON({mediaInfos:t})),r&&i.push(q2.fromJSON({displayType:"auto"})),i.length?i:e}_getContentElementFields(e){const t=e?.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,n)=>[...i,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:r,value:i}=e,n=i||{},{fields:s=[],normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=n,c=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(u),...s];return o&&c.push(o),a&&c.push(a),c}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],t):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(i=>_o(e,t,i.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>!t.includes("relationships/")&&!t.includes("expression/")):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:i}=e,n=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,r=e.match(t);if(!r)return[];const i=/\{(\w+):.+\}/,n=r.filter(s=>!(s.indexOf("{relationships/")===0||s.indexOf("{expression/")===0)).map(s=>s.replace(i,"{$1}"));return n?n.map(s=>s.slice(1,-1)):[]}};h([f({type:b1e})],mn.prototype,"actions",void 0),h([f()],mn.prototype,"content",void 0),h([ur("content")],mn.prototype,"castContent",null),h([Ke("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],mn.prototype,"readContent",null),h([et("content",{popupElements:{type:Lt.ofType(m1e)},showAttachments:{type:Boolean},mediaInfos:{type:Lt.ofType(QY)},description:{type:String}})],mn.prototype,"writeContent",null),h([f({type:[XY],json:{write:!0}})],mn.prototype,"expressionInfos",void 0),h([f({type:[eS]})],mn.prototype,"fieldInfos",void 0),h([et("fieldInfos")],mn.prototype,"writeFieldInfos",null),h([f({type:y1e})],mn.prototype,"layerOptions",void 0),h([et("layerOptions")],mn.prototype,"writeLayerOptions",null),h([f({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],mn.prototype,"lastEditInfoEnabled",void 0),h([f()],mn.prototype,"outFields",void 0),h([f()],mn.prototype,"overwriteActions",void 0),h([f()],mn.prototype,"returnGeometry",void 0),h([f({json:{type:String}})],mn.prototype,"title",void 0),h([et("title")],mn.prototype,"writeTitle",null),h([f({type:g1e,json:{write:!0}})],mn.prototype,"relatedRecordsInfo",void 0),mn=KO=h([me(rQ)],mn);const sm=mn,wU=new Xt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let S1e=0,G0=class extends Je{constructor(e){super(e),this.id="sym"+S1e++,this.type=null,this.color=new xt([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};h([f({type:wU.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:wU.write}}})],G0.prototype,"type",void 0),h([f({type:xt,json:{write:{allowNull:!0}}})],G0.prototype,"color",void 0),h([Ke("color")],G0.prototype,"readColor",null),G0=h([me("esri.symbols.Symbol")],G0);const So=G0;var YO;let Sd=YO=class extends So{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(n=>{const s=n.valueExpressionInfo;return _o(e,t,s.expression)});await Promise.all(i)}}}clone(){return new YO({data:Pe(this.data)})}hash(){return WL(JSON.stringify(this.data)).toString()}};h([f({json:{write:!1}})],Sd.prototype,"color",void 0),h([f({json:{write:!0}})],Sd.prototype,"data",void 0),h([Ke("data",["symbol"])],Sd.prototype,"readData",null),h([et("data",{})],Sd.prototype,"writeData",null),h([Ft({CIMSymbolReference:"cim"},{readOnly:!0})],Sd.prototype,"type",void 0),Sd=YO=h([me("esri.symbols.CIMSymbol")],Sd);const rS=Sd;let q0=class extends Je{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};h([f({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],q0.prototype,"enabled",void 0),h([et("enabled")],q0.prototype,"writeEnabled",null),h([f({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],q0.prototype,"type",void 0),q0=h([me("esri.symbols.Symbol3DLayer")],q0);const gh=q0,E1e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,M1e="screenUtils.toPt: input not recognized!",iQ=96;function nQ(e){return e?e/72*iQ:0}function ah(e){return e?72*e/iQ:0}function Er(e){if(typeof e=="string"){const t=e.match(E1e);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?ah(r):r;return n?-s:s}return console.warn(M1e),null}return e}function Kn(e=0,t=0){return{x:e,y:t}}function Iot(e=0,t=0){return[e,t]}function o4(e){const t=KT(100*(1-e));return Math.max(0,Math.min(t,100))}function Z2(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function I1e(e,t){const r=t.transparency!=null?Z2(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new xt([i[0]||0,i[1]||0,i[2]||0,r]):null}function T1e(e,t){t.color=e.toJSON().slice(0,3);const r=o4(e.a);r!==0&&(t.transparency=r)}const om={type:xt,json:{type:[fr],default:null,read:{source:["color","transparency"],reader:I1e},write:{target:{color:{type:[fr]},transparency:{type:fr}},writer:T1e}}},lh={type:Number,cast:Er,json:{write:!0}};let Vm=class extends Je{constructor(e){super(e),this.color=new xt([0,0,0,1]),this.extensionLength=0,this.size=ah(1)}clone(){}cloneProperties(){return{color:Pe(this.color),size:this.size,extensionLength:this.extensionLength}}};h([f({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Vm.prototype,"type",void 0),h([f(om)],Vm.prototype,"color",void 0),h([f({...lh,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Vm.prototype,"extensionLength",void 0),h([f(lh)],Vm.prototype,"size",void 0),Vm=h([me("esri.symbols.edges.Edges3D")],Vm);const NN=Vm;var QO;let _M=QO=class extends NN{constructor(e){super(e),this.type="sketch"}clone(){return new QO(this.cloneProperties())}};h([Ft({sketch:"sketch"},{readOnly:!0})],_M.prototype,"type",void 0),_M=QO=h([me("esri.symbols.edges.SketchEdges3D")],_M);const A1e=_M;var XO;let xM=XO=class extends NN{constructor(e){super(e),this.type="solid"}clone(){return new XO(this.cloneProperties())}};h([Ft({solid:"solid"},{readOnly:!0})],xM.prototype,"type",void 0),xM=XO=h([me("esri.symbols.support.SolidEdges3D")],xM);const $1e=xM,sQ={types:{key:"type",base:NN,typeMap:{solid:$1e,sketch:A1e}},json:{write:!0}};var eR;let qa=eR=class extends Je{constructor(e){super(e),this.color=null}clone(){const e={color:de(this.color)?this.color.clone():null};return new eR(e)}};h([f(om)],qa.prototype,"color",void 0),qa=eR=h([me("esri.symbols.support.Symbol3DMaterial")],qa);var tR;let Ed=tR=class extends gh{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new tR({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:de(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};h([Ft({Extrude:"extrude"},{readOnly:!0})],Ed.prototype,"type",void 0),h([f({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Ed.prototype,"size",void 0),h([f({type:qa,json:{write:!0}})],Ed.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ed.prototype,"castShadows",void 0),h([f(sQ)],Ed.prototype,"edges",void 0),Ed=tR=h([me("esri.symbols.ExtrudeSymbol3DLayer")],Ed);const oQ=Ed;let Yw=class extends So{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};h([Ft({esriSLS:"simple-line"},{readOnly:!0})],Yw.prototype,"type",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Yw.prototype,"width",void 0),Yw=h([me("esri.symbols.LineSymbol")],Yw);const C1e=Yw,k1e=["begin","end","begin-end"],aQ=["arrow","circle","square","diamond","cross","x"];var rR;let _c=rR=class extends Je{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=i?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){i?.origin==="web-map"||(t[r]=e)}clone(){return new rR({color:Pe(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};h([f({type:["begin","end","begin-end"],json:{write:!0}})],_c.prototype,"placement",void 0),h([Ft({"line-marker":"line-marker"},{readOnly:!0}),f({json:{origins:{"web-map":{write:!1}}}})],_c.prototype,"type",void 0),h([f({type:aQ})],_c.prototype,"style",void 0),h([et("style")],_c.prototype,"writeStyle",null),h([f({type:xt,value:null,json:{write:{allowNull:!0}}})],_c.prototype,"color",null),h([Ke("color")],_c.prototype,"readColor",null),h([et("color")],_c.prototype,"writeColor",null),_c=rR=h([me("esri.symbols.LineSymbolMarker")],_c);const O1e=_c;var iR;const k$=new Xt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ph=iR=class extends C1e{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Er(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Er(s)),o}clone(){return new iR({color:Pe(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};h([Ft({esriSLS:"simple-line"},{readOnly:!0})],Ph.prototype,"type",void 0),h([f({type:k$.apiValues,json:{read:k$.read,write:k$.write}})],Ph.prototype,"style",void 0),h([f({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Ph.prototype,"cap",void 0),h([f({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],Ph.prototype,"join",void 0),h([f({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":O1e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ph.prototype,"marker",void 0),h([f({type:Number,json:{read:!1,write:!1}})],Ph.prototype,"miterLimit",void 0),Ph=iR=h([me("esri.symbols.SimpleLineSymbol")],Ph);const la=Ph;let Qw=class extends So{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};h([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":la}},json:{default:null,write:!0}})],Qw.prototype,"outline",void 0),h([f({type:["simple-fill","picture-fill"],readOnly:!0})],Qw.prototype,"type",void 0),Qw=h([me("esri.symbols.FillSymbol")],Qw);const lQ=Qw;let SM=class extends Je{constructor(e){super(e)}clone(){}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],SM.prototype,"type",void 0),SM=h([me("esri.symbols.patterns.LinePattern3D")],SM);const uQ=SM,R1e=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var nR;const P1e=en()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Xw=nR=class extends uQ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new nR(e)}};h([f({type:["style"]})],Xw.prototype,"type",void 0),h([Ft(P1e),f({type:R1e})],Xw.prototype,"style",void 0),Xw=nR=h([me("esri.symbols.patterns.LineStylePattern3D")],Xw);const DN=Xw;let EM=class extends Je{constructor(e){super(e)}clone(){}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],EM.prototype,"type",void 0),EM=h([me("esri.symbols.patterns.Pattern3D")],EM);const cQ=EM,L1e=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var sR;let e_=sR=class extends cQ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new sR(e)}};h([f({type:["style"]})],e_.prototype,"type",void 0),h([f({type:L1e,json:{read:!0,write:!0}})],e_.prototype,"style",void 0),e_=sR=h([me("esri.symbols.patterns.StylePattern3D")],e_);const hQ=e_,N1e={types:{key:"type",base:cQ,typeMap:{style:hQ}},json:{write:!0}},pQ={types:{key:"type",base:uQ,typeMap:{style:DN}},json:{write:!0}},K_=new xt("white");new xt("black");const D1e=new xt([255,255,255,0]);function F1e(e){return e.r===0&&e.g===0&&e.b===0}var oR;let Y_=oR=class extends qa{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:de(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new oR(e)}};h([Ft({multiply:"multiply",replace:"replace",tint:"tint"})],Y_.prototype,"colorMixMode",void 0),Y_=oR=h([me("esri.symbols.support.Symbol3DFillMaterial")],Y_);function jl(e=W1e){return[e[0],e[1],e[2],e[3]]}function Tot(e){return[e[0],e[1],e[2],e[3]]}function j1e(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Aot(e,t,r,i,n=jl()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function U1e(e,t=jl()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function $ot(e,t){return new qt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Cot(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function V1e(e){return Ne(e)||e[0]>=e[2]?0:e[2]-e[0]}function B1e(e){return e[1]>=e[3]?0:e[3]-e[1]}function kot(e){return V1e(e)*B1e(e)}function z1e(e,t){return G1e(e,t[0],t[1])}function G1e(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function q1e(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function Oot(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function H1e(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function Rot(e){return e?j1e(e,_U):jl(_U)}const _U=[1/0,1/0,-1/0,-1/0],W1e=[0,0,0,0];function FN(e=Q1e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function jN(e,t,r,i,n,s,o=FN()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function Pot(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new qt(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function Lot(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Not(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function J1e(e){return e[0]>=e[3]?0:e[3]-e[0]}function Z1e(e){return e[1]>=e[4]?0:e[4]-e[1]}function K1e(e){return e[2]>=e[5]?0:e[5]-e[2]}function Dot(e,t=[0,0,0]){return t[0]=J1e(e),t[1]=Z1e(e),t[2]=K1e(e),t}function Fot(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function jot(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function Y1e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Uot(e){return e?Y1e(e,SU):FN(SU)}function Vot(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function xU(e){return e.length===6}function Bot(e,t,r){if(Ne(e)||Ne(t))return e===t;if(!xU(e)||!xU(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const SU=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Q1e=[0,0,0,0,0,0];FN();function zot(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=cb(r,i,n);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const X1e=jN(-.5,-.5,-.5,.5,.5,.5),eve=jN(-.5,-.5,0,.5,.5,1),tve=jN(-.5,-.5,0,.5,.5,.5);function Got(e){switch(e){case"sphere":case"cube":case"diamond":return X1e;case"cylinder":case"cone":case"inverted-cone":return eve;case"tetrahedron":return tve;default:return}}const UN=["butt","square","round"],rve=[...UN,"none"],dQ=["miter","bevel","round"];var aR;let Bm=aR=class extends Je{constructor(e){super(e),this.color=new xt([0,0,0,1]),this.size=ah(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:de(this.color)?this.color.clone():null,size:this.size,pattern:de(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new aR(e)}};h([f(om)],Bm.prototype,"color",void 0),h([f(lh)],Bm.prototype,"size",void 0),h([f(pQ)],Bm.prototype,"pattern",void 0),h([f({type:UN,json:{default:"butt",write:{overridePolicy(){return{enabled:de(this.pattern)}}}}})],Bm.prototype,"patternCap",void 0),Bm=aR=h([me("esri.symbols.support.Symbol3DOutline")],Bm);var MM;let Lh=MM=class extends gh{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:de(this.edges)?this.edges.clone():null,enabled:this.enabled,material:de(this.material)?this.material.clone():null,pattern:de(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:de(this.outline)?this.outline.clone():null};return new MM(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new DN({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??K_).clone(),pattern:t};return t&&e.outline?.cap&&(r.patternCap=e.outline.cap),new MM({material:new Y_({color:(e.color??D1e).clone()}),pattern:e.style&&e.style!=="solid"?new hQ({style:e.style}):null,outline:r})}};h([Ft({Fill:"fill"},{readOnly:!0})],Lh.prototype,"type",void 0),h([f({type:Y_,json:{write:!0}})],Lh.prototype,"material",void 0),h([f(N1e)],Lh.prototype,"pattern",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Lh.prototype,"castShadows",void 0),h([f({type:Bm,json:{write:!0}})],Lh.prototype,"outline",void 0),h([f(sQ)],Lh.prototype,"edges",void 0),Lh=MM=h([me("esri.symbols.FillSymbol3DLayer")],Lh);const a4=Lh,ive=["none","underline","line-through"],nve=["normal","italic","oblique"],sve=["normal","lighter","bold","bolder"],fQ={type:Number,cast:e=>{const t=Da(e);return t===0?1:sa(t,.1,4)},nonNullable:!0},ove=["left","right","center"],ave=["baseline","top","middle","bottom"],mQ={type:ove,nonNullable:!0},yQ={type:ave,nonNullable:!0};var lR;let Nh=lR=class extends Je{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Er(e)}clone(){return new lR({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};h([f({type:ive,json:{default:"none",write:!0}})],Nh.prototype,"decoration",void 0),h([f({type:String,json:{write:!0}})],Nh.prototype,"family",void 0),h([f({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Nh.prototype,"size",void 0),h([ur("size")],Nh.prototype,"castSize",null),h([f({type:nve,json:{default:"normal",write:!0}})],Nh.prototype,"style",void 0),h([f({type:sve,json:{default:"normal",write:!0}})],Nh.prototype,"weight",void 0),Nh=lR=h([me("esri.symbols.Font")],Nh);const l4=Nh;function pb(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=Ol(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=lN(e,t.portalItem.itemUrl);uve.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return uR(e,t&&t.portal)}function iS(e,t,r=K2.YES){if(!e)return e;!Ba(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=Ol(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const s=uR(n,t.portal);i=lN(uR(i,t.portal),s,s),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=gQ(i,t&&t.portal),Ba(i)&&(i=Va(i)),t?.resources&&t?.portalItem&&!Ba(i)&&!Wg(i)&&r===K2.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function VN(e,t,r){return pb(e,r)}function Ag(e,t,r,i){const n=iS(e,i);n!==void 0&&(t[r]=n)}const lve=/\/items\/([^\/]+)\/resources\//,uve=/^\.\/resources\//;function cve(e){const t=de(e)?e.match(lve):null;return de(t)?t[1]:null}function gQ(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?hO(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function uR(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=sN();return V2(i,`${i.scheme}://${r}`)?hO(e,t.portalHostname,r):hO(e,r,t.portalHostname)}var K2;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(K2||(K2={}));const qot=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:pb,toJSON:iS,read:VN,write:Ag,itemIdFromResourceUrl:cve,ensureMainOnlineDomain:gQ,get MarkKeep(){return K2}},Symbol.toStringTag,{value:"Module"}));var cR;const hve=en()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let zm=cR=class extends Je{constructor(e){super(e)}readHref(e,t,r){return e?pb(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Wg(e)?t.dataURI=e:(t.href=iS(e,i),Ba(t.href)&&(t.href=Va(t.href))))}clone(){return new cR({href:this.href,primitive:this.primitive})}};h([f({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],zm.prototype,"href",void 0),h([Ke("href")],zm.prototype,"readHref",null),h([et("href",{href:{type:String},dataURI:{type:String}})],zm.prototype,"writeHref",null),h([Ft(hve)],zm.prototype,"primitive",void 0),zm=cR=h([me("esri.symbols.support.IconSymbol3DLayerResource")],zm);var hR;let O1=hR=class extends kt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new hR({x:this.x,y:this.y})}};h([f({type:Number})],O1.prototype,"x",void 0),h([f({type:Number})],O1.prototype,"y",void 0),O1=hR=h([me("esri.symbols.support.Symbol3DAnchorPosition2D")],O1);var pR;let t_=pR=class extends Je{constructor(e){super(e),this.color=new xt([0,0,0,1]),this.size=ah(1)}clone(){const e={color:de(this.color)?this.color.clone():null,size:this.size};return new pR(e)}};h([f(om)],t_.prototype,"color",void 0),h([f(lh)],t_.prototype,"size",void 0),t_=pR=h([me("esri.symbols.support.Symbol3DIconOutline")],t_);var H0;const pve=ot.getLogger("esri.symbols.IconSymbol3DLayer");let xc=H0=class extends gh{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new H0({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:de(this.material)?this.material.clone():null,outline:de(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||K_,r=EU(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||K_).clone()}:null;return new H0({size:e.size,resource:{primitive:fve(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||F1e(e.color)?K_:e.color,r=EU(e);return new H0({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new H0({resource:{href:$K({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function EU(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=MU(e.xoffset),n=MU(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function MU(e){return isFinite(e)?e:0}h([f({type:qa,json:{write:!0}})],xc.prototype,"material",void 0),h([f({type:zm,json:{write:!0}})],xc.prototype,"resource",void 0),h([Ft({Icon:"icon"},{readOnly:!0})],xc.prototype,"type",void 0),h([f(lh)],xc.prototype,"size",void 0),h([Ft({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),f({json:{default:"center"}})],xc.prototype,"anchor",void 0),h([f({type:O1,json:{type:[Number],read:{reader:e=>new O1({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],xc.prototype,"anchorPosition",void 0),h([f({type:t_,json:{write:!0}})],xc.prototype,"outline",void 0),xc=H0=h([me("esri.symbols.IconSymbol3DLayer")],xc);const dve={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function fve(e){return dve[e]||(pve.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Ny=xc;ot.getLogger("esri.core.Clonable");const ua=e=>{let t=class extends e{clone(){const r=zpe(Mn(this),"unable to clone instance of non-accessor class"),i=r.metadatas,n=r.store,s={},o=new Map;for(const l in i){const u=i[l],c=n?.originOf(l),p=u.clonable;if(u.readOnly||p===!1||c!==bt.USER&&c!==bt.DEFAULTS&&c!==bt.WEB_MAP&&c!==bt.WEB_SCENE)continue;const d=this[l];let m=null;m=typeof p=="function"?p(d):p==="reference"?d:Jk(d),d!=null&&m==null||(c===bt.DEFAULTS?o.set(l,m):s[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const l=Mn(a)?.store;if(l)for(const[u,c]of o)l.set(u,c,bt.DEFAULTS)}return a}};return t=h([me("esri.core.Clonable")],t),t};let IU=class extends ua(kt){};IU=h([me("esri.core.Clonable")],IU);let Gm=class extends ua(Je){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return de(e)&&e.placement===this.placement&&e.style===this.style&&(Ne(this.color)&&Ne(e.color)||de(this.color)&&de(e.color)&&this.color.toJSON()===e.color.toJSON())}};h([f({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Gm.prototype,"type",void 0),h([f({type:k1e,json:{default:"begin-end",write:!0}})],Gm.prototype,"placement",void 0),h([f({type:aQ,json:{default:"arrow",write:!0}})],Gm.prototype,"style",void 0),h([f({type:xt,json:{type:[fr],default:null,write:!0}})],Gm.prototype,"color",void 0),Gm=h([me("esri.symbols.LineStyleMarker3D")],Gm);const dR=Gm;var IM;let Sc=IM=class extends gh{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ah(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:de(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:de(this.pattern)?this.pattern.clone():null,marker:de(this.marker)?this.marker.clone():null};return new IM(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??ah(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new DN({style:e.style}):null,material:new qa({color:(e.color||K_).clone()}),marker:e.marker?new dR({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new IM(t)}};h([f({type:qa,json:{write:!0}})],Sc.prototype,"material",void 0),h([Ft({Line:"line"},{readOnly:!0})],Sc.prototype,"type",void 0),h([f({type:dQ,json:{write:!0,default:"miter"}})],Sc.prototype,"join",void 0),h([f({type:UN,json:{write:!0,default:"butt"}})],Sc.prototype,"cap",void 0),h([f(lh)],Sc.prototype,"size",void 0),h([f(pQ)],Sc.prototype,"pattern",void 0),h([f({types:{key:"type",base:dR,typeMap:{style:dR}},json:{write:!0}})],Sc.prototype,"marker",void 0),Sc=IM=h([me("esri.symbols.LineSymbol3DLayer")],Sc);const nS=Sc;var fR;const mve=en()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let r_=fR=class extends Je{clone(){return new fR({href:this.href,primitive:this.primitive})}};h([f({type:String,json:{read:VN,write:Ag}})],r_.prototype,"href",void 0),h([Ft(mve)],r_.prototype,"primitive",void 0),r_=fR=h([me("esri.symbols.support.ObjectSymbol3DLayerResource")],r_);var mR;let Sy=mR=class extends kt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new mR({x:this.x,y:this.y,z:this.z})}};h([f({type:Number})],Sy.prototype,"x",void 0),h([f({type:Number})],Sy.prototype,"y",void 0),h([f({type:Number})],Sy.prototype,"z",void 0),Sy=mR=h([me("esri.symbols.support.Symbol3DAnchorPosition3D")],Sy);var yR;let Ms=yR=class extends gh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new yR({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:de(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};h([f({type:qa,json:{write:!0}})],Ms.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ms.prototype,"castShadows",void 0),h([f({type:r_,json:{write:!0}})],Ms.prototype,"resource",void 0),h([Ft({Object:"object"},{readOnly:!0})],Ms.prototype,"type",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"width",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"height",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"depth",void 0),h([Ft({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),f({json:{default:"origin"}})],Ms.prototype,"anchor",void 0),h([f({type:Sy,json:{type:[Number],read:{reader:e=>new Sy({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ms.prototype,"anchorPosition",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"heading",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"tilt",void 0),h([f({type:Number,json:{write:!0}})],Ms.prototype,"roll",void 0),h([f({readOnly:!0})],Ms.prototype,"isPrimitive",null),Ms=yR=h([me("esri.symbols.ObjectSymbol3DLayer")],Ms);const BN=Ms;var gR;let eo=gR=class extends gh{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new gR({enabled:this.enabled,material:de(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};h([f({type:qa,json:{write:!0}})],eo.prototype,"material",void 0),h([f({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],eo.prototype,"castShadows",void 0),h([Ft({Path:"path"},{readOnly:!0})],eo.prototype,"type",void 0),h([f({type:["circle","quad"],json:{write:!0,default:"circle"}})],eo.prototype,"profile",void 0),h([f({type:dQ,json:{write:!0,default:"miter"}})],eo.prototype,"join",void 0),h([f({type:rve,json:{write:!0,default:"butt"}})],eo.prototype,"cap",void 0),h([f({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],eo.prototype,"width",void 0),h([Ke("width",["width","size","height"])],eo.prototype,"readWidth",null),h([f({type:Number,json:{write:!0}})],eo.prototype,"height",void 0),h([Ke("height",["height","size","width"])],eo.prototype,"readHeight",null),h([f({type:["center","bottom","top"],json:{write:!0,default:"center"}})],eo.prototype,"anchor",void 0),h([f({type:["heading","all"],json:{write:!0,default:"all"}})],eo.prototype,"profileRotation",void 0),eo=gR=h([me("esri.symbols.PathSymbol3DLayer")],eo);const zN=eo;var vR;let R1=vR=class extends Je{constructor(){super(...arguments),this.color=new xt([0,0,0,1]),this.size=0}clone(){const e={color:Pe(this.color),size:this.size};return new vR(e)}};h([f(om)],R1.prototype,"color",void 0),h([f(lh)],R1.prototype,"size",void 0),R1=vR=h([me("esri.symbols.support.Symbol3DHalo")],R1);let Q_=class extends ua(Je){constructor(e){super(e),this.color=null}};h([f(om)],Q_.prototype,"color",void 0),Q_=h([me("esri.symbols.support.Symbol3DTextBackground")],Q_);var TM;let Eo=TM=class extends gh{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){de(e)&&de(this._userSize)&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return de(this._userSize)?this._userSize:de(this.font)&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,de(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new TM({enabled:this.enabled,font:this.font&&Pe(this.font),halo:this.halo&&Pe(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:de(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Pe(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new TM({font:de(e.font)?e.font.clone():new l4,halo:yve(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new qa({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Q_({color:e.backgroundColor.clone()}):null})}};function yve(e,t){return e&&t>0?new R1({color:Pe(e),size:t}):null}h([f({type:l4,json:{write:!0}})],Eo.prototype,"font",null),h([et("font")],Eo.prototype,"writeFont",null),h([f({type:R1,json:{write:!0}})],Eo.prototype,"halo",void 0),h([f({...mQ,json:{default:"center",write:!0}})],Eo.prototype,"horizontalAlignment",void 0),h([f({...fQ,json:{default:1,write:!0}})],Eo.prototype,"lineHeight",void 0),h([f({type:qa,json:{write:!0}})],Eo.prototype,"material",void 0),h([f({type:Q_,json:{write:!0}})],Eo.prototype,"background",void 0),h([f(lh)],Eo.prototype,"size",null),h([f({type:String,json:{write:!0}})],Eo.prototype,"text",void 0),h([Ft({Text:"text"},{readOnly:!0})],Eo.prototype,"type",void 0),h([f({...yQ,json:{default:"baseline",write:!0}})],Eo.prototype,"verticalAlignment",void 0),Eo=TM=h([me("esri.symbols.TextSymbol3DLayer")],Eo);const db=Eo;var bR;let Md=bR=class extends gh{constructor(e){super(e),this.color=wR.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new bR({color:Pe(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};h([f({type:xt,nonNullable:!0,json:{type:[fr],write:(e,t,r)=>t[r]=e.toArray(xt.AlphaMode.UNLESS_OPAQUE),default:()=>wR.clone(),defaultEquals:e=>e.toCss(!0)===wR.toCss(!0)}})],Md.prototype,"color",void 0),h([Ft({Water:"water"},{readOnly:!0})],Md.prototype,"type",void 0),h([f({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Md.prototype,"waterbodySize",void 0),h([f({type:Number,json:{write:!0,default:null}})],Md.prototype,"waveDirection",void 0),h([f({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Md.prototype,"waveStrength",void 0),Md=bR=h([me("esri.symbols.WaterSymbol3DLayer")],Md);const wR=new xt([0,119,190]),vQ=Md;var _R;let qm=_R=class extends kt{constructor(){super(...arguments),this.portal=null}clone(){return new _R({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};h([f({type:String})],qm.prototype,"name",void 0),h([f({type:String})],qm.prototype,"styleUrl",void 0),h([f({type:String})],qm.prototype,"styleName",void 0),h([f({type:qs})],qm.prototype,"portal",void 0),qm=_R=h([me("esri.symbols.support.StyleOrigin")],qm);const xR=qm;var SR;let X_=SR=class extends kt{clone(){return new SR({url:this.url})}};h([f({type:String})],X_.prototype,"url",void 0),X_=SR=h([me("esri.symbols.support.Thumbnail")],X_);const bQ={icon:Ny,object:BN,line:nS,path:zN,fill:a4,extrude:oQ,text:db,water:vQ},gve=Lt.ofType({base:gh,key:"type",typeMap:bQ,errorContext:"symbol-layer"}),vve=ot.getLogger("esri.symbols.Symbol3D");let Ec=class extends So{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||Lt;this._set("symbolLayers",new r)}get color(){return null}set color(e){this.initialized&&vve.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){_g(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const i=pb(e.styleUrl,r);return new xR({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new xR({portal:r&&r.portal||qs.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new zs("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,i){if(e.styleUrl&&e.name){let n=iS(e.styleUrl,i);Ba(n)&&(n=Va(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&i&&i.portal&&!IK(e.portal.restUrl,i.portal.restUrl)?i&&i.messages&&i.messages.push(new zs("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof gh||e&&bQ[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};h([f({json:{read:!1,write:!1}})],Ec.prototype,"color",null),h([f({type:gve,nonNullable:!0,json:{write:!0}}),ur(fK)],Ec.prototype,"symbolLayers",null),h([f({type:xR})],Ec.prototype,"styleOrigin",void 0),h([Ke("styleOrigin")],Ec.prototype,"readStyleOrigin",null),h([et("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],Ec.prototype,"writeStyleOrigin",null),h([f({type:X_,json:{read:!1}})],Ec.prototype,"thumbnail",void 0),h([f({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],Ec.prototype,"type",void 0),Ec=h([me("esri.symbols.Symbol3D")],Ec);const fb=Ec;let i_=class extends Je{constructor(e){super(e),this.visible=!0}clone(){}};h([f({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],i_.prototype,"type",void 0),h([f({readOnly:!0})],i_.prototype,"visible",void 0),i_=h([me("esri.symbols.callouts.Callout3D")],i_);const wQ=i_;var ER;let AM=ER=class extends Je{constructor(){super(...arguments),this.color=new xt("white")}clone(){return new ER({color:Pe(this.color)})}};h([f(om)],AM.prototype,"color",void 0),AM=ER=h([me("esri.symbols.callouts.LineCallout3DBorder")],AM);const _Q=AM;Object.freeze(Object.defineProperty({__proto__:null,default:_Q},Symbol.toStringTag,{value:"Module"}));var MR;let Id=MR=class extends wQ{constructor(e){super(e),this.type="line",this.color=new xt([0,0,0,1]),this.size=ah(1),this.border=null}get visible(){return this.size>0&&de(this.color)&&this.color.a>0}clone(){return new MR({color:Pe(this.color),size:this.size,border:Pe(this.border)})}};h([Ft({line:"line"},{readOnly:!0})],Id.prototype,"type",void 0),h([f(om)],Id.prototype,"color",void 0),h([f(lh)],Id.prototype,"size",void 0),h([f({type:_Q,json:{write:!0}})],Id.prototype,"border",void 0),h([f({readOnly:!0})],Id.prototype,"visible",null),Id=MR=h([me("esri.symbols.callouts.LineCallout3D")],Id);const bve=Id;function GN(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function xQ(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!GN(e)}const SQ={types:{key:"type",base:wQ,typeMap:{line:bve}},json:{write:!0}};var IR;let Ey=IR=class extends Je{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new IR({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};h([f(lh)],Ey.prototype,"screenLength",void 0),h([f({type:Number,json:{write:!0,default:0}})],Ey.prototype,"minWorldLength",void 0),h([f({type:Number,json:{write:!0}})],Ey.prototype,"maxWorldLength",void 0),Ey=IR=h([me("esri.symbols.support.Symbol3DVerticalOffset")],Ey);var $M;const EQ=Lt.ofType({base:null,key:"type",typeMap:{text:db}});let Td=$M=class extends fb{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new EQ,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return xQ(this)}hasVisibleVerticalOffset(){return GN(this)}clone(){return new $M({styleOrigin:Pe(this.styleOrigin),symbolLayers:Pe(this.symbolLayers),thumbnail:Pe(this.thumbnail),callout:Pe(this.callout),verticalOffset:Pe(this.verticalOffset)})}static fromTextSymbol(e){return new $M({symbolLayers:[db.fromTextSymbol(e)]})}};h([f({type:Ey,json:{write:!0}})],Td.prototype,"verticalOffset",void 0),h([f(SQ)],Td.prototype,"callout",void 0),h([f({json:{read:!1,write:!1}})],Td.prototype,"styleOrigin",void 0),h([f({type:EQ})],Td.prototype,"symbolLayers",void 0),h([Ft({LabelSymbol3D:"label-3d"},{readOnly:!0})],Td.prototype,"type",void 0),Td=$M=h([me("esri.symbols.LabelSymbol3D")],Td);const u4=Td;var CM;const MQ=Lt.ofType({base:null,key:"type",typeMap:{line:nS,path:zN}}),wve=Lt.ofType({base:null,key:"type",typeMap:{line:nS,path:zN}});let n_=CM=class extends fb{constructor(e){super(e),this.symbolLayers=new MQ,this.type="line-3d"}clone(){return new CM({styleOrigin:Pe(this.styleOrigin),symbolLayers:Pe(this.symbolLayers),thumbnail:Pe(this.thumbnail)})}static fromSimpleLineSymbol(e){return new CM({symbolLayers:[nS.fromSimpleLineSymbol(e)]})}};h([f({type:MQ,json:{type:wve}})],n_.prototype,"symbolLayers",void 0),h([Ft({LineSymbol3D:"line-3d"},{readOnly:!0})],n_.prototype,"type",void 0),n_=CM=h([me("esri.symbols.LineSymbol3D")],n_);const c4=n_;let Ad=class extends So{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};h([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ad.prototype,"angle",void 0),h([f({type:["simple-marker","picture-marker"],readOnly:!0})],Ad.prototype,"type",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Ad.prototype,"xoffset",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Ad.prototype,"yoffset",void 0),h([f({type:Number,cast:e=>e==="auto"?e:Er(e),json:{write:!0}})],Ad.prototype,"size",void 0),Ad=h([me("esri.symbols.MarkerSymbol")],Ad);const IQ=Ad;var TR;const TQ=Lt.ofType({base:null,key:"type",typeMap:{fill:a4}});let s_=TR=class extends fb{constructor(e){super(e),this.symbolLayers=new TQ,this.type="mesh-3d"}clone(){return new TR({styleOrigin:Pe(this.styleOrigin),symbolLayers:Pe(this.symbolLayers),thumbnail:Pe(this.thumbnail)})}};h([f({type:TQ})],s_.prototype,"symbolLayers",void 0),h([Ft({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],s_.prototype,"type",void 0),s_=TR=h([me("esri.symbols.MeshSymbol3D")],s_);const qN=s_;function _ve(e,t,r){return t.imageData?$K({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):AQ(t.url,r)}function AQ(e,t){return Sve(t)&&!Ba(e)&&t.layer.parsedUrl?xg(t.layer.parsedUrl.path,"images",e):pb(e,t)}function xve(e,t,r,i){if(Wg(e)){const n=AK(e);t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&Ag(r.url,t,"url",i)}else Ag(e,t,"url",i)}const $Q={json:{read:{source:["imageData","url"],reader:_ve},write:{writer(e,t,r,i){xve(e,t,this.source,i)}}}},CQ={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=AQ(t.url,r)),i}}}};function Sve(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var AR;let gl=AR=class extends lQ{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=Er(r)),i!=null&&(n.height=Er(i)),n}clone(){const e=new AR({color:Pe(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Pe(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};h([Ft({esriPFS:"picture-fill"},{readOnly:!0})],gl.prototype,"type",void 0),h([f($Q)],gl.prototype,"url",void 0),h([f({type:Number,json:{write:!0}})],gl.prototype,"xscale",void 0),h([f({type:Number,json:{write:!0}})],gl.prototype,"yscale",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],gl.prototype,"width",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],gl.prototype,"height",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],gl.prototype,"xoffset",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],gl.prototype,"yoffset",void 0),h([f(CQ)],gl.prototype,"source",void 0),gl=AR=h([me("esri.symbols.PictureFillSymbol")],gl);const kQ=gl;var $R;let nu=$R=class extends IQ{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Er(t)),r!=null&&(i.height=Er(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new $R({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Pe(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};h([f({json:{write:!1}})],nu.prototype,"color",void 0),h([Ft({esriPMS:"picture-marker"},{readOnly:!0})],nu.prototype,"type",void 0),h([f($Q)],nu.prototype,"url",void 0),h([f(CQ)],nu.prototype,"source",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],nu.prototype,"height",void 0),h([Ke("height",["height","size"])],nu.prototype,"readHeight",null),h([f({type:Number,cast:Er,json:{write:!0}})],nu.prototype,"width",void 0),h([f({json:{write:!1}})],nu.prototype,"size",void 0),nu=$R=h([me("esri.symbols.PictureMarkerSymbol")],nu);const _f=nu;var $d;const OQ=Lt.ofType({base:null,key:"type",typeMap:{icon:Ny,object:BN,text:db}});let Hm=$d=class extends fb{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new OQ,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return xQ(this)}hasVisibleVerticalOffset(){return GN(this)}clone(){return new $d({verticalOffset:Pe(this.verticalOffset),callout:Pe(this.callout),styleOrigin:Pe(this.styleOrigin),symbolLayers:Pe(this.symbolLayers),thumbnail:Pe(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new $d({symbolLayers:[Ny.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new $d({symbolLayers:[Ny.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){return e.data?.symbol?.type!=="CIMPointSymbol"?null:e.data.symbol.callout?new $d({symbolLayers:[Ny.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new $d({symbolLayers:[Ny.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new $d({symbolLayers:[db.fromTextSymbol(e)]})}};h([f({type:Ey,json:{write:!0}})],Hm.prototype,"verticalOffset",void 0),h([f(SQ)],Hm.prototype,"callout",void 0),h([f({type:OQ,json:{origins:{"web-scene":{write:!0}}}})],Hm.prototype,"symbolLayers",void 0),h([Ft({PointSymbol3D:"point-3d"},{readOnly:!0})],Hm.prototype,"type",void 0),Hm=$d=h([me("esri.symbols.PointSymbol3D")],Hm);const Dy=Hm;var o_;const RQ=Lt.ofType({base:null,key:"type",typeMap:{extrude:oQ,fill:a4,icon:Ny,line:nS,object:BN,text:db,water:vQ}});let a_=o_=class extends fb{constructor(e){super(e),this.symbolLayers=new RQ,this.type="polygon-3d"}clone(){return new o_({styleOrigin:Pe(this.styleOrigin),symbolLayers:Pe(this.symbolLayers),thumbnail:Pe(this.thumbnail)})}static fromJSON(e){const t=new o_;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const r=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:de(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new o_({symbolLayers:[a4.fromSimpleFillSymbol(e)]})}};h([f({type:RQ,json:{write:!0}})],a_.prototype,"symbolLayers",void 0),h([Ft({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],a_.prototype,"type",void 0),a_=o_=h([me("esri.symbols.PolygonSymbol3D")],a_);const sS=a_;var CR;const O$=new Xt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wm=CR=class extends lQ{constructor(...e){super(...e),this.color=new xt([0,0,0,.25]),this.outline=new la,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new CR({color:Pe(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};h([f()],Wm.prototype,"color",void 0),h([f()],Wm.prototype,"outline",void 0),h([Ft({esriSFS:"simple-fill"},{readOnly:!0})],Wm.prototype,"type",void 0),h([f({type:O$.apiValues,json:{read:O$.read,write:O$.write}})],Wm.prototype,"style",void 0),Wm=CR=h([me("esri.symbols.SimpleFillSymbol")],Wm);const Vp=Wm;var kR;const R$=new Xt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Mc=kR=class extends IQ{constructor(...e){super(...e),this.color=new xt([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new la}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Er(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new kR({angle:this.angle,color:Pe(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};h([f()],Mc.prototype,"color",void 0),h([et("color")],Mc.prototype,"writeColor",null),h([Ft({esriSMS:"simple-marker"},{readOnly:!0})],Mc.prototype,"type",void 0),h([f()],Mc.prototype,"size",void 0),h([f({type:R$.apiValues,json:{read:R$.read,write:R$.write}})],Mc.prototype,"style",void 0),h([f({type:String,json:{write:!0}})],Mc.prototype,"path",null),h([f({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":la}},json:{default:null,write:!0}})],Mc.prototype,"outline",void 0),Mc=kR=h([me("esri.symbols.SimpleMarkerSymbol")],Mc);const Ul=Mc;var OR;let Ei=OR=class extends So{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new l4,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Er(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new OR({angle:this.angle,backgroundColor:Pe(this.backgroundColor),borderLineColor:Pe(this.borderLineColor),borderLineSize:this.borderLineSize,color:Pe(this.color),font:this.font&&this.font.clone(),haloColor:Pe(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};h([f({type:xt,json:{write:!0}})],Ei.prototype,"backgroundColor",void 0),h([f({type:xt,json:{write:!0}})],Ei.prototype,"borderLineColor",void 0),h([f({type:Number,json:{write:!0}})],Ei.prototype,"borderLineSize",void 0),h([f({type:l4,json:{write:!0}})],Ei.prototype,"font",void 0),h([f({...mQ,json:{write:!0}})],Ei.prototype,"horizontalAlignment",void 0),h([f({type:Boolean,json:{write:!0}})],Ei.prototype,"kerning",void 0),h([f({type:xt,json:{write:!0}})],Ei.prototype,"haloColor",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Ei.prototype,"haloSize",void 0),h([f({type:Boolean,json:{write:!0}})],Ei.prototype,"rightToLeft",void 0),h([f({type:Boolean,json:{write:!0}})],Ei.prototype,"rotated",void 0),h([f({type:String,json:{write:!0}})],Ei.prototype,"text",void 0),h([Ft({esriTS:"text"},{readOnly:!0})],Ei.prototype,"type",void 0),h([f({...yQ,json:{write:!0}})],Ei.prototype,"verticalAlignment",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Ei.prototype,"xoffset",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],Ei.prototype,"yoffset",void 0),h([f({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Ei.prototype,"angle",void 0),h([f({type:Number,json:{write:!0}})],Ei.prototype,"width",void 0),h([f({type:Number})],Ei.prototype,"lineWidth",void 0),h([et("lineWidth")],Ei.prototype,"writeLineWidth",null),h([ur("lineWidth")],Ei.prototype,"castLineWidth",null),h([f(fQ)],Ei.prototype,"lineHeight",void 0),h([et("lineHeight")],Ei.prototype,"writeLineHeight",null),Ei=OR=h([me("esri.symbols.TextSymbol")],Ei);const mb=Ei;var RR;const Eve=ot.getLogger("esri.symbols.WebStyleSymbol");let su=RR=class extends So{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const e=de(this.portal)?this.portal:qs.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new RR({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=de(t)?t.cache:null,i=r?this.fetchCacheKey:null;if(de(r)){const a=r.get(i);if(a)return a.clone()}const n=await Mve();ui(t);const s=n.resolveWebStyleSymbol(this,{portal:this.portal},e,t);s.catch(a=>{Eve.error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(de(r)&&r.set(i,o.clone()),o):null}};function Mve(){return Be(()=>import("./webStyleSymbolUtils.d53f23ac.js"),["assets/webStyleSymbolUtils.d53f23ac.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/preload-helper.387dac8f.js"])}h([f({json:{write:!1}})],su.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],su.prototype,"styleName",void 0),h([f({type:qs,json:{write:!1}})],su.prototype,"portal",void 0),h([f({type:String,json:{read:VN,write:Ag}})],su.prototype,"styleUrl",void 0),h([f({type:X_,json:{read:!1}})],su.prototype,"thumbnail",void 0),h([f({type:String,json:{write:!0}})],su.prototype,"name",void 0),h([Ft({styleSymbolReference:"web-style"},{readOnly:!0})],su.prototype,"type",void 0),h([f()],su.prototype,"fetchCacheKey",null),su=RR=h([me("esri.symbols.WebStyleSymbol")],su);const Kg=su;function h4(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function $g(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const ng={base:So,key:"type",typeMap:{"simple-fill":Vp,"picture-fill":kQ,"picture-marker":_f,"simple-line":la,"simple-marker":Ul,text:mb,"label-3d":u4,"line-3d":c4,"mesh-3d":qN,"point-3d":Dy,"polygon-3d":sS,"web-style":Kg,cim:rS},errorContext:"symbol"},Ive={base:So,key:"type",typeMap:{"picture-marker":_f,"simple-marker":Ul,text:mb,"web-style":Kg,cim:rS},errorContext:"symbol"},Tve=ob({types:ng}),PQ={base:So,key:"type",typeMap:{"simple-fill":Vp,"picture-fill":kQ,"picture-marker":_f,"simple-line":la,"simple-marker":Ul,text:mb,"line-3d":c4,"mesh-3d":qN,"point-3d":Dy,"polygon-3d":sS,"web-style":Kg,cim:rS},errorContext:"symbol"},Ave={base:So,key:"type",typeMap:{text:mb,"label-3d":u4},errorContext:"symbol"},TU={base:So,key:"type",typeMap:{"line-3d":c4,"mesh-3d":qN,"point-3d":Dy,"polygon-3d":sS,"web-style":Kg,cim:rS},errorContext:"symbol"},$ve={base:So,key:"type",typeMap:{"label-3d":u4},errorContext:"symbol"},LQ=oh(ng);function Cve(e){if(!e)return null;const t={};for(const r in e){const i=Hu(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function kve(e){if(!de(e))return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Mo=class extends ua(Je){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:G_(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&de(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:kve(this.aggregateGeometries),geometry:de(this.geometry)?this.geometry.toJSON():null,symbol:de(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){de(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}};h([f({value:null,json:{read:Cve}})],Mo.prototype,"aggregateGeometries",null),h([f({value:null})],Mo.prototype,"attributes",null),h([f({value:null,types:Up,json:{read:Hu}})],Mo.prototype,"geometry",null),h([f({type:Boolean})],Mo.prototype,"isAggregate",void 0),h([f({clonable:"reference"})],Mo.prototype,"layer",void 0),h([f({type:sm})],Mo.prototype,"popupTemplate",void 0),h([f({clonable:"reference"})],Mo.prototype,"sourceLayer",void 0),h([f({value:null,types:ng})],Mo.prototype,"symbol",null),h([f({type:Boolean,value:!0})],Mo.prototype,"visible",null),Mo=h([me("esri.Graphic")],Mo),function(e){e.generateUID=G_}(Mo||(Mo={}));const fs=Mo;var PR;let l_=PR=class extends Je{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new PR({minValue:this.minValue,maxValue:this.maxValue})}};h([f({type:Number,json:{write:!0}})],l_.prototype,"minValue",void 0),h([f({type:Number,json:{write:!0}})],l_.prototype,"maxValue",void 0),l_=PR=h([me("esri.renderer.support.AuthoringInfoClassBreakInfo")],l_);var LR;let Zd=LR=class extends Je{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new LR({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Pe(this.classBreakInfos)})}};h([f({type:String,json:{write:!0}})],Zd.prototype,"field",void 0),h([f({type:String,json:{write:!0}})],Zd.prototype,"normalizationField",void 0),h([f({type:String,json:{write:!0}})],Zd.prototype,"label",void 0),h([f({type:[l_],json:{write:!0}})],Zd.prototype,"classBreakInfos",void 0),Zd=LR=h([me("esri.renderers.support.AuthoringInfoFieldInfo")],Zd);var NR;const M3=new Xt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),I3=new Xt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),AU={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},$U=["high-to-low","above-and-below","centered-on","extremes"],CU=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],kU=["seconds","minutes","hours","days","months","years"];let Io=NR=class extends Je{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new NR({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};h([f({types:AU,json:{write:!0}})],Io.prototype,"endTime",void 0),h([ur("endTime")],Io.prototype,"castEndTime",null),h([f({type:String,json:{write:!0}})],Io.prototype,"field",void 0),h([f({type:Number,json:{write:!0}})],Io.prototype,"maxSliderValue",void 0),h([f({type:Number,json:{write:!0}})],Io.prototype,"minSliderValue",void 0),h([f({types:AU,json:{write:!0}})],Io.prototype,"startTime",void 0),h([ur("startTime")],Io.prototype,"castStartTime",null),h([f({type:M3.apiValues,value:null,json:{type:M3.jsonValues,read:M3.read,write:M3.write}})],Io.prototype,"style",null),h([f({type:CU,value:null,json:{type:CU,origins:{"web-scene":{type:$U,write:{writer:(e,t)=>{$U.includes(e)&&(t.theme=e)}}}},write:!0}})],Io.prototype,"theme",null),h([f({type:I3.apiValues,json:{type:I3.jsonValues,read:I3.read,write:I3.write}})],Io.prototype,"type",void 0),h([f({type:kU,json:{type:kU,write:!0}})],Io.prototype,"units",void 0),Io=NR=h([me("esri.renderers.support.AuthoringInfoVisualVariable")],Io);const Ove=Io;let kM=class extends Je{constructor(e){super(e),this.type=null}};h([f({readOnly:!0,json:{read:!1,write:!0}})],kM.prototype,"type",void 0),kM=h([me("esri.rest.support.ColorRamp")],kM);const HN=kM;var DR;let Jm=DR=class extends HN{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new DR({fromColor:Pe(this.fromColor),toColor:Pe(this.toColor),algorithm:this.algorithm})}};h([Ft({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Jm.prototype,"algorithm",void 0),h([f({type:xt,json:{type:[fr],write:!0}})],Jm.prototype,"fromColor",void 0),h([f({type:xt,json:{type:[fr],write:!0}})],Jm.prototype,"toColor",void 0),h([f({type:["algorithmic"]})],Jm.prototype,"type",void 0),Jm=DR=h([me("esri.rest.support.AlgorithmicColorRamp")],Jm);const WN=Jm;var FR;let u_=FR=class extends HN{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new FR({colorRamps:Pe(this.colorRamps)})}};h([f({type:[WN],json:{write:!0}})],u_.prototype,"colorRamps",void 0),h([f({type:["multipart"]})],u_.prototype,"type",void 0),u_=FR=h([me("esri.rest.support.MultipartColorRamp")],u_);const p4=u_,d4={key:"type",base:HN,typeMap:{algorithmic:WN,multipart:p4}};function f4(e){return e&&e.type?e.type==="algorithmic"?WN.fromJSON(e):e.type==="multipart"?p4.fromJSON(e):null:null}var jR;const vm=new Xt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),T3=new Xt({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),OU=new Xt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),RU=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Rve=["high-to-low","above-and-below","above","below","90-10"],Pve=["flow-line","wave-front"],Lve=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let tn=jR=class extends Je{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return f4(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new jR({classificationMethod:this.classificationMethod,colorRamp:Pe(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:Pe(this.field1),field2:Pe(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};h([f({type:vm.apiValues,value:null,json:{type:vm.jsonValues,read:vm.read,write:vm.write,origins:{"web-document":{default:"manual",type:vm.jsonValues,read:vm.read,write:vm.write}}}})],tn.prototype,"classificationMethod",null),h([f({types:d4,json:{write:!0}})],tn.prototype,"colorRamp",void 0),h([Ke("colorRamp")],tn.prototype,"readColorRamp",null),h([f({type:[String],value:null,json:{write:!0}})],tn.prototype,"fields",null),h([f({type:Zd,value:null,json:{write:!0}})],tn.prototype,"field1",null),h([f({type:Zd,value:null,json:{write:!0}})],tn.prototype,"field2",null),h([f({type:Pve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],tn.prototype,"flowTheme",null),h([f({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],tn.prototype,"focus",null),h([f({type:Number,value:null,json:{type:fr,write:!0}})],tn.prototype,"numClasses",null),h([f({type:RU,json:{type:RU,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],tn.prototype,"lengthUnit",void 0),h([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],tn.prototype,"maxSliderValue",void 0),h([f({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],tn.prototype,"minSliderValue",void 0),h([f({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],tn.prototype,"statistics",null),h([f({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],tn.prototype,"standardDeviationInterval",null),h([f({type:T3.apiValues,value:null,json:{type:T3.jsonValues,read:T3.read,write:T3.write,origins:{"web-scene":{type:OU.jsonValues,write:{writer:OU.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],tn.prototype,"type",null),h([f({type:[Ove],json:{write:!0}})],tn.prototype,"visualVariables",void 0),h([f({type:Lve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],tn.prototype,"univariateSymbolStyle",null),h([f({type:Rve,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],tn.prototype,"univariateTheme",null),tn=jR=h([me("esri.renderers.support.AuthoringInfo")],tn);const m4=tn,P$=new Xt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let c_=class extends Je{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};h([f({type:m4,json:{write:!0}})],c_.prototype,"authoringInfo",void 0),h([f({type:P$.apiValues,readOnly:!0,json:{type:P$.jsonValues,read:!1,write:{writer:P$.write,ignoreOrigin:!0}}})],c_.prototype,"type",void 0),c_=h([me("esri.renderers.Renderer")],c_);const Bp=c_;var UR;let sg=UR=class extends Je{constructor(){super(...arguments),this.title=null}clone(){return new UR({title:this.title})}};h([f({type:String,json:{write:!0}})],sg.prototype,"title",void 0),sg=UR=h([me("esri.renderers.support.LegendOptions")],sg);var VR;let OM=VR=class extends sg{constructor(){super(...arguments),this.showLegend=null}clone(){return new VR({title:this.title,showLegend:this.showLegend})}};h([f({type:Boolean,json:{write:!0}})],OM.prototype,"showLegend",void 0),OM=VR=h([me("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],OM);const NQ=OM,Nve=ot.getLogger("esri.renderers.visualVariables.VisualVariable"),L$=new Xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ou=class extends Je{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Nve.error(".field: field must be a string value"),null):Kx(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};h([f()],ou.prototype,"index",void 0),h([f({type:L$.apiValues,readOnly:!0,json:{read:L$.read,write:L$.write}})],ou.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],ou.prototype,"field",void 0),h([ur("field")],ou.prototype,"castField",null),h([f({type:String,json:{write:!0}})],ou.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],ou.prototype,"valueExpressionTitle",void 0),h([f({readOnly:!0})],ou.prototype,"arcadeRequired",null),h([f({type:NQ,json:{write:!0}})],ou.prototype,"legendOptions",void 0),ou=h([me("esri.renderers.visualVariables.VisualVariable")],ou);const oS=ou;var BR;let Zm=BR=class extends Je{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new BR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};h([f({type:xt,json:{type:[fr],write:!0}})],Zm.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],Zm.prototype,"label",void 0),h([f({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Zm.prototype,"value",void 0),h([et("value")],Zm.prototype,"writeValue",null),Zm=BR=h([me("esri.renderers.visualVariables.support.ColorStop")],Zm);const Dve=Zm;var zR;let Km=zR=class extends oS{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new zR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([f({readOnly:!0})],Km.prototype,"cache",null),h([f({type:["color"],json:{type:["colorInfo"]}})],Km.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Km.prototype,"normalizationField",void 0),h([f({type:[Dve],json:{write:!0}})],Km.prototype,"stops",null),Km=zR=h([me("esri.renderers.visualVariables.ColorVariable")],Km);const DQ=Km;var GR;let Cd=GR=class extends Je{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Z2(t.transparency)}writeOpacity(e,t,r){t[r]=o4(e)}clone(){return new GR({label:this.label,opacity:this.opacity,value:this.value})}};h([f({type:String,json:{write:!0}})],Cd.prototype,"label",void 0),h([f({type:Number,json:{type:fr,write:{target:"transparency"}}})],Cd.prototype,"opacity",void 0),h([Ke("opacity",["transparency"])],Cd.prototype,"readOpacity",null),h([et("opacity")],Cd.prototype,"writeOpacity",null),h([f({type:Number,json:{write:!0}})],Cd.prototype,"value",void 0),Cd=GR=h([me("esri.renderers.visualVariables.support.OpacityStop")],Cd);const Fve=Cd;var qR;let Ym=qR=class extends oS{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new qR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([f({readOnly:!0})],Ym.prototype,"cache",null),h([f({type:["opacity"],json:{type:["transparencyInfo"]}})],Ym.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Ym.prototype,"normalizationField",void 0),h([f({type:[Fve],json:{write:!0}})],Ym.prototype,"stops",null),Ym=qR=h([me("esri.renderers.visualVariables.OpacityVariable")],Ym);const FQ=Ym;var HR;let Dh=HR=class extends oS{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i&&i.messages){const n=`visualVariables[${this.index}]`;i.messages.push(new $e("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:i}))}}clone(){return new HR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};h([f({readOnly:!0})],Dh.prototype,"cache",null),h([f({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Dh.prototype,"axis",void 0),h([f({type:["rotation"],json:{type:["rotationInfo"]}})],Dh.prototype,"type",void 0),h([f({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Dh.prototype,"rotationType",void 0),h([f({type:String,json:{write:!0}})],Dh.prototype,"valueExpressionTitle",void 0),h([et("web-scene","valueExpressionTitle")],Dh.prototype,"writeValueExpressionTitleWebScene",null),Dh=HR=h([me("esri.renderers.visualVariables.RotationVariable")],Dh);const y4=Dh;var WR;let W0=WR=class extends Je{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new WR({label:this.label,size:this.size,value:this.value})}};h([f({type:String,json:{write:!0}})],W0.prototype,"label",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],W0.prototype,"size",void 0),h([f({type:Number,json:{write:!0}})],W0.prototype,"value",void 0),W0=WR=h([me("esri.renderers.visualVariables.support.SizeStop")],W0);const jve=W0;var JR;let RM=JR=class extends NQ{constructor(){super(...arguments),this.customValues=null}clone(){return new JR({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};h([f({type:[Number],json:{write:!0}})],RM.prototype,"customValues",void 0),RM=JR=h([me("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],RM);const Uve=RM;var _p,Dn;function P1(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function Y2(e){return e!=null&&!isNaN(e)&&isFinite(e)}function jQ(e){return e.valueExpression?_p.Expression:e.field&&typeof e.field=="string"?_p.Field:_p.Unknown}function Vve(e,t){const r=t||jQ(e),i=e.valueUnit||"unknown";return r===_p.Unknown?Dn.Constant:e.stops?Dn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Dn.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Dn.Proportional:Dn.Additive:Dn.Identity:Dn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(_p||(_p={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Dn||(Dn={}));function Hot(e){}function Bve(e){return()=>e}function JN(e){return new wt({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const UQ=JN(fi),pI=JN(wp),dI=JN(Ff),zve=new wt({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${fi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function Wot(e){return e&&(lb(e)||e===pI)?pI:e&&(ub(e)||e===dI)?dI:UQ}function Gve(e){return e&&(lb(e)||e===pI)?wp:e&&(ub(e)||e===dI)?Ff:fi}function Jot(e){return pN(e)?wp:dN(e)?Ff:fi}const VQ=39.37,qve=fi.radius*Math.PI/200,BQ=/UNIT\[([^\]]+)\]\]$/i,og=pe,zQ=/UNIT\[([^\]]+)\]/i,Hve=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Wve=en()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),pc=e=>e*e,rd=e=>e*e*e,Q2={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:pc(.001)},"square-centimeters":{inBaseUnits:pc(.01)},"square-decimeters":{inBaseUnits:pc(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:pc(1e3)},"square-inches":{inBaseUnits:pc(.0254)},"square-feet":{inBaseUnits:pc(.3048)},"square-yards":{inBaseUnits:pc(.9144)},"square-miles":{inBaseUnits:pc(1609.344)},"square-us-feet":{inBaseUnits:pc(1200/3937)},acres:{inBaseUnits:.0015625*pc(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*rd(.001)},"cubic-centimeters":{inBaseUnits:1e3*rd(.01)},"cubic-decimeters":{inBaseUnits:1e3*rd(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*rd(1e3)},"cubic-inches":{inBaseUnits:1e3*rd(.0254)},"cubic-feet":{inBaseUnits:1e3*rd(.3048)},"cubic-yards":{inBaseUnits:1e3*rd(.9144)},"cubic-miles":{inBaseUnits:1e3*rd(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Jve=(()=>{const e={};for(const t in Q2)for(const r in Q2[t].units)e[r]=t;return e})();function Zve(e,t,r){return e*Q2[r].units[t].inBaseUnits}function Kve(e,t,r){return e/Q2[r].units[t].inBaseUnits}function ZR(e){const t=Jve[e];if(!t)throw new Error("unknown type");return t}function PU(e,t=null){return t=t||ZR(e),Q2[t].baseUnit===e}function Ma(e,t,r){if(t===r)return e;const i=ZR(t);if(i!==ZR(r))throw new Error("incompatible units");const n=PU(t,i)?e:Zve(e,t,i);return PU(r,i)?n:Kve(n,r,i)}function Yve(e,t,r){return Ma(e,t,"meters")/(r*Math.PI/180)}function GQ(e){return Wve.fromJSON(e.toLowerCase())||null}function wv(e){if(e&&typeof e=="object"&&!Rme(e))return 1;const t=am(e);return t>1e5?1:t}function Qve(e){return am(e)>=(e instanceof wt?Gve(e).metersPerDegree:1e5)?"meters":ebe(e)}function am(e,t=fi.metersPerDegree){return VT(Xve(e,!0),t)}function Xve(e,t=!1){let r,i,n=null;if(e!=null&&(typeof e=="object"?(r=e.wkid,i=e.wkt):typeof e=="number"?r=e:typeof e=="string"&&(i=e)),r){if(pN(r))return wp.metersPerDegree;if(dN(r))return Ff.metersPerDegree;n=og.values[og[r]],!n&&t&&Hve.has(r)&&(n=qve)}else i&&(WQ(i)?n=LU(BQ.exec(i),n):HQ(i)&&(n=LU(zQ.exec(i),n)));return n}function LU(e,t){return e&&e[1]?qQ(e[1]):t}function qQ(e){return parseFloat(e.split(",")[1])}function ebe(e){let t,r,i=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,r=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(r=e)),t)i=og.units[og[t]];else if(r){const n=WQ(r)?BQ:HQ(r)?zQ:null;if(n){const s=n.exec(r);s&&s[1]&&(i=rbe(s[1]))}}return de(i)?GQ(i):null}function HQ(e){return/^GEOCCS/i.test(e)}function WQ(e){return/^PROJCS/i.test(e)}const tbe=1e-7;function rbe(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||!og.units.includes(r)){const i=qQ(e);r=null;const n=og.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<tbe){r=og.units[s];break}}return r}const JQ={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ZQ={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},ibe=en()(JQ),nbe=en()(ZQ);en()({...JQ,...ZQ});const KQ={inches:Ma(1,"meters","inches"),feet:Ma(1,"meters","feet"),"us-feet":Ma(1,"meters","us-feet"),yards:Ma(1,"meters","yards"),miles:Ma(1,"meters","miles"),"nautical-miles":Ma(1,"meters","nautical-miles"),millimeters:Ma(1,"meters","millimeters"),centimeters:Ma(1,"meters","centimeters"),decimeters:Ma(1,"meters","decimeters"),meters:Ma(1,"meters","meters"),kilometers:Ma(1,"meters","kilometers"),"decimal-degrees":1/Yve(1,"meters",fi.radius)},Vf=ot.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),NU=new fs,PM=Math.PI,YQ=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function QQ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Vf.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:u,hasExpression:c}=i.cache;let p=i.cache.compiledFunc;if(!l&&!c){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(c){if(Ne(r)||Ne(r.arcade))return void Vf.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,v=b.getViewInfo(g),_=b.createExecContext(s,v);if(!p){const E=b.createSyntaxTree(i.valueExpression);p=b.createFunction(E),i.cache.compiledFunc=p}a=b.executeFunction(p,_)}else o&&(a=o[l]);const d=i.normalizationField,m=o?parseFloat(o[d]):void 0;if(a!=null&&(!d||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=KN(a,u);if(g){const b=g[0],v=g[1],_=b===v?i.stops[b].color:xt.blendColors(i.stops[b].color,i.stops[v].color,g[2],de(r)?r.color:void 0);return new xt(_)}}}function XQ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Vf.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:u,hasExpression:c}=i.cache;let p=i.cache.compiledFunc;if(!l&&!c){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(c){if(Ne(r)||Ne(r.arcade))return void Vf.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,v=b.getViewInfo(g),_=b.createExecContext(s,v);if(!p){const E=b.createSyntaxTree(i.valueExpression);p=b.createFunction(E),i.cache.compiledFunc=p}a=b.executeFunction(p,_)}else o&&(a=o[l]);const d=i.normalizationField,m=o?parseFloat(o[d]):void 0;if(a!=null&&(!d||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=KN(a,u);if(g){const b=g[0],v=g[1];if(b===v)return i.stops[b].opacity;{const _=i.stops[b].opacity;return _+(i.stops[v].opacity-_)*g[2]}}}}function ZN(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Vf.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,u=i.field,{hasExpression:c}=i.cache;let p=i.cache.compiledFunc,d=0;if(!u&&!c)return d;if(c){if(Ne(r)||Ne(r.arcade))return void Vf.error("Use of arcade expressions requires an arcade context");const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(m),v=g.createExecContext(a,b);if(!p){const _=g.createSyntaxTree(i.valueExpression);p=g.createFunction(_),i.cache.compiledFunc=p}d=g.executeFunction(p,v)}else l&&(d=l[u]||0);return d=typeof d!="number"||isNaN(d)?null:s+o*d,d}function sbe(e,t,r){const i=typeof t=="number",n=i?null:t,s=n&&n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const c=de(r)?r.scale:void 0,p=de(r)?r.view:void 0;o=c==null||p==="3d"?obe(e):c}else if(!i)switch(e.inputValueType){case _p.Expression:{if(Ne(r)||Ne(r.arcade))return void Vf.error("Use of arcade expressions requires an arcade context");const c={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},p=r.arcade.arcadeUtils,d=p.getViewInfo(c),m=p.createExecContext(n,d);if(!l){const g=p.createSyntaxTree(e.valueExpression);l=p.createFunction(g),e.cache.compiledFunc=l}o=p.executeFunction(l,m);break}case _p.Field:s&&(o=s[e.field]);break;case _p.Unknown:o=null}if(!Y2(o))return null;if(i||!e.normalizationField)return o;const u=s?parseFloat(s[e.normalizationField]):null;return Y2(u)&&u!==0?o/u:null}function obe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function g4(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Vf.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=tX(sbe(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function Zo(e,t,r){return e==null?null:P1(e)?g4(e,t,r):Y2(e)?e:null}function eX(e,t,r){return Y2(r)&&e>r?r:Y2(t)&&e<t?t:e}function abe(e,t,r,i){return e+(Zo(t.minSize,r,i)||t.minDataValue)}function lbe(e,t,r){const i=e.stops;let n=i&&i.length&&i[0].size;return n==null&&(n=e.minSize),Zo(n,t,r)}function ube(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=Zo(t.minSize,r,i),o=Zo(t.maxSize,r,i),a=de(i)?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?PM*(s/2)**2:s*s,c=u+n*((l?PM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(c/PM):Math.sqrt(c)}return s+n*(o-s)}function cbe(e,t,r,i){const n=de(i)?i.shape:void 0,s=e/t.minDataValue,o=Zo(t.minSize,r,i),a=Zo(t.maxSize,r,i);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,eX(l,o,a)}function hbe(e,t,r,i,n){const[s,o,a]=KN(e,n);if(s===o)return Zo(t.stops[s].size,r,i);{const l=Zo(t.stops[s].size,r,i);return l+(Zo(t.stops[o].size,r,i)-l)*a}}function pbe(e,t,r,i){const n=(de(i)&&i.resolution?i.resolution:1)*KQ[t.valueUnit],s=Zo(t.minSize,r,i),o=Zo(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/PM)/n:a==="radius"||a==="distance"?2*e/n:e/n,eX(l,s,o)}function tX(e,t,r,i,n){switch(t.transformationType){case Dn.Additive:return abe(e,t,r,i);case Dn.Constant:return lbe(t,r,i);case Dn.ClampedLinear:return ube(e,t,r,i);case Dn.Proportional:return cbe(e,t,r,i);case Dn.Stops:return hbe(e,t,r,i,n);case Dn.RealWorldSize:return pbe(e,t,r,i);case Dn.Identity:return e;case Dn.Unknown:return null}}function dbe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=Zo(e.minSize,NU,n),o=Zo(e.maxSize,NU,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function fbe(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const u=QQ(l,t,r);i.push({variable:l,value:u})}),s.forEach(l=>{const u=XQ(l,t,r);i.push({variable:l,value:u})}),a.forEach(l=>{const u=ZN(l,t,r);i.push({variable:l,value:u})}),o.forEach(l=>{const u=g4(l,t,r);i.push({variable:l,value:u})}),i.filter(l=>l.value!=null)}function KN(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function rX(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":g4(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}var YN=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:rX,getColor:QQ,getOpacity:XQ,getRotationAngle:ZN,getSize:g4,getSizeForValue:tX,getSizeFromNumberOrVariable:Zo,getSizeRangeAtScale:dbe,getVisualVariableValues:fbe,viewScaleRE:YQ},Symbol.toStringTag,{value:"Module"})),KR;const x0=ot.getLogger("esri.renderers.visualVariables.SizeVariable"),A3=new Xt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),YR=new Xt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function DU(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Er(e):e.type==="size"?P1(e)?e:(delete(e={...e}).type,new Fr(e)):void 0}function FU(e,t,r){if(typeof e!="object")return e;const i=new Fr;return i.read(e,r),i}let Fr=KR=class extends oS{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:YQ.test(this.valueExpression)}}set expression(e){x0.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){P1(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),P1(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return jQ(this)}set maxDataValue(e){e&&this.stops&&(x0.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(x0.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return DU(e)}readMaxSize(e,t,r){return FU(e,t,r)}set minDataValue(e){e&&this.stops&&(x0.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(x0.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return DU(e)}readMinSize(e,t,r){return FU(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(x0.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Vve(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new $e("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?YR.read(e):null}clone(){return new KR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:P1(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:P1(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===Dn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Dn.Stops){const e=this.stops,t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([f({readOnly:!0})],Fr.prototype,"cache",null),h([f({type:A3.apiValues,json:{type:A3.jsonValues,origins:{"web-map":{read:!1}},read:A3.read,write:A3.write}})],Fr.prototype,"axis",void 0),h([f({type:String,value:null,json:{read:!1}})],Fr.prototype,"expression",null),h([f()],Fr.prototype,"index",null),h([f({type:String,readOnly:!0})],Fr.prototype,"inputValueType",null),h([f({type:Uve,json:{write:!0}})],Fr.prototype,"legendOptions",void 0),h([f({type:Number,value:null,json:{write:!0}})],Fr.prototype,"maxDataValue",null),h([f({type:Number,value:null,json:{write:!0}})],Fr.prototype,"maxSize",null),h([ur("maxSize")],Fr.prototype,"castMaxSize",null),h([Ke("maxSize")],Fr.prototype,"readMaxSize",null),h([f({type:Number,value:null,json:{write:!0}})],Fr.prototype,"minDataValue",null),h([f({type:Number,value:null,json:{write:!0}})],Fr.prototype,"minSize",null),h([ur("minSize")],Fr.prototype,"castMinSize",null),h([Ke("minSize")],Fr.prototype,"readMinSize",null),h([f({type:String,json:{write:!0}})],Fr.prototype,"normalizationField",void 0),h([f({readOnly:!0})],Fr.prototype,"arcadeRequired",null),h([f({type:String})],Fr.prototype,"scaleBy",void 0),h([f({type:[jve],value:null,json:{write:!0}})],Fr.prototype,"stops",null),h([f({type:["outline"],json:{write:!0}})],Fr.prototype,"target",void 0),h([f({type:String,readOnly:!0})],Fr.prototype,"transformationType",null),h([f({type:["size"],json:{type:["sizeInfo"]}})],Fr.prototype,"type",void 0),h([f({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Fr.prototype,"useSymbolValue",void 0),h([f({type:String,json:{write:!0}})],Fr.prototype,"valueExpression",void 0),h([Ke("valueExpression",["valueExpression","expression"])],Fr.prototype,"readValueExpression",null),h([et("web-scene","valueExpression")],Fr.prototype,"writeValueExpressionWebScene",null),h([f({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Fr.prototype,"valueRepresentation",void 0),h([f({type:YR.apiValues,json:{write:YR.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Fr.prototype,"valueUnit",void 0),h([Ke("valueUnit")],Fr.prototype,"readValueUnit",null),Fr=KR=h([me("esri.renderers.visualVariables.SizeVariable")],Fr);const aS=Fr,mbe=ot.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),ybe={color:DQ,size:aS,opacity:FQ,rotation:y4},gbe=new Xt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),vbe=/^\[([^\]]+)\]$/i;let LM=class extends kt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let i=null;return i=t.target===r.target?0:t.target?1:-1,i});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:n}=t,s=i&&i.match(vbe),o=s&&s[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:o})),e)return e.map(a=>{const l=gbe.read(a.type),u=ybe[l];u||(mbe.warn(`Unknown variable type: ${l}`),r&&r.messages&&r.messages.push(new zs("visual-variable:unsupported",`visualVariable of type '${l}' is not supported`,{definition:a,context:r})));const c=new u;return c.read(a,r),c})}writeVariables(e,t){const r=[];for(const i of e){const n=i.toJSON(t);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};h([f()],LM.prototype,"visualVariables",null),LM=h([me("esri.renderers.visualVariables.VisualVariableFactory")],LM);const bbe=LM,wbe={base:oS,key:"type",typeMap:{opacity:FQ,color:DQ,rotation:y4,size:aS}},lm=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new bbe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&Dl(r,i,s.field),s.normalizationField&&Dl(r,i,s.normalizationField),s.valueExpression&&await _o(r,i,s.valueExpression))}};return h([f({types:[wbe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),h([Ke("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),h([et("visualVariables")],t.prototype,"writeVisualVariables",null),t=h([me("esri.renderers.mixins.VisualVariablesMixin")],t),t},sw={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function _be(e,t=sw){if(!e)return{symbol:null};const{retainId:r=sw.retainId,ignoreDrivers:i=sw.ignoreDrivers,hasLabelingContext:n=sw.hasLabelingContext,retainCIM:s=sw.retainCIM}=t;let o;if($g(e)||e instanceof Kg)o=e.clone();else if(e.type==="cim"){const a=e.data?.symbol?.type;if(a!=="CIMPointSymbol")return{error:new $e("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${a||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Dy.fromCIMSymbol(e)}else if(e instanceof la)o=c4.fromSimpleLineSymbol(e);else if(e instanceof Ul)o=Dy.fromSimpleMarkerSymbol(e);else if(e instanceof _f)o=Dy.fromPictureMarkerSymbol(e);else if(e instanceof Vp)o=sS.fromSimpleFillSymbol(e);else{if(!(e instanceof mb))return{error:new $e("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=n?u4.fromTextSymbol(e):Dy.fromTextSymbol(e)}if(r&&o.type!=="cim"&&(o.id=e.id),i&&$g(o))for(let a=0;a<o.symbolLayers.length;++a)o.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:o}}const xbe=["building-scene","integrated-mesh","point-cloud","scene"];function fI(e,t,r,i){const n=iX(e,{},{context:i,isLabelSymbol:!1});de(n)&&(t[r]=n)}function jU(e,t,r,i){const n=iX(e,{},{context:i,isLabelSymbol:!0});de(n)&&(t[r]=n)}function UU(e){return e instanceof fb||e instanceof Kg}function iX(e,t,r){if(Ne(e))return null;const{context:i,isLabelSymbol:n}=r,s=i?.origin,o=i?.messages;if(s==="web-scene"&&!UU(e)){const a=_be(e,{retainCIM:!0,hasLabelingContext:n});return de(a.symbol)?a.symbol.write(t,i):(o?.push(new $e("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!xbe.includes(i?.layer?.type))&&UU(e)?(o?.push(new $e("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function QN(e,t){return Tve(e,null,t)}const lS={types:PQ,json:{write:{writer:fI},origins:{"web-scene":{types:TU,write:{writer:fI},read:{reader:ob({types:TU})}}}}},nX={types:{base:So,key:"type",typeMap:{"simple-fill":ng.typeMap["simple-fill"],"picture-fill":ng.typeMap["picture-fill"],"polygon-3d":ng.typeMap["polygon-3d"]}},json:{write:{writer:fI},origins:{"web-scene":{type:sS,write:{writer:fI}}}}};var QR;let kd=QR=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new QR({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};h([f({type:String,json:{write:!0}})],kd.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],kd.prototype,"label",void 0),h([f({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],kd.prototype,"minValue",void 0),h([f({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],kd.prototype,"maxValue",void 0),h([f(lS)],kd.prototype,"symbol",void 0),kd=QR=h([me("esri.renderers.support.ClassBreakInfo")],kd);const _v=kd;var XR;const $3=ot.getLogger("esri.renderers.ClassBreaksRenderer"),sX="log",NM="percent-of-total",DM="field",C3=new Xt({esriNormalizeByLog:sX,esriNormalizeByPercentOfTotal:NM,esriNormalizeByField:DM}),Sbe=Bi(_v);let yn=XR=class extends lm(Bp){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new _v;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?($3.error(".field: field must be a string value"),null):Kx(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&DM||r&&NM||null,t&&r&&$3.warn("warning: both normalizationField and normalizationTotal are set!")):e!==DM&&e!==NM||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new _v({minValue:e,maxValue:t,symbol:LQ(r)}):Sbe(Pe(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(Ne(t)||Ne(t.arcade))&&$3.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(Ne(t)||Ne(t.arcade))&&(r={...r,arcade:await $p()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(Ne(t)||Ne(t.arcade)))return void $3.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(Ne(t)||Ne(t.arcade))){const n=await $p(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new XR({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Pe(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Pe(this.visualVariables),legendOptions:Pe(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),_o(e,t,this.valueExpression)];Dl(e,t,this.field),Dl(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=VT(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._getBreakIndexfromInfos(l)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(r[this.normalizationField]);if(i===sX)n=Math.log(n)*Math.LOG10E;else if(i!==NM||isNaN(s)){if(i===DM&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};h([f(nX)],yn.prototype,"backgroundFillSymbol",void 0),h([f({type:[_v]})],yn.prototype,"classBreakInfos",void 0),h([Ke("classBreakInfos")],yn.prototype,"readClassBreakInfos",null),h([et("classBreakInfos")],yn.prototype,"writeClassBreakInfos",null),h([f({type:String,json:{write:!0}})],yn.prototype,"defaultLabel",void 0),h([f(lS)],yn.prototype,"defaultSymbol",void 0),h([f({type:String,json:{write:!0}})],yn.prototype,"field",void 0),h([ur("field")],yn.prototype,"castField",null),h([f({type:Boolean})],yn.prototype,"isMaxInclusive",void 0),h([f({type:sg,json:{write:!0}})],yn.prototype,"legendOptions",void 0),h([f({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],yn.prototype,"minValue",null),h([f({type:String,json:{write:!0}})],yn.prototype,"normalizationField",void 0),h([f({type:Number,cast:e=>Da(e),json:{write:!0}})],yn.prototype,"normalizationTotal",void 0),h([f({type:C3.apiValues,value:null,json:{type:C3.jsonValues,read:C3.read,write:C3.write}})],yn.prototype,"normalizationType",null),h([Ft({classBreaks:"class-breaks"})],yn.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],yn.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],yn.prototype,"valueExpressionTitle",void 0),yn=XR=h([me("esri.renderers.ClassBreaksRenderer")],yn);const yb=yn,N$=-3;var Kd;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Kd||(Kd={}));class Zot{constructor(t,r,i){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,i,n=0){this._storage.put(this._namespace+t,r,i,n)}get(t){const r=this._storage.get(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,i){this._storage.updateSize(this._namespace+t,r,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class oX{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new bf,this._users=new bf}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,i,n){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,Kd.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,Kd.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const o=1+Math.max(n,N$)-N$;this._db.set(t,{entry:r,size:i,lifetime:o,lives:o}),this._size+=i,this._checkSizeLimit()}updateSize(t,r,i){const n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size;i>this._maxSize;){const s=this._notifyRemove(t,r,Kd.SOME);if(!(de(s)&&s>0))return void this._db.delete(t);i=s}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(u=>{const c=u.namespace;if(a.startsWith(c)){const p=r[c]||0;r[c]=p+o.size}})});const n={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+N$-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,i)=>{i.startsWith(t)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,Kd.ALL))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,Kd.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i){let n;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](r,i);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;const i=this._notifyRemove(t,r.entry,Kd.SOME);de(i)&&i>0&&(this._size+=i,r.lives=r.lifetime,r.size=i,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}class aX{constructor(t,r){this._storage=new oX,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,i){this._storage.put(t,r,i,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}const VU=ot.getLogger("esri.renderers.support.DictionaryLoader"),Ebe={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class XN{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new aX(100),this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(m){if(Vn(m))return this._dictionaryPromise=null,null}const n={};if(this.fieldMap)for(const m of this._symbolFields){const g=this.fieldMap[m];if(g&&t.attributes[g]!=null){const b=""+t.attributes[g];n[m]=b}else n[m]=""}const s=i(n,r);if(!s||typeof s!="string")return null;const o=WL(s).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=s.split(";"),u=[],c=[];for(const m of l)if(m)if(m.includes("po:")){const g=m.substr(3).split("|");if(g.length===3){const b=g[0],v=g[1];let _=g[2];if(v==="DashTemplate")_=_.split(" ").map(E=>Number(E));else if(v==="Color"){const E=new xt(_).toRgba();_=[E[0],E[1],E[2],255*E[3]]}else _=Number(_);c.push({primitiveName:b,propertyName:v,value:_})}}else if(m.includes("|")){for(const g of m.split("|"))if(this._itemNames.has(g)){u.push(g);break}}else this._itemNames.has(m)&&u.push(m);const p=!de(t.geometry)||!t.geometry.hasZ&&t.geometry.type==="point",d=this._cimPartsToCIMSymbol(u,c,p,r);return this._symbolCache.put(o,d,1),d}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void VU.error("no valid URL!");const r=Mt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:de(t)?t.signal:null}),[{data:i}]=await Promise.all([r,$p()]);if(!i)throw this._dictionaryPromise=null,new $e("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=i.expression,s=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const l=this.config;for(const u in l)o[u]=l[u]}if(s.configuration)for(const l of s.configuration)o.hasOwnProperty(l.name)||(o[l.name]=l.value);const a=[];if(de(t)&&t.fields&&this.fieldMap)for(const l of this._symbolFields){const u=this.fieldMap[l],c=t.fields.filter(p=>p.name===u);c.length>0&&a.push({...c[0],name:l})}return this._dictionaryPromise=U0e(n,de(t)?t.spatialReference:null,a,o).then(l=>{const u={scale:0};return(c,p)=>{const d=l.repurposeFeature({geometry:null,attributes:c});return u.scale=de(p)?p.scale:void 0,l.evaluate({$feature:d,$view:u})}}).catch(l=>(VU.error("Creating dictinoary expression failed:",l),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(t,r,i,n){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=this._getSymbolPart(t[l],n);const o=await Promise.all(s),a=this.fieldMap;for(const l of o)lX(l,a);return new rS({data:this._combineSymbolParts(o,r,i)})}async _getSymbolPart(t,r){if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(s=>s.data);const i=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,t),n=Mt(i,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,n);try{return(await n).data}catch(s){throw this._ongoingRequests.delete(t),s}}_combineSymbolParts(t,r,i){if(!t||t.length===0)return null;const n={...t[0]};if(t.length>1){n.symbolLayers=[];for(const s of t){const o=s;n.symbolLayers.unshift(...o.symbolLayers)}}return i&&(n.callout=Ebe),{type:"CIMSymbolReference",symbol:n,primitiveOverrides:r}}}function lX(e,t){if(!e)return;const r=e.symbolLayers;if(!r)return;let i=r.length;for(;i--;){const n=r[i];n&&n.enable!==!1&&n.type==="CIMVectorMarker"&&Mbe(n,t)}}function Mbe(e,t){const r=e.markerGraphics;if(r)for(const i of r){if(!i)continue;const n=i.symbol;if(n)switch(n.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":lX(n,t);break;case"CIMTextSymbol":n.fieldMap=t}}}var Kot=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:XN},Symbol.toStringTag,{value:"Module"})),e6;let au=e6=class extends lm(Bp){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new XN(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i?.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new e6({config:Pe(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Pe(this.fieldMap),url:Pe(this.url),visualVariables:Pe(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await _o(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};h([f({type:XN})],au.prototype,"_loader",null),h([f({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],au.prototype,"config",void 0),h([f({type:Object,json:{write:!0}})],au.prototype,"fieldMap",void 0),h([f({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],au.prototype,"scaleExpression",void 0),h([et("scaleExpression")],au.prototype,"writeData",null),h([f({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],au.prototype,"scaleExpressionTitle",void 0),h([f({type:String,json:{write:!0}})],au.prototype,"url",void 0),h([et("visualVariables")],au.prototype,"writeVisualVariables",null),au=e6=h([me("esri.renderers.DictionaryRenderer")],au);const Ibe=au;function It(e,t){const r=t?{...t,source:e}:e;return f({aliasOf:r})}var t6;const Tbe=ot.getLogger("esri.renderers.support.AttributeColorInfo");let Fh=t6=class extends Je{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(Tbe.error(".field: field must be a string value"),null):Kx(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new t6({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([f({type:xt,json:{type:[Number],write:!0}})],Fh.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"field",void 0),h([ur("field")],Fh.prototype,"castField",null),h([f({type:String,json:{write:!0}})],Fh.prototype,"label",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],Fh.prototype,"valueExpressionTitle",void 0),Fh=t6=h([me("esri.renderers.support.AttributeColorInfo")],Fh);const uX=Fh;var r6;let FM=r6=class extends Je{constructor(){super(...arguments),this.unit=null}clone(){return new r6({unit:this.unit})}};h([f({type:String,json:{write:!0}})],FM.prototype,"unit",void 0),FM=r6=h([me("esri.renderers.support.DotDensityLegendOptions")],FM);const Abe=FM;var i6;let Is=i6=class extends lm(Bp){constructor(e){super(e),this.attributes=null,this.backgroundColor=new xt([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new la,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Vp({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new i6({attributes:Pe(this.attributes),backgroundColor:Pe(this.backgroundColor),dotBlendingEnabled:Pe(this.dotBlendingEnabled),dotShape:Pe(this.dotShape),dotSize:Pe(this.dotSize),dotValue:Pe(this.dotValue),legendOptions:Pe(this.legendOptions),outline:Pe(this.outline),referenceScale:Pe(this.referenceScale),visualVariables:Pe(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await _o(e,t,r.valueExpression),r.field&&e.add(r.field)}};h([f({type:[uX],json:{write:!0}})],Is.prototype,"attributes",void 0),h([f({type:xt,json:{write:!0}})],Is.prototype,"backgroundColor",void 0),h([f({type:Boolean}),It("dotBlendingEnabled")],Is.prototype,"blendDots",void 0),h([f({type:Boolean,json:{write:!0}})],Is.prototype,"dotBlendingEnabled",void 0),h([f({type:String,json:{write:!1}})],Is.prototype,"dotShape",void 0),h([f({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],Is.prototype,"dotSize",void 0),h([f({type:Abe,json:{write:!0}})],Is.prototype,"legendOptions",void 0),h([f({type:la,json:{default:null,write:!0}})],Is.prototype,"outline",void 0),h([f({type:Number,json:{write:!0}})],Is.prototype,"dotValue",void 0),h([f({type:Number}),It("dotValue")],Is.prototype,"referenceDotValue",void 0),h([f({type:Number,json:{write:!0}})],Is.prototype,"referenceScale",void 0),h([f({type:Number,json:{write:!0}})],Is.prototype,"seed",void 0),h([Ft({dotDensity:"dot-density"})],Is.prototype,"type",void 0),Is=i6=h([me("esri.renderers.DotDensityRenderer")],Is);const $be=Is;var n6;let h_=n6=class extends Je{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new n6({color:this.color,ratio:this.ratio})}};h([f({type:xt,json:{type:[fr],default:null,write:!0}})],h_.prototype,"color",void 0),h([f({type:Number,json:{write:!0}})],h_.prototype,"ratio",void 0),h_=n6=h([me("esri.renderers.support.HeatmapColorStop")],h_);const e2=h_;let J0=class extends ua(Je){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};h([f({type:String,json:{write:!0}})],J0.prototype,"minLabel",void 0),h([f({type:String,json:{write:!0}})],J0.prototype,"maxLabel",void 0),h([f({type:String,json:{write:!0}})],J0.prototype,"title",void 0),J0=h([me("esri.renderers.support.HeatmapLegendOptions")],J0);function v4(){return[0,0,0,0]}function Cbe(e){return[e[0],e[1],e[2],e[3]]}function gb(e,t,r,i){return[e,t,r,i]}function kbe(e){const t=v4(),r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Obe(e,t){return new Float64Array(e,t,4)}function cX(){return v4()}function hX(){return gb(1,1,1,1)}function pX(){return gb(1,0,0,0)}function dX(){return gb(0,1,0,0)}function fX(){return gb(0,0,1,0)}function mX(){return gb(0,0,0,1)}const Rbe=cX(),Pbe=hX(),Lbe=pX(),Nbe=dX(),Dbe=fX(),Fbe=mX();Object.freeze(Object.defineProperty({__proto__:null,create:v4,clone:Cbe,fromValues:gb,fromArray:kbe,createView:Obe,zeros:cX,ones:hX,unitX:pX,unitY:dX,unitZ:fX,unitW:mX,ZEROS:Rbe,ONES:Pbe,UNIT_X:Lbe,UNIT_Y:Nbe,UNIT_Z:Dbe,UNIT_W:Fbe},Symbol.toStringTag,{value:"Module"}));const e9=2.4;function jbe(e){return ah(e*e9)}function Ube(e){return nQ(e)/e9}function Vbe(e,t,r,i){let{color:n,ratio:s}=t,{color:o,ratio:a}=r;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=sa((i-s)/(a-s),0,1);yY(e,n.toArray(),o.toArray(),l)}function Yot(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let i=e[0],n=e[0],s=1;const o=v4();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>n.ratio&&s<e.length;)i=n,n=e[s++];Vbe(o,i,n,l),r.set(o,4*a)}return r}function Qot(e,t,r,i){const{radius:n,fieldOffset:s,field:o}=t,a=Math.round(nQ(n)),l=new Float64Array(r*i);let u,c=Number.NEGATIVE_INFINITY;const p=Gbe(o,s),d=new Set;for(const m of e){const g=m.getCursor();for(;g.next();){const b=g.getObjectId();if(d.has(b))continue;d.add(b);const v=g.readLegacyPointGeometry(),_=128;if(v.x<-_||v.x>=r+_||v.y<-_||v.y>i+_)continue;const E=+p(g),I=Math.max(0,Math.round(v.x)-a),x=Math.max(0,Math.round(v.y)-a),T=Math.min(i,Math.round(v.y)+a),M=Math.min(r,Math.round(v.x)+a);for(let k=x;k<T;k++)for(let D=I;D<M;D++){const B=k*r+D,G=zbe(v.x-D,v.y-k,a);u=l[B]+=G*E,u>c&&(c=u)}}}return{matrix:l.buffer,max:c}}function Xot(e,t,r,i,n,s){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&i&&o.data.set(new Uint8ClampedArray(Bbe(t,r,i,n,s))),e.putImageData(o,0,0)}function Bbe(e,t,r,i,n){const s=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),a="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),l=a.length/(n-i);for(let u=0;u<o.length;u++){const c=o[u],p=Math.floor((c-i)*l);s[u]=a[sa(p,0,a.length-1)]}return s.buffer}function zbe(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function eat(e,t){return typeof e=="function"?e:e?typeof t=="string"?r=>-1*+r[e]:r=>+r[e]+t:()=>1}function Gbe(e,t){return e!=null?typeof t=="string"?r=>-1*+r.readAttribute(e):r=>+r.readAttribute(e)+t:r=>1}var s6;const qbe=ot.getLogger("esri.renderers.HeatmapRenderer");function BU(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:n,maxPixelIntensity:s,minPixelIntensity:o,...a}=e;return a}}return e}let On=s6=class extends Bp{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new e2({ratio:0,color:new xt("rgba(255, 140, 0, 0)")}),new e2({ratio:.75,color:new xt("rgba(255, 140, 0, 1)")}),new e2({ratio:.9,color:new xt("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return BU(e)}get blurRadius(){return Ube(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",jbe(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(e9**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||Mn(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,sb(()=>{Pde(qbe,e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=BU(e),super.read(e,t)}getSymbol(){const e=this.referenceScale!==0?5:1,t=Math.min(this.radius*e,ah(256));return new Ul({size:t})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&await Dl(e,t,r),i&&typeof i=="string"&&await _o(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new s6({colorStops:Pe(this.colorStops),field:this.field,legendOptions:Pe(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([f({type:m4,json:{write:!1}})],On.prototype,"authoringInfo",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],On.prototype,"blurRadius",null),h([f({type:[e2],json:{write:!0}})],On.prototype,"colorStops",void 0),h([f({type:String,json:{write:!0}})],On.prototype,"field",void 0),h([f({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})},origins:{"web-scene":{write:!1}}}})],On.prototype,"fieldOffset",void 0),h([f({type:J0,json:{write:!0}})],On.prototype,"legendOptions",void 0),h([f({type:Number,json:{write:!0}})],On.prototype,"maxDensity",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],On.prototype,"maxPixelIntensity",null),h([f({type:Number,json:{write:!0}})],On.prototype,"minDensity",void 0),h([f({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],On.prototype,"minPixelIntensity",null),h([f({type:Number,cast:Er,json:{write:!0}})],On.prototype,"radius",void 0),h([f({type:Number,range:{min:0},json:{default:0,write:!0}})],On.prototype,"referenceScale",void 0),h([Ft({heatmap:"heatmap"})],On.prototype,"type",void 0),h([f({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],On.prototype,"valueExpression",void 0),h([f({type:String})],On.prototype,"valueExpressionTitle",void 0),h([f({readOnly:!0})],On.prototype,"_pixelIntensityToDensity",null),On=s6=h([me("esri.renderers.HeatmapRenderer")],On);const yX=On;let My=class extends ua(Je){constructor(){super(...arguments),this.color=new xt([0,0,0,0]),this.label=null,this.threshold=0}};h([f({type:xt,json:{write:!0}})],My.prototype,"color",void 0),h([f({type:String,json:{write:!0}})],My.prototype,"label",void 0),h([f({type:Number,range:{min:0,max:1},json:{write:!0}})],My.prototype,"threshold",void 0),My=h([me("esri.renderers.support.OthersCategory")],My);let jM=class extends ua(Je){constructor(){super(...arguments),this.title=null}};h([f({type:String,json:{write:!0}})],jM.prototype,"title",void 0),jM=h([me("esri.renderers.support.PieChartLegendOptions")],jM);let ba=class extends lm(ua(Bp)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new xt([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new My,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new Ul({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await _o(e,t,r.valueExpression),r.field&&e.add(r.field)}};h([f({type:[uX],json:{write:!0}})],ba.prototype,"attributes",void 0),h([f({type:Vp,json:{default:null,write:!0}})],ba.prototype,"backgroundFillSymbol",void 0),h([f({type:xt,json:{write:!0}})],ba.prototype,"defaultColor",void 0),h([f({type:String,json:{write:!0}})],ba.prototype,"defaultLabel",void 0),h([f({type:Number,range:{min:0,max:1},json:{write:!0}})],ba.prototype,"holePercentage",void 0),h([f({type:My,json:{write:!0}})],ba.prototype,"othersCategory",void 0),h([f({type:jM,json:{write:!0}})],ba.prototype,"legendOptions",void 0),h([f({type:la,json:{default:null,write:!0}})],ba.prototype,"outline",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],ba.prototype,"size",void 0),h([Ft({pieChart:"pie-chart"})],ba.prototype,"type",void 0),ba=h([me("esri.renderers.PieChartRenderer")],ba);const Hbe=ba;var o6;let Qm=o6=class extends lm(Bp){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new o6({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:Pe(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};h([f({type:String,json:{write:!0}})],Qm.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Qm.prototype,"label",void 0),h([f(lS)],Qm.prototype,"symbol",void 0),h([Ft({simple:"simple"})],Qm.prototype,"type",void 0),Qm=o6=h([me("esri.renderers.SimpleRenderer")],Qm);const b4=Qm,Wbe=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function a6(e){return e instanceof kt}function zU(e){return e instanceof Lt?Object.keys(e.items):a6(e)?Mn(e).keys():e?Object.keys(e):[]}function k3(e,t){return e instanceof Lt?e.items[t]:e[t]}function Jbe(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function t2(e){return e?e.declaredClass:null}function gX(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=zU(e),n=zU(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||Jbe(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(p=>!i.includes(p)),o=i.filter(p=>!n.includes(p)),a=i.filter(p=>n.includes(p)&&k3(e,p)!==k3(t,p)).concat(s,o).sort(),l=t2(e);if(l&&Wbe.includes(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const c=a6(e)&&a6(t);for(const p of a){const d=k3(e,p),m=k3(t,p);let g;if((c||typeof d!="function"&&typeof m!="function")&&d!==m&&(d!=null||m!=null)){if(r&&r[p]&&typeof r[p]=="function")g=r[p](d,m);else if(d instanceof Date&&m instanceof Date){if(d.getTime()===m.getTime())continue;g={type:"complete",oldValue:d,newValue:m}}else g=typeof d=="object"&&typeof m=="object"&&t2(d)===t2(m)?gX(d,m):{type:"complete",oldValue:d,newValue:m};de(g)&&(de(u)?u.diff[p]=g:u={type:"partial",diff:{[p]:g}})}}return u}function Zbe(e,t){if(Ne(e))return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function tat(e,t){for(const r of t)if(Zbe(e,r))return!0;return!1}function Kbe(e,t){if(!(typeof e=="function"||typeof t=="function"||Ne(e)&&Ne(t)))return Ne(e)||Ne(t)||typeof e=="object"&&typeof t=="object"&&t2(e)!==t2(t)?{type:"complete",oldValue:e,newValue:t}:gX(e,t)}var l6;let Od=l6=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new l6({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};h([f({type:String,json:{write:!0}})],Od.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],Od.prototype,"label",void 0),h([f(lS)],Od.prototype,"symbol",void 0),h([f({json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}})],Od.prototype,"value",void 0),h([ur("value")],Od.prototype,"castValue",null),Od=l6=h([me("esri.renderers.support.UniqueValueInfo")],Od);const xv=Od,Ybe=()=>!!We("enable-feature:force-wosr"),D$={};async function Qbe(e,t){try{return{data:(await rwe(e,t)).data,baseUrl:Eme(e),styleUrl:e}}catch(r){return Fp(r),null}}function Xbe(e,t,r){const i=de(t.portal)?t.portal:qs.getDefault();let n;const s=`${i.url} - ${i.user&&i.user.username} - ${e}`;return D$[s]||(D$[s]=ewe(e,i,r).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl,styleName:e}))),D$[s]}function ewe(e,t,r){return t.load(r).then(()=>{const i=new pp({disableExtraQuery:!0,query:`owner:${GU} AND type:${qU} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords.some(a=>a.toLowerCase()===s)&&o.type===qU&&o.owner===GU){n=o;break}}if(!n)throw new $e("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function twe(e,t,r){return e.styleUrl?Qbe(e.styleUrl,r):e.styleName?Xbe(e.styleName,t,r):Promise.reject(new $e("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function rat(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function iat(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Ybe()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function rwe(e,t){const r={responseType:"json",query:{f:"json"},...t};return Mt(Va(e),r)}const GU="esri_en",qU="Style",nat="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var p_;const bm=ot.getLogger("esri.renderers.UniqueValueRenderer"),iwe=Bi(xv);let Ni=p_=class extends lm(Bp){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?Kbe(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:Kx(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i&&i.messages?i.messages.push(new $e("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):bm.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||qs.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=pb(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=iS(e.styleUrl,i))}set uniqueValueInfos(e){this.styleOrigin?bm.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void bm.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?iwe(e):new xv({value:e,symbol:LQ(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)bm.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(Ne(t)||Ne(t.arcade))&&(r={...r,arcade:await $p()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(Ne(t)||Ne(t.arcade)))return void bm.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(Ne(r)||Ne(r.arcade))){const n=await $p(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return i&&i.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new p_({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Pe(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Pe(this.visualVariables),legendOptions:Pe(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:Pe(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=Pe(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Pe(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),_o(e,t,this.valueExpression)];Dl(e,t,this.field),Dl(e,t,this.field2),Dl(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return twe(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new Kg({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const n=new xv({value:r.name,symbol:i});t.push(n),this._valueInfoMap[r.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=VT(t,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(typeof t!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else typeof t=="function"?i=t(e):t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new p_(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||qs.getDefault());const i=r.populateFromStyle();return i.catch(n=>{bm.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new p_(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{bm.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};h([f({readOnly:!0})],Ni.prototype,"_cache",null),h([Ft({uniqueValue:"unique-value"})],Ni.prototype,"type",void 0),h([f(nX)],Ni.prototype,"backgroundFillSymbol",void 0),h([f({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ni.prototype,"field",void 0),h([ur("field")],Ni.prototype,"castField",null),h([et("field")],Ni.prototype,"writeField",null),h([f({type:String,json:{write:!0}})],Ni.prototype,"field2",void 0),h([f({type:String,json:{write:!0}})],Ni.prototype,"field3",void 0),h([f({type:String,json:{write:!0}})],Ni.prototype,"valueExpression",void 0),h([f({type:String,json:{write:!0}})],Ni.prototype,"valueExpressionTitle",void 0),h([f({type:sg,json:{write:!0}})],Ni.prototype,"legendOptions",void 0),h([f({type:String,json:{write:!0}})],Ni.prototype,"defaultLabel",void 0),h([f(IZ({...lS},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ni.prototype,"defaultSymbol",null),h([f({type:String,json:{write:!0}})],Ni.prototype,"fieldDelimiter",void 0),h([f({type:qs,readOnly:!0})],Ni.prototype,"portal",void 0),h([Ke("portal",["styleName"])],Ni.prototype,"readPortal",null),h([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ni.prototype,"styleOrigin",void 0),h([Ke("styleOrigin",["styleName","styleUrl"])],Ni.prototype,"readStyleOrigin",null),h([et("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ni.prototype,"writeStyleOrigin",null),h([f({type:[xv],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ni.prototype,"uniqueValueInfos",null),Ni=p_=h([me("esri.renderers.UniqueValueRenderer")],Ni);const vb=Ni,uS={key:"type",base:Bp,typeMap:{heatmap:yX,simple:b4,"unique-value":vb,"class-breaks":yb,"dot-density":$be,dictionary:Ibe,"pie-chart":Hbe},errorContext:"renderer"},vX={key:"type",base:Bp,typeMap:{simple:b4,"unique-value":vb,"class-breaks":yb,heatmap:yX},errorContext:"renderer"};function Sv(e,t){return bX(e,null,t)}const nwe=ob({types:uS});function bX(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new zs("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):nwe(e,t,r):null}let UM=class extends kt{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!Lt.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||Lt.isCollection(e)?e.forEach(i=>this._isHandle(i)&&r.push(i)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||Lt.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};h([f({readOnly:!0})],UM.prototype,"size",null),UM=h([me("esri.core.Handles")],UM);const es=UM;class t9{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Zk),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new t9,i=this._originStores[bt.DEFAULTS];i&&i.forEach((n,s)=>{r.set(s,Pe(n),bt.DEFAULTS)});for(let n=bt.SERVICE;n<Zk;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,Pe(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=bt.USER){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=bt.USER){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i&&i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||bt.DEFAULTS}forEach(t){this._values.forEach(t)}}const wX=e=>{let t=class extends e{constructor(...r){super(...r);const i=Mn(this),n=i.store,s=new t9;i.store=s,mK(i,n,s)}read(r,i){gK(this,r,i)}getAtOrigin(r,i){const n=F$(this),s=zo(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return D2(this.originIdOf(r))}originIdOf(r){return F$(this).originOf(r)}revert(r,i){const n=F$(this),s=zo(i),o=Mn(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=h([me("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function F$(e){return Mn(e).store}let HU=class extends wX(kt){};HU=h([me("esri.core.ReadOnlyMultiOriginJSONSupport")],HU);const swe=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return j$(this).delete(r,zo(i))}write(r={},i){return wK(this,r=r||{},i),r}setAtOrigin(r,i,n){Mn(this).setAtOrigin(r,i,zo(n))}removeOrigin(r){const i=j$(this),n=zo(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),bt.USER)}updateOrigin(r,i){const n=j$(this),s=zo(i),o=this.get(r);for(let a=s+1;a<Zk;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=h([me("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function j$(e){return Mn(e).store}const um=e=>{let t=class extends swe(wX(e)){constructor(...r){super(...r)}};return t=h([me("esri.core.MultiOriginJSONSupport")],t),t};let u6=class extends um(kt){};u6=h([me("esri.core.MultiOriginJSONSupport")],u6);async function owe(e,t){const{WhereClause:r}=await Be(()=>import("./WhereClause.5a38bf79.js"),["assets/WhereClause.5a38bf79.js","assets/preload-helper.387dac8f.js"]);return r.create(e,t)}function r9(e,t){return de(e)?de(t)?`(${e}) AND (${t})`:e:t}var c6;let Xm=c6=class extends Je{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new c6({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([f({type:String,json:{write:!0}})],Xm.prototype,"expression",void 0),h([f({type:String,json:{write:!0}})],Xm.prototype,"name",void 0),h([f({type:["boolean","date","number","string"],json:{write:!0}})],Xm.prototype,"returnType",void 0),h([f({type:String,json:{write:!0}})],Xm.prototype,"title",void 0),Xm=c6=h([me("esri.form.ExpressionInfo")],Xm);const awe=Xm;let ey=class extends Je{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};h([f({type:String,json:{write:!0}})],ey.prototype,"description",void 0),h([f({type:String,json:{write:!0}})],ey.prototype,"label",void 0),h([f()],ey.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],ey.prototype,"visibilityExpression",void 0),ey=h([me("esri.form.elements.Element")],ey);const Ev=ey;var h6;let VM=h6=class extends Je{constructor(e){super(e),this.type=null}clone(){return new h6({type:this.type})}};h([f({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],VM.prototype,"type",void 0),VM=h6=h([me("esri.form.elements.inputs.AttachmentInput")],VM);const lwe=VM;var p6;let ty=p6=class extends Ev{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new p6({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};h([f({type:String,json:{write:!0}})],ty.prototype,"attachmentKeyword",void 0),h([f({type:Boolean,json:{write:!0}})],ty.prototype,"editable",void 0),h([f({type:lwe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ty.prototype,"input",void 0),h([f({type:["attachment"],json:{read:!1,write:!0}})],ty.prototype,"type",void 0),ty=p6=h([me("esri.form.elements.AttachmentElement")],ty);const WU=ty;let BM=class extends Je{constructor(e){super(e),this.type=null}};h([f()],BM.prototype,"type",void 0),BM=h([me("esri.form.elements.inputs.Input")],BM);const bb=BM;let d_=class extends bb{constructor(e){super(e),this.maxLength=null,this.minLength=0}};h([f({type:Number,json:{write:!0}})],d_.prototype,"maxLength",void 0),h([f({type:Number,json:{write:!0}})],d_.prototype,"minLength",void 0),d_=h([me("esri.form.elements.inputs.TextInput")],d_);const i9=d_;var d6;let zM=d6=class extends i9{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new d6({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["barcode-scanner"],json:{read:!1,write:!0}})],zM.prototype,"type",void 0),zM=d6=h([me("esri.form.elements.inputs.BarcodeScannerInput")],zM);const uwe=zM;var f6;let Z0=f6=class extends bb{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new f6({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};h([f({type:String,json:{write:!0}})],Z0.prototype,"noValueOptionLabel",void 0),h([f({type:Boolean,json:{write:!0}})],Z0.prototype,"showNoValueOption",void 0),h([f({type:["combo-box"],json:{read:!1,write:!0}})],Z0.prototype,"type",void 0),Z0=f6=h([me("esri.form.elements.inputs.ComboBoxInput")],Z0);const cwe=Z0;var m6;function JU(e){return e!=null?new Date(e):null}function ZU(e){return e?e.getTime():null}let lu=m6=class extends bb{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return JU(t.max)}writeMax(e,t){t.max=ZU(e)}readMin(e,t){return JU(t.min)}writeMin(e,t){t.min=ZU(e)}clone(){return new m6({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};h([f({type:Boolean,json:{write:!0}})],lu.prototype,"includeTime",void 0),h([f({type:Date,json:{type:Number,write:!0}})],lu.prototype,"max",void 0),h([Ke("max")],lu.prototype,"readMax",null),h([et("max")],lu.prototype,"writeMax",null),h([f({type:Date,json:{type:Number,write:!0}})],lu.prototype,"min",void 0),h([Ke("min")],lu.prototype,"readMin",null),h([et("min")],lu.prototype,"writeMin",null),h([f({type:["datetime-picker"],json:{read:!1,write:!0}})],lu.prototype,"type",void 0),lu=m6=h([me("esri.form.elements.inputs.DateTimePickerInput")],lu);const hwe=lu;var y6;let K0=y6=class extends bb{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new y6({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};h([f({type:String,json:{write:!0}})],K0.prototype,"noValueOptionLabel",void 0),h([f({type:Boolean,json:{write:!0}})],K0.prototype,"showNoValueOption",void 0),h([f({type:["radio-buttons"],json:{read:!1,write:!0}})],K0.prototype,"type",void 0),K0=y6=h([me("esri.form.elements.inputs.RadioButtonsInput")],K0);const pwe=K0;var g6;let Y0=g6=class extends bb{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new g6({offValue:this.offValue,onValue:this.onValue})}};h([f({type:[String,Number],json:{write:!0}})],Y0.prototype,"offValue",void 0),h([f({type:[String,Number],json:{write:!0}})],Y0.prototype,"onValue",void 0),h([f({type:["switch"],json:{read:!1,write:!0}})],Y0.prototype,"type",void 0),Y0=g6=h([me("esri.form.elements.inputs.SwitchInput")],Y0);const dwe=Y0;var v6;let GM=v6=class extends i9{constructor(e){super(e),this.type="text-area"}clone(){return new v6({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["text-area"],json:{read:!1,write:!0}})],GM.prototype,"type",void 0),GM=v6=h([me("esri.form.elements.inputs.TextAreaInput")],GM);const fwe=GM;var b6;let qM=b6=class extends i9{constructor(e){super(e),this.type="text-box"}clone(){return new b6({maxLength:this.maxLength,minLength:this.minLength})}};h([f({type:["text-box"],json:{read:!1,write:!0}})],qM.prototype,"type",void 0),qM=b6=h([me("esri.form.elements.inputs.TextBoxInput")],qM);const mwe=qM,ywe={base:bb,key:"type",typeMap:{"barcode-scanner":uwe,"combo-box":cwe,"datetime-picker":hwe,"radio-buttons":pwe,switch:dwe,"text-area":fwe,"text-box":mwe}};var w6;let f_=w6=class extends Je{constructor(e){super(e),this.name=null,this.code=null}clone(){return new w6({name:this.name,code:this.code})}};h([f({type:String,json:{write:!0}})],f_.prototype,"name",void 0),h([f({type:[String,Number],json:{write:!0}})],f_.prototype,"code",void 0),f_=w6=h([me("esri.layers.support.CodedValue")],f_);const gwe=new Xt({inherited:"inherited",codedValue:"coded-value",range:"range"});let m_=class extends Je{constructor(e){super(e),this.name=null,this.type=null}};h([f({type:String,json:{write:!0}})],m_.prototype,"name",void 0),h([Ft(gwe)],m_.prototype,"type",void 0),m_=h([me("esri.layers.support.Domain")],m_);const w4=m_;var _6;let y_=_6=class extends w4{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new _6({codedValues:Pe(this.codedValues),name:this.name})}};h([f({type:[f_],json:{write:!0}})],y_.prototype,"codedValues",void 0),h([Ft({codedValue:"coded-value"})],y_.prototype,"type",void 0),y_=_6=h([me("esri.layers.support.CodedValueDomain")],y_);const _X=y_;var x6;let HM=x6=class extends w4{constructor(e){super(e),this.type="inherited"}clone(){return new x6}};h([Ft({inherited:"inherited"})],HM.prototype,"type",void 0),HM=x6=h([me("esri.layers.support.InheritedDomain")],HM);const xX=HM;var S6;let Q0=S6=class extends w4{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new S6({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};h([f({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],Q0.prototype,"maxValue",void 0),h([f({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],Q0.prototype,"minValue",void 0),h([Ft({range:"range"})],Q0.prototype,"type",void 0),Q0=S6=h([me("esri.layers.support.RangeDomain")],Q0);const SX=Q0,EX={key:"type",base:w4,typeMap:{range:SX,"coded-value":_X,inherited:xX}};function n9(e){if(!e||!e.type)return null;switch(e.type){case"range":return SX.fromJSON(e);case"codedValue":return _X.fromJSON(e);case"inherited":return xX.fromJSON(e)}return null}var E6;let vl=E6=class extends Ev{constructor(e){super(e),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new E6({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};h([f({types:EX,json:{read:{reader:n9},write:!0}})],vl.prototype,"domain",void 0),h([f({type:Boolean,json:{write:!0}})],vl.prototype,"editable",void 0),h([f({type:String,json:{write:!0}})],vl.prototype,"editableExpression",void 0),h([f({type:String,json:{write:!0}})],vl.prototype,"fieldName",void 0),h([f({type:String,json:{write:!0}})],vl.prototype,"hint",void 0),h([f({types:ywe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],vl.prototype,"input",void 0),h([f({type:String,json:{write:!0}})],vl.prototype,"requiredExpression",void 0),h([f({type:String,json:{read:!1,write:!0}})],vl.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],vl.prototype,"valueExpression",void 0),vl=E6=h([me("esri.form.elements.FieldElement")],vl);const KU=vl;var M6;let jh=M6=class extends Ev{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new M6({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:Pe(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};h([f({type:Number,json:{write:!0}})],jh.prototype,"displayCount",void 0),h([f({type:["list"],json:{write:!0}})],jh.prototype,"displayType",void 0),h([f({type:Boolean,json:{write:!0}})],jh.prototype,"editable",void 0),h([f({type:[eQ],json:{write:!0}})],jh.prototype,"orderByFields",void 0),h([f({type:Number,json:{write:!0}})],jh.prototype,"relationshipId",void 0),h([f({type:["relationship"],json:{read:!1,write:!0}})],jh.prototype,"type",void 0),jh=M6=h([me("esri.form.elements.RelationshipElement")],jh);const YU=jh;function MX(e){return{typesWithGroup:{base:Ev,key:"type",typeMap:{attachment:WU,field:KU,group:e,relationship:YU}},typesWithoutGroup:{base:Ev,key:"type",typeMap:{attachment:WU,field:KU,relationship:YU}}}}function IX(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function TX(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function AX(e,t,r=!0){return e?e.map(i=>oh(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var I6;let Nc=I6=class extends Ev{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return AX(e,U$,!1)}readElements(e,t){return IX(t.formElements,U$,!1)}writeElements(e,t){t.formElements=TX(e,U$,!1)}clone(){return new I6({description:this.description,elements:Pe(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};h([f({json:{write:!0}})],Nc.prototype,"elements",void 0),h([ur("elements")],Nc.prototype,"castElements",null),h([Ke("elements",["formElements"])],Nc.prototype,"readElements",null),h([et("elements")],Nc.prototype,"writeElements",null),h([f({type:["collapsed","expanded"],json:{write:!0}})],Nc.prototype,"initialState",void 0),h([f({type:String,json:{read:!1,write:!0}})],Nc.prototype,"type",void 0),Nc=I6=h([me("esri.form.elements.GroupElement")],Nc);const U$=MX(Nc),vwe=Nc;var T6;const V$=MX(vwe);let Ic=T6=class extends Je{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return AX(e,V$)}readElements(e,t){return IX(t.formElements,V$)}writeElements(e,t){t.formElements=TX(e,V$)}clone(){return new T6({description:this.description,expressionInfos:Pe(this.expressionInfos),elements:Pe(this.elements),title:this.title})}};h([f({type:String,json:{write:!0}})],Ic.prototype,"description",void 0),h([f({json:{write:!0}})],Ic.prototype,"elements",void 0),h([ur("elements")],Ic.prototype,"castElements",null),h([Ke("elements",["formElements"])],Ic.prototype,"readElements",null),h([et("elements")],Ic.prototype,"writeElements",null),h([f({type:[awe],json:{write:!0}})],Ic.prototype,"expressionInfos",void 0),h([f({type:String,json:{write:!0}})],Ic.prototype,"title",void 0),Ic=T6=h([me("esri.form.FormTemplate")],Ic);const bwe=Ic;var g_;const mI=en()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),$X=mI.jsonValues.slice();qL($X,"orthometric");const r2=en()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let uu=g_=class extends Je{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return mI.write(e,t,r)}readHeightModel(e,t,r){return mI.read(e)||(r&&r.messages&&r.messages.push(wwe(e,{context:r})),null)}readHeightUnit(e,t,r){return r2.read(e)||(r&&r.messages&&r.messages.push(QU(e,{context:r})),null)}readHeightUnitService(e,t,r){return GQ(e)||r2.read(e)||(r&&r.messages&&r.messages.push(QU(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new g_({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Qve(t);return new g_({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new g_;return t.read(e,{origin:"web-scene"}),t}};function QU(e,t){return new zs("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function wwe(e,t){return new zs("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}h([f({type:mI.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$X,default:"ellipsoidal"}}}})],uu.prototype,"heightModel",void 0),h([et("web-scene","heightModel")],uu.prototype,"writeHeightModel",null),h([Ke(["web-scene","service"],"heightModel")],uu.prototype,"readHeightModel",null),h([f({type:r2.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:r2.jsonValues,write:r2.write}}}})],uu.prototype,"heightUnit",void 0),h([Ke("web-scene","heightUnit")],uu.prototype,"readHeightUnit",null),h([Ke("service","heightUnit")],uu.prototype,"readHeightUnitService",null),h([f({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],uu.prototype,"vertCRS",void 0),h([Ke("service","vertCRS",["vertCRS","ellipsoid","geoid"])],uu.prototype,"readVertCRS",null),uu=g_=h([me("esri.geometry.HeightModelInfo")],uu);const _4=uu,_we=ot.getLogger("esri.layers.support.fromPortalItem");async function xwe(e){const t="portalItem"in e?e:{portalItem:e},r=await Be(()=>import("./portalLayers.029442f0.js"),["assets/portalLayers.029442f0.js","assets/lazyLayerLoader.e0a392f3.js","assets/preload-helper.387dac8f.js","assets/layersLoader.c832ef21.js","assets/jsonContext.4a2dd7f6.js","assets/portalItemUtils.aa871d92.js"]);try{return await r.fromItem(t)}catch(i){const n=t&&t.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||_r.portalUrl;throw _we.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",i),i}}let Swe=0,Rn=class extends im.EventedMixin(tS(Ya)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new qt(-180,-90,180,90,wt.WGS84),this.id=Date.now().toString(16)+"-layer-"+Swe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=wt.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e;return(await Be(()=>import("./arcgisLayers.d3fe5d94.js"),["assets/arcgisLayers.d3fe5d94.js","assets/preload-helper.387dac8f.js","assets/lazyLayerLoader.e0a392f3.js"])).fromUrl(t)}static fromPortalItem(e){return xwe(e)}initialize(){this.when().catch(e=>{Vn(e)||ot.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?fn(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Mt(e,{query:{f:"json"},responseType:"json"})).data;throw new $e("layer:no-attribution-data","Layer does not have attribution data")}};h([f({type:String})],Rn.prototype,"attributionDataUrl",void 0),h([f({type:qt})],Rn.prototype,"fullExtent",void 0),h([f({readOnly:!0})],Rn.prototype,"hasAttributionData",null),h([f({type:String,clonable:!1})],Rn.prototype,"id",void 0),h([f({type:Boolean,nonNullable:!0})],Rn.prototype,"legendEnabled",void 0),h([f({type:["show","hide","hide-children"]})],Rn.prototype,"listMode",void 0),h([f({type:Number,range:{min:0,max:1},nonNullable:!0})],Rn.prototype,"opacity",void 0),h([f({clonable:!1})],Rn.prototype,"parent",void 0),h([f({readOnly:!0})],Rn.prototype,"parsedUrl",null),h([f({type:Boolean})],Rn.prototype,"popupEnabled",void 0),h([f({type:Boolean})],Rn.prototype,"attributionVisible",void 0),h([f({type:wt})],Rn.prototype,"spatialReference",void 0),h([f({type:String})],Rn.prototype,"title",void 0),h([f({readOnly:!0,json:{read:!1}})],Rn.prototype,"type",void 0),h([f()],Rn.prototype,"url",void 0),h([f({type:Boolean,nonNullable:!0})],Rn.prototype,"visible",void 0),Rn=h([me("esri.layers.Layer")],Rn);const uh=Rn;function it(e,t,r={}){return s9(e,t,r,CX)}function Qa(e,t,r={}){return s9(e,t,r,kX)}function s9(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(Jo(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=nfe(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function kp(e,t,r,i={}){let n=null,s=null,o=null;function a(){n&&s&&(s.remove(),i.onListenerRemove?.(n),n=null,s=null)}function l(c){i.once&&i.once&&Jo(o),r(c)}const u=it(e,(c,p)=>{a(),qT(c)&&(n=c,s=HT(c,t,l),i.onListenerAdd?.(c))},{sync:i.sync,initial:!0});return o=ib(()=>{u.remove(),a()}),o}function x4(e,t){return Ewe(e,kX,t)}function Ewe(e,t,r){if(Za(r))return Promise.reject(wi());const i=e();if(t?.(i))return Promise.resolve(i);let n=null;function s(){n=Jo(n)}return new Promise((o,a)=>{n=BT([Ka(r,()=>{s(),a(wi())}),s9(e,l=>{s(),o(l)},{sync:!1,once:!0},t??CX)])})}function CX(e){return!0}function kX(e){return!!e}const Bf={sync:!0},Br={initial:!0},Yd={sync:!0,initial:!0};let Y1=class extends kt{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new es,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r={}){return this._installWatch(e,t,r,it)}addWhen(e,t,r={}){return this._installWatch(e,t,r,Qa)}addOnCollectionChange(e,t,{initial:r=!1,final:i=!1}={}){const n=++this.handleId;return this.handles.add([kp(e,"after-changes",this._createSyncUpdatingCallback(),Bf),kp(e,"change",t,{onListenerAdd:r?s=>t({added:s.toArray(),removed:[]}):void 0,onListenerRemove:i?s=>t({added:[],removed:s.toArray()}):void 0})],n),{remove:()=>this.handles.remove(n)}}addPromise(e){if(Ne(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(O3)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(e,t,r={},i){const n=++this.handleId;r.sync||this._installSyncUpdatingWatch(e,n);const s=i(e,t,r);return this.handles.add(s,n),{remove:()=>this.handles.remove(n)}}_installSyncUpdatingWatch(e,t){const r=this._createSyncUpdatingCallback(),i=it(e,r,{sync:!0,equals:()=>!1});return this.handles.add(i,t),i}_createSyncUpdatingCallback(){return()=>{this.handles.remove(O3),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(sb(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(O3))}),O3)}}};h([f({readOnly:!0})],Y1.prototype,"updating",void 0),Y1=h([me("esri.core.support.WatchUpdatingTracking")],Y1);const O3=-42;var XU;(function(e){e[e.NONE=0]="NONE",e[e.SYNC=1]="SYNC",e[e.INIT=2]="INIT"})(XU||(XU={}));const Hs=e=>{let t=class extends e{destroy(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())}get handles(){return this._get("handles")||new es}get updatingHandles(){return this._get("updatingHandles")||new Y1}};return h([f({readOnly:!0})],t.prototype,"handles",null),h([f({readOnly:!0})],t.prototype,"updatingHandles",null),t=h([me("esri.core.HandleOwner")],t),t};let X2=class extends Hs(kt){};X2=h([me("esri.core.HandleOwner")],X2);class yI{constructor(t=r=>r.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(r=>{t(r)||this._items.delete(r)}),this}}var go;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(go||(go={}));let Mwe=0;function OX(){return Mwe++}function Iwe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function gI(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function RX(e,t,r,i){if(t.type===go.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==go.INVOKE&&t.type!==go.RESPONSE)return void e.postMessage(t);let n;Iwe(r)?(n=eV(r.transferList),t.data=r.result):(n=eV(i),t.data=r),n?e.postMessage(t,n):e.postMessage(t)}function ex(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function eV(e){if(!e||!e.length)return null;if(We("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!Twe(r));return t.length?t:null}function Twe(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const Awe={statsWorker:()=>Be(()=>import("./statsWorker.12546db6.js"),["assets/statsWorker.12546db6.js","assets/quantizationUtils.d09757e3.js","assets/utils.9dfb26f2.js","assets/preload-helper.387dac8f.js"]),geometryEngineWorker:()=>Be(()=>import("./geometryEngineWorker.6b706bcf.js"),["assets/geometryEngineWorker.6b706bcf.js","assets/geometryEngineJSON.d3fb0de1.js","assets/geometryEngineBase.f43341a0.js","assets/json.d1a0fa35.js"]),CSVSourceWorker:()=>Be(()=>import("./CSVSourceWorker.5b99e2ba.js"),["assets/CSVSourceWorker.5b99e2ba.js","assets/json.d1a0fa35.js","assets/FeatureStore.4d81d4c5.js","assets/PooledRBush.65161e17.js","assets/centroid.79915d1f.js","assets/projectionSupport.a2ec70ff.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js","assets/clientSideDefaults.24a06bd0.js"]),EdgeProcessingWorker:()=>Be(()=>import("./EdgeProcessingWorker.8b5e83be.js"),["assets/EdgeProcessingWorker.8b5e83be.js","assets/deduplicate.9837c6dd.js","assets/InterleavedLayout.a13cfeee.js","assets/BufferView.02e80ac7.js","assets/types.2e1ddd0e.js","assets/VertexAttribute.5551e0d8.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/preload-helper.387dac8f.js"]),ElevationSamplerWorker:()=>Be(()=>import("./ElevationSamplerWorker.fd88422b.js"),["assets/ElevationSamplerWorker.fd88422b.js","assets/PooledRBush.65161e17.js","assets/georeference.67c97a52.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js","assets/quat.b51cbe14.js","assets/BufferView.02e80ac7.js","assets/vec33.e860ba5e.js","assets/preload-helper.387dac8f.js"]),FeatureServiceSnappingSourceWorker:()=>Be(()=>import("./FeatureServiceSnappingSourceWorker.ca21c738.js"),["assets/FeatureServiceSnappingSourceWorker.ca21c738.js","assets/FeatureStore.4d81d4c5.js","assets/PooledRBush.65161e17.js","assets/centroid.79915d1f.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js"]),GeoJSONSourceWorker:()=>Be(()=>import("./GeoJSONSourceWorker.935a4ede.js"),["assets/GeoJSONSourceWorker.935a4ede.js","assets/FeatureStore.4d81d4c5.js","assets/PooledRBush.65161e17.js","assets/centroid.79915d1f.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js","assets/geojson.82f10ea5.js","assets/clientSideDefaults.24a06bd0.js","assets/sourceUtils.e9611f28.js"]),LercWorker:()=>Be(()=>import("./LercWorker.81a494f9.js"),["assets/LercWorker.81a494f9.js","assets/preload-helper.387dac8f.js"]),MemorySourceWorker:()=>Be(()=>import("./MemorySourceWorker.6650f6a6.js"),["assets/MemorySourceWorker.6650f6a6.js","assets/objectIdUtils.773397d7.js","assets/FeatureStore.4d81d4c5.js","assets/PooledRBush.65161e17.js","assets/centroid.79915d1f.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js","assets/clientSideDefaults.24a06bd0.js","assets/sourceUtils.e9611f28.js"]),PBFDecoderWorker:()=>Be(()=>import("./PBFDecoderWorker.bbb0fac9.js"),["assets/PBFDecoderWorker.bbb0fac9.js","assets/preload-helper.387dac8f.js"]),Pipeline:()=>Be(()=>import("./Pipeline.cbed8d36.js"),["assets/Pipeline.cbed8d36.js","assets/preload-helper.387dac8f.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js","assets/FeatureStore2D.b0244937.js","assets/CircularArray.eecf6ac8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/enums.6e42a319.js","assets/visualVariablesUtils.42df48c6.js","assets/Utils.f67560a4.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/visualVariablesUtils.087ada97.js","assets/ogcFeatureUtils.b832242d.js","assets/geojson.82f10ea5.js","assets/clientSideDefaults.24a06bd0.js"]),PointCloudWorker:()=>Be(()=>import("./PointCloudWorker.38a21bd4.js"),["assets/PointCloudWorker.38a21bd4.js","assets/quat.b51cbe14.js","assets/quatf64.ddec7ef6.js","assets/vec3f32.8d37ecf5.js","assets/PointCloudUniqueValueRenderer.360992d5.js","assets/VertexAttribute.5551e0d8.js","assets/preload-helper.387dac8f.js"]),RasterWorker:()=>Be(()=>import("./RasterWorker.ed84c827.js"),["assets/RasterWorker.ed84c827.js","assets/rasterProjectionHelper.5be6c842.js","assets/utils.58e19774.js","assets/preload-helper.387dac8f.js"]),SceneLayerSnappingSourceWorker:()=>Be(()=>import("./SceneLayerSnappingSourceWorker.b638e393.js"),["assets/SceneLayerSnappingSourceWorker.b638e393.js","assets/lineSegment.930527e9.js","assets/vectorStacks.78d4f069.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js","assets/sphere.471697c0.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/utils.1e6f5f3b.js","assets/EdgeProcessingWorker.8b5e83be.js","assets/deduplicate.9837c6dd.js","assets/InterleavedLayout.a13cfeee.js","assets/BufferView.02e80ac7.js","assets/types.2e1ddd0e.js","assets/VertexAttribute.5551e0d8.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),SceneLayerWorker:()=>Be(()=>import("./SceneLayerWorker.78c2164c.js"),["assets/SceneLayerWorker.78c2164c.js","assets/preload-helper.387dac8f.js","assets/sphere.471697c0.js","assets/vectorStacks.78d4f069.js","assets/quatf64.ddec7ef6.js","assets/mat4f64.a79dd289.js"]),WFSSourceWorker:()=>Be(()=>import("./WFSSourceWorker.b5599068.js"),["assets/WFSSourceWorker.b5599068.js","assets/FeatureStore.4d81d4c5.js","assets/PooledRBush.65161e17.js","assets/centroid.79915d1f.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/QueryEngine.6d4001c3.js","assets/QueryEngineResult.191af376.js","assets/preload-helper.387dac8f.js","assets/quantizationUtils.d09757e3.js","assets/WhereClause.5a38bf79.js","assets/utils.9dfb26f2.js","assets/utils.1e6f5f3b.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.3d7ef658.js","assets/geojson.82f10ea5.js","assets/sourceUtils.e9611f28.js","assets/wfsUtils.894db457.js","assets/xmlUtils.986ddba5.js"]),WorkerTileHandler:()=>Be(()=>import("./WorkerTileHandler.16eabdd1.js"),["assets/WorkerTileHandler.16eabdd1.js","assets/enums.2a1fad7f.js","assets/GeometryUtils.814cb798.js","assets/BidiEngine.ec67919b.js","assets/config.40d47db8.js","assets/StyleDefinition.627ffe6c.js","assets/enums.6e42a319.js","assets/Geometry.b68345ae.js","assets/TileClipper.68567d53.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.8166011b.js","assets/StyleRepository.3f478fb9.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/earcut.d30cbec0.js"])},{CLOSE:tV,ABORT:rV,INVOKE:iV,RESPONSE:ow,OPEN_PORT:nV,ON:$we}=go,Cwe=2;class kwe{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===go.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Vo{constructor(t,r,i){this._port=t,this._getNextJob=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new kwe(n=>this._onInvokeMessage(n)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const r=new MessageChannel;let i;i=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Vo(r.port1,{channel:r,client:i},()=>null);return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=n),Vo.clients.set(n,i),r.port2}static loadWorker(t){const r=Awe[t];return r?r():Promise.resolve(null)}close(){this._post({type:tV}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){const n=i&&i.signal,s=i&&i.transferList;if(!this._port)return Promise.reject(new $e("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=OX();return new Promise((a,l)=>{if(Za(n))return this._processWork(),void l(wi());const u=Ka(n,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),Jo(p.abortHandle),this._post({type:rV,jobId:o}),l(wi()))}),c={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,c),this._post({type:iV,jobId:o,methodName:t,abortable:n!=null},r,s)})}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:go.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),{remove(){i.port1.postMessage({type:go.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)}}}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:nV,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=Cwe)return;const t=this._getNextJob();if(!t)return;const{methodName:r,data:i,invokeOptions:n,deferred:s}=t;this.invoke(r,i,n).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Jo(t.abortHandle),t.reject(wi(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){de(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=ex(t);if(r)switch(r.type){case ow:this._onResponseMessage(r);break;case iV:this._invokeQueue.push(r);break;case rV:this._onAbortMessage(r);break;case tV:this._onCloseMessage();break;case nV:this._onOpenPortMessage(r);break;case $we:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Vo.clients.get(this)===t&&t.destroy(),Vo.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,c=u[r];try{if(!c&&r&&r.includes(".")){const p=r.split(".");for(let d=0;d<p.length-1;d++)u=u[p[d]],c=u[p[d+1]]}if(typeof c!="function")throw new TypeError(`${r} is not a function`);l=c.call(u,n,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:ow,jobId:i,error:gI(p)})}jp(l)?(a.set(i,{controller:o,promise:l}),l.then(p=>{a.has(i)&&(a.delete(i),this._post({type:ow,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),Vn(p)||this._post({type:ow,jobId:i,error:gI(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:ow,jobId:i},l)}_onOpenPortMessage(t){new Vo(t.port,{client:this._client},()=>null)}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=HT(t.port,"message",s=>{ex(s).type===go.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs;if(!s.has(r))return;const o=s.get(r);this._processWork(),s.delete(r),Jo(o.abortHandle),i?o.reject($e.fromJSON(JSON.parse(i))):o.resolve(n)}_post(t,r,i){return RX(this._port,t,r,i)}}Vo.kernelInfo={revision:LK,version:NK,buildDate:PK},Vo.clients=new Map;const Owe=ot.getLogger("esri.core.workers.Connection");class Rwe{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new yI}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{ui(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];jp(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Vo(u,r,()=>this._ongoingJobsQueue.pop()),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Vo(l,r,()=>this._ongoingJobsQueue.pop()),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a.invoke(t,r,i))}return n}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.deferred.reject(wi(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i.close());this._clients.length=0,this._clientPromises.length=0}invoke(t,r,i){let n=null;Array.isArray(i)?(Owe.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:i}):n=i;const s=Ap();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:n,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l.jobAdded())}return s.promise}on(t,r){return Promise.all(this._clientPromises).then(()=>BT(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{r[n]=s.openPort(),--i==0&&t(r)})})}get test(){return{numClients:this._clients.length}}}const PX=ot.getLogger("esri.intl");function Uh(e,t,r={}){const{format:i={}}=r;return Gu(e,n=>Pwe(n,t,i))}function Pwe(e,t,r){let i,n;const s=e.indexOf(":");if(s===-1?i=e.trim():(i=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!i)return"";const o=nb(i,t);if(o==null)return"";const a=r[n]||r[i];return a?Lwe(o,a):n?Nwe(o,n):o9(o)}function Lwe(e,t){switch(t.type){case"date":return Cp(e,t.intlOptions);case"number":return Uf(e,t.intlOptions);default:return PX.warn("missing format descriptor for key {key}"),o9(e)}}function Nwe(e,t){switch(t.toLowerCase()){case"dateformat":return Cp(e);case"numberformat":return Uf(e);default:return PX.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Cp(e):/^numberformat/i.test(t)?Uf(e):o9(e)}}function o9(e){switch(typeof e){case"string":return e;case"number":return Uf(e);case"boolean":return""+e;default:return e instanceof Date?Cp(e):""}}async function Dwe(e,t,r,i){const n=t.exec(r);if(!n)throw new $e("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=Fye(i),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let c;try{c=await sV(e(u))}catch(p){if(u===l)throw new $e("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:p});try{c=await sV(e(l))}catch(d){throw new $e("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d})}}return c}async function sV(e){if(de(oV.fetchBundleAsset))return oV.fetchBundleAsset(e);const t=await Mt(e,{responseType:"text"});return JSON.parse(t.data)}class Fwe{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return Dwe(this.getAssetUrl,this.matcher,t,r)}}function jwe(e){return new Fwe(e)}const oV={};Dye(jwe({pattern:"esri/",location:$r}));const aV={};function Uwe(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}function Vwe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=aV.baseUrl),aV.packages?.forEach(r=>{Uwe(t.packages,r)}),t}class Bwe{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}}class WM{constructor(){this._dispatcher=new Bwe,this._workerPostMessage({type:go.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){H5(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){H5(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=ex(t);if(r&&r.type===go.OPEN){const{modulePath:i,jobId:n}=r;let s=await Vo.loadWorker(i);s||(s=await Be(()=>import(i),[]));const o=Vo.connect(s);this._workerPostMessage({type:go.OPENED,jobId:n,data:o})}}}const A6=ot.getLogger("esri.core.workers"),{HANDSHAKE:zwe}=go,Gwe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let R3,P3;const lV="Failed to create Worker. Fallback to execute module in main thread";async function qwe(){if(!We("esri-workers")||(We("mozilla"),0))return uV(new WM);if(!R3&&!P3)try{const t=Gwe.replace('"{CONFIGURATION}"',`'${Hwe()}'`);R3=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){P3=t||{}}let e;if(R3)try{e=new Worker(R3,{name:"esri-worker-"+Wwe++})}catch{A6.warn(lV,P3),e=new WM}else A6.warn(lV,P3),e=new WM;return uV(e)}async function uV(e){return new Promise(t=>{function r(n){const s=ex(n);s&&s.type===zwe&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),A6.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new WM).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function Hwe(){let e;if(_r.default!=null){const n={..._r};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(_r));e.assetsPath=Ol(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Ga(),e.has={"esri-csp-restrictions":We("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":We("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":We("esri-2d-query-centroid-enabled"),"featurelayer-pbf":We("featurelayer-pbf"),"featurelayer-simplify-thresholds":We("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":We("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":We("featurelayer-simplify-mobile-factor"),"esri-atomics":We("esri-atomics"),"esri-shared-array-buffer":We("esri-shared-array-buffer"),"esri-tiles-debug":We("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":We("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":We("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Ol(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Ol(e.workers.workerPath):e.workers.workerPath=Ol($r("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=_r.workers.loaderConfig,r=Vwe({baseUrl:t?.baseUrl,locale:Ga(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),i={version:NK,buildDate:PK,revision:LK};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:i})}let Wwe=0;const Jwe=ot.getLogger("esri.core.workers"),{ABORT:cV,INVOKE:Zwe,OPEN:Kwe,OPENED:Ywe,RESPONSE:aw}=go;class a9{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),Jwe.error(i)})}static async create(t){const r=await qwe();return new a9(r,t)}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=OX();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:KL(i,()=>{this._outJobs.delete(n),this._post({type:cV,jobId:n})})};this._outJobs.set(n,a),this._post({type:Kwe,jobId:n,modulePath:t})})}_onMessage(t){const r=ex(t);if(r)switch(r.type){case Ywe:this._onOpenedMessage(r);break;case aw:this._onResponseMessage(r);break;case cV:this._onAbortMessage(r);break;case Zwe:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=jme[r];let u;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);u=l.call(null,n,{signal:o?o.signal:null})}catch(c){return void this._post({type:aw,jobId:i,error:gI(c)})}jp(u)?(a.set(i,{controller:o,promise:u}),u.then(c=>{a.has(i)&&(a.delete(i),this._post({type:aw,jobId:i},c))},c=>{a.has(i)&&(a.delete(i),c||(c={message:"Error encountered at method"+r}),Vn(c)||this._post({type:aw,jobId:i,error:gI(c||{message:`Error encountered at method ${r}`})}))})):this._post({type:aw,jobId:i},u)}_onOpenedMessage(t){const{jobId:r,data:i}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Jo(n.abortHandle),n.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:n}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Jo(s.abortHandle),i?s.reject($e.fromJSON(JSON.parse(i))):s.resolve(n))}_post(t,r,i){return RX(this.worker,t,r,i)}}let Fy=We("esri-workers-debug")?1:We("host-browser")?navigator.hardwareConcurrency-1:0;Fy||(Fy=We("safari")&&We("mac")||We("trident")?7:2);let hV=0;const JM=[];function Qwe(){NX()}async function L3(e,t){const r=new Rwe;return await r.open(e,t),r}async function LX(e,t={}){if(typeof e!="string")throw new $e("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(We("host-webworker")&&!We("esri-workers")&&(r="local"),r==="local"){let i=await Vo.loadWorker(e);i||(i=await Be(()=>import(e),[])),ui(t.signal);const n=t.client||i;return L3([Vo.connect(i)],{...t,client:n})}if(await NX(),ui(t.signal),r==="dedicated"){const i=hV++%Fy;return L3([await JM[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Fy);if(i<Fy){const n=new Array(i);for(let s=0;s<i;++s){const o=hV++%Fy;n[s]=JM[o].open(e,t)}return L3(n,t)}}return L3(JM.map(i=>i.open(e,t)),t)}let N3=null;async function NX(){if(N3)return N3;new AbortController;const e=[];for(let t=0;t<Fy;t++){const r=a9.create(t).then(i=>(JM[t]=i,i));e.push(r)}return N3=Promise.all(e),N3}function pV(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function Xwe(e,t,r){if(!e&&!t||!r)return;const i=wv(r);dV(e,r,i),dV(t,r,i)}function dV(e,t,r){if(e)for(const i of e)e_e(i.geometry,t,r)}function e_e(e,t,r){if(Ne(e)||!e.spatialReference||Xn(e.spatialReference,t))return;const i=wv(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)pV(e,e.rings,i);else if("paths"in e)pV(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function DX(e,t,r){if(Ne(t)||Ne(r)||r.vcsWkid||Xn(t,r))return null;const i=wv(t)/wv(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>t_e(n,i);case"polyline":case"esriGeometryPolyline":return n=>i_e(n,i);case"polygon":case"esriGeometryPolygon":return n=>r_e(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>n_e(n,i);case"extent":case"esriGeometryExtent":return n=>s_e(n,i);default:return null}}function t_e(e,t){e&&e.z!=null&&(e.z*=t)}function r_e(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function i_e(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function n_e(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function s_e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function $6(e,t,r){if(!r||!r.features||!r.hasZ)return;const i=DX(r.geometryType,t,e.outSpatialReference);if(!Ne(i))for(const n of r.features)i(n.geometry)}const o_e=new Xt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var C6;const a_e=new Xt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let to=C6=class extends Je{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?a_e.fromJSON(r.fieldValueType):null}clone(){return new C6({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};h([f({type:String,json:{write:!0}})],to.prototype,"alias",void 0),h([f({type:[String,Number],json:{write:{allowNull:!0}}})],to.prototype,"defaultValue",void 0),h([f()],to.prototype,"description",void 0),h([Ke("description")],to.prototype,"readDescription",null),h([f({types:EX,json:{read:{reader:n9},write:!0}})],to.prototype,"domain",void 0),h([f({type:Boolean,json:{write:!0}})],to.prototype,"editable",void 0),h([f({type:fr,json:{write:!0}})],to.prototype,"length",void 0),h([f({type:String,json:{write:!0}})],to.prototype,"name",void 0),h([f({type:Boolean,json:{write:!0}})],to.prototype,"nullable",void 0),h([Ft(o_e)],to.prototype,"type",void 0),h([f()],to.prototype,"valueType",void 0),h([Ke("valueType",["description"])],to.prototype,"readValueType",null),to=C6=h([me("esri.layers.support.Field")],to);const No=to;var k6;const O6=new Xt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Gn=k6=class extends Je{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=wt.fromJSON(t.spatialReference),i=[];for(let n=0;n<e.length;n++){const s=e[n],o=fs.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;de(o.geometry)&&!a&&(o.geometry.spatialReference=r);const l=s.aggregateGeometries,u=o.aggregateGeometries;if(l&&de(u))for(const c in u){const p=u[c],d=l[c]?.spatialReference;de(p)&&!d&&(p.spatialReference=r)}i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void O6.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if(s&&de(s.geometry))return void O6.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Hu(e);return!r&&t.spatialReference&&(i.spatialReference=wt.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&de(i.geometry)&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new k6(this.cloneProperties())}cloneProperties(){return Pe({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=u=>Math.round((u-i)/t),o=u=>Math.round((n-u)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,c=a.length;u<c;u++)l(a[u].geometry)||(a.splice(u,1),u--,c--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=c=>c*s+i,l=c=>n-c*o,u=this._getHydrationFunction(e,a,l);for(const{geometry:c}of t)de(c)&&u(c);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),c=r(l[1]);u===i&&c===n||(s.push([u-i,c-n]),i=u,n=c)}else i=t(l[0]),n=r(l[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=ig(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],u=this._quantizePoints(l,t,r);u&&s.push(u)}return s.length>0?(ig(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r){return e==="point"?i=>{i.x=t(i.x),i.y=r(i.y)}:e==="polyline"||e==="polygon"?i=>{const n=ig(i)?i.rings:i.paths;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];for(let c=0,p=u.length;c<p;c++){const d=u[c];c>0?(s+=d[0],o+=d[1]):(s=d[0],o=d[1]),d[0]=t(s),d[1]=r(o)}}}:e==="extent"?i=>{i.xmin=t(i.xmin),i.ymin=r(i.ymin),i.xmax=t(i.xmax),i.ymax=r(i.ymax)}:e==="multipoint"?i=>{const n=i.points;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];a>0?(s+=u[0],o+=u[1]):(s=u[0],o=u[1]),u[0]=t(s),u[1]=r(o)}}:void 0}};h([f({type:String,json:{write:!0}})],Gn.prototype,"displayFieldName",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Gn.prototype,"exceededTransferLimit",void 0),h([f({type:[fs],json:{write:!0}})],Gn.prototype,"features",void 0),h([Ke("features")],Gn.prototype,"readFeatures",null),h([f({type:[No],json:{write:!0}})],Gn.prototype,"fields",void 0),h([f({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:O6.read}}})],Gn.prototype,"geometryType",void 0),h([et("geometryType")],Gn.prototype,"writeGeometryType",null),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Gn.prototype,"hasM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Gn.prototype,"hasZ",void 0),h([f({types:Up,json:{write:!0}})],Gn.prototype,"queryGeometry",void 0),h([Ke("queryGeometry")],Gn.prototype,"readQueryGeometry",null),h([f({type:wt,json:{write:!0}})],Gn.prototype,"spatialReference",void 0),h([et("spatialReference")],Gn.prototype,"writeSpatialReference",null),h([f({json:{write:!0}})],Gn.prototype,"transform",void 0),Gn=k6=h([me("esri.rest.support.FeatureSet")],Gn),Gn.prototype.toJSON.isDefaultToJSON=!0;const Yg=Gn;var l_e=Object.freeze(Object.defineProperty({__proto__:null,default:Yg},Symbol.toStringTag,{value:"Module"}));let u_e=0;const B$=ot.getLogger("esri.layers.graphics.sources.MemorySource");let sp=class extends Ya.LoadableMixin(Qx(Hs(Lt))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=de(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get workerGeometryType(){const e=this.layer?.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);$6(e,this.layer.spatialReference,r);const i=Yg.fromJSON(r);if(!this._requiresClientGraphicMapping())return i;const n=this.layer.objectIdField;for(const s of i.features){const o=s.attributes[n],a=this._idToClientGraphic.get(o);a&&(s.geometry=a.geometry)}return i.geometryType=this.layer.geometryType,i}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new $e("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return $6(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:qt.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new $e("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const i=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=u=>"objectId"in u&&u.objectId!=null?u.objectId:"attributes"in u&&u.attributes[t]!=null?u.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const u of e.deleteFeatures){const c=s(u);c!=null&&i.push(c)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const u of e.updateFeatures)if(n.push(this._serializeFeature(u)),o){const c=s(u);c!=null&&o.set(c,u)}}Xwe(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:i});return this.fullExtent=a,r&&r.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||Ne(e))return;const r=[];for(const{geometry:i}of e)!de(i)||i.type!=="mesh"||i.hasExtent||i.loaded||r.push(i.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const i=e.get(r.objectId);i!=null&&this._addIdToClientGraphic(i)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new $e("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let i=null;for(let s=0;s<e.length;s++){const o=e[s],a=this._serializeFeature(o);!i&&de(o.geometry)&&(i=o.geometry.type),r[s]=a,t.set(`${a.uid}`,o)}const n=this;return{features:r,inferredGeometryType:i,finish(s){const o=n.sourceJSON.objectIdField;for(const a in s){const l=s[a],u=t.get(a);u&&(u.attributes||(u.attributes={}),l===-1?delete u.attributes[o]:u.attributes[o]=l,n._addIdToClientGraphic(u))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];r!=null&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),i=(u_e++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return Ne(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?wo.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await LX("MemorySourceWorker",{strategy:We("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:i,hasM:n,hasZ:s,timeInfo:o}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const l=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",d=>{B$.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),d.preventDefault()}));const u={features:l.features,fields:t&&t.map(d=>d.toJSON()),geometryType:yU.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||s,objectIdField:i,spatialReference:a?null:r&&r.toJSON(),timeInfo:o?o.toJSON():null},c=await this._connection.invoke("load",u,{signal:e});for(const d of c.warnings)B$.warn(d.message,{layer:this.layer,warning:d});c.featureErrors.length&&B$.warn(`Encountered ${c.featureErrors.length} validation errors while loading features`,c.featureErrors);const p=c.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(l.inferredGeometryType)&&(p.geometryType=yU.toJSON(l.inferredGeometryType)),this.sourceJSON=p,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),l.finish(c.assignedObjectIds)}};h([tN({Type:fs,ensureType:Bi(fs)})],sp.prototype,"itemType",void 0),h([f()],sp.prototype,"type",void 0),h([f({constructOnly:!0})],sp.prototype,"layer",void 0),h([f({readOnly:!0})],sp.prototype,"workerGeometryType",null),h([f()],sp.prototype,"sourceJSON",void 0),sp=h([me("esri.layers.graphics.sources.MemorySource")],sp);function c_e(e){return"portalItem"in e}const l9=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):c_e(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return h([f({type:String})],t.prototype,"apiKey",null),t=h([me("esri.layers.mixins.APIKeyMixin")],t),t},FX={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},jX=Object.values(FX),UX=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${jX.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),h_e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${jX.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),p_e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function d_e(e){return!!UX.test(e)}function zf(e){if(Ne(e))return null;const t=fn(e),r=t.path.match(UX)||t.path.match(h_e);if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:u9(a!==-1?n.slice(a+1):n),serverType:FX[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function f_e(e){const t=fn(e).path.match(p_e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function u9(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function m_e(e,t){const r=[];if(e){const i=zf(e);de(i)&&i.title&&r.push(i.title)}if(t){const i=u9(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function c9(e){if(!e)return!1;const t=".arcgis.com/",r="//services",i="//tiles",n="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(r)||e.includes(i)||e.includes(n);return s&&o}function y_e(e,t){return e&&CK(kK(e,t))}function g_e(e){let{url:t}=e;if(!t)return{url:t};t=kK(t,e.logger);const r=fn(t),i=zf(r.path);let n;if(de(i))i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=f_e(r.path);de(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:CK(t),layerId:n}}function v_e(e,t,r,i,n){Ag(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=xg(i.url,r,e.layerId.toString()))}function b_e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),n=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return r&&(i||n||s)}const S4=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=zf(this.url);if(de(r)&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",y_e(r,ot.getLogger(this.declaredClass)))}};return h([f()],t.prototype,"title",null),h([f({type:String})],t.prototype,"url",null),t=h([me("esri.layers.mixins.ArcGISService")],t),t};function E4(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function w_e(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function __e(e,t,r,i,n,s,o,a,l,u,c,p,d,m,g,b){const v=new Float32Array(16);return v[0]=e,v[1]=t,v[2]=r,v[3]=i,v[4]=n,v[5]=s,v[6]=o,v[7]=a,v[8]=l,v[9]=u,v[10]=c,v[11]=p,v[12]=d,v[13]=m,v[14]=g,v[15]=b,v}function x_e(e,t){return new Float32Array(e,t,16)}const S_e=E4();Object.freeze(Object.defineProperty({__proto__:null,create:E4,clone:w_e,fromValues:__e,createView:x_e,IDENTITY:S_e},Symbol.toStringTag,{value:"Module"}));function E_e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function cm(e,t,r,i,n,s,o,a,l,u,c,p,d,m,g,b,v){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=p,e[11]=d,e[12]=m,e[13]=g,e[14]=b,e[15]=v,e}function h9(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zp(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function M_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],m=t[11],g=t[12],b=t[13],v=t[14],_=t[15],E=r*a-i*o,I=r*l-n*o,x=r*u-s*o,T=i*l-n*a,M=i*u-s*a,k=n*u-s*l,D=c*b-p*g,B=c*v-d*g,G=c*_-m*g,W=p*v-d*b,K=p*_-m*b,ne=d*_-m*v;let ye=E*ne-I*K+x*W+T*G-M*B+k*D;return ye?(ye=1/ye,e[0]=(a*ne-l*K+u*W)*ye,e[1]=(n*K-i*ne-s*W)*ye,e[2]=(b*k-v*M+_*T)*ye,e[3]=(d*M-p*k-m*T)*ye,e[4]=(l*G-o*ne-u*B)*ye,e[5]=(r*ne-n*G+s*B)*ye,e[6]=(v*x-g*k-_*I)*ye,e[7]=(c*k-d*x+m*I)*ye,e[8]=(o*K-a*G+u*D)*ye,e[9]=(i*G-r*K-s*D)*ye,e[10]=(g*M-b*x+_*E)*ye,e[11]=(p*x-c*M-m*E)*ye,e[12]=(a*B-o*W-l*D)*ye,e[13]=(r*W-i*B+n*D)*ye,e[14]=(b*I-g*T-v*E)*ye,e[15]=(c*T-p*I+d*E)*ye,e):null}function I_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],m=t[11],g=t[12],b=t[13],v=t[14],_=t[15];return e[0]=a*(d*_-m*v)-p*(l*_-u*v)+b*(l*m-u*d),e[1]=-(i*(d*_-m*v)-p*(n*_-s*v)+b*(n*m-s*d)),e[2]=i*(l*_-u*v)-a*(n*_-s*v)+b*(n*u-s*l),e[3]=-(i*(l*m-u*d)-a*(n*m-s*d)+p*(n*u-s*l)),e[4]=-(o*(d*_-m*v)-c*(l*_-u*v)+g*(l*m-u*d)),e[5]=r*(d*_-m*v)-c*(n*_-s*v)+g*(n*m-s*d),e[6]=-(r*(l*_-u*v)-o*(n*_-s*v)+g*(n*u-s*l)),e[7]=r*(l*m-u*d)-o*(n*m-s*d)+c*(n*u-s*l),e[8]=o*(p*_-m*b)-c*(a*_-u*b)+g*(a*m-u*p),e[9]=-(r*(p*_-m*b)-c*(i*_-s*b)+g*(i*m-s*p)),e[10]=r*(a*_-u*b)-o*(i*_-s*b)+g*(i*u-s*a),e[11]=-(r*(a*m-u*p)-o*(i*m-s*p)+c*(i*u-s*a)),e[12]=-(o*(p*v-d*b)-c*(a*v-l*b)+g*(a*d-l*p)),e[13]=r*(p*v-d*b)-c*(i*v-n*b)+g*(i*d-n*p),e[14]=-(r*(a*v-l*b)-o*(i*v-n*b)+g*(i*l-n*a)),e[15]=r*(a*d-l*p)-o*(i*d-n*p)+c*(i*l-n*a),e}function T_e(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],p=e[10],d=e[11],m=e[12],g=e[13],b=e[14],v=e[15];return(t*o-r*s)*(p*v-d*b)-(t*a-i*s)*(c*v-d*g)+(t*l-n*s)*(c*b-p*g)+(r*a-i*o)*(u*v-d*m)-(r*l-n*o)*(u*b-p*m)+(i*l-n*a)*(u*g-c*m)}function VX(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],m=t[10],g=t[11],b=t[12],v=t[13],_=t[14],E=t[15];let I=r[0],x=r[1],T=r[2],M=r[3];return e[0]=I*i+x*a+T*p+M*b,e[1]=I*n+x*l+T*d+M*v,e[2]=I*s+x*u+T*m+M*_,e[3]=I*o+x*c+T*g+M*E,I=r[4],x=r[5],T=r[6],M=r[7],e[4]=I*i+x*a+T*p+M*b,e[5]=I*n+x*l+T*d+M*v,e[6]=I*s+x*u+T*m+M*_,e[7]=I*o+x*c+T*g+M*E,I=r[8],x=r[9],T=r[10],M=r[11],e[8]=I*i+x*a+T*p+M*b,e[9]=I*n+x*l+T*d+M*v,e[10]=I*s+x*u+T*m+M*_,e[11]=I*o+x*c+T*g+M*E,I=r[12],x=r[13],T=r[14],M=r[15],e[12]=I*i+x*a+T*p+M*b,e[13]=I*n+x*l+T*d+M*v,e[14]=I*s+x*u+T*m+M*_,e[15]=I*o+x*c+T*g+M*E,e}function A_e(e,t,r){const i=r[0],n=r[1],s=r[2];if(t===e)e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],p=t[5],d=t[6],m=t[7],g=t[8],b=t[9],v=t[10],_=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=p,e[6]=d,e[7]=m,e[8]=g,e[9]=b,e[10]=v,e[11]=_,e[12]=o*i+c*n+g*s+t[12],e[13]=a*i+p*n+b*s+t[13],e[14]=l*i+d*n+v*s+t[14],e[15]=u*i+m*n+_*s+t[15]}return e}function $_e(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function C_e(e,t,r,i){let n,s,o,a,l,u,c,p,d,m,g,b,v,_,E,I,x,T,M,k,D,B,G,W,K=i[0],ne=i[1],ye=i[2],y=Math.sqrt(K*K+ne*ne+ye*ye);return y<Qt?null:(y=1/y,K*=y,ne*=y,ye*=y,n=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],l=t[1],u=t[2],c=t[3],p=t[4],d=t[5],m=t[6],g=t[7],b=t[8],v=t[9],_=t[10],E=t[11],I=K*K*o+s,x=ne*K*o+ye*n,T=ye*K*o-ne*n,M=K*ne*o-ye*n,k=ne*ne*o+s,D=ye*ne*o+K*n,B=K*ye*o+ne*n,G=ne*ye*o-K*n,W=ye*ye*o+s,e[0]=a*I+p*x+b*T,e[1]=l*I+d*x+v*T,e[2]=u*I+m*x+_*T,e[3]=c*I+g*x+E*T,e[4]=a*M+p*k+b*D,e[5]=l*M+d*k+v*D,e[6]=u*M+m*k+_*D,e[7]=c*M+g*k+E*D,e[8]=a*B+p*G+b*W,e[9]=l*B+d*G+v*W,e[10]=u*B+m*G+_*W,e[11]=c*B+g*G+E*W,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function k_e(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+u*i,e[5]=o*n+c*i,e[6]=a*n+p*i,e[7]=l*n+d*i,e[8]=u*n-s*i,e[9]=c*n-o*i,e[10]=p*n-a*i,e[11]=d*n-l*i,e}function O_e(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-u*i,e[1]=o*n-c*i,e[2]=a*n-p*i,e[3]=l*n-d*i,e[8]=s*i+u*n,e[9]=o*i+c*n,e[10]=a*i+p*n,e[11]=l*i+d*n,e}function R_e(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+u*i,e[1]=o*n+c*i,e[2]=a*n+p*i,e[3]=l*n+d*i,e[4]=u*n-s*i,e[5]=c*n-o*i,e[6]=p*n-a*i,e[7]=d*n-l*i,e}function BX(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function P_e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L_e(e,t,r){let i,n,s,o=r[0],a=r[1],l=r[2],u=Math.sqrt(o*o+a*a+l*l);return u<Qt?null:(u=1/u,o*=u,a*=u,l*=u,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+l*i,e[2]=l*o*s-a*i,e[3]=0,e[4]=o*a*s-l*i,e[5]=a*a*s+n,e[6]=l*a*s+o*i,e[7]=0,e[8]=o*l*s+a*i,e[9]=a*l*s-o*i,e[10]=l*l*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function N_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function D_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F_e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zX(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,u=s+s,c=i*a,p=i*l,d=i*u,m=n*l,g=n*u,b=s*u,v=o*a,_=o*l,E=o*u;return e[0]=1-(m+b),e[1]=p+E,e[2]=d-_,e[3]=0,e[4]=p-E,e[5]=1-(c+b),e[6]=g+v,e[7]=0,e[8]=d+_,e[9]=g-v,e[10]=1-(c+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function j_e(e,t){const r=U_e,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=i*i+n*n+s*s+o*o;return p>0?(r[0]=2*(a*o+c*i+l*s-u*n)/p,r[1]=2*(l*o+c*n+u*i-a*s)/p,r[2]=2*(u*o+c*s+a*n-l*i)/p):(r[0]=2*(a*o+c*i+l*s-u*n),r[1]=2*(l*o+c*n+u*i-a*s),r[2]=2*(u*o+c*s+a*n-l*i)),zX(e,t,r),e}const U_e=aa();function V_e(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function B_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e}function z_e(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function G_e(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,u=s+s,c=o+o,p=n*l,d=n*u,m=n*c,g=s*u,b=s*c,v=o*c,_=a*l,E=a*u,I=a*c,x=i[0],T=i[1],M=i[2];return e[0]=(1-(g+v))*x,e[1]=(d+I)*x,e[2]=(m-E)*x,e[3]=0,e[4]=(d-I)*T,e[5]=(1-(p+v))*T,e[6]=(b+_)*T,e[7]=0,e[8]=(m+E)*M,e[9]=(b-_)*M,e[10]=(1-(p+g))*M,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function q_e(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],u=s+s,c=o+o,p=a+a,d=s*u,m=s*c,g=s*p,b=o*c,v=o*p,_=a*p,E=l*u,I=l*c,x=l*p,T=i[0],M=i[1],k=i[2],D=n[0],B=n[1],G=n[2],W=(1-(b+_))*T,K=(m+x)*T,ne=(g-I)*T,ye=(m-x)*M,y=(1-(d+_))*M,C=(v+E)*M,L=(g+I)*k,F=(v-E)*k,ae=(1-(d+b))*k;return e[0]=W,e[1]=K,e[2]=ne,e[3]=0,e[4]=ye,e[5]=y,e[6]=C,e[7]=0,e[8]=L,e[9]=F,e[10]=ae,e[11]=0,e[12]=r[0]+D-(W*D+ye*B+L*G),e[13]=r[1]+B-(K*D+y*B+F*G),e[14]=r[2]+G-(ne*D+C*B+ae*G),e[15]=1,e}function H_e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,u=r*o,c=i*o,p=i*a,d=n*o,m=n*a,g=n*l,b=s*o,v=s*a,_=s*l;return e[0]=1-p-g,e[1]=c+_,e[2]=d-v,e[3]=0,e[4]=c-_,e[5]=1-u-g,e[6]=m+b,e[7]=0,e[8]=d+v,e[9]=m-b,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function W_e(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),u=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*u,e[15]=0,e}function J_e(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function Z_e(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function K_e(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),u=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*u,e[15]=1,e}function Y_e(e,t,r,i){let n,s,o,a,l,u,c,p,d,m;const g=t[0],b=t[1],v=t[2],_=i[0],E=i[1],I=i[2],x=r[0],T=r[1],M=r[2];return Math.abs(g-x)<Qt&&Math.abs(b-T)<Qt&&Math.abs(v-M)<Qt?h9(e):(c=g-x,p=b-T,d=v-M,m=1/Math.sqrt(c*c+p*p+d*d),c*=m,p*=m,d*=m,n=E*d-I*p,s=I*c-_*d,o=_*p-E*c,m=Math.sqrt(n*n+s*s+o*o),m?(m=1/m,n*=m,s*=m,o*=m):(n=0,s=0,o=0),a=p*o-d*s,l=d*n-c*o,u=c*s-p*n,m=Math.sqrt(a*a+l*l+u*u),m?(m=1/m,a*=m,l*=m,u*=m):(a=0,l=0,u=0),e[0]=n,e[1]=a,e[2]=c,e[3]=0,e[4]=s,e[5]=l,e[6]=p,e[7]=0,e[8]=o,e[9]=u,e[10]=d,e[11]=0,e[12]=-(n*g+s*b+o*v),e[13]=-(a*g+l*b+u*v),e[14]=-(c*g+p*b+d*v),e[15]=1,e)}function Q_e(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],u=i[2];let c=n-r[0],p=s-r[1],d=o-r[2],m=c*c+p*p+d*d;m>0&&(m=1/Math.sqrt(m),c*=m,p*=m,d*=m);let g=l*d-u*p,b=u*c-a*d,v=a*p-l*c;return m=g*g+b*b+v*v,m>0&&(m=1/Math.sqrt(m),g*=m,b*=m,v*=m),e[0]=g,e[1]=b,e[2]=v,e[3]=0,e[4]=p*v-d*b,e[5]=d*g-c*v,e[6]=c*b-p*g,e[7]=0,e[8]=c,e[9]=p,e[10]=d,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function X_e(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function e2e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function t2e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function GX(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function r2e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function i2e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function n2e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function s2e(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],p=e[9],d=e[10],m=e[11],g=e[12],b=e[13],v=e[14],_=e[15],E=t[0],I=t[1],x=t[2],T=t[3],M=t[4],k=t[5],D=t[6],B=t[7],G=t[8],W=t[9],K=t[10],ne=t[11],ye=t[12],y=t[13],C=t[14],L=t[15];return Math.abs(r-E)<=Qt*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-I)<=Qt*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(n-x)<=Qt*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-T)<=Qt*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-M)<=Qt*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-k)<=Qt*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(l-D)<=Qt*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(u-B)<=Qt*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(c-G)<=Qt*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(p-W)<=Qt*Math.max(1,Math.abs(p),Math.abs(W))&&Math.abs(d-K)<=Qt*Math.max(1,Math.abs(d),Math.abs(K))&&Math.abs(m-ne)<=Qt*Math.max(1,Math.abs(m),Math.abs(ne))&&Math.abs(g-ye)<=Qt*Math.max(1,Math.abs(g),Math.abs(ye))&&Math.abs(b-y)<=Qt*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(v-C)<=Qt*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(_-L)<=Qt*Math.max(1,Math.abs(_),Math.abs(L))}function o2e(e){const t=Qt,r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+c*c))<=t}const a2e=VX,l2e=GX;Object.freeze(Object.defineProperty({__proto__:null,copy:E_e,set:cm,identity:h9,transpose:zp,invert:M_e,adjoint:I_e,determinant:T_e,multiply:VX,translate:A_e,scale:$_e,rotate:C_e,rotateX:k_e,rotateY:O_e,rotateZ:R_e,fromTranslation:BX,fromScaling:P_e,fromRotation:L_e,fromXRotation:N_e,fromYRotation:D_e,fromZRotation:F_e,fromRotationTranslation:zX,fromQuat2:j_e,getTranslation:V_e,getScaling:B_e,getRotation:z_e,fromRotationTranslationScale:G_e,fromRotationTranslationScaleOrigin:q_e,fromQuat:H_e,frustum:W_e,perspective:J_e,perspectiveFromFieldOfView:Z_e,ortho:K_e,lookAt:Y_e,targetTo:Q_e,str:X_e,frob:e2e,add:t2e,subtract:GX,multiplyScalar:r2e,multiplyScalarAndAdd:i2e,exactEquals:n2e,equals:s2e,isOrthoNormal:o2e,mul:a2e,sub:l2e},Symbol.toStringTag,{value:"Module"}));const u2e=(e,t)=>{const r=cm(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return zp(r,r)},c2e=(e,t)=>{const r=cm(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return zp(r,r)},h2e=(e,t)=>{const r=1-t,i=cm(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return zp(i,i)},p2e=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=cm(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return zp(n,n)},d2e=(e,t)=>{const r=1-2*t,i=cm(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return zp(i,i)},f2e=(e,t)=>{const r=cm(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return zp(r,r)},m2e=(e,t)=>{const r=1-t,i=cm(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return zp(i,i)};class M4{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=Do(t.strength,r.strength,i),this.radius=Do(t.radius,r.radius,i),this.threshold=Do(t.threshold,r.threshold,i)}clone(){return new M4(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:i2(this.radius),strength:this.strength,threshold:this.threshold}}}class I4{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(Do(t.radius,r.radius,i))}clone(){return new I4(this.radius)}toJSON(){return{type:"blur",radius:i2(this.radius)}}}class tx{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=Do(t.amount,r.amount,i),this._updateMatrix()}clone(){return new tx(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||E4();switch(this.type){case"brightness":this._colorMatrix=u2e(t,this.amount);break;case"contrast":this._colorMatrix=c2e(t,this.amount);break;case"grayscale":this._colorMatrix=h2e(t,this.amount);break;case"invert":this._colorMatrix=d2e(t,this.amount);break;case"saturate":this._colorMatrix=f2e(t,this.amount);break;case"sepia":this._colorMatrix=m2e(t,this.amount)}}}class T4{constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=Do(t.offsetX,r.offsetX,i),this.offsetY=Do(t.offsetY,r.offsetY,i),this.blurRadius=Do(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(Do(t.color[0],r.color[0],i)),this.color[1]=Math.round(Do(t.color[1],r.color[1],i)),this.color[2]=Math.round(Do(t.color[2],r.color[2],i)),this.color[3]=Do(t.color[3],r.color[3],i)}clone(){return new T4(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:i2(this.offsetX),yoffset:i2(this.offsetY),blurRadius:i2(this.blurRadius),color:t}}}class A4{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=Do(t.angle,r.angle,i),this._updateMatrix()}clone(){return new A4(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||E4();this._colorMatrix=p2e(t,this.angle)}}class $4{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=Do(t.amount,r.amount,i)}clone(){return new $4(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function Do(e,t,r){return e+(t-e)*r}function i2(e){return Math.round(1e3*ah(e))/1e3}function y2e(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new tx(e.type,0);case"saturate":case"brightness":case"contrast":return new tx(e.type,1);case"opacity":return new $4(1);case"hue-rotate":return new A4(0);case"blur":return new I4(0);case"drop-shadow":return new T4(0,0,0,[...bN("transparent")]);case"bloom":return new M4(0,0,1)}}function g2e(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function v2e(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(y2e(r[n]))}function b2e(e){const t=e[0];return!!t&&"type"in t}var fV,mV,qX={exports:{}};function HX(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=yV(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new $e("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:yV(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!g2e(t[r].effects,t[r+1].effects))throw new $e("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});v2e(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function yV(e){let t;if(!e)return[];try{t=qX.exports.parse(e)}catch(r){throw new $e("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>w2e(r))}function w2e(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return _2e(e);case"opacity":return x2e(e);case"hue-rotate":return S2e(e);case"blur":return E2e(e);case"drop-shadow":return M2e(e);case"bloom":return I2e(e)}}catch(t){throw t.details.filter=e,t}throw new $e("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function _2e(e){let t=1;return wb(e.parameters,1),e.parameters.length===1&&(t=Su(e.parameters[0])),new tx(e.name,t)}function x2e(e){let t=1;return wb(e.parameters,1),e.parameters.length===1&&(t=Su(e.parameters[0])),new $4(t)}function S2e(e){let t=0;return wb(e.parameters,1),e.parameters.length===1&&(t=O2e(e.parameters[0])),new A4(t)}function E2e(e){let t=0;return wb(e.parameters,1),e.parameters.length===1&&(t=f9(e.parameters[0]),cS(t,e.parameters[0])),new I4(t)}function M2e(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new $e("effect:type-error","Accepts only one color",{});r=R2e(i)}else{const n=f9(i);if(Object.isFrozen(t))throw new $e("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&cS(n,i)}if(t.length<2||t.length>3)throw new $e("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new T4(t[0],t[1],t[2]||0,r||WX("black"))}function I2e(e){let t=1,r=0,i=0;return wb(e.parameters,3),e.parameters[0]&&(t=Su(e.parameters[0])),e.parameters[1]&&(r=f9(e.parameters[1]),cS(r,e.parameters[1])),e.parameters[2]&&(i=Su(e.parameters[2])),new M4(t,r,i)}function wb(e,t){if(e.length>t)throw new $e("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function C4(e){if(e.type==="color")return"<color>";if(e.unit){if(d9[e.unit])return"<length>";if(p9[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function cS(e,t){if(e<0)throw new $e("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function T2e(e){if(e.type!=="quantity"||e.unit!==null)throw new $e("effect:type-error",`Expected <double>, Actual: ${C4(e)}`,{term:e})}function A2e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new $e("effect:type-error",`Expected <double> or <percentage>, Actual: ${C4(e)}`,{term:e})}mV=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function r(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function i(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:_t},c=_t,p="none",d=")",m=",",g="(",b="%",v="px",_="cm",E="mm",I="in",x="pt",T="pc",M="deg",k="rad",D="grad",B="turn",G="#",W=".",K="e",ne=/^[ \t\n\r]/,ye=/^[a-z\-]/,y=/^[0-9a-fA-F]/,C=/^[+\-]/,L=/^[0-9]/,F=Js("none"),ae=_i("none",!1),q=_i(")",!1),fe=_i(",",!1),te=Js("whitespace"),ge=Zp([" ","	",`
`,"\r"],!1,!1),ve=Js("function"),Ee=_i("(",!1),Ie=Js("identifier"),ke=Zp([["a","z"],"-"],!1,!1),Te=Js("percentage"),Se=_i("%",!1),Ae=Js("length"),X=_i("px",!1),Z=_i("cm",!1),le=_i("mm",!1),z=_i("in",!1),ee=_i("pt",!1),we=_i("pc",!1),se=Js("angle"),U=_i("deg",!1),oe=_i("rad",!1),re=_i("grad",!1),R=_i("turn",!1),$=Js("number"),A=Js("color"),V=_i("#",!1),H=Zp([["0","9"],["a","f"],["A","F"]],!1,!1),N=Zp(["+","-"],!1,!1),Y=Zp([["0","9"]],!1,!1),be=_i(".",!1),_e=_i("e",!1),ue=function(){return[]},De=function(Ce,Ye){return{type:"function",name:Ce,parameters:Ye||[]}},qe=function(Ce,Ye){return Ye.length>0?y0(Ce,Ye,3):[Ce]},Qe=function(Ce){return{type:"quantity",value:Ce.value,unit:Ce.unit}},Ve=function(Ce){return{type:"color",colorType:Ce.type,value:Ce.value}},xe=function(Ce){return Ce},Oe=function(){return da()},ze=function(Ce){return{value:Ce,unit:"%"}},rt=function(Ce){return{value:Ce,unit:"px"}},ht=function(Ce){return{value:Ce,unit:"cm"}},gt=function(Ce){return{value:Ce,unit:"mm"}},Nt=function(Ce){return{value:Ce,unit:"in"}},ft=function(Ce){return{value:Ce,unit:"pt"}},zt=function(Ce){return{value:Ce,unit:"pc"}},Ut=function(Ce){return{value:Ce,unit:"deg"}},mr=function(Ce){return{value:Ce,unit:"rad"}},ki=function(Ce){return{value:Ce,unit:"grad"}},ws=function(Ce){return{value:Ce,unit:"turn"}},ac=function(Ce){return{value:Ce,unit:null}},lc=function(){return{type:"hex",value:da()}},Vb=function(Ce){return{type:"function",value:Ce}},uc=function(){return{type:"named",value:da()}},d0=function(){return parseFloat(da())},Ge=0,zr=0,nl=[{line:1,column:1}],mi=0,_s=[],mt=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');c=u[s.startRule]}function da(){return n.substring(zr,Ge)}function _i(Ce,Ye){return{type:"literal",text:Ce,ignoreCase:Ye}}function Zp(Ce,Ye,tt){return{type:"class",parts:Ce,inverted:Ye,ignoreCase:tt}}function e3(){return{type:"end"}}function Js(Ce){return{type:"other",description:Ce}}function at(Ce){var Ye,tt=nl[Ce];if(tt)return tt;for(Ye=Ce-1;!nl[Ye];)Ye--;for(tt={line:(tt=nl[Ye]).line,column:tt.column};Ye<Ce;)n.charCodeAt(Ye)===10?(tt.line++,tt.column=1):tt.column++,Ye++;return nl[Ce]=tt,tt}function t3(Ce,Ye){var tt=at(Ce),hr=at(Ye);return{source:l,start:{offset:Ce,line:tt.line,column:tt.column},end:{offset:Ye,line:hr.line,column:hr.column}}}function tr(Ce){Ge<mi||(Ge>mi&&(mi=Ge,_s=[]),_s.push(Ce))}function l$(Ce,Ye,tt){return new t(t.buildMessage(Ce,Ye),Ce,Ye,tt)}function _t(){var Ce;return(Ce=An())===a&&(Ce=sl()),Ce}function An(){var Ce,Ye;return mt++,Ce=Ge,Dr(),n.substr(Ge,4)===p?(Ye=p,Ge+=4):(Ye=a,mt===0&&tr(ae)),Ye!==a?(Dr(),zr=Ce,Ce=ue()):(Ge=Ce,Ce=a),mt--,Ce===a&&mt===0&&tr(F),Ce}function sl(){var Ce,Ye;if(Ce=[],(Ye=Rr())!==a)for(;Ye!==a;)Ce.push(Ye),Ye=Rr();else Ce=a;return Ce}function Rr(){var Ce,Ye,tt,hr;return Ce=Ge,Dr(),(Ye=u$())!==a?(Dr(),(tt=gm())===a&&(tt=null),Dr(),n.charCodeAt(Ge)===41?(hr=d,Ge++):(hr=a,mt===0&&tr(q)),hr!==a?(Dr(),zr=Ce,Ce=De(Ye,tt)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce}function gm(){var Ce,Ye,tt,hr,$n,yi,Oi,cc;if(Ce=Ge,(Ye=xi())!==a){for(tt=[],hr=Ge,$n=Dr(),n.charCodeAt(Ge)===44?(yi=m,Ge++):(yi=a,mt===0&&tr(fe)),yi===a&&(yi=null),Oi=Dr(),(cc=xi())!==a?hr=$n=[$n,yi,Oi,cc]:(Ge=hr,hr=a);hr!==a;)tt.push(hr),hr=Ge,$n=Dr(),n.charCodeAt(Ge)===44?(yi=m,Ge++):(yi=a,mt===0&&tr(fe)),yi===a&&(yi=null),Oi=Dr(),(cc=xi())!==a?hr=$n=[$n,yi,Oi,cc]:(Ge=hr,hr=a);zr=Ce,Ce=qe(Ye,tt)}else Ge=Ce,Ce=a;return Ce}function xi(){var Ce,Ye;return Ce=Ge,(Ye=zb())===a&&(Ye=f0())===a&&(Ye=r3())===a&&(Ye=i3()),Ye!==a&&(zr=Ce,Ye=Qe(Ye)),(Ce=Ye)===a&&(Ce=Ge,(Ye=m0())!==a&&(zr=Ce,Ye=Ve(Ye)),Ce=Ye),Ce}function Dr(){var Ce,Ye;for(mt++,Ce=[],ne.test(n.charAt(Ge))?(Ye=n.charAt(Ge),Ge++):(Ye=a,mt===0&&tr(ge));Ye!==a;)Ce.push(Ye),ne.test(n.charAt(Ge))?(Ye=n.charAt(Ge),Ge++):(Ye=a,mt===0&&tr(ge));return mt--,Ye=a,mt===0&&tr(te),Ce}function u$(){var Ce,Ye,tt;return mt++,Ce=Ge,(Ye=Bb())!==a?(n.charCodeAt(Ge)===40?(tt=g,Ge++):(tt=a,mt===0&&tr(Ee)),tt!==a?(zr=Ce,Ce=xe(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),mt--,Ce===a&&(Ye=a,mt===0&&tr(ve)),Ce}function Bb(){var Ce,Ye,tt;if(mt++,Ce=Ge,Ye=[],ye.test(n.charAt(Ge))?(tt=n.charAt(Ge),Ge++):(tt=a,mt===0&&tr(ke)),tt!==a)for(;tt!==a;)Ye.push(tt),ye.test(n.charAt(Ge))?(tt=n.charAt(Ge),Ge++):(tt=a,mt===0&&tr(ke));else Ye=a;return Ye!==a&&(zr=Ce,Ye=Oe()),mt--,(Ce=Ye)===a&&(Ye=a,mt===0&&tr(Ie)),Ce}function zb(){var Ce,Ye,tt;return mt++,Ce=Ge,Dr(),(Ye=Zs())!==a?(n.charCodeAt(Ge)===37?(tt=b,Ge++):(tt=a,mt===0&&tr(Se)),tt!==a?(zr=Ce,Ce=ze(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),mt--,Ce===a&&mt===0&&tr(Te),Ce}function f0(){var Ce,Ye,tt;return mt++,Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===v?(tt=v,Ge+=2):(tt=a,mt===0&&tr(X)),tt!==a?(zr=Ce,Ce=rt(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===_?(tt=_,Ge+=2):(tt=a,mt===0&&tr(Z)),tt!==a?(zr=Ce,Ce=ht(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===E?(tt=E,Ge+=2):(tt=a,mt===0&&tr(le)),tt!==a?(zr=Ce,Ce=gt(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===I?(tt=I,Ge+=2):(tt=a,mt===0&&tr(z)),tt!==a?(zr=Ce,Ce=Nt(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===x?(tt=x,Ge+=2):(tt=a,mt===0&&tr(ee)),tt!==a?(zr=Ce,Ce=ft(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,Dr(),(Ye=Zs())!==a?(n.substr(Ge,2)===T?(tt=T,Ge+=2):(tt=a,mt===0&&tr(we)),tt!==a?(zr=Ce,Ce=zt(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a)))))),mt--,Ce===a&&mt===0&&tr(Ae),Ce}function r3(){var Ce,Ye,tt;return mt++,Ce=Ge,(Ye=Zs())!==a?(n.substr(Ge,3)===M?(tt=M,Ge+=3):(tt=a,mt===0&&tr(U)),tt!==a?(zr=Ce,Ce=Ut(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,(Ye=Zs())!==a?(n.substr(Ge,3)===k?(tt=k,Ge+=3):(tt=a,mt===0&&tr(oe)),tt!==a?(zr=Ce,Ce=mr(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,(Ye=Zs())!==a?(n.substr(Ge,4)===D?(tt=D,Ge+=4):(tt=a,mt===0&&tr(re)),tt!==a?(zr=Ce,Ce=ki(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a),Ce===a&&(Ce=Ge,(Ye=Zs())!==a?(n.substr(Ge,4)===B?(tt=B,Ge+=4):(tt=a,mt===0&&tr(R)),tt!==a?(zr=Ce,Ce=ws(Ye)):(Ge=Ce,Ce=a)):(Ge=Ce,Ce=a)))),mt--,Ce===a&&(Ye=a,mt===0&&tr(se)),Ce}function i3(){var Ce,Ye;return mt++,Ce=Ge,Dr(),(Ye=Zs())!==a?(zr=Ce,Ce=ac(Ye)):(Ge=Ce,Ce=a),mt--,Ce===a&&mt===0&&tr($),Ce}function m0(){var Ce,Ye,tt,hr;if(mt++,Ce=Ge,n.charCodeAt(Ge)===35?(Ye=G,Ge++):(Ye=a,mt===0&&tr(V)),Ye!==a){if(tt=[],y.test(n.charAt(Ge))?(hr=n.charAt(Ge),Ge++):(hr=a,mt===0&&tr(H)),hr!==a)for(;hr!==a;)tt.push(hr),y.test(n.charAt(Ge))?(hr=n.charAt(Ge),Ge++):(hr=a,mt===0&&tr(H));else tt=a;tt!==a?(zr=Ce,Ce=lc()):(Ge=Ce,Ce=a)}else Ge=Ce,Ce=a;return Ce===a&&(Ce=Ge,(Ye=Rr())!==a&&(zr=Ce,Ye=Vb(Ye)),(Ce=Ye)===a&&(Ce=Ge,(Ye=Bb())!==a&&(zr=Ce,Ye=uc()),Ce=Ye)),mt--,Ce===a&&(Ye=a,mt===0&&tr(A)),Ce}function Zs(){var Ce,Ye,tt,hr,$n,yi,Oi;for(Ce=Ge,C.test(n.charAt(Ge))?(n.charAt(Ge),Ge++):mt===0&&tr(N),Ye=Ge,tt=[],L.test(n.charAt(Ge))?(hr=n.charAt(Ge),Ge++):(hr=a,mt===0&&tr(Y));hr!==a;)tt.push(hr),L.test(n.charAt(Ge))?(hr=n.charAt(Ge),Ge++):(hr=a,mt===0&&tr(Y));if(n.charCodeAt(Ge)===46?(hr=W,Ge++):(hr=a,mt===0&&tr(be)),hr!==a){if($n=[],L.test(n.charAt(Ge))?(yi=n.charAt(Ge),Ge++):(yi=a,mt===0&&tr(Y)),yi!==a)for(;yi!==a;)$n.push(yi),L.test(n.charAt(Ge))?(yi=n.charAt(Ge),Ge++):(yi=a,mt===0&&tr(Y));else $n=a;$n!==a?Ye=tt=[tt,hr,$n]:(Ge=Ye,Ye=a)}else Ge=Ye,Ye=a;if(Ye===a)if(Ye=[],L.test(n.charAt(Ge))?(tt=n.charAt(Ge),Ge++):(tt=a,mt===0&&tr(Y)),tt!==a)for(;tt!==a;)Ye.push(tt),L.test(n.charAt(Ge))?(tt=n.charAt(Ge),Ge++):(tt=a,mt===0&&tr(Y));else Ye=a;if(Ye!==a){if(tt=Ge,n.charCodeAt(Ge)===101?(hr=K,Ge++):(hr=a,mt===0&&tr(_e)),hr!==a){if(C.test(n.charAt(Ge))?($n=n.charAt(Ge),Ge++):($n=a,mt===0&&tr(N)),$n===a&&($n=null),yi=[],L.test(n.charAt(Ge))?(Oi=n.charAt(Ge),Ge++):(Oi=a,mt===0&&tr(Y)),Oi!==a)for(;Oi!==a;)yi.push(Oi),L.test(n.charAt(Ge))?(Oi=n.charAt(Ge),Ge++):(Oi=a,mt===0&&tr(Y));else yi=a;yi!==a?tt=hr=[hr,$n,yi]:(Ge=tt,tt=a)}else Ge=tt,tt=a;tt===a&&(tt=null),zr=Ce,Ce=d0()}else Ge=Ce,Ce=a;return Ce}function n3(Ce,Ye){return Ce.map(function(tt){return tt[Ye]})}function y0(Ce,Ye,tt){return[Ce].concat(n3(Ye,tt))}if((o=c())!==a&&Ge===n.length)return o;throw o!==a&&Ge<n.length&&tr(e3()),l$(_s,mi<n.length?n.charAt(mi):null,mi<n.length?t3(mi,mi+1):t3(mi,mi))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var c=this.location.end,p=r("",l.line.toString().length),d=a[l.line-1],m=l.line===c.line?c.column:d.length+1;s+=`
 --> `+u+`
`+p+` |
`+l.line+" | "+d+`
`+p+" | "+r("",l.column-1)+r("",m-l.column,"^")}else s+=`
 at `+u}return s},t.buildMessage=function(n,s){var o={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var g=m.parts.map(function(b){return Array.isArray(b)?u(b[0])+"-"+u(b[1]):u(b)});return"["+(m.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(m){return o[m.type](m)}function p(m){var g,b,v=m.map(c);if(v.sort(),v.length>0){for(g=1,b=1;g<v.length;g++)v[g-1]!==v[g]&&(v[b]=v[g],b++);v.length=b}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function d(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+p(n)+" but "+d(s)+" found."},{SyntaxError:t,parse:i}},(fV=qX).exports&&(fV.exports=mV());const p9={deg:1,grad:.9,rad:180/Math.PI,turn:360};function $2e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&p9[e.unit]!=null))throw new $e("effect:type-error",`Expected <angle>, Actual: ${C4(e)}`,{term:e})}const d9={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function C2e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&d9[e.unit]!=null))throw new $e("effect:type-error",`Expected <length>, Actual: ${C4(e)}`,{term:e})}function Su(e){A2e(e);const t=e.value;return cS(t,e),e.unit==="%"?.01*t:t}function k2e(e){return T2e(e),cS(e.value,e),e.value}function O2e(e){return $2e(e),e.value*p9[e.unit]||0}function f9(e){return C2e(e),e.value*d9[e.unit]||0}function R2e(e){switch(e.colorType){case"hex":return Xye(e.value);case"named":return WX(e.value);case"function":return N2e(e.value)}}function WX(e){if(!JK(e))throw new $e("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Qye(e)}const P2e=/^rgba?/i,L2e=/^hsla?/i;function N2e(e){if(wb(e.parameters,4),P2e.test(e.name))return[Su(e.parameters[0]),Su(e.parameters[1]),Su(e.parameters[2]),e.parameters[3]?Su(e.parameters[3]):1];if(L2e.test(e.name))return ZK(k2e(e.parameters[0]),Su(e.parameters[1]),Su(e.parameters[2]),e.parameters[3]?Su(e.parameters[3]):1);throw new $e("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function m9(e,t,r){try{return F2e(e)}catch(i){r?.messages?.push(i)}return null}function y9(e,t,r,i){try{const n=D2e(e);ra(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function D2e(e){const t=HX(e);return t?b2e(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function F2e(e){if(!e||e.length===0)return null;if(j2e(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:gV(r.value)});return t}return gV(e)}function j2e(e){const t=e[0];return!!t&&"scale"in t}function gV(e){if(!e||!e.length)return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[_h(r,"amount")];break;case"blur":i=[_h(r,"radius","pt")];break;case"hue-rotate":i=[_h(r,"angle","deg")];break;case"drop-shadow":i=[_h(r,"xoffset","pt"),_h(r,"yoffset","pt"),_h(r,"blurRadius","pt"),U2e(r,"color")];break;case"bloom":i=[_h(r,"strength"),_h(r,"radius","pt"),_h(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;HX(n),t.push(n)}return t.join(" ")}function _h(e,t,r){if(e[t]==null)throw new $e("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function U2e(e,t){if(e[t]==null)throw new $e("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const vV={read:{reader:m9},write:{allowNull:!0,writer:y9}},Qg=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return h([f({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),h([f({json:{read:!1,write:!1,origins:{"web-map":vV,"portal-item":vV}}})],t.prototype,"effect",void 0),t=h([me("esri.layers.mixins.BlendLayer")],t),t},k4=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return h([f({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=h([me("esri.layers.mixins.CustomParametersMixin")],t),t},bV={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},V2e={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function B2e(e,t){const r=new Date(e,t+1,1);return r.setDate(0),r.getDate()}function ag(e,t,r){const i=new Date(e.getTime());if(t&&r){const n=V2e[r],{getter:s,setter:o,multiplier:a}=n;if(r==="months"){const l=B2e(i.getFullYear(),i.getMonth()+t);i.getDate()>l&&i.setDate(l)}i[o](i[s]()+t*a)}return i}function wV(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function z2e(e,t,r){return e===0?0:e*bV[t]/bV[r]}var cu;let Ta=cu=class extends Je{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return _V}static get empty(){return G2e}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(cu.allTime)}get isEmpty(){return this.equals(cu.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new cu({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=de(this.start)?this.start.getTime():this.start,r=de(this.end)?this.end.getTime():this.end,i=de(e.start)?e.start.getTime():e.start,n=de(e.end)?e.end.getTime():e.end;return t===i&&r===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=qc(this.start,i=>wV(i,e)),r=qc(this.end,i=>ag(wV(i,e),1,e));return new cu({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return cu.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Dw(this.start,-1/0,a=>a.getTime()),r=Dw(this.end,1/0,a=>a.getTime()),i=Dw(e.start,-1/0,a=>a.getTime()),n=Dw(e.end,1/0,a=>a.getTime());let s,o;if(i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),!isNaN(s)&&!isNaN(o)){const a=new cu;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return cu.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new cu,{start:i,end:n}=this;return de(i)&&(r.start=ag(i,e,t)),de(n)&&(r.end=ag(n,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return _V.clone();const t=de(this.start)&&de(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=de(this.end)&&de(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new cu({start:t,end:r})}};h([f({type:Date,json:{write:{allowNull:!0}}})],Ta.prototype,"end",void 0),h([Ke("end")],Ta.prototype,"readEnd",null),h([et("end")],Ta.prototype,"writeEnd",null),h([f({readOnly:!0,json:{read:!1}})],Ta.prototype,"isAllTime",null),h([f({readOnly:!0,json:{read:!1}})],Ta.prototype,"isEmpty",null),h([f({type:Date,json:{write:{allowNull:!0}}})],Ta.prototype,"start",void 0),h([Ke("start")],Ta.prototype,"readStart",null),h([et("start")],Ta.prototype,"writeStart",null),Ta=cu=h([me("esri.TimeExtent")],Ta);const _V=new Ta,G2e=new Ta({start:void 0,end:void 0}),ca=Ta;var R6;let dp=R6=class extends Je{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new R6({mapLayerId:e,gdbVersion:t})}};h([Ft({mapLayer:"map-layer"})],dp.prototype,"type",void 0),h([f({type:fr,json:{write:!0}})],dp.prototype,"mapLayerId",void 0),h([f({type:String,json:{write:!0}})],dp.prototype,"gdbVersion",void 0),dp=R6=h([me("esri.layers.support.source.MapLayerSource")],dp);var P6;let Vh=P6=class extends Je{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:n}=this,s={workspaceId:e,query:t,oidFields:r,spatialReference:i?.clone()??void 0,geometryType:n};return new P6(s)}};h([Ft({queryTable:"query-table"})],Vh.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"workspaceId",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"query",void 0),h([f({type:String,json:{write:!0}})],Vh.prototype,"oidFields",void 0),h([f({type:wt,json:{write:!0}})],Vh.prototype,"spatialReference",void 0),h([Ft(F0e)],Vh.prototype,"geometryType",void 0),Vh=P6=h([me("esri.layers.support.source.QueryTableDataSource")],Vh);var L6;let X0=L6=class extends Je{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new L6({workspaceId:e,dataSourceName:t})}};h([Ft({raster:"raster"})],X0.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],X0.prototype,"dataSourceName",void 0),h([f({type:String,json:{write:!0}})],X0.prototype,"workspaceId",void 0),X0=L6=h([me("esri.layers.support.source.RasterDataSource")],X0);var N6;let ry=N6=class extends Je{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new N6({workspaceId:e,gdbVersion:t,dataSourceName:r})}};h([Ft({table:"table"})],ry.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],ry.prototype,"workspaceId",void 0),h([f({type:String,json:{write:!0}})],ry.prototype,"gdbVersion",void 0),h([f({type:String,json:{write:!0}})],ry.prototype,"dataSourceName",void 0),ry=N6=h([me("esri.layers.support.source.TableDataSource")],ry);var D6,F6;const q2e=en()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let wa=D6=class extends Je{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return xV()(e,t,r)}castLeftTableSource(e){return oh(j6(),e)}readRightTableSource(e,t,r){return xV()(e,t,r)}castRightTableSource(e){return oh(j6(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:n}=this,s={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:i?.clone()??void 0,joinType:n};return new D6(s)}};h([Ft({joinTable:"join-table"})],wa.prototype,"type",void 0),h([f({type:String,json:{write:!0}})],wa.prototype,"leftTableKey",void 0),h([f({type:String,json:{write:!0}})],wa.prototype,"rightTableKey",void 0),h([f({json:{write:!0}})],wa.prototype,"leftTableSource",void 0),h([Ke("leftTableSource")],wa.prototype,"readLeftTableSource",null),h([ur("leftTableSource")],wa.prototype,"castLeftTableSource",null),h([f({json:{write:!0}})],wa.prototype,"rightTableSource",void 0),h([Ke("rightTableSource")],wa.prototype,"readRightTableSource",null),h([ur("rightTableSource")],wa.prototype,"castRightTableSource",null),h([Ft(q2e)],wa.prototype,"joinType",void 0),wa=D6=h([me("esri.layers.support.source.JoinTableDataSource")],wa);let z$=null;function xV(){return z$||(z$=ob({types:j6()})),z$}let G$=null;function j6(){return G$||(G$={key:"type",base:null,typeMap:{"data-layer":Oa,"map-layer":dp}}),G$}const H2e={key:"type",base:null,typeMap:{"join-table":wa,"query-table":Vh,raster:X0,table:ry}};let Oa=F6=class extends Je{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new F6({fields:e,dataSource:t})}};h([Ft({dataLayer:"data-layer"})],Oa.prototype,"type",void 0),h([f({type:[No],json:{write:!0}})],Oa.prototype,"fields",void 0),h([f({types:H2e,json:{write:!0}})],Oa.prototype,"dataSource",void 0),Oa=F6=h([me("esri.layers.support.source.DataLayerSource")],Oa),Oa.from=Bi(Oa);var U6;const SV=new Xt({upperLeft:"upper-left",lowerLeft:"lower-left"});let iy=U6=class extends Je{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new U6(Pe({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};h([f({type:qt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],iy.prototype,"extent",void 0),h([f({type:["view","edit"],json:{write:!0}})],iy.prototype,"mode",void 0),h([f({type:String,json:{read:SV.read,write:SV.write}})],iy.prototype,"originPosition",void 0),h([f({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],iy.prototype,"tolerance",void 0),iy=U6=h([me("esri.rest.support.QuantizationParameters")],iy);const JX=iy;var V6;const EV=new Xt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let hu=V6=class extends Je{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=Pe(e))}clone(){return new V6({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Pe(this.statisticParameters)})}};h([f({type:Number,json:{write:!0}})],hu.prototype,"maxPointCount",void 0),h([f({type:Number,json:{write:!0}})],hu.prototype,"maxRecordCount",void 0),h([f({type:Number,json:{write:!0}})],hu.prototype,"maxVertexCount",void 0),h([f({type:String,json:{write:!0}})],hu.prototype,"onStatisticField",void 0),h([f({type:String,json:{write:!0}})],hu.prototype,"outStatisticFieldName",void 0),h([f({type:String,json:{read:{source:"statisticType",reader:EV.read},write:{target:"statisticType",writer:EV.write}}})],hu.prototype,"statisticType",void 0),h([f({type:Object})],hu.prototype,"statisticParameters",void 0),h([et("statisticParameters")],hu.prototype,"writeStatisticParameters",null),hu=V6=h([me("esri.rest.support.StatisticDefinition")],hu);const ZX=hu;var Q1;const W2e=new Xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),J2e=new Xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Gt=Q1=class extends Je{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return Tl(Q1,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new Q1(Pe({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:de(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Gt.MAX_MAX_RECORD_COUNT_FACTOR=5,h([f({json:{write:!0}})],Gt.prototype,"aggregateIds",void 0),h([f({type:Boolean,json:{write:!0}})],Gt.prototype,"cacheHint",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"compactGeometryEnabled",void 0),h([f({json:{write:!0}})],Gt.prototype,"datumTransformation",void 0),h([ur("datumTransformation")],Gt.prototype,"castDatumTransformation",null),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"defaultSpatialReferenceEnabled",void 0),h([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Gt.prototype,"distance",void 0),h([f({type:Oa,json:{write:!0}})],Gt.prototype,"dynamicDataSource",void 0),h([f({type:String,json:{write:!0}})],Gt.prototype,"formatOf3DObjects",void 0),h([f({type:String,json:{write:!0}})],Gt.prototype,"gdbVersion",void 0),h([f({types:Up,json:{read:Hu,write:!0}})],Gt.prototype,"geometry",void 0),h([f({type:Number,json:{write:!0}})],Gt.prototype,"geometryPrecision",void 0),h([f({type:[String],json:{write:!0}})],Gt.prototype,"groupByFieldsForStatistics",void 0),h([f({type:String,json:{write:!0}})],Gt.prototype,"having",void 0),h([f({type:Date})],Gt.prototype,"historicMoment",void 0),h([et("historicMoment")],Gt.prototype,"writeHistoricMoment",null),h([f({type:Number,json:{write:!0}})],Gt.prototype,"maxAllowableOffset",void 0),h([f({type:Number,cast:e=>e<1?1:e>Q1.MAX_MAX_RECORD_COUNT_FACTOR?Q1.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],Gt.prototype,"maxRecordCountFactor",void 0),h([f({type:["xyFootprint"],json:{write:!0}})],Gt.prototype,"multipatchOption",void 0),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],Gt.prototype,"num",void 0),h([f({json:{write:!0}})],Gt.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],Gt.prototype,"orderByFields",void 0),h([f({type:[String],json:{write:!0}})],Gt.prototype,"outFields",void 0),h([f({type:wt,json:{name:"outSR",write:!0}})],Gt.prototype,"outSpatialReference",void 0),h([f({type:[ZX],json:{write:{enabled:!0,overridePolicy(){return{enabled:de(this.outStatistics)&&this.outStatistics.length>0}}}}})],Gt.prototype,"outStatistics",void 0),h([f({json:{write:!0}})],Gt.prototype,"parameterValues",void 0),h([et("parameterValues")],Gt.prototype,"writeParameterValues",null),h([f({type:At,json:{write:!0}})],Gt.prototype,"pixelSize",void 0),h([f({type:JX,json:{write:!0}})],Gt.prototype,"quantizationParameters",void 0),h([f({type:[Object],json:{write:!0}})],Gt.prototype,"rangeValues",void 0),h([f({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Gt.prototype,"relationParameter",void 0),h([f({type:String,json:{write:!0}})],Gt.prototype,"resultType",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"returnCentroid",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"returnDistinctValues",void 0),h([f({type:Boolean,json:{default:!0,write:!0}})],Gt.prototype,"returnExceededLimitFeatures",void 0),h([f({type:Boolean,json:{write:!0}})],Gt.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"returnQueryGeometry",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"returnM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Gt.prototype,"returnZ",void 0),h([f({type:wt,json:{write:!0}})],Gt.prototype,"sourceSpatialReference",void 0),h([Ft(W2e,{ignoreUnknown:!1,name:"spatialRel"})],Gt.prototype,"spatialRelationship",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],Gt.prototype,"start",void 0),h([et("start"),et("num")],Gt.prototype,"writeStart",null),h([f({type:String,json:{write:!0}})],Gt.prototype,"sqlFormat",void 0),h([f({type:String,json:{write:!0}})],Gt.prototype,"text",void 0),h([f({type:ca,json:{write:!0}})],Gt.prototype,"timeExtent",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],Gt.prototype,"timeReferenceUnknownClient",void 0),h([Ft(J2e,{ignoreUnknown:!1}),f({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],Gt.prototype,"units",void 0),h([f({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],Gt.prototype,"where",void 0),h([et("where")],Gt.prototype,"writeWhere",null),Gt=Q1=h([me("esri.rest.support.Query")],Gt);const jn=Gt;var B6;const q$=new Xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),H$=new Xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Tc=B6=class extends Je{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new jn({geometry:Pe(r),objectIds:Pe(s),spatialRelationship:i,timeExtent:Pe(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new B6({geometry:Pe(t),objectIds:Pe(n),spatialRelationship:r,timeExtent:Pe(i),where:e,units:s,distance:o})}};h([f({type:String,json:{write:!0}})],Tc.prototype,"where",void 0),h([f({types:Up,json:{write:!0}})],Tc.prototype,"geometry",void 0),h([f({type:q$.apiValues,json:{name:"spatialRel",read:{reader:q$.read},write:{allowNull:!1,writer:q$.write,overridePolicy(){return{enabled:de(this.geometry)}}}}})],Tc.prototype,"spatialRelationship",void 0),h([f({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Tc.prototype,"distance",void 0),h([f({type:[Number],json:{write:!0}})],Tc.prototype,"objectIds",void 0),h([f({type:H$.apiValues,json:{read:H$.read,write:{writer:H$.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],Tc.prototype,"units",void 0),h([f({type:ca,json:{write:!0}})],Tc.prototype,"timeExtent",void 0),Tc=B6=h([me("esri.layers.support.FeatureFilter")],Tc);const KX=Tc;var z6;const MV={read:{reader:m9},write:{writer:y9,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},IV={read:{reader:m9},write:{writer:y9,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},TV={name:"showExcludedLabels",default:!0};let ny=z6=class extends Je{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t?.origin){if(r.filter){const i=Object.keys(r.filter);if(i.length>1||i[0]!=="where")return t.messages?.push(new $e("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return t.messages?.push(new $e("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new z6({filter:de(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};h([f({type:KX,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e?.write({},i);n&&Object.keys(n).length!==0?ra(r,n,t):ra(r,null,t)}}}})],ny.prototype,"filter",void 0),h([f({json:{write:!0,origins:{"web-map":MV,"portal-item":MV}}})],ny.prototype,"includedEffect",void 0),h([f({json:{write:!0,origins:{"web-map":IV,"portal-item":IV}}})],ny.prototype,"excludedEffect",void 0),h([f({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":TV,"portal-item":TV}}})],ny.prototype,"excludedLabelsVisible",void 0),ny=z6=h([me("esri.layers.support.FeatureEffect")],ny);const Z2e=ny,AV={write:{allowNull:!0}},K2e=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return h([f({type:Z2e,json:{origins:{"web-map":AV,"portal-item":AV}}})],t.prototype,"featureEffect",void 0),t=h([me("esri.layers.mixins.FeatureEffectLayer")],t),t},Y2e={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function Q2e(e){if(!e)return e;const{start:t,end:r}=e;return new ca({start:de(t)?ag(t,-t.getTimezoneOffset(),"minutes"):t,end:de(r)?ag(r,-r.getTimezoneOffset(),"minutes"):r})}function X2e(e){if(!e)return e;const{start:t,end:r}=e;return new ca({start:de(t)?ag(t,t.getTimezoneOffset(),"minutes"):t,end:de(r)?ag(r,r.getTimezoneOffset(),"minutes"):r})}var G6;let v_=G6=class extends Je{async collectRequiredFields(e,t){return _o(e,t,this.expression)}clone(){return new G6({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};h([f({type:String,json:{write:!0}})],v_.prototype,"expression",void 0),h([f({type:String,json:{write:!0}})],v_.prototype,"title",void 0),v_=G6=h([me("esri.layers.support.FeatureExpressionInfo")],v_);const $V=v_;function exe(){const e=Object.keys(KQ);return e.sort(),e}const txe=exe();var q6;const D3=en()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),CV=new Xt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Bh=q6=class extends Je{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):de(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new q6({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Gpe(this.featureExpressionInfo,e.featureExpressionInfo)}};h([f({type:$V,json:{write:!0}})],Bh.prototype,"featureExpressionInfo",void 0),h([Ke("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Bh.prototype,"readFeatureExpressionInfo",null),h([et("featureExpressionInfo",{featureExpressionInfo:{type:$V},"featureExpression.value":{type:[0]}})],Bh.prototype,"writeFeatureExpressionInfo",null),h([f({type:D3.apiValues,nonNullable:!0,json:{type:D3.jsonValues,read:D3.read,write:{writer:D3.write,isRequired:!0}}})],Bh.prototype,"mode",null),h([f({type:Number,json:{write:!0}})],Bh.prototype,"offset",void 0),h([f({type:txe,json:{type:String,read:CV.read,write:CV.write}})],Bh.prototype,"unit",null),Bh=q6=h([me("esri.layers.support.ElevationInfo")],Bh);const YX=Bh,rxe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},hS={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},g9={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},pS={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Ag}}},v9={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},ixe={value:null,type:YX,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function sat(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const n2={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},nxe={...n2,json:{...n2.json,origins:{"web-document":{...n2.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Z2(t.layerDefinition.drawingInfo.transparency):void 0:Z2(t.drawingInfo.transparency)}}},sxe={type:ca,readOnly:!0,get(){if(!this.layer?.timeInfo)return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:r}=this.layer,i=this.view?.timeExtent;let n=this.layer.timeExtent;e&&(n=X2e(n));let s=r?i&&n?i.intersection(n):i||n:n;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=Q2e(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},oat={type:qt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=qt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=wt.fromJSON(t.spatialReference)),r}}}},read:!1}},QX={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},oxe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},axe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},XX={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},_b=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&bK(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){!r||s&&s.layerContainerType==="tables"||(i.layerType=r)}writeTitle(r,i){i.title=r||"Layer"}read(r,i){i&&(i.layer=this),Gfe(this,r,n=>super.read(r,n),i)}write(r,i){if(i?.origin){const o=`${i.origin}/${i.layerContainerType||"operational-layers"}`,a=Y2e[o];let l=a&&a[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),!l)return i.messages?.push(new $e("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const n=super.write(r,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter(o=>o instanceof $e&&o.name==="web-document-write:property-required").length;return e4(n?.url)?(i?.messages?.push(new $e("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:n}beforeSave(){}};return h([f({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),h([f(XX)],t.prototype,"listMode",void 0),h([et("listMode")],t.prototype,"writeListMode",null),h([f({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),h([et("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),h([f(n2)],t.prototype,"opacity",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),h([et([void 0,"web-scene"],"title")],t.prototype,"writeTitle",null),h([f({type:Boolean,json:{name:"visibility"}})],t.prototype,"visible",void 0),t=h([me("esri.layers.mixins.OperationalLayer")],t),t};var H6;const W$=new Xt({asc:"ascending",desc:"descending"});let e1=H6=class extends Je{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new H6({field:this.field,valueExpression:this.valueExpression,order:this.order})}};h([f({type:String,json:{write:!0}})],e1.prototype,"field",void 0),h([f({type:String,json:{write:!0}})],e1.prototype,"valueExpression",void 0),h([f({type:W$.apiValues,json:{read:W$.read,write:W$.write}})],e1.prototype,"order",void 0),e1=H6=h([me("esri.layers.support.OrderByInfo")],e1);const eee=e1;function lxe(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new eee;return n.read(i,r),[n]}function uxe(e,t,r,i){const n=e.find(s=>!!s.field);n&&ra(r,[n.toJSON()],t)}const cxe=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return h([f({type:[eee],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:lxe},write:{target:"layerDefinition.orderBy",writer:uxe}}})],t.prototype,"orderBy",void 0),t=h([me("esri.layers.mixins.OrderedLayer")],t),t},hxe=ot.getLogger("esri.layers.mixins.PortalLayer"),xb=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem?.destroy(),this.portalItem=null}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new z2({id:i.itemId,portal:n&&n.portal})}writePortalItem(r,i){r&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){if(this.portalItem&&this.portalItem.id)try{const n=await Be(()=>import("./layersLoader.c832ef21.js").then(function(s){return s.l}),["assets/layersLoader.c832ef21.js","assets/lazyLayerLoader.e0a392f3.js","assets/preload-helper.387dac8f.js","assets/jsonContext.4a2dd7f6.js"]);return ui(i),await n.load({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData},i)}catch(n){throw Vn(n)||hxe.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(Fp(i),!0)))}async _fetchUserHasEditingPrivileges(r){const i=this.url?cn?.findCredential(this.url):null;if(!i)return!0;const n=F3.credential===i?F3.user:await this._fetchEditingUser(r);return F3.credential=i,F3.user=n,Ne(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const i=this.portalItem?.portal?.user;if(i)return i;const n=cn.findServerInfo(this.url);if(!n?.owningSystemUrl)return null;const s=`${n.owningSystemUrl}/sharing/rest`,o=qs.getDefault();if(o&&o.loaded&&Va(o.restUrl)===Va(s))return o.user;const a=`${s}/community/self`,l=de(r)?r.signal:null,u=await QT(Mt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?gN.fromJSON(u.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){const n=i&&i.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||qs.getDefault());return n&&s&&!IK(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new $e("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return h([f({type:z2})],t.prototype,"portalItem",null),h([Ke("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),h([et("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),h([f({clonable:!1})],t.prototype,"resourceReferences",void 0),h([f({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=h([me("esri.layers.mixins.PortalLayer")],t),t},F3={credential:null,user:null},rx=new Lt,s2=new WeakMap;function pxe(e){tee(e)&&rx.push(e)}function dxe(e){tee(e)&&rx.includes(e)&&rx.remove(e)}function tee(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function ree(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:ree(t,e%t):0}let J$=0,j3=0;function fxe(){const e=Date.now();for(const t of rx)t.refreshInterval&&e-(s2.get(t)??0)+5>=6e4*t.refreshInterval&&(s2.set(t,e),t.refresh(e))}HZ(()=>{const e=Date.now();let t=0;for(const r of rx)t=ree(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?s2.get(r)||s2.set(r,e):s2.delete(r);if(t!==j3){if(j3=t,clearInterval(J$),j3===0)return void(J$=0);J$=setInterval(fxe,j3)}});const Sb=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=FZ(()=>this.hasDataChanged()),this.when().then(()=>{pxe(this)},()=>{})}destroy(){dxe(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){Qk(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{ot.getLogger(this.declaredClass).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}};return h([f({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),h([f({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),h([f()],t.prototype,"refreshParameters",null),t=h([me("esri.layers.mixins.RefreshableLayer")],t),t},Xg=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&mxe(r,i.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===r.minScale&&n.maxScale===r.maxScale?n:r}};return h([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),h([f({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),h([f({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=h([me("esri.layers.mixins.ScaleRangeLayer")],t),t};function mxe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const jy=en()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var W6;let b_=W6=class extends Je{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return z2e(this.value,this.unit,"milliseconds")}clone(){return new W6({value:this.value,unit:this.unit})}};h([f({type:Number,json:{write:!0},nonNullable:!0})],b_.prototype,"value",void 0),h([f({type:jy.apiValues,json:{type:jy.jsonValues,read:jy.read,write:jy.write},nonNullable:!0})],b_.prototype,"unit",void 0),b_=W6=h([me("esri.TimeInterval")],b_);const ix=b_;var J6;let t1=J6=class extends Je{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new J6({respectsDaylightSaving:e,timezone:t})}};h([f({type:Boolean,json:{write:!0}})],t1.prototype,"respectsDaylightSaving",void 0),h([Ke("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t1.prototype,"readRespectsDaylightSaving",null),h([f({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t1.prototype,"timezone",void 0),t1=J6=h([me("esri.layers.support.TimeReference")],t1);const yxe=t1;var Z6;let Ts=Z6=class extends Je{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new ca({start:r,end:i})}writeFullTimeExtent(e,t){e&&de(e.start)&&de(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new ix({value:t.timeInterval,unit:jy.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new ix({value:t.defaultTimeInterval,unit:jy.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new Z6({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:Pe(s),fullTimeExtent:Pe(o),trackIdField:a,useTime:l})}};h([f({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Ts.prototype,"cumulative",void 0),h([f({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Ts.prototype,"endField",void 0),h([f({type:ca,json:{write:{enabled:!0,allowNull:!0}}})],Ts.prototype,"fullTimeExtent",void 0),h([Ke("fullTimeExtent",["timeExtent"])],Ts.prototype,"readFullTimeExtent",null),h([et("fullTimeExtent")],Ts.prototype,"writeFullTimeExtent",null),h([f({type:Boolean,json:{write:!0}})],Ts.prototype,"hasLiveData",void 0),h([f({type:ix,json:{write:{enabled:!0,allowNull:!0}}})],Ts.prototype,"interval",void 0),h([Ke("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ts.prototype,"readInterval",null),h([et("interval")],Ts.prototype,"writeInterval",null),h([f({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Ts.prototype,"startField",void 0),h([f({type:yxe,json:{write:{enabled:!0,allowNull:!0}}})],Ts.prototype,"timeReference",void 0),h([f({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ts.prototype,"trackIdField",void 0),h([f({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Ts.prototype,"useTime",void 0),Ts=Z6=h([me("esri.layers.support.TimeInfo")],Ts);const iee=Ts,O4=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=jy.fromJSON(n.timeOffsetUnits);return s&&o?new ix({value:s,unit:o}):null}set timeInfo(r){PY(r,this.fieldsIndex),this._set("timeInfo",r)}};return h([f({type:ca,json:{write:!1}})],t.prototype,"timeExtent",void 0),h([f({type:ix})],t.prototype,"timeOffset",void 0),h([Ke("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),h([f({value:null,type:iee,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),h([f({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=h([me("esri.layers.mixins.TemporalLayer")],t),t};var K6;let op=K6=class extends Je{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:i,description:n}=this;return new K6({name:e,fields:t,isAscending:r,isUnique:i,description:n})}};h([f({constructOnly:!0})],op.prototype,"name",void 0),h([f({constructOnly:!0})],op.prototype,"fields",void 0),h([f({constructOnly:!0})],op.prototype,"isAscending",void 0),h([f({constructOnly:!0})],op.prototype,"isUnique",void 0),h([f({constructOnly:!0})],op.prototype,"description",void 0),op=K6=h([me("esri.layers.support.FeatureIndex")],op);let xf=class extends Je{constructor(){super(...arguments),this.type=null}};h([f({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],xf.prototype,"type",void 0),xf=h([me("esri.layers.support.FeatureReduction")],xf);var Y6;let r1=Y6=class extends Je{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new Y6({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};h([f({type:String,json:{write:!0}})],r1.prototype,"statisticType",void 0),h([f({type:String,json:{write:!0}})],r1.prototype,"onStatisticField",void 0),h([f({type:String,json:{write:!0}})],r1.prototype,"onStatisticValueExpression",void 0),r1=Y6=h([me("esri.layers.support.OutStatistic")],r1);const gxe=r1;var Q6;let w_=Q6=class extends Je{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new Q6({name:this.name,outStatistic:this.outStatistic.clone()})}};h([f({type:String,json:{write:!0}})],w_.prototype,"name",void 0),h([f({type:gxe,json:{write:!0}})],w_.prototype,"outStatistic",void 0),w_=Q6=h([me("esri.layers.support.AggregateField")],w_);const nee=w_,b9="__begin__",w9="__end__",vxe=new RegExp(b9,"ig"),bxe=new RegExp(w9,"ig"),kV=new RegExp("^"+b9,"i"),OV=new RegExp(w9+"$","i"),vI='"',wxe=vI+" + ",_xe=" + "+vI;function xxe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function Sxe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function _9(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=xxe(e.labelExpression),t.type="conventional"),t}function Exe(e){const t=_9(e);if(!t)return null;switch(t.type){case"conventional":return X6(t.expression);case"arcade":return t.expression}return null}function Mxe(e){const t=_9(e);if(!t)return null;switch(t.type){case"conventional":return Txe(t.expression);case"arcade":return see(t.expression)}return null}function X6(e){let t;return e?(t=Gu(e,r=>b9+'$feature["'+r+'"]'+w9),t=kV.test(t)?t.replace(kV,""):vI+t,t=OV.test(t)?t.replace(OV,""):t+vI,t=t.replace(vxe,wxe).replace(bxe,_xe)):t='""',t}const Ixe=/^\s*\{([^}]+)\}\s*$/i;function Txe(e){const t=e.match(Ixe);return t&&t[1].trim()||null}const Axe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,$xe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,Cxe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function see(e){if(!e)return null;let t=Axe.exec(e)||$xe.exec(e);return t?t[1]||t[3]:(t=Cxe.exec(e),t?t[2]:null)}var e8;let Rd=e8=class extends Je{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?X6(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=X6(this.value)),e!=null&&(t[r]=e)}clone(){return new e8({expression:this.expression,title:this.title,value:this.value})}};h([f({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Rd.prototype,"expression",void 0),h([Ke("expression",["expression","value"])],Rd.prototype,"readExpression",null),h([et("expression")],Rd.prototype,"writeExpression",null),h([f({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Rd.prototype,"title",void 0),h([f({json:{read:!1,write:!1}})],Rd.prototype,"value",void 0),Rd=e8=h([me("esri.layers.support.LabelExpressionInfo")],Rd);const oee=Rd,aee=[252,146,31,255],kxe={type:"esriSMS",style:"esriSMSCircle",size:6,color:aee,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},Oxe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:aee},Rxe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},Pxe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},Lxe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},Nxe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Dxe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};Ul.fromJSON(kxe);la.fromJSON(Oxe);Vp.fromJSON(Rxe);const Fxe=mb.fromJSON(Pxe),aat=Ul.fromJSON(Lxe),lat=la.fromJSON(Nxe),uat=Vp.fromJSON(Dxe);var t8;const U3=new Xt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function lee(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function jxe(e){return e?.type==="map-image"}function uee(e){return!!jxe(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function Uxe(e){return lee(e)||uee(e.layer)}let Hi=t8=class extends Je{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Fxe,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=(i,n,s)=>{switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=Sxe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=see(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&lee(i))e=new oee({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return _9(this)}getLabelExpressionArcade(){return Exe(this)}getLabelExpressionSingleField(){return Mxe(this)}hash(){return JSON.stringify(this)}clone(){return new t8({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Pe(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Pe(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};h([f({type:String,json:{write:!0}})],Hi.prototype,"name",void 0),h([f({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Hi.prototype,"allowOverrun",void 0),h([f({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],Hi.prototype,"deconflictionStrategy",void 0),h([f({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&r?.origin==="service"&&uee(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],Hi.prototype,"labelExpression",void 0),h([Ke("labelExpression")],Hi.prototype,"readLabelExpression",null),h([et("labelExpression")],Hi.prototype,"writeLabelExpression",null),h([f({type:oee,json:{write:{overridePolicy:(e,t,r)=>Uxe(r)?{allowNull:!0}:{enabled:!1}}}})],Hi.prototype,"labelExpressionInfo",void 0),h([et("labelExpressionInfo")],Hi.prototype,"writeLabelExpressionInfo",null),h([f({type:U3.apiValues,json:{type:U3.jsonValues,read:U3.read,write:U3.write}})],Hi.prototype,"labelPlacement",void 0),h([f({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],Hi.prototype,"labelPosition",void 0),h([f({type:Number})],Hi.prototype,"maxScale",void 0),h([et("maxScale")],Hi.prototype,"writeMaxScale",null),h([f({type:Number})],Hi.prototype,"minScale",void 0),h([et("minScale")],Hi.prototype,"writeMinScale",null),h([f({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],Hi.prototype,"repeatLabel",void 0),h([f({type:Number,cast:Er,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Hi.prototype,"repeatLabelDistance",void 0),h([f({types:Ave,json:{origins:{"web-scene":{types:$ve,write:jU,default:null}},write:jU,default:null}})],Hi.prototype,"symbol",void 0),h([f({type:Boolean,json:{write:!0}})],Hi.prototype,"useCodedValues",void 0),h([f({type:String,json:{write:!0}})],Hi.prototype,"where",void 0),Hi=t8=h([me("esri.layers.support.LabelClass")],Hi);const dS=Hi;var r8;let pu=r8=class extends xf{constructor(e){super(e),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new r8({fields:Pe(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Pe(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:Pe(this.popupTemplate),renderer:Pe(this.renderer)})}};h([Ft({binning:"binning"})],pu.prototype,"type",void 0),h([f({type:Number,json:{write:!0}})],pu.prototype,"fixedBinLevel",void 0),h([f({type:[dS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],pu.prototype,"labelingInfo",void 0),h([f(g9)],pu.prototype,"labelsVisible",void 0),h([f(hS)],pu.prototype,"popupEnabled",void 0),h([f({type:sm,json:{name:"popupInfo",write:!0}})],pu.prototype,"popupTemplate",void 0),h([f({type:[nee],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],pu.prototype,"fields",void 0),h([f({types:uS,json:{write:!0}})],pu.prototype,"renderer",void 0),pu=r8=h([me("esri.layers.support.FeatureReductionBinning")],pu);const Vxe=pu;var i8;let To=i8=class extends Je{constructor(e){super(e),this.type="cluster",this.clusterRadius=Er("80px"),this.clusterMinSize=Er("12px"),this.clusterMaxSize=Er("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new i8({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Pe(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Pe(this.fields),renderer:Pe(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:Pe(this.popupTemplate)})}};h([f({type:["cluster"],readOnly:!0,json:{write:!0}})],To.prototype,"type",void 0),h([f({type:Number,cast:e=>e==="auto"?e:Er(e),json:{write:!0}})],To.prototype,"clusterRadius",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],To.prototype,"clusterMinSize",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],To.prototype,"clusterMaxSize",void 0),h([f(hS)],To.prototype,"popupEnabled",void 0),h([f({type:sm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],To.prototype,"popupTemplate",void 0),h([f({types:uS,json:{write:!0}})],To.prototype,"renderer",void 0),h([f({types:Ive})],To.prototype,"symbol",void 0),h([f({type:[dS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],To.prototype,"labelingInfo",void 0),h([f(g9)],To.prototype,"labelsVisible",void 0),h([f({type:[nee],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],To.prototype,"fields",void 0),To=i8=h([me("esri.layers.support.FeatureReductionCluster")],To);const cee=To;var n8;let ZM=n8=class extends xf{constructor(e){super(e),this.type="selection"}clone(){return new n8}};h([f({type:["selection"]})],ZM.prototype,"type",void 0),ZM=n8=h([me("esri.layers.support.FeatureReductionSelection")],ZM);const RV=ZM,PV={key:"type",base:xf,typeMap:{selection:cee}},Bxe={types:{key:"type",base:xf,typeMap:{selection:RV,cluster:cee,binning:Vxe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:PV},"portal-item":{types:PV},"web-scene":{types:{key:"type",base:xf,typeMap:{selection:RV}}}}}},LV=new Xt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Pd=class extends ua(Je){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};h([f({json:{write:!0}})],Pd.prototype,"name",void 0),h([f({json:{write:!0}})],Pd.prototype,"description",void 0),h([f({json:{read:LV.read,write:LV.write}})],Pd.prototype,"drawingTool",void 0),h([f({json:{write:!0}})],Pd.prototype,"prototype",void 0),h([f({json:{write:!0}})],Pd.prototype,"thumbnail",void 0),Pd=h([me("esri.layers.support.FeatureTemplate")],Pd);const x9=Pd;let zh=class extends ua(Je){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=n9(e[r]);return t}writeDomains(e,t){const r={};for(const i of Object.keys(e))e[i]&&(r[i]=e[i]?.toJSON());t.domains=r}};h([f({json:{write:!0}})],zh.prototype,"id",void 0),h([f({json:{write:!0}})],zh.prototype,"name",void 0),h([f({json:{write:!0}})],zh.prototype,"domains",void 0),h([Ke("domains")],zh.prototype,"readDomains",null),h([et("domains")],zh.prototype,"writeDomains",null),h([f({type:[x9],json:{write:!0}})],zh.prototype,"templates",void 0),zh=h([me("esri.layers.support.FeatureType")],zh);const S9=zh;function zxe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function NV(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function DV(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class E9{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const r=[];for(const i of t){const n=i&&i.name;if(n){const s=FV(n);this._fieldsMap.set(n,i),this._fieldsMap.set(s,i),r.push(s),zxe(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):kN(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),NV(i)||DV(i)||(i.editable=i.editable==null||!!i.editable,i.nullable=i.nullable==null||!!i.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)NV(t)||DV(t)||t.nullable||J0e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(FV(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name}}function FV(e){return e.toLowerCase().trim()}const Gxe=ot.getLogger("esri.layers.support.fieldProperties");function qxe(){return{fields:{type:[No],value:null},fieldsIndex:{readOnly:!0,get(){return new E9(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||Gxe.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return LY(this.fieldsIndex,e)}}}}let i1=class extends ua(Je){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};h([f({type:String,json:{read:{source:"shapeAreaFieldName"}}})],i1.prototype,"shapeAreaField",void 0),h([f({type:String,json:{read:{source:"shapeLengthFieldName"}}})],i1.prototype,"shapeLengthField",void 0),h([f({type:String,json:{read:e=>ibe.read(e)||nbe.read(e)}})],i1.prototype,"units",void 0),i1=h([me("esri.layers.support.GeometryFieldsInfo")],i1);const Hxe=i1,Wxe=/\[([^\[\]]+)\]/gi;function jV(e,t,r){return e?e.map(i=>{const n=new dS;if(n.read(i,r),n.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(Wxe,(o,a)=>`[${Jxe(a,s)}]`)}return n}):null}function Jxe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}var s8;let n1=s8=class extends Je{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Lt}clone(){return new s8({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};h([f({type:String,json:{write:!0}})],n1.prototype,"floorField",void 0),h([f({json:{read:!1,write:!1}})],n1.prototype,"viewAllMode",void 0),h([f({json:{read:!1,write:!1}})],n1.prototype,"viewAllLevelIds",void 0),n1=s8=h([me("esri.layers.support.LayerFloorInfo")],n1);const hee=n1,UV=new Xt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),VV=new Xt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let bl=class extends ua(Je){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};h([f({json:{read:UV.read,write:UV.write}})],bl.prototype,"cardinality",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"composite",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"id",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"keyField",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"keyFieldInRelationshipTable",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"name",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"relatedTableId",void 0),h([f({json:{read:!0,write:!0}})],bl.prototype,"relationshipTableId",void 0),h([f({json:{read:VV.read,write:VV.write}})],bl.prototype,"role",void 0),bl=h([me("esri.layers.support.Relationship")],bl);const Zxe=bl,du=[];function M9(e,t){if(c9(e.url))return!0;const{wkid:r}=t;for(const i of du){if(e.version>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}du.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102901;t<=102955;t++)e.add(t);return e}]),du.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),du.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),du.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),du.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);for(let t=103696;t<=103698;t++)e.add(t);return e}]),du.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),du.push([10.61,()=>new Set([102497])]),du.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}]),du.push([10.51,()=>{const e=new Set([7683,7881,7886,7899,8888,9e3]);for(let t=8013;t<=8032;t++)e.add(t);for(let t=9053;t<=9057;t++)e.add(t);for(let t=104017;t<=104018;t++)e.add(t);for(let t=104971;t<=104974;t++)e.add(t);return e}]),du.push([10.5,()=>{const e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let t=4087;t<=4088;t++)e.add(t);for(let t=5896;t<=5899;t++)e.add(t);for(let t=7005;t<=7007;t++)e.add(t);for(let t=7057;t<=7070;t++)e.add(t);for(let t=7073;t<=7082;t++)e.add(t);for(let t=7109;t<=7128;t++)e.add(t);for(let t=7844;t<=7859;t++)e.add(t);return e}]);async function Kxe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await QT(i.populateFromStyle());if(ui(r),n.ok===!1){const s=n.error;t&&t.messages&&t.messages.push(new zs("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t.origin)}}}var o8;let qn=o8=class extends Je{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new o8(Pe({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};h([f({type:[String],json:{write:!0}})],qn.prototype,"attachmentTypes",void 0),h([f({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],qn.prototype,"attachmentsWhere",void 0),h([f({type:Boolean,json:{write:!0}})],qn.prototype,"cacheHint",void 0),h([f({type:[String],json:{write:!0}})],qn.prototype,"keywords",void 0),h([f({type:[Number],json:{write:!0}})],qn.prototype,"globalIds",void 0),h([f({json:{write:!0}})],qn.prototype,"name",void 0),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],qn.prototype,"num",void 0),h([f({type:[Number],json:{write:!0}})],qn.prototype,"objectIds",void 0),h([f({type:Boolean,json:{default:!1,write:!0}})],qn.prototype,"returnMetadata",void 0),h([f({type:[Number],json:{write:!0}})],qn.prototype,"size",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],qn.prototype,"start",void 0),h([et("start"),et("num")],qn.prototype,"writeStart",null),h([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],qn.prototype,"where",void 0),qn=o8=h([me("esri.rest.support.AttachmentQuery")],qn),qn.from=Bi(qn);const a8=qn;var l8;let Ti=l8=class extends Je{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new l8(Pe({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};h([f({type:Boolean,json:{write:!0}})],Ti.prototype,"cacheHint",void 0),h([f({type:Oa,json:{write:!0}})],Ti.prototype,"dynamicDataSource",void 0),h([f({type:String,json:{write:!0}})],Ti.prototype,"gdbVersion",void 0),h([f({type:Number,json:{write:!0}})],Ti.prototype,"geometryPrecision",void 0),h([f({type:Date})],Ti.prototype,"historicMoment",void 0),h([et("historicMoment")],Ti.prototype,"_writeHistoricMoment",null),h([f({type:Number,json:{write:!0}})],Ti.prototype,"maxAllowableOffset",void 0),h([f({type:[Number],json:{write:!0}})],Ti.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],Ti.prototype,"orderByFields",void 0),h([f({type:[String],json:{write:!0}})],Ti.prototype,"outFields",void 0),h([f({type:wt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ti.prototype,"outSpatialReference",void 0),h([f({json:{write:!0}})],Ti.prototype,"relationshipId",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],Ti.prototype,"start",void 0),h([et("start"),et("num")],Ti.prototype,"writeStart",null),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],Ti.prototype,"num",void 0),h([f({json:{write:!0}})],Ti.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ti.prototype,"returnM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ti.prototype,"returnZ",void 0),h([f({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Ti.prototype,"where",void 0),Ti=l8=h([me("esri.rest.support.RelationshipQuery")],Ti),Ti.from=Bi(Ti);const u8=Ti;var c8;let s1=c8=class extends Je{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new c8({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};h([f({type:[String],json:{write:!0}})],s1.prototype,"groupByFields",void 0),h([f({type:Number,json:{write:!0}})],s1.prototype,"topCount",void 0),h([f({type:[String],json:{write:!0}})],s1.prototype,"orderByFields",void 0),s1=c8=h([me("esri.rest.support.TopFilter")],s1);const Yxe=s1;var h8;const BV=new Xt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),zV=new Xt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let vi=h8=class extends Je{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new h8(Pe({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};h([f({type:Boolean,json:{write:!0}})],vi.prototype,"cacheHint",void 0),h([f({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],vi.prototype,"distance",void 0),h([f({types:Up,json:{read:Hu,write:!0}})],vi.prototype,"geometry",void 0),h([f({type:Number,json:{write:!0}})],vi.prototype,"geometryPrecision",void 0),h([f({type:Number,json:{write:!0}})],vi.prototype,"maxAllowableOffset",void 0),h([f({type:Number,json:{read:{source:"resultRecordCount"}}})],vi.prototype,"num",void 0),h([f({json:{write:!0}})],vi.prototype,"objectIds",void 0),h([f({type:[String],json:{write:!0}})],vi.prototype,"orderByFields",void 0),h([f({type:[String],json:{write:!0}})],vi.prototype,"outFields",void 0),h([f({type:wt,json:{read:{source:"outSR"},write:{target:"outSR"}}})],vi.prototype,"outSpatialReference",void 0),h([f({type:String,json:{write:!0}})],vi.prototype,"resultType",void 0),h([f({json:{write:!0}})],vi.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vi.prototype,"returnM",void 0),h([f({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],vi.prototype,"returnZ",void 0),h([f({type:Number,json:{read:{source:"resultOffset"}}})],vi.prototype,"start",void 0),h([et("start"),et("num")],vi.prototype,"writeStart",null),h([f({type:String,json:{read:{source:"spatialRel",reader:BV.read},write:{target:"spatialRel",writer:BV.write}}})],vi.prototype,"spatialRelationship",void 0),h([f({type:ca,json:{write:!0}})],vi.prototype,"timeExtent",void 0),h([f({type:Yxe,json:{write:!0}})],vi.prototype,"topFilter",void 0),h([f({type:String,json:{read:zV.read,write:{writer:zV.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],vi.prototype,"units",void 0),h([f({type:String,json:{write:!0}})],vi.prototype,"where",void 0),vi=h8=h([me("esri.rest.support.TopFeaturesQuery")],vi),vi.from=Bi(vi);const V3=vi,Qxe=["oid","global-id"],Xxe=["oid","global-id","guid"];function I9({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=sSe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=lSe({titleBase:n,fields:r,displayField:e}),l=aSe();return new sm({title:a,content:l,fieldInfos:o})}const eSe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],tSe=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!pee(e.name,t)&&(!r||e.name!==r)&&!Qxe.includes(e.type)&&!eSe.some(n=>n.test(e.name));function rSe(e,t){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),e.sort(iSe),e}function iSe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:GV(e)?-1:GV(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function pee(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r&&r.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase(),s&&s.toLowerCase()].includes(e.toLowerCase())}function nSe(e,t){return e.editable&&!Xxe.includes(e.type)&&!pee(e.name,t)}function sSe({editFieldsInfo:e,fields:t,objectIdField:r},i){return rSe(t,i?.ignoreFieldTypes||uSe).map(n=>new eS({fieldName:n.name,isEditable:nSe(n,e),label:n.alias,format:oSe(n),visible:tSe(n,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:i?.visibleFieldNames})}))}function oSe(e){switch(e.type){case"small-integer":case"integer":case"single":return new k1({digitSeparator:!0,places:0});case"double":return new k1({digitSeparator:!0,places:2});case"date":return new k1({dateFormat:"long-month-day-year"});default:return e.type==="string"&&VY(e.name)?new k1({digitSeparator:!0,places:0}):null}}function aSe(){return[new vv,new q2]}function lSe(e){const t=z0e(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}function GV(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const uSe=["geometry","blob","raster","guid","xml"],Z$=new Xt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),cSe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},qi="FeatureLayer",qV=ot.getLogger("esri.layers.FeatureLayer");function B3(e,t){return new $e("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function HV(e){return e&&e instanceof Lt}function Jt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function z3(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function hSe(e){const t=e?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function lw(e,t){return!!e?.supportedOperationsWithCacheHint?.map(i=>i.toLowerCase())?.includes(t.toLowerCase())}const K$=qxe();function Y$(e,t,r){const i=!!r?.writeLayerSchema;return{enabled:i,ignoreOrigin:i}}let st=class extends K2e(Qg(cxe(O4(Xg(Sb(S4(_b(xb(um(k4(l9(ua(uh))))))))))))){constructor(...e){super(...e),this._handles=new es,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=wt.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Lt.ofType(op)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){this.source?.destroy(),this._handles=La(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=de(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(i=>this._initLayerProperties(i)));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Fp).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new $e("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{analytics:this._readAnalyticsCapabilities(t),attachment:this._readAttachmentCapabilities(t),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),queryTopFeatures:this._readQueryTopFeaturesCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i?.writeLayerSchema&&ra(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}get parsedUrl(){const e=this.url?fn(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=xg(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=xg(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){gU(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){const n=bX(i,t,r)||void 0;return n||qV.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new vb({defaultSymbol:Q$(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:Q$(n.symbol,n,r)}))}):new b4({symbol:Q$(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(HV(t)&&this._resetMemorySource(t),HV(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Lt?new sp({layer:this,items:e}):e:null}readSource(e,t){const r=Yg.fromJSON(t.featureSet);return new sp({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map(s=>x9.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?m_e(this.url,r):r;let s=r;if(!s&&this.url){const o=zf(this.url);de(o)&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),u9(s)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e&&e.map(s=>(s=S9.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}set url(e){const t=g_e({layer:this,url:e,nonStandardUrlAllowed:!0,logger:qV});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){v_e(this,e,null,t,i)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new $e(qi,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,r){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new $e(qi,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)})}async applyEdits(e,t){const r=await Be(()=>import("./editingSupport.1b33b35d.js"),["assets/editingSupport.1b33b35d.js","assets/preload-helper.387dac8f.js"]);return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return I9(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await Nde(Be(()=>import("./FeatureLayerSource.6db8d32c.js"),["assets/FeatureLayerSource.6db8d32c.js","assets/clientSideDefaults.24a06bd0.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/preload-helper.387dac8f.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new jn,t=this.get("capabilities.data"),r=this.get("capabilities.query");e.dynamicDataSource=this.dynamicDataSource,e.historicMoment=this.historicMoment,e.gdbVersion=this.gdbVersion,e.returnGeometry=!0,r&&(e.compactGeometryEnabled=r.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=r.supportsDefaultSpatialReference),t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"];const i=de(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=r9(this.definitionExpression,i);e.where=n||"1=1";const{timeOffset:s,timeExtent:o}=this;return e.timeExtent=s!=null&&o!=null?o.offset(-s.value,s.unit):o||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new $e(qi,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e?.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new $e(qi,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(i==null)return null;let n=null;return r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===i.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const n=i.domains&&i.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=a8.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new $e(qi,"this layer doesn't support attachments");const{attachmentTypes:r,objectIds:i,globalIds:n,num:s,size:o,start:a,where:l}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const u=i&&i.length>1,c=r&&r.length,p=n&&n.length,d=o&&o.length;if(u||c||p||d||s||a||l)throw new $e(qi,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||l))throw new $e(qi,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new $e(qi,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(jn.from(e)||this.createQuery(),t)).then(r=>{if(r?.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(jn.from(e)||this.createQuery(),t);throw new $e(qi,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(jn.from(e)||this.createQuery(),t);throw new $e(qi,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(jn.from(e)||this.createQuery(),t);throw new $e(qi,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(u8.from(e),t);throw new $e(qi,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(u8.from(e),t);throw new $e(qi,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(V3.from(e),t).then(r=>{if(r?.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r});throw new $e(qi,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(V3.from(e),t);throw new $e(qi,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(V3.from(e),t);throw new $e(qi,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(V3.from(e),t);throw new $e(qi,"Layer source does not support queryFeatureCount capability")})}read(e,t){const r=e.featureCollection;if(r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){t={...t,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:n}=t;if(this.dynamicDataSource)return n?.push(B3(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(r==="web-scene"||r==="web-map"&&i!=="tables")return n?.push(B3(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return n?.push(B3(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&r==="web-map"&&i==="tables")return n?.push(B3(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new $e(qi,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source.type==="memory"||M9(this,e))}async save(e){return(await Be(()=>import("./featureLayerUtils.7cf58d1e.js"),["assets/featureLayerUtils.7cf58d1e.js","assets/originUtils.68552ec1.js","assets/multiOriginJSONSupportUtils.8128aa52.js","assets/arcgisLayers.d3fe5d94.js","assets/preload-helper.387dac8f.js","assets/lazyLayerLoader.e0a392f3.js","assets/jsonContext.4a2dd7f6.js","assets/portalItemUtils.aa871d92.js"])).save(this,e)}async saveAs(e,t){return(await Be(()=>import("./featureLayerUtils.7cf58d1e.js"),["assets/featureLayerUtils.7cf58d1e.js","assets/originUtils.68552ec1.js","assets/multiOriginJSONSupportUtils.8128aa52.js","assets/arcgisLayers.d3fe5d94.js","assets/preload-helper.387dac8f.js","assets/lazyLayerLoader.e0a392f3.js","assets/jsonContext.4a2dd7f6.js","assets/portalItemUtils.aa871d92.js"])).saveAs(this,e,t)}_readEditingEnabled(e,t,r){let i=e.layerDefinition?.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&r?.origin==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){const n=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";ra("layerDefinition.capabilities",n,t),r&&!i?.writeLayerSchema&&(t.capabilities=n)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new $e(qi,`feature is missing the identifying attribute ${r}`)):Promise.reject(new $e(qi,"'attributes' are required on a feature to query attachments")):Promise.reject(new $e(qi,"A feature is required to add/delete/update attachments")):Promise.reject(new $e(qi,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Mt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),gU(this.renderer,this.fieldsIndex),PY(this.timeInfo,this.fieldsIndex),Kxe(this,{origin:"service"})}async hasDataChanged(){if(this.source?.refresh)try{const{dataChanged:e,updates:t}=await this.source?.refresh();if(de(t)&&(this.sourceJSON={...this.sourceJSON,...t},this.read(t,{origin:"service",url:this.parsedUrl})),e)return!0}catch{}if(this.definitionExpression)try{return(await owe(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(t=>t.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const i=r.prototype&&r.prototype.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new $e("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new $e("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(e){return{supportsCacheHint:lw(e.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:lw(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:Jt(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const n=cSe[i.name];n&&(r[n]=!!i.isEnabled)}),r}_readDataCapabilities(e){return{isVersioned:Jt(e,"isDataVersioned",!1),supportsAttachment:Jt(e,"hasAttachments",!1),supportsM:Jt(e,"hasM",!1),supportsZ:Jt(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:Jt(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map(p=>p.trim()):[],i=this.url?zf(this.url):null,n=r.includes(de(i)&&i.serverType==="MapServer"?"data":"query"),s=r.includes("editing")&&!t.datesInUnknownTimezone;let o=s&&r.includes("create"),a=s&&r.includes("delete"),l=s&&r.includes("update");const u=r.includes("changetracking"),c=t.advancedQueryCapabilities;return s&&!(o||a||l)&&(o=a=l=!0),{supportsCalculate:Jt(t,"supportsCalculate",!1),supportsTruncate:Jt(t,"supportsTruncate",!1),supportsValidateSql:Jt(t,"supportsValidateSql",!1),supportsAdd:o,supportsDelete:a,supportsEditing:s,supportsChangeTracking:u,supportsQuery:n,supportsQueryAnalytics:Jt(c,"supportsQueryAnalytic",!1),supportsQueryAttachments:Jt(c,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Jt(c,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Jt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:l,supportsExceedsLimitStatistics:Jt(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){const t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,i=e.archivingInfo,n=this.url?.includes("MapServer"),s=!We("mapserver-pbf-enabled")&&n&&this.version<10.81,o=c9(this.url),a=(e.supportedQueryFormats||"").split(",").reduce((l,u)=>{const c=u.toLowerCase().trim();return c&&l.add(c),l},new Set);return{supportsStatistics:Jt(t,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:Jt(t,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Jt(t,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:hSe(t),supportsCentroid:Jt(t,"supportsReturningGeometryCentroid",!1),supportsDistance:Jt(t,"supportsQueryWithDistance",!1),supportsDistinct:Jt(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:Jt(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Jt(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:Jt(t,"supportsHavingClause",!1),supportsOrderBy:Jt(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:Jt(t,"supportsPagination",!1),supportsQuantization:Jt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Jt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Jt(e,"supportsReturningQueryGeometry",!1),supportsResultType:Jt(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Jt(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Jt(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Jt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Jt(t,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Jt(r,"allowOthersToQuery",!0),supportsHistoricMoment:Jt(i,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!s&&a.has("pbf"),supportsDisjointSpatialRelationship:Jt(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:Jt(t,"supportsQueryWithCacheHint",!1)||lw(t,"query"),supportsDefaultSpatialReference:Jt(t,"supportsDefaultSR",!1),supportsCompactGeometry:o,maxRecordCountFactor:z3(e,"maxRecordCountFactor",void 0),maxRecordCount:z3(e,"maxRecordCount",void 0),standardMaxRecordCount:z3(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:z3(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=Jt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Jt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:lw(t,"queryRelated")}}_readQueryTopFeaturesCapabilities(e){return{supportsCacheHint:lw(e.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Jt(e,"allowGeometryUpdates",!0),supportsGlobalId:Jt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Jt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Jt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Jt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Jt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Jt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Jt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Jt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Jt(t,"allowOthersToUpdate",!0)}}};h([f({readOnly:!0,json:{read:!1}})],st.prototype,"capabilities",void 0),h([Ke("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],st.prototype,"readCapabilities",null),h([f({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],st.prototype,"charts",void 0),h([f({readOnly:!0})],st.prototype,"createQueryVersion",null),h([f({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],st.prototype,"copyright",void 0),h([f({type:Boolean})],st.prototype,"datesInUnknownTimezone",void 0),h([f({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],st.prototype,"displayField",void 0),h([f({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],st.prototype,"definitionExpression",void 0),h([f({types:ng,readOnly:!0})],st.prototype,"defaultSymbol",void 0),h([f({type:Oa})],st.prototype,"dynamicDataSource",void 0),h([f({readOnly:!0})],st.prototype,"editFieldsInfo",void 0),h([f({type:Boolean})],st.prototype,"editingEnabled",null),h([Ke(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],st.prototype,"readEditingEnabled",null),h([Ke("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],st.prototype,"readEditingEnabledFromWebMap",null),h([et(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],st.prototype,"writeEditingEnabled",null),h([et("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],st.prototype,"writeEditingEnabledToWebMap",null),h([f({readOnly:!0})],st.prototype,"editingInfo",void 0),h([Ke("editingInfo")],st.prototype,"readEditingInfo",null),h([f((()=>{const e=Pe(ixe),t=e.json.origins;return t["web-map"]={read:!1,write:!1},t["portal-item"]={read:!1,write:!1},e})())],st.prototype,"elevationInfo",void 0),h([f(Bxe)],st.prototype,"featureReduction",void 0),h([f({...K$.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Y$}}}}})],st.prototype,"fields",void 0),h([f(K$.fieldsIndex)],st.prototype,"fieldsIndex",void 0),h([f({type:hee,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],st.prototype,"floorInfo",void 0),h([f({type:bwe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],st.prototype,"formTemplate",void 0),h([f({type:qt,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],st.prototype,"fullExtent",void 0),h([f()],st.prototype,"gdbVersion",void 0),h([f({readOnly:!0,type:Hxe,json:{read:{source:"geometryProperties"}}})],st.prototype,"geometryFieldsInfo",void 0),h([f({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Z$.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Y$,writer(e,t,r){const i=e?Z$.toJSON(e):null;i&&ra(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:Z$.read}}})],st.prototype,"geometryType",void 0),h([f({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],st.prototype,"hasM",void 0),h([f({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],st.prototype,"hasZ",void 0),h([f({readOnly:!0,type:_4})],st.prototype,"heightModelInfo",void 0),h([f({type:Date})],st.prototype,"historicMoment",void 0),h([f(QX)],st.prototype,"id",void 0),h([f({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],st.prototype,"infoFor3D",void 0),h([f({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],st.prototype,"isTable",void 0),h([Ke("service","isTable",["type","geometryType"]),Ke("isTable",["layerDefinition.type","layerDefinition.geometryType"])],st.prototype,"readIsTable",null),h([et("web-map","isTable")],st.prototype,"writeIsTable",null),h([f(g9)],st.prototype,"labelsVisible",void 0),h([f({type:[dS],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:jV},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:jV},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],st.prototype,"labelingInfo",void 0),h([f((()=>{const e=Pe(nxe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){ra(i,o4(t),r)}}},e})())],st.prototype,"opacity",void 0),h([f({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],st.prototype,"layerId",void 0),h([f(v9)],st.prototype,"legendEnabled",void 0),h([f({type:["show","hide"],json:(()=>{const e=Pe(XX.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],st.prototype,"listMode",void 0),h([f(oxe)],st.prototype,"minScale",void 0),h([Ke("service","minScale",["minScale","effectiveMinScale"])],st.prototype,"readMinScale",null),h([f(axe)],st.prototype,"maxScale",void 0),h([Ke("service","maxScale",["maxScale","effectiveMaxScale"])],st.prototype,"readMaxScale",null),h([f({type:String})],st.prototype,"globalIdField",void 0),h([Ke("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),Ke("service","globalIdField",["globalIdField","fields"])],st.prototype,"readGlobalIdFieldFromService",null),h([f({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Y$}}}}})],st.prototype,"objectIdField",void 0),h([Ke("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),Ke("service","objectIdField",["objectIdField","fields"])],st.prototype,"readObjectIdFieldFromService",null),h([f({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],st.prototype,"operationalLayerType",void 0),h([f(K$.outFields)],st.prototype,"outFields",void 0),h([f({readOnly:!0})],st.prototype,"parsedUrl",null),h([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],st.prototype,"path",void 0),h([f(hS)],st.prototype,"popupEnabled",void 0),h([f({type:sm,json:{name:"popupInfo",write:!0}})],st.prototype,"popupTemplate",void 0),h([f({readOnly:!0})],st.prototype,"defaultPopupTemplate",null),h([f({type:[Zxe],readOnly:!0})],st.prototype,"relationships",void 0),h([f({types:uS,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:vX,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}})],st.prototype,"renderer",null),h([Ke("service","renderer",["drawingInfo.renderer","defaultSymbol"]),Ke("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],st.prototype,"readRenderer",null),h([f()],st.prototype,"sourceJSON",void 0),h([f({type:Boolean})],st.prototype,"returnM",void 0),h([f({type:Boolean})],st.prototype,"returnZ",void 0),h([f((()=>{const e=Pe(rxe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],st.prototype,"screenSizePerspectiveEnabled",void 0),h([f({clonable:!1})],st.prototype,"source",null),h([ur("source")],st.prototype,"castSource",null),h([Ke("portal-item","source",["featureSet"]),Ke("web-map","source",["featureSet"])],st.prototype,"readSource",null),h([f({readOnly:!0})],st.prototype,"serviceDefinitionExpression",void 0),h([Ke("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],st.prototype,"readServiceDefinitionExpression",null),h([f({type:wt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],st.prototype,"spatialReference",void 0),h([f({type:Number})],st.prototype,"subtypeCode",void 0),h([f({type:String,json:{origins:{service:{read:!0}}}})],st.prototype,"subtypeField",void 0),h([f({type:[x9]})],st.prototype,"templates",void 0),h([Ke("templates",["editFieldsInfo","creatorField","editorField","templates"])],st.prototype,"readTemplates",null),h([f({type:iee})],st.prototype,"timeInfo",void 0),h([f()],st.prototype,"title",void 0),h([Ke("service","title",["name"]),Ke("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],st.prototype,"readTitle",null),h([Ke("web-map","title",["layerDefinition.name","title"])],st.prototype,"readTitleFromWebMap",null),h([f({type:String})],st.prototype,"sublayerTitleMode",void 0),h([f({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],st.prototype,"trackIdField",void 0),h([f({json:{read:!1}})],st.prototype,"type",void 0),h([f({type:String})],st.prototype,"typeIdField",void 0),h([Ke("service","typeIdField"),Ke("typeIdField",["layerDefinition.typeIdField"])],st.prototype,"readTypeIdField",null),h([f({type:[S9]})],st.prototype,"types",void 0),h([Ke("service","types",["types"]),Ke("types",["layerDefinition.types"])],st.prototype,"readTypes",null),h([f({readOnly:!0,json:{write:!1}})],st.prototype,"serverGens",void 0),h([f({type:Lt.ofType(op),readOnly:!0})],st.prototype,"indexes",void 0),h([f(pS)],st.prototype,"url",null),h([et("url")],st.prototype,"writeUrl",null),h([f({readOnly:!0})],st.prototype,"userIsAdmin",void 0),h([f({json:{origins:{service:{read:!0}},read:!1}})],st.prototype,"version",void 0),h([Ke("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],st.prototype,"readVersion",null),h([f({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],st.prototype,"visible",void 0),h([Ke("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],st.prototype,"readVisible",null),st=h([me("esri.layers.FeatureLayer")],st);const Q$=ob({types:PQ}),R4=st;var pSe=Object.freeze(Object.defineProperty({__proto__:null,default:R4},Symbol.toStringTag,{value:"Module"}));ot.getLogger("esri.core.support.OwningCollection");let o2=class extends Hs(Lt){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{Ne(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Lt.ofType(this.itemType.Type))(e):new Lt(e)}};function p8(e,t){return{type:e,cast:fK,set(r){const i=_g(r,this._get(t),e);i.owner=this,this._set(t,i)}}}h([f()],o2.prototype,"owner",null),o2=h([me("esri.core.support.OwningCollection")],o2);let lg=class extends o2{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};h([tN({Type:fs,ensureType:Bi(fs)})],lg.prototype,"itemType",void 0),lg=h([me("esri.support.GraphicsCollection")],lg);let Gh=class extends Qg(Xg(uh)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new lg,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};h([f({type:YX})],Gh.prototype,"elevationInfo",void 0),h([f(p8(lg,"graphics"))],Gh.prototype,"graphics",void 0),h([f({type:["show","hide"]})],Gh.prototype,"listMode",void 0),h([f()],Gh.prototype,"screenSizePerspectiveEnabled",void 0),h([f({readOnly:!0})],Gh.prototype,"type",void 0),h([f({constructOnly:!0})],Gh.prototype,"internal",void 0),Gh=h([me("esri.layers.GraphicsLayer")],Gh);const dSe=Gh;var d8;const G3=new Xt({flow_from:"flow-from",flow_to:"flow-to"});let As=d8=class extends lm(Je){constructor(e){super(e),this.density=.8,this.color=new xt([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:n,smoothing:s,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),c=(this.visualVariables||[]).map(m=>m.clone()),p=this.authoringInfo?.clone(),d=this.legendOptions?.clone();return new d8({density:e,color:u,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:n,trailCap:a,background:l,smoothing:s,flowRepresentation:o,visualVariables:c,authoringInfo:p,legendOptions:d})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};h([f({type:Number,json:{write:!0}})],As.prototype,"density",void 0),h([f({type:xt,json:{write:{allowNull:!0}}})],As.prototype,"color",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],As.prototype,"maxPathLength",void 0),h([f({type:Number,cast:Er,json:{write:!0}})],As.prototype,"trailWidth",void 0),h([f({type:Number,json:{write:!0}})],As.prototype,"flowSpeed",void 0),h([f({type:Number,json:{write:!0}})],As.prototype,"trailLength",void 0),h([f({type:Number,cast:Er,json:{write:!1}})],As.prototype,"smoothing",void 0),h([f({type:G3.apiValues,json:{type:G3.jsonValues,read:{reader:G3.read},write:{writer:G3.write}}})],As.prototype,"flowRepresentation",void 0),h([Ft({flowRenderer:"flow"})],As.prototype,"type",void 0),h([f({type:m4,json:{write:!0}})],As.prototype,"authoringInfo",void 0),h([f({type:sg,json:{write:!0}})],As.prototype,"legendOptions",void 0),h([f({type:String,json:{write:!0}})],As.prototype,"trailCap",void 0),h([f({type:String,json:{write:!0}})],As.prototype,"background",void 0),As=d8=h([me("esri.renderers.FlowRenderer")],As);const dee=As;let o1=class extends Je{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};h([f({type:Number,json:{write:!0}})],o1.prototype,"value",void 0),h([f({type:String,json:{write:!0}})],o1.prototype,"label",void 0),h([f({type:xt,json:{type:[fr],write:!0}})],o1.prototype,"color",void 0),o1=h([me("esri.renderers.support.ColormapInfo")],o1);const fee=o1;function fSe(e){return"r"in e&&"g"in e&&"b"in e}function mee(e){return"h"in e&&"s"in e&&"v"in e}function yee(e){return"l"in e&&"a"in e&&"b"in e}function gee(e){return"l"in e&&"c"in e&&"h"in e}function mSe(e){return"x"in e&&"y"in e&&"z"in e}const ySe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],gSe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function vee(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw"dimensions do not match";const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function bee(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=vee(ySe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function T9(e){const t=vee(gSe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function wee(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function _ee(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function vSe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function bSe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function wSe(e){return wee(bee(e))}function _Se(e){return T9(_ee(e))}function xSe(e){return vSe(wee(bee(e)))}function SSe(e){return T9(_ee(bSe(e)))}function ESe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function MSe(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function P4(e){return fSe(e)?e:gee(e)?SSe(e):yee(e)?_Se(e):mSe(e)?T9(e):mee(e)?MSe(e):e}function bI(e){return mee(e)?e:ESe(P4(e))}function WV(e){return yee(e)?e:wSe(P4(e))}function JV(e){return gee(e)?e:xSe(P4(e))}const xee=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],ISe={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function q3(e,t){if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function TSe(e,t){if(!e)return;const r=t||xee;let i,n=null;return e.type==="algorithmic"?r.some(s=>{if(q3(e.fromColor.toRgb(),s.fromColor)&&q3(e.toColor.toRgb(),s.toColor))return n=s.id,!0}):e.type==="multipart"&&r.some(s=>{if(e.colorRamps&&s.colorRamps&&e.colorRamps.length===s.colorRamps.length&&(i=e.colorRamps,!s.colorRamps.some((o,a)=>{if(!q3(i[a].fromColor.toRgb(),new xt(o.fromColor).toRgb())||!q3(i[a].toColor.toRgb(),new xt(o.toColor).toRgb()))return!0}))){if(n)return!0;n=s.id}}),n}function See(e){const t=TSe(e);return t?ISe[t]:null}function fS(e){const t=(e=e||{}).numColors||256,r=e.distanceOffset||0,i=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),n=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:r,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:n,isCustomInterval:i,weights:e.weights}}function ASe(e,t,r){const{numColors:i,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=fS(r),a=e.s===0,l=t.s===0;let u=e.h,c=t.h;a&&!l?u=c:l&&!a&&(t={...t,h:u},c=u);let p,d=Math.abs(c-u);const m=360;d<m/2?p=(c-u)*s:(d=m-d,p=u>c?d*s:-d*s);const g=(t.s-e.s)*s,b=(t.v-e.v)*s;let{s:v,v:_}=e,E=u;if(n){const x=n/s;E=(E+x*p+m)%m,v+=x*g,_+=x*b}const I=[];for(let x=0;x<i-1;x++)I.push({h:E,s:v,v:_}),E=(E+p+m)%m,v+=g,_+=b;return I.push(o?{h:E,s:v,v:_}:t),I}function $Se(e,t,r){const{numColors:i,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=fS(r);let{l:a,a:l,b:u}=e;const c=(t.l-a)*s,p=(t.a-l)*s,d=(t.b-u)*s,m=[];if(n){const g=n/s;a+=g*c,l+=g*p,u+=g*d}for(let g=0;g<i-1;g++)m.push({l:a,a:l,b:u}),a+=c,l+=p,u+=d;return m.push(o?{l:a,a:l,b:u}:t),m}function CSe(e,t,r){const{numColors:i,distanceOffset:n,distanceInterval:s,isCustomInterval:o}=fS(r),a=e.h,l=t.h,u=2*Math.PI;let c;if(a<=l){const E=l-a,I=l-a-u;c=Math.abs(I)<Math.abs(E)?I:E}else{const E=l+u-a,I=l-a;c=Math.abs(I)<Math.abs(E)?I:E}const p=c*s,d=(t.l-e.l)*s,m=(t.c-e.c)*s;let{l:g,c:b,h:v}=e;if(n){const E=n/s;g+=E*d,b+=E*m,v=(v+E*p+u)%u}const _=[];for(let E=0;E<i-1;E++)_.push({l:g,c:b,h:v}),g+=d,b+=m,v=(v+p+u)%u;return _.push(o?{l:g,c:b,h:v}:t),_}function Eee(e,t){let{fromColor:r,toColor:i}=e;r.length===3&&(r=r.concat([255])),i.length===3&&(i=i.concat([255]));const n=e.algorithm||"esriCIELabAlgorithm",{numColors:s,distanceOffset:o,isCustomInterval:a,interpolateAlpha:l}=fS(t);if(s===1&&o===0)return[r];if(s===2&&o===0&&!a)return[r,i];const u={r:r[0],g:r[1],b:r[2]},c={r:i[0],g:i[1],b:i[2]},p=n==="esriCIELabAlgorithm"?$Se(WV(u),WV(c),t):n==="esriHSVAlgorithm"?ASe(bI(u),bI(c),t):CSe(JV(u),JV(c),t),d=[],m=r[3]??255,g=((i[3]??255)-m)/(s-1);for(let b=0;b<s;b++){const{r:v,g:_,b:E}=P4(p[b]),I=l?Math.round(m+g*b):255;d.push([v,_,E,I])}return d}function kSe(e,t){const{numColors:r,interpolateAlpha:i}=fS(t);let n=t?.weights;const{colorRamps:s}=e;if(n){const d=n.reduce((m,g)=>m+g);n=n.map(m=>m/d)}else{n=[];for(let d=0;d<s.length;d++)n[d]=1/s.length}const o=[];let a=0,l=0;const u=1/(r-1);let c=!1;for(let d=0;d<s.length;d++){let m=c?0:a*u-l,g=d===s.length-1?r-1-a:(n[d]-m)/u;if(c=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;m/=n[d];const b=Eee(s[d],{numColors:g,interpolateAlpha:i,distanceOffset:m,distanceInterval:u/n[d]});a+=b.length,o.push(...b),l+=n[d]}const p=[...s[s.length-1].toColor];return p.length===3&&p.push(255),o.push(p),o}function OSe(e,t=256,r=!1){const i="toJSON"in e?e.toJSON():e,n={numColors:t,interpolateAlpha:r};return i.type==="multipart"?kSe(i,n):Eee(i,n)}function Cg(e,t=256,r=!1){const i=OSe(e,t,r);return i.forEach((n,s)=>{n.unshift(s),r||n.pop()}),i}function Mee(e){const t=See(e);if(e){if(e.type==="algorithmic")return{...ZV(e),Name:t};if(e.colorRamps){const r=e.colorRamps.map(ZV);return{type:"MultiPartColorRamp",NumColorRamps:r.length,ArrayOfColorRamp:r,Name:t}}}}function ZV(e){if(!!e)return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:KV(e.fromColor),ToColor:KV(e.toColor)}}function KV(e){const t=bI(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function RSe(e){const t=e.reverse().map(r=>{const i=r.toString(16);return i.length<2?"0"+i:i});return 4294967295&Number.parseInt(t.join(""),16)}var __;let x_=__=class extends Je{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const r=e[0].length===5,i=[...e].sort(n=>n[0][0]-n[1][0]).map(n=>fee.fromJSON({value:n[0],color:r?n.slice(1,5):n.slice(1,4).concat([255]),label:t?t[n[0]]??"":n[0]}));return new __({colormapInfos:i})}static createFromColorramp(e){const t=Cg(e,256);return __.createFromColormap(t)}clone(){return new __({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};h([f({type:[fee],json:{write:!0}})],x_.prototype,"colormapInfos",void 0),h([Ft({rasterColormap:"raster-colormap"})],x_.prototype,"type",void 0),x_=__=h([me("esri.renderers.RasterColormapRenderer")],x_);const A9=x_;var f8;let _a=f8=class extends Je{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="multi-directional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return f4(e)}clone(){return new f8({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Pe(this.colorRamp)})}};h([f({type:Number,json:{write:!0}})],_a.prototype,"altitude",void 0),h([f({type:Number,json:{write:!0}})],_a.prototype,"azimuth",void 0),h([f({types:d4,json:{write:!0}})],_a.prototype,"colorRamp",void 0),h([Ke("colorRamp")],_a.prototype,"readColorRamp",null),h([f({type:["traditional","multi-directional"],json:{write:!0}})],_a.prototype,"hillshadeType",void 0),h([f({type:Number,json:{write:!0}})],_a.prototype,"pixelSizePower",void 0),h([f({type:Number,json:{write:!0}})],_a.prototype,"pixelSizeFactor",void 0),h([f({type:["none","adjusted"],json:{write:!0}})],_a.prototype,"scalingType",void 0),h([Ft({rasterShadedRelief:"raster-shaded-relief"})],_a.prototype,"type",void 0),h([f({type:Number,json:{write:!0}})],_a.prototype,"zFactor",void 0),_a=f8=h([me("esri.renderers.RasterShadedReliefRenderer")],_a);const Iee=_a,a2=new Xt({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),PSe={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var m8;let rn=m8=class extends Je{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return f4(e)}writeStatistics(e,t,r){e?.length&&(Array.isArray(e[0])||(e=e.map(i=>[i.min,i.max,i.avg,i.stddev])),t[r]=e)}readStretchType(e,t){let r=t.stretchType;return typeof r=="number"&&(r=PSe[r]),a2.read(r)}clone(){return new m8({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Pe(this.statistics),gamma:Pe(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Pe(this.colorRamp),histograms:Pe(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};h([f({types:d4,json:{write:!0}})],rn.prototype,"colorRamp",void 0),h([Ke("colorRamp")],rn.prototype,"readColorRamp",null),h([f({type:Boolean,json:{write:!0}})],rn.prototype,"computeGamma",void 0),h([f({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],rn.prototype,"dynamicRangeAdjustment",void 0),h([f({type:[Number],json:{write:!0}})],rn.prototype,"gamma",void 0),h([f({type:Number,json:{write:!0}})],rn.prototype,"maxPercent",void 0),h([f({type:Number,json:{write:!0}})],rn.prototype,"minPercent",void 0),h([f({type:Number,json:{write:!0}})],rn.prototype,"numberOfStandardDeviations",void 0),h([f({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],rn.prototype,"outputMax",void 0),h([f({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],rn.prototype,"outputMin",void 0),h([f({type:Number,json:{write:!0}})],rn.prototype,"sigmoidStrengthLevel",void 0),h([f({json:{type:[[Number]],write:!0}})],rn.prototype,"statistics",void 0),h([f()],rn.prototype,"histograms",void 0),h([et("statistics")],rn.prototype,"writeStatistics",null),h([f({type:Boolean,json:{write:!0}})],rn.prototype,"useGamma",void 0),h([f({type:a2.apiValues,json:{type:a2.jsonValues,write:a2.write}})],rn.prototype,"stretchType",void 0),h([Ke("stretchType",["stretchType"])],rn.prototype,"readStretchType",null),h([Ft({rasterStretch:"raster-stretch"})],rn.prototype,"type",void 0),rn=m8=h([me("esri.renderers.RasterStretchRenderer")],rn);const $9=rn,H3={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ds({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:wt.WebMercator}),minus180Line:new Ds({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:wt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ds({paths:[[[180,-180],[180,180]]],spatialReference:wt.WGS84}),minus180Line:new Ds({paths:[[[-180,-180],[-180,180]]],spatialReference:wt.WGS84})}};function Uy(e,t){return Math.ceil((e-t)/(2*t))}function Tee(e,t){const r=l2(e);for(const i of r)for(const n of i)n[0]+=t;return e}function l2(e){return ig(e)?e.rings:e.paths}async function LSe(e,t,r,i){const n=typeof e=="string"?fn(e):e,s=t[0].spatialReference,o={...i,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Jg(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Mt(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(c=>{const p=Hu(c);return p.spatialReference=s,p})}}async function NSe(e,t,r){const i=typeof e=="string"?fn(e):e,n=t[0].spatialReference,s=Jg(t[0]),o={...r,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(DSe(t))}};return FSe((await Mt(i.path+"/simplify",o)).data,s,n)}function DSe(e){return{geometryType:Jg(e[0]),geometries:e.map(t=>t.toJSON())}}function FSe(e,t,r){const i=D0e(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}const Aee=ot.getLogger("esri.geometry.support.normalizeUtils");function jSe(e){return e.type==="polygon"}function USe(e){return e[0].type==="polygon"}function VSe(e){return e[0].type==="polyline"}function $ee(e,t){if(!(e instanceof Ds||e instanceof wo)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw Aee.error(n),new $e(n)}const r=l2(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],u=n[o+1][0],c=n[o+1][1],p=Math.sqrt((u-a)*(u-a)+(c-l)*(c-l)),d=(c-l)/p,m=(u-a)/p,g=p/t;if(g>1){for(let E=1;E<=g-1;E++){const I=E*t,x=m*I+a,T=d*I+l;s.push([x,T])}const b=(p+Math.floor(g-1)*t)/2,v=m*b+a,_=d*b+l;s.push([v,_])}s.push([u,c])}}return jSe(e)?new wo({rings:i,spatialReference:e.spatialReference}):new Ds({paths:i,spatialReference:e.spatialReference})}function YV(e,t,r){if(t){const i=$ee(e,1e6);e=$1(i,!0)}return r&&(e=Tee(e,r)),e}function QV(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=Uy(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=Uy(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=Uy(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=Uy(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function BSe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=l2(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let c=0;for(let d=0;d<l.length;d++){const m=l[d][0];c=m>c?m:c}c=Number(c.toFixed(9));const p=-360*Uy(c,180);for(let d=0;d<l.length;d++){const m=s.getPoint(a,d);s.setPoint(a,d,m.clone().offset(p,0))}return!0}})}if(n===r){if(USe(e))for(const a of l2(s))e[n]=e[n].addRing(a);else if(VSe(e))for(const a of l2(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function Eb(e,t,r){if(!Array.isArray(e))return Eb([e],t);t&&typeof t!="string"&&Aee.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:t?.url??_r.geometryServiceUrl;let n,s,o,a,l,u,c,p,d=0;const m=[],g=[];for(const x of e)if(Ne(x))g.push(x);else if(n||(n=x.spatialReference,s=za(n),o=n.isWebMercator,u=o?102100:4326,a=H3[u].maxX,l=H3[u].minX,c=H3[u].plus180Line,p=H3[u].minus180Line),s)if(x.type==="mesh")g.push(x);else if(x.type==="point")g.push(QV(x.clone(),a,l));else if(x.type==="multipoint"){const T=x.clone();T.points=T.points.map(M=>QV(M,a,l)),g.push(T)}else if(x.type==="extent"){const T=x.clone()._normalize(!1,!1,s);g.push(T.rings?new wo(T):T)}else if(x.extent){const T=x.extent,M=Uy(T.xmin,l)*(2*a);let k=M===0?x.clone():Tee(x.clone(),M);T.offset(M,0),T.intersects(c)&&T.xmax!==a?(d=T.xmax>d?T.xmax:d,k=YV(k,o),m.push(k),g.push("cut")):T.intersects(p)&&T.xmin!==l?(d=T.xmax*(2*a)>d?T.xmax*(2*a):d,k=YV(k,o,360),m.push(k),g.push("cut")):g.push(k)}else g.push(x.clone());else g.push(x);let b=Uy(d,a),v=-90;const _=b,E=new Ds;for(;b>0;){const x=360*b-180;E.addPath([[x,v],[x,-1*v]]),v*=-1,b--}if(m.length>0&&_>0){const x=BSe(m,await LSe(i,m,E,r)),T=[],M=[];for(let B=0;B<g.length;B++){const G=g[B];if(G!=="cut")M.push(G);else{const W=x.shift(),K=e[B];de(K)&&K.type==="polygon"&&K.rings&&K.rings.length>1&&W.rings.length>=K.rings.length?(T.push(W),M.push("simplify")):M.push(o?wf(W):W)}}if(!T.length)return M;const k=await NSe(i,T,r),D=[];for(let B=0;B<M.length;B++){const G=M[B];G!=="simplify"?D.push(G):D.push(o?wf(k.shift()):k.shift())}return D}const I=[];for(let x=0;x<g.length;x++){const T=g[x];if(T!=="cut")I.push(T);else{const M=m.shift();I.push(o===!0?wf(M):M)}}return I}function cat(e,t){const r=za(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}var sy;const S0=ot.getLogger("esri.layers.support.PixelBlock");let wl=sy=class extends Je{constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.pixels=null,this.statistics=null}static createEmptyBand(e,t){return new(sy.getPixelArrayConstructor(e))(t)}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels&&this.pixels.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new $e("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){this.statistics=this.pixels.map(r=>this._calculateBandStatistics(r,this.mask));const e=this.mask;let t=0;if(e)for(let r=0;r<e.length;r++)e[r]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32")return;let t;switch(e){case"u8":t=[0,255];break;case"u16":t=[0,65535];break;case"u32":t=[0,4294967295];break;case"s8":t=[-128,127];break;case"s16":t=[-32768,32767];break;case"s32":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}const[r,i]=t,n=this.pixels,s=this.width*this.height,o=n.length;let a,l,u;const c=[];for(let p=0;p<o;p++){u=sy.createEmptyBand(e,s),a=n[p];for(let d=0;d<s;d++)l=a[d],u[d]=l>i?i:l<r?r:l;c.push(u)}this.pixels=c,this.pixelType=e}extractBands(e){if(Ne(e)||e.length===0||this.pixels==null||this.pixels.length===0)return this;const t=this.pixels.length,r=e.some(n=>n>=this.pixels.length),i=t===e.length&&!e.some((n,s)=>n!==s);return r||i?this:new sy({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map(n=>this.pixels[n]),statistics:this.statistics&&e.map(n=>this.statistics[n])})}clone(){const e=new sy({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0));const r=sy.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const i=this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=i?this.pixels[t].slice(0,this.pixels[t].length):new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=Pe(this.statistics[t]);return e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:r,pixels:i}=this;if(!e||!i||!i.length)return void S0.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let n,s,o,a;n=s=o=i[0],i.length>=3?(s=i[1],o=i[2]):i.length===2&&(s=i[1]);const l=new Uint32Array(e),u=this.width*this.height;if(n.length===u)if(t&&t.length===u)if(r)for(a=0;a<u;a++)t[a]&&(l[a]=t[a]<<24|o[a]<<16|s[a]<<8|n[a]);else for(a=0;a<u;a++)t[a]&&(l[a]=255<<24|o[a]<<16|s[a]<<8|n[a]);else for(a=0;a<u;a++)l[a]=255<<24|o[a]<<16|s[a]<<8|n[a];else S0.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:r,statistics:i}=this;if(!e||!t||!t.length)return void S0.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const n=this.pixelType;let s=1,o=0,a=1;if(i&&i.length>0)o=i.map(b=>b.minValue).reduce((b,v)=>Math.min(b,v)),a=i.map(b=>b.maxValue-b.minValue).reduce((b,v)=>Math.max(b,v)),s=255/a;else{let b=255;n==="s8"?(o=-128,b=127):n==="u16"?b=65535:n==="s16"?(o=-32768,b=32767):n==="u32"?b=4294967295:n==="s32"?(o=-2147483648,b=2147483647):n==="f32"?(o=-34e38,b=34e38):n==="f64"&&(o=-Number.MAX_VALUE,b=Number.MAX_VALUE),s=255/(b-o)}const l=new Uint32Array(e),u=this.width*this.height;let c,p,d,m,g;if(c=p=d=t[0],c.length!==u)return S0.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(p=t[1],t.length>=3&&(d=t[2]),r&&r.length===u)for(m=0;m<u;m++)r[m]&&(l[m]=255<<24|(d[m]-o)*s<<16|(p[m]-o)*s<<8|(c[m]-o)*s);else for(m=0;m<u;m++)l[m]=255<<24|(d[m]-o)*s<<16|(p[m]-o)*s<<8|(c[m]-o)*s;else if(r&&r.length===u)for(m=0;m<u;m++)g=(c[m]-o)*s,r[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(c[m]-o)*s,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:r}=this;if(!e||!t||!t.length)return S0.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let i,n,s,o;i=n=s=t[0],t.length>=3?(n=t[1],s=t[2]):t.length===2&&(n=t[1]);const a=this.width*this.height;if(i.length!==a)return S0.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(r&&r.length===a)for(o=0;o<a;o++)e[l++]=i[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1&r[o];else for(o=0;o<a;o++)e[l++]=i[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1}_calculateBandStatistics(e,t){let r=1/0,i=-1/0;const n=e.length;let s,o=0;if(t)for(s=0;s<n;s++)t[s]&&(o=e[s],r=o<r?o:r,i=o>i?o:i);else for(s=0;s<n;s++)o=e[s],r=o<r?o:r,i=o>i?o:i;return{minValue:r,maxValue:i}}};h([f({json:{write:!0}})],wl.prototype,"width",void 0),h([f({json:{write:!0}})],wl.prototype,"height",void 0),h([f({json:{write:!0}})],wl.prototype,"pixelType",void 0),h([ur("pixelType")],wl.prototype,"castPixelType",null),h([f({json:{write:!0}})],wl.prototype,"validPixelCount",void 0),h([f({json:{write:!0}})],wl.prototype,"mask",void 0),h([f({json:{write:!0}})],wl.prototype,"maskIsAlpha",void 0),h([f({json:{write:!0}})],wl.prototype,"pixels",void 0),h([f({json:{write:!0}})],wl.prototype,"statistics",void 0),wl=sy=h([me("esri.layers.support.PixelBlock")],wl);const Nr=wl;function pn(e){return de(e)&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function XV(e,t){if(!t?.length||!pn(e))return e;const r=e.pixels.length;return t&&t.some(i=>i>=r)||r===1&&t.length===1&&t[0]===0?e:r!==t.length||t.some((i,n)=>i!==n)?new Nr({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map(i=>e.pixels[i]),statistics:e.statistics&&t.map(i=>e.statistics[i])}):e}function uw(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const r=t.sort((p,d)=>p[0]-d[0]);let i=0;r[0][0]<0&&(i=r[0][0]);const n=Math.max(256,r[r.length-1][0]-i+1),s=new Uint8Array(4*n),o=[];let a,l=0,u=0;const c=r[0].length===5;if(n>65536)return r.forEach(p=>{o[p[0]-i]=c?p.slice(1):p.slice(1).concat([255])}),{indexed2DColormap:o,offset:i,alphaSpecified:c};if(e.fillUnspecified)for(a=r[u],l=a[0]-i;l<n;l++)s[4*l]=a[1],s[4*l+1]=a[2],s[4*l+2]=a[3],s[4*l+3]=c?a[4]:255,l===a[0]-i&&(a=u===r.length-1?a:r[++u]);else for(l=0;l<r.length;l++)a=r[l],u=4*(a[0]-i),s[u]=a[1],s[u+1]=a[2],s[u+2]=a[3],s[u+3]=c?a[4]:255;return{indexedColormap:s,offset:i,alphaSpecified:c}}function X$(e,t){if(!pn(e)||!t&&(t.indexedColormap||t.indexed2DColormap))return e;const r=e.clone(),i=r.pixels;let n=r.mask;const s=r.width*r.height;if(i.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t,c=o.length-1;let p=0;const d=i[0],m=new Uint8Array(d.length),g=new Uint8Array(d.length),b=new Uint8Array(d.length);let v,_=0;if(o)if(n)for(p=0;p<s;p++)n[p]&&(_=4*(d[p]-l),_<l||_>c?n[p]=0:(m[p]=o[_],g[p]=o[_+1],b[p]=o[_+2],n[p]=o[_+3]));else{for(n=new Uint8Array(s),p=0;p<s;p++)_=4*(d[p]-l),_<l||_>c?n[p]=0:(m[p]=o[_],g[p]=o[_+1],b[p]=o[_+2],n[p]=o[_+3]);r.mask=n}else if(n)for(p=0;p<s;p++)n[p]&&(v=a[d[p]],m[p]=v[0],g[p]=v[1],b[p]=v[2],n[p]=v[3]);else{for(n=new Uint8Array(s),p=0;p<s;p++)v=a[d[p]],m[p]=v[0],g[p]=v[1],b[p]=v[2],n[p]=v[3];r.mask=n}return r.pixels=[m,g,b],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=u,r}function eB(e,t){if(!pn(e))return null;const{pixels:r,mask:i}=e,n=e.width*e.height,s=r.length;let o=t.lut;const{offset:a}=t;let l,u;o&&o[0].length===1&&(o=r.map(()=>o));const c=[];let p,d,m;if(a)if(i==null)for(l=0;l<s;l++){for(p=r[l],d=o[l],m=new Uint8Array(n),u=0;u<n;u++)m[u]=d[p[u]-a];c.push(m)}else for(l=0;l<s;l++){for(p=r[l],d=o[l],m=new Uint8Array(n),u=0;u<n;u++)i[u]&&(m[u]=d[p[u]-a]);c.push(m)}else if(i==null)for(l=0;l<s;l++){for(p=r[l],d=o[l],m=new Uint8Array(n),u=0;u<n;u++)m[u]=d[p[u]];c.push(m)}else for(l=0;l<s;l++){for(p=r[l],d=o[l],m=new Uint8Array(n),u=0;u<n;u++)i[u]&&(m[u]=d[p[u]]);c.push(m)}const g=new Nr({width:e.width,height:e.height,pixels:c,mask:i,pixelType:"u8"});return g.updateStatistics(),g}function zSe(e,t){if(!pn(e))return null;const r=e.clone(),{pixels:i}=r,n=r.width*r.height,s=t.length,o=Math.floor(s/2),a=t[Math.floor(o)],l=i[0];let u,c,p,d,m,g,b=!1;const v=new Uint8Array(n),_=new Uint8Array(n),E=new Uint8Array(n);let I=r.mask;const x=t[0].mappedColor.length===4;for(I||(I=new Uint8Array(n),I.fill(x?255:1),r.mask=I),m=0;m<n;m++)if(I[m]){for(u=l[m],b=!1,g=o,c=a,p=0,d=s-1;d-p>1;){if(u===c.value){b=!0;break}u>c.value?p=g:d=g,g=Math.floor((p+d)/2),c=t[Math.floor(g)]}b||(u===t[p].value?(c=t[p],b=!0):u===t[d].value?(c=t[d],b=!0):u<t[p].value?(b=!1,c=null):u>t[p].value&&(u<t[d].value?(c=t[p],b=!0):d===s-1?(b=!1,c=null):(c=t[d],b=!0))),b?(v[m]=c.mappedColor[0],_[m]=c.mappedColor[1],E[m]=c.mappedColor[2],I[m]=c.mappedColor[3]):v[m]=_[m]=E[m]=I[m]=0}return r.pixels=[v,_,E],r.mask=I,r.pixelType="u8",r.maskIsAlpha=x,r}function GSe(e,t,r,i,n,s,o,a){return{xmin:n<=r*e?0:n<r*e+e?n-r*e:e,ymin:s<=i*t?0:s<i*t+t?s-i*t:t,xmax:n+o<=r*e?0:n+o<r*e+e?n+o-r*e:e,ymax:s+a<=i*t?0:s+a<i*t+t?s+a-i*t:t}}function hat(e,t){if(!e||e.length===0)return null;const r=e.find(g=>g.pixelBlock);if(!r||Ne(r.pixelBlock))return null;const i=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,n=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,s=.01*Math.min(i,n),o=e.sort((g,b)=>Math.abs(g.extent.ymax-b.extent.ymax)>s?b.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-b.extent.xmin)>s?g.extent.xmin-b.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),c=Math.max.apply(null,o.map(g=>g.extent.ymax)),p={x:Math.round((t.xmin-a)/i),y:Math.round((c-t.ymax)/n)},d={width:Math.round((u-a)/i),height:Math.round((c-l)/n)},m={width:Math.round((t.xmax-t.xmin)/i),height:Math.round((t.ymax-t.ymin)/n)};return Math.round(d.width/r.pixelBlock.width)*Math.round(d.height/r.pixelBlock.height)!==o.length||p.x<0||p.y<0||d.width<m.width||d.height<m.height?null:{extent:t,pixelBlock:qSe(o.map(g=>g.pixelBlock),d,{clipOffset:p,clipSize:m})}}function tB(e,t,r,i,n,s){const{width:o,height:a}=r.block,{x:l,y:u}=r.offset,{width:c,height:p}=r.mosaic,d=GSe(o,a,i,n,l,u,c,p);let m=0,g=0;if(s){const b=s.hasGCSSShiftTransform?360:s.halfWorldWidth,v=o*s.resolutionX,_=s.startX+i*v,E=_+v;_<b&&E>b?g=s.rightPadding:_>=b&&(m=s.leftMargin-s.rightPadding,g=0)}if(d.xmax-=g,typeof t!="number")for(let b=d.ymin;b<d.ymax;b++){const v=(n*a+b-u)*c+(i*o-l)+m,_=b*o;for(let E=d.xmin;E<d.xmax;E++)e[v+E]=t[_+E]}else for(let b=d.ymin;b<d.ymax;b++){const v=(n*a+b-u)*c+(i*o-l)+m;for(let _=d.xmin;_<d.xmax;_++)e[v+_]=t}}function qSe(e,t,r={}){const{clipOffset:i,clipSize:n,alignmentInfo:s,blockWidths:o}=r;if(o)return HSe(e,t,{blockWidths:o});const a=e.find(k=>pn(k));if(Ne(a))return null;const l=n?n.width:t.width,u=n?n.height:t.height,c=a.width,p=a.height,d=t.width/c,m=t.height/p,g={offset:i||{x:0,y:0},mosaic:n||t,block:{width:c,height:p}},b=a.pixelType,v=Nr.getPixelArrayConstructor(b),_=a.pixels.length,E=[];let I,x;for(let k=0;k<_;k++){x=new v(l*u);for(let D=0;D<m;D++)for(let B=0;B<d;B++){const G=e[D*d+B];pn(G)&&(I=G.pixels[k],tB(x,I,g,B,D,s))}E.push(x)}let T;if(e.some(k=>Ne(k)||k.mask&&k.mask.length>0)){T=new Uint8Array(l*u);for(let k=0;k<m;k++)for(let D=0;D<d;D++){const B=e[k*d+D],G=de(B)?B.mask:null;tB(T,G||(B?1:0),g,D,k,s)}}const M=new Nr({width:l,height:u,pixels:E,pixelType:b,mask:T});return M.updateStatistics(),M}function HSe(e,t,r){const i=e.find(m=>de(m));if(Ne(i))return null;const n=e.some(m=>!de(m)||!!m.mask),{width:s,height:o}=t,a=n?new Uint8Array(s*o):null,{blockWidths:l}=r,u=[],c=i.getPlaneCount(),p=Nr.getPixelArrayConstructor(i.pixelType);if(n)for(let m=0,g=0;m<e.length;g+=l[m],m++){const b=e[m];if(!pn(b))continue;const v=b.mask;for(let _=0;_<o;_++)for(let E=0;E<l[m];E++)a[_*s+E+g]=v==null?255:v[_*b.width+E]}for(let m=0;m<c;m++){const g=new p(s*o);for(let b=0,v=0;b<e.length;v+=l[b],b++){const _=e[b];if(!pn(_))continue;const E=_.pixels[m];if(E!=null)for(let I=0;I<o;I++)for(let x=0;x<l[b];x++)g[I*s+x+v]=E[I*_.width+x]}u.push(g)}const d=new Nr({width:s,height:o,mask:a,pixels:u,pixelType:i.pixelType});return d.updateStatistics(),d}function pat(e,t,r){if(!pn(e))return null;const{width:i,height:n}=e,s=t.x,o=t.y,a=r.width+s,l=r.height+o;if(s<0||o<0||a>i||l>n||s===0&&o===0&&a===i&&l===n)return e;e.mask||(e.mask=new Uint8Array(i*n));const u=e.mask;for(let c=0;c<n;c++){const p=c*i;for(let d=0;d<i;d++)u[p+d]=c<o||c>=l||d<s||d>=a?0:1}return e.updateStatistics(),e}function WSe(e){if(!pn(e))return null;const t=e.clone(),{width:r,height:i,pixels:n,mask:s}=e,o=n[0],a=t.pixels[0];for(let l=2;l<i-1;l++){const u=new Map;for(let p=l-2;p<l+2;p++)for(let d=0;d<4;d++){const m=p*r+d;cw(u,o[m],s?s[m]:1)}a[l*r]=rB(u),a[l*r+1]=a[l*r+2]=a[l*r];let c=3;for(;c<r-1;c++){let p=(l-2)*r+c+1;cw(u,o[p],s?s[p]:1),p=(l-1)*r+c+1,cw(u,o[p],s?s[p]:1),p=l*r+c+1,cw(u,o[p],s?s[p]:1),p=(l+1)*r+c+1,cw(u,o[p],s?s[p]:1),p=(l-2)*r+c-3,W3(u,o[p],s?s[p]:1),p=(l-1)*r+c-3,W3(u,o[p],s?s[p]:1),p=l*r+c-3,W3(u,o[p],s?s[p]:1),p=(l+1)*r+c-3,W3(u,o[p],s?s[p]:1),a[l*r+c]=rB(u)}a[l*r+c+1]=a[l*r+c]}for(let l=0;l<r;l++)a[l]=a[r+l]=a[2*r+l],a[(i-1)*r+l]=a[(i-2)*r+l];return t.updateStatistics(),t}function rB(e){if(e.size===0)return 0;let t=0,r=-1,i=0;const n=e.keys();let s=n.next();for(;!s.done;)i=e.get(s.value),i>t&&(r=s.value,t=i),s=n.next();return r}function W3(e,t,r){if(r===0)return;const i=e.get(t);i===1?e.delete(t):e.set(t,i-1)}function cw(e,t,r){r!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function JSe(e,t,r){let{x:i,y:n}=t;const{width:s,height:o}=r;if(i===0&&n===0&&o===e.height&&s===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,n),c=Math.max(0,i),p=Math.min(i+s,a),d=Math.min(n+o,l);if(p<0||d<0||!pn(e))return null;i=Math.max(0,-i),n=Math.max(0,-n);const{pixels:m,mask:g}=e,b=s*o,v=m.length,_=[];for(let x=0;x<v;x++){const T=m[x],M=Nr.createEmptyBand(e.pixelType,b);for(let k=u;k<d;k++){const D=k*a;let B=(k+n-u)*s+i;for(let G=c;G<p;G++)M[B++]=T[D+G]}_.push(M)}const E=new Uint8Array(b);for(let x=u;x<d;x++){const T=x*a;let M=(x+n-u)*s+i;for(let k=c;k<p;k++)E[M++]=g?g[T+k]:1}const I=new Nr({width:r.width,height:r.height,pixelType:e.pixelType,pixels:_,mask:E});return I.updateStatistics(),I}function ZSe(e,t=!0){if(!pn(e))return null;const{pixels:r,width:i,height:n,mask:s,pixelType:o}=e,a=[],l=Math.round(i/2),u=Math.round(n/2),c=n-1,p=i-1;for(let m=0;m<r.length;m++){const g=r[m],b=Nr.createEmptyBand(o,l*u);let v=0;for(let _=0;_<n;_+=2)for(let E=0;E<i;E+=2){const I=g[_*i+E];if(t){const x=E===p?I:g[_*i+E+1],T=_===c?I:g[_*i+E+i],M=E===p?T:_===c?x:g[_*i+E+i+1];b[v++]=(I+x+T+M)/4}else b[v++]=I}a.push(b)}let d=null;if(s){d=new Uint8Array(l*u);let m=0;for(let g=0;g<n;g+=2)for(let b=0;b<i;b+=2){const v=s[g*i+b];if(t){const _=b===p?v:s[g*i+b+1],E=g===c?v:s[g*i+b+i],I=b===p?E:g===c?_:s[g*i+b+i+1];d[m++]=v*_*E*I?1:0}else d[m++]=v}}return new Nr({width:l,height:u,pixelType:o,pixels:a,mask:d})}function dat(e,t,r){if(!pn(e))return null;const{width:i,height:n}=t;let{width:s,height:o}=e;const a=new Map,l={x:0,y:0},u=r==null?1:1+r;let c=e;for(let p=0;p<u;p++){const d=Math.ceil(s/i),m=Math.ceil(o/n);for(let g=0;g<m;g++){l.y=g*n;for(let b=0;b<d;b++){l.x=b*i;const v=JSe(c,l,t);a.set(`${p}/${g}/${b}`,v)}}p<u-1&&(c=ZSe(c)),s=Math.round(s/2),o=Math.round(o/2)}return a}function Cee(e,t,r,i,n=.5){const{width:s,height:o}=e,{width:a,height:l}=t,u=i.cols,c=i.rows,p=Math.ceil(a/u-.1/u),d=Math.ceil(l/c-.1/c);let m,g,b,v,_,E,I;const x=p*u,T=x*d*c,M=new Float32Array(T),k=new Float32Array(T),D=new Uint32Array(T),B=new Uint32Array(T);let G,W,K=0;for(let ne=0;ne<d;ne++)for(let ye=0;ye<p;ye++){m=12*(ne*p+ye),g=r[m],b=r[m+1],v=r[m+2],_=r[m+3],E=r[m+4],I=r[m+5];for(let y=0;y<c;y++){K=(ne*c+y)*x+ye*u,W=(y+.5)/c;for(let C=0;C<y;C++)G=(C+.5)/u,M[K+C]=(g*G+b*W+v)*s-n,k[K+C]=(_*G+E*W+I)*o-n,D[K+C]=Math.round(M[K+C]),B[K+C]=Math.round(k[K+C])}m+=6,g=r[m],b=r[m+1],v=r[m+2],_=r[m+3],E=r[m+4],I=r[m+5];for(let y=0;y<c;y++){K=(ne*c+y)*x+ye*u,W=(y+.5)/c;for(let C=y;C<u;C++)G=(C+.5)/u,M[K+C]=(g*G+b*W+v)*s-n,k[K+C]=(_*G+E*W+I)*o-n,D[K+C]=Math.round(M[K+C]),B[K+C]=Math.round(k[K+C])}}return{offsets_x:M,offsets_y:k,offsets_xi:D,offsets_yi:B,gridWidth:x}}function fat(e,t){const{coefficients:r,spacing:i}=t,{offsets_x:n,offsets_y:s,gridWidth:o}=Cee(e,e,r,{rows:i[0],cols:i[1]},.5),{width:a,height:l}=e,u=new Float32Array(a*l),c=180/Math.PI;for(let p=0;p<l;p++)for(let d=0;d<a;d++){const m=p*o+d,g=p===0?m:m-o,b=p===l-1?m:m+o,v=n[g]-n[b],_=s[b]-s[g];if(isNaN(v)||isNaN(_))u[p*a+d]=90;else{let E=Math.atan2(_,v)*c;E=(360+E)%360,u[p*a+d]=E}}return u}function mat(e,t,r,i,n="nearest"){if(!pn(e))return null;n==="majority"&&(e=WSe(e));const{pixels:s,mask:o,pixelType:a}=e,l=e.width,u=e.height,c=Nr.getPixelArrayConstructor(a),p=s.length,{width:d,height:m}=t;let g=!1;for(let B=0;B<r.length;B+=3)r[B]===-1&&r[B+1]===-1&&r[B+2]===-1&&(g=!0);const{offsets_x:b,offsets_y:v,offsets_xi:_,offsets_yi:E,gridWidth:I}=Cee({width:l,height:u},t,r,i,n==="majority"?0:.5);let x;const T=(B,G,W)=>{const K=B instanceof Float32Array||B instanceof Float64Array?0:.5;for(let ne=0;ne<m;ne++){x=ne*I;for(let ye=0;ye<d;ye++){if(b[x]<0||v[x]<0)B[ne*d+ye]=0;else if(W)B[ne*d+ye]=G[_[x]+E[x]*l];else{const y=Math.floor(b[x]),C=Math.floor(v[x]),L=Math.ceil(b[x]),F=Math.ceil(v[x]),ae=b[x]-y,q=v[x]-C;if(!o||o[y+C*l]&&o[y+C*l]&&o[y+F*l]&&o[L+F*l]){const fe=(1-ae)*G[y+C*l]+ae*G[L+C*l],te=(1-ae)*G[y+F*l]+ae*G[L+F*l];B[ne*d+ye]=(1-q)*fe+q*te+K}else B[ne*d+ye]=G[_[x]+E[x]*l]}x++}}},M=[];let k;for(let B=0;B<p;B++)k=new c(d*m),T(k,s[B],n==="nearest"||n==="majority"),M.push(k);const D=new Nr({width:d,height:m,pixelType:a,pixels:M});if(o)D.mask=new Uint8Array(d*m),T(D.mask,o,!0);else if(g){D.mask=new Uint8Array(d*m);for(let B=0;B<d*m;B++)D.mask[B]=b[B]<0||v[B]<0?0:1}return D.updateStatistics(),D}const Iy=new Map;Iy.set("meter-per-second",1),Iy.set("kilometer-per-hour",.277778),Iy.set("knots",.514444),Iy.set("feet-per-second",.3048),Iy.set("mile-per-hour",.44704);const y8=180/Math.PI,C9=5,Ra=new Xt({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function L4(e,t){return Iy.get(e)/Iy.get(t)||1}function kee(e){return(450-e)%360}function k9(e,t="geographic"){const[r,i]=e,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r)*y8;return s=(360+s)%360,t==="geographic"&&(s=kee(s)),[n,s]}function Oee(e,t="geographic"){let r=e[1];t==="geographic"&&(r=kee(r)),r%=360;const i=e[0];return[i*Math.cos(r/y8),i*Math.sin(r/y8)]}function yat(e,t,r,i="geographic"){if(!pn(e)||Ne(r))return e;const n=t==="vector-magdir"?e.clone():g8(e,t),s=n.pixels[1];for(let o=0;o<s.length;o++)s[o]=i==="geographic"?(s[o]+r[o]+270)%360:(s[o]+360-r[o])%360;return t==="vector-magdir"?n:g8(n,"vector-magdir")}function g8(e,t,r="geographic",i=1){if(!pn(e))return e;const{pixels:n,width:s,height:o}=e,a=s*o,l=n[0],u=n[1],c=e.pixelType.startsWith("f")?e.pixelType:"f32",p=Nr.createEmptyBand(c,a),d=Nr.createEmptyBand(c,a);let m=0;for(let b=0;b<o;b++)for(let v=0;v<s;v++)t==="vector-uv"?([p[m],d[m]]=k9([l[m],u[m]],r),p[m]*=i):([p[m],d[m]]=Oee([l[m],u[m]],r),p[m]*=i,d[m]*=i),m++;const g=new Nr({pixelType:c,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[p,d]});return g.updateStatistics(),g}function KSe(e,t,r=1){if(r===1||!pn(e))return e;const i=e.clone(),{pixels:n,width:s,height:o}=i,a=n[0],l=n[1];let u=0;for(let c=0;c<o;c++)for(let p=0;p<s;p++)t==="vector-uv"?(a[u]*=r,l[u]*=r):a[u]*=r,u++;return i.updateStatistics(),i}function gat(e,t,r,i,n){if(Ne(n)||!n.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/i),height:Math.round(r/i),resolution:e.width/t};const s=n.xmin,o=n.ymax,a=(e.xmax-e.xmin)/t*i,l=(e.ymax-e.ymin)/r*i,u=(a+l)/2;return e.xmin=s+Math.floor((e.xmin-s)/a)*a,e.xmax=s+Math.ceil((e.xmax-s)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const eC=YSe(0,0,0);function YSe(e=0,t=0,r=Math.PI,i=!0){i&&(r=(2*Math.PI-r)%(2*Math.PI));const n=i?-1:1,s=13*n,o=-7*n,a=-2*n,l=-16*n,u=21.75,[c,p]=ls(0,t+s,r,u),[d,m]=ls(e-5.5,t+o,r,u),[g,b]=ls(e+5.5,t+o,r,u),[v,_]=ls(e-1.5,t+a,r,u),[E,I]=ls(e+1.5,t+a,r,u),[x,T]=ls(e-1.5,t+l,r,u),[M,k]=ls(e+1.5,t+l,r,u);return[c,p,d,m,v,_,E,I,g,b,x,T,M,k]}function QSe(e=0,t=Math.PI,r=!0){r&&(t=(2*Math.PI-t)%(2*Math.PI));const i=10,n=r?-1:1,s=5*n,o=20*n,a=25*n,l=45,u=0,c=0,p=2,d=0,m=p*n;let[g,b]=[u+i/2,c-o],[v,_]=[g+p,b],[E,I]=[v-d,_+m],[x,T]=[u-i/2,c-a],[M,k]=[x+d,T-m],D=Math.ceil(e/C9),B=Math.floor(D/10);D-=8*B;const G=[],W=[];for(let fe=0;fe<D/2;fe++,B--){B<=0&&D%2==1&&fe===(D-1)/2&&(x=u,M=x+d,T=(T+b)/2,k=T-m);const[te,ge]=ls(x,T,t,l);if(B>0){const[ve,Ee]=ls(v,T,t,l),[Ie,ke]=ls(g,b,t,l);G.push(ve),G.push(Ee),G.push(te),G.push(ge),G.push(Ie),G.push(ke)}else{const[ve,Ee]=ls(v,_,t,l),[Ie,ke]=ls(E,I,t,l),[Te,Se]=ls(M,k,t,l);W.push(te),W.push(ge),W.push(Te),W.push(Se),W.push(Ie),W.push(ke),W.push(ve),W.push(Ee)}T+=s,b+=s,_+=s,I+=s,k+=s}const[K,ne]=ls(u+i/2,c+o,t,l),ye=i/2+p,[y,C]=ls(u+ye,c+o,t,l),[L,F]=ls(u+i/2,c-a,t,l),[ae,q]=ls(u+ye,c-a,t,l);return{pennants:G,barbs:W,shaft:[K,ne,y,C,L,F,ae,q]}}function ls(e,t,r,i=1){const n=Math.sqrt(e*e+t*t)/i,s=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[n,(2*Math.PI+s-r)%(2*Math.PI)]}const J3=[0,1,3,6,10,16,21,27,33,40,47,55,63],XSe=[0,.5,1,1.5,2],e3e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function wm(e,t,r,i){const n=L4(i||"knots",r);let s;for(s=1;s<t.length;s++)if(s===t.length-1){if(e<t[s]*n)break}else if(e<=t[s]*n)break;return Math.min(s-1,t.length-2)}function t3e(e,t,r,i,n){let s=0;switch(t){case"beaufort_kn":s=wm(e,J3,"knots",r);break;case"beaufort_km":s=wm(e,J3,"kilometer-per-hour",r);break;case"beaufort_ft":s=wm(e,J3,"feet-per-second",r);break;case"beaufort_m":s=wm(e,J3,"meter-per-second",r);break;case"classified_arrow":s=wm(e,n,i,r);break;case"ocean_current_m":s=wm(e,XSe,"meter-per-second",r);break;case"ocean_current_kn":s=wm(e,e3e,"knots",r)}return s}function r3e(e,t){const{style:r,inputUnit:i,outputUnit:n,breakValues:s}=t,o=Ra.fromJSON(i),a=Ra.fromJSON(n),l=7*6,u=15;let c=0,p=0;const{width:d,height:m,mask:g}=e,b=e.pixels[0],v=e.pixels[1],_=g?g.filter(x=>x>0).length:d*m,E=new Float32Array(_*l),I=new Uint32Array(u*_);for(let x=0;x<m;x++)for(let T=0;T<d;T++){const M=x*d+T;if(!g||g[x*d+T]){const k=(v[M]+360)%360/180*Math.PI,D=t3e(b[M],r,o,a,s);for(let G=0;G<eC.length;G+=2)E[c++]=(T+.5)/d,E[c++]=(x+.5)/m,E[c++]=eC[G],E[c++]=eC[G+1]+k,E[c++]=D,E[c++]=b[M];const B=7*(c/l-1);I[p++]=B,I[p++]=B+1,I[p++]=B+2,I[p++]=B+0,I[p++]=B+4,I[p++]=B+3,I[p++]=B+0,I[p++]=B+2,I[p++]=B+3,I[p++]=B+2,I[p++]=B+5,I[p++]=B+3,I[p++]=B+5,I[p++]=B+6,I[p++]=B+3}}return{vertexData:E,indexData:I}}const tC=[];function i3e(e,t){if(tC.length===0)for(let m=0;m<30;m++)tC.push(QSe(5*m,0));const r=L4(Ra.fromJSON(t.inputUnit),"knots"),{width:i,height:n,mask:s}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],c=[];let p=0,d=0;for(let m=0;m<n;m++)for(let g=0;g<i;g++){const b=m*i+g,v=o[b]*r;if((!s||s[m*i+g])&&v>=C9){const _=(a[b]+360)%360/180*Math.PI,{pennants:E,barbs:I,shaft:x}=tC[Math.min(Math.floor(v/5),29)];if(E.length+I.length===0)continue;let T=u.length/l;const M=(g+.5)/i,k=(m+.5)/n;for(let D=0;D<E.length;D+=2)u[p++]=M,u[p++]=k,u[p++]=E[D],u[p++]=E[D+1]+_,u[p++]=0,u[p++]=v;for(let D=0;D<I.length;D+=2)u[p++]=M,u[p++]=k,u[p++]=I[D],u[p++]=I[D+1]+_,u[p++]=0,u[p++]=v;for(let D=0;D<x.length;D+=2)u[p++]=M,u[p++]=k,u[p++]=x[D],u[p++]=x[D+1]+_,u[p++]=0,u[p++]=v;for(let D=0;D<E.length/6;D++)c[d++]=T,c[d++]=T+1,c[d++]=T+2,T+=3;for(let D=0;D<I.length/8;D++)c[d++]=T,c[d++]=T+1,c[d++]=T+2,c[d++]=T+1,c[d++]=T+2,c[d++]=T+3,T+=4;c[d++]=T+0,c[d++]=T+1,c[d++]=T+2,c[d++]=T+1,c[d++]=T+3,c[d++]=T+2,T+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function n3e(e,t){let i=0,n=0;const{width:s,height:o,mask:a}=e,l=e.pixels[0],u=[],c=[],p=L4(Ra.fromJSON(t.inputUnit),"knots"),d=t.style==="wind_speed"?C9:Number.MAX_VALUE;for(let m=0;m<o;m++)for(let g=0;g<s;g++){const b=l[m*s+g]*p;if((!a||a[m*s+g])&&b<d){for(let _=0;_<4;_++)u[i++]=(g+.5)/s,u[i++]=(m+.5)/o,u[i++]=_<2?-.5:.5,u[i++]=_%2==0?-.5:.5,u[i++]=0,u[i++]=b;const v=4*(i/24-1);c[n++]=v,c[n++]=v+1,c[n++]=v+2,c[n++]=v+1,c[n++]=v+2,c[n++]=v+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function vat(e,t){return t.style==="simple_scalar"?n3e(e,t):t.style==="wind_speed"?i3e(e,t):r3e(e,t)}function bat(e,t,r,i=[0,0],n=.5){const{width:s,height:o,mask:a}=e,[l,u]=e.pixels,[c,p]=i,d=Math.round((s-c)/r),m=Math.round((o-p)/r),g=d*m,b=new Float32Array(g),v=new Float32Array(g),_=new Uint8Array(g),E=t==="vector-uv";for(let x=0;x<m;x++)for(let T=0;T<d;T++){let M=0;const k=x*d+T,D=Math.max(0,x*r+p),B=Math.max(0,T*r+c),G=Math.min(o,D+r),W=Math.min(s,B+r);for(let K=D;K<G;K++)for(let ne=B;ne<W;ne++){const ye=K*s+ne;if(!a||a[ye]){M++;const y=E?[l[ye],u[ye]]:[l[ye],(360+u[ye])%360],[C,L]=E?y:Oee(y);b[k]+=C,v[k]+=L}}if(M>=(G-D)*(W-B)*(1-n)){_[k]=1;const[K,ne]=k9([b[k]/M,v[k]/M]);b[k]=K,v[k]=ne}else _[k]=0,b[k]=0,v[k]=0}const I=new Nr({width:d,height:m,pixels:[b,v],mask:_});return I.updateStatistics(),I}class s3e{constructor(t,r){this._storage=new oX,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r){this._storage.put(t,r,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new s3e(1e3);new xt([128,128,128]);const o3e=new xt("white");function E0(e,t){if(!e)return null;let r=null;return $g(e)?r=a3e(e):h4(e)&&(r=e.color?new xt(e.color):null),r?nx(r,t):null}function a3e(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(i=>{i.type==="object"&&i.resource.href!=null||(r=i.type==="water"?i.color:de(i.material)?i.material.color:null)}),r?new xt(r):null}function nx(e,t){if(t==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new xt(r)}function l3e(e,t,r){const i=e.symbolLayers;if(!i)return;const n=s=>{const o=de(s)?s:null;return nx(t=t||o||r!=null&&o3e,r)};i.forEach(s=>{if(s.type!=="object"||s.resource.href==null||t)if(s.type==="water")s.color=n(s.color);else{const o=de(s.material)?s.material.color:null,a=n(o);Ne(s.material)?s.material=new qa({color:a}):s.material.color=a,r!=null&&"outline"in s&&de(s.outline)&&de(s.outline.color)&&(s.outline.color=nx(s.outline.color,r))}})}function u3e(e,t,r){(t=t||e.color)&&(e.color=nx(t,r)),r!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=nx(e.outline.color,r))}function rC(e,t,r){e&&(t||r!=null)&&(t&&(t=new xt(t)),$g(e)?l3e(e,t,r):h4(e)&&u3e(e,t,r))}async function c3e(e,t){const r=e.symbolLayers;r&&await Xfe(r,async i=>h3e(i,t))}async function h3e(e,t){switch(e.type){case"extrude":d3e(e,t);break;case"icon":case"line":case"text":p3e(e,t);break;case"path":m3e(e,t);break;case"object":await f3e(e,t)}}function p3e(e,t){const r=Ree(t);de(r)&&(e.size=r)}function Ree(e){for(const t of e)if(typeof t=="number")return t;return null}function d3e(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function f3e(e,t){const{resourceSize:r,symbolSize:i}=await y3e(e),n=Pee(t,r,i);e.width=u2(t[0],i[0],r[0],n),e.depth=u2(t[1],i[1],r[1],n),e.height=u2(t[2],i[2],r[2],n)}function m3e(e,t){const r=Pee(t,tY,[e.width,void 0,e.height]);e.width=u2(t[0],e.width,1,r),e.height=u2(t[2],e.height,1,r)}function Pee(e,t,r){for(let i=0;i<3;i++){const n=e[i];switch(n){case"symbol-value":return r[i]!=null?r[i]/t[i]:1;case"proportional":break;default:if(n&&t[i])return n/t[i]}}return 1}async function y3e(e){const t=await Be(()=>import("./symbolLayerUtils.75550e09.js"),["assets/symbolLayerUtils.75550e09.js","assets/preload-helper.387dac8f.js"]),r=await t.computeObjectLayerResourceSize(e,10),{width:i,height:n,depth:s}=e,o=[i,s,n];let a=1;for(let l=0;l<3;l++)if(o[l]!=null){a=o[l]/r[l];break}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function u2(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t??r;default:return e}}function g3e(e,t){const r=Ree(t);if(!Ne(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function Lee(e,t){if(e&&t)return $g(e)?c3e(e,t):void(h4(e)&&g3e(e,t))}function Nee(e,t,r){if(e&&t!=null)if($g(e)){const i=e.symbolLayers;i&&i.forEach(n=>{if(n&&n.type==="object")switch(r){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else h4(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}var v8;const iB=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),Z3=new Xt({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),K3=new Xt({flow_from:"flow-from",flow_to:"flow-to"});let $s=v8=class extends lm(Je){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return iB.has(e)?Ra.fromJSON(e):null}readOutputUnit(e,t){return iB.has(e)?Ra.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new aS({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new y4({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new v8({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Pe(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,r=[]){const i=new Array,n=L4(this.inputUnit,this.outputUnit),s=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?g8(e.pixelBlock,"vector-uv",s,n):KSe(e.pixelBlock,"vector-magdir",n);if(Ne(o))return i;const a=e.extent,l=o.mask&&o.mask.length>0;let u=0;const c=(a.xmax-a.xmin)/o.width,p=(a.ymax-a.ymin)/o.height;for(let d=0;d<o.height;d++)for(let m=0;m<o.width;m++,u++){let g=new At({x:a.xmin+m*c+c/2,y:a.ymax-d*p-p/2,spatialReference:a.spatialReference});g=(await Eb(g))[0];const b=r.some(v=>v.intersects(g));if((!l||o.mask[u])&&!b){const v={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},_=new fs({geometry:{type:"point",x:g.x,y:g.y,spatialReference:a.spatialReference},attributes:v});_.symbol=this._getVisualVariablesAppliedSymbol(_),i.push(_)}}return i}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new Ul({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new la({width:0}),size:20,color:e||new xt([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;let t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();const r=this.sizeVariables,i=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach(n=>Lee(t,rX([n],e))),i&&i.length){const n=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(s=>Nee(t,ZN(s,e),s.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new yb(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new xt([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new xt([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new xt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.28084;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new xt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=2.23694;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new xt([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.6;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new xt([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new xt([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new xt([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const i=this.sizeVariables[0].minDataValue,n=this.sizeVariables[0].maxDataValue;if(i&&n){const s=(n-i)/5;t=Array.from(Array(6).keys()).map(o=>i+s*o)}}const r=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createSimpleScalarRenderer(){return{defaultSymbol:_f.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(n=>5*n),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=_f.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),i=e.map((n,s)=>{let o;if(s!==e.length-1)if(s===0)o={minValue:n,maxValue:e[s+1],symbol:r};else{const a=_f.fromJSON({type:"esriPMS",imageData:t[s].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:n,maxValue:e[s+1],symbol:a}}return new _v(o)});return{defaultSymbol:r,classBreakInfos:i}}_getClassBreaks(e,t){return t.map((r,i)=>new _v({minValue:e[i],maxValue:e[i+1],symbol:this._getDefaultSymbol(new xt(r))}))}};h([f({type:String,json:{write:!0}})],$s.prototype,"attributeField",void 0),h([f({type:K3.apiValues,json:{type:K3.jsonValues,read:{reader:K3.read},write:{writer:K3.write}}})],$s.prototype,"flowRepresentation",void 0),h([f({type:["geographic","arithmetic"],json:{write:!0}})],$s.prototype,"rotationType",void 0),h([f({type:Z3.apiValues,json:{type:Z3.jsonValues,read:{reader:Z3.read},write:{writer:Z3.write}}})],$s.prototype,"style",void 0),h([f({json:{write:!0}})],$s.prototype,"symbolTileSize",void 0),h([f({type:Ra.apiValues,json:{type:Ra.jsonValues,write:{writer:Ra.write}}})],$s.prototype,"inputUnit",void 0),h([Ke("inputUnit")],$s.prototype,"readInputUnit",null),h([f({type:Ra.apiValues,json:{type:Ra.jsonValues,read:{reader:Ra.read},write:{writer:Ra.write}}})],$s.prototype,"outputUnit",void 0),h([Ke("outputUnit")],$s.prototype,"readOutputUnit",null),h([Ft({vectorField:"vector-field"})],$s.prototype,"type",void 0),h([f({type:yb})],$s.prototype,"styleRenderer",null),h([f({type:aS})],$s.prototype,"sizeVariables",null),h([f({type:y4})],$s.prototype,"rotationVariables",null),$s=v8=h([me("esri.renderers.VectorFieldRenderer")],$s);const O9=$s,b8={key:"type",base:null,typeMap:{"unique-value":vb,"class-breaks":yb,"raster-colormap":A9,"raster-stretch":$9,"vector-field":O9,"raster-shaded-relief":Iee,flow:dee}},w8={...b8,typeMap:{...b8.typeMap}};delete w8.typeMap["vector-field"],delete w8.typeMap.flow;const v3e={uniqueValue:vb,classBreaks:yb,rasterStretch:$9,rasterColormap:A9,vectorField:O9,rasterShadedRelief:Iee,flowRenderer:dee};function b3e(e){return e&&v3e[e.type]||null}function w3e(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const i=e.authoringInfo||{classificationMethod:""};i.classificationMethod=e.classificationMethod,e.authoringInfo=i}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const r=b3e(e);if(r){const i=new r;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new zs("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var _8;let oy=_8=class extends Je{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new _8({variableName:this.variableName,dimensionName:this.dimensionName,values:Pe(this.values),isSlice:this.isSlice})}};h([f({type:String,json:{write:!0}})],oy.prototype,"variableName",void 0),h([f({type:String,json:{write:!0}})],oy.prototype,"dimensionName",void 0),h([f({type:Xb.array(Xb.oneOf([Xb.native(Number),Xb.array(Xb.native(Number))])),json:{write:!0}})],oy.prototype,"values",void 0),h([f({type:Boolean,json:{write:!0}})],oy.prototype,"isSlice",void 0),oy=_8=h([me("esri.layers.support.DimensionalDefinition")],oy);const R9=oy;var x8;const KM=new Set(["raster","raster2","dem","fillraster"]),YM=new Set(["rasters"]),nB=e=>e&&e.rasterFunction?Ro.fromJSON(e):e,iC=e=>e&&e instanceof Ro?e.toJSON():e,S8=e=>e?.functionName&&!e.declaredClass,sB=e=>S8(e)?new Ro(e):e,_3e=e=>{if(e==null)return null;e=Pe(e);const t={};for(const r of Object.keys(e))KM.has(r.toLowerCase())?t[r]=nB(e[r]):YM.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(nB):t[r]=e[r];return t};let Ro=x8=class extends Je{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.rasterFunctionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(r=>KM.has(r.toLowerCase())&&S8(e[r]))||t.some(r=>YM.has(r.toLowerCase())&&Array.isArray(e[r])&&e[r].some(i=>S8(i)))){e=Pe(e);for(const r of t)KM.has(r.toLowerCase())?e[r]=sB(e[r]):YM.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map(i=>sB(i)))}}this._set("functionArguments",e)}readFunctionArguments(e){return _3e(e)}writeFunctionArguments(e,t,r){const i={};for(const n of Object.keys(e))KM.has(n.toLowerCase())?i[n]=iC(e[n]):YM.has(n.toLowerCase())&&Array.isArray(e[n])?i[n]=e[n].map(iC):i[n]=iC(e[n]);t[r]=i}readFunctionName(e,t){const r=t.rasterFunctionInfos;return t.name||(r&&r.length&&r[0].name!=="None"?r[0].name:t.rasterFunctionDefinition?t.rasterFunctionDefinition.name:t.rasterFunction)}clone(){return new x8({functionName:this.functionName,functionArguments:Pe(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:Pe(this.rasterFunctionDefinition)})}};h([f({json:{type:Object,name:"rasterFunctionArguments"}})],Ro.prototype,"functionArguments",null),h([Ke("functionArguments")],Ro.prototype,"readFunctionArguments",null),h([et("functionArguments")],Ro.prototype,"writeFunctionArguments",null),h([f({json:{type:String,write:{target:"rasterFunction"}}})],Ro.prototype,"functionName",void 0),h([Ke("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],Ro.prototype,"readFunctionName",null),h([Ft({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),f({json:{default:"unknown"}})],Ro.prototype,"outputPixelType",void 0),h([f({type:String,json:{read:!0,write:!0}})],Ro.prototype,"variableName",void 0),h([f({type:Object,json:{name:"rasterFunctionDefinition"}})],Ro.prototype,"rasterFunctionDefinition",void 0),Ro=x8=h([me("esri.layers.support.RasterFunction")],Ro);const Wr=Ro,x3e={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},S3e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},E3e={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},M3e=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function Dee(e){return M3e.has(e.type)}function oB(e,t){if(!e||!t)return Pe(e||t);const r=Pe(e);if(t.rasterFunctionDefinition){const i=t.rasterFunctionDefinition;(i.thumbnail||i.thumbnailEx)&&(i.thumbnail=i.thumbnailEx=null),Fee(r.rasterFunctionDefinition.arguments,t)}else t.functionName.toLowerCase()!=="none"&&(jee(r.functionArguments).Raster=t);return r}function Fee(e,t){for(const r in e)r.toLowerCase()==="raster"&&(e[r].type==="RasterFunctionVariable"?(e[r]=t.rasterFunctionDefinition,e[r].type="RasterFunctionTemplate"):e[r].type==="RasterFunctionTemplate"&&Fee(e[r].arguments,t))}function ch(e){const t=Pe(x3e[e.functionName+"Function"]),r=e.functionArguments;for(const i in r)i.toLowerCase()==="raster"?(t.arguments[i]=ch(r[i]),t.arguments[i].type="RasterFunctionTemplate"):i.toLowerCase()==="colormap"?(t.arguments[i].value=P3e(r[i]),t.arguments.ColorSchemeType.value=0):t.arguments[i].value=r[i];return t}function I3e(e,t){switch(t=t||{},e.type){case"raster-stretch":return $3e(e,t);case"class-breaks":return C3e(e,t);case"unique-value":return k3e(e,t);case"raster-colormap":return O3e(e,t);case"vector-field":return T3e(e,t);case"raster-shaded-relief":return A3e(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function jee(e){const t=e.Raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?jee(t.functionArguments):e}const hw={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function T3e(e,t){const r=new Wr;r.functionName="VectorFieldRenderer";const{dataType:i,bandProperties:n}=t,s=i==="vector-uv";let o,a;n&&n.length===2&&(o=n.map(d=>d.BandName.toLowerCase()).indexOf("magnitude"),a=n.map(d=>d.BandName.toLowerCase()).indexOf("direction")),o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,c=e.visualVariables?e.visualVariables.find(d=>d.field==="Magnitude"):new aS,p={magnitudeBandID:o,directionBandID:a,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:E3e[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};return r.functionArguments=p,t.convertToRFT?new Wr({rasterFunctionDefinition:ch(r)}):r}function A3e(e,t){const r=t.convertToRFT;if(t.dataType!=="elevation")return new Wr;const i=new Wr;i.functionName="Hillshade";const n=e.hillshadeType==="traditional"?0:1,s=e.scalingType==="none"?1:3,o={HillshadeType:n,SlopeType:s,ZFactor:e.zFactor};return n===0&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),s===3&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),i.functionArguments=o,i.variableName="Raster",e.colorRamp&&(i.functionName="ShadedRelief",r?o.ColorRamp=Mee(e.colorRamp):o.Colormap=Cg(e.colorRamp,256)),r?new Wr({rasterFunctionDefinition:ch(i)}):i}function $3e(e,t){const r=t.convertToRFT,i=new Wr;i.functionName="Stretch";const n=hw[a2.toJSON(e.stretchType)],s="u8",o={StretchType:n,Statistics:R3e(e.statistics),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(o.Min=e.outputMin),e.outputMax!=null&&(o.Max=e.outputMax),n===hw.standardDeviation?(o.NumberOfStandardDeviations=e.numberOfStandardDeviations,i.outputPixelType=s):n===hw.percentClip?(o.MinPercent=e.minPercent,o.MaxPercent=e.maxPercent,i.outputPixelType=s):n===hw.minMax?i.outputPixelType=s:n===hw.sigmoid&&(o.SigmoidStrengthLevel=e.sigmoidStrengthLevel),i.functionArguments=o,i.variableName="Raster",e.colorRamp){const a=e.colorRamp,l=new Wr;if(r)l.functionArguments={ColorRamp:Mee(a)};else{const u=See(a);if(u)l.functionArguments={colorRamp:u};else if(!t.convertColorRampToColormap||a.type!=="algorithmic"&&a.type!=="multipart"){const c=e.colorRamp.toJSON();c.type==="algorithmic"?c.algorithm=c.algorithm||"esriCIELabAlgorithm":c.type==="multipart"&&c.colorRamps?.length&&c.colorRamps.forEach(p=>p.algorithm=p.algorithm||"esriCIELabAlgorithm"),l.functionArguments={colorRamp:c}}else l.functionArguments={Colormap:Cg(a,256)}}return l.variableName="Raster",l.functionName="Colormap",l.functionArguments.Raster=i,r?new Wr({rasterFunctionDefinition:ch(l)}):l}return r?new Wr({rasterFunctionDefinition:ch(i)}):i}function C3e(e,t){const r=[],i=[],n=[],s=[],{pixelType:a,rasterAttributeTable:l}=t,u=l&&l.features,c=Uee(l);if(u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((v,_)=>{const E=v.symbol.color;let I;E.a&&u.forEach(x=>{I=x.attributes[e.field],(I>=v.minValue&&I<v.maxValue||_===e.classBreakInfos.length-1&&I>=v.minValue)&&s.push([x.attributes[c],E.r,E.g,E.b])})});const g=a?wI(s,a):s,b=new Wr;return b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=g,b.variableName="Raster",t.convertToRFT?new Wr({rasterFunctionDefinition:ch(b)}):b}e.classBreakInfos.forEach((g,b)=>{const v=g.symbol&&g.symbol.color;v.a?(b===0?r.push(g.minValue,g.maxValue+1e-6):r.push(g.minValue+1e-6,g.maxValue+1e-6),i.push(b),s.push([b,v.r,v.g,v.b])):n.push(g.minValue,g.maxValue)});const p=a?wI(s,a):s,d=new Wr;d.functionName="Remap",d.functionArguments={InputRanges:r,OutputValues:i,NoDataRanges:n},d.variableName="Raster";const m=new Wr;return m.functionName="Colormap",m.functionArguments={Colormap:p,Raster:d},t.convertToRFT?new Wr({rasterFunctionDefinition:ch(m)}):m}function wI(e,t){const r=S3e[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function Uee(e){if(!e)return;const{fields:t}=e,r=t&&t.find(i=>i&&i.name&&i.name.toLowerCase()==="value");return r&&r.name}function k3e(e,t){const r=[],{pixelType:i,rasterAttributeTable:n}=t,s=n&&n.features,o=Uee(n),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(s){const p=new Map;l.forEach(m=>{const g=m.value,b=m.symbol.color?.toRgb();g!=null&&b&&p.set(String(g),b)});const d=e.field;s.forEach(({attributes:m})=>{const g=String(m[d]),b=m[o];if(p.has(g)){const v=p.get(g);r.push([b,...v])}else a&&r.push([b,...a])})}else for(let p=0;p<l.length;p++){const d=l[p],m=d.symbol.color,g=+d.value;if(m?.a){if(isNaN(g))return null;r.push([g,m.r,m.g,m.b])}}const u=i&&r.length>0?wI(r,i):r,c=new Wr;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",t.convertToRFT?new Wr({rasterFunctionDefinition:ch(c)}):c}function O3e(e,t){const r=e.extractColormap();if(!r||r.length===0)return;const{pixelType:i}=t,n=i?wI(r,i):r,s=new Wr;return s.functionName="Colormap",s.functionArguments={},s.functionArguments.Colormap=n,t.convertToRFT?new Wr({rasterFunctionDefinition:ch(s)}):s}function R3e(e){const t=[];return e.forEach(r=>{const i=r;if(Array.isArray(i))t.push(i);else{if(i.min==null||i.max==null)return;const n=[i.min,i.max,i.avg||0,i.stddev||0];t.push(n)}}),t}function P3e(e){const t=[],r=[];return e.forEach(i=>{t.push(i[0]),r.push(RSe([...i.slice(1),255]))}),{type:"RasterColormap",values:t,colors:r}}var E8;const c2=en()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),M8=en()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function L3e(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return M8.fromJSON(t)}let Hn=E8=class extends Je{constructor(e){super(e),this.ascending=!0,this.itemRenderingRule=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}readMethod(e,t){return L3e(t.mosaicMethod||t.defaultMosaicMethod)}readOperation(e,t){const r=t.mosaicOperation,i=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),n=r||(i?c2.toJSON(i):null);return c2.fromJSON(n)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new E8({ascending:this.ascending,itemRenderingRule:Pe(this.itemRenderingRule),lockRasterIds:Pe(this.lockRasterIds),method:this.method,multidimensionalDefinition:Pe(this.multidimensionalDefinition),objectIds:Pe(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Pe(this.viewpoint),where:this.where})}};h([f({type:Boolean,json:{write:!0}})],Hn.prototype,"ascending",void 0),h([Ke("ascending",["ascending","sortAscending"])],Hn.prototype,"readAscending",null),h([f({type:Wr,json:{write:!0}})],Hn.prototype,"itemRenderingRule",void 0),h([f({type:[fr],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],Hn.prototype,"lockRasterIds",void 0),h([f({type:String,json:{type:M8.jsonValues,write:{target:"mosaicMethod",writer:M8.write}}})],Hn.prototype,"method",void 0),h([Ke("method",["mosaicMethod","defaultMosaicMethod"])],Hn.prototype,"readMethod",null),h([f({type:[R9],json:{write:!0}})],Hn.prototype,"multidimensionalDefinition",void 0),h([f({type:[fr],json:{name:"fids",write:!0}})],Hn.prototype,"objectIds",void 0),h([f({json:{type:c2.jsonValues,read:{reader:c2.read},write:{target:"mosaicOperation",writer:c2.write}}})],Hn.prototype,"operation",void 0),h([Ke("operation",["mosaicOperation","mosaicOperator"])],Hn.prototype,"readOperation",null),h([f({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],Hn.prototype,"sortField",void 0),h([f({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],Hn.prototype,"sortValue",void 0),h([ur("sortValue")],Hn.prototype,"castSortValue",null),h([f({type:At,json:{write:!0}})],Hn.prototype,"viewpoint",void 0),h([f({type:String,json:{write:!0}})],Hn.prototype,"where",void 0),Hn=E8=h([me("esri.layers.support.MosaicRule")],Hn);const Al=Hn,Sf=en()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),h2=en()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});let Wi=class extends Je{constructor(){super(...arguments),this.layer=null,this.adjustAspectRatio=void 0,this.bandIds=void 0,this.compression=void 0,this.compressionQuality=void 0,this.compressionTolerance=.01,this.interpolation=null,this.noData=null,this.noDataInterpretation=void 0,this.pixelType=void 0,this.lercVersion=2}writeAdjustAspectRatio(e,t,r){this.layer.version<10.3||(t[r]=e)}writeCompressionQuality(e,t,r){this.format&&this.format.toLowerCase().includes("jpg")&&e!=null&&(t[r]=e)}writeCompressionTolerance(e,t,r){this.format==="lerc"&&e!=null&&(t[r]=e)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}writeLercVersion(e,t,r){this.format==="lerc"&&this.layer.version>=10.5&&(t[r]=e)}get version(){const e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("renderingRule"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("renderer"),e.commitProperty("definitionExpression"),(this._get("version")||0)+1}set version(e){this._set("version",e)}get mosaicRule(){const e=this.layer;let t=e.mosaicRule;const r=e.definitionExpression;return t?r&&r!==t.where&&(t=t.clone(),t.where=r):r&&(t=new Al({where:r})),t}get renderingRule(){const e=this.layer;let t=e.renderingRule;const r=e.pixelFilter,i=!e.format||e.format.includes("jpg")||e.format.includes("png");return t=this._addResampleRasterFunction(t),i&&!r&&e.renderer?.type!=="vector-field"&&(t=this.combineRendererWithRenderingRule()),t}combineRendererWithRenderingRule(){const e=this.layer,{rasterInfo:t,renderingRule:r,renderer:i}=e;return!i||!Dee(i)?r:oB(I3e(i,{rasterAttributeTable:t.attributeTable,pixelType:t.pixelType,dataType:t.dataType,bandProperties:t.keyProperties?.BandProperties,convertColorRampToColormap:e.version<10.6,convertToRFT:!!r?.rasterFunctionDefinition}),r)}_addResampleRasterFunction(e){if(this.layer.renderer?.type!=="vector-field"||e?.functionName==="Resample")return e;const t=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10;let r=new Wr({functionName:"Resample",functionArguments:{ResamplingType:t,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return r=e?.rasterFunctionDefinition?new Wr({rasterFunctionDefinition:ch(r)}):r,oB(r,e)}};h([f()],Wi.prototype,"layer",void 0),h([f({json:{write:!0}})],Wi.prototype,"adjustAspectRatio",void 0),h([et("adjustAspectRatio")],Wi.prototype,"writeAdjustAspectRatio",null),h([f({json:{write:!0}}),It("layer.bandIds")],Wi.prototype,"bandIds",void 0),h([f({json:{write:!0}})],Wi.prototype,"compression",void 0),h([f({json:{write:!0}}),It("layer.compressionQuality")],Wi.prototype,"compressionQuality",void 0),h([et("compressionQuality")],Wi.prototype,"writeCompressionQuality",null),h([f({json:{write:!0}}),It("layer.compressionTolerance")],Wi.prototype,"compressionTolerance",void 0),h([et("compressionTolerance")],Wi.prototype,"writeCompressionTolerance",null),h([f({json:{write:!0}})],Wi.prototype,"format",null),h([f({type:String,json:{read:{reader:Sf.read},write:{writer:Sf.write}}}),It("layer.interpolation")],Wi.prototype,"interpolation",void 0),h([f({json:{write:!0}}),It("layer.noData")],Wi.prototype,"noData",void 0),h([f({type:String,json:{read:{reader:h2.read},write:{writer:h2.write}}}),It("layer.noDataInterpretation")],Wi.prototype,"noDataInterpretation",void 0),h([f({json:{write:!0}})],Wi.prototype,"pixelType",void 0),h([f({json:{write:!0}})],Wi.prototype,"lercVersion",void 0),h([et("lercVersion")],Wi.prototype,"writeLercVersion",null),h([f({type:Number})],Wi.prototype,"version",null),h([f({json:{write:!0}})],Wi.prototype,"mosaicRule",null),h([f({json:{write:!0}})],Wi.prototype,"renderingRule",null),Wi=h([me("esri.layers.mixins.ExportImageServiceParameters")],Wi);let ns=class extends Je{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}};h([f({type:Number,json:{write:!0}})],ns.prototype,"blockWidth",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"blockHeight",void 0),h([f({type:String,json:{write:!0}})],ns.prototype,"compression",void 0),h([f({type:At,json:{write:!0}})],ns.prototype,"origin",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"firstPyramidLevel",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"maximumPyramidLevel",void 0),h([f({json:{write:!0}})],ns.prototype,"pyramidResolutions",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"pyramidScalingFactor",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"pyramidBlockWidth",void 0),h([f({type:Number,json:{write:!0}})],ns.prototype,"pyramidBlockHeight",void 0),h([f({type:Boolean,json:{write:!0}})],ns.prototype,"isVirtualTileInfo",void 0),h([f({json:{write:!0}})],ns.prototype,"tileInfo",void 0),h([f()],ns.prototype,"transposeInfo",void 0),h([f()],ns.prototype,"blockBoundary",void 0),ns=h([me("esri.layers.support.RasterStorageInfo")],ns);const Vee=ns;let Mi=class extends Je{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(Ne(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}};h([f({json:{write:!0}})],Mi.prototype,"attributeTable",void 0),h([f({json:{write:!0}})],Mi.prototype,"bandCount",void 0),h([f({json:{write:!0}})],Mi.prototype,"colormap",void 0),h([f({type:String,readOnly:!0})],Mi.prototype,"dataType",null),h([f({type:qt,json:{write:!0}})],Mi.prototype,"extent",void 0),h([f({type:qt,json:{write:!0}})],Mi.prototype,"nativeExtent",null),h([f({json:{write:!0}})],Mi.prototype,"nativePixelSize",null),h([f({json:{write:!0}})],Mi.prototype,"format",void 0),h([f({json:{write:!0}})],Mi.prototype,"height",void 0),h([f({json:{write:!0}})],Mi.prototype,"width",void 0),h([f({json:{write:!0}})],Mi.prototype,"hasMultidimensionalTranspose",null),h([f({json:{write:!0}})],Mi.prototype,"histograms",void 0),h([f({json:{write:!0}})],Mi.prototype,"keyProperties",void 0),h([f({json:{write:!0}})],Mi.prototype,"multidimensionalInfo",void 0),h([f({json:{write:!0}})],Mi.prototype,"noDataValue",void 0),h([f({json:{write:!0}})],Mi.prototype,"pixelSize",void 0),h([f({json:{write:!0}})],Mi.prototype,"pixelType",void 0),h([f()],Mi.prototype,"isPseudoSpatialReference",void 0),h([f({type:wt,json:{write:!0}})],Mi.prototype,"spatialReference",void 0),h([f({json:{write:!0}})],Mi.prototype,"statistics",void 0),h([f({type:Vee,json:{write:!0}})],Mi.prototype,"storageInfo",void 0),h([f({json:{write:!0}})],Mi.prototype,"transform",void 0),Mi=h([me("esri.layers.support.RasterInfo")],Mi);const mS=Mi;class N3e{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await LX("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},r);return i?new Nr(i):null}async decode(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("decode",t,r);return i?new Nr(i):null}async symbolize(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i={extent:t.extent&&t.extent.toJSON(),pixelBlock:de(t.pixelBlock)&&t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},n=await this._workerThread.invoke("symbolize",i,r);return n?new Nr(n):null}async updateSymbolizer(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i=t?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:i},r))}async stretch(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},n=await this._workerThread.invoke("stretch",i,r);return n?new Nr(n):null}async split(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},n=await this._workerThread.invoke("split",i,r);return n&&n.forEach((s,o)=>{n.set(o,s?Nr.fromJSON(s):null)}),n}async estimateStatisticsHistograms(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",i,r)}async mosaicAndTransform(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");if(!t?.srcPixelBlocks?.length)return{pixelBlock:null};const i={...t,srcPixelBlocks:t.srcPixelBlocks.map(s=>de(s)?s.toJSON():null)},n=await this._workerThread.invoke("mosaicAndTransform",i,r);return{pixelBlock:n.pixelBlock?new Nr(n.pixelBlock):null,localNorthDirections:n.localNorthDirections}}async createFlowMesh(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:n,simulationSettings:s}=t,o=await this._workerThread.invoke("createFlowMesh",{meshType:n,flowData:i,simulationSettings:s},{...r,transferList:[i.buffer,i.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(t,r){if(!this._workerThread)throw new $e("raster-jobhandler:no-connection","no available worker connection");const i=de(t.datumTransformation)?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,n=de(t.rasterTransform)?t.rasterTransform.toJSON():null,s={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:i,rasterTransform:n,isAdaptive:t.isAdaptive,includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",s,r)}}function Bee(e,t,r){const i=t.shift();if(r.length===0){const s=[];r.push({sliceId:-1,multidimensionalDefinition:s})}const n=r.length;for(let s=0;s<n;s++){const o=r.shift().multidimensionalDefinition;i.values.forEach(a=>{r.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:e,dimensionName:i.name,values:[a]}]})})}t.length&&Bee(e,t,r)}function wat(e,t){const r=[];let i=0;return(t?e.variables.filter(n=>n.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((n,s)=>n.name>s.name?1:-1)).forEach(n=>{const s=[],o=[...n.dimensions].sort((a,l)=>a.name>l.name?-1:1);Bee(n.name,o,s),s.forEach(a=>{r.push({...a,sliceId:i++})})}),r}function _at(e,t,r){let i=e;if(t&&(t=[...t].sort((n,s)=>n.dimensionName<s.dimensionName?-1:1)).forEach(({dimensionName:n,values:s,isSlice:o})=>{s.length&&(i=i.filter(a=>{const l=a.multidimensionalDefinition.find(c=>c.dimensionName===n);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof s[0]=="number"?s.includes(u):s.some(c=>c[0]<=u&&c[1]>=u):typeof s[0]=="number"?s.some(c=>u[0]<=c&&u[1]>=c):o?s.some(c=>c[0]===u[0]&&c[0]===u[1]):s.some(c=>c[0]>=u[0]&&c[0]<=u[1]||c[1]>=u[0]&&c[1]<=u[1]||c[0]<u[0]&&c[1]>u[1])}))}),i.length&&r&&de(r.start)&&de(r.end)){const n=r.start.getTime(),s=r.end.getTime(),o=i[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(i=i.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return n<=l&&s>=l}))}return i.map(n=>n.sliceId)}function D3e(e,t){const{multidimensionalInfo:r,keyProperties:i}=e;if(Ne(r))return null;const n=i?.DefaultVariable,{variables:s}=r,o=n?s.find(({name:a})=>a===n)??s[0]:s[0];return o.dimensions.map(a=>{const{values:l,extent:u}=a;let c=l?.[0]??u[0];return a.name.toLowerCase()==="stdz"&&!a.hasRanges&&Math.abs(u[1])<=Math.abs(u[0])&&(c=l?.length?a.values[l.length-1]:u[1]),new R9({variableName:o.name,dimensionName:a.name,values:[c],isSlice:!t||!!a.hasRanges})})}function xat(e){return!(Ne(e)||!e.length)&&e.some(t=>{if(t.values==null)return!0;const r=t.values.length;return r===0||r>1||!t.isSlice&&Array.isArray(t.values[0])})}function F3e(e,t){const{values:r}=t;if(r?.length)return Array.isArray(r[0])!==Array.isArray(e)?-1:Array.isArray(r[0])?r.findIndex(a=>a[0]===e[0]&&a[1]===e[1]):r.indexOf(e);const{extent:i}=t;if(Array.isArray(e)||e<i[0]||e>i[1])return-1;const n=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-i[0])/n);const s=i[0];let o=-1;switch(t.intervalUnit?.toLowerCase()||"seconds"){case"seconds":o=Math.round((e-s)/1e3/n);break;case"minutes":o=Math.round((e-s)/6e4/n);break;case"hours":o=Math.round((e-s)/36e5/n);break;case"days":o=Math.round((e-s)/864e5/n);break;case"months":{const a=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),l=new Date(s).getUTCMonth(),u=new Date(e).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/n);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/n)}return o}function aB(e){let t=e.values?.length;if(t)return t;const{extent:r,unit:i}=e,n=e.interval||1,s=r[1]-r[0];if(i!=="ISO8601")return Math.round(s/n);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(s/1e3/n);break;case"minutes":t=Math.round(s/6e4/n);break;case"hours":t=Math.round(s/36e5/n);break;case"days":t=Math.round(s/864e5/n);break;case"months":{const o=new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear(),a=new Date(r[1][0]).getUTCMonth(),l=new Date(r[1][1]).getUTCMonth();t=o===0?l-a+1:l+11-a+12*(o-1)+1}break;case"years":t=Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/n);break;case"decades":t=Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/10/n);break;default:t=0}return t}function Sat(e,t){let r=0;const i=e[0].variableName,n=[...t.variables].sort((s,o)=>s.name>o.name?1:-1);for(let s=0;s<n.length;s++){const o=n[s],a=[...o.dimensions].sort((c,p)=>c.name>p.name?-1:1);if(o.name!==i){r+=a.map(c=>aB(c)).reduce((c,p)=>c*p);continue}const l=a.map(c=>aB(c)),u=a.length;for(let c=0;c<u;c++){const p=e.find(m=>m.dimensionName===a[c].name);if(p==null)return null;const d=F3e(p.values[0],a[c]);if(d===-1)return null;l.shift(),r+=c===u-1?d:d*l.reduce((m,g)=>m*g)}break}return r}var nC,lB,uB,zee={exports:{}};lB=zee,nC=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var r=this.buffer,i=r?r.byteLength:0;if(t<i)return r;for(var n=512;n<t;)n<<=1;for(var s=new Uint8Array(n),o=0;o<i;++o)s[o]=r[o];return this.buffer=s},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var r=this.pos;if(t){this.ensureBuffer(r+t);for(var i=r+t;!this.eof&&this.bufferLength<i;)this.readBlock();var n=this.bufferLength;i>n&&(i=n)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(r,i)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,r,i){for(var n=t+r;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,r,i)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(uB=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function s(a){throw new Error(a)}function o(a){var l=0,u=a[l++],c=a[l++];u!=-1&&c!=-1||s("Invalid header in flate stream"),(15&u)!=8&&s("Unknown compression method in flate stream"),((u<<8)+c)%31!=0&&s("Bad FCHECK in flate stream"),32&c&&s("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,nC.call(this)}return o.prototype=Object.create(nC.prototype),o.prototype.getBits=function(a){for(var l,u=this.codeSize,c=this.codeBuf,p=this.bytes,d=this.bytesPos;u<a;)(l=p[d++])===void 0&&s("Bad encoding in flate stream"),c|=l<<u,u+=8;return l=c&(1<<a)-1,this.codeBuf=c>>a,this.codeSize=u-=a,this.bytesPos=d,l},o.prototype.getCode=function(a){for(var l=a[0],u=a[1],c=this.codeSize,p=this.codeBuf,d=this.bytes,m=this.bytesPos;c<u;){var g;(g=d[m++])===void 0&&s("Bad encoding in flate stream"),p|=g<<c,c+=8}var b=l[p&(1<<u)-1],v=b>>16,_=65535&b;return(c==0||c<v||v==0)&&s("Bad encoding in flate stream"),this.codeBuf=p>>v,this.codeSize=c-v,this.bytesPos=m,_},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,u=0,c=0;c<l;++c)a[c]>u&&(u=a[c]);for(var p=1<<u,d=new Uint32Array(p),m=1,g=0,b=2;m<=u;++m,g<<=1,b<<=1)for(var v=0;v<l;++v)if(a[v]==m){var _=0,E=g;for(c=0;c<m;++c)_=_<<1|1&E,E>>=1;for(c=_;c<p;c+=b)d[c]=m<<16|v;++g}return[d,u]},o.prototype.readBlock=function(){function a(q,fe,te,ge,ve){for(var Ee=q.getBits(te)+ge;Ee-- >0;)fe[b++]=ve}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var u,c;if(l==1)u=i,c=n;else if(l==2){for(var p=this.getBits(5)+257,d=this.getBits(5)+1,m=this.getBits(4)+4,g=Array(e.length),b=0;b<m;)g[e[b++]]=this.getBits(3);for(var v=this.generateHuffmanTable(g),_=0,E=(b=0,p+d),I=new Array(E);b<E;){var x=this.getCode(v);x==16?a(this,I,2,3,_):x==17?a(this,I,3,3,_=0):x==18?a(this,I,7,11,_=0):I[b++]=_=x}u=this.generateHuffmanTable(I.slice(0,p)),c=this.generateHuffmanTable(I.slice(p,E))}else s("Unknown block type in flate stream");for(var T=(L=this.buffer)?L.length:0,M=this.bufferLength;;){var k=this.getCode(u);if(k<256)M+1>=T&&(T=(L=this.ensureBuffer(M+1)).length),L[M++]=k;else{if(k==256)return void(this.bufferLength=M);var D=(k=t[k-=257])>>16;D>0&&(D=this.getBits(D)),_=(65535&k)+D,k=this.getCode(c),(D=(k=r[k])>>16)>0&&(D=this.getBits(D));var B=(65535&k)+D;M+_>=T&&(T=(L=this.ensureBuffer(M+_)).length);for(var G=0;G<_;++G,++M)L[M]=L[M-B]}}}else{var W,K=this.bytes,ne=this.bytesPos;(W=K[ne++])===void 0&&s("Bad block header in flate stream");var ye=W;(W=K[ne++])===void 0&&s("Bad block header in flate stream"),ye|=W<<8,(W=K[ne++])===void 0&&s("Bad block header in flate stream");var y=W;(W=K[ne++])===void 0&&s("Bad block header in flate stream"),(y|=W<<8)!=(65535&~ye)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var C=this.bufferLength,L=this.ensureBuffer(C+ye),F=C+ye;this.bufferLength=F;for(var ae=C;ae<F;++ae){if((W=K[ne++])===void 0){this.eof=!0;break}L[ae]=W}this.bytesPos=ne}},o}())!==void 0&&(lB.exports=uB);const kg=zee.exports;class P9{constructor(t){t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,r,i){if(!t||t.byteLength<10)throw new $e("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:n,height:s,format:o}=r;const{applyJpegMask:a}=r;if(a&&(!n||!s))throw new $e("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let c=null;o==="jpg"&&a&&(c=P9._getMask(t,{width:n,height:s}));const p=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),d=URL.createObjectURL(p),m=new Image;let g;m.src=d,m.onload=()=>{if(URL.revokeObjectURL(d),Za(i))return void u(wi());n=m.width,s=m.height,this.canvas?(this.canvas.width===n&&this.canvas.height===s||(this.canvas.width=n,this.canvas.height=s),this.ctx.clearRect(0,0,n,s)):(this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=s,this.ctx=this.canvas.getContext("2d")),this.ctx.drawImage(m,0,0);const b=this.ctx.getImageData(0,0,n,s);let v;if(g=b.data,r.renderOnCanvas){if(c)for(v=0;v<c.length;v++)c[v]?g[4*v+3]=255:g[4*v+3]=0;return this.ctx.putImageData(b,0,0),void l(null)}const _=n*s,E=new Uint8Array(_),I=new Uint8Array(_),x=new Uint8Array(_);if(c)for(v=0;v<_;v++)E[v]=g[4*v],I[v]=g[4*v+1],x[v]=g[4*v+2];else for(c=new Uint8Array(_),v=0;v<_;v++)E[v]=g[4*v],I[v]=g[4*v+1],x[v]=g[4*v+2],c[v]=g[4*v+3];l({width:n,height:s,pixels:[E,I,x],mask:c,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(d),u("cannot load image")}})}static _getMask(t,r){let i=null;try{const n=new Uint8Array(t),s=Math.ceil(n.length/2);let o=0;const a=n.length-2;for(o=s;o<a&&(n[o]!==255||n[o+1]!==217);o++);if(o+=2,o<n.length-1){const l=new kg(n.subarray(o)).getBytes();i=new Uint8Array(r.width*r.height);let u=0;for(let c=0;c<l.length;c++)for(let p=7;p>=0;p--)i[u++]=l[c]>>p&1}}catch{}return i}}var cB,hB,pB,Gee={exports:{}};cB=Gee,hB=function(){var e=function(){function t(r){this.message="JPEG error: "+r}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,i=799,n=3406,s=2276,o=1567,a=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function p(_,E){for(var I,x,T=0,M=[],k=16;k>0&&!_[k-1];)k--;M.push({children:[],index:0});var D,B=M[0];for(I=0;I<k;I++){for(x=0;x<_[I];x++){for((B=M.pop()).children[B.index]=E[T];B.index>0;)B=M.pop();for(B.index++,M.push(B);M.length<=I;)M.push(D={children:[],index:0}),B.children[B.index]=D.children,B=D;T++}I+1<k&&(M.push(D={children:[],index:0}),B.children[B.index]=D.children,B=D)}return M[0].children}function d(_,E,I){return 64*((_.blocksPerLine+1)*E+I)}function m(_,E,I,x,T,M,k,D,B){var G=I.mcusPerLine,W=I.progressive,K=E,ne=0,ye=0;function y(){if(ye>0)return ye--,ne>>ye&1;if((ne=_[E++])===255){var A=_[E++];if(A)throw new e("unexpected marker "+(ne<<8|A).toString(16))}return ye=7,ne>>>7}function C(A){for(var V=A;;){if(typeof(V=V[y()])=="number")return V;if(typeof V!="object")throw new e("invalid huffman sequence")}}function L(A){for(var V=0;A>0;)V=V<<1|y(),A--;return V}function F(A){if(A===1)return y()===1?1:-1;var V=L(A);return V>=1<<A-1?V:V+(-1<<A)+1}function ae(A,V){var H=C(A.huffmanTableDC),N=H===0?0:F(H);A.blockData[V]=A.pred+=N;for(var Y=1;Y<64;){var be=C(A.huffmanTableAC),_e=15&be,ue=be>>4;if(_e!==0){var De=t[Y+=ue];A.blockData[V+De]=F(_e),Y++}else{if(ue<15)break;Y+=16}}}function q(A,V){var H=C(A.huffmanTableDC),N=H===0?0:F(H)<<B;A.blockData[V]=A.pred+=N}function fe(A,V){A.blockData[V]|=y()<<B}var te=0;function ge(A,V){if(te>0)te--;else for(var H=M,N=k;H<=N;){var Y=C(A.huffmanTableAC),be=15&Y,_e=Y>>4;if(be!==0){var ue=t[H+=_e];A.blockData[V+ue]=F(be)*(1<<B),H++}else{if(_e<15){te=L(_e)+(1<<_e)-1;break}H+=16}}}var ve,Ee=0;function Ie(A,V){for(var H,N,Y=M,be=k,_e=0;Y<=be;){var ue=t[Y];switch(Ee){case 0:if(_e=(N=C(A.huffmanTableAC))>>4,(H=15&N)==0)_e<15?(te=L(_e)+(1<<_e),Ee=4):(_e=16,Ee=1);else{if(H!==1)throw new e("invalid ACn encoding");ve=F(H),Ee=_e?2:3}continue;case 1:case 2:A.blockData[V+ue]?A.blockData[V+ue]+=y()<<B:--_e==0&&(Ee=Ee===2?3:0);break;case 3:A.blockData[V+ue]?A.blockData[V+ue]+=y()<<B:(A.blockData[V+ue]=ve<<B,Ee=0);break;case 4:A.blockData[V+ue]&&(A.blockData[V+ue]+=y()<<B)}Y++}Ee===4&&--te==0&&(Ee=0)}function ke(A,V,H,N,Y){var be=H%G;V(A,d(A,(H/G|0)*A.v+N,be*A.h+Y))}function Te(A,V,H){V(A,d(A,H/A.blocksPerLine|0,H%A.blocksPerLine))}var Se,Ae,X,Z,le,z,ee=x.length;z=W?M===0?D===0?q:fe:D===0?ge:Ie:ae;var we,se,U,oe,re=0;for(se=ee===1?x[0].blocksPerLine*x[0].blocksPerColumn:G*I.mcusPerColumn;re<se;){var R=T?Math.min(se-re,T):se;for(Ae=0;Ae<ee;Ae++)x[Ae].pred=0;if(te=0,ee===1)for(Se=x[0],le=0;le<R;le++)Te(Se,z,re),re++;else for(le=0;le<R;le++){for(Ae=0;Ae<ee;Ae++)for(U=(Se=x[Ae]).h,oe=Se.v,X=0;X<oe;X++)for(Z=0;Z<U;Z++)ke(Se,z,re,X,Z);re++}ye=0,(we=v(_,E))&&we.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+we.invalid),E=we.offset);var $=we&&we.marker;if(!$||$<=65280)throw new e("marker was not found");if(!($>=65488&&$<=65495))break;E+=2}return(we=v(_,E))&&we.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+we.invalid),E=we.offset),E-K}function g(_,E,I){var x,T,M,k,D,B,G,W,K,ne,ye,y,C,L,F,ae,q,fe=_.quantizationTable,te=_.blockData;if(!fe)throw new e("missing required Quantization Table.");for(var ge=0;ge<64;ge+=8)K=te[E+ge],ne=te[E+ge+1],ye=te[E+ge+2],y=te[E+ge+3],C=te[E+ge+4],L=te[E+ge+5],F=te[E+ge+6],ae=te[E+ge+7],K*=fe[ge],(ne|ye|y|C|L|F|ae)!=0?(ne*=fe[ge+1],ye*=fe[ge+2],y*=fe[ge+3],C*=fe[ge+4],L*=fe[ge+5],F*=fe[ge+6],ae*=fe[ge+7],T=(x=(x=l*K+128>>8)+(T=l*C+128>>8)+1>>1)-T,q=(M=ye)*a+(k=F)*o+128>>8,M=M*o-k*a+128>>8,G=(D=(D=u*(ne-ae)+128>>8)+(G=L<<4)+1>>1)-G,B=(W=(W=u*(ne+ae)+128>>8)+(B=y<<4)+1>>1)-B,k=(x=x+(k=q)+1>>1)-k,M=(T=T+M+1>>1)-M,q=D*s+W*n+2048>>12,D=D*n-W*s+2048>>12,W=q,q=B*i+G*r+2048>>12,B=B*r-G*i+2048>>12,G=q,I[ge]=x+W,I[ge+7]=x-W,I[ge+1]=T+G,I[ge+6]=T-G,I[ge+2]=M+B,I[ge+5]=M-B,I[ge+3]=k+D,I[ge+4]=k-D):(q=l*K+512>>10,I[ge]=q,I[ge+1]=q,I[ge+2]=q,I[ge+3]=q,I[ge+4]=q,I[ge+5]=q,I[ge+6]=q,I[ge+7]=q);for(var ve=0;ve<8;++ve)K=I[ve],((ne=I[ve+8])|(ye=I[ve+16])|(y=I[ve+24])|(C=I[ve+32])|(L=I[ve+40])|(F=I[ve+48])|(ae=I[ve+56]))!=0?(T=(x=4112+((x=l*K+2048>>12)+(T=l*C+2048>>12)+1>>1))-T,q=(M=ye)*a+(k=F)*o+2048>>12,M=M*o-k*a+2048>>12,k=q,G=(D=(D=u*(ne-ae)+2048>>12)+(G=L)+1>>1)-G,B=(W=(W=u*(ne+ae)+2048>>12)+(B=y)+1>>1)-B,q=D*s+W*n+2048>>12,D=D*n-W*s+2048>>12,W=q,q=B*i+G*r+2048>>12,B=B*r-G*i+2048>>12,K=(K=(x=x+k+1>>1)+W)<16?0:K>=4080?255:K>>4,ne=(ne=(T=T+M+1>>1)+(G=q))<16?0:ne>=4080?255:ne>>4,ye=(ye=(M=T-M)+B)<16?0:ye>=4080?255:ye>>4,y=(y=(k=x-k)+D)<16?0:y>=4080?255:y>>4,C=(C=k-D)<16?0:C>=4080?255:C>>4,L=(L=M-B)<16?0:L>=4080?255:L>>4,F=(F=T-G)<16?0:F>=4080?255:F>>4,ae=(ae=x-W)<16?0:ae>=4080?255:ae>>4,te[E+ve]=K,te[E+ve+8]=ne,te[E+ve+16]=ye,te[E+ve+24]=y,te[E+ve+32]=C,te[E+ve+40]=L,te[E+ve+48]=F,te[E+ve+56]=ae):(q=(q=l*K+8192>>14)<-2040?0:q>=2024?255:q+2056>>4,te[E+ve]=q,te[E+ve+8]=q,te[E+ve+16]=q,te[E+ve+24]=q,te[E+ve+32]=q,te[E+ve+40]=q,te[E+ve+48]=q,te[E+ve+56]=q)}function b(_,E){for(var I=E.blocksPerLine,x=E.blocksPerColumn,T=new Int16Array(64),M=0;M<x;M++)for(var k=0;k<I;k++)g(E,d(E,M,k),T);return E.blockData}function v(_,E,I){function x(B){return _[B]<<8|_[B+1]}var T=_.length-1,M=I<E?I:E;if(E>=T)return null;var k=x(E);if(k>=65472&&k<=65534)return{invalid:null,marker:k,offset:E};for(var D=x(M);!(D>=65472&&D<=65534);){if(++M>=T)return null;D=x(M)}return{invalid:k.toString(16),marker:D,offset:M}}return c.prototype={parse:function(_){function E(){var A=_[k]<<8|_[k+1];return k+=2,A}function I(){var A=E(),V=k+A-2,H=v(_,V,k);H&&H.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+H.invalid),V=H.offset);var N=_.subarray(k,V);return k+=N.length,N}function x(A){for(var V=Math.ceil(A.samplesPerLine/8/A.maxH),H=Math.ceil(A.scanLines/8/A.maxV),N=0;N<A.components.length;N++){le=A.components[N];var Y=Math.ceil(Math.ceil(A.samplesPerLine/8)*le.h/A.maxH),be=Math.ceil(Math.ceil(A.scanLines/8)*le.v/A.maxV),_e=V*le.h,ue=H*le.v*64*(_e+1);le.blockData=new Int16Array(ue),le.blocksPerLine=Y,le.blocksPerColumn=be}A.mcusPerLine=V,A.mcusPerColumn=H}var T,M,k=0,D=null,B=null,G=[],W=[],K=[],ne=E();if(ne!==65496)throw new e("SOI not found");for(ne=E();ne!==65497;){var ye,y,C;switch(ne){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=I();ne===65504&&L[0]===74&&L[1]===70&&L[2]===73&&L[3]===70&&L[4]===0&&(D={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),ne===65518&&L[0]===65&&L[1]===100&&L[2]===111&&L[3]===98&&L[4]===101&&(B={version:L[5]<<8|L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var F=E()+k-2;k<F;){var ae=_[k++],q=new Uint16Array(64);if(ae>>4==0)for(y=0;y<64;y++)q[t[y]]=_[k++];else{if(ae>>4!=1)throw new e("DQT - invalid table spec");for(y=0;y<64;y++)q[t[y]]=E()}G[15&ae]=q}break;case 65472:case 65473:case 65474:if(T)throw new e("Only single frame JPEGs supported");E(),(T={}).extended=ne===65473,T.progressive=ne===65474,T.precision=_[k++],T.scanLines=E(),T.samplesPerLine=E(),T.components=[],T.componentIds={};var fe,te=_[k++],ge=0,ve=0;for(ye=0;ye<te;ye++){fe=_[k];var Ee=_[k+1]>>4,Ie=15&_[k+1];ge<Ee&&(ge=Ee),ve<Ie&&(ve=Ie);var ke=_[k+2];C=T.components.push({h:Ee,v:Ie,quantizationId:ke,quantizationTable:null}),T.componentIds[fe]=C-1,k+=3}T.maxH=ge,T.maxV=ve,x(T);break;case 65476:var Te=E();for(ye=2;ye<Te;){var Se=_[k++],Ae=new Uint8Array(16),X=0;for(y=0;y<16;y++,k++)X+=Ae[y]=_[k];var Z=new Uint8Array(X);for(y=0;y<X;y++,k++)Z[y]=_[k];ye+=17+X,(Se>>4==0?K:W)[15&Se]=p(Ae,Z)}break;case 65501:E(),M=E();break;case 65498:E();var le,z=_[k++],ee=[];for(ye=0;ye<z;ye++){var we=T.componentIds[_[k++]];le=T.components[we];var se=_[k++];le.huffmanTableDC=K[se>>4],le.huffmanTableAC=W[15&se],ee.push(le)}var U=_[k++],oe=_[k++],re=_[k++],R=m(_,k,T,ee,M,U,oe,re>>4,15&re);k+=R;break;case 65535:_[k]!==255&&k--;break;default:if(_[k-3]===255&&_[k-2]>=192&&_[k-2]<=254){k-=3;break}throw new e("unknown marker "+ne.toString(16))}ne=E()}for(this.width=T.samplesPerLine,this.height=T.scanLines,this.jfif=D,this.eof=k,this.adobe=B,this.components=[],ye=0;ye<T.components.length;ye++){var $=G[(le=T.components[ye]).quantizationId];$&&(le.quantizationTable=$),this.components.push({output:b(T,le),scaleX:le.h/T.maxH,scaleY:le.v/T.maxV,blocksPerLine:le.blocksPerLine,blocksPerColumn:le.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(_,E){var I,x,T,M,k,D,B,G,W,K,ne,ye=this.width/_,y=this.height/E,C=0,L=this.components.length,F=_*E*L,ae=new Uint8ClampedArray(F),q=new Uint32Array(_),fe=4294967288;for(B=0;B<L;B++){for(x=(I=this.components[B]).scaleX*ye,T=I.scaleY*y,C=B,ne=I.output,M=I.blocksPerLine+1<<3,k=0;k<_;k++)G=0|k*x,q[k]=(G&fe)<<3|7&G;for(D=0;D<E;D++)for(K=M*((G=0|D*T)&fe)|(7&G)<<3,k=0;k<_;k++)ae[C]=ne[K+q[k]],C+=L}var te=this.decodeTransform;if(te)for(B=0;B<F;)for(G=0,W=0;G<L;G++,B++,W+=2)ae[B]=(ae[B]*te[W]>>8)+te[W+1];return ae},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(_){for(var E,I,x,T=0,M=_.length;T<M;T+=3)E=_[T],I=_[T+1],x=_[T+2],_[T]=E-179.456+1.402*x,_[T+1]=E+135.459-.344*I-.714*x,_[T+2]=E-226.816+1.772*I;return _},_convertYcckToRgb:function(_){for(var E,I,x,T,M=0,k=0,D=_.length;k<D;k+=4)E=_[k],I=_[k+1],x=_[k+2],T=_[k+3],_[M++]=I*(-660635669420364e-19*I+.000437130475926232*x-54080610064599e-18*E+.00048449797120281*T-.154362151871126)-122.67195406894+x*(-.000957964378445773*x+.000817076911346625*E-.00477271405408747*T+1.53380253221734)+E*(.000961250184130688*E-.00266257332283933*T+.48357088451265)+T*(-.000336197177618394*T+.484791561490776),_[M++]=107.268039397724+I*(219927104525741e-19*I-.000640992018297945*x+.000659397001245577*E+.000426105652938837*T-.176491792462875)+x*(-.000778269941513683*x+.00130872261408275*E+.000770482631801132*T-.151051492775562)+E*(.00126935368114843*E-.00265090189010898*T+.25802910206845)+T*(-.000318913117588328*T-.213742400323665),_[M++]=I*(-.000570115196973677*I-263409051004589e-19*x+.0020741088115012*E-.00288260236853442*T+.814272968359295)-20.810012546947+x*(-153496057440975e-19*x-.000132689043961446*E+.000560833691242812*T-.195152027534049)+E*(.00174418132927582*E-.00255243321439347*T+.116935020465145)+T*(-.000343531996510555*T+.24165260232407);return _},_convertYcckToCmyk:function(_){for(var E,I,x,T=0,M=_.length;T<M;T+=4)E=_[T],I=_[T+1],x=_[T+2],_[T]=434.456-E-1.402*x,_[T+1]=119.541-E+.344*I+.714*x,_[T+2]=481.816-E-1.772*I;return _},_convertCmykToRgb:function(_){for(var E,I,x,T,M=0,k=1/255,D=0,B=_.length;D<B;D+=4)E=_[D]*k,I=_[D+1]*k,x=_[D+2]*k,T=_[D+3]*k,_[M++]=255+E*(-4.387332384609988*E+54.48615194189176*I+18.82290502165302*x+212.25662451639585*T-285.2331026137004)+I*(1.7149763477362134*I-5.6096736904047315*x-17.873870861415444*T-5.497006427196366)+x*(-2.5217340131683033*x-21.248923337353073*T+17.5119270841813)-T*(21.86122147463605*T+189.48180835922747),_[M++]=255+E*(8.841041422036149*E+60.118027045597366*I+6.871425592049007*x+31.159100130055922*T-79.2970844816548)+I*(-15.310361306967817*I+17.575251261109482*x+131.35250912493976*T-190.9453302588951)+x*(4.444339102852739*x+9.8632861493405*T-24.86741582555878)-T*(20.737325471181034*T+187.80453709719578),_[M++]=255+E*(.8842522430003296*E+8.078677503112928*I+30.89978309703729*x-.23883238689178934*T-14.183576799673286)+I*(10.49593273432072*I+63.02378494754052*x+50.606957656360734*T-112.23884253719248)+x*(.03296041114873217*x+115.60384449646641*T-193.58209356861505)-T*(22.33816807309886*T+180.12613974708367);return _},getData:function(_,E,I){if(this.numComponents>4)throw new e("Unsupported color mode");var x=this._getLinearizedBlockData(_,E);if(this.numComponents===1&&I){for(var T=x.length,M=new Uint8ClampedArray(3*T),k=0,D=0;D<T;D++){var B=x[D];M[k++]=B,M[k++]=B,M[k++]=B}return M}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(x);if(this.numComponents===4){if(this._isColorConversionNeeded())return I?this._convertYcckToRgb(x):this._convertYcckToCmyk(x);if(I)return this._convertCmykToRgb(x)}return x}},c}()},(pB=hB())!==void 0&&(cB.exports=pB);const _I=Gee.exports;class j3e{static decode(t,r=!1){const i=new Uint8Array(t),n=new _I;n.parse(i);const{width:s,height:o,numComponents:a,eof:l}=n,u=n.getData(s,o,!0);let c;const p=s*o;let d=0,m=0,g=0;if(!r&&l<i.length-1)try{const _=new kg(i.subarray(l)).getBytes();c=new Uint8Array(p);let E=0;for(d=0;d<_.length;d++)for(g=7;g>=0;g--)c[E++]=_[d]>>g&1}catch{}let b,v=null;if(a===1&&u.length===s*o)v=[u,u,u];else{for(v=[],d=0;d<3;d++)b=new Uint8Array(p),v.push(b);for(g=0,m=0;m<p;m++)for(d=0;d<3;d++)v[d][m]=u[g++]}return{width:s,height:o,pixels:v,mask:c}}}const qee=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let sC=null;function Hee(){return sC||(sC=Be(()=>import("./lerc-wasm.25bdf80a.js"),[]).then(e=>e.l).then(({default:e})=>e({locateFile:t=>$r(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{V3e(e)}),sC)}const xI={getBlobInfo:null,decode:null};function U3e(e){return 16+(e>>3<<3)}function id(e,t,r){r.set(e.slice(t,t+r.length))}function V3e(e){const{_malloc:t,_free:r,_lerc_getBlobInfo:i,_lerc_getDataRanges:n,_lerc_decode_4D:s,asm:o}=e;let a;const l=Object.values(o).find(c=>c&&"buffer"in c&&c.buffer===e.HEAPU8.buffer),u=c=>{const p=c.map(b=>U3e(b)),d=p.reduce((b,v)=>b+v),m=t(d);a=new Uint8Array(l.buffer);let g=p[0];p[0]=m;for(let b=1;b<p.length;b++){const v=p[b];p[b]=p[b-1]+g,g=v}return p};xI.getBlobInfo=c=>{const m=new Uint8Array(48),g=new Uint8Array(8*3),[b,v,_]=u([c.length,m.length,g.length]);a.set(c,b),a.set(m,v),a.set(g,_);let E=i(b,c.length,v,_,12,3);if(E)throw r(b),`lerc-getBlobInfo: error code is ${E}`;a=new Uint8Array(l.buffer),id(a,v,m),id(a,_,g);const I=new Uint32Array(m.buffer),x=new Float64Array(g.buffer),[T,M,k,D,B,G,W,K,ne,,ye]=I,y={version:T,dimCount:k,width:D,height:B,validPixelCount:W,bandCount:G,blobSize:K,maskCount:ne,dataType:M,minValue:x[0],maxValue:x[1],maxZerror:x[2],statistics:[],bandCountWithNoData:ye};if(ye)return y;if(k===1&&G===1)return r(b),y.statistics.push({minValue:x[0],maxValue:x[1]}),y;const C=k*G*8,L=new Uint8Array(C),F=new Uint8Array(C);let ae=b,q=0,fe=0,te=!1;if(a.byteLength<b+2*C?(r(b),te=!0,[ae,q,fe]=u([c.length,C,C]),a.set(c,ae)):[q,fe]=u([C,C]),a.set(L,q),a.set(F,fe),E=n(ae,c.length,k,G,q,fe),E)throw r(ae),te||r(q),`lerc-getDataRanges: error code is ${E}`;a=new Uint8Array(l.buffer),id(a,q,L),id(a,fe,F);const ge=new Float64Array(L.buffer),ve=new Float64Array(F.buffer),Ee=y.statistics;for(let Ie=0;Ie<G;Ie++)if(k>1){const ke=ge.slice(Ie*k,(Ie+1)*k),Te=ve.slice(Ie*k,(Ie+1)*k),Se=Math.min.apply(null,ke),Ae=Math.max.apply(null,Te);Ee.push({minValue:Se,maxValue:Ae,dimStats:{minValues:ke,maxValues:Te}})}else Ee.push({minValue:ge[Ie],maxValue:ve[Ie]});return r(ae),te||r(q),y},xI.decode=(c,p)=>{const{maskCount:d,dimCount:m,bandCount:g,width:b,height:v,dataType:_,bandCountWithNoData:E}=p,I=qee[_],x=b*v,T=new Uint8Array(x*g),M=x*m*g*I.size,k=new Uint8Array(M),D=new Uint8Array(g),B=new Uint8Array(8*g),[G,W,K,ne,ye]=u([c.length,T.length,k.length,D.length,B.length]);a.set(c,G),a.set(T,W),a.set(k,K),a.set(D,ne),a.set(B,ye);const y=s(G,c.length,d,W,m,b,v,g,_,K,ne,ye);if(y)throw r(G),`lerc-decode: error code is ${y}`;a=new Uint8Array(l.buffer),id(a,K,k),id(a,W,T);let C=null;if(E){id(a,ne,D),id(a,ye,B),C=[];const L=new Float64Array(B.buffer);for(let F=0;F<D.length;F++)C.push(D[F]?L[F]:null)}return r(G),{data:k,maskData:T,noDataValues:C}}}function B3e(e,t,r,i,n){if(r<2)return e;const s=new i(t*r);if(n)for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<r;l++,u+=t)s[u]=e[a++];else for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<r;l++,u+=t)s[a++]=e[u];return s}function Wee(e,t={}){const r=t.inputOffset??0,i=e instanceof Uint8Array?e.subarray(r):new Uint8Array(e,r),n=xI.getBlobInfo(i),{data:s,maskData:o}=xI.decode(i,n),{width:a,height:l,bandCount:u,dimCount:c,dataType:p,maskCount:d,statistics:m}=n,g=qee[p],b=new g.ctor(s.buffer),v=[],_=[],E=a*l,I=E*c;for(let D=0;D<u;D++){const B=b.subarray(D*I,(D+1)*I);if(t.returnPixelInterleavedDims)v.push(B);else{const G=B3e(B,E,c,g.ctor,!0);v.push(G)}_.push(o.subarray(D*I,(D+1)*I))}const x=d===0?null:d===1?_[0]:new Uint8Array(E);if(d>1){x.set(_[0]);for(let D=1;D<_.length;D++){const B=_[D];for(let G=0;G<E;G++)x[G]=x[G]&B[G]}}const{noDataValue:T}=t,M=T!=null&&g.range[0]<=T&&g.range[1]>=T;if(d>0&&M)for(let D=0;D<u;D++){const B=v[D],G=_[D]||x;for(let W=0;W<E;W++)G[W]===0&&(B[W]=T)}const k=d===u&&u>1?_:null;return{width:a,height:l,bandCount:u,pixelType:t.pixelType&&n.version===0?t.pixelType:g.pixelType,dimCount:c,statistics:m,pixels:v,mask:x,bandMasks:k}}function z3e(e,t,r,i=!0){if(t%4!=0||r%4!=0){const n=new ArrayBuffer(4*Math.ceil(r/4)),s=new Uint8Array(n),o=new Uint8Array(e,t,r);if(i)for(let a=0;a<s.length;a+=4)s[a]=o[a+3],s[a+1]=o[a+2],s[a+2]=o[a+1],s[a+3]=o[a];else s.set(o);return new Uint32Array(s.buffer)}if(i){const n=new Uint8Array(e,t,r),s=new Uint8Array(n.length);for(let o=0;o<s.length;o+=4)s[o]=n[o+3],s[o+1]=n[o+2],s[o+2]=n[o+1],s[o+3]=n[o];return new Uint32Array(s.buffer)}return new Uint32Array(e,t,r/4)}function dB(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function fB(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}const a1=new Set;function L9(e,t,r,i=!0){const n=z3e(e,t,r,i);let s=9,o=dB(),a=32,l=o.length,u=[],c=1,p=n[0],d=0;const m=n.length,g=8*(4*m-r),b=[];for(;p!=null;){if(a>=s)a-=s,d=p>>>32-s,p<<=s;else{d=p>>>32-a,p=n[c++];const _=s-a;a=32-_,d=(d<<_)+(p>>>a),p<<=_}if(d===257)break;if(d===256){s=9,o=dB(),l=o.length,u=[];continue}const v=o[d];if(v==null){if(d>o.length)throw"data integrity issue: code does not exist on code page";u.push(u[0]),o[l++]=u.slice(),fB(b,u)}else fB(b,v),u.push(v[0]),u.length>1&&(o[l++]=u.slice()),u=v.slice();if(a1.has(l)&&s++,a===0&&(p=n[c++],a=32),c>m||c===m&&a<=g)break}return new Uint8Array(b)}a1.add(511),a1.add(1023),a1.add(2047),a1.add(4095),a1.add(8191);const mB=(e,t)=>{const r=t.width*t.height,i=t.pixelType;return Math.floor(e.byteLength/(r*Jee(i)))},Jee=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},G3e=(e,t)=>{if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),i=new Uint8Array(t);let n=0,s=0,o=0,a=0;for(o=0;o<r.length-1;o++)for(s=r[o],a=7;a>=0;a--)i[n++]=s>>a&1;for(a=7;n<t-1;)s=r[r.length-1],i[n++]=s>>a&1,a--;return i};class q3e{static decode(t,r){const i=r.pixelType,n=[],s=r.width*r.height,o=mB(t,r),{bandIds:a,format:l}=r,u=a&&a.length||mB(t,r),c=t.byteLength-t.byteLength%(s*Jee(i)),p=new i(t,0,s*o);let d,m,g,b,v;if(l==="bip")for(d=0;d<u;d++){for(b=new i(s),v=a?a[d]:d,m=0;m<s;m++)b[m]=p[m*o+v];n.push(b)}else if(l==="bsq")for(d=0;d<u;d++)v=a?a[d]:d,n.push(p.subarray(v*s,(v+1)*s));return c<t.byteLength-1&&(g=G3e(t.slice(c),s)),{pixels:n,mask:g}}}function H3e(e,t){let r=0,i="",n=0,s=0;const o=e.length;for(;r<o;)s=e[r++],n=s>>4,n<8?n=1:n===15?(n=4,s=(7&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):n===14?(n=3,s=(15&s)<<12|(63&e[r++])<<6|63&e[r++]):(n=2,s=(31&s)<<6|63&e[r++]),(s!==0||t)&&(i+=String.fromCharCode(s));return i}const N9=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),W3e=(()=>{const e=[].concat(N9);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),J3e=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],Z3e=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),K3e=(e,t)=>{let r=(t||N9)[e];return r===void 0&&(r="unknown"+String(e)),r},I8=new Map;I8.set("EXIFIFD",W3e),I8.set("GPSIFD",J3e);const X1={TIFF_TAGS:N9,ifdTags:I8,GEO_KEYS:Z3e,getTagName:K3e},D9=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),yB=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Mv=4294967296,Y3e=new Set([1,5,6,7,8,34712,34887]);function Zee(e,t){let r="unknown";return e===3?r="f32":e===1?t===1?r="u1":t===2?r="u2":t===4?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):e===2&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function N4(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function Q3e(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function Kee(e,t){return e.get(t)?.values}function ug(e,t){return e.get(t)?.values}function oC(e,t){return e.get(t)?.values[0]}function Vr(e,t){return e.get(t)?.values[0]}function aC(e,t,r,i=0,n=X1.TIFF_TAGS,s=4){const o=s===8,a=o?U9(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),l=4+2*s,u=o?8:2,c=u+a*l;if(r+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const p=r+c+4<=e.byteLength?QM(new DataView(e,r+c,s===8?8:4),0,t,s===8):null,d=r+u,m=new Map;let g,b,v,_,E,I,x;for(let T=0;T<a;T++){b=new DataView(e,d+l*T,l),v=b.getUint16(0,t),E=b.getUint16(2,t),_=X1.getTagName(v,n);const M=[];s===2?(I=b.getUint16(4,t),x=b.getUint16(6,t)):s===4?(I=b.getUint32(4,t),x=b.getUint32(8,t)):s===8&&(I=QM(b,4,t,!0),x=QM(b,12,t,!0),M.push(b.getUint32(12,t)),M.push(b.getUint32(16,t))),g={id:v,type:E,valueCount:I,valueOffset:x,valueOffsets:M,values:null},nEe(e,t,g,i,!1,s),m.set(_,g)}return{success:!0,ifd:m,nextIFD:p,requiredBufferSize:c}}const X3e=(e,t)=>Wee(e,{inputOffset:t}).pixels[0];async function T8(e,t,r,i,n){const s=D9===t,o=Vr(r,"BITSPERSAMPLE"),a=Zee(Vr(r,"SAMPLEFORMAT")??1,o),l=Vr(r,"COMPRESSION")??1,u=N4(a);let c,p,d,m,g,b,v;if(l===34887)return await Hee(),X3e(e,i);if(l===1)d=e.slice(i,i+n),m=new Uint8Array(d);else if(l===8||l===32946)m=new Uint8Array(e,i,n),b=new kg(m),v=b.getBytes(),d=new ArrayBuffer(v.length),m=new Uint8Array(d),m.set(v);else if(l===6){m=new Uint8Array(e,i,n);const _=new _I;_.parse(m);const E=_.getData(_.width,_.height,!0);d=new ArrayBuffer(E.length),m=new Uint8Array(d),m.set(E)}else if(l===7){const _=r.get("JPEGTABLES").values,E=_.length-2;m=new Uint8Array(E+n-2);for(let M=0;M<E;M++)m[M]=_[M];const I=new Uint8Array(e,i+2,n-2);for(let M=0;M<I.length;M++)m[E+M]=I[M];const x=new _I;x.parse(m);const T=x.getData(x.width,x.height,!0);d=new ArrayBuffer(T.length),m=new Uint8Array(d),m.set(T)}else l===5&&(m=L9(e,i,n,t),d=m.buffer);if(a==="u8"||a==="s8"||s)p=new u(d);else{switch(d=new ArrayBuffer(m.length),g=new Uint8Array(d),a){case"u16":case"s16":for(c=0;c<m.length;c+=2)g[c]=m[c+1],g[c+1]=m[c];break;case"u32":case"s32":case"f32":for(c=0;c<m.length;c+=4)g[c]=m[c+3],g[c+1]=m[c+2],g[c+2]=m[c+1],g[c+3]=m[c]}p=new u(d)}return p}async function eEe(e,t,r){const i=ug(r,"TILEOFFSETS");if(i===void 0)return null;const n=ug(r,"TILEBYTECOUNTS"),{width:s,height:o,pixelType:a,tileWidth:l,tileHeight:u}=F9([r]),c=j9(r,t),p=t.planes,d=s*o,m=Vr(r,"BITSPERSAMPLE"),g=(Vr(r,"COMPRESSION")??1)===34887,b=N4(a),v=[];for(let y=0;y<p;y++)v.push(new b(d));let _,E,I,x,T,M,k,D,B,G,W,K,ne;const ye=Math.ceil(s/l);if(m%8==0){if(g&&c&&p>1){const y=Math.round(i.length/p);for(_=0;_<y;_++){M=Math.floor(_/ye)*u,k=_%ye*l,D=M*s+k;for(let C=0;C<p;C++){const L=_*p+C;if(n[L]!==0)for(I=await T8(e,t.littleEndian,r,i[L],n[L]),G=0,B=D,K=Math.min(l,s-k),W=Math.min(u,o-M),ne=v[C],x=0;x<W;x++)for(B=D+x*s,G=x*l,T=0;T<K;T++,B++,G++)ne[B]=I[G]}}}else for(_=0;_<i.length;_++)if(n[_]!==0)for(M=Math.floor(_/ye)*u,k=_%ye*l,D=M*s+k,I=await T8(e,t.littleEndian,r,i[_],n[_]),G=0,B=D,K=Math.min(l,s-k),W=Math.min(u,o-M),E=0;E<p;E++)if(ne=v[E],c||g)for(x=0;x<W;x++)for(B=D+x*s,G=l*u*E+x*l,T=0;T<K;T++,B++,G++)ne[B]=I[G];else for(x=0;x<W;x++)for(B=D+x*s,G=x*l*p+E,T=0;T<K;T++,B++,G+=p)ne[B]=I[G]}return{width:s,height:o,pixelType:a,pixels:v}}const tEe=(e,t,r)=>{const i=D9===t.littleEndian,n=ug(r,"STRIPOFFSETS");if(n===void 0)return null;const{width:s,height:o,pixelType:a}=F9([r]),l=t.planes,u=s*o,c=Vr(r,"BITSPERSAMPLE"),p=N4(a),d=new p(u*l),m=ug(r,"STRIPBYTECOUNTS"),g=Vr(r,"ROWSPERSTRIP"),b=Vr(r,"COMPRESSION")??1;let v,_,E,I,x,T,M,k,D,B,G,W=g;if(c%8==0)for(v=0;v<n.length;v++){if(x=v*(g*s)*l,W=(v+1)*g>o?o-v*g:g,a==="u8"||a==="s8"||i){if(b===8||b===32946)M=new Uint8Array(e,n[v],m[v]),B=new kg(M),G=B.getBytes(),T=new ArrayBuffer(G.length),M=new Uint8Array(T),M.set(G),M.length!==W*s*l*c/8&&console.log("strip byte counts is different than expected");else if(b===6){M=new Uint8Array(e,n[v],m[v]);const ne=new _I;ne.parse(M);const ye=ne.getData(ne.width,ne.height,!0);T=new ArrayBuffer(ye.length),M=new Uint8Array(T),M.set(ye)}else b===5?(M=L9(e,n[v],m[v],t.littleEndian),T=M.buffer):b===1&&(m[v]!==W*s*l*c/8&&console.log("strip byte counts is different than expected"),T=e.slice(n[v],n[v]+m[v]));I=new p(T)}else{switch(b===6||b===8||b===32946?(M=new Uint8Array(e,n[v],m[v]),B=new kg(M),M=B.getBytes(),T=new ArrayBuffer(M.length),k=new Uint8Array(T),M.length!==W*s*l*c/8&&console.log("strip byte counts is different than expected")):b===1&&(m[v]!==W*s*l*c/8&&console.log("strip byte counts is different than expected"),T=new ArrayBuffer(m[v]),M=new Uint8Array(e,n[v],m[v]),k=new Uint8Array(T)),a){case"u16":case"s16":for(E=0;E<M.length;E+=2)k[E]=M[E+1],k[E+1]=M[E];break;case"u32":case"s32":case"f32":for(E=0;E<M.length;E+=4)k[E]=M[E+3],k[E+1]=M[E+2],k[E+2]=M[E+1],k[E+3]=M[E]}I=new p(T)}d.set(I,x)}const K=[];if(l===1)K.push(d);else for(v=0;v<l;v++){for(D=new p(u),_=0;_<u;_++)D[_]=d[_*l+v];K.push(D)}return{width:s,height:o,pixelType:a,pixels:K}},rEe=(e,t,r)=>{if(!(e&&e.length>0&&t&&r))return null;let i,n,s;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(i=e[u],n=t[u],s=r[u],u===0)for(let c=0;c<o;c++)l[c]=i[c]<n||i[c]>s?0:1;else for(let c=0;c<o;c++)l[c]&&(l[c]=i[c]<n||i[c]>s?0:1);return l},iEe=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const r=new Map;let i,n,s,o,a;for(let _=0;_<t.length;_++)i=t[_],n=i.slice(6,i.indexOf(">")),o=i.indexOf("sample="),o>-1&&(a=i.slice(o+8,i.indexOf('"',o+8))),o=i.indexOf("name="),o>-1&&(n=i.slice(o+6,i.indexOf('"',o+6))),n&&(s=i.slice(i.indexOf(">")+1,i.indexOf("</Item>")).trim(),a!=null?r.has(n)?r.get(n)[a]=s:r.set(n,[s]):r.set(n,s)),a=null;const l=r.get("STATISTICS_MINIMUM"),u=r.get("STATISTICS_MAXIMUM"),c=r.get("STATISTICS_MEAN"),p=r.get("STATISTICS_STDDEV");let d=null;if(l&&u){d=[];for(let _=0;_<l.length;_++)d.push({min:parseFloat(l[_]),max:parseFloat(u[_]),avg:c&&parseFloat(c[_]),stddev:p&&parseFloat(p[_])})}const m=r.get("BandName"),g=r.get("WavelengthMin"),b=r.get("WavelengthMax");let v=null;if(m){v=[];for(let _=0;_<m.length;_++)v.push({BandName:m[_],WavelengthMin:g&&parseFloat(g[_]),WavelengthMax:b&&parseFloat(b[_])})}return{statistics:d,bandProperties:v,dataType:r.get("DataType"),rawMetadata:r}};function nEe(e,t,r,i=0,n=!1,s=4){if(r.values)return!0;const o=r.type,a=r.valueCount;let l=r.valueOffset,u=[];const c=yB[o],p=8*c,d=a*c,m=a*yB[o]*8;let g,b;const v=s===8?64:32,_=r.valueOffsets;if(m>v&&d>(n?e.byteLength:e?e.byteLength-l+i:0))return r.offlineOffsetSize=[l,d],r.values=null,!1;if(m<=v){if(!t)if(v<=32)l>>>=32-m;else{const E=_?.length?_[0]:l>>>0,I=_?.length?_[1]:Math.round((l-E)/Mv);m<=32?(l=E>>>32-m,_[0]=l):(l=E*2**(32-m)+(I>>>32-m),_[0]=E,_[1]=I>>>32-m)}if(a===1&&p===v)u=[l];else if(v===64){const E=_?.length?_[0]:l>>>0,I=_?.length?_[1]:Math.round((l-E)/Mv);let x=E,T=32;for(b=1;b<=a;b++){const M=32-p*b%32;if(T<p){const k=x<<M>>>32-T,D=I<<32-T>>>32-T;x=I,u.push(k+D*2**(p-T)),T-=32-(p-T)}else u.push(x<<M>>>32-p),T-=p;T===0&&(T=32,x=I)}}else for(b=1;b<=a;b++){const E=32-p*b;u.push(l<<E>>>32-p)}}else{l-=i,n&&(l=0);for(let E=l;E<l+d;E+=c){switch(o){case 1:case 2:case 7:g=new DataView(e,E,1).getUint8(0);break;case 3:g=new DataView(e,E,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,E,4).getUint32(0,t);break;case 5:g=new DataView(e,E,4).getUint32(0,t)/new DataView(e,E+4,4).getUint32(0,t);break;case 6:g=new DataView(e,E,1).getInt8(0);break;case 8:g=new DataView(e,E,2).getInt16(0,t);break;case 9:g=new DataView(e,E,4).getInt32(0,t);break;case 10:g=new DataView(e,E,4).getInt32(0,t)/new DataView(e,E+4,4).getInt32(0,t);break;case 11:g=new DataView(e,E,4).getFloat32(0,t);break;case 12:g=new DataView(e,E,8).getFloat64(0,t);break;case 16:case 18:g=U9(new DataView(e,E,8),0,t);break;case 17:g=oEe(new DataView(e,E,8),0,t);break;default:g=null}u.push(g)}}if(o===2){let E="";const I=u;for(u=[],b=0;b<I.length;b++)I[b]===0&&E!==""?(u.push(E),E=""):E+=String.fromCharCode(I[b]);E===""&&u.length!==0||u.push(E)}return r.values=u,!0}function F9(e){const t=e[0],r=Vr(t,"TILEWIDTH"),i=Vr(t,"TILELENGTH"),n=Vr(t,"IMAGEWIDTH"),s=Vr(t,"IMAGELENGTH"),o=Vr(t,"BITSPERSAMPLE"),a=Vr(t,"SAMPLESPERPIXEL"),l=Vr(t,"SAMPLEFORMAT")??1,u=Zee(l,o),c=j9(t),p=Kee(t,"GDAL_NODATA");let d;p?.length&&(d=p.map(F=>parseFloat(F)),d.some(F=>isNaN(F))&&(d=null));const m=Vr(t,"COMPRESSION")??1;let g;switch(m){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(m)}let b=!0,v="";Y3e.has(m)||(b=!1,v+="unsupported tag compression "+m),l>3&&(b=!1,v+="unsupported tag sampleFormat "+l),o%8!=0&&(b=!1,v+="unsupported tag bitsPerSample "+o);const _=oC(t,"GEOASCIIPARAMS");let E;if(_){const F=_.split("|").find(q=>q.includes("ESRI PE String = ")),ae=F?F.replace("ESRI PE String = ",""):"";E=ae.startsWith("COMPD_CS")||ae.startsWith("PROJCS")||ae.startsWith("GEOGCS")?{wkid:null,wkt:ae}:null}const I=ug(t,"GEOTIEPOINTS"),x=ug(t,"GEOPIXELSCALE"),T=ug(t,"GEOTRANSMATRIX"),M=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let k,D,B=!1;if(M){B=Vr(M,"GTRasterTypeGeoKey")===2;const F=Vr(M,"GTModelTypeGeoKey");if(F===2){const ae=Vr(M,"GeographicTypeGeoKey");ae>=1024&&ae<=32766&&(E={wkid:ae})}else if(F===1){const ae=Vr(M,"ProjectedCSTypeGeoKey");ae>=1024&&ae<=32766&&(E={wkid:ae})}}if(x&&I&&I.length>=6?(k=[x[0],0,I[3]-I[0]*x[0],0,-Math.abs(x[1]),I[4]-I[1]*x[1]],B&&(k[2]-=.5*k[0]+.5*k[1],k[5]-=.5*k[3]+.5*k[4])):T&&T.length===16&&(k=B?[T[0],T[1],T[3]-.5*T[0],T[4],T[5],T[7]-.5*T[5]]:[T[0],T[1],T[3],T[4],T[5],T[7]]),k){const F=[{x:0,y:s},{x:0,y:0},{x:n,y:s},{x:n,y:0}];let ae,q=Number.POSITIVE_INFINITY,fe=Number.POSITIVE_INFINITY,te=Number.NEGATIVE_INFINITY,ge=Number.NEGATIVE_INFINITY;for(let ve=0;ve<F.length;ve++)ae=Q3e(F[ve],k),q=ae.x>q?q:ae.x,te=ae.x<te?te:ae.x,fe=ae.y>fe?fe:ae.y,ge=ae.y<ge?ge:ae.y;D={xmin:q,xmax:te,ymin:fe,ymax:ge,spatialReference:E}}else D={xmin:-.5,ymin:.5-s,xmax:n-.5,ymax:.5,spatialReference:E};const G=e.filter(F=>oC(F,"NEWSUBFILETYPE")===1);let W,K,ne,ye,y;if(G.length>0){W=Math.round(Math.log(n/Vr(G[0],"IMAGEWIDTH"))/Math.LN2);const F=G[G.length-1];K=Math.round(Math.log(n/Vr(F,"IMAGEWIDTH"))/Math.LN2),ne=Vr(F,"TILEWIDTH"),ye=Vr(F,"TILELENGTH")}ne=K>0?ne||r:null,ye=K>0?ye||i:null,r&&(y=[{maxCol:Math.ceil(n/r)-1,maxRow:Math.ceil(s/i)-1,minRow:0,minCol:0}],G.forEach(F=>{y.push({maxCol:Math.ceil(Vr(F,"IMAGEWIDTH")/Vr(F,"TILEWIDTH"))-1,maxRow:Math.ceil(Vr(F,"IMAGELENGTH")/Vr(F,"TILELENGTH"))-1,minRow:0,minCol:0})}));const C=oC(e[0],"GDAL_METADATA"),L=iEe(C);return v+=" "+Yee({width:n,height:s,tileWidth:r,tileHeight:i,planes:a,ifds:e}),{width:n,height:s,tileWidth:r,tileHeight:i,planes:a,isBSQ:c,pixelType:u,compression:g,noData:d,isSupported:b,message:v,extent:D,affine:x?null:k,firstPyramidLevel:W,maximumPyramidLevel:K,pyramidBlockWidth:ne,pyramidBlockHeight:ye,tileBoundary:y,metadata:L}}function j9(e,t){const r=Kee(e,"PLANARCONFIGURATION");return r?r[0]===2:!!t&&t.isBSQ}function sEe(e){const{littleEndian:t,isBigTiff:r,firstIFD:i}=aEe(e);let n=i;const s=[];do{const o=lEe(e,t,n,0,X1.TIFF_TAGS,r?8:4);if(!o.success)break;s.push(o.ifd),n=o.nextIFD}while(n>0);return{...F9(s),littleEndian:t,isBigTiff:r,ifds:s}}function U9(e,t,r){const i=e.getUint32(t,r),n=e.getUint32(t+4,r);return r?n*Mv+i:i*Mv+n}function oEe(e,t,r){let i=r?e.getInt32(t,r):e.getUint32(t,r),n=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const s=(r?i:n)>=0?1:-1;return r?i*=s:n*=s,s*(r?n*Mv+i:i*Mv+n)}function QM(e,t,r,i){return i?U9(e,t,r):e.getUint32(t,r)}function aEe(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let i=null;if(r===18761)i=!0;else{if(r!==19789)throw"unexpected endianess byte";i=!1}const n=t.getUint16(2,i);if(n!==42&&n!==43)throw"unexpected tiff identifier";let s=4;const o=n===43;if(o){const a=t.getUint16(s,i);if(s+=2,a!==8||t.getUint16(s,i)!==0)throw"unsupported bigtiff version";s+=2}return{littleEndian:i,isBigTiff:o,firstIFD:QM(t,s,i,o)}}function lEe(e,t,r,i=0,n=X1.TIFF_TAGS,s=4){const o=aC(e,t,r,i,n,s);let a;const l=o.ifd;if(l){if(X1.ifdTags.forEach((u,c)=>{l.has(c)&&(a=l.get(c),a.data=aC(e,t,a.valueOffset-i,i,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const c=u[0]+"."+u[1]+"."+u[2];a.data=aC(e,t,a.valueOffset+6-i,i,X1.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[H3e(new Uint8Array(u))])}}return o}function Yee(e){const{width:t,height:r,tileHeight:i,tileWidth:n}=e,s=e.planes,o=n?n*i:t*r,a=Vr(e.ifds[0],"BITSPERSAMPLE");let l="";return o*s>2**30/(a>8?a/8:1)&&(l=n?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}async function uEe(e,t){const{headerInfo:r,ifd:i,offsets:n,sizes:s}=t,o=[];for(let B=0;B<n.length;B++){const G=await T8(e,r.littleEndian,i,n[B],s[B]||e.byteLength);o.push(G)}const a=j9(i,r),{pixelType:l,planes:u}=r,c=N4(l),p=Vr(i,"TILEWIDTH"),d=Vr(i,"TILELENGTH"),m=Vr(i,"COMPRESSION")??1,g=p*d;let b;const v=[];let _=o[0];const E=m===34887;for(let B=0;B<u;B++){if(b=new c(g),a&&E){if(_=o[B],_.length)for(let G=0;G<g;G++)b[G]=_[B][G+B]}else if(_.length)if(a||E&&!a)b=_.slice(g*B,g*(B+1));else for(let G=0;G<g;G++)b[G]=_[G*u+B];v.push(b)}const I=r.noData?r.noData[0]:t.noDataValue,x=r.metadata?r.metadata.statistics:null,T=x?x.map(B=>B.min):null,M=x?x.map(B=>B.max):null;let k,D;if(I!=null)if(k=new Uint8Array(g),Math.abs(I)>1e24)for(D=0;D<g;D++)Math.abs((v[0][D]-I)/I)<1e-6?k[D]=0:k[D]=1;else for(D=0;D<g;D++)v[0][D]===I?k[D]=0:k[D]=1;else T&&M&&t.applyMinMaxConstraint&&(k=rEe(v,T,M));return{pixelType:l,width:p,height:d,pixels:v,mask:k,noDataValue:I}}async function cEe(e,t={}){const r=t.pyramidLevel||0,i=t.headerInfo||sEe(e),{ifds:n,noData:s}=i;if(n.length===0)throw"no valid image file directory";const o=Yee(i);if(o)throw o;let a,l;const u=r===-1?n[n.length-1]:n[r],c=s?s[0]:t.noDataValue;if(l=i.tileWidth?await eEe(e,i,u):await tEe(e,i,u),c!==null){if(l.mask=new Uint8Array(l.width*l.height),Math.abs(c)>1e24)for(a=0;a<l.width*l.height;a++)Math.abs((l.pixels[0][a]-c)/c)<1e-6?l.mask[a]=0:l.mask[a]=1;else for(a=0;a<l.width*l.height;a++)l.pixels[0][a]===c?l.mask[a]=0:l.mask[a]=1;l.noDataValue=c}return l}var hEe=function(e){var t,r,i,n,s,o;function a(l){var u,c,p,d,m,g,b,v,_,E,I,x,T;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),v=function(){var M,k;for(k=[],M=0;M<4;++M)k.push(String.fromCharCode(this.data[this.pos++]));return k}.call(this).join(""),v){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),p=this.readUInt16()||100,m.delay=1e3*d/p,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,I=0;0<=u?I<u:I>u;0<=u?++I:--I)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(_=255-this.transparency.indexed.length)>0)for(x=0;0<=_?x<_:x>_;0<=_?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(E=this.read(u)).indexOf(0),b=String.fromCharCode.apply(String,E.slice(0,g)),this.text[b]=String.fromCharCode.apply(String,E.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,c){var p;return typeof u=="function"&&(c=u),(p=new XMLHttpRequest).open("GET",l,!0),p.responseType="arraybuffer",p.onload=function(){var d;return d=new a(new Uint8Array(p.response||p.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&d.render(u),typeof c=="function"?c(d):void 0},p.send(null)},r=1,i=2,t=0,a.prototype.read=function(l){var u,c;for(c=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,c,p,d,m,g,b,v,_,E,I,x,T,M,k,D,B,G,W,K,ne,ye,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new kg(l)).getBytes(),D=(x=this.pixelBitlength/8)*this.width,T=new Uint8Array(D*this.height),g=l.length,k=0,M=0,c=0;M<g;){switch(l[M++]){case 0:for(d=W=0;W<D;d=W+=1)T[c++]=l[M++];break;case 1:for(d=K=0;K<D;d=K+=1)u=l[M++],m=d<x?0:T[c-x],T[c++]=(u+m)%256;break;case 2:for(d=ne=0;ne<D;d=ne+=1)u=l[M++],p=(d-d%x)/x,B=k&&T[(k-1)*D+p*x+d%x],T[c++]=(B+u)%256;break;case 3:for(d=ye=0;ye<D;d=ye+=1)u=l[M++],p=(d-d%x)/x,m=d<x?0:T[c-x],B=k&&T[(k-1)*D+p*x+d%x],T[c++]=(u+Math.floor((m+B)/2))%256;break;case 4:for(d=y=0;y<D;d=y+=1)u=l[M++],p=(d-d%x)/x,m=d<x?0:T[c-x],k===0?B=G=0:(B=T[(k-1)*D+p*x+d%x],G=p&&T[(k-1)*D+(p-1)*x+d%x]),b=m+B-G,v=Math.abs(b-m),E=Math.abs(b-B),I=Math.abs(b-G),_=v<=E&&v<=I?m:E<=I?B:G,T[c++]=(u+_)%256;break;default:throw new Error("Invalid filter algorithm: "+l[M-1])}k++}return T},a.prototype.decodePalette=function(){var l,u,c,p,d,m,g,b,v;for(c=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+c.length),p=0,c.length,l=0,u=g=0,b=c.length;g<b;u=g+=3)d[p++]=c[u],d[p++]=c[u+1],d[p++]=c[u+2],d[p++]=(v=m[l++])!=null?v:255;return d},a.prototype.copyToImageData=function(l,u){var c,p,d,m,g,b,v,_,E,I,x;if(p=this.colors,E=null,c=this.hasAlphaChannel,this.palette.length&&(E=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),p=4,c=!0),_=(d=l.data||l).length,g=E||u,m=b=0,p===1)for(;m<_;)v=E?4*u[m/4]:b,I=g[v++],d[m++]=I,d[m++]=I,d[m++]=I,d[m++]=c?g[v++]:this.transparency.grayscale&&this.transparency.grayscale===I?0:255,b=v;else for(;m<_;)v=E?4*u[m/4]:b,d[m++]=g[v++],d[m++]=g[v++],d[m++]=g[v++],d[m++]=c?g[v++]:this.transparency.rgb&&this.transparency.rgb[1]===g[v-3]&&this.transparency.rgb[3]===g[v-2]&&this.transparency.rgb[5]===g[v-1]?0:255,b=v},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},s=e.document&&e.document.createElement("canvas"),o=s&&s.getContext("2d"),n=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=s.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,c,p,d,m,g,b,v;if(this.animation){for(v=[],c=m=0,g=(b=this.animation.frames).length;m<g;c=++m)u=b[c],p=l.createImageData(u.width,u.height),d=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(p,d),u.imageData=p,v.push(u.image=n(p));return v}},a.prototype.renderFrame=function(l,u){var c,p,d;return c=(p=this.animation.frames)[u],d=p[u-1],u===0&&l.clearRect(0,0,this.width,this.height),d?.disposeOp===r?l.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===i&&l.putImageData(d.imageData,d.xOffset,d.yOffset),c.blendOp===t&&l.clearRect(c.xOffset,c.yOffset,c.width,c.height),l.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(l){var u,c,p,d,m,g,b=this;return c=0,g=this.animation,d=g.numFrames,p=g.frames,m=g.numPlays,(u=function(){var v,_;if(v=c++%d,_=p[v],b.renderFrame(l,v),d>1&&c/d<m)return b.animation._timeout=setTimeout(u,_.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,c;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(c=u.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),u.putImageData(c,0,0))},a}(self);const pEe=new Set(["jpg","png","bmp","gif"]),dEe=new Set(["S8","U8","S16","U16","S32","U32","F32","F64"]);async function fEe(e,t){if(!D9)throw new $e("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Hee();const{offset:r,noDataValue:i}=t;let n=t.pixelType?.toUpperCase();n&&!dEe.has(n)&&(n=null);const{width:s,height:o,pixelType:a,statistics:l,pixels:u,mask:c}=Wee(e,{inputOffset:r,noDataValue:i,pixelType:n,returnPixelInterleavedDims:t.returnPixelInterleavedDims});return new Nr({width:s,height:o,pixelType:a.toLowerCase(),pixels:u,mask:c,statistics:l})}async function mEe(e,t){const r=await cEe(e,t),i=new Nr({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return i.updateStatistics(),i}async function yEe(e,t){const r=await uEe(e,t.customOptions),i=new Nr({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return i.updateStatistics(),i}function Qee(e,t){const r=t.pixelType||"u8",i=Nr.getPixelArrayConstructor(r),n=r==="u8"?e:new i(e.buffer),s=[],o=t.planes||1;if(o===1)s.push(n);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),c=new i(u);for(let p=0;p<u;p++)c[p]=n[p*o+l];s.push(c)}const a=new Nr({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:r,statistics:null});return a.updateStatistics(),a}function gEe(e,t){return Qee(new kg(new Uint8Array(e)).getBytes(),t)}function vEe(e,t){return Qee(L9(e,t.offset,t.eof,!t.isInputBigEndian),t)}function bEe(e,t,r){const{pixelTypeCtor:i}=EEe(t.pixelType),n=(0,q3e.decode)(e,{width:t.width,height:t.height,pixelType:i,format:r}),s=new Nr({width:t.width,height:t.height,pixels:n.pixels,pixelType:t.pixelType,mask:n.mask,statistics:null});return s.updateStatistics(),s}function wEe(e,t){const r=j3e.decode(e,t.hasNoZlibMask),i=new Nr({width:r.width,height:r.height,pixels:r.pixels,pixelType:"U8",mask:r.mask,statistics:null});return i.updateStatistics(),i}function _Ee(e,t){const r=new Uint8Array(e),i=new hEe(r),{width:n,height:s}=t,o=n*s,a=i.decode();let l,u=0,c=0;const p=new Uint8Array(o);for(u=0;u<o;u++)p[u]=a[4*u+3];const d=new Nr({width:n,height:s,pixels:[],pixelType:"U8",mask:p,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),c=0;c<o;c++)l[c]=a[4*c+u];d.addData({pixels:l})}return d.updateStatistics(),d}async function xEe(e,t,r,i){const n=new P9,s={applyJpegMask:!1,format:t,...r},o=await n.decode(e,s,i),a=new Nr(o);return a.updateStatistics(),a}function Xee(e){if(e==null)throw new $e("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return t[0]===255&&t[1]===216?r="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?r="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?r="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?r="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?r="tiff":t[0]===71&&t[1]===73&&t[2]===70?r="gif":t[0]===66&&t[1]===77?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(r="error"),r}function SEe(e){let t=null;switch(e){case"lerc":case"lerc2":t=fEe;break;case"jpg":t=wEe;break;case"png":t=_Ee;break;case"bsq":case"bip":t=(r,i)=>bEe(r,i,e);break;case"tiff":t=mEe;break;case"deflate":t=gEe;break;case"lzw":t=vEe;break;case"error":t=()=>{throw new $e("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new $e("rasterCodec:decode","unsupported raster format")}}return t}function EEe(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function MEe(e,t=1){if(!e)return;const{pixels:r,width:i,height:n,mask:s}=e;if(!r||r.length===0)return;const o=r.length,a=i-1,l=n-1,u=[];let c,p,d,m,g,b,v;const _=Nr.getPixelArrayConstructor(e.pixelType);if(t===0){for(c=0;c<o;c++){for(g=r[c],b=new _(a*l),p=0;p<l;p++)for(m=p*i,d=0;d<a;d++)b[p*a+d]=g[m+d];u.push(b)}if(s)for(v=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*i,d=0;d<a;d++)v[p*a+d]=s[m+d]}else{for(c=0;c<o;c++){for(g=r[c],b=new _(a*l),p=0;p<l;p++)for(m=p*i,d=0;d<a;d++)b[p*a+d]=(g[m+d]+g[m+d+1]+g[m+i+d]+g[m+i+d+1])/4;u.push(b)}if(s)for(v=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*i,d=0;d<a;d++)v[p*a+d]=Math.min.apply(null,[s[m+d],s[m+d+1],s[m+i+d],s[m+i+d+1]])}e.width=a,e.height=l,e.mask=v,e.pixels=u}function IEe(e){let t=Xee(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function gB(e,t={},r){if(e==null)throw new $e("rasterCodec:decode","missing encodeddata parameter.");let i,n,s=t.format&&t.format.toLowerCase();if(!(s!=="bsq"&&s!=="bip"||t.width!=null&&t.height!=null))throw new $e("rasterCodec:decode","requires width and height in options parameter.");return s==="tiff"&&t.customOptions?yEe(e,t):((!s||s!=="bsq"&&s!=="bip"&&s!=="deflate"&&s!=="lzw")&&(s=Xee(e)),t.useCanvas&&pEe.has(s)?n=await xEe(e,s,t,r):(i=SEe(s),t.isPoint&&((t={...t}).width++,t.height++),n=await i(e,t),t.isPoint&&MEe(n)),n)}const vB=new Xt({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let l1=class extends Je{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};h([f({type:So,json:{write:!0}})],l1.prototype,"baseSymbol",void 0),h([f({types:d4,json:{read:{reader:f4},write:!0}})],l1.prototype,"colorRamp",void 0),h([f({json:{read:vB.read,write:vB.write}})],l1.prototype,"type",void 0),l1=h([me("esri.rest.support.ClassificationDefinition")],l1);const TEe=l1,bB=new Xt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),wB=new Xt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let fu=class extends TEe{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};h([f({json:{write:!0}})],fu.prototype,"breakCount",void 0),h([f({json:{write:!0}})],fu.prototype,"classificationField",void 0),h([f({type:String,json:{read:bB.read,write:bB.write}})],fu.prototype,"classificationMethod",void 0),h([f({json:{write:!0}})],fu.prototype,"normalizationField",void 0),h([f({json:{read:wB.read,write:wB.write}})],fu.prototype,"normalizationType",void 0),h([f({value:null,json:{write:!0}})],fu.prototype,"standardDeviationInterval",null),h([f({value:null,json:{write:!0}})],fu.prototype,"definedInterval",null),h([f()],fu.prototype,"type",void 0),fu=h([me("esri.rest.support.ClassBreaksDefinition")],fu);const Eat=fu,AEe=.25,$Ee=p4.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),_B=p4.fromJSON(xee[0]),ete=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function CEe(e,t){const{attributeTable:r,colormap:i}=e;if(V9(e)){const n=GEe(e);if(de(n))return n}if(de(i)){const n=FEe(e);if(de(n))return n}if(de(r)){const n=NEe(e);if(de(n))return n}return OEe(e,t)}function kEe(e){const t=["raster-stretch"];return nte(e)&&t.push("raster-colormap"),ite(e)&&t.push("unique-value"),UEe(e)&&t.push("class-breaks"),jEe(e)&&t.push("raster-shaded-relief"),V9(e)&&t.push("vector-field"),BEe(e)&&t.push("flow"),t}function Mat(e,t,r){const i=["nearest","bilinear","cubic","majority"].find(n=>n===r?.toLowerCase());return t==="Map"?i??"bilinear":e.dataType==="standard-time"?i??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?i==="nearest"||i==="majority"?i:"nearest":i??"bilinear"}function OEe(e,t){e=REe(e,t?.variableName);const{bandCount:r}=e;let{bandIds:i,stretchType:n}=t||{};i?.some(p=>p>=r)&&(i=null);let s=e.statistics,o=e.histograms;r>1?(i=i?.length?i:tte(e),s=s==null?null:i.map(p=>s[p]),o=o==null?null:i.map(p=>o[p])):i=[0],n==null&&(n=LEe(e));let a=!1;switch(n){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!s?.length}const{dataType:l}=e,u=i?.length===1&&ete.has(l)?$Ee:null,c=new $9({stretchType:n,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:i.length===1?[1]:[1,1,1],useGamma:!1});return n==="percent-clip"?c.maxPercent=c.minPercent=AEe:n==="standard-deviation"&&(c.numberOfStandardDeviations=2),a||!de(e.multidimensionalInfo)&&!t?.includeStatisticsInStretch||(n==="percent-clip"?c.histograms=o:n!=="min-max"&&n!=="standard-deviation"||(c.statistics=s)),c}function REe(e,t){if(t==null)return e;let r=e.statistics,i=e.histograms;const{multidimensionalInfo:n}=e;if(t&&de(n)){const s=n.variables.find(o=>o.name===t);if(s){const{statistics:o,histograms:a}=s;o?.length&&(r=o),a?.length&&(i=a)}}return mS.fromJSON({...e.toJSON(),statistics:r,histograms:i})}function tte(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const r=e.keyProperties&&e.keyProperties.BandProperties;let i;if(r&&r.length===t){const{red:n,green:s,blue:o,nir:a}=PEe(r);n!=null&&s!=null&&o!=null?i=[n,s,o]:a!=null&&n!=null&&s!=null&&(i=[a,n,s])}return!i&&t>=3&&(i=[0,1,2]),i}function PEe(e){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=i.BandName?.toLowerCase();if(n==="red")t.red=r;else if(n==="green")t.green=r;else if(n==="blue")t.blue=r;else if(n==="nearinfrared"||n==="nearinfrared_1"||n==="nir")t.nir=r;else if(i.WavelengthMax&&i.WavelengthMin){const s=i.WavelengthMin,o=i.WavelengthMax;t.blue==null&&s>=410&&s<=480&&o>=480&&o<=540?t.blue=r:t.green==null&&s>=490&&s<=560&&o>=560&&o<=610?t.green=r:t.red==null&&s>=595&&s<=670&&o>=660&&o<=730?t.red=r:t.nir==null&&s>=700&&s<=860&&o>=800&&o<=950&&(t.nir=r)}}return t}function LEe(e){let t="percent-clip";const{pixelType:r,dataType:i,histograms:n,statistics:s}=e;return r!=="u8"||i!=="processed"&&de(n)&&de(s)?r==="u8"||i==="elevation"||ete.has(i)?t="min-max":de(n)?t="percent-clip":de(s)&&(t="min-max"):t="none",t}function NEe(e,t,r,i){if(!ite(e,t))return null;const{attributeTable:n,statistics:s}=e,o=rte(n,t),a=p2(n,"red"),l=p2(n,"green"),u=p2(n,"blue"),c=new m4,p=[],d=new Set,m=!!(a&&l&&u);if(de(n))n.features.forEach(g=>{const b=g.attributes[o.name];if(!d.has(g.attributes[o.name])&&b!=null){d.add(b);const v=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!n.features.some(E=>E.attributes[a.name]>1||E.attributes[l.name]>1||E.attributes[u.name]>1),_=v?255:1;p.push(new xv({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new xt(m?[g.attributes[a.name]*_,g.attributes[l.name]*_,g.attributes[u.name]*_,1]:[0,0,0,0])}}))}});else if(s?.[0])for(let g=s[0].min;g<=s[0].max;g++)p.push(new xv({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new xt([0,0,0,0])}}));if(p.sort((g,b)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>b.value?1:-1),!m){const g=Cg(_B,p.length);p.forEach((b,v)=>b.symbol.color=new xt(g[v].slice(1,4))),c.colorRamp=_B}if(r||i){const g=r||Cg(i,p.length).map(b=>b.slice(1));p.forEach((b,v)=>b.symbol.color=new xt(g[v])),c.colorRamp=i}return new vb({field:o.name,uniqueValueInfos:p,authoringInfo:c})}function rte(e,t,r){let i;return de(e)?(i=t?e.fields.find(n=>t.toLowerCase()===n.name.toLowerCase()):DEe(e.fields),i||(r||(i=e.fields.find(n=>n.type==="string")),i||(i=p2(e,"value")))):i=new No({name:"value"}),i}function DEe(e){let t;for(let r=0;r<e.length;r++){const i=e[r].name.toLowerCase();if(e[r].type==="string"){if(i.startsWith("class")){t=e[r];break}t==null&&(i.endsWith("name")||i.endsWith("type"))&&(t=e[r])}}return t}function p2(e,t){return Ne(e)?null:e.fields.find(r=>r.name.toLowerCase()===t)}function ite(e,t){const{attributeTable:r,bandCount:i}=e;return Ne(r)&&VEe(e)?!0:!(Ne(r)||i>1||t&&r.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function nte(e){const{bandCount:t,colormap:r}=e;return de(r)&&r.length&&t===1}function FEe(e){if(!nte(e))return null;let t;const{attributeTable:r,colormap:i}=e;if(de(r)){const n=p2(r,"value"),s=rte(r,null,!0);s.type==="string"&&(t={},r.features.forEach(o=>{const a=o.attributes;t[a[n.name]]=s?a[s.name]:a[n.name]}))}return A9.createFromColormap(i,t)}function jEe(e){const{bandCount:t,dataType:r,pixelType:i}=e;return r==="elevation"||r==="generic"&&t===1&&(i==="s16"||i==="f32"||i==="f64")}function UEe(e){const{attributeTable:t,bandCount:r}=e;return r===1&&(de(t)||de(e.histograms))}function VEe(e){return["u8","s8"].includes(e.pixelType)&&e.statistics?.[0]?.min!=null&&e.statistics[0]?.max!=null&&e.bandCount===1}function V9(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function BEe(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}const zEe=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function GEe(e){if(!V9(e))return null;let t;if(de(e.statistics)&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:n,maxMagnitude:s}=HEe(e.dataType,e.statistics);t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:n,maxDataValue:s}]}const r=de(e.multidimensionalInfo)?zEe.get(e.multidimensionalInfo.variables[0].unit):null,i=new O9({visualVariables:t,inputUnit:r,rotationType:"geographic"});return i.visualVariables=[...i.sizeVariables,...i.rotationVariables],i}function xB(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function qEe(e){if(e.type==="uniqueValue"){const t=e.uniqueValueInfos;return t[0].symbol?.symbolLayers?.length&&(e.uniqueValueInfos=t.map(r=>({value:r.value,label:r.label,symbol:r.symbol?xB(r.symbol):null}))),e}if(e.type==="classBreaks"){const t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(r=>({classMinValue:r.classMinValue,classMaxValue:r.classMaxValue,label:r.label,symbol:r.symbol?xB(r.symbol):null}))),e}return e}function HEe(e,t){let r,i;if(e==="vector-magdir")r=t[0].min,i=t[0].max;else{const n=t[0].min,s=t[0].max,o=t[1].min,a=t[1].max;r=0,i=Math.max(Math.abs(n),Math.abs(o),Math.abs(s),Math.abs(a))}return{minMagnitude:r,maxMagnitude:i}}const SB={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},lC=1,WEe=[.299,.587,.114];function ste(e,t=256){t=Math.min(t,256);const{size:r,counts:i}=e,n=new Uint8Array(r),s=i.reduce((c,p)=>c+p/t,0);let o=0,a=0,l=0,u=s;for(let c=0;c<r;c++)if(l+=i[c],!(c<r-1&&l+i[c+1]<u)){for(;o<t-1&&u<l;)o++,u+=s;for(let p=a;p<=c;p++)n[p]=o;a=c+1}for(let c=a;c<r;c++)n[c]=t-1;return n}function EB(e){const{minCutOff:t,maxCutOff:r,gamma:i,pixelType:n}=e,s=e.outMin||0,o=e.outMax||255;if(!["u8","u16","s8","s16"].includes(n))return null;const a=t.length;let l,u,c=0;n==="s8"?c=-127:n==="s16"&&(c=-32767);let p=256;["u16","s16"].includes(n)&&(p=65536);const d=[],m=o-s;for(l=0;l<a;l++)d[l]=r[l]-t[l],r[l],t[l];const g=i&&i.length>=a,b=[];if(g)for(l=0;l<a;l++)i[l]>1?i[l]>2?b[l]=6.5+(i[l]-2)**2.5:b[l]=6.5+100*(2-i[l])**4:b[l]=1;let v;const _=[];let E,I,x;if(g)for(l=0;l<a;l++){for(x=[],u=0;u<p;u++)E=u+c,v=(E-t[l])/d[l],I=1,i[l]>1&&(I-=(1/m)**(v*b[l])),E<r[l]&&E>t[l]?x[u]=Math.floor(I*m*v**(1/i[l]))+s:E>=r[l]?x[u]=o:x[u]=s;_[l]=x}else for(l=0;l<a;l++){for(x=[],u=0;u<p;u++)E=u+c,E<=t[l]?x[u]=s:E>=r[l]?x[u]=o:x[u]=Math.floor((E-t[l])/d[l]*m)+s;_[l]=x}if(e.contrastOffset!=null){const T=JEe(e.contrastOffset,e.brightnessOffset);for(l=0;l<a;l++)for(x=_[l],u=0;u<p;u++)x[u]=T[x[u]]}return{lut:_,offset:c}}function JEe(e,t){const r=Math.min(Math.max(e,-100),100),i=Math.min(Math.max(t,-100),100),n=255,s=128;let o,a;const l=new Uint8Array(256);for(o=0;o<256;o++)r>0&&r<100?a=(200*o-100*n+2*n*i)/(2*(100-r))+s:r<=0&&r>-100?a=(200*o-100*n+2*n*i)*(100+r)/2e4+s:r===100?(a=200*o-100*n+(n+1)*(100-r)+2*n*i,a=a>0?n:0):r===-100&&(a=s),l[o]=a>n?n:a<0?0:a;return l}function ZEe(e,t,r){const i=[];for(let n=0;n<t.length;n++){let s=0,o=0,a=0;"min"in t[n]?{min:s,max:o,avg:a}=t[n]:[s,o,a]=t[n];let l=a;e!=="u8"&&(l=255*(l-s)/(o-s)),r&&(l*=WEe[n]),i.push(KEe(l))}return i}function KEe(e){if(e<=0||e>=255)return lC;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const r=255,i=e+t,n=Math.log(e/r),s=Math.log(i/r);if(s===0)return lC;const o=n/s;return isNaN(o)?lC:Math.min(9.9,Math.max(.01,o))}function YEe(e){if(Ne(e)||!e.pixels?.length)return null;e.statistics||e.updateStatistics();const{pixels:t,mask:r,pixelType:i,statistics:n}=e,s=e.width*e.height,o=t.length;let a,l,u,c,p;const d=[],m=[];let g,b,v,_,E,I,x,T,M,k;const D=256;for(c=0;c<o;c++){if(g=new Uint32Array(D),v=t[c],i==="u8")if(a=-.5,l=255.5,r)for(p=0;p<s;p++)r[p]&&g[v[p]]++;else for(p=0;p<s;p++)g[v[p]]++;else{if(a=n[c].minValue,l=n[c].maxValue,u=(l-a)/D,b=new Uint32Array(D+1),r)for(p=0;p<s;p++)r[p]&&b[Math.floor((v[p]-a)/u)]++;else for(p=0;p<s;p++)b[Math.floor((v[p]-a)/u)]++;for(p=0;p<255;p++)g[p]=b[p];g[255]=b[255]+b[256]}for(d.push({min:a,max:l,size:D,counts:g}),_=0,E=0,T=0,p=0;p<D;p++)_+=g[p],E+=p*g[p];for(M=E/_,p=0;p<D;p++)T+=g[p]*(p-M)**2;k=Math.sqrt(T/(_-1)),u=(l-a)/D,I=(M+.5)*u+a,x=k*u,m.push({min:a,max:l,avg:I,stddev:x})}return{statistics:m,histograms:d}}function Iat(e){const t=[];for(let r=0;r<e.length;r++){const{min:i,max:n,size:s,counts:o}=e[r];let a=0,l=0;for(let g=0;g<s;g++)a+=o[g],l+=g*o[g];const u=l/a;let c=0;for(let g=0;g<s;g++)c+=o[g]*(g-u)**2;const p=(n-i)/s,d=(u+.5)*p+i,m=Math.sqrt(c/(a-1))*p;t.push({min:i,max:n,avg:d,stddev:m})}return t}function pw(e,t){const{pixelBlock:r,bandIds:i,returnHistogramLut:n,rasterInfo:s}=t;let o,a,l=e.stretchType;if(e.dra)if(l==="minMax"&&de(r)&&r.statistics)o=r.statistics.map(D=>[D.minValue,D.maxValue,0,0]);else{const D=YEe(r);o=de(D)?D.statistics:null,a=de(D)?D.histograms:null}else o=e.statistics?.length>0?e.statistics:s.statistics,a=e.histograms||s.histograms;l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||s.bandCount,c=[],p=[];let d,m,g,b,v,_,E,I,x,T,M,k;switch(o&&!Array.isArray(o[0])&&(o=o.map(D=>[D.min,D.max,D.avg,D.stddev])),l){case"none":{const D=SB[s.pixelType]||SB.f32;for(I=0;I<u;I++)c[I]=D[0],p[I]=D[1]}break;case"minMax":for(I=0;I<u;I++)c[I]=o[I][0],p[I]=o[I][1];break;case"standardDeviation":for(I=0;I<u;I++)c[I]=o[I][2]-e.numberOfStandardDeviations*o[I][3],p[I]=o[I][2]+e.numberOfStandardDeviations*o[I][3],c[I]<o[I][0]&&(c[I]=o[I][0]),p[I]>o[I][1]&&(p[I]=o[I][1]);break;case"histogramEqualization":for(I=0;I<u;I++)c[I]=a[I].min,p[I]=a[I].max;break;case"percentClip":for(I=0;I<a.length;I++){for(d=a[I],v=new Uint32Array(d.size),b=[...d.counts],b.length>=20&&(b[0]=b[1]=b[2]=b[b.length-1]=b[b.length-2]=0),g=0,m=(d.max-d.min)/d.size,E=d.min===-.5&&m===1?.5:0,x=0;x<d.size;x++)g+=b[x],v[x]=g;for(_=(e.minPercent||0)*g/100,x=0;x<d.size;x++)if(v[x]>_){c[I]=d.min+m*(x+E);break}for(_=(1-(e.maxPercent||0)/100)*g,x=d.size-2;x>=0;x--)if(v[x]<_){p[I]=d.min+m*(x+2-E);break}}break;default:for(I=0;I<u;I++)c[I]=o[I][0],p[I]=o[I][1]}return l==="histogramEqualization"?(M=a[0].size||256,T=0,n&&(k=a.map(D=>ste(D)))):(M=e.max||255,T=e.min||0),QEe({minCutOff:c,maxCutOff:p,outMax:M,outMin:T,histogramLut:k},i)}function QEe(e,t){if(t==null||t.length===0)return e;const r=Math.max.apply(null,t),{minCutOff:i,maxCutOff:n,outMin:s,outMax:o,histogramLut:a}=e;return i.length===t.length||i.length<=r?e:{minCutOff:t.map(l=>i[l]),maxCutOff:t.map(l=>n[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:s,outMax:o}}function uC(e,t){if(Ne(e)||!e.pixels?.length)return e;const r=e.clone(),{pixels:i,mask:n}=r,{minCutOff:s,maxCutOff:o,gamma:a}=t,l=t.outMin||0,u=t.outMax||255,c=r.width*r.height,p=i.length;let d,m,g,b,v;const _=u-l,E=[];for(d=0;d<p;d++)E[d]=o[d]-s[d],o[d],s[d];const I=a&&a.length>=p,x=[];if(I)for(d=0;d<p;d++)a[d]>1?a[d]>2?x[d]=6.5+(a[d]-2)**2.5:x[d]=6.5+100*(2-a[d])**4:x[d]=1;if(I)if(n!=null){for(m=0;m<c;m++)if(n[m])for(d=0;d<p;d++)g=i[d][m],v=(g-s[d])/E[d],b=1,a[d]>1&&(b-=(1/_)**(v*x[d])),g<o[d]&&g>s[d]?i[d][m]=Math.floor(b*_*v**(1/a[d]))+l:g>=o[d]?i[d][m]=u:i[d][m]=l}else for(m=0;m<c;m++)for(d=0;d<p;d++)g=i[d][m],v=(g-s[d])/E[d],b=1,a[d]>1&&(b-=(1/_)**(v*x[d])),g<o[d]&&g>s[d]?i[d][m]=Math.floor(b*_*v**(1/a[d]))+l:g>=o[d]?i[d][m]=u:i[d][m]=l;else if(n!=null){for(m=0;m<c;m++)if(n[m])for(d=0;d<p;d++)g=i[d][m],g<o[d]&&g>s[d]?i[d][m]=Math.floor((g-s[d])/E[d]*_)+l:g>=o[d]?i[d][m]=u:i[d][m]=l}else for(m=0;m<c;m++)for(d=0;d<p;d++)g=i[d][m],g<o[d]&&g>s[d]?i[d][m]=Math.floor((g-s[d])/E[d]*_)+l:g>=o[d]?i[d][m]=u:i[d][m]=l;return r.pixelType="u8",r.updateStatistics(),r}function ote(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:i,pixelSizePower:n,pixelSizeFactor:s,scalingType:o,isGCS:a,resolution:l}=e,u=i==="multi-directional"?2*e.zFactor:e.zFactor,{x:c,y:p}=l;let d=u/(8*c),m=u/(8*p);if(a&&u>.001&&(d/=111e3,m/=111e3),o==="adjusted")if(a){const K=111e3*c,ne=111e3*p;d=(u+K**n*s)/(8*K),m=(u+ne**n*s)/(8*ne)}else d=(u+c**n*s)/(8*c),m=(u+p**n*s)/(8*p);let g=(90-t)*Math.PI/180,b=Math.cos(g),v=(360-r+90)*Math.PI/180,_=Math.sin(g)*Math.cos(v),E=Math.sin(g)*Math.sin(v);const I=[315,270,225,360,180,0],x=[60,60,60,60,60,90],T=new Float32Array([3,5,3,2,1,4]),M=T.reduce((K,ne)=>K+ne),k=T.map(K=>K/M),D=i==="multi-directional"?I.length:1,B=new Float32Array(6),G=new Float32Array(6),W=new Float32Array(6);if(i==="multi-directional")for(let K=0;K<D;K++)t=x[K],r=I[K],g=(90-t)*Math.PI/180,b=Math.cos(g),v=(360-r+90)*Math.PI/180,_=Math.sin(g)*Math.cos(v),E=Math.sin(g)*Math.sin(v),B[K]=b,G[K]=_,W[K]=E;else B.fill(b),G.fill(_),W.fill(E);return{resolution:l,factor:[d,m],sinZcosA:_,sinZsinA:E,cosZ:b,sinZcosAs:G,sinZsinAs:W,cosZs:B,weights:k,hillshadeType:["traditional","multi-directional"].indexOf(i)}}function XEe(e,t){if(!pn(e))return e;const{width:r,height:i,mask:n}=e,s=new Uint8Array(r*i);n&&s.set(n);const{factor:o,sinZcosA:a,sinZsinA:l,cosZ:u,sinZcosAs:c,sinZsinAs:p,cosZs:d,weights:m}=ote(t),[g,b]=o,{hillshadeType:v}=t,_=e.pixels[0],E=new Uint8Array(r*i);let I,x,T,M,k,D,B,G;const W=1;for(let K=W;K<i-W;K++){const ne=K*r;for(let ye=W;ye<r-W;ye++){if(n&&!n[ne+ye]){E[ne+ye]=0;continue}let y=8;if(n&&(y=n[ne-r+ye-1]+n[ne-r+ye]+n[ne-r+ye+1]+n[ne+ye-1]+n[ne+ye+1]+n[ne+r+ye-1]+n[ne+r+ye]+n[ne+r+ye+1],y<7)){E[ne+ye]=0,s[ne+ye]=0;continue}y===7?(I=n[ne-r+ye-1]?_[ne-r+ye-1]:_[ne+ye],x=n[ne-r+ye]?_[ne-r+ye]:_[ne+ye],T=n[ne-r+ye+1]?_[ne-r+ye+1]:_[ne+ye],M=n[ne+ye-1]?_[ne+ye-1]:_[ne+ye],k=n[ne+ye+1]?_[ne+ye+1]:_[ne+ye],D=n[ne+r+ye-1]?_[ne+r+ye-1]:_[ne+ye],B=n[ne+r+ye]?_[ne+r+ye]:_[ne+ye],G=n[ne+r+ye+1]?_[ne+r+ye+1]:_[ne+ye]):(I=_[ne-r+ye-1],x=_[ne-r+ye],T=_[ne-r+ye+1],M=_[ne+ye-1],k=_[ne+ye+1],D=_[ne+r+ye-1],B=_[ne+r+ye],G=_[ne+r+ye+1]);const C=(T+k+k+G-(I+M+M+D))*g,L=(D+B+B+G-(I+x+x+T))*b,F=Math.sqrt(1+C*C+L*L);let ae=0;if(v==="traditional"){let q=255*(u+l*L-a*C)/F;q<0&&(q=0),ae=q}else{const q=p.length;for(let fe=0;fe<q;fe++){let te=255*(d[fe]+p[fe]*L-c[fe]*C)/F;te<0&&(te=0),ae+=te*m[fe]}}E[ne+ye]=255&ae}}for(let K=0;K<i;K++)E[K*r]=E[K*r+1],E[(K+1)*r-1]=E[(K+1)*r-2];for(let K=1;K<r-1;K++)E[K]=E[K+r],E[K+(i-1)*r]=E[K+(i-2)*r];return new Nr({width:r,height:i,pixels:[E],mask:n?s:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function eMe(e,t,r,i){if(!pn(e)||!pn(t))return;const{min:n,max:s}=i,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],c=255.00001/(s-n),p=new Uint8ClampedArray(u.length),d=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=r.length-1;for(let b=0;b<u.length;b++){if(l&&l[b]===0)continue;const v=Math.floor((u[b]-n)*c),[_,E]=r[v<0?0:v>g?g:v],I=o[b],x=I*E,T=x*(1-Math.abs(_%2-1)),M=I-x;switch(Math.floor(_)){case 0:p[b]=x+M,d[b]=T+M,m[b]=M;break;case 1:p[b]=T+M,d[b]=x+M,m[b]=M;break;case 2:p[b]=M,d[b]=x+M,m[b]=T+M;break;case 3:p[b]=M,d[b]=T+M,m[b]=x+M;break;case 4:p[b]=T+M,d[b]=M,m[b]=x+M;break;case 5:case 6:p[b]=x+M,d[b]=M,m[b]=T+M}}e.pixels=[p,d,m],e.updateStatistics()}const MB=ot.getLogger("esri.renderers.support.RasterSymbolizer");function tMe(e,t){const{attributeTable:r,bandCount:i}=e;return!(Ne(r)||i>1||t&&r.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function rMe(e){const{bandCount:t,dataType:r,pixelType:i}=e;return r==="elevation"||r==="generic"&&t===1&&(i==="s16"||i==="f32"||i==="f64")}function iMe(e){const{bandCount:t,colormap:r}=e;return de(r)&&r.length&&t===1}let ay=class extends Je{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e&&e.pixelBlock;if(!IB(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=XV(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{const{extent:i}=e,n=i.spatialReference.isGeographic,s={x:(i.xmax-i.xmin)/t.width,y:(i.ymax-i.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:n,resolution:s});break}}return r}catch(r){return MB.error("symbolize",r.message),t}}simpleStretch(e,t){if(!IB(e))return e;try{return e.pixels.length>3&&(e=XV(e,[0,1,2])),uC(e,t)}catch(r){return MB.error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:o,offset:a}=this.lookup?.colormapLut||{};return{colormap:o,colormapOffset:a,type:"lut"}}const{pixelBlock:t,isGCS:r,resolution:i,bandIds:n}=e,{rendererJSON:s}=this;return s.type==="rasterStretch"?this._generateStretchWebGLParams(t,s,n):s.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(s,r,i):s.type==="vectorField"?this._generateVectorFieldWebGLParams(s):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:X$(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:t?X$(e,this.lookup.colormapLut):zSe(e,this.lookup.remapLut)}_symbolizeStretch(e,t){const{rasterInfo:r}=this,{pixelType:i,bandCount:n}=r,s=this.rendererJSON,o=["u8","u16","s8","s16"].includes(i);let a,l;const{dra:u}=s,{gamma:c}=this.lookup;if(s.stretchType==="histogramEqualization"){const p=u?null:this.lookup.histogramLut,d=pw(s,{rasterInfo:r,pixelBlock:e,bandIds:t,returnHistogramLut:!p}),m=uC(e,{...d,gamma:c});l=eB(m,{lut:u?d.histogramLut:p,offset:0})}else if(o){if(u){const p=pw(s,{rasterInfo:r,pixelBlock:e,bandIds:t});a=EB({pixelType:i,...p,gamma:c})}else if(this._isLUTChanged()){if(!this.bind().success)return e;a=this.lookup?this.lookup.stretchLut:null}else a=this.lookup?this.lookup.stretchLut:null;if(!a)return e;n>1&&t?.length===e?.pixels.length&&a?.lut.length===n&&(a={lut:t.map(p=>a.lut[p]),offset:a.offset}),l=eB(e,a)}else{const p=pw(s,{rasterInfo:r,pixelBlock:e,bandIds:t});l=uC(e,{...p,gamma:c})}if(s.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;l=X$(l,this.lookup.colormapLut)}return l}_symbolizeShadedRelief(e,t){const r=this.rendererJSON,i={...r,...t},n=XEe(e,i);if(!r.colorRamp)return n;let s;if(this._isLUTChanged(!0)){if(!this.bind().success)return n;s=this.lookup?this.lookup.hsvMap:null}else s=this.lookup?this.lookup.hsvMap:null;if(!s)return n;const o=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return eMe(n,e,s,o),n}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:i}=this.rasterInfo,n=e.field1;if(!n)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const s=e.defaultSymbol,o=t===1&&["u8","s8"].includes(i);if(!tMe(this.rasterInfo,n)&&!o)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const a=[];if(r){const u=r.fields.find(c=>c.name.toLowerCase()==="value");if(!u)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach(c=>{const p=e.uniqueValueInfos.find(d=>String(d.value)===String(c.attributes[n]))?.symbol?.color;p?a.push([c.attributes[u.name]].concat(p)):s&&a.push([c.attributes[u.name]].concat(s.color))})}else{if(n.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};e.uniqueValueInfos.forEach(u=>{const c=u?.symbol?.color;c?a.push([parseInt(""+u.value,10)].concat(c)):s&&a.push([parseInt(""+u.value,10)].concat(s.color))})}if(a.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const l=uw({colormap:a});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=!0,{success:!0}}_updateColormapRenderer(e){if(!iMe(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const t=e.colormapInfos.map(i=>[i.value].concat(i.color)).sort((i,n)=>i[0]-n[0]);if(!t||t.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=uw({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,{success:!0}}_updateShadedReliefRenderer(e){if(!rMe(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){const t=Cg(e.colorRamp,256,!0),r=uw({colormap:t}),i=[],n=r.indexedColormap;for(let s=0;s<n.length;s+=4){const o=bI({r:n[s],g:n[s+1],b:n[s+2]});i.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:i}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:t,pixelType:r}=this.rasterInfo,i=de(t)?t.fields.find(o=>o.name.toLowerCase()==="value"):null,n=de(t)?t.fields.find(o=>o.name.toLowerCase()===e.field.toLowerCase()):null,s=i!=null&&n!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||s,tableValueField:i,tableBreakField:n}}_updateClassBreaksRenderer(e){const{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:i,tableBreakField:n}=this._analyzeClassBreaks(e),s=e.classBreakInfos;if(!s?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const o=s.sort((p,d)=>p.classMaxValue-d.classMaxValue),a=o[o.length-1];let l=e.minValue;if(!r){const p=[];for(let d=0;d<o.length;d++)p.push({value:o[d].classMinValue??l,mappedColor:o[d].symbol.color}),l=o[d].classMaxValue;return p.push({value:a.classMaxValue,mappedColor:a.symbol.color}),this.lookup={rendererJSON:e,remapLut:p},this.canRenderInWebGL=!1,{success:!0}}const u=[];if(i!=null&&n!==null&&i!==n){const p=i.name,d=n.name,m=o[o.length-1],{classMaxValue:g}=m;l=e.minValue;for(const b of t.features){const v=b.attributes[p],_=b.attributes[d],E=_===g?m:_<l?null:o.find(({classMaxValue:I})=>I>_);E&&u.push([v].concat(E.symbol.color))}}else{l=Math.floor(e.minValue);for(let p=0;p<o.length;p++){const d=o[p];for(let m=l;m<d.classMaxValue;m++)u.push([m].concat(d.symbol.color));l=Math.ceil(d.classMaxValue)}a.classMaxValue===l&&u.push([a.classMaxValue].concat(a.symbol.color))}const c=uw({colormap:u,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:c},this.canRenderInWebGL=!0,{success:!0}}_isHistogramRequired(e){return e==="percentClip"||e==="histogramEqualization"}_isValidRasterStatistics(e){return de(e)&&e.length>0&&e[0].min!=null&&e[0].max!=null}_updateStretchRenderer(e){let{stretchType:t,dra:r}=e;if(!(t==="none"||e.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const i=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||i?.length||r||(t="minMax");const{computeGamma:n,useGamma:s,colorRamp:o}=e;let{gamma:a}=e;if(s&&n&&!a?.length){const c=e.statistics?.length?e.statistics:this.rasterInfo.statistics;a=ZEe(this.rasterInfo.pixelType,c)}const l=this.rasterInfo.pixelType,u=!r&&["u8","u16","s8","s16"].includes(l);if(t==="histogramEqualization"){const c=i.map(p=>ste(p));this.lookup={rendererJSON:e,histogramLut:c}}else if(u){const c=pw(e,{rasterInfo:this.rasterInfo}),p=EB({pixelType:l,...c,gamma:s?a:null});this.lookup={rendererJSON:e,stretchLut:p}}if(o){const c=Cg(o,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=uw({colormap:c}),this.lookup.rendererJSON=e}return this.lookup.gamma=s&&a?.length?a:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,t,r){let i=null,n=null;const s=this.lookup&&this.lookup.colormapLut;t.colorRamp&&s&&(i=s.indexedColormap,n=s.offset),t.stretchType==="histogramEqualization"&&(t={...t,stretchType:"minMax"});const{gamma:o}=this.lookup,a=!!(t.useGamma&&o&&o.some(E=>E!==1)),{minCutOff:l,maxCutOff:u,outMin:c,outMax:p}=pw(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});let d=0;de(e)&&(d=e.getPlaneCount(),d===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const m=Math.min(3,r?.length||d||this.rasterInfo.bandCount),g=new Float32Array(m),b=i||a?1:255;let v;for(v=0;v<m;v++)g[v]=(p-c)/(u[v]-l[v])/b;const _=new Float32Array(m);if(a)for(v=0;v<m;v++)o[v]>1?o[v]>2?_[v]=6.5+(o[v]-2)**2.5:_[v]=6.5+100*(2-o[v])**4:_[v]=1;return{bandCount:m,outMin:c/b,outMax:p/b,minCutOff:l,maxCutOff:u,factor:g,useGamma:a,gamma:a?o:[1,1,1],gammaCorrection:a?_:[1,1,1],colormap:i,colormapOffset:n,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t,r){let i=null,n=null;const s=this.lookup&&this.lookup.colormapLut;e.colorRamp&&s&&(i=s.indexedColormap,n=s.offset);const o={...e,isGCS:t,resolution:r},a=ote(o),l=this.rasterInfo.statistics?.[0];return{...a,minValue:l?.min??0,maxValue:l?.max??8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:i,colormapOffset:n}}_generateVectorFieldWebGLParams(e){const{style:t,inputUnit:r,outputUnit:i,visualVariables:n,symbolTileSize:s,flowRepresentation:o}=e;let a;const l=this.rasterInfo.statistics?.[0].min??0,u=this.rasterInfo.statistics?.[0].max??50,c=n?.find(_=>_.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:u,maxSize:.8*s,minDataValue:l,minSize:.2*s},p=c.minDataValue??l,d=c.maxDataValue??u,m=de(c.maxSize)&&de(c.minSize)?[c.minSize/s,c.maxSize/s]:[.2,.8];if(t==="wind_speed"){const _=(m[0]+m[1])/2;m[0]=m[1]=_}const g=de(p)&&de(d)?[p,d]:null;if(t==="classified_arrow")if(de(p)&&de(d)&&de(c)){a=[];const _=(c.maxDataValue-c.minDataValue)/5;for(let E=0;E<6;E++)a.push(c.minDataValue+_*E)}else a=[0,1e-6,3.5,7,10.5,14];const b=o==="flow_to"==(t==="ocean_current_kn"||t==="ocean_current_m")?0:Math.PI,v=n?.find(_=>_.type==="rotationInfo");return{breakValues:a,dataRange:g,inputUnit:r,outputUnit:i,symbolTileSize:s,symbolPercentRange:m,style:t||"single_arrow",rotation:b,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":v?.rotationType||e.rotationType,type:"vectorField"}}};function IB(e){return pn(e)&&e.validPixelCount!==0}h([f({json:{write:!0}})],ay.prototype,"rendererJSON",void 0),h([f({type:mS,json:{write:!0}})],ay.prototype,"rasterInfo",void 0),h([f({json:{write:!0}})],ay.prototype,"lookup",void 0),h([f()],ay.prototype,"canRenderInWebGL",void 0),ay=h([me("esri.renderers.support.RasterSymbolizer")],ay);const nMe=ay;function e0(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function Hl(e){return typeof e=="string"?fn(e):Pe(e)}function hm(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){i[n]=[];for(let o=0;o<s.length;o++)i[n][o]=hm(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}let u1=class extends Je{constructor(){super(...arguments),this.north=null,this.up=null,this.spatialReference=null}};h([f({type:Number,json:{write:!0}})],u1.prototype,"north",void 0),h([f({type:Number,json:{write:!0}})],u1.prototype,"up",void 0),h([f({type:wt,json:{write:!0}})],u1.prototype,"spatialReference",void 0),u1=h([me("esri.rest.support.ImageAngleResult")],u1);const sMe=u1;let mu=class extends Je{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};h([f({json:{write:!0}})],mu.prototype,"catalogItemVisibilities",void 0),h([f({type:Yg,json:{write:!0}})],mu.prototype,"catalogItems",void 0),h([f({type:At,json:{write:!0}})],mu.prototype,"location",void 0),h([f({json:{write:!0}})],mu.prototype,"name",void 0),h([f({json:{write:!0}})],mu.prototype,"objectId",void 0),h([f({json:{write:!0}})],mu.prototype,"processedValues",void 0),h([f({json:{write:!0}})],mu.prototype,"properties",void 0),h([f({json:{write:!0}})],mu.prototype,"value",void 0),mu=h([me("esri.rest.support.ImageIdentifyResult")],mu);const oMe=mu;let XM=class extends Je{constructor(){super(...arguments),this.geometries=null}};h([f({json:{write:!0}})],XM.prototype,"geometries",void 0),XM=h([me("esri.rest.support.ImagePixelLocationResult")],XM);const aMe=XM;let qh=class extends Je{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};h([f({json:{write:!0}})],qh.prototype,"attributes",void 0),h([f({type:At,json:{write:!0}})],qh.prototype,"location",void 0),h([f({json:{write:!0}})],qh.prototype,"locationId",void 0),h([f({json:{write:!0}})],qh.prototype,"rasterId",void 0),h([f({json:{write:!0}})],qh.prototype,"resolution",void 0),h([f({json:{write:!0}})],qh.prototype,"pixelValue",void 0),qh=h([me("esri.rest.support.ImageSample")],qh);const lMe=qh;let e5=class extends Je{constructor(){super(...arguments),this.samples=null}};h([f({type:[lMe],json:{write:!0}})],e5.prototype,"samples",void 0),e5=h([me("esri.rest.support.ImageSampleResult")],e5);const uMe=e5;function ate(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const r=[];t.start!=null&&r.push(t.start),t.end==null||r.includes(t.end)||r.push(t.end),e.time=r.join(",")}}async function lte(e,t,r){const i=Hl(e),n=t.geometry?[t.geometry]:[],s=await Eb(n),o=t.toJSON();ate(o);const a=s&&s[0];de(a)&&(o.geometry=a.toJSON());const l=hm({...i.query,f:"json",...o});return e0(l,r)}async function cMe(e,t,r){const i=t.toJSON();de(i.angleName)&&(i.angleName=i.angleName.join(",")),de(t.point)&&t.point.spatialReference?.imageCoordinateSystem&&(i.point.spatialReference=B9(t.point.spatialReference)),de(t.spatialReference)&&t.spatialReference.imageCoordinateSystem&&(i.spatialReference=ute(t.spatialReference));const n=Hl(e),s=hm({...n.query,f:"json",...i}),o=e0(s,r),{data:a}=await Mt(`${n.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new wt({wkid:0,imageCoordinateSystem:a.spatialReference}):wt.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new sMe(a)}async function hMe(e,t,r){const i=t.toJSON(),{geometries:n}=t;for(let u=0;u<n.length;u++)n[u].spatialReference?.imageCoordinateSystem&&(i.geometries.geometries[u].spatialReference=B9(n[u].spatialReference));const s=Hl(e),o=hm({...s.query,f:"json",...i}),a=e0(o,r),{data:l}=await Mt(`${s.path}/computePixelLocation`,a);return aMe.fromJSON(l)}async function pMe(e,t,r){const i=await lte(e,t,r),n=Hl(e),{data:s}=await Mt(`${n.path}/computeStatisticsHistograms`,i),{statistics:o}=s;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:s.histograms}}async function dMe(e,t,r){const i=await lte(e,t,r),n=Hl(e),{data:s}=await Mt(`${n.path}/computeHistograms`,i);return{histograms:s.histograms}}async function fMe(e,t,r){const i=t.toJSON();ate(i),i.outFields?.length&&(i.outFields=i.outFields.join(","));const n=(await Eb(t.geometry))?.[0];de(n)&&(i.geometry=n.toJSON());const s=Hl(e),o=hm({...s.query,f:"json",...i}),a=e0(o,r),{data:l}=await Mt(`${s.path}/getSamples`,a),u=l?.samples?.map(c=>{const p=c.value==="NaN"||c.value===""?null:c.value.split(" ").map(d=>Number(d));return{...c,pixelValue:p}});return uMe.fromJSON({samples:u})}async function TB(e,t,r){const i=Hl(e),n=t.geometry?[t.geometry]:[];return Eb(n).then(s=>{const o=t.toJSON(),a=s&&s[0];de(a)&&(o.geometry=JSON.stringify(a.toJSON()));const l=hm({...i.query,f:"json",...o}),u=e0(l,r);return Mt(i.path+"/identify",u)}).then(s=>oMe.fromJSON(s.data))}function B9(e){const{imageCoordinateSystem:t}=e;if(t){const{id:r,referenceServiceName:i}=t;return r!=null?i?{icsid:r,icsns:i}:{icsid:r}:{ics:t}}return e.toJSON()}function ute(e,t){const r=B9(e),{icsid:i,icsns:n,wkid:s}=r;return i!=null?n==null||t?.toLowerCase().includes("/"+n.toLowerCase()+"/")?`0:${i}`:JSON.stringify(r):s?s.toString():JSON.stringify(r)}function cte(e){const t={};for(const r in e){if(r==="declaredClass")continue;const i=e[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){t[r]=[];for(let n=0;n<i.length;n++)t[r][n]=cte(i[n])}else typeof i=="object"?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}var Qd;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Qd||(Qd={}));const AB=4294967296,mMe=new TextDecoder("utf-8"),yMe=We("safari")||We("ios")?6:We("ff")?12:32;class cg{constructor(t,r,i=0,n=t?t.byteLength:0){this._tag=0,this._dataType=Qd.unknown,this._init(t,r,i,n)}_init(t,r,i,n){this._data=t,this._dataView=r,this._pos=i,this._end=n}clone(){return new cg(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getUint32(r+4,!0)*AB;return this._skip(8),i}getSFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getInt32(r+4,!0)*AB;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){const t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,n){const s=this.getMessage(),o=t(s,r,i,n);return s.release(),o}processMessage(t){const r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){const t=this._getLength(),r=cg.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){cg.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Qd.varint:this._decodeVarint();break;case Qd.fixed64:this._skip(8);break;case Qd.delimited:this._skip(this._getLength());break;case Qd.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r,i=this._pos,n=0;if(this._end-i>=10)do{if(r=t[i++],n|=127&r,(128&r)==0||(r=t[i++],n|=(127&r)<<7,(128&r)==0)||(r=t[i++],n|=(127&r)<<14,(128&r)==0)||(r=t[i++],n|=(127&r)<<21,(128&r)==0)||(r=t[i++],n+=268435456*(127&r),(128&r)==0)||(r=t[i++],n+=34359738368*(127&r),(128&r)==0)||(r=t[i++],n+=4398046511104*(127&r),(128&r)==0)||(r=t[i++],n+=562949953421312*(127&r),(128&r)==0)||(r=t[i++],n+=72057594037927940*(127&r),(128&r)==0)||(r=t[i++],n+=9223372036854776e3*(127&r),(128&r)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(r=t[i],(128&r)!=0);)++i,n+=(127&r)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,n+=r*s}return this._pos=i,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==Qd.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>yMe){const o=t.subarray(r,i);return mMe.decode(o)}let n="",s="";for(let o=r;o<i;++o){const a=t[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}}cg.pool=new zu(cg,null,e=>{e._data=null,e._dataView=null});class vo{constructor(t=[],r=[],i=!1){this.lengths=t??[],this.coords=r??[],this.hasIndeterminateRingOrder=i}static fromRect(t){const[r,i,n,s]=t,o=n-r,a=s-i;return new vo([5],[r,i,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const n=this.lengths[i];for(let s=0;s<n;s++)t(this.coords[2*(s+r)],this.coords[2*(s+r)+1]);r+=n}}clone(t){return t?(t.set(this.coords),new vo(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new vo(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class hh{constructor(t=null,r={},i,n){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new hh(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function gMe(e){return!(Ne(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Tat extends hh{}class D4{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new D4;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const hte=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Aat{constructor(t){this.options=t,this.geometryTypes=hte,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new D4}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Xn(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=wv(this.options.sourceSpatialReference)/wv(t.spatialReference);if(r!==1)for(const i of t.features){if(!gMe(i))continue;const n=i.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new hh}createSpatialReference(){return{wkid:0}}createGeometry(){return new vo}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new vo}}const $B=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],CB=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],kB=["upperLeft","lowerLeft"];function OB(e){return e>=$B.length?null:$B[e]}function vMe(e){return e>=CB.length?null:CB[e]}function RB(e){return e>=kB.length?null:kB[e]}function PB(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function bMe(e,t,r){const n=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const s=e.getUInt32(),o=e.pos()+s;let a=0;for(;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function wMe(e,t,r){const s=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(;e.pos()<l;)t.addLength(s,e.getUInt32(),u++);break}case 3:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(t.allocateCoordinates(s);e.pos()<l;)t.addCoordinate(s,e.getSInt64(),u),u++,u===o&&(u=0);break}default:e.skip()}return s}function _Me(e){const n=new vo;let s="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:s=hte[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:s}}function xMe(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function SMe(e){const a={type:OB(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=OB(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=vMe(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function EMe(e){const i={};for(;e.next();)switch(e.tag()){case 1:i.name=e.getString();break;case 2:i.isSystemMaintained=e.getBool();break;default:e.skip()}return i}function MMe(e,t,r,i){const a=t.createFeature(r);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=i[l++].name;a.attributes[u]=e.processMessage(xMe);break}case 2:a.geometry=e.processMessageWithArgs(wMe,t,r);break;case 4:a.centroid=e.processMessageWithArgs(bMe,t,r);break;default:e.skip()}return a}function IMe(e){const s=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function TMe(e){const s=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function AMe(e){const n={originPosition:RB(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=RB(e.getEnum());break;case 2:n.scale=e.processMessage(IMe);break;case 3:n.translate=e.processMessage(TMe);break;default:e.skip()}return n}function $Me(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function CMe(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function kMe(e,t){const b=t.createFeatureResult();b.geometryType=PB(t,0);let v=!1;for(;e.next();)switch(e.tag()){case 1:b.objectIdFieldName=e.getString();break;case 3:b.globalIdFieldName=e.getString();break;case 4:b.geohashFieldName=e.getString();break;case 5:b.geometryProperties=e.processMessage($Me);break;case 7:b.geometryType=PB(t,e.getEnum());break;case 8:b.spatialReference=e.processMessageWithArgs(CMe,t);break;case 10:b.hasZ=e.getBool();break;case 11:b.hasM=e.getBool();break;case 12:b.transform=e.processMessage(AMe);break;case 9:{const _=e.getBool();b.exceededTransferLimit=_;break}case 13:t.addField(b,e.processMessage(SMe));break;case 15:v||(t.prepareFeatures(b),v=!0),t.addFeature(b,e.processMessageWithArgs(MMe,t,b,b.fields));break;case 2:b.uniqueIdField=e.processMessage(EMe);break;default:e.skip()}return t.finishFeatureResult(b),b}function OMe(e,t){const n={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(_Me);break;case 1:n.featureResult=e.processMessageWithArgs(kMe,t);break;default:e.skip()}return de(s)&&n.featureResult&&t.addQueryGeometry(n,s),n}function RMe(e,t){try{const i=new cg(new Uint8Array(e),new DataView(e)),n={};for(;i.next();)i.tag()===2?n.queryResult=i.processMessageWithArgs(OMe,t):i.skip();return n}catch(r){throw new $e("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function PMe(e,t){const r=RMe(e,t),i=r.queryResult.featureResult,n=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const a of i.features)a.attributes&&(a.objectId=a.attributes[o])}return i&&(i.queryGeometry=n,i.queryGeometryType=s),i}const LB="Layer does not support extent calculation.";function pte(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function dte(e,t){const r=e.geometry,i=e.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const n=i;let s,o,a;if(de(r)&&(o=r.spatialReference,a=r.spatialReference.wkid||JSON.stringify(r.spatialReference),n.geometryType=Jg(r),n.geometry=pte(r,e.compactGeometryEnabled),n.inSR=a),i.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(n.objectIds=i.objectIds.join(",")),i.orderByFields&&(n.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete n.outFields:i.outFields.includes("*")?n.outFields="*":n.outFields=i.outFields.join(","),i.outSR?(n.outSR=i.outSR.wkid||JSON.stringify(i.outSR),s=e.outSpatialReference):r&&(i.returnGeometry||i.returnCentroid)&&(n.outSR=n.inSR,s=o),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(n.outStatistics=JSON.stringify(i.outStatistics)),i.pixelSize&&(n.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&de(o)&&de(e.quantizationParameters)&&de(e.quantizationParameters.extent)&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,n.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(n.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(n.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(n.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const l=i.timeExtent,{start:u,end:c}=l;u==null&&c==null||(n.time=u===c?u:`${u??"null"},${c??"null"}`),delete i.timeExtent}return e.defaultSpatialReferenceEnabled&&de(o)&&de(s)&&o.equals(s)&&(n.defaultSR=n.inSR,delete n.inSR,delete n.outSR),n}async function fte(e,t,r,i){const n=de(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Mb(e,t,"json",i);return $6(t,r,n.data),n}async function LMe(e,t,r,i){if(de(t.timeExtent)&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const n=await mte(e,t,i),s=n;return s.data=PMe(n.data,r),s}function mte(e,t,r){return Mb(e,t,"pbf",r)}function yte(e,t,r){return de(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Mb(e,t,"json",r,{returnIdsOnly:!0})}function gte(e,t,r){return de(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Mb(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function NMe(e,t,r){return de(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Mb(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(i=>{const n=i.data;if(n.hasOwnProperty("extent"))return i;if(n.features)throw new Error(LB);if(n.hasOwnProperty("count"))throw new Error(LB);return i})}function Mb(e,t,r,i={},n={}){const s=typeof e=="string"?fn(e):e,o=t.geometry?[t.geometry]:[];return i.responseType=r==="pbf"?"array-buffer":"json",Eb(o,null,i).then(a=>{const l=a&&a[0];de(l)&&((t=t.clone()).geometry=l);const u=cte({...s.query,f:r,...n,...dte(t,n)});return Mt(xg(s.path,"query"),{...i,query:{...u,...i.query}})})}var DMe=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:pte,executeQuery:fte,executeQueryForCount:gte,executeQueryForExtent:NMe,executeQueryForIds:yte,executeQueryPBF:LMe,executeQueryPBFBuffer:mte,queryToQueryStringParameters:dte,runQuery:Mb},Symbol.toStringTag,{value:"Module"}));async function t5(e,t,r){const i=await FMe(e,t,r);return Yg.fromJSON(i)}async function FMe(e,t,r){const i=Hl(e),n={...r},s=jn.from(t),{data:o}=await fte(i,s,s.sourceSpatialReference,n);return o}function ms(e,t){return e?t?4:3:t?3:2}const Ib=ot.getLogger("esri.layers.graphics.featureConversionUtils"),vte={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},bte=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s},SI=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2]},jMe=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+3]},wte=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2],e[r+3]=t[i+3]};function z9(e,t,r,i){if(e){if(r)return t&&i?wte:SI;if(t&&i)return jMe}else if(t&&i)return SI;return bte}function cC({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function hC({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function NB({scale:e,translate:t},r){return r*e[0]+t[0]}function DB({scale:e,translate:t},r){return t[1]-r*e[1]}function $at(e,t,r){return e?t?r?H9(e):G9(e):r?q9(e):F4(e):null}function F4(e){const t=e.coords;return{x:t[0],y:t[1]}}function _te(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function G9(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function UMe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function q9(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function VMe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function H9(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function BMe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function zMe(e,t,r,i){let n=F4;r&&i?n=H9:r?n=G9:i&&(n=q9);for(const s of t){const{geometry:o,attributes:a}=s,l=de(o)?n(o):null;e.push({attributes:a,geometry:l})}return e}function xte(e,t){return e&&t?BMe:e?UMe:t?VMe:_te}function Ste(e,t,r,i,n){const s=xte(r,i);for(const o of t){const{geometry:a,attributes:l}=o;let u;a&&(u=s(new vo,a)),e.push(new hh(u,l,null,l[n]))}return e}function GMe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;s&&(a=Ete(s,r,i)),e.push({attributes:o,geometry:a})}return e}function Ete(e,t,r){if(Ne(e))return null;const i=ms(t,r),n=[];for(let s=0;s<e.coords.length;s+=i){const o=[];for(let a=0;a<i;a++)o.push(e.coords[s+a]);n.push(o)}return t?r?{points:n,hasZ:t,hasM:r}:{points:n,hasZ:t}:r?{points:n,hasM:r}:{points:n}}function Mte(e,t,r,i,n){const s=ms(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=Ite(new vo,a,s)),e.push(new hh(u,l,null,l[n]))}return e}function Ite(e,t,r=ms(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let n=0;for(const s of t.points)for(let o=0;o<r;o++)i[n++]=s[o];return e}function qMe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;de(s)&&(a=Tte(s,r,i)),e.push({attributes:o,geometry:a})}return e}function Tte(e,t,r){if(!e)return null;const i=ms(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const p=[];for(let d=0;d<i;d++)p.push(n[a++]);u.push(p)}o.push(u)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function Ate(e,t,r,i,n){const s=ms(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=$te(new vo,a,s)),e.push(new hh(u,l,null,l[n]))}return e}function $te(e,t,r=ms(t.hasZ,t.hasM)){const{lengths:i,coords:n}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)n[s++]=a[l];i.push(o.length)}return e}function HMe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o,centroid:a}=n;let l;if(de(s)&&(l=Cte(s,r,i)),de(a)){const u=F4(a);e.push({attributes:o,centroid:u,geometry:l})}else e.push({attributes:o,geometry:l})}return e}function Cte(e,t,r){if(!e)return null;const i=ms(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let c=0;c<l;c++){const p=[];for(let d=0;d<i;d++)p.push(n[a++]);u.push(p)}o.push(u)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function kte(e,t,r,i,n){for(const s of t){const o=s.geometry,a=s.centroid,l=s.attributes;let u;o&&(u=Ote(new vo,o,r,i)),de(a)?e.push(new hh(u,l,_te(new vo,a),l[n])):e.push(new hh(u,l,null,l[n]))}return e}function Ote(e,t,r=t.hasZ,i=t.hasM){return WMe(e,t.rings,r,i),e}function WMe(e,t,r,i){const n=ms(r,i),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const l of t){for(const u of l)for(let c=0;c<n;c++)o[a++]=u[c];s.push(l.length)}return e}const ev=[],d2=[];function Cat(e,t,r,i,n){ev[0]=e;const[s]=Rte(d2,ev,t,r,i,n);return ev.length=d2.length=0,s}function Rte(e,t,r,i,n,s){if(e.length=0,!r){for(const o of t){const a=o.attributes[s];e.push(new hh(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return Ste(e,t,i,n,s);case"esriGeometryMultipoint":return Mte(e,t,i,n,s);case"esriGeometryPolyline":return Ate(e,t,i,n,s);case"esriGeometryPolygon":return kte(e,t,i,n,s);default:Ib.error("convertToFeatureSet:unknown-geometry",new $e(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function kat(e,t,r,i,n,s){const o=e.length;switch(r){case"esriGeometryPoint":Ste(e,t,i,n,s);break;case"esriGeometryMultipoint":Mte(e,t,i,n,s);break;case"esriGeometryPolyline":Ate(e,t,i,n,s);break;case"esriGeometryPolygon":kte(e,t,i,n,s);break;default:Ib.error("convertToFeatureSet:unknown-geometry",new $e(`Unable to parse unknown geometry type '${r}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=r,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function Oat(e,t,r,i){d2[0]=e,Pte(ev,d2,t,r,i);const n=ev[0];return ev.length=d2.length=0,n}function Rat(e,t,r){if(Ne(e))return null;const i=new vo;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),AN(e)?xte(t??e.z!=null,r??e.m!=null)(i,e):ig(e)?Ote(i,e,t,r):$N(e)?$te(i,e,ms(t,r)):TN(e)?Ite(i,e,ms(t,r)):void Ib.error("convertFromGeometry:unknown-geometry",new $e(`Unable to parse unknown geometry type '${e}'`))}function JMe(e,t,r,i){const n=e&&("coords"in e?e:e.geometry);if(Ne(n))return null;switch(t){case"esriGeometryPoint":{let s=F4;return r&&i?s=H9:r?s=G9:i&&(s=q9),s(n)}case"esriGeometryMultipoint":return Ete(n,r,i);case"esriGeometryPolyline":return Tte(n,r,i);case"esriGeometryPolygon":return Cte(n,r,i);default:return void Ib.error("convertToGeometry:unknown-geometry",new $e(`Unable to parse unknown geometry type '${t}'`))}}function ZMe(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function Pte(e,t,r,i,n){if(e.length=0,Ne(r))return ZMe(e,t);switch(r){case"esriGeometryPoint":return zMe(e,t,i,n);case"esriGeometryMultipoint":return GMe(e,t,i,n);case"esriGeometryPolyline":return qMe(e,t,i,n);case"esriGeometryPolygon":return HMe(e,t,i,n);default:Ib.error("convertToFeatureSet:unknown-geometry",new $e(`Unable to parse unknown geometry type '${r}'`))}return e}function Pat(e){const{objectIdFieldName:t,spatialReference:r,transform:i,fields:n,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:p,queryGeometryType:d}=e,m={features:Pte([],a,l,o,s),fields:n,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:JMe(p,d,!1,!1)};return i&&(m.transform=i),u&&(m.exceededTransferLimit=u),s&&(m.hasM=s),o&&(m.hasZ=o),m}function Lat(e,t){const r=new D4,{hasM:i,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:c,fields:p}=e;return p&&(r.fields=p),r.geometryType=l,r.objectIdFieldName=o||t,r.spatialReference=a,r.objectIdFieldName?(s&&Rte(r.features,s,l,n,i,r.objectIdFieldName),u&&(r.exceededTransferLimit=u),i&&(r.hasM=i),n&&(r.hasZ=n),c&&(r.transform=c),r):(Ib.error(new $e("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function Nat(e){const{transform:t,features:r,hasM:i,hasZ:n}=e;if(!t)return e;for(const s of r)de(s.geometry)&&jB(s.geometry,s.geometry,i,n,t),de(s.centroid)&&jB(s.centroid,s.centroid,i,n,t);return e.transform=null,e}function Dat(e,t){const{geometryType:r,features:i,hasM:n,hasZ:s}=t;if(!e)return t;for(let o=0;o<i.length;o++){const a=i[o],l=a.weakClone();l.geometry=new vo,FB(l.geometry,a.geometry,n,s,r,e),a.centroid&&(l.centroid=new vo,FB(l.centroid,a.centroid,n,s,"esriGeometryPoint",e)),i[o]=l}return t.transform=e,t}function FB(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),Ne(t)||!t.coords.length)return null;const l=vte[n],{coords:u,lengths:c}=t,p=ms(r,i),d=ms(r&&o,i&&a),m=z9(r,i,o,a);if(!c.length)return m(e.coords,u,0,0,cC(s,u[0]),hC(s,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let g,b,v,_,E=0,I=0,x=I;for(const T of c){if(T<l)continue;let M=0;I=x,v=g=cC(s,u[E]),_=b=hC(s,u[E+1]),m(e.coords,u,I,E,v,_),M++,E+=p,I+=d;for(let k=1;k<T;k++,E+=p)v=cC(s,u[E]),_=hC(s,u[E+1]),v===g&&_===b||(m(e.coords,u,I,E,v-g,_-b),I+=d,M++,g=v,b=_);M>=l&&(e.lengths.push(M),x=I)}return e.coords.length=x,e.coords.length?e:null}function Fat(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=vte[n],{coords:u,lengths:c}=t,p=ms(r,i),d=ms(r&&o,i&&a),m=z9(r,i,o,a);if(!c.length)return m(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=p,e;let g=0;const b=s*s;for(const v of c){if(v<l){g+=v*p;continue}const _=e.coords.length/d,E=g,I=g+(v-1)*p;m(e.coords,u,e.coords.length,E,u[E],u[E+1]),A8(e.coords,u,p,b,m,E,I),m(e.coords,u,e.coords.length,I,u[I],u[I+1]);const x=e.coords.length/d-_;x>=l?e.lengths.push(x):e.coords.length=_*d,g+=v*p}return e.coords.length?e:null}function KMe(e,t,r,i){const n=e[t],s=e[t+1],o=e[r],a=e[r+1],l=e[i],u=e[i+1];let c=o,p=a,d=l-c,m=u-p;if(d!==0||m!==0){const g=((n-c)*d+(s-p)*m)/(d*d+m*m);g>1?(c=l,p=u):g>0&&(c+=d*g,p+=m*g)}return d=n-c,m=s-p,d*d+m*m}function A8(e,t,r,i,n,s,o){let a,l=i,u=0;for(let c=s+r;c<o;c+=r)a=KMe(t,c,s,o),a>l&&(u=c,l=a);l>i&&(u-s>r&&A8(e,t,r,i,n,s,u),n(e,t,e.length,u,t[u],t[u+1]),o-u>r&&A8(e,t,r,i,n,u,o))}function jat(e,t,r,i){if(Ne(t)||!t.coords||!t.coords.length)return null;const n=ms(r,i);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let c=0;c<u.length;c+=n){const p=u[c],d=u[c+1];s=Math.min(s,p),a=Math.max(a,p),o=Math.min(o,d),l=Math.max(l,d)}}return e[0]=s,e[1]=o,e[2]=a,e[3]=l,e}function jB(e,t,r,i,n){const{coords:s,lengths:o}=t,a=r?i?wte:SI:i?SI:bte,l=ms(r,i);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,NB(n,s[0]),DB(n,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[u,c]=n.scale;let p=0;for(let d=0;d<o.length;d++){const m=o[d];e.lengths[d]=m;let g=NB(n,s[p]),b=DB(n,s[p+1]);a(e.coords,s,p,p,g,b),p+=l;for(let v=1;v<m;v++,p+=l)g+=s[p]*u,b-=s[p+1]*c,a(e.coords,s,p,p,g,b)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function Uat(e,t,r,i,n,s){const o=ms(r,i),a=z9(r,i,n,s),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1]);return e}function YMe(e,t,r,i){let n=0,s=e[i*t],o=e[i*(t+1)];for(let a=1;a<r;a++){const l=s+e[i*(t+a)],u=o+e[i*(t+a)+1],c=(l-s)*(u+o);s=l,o=u,n+=c}return .5*n}function Vat(e,t){const{coords:r,lengths:i}=e;let n=0,s=0;for(let o=0;o<i.length;o++)s+=YMe(r,n,i[o],t),n+=o;return Math.abs(s)}function Bat(e,t){if(Ne(e))return null;const r=e.clone(),i=e.coords,n=e.lengths;let s=0;for(let o=0;o<n.length;o++){const a=n[o];let l=i[t*s],u=i[t*s+1];for(let c=1;c<a;c++){const p=l+i[t*(s+c)],d=u+i[t*(s+c)+1];r.coords[t*(s+c)]=p,r.coords[t*(s+c)+1]=d,l=p,u=d}s+=a}return r}function QMe(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const n=t.find(s=>s.name===r);return n?XMe({tagName:i,tags:n.tags}):null}function XMe(e){const{tagName:t,tags:r}=e;if(!r||!t)return null;const i=r.find(n=>n.name===t);return i&&i.value||null}var $8;const e5e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Ao=$8=class extends Je{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=QMe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return e5e[t]||null}clone(){return new $8({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};h([f({type:String})],Ao.prototype,"contentType",void 0),h([f()],Ao.prototype,"exifInfo",void 0),h([f({readOnly:!0})],Ao.prototype,"orientationInfo",null),h([f({type:fr})],Ao.prototype,"id",void 0),h([f({type:String})],Ao.prototype,"globalId",void 0),h([f({type:String})],Ao.prototype,"keywords",void 0),h([f({type:String})],Ao.prototype,"name",void 0),h([f({json:{read:!1}})],Ao.prototype,"parentGlobalId",void 0),h([f({json:{read:!1}})],Ao.prototype,"parentObjectId",void 0),h([f({type:fr})],Ao.prototype,"size",void 0),h([f({json:{read:!1}})],Ao.prototype,"url",void 0),Ao=$8=h([me("esri.layers.support.AttachmentInfo")],Ao);const t5e=Ao;async function r5e(e,t,r){const i=Hl(e);return gte(i,jn.from(t),{...r}).then(n=>n.data.count)}async function Lte(e,t,r){const i=Hl(e);return yte(i,jn.from(t),{...r}).then(n=>n.data.objectIds)}async function Nte(e,t,r){const i=Hl(e),{renderingRule:n,sourceJSON:s}=t||{},o=n?JSON.stringify(n.rasterFunctionDefinition||n):null,a=hm({...i.query,renderingRule:o,f:"json"}),l=e0(a,r);e=i.path;const u=s||await Mt(e,l).then(ne=>ne.data),c=u.hasRasterAttributeTable?Mt(`${e}/rasterAttributeTable`,l):null,p=u.hasColormap?Mt(`${e}/colormap`,l):null,d=u.hasHistograms?Mt(`${e}/histograms`,l):null,m=u.currentVersion>=10.3?Mt(`${e}/keyProperties`,l):null,g=u.hasMultidimensions?Mt(`${e}/multidimensionalInfo`,l):null,b=await Promise.allSettled([c,p,d,m,g]);let v=null;if(u.minValues&&u.minValues.length===u.bandCount){v=[];for(let ne=0;ne<u.minValues.length;ne++)v.push({min:u.minValues[ne],max:u.maxValues[ne],avg:u.meanValues[ne],stddev:u.stdvValues[ne]})}const _=qt.fromJSON(u.extent),E=Math.ceil(_.width/u.pixelSizeX-.1),I=Math.ceil(_.height/u.pixelSizeY-.1),x=wt.fromJSON(u.spatialReference||u.extent.spatialReference),T=b[0].status==="fulfilled"&&b[0].value?Yg.fromJSON(b[0].value.data):null,M=b[1].status==="fulfilled"?b[1].value?.data.colormap:null,k=b[2].status==="fulfilled"?b[2].value?.data.histograms:null,D=b[3].status==="fulfilled"?b[3].value?.data??{}:{},B=b[4].status==="fulfilled"?b[4].value?.data.multidimensionalInfo:null;B?.variables?.length&&B.variables.forEach(ne=>{ne.statistics?.length&&ne.statistics.forEach(ye=>{ye.avg=ye.mean,ye.stddev=ye.standardDeviation})});const{defaultVariable:G,serviceDataType:W}=u;G&&G!==D.DefaultVariable&&(D.DefaultVariable=G),W&&W.includes("esriImageServiceDataTypeVector")&&!W.includes(D.DataType)&&(D.DataType=W.replace("esriImageServiceDataType",""));let K=u.noDataValue;return u.noDataValues?.length&&u.noDataValues.some(ne=>ne!==K)&&(K=u.noDataValues),new mS({width:E,height:I,bandCount:u.bandCount,extent:qt.fromJSON(u.extent),spatialReference:x,pixelSize:new At({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:x}),pixelType:u.pixelType.toLowerCase(),statistics:v,attributeTable:T,colormap:M,histograms:k,keyProperties:D,noDataValue:K,multidimensionalInfo:B})}function i5e(e,t,r){return Nte(e,{sourceJSON:t},r)}function n5e(e,t,r){return Nte(e,{renderingRule:t},r)}async function s5e(e,t,r){const i=Hl(e),n=hm({...i.query,f:"json"}),s=e0(n,r),o=`${i.path}/${t}/info`,a=Mt(`${o}`,s),l=Mt(`${o}/keyProperties`,s),u=await Promise.allSettled([a,l]),c=u[0].status==="fulfilled"?u[0].value.data:null,p=u[1].status==="fulfilled"?u[1].value.data:null;let d=null;c.statistics?.length&&(d=c.statistics.map(x=>({min:x[0],max:x[1],avg:x[2],stddev:x[3]})));const m=qt.fromJSON(c.extent),g=Math.ceil(m.width/c.pixelSizeX-.1),b=Math.ceil(m.height/c.pixelSizeY-.1),v=m.spatialReference,_=new At({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:v}),E=c.histograms?.length?c.histograms:null,I=new Vee({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new mS({width:g,height:b,bandCount:c.bandCount,extent:m,spatialReference:v,pixelSize:_,pixelType:c.pixelType.toLowerCase(),statistics:d,histograms:E,keyProperties:p,storageInfo:I})}var C8;let ly=C8=class extends Je{constructor(){super(...arguments),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new C8(Pe({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};h([f({type:[String],json:{name:"angleName",write:!0}})],ly.prototype,"angleNames",void 0),h([f({type:At,json:{write:!0}})],ly.prototype,"point",void 0),h([f({type:wt,json:{write:!0}})],ly.prototype,"spatialReference",void 0),h([f({type:fr,json:{write:!0}})],ly.prototype,"rasterId",void 0),ly=C8=h([me("esri.rest.support.ImageAngleParameters")],ly);const o5e=ly;var k8;let Ac=k8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=Jg(e),t[r]=e.toJSON())}clone(){return new k8(Pe({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};h([f({types:Up,json:{read:Hu}})],Ac.prototype,"geometry",void 0),h([et("geometry")],Ac.prototype,"writeGeometry",null),h([f({type:Al,json:{write:!0}})],Ac.prototype,"mosaicRule",void 0),h([f({type:Wr,json:{write:!0}})],Ac.prototype,"renderingRule",void 0),h([f({type:At,json:{write:!0}})],Ac.prototype,"pixelSize",void 0),h([f({json:{write:!0}})],Ac.prototype,"raster",void 0),h([f({type:ca,json:{read:{source:"time"},write:{target:"time"}}})],Ac.prototype,"timeExtent",void 0),Ac=k8=h([me("esri.rest.support.ImageHistogramParameters")],Ac);const UB=Ac;var O8;let Ji=O8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.renderingRules=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=Jg(e),t[r]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t&&t.mosaicMethod&&(t=Al.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON()))}set renderingRule(e){let t=e;t&&t.rasterFunction&&(t=Wr.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("renderingRule",t)}writeRenderingRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[r]=JSON.stringify(e.rasterFunctionDefinition))}writeRenderingRules(e,t,r){e!=null&&(t[r]=JSON.stringify(e.map(i=>i.rasterFunctionDefinition||i.toJSON())))}writePixelSize(e,t,r){e!=null&&(t[r]=JSON.stringify(e))}writeTimeExtent(e,t,r){if(e!=null){const i=de(e.start)?e.start.getTime():null,n=de(e.end)?e.end.getTime():null;t[r]=i!=null?n!=null?`${i},${n}`:`${i}`:null}}clone(){return new O8(Pe({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};h([f({json:{write:!0}})],Ji.prototype,"geometry",void 0),h([et("geometry")],Ji.prototype,"writeGeometry",null),h([f({type:Al,json:{write:!0}})],Ji.prototype,"mosaicRule",null),h([et("mosaicRule")],Ji.prototype,"writeMosaicRule",null),h([f({type:Wr,json:{write:!0}})],Ji.prototype,"renderingRule",null),h([et("renderingRule")],Ji.prototype,"writeRenderingRule",null),h([f({type:[Wr],json:{write:!0}})],Ji.prototype,"renderingRules",void 0),h([et("renderingRules")],Ji.prototype,"writeRenderingRules",null),h([f({type:At,json:{write:!0}})],Ji.prototype,"pixelSize",void 0),h([et("pixelSize")],Ji.prototype,"writePixelSize",null),h([f({type:Boolean,json:{write:!0}})],Ji.prototype,"returnGeometry",void 0),h([f({type:Boolean,json:{write:!0}})],Ji.prototype,"returnCatalogItems",void 0),h([f({type:Boolean,json:{write:!0}})],Ji.prototype,"returnPixelValues",void 0),h([f({type:Number,json:{write:!0}})],Ji.prototype,"maxItemCount",void 0),h([f({type:ca,json:{write:{target:"time"}}})],Ji.prototype,"timeExtent",void 0),h([et("timeExtent")],Ji.prototype,"writeTimeExtent",null),h([f({json:{write:!0}})],Ji.prototype,"raster",void 0),h([f({json:{write:!0}})],Ji.prototype,"viewId",void 0),h([f({type:Boolean,json:{write:!0}})],Ji.prototype,"processAsMultidimensional",void 0),Ji=O8=h([me("esri.rest.support.ImageIdentifyParameters")],Ji);const VB=Ji;var R8;let c1=R8=class extends Je{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(i=>i.toJSON())}}clone(){return new R8({geometries:this.geometries.map(e=>e.clone()),rasterId:this.rasterId})}};h([f({type:[At],json:{write:!0}})],c1.prototype,"geometries",void 0),h([et("geometries")],c1.prototype,"writeGeometry",null),h([f({type:fr,json:{write:!0}})],c1.prototype,"rasterId",void 0),c1=R8=h([me("esri.rest.support.ImagePixelLocationParameters")],c1);const a5e=c1;var P8;let Cs=P8=class extends Je{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=Jg(e),t[r]=e.toJSON())}set locations(e){if(e?.length){const t=new nm({spatialReference:e[0].spatialReference});t.points=e.map(r=>[r.x,r.y]),this._set("locations",e),this.geometry=t}}clone(){return new P8(Pe({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};h([f({types:Up,json:{read:Hu}})],Cs.prototype,"geometry",void 0),h([et("geometry")],Cs.prototype,"writeGeometry",null),h([f()],Cs.prototype,"locations",null),h([f({type:String,json:{type:Sf.jsonValues,read:Sf.read,write:Sf.write}})],Cs.prototype,"interpolation",void 0),h([f({type:Al,json:{write:!0}})],Cs.prototype,"mosaicRule",void 0),h([f({type:[String],json:{write:!0}})],Cs.prototype,"outFields",void 0),h([f({type:At,json:{write:!0}})],Cs.prototype,"pixelSize",void 0),h([f({type:String,json:{write:!0}})],Cs.prototype,"raster",void 0),h([f({type:Boolean,json:{write:!0}})],Cs.prototype,"returnFirstValueOnly",void 0),h([f({type:Number,json:{write:!0}})],Cs.prototype,"sampleDistance",void 0),h([f({type:Number,json:{write:!0}})],Cs.prototype,"sampleCount",void 0),h([f({type:Number,json:{write:!0}})],Cs.prototype,"sliceId",void 0),h([f({type:ca,json:{read:{source:"time"},write:{target:"time"}}})],Cs.prototype,"timeExtent",void 0),Cs=P8=h([me("esri.rest.support.ImageSampleParameters")],Cs);const l5e=Cs,Eu=ot.getLogger("esri.views.2d.engine.flow.dataUtils"),u5e=10;async function c5e(e,t,r,i){const n=performance.now(),s=h5e(t,r),o=performance.now(),a=d5e(t,s,r.width,r.height),l=performance.now(),u=m5e(a,!0),c=performance.now(),p=e==="Streamlines"?y5e(u,u5e):g5e(u),d=performance.now();return We("esri-2d-profiler")&&(Eu.info("I.1","_createFlowFieldFromData (ms)",Math.round(o-n)),Eu.info("I.2","_getStreamlines (ms)",Math.round(l-o)),Eu.info("I.3","createAnimatedLinesData (ms)",Math.round(c-l)),Eu.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(d-c)),Eu.info("I.5","createFlowMesh (ms)",Math.round(d-n)),Eu.info("I.6","Mesh size (bytes)",p.vertexData.buffer.byteLength+p.indexData.buffer.byteLength)),await Promise.resolve(),ui(i),p}function h5e(e,t){const r=f5e(t.data,t.width,t.height,e.smoothing);return e.interpolate?(i,n)=>{const s=Math.floor(i),o=Math.floor(n);if(s<0||s>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=i-s,l=n-o,u=s,c=o,p=s<t.width-1?s+1:s,d=o<t.height-1?o+1:o,m=r[2*(c*t.width+u)],g=r[2*(c*t.width+p)],b=r[2*(d*t.width+u)],v=r[2*(d*t.width+p)],_=r[2*(c*t.width+u)+1],E=r[2*(c*t.width+p)+1];return[(m*(1-l)+b*l)*(1-a)+(g*(1-l)+v*l)*a,(_*(1-l)+r[2*(d*t.width+u)+1]*l)*(1-a)+(E*(1-l)+r[2*(d*t.width+p)+1]*l)*a]}:(i,n)=>{const s=Math.round(i),o=Math.round(n);return s<0||s>=t.width||o<0||o>=t.height?[0,0]:[r[2*(o*t.width+s)+0],r[2*(o*t.width+s)+1]]}}function p5e(e,t,r,i,n,s,o,a,l){const u=[];let c=r,p=i,d=0,[m,g]=t(c,p);m*=e.velocityScale,g*=e.velocityScale;const b=Math.sqrt(m*m+g*g);let v,_;u.push({x:c,y:p,t:d,speed:b});for(let E=0;E<e.verticesPerLine;E++){let[I,x]=t(c,p);I*=e.velocityScale,x*=e.velocityScale;const T=Math.sqrt(I*I+x*x);if(T<e.minSpeedThreshold)return u;const M=I/T,k=x/T;if(c+=M*e.segmentLength,p+=k*e.segmentLength,d+=e.segmentLength/T,Math.acos(M*v+k*_)>e.maxTurnAngle)return u;if(e.collisions){const D=Math.round(c*l),B=Math.round(p*l);if(D<0||D>o-1||B<0||B>a-1)return u;const G=s[B*o+D];if(G!==-1&&G!==n)return u;s[B*o+D]=n}u.push({x:c,y:p,t:d,speed:T}),v=M,_=k}return u}function d5e(e,t,r,i){const n=[],s=new Na,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(r*o),l=Math.round(i*o),u=new Int32Array(a*l);for(let p=0;p<u.length;p++)u[p]=-1;const c=[];for(let p=0;p<i;p+=e.lineSpacing)for(let d=0;d<r;d+=e.lineSpacing)c.push({x:d,y:p,sort:s.getFloat()});c.sort((p,d)=>p.sort-d.sort);for(const{x:p,y:d}of c)if(s.getFloat()<e.density){const m=p5e(e,t,p,d,n.length,u,a,l,o);if(m.length<2)continue;n.push(m)}return n}function f5e(e,t,r,i){if(i===0)return e;const n=Math.round(3*i),s=new Array(2*n+1);let o=0;for(let u=-n;u<=n;u++){const c=Math.exp(-u*u/(i*i));s[u+n]=c,o+=c}for(let u=-n;u<=n;u++)s[u+n]/=o;const a=new Float32Array(e.length);for(let u=0;u<r;u++)for(let c=0;c<t;c++){let p=0,d=0;for(let m=-n;m<=n;m++){if(c+m<0||c+m>=t)continue;const g=s[m+n];p+=g*e[2*(u*t+(c+m))+0],d+=g*e[2*(u*t+(c+m))+1]}a[2*(u*t+c)+0]=p,a[2*(u*t+c)+1]=d}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let c=0;c<r;c++){let p=0,d=0;for(let m=-n;m<=n;m++){if(c+m<0||c+m>=r)continue;const g=s[m+n];p+=g*a[2*((c+m)*t+u)+0],d+=g*a[2*((c+m)*t+u)+1]}l[2*(c*t+u)+0]=p,l[2*(c*t+u)+1]=d}return l}function m5e(e,t){const r=new Na,i=e.reduce((l,u)=>l+u.length,0),n=new Float32Array(4*i),s=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const c of l)n[4*o+0]=c.x,n[4*o+1]=c.y,n[4*o+2]=c.t,n[4*o+3]=c.speed,o++;s[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:t?r.getFloat():0}}return{lineVertices:n,lineDescriptors:s}}function y5e(e,t){const{lineVertices:i,lineDescriptors:n}=e;let s=0,o=0;for(const m of n)s+=2*m.numberOfVertices,o+=6*(m.numberOfVertices-1);const a=new Float32Array(s*9),l=new Uint32Array(o);let u=0,c=0;function p(){l[c++]=u-2,l[c++]=u,l[c++]=u-1,l[c++]=u,l[c++]=u+1,l[c++]=u-1}function d(m,g,b,v,_,E,I,x){const T=u*9;let M=0;a[T+M++]=m,a[T+M++]=g,a[T+M++]=1,a[T+M++]=b,a[T+M++]=E,a[T+M++]=I,a[T+M++]=v/2,a[T+M++]=_/2,a[T+M++]=x,u++,a[T+M++]=m,a[T+M++]=g,a[T+M++]=-1,a[T+M++]=b,a[T+M++]=E,a[T+M++]=I,a[T+M++]=-v/2,a[T+M++]=-_/2,a[T+M++]=x,u++}for(const m of n){const{totalTime:g,timeSeed:b}=m;let v=null,_=null,E=null,I=null,x=null,T=null;for(let M=0;M<m.numberOfVertices;M++){const k=i[4*(m.startVertex+M)+0],D=i[4*(m.startVertex+M)+1],B=i[4*(m.startVertex+M)+2],G=i[4*(m.startVertex+M)+3];let W=null,K=null,ne=null,ye=null;if(M>0){W=k-v,K=D-_;const y=Math.sqrt(W*W+K*K);if(W/=y,K/=y,M>1){let C=W+x,L=K+T;const F=Math.sqrt(C*C+L*L);C/=F,L/=F;const ae=Math.min(1/(C*W+L*K),t);C*=ae,L*=ae,ne=-L,ye=C}else ne=-K,ye=W;ne!==null&&ye!==null&&(d(v,_,E,ne,ye,g,b,G),p())}v=k,_=D,E=B,x=W,T=K,I=G}d(v,_,E,-T,x,g,b,I)}return{vertexData:a,indexData:l}}function g5e(e){const{lineVertices:n,lineDescriptors:s}=e;let o=0,a=0;for(const y of s){const C=y.numberOfVertices-1;o+=4*C*2,a+=6*C*2}const l=new Float32Array(o*16),u=new Uint32Array(a);let c,p,d,m,g,b,v,_,E,I,x,T,M,k,D=0,B=0;function G(){u[B++]=D-8,u[B++]=D-7,u[B++]=D-6,u[B++]=D-7,u[B++]=D-5,u[B++]=D-6,u[B++]=D-4,u[B++]=D-3,u[B++]=D-2,u[B++]=D-3,u[B++]=D-1,u[B++]=D-2}function W(y,C,L,F,ae,q,fe,te,ge,ve,Ee,Ie,ke,Te){const Se=D*16;let Ae=0;for(const X of[1,2])for(const Z of[1,2,3,4])l[Se+Ae++]=y,l[Se+Ae++]=C,l[Se+Ae++]=L,l[Se+Ae++]=F,l[Se+Ae++]=fe,l[Se+Ae++]=te,l[Se+Ae++]=ge,l[Se+Ae++]=ve,l[Se+Ae++]=X,l[Se+Ae++]=Z,l[Se+Ae++]=ke,l[Se+Ae++]=Te,l[Se+Ae++]=ae/2,l[Se+Ae++]=q/2,l[Se+Ae++]=Ee/2,l[Se+Ae++]=Ie/2,D++}function K(y,C){let L=E+x,F=I+T;const ae=Math.sqrt(L*L+F*F);L/=ae,F/=ae;const q=E*L+I*F;L/=q,F/=q;let fe=x+M,te=T+k;const ge=Math.sqrt(fe*fe+te*te);fe/=ge,te/=ge;const ve=x*fe+T*te;fe/=ve,te/=ve,W(c,p,d,m,-F,L,g,b,v,_,-te,fe,y,C),G()}function ne(y,C,L,F,ae,q){if(E=x,I=T,x=M,T=k,E==null&&I==null&&(E=x,I=T),g!=null&&b!=null){M=y-g,k=C-b;const fe=Math.sqrt(M*M+k*k);M/=fe,k/=fe}E!=null&&I!=null&&K(ae,q),c=g,p=b,d=v,m=_,g=y,b=C,v=L,_=F}function ye(y,C){E=x,I=T,x=M,T=k,E==null&&I==null&&(E=x,I=T),E!=null&&I!=null&&K(y,C)}for(const y of s){c=null,p=null,d=null,m=null,g=null,b=null,v=null,_=null,E=null,I=null,x=null,T=null,M=null,k=null;const{totalTime:C,timeSeed:L}=y;for(let F=0;F<y.numberOfVertices;F++)ne(n[4*(y.startVertex+F)+0],n[4*(y.startVertex+F)+1],n[4*(y.startVertex+F)+2],n[4*(y.startVertex+F)+3],C,L);ye(C,L)}return{vertexData:l,indexData:u}}function BB(e,t){const r=t.pixels,{width:i,height:n}=t,s=new Float32Array(i*n*2),o=t.mask||new Uint8Array(i*n*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<i*n;a++)s[2*a+0]=r[0][a],s[2*a+1]=-r[1][a];else if(e==="vector-magdir")for(let a=0;a<i*n;a++){const l=r[0][a],u=C1(r[1][a]),c=Math.cos(u-Math.PI/2),p=Math.sin(u-Math.PI/2);s[2*a+0]=c*l,s[2*a+1]=p*l}return{data:s,mask:o,width:i,height:n}}async function zat(e,t,r,i,n,s){const o=performance.now(),a=za(t.spatialReference);if(!a){const x=await zB(e,t,r,i,n,s);return We("esri-2d-profiler")&&Eu.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),We("esri-2d-profiler")&&Eu.info("I.9","Number of parts",1),x}const[l,u]=a.valid,c=u-l,p=Math.ceil(t.width/c),d=t.width/p,m=Math.round(r/p);let g=t.xmin;const b=[],v=performance.now();for(let x=0;x<p;x++){const T=new qt({xmin:g,xmax:g+d,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});b.push(zB(e,T,m,i,n,s)),g+=d}const _=await Promise.all(b);We("esri-2d-profiler")&&Eu.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-v)),We("esri-2d-profiler")&&Eu.info("I.9","Number of parts",_.length);const E={data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i};let I=0;for(const x of _){for(let T=0;T<x.height;T++)for(let M=0;M<x.width;M++)I+M>=r||(E.data[2*(T*r+I+M)+0]=x.data[2*(T*x.width+M)+0],E.data[2*(T*r+I+M)+1]=x.data[2*(T*x.width+M)+1],E.mask[T*r+I+M]=x.mask[T*x.width+M]);I+=x.width}return We("esri-2d-profiler")&&Eu.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),E}async function zB(e,t,r,i,n,s){const o={requestProjectedLocalDirections:!0,signal:s};if(de(n)&&(o.timeExtent=n),e.type==="imagery"){await e.load({signal:s});const u=e.rasterInfo.dataType,c=await e.fetchImage(t,r,i,o);return!c||Ne(c.pixelData)||Ne(c.pixelData.pixelBlock)?{data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i}:BB(u,c.pixelData.pixelBlock)}await e.load({signal:s});const a=e.rasterInfo.dataType,l=await e.fetchPixels(t,r,i,o);return!l||Ne(l.pixelBlock)?{data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i}:BB(a,l.pixelBlock)}const GB=ot.getLogger("esri.layers.mixins.ArcGISImageService"),pC=en()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),v5e=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),b5e=rK(Da,{min:0,max:255});function w5e(e){if(!e)return null;const t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi)?.map(r=>r.replace('"rasterFunction":"',"").replace('"',""));return t?t.join("/"):null}const _5e=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._defaultServiceMosaicRule=null,this._serviceSourceType=null,this._serviceSupportsMosaicRule=null,this.rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandCount=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelSizeX=null,this.pixelSizeY=null,this.pixelFilter=null,this.raster=void 0,this.viewId=void 0,this.symbolizer=null,this.rasterAttributeTable=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new Wi({layer:this}))}readDefaultServiceMosaicRule(r,i){return this._serviceSupportsMosaicRule?Al.fromJSON(i):null}readServiceSourceType(r,i){return this._isMosaicDataset(i)?"mosaic-dataset":"raster-dataset"}readServiceSupportsMosaicRule(r,i){return this._isMosaicRuleSupported(i)}get rasterFunctionNamesIndex(){const r=new Map;return!this.rasterFunctionInfos||de(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||de(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(i=>{r.set(i.name.toLowerCase().replace(/ /gi,"_"),i.name)}),r}readBandIds(r,i){if(Array.isArray(r)&&r.length>0&&r.every(n=>typeof n=="number"))return r}readCapabilities(r,i){return this._readCapabilities(i)}writeCompressionQuality(r,i,n){r!=null&&this.format!=="lerc"&&(i[n]=r)}writeCompressionTolerance(r,i,n){this.format==="lerc"&&r!=null&&(i[n]=r)}get fieldsIndex(){return this.fields?new E9(this.fields):null}set format(r){r&&v5e.has(r.toLowerCase())&&this._set("format",r.toLowerCase())}readFormat(r,i){return i.serviceDataType==="esriImageServiceDataTypeVector-UV"||i.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}readMaxScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}set mosaicRule(r){let i=r;i&&i.mosaicMethod&&(i=Al.fromJSON({...i.toJSON(),mosaicMethod:i.mosaicMethod,mosaicOperation:i.mosaicOperation})),this._set("mosaicRule",i)}readMosaicRule(r,i){const n=r||i.mosaicRule;return n?Al.fromJSON(n):this._isMosaicRuleSupported(i)?Al.fromJSON(i):null}writeMosaicRule(r,i,n){let s=this.mosaicRule;const o=this.definitionExpression;s?o&&o!==s.where&&(s=s.clone(),s.where=o):o&&(s=new Al({where:o})),this._isValidCustomizedMosaicRule(s)&&(i[n]=s.toJSON())}writeNoData(r,i,n){r!=null&&typeof r=="number"&&(i[n]=b5e(r))}readObjectIdField(r,i){if(!r){const n=i.fields.filter(s=>s.type==="esriFieldTypeOID"||s.type==="oid");r=n&&n[0]&&n[0].name}return r}get parsedUrl(){return this.url?fn(this.url):null}set renderer(r){this.loaded&&(r=this._configRenderer(r)),this._set("renderer",r)}readRenderer(r,i,n){const s=i?.layerDefinition?.drawingInfo?.renderer,o=w3e(s,n);return o==null?null:(o.type==="vector-field"&&i.symbolTileSize&&!s.symbolTileSize&&(o.symbolTileSize=i.symbolTileSize),Dee(o)||GB.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),o)}writeRenderer(r,i,n){i.layerDefinition=i.layerDefinition||{},i.layerDefinition.drawingInfo=i.layerDefinition.drawingInfo||{},i.layerDefinition.drawingInfo.renderer=r.toJSON(),r.type==="vector-field"&&(i.symbolTileSize=r.symbolTileSize)}get rasterFields(){const r=this.rasterAttributeTableFieldPrefix||"Raster.",i=new No({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new No({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),s=new No({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let o=this.fields?Pe(this.fields):[];o.push(n),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&o.push(i),this.version>=10.4&&de(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(l=>l.name.toLowerCase()==="none")&&o.push(s),de(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(l=>l.name.toLowerCase()!=="none").forEach(l=>{o.push(new No({name:"Raster.ServicePixelValue."+l.name,alias:l.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(o.push(new No({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),o.push(new No({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const a=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(a&&a.length>0){const l=a.filter(u=>u.type!=="esriFieldTypeOID"&&u.name.toLowerCase()!=="value").map(u=>{const c=Pe(u);return c.name=r+u.name,c});o=o.concat(l)}return o}set renderingRule(r){let i=r;i&&i.rasterFunction&&(i=Wr.fromJSON({...i.toJSON(),rasterFunction:i.rasterFunction,rasterFunctionArguments:i.rasterFunctionArguments})),this._set("renderingRule",i)}readRenderingRule(r,i){const n=i.rasterFunctionInfos;return i.renderingRule||n&&n.length&&n[0].name!=="None"?this._isRFTJson(i.renderingRule)?Wr.fromJSON({rasterFunctionDefinition:i.renderingRule}):Wr.fromJSON(i.renderingRule||{rasterFunctionInfos:i.rasterFunctionInfos}):null}writeRenderingRule(r,i,n){const s=r.toJSON();s.rasterFunctionDefinition?i[n]=s.rasterFunctionDefinition:i[n]=s}readSpatialReference(r,i){const n=r||i.extent.spatialReference;return n?wt.fromJSON(n):null}readPixelType(r){return pC.fromJSON(r)||r}writePixelType(r,i,n){(Ne(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(i[n]=pC.toJSON(r))}readVersion(r,i){let n=i.currentVersion;return n||(n=i.hasOwnProperty("fields")||i.hasOwnProperty("timeInfo")?10:9.3),n}applyFilter(r){let i=r;return this.pixelFilter&&(i=this._clonePixelData(r),this.pixelFilter(i)),i}async applyRenderer(r,i){let n=r;if(!this._isPicture()&&this.renderer&&this.symbolizer&&!this.pixelFilter){const s=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),o=this._rasterJobHandler.instance,{bandIds:a}=this;if(o){s&&(this.symbolizer.bind(),await o.updateSymbolizer(this.symbolizer,i),this._cachedRendererJson=this.renderer.toJSON());const l=await o.symbolize({bandIds:a,...r},i);n={extent:r.extent,pixelBlock:l}}else n={extent:r.extent,pixelBlock:this.symbolizer.symbolize({bandIds:a,...r})}}return n}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeAngles)throw new $e("imagery-layer:compute-angles","this operation is not supported on the input image service");return r=Tl(o5e,r).clone(),cMe(this.url,r,this._getRequestOptions(i))}async computePixelSpaceLocations(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputePixelLocation)throw new $e("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return r=Tl(a5e,r).clone(),hMe(this.url,r,this._getRequestOptions(i))}async computeHistograms(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeHistograms)throw new $e("imagery-layer:compute-histograms","this operation is not supported on the input image service");r=Tl(UB,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;return o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null&&(r.mosaicRule=s),n&&r.raster==null&&(r.raster=n),dMe(this.url,r,this._getRequestOptions(i))}async computeStatisticsHistograms(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new $e("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");r=Tl(UB,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;return o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null&&(r.mosaicRule=s),n&&r.raster==null&&(r.raster=n),pMe(this.url,r,this._getRequestOptions(i))}getField(r){const{fieldsIndex:i}=this;return de(i)?i.get(r):void 0}getFieldDomain(r,i){const n=this.getField(r);return n?n.domain:null}fetchImage(r,i,n,s={}){if(r==null||i==null||n==null)return Promise.reject(new $e("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const o=this.renderer||this.symbolizer?this.generateRasterInfo(this.renderingRule,{signal:s.signal}):null;return W5(o).then(a=>{a&&(this.rasterInfo=a);const l={imageServiceParameters:this.getExportImageServiceParameters(r,i,n,s.timeExtent),imageProps:{extent:r,width:i,height:n,format:this.format},requestAsImageElement:s.requestAsImageElement&&!this.pixelFilter||!1,signal:s.signal};return this._requestArrayBuffer(l)})}fetchKeyProperties(r){return Mt(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(i=>i.data)}fetchRasterAttributeTable(r){return this.version<10.1?Promise.reject(new $e("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Mt(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?r?.renderingRule:null})}).then(i=>Yg.fromJSON(i.data))}getCatalogItemRasterInfo(r,i){const n={...i,query:this._getQueryParams()};return s5e(this.parsedUrl.path,r,n)}async getCatalogItemICSInfo(r,i){const{data:n}=await Mt(this.parsedUrl.path+"/"+r+"/info/ics",{query:this._getQueryParams(),...i}),s=n&&n.ics;if(!s)return;let o=null;try{o=(await Mt(this.parsedUrl.path+"/"+r+"/info",{query:this._getQueryParams(),...i})).data.extent}catch{}if(!o||!o.spatialReference)return{ics:s,icsToPixelTransform:null,icsExtent:null,northDirection:null};const a=this.version>=10.7?Mt(this.parsedUrl.path+"/"+r+"/info/icstopixel",{query:this._getQueryParams(),...i}).then(y=>y.data).catch(()=>({})):{},l=o.spatialReference,u={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[o]}),inSR:l.wkid||JSON.stringify(l),outSR:"0:"+r},c=Mt(this.parsedUrl.path+"/project",{query:this._getQueryParams(u),...i}).then(y=>y.data).catch(()=>({})),p=5,d=(o.xmin+o.xmax)/2,m=(o.ymax-o.ymin)/(p+1),g=o.ymin+m,b=[];for(let y=0;y<p;y++)b.push({x:d,y:g+m*y});const v={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:b}),inSR:l.wkid||JSON.stringify(l),outSR:"0:"+r},_=Mt(this.parsedUrl.path+"/project",{query:this._getQueryParams(v),...i}).then(y=>y.data).catch(()=>({})),E=await Promise.all([a,c,_]);let I=E[0].ipxf;if(I==null){const y=s.geodataXform?.xf_0;y?.name?.toLowerCase()==="topup"&&y?.coefficients?.length===6&&(I={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:y.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const x=qt.fromJSON(E[1]&&E[1].geometries&&E[1].geometries[0]);x&&(x.spatialReference=new wt({wkid:0,imageCoordinateSystem:s}));const T=E[2].geometries?E[2].geometries.filter(y=>y!=null&&y.x!=null&&y.y!=null&&y.x!=="NaN"&&y.y!=="NaN"):[],M=T.length;if(M<3)return{ics:s,icsToPixelTransform:I,icsExtent:x,northDirection:null};let k=0,D=0,B=0,G=0;for(let y=0;y<M;y++)k+=T[y].x,D+=T[y].y,B+=T[y].x*T[y].x,G+=T[y].x*T[y].y;const W=(M*G-k*D)/(M*B-k*k);let K=0;const ne=T[p-1].x>T[0].x,ye=T[p-1].y>T[0].y;return W===1/0?K=ye?90:270:W===0?K=ne?0:180:W>0?K=ne?180*Math.atan(W)/Math.PI:180*Math.atan(W)/Math.PI+180:W<0&&(K=ye?180+180*Math.atan(W)/Math.PI:360+180*Math.atan(W)/Math.PI),{ics:s,icsToPixelTransform:I,icsExtent:x,northDirection:K}}async generateRasterInfo(r,i){if((!r||r?.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(r))&&de(this.serviceRasterInfo))return this.serviceRasterInfo;const n=w5e(r);if(this._functionRasterInfos[n])return this._functionRasterInfos[n];const s=this._generateRasterInfo(r,i);this._functionRasterInfos[n]=s;try{return await s}catch{return this._functionRasterInfos[n]=null,null}}getExportImageServiceParameters(r,i,n,s){r=r.clone().shiftCentralMeridian();const o=ute(r.spatialReference,this.parsedUrl.path);de(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const a=this.exportImageServiceParameters.toJSON(),{bandIds:l,noData:u}=a;let{renderingRule:c}=a;const p=this.renderingRule?.rasterFunctionDefinition,d=!this.renderer||this.renderer.type==="raster-stretch";if(l?.length&&this._hasRenderingRule(this.renderingRule)&&!p&&d){const b={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:l}};if(c.rasterFunction==="Stretch")b.rasterFunctionArguments.Raster=c.rasterFunctionArguments.Raster,c.rasterFunctionArguments.Raster=b;else if(c.rasterFunction==="Colormap"){const v=c.rasterFunctionArguments.Raster;v?.rasterFunction==="Stretch"?(b.rasterFunctionArguments.Raster=v.rasterFunctionArguments.Raster,v.rasterFunctionArguments.Raster=b):(b.rasterFunctionArguments.Raster=v,c.rasterFunctionArguments.Raster=b)}else b.rasterFunctionArguments.Raster=c,c=b;a.bandIds=void 0}else a.bandIds=l?.join(",");u instanceof Array&&u.length>0&&(a.noData=u.join(","));const m=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,s):null;a.mosaicRule=m&&JSON.stringify(m),a.renderingRule=this._getRenderingRuleString(Wr.fromJSON(c));const g={};if(s){const{start:b,end:v}=s.toJSON();b&&v&&b===v?g.time=""+b:b==null&&v==null||(g.time=`${b??"null"},${v??"null"}`)}return{bbox:r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:o,imageSR:o,size:i+","+n,...a,...g}}async getSamples(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsGetSamples)throw new $e("imagery-layer:get-samples","getSamples operation is not supported on the input image service");r=Tl(l5e,r).clone();const{raster:n}=this;return n&&r.raster==null&&(r.raster=n),fMe(this.url,r,this._getRequestOptions(i))}async identify(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsIdentify)throw new $e("imagery-layer:query-rasters","query operation is not supported on the input image service");r=Tl(VB,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;if(o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null){const a=this._combineMosaicRuleWithTimeExtent(s,r.timeExtent);r.mosaicRule=a}return n&&r.raster==null&&(r.raster=n),TB(this.url,r,this._getRequestOptions(i))}createQuery(){const r=new jn;return r.outFields=["*"],r.returnGeometry=!0,r.where=this.definitionExpression||"1=1",r}async queryRasters(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),t5(this.url,r,i)}async queryObjectIds(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),Lte(this.url,r,i)}async queryRasterCount(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),r5e(this.url,r,i)}async queryVisibleRasters(r,i){if(!r)throw new $e("imagery-layer: query-visible-rasters","missing query parameter");const{pixelSize:n,returnDomainValues:s,returnTopmostRaster:o,showNoDataRecords:a}=i||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let l=!1,u=null,c=null;const p="raster.servicepixelvalue",d=this.rasterFunctionNamesIndex;if(de(r.outFields)&&(l=r.outFields.some(E=>!E.toLowerCase().includes(p)),this.version>=10.4)){const E=r.outFields.filter(I=>I.toLowerCase().includes(p)&&I.length>p.length).map(I=>{const x=I.slice(p.length+1);return[this._updateRenderingRulesFunctionName(x,d),x]});u=E.map(I=>new Wr({functionName:I[0]})),c=E.map(I=>I[1]),u.length===0?this.renderingRule?(u.push(this.renderingRule),c.push(this.renderingRule.functionName)):u=null:this.renderingRule&&!u.some(I=>I.functionName===this.renderingRule.functionName)&&(u.push(this.renderingRule),c.push(this.renderingRule.functionName))}const m=Ne(r.outSpatialReference)||r.outSpatialReference.equals(this.spatialReference),g=r.timeExtent||this.timeExtent,b=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,g),v=this._getQueryParams({geometry:r.geometry,timeExtent:g,mosaicRule:b,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:u,pixelSize:n,returnCatalogItems:l,returnGeometry:m,raster:this.raster,maxItemCount:o?1:null});delete v.f;const _=new VB(v);try{await this.generateRasterInfo(this.renderingRule);const E=await TB(this.url,_,{signal:i?.signal,query:{...this.customParameters}}),I=r.outFields,x=E.value.toLowerCase().includes("nodata");if(!(l&&!m&&E?.catalogItems?.features.length&&(a||!x)))return this._processVisibleRastersResponse(E,{returnDomainValues:s,templateRRFunctionNames:c,showNoDataRecords:a,templateFields:I});const T=this.objectIdField||"ObjectId",M=E.catalogItems.features,k=M.map(G=>G.attributes?.[T]),D=new jn({objectIds:k,returnGeometry:!0,outSpatialReference:r.outSpatialReference,outFields:[T]}),B=await this.queryRasters(D);return B?.features?.length&&B.features.forEach(G=>{M.forEach(W=>{W.attributes[T]===G.attributes[T]&&(W.geometry=new wo(G.geometry),de(r.outSpatialReference)&&(W.geometry.spatialReference=r.outSpatialReference))})}),this._processVisibleRastersResponse(E,{returnDomainValues:s,templateRRFunctionNames:c,showNoDataRecords:a,templateFields:I})}catch{throw new $e("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(r,i){const n=Mt(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:r}),signal:i}).then(a=>a.data?.statistics),s=Mt(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:r}),signal:i}).then(a=>a.data?.histograms),o=await Promise.all([n,s]);return o[0]&&o[0].forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o[0]||null,histograms:o[1]||null}}async createFlowMesh(r,i){const n=this._rasterJobHandler.instance;return n?n.createFlowMesh(r,i):c5e(r.meshType,r.simulationSettings,r.flowData,de(i.signal)?i.signal:new AbortController().signal)}async _fetchService(r){await this._fetchServiceInfo(r),de(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);const i=this.sourceJSON,n=de(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):i5e(this.parsedUrl.path,i,{signal:r,query:this._getQueryParams()}).then(a=>(this._set("serviceRasterInfo",a),a)),s=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:r}):null,o=this._getRasterFunctionInfos();return Promise.all([n,s,o]).then(a=>{a[1]?this._set("rasterInfo",a[1]):this._set("rasterInfo",a[0]),a[2]&&this._set("rasterFunctionInfos",a[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),GB.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("renderer",this._configRenderer(this.renderer)),this.own(it(()=>this.renderingRule,u=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(u).then(c=>{c&&(this.rasterInfo=c)})}));const{serviceRasterInfo:l}=this;de(l)&&l.multidimensionalInfo&&this._updateMultidimensionalDefinition(l)})}_combineMosaicRuleWithTimeExtent(r,i){const n=this.timeInfo;if(Ne(r)||Ne(this.multidimensionalInfo)||Ne(i)||Ne(n?.startField))return r;const{startField:s}=n,o=this.multidimensionalInfo.variables.some(m=>m.dimensions.some(g=>g.name===s))?s:"StdTime";if(r=r.clone(),this._serviceSourceType==="mosaic-dataset")return r.multidimensionalDefinition=r.multidimensionalDefinition?.filter(m=>m.dimensionName!==o),this._cleanupMultidimensionalDefinition(r);r.multidimensionalDefinition=r.multidimensionalDefinition||[];const a=r.multidimensionalDefinition.filter(m=>m.dimensionName===o),l=de(i.start)?i.start.getTime():null,u=de(i.end)?i.end.getTime():null,c=l==null||u==null||l===u,p=c?[l||u]:[[l,u]],d=this.version>=10.8;if(a.length)a.forEach(m=>{m.dimensionName===o&&(d?(m.dimensionName=null,m.isSlice=null,m.values=null):(m.isSlice=c,m.values=p))});else if(!d){const m=r.multidimensionalDefinition.filter(g=>g.variableName!=null&&g.dimensionName==null);m.length?m.forEach(g=>{g.dimensionName=o,g.isSlice=c,g.values=p}):r.multidimensionalDefinition.push(new R9({variableName:"",dimensionName:o,isSlice:c,values:p}))}return this._cleanupMultidimensionalDefinition(r)}_cleanupMultidimensionalDefinition(r){return Ne(r)?null:(r.multidimensionalDefinition&&(r.multidimensionalDefinition=r.multidimensionalDefinition.filter(i=>!(!i.variableName&&!i.dimensionName)),r.multidimensionalDefinition.length===0&&(r.multidimensionalDefinition=null)),this._serviceSourceType!=="mosaic-dataset"&&r.multidimensionalDefinition==null?null:r)}async _prepareForQuery(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsQuery)throw new $e("imagery-layer:query-rasters","query operation is not supported on the input image service");return r=de(r)?Tl(jn,r):this.createQuery(),i=this._getRequestOptions(i),this.raster&&(i.query={...i.query,raster:this.raster}),{query:r,requestOptions:i}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new N3e;this._rasterJobHandler.connectionPromise=r.initialize().then(()=>{this._rasterJobHandler.instance=r},()=>null),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(r){const{rasterInfo:i,renderingRule:n}=this;return r.type==="unique-value"&&this._hasRenderingRule(n)&&i.bandCount===1&&["u8","s8"].includes(i.pixelType)||kEe(this.rasterInfo).includes(this.renderer.type)}async _fetchCapabilities(r){return this.capabilities||await this._fetchServiceInfo(r),this.capabilities}async _fetchServiceInfo(r){let i=this.sourceJSON;if(!i){const{data:n,ssl:s}=await Mt(this.parsedUrl.path,{query:this._getQueryParams(),signal:r});i=n,this.sourceJSON=i,s&&(this.url=this.url.replace(/^http:/i,"https:"))}if(i.capabilities?.toLowerCase().split(",").map(n=>n.trim()).indexOf("tilesonly")>-1)throw new $e("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(i,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(r){return r.serviceSourceType?r.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":r.fields?.length>0}_isMosaicRuleSupported(r){if(!r)return!1;const i=this._isMosaicDataset(r),n=r.currentVersion>=10.71&&r.hasMultidimensions&&r.timeInfo&&!(r.objectIdField&&r.fields?.length>1);return i||n}_isVectorFieldResampleFunction(r){if(Ne(r))return!1;const{functionName:i,functionArguments:n}=r,s=i?.toLowerCase()==="resample",o=n?.ResampleType||n?.resampleType;return s&&(o===7||o===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(r){if(!this._isPicture()&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&this.rasterInfo.bandCount>=3){const n=tte(this.rasterInfo);!n||this.rasterInfo.bandCount===3&&n[0]===0&&n[1]===1&&n[2]===2||(this.bandIds=n)}r||(r=CEe(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const i=qEe(r.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=i,this.symbolizer.rasterInfo=this.rasterInfo):this.symbolizer=new nMe({rendererJSON:i,rasterInfo:this.rasterInfo}),this.symbolizer.bind().success||(this.symbolizer=null)}return r}_clonePixelData(r){return r==null?r:{extent:r.extent&&r.extent.clone(),pixelBlock:de(r.pixelBlock)&&r.pixelBlock.clone()}}_getQueryParams(r){de(r?.renderingRule)&&typeof r.renderingRule!="string"&&(r.renderingRule=this._getRenderingRuleString(r.renderingRule));const{raster:i,viewId:n}=this;return{raster:i,viewId:n,f:"json",...r,...this.customParameters}}_getRequestOptions(r){return{...r,query:{...r?.query,...this.customParameters}}}_decodePixelBlock(r,i,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:r,options:i}):gB(r,i,n)}async _getRasterFunctionInfos(r){const i=this.sourceJSON.rasterFunctionInfos;return this.serviceRasterInfo?i:i&&this.version>=10.3?i.length===1&&i[0].name.toLowerCase()==="none"?i:(await Mt(this.parsedUrl.path+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:r})).data?.rasterFunctionInfos:null}async _requestArrayBuffer(r){const{imageProps:i,requestAsImageElement:n,signal:s}=r;if(n&&!this.pixelFilter&&i.format?.indexOf("png")>-1)return{imageElement:(await Mt(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:s})).data,params:i};const o=this._initJobHandler(),a=Mt(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:s}),l=(await Promise.all([a,o]))[0].data,u=i.format||"jpgpng";let c=u;if(c!=="bsq"&&c!=="bip"&&(c=IEe(l)),!c)throw new $e("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(l)));const p={signal:s};return{pixelData:{pixelBlock:await(u==="gif"||u==="bmp"||u.includes("png")&&(c==="png"||c==="jpg")?gB(l,{useCanvas:!0,...i},p):this._decodePixelBlock(l,{width:i.width,height:i.height,planes:null,pixelType:null,noDataValue:null,format:u},p)),extent:i.extent},params:i}}_generateRasterInfo(r,i){const n={...i,query:this._getQueryParams()};return n5e(this.parsedUrl.path,r,n)}_isValidCustomizedMosaicRule(r){return r&&JSON.stringify(r.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule?.toJSON())}_updateMultidimensionalDefinition(r){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;const i=D3e(r);if(de(i)&&i.length>0){this.mosaicRule=this.mosaicRule||new Al;const n=this.mosaicRule.multidimensionalDefinition;(!n||n&&n.length<=0)&&(this.mosaicRule.multidimensionalDefinition=i)}}_processVisibleRastersResponse(r,i){i=i||{};const n=r.value,{templateRRFunctionNames:s,showNoDataRecords:o,returnDomainValues:a,templateFields:l}=i,u=r.processedValues;let c=r.catalogItems&&r.catalogItems.features,p=r.properties&&r.properties.Values&&r.properties.Values.map(E=>E.replace(/ /gi,", "))||[];const d=this.objectIdField||"ObjectId",m=typeof n=="string"&&n.toLowerCase().includes("nodata"),g=[];if(n&&!c&&!m){const E={};E[d]=0,p=[n],c=[new fs(this.fullExtent,null,E)]}if(!c)return[];let b,v,_;this._updateResponseFieldNames(c,l),m&&!o&&(c=[]);for(let E=0;E<c.length;E++){if(b=c[E],n!=null){if(v=p[E],_=this.renderingRule&&u&&u.length>0&&s&&s.length>0&&s.includes(this.renderingRule.functionName)?u[s.indexOf(this.renderingRule.functionName)]:n,v.toLowerCase()==="nodata"&&!o)continue;const I="Raster.ItemPixelValue",x="Raster.ServicePixelValue";b.attributes[I]=v,b.attributes[x]=_,this._updateFeatureWithMagDirValues(b,v);const T=this.fields&&this.fields.length>0;let M=this.renderingRule&&de(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?T?v:n:_;this.renderingRule||(M=T?v:n),this._updateFeatureWithRasterAttributeTableValues(b,M)}if(b.sourceLayer=b.layer=this,a&&this._updateFeatureWithDomainValues(b),s&&u&&s.length===u.length)for(let I=0;I<s.length;I++){const x="Raster.ServicePixelValue."+s[I];b.attributes[x]=u[I]}g.push(c[E])}return g}_updateFeatureWithRasterAttributeTableValues(r,i){const n=this.rasterInfo&&this.rasterInfo.attributeTable||de(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,s=n&&n.features;if(!s)return;const o=n.fields,a=o.map(c=>c.name).filter(c=>c.toLowerCase()==="value"),l=a&&a[0];if(!l)return;const u=s.filter(c=>c.attributes[l]===(i!=null?parseInt(i,10):null));u&&u[0]&&o.forEach(c=>{const p=this.rasterAttributeTableFieldPrefix+c.name;r.attributes[p]=u[0].attributes[c.name]})}_updateFeatureWithMagDirValues(r,i){if(!this._isVectorDataSet())return;const n=i.split(/,\s*/).map(u=>parseFloat(u)),s=n.map(u=>[u]),o=n.map(u=>({minValue:u,maxValue:u,noDataValue:null})),a=new Nr({height:1,width:1,pixelType:"f32",pixels:s,statistics:o});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:a,extent:new qt(0,0,0,0,this.spatialReference)});const l=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[a.pixels[0][0],a.pixels[1][0]]:k9([a.pixels[0][0],a.pixels[1][0]]);r.attributes["Raster.Magnitude"]=l[0],r.attributes["Raster.Direction"]=l[1]}_updateFeatureWithDomainValues(r){const i=this.fields&&this.fields.filter(n=>n.domain&&n.domain.type==="coded-value");i?.forEach(n=>{const s=r.attributes[n.name];if(s!=null){const o=n.domain.codedValues.find(a=>a.code===s);o&&(r.attributes[n.name]=o.name)}})}_updateResponseFieldNames(r,i){if(!i||i.length<1)return;const n=this.fieldsIndex;Ne(n)||r.forEach(s=>{if(s&&s.attributes){for(const o of i)if(n.has(o)){const a=n.get(o).name;a!==o&&(s.attributes[o]=s.attributes[a],delete s.attributes[a])}}})}_getRenderingRuleString(r){if(this._hasRenderingRule(r)){let i=r.toJSON();return i=i.rasterFunctionDefinition??i,(i.thumbnail||i.thumbnailEx)&&(i.thumbnail=i.thumbnailEx=null),JSON.stringify(i)}return null}_hasRenderingRule(r){return r&&r.functionName&&r.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(r,i){if(!r||r.length<1)return;if(r==="Raw")return r.replace("Raw","None");const n=r.toLowerCase().replace(/ /gi,"_");return i.has(n)?i.get(n):r}_isRFTJson(r){return r&&r.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_readCapabilities(r){const i=r.capabilities?r.capabilities.toLowerCase().split(",").map(p=>p.trim()):["image","catalog"],{currentVersion:n,advancedQueryCapabilities:s,maxRecordCount:o}=r,a=i.includes("image"),l=r.serviceDataType==="esriImageServiceDataTypeElevation",u=!!(r.spatialReference||r.extent&&r.extent.spatialReference),c=i.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:a,supportsExportImage:a,supportsIdentify:a,supportsMeasure:i.includes("mensuration")&&u,supportsDownload:i.includes("download"),supportsQuery:i.includes("catalog")&&r.fields&&r.fields.length>0,supportsGetSamples:n>=10.2&&a,supportsProject:n>=10.3&&a,supportsComputeStatisticsHistograms:n>=10.4&&a,supportsQueryBoundary:n>=10.6&&a,supportsCalculateVolume:n>=10.7&&l,supportsComputePixelLocation:n>=10.7&&i.includes("catalog"),supportsComputeAngles:n>=10.91,supportsAdd:c,supportsDelete:c,supportsEditing:c,supportsUpdate:c,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1},query:{maxRecordCount:o,maxRecordCountFactor:void 0,supportsStatistics:!!s?.supportsStatistics,supportsOrderBy:!!s?.supportsOrderBy,supportsDistinct:!!s?.supportsDistinct,supportsPagination:!!s?.supportsPagination,supportsStandardizedQueriesOnly:!!s?.useStandardizedQueries,supportsPercentileStatistics:!!s?.supportsPercentileStatistics,supportsCentroid:!!s?.supportsReturningGeometryCentroid,supportsDistance:!!s?.supportsQueryWithDistance,supportsExtent:!!s?.supportsReturningQueryExtent,supportsGeometryProperties:!!s?.supportsReturningGeometryProperties,supportsHavingClause:!!s?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!s?.supportsDefaultSR,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}}};return h([f()],t.prototype,"_functionRasterInfos",void 0),h([f()],t.prototype,"_rasterJobHandler",void 0),h([f({dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"_defaultServiceMosaicRule",void 0),h([Ke("_defaultServiceMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultServiceMosaicRule",null),h([f()],t.prototype,"_cachedRendererJson",void 0),h([f({readOnly:!0})],t.prototype,"_serviceSourceType",void 0),h([Ke("_serviceSourceType",["serviceSourceType","fields"])],t.prototype,"readServiceSourceType",null),h([f({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),h([Ke("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),h([f()],t.prototype,"rasterAttributeTableFieldPrefix",void 0),h([f({readOnly:!0})],t.prototype,"rasterFunctionNamesIndex",null),h([f()],t.prototype,"adjustAspectRatio",void 0),h([f({readOnly:!0}),It("serviceRasterInfo.bandCount")],t.prototype,"bandCount",void 0),h([f({type:[fr],json:{write:!0}})],t.prototype,"bandIds",void 0),h([Ke("bandIds")],t.prototype,"readBandIds",null),h([f({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),h([Ke("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),h([f({type:Number})],t.prototype,"compressionQuality",void 0),h([et("compressionQuality")],t.prototype,"writeCompressionQuality",null),h([f({type:Number})],t.prototype,"compressionTolerance",void 0),h([et("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),h([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([f({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),h([f({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),h([f()],t.prototype,"rasterInfo",void 0),h([f({readOnly:!0,type:[No]})],t.prototype,"fields",void 0),h([f({readOnly:!0})],t.prototype,"fieldsIndex",null),h([f({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],t.prototype,"format",null),h([Ke("service","format",["serviceDataType"])],t.prototype,"readFormat",null),h([f({type:qt})],t.prototype,"fullExtent",void 0),h([f({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),h([f({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),h([f({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),h([f({type:String,json:{type:Sf.jsonValues,read:Sf.read,write:Sf.write}})],t.prototype,"interpolation",void 0),h([f()],t.prototype,"minScale",void 0),h([Ke("service","minScale")],t.prototype,"readMinScale",null),h([f()],t.prototype,"maxScale",void 0),h([Ke("service","maxScale")],t.prototype,"readMaxScale",null),h([f({type:Al})],t.prototype,"mosaicRule",null),h([Ke("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),h([et("mosaicRule")],t.prototype,"writeMosaicRule",null),h([f({readOnly:!0}),It("serviceRasterInfo.multidimensionalInfo")],t.prototype,"multidimensionalInfo",void 0),h([f({json:{type:fr}})],t.prototype,"noData",void 0),h([et("noData")],t.prototype,"writeNoData",null),h([f({type:String,json:{type:h2.jsonValues,read:h2.read,write:h2.write}})],t.prototype,"noDataInterpretation",void 0),h([f({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),h([Ke("objectIdField")],t.prototype,"readObjectIdField",null),h([f({})],t.prototype,"geometryType",void 0),h([f({})],t.prototype,"typeIdField",void 0),h([f({})],t.prototype,"types",void 0),h([f({readOnly:!0})],t.prototype,"parsedUrl",null),h([f({readOnly:!0}),It("serviceRasterInfo.pixelSize.x")],t.prototype,"pixelSizeX",void 0),h([f({readOnly:!0}),It("serviceRasterInfo.pixelSize.y")],t.prototype,"pixelSizeY",void 0),h([f({type:Function})],t.prototype,"pixelFilter",void 0),h([f()],t.prototype,"raster",void 0),h([f()],t.prototype,"viewId",void 0),h([f({types:b8,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:w8,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="flow"})}}}}})],t.prototype,"renderer",null),h([Ke("renderer")],t.prototype,"readRenderer",null),h([et("renderer")],t.prototype,"writeRenderer",null),h([f()],t.prototype,"symbolizer",void 0),h([f(n2)],t.prototype,"opacity",void 0),h([f({readOnly:!0}),It("serviceRasterInfo.attributeTable")],t.prototype,"rasterAttributeTable",void 0),h([f({readOnly:!0})],t.prototype,"rasterFields",null),h([f({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),h([f({type:Wr})],t.prototype,"renderingRule",null),h([Ke("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),h([et("renderingRule")],t.prototype,"writeRenderingRule",null),h([f()],t.prototype,"serviceDataType",void 0),h([f({readOnly:!0,type:wt})],t.prototype,"spatialReference",void 0),h([Ke("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),h([f({json:{type:pC.jsonValues}})],t.prototype,"pixelType",void 0),h([Ke("pixelType")],t.prototype,"readPixelType",null),h([et("pixelType")],t.prototype,"writePixelType",null),h([f({constructOnly:!0,type:mS})],t.prototype,"serviceRasterInfo",void 0),h([f()],t.prototype,"sourceJSON",void 0),h([f(pS)],t.prototype,"url",void 0),h([f({readOnly:!0})],t.prototype,"version",void 0),h([Ke("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=h([me("esri.layers.mixins.ArcGISImageService")],t),t};let _l=class extends Qg(O4(Sb(Xg(_b(xb(_5e(k4(S4(um(uh)))))))))){constructor(...e){super(...e),this.legendEnabled=!0,this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery"}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=de(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(Fp).then(()=>this._fetchService(t))),Promise.resolve(this)}writeOperationalLayerType(e,t,r){const i=this.renderer?.type==="vector-field";t[r]=i?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.rasterFields,r=this.title,i=new Set;let n=!1,s=!1;this.capabilities&&(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,s=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const o=new Set;n&&o.add("raster.itempixelvalue");for(const a of t){const l=a.name.toLowerCase();o.has(l)||l.includes("raster.servicepixelvalue.")||i.add(a.name)}return s&&i.add("raster.magnitude").add("raster.direction"),I9({fields:t,title:r},{...e,visibleFieldNames:i})}queryFeatures(e,t){return this.queryRasters(e,t).then(r=>{if(r?.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryFeatureCount(e,t){return this.queryRasterCount(e,t)}redraw(){this.emit("redraw")}serviceSupportsSpatialReference(e){return M9(this,e)}};h([f(v9)],_l.prototype,"legendEnabled",void 0),h([f({type:["show","hide"]})],_l.prototype,"listMode",void 0),h([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],_l.prototype,"isReference",void 0),h([f({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],_l.prototype,"operationalLayerType",void 0),h([et("web-map","operationalLayerType")],_l.prototype,"writeOperationalLayerType",null),h([f(hS)],_l.prototype,"popupEnabled",void 0),h([f({type:sm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],_l.prototype,"popupTemplate",void 0),h([f({readOnly:!0})],_l.prototype,"defaultPopupTemplate",null),h([f({readOnly:!0,json:{read:!1}})],_l.prototype,"type",void 0),_l=h([me("esri.layers.ImageryLayer")],_l);const x5e=_l;var Gat=Object.freeze(Object.defineProperty({__proto__:null,default:x5e},Symbol.toStringTag,{value:"Module"}));const Dte=96;function L8(e,t){const r=t||e.extent,i=e.width,n=am(r&&r.spatialReference);return r&&i?r.width/i*n*VQ*Dte:0}function qat(e,t){return e/(am(t)*VQ*Dte)}class EI{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new $e(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new EI(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!i||!i.match||!i.match(s))throw new $e((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!n||!n.match||!n.match(s))throw new $e((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new EI(o,a,r)}}const Fte=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0}readCapabilities(r,i){const n=i.capabilities&&i.capabilities.split(",").map(E=>E.toLowerCase().trim());if(!n)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=n.includes("data"),a=n.includes("query"),l=n.includes("map"),u=!!i.exportTilesAllowed,c=n.includes("tilemap"),p=s!=="tile"&&!!i.supportsDynamicLayers,d=s!=="tile"&&(!i.tileInfo||p),m=s!=="tile"&&(!i.tileInfo||p),g=s!=="tile",b=i.cimVersion&&EI.parse(i.cimVersion),v=b?.since(1,4)??!1,_=b?.since(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:o,supportsTileMap:c},exportMap:l?{supportsArcadeExpressionForLabeling:v,supportsSublayersChanges:g,supportsDynamicLayers:p,supportsSublayerVisibility:d,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:_}:null,exportTiles:u?{maxExportTilesCount:+i.maxExportTilesCount}:null}}readVersion(r,i){let n=i.currentVersion;return n||(n=i.hasOwnProperty("capabilities")||i.hasOwnProperty("tables")?10:i.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchSublayerInfo(r,i){return await this.fetchAllLayersAndTables(i),this._allLayersAndTablesMap.get(r)}async fetchAllLayersAndTables(r){await this.load(r),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Mt(fn(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(n=>{this._allLayersAndTablesMap=new Map;for(const s of n.data.layers)this._allLayersAndTablesMap.set(s.id,s);return{result:n.data}},n=>({error:n})));const i=await this._allLayersAndTablesPromise;if(ui(r),"result"in i)return i.result;throw i.error}};return h([f({readOnly:!0})],t.prototype,"capabilities",void 0),h([Ke("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),h([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([f({type:qt})],t.prototype,"fullExtent",void 0),h([f(QX)],t.prototype,"id",void 0),h([f({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),h([f(hS)],t.prototype,"popupEnabled",void 0),h([f({type:wt})],t.prototype,"spatialReference",void 0),h([f({readOnly:!0})],t.prototype,"version",void 0),h([Ke("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=h([me("esri.layers.mixins.ArcGISMapService")],t),t};let h1=class extends Hs(Lt){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(HZ(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=de(this.getCollections)?this.getCollections():null;if(Ne(e))return void this.removeAll();let t=0;for(const r of e)de(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new Lt(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:i=>!!i;for(const i of t)if(i){if(r(i)){const n=this.indexOf(i,e);n>=0?n!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(i);if(Array.isArray(n))for(const s of n)e=this._processCollection(e,s);else e=this._processCollection(e,n)}}return e}};h([f()],h1.prototype,"getCollections",void 0),h([f()],h1.prototype,"getChildrenFunction",void 0),h([f()],h1.prototype,"itemFilterFunction",void 0),h1=h([me("esri.core.CollectionFlattener")],h1);const Gf=h1;var r5;function dC(e){return e&&e.type==="esriSMS"}function fC(e,t,r){const i=this.originIdOf(t)>=zo(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&r.layer?.type==="map-image"&&(r.writeSublayerStructure||i)}}function qB(e,t,r){return{enabled:!!r&&r.layer?.type==="tile"&&this._isOverridden(t)}}function al(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Y3(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=zo(r.origin))}}const mC=ot.getLogger("esri.layers.support.Sublayer");let S5e=0;const uy=new Set;uy.add("layer"),uy.add("parent"),uy.add("loaded"),uy.add("loadStatus"),uy.add("loadError"),uy.add("loadWarnings");let er=r5=class extends Hs(um(tS(Ya))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{if(!this.layer&&!this.url)throw new $e("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let t=null;if(!this.layer||this.originIdOf("url")>bt.SERVICE||this.source?.type==="data-layer")t=(await Mt(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{let r=this.id;this.source?.type==="map-layer"&&(r=this.source.mapLayerId),t=await this.layer.fetchSublayerInfo(r,e)}t&&(this.sourceJSON=t,this.read({layerDefinition:t},{origin:"service"}))})()),this}readCapabilities(e,t){const r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(s=>s.trim()):[],i=this.url?zf(this.url):null,n=r.includes(de(i)&&i.serverType==="MapServer"?"data":"query");return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:n}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new E9(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get id(){const e=this._get("id");return e??S5e++}set id(e){this._get("id")!==e&&(this.get("layer.capabilities.exportMap.supportsDynamicLayers")!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,i){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},i))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const r=t.layerDefinition;return 1-.01*(r.transparency!=null?r.transparency:r.drawingInfo.transparency)}writeOpacity(e,t,r,i){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=KT(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e){for(const t of e.getSymbols())if($g(t)){mC.warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new dp({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Bi(Lt.ofType(r5),e)}writeSublayers(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map(i=>i.id).toArray().reverse())}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return null}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,t?.type==="map-layer")return`${e.path}/${t.mapLayerId}`;const r={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${Df(r)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,i){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Mn(this),t=new r5;return Mn(t).store=e.clone(uy),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return I9(this,e)}createQuery(){return new jn({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=this.layer?.parsedUrl,t=new(await Be(()=>Promise.resolve().then(function(){return pSe}),void 0)).default({url:e.path});return e&&this.source&&(this.source.type==="map-layer"?t.layerId=this.source.mapLayerId:t.dynamicDataSource=this.source),this.layer.refreshInterval!=null&&(t.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(t.definitionExpression=this.definitionExpression),this.floorInfo&&(t.floorInfo=Pe(this.floorInfo)),this.originIdOf("labelingInfo")>bt.SERVICE&&(t.labelingInfo=Pe(this.labelingInfo)),this.originIdOf("labelsVisible")>bt.DEFAULTS&&(t.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>bt.DEFAULTS&&(t.legendEnabled=this.legendEnabled),this.originIdOf("visible")>bt.DEFAULTS&&(t.visible=this.visible),this.originIdOf("minScale")>bt.DEFAULTS&&(t.minScale=this.minScale),this.originIdOf("maxScale")>bt.DEFAULTS&&(t.maxScale=this.maxScale),this.originIdOf("opacity")>bt.DEFAULTS&&(t.opacity=this.opacity),this.originIdOf("popupTemplate")>bt.DEFAULTS&&(t.popupTemplate=Pe(this.popupTemplate)),this.originIdOf("renderer")>bt.SERVICE&&(t.renderer=Pe(this.renderer)),this.source?.type==="data-layer"&&(t.dynamicDataSource=this.source.clone()),this.originIdOf("title")>bt.DEFAULTS&&(t.title=this.title),this.layer.type==="map-image"&&this.layer.originIdOf("customParameters")>bt.DEFAULTS&&(t.customParameters=this.layer.customParameters),this.layer.type==="tile"&&this.layer.originIdOf("customParameters")>bt.DEFAULTS&&(t.customParameters=this.layer.customParameters),t}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(i==null)return null;let n=null;return r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===i.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const n=i.domains&&i.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),t){if(await this.load(),!this.capabilities?.operations?.supportsQuery)throw new $e("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:r},{default:i}]=await Promise.all([Be(()=>Promise.resolve().then(function(){return DMe}),void 0),Be(()=>Promise.resolve().then(function(){return l_e}),void 0)]),n=await r(this.url,jn.from(e),this.layer?.spatialReference??null,{...t,query:{...this.layer?.customParameters,token:this.layer?.apiKey}}),s=i.fromJSON(n.data);if(s?.features)for(const o of s.features)o.sourceLayer=this;return s}toExportImageJSON(e){const t={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},r=r9(e,this.definitionExpression);de(r)&&(t.definitionExpression=r);const i=["renderer","labelingInfo","opacity","labelsVisible"].reduce((s,o)=>(s[o]=this.originIdOf(o),s),{});if(Object.keys(i).some(s=>i[s]>bt.SERVICE)){const s=t.drawingInfo={};i.renderer>bt.SERVICE&&(s.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>bt.SERVICE&&(s.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>bt.SERVICE&&(s.labelingInfo=this.labelingInfo?this.labelingInfo.map(o=>o.write({},{origin:"service",layer:this.layer})):null,s.showLabels=!0),i.opacity>bt.SERVICE&&(s.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(s.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const i of r)dC(i.symbol)&&t(i.symbol);"symbol"in e&&dC(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&dC(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,i=this._get(e);let n,s;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",s="supportsModification"}const o=Mn(this).getDefaultOrigin();if(o!=="service"){if(n&&this.get(`layer.capabilities.exportMap.${n}`)===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(s&&this.get(`capabilities.exportMap.${s}`)===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&i!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null,r.layer=null}),this.handles.removeAll()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.handles.add([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{const i=this.get("layer.capabilities.exportMap.supportsSublayersChanges");i==null||i||(mC.error(new $e("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,t){mC.error(new $e("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};er.test={isMapImageLayerOverridePolicy:e=>e===al||e===fC,isTileImageLayerOverridePolicy:e=>e===qB},h([f({readOnly:!0})],er.prototype,"capabilities",void 0),h([Ke("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],er.prototype,"readCapabilities",null),h([f({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:fC}}})],er.prototype,"definitionExpression",null),h([f({type:[No],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],er.prototype,"fields",void 0),h([f({readOnly:!0})],er.prototype,"fieldsIndex",null),h([f({type:hee,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:fC},origins:{"web-scene":{read:!1,write:!1}}}})],er.prototype,"floorInfo",null),h([f({type:qt,json:{read:{source:"layerDefinition.extent"}}})],er.prototype,"fullExtent",void 0),h([f({type:String})],er.prototype,"globalIdField",void 0),h([Ke("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],er.prototype,"readGlobalIdFieldFromService",null),h([f({type:fr,json:{write:{ignoreOrigin:!0}}})],er.prototype,"id",null),h([f({value:null,type:[dS],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:al}}})],er.prototype,"labelingInfo",null),h([et("labelingInfo")],er.prototype,"writeLabelingInfo",null),h([f({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:al}}})],er.prototype,"labelsVisible",null),h([f({value:null})],er.prototype,"layer",null),h([f({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Y3}}})],er.prototype,"legendEnabled",void 0),h([f({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],er.prototype,"listMode",null),h([f({type:Number,value:0,json:{write:{overridePolicy:al}}})],er.prototype,"minScale",null),h([Ke("minScale",["minScale","layerDefinition.minScale"])],er.prototype,"readMinScale",null),h([f({type:Number,value:0,json:{write:{overridePolicy:al}}})],er.prototype,"maxScale",null),h([Ke("maxScale",["maxScale","layerDefinition.maxScale"])],er.prototype,"readMaxScale",null),h([f({readOnly:!0})],er.prototype,"effectiveScaleRange",null),h([f({type:String})],er.prototype,"objectIdField",void 0),h([Ke("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],er.prototype,"readObjectIdFieldFromService",null),h([f({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:al}}})],er.prototype,"opacity",null),h([Ke("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],er.prototype,"readOpacity",null),h([et("opacity")],er.prototype,"writeOpacity",null),h([f({json:{type:fr,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:al}}})],er.prototype,"parent",void 0),h([et("parent")],er.prototype,"writeParent",null),h([f({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Y3,writer(e,t,r){t[r]=!e}}}})],er.prototype,"popupEnabled",void 0),h([f({type:sm,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Y3}}})],er.prototype,"popupTemplate",void 0),h([f({readOnly:!0})],er.prototype,"defaultPopupTemplate",null),h([f({types:uS,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:al},origins:{"web-scene":{types:vX,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:al}}}}})],er.prototype,"renderer",null),h([f({types:{key:"type",base:null,typeMap:{"data-layer":Oa,"map-layer":dp}},cast(e){if(e){if("mapLayerId"in e)return Tl(dp,e);if("dataSource"in e)return Tl(Oa,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:al}}})],er.prototype,"source",null),h([f()],er.prototype,"sourceJSON",void 0),h([f({value:null,json:{type:[fr],write:{target:"subLayerIds",allowNull:!0,overridePolicy:al}}})],er.prototype,"sublayers",null),h([ur("sublayers")],er.prototype,"castSublayers",null),h([et("sublayers")],er.prototype,"writeSublayers",null),h([f({type:String,json:{name:"name",write:{overridePolicy:Y3}}})],er.prototype,"title",void 0),h([f({type:String})],er.prototype,"typeIdField",void 0),h([Ke("typeIdField",["layerDefinition.typeIdField"])],er.prototype,"readTypeIdField",null),h([f({type:[S9],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],er.prototype,"types",void 0),h([f({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:qB}}})],er.prototype,"url",null),h([f({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:al}}})],er.prototype,"visible",null),h([et("visible")],er.prototype,"writeVisible",null),er=r5=h([me("esri.layers.support.Sublayer")],er);const yS=er;function HB(e,t,r){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>r||n.originIdOf("maxScale")>r||n.originIdOf("renderer")>r||n.originIdOf("labelingInfo")>r||n.originIdOf("opacity")>r||n.originIdOf("labelsVisible")>r||n.originIdOf("source")>r)||!jte(e,t)}function E5e(e,t,r){return!!e.some(i=>{const n=i.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===i.id&&(Ne(n.gdbVersion)||n.gdbVersion===r))||i.originIdOf("renderer")>bt.SERVICE||i.originIdOf("labelingInfo")>bt.SERVICE||i.originIdOf("opacity")>bt.SERVICE||i.originIdOf("labelsVisible")>bt.SERVICE})||!jte(e,t)}function jte(e,t){if(!e||!e.length||Ne(t))return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let i=0;const n=r.length;for(const{id:s}of e){for(;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}function M5e(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const I5e=ot.getLogger("esri.layers.TileLayer");function T5e(e,t){const r=[],i={};return e&&e.forEach(n=>{const s=new yS;if(s.read(n,t),i[s.id]=s,n.parentLayerId!=null&&n.parentLayerId!==-1){const o=i[n.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(s)}else r.unshift(s)}),r}const yC=Lt.ofType(yS);function Ute(e,t){e&&e.forEach(r=>{t(r),r.sublayers&&r.sublayers.length&&Ute(r.sublayers,t)})}const Vte=e=>{let t=class extends e{constructor(...r){super(...r),this.allSublayers=new Gf({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.sublayersSourceJSON={[bt.SERVICE]:{},[bt.PORTAL_ITEM]:{},[bt.WEB_SCENE]:{},[bt.WEB_MAP]:{}},this.own(it(()=>this.sublayers,(i,n)=>this._handleSublayersChange(i,n),Bf))}readSublayers(r,i){if(!i||!r)return;const{sublayersSourceJSON:n}=this,s=zo(i.origin);if(s<bt.SERVICE||(n[s]={context:i,visibleLayers:r.visibleLayers||n[s].visibleLayers,layers:r.layers||n[s].layers},s>bt.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=Mn(this);l.setDefaultOrigin(a),this._set("sublayers",new yC(o)),l.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(i=>i.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const i=zo(r==="web-document"?"web-map":r);let n=bt.SERVICE,s=this.sublayersSourceJSON[bt.SERVICE].layers,o=this.sublayersSourceJSON[bt.SERVICE].context,a=null;const l=[bt.PORTAL_ITEM,bt.WEB_SCENE,bt.WEB_MAP].filter(g=>g<=i);for(const g of l){const b=this.sublayersSourceJSON[g];M5e(b.layers)&&(n=g,s=b.layers,o=b.context,b.visibleLayers&&(a={visibleLayers:b.visibleLayers,context:b.context}))}const u=[bt.PORTAL_ITEM,bt.WEB_SCENE,bt.WEB_MAP].filter(g=>g>n&&g<=i);let c=null;for(const g of u){const{layers:b,visibleLayers:v,context:_}=this.sublayersSourceJSON[g];b&&(c={layers:b,context:_}),v&&(a={visibleLayers:v,context:_})}const p=T5e(s,o),d=new Map,m=new Set;if(c)for(const g of c.layers)d.set(g.id,g);if(a)for(const g of a.visibleLayers)m.add(g);return Ute(p,g=>{c&&g.read(d.get(g.id),c.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:D2(n),sublayers:new yC({items:p})}}read(r,i){super.read(r,i),this.readSublayers(r,i)}_handleSublayersChange(r,i){i&&(i.forEach(n=>{n.parent=null,n.layer=null}),this.handles.remove("sublayers-owner")),r&&(r.forEach(n=>{n.parent=this,n.layer=this}),this.handles.add([r.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),r.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(r.on("before-changes",n=>{I5e.error(new $e("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return h([f({readOnly:!0})],t.prototype,"allSublayers",void 0),h([f({readOnly:!0,type:Lt.ofType(yS)})],t.prototype,"serviceSublayers",void 0),h([f({value:null,type:yC,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),h([f({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=h([me("esri.layers.mixins.SublayersOwner")],t),t};function Hat(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?Bte(e.view.floors,t.floorInfo.floorField):null}function WB(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?Bte(e,t.floorInfo.floorField):null}function Bte(e,t){if(!e?.length)return null;const r=e.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}const A5e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let xa=class extends Hs(kt){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const r=WB(this.floors,t);return t.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&E5e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(A5e[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){const e=!!this.floors?.length,t=this.visibleSublayers.filter(r=>r.definitionExpression!=null||e&&r.floorInfo!=null);return t.length?JSON.stringify(t.reduce((r,i)=>{const n=WB(this.floors,i),s=r9(n,i.definitionExpression);return de(s)&&(r[i.id]=s),r},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=n=>{const s=this.scale,o=s===0,a=n.minScale===0||s<=n.minScale,l=n.maxScale===0||s>=n.maxScale;n.visible&&(o||a&&l)&&(n.sublayers?n.sublayers.forEach(r):e.unshift(n))};t&&t.forEach(r);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((n,s)=>e[s]!==n)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};h([f({readOnly:!0})],xa.prototype,"dynamicLayers",null),h([f()],xa.prototype,"floors",void 0),h([f({readOnly:!0})],xa.prototype,"hasDynamicLayers",null),h([f()],xa.prototype,"layer",null),h([f({readOnly:!0})],xa.prototype,"layers",null),h([f({readOnly:!0})],xa.prototype,"layerDefs",null),h([f({type:Number})],xa.prototype,"scale",void 0),h([f(sxe)],xa.prototype,"timeExtent",void 0),h([f({readOnly:!0})],xa.prototype,"version",null),h([f({readOnly:!0})],xa.prototype,"visibleSublayers",null),xa=h([me("esri.layers.mixins.ExportImageParameters")],xa);let nn=class extends Qg(O4(Xg(Vte(Fte(S4(_b(xb(um(Sb(l9(k4(Hs(uh))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=de(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Fp).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:u})=>u&&u.toArray().reverse()).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const u=zo(i.origin);if(u===bt.PORTAL_ITEM){const c=this.createSublayersForOrigin("service").sublayers;s=HB(n,c,bt.SERVICE)}else if(u>bt.PORTAL_ITEM){const c=this.createSublayersForOrigin("portal-item");s=HB(n,c.sublayers,zo(c.origin))}}const o=[],a={writeSublayerStructure:s,...i};let l=s;n.forEach(u=>{const c=u.write({},a);o.push(c),l=l||u.originOf("visible")==="user"}),o.some(u=>Object.keys(u).length>1)&&(t.layers=o),l&&(t.visibleLayers=n.filter(u=>u.visible).map(u=>u.id))}createExportImageParameters(e,t,r,i){const n=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new xa({layer:this,floors:i?.floors,scale:L8({extent:e,width:t})*n}),o=s.toJSON();s.destroy();const a=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=e&&e.spatialReference,u=l.wkid||JSON.stringify(l.toJSON());o.dpi*=n;const c={};if(i?.timeExtent){const{start:p,end:d}=i.timeExtent.toJSON();c.time=p&&d&&p===d?""+p:`${p??"null"},${d??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(c.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+r,...o,...a,...c}}async fetchImage(e,t,r,i){const n={responseType:"image",signal:i?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,i),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},s=this.parsedUrl.path+"/export";if(n.query.dynamicLayers!=null&&!this.capabilities.exportMap.supportsDynamicLayers)throw new $e("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:n.query});return Mt(s,n).then(o=>o.data).catch(o=>{throw Vn(o)?o:new $e("mapimagelayer:image-fetch-error",`Unable to load image: ${s}`,{error:o})})}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Mt(this.url,t),{extent:i,fullExtent:n,timeExtent:s}=r,o=i||n;return{fullExtent:o&&qt.fromJSON(o),timeExtent:s&&ca.fromJSON({start:s[0],end:s[1]})}}loadAll(){return iN(this,e=>{e(this.allSublayers)})}serviceSupportsSpatialReference(e){return M9(this,e)}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await Mt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};h([f({type:Boolean})],nn.prototype,"datesInUnknownTimezone",void 0),h([f()],nn.prototype,"dpi",void 0),h([f()],nn.prototype,"gdbVersion",void 0),h([f()],nn.prototype,"imageFormat",void 0),h([Ke("imageFormat",["supportedImageFormatTypes"])],nn.prototype,"readImageFormat",null),h([f({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],nn.prototype,"imageMaxHeight",void 0),h([f({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],nn.prototype,"imageMaxWidth",void 0),h([f()],nn.prototype,"imageTransparency",void 0),h([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],nn.prototype,"isReference",void 0),h([f({json:{read:!1,write:!1}})],nn.prototype,"labelsVisible",void 0),h([f({type:["ArcGISMapServiceLayer"]})],nn.prototype,"operationalLayerType",void 0),h([f({json:{read:!1,write:!1}})],nn.prototype,"popupEnabled",void 0),h([f()],nn.prototype,"sourceJSON",void 0),h([f({json:{write:{ignoreOrigin:!0}}})],nn.prototype,"sublayers",void 0),h([et("sublayers",{layers:{type:[yS]},visibleLayers:{type:[fr]}})],nn.prototype,"writeSublayers",null),h([f({type:["show","hide","hide-children"]})],nn.prototype,"listMode",void 0),h([f({json:{read:!1},readOnly:!0,value:"map-image"})],nn.prototype,"type",void 0),h([f(pS)],nn.prototype,"url",void 0),nn=h([me("esri.layers.MapImageLayer")],nn);const W9=nn;var Wat=Object.freeze(Object.defineProperty({__proto__:null,default:W9},Symbol.toStringTag,{value:"Module"})),N8;let $c=N8=class extends Je{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new N8({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],$c.prototype,"cols",void 0),h([f({type:fr,json:{write:!0}})],$c.prototype,"level",void 0),h([f({type:String,json:{write:!0}})],$c.prototype,"levelValue",void 0),h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],$c.prototype,"origin",void 0),h([f({type:Number,json:{write:!0}})],$c.prototype,"resolution",void 0),h([f({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],$c.prototype,"rows",void 0),h([f({type:Number,json:{write:!0}})],$c.prototype,"scale",void 0),$c=N8=h([me("esri.layers.support.LOD")],$c);const rr=$c;var Ld;const JB=new Xt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Pn=Ld=class extends Je{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=wt.WebMercator,numLODs:s=24}=e;if(!Gs(n)){const p=[];if(r)for(let d=0;d<r.length;d++){const m=r[d];p.push({level:d,scale:m,resolution:m})}else{let d=5e-4;for(let m=s-1;m>=0;m--)p.unshift({level:m,scale:d,resolution:d}),d*=2}return new Ld({dpi:96,lods:p,origin:new At(0,0,n),size:[i,i],spatialReference:n})}const o=za(n),a=e.origin?new At({x:e.origin.x,y:e.origin.y,spatialReference:n}):new At(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,u=1/(am(n)*39.37*l),c=[];if(r)for(let p=0;p<r.length;p++){const d=r[p],m=d*u;c.push({level:p,scale:d,resolution:m})}else{let p=hN(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const d=Math.ceil(s/t);c.push({level:0,scale:p,resolution:p*u});for(let m=1;m<d;m++){const g=p/2**t,b=g*u;c.push({level:m,scale:g,resolution:b}),p=g}}return new Ld({dpi:l,lods:c,origin:a,size:[i,i],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=za(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return At.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,this._levelToLOD[n.level]=n})),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Xn(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const u=t4(t,this.spatialReference);if(Ne(u))return null;s=u.x,o=u.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:jl()}),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Ld.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Ld.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=jl()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),i=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+i,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Ld.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const r=[],i=this.lods.length;for(let n=0;n<i;n++){const s=this.lods[n],o=s.resolution*t;r.push(new rr({level:s.level,scale:s.scale,resolution:o}))}return new Ld({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};h([f({type:Number,json:{write:!0}})],Pn.prototype,"compressionQuality",void 0),h([f({type:Number,json:{write:!0}})],Pn.prototype,"dpi",void 0),h([f({type:String,json:{read:JB.read,write:JB.write,origins:{"web-scene":{read:!1,write:!1}}}})],Pn.prototype,"format",void 0),h([f({readOnly:!0})],Pn.prototype,"isWrappable",null),h([f({type:At,json:{write:!0}})],Pn.prototype,"origin",void 0),h([Ke("origin")],Pn.prototype,"readOrigin",null),h([f({type:[rr],value:null,json:{write:!0}})],Pn.prototype,"lods",null),h([f({readOnly:!0})],Pn.prototype,"minScale",void 0),h([f({readOnly:!0})],Pn.prototype,"maxScale",void 0),h([f({readOnly:!0})],Pn.prototype,"scales",void 0),h([f({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Pn.prototype,"size",void 0),h([Ke("size",["rows","cols"])],Pn.prototype,"readSize",null),h([et("size",{cols:{type:fr},rows:{type:fr}})],Pn.prototype,"writeSize",null),h([f({type:wt,json:{write:!0}})],Pn.prototype,"spatialReference",void 0),Pn=Ld=h([me("esri.layers.support.TileInfo")],Pn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Pn||(Pn={}));const Go=Pn;var D8;let Nd=D8=class extends Je{constructor(e){super(e)}clone(){return new D8({customLayerParameters:Pe(this.customLayerParameters),customParameters:Pe(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};h([f({json:{type:Object,write:!0}})],Nd.prototype,"customLayerParameters",void 0),h([f({json:{type:Object,write:!0}})],Nd.prototype,"customParameters",void 0),h([f({type:String,json:{write:!0}})],Nd.prototype,"layerIdentifier",void 0),h([f({type:String,json:{write:!0}})],Nd.prototype,"tileMatrixSet",void 0),h([f({type:String,json:{write:!0}})],Nd.prototype,"url",void 0),Nd=D8=h([me("esri.layer.support.WMTSLayerInfo")],Nd);let Di=class extends Qg(Sb(Xg(_b(xb(um(uh)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new qt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,wt.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=wt.WebMercator,this.subDomains=null,this.tileInfo=new Go({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new At({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:wt.WebMercator}),spatialReference:wt.WebMercator,lods:[new rr({level:0,scale:591657527591555e-6,resolution:156543.033928}),new rr({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new rr({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new rr({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new rr({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new rr({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new rr({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new rr({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new rr({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new rr({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new rr({level:10,scale:577790.554289,resolution:152.874056570411}),new rr({level:11,scale:288895.277144,resolution:76.4370282850732}),new rr({level:12,scale:144447.638572,resolution:38.2185141425366}),new rr({level:13,scale:72223.819286,resolution:19.1092570712683}),new rr({level:14,scale:36111.909643,resolution:9.55462853563415}),new rr({level:15,scale:18055.954822,resolution:4.77731426794937}),new rr({level:16,scale:9027.977411,resolution:2.38865713397468}),new rr({level:17,scale:4513.988705,resolution:1.19432856685505}),new rr({level:18,scale:2256.994353,resolution:.597164283559817}),new rr({level:19,scale:1128.497176,resolution:.298582141647617}),new rr({level:20,scale:564.248588,resolution:.14929107082380833}),new rr({level:21,scale:282.124294,resolution:.07464553541190416}),new rr({level:22,scale:141.062147,resolution:.03732276770595208}),new rr({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let r="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const i=new Qc(this.urlTemplate);!(!!this.subDomains&&this.subDomains.length>0)&&i.authority.includes("{subDomain}")&&(r="is missing 'subDomains' property")}else r="spatialReference must match tileInfo.spatialReference";else r="is missing the required 'urlTemplate' property value";if(r)throw new $e("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${r}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&wt.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,i=new Qc(t),n=i.scheme?i.scheme+"://":"//",s=n+i.authority+"/";if(i.authority.includes("{subDomain}")){if(r&&r.length>0&&i.authority.split(".").length>1)for(const o of r)e.push(n+i.authority.replace(/\{subDomain\}/gi,o)+"/")}else e.push(s);return e.map(o=>(o.charAt(o.length-1)!=="/"&&(o+="/"),o))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new Qc(e),r=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&qu(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=Va(e)),t.templateUrl=e}fetchTile(e,t,r,i={}){const{signal:n}=i,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:n,query:{...this.refreshParameters}};return Mt(s,o).then(a=>a.data)}getTileUrl(e,t,r){const i=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+Gu(this.urlPath,{level:i,z:i,col:r,x:r,row:t,y:t})}};h([f({type:String,value:"",json:{write:!0}})],Di.prototype,"copyright",void 0),h([f({type:qt,json:{write:!0},nonNullable:!0})],Di.prototype,"fullExtent",void 0),h([f({readOnly:!0,json:{read:!1,write:!1}})],Di.prototype,"legendEnabled",void 0),h([f({type:["show","hide"]})],Di.prototype,"listMode",void 0),h([f({json:{read:!0,write:!0}})],Di.prototype,"blendMode",void 0),h([f()],Di.prototype,"levelValues",null),h([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Di.prototype,"isReference",void 0),h([f({type:["WebTiledLayer"],value:"WebTiledLayer"})],Di.prototype,"operationalLayerType",void 0),h([f({readOnly:!0,json:{read:!1,write:!1}})],Di.prototype,"popupEnabled",void 0),h([f({type:wt})],Di.prototype,"spatialReference",void 0),h([Ke("spatialReference",["spatialReference","fullExtent.spatialReference"])],Di.prototype,"readSpatialReference",null),h([f({type:[String],json:{write:!0}})],Di.prototype,"subDomains",void 0),h([f({type:Go,json:{write:!0}})],Di.prototype,"tileInfo",void 0),h([f({readOnly:!0})],Di.prototype,"tileServers",null),h([f({json:{read:!1}})],Di.prototype,"type",void 0),h([f()],Di.prototype,"urlPath",null),h([f({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],Di.prototype,"urlTemplate",void 0),h([Ke("urlTemplate",["urlTemplate","templateUrl"])],Di.prototype,"readUrlTemplate",null),h([et("urlTemplate",{templateUrl:{type:String}})],Di.prototype,"writeUrlTemplate",null),h([f({type:Nd,json:{write:!0}})],Di.prototype,"wmtsInfo",void 0),Di=h([me("esri.layers.WebTileLayer")],Di);const zte=Di;var Jat=Object.freeze(Object.defineProperty({__proto__:null,default:zte},Symbol.toStringTag,{value:"Module"}));let ro=class extends zte{constructor(...e){super(...e),this.portalItem=null,this.isReference=null,this.tileInfo=new Go({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new At({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:wt.WebMercator}),spatialReference:wt.WebMercator,lods:[new rr({level:0,scale:591657527591555e-6,resolution:156543.033928}),new rr({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new rr({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new rr({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new rr({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new rr({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new rr({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new rr({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new rr({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new rr({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new rr({level:10,scale:577790.554289,resolution:152.874056570411}),new rr({level:11,scale:288895.277144,resolution:76.4370282850732}),new rr({level:12,scale:144447.638572,resolution:38.2185141425366}),new rr({level:13,scale:72223.819286,resolution:19.1092570712683}),new rr({level:14,scale:36111.909643,resolution:9.55462853563415}),new rr({level:15,scale:18055.954822,resolution:4.77731426794937}),new rr({level:16,scale:9027.977411,resolution:2.38865713397468}),new rr({level:17,scale:4513.988705,resolution:1.19432856685505}),new rr({level:18,scale:2256.994353,resolution:.597164283559817}),new rr({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new qt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,wt.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};h([f({type:z2,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],ro.prototype,"portalItem",void 0),h([f({type:Boolean,json:{read:!1,write:!1}})],ro.prototype,"isReference",void 0),h([f({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],ro.prototype,"refreshInterval",null),h([f({type:Go,json:{write:!1}})],ro.prototype,"tileInfo",void 0),h([f({type:["show","hide"]})],ro.prototype,"listMode",void 0),h([f({readOnly:!0,json:{read:!1,write:!1}})],ro.prototype,"subDomains",void 0),h([f({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],ro.prototype,"fullExtent",void 0),h([f({readOnly:!0,json:{read:!1,write:!1}})],ro.prototype,"urlTemplate",void 0),h([f({type:["OpenStreetMap"]})],ro.prototype,"operationalLayerType",void 0),h([f({json:{read:!1}})],ro.prototype,"type",void 0),h([f({json:{read:!1,write:!1}})],ro.prototype,"copyright",void 0),h([f({json:{read:!1,write:!1}})],ro.prototype,"wmtsInfo",void 0),ro=h([me("esri.layers.OpenStreetMapLayer")],ro);const J9=ro;var Zat=Object.freeze(Object.defineProperty({__proto__:null,default:J9},Symbol.toStringTag,{value:"Module"}));const $5e={type:Go,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:C5e}}}}};function C5e(e,t,r,i){if(!e)return null;const{minScale:n,maxScale:s,minLOD:o,maxLOD:a}=t;if(o!=null&&a!=null)return i&&i.ignoreMinMaxLOD?Go.fromJSON(e):Go.fromJSON({...e,lods:e.lods.filter(({level:l})=>l!=null&&l>=o&&l<=a)});if(n!==0&&s!==0){const l=p=>Math.round(1e4*p)/1e4,u=n?l(n):1/0,c=s?l(s):-1/0;return Go.fromJSON({...e,lods:e.lods.filter(p=>{const d=l(p.scale);return d<=u&&d>=c})})}return Go.fromJSON(e)}function k5e(e){return 32+e.length}function O5e(){return 16}function Kat(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=k5e(i);break;case"number":t+=O5e();break;case"boolean":t+=4}}return t}function Yat(e,t){return 32+e.length*t}var sx;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(sx||(sx={}));class tv{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,r){if(this._allAvailability!=="unknown")return this._allAvailability;const i=(t-this.location.top)*this.location.width+(r-this.location.left),n=i%8,s=i>>3,o=this._tileAvailabilityBitSet;return s<0||s>o.length?"unknown":o[s]&1<<n?"available":"unavailable"}_updateFromData(t){const r=this.location.width,i=this.location.height;let n=!0,s=!0;const o=Math.ceil(r*i/8),a=new Uint8Array(o);let l=0;for(let u=0;u<t.length;u++){const c=u%8;t[u]?(s=!1,a[l]|=1<<c):n=!1,c===7&&++l}s?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,r){const i=t.service.request||Mt,{row:n,col:s,width:o,height:a}=t,l={query:{f:"json"}};return r=r?{...l,...r}:l,i(R5e(t),r).then(u=>u.data).catch(u=>{if(u&&u.details&&u.details.httpStatus===422)return{location:{top:n,left:s,width:o,height:a},valid:!0,data:Jpe(o*a,0)};throw u}).then(u=>{if(u.location&&(u.location.top!==n||u.location.left!==s||u.location.width!==o||u.location.height!==a))throw new $e("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:n,left:s,width:o,height:a}});return tv.fromJSON(u)})}static fromJSON(t){tv._validateJSON(t);const r=new tv;return r.location=Object.freeze(Pe(t.location)),r._updateFromData(t.data),Object.freeze(r)}static _validateJSON(t){if(!t||!t.location)throw new $e("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new $e("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new $e("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new $e("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new $e("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function ZB(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function R5e(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}var Ty;const P5e=ot.getLogger("esri.layers.support.TilemapCache");let yu=Ty=class extends Hs(kt){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*sx.MEGABYTES,this.request=Mt,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new aX(this.cacheByteSize),this.own([it(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition()),it(()=>this.layer?.tileInfo?.lods,e=>this._initializeAvailableLevels(e),Yd)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(P5e.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,i){if(!this._availableLevels[e])return Promise.reject(new $e("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,n);if(s)return Promise.resolve(s);const o=i&&i.signal;return i={...i,signal:null},new Promise((a,l)=>{Ka(o,()=>l(wi()));const u=ZB(n);let c=this._pendingTilemapRequests[u];if(!c){c=tv.fromDefinition(n,i).then(d=>(this._tilemapCache.put(u,d,d.byteSize),d));const p=()=>delete this._pendingTilemapRequests[u];this._pendingTilemapRequests[u]=c,c.then(p,p)}c.then(a,l)})}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}fetchAvailability(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch(n=>n).then(n=>{if(n instanceof tv){const s=n.getAvailability(t,r);if(s==="unavailable")throw new $e("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r});return s}if(Vn(n))throw n;return"unknown"}):Promise.reject(new $e("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,i,n){i.level=e,i.row=t,i.col=r;const s=this.layer.tileInfo;s.updateTileInfo(i);const o=this.fetchAvailability(e,t,r,n).catch(a=>{if(Vn(a))throw a;if(s.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw a});return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,n,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,n,s){if(!this._prefetchingEnabled)return;const o=`prefetch-${e}`;if(this.handles.has(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let l=!1;const u={remove(){l||(l=!0,a.abort())}};if(this.handles.add(u,o),await zde(10,a.signal).catch(()=>{}),l||(l=!0,this.handles.remove(o)),Za(a))return;const c={id:e,level:t,row:r,col:i},p={...n,signal:a.signal},d=this.layer.tileInfo;for(let m=0;Ty._prefetches.length<Ty._maxPrefetch&&d.upsampleTile(c);++m){const g=this.fetchAvailability(c.level,c.row,c.col,p);Ty._prefetches.push(g);const b=()=>{Ty._prefetches.removeUnordered(g)};g.then(b,b)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:Df({...e.query,...r,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;const n=ZB(i);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,i)=>!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}};yu._maxPrefetch=4,yu._prefetches=new bf({initialSize:Ty._maxPrefetch}),h([f({constructOnly:!0,type:Number})],yu.prototype,"levels",void 0),h([ur("levels")],yu.prototype,"castLevels",null),h([f({readOnly:!0,type:Number})],yu.prototype,"size",null),h([f({constructOnly:!0,type:Number})],yu.prototype,"cacheByteSize",void 0),h([f({constructOnly:!0})],yu.prototype,"layer",void 0),h([f({constructOnly:!0})],yu.prototype,"request",void 0),yu=Ty=h([me("esri.layers.support.TilemapCache")],yu);const L5e=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}readMaxScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,i){return i.capabilities&&i.capabilities.includes("Tilemap")?new yu({layer:this}):null}};return h([f({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([f()],t.prototype,"minScale",void 0),h([Ke("service","minScale")],t.prototype,"readMinScale",null),h([f()],t.prototype,"maxScale",void 0),h([Ke("service","maxScale")],t.prototype,"readMaxScale",null),h([f({type:wt})],t.prototype,"spatialReference",void 0),h([f({readOnly:!0})],t.prototype,"supportsBlankTile",null),h([f($5e)],t.prototype,"tileInfo",void 0),h([f()],t.prototype,"tilemapCache",void 0),h([Ke("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),h([f()],t.prototype,"version",void 0),t=h([me("esri.layers.mixins.ArcGISCachedService")],t),t},KB=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let sn=class extends Qg(Vte(Xg(_b(xb(L5e(Fte(S4(um(Hs(Sb(l9(k4(uh))))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=de(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(Fp).then(()=>this._fetchService(t))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e&&this._getDefaultAttribution(this._getMapName(e))}readSpatialReference(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&wt.fromJSON(e)}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),s=[],o={writeSublayerStructure:!1,...i};n.forEach(a=>{const l=a.write({},o);s.push(l)}),s.some(a=>Object.keys(a).length>1)&&(t.layers=s)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl.path)}castTileServers(e){return Array.isArray(e)?e.map(t=>fn(t).path):null}fetchTile(e,t,r,i={}){const{signal:n}=i,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:n,query:{...this.refreshParameters}};return Mt(s,o).then(a=>a.data)}getTileUrl(e,t,r){const i=!this.tilemapCache&&this.supportsBlankTile,n=Df({...this.parsedUrl.query,blankTile:!i&&null,...this.customParameters,token:this.apiKey}),s=this.tileServers;return`${s&&s.length?s[t%s.length]:this.parsedUrl.path}/tile/${e}/${t}/${r}${n?"?"+n:""}`}_fetchService(e){return new Promise((t,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new $e("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new $e("tile-layer:undefined-url","layer's url is not defined");const i=zf(this.parsedUrl.path);if(de(i)&&i.serverType==="ImageServer")throw new $e("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Mt(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,r)}).then(t=>{if(t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!c9(this.url))return this._fetchServerVersion(this.url,e).then(r=>{this.read({currentVersion:r})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!d_e(e))return Promise.reject();const r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Mt(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{if(i.data&&i.data.currentVersion)return i.data.currentVersion;throw new $e("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}_getDefaultAttribution(e){if(!e)return;let t;e=e.toLowerCase();for(let r=0,i=KB.length;r<i;r++)if(t=KB[r],t.toLowerCase().includes(e))return Ol("//static.arcgis.com/attribution/"+t)}_getDefaultTileServers(e){const t=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};h([f({readOnly:!0})],sn.prototype,"attributionDataUrl",null),h([f({type:["show","hide","hide-children"]})],sn.prototype,"listMode",void 0),h([f({json:{read:!0,write:!0}})],sn.prototype,"blendMode",void 0),h([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],sn.prototype,"isReference",void 0),h([f({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],sn.prototype,"operationalLayerType",void 0),h([f({type:Boolean})],sn.prototype,"resampling",void 0),h([f()],sn.prototype,"sourceJSON",void 0),h([f({type:wt})],sn.prototype,"spatialReference",void 0),h([Ke("spatialReference",["spatialReference","tileInfo"])],sn.prototype,"readSpatialReference",null),h([f({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],sn.prototype,"path",void 0),h([f({readOnly:!0})],sn.prototype,"sublayers",void 0),h([et("sublayers",{layers:{type:[yS]}})],sn.prototype,"writeSublayers",null),h([f({json:{read:!1,write:!1}})],sn.prototype,"popupEnabled",void 0),h([f()],sn.prototype,"tileServers",null),h([ur("tileServers")],sn.prototype,"castTileServers",null),h([f({readOnly:!0,json:{read:!1}})],sn.prototype,"type",void 0),h([f(pS)],sn.prototype,"url",void 0),sn=h([me("esri.layers.TileLayer")],sn),sn.prototype.fetchTile.__isDefault__=!0;const Z9=sn;var Qat=Object.freeze(Object.defineProperty({__proto__:null,default:Z9},Symbol.toStringTag,{value:"Module"}));const N5e=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function F8(e){return N5e.some(([t,r])=>e>=t&&e<=r)}const D5e={visible:"visibleSublayers"};let ap=class extends Hs(kt){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",t=>this.notifyChange(D5e[t.propertyName]))],"layer"))}get layers(){const{visibleSublayers:e}=this;return e.filter(t=>t.name).map(t=>t.name).join(",")}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,r=e?.sublayers,i=[],n=s=>{const{minScale:o,maxScale:a,sublayers:l,visible:u}=s;u&&(t===0||(o===0||t<=o)&&(a===0||t>=a))&&(l?l.forEach(n):i.unshift(s))};return r?.forEach(n),i}toJSON(){const{layer:e,layers:t}=this,{imageFormat:r,imageTransparency:i,version:n}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:i?"TRUE":"FALSE",version:n,layers:t}}};h([f()],ap.prototype,"layer",null),h([f({readOnly:!0})],ap.prototype,"layers",null),h([f({type:Number})],ap.prototype,"scale",void 0),h([f({readOnly:!0})],ap.prototype,"version",null),h([f({readOnly:!0})],ap.prototype,"visibleSublayers",null),ap=h([me("esri.layers.support.ExportWMSImageParameters")],ap);var i5;let F5e=0,pi=i5=class extends tS(u6){constructor(e){super(e),this._sublayersHandles=new es,this.dimensions=null,this.fullExtents=null,this.featureInfoFormat=null,this.featureInfoUrl=null,this.legendUrl=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.popupEnabled=!1,this.queryable=!1,this.spatialReferences=null}get description(){return this._get("description")}set description(e){this._set("description",e)}get fullExtent(){return this._get("fullExtent")}set fullExtent(e){this._set("fullExtent",e)}readExtent(e,t){return(e=t.extent)?qt.fromJSON(e):null}get id(){const e=this._get("id");return e??F5e++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t?t.legendUrl||t.legendURL:null}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get name(){return this._get("name")}set name(e){this._set("name",e)}set sublayers(e){const t=this._get("sublayers");t&&(t.forEach(r=>{r.layer=null}),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this._sublayersHandles.add([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null})])),this._set("sublayers",e)}castSublayers(e){return Bi(Lt.ofType(i5),e)}get title(){return this._get("title")}set title(e){this._set("title",e)}get visible(){return this._get("visible")}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new i5;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents.map(t=>t.clone())),this.hasOwnProperty("featureInfoFormat")&&(e.featureInfoFormat=this.featureInfoFormat),this.hasOwnProperty("featureInfoUrl")&&(e.featureInfoUrl=this.featureInfoUrl),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};h([f()],pi.prototype,"description",null),h([f({readOnly:!0})],pi.prototype,"dimensions",void 0),h([f({value:null})],pi.prototype,"fullExtent",null),h([Ke("fullExtent",["extent"])],pi.prototype,"readExtent",null),h([f()],pi.prototype,"fullExtents",void 0),h([f()],pi.prototype,"featureInfoFormat",void 0),h([f()],pi.prototype,"featureInfoUrl",void 0),h([f({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],pi.prototype,"id",null),h([f({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],pi.prototype,"legendUrl",void 0),h([Ke(["web-document"],"legendUrl")],pi.prototype,"readLegendUrl",null),h([f({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],pi.prototype,"legendEnabled",void 0),h([f({value:null})],pi.prototype,"layer",null),h([f()],pi.prototype,"maxScale",void 0),h([f()],pi.prototype,"minScale",void 0),h([f({readOnly:!0})],pi.prototype,"effectiveScaleRange",null),h([f({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],pi.prototype,"name",null),h([f()],pi.prototype,"parent",void 0),h([f({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],pi.prototype,"popupEnabled",void 0),h([f({type:Boolean,json:{write:{ignoreOrigin:!0}}})],pi.prototype,"queryable",void 0),h([f()],pi.prototype,"sublayers",null),h([ur("sublayers")],pi.prototype,"castSublayers",null),h([f({type:[Number],json:{read:{source:"spatialReferences"}}})],pi.prototype,"spatialReferences",void 0),h([f({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],pi.prototype,"title",null),h([f({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],pi.prototype,"visible",null),pi=i5=h([me("esri.layers.support.WMSSublayer")],pi);const j8=pi,Q3={84:4326,83:4269,27:4267};function j5e(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const r=e.documentElement;if(r.nodeName==="ServiceExceptionReport"){const C=Array.prototype.slice.call(r.childNodes).map(L=>L.textContent).join(`\r
`);throw new $e("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",C)}const i=Fs("Capability",r),n=Fs("Service",r),s=Fs("Request",i);if(!i||!n||!s)return null;const o=Fs("Layer",i);if(!o)return null;const a=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",l=Uc("Title",n,"")||Uc("Name",n,""),u=Uc("AccessConstraints",n,""),c=/^none$/i.test(u)?"":u,p=Uc("Abstract",n,""),d=parseInt(Uc("MaxWidth",n,"5000"),10),m=parseInt(Uc("MaxHeight",n,"5000"),10),g=QB(s,"GetMap"),b=YB(s,"GetMap"),v=S_(o,a,t);let _,E=0;if(Array.prototype.slice.call(i.childNodes).forEach(C=>{C.nodeName==="Layer"&&(E===0?_=C:(E===1&&v.name&&(v.name="",v.sublayers.push(S_(_,a,t))),v.sublayers.push(S_(C,a,t))),E++)}),!v)return null;let I,x;const T=v.fullExtents;if(I=v.sublayers,I||(I=[]),I.length===0&&I.push(v),x=v.extent,!x){const C=new qt(I[0].extent);v.extent=C.toJSON(),x=v.extent}const M=v.spatialReferences.length>0?v.spatialReferences:Gte(v),k=YB(s,"GetFeatureInfo");let D;if(k){const C=QB(s,"GetFeatureInfo");C.includes("text/html")?D="text/html":C.includes("text/plain")&&(D="text/plain")}if(!D){const C=L=>{L&&(L.queryable=!1,L.sublayers&&L.sublayers.forEach(F=>{C(F)}))};C(v)}const B=qte(I),G=v.minScale||0,W=v.maxScale||0,K=v.dimensions,ne=B.reduce((C,L)=>C.concat(L.dimensions),[]),ye=K.concat(ne).filter(Wte);let y=null;if(ye.length>0){let C=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY;ye.forEach(F=>{const{extent:ae}=F;B5e(ae)?ae.forEach(q=>{C=Math.min(C,q.getTime()),L=Math.max(L,q.getTime())}):ae.forEach(q=>{C=Math.min(C,q.min.getTime()),L=Math.max(L,q.max.getTime())})}),y={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[C,L]}}return{copyright:c,description:p,dimensions:K,extent:x,fullExtents:T,featureInfoFormat:D,featureInfoUrl:k,mapUrl:b,maxWidth:d,maxHeight:m,maxScale:W,minScale:G,layers:B,spatialReferences:M,supportedImageFormatTypes:g,timeInfo:y,title:l,version:a}}function U5e(e){return e.length?e.filter(t=>t.popupEnabled&&t.name&&t.queryable).map(t=>t.name).join(","):""}function Gte(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const r=Gte(t);if(r.length>0)return r}return[]}function qte(e){let t=[];return e.forEach(r=>{t.push(r),r.sublayers&&r.sublayers.length&&(t=t.concat(qte(r.sublayers)),delete r.sublayers)}),t}function n5(e,t,r){return t.getAttribute(e)??r}function V5e(e,t,r,i){const n=Fs(e,r);return n?n5(t,n,i):i}function Fs(e,t){for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];if(Hte(i)&&i.nodeName===e)return i}return null}function s5(e,t){const r=[];for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];Hte(n)&&n.nodeName===e&&r.push(n)}return r}function Uc(e,t,r){const i=Fs(e,t);return i?i.textContent:r}function dw(e,t,r){if(!e)return null;const i=parseFloat(e.getAttribute("minx")),n=parseFloat(e.getAttribute("miny")),s=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,c;r?(a=isNaN(n)?-Number.MAX_VALUE:n,l=isNaN(i)?-Number.MAX_VALUE:i,u=isNaN(o)?Number.MAX_VALUE:o,c=isNaN(s)?Number.MAX_VALUE:s):(a=isNaN(i)?-Number.MAX_VALUE:i,l=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(s)?Number.MAX_VALUE:s,c=isNaN(o)?Number.MAX_VALUE:o);const p=new wt({wkid:t});return new qt({xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:p})}function YB(e,t){const r=Fs(t,e);if(r){const i=Fs("DCPType",r);if(i){const n=Fs("HTTP",i);if(n){const s=Fs("Get",n);if(s){let o=V5e("OnlineResource","xlink:href",s,null);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),G5e(o,["service","request"])}}}}return null}function QB(e,t){const r=s5("Operation",e);if(r.length===0)return s5("Format",Fs(t,e)).map(n=>n.textContent);const i=[];return r.forEach(n=>{n.getAttribute("name")===t&&s5("Format",n).forEach(s=>{i.push(s.textContent)})}),i}function XB(e,t,r){const i=Fs(t,e);if(!i)return r;const{textContent:n}=i;if(n==null||n==="")return r;const s=Number(n);return isNaN(s)?r:s}function S_(e,t,r){if(!e)return null;const i={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},n=Fs("LatLonBoundingBox",e),s=Fs("EX_GeographicBoundingBox",e);let o=null;n&&(o=dw(n,4326)),s&&(o=new qt(0,0,0,0,new wt({wkid:4326})),o.xmin=parseFloat(Uc("westBoundLongitude",s,"0")),o.ymin=parseFloat(Uc("southBoundLatitude",s,"0")),o.xmax=parseFloat(Uc("eastBoundLongitude",s,"0")),o.ymax=parseFloat(Uc("northBoundLatitude",s,"0"))),n||s||(o=new qt(-180,-90,180,90,new wt({wkid:4326}))),i.minScale=XB(e,"MaxScaleDenominator",0),i.maxScale=XB(e,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(t)?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(l=>{if(l.nodeName==="Name")i.name=l.textContent||"";else if(l.nodeName==="Title")i.title=l.textContent||"";else if(l.nodeName==="Abstract")i.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const p=parseInt(u.substring(5),10);p===0||isNaN(p)||o||(o=t==="1.3.0"?dw(l,p,F8(p)):dw(l,p))}const c=u&&u.indexOf(":");if(c&&c>-1){let p=parseInt(u.substring(c+1,u.length),10);p===0||isNaN(p)||(p=Q3[p]?Q3[p]:p);const d=t==="1.3.0"?dw(l,p,F8(p)):dw(l,p);i.fullExtents.push(d)}}else if(l.nodeName===a)l.textContent.split(" ").forEach(u=>{const c=u.includes(":")?parseInt(u.split(":")[1],10):parseInt(u,10);if(c!==0&&!isNaN(c)){const p=Q3[c]?Q3[c]:c;i.spatialReferences.includes(p)||i.spatialReferences.push(p)}});else if(l.nodeName!=="Style"||i.legendURL){if(l.nodeName==="Layer"){const u=S_(l,t,r);u&&(u.parentLayerId=i.id,i.sublayers||(i.sublayers=[]),i.sublayers.push(u))}}else{const u=Fs("LegendURL",l);if(u){const c=Fs("OnlineResource",u);c&&(i.legendURL=c.getAttribute("xlink:href"))}}}),i.extent=o?.toJSON(),i.dimensions=s5("Dimension",e).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),c=l.getAttribute("units"),p=l.textContent,d=l.getAttribute("unitSymbol"),m=l.getAttribute("default"),g=n5("default",l,"0")!=="0",b=n5("nearestValue",l,"0")!=="0",v=n5("current",l,"0")!=="0";return Wte({name:u,units:c})?{name:"time",units:"ISO8601",extent:rz(p),default:rz(m),multipleValues:g,nearestValue:b,current:v}:z5e({name:u,units:c})?{name:"elevation",units:c,extent:ez(p),unitSymbol:d,default:ez(m),multipleValues:g,nearestValue:b}:{name:u,units:c,extent:tz(p),unitSymbol:d,default:tz(m),multipleValues:g,nearestValue:b}}),i}function B5e(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function Hte(e){return e.nodeType===Node.ELEMENT_NODE}function z5e(e){return/^elevation$/i.test(e.name)&&/^(epsg|crs):\d+$/i.test(e.units)}function Wte(e){return/^time$/i.test(e.name)&&/^iso8601$/i.test(e.units)}function G5e(e,t){const r=[],i=fn(e);for(const n in i.query)i.query.hasOwnProperty(n)&&(t.includes(n.toLowerCase())||r.push(n+"="+i.query[n]));return i.path+(r.length?"?"+r.join("&"):"")}function ez(e){if(!e)return null;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:parseFloat(n[0]),max:parseFloat(n[1]),resolution:n.length>=3&&n[2]!=="0"?parseFloat(n[2]):void 0}}).filter(i=>i):r.map(i=>parseFloat(i))}function tz(e){if(!e)return null;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:n[0],max:n[1],resolution:n.length>=3&&n[2]!=="0"?n[2]:void 0}}).filter(i=>i):r}function rz(e){if(!e)return null;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:new Date(n[0]),max:new Date(n[1]),resolution:n.length>=3&&n[2]!=="0"?q5e(n[2]):void 0}}).filter(i=>i):r.map(i=>new Date(i))}function q5e(e){const t=/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i,r=e.match(t);return r?{years:M0(r[1]),months:M0(r[2]),days:M0(r[3]),hours:M0(r[4]),minutes:M0(r[5]),seconds:M0(r[6])}:null}function M0(e){if(!e)return 0;const t=/(?:\d+(?:.|,)\d+|\d+)/,r=e.match(t);if(!r)return 0;const i=r[0].replace(",",".");return Number(i)}function gC(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const iz=new Set([102100,3857,102113,900913]),H5e=new Set([3395,54004]);function W5e(e,t){let r=e.wkid;return Ne(t)?r:(!t.includes(r)&&e.latestWkid&&(r=e.latestWkid),iz.has(r)?t.find(i=>iz.has(i))||t.find(i=>H5e.has(i))||102100:r)}const vC=new Xt({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});let Sr=class extends Hs(Qg(O4(Sb(Xg(_b(xb(um(uh)))))))){constructor(...e){super(...e),this.allSublayers=new Gf({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormat=null,this.featureInfoUrl=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.url=null,this.version=null;const t="wms-sublayer";this.own(it(()=>this.sublayers,(r,i)=>{if(i){for(const n of i)n.layer=null;this.handles.remove(t)}if(r){for(const n of r)n.parent=this,n.layer=this;this.handles.add([r.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),r.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],t)}},Bf))}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=de(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(Fp).then(()=>this._fetchService(t))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return new qt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]})}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.includes("image/png")?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new wt(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference&&this.spatialReference.wkid;e&&r?(t.spatialReferences=e.filter(i=>i!==r),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return nz(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return nz(t.layers,r)}writeSublayers(e,t,r,i){t.layers=[];const n=new Map,s=e.flatten(({sublayers:o})=>o&&o.toArray()).toArray();s.forEach(o=>{typeof o.parent.id=="number"&&(n.has(o.parent.id)?n.get(o.parent.id).push(o.id):n.set(o.parent.id,[o.id]))}),s.forEach(o=>{const a={sublayer:o,...i},l=o.write({parentLayerId:typeof o.parent.id=="number"?o.parent.id:-1},a);if(n.has(o.id)&&(l.sublayerIds=n.get(o.id)),!o.sublayers&&o.name){const u=o.write({},a);delete u.id,t.layers.push(u)}}),t.visibleLayers=s.filter(o=>o.visible&&!o.sublayers).map(o=>o.name)}createExportImageParameters(e,t,r,i){const n=i&&i.pixelRatio||1,s=L8({extent:e,width:t})*n,o=new ap({layer:this,scale:s}),{xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:p}=e,d=W5e(p,this.spatialReferences),m=this.version==="1.3.0"&&F8(d)?`${l},${a},${c},${u}`:`${a},${l},${u},${c}`,g=o.toJSON();return{bbox:m,[this.version==="1.3.0"?"crs":"srs"]:isNaN(d)?void 0:"EPSG:"+d,...g}}async fetchImage(e,t,r,i){const n=this.mapUrl,s=this.createExportImageParameters(e,t,r,i);if(!s.layers){const c=document.createElement("canvas");return c.width=t,c.height=r,c}const o=i?.timeExtent?.start,a=i?.timeExtent?.end,l=de(o)&&de(a)?o.getTime()===a.getTime()?gC(o):`${gC(o)}/${gC(a)}`:void 0,u={responseType:"image",query:this._mixCustomParameters({width:t,height:r,...s,time:l,...this.refreshParameters}),signal:i?.signal};return Mt(n,u).then(c=>c.data)}fetchFeatureInfo(e,t,r,i,n){const s=L8({extent:e,width:t}),o=new ap({layer:this,scale:s}),a=U5e(o.visibleSublayers);if(!this.featureInfoUrl||!a)return null;const l=this.version==="1.3.0"?{I:i,J:n}:{x:i,y:n},u={query_layers:a,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},c={...this.createExportImageParameters(e,t,r),...u},p=this._mixCustomParameters(c),d=lM(this.featureInfoUrl,p),m=document.createElement("iframe");m.src=d,m.style.border="none",m.style.margin="0",m.style.width="100%",m.setAttribute("sandbox","");const g=new sm({title:this.title,content:m});return new fs({sourceLayer:this,popupTemplate:g})}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}findSublayerByName(e){return this.allSublayers.find(t=>t.name===e)}serviceSupportsSpatialReference(e){return b_e(this.url)||this.spatialReferences.some(t=>{const r=t===900913?wt.WebMercator:new wt({wkid:t});return Xn(r,e)})}async _fetchService(e){if(!this.resourceInfo){this.parsedUrl.query&&this.parsedUrl.query.service&&(this.parsedUrl.query.SERVICE=this.parsedUrl.query.service,delete this.parsedUrl.query.service),this.parsedUrl.query&&this.parsedUrl.query.request&&(this.parsedUrl.query.REQUEST=this.parsedUrl.query.request,delete this.parsedUrl.query.request);const t=await Mt(this.parsedUrl.path,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...this.parsedUrl.query,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=j5e(t.data)}if(this.parsedUrl){const t=new Qc(this.parsedUrl.path);t.scheme!=="https"||t.port&&t.port!=="443"||_r.request.httpsDomains.includes(t.host)||_r.request.httpsDomains.push(t.host)}this.read(this.resourceInfo,{origin:"service"})}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function J5e(e,t){return e.some(r=>{for(const i in r)if(bK(r,i,null,t))return!0;return!1})}function nz(e,t,r){const i=new Map;e.every(s=>s.id==null)&&(e=Pe(e)).forEach((s,o)=>s.id=o);for(const s of e){const o=new j8;o.read(s,t),r?.indexOf(o.name)===-1&&(o.visible=!1),i.set(o.id,o)}const n=[];for(const s of e){const o=i.get(s.id);if(s.parentLayerId!=null&&s.parentLayerId>=0){const a=i.get(s.parentLayerId);a.sublayers||(a.sublayers=new Lt),a.sublayers.unshift(o)}else n.unshift(o)}return n}h([f({readOnly:!0})],Sr.prototype,"allSublayers",void 0),h([f({json:{type:Object,write:!0}})],Sr.prototype,"customParameters",void 0),h([f({json:{type:Object,write:!0}})],Sr.prototype,"customLayerParameters",void 0),h([f({type:String,json:{write:!0}})],Sr.prototype,"copyright",void 0),h([f()],Sr.prototype,"description",void 0),h([f({readOnly:!0})],Sr.prototype,"dimensions",void 0),h([f({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Sr.prototype,"fullExtent",void 0),h([Ke(["web-document","portal-item"],"fullExtent",["extent"])],Sr.prototype,"readFullExtentFromItemOrMap",null),h([et(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Sr.prototype,"writeFullExtent",null),h([f()],Sr.prototype,"fullExtents",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0}}})],Sr.prototype,"featureInfoFormat",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0}}})],Sr.prototype,"featureInfoUrl",void 0),h([f({type:String,json:{origins:{"web-document":{default:"image/png",type:vC.jsonValues,read:{reader:vC.read,source:"format"},write:{writer:vC.write,target:"format"}}}}})],Sr.prototype,"imageFormat",void 0),h([Ke("imageFormat",["supportedImageFormatTypes"])],Sr.prototype,"readImageFormat",null),h([f({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Sr.prototype,"imageMaxHeight",void 0),h([f({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Sr.prototype,"imageMaxWidth",void 0),h([f()],Sr.prototype,"imageTransparency",void 0),h([f(v9)],Sr.prototype,"legendEnabled",void 0),h([f({type:["show","hide","hide-children"]})],Sr.prototype,"listMode",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0}}})],Sr.prototype,"mapUrl",void 0),h([f({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Sr.prototype,"isReference",void 0),h([f({type:["WMS"]})],Sr.prototype,"operationalLayerType",void 0),h([f()],Sr.prototype,"resourceInfo",void 0),h([f({type:wt,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Sr.prototype,"spatialReference",void 0),h([Ke(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Sr.prototype,"readSpatialReferenceFromItemOrDocument",null),h([f({type:[fr],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Sr.prototype,"spatialReferences",void 0),h([et(["web-document","portal-item"],"spatialReferences")],Sr.prototype,"writeSpatialReferences",null),h([f({type:Lt.ofType(j8),json:{write:{target:"layers",overridePolicy(e,t,r){if(J5e(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],Sr.prototype,"sublayers",void 0),h([Ke(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Sr.prototype,"readSublayersFromItemOrMap",null),h([Ke("service","sublayers",["layers"])],Sr.prototype,"readSublayers",null),h([et("sublayers",{layers:{type:[j8]},visibleLayers:{type:[String]}})],Sr.prototype,"writeSublayers",null),h([f({json:{read:!1},readOnly:!0,value:"wms"})],Sr.prototype,"type",void 0),h([f(pS)],Sr.prototype,"url",void 0),h([f({type:String,json:{write:{ignoreOrigin:!0}}})],Sr.prototype,"version",void 0),Sr=h([me("esri.layers.WMSLayer")],Sr);const Jte=Sr;var Xat=Object.freeze(Object.defineProperty({__proto__:null,default:Jte},Symbol.toStringTag,{value:"Module"})),U8;let o5=U8=class extends Je{constructor(e){super(e),this.type="none"}clone(){return new U8({type:this.type})}};h([Ft({none:"none",stayAbove:"stay-above"})],o5.prototype,"type",void 0),o5=U8=h([me("esri.ground.NavigationConstraint")],o5);var V8;const sz=ot.getLogger("esri.Ground");let Hh=V8=class extends Yx(Ya){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Lt;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&sz.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{sz.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",_g(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Bve(s)().write(o,i)&&n.push(o)}else i&&i.messages&&i.messages.push(new $e("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return iN(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await Be(()=>import("./ElevationQuery.6d9d10ea.js"),["assets/ElevationQuery.6d9d10ea.js","assets/preload-helper.387dac8f.js"]);ui(t);const i=new r,n=this.layers.filter(oz).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await Be(()=>import("./ElevationQuery.6d9d10ea.js"),["assets/ElevationQuery.6d9d10ea.js","assets/preload-helper.387dac8f.js"]);ui(t);const i=new r,n=this.layers.filter(oz).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Pe(this.surfaceColor),navigationConstraint:Pe(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new V8({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,r){const i=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return Be(()=>import("./layersCreator.fdfc4b2e.js"),["assets/layersCreator.fdfc4b2e.js","assets/lazyLayerLoader.e0a392f3.js","assets/preload-helper.387dac8f.js","assets/portalLayers.029442f0.js","assets/layersLoader.c832ef21.js","assets/jsonContext.4a2dd7f6.js","assets/portalItemUtils.aa871d92.js"]).then(({populateOperationalLayers:o})=>{ui(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return ia(a)}).then(()=>{})}};function Z5e(e){return e&&"createElevationSampler"in e}function oz(e){return e.type==="elevation"||Z5e(e)}h([f({json:{read:!1}})],Hh.prototype,"layers",null),h([et("layers")],Hh.prototype,"writeLayers",null),h([f({readOnly:!0})],Hh.prototype,"resourceInfo",void 0),h([f({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:fr,read:{reader:Z2,source:"transparency"},write:{writer:(e,t)=>{t.transparency=o4(e)},target:"transparency"}}})],Hh.prototype,"opacity",void 0),h([f({type:xt,json:{type:[fr],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Hh.prototype,"surfaceColor",void 0),h([f({type:o5,json:{write:!0}})],Hh.prototype,"navigationConstraint",void 0),Hh=V8=h([me("esri.Ground")],Hh);const MI=Hh;function K5e(e){return!!(e&&e.loaded&&"capabilities"in e&&e?.capabilities?.operations&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const az=ot.getLogger("esri.support.basemapUtils");function Y5e(){return{}}function Q5e(e){for(const t in e){const r=e[t];r?.destroyed===!1&&r.destroy(),delete e[t]}}function X5e(e,t){let r;if(typeof e=="string"){if(!(e in _O)){const i=Object.entries(_O).filter(([n,s])=>_r.apiKey&&!s.classic||!_r.apiKey&&s.classic&&!s.deprecated).map(([n])=>`"${n}"`).join(", ");return az.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${i}`),null}t&&(r=t[e]),r||(r=jf.fromId(e),t&&(t[e]=r))}else r=Bi(jf,e);return r?.destroyed&&(az.warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function eIe(e,t){return e===t?!0:sIe(lz(e),lz(t),{mustMatchReferences:!0})==="equal"}function tIe(e,t){if(Ne(t)||Ne(e))return{spatialReference:null,updating:!1};if(t.loadStatus==="not-loaded")return t.load(),{spatialReference:null,updating:!0};if(t.spatialReference)return{spatialReference:t.spatialReference,updating:!1};if(t.baseLayers.length===0)return{spatialReference:null,updating:!1};const r=t.baseLayers.getItemAt(0);switch(r.loadStatus){case"not-loaded":r.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const i=(("supportedSpatialReferences"in r?r.supportedSpatialReferences:null)||["tileInfo"in r?r.tileInfo?.spatialReference:r.spatialReference]).filter(Boolean);return e.spatialReference?{spatialReference:i.find(n=>e.spatialReference.equals(n))??i[0]??null,updating:!1}:{spatialReference:i[0],updating:!1}}function lz(e){return e?!e.loaded&&e.resourceInfo?iIe(e.resourceInfo.data):{baseLayers:uz(e.baseLayers),referenceLayers:uz(e.referenceLayers)}:null}function uz(e){return(Lt.isCollection(e)?e.toArray():e).map(rIe)}function rIe(e){return{type:e.type,url:Zte("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible,sublayers:e.type!=="map-image"&&e.type!=="wms"||!de(e.sublayers)?void 0:e.sublayers?.map(t=>({id:t.id,visible:t.visible})),activeLayerId:e.type==="wmts"?e.activeLayer?.id:void 0}}function iIe(e){return e?{baseLayers:cz(e.baseMapLayers.filter(t=>!t.isReference)),referenceLayers:cz(e.baseMapLayers.filter(t=>t.isReference))}:null}function cz(e){return e.map(t=>nIe(t))}function nIe(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:Zte(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility,sublayers:void 0,activeLayerId:void 0}}function sIe(e,t,r){return e!=null!=(t!=null)?"not-equal":e?hz(e.baseLayers,t.baseLayers)?hz(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function hz(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!oIe(e[r],t[r]))return!1;return!0}function oIe(e,t){if(e.type!==t.type||e.url!==t.url||e.minScale!==t.minScale||e.maxScale!==t.maxScale||e.visible!==t.visible||e.opacity!==t.opacity)return!1;if(de(e.activeLayerId)||de(t.activeLayerId))return e.activeLayerId===t.activeLayerId;if(de(e.sublayers)||de(t.sublayers)){if(Ne(e.sublayers)||Ne(t.sublayers)||e.sublayers.length!==t.sublayers.length)return!1;for(let r=0;r<e.sublayers.length;r++){const i=e.sublayers.at(r),n=t.sublayers.at(r);if(i.id!==n.id||i.visible!==n.visible)return!1}}return!0}function Zte(e){return e?Va(e).replace(/^\s*https?:/i,"").toLowerCase():""}function aIe(e){return new Gf({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return r&&"tables"in r&&r.tables.includes(t)}})}const lIe=ot.getLogger("esri.support.groundUtils"),pz={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function uIe(e){let t=null;if(typeof e=="string")if(e in pz){const r=pz[e];t=new MI({resourceInfo:{data:{layers:[r]}}})}else lIe.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Bi(MI,e);return t}function B8(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.getItemAt(s),i[t]===r)return i;if(i?.type==="group"&&(n=B8(i.layers,t,r),n))return n}}const dz=ot.getLogger("esri.support.LayersMixin"),cIe=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new Lt;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||dz.error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>i(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const r=this.layers.removeAll();for(const i of r)this.layerRemoved(i),i.destroy();this.layers.destroy()}set layers(r){this._set("layers",_g(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof uh){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else jp(r)?r.then(s=>{this.destroyed||this.add(s,i)}):dz.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;i=n.getNextIndex(i),r.slice().forEach(s=>{s.parent!==this?(n.add(s,i),i+=1):this.reorder(s,i)})}findLayerById(r){return B8(this.layers,"id",r)}findLayerByUid(r){return B8(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return h([f()],t.prototype,"layers",null),t=h([me("esri.support.LayersMixin")],t),t},Kte="esri.support.TablesMixin",hIe=ot.getLogger(Kte);function z8(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.getItemAt(i);if(s[t]===r)return s;if(s?.type==="group"){const o=z8(s.tables,t,r);if(o)return o}}}const pIe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new Lt,this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&hIe.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})}destroy(){const r=this.tables.removeAll();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",_g(r,this._get("tables")))}findTableById(r){return z8(this.tables,"id",r)}findTableByUid(r){return z8(this.tables,"uid",r)}};return h([f()],t.prototype,"tables",null),t=h([me(Kte)],t),t};let Cc=class extends pIe(cIe(im.EventedMixin(kt))){constructor(e){super(e),this.allLayers=new Gf({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=aIe(this),this.basemap=null,this.editableLayers=new Gf({getCollections:()=>[this.allLayers],itemFilterFunction:K5e}),this.ground=new MI,this._basemapCache=Y5e()}destroy(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),Q5e(this._basemapCache),this._basemapCache=null}castBasemap(e){return X5e(e,this._basemapCache)}castGround(e){const t=uIe(e);return Ne(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};h([f({readOnly:!0,dependsOn:[]})],Cc.prototype,"allLayers",void 0),h([f({readOnly:!0})],Cc.prototype,"allTables",void 0),h([f({type:jf})],Cc.prototype,"basemap",void 0),h([ur("basemap")],Cc.prototype,"castBasemap",null),h([f({readOnly:!0})],Cc.prototype,"editableLayers",void 0),h([f({type:MI,nonNullable:!0})],Cc.prototype,"ground",void 0),h([ur("ground")],Cc.prototype,"castGround",null),Cc=h([me("esri.Map")],Cc);const Yte=Cc;class K9{constructor(t,r){this.min=t,this.max=r,this.range=r-t}ndiff(t,r=0){return Math.ceil((t-r)/this.range)*this.range+r}_normalize(t,r,i,n=0,s=!1){return(i-=n)<t?i+=this.ndiff(t-i):i>r&&(i-=this.ndiff(i-r)),s&&i===r&&(i=t),i+n}normalize(t,r=0,i=!1){return this._normalize(this.min,this.max,t,r,i)}clamp(t,r=0){return sa(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+this.ndiff(t-r,i)}minimalMonotonic(t,r,i){return this._normalize(t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}}function Y9(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}Y9(new K9(0,2*Math.PI));Y9(new K9(-Math.PI,Math.PI));const dIe=Y9(new K9(0,360));let Wh=class extends ua(Je){constructor(...e){super(...e),this.position=new At([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),r!=null&&(n.tilt=r),i!=null&&(n.fov=i),n}return e}writePosition(e,t,r,i){const n=e.clone();n.x=Da(e.x||0),n.y=Da(e.y||0),n.z=e.hasZ?Da(e.z||0):e.z,t[r]=n.write({},i)}readPosition(e,t){const r=new At;return r.read(e,t),r.x=Da(r.x||0),r.y=Da(r.y||0),r.z=r.hasZ?Da(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};h([f({type:At,json:{write:{isRequired:!0}}})],Wh.prototype,"position",void 0),h([et("position")],Wh.prototype,"writePosition",null),h([Ke("position")],Wh.prototype,"readPosition",null),h([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ur(e=>dIe.normalize(Da(e)))],Wh.prototype,"heading",void 0),h([f({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ur(e=>sa(Da(e),-180,180))],Wh.prototype,"tilt",void 0),h([f({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Wh.prototype,"fov",void 0),Wh=h([me("esri.Camera")],Wh);const fIe=Wh;var G8;let Dd=G8=class extends Je{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new G8({rotation:this.rotation,scale:this.scale,targetGeometry:de(this.targetGeometry)?this.targetGeometry.clone():null,camera:de(this.camera)?this.camera.clone():null})}};function bC(){return{enabled:!this.camera}}h([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:bC}}}}})],Dd.prototype,"rotation",void 0),h([ur("rotation")],Dd.prototype,"castRotation",null),h([f({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:bC}}}}})],Dd.prototype,"scale",void 0),h([f({types:Up,json:{read:Hu,write:!0,origins:{"web-scene":{read:Hu,write:{overridePolicy:bC}}}}})],Dd.prototype,"targetGeometry",void 0),h([f({type:fIe,json:{write:!0}})],Dd.prototype,"camera",void 0),Dd=G8=h([me("esri.Viewpoint")],Dd);const Xc=Dd;let wC,Ue=null;function Qte(){return!!Ue}function mIe(){return!!We("esri-wasm")}function Xte(){return wC||(wC=Be(()=>import("./pe-wasm.41ba155b.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>$r(`esri/geometry/support/${t}`)})).then(e=>{tre(e)}),wC)}var q8,Ii,H8;(function(e){function t(s,o,a){Ue.ensureCache.prepare();const l=Ay(a),u=a===l,c=Ue.ensureFloat64(l),p=Ue._pe_geog_to_proj(Ue.getPointer(s),o,c);return p&&nf(a,o,c,u),p}function r(s,o,a,l){switch(l){case Ii.PE_TRANSFORM_P_TO_G:return i(s,o,a);case Ii.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){Ue.ensureCache.prepare();const u=Ay(a),c=a===u,p=Ue.ensureFloat64(u),d=Ue._pe_proj_to_geog_center(Ue.getPointer(s),o,p,l);return d&&nf(a,o,p,c),d}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(q8||(q8={})),function(e){function t(){e.PE_BUFFER_MAX=Ue.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=Ue.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=Ue.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=Ue.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=Ue.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=Ue.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=Ue.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=Ue.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=Ue.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=Ue.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=Ue.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=Ue.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=Ue.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=Ue.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=Ue.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=Ue.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=Ue.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=Ue.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=Ue.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=Ue.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=Ue.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=Ue.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=Ue.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=Ue.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=Ue.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=Ue.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=Ue.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=Ue.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=Ue.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=Ue.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Ii||(Ii={})),function(e){const t={},r={},i=m=>{if(m){const g=m.getType();switch(g){case Ii.PE_TYPE_GEOGCS:m=Ue.castObject(m,Ue.PeGeogcs);break;case Ii.PE_TYPE_PROJCS:m=Ue.castObject(m,Ue.PeProjcs);break;case Ii.PE_TYPE_GEOGTRAN:m=Ue.castObject(m,Ue.PeGeogtran);break;default:g&Ii.PE_TYPE_UNIT&&(m=Ue.castObject(m,Ue.PeUnit))}}return m};function n(){Ue.PeFactory.prototype.initialize(null)}function s(m){return o(Ii.PE_TYPE_COORDSYS,m)}function o(m,g){let b=null,v=t[m];if(v||(v={},t[m]=v),v.hasOwnProperty(String(g)))b=v[g];else{const _=Ue.PeFactory.prototype.factoryByType(m,g);Ue.compare(_,Ue.NULL)||(b=_,v[g]=b)}return b=i(b),b}function a(m,g){let b=null,v=r[m];if(v||(v={},r[m]=v),v.hasOwnProperty(g))b=v[g];else{const _=Ue.PeFactory.prototype.fromString(m,g);Ue.compare(_,Ue.NULL)||(b=_,v[g]=b)}return b=i(b),b}function l(m){return o(Ii.PE_TYPE_GEOGCS,m)}function u(m){return o(Ii.PE_TYPE_GEOGTRAN,m)}function c(m){return Ue.PeFactory.prototype.getCode(m)}function p(m){return o(Ii.PE_TYPE_PROJCS,m)}function d(m){return o(Ii.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=c,e.projcs=p,e.unit=d}(H8||(H8={}));let ere=null;var II,W8,J8,Z8,TI,K8,AI,$I,Y8;function tre(e){function t(s,o,a){s[o]=a(s[o])}Ue=e,Ii.init(),II.init(),TI.init(),AI.init(),$I.init(),ere=class extends Ue.PeGCSExtent{destroy(){Ue.destroy(this)}};const r=[Ue.PeDatum,Ue.PeGeogcs,Ue.PeGeogtran,Ue.PeObject,Ue.PeParameter,Ue.PePrimem,Ue.PeProjcs,Ue.PeSpheroid,Ue.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(Ii.PE_NAME_MAX))});for(const s of[Ue.PeGeogtran,Ue.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(Ii.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const c=Ue.getValue(l,"*");a[u]=c?Ue.wrapPointer(c,Ue.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(Ue.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return nf(a,o,s.call(this)),a}),t(Ue.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=Ue._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=this.getSteps();if(u>1){const c=Ue.getPointer(l);for(let p=1;p<u;p++)a.push(Ue.wrapPointer(c+o*p,Ue.PeGTlistExtendedGTs))}}return a}});const i=Ue._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!Ue.compare(l,Ue.NULL)){a=[l];const u=l.getNump();if(u>1){const c=Ue.getPointer(l);for(let p=1;p<u;p++)a.push(Ue.wrapPointer(c+i*p,Ue.PeHorizon))}}return o.set(s,a),a};t(Ue.PeProjcs.prototype,"horizonGcsGenerate",n),t(Ue.PeProjcs.prototype,"horizonPcsGenerate",n),Ue.PeObject.prototype.toString=function(s=Ii.PE_STR_OPTS_NONE){Ue.ensureCache.prepare();const o=Ue.getPointer(this),a=Ue.ensureInt8(new Array(Ii.PE_BUFFER_MAX));return Ue.UTF8ToString(Ue._pe_object_to_string_ext(o,s,a))}}function xh(e){if(!e)return;const t=Ue.getClass(e);if(!t)return;const r=Ue.getCache(t);if(!r)return;const i=Ue.getPointer(e);i&&delete r[i]}function X3(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(Ue.ensureInt8(i));return r}function Ay(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function nf(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=Ue.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=Ue.getValue(r,"double"),e[s][1]=Ue.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=Ue.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=Ue._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,l,u){let c=null;const p=new Ue.PeInteger(u);try{const d=Ue.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,p);if((u=p.val)&&(c=[d],u>1)){const m=Ue.getPointer(d);for(let g=1;g<u;g++)c.push(Ue.wrapPointer(m+t*g,Ue.PeGTlistExtendedEntry))}}finally{Ue.destroy(p)}return c}e.init=r,e.getGTlist=i})(II||(II={})),function(e){function t(r){if(r&&r.length){for(const i of r)xh(i),i.getEntries().forEach(n=>{xh(n);const s=n.getGeogtran();xh(s),s.getParameters().forEach(xh),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{xh(o);const a=o.getDatum();xh(a),xh(a.getSpheroid()),xh(o.getPrimem()),xh(o.getUnit())})});Ue.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(W8||(W8={})),function(e){function t(r,i,n,s,o){Ue.ensureCache.prepare();const a=Ay(n),l=n===a,u=Ue.ensureFloat64(a);let c=0;s&&(c=Ue.ensureFloat64(s));const p=Ue._pe_geog_to_geog(Ue.getPointer(r),i,u,c,o);return p&&nf(n,i,u,l),p}e.geogToGeog=t}(J8||(J8={})),function(e){const t=(u,c,p,d,m,g)=>{let b,v;switch(Ue.ensureCache.prepare(),u){case"dd":b=Ue._pe_geog_to_dd,v=Ii.PE_DD_MAX;break;case"ddm":b=Ue._pe_geog_to_ddm,v=Ii.PE_DDM_MAX;break;case"dms":b=Ue._pe_geog_to_dms,v=Ii.PE_DMS_MAX}let _=0;c&&(_=Ue.getPointer(c));const E=Ay(d),I=Ue.ensureFloat64(E),x=X3(p,v),T=b(_,p,I,m,Ue.ensureInt32(x));if(T)for(let M=0;M<p;M++)g[M]=Ue.UTF8ToString(x[M]);return T},r=(u,c,p,d,m)=>{let g;switch(Ue.ensureCache.prepare(),u){case"dd":g=Ue._pe_dd_to_geog;break;case"ddm":g=Ue._pe_ddm_to_geog;break;case"dms":g=Ue._pe_dms_to_geog}let b=0;c&&(b=Ue.getPointer(c));const v=d.map(x=>Ue.ensureString(x)),_=Ue.ensureInt32(v),E=Ue.ensureFloat64(new Array(2*p)),I=g(b,p,_,E);return I&&nf(m,p,E),I};function i(u,c,p,d,m){return t("dms",u,c,p,d,m)}function n(u,c,p,d){return r("dms",u,c,p,d)}function s(u,c,p,d,m){return t("ddm",u,c,p,d,m)}function o(u,c,p,d){return r("ddm",u,c,p,d)}function a(u,c,p,d,m){return t("dd",u,c,p,d,m)}function l(u,c,p,d){return r("dd",u,c,p,d)}e.geogToDms=i,e.dmsToGeog=n,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(Z8||(Z8={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=Ue.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=Ue.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=Ue.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,l,u,c){Ue.ensureCache.prepare();let p=0;n&&(p=Ue.getPointer(n));const d=Ay(o),m=Ue.ensureFloat64(d),g=X3(s,Ii.PE_MGRS_MAX),b=Ue.ensureInt32(g),v=Ue._pe_geog_to_mgrs_extended(p,s,m,a,l,u,b);if(v)for(let _=0;_<s;_++)c[_]=Ue.UTF8ToString(g[_]);return v}function i(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=o.map(g=>Ue.ensureString(g)),p=Ue.ensureInt32(c),d=Ue.ensureFloat64(new Array(2*s)),m=Ue._pe_mgrs_to_geog_extended(u,s,p,a,d);return m&&nf(l,s,d),m}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(TI||(TI={})),function(e){function t(i,n,s,o,a,l,u){Ue.ensureCache.prepare();let c=0;i&&(c=Ue.getPointer(i));const p=Ay(s),d=Ue.ensureFloat64(p),m=X3(n,Ii.PE_MGRS_MAX),g=Ue.ensureInt32(m),b=Ue._pe_geog_to_usng(c,n,d,o,a,l,g);if(b)for(let v=0;v<n;v++)u[v]=Ue.UTF8ToString(m[v]);return b}function r(i,n,s,o){Ue.ensureCache.prepare();let a=0;i&&(a=Ue.getPointer(i));const l=s.map(d=>Ue.ensureString(d)),u=Ue.ensureInt32(l),c=Ue.ensureFloat64(new Array(2*n)),p=Ue._pe_usng_to_geog(a,n,u,c);return p&&nf(o,n,c),p}e.geogToUsng=t,e.usngToGeog=r}(K8||(K8={})),function(e){function t(){e.PE_UTM_OPTS_NONE=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=Ue.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=Ay(o),p=Ue.ensureFloat64(c),d=X3(s,Ii.PE_UTM_MAX),m=Ue.ensureInt32(d),g=Ue._pe_geog_to_utm(u,s,p,a,m);if(g)for(let b=0;b<s;b++)l[b]=Ue.UTF8ToString(d[b]);return g}function i(n,s,o,a,l){Ue.ensureCache.prepare();let u=0;n&&(u=Ue.getPointer(n));const c=o.map(g=>Ue.ensureString(g)),p=Ue.ensureInt32(c),d=Ue.ensureFloat64(new Array(2*s)),m=Ue._pe_utm_to_geog(u,s,p,a,d);return m&&nf(l,s,d),m}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(AI||(AI={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=Ue.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=Ue.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=Ue.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o,a;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=Ue.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}($I||($I={})),function(e){function t(){return Ue.PeVersion.prototype.version_string()}e.versionString=t}(Y8||(Y8={}));const yIe=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return Ue},isLoaded:Qte,isSupported:mIe,load:Xte,get PeCSTransformations(){return q8},get PeDefs(){return Ii},get PeFactory(){return H8},get PeGCSExtent(){return ere},get PeGTlistExtended(){return II},get PeGTlistExtendedEntry(){return W8},get PeGTTransformations(){return J8},get PeNotationDms(){return Z8},get PeNotationMgrs(){return TI},get PeNotationUsng(){return K8},get PeNotationUtm(){return AI},get PePCSInfo(){return $I},get PeVersion(){return Y8},_init:tre},Symbol.toStringTag,{value:"Module"})),_m=Math.PI/180,gIe=/SPHEROID\[([^\]]+)]/i,nd=fi.radius,Kl=fi.eccentricitySquared,vIe={a1:nd*Kl,a2:nd*Kl*nd*Kl,a3:nd*Kl*Kl/2,a4:nd*Kl*nd*Kl*2.5,a5:nd*Kl+nd*Kl*Kl/2,a6:1-Kl},bIe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:fi.radius,f:fi.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Ff.radius,f:Ff.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:wp.radius,f:wp.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:wp.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let eE=0;class rv{constructor(t=null){this.uid=eE++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const r=new rv;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=eE++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=eE++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=eE++}getInverse(){const t=new rv;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class pf{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const r of t.steps)r instanceof rv?this.steps.push(r):this.steps.push(new rv({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}static cacheKey(t,r){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",r.wkid!==void 0&&r.wkid!==null?r.wkid.toString():"-1",r.wkt!==void 0&&r.wkt!==null?r.wkt.toString():""].join(",")}static fromGE(t){const r=new pf;let i="";for(const n of t.steps){const s=rv.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cached_projection={},r._gtlistentry=null,r._chain=i,r}getInverse(){const t=new pf;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cached_projection[pf.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);const n=this._cached_projection[pf.cacheKey(t,r)];return n===void 0?null:n}}let Ef=null,CI=null,_C=null,xC={};const rre=new pK;function qf(){return!!Ef&&Qte()}function Hf(e){return Ne(_C)&&(_C=Promise.all([Xte(),Be(()=>import("./geometryEngineBase.f43341a0.js"),[]).then(t=>t.g),Be(()=>import("./hydrated.6d1c4621.js"),["assets/hydrated.6d1c4621.js","assets/preload-helper.387dac8f.js"])])),_C.then(([,t,{hydratedAdapter:r}])=>{ui(e),CI=r,Ef=t.default,Ef._enableProjection(yIe),rre.notify()})}function Tb(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:fz(CI,e,e[0].spatialReference,t,r,i):fz(CI,[e],e.spatialReference,t,r,i)[0]}function fz(e,t,r,i,n=null,s=null){if(Ne(r)||Ne(i))return t;if(Op(r,i,n))return t.map(o=>xIe(o,r,i));if(Ne(n)){const o=pf.cacheKey(r,i);xC[o]!==void 0?n=xC[o]:(n=wIe(r,i,null),Ne(n)&&(n=new pf),xC[o]=n)}if(Ne(Ef))throw new Q9;return de(s)?Ef._project(e,t,r,i,n,s):Ef._project(e,t,r,i,n)}function elt(e,t){return Ne(e)?{pending:null,geometry:null}:Xn(e.spatialReference,t)?{pending:null,geometry:e}:Gs(e.spatialReference)&&Gs(t)?Op(e.spatialReference,t)||qf()?{pending:null,geometry:_Ie(e,t)}:(ir(rre),{pending:Hf(),geometry:null}):{pending:null,geometry:null}}function wIe(e,t,r=null){if(Ne(Ef))throw new Q9;if(Ne(e)||Ne(t))return null;const i=Ef._getTransformation(CI,e,t,r,r?.spatialReference);return i!==null?pf.fromGE(i):null}class Q9 extends $e{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var Re;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(Re||(Re={}));function _Ie(e,t){try{const r=Tb(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=DX(r.type,e.spatialReference,t);return de(i)&&i(r),r}catch(r){if(!(r instanceof Q9))throw r;return null}}function Op(e,t,r){return!r&&(!!Xn(e,t)||Gs(e)&&Gs(t)&&!!ore(e,t,lre))}async function tlt(e,t,r,i){if(qf())return Dj(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(!Op(n,s,o))return Hf(i)}else if(!Op(e,t,r))return Hf(i);return Dj(i)}function xIe(e,t,r){return e?"x"in e?SIe(e,t,new At,r,0):"xmin"in e?IIe(e,t,new qt,r,0):"rings"in e?ire(e,t,new wo,r,0):"paths"in e?MIe(e,t,new Ds,r,0):"points"in e?EIe(e,t,new nm,r,0):null:null}function SIe(e,t,r,i,n){_n[0]=e.x,_n[1]=e.y;const s=e.z;return _n[2]=s!==void 0?s:n,gS(_n,t,0,_n,i,0,1)?(r.x=_n[0],r.y=_n[1],r.spatialReference=i,s===void 0?(r.z=void 0,r.hasZ=!1):(r.z=_n[2],r.hasZ=!0),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function EIe(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,l=[],u=s.length,c=[];for(const p of s)c.push(p[0],p[1],o?p[2]:n);if(!gS(c,t,0,c,i,0,u))return null;for(let p=0;p<u;++p){const d=3*p,m=c[d],g=c[d+1];o&&a?l.push([m,g,c[d+2],s[p][3]]):o?l.push([m,g,c[d+2]]):a?l.push([m,g,s[p][2]]):l.push([m,g])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function MIe(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];return nre(s,o,a,t,l,i,n)?(r.paths=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function rlt(e,t,r=t.spatialReference,i=0){return de(r)&&de(ire(e,e.spatialReference,t,r,i))}function ire(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];return nre(s,o,a,t,l,i,n)?(r.rings=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function IIe(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=e;return mz(s,o,u?e.zmin:n,t,_n,i)?(r.xmin=_n[0],r.ymin=_n[1],u&&(r.zmin=_n[2]),mz(a,l,u?e.zmax:n,t,_n,i)?(r.xmax=_n[0],r.ymax=_n[1],u&&(r.zmax=_n[2]),c&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null):null}function ilt(e,t,r,i=0){_n[0]=e.x,_n[1]=e.y;const n=e.z;return _n[2]=n!==void 0?n:i,gS(_n,e.spatialReference,0,t,r,0,1)}function mz(e,t,r,i,n,s){return tE[0]=e,tE[1]=t,tE[2]=r,gS(tE,i,0,n,s,0,1)}function gS(e,t,r,i,n,s,o=1){const a=ore(t,n,lre);if(Ne(a))return!1;if(a===ni){if(e===i&&r===s)return!0;const u=r+3*o;for(let c=r,p=s;c<u;c++,p++)i[p]=e[c];return!0}const l=r+3*o;for(let u=r,c=s;u<l;u+=3,c+=3)a(e,u,i,c);return!0}function nre(e,t,r,i,n,s,o=0){const a=new Array;for(const u of e)for(const c of u)a.push(c[0],c[1],t?c[2]:o);if(!gS(a,i,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;for(const u of e){const c=new Array;for(const p of u)t&&r?c.push([a[l++],a[l++],a[l++],p[3]]):t?c.push([a[l++],a[l++],a[l++]]):r?(c.push([a[l++],a[l++],p[2]]),l++):(c.push([a[l++],a[l++]]),l++);n.push(c)}return!0}function nlt(e,t,r,i){if(Ne(e)||Ne(i))return!1;const n=ox(e,are),s=ox(i,zIe);if(n===s&&!yz(s)&&(n!==Re.UNKNOWN||Xn(e,i)))return BX(r,t),!0;if(yz(s)){const o=L1[n][Re.LON_LAT],a=L1[Re.LON_LAT][s];return!Ne(o)&&!Ne(a)&&(o(t,0,sd,0),a(sd,0,od,0),sre(Jc*sd[0],Jc*sd[1],r),r[12]=od[0],r[13]=od[1],r[14]=od[2],!0)}if((s===Re.WEB_MERCATOR||s===Re.PLATE_CARREE)&&(n===Re.WGS84||n===Re.CGCS2000&&s===Re.PLATE_CARREE||n===Re.SPHERICAL_ECEF||n===Re.WEB_MERCATOR)){const o=L1[n][Re.LON_LAT],a=L1[Re.LON_LAT][s];return!Ne(o)&&!Ne(a)&&(o(t,0,sd,0),a(sd,0,od,0),n===Re.SPHERICAL_ECEF?TIe(Jc*sd[0],Jc*sd[1],r):h9(r),r[12]=od[0],r[13]=od[1],r[14]=od[2],!0)}return!1}function yz(e){return e===Re.SPHERICAL_ECEF||e===Re.SPHERICAL_MARS_PCPF||e===Re.SPHERICAL_MOON_PCPF}function sre(e,t,r){const i=Math.sin(e),n=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=r;return a[0]=-i,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*i,a[9]=o*i,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function TIe(e,t,r){return sre(e,t,r),zp(r,r),r}function ox(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=am(e,1)),e.wkt===UQ.wkt?t.spatialReferenceId=Re.SPHERICAL_ECEF:B2(e)?t.spatialReferenceId=Re.WGS84:Sg(e)?t.spatialReferenceId=Re.WEB_MERCATOR:Pme(e)?t.spatialReferenceId=Re.PLATE_CARREE:e.wkt===zve.wkt?t.spatialReferenceId=Re.WGS84_ECEF:e.wkid===kl.CGCS2000?t.spatialReferenceId=Re.CGCS2000:e.wkt===pI.wkt?t.spatialReferenceId=Re.SPHERICAL_MARS_PCPF:e.wkt===dI.wkt?t.spatialReferenceId=Re.SPHERICAL_MOON_PCPF:lb(e)?t.spatialReferenceId=Re.GCSMARS2000:ub(e)?t.spatialReferenceId=Re.GCSMOON2000:t.spatialReferenceId=Re.UNKNOWN)}function ni(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function iv(e,t,r,i){r[i++]=Iv*(e[t++]/fi.radius),r[i++]=Iv*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/fi.radius))),r[i]=e[t]}function AIe(e,t,r,i){iv(e,t,r,i),zy(r,i,r,i)}function $Ie(e,t,r,i){iv(e,t,r,i),qy(r,i,r,i)}function CIe(e,t,r,i,n){const s=.4999999*Math.PI,o=sa(Jc*e[t+1],-s,s),a=Math.sin(o);r[i++]=Jc*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function ax(e,t,r,i){CIe(e,t,r,i,fi)}const gz=fi.radius*Math.PI/180,vz=180/(fi.radius*Math.PI);function Vy(e,t,r,i){r[i]=e[t]*gz,r[i+1]=e[t+1]*gz,r[i+2]=e[t+2]}function By(e,t,r,i){r[i]=e[t]*vz,r[i+1]=e[t+1]*vz,r[i+2]=e[t+2]}function kIe(e,t,r,i){iv(e,t,r,i),Vy(r,i,r,i)}function OIe(e,t,r,i){Hy(e,t,r,i),Vy(r,i,r,i)}function RIe(e,t,r,i){Gy(e,t,r,i),Vy(r,i,r,i)}function PIe(e,t,r,i){By(e,t,r,i),zy(r,i,r,i)}function LIe(e,t,r,i){By(e,t,r,i),ax(r,i,r,i)}function NIe(e,t,r,i){By(e,t,r,i),qy(r,i,r,i)}function X9(e){if(Ne(e))return!1;const t=ox(e,are);return!!L1[t][Re.WGS84_COMPARABLE_LON_LAT]}function eD(e,t,r,i,n){const s=n+e[t+2],o=Jc*e[t+1],a=Jc*e[t],l=Math.cos(o);r[i++]=Math.cos(a)*l*s,r[i++]=Math.sin(a)*l*s,r[i]=Math.sin(o)*s}function bz(e,t,r,i){eD(e,t,r,i,Ff.radius)}function wz(e,t,r,i){eD(e,t,r,i,wp.radius)}function zy(e,t,r,i){eD(e,t,r,i,fi.radius)}function tD(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),u=vY(a/(l===0?1:l)),c=Math.atan2(o,s);r[i++]=Iv*c,r[i++]=Iv*u,r[i]=l-n}function _z(e,t,r,i){tD(e,t,r,i,Ff.radius)}function xz(e,t,r,i){tD(e,t,r,i,wp.radius)}function Gy(e,t,r,i){tD(e,t,r,i,fi.radius)}function DIe(e,t,r,i){Gy(e,t,r,i),ax(r,i,r,i)}function FIe(e,t,r,i){Gy(e,t,r,i),qy(r,i,r,i)}function jIe(e,t,r,i,n){const s=Jc*e[t],o=Jc*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);r[i++]=(c+a)*u*Math.cos(s),r[i++]=(c+a)*u*Math.sin(s),r[i++]=(c*(1-n.eccentricitySquared)+a)*l}function qy(e,t,r,i){jIe(e,t,r,i,fi)}function Hy(e,t,r,i){const n=vIe,s=e[t],o=e[t+1],a=e[t+2];let l,u,c,p,d,m,g,b,v,_,E,I,x,T,M,k,D,B,G,W,K;l=Math.abs(a),u=s*s+o*o,c=Math.sqrt(u),p=u+a*a,d=Math.sqrt(p),W=Math.atan2(o,s),m=a*a/p,g=u/p,T=n.a2/d,M=n.a3-n.a4/d,g>.3?(b=l/d*(1+g*(n.a1+T+m*M)/d),G=Math.asin(b),_=b*b,v=Math.sqrt(1-_)):(v=c/d*(1-m*(n.a5-T-g*M)/d),G=Math.acos(v),_=1-v*v,b=Math.sqrt(_)),E=1-fi.eccentricitySquared*_,I=fi.radius/Math.sqrt(E),x=n.a6*I,T=c-I*v,M=l-x*b,D=v*T+b*M,k=v*M-b*T,B=k/(x/E+D),G+=B,K=D+k*B/2,a<0&&(G=-G),r[i++]=Iv*W,r[i++]=Iv*G,r[i]=K}function UIe(e,t,r,i){Hy(e,t,r,i),zy(r,i,r,i)}function VIe(e,t,r,i){Hy(e,t,r,i),ax(r,i,r,i)}const L1={[Re.WGS84]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:ni,[Re.SPHERICAL_ECEF]:zy,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:ax,[Re.PLATE_CARREE]:Vy,[Re.WGS84]:ni,[Re.WGS84_ECEF]:qy},[Re.CGCS2000]:{[Re.CGCS2000]:ni,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:ni,[Re.SPHERICAL_ECEF]:zy,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:Vy,[Re.WGS84]:null,[Re.WGS84_ECEF]:qy},[Re.GCSMARS2000]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:ni,[Re.GCSMOON2000]:null,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:null,[Re.SPHERICAL_ECEF]:null,[Re.SPHERICAL_MARS_PCPF]:wz,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:null,[Re.WGS84]:null,[Re.WGS84_ECEF]:null},[Re.GCSMOON2000]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:ni,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:null,[Re.SPHERICAL_ECEF]:null,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:bz,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:null,[Re.WGS84]:null,[Re.WGS84_ECEF]:null},[Re.WEB_MERCATOR]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:iv,[Re.WGS84_COMPARABLE_LON_LAT]:iv,[Re.SPHERICAL_ECEF]:AIe,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:ni,[Re.PLATE_CARREE]:kIe,[Re.WGS84]:iv,[Re.WGS84_ECEF]:$Ie},[Re.WGS84_ECEF]:{[Re.CGCS2000]:Hy,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:Hy,[Re.WGS84_COMPARABLE_LON_LAT]:Hy,[Re.SPHERICAL_ECEF]:UIe,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:VIe,[Re.PLATE_CARREE]:OIe,[Re.WGS84]:Hy,[Re.WGS84_ECEF]:ni},[Re.SPHERICAL_ECEF]:{[Re.CGCS2000]:Gy,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:Gy,[Re.WGS84_COMPARABLE_LON_LAT]:Gy,[Re.SPHERICAL_ECEF]:ni,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:DIe,[Re.PLATE_CARREE]:RIe,[Re.WGS84]:Gy,[Re.WGS84_ECEF]:FIe},[Re.SPHERICAL_MARS_PCPF]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:xz,[Re.GCSMOON2000]:null,[Re.LON_LAT]:xz,[Re.WGS84_COMPARABLE_LON_LAT]:null,[Re.SPHERICAL_ECEF]:null,[Re.SPHERICAL_MARS_PCPF]:ni,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:null,[Re.WGS84]:null,[Re.WGS84_ECEF]:null},[Re.SPHERICAL_MOON_PCPF]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:_z,[Re.LON_LAT]:_z,[Re.WGS84_COMPARABLE_LON_LAT]:null,[Re.SPHERICAL_ECEF]:null,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:ni,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:null,[Re.WGS84]:null,[Re.WGS84_ECEF]:null},[Re.UNKNOWN]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:null,[Re.WGS84_COMPARABLE_LON_LAT]:null,[Re.SPHERICAL_ECEF]:null,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:ni,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:null,[Re.WGS84]:null,[Re.WGS84_ECEF]:null},[Re.LON_LAT]:{[Re.CGCS2000]:ni,[Re.GCSMARS2000]:ni,[Re.GCSMOON2000]:ni,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:ni,[Re.SPHERICAL_ECEF]:zy,[Re.SPHERICAL_MARS_PCPF]:wz,[Re.SPHERICAL_MOON_PCPF]:bz,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:ax,[Re.PLATE_CARREE]:Vy,[Re.WGS84]:ni,[Re.WGS84_ECEF]:qy},[Re.WGS84_COMPARABLE_LON_LAT]:{[Re.CGCS2000]:null,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:ni,[Re.WGS84_COMPARABLE_LON_LAT]:ni,[Re.SPHERICAL_ECEF]:zy,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:null,[Re.PLATE_CARREE]:Vy,[Re.WGS84]:ni,[Re.WGS84_ECEF]:qy},[Re.PLATE_CARREE]:{[Re.CGCS2000]:By,[Re.GCSMARS2000]:null,[Re.GCSMOON2000]:null,[Re.LON_LAT]:By,[Re.WGS84_COMPARABLE_LON_LAT]:By,[Re.SPHERICAL_ECEF]:PIe,[Re.SPHERICAL_MARS_PCPF]:null,[Re.SPHERICAL_MOON_PCPF]:null,[Re.UNKNOWN]:null,[Re.WEB_MERCATOR]:LIe,[Re.PLATE_CARREE]:ni,[Re.WGS84]:By,[Re.WGS84_ECEF]:NIe}};function ore(e,t,r=rD()){return Ne(e)||Ne(t)?null:BIe(e,t,r).projector}function BIe(e,t,r){if(Ne(e)||Ne(t)||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=ox(e,r.source),n=ox(t,r.dest);return i===Re.UNKNOWN&&n===Re.UNKNOWN?Xn(e,t)?r.projector=ni:r.projector=null:r.projector=L1[i][n],r}function rD(){return{source:{spatialReference:null,spatialReferenceId:Re.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:Re.UNKNOWN,metersPerUnit:1},projector:ni}}const are={spatialReference:null,spatialReferenceId:Re.UNKNOWN},zIe={spatialReference:null,spatialReferenceId:Re.UNKNOWN},lre=rD();rD();const Jc=C1(1),Iv=gY(1),tE=aa(),sd=aa(),od=aa(),_n=aa(),a5={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},SC={xsmall:544,small:768,medium:992,large:1200};function GIe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function EC(e,t){return t?a5[e].valueToClassName[t].split(" "):[]}const qIe=e=>{let t=class extends e{constructor(...r){super(...r),this._breakpointsHandles=new es,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=SC}initialize(){this._breakpointsHandles.add(it(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),Br))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=La(this._breakpointsHandles))}set breakpoints(r){if(r===this._get("breakpoints"))return;const i=GIe(r);if(!i){const n=JSON.stringify(SC,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}r=i?r:SC,this._set("breakpoints",{...r})}_updateClassNames(){if(!this.container)return;const r=fo.acquire(),i=fo.acquire();let n,s=!1;for(n in a5){const o=this[n],a=a5[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,EC(n,o).forEach(l=>i.push(l)),EC(n,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,i),fo.release(r),fo.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in a5)EC(i,this[i]).forEach(n=>r.classList.remove(n))}};return h([f()],t.prototype,"breakpoints",null),h([f()],t.prototype,"orientation",void 0),h([f()],t.prototype,"widthBreakpoint",void 0),h([f()],t.prototype,"heightBreakpoint",void 0),t=h([me("esri.views.BreakpointsOwner")],t),t};function iD(e){return typeof e=="string"?document.getElementById(e):e}function ure(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function Sz(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function Ez(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var HIe="[object Object]";function WIe(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function JIe(e,t){return function(r){return e(t(r))}}var ZIe=Function.prototype,cre=Object.prototype,hre=ZIe.toString,KIe=cre.hasOwnProperty,YIe=hre.call(Object),QIe=cre.toString,XIe=JIe(Object.getPrototypeOf,Object);function eTe(e){return!!e&&typeof e=="object"}function tTe(e){if(!eTe(e)||QIe.call(e)!=HIe||WIe(e))return!1;var t=XIe(e);if(t===null)return!0;var r=KIe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&hre.call(r)==YIe}var rTe=tTe,$y={exports:{}},Gi={},lx={exports:{}},t0={};function pre(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function iTe(e,t,r){}function nTe(e,t,r){}var sTe=/javascript\s*\:/img;function oTe(e,t){return sTe.test(t)?"":t}t0.whiteList=pre();t0.getDefaultWhiteList=pre;t0.onAttr=iTe;t0.onIgnoreAttr=nTe;t0.safeAttrValue=oTe;var aTe={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},fw=aTe;function lTe(e,t){e=fw.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var c=fw.trim(e.slice(n,s)),p=c.indexOf(":");if(p!==-1){var d=fw.trim(c.slice(0,p)),m=fw.trim(c.slice(p+1));if(d){var g=t(n,o.length,d,m,c);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var u=e.indexOf("*/",s+2);if(u===-1)break;s=u+1,n=s+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return fw.trim(o)}var uTe=lTe,rE=t0,cTe=uTe;function Mz(e){return e==null}function hTe(e){var t={};for(var r in e)t[r]=e[r];return t}function dre(e){e=hTe(e||{}),e.whiteList=e.whiteList||rE.whiteList,e.onAttr=e.onAttr||rE.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||rE.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||rE.safeAttrValue,this.options=e}dre.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=cTe(e,function(l,u,c,p,d){var m=i[c],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(p):m instanceof RegExp&&(g=m.test(p)),g!==!0&&(g=!1),p=o(c,p),!!p){var b={position:u,sourcePosition:l,source:d,isWhite:g};if(g){var v=n(c,p,b);return Mz(v)?c+":"+p:v}else{var v=s(c,p,b);if(!Mz(v))return v}}});return a};var pTe=dre;(function(e,t){var r=t0,i=pTe;function n(o,a){var l=new i(a);return l.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(lx,lx.exports);var nD={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},dTe=lx.exports.FilterCSS,fTe=lx.exports.getDefaultWhiteList,kI=nD;function fre(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var mre=new dTe;function mTe(e,t,r){}function yTe(e,t,r){}function gTe(e,t,r){}function vTe(e,t,r){}function yre(e){return e.replace(wTe,"&lt;").replace(_Te,"&gt;")}function bTe(e,t,r,i){if(r=xre(r),t==="href"||t==="src"){if(r=kI.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(iE.lastIndex=0,iE.test(r))return""}else if(t==="style"){if(Iz.lastIndex=0,Iz.test(r)||(Tz.lastIndex=0,Tz.test(r)&&(iE.lastIndex=0,iE.test(r))))return"";i!==!1&&(i=i||mre,r=i.process(r))}return r=Sre(r),r}var wTe=/</g,_Te=/>/g,xTe=/"/g,STe=/&quot;/g,ETe=/&#([a-zA-Z0-9]*);?/gim,MTe=/&colon;?/gim,ITe=/&newline;?/gim,iE=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Iz=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Tz=/u\s*r\s*l\s*\(.*/gi;function gre(e){return e.replace(xTe,"&quot;")}function vre(e){return e.replace(STe,'"')}function bre(e){return e.replace(ETe,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function wre(e){return e.replace(MTe,":").replace(ITe," ")}function _re(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return kI.trim(t)}function xre(e){return e=vre(e),e=bre(e),e=wre(e),e=_re(e),e}function Sre(e){return e=gre(e),e=yre(e),e}function TTe(){return""}function ATe(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:kI.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return n.push([s!==!1?s:l.position,c]),s=!1,u}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return kI.forEach(n,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function $Te(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function CTe(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Gi.whiteList=fre();Gi.getDefaultWhiteList=fre;Gi.onTag=mTe;Gi.onIgnoreTag=yTe;Gi.onTagAttr=gTe;Gi.onIgnoreTagAttr=vTe;Gi.safeAttrValue=bTe;Gi.escapeHtml=yre;Gi.escapeQuote=gre;Gi.unescapeQuote=vre;Gi.escapeHtmlEntities=bre;Gi.escapeDangerHtml5Entities=wre;Gi.clearNonPrintableCharacter=_re;Gi.friendlyAttrValue=xre;Gi.escapeAttrValue=Sre;Gi.onIgnoreTagStripAll=TTe;Gi.StripTagBody=ATe;Gi.stripCommentTag=$Te;Gi.stripBlankChar=CTe;Gi.cssFilter=mre;Gi.getDefaultCSSWhiteList=fTe;var j4={},Xd=nD;function kTe(e){var t=Xd.spaceIndex(e);if(t===-1)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=Xd.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function OTe(e){return e.slice(0,2)==="</"}function RTe(e,t,r){var i="",n=0,s=!1,o=!1,a=0,l=e.length,u="",c="";e:for(a=0;a<l;a++){var p=e.charAt(a);if(s===!1){if(p==="<"){s=a;continue}}else if(o===!1){if(p==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(p===">"){i+=r(e.slice(n,s)),c=e.slice(s,a+1),u=kTe(c),i+=t(s,i.length,u,c,OTe(c)),n=a+1,s=!1;continue}if(p==='"'||p==="'")for(var d=1,m=e.charAt(a-d);m.trim()===""||m==="=";){if(m==="="){o=p;continue e}m=e.charAt(a-++d)}}else if(p===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var PTe=/[^a-zA-Z0-9_:\.\-]/gim;function LTe(e,t){var r=0,i=[],n=!1,s=e.length;function o(p,d){if(p=Xd.trim(p),p=p.replace(PTe,"").toLowerCase(),!(p.length<1)){var m=t(p,d||"");m&&i.push(m)}}for(var a=0;a<s;a++){var l=e.charAt(a),u,c;if(n===!1&&l==="="){n=e.slice(r,a),r=a+1;continue}if(n!==!1&&a===r&&(l==='"'||l==="'")&&e.charAt(a-1)==="="){if(c=e.indexOf(l,a+1),c===-1)break;u=Xd.trim(e.slice(r+1,c)),o(n,u),n=!1,a=c,r=a+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(c=NTe(e,a),c===-1){u=Xd.trim(e.slice(r,a)),o(u),n=!1,r=a+1;continue}else{a=c-1;continue}else if(c=DTe(e,a-1),c===-1){u=Xd.trim(e.slice(r,a)),u=Az(u),o(n,u),n=!1,r=a+1;continue}else continue}return r<e.length&&(n===!1?o(e.slice(r)):o(n,Az(Xd.trim(e.slice(r))))),Xd.trim(i.join(" "))}function NTe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function DTe(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function FTe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Az(e){return FTe(e)?e.substr(1,e.length-2):e}j4.parseTag=RTe;j4.parseAttr=LTe;var jTe=lx.exports.FilterCSS,_u=Gi,Ere=j4,UTe=Ere.parseTag,VTe=Ere.parseAttr,l5=nD;function nE(e){return e==null}function BTe(e){var t=l5.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=l5.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=l5.trim(e.slice(0,-1))),{html:e,closing:r}}function zTe(e){var t={};for(var r in e)t[r]=e[r];return t}function Mre(e){e=zTe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=_u.onIgnoreTagStripAll),e.whiteList=e.whiteList||e.allowList||_u.whiteList,e.onTag=e.onTag||_u.onTag,e.onTagAttr=e.onTagAttr||_u.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||_u.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||_u.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||_u.safeAttrValue,e.escapeHtml=e.escapeHtml||_u.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new jTe(e.css))}Mre.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,u=r.escapeHtml,c=t.cssFilter;r.stripBlankChar&&(e=_u.stripBlankChar(e)),r.allowCommentTag||(e=_u.stripCommentTag(e));var p=!1;if(r.stripIgnoreTagBody){var p=_u.StripTagBody(r.stripIgnoreTagBody,s);s=p.onIgnoreTag}var d=UTe(e,function(m,g,b,v,_){var E={sourcePosition:m,position:g,isClosing:_,isWhite:i.hasOwnProperty(b)},I=n(b,v,E);if(!nE(I))return I;if(E.isWhite){if(E.isClosing)return"</"+b+">";var x=BTe(v),T=i[b],M=VTe(x.html,function(D,B){var G=l5.indexOf(T,D)!==-1,W=o(b,D,B,G);if(!nE(W))return W;if(G)return B=l(b,D,B,c),B?D+'="'+B+'"':D;var W=a(b,D,B,G);return nE(W)?void 0:W}),v="<"+b;return M&&(v+=" "+M),x.closing&&(v+=" /"),v+=">",v}else{var I=s(b,v,E);return nE(I)?u(v):I}},u);return p&&(d=p.remove(d)),d};var GTe=Mre;(function(e,t){var r=Gi,i=j4,n=GTe;function s(l,u){var c=new n(u);return c.process(l)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n;for(var o in r)t[o]=r[o];for(var o in i)t[o]=i[o];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})($y,$y.exports);var qTe=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):$y.exports.safeAttrValue(s,o,a,l)}};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]):n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new $y.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,n=i===void 0?!0:i,s=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?$y.exports.escapeAttrValue(t):!s&&!n?$y.exports.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):$y.exports.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var u=i.validate(l,r);return u.isValid?a.concat([l]):(n=!0,a.concat([u.sanitized]))},[]);else if(rTe(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var u=t[l],c=i.validate(u,r);return c.isValid?a[l]=u:(n=!0,a[l]=c.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const U4=new Map;function Ire(){U4.clear()}function HTe(e){return U4.get(e)}function WTe(e,t){U4.set(e,t)}function MC(e){U4.delete(e)}var Og,Tv,JTe=function(e){if("WebkitTransition"in e.style)Og="webkitTransitionEnd",Tv="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Og="transitionend",Tv="animationend"}},Tre=function(e){Og||JTe(e)},ZTe=function(e,t){return t===void 0&&(t=e+"-active"),function(r){Tre(r);var i=!1,n=function(s){i||(i=!0,r.removeEventListener(Og,n),r.removeEventListener(Tv,n),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(Og,n),r.addEventListener(Tv,n),requestAnimationFrame(function(){r.classList.add(t)})}},KTe=function(e,t){return t===void 0&&(t=e+"-active"),function(r,i){Tre(r);var n=!1,s=function(o){n||(n=!0,r.removeEventListener(Og,s),r.removeEventListener(Tv,s),i())};r.classList.add(e),r.addEventListener(Og,s),r.addEventListener(Tv,s),requestAnimationFrame(function(){r.classList.add(t)})}};const YTe=ot.getLogger("esri.widgets.support.widgetUtils");function Are(e){const t=fo.acquire();for(let i=0;i<arguments.length;i++){const n=arguments[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return fo.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(r=>{Ire();for(const i of r)e.get(i.target)(i)});return(r,i,n)=>(e.has(r)&&YTe.error("Already observing element",r),e.set(r,i),t.observe(r,n),ib(()=>{t.unobserve(r),e.delete(r)}))})();function df(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function $z(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Q8(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function QTe(e,t){return(e==="enter"?ZTe:KTe)(t)}const XTe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],e4e=XTe.reduce((e,t)=>(e[t]=[],e),{}),t4e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],$re=new qTe({whiteList:e4e,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(t4e.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function r4e(e){return e==="Enter"||e===" "}const Cre="http://www.w3.org/",V4=`${Cre}2000/svg`,kre=`${Cre}1999/xlink`;let OI,Cz=[],sD=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},oD=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),Ore=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},i4e=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(oD(e[i],t))return i}return-1},IC=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(oD(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},n4e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},X8=[],eP=!1,Rre=e=>{(e.children||[]).forEach(Rre),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},kz=()=>{eP=!1,X8.forEach(Rre),X8.length=0},Oz=e=>{X8.push(e),eP||(eP=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(kz,{timeout:16}):setTimeout(kz,16))},Rz=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),Oz(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),Oz(e))},s4e=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")tP(e,l,!0);else if(a==="classes"){let u=Object.keys(l),c=u.length;for(let p=0;p<c;p++){let d=u[p];l[d]&&e.classList.add(d)}}else if(a==="styles"){let u=Object.keys(l),c=u.length;for(let p=0;p<c;p++){let d=u[p],m=l[d];m&&(Ore(m),r.styleApplyer(e,d,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let c=l;l=function(p){c.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),e[a]=l):r.namespace===V4?a==="href"?e.setAttributeNS(kre,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=$re.sanitize(l):e.setAttribute(a,l):e[a]=l}}},o4e=(e,t,r)=>{if(t)for(let i of t)N1(i,e,void 0,r)},Pre=(e,t,r)=>{o4e(e,t.children,r),t.text&&(e.textContent=t.text),s4e(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},N1=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let c=o.charAt(s-1),p=o.slice(s,l);c==="."?n.classList.add(p):c==="#"?n.id=p:(p==="svg"&&(i=sD(i,{namespace:V4})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,p):(n=e.domNode=e.domNode||a.createElement(p),p==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=l+1}}Pre(n,e,i)}},tP=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},a4e=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=r[l],c=t[l];if(l==="class")c!==u&&(tP(e,c,!1),tP(e,u,!0));else if(l==="classes"){let p=e.classList,d=Object.keys(u),m=d.length;for(let g=0;g<m;g++){let b=d[g],v=!!u[b];v!==!!c[b]&&(n=!0,v?p.add(b):p.remove(b))}}else if(l==="styles"){let p=Object.keys(u),d=p.length;for(let m=0;m<d;m++){let g=p[m],b=u[g];b!==c[g]&&(n=!0,b?(Ore(b),i.styleApplyer(e,g,b)):i.styleApplyer(e,g,""))}}else if(u||typeof c!="string"||(u=""),l==="value"){let p=e[l];p!==u&&(e["oninput-value"]?p===e["oninput-value"]:u!==c)&&(e[l]=u,e["oninput-value"]=void 0),u!==c&&(n=!0)}else if(u!==c){let p=typeof u;p==="function"&&i.eventHandlerInterceptor||(i.namespace===V4?l==="href"?e.setAttributeNS(kre,l,u):e.setAttribute(l,u):p==="string"?l==="innerHTML"?e[l]=$re.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):e.setAttribute(l,u):e[l]!==u&&(e[l]=u),n=!0)}}return n},l4e=(e,t,r,i,n)=>{if(r===i)return!1;i=i||Cz;let s,o=(r=r||Cz).length,a=i.length,l=0,u=0,c=!1;for(;u<a;){let p=l<o?r[l]:void 0,d=i[u];if(p!==void 0&&oD(p,d))c=OI(p,d,n)||c,l++;else{let m=i4e(r,d,l+1);if(m>=0){for(s=l;s<m;s++)Rz(r[s]),IC(r,s,e,"removed");c=OI(r[m],d,n)||c,l=m+1}else N1(d,t,l<o?r[l].domNode:void 0,n),n4e(d),IC(i,u,e,"added")}u++}if(o>l)for(s=l;s<o;s++)Rz(r[s]),IC(r,s,e,"removed");return c};OI=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=sD(r,{namespace:V4})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=l4e(t,i,e.children,t.children,r)||s,s=a4e(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let mw=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,OI(i,r,t)},domNode:e.domNode});const u4e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let p1=e=>sD(u4e,e),ff={create:(e,t)=>(t=p1(t),N1(e,document.createElement("div"),void 0,t),mw(e,t)),append:(e,t,r)=>(r=p1(r),N1(t,e,void 0,r),mw(t,r)),insertBefore:(e,t,r)=>(r=p1(r),N1(t,e.parentNode,e,r),mw(t,r)),merge:(e,t,r)=>(r=p1(r),t.domNode=e,Pre(e,t,r),mw(t,r)),replace:(e,t,r)=>(r=p1(r),N1(t,e.parentNode,e,r),e.parentNode.removeChild(e),mw(t,r))},Lre,c4e=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};Lre=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let h4e=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?Lre(r.children,n=>n.domNode===i):void 0}),r},p4e=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=c4e(n.currentTarget,s.domNode);o.reverse();let a,l=h4e(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},rP=e=>{let t,r,i=p1(e),n=i.performanceLogger,s=!0,o=!1,a=[],l=[],u=(p,d,m)=>{let g,b=()=>g;i.eventHandlerInterceptor=p4e(t,b,n),g=p(d,m(),i),a.push(g),l.push(m)},c=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let p=0;p<a.length;p++){let d=l[p]();n("rendered",void 0),a[p].update(d),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:c,scheduleRender:()=>{r||o||(r=requestAnimationFrame(c))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(p,d)=>{u(ff.append,p,d)},insertBefore:(p,d)=>{u(ff.insertBefore,p,d)},merge:(p,d)=>{u(ff.merge,p,d)},replace:(p,d)=>{u(ff.replace,p,d)},detach:p=>{for(let d=0;d<l.length;d++)if(l[d]===p)return l.splice(d,1),a.splice(d,1)[0];throw new Error("renderFunction was not found")}},t},Fd=class extends kt{constructor(){super(...arguments),this.items=new Lt,this._watchUpdatingTracking=new Y1,this._callbacks=new Map,this._projector=rP(),this._hiddenProjector=rP()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const r of t.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of t.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,r=this._hiddenProjector;let i=null;const n=()=>(i=e.render(),i);r.append(t,n),r.renderNow();const s={left:0,top:0,right:0,bottom:0};if(i&&i.domNode){const o=i.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(r.detach(n);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(r=>{t.save(),r.renderCanvas(t),t.restore()}),t.restore()}};h([f({readOnly:!0})],Fd.prototype,"surface",void 0),h([f({readOnly:!0})],Fd.prototype,"items",void 0),h([f({readOnly:!0})],Fd.prototype,"needsRender",null),h([f({readOnly:!0})],Fd.prototype,"_watchUpdatingTracking",void 0),h([f({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],Fd.prototype,"updating",void 0),Fd=h([me("esri.views.overlay.ViewOverlay")],Fd);const Pz=Fd;function aD(e,t,r,i){let n=null,s=1e3;typeof t=="number"?(s=t,i=r):(n=t??null,s=r);let o,a=0;const l=()=>{a=0,e.apply(i,o)},u=(...c)=>{n&&n.apply(i,c),o=c,s?a||(a=setTimeout(l,s)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}const d4e="randomUUID"in crypto;function f4e(){if(d4e)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const m4e={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},y4e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},g4e=e=>({...y4e,...e}),v4e=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},b4e=(e,t)=>e.find(t),Lz=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{const o=i?.children?b4e(i.children,a=>a.domNode===n):void 0;r&&!o&&s!==t.length-1||(i=o)}),i},w4e=e=>{let t;const r={...m4e,...e},i=g4e(r),n=i.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],c=(d,m,g)=>{let b;i.eventHandlerInterceptor=(_,E,I,x)=>function(T){let M;n("domEvent",T);const k=v4e(T.currentTarget,b.domNode),D=k.some(G=>customElements.get(G?.tagName?.toLowerCase()));if(T.eventPhase===Event.CAPTURING_PHASE||!D)k.reverse(),M=Lz(b.getLastRender(),k);else{const G=T.composedPath(),W=G.slice(G.indexOf(T.currentTarget),G.indexOf(b.domNode)).filter(K=>K.getRootNode()===K.ownerDocument).reverse();M=Lz(b.getLastRender(),W,!0)}let B;return M&&(B=r.handleInterceptedEvent(t,M,this,T)),n("domEventProcessed",T),B},r.postProcessProjectionOptions?.(i);const v=g();b=d(m,v,i),l.push(b),u.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(b,v)};let p=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let d=0;d<l.length;d++){const m=u[d]();n("rendered",void 0),l[d].update(m),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(p=r.modifyDoRenderImplementation(p,l,u)),t={renderNow:p,scheduleRender:()=>{s||a||(s=requestAnimationFrame(p))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(d,m)=>{c(ff.append,d,m)},insertBefore:(d,m)=>{c(ff.insertBefore,d,m)},merge:(d,m)=>{c(ff.merge,d,m)},replace:(d,m)=>{c(ff.replace,d,m)},detach:d=>{for(let m=0;m<u.length;m++)if(u[m]===d)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},wr={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let d1,Nre,B4,Dre=!1,RI=!1,lD=!1,$a=!1,Nz=null,iP=!1;const Ab=typeof window<"u"?window:{};wr.cssVarShim&&Ab.CSS;const Fu=Ab.document||{head:{}},slt=Ab.HTMLElement||class{},ys={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},PI=wr.shadowDomShim&&wr.shadowDom?(()=>(Fu.head.attachShadow+"").indexOf("[native")>-1)():!0,_4e=(()=>{let e=!1;try{Fu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),x4e=e=>Promise.resolve(e),S4e=wr.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,Fre=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=M4e(e,n),l=E4e(t,o),u=I4e(n);ys.ael(a,s,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>ys.rel(a,s,l,u))})},E4e=(e,t)=>r=>{try{wr.lazyLoad||e.$hostElement$[t](r)}catch(i){vS(i)}},M4e=(e,t)=>t&4?Fu:t&8?Ab:t&16?Fu.body:e,I4e=e=>_4e?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,Dz="http://www.w3.org/1999/xlink",Rg=(e,t="")=>()=>{},Fz=new WeakMap,T4e=(e,t,r)=>{let i=DI.get(e);S4e&&r?(i=i||new CSSStyleSheet,i.replace(t)):i=t,DI.set(e,i)},A4e=(e,t,r,i)=>{let n=jre(t,r),s=DI.get(n);if(e=e.nodeType===11?e:Fu,s)if(typeof s=="string"){e=e.head||e;let o=Fz.get(e),a;o||Fz.set(e,o=new Set),o.has(n)||(a=Fu.createElement("style"),a.innerHTML=s,e.insertBefore(a,e.querySelector("link")),o&&o.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},$4e=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=Rg("attachStyles",t.$tagName$),s=A4e(PI&&r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},jre=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),C4e=e=>oAe.map(t=>t(e)).find(t=>!!t),jz={},k4e="http://www.w3.org/2000/svg",O4e="http://www.w3.org/1999/xhtml",R4e=e=>e!=null,uD=e=>(e=typeof e,e==="object"||e==="function"),Ure=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1,l=[];const u=p=>{for(let d=0;d<p.length;d++)i=p[d],Array.isArray(i)?u(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!uD(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?LI(null,i):i),a=o)};if(u(r),t&&(wr.isDev&&e==="input"&&D4e(t),wr.vdomKey&&t.key&&(n=t.key),wr.slotRelocation&&t.name&&(s=t.name),wr.vdomClass)){const p=t.className||t.class;p&&(t.class=typeof p!="object"?p:Object.keys(p).filter(d=>p[d]).join(" "))}if(wr.isDev&&l.some(Vre)&&sAe(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),wr.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,l,L4e);const c=LI(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),wr.vdomKey&&(c.$key$=n),wr.slotRelocation&&(c.$name$=s),c},LI=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return wr.vdomAttribute&&(r.$attrs$=null),wr.vdomKey&&(r.$key$=null),wr.slotRelocation&&(r.$name$=null),r},P4e={},Vre=e=>e&&e.$tag$===P4e,L4e={forEach:(e,t)=>e.map(Uz).forEach(t),map:(e,t)=>e.map(Uz).map(t).map(N4e)},Uz=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),N4e=e=>{if(typeof e.vtag=="function"){const r=Object.assign({},e.vattrs);return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),Ure(e.vtag,r,...e.vchildren||[])}const t=LI(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},D4e=e=>{const t=Object.keys(e),r=t.indexOf("value");if(r===-1)return;const i=t.indexOf("type"),n=t.indexOf("min"),s=t.indexOf("max"),o=t.indexOf("step");(r<i||r<n||r<s||r<o)&&Yre('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Vz=(e,t,r,i,n,s)=>{if(r!==i){let o=qz(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=Bz(r),c=Bz(i);l.remove(...u.filter(p=>p&&!c.includes(p))),l.add(...c.filter(p=>p&&!u.includes(p)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):qz(Ab,a)?t=a.slice(2):t=a[2]+t.slice(3),r&&ys.rel(e,t,r,!1),i&&ys.ael(e,t,i,!1);else{const l=uD(i);if((o||l&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{let c=i??"";t==="list"?o=!1:(r==null||e[t]!=c)&&(e[t]=c)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(Dz,t):e.removeAttribute(t)):(!o||s&4||n)&&!l&&(i=i===!0?"":i,u?e.setAttributeNS(Dz,t,i):e.setAttribute(t,i))}}},F4e=/\s/,Bz=e=>e?e.split(F4e):[],Bre=(e,t,r,i)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||jz,o=t.$attrs$||jz;for(i in s)i in o||Vz(n,i,s[i],void 0,r,t.$flags$);for(i in o)Vz(n,i,s[i],o[i],r,t.$flags$)},NI=(e,t,r,i)=>{let n=t.$children$[r],s=0,o,a,l;if(Dre||(lD=!0,n.$tag$==="slot"&&(d1&&i.classList.add(d1+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=Fu.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=Fu.createTextNode("");else{if($a||($a=n.$tag$==="svg"),o=n.$elm$=Fu.createElementNS($a?k4e:O4e,n.$flags$&2?"slot-fb":n.$tag$),$a&&n.$tag$==="foreignObject"&&($a=!1),Bre(null,n,$a),R4e(d1)&&o["s-si"]!==d1&&o.classList.add(o["s-si"]=d1),n.$children$)for(s=0;s<n.$children$.length;++s)a=NI(e,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?$a=!1:o.tagName==="foreignObject"&&($a=!0)}return o["s-hn"]=B4,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Nre,o["s-sn"]=n.$name$||"",l=e&&e.$children$&&e.$children$[r],l&&l.$tag$===n.$tag$&&e.$elm$&&ux(e.$elm$,!1)),o},ux=(e,t)=>{ys.$flags$|=1;const r=e.childNodes;for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==B4&&n["s-ol"]&&(qre(n).insertBefore(n,cD(n)),n["s-ol"].remove(),n["s-ol"]=void 0,lD=!0),t&&ux(n,t)}ys.$flags$&=-2},zre=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===B4&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=NI(null,r,n,e),a&&(i[n].$elm$=a,o.insertBefore(a,cD(t))))},Gre=(e,t,r,i,n)=>{for(;t<=r;++t)(i=e[t])&&(n=i.$elm$,Jre(i),RI=!0,n["s-ol"]?n["s-ol"].remove():ux(n,!0),n.remove())},j4e=(e,t,r,i)=>{let n=0,s=0,o=0,a=0,l=t.length-1,u=t[0],c=t[l],p=i.length-1,d=i[0],m=i[p],g,b;for(;n<=l&&s<=p;)if(u==null)u=t[++n];else if(c==null)c=t[--l];else if(d==null)d=i[++s];else if(m==null)m=i[--p];else if(sE(u,d))f1(u,d),u=t[++n],d=i[++s];else if(sE(c,m))f1(c,m),c=t[--l],m=i[--p];else if(sE(u,m))(u.$tag$==="slot"||m.$tag$==="slot")&&ux(u.$elm$.parentNode,!1),f1(u,m),e.insertBefore(u.$elm$,c.$elm$.nextSibling),u=t[++n],m=i[--p];else if(sE(c,d))(u.$tag$==="slot"||m.$tag$==="slot")&&ux(c.$elm$.parentNode,!1),f1(c,d),e.insertBefore(c.$elm$,u.$elm$),c=t[--l],d=i[++s];else{for(o=-1,a=n;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===d.$key$){o=a;break}o>=0?(b=t[o],b.$tag$!==d.$tag$?g=NI(t&&t[s],r,o,e):(f1(b,d),t[o]=void 0,g=b.$elm$),d=i[++s]):(g=NI(t&&t[s],r,s,e),d=i[++s]),g&&qre(u.$elm$).insertBefore(g,cD(u.$elm$))}n>l?zre(e,i[p+1]==null?null:i[p+1].$elm$,r,i,s,p):s>p&&Gre(t,n,l)},sE=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,cD=e=>e&&e["s-ol"]||e,qre=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,f1=(e,t)=>{const r=t.$elm$=e.$elm$,i=e.$children$,n=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?($a=s==="svg"?!0:s==="foreignObject"?!1:$a,s==="slot"||Bre(e,t,$a),i!==null&&n!==null?j4e(r,i,t,n):n!==null?(e.$text$!==null&&(r.textContent=""),zre(r,null,t,n,0,n.length-1)):i!==null&&Gre(i,0,i.length-1),$a&&s==="svg"&&($a=!1)):(a=r["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(r.data=o)},Hre=e=>{let t=e.childNodes,r,i,n,s,o,a;for(i=0,n=t.length;i<n;i++)if(r=t[i],r.nodeType===1){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,s=0;s<n;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==r["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){r.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){r.hidden=!0;break}}Hre(r)}},Mu=[],Wre=e=>{let t,r,i,n,s,o,a=0,l=e.childNodes,u=l.length;for(;a<u;a++){if(t=l[a],t["s-sr"]&&(r=t["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,n=t["s-sn"],o=i.length-1;o>=0;o--)r=i[o],!r["s-cn"]&&!r["s-nr"]&&r["s-hn"]!==t["s-hn"]&&(zz(r,n)?(s=Mu.find(c=>c.$nodeToRelocate$===r),RI=!0,r["s-sn"]=r["s-sn"]||n,s?s.$slotRefNode$=t:Mu.push({$slotRefNode$:t,$nodeToRelocate$:r}),r["s-sr"]&&Mu.map(c=>{zz(c.$nodeToRelocate$,r["s-sn"])&&(s=Mu.find(p=>p.$nodeToRelocate$===r),s&&!c.$slotRefNode$&&(c.$slotRefNode$=s.$slotRefNode$))})):Mu.some(c=>c.$nodeToRelocate$===r)||Mu.push({$nodeToRelocate$:r}));t.nodeType===1&&Wre(t)}},zz=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",Jre=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Jre)},U4e=(e,t)=>{const r=e.$hostElement$,i=e.$cmpMeta$,n=e.$vnode$||LI(null,null),s=Vre(t)?t:Ure(null,null,t);B4=r.tagName,i.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},i.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=r[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=r.shadowRoot||r,d1=r["s-sc"],Nre=r["s-cr"],Dre=PI&&(i.$flags$&1)!==0,RI=!1,f1(n,s);{if(ys.$flags$|=1,lD){Wre(s.$elm$);let o,a,l,u,c,p,d=0;for(;d<Mu.length;d++)o=Mu[d],a=o.$nodeToRelocate$,a["s-ol"]||(l=Fu.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(d=0;d<Mu.length;d++)if(o=Mu[d],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,c=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(p=l["s-nr"],p&&p["s-sn"]===a["s-sn"]&&u===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){c=p;break}(!c&&u!==a.parentNode||a.nextSibling!==c)&&a!==c&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,c))}else a.nodeType===1&&(a.hidden=!0)}RI&&Hre(s.$elm$),ys.$flags$&=-2,Mu.length=0}},V4e=e=>wr.lazyLoad?$b(e).$hostElement$:e,olt=(e,t,r)=>{const i=V4e(e);return{emit:n=>(wr.isDev&&!i.isConnected&&Yre(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),B4e(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n}))}},B4e=(e,t,r)=>{const i=ys.ce(t,r);return e.dispatchEvent(i),i},z4e=(e,t)=>{},hD=(e,t)=>(e.$flags$|=16,z4e(e,e.$ancestorComponent$),uAe(()=>G4e(e,t))),G4e=(e,t)=>{const r=e.$hostElement$,i=Rg("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;let s;return t?s=nv(n,"componentWillLoad"):s=nv(n,"componentWillUpdate"),s=Gz(s,()=>nv(n,"componentWillRender")),i(),Gz(s,()=>q4e(e,n,t))},q4e=async(e,t,r)=>{const i=e.$hostElement$,n=Rg("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&$4e(e);const s=Rg("render",e.$cmpMeta$.$tagName$);H4e(e,t,i),s(),n(),W4e(e)},H4e=(e,t,r)=>{try{Nz=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(wr.hasRenderFn||wr.reflect)&&(wr.vdomRender||wr.reflect)&&(wr.hydrateServerSide||U4e(e,t))}catch(a){vS(a,e.$hostElement$)}return Nz=null,null},W4e=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Rg("postUpdate",t),n=r;e.$ancestorComponent$,nv(n,"componentDidRender"),e.$flags$&64?(nv(n,"componentDidUpdate"),i()):(e.$flags$|=64,nv(n,"componentDidLoad"),i())},alt=e=>{if(wr.updatable){const t=$b(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&hD(t,!1),r}return!1},nv=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){vS(i)}},Gz=(e,t)=>e&&e.then?e.then(t):t(),J4e=(e,t)=>e!=null&&!uD(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,Z4e=(e,t)=>$b(e).$instanceValues$.get(t),K4e=(e,t,r,i)=>{const n=$b(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=s;r=J4e(r,i.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!u){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const p=i.$watchers$[t];p&&p.map(d=>{try{l[d](r,o,t)}catch(m){vS(m,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;hD(n,!1)}}}},Y4e=(e,t,r)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return Z4e(this,s)},set(a){K4e(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){ys.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(n.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},e.observedAttributes=i.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},Q4e=async(e,t,r,i,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(r.$tagName$).then(()=>t.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[t.$modeName$=C4e(e)]);const a=jre(r,t.$modeName$);if(!DI.has(a)){const l=Rg("registerStyles",r.$tagName$);T4e(a,o,!!(r.$flags$&1)),l()}}t.$ancestorComponent$,(()=>hD(t,!0))()},X4e=e=>{},eAe=e=>{if((ys.$flags$&1)===0){const t=$b(e),r=t.$cmpMeta$,i=Rg("connectedCallback",r.$tagName$);t.$flags$&1?(Fre(e,t,r.$listeners$),X4e(t.$lazyInstance$)):(t.$flags$|=1,r.$flags$&12&&tAe(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),Q4e(e,t,r)),i()}},tAe=e=>{const t=e["s-cr"]=Fu.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},rAe=e=>{if((ys.$flags$&1)===0){const t=$b(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},llt=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};wr.member&&(r.$members$=t[2]),wr.hostListener&&(r.$listeners$=t[3]),wr.watchCallback&&(r.$watchers$=e.$watchers$),wr.reflect&&(r.$attrsToReflect$=[]),wr.shadowDom&&!PI&&r.$flags$&1&&(r.$flags$|=8);const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){nAe(this,r)},connectedCallback(){eAe(this),wr.connectedCallback&&i&&i.call(this)},disconnectedCallback(){rAe(this),wr.disconnectedCallback&&n&&n.call(this)},__attachShadow(){PI?wr.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=r.$tagName$,Y4e(e,r)},ult=e=>{const t=new URL(e,ys.$resourcesUrl$);return t.origin!==Ab.location.origin?t.href:t.pathname},iAe=e=>ys.$resourcesUrl$=e,Zre=new WeakMap,$b=e=>Zre.get(e),nAe=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return wr.isDev&&(r.$renderCount$=0),wr.method&&wr.lazyLoad&&(r.$onInstancePromise$=new Promise(i=>r.$onInstanceResolve$=i)),wr.asyncLoading&&(r.$onReadyPromise$=new Promise(i=>r.$onReadyResolve$=i),e["s-p"]=[],e["s-rc"]=[]),Fre(e,r,t.$listeners$),Zre.set(e,r)},qz=(e,t)=>t in e,vS=(e,t)=>(0,console.error)(e,t),Kre=wr.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],sAe=(...e)=>console.error(...Kre,...e),Yre=(...e)=>console.warn(...Kre,...e),DI=new Map,oAe=[],Hz=[],Qre=[],aAe=(e,t)=>r=>{e.push(r),iP||(iP=!0,t&&ys.$flags$&4?lAe(nP):ys.raf(nP))},Wz=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){vS(r)}e.length=0},nP=()=>{Wz(Hz),Wz(Qre),(iP=Hz.length>0)&&ys.raf(nP)},lAe=e=>x4e().then(e),uAe=aAe(Qre,!0),clt={isDev:!!wr.isDev,isBrowser:!0,isServer:!1,isTesting:!!wr.isTesting};let Xre;function cAe(){iAe(Ol($r(Xre)))}Xre="components/assets";const eie=Symbol("widget"),hAe=[],pAe={},FI=new WeakMap;function tie(e,t){let r=t.children;if(r&&r.length)for(let n=0;n<r.length;++n)r[n]=tie(e,r[n]);else r=hAe;const i=t.vnodeSelector;if(pD(i)){const n=t.properties||pAe,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:dAe,afterUpdate:fAe,afterRemoved:rie,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function dAe(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){const o=new n(s);o.container=e,FI.set(e,o),o.afterCreate?.(o,e),i._internalHandles.add(ib(()=>rie(e)))}function fAe(e,t,r,{widgetProperties:i}){const n=FI.get(e);n&&(n.set(i),n.afterUpdate?.(n,e))}function rie(e){const t=FI.get(e);t&&(t.destroy(),FI.delete(e))}function pD(e){return typeof e=="function"&&e[eie]}const Jz=new Set;function mAe(e){Jz.add(e),e.finally(()=>Jz.delete(e))}const iie="esri.widgets.Widget",yAe=ot.getLogger(iie);let gAe=0;const vAe={widgetIcon:"esri-icon-checkbox-unchecked"};function nie(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?nie(e[r],t[r]):e[r]=t[r]);return e}const bAe=w4e({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t(i,n,s,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||l){const u=i[2].toLowerCase()+i.slice(3),c=m=>a.call(s,m);s.addEventListener(u,c,l);const p=()=>s.removeEventListener(u,c,l),d=o.afterRemoved;o.afterRemoved=m=>{d?.(m),p()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,a in l))&&(Ire(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let TC=!1,gn=class extends Qx(im.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new es,this._projector=bAe,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=vAe.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=FZ(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const s=await ia(this._messageBundleProps.map(async({bundlePath:o,propertyName:a})=>{let l=await HK(o);this.uiStrings&&Object.keys(this.uiStrings)&&(l=nie(Pe(l),this.uiStrings)),this[a]=l}));for(const o of s)o.error&&yAe.error("widget-intl:locale-error",this.declaredClass,o.error)}await this.loadLocale()}),cAe();const r="esri-widget-uid-"+f4e(),i=this.render.bind(this);this._trackingTarget=new JT(()=>this.scheduleRender());const n=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:r,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const s=i();let{properties:o}=s;o||(s.properties=o={});let{key:a,styles:l}=o;a||(o.key=r),l||(o.styles=l={}),l.display||(l.display="");let u=0;return s.children?.forEach(c=>{if(pD(c.vnodeSelector))return;let{properties:p}=c;p||(c.properties=p={}),p.key||(p.key=`${this.id}--${u++}`)}),tie(this,s)};this.render=()=>{if(TC)return n();let s=HTe(this);if(s)return s;this._trackingTarget.clear(),TC=!0;try{s=Tp(this._trackingTarget,n)}catch(o){throw console.error(o),o}finally{TC=!1}return WTe(this,s),s},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),mAe(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Yk)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(La(this._trackingTarget),La(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,MC(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return iD(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+gAe++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(MC(this),this._projector.scheduleRender())}classes(...e){return Are.apply(this,e)}renderNow(){MC(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add(it(()=>this.viewModel,(t,r)=>{r&&this._internalHandles.remove("delegated-events"),t&&qT(t)&&this._internalHandles.add(this._delegatedEventNames.map(i=>HT(t,i,n=>{this.emit(i,n)})),"delegated-events")},Br)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(Yk),this.scheduleRender()};this._internalHandles.add([Iye(e),it(()=>this.uiStrings,e),Qa(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};gn[eie]=!0,h([f()],gn.prototype,"_readyForTrueRender",void 0),h([f({value:null})],gn.prototype,"container",null),h([ur("container")],gn.prototype,"castContainer",null),h([f({aliasOf:"container"})],gn.prototype,"domNode",void 0),h([f()],gn.prototype,"iconClass",void 0),h([f()],gn.prototype,"id",null),h([f()],gn.prototype,"label",void 0),h([f()],gn.prototype,"renderable",null),h([f()],gn.prototype,"uiStrings",void 0),h([f()],gn.prototype,"viewModel",void 0),h([f()],gn.prototype,"visible",void 0),h([f()],gn.prototype,"key",void 0),h([f()],gn.prototype,"children",void 0),h([f()],gn.prototype,"afterCreate",void 0),h([f()],gn.prototype,"afterUpdate",void 0),h([f()],gn.prototype,"afterRemoved",void 0),gn=h([me(iie)],gn);const bs=gn,Zz=["B","kB","MB","GB","TB"];function wAe(e,t){let r=t===0?0:Math.floor(Math.log(t)/Math.log(sx.KILOBYTES));r=sa(r,0,Zz.length-1);const i=Uf(t/sx.KILOBYTES**r,{maximumFractionDigits:2});return Gu(e.units.bytes[Zz[r]],{fileSize:i})}const _Ae="esri.widgets.Feature.support.featureUtils",Kz=ot.getLogger(_Ae),xAe=/href=(""|'')/gi,SAe=/(\{([^\{\r\n]+)\})/g,EAe=/\'/g,sie=/^\s*expression\//i,MAe=/(\n)/gi,IAe=/[\u00A0-\u9999<>\&]/gim,TAe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,AAe=/^(?:mailto:|tel:)/,oie="relationships/",sP=PN("short-date-short-time");function aie(e){if(!Ne(e))return e.get("sourceLayer")||e.get("layer")}async function jI(e,t){return typeof e=="function"?e.call(null,t):e}function lie(e=""){if(e)return!AAe.test(e.trim().toLowerCase())}function uie(e){return!!e&&sie.test(e)}function $Ae(e,t){if(!uie(t)||!e)return null;const r=t.replace(sie,"").toLowerCase();let i;return e.some(n=>n.name.toLowerCase()===r&&(i=n,!0)),i}function cie(e,t){const r=$Ae(t,e?.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function CAe(e,t){const r=t.get(e.toLowerCase());return`{${r&&r.fieldName||e}}`}function kAe(e){return e.replace(xAe,"")}function UI(e,t){const r=dD(t,e);return r?r.name:e}function OAe(e,t){return e&&e.map(r=>UI(r,t))}function dD(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function hie(e){return`${e}`.trim()}function Wy({attributes:e,globalAttributes:t,layer:r,text:i,expressionAttributes:n,fieldInfoMap:s}){return i?oP({formattedAttributes:t,template:NAe(i,{...t,...n,...e},r),fieldInfoMap:s}):""}function oP({formattedAttributes:e,template:t,fieldInfoMap:r}){return hie(kAe(Gu(Gu(t,i=>CAe(i,r)),e)))}function RAe(e,t,r=!1){const i=t[e];if(typeof i=="string"){const n="%27",s=(r?encodeURIComponent(i):i).replace(EAe,n);t[e]=s}}function PAe(e,t=!1){const r={...e};return Object.keys(r).forEach(i=>RAe(i,r,t)),r}function LAe(e,t,r){const i=(t=hie(t))&&t[0]!=="{";return Gu(e,PAe(r,i))}function aP(e,t){return e.replace(SAe,(r,i,n)=>{const s=dD(t,n);return s?`{${s.name}}`:i})}function NAe(e,t,r){const i=aP(e,r);return i&&i.replace(TAe,(n,s,o)=>LAe(n,s||o,t))}function DAe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const r=Number(e);if(!isNaN(r))return r}return e}function FAe(e){return e?.type==="feature"}function Yz(e){return!!e?.layer}function jAe(e){return e?.type==="map-image"}function UAe(e,t){const r=t.fieldInfos,i=t.fieldName,n=pie(r,i)?.clone(),s=t.preventPlacesFormatting,o=t.layer,a=dD(o,i);if(n&&a?.type==="date"){const u=n.format||new k1;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!Yz(o)&&FAe(o)&&o.datesInUnknownTimezone||Yz(o)&&jAe(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,n.format=u}const l=n&&n.format;return typeof e=="string"&&VY(i)&&l?l.formatRasterPixelValue(e):typeof(e=DAe(e,l))=="string"||e==null||l==null?bS(e):s?Uf(e,{...qY(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(e)}function pie(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==r)&&(i=n,!0)),i}function VAe({fieldName:e,graphic:t,layer:r}){if(gp(e)||!r||typeof r.getFeatureType!="function")return null;const{typeIdField:i}=r;if(!i||e!==i)return null;const n=r.getFeatureType(t);return n?n.name:null}function BAe({fieldName:e,value:t,graphic:r,layer:i}){if(gp(e)||!i||typeof i.getFieldDomain!="function")return null;const n=i.getFieldDomain(e,{feature:r});return n&&n.type==="coded-value"?n.getName(t):null}function zAe(e,t){const{creatorField:r,creationDateField:i,editorField:n,editDateField:s}=e;if(!t)return;const o=t[s];if(typeof o=="number"){const l=t[n];return{type:"edit",date:Cp(o,sP),user:l}}const a=t[i];if(typeof a=="number"){const l=t[r];return{type:"create",date:Cp(a,sP),user:l}}return null}function GAe(e,t){const r=new Map;return e&&e.forEach(i=>{const n=UI(i.fieldName,t);i.fieldName=n,r.set(n.toLowerCase(),i)}),r}function Qz(e){const t=[];if(!e)return t;const{fieldInfos:r,content:i}=e;return r&&t.push(...r),i&&Array.isArray(i)&&i.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&t.push(...s)}}),t}function fD(e){return e.replace(IAe,t=>`&#${t.charCodeAt(0)};`)}function bS(e){return typeof e=="string"?e.replace(MAe,'<br class="esri-text-new-line" />'):e}function die(e){const{value:t,fieldName:r,fieldInfos:i,fieldInfoMap:n,layer:s,graphic:o}=e;if(t==null)return"";const a=BAe({fieldName:r,value:t,graphic:o,layer:s});if(a)return a;const l=VAe({fieldName:r,graphic:o,layer:s});if(l)return l;if(n.get(r.toLowerCase()))return UAe(t,{fieldInfos:i||Array.from(n.values()),fieldName:r,layer:s});const u=s&&s.fieldsIndex;return u&&u.isDateField(r)?Cp(t,sP):bS(t)}function AC({fieldInfos:e,attributes:t,layer:r,graphic:i,fieldInfoMap:n,relatedInfos:s}){const o={};return s?.forEach(a=>ZAe({attributes:o,relatedInfo:a,fieldInfoMap:n,fieldInfos:e,layer:r})),Object.keys(t).forEach(a=>{const l=t[a];o[a]=die({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:r,value:l,graphic:i})}),o}async function qAe(e,t){const{layer:r,graphic:i,outFields:n,objectIds:s,returnGeometry:o,spatialReference:a}=e,l=s[0];if(typeof l!="number"&&typeof l!="string"){const c="Could not query required fields for the specified feature. The feature's ID is invalid.",p={layer:r,graphic:i,objectId:l,requiredFields:n};return Kz.warn(c,p),null}if(!r.capabilities?.operations?.supportsQuery){const c="The specified layer cannot be queried. The following fields will not be available.",p={layer:r,graphic:i,requiredFields:n,returnGeometry:o};return Kz.warn(c,p),null}const u=r.createQuery();return u.objectIds=s,u.outFields=n?.length?n:[r.objectIdField],u.returnGeometry=!!o,u.returnZ=!!o,u.returnM=!!o,u.outSpatialReference=a,(await r.queryFeatures(u,t)).features[0]}async function HAe(e){if(!e.expressionInfos?.length)return!1;const t=await $p(),{arcadeUtils:{hasGeometryFunctions:r}}=t;return r(e)}async function WAe({graphic:e,popupTemplate:t,layer:r,spatialReference:i},n){if(!r||!t||(typeof r.load=="function"&&await r.load(n),!e.attributes))return;const s=e.attributes[r.objectIdField];if(s==null)return;const o=[s],a=await t.getRequiredFields(r.fieldsIndex),l=o1e(a,e),u=l?[]:a,c=t.returnGeometry||await HAe(t);if(l&&!c)return;const p=await qAe({layer:r,graphic:e,outFields:u,objectIds:o,returnGeometry:c,spatialReference:i},n);p&&(p.geometry&&(e.geometry=p.geometry),p.attributes&&(e.attributes={...e.attributes,...p.attributes}))}function gp(e=""){return!!e&&e.includes(oie)}function JAe(e){return e?`${oie}${e.layerId}/${e.fieldName}`:""}function Xz({attributes:e,graphic:t,relatedInfo:r,fieldInfos:i,fieldInfoMap:n,layer:s}){e&&t&&r&&Object.keys(t.attributes).forEach(o=>{const a=JAe({layerId:r.relation.id.toString(),fieldName:o}),l=t.attributes[o];e[a]=die({fieldName:a,fieldInfos:i,fieldInfoMap:n,layer:s,value:l,graphic:t})})}function ZAe({attributes:e,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n}){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(s=>Xz({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(s=>Xz({attributes:e,graphic:s,relatedInfo:t,fieldInfoMap:r,fieldInfos:i,layer:n})))}const eG=e=>{if(!e)return!1;const t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},fie=({layer:e,method:t,query:r,definitionExpression:i})=>{if(!e.capabilities?.query?.supportsCacheHint||t==="attachments")return;const n=de(r.where)&&r.where,s=de(r.geometry)&&r.geometry;eG(i)||eG(n)||s?.type==="extent"||r.resultType==="tile"||(r.cacheHint=!0)},KAe=({query:e,layer:t,method:r})=>{fie({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},YAe=({queryPayload:e,layer:t,method:r})=>{fie({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},tG={editing:!1,operations:{add:!0,update:!0,delete:!0}},mie=Lt.ofType(t5e),QAe="graphic.layer.capabilities.operations.supportsResizeAttachments";let gu=class extends kt{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...tG},this.activeAttachmentInfo=null,this.attachmentInfos=new mie,this.graphic=null,this.mode="view",this.own(it(()=>this.graphic,()=>this._graphicChanged(),Br))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...tG,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(QAe)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new $e("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getFeatureId(),i=new a8({objectIds:[r],returnMetadata:!0}),n=[],s=e.queryAttachments(i).then(a=>a[r]||n).catch(()=>n);this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return t.removeAll(),o.length&&t.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new $e("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new $e("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new $e("invalid-layer","addAttachment(): A valid layer is required.");const s=t.addAttachment(i,e).then(a=>this._queryAttachment(a.objectId)),o=await s;return r.add(o),o}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new $e("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new $e("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new $e("invalid-layer","deleteAttachment(): A valid layer is required.");const s=t.deleteAttachments(i,[e.id]).then(()=>e),o=await s;return r.remove(o),o}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:r,attachmentInfos:i,graphic:n,abilities:s}=this;if(!e)throw new $e("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new $e("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!s.operations.update)throw new $e("invalid-abilities","updateAttachment(): Update abilities are required.");const o=i.findIndex(u=>u===t);if(!r||typeof r.updateAttachment!="function")throw new $e("invalid-layer","updateAttachment(): A valid layer is required.");const a=r.updateAttachment(n,t.id,e).then(u=>this._queryAttachment(u.objectId)),l=await a;return i.splice(o,1,l),l}async _queryAttachment(e){if(!e)throw new $e("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,r=this._getFeatureId(),i=new a8({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(i).then(n=>n[r][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:r}=e,{attributes:i}=t;return i&&i[r]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=aie(e);this._attachmentLayer=t?t.type==="scene"&&de(t.associatedLayer)?t.associatedLayer:t:null}};h([f()],gu.prototype,"abilities",void 0),h([ur("abilities")],gu.prototype,"castAbilities",null),h([f()],gu.prototype,"activeAttachmentInfo",void 0),h([f({readOnly:!0,type:mie})],gu.prototype,"attachmentInfos",void 0),h([f({type:fs})],gu.prototype,"graphic",void 0),h([f()],gu.prototype,"mode",void 0),h([f({readOnly:!0})],gu.prototype,"state",null),h([f({readOnly:!0})],gu.prototype,"supportsResizeAttachments",null),gu=h([me("esri.widgets.Attachments.AttachmentsViewModel")],gu);const mD=gu;function XAe(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function e$e(e){const t=$r("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.includes("image/")?`${t}image-32.svg`:e.includes("audio/")?`${t}sound-32.svg`:e.includes("video/")?`${t}video-32.svg`:e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?`${t}excel-32.svg`:e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?`${t}word-32.svg`:e.includes("powerpoint")||e.includes("presentationml")?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Vs(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var t$e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},yie=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?yie(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=t$e(n)),t.push(n))}},r$e=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return yie(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function je(e,t,...r){return typeof e!="function"||pD(e)?r$e(e,t,...r):e(t,...r)}const rG={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Et={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},$C=window.CSS;let ks=class extends bs{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new mD,this.visibleElements={...rG},this._supportsImageOrientation=$C&&$C.supports&&$C.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([kp(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),it(()=>this.viewModel?.mode,()=>this._modeChanged(),Br)])}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(e){return{...rG,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new $e("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new $e("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new $e("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}render(){const{submitting:e,viewModel:t}=this,{state:r}=t;return je("div",{class:this.classes(Et.base,Et.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?je("div",{key:"error-message",class:Et.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return je("div",{class:Et.loaderContainer,key:"loader"},je("div",{class:Et.loader}))}renderProgressBar(){return this.visibleElements.progressBar?je("div",{class:Et.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,r=e||!t,i=this.visibleElements.cancelAddButton?je("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Et.esriButton,Et.esriButtonTertiary,Et.esriButtonSmall,Et.esriButtonHalf,e&&Et.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?je("button",{type:"submit",disabled:r,class:this.classes(Et.esriButton,Et.esriButtonSecondary,Et.esriButtonSmall,Et.esriButtonHalf,{[Et.buttonDisabled]:r})},this.messages.add):null,s=t?je("span",{key:"file-name",class:Et.fileName},t.name):null,o=je("form",{bind:this,afterCreate:Q8,afterRemoved:$z,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},je("fieldset",{class:Et.fileFieldset},s,je("label",{class:this.classes(Et.fileLabel,Et.esriButton,Et.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,je("input",{class:Et.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,i);return je("div",{key:"add-form-container",class:Et.formNode},o)}renderDetailsForm(e){const{visibleElements:t,viewModel:r,selectedFile:i,submitting:n}=this,{contentType:s,size:o,url:a}=e,{abilities:l}=r,u=n||!i,c=l.editing&&l.operations.delete&&t.deleteButton?je("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:E=>this._submitDeleteAttachment(E,e),class:this.classes(Et.esriButton,Et.esriButtonSmall,Et.esriButtonTertiary,Et.deleteButton,{[Et.buttonDisabled]:n})},this.messages.delete):null,p=l.editing&&l.operations.update&&t.updateButton?je("button",{disabled:u,key:"update-button",type:"submit",class:this.classes(Et.esriButton,Et.esriButtonSmall,Et.esriButtonThird,{[Et.buttonDisabled]:u})},this.messages.update):null,d=this.visibleElements.cancelUpdateButton?je("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Et.esriButton,Et.esriButtonSmall,Et.esriButtonTertiary,Et.esriButtonThird,{[Et.buttonDisabled]:n})},this.messages.cancel):null,m=i?je("span",{key:"file-name",class:Et.fileName},i.name):null,g=l.editing&&l.operations.update?je("fieldset",{key:"file",class:Et.fileFieldset},m,je("label",{class:this.classes(Et.fileLabel,Et.esriButton,Et.esriButtonSecondary)},this.messages.changeFile,je("input",{class:Et.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,b=je("fieldset",{key:"size",class:Et.metadataFieldset},je("label",null,wAe(this.messagesUnits,o))),v=je("fieldset",{key:"content-type",class:Et.metadataFieldset},je("label",null,s)),_=je("form",{bind:this,afterCreate:Q8,afterRemoved:$z,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},je("div",{class:Et.metadata},b,v),g,je("div",{class:Et.actions},c,d,p));return je("div",{key:"edit-form-container",class:Et.formNode},je("a",{class:Et.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),je("div",{class:Et.itemLinkOverlay},je("span",{class:Et.itemLinkOverlayIcon},je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},je("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),je("path",{fill:"none",d:"M0 0h32v32H0z"}))))),_)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:r}=this.viewModel,{contentType:i,name:n,url:s}=e,o=r&&XAe(i),a=this._getCSSTransform(e,o),l=a?{transform:a,"image-orientation":"none"}:{},u=s.includes("?")?"&":"?",c=o?`${s}${u}w=${t}`:e$e(i),p={[Et.itemMaskIcon]:!o},d={[Et.itemImageResizable]:r};return je("div",{class:this.classes(p,Et.itemMask)},je("img",{styles:l,alt:n,src:c,class:this.classes(d,Et.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:r}=this,{abilities:i}=r,{name:n,url:s}=e,o=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=i.editing?je("span",{"aria-hidden":"true",class:this.classes(Et.itemChevronIcon,df(this.container)?Et.iconLeft:Et.iconRight)}):null,l=[o,je("label",{class:Et.itemLabel},je("span",{class:Et.itemFilename},n||this.messages.noTitle),a)],u=i.editing?je("button",{key:"details-button",bind:this,class:Et.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},l):je("a",{key:"details-link",class:Et.itemButton,href:s,target:"_blank"},l);return je("li",{class:Et.item,key:e},u)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:r}=this,{attachmentInfos:i,abilities:n}=t,s=i&&i.length,o={[Et.containerList]:e!=="preview",[Et.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&r.addButton?je("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Et.esriButton,Et.esriButtonTertiary,Et.addAttachmentButton),type:"button"},je("span",{"aria-hidden":"true",class:this.classes(Et.itemAddIcon,Et.iconPlus)}),this.messages.add):null,l=s?je("ul",{class:Et.items},i.toArray().map(u=>this.renderAttachmentInfo({attachmentInfo:u,displayType:e}))):je("div",{class:Et.empty},this.messages.noAttachments);return je("div",{key:"attachments-container",class:this.classes(Et.container,o)},l,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,r=t&&t.files&&t.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:r}=e;return!this._supportsImageOrientation&&t&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""}};h([It("viewModel.abilities")],ks.prototype,"abilities",void 0),h([f()],ks.prototype,"displayType",void 0),h([f({readOnly:!0})],ks.prototype,"effectiveDisplayType",null),h([It("viewModel.graphic")],ks.prototype,"graphic",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ks.prototype,"label",void 0),h([f(),Vs("esri/widgets/Attachments/t9n/Attachments")],ks.prototype,"messages",void 0),h([f(),Vs("esri/core/t9n/Units")],ks.prototype,"messagesUnits",void 0),h([f({readOnly:!0})],ks.prototype,"selectedFile",void 0),h([f({readOnly:!0})],ks.prototype,"submitting",void 0),h([f({readOnly:!0})],ks.prototype,"error",void 0),h([f({type:mD})],ks.prototype,"viewModel",void 0),h([f()],ks.prototype,"visibleElements",void 0),h([ur("visibleElements")],ks.prototype,"castVisibleElements",null),ks=h([me("esri.widgets.Attachments")],ks);const i$e=ks;let E_=class extends mD{constructor(e){super(e),this.description=null,this.title=null}};h([f()],E_.prototype,"description",void 0),h([f()],E_.prototype,"title",void 0),E_=h([me("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],E_);const yD=E_,n$e={heading:"esri-widget__heading"};function z4(e,t){const r=s$e(e.level),i=`h${r}`;return delete e.level,je(i,{...e,class:Are(n$e.heading,e.class),role:"heading","aria-level":String(r)},t)}function s$e(e){return sa(Math.ceil(e),1,6)}const CC={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let m1=class extends bs{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return je("div",{class:CC.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?je(z4,{level:this.headingLevel,class:CC.title},e):null}renderDescription(){const{description:e}=this;return e?je("div",{key:"description",class:CC.description},e):null}};h([f()],m1.prototype,"description",void 0),h([f()],m1.prototype,"headingLevel",void 0),h([f()],m1.prototype,"title",void 0),m1=h([me("esri.widgets.Feature.support.FeatureElementInfo")],m1);const gD=m1,o$e={base:"esri-feature-attachments"};let kc=class extends bs{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new i$e,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new yD}initialize(){this._featureElementInfo=new gD,this.own([it(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),Br),it(()=>this.viewModel?.graphic,e=>this.attachmentsWidget.graphic=e,Br)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){const{attachmentsWidget:e}=this;return je("div",{class:o$e.base},this._featureElementInfo?.render(),e?.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:r}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:r})}};h([f({readOnly:!0})],kc.prototype,"attachmentsWidget",void 0),h([It("viewModel.description")],kc.prototype,"description",void 0),h([It("attachmentsWidget.displayType")],kc.prototype,"displayType",void 0),h([It("viewModel.graphic")],kc.prototype,"graphic",void 0),h([f()],kc.prototype,"headingLevel",void 0),h([It("viewModel.title")],kc.prototype,"title",void 0),h([f({type:yD})],kc.prototype,"viewModel",void 0),kc=h([me("esri.widgets.Feature.FeatureAttachments")],kc);const a$e=kc;let jd=class extends Hs(kt){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(it(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},Br))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:r}=this;e&&(jI(r,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,r=jI(e,{graphic:t}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const i=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",i))}};h([f({readOnly:!0})],jd.prototype,"created",void 0),h([f()],jd.prototype,"creator",void 0),h([f()],jd.prototype,"destroyer",void 0),h([f({type:fs})],jd.prototype,"graphic",void 0),h([f({readOnly:!0})],jd.prototype,"state",null),jd=h([me("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],jd);const VI=jd;function Ca(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:u$e(e[t])}}}function l$e(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function u$e(e){return function(t,...r){l$e(t)?r4e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function c$e(e){return e.split(",").map(t=>t.trim())}function h$e(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:c$e(e);r.push(...i)}}const gie="calcite-theme-";function p$e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function vie(){return p$e().startsWith("dark")}function d$e(){return`${gie}${vie()?"dark":"light"}`}function f$e(e){m$e(e),e.classList.add(d$e())}function m$e(e){Array.from(e.classList).forEach(t=>{t.startsWith(gie)&&e.classList.remove(t)})}function bie(e){return e&&typeof e.render=="function"}function y$e(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const kC={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let y1=class extends bs{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(i=>{lie(i.href)&&!i.hasAttribute("target")&&i.setAttribute("target","_blank")})}}renderLoading(){return je("div",{class:kC.loaderContainer,key:"loader"},je("div",{class:kC.loader}))}renderCreated(){const e=this.viewModel?.created;return e?e instanceof HTMLElement?je("div",{key:e,bind:e,afterCreate:this._attachToNode}):bie(e)?je("div",{key:e},!e.destroyed&&e.render()):je("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){const e=this.viewModel?.state;return je("div",{class:kC.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};h([It("viewModel.creator")],y1.prototype,"creator",void 0),h([It("viewModel.graphic")],y1.prototype,"graphic",void 0),h([f({type:VI})],y1.prototype,"viewModel",void 0),y1=h([me("esri.widgets.Feature.FeatureContent")],y1);const u5=y1;let Jh=class extends kt{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,r=[];return t?.forEach(i=>{if(!(!i.hasOwnProperty("visible")||i.visible))return;const n=i.clone();n.label=cie(n,e),r.push(n)}),r}};h([f()],Jh.prototype,"attributes",void 0),h([f({type:[XY]})],Jh.prototype,"expressionInfos",void 0),h([f()],Jh.prototype,"description",void 0),h([f({type:[eS]})],Jh.prototype,"fieldInfos",void 0),h([f({readOnly:!0})],Jh.prototype,"formattedFieldInfos",null),h([f()],Jh.prototype,"title",void 0),Jh=h([me("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Jh);const G4=Jh,g$e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function v$e(e){let t=null;return g$e.some(r=>(r.pattern.test(e)&&(t=r),!!t)),t}function b$e(e,t){if(typeof t!="string"||!t)return t;const r=v$e(t);if(!r)return t;const i=t.match(r.pattern),n=i&&i[2],s=Gu(Gu(r.label,{messages:e,hierPart:n}),{appName:r.appName}),o=r.target?` target="${r.target}"`:"",a=r.target==="_blank"?' rel="noreferrer"':"";return t.replace(r.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const yw={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let vu=class extends bs{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new G4,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new gD,this.own(it(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Br))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:r}=this.viewModel,i=e.fieldName,n=e.label||i,s=r?r[i]==null?"":r[i]:"",o=!(!e.format||!e.format.dateFormat),a=typeof s=="number"&&!o?this._forceLTR(s):b$e(this.messagesURIUtils,s),l={[yw.fieldDataDate]:o};return je("tr",{key:`fields-element-info-row-${i}-${t}`},je("th",{key:`fields-element-info-row-header-${i}-${t}`,class:yw.fieldHeader,innerHTML:n}),je("td",{key:`fields-element-info-row-data-${i}-${t}`,class:this.classes(yw.fieldData,l),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e?.length?je("table",{class:yw.esriTable,summary:this.messages.fieldsSummary},je("tbody",null,e.map((t,r)=>this.renderFieldInfo(t,r)))):null}render(){return je("div",{class:yw.base},this._featureElementInfo?.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};h([It("viewModel.attributes")],vu.prototype,"attributes",void 0),h([It("viewModel.description")],vu.prototype,"description",void 0),h([It("viewModel.expressionInfos")],vu.prototype,"expressionInfos",void 0),h([It("viewModel.fieldInfos")],vu.prototype,"fieldInfos",void 0),h([It("viewModel.title")],vu.prototype,"title",void 0),h([f({type:G4})],vu.prototype,"viewModel",void 0),h([f(),Vs("esri/widgets/Feature/t9n/Feature")],vu.prototype,"messages",void 0),h([f(),Vs("esri/widgets/support/t9n/uriUtils")],vu.prototype,"messagesURIUtils",void 0),vu=h([me("esri.widgets.Feature.FeatureFields")],vu);const wie=vu,w$e={maximumFractionDigits:20};function _$e(e){return Uf(e,w$e)}const x$e="<",S$e=">",E$e=PN("short-date");function M$e(e,t,r,i){let n="";t===0?n=`${x$e} `:t===r&&(n=`${S$e} `);let s=null;return s=i?Cp(e,E$e):_$e(e),n+s}const I$e=new xt([64,64,64]);function T$e(e,t){const r=[],i=e.length-1;return e.length===5?r.push(0,2,4):r.push(0,i),e.map((n,s)=>r.includes(s)?M$e(n,s,i,t):null)}async function A$e(e,t,r){let i=!1,n=[],s=[];if(e.stops){const u=e.stops;n=u.map(c=>c.value),i=u.some(c=>!!c.label),i&&(s=u.map(c=>c.label))}const o=n[0],a=n[n.length-1];if(o==null&&a==null)return null;const l=i?null:T$e(n,r);return(await Promise.all(n.map(async(u,c)=>({value:u,color:e.type==="opacity"?await $$e(u,e,t):(await Be(()=>Promise.resolve().then(function(){return YN}),void 0)).getColor(e,u),label:i?s[c]:l[c]})))).reverse()}async function $$e(e,t,r=I$e){const i=new xt(r),n=(await Be(()=>Promise.resolve().then(function(){return YN}),void 0)).getOpacity(t,e);return n!=null&&(i.a=n),i}function C$e(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter(i=>i.color?.a>0);let r=t.length-1;if(t&&t[0]){const i=t[r];i&&i.ratio!==1&&(t.push(new e2({ratio:1,color:i.color})),r++)}return t.map((i,n)=>{let s="";return n===0?s=e.legendOptions?.minLabel||"low":n===r&&(s=e.legendOptions?.maxLabel||"high"),{color:i.color,label:s,ratio:i.ratio}}).reverse()}ot.getLogger("esri.renderers.support.utils");function ma(e,t,r){ZZ(e,t,()=>[]).push(...r)}async function k$e(e){const t=new Map;if("visualVariables"in e&&e.visualVariables){const r=e.visualVariables.filter(i=>i.type==="color");for(const i of r){const n=i.field||i.valueExpression,s=(await A$e(i)).map(o=>o.color);ma(t,n,s)}}if(e.type==="heatmap"){const r=C$e(e).map(i=>i.color);ma(t,e.field,r)}else if(e.type==="pie-chart"){for(const r of e.attributes)ma(t,r.field,[r.color]);ma(t,null,[e?.othersCategory?.color,E0(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(const r of e.attributes)ma(t,r.field,[r.color]);ma(t,null,[e.backgroundColor])}else if(e.type==="unique-value")if(e.authoringInfo?.type==="predominance")for(const r of e.uniqueValueInfos)ma(t,r.value.toString(),[E0(r.symbol,null)]);else{const r=e.uniqueValueInfos.map(a=>E0(a.symbol,null)),{field:i,field2:n,field3:s,valueExpression:o}=e;(i||o)&&ma(t,i||o,r),n&&ma(t,n,r),s&&ma(t,s,r)}else if(e.type==="class-breaks"){const r=e.classBreakInfos.map(i=>E0(i.symbol,null));ma(t,e.field||e.valueExpression,r)}else e.type==="simple"&&ma(t,null,[E0(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&ma(t,null,[E0(e.defaultSymbol,null)]),t.forEach((r,i)=>{const n=Hpe(r.filter(Boolean),(s,o)=>JSON.stringify(s)===JSON.stringify(o));t.set(i,n)}),t}const O$e="esri.widgets.Feature.support.relatedFeatureUtils",iG=ot.getLogger(O$e),nG=new Map;function lP(e){if(!gp(e))return null;const[t,r]=e.split("/").slice(1);return{layerId:t,fieldName:r}}function R$e(e,t){if(!t.relationships)return null;let r=null;const{relationships:i}=t;return i.some(n=>n.id===parseInt(e,10)&&(r=n,!0)),r}function P$e({originRelationship:e,relationships:t,layerId:r}){let i;return t&&t.some(n=>(`${n.relatedTableId}`===r&&n.id===e.id&&(i=n),!!i)),i}function L$e(e,t){const r=t.toLowerCase();for(const i in e)if(i.toLowerCase()===r)return e[i];return null}function N$e(e,t){const r=R$e(e,t);if(!!r)return{url:`${t.url}/${r.relatedTableId}`,sourceSpatialReference:t.spatialReference,relation:r,relatedFields:[],outStatistics:[]}}function D$e(e,t){if(!t||!e)return;const{features:r,statsFeatures:i}=e,n=r&&r.value;t.relatedFeatures=n?n.features:[];const s=i&&i.value;t.relatedStatsFeatures=s?s.features:[]}function F$e(e,t,r,i){const n=new u8;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(n,i)}function j$e(e,t,r){let i=0;const n=[];for(;i<t.length;)n.push(`${e} IN (${t.slice(i,r+i)})`),i+=r;return n.join(" OR ")}async function U$e(e,t,r,i){const n=r.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:u,sourceSpatialReference:c}=t,p=P$e({originRelationship:o,relationships:s.relationships,layerId:n});if(p.relationshipTableId&&p.keyFieldInRelationshipTable){const m=(await F$e(e,p,r,i))[e.attributes[r.objectIdField]];if(!m)return null;const g=m.features.map(b=>b.attributes[s.objectIdField]);if(l?.length>0&&s.supportsStatistics){const b=new jn;b.where=j$e(s.objectIdField,g,1e3),b.outFields=a,b.outStatistics=l,b.sourceSpatialReference=c;const v={features:Promise.resolve(m),statsFeatures:t5(u,b)};return ia(v)}}const d=p?.keyField;if(d){const m=kN(q$e(s.fields,d)),g=L$e(e.attributes,o.keyField),b=m?`${d}=${g}`:`${d}='${g}'`,v=t5(u,new jn({where:b,outFields:t.relatedFields,sourceSpatialReference:c}),i),_=t.outStatistics&&t.outStatistics.length>0&&s.supportsStatistics?t5(u,new jn({where:b,outFields:t.relatedFields,outStatistics:t.outStatistics,sourceSpatialReference:c}),i):null,E={features:v};return _&&(E.statsFeatures=_),ia(E)}return null}function V$e(e,t){return Mt(e,{query:{f:"json"},signal:t&&t.signal})}function B$e({relatedInfos:e,layer:t},r){const i={};return e.forEach((n,s)=>{const{relation:o}=n;if(!o){const p=new $e("relation-required","A relation is required on a layer to retrieve related records.");throw iG.error(p),p}const{relatedTableId:a}=o;if(typeof a!="number"){const p=new $e("A related table ID is required on a layer to retrieve related records.");throw iG.error(p),p}const l=`${t.url}/${a}`,u=nG.get(l),c=u||V$e(l,r);u||nG.set(l,c),i[s]=c}),ia(i)}function z$e({graphic:e,relatedInfos:t,layer:r},i){const n={};return t.forEach((s,o)=>{s.layerInfo&&(n[o]=U$e(e,s,r,i))}),ia(n)}function G$e({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const i=new ZX({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(i)}}function q$e(e,t){if(e!=null){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}const sG={chartAnimation:!0};let Ln=class extends kt{constructor(e){super(e),this.abilities={...sG},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...sG,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,r=(e+t)%t;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,r=t+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:r,expressionAttributes:i,fieldInfoMap:n,layer:s}=this;return t?.map(o=>{const a=o?.clone();if(!a)return null;if(a.title=Wy({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.title}),a.caption=Wy({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.caption}),a.altText=Wy({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.altText}),a.type==="image"){const{value:l}=a;return this._setImageValue({value:l,formattedAttributes:r,layer:s}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:l}=a;return this._setChartValue({value:l,chartType:a.type,attributes:e,formattedAttributes:r,layer:s}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:r,formattedAttributes:i,layer:n}=e,{linkURL:s,sourceURL:o}=r;if(o){const a=aP(o,n);r.sourceURL=oP({formattedAttributes:i,template:a,fieldInfoMap:t})}if(s){const a=aP(s,n);r.linkURL=oP({formattedAttributes:i,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:r,formattedAttributes:i,chartType:n,layer:s}=e,{popupTemplate:o,relatedInfos:a}=this,{fields:l,normalizeField:u}=t;if(t.fields=OAe(l,s),u&&(t.normalizeField=UI(u,s)),!l.some(p=>!!(i[p]!=null||gp(p)&&a.size)))return;const c=o?.fieldInfos;l.forEach(p=>{if(gp(p))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:c,fieldName:p,formattedAttributes:i,chartType:n,value:t})]);const d=this._getChartOption({value:t,attributes:r,chartType:n,formattedAttributes:i,fieldName:p,fieldInfos:c});t.series.push(d)})}_getRelatedChartInfos(e){const{fieldInfos:t,fieldName:r,formattedAttributes:i,chartType:n,value:s}=e,o=[],a=lP(r),{layerId:l,fieldName:u}=a,c=this.relatedInfos?.get(l.toString());if(!c)return o;const{relatedFeatures:p,relation:d}=c;if(!d||!p)return o;const{cardinality:m}=d;return p.forEach(g=>{const{attributes:b}=g;b&&Object.keys(b).forEach(v=>{v===u&&o.push(this._getChartOption({value:s,attributes:b,formattedAttributes:i,fieldName:r,chartType:n,relatedFieldName:v,fieldInfos:t}))})}),m==="one-to-many"||m==="many-to-many"?o:[o[0]]}_getTooltip({label:e,value:t,chartType:r}){return r==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){const{value:t,attributes:r,formattedAttributes:i,fieldName:n,relatedFieldName:s,fieldInfos:o,chartType:a}=e,{layer:l,fieldInfoMap:u}=this,{normalizeField:c,tooltipField:p}=t,d=c?gp(c)?r[lP(c).fieldName]:r[c]:null,m=s&&r[s]!==void 0?r[s]:r[n]!==void 0?r[n]:i[n],g=new HY({fieldName:n,value:m===void 0?null:m&&d?m/d:m});if(gp(n)){const I=u.get(n.toLowerCase()),x=u.get(p.toLowerCase()),T=I?.fieldName??n,M=i[x?.fieldName??p]??I?.label??I?.fieldName??s,k=i[T];return g.tooltip=this._getTooltip({label:M,value:k,chartType:a}),g}const b=pie(o,n),v=UI(n,l),_=p&&i[p]!==void 0?i[p]:cie(b||new eS({fieldName:v}),this.popupTemplate?.expressionInfos),E=i[v];return g.tooltip=this._getTooltip({label:_,value:E,chartType:a}),g}};h([f()],Ln.prototype,"abilities",void 0),h([ur("abilities")],Ln.prototype,"castAbilities",null),h([f()],Ln.prototype,"activeMediaInfoIndex",void 0),h([f({readOnly:!0})],Ln.prototype,"activeMediaInfo",null),h([f()],Ln.prototype,"attributes",void 0),h([f()],Ln.prototype,"description",void 0),h([f()],Ln.prototype,"fieldInfoMap",void 0),h([f()],Ln.prototype,"formattedAttributes",void 0),h([f()],Ln.prototype,"expressionAttributes",void 0),h([f({readOnly:!0})],Ln.prototype,"formattedMediaInfos",null),h([f()],Ln.prototype,"layer",void 0),h([f({readOnly:!0})],Ln.prototype,"formattedMediaInfoCount",null),h([f()],Ln.prototype,"mediaInfos",void 0),h([f()],Ln.prototype,"popupTemplate",void 0),h([f()],Ln.prototype,"relatedInfos",void 0),h([f()],Ln.prototype,"title",void 0),Ln=h([me("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Ln);const Jy=Ln;var oG=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],H$e=[].concat(oG.slice(30,39),oG.slice(28,30).reverse()),W$e=[{name:"default",colors:H$e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const aG="en-us",vD=new Map([["ar",()=>Be(()=>import("./ar.5d7bdca7.js"),["assets/ar.5d7bdca7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.a)],["bg-bg",()=>Be(()=>import("./bg_BG.e6ba29c2.js"),["assets/bg_BG.e6ba29c2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["bs-ba",()=>Be(()=>import("./bs_BA.14911a00.js"),["assets/bs_BA.14911a00.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.b)],["ca-es",()=>Be(()=>import("./ca_ES.1a938920.js"),["assets/ca_ES.1a938920.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["cs-cz",()=>Be(()=>import("./cs_CZ.8624de8a.js"),["assets/cs_CZ.8624de8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.c)],["da-dk",()=>Be(()=>import("./da_DK.aef5a9c8.js"),["assets/da_DK.aef5a9c8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-de",()=>Be(()=>import("./de_DE.b08b4cf1.js"),["assets/de_DE.b08b4cf1.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["de-ch",()=>Be(()=>import("./de_CH.0b6cd702.js"),["assets/de_CH.0b6cd702.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.d)],["el-gr",()=>Be(()=>import("./el_GR.8e618bc9.js"),["assets/el_GR.8e618bc9.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-us",()=>Be(()=>import("./en_US.41c717af.js"),["assets/en_US.41c717af.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["en-ca",()=>Be(()=>import("./en_CA.f60d00bf.js"),["assets/en_CA.f60d00bf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["es-es",()=>Be(()=>import("./es_ES.1f0f76f4.js"),["assets/es_ES.1f0f76f4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["et-ee",()=>Be(()=>import("./et_EE.a7babafb.js"),["assets/et_EE.a7babafb.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.e)],["fi-fi",()=>Be(()=>import("./fi_FI.fdc0a8b3.js"),["assets/fi_FI.fdc0a8b3.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["fr-fr",()=>Be(()=>import("./fr_FR.9fb72c1a.js"),["assets/fr_FR.9fb72c1a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.f)],["he-il",()=>Be(()=>import("./he_IL.3941bb8a.js"),["assets/he_IL.3941bb8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hr-hr",()=>Be(()=>import("./hr_HR.0f5af0f2.js"),["assets/hr_HR.0f5af0f2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["hu-hu",()=>Be(()=>import("./hu_HU.b4dae139.js"),["assets/hu_HU.b4dae139.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.h)],["id-id",()=>Be(()=>import("./id_ID.f5b918ea.js"),["assets/id_ID.f5b918ea.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["it-it",()=>Be(()=>import("./it_IT.94769a92.js"),["assets/it_IT.94769a92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.i)],["ja-jp",()=>Be(()=>import("./ja_JP.8eb86db8.js"),["assets/ja_JP.8eb86db8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.j)],["ko-kr",()=>Be(()=>import("./ko_KR.8ba7fd29.js"),["assets/ko_KR.8ba7fd29.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.k)],["lt-lt",()=>Be(()=>import("./lt_LT.d8c1cc92.js"),["assets/lt_LT.d8c1cc92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["lv-lv",()=>Be(()=>import("./lv_LV.ceb923a4.js"),["assets/lv_LV.ceb923a4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.l)],["nb-no",()=>Be(()=>import("./nb_NO.d0457d8e.js"),["assets/nb_NO.d0457d8e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["nl-nl",()=>Be(()=>import("./nl_NL.fbf1ad03.js"),["assets/nl_NL.fbf1ad03.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.n)],["pl-pl",()=>Be(()=>import("./pl_PL.44d49398.js"),["assets/pl_PL.44d49398.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-br",()=>Be(()=>import("./pt_BR.89b1d3a7.js"),["assets/pt_BR.89b1d3a7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["pt-pt",()=>Be(()=>import("./pt_PT.2abd4e91.js"),["assets/pt_PT.2abd4e91.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.p)],["ro-ro",()=>Be(()=>import("./ro_RO.fb4fff60.js"),["assets/ro_RO.fb4fff60.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["ru-ru",()=>Be(()=>import("./ru_RU.684f53ee.js"),["assets/ru_RU.684f53ee.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.r)],["sk-sk",()=>Be(()=>import("./sk_SK.eaca904e.js"),["assets/sk_SK.eaca904e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sl-sl",()=>Be(()=>import("./sl_SL.cff9b92a.js"),["assets/sl_SL.cff9b92a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sr-rs",()=>Be(()=>import("./sr_RS.44ddc4cf.js"),["assets/sr_RS.44ddc4cf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["sv-se",()=>Be(()=>import("./sv_SE.16043ad0.js"),["assets/sv_SE.16043ad0.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.s)],["th-th",()=>Be(()=>import("./th_TH.99f2a35e.js"),["assets/th_TH.99f2a35e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["tr-tr",()=>Be(()=>import("./tr_TR.ab1c9f2f.js"),["assets/tr_TR.ab1c9f2f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.t)],["uk-ua",()=>Be(()=>import("./uk_UA.ae3608ad.js"),["assets/uk_UA.ae3608ad.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.u)],["vi-vn",()=>Be(()=>import("./vi_VN.7d19f32e.js"),["assets/vi_VN.7d19f32e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.v)],["zh-cn",()=>Be(()=>import("./zh_Hans.0f482448.js"),["assets/zh_Hans.0f482448.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-hk",()=>Be(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)],["zh-tw",()=>Be(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(e=>e.z)]]);function J$e(e){const t=e.split("-")[0].toLowerCase();let r=null;for(const i of vD.keys())if(i.startsWith(t)){r=i;break}return r}function Z$e(e){return e?vD.has(e.toLowerCase())?e.toLowerCase():J$e(e)||aG:aG}let I0,gw;async function K$e(e=Ga()){if(e=Z$e(e),I0&&e===gw)return I0;I0=Be(()=>import("./index.7ba26017.js"),["assets/index.7ba26017.js","assets/_commonjsHelpers.01f5fe30.js"]).then(t=>t.i),gw=e;try{const[t,r]=await Promise.all([I0,vD.get(gw)()]);gw===e&&(t.am4core.options.defaultLocale=r.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return I0=null,gw=null,null}return I0}function Y$e(e,t="default"){const r=W$e.find(i=>i.name===t);return r?r.colors.map(i=>e.color(i)):null}const Pi={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},OC=.05,RC=.95,PC=15,Sh="color",ad="tooltip",vw="value",lG="default-line-value";let $o=class extends bs{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Jy,this.messages=null,this._getChartDependencies=async r=>{const i=await K$e(),{destroyed:n,viewModel:s}=this;if(n||!s||!r)return;const{activeMediaInfo:o}=s,a=await this._getRendererColors(i);this._renderChart({chartDiv:r,mediaInfo:o,chartsModule:i,colorMap:a})}}initialize(){this._featureElementInfo=new gD,this.own([it(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),Br),it(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),Br)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){return je("div",{bind:this,class:Pi.base,onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?je("div",{key:"media-element-container",class:Pi.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel,{value:n,refreshInterval:s,altText:o,title:a,type:l}=e,{sourceURL:u,linkURL:c}=n,p=lie(c)?"_blank":"_self",d=p==="_blank"?"noreferrer":"",m=s?t:null,g=m?m.timestamp:0,b=m?m.sourceURL:u,v=je("img",{alt:o||a,key:`media-${l}-${r}-${i}-${g}`,src:b});return(c?je("a",{title:a,href:c,rel:d,target:p},v):null)||v}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:r}=this.viewModel;return je("div",{key:`media-${e.type}-${t}-${r}`,bind:this,class:Pi.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?je("div",{key:"media-title",class:Pi.mediaItemTitle,innerHTML:e.title}):null,r=e.caption?je("div",{key:"media-caption",class:Pi.mediaItemCaption,innerHTML:e.caption}):null;return je("div",{key:"media-container",class:Pi.mediaItemContainer},je("div",{key:"media-item-container",class:Pi.mediaItem},this.renderMediaInfoType()),t,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",r=t?this.messages.previous:this.messages.next,i=t?this.classes(Pi.mediaButton,Pi.mediaPrevious):this.classes(Pi.mediaButton,Pi.mediaNext),n=t?this.classes(Pi.mediaIcon,Pi.mediaPreviousIconLTR,Pi.iconLeftTriangleArrow):this.classes(Pi.mediaIcon,Pi.mediaNextIconLTR,Pi.iconRightTriangleArrow),s=t?this.classes(Pi.mediaIcon,Pi.mediaPreviousIconRTL,Pi.iconRightTriangleArrow):this.classes(Pi.mediaIcon,Pi.mediaNextIconRTL,Pi.iconLeftTriangleArrow),o=t?"media-previous":"media-next",a=t?this._previous:this._next;return je("button",{type:"button",key:o,title:r,"aria-label":r,tabIndex:0,class:i,bind:this,onclick:a},je("span",{"aria-hidden":"true",class:n}),je("span",{"aria-hidden":"true",class:s}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(e){const{am4core:t}=e,r=this.viewModel?.layer,i=new Map;if(!r)return i;const n=await k$e(r.renderer);return n.delete(null),Array.from(n.values()).every(s=>s?.length===1)&&(i.set(lG,t.color({r:50,g:50,b:50,a:1})),Array.from(n.keys()).forEach(s=>{s&&i.set(s,t.color(n.get(s)[0].toCss(!0)))})),i}_handleMediaKeyup(e){const t=_y(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:t}=this.viewModel,{chartsModule:r,chartDiv:i,mediaInfo:n,colorMap:s}=e,{value:o,type:a}=n,{am4core:l}=r,u=Y$e(l);function c(m){m instanceof l.ColorSet&&u&&(m.list=u)}vie()&&l.useTheme(r.am4themes_dark);const p=window.matchMedia("(prefers-reduced-motion: reduce)");t.chartAnimation&&!p.matches?l.useTheme(r.am4themes_animated):l.unuseTheme(r.am4themes_animated),l.useTheme(c);const d=a==="pie-chart"?this._createPieChart(e):this._createXYChart(e);i.setAttribute("aria-label",n.altText||n.title),d.data=o.series.map(m=>({[ad]:m.tooltip,[vw]:m.value,[Sh]:s.get(m.fieldName)})).filter(m=>a!=="pie-chart"||m.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:r}=e,{am4core:i,am4charts:n}=r,s=i.create(t,n.PieChart);s.rtl=df(this.container);const o=s.series.push(new n.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=vw,o.dataFields.category=ad,this._customizeChartTooltip(o.tooltip,i),o.slices.template.tooltipText=s.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",o.slices.template.propertyFields.fill=Sh,o.slices.template.propertyFields.stroke=Sh,s}_getMinSeriesValue(e){let t=0;return e.forEach(r=>t=Math.min(r.value,t)),t}_createColumnChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category=ad,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=OC,l.renderer.maxLabelPosition=RC,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),u.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueY=vw,c.dataFields.categoryX=ad,c.columns.template.propertyFields.fill=Sh,c.columns.template.propertyFields.stroke=Sh,e.cursor=new o.XYCursor,n.series.length>PC&&(e.scrollbarX=new s.Scrollbar)}_createBarChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.yAxes.push(new o.CategoryAxis);a.dataFields.category=ad,a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const l=e.xAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=OC,l.renderer.maxLabelPosition=RC,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),u.wrap=!0;const c=e.series.push(new o.ColumnSeries);c.dataFields.valueX=vw,c.dataFields.categoryY=ad,c.columns.template.propertyFields.fill=Sh,c.columns.template.propertyFields.stroke=Sh,e.cursor=new o.XYCursor,n.series.length>PC&&(e.scrollbarY=new s.Scrollbar)}_createLineChart(e,t){const{chartsModule:r,mediaInfo:i,colorMap:n}=t,{value:s}=i,{am4core:o,am4charts:a}=r,l=e.xAxes.push(new a.CategoryAxis);l.dataFields.category=ad,l.renderer.labels.template.disabled=!0,this._customizeChartTooltip(l.tooltip,o),l.tooltip.events.on("sizechanged",()=>{l.tooltip.dy=-l.tooltip.contentHeight});const u=e.yAxes.push(new a.ValueAxis),c=u.renderer.labels.template;u.renderer.minLabelPosition=OC,u.renderer.maxLabelPosition=RC,u.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(u.tooltip,o),c.wrap=!0;const p=e.series.push(new a.LineSeries);p.dataFields.categoryX=ad,p.dataFields.valueY=vw,p.strokeWidth=1;const d=n.get(lG);d&&(p.stroke=d);const m=p.bullets.push(new a.CircleBullet);m.propertyFields.fill=Sh,m.propertyFields.stroke=Sh,e.cursor=new a.XYCursor,s.series.length>PC&&(e.scrollbarX=new o.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:r,mediaInfo:i}=e,{type:n}=i,{am4core:s,am4charts:o}=r,a=s.create(t,o.XYChart);return a.rtl=df(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:r}=e;if(!t)return;const i=6e4*t;this._updateMediaInfoTimestamp(r.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},i);this._refreshTimer=n}_getImageSource(e,t){const r=e.includes("?")?"&":"?",[i,n=""]=e.split("#");return`${i}${r}timestamp=${t}${n?"#":""}${n}`}};h([It("viewModel.attributes")],$o.prototype,"attributes",void 0),h([It("viewModel.activeMediaInfoIndex")],$o.prototype,"activeMediaInfoIndex",void 0),h([It("viewModel.description")],$o.prototype,"description",void 0),h([It("viewModel.fieldInfoMap")],$o.prototype,"fieldInfoMap",void 0),h([It("viewModel.layer")],$o.prototype,"layer",void 0),h([It("viewModel.mediaInfos")],$o.prototype,"mediaInfos",void 0),h([It("viewModel.popupTemplate")],$o.prototype,"popupTemplate",void 0),h([It("viewModel.relatedInfos")],$o.prototype,"relatedInfos",void 0),h([It("viewModel.title")],$o.prototype,"title",void 0),h([f({type:Jy})],$o.prototype,"viewModel",void 0),h([f(),Vs("esri/widgets/Feature/t9n/Feature")],$o.prototype,"messages",void 0),$o=h([me("esri.widgets.Feature.FeatureMedia")],$o);const _ie=$o;class Q$e{constructor(t,r){this.definition=null,this.context=null,this.definition=t,this.context=r}}class vh{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let r=0;r<this.length();r++)t.push(this.get(r));return t}}class r0 extends vh{constructor(t,r,i,n,s,o){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=i,this._hasM=n,this._cacheId=s,this._partId=o}get(t){if(this._lazyPt[t]===void 0){const r=this._elements[t];if(r===void 0)return;const i=this._hasZ,n=this._hasM;let s=null;s=i&&!n?new At(r[0],r[1],r[2],void 0,this._spRef):n&&!i?new At(r[0],r[1],void 0,r[2],this._spRef):i&&n?new At(r[0],r[1],r[2],r[3],this._spRef):new At(r[0],r[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=s}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof r0&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class bD extends vh{constructor(t,r,i,n,s){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=n,this._spRef=r,this._cacheId=s}get(t){if(this._lazyPath[t]===void 0){const r=this._elements[t];if(r===void 0)return;this._lazyPath[t]=new r0(r,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof bD&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class i0 extends Error{}class X$e extends i0{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class eCe extends i0{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class tCe extends i0{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class M_ extends i0{}class xie extends i0{constructor(t){super(`Invalid unit ${t}`)}}class $l extends i0{}class ld extends i0{constructor(){super("Zone is an abstract class")}}const St="numeric",Wu="short",Ha="long",uP={year:St,month:St,day:St},Sie={year:St,month:Wu,day:St},rCe={year:St,month:Wu,day:St,weekday:Wu},Eie={year:St,month:Ha,day:St},Mie={year:St,month:Ha,day:St,weekday:Ha},Iie={hour:St,minute:St},Tie={hour:St,minute:St,second:St},Aie={hour:St,minute:St,second:St,timeZoneName:Wu},$ie={hour:St,minute:St,second:St,timeZoneName:Ha},Cie={hour:St,minute:St,hourCycle:"h23"},kie={hour:St,minute:St,second:St,hourCycle:"h23"},Oie={hour:St,minute:St,second:St,hourCycle:"h23",timeZoneName:Wu},Rie={hour:St,minute:St,second:St,hourCycle:"h23",timeZoneName:Ha},Pie={year:St,month:St,day:St,hour:St,minute:St},Lie={year:St,month:St,day:St,hour:St,minute:St,second:St},Nie={year:St,month:Wu,day:St,hour:St,minute:St},Die={year:St,month:Wu,day:St,hour:St,minute:St,second:St},iCe={year:St,month:Wu,day:St,weekday:Wu,hour:St,minute:St},Fie={year:St,month:Ha,day:St,hour:St,minute:St,timeZoneName:Wu},jie={year:St,month:Ha,day:St,hour:St,minute:St,second:St,timeZoneName:Wu},Uie={year:St,month:Ha,day:St,weekday:Ha,hour:St,minute:St,timeZoneName:Ha},Vie={year:St,month:Ha,day:St,weekday:Ha,hour:St,minute:St,second:St,timeZoneName:Ha};function Pr(e){return typeof e>"u"}function hg(e){return typeof e=="number"}function q4(e){return typeof e=="number"&&e%1===0}function nCe(e){return typeof e=="string"}function sCe(e){return Object.prototype.toString.call(e)==="[object Date]"}function Bie(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function oCe(e){return Array.isArray(e)?e:[e]}function uG(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function aCe(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Av(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function vp(e,t,r){return q4(e)&&e>=t&&e<=r}function lCe(e,t){return e-t*Math.floor(e/t)}function wn(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function ef(e){if(!(Pr(e)||e===null||e===""))return parseInt(e,10)}function xm(e){if(!(Pr(e)||e===null||e===""))return parseFloat(e)}function wD(e){if(!(Pr(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function _D(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function wS(e){return e%4===0&&(e%100!==0||e%400===0)}function f2(e){return wS(e)?366:365}function BI(e,t){const r=lCe(t-1,12)+1,i=e+(t-r)/12;return r===2?wS(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function xD(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function zI(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,i=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return t===4||i===3?53:52}function cP(e){return e>99?e:e>60?1900+e:2e3+e}function zie(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function H4(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function Gie(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new $l(`Invalid unit value ${e}`);return t}function GI(e,t){const r={};for(const i in e)if(Av(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=Gie(n)}return r}function m2(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${wn(r,2)}:${wn(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${wn(r,2)}${wn(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function W4(e){return aCe(e,["hour","minute","second","millisecond"])}const qie=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,uCe=["January","February","March","April","May","June","July","August","September","October","November","December"],Hie=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],cCe=["J","F","M","A","M","J","J","A","S","O","N","D"];function Wie(e){switch(e){case"narrow":return[...cCe];case"short":return[...Hie];case"long":return[...uCe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Jie=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Zie=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],hCe=["M","T","W","T","F","S","S"];function Kie(e){switch(e){case"narrow":return[...hCe];case"short":return[...Zie];case"long":return[...Jie];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Yie=["AM","PM"],pCe=["Before Christ","Anno Domini"],dCe=["BC","AD"],fCe=["B","A"];function Qie(e){switch(e){case"narrow":return[...fCe];case"short":return[...dCe];case"long":return[...pCe];default:return null}}function mCe(e){return Yie[e.hour<12?0:1]}function yCe(e,t){return Kie(t)[e.weekday-1]}function gCe(e,t){return Wie(t)[e.month-1]}function vCe(e,t){return Qie(t)[e.year<0?0:1]}function bCe(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${n[e][0]}`;case-1:return p?"yesterday":`last ${n[e][0]}`;case 0:return p?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=n[e],c=i?l?u[1]:u[2]||u[1]:l?n[e][0]:e;return o?`${a} ${c} ago`:`in ${a} ${c}`}function cG(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const wCe={D:uP,DD:Sie,DDD:Eie,DDDD:Mie,t:Iie,tt:Tie,ttt:Aie,tttt:$ie,T:Cie,TT:kie,TTT:Oie,TTTT:Rie,f:Pie,ff:Nie,fff:Fie,ffff:Uie,F:Lie,FF:Die,FFF:jie,FFFF:Vie};class qo{static create(t,r={}){return new qo(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n,val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:!1,val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n,val:i}),s}static macroTokenToFormatOpts(t){return wCe[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTime(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTimeParts(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).formatToParts()}resolvedOptions(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return wn(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>i?mCe(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>i?gCe(t,m):s(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>i?yCe(t,m):s(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),c=m=>{const g=qo.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},p=m=>i?vCe(t,m):s({era:m},"era"),d=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return c(m)}};return cG(qo.parseFormat(r),d)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const c=i(u);return c?this.num(l.get(c),u.length):u},s=qo.parseFormat(r),o=s.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return cG(s,n(a))}}class Ru{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class _S{get type(){throw new ld}get name(){throw new ld}get ianaName(){return this.name}get isUniversal(){throw new ld}offsetName(t,r){throw new ld}formatOffset(t,r){throw new ld}offset(t){throw new ld}equals(t){throw new ld}get isValid(){throw new ld}}let LC=null;class SD extends _S{static get instance(){return LC===null&&(LC=new SD),LC}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return zie(t,r,i)}formatOffset(t,r){return m2(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let c5={};function _Ce(e){return c5[e]||(c5[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),c5[e]}const xCe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function SCe(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,l,u,c]=i;return[o,n,s,a,l,u,c]}function ECe(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=xCe[s];s==="era"?i[a]=o:Pr(a)||(i[a]=parseInt(o,10))}return i}let oE={};class Rp extends _S{static create(t){return oE[t]||(oE[t]=new Rp(t)),oE[t]}static resetCache(){oE={},c5={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Rp.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return zie(t,r,i,this.name)}formatOffset(t,r){return m2(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=_Ce(this.name);let[n,s,o,a,l,u,c]=i.formatToParts?ECe(i,r):SCe(i,r);a==="BC"&&(n=-Math.abs(n)+1);const d=xD({year:n,month:s,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let m=+r;const g=m%1e3;return m-=g>=0?g:1e3+g,(d-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let NC=null;class mo extends _S{static get utcInstance(){return NC===null&&(NC=new mo(0)),NC}static instance(t){return t===0?mo.utcInstance:new mo(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new mo(H4(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${m2(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${m2(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return m2(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class MCe extends _S{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function sf(e,t){if(Pr(e)||e===null)return t;if(e instanceof _S)return e;if(nCe(e)){const r=e.toLowerCase();return r==="local"||r==="system"?t:r==="utc"||r==="gmt"?mo.utcInstance:mo.parseSpecifier(r)||Rp.create(e)}else return hg(e)?mo.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new MCe(e)}let hG=()=>Date.now(),pG="system",dG=null,fG=null,mG=null,yG;class Nn{static get now(){return hG}static set now(t){hG=t}static set defaultZone(t){pG=t}static get defaultZone(){return sf(pG,SD.instance)}static get defaultLocale(){return dG}static set defaultLocale(t){dG=t}static get defaultNumberingSystem(){return fG}static set defaultNumberingSystem(t){fG=t}static get defaultOutputCalendar(){return mG}static set defaultOutputCalendar(t){mG=t}static get throwOnInvalid(){return yG}static set throwOnInvalid(t){yG=t}static resetCaches(){Ui.resetCache(),Rp.resetCache()}}let gG={};function ICe(e,t={}){const r=JSON.stringify([e,t]);let i=gG[r];return i||(i=new Intl.ListFormat(e,t),gG[r]=i),i}let hP={};function pP(e,t={}){const r=JSON.stringify([e,t]);let i=hP[r];return i||(i=new Intl.DateTimeFormat(e,t),hP[r]=i),i}let dP={};function TCe(e,t={}){const r=JSON.stringify([e,t]);let i=dP[r];return i||(i=new Intl.NumberFormat(e,t),dP[r]=i),i}let fP={};function ACe(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=fP[n];return s||(s=new Intl.RelativeTimeFormat(e,t),fP[n]=s),s}let I_=null;function $Ce(){return I_||(I_=new Intl.DateTimeFormat().resolvedOptions().locale,I_)}function CCe(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let r;const i=e.substring(0,t);try{r=pP(e).resolvedOptions()}catch{r=pP(i).resolvedOptions()}const{numberingSystem:n,calendar:s}=r;return[i,n,s]}}function kCe(e,t,r){return(r||t)&&(e+="-u",r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function OCe(e){const t=[];for(let r=1;r<=12;r++){const i=nr.utc(2016,r,1);t.push(e(i))}return t}function RCe(e){const t=[];for(let r=1;r<=7;r++){const i=nr.utc(2016,11,13+r);t.push(e(i))}return t}function aE(e,t,r,i,n){const s=e.listingMode(r);return s==="error"?null:s==="en"?i(t):n(t)}function PCe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class LCe{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=TCe(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):_D(t,3);return wn(r,this.padTo)}}}class NCe{constructor(t,r,i){this.opts=i;let n;if(t.zone.isUniversal){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Rp.create(a).valid?(n=a,this.dt=t):(n="UTC",i.timeZoneName?this.dt=t:this.dt=t.offset===0?t:nr.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,n=t.zone.name);const s={...this.opts};n&&(s.timeZone=n),this.dtf=pP(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class DCe{constructor(t,r,i){this.opts={style:"long",...i},!r&&Bie()&&(this.rtf=ACe(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):bCe(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}class Ui{static fromOpts(t){return Ui.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,r,i,n=!1){const s=t||Nn.defaultLocale,o=s||(n?"en-US":$Ce()),a=r||Nn.defaultNumberingSystem,l=i||Nn.defaultOutputCalendar;return new Ui(o,a,l,s)}static resetCache(){I_=null,hP={},dP={},fP={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i}={}){return Ui.create(t,r,i)}constructor(t,r,i,n){const[s,o,a]=CCe(t);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=i||a||null,this.intl=kCe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=PCe(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Ui.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1,i=!0){return aE(this,t,i,Wie,()=>{const n=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=OCe(o=>this.extract(o,n,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1,i=!0){return aE(this,t,i,Kie,()=>{const n=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=RCe(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][t]})}meridiems(t=!0){return aE(this,void 0,t,()=>Yie,()=>{if(!this.meridiemCache){const r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[nr.utc(2016,11,13,9),nr.utc(2016,11,13,19)].map(i=>this.extract(i,r,"dayperiod"))}return this.meridiemCache})}eras(t,r=!0){return aE(this,t,r,Qie,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[nr.utc(-40,1,1),nr.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new LCe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new NCe(t,this.intl,r)}relFormatter(t={}){return new DCe(this.intl,this.isEnglish(),t)}listFormatter(t={}){return ICe(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function Cb(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function kb(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,l]=s(t,n);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function Ob(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function Xie(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=ef(t[r+n]);return[i,null,r+n]}}const ene=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,FCe=`(?:${ene.source}?(?:\\[(${qie.source})\\])?)?`,ED=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,tne=RegExp(`${ED.source}${FCe}`),MD=RegExp(`(?:T${tne.source})?`),jCe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,UCe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,VCe=/(\d{4})-?(\d{3})/,BCe=Xie("weekYear","weekNumber","weekDay"),zCe=Xie("year","ordinal"),GCe=/(\d{4})-(\d\d)-(\d\d)/,rne=RegExp(`${ED.source} ?(?:${ene.source}|(${qie.source}))?`),qCe=RegExp(`(?: ${rne.source})?`);function sv(e,t,r){const i=e[t];return Pr(i)?r:ef(i)}function HCe(e,t){return[{year:sv(e,t),month:sv(e,t+1,1),day:sv(e,t+2,1)},null,t+3]}function Rb(e,t){return[{hours:sv(e,t,0),minutes:sv(e,t+1,0),seconds:sv(e,t+2,0),milliseconds:wD(e[t+3])},null,t+4]}function xS(e,t){const r=!e[t]&&!e[t+1],i=H4(e[t+1],e[t+2]),n=r?null:mo.instance(i);return[{},n,t+3]}function SS(e,t){const r=e[t]?Rp.create(e[t]):null;return[{},r,t+1]}const WCe=RegExp(`^T?${ED.source}$`),JCe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function ZCe(e){const[t,r,i,n,s,o,a,l,u]=e,c=t[0]==="-",p=l&&l[0]==="-",d=(m,g=!1)=>m!==void 0&&(g||m&&c)?-m:m;return[{years:d(xm(r)),months:d(xm(i)),weeks:d(xm(n)),days:d(xm(s)),hours:d(xm(o)),minutes:d(xm(a)),seconds:d(xm(l),l==="-0"),milliseconds:d(wD(u),p)}]}const KCe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ID(e,t,r,i,n,s,o){const a={year:t.length===2?cP(ef(t)):ef(t),month:Hie.indexOf(r)+1,day:ef(i),hour:ef(n),minute:ef(s)};return o&&(a.second=ef(o)),e&&(a.weekday=e.length>3?Jie.indexOf(e)+1:Zie.indexOf(e)+1),a}const YCe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function QCe(e){const[,t,r,i,n,s,o,a,l,u,c,p]=e,d=ID(t,n,i,r,s,o,a);let m;return l?m=KCe[l]:u?m=0:m=H4(c,p),[d,new mo(m)]}function XCe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const eke=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,tke=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,rke=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function vG(e){const[,t,r,i,n,s,o,a]=e;return[ID(t,n,i,r,s,o,a),mo.utcInstance]}function ike(e){const[,t,r,i,n,s,o,a]=e;return[ID(t,a,r,i,n,s,o),mo.utcInstance]}const nke=Cb(jCe,MD),ske=Cb(UCe,MD),oke=Cb(VCe,MD),ake=Cb(tne),ine=kb(HCe,Rb,xS,SS),lke=kb(BCe,Rb,xS,SS),uke=kb(zCe,Rb,xS,SS),cke=kb(Rb,xS,SS);function hke(e){return Ob(e,[nke,ine],[ske,lke],[oke,uke],[ake,cke])}function pke(e){return Ob(XCe(e),[YCe,QCe])}function dke(e){return Ob(e,[eke,vG],[tke,vG],[rke,ike])}function fke(e){return Ob(e,[JCe,ZCe])}const mke=kb(Rb);function yke(e){return Ob(e,[WCe,mke])}const gke=Cb(GCe,qCe),vke=Cb(rne),bke=kb(Rb,xS,SS);function wke(e){return Ob(e,[gke,ine],[vke,bke])}const _ke="Invalid Duration",nne={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},xke={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...nne},ll=146097/400,T0=146097/4800,Ske={years:{quarters:4,months:12,weeks:ll/7,days:ll,hours:ll*24,minutes:ll*24*60,seconds:ll*24*60*60,milliseconds:ll*24*60*60*1e3},quarters:{months:3,weeks:ll/28,days:ll/4,hours:ll*24/4,minutes:ll*24*60/4,seconds:ll*24*60*60/4,milliseconds:ll*24*60*60*1e3/4},months:{weeks:T0/7,days:T0,hours:T0*24,minutes:T0*24*60,seconds:T0*24*60*60,milliseconds:T0*24*60*60*1e3},...nne},cy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Eke=cy.slice(0).reverse();function Sm(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new jr(i)}function Mke(e){return e<0?Math.floor(e):Math.ceil(e)}function sne(e,t,r,i,n){const s=e[n][r],o=t[r]/s,a=Math.sign(o)===Math.sign(i[n]),l=!a&&i[n]!==0&&Math.abs(o)<=1?Mke(o):Math.trunc(o);i[n]+=l,t[r]-=l*s}function Ike(e,t){Eke.reduce((r,i)=>Pr(t[i])?r:(r&&sne(e,t,r,t,i),i),null)}class jr{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||Ui.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r?Ske:xke,this.isLuxonDuration=!0}static fromMillis(t,r){return jr.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new $l(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new jr({values:GI(t,jr.normalizeUnit),loc:Ui.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(t){if(hg(t))return jr.fromMillis(t);if(jr.isDuration(t))return t;if(typeof t=="object")return jr.fromObject(t);throw new $l(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=fke(t);return i?jr.fromObject(i,r):jr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=yke(t);return i?jr.fromObject(i,r):jr.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new $l("need to specify a reason the Duration is invalid");const i=t instanceof Ru?t:new Ru(t,r);if(Nn.throwOnInvalid)throw new tCe(i);return new jr({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new xie(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?qo.create(this.loc,i).formatDurationFromString(this,t):_ke}toHuman(t={}){const r=cy.map(i=>{const n=this.values[i];return Pr(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=_D(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();if(r<0||r>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let n=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||i.seconds!==0||i.milliseconds!==0)&&(n+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||i.milliseconds!==0)&&(n+=".SSS"));let s=i.toFormat(n);return t.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=jr.fromDurationLike(t),i={};for(const n of cy)(Av(r.values,n)||Av(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Sm(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=jr.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=Gie(t(this.values[i],i));return Sm(this,{values:r},!0)}get(t){return this[jr.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...GI(t,jr.normalizeUnit)};return Sm(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r}),s={loc:n};return i&&(s.conversionAccuracy=i),Sm(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Ike(this.matrix,t),Sm(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>jr.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of cy)if(t.indexOf(o)>=0){s=o;let a=0;for(const u in i)a+=this.matrix[u][o]*i[u],i[u]=0;hg(n[o])&&(a+=n[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3;for(const u in n)cy.indexOf(u)>cy.indexOf(o)&&sne(this.matrix,n,u,r,o)}else hg(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return Sm(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return Sm(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of cy)if(!r(this.values[i],t.values[i]))return!1;return!0}}const bw="Invalid Interval";function Tke(e,t){return!e||!e.isValid?Ki.invalid("missing or invalid start"):!t||!t.isValid?Ki.invalid("missing or invalid end"):t<e?Ki.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class Ki{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new $l("need to specify a reason the Interval is invalid");const i=t instanceof Ru?t:new Ru(t,r);if(Nn.throwOnInvalid)throw new eCe(i);return new Ki({invalid:i})}static fromDateTimes(t,r){const i=xw(t),n=xw(r),s=Tke(i,n);return s??new Ki({start:i,end:n})}static after(t,r){const i=jr.fromDurationLike(r),n=xw(t);return Ki.fromDateTimes(n,n.plus(i))}static before(t,r){const i=jr.fromDurationLike(r),n=xw(t);return Ki.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=nr.fromISO(i,r),o=s.isValid}catch{o=!1}let a,l;try{a=nr.fromISO(n,r),l=a.isValid}catch{l=!1}if(o&&l)return Ki.fromDateTimes(s,a);if(o){const u=jr.fromISO(n,r);if(u.isValid)return Ki.after(s,u)}else if(l){const u=jr.fromISO(i,r);if(u.isValid)return Ki.before(a,u)}}return Ki.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const r=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(r,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?Ki.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(xw).filter(o=>this.contains(o)).sort(),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(Ki.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=jr.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(Ki.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:Ki.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return Ki.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&n.push(Ki.fromDateTimes(r,l.time)),r=null);return Ki.merge(n)}difference(...t){return Ki.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:bw}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:bw}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:bw}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:bw}toFormat(t,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:bw}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):jr.invalid(this.invalidReason)}mapEndpoints(t){return Ki.fromDateTimes(t(this.s),t(this.e))}}class lE{static hasDST(t=Nn.defaultZone){const r=nr.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Rp.isValidZone(t)}static normalizeZone(t){return sf(t,Nn.defaultZone)}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ui.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Ui.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Ui.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Ui.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Ui.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Ui.create(r,null,"gregory").eras(t)}static features(){return{relative:Bie()}}}function bG(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(jr.fromMillis(i).as("days"))}function Ake(e,t,r){const i=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{const u=bG(a,l);return(u-u%7)/7}],["days",bG]],n={};let s,o;for(const[a,l]of i)if(r.indexOf(a)>=0){s=a;let u=l(e,t);o=e.plus({[a]:u}),o>t?(e=e.plus({[a]:u-1}),u-=1):e=o,n[a]=u}return[e,n,o,s]}function $ke(e,t,r,i){let[n,s,o,a]=Ake(e,t,r);const l=t-n,u=r.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);u.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const c=jr.fromObject(s,i);return u.length>0?jr.fromMillis(l,i).shiftTo(...u).plus(c):c}const TD={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},wG={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Cke=TD.hanidec.replace(/[\[|\]]/g,"").split("");function kke(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(TD.hanidec)!==-1)t+=Cke.indexOf(e[r]);else for(const n in wG){const[s,o]=wG[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function Yl({numberingSystem:e},t=""){return new RegExp(`${TD[e||"latn"]}${t}`)}const Oke="missing Intl.DateTimeFormat.formatToParts support";function qr(e,t=r=>r){return{regex:e,deser:([r])=>t(kke(r))}}const Rke=String.fromCharCode(160),one=`[ ${Rke}]`,ane=new RegExp(one,"g");function Pke(e){return e.replace(/\./g,"\\.?").replace(ane,one)}function _G(e){return e.replace(/\./g,"").replace(ane," ").toLowerCase()}function Ql(e,t){return e===null?null:{regex:RegExp(e.map(Pke).join("|")),deser:([r])=>e.findIndex(i=>_G(r)===_G(i))+t}}function xG(e,t){return{regex:e,deser:([,r,i])=>H4(r,i),groups:t}}function DC(e){return{regex:e,deser:([t])=>t}}function Lke(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Nke(e,t){const r=Yl(t),i=Yl(t,"{2}"),n=Yl(t,"{3}"),s=Yl(t,"{4}"),o=Yl(t,"{6}"),a=Yl(t,"{1,2}"),l=Yl(t,"{1,3}"),u=Yl(t,"{1,6}"),c=Yl(t,"{1,9}"),p=Yl(t,"{2,4}"),d=Yl(t,"{4,6}"),m=v=>({regex:RegExp(Lke(v.val)),deser:([_])=>_,literal:!0}),b=(v=>{if(e.literal)return m(v);switch(v.val){case"G":return Ql(t.eras("short",!1),0);case"GG":return Ql(t.eras("long",!1),0);case"y":return qr(u);case"yy":return qr(p,cP);case"yyyy":return qr(s);case"yyyyy":return qr(d);case"yyyyyy":return qr(o);case"M":return qr(a);case"MM":return qr(i);case"MMM":return Ql(t.months("short",!0,!1),1);case"MMMM":return Ql(t.months("long",!0,!1),1);case"L":return qr(a);case"LL":return qr(i);case"LLL":return Ql(t.months("short",!1,!1),1);case"LLLL":return Ql(t.months("long",!1,!1),1);case"d":return qr(a);case"dd":return qr(i);case"o":return qr(l);case"ooo":return qr(n);case"HH":return qr(i);case"H":return qr(a);case"hh":return qr(i);case"h":return qr(a);case"mm":return qr(i);case"m":return qr(a);case"q":return qr(a);case"qq":return qr(i);case"s":return qr(a);case"ss":return qr(i);case"S":return qr(l);case"SSS":return qr(n);case"u":return DC(c);case"uu":return DC(a);case"uuu":return qr(r);case"a":return Ql(t.meridiems(),0);case"kkkk":return qr(s);case"kk":return qr(p,cP);case"W":return qr(a);case"WW":return qr(i);case"E":case"c":return qr(r);case"EEE":return Ql(t.weekdays("short",!1,!1),1);case"EEEE":return Ql(t.weekdays("long",!1,!1),1);case"ccc":return Ql(t.weekdays("short",!0,!1),1);case"cccc":return Ql(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return xG(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return xG(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return DC(/[a-z_+-/]{1,256}?/i);default:return m(v)}})(e)||{invalidReason:Oke};return b.token=e,b}const Dke={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function Fke(e,t,r){const{type:i,value:n}=e;if(i==="literal")return{literal:!0,val:n};const s=r[i];let o=Dke[i];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function jke(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function Uke(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(Av(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,n]}else return[i,{}]}function Vke(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Pr(e.z)||(r=Rp.create(e.z)),Pr(e.Z)||(r||(r=new mo(e.Z)),i=e.Z),Pr(e.q)||(e.M=(e.q-1)*3+1),Pr(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Pr(e.u)||(e.S=wD(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),r,i]}let FC=null;function Bke(){return FC||(FC=nr.fromMillis(1555555555555)),FC}function zke(e,t){if(e.literal)return e;const r=qo.macroTokenToFormatOpts(e.val);if(!r)return e;const s=qo.create(t,r).formatDateTimeParts(Bke()).map(o=>Fke(o,t,r));return s.includes(void 0)?e:s}function Gke(e,t){return Array.prototype.concat(...e.map(r=>zke(r,t)))}function lne(e,t,r){const i=Gke(qo.parseFormat(r),e),n=i.map(o=>Nke(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=jke(n),l=RegExp(o,"i"),[u,c]=Uke(t,l,a),[p,d,m]=c?Vke(c):[null,null,void 0];if(Av(c,"a")&&Av(c,"H"))throw new M_("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:u,matches:c,result:p,zone:d,specificOffset:m}}}function qke(e,t,r){const{result:i,zone:n,specificOffset:s,invalidReason:o}=lne(e,t,r);return[i,n,s,o]}const une=[0,31,59,90,120,151,181,212,243,273,304,334],cne=[0,31,60,91,121,152,182,213,244,274,305,335];function Rl(e,t){return new Ru("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function hne(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function pne(e,t,r){return r+(wS(e)?cne:une)[t-1]}function dne(e,t){const r=wS(e)?cne:une,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function mP(e){const{year:t,month:r,day:i}=e,n=pne(t,r,i),s=hne(t,r,i);let o=Math.floor((n-s+10)/7),a;return o<1?(a=t-1,o=zI(a)):o>zI(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...W4(e)}}function SG(e){const{weekYear:t,weekNumber:r,weekday:i}=e,n=hne(t,1,4),s=f2(t);let o=r*7+i-n-3,a;o<1?(a=t-1,o+=f2(a)):o>s?(a=t+1,o-=f2(t)):a=t;const{month:l,day:u}=dne(a,o);return{year:a,month:l,day:u,...W4(e)}}function jC(e){const{year:t,month:r,day:i}=e,n=pne(t,r,i);return{year:t,ordinal:n,...W4(e)}}function EG(e){const{year:t,ordinal:r}=e,{month:i,day:n}=dne(t,r);return{year:t,month:i,day:n,...W4(e)}}function Hke(e){const t=q4(e.weekYear),r=vp(e.weekNumber,1,zI(e.weekYear)),i=vp(e.weekday,1,7);return t?r?i?!1:Rl("weekday",e.weekday):Rl("week",e.week):Rl("weekYear",e.weekYear)}function Wke(e){const t=q4(e.year),r=vp(e.ordinal,1,f2(e.year));return t?r?!1:Rl("ordinal",e.ordinal):Rl("year",e.year)}function fne(e){const t=q4(e.year),r=vp(e.month,1,12),i=vp(e.day,1,BI(e.year,e.month));return t?r?i?!1:Rl("day",e.day):Rl("month",e.month):Rl("year",e.year)}function mne(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=vp(t,0,23)||t===24&&r===0&&i===0&&n===0,o=vp(r,0,59),a=vp(i,0,59),l=vp(n,0,999);return s?o?a?l?!1:Rl("millisecond",n):Rl("second",i):Rl("minute",r):Rl("hour",t)}const UC="Invalid DateTime",MG=864e13;function uE(e){return new Ru("unsupported zone",`the zone "${e.name}" is not supported`)}function VC(e){return e.weekData===null&&(e.weekData=mP(e.c)),e.weekData}function ww(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new nr({...r,...t,old:r})}function yne(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function IG(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function h5(e,t,r){return yne(xD(e),t,r)}function TG(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,BI(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=jr.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=xD(s);let[l,u]=yne(a,r,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function _w(e,t,r,i,n,s){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0){const l=t||a,u=nr.fromObject(e,{...r,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return nr.invalid(new Ru("unparsable",`the input "${n}" can't be parsed as ${i}`))}function cE(e,t,r=!0){return e.isValid?qo.create(Ui.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function BC(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=wn(e.c.year,r?6:4),t?(i+="-",i+=wn(e.c.month),i+="-",i+=wn(e.c.day)):(i+=wn(e.c.month),i+=wn(e.c.day)),i}function AG(e,t,r,i,n,s){let o=wn(e.c.hour);return t?(o+=":",o+=wn(e.c.minute),(e.c.second!==0||!r)&&(o+=":")):o+=wn(e.c.minute),(e.c.second!==0||!r)&&(o+=wn(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=wn(e.c.millisecond,3))),n&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=wn(Math.trunc(-e.o/60)),o+=":",o+=wn(Math.trunc(-e.o%60))):(o+="+",o+=wn(Math.trunc(e.o/60)),o+=":",o+=wn(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const gne={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Jke={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Zke={ordinal:1,hour:0,minute:0,second:0,millisecond:0},vne=["year","month","day","hour","minute","second","millisecond"],Kke=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Yke=["year","ordinal","hour","minute","second","millisecond"];function $G(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new xie(e);return t}function CG(e,t){const r=sf(t.zone,Nn.defaultZone),i=Ui.fromObject(t),n=Nn.now();let s,o;if(Pr(e.year))s=n;else{for(const u of vne)Pr(e[u])&&(e[u]=gne[u]);const a=fne(e)||mne(e);if(a)return nr.invalid(a);const l=r.offset(n);[s,o]=h5(e,l,r)}return new nr({ts:s,zone:r,loc:i,o})}function kG(e,t,r){const i=Pr(r.round)?!0:r.round,n=(o,a)=>(o=_D(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function OG(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class nr{constructor(t){const r=t.zone||Nn.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new Ru("invalid input"):null)||(r.isValid?null:uE(r));this.ts=Pr(t.ts)?Nn.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);n=IG(this.ts,a),i=Number.isNaN(n.year)?new Ru("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||Ui.create(),this.invalid=i,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new nr({})}static local(){const[t,r]=OG(arguments),[i,n,s,o,a,l,u]=r;return CG({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,r]=OG(arguments),[i,n,s,o,a,l,u]=r;return t.zone=mo.utcInstance,CG({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,r={}){const i=sCe(t)?t.valueOf():NaN;if(Number.isNaN(i))return nr.invalid("invalid input");const n=sf(r.zone,Nn.defaultZone);return n.isValid?new nr({ts:i,zone:n,loc:Ui.fromObject(r)}):nr.invalid(uE(n))}static fromMillis(t,r={}){if(hg(t))return t<-MG||t>MG?nr.invalid("Timestamp out of range"):new nr({ts:t,zone:sf(r.zone,Nn.defaultZone),loc:Ui.fromObject(r)});throw new $l(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(hg(t))return new nr({ts:t*1e3,zone:sf(r.zone,Nn.defaultZone),loc:Ui.fromObject(r)});throw new $l("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=sf(r.zone,Nn.defaultZone);if(!i.isValid)return nr.invalid(uE(i));const n=Nn.now(),s=Pr(r.specificOffset)?i.offset(n):r.specificOffset,o=GI(t,$G),a=!Pr(o.ordinal),l=!Pr(o.year),u=!Pr(o.month)||!Pr(o.day),c=l||u,p=o.weekYear||o.weekNumber,d=Ui.fromObject(r);if((c||a)&&p)throw new M_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new M_("Can't mix ordinal dates with month/day");const m=p||o.weekday&&!c;let g,b,v=IG(n,s);m?(g=Kke,b=Jke,v=mP(v)):a?(g=Yke,b=Zke,v=jC(v)):(g=vne,b=gne);let _=!1;for(const D of g){const B=o[D];Pr(B)?_?o[D]=b[D]:o[D]=v[D]:_=!0}const E=m?Hke(o):a?Wke(o):fne(o),I=E||mne(o);if(I)return nr.invalid(I);const x=m?SG(o):a?EG(o):o,[T,M]=h5(x,s,i),k=new nr({ts:T,zone:i,o:M,loc:d});return o.weekday&&c&&t.weekday!==k.weekday?nr.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${k.toISO()}`):k}static fromISO(t,r={}){const[i,n]=hke(t);return _w(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=pke(t);return _w(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=dke(t);return _w(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Pr(t)||Pr(r))throw new $l("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Ui.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u,c]=qke(o,t,r);return c?nr.invalid(c):_w(a,l,i,`format ${r}`,t,u)}static fromString(t,r,i={}){return nr.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=wke(t);return _w(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new $l("need to specify a reason the DateTime is invalid");const i=t instanceof Ru?t:new Ru(t,r);if(Nn.throwOnInvalid)throw new X$e(i);return new nr({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?VC(this).weekYear:NaN}get weekNumber(){return this.isValid?VC(this).weekNumber:NaN}get weekday(){return this.isValid?VC(this).weekday:NaN}get ordinal(){return this.isValid?jC(this.c).ordinal:NaN}get monthShort(){return this.isValid?lE.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?lE.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?lE.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?lE.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return wS(this.year)}get daysInMonth(){return BI(this.year,this.month)}get daysInYear(){return this.isValid?f2(this.year):NaN}get weeksInWeekYear(){return this.isValid?zI(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=qo.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(mo.instance(t),r)}toLocal(){return this.setZone(Nn.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=sf(t,Nn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=h5(o,s,t)}return ww(this,{ts:n,zone:t})}else return nr.invalid(uE(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return ww(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=GI(t,$G),i=!Pr(r.weekYear)||!Pr(r.weekNumber)||!Pr(r.weekday),n=!Pr(r.ordinal),s=!Pr(r.year),o=!Pr(r.month)||!Pr(r.day),a=s||o,l=r.weekYear||r.weekNumber;if((a||n)&&l)throw new M_("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new M_("Can't mix ordinal dates with month/day");let u;i?u=SG({...mP(this.c),...r}):Pr(r.ordinal)?(u={...this.toObject(),...r},Pr(r.day)&&(u.day=Math.min(BI(u.year,u.month),u.day))):u=EG({...jC(this.c),...r});const[c,p]=h5(u,this.o,this.zone);return ww(this,{ts:c,o:p})}plus(t){if(!this.isValid)return this;const r=jr.fromDurationLike(t);return ww(this,TG(this,r))}minus(t){if(!this.isValid)return this;const r=jr.fromDurationLike(t).negate();return ww(this,TG(this,r))}startOf(t){if(!this.isValid)return this;const r={},i=jr.normalizeUnit(t);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks"&&(r.weekday=1),i==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,r={}){return this.isValid?qo.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):UC}toLocaleString(t=uP,r={}){return this.isValid?qo.create(this.loc.clone(r),t).formatDateTime(this):UC}toLocaleParts(t={}){return this.isValid?qo.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=BC(this,o);return a+="T",a+=AG(this,o,r,i,n,s),a}toISODate({format:t="extended"}={}){return this.isValid?BC(this,t==="extended"):null}toISOWeekDate(){return cE(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(n?"T":"")+AG(this,o==="extended",r,t,i,s):null}toRFC2822(){return cE(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return cE(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?BC(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(r||t)&&(i&&(n+=" "),r?n+="z":t&&(n+="ZZ")),cE(this,n,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():UC}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return jr.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=oCe(r).map(jr.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=$ke(a,l,s,n);return o?u.negate():u}diffNow(t="milliseconds",r={}){return this.diff(nr.now(),t,r)}until(t){return this.isValid?Ki.fromDateTimes(this,t):this}hasSame(t,r){if(!this.isValid)return!1;const i=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r)<=i&&i<=n.endOf(r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||nr.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),kG(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?kG(t.base||nr.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(nr.isDateTime))throw new $l("min requires all arguments be DateTimes");return uG(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(nr.isDateTime))throw new $l("max requires all arguments be DateTimes");return uG(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Ui.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return lne(o,t,r)}static fromStringExplain(t,r,i={}){return nr.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return uP}static get DATE_MED(){return Sie}static get DATE_MED_WITH_WEEKDAY(){return rCe}static get DATE_FULL(){return Eie}static get DATE_HUGE(){return Mie}static get TIME_SIMPLE(){return Iie}static get TIME_WITH_SECONDS(){return Tie}static get TIME_WITH_SHORT_OFFSET(){return Aie}static get TIME_WITH_LONG_OFFSET(){return $ie}static get TIME_24_SIMPLE(){return Cie}static get TIME_24_WITH_SECONDS(){return kie}static get TIME_24_WITH_SHORT_OFFSET(){return Oie}static get TIME_24_WITH_LONG_OFFSET(){return Rie}static get DATETIME_SHORT(){return Pie}static get DATETIME_SHORT_WITH_SECONDS(){return Lie}static get DATETIME_MED(){return Nie}static get DATETIME_MED_WITH_SECONDS(){return Die}static get DATETIME_MED_WITH_WEEKDAY(){return iCe}static get DATETIME_FULL(){return Fie}static get DATETIME_FULL_WITH_SECONDS(){return jie}static get DATETIME_HUGE(){return Uie}static get DATETIME_HUGE_WITH_SECONDS(){return Vie}}function xw(e){if(nr.isDateTime(e))return e;if(e&&e.valueOf&&hg(e.valueOf()))return nr.fromJSDate(e);if(e&&typeof e=="object")return nr.fromObject(e);throw new $l(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const zC={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function bne(e){e||(e=Ga());let t=e in zC;if(!t){const s=e.split("-");s.length>1&&s[0]in zC&&(e=s[0],t=!0),t||(e="en")}const[r,i,n="#,##0.###"]=zC[e];return{decimal:r,group:i,pattern:n}}function Qke(e,t){const r=bne((t={...t}).locale);t.customs=r;const i=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:Xke(e,i,t)}const wne=/[#0,]*[#0](?:\.0*#*)?/;function Xke(e,t,r){const i=(r=r||{}).customs.group,n=r.customs.decimal,s=t.split(";"),o=s[0];if((t=s[e<0?1:0]||"-"+o).includes("%"))e*=100;else if(t.includes("\u2030"))e*=1e3;else{if(t.includes("\xA4"))throw new Error("currency notation not supported");if(t.includes("E"))throw new Error("exponential notation not supported")}const a=wne,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return r.fractional===!1&&(r.places=0),t.replace(a,eOe(e,l[0],{decimal:n,group:i,places:r.places,round:r.round}))}function eOe(e,t,r){(r=r||{}).places===!0&&(r.places=0),r.places===1/0&&(r.places=6);const i=t.split("."),n=typeof r.places=="string"&&r.places.indexOf(",");let s=r.places;n?s=r.places.substring(n+1):s>=0||(s=(i[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(i[1]||r.places){n&&(r.places=r.places.substring(0,n));const g=r.places!==void 0?r.places:i[1]&&i[1].lastIndexOf("0")+1;g>a.length&&(o[1]=a.padEnd(Number(g),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=i[0].replace(",","");let u=l.indexOf("0");u!==-1&&(u=l.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),l.includes("#")||(o[0]=o[0].substr(o[0].length-u)));let c,p,d=i[0].lastIndexOf(",");if(d!==-1){c=i[0].length-d-1;const g=i[0].substr(0,d);d=g.lastIndexOf(","),d!==-1&&(p=g.length-d-1)}const m=[];for(let g=o[0];g;){const b=g.length-c;m.push(b>0?g.substr(b):g),g=b>0?g.slice(0,b):"",p&&(c=p,p=void 0)}return o[0]=m.reverse().join(r.group||","),o.join(r.decimal||".")}function tOe(e){const t=bne((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,n=t.decimal;let s=1;if(r.includes("%"))s/=100;else if(r.includes("\u2030"))s/=1e3;else if(r.includes("\xA4"))throw new Error("currency notation not supported");const o=r.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:cx(o,l=>(l="(?:"+$Z(l,".")+")").replace(wne,u=>{const c={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:n,exponent:!1},p=u.split(".");let d=e.places;p.length===1&&s!==1&&(p[1]="###"),p.length===1||d===0?c.fractional=!1:(d===void 0&&(d=e.pattern?p[1].lastIndexOf("0")+1:1/0),d&&e.fractional==null&&(c.fractional=!0),!e.places&&d<p[1].length&&(d+=","+p[1].length),c.places=d);const m=p[0].split(",");return m.length>1&&(c.groupSize=m.pop().length,m.length>1&&(c.groupSize2=m.pop().length)),"("+iOe(c)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:n,factor:s}}function rOe(e,t){const r=tOe(t),i=new RegExp("^"+r.regexp+"$").exec(e);if(!i)return NaN;let n=i[1];if(!i[1]){if(!i[2])return NaN;n=i[2],r.factor*=-1}return n=n.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(n)*r.factor}function iOe(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=RG(e),r=cx(e.fractional,n=>{let s="";return n&&e.places!==0&&(s="\\"+e.decimal,e.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+e.places+"}"),s},!0);let i=t+r;return r&&(i="(?:(?:"+i+")|(?:"+r+"))"),i+cx(e.exponent,n=>n?"([eE]"+RG({signed:e.eSigned})+")":"")}function RG(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",cx(e.signed,t=>t?"[-+]":"",!0)+cx(e.separator,t=>{if(!t)return"(?:\\d+)";(t=$Z(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const n="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const cx=(e,t,r)=>{if(!(e instanceof Array))return t(e);const i=[];for(let n=0;n<e.length;n++)i.push(t(e[n]));return nOe(i.join("|"),r)},nOe=(e,t)=>"("+(t?"?:":"")+e+")";var PG,LG;function hlt(e){return No.fromJSON(e.toJSON())}function sOe(e){return e.toJSON?e.toJSON():e}function plt(e){return typeof e=="string"||e instanceof String}function dlt(e){return typeof e=="number"}function NG(e){return e instanceof Date}function flt(e,t){return e===t||!(!NG(e)||!NG(t))&&e.getTime()===t.getTime()}function mlt(e){if(e===void 0)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function ylt(e){if(e===null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new qt({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function glt(e){if(e===void 0)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(PG||(PG={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(LG||(LG={}));const vlt=1e3,blt={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},DG={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},wlt={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function _lt(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function xlt(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(n=t.cmp,function(o){return function(a,l){const u={key:a,value:o[a]},c={key:l,value:o[l]};return n(u,c)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=o(a[l])||"null";return u+"]"}if(a===null)return"null";if(s.includes(a)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const c=s.push(a)-1,p=Object.keys(a).sort(i&&i(a));for(u="",l=0;l<p.length;l++){const d=p[l],m=o(a[d]);m&&(u&&(u+=","),u+=JSON.stringify(d)+":"+m)}return s.splice(c,1),"{"+u+"}"}(e)}class _ne{constructor(t){this.value=t}}class xne{constructor(t){this.value=t}}class AD{constructor(t){this.fn=t}}class $D{constructor(t,r){this.paramCount=r,this.fn=t}}const oOe=AD,aOe=xne,lOe=_ne,uOe=$D,Pa={type:"VOID"},cOe={type:"BREAK"},hOe={type:"CONTINUE"};function hx(e,t,r){return t===""||t==null||t===r||t===r?e:e=e.split(t).join(r)}function CD(e){return e instanceof AD||e instanceof Q$e||e instanceof $D}function qI(e){return!!us(e)||!!po(e)||!!Rs(e)||!!ho(e)||e===null||e===Pa||typeof e=="number"}function pOe(e,t){return e===void 0?t:e}function us(e){return typeof e=="string"||e instanceof String}function ho(e){return typeof e=="boolean"}function po(e){return typeof e=="number"}function dOe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Vl(e){return e instanceof Array}function fOe(e){return e?.arcadeDeclaredClass==="esri.arcade.Feature"}function mOe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function yOe(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function Pg(e){return e instanceof vh}function Rs(e){return e instanceof Date}function gOe(e,t,r){if(e.length<t||e.length>r)throw new Error("Function called with wrong number of Parameters")}function vOe(e){return e<0?-Math.round(-e):Math.round(e)}function bOe(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?r:3&r|8).toString(16)})}function kD(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=hx(t,"\u2030",""),t=hx(t,"\xA4",""),Qke(e,{pattern:t})):e.toString()}function J4(e,t){const r=nr.fromJSDate(e);return t==null||t===""?r.toISO({suppressMilliseconds:!0}):r.toFormat(Sne(t),{locale:Ga(),numberingSystem:"latn"})}function Sne(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const r=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r))switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}function Kr(e,t,r){switch(r){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function wOe(e,t,r){if(e===null){if(t===null||t===Pa)return Kr(null,null,r);if(po(t))return Kr(0,t,r);if(us(t)||ho(t))return Kr(0,Fi(t),r);if(Rs(t))return Kr(0,t.getTime(),r)}if(e===Pa){if(t===null||t===Pa)return Kr(null,null,r);if(po(t))return Kr(0,t,r);if(us(t)||ho(t))return Kr(0,Fi(t),r);if(Rs(t))return Kr(0,t.getTime(),r)}else if(po(e)){if(po(t))return Kr(e,t,r);if(ho(t))return Kr(e,Fi(t),r);if(t===null||t===Pa)return Kr(e,0,r);if(us(t))return Kr(e,Fi(t),r);if(Rs(t))return Kr(e,t.getTime(),r)}else if(us(e)){if(us(t))return Kr(Mf(e),Mf(t),r);if(Rs(t))return Kr(Fi(e),t.getTime(),r);if(po(t))return Kr(Fi(e),t,r);if(t===null||t===Pa)return Kr(Fi(e),0,r);if(ho(t))return Kr(Fi(e),Fi(t),r)}else if(Rs(e)){if(Rs(t))return Kr(e,t,r);if(t===null||t===Pa)return Kr(e.getTime(),0,r);if(po(t))return Kr(e.getTime(),t,r);if(ho(t)||us(t))return Kr(e.getTime(),Fi(t),r)}else if(ho(e)){if(ho(t))return Kr(e,t,r);if(po(t))return Kr(Fi(e),Fi(t),r);if(Rs(t))return Kr(Fi(e),t.getTime(),r);if(t===null||t===Pa)return Kr(Fi(e),0,r);if(us(t))return Kr(Fi(e),Fi(t),r)}return!!Ene(e,t)&&(r==="<="||r===">=")}function Ene(e,t){if(e===t||e===null&&t===Pa||t===null&&e===Pa)return!0;if(Rs(e)&&Rs(t))return e.getTime()===t.getTime();if(e instanceof bD||e instanceof r0)return e.equalityTest(t);if(e instanceof At&&t instanceof At){const r=e.cache._arcadeCacheId,i=t.cache._arcadeCacheId;if(r!=null)return r===i}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Mf(e,t){if(us(e))return e;if(e===null)return"";if(po(e))return kD(e,t);if(ho(e))return e.toString();if(Rs(e))return J4(e,t);if(e instanceof na)return JSON.stringify(e.toJSON());if(Vl(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=HI(e[i]);return"["+r.join(",")+"]"}if(e instanceof vh){const r=[];for(let i=0;i<e.length();i++)r[i]=HI(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():CD(e)?"object, Function":""}function _Oe(e){const t=[];if(Vl(e)===!1)return null;if(e instanceof vh){for(let r=0;r<e.length();r++)t[r]=Fi(e.get(r));return t}for(let r=0;r<e.length;r++)t[r]=Fi(e[r]);return t}function p5(e,t){if(us(e))return e;if(e===null)return"";if(po(e))return kD(e,t);if(ho(e))return e.toString();if(Rs(e))return J4(e,t);if(e instanceof na)return e instanceof qt?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+yP(e.spatialReference)+"}":yP(e.toJSON(),(r,i)=>r.key===i.key?0:r.key==="spatialReference"?1:i.key==="spatialReference"||r.key<i.key?-1:r.key>i.key?1:0);if(Vl(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=HI(e[i]);return"["+r.join(",")+"]"}if(e instanceof vh){const r=[];for(let i=0;i<e.length();i++)r[i]=HI(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():CD(e)?"object, Function":""}function HI(e){if(e===null)return"null";if(ho(e)||po(e)||us(e))return JSON.stringify(e);if(e instanceof na||e instanceof vh||e instanceof Array)return p5(e);if(e instanceof Date)return JSON.stringify(J4(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===Pa)return"null";return"null"}function Fi(e,t){return po(e)?e:e===null||e===""?0:Rs(e)?NaN:ho(e)?e?1:0:Vl(e)||e===""||e===void 0?NaN:t!==void 0&&us(e)?(t=hx(t,"\u2030",""),t=hx(t,"\xA4",""),rOe(e,{pattern:t})):e===Pa?0:Number(e)}function xOe(e){if(Rs(e))return e;if(us(e)){const t=Mne(e);if(t)return t.toJSDate()}return null}function SOe(e){return Rs(e)?nr.fromJSDate(e):us(e)?Mne(e):null}function Mne(e){const t=/ (\d\d)/;let r=nr.fromISO(e);return r.isValid||t.test(e)&&(e=e.replace(t,"T$1"),r=nr.fromISO(e),r.isValid)?r:null}function EOe(e){return ho(e)?e:us(e)?(e=e.toLowerCase())==="true":!!po(e)&&e!==0&&!isNaN(e)}function MOe(e,t){return Ne(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function IOe(e){if(e===null)return null;if(e instanceof At)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof wo){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Ds){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof nm?e.points.length===0?null:e:e instanceof qt?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function Ine(e,t){if(!e||!e.domain)return t;let r=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Mf(t);else{if(t==null)return null;if(t==="")return t;t=Fi(t)}for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.code===t&&(r=n)}return r===null?t:r.name}function Tne(e,t){if(!e||!e.domain)return t;let r=null;t=Mf(t);for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.name===t&&(r=n)}return r===null?t:r.code}function Z4(e,t,r=null,i=null){if(!t||!t.fields)return null;let n,s,o=null;for(let a=0;a<t.fields.length;a++){const l=t.fields[a];l.name.toLowerCase()===e.toString().toLowerCase()&&(o=l)}if(o===null)throw new Error("Field not found");return i===null&&r&&t.typeIdField&&(i=r.hasField(t.typeIdField)?r.field(t.typeIdField):null),i!=null&&t.types.some(function(a){return a.id===i&&(n=a.domains&&a.domains[o.name],n&&n.type==="inherited"&&(n=FG(o.name,t),s=!0),!0)}),s||n||(n=FG(e,t)),{field:o,domain:n}}function FG(e,t){let r;return t.fields.some(function(i){return i.name.toLowerCase()===e.toLowerCase()&&(r=i.domain),!!r}),r}function yP(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(n=t.cmp,function(o){return function(a,l){const u={key:a,value:o[a]},c={key:l,value:o[l]};return n(u,c)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=o(a[l])||"null";return u+"]"}if(a===null)return"null";if(s.includes(a)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const c=s.push(a)-1,p=Object.keys(a).sort(i&&i(a));for(u="",l=0;l<p.length;l++){const d=p[l],m=o(a[d]);m&&(u&&(u+=","),u+=JSON.stringify(d)+":"+m)}return s.splice(c,1),"{"+u+"}"}(e)}function TOe(e){if(e===null)return null;const t=[];for(const r of e)r&&r.arcadeDeclaredClass&&r.arcadeDeclaredClass==="esri.arcade.Feature"?t.push(r.geometry()):t.push(r);return t}function $v(e,t){if(!(t instanceof At))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function AOe(e,t){if(Vl(e)||Pg(e)){let r=!1,i=!1,n=[],s=t;if(Vl(e)){for(const o of e)$v(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ,i=e[0].hasM)}else if(e instanceof r0)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else{if(!Pg(e))throw new Error("Invalid Argument");for(const o of e.toArray())$v(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:(SN(n,i,r)===!1&&(n=n.slice(0).reverse()),new wo({rings:[n],spatialReference:s,hasZ:r,hasM:i}))}return e}function $Oe(e,t){if(Vl(e)||Pg(e)){let r=!1,i=!1,n=[],s=t;if(Vl(e)){for(const o of e)$v(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof r0)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(Pg(e)){for(const o of e.toArray())$v(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new Ds({paths:[n],spatialReference:s,hasZ:r,hasM:i})}return e}function COe(e,t){if(Vl(e)||Pg(e)){let r=!1,i=!1,n=[],s=t;if(Vl(e)){for(const o of e)$v(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof r0)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(Pg(e)){for(const o of e.toArray())$v(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new nm({points:n,spatialReference:s,hasZ:r,hasM:i})}return e}function kOe(e,t=!1){const r=[];if(e===null)return r;if(Vl(e)===!0){for(let i=0;i<e.length;i++){const n=Mf(e[i]);n===""&&t!==!0||r.push(n)}return r}if(e instanceof vh){for(let i=0;i<e.length();i++){const n=Mf(e.get(i));n===""&&t!==!0||r.push(n)}return r}if(qI(e)){const i=Mf(e);return i===""&&t!==!0||r.push(i),r}return[]}let GC=0;function OOe(e){return GC++,GC%100==0?(GC=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function ROe(e,t,r){switch(r){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function px(e,t=null){return e==null?null:ho(e)||po(e)||us(e)?e:e instanceof na?t?.keepGeometryType===!0?e:e.toJSON():e instanceof vh?e.toArray().map(r=>px(r,t)):e instanceof Array?e.map(r=>px(r,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function POe(e,t,r,i,n){const s=await OD(e,t,r);n[i]=s}async function OD(e,t=null,r=null){if(e instanceof vh&&(e=e.toArray()),e==null)return null;if(qI(e)||e instanceof na||e instanceof Date)return px(e,r);if(e instanceof Array){const i=[],n=[];for(const s of e)s===null||qI(s)||s instanceof na||s instanceof Date?n.push(px(s,r)):(n.push(null),i.push(POe(s,t,r,n.length-1,n)));return i.length>0&&await Promise.all(i),n}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,r):null}function LOe(e,t,r){const i=e.fullSchema();return i===null||!i.fields?null:Z4(t,i,e,r)}function NOe(e){const t=e.fullSchema();return t===null?null:t.fields&&t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(r=>({name:r.name,code:r.id})):[]}:null}function DOe(e,t,r,i){const n=e.fullSchema();if(n===null||!n.fields)return null;const s=Z4(t,n,e,i);if(r===void 0)try{r=e.field(t)}catch{return null}return Ine(s,r)}function FOe(e,t,r,i){const n=e.fullSchema();if(n===null||!n.fields)return null;if(r===void 0){try{r=e.field(t)}catch{return null}return r}return Tne(Z4(t,n,e,i),r)}function jOe(e){const t=e.fullSchema();if(t===null||!t.fields)return null;const r=[];for(const i of t.fields)r.push(sOe(i));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField,geometryType:DG[t.geometryType]===void 0?"":DG[t.geometryType],fields:r}}const Slt=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:_ne,ImplicitResultE:xne,NativeFunctionE:AD,SizzleFunctionE:$D,NativeFunction:oOe,ImplicitResult:aOe,ReturnResult:lOe,SizzleFunction:uOe,voidOperation:Pa,breakResult:cOe,continueResult:hOe,multiReplace:hx,isFunctionParameter:CD,isSimpleType:qI,defaultUndefined:pOe,isString:us,isBoolean:ho,isNumber:po,isInteger:dOe,isArray:Vl,isFeature:fOe,isFeatureSet:mOe,isFeatureSetCollection:yOe,isImmutableArray:Pg,isDate:Rs,pcCheck:gOe,absRound:vOe,generateUUID:bOe,formatNumber:kD,formatDate:J4,standardiseDateFormat:Sne,greaterThanLessThan:wOe,equalityTest:Ene,toString:Mf,toNumberArray:_Oe,toStringExplicit:p5,toNumber:Fi,toDate:xOe,toDateTime:SOe,toBoolean:EOe,fixSpatialReference:MOe,fixNullGeometry:IOe,getDomainValue:Ine,getDomainCode:Tne,getDomain:Z4,stableStringify:yP,autoCastFeatureToGeometry:TOe,autoCastArrayOfPointsToPolygon:AOe,autoCastArrayOfPointsToPolyline:$Oe,autoCastArrayOfPointsToMultiPoint:COe,toStringArray:kOe,tick:OOe,binaryOperator:ROe,castAsJson:px,castAsJsonAsync:OD,featureFullDomain:LOe,featureSubtypes:NOe,featureDomainValueLookup:DOe,featureDomainCodeLookup:FOe,featureSchema:jOe},Symbol.toStringTag,{value:"Module"})),UOe=["$datastore","$map","$layer","$aggregatedfeatures"],VOe="esri.widgets.Feature.support.arcadeFeatureUtils",BOe=ot.getLogger(VOe);function zOe(e){return typeof e=="string"?bS(fD(e)):Array.isArray(e)?GOe(e):e?.declaredClass==="esri.arcade.Dictionary"?qOe(e):e}function GOe(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?bS(fD(t)):t}</li>`).join("")}</ul>`}function qOe(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const r=e.field(t);return`<tr><th>${t}</th><td>${typeof r=="string"?bS(fD(r)):r}</td></tr>`}).join("")}</table>`}function HOe({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:r,context:i,viewInfo:n,map:s,graphic:o,interceptor:a}){r.forEach(l=>{const u=l.toLowerCase(),c={map:s,spatialReference:n.sr,interceptor:a};if(u==="$map"&&(i.vars[u]=t.convertMapToFeatureSetCollection(c)),u==="$layer"&&(i.vars[u]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:n.sr,interceptor:a})),u==="$datastore"&&(i.vars[u]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:n.sr,interceptor:a})),u==="$aggregatedfeatures"){const p=o.layer,{fields:d,objectIdField:m,geometryType:g,spatialReference:b,displayField:v}=p,_=new R4({fields:d,objectIdField:m,geometryType:g,spatialReference:b,displayField:v,...p.type==="feature"?{templates:p.templates,typeIdField:p.typeIdField,types:p.types}:null,source:e});i.vars[u]=t.convertFeatureLayerToFeatureSet({layer:_,spatialReference:n.sr,interceptor:a})}})}function Ane(){return Be(()=>import("./arcadeUtils.b942efba.js").then(function(e){return e.t}),["assets/arcadeUtils.b942efba.js","assets/preload-helper.387dac8f.js"])}async function WOe({graphic:e,view:t}){const{isAggregate:r,layer:i}=e;if(!r||!i||t?.type!=="2d")return[];const n=await t.whenLayerView(i);if(!n.createQuery||!n.queryFeatures)return[];const s=n.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await n.queryFeatures(s);return o}async function $ne({expressionInfo:e,arcadeUtils:t,interceptor:r,spatialReference:i,map:n,graphic:s,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=UOe.filter(m=>t.hasVariable(a,m)),[u]=await Promise.all([WOe({graphic:s,view:o}),t.loadScriptDependencies(a,!0,l)]),c=t.getViewInfo({spatialReference:i}),p=t.createExecContext(s,c);p.interceptor=r,p.useAsync=!0,HOe({aggregatedFeatures:u,arcadeUtils:t,featureSetVars:l,context:p,viewInfo:c,map:n,graphic:s,interceptor:r});const d=t.createFunction(a,p);return t.executeAsyncFunction(d,p).catch(m=>BOe.error("arcade-execution-error",{error:m,graphic:s,expressionInfo:e}))}async function JOe({expressionInfos:e,spatialReference:t,graphic:r,interceptor:i,map:n,view:s}){if(!e||!e.length)return{};const o=await Ane(),a={};for(const c of e)a[`expression/${c.name}`]=$ne({expressionInfo:c,arcadeUtils:o,interceptor:i,spatialReference:t,map:n,graphic:r,view:s});const l=await ia(a),u={};for(const c in l)u[c]=zOe(l[c].value);return u}const ZOe=1;let Sa=class extends Hs(kt){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{const t=this.contentElement?.type;this.contentElementViewModel?.destroy();const r=t==="fields"?new G4:t==="media"?new Jy:t==="text"?new VI:null;this._set("contentElementViewModel",r)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=aD(this._compile,ZOe,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:r,interceptor:i,spatialReference:n,map:s,view:o,_abortController:a}=this;if(!(t&&r&&n&&s))return void this._set("contentElement",null);const l=await Ane();if(a!==this._abortController)return;const u=await $ne({arcadeUtils:l,expressionInfo:t,graphic:r,interceptor:i,map:s,spatialReference:n,view:o});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const c=await OD(u,a.signal),p=c?.type,d=p==="media"?J2.fromJSON(c):p==="text"?bv.fromJSON(c):p==="fields"?vv.fromJSON(c):null;this._set("contentElement",d)},this.handles.add([it(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),Br),it(()=>[this.contentElement],()=>this._createVM(),Br)])}destroy(){this._cancelQuery(),this.contentElementViewModel?.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){return this.view?.spatialReference||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:r}=this;return e?"loading":t||r?"ready":"disabled"}get map(){return this.view?.map||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};h([f()],Sa.prototype,"_abortController",void 0),h([f({type:BY})],Sa.prototype,"expressionInfo",void 0),h([f({type:fs})],Sa.prototype,"graphic",void 0),h([f({readOnly:!0})],Sa.prototype,"contentElement",void 0),h([f({readOnly:!0})],Sa.prototype,"contentElementViewModel",void 0),h([f()],Sa.prototype,"interceptor",void 0),h([f()],Sa.prototype,"spatialReference",null),h([f({readOnly:!0})],Sa.prototype,"state",null),h([f()],Sa.prototype,"map",null),h([f()],Sa.prototype,"view",void 0),Sa=h([me("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],Sa);const RD=Sa,hE={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let d5=class extends bs{constructor(e,t){super(e,t),this.viewModel=new RD}initialize(){this.own(it(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),Br))}destroy(){this._destroyContentWidget()}renderLoading(){return je("div",{key:"loading-container",class:hE.loadingSpinnerContainer},je("span",{class:this.classes(hE.iconLoading,hE.spinner)}))}render(){const{state:e}=this.viewModel;return je("div",{class:hE.base},e==="loading"?this.renderLoading():e==="disabled"?null:this._contentWidget?.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,r=t?.type;this._destroyContentWidget();const i=e?r==="fields"?new wie({viewModel:e}):r==="media"?new _ie({viewModel:e}):r==="text"?new u5({viewModel:e}):null:null;this._contentWidget=i,this.scheduleRender()}};h([f({type:RD})],d5.prototype,"viewModel",void 0),d5=h([me("esri.widgets.Feature.FeatureExpression")],d5);const KOe=d5;class YOe{constructor(t,r){this.preLayerQueryCallback=t,this.preRequestCallback=r,this.preLayerQueryCallback||(this.preLayerQueryCallback=i=>{}),this.preRequestCallback||(this.preLayerQueryCallback=i=>{})}}var f5;const QOe=1,jG="content-view-models",Cne="esri.widgets.FeatureViewModel",XOe=ot.getLogger(Cne),UG={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Ai=f5=class extends kt{constructor(e){super(e),this._handles=new es,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=aD(this._graphicChanged,QOe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...UG},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:r}=this;return t.type==="attachments"&&r.attachmentsContent||t.type==="custom"&&r.customContent||t.type==="fields"&&r.fieldsContent||t.type==="media"&&r.mediaContent||t.type==="text"&&r.textContent||t.type==="expression"&&r.expressionContent},this._handles.add(it(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),Br))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return de(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return GAe(Qz(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return aie(this.graphic)}castAbilities(e){return{...UG,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof Jy&&r.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof Jy&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof Jy&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(r){Vn(r)||(this._error=r,XOe.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,r)=>this._compileContentElement(t,r)):typeof e=="string"?this._compileText(new bv({text:e}),0).text:e}_destroyContentViewModels(){this._handles?.remove(jG),this.contentViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:r}=this,{contentElement:i,contentElementViewModel:n}=e,s=i?.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createFieldsVMParams(i,t))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createMediaVMParams(i,t))),s==="text"&&n.set(this._createTextVMParams(i)))}_compileExpression(e,t){const{expressionInfo:r}=e,{graphic:i,map:n,spatialReference:s,view:o}=this,a=new RD({expressionInfo:r,graphic:i,interceptor:f5.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[t]=a,this._handles.add(it(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,t),Br),jG),e}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:n}=e;return this.contentViewModels[t]=new yD({graphic:r,...this._compileTitleAndDesc({title:n,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:n}=e;return this.contentViewModels[t]=new VI({graphic:r,creator:i,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:n,formattedAttributes:s,_expressionAttributes:o}=this,{attributes:a}=n,l=s.global;return{title:Wy({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:e}),description:Wy({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:r,formattedAttributes:i}=this,n={...i.global,...i.content[t]},s=(e?.fieldInfos||r?.fieldInfos)?.filter(({fieldName:u})=>uie(u)||gp(u)||n.hasOwnProperty(u)),o=r?.expressionInfos,{description:a,title:l}=e;return{attributes:n,expressionInfos:o,fieldInfos:s,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(e,t){const r=e.clone(),i=new G4(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,r.fieldInfos=i.formattedFieldInfos.slice(0),r}_createMediaVMParams(e,t){const{abilities:r,graphic:i,_fieldInfoMap:n,formattedAttributes:s,_effectivePopupTemplate:o,relatedInfos:a,_sourceLayer:l,_expressionAttributes:u}=this,{attributes:c}=i,{description:p,mediaInfos:d,title:m}=e;return{abilities:{chartAnimation:r.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:c,layer:l,fieldInfoMap:n,formattedAttributes:{...s.global,...s.content[t]},expressionAttributes:u,mediaInfos:d,popupTemplate:o,relatedInfos:a,...this._compileTitleAndDesc({title:m,description:p})}}_compileMedia(e,t){const r=e.clone(),i=new Jy(this._createMediaVMParams(e,t));return r.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[t]=i,r}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:r,_sourceLayer:i,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:s}=t,o=this.formattedAttributes.global;e.text=Wy({attributes:s,fieldInfoMap:r,globalAttributes:o,expressionAttributes:n,layer:i,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const r=e.clone();return this.contentViewModels[t]=new VI(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,n=t?.editFieldsInfo;return i&&n?zAe(n,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:n}=this,{attributes:s}=i,o=this.formattedAttributes.global;return Wy({attributes:s,fieldInfoMap:t,globalAttributes:o,expressionAttributes:n,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.title;return jI(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.content;return jI(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:n,spatialReference:s,map:o,view:a}=this,{content:{value:l},title:{value:u}}=await ia({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await WAe({graphic:i,popupTemplate:n,layer:r,spatialReference:s},e);const{expressionAttributes:{value:c}}=await ia({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:JOe({expressionInfos:n?.expressionInfos,spatialReference:s,graphic:i,map:o,interceptor:f5.interceptor,view:a})});t===this._featureAbortController&&i&&(this._expressionAttributes=c,this._graphicExpressionAttributes={...i.attributes,...c},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){const{_effectivePopupTemplate:i,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;r.content[t]=AC({fieldInfos:i?.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){if(e.fieldInfos){const{graphic:i,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;r.content[t]=AC({fieldInfos:e.fieldInfos,graphic:i,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:r,relatedInfos:i,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=t?.fieldInfos,l={global:AC({fieldInfos:a,graphic:r,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach((u,c)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:c,formattedAttributes:l})}),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,Qz(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:n}=this;i.clear();const s=de(n.associatedLayer)?await n.associatedLayer.load(r):n;if(!s)return;const o=t.filter(u=>u&&gp(u.fieldName));if(!o||!o.length)return;t.forEach(u=>this._configureRelatedInfo(u,s));const a=await B$e({relatedInfos:i,layer:s},r);Object.keys(a).forEach(u=>{const c=i.get(u.toString()),p=a[u]?.value;c&&p&&(c.layerInfo=p.data)});const l=await z$e({graphic:e,relatedInfos:i,layer:s},r);Object.keys(l).forEach(u=>{D$e(l[u]?.value,i.get(u.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=lP(e.fieldName);if(!i)return;const{layerId:n,fieldName:s}=i;if(!n)return;const o=r.get(n.toString())||N$e(n,t);o&&(G$e({relatedInfo:o,fieldName:s,fieldInfo:e}),this.relatedInfos.set(n,o))}};Ai.interceptor=new YOe(KAe,YAe),h([f()],Ai.prototype,"_error",void 0),h([f()],Ai.prototype,"_featureAbortController",void 0),h([f({readOnly:!0})],Ai.prototype,"_effectivePopupTemplate",null),h([f({readOnly:!0})],Ai.prototype,"_fieldInfoMap",null),h([f({readOnly:!0})],Ai.prototype,"_sourceLayer",null),h([f()],Ai.prototype,"abilities",void 0),h([ur("abilities")],Ai.prototype,"castAbilities",null),h([f({readOnly:!0})],Ai.prototype,"content",void 0),h([f({readOnly:!0})],Ai.prototype,"contentViewModels",void 0),h([f({type:Boolean})],Ai.prototype,"defaultPopupTemplateEnabled",void 0),h([f({readOnly:!0})],Ai.prototype,"state",null),h([f({readOnly:!0})],Ai.prototype,"formattedAttributes",void 0),h([f({type:fs,value:null})],Ai.prototype,"graphic",null),h([f({readOnly:!0})],Ai.prototype,"lastEditInfo",void 0),h([f({readOnly:!0})],Ai.prototype,"relatedInfos",void 0),h([f()],Ai.prototype,"spatialReference",null),h([f({readOnly:!0})],Ai.prototype,"title",void 0),h([f()],Ai.prototype,"map",null),h([f({readOnly:!0})],Ai.prototype,"waitingForContent",null),h([f()],Ai.prototype,"view",void 0),Ai=f5=h([me(Cne)],Ai);const PD=Ai,kne=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=r=>bie(r)&&!r.destroyed?je("div",{key:r},r.render()):r instanceof HTMLElement?je("div",{key:r,bind:r,afterCreate:this._attachToNode}):y$e(r)?je("div",{key:r,bind:r.domNode,afterCreate:this._attachToNode}):null}_attachToNode(r){const i=this;r.appendChild(i)}};return t=h([me("esri.widgets.Feature.ContentMixin")],t),t},is={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},VG={title:!0,content:!0,lastEditedInfo:!0};let ss=class extends kne(bs){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...VG},this.map=null,this.view=null,this.viewModel=new PD}initialize(){this.own(it(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),Br))}loadDependencies(){return Be(()=>import("./calcite-notice.b4fdab59.js"),["assets/calcite-notice.b4fdab59.js","assets/preload-helper.387dac8f.js"])}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...VG,...e}}render(){const{state:e}=this.viewModel,t=je("div",{class:is.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return je("div",{class:this.classes(is.base,is.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:r}=this;return je("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},r.title?je("div",{key:"error-title",slot:"title"},e.errorMessage):null,je("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return je("div",{key:"loading-container",class:is.loadingSpinnerContainer},je("span",{class:this.classes(is.iconLoading,is.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?je("div",{class:is.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?je(z4,{level:this.headingLevel,class:is.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?je("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:je("div",{key:`${t}-content`},r.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!r.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:r,attachmentInfos:i}=t.viewModel;return r==="loading"||i.length>0?je("div",{key:this._buildKey("attachments-element",e),class:this.classes(is.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:je("div",{key:this._buildKey("expression-element",e),class:is.contentElement},t.render())}renderCustom(e,t){const{creator:r}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:r?je("div",{key:this._buildKey("custom-element",t),class:is.contentElement},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:je("div",{key:this._buildKey("fields-element",e),class:is.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:je("div",{key:this._buildKey("media-element",e),class:is.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:i,user:n}=r,s=r.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=Uh(s,{date:i,user:n});return je("div",{key:"edit-info-element",class:this.classes(is.lastEditedInfo,is.contentElement)},o)}renderText(e,t){const r=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:r?je("div",{key:this._buildKey("text-element",t),class:this.classes(is.contentElement,is.text)},i.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,r=this.get("viewModel.content"),{contentViewModels:i}=this.viewModel;if(Array.isArray(r))r.forEach((n,s)=>{n.type==="attachments"&&(this._contentWidgets[s]=new a$e({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:i[s]})),n.type==="fields"&&(this._contentWidgets[s]=new wie({viewModel:i[s]})),n.type==="media"&&(this._contentWidgets[s]=new _ie({viewModel:i[s]})),n.type==="text"&&(this._contentWidgets[s]=new u5({viewModel:i[s]})),n.type==="custom"&&(this._contentWidgets[s]=new u5({viewModel:i[s]})),n.type==="expression"&&(this._contentWidgets[s]=new KOe({viewModel:i[s]}))},this);else{const n=i[0];n&&!n.destroyed&&(this._contentWidgets[0]=new u5({viewModel:n}))}this.scheduleRender()}};h([It("viewModel.graphic")],ss.prototype,"graphic",void 0),h([It("viewModel.defaultPopupTemplateEnabled")],ss.prototype,"defaultPopupTemplateEnabled",void 0),h([f()],ss.prototype,"headingLevel",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ss.prototype,"label",void 0),h([f(),Vs("esri/widgets/Feature/t9n/Feature")],ss.prototype,"messages",void 0),h([f(),Vs("esri/t9n/common")],ss.prototype,"messagesCommon",void 0),h([f(),Vs("esri/widgets/support/t9n/uriUtils")],ss.prototype,"messagesURIUtils",void 0),h([It("viewModel.spatialReference")],ss.prototype,"spatialReference",void 0),h([It("viewModel.title")],ss.prototype,"title",void 0),h([f()],ss.prototype,"visibleElements",void 0),h([ur("visibleElements")],ss.prototype,"castVisibleElements",null),h([It("viewModel.map")],ss.prototype,"map",void 0),h([It("viewModel.view")],ss.prototype,"view",void 0),h([f({type:PD})],ss.prototype,"viewModel",void 0),ss=h([me("esri.widgets.Feature")],ss);const eRe=ss;var One;const m5=Symbol("anchorHandles");let hy=class extends im.EventedAccessor{constructor(e){super(e),this[One]=new es,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[m5].add([Qa(()=>qc(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),it(()=>this.screenLocation,(t,r)=>{de(t)&&de(r)&&this.emit("view-change")})])}destroy(){this.view=null,this[m5]=La(this[m5])}get screenLocation(){const{location:e,view:t,screenLocationEnabled:r}=this;return r&&de(e)&&de(t)&&t.ready?t.toScreen(e):null}};One=m5,h([f()],hy.prototype,"location",void 0),h([f()],hy.prototype,"screenLocation",null),h([f()],hy.prototype,"screenLocationEnabled",void 0),h([f()],hy.prototype,"view",void 0),hy=h([me("esri.widgets.support.AnchorElementViewModel")],hy);const Rne=hy,tRe="esri.widgets.CompassViewModel";let y5=class extends Rne{constructor(e){super(e),this.visible=!1}};h([f()],y5.prototype,"visible",void 0),y5=h([me(tRe)],y5);const Pne=y5,qC={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let py=class extends bs{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new Pne,this.visible=!1}initialize(){this.own([it(()=>this.visible,e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:r}=e;t&&(this.viewModel.location=t),this.visible=!0;const i=()=>this.hide();r&&r.catch(()=>{}).then(i)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,r=!!t,i=e&&r,n=!e&&r,s={[qC.spinnerStart]:i,[qC.spinnerFinish]:n},o=this._getPositionStyles();return je("div",{class:this.classes(qC.base,s),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=YL(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(Ne(t)||Ne(e))return{};const{padding:r}=t;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};h([It("viewModel.location")],py.prototype,"location",void 0),h([It("viewModel.view")],py.prototype,"view",void 0),h([f({type:Pne})],py.prototype,"viewModel",void 0),h([It("viewModel.visible")],py.prototype,"visible",void 0),py=h([me("esri.widgets.Spinner")],py);const rRe=py;var BG;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(BG||(BG={}));function Lne(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function iRe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function nRe(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function sRe(e,t){return new Float32Array(e,t,6)}function Nne(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function oRe(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)Nne(e,t,r,a*s)}Object.freeze(Object.defineProperty({__proto__:null,create:Lne,clone:iRe,fromValues:nRe,createView:sRe,transform:Nne,transformMany:oRe},Symbol.toStringTag,{value:"Module"}));function aRe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function lRe(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function uRe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function LD(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-i*n;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*o)*l,e[5]=(i*o-r*a)*l,e):null}function cRe(e){return e[0]*e[3]-e[1]*e[2]}function Dne(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1],p=r[2],d=r[3],m=r[4],g=r[5];return e[0]=i*u+s*c,e[1]=n*u+o*c,e[2]=i*p+s*d,e[3]=n*p+o*d,e[4]=i*m+s*g+a,e[5]=n*m+o*g+l,e}function K4(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=i*c+s*u,e[1]=n*c+o*u,e[2]=i*-u+s*c,e[3]=n*-u+o*c,e[4]=a,e[5]=l,e}function ND(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i*u,e[1]=n*u,e[2]=s*c,e[3]=o*c,e[4]=a,e[5]=l,e}function dx(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*u+s*c+a,e[5]=n*u+o*c+l,e}function Fne(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function jne(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function DD(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function hRe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function pRe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function dRe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function Une(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function fRe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function mRe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function yRe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function gRe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],u=t[1],c=t[2],p=t[3],d=t[4],m=t[5];return Math.abs(r-l)<=Qt*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-u)<=Qt*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-c)<=Qt*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(s-p)<=Qt*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-d)<=Qt*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-m)<=Qt*Math.max(1,Math.abs(a),Math.abs(m))}const vRe=Dne,bRe=Une;Object.freeze(Object.defineProperty({__proto__:null,copy:aRe,identity:lRe,set:uRe,invert:LD,determinant:cRe,multiply:Dne,rotate:K4,scale:ND,translate:dx,fromRotation:Fne,fromScaling:jne,fromTranslation:DD,str:hRe,frob:pRe,add:dRe,subtract:Une,multiplyScalar:fRe,multiplyScalarAndAdd:mRe,exactEquals:yRe,equals:gRe,mul:vRe,sub:bRe},Symbol.toStringTag,{value:"Module"}));const zG=We("android");We("chrome")||zG&&zG>=4;rP();function Vne(e){return e&&"opacity"in e?e.opacity*Vne(e.parent):1}async function wRe(e,t){if(!e)return;const r=e.sourceLayer,i=(de(t)&&t.useSourceLayer?r:e.layer)??r,n=Vne(i);if(de(e.symbol)&&(!de(t)||t.ignoreGraphicSymbol!==!0)){const v=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,cache:de(t)?t.webStyleCache:null}):e.symbol.clone();return rC(v,null,n),v}const s=de(t)&&t.renderer||i&&"renderer"in i&&i.renderer;let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...t,cache:de(t)?t.webStyleCache:null}):o.clone(),!("visualVariables"in s)||!s.visualVariables||!s.visualVariables.length)return rC(o,null,n),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(Ne(t)||Ne(t.arcade))){const v={...t};v.arcade=await $p(),t=v}const a=await Be(()=>Promise.resolve().then(function(){return YN}),void 0),l=[],u=[],c=[],p=[];for(const v of s.visualVariables)switch(v.type){case"color":l.push(v);break;case"opacity":u.push(v);break;case"rotation":p.push(v);break;case"size":v.target||c.push(v)}const d=!!l.length&&l[l.length-1],m=d?a.getColor(d,e,t):null,g=!!u.length&&u[u.length-1];let b=g?a.getOpacity(g,e,t):null;if(n!=null&&(b=b!=null?b*n:n),rC(o,m,b),c.length){const v=a.getAllSizes(c,e,t);await Lee(o,v)}for(const v of p)Nee(o,a.getRotationAngle(v,e,t),v.axis);return o}class _Re{constructor(t,r){this.owner=r,this.properties={},this.afterDispatchHandle=null;for(const i in t){const n=t[i],s=new LZ(n,null,null,2,2);this.properties[i]={pool:s,acquired:[]}}this.afterDispatchHandle=Qde(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const t in this.properties){const r=this.properties[t];for(const i of r.acquired)Fj(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this.properties=null,this.owner=null}get(t){const r=this.owner._get(t),i=this.properties[t];let n=i.pool.acquire();for(i.acquired.push(n);n===r;)i.acquired.push(n),n=i.pool.acquire();return n}_release(){for(const t in this.properties){const r=this.properties[t];let i=0;for(const n of r.acquired)Fj(n)?r.acquired[i++]=n:r.pool.release(n);r.acquired.length=i}}}const xRe=We("mac")?"Meta":"Ctrl",Y4={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)Y4[e]=String.fromCharCode(e);for(let e=1;e<25;e++)Y4[111+e]=`F${e}`;for(let e=65;e<91;e++)Y4[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function SRe(e){if(e.key!==void 0)return _y(e);const t=Y4[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function ERe(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class MRe{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}}const GG=ot.getLogger("esri.views.input.InputHandler");class ts{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?GG.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new MRe(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=c=>{const p=this._incoming[c.match.eventType];if(p){const d=p.indexOf(c);p.splice(d,1),o(),this._manager&&this._manager.updateDependencies()}},l=new IRe(s,i,{onPause:a,onRemove:a,onResume:c=>{const p=this._incoming[c.match.eventType];p&&!p.includes(c)&&(p.push(c),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new TRe(t,{onEmit:(i,n,s,o)=>{this._manager.emit(i.eventType,n,s,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):GG.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&(i.callback(t),t.shouldStopPropagation()))break}}}class IRe{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class TRe{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class ARe extends ts{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{const i=r.data.native.pointerType==="touch";this._setValue(i?"touch":"mouse",r.data.x,r.data.y)})}_setValue(t,r,i){t===this._value&&this._x===r&&this._y===i||(this._value=t,this._x=r,this._y=i,this._onChange(t,r,i))}}const HC=ot.getLogger("esri.views.input.InputManager");let Ud=class extends kt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=xRe,this.latestPointerType="mouse",this._propertiesPool=new _Re({latestPointerLocation:CRe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,r=If.INTERNAL){if(this._nameToGroup[e])return void HC.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void HC.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let n=i.handlers.length-1;n>=0;n--){const s=i.handlers[n];this._handlers.push(s),s.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,u,c)=>{this._emitInputEvent(s.priorityIndex+1,o,a,l,c,u)},setPointerCapture:(o,a)=>{this._setPointerCapture(i,s,o,a)},setEventCallback:o=>{s.eventCallback=o},setUninstallCallback:o=>{s.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):HC.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n){for(const s of i.handler.outgoingEventTypes)if(e.has(s)){n=!0;break}}if(n)for(const s of i.handler.incomingEventMatches){e.add(s.eventType);for(const o of s.keyModifiers)ERe(o)||t.add(o)}i.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,r){this._get("latestPointerType")!==e&&this._set("latestPointerType",e);const i=this._get("latestPointerLocation");if(Ne(i)||i.x!==t||i.y!==r){const n=this._propertiesPool.get("latestPointerLocation");n.x=t,n.y=r,this._set("latestPointerLocation",n)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const r=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,r=!0}},n=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(i(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(i(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new ARe((e,t,r)=>this._setLatestPointer(e,t,r)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],If.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,If.INTERNAL)}_setPointerCapture(e,t,r,i){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),s.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),s.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i)}_emitInputEvent(e,t,r,i,n,s){const o=i!==void 0?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,l={event:new $Re(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new yI,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new yI;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of t.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const n=r.keyModifiers.filter(s=>i.keyModifiers.includes(s));if(n.length===r.keyModifiers.length!=(n.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let i=0;for(;i<t.length&&this._compareHandlerPriority(r,t[i])>=0;)i++;t.splice(i,0,r)}return t}get debug(){const e=t=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=r};return{injectEvent:(t,r)=>{e(()=>{this._onEventReceived(t,r)})},disablePointerCapture:e}}};h([f({readOnly:!0})],Ud.prototype,"hasPendingInputs",null),h([f()],Ud.prototype,"eventSource",void 0),h([f()],Ud.prototype,"recognizers",void 0),h([f({readOnly:!0})],Ud.prototype,"latestPointerType",void 0),h([f({readOnly:!0})],Ud.prototype,"latestPointerLocation",void 0),Ud=h([me("esri.views.input.InputManager")],Ud);class $Re{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=tf.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=tf.STOPPED}shouldStopPropagation(){return(this._propagationState&tf.STOPPED)!=0}async(t){this._propagationState|=tf.PAUSED;const r=(i,n)=>{this._propagationState&=~tf.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&tf.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}var tf;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(tf||(tf={}));const If={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class CRe{}function qG(e){return e&&typeof e.highlight=="function"}const Q4={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Zy=new hb({id:"zoom-to-feature",title:"{messages.zoom}",className:Q4.iconZoom}),HG=new hb({id:"remove-selected-feature",title:"{messages.remove}",className:Q4.iconTrash}),D1=new hb({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Q4.iconZoom}),F1=new hb({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:Q4.iconBrowseClusteredFeatures}),kRe="esri.widgets.Popup.PopupViewModel",WI=ot.getLogger(kRe),ORe=e=>{const{event:t,view:r}=e,{action:i}=t,n=r&&r.popup;if(!i)return Promise.reject(new $e("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new $e("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=i;if(!o)return Promise.reject(new $e("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new $e("trigger-action:invalid-action","Action is disabled"));if(o===Zy.id)return PRe(n.viewModel).catch(Yk);if(o===D1.id)return LRe(n.viewModel);if(o===F1.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===HG.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new $e(`trigger-action:${HG.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):r.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Bne(e){const{selectedFeature:t,location:r,view:i}=e;return i?i.type==="3d"?t||r:e.get("selectedFeature.geometry")||r:null}function Cy(e){return e?.isAggregate&&e?.sourceLayer?.featureReduction?.type==="cluster"}function RRe(e,t){if(t?.type!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const r=t.getViewForGraphic(e);if(r&&"whenGraphicBounds"in r){let i=!1;return r.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{i=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new $e("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});WI.error(n)}),i}return!0}async function PRe(e){const{location:t,selectedFeature:r,view:i,zoomFactor:n}=e,s=Bne(e);if(!s){const u=new $e("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:i});throw WI.error(u),u}const o=i.scale/n,a=e.get("selectedFeature.geometry")||t,l=a&&a.type==="point"&&RRe(r,i);Zy.active=!0,Zy.disabled=!0;try{await e.view.goTo({target:s,scale:l?o:void 0})}finally{Zy.active=!1,Zy.disabled=!1,e.zoomToLocation=null,l&&(e.location=a)}}async function LRe(e){const{selectedFeature:t,view:r}=e;if(r?.type!=="2d"){const a=new $e("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r});throw WI.error(a),a}if(!Cy(t)){const a=new $e("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw WI.error(a),a}const i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],D1.active=!0,D1.disabled=!0;const{extent:o}=await n.queryExtent(s);await r.goTo({target:o}),D1.active=!1,D1.disabled=!1}async function NRe(e){const{selectedFeature:t,view:r}=e,i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()];const{extent:o}=await n.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=o,r.graphics.add(e.selectedClusterBoundaryFeature)}async function DRe(e){const{selectedFeature:t,view:r}=e,i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],F1.active=!0,F1.disabled=!0;const{features:o}=await n.queryFeatures(s);F1.active=!1,F1.disabled=!1,r.popup.open({features:[t].concat(o),featureMenuOpen:!0})}function FRe(e){const t=e.features.filter(r=>Cy(r));t.length&&(e.features=t)}const zne=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return h([f()],t.prototype,"goToOverride",void 0),h([f()],t.prototype,"view",void 0),t=h([me("esri.widgets.support.GoTo")],t),t},y2=Lt.ofType({key:"type",defaultKeyValue:"button",base:s4,typeMap:{button:hb,toggle:tQ}}),jRe=()=>[Zy.clone()],URe=()=>[D1.clone(),F1.clone()],Gne="esri.widgets.Popup.PopupViewModel",pE=ot.getLogger(Gne);let gr=class extends zne(Rne){constructor(e){super(e),this._handles=new es,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new y2,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new fs({symbol:new Vp({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([it(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),it(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),it(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),it(()=>this.view?.animation?.state,e=>this._animationStateChange(e)),it(()=>this.location,e=>this._locationChange(e)),it(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),it(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),it(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),it(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>ORe({event:e,view:this.view})),Qa(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Bf),it(()=>[this.features,this.view?.map,this.view?.spatialReference],()=>this._updateFeatureVMs()),it(()=>this.view?.scale,()=>this._viewScaleChange()),Qa(()=>!this.visible,()=>this.browseClusterEnabled=!1),it(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new y2;e.removeAll();const{actions:t,defaultActions:r,defaultPopupTemplateEnabled:i,includeDefaultActions:n,selectedFeature:s}=this,o=n?r.concat(t):t,a=s&&(typeof s.getEffectivePopupTemplate=="function"&&s.getEffectivePopupTemplate(i)||s.popupTemplate),l=a&&a.actions,u=a&&a.overwriteActions?l:l?l.concat(o):o;return u&&u.filter(Boolean).forEach(c=>e.add(c)),e}get defaultActions(){const e=this._get("defaultActions")||new y2;return e.removeAll(),e.addMany(Cy(this.selectedFeature)?URe():jRe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:r,promiseCount:i,selectedFeatureIndex:n}=this,s=i&&t.length;s&&r&&n===-1?this.selectedFeatureIndex=0:s&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=wf(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const r=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},i=()=>this._updatePendingPromises(t);t.then(r,i)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=Bne(this);if(!t){const r=new $e("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return pE.error(r),Promise.reject(r)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:r}=this;if(!r||!e){const i=new $e("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return pE.error(i),Promise.reject(i)}return r.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=t;delete t.fetchFeatures,r&&this._setFetchFeaturesPromises(t.location);const i=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const n of i)delete t[n];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){FRe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;e?.type==="2d"?Cy(t)?(await NRe(this),await DRe(this)):pE.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):pE.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Zy.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){const e=this.view?.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Cy(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:r}=this;r&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:r,featuresPerPage:i,featureViewModels:n}=this;if(r===null)return;const s=((r-1)*i+t)%t,o=s+i;n.slice(s,o).forEach((a,l)=>{a&&!a.graphic&&(a.graphic=e[s+l])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:r,view:i}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Cy(e)?void 0:(e.symbol=await wRe(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature));!r&&t||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=i.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:r,promisesPerLayerView:i}=t,n=Promise.resolve(r),s=i.map(o=>o.promise);this.promises=[n,...s]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:r}=this;if(Cy(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const i=r.slice(0),n=[];t.forEach((s,o)=>{if(!s)return;let a=null;if(i.some((l,u)=>(l&&l.graphic===s&&(a=l,i.splice(u,1)),!!a)),a)n[o]=a;else{const l=new PD({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:s===e?s:null,map:this.view?.map,view:this.view});n[o]=l}}),i.forEach(s=>s&&!s.destroyed&&s.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:r}=this;if(t.remove(e),r&&this.view){const i=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},If.WIDGET);t.add(i,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const r=new AbortController,{signal:i}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:i,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:r}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:s,promisesPerLayerView:o,location:a}=n,l=[Promise.resolve(s),...o.map(u=>u.promise)];return i.popup.open({location:a||r,promises:l}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return Ne(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:r}=e;return r?.type==="map-notes"||r?.type==="subtype-group"?r:t}_getHighlightTarget(e,t){const r=t.type==="imagery"?void 0:"objectIdField"in t&&t.objectIdField,i=e.attributes;return i&&r&&i[r]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:r,activeFeature:i,visible:n}=this;if(!(i&&r&&t&&n))return;const s=this._getHighlightLayer(i);if(!(s&&s instanceof uh))return;const o=this._getLayerView(r,s);this._highlightActiveFeaturePromise=o;const a=await o;if(!(a&&qG(a)&&this._highlightActiveFeaturePromise===o&&this.activeFeature&&this.highlightEnabled))return;const l=a.highlight(this._getHighlightTarget(i,s));this._handles.add(l,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:r,view:i,visible:n}=this;if(!(t&&i&&r&&n))return;const s=this._getHighlightLayer(t);if(!(s&&s instanceof uh))return;const o=this._getLayerView(i,s);this._highlightSelectedFeaturePromise=o;const a=await o;if(!(a&&qG(a)&&this._highlightSelectedFeaturePromise===o&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const l=a.highlight(this._getHighlightTarget(t,s));this._handles.add(l,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const r=e.filter(i=>!t.includes(i));this.features=t.concat(r)}};h([f()],gr.prototype,"featurePage",void 0),h([f()],gr.prototype,"isLoadingFeature",null),h([f({type:y2})],gr.prototype,"actions",void 0),h([f({readOnly:!0})],gr.prototype,"active",null),h([f()],gr.prototype,"activeFeature",void 0),h([f({readOnly:!0})],gr.prototype,"allActions",null),h([f({type:Boolean})],gr.prototype,"defaultPopupTemplateEnabled",void 0),h([f()],gr.prototype,"autoCloseEnabled",void 0),h([f()],gr.prototype,"autoOpenEnabled",void 0),h([f()],gr.prototype,"browseClusterEnabled",void 0),h([f()],gr.prototype,"content",void 0),h([f({type:y2,readOnly:!0})],gr.prototype,"defaultActions",null),h([f({readOnly:!0})],gr.prototype,"featureCount",null),h([f()],gr.prototype,"features",null),h([f()],gr.prototype,"featuresPerPage",void 0),h([f()],gr.prototype,"featureViewModelAbilities",void 0),h([f({readOnly:!0})],gr.prototype,"featureViewModels",void 0),h([f()],gr.prototype,"highlightEnabled",void 0),h([f()],gr.prototype,"includeDefaultActions",void 0),h([f({type:At})],gr.prototype,"location",null),h([f({readOnly:!0})],gr.prototype,"pendingPromisesCount",null),h([f({readOnly:!0})],gr.prototype,"selectedClusterBoundaryFeature",void 0),h([f({readOnly:!0})],gr.prototype,"waitingForResult",null),h([f({readOnly:!0})],gr.prototype,"promiseCount",null),h([f()],gr.prototype,"promises",null),h([f({value:null,readOnly:!0})],gr.prototype,"selectedFeature",null),h([f({value:-1})],gr.prototype,"selectedFeatureIndex",null),h([f({readOnly:!0})],gr.prototype,"selectedFeatureViewModel",null),h([f({readOnly:!0})],gr.prototype,"state",null),h([f()],gr.prototype,"title",void 0),h([f()],gr.prototype,"updateLocationEnabled",void 0),h([f()],gr.prototype,"view",void 0),h([f()],gr.prototype,"visible",void 0),h([f()],gr.prototype,"zoomFactor",void 0),h([f()],gr.prototype,"zoomToLocation",void 0),h([f()],gr.prototype,"centerAtLocation",null),gr=h([me(Gne)],gr);const qne=gr,WG="selected-index",VRe=0,JG="popup-spinner",nt={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},ZG={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},KG="esri-popup";function Eh(e,t){return t===void 0?`${KG}__${e}`:`${KG}__${e}-${t}`}const Hne="esri.widgets.Popup",YG=ot.getLogger(Hne),QG={closeButton:!0,featureNavigation:!0};let jt=class extends kne(bs){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new es,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([r])=>{r?.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=aD(()=>this._displaySpinner(),VRe),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new qne,this.visible=null,this.visibleElements={...QG},this._addSelectedFeatureIndexHandle(),this.own([it(()=>this.viewModel?.screenLocation,()=>this._positionContainer()),it(()=>[this.viewModel?.active,this.dockEnabled],()=>this._toggleScreenLocationEnabled()),it(()=>this.viewModel?.screenLocation,(r,i)=>{!!r!=!!i&&this.reposition()}),it(()=>[this.viewModel?.view?.padding,this.viewModel?.view?.size,this.viewModel?.active,this.viewModel?.location,this.alignment],()=>this.reposition()),it(()=>this.spinnerEnabled,r=>this._spinnerEnabledChange(r)),it(()=>this.viewModel?.view?.size,(r,i)=>this._updateDockEnabledForViewSize(r,i)),it(()=>this.viewModel?.view,(r,i)=>this._viewChange(r,i)),it(()=>this.viewModel?.view?.ready,(r,i)=>this._viewReadyChange(r,i)),it(()=>[this.viewModel?.waitingForResult,this.viewModel?.location],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),it(()=>[this.selectedFeatureWidget?.viewModel?.title,this.selectedFeatureWidget?.viewModel?.state],()=>this._setTitleFromFeatureWidget()),it(()=>[this.selectedFeatureWidget?.viewModel?.content,this.selectedFeatureWidget?.viewModel?.state],()=>this._setContentFromFeatureWidget()),Qa(()=>!this.collapsed,()=>{this.viewModel?.view?.widthBreakpoint==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),kp(()=>this.viewModel?.allActions,"change",()=>this._watchActions()),it(()=>this.viewModel?.allActions,()=>this._watchActions(),Br),it(()=>this.viewModel?.featureViewModels,()=>this._featureMenuViewportScrollTop())])}destroy(){this._destroySelectedFeatureWidget(),this._destroySpinner(),this._handles?.destroy(),this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver?.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){return!!(this.selectedFeatureWidget?this.selectedFeatureWidget?.viewModel?.waitingForContent||this.selectedFeatureWidget?.viewModel?.state==="error"||this.selectedFeatureWidget?.viewModel?.content:this.viewModel?.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||ZG}set dockOptions(e){const t={...ZG},r=this.get("viewModel.view.breakpoints"),i={};r&&(i.width=r.xsmall,i.height=r.xsmall);const n={...t,...e},s={...t.breakpoint,...i},{breakpoint:o}=n;o===!0?n.breakpoint=s:typeof o=="object"&&(n.breakpoint={...s,...o}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:r}=this,{selectedFeatureViewModel:i}=this.viewModel,n={...t,title:!1};return i?(e?(e.viewModel=i,e.visibleElements=n):this._feature=new eRe({headingLevel:r+1,viewModel:i,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...QG,...e}}blur(){const{active:e}=this.viewModel;e||YG.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||YG.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){this._handles.remove(WG);const t=!!e&&!!e.featureMenuOpen,r=!!e&&!!e.actionsMenuOpen,i={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:r,featureMenuOpen:t};this.viewModel?.view?.widthBreakpoint==="xsmall"&&(i.collapsed=!0),this.set(i),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:r,dividedActions:i,currentAlignment:n,currentDockPosition:s}=this,{active:o}=this.viewModel,{menuActions:a}=i,l=o&&a.length>1&&e,u=o&&t,c=o&&!t,p=this.selectedFeature?.layer?.title,d=this.selectedFeature?.layer?.id,m={[nt.alignTopCenter]:n==="top-center",[nt.alignBottomCenter]:n==="bottom-center",[nt.alignTopLeft]:n==="top-left",[nt.alignBottomLeft]:n==="bottom-left",[nt.alignTopRight]:n==="top-right",[nt.alignBottomRight]:n==="bottom-right",[nt.isDocked]:u,[nt.shadow]:c,[nt.isDockedTopLeft]:s==="top-left",[nt.isDockedTopCenter]:s==="top-center",[nt.isDockedTopRight]:s==="top-right",[nt.isDockedBottomLeft]:s==="bottom-left",[nt.isDockedBottomCenter]:s==="bottom-center",[nt.isDockedBottomRight]:s==="bottom-right",[nt.isFeatureMenuOpen]:r,[nt.isActionsMenuOpen]:l};return je("div",{class:this.classes(nt.base,m),role:"presentation","data-layer-title":p,"data-layer-id":d,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},o?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return je("span",{"aria-hidden":"true",class:this.classes(nt.icon,nt.iconLoading,nt.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?je("div",{key:Eh("loading-container"),role:"presentation",class:nt.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=df(this.container),t={[nt.iconRightTriangleArrow]:e,[nt.paginationPreviousIconRTL]:e,[nt.iconLeftTriangleArrow]:!e,[nt.paginationPreviousIconLTR]:!e};return je("span",{"aria-hidden":"true",class:this.classes(nt.icon,t)})}renderPreviousButton(){const{messages:e}=this;return je("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(nt.button,nt.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=df(this.container),t={[nt.iconLeftTriangleArrow]:e,[nt.paginationNextIconRTL]:e,[nt.iconRightTriangleArrow]:!e,[nt.paginationNextIconLTR]:!e};return je("span",{"aria-hidden":"true",class:this.classes(nt.icon,t)})}renderNextButton(){const{messages:e}=this;return je("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(nt.button,nt.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:r}=this,{featureCount:i,selectedFeatureIndex:n}=this.viewModel;return je("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(nt.button,nt.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(i,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),r={[nt.iconUndock]:e,[nt.iconDock]:!e,[nt.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[nt.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[nt.iconDockToTop]:!e&&t==="top-center",[nt.iconDockToBottom]:!e&&t==="bottom-center"};return je("span",{"aria-hidden":"true",class:this.classes(r,nt.icon)})}renderDockButton(){const{dockEnabled:e,messages:t}=this,r=this.viewModel?.view?.widthBreakpoint,i=e?t.undock:t.dock;return r!=="xsmall"&&this.dockOptions?.buttonEnabled?je("div",{role:"button","aria-label":i,title:i,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(nt.button,nt.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:r,contentCollapsed:i,messagesCommon:n}=this,s={[nt.headerContainerButton]:r},o=je(z4,{level:this.headingLevel,class:nt.headerTitle,innerHTML:e}),a=r?je("button",{key:`${e}--collapsible`,id:t,title:i?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(nt.headerContainer,s),"aria-expanded":i?"false":"true",onclick:this._toggleCollapsed,type:"button"},o):je("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(nt.headerContainer,s)},o);return e?a:null}renderCloseIcon(){return je("span",{"aria-hidden":"true",class:this.classes(nt.icon,nt.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?je("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:nt.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return je("header",{class:nt.header},this.renderTitle(),je("div",{class:nt.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:r}=this,{content:i}=this.viewModel;return t&&!r?je("article",{key:i,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:nt.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i,messagesCommon:n}=this,s=r?n.close:n.open,{menuActions:o}=i;return o.length?je("div",{key:Eh("actions-menu-button"),class:this.classes(nt.button,nt.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},je("span",{"aria-hidden":"true",class:nt.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i}=this,{menuActions:n}=i;return n.length&&r?je("ul",{id:e,role:"menu","aria-labelledby":t,key:Eh("actions"),class:nt.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(s=>this.renderAction({action:s,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,r=!!e.length,i=!!t.length;return r||i?je("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:nt.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?je("section",{key:Eh("navigation"),class:this.classes(nt.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:r,menuActions:i}=t,n=!!r.length,s=!!i.length,o={[nt.footerHasPagination]:e,[nt.footerHasActions]:n,[nt.footerHasActionsMenu]:s};return e||n?je("div",{key:Eh("feature-buttons"),class:this.classes(nt.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:r}=this.viewModel,i=Uh(e.selectedFeatures,{total:t.length});return je("section",{key:Eh("menu"),class:nt.featureMenu},je("strong",{class:nt.featureMenuHeader},i),je("nav",{bind:this,class:nt.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Q8},this.renderFeatureMenu(),je("div",{class:nt.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?je("div",{class:nt.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:je("div",{key:Eh("pointer"),class:nt.pointer,role:"presentation"},je("div",{class:this.classes(nt.pointerDirection,nt.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:r,titleId:i,contentId:n,collapsible:s,hasContent:o,contentCollapsed:a,visibleElements:l}=this,{title:u}=this.viewModel,c=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",p=t==="top-left"||t==="top-center"||t==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",d={[nt.shadow]:e,[nt.isCollapsible]:s,[nt.isCollapsed]:a};return je("div",{class:this.classes(nt.main,nt.widget,d),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?i:"","aria-describedby":o&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},c?this.renderFooter():null,c?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null)}renderContent(){const e=this.viewModel?.content;return e?typeof e=="string"?je("div",{key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return je("span",{key:"text",class:nt.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),r=this._getActionImage(e),i={[nt.iconLoading]:e.active,[nt.rotating]:e.active,[nt.icon]:!!t,[nt.actionImage]:!e.active&&!!r};return t&&(i[t]=!e.active),je("span",{key:"icon","aria-hidden":"true",class:this.classes(nt.icon,i),styles:this._getIconStyles(r)})}renderAction(e){const{action:t,type:r}=e,i=this._getActionTitle(t),n={[nt.action]:t.type!=="toggle",[nt.actionToggle]:t.type==="toggle",[nt.actionToggleOn]:t.type==="toggle"&&t.value,[nt.buttonDisabled]:t.disabled},s=[this.renderActionIcon(t),this.renderActionText(i)],o=r==="menu-item"?je("li",{key:t.uid,role:"menuitem",tabIndex:0,title:i,"aria-label":i,class:this.classes(nt.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):je("div",{key:t.uid,role:"button",tabIndex:0,title:i,"aria-label":i,class:this.classes(nt.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return t.visible?o:null}renderFeatureMenuItem(e,t){const{messages:r,messagesCommon:i}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,o=e===s,a={[nt.featureMenuSelected]:o},l=o?je("span",{key:Eh(`feature-menu-selected-feature-${n}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:nt.iconCheckMark}):null,u=je("span",{innerHTML:e.title||i.untitled});return je("li",{role:"menuitem",tabIndex:-1,key:Eh(`feature-menu-feature-${n}`),class:this.classes(a,nt.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},je("span",{class:nt.featureMenuTitle},u,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?je("ol",{class:nt.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(r=>!!r.graphic).map((r,i)=>this.renderFeatureMenuItem(r,i))):null}_getActionTitle(e){const{messages:t,selectedFeature:r,messagesCommon:i}=this,{id:n}=e,s=r?.attributes,o=n==="zoom-to-feature"?Uh(e.title,{messages:t}):n==="remove-selected-feature"?Uh(e.title,{messages:i}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?Uh(e.title,{messages:t}):e.title;return o&&s?Uh(o,s):o}_getActionClass(e){const{selectedFeature:t}=this,r=t?.attributes,{className:i,image:n}=e,s=n||i?i:nt.iconDefaultAction;return s&&r?Uh(s,r):s}_getActionImage(e){const{selectedFeature:t}=this,r=t?.attributes,{image:i}=e;return i&&r?Uh(i,r):i}_createFeatureUpdatedAnimation(){return QTe("enter",nt.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const r=Math.round(e);return Math.max(t?r-1:r,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(r=>{this._handles.add(it(()=>[r.uid,r.active,r.className,r.disabled,r.id,r.title,r.image,r.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(s=>s.visible),r=this._getInlineActionCount(),i=r===null,n=r===0;return{inlineActions:i?t.slice(0):n?new Lt:t.slice(0,r),menuActions:i?new Lt:n?t.slice(0):t.slice(r)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=e.viewModel?.state==="error"?t.errorMessage:e.viewModel?.title||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){_y(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){_y(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,r=e.currentTarget["data-feature-index"];t.activeFeature=t.features[r]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=_y(e),{_featureMenuNode:r}=this,i=e.currentTarget["data-feature-index"];if(!r)return;const n=r.querySelectorAll("li"),s=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(i+1+s)%s].focus()):(e.stopPropagation(),n[(i-1+s)%s].focus())}_handleActionMenuItemKeyup(e){const t=_y(e),{_actionsMenuNode:r}=this,i=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,s=n.findIndex(l=>l.uid===i);if(!r)return;const o=r.querySelectorAll("li"),a=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(s+1+a)%a].focus()):(e.stopPropagation(),o[(s-1+a)%a].focus())}_handleMainKeyup(e){const t=_y(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:r}=this.viewModel;r?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e.shouldFocus&&(await x4(()=>this.viewModel?.active===!0),this.focus())}_addSelectedFeatureIndexHandle(){const e=it(()=>this.viewModel?.selectedFeatureIndex,(t,r)=>this._selectedFeatureIndexUpdated(t,r));this._handles.add(e,WG)}_selectedFeatureIndexUpdated(e,t){const{featureCount:r}=this;r&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:r,screenLocation:i,side:n,view:s}=e;if(isNaN(r)||isNaN(t)||!s||!i)return!1;const o=s.padding;return n==="right"&&i.x+r/2>s.width-o.right||n==="left"&&i.x-r/2<o.left||n==="top"&&i.y-t<o.top||n==="bottom"&&i.y+t>s.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:r,_mainContainerNode:i,viewModel:n}=this,{screenLocation:s,view:o}=n;if(Ne(s)||!o||!r)return"top-center";if(!this._isScreenLocationWithinView(s,o))return this._get("currentAlignment")||"top-center";function a(I){return parseInt(I.replace(/[^-\d\.]/g,""),10)}const l=i?window.getComputedStyle(i,null):null,u=l?a(l.getPropertyValue("max-height")):0,c=l?a(l.getPropertyValue("height")):0,{height:p,width:d}=r.getBoundingClientRect(),m=d+t,g=Math.max(p,u,c)+t,b=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"right",view:o}),v=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"left",view:o}),_=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"top",view:o}),E=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"bottom",view:o});return v?_?"bottom-right":"top-right":b?_?"bottom-left":"top-left":_?E?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return df(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){if(e!=="auto")return e;const t=this.viewModel?.view,r=df(this.container)?"top-left":"top-right";if(!t)return r;const i=t.padding||{left:0,right:0,top:0,bottom:0},n=t.width-i.left-i.right,{breakpoints:s}=t;return s&&n<=s.xsmall?"bottom-center":r}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:r}=e.getBoundingClientRect(),i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:r}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,t,r,i){const{currentAlignment:n,_pointerOffsetInPx:s}=this,o=i/2,a=r.height-t,l=r.width-e,{padding:u}=this.view;return n==="bottom-center"?{top:t+s-u.top,left:e-o-u.left}:n==="top-left"?{bottom:a+s-u.bottom,right:l+s-u.right}:n==="bottom-left"?{top:t+s-u.top,right:l+s-u.right}:n==="top-right"?{bottom:a+s-u.bottom,left:e+s-u.left}:n==="bottom-right"?{top:t+s-u.top,left:e+s-u.left}:n==="top-center"?{bottom:a+s-u.bottom,left:e-o-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:r,view:i}=this;if(!i)return;if(r)return{left:"",top:"",right:"",bottom:""};if(Ne(e)||!t)return;const n=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,i,n);return s?{top:s.top!==void 0?`${s.top}px`:"auto",left:s.left!==void 0?`${s.left}px`:"auto",bottom:s.bottom!==void 0?`${s.bottom}px`:"auto",right:s.right!==void 0?`${s.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const r=this.get("viewModel.view");this._wireUpView(r)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,r){const[i,n]=e,[s,o]=t,{width:a,height:l}=r;return i<=a&&s>a||i>a&&s<=a||n<=l&&o>l||n>l&&o<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},i=r.left+r.right,n=r.top+r.bottom,s=[],o=[];s[0]=e[0]-i,s[1]=e[1]-n,o[0]=t[0]-i,o[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,o,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const r=t.active&&!e;t.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){const t=e.breakpoint,r=this.viewModel?.view?.ui;if(!r)return!1;const{width:i,height:n}=r;if(isNaN(i)||isNaN(n))return!1;const s=t.hasOwnProperty("width")&&i<=t.width,o=t.hasOwnProperty("height")&&n<=t.height;return s||o}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Uh(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,JG),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new rRe({view:e}),e.ui.add(this._spinner,{key:JG,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,i=r.findIndex(s=>s.uid===t),n=r.getItemAt(i);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(i)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};h([f({readOnly:!0})],jt.prototype,"actionsMenuId",null),h([f({readOnly:!0})],jt.prototype,"actionsMenuButtonId",null),h([f({readOnly:!0})],jt.prototype,"featureMenuId",null),h([f({readOnly:!0})],jt.prototype,"titleId",null),h([f({readOnly:!0})],jt.prototype,"contentId",null),h([f({readOnly:!0})],jt.prototype,"hasContent",null),h([f({readOnly:!0})],jt.prototype,"featureNavigationVisible",null),h([f({readOnly:!0})],jt.prototype,"collapsible",null),h([f({readOnly:!0})],jt.prototype,"featureMenuVisible",null),h([f({readOnly:!0})],jt.prototype,"contentCollapsed",null),h([f({readOnly:!0})],jt.prototype,"dividedActions",null),h([It("viewModel.actions")],jt.prototype,"actions",void 0),h([f()],jt.prototype,"actionsMenuOpen",null),h([f()],jt.prototype,"alignment",void 0),h([It("viewModel.autoCloseEnabled")],jt.prototype,"autoCloseEnabled",void 0),h([It("viewModel.autoOpenEnabled")],jt.prototype,"autoOpenEnabled",void 0),h([It("viewModel.defaultPopupTemplateEnabled")],jt.prototype,"defaultPopupTemplateEnabled",void 0),h([It("viewModel.content")],jt.prototype,"content",void 0),h([f()],jt.prototype,"collapsed",void 0),h([f()],jt.prototype,"collapseEnabled",void 0),h([f({readOnly:!0})],jt.prototype,"currentAlignment",null),h([f({readOnly:!0})],jt.prototype,"currentDockPosition",null),h([f()],jt.prototype,"dockOptions",null),h([f()],jt.prototype,"dockEnabled",void 0),h([It("viewModel.featureCount")],jt.prototype,"featureCount",void 0),h([f()],jt.prototype,"featureMenuOpen",void 0),h([It("viewModel.features")],jt.prototype,"features",void 0),h([It("viewModel.goToOverride")],jt.prototype,"goToOverride",void 0),h([f()],jt.prototype,"headingLevel",void 0),h([It("viewModel.highlightEnabled")],jt.prototype,"highlightEnabled",void 0),h([It("viewModel.location")],jt.prototype,"location",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],jt.prototype,"label",void 0),h([f()],jt.prototype,"maxInlineActions",void 0),h([f(),Vs("esri/widgets/Popup/t9n/Popup")],jt.prototype,"messages",void 0),h([f(),Vs("esri/t9n/common")],jt.prototype,"messagesCommon",void 0),h([It("viewModel.promises")],jt.prototype,"promises",void 0),h([It("viewModel.selectedFeature")],jt.prototype,"selectedFeature",void 0),h([It("viewModel.selectedFeatureIndex")],jt.prototype,"selectedFeatureIndex",void 0),h([f({readOnly:!0})],jt.prototype,"selectedFeatureWidget",null),h([f()],jt.prototype,"spinnerEnabled",void 0),h([It("viewModel.title")],jt.prototype,"title",void 0),h([It("viewModel.updateLocationEnabled")],jt.prototype,"updateLocationEnabled",void 0),h([It("viewModel.view")],jt.prototype,"view",void 0),h([f({type:qne}),h$e(["triggerAction","trigger-action"])],jt.prototype,"viewModel",void 0),h([It("viewModel.visible")],jt.prototype,"visible",void 0),h([f()],jt.prototype,"visibleElements",void 0),h([ur("visibleElements")],jt.prototype,"castVisibleElements",null),h([Ca()],jt.prototype,"_close",null),h([Ca()],jt.prototype,"_toggleDockEnabled",null),h([Ca()],jt.prototype,"_toggleFeatureMenu",null),h([Ca()],jt.prototype,"_toggleActionsMenu",null),h([Ca()],jt.prototype,"_triggerAction",null),h([Ca()],jt.prototype,"_selectFeature",null),h([Ca()],jt.prototype,"_next",null),h([Ca()],jt.prototype,"_previous",null),jt=h([me(Hne)],jt);const XG=jt,WC=[0,0];function BRe(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return WC[0]=r.left+t.pageXOffset,WC[1]=r.top+t.pageYOffset,WC}function eq(e){e&&(ure(e),e.parentNode&&e.parentNode.removeChild(e))}function zRe(e){const t=document.createElement("div");return e.appendChild(t),t}const Sw=16,dE=750,GRe=512,qRe=2,HRe=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:Sw,time:dE},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([it(()=>this.cursor,i=>{const{surface:n}=this;n&&n.setAttribute("data-cursor",i)}),it(()=>this.interacting,i=>{const{surface:n}=this;n&&n.setAttribute("data-interacting",i.toString())})])}initialize(){this.handles.add(it(()=>this.ui,(r,i)=>this._handleUIChange(r,i))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(r){const i=this._get("container");if(i===r)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),eq(this.root),this._set("root",null),Ez(this.userContent,i),eq(this.userContent),this._set("userContent",null)),r){r.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",Ez(r,s),r.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",r.insertBefore(o,r.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new Pz;o.appendChild(l.surface),this._set("overlay",l),it(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=dv({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(it(()=>this.size,u=>{const[c,p]=u,d="esri-view-surface--inset-outline";c>=document.body.clientWidth||p>=document.body.clientHeight?a.classList.add(d):a.classList.remove(d)},Br),n),this._set("container",r),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get popup(){return this._get("popup")||new XG({view:this})}set popup(r){const i=this._get("popup");i&&i!==r&&i.destroy(),this._set("popup",r)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s[0],i-=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s[0],i+=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){i&&(this.handles.remove("ui"),i.destroy()),r&&this._wireUI(r),this._set("ui",r)}_wireUI(r){this.handles.remove("ui"),r&&(r.view=this,this.handles.add([it(()=>this.root,i=>{r.container=i?zRe(i):null},Br),it(()=>this.popup,(i,n)=>{const s="popup",o="manual";n&&r.remove(n,s),i&&(i.view=r.view,r.add(i,{key:s,position:o}))},Br)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=Sw,r.time=dE,this.handles.add([(()=>{const i=()=>{r.freq=Sw,r.time=dE};return window.addEventListener("resize",i),{remove(){window.removeEventListener("resize",i)}}})(),dv({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=Sw,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?Sw:Math.min(dE,s.freq*qRe),!n&&s.freq>=GRe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=BRe(r);return(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return h([f({value:null,cast:r=>iD(r)})],t.prototype,"container",null),h([f({readOnly:!0})],t.prototype,"focused",null),h([f({readOnly:!0})],t.prototype,"height",void 0),h([f({type:XG})],t.prototype,"popup",null),h([f({type:Pz})],t.prototype,"overlay",void 0),h([f({readOnly:!0})],t.prototype,"position",void 0),h([f({readOnly:!0})],t.prototype,"resizing",void 0),h([f({readOnly:!0})],t.prototype,"root",void 0),h([f({value:null,readOnly:!0})],t.prototype,"size",null),h([f({readOnly:!0})],t.prototype,"surface",void 0),h([f({readOnly:!0})],t.prototype,"suspended",void 0),h([f()],t.prototype,"ui",void 0),h([f({readOnly:!0})],t.prototype,"userContent",void 0),h([f({readOnly:!0})],t.prototype,"width",void 0),h([f()],t.prototype,"widthBreakpoint",void 0),t=h([me("esri.views.DOMContainer")],t),t},WRe=e=>{let t=class extends e{async fetchPopupFeatures(r,i){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(r,i),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,i),c=u.map(p=>p.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:Dde([l,...c]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(r,i,n){return i.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:de(n)?n.event:null,signal:de(n)?n.signal:null,defaultPopupTemplateEnabled:!!de(n)&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(r,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(de(i)&&i.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(r,i){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(r,i),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(r,i){const{results:n,mapPoint:s}=await this.popupHitTest(r),o=n.filter(l=>l.type==="graphic"&&this._isValidPopupGraphic(l.graphic,i)),a=o.length?o[0].mapPoint:null;return{clientGraphics:o.map(l=>l.graphic),queryArea:s,location:s||a}}_getFetchPopupLayerViews(){const r=[];return this.allLayerViews.forEach(i=>{this._isValidPopupLayerView(i)&&r.push(i)}),de(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&r.push(this.graphicsView),r.reverse()}_isValidPopupLayerView(r){return de(r)&&(!("layer"in r)||!r.suspended)&&"fetchPopupFeatures"in r}_graphicsPerFetchPopupLayerView(r,i){const n=[],s=new Map,o=i.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of r){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return t=h([me("esri.views.PopupView")],t),t},JRe=ot.getLogger("esri.support.AnalysesCollection");let JI=class extends o2{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{Ne(t.item)||t.item.parent===this.owner&&(JRe.warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};JI=h([me("esri.support.AnalysesCollection")],JI);let Vd=class extends kt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Lt,this.referenceLayerViews=new Lt,this._loadingHandle=it(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},Br)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;const e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};h([f({constructOnly:!0})],Vd.prototype,"view",void 0),h([f({readOnly:!0})],Vd.prototype,"baseLayerViews",void 0),h([f({readOnly:!0})],Vd.prototype,"referenceLayerViews",void 0),h([f({readOnly:!0})],Vd.prototype,"suspended",null),h([f({type:Boolean,readOnly:!0})],Vd.prototype,"updating",null),Vd=h([me("esri.views.BasemapView")],Vd);const ZRe=ot.getLogger("esri.views.LayerViewManager");class KRe{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Ap(),this._started=!1,this.done=!1,Ka(this._controller.signal,()=>{const n=new $e("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let n,s;if(await r.load({signal:t}),"prefetchResources"in r&&await r.prefetchResources({signal:t}),r.createLayerView)n=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new $e("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);ui(t),n="default"in l?new l.default({layer:r,view:i}):new l({layer:r,view:i})}const o=()=>{s=Jo(s),n.destroyed||n.destroy(),n.layer=null,n.parent=null,n.view=null,this.done=!0};s=Ka(t,o),ui(t);try{await n.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred.reject(new $e("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=n,r.emit("layerview-create",{view:i,layerView:n}),i.emit("layerview-create",{layer:r,layerView:n}),this.done=!0,this._deferred.resolve(n)}catch(n){r.emit("layerview-create-error",{view:i,error:n}),i.emit("layerview-create-error",{layer:r,error:n}),this.done=!0,this._deferred.reject(new $e("layerview:create-error","layerview creation failed",{layer:r,error:n}))}}}let xl=class extends X2{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Y1,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const t=this.view.map?.allLayers;if(t)for(const r of t)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(Ne(this._workPromise)&&(this._workPromise=Ap()),this.handles.remove("reschedule"),this.handles.add(sb(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),Ne(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const r=new Gf({getCollections:()=>this._rootCollectionNames.map(s=>this.get(s)),getChildrenFunction:s=>s&&"layers"in s?s.layers:null});if(!r)return this._workPromise.resolve(),void(this._workPromise=null);for(const s of r)this._createLayerView(s);this._refreshCollections();for(const[s,o]of this._layerLayerViewInfoMap)r.includes(s)||(this._layerLayerViewInfoMap.delete(o.layer),o.destroy());const i=r.filter(s=>s.type==="group").map(s=>s.layers),n=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers,...i].filter(s=>!!s);this.handles.add(n.map(s=>this._watchUpdatingTracking.addOnCollectionChange(()=>s,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([kp(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),it(()=>{const e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),Yd)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return de(this._workPromise)||this._watchUpdatingTracking.updating||ZT(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new $e("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,r){if(!e||!t)return void(t&&t.removeAll());let i=0;for(const n of e){const s=this._layerLayerViewInfoMap.get(n);if(!s||!s.layerView)continue;const o=s.layerView;o.layer=n,o.parent=r,t.getItemAt(i)!==o&&t.splice(i,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),i+=1}i<t.length&&t.splice(i,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new KRe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),r=>{r&&(Vn(r)||r.name==="cancelled:layerview-create")||ZRe.error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};h([f()],xl.prototype,"_workPromise",void 0),h([f({readOnly:!0})],xl.prototype,"_watchUpdatingTracking",void 0),h([f({readOnly:!0})],xl.prototype,"_layersToLayerViews",null),h([f({readOnly:!0})],xl.prototype,"_rootCollectionNames",null),h([f()],xl.prototype,"layerViewImporter",void 0),h([f()],xl.prototype,"supportsGround",void 0),h([f({readOnly:!0})],xl.prototype,"updating",null),h([f({readOnly:!0})],xl.prototype,"updatingRemaining",null),h([f({constructOnly:!0})],xl.prototype,"view",void 0),xl=h([me("esri.views.LayerViewManager")],xl);const YRe=xl;let Ea=class extends kt{constructor(e){super(e),this.factor=1.5,this.offset=Kn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};h([f({type:Number})],Ea.prototype,"factor",void 0),h([f({nonNullable:!0})],Ea.prototype,"offset",void 0),h([f()],Ea.prototype,"position",void 0),h([f({type:Number,range:{min:0}})],Ea.prototype,"size",void 0),h([f()],Ea.prototype,"maskUrl",void 0),h([f()],Ea.prototype,"maskEnabled",void 0),h([f()],Ea.prototype,"overlayUrl",void 0),h([f()],Ea.prototype,"overlayEnabled",void 0),h([f({readOnly:!0})],Ea.prototype,"version",null),h([f({type:Boolean})],Ea.prototype,"visible",void 0),Ea=h([me("esri.views.Magnifier")],Ea);const Wne=Ea;let g5=class extends kt{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.push(new tq(i,n,e,t,r)))}unshift(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.unshift(new tq(i,n,e,t,r)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const r=Za(t.signal);if(r&&!t.abortCallback)t.reject(wi());else{const i=r?t.abortCallback(wi()):t.callback(e);jp(i)?i.then(t.resolve,t.reject):t.resolve(i)}}catch(r){t.reject(r)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=wi();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0,this.running=!1}};h([f()],g5.prototype,"running",void 0),g5=h([me("esri.layers.support.PromiseQueue")],g5);class tq{constructor(t,r,i,n,s){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}}let T_=class extends kt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};h([f()],T_.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),h([f()],T_.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),T_=h([me("esri.views.support.DebugFlags")],T_);const QRe=new T_,XRe=ot.getLogger("esri.views.support.Scheduler");var vr;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(vr||(vr={}));const Fc=0,rq=new Map([[vr.RESOURCE_CONTROLLER,Fc],[vr.SLIDE,Fc],[vr.STREAM_DATA_LOADER,Fc],[vr.ELEVATION_QUERY,Fc],[vr.TERRAIN_SURFACE,1],[vr.SURFACE_GEOMETRY_UPDATES,1],[vr.GRAPHICS_CORE,2],[vr.I3S_CONTROLLER,2],[vr.POINT_CLOUD_LAYER,2],[vr.FEATURE_TILE_FETCHER,2],[vr.OVERLAY,4],[vr.STAGE,4],[vr.GRAPHICS_DECONFLICTOR,4],[vr.FILTER_VISIBILITY,4],[vr.SCALE_VISIBILITY,4],[vr.FRUSTUM_VISIBILITY,4],[vr.POINT_OF_INTEREST_FREQUENT,6],[vr.POINT_OF_INTEREST_INFREQUENT,30],[vr.LABELER,8],[vr.FEATURE_QUERY_ENGINE,8],[vr.FEATURE_TILE_TREE,16],[vr.FEATURE_TILE_TREE_ACTIVE,Fc],[vr.ELEVATION_ALIGNMENT,12],[vr.TEXT_TEXTURE_ATLAS,12],[vr.CLOUDS_GENERATOR,12],[vr.TEXTURE_UNLOAD,12],[vr.LINE_OF_SIGHT_TOOL,16],[vr.LINE_OF_SIGHT_TOOL_INTERACTIVE,Fc],[vr.SNAPPING,Fc],[vr.SHADOW_ACCUMULATOR,30]]);function iq(e){return rq.has(e)?rq.get(e):typeof e=="number"?e:1}var Ia;(function(e){e[e.ANIMATING=0]="ANIMATING",e[e.INTERACTING=1]="INTERACTING",e[e.IDLE=2]="IDLE"})(Ia||(Ia={}));const nq=6.5,sq=1,e6e=30,oq=1e3/30,aq=100,lq=.9;var gP,Em;(function(e){let t=class extends kt{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new z_("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new i,this._state=Ia.INTERACTING,this._tasks=new bf,this._runQueue=new bf,this._load=0,this._idleStateCallbacks=new bf,this._idleUpdatesStartFired=!1,this._maxReschedule=fE,this._forceTask=!1,this._debug=!1,this._debugHandle=it(()=>QRe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,Br);for(const o of Object.keys(vr))this.performanceInfo.tasks.set(vr[o],new z_(vr[o]));let n;const s=this;this._test={get state(){return VT(n,s._state)},set state(o){n=o},FRAME_SAFETY_BUDGET:nq,INTERACTING_BUDGET:oq,IDLE_BUDGET:aq,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(n=>n.remove()),this._tasks.clear(),Jo(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=fE,this._schedule(),this.frame()))}))}registerTask(n,s){const o=iq(n),a=new r(this,n,s,o);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new z_(n)),a}registerIdleStateCallbacks(n,s){const o={idleBegin:n,idleEnd:s};this._idleStateCallbacks.push(o),this.state===Ia.IDLE&&this._idleUpdatesStartFired&&o.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(o),set idleBegin(l){a._idleUpdatesStartFired&&(o.idleEnd(),a._state===Ia.IDLE&&l()),o.idleBegin=l},set idleEnd(l){o.idleEnd=l}}}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==Ia.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(s=>s.idleEnd())))}get state(){return Ne(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let s=nq,o=n.frameDuration,a=sq;switch(this.state){case Ia.IDLE:s=0,o=Math.max(aq,n.frameDuration),a=e6e;break;case Ia.INTERACTING:o=Math.max(oq,n.frameDuration);case Ia.ANIMATING:}return o=o-n.elapsedFrameTime-s,this.state!==Ia.IDLE&&o<sq&&!this._forceTask?(this._forceTask=!0,!1):(o=Math.max(o,a),this._budget.reset(o,this.state),this._maxReschedule=fE,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case Ia.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case Ia.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(s=>{s.name===n&&s.setPriority(n)})}_getState(n){if(this._runQueue.some(o=>o.name===n))return Em.SCHEDULED;let s=Em.IDLE;return this._tasks.forAll(o=>{o.name===n&&o.needsUpdate&&(o.schedulePriority<=1?s=Em.READY:s!==Em.READY&&(s=Em.WAITING))}),s}_getRuntime(n){let s=0;return this._tasks.forAll(o=>{o.name===n&&(s+=o.runtime)}),s}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(o=>{o.needsUpdate&&n.set(o.name,(n.get(o.name)||0)+1)}),n.size===0)return null;let s="";return n.forEach((o,a)=>{s+=o>1?` ${o}x ${a}`:` ${a}`}),s}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((s,o)=>o.needsUpdate?++s:s,0);this._load=this._load*lq+n*(1-lq)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===Fc&&n.needsUpdate&&!this._runQueue.includes(n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,s=0;if(this._tasks.forAll(o=>{o.needsUpdate&&o.schedulePriority!==0&&o.basePriority!==Fc&&(n=!0,s=Math.max(s,o.basePriority),o.schedulePriority===1?(o.schedulePriority=0,this._runQueue.push(o)):--o.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===fE&&(this._maxReschedule=s),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)}catch(l){XRe.error(`Exception in task "${o.name}"`,l)}o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",o.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(l=>l.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this.updating=this._tasks.some(s=>s.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(vr))this._frameTaskTimes.set(vr[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((s,o)=>this.performanceInfo.tasks.get(o).record(s)),this.performanceInfo.total.record(n)}get test(){return this._test}};h([f()],t.prototype,"updating",void 0),t=h([me("esri.views.support.Scheduler")],t),e.Scheduler=t;let r=class extends kt{constructor(n,s,o,a){super({}),this._scheduler=n,this.name=s,this._basePriority=a,this.runtime=0,this._queue=new g5,this._handles=new es,this.schedulePriority=this._basePriority,this.task=de(o)?o:this._queue,this._handles.add(Qa(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(Jne),this._scheduler.removeTask(this),this.schedule=vP.schedule,this.reschedule=vP.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const s=iq(n);this._basePriority!==Fc&&this.schedulePriority===0||(this.schedulePriority=s),this._basePriority=s}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,s,o){return this._queue.push(n,s,o)}reschedule(n,s,o){return this._queue.unshift(n,s,o)}processQueue(n){this._queue.runTask(n)}};h([f({constructOnly:!0})],r.prototype,"task",void 0),h([f({readOnly:!0})],r.prototype,"updating",null),r=h([me("esri.views.support.SchedulerTask")],r);class i{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=Ia.IDLE,this._didWork=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=i})(gP||(gP={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Em||(Em={}));const Jne=(()=>{const e=new gP.Budget;return e.enabled=!1,e})();class t6e{remove(){}processQueue(){}schedule(t,r,i){try{if(Za(r)){const n=wi();return i?Promise.resolve(i(n)):Promise.reject(n)}return W5(t(Jne))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}}const vP=new t6e,fE=Number.MAX_SAFE_INTEGER;let A_=class extends kt{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=t?.registerTask(vr.TEXTURE_UNLOAD)??vP}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,r){const i=this.makeUid(e);let n=this._textureRequests.get(i);return n||(n={referenceCount:0,texture:t(),textureAsync:null,abortController:null,onRemove:r},this._stage&&(this._stage.add(n.texture),this._stage.loadImmediate(n.texture)),this._textureRequests.set(i,n)),n.referenceCount++,{uid:i,texture:n.texture,release:()=>this._release(i)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){e.onRemove&&e.onRemove(),e.texture?this._stage?.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return de(t)?`${e}.${t}px`:e}};h([f()],A_.prototype,"_frameTask",void 0),h([f()],A_.prototype,"updating",null),A_=h([me("esri.views.3d.support.TextureCollection")],A_);var uq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(uq||(uq={}));const Zne=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Kne={};function Yne(e){return!!Kne[e]}function r6e(e){for(const t of e)if(!Yne(t))return!1;return!0}Zne.forEach(e=>{Kne[e]=!0});class i6e{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:r,priority:i},n)=>this.inputManager.installHandlers(n,[r],i))}disconnect(){this.inputManager&&this.handlers.forEach((t,r)=>this.inputManager.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!r6e(s))return s.some(Yne)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??If.DEFAULT;const l=this._createUniqueGroupName(),u=new n6e(this.view,s,a,o);this.handlers.set(l,{handler:u,priority:n});for(const c of s){const p=this.handlerCounts.get(c)||0;this.handlerCounts.set(c,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],n),{remove:()=>this._removeHandler(l,s)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,r){if(this.handlers.has(t)){this.handlers.delete(t);for(const i of r){const n=this.handlerCounts.get(i);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):n===1?this.handlerCounts.delete(i):this.handlerCounts.set(i,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class n6e extends ts{constructor(t,r,i,n){super(!0),this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",i,o=>n(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(this._wrapBlur(o))})}}_wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,screenPoint:Kn(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:c,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:p}=t;return{type:"immediate-click",pointerId:u,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:p}=t;return{type:"immediate-double-click",pointerId:u,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,r){return this.view.toMap(Kn(t,r),{exclude:[]})}_wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this.latestDragStart=r),!this.latestDragStart)return;const l=r.pointer.native,u=r.buttons,{cancelable:c,timestamp:p}=t,d={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return s==="end"&&(this.latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:d,pointerType:o,button:a,buttons:u,radius:r.radius,angle:gY(r.angle),native:l,timestamp:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapKeyDown(t){const{key:r,repeat:i,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:r,repeat:i,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:r,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,r){const{x:i,y:n,button:s,buttons:o,native:a,eventId:l}=t.data,u=a.pointerId,c=a.pointerType,{cancelable:p,timestamp:d}=t;return{type:r,x:i,y:n,pointerId:u,pointerType:c,button:s,buttons:o,native:a,timestamp:d,eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:r,y:i,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,c=t.data.action,p={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:d,timestamp:m}=t;return{type:"pointer-drag",x:r,y:i,pointerId:l,pointerType:u,button:a,buttons:n,action:c,origin:p,native:s,timestamp:m,eventId:o,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:r,data:i,timestamp:n}=t,{x:s,y:o,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:r,state:i,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:l}=i;return{type:"gamepad",device:n,timestamp:o,action:r,buttons:a,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}}var fx,cq,hq;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(fx||(fx={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(cq||(cq={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(hq||(hq={}));const s6e=ot.getLogger("esri.views.interactive.interactiveToolUtils");function o6e(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return s6e.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.visible=!1,r.active&&(r.view.activeTool=null),r.destroy()})]}function ZI(e){return e.visible&&e.getEditableFlag(fx.USER)&&e.getEditableFlag(fx.MANAGER)}function Oc(e){return Kn(e.x,e.y)}function Qne(e,t){const r=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return Kn(t.clientX-r.left,t.clientY-r.top)}function pq(e,t){return t instanceof Event?Qne(e,t):Oc(t)}function dq(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class a6e{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":fq(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!mq(t))break;const n=Oc(t),s=this._intersect(n,t.pointerType,r.forEachTool);if(Ne(s))break;const o=this._findToolAndManipulatorByKey(s,r.forEachTool,mE),a=qc(o,u=>u.manipulator),l=qc(o,u=>u.tool);!(de(a)&&de(l)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,l,t),de(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:s,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool!==s.tool&&(this._currentlyActiveTool=r.activeTool,this._revertToActiveTool=!0,r.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!mq(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=this._draggedManipulators.get(t.pointerId),o=qc(n||s,({key:c})=>c),a=this._findManipulatorByKey(o,r.forEachTool);if(Ne(a))break;const l=Oc(t);l.x=sa(l.x,0,r.view.width),l.y=sa(l.y,0,r.view.height);const u=(n||s).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,s?a.events.emit("drag",{action:"update",start:u,screenPoint:l}):a.events.emit("drag",{action:"start",start:u,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:o,start:u}));break;case"end":a.dragging=!1,s&&a.events.emit("drag",{action:"end",start:u,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=Oc(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findToolAndManipulatorByKey(s,r.forEachTool,mE);if(l6e(t)||r.forEachTool(c=>{if((!de(o)||o.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let p=!1;c.manipulators.forEach(({manipulator:d})=>{d.selected&&(d.selected=!1,p=!0)}),p&&c.manipulatorSelectionChanged&&c.manipulatorSelectionChanged()}}),Ne(o))break;const{manipulator:a,tool:l}=o;if(!a.interactive)break;a.selectable&&l.automaticManipulatorSelection&&(a.selected=!a.selected,l.manipulatorSelectionChanged&&l.manipulatorSelectionChanged());const u=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:i});break}case"click":{const n=Oc(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(Ne(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=Oc(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(Ne(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const n=Oc(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(Ne(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}}this._onFocusChange(r.forEachTool)}_ungrabManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:Oc(i)}),this._grabbedManipulators.forEach(({key:n},s)=>{n.tool===r&&r.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(s)})}_handlePointerEnd(t,r){const i=qc(this._grabbedManipulators.get(t.pointerId),({key:s})=>s),n=this._findManipulatorByKey(i,r.forEachTool);de(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(r.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Oc(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,r){let i=null;return ZT(t,({key:n})=>{const s=this._findManipulatorByKey(n,r);return!!(de(s)&&s.interactive&&"cursor"in s&&s.cursor)&&(i=s.cursor,!0)}),i}_onFocusChange(t){this._updateCursor(t),this._updateFocusedManipulatorTools(t)}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set;this._grabbedManipulators.forEach(({key:{tool:i}})=>{r.add(i)}),this._hoveredManipulators.forEach(({key:{tool:i}})=>{r.add(i)}),t(i=>{i.hasFocusedManipulators=r.has(i)})}clearPointers(t,r,i=!0,n){const s=o=>o.tool===t&&(Ne(n)||o.manipulatorId===n);this._grabbedManipulators.forEach(({key:o,pointerType:a},l)=>{if(s(o)){this._grabbedManipulators.delete(l);const u=this._findManipulatorByKey(o,r);de(u)&&(u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:o},a)=>{if(s(o)){this._draggedManipulators.delete(a);const l=this._findManipulatorByKey(o,r);de(l)&&(l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}}),i&&this._hoveredManipulators.forEach(({key:o},a)=>{if(s(o)){this._hoveredManipulators.delete(a);const l=this._findManipulatorByKey(o,r);de(l)&&(l.hovering=!1)}}),this._onFocusChange(r)}_intersect(t,r,i){let n=null;return i(s=>{if(s.manipulators==null||!ZI(s))return!1;const o=s.manipulators.intersect(t,r);return!Ne(o)&&(n={manipulatorId:o.id,tool:s},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Kn(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!fq(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Oc(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){const s=this._intersect(t,i,n);let o=this._findManipulatorByKey(s,n);const a=qc(this._hoveredManipulators.get(r),({key:u})=>u),l=this._findManipulatorByKey(a,n);de(o)&&!o.interactive&&(o=null),l!==o&&(de(l)&&(l.hovering=!1),de(o)?(o.hovering=!0,this._hoveredManipulators.set(r,{key:s})):this._hoveredManipulators.delete(r),this._onFocusChange(n))}_findManipulatorByKey(t,r){return this._findToolAndManipulatorByKey(t,r,mE)?mE.manipulator:null}_findToolAndManipulatorByKey(t,r,i){return Ne(t)?null:(i.tool=null,i.manipulator=null,r(n=>{if(n!==t.tool||n.manipulators==null||!ZI(n))return!1;const s=n.manipulators.findById(t.manipulatorId);return!!de(s)&&(i.manipulator=s,i.tool=n,!0)}),i.manipulator?i:null)}}function fq(e){return e==="mouse"}function mq(e){return e.pointerType!=="mouse"||e.button===0}function l6e(e){return!!e.native.shiftKey}const mE={manipulator:null,tool:null},u6e=ot.getLogger("esri.views.ToolViewManager"),yq="attached",JC="tools";let Zh=class extends X2{constructor(e){super(e),this._manipulatorState=new a6e,this.tools=new Lt,this.cursor=null,this._forEachTool=t=>{for(const r of this.tools.items)if(t(r))return}}initialize(){this.handles.add([this.view.on(Zne,e=>{this._handleInputEvent(e)},If.TOOL),...o6e(this.tools),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(e){if(de(e)&&!this.view.ready)return void u6e.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),de(t)&&t.deactivate(),de(e)&&e.activate(),this._removeIncompleteTools(e);const r=Ne(this.activeTool);for(const i of this.tools){i.setEditableFlag(fx.MANAGER,r||i===this.activeTool);const n=ZI(i);!r&&n||this._manipulatorState.clearPointers(i,this._forEachTool,!n)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(e=>e.updating)||(this.textures?.updating??!1)}attach(){this.view.type==="3d"?(this._set("textures",new A_(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([it(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),ib(()=>this._set("textures",La(this.textures)))],yq)):this.handles.add(it(()=>this.view.extent,()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){de(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(yq)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:r})=>e(r,t))})}_handleInputEvent(e){let t=!1;const r={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};de(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(i=>{!t&&i.visible&&i.handleInputEvent(r)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:i=>{this.activeTool=i},view:this.view}),!t&&de(this.activeTool)&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(JC),this._forEachTool(e=>{if(e instanceof kt){const t=it(()=>[e.cursor,e.visible,e.editable],()=>{ZI(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,JC)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:r})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,r)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),JC)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const e=this._manipulatorState.cursor;let t=e;this._forEachTool(r=>!(!de(r.cursor)||!r.visible||!Ne(e)&&r.preferManipulatorCursor)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(e){this.tools.filter(t=>(Ne(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};h([f({constructOnly:!0,nonNullable:!0})],Zh.prototype,"view",void 0),h([f({readOnly:!0,nonNullable:!0})],Zh.prototype,"textures",void 0),h([f({value:null})],Zh.prototype,"activeTool",null),h([f({readOnly:!0,type:Lt})],Zh.prototype,"tools",void 0),h([f({readOnly:!0})],Zh.prototype,"cursor",void 0),h([f({readOnly:!0})],Zh.prototype,"updating",null),Zh=h([me("esri.views.ToolViewManager")],Zh);const c6e=Zh;let g1=class extends kt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":h6e.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return p6e[this.deviceType]}};h([f({nonNullable:!0,readOnly:!0})],g1.prototype,"nativeIndex",void 0),h([f({type:String,readOnly:!0})],g1.prototype,"deviceType",null),h([f({type:Number,readOnly:!0})],g1.prototype,"axisThreshold",null),g1=h([me("esri.views.input.gamepad.GamepadInputDevice")],g1);const h6e=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),p6e={standard:.15,spacemouse:.025,unknown:0},FD=g1;let $_=class extends kt{constructor(...e){super(...e),this.devices=new Lt,this.enabledFocusMode="document"}};h([f({type:Lt.ofType(FD),readOnly:!0})],$_.prototype,"devices",void 0),h([f({type:["document","view","none"]})],$_.prototype,"enabledFocusMode",void 0),$_=h([me("esri.views.input.gamepad.GamepadSettings")],$_);const d6e=$_;let v5=class extends kt{constructor(){super(...arguments),this.gamepad=new d6e}};h([f({readOnly:!0})],v5.prototype,"gamepad",void 0),v5=h([me("esri.views.input.Input")],v5);const f6e=v5;let Bd=class extends kt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};h([f({type:Boolean,nonNullable:!0})],Bd.prototype,"enabled",void 0),h([f({type:FD})],Bd.prototype,"device",void 0),h([f({type:["pan","zoom"],nonNullable:!0})],Bd.prototype,"mode",void 0),h([f({type:["forward-down","forward-up"],nonNullable:!0})],Bd.prototype,"tiltDirection",void 0),h([f({type:Number,nonNullable:!0})],Bd.prototype,"velocityFactor",void 0),Bd=h([me("esri.views.navigation.gamepad.GamepadSettings")],Bd);const Xne=Bd;let dy=class extends kt{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Xne,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};h([f({type:Boolean})],dy.prototype,"browserTouchPanEnabled",void 0),h([f({type:Xne,nonNullable:!0})],dy.prototype,"gamepad",void 0),h([f({type:Boolean})],dy.prototype,"momentumEnabled",void 0),h([f({type:Boolean})],dy.prototype,"mouseWheelZoomEnabled",void 0),dy=h([me("esri.views.navigation.Navigation")],dy);const ese=dy;var gq;function m6e(e){const t=e.url&&zf(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&de(t)&&t.serverType==="ImageServer")&&tse(e)&&e.heightModelInfo?e.heightModelInfo:y6e(e)?_4.deriveUnitFromSR(v6e,e.spatialReference):null}function tse(e){return"heightModelInfo"in e}function rse(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function y6e(e){return rse(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):ise(e)}function g6e(e){return e.layers!=null||ise(e)||rse(e)||tse(e)}function ise(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(gq||(gq={}));const v6e=new _4({heightModel:"gravity-related-height"});var Pp;function vq(e){return e===Pp.Global?"global":"local"}(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(Pp||(Pp={}));let bP,ZC=null;async function b6e(e){ZC||(ZC=Be(()=>import("./geometryServiceUtils.77c01898.js"),["assets/geometryServiceUtils.77c01898.js","assets/preload-helper.387dac8f.js"]).then(t=>bP=t)),await ZC,ui(e)}async function nse(e,t,r,i){if(!e)return null;const n=e.spatialReference;return qf()||Op(n,t)?Tb(e,t):bP?bP.projectGeometry(e,t,r,i):(await Promise.race([b6e(i),Hf(i)]),nse(e,t,r,i))}let ii=class extends kt{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=V5(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return de(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return Ne(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),t=[];return de(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let r=null;for(const n of e){const s=this._getSupportedSpatialReferences(n);if(s.length>0){const o=this._narrowDownSpatialReferenceCandidates(r,s);de(o)&&(r=o)}if(de(r)&&r.length===1)break}if(t&&(Ne(r)||r.length!==1))return{updating:!0};const i=this._pickSpatialReferenceCandidate(r);return{spatialReference:de(i)?i.spatialReference:null,viewingMode:de(i)?i.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const r=e[0].tileInfo;return{tileInfo:r&&r.spatialReference.equals(this.spatialReference)?r:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const r of e)if(g6e(r)){const i=m6e(r);if(i)return{heightModelInfo:i,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,r=[];for(const i of e.layers){const n="fullExtents"in i&&i.fullExtents||(de(i.fullExtent)?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:n[0],o=n.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return{candidates:[{extent:o,layer:i}],updating:!1};if(this._getSupportedSpatialReferences(i).length>0)for(const a of n)r.push({extent:a,layer:i})}return{candidates:r,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(Ne(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:de(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(de(this._projectExtentTask.task)&&(this._projectExtentTask.task=V5(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:UZ(async n=>{try{const s=await nse(r.extent,i,r.layer.portalItem,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:s}}catch{if(Za(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(Ne(e))return t;const r=[],i=(n,s)=>de(n)?de(s)?n===s&&n:n:s;for(const n of e)for(const s of t){if(!n.spatialReference.equals(s.spatialReference))continue;const o=i(n.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:n.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return Ne(e)||e.length<1?de(t)?{spatialReference:t,viewingMode:null}:null:(de(t)&&e.length>1&&e.some(({spatialReference:r})=>r.equals(t))&&(e=e.filter(({spatialReference:r})=>r.equals(t))),e.length>1&&e.some(({viewingMode:r})=>r!==Pp.Local)&&(e=e.filter(({viewingMode:r})=>r!==Pp.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const r=[];for(const i of t){const n=this.getSpatialReferenceSupport({spatialReference:i,layer:e});if(de(n)){const s=de(n.constraints)?n.constraints:[{spatialReference:i,viewingMode:null}];for(const{spatialReference:o,viewingMode:a}of s)(!this.requiresExtentInSpatialReference||Ne(this.userSpatialReference)||o.equals(this.userSpatialReference))&&r.push({spatialReference:o,viewingMode:a})}}return r}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:r})=>t.equals(r.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const r of e.layers){switch(this._loadMaybe(r)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(r),"layers"in r&&this._collectCollection({layers:r.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(e.load(),"loading"):e.loadStatus:"loaded"}};h([f()],ii.prototype,"required",void 0),h([f({constructOnly:!0})],ii.prototype,"map",void 0),h([f({constructOnly:!0})],ii.prototype,"getSpatialReferenceSupport",void 0),h([f()],ii.prototype,"defaultSpatialReference",void 0),h([f()],ii.prototype,"userSpatialReference",void 0),h([f()],ii.prototype,"sourcePreloadCount",void 0),h([f()],ii.prototype,"priorityCollection",void 0),h([f()],ii.prototype,"requiresExtentInSpatialReference",void 0),h([f()],ii.prototype,"suspended",void 0),h([f({readOnly:!0})],ii.prototype,"ready",null),h([f({readOnly:!0})],ii.prototype,"heightModelInfoReady",null),h([f({readOnly:!0})],ii.prototype,"spatialReference",null),h([f({readOnly:!0})],ii.prototype,"extent",null),h([f({readOnly:!0})],ii.prototype,"heightModelInfo",null),h([f({readOnly:!0})],ii.prototype,"vcsWkid",null),h([f({readOnly:!0})],ii.prototype,"latestVcsWkid",null),h([f({readOnly:!0})],ii.prototype,"viewingMode",null),h([f({readOnly:!0})],ii.prototype,"tileInfo",null),h([f({readOnly:!0})],ii.prototype,"mapCollections",null),h([f({readOnly:!0})],ii.prototype,"_allLayers",null),h([f({readOnly:!0})],ii.prototype,"_spatialReferenceTask",null),h([f({readOnly:!0})],ii.prototype,"_tileInfoTask",null),h([f({readOnly:!0})],ii.prototype,"_heightModelInfoTask",null),h([f({readOnly:!0})],ii.prototype,"_extentCandidatesTask",null),h([f()],ii.prototype,"_extentTask",null),h([f()],ii.prototype,"_projectExtentTask",void 0),ii=h([me("esri.views.support.DefaultsFromMap")],ii);var b5;const yE=ot.getLogger("esri.views.View");let Ht=b5=class extends Hs(im.EventedMixin(Qx(kt))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Gf({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new lg,this.analyses=new JI,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Lt,this.magnifier=new Wne,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new f6e,this.navigation=new ese,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new i6e(this),this.persistableViewModels=new Lt,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(it(()=>this.preconditionsReady,t=>{t?(this._currentSpatialReference=this.spatialReference,b5.views.add(this)):(this._currentSpatialReference=null,b5.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?(this.layerViewManager?.clear(),this.toolViewManager?.detach(),de(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(this._startup(),de(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Bf))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,x4(()=>this.ready)))),this.basemapView=new Vd({view:this}),this.layerViewManager=new YRe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new c6e({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([it(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),it(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),it(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([it(()=>this.defaultsFromMap?.ready,t=>{const r=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&r){if(de(e))return;const i=ib(()=>e=V5(e));e=UZ(async n=>{try{await YL(this.spatialReferenceWarningDelay,null,n)}catch{return}finally{e=null}yE.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(i,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=La(this.graphics),this.analyses=La(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),La(this.analysisViewManager),this.toolViewManager=La(this.toolViewManager),this.layerViewManager=La(this.layerViewManager),this.basemapView=La(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return yE.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ii({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Ya.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}set map(e){e!==this._get("map")&&(e?.destroyed&&(yE.warn("#map","The provided map is already destroyed",{map:e}),e=null),Ya.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.defaultsFromMap?.required?.heightModelInfo&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e}set spatialReference(e){const t=!Xn(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return de(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}importLayerView(e){throw new $e("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return de(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&yE.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Qa(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};Ht.views=new Lt,h([f()],Ht.prototype,"_userSpatialReference",void 0),h([It("toolViewManager.activeTool")],Ht.prototype,"activeTool",void 0),h([f({readOnly:!0})],Ht.prototype,"allLayerViews",void 0),h([f()],Ht.prototype,"groundView",void 0),h([f()],Ht.prototype,"animation",void 0),h([f()],Ht.prototype,"basemapView",void 0),h([f({readOnly:!0})],Ht.prototype,"_defaultsFromMapSettings",null),h([f()],Ht.prototype,"defaultsFromMap",null),h([f()],Ht.prototype,"fatalError",void 0),h([f({type:qt})],Ht.prototype,"extent",void 0),h([f(p8(lg,"graphics"))],Ht.prototype,"graphics",void 0),h([f(p8(JI,"analyses"))],Ht.prototype,"analyses",void 0),h([f({readOnly:!0,type:_4})],Ht.prototype,"heightModelInfo",null),h([f({readOnly:!0})],Ht.prototype,"interacting",null),h([f({readOnly:!0})],Ht.prototype,"navigating",void 0),h([f({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ht.prototype,"preconditionsReady",null),h([f({readOnly:!0})],Ht.prototype,"typeSpecificPreconditionsReady",void 0),h([f({type:Lt,readOnly:!0})],Ht.prototype,"layerViews",void 0),h([f({type:Wne})],Ht.prototype,"magnifier",void 0),h([f({value:null,type:Yte})],Ht.prototype,"map",null),h([f()],Ht.prototype,"padding",void 0),h([f({readOnly:!0})],Ht.prototype,"ready",void 0),h([f({type:wt})],Ht.prototype,"spatialReference",null),h([f()],Ht.prototype,"spatialReferenceWarningDelay",void 0),h([f()],Ht.prototype,"stationary",null),h([f({readOnly:!0})],Ht.prototype,"supportsGround",void 0),h([f({type:ca})],Ht.prototype,"timeExtent",void 0),h([It("toolViewManager.tools")],Ht.prototype,"tools",void 0),h([f()],Ht.prototype,"toolViewManager",void 0),h([f({readOnly:!0})],Ht.prototype,"type",void 0),h([f({type:Number})],Ht.prototype,"scale",void 0),h([f({readOnly:!0})],Ht.prototype,"updating",void 0),h([f({readOnly:!0})],Ht.prototype,"initialExtentRequired",void 0),h([f({readOnly:!0})],Ht.prototype,"initialExtent",null),h([f()],Ht.prototype,"cursor",null),h([f({readOnly:!0})],Ht.prototype,"input",void 0),h([f({type:ese,nonNullable:!0})],Ht.prototype,"navigation",void 0),h([f()],Ht.prototype,"layerViewManager",void 0),h([f()],Ht.prototype,"analysisViewManager",void 0),h([f()],Ht.prototype,"width",void 0),h([f()],Ht.prototype,"height",void 0),h([f({readOnly:!0})],Ht.prototype,"resizing",void 0),h([f({value:null,readOnly:!0})],Ht.prototype,"size",null),h([f({readOnly:!0})],Ht.prototype,"suspended",void 0),h([f({readOnly:!0})],Ht.prototype,"viewEvents",void 0),h([f({readOnly:!0})],Ht.prototype,"persistableViewModels",void 0),h([f()],Ht.prototype,"_isValid",void 0),h([f()],Ht.prototype,"_readyCycleForced",void 0),h([f()],Ht.prototype,"_currentSpatialReference",void 0),Ht=b5=h([me("esri.views.View")],Ht);const w6e=Ht;let zd=class extends iI{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new $e("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=jp(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};h([f({readOnly:!0})],zd.prototype,"done",null),h([f({readOnly:!0,type:String})],zd.prototype,"state",void 0),h([f()],zd.prototype,"target",void 0),zd=h([me("esri.views.ViewAnimation")],zd),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(zd||(zd={}));const wP=zd;function ky(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,l=3*(i-t)-a,u=1-a-l;function c(g){return((o*g+s)*g+n)*g}function p(g){return((u*g+l)*g+a)*g}function d(g){return(3*o*g+2*s)*g+n}function m(g,b){let v,_,E,I,x,T;for(E=g,T=0;T<8;T++){if(I=c(E)-g,Math.abs(I)<b)return E;if(x=d(E),Math.abs(x)<1e-6)break;E-=I/x}if(v=0,_=1,E=g,E<v)return v;if(E>_)return _;for(;v<_;){if(I=c(E),Math.abs(I-g)<b)return E;g>I?v=E:_=E,E=.5*(_-v)+v}return E}return function(g,b=1e-6){return p(m(g,b))}}const _6e=/^cubic-bezier\((.*)\)/,Ml={};function x6e(e){let t=Ml[e]||null;if(!t){const r=_6e.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=ky.apply(ky,i))}}return t}Ml.ease=ky(.25,.1,.25,1),Ml.linear=ky(0,0,1,1),Ml.easeIn=Ml["ease-in"]=ky(.42,0,1,1),Ml.easeOut=Ml["ease-out"]=ky(0,0,.58,1),Ml.easeInOut=Ml["ease-in-out"]=ky(.42,0,.58,1);function Tf(){return[1,0,0,1,0,0]}function S6e(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function E6e(e,t,r,i,n,s){return[e,t,r,i,n,s]}function M6e(e,t){return new Float64Array(e,t,6)}Object.freeze(Object.defineProperty({__proto__:null,create:Tf,clone:S6e,fromValues:E6e,createView:M6e},Symbol.toStringTag,{value:"Module"}));function mx(e,t){return e[0]=t[0],e[1]=t[1],e}function Wn(e,t,r){return e[0]=t,e[1]=r,e}function sse(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function yx(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function ose(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function ase(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function I6e(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function T6e(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function A6e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function $6e(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function C6e(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ES(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function k6e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function MS(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function KI(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function YI(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function lse(e){const t=e[0],r=e[1];return t*t+r*r}function use(e,t){return e[0]=-t[0],e[1]=-t[1],e}function O6e(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function _P(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function cse(e,t){return e[0]*t[0]+e[1]*t[1]}function hse(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function R6e(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function P6e(e,t){t=t||1;const r=2*uf()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function L6e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function Vc(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function N6e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function D6e(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function F6e(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function j6e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function U6e(e){return"vec2("+e[0]+", "+e[1]+")"}function V6e(e,t){return e[0]===t[0]&&e[1]===t[1]}function B6e(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];return Math.abs(r-n)<=Qt*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=Qt*Math.max(1,Math.abs(i),Math.abs(s))}function z6e(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const G6e=YI,jD=yx,q6e=ose,H6e=ase,W6e=MS,J6e=KI,Z6e=lse;Object.freeze(Object.defineProperty({__proto__:null,copy:mx,set:Wn,add:sse,subtract:yx,multiply:ose,divide:ase,ceil:I6e,floor:T6e,min:A6e,max:$6e,round:C6e,scale:ES,scaleAndAdd:k6e,distance:MS,squaredDistance:KI,length:YI,squaredLength:lse,negate:use,inverse:O6e,normalize:_P,dot:cse,cross:hse,lerp:R6e,random:P6e,transformMat2:L6e,transformMat2d:Vc,transformMat3:N6e,transformMat4:D6e,rotate:F6e,angle:j6e,str:U6e,exactEquals:V6e,equals:B6e,projectAndScale:z6e,len:G6e,sub:jD,mul:q6e,div:H6e,dist:W6e,sqrDist:J6e,sqrLen:Z6e},Symbol.toStringTag,{value:"Module"}));function Xi(){return[0,0]}function K6e(e){return[e[0],e[1]]}function IS(e,t){return[e,t]}function Y6e(e){const t=Xi(),r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Q6e(e,t){return new Float64Array(e,t,2)}function pse(){return Xi()}function dse(){return IS(1,1)}function fse(){return IS(1,0)}function mse(){return IS(0,1)}const X6e=pse(),e8e=dse(),t8e=fse(),r8e=mse();Object.freeze(Object.defineProperty({__proto__:null,create:Xi,clone:K6e,fromValues:IS,fromArray:Y6e,createView:Q6e,zeros:pse,ones:dse,unitX:fse,unitY:mse,ZEROS:X6e,ONES:e8e,UNIT_X:t8e,UNIT_Y:r8e},Symbol.toStringTag,{value:"Module"}));const yse=96,gse=39.37,i8e=180/Math.PI;function vse(e){return e.wkid?e:e.spatialReference||wt.WGS84}function UD(e,t){return t.type?Wn(e,t.x,t.y):mx(e,t)}function bse(e){return am(e)}function g2(e,t){const r=Math.max(1,t[0]),i=Math.max(1,t[1]);return Math.max(e.width/r,e.height/i)*p8e(e.spatialReference)}async function C_(e,t,r,i){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Lt.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(c=>"attributes"in c),l=e.some(c=>!c.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const c=new Map;for(const g of e){const b=g.layer,v=c.get(b)||[],_=g.attributes[b.objectIdField];_!=null&&v.push(_),c.set(b,v)}const p=[];c.forEach((g,b)=>{const v=t.allLayerViews.find(_=>_.layer.id===b.id);if("queryFeatures"in v){const _=b.createQuery();_.objectIds=g,_.returnGeometry=!0,p.push(v.queryFeatures(_))}});const d=await Promise.all(p),m=[];for(const g of d)if(g&&g.features&&g.features.length)for(const b of g.features)de(b.geometry)&&m.push(b.geometry);u=m}for(const c of u)i=await C_(c,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new At(e);else if(e instanceof na)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if("queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0;const c=await l.queryFeatures(u);n=pZ(c,"features",0,"geometry")}}}if(Ne(n)||(s=n.type==="point"?new qt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;qf()||Op(s.spatialReference,r)||await Hf();const o=Tb(s,r);return o?i=i?i.union(o):o:null}function n8e(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const i of e){const n=i.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,r=n.maxScale>r?n.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function KC(e,t){return Xn(vse(e),t)?e:Tb(e,t)}async function s8e(e,t){if(!e||!t)return new Xc({targetGeometry:new At,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof Xc?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:e instanceof qt?u=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(u=await C_(e.center,t,r)||await C_(e.extent,t,r)||await C_(e.target,t,r)||await C_(e,t,r)),!u&&s&&s.targetGeometry?u=s.targetGeometry:!u&&t.extent&&(u=t.extent),r||(r=vse(t.spatialReference||t.extent||u)),qf()||Xn(u.spatialReference,r)||Op(u,r)||await Hf();const c=KC(u.center?u.center:u,r);let p=null;if(l&&de(l.targetGeometry)&&l.targetGeometry.type==="point")p=l.scale;else if("scale"in e&&e.scale)p=e.scale;else if("zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs)p=i.zoomToScale(e.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const b=KC(t.extent,r);p=de(b)?g2(b,a):t.extent?g2(t.extent,a):s.scale}else p=g2(KC(u.extent,r),a);const d=n8e(e);d&&(d.min&&d.min>p?p=d.min:d.max&&d.max<p&&(p=d.max));let m=0;l?m=l.rotation:e.hasOwnProperty("rotation")?m=e.rotation:s&&(m=s.rotation);let g=new Xc({targetGeometry:c,scale:p,rotation:m});return i&&(g=i.fit(g),i.constrainByGeometry(g),i.rotationEnabled||(g.rotation=m)),g}function ic(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function o8e(e,t,r){return r?Wn(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):ES(e,t,.5)}const a8e=function(){const e=Xi();return function(t,r,i){const n=r.targetGeometry;UD(e,n);const s=.5*Pb(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function l8e(e,t,r,i,n){return xP(e,t,r.center),e.scale=g2(r,i),n&&n.constraints&&n.constraints.constrain(e),e}function u8e(e,t,r,i){return zD(e,t,r,i),LD(e,e)}const wse=function(){const e=Xi();return function(t,r,i){return jD(t,d8e(t,r),o8e(e,r,i))}}(),c8e=function(){const e=Tf(),t=Xi();return function(r,i,n,s){const o=Pb(i),a=VD(i);return Wn(t,o,o),jne(e,t),K4(e,e,a),dx(e,e,wse(t,n,s)),dx(e,e,[0,s.top-s.bottom]),Wn(r,e[4],e[5])}}();function Pb(e){return e.scale*h8e(e.targetGeometry)}function h8e(e){return de(e)&&Gs(e.spatialReference)?1/(bse(e.spatialReference)*gse*yse):1}function VD(e){return wN(e.rotation)||0}function p8e(e){return Gs(e)?bse(e)*gse*yse:1}function d8e(e,t){return ES(e,t,.5)}const BD=function(){const e=Xi(),t=Xi(),r=Xi();return function(i,n,s,o,a,l){return use(e,n),ES(t,s,.5*l),Wn(r,1/o*l,-1/o*l),DD(i,t),a&&K4(i,i,a),ND(i,i,r),dx(i,i,e),i}}(),zD=function(){const e=Xi();return function(t,r,i,n){const s=Pb(r),o=VD(r);return UD(e,r.targetGeometry),BD(t,e,i,s,o,n)}}(),f8e=function(){const e=Xi();return function(t,r,i,n){const s=Pb(r);return UD(e,r.targetGeometry),BD(t,e,i,s,0,n)}}();function m8e(e){const t=za(e);return t?t.valid[1]-t.valid[0]:0}function y8e(e,t){return Math.round(m8e(e)/t)}const g8e=function(){const e=Xi(),t=Xi(),r=[0,0,0];return function(i,n,s){yx(e,i,n),_P(e,e),yx(t,i,s),_P(t,t),hse(r,e,t);let o=Math.acos(cse(e,t)/(YI(e)*YI(t)))*i8e;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),v8e=function(){const e=Xi();return function(t,r,i,n){const s=t.targetGeometry;return ic(t,r),c8e(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),xP=function(e,t,r){ic(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},b8e=function(){const e=Xi();return function(t,r,i,n,s){s||(s="center"),jD(e,i,n),ES(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":Wn(e,0,0);break;case"left":Wn(e,-o,0);break;case"top":Wn(e,0,a);break;case"right":Wn(e,o,0);break;case"bottom":Wn(e,0,-a);break;case"top-left":Wn(e,-o,a);break;case"bottom-left":Wn(e,-o,-a);break;case"top-right":Wn(e,o,a);break;case"bottom-right":Wn(e,o,-a)}return X4(t,r,e),t}}();function Elt(e,t,r){return ic(e,t),e.rotation+=r,e}function w8e(e,t,r){return ic(e,t),e.rotation=r,e}const _8e=function(){const e=Xi();return function(t,r,i,n,s){return ic(t,r),isNaN(i)||i===0||(xse(e,n,r,s),t.scale=r.scale*i,Sse(e,e,t,s),X4(t,t,Wn(e,e[0]-n[0],n[1]-e[1]))),t}}();function bq(e,t,r){return ic(e,t),e.scale=r,e}const _se=function(){const e=Xi();return function(t,r,i,n,s,o){return ic(t,r),isNaN(i)||i===0||(xse(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,Sse(e,e,t,o),X4(t,t,Wn(e,e[0]-s[0],s[1]-e[1]))),t}}(),Mlt=function(){const e=Xi(),t=Xi();return function(r,i,n,s,o,a,l){return wse(t,a,l),sse(e,o,t),s?_se(r,i,n,s,e,a):_8e(r,i,n,e,a)}}(),xse=function(){const e=Tf();return function(t,r,i,n){return Vc(t,r,u8e(e,i,n,1))}}(),Sse=function(){const e=Tf();return function(t,r,i,n){return Vc(t,r,zD(e,i,n,1))}}(),X4=function(){const e=Xi(),t=Tf();return function(r,i,n){ic(r,i);const s=Pb(i),o=r.targetGeometry;return Fne(t,VD(i)),ND(t,t,IS(s,s)),Vc(e,n,t),o.x+=e[0],o.y+=e[1],r}}();class x8e{constructor(t,r,i,n){const s=t.targetGeometry,o=r.targetGeometry;n?typeof n=="string"&&(n=x6e(n)||Ml.ease):n=Ml.ease,this.easing=n,this.duration=i,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,r){const i=this.easing(r);let n,s,o,a;r>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+i*this.dCenterX,s=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=s,t.scale=a,t.rotation=o}}let Kh=class extends kt{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=Ml.ease,this.view=null,this.viewpoint=null,this.viewpoint=new Xc({targetGeometry:new At,scale:0,rotation:0}),this._updateTask=dv({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,r){this.stop();const i=this.viewpoint;ic(i,t),this.transition=new x8e(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const r=new wP({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==wP.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=(performance.now()-this._startTime)/this.transition.duration,i=r>=1;this.transition.applyRatio(this.viewpoint,r),i&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};h([f()],Kh.prototype,"animation",void 0),h([f()],Kh.prototype,"duration",void 0),h([f()],Kh.prototype,"transition",void 0),h([f()],Kh.prototype,"easing",void 0),h([f()],Kh.prototype,"view",void 0),h([f()],Kh.prototype,"viewpoint",void 0),Kh=h([me("esri.views.2d.AnimationManager")],Kh);const S8e=Kh;class E8e{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:r,graphicsView:i,labelManager:n,layerViews:s,state:{id:o}}=this.view;r.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),r.referenceLayerViews.forEach(this._updateLayerView,this),de(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),de(i)&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=it(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=dv(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function vn(){return Promise.all([Be(()=>import("./webglDeps.140d981e.js"),["assets/webglDeps.140d981e.js","assets/VertexArrayObject.e5cd7959.js","assets/Texture.627d6838.js","assets/enums.de935fa5.js","assets/ProgramTemplate.1056febf.js","assets/programUtils.309ffe7b.js","assets/preload-helper.387dac8f.js"]),Be(()=>import("./mapViewDeps.43aecdf9.js"),["assets/mapViewDeps.43aecdf9.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/Utils.f67560a4.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/utils.9619dae6.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.309ffe7b.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.2cd0bffb.js","assets/Matcher.41df3644.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.eecf6ac8.js","assets/requestImageUtils.2128a3de.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/BaseGraphicContainer.ab876b54.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/vec3f32.8d37ecf5.js","assets/GraphicContainer.c13e7f7c.js"])])}const Ew=()=>vn().then(()=>Be(()=>import("./TileLayerView2D.63aaf1c7.js"),["assets/TileLayerView2D.63aaf1c7.js","assets/imageUtils.f3c97f9e.js","assets/BitmapTileContainer.bb407950.js","assets/Bitmap.3de272b0.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/TileContainer.bca8274f.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/RefreshableLayerView.cc3cb63d.js","assets/drapedUtils.dfd7dc97.js","assets/preload-helper.387dac8f.js"])),gE=()=>vn().then(()=>Be(()=>import("./FeatureLayerView2D.3f33457c.js"),["assets/FeatureLayerView2D.3f33457c.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/LayerView.098e8f00.js","assets/schemaUtils.692e0e19.js","assets/visualVariablesUtils.087ada97.js","assets/createSymbolSchema.47a02593.js","assets/preload-helper.387dac8f.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),wq={"base-dynamic":()=>vn().then(()=>Be(()=>import("./BaseDynamicLayerView2D.3736d962.js"),["assets/BaseDynamicLayerView2D.3736d962.js","assets/BitmapContainer.e35b4cc9.js","assets/WGLContainer.83fa1e96.js","assets/enums.de935fa5.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/ExportStrategy.315d2a85.js","assets/Bitmap.3de272b0.js","assets/RefreshableLayerView.cc3cb63d.js","assets/preload-helper.387dac8f.js"])),"base-tile":Ew,"bing-maps":Ew,csv:gE,"geo-rss":()=>vn().then(()=>Be(()=>import("./GeoRSSLayerView2D.d061ffd3.js"),["assets/GeoRSSLayerView2D.d061ffd3.js","assets/LayerView.098e8f00.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/GraphicContainer.c13e7f7c.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e5cd7959.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/WGLContainer.83fa1e96.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js"])),feature:gE,geojson:gE,graphics:()=>vn().then(()=>Be(()=>import("./GraphicsLayerView2D.4b7fb089.js"),["assets/GraphicsLayerView2D.4b7fb089.js","assets/LayerView.098e8f00.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/GraphicContainer.c13e7f7c.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e5cd7959.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/WGLContainer.83fa1e96.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js"])),group:()=>vn().then(()=>Be(()=>import("./GroupLayerView2D.5ca32782.js"),["assets/GroupLayerView2D.5ca32782.js","assets/GroupContainer.d151aa8b.js","assets/WGLContainer.83fa1e96.js","assets/enums.de935fa5.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/preload-helper.387dac8f.js"])),imagery:()=>vn().then(()=>Be(()=>import("./ImageryLayerView2D.38839102.js"),["assets/ImageryLayerView2D.38839102.js","assets/RasterVFDisplayObject.12fd3166.js","assets/VertexArrayObject.e5cd7959.js","assets/Texture.627d6838.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/WGLContainer.83fa1e96.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js","assets/HighlightGraphicContainer.5ec0b7f2.js","assets/BitmapContainer.e35b4cc9.js","assets/Bitmap.3de272b0.js","assets/ExportStrategy.315d2a85.js","assets/rasterProjectionHelper.5be6c842.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),"imagery-tile":()=>vn().then(()=>Be(()=>import("./ImageryTileLayerView2D.87e2f611.js"),["assets/ImageryTileLayerView2D.87e2f611.js","assets/RasterVFDisplayObject.12fd3166.js","assets/VertexArrayObject.e5cd7959.js","assets/Texture.627d6838.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/WGLContainer.83fa1e96.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/TileContainer.bca8274f.js","assets/RawBlockCache.2597b7f9.js","assets/rasterProjectionHelper.5be6c842.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js","assets/preload-helper.387dac8f.js"])),kml:()=>vn().then(()=>Be(()=>import("./KMLLayerView2D.d0ccdc2f.js"),["assets/KMLLayerView2D.d0ccdc2f.js","assets/kmlUtils.f9b486c4.js","assets/Bitmap.3de272b0.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/BitmapContainer.e35b4cc9.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/GraphicContainer.c13e7f7c.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js"])),"map-image":()=>vn().then(()=>Be(()=>import("./MapImageLayerView2D.43ec4c00.js"),["assets/MapImageLayerView2D.43ec4c00.js","assets/BitmapContainer.e35b4cc9.js","assets/WGLContainer.83fa1e96.js","assets/enums.de935fa5.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js","assets/HighlightGraphicContainer.5ec0b7f2.js","assets/ExportStrategy.315d2a85.js","assets/Bitmap.3de272b0.js","assets/drapedUtils.dfd7dc97.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),"map-notes":()=>vn().then(()=>Be(()=>import("./MapNotesLayerView2D.86100557.js"),["assets/MapNotesLayerView2D.86100557.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/GroupContainer.d151aa8b.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/GraphicContainer.c13e7f7c.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js"])),media:()=>vn().then(()=>Be(()=>import("./MediaLayerView2D.0efcba88.js"),["assets/MediaLayerView2D.0efcba88.js","assets/normalizeUtilsSync.38eabbc7.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/VertexArrayObject.e5cd7959.js","assets/vec3f32.8d37ecf5.js","assets/WGLContainer.83fa1e96.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/preload-helper.387dac8f.js"])),"ogc-feature":()=>vn().then(()=>Be(()=>import("./OGCFeatureLayerView2D.5e7522fa.js"),["assets/OGCFeatureLayerView2D.5e7522fa.js","assets/FeatureLayerView2D.3f33457c.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/LayerView.098e8f00.js","assets/schemaUtils.692e0e19.js","assets/visualVariablesUtils.087ada97.js","assets/createSymbolSchema.47a02593.js","assets/preload-helper.387dac8f.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),"open-street-map":Ew,route:()=>vn().then(()=>Be(()=>import("./RouteLayerView2D.61042b62.js"),["assets/RouteLayerView2D.61042b62.js","assets/Stop.b9d968a1.js","assets/LayerView.098e8f00.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/GraphicContainer.c13e7f7c.js","assets/BaseGraphicContainer.ab876b54.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/VertexArrayObject.e5cd7959.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/WGLContainer.83fa1e96.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/Matcher.41df3644.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/vec3f32.8d37ecf5.js"])),stream:()=>vn().then(()=>Be(()=>import("./StreamLayerView2D.1d4b9dc9.js"),["assets/StreamLayerView2D.1d4b9dc9.js","assets/FeatureLayerView2D.3f33457c.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/LayerView.098e8f00.js","assets/schemaUtils.692e0e19.js","assets/visualVariablesUtils.087ada97.js","assets/createSymbolSchema.47a02593.js","assets/preload-helper.387dac8f.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),"subtype-group":()=>vn().then(()=>Be(()=>import("./SubtypeGroupLayerView2D.c32c9367.js"),["assets/SubtypeGroupLayerView2D.c32c9367.js","assets/FeatureLayerView2D.3f33457c.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/LayerView.098e8f00.js","assets/schemaUtils.692e0e19.js","assets/visualVariablesUtils.087ada97.js","assets/createSymbolSchema.47a02593.js","assets/preload-helper.387dac8f.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/GeometryUtils.814cb798.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js"])),tile:Ew,"vector-tile":()=>vn().then(()=>Be(()=>import("./VectorTileLayerView2D.c198cb4e.js"),["assets/VectorTileLayerView2D.c198cb4e.js","assets/enums.2a1fad7f.js","assets/BidiEngine.ec67919b.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/CIMSymbolHelper.6248d0ad.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/Utils.f67560a4.js","assets/VertexElementDescriptor.d386088d.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/VertexArrayObject.e5cd7959.js","assets/config.40d47db8.js","assets/TileContainer.bca8274f.js","assets/utils.9619dae6.js","assets/WGLContainer.83fa1e96.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/StyleRepository.3f478fb9.js","assets/Geometry.b68345ae.js","assets/LayerView.098e8f00.js","assets/Bitmap.3de272b0.js","assets/BitmapContainer.e35b4cc9.js"])),wcs:()=>vn().then(()=>Be(()=>import("./ImageryTileLayerView2D.87e2f611.js"),["assets/ImageryTileLayerView2D.87e2f611.js","assets/RasterVFDisplayObject.12fd3166.js","assets/VertexArrayObject.e5cd7959.js","assets/Texture.627d6838.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/WGLContainer.83fa1e96.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/TileContainer.bca8274f.js","assets/RawBlockCache.2597b7f9.js","assets/rasterProjectionHelper.5be6c842.js","assets/util.5d5e59e8.js","assets/popupUtils.bce68919.js","assets/RefreshableLayerView.cc3cb63d.js","assets/preload-helper.387dac8f.js"])),"web-tile":Ew,wfs:gE,wms:()=>vn().then(()=>Be(()=>import("./WMSLayerView2D.5c706960.js"),["assets/WMSLayerView2D.5c706960.js","assets/BitmapContainer.e35b4cc9.js","assets/WGLContainer.83fa1e96.js","assets/enums.de935fa5.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/ExportStrategy.315d2a85.js","assets/Bitmap.3de272b0.js","assets/RefreshableLayerView.cc3cb63d.js","assets/preload-helper.387dac8f.js"])),wmts:()=>vn().then(()=>Be(()=>import("./WMTSLayerView2D.34dd61b3.js"),["assets/WMTSLayerView2D.34dd61b3.js","assets/imageUtils.f3c97f9e.js","assets/BitmapTileContainer.bb407950.js","assets/Bitmap.3de272b0.js","assets/utils.9619dae6.js","assets/Utils.f67560a4.js","assets/enums.6e42a319.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.c216087c.js","assets/TileContainer.bca8274f.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView.098e8f00.js","assets/RefreshableLayerView.cc3cb63d.js","assets/preload-helper.387dac8f.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function M8e(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new $e(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const _q={hasLayerViewModule:e=>de(wq[e.type]),importLayerView:e=>{const t=wq[e.type];if(Ne(t))throw M8e(e);return t(e)}};function I8e(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let c=0;c<u.length-1;c++){x0e(a,i,u,c);const p=MS(i,a);p<n&&(n=p,s=a[0],o=a[1])}return{coordinate:new At({x:s,y:o,spatialReference:r}),distance:n}}var SP;const T8e=ot.getLogger("esri.views.MapView");let Oy=SP=class extends kt{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(Ne(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Tb(this.geometry,this.spatialReference)}catch(e){return T8e.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(Ne(this.normalizedGeometry))return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?r4(this.normalizedGeometry,r):UK(this.normalizedGeometry,r))return e;const{coordinate:i}=I8e(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){return new SP({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};h([f({constructOnly:!0})],Oy.prototype,"geometry",void 0),h([f({readOnly:!0})],Oy.prototype,"normalizedGeometry",null),h([f({constructOnly:!0})],Oy.prototype,"spatialReference",void 0),Oy=SP=h([me("esri.views.2d.constraints.GeometryConstraint")],Oy);var EP;let k_=EP=class extends kt{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new EP({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([f()],k_.prototype,"enabled",void 0),h([f()],k_.prototype,"rotationEnabled",void 0),k_=EP=h([me("esri.views.2d.constraints.RotationConstraint")],k_);const Ese=k_;var MP;let Co=MP=class extends kt{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!t||!t.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(c=>c.clone()),t.sort((c,p)=>p.scale-c.scale),t.forEach((c,p)=>c.level=p);for(const c of t)!l&&r>0&&r>=c.scale&&(o=c.level,l=!0),!u&&i>0&&i>=c.scale&&(a=e?e.level:-1,u=!0),e=c;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((c,p)=>{this._lodByScale[c.scale]=c,this._scales[p]=c.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(s){const u=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*u,n.y=s.y+(n.y-s.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.round(e-.5),i=Math.round(e);return t[i]+(i-e)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new MP({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};h([f({readOnly:!0})],Co.prototype,"effectiveLODs",void 0),h([f({readOnly:!0})],Co.prototype,"effectiveMinZoom",void 0),h([f({readOnly:!0})],Co.prototype,"effectiveMaxZoom",void 0),h([f({readOnly:!0})],Co.prototype,"effectiveMinScale",void 0),h([f({readOnly:!0})],Co.prototype,"effectiveMaxScale",void 0),h([f()],Co.prototype,"lods",void 0),h([f()],Co.prototype,"minZoom",void 0),h([f()],Co.prototype,"maxZoom",void 0),h([f()],Co.prototype,"minScale",void 0),h([f()],Co.prototype,"maxScale",void 0),h([f()],Co.prototype,"snapToZoom",void 0),Co=MP=h([me("esri.views.2d.constraints.ZoomConstraint")],Co);const Mse=Co,A8e={base:null,key:"type",typeMap:{extent:qt,polygon:wo}};let Zi=class extends kt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),(this._get("version")??0)+1}get _defaultLODs(){const e=this.view?.defaultsFromMap?.tileInfo,t=this.view?.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){return new Oy({geometry:this.geometry,spatialReference:this.view?.spatialReference})}get _rotation(){return new Ese({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,r=this.minZoom,i=this.maxZoom,n=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===r&&e.maxZoom===i&&e.minScale===n&&e.maxScale===s&&e.snapToZoom===o?e:new Mse({lods:t,minZoom:r,maxZoom:i,minScale:n,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};h([f({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Zi.prototype,"effectiveLODs",void 0),h([f({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Zi.prototype,"effectiveMinScale",void 0),h([f({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Zi.prototype,"effectiveMaxScale",void 0),h([f({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Zi.prototype,"effectiveMinZoom",void 0),h([f({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Zi.prototype,"effectiveMaxZoom",void 0),h([f({types:A8e,value:null})],Zi.prototype,"geometry",null),h([f({type:[rr]})],Zi.prototype,"lods",void 0),h([f()],Zi.prototype,"minScale",void 0),h([f()],Zi.prototype,"maxScale",void 0),h([f()],Zi.prototype,"minZoom",void 0),h([f()],Zi.prototype,"maxZoom",void 0),h([f()],Zi.prototype,"rotationEnabled",void 0),h([f()],Zi.prototype,"snapToZoom",void 0),h([f()],Zi.prototype,"view",void 0),h([f({readOnly:!0})],Zi.prototype,"version",null),h([f()],Zi.prototype,"_defaultLODs",null),h([f({type:Oy})],Zi.prototype,"_geometry",null),h([f({type:Ese})],Zi.prototype,"_rotation",null),h([f({readOnly:!0,type:Mse})],Zi.prototype,"_zoom",null),Zi=h([me("esri.views.2d.MapViewConstraints")],Zi);const Ise=Zi;function $8e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function C8e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Tse(e,t,r,i,n,s,o,a,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function Ase(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function k8e(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function O8e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=c*o-a*u,d=-c*s+a*l,m=u*s-o*l;let g=r*p+i*d+n*m;return g?(g=1/g,e[0]=p*g,e[1]=(-c*i+n*u)*g,e[2]=(a*i-n*o)*g,e[3]=d*g,e[4]=(c*r-n*l)*g,e[5]=(-a*r+n*s)*g,e[6]=m*g,e[7]=(-u*r+i*l)*g,e[8]=(o*r-i*s)*g,e):null}function R8e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-a*u,e[1]=n*u-i*c,e[2]=i*a-n*o,e[3]=a*l-s*c,e[4]=r*c-n*l,e[5]=n*s-r*a,e[6]=s*u-o*l,e[7]=i*l-r*u,e[8]=r*o-i*s,e}function P8e(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*s-o*l)+r*(-u*n+o*a)+i*(l*n-s*a)}function GD(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],m=r[1],g=r[2],b=r[3],v=r[4],_=r[5],E=r[6],I=r[7],x=r[8];return e[0]=d*i+m*o+g*u,e[1]=d*n+m*a+g*c,e[2]=d*s+m*l+g*p,e[3]=b*i+v*o+_*u,e[4]=b*n+v*a+_*c,e[5]=b*s+v*l+_*p,e[6]=E*i+I*o+x*u,e[7]=E*n+I*a+x*c,e[8]=E*s+I*l+x*p,e}function IP(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=r[0],m=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=d*i+m*o+u,e[7]=d*n+m*a+c,e[8]=d*s+m*l+p,e}function $se(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=Math.sin(r),m=Math.cos(r);return e[0]=m*i+d*o,e[1]=m*n+d*a,e[2]=m*s+d*l,e[3]=m*o-d*i,e[4]=m*a-d*n,e[5]=m*l-d*s,e[6]=u,e[7]=c,e[8]=p,e}function L8e(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function N8e(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function D8e(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function F8e(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function j8e(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function U8e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function V8e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,u=r*o,c=i*o,p=i*a,d=n*o,m=n*a,g=n*l,b=s*o,v=s*a,_=s*l;return e[0]=1-p-g,e[3]=c-_,e[6]=d+v,e[1]=c+_,e[4]=1-u-g,e[7]=m-b,e[2]=d-v,e[5]=m+b,e[8]=1-u-p,e}function B8e(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10],p=c*o-a*u,d=-c*s+a*l,m=u*s-o*l,g=r*p+i*d+n*m;if(!g)return null;const b=1/g;return e[0]=p*b,e[1]=(-c*i+n*u)*b,e[2]=(a*i-n*o)*b,e[3]=d*b,e[4]=(c*r-n*l)*b,e[5]=(-a*r+n*s)*b,e[6]=m*b,e[7]=(-u*r+i*l)*b,e[8]=(o*r-i*s)*b,e}function z8e(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],m=t[11],g=t[12],b=t[13],v=t[14],_=t[15],E=r*a-i*o,I=r*l-n*o,x=r*u-s*o,T=i*l-n*a,M=i*u-s*a,k=n*u-s*l,D=c*b-p*g,B=c*v-d*g,G=c*_-m*g,W=p*v-d*b,K=p*_-m*b,ne=d*_-m*v;let ye=E*ne-I*K+x*W+T*G-M*B+k*D;return ye?(ye=1/ye,e[0]=(a*ne-l*K+u*W)*ye,e[1]=(l*G-o*ne-u*B)*ye,e[2]=(o*K-a*G+u*D)*ye,e[3]=(n*K-i*ne-s*W)*ye,e[4]=(r*ne-n*G+s*B)*ye,e[5]=(i*G-r*K-s*D)*ye,e[6]=(b*k-v*M+_*T)*ye,e[7]=(v*x-g*k-_*I)*ye,e[8]=(g*M-b*x+_*E)*ye,e):null}function G8e(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function q8e(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function H8e(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function W8e(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function Cse(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function J8e(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Z8e(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function K8e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Y8e(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],p=t[0],d=t[1],m=t[2],g=t[3],b=t[4],v=t[5],_=t[6],E=t[7],I=t[8];return Math.abs(r-p)<=Qt*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-d)<=Qt*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(n-m)<=Qt*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=Qt*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-b)<=Qt*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-v)<=Qt*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(l-_)<=Qt*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-E)<=Qt*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-I)<=Qt*Math.max(1,Math.abs(c),Math.abs(I))}function Q8e(e){const t=Qt,r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+c*c))<=t}const X8e=GD,ePe=Cse;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:$8e,copy:C8e,set:Tse,identity:Ase,transpose:k8e,invert:O8e,adjoint:R8e,determinant:P8e,multiply:GD,translate:IP,rotate:$se,scale:L8e,scaleByVec2:N8e,fromTranslation:D8e,fromRotation:F8e,fromScaling:j8e,fromMat2d:U8e,fromQuat:V8e,normalFromMat4Legacy:B8e,normalFromMat4:z8e,projection:G8e,str:q8e,frob:H8e,add:W8e,subtract:Cse,multiplyScalar:J8e,multiplyScalarAndAdd:Z8e,exactEquals:K8e,equals:Y8e,isOrthoNormal:Q8e,mul:X8e,sub:ePe},Symbol.toStringTag,{value:"Module"}));function w5(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function tPe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function rPe(e,t,r,i,n,s,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function iPe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,create:w5,clone:tPe,fromValues:rPe,createView:iPe},Symbol.toStringTag,{value:"Module"}));function kse(){return new Float32Array(2)}function nPe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Cv(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function sPe(e,t){return new Float32Array(e,t,2)}function Ose(){return kse()}function Rse(){return Cv(1,1)}function Pse(){return Cv(1,0)}function Lse(){return Cv(0,1)}const oPe=Ose(),aPe=Rse(),lPe=Pse(),uPe=Lse();Object.freeze(Object.defineProperty({__proto__:null,create:kse,clone:nPe,fromValues:Cv,createView:sPe,zeros:Ose,ones:Rse,unitX:Pse,unitY:Lse,ZEROS:oPe,ONES:aPe,UNIT_X:lPe,UNIT_Y:uPe},Symbol.toStringTag,{value:"Module"}));function cPe(e){return e instanceof Float32Array&&e.length>=2}function hPe(e){return Array.isArray(e)&&e.length>=2}function YC(e){return cPe(e)||hPe(e)}var TP;const Mh=[0,0];let Gd=TP=class extends Je{constructor(e){super(e),this._viewpoint2D={center:Xi(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new qt,this.id=0,this.inverseTransform=Tf(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Tf(),this.transformNoRotation=Tf(),this.displayMat3=w5(),this.displayViewMat3=w5(),this.viewMat3=w5(),this.viewMat2d=Lne(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=ic(r,e.viewpoint),this._set("size",mx(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new TP({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return YC(t)?Vc(e,t,this.inverseTransform):(Mh[0]=t,Mh[1]=r,Vc(e,Mh,this.inverseTransform))}toScreen(e,t,r){return YC(t)?Vc(e,t,this.transform):(Mh[0]=t,Mh[1]=r,Vc(e,Mh,this.transform))}toScreenNoRotation(e,t,r){return YC(t)?Vc(e,t,this.transformNoRotation):(Mh[0]=t,Mh[1]=r,Vc(e,Mh,this.transformNoRotation))}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return BD(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new Xc({targetGeometry:new At(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=Pb(o),this.rotation=i,this.scale=r,this.spatialReference=t,mx(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;Tse(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=Ase(this.viewMat3),c=Cv(s[0]/2,s[1]/2),p=Cv(-s[0]/2,-s[1]/2),d=wN(i);IP(u,u,c),$se(u,u,d),IP(u,u,p),GD(this.displayViewMat3,this.displayMat3,u);const m=DD(this.viewMat2d,c);return K4(m,m,d),dx(m,m,p),a8e(this.extent,o,s),zD(this.transform,o,s,n),LD(this.inverseTransform,this.transform),f8e(this.transformNoRotation,o,s,n),this.worldScreenWidth=y8e(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};h([f({readOnly:!0})],Gd.prototype,"id",void 0),h([f({value:1,json:{write:!0}})],Gd.prototype,"pixelRatio",null),h([f({json:{write:!0}})],Gd.prototype,"size",null),h([f()],Gd.prototype,"spatialReference",void 0),h([f({type:Xc,json:{write:!0}})],Gd.prototype,"viewpoint",null),Gd=TP=h([me("esri.views.2d.ViewState")],Gd);const xq=Gd;var AP,$P;let up=AP=class extends kt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new AP({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([f()],up.prototype,"left",void 0),h([f()],up.prototype,"top",void 0),h([f()],up.prototype,"right",void 0),h([f()],up.prototype,"bottom",void 0),up=AP=h([me("esri.views.2d.PaddedViewState.Padding")],up);let v1=$P=class extends xq{constructor(...e){super(...e),this.paddedViewState=new xq,this._updateContent=(()=>{const t=Xi();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;Wn(t,i.left+i.right,i.top+i.bottom),yx(t,r,t),mx(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.own(it(()=>[this.size,this.padding],()=>this._updateContent(),Bf)),this.padding=new up,this.size=[0,0]}set padding(e){this._set("padding",e||new up)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,v8e(t,e,this._get("size"),this._get("padding"));const r=this._viewpoint2D,i=t.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=i.spatialReference,this._update()}}clone(){return new $P({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([f()],v1.prototype,"paddedViewState",void 0),h([f({type:up})],v1.prototype,"padding",null),h([f()],v1.prototype,"viewpoint",null),v1=$P=h([me("esri.views.2d.PaddedViewState")],v1);const pPe=v1;class dPe{constructor(t,r){this.item=t,this.controller=r,this.promise=null}}class Nse{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new yI(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&de(r)&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=Ka(r,()=>n.abort()));const o=()=>{const c=this._processingItems.get(t);c&&c.controller.abort(),a(),u.reject(wi())},a=()=>{l.remove(),de(s)&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=KL(n.signal,o),u=Ap();return this._deferreds.set(t,u),this._controllers.set(t,n),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=sb(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(Ne(t))return;let r;const i=new AbortController,n=new dPe(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}jp(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){return{update:t=>this.runTask(t)}}}function fPe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const QC=new Set,vE=[],A0=new Map,Sq=[0,0];let ud=class extends kt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new Nse({concurrency:e,process:(r,i)=>{const n=this._keyToItem.get(r);return t(n,{signal:i})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const r=e.key.id+"-"+t;if(this.has(r))return this.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(n,n),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(u=>{const c=this._keyToItem.get(u),p=this.tileInfoView.getTileScale(c.key);A0.has(p)||(A0.set(p,[]),r=Math.max(p,r),i=Math.min(p,i)),A0.get(p).push(c.key),QC.add(p)});let n=this.state.scale;A0.has(n)||(fPe(vE,QC),vE.sort((u,c)=>u-c),n=vE.reduce((u,c)=>Math.abs(c-n)<Math.abs(u-n)?c:u,vE[0])),n=Math.min(n,r),n=Math.max(n,i);const s=A0.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((u,c)=>{const p=o.denormalizeCol(u.col,u.world),d=o.denormalizeCol(c.col,c.world);return Math.sqrt((a-p)*(a-p)+(l-u.row)*(l-u.row))-Math.sqrt((a-d)*(a-d)+(l-c.row)*(l-c.row))}),QC.clear(),A0.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Sq,o.key);const a=MS(Sq,r);a<i&&(i=a,n=o.key)}),n.id}};h([f({constructOnly:!0})],ud.prototype,"concurrency",void 0),h([f({constructOnly:!0})],ud.prototype,"process",void 0),h([f()],ud.prototype,"state",void 0),h([f({constructOnly:!0})],ud.prototype,"strategy",void 0),h([f({constructOnly:!0})],ud.prototype,"tileInfoView",void 0),h([f({readOnly:!0})],ud.prototype,"updating",null),ud=h([me("esri.views.2d.tiling.PagedTileQueue")],ud);class Fo{constructor(t,r,i,n){this.set(t,r,i,n)}static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Fo(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Fo(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new Fo(t,r,i,n),new Fo(t,r,i+1,n),new Fo(t,r+1,i,n),new Fo(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Fo.pool=new zu(Fo,null,null,25,50);function cd(e,t){return[e,t]}function Mm(e,t,r){return e[0]=t,e[1]=r,e}function mPe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const Xl=new Fo("0/0/0/0");class qD{constructor(t,r,i,n,s,o,a,l,u,c,p,d){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=c,this.worldSize=p,this.wrap=d}static create(t,r,i=null){const n=za(t.spatialReference),s=r.origin||cd(t.origin.x,t.origin.y),o=cd(t.size[0]*r.resolution,t.size[1]*r.resolution),a=cd(-1/0,-1/0),l=cd(1/0,1/0),u=cd(1/0,1/0);de(i)&&(Mm(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),Mm(l,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),Mm(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:c,rows:p}=r;let d,m,g,b;return!i&&c&&p&&(Mm(a,c[0],p[0]),Mm(l,c[1],p[1]),Mm(u,c[1]-c[0]+1,p[1]-p[0]+1)),t.isWrappable?(d=cd(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),u[1]),m=cd(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=cd(d[0]+m[0]-1,l[1]),b=!0):(m=a,g=l,d=u,b=!1),new qD(r.level,r.resolution,r.scale,s,a,l,u,o,m,g,d,b)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Xl.set(r);const n=i?Xl.col:this.denormalizeCol(Xl.col,Xl.world),s=Xl.row;return mPe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){Xl.set(r);const n=i?Xl.col:this.denormalizeCol(Xl.col,Xl.world);return Array.isArray(t)?Mm(t,this.getXForColumn(n),this.getYForRow(Xl.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Xl.row)),t}}class kv{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++)t.call(r,s,o,n.normalizeCol(u),n.getWorldForColumn(u))}}kv.pool=new zu(kv);class XC{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}}const Si=new Fo("0/0/0/0");class HD{constructor(t,r,i,n,s,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,l=o-n,u=l!==0?a/l:0,c=(Math.ceil(n)-n)*u,p=(Math.floor(n)-n)*u;return new HD(i,Math.floor(n),Math.ceil(o),u,a<0?c:p,a<0?p:c,a<0?s:i,a<0?i:s)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const ya=[[0,0],[0,0],[0,0],[0,0]],yPe=1e-6;class gPe{constructor(t,r=null){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=t.lods.slice();i.sort((s,o)=>o.scale-s.scale);const n=this._lodInfos=i.map(s=>qD.create(t,s,r));i.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Si.set(r);const n=this._infoByLevel[Si.level];return n?n.getTileBounds(t,Si,i):t}getTileCoords(t,r,i=!1){Si.set(r);const n=this._infoByLevel[Si.level];return n?n.getTileCoords(t,Si,i):t}getTileCoverage(t,r=192,i="closest"){const n=i==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),s=kv.pool.acquire(n),o=this._wrap;let a,l,u,c=1/0,p=-1/0;const d=s.spans;ya[0][0]=ya[0][1]=ya[1][1]=ya[3][0]=-r,ya[1][0]=ya[2][0]=t.size[0]+r,ya[2][1]=ya[3][1]=t.size[1]+r;for(const v of ya)t.toMap(v,v),v[0]=n.getColumnForX(v[0]),v[1]=n.getRowForY(v[1]);const m=[];let g=3;for(let v=0;v<4;v++){if(ya[v][1]===ya[g][1]){g=v;continue}const _=HD.create(ya[v],ya[g]);c=Math.min(_.ymin,c),p=Math.max(_.ymax,p),m[_.ymin]===void 0&&(m[_.ymin]=[]),m[_.ymin].push(_),g=v}if(c==null||p==null||p-c>100)return null;let b=[];for(a=c;a<p;){m[a]!=null&&(b=b.concat(m[a])),l=1/0,u=-1/0;for(let v=b.length-1;v>=0;v--){const _=b[v];l=Math.min(l,_.getLeftCol()),u=Math.max(u,_.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const v=Math.floor(u/n.worldSize[0]);for(let _=Math.floor(l/n.worldSize[0]);_<=v;_++)d.push(new XC(a,Math.max(n.getFirstColumnForWorld(_),l),Math.min(n.getLastColumnForWorld(_),u)))}else d.push(new XC(a,l,u));else l>n.last[0]||u<n.first[0]||(l=Math.max(l,n.first[0]),u=Math.min(u,n.last[0]),d.push(new XC(a,l,u)));a+=1;for(let v=b.length-1;v>=0;v--){const _=b[v];_.ymax>=a?_.incrRow():b.splice(v,1)}}return s}getTileParentId(t){Si.set(t);const r=this._infoByLevel[Si.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Si,this._lodInfos[i],Si),Si.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Si.set(r);const i=this._infoByLevel[Si.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(Si,n,Si);const o=n.denormalizeCol(Si.col,Si.world);for(const a of t.spans)if(a.row===Si.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,l,u]=t.spans.reduce((b,v)=>(b[0]=Math.min(b[0],v.row),b[1]=Math.max(b[1],v.row),b[2]=Math.min(b[2],v.colFrom),b[3]=Math.max(b[3],v.colTo),b),[1/0,-1/0,1/0,-1/0]),c=i.denormalizeCol(Si.col,Si.world),p=n.getColumnForX(i.getXForColumn(c)),d=n.getRowForY(i.getYForRow(Si.row)),m=n.getColumnForX(i.getXForColumn(c+1))-1,g=n.getRowForY(i.getYForRow(Si.row+1))-1;return!(p>u||m<l||d>a||g<o)}const s=n.denormalizeCol(Si.col,Si.world);return t.spans.some(o=>o.row===Si.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=za(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+yPe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}}function vPe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const ek=new Set,bE=[],$0=new Map,Eq=[0,0];let Yh=class extends kt{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:r}=this;this._queue=new Nse({concurrency:e,process:(i,n)=>{const s=this._keyToItem.get(i);return t(s,{signal:n})},peeker:r==="scale-first"?i=>this._peekByScaleFirst(i):i=>this._peekByCenterFirst(i)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),i=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),r.then(i,i),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(u=>{const c=this._keyToItem.get(u),p=this.tileInfoView.getTileScale(c.key);$0.has(p)||($0.set(p,[]),r=Math.max(p,r),i=Math.min(p,i)),$0.get(p).push(c.key),ek.add(p)});let n=this.state.scale;$0.has(n)||(vPe(bE,ek),bE.sort((u,c)=>u-c),n=bE.reduce((u,c)=>Math.abs(c-n)<Math.abs(u-n)?c:u,bE[0])),n=Math.min(n,r),n=Math.max(n,i);const s=$0.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((u,c)=>{const p=o.denormalizeCol(u.col,u.world),d=o.denormalizeCol(c.col,c.world);return Math.sqrt((a-p)*(a-p)+(l-u.row)*(l-u.row))-Math.sqrt((a-d)*(a-d)+(l-c.row)*(l-c.row))}),ek.clear(),$0.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Eq,o.key);const a=MS(Eq,r);a<i&&(i=a,n=o.key)}),n.id}};h([f({constructOnly:!0})],Yh.prototype,"concurrency",void 0),h([f({constructOnly:!0})],Yh.prototype,"process",void 0),h([f()],Yh.prototype,"state",void 0),h([f({constructOnly:!0})],Yh.prototype,"strategy",void 0),h([f({constructOnly:!0})],Yh.prototype,"tileInfoView",void 0),h([f({readOnly:!0})],Yh.prototype,"updating",null),Yh=h([me("esri.views.2d.tiling.TileQueue")],Yh);const Ilt=Yh;class bPe{constructor(t,r,i){this.maxSize=t,this.tileInfoView=r,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return null;const i=r.key.level,n=this._tileKeysPerLevel[i];Mq(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this.tileInfoView.tileInfo,l=i*o[0],u=i*o[1],c=[0,0],p=[0,0];for(s.sort((d,m)=>(c[0]=a.x+l*(d.col+.5),c[1]=a.y-u*(d.row+.5),p[0]=a.x+l*(m.col+.5),p[1]=a.y-u*(m.row+.5),KI(c,r)-KI(p,r)));s.length>0;){const d=s.pop();if(this._removeTile(d.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(r),Mq(this._tilePerId,t)}}function Mq(e,t){e.delete(t)}const Im=new Fo(0,0,0,0),ul=new Map,C0=[],wE=[];class Tlt{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new bPe(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:r,tileIndex:i}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(wE.length=0,C0.length=0,ul.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=n,{level:u}=l,{scale:c,center:p,resolution:d}=t.state,m=!t.stationary&&c>this._previousScale;if(this._previousScale=c,this.tiles.length=0,!r&&(c>s||c<o))return this.tiles.length=0,ul.clear(),i.forEach(_=>{this.releaseTile(_)}),i.clear(),wE.length=0,C0.length=0,ul.clear(),kv.pool.release(n),!0;i.forEach(_=>_.visible=!0);let g=0,b=0;if(a.length>0)for(const{row:_,colFrom:E,colTo:I}of a)for(let x=E;x<=I;x++){g++;const T=Im.set(u,_,l.normalizeCol(x),l.getWorldForColumn(x)).id;if(i.has(T)){const M=i.get(T);M.isReady?(ul.set(T,M),b++):m||this._addParentTile(T,ul)}else{let M;if(this._tileCache&&this._tileCache.has(T)){if(M=this._tileCache.pop(T),this.tileIndex.set(T,M),M.isReady){ul.set(T,M),b++;continue}}else M=this.acquireTile(Im),this.tileIndex.set(T,M);m||this._addParentTile(T,ul)}}const v=b===g;i.forEach((_,E)=>{if(Im.set(E),ul.has(E))return;const I=this.tileInfoView.intersects(n,Im),x=this.cachePolicy==="purge"?Im.level!==u:Im.level>u;!I||!m&&v?!x&&I||C0.push(E):_.isReady?x&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Im,u)?C0.push(E):wE.push(E):x&&C0.push(E)});for(const _ of wE){const E=i.get(_);E&&E.isReady&&ul.set(_,E)}for(const _ of C0){const E=i.get(_);this._tileCache?this._tileCache.add(E):this.releaseTile(E),i.delete(_)}return ul.forEach(_=>this.tiles.push(_)),i.forEach(_=>{ul.has(_.key.id)||(_.visible=!1)}),this._tileCache&&this._tileCache.prune(u,p,d),kv.pool.release(n),ul.clear(),v}clear(t=!0){const{tileIndex:r}=this;t&&r.forEach(i=>{this.releaseTile(i)}),r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n&&n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n&&n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=jl();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=jl();if(this.tileInfoView.getTileBounds(s,n.key,!0),H1e(s,i))return!0}return!1}}function WD(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class Iq extends ts{constructor(t,r){super(!0),this.view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){WD(t.data,"primary")&&(t.stopPropagation(),r?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class wPe extends ts{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,c=u/this._currentScale;a.setViewpointImmediate(c),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:c}=l;if(!c||!u)return void a.end();const p=l.snapScale(this._currentScale),d=(s.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(d);break}}}}class eA{constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this.currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this.currentCount=0}this.previousEvent=t}_emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}_emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}_emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class _Pe extends ts{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this.dragEventSeparator=new eA({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&WD(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class xPe extends ts{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r;const n=this.view.mapViewNavigation;this.dragEventSeparator=new eA({start:(s,o)=>{n.rotate.begin(this.view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this.view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&WD(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this.dragEventSeparator.handle(s))}}function eu(e){let t=e*e;return e<0&&(t*=-1),t}function SPe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function EPe(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=eu(n.axes[0]),i.translation[1]=eu(n.axes[1]),i.translation[2]=eu(n.buttons[7])-eu(n.buttons[6]),i.heading=eu(n.axes[2]),i.tilt=eu(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*eu(n.axes[0]),i.translation[1]=1.2*eu(n.axes[1]),i.translation[2]=2*-eu(n.axes[2]),i.heading=1.2*eu(n.axes[5]),i.tilt=1.2*eu(n.axes[3])),i.tilt*=o,xN(i.translation,i.translation,a),i}function MPe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class IPe extends ts{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new es,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([it(()=>this.view.navigation.gamepad?.enabled,r=>{r?(this.handle.resume(),this.frameTask||(this.frameTask=dv({update:i=>this._frameUpdate(i.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},Br)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this.view.navigation.gamepad.device;r&&t.data.device!==r||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,SPe(this.transformation)):(this.currentDevice=t.data.device,EPe(t.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(t){const r=this.transformation;if(MPe(r))return;const i=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,s=APe*n*t;X4(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*$Pe*t,a=this.view.constraints.rotationEnabled?-r.heading*TPe*t:0,l=this.view.size,u=[l[0]/2,l[1]];_se(i,i,o,a,u,l);const c=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=c}}const TPe=.06,APe=.7,$Pe=6e-4;class CPe extends ts{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=this._keyMap[t.data.key];if(this._pressed=i!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class kPe extends ts{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}var j1;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(j1||(j1={}));class OPe extends ts{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=j1.IN),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=j1.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case j1.IN:o=s.zoomIn();break;case j1.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}}const RPe=.6;class PPe extends ts{constructor(t,r){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this.view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/RPe**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}}class LPe extends ts{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this.dragEventSeparator=new eA({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function Tq(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value?r.value:1:0),axes:t.axes.map(r=>FPe(r,e.axisThreshold))}:{buttons:[],axes:[]}}function NPe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function DPe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function FPe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}class jPe{constructor(t,r){this.element=t,this.input=r,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this.inputDevices[a];l&&(this._emitGamepadEvent(o,Tq(l),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(l),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}_connectGamepad(t){const r=new FD(t);r.deviceType!=="unknown"&&(this.inputDevices[t.index]=r,this.input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=dv({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this.element.contains(document.activeElement),i=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!r;this._forEachGamepad(n=>{const s=this.inputDevices[n.index];if(!s)return;const o=this.latestUpdate[n.index],a=Tq(s),l=i||DPe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||NPe(o.state,a))||this._emitGamepadEvent(n,a,!l)})}_forEachGamepad(t){const r=window.navigator.getGamepads();for(let i=0;i<r.length;i++){const n=r[i];this._validate(n)&&t(n)}}_emitGamepadEvent(t,r,i){const n=this.latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this.callback&&this.callback({device:this.inputDevices[t.index],state:r,action:o})}_validate(t){if(!t||!t.connected)return!1;for(let r=0;r<t.axes.length;r++)if(isNaN(t.axes[r]))return!1;return!0}}const Aq=We("trident"),$q=We("edge"),UPe=We("chrome"),VPe=We("ff"),BPe=We("safari"),k0={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class tA{constructor(t,r){this.input=r,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new jPe(t,this.input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(tk[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&tk[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(tk[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,r){r?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?k0.touchNone:k0.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?k0.touchPan:k0.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(k0.touchNone),this._element.classList.remove(k0.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=Qne(this._element,t);return tA.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const i=SRe(r);i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:(Aq||$q)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Aq||$q?i*=.7:UPe||BPe?i*=.6:VPe&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}tA.test={disableSubpixelCoordinates:!1};const tk={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class zPe extends ts{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function JD(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function GPe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function qPe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Kn()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[I,x]=e,[T,M]=[x.x-I.x,x.y-I.y];return t.radius=Math.sqrt(T*T+M*M)/2,t.center.x=(I.x+x.x)/2,t.center.y=(I.y+x.y)/2,t}let r=0,i=0;for(let I=0;I<e.length;I++)r+=e[I].x,i+=e[I].y;r/=e.length,i/=e.length;const n=e.map(I=>I.x-r),s=e.map(I=>I.y-i);let o=0,a=0,l=0,u=0,c=0,p=0,d=0;for(let I=0;I<n.length;I++){const x=n[I],T=s[I],M=x*x,k=T*T;o+=M,a+=k,l+=x*T,u+=M*x,c+=k*T,p+=x*k,d+=T*M}const m=.5*(u+p),g=.5*(c+d),b=o*a-l*l,v=(m*a-g*l)/b,_=(o*g-l*m)/b,E=Kn(v+r,_+i);return{radius:Math.sqrt(v*v+_*_+(o+a)/e.length),center:E}}const Pl={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class HPe extends ts{constructor(t=Pl.maximumDoubleClickDelay,r=Pl.maximumDoubleClickDistance,i=Pl.maximumDoubleTouchDelay,n=Pl.maximumDoubleTouchDistance,s=Zx){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimeout=Jo(t.doubleClickTimeout))}get hasPendingInputs(){return ZT(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_handleImmediateClick(t){const r=t.data,i=this._pointerId(r),n=this._pointerState.get(i);if(n){const s=r.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;JD(n.event.data,r)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(t)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const r=this._pointerId(t.data),i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(r,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const r=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(r,!0)}_handleDrag(t){const r=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(r,!0)}_clearDoubleClickTimeout(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,r&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class WPe extends ts{constructor(t=Pl.maximumDoubleClickDelay,r=Pl.maximumDoubleClickDistance,i=Pl.maximumDoubleTouchDelay,n=Pl.maximumDoubleTouchDistance,s=Zx){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Kn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new eA({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return ZT(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout.remove(),r.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,r,i){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=i;return{action:t,delta:r,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",Kn(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=Kn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,r);this._doubleTapDrag.emit(o,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=Kn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,r);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=this._pointerId(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),JD(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:r}=t,{pointerId:i,button:n,pointerType:s}=r;return s==="mouse"?`${i}:${n}`:`${s}`}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=this._pointerId(r),s=i==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class JPe extends ts{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:r.buttons,timestamp:n,pointers:ZPe(this.activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=_E(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(r,n);const s=_5(n,Dse(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this.activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=_E(this.activePointerMap).angle;this.activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=_E(this.activePointerMap);this.activePointerMap.forEach(i=>{i.initialAngle=_5(i,r)-t,i.lastAngle=_5(i,r)-t})}_emitEvent(t,r,i){const n=_E(this.activePointerMap);this.drag.emit(this._createPayload(t,r,n,i),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this.activePointerMap.get(r)&&(this.activePointerMap.size===1?(this._updatePointer(t.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this.isCurrentDragSuppressed&&this._emitEvent("update",i,n)):(this._addPointer(i),this._emitEvent("added",i,n),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(i),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",i,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function Dse(e){const t=[];return e.forEach(r=>{t.push(Kn(r.event.x,r.event.y))}),qPe(t)}function _E(e){const t=Dse(e);let r=0;return e.forEach(i=>{let n=_5(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n,r+=n-i.initialAngle}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function ZPe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function _5(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var Cq;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(Cq||(Cq={}));class KPe extends ts{constructor(t=Pl.maximumDoubleClickDelay,r=Pl.maximumDoubleClickDistance,i=Pl.maximumDoubleTouchDelay,n=Pl.maximumDoubleTouchDistance,s=Zx){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",o=>{this._handlePointerLoss(o,"pointer-up")}),this.registerIncoming("pointer-capture-lost",o=>{this._handlePointerLoss(o,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",o=>{this._handlePointerLoss(o,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=this._pointerId(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerLoss(t,r){const i=t.data,n=this._pointerId(i),s=this._pointerState.get(n);if(s&&r==="pointer-up"&&s.downButton===i.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;JD(o,t.data)>a?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_removeState(t){const r=this._pointerId(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const Mw={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class YPe extends ts{constructor(t=Mw.maximumClickDelay,r=Mw.movementUntilMouseDrag,i=Mw.movementUntilPenDrag,n=Mw.movementUntilTouchDrag,s=Mw.holdDelay,o=Zx){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=r,this.movementUntilPenDrag=i,this.movementUntilTouchDrag=n,this.holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this.holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_createPointerDragData(t,r,i){return{action:t,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:i}}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,r),void 0,n.modifiers):GPe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,r)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}}const xE={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let b1=class extends kt{constructor(){super(...arguments),this._handles=new es}initialize(){const e=()=>this.view?.ready;this._handles.add([Qa(()=>!e(),()=>this._disconnect()),Qa(e,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new tA(e,this.view.input),r=[new KPe,new YPe,new HPe,new JPe(this.view.navigation),new WPe],i=new Ud({eventSource:t,recognizers:r});i.installHandlers("prevent-context-menu",[new zPe],If.INTERNAL),i.installHandlers("navigation",[new LPe(this.view),new IPe(this.view),new PPe(this.view),new Iq(this.view),new Iq(this.view,[xE.counter]),new _Pe(this.view,"primary"),new CPe(this.view,xE.pan),new OPe(this.view,xE.zoom),new kPe(this.view,xE.rotate),new xPe(this.view,"secondary"),new wPe(this.view,"touch")],If.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,it(()=>this.view?.navigation?.browserTouchPanEnabled,n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},Br)}get test(){return{inputManager:this._inputManager}}};h([f()],b1.prototype,"view",void 0),h([f()],b1.prototype,"latestPointerType",null),h([f()],b1.prototype,"latestPointerLocation",null),b1=h([me("esri.views.2d.input.MapViewInputManager")],b1);const QPe=b1;var kq,Oq,Rq,Fse={exports:{}};kq=Fse,Oq=function(){function e(n,s,o,a,l){t(n,s,o||0,a||n.length-1,l||i)}function t(n,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,c=s-o+1,p=Math.log(u),d=.5*Math.exp(2*p/3),m=.5*Math.sqrt(p*d*(u-d)/u)*(c-u/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-c*d/u+m)),Math.min(a,Math.floor(s+(u-c)*d/u+m)),l)}var g=n[s],b=o,v=a;for(r(n,o,s),l(n[a],g)>0&&r(n,o,a);b<v;){for(r(n,b,v),b++,v--;l(n[b],g)<0;)b++;for(;l(n[v],g)>0;)v--}l(n[o],g)===0?r(n,o,v):r(n,++v,a),v<=s&&(o=v+1),s<=v&&(a=v-1)}}function r(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function i(n,s){return n<s?-1:n>s?1:0}return e},(Rq=Oq())!==void 0&&(kq.exports=Rq);const XPe=Fse.exports;function QI(e,t){if(!(this instanceof QI))return new QI(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function eLe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function O0(e,t){O_(e,0,e.children.length,t,e)}function O_(e,t,r,i,n){n||(n=w1(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],R_(n,e.leaf?i(s):s);return n}function R_(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Pq(e,t){return e.minX-t.minX}function Lq(e,t){return e.minY-t.minY}function rk(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function SE(e){return e.maxX-e.minX+(e.maxY-e.minY)}function tLe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function rLe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function ik(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function EE(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function w1(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nq(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,XPe(e,s,t,r,n),o.push(t,s,s,r))}QI.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!EE(e,t))return r;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],EE(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):ik(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!EE(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],EE(e,o=t.leaf?r(s):s)){if(t.leaf||ik(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=w1([]),this},remove:function(e,t){if(!e)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=u.pop(),s=!0),o.leaf&&(n=eLe(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!ik(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(l.push(o),u.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:Pq,compareMinY:Lq,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return O0(n=w1(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=w1([])).leaf=!1,n.height=i;var a,l,u,c,p=Math.ceil(s/o),d=p*Math.ceil(Math.sqrt(o));for(Nq(e,t,r,d,this.compareMinX),a=t;a<=r;a+=d)for(Nq(e,a,u=Math.min(a+d-1,r),p,this.compareMinY),l=a;l<=u;l+=p)c=Math.min(l+p-1,u),n.children.push(this._build(e,l,c,i-1));return O0(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,l,u,c,p;i.push(t),!t.leaf&&i.length-1!==r;){for(c=p=1/0,n=0,s=t.children.length;n<s;n++)l=rk(o=t.children[n]),(u=tLe(e,o)-l)<p?(p=u,c=l<c?l:c,a=o):u===p&&l<c&&(c=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),R_(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=w1(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,O0(r,this.toBBox),O0(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=w1([e,t]),this.data.height=e.height+1,this.data.leaf=!1,O0(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,l,u,c;for(l=u=1/0,i=t;i<=r-t;i++)o=rLe(n=O_(e,0,i,this.toBBox),s=O_(e,i,r,this.toBBox)),a=rk(n)+rk(s),o<l?(l=o,c=i,u=a<u?a:u):o===l&&a<u&&(u=a,c=i);return c},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:Pq,n=e.leaf?this.compareMinY:Lq;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=O_(e,0,t,o),l=O_(e,r-t,r,o),u=SE(a)+SE(l);for(n=t;n<r-t;n++)s=e.children[n],R_(a,e.leaf?o(s):s),u+=SE(a);for(n=r-t-1;n>=t;n--)s=e.children[n],R_(l,e.leaf?o(s):s),u+=SE(l);return u},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)R_(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():O0(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class XI{constructor(t,r){this.key=new Fo(0,0,0,0),this.bounds=jl(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return qt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),r=fo.acquire();for(let i=0;i<t.length;i++)r[i]=new XI(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return JX.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Tm={added:[],removed:[]},nk=new Set,iLe=new Fo(0,0,0,0);class nLe extends im{constructor(t){super(),this._tiles=new Map,this._index=QI(9,We("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new XI(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++){const c=iLe.set(s,o,n.normalizeCol(u),n.getWorldForColumn(u)).id;if(nk.add(c),!this.has(c)){const p=new XI(this.tileScheme,c);this._tiles.set(c,p),this._index.insert(p),this.tiles.push(p),Tm.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];nk.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Tm.removed.push(a))}(Tm.added.length||Tm.removed.length)&&this.emit("update",Tm),kv.pool.release(r),nk.clear(),Tm.added.length=0,Tm.removed.length=0}}let sLe=0,qd=class extends kt{constructor(){super(...arguments),this.color=new xt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return sLe++}};h([f({readOnly:!0})],qd.prototype,"version",null),h([f({type:xt})],qd.prototype,"color",void 0),h([f({type:xt})],qd.prototype,"haloColor",void 0),h([f()],qd.prototype,"haloOpacity",void 0),h([f()],qd.prototype,"fillOpacity",void 0),qd=h([me("esri.views.2d.support.HighlightOptions")],qd);const jse=qd,oLe=e=>e.includes("Brush");class Use{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),oLe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}function aLe(e,t,r,i,n,s,o,a){let l;e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const u=r[0]-(i.left+i.right),c=r[1]-(i.top+i.bottom);let p,d,m=e.area||{x:0,y:0,width:u,height:c};if(l){const g=u/c,b=l[0]/l[1];if(b>g){const v=m.width/b;m={x:m.x,y:Math.round(m.y+(m.height-v)/2),width:m.width,height:Math.round(v)}}else{const v=m.height*b;m={x:Math.round(m.x+(m.width-v)/2),y:m.y,width:Math.round(v),height:m.height}}}else l=[m.width,m.height];return l[0]>m.width?(p=Math.min(l[0]/m.width,t),d=l[0]/m.width/p):(p=1,d=l[0]/m.width),{resolutionScale:p,cropArea:{x:Math.round((m.x+i.left)*p),y:Math.round((m.y+i.top)*p),width:Math.round(m.width*p),height:Math.round(m.height*p)},outputScale:d,format:n,quality:s,children:o,rotation:a}}function lLe(e,t,r){const{ctx:i,canvas:n}=Vse(e,r),s=i.getImageData(0,0,e.width,e.height),o=hLe(n,t);return Bse(n),{dataUrl:o,data:s}}function uLe(e,t){const{ctx:r,canvas:i}=Vse(e,t),n=r.getImageData(0,0,e.width,e.height);return Bse(i),n}function Vse(e,t){const r=cLe();t.premultipliedAlpha&&gLe(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d");return i.putImageData(e,0,0),t.flipY&&yLe(i),{ctx:i,canvas:r}}function Bse(e){e.width=0,e.height=0}function cLe(){return Ne(sk)&&(sk=document.createElement("canvas")),sk}let sk=null;function hLe(e,t){const r=vLe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function pLe(e,t){const r=mLe(e),i=wLe[r];return{format:r,quality:sa(t??i,0,100)}}function dLe(e,t){return t/Math.max(e[0],e[1])}function Alt(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(eT)try{return new ImageData(e,t)}catch{eT=!1}return zse(e,t,r)}function $lt(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(eT)try{return new ImageData(e,t,r)}catch{eT=!1}const n=zse(t,r,i);return n.data.set(e,0),n}function Clt(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:l}=e,{width:u,height:c,data:p}=t,d=s/u,m=o/c,g=Math.ceil(d/2),b=Math.ceil(m/2),v=e.width;for(let _=0;_<c;_++)for(let E=0;E<u;E++){const I=4*(E+(a?c-_-1:_)*u);let x=0,T=0,M=0,k=0,D=0,B=0;const G=(_+.5)*m;for(let W=Math.floor(_*m);W<(_+1)*m;W++){const K=Math.abs(G-(W+.5))/b,ne=(E+.5)*d,ye=K*K;for(let y=Math.floor(E*d);y<(E+1)*d;y++){const C=Math.abs(ne-(y+.5))/g,L=Math.sqrt(ye+C*C);if(L>=1)continue;let F=2*L*L*L-3*L*L+1;const ae=4*(i+y+(n+W)*v);B+=F*l[ae+3],T+=F,!r&&l[ae+3]<255&&(F=F*l[ae+3]/255),M+=F*l[ae],k+=F*l[ae+1],D+=F*l[ae+2],x+=F}}p[I]=M/x,p[I+1]=k/x,p[I+2]=D/x,p[I+3]=B/T}return t}function zse(e,t,r){return r||(r=fLe()),r.getContext("2d").createImageData(e,t)}let Iw=null,eT=!0;function fLe(){return Iw||(Iw=document.createElement("canvas"),Iw.width=1,Iw.height=1),Iw}function mLe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return bLe}}function yLe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function gLe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n!==255&&n>0){const s=255/n;t[i+0]=t[i+0]*s,t[i+1]=t[i+1]*s,t[i+2]=t[i+2]*s}}}const vLe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Dq=98,bLe="png",wLe={png:100,jpg:Dq,jpeg:Dq};var an;function klt(e,t,r={}){const i=Gse(e);for(;i.length>1;){const n=tT(t,i.shift(),r);if(de(n))return n}return _Le(t,i.shift(),r)}function Gse(e){const t=We("esri-force-webgl");if(t===an.WEBGL1||t===an.WEBGL2)return[t];switch(e){case"2d":return We("mac")&&We("chrome")?[an.WEBGL1,an.WEBGL2]:[an.WEBGL2,an.WEBGL1];case"3d":return[an.WEBGL2,an.WEBGL1]}}function _Le(e,t,r={}){if(!window.WebGLRenderingContext)return Fq(e,xLe),null;const i=tT(e,t,r);return Ne(i)&&Fq(e,SLe),i}function tT(e,t,r={}){const i=t===an.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of i){try{n=e.getContext(s,r)}catch{}if(n)break}return n}function Fq(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}(function(e){e[e.WEBGL1=1]="WEBGL1",e[e.WEBGL2=2]="WEBGL2"})(an||(an={}));const xLe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',SLe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let ok,ak;function ELe(e){const t=Gse(e);for(;t.length>1;){const r=jq(t.shift());if(r.available)return r}return jq(t.shift())}function jq(e){switch(e){case an.WEBGL1:return MLe();case an.WEBGL2:return ILe()}}function MLe(){return ok||(ok=$Le()),ok}function ILe(){return ak||(ak=CLe()),ak}class qse{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class TLe extends qse{constructor(){super(...arguments),this.type=an.WEBGL1}}class ALe extends qse{constructor(){super(...arguments),this.type=an.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function Hse(e,t){if(e===an.WEBGL1&&typeof WebGLRenderingContext===void 0||e===an.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const r=document.createElement("canvas");if(!r)return null;let i=tT(r,e,{failIfMajorPerformanceCaveat:!0});if(Ne(i)&&(i=tT(r,e),de(i)&&(t.majorPerformanceCaveat=!0)),Ne(i))return i;if(e===an.WEBGL1){const s=i.getParameter(i.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(s){const o=parseFloat(s[1]);t.available=o>=.94}}else t.available=!0;t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const n=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);return n&&(t.supportsHighPrecisionFragment=n.precision>0),i}function $Le(){const e=new TLe,t=Hse(an.WEBGL1,e);return Ne(t)||(e.supportsElementIndexUint=t.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=t.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=t.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=t.getExtension("OES_texture_float")!==null,e.supportsTextureHalfFloat=t.getExtension("OES_texture_half_float")!==null,e.supportsColorBufferFloat=t.getExtension("WEBGL_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=t.getExtension("EXT_color_buffer_half_float")!==null),e}function CLe(){const e=new ALe,t=Hse(an.WEBGL2,e);return Ne(t)||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function kLe(e){const t=ELe(e);if(!t.available)return new $e("webgl:required","WebGL is required but not supported.");if(e==="3d"&&t.majorPerformanceCaveat)return new $e("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!t.supportsHighPrecisionFragment)return new $e("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!t.supportsVertexShaderSamplers)return new $e("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(t.type===an.WEBGL1){if(!t.supportsElementIndexUint)return new $e("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!t.supportsStandardDerivatives)return new $e("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!t.supportsInstancedArrays)return new $e("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function OLe(e){return e&&"nodeType"in e}function RLe(e){return e&&typeof e.render=="function"}const Uq={component:"esri-component"};let fy=class extends kt{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Uq.component),t&&t.classList.remove(Uq.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||OLe(e)?(this._set("widget",null),iD(e)):(RLe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};h([f({dependsOn:[]})],fy.prototype,"id",null),h([f()],fy.prototype,"node",null),h([ur("node")],fy.prototype,"castNode",null),h([f({readOnly:!0})],fy.prototype,"widget",void 0),fy=h([me("esri.views.ui.Component")],fy);const x5=fy,PLe={left:0,top:0,bottom:0,right:0},Wse={bottom:30,top:15,right:15,left:15},lk="manual",Ys={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function LLe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function uk(e){const t=e,r=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(r===null||r===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function ck(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Qh=class extends im.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new es,this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&ck(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&ck(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([it(()=>[this.view?.padding,this.container],this._applyViewPadding,Br),it(()=>this.padding,this._applyUIPadding,Br)])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Ys.ui),f$e(e),this._attachContainers(e)),t&&(t.classList.remove(Ys.ui),ck(t,{top:"",bottom:"",left:"",right:""}),ure(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.top+t.bottom;return Math.max(e-r,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Wse,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.left+t.right;return Math.max(e-r,0)}add(e,t){let r,i;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));const n=uk(e);n&&({index:r,position:t,component:e,key:i}=n),t&&typeof t=="object"&&({index:r,key:i,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));const r=this._find(e);if(r){const i=this._componentToKey;if(i.has(e)&&i.get(e)!==t)return;const n=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,r)=>t.concat(r)):(e=e||lk)===lk?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Ys.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let r;const i=uk(e)||uk(t);if(i&&(r=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:r})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,r,i){e instanceof x5||(e=new x5({node:e})),this._place({component:e,position:t,index:r}),this._components.push(e),i&&this._componentToKey.set(e,i)}_find(e){return e?e instanceof x5?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||PLe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ys.innerContainer),e.classList.add(Ys.cornerContainer);const t=document.createElement("div");t.classList.add(Ys.innerContainer),t.classList.add(Ys.manualContainer);const r=document.createElement("div");r.classList.add(Ys.topLeft),r.classList.add(Ys.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(Ys.topRight),i.classList.add(Ys.corner),e.appendChild(i);const n=document.createElement("div");n.classList.add(Ys.bottomLeft),n.classList.add(Ys.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Ys.bottomRight),s.classList.add(Ys.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=df();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":n,"bottom-right":s,"top-leading":o?i:r,"top-trailing":o?r:i,"bottom-leading":o?s:n,"bottom-trailing":o?n:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,r=e.position||lk,i=e.index,n=this._positionNameToContainerLookup[r],s=i>-1;if(LLe(t.widget)&&t.widget.startup(),!s)return void n.appendChild(t.node);const o=Array.prototype.slice.call(n.children);if(i===0)return void(n.firstChild?Sz(t.node,n.firstChild):n.appendChild(t.node));i>=o.length?n.appendChild(t.node):Sz(t.node,o[i])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,r=null;return this._components.some(i=>(t=i===e,t&&(r=i),t)),r}_findById(e){let t,r=null;return this._components.some(i=>(t=i.id===e,t&&(r=i),t)),r}_findByNode(e){let t,r=null;return this._components.some(i=>(t=i.node===e,t&&(r=i),t)),r}};h([f()],Qh.prototype,"container",null),h([f()],Qh.prototype,"height",null),h([f({value:Wse})],Qh.prototype,"padding",null),h([ur("padding")],Qh.prototype,"castPadding",null),h([f()],Qh.prototype,"view",void 0),h([f()],Qh.prototype,"width",null),Qh=h([me("esri.views.ui.UI")],Qh);const NLe=Qh;function Vq(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function DLe(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function ME(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function FLe(e){return e.type==="bing-maps"}const hd=[];let _1=class extends X2{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Lt,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(i=>it(()=>[i.suspended,i.layer?.attributionVisible],()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.handles.add([kp(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Qa(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.get("view.allLayerViews");hd.length=0,e?(e.forEach(t=>{if(t.suspended||!t.layer?.attributionVisible)return;const r=t.layer;if(Vq(r,"user"))return void ME(hd,t,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(t)){const n=this._fetchedAttributionData.get(t);return void(n?ME(hd,t,this._getDynamicAttribution(n,this.view,r)):Vq(r)&&ME(hd,t,r.copyright))}return void this._fetchAttributionData(t)}const i=r.get("portalItem.accessInformation");ME(hd,t,i||r.copyright)}),DLe(this.items,hd)&&(this.items.removeAll(),this.items.addMany(hd)),hd.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await QT(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,FLe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let n=0;n<r.length;n++){const s=r[n],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),c=a.zoomMax-(t&&a.zoomMax?1:0),p={xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:wt.WGS84},d={extent:wf(p),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:n};for(let m=u;m<=c;m++)i[m]=i[m]||[],i[m].push(d)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){const{extent:i,scale:n}=t;let s=r.tileInfo.scaleToZoom(n);if(s=Math.min(e.maxKey,Math.round(s)),!i||s==null||s<=-1)return"";const o=e[s],a=t4(i.center.clone().normalize(),t.spatialReference),l={};return o?o.filter(u=>{const c=!l[u.id]&&a&&r4(u.extent,a);return c&&(l[u.id]=!0),c}).sort((u,c)=>c.score-u.score||u.objectId-c.objectId).map(u=>u.attribution).join(", "):""}};h([f({readOnly:!0,type:Lt})],_1.prototype,"items",void 0),h([f({readOnly:!0})],_1.prototype,"state",null),h([f()],_1.prototype,"view",void 0),_1=h([me("esri.widgets.Attribution.AttributionViewModel")],_1);const Jse=_1,pd={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let io=class extends bs{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(r=>r.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.iconClass=pd.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Jse}initialize(){this.own(kp(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[pd.open]:this._isOpen};return je("div",{bind:this,class:this.classes(pd.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return je("div",{class:pd.poweredBy},"Powered by"," ",je("a",{class:pd.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,r=t?"0":"",{attributionText:i}=this,n={[pd.sourcesOpen]:e,[pd.interactive]:t};return je("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(pd.sources,n),innerHTML:i,tabindex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:r,clientWidth:i,scrollWidth:n}=e,s=n>i,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const a=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};h([f()],io.prototype,"_isOpen",void 0),h([f()],io.prototype,"_isInteractive",null),h([f()],io.prototype,"_attributionTextOverflowed",void 0),h([f()],io.prototype,"_prevSourceNodeHeight",void 0),h([f({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],io.prototype,"attributionText",null),h([f()],io.prototype,"iconClass",void 0),h([f()],io.prototype,"itemDelimiter",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],io.prototype,"label",void 0),h([f(),Vs("esri/widgets/Attribution/t9n/Attribution")],io.prototype,"messages",void 0),h([It("viewModel.view")],io.prototype,"view",void 0),h([f({type:Jse})],io.prototype,"viewModel",void 0),h([Ca()],io.prototype,"_toggleState",null),io=h([me("esri.widgets.Attribution")],io);const jLe=io,ULe="esri.widgets.CompassViewModel";let my=class extends zne(kt){constructor(e){super(e),this._handles=new es,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(it(()=>this.view,this._updateRotationWatcher,Br))}destroy(){this._handles=Jo(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?it(()=>e?.rotation,this._updateForRotation,Br):it(()=>e?.camera,this._updateForCamera,Br))}};h([f({readOnly:!0})],my.prototype,"canShowNorth",null),h([f()],my.prototype,"orientation",void 0),h([f({readOnly:!0})],my.prototype,"state",null),h([f()],my.prototype,"view",void 0),my=h([me(ULe)],my);const Zse=my,dd={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Rc=class extends bs{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=dd.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Zse}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,r=t==="disabled",i=(t==="rotation"?"rotation":"compass")=="compass",n=r?-1:0,s={[dd.disabled]:r,[dd.interactive]:!r},o={[dd.northIcon]:i,[dd.rotationIcon]:!i},{messages:a}=this;return je("div",{bind:this,class:this.classes(dd.base,s),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},je("span",{"aria-hidden":"true",class:this.classes(dd.icon,o),styles:this._toRotationTransform(e)}),je("span",{class:dd.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};h([It("viewModel.goToOverride")],Rc.prototype,"goToOverride",void 0),h([f()],Rc.prototype,"iconClass",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Rc.prototype,"label",void 0),h([f(),Vs("esri/widgets/Compass/t9n/Compass")],Rc.prototype,"messages",void 0),h([It("viewModel.view")],Rc.prototype,"view",void 0),h([f({type:Zse})],Rc.prototype,"viewModel",void 0),h([Ca()],Rc.prototype,"_reset",null),Rc=h([me("esri.widgets.Compass")],Rc);const VLe=Rc;let x1=class extends kt{constructor(e){super(e),this._handles=new es,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(Qa(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};h([f({readOnly:!0})],x1.prototype,"state",null),h([f()],x1.prototype,"navigationMode",void 0),h([f()],x1.prototype,"view",void 0),x1=h([me("esri.widgets.NavigationToggleViewModel")],x1);const Kse=x1,cl={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let Pc=class extends bs{constructor(e,t){super(e,t),this.iconClass=cl.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Kse}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",r={[cl.disabled]:e,[cl.isLayoutHorizontal]:this.layout==="horizontal"},i={[cl.activeButton]:t},n={[cl.activeButton]:!t},s=e?-1:0,o=this.messages.toggle;return je("div",{bind:this,class:this.classes(cl.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:s,"aria-label":o,title:o},je("div",{class:this.classes(cl.button,cl.panButton,i)},je("span",{class:cl.panIcon})),je("div",{class:this.classes(cl.button,cl.rotateButton,n)},je("span",{class:cl.rotationIcon})))}_toggle(){this.toggle()}};h([f()],Pc.prototype,"iconClass",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Pc.prototype,"label",void 0),h([f({value:"vertical"})],Pc.prototype,"layout",null),h([f(),Vs("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Pc.prototype,"messages",void 0),h([It("viewModel.view")],Pc.prototype,"view",void 0),h([f({type:Kse})],Pc.prototype,"viewModel",void 0),h([Ca()],Pc.prototype,"_toggle",null),Pc=h([me("esri.widgets.NavigationToggle")],Pc);const BLe=Pc,Tw={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Hd=class extends bs{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[Tw.disabled]:!this.enabled,[Tw.interactive]:this.enabled},r={[this.iconClass]:!!this.iconClass};return je("div",{bind:this,class:this.classes(Tw.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},je("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Tw.icon,r)}),je("span",{class:Tw.iconText},this.title))}_triggerAction(){this.action.call(this)}};h([f()],Hd.prototype,"action",void 0),h([f()],Hd.prototype,"enabled",void 0),h([f()],Hd.prototype,"iconClass",void 0),h([f()],Hd.prototype,"title",void 0),h([Ca()],Hd.prototype,"_triggerAction",null),Hd=h([me("esri.widgets.IconButton")],Hd);const Bq=Hd;let S1=class extends kt{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};h([f({readOnly:!0})],S1.prototype,"canZoomIn",null),h([f({readOnly:!0})],S1.prototype,"canZoomOut",null),h([f()],S1.prototype,"view",void 0),S1=h([me("esri.widgets.Zoom.ZoomConditions2D")],S1);const zLe=S1;let E1=class extends kt{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};h([f({readOnly:!0})],E1.prototype,"canZoomIn",null),h([f({readOnly:!0})],E1.prototype,"canZoomOut",null),h([f()],E1.prototype,"view",void 0),E1=h([me("esri.widgets.Zoom.ZoomConditions3D")],E1);const GLe=E1;let Wd=class extends kt{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new zLe({view:e}):e.type==="3d"&&(this._zoomConditions=new GLe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Qk(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Qk(e.goTo({zoomFactor:.5}))}};h([f()],Wd.prototype,"_zoomConditions",void 0),h([f({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Wd.prototype,"canZoomIn",void 0),h([f({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Wd.prototype,"canZoomOut",void 0),h([f({readOnly:!0})],Wd.prototype,"state",null),h([f()],Wd.prototype,"view",null),Wd=h([me("esri.widgets.Zoom.ZoomViewModel")],Wd);const Yse=Wd,Aw={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Xh=class extends bs{constructor(e,t){super(e,t),this.iconClass=Aw.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Yse}initialize(){this._zoomInButton=new Bq({action:this.zoomIn.bind(this),iconClass:Aw.zoomInIcon}),this._zoomOutButton=new Bq({action:this.zoomOut.bind(this),iconClass:Aw.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[Aw.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,je("div",{class:this.classes(Aw.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};h([f()],Xh.prototype,"iconClass",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Xh.prototype,"label",void 0),h([f({value:"vertical"})],Xh.prototype,"layout",null),h([f(),Vs("esri/widgets/Zoom/t9n/Zoom")],Xh.prototype,"messages",void 0),h([It("viewModel.view")],Xh.prototype,"view",void 0),h([f({type:Yse})],Xh.prototype,"viewModel",void 0),Xh=h([me("esri.widgets.Zoom")],Xh);const qLe=Xh,Qse="esri.views.ui.DefaultUI";function HLe(e){return e&&e.view!==void 0}ot.getLogger(Qse);let S5=class extends NLe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([it(()=>this.components,this._componentsWatcher.bind(this),Br),it(()=>this.view,this._updateViewAwareWidgets.bind(this),Br)])}_add(e,t,r,i){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,r,i)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const r=this._find(t),i=r&&r.widget;HLe(i)&&(i.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new x5({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new jLe({view:this.view})}_createCompass(){return new VLe({view:this.view})}_createNavigationToggle(){return new BLe({view:this.view})}_createZoom(){return new qLe({view:this.view})}};h([f()],S5.prototype,"components",void 0),S5=h([me(Qse)],S5);const WLe=S5;let E5=class extends WLe{constructor(e){super(e),this.components=["attribution","zoom"]}};h([f()],E5.prototype,"components",void 0),E5=h([me("esri.views.ui.2d.DefaultUI2D")],E5);const Xse=E5;var CP;let M5=CP=class extends Je{constructor(e){super(e),this.color=new xt([0,0,0,1])}clone(){return new CP(Pe({color:this.color}))}};h([f({type:xt,json:{write:!0}})],M5.prototype,"color",void 0),M5=CP=h([me("esri.webmap.background.ColorBackground")],M5);const JLe=M5,Ih=ot.getLogger("esri.views.MapView");let eoe,toe,roe,ioe,noe,soe;async function ZLe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([Be(()=>import("./webglDeps.140d981e.js"),["assets/webglDeps.140d981e.js","assets/VertexArrayObject.e5cd7959.js","assets/Texture.627d6838.js","assets/enums.de935fa5.js","assets/ProgramTemplate.1056febf.js","assets/programUtils.309ffe7b.js","assets/preload-helper.387dac8f.js"]),Be(()=>import("./mapViewDeps.43aecdf9.js"),["assets/mapViewDeps.43aecdf9.js","assets/CIMSymbolHelper.6248d0ad.js","assets/BidiEngine.ec67919b.js","assets/enums.6e42a319.js","assets/MaterialKey.c216087c.js","assets/Utils.f67560a4.js","assets/enums.de935fa5.js","assets/Texture.627d6838.js","assets/VertexElementDescriptor.d386088d.js","assets/preload-helper.387dac8f.js","assets/GeometryUtils.814cb798.js","assets/utils.9619dae6.js","assets/WGLContainer.83fa1e96.js","assets/VertexArrayObject.e5cd7959.js","assets/ProgramTemplate.1056febf.js","assets/StyleDefinition.627ffe6c.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.309ffe7b.js","assets/ExpandedCIM.7b8d9605.js","assets/quantizationUtils.d09757e3.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.2cd0bffb.js","assets/Matcher.41df3644.js","assets/visualVariablesUtils.42df48c6.js","assets/visualVariablesUtils.087ada97.js","assets/tileUtils.0431f5e8.js","assets/TileClipper.68567d53.js","assets/Geometry.b68345ae.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.eecf6ac8.js","assets/requestImageUtils.2128a3de.js","assets/ComputedAttributeStorage.a7ff046c.js","assets/centroid.79915d1f.js","assets/BaseGraphicContainer.ab876b54.js","assets/normalizeUtilsSync.38eabbc7.js","assets/projectionSupport.a2ec70ff.js","assets/json.d1a0fa35.js","assets/FeatureContainer.423509ab.js","assets/TileContainer.bca8274f.js","assets/schemaUtils.692e0e19.js","assets/createSymbolSchema.47a02593.js","assets/MD5.97b39efc.js","assets/util.5d5e59e8.js","assets/vec3f32.8d37ecf5.js","assets/GraphicContainer.c13e7f7c.js"])]);toe=e,roe=t,ioe=r,noe=i,soe=n,eoe=s}const zq=160;function KLe(e){return e&&e.declaredClass==="esri.Viewpoint"}let Yt=class extends qIe(HRe(WRe(w6e))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Gf({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new E8e(this),this._pePromise=null,this.floors=new Lt,this.highlightOptions=new jse,this.inputManager=new QPe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Use,this.type="2d",this.ui=new Xse,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new Ise,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([it(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(zq)},Bf),this.on("resize",t=>this._resizeHandler(t)),it(()=>this.animationManager?.animation,t=>{this.animation=t})]),Qwe()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new nLe(this.featuresTilingScheme)}get initialExtentRequired(){const{scale:e,constraints:t,center:r,viewpoint:i,extent:n}=this;let s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!n&&(t?.effectiveLODs||(s=-1),(!r||e===0&&s===-1)&&(!i||!de(i.targetGeometry)||i.targetGeometry.type!=="extent"&&!i.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!qf()||(this._pePromise||(this._pePromise=Hf().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=this.spatialReference,r=e.targetGeometry;return!!Op(r.spatialReference,t)||this._projectionEngineLoaded}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new At({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(i){return void Ih.error(new $e("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;xP(r,r,t),this.viewpoint=r}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(it(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Bf),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Ih.error(new $e("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let t;try{t=this._project(e,this.spatialReference)}catch(i){return void Ih.error(new $e("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;l8e(r,r,t,this.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;w8e(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;bq(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let t,r;try{t=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?r=new $e("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):Ne(e.targetGeometry)&&(r=new $e("mapview:invalid-viewpoint","geometry not defined"))}catch(n){r=new $e("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(r)return void Ih.error(r);this._scaleBeforeChangingSpatialReference=null;const i=new Xc({targetGeometry:new At,scale:0,rotation:0});ic(i,t),this.constraints.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this.frameTask.requestFrame(),this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const t=this.viewpoint;bq(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),x4(()=>this.ready,t).then(()=>{const r={animate:!0,...t},i=s8e(e,this);return this.animation.update(i),this._gotoTask={},r.animate?this._gotoAnimated(i,r):this._gotoImmediate(i,r)});Ih.error("#goTo()","target cannot be null or undefined")}async hitTest(e,t){const r=dq(e)?pq(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,n=!1,s=null,o=null;t?.include?qq(t.include,Gq(this,c=>i.add(c),c=>{s||(s=new Set),s.add(c)},c=>i.add(c),()=>n=!0)):(n=!0,i=new Set(this.allLayerViews)),t?.exclude&&qq(t.exclude,Gq(this,c=>i.delete(c),c=>{o||(o=new Set),o.add(c)}));const a=this.allLayerViews.filter(c=>!c.suspended&&i.has(c)).reverse(),l=this.toMap(r);let u=[...n?this.graphicsView.hitTest(l).map(c=>({type:"graphic",graphic:c,layer:null,mapPoint:l})):[],...await Promise.all(a.map(c=>c.hitTest(l,r)).toArray())].filter(de).flat().filter(de);return s&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||s.has(kP(c.graphic)))),o&&(u=u.filter(c=>!("graphic"in c)||!c.graphic||o.has(kP(c.graphic)))),{screenPoint:r,results:u}}async takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return lLe(r,{format:t.format,quality:t.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const t=this._createScreenshotPlan(e),r=await this._stage.takeScreenshot(t);return uLe(r,this._pixelFormat)}_createScreenshotPlan(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,dLe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(s=>{const o=this.allLayerViews.find(a=>a.layer.id===s.id);o&&"container"in o&&o.container&&r.push(o.container)})):r=this._stage.children;const{format:i,quality:n}=pLe(e.format,e.quality);return aLe(e,t,this.size,this.padding,i,n,r,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const t=dq(e)?pq(this,e):e,r=[0,0],[i,n]=this.state.toMap(r,[t.x,t.y]),s=this.spatialReference;return new At({x:i,y:n,spatialReference:s})}toScreen(e){if(!this.ready)return null;const t=this._project(e,this.spatialReference),r=[t.x,t.y];return this.state.toScreen(r,r),Kn(r[0],r[1])}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}hasLayerViewModule(e){return _q.hasLayerViewModule(e)}importLayerView(e){return _q.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(Ih.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=kLe(this.type);return We("safari")&&We("safari")<9&&(e=new $e("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:We("safari")})),de(e)?(Ih.warn("#validate()",e.message),Promise.reject(e)):ZLe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new wP),this.animation}_cancellableGoTo(e,t,r){const i=()=>e===this._gotoTask,n=r.then(()=>{i()&&(this.animation=null)}).catch(o=>{throw i()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),o}),s=new Promise(o=>o(n));return t.when().catch(()=>{i()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if(ui(t),r!==this._gotoTask)throw new $e("view:goto-interrupted","Goto was interrupted");this.viewpoint=i.target=s,i.finish()});return this._cancellableGoTo(r,i,n)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<zq&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:r,padding:i,size:n}=this;if(!e)return null;const s=r&&"initialViewProperties"in r&&r.initialViewProperties,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?o.zoom!==-1&&(o.scale=e.zoomToScale(o.zoom)):o.zoom=-1;let a=null,l=null,u=0;const c=o.viewpoint&&o.viewpoint.rotation,p=o.viewpoint&&o.viewpoint.targetGeometry;de(p)&&(p.type==="extent"?a=p:p.type==="point"&&(l=p,u=o.viewpoint.scale));const d=o.extent||a||s?.viewpoint?.targetGeometry?.extent||t,m=o.center||l||d?.center,g=o.scale||u||s?.viewpoint?.scale||d&&g2(d,[n[0]-i.left-i.right,n[1]-i.top-i.bottom]),b=o.rotation||c||s?.viewpoint?.rotation||0;return m&&g?new Xc({targetGeometry:m,scale:g,rotation:b}):null}_gotoAnimated(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if(ui(t),r!==this._gotoTask)throw new $e("view:goto-interrupted","Goto was interrupted");return i.update(s),this.animationManager.animate(i,this.viewpoint,t),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,n)}_project(e,t){const r=e&&e.targetGeometry||e;if(!t)return e;if(!r)return null;if(t.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||Xn(t,r.spatialReference))return e;const i=Tb(r,t);if(!i)throw new $e("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:t});return KLe(e)?(e.targetGeometry=i,e):i}_resizeHandler(e){if(!this.ready)return;const t=this.state;let r=this.state.paddedViewState.viewpoint;const i=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],b8e(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints.constrain(r,null),this.state.viewpoint=r}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),t=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(a){Ih.warn(new zs("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:t.toJSON(),spatialReference:this.spatialReference,error:a})),e.targetGeometry=this.defaultsFromMap.extent?.center||new At({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(e),this._set("state",new pPe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const r=new eoe(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=r,this._magnifierView=new soe,this._magnifierView.magnifier=this.magnifier;const i=new ioe({view:this});this._set("labelManager",i);const n=new S8e({view:this});this._set("animationManager",n);const s=new noe({view:this,animationManager:n});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("post-render",()=>this._set("rendering",r.renderRequested)),r.on("will-render",()=>this._set("rendering",r.renderRequested)),r.on("webgl-error",a=>this.fatalError=a.error),it(()=>this.stationary,a=>r.stationary=a,Yd),it(()=>this.background,a=>{r.background=a,this._magnifierView.background=a},Yd),it(()=>this.magnifier,a=>this._magnifierView.magnifier=a,Yd),it(()=>this.renderingOptions,a=>r.renderingOptions=a,Yd),it(()=>this.highlightOptions,a=>r.highlightOptions=a,Yd),it(()=>this.state.id,()=>r.state=this.state,Yd)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(a=>a(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,t],spatialReference:r,rotation:i,scale:n}=this.state.paddedViewState,s=new At({x:e,y:t,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",i),this._set("scale",n),this._set("spatialReference",r),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new gPe(Go.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new toe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new roe(e)});this.frameTask.graphicsView=t,this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const a of this.allLayerViews)a.processDetach();this._destroySpatialReferenceDependentProperties();const t=this.state.paddedViewState.clone();if(Ne(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=t.scale;else{const a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}const r=t.clone(),[i,n]=t.center;let s=null;try{s=this._project(new At({x:i,y:n,spatialReference:t.spatialReference}),e)}catch(a){qf()||Ih.warn(new zs("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s.toJSON(),spatialReference:e,error:a}))}s||(s=new At({x:0,y:0,spatialReference:e}));const o=xP(new Xc({targetGeometry:new At,scale:0,rotation:0}),t.viewpoint,s);r.viewpoint=o;try{const l=[t.size[0]/2,t.size[1]/2],u=[l[0]+20,l[1]],c=t.toMap([0,0],u),{x:p,y:d}=this._project(new At({x:c[0],y:c[1],spatialReference:t.spatialReference}),e);c[0]=p,c[1]=d,r.toScreen(c,c);const m=g8e(l,c,u),g=Math.hypot(c[0]-l[0],c[1]-l[1])/20;!Number.isFinite(g)||Math.abs(g)>4?(o.rotation=0,o.targetGeometry=new At({x:0,y:0,spatialReference:e})):(o.scale*=g,o.scale>We("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(m)?m:0)}catch{}this._get("constraints").constrain(o,null),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const a of this.allLayerViews)a.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Yt.type="2d",h([f({readOnly:!0})],Yt.prototype,"animationManager",void 0),h([f({constructOnly:!0})],Yt.prototype,"deactivatedWebGLExtensions",void 0),h([f({constructOnly:!0})],Yt.prototype,"debugWebGLExtensions",void 0),h([f({readOnly:!0})],Yt.prototype,"featuresTilingScheme",void 0),h([f({readOnly:!0})],Yt.prototype,"fullOpacity",void 0),h([f({readOnly:!0})],Yt.prototype,"graphicsTileStore",null),h([f()],Yt.prototype,"graphicsView",void 0),h([f({readOnly:!0})],Yt.prototype,"state",void 0),h([f()],Yt.prototype,"initialExtentRequired",null),h([f()],Yt.prototype,"labelManager",void 0),h([f({readOnly:!0})],Yt.prototype,"resourceManager",null),h([f({readOnly:!0})],Yt.prototype,"textureManager",null),h([f({readOnly:!0})],Yt.prototype,"mapViewNavigation",void 0),h([f({constructOnly:!0})],Yt.prototype,"renderCanvas",void 0),h([f()],Yt.prototype,"renderingOptions",void 0),h([f({readOnly:!0})],Yt.prototype,"rendering",void 0),h([f({constructOnly:!0})],Yt.prototype,"supersampleScreenshotsEnabled",void 0),h([f({readOnly:!0})],Yt.prototype,"supportsGround",void 0),h([f()],Yt.prototype,"_stationaryTimer",void 0),h([f()],Yt.prototype,"_defaultsFromMapSettings",null),h([f()],Yt.prototype,"_pePromise",void 0),h([f({readOnly:!0})],Yt.prototype,"typeSpecificPreconditionsReady",null),h([f()],Yt.prototype,"animation",null),h([f({type:JLe})],Yt.prototype,"background",null),h([f({value:null,type:At,dependsOn:["state.id","ready"]})],Yt.prototype,"center",null),h([f({type:Ise})],Yt.prototype,"constraints",null),h([f({value:null,type:qt,dependsOn:["state.id","ready"]})],Yt.prototype,"extent",null),h([f()],Yt.prototype,"floors",void 0),h([f({type:jse})],Yt.prototype,"highlightOptions",void 0),h([f({readOnly:!0})],Yt.prototype,"inputManager",void 0),h([f()],Yt.prototype,"map",void 0),h([f({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Yt.prototype,"padding",null),h([f()],Yt.prototype,"resizeAlign",void 0),h([f({readOnly:!0,dependsOn:["state.id"]})],Yt.prototype,"resolution",null),h([f({value:0,type:Number,dependsOn:["state.id","ready"]})],Yt.prototype,"rotation",null),h([f({value:0,type:Number,dependsOn:["state.id","ready"]})],Yt.prototype,"scale",null),h([f({constructOnly:!0})],Yt.prototype,"spatialReferenceLocked",void 0),h([f()],Yt.prototype,"stationary",null),h([f({type:Use,readOnly:!0})],Yt.prototype,"timeline",void 0),h([f({readOnly:!0})],Yt.prototype,"type",void 0),h([f({readOnly:!0})],Yt.prototype,"updating",null),h([f({value:null,type:Xc,dependsOn:["state.id","ready"]})],Yt.prototype,"viewpoint",null),h([f({value:-1,dependsOn:["state.id","ready"]})],Yt.prototype,"zoom",null),h([f({type:Boolean})],Yt.prototype,"navigating",null),h([f({type:Xse})],Yt.prototype,"ui",void 0),Yt=h([me("esri.views.MapView")],Yt);const YLe=Yt;function kP(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function Gq(e,t,r,i,n){return s=>{if(s instanceof fs){if(s.layer===e)n?.();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&i?.(o)}r(kP(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function qq(e,t){if(e)if(Wk(e))for(const r of e)if(Wk(r))for(const i of r)t(i);else t(r);else t(e)}class QLe{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function ooe(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new QLe(t)}function Olt(e,t,r,i){let n,s=(r[0]-e[0])/t[0],o=(i[0]-e[0])/t[0];s>o&&(n=s,s=o,o=n);let a=(r[1]-e[1])/t[1],l=(i[1]-e[1])/t[1];if(a>l&&(n=a,a=l,l=n),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let u=(r[2]-e[2])/t[2],c=(i[2]-e[2])/t[2];return u>c&&(n=u,u=c,c=n),!(s>c||u>o)&&(c<o&&(o=c),!(o<0))}class XLe{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class eNe{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new tNe}}class tNe{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class rNe{constructor(t,r,i,n){this._workerFunc=t,this._callbackFunc=r,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=n.map(s=>new eNe(s))}hasQuota(t){const r=this._clients[t];return!!r&&(this._totalNumWorkers<this._maxTotalNumWorkers||r.numWorkers+r.tasks.length<r.typeWorkerQuota)}push(t){const r=this._clients[t.client];r&&(this._totalNumWorkers<this._maxTotalNumWorkers?(r.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(i,n)=>this._taskCallback(i,n))):r.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const r=this._clients[t.client];this._totalNumWorkers--,r.numWorkers--,r.statistics.requests++,r.statistics.size+=t.size||0,r.statistics.duration+=t.duration||0,r.statistics.speed=r.statistics.duration>0?r.statistics.size/r.statistics.duration:0,ooe(r.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(r,i)=>this._taskCallback(r,i)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,r){t._cancelled||(this._callbackFunc(t,r),this._taskFinished(t))}getStatsForType(t){const r=this._clients[t];return r?{quota:r.typeWorkerQuota,workers:r.numWorkers,queueSize:r.tasks.length,requestStats:r.statistics}:null}get test(){const t=this;return{set workerFunc(r){t._workerFunc=r}}}}let hk=class extends kt{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,r){this._loadQueue=new rNe((i,n)=>this._startLoading(i,n),(i,n)=>this._doneLoadingCB(i,n),e,t),r&&(this._frameTask=r.registerTask(vr.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=Jo(this._frameTask),this._tasks.forEach(e=>V5(e.abortController)),this._loadQueue=La(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,r,i={}){const n=jZ();n.__signal=de(i)?i.signal:null;const s=this._createOrUpdateTask(e,t,r,i,n);return Ka(i,()=>this._cancelRequest(s,n)),n.promise}_createTask(e,t,r,i,n,s){const o=new oNe(e,t,r,i,n);return this._updateTask(o,s),this._tasks.set(n,o),this._tasks.size===1&&this._set("updating",!0),this._loadQueue.push(o),o}_cancelRequest(e,t){qL(e.resolvers,t),t.reject(wi()),e.resolvers.length===0&&(e.status===El.DOWNLOADING&&(e.status=El.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=El.CANCELLED,this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,r,i,n){const s=aNe(de(i)&&i.uid||e,t,r),o=this._tasks.get(s);return o?(this._updateTask(o,n),o):this._createTask(e,i,t,r,s,n)}_doneLoadingCB(e,t){this._loadQueue&&(ooe(e.status===El.DOWNLOADING),e.status=El.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();ui(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==El.DOWNLOADED&&(t.err=t.err||wi()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!Vn(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let r=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const i of e.resolvers)if(t)Vn(t)?i.reject(t):i.reject(new $e("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--r;const n=r<=0?e.result:Pe(e.result);i.resolve(n)}this._tasks.delete(e.key),this._tasks.size===0&&this._set("updating",!1)}_startLoading(e,t){if(e.status===El.CANCELLED)return!1;let r,i;switch(e.startTime=performance.now(),e.status=El.DOWNLOADING,e.docType){case"binary":i="array-buffer",r=0;break;case"image":i="image";break;case"image+type":i="array-buffer";break;default:i="json"}e.abortController=new AbortController;const n=e.abortController.signal;e.request=Mt(e.url,{...e.options,responseType:i,timeout:r,signal:n});let s=()=>{};const o=l=>{e.duration=performance.now()-e.startTime,e.size=l instanceof ArrayBuffer?l.byteLength:e.size||0,e.result=l,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},a=l=>{e.status===El.DOWNLOADING&&t(e,l),s()};return e.docType!=="image+type"?(e.request.then(l=>o(l.data),a),!0):(e.request.then(l=>{const u=l.data,c=nNe(u);if(i="image",e.size=u.byteLength,c==="unknown")return e.request=Mt(e.url,{responseType:i,timeout:r,signal:n}),void e.request.then(m=>o(m.data),a);const p=new Blob([u],{type:c}),d=window.URL.createObjectURL(p);s=()=>window.URL.revokeObjectURL(d),e.request=Mt(d,{responseType:i,timeout:r,signal:n}),e.request.then(m=>o(new sNe(m.data,c,s)),a)},a),!0)}get test(){return{loadQueue:this._loadQueue}}};h([f({readOnly:!0})],hk.prototype,"updating",void 0),hk=h([me("esri.views.3d.support.StreamDataLoader")],hk);const iNe={numRetries:0};function nNe(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}class sNe{constructor(t,r,i){this.image=t,this.type=r,this.release=i}get isOpaque(){return this.type==="image/jpeg"}}class oNe extends XLe{constructor(t,r,i,n,s){super(n),this.url=t,this.options=r,this.docType=i,this.key=s,this.result=null,this.status=El.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=iNe.numRetries}}function aNe(e,t,r){return`${e}:${t}:${r}`}var El;(function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"})(El||(El={}));var Hq,Wq,Zc,Jq,Zq,Kq;(function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"})(Hq||(Hq={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(Wq||(Wq={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(Zc||(Zc={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(Jq||(Jq={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(Zq||(Zq={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(Kq||(Kq={}));const lNe=12;class $i{constructor(t){const r=$i.checkUnsupported(t);if(de(r))throw r;const i=t;this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=X9(this.spatialReference)||lb(this.spatialReference)||ub(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const n=i.lods.reduce((u,c,p)=>(c.level<u.min&&(u.min=c.level,u.minIndex=p),u.max=Math.max(u.max,c.level),u),{min:1/0,minIndex:0,max:-1/0}),s=i.lods[n.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*i.size[0],a*i.size[1]]},a/=2,l/=2}clone(){return new $i(this.toTileInfo())}toTileInfo(){return new Go({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,r)=>({level:r,scale:t.scale,resolution:t.resolution}))})}getExtent(t,r,i,n){const s=this.levels[t],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+i*o,n[2]=this.origin[0]+(i+1)*o,n[3]=this.origin[1]-r*a,n[1]=this.origin[1]-(r+1)*a}convertExtentToRadians(t,r){this._isWebMercator?(r[0]=iU(t[0]),r[1]=nU(t[1]),r[2]=iU(t[2]),r[3]=nU(t[3])):this._isGCS&&(r[0]=C1(t[0]),r[1]=C1(t[1]),r[2]=C1(t[2]),r[3]=C1(t[3]))}getExtentGeometry(t,r,i,n=new qt){return this.getExtent(t,r,i,dc),n.spatialReference=this.spatialReference,n.xmin=dc[0],n.ymin=dc[1],n.xmax=dc[2],n.ymax=dc[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(t){if(t==null)return!1;let r=!1;for(;this.levels.length<=t;){const i=this.levels[this.levels.length-1],n=i.resolution/2;this.levels.push({resolution:n,scale:i.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),r=!0}return r}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const r=this.levels[0].scale;return t>=r?0:Math.log(r/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof $i)){if($i.checkUnsupported(t))return!1;t=new $i(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const r=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[r].resolution;let n=.5*i;return!K1(t.origin[0],this.origin[0],n)||!K1(t.origin[1],this.origin[1],n)?!1:(n=.5*i/2**r/this.pixelSize*lNe,K1(i,t.levels[r].resolution,n))}rootTilesInExtent(t,r=null,i=1/0){const n=new Array,s=this.levels[0].tileSize;if(Ne(t)||s[0]===0||s[1]===0)return n;$i.computeRowColExtent(t,s,this.origin,dc);let o=dc[1],a=dc[3],l=dc[0],u=dc[2];const c=u-l,p=a-o;if(c*p>i){const d=Math.floor(Math.sqrt(i));p>d&&(o=o+Math.floor(.5*p)-Math.floor(.5*d),a=o+d),c>d&&(l=l+Math.floor(.5*c)-Math.floor(.5*d),u=l+d)}for(let d=o;d<a;d++)for(let m=l;m<u;m++)n.push([0,d,m]);return de(r)&&(r[0]=this.origin[0]+l*s[0],r[1]=this.origin[1]-a*s[1],r[2]=this.origin[0]+u*s[0],r[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(t,r,i,n){const s=.001*(t[2]-t[0]+(t[3]-t[1]));n[0]=Math.max(0,Math.floor((t[0]+s-i[0])/r[0])),n[2]=Math.max(0,Math.ceil((t[2]-s-i[0])/r[0])),n[1]=Math.max(0,Math.floor((i[1]-t[3]+s)/r[1])),n[3]=Math.max(0,Math.ceil((i[1]-t[1]-s)/r[1]))}static isPowerOfTwo(t){const r=t.lods,i=r[0].resolution*2**r[0].level;return!r.some(n=>!g0e(n.resolution,i/2**n.level))}static hasGapInLevels(t){const r=t.lods.map(i=>i.level);r.sort((i,n)=>i-n);for(let i=1;i<r.length;i++)if(r[i]!==r[0]+i)return!0;return!1}static tileSizeSupported(t){const r=t.size[1];return r===t.size[0]&&(r&r-1)==0&&r>=128&&r<=512}static hasOriginPerLODs(t){const r=t.origin;return t.lods.some(i=>i.origin!=null&&(i.origin[0]!==r.x||i.origin[1]!==r.y))}static getMissingTileInfoError(){return new $e("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(t){return Ne(t)?ZD():t.lods.length<1?new $e("tilingscheme:generic","Tiling scheme must have at least one level"):$i.isPowerOfTwo(t)?$i.hasGapInLevels(t)?new $e("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):$i.tileSizeSupported(t)?$i.hasOriginPerLODs(t)?new $e("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new $e("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new $e("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,r){const i=t[2]-t[0],n=t[3]-t[1],s=am(r),o=1.2*Math.max(i,n),a=256,l=96,u=.0254,c=new $i(new Go({size:[a,a],origin:{x:t[0]-.5*(o-i),y:t[3]+.5*(o-n)},lods:[{level:0,resolution:o/a,scale:1/(a/l*u/(o*s))}],spatialReference:r}));return c.ensureMaxLod(20),c}static makeWebMercatorAuxiliarySphere(t){const r=new $i($i.WebMercatorAuxiliarySphereTileInfo);return r.ensureMaxLod(t),r}static makeGCSWithTileSize(t,r=256,i=16){const n=256/r,s=new $i(new Go({size:[r,r],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*n,scale:295497598570834e-6*n}]}));return s.ensureMaxLod(i),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function ZD(){return new $e("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}$i.WebMercatorAuxiliarySphereTileInfo=new Go({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:wt.WebMercator},spatialReference:wt.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),$i.WebMercatorAuxiliarySphere=$i.makeWebMercatorAuxiliarySphere(19);const dc=jl(),Yq=64;v0e(SO/10);const uNe=jl();$i.WebMercatorAuxiliarySphere.getExtent(0,0,0,uNe);jl([-180,-90,180,90]);const R0=aa(),cNe=aa(),Th=aa(),Ah=aa();function hNe(e,t,r=0){const i=e.extent;if(Ne(i))return!1;if(r===0)return z1e(i,t);const n=Math.min(i[2]-i[0],i[3]-i[1]);return q1e(i,t,r*n)}function IE(e,t,r,i){lI(R0,r),R0[i]=t[i];const n=Z_(R0,R0,t),s=Z_(cNe,e,t),o=uI(s,n),a=uI(n,n);let l;l=o<=0?t:a<=o?r:iY(R0,t,xN(n,n,o/a));const u=Z_(R0,e,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function pNe(e,t,r){const i=e.extent;if(Ne(i))return 0;Th[0]=i[0],Th[1]=i[1],Th[2]=r,Ah[0]=i[2],Ah[1]=i[3],Ah[2]=r;let n=1/0,s=1/0;return t[0]<Th[0]?n=IE(t,Th,Ah,0):t[0]>Ah[0]&&(n=IE(t,Ah,Th,0)),t[1]<Th[1]?s=IE(t,Th,Ah,1):t[1]>Ah[1]&&(s=IE(t,Ah,Th,1)),Math.min(n,s)}function dNe(e,t,r){if(Ne(e))return ZD();if(e.spatialReference.isGeographic&&!X9(e.spatialReference))return new $e("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const i=$i.checkUnsupported(e);if(de(i))return i;if(Ne(r))return new $e("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const n=fNe(e,r);if(n)return n;const s=e.spatialReference;return de(t)&&!(s.equals(t)||t.isWGS84&&s.isWebMercator)?new $e("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}function fNe(e,t){const r=e.lods,i=r[0].resolution*2**r[0].level,n=[i*e.size[0],i*e.size[1]],s=[e.origin.x,e.origin.y],o=U1e(t),a=jl();$i.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>Yq){const u=r[0].scale*2**r[0].level;let c=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*u/i;const p=Math.floor(Math.log(c)/Math.log(10));return c=Math.ceil(c/10**p)*10**p,new $e("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+c.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:c,requiredNumRootTiles:l,allowedNumRootTiles:Yq})}return null}const mNe=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:hNe,tiltToExtentEdge:pNe,checkIfTileInfoSupportedForViewSR:dNe},Symbol.toStringTag,{value:"Module"}));function yNe(){return!0}function gNe(){return 0}function vNe(e,t){if(Ne(e))return ZD();const r=e.lods.length-1,i=e.spatialReference,n=X9(i)||lb(i)||ub(i);if(i.isWebMercator){if(!$i.makeWebMercatorAuxiliarySphere(r).compatibleWith(e))return new $e("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new $e("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!$i.makeGCSWithTileSize(e.spatialReference,e.size[0],r).compatibleWith(e))return e.spatialReference.isWGS84?new $e("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new $e("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return de(t)&&!e.spatialReference.equals(t)?new $e("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}const bNe=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:yNe,tiltToExtentEdge:gNe,checkIfTileInfoSupportedForViewSR:vNe},Symbol.toStringTag,{value:"Module"})),wNe={[Pp.Global]:bNe,[Pp.Local]:mNe};function OP(e,t,r,i){return wNe[i].checkIfTileInfoSupportedForViewSR(e,r,t)}function _Ne(e,t,r){const i=zye(e);if(de(i)){if(!Lt.isCollection(i))return{tileInfo:i.tileInfo,fullExtent:i.fullExtent};{const n=i.find(s=>OP(s.tileInfo,s.fullExtent,t,r)==null);if(n)return{tileInfo:n.tileInfo,fullExtent:n.fullExtent}}}return{tileInfo:null,fullExtent:null}}Zc.NORTH,Zc.EAST,Zc.SOUTH,Zc.WEST;Zc.NORTH_EAST,Zc.SOUTH_EAST,Zc.SOUTH_WEST,Zc.NORTH_WEST;function xNe(e,t){return e!=null&&(t==null||(t===Pp.Local?!e.isGeographic||e.isWGS84||e.wkid===kl.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===kl.CGCS2000||e.wkid===kl.GCSMARS2000||e.wkid===kl.GCSMARS2000_SPHERE||e.wkid===kl.GCSMOON2000))}async function SNe(e,t={}){await MNe(e,t),ui(t)}async function ENe(e,t={}){const{basemap:r,view:i}=e;if(ui(t),"spatialReferenceLocked"in i&&!i.spatialReferenceLocked||(await r.load(t),ui(t),r.baseLayers.length===0))return;const n=r.baseLayers.getItemAt(0);if(!Bye(n))return;if(r.spatialReference){if(i.spatialReference.equals(r.spatialReference))return;Qq()}await n.load(t),ui(t);const s=(("supportedSpatialReferences"in n?n.supportedSpatialReferences:null)||["tileInfo"in n?n.tileInfo.spatialReference:null]).filter(Boolean);s.length!==0&&s.every(o=>!i.spatialReference.equals(o))&&Qq()}function Qq(){throw new $e("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function MNe(e,t){const{basemap:r,view:i}=e;if(await r.load(t),r.baseLayers.length===0)return;const n=r.baseLayers.concat(r.referenceLayers).toArray().filter(o=>!hU(o)).map(o=>new $e("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:o,operationalLayerType:o.operationalLayerType||"unknown"}));if(n.length)throw n[0];const s=r.baseLayers.getItemAt(0);if(hU(s)){try{await s.load(t)}catch(o){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:u=a,message:c=l,details:p}=o;throw new $e(u,c,p)}INe(s,i)}}function INe(e,t){const r=t.state.viewingMode;if(!r)return;let i,n;if(e?.type==="wmts"){const l=_Ne(e,t.spatialReference,r);if(Ne(l.tileInfo))throw new $e("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");i=l.tileInfo,n=l.fullExtent}else i=e.tileInfo,n=e.fullExtent;if(Ne(i))return;if(!xNe(i.spatialReference,r))throw new $e(`basemapgalleryitem:spatial-reference-unsupported-${vq(r)}`,`Basemap spatial reference is unsupported in ${vq(r)} mode`);const s=i.spatialReference.isGeographic,o=e?.type==="vector-tile"?i.getOrCreateCompatible(256,s?1:2):null;if(r===Pp.Global){let l=OP(i,n,null,r);if(l&&e?.type==="vector-tile"&&de(n)&&o&&!OP(o,n,null,r)&&(l=null),l){const u=i.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new $e(`basemapgalleryitem:tiling-scheme-unsupported-${u}-global`,"Basemap tiling scheme is unsupported in global mode",{error:l})}}else if($i.checkUnsupported(i))throw new $e("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const a=t.get("basemapTerrain.tilingScheme");if(a&&!a.compatibleWith(i)&&(e?.type!=="vector-tile"||!o||!a.compatibleWith(o)))throw new $e("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let Lc=class extends Hs(kt){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([it(()=>this.basemap?.loadStatus,e),it(()=>this.compatibilityFunction,e),it(()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme,e),it(()=>this.view?.ready,e),it(()=>this.view?.spatialReference,e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return tIe(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:r}=t;this.compatibilityFunction(this,{signal:r}).then(()=>x4(()=>!this._spatialReferenceTask.updating,r)).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(i=>{Vn(i)||(this._set("state","error"),this._set("error",i))}),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};h([f({readOnly:!0})],Lc.prototype,"_spatialReferenceTask",null),h([f()],Lc.prototype,"basemap",null),h([f()],Lc.prototype,"compatibilityFunction",void 0),h([f({readOnly:!0})],Lc.prototype,"error",void 0),h([f({readOnly:!0})],Lc.prototype,"spatialReference",null),h([f({readOnly:!0})],Lc.prototype,"state",void 0),h([f()],Lc.prototype,"view",void 0),Lc=h([me("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],Lc);const aoe=Lc,loe=Lt.ofType(jf);let P_=class extends kt{constructor(e){super(e),this.basemaps=new loe}get state(){return"ready"}refresh(){}};h([f({type:loe})],P_.prototype,"basemaps",void 0),h([f({readOnly:!0})],P_.prototype,"state",null),P_=h([me("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],P_);const uoe=P_,coe=Lt.ofType(jf),hoe="esri.widgets.BasemapGallery.support.PortalBasemapsSource",TNe=ot.getLogger(hoe);let ep=class extends Ya.LoadableMixin(Qx(uoe)){constructor(e){super(e),this._handles=new es,this.basemaps=new coe,this.filterFunction=null,this.portal=qs.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([it(()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.user,this.query,this.updateBasemapsCallback],()=>this.refresh(),Br)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(r)}catch(r){if(Vn(r))throw r;TNe.warn(new $e("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};h([f({readOnly:!0,type:coe})],ep.prototype,"basemaps",void 0),h([f()],ep.prototype,"filterFunction",void 0),h([f({type:qs})],ep.prototype,"portal",void 0),h([f()],ep.prototype,"query",void 0),h([f({readOnly:!0})],ep.prototype,"state",null),h([f()],ep.prototype,"updateBasemapsCallback",void 0),ep=h([me(hoe)],ep);const I5=ep,poe=Lt.ofType(aoe);function ANe(e){return e&&e.declaredClass==="esri.portal.Portal"}function $Ne(e){return e&&!(e instanceof I5)&&(!!e.portal||!!e.query)}function CNe(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let bu=class extends Hs(Ya){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new poe,this.source=new I5,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([it(()=>this.state==="ready"?this.compatibilityFunction:null,()=>this._updateItems()),kp(()=>this.source?.basemaps,"change",e,{onListenerAdd:e})])}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){if(!this.view.map)return;const t=typeof e=="string"?jf.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const r=t.spatialReference||this.items?.find(i=>this.basemapEquals(t,i.basemap))?.spatialReference;if(r&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const i=this.view.spatialReference;if(de(r)&&!Xn(i,r)&&!Op(this.view.spatialReference,r)&&!qf())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void Hf().then(()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=r,this._clearOverride("activeBasemap"))},()=>{}).then(()=>{this._loadingProjectionEngine=!1});this.view.map.basemap=t,this._clearOverride("activeBasemap"),de(r)&&!Xn(this.view.spatialReference,r)&&(this.view.spatialReference=r)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){return this.view?.type==="3d"?SNe:ENe}set compatibilityFunction(e){de(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||Lt.isCollection(e)?new uoe({basemaps:e}):ANe(e)?new I5({portal:e}):$Ne(e)?new I5(e):CNe(e)?e:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return eIe(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Ya.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){const e=this.source?.basemaps,{view:t,compatibilityFunction:r}=this;this.items.removeAll().forEach(i=>i.destroy()),e&&this.items.addMany(e.map(i=>new aoe({basemap:i,compatibilityFunction:r,view:t})))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};h([f()],bu.prototype,"_loadingProjectionEngine",void 0),h([f()],bu.prototype,"activeBasemap",null),h([f()],bu.prototype,"compatibilityFunction",null),h([f({readOnly:!0,type:poe})],bu.prototype,"items",void 0),h([f()],bu.prototype,"source",void 0),h([ur("source")],bu.prototype,"castSource",null),h([f({readOnly:!0})],bu.prototype,"state",null),h([f()],bu.prototype,"view",void 0),bu=h([me("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],bu);const kNe=bu,ga={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled",loaderAnimation:"esri-widget__loader-animation"};let hl=class extends bs{constructor(e,t){super(e,t),this._handles=new es,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=ga.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new kNe}initialize(){const e=this._handles;this.own([kp(()=>this.viewModel.items,"change",t=>{const r="basemap-gallery-item-changes",{added:i,moved:n}=t;e.remove(r),e.add([...i,...n].map(s=>it(()=>s.state,()=>this.scheduleRender())),r),this.scheduleRender()}),e,Qa(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return Be(()=>import("./calcite-scrim.5a859262.js"),["assets/calcite-scrim.5a859262.js","assets/preload-helper.387dac8f.js"])}render(){const e=this.get("source.state")==="loading",t=this.disabled||this.get("viewModel.state")==="disabled",r=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),i={[ga.sourceLoading]:e,[ga.disabled]:t},n=e?je("div",{class:ga.loader,key:"esri-basemap-gallery__loader"}):null,s=e?null:r.length>0?je("ul",{class:ga.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},r):je("div",{class:ga.emptyMessage,key:"esri-basemap-gallery__empty-message"},je(z4,{level:this.headingLevel},this.messages.noBasemaps));return je("div",{class:this.classes(ga.base,i)},n,s)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||$r("esri/themes/base/images/basemap-toggle-64.svg"),r=e.get("basemap.title"),i=e.get("basemap.portalItem.snippet"),n=e.get("error.message")||i||r,{viewModel:s}=this,o=!this.disabled&&s.state!=="disabled"&&e.state==="ready"?0:-1,a=s.basemapEquals(e.basemap,this.activeBasemap),l=s.state==="loading",u={[ga.selectedItem]:a,[ga.itemError]:e.state==="error"};return je("li",{"aria-selected":a.toString(),bind:this,class:this.classes(ga.item,u),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:o,title:n},je("img",{alt:"",class:ga.itemThumbnail,src:t}),je("div",{class:ga.itemTitle},r),e.state==="loading"||a&&l?je("calcite-scrim",null,je("span",{"aria-hidden":"true",role:"presentation",class:ga.loaderAnimation})):null)}};h([It("viewModel.activeBasemap")],hl.prototype,"activeBasemap",void 0),h([f()],hl.prototype,"disabled",void 0),h([f()],hl.prototype,"headingLevel",void 0),h([f()],hl.prototype,"iconClass",void 0),h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],hl.prototype,"label",void 0),h([f(),Vs("esri/widgets/BasemapGallery/t9n/BasemapGallery")],hl.prototype,"messages",void 0),h([It("viewModel.source")],hl.prototype,"source",void 0),h([It("viewModel.view")],hl.prototype,"view",void 0),h([f()],hl.prototype,"viewModel",void 0),h([Ca()],hl.prototype,"_handleClick",null),hl=h([me("esri.widgets.BasemapGallery")],hl);function doe(e){if(!e)return null;if(hN(e)&&e.wkid){const t=bIe[e.wkid];if(t)return t}if(e.wkt){const t=ONe(e.wkt);if(t)return t}return null}function ONe(e){const t=gIe.exec(e);if(!t||t.length!==2)return null;const r=t[1].split(",");if(!r||r.length<3)return null;const i=parseFloat(r[1]),n=parseFloat(r[2]);return isNaN(i)||isNaN(n)?null:{a:i,f:n===0?0:1/n}}function RNe(e){const t=doe(e||wt.WGS84);if(PNe(t))return t;const r=t.a*(1-t.f);return Object.assign(t,{b:r,eSq:1-(r/t.a)**2,radius:(2*t.a+r)/3,densificationRatio:1e4/((2*t.a+r)/3)})}function PNe(e){return"b"in e&&"eSq"in e&&"radius"in e}function foe(e){return doe(e)!==null}function LNe(e,t="meters"){if(!e)throw new $e("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(i=>!foe(i.spatialReference)))throw new $e("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const r=[];for(let i=0;i<e.length;i++){const n=e[i],{spatialReference:s}=n,o=n.type==="polyline"?n.paths:n.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let c=0;for(let p=1;p<u.length;p++){const d=u[p-1][0],m=u[p][0],g=u[p-1][1],b=u[p][1];if(g!==b||d!==m){const v={distance:null};NNe(v,[d,g],[m,b],s),c+=v.distance}}a+=c}a=Ma(a,"meters",t),r.push(a)}return r}function NNe(e,t,r,i){const n=t[0]*_m,s=t[1]*_m,o=r[0]*_m,a=r[1]*_m,{a:l,b:u,f:c,radius:p}=RNe(i),d=o-n,m=Math.atan((1-c)*Math.tan(s)),g=Math.atan((1-c)*Math.tan(a)),b=Math.sin(m),v=Math.cos(m),_=Math.sin(g),E=Math.cos(g);let I,x,T,M,k,D,B,G,W,K,ne=1e3,ye=d;do{if(B=Math.sin(ye),G=Math.cos(ye),T=Math.sqrt(E*B*(E*B)+(v*_-b*E*G)*(v*_-b*E*G)),T===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;k=b*_+v*E*G,D=Math.atan2(T,k),W=v*E*B/T,x=1-W*W,M=k-2*b*_/x,isNaN(M)&&(M=0),K=c/16*x*(4+c*(4-3*x)),I=ye,ye=d+(1-K)*c*W*(D+K*T*(M+K*k*(2*M*M-1)))}while(Math.abs(ye-I)>1e-12&&--ne>0);if(ne===0){const q=p,fe=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-n))*q,te=o-n,ge=Math.sin(te)*Math.cos(a),ve=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(te),Ee=Math.atan2(ge,ve);return e.azimuth=Ee/_m,e.distance=fe,e.reverseAzimuth=void 0,e}const y=x*(l*l-u*u)/(u*u),C=y/1024*(256+y*(y*(74-47*y)-128)),L=u*(1+y/16384*(4096+y*(y*(320-175*y)-768)))*(D-C*T*(M+C/4*(k*(2*M*M-1)-C/6*M*(4*T*T-3)*(4*M*M-3)))),F=Math.atan2(E*Math.sin(ye),v*_-b*E*Math.cos(ye)),ae=Math.atan2(v*Math.sin(ye),v*_*Math.cos(ye)-b*E);return e.azimuth=F/_m,e.distance=L,e.reverseAzimuth=ae/_m,e}function DNe(e){const{wkid:t}=e;if(pe[t]!=null)return pe.values[pe[t]];const{wkt:r}=e,i=r.lastIndexOf(",")+1,n=r.lastIndexOf("]]");return parseFloat(r.substring(i,n))}function Xq(e,t){return e&&e.includes(t)}function eH(e,t){const{x:r,y:i}=e==="decimal-degrees"?$1(t,!0):t;return[r,i]}function tH({state:{paddedViewState:e},spatialReference:t,width:r}){return t.isWrappable&&e.worldScreenWidth<r}let M1=class extends kt{constructor(e){super(e),this.scaleComputedFrom=Kn(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const r=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(Ne(r))return null;if(t==="metric")return this._getScaleBarProps(e,r,"metric");const i=r/1.609;return this._getScaleBarProps(e,i,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:r,wkt:i}=e;return t||Xq(i,"WGS_1984_Web_Mercator")?"decimal-degrees":pe[r]!=null||Xq(i,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:r,spatialReference:i}=e,n=this._getLocationUnit();if(n==="linear-unit")return r.extent.width*DNe(i)/1e3;const[s,o]=this._getScaleMeasuringPoints(e,t),a=n==="decimal-degrees"||i.isGeographic&&!foe(i)?wt.WGS84:i,l=new Ds({paths:[[eH(n,s),eH(n,o)]],spatialReference:a}),u=$ee(l,10);let c;try{[c]=LNe([u],"kilometers")}catch{return null}return c}_getScaleMeasuringPoints(e,t){const{width:r,height:i,position:n,spatialReference:s}=e;if(tH(e)){const{valid:u}=za(s);return[new At(u[0],0,s),new At(u[1],0,s)]}let o=t.y-n[1];o>i?o=i:o<0&&(o=0);const a=Kn(0,o),l=Kn(r,o);return[e.toMap(a),e.toMap(l)]}_getScaleBarProps(e,t,r){const{view:i}=this;let n=e*t/(tH(i)?i.state.paddedViewState.worldScreenWidth:i.width),s=r==="metric"?"km":"mi";n<.1&&(s==="mi"?(n*=5280,s="ft"):s==="km"&&(n*=1e3,s="m"));let o=0;for(;n>=1;)n/=10,o++;const a=this._getConstraints(n);if(!a)return null;const{min:l,max:u}=a,c=u/n>=n/l?l:u;return{length:e*(c/n),value:10**o*c,unit:s}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};h([f()],M1.prototype,"scaleComputedFrom",void 0),h([f({readOnly:!0})],M1.prototype,"state",null),h([f()],M1.prototype,"view",void 0),M1=h([me("esri.widgets.Scalebar.ScaleBarViewModel")],M1);const FNe=M1,Li={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function TE(e){return 2*e}let fc=class extends bs{constructor(e,t){super(e,t),this.label=void 0,this.messages=null,this.unit="non-metric",this.view=null,this.viewModel=new FNe}initialize(){this.own([it(()=>{const{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]},([e])=>{e&&this.scheduleRender()})])}set style(e){const t=this.unit==="dual"?"line":e;this._set("style",t)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}render(){const e=this.get("viewModel.state")==="disabled",t={[Li.disabled]:e};let r,i;if(!e){const{unit:n,style:s}=this,o=n==="metric"||n==="dual",a=50;if(n==="non-metric"||n==="dual"){const l=this.viewModel.getScaleBarProperties(a,"non-metric");l&&(i=s==="ruler"?this._renderRuler(l):this._renderLine(l,"bottom"))}if(o){const l=this.viewModel.getScaleBarProperties(a,"metric");l&&(r=s==="ruler"?this._renderRuler(l):this._renderLine(l,"top"))}}return je("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Li.base,t)},r,i)}_renderRuler(e){const t=TE(Math.round(e.length)),{messages:r}=this,i=r[e.unit]||r.unknownUnit,n=`${TE(e.value)} ${i}`;return je("div",{class:this.classes(Li.barContainer,Li.rulerBarContainer),key:"esri-scale-bar__ruler"},je("div",{class:Li.ruler,styles:{width:`${t}px`}},je("div",{class:Li.rulerBlock}),je("div",{class:Li.rulerBlock}),je("div",{class:Li.rulerBlock}),je("div",{class:Li.rulerBlock})),je("div",{class:this.classes(Li.labelContainer,Li.rulerLabelContainer)},je("div",{class:Li.label},"0"),je("div",{class:Li.label},n)))}_renderLine(e,t){const{messages:r}=this,i=r[e.unit]||r.unknownUnit,n=`${TE(e.value)} ${i}`,s={[Li.topLabelContainer]:t==="top",[Li.bottomLabelContainer]:t==="bottom"},o=je("div",{class:this.classes(Li.labelContainer,Li.lineLabelContainer,s),key:"esri-scale-bar__label"},je("div",{class:Li.label},n)),a={[Li.topLine]:t==="top",[Li.bottomLine]:t==="bottom"},l=TE(Math.round(e.length)),u=je("div",{class:this.classes(Li.line,a),key:"esri-scale-bar__line",styles:{width:`${l}px`}});return je("div",{class:this.classes(Li.barContainer,Li.lineBarContainer),key:"esri-scale-bar__line-container"},[u,o])}_handleRootCreateOrUpdate(e){const t=this.viewModel;if(!t)return;const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,n=r.top+window.pageYOffset,s=Kn(i,n);(s.x!==t.scaleComputedFrom.x||s.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=s)}};h([f({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],fc.prototype,"label",void 0),h([f(),Vs("esri/widgets/ScaleBar/t9n/ScaleBar")],fc.prototype,"messages",void 0),h([f()],fc.prototype,"style",null),h([ur("style")],fc.prototype,"castStyle",null),h([f()],fc.prototype,"unit",void 0),h([ur("unit")],fc.prototype,"castUnit",null),h([It("viewModel.view")],fc.prototype,"view",void 0),h([f()],fc.prototype,"viewModel",void 0),fc=h([me("esri.widgets.ScaleBar")],fc);class Ir{wkid;latestWkid;wkt;constructor(t,r){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=r)}isEqual(t){return this.isWebMercator()&&t.isWebMercator()?!0:this.wkid===t.wkid&&this.wkt===t.wkt&&this.latestWkid===t.latestWkid}clone(){const t=new Ir("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new Ir(4326)}static fromConfig(t){if(t.wkt)return new Ir(t.wkt);if(t.wkid)return new Ir(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof Ir?t.clone():new Ir(t):Ir.latLongSR()}static fromESRI(t){if(t.wkt)return new Ir(t.wkt);{const r=t.toJSON().latestWkid,i=new Ir(t.wkid);return r&&(i.latestWkid=r),i}}toESRI(){return new wt(this.lean())}static fromGeoJSON(t){const r=Ir.parseGeoJsonCrs(t);return r.substring(0,5)==="EPSG:"?new Ir(parseInt(r.slice(5))):new Ir(r)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=t.properties.name,n=i.match(r);if(n)return"EPSG:"+n[1];if(i.substring(0,7)!=="urn:ogc")return i}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class n0{sr;id;constructor(t,r){this.id=t?t.toString():"",this.sr=Ir.parseSR(r)}get type(){return br.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===br.NONE||this.type===br.UNKNOWN}geoJsonFactory(t,r){const i={type:t,coordinates:r};return this.sr&&(i.crs=this.sr.toGeoJSON()),i}}class Lb extends n0{constructor(){super("no_geometry")}get type(){return br.NONE}}class En extends n0{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=r.slice():this.rawArray=En.parseXY(r)}get type(){return br.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let r;if(Array.isArray(t)&&t.length===2)r=t;else{if(t instanceof En)return t.toArray();r=[t.x,t.y]}if(isNaN(r[0])||isNaN(r[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(r[0]),parseFloat(r[1])]}static fromESRI(t,r){return new En(r,[t.x,t.y],Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new At({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new En(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.POINT,this.toArray())}}class Ho extends n0{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=Ho.arrayDeepCopy(r):r instanceof Ho?this.rawArray=r.toArray():this.rawArray=Ho.parsePointSet(r)}get pointArray(){return this.rawArray.map((t,r)=>new En(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new En(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=En.parseXY(t)}get length(){return this.rawArray.length}toArray(){return Ho.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(r=>En.parseXY(r))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(r=>r.slice())}}class ov extends Ho{constructor(t,r,i,n){super(t,r,i,n)}get type(){return br.MULTIPOINT}static fromESRI(t,r){return new ov(r,t.points,Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new nm({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new ov(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.MULTIPOINT,this.toArray())}}class Af extends Ho{constructor(t,r,i,n){if(super(t,r,i,n),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return br.LINESTRING}static fromESRI(t,r){return new Af(r,t.paths[0],Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new Ds({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Af(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.LINESTRING,this.toArray())}}class Au extends n0{rawArray;constructor(t,r,i,n){if(super(t,r.sr||i),n)this.rawArray=Au.arrayDeepCopy(r);else if(r instanceof Au)this.rawArray=r.toArray();else if(r instanceof Ho)this.rawArray=[r.toArray()];else if(Array.isArray(r)){if(r.length===0)throw new Error("no lines provided");this.rawArray=r.map(s=>Ho.parsePointSet(s))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,r)=>new Af(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new Af(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=Ho.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return br.MULTILINESTRING}toArray(){return Au.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new Au(r,t.paths,Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new Ds({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Au(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.MULTILINESTRING,this.toArray())}}class pg extends Ho{constructor(t,r,i,n){if(super(t,r,i,n),pg.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return br.LINEARRING}updateAt(t,r){const i=this.length-1;r===0?super.updateAt(t,i):r===i&&super.updateAt(t,0),super.updateAt(t,r)}static closeRing(t){const r=t[0],i=t[t.length-1];(r[0]!==i[0]||r[1]!==i[1])&&t.push(r.slice())}static fromESRI(t,r){return new pg(r,t.rings[0],Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new wo({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new pg(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.POLYGON,[this.toArray()])}}class Ls extends n0{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=Ls.arrayDeepCopy(r):this.rawArray=Ls.parsePolygon(r)}addLinearRings(t){t.forEach(r=>this.rawArray.push(r.toArray()))}get ringArray(){return this.rawArray.map((t,r)=>new pg(this.childIdGenerator(r),t,this.sr,!0))}get type(){return br.POLYGON}toArray(){return Ls.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let r=[];if(t instanceof Ls)return t.toArray();if(t instanceof Au)r=t.toArray();else if(t instanceof Ho)r=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");r=t.map(i=>Ho.parsePointSet(i))}else throw new Error("invalid input format for parsePolygon");return r.forEach(i=>pg.closeRing(i)),r}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new Ls(r,t.rings,Ir.fromESRI(t.spatialReference),!0)}toESRI(){return new wo({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Ls(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.POLYGON,this.toArray())}}class cp extends n0{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=cp.arrayDeepCopy(r):this.rawArray=cp.parseMultiPolygon(r)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,r)=>new Ls(this.childIdGenerator(r),t,this.sr,!0))}get type(){return br.MULTIPOLYGON}toArray(){return cp.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof cp)return t.toArray();if(t instanceof Ls)return[t.toArray()];if(t instanceof Au||t instanceof Ho)return[Ls.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(r=>Ls.parsePolygon(r))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.map(n=>n.slice())))}static fromESRI(t,r){return new cp(r,[t.rings],Ir.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(r=>{r.forEach(i=>t.push(i))}),new wo({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new cp(r,t.coordinates,Ir.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(Yi.MULTIPOLYGON,this.toArray())}}class un extends n0{rawMin;rawMax;constructor(t,r,i,n){super(t,r.sr||n),this.rawMin=En.parseXY(r),this.rawMax=En.parseXY(i)}get type(){return br.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new En(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return un.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new un(this.id,this.rawMin,this.rawMax,this.sr)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new Ls(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,r,i,n,s,o){return new un(t,[r,i],[n,s],o)}static fromConfig(t,r){return new un(t,[r.xmin,r.ymin],[r.xmax,r.ymax],Ir.fromConfig(r.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,r){return un.fromParams(r,t.xmin,t.ymin,t.xmax,t.ymax,Ir.fromESRI(t.spatialReference))}toESRI(){return new qt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,r){return un.fromESRI(qt.fromJSON(t),r)}static fromGeoJSON(t,r){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const i=t.coordinates[0].slice(),n=i.slice();return[1,2,3].forEach(s=>{[0,1].forEach(o=>{const a=t.coordinates[s];i[o]>a[o]&&(i[o]=a[o]),n[o]<a[o]&&(n[o]=a[o])})}),new un(r,i,n,Ir.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(Yi.POLYGON,this.toPolygonArray())}}class Wf{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const r=t.length;if(r<3||r>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map((i,n)=>n===3?i:parseInt(i)),r===3&&this.c.push(1)}else if(typeof t=="string"){const r=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(i=>{const n=r.substring(i,i+2);return Wf.hexToInt(n)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((r,i)=>{r<0&&(console.error("Negative value passed to colour"),this.c[i]=0),r>255&&(console.error("Rotund value passed to colour"),this.c[i]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(r=>Wf.intToHex(r)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new xt(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const r=t.toString(16);return r.length===1?`0${r}`:r}}class hp{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let r;const i=t.length;if(i===0)return;const n=t.substring(i-2);return n==="px"?r=parseFloat(t.substring(0,i-2))*1.333333:n==="pt"?r=parseFloat(t.substring(0,i-2)):r=parseFloat(t),r}else return t}}class mf extends hp{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:kh.CIRCLE},super(),this._style=t.style||kh.CIRCLE,t.style===kh.ICON){const r=t;this._icon=r.icon||"",this._height=hp.convToPoints(r.height)||16.5,this._width=hp.convToPoints(r.width)||16.5,this._size=0,this._colour=new Wf,this._outline=new eh,this._path=""}else{const r=t;this._size=hp.convToPoints(r.size)||12,this._colour=new Wf(r.colour??"#ffffff40"),this._outline=new eh(r.outline),this._path=this._style===kh.PATH&&r.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=hp.convToPoints(t.xOffset)||0,this._yOffset=hp.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===kh.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===kh.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===kh.ICON?mf.isImageUrl(this.icon)?(t=new _f,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Ul,t.color=new xt(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Ul,t.color=new xt(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const r={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const i=r;i.style=t.style,i.colour=t.color.toRgba(),i.size=t.size,i.path=t.path,i.outline=eh.fromESRI(t.outline).toOptions()}else{const i=r;i.style=kh.ICON,i.width=t.width,i.height=t.height,i.icon=t.url}return new mf(r)}static fromArcServer(t){return mf.fromESRI(QN(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class eh extends hp{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||ko.SOLID;const r=hp.convToPoints(t.width);this._width=typeof r>"u"||r<0?.75:r,this._colour=new Wf(t.colour),this._miter=t.miter??2,this._cap=t.cap||cZ.ROUND,this._join=t.join||uZ.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new la;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const r={width:t.width,colour:t.color.toRgba(),style:t.style};return new eh(r)}static fromArcServer(t){return eh.fromESRI(QN(t))}}class gx extends hp{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new Wf(t.fill.colour),this._fillStyle=t.fill.style||hZ.SOLID,this._outlineStyle=new eh(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),r=new xt(this.fillColour.rgba),i=new Vp;return i.style=this.fillStyleType,i.color=r,i.outline=t,i}static fromESRI(t){const r={fill:{colour:t.color.toRgba(),style:t.style},outline:eh.fromESRI(t.outline).toOptions()};return new gx(r)}static fromArcServer(t){return gx.fromESRI(QN(t))}}class jNe{Extent=un;Graphic=Ip;LineString=Af;LineStyle=eh;LinearRing=pg;MultiLineString=Au;MultiPoint=ov;MultiPolygon=cp;Point=En;PointStyle=mf;Polygon=Ls;PolygonStyle=gx;SpatialReference=Ir;esriMapClickToRamp(t,r){return{mapPoint:En.fromESRI(t.mapPoint,r),screenX:t.x,screenY:t.y,button:t.button,input:t.native.pointerType,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,r){switch(t.type){case"point":return En.fromESRI(t,r);case"polyline":{const i=t;return i.paths.length===1?Af.fromESRI(i,r):Au.fromESRI(i,r)}case"polygon":return Ls.fromESRI(t,r);case"extent":return un.fromESRI(t,r);case"multipoint":return ov.fromESRI(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,r){switch(t.type){case Yi.POINT:return En.fromGeoJSON(t,r);case Yi.LINESTRING:return Af.fromGeoJSON(t,r);case Yi.POLYGON:return Ls.fromGeoJSON(t,r);case Yi.MULTIPOINT:return ov.fromGeoJSON(t,r);case Yi.MULTILINESTRING:return Au.fromGeoJSON(t,r);case Yi.MULTIPOLYGON:return cp.fromGeoJSON(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){const r={},i={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:r};return Object.keys(t.attributes).forEach(n=>i.properties[n]=t.attributes[n]),i}graphicGeoJsonToRamp(t,r){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const i=this.geomGeoJsonToRamp(t.geometry,r),n={};return Object.keys(t.properties.forEach(o=>n[o]=t.properties[o])),new Ip(i,"",n)}graphicRampToEsri(t){const r={attributes:{},id:t.id};return r.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(i=>r.attributes[i]=t.attributes[i]),t.style&&(r.symbol=this.styleRampToEsri(t.style)),new fs(r)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return mf.fromESRI(t);case"simple-line":return eh.fromESRI(t);case"simple-fill":return gx.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new mf}}serverGeomTypeToRampGeomType(t){if(!t)return br.NONE;switch(t){case"esriGeometryPolygon":return br.POLYGON;case"esriGeometryPolyline":return br.LINESTRING;case"esriGeometryPoint":return br.POINT;case"esriGeometryMultipoint":return br.MULTIPOINT;case"esriGeometryEnvelope":return br.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),br.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return br.NONE;switch(t){case"polygon":return br.POLYGON;case"polyline":return br.LINESTRING;case"point":return br.POINT;case"multipoint":return br.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),br.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(t){switch(t){case Yi.POINT:return"point";case Yi.LINESTRING:case Yi.MULTILINESTRING:return"polyline";case Yi.POLYGON:case Yi.MULTIPOLYGON:return"polygon";case Yi.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${t}`)}}isImageUrl(t){return mf.isImageUrl(t)}}class vx{layerIdx;name;children;uid;isRoot;constructor(t,r,i="",n=!0){this.layerIdx=t,this.name=i,this.isRoot=n,this.children=[],this.uid=r}findChildByUid(t){if(this.uid===t)return this;{let r;return this.children.some(i=>r=i.findChildByUid(t)),r}}findChildByIdx(t){if(this.layerIdx===t)return this;{let r;return this.children.some(i=>r=i.findChildByIdx(t)),r}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class moe{minScale;maxScale;constructor(t=0,r=0){this.minScale=t,this.maxScale=r}isOffScale(t){const r={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(r.offScale=!0,r.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(r.offScale=!0,r.zoomIn=!0),r}}class UNe{sql;cache;extent;constructor(){this.sql={},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const r=this.sql,i=Object.keys(r).filter(n=>r[n]);return t.length===0?i:i.filter(n=>t.indexOf(n)===-1)}isActive(){return this.sqlActiveFilters().length>0}getCombinedSql(t=[]){const r=this.sqlActiveFilters(t),i=r.length;return i===0?"":i===1?this.sql[r[0]]:r.map(n=>`(${this.sql[n]})`).join(" AND ")}setSql(t,r){this.sql[t]=r,this.clearCacheSet(t)}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(Nf.EXTENT))}getCacheKey(t,r){return`_cache$${t.sort().join("$")}${r?"$"+Nf.EXTENT:""}$`}getCache(t,r){const i=this.getCacheKey(t,r);return this.cache[i]}setCache(t,r,i){const n=this.getCacheKey(r,i);this.cache[n]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(r=>t[r])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(r=>{r.indexOf(`$${t}$`)>-1&&delete this.cache[r]})}clearAll(){this.sql={},this.extent=void 0,this.clearAllCaches()}}class bx{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,r,i=void 0,n=void 0){this.id=t,this.sr=r.sr.clone(),this._defaultExtent=r.clone(),this._fullExtent=i?.clone(),this._maximumExtent=n?.clone(),i&&!i.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${i.sr}`),n&&!n.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${n.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new bx(t.id,un.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?un.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?un.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new bx(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class cs{realPromise;resolveMe(){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,r)=>{this.resolveMe=t,this.rejectMe=r})}}var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rlt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function VNe(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}function AE(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var BNe=function(t){return zNe(t)&&!GNe(t)};function zNe(e){return!!e&&typeof e=="object"}function GNe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||WNe(e)}var qNe=typeof Symbol=="function"&&Symbol.for,HNe=qNe?Symbol.for("react.element"):60103;function WNe(e){return e.$$typeof===HNe}function JNe(e){return Array.isArray(e)?[]:{}}function wx(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ov(JNe(e),e,t):e}function ZNe(e,t,r){return e.concat(t).map(function(i){return wx(i,r)})}function KNe(e,t){if(!t.customMerge)return Ov;var r=t.customMerge(e);return typeof r=="function"?r:Ov}function YNe(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function rH(e){return Object.keys(e).concat(YNe(e))}function yoe(e,t){try{return t in e}catch{return!1}}function QNe(e,t){return yoe(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function XNe(e,t,r){var i={};return r.isMergeableObject(e)&&rH(e).forEach(function(n){i[n]=wx(e[n],r)}),rH(t).forEach(function(n){QNe(e,n)||(yoe(e,n)&&r.isMergeableObject(t[n])?i[n]=KNe(n,r)(e[n],t[n],r):i[n]=wx(t[n],r))}),i}function Ov(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||ZNe,r.isMergeableObject=r.isMergeableObject||BNe,r.cloneUnlessOtherwiseSpecified=wx;var i=Array.isArray(t),n=Array.isArray(e),s=i===n;return s?i?r.arrayMerge(e,t,r):XNe(e,t,r):wx(t,r)}Ov.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(i,n){return Ov(i,n,r)},{})};var e9e=Ov,goe=e9e;class t9e{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r==="x"?i:i&3|8).toString(16)})}convertImageToCanvas(t,r=null,i=!0){r=r||window.document.createElement("canvas");const n=window.document.createElement("img");i&&(n.crossOrigin="anonymous");const s=new Promise((o,a)=>{n.addEventListener("load",()=>{r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),o(r)}),n.addEventListener("error",l=>a(l))});return n.src=t,s}async convertImagetoDataURL(t,r="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(i=>i.toDataURL(r)).catch(i=>(console.error("Failed to load crossorigin image",t,i),t))}parseUrlIndex(t){const r={rootUrl:t,index:0},i=/\/(\d+)\/?$/,n=t.match(i);if(n){const s=n[1];r.index=isNaN(parseInt(s))?void 0:parseInt(s),r.rootUrl=t.substr(0,t.length-n[0].length)}else console.warn("Cannot extract layer index from url "+t);return r}}class rT{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((r,i)=>{const[n,s]=i.split("=");return r[n]=s,r},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const r=goe.all([{},this.queryMap,t]);return`${this.base}${Object.entries(r).filter(([n,s])=>s!==void 0).map(([n,s],o)=>`${o===0?"?":""}${n}=${s}`).join("&")}`}}var KD={exports:{}};(function(e,t){(function(r,i){e.exports=i(),typeof window=="object"&&(r.Terraformer=i())})(Aa,function(){var r={},i=6378137,n=57.29577951308232,s=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(U){return Object.prototype.toString.call(U)==="[object Array]"}function u(){var U=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,U)}function c(U,oe){for(var re in oe)oe.hasOwnProperty(re)&&(U[re]=oe[re]);return U}function p(U){if(U.type)switch(U.type){case"Point":return[U.coordinates[0],U.coordinates[1],U.coordinates[0],U.coordinates[1]];case"MultiPoint":return g(U.coordinates);case"LineString":return g(U.coordinates);case"MultiLineString":return d(U.coordinates);case"Polygon":return d(U.coordinates);case"MultiPolygon":return m(U.coordinates);case"Feature":return U.geometry?p(U.geometry):null;case"FeatureCollection":return b(U);case"GeometryCollection":return v(U);default:throw new Error("Unknown type: "+U.type)}return null}function d(U){for(var oe=null,re=null,R=null,$=null,A=0;A<U.length;A++)for(var V=U[A],H=0;H<V.length;H++){var N=V[H],Y=N[0],be=N[1];(oe===null||Y<oe)&&(oe=Y),(re===null||Y>re)&&(re=Y),(R===null||be<R)&&(R=be),($===null||be>$)&&($=be)}return[oe,R,re,$]}function m(U){for(var oe=null,re=null,R=null,$=null,A=0;A<U.length;A++)for(var V=U[A],H=0;H<V.length;H++)for(var N=V[H],Y=0;Y<N.length;Y++){var be=N[Y],_e=be[0],ue=be[1];(oe===null||_e<oe)&&(oe=_e),(re===null||_e>re)&&(re=_e),(R===null||ue<R)&&(R=ue),($===null||ue>$)&&($=ue)}return[oe,R,re,$]}function g(U){for(var oe=null,re=null,R=null,$=null,A=0;A<U.length;A++){var V=U[A],H=V[0],N=V[1];(oe===null||H<oe)&&(oe=H),(re===null||H>re)&&(re=H),(R===null||N<R)&&(R=N),($===null||N>$)&&($=N)}return[oe,R,re,$]}function b(U){for(var oe=[],re,R=U.features.length-1;R>=0;R--)re=p(U.features[R].geometry),oe.push([re[0],re[1]]),oe.push([re[2],re[3]]);return g(oe)}function v(U){for(var oe=[],re,R=U.geometries.length-1;R>=0;R--)re=p(U.geometries[R]),oe.push([re[0],re[1]]),oe.push([re[2],re[3]]);return g(oe)}function _(U){var oe=p(U);return{x:oe[0],y:oe[1],w:Math.abs(oe[0]-oe[2]),h:Math.abs(oe[1]-oe[3])}}function E(U){return U*n}function I(U){return U*s}function x(U,oe){for(var re=0;re<U.length;re++)typeof U[re][0]=="number"&&(U[re]=oe(U[re])),typeof U[re]=="object"&&(U[re]=x(U[re],oe));return U}function T(U){var oe=U[0],re=U[1];return[E(oe/i)-Math.floor((E(oe/i)+180)/360)*360,E(Math.PI/2-2*Math.atan(Math.exp(-1*re/i)))]}function M(U){var oe=U[0],re=Math.max(Math.min(U[1],89.99999),-89.99999);return[I(oe)*i,i/2*Math.log((1+Math.sin(I(re)))/(1-Math.sin(I(re))))]}function k(U,oe,re){if(U.type==="Point")U.coordinates=oe(U.coordinates);else if(U.type==="Feature")U.geometry=k(U.geometry,oe,!0);else if(U.type==="FeatureCollection")for(var R=0;R<U.features.length;R++)U.features[R]=k(U.features[R],oe,!0);else if(U.type==="GeometryCollection")for(var $=0;$<U.geometries.length;$++)U.geometries[$]=k(U.geometries[$],oe,!0);else U.coordinates=x(U.coordinates,oe);return re||oe===M&&(U.crs=o),oe===T&&delete U.crs,U}function D(U){return k(U,M)}function B(U){return k(U,T)}function G(U,oe){return U<oe?-1:U>oe?1:0}function W(U,oe){return U[0]>oe[0]?-1:U[0]<oe[0]?1:U[1]>oe[1]?-1:U[1]<oe[1]?1:0}function K(U,oe,re){return G((oe[0]-U[0])*(re[1]-U[1])-(re[0]-U[0])*(oe[1]-U[1]),0)}function ne(U,oe){var re=oe[0]-U[0],R=oe[1]-U[1];return re*re+R*R}function ye(U,oe){var re=oe;for(var R in U){var $=K(oe,re,U[R]);($===-1||$===0&&ne(oe,U[R])>ne(oe,re))&&(re=U[R])}return re}function y(U){if(U.length===0)return[];if(U.length===1)return U;for(var oe=[U.sort(W)[0]],re=0;re<oe.length;re++){var R=ye(U,oe[re]);R!==oe[0]&&oe.push(R)}return oe}function C(U){for(var oe,re=0;re<U.length-3;re++){var R=U[re],$=U[re+1],A=U[re+2],V=[$[0]-R[0],$[1]-R[1]],H=A[0]*V[1]-A[1]*V[0]+V[0]*R[1]-V[1]*R[0];if(re===0)H<0?oe=!0:oe=!1;else if(oe&&H>0||!oe&&H<0)return!1}return!0}function L(U,oe){for(var re=!1,R=-1,$=U.length,A=$-1;++R<$;A=R)(U[R][1]<=oe[1]&&oe[1]<U[A][1]||U[A][1]<=oe[1]&&oe[1]<U[R][1])&&oe[0]<(U[A][0]-U[R][0])*(oe[1]-U[R][1])/(U[A][1]-U[R][1])+U[R][0]&&(re=!re);return re}function F(U,oe){if(U&&U.length){if(U.length===1)return L(U[0],oe);if(L(U[0],oe)){for(var re=1;re<U.length;re++)if(L(U[re],oe))return!1;return!0}else return!1}else return!1}function ae(U,oe,re,R){var $=(R[0]-re[0])*(U[1]-re[1])-(R[1]-re[1])*(U[0]-re[0]),A=(oe[0]-U[0])*(U[1]-re[1])-(oe[1]-U[1])*(U[0]-re[0]),V=(R[1]-re[1])*(oe[0]-U[0])-(R[0]-re[0])*(oe[1]-U[1]);if(V!==0){var H=$/V,N=A/V;if(0<=H&&H<=1&&0<=N&&N<=1)return!0}return!1}function q(U){return!isNaN(parseFloat(U))&&isFinite(U)}function fe(U,oe){if(q(U[0][0])){if(q(oe[0][0])){for(var re=0;re<U.length-1;re++)for(var R=0;R<oe.length-1;R++)if(ae(U[re],U[re+1],oe[R],oe[R+1]))return!0}else for(var $=0;$<oe.length;$++)if(fe(U,oe[$]))return!0}else for(var A=0;A<U.length;A++)if(fe(U[A],oe))return!0;return!1}function te(U){for(var oe=[],re=0;re<U.length;re++){var R=U[re].slice();ge(R[0],R[R.length-1])===!1&&R.push(R[0]),oe.push(R)}return oe}function ge(U,oe){for(var re=0;re<U.length;re++)if(U[re]!==oe[re])return!1;return!0}function ve(U,oe){if(U.length!==oe.length)return!1;for(var re=U.slice().sort(W),R=oe.slice().sort(W),$=0;$<re.length;$++){if(re[$].length!==R[$].length)return!1;for(var A=0;A<re.length;A++)if(re[$][A]!==R[$][A])return!1}return!0}var Ee=["length"];function Ie(U){if(U)switch(U.type){case"Point":return new ke(U);case"MultiPoint":return new Te(U);case"LineString":return new Se(U);case"MultiLineString":return new Ae(U);case"Polygon":return new X(U);case"MultiPolygon":return new Z(U);case"Feature":return new le(U);case"FeatureCollection":return new z(U);case"GeometryCollection":return new ee(U);default:throw new Error("Unknown type: "+U.type)}}Ie.prototype.toMercator=function(){return D(this)},Ie.prototype.toGeographic=function(){return B(this)},Ie.prototype.envelope=function(){return _(this)},Ie.prototype.bbox=function(){return p(this)},Ie.prototype.convexHull=function(){var U=[],oe,re;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)U=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(oe=0;oe<this.coordinates.length;oe++)U=U.concat(this.coordinates[oe]);if(U.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(oe=0;oe<this.coordinates.length;oe++)for(re=0;re<this.coordinates[oe].length;re++)U=U.concat(this.coordinates[oe][re]);if(U.length<3)return null}else return null;else if(this.type==="Feature"){var R=new Ie(this.geometry);return R.convexHull()}return new X({type:"Polygon",coordinates:te([y(U)])})},Ie.prototype.toJSON=function(){var U={};for(var oe in this)this.hasOwnProperty(oe)&&Ee.indexOf(oe)===-1&&(U[oe]=this[oe]);return U.bbox=p(this),U},Ie.prototype.contains=function(U){return new Ie(U).within(this)},Ie.prototype.within=function(U){var oe,re,R;if(U.type==="Feature"&&(U=U.geometry),U.type==="Point"&&this.type==="Point")return ge(this.coordinates,U.coordinates);if(U.type==="MultiLineString"&&this.type==="Point")for(re=0;re<U.coordinates.length;re++){var $={type:"LineString",coordinates:U.coordinates[re]};if(this.within($))return!0}if((U.type==="LineString"||U.type==="MultiPoint")&&this.type==="Point")for(re=0;re<U.coordinates.length;re++){if(this.coordinates.length!==U.coordinates[re].length)return!1;if(ge(this.coordinates,U.coordinates[re]))return!0}if(U.type==="Polygon")if(this.type==="Polygon"){if(U.coordinates.length===this.coordinates.length){for(re=0;re<this.coordinates.length;re++)if(ve(this.coordinates[re],U.coordinates[re]))return!0}return this.coordinates.length&&F(U.coordinates,this.coordinates[0][0])?!fe(te(this.coordinates),te(U.coordinates)):!1}else{if(this.type==="Point")return F(U.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(re=0;re<this.coordinates.length;re++)if(F(U.coordinates,this.coordinates[re])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(re=0;re<this.coordinates.length;re++){var A=new Se(this.coordinates[re]);if(A.within(U)===!1)return R++,!1}return!0}else if(this.type==="MultiPolygon"){for(re=0;re<this.coordinates.length;re++){var V=new Ie({type:"Polygon",coordinates:this.coordinates[re]});if(V.within(U)===!1)return!1}return!0}}if(U.type==="MultiPolygon"){if(this.type==="Point"){if(U.coordinates.length){for(re=0;re<U.coordinates.length;re++)if(oe=U.coordinates[re],F(oe,this.coordinates)&&fe([this.coordinates],U.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(re=0;re<this.coordinates.length;re++)if(U.coordinates[re].length===this.coordinates.length){for(j=0;j<this.coordinates.length;j++)if(ve(this.coordinates[j],U.coordinates[re][j]))return!0}if(fe(this.coordinates,U.coordinates)===!1&&U.coordinates.length){for(re=0;re<U.coordinates.length;re++)oe=U.coordinates[re],F(oe,this.coordinates[0][0])===!1?R=!1:R=!0;return R}}else if(this.type==="LineString"||this.type==="MultiPoint")for(re=0;re<U.coordinates.length;re++){var H={type:"Polygon",coordinates:U.coordinates[re]};return!!this.within(H)}else if(this.type==="MultiLineString"){for(re=0;re<this.coordinates.length;re++){var N=new Se(this.coordinates[re]);if(N.within(U)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(re=0;re<U.coordinates.length;re++){var Y={type:"Polygon",coordinates:U.coordinates[re]};if(this.within(Y)===!1)return!1}return!0}}return!1},Ie.prototype.intersects=function(U){U.type==="Feature"&&(U=U.geometry);var oe=new Ie(U);if(this.within(U)||oe.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&U.type!=="Point"&&U.type!=="MultiPoint")return fe(this.coordinates,U.coordinates);if(this.type==="Feature"){var re=new Ie(this.geometry);return re.intersects(U)}return u("Type "+this.type+" to "+U.type+" intersection is not supported by intersects"),!1};function ke(U){var oe=Array.prototype.slice.call(arguments);if(U&&U.type==="Point"&&U.coordinates)c(this,U);else if(U&&l(U))this.coordinates=U;else if(oe.length>=2)this.coordinates=oe;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}ke.prototype=new Ie,ke.prototype.constructor=ke;function Te(U){if(U&&U.type==="MultiPoint"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}Te.prototype=new Ie,Te.prototype.constructor=Te,Te.prototype.forEach=function(U){for(var oe=0;oe<this.coordinates.length;oe++)U.apply(this,[this.coordinates[oe],oe,this.coordinates]);return this},Te.prototype.addPoint=function(U){return this.coordinates.push(U),this},Te.prototype.insertPoint=function(U,oe){return this.coordinates.splice(oe,0,U),this},Te.prototype.removePoint=function(U){return typeof U=="number"?this.coordinates.splice(U,1):this.coordinates.splice(this.coordinates.indexOf(U),1),this},Te.prototype.get=function(U){return new ke(this.coordinates[U])};function Se(U){if(U&&U.type==="LineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}Se.prototype=new Ie,Se.prototype.constructor=Se,Se.prototype.addVertex=function(U){return this.coordinates.push(U),this},Se.prototype.insertVertex=function(U,oe){return this.coordinates.splice(oe,0,U),this},Se.prototype.removeVertex=function(U){return this.coordinates.splice(U,1),this};function Ae(U){if(U&&U.type==="MultiLineString"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}Ae.prototype=new Ie,Ae.prototype.constructor=Ae,Ae.prototype.forEach=function(U){for(var oe=0;oe<this.coordinates.length;oe++)U.apply(this,[this.coordinates[oe],oe,this.coordinates])},Ae.prototype.get=function(U){return new Se(this.coordinates[U])};function X(U){if(U&&U.type==="Polygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}X.prototype=new Ie,X.prototype.constructor=X,X.prototype.addVertex=function(U){return this.insertVertex(U,this.coordinates[0].length-1),this},X.prototype.insertVertex=function(U,oe){return this.coordinates[0].splice(oe,0,U),this},X.prototype.removeVertex=function(U){return this.coordinates[0].splice(U,1),this},X.prototype.close=function(){this.coordinates=te(this.coordinates)},X.prototype.hasHoles=function(){return this.coordinates.length>1},X.prototype.holes=function(){if(holes=[],this.hasHoles())for(var U=1;U<this.coordinates.length;U++)holes.push(new X([this.coordinates[U]]));return holes};function Z(U){if(U&&U.type==="MultiPolygon"&&U.coordinates)c(this,U);else if(l(U))this.coordinates=U;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}Z.prototype=new Ie,Z.prototype.constructor=Z,Z.prototype.forEach=function(U){for(var oe=0;oe<this.coordinates.length;oe++)U.apply(this,[this.coordinates[oe],oe,this.coordinates])},Z.prototype.get=function(U){return new X(this.coordinates[U])},Z.prototype.close=function(){var U=[];return this.forEach(function(oe){U.push(te(oe))}),this.coordinates=U,this};function le(U){if(U&&U.type==="Feature")c(this,U);else if(U&&U.type&&U.coordinates)this.geometry=U;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}le.prototype=new Ie,le.prototype.constructor=le;function z(U){if(U&&U.type==="FeatureCollection"&&U.features)c(this,U);else if(l(U))this.features=U;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}z.prototype=new Ie,z.prototype.constructor=z,z.prototype.forEach=function(U){for(var oe=0;oe<this.features.length;oe++)U.apply(this,[this.features[oe],oe,this.features])},z.prototype.get=function(U){var oe;return this.forEach(function(re){re.id===U&&(oe=re)}),new le(oe)};function ee(U){if(U&&U.type==="GeometryCollection"&&U.geometries)c(this,U);else if(l(U))this.geometries=U;else if(U.coordinates&&U.type)this.type="GeometryCollection",this.geometries=[U];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}ee.prototype=new Ie,ee.prototype.constructor=ee,ee.prototype.forEach=function(U){for(var oe=0;oe<this.geometries.length;oe++)U.apply(this,[this.geometries[oe],oe,this.geometries])},ee.prototype.get=function(U){return new Ie(this.geometries[U])};function we(U,oe,re){for(var R=M(U),$=re||64,A={type:"Polygon",coordinates:[[]]},V=1;V<=$;V++){var H=V*(360/$)*Math.PI/180;A.coordinates[0].push([R[0]+oe*Math.cos(H),R[1]+oe*Math.sin(H)])}return A.coordinates=te(A.coordinates),B(A)}function se(U,oe,re){var R=re||64,$=oe||250;if(!U||U.length<2||!$||!R)throw new Error("Terraformer: missing parameter for Terraformer.Circle");c(this,new le({type:"Feature",geometry:we(U,$,R),properties:{radius:$,center:U,steps:R}}))}return se.prototype=new Ie,se.prototype.constructor=se,se.prototype.recalculate=function(){return this.geometry=we(this.properties.center,this.properties.radius,this.properties.steps),this},se.prototype.center=function(U){return U&&(this.properties.center=U,this.recalculate()),this.properties.center},se.prototype.radius=function(U){return U&&(this.properties.radius=U,this.recalculate()),this.properties.radius},se.prototype.steps=function(U){return U&&(this.properties.steps=U,this.recalculate()),this.properties.steps},se.prototype.toJSON=function(){var U=Ie.prototype.toJSON.call(this);return U},r.Primitive=Ie,r.Point=ke,r.MultiPoint=Te,r.LineString=Se,r.MultiLineString=Ae,r.Polygon=X,r.MultiPolygon=Z,r.Feature=le,r.FeatureCollection=z,r.GeometryCollection=ee,r.Circle=se,r.toMercator=D,r.toGeographic=B,r.Tools={},r.Tools.positionToMercator=M,r.Tools.positionToGeographic=T,r.Tools.applyConverter=k,r.Tools.toMercator=D,r.Tools.toGeographic=B,r.Tools.createCircle=we,r.Tools.calculateBounds=p,r.Tools.calculateEnvelope=_,r.Tools.coordinatesContainPoint=L,r.Tools.polygonContainsPoint=F,r.Tools.arraysIntersectArrays=fe,r.Tools.coordinatesContainPoint=L,r.Tools.coordinatesEqual=ve,r.Tools.convexHull=y,r.Tools.isConvex=C,r.MercatorCRS=o,r.GeographicCRS=a,r})})(KD);function r9e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Lg=1,Ng=2,i9e=4,RP=5,v2=484813681109536e-20,dt=Math.PI/2,n9e=.16666666666666666,s9e=.04722222222222222,o9e=.022156084656084655,Tt=1e-10,ao=.017453292519943295,yf=57.29577951308232,si=Math.PI/4,PP=Math.PI*2,ln=3.14159265359,ha={};ha.greenwich=0;ha.lisbon=-9.131906111111;ha.paris=2.337229166667;ha.bogota=-74.080916666667;ha.madrid=-3.687938888889;ha.rome=12.452333333333;ha.bern=7.439583333333;ha.jakarta=106.807719444444;ha.ferro=-17.666666666667;ha.brussels=4.367975;ha.stockholm=18.058277777778;ha.athens=23.7163375;ha.oslo=10.722916666667;var a9e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},iH=/[\s_\-\/\(\)]/g;function Jf(e,t){if(e[t])return e[t];for(var r=Object.keys(e),i=t.toLowerCase().replace(iH,""),n=-1,s,o;++n<r.length;)if(s=r[n],o=s.toLowerCase().replace(iH,""),o===i)return e[s]}function LP(e){var t={},r=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),i,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*ao},lat_1:function(a){t.lat1=a*ao},lat_2:function(a){t.lat2=a*ao},lat_ts:function(a){t.lat_ts=a*ao},lon_0:function(a){t.long0=a*ao},lon_1:function(a){t.long1=a*ao},lon_2:function(a){t.long2=a*ao},alpha:function(a){t.alpha=parseFloat(a)*ao},lonc:function(a){t.longc=a*ao},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=Jf(a9e,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*ao},pm:function(a){var l=Jf(ha,a);t.from_greenwich=(l||parseFloat(a))*ao},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)}};for(i in r)n=r[i],i in o?(s=o[i],typeof s=="function"?s(n):t[s]=n):t[i]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var _x=1,voe=2,boe=3,iT=4,woe=5,YD=-1,l9e=/\s/,u9e=/[A-Za-z]/,c9e=/[A-Za-z84_]/,rA=/[,\]]/,_oe=/[\d\.E\-\+]/;function Gp(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=_x}Gp.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==iT)for(;l9e.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case _x:return this.neutral(e);case voe:return this.keyword(e);case iT:return this.quoted(e);case woe:return this.afterquote(e);case boe:return this.number(e);case YD:return}};Gp.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=iT;return}if(rA.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Gp.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=_x;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=_x,this.currentObject=this.stack.pop(),this.currentObject||(this.state=YD);return}};Gp.prototype.number=function(e){if(_oe.test(e)){this.word+=e;return}if(rA.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Gp.prototype.quoted=function(e){if(e==='"'){this.state=woe;return}this.word+=e};Gp.prototype.keyword=function(e){if(c9e.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=_x;return}if(rA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Gp.prototype.neutral=function(e){if(u9e.test(e)){this.word=e,this.state=voe;return}if(e==='"'){this.word="",this.state=iT;return}if(_oe.test(e)){this.word=e,this.state=boe;return}if(rA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Gp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===YD)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function h9e(e){var t=new Gp(e);return t.output()}function nH(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var i=t?{}:e,n=r.reduce(function(s,o){return U1(o,s),s},i);t&&(e[t]=n)}function U1(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},U1(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&U1(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&U1(e[3],t[r]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],nH(t,r,e);return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return U1(e,t[r]);return nH(t,r,e)}}var p9e=.017453292519943295;function d9e(e,t){var r=t[0],i=t[1];!(r in e)&&i in e&&(e[r]=e[i],t.length===3&&(e[r]=t[2](e[r])))}function $h(e){return e*p9e}function f9e(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",r=0,i=e.AXIS.length;r<i;++r){var n=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?t+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?t+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?t+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;e.type==="GEOGCS"&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var c=e.to_meter||1;return u*c}var a=function(u){return d9e(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",$h],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",$h],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",$h],["lat0","latitude_of_origin",$h],["lat0","standard_parallel_1",$h],["lat1","standard_parallel_1",$h],["lat2","standard_parallel_2",$h],["azimuth","Azimuth"],["alpha","azimuth",$h],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=$h(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function xoe(e){var t=h9e(e),r=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",r]);var n={};return U1(t,n),f9e(n),n}function lo(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?lo[e]=LP(arguments[1]):lo[e]=xoe(arguments[1]):lo[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?lo.apply(t,i):lo(i)});if(typeof e=="string"){if(e in lo)return lo[e]}else"EPSG"in e?lo["EPSG:"+e.EPSG]=e:"ESRI"in e?lo["ESRI:"+e.ESRI]=e:"IAU2000"in e?lo["IAU2000:"+e.IAU2000]=e:console.log(e);return}}r9e(lo);function m9e(e){return typeof e=="string"}function y9e(e){return e in lo}var g9e=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function v9e(e){return g9e.some(function(t){return e.indexOf(t)>-1})}var b9e=["3857","900913","3785","102113"];function w9e(e){var t=Jf(e,"authority");if(!!t){var r=Jf(t,"epsg");return r&&b9e.indexOf(r)>-1}}function _9e(e){var t=Jf(e,"extension");if(!!t)return Jf(t,"proj4")}function x9e(e){return e[0]==="+"}function S9e(e){if(m9e(e)){if(y9e(e))return lo[e];if(v9e(e)){var t=xoe(e);if(w9e(t))return lo["EPSG:3857"];var r=_9e(t);return r?LP(r):t}if(x9e(e))return LP(e)}else return e}function sH(e,t){e=e||{};var r,i;if(!t)return e;for(i in t)r=t[i],r!==void 0&&(e[i]=r);return e}function ph(e,t,r){var i=e*t;return r/Math.sqrt(1-i*i)}function TS(e){return e<0?-1:1}function Rt(e){return Math.abs(e)<=ln?e:e-TS(e)*PP}function ju(e,t,r){var i=e*r,n=.5*e;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(dt-t))/i}function xx(e,t){for(var r=.5*e,i,n,s=dt-2*Math.atan(t),o=0;o<=15;o++)if(i=e*Math.sin(s),n=dt-2*Math.atan(t*Math.pow((1-i)/(1+i),r))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function E9e(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function M9e(e){var t=e.x,r=e.y;if(r*yf>90&&r*yf<-90&&t*yf>180&&t*yf<-180)return null;var i,n;if(Math.abs(Math.abs(r)-dt)<=Tt)return null;if(this.sphere)i=this.x0+this.a*this.k0*Rt(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(si+.5*r));else{var s=Math.sin(r),o=ju(this.e,r,s);i=this.x0+this.a*this.k0*Rt(t-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return e.x=i,e.y=n,e}function I9e(e){var t=e.x-this.x0,r=e.y-this.y0,i,n;if(this.sphere)n=dt-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(n=xx(this.e,s),n===-9999)return null}return i=Rt(this.long0+t/(this.a*this.k0)),e.x=i,e.y=n,e}var T9e=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],A9e={init:E9e,forward:M9e,inverse:I9e,names:T9e};function $9e(){}function oH(e){return e}var C9e=["longlat","identity"],k9e={init:$9e,forward:oH,inverse:oH,names:C9e},O9e=[A9e,k9e],T5={},nT=[];function Soe(e,t){var r=nT.length;return e.names?(nT[r]=e,e.names.forEach(function(i){T5[i.toLowerCase()]=r}),this):(console.log(t),!0)}function R9e(e){if(!e)return!1;var t=e.toLowerCase();if(typeof T5[t]<"u"&&nT[T5[t]])return nT[T5[t]]}function P9e(){O9e.forEach(Soe)}var L9e={start:P9e,add:Soe,get:R9e},cr={};cr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};cr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};cr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};cr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};cr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};cr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};cr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};cr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};cr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};cr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};cr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};cr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};cr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};cr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};cr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};cr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};cr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};cr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};cr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};cr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};cr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};cr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};cr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};cr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};cr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};cr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};cr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};cr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};cr.hough={a:6378270,rf:297,ellipseName:"Hough"};cr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};cr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};cr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};cr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};cr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};cr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};cr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};cr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};cr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};cr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};cr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};cr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var N9e=cr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};cr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function D9e(e,t,r,i){var n=e*e,s=t*t,o=(n-s)/n,a=0;i?(e*=1-o*(n9e+o*(s9e+o*o9e)),n=e*e,o=0):a=Math.sqrt(o);var l=(n-s)/s;return{es:o,e:a,ep2:l}}function F9e(e,t,r,i,n){if(!e){var s=Jf(cr,i);s||(s=N9e),e=s.a,t=s.b,r=s.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<Tt)&&(n=!0,t=e),{a:e,b:t,rf:r,sphere:n}}var rs={};rs.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};rs.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};rs.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};rs.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};rs.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};rs.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};rs.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};rs.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};rs.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};rs.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};rs.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};rs.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};rs.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};rs.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};rs.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};rs.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};rs.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function j9e(e,t,r,i,n,s){var o={};return e===void 0||e==="none"?o.datum_type=RP:o.datum_type=i9e,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Lg),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Ng,o.datum_params[3]*=v2,o.datum_params[4]*=v2,o.datum_params[5]*=v2,o.datum_params[6]=o.datum_params[6]/1e6+1)),o.a=r,o.b=i,o.es=n,o.ep2=s,o}function th(e,t){if(!(this instanceof th))return new th(e);t=t||function(l){if(l)throw l};var r=S9e(e);if(typeof r!="object"){t(e);return}var i=th.projections.get(r.projName);if(!i){t(e);return}if(r.datumCode&&r.datumCode!=="none"){var n=Jf(rs,r.datumCode);n&&(r.datum_params=n.towgs84?n.towgs84.split(","):null,r.ellps=n.ellipse,r.datumName=n.datumName?n.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var s=F9e(r.a,r.b,r.rf,r.ellps,r.sphere),o=D9e(s.a,s.b,s.rf,r.R_A),a=r.datum||j9e(r.datumCode,r.datum_params,s.a,s.b,o.es,o.ep2);sH(this,r),sH(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=a,this.init(),t(null,this)}th.projections=L9e;th.projections.start();function U9e(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Lg?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Ng?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function Eoe(e,t,r){var i=e.x,n=e.y,s=e.z?e.z:0,o,a,l,u;if(n<-dt&&n>-1.001*dt)n=-dt;else if(n>dt&&n<1.001*dt)n=dt;else{if(n<-dt)return{x:-1/0,y:-1/0,z:e.z};if(n>dt)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(n),u=Math.cos(n),l=a*a,o=r/Math.sqrt(1-t*l),{x:(o+s)*u*Math.cos(i),y:(o+s)*u*Math.sin(i),z:(o*(1-t)+s)*a}}function Moe(e,t,r,i){var n=1e-12,s=n*n,o=30,a,l,u,c,p,d,m,g,b,v,_,E,I,x=e.x,T=e.y,M=e.z?e.z:0,k,D,B;if(a=Math.sqrt(x*x+T*T),l=Math.sqrt(x*x+T*T+M*M),a/r<n){if(k=0,l/r<n)return D=dt,B=-i,{x:e.x,y:e.y,z:e.z}}else k=Math.atan2(T,x);u=M/l,c=a/l,p=1/Math.sqrt(1-t*(2-t)*c*c),g=c*(1-t)*p,b=u*p,I=0;do I++,m=r/Math.sqrt(1-t*b*b),B=a*g+M*b-m*(1-t*b*b),d=t*m/(m+B),p=1/Math.sqrt(1-d*(2-d)*c*c),v=c*(1-d)*p,_=u*p,E=_*g-v*b,g=v,b=_;while(E*E>s&&I<o);return D=Math.atan(_/Math.abs(v)),{x:k,y:D,z:B}}function V9e(e,t,r){if(t===Lg)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===Ng){var i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+a*e.z)+i,y:u*(l*e.x+e.y-o*e.z)+n,z:u*(-a*e.x+o*e.y+e.z)+s}}}function B9e(e,t,r){if(t===Lg)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===Ng){var i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6],c=(e.x-i)/u,p=(e.y-n)/u,d=(e.z-s)/u;return{x:c+l*p-a*d,y:-l*c+p+o*d,z:a*c-o*p+d}}}function $E(e){return e===Lg||e===Ng}function z9e(e,t,r){return U9e(e,t)||e.datum_type===RP||t.datum_type===RP||e.es===t.es&&e.a===t.a&&!$E(e.datum_type)&&!$E(t.datum_type)?r:(r=Eoe(r,e.es,e.a),$E(e.datum_type)&&(r=V9e(r,e.datum_type,e.datum_params)),$E(t.datum_type)&&(r=B9e(r,t.datum_type,t.datum_params)),Moe(r,t.es,t.a,t.b))}function aH(e,t,r){var i=r.x,n=r.y,s=r.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&r.z===void 0))switch(l===0?(o=i,a="x"):l===1?(o=n,a="y"):(o=s,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":r[a]!==void 0&&(u.z=o);break;case"d":r[a]!==void 0&&(u.z=-o);break;default:return null}return u}function Ioe(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function G9e(e){lH(e.x),lH(e.y)}function lH(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function q9e(e,t){return(e.datum.datum_type===Lg||e.datum.datum_type===Ng)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Lg||t.datum.datum_type===Ng)&&e.datumCode!=="WGS84"}function sT(e,t,r){var i;return Array.isArray(r)&&(r=Ioe(r)),G9e(r),e.datum&&t.datum&&q9e(e,t)&&(i=new th("WGS84"),r=sT(e,i,r),e=i),e.axis!=="enu"&&(r=aH(e,!1,r)),e.projName==="longlat"?r={x:r.x*ao,y:r.y*ao,z:r.z||0}:(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r)),e.from_greenwich&&(r.x+=e.from_greenwich),r=z9e(e.datum,t.datum,r),t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*yf,y:r.y*yf,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),t.axis!=="enu"?aH(t,!0,r):r}var uH=th("WGS84");function pk(e,t,r){var i,n,s;return Array.isArray(r)?(i=sT(e,t,r)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(n=sT(e,t,r),s=Object.keys(r),s.length===2||s.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;n[o]=r[o]}),n)}function cH(e){return e instanceof th?e:e.oProj?e.oProj:th(e)}function bi(e,t,r){e=cH(e);var i=!1,n;return typeof t>"u"?(t=e,e=uH,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=uH,i=!0),t=cH(t),r?pk(e,t,r):(n={forward:function(s){return pk(e,t,s)},inverse:function(s){return pk(t,e,s)}},i&&(n.oProj=t),n)}var hH=6,Toe="AJSAJS",Aoe="AFAFAF",V1=65,Oo=73,Sl=79,L_=86,N_=90,H9e={forward:$oe,inverse:W9e,toPoint:Coe};function $oe(e,t){return t=t||5,K9e(J9e({lat:e[1],lon:e[0]}),t)}function W9e(e){var t=QD(Ooe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function Coe(e){var t=QD(Ooe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function dk(e){return e*(Math.PI/180)}function pH(e){return 180*(e/Math.PI)}function J9e(e){var t=e.lat,r=e.lon,i=6378137,n=.00669438,s=.9996,o,a,l,u,c,p,d,m=dk(t),g=dk(r),b,v;v=Math.floor((r+180)/6)+1,r===180&&(v=60),t>=56&&t<64&&r>=3&&r<12&&(v=32),t>=72&&t<84&&(r>=0&&r<9?v=31:r>=9&&r<21?v=33:r>=21&&r<33?v=35:r>=33&&r<42&&(v=37)),o=(v-1)*6-180+3,b=dk(o),a=n/(1-n),l=i/Math.sqrt(1-n*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),c=a*Math.cos(m)*Math.cos(m),p=Math.cos(m)*(g-b),d=i*((1-n/4-3*n*n/64-5*n*n*n/256)*m-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*m)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*m)-35*n*n*n/3072*Math.sin(6*m));var _=s*l*(p+(1-u+c)*p*p*p/6+(5-18*u+u*u+72*c-58*a)*p*p*p*p*p/120)+5e5,E=s*(d+l*Math.tan(m)*(p*p/2+(5-u+9*c+4*c*c)*p*p*p*p/24+(61-58*u+u*u+600*c-330*a)*p*p*p*p*p*p/720));return t<0&&(E+=1e7),{northing:Math.round(E),easting:Math.round(_),zoneNumber:v,zoneLetter:Z9e(t)}}function QD(e){var t=e.northing,r=e.easting,i=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,p,d,m,g,b,v,_,E,I=r-5e5,x=t;i<"N"&&(x-=1e7),v=(n-1)*6-180+3,l=a/(1-a),b=x/s,_=b/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),E=_+(3*u/2-27*u*u*u/32)*Math.sin(2*_)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*_)+151*u*u*u/96*Math.sin(6*_),c=o/Math.sqrt(1-a*Math.sin(E)*Math.sin(E)),p=Math.tan(E)*Math.tan(E),d=l*Math.cos(E)*Math.cos(E),m=o*(1-a)/Math.pow(1-a*Math.sin(E)*Math.sin(E),1.5),g=I/(c*s);var T=E-c*Math.tan(E)/m*(g*g/2-(5+3*p+10*d-4*d*d-9*l)*g*g*g*g/24+(61+90*p+298*d+45*p*p-252*l-3*d*d)*g*g*g*g*g*g/720);T=pH(T);var M=(g-(1+2*p+d)*g*g*g/6+(5-2*d+28*p-3*d*d+8*l+24*p*p)*g*g*g*g*g/120)/Math.cos(E);M=v+pH(M);var k;if(e.accuracy){var D=QD({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});k={top:D.lat,right:D.lon,bottom:T,left:M}}else k={lat:T,lon:M};return k}function Z9e(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function K9e(e,t){var r="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+Y9e(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+i.substr(i.length-5,t)}function Y9e(e,t,r){var i=koe(r),n=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return Q9e(n,s,i)}function koe(e){var t=e%hH;return t===0&&(t=hH),t}function Q9e(e,t,r){var i=r-1,n=Toe.charCodeAt(i),s=Aoe.charCodeAt(i),o=n+e-1,a=s+t,l=!1;o>N_&&(o=o-N_+V1-1,l=!0),(o===Oo||n<Oo&&o>Oo||(o>Oo||n<Oo)&&l)&&o++,(o===Sl||n<Sl&&o>Sl||(o>Sl||n<Sl)&&l)&&(o++,o===Oo&&o++),o>N_&&(o=o-N_+V1-1),a>L_?(a=a-L_+V1-1,l=!0):l=!1,(a===Oo||s<Oo&&a>Oo||(a>Oo||s<Oo)&&l)&&a++,(a===Sl||s<Sl&&a>Sl||(a>Sl||s<Sl)&&l)&&(a++,a===Oo&&a++),a>L_&&(a=a-L_+V1-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function Ooe(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,i="",n,s=0;!/[A-Z]/.test(n=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;i+=n,s++}var o=parseInt(i,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;r=e.substring(s,s+=2);for(var l=koe(o),u=X9e(r.charAt(0),l),c=eDe(r.charAt(1),l);c<tDe(a);)c+=2e6;var p=t-s;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var d=p/2,m=0,g=0,b,v,_,E,I;return d>0&&(b=1e5/Math.pow(10,d),v=e.substring(s,s+d),m=parseFloat(v)*b,_=e.substring(s+d),g=parseFloat(_)*b),E=m+u,I=g+c,{easting:E,northing:I,zoneLetter:a,zoneNumber:o,accuracy:b}}function X9e(e,t){for(var r=Toe.charCodeAt(t-1),i=1e5,n=!1;r!==e.charCodeAt(0);){if(r++,r===Oo&&r++,r===Sl&&r++,r>N_){if(n)throw"Bad character: "+e;r=V1,n=!0}i+=1e5}return i}function eDe(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=Aoe.charCodeAt(t-1),i=0,n=!1;r!==e.charCodeAt(0);){if(r++,r===Oo&&r++,r===Sl&&r++,r>L_){if(n)throw"Bad character: "+e;r=V1,n=!0}i+=1e5}return i}function tDe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Rv(e,t,r){if(!(this instanceof Rv))return new Rv(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Rv.fromMGRS=function(e){return new Rv(Coe(e))};Rv.prototype.toMGRS=function(e){return $oe([this.x,this.y],e)};var rDe=1,iDe=.25,dH=.046875,fH=.01953125,mH=.01068115234375,nDe=.75,sDe=.46875,oDe=.013020833333333334,aDe=.007120768229166667,lDe=.3645833333333333,uDe=.005696614583333333,cDe=.3076171875;function Roe(e){var t=[];t[0]=rDe-e*(iDe+e*(dH+e*(fH+e*mH))),t[1]=e*(nDe-e*(dH+e*(fH+e*mH)));var r=e*e;return t[2]=r*(sDe-e*(oDe+e*aDe)),r*=e,t[3]=r*(lDe-e*uDe),t[4]=r*e*cDe,t}function iA(e,t,r,i){return r*=t,t*=t,i[0]*e-r*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var hDe=20;function Poe(e,t,r){for(var i=1/(1-t),n=e,s=hDe;s;--s){var o=Math.sin(n),a=1-t*o*o;if(a=(iA(n,o,Math.cos(n),r)-e)*(a*Math.sqrt(a))*i,n-=a,Math.abs(a)<Tt)return n}return n}function pDe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Roe(this.es),this.ml0=iA(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function dDe(e){var t=e.x,r=e.y,i=Rt(t-this.long0),n,s,o,a=Math.sin(r),l=Math.cos(r);if(this.es){var c=l*i,p=Math.pow(c,2),d=this.ep2*Math.pow(l,2),m=Math.pow(d,2),g=Math.abs(l)>Tt?Math.tan(r):0,b=Math.pow(g,2),v=Math.pow(b,2);n=1-this.es*Math.pow(a,2),c=c/Math.sqrt(n);var _=iA(r,a,l,this.en);s=this.a*(this.k0*c*(1+p/6*(1-b+d+p/20*(5-18*b+v+14*d-58*b*d+p/42*(61+179*v-v*b-479*b)))))+this.x0,o=this.a*(this.k0*(_-this.ml0+a*i*c/2*(1+p/12*(5-b+9*d+4*m+p/30*(61+v-58*b+270*d-330*b*d+p/56*(1385+543*v-v*b-3111*b))))))+this.y0}else{var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<Tt)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Tt)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=s,e.y=o,e}function fDe(e){var t,r,i,n,s=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,r=Poe(t,this.es,this.en),Math.abs(r)<dt){var p=Math.sin(r),d=Math.cos(r),m=Math.abs(d)>Tt?Math.tan(r):0,g=this.ep2*Math.pow(d,2),b=Math.pow(g,2),v=Math.pow(m,2),_=Math.pow(v,2);t=1-this.es*Math.pow(p,2);var E=s*Math.sqrt(t)/this.k0,I=Math.pow(E,2);t=t*m,i=r-t*I/(1-this.es)*.5*(1-I/12*(5+3*v-9*g*v+g-4*b-I/30*(61+90*v-252*g*v+45*_+46*g-I/56*(1385+3633*v+4095*_+1574*_*v)))),n=Rt(this.long0+E*(1-I/6*(1+2*v+g-I/20*(5+28*v+24*_+8*g*v+6*g-I/42*(61+662*v+1320*_+720*_*v))))/d)}else i=dt*TS(o),n=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),i=Math.asin(t),o<0&&(i=-i),l===0&&c===0?n=0:n=Rt(Math.atan2(l,c)+this.long0)}return e.x=n,e.y=i,e}var mDe=["Transverse_Mercator","Transverse Mercator","tmerc"],yDe={init:pDe,forward:dDe,inverse:fDe,names:mDe};function Loe(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function XD(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),i=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function gDe(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function vDe(e){var t=Math.abs(e);return t=gDe(t*(1+t/(XD(1,t)+1))),e<0?-t:t}function eF(e,t){for(var r=2*Math.cos(2*t),i=e.length-1,n=e[i],s=0,o;--i>=0;)o=-s+r*n+e[i],s=n,n=o;return t+o*Math.sin(2*t)}function bDe(e,t){for(var r=2*Math.cos(t),i=e.length-1,n=e[i],s=0,o;--i>=0;)o=-s+r*n+e[i],s=n,n=o;return Math.sin(t)*o}function wDe(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function Noe(e,t,r){for(var i=Math.sin(t),n=Math.cos(t),s=Loe(r),o=wDe(r),a=2*n*o,l=-2*i*s,u=e.length-1,c=e[u],p=0,d=0,m=0,g,b;--u>=0;)g=d,b=p,d=c,p=m,c=-g+a*d-l*p+e[u],m=-b+l*d+a*p;return a=i*o,l=n*s,[a*c-l*m,a*m+l*c]}function _De(){if(this.es===void 0||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=eF(this.cbg,this.lat0);this.Zb=-this.Qn*(i+bDe(this.gtu,2*i))}function xDe(e){var t=Rt(e.x-this.long0),r=e.y;r=eF(this.cbg,r);var i=Math.sin(r),n=Math.cos(r),s=Math.sin(t),o=Math.cos(t);r=Math.atan2(i,o*n),t=Math.atan2(s*n,XD(i,n*o)),t=vDe(Math.tan(t));var a=Noe(this.gtu,2*r,2*t);r=r+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function SDe(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var i,n;if(Math.abs(t)<=2.623395162778){var s=Noe(this.utg,2*r,2*t);r=r+s[0],t=t+s[1],t=Math.atan(Loe(t));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(t),u=Math.cos(t);r=Math.atan2(o*u,XD(l,u*a)),t=Math.atan2(l,u*a),i=Rt(t+this.long0),n=eF(this.cgb,r)}else i=1/0,n=1/0;return e.x=i,e.y=n,e}var EDe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],A5={init:_De,forward:xDe,inverse:SDe,names:EDe};function MDe(e,t){if(e===void 0){if(e=Math.floor((Rt(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var IDe="etmerc";function TDe(){var e=MDe(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ao,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,A5.init.apply(this),this.forward=A5.forward,this.inverse=A5.inverse}var ADe=["Universal Transverse Mercator System","utm"],$De={init:TDe,names:ADe,dependsOn:IDe};function tF(e,t){return Math.pow((1-e)/(1+e),t)}var CDe=20;function kDe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+si)/(Math.pow(Math.tan(.5*this.lat0+si),this.C)*tF(this.e*e,this.ratexp))}function ODe(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+si),this.C)*tF(this.e*Math.sin(r),this.ratexp))-dt,e.x=this.C*t,e}function RDe(e){for(var t=1e-14,r=e.x/this.C,i=e.y,n=Math.pow(Math.tan(.5*i+si)/this.K,1/this.C),s=CDe;s>0&&(i=2*Math.atan(n*tF(this.e*Math.sin(e.y),-.5*this.e))-dt,!(Math.abs(i-e.y)<t));--s)e.y=i;return s?(e.x=r,e.y=i,e):null}var PDe=["gauss"],rF={init:kDe,forward:ODe,inverse:RDe,names:PDe};function LDe(){rF.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function NDe(e){var t,r,i,n;return e.x=Rt(e.x-this.long0),rF.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*i),e.x=n*r*Math.sin(e.x),e.y=n*(this.cosc0*t-this.sinc0*r*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function DDe(e){var t,r,i,n,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(s,this.R2);t=Math.sin(o),r=Math.cos(o),n=Math.asin(r*this.sinc0+e.y*t*this.cosc0/s),i=Math.atan2(e.x*t,s*this.cosc0*r-e.y*this.sinc0*t)}else n=this.phic0,i=0;return e.x=i,e.y=n,rF.inverse.apply(this,[e]),e.x=Rt(e.x+this.long0),e}var FDe=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],jDe={init:LDe,forward:NDe,inverse:DDe,names:FDe};function UDe(e,t,r){return t*=r,Math.tan(.5*(dt+e))*Math.pow((1-t)/(1+t),.5*r)}function VDe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Tt&&(this.k0=.5*(1+TS(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Tt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Tt&&(this.k0=.5*this.cons*ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ju(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ph(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-dt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function BDe(e){var t=e.x,r=e.y,i=Math.sin(r),n=Math.cos(r),s,o,a,l,u,c,p=Rt(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Tt&&Math.abs(r+this.lat0)<=Tt?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(p)),e.x=this.a*s*n*Math.sin(p)+this.x0,e.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(p))+this.y0,e):(o=2*Math.atan(this.ssfn_(r,i,this.e))-dt,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Tt?(u=ju(this.e,r*this.con,this.con*i),c=2*this.a*this.k0*u/this.cons,e.x=this.x0+c*Math.sin(t-this.long0),e.y=this.y0-this.con*c*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Tt?(s=2*this.a*this.k0/(1+l*Math.cos(p)),e.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(p))),e.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(p))+this.y0),e.x=s*l*Math.sin(p)+this.x0,e))}function zDe(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,r=this.lat0,o<=Tt?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Tt?this.lat0>0?t=Rt(this.long0+Math.atan2(e.x,-1*e.y)):t=Rt(this.long0+Math.atan2(e.x,e.y)):t=Rt(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=Tt){if(o<=Tt)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,i=o*this.cons/(2*this.a*this.k0),r=this.con*xx(this.e,i),t=this.con*Rt(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=Tt?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/o),t=Rt(this.long0+Math.atan2(e.x*Math.sin(n),o*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))),r=-1*xx(this.e,Math.tan(.5*(dt+s)));return e.x=t,e.y=r,e}var GDe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],qDe={init:VDe,forward:BDe,inverse:zDe,names:GDe,ssfn_:UDe};function HDe(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*r*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function WDe(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+r)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function JDe(e){for(var t=e.x-this.x0,r=e.y-this.y0,i=t/this.R,n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,u=s,c=-1e3,p=0;Math.abs(u-c)>1e-7;){if(++p>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var ZDe=["somerc"],KDe={init:HDe,forward:WDe,inverse:JDe,names:ZDe};function YDe(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var i=ju(this.e,this.lat0,e),n=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));n*n<1&&(n=1);var s,o;if(!isNaN(this.longc))this.lat0>=0?s=n+Math.sqrt(n*n-1):s=n-Math.sqrt(n*n-1),this.el=s*Math.pow(i,this.bl),o=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;else{var a=ju(this.e,this.lat1,Math.sin(this.lat1)),l=ju(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(i,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(i,this.bl);var u=Math.pow(a,this.bl),c=Math.pow(l,this.bl);s=this.el/u,o=.5*(s-1/s);var p=(this.el*this.el-c*u)/(this.el*this.el+c*u),d=(c-u)/(c+u),m=Rt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*m)/d)/this.bl,this.long0=Rt(this.long0);var g=Rt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/o),this.alpha=Math.asin(n*Math.sin(this.gamma0))}this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function QDe(e){var t=e.x,r=e.y,i=Rt(t-this.long0),n,s,o;if(Math.abs(Math.abs(r)-dt)<=Tt)r>0?o=-1:o=1,s=this.al/this.bl*Math.log(Math.tan(si+o*this.gamma0*.5)),n=-1*o*dt*this.al/this.bl;else{var a=ju(this.e,r,Math.sin(r)),l=this.el/Math.pow(a,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),p=Math.sin(this.bl*i),d=(u*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/c;Math.abs(Math.abs(d)-1)<=Tt?s=Number.POSITIVE_INFINITY:s=.5*this.al*Math.log((1-d)/(1+d))/this.bl,Math.abs(Math.cos(this.bl*i))<=Tt?n=this.al*this.bl*i:n=this.al*Math.atan2(u*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*i))/this.bl}return this.no_rot?(e.x=this.x0+n,e.y=this.y0+s):(n-=this.uc,e.x=this.x0+s*Math.cos(this.alpha)+n*Math.sin(this.alpha),e.y=this.y0+n*Math.cos(this.alpha)-s*Math.sin(this.alpha)),e}function XDe(e){var t,r;this.no_rot?(r=e.y-this.y0,t=e.x-this.x0):(r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var i=Math.exp(-1*this.bl*r/this.al),n=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.bl*t/this.al),a=(o*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/s,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<Tt?(e.x=this.long0,e.y=dt):Math.abs(a+1)<Tt?(e.x=this.long0,e.y=-1*dt):(e.y=xx(this.e,l),e.x=Rt(this.long0-Math.atan2(n*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e}var eFe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],tFe={init:YDe,forward:QDe,inverse:XDe,names:eFe};function rFe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Tt)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),i=ph(this.e,t,r),n=ju(this.e,this.lat1,t),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=ph(this.e,s,o),l=ju(this.e,this.lat2,s),u=ju(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Tt?this.ns=Math.log(i/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function iFe(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Tt&&(r=TS(r)*(dt-2*Tt));var i=Math.abs(Math.abs(r)-dt),n,s;if(i>Tt)n=ju(this.e,r,Math.sin(r)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=r*this.ns,i<=0)return null;s=0}var o=this.ns*Rt(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function nFe(e){var t,r,i,n,s,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),r=1):(t=-Math.sqrt(o*o+a*a),r=-1);var l=0;if(t!==0&&(l=Math.atan2(r*o,r*a)),t!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(t/(this.a*this.f0),r),n=xx(this.e,i),n===-9999)return null}else n=-dt;return s=Rt(l/this.ns+this.long0),e.x=s,e.y=n,e}var sFe=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],oFe={init:rFe,forward:iFe,inverse:nFe,names:sFe};function aFe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function lFe(e){var t,r,i,n,s,o,a,l=e.x,u=e.y,c=Rt(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),i=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),s=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function uFe(e){var t,r,i,n,s,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,c+=1;while(l===0&&c<15);return c>=15?null:e}var cFe=["Krovak","krovak"],hFe={init:aFe,forward:lFe,inverse:uFe,names:cFe};function yo(e,t,r,i,n){return e*n-t*Math.sin(2*n)+r*Math.sin(4*n)-i*Math.sin(6*n)}function AS(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function $S(e){return .375*e*(1+.25*e*(1+.46875*e))}function CS(e){return .05859375*e*e*(1+.75*e)}function kS(e){return e*e*e*(35/3072)}function Pv(e,t,r){var i=t*r;return e/Math.sqrt(1-i*i)}function Nb(e){return Math.abs(e)<dt?e:e-TS(e)*Math.PI}function oT(e,t,r,i,n){var s,o;s=e/t;for(var a=0;a<15;a++)if(o=(e-(t*s-r*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(t-2*r*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function pFe(){this.sphere||(this.e0=AS(this.es),this.e1=$S(this.es),this.e2=CS(this.es),this.e3=kS(this.es),this.ml0=this.a*yo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function dFe(e){var t,r,i=e.x,n=e.y;if(i=Rt(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=Pv(this.a,this.e,s),l=Math.tan(n)*Math.tan(n),u=i*Math.cos(n),c=u*u,p=this.es*o*o/(1-this.es),d=this.a*yo(this.e0,this.e1,this.e2,this.e3,n);t=a*u*(1-c*l*(1/6-(8-l+8*p)*c/120)),r=d-this.ml0+a*s/o*c*(.5+(5-l+6*p)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function fFe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n;if(this.sphere){var s=r+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(s))}else{var o=this.ml0/this.a+r,a=oT(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-dt)<=Tt)return e.x=this.long0,e.y=dt,r<0&&(e.y*=-1),e;var l=Pv(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),p=t*this.a/l,d=p*p;i=a-l*Math.tan(a)/u*p*p*(.5-(1+3*c)*p*p/24),n=p*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(a)}return e.x=Rt(n+this.long0),e.y=Nb(i),e}var mFe=["Cassini","Cassini_Soldner","cass"],yFe={init:pFe,forward:dFe,inverse:fFe,names:mFe};function $f(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var gFe=1,vFe=2,bFe=3,wFe=4;function _Fe(){var e=Math.abs(this.lat0);if(Math.abs(e-dt)<Tt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Tt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=$f(this.e,1),this.mmf=.5/(1-this.es),this.apa=CFe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=$f(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function xFe(e){var t,r,i,n,s,o,a,l,u,c,p=e.x,d=e.y;if(p=Rt(p-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+c*i:1+this.sinph0*s+this.cosph0*c*i,r<=Tt)return null;r=Math.sqrt(2/r),t=r*c*Math.sin(p),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(d+this.phi0)<Tt)return null;r=si-d*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(p),r*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(p),n=Math.sin(p),s=Math.sin(d),o=$f(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=dt+d,o=this.qp-o;break;case this.S_POLE:u=d-dt,o=this.qp+o;break}if(Math.abs(u)<Tt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?r=this.ymf*u*(this.cosb1*a-this.sinb1*l*i):r=(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,t=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*n,r=i*(this.mode===this.S_POLE?u:-u)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function SFe(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n,s,o,a,l,u;if(this.sphere){var c=0,p,d=0;if(p=Math.sqrt(t*t+r*r),n=p*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(n),c=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=Tt?0:Math.asin(r*d/p),t*=d,r=c*p;break;case this.OBLIQ:n=Math.abs(p)<=Tt?this.phi0:Math.asin(c*this.sinph0+r*d*this.cosph0/p),t*=d*this.cosph0,r=(c-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:r=-r,n=dt-n;break;case this.S_POLE:n-=dt;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,l=Math.sqrt(t*t+r*r),l<Tt)return e.x=0,e.y=this.phi0,e;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+r*o*this.cosb1/l,a=this.qp*u,r=l*this.cosb1*s-r*this.sinb1*o):(u=r*o/l,a=this.qp*u,r=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),a=t*t+r*r,!a)return e.x=0,e.y=this.phi0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(t,r),n=kFe(Math.asin(u),this.apa)}return e.x=Rt(this.long0+i),e.y=n,e}var EFe=.3333333333333333,MFe=.17222222222222222,IFe=.10257936507936508,TFe=.06388888888888888,AFe=.0664021164021164,$Fe=.016415012942191543;function CFe(e){var t,r=[];return r[0]=e*EFe,t=e*e,r[0]+=t*MFe,r[1]=t*TFe,t*=e,r[0]+=t*IFe,r[1]+=t*AFe,r[2]=t*$Fe,r}function kFe(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var OFe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],RFe={init:_Fe,forward:xFe,inverse:SFe,names:OFe,S_POLE:gFe,N_POLE:vFe,EQUIT:bFe,OBLIQ:wFe};function Zf(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function PFe(){Math.abs(this.lat1+this.lat2)<Tt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ph(this.e3,this.sin_po,this.cos_po),this.qs1=$f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ph(this.e3,this.sin_po,this.cos_po),this.qs2=$f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=$f(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Tt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function LFe(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=$f(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*Rt(t-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return e.x=o,e.y=a,e}function NFe(e){var t,r,i,n,s,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),n=0,t!==0&&(n=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,r)),s=Rt(n/this.ns0+this.long0),e.x=s,e.y=o,e}function DFe(e,t){var r,i,n,s,o,a=Zf(.5*t);if(e<Tt)return a;for(var l=e*e,u=1;u<=25;u++)if(r=Math.sin(a),i=Math.cos(a),n=e*r,s=1-n*n,o=.5*s*s/i*(t/(1-l)-r/s+.5/e*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var FFe=["Albers_Conic_Equal_Area","Albers","aea"],jFe={init:PFe,forward:LFe,inverse:NFe,names:FFe,phi1z:DFe};function UFe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function VFe(e){var t,r,i,n,s,o,a,l,u=e.x,c=e.y;return i=Rt(u-this.long0),t=Math.sin(c),r=Math.cos(c),n=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*n,s=1,o>0||Math.abs(o)<=Tt?(a=this.x0+this.a*s*r*Math.sin(i)/o,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)/o):(a=this.x0+this.infinity_dist*r*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*n)),e.x=a,e.y=l,e}function BFe(e){var t,r,i,n,s,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),r=Math.sin(n),i=Math.cos(n),o=Zf(i*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r),s=Rt(this.long0+s)):(o=this.phic0,s=0),e.x=s,e.y=o,e}var zFe=["gnom"],GFe={init:UFe,forward:VFe,inverse:BFe,names:zFe};function qFe(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*dt:dt;for(var i=Math.asin(.5*t),n,s,o,a,l=0;l<30;l++)if(s=Math.sin(i),o=Math.cos(i),a=e*s,n=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-s/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function HFe(){this.sphere||(this.k0=ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function WFe(e){var t=e.x,r=e.y,i,n,s=Rt(t-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=$f(this.e,Math.sin(r));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return e.x=i,e.y=n,e}function JFe(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=Rt(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=qFe(this.e,2*e.y*this.k0/this.a),t=Rt(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var ZFe=["cea"],KFe={init:HFe,forward:WFe,inverse:JFe,names:ZFe};function YFe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function QFe(e){var t=e.x,r=e.y,i=Rt(t-this.long0),n=Nb(r-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*n,e}function XFe(e){var t=e.x,r=e.y;return e.x=Rt(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Nb(this.lat0+(r-this.y0)/this.a),e}var e7e=["Equirectangular","Equidistant_Cylindrical","eqc"],t7e={init:YFe,forward:QFe,inverse:XFe,names:e7e},yH=20;function r7e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=AS(this.es),this.e1=$S(this.es),this.e2=CS(this.es),this.e3=kS(this.es),this.ml0=this.a*yo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function i7e(e){var t=e.x,r=e.y,i,n,s,o=Rt(t-this.long0);if(s=o*Math.sin(r),this.sphere)Math.abs(r)<=Tt?(i=this.a*o,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(r),n=this.a*(Nb(r-this.lat0)+(1-Math.cos(s))/Math.tan(r)));else if(Math.abs(r)<=Tt)i=this.a*o,n=-1*this.ml0;else{var a=Pv(this.a,this.e,Math.sin(r))/Math.tan(r);i=a*Math.sin(s),n=this.a*yo(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(s))}return e.x=i+this.x0,e.y=n+this.y0,e}function n7e(e){var t,r,i,n,s,o,a,l,u;if(i=e.x-this.x0,n=e.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Tt)t=Rt(i/this.a+this.long0),r=0;else{o=this.lat0+n/this.a,a=i*i/this.a/this.a+o*o,l=o;var c;for(s=yH;s;--s)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=Tt){r=l;break}t=Rt(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(n+this.ml0)<=Tt)r=0,t=Rt(this.long0+i/this.a);else{o=(this.ml0+n)/this.a,a=i*i/this.a/this.a+o*o,l=o;var p,d,m,g,b;for(s=yH;s;--s)if(b=this.e*Math.sin(l),p=Math.sqrt(1-b*b)*Math.tan(l),d=this.a*yo(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=d/this.a,u=(o*(p*g+1)-g-.5*p*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*p)+(o-g)*(p*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=Tt){r=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Rt(this.long0+Math.asin(i*p/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var s7e=["Polyconic","poly"],o7e={init:r7e,forward:i7e,inverse:n7e,names:s7e};function a7e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function l7e(e){var t,r=e.x,i=e.y,n=i-this.lat0,s=r-this.long0,o=n/v2*1e-5,a=s,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var c=u,p=a,d=1,m=0,g,b,v=0,_=0;for(t=1;t<=6;t++)g=d*c-m*p,b=m*c+d*p,d=g,m=b,v=v+this.B_re[t]*d-this.B_im[t]*m,_=_+this.B_im[t]*d+this.B_re[t]*m;return e.x=_*this.a+this.x0,e.y=v*this.a+this.y0,e}function u7e(e){var t,r=e.x,i=e.y,n=r-this.x0,s=i-this.y0,o=s/this.a,a=n/this.a,l=1,u=0,c,p,d=0,m=0;for(t=1;t<=6;t++)c=l*o-u*a,p=u*o+l*a,l=c,u=p,d=d+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var b=d,v=m,_,E,I=o,x=a;for(t=2;t<=6;t++)_=b*d-v*m,E=v*d+b*m,b=_,v=E,I=I+(t-1)*(this.B_re[t]*b-this.B_im[t]*v),x=x+(t-1)*(this.B_im[t]*b+this.B_re[t]*v);b=1,v=0;var T=this.B_re[1],M=this.B_im[1];for(t=2;t<=6;t++)_=b*d-v*m,E=v*d+b*m,b=_,v=E,T=T+t*(this.B_re[t]*b-this.B_im[t]*v),M=M+t*(this.B_im[t]*b+this.B_re[t]*v);var k=T*T+M*M;d=(I*T+x*M)/k,m=(x*T-I*M)/k}var D=d,B=m,G=1,W=0;for(t=1;t<=9;t++)G=G*D,W=W+this.D[t]*G;var K=this.lat0+W*v2*1e5,ne=this.long0+B;return e.x=ne,e.y=K,e}var c7e=["New_Zealand_Map_Grid","nzmg"],h7e={init:a7e,forward:l7e,inverse:u7e,names:c7e};function p7e(){}function d7e(e){var t=e.x,r=e.y,i=Rt(t-this.long0),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=n,e.y=s,e}function f7e(e){e.x-=this.x0,e.y-=this.y0;var t=Rt(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var m7e=["Miller_Cylindrical","mill"],y7e={init:p7e,forward:d7e,inverse:f7e,names:m7e},g7e=20;function v7e(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Roe(this.es)}function b7e(e){var t,r,i=e.x,n=e.y;if(i=Rt(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=g7e;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Tt)break}t=this.a*this.C_x*i*(this.m+Math.cos(n)),r=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);r=this.a*iA(n,l,u,this.en),t=this.a*i*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e}function w7e(e){var t,r,i,n;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=Zf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Zf(Math.sin(t)/this.n)),i=Rt(i+this.long0),t=Nb(t)):(t=Poe(e.y/this.a,this.es,this.en),n=Math.abs(t),n<dt?(n=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),i=Rt(r)):n-Tt<dt&&(i=this.long0)),e.x=i,e.y=t,e}var _7e=["Sinusoidal","sinu"],x7e={init:v7e,forward:b7e,inverse:w7e,names:_7e};function S7e(){}function E7e(e){for(var t=e.x,r=e.y,i=Rt(t-this.long0),n=r,s=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<Tt)break}n/=2,Math.PI/2-Math.abs(r)<Tt&&(i=0);var a=.900316316158*this.a*i*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=a,e.y=l,e}function M7e(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var i=Rt(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var n=Math.asin(r);return e.x=i,e.y=n,e}var I7e=["Mollweide","moll"],T7e={init:S7e,forward:E7e,inverse:M7e,names:I7e};function A7e(){Math.abs(this.lat1+this.lat2)<Tt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=AS(this.es),this.e1=$S(this.es),this.e2=CS(this.es),this.e3=kS(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ph(this.e,this.sinphi,this.cosphi),this.ml1=yo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Tt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ph(this.e,this.sinphi,this.cosphi),this.ml2=yo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=yo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function $7e(e){var t=e.x,r=e.y,i;if(this.sphere)i=this.a*(this.g-r);else{var n=yo(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-n)}var s=this.ns*Rt(t-this.long0),o=this.x0+i*Math.sin(s),a=this.y0+this.rh-i*Math.cos(s);return e.x=o,e.y=a,e}function C7e(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,i,n;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(r!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return n=Rt(this.long0+s/this.ns),i=Nb(this.g-r/this.a),e.x=n,e.y=i,e;var o=this.g-r/this.a;return i=oT(o,this.e0,this.e1,this.e2,this.e3),n=Rt(this.long0+s/this.ns),e.x=n,e.y=i,e}var k7e=["Equidistant_Conic","eqdc"],O7e={init:A7e,forward:$7e,inverse:C7e,names:k7e};function R7e(){this.R=this.a}function P7e(e){var t=e.x,r=e.y,i=Rt(t-this.long0),n,s;Math.abs(r)<=Tt&&(n=this.x0+this.R*i,s=this.y0);var o=Zf(2*Math.abs(r/Math.PI));(Math.abs(i)<=Tt||Math.abs(Math.abs(r)-dt)<=Tt)&&(n=this.x0,r>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),p=c/(u+c-1),d=p*p,m=p*(2/u-1),g=m*m,b=Math.PI*this.R*(a*(p-g)+Math.sqrt(l*(p-g)*(p-g)-(g+l)*(d-g)))/(g+l);i<0&&(b=-b),n=this.x0+b;var v=l+p;return b=Math.PI*this.R*(m*v-a*Math.sqrt((g+l)*(l+1)-v*v))/(g+l),r>=0?s=this.y0+b:s=this.y0-b,e.x=n,e.y=s,e}function L7e(e){var t,r,i,n,s,o,a,l,u,c,p,d,m;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,i=e.x/p,n=e.y/p,s=i*i+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+i*i,l=-2*o+1+2*n*n+s*s,m=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),p=3*m/u/c,Math.abs(p)>1&&(p>=0?p=1:p=-1),d=Math.acos(p)/3,e.y>=0?r=(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:r=-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<Tt?t=this.long0:t=Rt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i),e.x=t,e.y=r,e}var N7e=["Van_der_Grinten_I","VanDerGrinten","vandg"],D7e={init:R7e,forward:P7e,inverse:L7e,names:N7e};function F7e(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function j7e(e){var t=e.x,r=e.y,i=Math.sin(e.y),n=Math.cos(e.y),s=Rt(t-this.long0),o,a,l,u,c,p,d,m,g,b,v,_,E,I,x,T,M,k,D,B,G,W,K;return this.sphere?Math.abs(this.sin_p12-1)<=Tt?(e.x=this.x0+this.a*(dt-r)*Math.sin(s),e.y=this.y0-this.a*(dt-r)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Tt?(e.x=this.x0+this.a*(dt+r)*Math.sin(s),e.y=this.y0+this.a*(dt+r)*Math.cos(s),e):(k=this.sin_p12*i+this.cos_p12*n*Math.cos(s),T=Math.acos(k),M=T/Math.sin(T),e.x=this.x0+this.a*M*n*Math.sin(s),e.y=this.y0+this.a*M*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),e):(o=AS(this.es),a=$S(this.es),l=CS(this.es),u=kS(this.es),Math.abs(this.sin_p12-1)<=Tt?(c=this.a*yo(o,a,l,u,dt),p=this.a*yo(o,a,l,u,r),e.x=this.x0+(c-p)*Math.sin(s),e.y=this.y0-(c-p)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Tt?(c=this.a*yo(o,a,l,u,dt),p=this.a*yo(o,a,l,u,r),e.x=this.x0+(c+p)*Math.sin(s),e.y=this.y0+(c+p)*Math.cos(s),e):(d=i/n,m=Pv(this.a,this.e,this.sin_p12),g=Pv(this.a,this.e,i),b=Math.atan((1-this.es)*d+this.es*m*this.sin_p12/(g*n)),v=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(s)),v===0?D=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(v)-Math.PI)<=Tt?D=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):D=Math.asin(Math.sin(s)*Math.cos(b)/Math.sin(v)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),E=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es),I=_*E,x=E*E,B=D*D,G=B*D,W=G*D,K=W*D,T=m*D*(1-B*x*(1-x)/6+G/8*I*(1-2*x)+W/120*(x*(4-7*x)-3*_*_*(1-7*x))-K/48*I),e.x=this.x0+T*Math.sin(v),e.y=this.y0+T*Math.cos(v),e))}function U7e(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,o,a,l,u,c,p,d,m,g,b,v,_,E,I,x,T,M,k;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*dt*this.a?void 0:(r=t/this.a,i=Math.sin(r),n=Math.cos(r),s=this.long0,Math.abs(t)<=Tt?o=this.lat0:(o=Zf(n*this.sin_p12+e.y*i*this.cos_p12/t),a=Math.abs(this.lat0)-dt,Math.abs(a)<=Tt?this.lat0>=0?s=Rt(this.long0+Math.atan2(e.x,-e.y)):s=Rt(this.long0-Math.atan2(-e.x,e.y)):s=Rt(this.long0+Math.atan2(e.x*i,t*this.cos_p12*n-e.y*this.sin_p12*i))),e.x=s,e.y=o,e)):(l=AS(this.es),u=$S(this.es),c=CS(this.es),p=kS(this.es),Math.abs(this.sin_p12-1)<=Tt?(d=this.a*yo(l,u,c,p,dt),t=Math.sqrt(e.x*e.x+e.y*e.y),m=d-t,o=oT(m/this.a,l,u,c,p),s=Rt(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=o,e):Math.abs(this.sin_p12+1)<=Tt?(d=this.a*yo(l,u,c,p,dt),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-d,o=oT(m/this.a,l,u,c,p),s=Rt(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),v=Math.atan2(e.x,e.y),g=Pv(this.a,this.e,this.sin_p12),_=Math.cos(v),E=this.e*this.cos_p12*_,I=-E*E/(1-this.es),x=3*this.es*(1-I)*this.sin_p12*this.cos_p12*_/(1-this.es),T=t/g,M=T-I*(1+I)*Math.pow(T,3)/6-x*(1+3*I)*Math.pow(T,4)/24,k=1-I*M*M/2-T*M*M*M/6,b=Math.asin(this.sin_p12*Math.cos(M)+this.cos_p12*Math.sin(M)*_),s=Rt(this.long0+Math.asin(Math.sin(v)*Math.sin(M)/Math.cos(b))),o=Math.atan((1-this.es*k*this.sin_p12/Math.sin(b))*Math.tan(b)/(1-this.es)),e.x=s,e.y=o,e))}var V7e=["Azimuthal_Equidistant","aeqd"],B7e={init:F7e,forward:j7e,inverse:U7e,names:V7e};function z7e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function G7e(e){var t,r,i,n,s,o,a,l,u=e.x,c=e.y;return i=Rt(u-this.long0),t=Math.sin(c),r=Math.cos(c),n=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*n,s=1,(o>0||Math.abs(o)<=Tt)&&(a=this.a*s*r*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)),e.x=a,e.y=l,e}function q7e(e){var t,r,i,n,s,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Zf(t/this.a),i=Math.sin(r),n=Math.cos(r),o=this.long0,Math.abs(t)<=Tt?(a=this.lat0,e.x=o,e.y=a,e):(a=Zf(n*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.abs(this.lat0)-dt,Math.abs(s)<=Tt?(this.lat0>=0?o=Rt(this.long0+Math.atan2(e.x,-e.y)):o=Rt(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=Rt(this.long0+Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i)),e.x=o,e.y=a,e))}var H7e=["ortho"],W7e={init:z7e,forward:G7e,inverse:q7e,names:H7e},ji={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Qr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function J7e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=dt-si/2?this.face=ji.TOP:this.lat0<=-(dt-si/2)?this.face=ji.BOTTOM:Math.abs(this.long0)<=si?this.face=ji.FRONT:Math.abs(this.long0)<=dt+si?this.face=this.long0>0?ji.RIGHT:ji.LEFT:this.face=ji.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Z7e(e){var t={x:0,y:0},r,i,n,s,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,i=e.x,this.face===ji.TOP)s=dt-r,i>=si&&i<=dt+si?(l.value=Qr.AREA_0,n=i-dt):i>dt+si||i<=-(dt+si)?(l.value=Qr.AREA_1,n=i>0?i-ln:i+ln):i>-(dt+si)&&i<=-si?(l.value=Qr.AREA_2,n=i+dt):(l.value=Qr.AREA_3,n=i);else if(this.face===ji.BOTTOM)s=dt+r,i>=si&&i<=dt+si?(l.value=Qr.AREA_0,n=-i+dt):i<si&&i>=-si?(l.value=Qr.AREA_1,n=-i):i<-si&&i>=-(dt+si)?(l.value=Qr.AREA_2,n=-i-dt):(l.value=Qr.AREA_3,n=i>0?-i+ln:-i-ln);else{var u,c,p,d,m,g,b;this.face===ji.RIGHT?i=av(i,+dt):this.face===ji.BACK?i=av(i,+ln):this.face===ji.LEFT&&(i=av(i,-dt)),d=Math.sin(r),m=Math.cos(r),g=Math.sin(i),b=Math.cos(i),u=m*b,c=m*g,p=d,this.face===ji.FRONT?(s=Math.acos(u),n=CE(s,p,c,l)):this.face===ji.RIGHT?(s=Math.acos(c),n=CE(s,p,-u,l)):this.face===ji.BACK?(s=Math.acos(-u),n=CE(s,p,-c,l)):this.face===ji.LEFT?(s=Math.acos(-c),n=CE(s,p,u,l)):(s=n=0,l.value=Qr.AREA_0)}return a=Math.atan(12/ln*(n+Math.acos(Math.sin(n)*Math.cos(si))-dt)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Qr.AREA_1?a+=dt:l.value===Qr.AREA_2?a+=ln:l.value===Qr.AREA_3&&(a+=1.5*ln),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function K7e(e){var t={lam:0,phi:0},r,i,n,s,o,a,l,u,c,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=Qr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=Qr.AREA_1,r-=dt):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=Qr.AREA_2,r=r<0?r+ln:r-ln):(p.value=Qr.AREA_3,r+=dt),c=ln/12*Math.tan(r),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(r),s=Math.tan(i),l=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ji.TOP)u=Math.acos(l),t.phi=dt-u,p.value===Qr.AREA_0?t.lam=a+dt:p.value===Qr.AREA_1?t.lam=a<0?a+ln:a-ln:p.value===Qr.AREA_2?t.lam=a-dt:t.lam=a;else if(this.face===ji.BOTTOM)u=Math.acos(l),t.phi=u-dt,p.value===Qr.AREA_0?t.lam=-a+dt:p.value===Qr.AREA_1?t.lam=-a:p.value===Qr.AREA_2?t.lam=-a-dt:t.lam=a<0?-a-ln:-a+ln;else{var d,m,g;d=l,c=d*d,c>=1?g=0:g=Math.sqrt(1-c)*Math.sin(a),c+=g*g,c>=1?m=0:m=Math.sqrt(1-c),p.value===Qr.AREA_1?(c=m,m=-g,g=c):p.value===Qr.AREA_2?(m=-m,g=-g):p.value===Qr.AREA_3&&(c=m,m=g,g=-c),this.face===ji.RIGHT?(c=d,d=-m,m=c):this.face===ji.BACK?(d=-d,m=-m):this.face===ji.LEFT&&(c=d,d=m,m=-c),t.phi=Math.acos(-g)-dt,t.lam=Math.atan2(m,d),this.face===ji.RIGHT?t.lam=av(t.lam,-dt):this.face===ji.BACK?t.lam=av(t.lam,-ln):this.face===ji.LEFT&&(t.lam=av(t.lam,+dt))}if(this.es!==0){var b,v,_;b=t.phi<0?1:0,v=Math.tan(t.phi),_=this.b/Math.sqrt(v*v+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),b&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function CE(e,t,r,i){var n;return e<Tt?(i.value=Qr.AREA_0,n=0):(n=Math.atan2(t,r),Math.abs(n)<=si?i.value=Qr.AREA_0:n>si&&n<=dt+si?(i.value=Qr.AREA_1,n-=dt):n>dt+si||n<=-(dt+si)?(i.value=Qr.AREA_2,n=n>=0?n-ln:n+ln):(i.value=Qr.AREA_3,n+=dt)),n}function av(e,t){var r=e+t;return r<-ln?r+=PP:r>+ln&&(r-=PP),r}var Y7e=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],Q7e={init:J7e,forward:Z7e,inverse:K7e,names:Y7e},NP=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],D_=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Doe=.8487,Foe=1.3523,joe=yf/5,X7e=1/joe,B1=18,aT=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},eje=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function tje(e,t,r,i){for(var n=t;i;--i){var s=e(n);if(n-=s,Math.abs(s)<r)break}return n}function rje(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function ije(e){var t=Rt(e.x-this.long0),r=Math.abs(e.y),i=Math.floor(r*joe);i<0?i=0:i>=B1&&(i=B1-1),r=yf*(r-X7e*i);var n={x:aT(NP[i],r)*t,y:aT(D_[i],r)};return e.y<0&&(n.y=-n.y),n.x=n.x*this.a*Doe+this.x0,n.y=n.y*this.a*Foe+this.y0,n}function nje(e){var t={x:(e.x-this.x0)/(this.a*Doe),y:Math.abs(e.y-this.y0)/(this.a*Foe)};if(t.y>=1)t.x/=NP[B1][0],t.y=e.y<0?-dt:dt;else{var r=Math.floor(t.y*B1);for(r<0?r=0:r>=B1&&(r=B1-1);;)if(D_[r][0]>t.y)--r;else if(D_[r+1][0]<=t.y)++r;else break;var i=D_[r],n=5*(t.y-i[0])/(D_[r+1][0]-i[0]);n=tje(function(s){return(aT(i,s)-t.y)/eje(i,s)},n,Tt,100),t.x/=aT(NP[r],n),t.y=(5*r+n)*ao,e.y<0&&(t.y=-t.y)}return t.x=Rt(t.x+this.long0),t}var sje=["Robinson","robin"],oje={init:rje,forward:ije,inverse:nje,names:sje};function aje(){this.name="geocent"}function lje(e){var t=Eoe(e,this.es,this.a);return t}function uje(e){var t=Moe(e,this.es,this.a,this.b);return t}var cje=["Geocentric","geocentric","geocent","Geocent"],hje={init:aje,forward:lje,inverse:uje,names:cje};function pje(e){e.Proj.projections.add(yDe),e.Proj.projections.add(A5),e.Proj.projections.add($De),e.Proj.projections.add(jDe),e.Proj.projections.add(qDe),e.Proj.projections.add(KDe),e.Proj.projections.add(tFe),e.Proj.projections.add(oFe),e.Proj.projections.add(hFe),e.Proj.projections.add(yFe),e.Proj.projections.add(RFe),e.Proj.projections.add(jFe),e.Proj.projections.add(GFe),e.Proj.projections.add(KFe),e.Proj.projections.add(t7e),e.Proj.projections.add(o7e),e.Proj.projections.add(h7e),e.Proj.projections.add(y7e),e.Proj.projections.add(x7e),e.Proj.projections.add(T7e),e.Proj.projections.add(O7e),e.Proj.projections.add(D7e),e.Proj.projections.add(B7e),e.Proj.projections.add(W7e),e.Proj.projections.add(Q7e),e.Proj.projections.add(oje),e.Proj.projections.add(hje)}bi.defaultDatum="WGS84";bi.Proj=th;bi.WGS84=new bi.Proj("WGS84");bi.Point=Rv;bi.toPoint=Ioe;bi.defs=lo;bi.transform=sT;bi.mgrs=H9e;bi.version="__VERSION__";pje(bi);const gH="EPSG:4326";class dje{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,bi.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),bi.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),bi.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),bi.defs("EPSG:102100",bi.defs("EPSG:3857")),bi.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),bi.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const r=t<10?`0${t}`:t;bi.defs(`EPSG:326${r}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}addProjection(t,r){t=typeof t=="number"?`EPSG:${t}`:t,bi.defs(t,r)}defaultEpsgLookup(t){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=/EPSG:(\d+)/,n=String(t).match(r)||String(t).match(i)||[];if(n.length<2)throw new Error("Invalid code provided.");return new Promise((s,o)=>{const a=(window.location.protocol==="https:"?"https:":"http:")+`//epsg.io/${n[1]}.proj4`;Mt(a,{responseType:"text"}).then(c=>{c.data?s(c.data):o()},c=>{o(c)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let r,i="";if(t.wkt)return!0;try{r=this.normalizeProj(t)}catch{return!1}t.latestWkid&&(i=this.normalizeProj(t.latestWkid));const n=(l,u)=>{l!==u&&bi.defs(u,bi.defs(l))};if(bi.defs(r))return!0;if(i&&bi.defs(i))return n(i,r),!0;const s=async l=>{try{const u=await this.epsgLookup(l);return u===null||u===""?!1:(bi.defs(l,u),!0)}catch{return!1}};return await(i?s(i):Promise.resolve(!1))?(n(i,r),!0):s(r)}async checkProjBomber(t){if(t.length>0){const r=t.pop();if(await this.checkProj(r))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",r),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,r,i){let n=this.normalizeProj(r),s=this.normalizeProj(i);if(!n&&t.crs&&t.crs.type==="name"&&(n=Ir.parseGeoJsonCrs(t.crs)),n||(n=gH),s||(s=gH),s===n)return t;await this.checkProjBomber([n,s]);const o=bi(n,s).forward;return KD.exports.Tools.applyConverter(t,o)}async projectGeometry(t,r){if(r.type===br.EXTENT)return this.projectExtent(t,r);await this.checkProjBomber([t,r.sr]);const i=r.toGeoJSON(),n=await this.projectGeoJson(i,this.normalizeProj(r.sr),this.normalizeProj(t)),s=N2.geom.geomGeoJsonToRamp(n,r.id);return s.sr=Ir.parseSR(t),s}async projectExtent(t,r){const i=(b,v,_)=>{if(_===0)return[b,v];const E=[(b[0]+v[0])/2,(b[1]+v[1])/2];if(_===1)return[b,E,v];if(_>1){const I=i(b,E,_-1),x=i(E,v,_-1);return I.concat(x.slice(1))}return[[]]},n=r.toPolygonArray().pop()||[];let s=[];[0,1,2,3].map(b=>i(n[b],n[b+1],3).slice(1)).forEach(b=>s=s.concat(b));const o=new Ls("warpy",[s],r.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(b=>b[0]),c=l.map(b=>b[1]),p=Math.min.apply(null,u),d=Math.max.apply(null,u),m=Math.min.apply(null,c),g=Math.max.apply(null,c);return un.fromParams(r.id+"_projected",p,m,d,g,a.sr)}}class fje{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new dje,this.geom=new jNe,this.sharedUtils=new t9e}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const r=i=>i.map(n=>({level:n[0],resolution:n[1],scale:n[2]}));if(t===this.DEFAULT_LAMBERT)return r([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return r([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class Bn{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function mje(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function yje(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(r=>e[r]!==void 0)}function gje(e){return typeof e=="object"&&e.default!==void 0}var Uoe={exports:{}};function iF(){}iF.prototype={on:function(e,t,r){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var i=this;function n(){i.off(e,n),t.apply(r,arguments)}return n._=t,this.on(e,n,r)},emit:function(e){var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),i=0,n=r.length;for(i;i<n;i++)r[i].fn.apply(r[i].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),i=r[e],n=[];if(i&&t)for(var s=0,o=i.length;s<o;s++)i[s].fn!==t&&i[s].fn._!==t&&n.push(i[s]);return n.length?r[e]=n:delete r[e],this}};Uoe.exports=iF;var vje=Uoe.exports.TinyEmitter=iF;class bje{items={};order=[];temporary=[]}class Plt{id;options;componentId;constructor(t){const r={options:{},...t};({id:this.id,options:this.options,componentId:this.componentId}=r)}}function Ws(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const rh={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},wje={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},_je="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",xje=Ws(_je),vH=2;function Sje(e,t=0,r=e.length){let i=e.split(/(\r?\n)/);const n=i.filter((a,l)=>l%2===1);i=i.filter((a,l)=>l%2===0);let s=0;const o=[];for(let a=0;a<i.length;a++)if(s+=i[a].length+(n[a]&&n[a].length||0),s>=t){for(let l=a-vH;l<=a+vH||r>s;l++){if(l<0||l>=i.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${i[l]}`);const c=i[l].length,p=n[l]&&n[l].length||0;if(l===a){const d=t-(s-(c+p)),m=Math.max(1,r>s?c-d:r-t);o.push("   |  "+" ".repeat(d)+"^".repeat(m))}else if(l>a){if(r>s){const d=Math.max(Math.min(r-s,c),1);o.push("   |  "+"^".repeat(d))}s+=c+p}}break}return o.join(`
`)}const Eje="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mje=Ws(Eje);function Voe(e){return!!e||e===""}function pm(e){if($t(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=lr(i)?Boe(i):pm(i);if(n)for(const s in n)t[s]=n[s]}return t}else{if(lr(e))return e;if(ri(e))return e}}const Ije=/;(?![^(]*\))/g,Tje=/:(.+)/;function Boe(e){const t={};return e.split(Ije).forEach(r=>{if(r){const i=r.split(Tje);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function In(e){let t="";if(lr(e))t=e;else if($t(e))for(let r=0;r<e.length;r++){const i=In(e[r]);i&&(t+=i+" ")}else if(ri(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function zoe(e){if(!e)return null;let{class:t,style:r}=e;return t&&!lr(t)&&(e.class=In(t)),r&&(e.style=pm(r)),e}const Aje="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",$je="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Cje="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Goe=Ws(Aje),qoe=Ws($je),kje=Ws(Cje);function Oje(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=Kf(e[i],t[i]);return r}function Kf(e,t){if(e===t)return!0;let r=bH(e),i=bH(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=$t(e),i=$t(t),r||i)return r&&i?Oje(e,t):!1;if(r=ri(e),i=ri(t),r||i){if(!r||!i)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Kf(e[o],t[o]))return!1}}return String(e)===String(t)}function nA(e,t){return e.findIndex(r=>Kf(r,t))}const Ci=e=>lr(e)?e:e==null?"":$t(e)||ri(e)&&(e.toString===Woe||!Zt(e.toString))?JSON.stringify(e,Hoe,2):String(e),Hoe=(e,t)=>t&&t.__v_isRef?Hoe(e,t.value):dg(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:s0(t)?{[`Set(${t.size})`]:[...t.values()]}:ri(t)&&!$t(t)&&!Joe(t)?String(t):t,kr=Object.freeze({}),lv=Object.freeze([]),ps=()=>{},b2=()=>!1,Rje=/^on[^a-z]/,Lp=e=>Rje.test(e),lT=e=>e.startsWith("onUpdate:"),Or=Object.assign,nF=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Pje=Object.prototype.hasOwnProperty,Mr=(e,t)=>Pje.call(e,t),$t=Array.isArray,dg=e=>oA(e)==="[object Map]",s0=e=>oA(e)==="[object Set]",bH=e=>e instanceof Date,Zt=e=>typeof e=="function",lr=e=>typeof e=="string",Db=e=>typeof e=="symbol",ri=e=>e!==null&&typeof e=="object",sA=e=>ri(e)&&Zt(e.then)&&Zt(e.catch),Woe=Object.prototype.toString,oA=e=>Woe.call(e),sF=e=>oA(e).slice(8,-1),Joe=e=>oA(e)==="[object Object]",oF=e=>lr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,fg=Ws(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zoe=Ws("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),aA=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Lje=/-(\w)/g,gs=aA(e=>e.replace(Lje,(t,r)=>r?r.toUpperCase():"")),Nje=/\B([A-Z])/g,Wa=aA(e=>e.replace(Nje,"-$1").toLowerCase()),Ju=aA(e=>e.charAt(0).toUpperCase()+e.slice(1)),Iu=aA(e=>e?`on${Ju(e)}`:""),Sx=(e,t)=>!Object.is(e,t),of=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},uT=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},Yf=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wH;const Koe=()=>wH||(wH=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yoe(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let Il;class lA{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Il&&(this.parent=Il,this.index=(Il.scopes||(Il.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Il=this,t()}finally{Il=this.parent}else Yoe("cannot run an inactive effect scope.")}on(){Il=this}off(){Il=this.parent}stop(t){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Qoe(e){return new lA(e)}function Xoe(e,t=Il){t&&t.active&&t.effects.push(e)}function eae(){return Il}function tae(e){Il?Il.cleanups.push(e):Yoe("onScopeDispose() is called when there is no active effect scope to be associated with.")}const aF=e=>{const t=new Set(e);return t.w=0,t.n=0,t},rae=e=>(e.w&Qf)>0,iae=e=>(e.n&Qf)>0,Dje=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Qf},Fje=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];rae(n)&&!iae(n)?n.delete(e):t[r++]=n,n.w&=~Qf,n.n&=~Qf}t.length=r}},DP=new WeakMap;let F_=0,Qf=1;const FP=30;let jo;const mg=Symbol("iterate"),jP=Symbol("Map key iterate");class Fb{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Xoe(this,i)}run(){if(!this.active)return this.fn();let t=jo,r=Cf;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=jo,jo=this,Cf=!0,Qf=1<<++F_,F_<=FP?Dje(this):_H(this),this.fn()}finally{F_<=FP&&Fje(this),Qf=1<<--F_,jo=this.parent,Cf=r,this.parent=void 0}}stop(){this.active&&(_H(this),this.onStop&&this.onStop(),this.active=!1)}}function _H(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function nae(e,t){e.effect&&(e=e.effect.fn);const r=new Fb(e);t&&(Or(r,t),t.scope&&Xoe(r,t.scope)),(!t||!t.lazy)&&r.run();const i=r.run.bind(r);return i.effect=r,i}function sae(e){e.effect.stop()}let Cf=!0;const oae=[];function o0(){oae.push(Cf),Cf=!1}function a0(){const e=oae.pop();Cf=e===void 0?!0:e}function Xa(e,t,r){if(Cf&&jo){let i=DP.get(e);i||DP.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=aF()),aae(n,{effect:jo,target:e,type:t,key:r})}}function aae(e,t){let r=!1;F_<=FP?iae(e)||(e.n|=Qf,r=!rae(e)):r=!e.has(jo),r&&(e.add(jo),jo.deps.push(e),jo.onTrack&&jo.onTrack(Object.assign({effect:jo},t)))}function Np(e,t,r,i,n,s){const o=DP.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(r==="length"&&$t(e))o.forEach((u,c)=>{(c==="length"||c>=i)&&a.push(u)});else switch(r!==void 0&&a.push(o.get(r)),t){case"add":$t(e)?oF(r)&&a.push(o.get("length")):(a.push(o.get(mg)),dg(e)&&a.push(o.get(jP)));break;case"delete":$t(e)||(a.push(o.get(mg)),dg(e)&&a.push(o.get(jP)));break;case"set":dg(e)&&a.push(o.get(mg));break}const l={target:e,type:t,key:r,newValue:i,oldValue:n,oldTarget:s};if(a.length===1)a[0]&&UP(a[0],l);else{const u=[];for(const c of a)c&&u.push(...c);UP(aF(u),l)}}function UP(e,t){for(const r of $t(e)?e:[...e])(r!==jo||r.allowRecurse)&&(r.onTrigger&&r.onTrigger(Or({effect:r},t)),r.scheduler?r.scheduler():r.run())}const jje=Ws("__proto__,__v_isRef,__isVue"),lae=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Db)),Uje=uA(),Vje=uA(!1,!0),Bje=uA(!0),zje=uA(!0,!0),xH=Gje();function Gje(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=Bt(this);for(let s=0,o=this.length;s<o;s++)Xa(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(Bt)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){o0();const i=Bt(this)[t].apply(this,r);return a0(),i}}),e}function uA(e=!1,t=!1){return function(i,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?yae:mae:t?fae:dae).get(i))return i;const o=$t(i);if(!e&&o&&Mr(xH,n))return Reflect.get(xH,n,s);const a=Reflect.get(i,n,s);return(Db(n)?lae.has(n):jje(n))||(e||Xa(i,"get",n),t)?a:ai(a)?!o||!oF(n)?a.value:a:ri(a)?e?pA(a):oa(a):a}}const qje=uae(),Hje=uae(!0);function uae(e=!1){return function(r,i,n,s){let o=r[i];if(Dp(o)&&ai(o)&&!ai(n))return!1;if(!e&&!Dp(n)&&(fA(n)||(n=Bt(n),o=Bt(o)),!$t(r)&&ai(o)&&!ai(n)))return o.value=n,!0;const a=$t(r)&&oF(i)?Number(i)<r.length:Mr(r,i),l=Reflect.set(r,i,n,s);return r===Bt(s)&&(a?Sx(n,o)&&Np(r,"set",i,n,o):Np(r,"add",i,n)),l}}function Wje(e,t){const r=Mr(e,t),i=e[t],n=Reflect.deleteProperty(e,t);return n&&r&&Np(e,"delete",t,void 0,i),n}function Jje(e,t){const r=Reflect.has(e,t);return(!Db(t)||!lae.has(t))&&Xa(e,"has",t),r}function Zje(e){return Xa(e,"iterate",$t(e)?"length":mg),Reflect.ownKeys(e)}const cae={get:Uje,set:qje,deleteProperty:Wje,has:Jje,ownKeys:Zje},hae={get:Bje,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Kje=Or({},cae,{get:Vje,set:Hje}),Yje=Or({},hae,{get:zje}),lF=e=>e,cA=e=>Reflect.getPrototypeOf(e);function kE(e,t,r=!1,i=!1){e=e.__v_raw;const n=Bt(e),s=Bt(t);t!==s&&!r&&Xa(n,"get",t),!r&&Xa(n,"get",s);const{has:o}=cA(n),a=i?lF:r?cF:Ex;if(o.call(n,t))return a(e.get(t));if(o.call(n,s))return a(e.get(s));e!==n&&e.get(t)}function OE(e,t=!1){const r=this.__v_raw,i=Bt(r),n=Bt(e);return e!==n&&!t&&Xa(i,"has",e),!t&&Xa(i,"has",n),e===n?r.has(e):r.has(e)||r.has(n)}function RE(e,t=!1){return e=e.__v_raw,!t&&Xa(Bt(e),"iterate",mg),Reflect.get(e,"size",e)}function SH(e){e=Bt(e);const t=Bt(this);return cA(t).has.call(t,e)||(t.add(e),Np(t,"add",e,e)),this}function EH(e,t){t=Bt(t);const r=Bt(this),{has:i,get:n}=cA(r);let s=i.call(r,e);s?pae(r,i,e):(e=Bt(e),s=i.call(r,e));const o=n.call(r,e);return r.set(e,t),s?Sx(t,o)&&Np(r,"set",e,t,o):Np(r,"add",e,t),this}function MH(e){const t=Bt(this),{has:r,get:i}=cA(t);let n=r.call(t,e);n?pae(t,r,e):(e=Bt(e),n=r.call(t,e));const s=i?i.call(t,e):void 0,o=t.delete(e);return n&&Np(t,"delete",e,void 0,s),o}function IH(){const e=Bt(this),t=e.size!==0,r=dg(e)?new Map(e):new Set(e),i=e.clear();return t&&Np(e,"clear",void 0,void 0,r),i}function PE(e,t){return function(i,n){const s=this,o=s.__v_raw,a=Bt(o),l=t?lF:e?cF:Ex;return!e&&Xa(a,"iterate",mg),o.forEach((u,c)=>i.call(n,l(u),l(c),s))}}function LE(e,t,r){return function(...i){const n=this.__v_raw,s=Bt(n),o=dg(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...i),c=r?lF:t?cF:Ex;return!t&&Xa(s,"iterate",l?jP:mg),{next(){const{value:p,done:d}=u.next();return d?{value:p,done:d}:{value:a?[c(p[0]),c(p[1])]:c(p),done:d}},[Symbol.iterator](){return this}}}}function fd(e){return function(...t){{const r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Ju(e)} operation ${r}failed: target is readonly.`,Bt(this))}return e==="delete"?!1:this}}function Qje(){const e={get(s){return kE(this,s)},get size(){return RE(this)},has:OE,add:SH,set:EH,delete:MH,clear:IH,forEach:PE(!1,!1)},t={get(s){return kE(this,s,!1,!0)},get size(){return RE(this)},has:OE,add:SH,set:EH,delete:MH,clear:IH,forEach:PE(!1,!0)},r={get(s){return kE(this,s,!0)},get size(){return RE(this,!0)},has(s){return OE.call(this,s,!0)},add:fd("add"),set:fd("set"),delete:fd("delete"),clear:fd("clear"),forEach:PE(!0,!1)},i={get(s){return kE(this,s,!0,!0)},get size(){return RE(this,!0)},has(s){return OE.call(this,s,!0)},add:fd("add"),set:fd("set"),delete:fd("delete"),clear:fd("clear"),forEach:PE(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=LE(s,!1,!1),r[s]=LE(s,!0,!1),t[s]=LE(s,!1,!0),i[s]=LE(s,!0,!0)}),[e,r,t,i]}const[Xje,eUe,tUe,rUe]=Qje();function hA(e,t){const r=t?e?rUe:tUe:e?eUe:Xje;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(Mr(r,n)&&n in i?r:i,n,s)}const iUe={get:hA(!1,!1)},nUe={get:hA(!1,!0)},sUe={get:hA(!0,!1)},oUe={get:hA(!0,!0)};function pae(e,t,r){const i=Bt(r);if(i!==r&&t.call(e,i)){const n=sF(e);console.warn(`Reactive ${n} contains both the raw and reactive versions of the same object${n==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const dae=new WeakMap,fae=new WeakMap,mae=new WeakMap,yae=new WeakMap;function aUe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lUe(e){return e.__v_skip||!Object.isExtensible(e)?0:aUe(sF(e))}function oa(e){return Dp(e)?e:dA(e,!1,cae,iUe,dae)}function uF(e){return dA(e,!1,Kje,nUe,fae)}function pA(e){return dA(e,!0,hae,sUe,mae)}function gf(e){return dA(e,!0,Yje,oUe,yae)}function dA(e,t,r,i,n){if(!ri(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const o=lUe(e);if(o===0)return e;const a=new Proxy(e,o===2?i:r);return n.set(e,a),a}function Uu(e){return Dp(e)?Uu(e.__v_raw):!!(e&&e.__v_isReactive)}function Dp(e){return!!(e&&e.__v_isReadonly)}function fA(e){return!!(e&&e.__v_isShallow)}function Lv(e){return Uu(e)||Dp(e)}function Bt(e){const t=e&&e.__v_raw;return t?Bt(t):e}function vs(e){return uT(e,"__v_skip",!0),e}const Ex=e=>ri(e)?oa(e):e,cF=e=>ri(e)?pA(e):e;function hF(e){Cf&&jo&&(e=Bt(e),aae(e.dep||(e.dep=aF()),{target:e,type:"get",key:"value"}))}function mA(e,t){e=Bt(e),e.dep&&UP(e.dep,{target:e,type:"set",key:"value",newValue:t})}function ai(e){return!!(e&&e.__v_isRef===!0)}function hs(e){return vae(e,!1)}function gae(e){return vae(e,!0)}function vae(e,t){return ai(e)?e:new uUe(e,t)}class uUe{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Bt(t),this._value=r?t:Ex(t)}get value(){return hF(this),this._value}set value(t){t=this.__v_isShallow?t:Bt(t),Sx(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Ex(t),mA(this,t))}}function bae(e){mA(e,e.value)}function Mx(e){return ai(e)?e.value:e}const cUe={get:(e,t,r)=>Mx(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return ai(n)&&!ai(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function yA(e){return Uu(e)?e:new Proxy(e,cUe)}class hUe{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:i}=t(()=>hF(this),()=>mA(this));this._get=r,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function wae(e){return new hUe(e)}function _ae(e){Lv(e)||console.warn("toRefs() expects a reactive object but received a plain one.");const t=$t(e)?new Array(e.length):{};for(const r in e)t[r]=pF(e,r);return t}class pUe{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function pF(e,t,r){const i=e[t];return ai(i)?i:new pUe(e,t,r)}class dUe{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Fb(t,()=>{this._dirty||(this._dirty=!0,mA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=Bt(this);return hF(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function fUe(e,t,r=!1){let i,n;const s=Zt(e);s?(i=e,n=()=>{console.warn("Write operation failed: computed value is readonly")}):(i=e.get,n=e.set);const o=new dUe(i,n,s||!n,r);return t&&!r&&(o.effect.onTrack=t.onTrack,o.effect.onTrigger=t.onTrigger),o}Promise.resolve();const yg=[];function w2(e){yg.push(e)}function _2(){yg.pop()}function Xe(e,...t){o0();const r=yg.length?yg[yg.length-1].component:null,i=r&&r.appContext.config.warnHandler,n=mUe();if(i)Vu(i,r,11,[e+t.join(""),r&&r.proxy,n.map(({vnode:s})=>`at <${TA(r,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...yUe(n)),console.warn(...s)}a0()}function mUe(){let e=yg[yg.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function yUe(e){const t=[];return e.forEach((r,i)=>{t.push(...i===0?[]:[`
`],...gUe(r))}),t}function gUe({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,n=` at <${TA(e.component,e.type,i)}`,s=">"+r;return e.props?[n,...vUe(e.props),s]:[n+s]}function vUe(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(i=>{t.push(...xae(i,e[i]))}),r.length>3&&t.push(" ..."),t}function xae(e,t,r){return lr(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:ai(t)?(t=xae(e,Bt(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):Zt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Bt(t),r?t:[`${e}=`,t])}const dF={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Vu(e,t,r,i){let n;try{n=i?e(...i):e()}catch(s){dm(s,t,r)}return n}function Ko(e,t,r,i){if(Zt(e)){const s=Vu(e,t,r,i);return s&&sA(s)&&s.catch(o=>{dm(o,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(Ko(e[s],t,r,i));return n}function dm(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=dF[r];for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Vu(l,null,10,[e,o,a]);return}}bUe(e,r,n,i)}function bUe(e,t,r,i=!0){{const n=dF[t];if(r&&w2(r),Xe(`Unhandled error${n?` during execution of ${n}`:""}`),r&&_2(),i)throw e;console.error(e)}}let cT=!1,VP=!1;const Fa=[];let fp=0;const x2=[];let I1=null,yy=0;const S2=[];let tp=null,gy=0;const Sae=Promise.resolve();let fF=null,BP=null;const wUe=100;function OS(e){const t=fF||Sae;return e?t.then(this?e.bind(this):e):t}function _Ue(e){let t=fp+1,r=Fa.length;for(;t<r;){const i=t+r>>>1;Ix(Fa[i])<e?t=i+1:r=i}return t}function gA(e){(!Fa.length||!Fa.includes(e,cT&&e.allowRecurse?fp+1:fp))&&e!==BP&&(e.id==null?Fa.push(e):Fa.splice(_Ue(e.id),0,e),Eae())}function Eae(){!cT&&!VP&&(VP=!0,fF=Sae.then(Iae))}function xUe(e){const t=Fa.indexOf(e);t>fp&&Fa.splice(t,1)}function Mae(e,t,r,i){$t(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&r.push(e),Eae()}function SUe(e){Mae(e,I1,x2,yy)}function RS(e){Mae(e,tp,S2,gy)}function mF(e,t=null){if(x2.length){for(BP=t,I1=[...new Set(x2)],x2.length=0,e=e||new Map,yy=0;yy<I1.length;yy++)yF(e,I1[yy])||I1[yy]();I1=null,yy=0,BP=null,mF(e,t)}}function hT(e){if(S2.length){const t=[...new Set(S2)];if(S2.length=0,tp){tp.push(...t);return}for(tp=t,e=e||new Map,tp.sort((r,i)=>Ix(r)-Ix(i)),gy=0;gy<tp.length;gy++)yF(e,tp[gy])||tp[gy]();tp=null,gy=0}}const Ix=e=>e.id==null?1/0:e.id;function Iae(e){VP=!1,cT=!0,e=e||new Map,mF(e),Fa.sort((r,i)=>Ix(r)-Ix(i));const t=r=>yF(e,r);try{for(fp=0;fp<Fa.length;fp++){const r=Fa[fp];if(r&&r.active!==!1){if(t(r))continue;Vu(r,null,14)}}}finally{fp=0,Fa.length=0,hT(e),cT=!1,fF=null,(Fa.length||x2.length||S2.length)&&Iae(e)}}function yF(e,t){if(!e.has(t))e.set(t,1);else{const r=e.get(t);if(r>wUe){const i=t.ownerInstance,n=i&&Cx(i.type);return Xe(`Maximum recursive updates exceeded${n?` in component <${n}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else e.set(t,r+1)}}let kf=!1;const T1=new Set;Koe().__VUE_HMR_RUNTIME__={createRecord:fk(Tae),rerender:fk(IUe),reload:fk(TUe)};const Dg=new Map;function EUe(e){const t=e.type.__hmrId;let r=Dg.get(t);r||(Tae(t,e.type),r=Dg.get(t)),r.instances.add(e)}function MUe(e){Dg.get(e.type.__hmrId).instances.delete(e)}function Tae(e,t){return Dg.has(e)?!1:(Dg.set(e,{initialDef:E2(t),instances:new Set}),!0)}function E2(e){return dle(e)?e.__vccOpts:e}function IUe(e,t){const r=Dg.get(e);!r||(r.initialDef.render=t,[...r.instances].forEach(i=>{t&&(i.render=t,E2(i.type).render=t),i.renderCache=[],kf=!0,i.update(),kf=!1}))}function TUe(e,t){const r=Dg.get(e);if(!r)return;t=E2(t),TH(r.initialDef,t);const i=[...r.instances];for(const n of i){const s=E2(n.type);T1.has(s)||(s!==r.initialDef&&TH(s,t),T1.add(s)),n.appContext.optionsCache.delete(n.type),n.ceReload?(T1.add(s),n.ceReload(t.styles),T1.delete(s)):n.parent?(gA(n.parent.update),n.parent.type.__asyncLoader&&n.parent.ceReload&&n.parent.ceReload(t.styles)):n.appContext.reload?n.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}RS(()=>{for(const n of i)T1.delete(E2(n.type))})}function TH(e,t){Or(e,t);for(const r in e)r!=="__file"&&!(r in t)&&delete e[r]}function fk(e){return(t,r)=>{try{return e(t,r)}catch(i){console.error(i),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let mp,j_=[],zP=!1;function PS(e,...t){mp?mp.emit(e,...t):zP||j_.push({event:e,args:t})}function vA(e,t){var r,i;mp=e,mp?(mp.enabled=!0,j_.forEach(({event:n,args:s})=>mp.emit(n,...s)),j_=[]):typeof window<"u"&&window.HTMLElement&&!(!((i=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||i===void 0)&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{vA(s,t)}),setTimeout(()=>{mp||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,zP=!0,j_=[])},3e3)):(zP=!0,j_=[])}function AUe(e,t){PS("app:init",e,t,{Fragment:Xr,Text:dh,Comment:Tn,Static:xp})}function $Ue(e){PS("app:unmount",e)}const GP=gF("component:added"),Aae=gF("component:updated"),CUe=gF("component:removed");function gF(e){return t=>{PS(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const kUe=$ae("perf:start"),OUe=$ae("perf:end");function $ae(e){return(t,r,i)=>{PS(e,t.appContext.app,t.uid,t,r,i)}}function RUe(e,t,r){PS("component:emit",e.appContext.app,e,t,r)}function PUe(e,t,...r){const i=e.vnode.props||kr;{const{emitsOptions:c,propsOptions:[p]}=e;if(c)if(!(t in c))(!p||!(Iu(t)in p))&&Xe(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${Iu(t)}" prop.`);else{const d=c[t];Zt(d)&&(d(...r)||Xe(`Invalid event arguments: event validation failed for event "${t}".`))}}let n=r;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:p,trim:d}=i[c]||kr;d?n=r.map(m=>m.trim()):p&&(n=r.map(Yf))}RUe(e,t,n);{const c=t.toLowerCase();c!==t&&i[Iu(c)]&&Xe(`Event "${c}" is emitted in component ${TA(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Wa(t)}" instead of "${t}".`)}let a,l=i[a=Iu(t)]||i[a=Iu(gs(t))];!l&&s&&(l=i[a=Iu(Wa(t))]),l&&Ko(l,e,6,n);const u=i[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ko(u,e,6,n)}}function Cae(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let o={},a=!1;if(!Zt(e)){const l=u=>{const c=Cae(u,t,!0);c&&(a=!0,Or(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(i.set(e,null),null):($t(s)?s.forEach(l=>o[l]=null):Or(o,s),i.set(e,o),o)}function vF(e,t){return!e||!Lp(t)?!1:(t=t.slice(2).replace(/Once$/,""),Mr(e,t[0].toLowerCase()+t.slice(1))||Mr(e,Wa(t))||Mr(e,t))}let js=null,bA=null;function Tx(e){const t=js;return js=e,bA=e&&e.type.__scopeId||null,t}function qp(e){bA=e}function Hp(){bA=null}const kae=e=>dn;function dn(e,t=js,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&yT(-1);const s=Tx(t),o=e(...n);return Tx(s),i._d&&yT(1),Aae(t),o};return i._n=!0,i._c=!0,i._d=!0,i}let qP=!1;function pT(){qP=!0}function $5(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:p,data:d,setupState:m,ctx:g,inheritAttrs:b}=e;let v,_;const E=Tx(e);qP=!1;try{if(r.shapeFlag&4){const T=n||i;v=Uo(c.call(T,T,p,s,m,d,g)),_=l}else{const T=t;l===s&&pT(),v=Uo(T.length>1?T(s,{get attrs(){return pT(),l},slots:a,emit:u}):T(s,null)),_=t.props?l:NUe(l)}}catch(T){I2.length=0,dm(T,e,1),v=ar(Tn)}let I=v,x;if(v.patchFlag>0&&v.patchFlag&2048&&([I,x]=LUe(v)),_&&b!==!1){const T=Object.keys(_),{shapeFlag:M}=I;if(T.length){if(M&7)o&&T.some(lT)&&(_=DUe(_,o)),I=Ku(I,_);else if(!qP&&I.type!==Tn){const k=Object.keys(l),D=[],B=[];for(let G=0,W=k.length;G<W;G++){const K=k[G];Lp(K)?lT(K)||D.push(K[2].toLowerCase()+K.slice(3)):B.push(K)}B.length&&Xe(`Extraneous non-props attributes (${B.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),D.length&&Xe(`Extraneous non-emits event listeners (${D.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return r.dirs&&(AH(I)||Xe("Runtime directive used on component with non-element root node. The directives will not function as intended."),I.dirs=I.dirs?I.dirs.concat(r.dirs):r.dirs),r.transition&&(AH(I)||Xe("Component inside <Transition> renders non-element root node that cannot be animated."),I.transition=r.transition),x?x(I):v=I,Tx(E),v}const LUe=e=>{const t=e.children,r=e.dynamicChildren,i=bF(t);if(!i)return[e,void 0];const n=t.indexOf(i),s=r?r.indexOf(i):-1,o=a=>{t[n]=a,r&&(s>-1?r[s]=a:a.patchFlag>0&&(e.dynamicChildren=[...r,a]))};return[Uo(i),o]};function bF(e){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Zu(i)){if(i.type!==Tn||i.children==="v-if"){if(t)return;t=i}}else return}return t}const NUe=e=>{let t;for(const r in e)(r==="class"||r==="style"||Lp(r))&&((t||(t={}))[r]=e[r]);return t},DUe=(e,t)=>{const r={};for(const i in e)(!lT(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r},AH=e=>e.shapeFlag&7||e.type===Tn;function FUe(e,t,r){const{props:i,children:n,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if((n||a)&&kf||t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?$H(i,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const d=c[p];if(o[d]!==i[d]&&!vF(u,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?$H(i,o,u):!0:!!o;return!1}function $H(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!vF(r,s))return!0}return!1}function wF({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const jUe=e=>e.__isSuspense,UUe={name:"Suspense",__isSuspense:!0,process(e,t,r,i,n,s,o,a,l,u){e==null?VUe(t,r,i,n,s,o,a,l,u):BUe(e,t,r,i,n,o,a,l,u)},hydrate:zUe,create:_F,normalize:GUe},Oae=UUe;function Ax(e,t){const r=e.props&&e.props[t];Zt(r)&&r()}function VUe(e,t,r,i,n,s,o,a,l){const{p:u,o:{createElement:c}}=l,p=c("div"),d=e.suspense=_F(e,n,i,t,p,r,s,o,a,l);u(null,d.pendingBranch=e.ssContent,p,null,i,d,s,o),d.deps>0?(Ax(e,"onPending"),Ax(e,"onFallback"),u(null,e.ssFallback,t,r,i,null,s,o),uv(d,e.ssFallback)):d.resolve()}function BUe(e,t,r,i,n,s,o,a,{p:l,um:u,o:{createElement:c}}){const p=t.suspense=e.suspense;p.vnode=t,t.el=e.el;const d=t.ssContent,m=t.ssFallback,{activeBranch:g,pendingBranch:b,isInFallback:v,isHydrating:_}=p;if(b)p.pendingBranch=d,Wc(d,b)?(l(b,d,p.hiddenContainer,null,n,p,s,o,a),p.deps<=0?p.resolve():v&&(l(g,m,r,i,n,null,s,o,a),uv(p,m))):(p.pendingId++,_?(p.isHydrating=!1,p.activeBranch=b):u(b,n,p),p.deps=0,p.effects.length=0,p.hiddenContainer=c("div"),v?(l(null,d,p.hiddenContainer,null,n,p,s,o,a),p.deps<=0?p.resolve():(l(g,m,r,i,n,null,s,o,a),uv(p,m))):g&&Wc(d,g)?(l(g,d,r,i,n,p,s,o,a),p.resolve(!0)):(l(null,d,p.hiddenContainer,null,n,p,s,o,a),p.deps<=0&&p.resolve()));else if(g&&Wc(d,g))l(g,d,r,i,n,p,s,o,a),uv(p,d);else if(Ax(t,"onPending"),p.pendingBranch=d,p.pendingId++,l(null,d,p.hiddenContainer,null,n,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:E,pendingId:I}=p;E>0?setTimeout(()=>{p.pendingId===I&&p.fallback(m)},E):E===0&&p.fallback(m)}}let CH=!1;function _F(e,t,r,i,n,s,o,a,l,u,c=!1){CH||(CH=!0,console[console.info?"info":"log"]("<Suspense> is an experimental feature and its API will likely change."));const{p,m:d,um:m,n:g,o:{parentNode:b,remove:v}}=u,_=Yf(e.props&&e.props.timeout),E={vnode:e,parent:t,parentComponent:r,isSVG:o,container:i,hiddenContainer:n,anchor:s,deps:0,pendingId:0,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:c,isUnmounted:!1,effects:[],resolve(I=!1){{if(!I&&!E.pendingBranch)throw new Error("suspense.resolve() is called without a pending branch.");if(E.isUnmounted)throw new Error("suspense.resolve() is called on an already unmounted suspense boundary.")}const{vnode:x,activeBranch:T,pendingBranch:M,pendingId:k,effects:D,parentComponent:B,container:G}=E;if(E.isHydrating)E.isHydrating=!1;else if(!I){const ne=T&&M.transition&&M.transition.mode==="out-in";ne&&(T.transition.afterLeave=()=>{k===E.pendingId&&d(M,G,ye,0)});let{anchor:ye}=E;T&&(ye=g(T),m(T,B,E,!0)),ne||d(M,G,ye,0)}uv(E,M),E.pendingBranch=null,E.isInFallback=!1;let W=E.parent,K=!1;for(;W;){if(W.pendingBranch){W.effects.push(...D),K=!0;break}W=W.parent}K||RS(D),E.effects=[],Ax(x,"onResolve")},fallback(I){if(!E.pendingBranch)return;const{vnode:x,activeBranch:T,parentComponent:M,container:k,isSVG:D}=E;Ax(x,"onFallback");const B=g(T),G=()=>{!E.isInFallback||(p(null,I,k,B,M,null,D,a,l),uv(E,I))},W=I.transition&&I.transition.mode==="out-in";W&&(T.transition.afterLeave=G),E.isInFallback=!0,m(T,M,null,!0),W||G()},move(I,x,T){E.activeBranch&&d(E.activeBranch,I,x,T),E.container=I},next(){return E.activeBranch&&g(E.activeBranch)},registerDep(I,x){const T=!!E.pendingBranch;T&&E.deps++;const M=I.vnode.el;I.asyncDep.catch(k=>{dm(k,I,0)}).then(k=>{if(I.isUnmounted||E.isUnmounted||E.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:D}=I;w2(D),eL(I,k,!1),M&&(D.el=M);const B=!M&&I.subTree.el;x(I,D,b(M||I.subTree.el),M?null:g(I.subTree),E,o,l),B&&v(B),wF(I,D.el),_2(),T&&--E.deps===0&&E.resolve()})},unmount(I,x){E.isUnmounted=!0,E.activeBranch&&m(E.activeBranch,r,I,x),E.pendingBranch&&m(E.pendingBranch,r,I,x)}};return E}function zUe(e,t,r,i,n,s,o,a,l){const u=t.suspense=_F(t,i,r,e.parentNode,document.createElement("div"),null,n,s,o,a,!0),c=l(e,u.pendingBranch=t.ssContent,r,u,s,o);return u.deps===0&&u.resolve(),c}function GUe(e){const{shapeFlag:t,children:r}=e,i=t&32;e.ssContent=kH(i?r.default:r),e.ssFallback=i?kH(r.fallback):ar(Tn)}function kH(e){let t;if(Zt(e)){const r=Nv&&e._c;r&&(e._d=!1,pt()),e=e(),r&&(e._d=!0,t=ih,ele())}if($t(e)){const r=bF(e);r||Xe("<Suspense> slots expect a single root node."),e=r}return e=Uo(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function Rae(e,t){t&&t.pendingBranch?$t(e)?t.effects.push(...e):t.effects.push(e):RS(e)}function uv(e,t){e.activeBranch=t;const{vnode:r,parentComponent:i}=e,n=r.el=t.el;i&&i.subTree===r&&(i.vnode.el=n,wF(i,n))}function xF(e,t){if(!Sn)Xe("provide() can only be used inside setup().");else{let r=Sn.provides;const i=Sn.parent&&Sn.parent.provides;i===r&&(r=Sn.provides=Object.create(i)),r[e]=t}}function gg(e,t,r=!1){const i=Sn||js;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&Zt(t)?t.call(i.proxy):t;Xe(`injection "${String(e)}" not found.`)}else Xe("inject() can only be used inside setup() or functional components.")}function Pae(e,t){return LS(e,null,t)}function SF(e,t){return LS(e,null,Object.assign(t||{},{flush:"post"}))}function Lae(e,t){return LS(e,null,Object.assign(t||{},{flush:"sync"}))}const OH={};function Yo(e,t,r){return Zt(t)||Xe("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),LS(e,t,r)}function LS(e,t,{immediate:r,deep:i,flush:n,onTrack:s,onTrigger:o}=kr){t||(r!==void 0&&Xe('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),i!==void 0&&Xe('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=E=>{Xe("Invalid watch source: ",E,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=Sn;let u,c=!1,p=!1;if(ai(e)?(u=()=>e.value,c=fA(e)):Uu(e)?(u=()=>e,i=!0):$t(e)?(p=!0,c=e.some(Uu),u=()=>e.map(E=>{if(ai(E))return E.value;if(Uu(E))return Ky(E);if(Zt(E))return Vu(E,l,2);a(E)})):Zt(e)?t?u=()=>Vu(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return d&&d(),Ko(e,l,3,[m])}:(u=ps,a(e)),t&&i){const E=u;u=()=>Ky(E())}let d,m=E=>{d=_.onStop=()=>{Vu(E,l,4)}};if(Fv)return m=ps,t?r&&Ko(t,l,3,[u(),p?[]:void 0,m]):u(),ps;let g=p?[]:OH;const b=()=>{if(!!_.active)if(t){const E=_.run();(i||c||(p?E.some((I,x)=>Sx(I,g[x])):Sx(E,g)))&&(d&&d(),Ko(t,l,3,[E,g===OH?void 0:g,m]),g=E)}else _.run()};b.allowRecurse=!!t;let v;n==="sync"?v=b:n==="post"?v=()=>as(b,l&&l.suspense):v=()=>{!l||l.isMounted?SUe(b):b()};const _=new Fb(u,v);return _.onTrack=s,_.onTrigger=o,t?r?b():g=_.run():n==="post"?as(_.run.bind(_),l&&l.suspense):_.run(),()=>{_.stop(),l&&l.scope&&nF(l.scope.effects,_)}}function qUe(e,t,r){const i=this.proxy,n=lr(e)?e.includes(".")?Nae(i,e):()=>i[e]:e.bind(i,i);let s;Zt(t)?s=t:(s=t.handler,r=t);const o=Sn;em(this);const a=LS(n,s.bind(i),r);return o?em(o):Of(),a}function Nae(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function Ky(e,t){if(!ri(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),ai(e))Ky(e.value,t);else if($t(e))for(let r=0;r<e.length;r++)Ky(e[r],t);else if(s0(e)||dg(e))e.forEach(r=>{Ky(r,t)});else if(Joe(e))for(const r in e)Ky(e[r],t);return e}function wA(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return bh(()=>{e.isMounted=!0}),FS(()=>{e.isUnmounting=!0}),e}const pl=[Function,Array],HUe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pl,onEnter:pl,onAfterEnter:pl,onEnterCancelled:pl,onBeforeLeave:pl,onLeave:pl,onAfterLeave:pl,onLeaveCancelled:pl,onBeforeAppear:pl,onAppear:pl,onAfterAppear:pl,onAppearCancelled:pl},setup(e,{slots:t}){const r=xo(),i=wA();let n;return()=>{const s=t.default&&NS(t.default(),!0);if(!s||!s.length)return;s.length>1&&Xe("<transition> can only be used on a single element or component. Use <transition-group> for lists.");const o=Bt(e),{mode:a}=o;a&&a!=="in-out"&&a!=="out-in"&&a!=="default"&&Xe(`invalid <transition> mode: ${a}`);const l=s[0];if(i.isLeaving)return mk(l);const u=RH(l);if(!u)return mk(l);const c=Fg(u,o,i,r);Xf(u,c);const p=r.subTree,d=p&&RH(p);let m=!1;const{getTransitionKey:g}=u.type;if(g){const b=g();n===void 0?n=b:b!==n&&(n=b,m=!0)}if(d&&d.type!==Tn&&(!Wc(u,d)||m)){const b=Fg(d,o,i,r);if(Xf(d,b),a==="out-in")return i.isLeaving=!0,b.afterLeave=()=>{i.isLeaving=!1,r.update()},mk(l);a==="in-out"&&u.type!==Tn&&(b.delayLeave=(v,_,E)=>{const I=Dae(i,d);I[String(d.key)]=d,v._leaveCb=()=>{_(),v._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=E})}return l}}},_A=HUe;function Dae(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function Fg(e,t,r,i){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:p,onLeave:d,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:v,onAfterAppear:_,onAppearCancelled:E}=t,I=String(e.key),x=Dae(r,e),T=(k,D)=>{k&&Ko(k,i,9,D)},M={mode:s,persisted:o,beforeEnter(k){let D=a;if(!r.isMounted)if(n)D=b||a;else return;k._leaveCb&&k._leaveCb(!0);const B=x[I];B&&Wc(e,B)&&B.el._leaveCb&&B.el._leaveCb(),T(D,[k])},enter(k){let D=l,B=u,G=c;if(!r.isMounted)if(n)D=v||l,B=_||u,G=E||c;else return;let W=!1;const K=k._enterCb=ne=>{W||(W=!0,ne?T(G,[k]):T(B,[k]),M.delayedLeave&&M.delayedLeave(),k._enterCb=void 0)};D?(D(k,K),D.length<=1&&K()):K()},leave(k,D){const B=String(e.key);if(k._enterCb&&k._enterCb(!0),r.isUnmounting)return D();T(p,[k]);let G=!1;const W=k._leaveCb=K=>{G||(G=!0,D(),K?T(g,[k]):T(m,[k]),k._leaveCb=void 0,x[B]===e&&delete x[B])};x[B]=e,d?(d(k,W),d.length<=1&&W()):W()},clone(k){return Fg(k,t,r,i)}};return M}function mk(e){if(jb(e))return e=Ku(e),e.children=null,e}function RH(e){return jb(e)?e.children?e.children[0]:void 0:e}function Xf(e,t){e.shapeFlag&6&&e.component?Xf(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function NS(e,t=!1){let r=[],i=0;for(let n=0;n<e.length;n++){const s=e[n];s.type===Xr?(s.patchFlag&128&&i++,r=r.concat(NS(s.children,t))):(t||s.type!==Tn)&&r.push(s)}if(i>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}function Ar(e){return Zt(e)?{setup:e,name:e.name}:e}const $x=e=>!!e.type.__asyncLoader;function xA(e){Zt(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,timeout:s,suspensible:o=!0,onError:a}=e;let l=null,u,c=0;const p=()=>(c++,l=null,d()),d=()=>{let m;return l||(m=l=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),a)return new Promise((b,v)=>{a(g,()=>b(p()),()=>v(g),c+1)});throw g}).then(g=>{if(m!==l&&l)return l;if(g||Xe("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),g&&!ri(g)&&!Zt(g))throw new Error(`Invalid async component load result: ${g}`);return u=g,g}))};return Ar({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return u},setup(){const m=Sn;if(u)return()=>yk(u,m);const g=E=>{l=null,dm(E,m,13,!i)};if(o&&m.suspense||Fv)return d().then(E=>()=>yk(E,m)).catch(E=>(g(E),()=>i?ar(i,{error:E}):null));const b=hs(!1),v=hs(),_=hs(!!n);return n&&setTimeout(()=>{_.value=!1},n),s!=null&&setTimeout(()=>{if(!b.value&&!v.value){const E=new Error(`Async component timed out after ${s}ms.`);g(E),v.value=E}},s),d().then(()=>{b.value=!0,m.parent&&jb(m.parent.vnode)&&gA(m.parent.update)}).catch(E=>{g(E),v.value=E}),()=>{if(b.value&&u)return yk(u,m);if(v.value&&i)return ar(i,{error:v.value});if(r&&!_.value)return ar(r)}}})}function yk(e,{vnode:{ref:t,props:r,children:i}}){const n=ar(e,r,i);return n.ref=t,n}const jb=e=>e.type.__isKeepAlive,WUe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=xo(),i=r.ctx;if(!i.renderer)return t.default;const n=new Map,s=new Set;let o=null;r.__v_cache=n;const a=r.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:p}}}=i,d=p("div");i.activate=(E,I,x,T,M)=>{const k=E.component;u(E,I,x,0,a),l(k.vnode,E,I,x,k,a,T,E.slotScopeIds,M),as(()=>{k.isDeactivated=!1,k.a&&of(k.a);const D=E.props&&E.props.onVnodeMounted;D&&Po(D,k.parent,E)},a),GP(k)},i.deactivate=E=>{const I=E.component;u(E,d,null,1,a),as(()=>{I.da&&of(I.da);const x=E.props&&E.props.onVnodeUnmounted;x&&Po(x,I.parent,E),I.isDeactivated=!0},a),GP(I)};function m(E){gk(E),c(E,r,a,!0)}function g(E){n.forEach((I,x)=>{const T=Cx(I.type);T&&(!E||!E(T))&&b(x)})}function b(E){const I=n.get(E);!o||I.type!==o.type?m(I):o&&gk(o),n.delete(E),s.delete(E)}Yo(()=>[e.include,e.exclude],([E,I])=>{E&&g(x=>U_(E,x)),I&&g(x=>!U_(I,x))},{flush:"post",deep:!0});let v=null;const _=()=>{v!=null&&n.set(v,vk(r.subTree))};return bh(_),DS(_),FS(()=>{n.forEach(E=>{const{subTree:I,suspense:x}=r,T=vk(I);if(E.type===T.type){gk(T);const M=T.component.da;M&&as(M,x);return}m(E)})}),()=>{if(v=null,!t.default)return null;const E=t.default(),I=E[0];if(E.length>1)return Xe("KeepAlive should contain exactly one component child."),o=null,E;if(!Zu(I)||!(I.shapeFlag&4)&&!(I.shapeFlag&128))return o=null,I;let x=vk(I);const T=x.type,M=Cx($x(x)?x.type.__asyncResolved||{}:T),{include:k,exclude:D,max:B}=e;if(k&&(!M||!U_(k,M))||D&&M&&U_(D,M))return o=x,I;const G=x.key==null?T:x.key,W=n.get(G);return x.el&&(x=Ku(x),I.shapeFlag&128&&(I.ssContent=x)),v=G,W?(x.el=W.el,x.component=W.component,x.transition&&Xf(x,x.transition),x.shapeFlag|=512,s.delete(G),s.add(G)):(s.add(G),B&&s.size>parseInt(B,10)&&b(s.values().next().value)),x.shapeFlag|=256,o=x,I}}},Fae=WUe;function U_(e,t){return $t(e)?e.some(r=>U_(r,t)):lr(e)?e.split(",").includes(t):e.test?e.test(t):!1}function EF(e,t){jae(e,"a",t)}function MF(e,t){jae(e,"da",t)}function jae(e,t,r=Sn){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(SA(t,i,r),r){let n=r.parent;for(;n&&n.parent;)jb(n.parent.vnode)&&JUe(i,t,r,n),n=n.parent}}function JUe(e,t,r,i){const n=SA(t,e,i,!0);l0(()=>{nF(i[t],n)},r)}function gk(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function vk(e){return e.shapeFlag&128?e.ssContent:e}function SA(e,t,r=Sn,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;o0(),em(r);const a=Ko(t,r,e,o);return Of(),a0(),a});return i?n.unshift(s):n.push(s),s}else{const n=Iu(dF[e].replace(/ hook$/,""));Xe(`${n} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Wp=e=>(t,r=Sn)=>(!Fv||e==="sp")&&SA(e,t,r),IF=Wp("bm"),bh=Wp("m"),TF=Wp("bu"),DS=Wp("u"),FS=Wp("bum"),l0=Wp("um"),AF=Wp("sp"),$F=Wp("rtg"),CF=Wp("rtc");function kF(e,t=Sn){SA("ec",e,t)}function ZUe(){const e=Object.create(null);return(t,r)=>{e[r]?Xe(`${t} property "${r}" is already defined in ${e[r]}.`):e[r]=t}}let HP=!0;function KUe(e){const t=Vae(e),r=e.proxy,i=e.ctx;HP=!1,t.beforeCreate&&PH(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:p,mounted:d,beforeUpdate:m,updated:g,activated:b,deactivated:v,beforeDestroy:_,beforeUnmount:E,destroyed:I,unmounted:x,render:T,renderTracked:M,renderTriggered:k,errorCaptured:D,serverPrefetch:B,expose:G,inheritAttrs:W,components:K,directives:ne,filters:ye}=t,y=ZUe();{const[L]=e.propsOptions;if(L)for(const F in L)y("Props",F)}if(u&&YUe(u,i,y,e.appContext.config.unwrapInjectedRef),o)for(const L in o){const F=o[L];Zt(F)?(Object.defineProperty(i,L,{value:F.bind(r),configurable:!0,enumerable:!0,writable:!0}),y("Methods",L)):Xe(`Method "${L}" has type "${typeof F}" in the component definition. Did you reference the function correctly?`)}if(n){Zt(n)||Xe("The data option must be a function. Plain object usage is no longer supported.");const L=n.call(r,r);if(sA(L)&&Xe("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!ri(L))Xe("data() should return an object.");else{e.data=oa(L);for(const F in L)y("Data",F),F[0]!=="$"&&F[0]!=="_"&&Object.defineProperty(i,F,{configurable:!0,enumerable:!0,get:()=>L[F],set:ps})}}if(HP=!0,s)for(const L in s){const F=s[L],ae=Zt(F)?F.bind(r,r):Zt(F.get)?F.get.bind(r,r):ps;ae===ps&&Xe(`Computed property "${L}" has no getter.`);const q=!Zt(F)&&Zt(F.set)?F.set.bind(r):()=>{Xe(`Write operation failed: computed property "${L}" is readonly.`)},fe=$u({get:ae,set:q});Object.defineProperty(i,L,{enumerable:!0,configurable:!0,get:()=>fe.value,set:te=>fe.value=te}),y("Computed",L)}if(a)for(const L in a)Uae(a[L],i,r,L);if(l){const L=Zt(l)?l.call(r):l;Reflect.ownKeys(L).forEach(F=>{xF(F,L[F])})}c&&PH(c,e,"c");function C(L,F){$t(F)?F.forEach(ae=>L(ae.bind(r))):F&&L(F.bind(r))}if(C(IF,p),C(bh,d),C(TF,m),C(DS,g),C(EF,b),C(MF,v),C(kF,D),C(CF,M),C($F,k),C(FS,E),C(l0,x),C(AF,B),$t(G))if(G.length){const L=e.exposed||(e.exposed={});G.forEach(F=>{Object.defineProperty(L,F,{get:()=>r[F],set:ae=>r[F]=ae})})}else e.exposed||(e.exposed={});T&&e.render===ps&&(e.render=T),W!=null&&(e.inheritAttrs=W),K&&(e.components=K),ne&&(e.directives=ne)}function YUe(e,t,r=ps,i=!1){$t(e)&&(e=WP(e));for(const n in e){const s=e[n];let o;ri(s)?"default"in s?o=gg(s.from||n,s.default,!0):o=gg(s.from||n):o=gg(s),ai(o)?i?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):(Xe(`injected property "${n}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[n]=o):t[n]=o,r("Inject",n)}}function PH(e,t,r){Ko($t(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function Uae(e,t,r,i){const n=i.includes(".")?Nae(r,i):()=>r[i];if(lr(e)){const s=t[e];Zt(s)?Yo(n,s):Xe(`Invalid watch handler specified by key "${e}"`,s)}else if(Zt(e))Yo(n,e.bind(r));else if(ri(e))if($t(e))e.forEach(s=>Uae(s,t,r,i));else{const s=Zt(e.handler)?e.handler.bind(r):t[e.handler];Zt(s)?Yo(n,s,e):Xe(`Invalid watch handler specified by key "${e.handler}"`,s)}else Xe(`Invalid watch option: "${i}"`,e)}function Vae(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>dT(l,u,o,!0)),dT(l,t,o)),s.set(t,l),l}function dT(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&dT(e,s,r,!0),n&&n.forEach(o=>dT(e,o,r,!0));for(const o in t)if(i&&o==="expose")Xe('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=QUe[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const QUe={data:LH,props:vy,emits:vy,methods:vy,computed:vy,beforeCreate:no,created:no,beforeMount:no,mounted:no,beforeUpdate:no,updated:no,beforeDestroy:no,beforeUnmount:no,destroyed:no,unmounted:no,activated:no,deactivated:no,errorCaptured:no,serverPrefetch:no,components:vy,directives:vy,watch:eVe,provide:LH,inject:XUe};function LH(e,t){return t?e?function(){return Or(Zt(e)?e.call(this,this):e,Zt(t)?t.call(this,this):t)}:t:e}function XUe(e,t){return vy(WP(e),WP(t))}function WP(e){if($t(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function no(e,t){return e?[...new Set([].concat(e,t))]:t}function vy(e,t){return e?Or(Or(Object.create(null),e),t):t}function eVe(e,t){if(!e)return t;if(!t)return e;const r=Or(Object.create(null),e);for(const i in t)r[i]=no(e[i],t[i]);return r}function tVe(e,t,r,i=!1){const n={},s={};uT(s,EA,1),e.propsDefaults=Object.create(null),Bae(e,t,n,s);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);Gae(t||{},n,e),r?e.props=i?n:uF(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function rVe(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=e,a=Bt(n),[l]=e.propsOptions;let u=!1;if(!(e.type.__hmrId||e.parent&&e.parent.type.__hmrId)&&(i||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let d=c[p];const m=t[d];if(l)if(Mr(s,d))m!==s[d]&&(s[d]=m,u=!0);else{const g=gs(d);n[g]=JP(l,a,g,m,e,!1)}else m!==s[d]&&(s[d]=m,u=!0)}}}else{Bae(e,t,n,s)&&(u=!0);let c;for(const p in a)(!t||!Mr(t,p)&&((c=Wa(p))===p||!Mr(t,c)))&&(l?r&&(r[p]!==void 0||r[c]!==void 0)&&(n[p]=JP(l,a,p,void 0,e,!0)):delete n[p]);if(s!==a)for(const p in s)(!t||!Mr(t,p)&&!0)&&(delete s[p],u=!0)}u&&Np(e,"set","$attrs"),Gae(t||{},n,e)}function Bae(e,t,r,i){const[n,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(fg(l))continue;const u=t[l];let c;n&&Mr(n,c=gs(l))?!s||!s.includes(c)?r[c]=u:(a||(a={}))[c]=u:vF(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(s){const l=Bt(r),u=a||kr;for(let c=0;c<s.length;c++){const p=s[c];r[p]=JP(n,l,p,u[p],e,!Mr(u,p))}}return o}function JP(e,t,r,i,n,s){const o=e[r];if(o!=null){const a=Mr(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Zt(l)){const{propsDefaults:u}=n;r in u?i=u[r]:(em(n),i=u[r]=l.call(null,t),Of())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Wa(r))&&(i=!0))}return i}function zae(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,o={},a=[];let l=!1;if(!Zt(e)){const c=p=>{l=!0;const[d,m]=zae(p,t,!0);Or(o,d),m&&a.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return i.set(e,lv),lv;if($t(s))for(let c=0;c<s.length;c++){lr(s[c])||Xe("props must be strings when using array syntax.",s[c]);const p=gs(s[c]);NH(p)&&(o[p]=kr)}else if(s){ri(s)||Xe("invalid props options",s);for(const c in s){const p=gs(c);if(NH(p)){const d=s[c],m=o[p]=$t(d)||Zt(d)?{type:d}:d;if(m){const g=FH(Boolean,m.type),b=FH(String,m.type);m[0]=g>-1,m[1]=b<0||g<b,(g>-1||Mr(m,"default"))&&a.push(p)}}}}const u=[o,a];return i.set(e,u),u}function NH(e){return e[0]!=="$"?!0:(Xe(`Invalid prop name: "${e}" is a reserved property.`),!1)}function ZP(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function DH(e,t){return ZP(e)===ZP(t)}function FH(e,t){return $t(t)?t.findIndex(r=>DH(r,e)):Zt(t)&&DH(t,e)?0:-1}function Gae(e,t,r){const i=Bt(t),n=r.propsOptions[0];for(const s in n){let o=n[s];o!=null&&iVe(s,i[s],o,!Mr(e,s)&&!Mr(e,Wa(s)))}}function iVe(e,t,r,i){const{type:n,required:s,validator:o}=r;if(s&&i){Xe('Missing required prop: "'+e+'"');return}if(!(t==null&&!r.required)){if(n!=null&&n!==!0){let a=!1;const l=$t(n)?n:[n],u=[];for(let c=0;c<l.length&&!a;c++){const{valid:p,expectedType:d}=sVe(t,l[c]);u.push(d||""),a=p}if(!a){Xe(oVe(e,t,u));return}}o&&!o(t)&&Xe('Invalid prop: custom validator check failed for prop "'+e+'".')}}const nVe=Ws("String,Number,Boolean,Function,Symbol,BigInt");function sVe(e,t){let r;const i=ZP(t);if(nVe(i)){const n=typeof e;r=n===i.toLowerCase(),!r&&n==="object"&&(r=e instanceof t)}else i==="Object"?r=ri(e):i==="Array"?r=$t(e):i==="null"?r=e===null:r=e instanceof t;return{valid:r,expectedType:i}}function oVe(e,t,r){let i=`Invalid prop: type check failed for prop "${e}". Expected ${r.map(Ju).join(" | ")}`;const n=r[0],s=sF(t),o=jH(t,n),a=jH(t,s);return r.length===1&&UH(n)&&!aVe(n,s)&&(i+=` with value ${o}`),i+=`, got ${s} `,UH(s)&&(i+=`with value ${a}.`),i}function jH(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function UH(e){return["string","number","boolean"].some(r=>e.toLowerCase()===r)}function aVe(...e){return e.some(t=>t.toLowerCase()==="boolean")}const qae=e=>e[0]==="_"||e==="$stable",OF=e=>$t(e)?e.map(Uo):[Uo(e)],lVe=(e,t,r)=>{const i=dn((...n)=>(Sn&&Xe(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),OF(t(...n))),r);return i._c=!1,i},Hae=(e,t,r)=>{const i=e._ctx;for(const n in e){if(qae(n))continue;const s=e[n];if(Zt(s))t[n]=lVe(n,s,i);else if(s!=null){Xe(`Non-function value encountered for slot "${n}". Prefer function slots for better performance.`);const o=OF(s);t[n]=()=>o}}},Wae=(e,t)=>{jb(e.vnode)||Xe("Non-function value encountered for default slot. Prefer function slots for better performance.");const r=OF(t);e.slots.default=()=>r},uVe=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Bt(t),uT(t,"_",r)):Hae(t,e.slots={})}else e.slots={},t&&Wae(e,t);uT(e.slots,EA,1)},cVe=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,o=kr;if(i.shapeFlag&32){const a=t._;a?kf?Or(n,t):r&&a===1?s=!1:(Or(n,t),!r&&a===1&&delete n._):(s=!t.$stable,Hae(t,n)),o=t}else t&&(Wae(e,t),o={default:1});if(s)for(const a in n)!qae(a)&&!(a in o)&&delete n[a]};function Jae(e){Zoe(e)&&Xe("Do not use built-in directive ids as custom directive id: "+e)}function ti(e,t){const r=js;if(r===null)return Xe("withDirectives can only be used inside render functions."),e;const i=r.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,u=kr]=t[s];Zt(o)&&(o={mounted:o,updated:o}),o.deep&&Ky(a),n.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function jc(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(o0(),Ko(l,r,8,[e.el,a,e,t]),a0())}}function Zae(){return{app:null,config:{isNativeTag:b2,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hVe=0;function pVe(e,t){return function(i,n=null){n!=null&&!ri(n)&&(Xe("root props passed to app.mount() must be an object."),n=null);const s=Zae(),o=new Set;let a=!1;const l=s.app={_uid:hVe++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:gT,get config(){return s.config},set config(u){Xe("app.config cannot be replaced. Modify individual options instead.")},use(u,...c){return o.has(u)?Xe("Plugin has already been applied to target app."):u&&Zt(u.install)?(o.add(u),u.install(l,...c)):Zt(u)?(o.add(u),u(l,...c)):Xe('A plugin must either be a function or an object with an "install" function.'),l},mixin(u){return s.mixins.includes(u)?Xe("Mixin has already been applied to target app"+(u.name?`: ${u.name}`:"")):s.mixins.push(u),l},component(u,c){return XP(u,s.config),c?(s.components[u]&&Xe(`Component "${u}" has already been registered in target app.`),s.components[u]=c,l):s.components[u]},directive(u,c){return Jae(u),c?(s.directives[u]&&Xe(`Directive "${u}" has already been registered in target app.`),s.directives[u]=c,l):s.directives[u]},mount(u,c,p){if(a)Xe("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{const d=ar(i,n);return d.appContext=s,s.reload=()=>{e(Ku(d),u,p)},c&&t?t(d,u):e(d,u,p),a=!0,l._container=u,u.__vue_app__=l,l._instance=d.component,AUe(l,gT),VF(d.component)||d.component.proxy}},unmount(){a?(e(null,l._container),l._instance=null,$Ue(l),delete l._container.__vue_app__):Xe("Cannot unmount an app that is not mounted.")},provide(u,c){return u in s.provides&&Xe(`App already provides property with key "${String(u)}". It will be overwritten with the new value.`),s.provides[u]=c,l}};return l}}function fT(e,t,r,i,n=!1){if($t(e)){e.forEach((d,m)=>fT(d,t&&($t(t)?t[m]:t),r,i,n));return}if($x(i)&&!n)return;const s=i.shapeFlag&4?VF(i.component)||i.component.proxy:i.el,o=n?null:s,{i:a,r:l}=e;if(!a){Xe("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const u=t&&t.r,c=a.refs===kr?a.refs={}:a.refs,p=a.setupState;if(u!=null&&u!==l&&(lr(u)?(c[u]=null,Mr(p,u)&&(p[u]=null)):ai(u)&&(u.value=null)),Zt(l))Vu(l,a,12,[o,c]);else{const d=lr(l),m=ai(l);if(d||m){const g=()=>{if(e.f){const b=d?c[l]:l.value;n?$t(b)&&nF(b,s):$t(b)?b.includes(s)||b.push(s):d?c[l]=[s]:(l.value=[s],e.k&&(c[e.k]=l.value))}else d?(c[l]=o,Mr(p,l)&&(p[l]=o)):ai(l)?(l.value=o,e.k&&(c[e.k]=o)):Xe("Invalid template ref type:",l,`(${typeof l})`)};o?(g.id=-1,as(g,r)):g()}else Xe("Invalid template ref type:",l,`(${typeof l})`)}}let md=!1;const NE=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",DE=e=>e.nodeType===8;function dVe(e){const{mt:t,p:r,o:{patchProp:i,nextSibling:n,parentNode:s,remove:o,insert:a,createComment:l}}=e,u=(v,_)=>{if(!_.hasChildNodes()){Xe("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),r(null,v,_),hT();return}md=!1,c(_.firstChild,v,null,null,null),hT(),md&&console.error("Hydration completed but contains mismatches.")},c=(v,_,E,I,x,T=!1)=>{const M=DE(v)&&v.data==="[",k=()=>g(v,_,E,I,x,M),{type:D,ref:B,shapeFlag:G}=_,W=v.nodeType;_.el=v;let K=null;switch(D){case dh:W!==3?K=k():(v.data!==_.children&&(md=!0,Xe(`Hydration text mismatch:
- Client: ${JSON.stringify(v.data)}
- Server: ${JSON.stringify(_.children)}`),v.data=_.children),K=n(v));break;case Tn:W!==8||M?K=k():K=n(v);break;case xp:if(W!==1)K=k();else{K=v;const ne=!_.children.length;for(let ye=0;ye<_.staticCount;ye++)ne&&(_.children+=K.outerHTML),ye===_.staticCount-1&&(_.anchor=K),K=n(K);return K}break;case Xr:M?K=m(v,_,E,I,x,T):K=k();break;default:if(G&1)W!==1||_.type.toLowerCase()!==v.tagName.toLowerCase()?K=k():K=p(v,_,E,I,x,T);else if(G&6){_.slotScopeIds=x;const ne=s(v);if(t(_,ne,null,E,I,NE(ne),T),K=M?b(v):n(v),$x(_)){let ye;M?(ye=ar(Xr),ye.anchor=K?K.previousSibling:ne.lastChild):ye=v.nodeType===3?Sp(""):ar("div"),ye.el=v,_.component.subTree=ye}}else G&64?W!==8?K=k():K=_.type.hydrate(v,_,E,I,x,T,e,d):G&128?K=_.type.hydrate(v,_,E,I,NE(s(v)),x,T,e,c):Xe("Invalid HostVNode type:",D,`(${typeof D})`)}return B!=null&&fT(B,null,I,_),K},p=(v,_,E,I,x,T)=>{T=T||!!_.dynamicChildren;const{type:M,props:k,patchFlag:D,shapeFlag:B,dirs:G}=_,W=M==="input"&&G||M==="option";{if(G&&jc(_,null,E,"created"),k)if(W||!T||D&48)for(const ne in k)(W&&ne.endsWith("value")||Lp(ne)&&!fg(ne))&&i(v,ne,null,k[ne],!1,void 0,E);else k.onClick&&i(v,"onClick",null,k.onClick,!1,void 0,E);let K;if((K=k&&k.onVnodeBeforeMount)&&Po(K,E,_),G&&jc(_,null,E,"beforeMount"),((K=k&&k.onVnodeMounted)||G)&&Rae(()=>{K&&Po(K,E,_),G&&jc(_,null,E,"mounted")},I),B&16&&!(k&&(k.innerHTML||k.textContent))){let ne=d(v.firstChild,_,v,E,I,x,T),ye=!1;for(;ne;){md=!0,ye||(Xe(`Hydration children mismatch in <${_.type}>: server rendered element contains more child nodes than client vdom.`),ye=!0);const y=ne;ne=ne.nextSibling,o(y)}}else B&8&&v.textContent!==_.children&&(md=!0,Xe(`Hydration text content mismatch in <${_.type}>:
- Client: ${v.textContent}
- Server: ${_.children}`),v.textContent=_.children)}return v.nextSibling},d=(v,_,E,I,x,T,M)=>{M=M||!!_.dynamicChildren;const k=_.children,D=k.length;let B=!1;for(let G=0;G<D;G++){const W=M?k[G]:k[G]=Uo(k[G]);if(v)v=c(v,W,I,x,T,M);else{if(W.type===dh&&!W.children)continue;md=!0,B||(Xe(`Hydration children mismatch in <${E.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`),B=!0),r(null,W,E,null,I,x,NE(E),T)}}return v},m=(v,_,E,I,x,T)=>{const{slotScopeIds:M}=_;M&&(x=x?x.concat(M):M);const k=s(v),D=d(n(v),_,k,E,I,x,T);return D&&DE(D)&&D.data==="]"?n(_.anchor=D):(md=!0,a(_.anchor=l("]"),k,D),D)},g=(v,_,E,I,x,T)=>{if(md=!0,Xe(`Hydration node mismatch:
- Client vnode:`,_.type,`
- Server rendered DOM:`,v,v.nodeType===3?"(text)":DE(v)&&v.data==="["?"(start of fragment)":""),_.el=null,T){const D=b(v);for(;;){const B=n(v);if(B&&B!==D)o(B);else break}}const M=n(v),k=s(v);return o(v),r(null,_,k,M,E,I,NE(k),x),M},b=v=>{let _=0;for(;v;)if(v=n(v),v&&DE(v)&&(v.data==="["&&_++,v.data==="]")){if(_===0)return n(v);_--}return v};return[u,c]}let Ry,af;function rp(e,t){e.appContext.config.performance&&Kae()&&af.mark(`vue-${t}-${e.uid}`),kUe(e,t,Ry?af.now():Date.now())}function ip(e,t){if(e.appContext.config.performance&&Kae()){const r=`vue-${t}-${e.uid}`,i=r+":end";af.mark(i),af.measure(`<${TA(e,e.type)}> ${t}`,r,i),af.clearMarks(r),af.clearMarks(i)}OUe(e,t,Ry?af.now():Date.now())}function Kae(){return Ry!==void 0||(typeof window<"u"&&window.performance?(Ry=!0,af=window.performance):Ry=!1),Ry}function fVe(){const e=[];if(e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const as=Rae;function RF(e){return Yae(e)}function PF(e){return Yae(e,dVe)}function Yae(e,t){fVe();const r=Koe();r.__VUE__=!0,vA(r.__VUE_DEVTOOLS_GLOBAL_HOOK__,r);const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:m=ps,cloneNode:g,insertStaticContent:b}=e,v=(z,ee,we,se=null,U=null,oe=null,re=!1,R=null,$=kf?!1:!!ee.dynamicChildren)=>{if(z===ee)return;z&&!Wc(z,ee)&&(se=Se(z),ve(z,U,oe,!0),z=null),ee.patchFlag===-2&&($=!1,ee.dynamicChildren=null);const{type:A,ref:V,shapeFlag:H}=ee;switch(A){case dh:_(z,ee,we,se);break;case Tn:E(z,ee,we,se);break;case xp:z==null?I(ee,we,se,re):x(z,ee,we,re);break;case Xr:ye(z,ee,we,se,U,oe,re,R,$);break;default:H&1?k(z,ee,we,se,U,oe,re,R,$):H&6?y(z,ee,we,se,U,oe,re,R,$):H&64||H&128?A.process(z,ee,we,se,U,oe,re,R,$,X):Xe("Invalid VNode type:",A,`(${typeof A})`)}V!=null&&U&&fT(V,z&&z.ref,oe,ee||z,!ee)},_=(z,ee,we,se)=>{if(z==null)i(ee.el=a(ee.children),we,se);else{const U=ee.el=z.el;ee.children!==z.children&&u(U,ee.children)}},E=(z,ee,we,se)=>{z==null?i(ee.el=l(ee.children||""),we,se):ee.el=z.el},I=(z,ee,we,se)=>{[z.el,z.anchor]=b(z.children,ee,we,se,z.el,z.anchor)},x=(z,ee,we,se)=>{if(ee.children!==z.children){const U=d(z.anchor);M(z),[ee.el,ee.anchor]=b(ee.children,we,U,se)}else ee.el=z.el,ee.anchor=z.anchor},T=({el:z,anchor:ee},we,se)=>{let U;for(;z&&z!==ee;)U=d(z),i(z,we,se),z=U;i(ee,we,se)},M=({el:z,anchor:ee})=>{let we;for(;z&&z!==ee;)we=d(z),n(z),z=we;n(ee)},k=(z,ee,we,se,U,oe,re,R,$)=>{re=re||ee.type==="svg",z==null?D(ee,we,se,U,oe,re,R,$):W(z,ee,U,oe,re,R,$)},D=(z,ee,we,se,U,oe,re,R)=>{let $,A;const{type:V,props:H,shapeFlag:N,transition:Y,patchFlag:be,dirs:_e}=z;{if($=z.el=o(z.type,oe,H&&H.is,H),N&8?c($,z.children):N&16&&G(z.children,$,null,se,U,oe&&V!=="foreignObject",re,R),_e&&jc(z,null,se,"created"),H){for(const De in H)De!=="value"&&!fg(De)&&s($,De,null,H[De],oe,z.children,se,U,Te);"value"in H&&s($,"value",null,H.value),(A=H.onVnodeBeforeMount)&&Po(A,se,z)}B($,z,z.scopeId,re,se)}Object.defineProperty($,"__vnode",{value:z,enumerable:!1}),Object.defineProperty($,"__vueParentComponent",{value:se,enumerable:!1}),_e&&jc(z,null,se,"beforeMount");const ue=(!U||U&&!U.pendingBranch)&&Y&&!Y.persisted;ue&&Y.beforeEnter($),i($,ee,we),((A=H&&H.onVnodeMounted)||ue||_e)&&as(()=>{A&&Po(A,se,z),ue&&Y.enter($),_e&&jc(z,null,se,"mounted")},U)},B=(z,ee,we,se,U)=>{if(we&&m(z,we),se)for(let oe=0;oe<se.length;oe++)m(z,se[oe]);if(U){let oe=U.subTree;if(oe.patchFlag>0&&oe.patchFlag&2048&&(oe=bF(oe.children)||oe),ee===oe){const re=U.vnode;B(z,re,re.scopeId,re.slotScopeIds,U.parent)}}},G=(z,ee,we,se,U,oe,re,R,$=0)=>{for(let A=$;A<z.length;A++){const V=z[A]=R?rf(z[A]):Uo(z[A]);v(null,V,ee,we,se,U,oe,re,R)}},W=(z,ee,we,se,U,oe,re)=>{const R=ee.el=z.el;let{patchFlag:$,dynamicChildren:A,dirs:V}=ee;$|=z.patchFlag&16;const H=z.props||kr,N=ee.props||kr;let Y;we&&Am(we,!1),(Y=N.onVnodeBeforeUpdate)&&Po(Y,we,ee,z),V&&jc(ee,z,we,"beforeUpdate"),we&&Am(we,!0),kf&&($=0,re=!1,A=null);const be=U&&ee.type!=="foreignObject";if(A?(K(z.dynamicChildren,A,R,we,se,be,oe),we&&we.type.__hmrId&&M2(z,ee)):re||q(z,ee,R,null,we,se,be,oe,!1),$>0){if($&16)ne(R,ee,H,N,we,se,U);else if($&2&&H.class!==N.class&&s(R,"class",null,N.class,U),$&4&&s(R,"style",H.style,N.style,U),$&8){const _e=ee.dynamicProps;for(let ue=0;ue<_e.length;ue++){const De=_e[ue],qe=H[De],Qe=N[De];(Qe!==qe||De==="value")&&s(R,De,qe,Qe,U,z.children,we,se,Te)}}$&1&&z.children!==ee.children&&c(R,ee.children)}else!re&&A==null&&ne(R,ee,H,N,we,se,U);((Y=N.onVnodeUpdated)||V)&&as(()=>{Y&&Po(Y,we,ee,z),V&&jc(ee,z,we,"updated")},se)},K=(z,ee,we,se,U,oe,re)=>{for(let R=0;R<ee.length;R++){const $=z[R],A=ee[R],V=$.el&&($.type===Xr||!Wc($,A)||$.shapeFlag&70)?p($.el):we;v($,A,V,null,se,U,oe,re,!0)}},ne=(z,ee,we,se,U,oe,re)=>{if(we!==se){for(const R in se){if(fg(R))continue;const $=se[R],A=we[R];$!==A&&R!=="value"&&s(z,R,A,$,re,ee.children,U,oe,Te)}if(we!==kr)for(const R in we)!fg(R)&&!(R in se)&&s(z,R,we[R],null,re,ee.children,U,oe,Te);"value"in se&&s(z,"value",we.value,se.value)}},ye=(z,ee,we,se,U,oe,re,R,$)=>{const A=ee.el=z?z.el:a(""),V=ee.anchor=z?z.anchor:a("");let{patchFlag:H,dynamicChildren:N,slotScopeIds:Y}=ee;kf&&(H=0,$=!1,N=null),Y&&(R=R?R.concat(Y):Y),z==null?(i(A,we,se),i(V,we,se),G(ee.children,we,V,U,oe,re,R,$)):H>0&&H&64&&N&&z.dynamicChildren?(K(z.dynamicChildren,N,we,U,oe,re,R),U&&U.type.__hmrId?M2(z,ee):(ee.key!=null||U&&ee===U.subTree)&&M2(z,ee,!0)):q(z,ee,we,V,U,oe,re,R,$)},y=(z,ee,we,se,U,oe,re,R,$)=>{ee.slotScopeIds=R,z==null?ee.shapeFlag&512?U.ctx.activate(ee,we,se,re,$):C(ee,we,se,U,oe,re,$):L(z,ee,$)},C=(z,ee,we,se,U,oe,re)=>{const R=z.component=lle(z,se,U);if(R.type.__hmrId&&EUe(R),w2(z),rp(R,"mount"),jb(z)&&(R.ctx.renderer=X),rp(R,"init"),cle(R),ip(R,"init"),R.asyncDep){if(U&&U.registerDep(R,F),!z.el){const $=R.subTree=ar(Tn);E(null,$,ee,we)}return}F(R,z,ee,we,U,oe,re),_2(),ip(R,"mount")},L=(z,ee,we)=>{const se=ee.component=z.component;if(FUe(z,ee,we))if(se.asyncDep&&!se.asyncResolved){w2(ee),ae(se,ee,we),_2();return}else se.next=ee,xUe(se.update),se.update();else ee.component=z.component,ee.el=z.el,se.vnode=ee},F=(z,ee,we,se,U,oe,re)=>{const R=()=>{if(z.isMounted){let{next:V,bu:H,u:N,parent:Y,vnode:be}=z,_e=V,ue;w2(V||z.vnode),Am(z,!1),V?(V.el=be.el,ae(z,V,re)):V=be,H&&of(H),(ue=V.props&&V.props.onVnodeBeforeUpdate)&&Po(ue,Y,V,be),Am(z,!0),rp(z,"render");const De=$5(z);ip(z,"render");const qe=z.subTree;z.subTree=De,rp(z,"patch"),v(qe,De,p(qe.el),Se(qe),z,U,oe),ip(z,"patch"),V.el=De.el,_e===null&&wF(z,De.el),N&&as(N,U),(ue=V.props&&V.props.onVnodeUpdated)&&as(()=>Po(ue,Y,V,be),U),Aae(z),_2()}else{let V;const{el:H,props:N}=ee,{bm:Y,m:be,parent:_e}=z,ue=$x(ee);if(Am(z,!1),Y&&of(Y),!ue&&(V=N&&N.onVnodeBeforeMount)&&Po(V,_e,ee),Am(z,!0),H&&le){const De=()=>{rp(z,"render"),z.subTree=$5(z),ip(z,"render"),rp(z,"hydrate"),le(H,z.subTree,z,U,null),ip(z,"hydrate")};ue?ee.type.__asyncLoader().then(()=>!z.isUnmounted&&De()):De()}else{rp(z,"render");const De=z.subTree=$5(z);ip(z,"render"),rp(z,"patch"),v(null,De,we,se,z,U,oe),ip(z,"patch"),ee.el=De.el}if(be&&as(be,U),!ue&&(V=N&&N.onVnodeMounted)){const De=ee;as(()=>Po(V,_e,De),U)}ee.shapeFlag&256&&z.a&&as(z.a,U),z.isMounted=!0,GP(z),ee=we=se=null}},$=z.effect=new Fb(R,()=>gA(z.update),z.scope),A=z.update=$.run.bind($);A.id=z.uid,Am(z,!0),$.onTrack=z.rtc?V=>of(z.rtc,V):void 0,$.onTrigger=z.rtg?V=>of(z.rtg,V):void 0,A.ownerInstance=z,A()},ae=(z,ee,we)=>{ee.component=z;const se=z.vnode.props;z.vnode=ee,z.next=null,rVe(z,ee.props,se,we),cVe(z,ee.children,we),o0(),mF(void 0,z.update),a0()},q=(z,ee,we,se,U,oe,re,R,$=!1)=>{const A=z&&z.children,V=z?z.shapeFlag:0,H=ee.children,{patchFlag:N,shapeFlag:Y}=ee;if(N>0){if(N&128){te(A,H,we,se,U,oe,re,R,$);return}else if(N&256){fe(A,H,we,se,U,oe,re,R,$);return}}Y&8?(V&16&&Te(A,U,oe),H!==A&&c(we,H)):V&16?Y&16?te(A,H,we,se,U,oe,re,R,$):Te(A,U,oe,!0):(V&8&&c(we,""),Y&16&&G(H,we,se,U,oe,re,R,$))},fe=(z,ee,we,se,U,oe,re,R,$)=>{z=z||lv,ee=ee||lv;const A=z.length,V=ee.length,H=Math.min(A,V);let N;for(N=0;N<H;N++){const Y=ee[N]=$?rf(ee[N]):Uo(ee[N]);v(z[N],Y,we,null,U,oe,re,R,$)}A>V?Te(z,U,oe,!0,!1,H):G(ee,we,se,U,oe,re,R,$,H)},te=(z,ee,we,se,U,oe,re,R,$)=>{let A=0;const V=ee.length;let H=z.length-1,N=V-1;for(;A<=H&&A<=N;){const Y=z[A],be=ee[A]=$?rf(ee[A]):Uo(ee[A]);if(Wc(Y,be))v(Y,be,we,null,U,oe,re,R,$);else break;A++}for(;A<=H&&A<=N;){const Y=z[H],be=ee[N]=$?rf(ee[N]):Uo(ee[N]);if(Wc(Y,be))v(Y,be,we,null,U,oe,re,R,$);else break;H--,N--}if(A>H){if(A<=N){const Y=N+1,be=Y<V?ee[Y].el:se;for(;A<=N;)v(null,ee[A]=$?rf(ee[A]):Uo(ee[A]),we,be,U,oe,re,R,$),A++}}else if(A>N)for(;A<=H;)ve(z[A],U,oe,!0),A++;else{const Y=A,be=A,_e=new Map;for(A=be;A<=N;A++){const ze=ee[A]=$?rf(ee[A]):Uo(ee[A]);ze.key!=null&&(_e.has(ze.key)&&Xe("Duplicate keys found during update:",JSON.stringify(ze.key),"Make sure keys are unique."),_e.set(ze.key,A))}let ue,De=0;const qe=N-be+1;let Qe=!1,Ve=0;const xe=new Array(qe);for(A=0;A<qe;A++)xe[A]=0;for(A=Y;A<=H;A++){const ze=z[A];if(De>=qe){ve(ze,U,oe,!0);continue}let rt;if(ze.key!=null)rt=_e.get(ze.key);else for(ue=be;ue<=N;ue++)if(xe[ue-be]===0&&Wc(ze,ee[ue])){rt=ue;break}rt===void 0?ve(ze,U,oe,!0):(xe[rt-be]=A+1,rt>=Ve?Ve=rt:Qe=!0,v(ze,ee[rt],we,null,U,oe,re,R,$),De++)}const Oe=Qe?mVe(xe):lv;for(ue=Oe.length-1,A=qe-1;A>=0;A--){const ze=be+A,rt=ee[ze],ht=ze+1<V?ee[ze+1].el:se;xe[A]===0?v(null,rt,we,ht,U,oe,re,R,$):Qe&&(ue<0||A!==Oe[ue]?ge(rt,we,ht,2):ue--)}}},ge=(z,ee,we,se,U=null)=>{const{el:oe,type:re,transition:R,children:$,shapeFlag:A}=z;if(A&6){ge(z.component.subTree,ee,we,se);return}if(A&128){z.suspense.move(ee,we,se);return}if(A&64){re.move(z,ee,we,X);return}if(re===Xr){i(oe,ee,we);for(let H=0;H<$.length;H++)ge($[H],ee,we,se);i(z.anchor,ee,we);return}if(re===xp){T(z,ee,we);return}if(se!==2&&A&1&&R)if(se===0)R.beforeEnter(oe),i(oe,ee,we),as(()=>R.enter(oe),U);else{const{leave:H,delayLeave:N,afterLeave:Y}=R,be=()=>i(oe,ee,we),_e=()=>{H(oe,()=>{be(),Y&&Y()})};N?N(oe,be,_e):_e()}else i(oe,ee,we)},ve=(z,ee,we,se=!1,U=!1)=>{const{type:oe,props:re,ref:R,children:$,dynamicChildren:A,shapeFlag:V,patchFlag:H,dirs:N}=z;if(R!=null&&fT(R,null,we,z,!0),V&256){ee.ctx.deactivate(z);return}const Y=V&1&&N,be=!$x(z);let _e;if(be&&(_e=re&&re.onVnodeBeforeUnmount)&&Po(_e,ee,z),V&6)ke(z.component,we,se);else{if(V&128){z.suspense.unmount(we,se);return}Y&&jc(z,null,ee,"beforeUnmount"),V&64?z.type.remove(z,ee,we,U,X,se):A&&(oe!==Xr||H>0&&H&64)?Te(A,ee,we,!1,!0):(oe===Xr&&H&384||!U&&V&16)&&Te($,ee,we),se&&Ee(z)}(be&&(_e=re&&re.onVnodeUnmounted)||Y)&&as(()=>{_e&&Po(_e,ee,z),Y&&jc(z,null,ee,"unmounted")},we)},Ee=z=>{const{type:ee,el:we,anchor:se,transition:U}=z;if(ee===Xr){Ie(we,se);return}if(ee===xp){M(z);return}const oe=()=>{n(we),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(z.shapeFlag&1&&U&&!U.persisted){const{leave:re,delayLeave:R}=U,$=()=>re(we,oe);R?R(z.el,oe,$):$()}else oe()},Ie=(z,ee)=>{let we;for(;z!==ee;)we=d(z),n(z),z=we;n(ee)},ke=(z,ee,we)=>{z.type.__hmrId&&MUe(z);const{bum:se,scope:U,update:oe,subTree:re,um:R}=z;se&&of(se),U.stop(),oe&&(oe.active=!1,ve(re,z,ee,we)),R&&as(R,ee),as(()=>{z.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve()),CUe(z)},Te=(z,ee,we,se=!1,U=!1,oe=0)=>{for(let re=oe;re<z.length;re++)ve(z[re],ee,we,se,U)},Se=z=>z.shapeFlag&6?Se(z.component.subTree):z.shapeFlag&128?z.suspense.next():d(z.anchor||z.el),Ae=(z,ee,we)=>{z==null?ee._vnode&&ve(ee._vnode,null,null,!0):v(ee._vnode||null,z,ee,null,null,null,we),hT(),ee._vnode=z},X={p:v,um:ve,m:ge,r:Ee,mt:C,mc:G,pc:q,pbc:K,n:Se,o:e};let Z,le;return t&&([Z,le]=t(X)),{render:Ae,hydrate:Z,createApp:pVe(Ae,Z)}}function Am({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function M2(e,t,r=!1){const i=e.children,n=t.children;if($t(i)&&$t(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=rf(n[s]),a.el=o.el),r||M2(o,a)),a.type===Tn&&!a.el&&(a.el=o.el)}}function mVe(e){const t=e.slice(),r=[0];let i,n,s,o,a;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<u?s=a+1:o=a;u<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}const yVe=e=>e.__isTeleport,cv=e=>e&&(e.disabled||e.disabled===""),VH=e=>typeof SVGElement<"u"&&e instanceof SVGElement,KP=(e,t)=>{const r=e&&e.to;if(lr(r))if(t){const i=t(r);return i||Xe(`Failed to locate Teleport target with selector "${r}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),i}else return Xe("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return!r&&!cv(e)&&Xe(`Invalid Teleport target: ${r}`),r},gVe={__isTeleport:!0,process(e,t,r,i,n,s,o,a,l,u){const{mc:c,pc:p,pbc:d,o:{insert:m,querySelector:g,createText:b,createComment:v}}=u,_=cv(t.props);let{shapeFlag:E,children:I,dynamicChildren:x}=t;if(kf&&(l=!1,x=null),e==null){const T=t.el=v("teleport start"),M=t.anchor=v("teleport end");m(T,r,i),m(M,r,i);const k=t.target=KP(t.props,g),D=t.targetAnchor=b("");k?(m(D,k),o=o||VH(k)):_||Xe("Invalid Teleport target on mount:",k,`(${typeof k})`);const B=(G,W)=>{E&16&&c(I,G,W,n,s,o,a,l)};_?B(r,M):k&&B(k,D)}else{t.el=e.el;const T=t.anchor=e.anchor,M=t.target=e.target,k=t.targetAnchor=e.targetAnchor,D=cv(e.props),B=D?r:M,G=D?T:k;if(o=o||VH(M),x?(d(e.dynamicChildren,x,B,n,s,o,a),M2(e,t,!0)):l||p(e,t,B,G,n,s,o,a,!1),_)D||FE(t,r,T,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const W=t.target=KP(t.props,g);W?FE(t,W,null,u,0):Xe("Invalid Teleport target on update:",M,`(${typeof M})`)}else D&&FE(t,M,k,u,1)}},remove(e,t,r,i,{um:n,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:p,props:d}=e;if(p&&s(c),(o||!cv(d))&&(s(u),a&16))for(let m=0;m<l.length;m++){const g=l[m];n(g,t,r,!0,!!g.dynamicChildren)}},move:FE,hydrate:vVe};function FE(e,t,r,{o:{insert:i},m:n},s=2){s===0&&i(e.targetAnchor,t,r);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=e,p=s===2;if(p&&i(o,t,r),(!p||cv(c))&&l&16)for(let d=0;d<u.length;d++)n(u[d],t,r,2);p&&i(a,t,r)}function vVe(e,t,r,i,n,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=t.target=KP(t.props,l);if(c){const p=c._lpa||c.firstChild;t.shapeFlag&16&&(cv(t.props)?(t.anchor=u(o(e),t,a(e),r,i,n,s),t.targetAnchor=p):(t.anchor=o(e),t.targetAnchor=u(p,t,c,r,i,n,s)),c._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Qae=gVe,mT="components",bVe="directives";function Lr(e,t){return NF(mT,e,!0,t)||e}const Xae=Symbol();function LF(e){return lr(e)?NF(mT,e,!1)||e:e||Xae}function ci(e){return NF(bVe,e)}function NF(e,t,r=!0,i=!1){const n=js||Sn;if(n){const s=n.type;if(e===mT){const a=Cx(s);if(a&&(a===t||a===gs(t)||a===Ju(gs(t))))return s}const o=BH(n[e]||s[e],t)||BH(n.appContext[e],t);if(!o&&i)return s;if(r&&!o){const a=e===mT?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";Xe(`Failed to resolve ${e.slice(0,-1)}: ${t}${a}`)}return o}else Xe(`resolve${Ju(e.slice(0,-1))} can only be used in render() or setup().`)}function BH(e,t){return e&&(e[t]||e[gs(t)]||e[Ju(gs(t))])}const Xr=Symbol("Fragment"),dh=Symbol("Text"),Tn=Symbol("Comment"),xp=Symbol("Static"),I2=[];let ih=null;function pt(e=!1){I2.push(ih=e?null:[])}function ele(){I2.pop(),ih=I2[I2.length-1]||null}let Nv=1;function yT(e){Nv+=e}function tle(e){return e.dynamicChildren=Nv>0?ih||lv:null,ele(),Nv>0&&ih&&ih.push(e),e}function Ct(e,t,r,i,n,s){return tle(ut(e,t,r,i,n,s,!0))}function Vi(e,t,r,i,n){return tle(ar(e,t,r,i,n,!0))}function Zu(e){return e?e.__v_isVNode===!0:!1}function Wc(e,t){return t.shapeFlag&6&&T1.has(t.type)?!1:e.type===t.type&&e.key===t.key}let YP;function rle(e){YP=e}const wVe=(...e)=>_Ve(...YP?YP(e,js):e),EA="__vInternal",ile=({key:e})=>e??null,C5=({ref:e,ref_key:t,ref_for:r})=>e!=null?lr(e)||ai(e)||Zt(e)?{i:js,r:e,k:t,f:!!r}:e:null;function ut(e,t=null,r=null,i=0,n=null,s=e===Xr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ile(t),ref:t&&C5(t),scopeId:bA,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return a?(jF(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=lr(r)?8:16),l.key!==l.key&&Xe("VNode created with invalid key (NaN). VNode type:",l.type),Nv>0&&!o&&ih&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ih.push(l),l}const ar=wVe;function _Ve(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===Xae)&&(e||Xe(`Invalid vnode type when creating vnode: ${e}.`),e=Tn),Zu(e)){const a=Ku(e,t,!0);return r&&jF(a,r),a}if(dle(e)&&(e=e.__vccOpts),t){t=DF(t);let{class:a,style:l}=t;a&&!lr(a)&&(t.class=In(a)),ri(l)&&(Lv(l)&&!$t(l)&&(l=Or({},l)),t.style=pm(l))}const o=lr(e)?1:jUe(e)?128:yVe(e)?64:ri(e)?4:Zt(e)?2:0;return o&4&&Lv(e)&&(e=Bt(e),Xe("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),ut(e,t,r,i,n,o,s,!0)}function DF(e){return e?Lv(e)||EA in e?Or({},e):e:null}function Ku(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:o}=e,a=t?MA(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ile(a),ref:t&&t.ref?r&&n?$t(n)?n.concat(C5(t)):[n,C5(t)]:C5(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s===-1&&$t(o)?o.map(nle):o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Xr?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ku(e.ssContent),ssFallback:e.ssFallback&&Ku(e.ssFallback),el:e.el,anchor:e.anchor}}function nle(e){const t=Ku(e);return $t(e.children)&&(t.children=e.children.map(nle)),t}function Sp(e=" ",t=0){return ar(dh,null,e,t)}function FF(e,t){const r=ar(xp,null,e);return r.staticCount=t,r}function Tr(e="",t=!1){return t?(pt(),Vi(Tn,null,e)):ar(Tn,null,e)}function Uo(e){return e==null||typeof e=="boolean"?ar(Tn):$t(e)?ar(Xr,null,e.slice()):typeof e=="object"?rf(e):ar(dh,null,String(e))}function rf(e){return e.el===null||e.memo?e:Ku(e)}function jF(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if($t(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),jF(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(EA in t)?t._ctx=js:n===3&&js&&(js.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Zt(t)?(t={default:t,_ctx:js},r=32):(t=String(t),i&64?(r=16,t=[Sp(t)]):r=8);e.children=t,e.shapeFlag|=r}function MA(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=In([t.class,i.class]));else if(n==="style")t.style=pm([t.style,i.style]);else if(Lp(n)){const s=t[n],o=i[n];o&&s!==o&&!($t(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=i[n])}return t}function Po(e,t,r,i=null){Ko(e,t,7,[r,i])}function u0(e,t,r,i){let n;const s=r&&r[i];if($t(e)||lr(e)){n=new Array(e.length);for(let o=0,a=e.length;o<a;o++)n[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){if(!Number.isInteger(e))return Xe(`The v-for range expect an integer value but got ${e}.`),[];n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s&&s[o])}else if(ri(e))if(e[Symbol.iterator])n=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];n[a]=t(e[u],u,a,s&&s[a])}}else n=[];return r&&(r[i]=n),n}function sle(e,t){for(let r=0;r<t.length;r++){const i=t[r];if($t(i))for(let n=0;n<i.length;n++)e[i[n].name]=i[n].fn;else i&&(e[i.name]=i.fn)}return e}function Pu(e,t,r={},i,n){if(js.isCE)return ar("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s.length>1&&(Xe("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),s=()=>[]),s&&s._c&&(s._d=!1),pt();const o=s&&ole(s(r)),a=Vi(Xr,{key:r.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function ole(e){return e.some(t=>Zu(t)?!(t.type===Tn||t.type===Xr&&!ole(t.children)):!0)?e:null}function ale(e){const t={};if(!ri(e))return Xe("v-on with no argument expects an object value."),t;for(const r in e)t[Iu(r)]=e[r];return t}const QP=e=>e?ule(e)?VF(e)||e.proxy:QP(e.parent):null,Dv=Or(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>gf(e.props),$attrs:e=>gf(e.attrs),$slots:e=>gf(e.slots),$refs:e=>gf(e.refs),$parent:e=>QP(e.parent),$root:e=>QP(e.root),$emit:e=>e.emit,$options:e=>Vae(e),$forceUpdate:e=>()=>gA(e.update),$nextTick:e=>OS.bind(e.proxy),$watch:e=>qUe.bind(e)}),T2={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:l}=e;if(t==="__isVue")return!0;if(i!==kr&&i.__isScriptSetup&&Mr(i,t))return i[t];let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(i!==kr&&Mr(i,t))return o[t]=1,i[t];if(n!==kr&&Mr(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&Mr(u,t))return o[t]=3,s[t];if(r!==kr&&Mr(r,t))return o[t]=4,r[t];HP&&(o[t]=0)}}const c=Dv[t];let p,d;if(c)return t==="$attrs"&&(Xa(e,"get",t),pT()),c(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(r!==kr&&Mr(r,t))return o[t]=4,r[t];if(d=l.config.globalProperties,Mr(d,t))return d[t];js&&(!lr(t)||t.indexOf("__v")!==0)&&(n!==kr&&(t[0]==="$"||t[0]==="_")&&Mr(n,t)?Xe(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===js&&Xe(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return n!==kr&&Mr(n,t)?(n[t]=r,!0):i!==kr&&Mr(i,t)?(i[t]=r,!0):Mr(e.props,t)?(Xe(`Attempting to mutate prop "${t}". Props are readonly.`,e),!1):t[0]==="$"&&t.slice(1)in e?(Xe(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`,e),!1):(t in e.appContext.config.globalProperties?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,value:r}):s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!r[o]||e!==kr&&Mr(e,o)||t!==kr&&Mr(t,o)||(a=s[0])&&Mr(a,o)||Mr(i,o)||Mr(Dv,o)||Mr(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?this.set(e,t,r.get(),null):r.value!=null&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};T2.ownKeys=e=>(Xe("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e));const xVe=Or({},T2,{get(e,t){if(t!==Symbol.unscopables)return T2.get(e,t,e)},has(e,t){const r=t[0]!=="_"&&!xje(t);return!r&&T2.has(e,t)&&Xe(`Property ${JSON.stringify(t)} should not start with _ which is a reserved prefix for Vue internals.`),r}});function SVe(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(Dv).forEach(r=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:()=>Dv[r](e),set:ps})}),t}function EVe(e){const{ctx:t,propsOptions:[r]}=e;r&&Object.keys(r).forEach(i=>{Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>e.props[i],set:ps})})}function MVe(e){const{ctx:t,setupState:r}=e;Object.keys(Bt(r)).forEach(i=>{if(!r.__isScriptSetup){if(i[0]==="$"||i[0]==="_"){Xe(`setup() return property ${JSON.stringify(i)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r[i],set:ps})}})}const IVe=Zae();let TVe=0;function lle(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||IVe,s={uid:TVe++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new lA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zae(i,n),emitsOptions:Cae(i,n),emit:null,emitted:null,propsDefaults:kr,inheritAttrs:i.inheritAttrs,ctx:kr,data:kr,props:kr,attrs:kr,slots:kr,refs:kr,setupState:kr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx=SVe(s),s.root=t?t.root:s,s.emit=PUe.bind(null,s),e.ce&&e.ce(s),s}let Sn=null;const xo=()=>Sn||js,em=e=>{Sn=e,e.scope.on()},Of=()=>{Sn&&Sn.scope.off(),Sn=null},AVe=Ws("slot,component");function XP(e,t){const r=t.isNativeTag||b2;(AVe(e)||r(e))&&Xe("Do not use built-in or reserved HTML elements as component id: "+e)}function ule(e){return e.vnode.shapeFlag&4}let Fv=!1;function cle(e,t=!1){Fv=t;const{props:r,children:i}=e.vnode,n=ule(e);tVe(e,r,n,t),uVe(e,i);const s=n?$Ve(e,t):void 0;return Fv=!1,s}function $Ve(e,t){const r=e.type;{if(r.name&&XP(r.name,e.appContext.config),r.components){const n=Object.keys(r.components);for(let s=0;s<n.length;s++)XP(n[s],e.appContext.config)}if(r.directives){const n=Object.keys(r.directives);for(let s=0;s<n.length;s++)Jae(n[s])}r.compilerOptions&&IA()&&Xe('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=vs(new Proxy(e.ctx,T2)),EVe(e);const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?ple(e):null;em(e),o0();const s=Vu(i,e,0,[gf(e.props),n]);if(a0(),Of(),sA(s)){if(s.then(Of,Of),t)return s.then(o=>{eL(e,o,t)}).catch(o=>{dm(o,e,0)});e.asyncDep=s}else eL(e,s,t)}else hle(e,t)}function eL(e,t,r){Zt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ri(t)?(Zu(t)&&Xe("setup() should not return VNodes directly - return a render function instead."),e.devtoolsRawSetupState=t,e.setupState=yA(t),MVe(e)):t!==void 0&&Xe(`setup() should return an object. Received: ${t===null?"null":typeof t}`),hle(e,r)}let A2,tL;function UF(e){A2=e,tL=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,xVe))}}const IA=()=>!A2;function hle(e,t,r){const i=e.type;if(!e.render){if(!t&&A2&&!i.render){const n=i.template;if(n){rp(e,"compile");const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Or(Or({isCustomElement:s,delimiters:a},o),l);i.render=A2(n,u),ip(e,"compile")}}e.render=i.render||ps,tL&&tL(e)}em(e),o0(),KUe(e),a0(),Of(),!i.render&&e.render===ps&&!t&&(!A2&&i.template?Xe('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):Xe("Component is missing template or render function."))}function CVe(e){return new Proxy(e.attrs,{get(t,r){return pT(),Xa(e,"get","$attrs"),t[r]},set(){return Xe("setupContext.attrs is readonly."),!1},deleteProperty(){return Xe("setupContext.attrs is readonly."),!1}})}function ple(e){const t=i=>{e.exposed&&Xe("expose() should be called only once per setup()."),e.exposed=i||{}};let r;return Object.freeze({get attrs(){return r||(r=CVe(e))},get slots(){return gf(e.slots)},get emit(){return(i,...n)=>e.emit(i,...n)},expose:t})}function VF(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(yA(vs(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Dv)return Dv[r](e)}}))}const kVe=/(?:^|[-_])(\w)/g,OVe=e=>e.replace(kVe,t=>t.toUpperCase()).replace(/[-_]/g,"");function Cx(e){return Zt(e)&&e.displayName||e.name}function TA(e,t,r=!1){let i=Cx(t);if(!i&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(i=n[1])}if(!i&&e&&e.parent){const n=s=>{for(const o in s)if(s[o]===t)return o};i=n(e.components||e.parent.type.components)||n(e.appContext.components)}return i?OVe(i):r?"App":"Anonymous"}function dle(e){return Zt(e)&&"__vccOpts"in e}const $u=(e,t)=>fUe(e,t,Fv),AA=e=>Xe(`${e}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`);function fle(){return AA("defineProps"),null}function mle(){return AA("defineEmits"),null}function yle(e){AA("defineExpose")}function gle(e,t){return AA("withDefaults"),null}function vle(){return wle().slots}function ble(){return wle().attrs}function wle(){const e=xo();return e||Xe("useContext() called without active instance."),e.setupContext||(e.setupContext=ple(e))}function _le(e,t){const r=$t(e)?e.reduce((i,n)=>(i[n]={},i),{}):e;for(const i in t){const n=r[i];n?$t(n)||Zt(n)?r[i]={type:n,default:t[i]}:n.default=t[i]:n===null?r[i]={default:t[i]}:Xe(`props default key "${i}" has no corresponding declaration.`)}return r}function xle(e,t){const r={};for(const i in e)t.includes(i)||Object.defineProperty(r,i,{enumerable:!0,get:()=>e[i]});return r}function Sle(e){const t=xo();t||Xe("withAsyncContext called without active current instance. This is likely a bug.");let r=e();return Of(),sA(r)&&(r=r.catch(i=>{throw em(t),i})),[r,()=>em(t)]}function Qo(e,t,r){const i=arguments.length;return i===2?ri(t)&&!$t(t)?Zu(t)?ar(e,null,[t]):ar(e,t):ar(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Zu(r)&&(r=[r]),ar(e,t,r))}const BF=Symbol("ssrContext"),Ele=()=>{{const e=gg(BF);return e||Xe("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function bk(e){return!!(e&&e.__v_isShallow)}function zF(){if(typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#0b1bc9"},r={style:"color:#b62e24"},i={style:"color:#9d288c"},n={header(p){return ri(p)?p.__isVue?["div",e,"VueInstance"]:ai(p)?["div",{},["span",e,c(p)],"<",a(p.value),">"]:Uu(p)?["div",{},["span",e,bk(p)?"ShallowReactive":"Reactive"],"<",a(p),`>${Dp(p)?" (readonly)":""}`]:Dp(p)?["div",{},["span",e,bk(p)?"ShallowReadonly":"Readonly"],"<",a(p),">"]:null:null},hasBody(p){return p&&p.__isVue},body(p){if(p&&p.__isVue)return["div",{},...s(p.$)]}};function s(p){const d=[];p.type.props&&p.props&&d.push(o("props",Bt(p.props))),p.setupState!==kr&&d.push(o("setup",p.setupState)),p.data!==kr&&d.push(o("data",Bt(p.data)));const m=l(p,"computed");m&&d.push(o("computed",m));const g=l(p,"inject");return g&&d.push(o("injected",g)),d.push(["div",{},["span",{style:i.style+";opacity:0.66"},"$ (internal): "],["object",{object:p}]]),d}function o(p,d){return d=Or({},d),Object.keys(d).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},p],["div",{style:"padding-left:1.25em"},...Object.keys(d).map(m=>["div",{},["span",i,m+": "],a(d[m],!1)])]]:["span",{}]}function a(p,d=!0){return typeof p=="number"?["span",t,p]:typeof p=="string"?["span",r,JSON.stringify(p)]:typeof p=="boolean"?["span",i,p]:ri(p)?["object",{object:d?Bt(p):p}]:["span",r,String(p)]}function l(p,d){const m=p.type;if(Zt(m))return;const g={};for(const b in p.ctx)u(m,b,d)&&(g[b]=p.ctx[b]);return g}function u(p,d,m){const g=p[m];if($t(g)&&g.includes(d)||ri(g)&&d in g||p.extends&&u(p.extends,d,m)||p.mixins&&p.mixins.some(b=>u(b,d,m)))return!0}function c(p){return bk(p)?"ShallowRef":p.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(n):window.devtoolsFormatters=[n]}function Mle(e,t,r,i){const n=r[i];if(n&&GF(n,e))return n;const s=t();return s.memo=e.slice(),r[i]=s}function GF(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==t[i])return!1;return Nv>0&&ih&&ih.push(e),!0}const gT="3.2.31",RVe={createComponentInstance:lle,setupComponent:cle,renderComponentRoot:$5,setCurrentRenderingInstance:Tx,isVNode:Zu,normalizeVNode:Uo},Ile=RVe,Tle=null,Ale=null,PVe="http://www.w3.org/2000/svg",Py=typeof document<"u"?document:null,zH=Py&&Py.createElement("template"),LVe={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?Py.createElementNS(PVe,e):Py.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Py.createTextNode(e),createComment:e=>Py.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Py.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,i,n,s){const o=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{zH.innerHTML=i?`<svg>${e}</svg>`:e;const a=zH.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function NVe(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function DVe(e,t,r){const i=e.style,n=lr(r);if(r&&!n){for(const s in r)rL(i,s,r[s]);if(t&&!lr(t))for(const s in t)r[s]==null&&rL(i,s,"")}else{const s=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const GH=/\s*!important$/;function rL(e,t,r){if($t(r))r.forEach(i=>rL(e,t,i));else if(t.startsWith("--"))e.setProperty(t,r);else{const i=FVe(e,t);GH.test(r)?e.setProperty(Wa(i),r.replace(GH,""),"important"):e[i]=r}}const qH=["Webkit","Moz","ms"],wk={};function FVe(e,t){const r=wk[t];if(r)return r;let i=gs(t);if(i!=="filter"&&i in e)return wk[t]=i;i=Ju(i);for(let n=0;n<qH.length;n++){const s=qH[n]+i;if(s in e)return wk[t]=s}return t}const HH="http://www.w3.org/1999/xlink";function jVe(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(HH,t.slice(6,t.length)):e.setAttributeNS(HH,t,r);else{const s=Mje(t);r==null||s&&!Voe(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function UVe(e,t,r,i,n,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,n,s),e[t]=r??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const a=r??"";(e.value!==a||e.tagName==="OPTION")&&(e.value=a),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const a=typeof e[t];if(a==="boolean"){e[t]=Voe(r);return}else if(r==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch(a){Xe(`Failed setting prop "${t}" on <${e.tagName.toLowerCase()}>: value ${r} is invalid.`,a)}}let vT=Date.now,$le=!1;if(typeof window<"u"){vT()>document.createEvent("Event").timeStamp&&(vT=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);$le=!!(e&&Number(e[1])<=53)}let iL=0;const VVe=Promise.resolve(),BVe=()=>{iL=0},zVe=()=>iL||(VVe.then(BVe),iL=vT());function yp(e,t,r,i){e.addEventListener(t,r,i)}function GVe(e,t,r,i){e.removeEventListener(t,r,i)}function qVe(e,t,r,i,n=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=HVe(t);if(i){const u=s[t]=WVe(i,n);yp(e,a,u,l)}else o&&(GVe(e,a,o,l),s[t]=void 0)}}const WH=/(?:Once|Passive|Capture)$/;function HVe(e){let t;if(WH.test(e)){t={};let r;for(;r=e.match(WH);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[Wa(e.slice(2)),t]}function WVe(e,t){const r=i=>{const n=i.timeStamp||vT();($le||n>=r.attached-1)&&Ko(JVe(i,r.value),t,5,[i])};return r.value=e,r.attached=zVe(),r}function JVe(e,t){if($t(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const JH=/^on[a-z]/,ZVe=(e,t,r,i,n=!1,s,o,a,l)=>{t==="class"?NVe(e,i,n):t==="style"?DVe(e,r,i):Lp(t)?lT(t)||qVe(e,t,r,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):KVe(e,t,i,n))?UVe(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),jVe(e,t,i,n))};function KVe(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&JH.test(t)&&Zt(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||JH.test(t)&&lr(r)?!1:t in e}function qF(e,t){const r=Ar(e);class i extends jS{constructor(s){super(r,s,t)}}return i.def=r,i}const Cle=e=>qF(e,ZF),YVe=typeof HTMLElement<"u"?HTMLElement:class{};class jS extends YVe{constructor(t,r={},i){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):(this.shadowRoot&&Xe("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}))}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,OS(()=>{this._connected||(Ep(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const n of i)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=i=>{const{props:n,styles:s}=i,o=!$t(n),a=n?o?Object.keys(n):n:[];let l;if(o)for(const u in this._props){const c=n[u];(c===Number||c&&c.type===Number)&&(this._props[u]=Yf(this._props[u]),(l||(l=Object.create(null)))[u]=!0)}this._numberProps=l;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of a.map(gs))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(c){this._setProp(u,c)}});this._applyStyles(s),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=Yf(r)),this._setProp(gs(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,i=!0,n=!0){r!==this._props[t]&&(this._props[t]=r,n&&this._instance&&this._update(),i&&(r===!0?this.setAttribute(Wa(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(Wa(t),r+""):r||this.removeAttribute(Wa(t))))}_update(){Ep(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ar(this._def,Or({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.ceReload=n=>{this._styles&&(this._styles.forEach(s=>this.shadowRoot.removeChild(s)),this._styles.length=0),this._applyStyles(n),this._def.__asyncLoader||(this._instance=null,this._update())},r.emit=(n,...s)=>{this.dispatchEvent(new CustomEvent(n,{detail:s}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof jS){r.parent=i._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const i=document.createElement("style");i.textContent=r,this.shadowRoot.appendChild(i),(this._styles||(this._styles=[])).push(i)})}}function kle(e="$style"){{const t=xo();if(!t)return Xe("useCssModule must be called inside setup()"),kr;const r=t.type.__cssModules;if(!r)return Xe("Current instance does not have CSS modules injected."),kr;const i=r[e];return i||(Xe(`Current instance does not have CSS module named "${e}".`),kr)}}function Ole(e){const t=xo();if(!t){Xe("useCssVars is called without current active component instance.");return}const r=()=>nL(t.subTree,e(t.proxy));SF(r),bh(()=>{const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),l0(()=>i.disconnect())})}function nL(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{nL(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ZH(e.el,t);else if(e.type===Xr)e.children.forEach(r=>nL(r,t));else if(e.type===xp){let{el:r,anchor:i}=e;for(;r&&(ZH(r,t),r!==i);)r=r.nextSibling}}function ZH(e,t){if(e.nodeType===1){const r=e.style;for(const i in t)r.setProperty(`--${i}`,t[i])}}const yd="transition",$w="animation",US=(e,{slots:t})=>Qo(_A,Ple(e),t);US.displayName="Transition";const Rle={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},QVe=US.props=Or({},_A.props,Rle),$m=(e,t=[])=>{$t(e)?e.forEach(r=>r(...t)):e&&e(...t)},KH=e=>e?$t(e)?e.some(t=>t.length>1):e.length>1:!1;function Ple(e){const t={};for(const K in e)K in Rle||(t[K]=e[K]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:p=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,g=XVe(n),b=g&&g[0],v=g&&g[1],{onBeforeEnter:_,onEnter:E,onEnterCancelled:I,onLeave:x,onLeaveCancelled:T,onBeforeAppear:M=_,onAppear:k=E,onAppearCancelled:D=I}=t,B=(K,ne,ye)=>{by(K,ne?c:a),by(K,ne?u:o),ye&&ye()},G=(K,ne)=>{by(K,m),by(K,d),ne&&ne()},W=K=>(ne,ye)=>{const y=K?k:E,C=()=>B(ne,K,ye);$m(y,[ne,C]),YH(()=>{by(ne,K?l:s),np(ne,K?c:a),KH(y)||QH(ne,i,b,C)})};return Or(t,{onBeforeEnter(K){$m(_,[K]),np(K,s),np(K,o)},onBeforeAppear(K){$m(M,[K]),np(K,l),np(K,u)},onEnter:W(!1),onAppear:W(!0),onLeave(K,ne){const ye=()=>G(K,ne);np(K,p),Nle(),np(K,d),YH(()=>{by(K,p),np(K,m),KH(x)||QH(K,i,v,ye)}),$m(x,[K,ye])},onEnterCancelled(K){B(K,!1),$m(I,[K])},onAppearCancelled(K){B(K,!0),$m(D,[K])},onLeaveCancelled(K){G(K),$m(T,[K])}})}function XVe(e){if(e==null)return null;if(ri(e))return[_k(e.enter),_k(e.leave)];{const t=_k(e);return[t,t]}}function _k(e){const t=Yf(e);return eBe(t),t}function eBe(e){typeof e!="number"?Xe(`<transition> explicit duration is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&Xe("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function np(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function by(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function YH(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let tBe=0;function QH(e,t,r,i){const n=e._endId=++tBe,s=()=>{n===e._endId&&i()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:l}=Lle(e,t);if(!o)return i();const u=o+"end";let c=0;const p=()=>{e.removeEventListener(u,d),s()},d=m=>{m.target===e&&++c>=l&&p()};setTimeout(()=>{c<l&&p()},a+1),e.addEventListener(u,d)}function Lle(e,t){const r=window.getComputedStyle(e),i=g=>(r[g]||"").split(", "),n=i(yd+"Delay"),s=i(yd+"Duration"),o=XH(n,s),a=i($w+"Delay"),l=i($w+"Duration"),u=XH(a,l);let c=null,p=0,d=0;t===yd?o>0&&(c=yd,p=o,d=s.length):t===$w?u>0&&(c=$w,p=u,d=l.length):(p=Math.max(o,u),c=p>0?o>u?yd:$w:null,d=c?c===yd?s.length:l.length:0);const m=c===yd&&/\b(transform|all)(,|$)/.test(r[yd+"Property"]);return{type:c,timeout:p,propCount:d,hasTransform:m}}function XH(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>eW(r)+eW(e[i])))}function eW(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Nle(){return document.body.offsetHeight}const Dle=new WeakMap,Fle=new WeakMap,rBe={name:"TransitionGroup",props:Or({},QVe,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=xo(),i=wA();let n,s;return DS(()=>{if(!n.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!oBe(n[0].el,r.vnode.el,o))return;n.forEach(iBe),n.forEach(nBe);const a=n.filter(sBe);Nle(),a.forEach(l=>{const u=l.el,c=u.style;np(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const p=u._moveCb=d=>{d&&d.target!==u||(!d||/transform$/.test(d.propertyName))&&(u.removeEventListener("transitionend",p),u._moveCb=null,by(u,o))};u.addEventListener("transitionend",p)})}),()=>{const o=Bt(e),a=Ple(o);let l=o.tag||Xr;n=s,s=t.default?NS(t.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null?Xf(c,Fg(c,a,i,r)):Xe("<TransitionGroup> children must be keyed.")}if(n)for(let u=0;u<n.length;u++){const c=n[u];Xf(c,Fg(c,a,i,r)),Dle.set(c,c.el.getBoundingClientRect())}return ar(l,null,s)}}},HF=rBe;function iBe(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function nBe(e){Fle.set(e,e.el.getBoundingClientRect())}function sBe(e){const t=Dle.get(e),r=Fle.get(e),i=t.left-r.left,n=t.top-r.top;if(i||n){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${n}px)`,s.transitionDuration="0s",e}}function oBe(e,t,r){const i=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),r.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(i);const{hasTransform:s}=Lle(i);return n.removeChild(i),s}const tm=e=>{const t=e.props["onUpdate:modelValue"];return $t(t)?r=>of(t,r):t};function aBe(e){e.target.composing=!0}function tW(e){const t=e.target;t.composing&&(t.composing=!1,lBe(t,"input"))}function lBe(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}const kx={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e._assign=tm(n);const s=i||n.props&&n.props.type==="number";yp(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r?a=a.trim():s&&(a=Yf(a)),e._assign(a)}),r&&yp(e,"change",()=>{e.value=e.value.trim()}),t||(yp(e,"compositionstart",aBe),yp(e,"compositionend",tW),yp(e,"change",tW))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:i,number:n}},s){if(e._assign=tm(s),e.composing||document.activeElement===e&&(r||i&&e.value.trim()===t||(n||e.type==="number")&&Yf(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},$A={deep:!0,created(e,t,r){e._assign=tm(r),yp(e,"change",()=>{const i=e._modelValue,n=jv(e),s=e.checked,o=e._assign;if($t(i)){const a=nA(i,n),l=a!==-1;if(s&&!l)o(i.concat(n));else if(!s&&l){const u=[...i];u.splice(a,1),o(u)}}else if(s0(i)){const a=new Set(i);s?a.add(n):a.delete(n),o(a)}else o(jle(e,s))})},mounted:rW,beforeUpdate(e,t,r){e._assign=tm(r),rW(e,t,r)}};function rW(e,{value:t,oldValue:r},i){e._modelValue=t,$t(t)?e.checked=nA(t,i.props.value)>-1:s0(t)?e.checked=t.has(i.props.value):t!==r&&(e.checked=Kf(t,jle(e,!0)))}const CA={created(e,{value:t},r){e.checked=Kf(t,r.props.value),e._assign=tm(r),yp(e,"change",()=>{e._assign(jv(e))})},beforeUpdate(e,{value:t,oldValue:r},i){e._assign=tm(i),t!==r&&(e.checked=Kf(t,i.props.value))}},WF={deep:!0,created(e,{value:t,modifiers:{number:r}},i){const n=s0(t);yp(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>r?Yf(jv(o)):jv(o));e._assign(e.multiple?n?new Set(s):s:s[0])}),e._assign=tm(i)},mounted(e,{value:t}){iW(e,t)},beforeUpdate(e,t,r){e._assign=tm(r)},updated(e,{value:t}){iW(e,t)}};function iW(e,t){const r=e.multiple;if(r&&!$t(t)&&!s0(t)){Xe(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let i=0,n=e.options.length;i<n;i++){const s=e.options[i],o=jv(s);if(r)$t(t)?s.selected=nA(t,o)>-1:s.selected=t.has(o);else if(Kf(jv(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function jv(e){return"_value"in e?e._value:e.value}function jle(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const Ule={created(e,t,r){jE(e,t,r,null,"created")},mounted(e,t,r){jE(e,t,r,null,"mounted")},beforeUpdate(e,t,r,i){jE(e,t,r,i,"beforeUpdate")},updated(e,t,r,i){jE(e,t,r,i,"updated")}};function jE(e,t,r,i,n){let s;switch(e.tagName){case"SELECT":s=WF;break;case"TEXTAREA":s=kx;break;default:switch(r.props&&r.props.type){case"checkbox":s=$A;break;case"radio":s=CA;break;default:s=kx}}const o=s[n];o&&o(e,t,r,i)}function uBe(){kx.getSSRProps=({value:e})=>({value:e}),CA.getSSRProps=({value:e},t)=>{if(t.props&&Kf(t.props.value,e))return{checked:!0}},$A.getSSRProps=({value:e},t)=>{if($t(e)){if(t.props&&nA(e,t.props.value)>-1)return{checked:!0}}else if(s0(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const cBe=["ctrl","shift","alt","meta"],hBe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>cBe.some(r=>e[`${r}Key`]&&!t.includes(r))},VS=(e,t)=>(r,...i)=>{for(let n=0;n<t.length;n++){const s=hBe[t[n]];if(s&&s(r,t))return}return e(r,...i)},pBe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JF=(e,t)=>r=>{if(!("key"in r))return;const i=Wa(r.key);if(t.some(n=>n===i||pBe[n]===i))return e(r)},kA={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Cw(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),Cw(e,!0),i.enter(e)):i.leave(e,()=>{Cw(e,!1)}):Cw(e,t))},beforeUnmount(e,{value:t}){Cw(e,t)}};function Cw(e,t){e.style.display=t?e._vod:"none"}function dBe(){kA.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Vle=Or({patchProp:ZVe},LVe);let $2,nW=!1;function Ble(){return $2||($2=RF(Vle))}function zle(){return $2=nW?$2:PF(Vle),nW=!0,$2}const Ep=(...e)=>{Ble().render(...e)},ZF=(...e)=>{zle().hydrate(...e)},OA=(...e)=>{const t=Ble().createApp(...e);qle(t),Hle(t);const{mount:r}=t;return t.mount=i=>{const n=Wle(i);if(!n)return;const s=t._component;!Zt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t},Gle=(...e)=>{const t=zle().createApp(...e);qle(t),Hle(t);const{mount:r}=t;return t.mount=i=>{const n=Wle(i);if(n)return r(n,!0,n instanceof SVGElement)},t};function qle(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>Goe(t)||qoe(t),writable:!1})}function Hle(e){if(IA()){const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){Xe("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const r=e.config.compilerOptions,i='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(e.config,"compilerOptions",{get(){return Xe(i),r},set(){Xe(i)}})}}function Wle(e){if(lr(e)){const t=document.querySelector(e);return t||Xe(`Failed to mount app: mount target selector "${e}" returned null.`),t}return window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&Xe('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}let sW=!1;const Jle=()=>{sW||(sW=!0,uBe(),dBe())};var fBe=Object.freeze(Object.defineProperty({__proto__:null,Transition:US,TransitionGroup:HF,VueElement:jS,createApp:OA,createSSRApp:Gle,defineCustomElement:qF,defineSSRCustomElement:Cle,hydrate:ZF,initDirectivesForSSR:Jle,render:Ep,useCssModule:kle,useCssVars:Ole,vModelCheckbox:$A,vModelDynamic:Ule,vModelRadio:CA,vModelSelect:WF,vModelText:kx,vShow:kA,withKeys:JF,withModifiers:VS,EffectScope:lA,ReactiveEffect:Fb,customRef:wae,effect:nae,effectScope:Qoe,getCurrentScope:eae,isProxy:Lv,isReactive:Uu,isReadonly:Dp,isRef:ai,isShallow:fA,markRaw:vs,onScopeDispose:tae,proxyRefs:yA,reactive:oa,readonly:pA,ref:hs,shallowReactive:uF,shallowReadonly:gf,shallowRef:gae,stop:sae,toRaw:Bt,toRef:pF,toRefs:_ae,triggerRef:bae,unref:Mx,camelize:gs,capitalize:Ju,normalizeClass:In,normalizeProps:zoe,normalizeStyle:pm,toDisplayString:Ci,toHandlerKey:Iu,BaseTransition:_A,Comment:Tn,Fragment:Xr,KeepAlive:Fae,Static:xp,Suspense:Oae,Teleport:Qae,Text:dh,callWithAsyncErrorHandling:Ko,callWithErrorHandling:Vu,cloneVNode:Ku,compatUtils:Ale,computed:$u,createBlock:Vi,createCommentVNode:Tr,createElementBlock:Ct,createElementVNode:ut,createHydrationRenderer:PF,createPropsRestProxy:xle,createRenderer:RF,createSlots:sle,createStaticVNode:FF,createTextVNode:Sp,createVNode:ar,defineAsyncComponent:xA,defineComponent:Ar,defineEmits:mle,defineExpose:yle,defineProps:fle,get devtools(){return mp},getCurrentInstance:xo,getTransitionRawChildren:NS,guardReactiveProps:DF,h:Qo,handleError:dm,initCustomFormatter:zF,inject:gg,isMemoSame:GF,isRuntimeOnly:IA,isVNode:Zu,mergeDefaults:_le,mergeProps:MA,nextTick:OS,onActivated:EF,onBeforeMount:IF,onBeforeUnmount:FS,onBeforeUpdate:TF,onDeactivated:MF,onErrorCaptured:kF,onMounted:bh,onRenderTracked:CF,onRenderTriggered:$F,onServerPrefetch:AF,onUnmounted:l0,onUpdated:DS,openBlock:pt,popScopeId:Hp,provide:xF,pushScopeId:qp,queuePostFlushCb:RS,registerRuntimeCompiler:UF,renderList:u0,renderSlot:Pu,resolveComponent:Lr,resolveDirective:ci,resolveDynamicComponent:LF,resolveFilter:Tle,resolveTransitionHooks:Fg,setBlockTracking:yT,setDevtoolsHook:vA,setTransitionHooks:Xf,ssrContextKey:BF,ssrUtils:Ile,toHandlers:ale,transformVNodeArgs:rle,useAttrs:ble,useSSRContext:Ele,useSlots:vle,useTransitionState:wA,version:gT,warn:Xe,watch:Yo,watchEffect:Pae,watchPostEffect:SF,watchSyncEffect:Lae,withAsyncContext:Sle,withCtx:dn,withDefaults:gle,withDirectives:ti,withMemo:Mle,withScopeId:kae},Symbol.toStringTag,{value:"Module"}));function KF(e){throw e}function Zle(e){console.warn(`[Vue warn] ${e.message}`)}function di(e,t,r,i){const n=(r||mBe)[e]+(i||""),s=new SyntaxError(String(n));return s.code=e,s.loc=t,s}const mBe={[0]:"Illegal comment.",[1]:"CDATA section is allowed only in XML context.",[2]:"Duplicate attribute.",[3]:"End tag cannot have attributes.",[4]:"Illegal '/' in tags.",[5]:"Unexpected EOF in tag.",[6]:"Unexpected EOF in CDATA section.",[7]:"Unexpected EOF in comment.",[8]:"Unexpected EOF in script.",[9]:"Unexpected EOF in tag.",[10]:"Incorrectly closed comment.",[11]:"Incorrectly opened comment.",[12]:"Illegal tag name. Use '&lt;' to print '<'.",[13]:"Attribute value was expected.",[14]:"End tag name was expected.",[15]:"Whitespace was expected.",[16]:"Unexpected '<!--' in comment.",[17]:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,[18]:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",[19]:"Attribute name cannot start with '='.",[21]:"'<?' is allowed only in XML context.",[20]:"Unexpected null character.",[22]:"Illegal '/' in tags.",[23]:"Invalid end tag.",[24]:"Element is missing end tag.",[25]:"Interpolation end sign was not found.",[27]:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",[26]:"Legal directive name was expected.",[28]:"v-if/v-else-if is missing expression.",[29]:"v-if/else branches must use unique keys.",[30]:"v-else/v-else-if has no adjacent v-if or v-else-if.",[31]:"v-for is missing expression.",[32]:"v-for has invalid expression.",[33]:"<template v-for> key should be placed on the <template> tag.",[34]:"v-bind is missing expression.",[35]:"v-on is missing expression.",[36]:"Unexpected custom directive on <slot> outlet.",[37]:"Mixed v-slot usage on both the component and nested <template>.When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",[38]:"Duplicate slot names found. ",[39]:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",[40]:"v-slot can only be used on components or <template> tags.",[41]:"v-model is missing expression.",[42]:"v-model value must be a valid JavaScript member expression.",[43]:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",[44]:"Error parsing JavaScript expression: ",[45]:"<KeepAlive> expects exactly one child component.",[46]:'"prefixIdentifiers" option is not supported in this build of compiler.',[47]:"ES module mode is not supported in this build of compiler.",[48]:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',[49]:'"scopeId" option is only supported in module mode.',[50]:""},Ox=Symbol("Fragment"),C2=Symbol("Teleport"),YF=Symbol("Suspense"),bT=Symbol("KeepAlive"),Kle=Symbol("BaseTransition"),jg=Symbol("openBlock"),Yle=Symbol("createBlock"),Qle=Symbol("createElementBlock"),QF=Symbol("createVNode"),XF=Symbol("createElementVNode"),BS=Symbol("createCommentVNode"),e7=Symbol("createTextVNode"),Xle=Symbol("createStaticVNode"),t7=Symbol("resolveComponent"),wT=Symbol("resolveDynamicComponent"),r7=Symbol("resolveDirective"),i7=Symbol("resolveFilter"),n7=Symbol("withDirectives"),s7=Symbol("renderList"),eue=Symbol("renderSlot"),tue=Symbol("createSlots"),RA=Symbol("toDisplayString"),_T=Symbol("mergeProps"),o7=Symbol("normalizeClass"),a7=Symbol("normalizeStyle"),Rx=Symbol("normalizeProps"),zS=Symbol("guardReactiveProps"),l7=Symbol("toHandlers"),sL=Symbol("camelize"),yBe=Symbol("capitalize"),oL=Symbol("toHandlerKey"),xT=Symbol("setBlockTracking"),gBe=Symbol("pushScopeId"),vBe=Symbol("popScopeId"),u7=Symbol("withCtx"),bBe=Symbol("unref"),wBe=Symbol("isRef"),c7=Symbol("withMemo"),rue=Symbol("isMemoSame"),rm={[Ox]:"Fragment",[C2]:"Teleport",[YF]:"Suspense",[bT]:"KeepAlive",[Kle]:"BaseTransition",[jg]:"openBlock",[Yle]:"createBlock",[Qle]:"createElementBlock",[QF]:"createVNode",[XF]:"createElementVNode",[BS]:"createCommentVNode",[e7]:"createTextVNode",[Xle]:"createStaticVNode",[t7]:"resolveComponent",[wT]:"resolveDynamicComponent",[r7]:"resolveDirective",[i7]:"resolveFilter",[n7]:"withDirectives",[s7]:"renderList",[eue]:"renderSlot",[tue]:"createSlots",[RA]:"toDisplayString",[_T]:"mergeProps",[o7]:"normalizeClass",[a7]:"normalizeStyle",[Rx]:"normalizeProps",[zS]:"guardReactiveProps",[l7]:"toHandlers",[sL]:"camelize",[yBe]:"capitalize",[oL]:"toHandlerKey",[xT]:"setBlockTracking",[gBe]:"pushScopeId",[vBe]:"popScopeId",[u7]:"withCtx",[bBe]:"unref",[wBe]:"isRef",[c7]:"withMemo",[rue]:"isMemoSame"};function _Be(e){Object.getOwnPropertySymbols(e).forEach(t=>{rm[t]=e[t]})}const rl={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function xBe(e,t=rl){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function Px(e,t,r,i,n,s,o,a=!1,l=!1,u=!1,c=rl){return e&&(a?(e.helper(jg),e.helper(zv(e.inSSR,u))):e.helper(Bv(e.inSSR,u)),o&&e.helper(n7)),{type:13,tag:t,props:r,children:i,patchFlag:n,dynamicProps:s,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function GS(e,t=rl){return{type:17,loc:t,elements:e}}function Ll(e,t=rl){return{type:15,loc:t,properties:e}}function hn(e,t){return{type:16,loc:rl,key:lr(e)?xr(e,!0):e,value:t}}function xr(e,t=!1,r=rl,i=0){return{type:4,loc:r,content:e,isStatic:t,constType:t?3:i}}function nh(e,t=rl){return{type:8,loc:t,children:e}}function xn(e,t=[],r=rl){return{type:14,loc:r,callee:e,arguments:t}}function Uv(e,t=void 0,r=!1,i=!1,n=rl){return{type:18,params:e,returns:t,newline:r,isSlot:i,loc:n}}function aL(e,t,r,i=!0){return{type:19,test:e,consequent:t,alternate:r,newline:i,loc:rl}}function SBe(e,t,r=!1){return{type:20,index:e,value:t,isVNode:r,loc:rl}}function EBe(e){return{type:21,body:e,loc:rl}}const Wo=e=>e.type===4&&e.isStatic,Yy=(e,t)=>e===t||e===Wa(t);function iue(e){if(Yy(e,"Teleport"))return C2;if(Yy(e,"Suspense"))return YF;if(Yy(e,"KeepAlive"))return bT;if(Yy(e,"BaseTransition"))return Kle}const MBe=/^\d|[^\$\w]/,h7=e=>!MBe.test(e),IBe=/[A-Za-z_$\xA0-\uFFFF]/,TBe=/[\.\?\w$\xA0-\uFFFF]/,ABe=/\s+[.[]\s*|\s*[.[]\s+/g,$Be=e=>{e=e.trim().replace(ABe,o=>o.trim());let t=0,r=[],i=0,n=0,s=null;for(let o=0;o<e.length;o++){const a=e.charAt(o);switch(t){case 0:if(a==="[")r.push(t),t=1,i++;else if(a==="(")r.push(t),t=2,n++;else if(!(o===0?IBe:TBe).test(a))return!1;break;case 1:a==="'"||a==='"'||a==="`"?(r.push(t),t=3,s=a):a==="["?i++:a==="]"&&(--i||(t=r.pop()));break;case 2:if(a==="'"||a==='"'||a==="`")r.push(t),t=3,s=a;else if(a==="(")n++;else if(a===")"){if(o===e.length-1)return!1;--n||(t=r.pop())}break;case 3:a===s&&(t=r.pop(),s=null);break}}return!i&&!n},nue=$Be;function sue(e,t,r){const n={source:e.source.slice(t,t+r),start:ST(e.start,e.source,t),end:e.end};return r!=null&&(n.end=ST(e.start,e.source,t+r)),n}function ST(e,t,r=t.length){return ET(Or({},e),t,r)}function ET(e,t,r=t.length){let i=0,n=-1;for(let s=0;s<r;s++)t.charCodeAt(s)===10&&(i++,n=s);return e.offset+=r,e.line+=i,e.column=n===-1?e.column+r:r-n,e}function oW(e,t){if(!e)throw new Error(t||"unexpected compiler condition")}function Cl(e,t,r=!1){for(let i=0;i<e.props.length;i++){const n=e.props[i];if(n.type===7&&(r||n.exp)&&(lr(t)?n.name===t:t.test(n.name)))return n}}function Vv(e,t,r=!1,i=!1){for(let n=0;n<e.props.length;n++){const s=e.props[n];if(s.type===6){if(r)continue;if(s.name===t&&(s.value||i))return s}else if(s.name==="bind"&&(s.exp||i)&&Qy(s.arg,t))return s}}function Qy(e,t){return!!(e&&Wo(e)&&e.content===t)}function CBe(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function xk(e){return e.type===5||e.type===2}function kBe(e){return e.type===7&&e.name==="slot"}function MT(e){return e.type===1&&e.tagType===3}function IT(e){return e.type===1&&e.tagType===2}function Bv(e,t){return e||t?QF:XF}function zv(e,t){return e||t?Yle:Qle}const OBe=new Set([Rx,zS]);function oue(e,t=[]){if(e&&!lr(e)&&e.type===14){const r=e.callee;if(!lr(r)&&OBe.has(r))return oue(e.arguments[0],t.concat(e))}return[e,t]}function TT(e,t,r){let i,n=e.type===13?e.props:e.arguments[2],s=[],o;if(n&&!lr(n)&&n.type===14){const a=oue(n);n=a[0],s=a[1],o=s[s.length-1]}if(n==null||lr(n))i=Ll([t]);else if(n.type===14){const a=n.arguments[0];!lr(a)&&a.type===15?a.properties.unshift(t):n.callee===l7?i=xn(r.helper(_T),[Ll([t]),n]):n.arguments.unshift(Ll([t])),!i&&(i=n)}else if(n.type===15){let a=!1;if(t.key.type===4){const l=t.key.content;a=n.properties.some(u=>u.key.type===4&&u.key.content===l)}a||n.properties.unshift(t),i=n}else i=xn(r.helper(_T),[Ll([t]),n]),o&&o.callee===zS&&(o=s[s.length-2]);e.type===13?o?o.arguments[0]=i:e.props=i:o?o.arguments[0]=i:e.arguments[2]=i}function Lx(e,t){return`_${t}_${e.replace(/[^\w]/g,(r,i)=>r==="-"?"_":e.charCodeAt(i).toString())}`}function RBe(e){return e.type===14&&e.callee===c7?e.arguments[1].returns:e}function p7(e,{helper:t,removeHelper:r,inSSR:i}){e.isBlock||(e.isBlock=!0,r(Bv(i,e.isComponent)),t(jg),t(zv(i,e.isComponent)))}const PBe={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:e=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${e}.sync\` should be changed to \`v-model:${e}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_PROP:{message:".prop modifier for v-bind has been removed and no longer necessary. Vue 3 will automatically set a binding as DOM property when appropriate."},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTER:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function lL(e,t){const r=t.options?t.options.compatConfig:t.compatConfig,i=r&&r[e];return e==="MODE"?i||3:i}function Rf(e,t){const r=lL("MODE",t),i=lL(e,t);return r===3?i===!0:i!==!1}function Ug(e,t,r,...i){const n=Rf(e,t);return n&&PA(e,t,r,...i),n}function PA(e,t,r,...i){if(lL(e,t)==="suppress-warning")return;const{message:s,link:o}=PBe[e],a=`(deprecation ${e}) ${typeof s=="function"?s(...i):s}${o?`
  Details: ${o}`:""}`,l=new SyntaxError(a);l.code=e,r&&(l.loc=r),t.onWarn(l)}const LBe=/&(gt|lt|amp|apos|quot);/g,NBe={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},aW={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:b2,isPreTag:b2,isCustomElement:b2,decodeEntities:e=>e.replace(LBe,(t,r)=>NBe[r]),onError:KF,onWarn:Zle,comments:!0};function DBe(e,t={}){const r=FBe(e,t),i=Ja(r);return xBe(d7(r,0,[]),el(r,i))}function FBe(e,t){const r=Or({},aW);let i;for(i in t)r[i]=t[i]===void 0?aW[i]:t[i];return{options:r,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:r.onWarn}}function d7(e,t,r){const i=LA(r),n=i?i.ns:0,s=[];for(;!WBe(e,t,r);){const a=e.source;let l;if(t===0||t===1){if(!e.inVPre&&Us(a,e.options.delimiters[0]))l=qBe(e,t);else if(t===0&&a[0]==="<")if(a.length===1)oi(e,5,1);else if(a[1]==="!")Us(a,"<!--")?l=UBe(e):Us(a,"<!DOCTYPE")?l=kw(e):Us(a,"<![CDATA[")?n!==0?l=jBe(e,r):(oi(e,1),l=kw(e)):(oi(e,11),l=kw(e));else if(a[1]==="/")if(a.length===2)oi(e,5,2);else if(a[2]===">"){oi(e,14,2),Un(e,3);continue}else if(/[a-z]/i.test(a[2])){oi(e,23),uL(e,1,i);continue}else oi(e,12,2),l=kw(e);else/[a-z]/i.test(a[1])?(l=VBe(e,r),Rf("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(u=>u.type===7&&aue(u.name))&&(PA("COMPILER_NATIVE_TEMPLATE",e,l.loc),l=l.children)):a[1]==="?"?(oi(e,21,1),l=kw(e)):oi(e,12,1)}if(l||(l=HBe(e,t)),$t(l))for(let u=0;u<l.length;u++)lW(s,l[u]);else lW(s,l)}let o=!1;if(t!==2&&t!==1){const a=e.options.whitespace!=="preserve";for(let l=0;l<s.length;l++){const u=s[l];if(!e.inPre&&u.type===2)if(/[^\t\r\n\f ]/.test(u.content))a&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const c=s[l-1],p=s[l+1];!c||!p||a&&(c.type===3||p.type===3||c.type===1&&p.type===1&&/[\r\n]/.test(u.content))?(o=!0,s[l]=null):u.content=" "}else u.type===3&&!e.options.comments&&(o=!0,s[l]=null)}if(e.inPre&&i&&e.options.isPreTag(i.tag)){const l=s[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return o?s.filter(Boolean):s}function lW(e,t){if(t.type===2){const r=LA(e);if(r&&r.type===2&&r.loc.end.offset===t.loc.start.offset){r.content+=t.content,r.loc.end=t.loc.end,r.loc.source+=t.loc.source;return}}e.push(t)}function jBe(e,t){Un(e,9);const r=d7(e,3,t);return e.source.length===0?oi(e,6):Un(e,3),r}function UBe(e){const t=Ja(e);let r;const i=/--(\!)?>/.exec(e.source);if(!i)r=e.source.slice(4),Un(e,e.source.length),oi(e,7);else{i.index<=3&&oi(e,0),i[1]&&oi(e,10),r=e.source.slice(4,i.index);const n=e.source.slice(0,i.index);let s=1,o=0;for(;(o=n.indexOf("<!--",s))!==-1;)Un(e,o-s+1),o+4<n.length&&oi(e,16),s=o+1;Un(e,i.index+i[0].length-s+1)}return{type:3,content:r,loc:el(e,t)}}function kw(e){const t=Ja(e),r=e.source[1]==="?"?1:2;let i;const n=e.source.indexOf(">");return n===-1?(i=e.source.slice(r),Un(e,e.source.length)):(i=e.source.slice(r,n),Un(e,n+1)),{type:3,content:i,loc:el(e,t)}}function VBe(e,t){const r=e.inPre,i=e.inVPre,n=LA(t),s=uL(e,0,n),o=e.inPre&&!r,a=e.inVPre&&!i;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return o&&(e.inPre=!1),a&&(e.inVPre=!1),s;t.push(s);const l=e.options.getTextMode(s,n),u=d7(e,l,t);t.pop();{const c=s.props.find(p=>p.type===6&&p.name==="inline-template");if(c&&Ug("COMPILER_INLINE_TEMPLATE",e,c.loc)){const p=el(e,s.loc.end);c.value={type:2,content:p.source,loc:p}}}if(s.children=u,cL(e.source,s.tag))uL(e,1,n);else if(oi(e,24,0,s.loc.start),e.source.length===0&&s.tag.toLowerCase()==="script"){const c=u[0];c&&Us(c.loc.source,"<!--")&&oi(e,8)}return s.loc=el(e,s.loc.start),o&&(e.inPre=!1),a&&(e.inVPre=!1),s}const aue=Ws("if,else,else-if,for,slot");function uL(e,t,r){const i=Ja(e),n=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),s=n[1],o=e.options.getNamespace(s,r);Un(e,n[0].length),Nx(e);const a=Ja(e),l=e.source;e.options.isPreTag(s)&&(e.inPre=!0);let u=uW(e,t);t===0&&!e.inVPre&&u.some(d=>d.type===7&&d.name==="pre")&&(e.inVPre=!0,Or(e,a),e.source=l,u=uW(e,t).filter(d=>d.name!=="v-pre"));let c=!1;if(e.source.length===0?oi(e,9):(c=Us(e.source,"/>"),t===1&&c&&oi(e,4),Un(e,c?2:1)),t===1)return;if(Rf("COMPILER_V_IF_V_FOR_PRECEDENCE",e)){let d=!1,m=!1;for(let g=0;g<u.length;g++){const b=u[g];if(b.type===7&&(b.name==="if"?d=!0:b.name==="for"&&(m=!0)),d&&m){PA("COMPILER_V_IF_V_FOR_PRECEDENCE",e,el(e,i));break}}}let p=0;return e.inVPre||(s==="slot"?p=2:s==="template"?u.some(d=>d.type===7&&aue(d.name))&&(p=3):BBe(s,u,e)&&(p=1)),{type:1,ns:o,tag:s,tagType:p,props:u,isSelfClosing:c,children:[],loc:el(e,i),codegenNode:void 0}}function BBe(e,t,r){const i=r.options;if(i.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||iue(e)||i.isBuiltInComponent&&i.isBuiltInComponent(e)||i.isNativeTag&&!i.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const s=t[n];if(s.type===6){if(s.name==="is"&&s.value){if(s.value.content.startsWith("vue:"))return!0;if(Ug("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}else{if(s.name==="is")return!0;if(s.name==="bind"&&Qy(s.arg,"is")&&!0&&Ug("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}}function uW(e,t){const r=[],i=new Set;for(;e.source.length>0&&!Us(e.source,">")&&!Us(e.source,"/>");){if(Us(e.source,"/")){oi(e,22),Un(e,1),Nx(e);continue}t===1&&oi(e,3);const n=zBe(e,i);n.type===6&&n.value&&n.name==="class"&&(n.value.content=n.value.content.replace(/\s+/g," ").trim()),t===0&&r.push(n),/^[^\t\r\n\f />]/.test(e.source)&&oi(e,15),Nx(e)}return r}function zBe(e,t){const r=Ja(e),n=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(n)&&oi(e,2),t.add(n),n[0]==="="&&oi(e,19);{const a=/["'<]/g;let l;for(;l=a.exec(n);)oi(e,17,l.index)}Un(e,n.length);let s;/^[\t\r\n\f ]*=/.test(e.source)&&(Nx(e),Un(e,1),Nx(e),s=GBe(e),s||oi(e,13));const o=el(e,r);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(n)){const a=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(n);let l=Us(n,"."),u=a[1]||(l||Us(n,":")?"bind":Us(n,"@")?"on":"slot"),c;if(a[2]){const d=u==="slot",m=n.lastIndexOf(a[2]),g=el(e,cW(e,r,m),cW(e,r,m+a[2].length+(d&&a[3]||"").length));let b=a[2],v=!0;b.startsWith("[")?(v=!1,b.endsWith("]")?b=b.slice(1,b.length-1):(oi(e,27),b=b.slice(1))):d&&(b+=a[3]||""),c={type:4,content:b,isStatic:v,constType:v?3:0,loc:g}}if(s&&s.isQuoted){const d=s.loc;d.start.offset++,d.start.column++,d.end=ST(d.start,s.content),d.source=d.source.slice(1,-1)}const p=a[3]?a[3].slice(1).split("."):[];return l&&p.push("prop"),u==="bind"&&c&&(p.includes("sync")&&Ug("COMPILER_V_BIND_SYNC",e,o,c.loc.source)&&(u="model",p.splice(p.indexOf("sync"),1)),p.includes("prop")&&Ug("COMPILER_V_BIND_PROP",e,o)),{type:7,name:u,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:c,modifiers:p,loc:o}}return!e.inVPre&&Us(n,"v-")&&oi(e,26),{type:6,name:n,value:s&&{type:2,content:s.content,loc:s.loc},loc:o}}function GBe(e){const t=Ja(e);let r;const i=e.source[0],n=i==='"'||i==="'";if(n){Un(e,1);const s=e.source.indexOf(i);s===-1?r=k2(e,e.source.length,4):(r=k2(e,s,4),Un(e,1))}else{const s=/^[^\t\r\n\f >]+/.exec(e.source);if(!s)return;const o=/["'<=`]/g;let a;for(;a=o.exec(s[0]);)oi(e,18,a.index);r=k2(e,s[0].length,4)}return{content:r,isQuoted:n,loc:el(e,t)}}function qBe(e,t){const[r,i]=e.options.delimiters,n=e.source.indexOf(i,r.length);if(n===-1){oi(e,25);return}const s=Ja(e);Un(e,r.length);const o=Ja(e),a=Ja(e),l=n-r.length,u=e.source.slice(0,l),c=k2(e,l,t),p=c.trim(),d=c.indexOf(p);d>0&&ET(o,u,d);const m=l-(c.length-p.length-d);return ET(a,u,m),Un(e,i.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:p,loc:el(e,o,a)},loc:el(e,s)}}function HBe(e,t){const r=t===3?["]]>"]:["<",e.options.delimiters[0]];let i=e.source.length;for(let o=0;o<r.length;o++){const a=e.source.indexOf(r[o],1);a!==-1&&i>a&&(i=a)}const n=Ja(e),s=k2(e,i,t);return{type:2,content:s,loc:el(e,n)}}function k2(e,t,r){const i=e.source.slice(0,t);return Un(e,t),r===2||r===3||!i.includes("&")?i:e.options.decodeEntities(i,r===4)}function Ja(e){const{column:t,line:r,offset:i}=e;return{column:t,line:r,offset:i}}function el(e,t,r){return r=r||Ja(e),{start:t,end:r,source:e.originalSource.slice(t.offset,r.offset)}}function LA(e){return e[e.length-1]}function Us(e,t){return e.startsWith(t)}function Un(e,t){const{source:r}=e;ET(e,r,t),e.source=r.slice(t)}function Nx(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Un(e,t[0].length)}function cW(e,t,r){return ST(t,e.originalSource.slice(t.offset,r),r)}function oi(e,t,r,i=Ja(e)){r&&(i.offset+=r,i.column+=r),e.options.onError(di(t,{start:i,end:i,source:""}))}function WBe(e,t,r){const i=e.source;switch(t){case 0:if(Us(i,"</")){for(let n=r.length-1;n>=0;--n)if(cL(i,r[n].tag))return!0}break;case 1:case 2:{const n=LA(r);if(n&&cL(i,n.tag))return!0;break}case 3:if(Us(i,"]]>"))return!0;break}return!i}function cL(e,t){return Us(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function JBe(e,t){k5(e,t,lue(e,e.children[0]))}function lue(e,t){const{children:r}=e;return r.length===1&&t.type===1&&!IT(t)}function k5(e,t,r=!1){const{children:i}=e,n=i.length;let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(a.type===1&&a.tagType===0){const l=r?0:Nl(a,t);if(l>0){if(l>=2){a.codegenNode.patchFlag=-1+" /* HOISTED */",a.codegenNode=t.hoist(a.codegenNode),s++;continue}}else{const u=a.codegenNode;if(u.type===13){const c=pue(u);if((!c||c===512||c===1)&&cue(a,t)>=2){const p=hue(a);p&&(u.props=t.hoist(p))}u.dynamicProps&&(u.dynamicProps=t.hoist(u.dynamicProps))}}}else a.type===12&&Nl(a.content,t)>=2&&(a.codegenNode=t.hoist(a.codegenNode),s++);if(a.type===1){const l=a.tagType===1;l&&t.scopes.vSlot++,k5(a,t),l&&t.scopes.vSlot--}else if(a.type===11)k5(a,t,a.children.length===1);else if(a.type===9)for(let l=0;l<a.branches.length;l++)k5(a.branches[l],t,a.branches[l].children.length===1)}s&&t.transformHoist&&t.transformHoist(i,t,e),s&&s===n&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&$t(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(GS(e.codegenNode.children)))}function Nl(e,t){const{constantCache:r}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const i=r.get(e);if(i!==void 0)return i;const n=e.codegenNode;if(n.type!==13||n.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject")return 0;if(pue(n))return r.set(e,0),0;{let a=3;const l=cue(e,t);if(l===0)return r.set(e,0),0;l<a&&(a=l);for(let u=0;u<e.children.length;u++){const c=Nl(e.children[u],t);if(c===0)return r.set(e,0),0;c<a&&(a=c)}if(a>1)for(let u=0;u<e.props.length;u++){const c=e.props[u];if(c.type===7&&c.name==="bind"&&c.exp){const p=Nl(c.exp,t);if(p===0)return r.set(e,0),0;p<a&&(a=p)}}return n.isBlock&&(t.removeHelper(jg),t.removeHelper(zv(t.inSSR,n.isComponent)),n.isBlock=!1,t.helper(Bv(t.inSSR,n.isComponent))),r.set(e,a),a}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Nl(e.content,t);case 4:return e.constType;case 8:let o=3;for(let a=0;a<e.children.length;a++){const l=e.children[a];if(lr(l)||Db(l))continue;const u=Nl(l,t);if(u===0)return 0;u<o&&(o=u)}return o;default:return 0}}const ZBe=new Set([o7,a7,Rx,zS]);function uue(e,t){if(e.type===14&&!lr(e.callee)&&ZBe.has(e.callee)){const r=e.arguments[0];if(r.type===4)return Nl(r,t);if(r.type===14)return uue(r,t)}return 0}function cue(e,t){let r=3;const i=hue(e);if(i&&i.type===15){const{properties:n}=i;for(let s=0;s<n.length;s++){const{key:o,value:a}=n[s],l=Nl(o,t);if(l===0)return l;l<r&&(r=l);let u;if(a.type===4?u=Nl(a,t):a.type===14?u=uue(a,t):u=0,u===0)return u;u<r&&(r=u)}}return r}function hue(e){const t=e.codegenNode;if(t.type===13)return t.props}function pue(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function KBe(e,{filename:t="",prefixIdentifiers:r=!1,hoistStatic:i=!1,cacheHandlers:n=!1,nodeTransforms:s=[],directiveTransforms:o={},transformHoist:a=null,isBuiltInComponent:l=ps,isCustomElement:u=ps,expressionPlugins:c=[],scopeId:p=null,slotted:d=!0,ssr:m=!1,inSSR:g=!1,ssrCssVars:b="",bindingMetadata:v=kr,inline:_=!1,isTS:E=!1,onError:I=KF,onWarn:x=Zle,compatConfig:T}){const M=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),k={selfName:M&&Ju(gs(M[1])),prefixIdentifiers:r,hoistStatic:i,cacheHandlers:n,nodeTransforms:s,directiveTransforms:o,transformHoist:a,isBuiltInComponent:l,isCustomElement:u,expressionPlugins:c,scopeId:p,slotted:d,ssr:m,inSSR:g,ssrCssVars:b,bindingMetadata:v,inline:_,isTS:E,onError:I,onWarn:x,compatConfig:T,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(D){const B=k.helpers.get(D)||0;return k.helpers.set(D,B+1),D},removeHelper(D){const B=k.helpers.get(D);if(B){const G=B-1;G?k.helpers.set(D,G):k.helpers.delete(D)}},helperString(D){return`_${rm[k.helper(D)]}`},replaceNode(D){{if(!k.currentNode)throw new Error("Node being replaced is already removed.");if(!k.parent)throw new Error("Cannot replace root node.")}k.parent.children[k.childIndex]=k.currentNode=D},removeNode(D){if(!k.parent)throw new Error("Cannot remove root node.");const B=k.parent.children,G=D?B.indexOf(D):k.currentNode?k.childIndex:-1;if(G<0)throw new Error("node being removed is not a child of current parent");!D||D===k.currentNode?(k.currentNode=null,k.onNodeRemoved()):k.childIndex>G&&(k.childIndex--,k.onNodeRemoved()),k.parent.children.splice(G,1)},onNodeRemoved:()=>{},addIdentifiers(D){},removeIdentifiers(D){},hoist(D){lr(D)&&(D=xr(D)),k.hoists.push(D);const B=xr(`_hoisted_${k.hoists.length}`,!1,D.loc,2);return B.hoisted=D,B},cache(D,B=!1){return SBe(k.cached++,D,B)}};return k.filters=new Set,k}function YBe(e,t){const r=KBe(e,t);NA(e,r),t.hoistStatic&&JBe(e,r),t.ssr||QBe(e,r),e.helpers=[...r.helpers.keys()],e.components=[...r.components],e.directives=[...r.directives],e.imports=r.imports,e.hoists=r.hoists,e.temps=r.temps,e.cached=r.cached,e.filters=[...r.filters]}function QBe(e,t){const{helper:r}=t,{children:i}=e;if(i.length===1){const n=i[0];if(lue(e,n)&&n.codegenNode){const s=n.codegenNode;s.type===13&&p7(s,t),e.codegenNode=s}else e.codegenNode=n}else if(i.length>1){let n=64,s=rh[64];i.filter(o=>o.type!==3).length===1&&(n|=2048,s+=`, ${rh[2048]}`),e.codegenNode=Px(t,r(Ox),void 0,e.children,n+` /* ${s} */`,void 0,void 0,!0,void 0,!1)}}function XBe(e,t){let r=0;const i=()=>{r--};for(;r<e.children.length;r++){const n=e.children[r];lr(n)||(t.parent=e,t.childIndex=r,t.onNodeRemoved=i,NA(n,t))}}function NA(e,t){t.currentNode=e;const{nodeTransforms:r}=t,i=[];for(let s=0;s<r.length;s++){const o=r[s](e,t);if(o&&($t(o)?i.push(...o):i.push(o)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(BS);break;case 5:t.ssr||t.helper(RA);break;case 9:for(let s=0;s<e.branches.length;s++)NA(e.branches[s],t);break;case 10:case 11:case 1:case 0:XBe(e,t);break}t.currentNode=e;let n=i.length;for(;n--;)i[n]()}function due(e,t){const r=lr(e)?i=>i===e:i=>e.test(i);return(i,n)=>{if(i.type===1){const{props:s}=i;if(i.tagType===3&&s.some(kBe))return;const o=[];for(let a=0;a<s.length;a++){const l=s[a];if(l.type===7&&r(l.name)){s.splice(a,1),a--;const u=t(i,l,n);u&&o.push(u)}}return o}}}const DA="/*#__PURE__*/";function eze(e,{mode:t="function",prefixIdentifiers:r=t==="module",sourceMap:i=!1,filename:n="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:c=!1,isTS:p=!1,inSSR:d=!1}){const m={mode:t,prefixIdentifiers:r,sourceMap:i,filename:n,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:c,isTS:p,inSSR:d,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(b){return`_${rm[b]}`},push(b,v){m.code+=b},indent(){g(++m.indentLevel)},deindent(b=!1){b?--m.indentLevel:g(--m.indentLevel)},newline(){g(m.indentLevel)}};function g(b){m.push(`
`+"  ".repeat(b))}return m}function tze(e,t={}){const r=eze(e,t);t.onContextCreated&&t.onContextCreated(r);const{mode:i,push:n,prefixIdentifiers:s,indent:o,deindent:a,newline:l,scopeId:u,ssr:c}=r,p=e.helpers.length>0,d=!s&&i!=="module";rze(e,r);const g=c?"ssrRender":"render",v=(c?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(n(`function ${g}(${v}) {`),o(),d&&(n("with (_ctx) {"),o(),p&&(n(`const { ${e.helpers.map(_=>`${rm[_]}: _${rm[_]}`).join(", ")} } = _Vue`),n(`
`),l())),e.components.length&&(Sk(e.components,"component",r),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(Sk(e.directives,"directive",r),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),Sk(e.filters,"filter",r),l()),e.temps>0){n("let ");for(let _=0;_<e.temps;_++)n(`${_>0?", ":""}_temp${_}`)}return(e.components.length||e.directives.length||e.temps)&&(n(`
`),l()),c||n("return "),e.codegenNode?Bs(e.codegenNode,r):n("null"),d&&(a(),n("}")),a(),n("}"),{ast:e,code:r.code,preamble:"",map:r.map?r.map.toJSON():void 0}}function rze(e,t){const{ssr:r,prefixIdentifiers:i,push:n,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=t,u=a,c=p=>`${rm[p]}: _${rm[p]}`;if(e.helpers.length>0&&(n(`const _Vue = ${u}
`),e.hoists.length)){const p=[QF,XF,BS,e7,Xle].filter(d=>e.helpers.includes(d)).map(c).join(", ");n(`const { ${p} } = _Vue
`)}ize(e.hoists,t),s(),n("return ")}function Sk(e,t,{helper:r,push:i,newline:n,isTS:s}){const o=r(t==="filter"?i7:t==="component"?t7:r7);for(let a=0;a<e.length;a++){let l=e[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),i(`const ${Lx(l,t)} = ${o}(${JSON.stringify(l)}${u?", true":""})${s?"!":""}`),a<e.length-1&&n()}}function ize(e,t){if(!e.length)return;t.pure=!0;const{push:r,newline:i,helper:n,scopeId:s,mode:o}=t;i();for(let a=0;a<e.length;a++){const l=e[a];l&&(r(`const _hoisted_${a+1} = `),Bs(l,t),i())}t.pure=!1}function nze(e){return lr(e)||e.type===4||e.type===2||e.type===5||e.type===8}function f7(e,t){const r=e.length>3||e.some(i=>$t(i)||!nze(i));t.push("["),r&&t.indent(),qS(e,t,r),r&&t.deindent(),t.push("]")}function qS(e,t,r=!1,i=!0){const{push:n,newline:s}=t;for(let o=0;o<e.length;o++){const a=e[o];lr(a)?n(a):$t(a)?f7(a,t):Bs(a,t),o<e.length-1&&(r?(i&&n(","),s()):i&&n(", "))}}function Bs(e,t){if(lr(e)){t.push(e);return}if(Db(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:oW(e.codegenNode!=null,"Codegen node is missing for element/if/for node. Apply appropriate transforms first."),Bs(e.codegenNode,t);break;case 2:sze(e,t);break;case 4:fue(e,t);break;case 5:oze(e,t);break;case 12:Bs(e.codegenNode,t);break;case 8:mue(e,t);break;case 3:lze(e,t);break;case 13:uze(e,t);break;case 14:hze(e,t);break;case 15:pze(e,t);break;case 17:dze(e,t);break;case 18:fze(e,t);break;case 19:mze(e,t);break;case 20:yze(e,t);break;case 21:qS(e.body,t,!0,!1);break;case 22:break;case 23:break;case 24:break;case 25:break;case 26:break;case 10:break;default:return oW(!1,`unhandled codegen node type: ${e.type}`),e}}function sze(e,t){t.push(JSON.stringify(e.content),e)}function fue(e,t){const{content:r,isStatic:i}=e;t.push(i?JSON.stringify(r):r,e)}function oze(e,t){const{push:r,helper:i,pure:n}=t;n&&r(DA),r(`${i(RA)}(`),Bs(e.content,t),r(")")}function mue(e,t){for(let r=0;r<e.children.length;r++){const i=e.children[r];lr(i)?t.push(i):Bs(i,t)}}function aze(e,t){const{push:r}=t;if(e.type===8)r("["),mue(e,t),r("]");else if(e.isStatic){const i=h7(e.content)?e.content:JSON.stringify(e.content);r(i,e)}else r(`[${e.content}]`,e)}function lze(e,t){const{push:r,helper:i,pure:n}=t;n&&r(DA),r(`${i(BS)}(${JSON.stringify(e.content)})`,e)}function uze(e,t){const{push:r,helper:i,pure:n}=t,{tag:s,props:o,children:a,patchFlag:l,dynamicProps:u,directives:c,isBlock:p,disableTracking:d,isComponent:m}=e;c&&r(i(n7)+"("),p&&r(`(${i(jg)}(${d?"true":""}), `),n&&r(DA);const g=p?zv(t.inSSR,m):Bv(t.inSSR,m);r(i(g)+"(",e),qS(cze([s,o,a,l,u]),t),r(")"),p&&r(")"),c&&(r(", "),Bs(c,t),r(")"))}function cze(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(r=>r||"null")}function hze(e,t){const{push:r,helper:i,pure:n}=t,s=lr(e.callee)?e.callee:i(e.callee);n&&r(DA),r(s+"(",e),qS(e.arguments,t),r(")")}function pze(e,t){const{push:r,indent:i,deindent:n,newline:s}=t,{properties:o}=e;if(!o.length){r("{}",e);return}const a=o.length>1||o.some(l=>l.value.type!==4);r(a?"{":"{ "),a&&i();for(let l=0;l<o.length;l++){const{key:u,value:c}=o[l];aze(u,t),r(": "),Bs(c,t),l<o.length-1&&(r(","),s())}a&&n(),r(a?"}":" }")}function dze(e,t){f7(e.elements,t)}function fze(e,t){const{push:r,indent:i,deindent:n}=t,{params:s,returns:o,body:a,newline:l,isSlot:u}=e;u&&r(`_${rm[u7]}(`),r("(",e),$t(s)?qS(s,t):s&&Bs(s,t),r(") => "),(l||a)&&(r("{"),i()),o?(l&&r("return "),$t(o)?f7(o,t):Bs(o,t)):a&&Bs(a,t),(l||a)&&(n(),r("}")),u&&(e.isNonScopedSlot&&r(", undefined, true"),r(")"))}function mze(e,t){const{test:r,consequent:i,alternate:n,newline:s}=e,{push:o,indent:a,deindent:l,newline:u}=t;if(r.type===4){const p=!h7(r.content);p&&o("("),fue(r,t),p&&o(")")}else o("("),Bs(r,t),o(")");s&&a(),t.indentLevel++,s||o(" "),o("? "),Bs(i,t),t.indentLevel--,s&&u(),s||o(" "),o(": ");const c=n.type===19;c||t.indentLevel++,Bs(n,t),c||t.indentLevel--,s&&l(!0)}function yze(e,t){const{push:r,helper:i,indent:n,deindent:s,newline:o}=t;r(`_cache[${e.index}] || (`),e.isVNode&&(n(),r(`${i(xT)}(-1),`),o()),r(`_cache[${e.index}] = `),Bs(e.value,t),e.isVNode&&(r(","),o(),r(`${i(xT)}(1),`),o(),r(`_cache[${e.index}]`),s()),r(")")}const gze=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b"),vze=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function Xy(e,t,r=!1,i=!1){const n=e.content;if(!!n.trim())try{new Function(i?` ${n} `:`return ${r?`(${n}) => {}`:`(${n})`}`)}catch(s){let o=s.message;const a=n.replace(vze,"").match(gze);a&&(o=`avoid using JavaScript keyword as property name: "${a[0]}"`),t.onError(di(44,e.loc,void 0,o))}}const bze=(e,t)=>{if(e.type===5)e.content=Ek(e.content,t);else if(e.type===1)for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&i.name!=="for"){const n=i.exp,s=i.arg;n&&n.type===4&&!(i.name==="on"&&s)&&(i.exp=Ek(n,t,i.name==="slot")),s&&s.type===4&&!s.isStatic&&(i.arg=Ek(s,t))}}};function Ek(e,t,r=!1,i=!1,n=Object.create(t.identifiers)){return Xy(e,t,r,i),e}const wze=due(/^(if|else|else-if)$/,(e,t,r)=>_ze(e,t,r,(i,n,s)=>{const o=r.parent.children;let a=o.indexOf(i),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(s)i.codegenNode=pW(n,l,r);else{const u=Sze(i.codegenNode);u.alternate=pW(n,l+i.branches.length-1,r)}}}));function _ze(e,t,r,i){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const n=t.exp?t.exp.loc:e.loc;r.onError(di(28,t.loc)),t.exp=xr("true",!1,n)}if(t.exp&&Xy(t.exp,r),t.name==="if"){const n=hW(e,t),s={type:9,loc:e.loc,branches:[n]};if(r.replaceNode(s),i)return i(s,n,!0)}else{const n=r.parent.children,s=[];let o=n.indexOf(e);for(;o-->=-1;){const a=n[o];if(a&&a.type===3){r.removeNode(a),s.unshift(a);continue}if(a&&a.type===2&&!a.content.trim().length){r.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&r.onError(di(30,e.loc)),r.removeNode();const l=hW(e,t);s.length&&!(r.parent&&r.parent.type===1&&Yy(r.parent.tag,"transition"))&&(l.children=[...s,...l.children]);{const c=l.userKey;c&&a.branches.forEach(({userKey:p})=>{xze(p,c)&&r.onError(di(29,l.userKey.loc))})}a.branches.push(l);const u=i&&i(a,l,!1);NA(l,r),u&&u(),r.currentNode=null}else r.onError(di(30,e.loc));break}}}function hW(e,t){return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:e.tagType===3&&!Cl(e,"for")?e.children:[e],userKey:Vv(e,"key")}}function pW(e,t,r){return e.condition?aL(e.condition,dW(e,t,r),xn(r.helper(BS),['"v-if"',"true"])):dW(e,t,r)}function dW(e,t,r){const{helper:i}=r,n=hn("key",xr(`${t}`,!1,rl,2)),{children:s}=e,o=s[0];if(s.length!==1||o.type!==1)if(s.length===1&&o.type===11){const l=o.codegenNode;return TT(l,n,r),l}else{let l=64,u=rh[64];return s.filter(c=>c.type!==3).length===1&&(l|=2048,u+=`, ${rh[2048]}`),Px(r,i(Ox),Ll([n]),s,l+` /* ${u} */`,void 0,void 0,!0,!1,!1,e.loc)}else{const l=o.codegenNode,u=RBe(l);return u.type===13&&p7(u,r),TT(u,n,r),l}}function xze(e,t){if(!e||e.type!==t.type)return!1;if(e.type===6){if(e.value.content!==t.value.content)return!1}else{const r=e.exp,i=t.exp;if(r.type!==i.type||r.type!==4||r.isStatic!==i.isStatic||r.content!==i.content)return!1}return!0}function Sze(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const Eze=due("for",(e,t,r)=>{const{helper:i,removeHelper:n}=r;return Mze(e,t,r,s=>{const o=xn(i(s7),[s.source]),a=MT(e),l=Cl(e,"memo"),u=Vv(e,"key"),c=u&&(u.type===6?xr(u.value.content,!0):u.exp),p=u?hn("key",c):null,d=s.source.type===4&&s.source.constType>0,m=d?64:u?128:256;return s.codegenNode=Px(r,i(Ox),void 0,o,m+` /* ${rh[m]} */`,void 0,void 0,!0,!d,!1,e.loc),()=>{let g;const{children:b}=s;a&&e.children.some(E=>{if(E.type===1){const I=Vv(E,"key");if(I)return r.onError(di(33,I.loc)),!0}});const v=b.length!==1||b[0].type!==1,_=IT(e)?e:a&&e.children.length===1&&IT(e.children[0])?e.children[0]:null;if(_?(g=_.codegenNode,a&&p&&TT(g,p,r)):v?g=Px(r,i(Ox),p?Ll([p]):void 0,e.children,64+` /* ${rh[64]} */`,void 0,void 0,!0,void 0,!1):(g=b[0].codegenNode,a&&p&&TT(g,p,r),g.isBlock!==!d&&(g.isBlock?(n(jg),n(zv(r.inSSR,g.isComponent))):n(Bv(r.inSSR,g.isComponent))),g.isBlock=!d,g.isBlock?(i(jg),i(zv(r.inSSR,g.isComponent))):i(Bv(r.inSSR,g.isComponent))),l){const E=Uv(hL(s.parseResult,[xr("_cached")]));E.body=EBe([nh(["const _memo = (",l.exp,")"]),nh(["if (_cached",...c?[" && _cached.key === ",c]:[],` && ${r.helperString(rue)}(_cached, _memo)) return _cached`]),nh(["const _item = ",g]),xr("_item.memo = _memo"),xr("return _item")]),o.arguments.push(E,xr("_cache"),xr(String(r.cached++)))}else o.arguments.push(Uv(hL(s.parseResult),g,!0))}})});function Mze(e,t,r,i){if(!t.exp){r.onError(di(31,t.loc));return}const n=yue(t.exp,r);if(!n){r.onError(di(32,t.loc));return}const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=r,{source:l,value:u,key:c,index:p}=n,d={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:p,parseResult:n,children:MT(e)?e.children:[e]};r.replaceNode(d),a.vFor++;const m=i&&i(d);return()=>{a.vFor--,m&&m()}}const Ize=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,fW=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Tze=/^\(|\)$/g;function yue(e,t){const r=e.loc,i=e.content,n=i.match(Ize);if(!n)return;const[,s,o]=n,a={source:UE(r,o.trim(),i.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0};Xy(a.source,t);let l=s.trim().replace(Tze,"").trim();const u=s.indexOf(l),c=l.match(fW);if(c){l=l.replace(fW,"").trim();const p=c[1].trim();let d;if(p&&(d=i.indexOf(p,u+l.length),a.key=UE(r,p,d),Xy(a.key,t,!0)),c[2]){const m=c[2].trim();m&&(a.index=UE(r,m,i.indexOf(m,a.key?d+p.length:u+l.length)),Xy(a.index,t,!0))}}return l&&(a.value=UE(r,l,u),Xy(a.value,t,!0)),a}function UE(e,t,r){return xr(t,!1,sue(e,r,t.length))}function hL({value:e,key:t,index:r},i=[]){return Aze([e,t,r,...i])}function Aze(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((r,i)=>r||xr("_".repeat(i+1),!1))}const mW=xr("undefined",!1),$ze=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const r=Cl(e,"slot");if(r)return r.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Cze=(e,t,r)=>Uv(e,t,!1,!0,t.length?t[0].loc:r);function kze(e,t,r=Cze){t.helper(u7);const{children:i,loc:n}=e,s=[],o=[];let a=t.scopes.vSlot>0||t.scopes.vFor>0;const l=Cl(e,"slot",!0);if(l){const{arg:b,exp:v}=l;b&&!Wo(b)&&(a=!0),s.push(hn(b||xr("default",!0),r(v,i,n)))}let u=!1,c=!1;const p=[],d=new Set;for(let b=0;b<i.length;b++){const v=i[b];let _;if(!MT(v)||!(_=Cl(v,"slot",!0))){v.type!==3&&p.push(v);continue}if(l){t.onError(di(37,_.loc));break}u=!0;const{children:E,loc:I}=v,{arg:x=xr("default",!0),exp:T,loc:M}=_;let k;Wo(x)?k=x?x.content:"default":a=!0;const D=r(T,E,I);let B,G,W;if(B=Cl(v,"if"))a=!0,o.push(aL(B.exp,VE(x,D),mW));else if(G=Cl(v,/^else(-if)?$/,!0)){let K=b,ne;for(;K--&&(ne=i[K],ne.type===3););if(ne&&MT(ne)&&Cl(ne,"if")){i.splice(b,1),b--;let ye=o[o.length-1];for(;ye.alternate.type===19;)ye=ye.alternate;ye.alternate=G.exp?aL(G.exp,VE(x,D),mW):VE(x,D)}else t.onError(di(30,G.loc))}else if(W=Cl(v,"for")){a=!0;const K=W.parseResult||yue(W.exp,t);K?o.push(xn(t.helper(s7),[K.source,Uv(hL(K),VE(x,D),!0)])):t.onError(di(32,W.loc))}else{if(k){if(d.has(k)){t.onError(di(38,M));continue}d.add(k),k==="default"&&(c=!0)}s.push(hn(x,D))}}if(!l){const b=(v,_)=>{const E=r(v,_,n);return t.compatConfig&&(E.isNonScopedSlot=!0),hn("default",E)};u?p.length&&p.some(v=>gue(v))&&(c?t.onError(di(39,p[0].loc)):s.push(b(void 0,p))):s.push(b(void 0,i))}const m=a?2:O5(e.children)?3:1;let g=Ll(s.concat(hn("_",xr(m+` /* ${wje[m]} */`,!1))),n);return o.length&&(g=xn(t.helper(tue),[g,GS(o)])),{slots:g,hasDynamicSlots:a}}function VE(e,t){return Ll([hn("name",e),hn("fn",t)])}function O5(e){for(let t=0;t<e.length;t++){const r=e[t];switch(r.type){case 1:if(r.tagType===2||O5(r.children))return!0;break;case 9:if(O5(r.branches))return!0;break;case 10:case 11:if(O5(r.children))return!0;break}}return!1}function gue(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():gue(e.content)}const vue=new WeakMap,Oze=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:i,props:n}=e,s=e.tagType===1;let o=s?Rze(e,t):`"${i}"`;const a=ri(o)&&o.callee===wT;let l,u,c,p=0,d,m,g,b=a||o===C2||o===YF||!s&&(i==="svg"||i==="foreignObject");if(n.length>0){const v=bue(e,t);l=v.props,p=v.patchFlag,m=v.dynamicPropNames;const _=v.directives;g=_&&_.length?GS(_.map(E=>Lze(E,t))):void 0,v.shouldUseBlock&&(b=!0)}if(e.children.length>0)if(o===bT&&(b=!0,p|=1024,e.children.length>1&&t.onError(di(45,{start:e.children[0].loc.start,end:e.children[e.children.length-1].loc.end,source:""}))),s&&o!==C2&&o!==bT){const{slots:_,hasDynamicSlots:E}=kze(e,t);u=_,E&&(p|=1024)}else if(e.children.length===1&&o!==C2){const _=e.children[0],E=_.type,I=E===5||E===8;I&&Nl(_,t)===0&&(p|=1),I||E===2?u=_:u=e.children}else u=e.children;if(p!==0){if(p<0)c=p+` /* ${rh[p]} */`;else{const v=Object.keys(rh).map(Number).filter(_=>_>0&&p&_).map(_=>rh[_]).join(", ");c=p+` /* ${v} */`}m&&m.length&&(d=Nze(m))}e.codegenNode=Px(t,o,l,u,c,d,g,!!b,!1,s,e.loc)};function Rze(e,t,r=!1){let{tag:i}=e;const n=pL(i),s=Vv(e,"is");if(s)if(n||Rf("COMPILER_IS_ON_ELEMENT",t)){const l=s.type===6?s.value&&xr(s.value.content,!0):s.exp;if(l)return xn(t.helper(wT),[l])}else s.type===6&&s.value.content.startsWith("vue:")&&(i=s.value.content.slice(4));const o=!n&&Cl(e,"is");if(o&&o.exp)return xn(t.helper(wT),[o.exp]);const a=iue(i)||t.isBuiltInComponent(i);return a?(r||t.helper(a),a):(t.helper(t7),t.components.add(i),Lx(i,"component"))}function bue(e,t,r=e.props,i=!1){const{tag:n,loc:s,children:o}=e,a=e.tagType===1;let l=[];const u=[],c=[],p=o.length>0;let d=!1,m=0,g=!1,b=!1,v=!1,_=!1,E=!1,I=!1;const x=[],T=({key:k,value:D})=>{if(Wo(k)){const B=k.content,G=Lp(B);if(!a&&G&&B.toLowerCase()!=="onclick"&&B!=="onUpdate:modelValue"&&!fg(B)&&(_=!0),G&&fg(B)&&(I=!0),D.type===20||(D.type===4||D.type===8)&&Nl(D,t)>0)return;B==="ref"?g=!0:B==="class"?b=!0:B==="style"?v=!0:B!=="key"&&!x.includes(B)&&x.push(B),a&&(B==="class"||B==="style")&&!x.includes(B)&&x.push(B)}else E=!0};for(let k=0;k<r.length;k++){const D=r[k];if(D.type===6){const{loc:B,name:G,value:W}=D;let K=!0;if(G==="ref"&&(g=!0,t.scopes.vFor>0&&l.push(hn(xr("ref_for",!0),xr("true")))),G==="is"&&(pL(n)||W&&W.content.startsWith("vue:")||Rf("COMPILER_IS_ON_ELEMENT",t)))continue;l.push(hn(xr(G,!0,sue(B,0,G.length)),xr(W?W.content:"",K,W?W.loc:B)))}else{const{name:B,arg:G,exp:W,loc:K}=D,ne=B==="bind",ye=B==="on";if(B==="slot"){a||t.onError(di(40,K));continue}if(B==="once"||B==="memo"||B==="is"||ne&&Qy(G,"is")&&(pL(n)||Rf("COMPILER_IS_ON_ELEMENT",t))||ye&&i)continue;if((ne&&Qy(G,"key")||ye&&p&&Qy(G,"vue:before-update"))&&(d=!0),ne&&Qy(G,"ref")&&t.scopes.vFor>0&&l.push(hn(xr("ref_for",!0),xr("true"))),!G&&(ne||ye)){if(E=!0,W)if(l.length&&(u.push(Ll(Mk(l),s)),l=[]),ne){if(u.some(L=>L.type===15?L.properties.some(({key:F})=>F.type!==4||!F.isStatic?!0:F.content!=="class"&&F.content!=="style"&&!Lp(F.content)):!0)&&Ug("COMPILER_V_BIND_OBJECT_ORDER",t,K),Rf("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(W);continue}u.push(W)}else u.push({type:14,loc:K,callee:t.helper(l7),arguments:[W]});else t.onError(di(ne?34:35,K));continue}const y=t.directiveTransforms[B];if(y){const{props:C,needRuntime:L}=y(D,e,t);!i&&C.forEach(T),l.push(...C),L&&(c.push(D),Db(L)&&vue.set(D,L))}else Zoe(B)||(c.push(D),p&&(d=!0))}}let M;if(u.length?(l.length&&u.push(Ll(Mk(l),s)),u.length>1?M=xn(t.helper(_T),u,s):M=u[0]):l.length&&(M=Ll(Mk(l),s)),E?m|=16:(b&&!a&&(m|=2),v&&!a&&(m|=4),x.length&&(m|=8),_&&(m|=32)),!d&&(m===0||m===32)&&(g||I||c.length>0)&&(m|=512),!t.inSSR&&M)switch(M.type){case 15:let k=-1,D=-1,B=!1;for(let K=0;K<M.properties.length;K++){const ne=M.properties[K].key;Wo(ne)?ne.content==="class"?k=K:ne.content==="style"&&(D=K):ne.isHandlerKey||(B=!0)}const G=M.properties[k],W=M.properties[D];B?M=xn(t.helper(Rx),[M]):(G&&!Wo(G.value)&&(G.value=xn(t.helper(o7),[G.value])),W&&!Wo(W.value)&&(v||W.value.type===17)&&(W.value=xn(t.helper(a7),[W.value])));break;case 14:break;default:M=xn(t.helper(Rx),[xn(t.helper(zS),[M])]);break}return{props:M,directives:c,patchFlag:m,dynamicPropNames:x,shouldUseBlock:d}}function Mk(e){const t=new Map,r=[];for(let i=0;i<e.length;i++){const n=e[i];if(n.key.type===8||!n.key.isStatic){r.push(n);continue}const s=n.key.content,o=t.get(s);o?(s==="style"||s==="class"||Lp(s))&&Pze(o,n):(t.set(s,n),r.push(n))}return r}function Pze(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=GS([e.value,t.value],e.loc)}function Lze(e,t){const r=[],i=vue.get(e);i?r.push(t.helperString(i)):(t.helper(r7),t.directives.add(e.name),r.push(Lx(e.name,"directive")));const{loc:n}=e;if(e.exp&&r.push(e.exp),e.arg&&(e.exp||r.push("void 0"),r.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||r.push("void 0"),r.push("void 0"));const s=xr("true",!1,n);r.push(Ll(e.modifiers.map(o=>hn(o,s)),n))}return GS(r,e.loc)}function Nze(e){let t="[";for(let r=0,i=e.length;r<i;r++)t+=JSON.stringify(e[r]),r<i-1&&(t+=", ");return t+"]"}function pL(e){return e==="component"||e==="Component"}Object.freeze({});Object.freeze([]);const Dze=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Fze=/-(\w)/g,yW=Dze(e=>e.replace(Fze,(t,r)=>r?r.toUpperCase():"")),jze=(e,t)=>{if(IT(e)){const{children:r,loc:i}=e,{slotName:n,slotProps:s}=Uze(e,t),o=[t.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),r.length&&(o[3]=Uv([],r,!1,!1,i),a=4),t.scopeId&&!t.slotted&&(a=5),o.splice(a),e.codegenNode=xn(t.helper(eue),o,i)}};function Uze(e,t){let r='"default"',i;const n=[];for(let s=0;s<e.props.length;s++){const o=e.props[s];o.type===6?o.value&&(o.name==="name"?r=JSON.stringify(o.value.content):(o.name=yW(o.name),n.push(o))):o.name==="bind"&&Qy(o.arg,"name")?o.exp&&(r=o.exp):(o.name==="bind"&&o.arg&&Wo(o.arg)&&(o.arg.content=yW(o.arg.content)),n.push(o))}if(n.length>0){const{props:s,directives:o}=bue(e,t,n);i=s,o.length&&t.onError(di(36,o[0].loc))}return{slotName:r,slotProps:i}}const Vze=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,wue=(e,t,r,i)=>{const{loc:n,modifiers:s,arg:o}=e;!e.exp&&!s.length&&r.onError(di(35,n));let a;if(o.type===4)if(o.isStatic){let p=o.content;p.startsWith("vue:")&&(p=`vnode-${p.slice(4)}`),a=xr(Iu(gs(p)),!0,o.loc)}else a=nh([`${r.helperString(oL)}(`,o,")"]);else a=o,a.children.unshift(`${r.helperString(oL)}(`),a.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let u=r.cacheHandlers&&!l&&!r.inVOnce;if(l){const p=nue(l.content),d=!(p||Vze.test(l.content)),m=l.content.includes(";");Xy(l,r,!1,m),(d||u&&p)&&(l=nh([`${d?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let c={props:[hn(a,l||xr("() => {}",!1,n))]};return i&&(c=i(c)),u&&(c.props[0].value=r.cache(c.props[0].value)),c.props.forEach(p=>p.key.isHandlerKey=!0),c},Bze=(e,t,r)=>{const{exp:i,modifiers:n,loc:s}=e,o=e.arg;return o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=`${o.content} || ""`),n.includes("camel")&&(o.type===4?o.isStatic?o.content=gs(o.content):o.content=`${r.helperString(sL)}(${o.content})`:(o.children.unshift(`${r.helperString(sL)}(`),o.children.push(")"))),r.inSSR||(n.includes("prop")&&gW(o,"."),n.includes("attr")&&gW(o,"^")),!i||i.type===4&&!i.content.trim()?(r.onError(di(34,s)),{props:[hn(o,xr("",!0,s))]}):{props:[hn(o,i)]}},gW=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},zze=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const r=e.children;let i,n=!1;for(let s=0;s<r.length;s++){const o=r[s];if(xk(o)){n=!0;for(let a=s+1;a<r.length;a++){const l=r[a];if(xk(l))i||(i=r[s]={type:8,loc:o.loc,children:[o]}),i.children.push(" + ",l),r.splice(a,1),a--;else{i=void 0;break}}}}if(!(!n||r.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<r.length;s++){const o=r[s];if(xk(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!t.ssr&&Nl(o,t)===0&&a.push(1+` /* ${rh[1]} */`),r[s]={type:12,content:o,loc:o.loc,codegenNode:xn(t.helper(e7),a)}}}}},vW=new WeakSet,Gze=(e,t)=>{if(e.type===1&&Cl(e,"once",!0))return vW.has(e)||t.inVOnce?void 0:(vW.add(e),t.inVOnce=!0,t.helper(xT),()=>{t.inVOnce=!1;const r=t.currentNode;r.codegenNode&&(r.codegenNode=t.cache(r.codegenNode,!0))})},_ue=(e,t,r)=>{const{exp:i,arg:n}=e;if(!i)return r.onError(di(41,e.loc)),Ik();const s=i.loc.source,o=i.type===4?i.content:s;r.bindingMetadata[s];const a=!1;if(!o.trim()||!nue(o)&&!a)return r.onError(di(42,i.loc)),Ik();const l=n||xr("modelValue",!0),u=n?Wo(n)?`onUpdate:${n.content}`:nh(['"onUpdate:" + ',n]):"onUpdate:modelValue";let c;const p=r.isTS?"($event: any)":"$event";c=nh([`${p} => ((`,i,") = $event)"]);const d=[hn(l,e.exp),hn(u,c)];if(e.modifiers.length&&t.tagType===1){const m=e.modifiers.map(b=>(h7(b)?b:JSON.stringify(b))+": true").join(", "),g=n?Wo(n)?`${n.content}Modifiers`:nh([n,' + "Modifiers"']):"modelModifiers";d.push(hn(g,xr(`{ ${m} }`,!1,e.loc,2)))}return Ik(d)};function Ik(e=[]){return{props:e}}const qze=/[\w).+\-_$\]]/,Hze=(e,t)=>{!Rf("COMPILER_FILTER",t)||(e.type===5&&AT(e.content,t),e.type===1&&e.props.forEach(r=>{r.type===7&&r.name!=="for"&&r.exp&&AT(r.exp,t)}))};function AT(e,t){if(e.type===4)bW(e,t);else for(let r=0;r<e.children.length;r++){const i=e.children[r];typeof i=="object"&&(i.type===4?bW(i,t):i.type===8?AT(e,t):i.type===5&&AT(i.content,t))}}function bW(e,t){const r=e.content;let i=!1,n=!1,s=!1,o=!1,a=0,l=0,u=0,c=0,p,d,m,g,b=[];for(m=0;m<r.length;m++)if(d=p,p=r.charCodeAt(m),i)p===39&&d!==92&&(i=!1);else if(n)p===34&&d!==92&&(n=!1);else if(s)p===96&&d!==92&&(s=!1);else if(o)p===47&&d!==92&&(o=!1);else if(p===124&&r.charCodeAt(m+1)!==124&&r.charCodeAt(m-1)!==124&&!a&&!l&&!u)g===void 0?(c=m+1,g=r.slice(0,m).trim()):v();else{switch(p){case 34:n=!0;break;case 39:i=!0;break;case 96:s=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(p===47){let _=m-1,E;for(;_>=0&&(E=r.charAt(_),E===" ");_--);(!E||!qze.test(E))&&(o=!0)}}g===void 0?g=r.slice(0,m).trim():c!==0&&v();function v(){b.push(r.slice(c,m).trim()),c=m+1}if(b.length){for(PA("COMPILER_FILTER",t,e.loc),m=0;m<b.length;m++)g=Wze(g,b[m],t);e.content=g}}function Wze(e,t,r){r.helper(i7);const i=t.indexOf("(");if(i<0)return r.filters.add(t),`${Lx(t,"filter")}(${e})`;{const n=t.slice(0,i),s=t.slice(i+1);return r.filters.add(n),`${Lx(n,"filter")}(${e}${s!==")"?","+s:s}`}}const wW=new WeakSet,Jze=(e,t)=>{if(e.type===1){const r=Cl(e,"memo");return!r||wW.has(e)?void 0:(wW.add(e),()=>{const i=e.codegenNode||t.currentNode.codegenNode;i&&i.type===13&&(e.tagType!==1&&p7(i,t),e.codegenNode=xn(t.helper(c7),[r.exp,Uv(void 0,i),"_cache",String(t.cached++)]))})}};function Zze(e){return[[Gze,wze,Jze,Eze,Hze,bze,jze,Oze,$ze,zze],{on:wue,bind:Bze,model:_ue}]}function Kze(e,t={}){const r=t.onError||KF,i=t.mode==="module";t.prefixIdentifiers===!0?r(di(46)):i&&r(di(47));const n=!1;t.cacheHandlers&&r(di(48)),t.scopeId&&!i&&r(di(49));const s=lr(e)?DBe(e,t):e,[o,a]=Zze();return YBe(s,Or({},t,{prefixIdentifiers:n,nodeTransforms:[...o,...t.nodeTransforms||[]],directiveTransforms:Or({},a,t.directiveTransforms||{})})),tze(s,Or({},t,{prefixIdentifiers:n}))}const Yze=()=>({props:[]}),xue=Symbol("vModelRadio"),Sue=Symbol("vModelCheckbox"),Eue=Symbol("vModelText"),Mue=Symbol("vModelSelect"),dL=Symbol("vModelDynamic"),Iue=Symbol("vOnModifiersGuard"),Tue=Symbol("vOnKeysGuard"),Aue=Symbol("vShow"),m7=Symbol("Transition"),$ue=Symbol("TransitionGroup");_Be({[xue]:"vModelRadio",[Sue]:"vModelCheckbox",[Eue]:"vModelText",[Mue]:"vModelSelect",[dL]:"vModelDynamic",[Iue]:"withModifiers",[Tue]:"withKeys",[Aue]:"vShow",[m7]:"Transition",[$ue]:"TransitionGroup"});let P0;function Qze(e,t=!1){return P0||(P0=document.createElement("div")),t?(P0.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,P0.children[0].getAttribute("foo")):(P0.innerHTML=e,P0.textContent)}const Xze=Ws("style,iframe,script,noscript",!0),eGe={isVoidTag:kje,isNativeTag:e=>Goe(e)||qoe(e),isPreTag:e=>e==="pre",decodeEntities:Qze,isBuiltInComponent:e=>{if(Yy(e,"Transition"))return m7;if(Yy(e,"TransitionGroup"))return $ue},getNamespace(e,t){let r=t?t.ns:0;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r},getTextMode({tag:e,ns:t}){if(t===0){if(e==="textarea"||e==="title")return 1;if(Xze(e))return 2}return 0}},tGe=e=>{e.type===1&&e.props.forEach((t,r)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[r]={type:7,name:"bind",arg:xr("style",!0,t.loc),exp:rGe(t.value.content,t.loc),modifiers:[],loc:t.loc})})},rGe=(e,t)=>{const r=Boe(e);return xr(JSON.stringify(r),!1,t,3)};function Lu(e,t){return di(e,t,iGe)}const iGe={[50]:"v-html is missing expression.",[51]:"v-html will override element children.",[52]:"v-text is missing expression.",[53]:"v-text will override element children.",[54]:"v-model can only be used on <input>, <textarea> and <select> elements.",[55]:"v-model argument is not supported on plain elements.",[56]:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",[57]:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",[58]:"v-show is missing expression.",[59]:"<Transition> expects exactly one child element or component.",[60]:"Tags with side effect (<script> and <style>) are ignored in client component templates."},nGe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(Lu(50,n)),t.children.length&&(r.onError(Lu(51,n)),t.children.length=0),{props:[hn(xr("innerHTML",!0,n),i||xr("",!0))]}},sGe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(Lu(52,n)),t.children.length&&(r.onError(Lu(53,n)),t.children.length=0),{props:[hn(xr("textContent",!0),i?xn(r.helperString(RA),[i],n):xr("",!0))]}},oGe=(e,t,r)=>{const i=_ue(e,t,r);if(!i.props.length||t.tagType===1)return i;e.arg&&r.onError(Lu(55,e.arg.loc));function n(){const a=Vv(t,"value");a&&r.onError(Lu(57,a.loc))}const{tag:s}=t,o=r.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||o){let a=Eue,l=!1;if(s==="input"||o){const u=Vv(t,"type");if(u){if(u.type===7)a=dL;else if(u.value)switch(u.value.content){case"radio":a=xue;break;case"checkbox":a=Sue;break;case"file":l=!0,r.onError(Lu(56,e.loc));break;default:n();break}}else CBe(t)?a=dL:n()}else s==="select"?a=Mue:n();l||(i.needRuntime=r.helper(a))}else r.onError(Lu(54,e.loc));return i.props=i.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),i},aGe=Ws("passive,once,capture"),lGe=Ws("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),uGe=Ws("left,right"),Cue=Ws("onkeyup,onkeydown,onkeypress",!0),cGe=(e,t,r,i)=>{const n=[],s=[],o=[];for(let a=0;a<t.length;a++){const l=t[a];l==="native"&&Ug("COMPILER_V_ON_NATIVE",r,i)||aGe(l)?o.push(l):uGe(l)?Wo(e)?Cue(e.content)?n.push(l):s.push(l):(n.push(l),s.push(l)):lGe(l)?s.push(l):n.push(l)}return{keyModifiers:n,nonKeyModifiers:s,eventOptionModifiers:o}},_W=(e,t)=>Wo(e)&&e.content.toLowerCase()==="onclick"?xr(t,!0):e.type!==4?nh(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,hGe=(e,t,r)=>wue(e,t,r,i=>{const{modifiers:n}=e;if(!n.length)return i;let{key:s,value:o}=i.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=cGe(s,n,r,e.loc);if(l.includes("right")&&(s=_W(s,"onContextmenu")),l.includes("middle")&&(s=_W(s,"onMouseup")),l.length&&(o=xn(r.helper(Iue),[o,JSON.stringify(l)])),a.length&&(!Wo(s)||Cue(s.content))&&(o=xn(r.helper(Tue),[o,JSON.stringify(a)])),u.length){const c=u.map(Ju).join("");s=Wo(s)?xr(`${s.content}${c}`,!0):nh(["(",s,`) + "${c}"`])}return{props:[hn(s,o)]}}),pGe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(Lu(58,n)),{props:[],needRuntime:r.helper(Aue)}},dGe=(e,t)=>{if(e.type===1&&e.tagType===1&&t.isBuiltInComponent(e.tag)===m7)return()=>{e.children.length&&kue(e)&&t.onError(Lu(59,{start:e.children[0].loc.start,end:e.children[e.children.length-1].loc.end,source:""}))}};function kue(e){const t=e.children=e.children.filter(i=>i.type!==3&&!(i.type===2&&!i.content.trim())),r=t[0];return t.length!==1||r.type===11||r.type===9&&r.branches.some(kue)}const fGe=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&(t.onError(Lu(60,e.loc)),t.removeNode())},mGe=[tGe,dGe],yGe={cloak:Yze,html:nGe,text:sGe,model:oGe,on:hGe,show:pGe};function gGe(e,t={}){return Kze(e,Or({},eGe,t,{nodeTransforms:[fGe,...mGe,...t.nodeTransforms||[]],directiveTransforms:Or({},yGe,t.directiveTransforms||{}),transformHoist:null}))}function vGe(){zF()}vGe();const xW=Object.create(null);function Oue(e,t){if(!lr(e))if(e.nodeType)e=e.innerHTML;else return Xe("invalid template option: ",e),ps;const r=e,i=xW[r];if(i)return i;if(e[0]==="#"){const a=document.querySelector(e);a||Xe(`Template element not found or is empty: ${e}`),e=a?a.innerHTML:""}const{code:n}=gGe(e,Or({hoistStatic:!0,onError:s,onWarn:a=>s(a,!0)},t));function s(a,l=!1){const u=l?a.message:`Template compilation error: ${a.message}`,c=a.loc&&Sje(e,a.loc.start.offset,a.loc.end.offset);Xe(c?`${u}
${c}`:u)}const o=new Function("Vue",n)(fBe);return o._rc=!0,xW[r]=o}UF(Oue);var Llt=Object.freeze(Object.defineProperty({__proto__:null,compile:Oue,EffectScope:lA,ReactiveEffect:Fb,customRef:wae,effect:nae,effectScope:Qoe,getCurrentScope:eae,isProxy:Lv,isReactive:Uu,isReadonly:Dp,isRef:ai,isShallow:fA,markRaw:vs,onScopeDispose:tae,proxyRefs:yA,reactive:oa,readonly:pA,ref:hs,shallowReactive:uF,shallowReadonly:gf,shallowRef:gae,stop:sae,toRaw:Bt,toRef:pF,toRefs:_ae,triggerRef:bae,unref:Mx,camelize:gs,capitalize:Ju,normalizeClass:In,normalizeProps:zoe,normalizeStyle:pm,toDisplayString:Ci,toHandlerKey:Iu,BaseTransition:_A,Comment:Tn,Fragment:Xr,KeepAlive:Fae,Static:xp,Suspense:Oae,Teleport:Qae,Text:dh,callWithAsyncErrorHandling:Ko,callWithErrorHandling:Vu,cloneVNode:Ku,compatUtils:Ale,computed:$u,createBlock:Vi,createCommentVNode:Tr,createElementBlock:Ct,createElementVNode:ut,createHydrationRenderer:PF,createPropsRestProxy:xle,createRenderer:RF,createSlots:sle,createStaticVNode:FF,createTextVNode:Sp,createVNode:ar,defineAsyncComponent:xA,defineComponent:Ar,defineEmits:mle,defineExpose:yle,defineProps:fle,get devtools(){return mp},getCurrentInstance:xo,getTransitionRawChildren:NS,guardReactiveProps:DF,h:Qo,handleError:dm,initCustomFormatter:zF,inject:gg,isMemoSame:GF,isRuntimeOnly:IA,isVNode:Zu,mergeDefaults:_le,mergeProps:MA,nextTick:OS,onActivated:EF,onBeforeMount:IF,onBeforeUnmount:FS,onBeforeUpdate:TF,onDeactivated:MF,onErrorCaptured:kF,onMounted:bh,onRenderTracked:CF,onRenderTriggered:$F,onServerPrefetch:AF,onUnmounted:l0,onUpdated:DS,openBlock:pt,popScopeId:Hp,provide:xF,pushScopeId:qp,queuePostFlushCb:RS,registerRuntimeCompiler:UF,renderList:u0,renderSlot:Pu,resolveComponent:Lr,resolveDirective:ci,resolveDynamicComponent:LF,resolveFilter:Tle,resolveTransitionHooks:Fg,setBlockTracking:yT,setDevtoolsHook:vA,setTransitionHooks:Xf,ssrContextKey:BF,ssrUtils:Ile,toHandlers:ale,transformVNodeArgs:rle,useAttrs:ble,useSSRContext:Ele,useSlots:vle,useTransitionState:wA,version:gT,warn:Xe,watch:Yo,watchEffect:Pae,watchPostEffect:SF,watchSyncEffect:Lae,withAsyncContext:Sle,withCtx:dn,withDefaults:gle,withDirectives:ti,withMemo:Mle,withScopeId:kae,Transition:US,TransitionGroup:HF,VueElement:jS,createApp:OA,createSSRApp:Gle,defineCustomElement:qF,defineSSRCustomElement:Cle,hydrate:ZF,initDirectivesForSSR:Jle,render:Ep,useCssModule:kle,useCssVars:Ole,vModelCheckbox:$A,vModelDynamic:Ule,vModelRadio:CA,vModelSelect:WF,vModelText:kx,vShow:kA,withKeys:JF,withModifiers:VS},Symbol.toStringTag,{value:"Module"}));function HS(e){return!!e&&typeof e=="object"}function SW(e){return typeof e=="number"||/^\d+$/.test(e)}function bGe(e,t){return HS(e)&&t in e}function FA(e){return e?Array.isArray(e)?e.map(function(t){return String(t)}):typeof e=="object"?Object.keys(e):typeof e=="string"?e.match(/[-$\w]+/g)||[]:[]:[]}function wGe(e,t){var r=e,i=FA(t);return i.every(function(n){var s=HS(r)&&r.hasOwnProperty(n);return r=s?r[n]:void 0,s}),r}function _Ge(e,t,r,i){i===void 0&&(i=!1);var n=FA(t);return n.reduce(function(s,o,a){if(!s)return!1;if(Array.isArray(s)&&SW(o)&&(o=parseInt(o)),a===n.length-1)return s[o]=r,!0;if(!HS(s[o])||!(o in s))if(i)s[o]=SW(n[a+1])?[]:{};else return!1;return s[o]},e)}function xGe(e,t){var r=FA(t);if(HS(e)){for(;r.length;){var i=r.shift();if(bGe(e,i))e=e[i];else return!1}return!0}return!1}function SGe(e){return JSON.parse(JSON.stringify(e))}var vf={mapping:"standard",strict:!0,cache:!0,deep:1},EGe={camel:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.shift()+e.map(function(r){return r.replace(/\w/,function(i){return i.toUpperCase()})}).join("")},snake:function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];return(e=this).camel.apply(e,t).replace(/([a-z])([A-Z])/g,function(i,n,s){return n+"_"+s}).toLowerCase()},const:function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];return(e=this).snake.apply(e,t).toUpperCase()}},MGe={state:"state",getters:"getters",actions:"_actions",mutations:"_mutations"},EW={standard:function(t,r,i){switch(t){case"mutations":return i.const("set",r);case"actions":return i.camel("set",r)}return r},simple:function(t,r,i){return t==="actions"?i.camel("set",r):r}},Tk;function Gv(e,t){if(t.match(/!$/))return t.substr(0,t.length-1);var r=Tk;if(!r){if(r=EW[vf.mapping],!r)throw new Error("[Vuex Pathify] Unknown mapping '"+vf.mapping+`' in options
    - Choose one of '`+Object.keys(EW).join("', '")+`'
    - Or, supply a custom function
`);Tk=r}return Tk(e,t,EGe)}function fL(e,t){var r=t.replace(/[/@!]+/g,"."),i=t.split("@"),n=i[0],s=i[1],o,a;if(n.indexOf("/")>-1){var l=n.split("/");a=l.pop(),o=l.join("/")}else a=n;if(o&&!e._modulesNamespaceMap[o+"/"])throw new Error("[Vuex Pathify] Unknown module '"+o+"' via path '"+t+"'");return{absPath:r,module:o,target:n,name:a.replace("!",""),isDynamic:t.indexOf(":")>-1,get:function(u){var c=e[MGe[u]],p=Gv(u,a),d=o?o+"/"+p:p;return{exists:u==="state"?xGe(c,d):d in c,member:c,trgPath:d,trgName:p,objPath:s}}}}function Rue(e,t,r,i,n,s){var o="[Vuex Pathify] Unable to map path '"+e+"':";if(e.indexOf("!")>-1)o+=`
    - Did not find `+r+" or "+n+" named '"+t.name+"' on "+(t.module?"module '"+t.module+"'":"root store");else{var a=i?r+" '"+i.trgName+"' or ":"",l=n+" '"+s.trgName+"'";o+=`
    - Did not find `+a+l+" on "+(t.module?"module '"+t.module+"'":"store")+`
    - Use direct syntax '`+t.target.replace(/(@|$)/,"!$1")+"' (if member exists) to target directly"}return o}var $T=function(t,r,i){this.expr=t,this.path=r,this.value=i};$T.prototype.update=function(t){var r=_Ge(t,this.path,this.value,vf.deep>1);return r?Array.isArray(t)?[].concat(t):Object.assign({},t):(console.error("[Vuex Pathify] Unable to create sub-property for path '"+this.expr+`':
    - Set option 'deep' to 2 to allow it`),t)};function IGe(e,t){var r=fL(e,t),i=r.get("actions");if(i.exists)return function(s){var o=i.objPath?new $T(t,i.objPath,s):s;return e.dispatch(i.trgPath,o)};var n=r.get("mutations");return n.exists||r.isDynamic?function(s){if(r.isDynamic){var o=Pue(t,this);n=fL(e,o).get("mutations")}var a=n.objPath?new $T(t,n.objPath,s):s;return e.commit(n.trgPath,a)}:(console.error(Rue(t,r,"action",i,"mutation",n)),function(s){})}function TGe(e,t,r){var i=fL(e,t),n;if(!r&&(n=i.get("getters"),n.exists))return function(){var o=n.member[n.trgPath];return n.objPath?MW(t,o,n.objPath):o};var s=i.get("state");return s.exists||i.isDynamic?function(){var o=i.isDynamic?Pue(i.absPath,this):i.absPath;return MW(t,e.state,o)}:(console.error(Rue(t,i,"getter",n,"state",s)),function(){})}function MW(e,t,r){return wGe(t,r)}function Pue(e,t){return e.replace(/:(\w+)/g,function(i,n){return n in t||console.error('Error resolving dynamic store path: The property "'+n+'" does not exist on the scope',t),t[n]})}function AGe(e){e.set=function(t,r){var i=IGe(e,t);if(typeof i<"u")return i(r)},e.get=function(t){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var n=TGe(e,t);if(typeof n<"u"){var s=n();return typeof s=="function"?s.apply(void 0,r):s}},e.copy=function(t){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var n=e.get.apply(e,[t].concat(r));return HS(n)?SGe(n):n}}function BE(e){return Gv(e,"value")}function $Ge(){console.log(`
  [Vuex Pathify] Options:

  Mapping (`+vf.mapping+`)
-------------------------------
  path       : value
  state      : `+BE("state")+`
  getters    : `+BE("getters")+`
  actions    : `+BE("actions")+`
  mutations  : `+BE("mutations")+`

  Settings
-------------------------------
  strict     : `+vf.strict+`
  cache      : `+vf.cache+`
  deep       : `+vf.deep+`

`)}function CGe(e){AGe(e)}var kGe={options:vf,plugin:CGe,debug:$Ge};function y7(e){return FA(typeof e=="function"?e():e)}function OGe(e){return y7(e).reduce(function(t,r){var i=Gv("getters",r);return t[i]=function(n){return n[r]},t},{})}function RGe(e){return y7(e).reduce(function(t,r){var i=Gv("mutations",r);return t[i]=function(n,s){n[r]=s instanceof $T?s.update(n[r]):s},t},{})}function PGe(e){return y7(e).reduce(function(t,r){var i=Gv("actions",r),n=Gv("mutations",r);return t[i]=function(s,o){var a=s.commit;a(n,o)},t},{})}var tl={getters:OGe,mutations:RGe,actions:PGe},mL=(e=>(e.ADD_TEMP_BUTTON="addTempButton",e.REMOVE_BUTTON="removeButton",e))(mL||{});const LGe={visible(e){return e.order.map(t=>t.map(r=>e.items[typeof r=="string"?r:r.id]).filter(r=>{if(typeof r=="string"||r.componentId)return!0})).filter(t=>t.length>0)}},NGe={addTempButton(e,t){e.state.temporary.find(r=>r===t)||e.commit("ADD_TEMP_BUTTON",t)},removeButton(e,t){e.commit("REMOVE_BUTTON",t)}},DGe={ADD_TEMP_BUTTON(e,t){e.temporary.push(t)},REMOVE_BUTTON(e,t){const r=e.temporary.indexOf(t);r!==-1&&e.temporary.splice(r,1),t in e.items&&delete e.items[t],e.order.forEach(i=>{const n=i.indexOf(t);n!==-1&&i.splice(n,1)})}};function Nlt(){const e=new bje;return{namespaced:!0,state:e,getters:{...LGe},actions:{...NGe},mutations:{...DGe,...tl.mutations(["items","order","temporary","tempButtonDict"])}}}class FGe{grids={};panel=null;currentId=null}var Lue=(e=>(e.addGrid="addGrid",e.removeGrid="removeGrid",e))(Lue||{});const jGe={get:e=>t=>e.grids[t]},UGe={addGrid(e,t){e.commit("ADD_GRID",t)},removeGrid(e,t){e.commit("REMOVE_GRID",t)}},VGe={ADD_GRID(e,t){e.grids={...e.grids,[t.id]:t}},REMOVE_GRID(e,t){e.grids[t]!==void 0&&delete e.grids[t]}};var yL=(e=>(e.grids="grid/grids",e.currentId="grid/currentId",e))(yL||{});function Dlt(){const e=new FGe;return{namespaced:!0,state:e,getters:{...jGe},actions:{...UGe},mutations:{...VGe,...tl.mutations(["grids","currentId"])}}}function eg(e,t,r,i){var n,s=!1,o=0;function a(){n&&clearTimeout(n)}function l(){a(),s=!0}typeof t!="boolean"&&(i=r,r=t,t=void 0);function u(){for(var c=arguments.length,p=new Array(c),d=0;d<c;d++)p[d]=arguments[d];var m=this,g=Date.now()-o;if(s)return;function b(){o=Date.now(),r.apply(m,p)}function v(){n=void 0}i&&!n&&b(),a(),i===void 0&&g>e?b():t!==!0&&(n=setTimeout(i?v:b,i===void 0?e-g:e))}return u.cancel=l,u}function CT(e,t,r){return r===void 0?eg(e,t,!1):eg(e,r,t!==!1)}class BGe{attribution;scale;coords;constructor(t,r,i){this.attribution=t,this.scale=r,this.coords=i}}const zGe={},GGe={setAttribution:(e,t)=>{e.commit("SET_ATTRIBUTION",t)},setCoords:(e,t)=>{e.commit("SET_COORDS",t)},setScale:(e,t)=>{e.commit("SET_SCALE",t)},toggleScale:(e,t)=>{e.commit("TOGGLE_SCALE",t)}},qGe={SET_ATTRIBUTION:(e,t)=>{e.attribution=t},SET_COORDS:(e,t)=>{e.coords=t},SET_SCALE:(e,t)=>{e.scale=t},TOGGLE_SCALE:(e,t)=>{t!==void 0?e.scale.isImperialScale=t:e.scale.isImperialScale=!e.scale.isImperialScale}};var Ps=(e=>(e.attribution="mapcaption/attribution",e.setAttribution="mapcaption/setAttribution!",e.coords="mapcaption/coords",e.setCoords="mapcaption/setCoords!",e.scale="mapcaption/scale",e.setScale="mapcaption/setScale!",e.toggleScale="mapcaption/toggleScale!",e))(Ps||{});function HGe(){const e=new BGe({text:{},logo:{}},{},{});return{namespaced:!0,state:e,getters:{...zGe},actions:{...GGe,...tl.actions(e)},mutations:{...qGe,...tl.mutations(e)}}}class WGe{config;startingFixtures;activeBasemapConfig;registeredConfigs;registeredLangs;constructor(t){this.config=t,this.startingFixtures=[],this.registeredConfigs={},this.registeredLangs={}}}class JGe{layers;penaltyBox;layerConfigs;constructor(t,r){this.layers=t,this.penaltyBox=[],this.layerConfigs=r}}const IW=(e,t)=>{const r=[...e];for(;r.length>0;){const i=r.shift();if(t(i))return i;i&&r.push(...i.sublayers)}},ZGe={getLayerByUid:e=>t=>IW(e.layers,r=>r?.uid===t),getLayerById:e=>t=>IW(e.layers,r=>r?.id===t)},KGe={addLayerConfigs:(e,t)=>{!Array.isArray(t)||t.forEach(r=>{e.commit("ADD_LAYER_CONFIG",r)})},reorderLayer:(e,{layer:t,index:r})=>{e.commit("REORDER_LAYER",{layer:t,index:r})},addLayers:(e,t)=>{!Array.isArray(t)||t.forEach(r=>{e.commit("ADD_LAYER",r)})},addErrorLayers:(e,t)=>{!Array.isArray(t)||t.forEach(r=>{e.commit("ADD_ERROR_LAYER",r)})},removeLayer:(e,t)=>{e.commit("REMOVE_LAYER",t)},removeErrorLayer:(e,t)=>{e.commit("REMOVE_ERROR_LAYER",t)},removeLayerConfig:(e,t)=>{e.commit("REMOVE_LAYER_CONFIG",t)}},YGe={ADD_LAYER_CONFIG:(e,t)=>{e.layerConfigs=[...e.layerConfigs,t]},ADD_LAYER:(e,t)=>{e.layers=[...e.layers,t]},ADD_ERROR_LAYER:(e,t)=>{e.penaltyBox=[...e.penaltyBox,t]},REORDER_LAYER:(e,{layer:t,index:r=e.layers.length})=>{const i=e.layers.findIndex(n=>n.uid===t.uid);i!==-1&&i!==r&&(e.layers.splice(i,1),e.layers.splice(r,0,t),e.layers=[...e.layers])},REMOVE_LAYER:(e,t)=>{const r=e.layers.filter(i=>i.id!==t.id||i.uid!==t.uid);e.layers=r},REMOVE_ERROR_LAYER:(e,t)=>{const r=t instanceof jT?t.id:t,i=t instanceof jT?t.uid:t,n=e.penaltyBox.filter(s=>s.id!==r&&s.uid!==i);e.penaltyBox=n},REMOVE_LAYER_CONFIG:(e,t)=>{const r=e.layerConfigs.filter(i=>i.id!==t);e.layerConfigs=r}};var Lo=(e=>(e.getLayerByUid="layer/getLayerByUid",e.getLayerById="layer/getLayerById",e.layers="layer/layers",e.penaltyBox="layer/penaltyBox",e.reorderLayer="layer/reorderLayer!",e.addLayers="layer/addLayers!",e.addErrorLayers="layer/addErrorLayers!",e.removeLayer="layer/removeLayer!",e.removeErrorLayer="layer/removeErrorLayer!",e.layerConfigs="layer/layerConfigs",e.addLayerConfigs="layer/addLayerConfigs!",e.removeLayerConfig="layer/removeLayerConfig!",e))(Lo||{});function QGe(){const e=new JGe([],[]);return{namespaced:!0,state:e,getters:{...ZGe},actions:{...KGe,...tl.actions(e)},mutations:{...YGe,...tl.mutations(e)}}}const XGe={getRegisteredConfigs:e=>e.registeredConfigs,getRegisteredLangs:e=>e.registeredLangs,getActiveConfig:e=>t=>{if(e.registeredConfigs[e.registeredLangs[t]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return e.registeredConfigs[e.registeredLangs[t]]},getMapConfig:e=>e.config.map,getActiveBasemapConfig:e=>e.activeBasemapConfig,getStartingFixtures:e=>[...e.startingFixtures],getFixtureConfig:e=>t=>e.config.fixtures[t]},eqe={newConfig:function(e,t){const r={...e.state.config,...t};e.commit("SET_CONFIG",r),this.set(Lo.addLayerConfigs,t.layers)},registerConfig:function(e,t){const r=t.configLangs,i=t.config,n=t.allLangs;r!==void 0&&r.length>0&&r.forEach(s=>{e.state.registeredConfigs[s]=i,e.state.registeredLangs[s]=s}),n!==void 0&&n.length>0&&n.forEach(s=>{e.state.registeredLangs[s]=Object.keys(e.state.registeredConfigs)[0]})},updateConfig:function(e,t){const r={fixtures:{...e.state.config.fixtures,...t}},i={...e.state.config,...r};e.dispatch("registerConfig",i),e.commit("SET_CONFIG",i)},setActiveBasemap:function(e,t){e.state.activeBasemapConfig=t},setStartingFixtures:function(e,t){e.state.startingFixtures=[...t]}},tqe={};var Os=(e=>(e.newConfig="config/newConfig!",e.registerConfig="config/registerConfig!",e.updateConfig="config/updateConfig!",e.setActiveBasemap="config/setActiveBasemap!",e.setStartingFixtures="config/setStartingFixtures!",e.getRegisteredConfigs="config/getRegisteredConfigs",e.getRegisteredLangs="config/getRegisteredLangs",e.getActiveConfig="config/getActiveConfig",e.getMapConfig="config/getMapConfig",e.getActiveBasemapConfig="config/getActiveBasemapConfig",e.getStartingFixtures="config/getStartingFixtures",e.getFixtureConfig="config/getFixtureConfig",e))(Os||{});function rqe(){const e=new WGe({map:{lods:[],extent:{xmin:0,xmax:0,ymin:0,ymax:0,spatialReference:{}},basemaps:[],initialBasemapId:""},fixtures:{},layers:[]});return{namespaced:!0,state:e,getters:{...XGe},actions:{...eqe,...tl.actions(e)},mutations:{...tqe,...tl.mutations(e)}}}class Flt{id;name;template;componentId;constructor(t){const r={...typeof t=="string"?{id:t,template:"",name:""}:t};({template:this.template,id:this.id,name:this.name}=r)}}class iqe{payload=[];properties={};defaultTemplates={};currentFeatureId=void 0;slowLoadingFlag=!1;activeGreedy=0;hilightToggle=!0}const nqe={},sqe={setPayload(e,t){e.commit("SET_PAYLOAD",t)},removeLayer(e,t){e.commit("REMOVE_LAYER",t)}},oqe={SET_PAYLOAD(e,t){e.payload=t},REMOVE_LAYER(e,t){const r=e.payload.findIndex(i=>i.uid===t.uid);r!==-1&&e.payload.splice(r,1)}};var Nue=(e=>(e.payload="details/payload",e.properties="details/properties",e.defaultTemplates="details/defaultTemplates",e.currentFeatureId="details/currentFeatureId",e.slowLoadingFlag="details/slowLoadingFlag",e.activeGreedy="details/activeGreedy",e.hilightToggle="details/hilightToggle",e.setPayload="details/setPayload!",e.removeLayer="details/removeLayer!",e))(Nue||{});function jlt(){const e=new iqe;return{namespaced:!0,state:e,getters:{...nqe},actions:{...sqe},mutations:{...oqe,...tl.mutations(e)}}}var Wt=(e=>(e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_TOGGLE="details/toggle",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",e.LAYER_LAYERSTATECHANGE="layer/layerstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_FOCUS="map/focus",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_TOGGLE="metadata/toggle",e.PANEL_CLOSED="panel/closed",e.PANEL_MINIMIZED="panel/minimized",e.PANEL_OPENED="panel/opened",e.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",e.REORDER_TOGGLE="reorder/toggle",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_TOGGLE="wizard/toggle",e))(Wt||{});class aqe{eventName;handlerName;handlerFunc;constructor(t,r,i){this.eventName=t,this.handlerName=r,this.handlerFunc=i}}class lqe extends Bn{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new vje,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(Wt).filter(r=>typeof r=="string"&&r.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(r=>r.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(i=>{this._nameRegister.indexOf(i)===-1&&this._nameRegister.push(i)})}eventNames(){return this._nameRegister.slice()}on(t,r,i=""){if(this.findHandler(i))throw new Error("Duplicate handler name registration: "+i);i||(i=this.handlerNamer(t));const n=new aqe(t,i,r);return this._eventRegister.push(n),this._eventBus.on(t,r),i}off(t){const r=this.findHandler(t);r&&(this._eventRegister.splice(this._eventRegister.indexOf(r),1),this._eventBus.off(r.eventName,r.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(i=>this.off(i))}emit(t,...r){this._eventBus.emit(t,...r)}once(t,r,i=""){i||(i=this.handlerNamer(t));const n=(...s)=>{r(...s),this.off(i)};return this.on(t,n,i)}activeHandlers(t=""){return t===""?this._eventRegister.map(r=>r.handlerName):this._eventRegister.filter(r=>r.eventName===t).map(r=>r.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=["ramp_config_change_updates_map_attribs","ramp_layer_error_updates_legend","ramp_layer_register_binds_legend","ramp_layer_reload_end_binds_legend","ramp_layer_reload_start_updates_legend","ramp_layer_remove_updates_details","ramp_layer_remove_closes_grid","ramp_layer_remove_updates_legend","ramp_layer_useradd_updates_legend","ramp_map_basemap_updates_map_attribs","ramp_map_blur_updates_key_handler","ramp_map_click_runs_identify","ramp_map_created_updates_map_attribs","ramp_map_extent_updates_maptip","ramp_map_graphichit_creates_maptip","ramp_map_identify_opens_identify_results","ramp_map_keydown_updates_coords","ramp_map_keydown_updates_key_handler","ramp_map_keyup_updates_key_handler","ramp_map_mouse_updates_coords","ramp_map_mouse_updates_maptip","ramp_map_resize_updates_scalebar","ramp_map_scale_updates_scalebar","ramp_panel_close_updates_appbar","ramp_panel_open_updates_appbar","ramp_toggle_details","ramp_toggle_grid","ramp_toggle_help","ramp_toggle_metadata","ramp_toggle_reorder","ramp_toggle_settings","ramp_toggle_wizard"]),t.map(r=>this.defaultHandlerFactory(r))}defaultHandlerFactory(t){let r;switch(t){case"ramp_config_change_updates_map_attribs":r=i=>{const n=i.map.basemaps.find(s=>s.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(n?.attribution)},this.$iApi.event.on("config/configchanged",r,t);break;case"ramp_layer_error_updates_legend":r=i=>{if(i.layer.layerState===co.ERROR){const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(i.layer)}},this.$iApi.event.on("layer/layerstatechange",r,t);break;case"ramp_layer_register_binds_legend":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(i)},this.$iApi.event.on("layer/registered",r,t);break;case"ramp_layer_reload_end_binds_legend":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(i)},this.$iApi.event.on("layer/reloadend",r,t);break;case"ramp_layer_reload_start_updates_legend":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.reloadLayerItem(i.uid)},this.$iApi.event.on("layer/reloadstart",r,t);break;case"ramp_layer_remove_closes_grid":r=i=>{if(this.$iApi.fixture.get("grid")){this.$vApp.$store.dispatch(`grid/${Lue.removeGrid}`,i.id);const n=this.$vApp.$store.get(yL.currentId);if(i.id===n){const s=this.$iApi.panel.get("grid");s.isOpen&&this.$iApi.panel.close(s),this.$vApp.$store.set(yL.currentId,null)}}},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_details":r=i=>{this.$iApi.fixture.get("details")&&this.$iApi.$vApp.$store.set(Nue.removeLayer,i)},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_legend":r=i=>{const n=this.$iApi.fixture.get("legend");n&&(n.removeLayerItem(i),this.$iApi.updateAlert(this.$vApp.$t("legend.alert.layerRemoved",{name:i.name})))},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_useradd_updates_legend":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.addLayerItem(i)},this.$iApi.event.on("user/layeradded",r,t);break;case"ramp_map_basemap_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(this.$iApi.$vApp.$store.get(Os.getActiveBasemapConfig)?.attribution)},this.$iApi.event.on("map/basemapchanged",r,t);break;case"ramp_map_blur_updates_key_handler":r=i=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",r,t);break;case"ramp_map_click_runs_identify":r=i=>{i.button===0&&this.$iApi.geo.map.runIdentify(i)},this.on("map/click",r,t);break;case"ramp_map_created_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(this.$iApi.$vApp.$store.get(Os.getActiveBasemapConfig)?.attribution)},this.$iApi.geo.map.created&&r(),this.$iApi.event.on("map/created",r,t);break;case"ramp_map_extent_updates_maptip":r=()=>{if(this.$iApi.geo.map.keysActive){const i=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(i)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",eg(50,!0,()=>r()),t);break;case"ramp_map_graphichit_creates_maptip":r=i=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(i)},this.$iApi.event.on("map/graphichit",r,t);break;case"ramp_map_identify_opens_identify_results":r=i=>{const n=this.$iApi.fixture.get("details");n&&n.openDetails(i.results)},this.on("map/identify",r,t);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",eg(200,()=>{this.$iApi.$vApp.$store.get(Ps.coords)?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(n=>{this.$iApi.$vApp.$store.set(Ps.setCoords,{formattedString:n})})}),t);break;case"ramp_map_keydown_updates_key_handler":r=i=>{this.$iApi.geo.map.mapKeyDown(i)},this.$iApi.event.on("map/keydown",r,t);break;case"ramp_map_keyup_updates_key_handler":r=i=>{this.$iApi.geo.map.mapKeyUp(i)},this.$iApi.event.on("map/keyup",r,t);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",eg(200,i=>{this.$iApi.$vApp.$store.get(Ps.coords)?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(i)).then(s=>{this.$iApi.$vApp.$store.set(Ps.setCoords,{formattedString:s})})}),t);break;case"ramp_map_mouse_updates_maptip":r=i=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:i.screenX,screenY:i.screenY})},this.$iApi.event.on("map/mousemove",eg(200,i=>r(i)),t);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",CT(100,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",CT(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_panel_close_updates_appbar":r=i=>{this.$iApi.fixture.get("appbar")&&!this.$iApi.$vApp.$store.get("appbar/order").flat().find(n=>n===i.id)&&this.$iApi.$vApp.$store.dispatch(`appbar/${mL.REMOVE_BUTTON}`,i.id)},this.on("panel/closed",r,t);break;case"ramp_panel_open_updates_appbar":r=i=>{this.$iApi.fixture.get("appbar")&&!this.$iApi.$vApp.$store.get("appbar/order").flat().find(n=>n===i.id)&&this.$iApi.$vApp.$store.dispatch(`appbar/${mL.ADD_TEMP_BUTTON}`,i.id)},this.on("panel/opened",r,t);break;case"ramp_toggle_details":r=(i,n)=>{const s=this.$iApi.fixture.get("details");s&&s.toggleFeature(i,n)},this.$iApi.event.on("details/toggle",r,t);break;case"ramp_toggle_grid":r=(i,n)=>{const s=this.$iApi.fixture.get("grid");s&&s.toggleGrid(i.id,n)},this.$iApi.event.on("grid/toggle",r,t);break;case"ramp_toggle_help":r=i=>{const n=this.$iApi.fixture.get("help");n&&n.toggleHelp(i)},this.$iApi.event.on("help/toggle",r,t);break;case"ramp_toggle_metadata":r=(i,n)=>{const s=this.$iApi.fixture.get("metadata");s&&s.toggleMetadata(i,n)},this.$iApi.event.on("metadata/toggle",r,t);break;case"ramp_toggle_reorder":r=i=>{const n=this.$iApi.fixture.get("layer-reorder");n&&n.toggleLayerReorder(i)},this.$iApi.event.on("reorder/toggle",r,t);break;case"ramp_toggle_settings":r=(i,n)=>{const s=this.$iApi.fixture.get("settings");s&&s.toggleSettings(i,n)},this.$iApi.event.on("settings/toggle",r,t);break;case"ramp_toggle_wizard":r=i=>{const n=this.$iApi.fixture.get("wizard");n&&n.toggleWizard(i)},this.$iApi.event.on("wizard/toggle",r,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Vg=typeof window<"u";let ja,Bg;{const e=Vg&&window.performance;e&&e.mark&&e.measure&&e.clearMarks&&e.clearMeasures&&(ja=t=>e.mark(t),Bg=(t,r,i)=>{e.measure(t,r,i),e.clearMarks(r),e.clearMarks(i)})}const uqe=/\{([0-9a-zA-Z]+)\}/g;function jA(e,...t){return t.length===1&&Qn(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(uqe,(r,i)=>t.hasOwnProperty(i)?t[i]:"")}const cqe=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Jp=e=>cqe?Symbol(e):e,hqe=(e,t,r)=>pqe({l:e,k:t,s:r}),pqe=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Jn=e=>typeof e=="number"&&isFinite(e),dqe=e=>g7(e)==="[object Date]",qv=e=>g7(e)==="[object RegExp]",UA=e=>dr(e)&&Object.keys(e).length===0;function Bo(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const Yn=Object.assign;let TW;const z1=()=>TW||(TW=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function AW(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const fqe=Object.prototype.hasOwnProperty;function Due(e,t){return fqe.call(e,t)}const Qi=Array.isArray,Zn=e=>typeof e=="function",Ot=e=>typeof e=="string",ei=e=>typeof e=="boolean",Qn=e=>e!==null&&typeof e=="object",Fue=Object.prototype.toString,g7=e=>Fue.call(e),dr=e=>g7(e)==="[object Object]",mqe=e=>e==null?"":Qi(e)||dr(e)&&e.toString===Fue?JSON.stringify(e,null,2):String(e),$W=2;function yqe(e,t=0,r=e.length){const i=e.split(/\r?\n/);let n=0;const s=[];for(let o=0;o<i.length;o++)if(n+=i[o].length+1,n>=t){for(let a=o-$W;a<=o+$W||r>n;a++){if(a<0||a>=i.length)continue;const l=a+1;s.push(`${l}${" ".repeat(3-String(l).length)}|  ${i[a]}`);const u=i[a].length;if(a===o){const c=t-(n-u)+1,p=Math.max(1,r>n?u-c:r-t);s.push("   |  "+" ".repeat(c)+"^".repeat(p))}else if(a>o){if(r>n){const c=Math.max(Math.min(r-n,u),1);s.push("   |  "+"^".repeat(c))}n+=u+1}}break}return s.join(`
`)}function v7(){const e=new Map;return{events:e,on(r,i){const n=e.get(r);n&&n.push(i)||e.set(r,[i])},off(r,i){const n=e.get(r);n&&n.splice(n.indexOf(i)>>>0,1)},emit(r,i){(e.get(r)||[]).slice().map(n=>n(i)),(e.get("*")||[]).slice().map(n=>n(r,i))}}}/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const gqe=Object.prototype.hasOwnProperty;function vqe(e,t){return gqe.call(e,t)}const R5=e=>e!==null&&typeof e=="object",fm=[];fm[0]={w:[0],i:[3,0],["["]:[4],o:[7]};fm[1]={w:[1],["."]:[2],["["]:[4],o:[7]};fm[2]={w:[2],i:[3,0],["0"]:[3,0]};fm[3]={i:[3,0],["0"]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};fm[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};fm[5]={["'"]:[4,0],o:8,l:[5,0]};fm[6]={['"']:[4,0],o:8,l:[6,0]};const bqe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function wqe(e){return bqe.test(e)}function _qe(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function xqe(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Sqe(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:wqe(t)?_qe(t):"*"+t}function Eqe(e){const t=[];let r=-1,i=0,n=0,s,o,a,l,u,c,p;const d=[];d[0]=()=>{o===void 0?o=a:o+=a},d[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},d[2]=()=>{d[0](),n++},d[3]=()=>{if(n>0)n--,i=4,d[0]();else{if(n=0,o===void 0||(o=Sqe(o),o===!1))return!1;d[1]()}};function m(){const g=e[r+1];if(i===5&&g==="'"||i===6&&g==='"')return r++,a="\\"+g,d[0](),!0}for(;i!==null;)if(r++,s=e[r],!(s==="\\"&&m())){if(l=xqe(s),p=fm[i],u=p[l]||p.l||8,u===8||(i=u[0],u[1]!==void 0&&(c=d[u[1]],c&&(a=s,c()===!1))))return;if(i===7)return t}}const CW=new Map;function kT(e,t){if(!R5(e))return null;let r=CW.get(t);if(r||(r=Eqe(t),r&&CW.set(t,r)),!r)return null;const i=r.length;let n=e,s=0;for(;s<i;){const o=n[r[s]];if(o===void 0)return null;n=o,s++}return n}function gL(e){if(!R5(e))return e;for(const t in e)if(!!vqe(e,t))if(!t.includes("."))R5(e[t])&&gL(e[t]);else{const r=t.split("."),i=r.length-1;let n=e;for(let s=0;s<i;s++)r[s]in n||(n[r[s]]={}),n=n[r[s]];n[r[i]]=e[t],delete e[t],R5(n[r[i]])&&gL(n[r[i]])}return e}/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Mqe=e=>e,Iqe=e=>"",Tqe="text",Aqe=e=>e.length===0?"":e.join(""),$qe=mqe;function kW(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function Cqe(e){const t=Jn(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Jn(e.named.count)||Jn(e.named.n))?Jn(e.named.count)?e.named.count:Jn(e.named.n)?e.named.n:t:t}function kqe(e,t){t.count||(t.count=e),t.n||(t.n=e)}function Oqe(e={}){const t=e.locale,r=Cqe(e),i=Qn(e.pluralRules)&&Ot(t)&&Zn(e.pluralRules[t])?e.pluralRules[t]:kW,n=Qn(e.pluralRules)&&Ot(t)&&Zn(e.pluralRules[t])?kW:void 0,s=v=>v[i(r,v.length,n)],o=e.list||[],a=v=>o[v],l=e.named||{};Jn(e.pluralIndex)&&kqe(r,l);const u=v=>l[v];function c(v){const _=Zn(e.messages)?e.messages(v):Qn(e.messages)?e.messages[v]:!1;return _||(e.parent?e.parent.message(v):Iqe)}const p=v=>e.modifiers?e.modifiers[v]:Mqe,d=dr(e.processor)&&Zn(e.processor.normalize)?e.processor.normalize:Aqe,m=dr(e.processor)&&Zn(e.processor.interpolate)?e.processor.interpolate:$qe,g=dr(e.processor)&&Ot(e.processor.type)?e.processor.type:Tqe,b={list:a,named:u,plural:s,linked:(v,_)=>{const E=c(v)(b);return Ot(_)?p(_)(E):E},message:c,type:g,interpolate:m,normalize:d};return b}/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Rqe={[0]:"Expected token: '{0}'",[1]:"Invalid token in placeholder: '{0}'",[2]:"Unterminated single quote in placeholder",[3]:"Unknown escape sequence: \\{0}",[4]:"Invalid unicode escape sequence: {0}",[5]:"Unbalanced closing brace",[6]:"Unterminated closing brace",[7]:"Empty placeholder",[8]:"Not allowed nest placeholder",[9]:"Invalid linked format",[10]:"Plural must have messages",[11]:"Unexpected empty linked modifier",[12]:"Unexpected empty linked key",[13]:"Unexpected lexical analysis in token: '{0}'"};function VA(e,t,r={}){const{domain:i,messages:n,args:s}=r,o=jA((n||Rqe)[e]||"",...s||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=i,a}function Pqe(e){throw e}function Lqe(e,t,r){return{line:e,column:t,offset:r}}function vL(e,t,r){const i={start:e,end:t};return r!=null&&(i.source=r),i}const Ch=" ",Nqe="\r",oo=`
`,Dqe=String.fromCharCode(8232),Fqe=String.fromCharCode(8233);function jqe(e){const t=e;let r=0,i=1,n=1,s=0;const o=k=>t[k]===Nqe&&t[k+1]===oo,a=k=>t[k]===oo,l=k=>t[k]===Fqe,u=k=>t[k]===Dqe,c=k=>o(k)||a(k)||l(k)||u(k),p=()=>r,d=()=>i,m=()=>n,g=()=>s,b=k=>o(k)||l(k)||u(k)?oo:t[k],v=()=>b(r),_=()=>b(r+s);function E(){return s=0,c(r)&&(i++,n=0),o(r)&&r++,r++,n++,t[r]}function I(){return o(r+s)&&s++,s++,t[r+s]}function x(){r=0,i=1,n=1,s=0}function T(k=0){s=k}function M(){const k=r+s;for(;k!==r;)E();s=0}return{index:p,line:d,column:m,peekOffset:g,charAt:b,currentChar:v,currentPeek:_,next:E,peek:I,reset:x,resetPeek:T,skipToPeek:M}}const gd=void 0,OW="'",Uqe="tokenizer";function Vqe(e,t={}){const r=t.location!==!1,i=jqe(e),n=()=>i.index(),s=()=>Lqe(i.line(),i.column(),i.index()),o=s(),a=n(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=t;function p(X,Z,le,...z){const ee=u();if(Z.column+=le,Z.offset+=le,c){const we=vL(ee.startLoc,Z),se=VA(X,we,{domain:Uqe,args:z});c(se)}}function d(X,Z,le){X.endLoc=s(),X.currentType=Z;const z={type:Z};return r&&(z.loc=vL(X.startLoc,X.endLoc)),le!=null&&(z.value=le),z}const m=X=>d(X,14);function g(X,Z){return X.currentChar()===Z?(X.next(),Z):(p(0,s(),0,Z),"")}function b(X){let Z="";for(;X.currentPeek()===Ch||X.currentPeek()===oo;)Z+=X.currentPeek(),X.peek();return Z}function v(X){const Z=b(X);return X.skipToPeek(),Z}function _(X){if(X===gd)return!1;const Z=X.charCodeAt(0);return Z>=97&&Z<=122||Z>=65&&Z<=90||Z===95}function E(X){if(X===gd)return!1;const Z=X.charCodeAt(0);return Z>=48&&Z<=57}function I(X,Z){const{currentType:le}=Z;if(le!==2)return!1;b(X);const z=_(X.currentPeek());return X.resetPeek(),z}function x(X,Z){const{currentType:le}=Z;if(le!==2)return!1;b(X);const z=X.currentPeek()==="-"?X.peek():X.currentPeek(),ee=E(z);return X.resetPeek(),ee}function T(X,Z){const{currentType:le}=Z;if(le!==2)return!1;b(X);const z=X.currentPeek()===OW;return X.resetPeek(),z}function M(X,Z){const{currentType:le}=Z;if(le!==8)return!1;b(X);const z=X.currentPeek()===".";return X.resetPeek(),z}function k(X,Z){const{currentType:le}=Z;if(le!==9)return!1;b(X);const z=_(X.currentPeek());return X.resetPeek(),z}function D(X,Z){const{currentType:le}=Z;if(!(le===8||le===12))return!1;b(X);const z=X.currentPeek()===":";return X.resetPeek(),z}function B(X,Z){const{currentType:le}=Z;if(le!==10)return!1;const z=()=>{const we=X.currentPeek();return we==="{"?_(X.peek()):we==="@"||we==="%"||we==="|"||we===":"||we==="."||we===Ch||!we?!1:we===oo?(X.peek(),z()):_(we)},ee=z();return X.resetPeek(),ee}function G(X){b(X);const Z=X.currentPeek()==="|";return X.resetPeek(),Z}function W(X,Z=!0){const le=(ee=!1,we="",se=!1)=>{const U=X.currentPeek();return U==="{"?we==="%"?!1:ee:U==="@"||!U?we==="%"?!0:ee:U==="%"?(X.peek(),le(ee,"%",!0)):U==="|"?we==="%"||se?!0:!(we===Ch||we===oo):U===Ch?(X.peek(),le(!0,Ch,se)):U===oo?(X.peek(),le(!0,oo,se)):!0},z=le();return Z&&X.resetPeek(),z}function K(X,Z){const le=X.currentChar();return le===gd?gd:Z(le)?(X.next(),le):null}function ne(X){return K(X,le=>{const z=le.charCodeAt(0);return z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===95||z===36})}function ye(X){return K(X,le=>{const z=le.charCodeAt(0);return z>=48&&z<=57})}function y(X){return K(X,le=>{const z=le.charCodeAt(0);return z>=48&&z<=57||z>=65&&z<=70||z>=97&&z<=102})}function C(X){let Z="",le="";for(;Z=ye(X);)le+=Z;return le}function L(X){let Z="";for(;;){const le=X.currentChar();if(le==="{"||le==="}"||le==="@"||le==="|"||!le)break;if(le==="%")if(W(X))Z+=le,X.next();else break;else if(le===Ch||le===oo)if(W(X))Z+=le,X.next();else{if(G(X))break;Z+=le,X.next()}else Z+=le,X.next()}return Z}function F(X){v(X);let Z="",le="";for(;Z=ne(X);)le+=Z;return X.currentChar()===gd&&p(6,s(),0),le}function ae(X){v(X);let Z="";return X.currentChar()==="-"?(X.next(),Z+=`-${C(X)}`):Z+=C(X),X.currentChar()===gd&&p(6,s(),0),Z}function q(X){v(X),g(X,"'");let Z="",le="";const z=we=>we!==OW&&we!==oo;for(;Z=K(X,z);)Z==="\\"?le+=fe(X):le+=Z;const ee=X.currentChar();return ee===oo||ee===gd?(p(2,s(),0),ee===oo&&(X.next(),g(X,"'")),le):(g(X,"'"),le)}function fe(X){const Z=X.currentChar();switch(Z){case"\\":case"'":return X.next(),`\\${Z}`;case"u":return te(X,Z,4);case"U":return te(X,Z,6);default:return p(3,s(),0,Z),""}}function te(X,Z,le){g(X,Z);let z="";for(let ee=0;ee<le;ee++){const we=y(X);if(!we){p(4,s(),0,`\\${Z}${z}${X.currentChar()}`);break}z+=we}return`\\${Z}${z}`}function ge(X){v(X);let Z="",le="";const z=ee=>ee!=="{"&&ee!=="}"&&ee!==Ch&&ee!==oo;for(;Z=K(X,z);)le+=Z;return le}function ve(X){let Z="",le="";for(;Z=ne(X);)le+=Z;return le}function Ee(X){const Z=(le=!1,z)=>{const ee=X.currentChar();return ee==="{"||ee==="%"||ee==="@"||ee==="|"||!ee||ee===Ch?z:ee===oo?(z+=ee,X.next(),Z(le,z)):(z+=ee,X.next(),Z(!0,z))};return Z(!1,"")}function Ie(X){v(X);const Z=g(X,"|");return v(X),Z}function ke(X,Z){let le=null;switch(X.currentChar()){case"{":return Z.braceNest>=1&&p(8,s(),0),X.next(),le=d(Z,2,"{"),v(X),Z.braceNest++,le;case"}":return Z.braceNest>0&&Z.currentType===2&&p(7,s(),0),X.next(),le=d(Z,3,"}"),Z.braceNest--,Z.braceNest>0&&v(X),Z.inLinked&&Z.braceNest===0&&(Z.inLinked=!1),le;case"@":return Z.braceNest>0&&p(6,s(),0),le=Te(X,Z)||m(Z),Z.braceNest=0,le;default:let ee=!0,we=!0,se=!0;if(G(X))return Z.braceNest>0&&p(6,s(),0),le=d(Z,1,Ie(X)),Z.braceNest=0,Z.inLinked=!1,le;if(Z.braceNest>0&&(Z.currentType===5||Z.currentType===6||Z.currentType===7))return p(6,s(),0),Z.braceNest=0,Se(X,Z);if(ee=I(X,Z))return le=d(Z,5,F(X)),v(X),le;if(we=x(X,Z))return le=d(Z,6,ae(X)),v(X),le;if(se=T(X,Z))return le=d(Z,7,q(X)),v(X),le;if(!ee&&!we&&!se)return le=d(Z,13,ge(X)),p(1,s(),0,le.value),v(X),le;break}return le}function Te(X,Z){const{currentType:le}=Z;let z=null;const ee=X.currentChar();switch((le===8||le===9||le===12||le===10)&&(ee===oo||ee===Ch)&&p(9,s(),0),ee){case"@":return X.next(),z=d(Z,8,"@"),Z.inLinked=!0,z;case".":return v(X),X.next(),d(Z,9,".");case":":return v(X),X.next(),d(Z,10,":");default:return G(X)?(z=d(Z,1,Ie(X)),Z.braceNest=0,Z.inLinked=!1,z):M(X,Z)||D(X,Z)?(v(X),Te(X,Z)):k(X,Z)?(v(X),d(Z,12,ve(X))):B(X,Z)?(v(X),ee==="{"?ke(X,Z)||z:d(Z,11,Ee(X))):(le===8&&p(9,s(),0),Z.braceNest=0,Z.inLinked=!1,Se(X,Z))}}function Se(X,Z){let le={type:14};if(Z.braceNest>0)return ke(X,Z)||m(Z);if(Z.inLinked)return Te(X,Z)||m(Z);const z=X.currentChar();switch(z){case"{":return ke(X,Z)||m(Z);case"}":return p(5,s(),0),X.next(),d(Z,3,"}");case"@":return Te(X,Z)||m(Z);default:if(G(X))return le=d(Z,1,Ie(X)),Z.braceNest=0,Z.inLinked=!1,le;if(W(X))return d(Z,0,L(X));if(z==="%")return X.next(),d(Z,4,"%");break}return le}function Ae(){const{currentType:X,offset:Z,startLoc:le,endLoc:z}=l;return l.lastType=X,l.lastOffset=Z,l.lastStartLoc=le,l.lastEndLoc=z,l.offset=n(),l.startLoc=s(),i.currentChar()===gd?d(l,14):Se(i,l)}return{nextToken:Ae,currentOffset:n,currentPosition:s,context:u}}const Bqe="parser",zqe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function Gqe(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||r,16);return i<=55295||i>=57344?String.fromCodePoint(i):"\uFFFD"}}}function qqe(e={}){const t=e.location!==!1,{onError:r}=e;function i(_,E,I,x,...T){const M=_.currentPosition();if(M.offset+=x,M.column+=x,r){const k=vL(I,M),D=VA(E,k,{domain:Bqe,args:T});r(D)}}function n(_,E,I){const x={type:_,start:E,end:E};return t&&(x.loc={start:I,end:I}),x}function s(_,E,I,x){_.end=E,x&&(_.type=x),t&&_.loc&&(_.loc.end=I)}function o(_,E){const I=_.context(),x=n(3,I.offset,I.startLoc);return x.value=E,s(x,_.currentOffset(),_.currentPosition()),x}function a(_,E){const I=_.context(),{lastOffset:x,lastStartLoc:T}=I,M=n(5,x,T);return M.index=parseInt(E,10),_.nextToken(),s(M,_.currentOffset(),_.currentPosition()),M}function l(_,E){const I=_.context(),{lastOffset:x,lastStartLoc:T}=I,M=n(4,x,T);return M.key=E,_.nextToken(),s(M,_.currentOffset(),_.currentPosition()),M}function u(_,E){const I=_.context(),{lastOffset:x,lastStartLoc:T}=I,M=n(9,x,T);return M.value=E.replace(zqe,Gqe),_.nextToken(),s(M,_.currentOffset(),_.currentPosition()),M}function c(_){const E=_.nextToken(),I=_.context(),{lastOffset:x,lastStartLoc:T}=I,M=n(8,x,T);return E.type!==12?(i(_,11,I.lastStartLoc,0),M.value="",s(M,x,T),{nextConsumeToken:E,node:M}):(E.value==null&&i(_,13,I.lastStartLoc,0,mc(E)),M.value=E.value||"",s(M,_.currentOffset(),_.currentPosition()),{node:M})}function p(_,E){const I=_.context(),x=n(7,I.offset,I.startLoc);return x.value=E,s(x,_.currentOffset(),_.currentPosition()),x}function d(_){const E=_.context(),I=n(6,E.offset,E.startLoc);let x=_.nextToken();if(x.type===9){const T=c(_);I.modifier=T.node,x=T.nextConsumeToken||_.nextToken()}switch(x.type!==10&&i(_,13,E.lastStartLoc,0,mc(x)),x=_.nextToken(),x.type===2&&(x=_.nextToken()),x.type){case 11:x.value==null&&i(_,13,E.lastStartLoc,0,mc(x)),I.key=p(_,x.value||"");break;case 5:x.value==null&&i(_,13,E.lastStartLoc,0,mc(x)),I.key=l(_,x.value||"");break;case 6:x.value==null&&i(_,13,E.lastStartLoc,0,mc(x)),I.key=a(_,x.value||"");break;case 7:x.value==null&&i(_,13,E.lastStartLoc,0,mc(x)),I.key=u(_,x.value||"");break;default:i(_,12,E.lastStartLoc,0);const T=_.context(),M=n(7,T.offset,T.startLoc);return M.value="",s(M,T.offset,T.startLoc),I.key=M,s(I,T.offset,T.startLoc),{nextConsumeToken:x,node:I}}return s(I,_.currentOffset(),_.currentPosition()),{node:I}}function m(_){const E=_.context(),I=E.currentType===1?_.currentOffset():E.offset,x=E.currentType===1?E.endLoc:E.startLoc,T=n(2,I,x);T.items=[];let M=null;do{const B=M||_.nextToken();switch(M=null,B.type){case 0:B.value==null&&i(_,13,E.lastStartLoc,0,mc(B)),T.items.push(o(_,B.value||""));break;case 6:B.value==null&&i(_,13,E.lastStartLoc,0,mc(B)),T.items.push(a(_,B.value||""));break;case 5:B.value==null&&i(_,13,E.lastStartLoc,0,mc(B)),T.items.push(l(_,B.value||""));break;case 7:B.value==null&&i(_,13,E.lastStartLoc,0,mc(B)),T.items.push(u(_,B.value||""));break;case 8:const G=d(_);T.items.push(G.node),M=G.nextConsumeToken||null;break}}while(E.currentType!==14&&E.currentType!==1);const k=E.currentType===1?E.lastOffset:_.currentOffset(),D=E.currentType===1?E.lastEndLoc:_.currentPosition();return s(T,k,D),T}function g(_,E,I,x){const T=_.context();let M=x.items.length===0;const k=n(1,E,I);k.cases=[],k.cases.push(x);do{const D=m(_);M||(M=D.items.length===0),k.cases.push(D)}while(T.currentType!==14);return M&&i(_,10,I,0),s(k,_.currentOffset(),_.currentPosition()),k}function b(_){const E=_.context(),{offset:I,startLoc:x}=E,T=m(_);return E.currentType===14?T:g(_,I,x,T)}function v(_){const E=Vqe(_,Yn({},e)),I=E.context(),x=n(0,I.offset,I.startLoc);return t&&x.loc&&(x.loc.source=_),x.body=b(E),I.currentType!==14&&i(E,13,I.lastStartLoc,0,_[I.offset]||""),s(x,E.currentOffset(),E.currentPosition()),x}return{parse:v}}function mc(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"\u2026":t}function Hqe(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:s=>(r.helpers.add(s),s)}}function RW(e,t){for(let r=0;r<e.length;r++)b7(e[r],t)}function b7(e,t){switch(e.type){case 1:RW(e.cases,t),t.helper("plural");break;case 2:RW(e.items,t);break;case 6:b7(e.key,t),t.helper("linked");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function Wqe(e,t={}){const r=Hqe(e);r.helper("normalize"),e.body&&b7(e.body,r);const i=r.context();e.helpers=Array.from(i.helpers)}function Jqe(e,t){const{sourceMap:r,filename:i,breakLineCode:n,needIndent:s}=t,o={source:e.loc.source,filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:s,indentLevel:0},a=()=>o;function l(b,v){o.code+=b}function u(b,v=!0){const _=v?n:"";l(s?_+"  ".repeat(b):_)}function c(b=!0){const v=++o.indentLevel;b&&u(v)}function p(b=!0){const v=--o.indentLevel;b&&u(v)}function d(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:p,newline:d,helper:b=>`_${b}`,needIndent:()=>o.needIndent}}function Zqe(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),Hv(e,t.key),t.modifier&&(e.push(", "),Hv(e,t.modifier)),e.push(")")}function Kqe(e,t){const{helper:r,needIndent:i}=e;e.push(`${r("normalize")}([`),e.indent(i());const n=t.items.length;for(let s=0;s<n&&(Hv(e,t.items[s]),s!==n-1);s++)e.push(", ");e.deindent(i()),e.push("])")}function Yqe(e,t){const{helper:r,needIndent:i}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(i());const n=t.cases.length;for(let s=0;s<n&&(Hv(e,t.cases[s]),s!==n-1);s++)e.push(", ");e.deindent(i()),e.push("])")}}function Qqe(e,t){t.body?Hv(e,t.body):e.push("null")}function Hv(e,t){const{helper:r}=e;switch(t.type){case 0:Qqe(e,t);break;case 1:Yqe(e,t);break;case 2:Kqe(e,t);break;case 6:Zqe(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw new Error(`unhandled codegen node type: ${t.type}`)}}const Xqe=(e,t={})=>{const r=Ot(t.mode)?t.mode:"normal",i=Ot(t.filename)?t.filename:"message.intl",n=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,o=t.needIndent?t.needIndent:r!=="arrow",a=e.helpers||[],l=Jqe(e,{mode:r,filename:i,sourceMap:n,breakLineCode:s,needIndent:o});l.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(p=>`${p}: _${p}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Hv(l,e),l.deindent(o),l.push("}");const{code:u,map:c}=l.context();return{ast:e,code:u,map:c?c.toJSON():void 0}};function eHe(e,t={}){const r=Yn({},t),n=qqe(r).parse(e);return Wqe(n,r),Xqe(n,r)}/*!
  * @intlify/devtools-if v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const jue={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */let Dx=null;function tHe(e){Dx=e}function rHe(e,t,r){Dx&&Dx.emit(jue.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:r})}const iHe=nHe(jue.FunctionTranslate);function nHe(e){return t=>Dx&&Dx.emit(e,t)}const sHe={[0]:"Not found '{key}' key in '{locale}' locale messages.",[1]:"Fall back to translate '{key}' key with '{target}' locale.",[2]:"Cannot format a number value due to not supported Intl.NumberFormat.",[3]:"Fall back to number format '{key}' key with '{target}' locale.",[4]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[5]:"Fall back to datetime format '{key}' key with '{target}' locale."};function Wv(e,...t){return jA(sHe[e],...t)}const oHe="9.1.9",BA=-1,OT="";function aHe(){return{upper:e=>Ot(e)?e.toUpperCase():e,lower:e=>Ot(e)?e.toLowerCase():e,capitalize:e=>Ot(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}let Uue;function lHe(e){Uue=e}let Vue=null;const PW=e=>{Vue=e},uHe=()=>Vue;let LW=0;function cHe(e={}){const t=Ot(e.version)?e.version:oHe,r=Ot(e.locale)?e.locale:"en-US",i=Qi(e.fallbackLocale)||dr(e.fallbackLocale)||Ot(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r,n=dr(e.messages)?e.messages:{[r]:{}},s=dr(e.datetimeFormats)?e.datetimeFormats:{[r]:{}},o=dr(e.numberFormats)?e.numberFormats:{[r]:{}},a=Yn({},e.modifiers||{},aHe()),l=e.pluralRules||{},u=Zn(e.missing)?e.missing:null,c=ei(e.missingWarn)||qv(e.missingWarn)?e.missingWarn:!0,p=ei(e.fallbackWarn)||qv(e.fallbackWarn)?e.fallbackWarn:!0,d=!!e.fallbackFormat,m=!!e.unresolving,g=Zn(e.postTranslation)?e.postTranslation:null,b=dr(e.processor)?e.processor:null,v=ei(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_=!!e.escapeParameter,E=Zn(e.messageCompiler)?e.messageCompiler:Uue,I=Zn(e.onWarn)?e.onWarn:Bo,x=e,T=Qn(x.__datetimeFormatters)?x.__datetimeFormatters:new Map,M=Qn(x.__numberFormatters)?x.__numberFormatters:new Map,k=Qn(x.__meta)?x.__meta:{};LW++;const D={version:t,cid:LW,locale:r,fallbackLocale:i,messages:n,datetimeFormats:s,numberFormats:o,modifiers:a,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:p,fallbackFormat:d,unresolving:m,postTranslation:g,processor:b,warnHtmlMessage:v,escapeParameter:_,messageCompiler:E,onWarn:I,__datetimeFormatters:T,__numberFormatters:M,__meta:k};return D.__v_emitter=x.__v_emitter!=null?x.__v_emitter:void 0,rHe(D,t,k),D}function zA(e,t){return e instanceof RegExp?e.test(t):e}function Bue(e,t){return e instanceof RegExp?e.test(t):e}function w7(e,t,r,i,n){const{missing:s,onWarn:o}=e;{const a=e.__v_emitter;a&&a.emit("missing",{locale:r,key:t,type:n,groupId:`${n}:${t}`})}if(s!==null){const a=s(e,r,t,n);return Ot(a)?a:t}else return Bue(i,t)&&o(Wv(0,{key:t,locale:r})),t}function WS(e,t,r){const i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let n=i.__localeChainCache.get(r);if(!n){n=[];let s=[r];for(;Qi(s);)s=NW(n,s,t);const o=Qi(t)?t:dr(t)?t.default?t.default:null:t;s=Ot(o)?[o]:o,Qi(s)&&NW(n,s,!1),i.__localeChainCache.set(r,n)}return n}function NW(e,t,r){let i=!0;for(let n=0;n<t.length&&ei(i);n++){const s=t[n];Ot(s)&&(i=hHe(e,t[n],r))}return i}function hHe(e,t,r){let i;const n=t.split("-");do{const s=n.join("-");i=pHe(e,s,r),n.splice(-1,1)}while(n.length&&i===!0);return i}function pHe(e,t,r){let i=!1;if(!e.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const n=t.replace(/!/g,"");e.push(n),(Qi(r)||dr(r))&&r[n]&&(i=r[n])}return i}function Ow(e,t,r){const i=e;i.__localeChainCache=new Map,WS(e,r,t)}const dHe=/<\/?[\w\s="/.':;#-\/]+>/,fHe="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function mHe(e,t){(ei(t.warnHtmlMessage)?t.warnHtmlMessage:!0)&&dHe.test(e)&&Bo(jA(fHe,{source:e}))}const yHe=e=>e;let DW=Object.create(null);function gHe(e,t={}){{mHe(e,t);const i=(t.onCacheKey||yHe)(e),n=DW[i];if(n)return n;let s=!1;const o=t.onError||Pqe;t.onError=u=>{s=!0,o(u)};const{code:a}=eHe(e,t),l=new Function(`return ${a}`)();return s?l:DW[i]=l}}function G1(e){return VA(e,null,{messages:vHe})}const vHe={[14]:"Invalid arguments",[15]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[16]:"The argument provided is not a valid ISO date string"},FW=()=>"",Bc=e=>Zn(e);function jW(e,...t){const{fallbackFormat:r,postTranslation:i,unresolving:n,fallbackLocale:s,messages:o}=e,[a,l]=bL(...t),u=ei(l.missingWarn)?l.missingWarn:e.missingWarn,c=ei(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,p=ei(l.escapeParameter)?l.escapeParameter:e.escapeParameter,d=!!l.resolvedMessage,m=Ot(l.default)||ei(l.default)?ei(l.default)?a:l.default:r?a:"",g=r||m!=="",b=Ot(l.locale)?l.locale:e.locale;p&&bHe(l);let[v,_,E]=d?[a,b,o[b]||{}]:wHe(e,a,b,s,c,u),I=a;if(!d&&!(Ot(v)||Bc(v))&&g&&(v=m,I=v),!d&&(!(Ot(v)||Bc(v))||!Ot(_)))return n?BA:a;if(Ot(v)&&e.messageCompiler==null)return Bo(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${a}'.`),a;let x=!1;const T=()=>{x=!0},M=Bc(v)?v:zue(e,a,_,v,I,T);if(x)return v;const k=SHe(e,_,E,l),D=Oqe(k),B=_He(e,M,D),G=i?i(B):B;{const W={timestamp:Date.now(),key:Ot(a)?a:Bc(v)?v.key:"",locale:_||(Bc(v)?v.locale:""),format:Ot(v)?v:Bc(v)?v.source:"",message:G};W.meta=Yn({},e.__meta,uHe()||{}),iHe(W)}return G}function bHe(e){Qi(e.list)?e.list=e.list.map(t=>Ot(t)?AW(t):t):Qn(e.named)&&Object.keys(e.named).forEach(t=>{Ot(e.named[t])&&(e.named[t]=AW(e.named[t]))})}function wHe(e,t,r,i,n,s){const{messages:o,onWarn:a}=e,l=WS(e,i,r);let u={},c,p=null,d=r,m=null;const g="translate";for(let b=0;b<l.length;b++){if(c=m=l[b],r!==c&&zA(n,t)&&a(Wv(1,{key:t,target:c})),r!==c){const x=e.__v_emitter;x&&x.emit("fallback",{type:g,key:t,from:d,to:m,groupId:`${g}:${t}`})}u=o[c]||{};let v=null,_,E;if(Vg&&(v=window.performance.now(),_="intlify-message-resolve-start",E="intlify-message-resolve-end",ja&&ja(_)),(p=kT(u,t))===null&&(p=u[t]),Vg){const x=window.performance.now(),T=e.__v_emitter;T&&v&&p&&T.emit("message-resolve",{type:"message-resolve",key:t,message:p,time:x-v,groupId:`${g}:${t}`}),_&&E&&ja&&Bg&&(ja(E),Bg("intlify message resolve",_,E))}if(Ot(p)||Zn(p))break;const I=w7(e,t,c,s,g);I!==t&&(p=I),d=m}return[p,c,u]}function zue(e,t,r,i,n,s){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Bc(i)){const d=i;return d.locale=d.locale||r,d.key=d.key||t,d}let l=null,u,c;Vg&&(l=window.performance.now(),u="intlify-message-compilation-start",c="intlify-message-compilation-end",ja&&ja(u));const p=o(i,xHe(e,r,n,i,a,s));if(Vg){const d=window.performance.now(),m=e.__v_emitter;m&&l&&m.emit("message-compilation",{type:"message-compilation",message:i,time:d-l,groupId:`translate:${t}`}),u&&c&&ja&&Bg&&(ja(c),Bg("intlify message compilation",u,c))}return p.locale=r,p.key=t,p.source=i,p}function _He(e,t,r){let i=null,n,s;Vg&&(i=window.performance.now(),n="intlify-message-evaluation-start",s="intlify-message-evaluation-end",ja&&ja(n));const o=t(r);if(Vg){const a=window.performance.now(),l=e.__v_emitter;l&&i&&l.emit("message-evaluation",{type:"message-evaluation",value:o,time:a-i,groupId:`translate:${t.key}`}),n&&s&&ja&&Bg&&(ja(s),Bg("intlify message evaluation",n,s))}return o}function bL(...e){const[t,r,i]=e,n={};if(!Ot(t)&&!Jn(t)&&!Bc(t))throw G1(14);const s=Jn(t)?String(t):(Bc(t),t);return Jn(r)?n.plural=r:Ot(r)?n.default=r:dr(r)&&!UA(r)?n.named=r:Qi(r)&&(n.list=r),Jn(i)?n.plural=i:Ot(i)?n.default=i:dr(i)&&Yn(n,i),[s,n]}function xHe(e,t,r,i,n,s){return{warnHtmlMessage:n,onError:o=>{s&&s(o);{const a=`Message compilation error: ${o.message}`,l=o.location&&yqe(i,o.location.start.offset,o.location.end.offset),u=e.__v_emitter;u&&u.emit("compile-error",{message:i,error:o.message,start:o.location&&o.location.start.offset,end:o.location&&o.location.end.offset,groupId:`translate:${r}`}),console.error(l?`${a}
${l}`:a)}},onCacheKey:o=>hqe(t,r,o)}}function SHe(e,t,r,i){const{modifiers:n,pluralRules:s}=e,a={locale:t,modifiers:n,pluralRules:s,messages:l=>{const u=kT(r,l);if(Ot(u)){let c=!1;const d=zue(e,l,t,u,l,()=>{c=!0});return c?FW:d}else return Bc(u)?u:FW}};return e.processor&&(a.processor=e.processor),i.list&&(a.list=i.list),i.named&&(a.named=i.named),Jn(i.plural)&&(a.pluralIndex=i.plural),a}const UW=typeof Intl<"u",Gue={dateTimeFormat:UW&&typeof Intl.DateTimeFormat<"u",numberFormat:UW&&typeof Intl.NumberFormat<"u"};function VW(e,...t){const{datetimeFormats:r,unresolving:i,fallbackLocale:n,onWarn:s}=e,{__datetimeFormatters:o}=e;if(!Gue.dateTimeFormat)return s(Wv(4)),OT;const[a,l,u,c]=wL(...t),p=ei(u.missingWarn)?u.missingWarn:e.missingWarn,d=ei(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,m=!!u.part,g=Ot(u.locale)?u.locale:e.locale,b=WS(e,n,g);if(!Ot(a)||a==="")return new Intl.DateTimeFormat(g).format(l);let v={},_,E=null,I=g,x=null;const T="datetime format";for(let D=0;D<b.length;D++){if(_=x=b[D],g!==_&&zA(d,a)&&s(Wv(5,{key:a,target:_})),g!==_){const B=e.__v_emitter;B&&B.emit("fallback",{type:T,key:a,from:I,to:x,groupId:`${T}:${a}`})}if(v=r[_]||{},E=v[a],dr(E))break;w7(e,a,_,p,T),I=x}if(!dr(E)||!Ot(_))return i?BA:a;let M=`${_}__${a}`;UA(c)||(M=`${M}__${JSON.stringify(c)}`);let k=o.get(M);return k||(k=new Intl.DateTimeFormat(_,Yn({},E,c)),o.set(M,k)),m?k.formatToParts(l):k.format(l)}function wL(...e){const[t,r,i,n]=e;let s={},o={},a;if(Ot(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw G1(16);a=new Date(t);try{a.toISOString()}catch{throw G1(16)}}else if(dqe(t)){if(isNaN(t.getTime()))throw G1(15);a=t}else if(Jn(t))a=t;else throw G1(14);return Ot(r)?s.key=r:dr(r)&&(s=r),Ot(i)?s.locale=i:dr(i)&&(o=i),dr(n)&&(o=n),[s.key||"",a,s,o]}function BW(e,t,r){const i=e;for(const n in r){const s=`${t}__${n}`;!i.__datetimeFormatters.has(s)||i.__datetimeFormatters.delete(s)}}function zW(e,...t){const{numberFormats:r,unresolving:i,fallbackLocale:n,onWarn:s}=e,{__numberFormatters:o}=e;if(!Gue.numberFormat)return s(Wv(2)),OT;const[a,l,u,c]=_L(...t),p=ei(u.missingWarn)?u.missingWarn:e.missingWarn,d=ei(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,m=!!u.part,g=Ot(u.locale)?u.locale:e.locale,b=WS(e,n,g);if(!Ot(a)||a==="")return new Intl.NumberFormat(g).format(l);let v={},_,E=null,I=g,x=null;const T="number format";for(let D=0;D<b.length;D++){if(_=x=b[D],g!==_&&zA(d,a)&&s(Wv(3,{key:a,target:_})),g!==_){const B=e.__v_emitter;B&&B.emit("fallback",{type:T,key:a,from:I,to:x,groupId:`${T}:${a}`})}if(v=r[_]||{},E=v[a],dr(E))break;w7(e,a,_,p,T),I=x}if(!dr(E)||!Ot(_))return i?BA:a;let M=`${_}__${a}`;UA(c)||(M=`${M}__${JSON.stringify(c)}`);let k=o.get(M);return k||(k=new Intl.NumberFormat(_,Yn({},E,c)),o.set(M,k)),m?k.formatToParts(l):k.format(l)}function _L(...e){const[t,r,i,n]=e;let s={},o={};if(!Jn(t))throw G1(14);const a=t;return Ot(r)?s.key=r:dr(r)&&(s=r),Ot(i)?s.locale=i:dr(i)&&(o=i),dr(n)&&(o=n),[s.key||"",a,s,o]}function GW(e,t,r){const i=e;for(const n in r){const s=`${t}__${n}`;!i.__numberFormatters.has(s)||i.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(z1().__INTLIFY_PROD_DEVTOOLS__=!1);function EHe(){return que().__VUE_DEVTOOLS_GLOBAL_HOOK__}function que(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const MHe=typeof Proxy=="function",IHe="devtools-plugin:setup",THe="plugin:settings:set";let L0,xL;function AHe(){var e;return L0!==void 0||(typeof window<"u"&&window.performance?(L0=!0,xL=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(L0=!0,xL=global.perf_hooks.performance):L0=!1),L0}function $He(){return AHe()?xL.now():Date.now()}class CHe{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const i={};if(t.settings)for(const o in t.settings){const a=t.settings[o];i[o]=a.defaultValue}const n=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(n),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}s=o},now(){return $He()}},r&&r.on(THe,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function Hue(e,t){const r=e,i=que(),n=EHe(),s=MHe&&r.enableEarlyProxy;if(n&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))n.emit(IHe,e,t);else{const o=s?new CHe(r,n):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * @intlify/vue-devtools v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Ak={["vue-devtools-plugin-vue-i18n"]:"Vue I18n devtools",["vue-i18n-resource-inspector"]:"I18n Resources",["vue-i18n-timeline"]:"Vue I18n"},kHe={["vue-i18n-resource-inspector"]:"Search for scopes ..."},OHe={["vue-i18n-timeline"]:16764185};/*!
  * vue-i18n v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const RHe="9.1.9";function PHe(){let e=!1;typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(e=!0,z1().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(e=!0,z1().__VUE_I18N_LEGACY_API__=!0),typeof __VUE_I18N_PROD_DEVTOOLS__!="boolean"&&(e=!0,z1().__VUE_I18N_PROD_DEVTOOLS__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(z1().__INTLIFY_PROD_DEVTOOLS__=!1),e=!0,e&&console.warn("You are running the esm-bundler build of vue-i18n. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle.")}const LHe={[6]:"Fall back to {type} '{key}' with root locale.",[7]:"Not supported 'preserve'.",[8]:"Not supported 'formatter'.",[9]:"Not supported 'preserveDirectiveContent'.",[10]:"Not supported 'getChoiceIndex'.",[11]:"Component name legacy compatible: '{name}' -> 'i18n'",[12]:"Not found parent scope. use the global scope."};function Cu(e,...t){return jA(LHe[e],...t)}function ds(e,...t){return VA(e,null,{messages:NHe,args:t})}const NHe={[14]:"Unexpected return type in composer",[15]:"Invalid argument",[16]:"Must be called at the top of a `setup` function",[17]:"Need to install with `app.use` function",[22]:"Unexpected error",[18]:"Not available in legacy mode",[19]:"Required in value: {0}",[20]:"Invalid value",[21]:"Cannot setup vue-devtools plugin"},$k="__INTLIFY_META__",SL=Jp("__transrateVNode"),EL=Jp("__datetimeParts"),ML=Jp("__numberParts"),zg=Jp("__enableEmitter"),Fx=Jp("__disableEmitter"),Wue=Jp("__setPluralRules");Jp("__intlifyMeta");const Jue=Jp("__injectWithOption");let qW=0;function HW(e){return(t,r,i,n)=>e(r,i,xo()||void 0,n)}function _7(e,t){const{messages:r,__i18n:i}=t,n=dr(r)?r:Qi(i)?{}:{[e]:{}};if(Qi(i)&&i.forEach(({locale:s,resource:o})=>{s?(n[s]=n[s]||{},RT(o,n[s])):RT(o,n)}),t.flatJson)for(const s in n)Due(n,s)&&gL(n[s]);return n}const zE=e=>!Qn(e)||Qi(e);function RT(e,t){if(zE(e)||zE(t))throw ds(20);for(const r in e)Due(e,r)&&(zE(e[r])||zE(t[r])?t[r]=e[r]:RT(e[r],t[r]))}const DHe=()=>{const e=xo();return e&&e.type[$k]?{[$k]:e.type[$k]}:null};function x7(e={}){const{__root:t}=e,r=t===void 0;let i=ei(e.inheritLocale)?e.inheritLocale:!0;const n=hs(t&&i?t.locale.value:Ot(e.locale)?e.locale:"en-US"),s=hs(t&&i?t.fallbackLocale.value:Ot(e.fallbackLocale)||Qi(e.fallbackLocale)||dr(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n.value),o=hs(_7(n.value,e)),a=hs(dr(e.datetimeFormats)?e.datetimeFormats:{[n.value]:{}}),l=hs(dr(e.numberFormats)?e.numberFormats:{[n.value]:{}});let u=t?t.missingWarn:ei(e.missingWarn)||qv(e.missingWarn)?e.missingWarn:!0,c=t?t.fallbackWarn:ei(e.fallbackWarn)||qv(e.fallbackWarn)?e.fallbackWarn:!0,p=t?t.fallbackRoot:ei(e.fallbackRoot)?e.fallbackRoot:!0,d=!!e.fallbackFormat,m=Zn(e.missing)?e.missing:null,g=Zn(e.missing)?HW(e.missing):null,b=Zn(e.postTranslation)?e.postTranslation:null,v=ei(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_=!!e.escapeParameter;const E=t?t.modifiers:dr(e.modifiers)?e.modifiers:{};let I=e.pluralRules||t&&t.pluralRules,x;function T(){return cHe({version:RHe,locale:n.value,fallbackLocale:s.value,messages:o.value,datetimeFormats:a.value,numberFormats:l.value,modifiers:E,pluralRules:I,missing:g===null?void 0:g,missingWarn:u,fallbackWarn:c,fallbackFormat:d,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:v,escapeParameter:_,__datetimeFormatters:dr(x)?x.__datetimeFormatters:void 0,__numberFormatters:dr(x)?x.__numberFormatters:void 0,__v_emitter:dr(x)?x.__v_emitter:void 0,__meta:{framework:"vue"}})}x=T(),Ow(x,n.value,s.value);function M(){return[n.value,s.value,o.value,a.value,l.value]}const k=$u({get:()=>n.value,set:$=>{n.value=$,x.locale=n.value}}),D=$u({get:()=>s.value,set:$=>{s.value=$,x.fallbackLocale=s.value,Ow(x,n.value,$)}}),B=$u(()=>o.value),G=$u(()=>a.value),W=$u(()=>l.value);function K(){return Zn(b)?b:null}function ne($){b=$,x.postTranslation=$}function ye(){return m}function y($){$!==null&&(g=HW($)),m=$,x.missing=g}function C($,A){return $!=="translate"||!A.resolvedMessage}function L($,A,V,H,N,Y){M();let be;try{PW(DHe()),be=$(x)}finally{PW(null)}if(Jn(be)&&be===BA){const[_e,ue]=A();if(t&&Ot(_e)&&C(V,ue)){p&&(zA(c,_e)||Bue(u,_e))&&Bo(Cu(6,{key:_e,type:V}));{const{__v_emitter:De}=x;De&&p&&De.emit("fallback",{type:V,key:_e,to:"global",groupId:`${V}:${_e}`})}}return t&&p?H(t):N(_e)}else{if(Y(be))return be;throw ds(14)}}function F(...$){return L(A=>jW(A,...$),()=>bL(...$),"translate",A=>A.t(...$),A=>A,A=>Ot(A))}function ae(...$){const[A,V,H]=$;if(H&&!Qn(H))throw ds(15);return F(A,V,Yn({resolvedMessage:!0},H||{}))}function q(...$){return L(A=>VW(A,...$),()=>wL(...$),"datetime format",A=>A.d(...$),()=>OT,A=>Ot(A))}function fe(...$){return L(A=>zW(A,...$),()=>_L(...$),"number format",A=>A.n(...$),()=>OT,A=>Ot(A))}function te($){return $.map(A=>Ot(A)?ar(dh,null,A,0):A)}const ve={normalize:te,interpolate:$=>$,type:"vnode"};function Ee(...$){return L(A=>{let V;const H=A;try{H.processor=ve,V=jW(H,...$)}finally{H.processor=null}return V},()=>bL(...$),"translate",A=>A[SL](...$),A=>[ar(dh,null,A,0)],A=>Qi(A))}function Ie(...$){return L(A=>zW(A,...$),()=>_L(...$),"number format",A=>A[ML](...$),()=>[],A=>Ot(A)||Qi(A))}function ke(...$){return L(A=>VW(A,...$),()=>wL(...$),"datetime format",A=>A[EL](...$),()=>[],A=>Ot(A)||Qi(A))}function Te($){I=$,x.pluralRules=I}function Se($,A){const V=Ot(A)?A:n.value,H=Z(V);return kT(H,$)!==null}function Ae($){let A=null;const V=WS(x,s.value,n.value);for(let H=0;H<V.length;H++){const N=o.value[V[H]]||{},Y=kT(N,$);if(Y!=null){A=Y;break}}return A}function X($){const A=Ae($);return A??(t?t.tm($)||{}:{})}function Z($){return o.value[$]||{}}function le($,A){o.value[$]=A,x.messages=o.value}function z($,A){o.value[$]=o.value[$]||{},RT(A,o.value[$]),x.messages=o.value}function ee($){return a.value[$]||{}}function we($,A){a.value[$]=A,x.datetimeFormats=a.value,BW(x,$,A)}function se($,A){a.value[$]=Yn(a.value[$]||{},A),x.datetimeFormats=a.value,BW(x,$,A)}function U($){return l.value[$]||{}}function oe($,A){l.value[$]=A,x.numberFormats=l.value,GW(x,$,A)}function re($,A){l.value[$]=Yn(l.value[$]||{},A),x.numberFormats=l.value,GW(x,$,A)}qW++,t&&(Yo(t.locale,$=>{i&&(n.value=$,x.locale=$,Ow(x,n.value,s.value))}),Yo(t.fallbackLocale,$=>{i&&(s.value=$,x.fallbackLocale=$,Ow(x,n.value,s.value))}));const R={id:qW,locale:k,fallbackLocale:D,get inheritLocale(){return i},set inheritLocale($){i=$,$&&t&&(n.value=t.locale.value,s.value=t.fallbackLocale.value,Ow(x,n.value,s.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:B,datetimeFormats:G,numberFormats:W,get modifiers(){return E},get pluralRules(){return I||{}},get isGlobal(){return r},get missingWarn(){return u},set missingWarn($){u=$,x.missingWarn=u},get fallbackWarn(){return c},set fallbackWarn($){c=$,x.fallbackWarn=c},get fallbackRoot(){return p},set fallbackRoot($){p=$},get fallbackFormat(){return d},set fallbackFormat($){d=$,x.fallbackFormat=d},get warnHtmlMessage(){return v},set warnHtmlMessage($){v=$,x.warnHtmlMessage=$},get escapeParameter(){return _},set escapeParameter($){_=$,x.escapeParameter=$},t:F,rt:ae,d:q,n:fe,te:Se,tm:X,getLocaleMessage:Z,setLocaleMessage:le,mergeLocaleMessage:z,getDateTimeFormat:ee,setDateTimeFormat:we,mergeDateTimeFormat:se,getNumberFormat:U,setNumberFormat:oe,mergeNumberFormat:re,getPostTranslationHandler:K,setPostTranslationHandler:ne,getMissingHandler:ye,setMissingHandler:y,[SL]:Ee,[ML]:Ie,[EL]:ke,[Wue]:Te,[Jue]:e.__injectWithOption};return R[zg]=$=>{x.__v_emitter=$},R[Fx]=()=>{x.__v_emitter=void 0},R}function FHe(e){const t=Ot(e.locale)?e.locale:"en-US",r=Ot(e.fallbackLocale)||Qi(e.fallbackLocale)||dr(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,i=Zn(e.missing)?e.missing:void 0,n=ei(e.silentTranslationWarn)||qv(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=ei(e.silentFallbackWarn)||qv(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=ei(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=dr(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,c=Zn(e.postTranslation)?e.postTranslation:void 0,p=Ot(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,d=!!e.escapeParameterHtml,m=ei(e.sync)?e.sync:!0;e.formatter&&Bo(Cu(8)),e.preserveDirectiveContent&&Bo(Cu(9));let g=e.messages;if(dr(e.sharedMessages)){const T=e.sharedMessages;g=Object.keys(T).reduce((k,D)=>{const B=k[D]||(k[D]={});return Yn(B,T[D]),k},g||{})}const{__i18n:b,__root:v,__injectWithOption:_}=e,E=e.datetimeFormats,I=e.numberFormats,x=e.flatJson;return{locale:t,fallbackLocale:r,messages:g,flatJson:x,datetimeFormats:E,numberFormats:I,missing:i,missingWarn:n,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:p,escapeParameter:d,inheritLocale:m,__i18n:b,__root:v,__injectWithOption:_}}function IL(e={}){const t=x7(FHe(e)),r={id:t.id,get locale(){return t.locale.value},set locale(i){t.locale.value=i},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(i){t.fallbackLocale.value=i},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return Bo(Cu(8)),{interpolate(){return[]}}},set formatter(i){Bo(Cu(8))},get missing(){return t.getMissingHandler()},set missing(i){t.setMissingHandler(i)},get silentTranslationWarn(){return ei(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(i){t.missingWarn=ei(i)?!i:i},get silentFallbackWarn(){return ei(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(i){t.fallbackWarn=ei(i)?!i:i},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(i){t.fallbackFormat=i},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(i){t.setPostTranslationHandler(i)},get sync(){return t.inheritLocale},set sync(i){t.inheritLocale=i},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){t.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(i){t.escapeParameter=i},get preserveDirectiveContent(){return Bo(Cu(9)),!0},set preserveDirectiveContent(i){Bo(Cu(9))},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...i){const[n,s,o]=i,a={};let l=null,u=null;if(!Ot(n))throw ds(15);const c=n;return Ot(s)?a.locale=s:Qi(s)?l=s:dr(s)&&(u=s),Qi(o)?l=o:dr(o)&&(u=o),t.t(c,l||u||{},a)},rt(...i){return t.rt(...i)},tc(...i){const[n,s,o]=i,a={plural:1};let l=null,u=null;if(!Ot(n))throw ds(15);const c=n;return Ot(s)?a.locale=s:Jn(s)?a.plural=s:Qi(s)?l=s:dr(s)&&(u=s),Ot(o)?a.locale=o:Qi(o)?l=o:dr(o)&&(u=o),t.t(c,l||u||{},a)},te(i,n){return t.te(i,n)},tm(i){return t.tm(i)},getLocaleMessage(i){return t.getLocaleMessage(i)},setLocaleMessage(i,n){t.setLocaleMessage(i,n)},mergeLocaleMessage(i,n){t.mergeLocaleMessage(i,n)},d(...i){return t.d(...i)},getDateTimeFormat(i){return t.getDateTimeFormat(i)},setDateTimeFormat(i,n){t.setDateTimeFormat(i,n)},mergeDateTimeFormat(i,n){t.mergeDateTimeFormat(i,n)},n(...i){return t.n(...i)},getNumberFormat(i){return t.getNumberFormat(i)},setNumberFormat(i,n){t.setNumberFormat(i,n)},mergeNumberFormat(i,n){t.mergeNumberFormat(i,n)},getChoiceIndex(i,n){return Bo(Cu(10)),-1},__onComponentInstanceCreated(i){const{componentInstanceCreatedListener:n}=e;n&&n(i,r)}};return r.__enableEmitter=i=>{const n=t;n[zg]&&n[zg](i)},r.__disableEmitter=()=>{const i=t;i[Fx]&&i[Fx]()},r}const S7={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}},Ck={name:"i18n-t",props:Yn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Jn(e)||!isNaN(e)}},S7),setup(e,t){const{slots:r,attrs:i}=t,n=e.i18n||M7({useScope:e.scope,__useComponent:!0}),s=Object.keys(r).filter(o=>o!=="_");return()=>{const o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=Ot(e.plural)?+e.plural:e.plural);const a=jHe(t,s),l=n[SL](e.keypath,a,o),u=Yn({},i);return Ot(e.tag)||Qn(e.tag)?Qo(e.tag,u,l):Qo(Xr,u,l)}}};function jHe({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((r,i)=>{const n=e[i];return n&&(r[i]=n()),r},{})}function Zue(e,t,r,i){const{slots:n,attrs:s}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),Ot(e.format)?o.key=e.format:Qn(e.format)&&(Ot(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((p,d)=>r.includes(d)?Yn({},p,{[d]:e.format[d]}):p,{}));const l=i(e.value,o,a);let u=[o.key];Qi(l)?u=l.map((p,d)=>{const m=n[p.type];return m?m({[p.type]:p.value,index:d,parts:l}):[p.value]}):Ot(l)&&(u=[l]);const c=Yn({},s);return Ot(e.tag)||Qn(e.tag)?Qo(e.tag,c,u):Qo(Xr,c,u)}}const UHe=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],WW={name:"i18n-n",props:Yn({value:{type:Number,required:!0},format:{type:[String,Object]}},S7),setup(e,t){const r=e.i18n||M7({useScope:"parent",__useComponent:!0});return Zue(e,t,UHe,(...i)=>r[ML](...i))}},VHe=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],JW={name:"i18n-d",props:Yn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},S7),setup(e,t){const r=e.i18n||M7({useScope:"parent",__useComponent:!0});return Zue(e,t,VHe,(...i)=>r[EL](...i))}};function BHe(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const i=r.__getInstance(t);return i!=null?i.__composer:e.global.__composer}}function zHe(e){const t=(r,{instance:i,value:n,modifiers:s})=>{if(!i||!i.$)throw ds(22);const o=BHe(e,i.$);s.preserve&&Bo(Cu(7));const a=GHe(n);r.textContent=o.t(...qHe(a))};return{beforeMount:t,beforeUpdate:t}}function GHe(e){if(Ot(e))return{path:e};if(dr(e)){if(!("path"in e))throw ds(19,"path");return e}else throw ds(20)}function qHe(e){const{path:t,locale:r,args:i,choice:n,plural:s}=e,o={},a=i||{};return Ot(r)&&(o.locale=r),Jn(n)&&(o.plural=n),Jn(s)&&(o.plural=s),[t,a,o]}function HHe(e,t,...r){const i=dr(r[0])?r[0]:{},n=!!i.useI18nComponentName,s=ei(i.globalInstall)?i.globalInstall:!0;s&&n&&Bo(Cu(11,{name:Ck.name})),s&&(e.component(n?"i18n":Ck.name,Ck),e.component(WW.name,WW),e.component(JW.name,JW)),e.directive("t",zHe(t))}const Kue="vue-i18n: composer properties";let TL;async function WHe(e,t){return new Promise((r,i)=>{try{Hue({id:"vue-devtools-plugin-vue-i18n",label:Ak["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[Kue],app:e},n=>{TL=n,n.on.visitComponentTree(({componentInstance:s,treeNode:o})=>{JHe(s,o,t)}),n.on.inspectComponent(({componentInstance:s,instanceData:o})=>{s.vnode.el.__VUE_I18N__&&o&&(t.mode==="legacy"?s.vnode.el.__VUE_I18N__!==t.global.__composer&&ZW(o,s.vnode.el.__VUE_I18N__):ZW(o,s.vnode.el.__VUE_I18N__))}),n.addInspector({id:"vue-i18n-resource-inspector",label:Ak["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:kHe["vue-i18n-resource-inspector"]}),n.on.getInspectorTree(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&XHe(s,t)}),n.on.getInspectorState(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&eWe(s,t)}),n.on.editInspectorState(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&rWe(s,t)}),n.addTimelineLayer({id:"vue-i18n-timeline",label:Ak["vue-i18n-timeline"],color:OHe["vue-i18n-timeline"]}),r(!0)})}catch(n){console.error(n),i(!1)}})}function JHe(e,t,r){const i=r.mode==="composition"?r.global:r.global.__composer;if(e&&e.vnode.el.__VUE_I18N__&&e.vnode.el.__VUE_I18N__!==i){const s={label:`i18n (${e.type.name||e.type.displayName||e.type.__file} Scope)`,textColor:0,backgroundColor:16764185};t.tags.push(s)}}function ZW(e,t){const r=Kue;e.state.push({type:r,key:"locale",editable:!0,value:t.locale.value}),e.state.push({type:r,key:"availableLocales",editable:!1,value:t.availableLocales}),e.state.push({type:r,key:"fallbackLocale",editable:!0,value:t.fallbackLocale.value}),e.state.push({type:r,key:"inheritLocale",editable:!0,value:t.inheritLocale}),e.state.push({type:r,key:"messages",editable:!1,value:E7(t.messages.value)}),e.state.push({type:r,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}),e.state.push({type:r,key:"numberFormats",editable:!1,value:t.numberFormats.value})}function E7(e){const t={};return Object.keys(e).forEach(r=>{const i=e[r];Zn(i)&&"source"in i?t[r]=QHe(i):Qn(i)?t[r]=E7(i):t[r]=i}),t}const ZHe={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function KHe(e){return e.replace(/[<>"&]/g,YHe)}function YHe(e){return ZHe[e]||e}function QHe(e){const t=e.source?`("${KHe(e.source)}")`:"(?)";return{_custom:{type:"function",display:`<span>\u0192</span> ${t}`}}}function XHe(e,t){e.rootNodes.push({id:"global",label:"Global Scope"});const r=t.mode==="composition"?t.global:t.global.__composer;for(const[i,n]of t.__instances){const s=t.mode==="composition"?n:n.__composer;if(r===s)continue;const o=i.type.name||i.type.displayName||i.type.__file;e.rootNodes.push({id:s.id.toString(),label:`${o} Scope`})}}function Yue(e,t){if(e==="global")return t.mode==="composition"?t.global:t.global.__composer;{const r=Array.from(t.__instances.values()).find(i=>i.id.toString()===e);return r?t.mode==="composition"?r:r.__composer:null}}function eWe(e,t){const r=Yue(e.nodeId,t);r&&(e.state=tWe(r))}function tWe(e){const t={},r="Locale related info",i=[{type:r,key:"locale",editable:!0,value:e.locale.value},{type:r,key:"fallbackLocale",editable:!0,value:e.fallbackLocale.value},{type:r,key:"availableLocales",editable:!1,value:e.availableLocales},{type:r,key:"inheritLocale",editable:!0,value:e.inheritLocale}];t[r]=i;const n="Locale messages info",s=[{type:n,key:"messages",editable:!1,value:E7(e.messages.value)}];t[n]=s;const o="Datetime formats info",a=[{type:o,key:"datetimeFormats",editable:!1,value:e.datetimeFormats.value}];t[o]=a;const l="Datetime formats info",u=[{type:l,key:"numberFormats",editable:!1,value:e.numberFormats.value}];return t[l]=u,t}function jx(e,t){if(TL){let r;t&&"groupId"in t&&(r=t.groupId,delete t.groupId),TL.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:e,groupId:r,time:Date.now(),meta:{},data:t||{},logType:e==="compile-error"?"error":e==="fallback"||e==="missing"?"warning":"default"}})}}function rWe(e,t){const r=Yue(e.nodeId,t);if(r){const[i]=e.path;i==="locale"&&Ot(e.state.value)?r.locale.value=e.state.value:i==="fallbackLocale"&&(Ot(e.state.value)||Qi(e.state.value)||Qn(e.state.value))?r.fallbackLocale.value=e.state.value:i==="inheritLocale"&&ei(e.state.value)&&(r.inheritLocale=e.state.value)}}function iWe(e,t,r){return{beforeCreate(){const i=xo();if(!i)throw ds(22);const n=this.$options;if(n.i18n){const s=n.i18n;n.__i18n&&(s.__i18n=n.__i18n),s.__root=t,this===this.$root?this.$i18n=KW(e,s):(s.__injectWithOption=!0,this.$i18n=IL(s))}else n.__i18n?this===this.$root?this.$i18n=KW(e,n):this.$i18n=IL({__i18n:n.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;e.__onComponentInstanceCreated(this.$i18n),r.__setInstance(i,this.$i18n),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s)},mounted(){{this.$el.__VUE_I18N__=this.$i18n.__composer;const i=this.__v_emitter=v7(),n=this.$i18n;n.__enableEmitter&&n.__enableEmitter(i),i.on("*",jx)}},beforeUnmount(){const i=xo();if(!i)throw ds(22);{this.__v_emitter&&(this.__v_emitter.off("*",jx),delete this.__v_emitter);const n=this.$i18n;n.__disableEmitter&&n.__disableEmitter(),delete this.$el.__VUE_I18N__}delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__deleteInstance(i),delete this.$i18n}}}function KW(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Wue](t.pluralizationRules||e.pluralizationRules);const r=_7(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(i=>e.mergeLocaleMessage(i,r[i])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(i=>e.mergeDateTimeFormat(i,t.datetimeFormats[i])),t.numberFormats&&Object.keys(t.numberFormats).forEach(i=>e.mergeNumberFormat(i,t.numberFormats[i])),e}function nWe(e={}){const t=__VUE_I18N_LEGACY_API__&&ei(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=!!e.globalInjection,i=new Map,n=__VUE_I18N_LEGACY_API__&&t?IL(e):x7(e),s=Jp("vue-i18n"),o={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(a,...l){a.__VUE_I18N__=o,a.__VUE_I18N_SYMBOL__=s,a.provide(a.__VUE_I18N_SYMBOL__,o),!t&&r&&uWe(a,o.global),__VUE_I18N_FULL_INSTALL__&&HHe(a,o,...l),__VUE_I18N_LEGACY_API__&&t&&a.mixin(iWe(n,n.__composer,o));{if(!await WHe(a,o))throw ds(21);const c=v7();if(t){const p=n;p.__enableEmitter&&p.__enableEmitter(c)}else{const p=n;p[zg]&&p[zg](c)}c.on("*",jx)}},get global(){return n},__instances:i,__getInstance(a){return i.get(a)||null},__setInstance(a,l){i.set(a,l)},__deleteInstance(a){i.delete(a)}};return o}function M7(e={}){const t=xo();if(t==null)throw ds(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw ds(17);const r=gg(t.appContext.app.__VUE_I18N_SYMBOL__);if(!r)throw ds(22);const i=r.mode==="composition"?r.global:r.global.__composer,n=UA(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(n==="global"){let a=Qn(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(a=_7(i.locale.value,{messages:a,__i18n:t.type.__i18nGlobal}));const l=Object.keys(a);if(l.length&&l.forEach(u=>{i.mergeLocaleMessage(u,a[u])}),Qn(e.datetimeFormats)){const u=Object.keys(e.datetimeFormats);u.length&&u.forEach(c=>{i.mergeDateTimeFormat(c,e.datetimeFormats[c])})}if(Qn(e.numberFormats)){const u=Object.keys(e.numberFormats);u.length&&u.forEach(c=>{i.mergeNumberFormat(c,e.numberFormats[c])})}return i}if(n==="parent"){let a=sWe(r,t,e.__useComponent);return a==null&&(Bo(Cu(12)),a=i),a}if(r.mode==="legacy")throw ds(18);const s=r;let o=s.__getInstance(t);if(o==null){const a=t.type,l=Yn({},e);a.__i18n&&(l.__i18n=a.__i18n),i&&(l.__root=i),o=x7(l),oWe(s,t,o),s.__setInstance(t,o)}return o}function sWe(e,t,r=!1){let i=null;const n=t.root;let s=t.parent;for(;s!=null;){const o=e;if(e.mode==="composition")i=o.__getInstance(s);else{const a=o.__getInstance(s);a!=null&&(i=a.__composer),r&&i&&!i[Jue]&&(i=null)}if(i!=null||n===s)break;s=s.parent}return i}function oWe(e,t,r){let i=null;bh(()=>{if(t.vnode.el){t.vnode.el.__VUE_I18N__=r,i=v7();const n=r;n[zg]&&n[zg](i),i.on("*",jx)}},t),l0(()=>{if(t.vnode.el&&t.vnode.el.__VUE_I18N__){i&&i.off("*",jx);const n=r;n[Fx]&&n[Fx](),delete t.vnode.el.__VUE_I18N__}e.__deleteInstance(t)},t)}const aWe=["locale","fallbackLocale","availableLocales"],lWe=["t","rt","d","n","tm"];function uWe(e,t){const r=Object.create(null);aWe.forEach(i=>{const n=Object.getOwnPropertyDescriptor(t,i);if(!n)throw ds(22);const s=ai(n.value)?{get(){return n.value.value},set(o){n.value.value=o}}:{get(){return n.get&&n.get()}};Object.defineProperty(r,i,s)}),e.config.globalProperties.$i18n=r,lWe.forEach(i=>{const n=Object.getOwnPropertyDescriptor(t,i);if(!n||!n.value)throw ds(22);Object.defineProperty(e.config.globalProperties,`$${i}`,n)})}lHe(gHe);PHe();{const e=z1();e.__INTLIFY__=!0,tHe(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var cWe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Toggle between imperial and metric map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Fran\xE7ais","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"fran\xE7ais","lang-native":"Fran\xE7ais","ramp.about.open":"Ouvrir \xC0 propos de PCAR","ramp.about":"\xC0 propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous d\xE9placer entre les sections de l\u2019application.","keyboardInstructions.lists":"Lorsqu\u2019un \xE9l\xE9ment de la liste est s\xE9lectionn\xE9, vous pouvez appuyer sur \xAB Espace \xBB ou \xAB Entr\xE9e \xBB pour cliquer sur l\u2019\xE9l\xE9ment. Vous pouvez \xE9galement vous d\xE9placer au sein de l\u2019\xE9l\xE9ment de la liste au moyen de la touche \xAB Tab \xBB.","keyboardInstructions.map":"Lorsque la carte est s\xE9lectionn\xE9e, utilisez le pav\xE9 curseur pour vous d\xE9placer et appuyez sur \xAB Entr\xE9e \xBB  pour s\xE9lectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Basculer entre les \xE9chelles m\xE9triques et imp\xE9riales pour la carte","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Fran\xE7ais","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fen\xEAtre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"D\xE9velopper","notifications.controls.collapse":"R\xE9duire","notifications.controls.clearAll":"Effacer tout","panels.access":"Acc\xE9der \xE0 la fen\xEAtre","panels.controls.close":"Fermer","panels.controls.pin":"\xC9pingler","panels.controls.unpin":"D\xE9s\xE9pingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"R\xE9duire","panels.controls.expand":"D\xE9velopper","panels.controls.collapse":"R\xE9duire","panels.controls.moveRight":"Aller \xE0 droite","panels.controls.moveLeft":"Aller \xE0 gauche","panels.alert.open":"Fen\xEAtre {name} ouverte","panels.alert.close":"Fen\xEAtre {name} ferm\xE9e","panels.alert.minimize":"Fen\xEAtre {name} r\xE9duite","layer.error":"[fr] {id} n'a pas pu \xEAtre charg\xE9e","layer.longload":"Le chargement de {id} met plus de temps que pr\xE9vu","layer.longdraw":"[fr] {id} prend plus longtemps que pr\xE9vu pour dessiner"}};const YW="en",hWe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function pWe(){return nWe({locale:document.documentElement.getAttribute("lang")||YW,fallbackLocale:YW,globalInjection:!0,messages:cWe,numberFormats:hWe})}var Que={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},r=e.exports,i=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,c={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)c[a[0][l]]=o[l];return c}return!1}(),n={change:i.fullscreenchange,error:i.fullscreenerror},s={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var c=o[i.requestFullscreen]();c instanceof Promise&&c.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[i.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=n[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=n[o];l&&t.removeEventListener(l,a,!1)},raw:i};if(!i){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),r?e.exports=s:window.screenfull=s})()})(Que);var yc=Que.exports,dWe={install(e,t){e.mixin({beforeCreate(){const r=this.$options;r.iApi?this.$iApi=r.iApi:r.parent&&r.parent.$iApi&&(this.$iApi=r.parent.$iApi)}})}},fWe={install(e,t){e.mixin({methods:{get(r){return r in this.$store.getters?$u(()=>this.$store.getters[r]):$u(()=>{try{return this.$store.get(r)}catch(n){console.error(`vuex pathify error: ${n}`);return}})},call(r){return i=>$u(this.$store.dispatch(r,i))}}})}};class mWe{maptipInstance=void 0;maptipPoint=void 0;content=""}const yWe={},gWe={setMaptipInstance:(e,t)=>{e.commit("SET_MAPTIP_INSTANCE",t)},setMaptipPoint:(e,t)=>{e.commit("SET_MAPTIP_Point",t)},setMaptipContent:(e,t)=>{e.commit("SET_MAPTIP_CONTENT",t)}},vWe={SET_MAPTIP_INSTANCE:(e,t)=>{e.maptipInstance=t},SET_MAPTIP_POINT:(e,t)=>{e.maptipPoint=t},SET_MAPTIP_CONTENT:(e,t)=>{e.content=t}};var Tu=(e=>(e.maptipPoint="maptip/maptipPoint",e.maptipInstance="maptip/maptipInstance",e.content="maptip/content",e.setMaptipPoint="maptip/setMaptipPoint!",e.setMaptipContent="maptip/setMaptipContent!",e.setMaptipInstance="maptip/setMaptipInstance!",e))(Tu||{});function bWe(){const e=new mWe;return{namespaced:!0,state:e,getters:{...yWe},actions:{...gWe,...tl.actions(e)},mutations:{...vWe,...tl.mutations(e)}}}var li=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r};const wWe=Ar({name:"EsriMapV",data(){return{maptipPoint:this.get(Tu.maptipPoint),maptipInstance:this.get(Tu.maptipInstance),maptipContent:this.get(Tu.content),watchers:[]}},created(){this.watchers.push(this.$watch("maptipPoint",e=>{if(this.maptipPoint){let t,r;const i=this.$iApi.geo.map.getPixelWidth()/2,n=0,s=this.$iApi.geo.map.mapPointToScreenPoint(this.maptipPoint);t=s.screenX-i,r=n-s.screenY,this.maptipInstance.setProps({offset:[t,r]}),this.maptipContent&&this.maptipContent!==""&&this.maptipInstance.show()}else this.maptipInstance.hide()})),this.watchers.push(this.$watch("maptipContent",e=>{this.maptipContent&&this.maptipContent!==""&&this.maptipPoint?(this.maptipInstance.setContent(this.maptipContent),this.maptipInstance.show()):this.maptipInstance.hide()}))},beforeUnmount(){this.watchers.forEach(e=>e())},methods:{mouseFocus(){this.$iApi.geo.map.setMouseFocus()}}});function _We(e,t,r,i,n,s){const o=ci("tippy");return ti((pt(),Ct("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:t[0]||(t[0]=(...a)=>e.mouseFocus&&e.mouseFocus(...a)),onKeydown:t[1]||(t[1]=JF(VS(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[o,{allowHTML:!0,zIndex:5,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}var xWe=li(wWe,[["render",_We],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/map/esri-map.vue"]]),Xue={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},I7={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},SWe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],PT={CSS:{},springs:{}};function Kc(e,t,r){return Math.min(Math.max(e,t),r)}function O2(e,t){return e.indexOf(t)>-1}function kk(e,t){return e.apply(null,t)}var Vt={arr:function(e){return Array.isArray(e)},obj:function(e){return O2(Object.prototype.toString.call(e),"Object")},pth:function(e){return Vt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Vt.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return Vt.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Vt.hex(e)||Vt.rgb(e)||Vt.hsl(e)},key:function(e){return!Xue.hasOwnProperty(e)&&!I7.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function ece(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function tce(e,t){var r=ece(e),i=Kc(Vt.und(r[0])?1:r[0],.1,100),n=Kc(Vt.und(r[1])?100:r[1],.1,100),s=Kc(Vt.und(r[2])?10:r[2],.1,100),o=Kc(Vt.und(r[3])?0:r[3],.1,100),a=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,p=l<1?(l*a+-o)/u:-o+a;function d(g){var b=t?t*g/1e3:g;return l<1?b=Math.exp(-b*l*a)*(c*Math.cos(u*b)+p*Math.sin(u*b)):b=(c+p*b)*Math.exp(-b*a),g===0||g===1?g:1-b}function m(){var g=PT.springs[e];if(g)return g;for(var b=1/6,v=0,_=0;;)if(v+=b,d(v)===1){if(_++,_>=16)break}else _=0;var E=v*b*1e3;return PT.springs[e]=E,E}return t?d:m}function EWe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Kc(t,1e-6,1)*e)*(1/e)}}var MWe=function(){var e=11,t=1/(e-1);function r(c,p){return 1-3*p+3*c}function i(c,p){return 3*p-6*c}function n(c){return 3*c}function s(c,p,d){return((r(p,d)*c+i(p,d))*c+n(p))*c}function o(c,p,d){return 3*r(p,d)*c*c+2*i(p,d)*c+n(p)}function a(c,p,d,m,g){var b,v,_=0;do v=p+(d-p)/2,b=s(v,m,g)-c,b>0?d=v:p=v;while(Math.abs(b)>1e-7&&++_<10);return v}function l(c,p,d,m){for(var g=0;g<4;++g){var b=o(p,d,m);if(b===0)return p;var v=s(p,d,m)-c;p-=v/b}return p}function u(c,p,d,m){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var g=new Float32Array(e);if(c!==p||d!==m)for(var b=0;b<e;++b)g[b]=s(b*t,c,d);function v(_){for(var E=0,I=1,x=e-1;I!==x&&g[I]<=_;++I)E+=t;--I;var T=(_-g[I])/(g[I+1]-g[I]),M=E+T*t,k=o(M,c,d);return k>=.001?l(_,M,c,d):k===0?M:a(_,E,E+t,c,d)}return function(_){return c===p&&d===m||_===0||_===1?_:s(v(_),p,m)}}return u}(),rce=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=Kc(i,1,10),o=Kc(n,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,o){return function(a){return 1-n(s,o)(1-a)}},e["easeInOut"+i]=function(s,o){return function(a){return a<.5?n(s,o)(a*2)/2:1-n(s,o)(a*-2+2)/2}},e["easeOutIn"+i]=function(s,o){return function(a){return a<.5?(1-n(s,o)(1-a*2))/2:(n(s,o)(a*2-1)+1)/2}}}),e}();function T7(e,t){if(Vt.fnc(e))return e;var r=e.split("(")[0],i=rce[r],n=ece(e);switch(r){case"spring":return tce(e,t);case"cubicBezier":return kk(MWe,n);case"steps":return kk(EWe,n);default:return kk(i,n)}}function ice(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function GA(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}return n}function qA(e){return e.reduce(function(t,r){return t.concat(Vt.arr(r)?qA(r):r)},[])}function QW(e){return Vt.arr(e)?e:(Vt.str(e)&&(e=ice(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function A7(e,t){return e.some(function(r){return r===t})}function $7(e){var t={};for(var r in e)t[r]=e[r];return t}function AL(e,t){var r=$7(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function HA(e,t){var r=$7(e);for(var i in t)r[i]=Vt.und(e[i])?t[i]:e[i];return r}function IWe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function TWe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(a,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+s+","+o+",1)"}function AWe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(d,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?d+(m-d)*6*g:g<1/2?m:g<2/3?d+(m-d)*(2/3-g)*6:d}var a,l,u;if(i==0)a=l=u=n;else{var c=n<.5?n*(1+i):n+i-n*i,p=2*n-c;a=o(p,c,r+1/3),l=o(p,c,r),u=o(p,c,r-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+s+")"}function $We(e){if(Vt.rgb(e))return IWe(e);if(Vt.hex(e))return TWe(e);if(Vt.hsl(e))return AWe(e)}function Mp(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function CWe(e){if(O2(e,"translate")||e==="perspective")return"px";if(O2(e,"rotate")||O2(e,"skew"))return"deg"}function $L(e,t){return Vt.fnc(e)?e(t.target,t.id,t.total):e}function Yc(e,t){return e.getAttribute(t)}function C7(e,t,r){var i=Mp(t);if(A7([r,"deg","rad","turn"],i))return t;var n=PT.CSS[t+r];if(!Vt.und(n))return n;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+r;var l=s/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return PT.CSS[t+r]=u,u}function nce(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?C7(e,n,r):n}}function k7(e,t){if(Vt.dom(e)&&!Vt.inp(e)&&(!Vt.nil(Yc(e,t))||Vt.svg(e)&&e[t]))return"attribute";if(Vt.dom(e)&&A7(SWe,t))return"transform";if(Vt.dom(e)&&t!=="transform"&&nce(e,t))return"css";if(e[t]!=null)return"object"}function sce(e){if(!!Vt.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function kWe(e,t,r,i){var n=O2(t,"scale")?1:0+CWe(t),s=sce(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?C7(e,s,i):s}function O7(e,t,r,i){switch(k7(e,t)){case"transform":return kWe(e,t,i,r);case"css":return nce(e,t,r);case"attribute":return Yc(e,t);default:return e[t]||0}}function R7(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=Mp(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function oce(e,t){if(Vt.col(e))return $We(e);if(/\s/g.test(e))return e;var r=Mp(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function P7(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function OWe(e){return Math.PI*2*Yc(e,"r")}function RWe(e){return Yc(e,"width")*2+Yc(e,"height")*2}function PWe(e){return P7({x:Yc(e,"x1"),y:Yc(e,"y1")},{x:Yc(e,"x2"),y:Yc(e,"y2")})}function ace(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=P7(i,s)),i=s}return r}function LWe(e){var t=e.points;return ace(e)+P7(t.getItem(t.numberOfItems-1),t.getItem(0))}function lce(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return OWe(e);case"rect":return RWe(e);case"line":return PWe(e);case"polyline":return ace(e);case"polygon":return LWe(e)}}function NWe(e){var t=lce(e);return e.setAttribute("stroke-dasharray",t),t}function DWe(e){for(var t=e.parentNode;Vt.svg(t)&&Vt.svg(t.parentNode);)t=t.parentNode;return t}function uce(e,t){var r=t||{},i=r.el||DWe(e),n=i.getBoundingClientRect(),s=Yc(i,"viewBox"),o=n.width,a=n.height,l=r.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function FWe(e,t){var r=Vt.str(e)?ice(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:uce(r),totalLength:lce(r)*(i/100)}}}function jWe(e,t,r){function i(c){c===void 0&&(c=0);var p=t+c>=1?t+c:0;return e.el.getPointAtLength(p)}var n=uce(e.el,e.svg),s=i(),o=i(-1),a=i(1),l=r?1:n.w/n.vW,u=r?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*l;case"y":return(s.y-n.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function XW(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=oce(Vt.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:Vt.str(e)||t?i.split(r):[]}}function L7(e){var t=e?qA(Vt.arr(e)?e.map(QW):QW(e)):[];return GA(t,function(r,i,n){return n.indexOf(r)===i})}function cce(e){var t=L7(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:sce(r)}}})}function UWe(e,t){var r=$7(t);if(/^spring/.test(r.easing)&&(r.duration=tce(r.easing)),Vt.arr(e)){var i=e.length,n=i===2&&!Vt.obj(e[0]);n?e={value:e}:Vt.fnc(t.duration)||(r.duration=t.duration/i)}var s=Vt.arr(e)?e:[e];return s.map(function(o,a){var l=Vt.obj(o)&&!Vt.pth(o)?o:{value:o};return Vt.und(l.delay)&&(l.delay=a?0:t.delay),Vt.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return HA(o,r)})}function VWe(e){for(var t=GA(qA(e.map(function(s){return Object.keys(s)})),function(s){return Vt.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),r={},i=function(s){var o=t[s];r[o]=e.map(function(a){var l={};for(var u in a)Vt.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},n=0;n<t.length;n++)i(n);return r}function BWe(e,t){var r=[],i=t.keyframes;i&&(t=HA(VWe(i),t));for(var n in t)Vt.key(n)&&r.push({name:n,tweens:UWe(t[n],e)});return r}function zWe(e,t){var r={};for(var i in e){var n=$L(e[i],t);Vt.arr(n)&&(n=n.map(function(s){return $L(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function GWe(e,t){var r;return e.tweens.map(function(i){var n=zWe(i,t),s=n.value,o=Vt.arr(s)?s[1]:s,a=Mp(o),l=O7(t.target,e.name,a,t),u=r?r.to.original:l,c=Vt.arr(s)?s[0]:u,p=Mp(c)||Mp(l),d=a||p;return Vt.und(o)&&(o=u),n.from=XW(c,d),n.to=XW(R7(o,c),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=T7(n.easing,n.duration),n.isPath=Vt.pth(s),n.isPathTargetInsideSVG=n.isPath&&Vt.svg(t.target),n.isColor=Vt.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var hce={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function pce(e,t){var r=cce(e);r.forEach(function(i){for(var n in t){var s=$L(t[n],i),o=i.target,a=Mp(s),l=O7(o,n,a,i),u=a||Mp(l),c=R7(oce(s,u),l),p=k7(o,n);hce[p](o,n,c,i.transforms,!0)}})}function qWe(e,t){var r=k7(e.target,t.name);if(r){var i=GWe(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function HWe(e,t){return GA(qA(e.map(function(r){return t.map(function(i){return qWe(r,i)})})),function(r){return!Vt.und(r)})}function dce(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var eJ=0;function WWe(e){var t=AL(Xue,e),r=AL(I7,e),i=BWe(r,e),n=cce(e.targets),s=HWe(n,i),o=dce(s,r),a=eJ;return eJ++,HA(t,{id:a,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var ku=[],fce=function(){var e;function t(){!e&&(!tJ()||!zi.suspendWhenDocumentHidden)&&ku.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var s=ku.length,o=0;o<s;){var a=ku[o];a.paused?(ku.splice(o,1),s--):(a.tick(n),o++)}e=o>0?requestAnimationFrame(r):void 0}function i(){!zi.suspendWhenDocumentHidden||(tJ()?e=cancelAnimationFrame(e):(ku.forEach(function(n){return n._onDocumentVisibility()}),fce()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function tJ(){return!!document&&document.hidden}function zi(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,o=null;function a(E){var I=window.Promise&&new Promise(function(x){return o=x});return E.finished=I,I}var l=WWe(e);a(l);function u(){var E=l.direction;E!=="alternate"&&(l.direction=E!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(I){return I.reversed=l.reversed})}function c(E){return l.reversed?l.duration-E:E}function p(){t=0,r=c(l.currentTime)*(1/zi.speed)}function d(E,I){I&&I.seek(E-I.timelineOffset)}function m(E){if(l.reversePlayback)for(var x=s;x--;)d(E,n[x]);else for(var I=0;I<s;I++)d(E,n[I])}function g(E){for(var I=0,x=l.animations,T=x.length;I<T;){var M=x[I],k=M.animatable,D=M.tweens,B=D.length-1,G=D[B];B&&(G=GA(D,function(Ie){return E<Ie.end})[0]||G);for(var W=Kc(E-G.start-G.delay,0,G.duration)/G.duration,K=isNaN(W)?1:G.easing(W),ne=G.to.strings,ye=G.round,y=[],C=G.to.numbers.length,L=void 0,F=0;F<C;F++){var ae=void 0,q=G.to.numbers[F],fe=G.from.numbers[F]||0;G.isPath?ae=jWe(G.value,K*q,G.isPathTargetInsideSVG):ae=fe+K*(q-fe),ye&&(G.isColor&&F>2||(ae=Math.round(ae*ye)/ye)),y.push(ae)}var te=ne.length;if(!te)L=y[0];else{L=ne[0];for(var ge=0;ge<te;ge++){ne[ge];var ve=ne[ge+1],Ee=y[ge];isNaN(Ee)||(ve?L+=Ee+ve:L+=Ee+" ")}}hce[M.type](k.target,M.property,L,k.transforms),M.currentValue=L,I++}}function b(E){l[E]&&!l.passThrough&&l[E](l)}function v(){l.remaining&&l.remaining!==!0&&l.remaining--}function _(E){var I=l.duration,x=l.delay,T=I-l.endDelay,M=c(E);l.progress=Kc(M/I*100,0,100),l.reversePlayback=M<l.currentTime,n&&m(M),!l.began&&l.currentTime>0&&(l.began=!0,b("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,b("loopBegin")),M<=x&&l.currentTime!==0&&g(0),(M>=T&&l.currentTime!==I||!I)&&g(I),M>x&&M<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,b("changeBegin")),b("change"),g(M)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,b("changeComplete")),l.currentTime=Kc(M,0,I),l.began&&b("update"),E>=I&&(r=0,v(),l.remaining?(t=i,b("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,b("loopComplete"),b("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var E=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=E==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var I=s;I--;)l.children[I].reset();(l.reversed&&l.loop!==!0||E==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=p,l.set=function(E,I){return pce(E,I),l},l.tick=function(E){i=E,t||(t=i),_((i+(r-t))*zi.speed)},l.seek=function(E){_(c(E))},l.pause=function(){l.paused=!0,p()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,ku.push(l),p(),fce())},l.reverse=function(){u(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.remove=function(E){var I=L7(E);mce(I,l)},l.reset(),l.autoplay&&l.play(),l}function rJ(e,t){for(var r=t.length;r--;)A7(e,t[r].animatable.target)&&t.splice(r,1)}function mce(e,t){var r=t.animations,i=t.children;rJ(e,r);for(var n=i.length;n--;){var s=i[n],o=s.animations;rJ(e,o),!o.length&&!s.children.length&&i.splice(n,1)}!r.length&&!i.length&&t.pause()}function JWe(e){for(var t=L7(e),r=ku.length;r--;){var i=ku[r];mce(t,i)}}function ZWe(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?T7(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",c=Vt.arr(e),p=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,m=Mp(c?e[1]:e)||0,g=t.start||0+(c?p:0),b=[],v=0;return function(_,E,I){if(a&&(o=0),l&&(o=(I-1)/2),u&&(o=I-1),!b.length){for(var x=0;x<I;x++){if(!n)b.push(Math.abs(o-x));else{var T=l?(n[0]-1)/2:o%n[0],M=l?(n[1]-1)/2:Math.floor(o/n[0]),k=x%n[0],D=Math.floor(x/n[0]),B=T-k,G=M-D,W=Math.sqrt(B*B+G*G);s==="x"&&(W=-B),s==="y"&&(W=-G),b.push(W)}v=Math.max.apply(Math,b)}i&&(b=b.map(function(ne){return i(ne/v)*v})),r==="reverse"&&(b=b.map(function(ne){return s?ne<0?ne*-1:-ne:Math.abs(v-ne)}))}var K=c?(d-p)/v:p;return g+K*(Math.round(b[E]*100)/100)+m}}function KWe(e){e===void 0&&(e={});var t=zi(e);return t.duration=0,t.add=function(r,i){var n=ku.indexOf(t),s=t.children;n>-1&&ku.splice(n,1);function o(d){d.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=HA(r,AL(I7,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Vt.und(i)?u:R7(i,u),o(t),t.seek(l.timelineOffset);var c=zi(l);o(c),s.push(c);var p=dce(s,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}zi.version="3.2.1";zi.speed=1;zi.suspendWhenDocumentHidden=!0;zi.running=ku;zi.remove=JWe;zi.get=O7;zi.set=pce;zi.convertPx=C7;zi.path=FWe;zi.setDashoffset=NWe;zi.stagger=ZWe;zi.timeline=KWe;zi.easing=T7;zi.penner=rce;zi.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const YWe=Ar({name:"PanelContainerV",props:{panel:{type:Object,required:!0}},data(){return{skipTransition:!1}},methods:{enter(e,t){this.animateTransition(e,t,[0,1])},beforeLeave(e){e.classList.contains("screen-spinner")||(this.skipTransition=this.panel.isScreenLoaded(this.panel.route.screen),this.$el.querySelectorAll("[focus-item").forEach(t=>t.classList.remove("default-focus-style")))},leave(e,t){this.animateTransition(e,t,[1,0])},animateTransition(e,t,r){if(this.skipTransition)return t();zi({targets:e,opacity:{value:r,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:t})}}}),QWe=["data-cy"];function XWe(e,t,r,i,n,s){const o=ci("focus-container");return pt(),Ct("div",{class:In(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:pm(e.panel.style),"data-cy":e.panel.id},[Tr(" this renders a panel screen which is currently in view "),Tr(" only perform transition on screen components that are not loaded yet; if already loaded, switch right away "),ar(US,{onBeforeLeave:e.beforeLeave,onLeave:e.leave,onEnter:e.enter},{default:dn(()=>[ti((pt(),Vi(LF(e.panel.route.screen),MA(e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[o]])]),_:1},8,["onBeforeLeave","onLeave","onEnter"])],14,QWe)}var eJe=li(YWe,[["render",XWe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-container.vue"]]);const tJe=Ar({name:"PanelStackV",components:{"panel-container":eJe},data(){return{visible:this.get("panel/getVisible"),mobileMode:this.get("panel/mobileView")}},mounted(){new ResizeObserver(t=>{const r=!(this.$root?.$refs["app-size"]).classList.contains("sm");this.mobileMode!==r&&(this.$store.set("panel/mobileView",r),this.$iApi.event.emit(Wt.RAMP_MOBILEVIEW_CHANGE,r)),this.$store.set("panel/stackWidth",t[0].contentRect.width)}).observe(this.$el)},methods:{enter(e,t){this.animateTransition(e,t,[[6,0],[0,1]])},leave(e,t){const[r,i]=[e.children[0].getBoundingClientRect(),e.parentElement.getBoundingClientRect()];e.style.width=`${r.width}px`,e.style.height=`${r.height}px`,e.style.left=`${r.left-i.left}px`,e.style.position="absolute",this.animateTransition(e,t,[[0,-6],[1,0]])},animateTransition(e,t,r){zi({targets:e,duration:300,translateY:{value:r[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:r[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:t})}}});function rJe(e,t,r,i,n,s){const o=Lr("panel-container");return pt(),Vi(HF,{onEnter:e.enter,onLeave:e.leave,name:"panel-container",tag:"div"},{default:dn(()=>[Tr(" TODO: pass a corresponding fixture instance to the panel component as it can be useful "),(pt(!0),Ct(Xr,null,u0(e.visible(e.$iApi.screenSize),a=>(pt(),Vi(o,{key:`${a.id}`,panel:a},null,8,["panel"]))),128))]),_:1},8,["onEnter","onLeave"])}var iJe=li(tJe,[["render",rJe],["__scopeId","data-v-7118f2dc"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-stack.vue"]]),Bl="top",Yu="bottom",Qu="right",zl="left",WA="auto",JS=[Bl,Yu,Qu,zl],Jv="start",N7="end",nJe="clippingParents",yce="viewport",Rw="popper",sJe="reference",iJ=JS.reduce(function(e,t){return e.concat([t+"-"+Jv,t+"-"+N7])},[]),gce=[].concat(JS,[WA]).reduce(function(e,t){return e.concat([t,t+"-"+Jv,t+"-"+N7])},[]),oJe="beforeRead",aJe="read",lJe="afterRead",uJe="beforeMain",cJe="main",hJe="afterMain",pJe="beforeWrite",dJe="write",fJe="afterWrite",CL=[oJe,aJe,lJe,uJe,cJe,hJe,pJe,dJe,fJe];function fh(e){return e?(e.nodeName||"").toLowerCase():null}function nc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ux(e){var t=nc(e).Element;return e instanceof t||e instanceof Element}function Xo(e){var t=nc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function vce(e){if(typeof ShadowRoot>"u")return!1;var t=nc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function mJe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!Xo(s)||!fh(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function yJe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Xo(n)||!fh(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var gJe={name:"applyStyles",enabled:!0,phase:"write",fn:mJe,effect:yJe,requires:["computeStyles"]};function Bu(e){return e.split("-")[0]}var vd=Math.round;function Zv(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,n=1;return Xo(e)&&t&&(i=r.width/e.offsetWidth||1,n=r.height/e.offsetHeight||1),{width:vd(r.width/i),height:vd(r.height/n),top:vd(r.top/n),right:vd(r.right/i),bottom:vd(r.bottom/n),left:vd(r.left/i),x:vd(r.left/i),y:vd(r.top/n)}}function D7(e){var t=Zv(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function bce(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&vce(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Xu(e){return nc(e).getComputedStyle(e)}function vJe(e){return["table","td","th"].indexOf(fh(e))>=0}function mm(e){return((Ux(e)?e.ownerDocument:e.document)||window.document).documentElement}function JA(e){return fh(e)==="html"?e:e.assignedSlot||e.parentNode||(vce(e)?e.host:null)||mm(e)}function nJ(e){return!Xo(e)||Xu(e).position==="fixed"?null:e.offsetParent}function bJe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Xo(e)){var i=Xu(e);if(i.position==="fixed")return null}for(var n=JA(e);Xo(n)&&["html","body"].indexOf(fh(n))<0;){var s=Xu(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function ZS(e){for(var t=nc(e),r=nJ(e);r&&vJe(r)&&Xu(r).position==="static";)r=nJ(r);return r&&(fh(r)==="html"||fh(r)==="body"&&Xu(r).position==="static")?t:r||bJe(e)||t}function F7(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var Pf=Math.max,Vx=Math.min,GE=Math.round;function P5(e,t,r){return Pf(e,Vx(t,r))}function wce(){return{top:0,right:0,bottom:0,left:0}}function _ce(e){return Object.assign({},wce(),e)}function xce(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var wJe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,_ce(typeof t!="number"?t:xce(t,JS))};function _Je(e){var t,r=e.state,i=e.name,n=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Bu(r.placement),l=F7(a),u=[zl,Qu].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var p=wJe(n.padding,r),d=D7(s),m=l==="y"?Bl:zl,g=l==="y"?Yu:Qu,b=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],v=o[l]-r.rects.reference[l],_=ZS(s),E=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,I=b/2-v/2,x=p[m],T=E-d[c]-p[g],M=E/2-d[c]/2+I,k=P5(x,M,T),D=l;r.modifiersData[i]=(t={},t[D]=k,t.centerOffset=k-M,t)}}function xJe(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;if(n!=null&&!(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n))){if(Xo(n)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),!bce(t.elements.popper,n)){console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "));return}t.elements.arrow=n}}var SJe={name:"arrow",enabled:!0,phase:"main",fn:_Je,effect:xJe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},EJe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MJe(e){var t=e.x,r=e.y,i=window,n=i.devicePixelRatio||1;return{x:GE(GE(t*n)/n)||0,y:GE(GE(r*n)/n)||0}}function sJ(e){var t,r=e.popper,i=e.popperRect,n=e.placement,s=e.offsets,o=e.position,a=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,c=u===!0?MJe(s):typeof u=="function"?u(s):s,p=c.x,d=p===void 0?0:p,m=c.y,g=m===void 0?0:m,b=s.hasOwnProperty("x"),v=s.hasOwnProperty("y"),_=zl,E=Bl,I=window;if(l){var x=ZS(r),T="clientHeight",M="clientWidth";x===nc(r)&&(x=mm(r),Xu(x).position!=="static"&&(T="scrollHeight",M="scrollWidth")),x=x,n===Bl&&(E=Yu,g-=x[T]-i.height,g*=a?1:-1),n===zl&&(_=Qu,d-=x[M]-i.width,d*=a?1:-1)}var k=Object.assign({position:o},l&&EJe);if(a){var D;return Object.assign({},k,(D={},D[E]=v?"0":"",D[_]=b?"0":"",D.transform=(I.devicePixelRatio||1)<2?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",D))}return Object.assign({},k,(t={},t[E]=v?g+"px":"",t[_]=b?d+"px":"",t.transform="",t))}function IJe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a;{var u=Xu(t.elements.popper).transitionProperty||"";o&&["transform","top","right","bottom","left"].some(function(p){return u.indexOf(p)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var c={placement:Bu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,sJ(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,sJ(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var TJe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:IJe,data:{}},qE={passive:!0};function AJe(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=nc(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",r.update,qE)}),a&&l.addEventListener("resize",r.update,qE),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",r.update,qE)}),a&&l.removeEventListener("resize",r.update,qE)}}var $Je={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:AJe,data:{}},CJe={left:"right",right:"left",bottom:"top",top:"bottom"};function L5(e){return e.replace(/left|right|bottom|top/g,function(t){return CJe[t]})}var kJe={start:"end",end:"start"};function oJ(e){return e.replace(/start|end/g,function(t){return kJe[t]})}function j7(e){var t=nc(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function U7(e){return Zv(mm(e)).left+j7(e).scrollLeft}function OJe(e){var t=nc(e),r=mm(e),i=t.visualViewport,n=r.clientWidth,s=r.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+U7(e),y:a}}function RJe(e){var t,r=mm(e),i=j7(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=Pf(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Pf(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+U7(e),l=-i.scrollTop;return Xu(n||r).direction==="rtl"&&(a+=Pf(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function V7(e){var t=Xu(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function Sce(e){return["html","body","#document"].indexOf(fh(e))>=0?e.ownerDocument.body:Xo(e)&&V7(e)?e:Sce(JA(e))}function R2(e,t){var r;t===void 0&&(t=[]);var i=Sce(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),s=nc(i),o=n?[s].concat(s.visualViewport||[],V7(i)?i:[]):i,a=t.concat(o);return n?a:a.concat(R2(JA(o)))}function kL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function PJe(e){var t=Zv(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function aJ(e,t){return t===yce?kL(OJe(e)):Xo(t)?PJe(t):kL(RJe(mm(e)))}function LJe(e){var t=R2(JA(e)),r=["absolute","fixed"].indexOf(Xu(e).position)>=0,i=r&&Xo(e)?ZS(e):e;return Ux(i)?t.filter(function(n){return Ux(n)&&bce(n,i)&&fh(n)!=="body"}):[]}function NJe(e,t,r){var i=t==="clippingParents"?LJe(e):[].concat(t),n=[].concat(i,[r]),s=n[0],o=n.reduce(function(a,l){var u=aJ(e,l);return a.top=Pf(u.top,a.top),a.right=Vx(u.right,a.right),a.bottom=Vx(u.bottom,a.bottom),a.left=Pf(u.left,a.left),a},aJ(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Bx(e){return e.split("-")[1]}function Ece(e){var t=e.reference,r=e.element,i=e.placement,n=i?Bu(i):null,s=i?Bx(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(n){case Bl:l={x:o,y:t.y-r.height};break;case Yu:l={x:o,y:t.y+t.height};break;case Qu:l={x:t.x+t.width,y:a};break;case zl:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?F7(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Jv:l[u]=l[u]-(t[c]/2-r[c]/2);break;case N7:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function zx(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,s=r.boundary,o=s===void 0?nJe:s,a=r.rootBoundary,l=a===void 0?yce:a,u=r.elementContext,c=u===void 0?Rw:u,p=r.altBoundary,d=p===void 0?!1:p,m=r.padding,g=m===void 0?0:m,b=_ce(typeof g!="number"?g:xce(g,JS)),v=c===Rw?sJe:Rw,_=e.elements.reference,E=e.rects.popper,I=e.elements[d?v:c],x=NJe(Ux(I)?I:I.contextElement||mm(e.elements.popper),o,l),T=Zv(_),M=Ece({reference:T,element:E,strategy:"absolute",placement:n}),k=kL(Object.assign({},E,M)),D=c===Rw?k:T,B={top:x.top-D.top+b.top,bottom:D.bottom-x.bottom+b.bottom,left:x.left-D.left+b.left,right:D.right-x.right+b.right},G=e.modifiersData.offset;if(c===Rw&&G){var W=G[n];Object.keys(B).forEach(function(K){var ne=[Qu,Yu].indexOf(K)>=0?1:-1,ye=[Bl,Yu].indexOf(K)>=0?"y":"x";B[K]+=W[ye]*ne})}return B}function DJe(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?gce:l,c=Bx(i),p=c?a?iJ:iJ.filter(function(g){return Bx(g)===c}):JS,d=p.filter(function(g){return u.indexOf(g)>=0});d.length===0&&(d=p,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var m=d.reduce(function(g,b){return g[b]=zx(e,{placement:b,boundary:n,rootBoundary:s,padding:o})[Bu(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function FJe(e){if(Bu(e)===WA)return[];var t=L5(e);return[oJ(e),t,oJ(t)]}function jJe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,p=r.rootBoundary,d=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,v=t.options.placement,_=Bu(v),E=_===v,I=l||(E||!g?[L5(v)]:FJe(v)),x=[v].concat(I).reduce(function(ve,Ee){return ve.concat(Bu(Ee)===WA?DJe(t,{placement:Ee,boundary:c,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ee)},[]),T=t.rects.reference,M=t.rects.popper,k=new Map,D=!0,B=x[0],G=0;G<x.length;G++){var W=x[G],K=Bu(W),ne=Bx(W)===Jv,ye=[Bl,Yu].indexOf(K)>=0,y=ye?"width":"height",C=zx(t,{placement:W,boundary:c,rootBoundary:p,altBoundary:d,padding:u}),L=ye?ne?Qu:zl:ne?Yu:Bl;T[y]>M[y]&&(L=L5(L));var F=L5(L),ae=[];if(s&&ae.push(C[K]<=0),a&&ae.push(C[L]<=0,C[F]<=0),ae.every(function(ve){return ve})){B=W,D=!1;break}k.set(W,ae)}if(D)for(var q=g?3:1,fe=function(Ee){var Ie=x.find(function(ke){var Te=k.get(ke);if(Te)return Te.slice(0,Ee).every(function(Se){return Se})});if(Ie)return B=Ie,"break"},te=q;te>0;te--){var ge=fe(te);if(ge==="break")break}t.placement!==B&&(t.modifiersData[i]._skip=!0,t.placement=B,t.reset=!0)}}var UJe={name:"flip",enabled:!0,phase:"main",fn:jJe,requiresIfExists:["offset"],data:{_skip:!1}};function lJ(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function uJ(e){return[Bl,Qu,Yu,zl].some(function(t){return e[t]>=0})}function VJe(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=zx(t,{elementContext:"reference"}),a=zx(t,{altBoundary:!0}),l=lJ(o,i),u=lJ(a,n,s),c=uJ(l),p=uJ(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}var BJe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:VJe};function zJe(e,t,r){var i=Bu(e),n=[zl,Bl].indexOf(i)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[zl,Qu].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function GJe(e){var t=e.state,r=e.options,i=e.name,n=r.offset,s=n===void 0?[0,0]:n,o=gce.reduce(function(c,p){return c[p]=zJe(p,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}var qJe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:GJe};function HJe(e){var t=e.state,r=e.name;t.modifiersData[r]=Ece({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var WJe={name:"popperOffsets",enabled:!0,phase:"read",fn:HJe,data:{}};function JJe(e){return e==="x"?"y":"x"}function ZJe(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,p=r.padding,d=r.tether,m=d===void 0?!0:d,g=r.tetherOffset,b=g===void 0?0:g,v=zx(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),_=Bu(t.placement),E=Bx(t.placement),I=!E,x=F7(_),T=JJe(x),M=t.modifiersData.popperOffsets,k=t.rects.reference,D=t.rects.popper,B=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,G={x:0,y:0};if(!!M){if(s||a){var W=x==="y"?Bl:zl,K=x==="y"?Yu:Qu,ne=x==="y"?"height":"width",ye=M[x],y=M[x]+v[W],C=M[x]-v[K],L=m?-D[ne]/2:0,F=E===Jv?k[ne]:D[ne],ae=E===Jv?-D[ne]:-k[ne],q=t.elements.arrow,fe=m&&q?D7(q):{width:0,height:0},te=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:wce(),ge=te[W],ve=te[K],Ee=P5(0,k[ne],fe[ne]),Ie=I?k[ne]/2-L-Ee-ge-B:F-Ee-ge-B,ke=I?-k[ne]/2+L+Ee+ve+B:ae+Ee+ve+B,Te=t.elements.arrow&&ZS(t.elements.arrow),Se=Te?x==="y"?Te.clientTop||0:Te.clientLeft||0:0,Ae=t.modifiersData.offset?t.modifiersData.offset[t.placement][x]:0,X=M[x]+Ie-Ae-Se,Z=M[x]+ke-Ae;if(s){var le=P5(m?Vx(y,X):y,ye,m?Pf(C,Z):C);M[x]=le,G[x]=le-ye}if(a){var z=x==="x"?Bl:zl,ee=x==="x"?Yu:Qu,we=M[T],se=we+v[z],U=we-v[ee],oe=P5(m?Vx(se,X):se,we,m?Pf(U,Z):U);M[T]=oe,G[T]=oe-we}}t.modifiersData[i]=G}}var KJe={name:"preventOverflow",enabled:!0,phase:"main",fn:ZJe,requiresIfExists:["offset"]};function YJe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function QJe(e){return e===nc(e)||!Xo(e)?j7(e):YJe(e)}function XJe(e){var t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return r!==1||i!==1}function eZe(e,t,r){r===void 0&&(r=!1);var i=Xo(t),n=Xo(t)&&XJe(t),s=mm(t),o=Zv(e,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((fh(t)!=="body"||V7(s))&&(a=QJe(t)),Xo(t)?(l=Zv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=U7(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function tZe(e){var t=new Map,r=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&n(l)}}),i.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),i}function rZe(e){var t=tZe(e);return CL.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function iZe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function bd(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return[].concat(r).reduce(function(n,s){return n.replace(/%s/,s)},e)}var Cm='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',nZe='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',sZe=["name","enabled","phase","fn","effect","requires","options"];function oZe(e){e.forEach(function(t){Object.keys(t).forEach(function(r){switch(r){case"name":typeof t.name!="string"&&console.error(bd(Cm,String(t.name),'"name"','"string"','"'+String(t.name)+'"'));break;case"enabled":typeof t.enabled!="boolean"&&console.error(bd(Cm,t.name,'"enabled"','"boolean"','"'+String(t.enabled)+'"'));case"phase":CL.indexOf(t.phase)<0&&console.error(bd(Cm,t.name,'"phase"',"either "+CL.join(", "),'"'+String(t.phase)+'"'));break;case"fn":typeof t.fn!="function"&&console.error(bd(Cm,t.name,'"fn"','"function"','"'+String(t.fn)+'"'));break;case"effect":typeof t.effect!="function"&&console.error(bd(Cm,t.name,'"effect"','"function"','"'+String(t.fn)+'"'));break;case"requires":Array.isArray(t.requires)||console.error(bd(Cm,t.name,'"requires"','"array"','"'+String(t.requires)+'"'));break;case"requiresIfExists":Array.isArray(t.requiresIfExists)||console.error(bd(Cm,t.name,'"requiresIfExists"','"array"','"'+String(t.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+t.name+'" modifier, valid properties are '+sZe.map(function(i){return'"'+i+'"'}).join(", ")+'; but "'+r+'" was provided.')}t.requires&&t.requires.forEach(function(i){e.find(function(n){return n.name===i})==null&&console.error(bd(nZe,String(t.name),i,i))})})})}function aZe(e,t){var r=new Set;return e.filter(function(i){var n=t(i);if(!r.has(n))return r.add(n),!0})}function lZe(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var cJ="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",uZe="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",hJ={placement:"bottom",modifiers:[],strategy:"absolute"};function pJ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function cZe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?hJ:n;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},hJ,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],d=!1,m={state:c,setOptions:function(_){b(),c.options=Object.assign({},s,c.options,_),c.scrollParents={reference:Ux(a)?R2(a):a.contextElement?R2(a.contextElement):[],popper:R2(l)};var E=rZe(lZe([].concat(i,c.options.modifiers)));c.orderedModifiers=E.filter(function(G){return G.enabled});{var I=aZe([].concat(E,c.options.modifiers),function(G){var W=G.name;return W});if(oZe(I),Bu(c.options.placement)===WA){var x=c.orderedModifiers.find(function(G){var W=G.name;return W==="flip"});x||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var T=Xu(l),M=T.marginTop,k=T.marginRight,D=T.marginBottom,B=T.marginLeft;[M,k,D,B].some(function(G){return parseFloat(G)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return g(),m.update()},forceUpdate:function(){if(!d){var _=c.elements,E=_.reference,I=_.popper;if(!pJ(E,I)){console.error(cJ);return}c.rects={reference:eZe(E,ZS(I),c.options.strategy==="fixed"),popper:D7(I)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(W){return c.modifiersData[W.name]=Object.assign({},W.data)});for(var x=0,T=0;T<c.orderedModifiers.length;T++){if(x+=1,x>100){console.error(uZe);break}if(c.reset===!0){c.reset=!1,T=-1;continue}var M=c.orderedModifiers[T],k=M.fn,D=M.options,B=D===void 0?{}:D,G=M.name;typeof k=="function"&&(c=k({state:c,options:B,name:G,instance:m})||c)}}},update:iZe(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){b(),d=!0}};if(!pJ(a,l))return console.error(cJ),m;m.setOptions(u).then(function(v){!d&&u.onFirstUpdate&&u.onFirstUpdate(v)});function g(){c.orderedModifiers.forEach(function(v){var _=v.name,E=v.options,I=E===void 0?{}:E,x=v.effect;if(typeof x=="function"){var T=x({state:c,name:_,instance:m,options:I}),M=function(){};p.push(T||M)}})}function b(){p.forEach(function(v){return v()}),p=[]}return m}}var hZe=[$Je,WJe,TJe,gJe,qJe,UJe,KJe,SJe,BJe],pZe=cZe({defaultModifiers:hZe});const dZe=Ar({name:"DropdownMenuV",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default:{}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0}},data(){return{open:!1,popper:null,watchers:[]}},created(){this.watchers.push(this.$watch("open",()=>{this.popper.update()}))},mounted(){window.addEventListener("click",e=>{this.$el.contains(e.target)||(this.open=!1)},{capture:!0}),window.addEventListener("blur",()=>{this.open=!1}),window.addEventListener("focusin",e=>{this.$el.contains(e.target)||(this.open=!1)}),this.$nextTick(()=>{this.$refs["dropdown-trigger"]&&this.$refs.dropdown&&(this.popper=pZe(this.$refs["dropdown-trigger"],this.$refs.dropdown,{placement:this.position||"bottom",modifiers:[{name:"offset",options:{offset:[0,5]}}],...this.popperOptions}))})},beforeUnmount(){this.watchers.forEach(e=>e()),window.removeEventListener("click",e=>{this.$el.contains(e.target)||(this.open=!1)},{capture:!0}),window.removeEventListener("blur",()=>{this.open=!1}),window.removeEventListener("focusin",e=>{this.$el.contains(e.target)||(this.open=!1)}),this.open=!1}}),fZe=["content"];function mZe(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",null,[ti((pt(),Ct("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:t[0]||(t[0]=a=>e.open=!e.open),content:e.tooltip,ref:"dropdown-trigger"},[Pu(e.$slots,"header")],8,fZe)),[[o,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent"}]]),ti(ut("div",{onClick:t[1]||(t[1]=a=>e.popper.update()),class:In(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref:"dropdown"},[Pu(e.$slots,"default",{close:()=>e.open=!e.open})],2),[[kA,e.open]])])}var ZA=li(dZe,[["render",mZe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/controls/dropdown-menu.vue"]]);const yZe=Ar({name:"NotificationsScreenV",props:{panel:{type:Object,required:!0}},components:{"notification-list":xA(()=>Be(()=>Promise.resolve().then(function(){return GZe}),void 0))},data(){return{number:this.get("notification/notificationNumber"),clearAll:this.call("notification/clearAll")}}}),gZe={class:"h-full flex flex-col"},vZe={class:"w-full flex mb-6"},bZe=["content"],wZe=ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[ut("path",{d:"M0 0h24v24H0z",fill:"none"}),ut("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1);function _Ze(e,t,r,i,n,s){const o=Lr("notification-list"),a=Lr("panel-screen"),l=ci("tippy");return pt(),Vi(a,{panel:e.panel},{header:dn(()=>[Sp(Ci(e.$t("notifications.title")),1)]),content:dn(()=>[ut("div",gZe,[ut("div",vZe,[ti((pt(),Ct("button",{type:"button",onClick:t[0]||(t[0]=(...u)=>e.clearAll&&e.clearAll(...u)),class:In(["p-4 ml-auto",[e.number?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:e.$t("notifications.controls.clearAll")},[Tr(" https://fonts.google.com/icons?selected=Material%20Icons%3Aclear_all "),wZe],10,bZe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),ar(o,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}var xZe=li(yZe,[["render",_Ze],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/screen.vue"]]),Lf=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(Lf||{});class SZe extends Bn{constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":vs(xZe)},alertName:"notifications.title"}})}show(t,r){this.$vApp.$store.dispatch("notification/showNotification",{type:t,message:r})}addGroup(t,r,i){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const n=new Mce(this.$iApi,t,r,i);return this.$vApp.$store.dispatch("notification/registerGroup",n),n}getGroup(t){return this.$vApp.$store.get(`notification/groups@${t}`)}}class Mce extends Bn{id;message;type;messageList=[];constructor(t,r,i,n){super(t),this.id=r,this.type=i,this.message=n}show(t){this.$vApp.$store.dispatch("notification/addToGroup",{id:this.id,message:t})}}const EZe=Ar({name:"NotificationListV",props:{notification:{type:Object,required:!0}},data(){return{removeNotification:this.call("notification/removeNotification"),open:!1,icons:{[Lf.WARNING]:"\u26A0",[Lf.INFO]:"\u2611",[Lf.ERROR]:"\u274C"}}},methods:{tooltipShow(){if(!this.notification.messageList)return!1}}}),MZe=["content"],IZe={class:"flex items-center text-left"},TZe=ut("span",{class:"flex-grow"},null,-1),AZe=ut("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[ut("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1),$Ze=[AZe],CZe=["content"],kZe=ut("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[ut("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),OZe=[kZe],RZe={key:0,class:"text-left"};function PZe(e,t,r,i,n,s){const o=ci("tippy");return ti((pt(),Ct("li",{class:In(["flex-col default-focus-style p-4",e.notification.messageList?"cursor-pointer":""]),content:e.$t(e.open?"notifications.controls.collapse":"notifications.controls.expand"),onClick:t[1]||(t[1]=a=>e.open=!e.open)},[ut("div",IZe,[ut("span",null,Ci(e.icons[e.notification.type])+" "+Ci(e.notification.message),1),TZe,e.notification.messageList?(pt(),Ct("div",{key:0,class:In(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":e.open}])},$Ze,2)):Tr("v-if",!0),ti((pt(),Ct("button",{type:"button",onClick:t[0]||(t[0]=VS(a=>e.removeNotification(e.notification),["stop"])),class:"mx-4 p-4",content:e.$t("notifications.controls.dismiss")},OZe,8,CZe)),[[o,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&e.open?(pt(),Ct("div",RZe,[(pt(!0),Ct(Xr,null,u0(e.notification.messageList,(a,l)=>(pt(),Ct("p",{key:e.notification.id+a+l},Ci(a),1))),128))])):Tr("v-if",!0)],10,MZe)),[[o,{onShow:e.tooltipShow,theme:"ramp4",animation:"scale"}]])}var LZe=li(EZe,[["render",PZe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/notification-item.vue"]]);const NZe=Ar({name:"NotificationListV",components:{"notification-item":LZe},data(){return{notificationStack:this.get("notification/notificationStack")}}}),DZe={key:0},FZe={key:0,class:"w-full border-b border-black"},jZe={class:"flex flex-col items-center h-full"},UZe=ut("span",{class:"flex-grow"},null,-1),VZe=ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[ut("path",{d:"M0 0h24v24H0z",fill:"none"}),ut("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1),BZe=ut("span",{style:{"flex-grow":"6"}},null,-1);function zZe(e,t,r,i,n,s){const o=Lr("notification-item"),a=ci("focus-item"),l=ci("focus-list");return pt(),Ct(Xr,null,[Tr(" Yes Notifications "),ut("div",null,[e.notificationStack.length>0?ti((pt(),Ct("ul",DZe,[(pt(!0),Ct(Xr,null,u0(e.notificationStack,(u,c)=>(pt(),Ct(Xr,{key:u.message+c},[c>0?(pt(),Ct("div",FZe)):Tr("v-if",!0),ti(ar(o,{class:In([u.type]),notification:u},null,8,["class","notification"]),[[a]])],64))),128))])),[[l]]):(pt(),Ct(Xr,{key:1},[Tr(" No Notifications "),ut("div",jZe,[UZe,VZe,ut("span",null,Ci(e.$t("notifications.empty")),1),BZe])],2112))])],2112)}var Ice=li(NZe,[["render",zZe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/notification-list.vue"]]),GZe=Object.freeze(Object.defineProperty({__proto__:null,default:Ice},Symbol.toStringTag,{value:"Module"}));const qZe=Ar({name:"NotificationsCaptionButtonV",components:{"dropdown-menu":ZA,"notification-list":Ice},data(){return{number:this.get("notification/notificationNumber"),clearAll:this.call("notification/clearAll")}}}),Tce=e=>(qp("data-v-4eba693e"),e=e(),Hp(),e),HZe={class:"flex items-center hover:text-white"},WZe=["aria-label"],JZe=Tce(()=>ut("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)),ZZe=[JZe],KZe={key:0,class:"number rounded-full w-18 text-white"},YZe={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},QZe={class:"pb-8 border-b border-gray-600"},XZe={class:"absolute flex right-3 top-3"},eKe=["content"],tKe=Tce(()=>ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[ut("path",{d:"M0 0h24v24H0z",fill:"none"}),ut("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1));function rKe(e,t,r,i,n,s){const o=Lr("close"),a=Lr("notification-list"),l=Lr("dropdown-menu"),u=ci("tippy");return pt(),Vi(l,{position:"top-start",tooltip:e.$t("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:dn(()=>[ut("div",HZe,[Tr(" https://fonts.google.com/icons?selected=Material%20Icons%3Anotifications "),(pt(),Ct("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":e.$t("notifications.open")},ZZe,8,WZe)),e.number&&e.number>0?(pt(),Ct("span",KZe,Ci(e.number),1)):Tr("v-if",!0)])]),default:dn(c=>[ut("div",YZe,[ut("div",null,[ut("h4",QZe,Ci(e.$t("notifications.title")),1),ut("div",XZe,[ti((pt(),Ct("button",{type:"button",onClick:t[0]||(t[0]=(...p)=>e.clearAll&&e.clearAll(...p)),class:In(["p-4 mr-6",[e.number?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:e.$t("notifications.controls.clearAll")},[Tr(" https://fonts.google.com/icons?selected=Material%20Icons%3Aclear_all "),tKe],10,eKe)),[[u,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),ar(o,{onClick:c.close},null,8,["onClick"])])]),ar(a,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}var iKe=li(qZe,[["render",rKe],["__scopeId","data-v-4eba693e"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/caption-button.vue"]]);const nKe=Ar({name:"AboutRampDropdownV",props:{position:{type:String,default:"top-start"}},components:{"dropdown-menu":ZA},computed:{versionString(){return`${Nw.major}.${Nw.minor}.${Nw.patch}`},versionHash(){return Nw.hash.slice(0,9)},buildDate(){let e=new Date(Nw.timestamp);if(isNaN(e))return"dev mode, no date";{const t=r=>r<10?"0"+r.toString():r.toString();return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${t(e.getMinutes())}:${t(e.getSeconds())}`}}}}),Ace=e=>(qp("data-v-3779501c"),e=e(),Hp(),e),sKe={class:"flex hover:text-white"},oKe=["aria-label"],aKe=Ace(()=>ut("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)),lKe=[aKe],uKe={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},cKe={class:"pb-8 border-b border-gray-600 mb-10"},hKe={class:"absolute right-5 top-5"},pKe={class:"select-text"},dKe={class:"font-bold cursor-text"},fKe={class:"text-sm cursor-text"},mKe={class:"text-sm cursor-text"},yKe=Ace(()=>ut("div",{class:"mt-5"},[ut("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[ut("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),Sp(" ramp4-pcar4 ")])],-1));function gKe(e,t,r,i,n,s){const o=Lr("close"),a=Lr("dropdown-menu"),l=ci("focus-item");return ti((pt(),Vi(a,{class:"pointer-events-auto sm:flex",position:e.position,tooltip:e.$t("ramp.about"),tooltipPlacement:e.position},{header:dn(()=>[ut("div",sKe,[(pt(),Ct("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":e.$t("ramp.about.open")},lKe,8,oKe))])]),default:dn(u=>[ut("div",uKe,[ut("div",null,[ut("h4",cKe,Ci(e.$t("ramp.about")),1),ut("div",hKe,[ar(o,{onClick:u.close},null,8,["onClick"])]),ut("div",pKe,[ut("div",null,[ut("span",dKe,Ci(e.versionString),1),ut("span",fKe," ["+Ci(e.versionHash)+"] ",1)]),ut("div",null,[ut("span",mKe,Ci(e.buildDate),1)]),yKe])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[l]])}var vKe=li(nKe,[["render",gKe],["__scopeId","data-v-3779501c"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/about-ramp/about-ramp-dropdown.vue"]]);const bKe=Ar({data(){return{scale:this.get(Ps.scale),attribution:this.get(Ps.attribution),coords:this.get(Ps.coords),mapConfig:this.get(Os.getMapConfig),lang:[],watchers:[]}},components:{"notifications-caption-button":iKe,"about-ramp-dropdown":vKe},created(){this.watchers.push(this.$watch("mapConfig",e=>{!e||this.$iApi.geo.map.caption.createCaption(this.mapConfig.caption)}))},beforeUnmount(){this.watchers.forEach(e=>e())},updated(){this.$nextTick(function(){this.$iApi.$vApp.$i18n&&this.lang.length==0&&(this.lang=this.$iApi.$vApp.$i18n.availableLocales)})},methods:{changeLang(e){this.$iApi.$vApp.$i18n.locale!=e&&this.$iApi.setLanguage(e)},onScaleClick(){this.$iApi.$vApp.$store.set(Ps.toggleScale,void 0),this.$iApi.geo.map.caption.updateScale()}}}),wKe=e=>(qp("data-v-0d8b8d65"),e=e(),Hp(),e),_Ke={class:"map-caption absolute bottom-0 flex justify-end pointer-events-auto cursor-default select-none text-gray-400 bg-black-75 left-0 right-0 py-2 sm:py-6"},xKe={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},SKe=["href","aria-label"],EKe=["src","alt"],MKe={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},IKe=wKe(()=>ut("span",{class:"flex-grow w-15"},null,-1)),TKe={class:"flex min-w-fit justify-end"},AKe={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},$Ke=["aria-pressed","aria-label","content"],CKe={class:"relative top-1 text-sm sm:text-base"},kKe={class:"text-gray-400 hover:text-white text-sm sm:text-base pb-5"},OKe=["onClick"],RKe={key:0,class:"sr-only"};function PKe(e,t,r,i,n,s){const o=Lr("about-ramp-dropdown"),a=Lr("notifications-caption-button"),l=Lr("dropdown-menu"),u=ci("truncate"),c=ci("tippy");return pt(),Ct("div",_Ke,[ar(o,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),ar(a,{class:"sm:block display-none"}),e.attribution.logo.disabled?Tr("v-if",!0):(pt(),Ct("span",xKe,[ut("a",{class:"pointer-events-auto cursor-pointer",href:e.attribution.logo.link,target:"_blank","aria-label":e.attribution.logo.altText},[ut("img",{class:"object-contain h-18 sm:h-26",src:e.attribution.logo.value,alt:e.attribution.logo.altText},null,8,EKe)],8,SKe)])),e.attribution.text.disabled?Tr("v-if",!0):ti((pt(),Ct("span",MKe,[Sp(Ci(e.attribution.text.value),1)])),[[u,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),IKe,Tr(" TODO: find out if any ARIA attributes are needed for the map scale "),ut("div",TKe,[e.coords.disabled?Tr("v-if",!0):ti((pt(),Ct("div",AKe,[Sp(Ci(e.coords.formattedString),1)])),[[u,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),e.scale.disabled?Tr("v-if",!0):ti((pt(),Ct("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:t[0]||(t[0]=(...p)=>e.onScaleClick&&e.onScaleClick(...p)),"aria-pressed":e.scale.isImperialScale,"aria-label":e.$t("map.toggleScaleUnits"),content:e.$t("map.toggleScaleUnits")},[ut("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:pm({width:e.scale.width})},null,4),ut("span",CKe,Ci(e.scale.label),1)],8,$Ke)),[[c,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),ti((pt(),Vi(l,{class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",content:e.$t("map.changeLanguage")},{header:dn(()=>[ut("span",kKe,Ci(e.$t("map.language.short")),1)]),default:dn(()=>[(pt(!0),Ct(Xr,null,u0(e.lang,(p,d)=>(pt(),Ct("a",{key:`${p}-${d}`,class:In(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":p===e.$iApi.$vApp.$i18n.locale}]),href:"javascript:;",onClick:m=>e.changeLang(p)},[Sp(Ci(e.$t("map.language."+p))+" ",1),p===e.$iApi.$vApp.$i18n.locale?(pt(),Ct("span",RKe,Ci(e.$t("map.language.curr")),1)):Tr("v-if",!0)],10,OKe))),128))]),_:1},8,["content"])),[[c,{delay:[300,0],placement:"top-end",theme:"ramp4",animation:"scale",touch:["hold",200]}]])])])}var LKe=li(bKe,[["render",PKe],["__scopeId","data-v-0d8b8d65"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/map/map-caption.vue"]]);const NKe=Ar({name:"NotificationsFloatingButtonV",data(){return{number:this.get("notification/notificationNumber")}}}),DKe=e=>(qp("data-v-51e4c864"),e=e(),Hp(),e),FKe=["content"],jKe=DKe(()=>ut("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ut("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),UKe={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"};function VKe(e,t,r,i,n,s){const o=ci("tippy");return ti((pt(),Ct("button",{type:"button",onClick:t[0]||(t[0]=a=>e.$iApi.panel.get("notifications").open()),class:"pointer-events-auto flex items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:e.$t("notifications.title")},[Tr(" https://fonts.google.com/icons?selected=Material%20Icons%3Anotifications "),jKe,e.number&&e.number>0?(pt(),Ct("span",UKe,Ci(e.number),1)):Tr("v-if",!0)],8,FKe)),[[o]])}var BKe=li(NKe,[["render",VKe],["__scopeId","data-v-51e4c864"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/floating-button.vue"]]);const zKe=Ar({name:"KeyboardInstructionsModalV",data(){return{open:!1,instructionSections:["app","lists","map"],handlers:[]}},mounted(){this.handlers.push(this.$iApi.event.on("openKeyboardInstructions",()=>{this.open=!0,this.$nextTick(()=>{this.$refs.firstEl?.focus()})}))},beforeUnmount(){this.handlers.forEach(e=>this.$iApi.event.off(e))},methods:{onKeydown(e){e.key==="Tab"?e.shiftKey&&e.target===this.$refs.firstEl?(e.preventDefault(),this.$refs.lastEl.focus()):!e.shiftKey&&e.target==this.$refs.lastEl&&(e.preventDefault(),this.$refs.firstEl.focus()):e.key==="Escape"&&(e.preventDefault(),this.open=!1)}}}),GKe={class:"flex items-center mb-20"},qKe={class:"text-xl"};function HKe(e,t,r,i,n,s){const o=Lr("close");return e.open?(pt(),Ct("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:t[3]||(t[3]=a=>e.open=!1),onKeydown:t[4]||(t[4]=(...a)=>e.onKeydown&&e.onKeydown(...a))},[ut("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:t[2]||(t[2]=VS(()=>{},["stop","prevent"])),tabindex:"0",ref:"firstEl"},[ut("div",GKe,[ut("h2",qKe,Ci(e.$t("keyboardInstructions.title")),1),ar(o,{class:"ml-auto",onClick:t[0]||(t[0]=a=>e.open=!1)})]),(pt(!0),Ct(Xr,null,u0(e.instructionSections,a=>(pt(),Ct("p",{class:"whitespace-pre-line pb-10",key:a},Ci(e.$t(`keyboardInstructions.${a}`)),1))),128)),ut("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:t[1]||(t[1]=a=>e.open=!1),ref:"lastEl"},Ci(e.$t("keyboardInstructions.OK")),513)],512)],32)):Tr("v-if",!0)}var WKe=li(zKe,[["render",HKe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/keyboard-instructions.vue"]]);const JKe=Ar({name:"Shell",components:{"esri-map":xWe,"panel-stack":iJe,"map-caption":LKe,"notification-floating-button":BKe,"keyboard-instructions-modal":WKe},data(){return{appbarFixture:this.get("fixture/items@appbar"),start:!1}},created(){this.$iApi.startRequired?this.$iApi.event.once(Wt.MAP_START,()=>{this.start=!0}):(this.$iApi.event.emit(Wt.MAP_START),this.start=!0)},methods:{openKeyboardInstructions(){this.$iApi.event.emit("openKeyboardInstructions")}}}),$ce=e=>(qp("data-v-184a6fda"),e=e(),Hp(),e),ZKe={class:"h-full relative"},KKe={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},YKe=$ce(()=>ut("div",{class:"sr-only screen-reader-alert"},null,-1)),QKe={class:"absolute top-8 w-full flex justify-center"},XKe={key:1,class:"w-full h-full"},eYe=$ce(()=>ut("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)),tYe=[eYe];function rYe(e,t,r,i,n,s){const o=Lr("keyboard-instructions-modal"),a=Lr("panel-stack"),l=Lr("notification-floating-button"),u=Lr("map-caption"),c=Lr("esri-map");return pt(),Ct("div",ZKe,[Tr(" TODO: should inner shell be a separate component? "),ut("div",KKe,[YKe,ut("div",QKe,[ut("button",{type:"button",class:"bg-white opacity-0 focus:opacity-100 z-50 shadow-md px-10",onClick:t[0]||(t[0]=(...p)=>e.openKeyboardInstructions&&e.openKeyboardInstructions(...p))},Ci(e.$t("keyboardInstructions.open")),1)]),ar(o),ar(a,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),e.appbarFixture?Tr("v-if",!0):(pt(),Vi(l,{key:0})),ar(u,{class:"z-30"})]),e.start?(pt(),Vi(c,{key:0})):(pt(),Ct("div",XKe,tYe))])}var iYe=li(JKe,[["render",rYe],["__scopeId","data-v-184a6fda"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/shell.vue"]]);if("ResizeObserver"in self)var nYe=new ResizeObserver(function(e){var t={xs:200,sm:576,md:768,lg:960};e.forEach(function(r){var i=r.target.dataset.breakpoints?JSON.parse(r.target.dataset.breakpoints):t;Object.keys(i).forEach(function(n){var s=i[n];r.contentRect.width>=s?r.target.classList.add(n):r.target.classList.remove(n)})})});var sYe=nYe;/*!
  * vue-tippy v6.0.0-alpha.57
  * (c) 2022 
  * @license MIT
  */var ea="top",Gl="bottom",ql="right",ta="left",B7="auto",KS=[ea,Gl,ql,ta],Kv="start",Gx="end",oYe="clippingParents",Cce="viewport",Pw="popper",aYe="reference",dJ=KS.reduce(function(e,t){return e.concat([t+"-"+Kv,t+"-"+Gx])},[]),kce=[].concat(KS,[B7]).reduce(function(e,t){return e.concat([t,t+"-"+Kv,t+"-"+Gx])},[]),lYe="beforeRead",uYe="read",cYe="afterRead",hYe="beforeMain",pYe="main",dYe="afterMain",fYe="beforeWrite",mYe="write",yYe="afterWrite",gYe=[lYe,uYe,cYe,hYe,pYe,dYe,fYe,mYe,yYe];function mh(e){return e?(e.nodeName||"").toLowerCase():null}function sc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Yv(e){var t=sc(e).Element;return e instanceof t||e instanceof Element}function Fl(e){var t=sc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Oce(e){if(typeof ShadowRoot>"u")return!1;var t=sc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function vYe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!Fl(s)||!mh(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function bYe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Fl(n)||!mh(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var Rce={name:"applyStyles",enabled:!0,phase:"write",fn:vYe,effect:bYe,requires:["computeStyles"]};function sh(e){return e.split("-")[0]}var vg=Math.max,LT=Math.min,Qv=Math.round;function Xv(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,n=1;if(Fl(e)&&t){var s=e.offsetHeight,o=e.offsetWidth;o>0&&(i=Qv(r.width)/o||1),s>0&&(n=Qv(r.height)/s||1)}return{width:r.width/i,height:r.height/n,top:r.top/n,right:r.right/i,bottom:r.bottom/n,left:r.left/i,x:r.left/i,y:r.top/n}}function z7(e){var t=Xv(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function Pce(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Oce(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function yh(e){return sc(e).getComputedStyle(e)}function wYe(e){return["table","td","th"].indexOf(mh(e))>=0}function ym(e){return((Yv(e)?e.ownerDocument:e.document)||window.document).documentElement}function KA(e){return mh(e)==="html"?e:e.assignedSlot||e.parentNode||(Oce(e)?e.host:null)||ym(e)}function fJ(e){return!Fl(e)||yh(e).position==="fixed"?null:e.offsetParent}function _Ye(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Fl(e)){var i=yh(e);if(i.position==="fixed")return null}for(var n=KA(e);Fl(n)&&["html","body"].indexOf(mh(n))<0;){var s=yh(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function YS(e){for(var t=sc(e),r=fJ(e);r&&wYe(r)&&yh(r).position==="static";)r=fJ(r);return r&&(mh(r)==="html"||mh(r)==="body"&&yh(r).position==="static")?t:r||_Ye(e)||t}function G7(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function P2(e,t,r){return vg(e,LT(t,r))}function xYe(e,t,r){var i=P2(e,t,r);return i>r?r:i}function Lce(){return{top:0,right:0,bottom:0,left:0}}function Nce(e){return Object.assign({},Lce(),e)}function Dce(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var SYe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Nce(typeof t!="number"?t:Dce(t,KS))};function EYe(e){var t,r=e.state,i=e.name,n=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=sh(r.placement),l=G7(a),u=[ta,ql].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var p=SYe(n.padding,r),d=z7(s),m=l==="y"?ea:ta,g=l==="y"?Gl:ql,b=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],v=o[l]-r.rects.reference[l],_=YS(s),E=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,I=b/2-v/2,x=p[m],T=E-d[c]-p[g],M=E/2-d[c]/2+I,k=P2(x,M,T),D=l;r.modifiersData[i]=(t={},t[D]=k,t.centerOffset=k-M,t)}}function MYe(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!Pce(t.elements.popper,n)||(t.elements.arrow=n))}var IYe={name:"arrow",enabled:!0,phase:"main",fn:EYe,effect:MYe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function eb(e){return e.split("-")[1]}var TYe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function AYe(e){var t=e.x,r=e.y,i=window,n=i.devicePixelRatio||1;return{x:Qv(t*n)/n||0,y:Qv(r*n)/n||0}}function mJ(e){var t,r=e.popper,i=e.popperRect,n=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,p=e.isFixed,d=c===!0?AYe(o):typeof c=="function"?c(o):o,m=d.x,g=m===void 0?0:m,b=d.y,v=b===void 0?0:b,_=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),I=ta,x=ea,T=window;if(u){var M=YS(r),k="clientHeight",D="clientWidth";if(M===sc(r)&&(M=ym(r),yh(M).position!=="static"&&a==="absolute"&&(k="scrollHeight",D="scrollWidth")),M=M,n===ea||(n===ta||n===ql)&&s===Gx){x=Gl;var B=p&&T.visualViewport?T.visualViewport.height:M[k];v-=B-i.height,v*=l?1:-1}if(n===ta||(n===ea||n===Gl)&&s===Gx){I=ql;var G=p&&T.visualViewport?T.visualViewport.width:M[D];g-=G-i.width,g*=l?1:-1}}var W=Object.assign({position:a},u&&TYe);if(l){var K;return Object.assign({},W,(K={},K[x]=E?"0":"",K[I]=_?"0":"",K.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+v+"px)":"translate3d("+g+"px, "+v+"px, 0)",K))}return Object.assign({},W,(t={},t[x]=E?v+"px":"",t[I]=_?g+"px":"",t.transform="",t))}function $Ye(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:sh(t.placement),variation:eb(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mJ(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mJ(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var CYe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$Ye,data:{}},HE={passive:!0};function kYe(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=sc(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",r.update,HE)}),a&&l.addEventListener("resize",r.update,HE),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",r.update,HE)}),a&&l.removeEventListener("resize",r.update,HE)}}var OYe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kYe,data:{}},RYe={left:"right",right:"left",bottom:"top",top:"bottom"};function N5(e){return e.replace(/left|right|bottom|top/g,function(t){return RYe[t]})}var PYe={start:"end",end:"start"};function yJ(e){return e.replace(/start|end/g,function(t){return PYe[t]})}function q7(e){var t=sc(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function H7(e){return Xv(ym(e)).left+q7(e).scrollLeft}function LYe(e){var t=sc(e),r=ym(e),i=t.visualViewport,n=r.clientWidth,s=r.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+H7(e),y:a}}function NYe(e){var t,r=ym(e),i=q7(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=vg(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=vg(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+H7(e),l=-i.scrollTop;return yh(n||r).direction==="rtl"&&(a+=vg(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function W7(e){var t=yh(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function Fce(e){return["html","body","#document"].indexOf(mh(e))>=0?e.ownerDocument.body:Fl(e)&&W7(e)?e:Fce(KA(e))}function L2(e,t){var r;t===void 0&&(t=[]);var i=Fce(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),s=sc(i),o=n?[s].concat(s.visualViewport||[],W7(i)?i:[]):i,a=t.concat(o);return n?a:a.concat(L2(KA(o)))}function OL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function DYe(e){var t=Xv(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function gJ(e,t){return t===Cce?OL(LYe(e)):Yv(t)?DYe(t):OL(NYe(ym(e)))}function FYe(e){var t=L2(KA(e)),r=["absolute","fixed"].indexOf(yh(e).position)>=0,i=r&&Fl(e)?YS(e):e;return Yv(i)?t.filter(function(n){return Yv(n)&&Pce(n,i)&&mh(n)!=="body"&&(r?yh(n).position!=="static":!0)}):[]}function jYe(e,t,r){var i=t==="clippingParents"?FYe(e):[].concat(t),n=[].concat(i,[r]),s=n[0],o=n.reduce(function(a,l){var u=gJ(e,l);return a.top=vg(u.top,a.top),a.right=LT(u.right,a.right),a.bottom=LT(u.bottom,a.bottom),a.left=vg(u.left,a.left),a},gJ(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function jce(e){var t=e.reference,r=e.element,i=e.placement,n=i?sh(i):null,s=i?eb(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(n){case ea:l={x:o,y:t.y-r.height};break;case Gl:l={x:o,y:t.y+t.height};break;case ql:l={x:t.x+t.width,y:a};break;case ta:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?G7(n):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Kv:l[u]=l[u]-(t[c]/2-r[c]/2);break;case Gx:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function qx(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,s=r.boundary,o=s===void 0?oYe:s,a=r.rootBoundary,l=a===void 0?Cce:a,u=r.elementContext,c=u===void 0?Pw:u,p=r.altBoundary,d=p===void 0?!1:p,m=r.padding,g=m===void 0?0:m,b=Nce(typeof g!="number"?g:Dce(g,KS)),v=c===Pw?aYe:Pw,_=e.rects.popper,E=e.elements[d?v:c],I=jYe(Yv(E)?E:E.contextElement||ym(e.elements.popper),o,l),x=Xv(e.elements.reference),T=jce({reference:x,element:_,strategy:"absolute",placement:n}),M=OL(Object.assign({},_,T)),k=c===Pw?M:x,D={top:I.top-k.top+b.top,bottom:k.bottom-I.bottom+b.bottom,left:I.left-k.left+b.left,right:k.right-I.right+b.right},B=e.modifiersData.offset;if(c===Pw&&B){var G=B[n];Object.keys(D).forEach(function(W){var K=[ql,Gl].indexOf(W)>=0?1:-1,ne=[ea,Gl].indexOf(W)>=0?"y":"x";D[W]+=G[ne]*K})}return D}function UYe(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?kce:l,c=eb(i),p=c?a?dJ:dJ.filter(function(g){return eb(g)===c}):KS,d=p.filter(function(g){return u.indexOf(g)>=0});d.length===0&&(d=p);var m=d.reduce(function(g,b){return g[b]=qx(e,{placement:b,boundary:n,rootBoundary:s,padding:o})[sh(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function VYe(e){if(sh(e)===B7)return[];var t=N5(e);return[yJ(e),t,yJ(t)]}function BYe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,p=r.rootBoundary,d=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,v=t.options.placement,_=sh(v),E=_===v,I=l||(E||!g?[N5(v)]:VYe(v)),x=[v].concat(I).reduce(function(ve,Ee){return ve.concat(sh(Ee)===B7?UYe(t,{placement:Ee,boundary:c,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ee)},[]),T=t.rects.reference,M=t.rects.popper,k=new Map,D=!0,B=x[0],G=0;G<x.length;G++){var W=x[G],K=sh(W),ne=eb(W)===Kv,ye=[ea,Gl].indexOf(K)>=0,y=ye?"width":"height",C=qx(t,{placement:W,boundary:c,rootBoundary:p,altBoundary:d,padding:u}),L=ye?ne?ql:ta:ne?Gl:ea;T[y]>M[y]&&(L=N5(L));var F=N5(L),ae=[];if(s&&ae.push(C[K]<=0),a&&ae.push(C[L]<=0,C[F]<=0),ae.every(function(ve){return ve})){B=W,D=!1;break}k.set(W,ae)}if(D)for(var q=g?3:1,fe=function(Ee){var Ie=x.find(function(ke){var Te=k.get(ke);if(Te)return Te.slice(0,Ee).every(function(Se){return Se})});if(Ie)return B=Ie,"break"},te=q;te>0;te--){var ge=fe(te);if(ge==="break")break}t.placement!==B&&(t.modifiersData[i]._skip=!0,t.placement=B,t.reset=!0)}}var zYe={name:"flip",enabled:!0,phase:"main",fn:BYe,requiresIfExists:["offset"],data:{_skip:!1}};function vJ(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function bJ(e){return[ea,ql,Gl,ta].some(function(t){return e[t]>=0})}function GYe(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=qx(t,{elementContext:"reference"}),a=qx(t,{altBoundary:!0}),l=vJ(o,i),u=vJ(a,n,s),c=bJ(l),p=bJ(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}var qYe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:GYe};function HYe(e,t,r){var i=sh(e),n=[ta,ea].indexOf(i)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[ta,ql].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function WYe(e){var t=e.state,r=e.options,i=e.name,n=r.offset,s=n===void 0?[0,0]:n,o=kce.reduce(function(c,p){return c[p]=HYe(p,t.rects,s),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}var JYe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:WYe};function ZYe(e){var t=e.state,r=e.name;t.modifiersData[r]=jce({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var KYe={name:"popperOffsets",enabled:!0,phase:"read",fn:ZYe,data:{}};function YYe(e){return e==="x"?"y":"x"}function QYe(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,p=r.padding,d=r.tether,m=d===void 0?!0:d,g=r.tetherOffset,b=g===void 0?0:g,v=qx(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),_=sh(t.placement),E=eb(t.placement),I=!E,x=G7(_),T=YYe(x),M=t.modifiersData.popperOffsets,k=t.rects.reference,D=t.rects.popper,B=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,G=typeof B=="number"?{mainAxis:B,altAxis:B}:Object.assign({mainAxis:0,altAxis:0},B),W=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,K={x:0,y:0};if(!!M){if(s){var ne,ye=x==="y"?ea:ta,y=x==="y"?Gl:ql,C=x==="y"?"height":"width",L=M[x],F=L+v[ye],ae=L-v[y],q=m?-D[C]/2:0,fe=E===Kv?k[C]:D[C],te=E===Kv?-D[C]:-k[C],ge=t.elements.arrow,ve=m&&ge?z7(ge):{width:0,height:0},Ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Lce(),Ie=Ee[ye],ke=Ee[y],Te=P2(0,k[C],ve[C]),Se=I?k[C]/2-q-Te-Ie-G.mainAxis:fe-Te-Ie-G.mainAxis,Ae=I?-k[C]/2+q+Te+ke+G.mainAxis:te+Te+ke+G.mainAxis,X=t.elements.arrow&&YS(t.elements.arrow),Z=X?x==="y"?X.clientTop||0:X.clientLeft||0:0,le=(ne=W?.[x])!=null?ne:0,z=L+Se-le-Z,ee=L+Ae-le,we=P2(m?LT(F,z):F,L,m?vg(ae,ee):ae);M[x]=we,K[x]=we-L}if(a){var se,U=x==="x"?ea:ta,oe=x==="x"?Gl:ql,re=M[T],R=T==="y"?"height":"width",$=re+v[U],A=re-v[oe],V=[ea,ta].indexOf(_)!==-1,H=(se=W?.[T])!=null?se:0,N=V?$:re-k[R]-D[R]-H+G.altAxis,Y=V?re+k[R]+D[R]-H-G.altAxis:A,be=m&&V?xYe(N,re,Y):P2(m?N:$,re,m?Y:A);M[T]=be,K[T]=be-re}t.modifiersData[i]=K}}var XYe={name:"preventOverflow",enabled:!0,phase:"main",fn:QYe,requiresIfExists:["offset"]};function eQe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function tQe(e){return e===sc(e)||!Fl(e)?q7(e):eQe(e)}function rQe(e){var t=e.getBoundingClientRect(),r=Qv(t.width)/e.offsetWidth||1,i=Qv(t.height)/e.offsetHeight||1;return r!==1||i!==1}function iQe(e,t,r){r===void 0&&(r=!1);var i=Fl(t),n=Fl(t)&&rQe(t),s=ym(t),o=Xv(e,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((mh(t)!=="body"||W7(s))&&(a=tQe(t)),Fl(t)?(l=Xv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=H7(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function nQe(e){var t=new Map,r=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&n(l)}}),i.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),i}function sQe(e){var t=nQe(e);return gYe.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function oQe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function aQe(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var wJ={placement:"bottom",modifiers:[],strategy:"absolute"};function _J(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function lQe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?wJ:n;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},wJ,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],d=!1,m={state:c,setOptions:function(_){var E=typeof _=="function"?_(c.options):_;b(),c.options=Object.assign({},s,c.options,E),c.scrollParents={reference:Yv(a)?L2(a):a.contextElement?L2(a.contextElement):[],popper:L2(l)};var I=sQe(aQe([].concat(i,c.options.modifiers)));return c.orderedModifiers=I.filter(function(x){return x.enabled}),g(),m.update()},forceUpdate:function(){if(!d){var _=c.elements,E=_.reference,I=_.popper;if(!!_J(E,I)){c.rects={reference:iQe(E,YS(I),c.options.strategy==="fixed"),popper:z7(I)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(G){return c.modifiersData[G.name]=Object.assign({},G.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var T=c.orderedModifiers[x],M=T.fn,k=T.options,D=k===void 0?{}:k,B=T.name;typeof M=="function"&&(c=M({state:c,options:D,name:B,instance:m})||c)}}}},update:oQe(function(){return new Promise(function(v){m.forceUpdate(),v(c)})}),destroy:function(){b(),d=!0}};if(!_J(a,l))return m;m.setOptions(u).then(function(v){!d&&u.onFirstUpdate&&u.onFirstUpdate(v)});function g(){c.orderedModifiers.forEach(function(v){var _=v.name,E=v.options,I=E===void 0?{}:E,x=v.effect;if(typeof x=="function"){var T=x({state:c,name:_,instance:m,options:I}),M=function(){};p.push(T||M)}})}function b(){p.forEach(function(v){return v()}),p=[]}return m}}var uQe=[OYe,KYe,CYe,Rce,JYe,zYe,XYe,IYe,qYe],cQe=lQe({defaultModifiers:uQe}),hQe="tippy-box",Uce="tippy-content",Vce="tippy-backdrop",Bce="tippy-arrow",zce="tippy-svg-arrow",wy={passive:!0,capture:!0},Gce=function(){return document.body};function Ok(e,t,r){if(Array.isArray(e)){var i=e[t];return i??(Array.isArray(r)?r[t]:r)}return e}function J7(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function qce(e,t){return typeof e=="function"?e.apply(void 0,t):e}function xJ(e,t){if(t===0)return e;var r;return function(i){clearTimeout(r),r=setTimeout(function(){e(i)},t)}}function pQe(e,t){var r=Object.assign({},e);return t.forEach(function(i){delete r[i]}),r}function dQe(e){return e.split(/\s+/).filter(Boolean)}function Ly(e){return[].concat(e)}function SJ(e,t){e.indexOf(t)===-1&&e.push(t)}function fQe(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Hce(e){return e.split("-")[0]}function tb(e){return[].slice.call(e)}function EJ(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function bg(){return document.createElement("div")}function YA(e){return["Element","Fragment"].some(function(t){return J7(e,t)})}function mQe(e){return J7(e,"NodeList")}function Z7(e){return J7(e,"MouseEvent")}function yQe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function gQe(e){return YA(e)?[e]:mQe(e)?tb(e):Array.isArray(e)?e:tb(document.querySelectorAll(e))}function Rk(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function Hx(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Wce(e){var t,r=Ly(e),i=r[0];return i!=null&&(t=i.ownerDocument)!=null&&t.body?i.ownerDocument:document}function vQe(e,t){var r=t.clientX,i=t.clientY;return e.every(function(n){var s=n.popperRect,o=n.popperState,a=n.props,l=a.interactiveBorder,u=Hce(o.placement),c=o.modifiersData.offset;if(!c)return!0;var p=u==="bottom"?c.top.y:0,d=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,g=u==="left"?c.right.x:0,b=s.top-i+p>l,v=i-s.bottom-d>l,_=s.left-r+m>l,E=r-s.right-g>l;return b||v||_||E})}function Pk(e,t,r){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(n){e[i](n,r)})}function MJ(e,t){for(var r=t;r;){var i;if(e.contains(r))return!0;r=r.getRootNode==null||(i=r.getRootNode())==null?void 0:i.host}return!1}var zc={isTouch:!1},IJ=0;function bQe(){zc.isTouch||(zc.isTouch=!0,window.performance&&document.addEventListener("mousemove",Jce))}function Jce(){var e=performance.now();e-IJ<20&&(zc.isTouch=!1,document.removeEventListener("mousemove",Jce)),IJ=e}function wQe(){var e=document.activeElement;if(yQe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function _Qe(){document.addEventListener("touchstart",bQe,wy),window.addEventListener("blur",wQe)}var xQe=typeof window<"u"&&typeof document<"u",SQe=xQe?!!window.msCrypto:!1,EQe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},MQe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Nu=Object.assign({appendTo:Gce,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},EQe,MQe),IQe=Object.keys(Nu),TQe=function(t){var r=Object.keys(t);r.forEach(function(i){Nu[i]=t[i]})};function Zce(e){var t=e.plugins||[],r=t.reduce(function(i,n){var s=n.name,o=n.defaultValue;if(s){var a;i[s]=e[s]!==void 0?e[s]:(a=Nu[s])!=null?a:o}return i},{});return Object.assign({},e,r)}function AQe(e,t){var r=t?Object.keys(Zce(Object.assign({},Nu,{plugins:t}))):IQe,i=r.reduce(function(n,s){var o=(e.getAttribute("data-tippy-"+s)||"").trim();if(!o)return n;if(s==="content")n[s]=o;else try{n[s]=JSON.parse(o)}catch{n[s]=o}return n},{});return i}function TJ(e,t){var r=Object.assign({},t,{content:qce(t.content,[e])},t.ignoreAttributes?{}:AQe(e,t.plugins));return r.aria=Object.assign({},Nu.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var $Qe=function(){return"innerHTML"};function RL(e,t){e[$Qe()]=t}function AJ(e){var t=bg();return e===!0?t.className=Bce:(t.className=zce,YA(e)?t.appendChild(e):RL(t,e)),t}function $J(e,t){YA(t.content)?(RL(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?RL(e,t.content):e.textContent=t.content)}function NT(e){var t=e.firstElementChild,r=tb(t.children);return{box:t,content:r.find(function(i){return i.classList.contains(Uce)}),arrow:r.find(function(i){return i.classList.contains(Bce)||i.classList.contains(zce)}),backdrop:r.find(function(i){return i.classList.contains(Vce)})}}function Kce(e){var t=bg(),r=bg();r.className=hQe,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var i=bg();i.className=Uce,i.setAttribute("data-state","hidden"),$J(i,e.props),t.appendChild(r),r.appendChild(i),n(e.props,e.props);function n(s,o){var a=NT(t),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&$J(u,e.props),o.arrow?c?s.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(AJ(o.arrow))):l.appendChild(AJ(o.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:n}}Kce.$$tippy=!0;var CQe=1,WE=[],Lk=[];function kQe(e,t){var r=TJ(e,Object.assign({},Nu,Zce(EJ(t)))),i,n,s,o=!1,a=!1,l=!1,u=!1,c,p,d,m=[],g=xJ(z,r.interactiveDebounce),b,v=CQe++,_=null,E=fQe(r.plugins),I={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},x={id:v,reference:e,popper:bg(),popperInstance:_,props:r,state:I,plugins:E,clearDelayTimeouts:N,setProps:Y,setContent:be,show:_e,hide:ue,hideWithInteractivity:De,enable:V,disable:H,unmount:qe,destroy:Qe};if(!r.render)return x;var T=r.render(x),M=T.popper,k=T.onUpdate;M.setAttribute("data-tippy-root",""),M.id="tippy-"+x.id,x.popper=M,e._tippy=x,M._tippy=x;var D=E.map(function(Ve){return Ve.fn(x)}),B=e.hasAttribute("aria-expanded");return X(),q(),L(),F("onCreate",[x]),r.showOnCreate&&$(),M.addEventListener("mouseenter",function(){x.props.interactive&&x.state.isVisible&&x.clearDelayTimeouts()}),M.addEventListener("mouseleave",function(){x.props.interactive&&x.props.trigger.indexOf("mouseenter")>=0&&ye().addEventListener("mousemove",g)}),x;function G(){var Ve=x.props.touch;return Array.isArray(Ve)?Ve:[Ve,0]}function W(){return G()[0]==="hold"}function K(){var Ve;return!!((Ve=x.props.render)!=null&&Ve.$$tippy)}function ne(){return b||e}function ye(){var Ve=ne().parentNode;return Ve?Wce(Ve):document}function y(){return NT(M)}function C(Ve){return x.state.isMounted&&!x.state.isVisible||zc.isTouch||c&&c.type==="focus"?0:Ok(x.props.delay,Ve?0:1,Nu.delay)}function L(Ve){Ve===void 0&&(Ve=!1),M.style.pointerEvents=x.props.interactive&&!Ve?"":"none",M.style.zIndex=""+x.props.zIndex}function F(Ve,xe,Oe){if(Oe===void 0&&(Oe=!0),D.forEach(function(rt){rt[Ve]&&rt[Ve].apply(rt,xe)}),Oe){var ze;(ze=x.props)[Ve].apply(ze,xe)}}function ae(){var Ve=x.props.aria;if(!!Ve.content){var xe="aria-"+Ve.content,Oe=M.id,ze=Ly(x.props.triggerTarget||e);ze.forEach(function(rt){var ht=rt.getAttribute(xe);if(x.state.isVisible)rt.setAttribute(xe,ht?ht+" "+Oe:Oe);else{var gt=ht&&ht.replace(Oe,"").trim();gt?rt.setAttribute(xe,gt):rt.removeAttribute(xe)}})}}function q(){if(!(B||!x.props.aria.expanded)){var Ve=Ly(x.props.triggerTarget||e);Ve.forEach(function(xe){x.props.interactive?xe.setAttribute("aria-expanded",x.state.isVisible&&xe===ne()?"true":"false"):xe.removeAttribute("aria-expanded")})}}function fe(){ye().removeEventListener("mousemove",g),WE=WE.filter(function(Ve){return Ve!==g})}function te(Ve){if(!(zc.isTouch&&(l||Ve.type==="mousedown"))){var xe=Ve.composedPath&&Ve.composedPath()[0]||Ve.target;if(!(x.props.interactive&&MJ(M,xe))){if(Ly(x.props.triggerTarget||e).some(function(Oe){return MJ(Oe,xe)})){if(zc.isTouch||x.state.isVisible&&x.props.trigger.indexOf("click")>=0)return}else F("onClickOutside",[x,Ve]);x.props.hideOnClick===!0&&(x.clearDelayTimeouts(),x.hide(),a=!0,setTimeout(function(){a=!1}),x.state.isMounted||Ie())}}}function ge(){l=!0}function ve(){l=!1}function Ee(){var Ve=ye();Ve.addEventListener("mousedown",te,!0),Ve.addEventListener("touchend",te,wy),Ve.addEventListener("touchstart",ve,wy),Ve.addEventListener("touchmove",ge,wy)}function Ie(){var Ve=ye();Ve.removeEventListener("mousedown",te,!0),Ve.removeEventListener("touchend",te,wy),Ve.removeEventListener("touchstart",ve,wy),Ve.removeEventListener("touchmove",ge,wy)}function ke(Ve,xe){Se(Ve,function(){!x.state.isVisible&&M.parentNode&&M.parentNode.contains(M)&&xe()})}function Te(Ve,xe){Se(Ve,xe)}function Se(Ve,xe){var Oe=y().box;function ze(rt){rt.target===Oe&&(Pk(Oe,"remove",ze),xe())}if(Ve===0)return xe();Pk(Oe,"remove",p),Pk(Oe,"add",ze),p=ze}function Ae(Ve,xe,Oe){Oe===void 0&&(Oe=!1);var ze=Ly(x.props.triggerTarget||e);ze.forEach(function(rt){rt.addEventListener(Ve,xe,Oe),m.push({node:rt,eventType:Ve,handler:xe,options:Oe})})}function X(){W()&&(Ae("touchstart",le,{passive:!0}),Ae("touchend",ee,{passive:!0})),dQe(x.props.trigger).forEach(function(Ve){if(Ve!=="manual")switch(Ae(Ve,le),Ve){case"mouseenter":Ae("mouseleave",ee);break;case"focus":Ae(SQe?"focusout":"blur",we);break;case"focusin":Ae("focusout",we);break}})}function Z(){m.forEach(function(Ve){var xe=Ve.node,Oe=Ve.eventType,ze=Ve.handler,rt=Ve.options;xe.removeEventListener(Oe,ze,rt)}),m=[]}function le(Ve){var xe,Oe=!1;if(!(!x.state.isEnabled||se(Ve)||a)){var ze=((xe=c)==null?void 0:xe.type)==="focus";c=Ve,b=Ve.currentTarget,q(),!x.state.isVisible&&Z7(Ve)&&WE.forEach(function(rt){return rt(Ve)}),Ve.type==="click"&&(x.props.trigger.indexOf("mouseenter")<0||o)&&x.props.hideOnClick!==!1&&x.state.isVisible?Oe=!0:$(Ve),Ve.type==="click"&&(o=!Oe),Oe&&!ze&&A(Ve)}}function z(Ve){var xe=Ve.target,Oe=ne().contains(xe)||M.contains(xe);if(!(Ve.type==="mousemove"&&Oe)){var ze=R().concat(M).map(function(rt){var ht,gt=rt._tippy,Nt=(ht=gt.popperInstance)==null?void 0:ht.state;return Nt?{popperRect:rt.getBoundingClientRect(),popperState:Nt,props:r}:null}).filter(Boolean);vQe(ze,Ve)&&(fe(),A(Ve))}}function ee(Ve){var xe=se(Ve)||x.props.trigger.indexOf("click")>=0&&o;if(!xe){if(x.props.interactive){x.hideWithInteractivity(Ve);return}A(Ve)}}function we(Ve){x.props.trigger.indexOf("focusin")<0&&Ve.target!==ne()||x.props.interactive&&Ve.relatedTarget&&M.contains(Ve.relatedTarget)||A(Ve)}function se(Ve){return zc.isTouch?W()!==Ve.type.indexOf("touch")>=0:!1}function U(){oe();var Ve=x.props,xe=Ve.popperOptions,Oe=Ve.placement,ze=Ve.offset,rt=Ve.getReferenceClientRect,ht=Ve.moveTransition,gt=K()?NT(M).arrow:null,Nt=rt?{getBoundingClientRect:rt,contextElement:rt.contextElement||ne()}:e,ft={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(mr){var ki=mr.state;if(K()){var ws=y(),ac=ws.box;["placement","reference-hidden","escaped"].forEach(function(lc){lc==="placement"?ac.setAttribute("data-placement",ki.placement):ki.attributes.popper["data-popper-"+lc]?ac.setAttribute("data-"+lc,""):ac.removeAttribute("data-"+lc)}),ki.attributes.popper={}}}},zt=[{name:"offset",options:{offset:ze}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ht}},ft];K()&&gt&&zt.push({name:"arrow",options:{element:gt,padding:3}}),zt.push.apply(zt,xe?.modifiers||[]),x.popperInstance=cQe(Nt,M,Object.assign({},xe,{placement:Oe,onFirstUpdate:d,modifiers:zt}))}function oe(){x.popperInstance&&(x.popperInstance.destroy(),x.popperInstance=null)}function re(){var Ve=x.props.appendTo,xe,Oe=ne();x.props.interactive&&Ve===Gce||Ve==="parent"?xe=Oe.parentNode:xe=qce(Ve,[Oe]),xe.contains(M)||xe.appendChild(M),x.state.isMounted=!0,U()}function R(){return tb(M.querySelectorAll("[data-tippy-root]"))}function $(Ve){x.clearDelayTimeouts(),Ve&&F("onTrigger",[x,Ve]),Ee();var xe=C(!0),Oe=G(),ze=Oe[0],rt=Oe[1];zc.isTouch&&ze==="hold"&&rt&&(xe=rt),xe?i=setTimeout(function(){x.show()},xe):x.show()}function A(Ve){if(x.clearDelayTimeouts(),F("onUntrigger",[x,Ve]),!x.state.isVisible){Ie();return}if(!(x.props.trigger.indexOf("mouseenter")>=0&&x.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(Ve.type)>=0&&o)){var xe=C(!1);xe?n=setTimeout(function(){x.state.isVisible&&x.hide()},xe):s=requestAnimationFrame(function(){x.hide()})}}function V(){x.state.isEnabled=!0}function H(){x.hide(),x.state.isEnabled=!1}function N(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(s)}function Y(Ve){if(!x.state.isDestroyed){F("onBeforeUpdate",[x,Ve]),Z();var xe=x.props,Oe=TJ(e,Object.assign({},xe,EJ(Ve),{ignoreAttributes:!0}));x.props=Oe,X(),xe.interactiveDebounce!==Oe.interactiveDebounce&&(fe(),g=xJ(z,Oe.interactiveDebounce)),xe.triggerTarget&&!Oe.triggerTarget?Ly(xe.triggerTarget).forEach(function(ze){ze.removeAttribute("aria-expanded")}):Oe.triggerTarget&&e.removeAttribute("aria-expanded"),q(),L(),k&&k(xe,Oe),x.popperInstance&&(U(),R().forEach(function(ze){requestAnimationFrame(ze._tippy.popperInstance.forceUpdate)})),F("onAfterUpdate",[x,Ve])}}function be(Ve){x.setProps({content:Ve})}function _e(){var Ve=x.state.isVisible,xe=x.state.isDestroyed,Oe=!x.state.isEnabled,ze=zc.isTouch&&!x.props.touch,rt=Ok(x.props.duration,0,Nu.duration);if(!(Ve||xe||Oe||ze)&&!ne().hasAttribute("disabled")&&(F("onShow",[x],!1),x.props.onShow(x)!==!1)){if(x.state.isVisible=!0,K()&&(M.style.visibility="visible"),L(),Ee(),x.state.isMounted||(M.style.transition="none"),K()){var ht=y(),gt=ht.box,Nt=ht.content;Rk([gt,Nt],0)}d=function(){var zt;if(!(!x.state.isVisible||u)){if(u=!0,M.offsetHeight,M.style.transition=x.props.moveTransition,K()&&x.props.animation){var Ut=y(),mr=Ut.box,ki=Ut.content;Rk([mr,ki],rt),Hx([mr,ki],"visible")}ae(),q(),SJ(Lk,x),(zt=x.popperInstance)==null||zt.forceUpdate(),F("onMount",[x]),x.props.animation&&K()&&Te(rt,function(){x.state.isShown=!0,F("onShown",[x])})}},re()}}function ue(){var Ve=!x.state.isVisible,xe=x.state.isDestroyed,Oe=!x.state.isEnabled,ze=Ok(x.props.duration,1,Nu.duration);if(!(Ve||xe||Oe)&&(F("onHide",[x],!1),x.props.onHide(x)!==!1)){if(x.state.isVisible=!1,x.state.isShown=!1,u=!1,o=!1,K()&&(M.style.visibility="hidden"),fe(),Ie(),L(!0),K()){var rt=y(),ht=rt.box,gt=rt.content;x.props.animation&&(Rk([ht,gt],ze),Hx([ht,gt],"hidden"))}ae(),q(),x.props.animation?K()&&ke(ze,x.unmount):x.unmount()}}function De(Ve){ye().addEventListener("mousemove",g),SJ(WE,g),g(Ve)}function qe(){x.state.isVisible&&x.hide(),x.state.isMounted&&(oe(),R().forEach(function(Ve){Ve._tippy.unmount()}),M.parentNode&&M.parentNode.removeChild(M),Lk=Lk.filter(function(Ve){return Ve!==x}),x.state.isMounted=!1,F("onHidden",[x]))}function Qe(){x.state.isDestroyed||(x.clearDelayTimeouts(),x.unmount(),Z(),delete e._tippy,x.state.isDestroyed=!0,F("onDestroy",[x]))}}function bo(e,t){t===void 0&&(t={});var r=Nu.plugins.concat(t.plugins||[]);_Qe();var i=Object.assign({},t,{plugins:r}),n=gQe(e),s=n.reduce(function(o,a){var l=a&&kQe(a,i);return l&&o.push(l),o},[]);return YA(e)?s[0]:s}bo.defaultProps=Nu;bo.setDefaultProps=TQe;bo.currentInput=zc;var OQe=Object.assign({},Rce,{effect:function(t){var r=t.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow)}}),RQe=function(t,r){var i;r===void 0&&(r={});var n=t,s=[],o=[],a,l=r.overrides,u=[],c=!1;function p(){o=n.map(function(x){return Ly(x.props.triggerTarget||x.reference)}).reduce(function(x,T){return x.concat(T)},[])}function d(){s=n.map(function(x){return x.reference})}function m(x){n.forEach(function(T){x?T.enable():T.disable()})}function g(x){return n.map(function(T){var M=T.setProps;return T.setProps=function(k){M(k),T.reference===a&&x.setProps(k)},function(){T.setProps=M}})}function b(x,T){var M=o.indexOf(T);if(T!==a){a=T;var k=(l||[]).concat("content").reduce(function(D,B){return D[B]=n[M].props[B],D},{});x.setProps(Object.assign({},k,{getReferenceClientRect:typeof k.getReferenceClientRect=="function"?k.getReferenceClientRect:function(){var D;return(D=s[M])==null?void 0:D.getBoundingClientRect()}}))}}m(!1),d(),p();var v={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function(M){M.props.showOnCreate&&!c&&(c=!0,a=null)},onShow:function(M){M.props.showOnCreate&&!c&&(c=!0,b(M,s[0]))},onTrigger:function(M,k){b(M,k.currentTarget)}}}},_=bo(bg(),Object.assign({},pQe(r,["overrides"]),{plugins:[v].concat(r.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},r.popperOptions,{modifiers:[].concat(((i=r.popperOptions)==null?void 0:i.modifiers)||[],[OQe])})})),E=_.show;_.show=function(x){if(E(),!a&&x==null)return b(_,s[0]);if(!(a&&x==null)){if(typeof x=="number")return s[x]&&b(_,s[x]);if(n.indexOf(x)>=0){var T=x.reference;return b(_,T)}if(s.indexOf(x)>=0)return b(_,x)}},_.showNext=function(){var x=s[0];if(!a)return _.show(0);var T=s.indexOf(a);_.show(s[T+1]||x)},_.showPrevious=function(){var x=s[s.length-1];if(!a)return _.show(x);var T=s.indexOf(a),M=s[T-1]||x;_.show(M)};var I=_.setProps;return _.setProps=function(x){l=x.overrides||l,I(x)},_.setInstances=function(x){m(!0),u.forEach(function(T){return T()}),n=x,m(!1),d(),p(),u=g(_),_.setProps({triggerTarget:o})},u=g(_),_},PQe={name:"animateFill",defaultValue:!1,fn:function(t){var r;if(!((r=t.props.render)!=null&&r.$$tippy))return{};var i=NT(t.popper),n=i.box,s=i.content,o=t.props.animateFill?LQe():null;return{onCreate:function(){o&&(n.insertBefore(o,n.firstElementChild),n.setAttribute("data-animatefill",""),n.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=n.style.transitionDuration,u=Number(l.replace("ms",""));s.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,Hx([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&Hx([o],"hidden")}}}};function LQe(){var e=bg();return e.className=Vce,Hx([e],"hidden"),e}var PL={clientX:0,clientY:0},JE=[];function Yce(e){var t=e.clientX,r=e.clientY;PL={clientX:t,clientY:r}}function NQe(e){e.addEventListener("mousemove",Yce)}function DQe(e){e.removeEventListener("mousemove",Yce)}var FQe={name:"followCursor",defaultValue:!1,fn:function(t){var r=t.reference,i=Wce(t.props.triggerTarget||r),n=!1,s=!1,o=!0,a=t.props;function l(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){i.addEventListener("mousemove",d)}function c(){i.removeEventListener("mousemove",d)}function p(){n=!0,t.setProps({getReferenceClientRect:null}),n=!1}function d(b){var v=b.target?r.contains(b.target):!0,_=t.props.followCursor,E=b.clientX,I=b.clientY,x=r.getBoundingClientRect(),T=E-x.left,M=I-x.top;(v||!t.props.interactive)&&t.setProps({getReferenceClientRect:function(){var D=r.getBoundingClientRect(),B=E,G=I;_==="initial"&&(B=D.left+T,G=D.top+M);var W=_==="horizontal"?D.top:G,K=_==="vertical"?D.right:B,ne=_==="horizontal"?D.bottom:G,ye=_==="vertical"?D.left:B;return{width:K-ye,height:ne-W,top:W,right:K,bottom:ne,left:ye}}})}function m(){t.props.followCursor&&(JE.push({instance:t,doc:i}),NQe(i))}function g(){JE=JE.filter(function(b){return b.instance!==t}),JE.filter(function(b){return b.doc===i}).length===0&&DQe(i)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(v,_){var E=_.followCursor;n||E!==void 0&&a.followCursor!==E&&(g(),E?(m(),t.state.isMounted&&!s&&!l()&&u()):(c(),p()))},onMount:function(){t.props.followCursor&&!s&&(o&&(d(PL),o=!1),l()||u())},onTrigger:function(v,_){Z7(_)&&(PL={clientX:_.clientX,clientY:_.clientY}),s=_.type==="focus"},onHidden:function(){t.props.followCursor&&(p(),c(),o=!0)}}}};function jQe(e,t){var r;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((r=e.popperOptions)==null?void 0:r.modifiers)||[]).filter(function(i){var n=i.name;return n!==t.name}),[t])})}}var UQe={name:"inlinePositioning",defaultValue:!1,fn:function(t){var r=t.reference;function i(){return!!t.props.inlinePositioning}var n,s=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;i()&&(a.indexOf(g.placement)!==-1&&(a=[]),n!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),t.setProps({getReferenceClientRect:function(){return u(g.placement)}})),n=g.placement)}};function u(d){return VQe(Hce(d),r.getBoundingClientRect(),tb(r.getClientRects()),s)}function c(d){o=!0,t.setProps(d),o=!1}function p(){o||c(jQe(t.props,l))}return{onCreate:p,onAfterUpdate:p,onTrigger:function(m,g){if(Z7(g)){var b=tb(t.reference.getClientRects()),v=b.find(function(E){return E.left-2<=g.clientX&&E.right+2>=g.clientX&&E.top-2<=g.clientY&&E.bottom+2>=g.clientY}),_=b.indexOf(v);s=_>-1?_:s}},onHidden:function(){s=-1}}}};function VQe(e,t,r,i){if(r.length<2||e===null)return t;if(r.length===2&&i>=0&&r[0].left>r[1].right)return r[i]||t;switch(e){case"top":case"bottom":{var n=r[0],s=r[r.length-1],o=e==="top",a=n.top,l=s.bottom,u=o?n.left:s.left,c=o?n.right:s.right,p=c-u,d=l-a;return{top:a,bottom:l,left:u,right:c,width:p,height:d}}case"left":case"right":{var m=Math.min.apply(Math,r.map(function(M){return M.left})),g=Math.max.apply(Math,r.map(function(M){return M.right})),b=r.filter(function(M){return e==="left"?M.left===m:M.right===g}),v=b[0].top,_=b[b.length-1].bottom,E=m,I=g,x=I-E,T=_-v;return{top:v,bottom:_,left:E,right:I,width:x,height:T}}default:return t}}var BQe={name:"sticky",defaultValue:!1,fn:function(t){var r=t.reference,i=t.popper;function n(){return t.popperInstance?t.popperInstance.state.elements.reference:r}function s(u){return t.props.sticky===!0||t.props.sticky===u}var o=null,a=null;function l(){var u=s("reference")?n().getBoundingClientRect():null,c=s("popper")?i.getBoundingClientRect():null;(u&&CJ(o,u)||c&&CJ(a,c))&&t.popperInstance&&t.popperInstance.update(),o=u,a=c,t.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){t.props.sticky&&l()}}}};function CJ(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}bo.setDefaultProps({render:Kce});bo.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function K7(e,t={},r={mount:!0}){const i=xo(),n=hs(),s=hs({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1});let o=null;const a=()=>o||(o=document.createDocumentFragment(),o),l=M=>{let k,D=ai(M)?M.value:M;if(Zu(D))i&&(D.appContext=i.appContext),Ep(D,a()),k=()=>a();else if(typeof D=="object"){let B=Qo(D);i&&(B.appContext=i.appContext),Ep(B,a()),k=()=>a()}else k=D;return k},u=M=>{let k={};return ai(M)?k=M.value||{}:Uu(M)?k={...M}:k={...M},k.content&&(k.content=l(k.content)),k.triggerTarget&&(k.triggerTarget=ai(k.triggerTarget)?k.triggerTarget.value:k.triggerTarget),(!k.plugins||!Array.isArray(k.plugins))&&(k.plugins=[]),k.plugins=k.plugins.filter(D=>D.name!=="vueTippyReactiveState"),k.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){s.value.isEnabled=!0},onMount(){s.value.isMounted=!0},onShow(){s.value.isMounted=!0,s.value.isVisible=!0},onShown(){s.value.isShown=!0},onHide(){s.value.isMounted=!1,s.value.isVisible=!1},onHidden(){s.value.isShown=!1},onUnmounted(){s.value.isMounted=!1},onDestroy(){s.value.isDestroyed=!0}})}),k},c=()=>{!n.value||n.value.setProps(u(t))},p=()=>{!n.value||!t.content||n.value.setContent(l(t.content))},d=M=>{var k;(k=n.value)===null||k===void 0||k.setContent(l(M))},m=M=>{var k;(k=n.value)===null||k===void 0||k.setProps(u(M))},g=()=>{n.value&&(n.value.destroy(),n.value=void 0),o=null},b=()=>{var M;(M=n.value)===null||M===void 0||M.show()},v=()=>{var M;(M=n.value)===null||M===void 0||M.hide()},_=()=>{var M;(M=n.value)===null||M===void 0||M.disable(),s.value.isEnabled=!1},E=()=>{var M;(M=n.value)===null||M===void 0||M.enable(),s.value.isEnabled=!0},I=()=>{var M;(M=n.value)===null||M===void 0||M.unmount()},x=()=>{if(!e)return;let M=ai(e)?e.value:e;typeof M=="function"&&(M=M()),M&&(n.value=bo(M,u(t)),M.$tippy=T)},T={tippy:n,refresh:c,refreshContent:p,setContent:d,setProps:m,destroy:g,hide:v,show:b,disable:_,enable:E,unmount:I,mount:x,state:s};return r.mount&&(i?(i.isMounted?x():bh(x),l0(()=>{g()})):x()),ai(t)||Uu(t)?Yo(t,c,{immediate:!1}):ai(t.content)&&Yo(t.content,p,{immediate:!1}),T}function zQe(e,t){const r=hs();return bh(()=>{const n=(Array.isArray(e)?e.map(s=>s.value):typeof e=="function"?e():e.value).map(s=>s instanceof Element?s._tippy:s).filter(Boolean);r.value=RQe(n,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:r}}const GQe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let Gg={};Object.keys(bo.defaultProps).forEach(e=>{GQe.includes(e)?Gg[e]={type:e==="arrow"?[String,Boolean,Function]:Boolean,default:function(){return bo.defaultProps[e]}}:Gg[e]={default:function(){return bo.defaultProps[e]}}});Gg.to={};Gg.tag={default:"span"};Gg.contentTag={default:"span"};Gg.contentClass={default:null};const qQe=Ar({props:Gg,emits:["state"],setup(e,{slots:t,emit:r,expose:i}){const n=hs(),s=hs(),o=hs(!1),a=()=>{let p={...e};for(const d of["to","tag","contentTag","contentClass"])p.hasOwnProperty(d)&&delete p[d];return p};let l=n;e.to&&(typeof Element<"u"&&e.to instanceof Element?l=()=>e.to:(typeof e.to=="string"||e.to instanceof String)&&(l=()=>document.querySelector(e.to)));const u=K7(l,a());bh(()=>{o.value=!0,OS(()=>{t.content&&u.setContent(()=>s.value)})}),Yo(u.state,()=>{r("state",Mx(u.state))},{immediate:!0,deep:!0}),Yo(e,()=>{u.setProps(a()),t.content&&u.setContent(()=>s.value)});let c={elem:n,contentElem:s,mounted:o,...u};return i(c),()=>{let p={elem:n.value,contentElem:s.value,mounted:o.value,...Object.keys(u).reduce((m,g)=>(m[g]=Mx(u[g]),m),{})};const d=t.default?t.default(p):[];return Qo(e.tag,{ref:n,"data-v-tippy":""},t.content?[d,Qo(e.contentTag,{ref:s,style:{display:o.value?"inherit":"none"},class:e.contentClass},t.content(p))]:d)}}}),HQe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let LL={};Object.keys(bo.defaultProps).forEach(e=>{HQe.includes(e)?LL[e]={type:Boolean,default:function(){return bo.defaultProps[e]}}:LL[e]={default:function(){return bo.defaultProps[e]}}});const WQe=Ar({props:LL,setup(e){const t=hs([]),{singleton:r}=zQe(t,e);return{instances:t,singleton:r}},mounted(){var e;const r=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(r).map(i=>i._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return Qo(()=>e)}}),JQe={mounted(e,t,r){const i=typeof t.value=="string"?{content:t.value}:t.value||{},n=Object.keys(t.modifiers||{}),s=n.find(a=>a!=="arrow"),o=n.findIndex(a=>a==="arrow")!==-1;s&&(i.placement=i.placement||s),o&&(i.arrow=i.arrow!==void 0?i.arrow:!0),r.props&&r.props.onTippyShow&&(i.onShow=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),r.props&&r.props.onTippyShown&&(i.onShown=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),r.props&&r.props.onTippyHidden&&(i.onHidden=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),r.props&&r.props.onTippyHide&&(i.onHide=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),r.props&&r.props.onTippyMount&&(i.onMount=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),K7(e,i)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const r=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(r||{}):e._tippy&&e._tippy.setProps(r||{})}},ZQe={install(e,t={}){bo.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",JQe),e.component(t.component||"tippy",qQe),e.component(t.componentSingleton||"tippy-singleton",WQe)}},Qce=bo.setDefaultProps;Qce({ignoreAttributes:!0,plugins:[BQe,UQe,FQe,PQe]});const KQe=Ar({components:{Shell:iYe},mounted(){sYe.observe(this.$refs["app-size"]),Qce({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:this.$el})}}),YQe=["lang"],QQe={class:"h-full",ref:"app-size"};function XQe(e,t,r,i,n,s){const o=Lr("shell");return pt(),Ct("div",{class:"ramp-app animation-enabled",lang:e.$i18n.locale},[ut("div",QQe,[ar(o)],512)],8,YQe)}var eXe=li(KQe,[["render",XQe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/app.vue"]]);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var tXe="store";function c0(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function rXe(e){return e!==null&&typeof e=="object"}function iXe(e){return e&&typeof e.then=="function"}function ec(e,t){if(!e)throw new Error("[vuex] "+t)}function nXe(e,t){return function(){return e(t)}}function Xce(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function ehe(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;QA(e,r,[],e._modules.root,!0),Y7(e,r,t)}function Y7(e,t,r){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var n=e._wrappedGetters,s={};c0(n,function(o,a){s[a]=nXe(o,e),Object.defineProperty(e.getters,a,{get:function(){return s[a]()},enumerable:!0})}),e._state=oa({data:t}),e.strict&&uXe(e),i&&r&&e._withCommit(function(){i.data=null})}function QA(e,t,r,i,n){var s=!r.length,o=e._modules.getNamespace(r);if(i.namespaced&&(e._modulesNamespaceMap[o]&&console.error("[vuex] duplicate namespace "+o+" for the namespaced module "+r.join("/")),e._modulesNamespaceMap[o]=i),!s&&!n){var a=Q7(t,r.slice(0,-1)),l=r[r.length-1];e._withCommit(function(){l in a&&console.warn('[vuex] state field "'+l+'" was overridden by a module with the same name at "'+r.join(".")+'"'),a[l]=i.state})}var u=i.context=sXe(e,o,r);i.forEachMutation(function(c,p){var d=o+p;oXe(e,d,c,u)}),i.forEachAction(function(c,p){var d=c.root?p:o+p,m=c.handler||c;aXe(e,d,m,u)}),i.forEachGetter(function(c,p){var d=o+p;lXe(e,d,c,u)}),i.forEachChild(function(c,p){QA(e,t,r.concat(p),c,n)})}function sXe(e,t,r){var i=t==="",n={dispatch:i?e.dispatch:function(s,o,a){var l=DT(s,o,a),u=l.payload,c=l.options,p=l.type;if((!c||!c.root)&&(p=t+p,!e._actions[p])){console.error("[vuex] unknown local action type: "+l.type+", global type: "+p);return}return e.dispatch(p,u)},commit:i?e.commit:function(s,o,a){var l=DT(s,o,a),u=l.payload,c=l.options,p=l.type;if((!c||!c.root)&&(p=t+p,!e._mutations[p])){console.error("[vuex] unknown local mutation type: "+l.type+", global type: "+p);return}e.commit(p,u,c)}};return Object.defineProperties(n,{getters:{get:i?function(){return e.getters}:function(){return the(e,t)}},state:{get:function(){return Q7(e.state,r)}}}),n}function the(e,t){if(!e._makeLocalGettersCache[t]){var r={},i=t.length;Object.keys(e.getters).forEach(function(n){if(n.slice(0,i)===t){var s=n.slice(i);Object.defineProperty(r,s,{get:function(){return e.getters[n]},enumerable:!0})}}),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function oXe(e,t,r,i){var n=e._mutations[t]||(e._mutations[t]=[]);n.push(function(o){r.call(e,i.state,o)})}function aXe(e,t,r,i){var n=e._actions[t]||(e._actions[t]=[]);n.push(function(o){var a=r.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return iXe(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function lXe(e,t,r,i){if(e._wrappedGetters[t]){console.error("[vuex] duplicate getter key: "+t);return}e._wrappedGetters[t]=function(s){return r(i.state,i.getters,s.state,s.getters)}}function uXe(e){Yo(function(){return e._state.data},function(){ec(e._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function Q7(e,t){return t.reduce(function(r,i){return r[i]},e)}function DT(e,t,r){return rXe(e)&&e.type&&(r=t,t=e,e=e.type),ec(typeof e=="string","expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:r}}var cXe="vuex bindings",kJ="vuex:mutations",Nk="vuex:actions",N0="vuex",hXe=0;function pXe(e,t){Hue({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[cXe]},function(r){r.addTimelineLayer({id:kJ,label:"Vuex Mutations",color:OJ}),r.addTimelineLayer({id:Nk,label:"Vuex Actions",color:OJ}),r.addInspector({id:N0,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),r.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===N0)if(i.filter){var n=[];she(n,t._modules.root,i.filter,""),i.rootNodes=n}else i.rootNodes=[nhe(t._modules.root,"")]}),r.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===N0){var n=i.nodeId;the(t,n),i.state=mXe(gXe(t._modules,n),n==="root"?t.getters:t._makeLocalGettersCache,n)}}),r.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===N0){var n=i.nodeId,s=i.path;n!=="root"&&(s=n.split("/").filter(Boolean).concat(s)),t._withCommit(function(){i.set(t._state.data,s,i.state.value)})}}),t.subscribe(function(i,n){var s={};i.payload&&(s.payload=i.payload),s.state=n,r.notifyComponentUpdate(),r.sendInspectorTree(N0),r.sendInspectorState(N0),r.addTimelineEvent({layerId:kJ,event:{time:Date.now(),title:i.type,data:s}})}),t.subscribeAction({before:function(i,n){var s={};i.payload&&(s.payload=i.payload),i._id=hXe++,i._time=Date.now(),s.state=n,r.addTimelineEvent({layerId:Nk,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,n){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=n,r.addTimelineEvent({layerId:Nk,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var OJ=8702998,dXe=6710886,fXe=16777215,rhe={label:"namespaced",textColor:fXe,backgroundColor:dXe};function ihe(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function nhe(e,t){return{id:t||"root",label:ihe(t),tags:e.namespaced?[rhe]:[],children:Object.keys(e._children).map(function(r){return nhe(e._children[r],t+r+"/")})}}function she(e,t,r,i){i.includes(r)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[rhe]:[]}),Object.keys(t._children).forEach(function(n){she(e,t._children[n],r,i+n+"/")})}function mXe(e,t,r){t=r==="root"?t:t[r];var i=Object.keys(t),n={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var s=yXe(t);n.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?ihe(o):o,editable:!1,value:NL(function(){return s[o]})}})}return n}function yXe(e){var t={};return Object.keys(e).forEach(function(r){var i=r.split("/");if(i.length>1){var n=t,s=i.pop();i.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[s]=NL(function(){return e[r]})}else t[r]=NL(function(){return e[r]})}),t}function gXe(e,t){var r=t.split("/").filter(function(i){return i});return r.reduce(function(i,n,s){var o=i[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+t+'".');return s===r.length-1?o:o._children},t==="root"?e:e.root._children)}function NL(e){try{return e()}catch(t){return t}}var oc=function(t,r){this.runtime=r,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},ohe={namespaced:{configurable:!0}};ohe.namespaced.get=function(){return!!this._rawModule.namespaced};oc.prototype.addChild=function(t,r){this._children[t]=r};oc.prototype.removeChild=function(t){delete this._children[t]};oc.prototype.getChild=function(t){return this._children[t]};oc.prototype.hasChild=function(t){return t in this._children};oc.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};oc.prototype.forEachChild=function(t){c0(this._children,t)};oc.prototype.forEachGetter=function(t){this._rawModule.getters&&c0(this._rawModule.getters,t)};oc.prototype.forEachAction=function(t){this._rawModule.actions&&c0(this._rawModule.actions,t)};oc.prototype.forEachMutation=function(t){this._rawModule.mutations&&c0(this._rawModule.mutations,t)};Object.defineProperties(oc.prototype,ohe);var h0=function(t){this.register([],t,!1)};h0.prototype.get=function(t){return t.reduce(function(r,i){return r.getChild(i)},this.root)};h0.prototype.getNamespace=function(t){var r=this.root;return t.reduce(function(i,n){return r=r.getChild(n),i+(r.namespaced?n+"/":"")},"")};h0.prototype.update=function(t){ahe([],this.root,t)};h0.prototype.register=function(t,r,i){var n=this;i===void 0&&(i=!0),lhe(t,r);var s=new oc(r,i);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}r.modules&&c0(r.modules,function(a,l){n.register(t.concat(l),a,i)})};h0.prototype.unregister=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1],n=r.getChild(i);if(!n){console.warn("[vuex] trying to unregister module '"+i+"', which is not registered");return}!n.runtime||r.removeChild(i)};h0.prototype.isRegistered=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1];return r?r.hasChild(i):!1};function ahe(e,t,r){if(lhe(e,r),t.update(r),r.modules)for(var i in r.modules){if(!t.getChild(i)){console.warn("[vuex] trying to add a new module '"+i+"' on hot reloading, manual reload is needed");return}ahe(e.concat(i),t.getChild(i),r.modules[i])}}var RJ={assert:function(e){return typeof e=="function"},expected:"function"},vXe={assert:function(e){return typeof e=="function"||typeof e=="object"&&typeof e.handler=="function"},expected:'function or object with "handler" function'},PJ={getters:RJ,mutations:RJ,actions:vXe};function lhe(e,t){Object.keys(PJ).forEach(function(r){if(!!t[r]){var i=PJ[r];c0(t[r],function(n,s){ec(i.assert(n),bXe(e,r,s,n,i.expected))})}})}function bXe(e,t,r,i,n){var s=t+" should be "+n+' but "'+t+"."+r+'"';return e.length>0&&(s+=' in module "'+e.join(".")+'"'),s+=" is "+JSON.stringify(i)+".",s}function wXe(e){return new pa(e)}var pa=function e(t){var r=this;t===void 0&&(t={}),ec(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),ec(this instanceof e,"store must be called with the new operator.");var i=t.plugins;i===void 0&&(i=[]);var n=t.strict;n===void 0&&(n=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new h0(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,u=a.commit;this.dispatch=function(d,m){return l.call(o,d,m)},this.commit=function(d,m,g){return u.call(o,d,m,g)},this.strict=n;var c=this._modules.root.state;QA(this,c,[],this._modules.root),Y7(this,c),i.forEach(function(p){return p(r)})},X7={state:{configurable:!0}};pa.prototype.install=function(t,r){t.provide(r||tXe,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!0;i&&pXe(t,this)};X7.state.get=function(){return this._state.data};X7.state.set=function(e){ec(!1,"use store.replaceState() to explicit replace store state.")};pa.prototype.commit=function(t,r,i){var n=this,s=DT(t,r,i),o=s.type,a=s.payload,l=s.options,u={type:o,payload:a},c=this._mutations[o];if(!c){console.error("[vuex] unknown mutation type: "+o);return}this._withCommit(function(){c.forEach(function(d){d(a)})}),this._subscribers.slice().forEach(function(p){return p(u,n.state)}),l&&l.silent&&console.warn("[vuex] mutation type: "+o+". Silent option has been removed. Use the filter functionality in the vue-devtools")};pa.prototype.dispatch=function(t,r){var i=this,n=DT(t,r),s=n.type,o=n.payload,a={type:s,payload:o},l=this._actions[s];if(!l){console.error("[vuex] unknown action type: "+s);return}try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(a,i.state)})}catch(c){console.warn("[vuex] error in before action subscribers: "),console.error(c)}var u=l.length>1?Promise.all(l.map(function(c){return c(o)})):l[0](o);return new Promise(function(c,p){u.then(function(d){try{i._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,i.state)})}catch(m){console.warn("[vuex] error in after action subscribers: "),console.error(m)}c(d)},function(d){try{i._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,i.state,d)})}catch(m){console.warn("[vuex] error in error action subscribers: "),console.error(m)}p(d)})})};pa.prototype.subscribe=function(t,r){return Xce(t,this._subscribers,r)};pa.prototype.subscribeAction=function(t,r){var i=typeof t=="function"?{before:t}:t;return Xce(i,this._actionSubscribers,r)};pa.prototype.watch=function(t,r,i){var n=this;return ec(typeof t=="function","store.watch only accepts a function."),Yo(function(){return t(n.state,n.getters)},r,Object.assign({},i))};pa.prototype.replaceState=function(t){var r=this;this._withCommit(function(){r._state.data=t})};pa.prototype.registerModule=function(t,r,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),ec(Array.isArray(t),"module path must be a string or an Array."),ec(t.length>0,"cannot register the root module by using registerModule."),this._modules.register(t,r),QA(this,this.state,t,this._modules.get(t),i.preserveState),Y7(this,this.state)};pa.prototype.unregisterModule=function(t){var r=this;typeof t=="string"&&(t=[t]),ec(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var i=Q7(r.state,t.slice(0,-1));delete i[t[t.length-1]]}),ehe(this)};pa.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),ec(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)};pa.prototype.hotUpdate=function(t){this._modules.update(t),ehe(this,!0)};pa.prototype._withCommit=function(t){var r=this._committing;this._committing=!0,t(),this._committing=r};Object.defineProperties(pa.prototype,X7);class _Xe{items={};loadPromises={}}var D5=(e=>(e.ADD_FIXTURE="ADD_FIXTURE",e.REMOVE_FIXTURE="REMOVE_FIXTURE",e.ADD_LOAD_PROMISE="ADD_LOAD_PROMISE",e))(D5||{});const xXe={getLoadPromises:e=>t=>{const r=[];return t.forEach(i=>{i in e.loadPromises&&r.push(e.loadPromises[i].getPromise())}),r}},SXe={},EXe={ADD_FIXTURE(e,{value:t}){if(e.items={...e.items,[t.id]:t},t.id in e.loadPromises)e.loadPromises[t.id].resolveMe();else{const r=new cs;r.resolveMe(),e.loadPromises={...e.loadPromises,[t.id]:r}}typeof t.added=="function"&&t.added()},REMOVE_FIXTURE(e,{value:t}){delete e.items[t.id],e.items={...e.items},delete e.loadPromises[t.id],e.loadPromises={...e.loadPromises},typeof t.removed=="function"&&t.removed()},ADD_LOAD_PROMISE(e,t){e.loadPromises={...e.loadPromises,[t]:new cs}}};function MXe(){const e=new _Xe;return{namespaced:!0,state:e,getters:{...xXe},actions:{...SXe},mutations:{...EXe}}}class IXe{notificationStack=[];groups={}}const TXe={notificationNumber:e=>e.notificationStack.length>=99?99:e.notificationStack.length},AXe={showNotification(e,t){e.commit("SHOW_NOTIFICATION",t)},removeNotification(e,t){e.state.notificationStack.includes(t)&&(t instanceof Mce&&e.commit("REMOVE_GROUP",t),e.commit("REMOVE_NOTIFICATION",t))},registerGroup(e,t){e.commit("REGISTER_GROUP",t)},addToGroup(e,t){e.state.groups[t.id]&&(e.commit("ADD_TO_GROUP",t),e.state.notificationStack.includes(e.state.groups[t.id])||e.commit("SHOW_GROUP",t.id))},clearAll(e){Object.values(e.state.groups).forEach(t=>e.commit("REMOVE_GROUP",t)),e.commit("CLEAR_ALL")}},$Xe={SHOW_NOTIFICATION(e,t){e.notificationStack=[t,...e.notificationStack]},REMOVE_NOTIFICATION(e,t){const r=e.notificationStack.indexOf(t);r>-1&&e.notificationStack.splice(r,1)},ADD_TO_GROUP(e,t){e.groups[t.id].messageList.push(t.message)},SHOW_GROUP(e,t){e.notificationStack=[e.groups[t],...e.notificationStack]},REMOVE_GROUP(e,t){const r=e.notificationStack.indexOf(t);r>-1&&e.notificationStack.splice(r,1),t.messageList=[]},REGISTER_GROUP(e,t){e.groups[t.id]=t},CLEAR_ALL(e){e.notificationStack=[]}};function CXe(){const e=new IXe;return{namespaced:!0,state:e,getters:{...TXe},actions:{...AXe},mutations:{...$Xe,...tl.mutations(e)}}}class kXe{items={};regPromises={};orderedItems=[];pinned=null;priority=null;visible=[];stackWidth=0;remainingWidth=0;mobileView=!1;reorderable=!0}var V_=(e=>(e.openPanel="openPanel",e.closePanel="closePanel",e.movePanel="movePanel",e.removePanel="removePanel",e.setWidth="setWidth",e.setStackWidth="setStackWidth",e.setMobileView="setMobileView",e.updateVisible="updateVisible",e))(V_||{}),F5=(e=>(e.REGISTER_PANEL="REGISTER_PANEL",e.OPEN_PANEL="OPEN_PANEL",e.ADD_TO_PANEL_ORDER="ADD_TO_PANEL_ORDER",e.ADD_REG_PROMISE="ADD_REG_PROMISE",e.CLOSE_PANEL="CLOSE_PANEL",e.REMOVE_PANEL="REMOVE_PANEL",e.MOVE_PANEL="MOVE_PANEL",e.SET_ORDERED_ITEMS="SET_ORDERED_ITEMS",e.SET_PRIORITY="SET_PRIORITY",e.SET_VISIBLE="SET_VISIBLE",e.SET_WIDTH="SET_WIDTH",e.SET_REMAINING_WIDTH="SET_REMAINING_WIDTH",e))(F5||{});const OXe={getVisible:e=>t=>t==="xs"&&e.visible.length>0?[e.visible.slice().pop()]:e.visible,getRemainingWidth:e=>e.remainingWidth,getRegPromises:e=>t=>{const r=[];return t.forEach(i=>{i in e.regPromises&&r.push(e.regPromises[i].getPromise())}),r}},RXe={openPanel(e,t){e.commit("OPEN_PANEL",t),e.commit("SET_PRIORITY",t),e.dispatch("updateVisible")},closePanel(e,t){e.state.priority===t.panel&&e.commit("SET_PRIORITY",null),e.commit("CLOSE_PANEL",t),e.dispatch("updateVisible")},movePanel(e,t){e.commit("MOVE_PANEL",t),e.dispatch("updateVisible")},removePanel(e,t){e.state.priority===t.panel&&e.commit("SET_PRIORITY",null),e.commit("REMOVE_PANEL",t),e.dispatch("updateVisible")},setWidth(e,t){e.commit("SET_WIDTH",t),e.dispatch("updateVisible")},setStackWidth(e,t){e.commit("SET_STACK_WIDTH",t),e.dispatch("updateVisible")},setMobileView(e,t){e.commit("SET_MOBILE_VIEW",t)},updateVisible(e){let t=e.state.stackWidth;const r=[];for(let i=e.state.orderedItems.length-1;i>=0;i--){let n=e.state.orderedItems[i].width||350;e.state.mobileView?n=t:n+=12,(t>=n&&!e.state.mobileView||r.length===0)&&(t-=n,r.unshift(e.state.orderedItems[i]))}if(e.state.pinned&&!r.includes(e.state.pinned)){let i;for(let a=0;a<r.length-1&&t<(e.state.pinned.width||350);a++)i=r.shift(),t+=i.width||350;t>=(e.state.pinned.width||350)?r.unshift(e.state.pinned):e.state.priority||(i=r.shift(),r.unshift(e.state.pinned));const n=e.state.orderedItems.indexOf(e.state.pinned),s=e.state.orderedItems.indexOf(i),o=e.state.orderedItems.slice();s>-1&&(o.splice(n,1),o.splice(s,0,e.state.pinned)),e.commit("SET_ORDERED_ITEMS",o)}else e.commit("SET_PRIORITY",null);e.commit("SET_REMAINING_WIDTH",t),e.commit("SET_VISIBLE",r)}},PXe={REGISTER_PANEL(e,{panel:t}){if(e.items={...e.items,[t.id]:t},t.id in e.regPromises)e.regPromises[t.id].resolveMe();else{const r=new cs;r.resolveMe(),e.regPromises={...e.regPromises,[t.id]:r}}},OPEN_PANEL(e,{panel:t}){e.orderedItems=[...e.orderedItems,t]},CLOSE_PANEL(e,{panel:t}){const r=e.orderedItems.indexOf(t);r!==-1&&(e.orderedItems=[...e.orderedItems.slice(0,r),...e.orderedItems.slice(r+1)])},MOVE_PANEL(e,{panel:t,direction:r}){const i=e.orderedItems.indexOf(t),n=r==="right"?1:-1;e.visible.includes(e.orderedItems[i+n])&&([e.orderedItems[i],e.orderedItems[i+n]]=[e.orderedItems[i+n],e.orderedItems[i]])},REMOVE_PANEL(e,{panel:t}){e.items[t.id]!==void 0&&delete e.items[t.id],e.regPromises[t.id]!==void 0&&delete e.regPromises[t.id];const r=e.visible.indexOf(t);r!==-1&&(e.visible=[...e.visible.slice(0,r),...e.visible.slice(r+1)]),e.pinned!==null&&e.pinned.id==t.id&&(e.pinned=null)},ADD_REG_PROMISE(e,t){e.regPromises={...e.regPromises,[t]:new cs}}};function LXe(){const e=new kXe;return{namespaced:!0,state:e,getters:{...OXe},actions:{...RXe},mutations:{...PXe,...tl.mutations(e)}}}function NXe(){return wXe({plugins:[kGe.plugin],modules:{config:rqe(),fixture:MXe(),layer:QGe(),mapcaption:HGe(),maptip:bWe(),notification:CXe(),panel:LXe()}})}const Gc="focus-list",km="focus-item",DXe="focus-container",hv=`[${Gc}],[${DXe}]`,ZE="truncate-text",KE="show-truncate",q1="focused",uhe=`button,input,select,a,textarea,[contenteditable],[${Gc}]`,FXe={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(Gc,!0),new jXe(e,t.value)},updated(e){che(e)}};function che(e){e.querySelectorAll(uhe).forEach(r=>{if(r.closest(hv)===e||r.closest(hv)===r&&r.parentElement.closest(hv)===e)if(r.closest(`[${Gc}],.${q1}`).classList.contains(q1))r.setAttribute("tabindex","0");else{r.setAttribute("tabindex","-1");return}})}class jXe{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(t,r){this.element=t,this.highlightedItem=this.element,this.isHorizontal=r==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const i=this;t.addEventListener("keydown",function(n){i.onKeydown(n)}),t.addEventListener("click",function(n){i.onClick(n)}),t.addEventListener("focus",function(n){i.onFocus()}),t.addEventListener("blur",function(n){i.onBlur()}),t.addEventListener("mousedown",function(n){i.onMousedown()}),t.addEventListener("touchstart",function(n){i.onTouchstart()})}setTabIndex(t,r=this.element){r.querySelectorAll(uhe).forEach(n=>{(t===-1||n.closest(hv)===this.element||n.closest(hv)===n&&n.parentElement.closest(hv)===this.element||n.closest(`[${Gc}],.${q1}`).classList.contains(q1))&&n.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(q1),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(km)===KE&&t.querySelector(`[${ZE}]`)?._tippy?.hide()}focusItem(t){t.classList.add(q1),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&!this.isTapped&&t._tippy.show(),t.getAttribute(km)===KE&&t.querySelector(`[${ZE}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,r=!1){if(this.defocusItem(this.highlightedItem),r)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const r=this,i=Array.prototype.filter.call(this.element.querySelectorAll(`[${km}]`),n=>n.closest(`[${Gc}]`)===r.element&&!!n.offsetParent);if(i.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break}}onClick(t){this.defocusItem(this.highlightedItem);let r=t.target;if(!r.hasAttribute(Gc))for(;r.parentElement.closest(`[${Gc}]`)!==this.element;)r=r.parentElement.closest(`[${Gc}]`);this.highlightedItem=r.closest(`[${km}]`)||r.closest(`[${Gc}]`)||this.highlightedItem,r.hasAttribute(`${km}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(km)===KE&&this.highlightedItem.querySelector(`[${ZE}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element||this.setAriaActiveDescendant(this.highlightedItem),che(this.element)}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(km)===KE&&this.highlightedItem.querySelector(`[${ZE}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const LJ="focus-item",UXe={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",VXe()),t.value?e.setAttribute(LJ,t.value):e.toggleAttribute(LJ,!0)}};function VXe(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const ej="focus-container",hhe="focus-list",Dk=`[${hhe}],[${ej}]`,Fk=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${hhe}],[${ej}]`;let jk=[];const BXe={mounted(e,t){jk.push(new zXe(e,t.value))},beforeUnmount(e){jk=jk.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class zXe{element;constructor(t,r){this.element=t,this.element.toggleAttribute(ej,!0),this.element.tabIndex=0,this.disableTabbing();const i=this;this.element.addEventListener("keypress",function(n){i.onKeypress(n)}),this.element.addEventListener("click",function(){i.onClick()}),this.element.addEventListener("focusout",function(n){i.onFocusOut(n)}),this.element.addEventListener("focus",function(n){i.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(r){t.onKeypress(r)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(r){t.onFocusOut(r)}),this.element.removeEventListener("focus",function(r){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&(this.enableTabbing(),this.element.querySelector(Fk).focus())}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(Fk),r=>!0).forEach(r=>{r.tabIndex=-1})}enableTabbing(){Array.prototype.map.call(this.element.querySelectorAll(Fk),t=>{(t.closest(Dk)===this.element||t.closest(Dk)===t&&t.parentElement.closest(Dk)===this.element)&&!!t.offsetParent&&(t.tabIndex=0)})}}const GXe="truncate-text",qXe="truncate-trigger",HXe={beforeMount(e){e.classList.contains("truncate")||e.classList.add("truncate"),e.toggleAttribute(GXe,!0)},mounted(e,t){let r;t.value&&t.value.externalTrigger&&(r=e.closest(`[${qXe}]`)),K7(e,{content:e.textContent,onShow:WXe,placement:"bottom-start",triggerTarget:r,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(e.textContent),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function WXe(e){if(e.reference.clientWidth>=e.reference.scrollWidth)return!1}const JXe=Ar({name:"PanelScreenV",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0}},data(){return{temporary:this.$iApi.fixture.get("appbar")?this.$store.get("appbar/temporary"):[],mobileView:this.get("panel/mobileView"),reorderable:this.get("panel/reorderable")}},methods:{checkMode(){return!this.mobileView},move(e){this.panel.move(e),e==="left"&&this.$nextTick(()=>{this.$el.querySelector(".move-left").focus()})}}}),ZXe=["content"],KXe={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden",tabindex:"-1"},YXe={class:"flex-grow text-lg py-16 pl-8 min-w-0"},QXe={class:"display-none sm:flex"},XXe={key:1,class:"p-8 flex-grow overflow-y-auto"},eet={key:2,class:"px-16 py-16 border-t border-gray-400 default-focus-style"};function tet(e,t,r,i,n,s){const o=Lr("back"),a=Lr("panel-options-menu"),l=Lr("left"),u=Lr("right"),c=Lr("pin"),p=Lr("expand"),d=Lr("minimize"),m=Lr("close"),g=ci("truncate"),b=ci("focus-item"),v=ci("tippy");return ti((pt(),Ct("div",{class:"h-full flex flex-col items-stretch",content:e.$t("panels.access")},[e.header?(pt(),Ct("header",KXe,[ar(o,{class:"block sm:display-none",onClick:t[0]||(t[0]=_=>e.panel.close())}),ti((pt(),Ct("h2",YXe,[Pu(e.$slots,"header")])),[[g]]),e.$slots.controls?(pt(),Vi(a,{key:0},{default:dn(()=>[Pu(e.$slots,"controls")]),_:3})):Tr("v-if",!0),ut("div",QXe,[e.reorderable?(pt(),Vi(l,{key:0,onClick:t[1]||(t[1]=_=>e.move("left")),active:!e.panel.isLeftMostPanel},null,8,["active"])):Tr("v-if",!0),e.reorderable?(pt(),Vi(u,{key:1,onClick:t[2]||(t[2]=_=>e.move("right")),active:!e.panel.isRightMostPanel},null,8,["active"])):Tr("v-if",!0),ar(c,{onClick:t[3]||(t[3]=_=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(pt(),Vi(p,{key:2,onClick:t[4]||(t[4]=_=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):Tr("v-if",!0),e.panel.button&&e.temporary?.includes(e.panel.id)?(pt(),Vi(d,{key:3,onClick:t[5]||(t[5]=_=>e.panel.minimize())})):Tr("v-if",!0),ar(m,{onClick:t[6]||(t[6]=_=>e.panel.close())})])])):Tr("v-if",!0),e.content?(pt(),Ct("div",XXe,[Pu(e.$slots,"content")])):Tr("v-if",!0),e.footer?ti((pt(),Ct("div",eet,[Pu(e.$slots,"footer")])),[[b]]):Tr("v-if",!0)],8,ZXe)),[[v,{trigger:"focus",appendTo:"parent",onShow:e.checkMode,popperOptions:{modifiers:[{name:"preventOverflow",options:{altAxis:!0}}]}}]])}var ret=li(JXe,[["render",tet],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-screen.vue"]]);const iet=Ar({name:"PinV",props:{active:{type:Boolean}}}),net={class:"relative",tabindex:"-1"},set=["content"],oet=["transform"],aet=ut("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1),uet=[aet];function cet(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",net,[ti((pt(),Ct("button",{type:"button",class:In(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t(this.active?"panels.controls.unpin":"panels.controls.pin")},[(pt(),Ct("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},uet,8,oet))],10,set)),[[o,{placement:"bottom",hideOnClick:!1}]])])}var het=li(iet,[["render",cet],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/pin.vue"]]);const pet=Ar({name:"CloseV",props:{active:Boolean}}),det={class:"relative",tabindex:"-1"},fet=["content"],met=ut("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[ut("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),yet=[met];function get(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",det,[ti((pt(),Ct("button",{type:"button",class:In(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t("panels.controls.close")},yet,10,fet)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var vet=li(pet,[["render",get],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/close.vue"]]);const bet=Ar({name:"BackV",props:{active:{type:Boolean}}}),wet={class:"relative",tabindex:"-1"},_et=["content"],xet=ut("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[ut("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1),Eet=[xet];function Met(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",wet,[ti((pt(),Ct("button",{type:"button",class:In(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t("panels.controls.back")},Eet,10,_et)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var Iet=li(bet,[["render",Met],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/back.vue"]]);const Tet=Ar({name:"ExpandV",props:{active:Boolean}}),Aet={class:"w-32 h-32"},$et=["content"],Cet={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},ket=ut("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Oet=ut("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ret=ut("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1),Pet=[ket,Oet,Ret],Let=FF('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-24 w-24 fill-current transform rotate-90"><path d="M0 0h24v24H0z" fill="none"></path><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"></path><path d="M4 12h16v2H4z"></path></svg>',1);function Net(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",Aet,[ti((pt(),Ct("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:e.$t(`panels.controls.${e.active?"collapse":"expand"}`)},[Tr(" EXPAND https://fonts.google.com/icons?selected=Material%20Icons%3Aexpand%3A "),e.active?(pt(),Ct(Xr,{key:1},[Tr(" Collapse/shrink/compress/etc. https://fonts.google.com/icons?selected=Material%20Icons%3Acompress%3A "),Let],2112)):(pt(),Ct("svg",Cet,Pet))],8,$et)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}var Det=li(Tet,[["render",Net],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/expand.vue"]]);const Fet=Ar({name:"MinimizeV",props:{active:{type:Boolean}}}),jet={class:"relative",tabindex:"-1"},Uet=["content"],Vet=ut("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ut("path",{d:"M0 0h24v24H0V0z",fill:"none"}),ut("path",{d:"M6 19h12v2H6z"})],-1),Bet=[Vet];function zet(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",jet,[ti((pt(),Ct("button",{type:"button",class:In(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:e.$t("panels.controls.minimize")},Bet,10,Uet)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var Get=li(Fet,[["render",zet],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/minimize.vue"]]);const qet=Ar({name:"RightV",props:{active:Boolean}}),Het={class:"relative",tabindex:"-1"},Wet=["content"],Jet=["aria-label"],Zet=ut("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"},null,-1),Ket=[Zet];function Yet(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",Het,[ti((pt(),Ct("button",{type:"button",class:In(["p-8",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:e.$t("panels.controls.moveRight")},[(pt(),Ct("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":e.$t("panels.controls.moveRight")},Ket,8,Jet))],10,Wet)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var Qet=li(qet,[["render",Yet],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/right.vue"]]);const Xet=Ar({name:"LeftV",props:{active:Boolean}}),ett={class:"relative",tabindex:"-1"},ttt=["content"],rtt=["aria-label"],itt=ut("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"},null,-1),ntt=[itt];function stt(e,t,r,i,n,s){const o=ci("tippy");return pt(),Ct("div",ett,[ti((pt(),Ct("button",{type:"button",class:In(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:e.$t("panels.controls.moveLeft")},[(pt(),Ct("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16","aria-label":e.$t("panels.controls.moveLeft")},ntt,8,rtt))],10,ttt)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var ott=li(Xet,[["render",stt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/left.vue"]]);const att=Ar({name:"PanelOptionsMenuV",components:{"dropdown-menu":ZA},data(){return{open:!1}}}),ltt=e=>(qp("data-v-ec89ea3a"),e=e(),Hp(),e),utt=ltt(()=>ut("div",{class:"p-6"},[ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[ut("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1));function ctt(e,t,r,i,n,s){const o=Lr("dropdown-menu");return pt(),Vi(o,{class:"flex",tooltip:e.$t("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:dn(()=>[utt]),default:dn(()=>[Pu(e.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"])}var htt=li(att,[["render",ctt],["__scopeId","data-v-ec89ea3a"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/panel-options-menu.vue"]]);const ptt=Ar({name:"FullscreenNavV",methods:{onClick(){this.$iApi.toggleFullscreen()}}}),dtt={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},ftt=ut("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),mtt=ut("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1),ytt=[ftt,mtt],gtt={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},vtt=ut("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),btt=ut("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1),wtt=[vtt,btt];function _tt(e,t,r,i,n,s){const o=Lr("mapnav-button");return pt(),Vi(o,{onClickFunction:e.onClick,tooltip:e.$t("mapnav.fullscreen")},{default:dn(()=>[e.$iApi.isFullscreen?(pt(),Ct("svg",dtt,ytt)):(pt(),Ct("svg",gtt,wtt))]),_:1},8,["onClickFunction","tooltip"])}var xtt=li(ptt,[["render",_tt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/buttons/fullscreen-nav.vue"]]);const Stt=Ar({name:"GeolocatorNavV",data(){return{geolocation:[]}},methods:{async geolocate(){if(this.geolocation.length)this.zoomIn(this.geolocation);else{const e=await this.browserLocate({maximumAge:1/0,timeout:5e3}).catch(t=>{t.code===GeolocationPositionError.PERMISSION_DENIED?this.$iApi.notify.show(Lf.ERROR,this.$iApi.$vApp.$t("mapnav.geolocator.error.permission")):this.$iApi.notify.show(Lf.ERROR,this.$iApi.$vApp.$t("mapnav.geolocator.error.internal"))});e&&(this.geolocation=[e.coords.longitude,e.coords.latitude],this.zoomIn(this.geolocation))}},zoomIn(e){let t=new En("geolocation",e,Ir.latLongSR(),!0);this.$iApi.geo.map.zoomMapTo(t)},browserLocate(e){return new Promise((t,r)=>navigator.geolocation.getCurrentPosition(t,r,e))}}}),Ett=ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[ut("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1);function Mtt(e,t,r,i,n,s){const o=Lr("mapnav-button");return pt(),Vi(o,{onClickFunction:e.geolocate,tooltip:e.$t("mapnav.geolocator")},{default:dn(()=>[Ett]),_:1},8,["onClickFunction","tooltip"])}var Itt=li(Stt,[["render",Mtt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/buttons/geolocator-nav.vue"]]);const Ttt=Ar({name:"HomeNavV",methods:{goToHome(){const e=this.$iApi.geo.map.getExtentSet();this.$iApi.geo.map.zoomMapTo(e.fullExtent)}}}),Att=ut("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[ut("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),ut("path",{d:"M0 0h24v24H0z",fill:"none"})],-1);function $tt(e,t,r,i,n,s){const o=Lr("mapnav-button");return pt(),Vi(o,{onClickFunction:e.goToHome,tooltip:e.$t("mapnav.home")},{default:dn(()=>[Att]),_:1},8,["onClickFunction","tooltip"])}var Ctt=li(Ttt,[["render",$tt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/buttons/home-nav.vue"]]);const ktt=Ar({name:"MapnavButtonV",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}}}),Ott={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},Rtt=["content"];function Ptt(e,t,r,i,n,s){const o=ci("focus-item"),a=ci("tippy");return pt(),Ct("div",Ott,[ti((pt(),Ct("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:t[0]||(t[0]=l=>e.onClickFunction()),content:e.tooltip},[Pu(e.$slots,"default")],8,Rtt)),[[o],[a,{placement:"left"}]])])}var Ltt=li(ktt,[["render",Ptt],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/button.vue"]]);const Ntt=Ar({name:"AppbarButtonV",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},methods:{onClick(){this.$iApi.event.emit("appbar/click",this.id)}}}),Dtt={class:"relative",tabindex:"-1"},Ftt=["content"];function jtt(e,t,r,i,n,s){const o=ci("focus-item"),a=ci("tippy");return pt(),Ct("div",Dtt,[ti((pt(),Ct("button",{type:"button",class:"py-6 w-full h-full",onClick:t[0]||(t[0]=()=>{e.onClickFunction(),e.onClick()}),content:e.tooltip},[Pu(e.$slots,"default",{},void 0,!0)],8,Ftt)),[[o],[a,{placement:"right"}]])])}var Utt=li(Ntt,[["render",jtt],["__scopeId","data-v-0b6ee534"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/button.vue"]]);class Vtt{fixture;panel;event;geo;notify;startRequired;ui;started=!1;$vApp;$element;_isFullscreen;constructor(t,r,i){console.log(`RAMP v4.0.0 [${"5deedf03a112543bbc0459d52a20e9983901ab60".slice(0,9)}] (Built on ${new Date("Fri Dec 9 09:41:32 2022 -0500".toString()).toLocaleString()})`),i?.startRequired?this.startRequired=!0:this.startRequired=!1,this.event=new lqe(this);const n=Btt(t,this);this.$vApp=n.app,this.$element=n.element,this.fixture=new nst(this),this.panel=new sst(this),this.geo=new rst(this),this.ui={maptip:this.geo.map.maptip},this.notify=new SZe(this),this._isFullscreen=yc.isEnabled&&!!this.$vApp.$root&&yc.isFullscreen&&yc.element===this.$vApp.$root.$el,yc.isEnabled&&yc.onchange(()=>{this._isFullscreen=yc.isEnabled&&!!this.$vApp.$root&&yc.isFullscreen&&yc.element===this.$vApp.$root.$el}),this.initialize(r,i)}initialize(t,r){if(t?.configs!==void 0){const i=t.configs,n=i[this.$vApp.$i18n.locale]??i[Object.keys(i)[0]];this.$vApp.$store.set(Os.newConfig,n),this.$vApp.$store.set(Os.registerConfig,{config:n,configLangs:Object.keys(i),allLangs:Object.keys(this.$vApp.$i18n.messages)});for(const o in i)this.$vApp.$store.set(Os.registerConfig,{config:i[o],configLangs:[o]});this.$vApp.$store.set(Os.setActiveBasemap,n.map.basemaps.find(o=>o.id===n.map.initialBasemapId));const s=this.$vApp.$el.querySelector("#esriMap");if(this.geo.map.createMap(n.map,s),s._tippy.hide(0),this.$vApp.$store.set(Tu.setMaptipInstance,s._tippy),n.layers&&n.layers.length>0&&n.layers.map(o=>{const a=this.geo.layer.createLayer(o);return this.geo.map.addLayer(a),a}).filter(Boolean).forEach((o,a)=>{o?.loadPromise().then(()=>{o?.isLoaded&&this.geo.map.reorder(o,a)}).catch(()=>console.error(`Failed to add/reorder layer: ${o.id}.`))}),n.panels){if(n.panels.open&&n.panels.open.length>0){const a=n.panels.open.map(l=>l.id);this.panel.isRegistered(a).then(()=>{n.panels?.open?.forEach(l=>{this.panel.open({id:l.id,screen:l.screen}),l.pin&&this.panel.pin(l.id)})})}const o=n.panels.reorderable??!0;this.$vApp.$store.set("panel/reorderable",o)}!n.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),n.system?.proxyUrl&&(this.geo.proxy=n.system.proxyUrl)}r||(r={}),(r.loadDefaultFixtures!==!1||t?.startingFixtures!==void 0)&&this.fixture.addDefaultFixtures(t?.startingFixtures),r.loadDefaultEvents!==!1&&this.event.addDefaultEvents()}reload(t,r){Object.keys(this.$vApp.$store.get("fixture/items")).forEach(n=>{this.fixture.get(n)!==void 0&&this.fixture.remove(n)}),this.geo.map.destroyMap(),this.event.offAll(),t===void 0&&(t=JSON.parse(JSON.stringify({startingFixtures:this.$vApp.$store.get(Os.getStartingFixtures),configs:this.$vApp.$store.get(Os.getRegisteredConfigs)}))),this.$vApp.$store.set("notification/clearAll!",{}),this.geo.map.maptip.clear(),this.started=!1,this.initialize(t,r)}component(t,r){if(r){const i=this.$element.component(t,r);return this.event.emit(Wt.COMPONENT,t),i}return this.$element.component(t)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const t=this.$vApp.$root.$refs["app-size"].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=this.$vApp.$i18n.locale;return JSON.parse(JSON.stringify(this.$vApp.$store.get(Os.getActiveConfig,t)))}setLanguage(t){if(this.$vApp.$i18n.locale===t)return;const r=this.$vApp.$store.get(Os.getRegisteredLangs);if(r[t]===r[this.$vApp.$i18n.locale]){this.$vApp.$i18n.locale=t;return}this.$vApp.$i18n.locale=t;const i=this.getConfig();this.$vApp.$iApi.event.emit(Wt.CONFIG_CHANGE,i),this.reload()}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){yc.isEnabled&&yc.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}updateAlert(t){const r=this.$vApp.$el.querySelector(".screen-reader-alert");r.childNodes.length>0&&(r.innerHTML="");const i=document.createElement("span");i.setAttribute("role","alert");const n=document.createTextNode(t);i.appendChild(n),r.insertBefore(i,null)}start(){!this.started&&this.startRequired?(this.event.emit(Wt.MAP_START),this.started=!0):this.started&&console.warn("start has already been called")}}function Btt(e,t){const r=NXe(),i=pWe(),n=OA(eXe).use(r).use(i).use(ZQe,{directive:"tippy",component:"tippy"}).use(dWe).use(fWe);n.directive("focus-container",BXe),n.directive("focus-list",FXe),n.directive("focus-item",UXe),n.directive("truncate",HXe),n.component("panel-screen",ret),n.component("pin",het),n.component("close",vet),n.component("back",Iet),n.component("expand",Det),n.component("panel-options-menu",htt),n.component("dropdown-menu",ZA),n.component("minimize",Get),n.component("right",Qet),n.component("left",ott),n.component("fullscreen-nav-button",xtt),n.component("geolocator-nav-button",Itt),n.component("home-nav-button",Ctt),n.component("mapnav-button",Ltt),n.component("appbar-button",Utt),n.config.globalProperties.$store=r,n.config.globalProperties.$iApi=t;const s=n.mount(e);return{element:n,app:s}}class ztt{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new jf({baseLayers:t.layers.map(r=>{if(r.layerType===Cr.TILE)return new Z9({url:r.url,opacity:r.opacity});if(r.layerType===Cr.MAPIMAGE)return new W9({url:r.url,opacity:r.opacity});if(r.layerType===Cr.OSM)return new J9({opacity:r.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${r.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t||""}get description(){return this.config.description}set description(t){this.config.description=t||""}get altText(){return this.config.altText}set altText(t){this.config.altText=t||""}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}}class Gtt extends Bn{esriMap;_basemapStore;created=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new cs,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}createMap(t,r){this._basemapStore=t.basemaps.map(n=>new ztt(n));const i={};t.initialBasemapId&&(i.basemap=Bt(this.findBasemap(t.initialBasemapId).esriBasemap)),this.esriMap=vs(new Yte(i)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=r,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,r){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,r)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new cs,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const r=this._basemapStore.find(i=>i.id===t);if(r)return r;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Bt(r.esriBasemap)}setBasemap(t){return this.abstractError(),!1}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,r,i=!0){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const n=await this.geomToMapSR(t),s={target:this.$iApi.geo.geom.geomRampToEsri(n)};n.type===br.POINT&&(s.scale=r||this.pointZoomScale);const o={animate:i};if(this.esriView)return this.esriView.goTo(s,o)}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?un.fromESRI(this.esriView.extent):(this.noMapErr(),un.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),bx.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Ir.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class qtt extends Bn{constructor(t){super(t)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const r=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!r){this.#e=void 0,this.clear();return}if(this.#e&&this.#e.layerId===r.layerId&&this.#e.oid===r.oid&&this.#e.layerIdx===r.layerIdx)return;this.#e=r,this.clear();const i=this.$iApi.geo.layer.getLayer(r.layerId);if(!i){console.error(`graphic hit test returned non-existent layer id: ${r.layerId}`);return}if(!i.hovertips)return;const n=await i.getIcon(r.oid),s=await i.getGraphic(r.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(Wt.MAP_GRAPHICHIT,{layer:i,graphicHit:r,attributes:s.attributes,icon:n,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="truncate">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.$iApi.$vApp.$store.set(Tu.setMaptipPoint,void 0),this.$iApi.$vApp.$store.set(Tu.setMaptipContent,"")}getInstance(){return this.$iApi.$vApp.$store.get(Tu.maptipInstance)}getPoint(){return this.$iApi.$vApp.$store.get(Tu.maptipPoint)}setPoint(t){this.$iApi.$vApp.$store.set(Tu.setMaptipPoint,t)}setContent(t){this.$iApi.$vApp.$store.set(Tu.setMaptipContent,t)}}class Htt extends Bn{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!!t){if(t.mapCoords.disabled)this.$iApi.$vApp.$store.set(Ps.setCoords,{disabled:!0});else{const r=t.mapCoords.formatter;r!==void 0&&this.setPointFormatter(r)}if(t.scaleBar.disabled)this.$iApi.$vApp.$store.set(Ps.setScale,{disabled:!0});else{const r=t.scaleBar.imperialScale;r!==void 0&&(this.$iApi.$vApp.$store.set(Ps.toggleScale,r),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}}}updateAttribution(t){const r={text:{value:"Powered by ESRI"},logo:{altText:"ESRI logo",link:"https://www.esri.com/",value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"}};if(t&&(t.logo.disabled||(r.logo.altText=t.logo.altText||r.logo.altText,r.logo.link=t.logo.link||r.logo.link,r.logo.value=t.logo.value||r.logo.value),t.text.disabled||(r.text.value=t.text.value||r.text.value),this.$iApi.$vApp.$store.set(Ps.setAttribution,r)),!t||t.text.disabled){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let i="";const n=5e3,s=20,o=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(a=>new Promise((l,u)=>{let c=0;const p=n/s,d=setInterval(function(){a.loaded&&!a.loadError?(clearInterval(d),l(a)):c>p&&(clearInterval(d),l(null)),c++},s)})).toArray();Promise.all(o).then(a=>{i=a.filter(l=>l?.copyright).map(l=>l.copyright).join(" | "),r.text.value=i||r.text.value,this.$iApi.$vApp.$store.set(Ps.setAttribution,r)})}}updateScale(){const t=this.$iApi.$vApp.$store.get(Ps.scale);if(t?.disabled)return;const r=t?.isImperialScale||!1,i=this.scaleHelper().find(n=>n.isImperialScale===r)??{isImperialScale:!1,units:"error",pixels:1,distance:1};this.$iApi.$vApp.$store.set(Ps.setScale,{width:`${i.pixels}px`,label:`${this.$iApi.$vApp.$n(i.distance,"number")}${i.units}`,isImperialScale:r})}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,r=this.$iApi.geo.map.getResolution(),i=[],n=r*t,s=1609.34,o=3.28084,a=n>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(i.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),n>1e3){const c=r*t/(u?s:1e3),p=Math.round(c).toString().length,d=Math.pow(10,p-1);i[l].distance=Math.ceil(c/d)*d,i[l].pixels=i[l].distance*(u?s:1e3)/r}else i[l].distance=Math.ceil(u?n*o:n),i[l].pixels=n/r}return i}wrapValue(t,r,i){return((t-r)%(i-r)+(i-r))%(i-r)+r}async formatLatLongDMS(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.floor(Math.abs((i-o)*60)),l=Math.floor((Math.abs(i)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(n))*(n<0?-1:1),c=Math.floor(Math.abs((n-u)*60)),p=Math.floor((Math.abs(n)-Math.abs(u)-c/60)*3600);return`${this.$iApi.$vApp.$n(Math.abs(o),"number")}${s} ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$vApp.$n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(Math.abs(u),"number")}${s} ${this.$iApi.$vApp.$n(c,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$vApp.$n(p,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDDM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.abs((i-o)*60),l=Math.floor(Math.abs(n))*(n<0?-1:1),u=Math.abs((n-l)*60);return`${this.$iApi.$vApp.$n(Math.abs(o),"number")}${s} ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(Math.abs(l),"number")}${s} ${this.$iApi.$vApp.$n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDD(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.abs(i),a=Math.abs(n);return`${this.$iApi.$vApp.$n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatMercator(t){const r=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$vApp.$n(Math.floor(r.x),"number")} m | ${this.$iApi.$vApp.$n(Math.floor(r.y),"number")} m`}async formatLambert(t){const r=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$vApp.$n(Math.abs(Math.floor(r.x)),"number")} m ${this.$iApi.$vApp.$t("map.coordinates."+(0>r.x?"west":"east"))} | ${this.$iApi.$vApp.$n(Math.abs(Math.floor(r.y)),"number")} m ${this.$iApi.$vApp.$t("map.coordinates."+(r.y>0?"north":"south"))}`}async formatUTM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=Math.ceil((n+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+s),t);return`${this.$iApi.$vApp.$n(s,"number",{minimumIntegerDigits:2})} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} ${this.$iApi.$vApp.$n(Math.floor(o.x),"number")} m${this.$iApi.$vApp.$t("map.coordinates.east")} | ${this.$iApi.$vApp.$n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$vApp.$t("map.coordinates.north")}`}async formatBasemap(t){const r=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$vApp.$n(r.x,"number")} | ${this.$iApi.$vApp.$n(r.y,"number")}`}}class Wtt extends Gtt{maptip;caption;mapMouseThrottle;constructor(t){super(t),this.maptip=new qtt(t),this.caption=new Htt(t),this.mapMouseThrottle=0}createMap(t,r){this.setMapMouseThrottle(t.mapMouseThrottle??0),super.createMap(t,r),this.$iApi.event.emit(Wt.MAP_CREATED)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayers().map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(Wt.MAP_DESTROYED)}createMapView(t){const r=this.$iApi.$vApp.$store.get(Os.getMapConfig);if(!r)throw new Error("Attempted to create map view without a map config");const i=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(r.initialBasemapId);this.applyBasemap(i);const n=r.tileSchemas.find(a=>a.id===i.tileSchemaId);if(!n)throw new Error(`Could not find tile schema for the given basemap id: ${i.id}`);const s=r.extentSets.find(a=>a.id===n.extentSetId);if(!s)throw new Error(`Could not find extent set with the given id: ${n.extentSetId}`);this._rampExtentSet=bx.fromConfig(s),this._rampSR=this._rampExtentSet.sr.clone();const o=r.lodSets.find(a=>a.id===n.lodSetId);if(!o)throw new Error(`Could not find lod set with the given id: ${n.lodSetId}`);this.esriView=vs(new YLe({map:this.esriMap,container:this._targetDiv,constraints:{lods:o.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",a=>{const l=this.$iApi.geo.geom.geomEsriToRamp(a,"map_extent_event");this.$iApi.event.emit(Wt.MAP_EXTENTCHANGE,l),this.$iApi.event.emit(Wt.FILTER_CHANGE,{extent:l,filterKey:Nf.EXTENT})})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",a=>{this.$iApi.event.emit(Wt.MAP_SCALECHANGE,a)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",a=>{this.$iApi.event.emit(Wt.MAP_RESIZED,{height:a.height,width:a.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",a=>{this.$iApi.event.emit(Wt.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",a=>{this.$iApi.event.emit(Wt.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",CT(100,!0,a=>{this.$iApi.event.emit(Wt.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",CT(100,a=>{this.$iApi.event.emit(Wt.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",a=>{this.$iApi.event.emit(Wt.MAP_MOUSEDOWN,a.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",a=>{this.$iApi.event.emit(Wt.MAP_KEYDOWN,a.native),a.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",a=>{this.$iApi.event.emit(Wt.MAP_KEYUP,a.native),a.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",a=>{this.$iApi.event.emit(Wt.MAP_FOCUS,a.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",a=>{this.$iApi.event.emit(Wt.MAP_BLUR,a.native)})}),this.esriView.container.addEventListener("touchmove",a=>{a.preventDefault()}),this._viewPromise.resolveMe(),this.created=!0}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Bt(r.esriBasemap),this.$iApi.$vApp.$store.set(Os.setActiveBasemap,r.config)}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const r=this.findBasemap(t),n=this.$iApi.$vApp.$store.get(Os.getActiveBasemapConfig).tileSchemaId!==r.tileSchemaId;if(n){const s=this.getExtent();this._viewPromise=new cs,this.created=!1,this.$iApi.event.emit(Wt.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(r),this.$iApi.event.emit(Wt.MAP_REFRESH_END),this.$iApi.geo.proj.projectExtent(this._rampSR,s).then(o=>this.zoomMapTo(o))}else this.applyBasemap(r);return this.$iApi.event.emit(Wt.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n}),n}addLayer(t,r=void 0){return new Promise((i,n)=>{this.esriMap||(this.noMapErr(),n()),t.initiationState!==ka.INITIATING&&t.initiationState!==ka.INITIATED&&t.layerState!==co.ERROR&&t.initiate();let s=0;const o=setInterval(()=>{s+=250,s>=2e4||t.layerState===co.ERROR?(clearInterval(o),this.$iApi.$vApp.$store.set(Lo.addErrorLayers,[t]),t.updateLayerState(co.ERROR),n()):t.initiationState===ka.INITIATED&&t.esriLayer&&(clearInterval(o),this.esriMap?.add(t.esriLayer),this.$iApi.$vApp.$store.set(Lo.addLayers,[t]),r!==void 0&&this.reorder(t,r),this.$iApi.event.emit(Wt.LAYER_REGISTERED,t),i())},250)})}reorder(t,r,i=!1){if(!this.esriMap){this.noMapErr();return}if(t.esriLayer){if(i&&t.isCosmetic)return;const n=this.$vApp.$store.get(Lo.layers),s=n.slice(0,r+1).filter(a=>!this.esriMap.layers.find(l=>l.id===a.id)).length,o=this.esriMap.layers.indexOf(this.esriMap.layers.filter(a=>{const l=n.find(u=>u.id===a.id);return!!l&&!(i&&l.isCosmetic)}).slice(0,r+1-s).pop());this.esriMap.reorder(t.esriLayer,o),this.$vApp.$store.set(Lo.reorderLayer,{layer:t,index:r}),this.$iApi.event.emit(Wt.MAP_REORDER,{layer:t,newIndex:r})}else console.error("Attempted reorder without an esri layer. Likely layer.initiate() was not called or had not finished.")}removeSublayer(t){let r,i;if(typeof t=="string")r=t,i=this.$iApi.geo.layer.getLayer(r);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);r=t.uid,i=t}if(!i)throw new Error("Sublayer could not be found for removal.");this.$iApi.event.emit(Wt.LAYER_REMOVE,t),i.visibility=!1,i.isRemoved=!0,i.parentLayer?.sublayers.every(n=>n.isRemoved)&&this.removeLayer(i.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let r;if(t instanceof jT?r=t:r=this.$iApi.geo.layer.getLayer(t),!r)throw new Error("Layer could not be found for removal.");if(r.isSublayer){this.removeSublayer(r);return}if(!r.esriLayer)throw new Error("Attempted to remove layer from the map without an esri layer. Likely layer.initiate() was not called or had not finished.");r.supportsSublayers&&r.sublayers.some(i=>!i.isRemoved)&&r.sublayers.forEach(i=>this.removeSublayer(i)),r.terminate(),this.$iApi.$vApp.$store.set(Lo.removeLayer,r),this.$iApi.$vApp.$store.set(Lo.removeLayerConfig,r.id),this.esriMap.remove(r.esriLayer),r.isRemoved=!0,this.$iApi.event.emit(Wt.LAYER_REMOVE,r)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const r=this.handlers.findIndex(i=>i.type==="pointer-move");if(r!==-1){const i=this.handlers[r];this.handlers.splice(r,1),i.handler.remove()}return r!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return eg(this.mapMouseThrottle,t=>{this.$iApi.event.emit(Wt.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const r=t.isOffScale(this.getScale());if(!r.offScale)return;const i=this.esriView.constraints.lods;if(!i)return this.zoomMapTo(this.getExtent().center(),(r.zoomIn,t.minScale));const n=r.zoomIn?i:[...i].reverse(),s=n.find(o=>r.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||n[n.length-1];return this.zoomToLevel(s.level)}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?En.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new En("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const r=this.esriView.toScreen(t.toESRI());return{screenX:r.x,screenY:r.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){const r=this.$vApp.$store.get(Lo.layers);let i;if(t instanceof En){const u=this.mapPointToScreenPoint(t);i={mapPoint:t,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else i=t;if(r===void 0)return{click:i,results:[]};let n=Promise.resolve([]);r.some(u=>u.canIdentify()&&(u.identifyMode===Fn.HYBRID||u.identifyMode===Fn.SYMBOLIC))&&(n=this.esriView.hitTest({x:i.screenX,y:i.screenY}).then(u=>u.results.map(c=>({layerId:c.layer.id,layerIdx:0,oid:c.graphic.getObjectId()}))));const s={geometry:i.mapPoint,hitTest:n},o=r.filter(u=>u.supportsIdentify).map(u=>(s.tolerance=i.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(s))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:i};return this.$iApi.event.emit(Wt.MAP_IDENTIFY,l),l}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}const r=this.$vApp.$store.get(Lo.layers)?.slice(0);if(r===void 0)return;r.reverse();const i=await this.esriView.hitTest({x:t.screenX,y:t.screenY});if(i.results.length===0)return;let n;if(r.some(s=>{const o=i.results.find(a=>a.graphic.layer.id===s.id);if(o){if(s.isCosmetic)return!0;n=s}return o!==void 0}),n){n.sublayers.length>1&&console.warn("Found layer with sublayers during hitTest"),n.drawOrder.length===0&&console.warn("Found layer with no draw order during hitTest");let s=i.results.filter(c=>c.graphic.layer.id===n.id);const o=(c,p)=>c===p?0:c>p?1:-1;let a=[],l;if(n.drawOrder.some((c,p)=>(a=[s.pop()],l=a[0].graphic.attributes[c.field],s.forEach(d=>{const m=d.graphic.attributes[c.field],g=o(l,m);g===0?a.push(d):(c.ascending&&g>0||!c.ascending&&g<0)&&(a=[d],l=m)}),a.length===1||p===n.drawOrder.length-1?!0:(s=a,!1))),a.length===0){console.error("Hit test failed to find topmost item using draw order");return}return{oid:a[0].graphic.getObjectId(),layerId:n.id,layerIdx:n.getLayerTree().layerIdx}}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(t){const r=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(n=>r.includes(n))||this.keyPan()):r.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"?this.runIdentify(this.getExtent().center()):t.key==="Tab"&&this._activeKeys.push(t.key)}mapKeyUp(t){const r=["=","-"];this._activeKeys.includes(t.key)&&!r.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(i=>r.includes(i))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),r=this.mapPointToScreenPoint(t),i=this.screenPointToMapPoint({screenX:r.screenX+5,screenY:r.screenY+5}),n=Math.abs(i.x-t.x),s=Math.abs(i.y-t.y);let o=0,a=0,l=1;for(let c=0;c<this._activeKeys.length;++c)switch(this._activeKeys[c]){case"ArrowLeft":o-=n;break;case"ArrowRight":o+=n;break;case"ArrowUp":a+=s;break;case"ArrowDown":a-=s;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const Jtt={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},Ztt={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},Ktt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},Ytt={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}};var Qtt={circlePoint:Jtt,solidLine:Ztt,outlinedPoly:Ktt,boundingBoxPoly:Ytt},phe={exports:{}};(function(e,t){(function(r,i){if(e.exports=i(KD.exports),typeof r.navigator=="object"){if(!r.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");r.Terraformer.ArcGIS=i(r.Terraformer)}})(Aa,function(r){var i={};function n(v){var _=0,E=0,I=[],x,T,M,k;M=v.match(/((\+|\-)[^\+\-]+)/g),k=parseInt(M[0],32);for(var D=1;D<M.length;D+=2)x=parseInt(M[D],32)+_,_=x,T=parseInt(M[D+1],32)+E,E=T,I.push([x/k,T/k]);return I}function s(v){return o(v[0],v[v.length-1])||v.push(v[0]),v}function o(v,_){for(var E=0;E<v.length;E++)if(v[E]!==_[E])return!1;return!0}function a(v){var _={};for(var E in v)v.hasOwnProperty(E)&&(_[E]=v[E]);return _}function l(v){var _=0,E=0,I=v.length,x=v[E],T;for(E;E<I-1;E++)T=v[E+1],_+=(T[0]-x[0])*(T[1]+x[1]),x=T;return _>=0}function u(v){var _=[],E=v.slice(0),I=s(E.shift().slice(0));if(I.length>=4){l(I)||I.reverse(),_.push(I);for(var x=0;x<E.length;x++){var T=s(E[x].slice(0));T.length>=4&&(l(T)&&T.reverse(),_.push(T))}}return _}function c(v){for(var _=[],E=0;E<v.length;E++)for(var I=u(v[E]),x=I.length-1;x>=0;x--){var T=I[x].slice(0);_.push(T)}return _}function p(v,_){var E=r.Tools.arraysIntersectArrays(v,_),I=r.Tools.coordinatesContainPoint(v,_[0]);return!!(!E&&I)}function d(v){for(var _=[],E=[],I,x,T,M=0;M<v.length;M++){var k=s(v[M].slice(0));if(!(k.length<4))if(l(k)){var D=[k.slice().reverse()];_.push(D)}else E.push(k.slice().reverse())}for(var B=[];E.length;){T=E.pop();var G=!1;for(I=_.length-1;I>=0;I--)if(x=_[I][0],p(x,T)){_[I].push(T),G=!0;break}G||B.push(T)}for(;B.length;){T=B.pop();var W=!1;for(I=_.length-1;I>=0;I--)if(x=_[I][0],r.Tools.arraysIntersectArrays(x,T)){_[I].push(T),W=!0;break}W||_.push([T.reverse()])}return _.length===1?{type:"Polygon",coordinates:_[0]}:{type:"MultiPolygon",coordinates:_}}function m(v,_){var E={};return _=_||{},_.idAttribute=_.idAttribute||void 0,v.spatialReference&&(v.spatialReference.wkid===3857||v.spatialReference.wkid===102100)&&(E.crs=r.MercatorCRS),typeof v.x=="number"&&typeof v.y=="number"&&(E.type="Point",E.coordinates=[v.x,v.y],(v.z||v.m)&&E.coordinates.push(v.z),v.m&&E.coordinates.push(v.m)),v.points&&(E.type="MultiPoint",E.coordinates=v.points.slice(0)),v.paths&&(v.paths.length===1?(E.type="LineString",E.coordinates=v.paths[0].slice(0)):(E.type="MultiLineString",E.coordinates=v.paths.slice(0))),v.rings&&(E=d(v.rings.slice(0))),typeof v.xmin=="number"&&typeof v.ymin=="number"&&typeof v.xmax=="number"&&typeof v.ymax=="number"&&(E.type="Polygon",E.coordinates=[[[v.xmax,v.ymax],[v.xmin,v.ymax],[v.xmin,v.ymin],[v.xmax,v.ymin],[v.xmax,v.ymax]]]),(v.compressedGeometry||v.geometry||v.attributes)&&(E.type="Feature",v.compressedGeometry&&(v.geometry={paths:[n(v.compressedGeometry)]}),E.geometry=v.geometry?m(v.geometry):null,E.properties=v.attributes?a(v.attributes):null,v.attributes&&(E.id=v.attributes[_.idAttribute]||v.attributes.OBJECTID||v.attributes.FID)),new r.Primitive(E)}function g(v,_){var E;_=_||{};var I=_.idAttribute||"OBJECTID";_.sr?E={wkid:_.sr}:v&&v.crs&&v.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?E=null:E={wkid:4326};var x={},T;switch(v.type){case"Point":x.x=v.coordinates[0],x.y=v.coordinates[1],v.coordinates[2]&&(x.z=v.coordinates[2]),v.coordinates[3]&&(x.m=v.coordinates[3]),x.spatialReference=E;break;case"MultiPoint":x.points=v.coordinates.slice(0),x.spatialReference=E;break;case"LineString":x.paths=[v.coordinates.slice(0)],x.spatialReference=E;break;case"MultiLineString":x.paths=v.coordinates.slice(0),x.spatialReference=E;break;case"Polygon":x.rings=u(v.coordinates.slice(0)),x.spatialReference=E;break;case"MultiPolygon":x.rings=c(v.coordinates.slice(0)),x.spatialReference=E;break;case"Feature":v.geometry&&(x.geometry=g(v.geometry,_)),x.attributes=v.properties?a(v.properties):{},v.id&&(x.attributes[I]=v.id);break;case"FeatureCollection":for(x=[],T=0;T<v.features.length;T++)x.push(g(v.features[T],_));break;case"GeometryCollection":for(x=[],T=0;T<v.geometries.length;T++)x.push(g(v.geometries[T],_));break}return x}function b(v){return new r.LineString(n(v))}return i.parse=m,i.convert=g,i.toGeoJSON=m,i.fromGeoJSON=g,i.parseCompressedGeometry=b,i})})(phe);var Xtt=phe.exports;function dhe(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function ert(e,t){var r=dhe(e);return function(i,n){return t(r(i),n,e)}}function trt(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var n in i)n in t||r.push(t[n]=n)}),r}function tj(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function i(u,c){var p,d,m=n(u,function(g,b){if(p)return p(g,b-1);d=g,p=c?ert(g,c):dhe(g)});return m.columns=d,m}function n(u,c){var p={},d={},m=[],g=u.length,b=0,v=0,_,E;function I(){if(b>=g)return d;if(E)return E=!1,p;var T=b,M;if(u.charCodeAt(T)===34){for(var k=T;k++<g;)if(u.charCodeAt(k)===34){if(u.charCodeAt(k+1)!==34)break;++k}return b=k+2,M=u.charCodeAt(k+1),M===13?(E=!0,u.charCodeAt(k+2)===10&&++b):M===10&&(E=!0),u.slice(T+1,k).replace(/""/g,'"')}for(;b<g;){var D=1;if(M=u.charCodeAt(b++),M===10)E=!0;else if(M===13)E=!0,u.charCodeAt(b)===10&&(++b,++D);else if(M!==r)continue;return u.slice(T,b-D)}return u.slice(T)}for(;(_=I())!==d;){for(var x=[];_!==p&&_!==d;)x.push(_),_=I();c&&(x=c(x,v++))==null||m.push(x)}return m}function s(u,c){return c==null&&(c=trt(u)),[c.map(l).join(e)].concat(u.map(function(p){return c.map(function(d){return l(p[d])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:i,parseRows:n,format:s,formatRows:o}}var XA=tj(","),rrt=XA.parse,irt=XA.parseRows,nrt=XA.format,srt=XA.formatRows,e$=tj("	"),ort=e$.parse,art=e$.parseRows,lrt=e$.format,urt=e$.formatRows,crt=Object.freeze(Object.defineProperty({__proto__:null,dsvFormat:tj,csvParse:rrt,csvParseRows:irt,csvFormat:nrt,csvFormatRows:srt,tsvParse:ort,tsvParseRows:art,tsvFormat:lrt,tsvFormatRows:urt},Symbol.toStringTag,{value:"Module"})),hrt=VNe(crt),Ub={exports:{}};Ub.exports=prt;Ub.exports.pair=frt;Ub.exports.format=DL;Ub.exports.formatPair=drt;Ub.exports.coordToDMS=fhe;function prt(e,t){var r=FL(e,t);return r===null?null:r.val}function drt(e){return DL(e.lat,"lat")+" "+DL(e.lon,"lon")}function DL(e,t){var r=fhe(e,t);return r.whole+"\xB0 "+(r.minutes?r.minutes+"' ":"")+(r.seconds?r.seconds+'" ':"")+r.dir}function fhe(e,t){var r={lat:["N","S"],lon:["E","W"]}[t]||"",i=r[e>=0?0:1],n=Math.abs(e),s=Math.floor(n),o=n-s,a=o*60,l=Math.floor(a),u=Math.floor((a-l)*60);return{whole:s,minutes:l,seconds:u,dir:i}}function FL(e,t){if(t||(t="NSEW"),typeof e!="string")return null;e=e.toUpperCase();var r=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,i=e.match(r);if(!i)return null;var n=i[0],s;if(i[1]&&i[5]?(s=i[1],n=n.slice(0,-1)):s=i[1]||i[5],s&&t.indexOf(s)===-1)return null;var o=i[2]?parseFloat(i[2]):0,a=i[3]?parseFloat(i[3])/60:0,l=i[4]?parseFloat(i[4])/3600:0,u=o<0?-1:1;return(s==="S"||s==="W")&&(u*=-1),{val:(Math.abs(o)+a+l)*u,dim:s,matched:n,remain:e.slice(n.length)}}function frt(e,t){e=e.trim();var r=FL(e,t);if(!r)return null;e=r.remain.trim();var i=FL(e,t);return!i||i.remain?null:r.dim?mrt(r.val,i.val,r.dim):[r.val,i.val]}function mrt(e,t,r){if(r==="N"||r==="S")return[e,t];if(r==="W"||r==="E")return[t,e]}var pv=hrt,NJ=Ub.exports,mhe=/(Lat)(itude)?/gi,yhe=/(L)(on|ng)(gitude)?/i;function ghe(e,t){var r,i,n;for(var s in e)i=s.match(t),i&&(!r||i[0].length/s.length>n)&&(n=i[0].length/s.length,r=s);return r}function vhe(e){return ghe(e,mhe)}function bhe(e){return ghe(e,yhe)}function yrt(e){return!!e.match(mhe)}function grt(e){return!!e.match(yhe)}function DJ(e){return typeof e=="object"?Object.keys(e).length:0}function whe(e){var t=[",",";","	","|"],r=[];return t.forEach(function(i){var n=pv.dsvFormat(i).parse(e);if(n.length>=1){for(var s=DJ(n[0]),o=0;o<n.length;o++)if(DJ(n[o])!==s)return;r.push({delimiter:i,arity:Object.keys(n[0]).length})}}),r.length?r.sort(function(i,n){return n.arity-i.arity})[0].delimiter:null}function vrt(e){return delete e.columns,e}function brt(e){var t=whe(e);return t?vrt(pv.dsvFormat(t).parse(e)):null}function wrt(e,t,r){r||(r=t,t={}),t.delimiter=t.delimiter||",";var i=t.latfield||"",n=t.lonfield||"",s=t.crs||"",o=[],a={type:"FeatureCollection",features:o};if(s!==""&&(a.crs={type:"name",properties:{name:s}}),t.delimiter==="auto"&&typeof e=="string"&&(t.delimiter=whe(e),!t.delimiter)){r({type:"Error",message:"Could not autodetect delimiter"});return}var l=t.numericFields?t.numericFields.split(","):null,u=typeof e=="string"?pv.dsvFormat(t.delimiter).parse(e,function(E){if(l)for(var I in E)l.includes(I)&&(E[I]=+E[I]);return E}):e;if(!u.length){r(null,a);return}var c=[],p;i||(i=vhe(u[0])),n||(n=bhe(u[0]));var d=!i||!n;if(d){for(p=0;p<u.length;p++)o.push({type:"Feature",properties:u[p],geometry:null});r(c.length?c:null,a);return}for(p=0;p<u.length;p++)if(u[p][n]!==void 0&&u[p][i]!==void 0){var m=u[p][n],g=u[p][i],b,v,_;_=NJ(m,"EW"),_&&(m=_),_=NJ(g,"NS"),_&&(g=_),b=parseFloat(m),v=parseFloat(g),isNaN(b)||isNaN(v)?c.push({message:"A row contained an invalid value for latitude or longitude",row:u[p],index:p}):(t.includeLatLon||(delete u[p][n],delete u[p][i]),o.push({type:"Feature",properties:u[p],geometry:{type:"Point",coordinates:[parseFloat(b),parseFloat(v)]}}))}r(c.length?c:null,a)}function _rt(e){for(var t=e.features,r={type:"Feature",geometry:{type:"LineString",coordinates:[]}},i=0;i<t.length;i++)r.geometry.coordinates.push(t[i].geometry.coordinates);return r.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[r]}}function xrt(e){for(var t=e.features,r={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},i=0;i<t.length;i++)r.geometry.coordinates[0].push(t[i].geometry.coordinates);return r.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[r]}}var FJ={isLon:grt,isLat:yrt,guessLatHeader:vhe,guessLonHeader:bhe,csv:pv.csvParse,tsv:pv.tsvParse,dsv:pv,auto:brt,csv2geojson:wrt,toLine:_rt,toPolygon:xrt},_he={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){var r=Math.log,i=Math.abs,n=Math.pow,s=Math.min,o=Math.floor,a=String.fromCharCode;return function(){function l(u,c,p){function d(b,v){if(!c[b]){if(!u[b]){var _=typeof AE=="function"&&AE;if(!v&&_)return _(b,!0);if(m)return m(b,!0);var E=new Error("Cannot find module '"+b+"'");throw E.code="MODULE_NOT_FOUND",E}var I=c[b]={exports:{}};u[b][0].call(I.exports,function(x){var T=u[b][1][x];return d(T||x)},I,I.exports,l,u,c,p)}return c[b].exports}for(var m=typeof AE=="function"&&AE,g=0;g<p.length;g++)d(p[g]);return d}return l}()({1:[function(l,u){function c(g){var b=new d,v=b.write(g)+b.end();return v.replace(/\0/g,"").trim()}function p(g,b){if(console.log("encoding",g),!g)return c;try{new TextDecoder(g.trim())}catch(_){console.log("catch",_);var v=m.exec(g);return console.log("match",v),v&&!b?(console.log("m1",v[1]),p("windows-"+v[1],!0)):c}return function(_){var E=new TextDecoder(g),I=E.decode(_,{stream:!0})+E.decode();return I.replace(/\0/g,"").trim()}}l("text-encoding-polyfill");var d=l("string_decoder").StringDecoder;u.exports=p;var m=/^(?:ANSI\s)?(\d+)$/m},{string_decoder:21,"text-encoding-polyfill":3}],2:[function(l,u){function c(b){var v={lastUpdated:new Date(b.readUInt8(1)+1900,b.readUInt8(2),b.readUInt8(3)),records:b.readUInt32LE(4),headerLen:b.readUInt16LE(8),recLen:b.readUInt16LE(10)};return v}function p(b,v,_){for(var E=[],I=32;I<v&&(E.push({name:_(b.slice(I,I+11)),dataType:a(b.readUInt8(I+11)),len:b.readUInt8(I+16),decimal:b.readUInt8(I+17)}),b.readUInt8(I+32)!==13);)I+=32;return E}function d(b,v,_,E,I){var x=b.slice(v,v+_),T=I(x);return E==="N"||E==="F"||E==="O"?parseFloat(T,10):E==="D"?new Date(T.slice(0,4),parseInt(T.slice(4,6),10)-1,T.slice(6,8)):E==="L"?T.toLowerCase()==="y"||T.toLowerCase()==="t":T}function m(b,v,_,E){for(var I={},x=0,T=_.length,M,k;x<T;)k=_[x],M=d(b,v,k.len,k.dataType,E),v+=k.len,typeof M<"u"&&(I[k.name]=M),x++;return I}var g=l("./decoder");u.exports=function(b,v){for(var _=g(v),E=c(b),I=p(b,E.headerLen-1,_),x=(I.length+1<<5)+2,T=E.recLen,M=E.records,k=[];M;)k.push(m(b,x,I,_)),x+=T,M--;return k}},{"./decoder":1}],3:[function(l,u){u.exports=l("./lib/encoding.js")},{"./lib/encoding.js":4}],4:[function(l,u){(function(c){function p(V,H,N){return H<=V&&V<=N}function d(V,H){return V.indexOf(H)!==-1}function m(V){if(V===void 0)return{};if(V===Object(V))return V;throw TypeError("Could not convert argument to dictionary")}function g(V){for(var H=V+"",N=H.length,Y=0,be=[];Y<N;){var _e=H.charCodeAt(Y);if(55296>_e||57343<_e)be.push(_e);else if(56320<=_e&&57343>=_e)be.push(65533);else if(55296<=_e&&56319>=_e)if(Y===N-1)be.push(65533);else{var ue=H.charCodeAt(Y+1);56320<=ue&&57343>=ue?(be.push(65536+((1023&_e)<<10)+(1023&ue)),Y+=1):be.push(65533)}Y+=1}return be}function b(V){for(var H="",N=0,Y;N<V.length;++N)Y=V[N],65535>=Y?H+=a(Y):(Y-=65536,H+=a((Y>>10)+55296,(1023&Y)+56320));return H}function v(V){return 0<=V&&127>=V}function _(V){this.tokens=[].slice.call(V),this.tokens.reverse()}function E(V,H){if(V)throw TypeError("Decoder error");return H||65533}function I(V){throw TypeError("The code point "+V+" could not be encoded.")}function x(V){return V=(V+"").trim().toLowerCase(),Object.prototype.hasOwnProperty.call(oe,V)?oe[V]:null}function T(V,H){return H&&H[V]||null}function M(V,H){var N=H.indexOf(V);return N===-1?null:N}function k(V){if(!("encoding-indexes"in c))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return c["encoding-indexes"][V]}function D(V){if(39419<V&&189e3>V||1237575<V)return null;if(V===7457)return 59335;var H=0,N=0,Y=k("gb18030-ranges"),be;for(be=0;be<Y.length;++be){var _e=Y[be];if(_e[0]<=V)H=_e[0],N=_e[1];else break}return N+V-H}function B(V){if(V===59335)return 7457;var H=0,N=0,Y=k("gb18030-ranges"),be;for(be=0;be<Y.length;++be){var _e=Y[be];if(_e[1]<=V)H=_e[1],N=_e[0];else break}return N+V-H}function G(V){$=$||k("jis0208").map(function(N,Y){return p(Y,8272,8835)?null:N});var H=$;return H.indexOf(V)}function W(V){A=A||k("big5").map(function(N,Y){return Y<5024?null:N});var H=A;return V===9552||V===9566||V===9569||V===9578||V===21313||V===21317?H.lastIndexOf(V):M(V,H)}function K(V,H){if(!(this instanceof K))throw TypeError("Called as a function. Did you forget 'new'?");V=V===void 0?"utf-8":V+"",H=m(H),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var N=x(V);if(N===null||N.name==="replacement")throw RangeError("Unknown encoding: "+V);if(!R[N.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var Y=this;return Y._encoding=N,H.fatal&&(Y._error_mode="fatal"),H.ignoreBOM&&(Y._ignoreBOM=!0),Object.defineProperty||(this.encoding=Y._encoding.name.toLowerCase(),this.fatal=Y._error_mode==="fatal",this.ignoreBOM=Y._ignoreBOM),Y}function ne(V,H){if(!(this instanceof ne))throw TypeError("Called as a function. Did you forget 'new'?");H=m(H),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=H.fatal?"fatal":"replacement";var N=this;if(H.NONSTANDARD_allowLegacyEncoding){V=V===void 0?"utf-8":V+"";var Y=x(V);if(Y===null||Y.name==="replacement")throw RangeError("Unknown encoding: "+V);if(!re[Y.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");N._encoding=Y}else N._encoding=x("utf-8"),V!==void 0&&"console"in c&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=N._encoding.name.toLowerCase()),N}function ye(V){var H=V.fatal,N=0,Y=0,be=0,_e=128,ue=191;this.handler=function(De,qe){if(qe===-1&&be!==0)return be=0,E(H);if(qe===-1)return-1;if(be===0){if(p(qe,0,127))return qe;if(p(qe,194,223))be=1,N=31&qe;else if(p(qe,224,239))qe===224&&(_e=160),qe===237&&(ue=159),be=2,N=15&qe;else if(p(qe,240,244))qe===240&&(_e=144),qe===244&&(ue=143),be=3,N=7&qe;else return E(H);return null}if(!p(qe,_e,ue))return N=be=Y=0,_e=128,ue=191,De.prepend(qe),E(H);if(_e=128,ue=191,N=N<<6|63&qe,Y+=1,Y!==be)return null;var Qe=N;return N=be=Y=0,Qe}}function y(V){V.fatal,this.handler=function(H,N){if(N===-1)return-1;if(we(N))return N;var Y,be;p(N,128,2047)?(Y=1,be=192):p(N,2048,65535)?(Y=2,be=224):p(N,65536,1114111)&&(Y=3,be=240);for(var _e=[(N>>6*Y)+be];0<Y;){var ue=N>>6*(Y-1);_e.push(128|63&ue),Y-=1}return _e}}function C(V,H){var N=H.fatal;this.handler=function(Y,be){if(be===-1)return-1;if(v(be))return be;var _e=V[be-128];return _e===null?E(N):_e}}function L(V,H){H.fatal,this.handler=function(N,Y){if(Y===-1)return-1;if(we(Y))return Y;var be=M(Y,V);return be===null&&I(Y),be+128}}function F(V){var H=V.fatal,N=0,Y=0,be=0;this.handler=function(_e,ue){if(ue===-1&&N===0&&Y===0&&be===0)return-1;ue===-1&&(N!==0||Y!==0||be!==0)&&(N=0,Y=0,be=0,E(H));var De;if(be!==0){De=null,p(ue,48,57)&&(De=D(10*(126*(10*(N-129)+Y-48)+be-129)+ue-48));var qe=[Y,be,ue];return N=0,Y=0,be=0,De===null?(_e.prepend(qe),E(H)):De}if(Y!==0)return p(ue,129,254)?(be=ue,null):(_e.prepend([Y,ue]),N=0,Y=0,E(H));if(N!==0){if(p(ue,48,57))return Y=ue,null;var Qe=N,Ve=null;N=0;var xe=127>ue?64:65;return(p(ue,64,126)||p(ue,128,254))&&(Ve=190*(Qe-129)+(ue-xe)),De=Ve===null?null:T(Ve,k("gb18030")),De===null&&v(ue)&&_e.prepend(ue),De===null?E(H):De}return v(ue)?ue:ue===128?8364:p(ue,129,254)?(N=ue,null):E(H)}}function ae(V,H){V.fatal,this.handler=function(N,Y){if(Y===-1)return-1;if(we(Y))return Y;if(Y===58853)return I(Y);if(H&&Y===8364)return 128;var be=M(Y,k("gb18030"));if(be!==null){var _e=ee(be/190)+129,ue=be%190,De=63>ue?64:65;return[_e,ue+De]}if(H)return I(Y);be=B(Y);var qe=ee(be/10/126/10);be-=10*(126*(10*qe));var Qe=ee(be/10/126);be-=126*(10*Qe);var Ve=ee(be/10),xe=be-10*Ve;return[qe+129,Qe+48,Ve+129,xe+48]}}function q(V){var H=V.fatal,N=0;this.handler=function(Y,be){if(be===-1&&N!==0)return N=0,E(H);if(be===-1&&N===0)return-1;if(N!==0){var _e=N,ue=null;N=0;var De=127>be?64:98;switch((p(be,64,126)||p(be,161,254))&&(ue=157*(_e-129)+(be-De)),ue){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var qe=ue===null?null:T(ue,k("big5"));return qe===null&&v(be)&&Y.prepend(be),qe===null?E(H):qe}return v(be)?be:p(be,129,254)?(N=be,null):E(H)}}function fe(V){V.fatal,this.handler=function(H,N){if(N===-1)return-1;if(we(N))return N;var Y=W(N);if(Y===null)return I(N);var be=ee(Y/157)+129;if(161>be)return I(N);var _e=Y%157,ue=63>_e?64:98;return[be,_e+ue]}}function te(V){var H=V.fatal,N=!1,Y=0;this.handler=function(be,_e){if(_e===-1&&Y!==0)return Y=0,E(H);if(_e===-1&&Y===0)return-1;if(Y===142&&p(_e,161,223))return Y=0,65216+_e;if(Y===143&&p(_e,161,254))return N=!0,Y=_e,null;if(Y!==0){var ue=Y;Y=0;var De=null;return p(ue,161,254)&&p(_e,161,254)&&(De=T(94*(ue-161)+(_e-161),k(N?"jis0212":"jis0208"))),N=!1,p(_e,161,254)||be.prepend(_e),De===null?E(H):De}return v(_e)?_e:_e===142||_e===143||p(_e,161,254)?(Y=_e,null):E(H)}}function ge(V){V.fatal,this.handler=function(H,N){if(N===-1)return-1;if(we(N))return N;if(N===165)return 92;if(N===8254)return 126;if(p(N,65377,65439))return[142,N-65377+161];N===8722&&(N=65293);var Y=M(N,k("jis0208"));if(Y===null)return I(N);var be=ee(Y/94)+161;return[be,Y%94+161]}}function ve(V){var H=V.fatal,N={ASCII:0,Roman:1,Katakana:2,LeadByte:3,TrailByte:4,EscapeStart:5,Escape:6},Y=N.ASCII,be=N.ASCII,_e=0,ue=!1;this.handler=function(De,qe){switch(Y){default:case N.ASCII:return qe===27?(Y=N.EscapeStart,null):p(qe,0,127)&&qe!==14&&qe!==15&&qe!==27?(ue=!1,qe):qe===-1?-1:(ue=!1,E(H));case N.Roman:return qe===27?(Y=N.EscapeStart,null):qe===92?(ue=!1,165):qe===126?(ue=!1,8254):p(qe,0,127)&&qe!==14&&qe!==15&&qe!==27&&qe!==92&&qe!==126?(ue=!1,qe):qe===-1?-1:(ue=!1,E(H));case N.Katakana:return qe===27?(Y=N.EscapeStart,null):p(qe,33,95)?(ue=!1,65344+qe):qe===-1?-1:(ue=!1,E(H));case N.LeadByte:return qe===27?(Y=N.EscapeStart,null):p(qe,33,126)?(ue=!1,_e=qe,Y=N.TrailByte,null):qe===-1?-1:(ue=!1,E(H));case N.TrailByte:if(qe===27)return Y=N.EscapeStart,E(H);if(p(qe,33,126)){Y=N.LeadByte;var Qe=94*(_e-33)+qe-33,Ve=T(Qe,k("jis0208"));return Ve===null?E(H):Ve}return qe===-1?(Y=N.LeadByte,De.prepend(qe),E(H)):(Y=N.LeadByte,E(H));case N.EscapeStart:return qe===36||qe===40?(_e=qe,Y=N.Escape,null):(De.prepend(qe),ue=!1,Y=be,E(H));case N.Escape:var xe=_e;_e=0;var Oe=null;if(xe===40&&qe===66&&(Oe=N.ASCII),xe===40&&qe===74&&(Oe=N.Roman),xe===40&&qe===73&&(Oe=N.Katakana),xe===36&&(qe===64||qe===66)&&(Oe=N.LeadByte),Oe!==null){Y=Y=Oe;var ze=ue;return ue=!0,ze?E(H):null}return De.prepend([xe,qe]),ue=!1,Y=be,E(H)}}}function Ee(V){V.fatal;var H={ASCII:0,Roman:1,jis0208:2},N=H.ASCII;this.handler=function(Y,be){if(be===-1&&N!==H.ASCII)return Y.prepend(be),N=H.ASCII,[27,40,66];if(be===-1&&N===H.ASCII)return-1;if((N===H.ASCII||N===H.Roman)&&(be===14||be===15||be===27))return I(65533);if(N===H.ASCII&&we(be))return be;if(N===H.Roman&&(we(be)&&be!==92&&be!==126||be==165||be==8254)){if(we(be))return be;if(be===165)return 92;if(be===8254)return 126}if(we(be)&&N!==H.ASCII)return Y.prepend(be),N=H.ASCII,[27,40,66];if((be===165||be===8254)&&N!==H.Roman)return Y.prepend(be),N=H.Roman,[27,40,74];be===8722&&(be=65293);var _e=M(be,k("jis0208"));if(_e===null)return I(be);if(N!==H.jis0208)return Y.prepend(be),N=H.jis0208,[27,36,66];var ue=ee(_e/94)+33;return[ue,_e%94+33]}}function Ie(V){var H=V.fatal,N=0;this.handler=function(Y,be){if(be===-1&&N!==0)return N=0,E(H);if(be===-1&&N===0)return-1;if(N!==0){var _e=N,ue=null;N=0;var De=127>be?64:65,qe=160>_e?129:193;if((p(be,64,126)||p(be,128,252))&&(ue=188*(_e-qe)+be-De),p(ue,8836,10715))return 48508+ue;var Qe=ue===null?null:T(ue,k("jis0208"));return Qe===null&&v(be)&&Y.prepend(be),Qe===null?E(H):Qe}return v(be)||be===128?be:p(be,161,223)?65216+be:p(be,129,159)||p(be,224,252)?(N=be,null):E(H)}}function ke(V){V.fatal,this.handler=function(H,N){if(N===-1)return-1;if(we(N)||N===128)return N;if(N===165)return 92;if(N===8254)return 126;if(p(N,65377,65439))return N-65377+161;N===8722&&(N=65293);var Y=G(N);if(Y===null)return I(N);var be=ee(Y/188),_e=31>be?129:193,ue=Y%188,De=63>ue?64:65;return[be+_e,ue+De]}}function Te(V){var H=V.fatal,N=0;this.handler=function(Y,be){if(be===-1&&N!==0)return N=0,E(H);if(be===-1&&N===0)return-1;if(N!==0){var _e=N,ue=null;N=0,p(be,65,254)&&(ue=190*(_e-129)+(be-65));var De=ue===null?null:T(ue,k("euc-kr"));return ue===null&&v(be)&&Y.prepend(be),De===null?E(H):De}return v(be)?be:p(be,129,254)?(N=be,null):E(H)}}function Se(V){V.fatal,this.handler=function(H,N){if(N===-1)return-1;if(we(N))return N;var Y=M(N,k("euc-kr"));if(Y===null)return I(N);var be=ee(Y/190)+129;return[be,Y%190+65]}}function Ae(V,H){var N=V>>8,Y=255&V;return H?[N,Y]:[Y,N]}function X(V,H){var N=H.fatal,Y=null,be=null;this.handler=function(_e,ue){if(ue===-1&&(Y!==null||be!==null))return E(N);if(ue===-1&&Y===null&&be===null)return-1;if(Y===null)return Y=ue,null;var De;if(De=V?(Y<<8)+ue:(ue<<8)+Y,Y=null,be!==null){var qe=be;return be=null,p(De,56320,57343)?65536+1024*(qe-55296)+(De-56320):(_e.prepend(Ae(De,V)),E(N))}return p(De,55296,56319)?(be=De,null):p(De,56320,57343)?E(N):De}}function Z(V,H){H.fatal,this.handler=function(N,Y){if(Y===-1)return-1;if(p(Y,0,65535))return Ae(Y,V);var be=Ae((Y-65536>>10)+55296,V),_e=Ae((1023&Y-65536)+56320,V);return be.concat(_e)}}function le(V){V.fatal,this.handler=function(H,N){return N===-1?-1:v(N)?N:63360+N-128}}function z(V){V.fatal,this.handler=function(H,N){return N===-1?-1:we(N)?N:p(N,63360,63487)?N-63360+128:I(N)}}typeof u<"u"&&u.exports&&!c["encoding-indexes"]&&l("./encoding-indexes.js");var ee=o,we=v,se=-1;_.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():se},prepend:function(V){if(Array.isArray(V))for(var H=V;H.length;)this.tokens.push(H.pop());else this.tokens.push(V)},push:function(V){if(Array.isArray(V))for(var H=V;H.length;)this.tokens.unshift(H.shift());else this.tokens.unshift(V)}};var U=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],oe={};U.forEach(function(V){V.encodings.forEach(function(H){H.labels.forEach(function(N){oe[N]=H})})});var re={},R={},$,A;Object.defineProperty&&(Object.defineProperty(K.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(K.prototype,"fatal",{get:function(){return this._error_mode==="fatal"}}),Object.defineProperty(K.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),K.prototype.decode=function(V,H){var N;N=typeof V=="object"&&V instanceof ArrayBuffer?new Uint8Array(V):typeof V=="object"&&"buffer"in V&&V.buffer instanceof ArrayBuffer?new Uint8Array(V.buffer,V.byteOffset,V.byteLength):new Uint8Array(0),H=m(H),this._do_not_flush||(this._decoder=R[this._encoding.name]({fatal:this._error_mode==="fatal"}),this._BOMseen=!1),this._do_not_flush=!!H.stream;for(var Y=new _(N),be=[],_e,ue;ue=Y.read(),ue!==se&&(_e=this._decoder.handler(Y,ue),_e!==-1);)_e!==null&&(Array.isArray(_e)?be.push.apply(be,_e):be.push(_e));if(!this._do_not_flush){do{if(_e=this._decoder.handler(Y,Y.read()),_e===-1)break;_e!==null&&(Array.isArray(_e)?be.push.apply(be,_e):be.push(_e))}while(!Y.endOfStream());this._decoder=null}return function(De){return!d(["UTF-8","UTF-16LE","UTF-16BE"],this._encoding.name)||this._ignoreBOM||this._BOMseen||(0<De.length&&De[0]===65279?(this._BOMseen=!0,De.shift()):0<De.length&&(this._BOMseen=!0)),b(De)}.call(this,be)},Object.defineProperty&&Object.defineProperty(ne.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),ne.prototype.encode=function(V,H){V=V===void 0?"":V+"",H=m(H),this._do_not_flush||(this._encoder=re[this._encoding.name]({fatal:this._fatal==="fatal"})),this._do_not_flush=!!H.stream;for(var N=new _(g(V)),Y=[],be,_e;_e=N.read(),_e!==se&&(be=this._encoder.handler(N,_e),be!==-1);)Array.isArray(be)?Y.push.apply(Y,be):Y.push(be);if(!this._do_not_flush){for(;be=this._encoder.handler(N,N.read()),be!==-1;)Array.isArray(be)?Y.push.apply(Y,be):Y.push(be);this._encoder=null}return new Uint8Array(Y)},re["UTF-8"]=function(V){return new y(V)},R["UTF-8"]=function(V){return new ye(V)},function(){"encoding-indexes"in c&&U.forEach(function(V){V.heading!=="Legacy single-byte encodings"||V.encodings.forEach(function(H){var N=H.name,Y=k(N.toLowerCase());R[N]=function(be){return new C(Y,be)},re[N]=function(be){return new L(Y,be)}})})}(),R.GBK=function(V){return new F(V)},re.GBK=function(V){return new ae(V,!0)},re.gb18030=function(V){return new ae(V)},R.gb18030=function(V){return new F(V)},re.Big5=function(V){return new fe(V)},R.Big5=function(V){return new q(V)},re["EUC-JP"]=function(V){return new ge(V)},R["EUC-JP"]=function(V){return new te(V)},re["ISO-2022-JP"]=function(V){return new Ee(V)},R["ISO-2022-JP"]=function(V){return new ve(V)},re.Shift_JIS=function(V){return new ke(V)},R.Shift_JIS=function(V){return new Ie(V)},re["EUC-KR"]=function(V){return new Se(V)},R["EUC-KR"]=function(V){return new Te(V)},re["UTF-16BE"]=function(V){return new Z(!0,V)},R["UTF-16BE"]=function(V){return new X(!0,V)},re["UTF-16LE"]=function(V){return new Z(!1,V)},R["UTF-16LE"]=function(V){return new X(!1,V)},re["x-user-defined"]=function(V){return new z(V)},R["x-user-defined"]=function(V){return new le(V)},c.TextEncoder||(c.TextEncoder=ne),c.TextDecoder||(c.TextDecoder=K),typeof u<"u"&&u.exports&&(u.exports={TextEncoder:c.TextEncoder,TextDecoder:c.TextDecoder,EncodingIndexes:c["encoding-indexes"]})})(this||{})},{"./encoding-indexes.js":11}],5:[function(l,u){const c=l("lie"),p=l("./combine"),d=l("buffer").Buffer;u.exports=function(m,g){return new c(function(b,v){const _=p(m,g),E=new XMLHttpRequest;E.open("GET",_,!0),g!=="prj"&&g!=="cpg"&&(E.responseType="arraybuffer"),E.addEventListener("load",function(){return 399<E.status?g==="prj"||g==="cpg"?b(!1):v(new Error(E.status)):b(g!=="prj"&&g!=="cpg"?d.from(E.response):E.response)},!1),E.send()})}},{"./combine":7,buffer:12,lie:16}],6:[function(l,u){(function(c){(function(){const p=l("./binaryajax-browser"),d=l("./combine"),m=l("buffer").Buffer;u.exports=async function(g,b){if(!c.fetch)return p(g,b);const v=d(g,b),_=b==="prj"||b==="cpg";try{const E=await fetch(v);if(399<E.status)throw new Error(E.statusText);if(_)return E.text();const I=await E.arrayBuffer();return m.from(I)}catch(E){if(_)return!1;throw E}}}).call(this)}).call(this,typeof Aa>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Aa)},{"./binaryajax-browser":5,"./combine":7,buffer:12}],7:[function(l,u){(function(c){(function(){const p=c.URL;u.exports=(d,m)=>{if(!m)return d;const g=new p(d);return g.pathname=`${g.pathname}.${m}`,g.href}}).call(this)}).call(this,typeof Aa>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Aa)},{}],8:[function(l,u){function c(b){let v=0,_=1;const E=b.length;for(let I,x;_<E;)I=x||b[0],x=b[_],v+=(x[0]-I[0])*(x[1]+I[1]),_++;return 0<v}function p(b,v){return c(v)||!b.length?b.push([v]):b[b.length-1].push(v),b}function d(b){return b?function(v,_){return b.inverse([v.readDoubleLE(_),v.readDoubleLE(_+8)])}:function(v,_){return[v.readDoubleLE(_),v.readDoubleLE(_+8)]}}function m(b,v){return this instanceof m?(this.buffer=b,this.headers=this.parseHeader(),this.headers.length<this.buffer.byteLength&&(this.buffer=this.buffer.slice(0,this.headers.length)),this.shpFuncs(v),void(this.rows=this.getRows())):new m(b,v)}m.prototype.parsePoint=function(b){return{type:"Point",coordinates:this.parseCoord(b,0)}},m.prototype.parseZPoint=function(b){const v=this.parsePoint(b);return v.coordinates.push(b.readDoubleLE(16)),v},m.prototype.parsePointArray=function(b,v,_){const E=[];for(let I=0;I<_;)E.push(this.parseCoord(b,v)),v+=16,I++;return E},m.prototype.parseZPointArray=function(b,v,_,E){for(let I=0;I<_;)E[I].push(b.readDoubleLE(v)),I++,v+=8;return E},m.prototype.parseArrayGroup=function(b,v,_,E,I){const x=[];let T=0,M=0,k,D;for(;T<E;)T++,_+=4,k=M,M=T===E?I:b.readInt32LE(_),D=M-k,D&&(x.push(this.parsePointArray(b,v,D)),v+=D<<4);return x},m.prototype.parseZArrayGroup=function(b,v,_,E){for(let I=0;I<_;)E[I]=this.parseZPointArray(b,v,E[I].length,E[I]),v+=E[I].length<<3,I++;return E},m.prototype.parseMultiPoint=function(b){const v={},_=this.parseCoord(b,0),E=this.parseCoord(b,16);v.bbox=[_[0],_[1],E[0],E[1]];const I=b.readInt32LE(32,!0),x=36;return I===1?(v.type="Point",v.coordinates=this.parseCoord(b,x)):(v.type="MultiPoint",v.coordinates=this.parsePointArray(b,x,I)),v},m.prototype.parseZMultiPoint=function(b){const v=this.parseMultiPoint(b);let _;if(v.type==="Point")return v.coordinates.push(b.readDoubleLE(72)),v;_=v.coordinates.length;const E=52+(_<<4);return v.coordinates=this.parseZPointArray(b,E,_,v.coordinates),v},m.prototype.parsePolyline=function(b){const v={},_=this.parseCoord(b,0),E=this.parseCoord(b,16);v.bbox=[_[0],_[1],E[0],E[1]];const I=b.readInt32LE(32),x=b.readInt32LE(36);let T,M;return I===1?(v.type="LineString",T=44,v.coordinates=this.parsePointArray(b,T,x)):(v.type="MultiLineString",T=40+(I<<2),M=40,v.coordinates=this.parseArrayGroup(b,T,M,I,x)),v},m.prototype.parseZPolyline=function(b){const v=this.parsePolyline(b),_=v.coordinates.length;let E;if(v.type==="LineString")return E=60+(_<<4),v.coordinates=this.parseZPointArray(b,E,_,v.coordinates),v;{const I=v.coordinates.reduce(function(x,T){return x+T.length},0);return E=56+(I<<4)+(_<<2),v.coordinates=this.parseZArrayGroup(b,E,_,v.coordinates),v}},m.prototype.polyFuncs=function(b){return b.type==="LineString"?(b.type="Polygon",b.coordinates=[b.coordinates],b):(b.coordinates=b.coordinates.reduce(p,[]),b.coordinates.length===1?(b.type="Polygon",b.coordinates=b.coordinates[0],b):(b.type="MultiPolygon",b))},m.prototype.parsePolygon=function(b){return this.polyFuncs(this.parsePolyline(b))},m.prototype.parseZPolygon=function(b){return this.polyFuncs(this.parseZPolyline(b))};const g={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};m.prototype.shpFuncs=function(b){let v=this.headers.shpCode;if(20<v&&(v-=20),!(v in g))throw new Error("I don't know that shp type");this.parseFunc=this[g[v]],this.parseCoord=d(b)},m.prototype.getShpCode=function(){return this.parseHeader().shpCode},m.prototype.parseHeader=function(){const b=this.buffer.slice(0,100);return{length:b.readInt32BE(24)<<1,version:b.readInt32LE(28),shpCode:b.readInt32LE(32),bbox:[b.readDoubleLE(36),b.readDoubleLE(44),b.readDoubleLE(52),b.readDoubleLE(52)]}},m.prototype.getRows=function(){let b=100;const v=this.buffer.byteLength,_=[];for(let E;b<v&&(E=this.getRow(b),!!E);)b+=8,b+=E.len,E.type?_.push(this.parseFunc(E.data)):_.push(null);return _},m.prototype.getRow=function(b){const v=this.buffer.slice(b,b+12),_=v.readInt32BE(4)<<1,E=v.readInt32BE(0);return _===0?{id:E,len:_,type:0}:{id:E,len:_,data:this.buffer.slice(b+12,b+_+8),type:v.readInt32LE(8)}},u.exports=function(b,v){return new m(b,v).rows}},{}],9:[function(l,u){const c=l("jszip");u.exports=async p=>{const d=new c;await d.loadAsync(p);const m=d.file(/.+/),g={};return await Promise.all(m.map(async b=>{let v;v=b.name.slice(-3).toLowerCase()==="shp"||b.name.slice(-3).toLowerCase()==="dbf"?await b.async("nodebuffer"):await b.async("text"),g[b.name]=v})),g}},{jszip:15}],10:[function(l,u,c){function p(k){var D=k.length;if(0<D%4)throw new Error("Invalid string. Length must be a multiple of 4");var B=k.indexOf("=");B===-1&&(B=D);var G=B===D?0:4-B%4;return[B,G]}function d(k,D,B){return 3*(D+B)/4-B}function m(k){var D=p(k),B=D[0],G=D[1],W=new I(d(k,B,G)),K=0,ne=0<G?B-4:B,ye,y;for(y=0;y<ne;y+=4)ye=E[k.charCodeAt(y)]<<18|E[k.charCodeAt(y+1)]<<12|E[k.charCodeAt(y+2)]<<6|E[k.charCodeAt(y+3)],W[K++]=255&ye>>16,W[K++]=255&ye>>8,W[K++]=255&ye;return G===2&&(ye=E[k.charCodeAt(y)]<<2|E[k.charCodeAt(y+1)]>>4,W[K++]=255&ye),G===1&&(ye=E[k.charCodeAt(y)]<<10|E[k.charCodeAt(y+1)]<<4|E[k.charCodeAt(y+2)]>>2,W[K++]=255&ye>>8,W[K++]=255&ye),W}function g(k){return _[63&k>>18]+_[63&k>>12]+_[63&k>>6]+_[63&k]}function b(k,D,B){for(var G=[],W=D,K;W<B;W+=3)K=(16711680&k[W]<<16)+(65280&k[W+1]<<8)+(255&k[W+2]),G.push(g(K));return G.join("")}function v(k){for(var D=k.length,B=D%3,G=[],W=16383,K=0,ne=D-B,ye;K<ne;K+=W)G.push(b(k,K,K+W>ne?ne:K+W));return B===1?(ye=k[D-1],G.push(_[ye>>2]+_[63&ye<<4]+"==")):B===2&&(ye=(k[D-2]<<8)+k[D-1],G.push(_[ye>>10]+_[63&ye>>4]+_[63&ye<<2]+"=")),G.join("")}c.byteLength=function(k){var D=p(k),B=D[0],G=D[1];return 3*(B+G)/4-G},c.toByteArray=m,c.fromByteArray=v;for(var _=[],E=[],I=typeof Uint8Array>"u"?Array:Uint8Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=0,M=x.length;T<M;++T)_[T]=x[T],E[x.charCodeAt(T)]=T;E[45]=62,E[95]=63},{}],11:[function(){},{}],12:[function(l,u,c){(function(){(function(){function p(R){if(2147483647<R)throw new RangeError('The value "'+R+'" is invalid for option "size"');var $=new Uint8Array(R);return $.__proto__=d.prototype,$}function d(R,$,A){if(typeof R=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(R)}return m(R,$,A)}function m(R,$,A){if(typeof R=="string")return _(R,$);if(ArrayBuffer.isView(R))return E(R);if(R==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(we(R,ArrayBuffer)||R&&we(R.buffer,ArrayBuffer))return I(R,$,A);if(typeof R=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var V=R.valueOf&&R.valueOf();if(V!=null&&V!==R)return d.from(V,$,A);var H=x(R);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof R[Symbol.toPrimitive]=="function")return d.from(R[Symbol.toPrimitive]("string"),$,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function g(R){if(typeof R!="number")throw new TypeError('"size" argument must be of type number');if(0>R)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function b(R,$,A){return g(R),0>=R||$===void 0?p(R):typeof A=="string"?p(R).fill($,A):p(R).fill($)}function v(R){return g(R),p(0>R?0:0|T(R))}function _(R,$){if((typeof $!="string"||$==="")&&($="utf8"),!d.isEncoding($))throw new TypeError("Unknown encoding: "+$);var A=0|M(R,$),V=p(A),H=V.write(R,$);return H!==A&&(V=V.slice(0,H)),V}function E(R){for(var $=0>R.length?0:0|T(R.length),A=p($),V=0;V<$;V+=1)A[V]=255&R[V];return A}function I(R,$,A){if(0>$||R.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<$+(A||0))throw new RangeError('"length" is outside of buffer bounds');var V;return V=$===void 0&&A===void 0?new Uint8Array(R):A===void 0?new Uint8Array(R,$):new Uint8Array(R,$,A),V.__proto__=d.prototype,V}function x(R){if(d.isBuffer(R)){var $=0|T(R.length),A=p($);return A.length===0||R.copy(A,0,0,$),A}return R.length===void 0?R.type==="Buffer"&&Array.isArray(R.data)?E(R.data):void 0:typeof R.length!="number"||se(R.length)?p(0):E(R)}function T(R){if(R>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|R}function M(R,$){if(d.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||we(R,ArrayBuffer))return R.byteLength;if(typeof R!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);var A=R.length,V=2<arguments.length&&arguments[2]===!0;if(!V&&A===0)return 0;for(var H=!1;;)switch($){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return X(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return z(R).length;default:if(H)return V?-1:X(R).length;$=(""+$).toLowerCase(),H=!0}}function k(R,$,A){var V=!1;if(($===void 0||0>$)&&($=0),$>this.length||((A===void 0||A>this.length)&&(A=this.length),0>=A)||(A>>>=0,$>>>=0,A<=$))return"";for(R||(R="utf8");;)switch(R){case"hex":return te(this,$,A);case"utf8":case"utf-8":return F(this,$,A);case"ascii":return q(this,$,A);case"latin1":case"binary":return fe(this,$,A);case"base64":return L(this,$,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,$,A);default:if(V)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),V=!0}}function D(R,$,A){var V=R[$];R[$]=R[A],R[A]=V}function B(R,$,A,V,H){if(R.length===0)return-1;if(typeof A=="string"?(V=A,A=0):2147483647<A?A=2147483647:-2147483648>A&&(A=-2147483648),A=+A,se(A)&&(A=H?0:R.length-1),0>A&&(A=R.length+A),A>=R.length){if(H)return-1;A=R.length-1}else if(0>A)if(H)A=0;else return-1;if(typeof $=="string"&&($=d.from($,V)),d.isBuffer($))return $.length===0?-1:G(R,$,A,V,H);if(typeof $=="number")return $&=255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(R,$,A):Uint8Array.prototype.lastIndexOf.call(R,$,A):G(R,[$],A,V,H);throw new TypeError("val must be string, number or Buffer")}function G(R,$,A,V,H){function N(Ve,xe){return Y===1?Ve[xe]:Ve.readUInt16BE(xe*Y)}var Y=1,be=R.length,_e=$.length;if(V!==void 0&&(V=(V+"").toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(2>R.length||2>$.length)return-1;Y=2,be/=2,_e/=2,A/=2}var ue;if(H){var De=-1;for(ue=A;ue<be;ue++)if(N(R,ue)!==N($,De===-1?0:ue-De))De!==-1&&(ue-=ue-De),De=-1;else if(De===-1&&(De=ue),ue-De+1===_e)return De*Y}else for(A+_e>be&&(A=be-_e),ue=A;0<=ue;ue--){for(var qe=!0,Qe=0;Qe<_e;Qe++)if(N(R,ue+Qe)!==N($,Qe)){qe=!1;break}if(qe)return ue}return-1}function W(R,$,A,V){A=+A||0;var H=R.length-A;V?(V=+V,V>H&&(V=H)):V=H;var N=$.length;V>N/2&&(V=N/2);for(var Y=0,be;Y<V;++Y){if(be=parseInt($.substr(2*Y,2),16),se(be))return Y;R[A+Y]=be}return Y}function K(R,$,A,V){return ee(X($,R.length-A),R,A,V)}function ne(R,$,A,V){return ee(Z($),R,A,V)}function ye(R,$,A,V){return ne(R,$,A,V)}function y(R,$,A,V){return ee(z($),R,A,V)}function C(R,$,A,V){return ee(le($,R.length-A),R,A,V)}function L(R,$,A){return $===0&&A===R.length?U.fromByteArray(R):U.fromByteArray(R.slice($,A))}function F(R,$,A){A=s(R.length,A);for(var V=[],H=$;H<A;){var N=R[H],Y=null,be=239<N?4:223<N?3:191<N?2:1;if(H+be<=A){var _e,ue,De,qe;be===1?128>N&&(Y=N):be===2?(_e=R[H+1],(192&_e)==128&&(qe=(31&N)<<6|63&_e,127<qe&&(Y=qe))):be===3?(_e=R[H+1],ue=R[H+2],(192&_e)==128&&(192&ue)==128&&(qe=(15&N)<<12|(63&_e)<<6|63&ue,2047<qe&&(55296>qe||57343<qe)&&(Y=qe))):be===4&&(_e=R[H+1],ue=R[H+2],De=R[H+3],(192&_e)==128&&(192&ue)==128&&(192&De)==128&&(qe=(15&N)<<18|(63&_e)<<12|(63&ue)<<6|63&De,65535<qe&&1114112>qe&&(Y=qe)))}Y===null?(Y=65533,be=1):65535<Y&&(Y-=65536,V.push(55296|1023&Y>>>10),Y=56320|1023&Y),V.push(Y),H+=be}return ae(V)}function ae(R){var $=R.length;if($<=4096)return a.apply(String,R);for(var A="",V=0;V<$;)A+=a.apply(String,R.slice(V,V+=4096));return A}function q(R,$,A){var V="";A=s(R.length,A);for(var H=$;H<A;++H)V+=a(127&R[H]);return V}function fe(R,$,A){var V="";A=s(R.length,A);for(var H=$;H<A;++H)V+=a(R[H]);return V}function te(R,$,A){var V=R.length;(!$||0>$)&&($=0),(!A||0>A||A>V)&&(A=V);for(var H="",N=$;N<A;++N)H+=Ae(R[N]);return H}function ge(R,$,A){for(var V=R.slice($,A),H="",N=0;N<V.length;N+=2)H+=a(V[N]+256*V[N+1]);return H}function ve(R,$,A){if(R%1!=0||0>R)throw new RangeError("offset is not uint");if(R+$>A)throw new RangeError("Trying to access beyond buffer length")}function Ee(R,$,A,V,H,N){if(!d.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if($>H||$<N)throw new RangeError('"value" argument is out of bounds');if(A+V>R.length)throw new RangeError("Index out of range")}function Ie(R,$,A,V){if(A+V>R.length)throw new RangeError("Index out of range");if(0>A)throw new RangeError("Index out of range")}function ke(R,$,A,V,H){return $=+$,A>>>=0,H||Ie(R,$,A,4),oe.write(R,$,A,V,23,4),A+4}function Te(R,$,A,V,H){return $=+$,A>>>=0,H||Ie(R,$,A,8),oe.write(R,$,A,V,52,8),A+8}function Se(R){if(R=R.split("=")[0],R=R.trim().replace(re,""),2>R.length)return"";for(;R.length%4!=0;)R+="=";return R}function Ae(R){return 16>R?"0"+R.toString(16):R.toString(16)}function X(R,$){$=$||1/0;for(var A=R.length,V=null,H=[],N=0,Y;N<A;++N){if(Y=R.charCodeAt(N),55295<Y&&57344>Y){if(!V){if(56319<Y){-1<($-=3)&&H.push(239,191,189);continue}else if(N+1===A){-1<($-=3)&&H.push(239,191,189);continue}V=Y;continue}if(56320>Y){-1<($-=3)&&H.push(239,191,189),V=Y;continue}Y=(V-55296<<10|Y-56320)+65536}else V&&-1<($-=3)&&H.push(239,191,189);if(V=null,128>Y){if(0>($-=1))break;H.push(Y)}else if(2048>Y){if(0>($-=2))break;H.push(192|Y>>6,128|63&Y)}else if(65536>Y){if(0>($-=3))break;H.push(224|Y>>12,128|63&Y>>6,128|63&Y)}else if(1114112>Y){if(0>($-=4))break;H.push(240|Y>>18,128|63&Y>>12,128|63&Y>>6,128|63&Y)}else throw new Error("Invalid code point")}return H}function Z(R){for(var $=[],A=0;A<R.length;++A)$.push(255&R.charCodeAt(A));return $}function le(R,$){for(var A=[],V=0,H,N,Y;V<R.length&&!(0>($-=2));++V)H=R.charCodeAt(V),N=H>>8,Y=H%256,A.push(Y),A.push(N);return A}function z(R){return U.toByteArray(Se(R))}function ee(R,$,A,V){for(var H=0;H<V&&!(H+A>=$.length||H>=R.length);++H)$[H+A]=R[H];return H}function we(R,$){return R instanceof $||R!=null&&R.constructor!=null&&R.constructor.name!=null&&R.constructor.name===$.name}function se(R){return R!==R}var U=l("base64-js"),oe=l("ieee754");c.Buffer=d,c.SlowBuffer=function(R){return+R!=R&&(R=0),d.alloc(+R)},c.INSPECT_MAX_BYTES=50,c.kMaxLength=2147483647,d.TYPED_ARRAY_SUPPORT=function(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},R.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){return d.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){return d.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&d[Symbol.species]===d&&Object.defineProperty(d,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),d.poolSize=8192,d.from=function(R,$,A){return m(R,$,A)},d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array,d.alloc=function(R,$,A){return b(R,$,A)},d.allocUnsafe=function(R){return v(R)},d.allocUnsafeSlow=function(R){return v(R)},d.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==d.prototype},d.compare=function(R,$){if(we(R,Uint8Array)&&(R=d.from(R,R.offset,R.byteLength)),we($,Uint8Array)&&($=d.from($,$.offset,$.byteLength)),!d.isBuffer(R)||!d.isBuffer($))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===$)return 0;for(var A=R.length,V=$.length,H=0,N=s(A,V);H<N;++H)if(R[H]!==$[H]){A=R[H],V=$[H];break}return A<V?-1:V<A?1:0},d.isEncoding=function(R){switch((R+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(R,$){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return d.alloc(0);var A;if($===void 0)for($=0,A=0;A<R.length;++A)$+=R[A].length;var V=d.allocUnsafe($),H=0;for(A=0;A<R.length;++A){var N=R[A];if(we(N,Uint8Array)&&(N=d.from(N)),!d.isBuffer(N))throw new TypeError('"list" argument must be an Array of Buffers');N.copy(V,H),H+=N.length}return V},d.byteLength=M,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var R=this.length;if(R%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $=0;$<R;$+=2)D(this,$,$+1);return this},d.prototype.swap32=function(){var R=this.length;if(R%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $=0;$<R;$+=4)D(this,$,$+3),D(this,$+1,$+2);return this},d.prototype.swap64=function(){var R=this.length;if(R%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $=0;$<R;$+=8)D(this,$,$+7),D(this,$+1,$+6),D(this,$+2,$+5),D(this,$+3,$+4);return this},d.prototype.toString=function(){var R=this.length;return R===0?"":arguments.length===0?F(this,0,R):k.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(R){if(!d.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R||d.compare(this,R)===0},d.prototype.inspect=function(){var R="",$=c.INSPECT_MAX_BYTES;return R=this.toString("hex",0,$).replace(/(.{2})/g,"$1 ").trim(),this.length>$&&(R+=" ... "),"<Buffer "+R+">"},d.prototype.compare=function(R,$,A,V,H){if(we(R,Uint8Array)&&(R=d.from(R,R.offset,R.byteLength)),!d.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if($===void 0&&($=0),A===void 0&&(A=R?R.length:0),V===void 0&&(V=0),H===void 0&&(H=this.length),0>$||A>R.length||0>V||H>this.length)throw new RangeError("out of range index");if(V>=H&&$>=A)return 0;if(V>=H)return-1;if($>=A)return 1;if($>>>=0,A>>>=0,V>>>=0,H>>>=0,this===R)return 0;for(var N=H-V,Y=A-$,be=s(N,Y),_e=this.slice(V,H),ue=R.slice($,A),De=0;De<be;++De)if(_e[De]!==ue[De]){N=_e[De],Y=ue[De];break}return N<Y?-1:Y<N?1:0},d.prototype.includes=function(R,$,A){return this.indexOf(R,$,A)!==-1},d.prototype.indexOf=function(R,$,A){return B(this,R,$,A,!0)},d.prototype.lastIndexOf=function(R,$,A){return B(this,R,$,A,!1)},d.prototype.write=function(R,$,A,V){if($===void 0)V="utf8",A=this.length,$=0;else if(A===void 0&&typeof $=="string")V=$,A=this.length,$=0;else if(isFinite($))$>>>=0,isFinite(A)?(A>>>=0,V===void 0&&(V="utf8")):(V=A,A=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var H=this.length-$;if((A===void 0||A>H)&&(A=H),0<R.length&&(0>A||0>$)||$>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var N=!1;;)switch(V){case"hex":return W(this,R,$,A);case"utf8":case"utf-8":return K(this,R,$,A);case"ascii":return ne(this,R,$,A);case"latin1":case"binary":return ye(this,R,$,A);case"base64":return y(this,R,$,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,R,$,A);default:if(N)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),N=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.slice=function(R,$){var A=this.length;R=~~R,$=$===void 0?A:~~$,0>R?(R+=A,0>R&&(R=0)):R>A&&(R=A),0>$?($+=A,0>$&&($=0)):$>A&&($=A),$<R&&($=R);var V=this.subarray(R,$);return V.__proto__=d.prototype,V},d.prototype.readUIntLE=function(R,$,A){R>>>=0,$>>>=0,A||ve(R,$,this.length);for(var V=this[R],H=1,N=0;++N<$&&(H*=256);)V+=this[R+N]*H;return V},d.prototype.readUIntBE=function(R,$,A){R>>>=0,$>>>=0,A||ve(R,$,this.length);for(var V=this[R+--$],H=1;0<$&&(H*=256);)V+=this[R+--$]*H;return V},d.prototype.readUInt8=function(R,$){return R>>>=0,$||ve(R,1,this.length),this[R]},d.prototype.readUInt16LE=function(R,$){return R>>>=0,$||ve(R,2,this.length),this[R]|this[R+1]<<8},d.prototype.readUInt16BE=function(R,$){return R>>>=0,$||ve(R,2,this.length),this[R]<<8|this[R+1]},d.prototype.readUInt32LE=function(R,$){return R>>>=0,$||ve(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},d.prototype.readUInt32BE=function(R,$){return R>>>=0,$||ve(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},d.prototype.readIntLE=function(R,$,A){R>>>=0,$>>>=0,A||ve(R,$,this.length);for(var V=this[R],H=1,N=0;++N<$&&(H*=256);)V+=this[R+N]*H;return H*=128,V>=H&&(V-=n(2,8*$)),V},d.prototype.readIntBE=function(R,$,A){R>>>=0,$>>>=0,A||ve(R,$,this.length);for(var V=$,H=1,N=this[R+--V];0<V&&(H*=256);)N+=this[R+--V]*H;return H*=128,N>=H&&(N-=n(2,8*$)),N},d.prototype.readInt8=function(R,$){return R>>>=0,$||ve(R,1,this.length),128&this[R]?-1*(255-this[R]+1):this[R]},d.prototype.readInt16LE=function(R,$){R>>>=0,$||ve(R,2,this.length);var A=this[R]|this[R+1]<<8;return 32768&A?4294901760|A:A},d.prototype.readInt16BE=function(R,$){R>>>=0,$||ve(R,2,this.length);var A=this[R+1]|this[R]<<8;return 32768&A?4294901760|A:A},d.prototype.readInt32LE=function(R,$){return R>>>=0,$||ve(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},d.prototype.readInt32BE=function(R,$){return R>>>=0,$||ve(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},d.prototype.readFloatLE=function(R,$){return R>>>=0,$||ve(R,4,this.length),oe.read(this,R,!0,23,4)},d.prototype.readFloatBE=function(R,$){return R>>>=0,$||ve(R,4,this.length),oe.read(this,R,!1,23,4)},d.prototype.readDoubleLE=function(R,$){return R>>>=0,$||ve(R,8,this.length),oe.read(this,R,!0,52,8)},d.prototype.readDoubleBE=function(R,$){return R>>>=0,$||ve(R,8,this.length),oe.read(this,R,!1,52,8)},d.prototype.writeUIntLE=function(R,$,A,V){if(R=+R,$>>>=0,A>>>=0,!V){var H=n(2,8*A)-1;Ee(this,R,$,A,H,0)}var N=1,Y=0;for(this[$]=255&R;++Y<A&&(N*=256);)this[$+Y]=255&R/N;return $+A},d.prototype.writeUIntBE=function(R,$,A,V){if(R=+R,$>>>=0,A>>>=0,!V){var H=n(2,8*A)-1;Ee(this,R,$,A,H,0)}var N=A-1,Y=1;for(this[$+N]=255&R;0<=--N&&(Y*=256);)this[$+N]=255&R/Y;return $+A},d.prototype.writeUInt8=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,1,255,0),this[$]=255&R,$+1},d.prototype.writeUInt16LE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,2,65535,0),this[$]=255&R,this[$+1]=R>>>8,$+2},d.prototype.writeUInt16BE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,2,65535,0),this[$]=R>>>8,this[$+1]=255&R,$+2},d.prototype.writeUInt32LE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,4,4294967295,0),this[$+3]=R>>>24,this[$+2]=R>>>16,this[$+1]=R>>>8,this[$]=255&R,$+4},d.prototype.writeUInt32BE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,4,4294967295,0),this[$]=R>>>24,this[$+1]=R>>>16,this[$+2]=R>>>8,this[$+3]=255&R,$+4},d.prototype.writeIntLE=function(R,$,A,V){if(R=+R,$>>>=0,!V){var H=n(2,8*A-1);Ee(this,R,$,A,H-1,-H)}var N=0,Y=1,be=0;for(this[$]=255&R;++N<A&&(Y*=256);)0>R&&be===0&&this[$+N-1]!==0&&(be=1),this[$+N]=255&(R/Y>>0)-be;return $+A},d.prototype.writeIntBE=function(R,$,A,V){if(R=+R,$>>>=0,!V){var H=n(2,8*A-1);Ee(this,R,$,A,H-1,-H)}var N=A-1,Y=1,be=0;for(this[$+N]=255&R;0<=--N&&(Y*=256);)0>R&&be===0&&this[$+N+1]!==0&&(be=1),this[$+N]=255&(R/Y>>0)-be;return $+A},d.prototype.writeInt8=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,1,127,-128),0>R&&(R=255+R+1),this[$]=255&R,$+1},d.prototype.writeInt16LE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,2,32767,-32768),this[$]=255&R,this[$+1]=R>>>8,$+2},d.prototype.writeInt16BE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,2,32767,-32768),this[$]=R>>>8,this[$+1]=255&R,$+2},d.prototype.writeInt32LE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,4,2147483647,-2147483648),this[$]=255&R,this[$+1]=R>>>8,this[$+2]=R>>>16,this[$+3]=R>>>24,$+4},d.prototype.writeInt32BE=function(R,$,A){return R=+R,$>>>=0,A||Ee(this,R,$,4,2147483647,-2147483648),0>R&&(R=4294967295+R+1),this[$]=R>>>24,this[$+1]=R>>>16,this[$+2]=R>>>8,this[$+3]=255&R,$+4},d.prototype.writeFloatLE=function(R,$,A){return ke(this,R,$,!0,A)},d.prototype.writeFloatBE=function(R,$,A){return ke(this,R,$,!1,A)},d.prototype.writeDoubleLE=function(R,$,A){return Te(this,R,$,!0,A)},d.prototype.writeDoubleBE=function(R,$,A){return Te(this,R,$,!1,A)},d.prototype.copy=function(R,$,A,V){if(!d.isBuffer(R))throw new TypeError("argument should be a Buffer");if(A||(A=0),V||V===0||(V=this.length),$>=R.length&&($=R.length),$||($=0),0<V&&V<A&&(V=A),V===A||R.length===0||this.length===0)return 0;if(0>$)throw new RangeError("targetStart out of bounds");if(0>A||A>=this.length)throw new RangeError("Index out of range");if(0>V)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),R.length-$<V-A&&(V=R.length-$+A);var H=V-A;if(this===R&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin($,A,V);else if(this===R&&A<$&&$<V)for(var N=H-1;0<=N;--N)R[N+$]=this[N+A];else Uint8Array.prototype.set.call(R,this.subarray(A,V),$);return H},d.prototype.fill=function(R,$,A,V){if(typeof R=="string"){if(typeof $=="string"?(V=$,$=0,A=this.length):typeof A=="string"&&(V=A,A=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!d.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(R.length===1){var H=R.charCodeAt(0);(V==="utf8"&&128>H||V==="latin1")&&(R=H)}}else typeof R=="number"&&(R&=255);if(0>$||this.length<$||this.length<A)throw new RangeError("Out of range index");if(A<=$)return this;$>>>=0,A=A===void 0?this.length:A>>>0,R||(R=0);var N;if(typeof R=="number")for(N=$;N<A;++N)this[N]=R;else{var Y=d.isBuffer(R)?R:d.from(R,V),be=Y.length;if(be===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(N=0;N<A-$;++N)this[N+$]=Y[N%be]}return this};var re=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,l("buffer").Buffer)},{"base64-js":10,buffer:12,ieee754:13}],13:[function(l,u,c){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(p,d,m,g,b){var v=8*b-g-1,_=(1<<v)-1,E=_>>1,I=-7,x=m?b-1:0,T=m?-1:1,M=p[d+x],k,D;for(x+=T,k=M&(1<<-I)-1,M>>=-I,I+=v;0<I;k=256*k+p[d+x],x+=T,I-=8);for(D=k&(1<<-I)-1,k>>=-I,I+=g;0<I;D=256*D+p[d+x],x+=T,I-=8);if(k===0)k=1-E;else{if(k===_)return D?NaN:(M?-1:1)*(1/0);D+=n(2,g),k-=E}return(M?-1:1)*D*n(2,k-g)},c.write=function(p,d,m,g,b,v){var _=Math.LN2,E=8*v-b-1,I=(1<<E)-1,x=I>>1,T=b===23?n(2,-24)-n(2,-77):0,M=g?0:v-1,k=g?1:-1,D=0>d||d===0&&0>1/d?1:0,B,G,W;for(d=i(d),isNaN(d)||d===1/0?(G=isNaN(d)?1:0,B=I):(B=o(r(d)/_),1>d*(W=n(2,-B))&&(B--,W*=2),d+=1<=B+x?T/W:T*n(2,1-x),2<=d*W&&(B++,W/=2),B+x>=I?(G=0,B=I):1<=B+x?(G=(d*W-1)*n(2,b),B+=x):(G=d*n(2,x-1)*n(2,b),B=0));8<=b;p[m+M]=255&G,M+=k,G/=256,b-=8);for(B=B<<b|G,E+=b;0<E;p[m+M]=255&B,M+=k,B/=256,E-=8);p[m+M-k]|=128*D}},{}],14:[function(l,u){(function(c){(function(){function p(){x=!0;for(var T=I.length,M,k;T;){for(k=I,I=[],M=-1;++M<T;)k[M]();T=I.length}x=!1}function d(T){I.push(T)!==1||x||g()}var m=c.MutationObserver||c.WebKitMutationObserver,g;if(m){var b=0,v=new m(p),_=c.document.createTextNode("");v.observe(_,{characterData:!0}),g=function(){_.data=b=++b%2}}else if(!c.setImmediate&&typeof c.MessageChannel<"u"){var E=new c.MessageChannel;E.port1.onmessage=p,g=function(){E.port2.postMessage(0)}}else g="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var T=c.document.createElement("script");T.onreadystatechange=function(){p(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},c.document.documentElement.appendChild(T)}:function(){setTimeout(p,0)};var I=[],x;u.exports=d}).call(this)}).call(this,typeof Aa>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Aa)},{}],15:[function(l,u,c){(function(p,d,m){(function(){/*!

JSZip v3.6.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/(function(g){typeof c=="object"&&typeof u<"u"?u.exports=g():(typeof window>"u"?typeof p>"u"?typeof self>"u"?this:self:p:window).JSZip=g()})(function(){return function g(b,v,_){function E(T,M){if(!v[T]){if(!b[T]){var k=typeof l=="function"&&l;if(!M&&k)return k(T,!0);if(I)return I(T,!0);var D=new Error("Cannot find module '"+T+"'");throw D.code="MODULE_NOT_FOUND",D}var B=v[T]={exports:{}};b[T][0].call(B.exports,function(G){var W=b[T][1][G];return E(W||G)},B,B.exports,g,b,v,_)}return v[T].exports}for(var I=typeof l=="function"&&l,x=0;x<_.length;x++)E(_[x]);return E}({1:[function(g,b,v){(function(_){(function(E){typeof v=="object"&&b!==void 0?b.exports=E():(typeof window>"u"?_===void 0?typeof self>"u"?this:self:_:window).JSZip=E()})(function(){return function E(I,x,T){function M(B,G){if(!x[B]){if(!I[B]){var W=typeof g=="function"&&g;if(!G&&W)return W(B,!0);if(k)return k(B,!0);var K=new Error("Cannot find module '"+B+"'");throw K.code="MODULE_NOT_FOUND",K}var ne=x[B]={exports:{}};I[B][0].call(ne.exports,function(ye){return M(I[B][1][ye]||ye)},ne,ne.exports,E,I,x,T)}return x[B].exports}for(var k=typeof g=="function"&&g,D=0;D<T.length;D++)M(T[D]);return M}({1:[function(E,I,x){(function(T){(function(M){typeof x=="object"&&I!==void 0?I.exports=M():(typeof window>"u"?T===void 0?typeof self>"u"?this:self:T:window).JSZip=M()})(function(){return function M(k,D,B){function G(ne,ye){if(!D[ne]){if(!k[ne]){var y=typeof E=="function"&&E;if(!ye&&y)return y(ne,!0);if(W)return W(ne,!0);var C=new Error("Cannot find module '"+ne+"'");throw C.code="MODULE_NOT_FOUND",C}var L=D[ne]={exports:{}};k[ne][0].call(L.exports,function(F){return G(k[ne][1][F]||F)},L,L.exports,M,k,D,B)}return D[ne].exports}for(var W=typeof E=="function"&&E,K=0;K<B.length;K++)G(B[K]);return G}({1:[function(M,k,D){(function(B){(function(G){typeof D=="object"&&k!==void 0?k.exports=G():(typeof window>"u"?B===void 0?typeof self>"u"?this:self:B:window).JSZip=G()})(function(){return function G(W,K,ne){function ye(L,F){if(!K[L]){if(!W[L]){var ae=typeof M=="function"&&M;if(!F&&ae)return ae(L,!0);if(y)return y(L,!0);var q=new Error("Cannot find module '"+L+"'");throw q.code="MODULE_NOT_FOUND",q}var fe=K[L]={exports:{}};W[L][0].call(fe.exports,function(te){return ye(W[L][1][te]||te)},fe,fe.exports,G,W,K,ne)}return K[L].exports}for(var y=typeof M=="function"&&M,C=0;C<ne.length;C++)ye(ne[C]);return ye}({1:[function(G,W,K){(function(ne){(function(ye){typeof K=="object"&&W!==void 0?W.exports=ye():(typeof window>"u"?ne===void 0?typeof self>"u"?this:self:ne:window).JSZip=ye()})(function(){return function ye(y,C,L){function F(fe,te){if(!C[fe]){if(!y[fe]){var ge=typeof G=="function"&&G;if(!te&&ge)return ge(fe,!0);if(ae)return ae(fe,!0);var ve=new Error("Cannot find module '"+fe+"'");throw ve.code="MODULE_NOT_FOUND",ve}var Ee=C[fe]={exports:{}};y[fe][0].call(Ee.exports,function(Ie){return F(y[fe][1][Ie]||Ie)},Ee,Ee.exports,ye,y,C,L)}return C[fe].exports}for(var ae=typeof G=="function"&&G,q=0;q<L.length;q++)F(L[q]);return F}({1:[function(ye,y,C){(function(L){(function(F){typeof C=="object"&&y!==void 0?y.exports=F():(typeof window>"u"?L===void 0?typeof self>"u"?this:self:L:window).JSZip=F()})(function(){return function F(ae,q,fe){function te(Ee,Ie){if(!q[Ee]){if(!ae[Ee]){var ke=typeof ye=="function"&&ye;if(!Ie&&ke)return ke(Ee,!0);if(ge)return ge(Ee,!0);var Te=new Error("Cannot find module '"+Ee+"'");throw Te.code="MODULE_NOT_FOUND",Te}var Se=q[Ee]={exports:{}};ae[Ee][0].call(Se.exports,function(Ae){return te(ae[Ee][1][Ae]||Ae)},Se,Se.exports,F,ae,q,fe)}return q[Ee].exports}for(var ge=typeof ye=="function"&&ye,ve=0;ve<fe.length;ve++)te(fe[ve]);return te}({1:[function(F,ae,q){var fe=F("./utils"),te=F("./support");q.encode=function(ge){for(var ve=[],Ee=0,Ie=ge.length,ke=Ie,Te=fe.getTypeOf(ge)!=="string",Se,Ae,X,Z,le,z,ee;Ee<ge.length;)ke=Ie-Ee,X=Te?(Se=ge[Ee++],Ae=Ee<Ie?ge[Ee++]:0,Ee<Ie?ge[Ee++]:0):(Se=ge.charCodeAt(Ee++),Ae=Ee<Ie?ge.charCodeAt(Ee++):0,Ee<Ie?ge.charCodeAt(Ee++):0),Z=Se>>2,le=(3&Se)<<4|Ae>>4,z=1<ke?(15&Ae)<<2|X>>6:64,ee=2<ke?63&X:64,ve.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Z)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(le)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(z)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(ee));return ve.join("")},q.decode=function(ge){var ve=0,Ee=0,Ie,ke,Te,Se,Ae,X;if(ge.substr(0,5)==="data:")throw new Error("Invalid base64 input, it looks like a data url.");var Z=3*(ge=ge.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4,le;if(ge.charAt(ge.length-1)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&Z--,ge.charAt(ge.length-2)==="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(64)&&Z--,Z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(le=te.uint8array?new Uint8Array(0|Z):Array(0|Z);ve<ge.length;)Ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ge.charAt(ve++))<<2|(Se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ge.charAt(ve++)))>>4,ke=(15&Se)<<4|(Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ge.charAt(ve++)))>>2,Te=(3&Ae)<<6|(X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(ge.charAt(ve++))),le[Ee++]=Ie,Ae!==64&&(le[Ee++]=ke),X!==64&&(le[Ee++]=Te);return le}},{"./support":30,"./utils":32}],2:[function(F,ae){function q(Ee,Ie,ke,Te,Se){this.compressedSize=Ee,this.uncompressedSize=Ie,this.crc32=ke,this.compression=Te,this.compressedContent=Se}var fe=F("./external"),te=F("./stream/DataWorker"),ge=F("./stream/Crc32Probe"),ve=F("./stream/DataLengthProbe");q.prototype={getContentWorker:function(){var Ee=new te(fe.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new ve("data_length")),Ie=this;return Ee.on("end",function(){if(this.streamInfo.data_length!==Ie.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Ee},getCompressedWorker:function(){return new te(fe.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},q.createWorkerFrom=function(Ee,Ie,ke){return Ee.pipe(new ge).pipe(new ve("uncompressedSize")).pipe(Ie.compressWorker(ke)).pipe(new ve("compressedSize")).withStreamInfo("compression",Ie)},ae.exports=q},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(F,ae,q){var fe=F("./stream/GenericWorker");q.STORE={magic:"\0\0",compressWorker:function(){return new fe("STORE compression")},uncompressWorker:function(){return new fe("STORE decompression")}},q.DEFLATE=F("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(F,ae){var q=F("./utils"),fe=function(){for(var te=[],ge=0,ve;256>ge;ge++){ve=ge;for(var Ee=0;8>Ee;Ee++)ve=1&ve?3988292384^ve>>>1:ve>>>1;te[ge]=ve}return te}();ae.exports=function(te,ge){return te!==void 0&&te.length?q.getTypeOf(te)==="string"?function(ve,Ee,Ie){ve^=-1;for(var ke=0;ke<0+Ie;ke++)ve=ve>>>8^fe[255&(ve^Ee.charCodeAt(ke))];return-1^ve}(0|ge,te,te.length):function(ve,Ee,Ie){ve^=-1;for(var ke=0;ke<0+Ie;ke++)ve=ve>>>8^fe[255&(ve^Ee[ke])];return-1^ve}(0|ge,te,te.length):0}},{"./utils":32}],5:[function(F,ae,q){q.base64=!1,q.binary=!1,q.dir=!1,q.createFolders=!0,q.date=null,q.compression=null,q.compressionOptions=null,q.comment=null,q.unixPermissions=null,q.dosPermissions=null},{}],6:[function(F,ae){var q;q=typeof Promise>"u"?F("lie"):Promise,ae.exports={Promise:q}},{lie:37}],7:[function(F,ae,q){function fe(ke,Te){Ee.call(this,"FlateWorker/"+ke),this._pako=null,this._pakoAction=ke,this._pakoOptions=Te,this.meta={}}var te=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",ge=F("pako"),ve=F("./utils"),Ee=F("./stream/GenericWorker"),Ie=te?"uint8array":"array";q.magic="\b\0",ve.inherits(fe,Ee),fe.prototype.processChunk=function(ke){this.meta=ke.meta,this._pako===null&&this._createPako(),this._pako.push(ve.transformTo(Ie,ke.data),!1)},fe.prototype.flush=function(){Ee.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},fe.prototype.cleanUp=function(){Ee.prototype.cleanUp.call(this),this._pako=null},fe.prototype._createPako=function(){this._pako=new ge[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var ke=this;this._pako.onData=function(Te){ke.push({data:Te,meta:ke.meta})}},q.compressWorker=function(ke){return new fe("Deflate",ke)},q.uncompressWorker=function(){return new fe("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(F,ae){function q(Te,Se){var Ae="",X;for(X=0;X<Se;X++)Ae+=a(255&Te),Te>>>=8;return Ae}function fe(Te,Se,Ae,X,Z,le){var z=Te.file,ee=Te.compression,we=le!==Ee.utf8encode,se=ge.transformTo("string",le(z.name)),U=ge.transformTo("string",Ee.utf8encode(z.name)),oe=z.comment,re=ge.transformTo("string",le(oe)),R=ge.transformTo("string",Ee.utf8encode(oe)),$=U.length!==z.name.length,A=R.length!==oe.length,V="",H="",N="",Y=z.dir,be=z.date,_e={crc32:0,compressedSize:0,uncompressedSize:0},ue,De;Se&&!Ae||(_e.crc32=Te.crc32,_e.compressedSize=Te.compressedSize,_e.uncompressedSize=Te.uncompressedSize);var qe=0;Se&&(qe|=8),!we&&($||A)&&(qe|=2048);var Qe=0,Ve=0,xe;Y&&(Qe|=16),Z==="UNIX"?(Ve=798,Qe|=((xe=z.unixPermissions)||(xe=Y?16893:33204),(65535&xe)<<16)):(Ve=20,Qe|=63&(z.dosPermissions||0)),ue=be.getUTCHours(),ue<<=6,ue|=be.getUTCMinutes(),ue<<=5,ue|=be.getUTCSeconds()/2,De=be.getUTCFullYear()-1980,De<<=4,De|=be.getUTCMonth()+1,De<<=5,De|=be.getUTCDate(),$&&(V+="up"+q((H=q(1,1)+q(Ie(se),4)+U).length,2)+H),A&&(V+="uc"+q((N=q(1,1)+q(Ie(re),4)+R).length,2)+N);var Oe="";return Oe+=`
\0`,Oe+=q(qe,2),Oe+=ee.magic,Oe+=q(ue,2),Oe+=q(De,2),Oe+=q(_e.crc32,4),Oe+=q(_e.compressedSize,4),Oe+=q(_e.uncompressedSize,4),Oe+=q(se.length,2),Oe+=q(V.length,2),{fileRecord:ke.LOCAL_FILE_HEADER+Oe+se+V,dirRecord:ke.CENTRAL_FILE_HEADER+q(Ve,2)+Oe+q(re.length,2)+"\0\0\0\0"+q(Qe,4)+q(X,4)+se+V+re}}function te(Te,Se,Ae,X){ve.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Se,this.zipPlatform=Ae,this.encodeFileName=X,this.streamFiles=Te,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}var ge=F("../utils"),ve=F("../stream/GenericWorker"),Ee=F("../utf8"),Ie=F("../crc32"),ke=F("../signature");ge.inherits(te,ve),te.prototype.push=function(Te){var Se=Te.meta.percent||0,Ae=this.entriesCount,X=this._sources.length;this.accumulate?this.contentBuffer.push(Te):(this.bytesWritten+=Te.data.length,ve.prototype.push.call(this,{data:Te.data,meta:{currentFile:this.currentFile,percent:Ae?(Se+100*(Ae-X-1))/Ae:100}}))},te.prototype.openedSource=function(Te){this.currentSourceOffset=this.bytesWritten,this.currentFile=Te.file.name;var Se=this.streamFiles&&!Te.file.dir;if(Se){var Ae=fe(Te,Se,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Ae.fileRecord,meta:{percent:0}})}else this.accumulate=!0},te.prototype.closedSource=function(Te){this.accumulate=!1;var Se=this.streamFiles&&!Te.file.dir,Ae=fe(Te,Se,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),X;if(this.dirRecords.push(Ae.dirRecord),Se)this.push({data:(X=Te,ke.DATA_DESCRIPTOR+q(X.crc32,4)+q(X.compressedSize,4)+q(X.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Ae.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},te.prototype.flush=function(){for(var Te=this.bytesWritten,Se=0;Se<this.dirRecords.length;Se++)this.push({data:this.dirRecords[Se],meta:{percent:100}});var Ae=this.bytesWritten-Te,X=(Z=this.dirRecords.length,le=Ae,z=Te,ee=this.zipComment,we=this.encodeFileName,se=ge.transformTo("string",we(ee)),ke.CENTRAL_DIRECTORY_END+"\0\0\0\0"+q(Z,2)+q(Z,2)+q(le,4)+q(z,4)+q(se.length,2)+se),Z,le,z,ee,we,se;this.push({data:X,meta:{percent:100}})},te.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},te.prototype.registerPrevious=function(Te){this._sources.push(Te);var Se=this;return Te.on("data",function(Ae){Se.processChunk(Ae)}),Te.on("end",function(){Se.closedSource(Se.previous.streamInfo),Se._sources.length?Se.prepareNextSource():Se.end()}),Te.on("error",function(Ae){Se.error(Ae)}),this},te.prototype.resume=function(){return!!ve.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},te.prototype.error=function(Te){var Se=this._sources;if(!ve.prototype.error.call(this,Te))return!1;for(var Ae=0;Ae<Se.length;Ae++)try{Se[Ae].error(Te)}catch{}return!0},te.prototype.lock=function(){ve.prototype.lock.call(this);for(var Te=this._sources,Se=0;Se<Te.length;Se++)Te[Se].lock()},ae.exports=te},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(F,ae,q){var fe=F("../compressions"),te=F("./ZipFileWorker");q.generateWorker=function(ge,ve,Ee){var Ie=new te(ve.streamFiles,Ee,ve.platform,ve.encodeFileName),ke=0;try{ge.forEach(function(Te,Se){ke++;var Ae=function(z,ee){var we=z||ee,se=fe[we];if(!se)throw new Error(we+" is not a valid compression method !");return se}(Se.options.compression,ve.compression),X=Se.options.compressionOptions||ve.compressionOptions||{},Z=Se.dir,le=Se.date;Se._compressWorker(Ae,X).withStreamInfo("file",{name:Te,dir:Z,date:le,comment:Se.comment||"",unixPermissions:Se.unixPermissions,dosPermissions:Se.dosPermissions}).pipe(Ie)}),Ie.entriesCount=ke}catch(Te){Ie.error(Te)}return Ie}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(F,ae){function q(){if(!(this instanceof q))return new q;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var fe=new q;for(var te in this)typeof this[te]!="function"&&(fe[te]=this[te]);return fe}}(q.prototype=F("./object")).loadAsync=F("./load"),q.support=F("./support"),q.defaults=F("./defaults"),q.version="3.5.0",q.loadAsync=function(fe,te){return new q().loadAsync(fe,te)},q.external=F("./external"),ae.exports=q},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(F,ae){function q(ke){return new te.Promise(function(Te,Se){var Ae=ke.decompressed.getContentWorker().pipe(new Ee);Ae.on("error",function(X){Se(X)}).on("end",function(){Ae.streamInfo.crc32===ke.decompressed.crc32?Te():Se(new Error("Corrupted zip : CRC32 mismatch"))}).resume()})}var fe=F("./utils"),te=F("./external"),ge=F("./utf8"),ve=F("./zipEntries"),Ee=F("./stream/Crc32Probe"),Ie=F("./nodejsUtils");ae.exports=function(ke,Te){var Se=this;return Te=fe.extend(Te||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ge.utf8decode}),Ie.isNode&&Ie.isStream(ke)?te.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):fe.prepareContent("the loaded zip file",ke,!0,Te.optimizedBinaryString,Te.base64).then(function(Ae){var X=new ve(Te);return X.load(Ae),X}).then(function(Ae){var X=[te.Promise.resolve(Ae)],Z=Ae.files;if(Te.checkCRC32)for(var le=0;le<Z.length;le++)X.push(q(Z[le]));return te.Promise.all(X)}).then(function(Ae){for(var X=Ae.shift(),Z=X.files,le=0,z;le<Z.length;le++)z=Z[le],Se.file(z.fileNameStr,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:Te.createFolders});return X.zipComment.length&&(Se.comment=X.zipComment),Se})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(F,ae){function q(ge,ve){te.call(this,"Nodejs stream input adapter for "+ge),this._upstreamEnded=!1,this._bindStream(ve)}var fe=F("../utils"),te=F("../stream/GenericWorker");fe.inherits(q,te),q.prototype._bindStream=function(ge){var ve=this;(this._stream=ge).pause(),ge.on("data",function(Ee){ve.push({data:Ee,meta:{percent:0}})}).on("error",function(Ee){ve.isPaused?this.generatedError=Ee:ve.error(Ee)}).on("end",function(){ve.isPaused?ve._upstreamEnded=!0:ve.end()})},q.prototype.pause=function(){return!!te.prototype.pause.call(this)&&(this._stream.pause(),!0)},q.prototype.resume=function(){return!!te.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},ae.exports=q},{"../stream/GenericWorker":28,"../utils":32}],13:[function(F,ae){function q(te,ge,ve){fe.call(this,ge),this._helper=te;var Ee=this;te.on("data",function(Ie,ke){Ee.push(Ie)||Ee._helper.pause(),ve&&ve(ke)}).on("error",function(Ie){Ee.emit("error",Ie)}).on("end",function(){Ee.push(null)})}var fe=F("readable-stream").Readable;F("../utils").inherits(q,fe),q.prototype._read=function(){this._helper.resume()},ae.exports=q},{"../utils":32,"readable-stream":16}],14:[function(F,ae){ae.exports={isNode:typeof d<"u",newBufferFrom:function(q,fe){if(d.from&&d.from!==Uint8Array.from)return d.from(q,fe);if(typeof q=="number")throw new Error('The "data" argument must not be a number');return new d(q,fe)},allocBuffer:function(q){if(d.alloc)return d.alloc(q);var fe=new d(q);return fe.fill(0),fe},isBuffer:function(q){return d.isBuffer(q)},isStream:function(q){return q&&typeof q.on=="function"&&typeof q.pause=="function"&&typeof q.resume=="function"}}},{}],15:[function(F,ae){function q(z,ee,we){var se=ve.getTypeOf(ee),U=ve.extend(we||{},ke),oe;U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(z=fe(z)),U.createFolders&&(oe=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var V=A.lastIndexOf("/");return 0<V?A.substring(0,V):""}(z))&&le.call(this,oe,!0);var re=se==="string"&&U.binary===!1&&U.base64===!1,R;we&&we.binary!==void 0||(U.binary=!re),(ee instanceof Te&&ee.uncompressedSize===0||U.dir||!ee||ee.length===0)&&(U.base64=!1,U.binary=!0,ee="",U.compression="STORE",se="string"),R=ee instanceof Te||ee instanceof Ee?ee:X.isNode&&X.isStream(ee)?new Z(z,ee):ve.prepareContent(z,ee,U.binary,U.optimizedBinaryString,U.base64);var $=new Se(z,R,U);this.files[z]=$}function fe(z){return z.slice(-1)!=="/"&&(z+="/"),z}function te(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var ge=F("./utf8"),ve=F("./utils"),Ee=F("./stream/GenericWorker"),Ie=F("./stream/StreamHelper"),ke=F("./defaults"),Te=F("./compressedObject"),Se=F("./zipObject"),Ae=F("./generate"),X=F("./nodejsUtils"),Z=F("./nodejs/NodejsStreamInputAdapter"),le=function(z,ee){return ee=ee===void 0?ke.createFolders:ee,z=fe(z),this.files[z]||q.call(this,z,null,{dir:!0,createFolders:ee}),this.files[z]};ae.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var ee,we,se;for(ee in this.files)this.files.hasOwnProperty(ee)&&(se=this.files[ee],(we=ee.slice(this.root.length,ee.length))&&ee.slice(0,this.root.length)===this.root&&z(we,se))},filter:function(z){var ee=[];return this.forEach(function(we,se){z(we,se)&&ee.push(se)}),ee},file:function(z,ee,we){if(arguments.length!==1)return z=this.root+z,q.call(this,z,ee,we),this;if(te(z)){var se=z;return this.filter(function(oe,re){return!re.dir&&se.test(oe)})}var U=this.files[this.root+z];return U&&!U.dir?U:null},folder:function(z){if(!z)return this;if(te(z))return this.filter(function(U,oe){return oe.dir&&z.test(U)});var ee=this.root+z,we=le.call(this,ee),se=this.clone();return se.root=we.name,se},remove:function(z){z=this.root+z;var ee=this.files[z];if(ee||(z.slice(-1)!=="/"&&(z+="/"),ee=this.files[z]),ee&&!ee.dir)delete this.files[z];else for(var we=this.filter(function(U,oe){return oe.name.slice(0,z.length)===z}),se=0;se<we.length;se++)delete this.files[we[se].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var ee={},we;try{if((ee=ve.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:ge.utf8encode})).type=ee.type.toLowerCase(),ee.compression=ee.compression.toUpperCase(),ee.type==="binarystring"&&(ee.type="string"),!ee.type)throw new Error("No output type specified.");ve.checkSupport(ee.type),ee.platform!=="darwin"&&ee.platform!=="freebsd"&&ee.platform!=="linux"&&ee.platform!=="sunos"||(ee.platform="UNIX"),ee.platform==="win32"&&(ee.platform="DOS");var se=ee.comment||this.comment||"";we=Ae.generateWorker(this,ee,se)}catch(U){(we=new Ee("error")).error(U)}return new Ie(we,ee.type||"string",ee.mimeType)},generateAsync:function(z,ee){return this.generateInternalStream(z).accumulate(ee)},generateNodeStream:function(z,ee){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(ee)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(F,ae){ae.exports=F("stream")},{stream:void 0}],17:[function(F,ae){function q(te){fe.call(this,te);for(var ge=0;ge<this.data.length;ge++)te[ge]=255&te[ge]}var fe=F("./DataReader");F("../utils").inherits(q,fe),q.prototype.byteAt=function(te){return this.data[this.zero+te]},q.prototype.lastIndexOfSignature=function(te){for(var ge=te.charCodeAt(0),ve=te.charCodeAt(1),Ee=te.charCodeAt(2),Ie=te.charCodeAt(3),ke=this.length-4;0<=ke;--ke)if(this.data[ke]===ge&&this.data[ke+1]===ve&&this.data[ke+2]===Ee&&this.data[ke+3]===Ie)return ke-this.zero;return-1},q.prototype.readAndCheckSignature=function(te){var ge=te.charCodeAt(0),ve=te.charCodeAt(1),Ee=te.charCodeAt(2),Ie=te.charCodeAt(3),ke=this.readData(4);return ge===ke[0]&&ve===ke[1]&&Ee===ke[2]&&Ie===ke[3]},q.prototype.readData=function(te){if(this.checkOffset(te),te===0)return[];var ge=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,ge},ae.exports=q},{"../utils":32,"./DataReader":18}],18:[function(F,ae){function q(te){this.data=te,this.length=te.length,this.index=0,this.zero=0}var fe=F("../utils");q.prototype={checkOffset:function(te){this.checkIndex(this.index+te)},checkIndex:function(te){if(this.length<this.zero+te||0>te)throw new Error("End of data reached (data length = "+this.length+", asked index = "+te+"). Corrupted zip ?")},setIndex:function(te){this.checkIndex(te),this.index=te},skip:function(te){this.setIndex(this.index+te)},byteAt:function(){},readInt:function(te){var ge=0,ve;for(this.checkOffset(te),ve=this.index+te-1;ve>=this.index;ve--)ge=(ge<<8)+this.byteAt(ve);return this.index+=te,ge},readString:function(te){return fe.transformTo("string",this.readData(te))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var te=this.readInt(4);return new Date(Date.UTC(1980+(127&te>>25),(15&te>>21)-1,31&te>>16,31&te>>11,63&te>>5,(31&te)<<1))}},ae.exports=q},{"../utils":32}],19:[function(F,ae){function q(te){fe.call(this,te)}var fe=F("./Uint8ArrayReader");F("../utils").inherits(q,fe),q.prototype.readData=function(te){this.checkOffset(te);var ge=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,ge},ae.exports=q},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(F,ae){function q(te){fe.call(this,te)}var fe=F("./DataReader");F("../utils").inherits(q,fe),q.prototype.byteAt=function(te){return this.data.charCodeAt(this.zero+te)},q.prototype.lastIndexOfSignature=function(te){return this.data.lastIndexOf(te)-this.zero},q.prototype.readAndCheckSignature=function(te){return te===this.readData(4)},q.prototype.readData=function(te){this.checkOffset(te);var ge=this.data.slice(this.zero+this.index,this.zero+this.index+te);return this.index+=te,ge},ae.exports=q},{"../utils":32,"./DataReader":18}],21:[function(F,ae){function q(te){fe.call(this,te)}var fe=F("./ArrayReader");F("../utils").inherits(q,fe),q.prototype.readData=function(te){if(this.checkOffset(te),te===0)return new Uint8Array(0);var ge=this.data.subarray(this.zero+this.index,this.zero+this.index+te);return this.index+=te,ge},ae.exports=q},{"../utils":32,"./ArrayReader":17}],22:[function(F,ae){var q=F("../utils"),fe=F("../support"),te=F("./ArrayReader"),ge=F("./StringReader"),ve=F("./NodeBufferReader"),Ee=F("./Uint8ArrayReader");ae.exports=function(Ie){var ke=q.getTypeOf(Ie);return q.checkSupport(ke),ke!=="string"||fe.uint8array?ke==="nodebuffer"?new ve(Ie):fe.uint8array?new Ee(q.transformTo("uint8array",Ie)):new te(q.transformTo("array",Ie)):new ge(Ie)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(F,ae,q){q.LOCAL_FILE_HEADER="PK",q.CENTRAL_FILE_HEADER="PK",q.CENTRAL_DIRECTORY_END="PK",q.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",q.ZIP64_CENTRAL_DIRECTORY_END="PK",q.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(F,ae){function q(ge){fe.call(this,"ConvertWorker to "+ge),this.destType=ge}var fe=F("./GenericWorker"),te=F("../utils");te.inherits(q,fe),q.prototype.processChunk=function(ge){this.push({data:te.transformTo(this.destType,ge.data),meta:ge.meta})},ae.exports=q},{"../utils":32,"./GenericWorker":28}],25:[function(F,ae){function q(){fe.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}var fe=F("./GenericWorker"),te=F("../crc32");F("../utils").inherits(q,fe),q.prototype.processChunk=function(ge){this.streamInfo.crc32=te(ge.data,this.streamInfo.crc32||0),this.push(ge)},ae.exports=q},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(F,ae){function q(ge){te.call(this,"DataLengthProbe for "+ge),this.propName=ge,this.withStreamInfo(ge,0)}var fe=F("../utils"),te=F("./GenericWorker");fe.inherits(q,te),q.prototype.processChunk=function(ge){if(ge){var ve=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=ve+ge.data.length}te.prototype.processChunk.call(this,ge)},ae.exports=q},{"../utils":32,"./GenericWorker":28}],27:[function(F,ae){function q(ge){te.call(this,"DataWorker");var ve=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,ge.then(function(Ee){ve.dataIsReady=!0,ve.data=Ee,ve.max=Ee&&Ee.length||0,ve.type=fe.getTypeOf(Ee),ve.isPaused||ve._tickAndRepeat()},function(Ee){ve.error(Ee)})}var fe=F("../utils"),te=F("./GenericWorker");fe.inherits(q,te),q.prototype.cleanUp=function(){te.prototype.cleanUp.call(this),this.data=null},q.prototype.resume=function(){return!!te.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,fe.delay(this._tickAndRepeat,[],this)),!0)},q.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(fe.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},q.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var ge=null,ve=s(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":ge=this.data.substring(this.index,ve);break;case"uint8array":ge=this.data.subarray(this.index,ve);break;case"array":case"nodebuffer":ge=this.data.slice(this.index,ve)}return this.index=ve,this.push({data:ge,meta:{percent:this.max?100*(this.index/this.max):0}})},ae.exports=q},{"../utils":32,"./GenericWorker":28}],28:[function(F,ae){function q(fe){this.name=fe||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}q.prototype={push:function(fe){this.emit("data",fe)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(fe){this.emit("error",fe)}return!0},error:function(fe){return!this.isFinished&&(this.isPaused?this.generatedError=fe:(this.isFinished=!0,this.emit("error",fe),this.previous&&this.previous.error(fe),this.cleanUp()),!0)},on:function(fe,te){return this._listeners[fe].push(te),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(fe,te){if(this._listeners[fe])for(var ge=0;ge<this._listeners[fe].length;ge++)this._listeners[fe][ge].call(this,te)},pipe:function(fe){return fe.registerPrevious(this)},registerPrevious:function(fe){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=fe.streamInfo,this.mergeStreamInfo(),this.previous=fe;var te=this;return fe.on("data",function(ge){te.processChunk(ge)}),fe.on("end",function(){te.end()}),fe.on("error",function(ge){te.error(ge)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var fe=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),fe=!0),this.previous&&this.previous.resume(),!fe},flush:function(){},processChunk:function(fe){this.push(fe)},withStreamInfo:function(fe,te){return this.extraStreamInfo[fe]=te,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var fe in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(fe)&&(this.streamInfo[fe]=this.extraStreamInfo[fe])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var fe="Worker "+this.name;return this.previous?this.previous+" -> "+fe:fe}},ae.exports=q},{}],29:[function(F,ae){function q(Te,Se,Ae){var X=Se;Se==="blob"||Se==="arraybuffer"?X="uint8array":Se==="base64"&&(X="string");try{this._internalType=X,this._outputType=Se,this._mimeType=Ae,fe.checkSupport(X),this._worker=Te.pipe(new te(X)),Te.lock()}catch(Z){this._worker=new ge("error"),this._worker.error(Z)}}var fe=F("../utils"),te=F("./ConvertWorker"),ge=F("./GenericWorker"),ve=F("../base64"),Ee=F("../support"),Ie=F("../external"),ke=null;if(Ee.nodestream)try{ke=F("../nodejs/NodejsStreamOutputAdapter")}catch{}q.prototype={accumulate:function(Te){return Se=this,Ae=Te,new Ie.Promise(function(X,Z){var le=[],z=Se._internalType,ee=Se._outputType,we=Se._mimeType;Se.on("data",function(se,U){le.push(se),Ae&&Ae(U)}).on("error",function(se){le=[],Z(se)}).on("end",function(){try{var se=function(U,oe,re){return U==="blob"?fe.newBlob(fe.transformTo("arraybuffer",oe),re):U==="base64"?ve.encode(oe):fe.transformTo(U,oe)}(ee,function(U,oe){var re=0,R=null,$=0,A;for(A=0;A<oe.length;A++)$+=oe[A].length;switch(U){case"string":return oe.join("");case"array":return Array.prototype.concat.apply([],oe);case"uint8array":for(R=new Uint8Array($),A=0;A<oe.length;A++)R.set(oe[A],re),re+=oe[A].length;return R;case"nodebuffer":return d.concat(oe);default:throw new Error("concat : unsupported type '"+U+"'")}}(z,le),we);X(se)}catch(U){Z(U)}le=[]}).resume()});var Se,Ae},on:function(Te,Se){var Ae=this;return Te==="data"?this._worker.on(Te,function(X){Se.call(Ae,X.data,X.meta)}):this._worker.on(Te,function(){fe.delay(Se,arguments,Ae)}),this},resume:function(){return fe.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Te){if(fe.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new ke(this,{objectMode:this._outputType!=="nodebuffer"},Te)}},ae.exports=q},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(F,ae,q){if(q.base64=!0,q.array=!0,q.string=!0,q.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",q.nodebuffer=typeof d<"u",q.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")q.blob=!1;else{var fe=new ArrayBuffer(0);try{q.blob=new Blob([fe],{type:"application/zip"}).size===0}catch{try{var te=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);te.append(fe),q.blob=te.getBlob("application/zip").size===0}catch{q.blob=!1}}}try{q.nodestream=!!F("readable-stream").Readable}catch{q.nodestream=!1}},{"readable-stream":16}],31:[function(F,ae,q){function fe(){Ie.call(this,"utf-8 decode"),this.leftOver=null}function te(){Ie.call(this,"utf-8 encode")}for(var ge=F("./utils"),ve=F("./support"),Ee=F("./nodejsUtils"),Ie=F("./stream/GenericWorker"),ke=Array(256),Te=0;256>Te;Te++)ke[Te]=252<=Te?6:248<=Te?5:240<=Te?4:224<=Te?3:192<=Te?2:1;ke[254]=ke[254]=1,q.utf8encode=function(Se){return ve.nodebuffer?Ee.newBufferFrom(Se,"utf-8"):function(Ae){var X=Ae.length,Z=0,le,z,ee,we,se;for(we=0;we<X;we++)(64512&(z=Ae.charCodeAt(we)))==55296&&we+1<X&&(64512&(ee=Ae.charCodeAt(we+1)))==56320&&(z=65536+(z-55296<<10)+(ee-56320),we++),Z+=128>z?1:2048>z?2:65536>z?3:4;for(le=ve.uint8array?new Uint8Array(Z):Array(Z),we=se=0;se<Z;we++)(64512&(z=Ae.charCodeAt(we)))==55296&&we+1<X&&(64512&(ee=Ae.charCodeAt(we+1)))==56320&&(z=65536+(z-55296<<10)+(ee-56320),we++),128>z?le[se++]=z:(2048>z?le[se++]=192|z>>>6:(65536>z?le[se++]=224|z>>>12:(le[se++]=240|z>>>18,le[se++]=128|63&z>>>12),le[se++]=128|63&z>>>6),le[se++]=128|63&z);return le}(Se)},q.utf8decode=function(Se){return ve.nodebuffer?ge.transformTo("nodebuffer",Se).toString("utf-8"):function(Ae){var X=Ae.length,Z=Array(2*X),le,z,ee,we;for(le=z=0;le<X;)if(128>(ee=Ae[le++]))Z[z++]=ee;else if(4<(we=ke[ee]))Z[z++]=65533,le+=we-1;else{for(ee&=we===2?31:we===3?15:7;1<we&&le<X;)ee=ee<<6|63&Ae[le++],we--;1<we?Z[z++]=65533:65536>ee?Z[z++]=ee:(ee-=65536,Z[z++]=55296|1023&ee>>10,Z[z++]=56320|1023&ee)}return Z.length!==z&&(Z.subarray?Z=Z.subarray(0,z):Z.length=z),ge.applyFromCharCode(Z)}(Se=ge.transformTo(ve.uint8array?"uint8array":"array",Se))},ge.inherits(fe,Ie),fe.prototype.processChunk=function(Se){var Ae=ge.transformTo(ve.uint8array?"uint8array":"array",Se.data);if(this.leftOver&&this.leftOver.length){if(ve.uint8array){var X=Ae;(Ae=new Uint8Array(X.length+this.leftOver.length)).set(this.leftOver,0),Ae.set(X,this.leftOver.length)}else Ae=this.leftOver.concat(Ae);this.leftOver=null}var Z=function(z,ee){var we;for((ee=ee||z.length)>z.length&&(ee=z.length),we=ee-1;0<=we&&(192&z[we])==128;)we--;return 0>we||we===0?ee:we+ke[z[we]]>ee?we:ee}(Ae),le=Ae;Z!==Ae.length&&(ve.uint8array?(le=Ae.subarray(0,Z),this.leftOver=Ae.subarray(Z,Ae.length)):(le=Ae.slice(0,Z),this.leftOver=Ae.slice(Z,Ae.length))),this.push({data:q.utf8decode(le),meta:Se.meta})},fe.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:q.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},q.Utf8DecodeWorker=fe,ge.inherits(te,Ie),te.prototype.processChunk=function(Se){this.push({data:q.utf8encode(Se.data),meta:Se.meta})},q.Utf8EncodeWorker=te},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(F,ae,q){function fe(Z){return Z}function te(Z,le){for(var z=0;z<Z.length;++z)le[z]=255&Z.charCodeAt(z);return le}function ge(Z){var le=65536,z=q.getTypeOf(Z),ee=!0;if(z==="uint8array"?ee=Ae.applyCanBeUsed.uint8array:z==="nodebuffer"&&(ee=Ae.applyCanBeUsed.nodebuffer),ee)for(;1<le;)try{return Ae.stringifyByChunk(Z,z,le)}catch{le=o(le/2)}return Ae.stringifyByChar(Z)}function ve(Z,le){for(var z=0;z<Z.length;z++)le[z]=Z[z];return le}var Ee=F("./support"),Ie=F("./base64"),ke=F("./nodejsUtils"),Te=F("set-immediate-shim"),Se=F("./external");q.newBlob=function(Z,le){q.checkSupport("blob");try{return new Blob([Z],{type:le})}catch{try{var z=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return z.append(Z),z.getBlob(le)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ae={stringifyByChunk:function(Z,le,z){var ee=[],we=0,se=Z.length;if(se<=z)return a.apply(null,Z);for(;we<se;)le==="array"||le==="nodebuffer"?ee.push(a.apply(null,Z.slice(we,s(we+z,se)))):ee.push(a.apply(null,Z.subarray(we,s(we+z,se)))),we+=z;return ee.join("")},stringifyByChar:function(Z){for(var le="",z=0;z<Z.length;z++)le+=a(Z[z]);return le},applyCanBeUsed:{uint8array:function(){try{return Ee.uint8array&&a.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return Ee.nodebuffer&&a.apply(null,ke.allocBuffer(1)).length===1}catch{return!1}}()}};q.applyFromCharCode=ge;var X={};X.string={string:fe,array:function(Z){return te(Z,Array(Z.length))},arraybuffer:function(Z){return X.string.uint8array(Z).buffer},uint8array:function(Z){return te(Z,new Uint8Array(Z.length))},nodebuffer:function(Z){return te(Z,ke.allocBuffer(Z.length))}},X.array={string:ge,array:fe,arraybuffer:function(Z){return new Uint8Array(Z).buffer},uint8array:function(Z){return new Uint8Array(Z)},nodebuffer:function(Z){return ke.newBufferFrom(Z)}},X.arraybuffer={string:function(Z){return ge(new Uint8Array(Z))},array:function(Z){return ve(new Uint8Array(Z),Array(Z.byteLength))},arraybuffer:fe,uint8array:function(Z){return new Uint8Array(Z)},nodebuffer:function(Z){return ke.newBufferFrom(new Uint8Array(Z))}},X.uint8array={string:ge,array:function(Z){return ve(Z,Array(Z.length))},arraybuffer:function(Z){return Z.buffer},uint8array:fe,nodebuffer:function(Z){return ke.newBufferFrom(Z)}},X.nodebuffer={string:ge,array:function(Z){return ve(Z,Array(Z.length))},arraybuffer:function(Z){return X.nodebuffer.uint8array(Z).buffer},uint8array:function(Z){return ve(Z,new Uint8Array(Z.length))},nodebuffer:fe},q.transformTo=function(Z,le){if(le=le||"",!Z)return le;q.checkSupport(Z);var z=q.getTypeOf(le);return X[z][Z](le)},q.getTypeOf=function(Z){return typeof Z=="string"?"string":Object.prototype.toString.call(Z)==="[object Array]"?"array":Ee.nodebuffer&&ke.isBuffer(Z)?"nodebuffer":Ee.uint8array&&Z instanceof Uint8Array?"uint8array":Ee.arraybuffer&&Z instanceof ArrayBuffer?"arraybuffer":void 0},q.checkSupport=function(Z){if(!Ee[Z.toLowerCase()])throw new Error(Z+" is not supported by this platform")},q.MAX_VALUE_16BITS=65535,q.MAX_VALUE_32BITS=-1,q.pretty=function(Z){var le="",z,ee;for(ee=0;ee<(Z||"").length;ee++)le+="\\x"+(16>(z=Z.charCodeAt(ee))?"0":"")+z.toString(16).toUpperCase();return le},q.delay=function(Z,le,z){Te(function(){Z.apply(z||null,le||[])})},q.inherits=function(Z,le){function z(){}z.prototype=le.prototype,Z.prototype=new z},q.extend=function(){var Z={},le,z;for(le=0;le<arguments.length;le++)for(z in arguments[le])arguments[le].hasOwnProperty(z)&&Z[z]===void 0&&(Z[z]=arguments[le][z]);return Z},q.prepareContent=function(Z,le,z,ee,we){return Se.Promise.resolve(le).then(function(se){return Ee.blob&&(se instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(se))!==-1)&&typeof FileReader<"u"?new Se.Promise(function(U,oe){var re=new FileReader;re.onload=function(R){U(R.target.result)},re.onerror=function(R){oe(R.target.error)},re.readAsArrayBuffer(se)}):se}).then(function(se){var U=q.getTypeOf(se),oe;return U?(U==="arraybuffer"?se=q.transformTo("uint8array",se):U==="string"&&(we?se=Ie.decode(se):z&&ee!==!0&&(se=te(oe=se,Ee.uint8array?new Uint8Array(oe.length):Array(oe.length)))),se):Se.Promise.reject(new Error("Can't read the data of '"+Z+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(F,ae){function q(Ie){this.files=[],this.loadOptions=Ie}var fe=F("./reader/readerFor"),te=F("./utils"),ge=F("./signature"),ve=F("./zipEntry"),Ee=(F("./utf8"),F("./support"));q.prototype={checkSignature:function(Ie){if(!this.reader.readAndCheckSignature(Ie)){this.reader.index-=4;var ke=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+te.pretty(ke)+", expected "+te.pretty(Ie)+")")}},isSignature:function(Ie,ke){var Te=this.reader.index;this.reader.setIndex(Ie);var Se=this.reader.readString(4)===ke;return this.reader.setIndex(Te),Se},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Ie=this.reader.readData(this.zipCommentLength),ke=Ee.uint8array?"uint8array":"array",Te=te.transformTo(ke,Ie);this.zipComment=this.loadOptions.decodeFileName(Te)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Ie=this.zip64EndOfCentralSize-44,ke,Te,Se;0<Ie;)ke=this.reader.readInt(2),Te=this.reader.readInt(4),Se=this.reader.readData(Te),this.zip64ExtensibleData[ke]={id:ke,length:Te,value:Se}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Ie,ke;for(Ie=0;Ie<this.files.length;Ie++)ke=this.files[Ie],this.reader.setIndex(ke.localHeaderOffset),this.checkSignature(ge.LOCAL_FILE_HEADER),ke.readLocalPart(this.reader),ke.handleUTF8(),ke.processAttributes()},readCentralDir:function(){var Ie;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ge.CENTRAL_FILE_HEADER);)(Ie=new ve({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Ie);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Ie=this.reader.lastIndexOfSignature(ge.CENTRAL_DIRECTORY_END);if(0>Ie)throw this.isSignature(0,ge.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Ie);var ke=Ie;if(this.checkSignature(ge.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===te.MAX_VALUE_16BITS||this.diskWithCentralDirStart===te.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===te.MAX_VALUE_16BITS||this.centralDirRecords===te.MAX_VALUE_16BITS||this.centralDirSize===te.MAX_VALUE_32BITS||this.centralDirOffset===te.MAX_VALUE_32BITS){if(this.zip64=!0,0>(Ie=this.reader.lastIndexOfSignature(ge.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Ie),this.checkSignature(ge.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ge.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ge.ZIP64_CENTRAL_DIRECTORY_END),0>this.relativeOffsetEndOfZip64CentralDir))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ge.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Te=this.centralDirOffset+this.centralDirSize;this.zip64&&(Te+=20,Te+=12+this.zip64EndOfCentralSize);var Se=ke-Te;if(0<Se)this.isSignature(ke,ge.CENTRAL_FILE_HEADER)||(this.reader.zero=Se);else if(0>Se)throw new Error("Corrupted zip: missing "+i(Se)+" bytes.")},prepareReader:function(Ie){this.reader=fe(Ie)},load:function(Ie){this.prepareReader(Ie),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ae.exports=q},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(F,ae){function q(Te,Se){this.options=Te,this.loadOptions=Se}var fe=F("./reader/readerFor"),te=F("./utils"),ge=F("./compressedObject"),ve=F("./crc32"),Ee=F("./utf8"),Ie=F("./compressions"),ke=F("./support");q.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(Te){var Se,Ae;if(Te.skip(22),this.fileNameLength=Te.readInt(2),Ae=Te.readInt(2),this.fileName=Te.readData(this.fileNameLength),Te.skip(Ae),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((Se=function(X){for(var Z in Ie)if(Ie.hasOwnProperty(Z)&&Ie[Z].magic===X)return Ie[Z];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+te.pretty(this.compressionMethod)+" unknown (inner file : "+te.transformTo("string",this.fileName)+")");this.decompressed=new ge(this.compressedSize,this.uncompressedSize,this.crc32,Se,Te.readData(this.compressedSize))},readCentralPart:function(Te){this.versionMadeBy=Te.readInt(2),Te.skip(2),this.bitFlag=Te.readInt(2),this.compressionMethod=Te.readString(2),this.date=Te.readDate(),this.crc32=Te.readInt(4),this.compressedSize=Te.readInt(4),this.uncompressedSize=Te.readInt(4);var Se=Te.readInt(2);if(this.extraFieldsLength=Te.readInt(2),this.fileCommentLength=Te.readInt(2),this.diskNumberStart=Te.readInt(2),this.internalFileAttributes=Te.readInt(2),this.externalFileAttributes=Te.readInt(4),this.localHeaderOffset=Te.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Te.skip(Se),this.readExtraFields(Te),this.parseZIP64ExtraField(Te),this.fileComment=Te.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Te=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),Te==0&&(this.dosPermissions=63&this.externalFileAttributes),Te==3&&(this.unixPermissions=65535&this.externalFileAttributes>>16),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Te=fe(this.extraFields[1].value);this.uncompressedSize===te.MAX_VALUE_32BITS&&(this.uncompressedSize=Te.readInt(8)),this.compressedSize===te.MAX_VALUE_32BITS&&(this.compressedSize=Te.readInt(8)),this.localHeaderOffset===te.MAX_VALUE_32BITS&&(this.localHeaderOffset=Te.readInt(8)),this.diskNumberStart===te.MAX_VALUE_32BITS&&(this.diskNumberStart=Te.readInt(4))}},readExtraFields:function(Te){var Se=Te.index+this.extraFieldsLength,Ae,X,Z;for(this.extraFields||(this.extraFields={});Te.index+4<Se;)Ae=Te.readInt(2),X=Te.readInt(2),Z=Te.readData(X),this.extraFields[Ae]={id:Ae,length:X,value:Z};Te.setIndex(Se)},handleUTF8:function(){var Te=ke.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ee.utf8decode(this.fileName),this.fileCommentStr=Ee.utf8decode(this.fileComment);else{var Se=this.findExtraFieldUnicodePath();if(Se!==null)this.fileNameStr=Se;else{var Ae=te.transformTo(Te,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Ae)}var X=this.findExtraFieldUnicodeComment();if(X!==null)this.fileCommentStr=X;else{var Z=te.transformTo(Te,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(Z)}}},findExtraFieldUnicodePath:function(){var Te=this.extraFields[28789];if(Te){var Se=fe(Te.value);return Se.readInt(1)===1&&ve(this.fileName)===Se.readInt(4)?Ee.utf8decode(Se.readData(Te.length-5)):null}return null},findExtraFieldUnicodeComment:function(){var Te=this.extraFields[25461];if(Te){var Se=fe(Te.value);return Se.readInt(1)===1&&ve(this.fileComment)===Se.readInt(4)?Ee.utf8decode(Se.readData(Te.length-5)):null}return null}},ae.exports=q},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(F,ae){function q(Se,Ae,X){this.name=Se,this.dir=X.dir,this.date=X.date,this.comment=X.comment,this.unixPermissions=X.unixPermissions,this.dosPermissions=X.dosPermissions,this._data=Ae,this._dataBinary=X.binary,this.options={compression:X.compression,compressionOptions:X.compressionOptions}}var fe=F("./stream/StreamHelper"),te=F("./stream/DataWorker"),ge=F("./utf8"),ve=F("./compressedObject"),Ee=F("./stream/GenericWorker");q.prototype={internalStream:function(Se){var Ae=null,X="string";try{if(!Se)throw new Error("No output type specified.");var Z=(X=Se.toLowerCase())==="string"||X==="text";X!=="binarystring"&&X!=="text"||(X="string"),Ae=this._decompressWorker();var le=!this._dataBinary;le&&!Z&&(Ae=Ae.pipe(new ge.Utf8EncodeWorker)),!le&&Z&&(Ae=Ae.pipe(new ge.Utf8DecodeWorker))}catch(z){(Ae=new Ee("error")).error(z)}return new fe(Ae,X,"")},async:function(Se,Ae){return this.internalStream(Se).accumulate(Ae)},nodeStream:function(Se,Ae){return this.internalStream(Se||"nodebuffer").toNodejsStream(Ae)},_compressWorker:function(Se,Ae){if(this._data instanceof ve&&this._data.compression.magic===Se.magic)return this._data.getCompressedWorker();var X=this._decompressWorker();return this._dataBinary||(X=X.pipe(new ge.Utf8EncodeWorker)),ve.createWorkerFrom(X,Se,Ae)},_decompressWorker:function(){return this._data instanceof ve?this._data.getContentWorker():this._data instanceof Ee?this._data:new te(this._data)}};for(var Ie=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],ke=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Te=0;Te<Ie.length;Te++)q.prototype[Ie[Te]]=ke;ae.exports=q},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(F,ae){(function(q){function fe(){var Ae,X;ve=!0;for(var Z=Se.length;Z;){for(X=Se,Se=[],Ae=-1;++Ae<Z;)X[Ae]();Z=Se.length}ve=!1}var te=q.MutationObserver||q.WebKitMutationObserver,ge,ve;if(te){var Ee=0,Ie=new te(fe),ke=q.document.createTextNode("");Ie.observe(ke,{characterData:!0}),ge=function(){ke.data=Ee=++Ee%2}}else if(q.setImmediate||q.MessageChannel===void 0)ge="document"in q&&"onreadystatechange"in q.document.createElement("script")?function(){var Ae=q.document.createElement("script");Ae.onreadystatechange=function(){fe(),Ae.onreadystatechange=null,Ae.parentNode.removeChild(Ae),Ae=null},q.document.documentElement.appendChild(Ae)}:function(){setTimeout(fe,0)};else{var Te=new q.MessageChannel;Te.port1.onmessage=fe,ge=function(){Te.port2.postMessage(0)}}var Se=[];ae.exports=function(Ae){Se.push(Ae)!==1||ve||ge()}}).call(this,L===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:L)},{}],37:[function(F,ae){function q(){}function fe(Z){if(typeof Z!="function")throw new TypeError("resolver must be a function");this.state=X,this.queue=[],this.outcome=void 0,Z!==q&&Ee(this,Z)}function te(Z,le,z){this.promise=Z,typeof le=="function"&&(this.onFulfilled=le,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function ge(Z,le,z){ke(function(){var ee;try{ee=le(z)}catch(we){return Te.reject(Z,we)}ee===Z?Te.reject(Z,new TypeError("Cannot resolve promise with itself")):Te.resolve(Z,ee)})}function ve(Z){var le=Z&&Z.then;if(Z&&(typeof Z=="object"||typeof Z=="function")&&typeof le=="function")return function(){le.apply(Z,arguments)}}function Ee(Z,le){function z(U){we||(we=!0,Te.reject(Z,U))}function ee(U){we||(we=!0,Te.resolve(Z,U))}var we=!1,se=Ie(function(){le(ee,z)});se.status==="error"&&z(se.value)}function Ie(Z,le){var z={};try{z.value=Z(le),z.status="success"}catch(ee){z.status="error",z.value=ee}return z}var ke=F("immediate"),Te={},Se=["REJECTED"],Ae=["FULFILLED"],X=["PENDING"];(ae.exports=fe).prototype.finally=function(Z){if(typeof Z!="function")return this;var le=this.constructor;return this.then(function(z){return le.resolve(Z()).then(function(){return z})},function(z){return le.resolve(Z()).then(function(){throw z})})},fe.prototype.catch=function(Z){return this.then(null,Z)},fe.prototype.then=function(Z,le){if(typeof Z!="function"&&this.state===Ae||typeof le!="function"&&this.state===Se)return this;var z=new this.constructor(q);return this.state===X?this.queue.push(new te(z,Z,le)):ge(z,this.state===Ae?Z:le,this.outcome),z},te.prototype.callFulfilled=function(Z){Te.resolve(this.promise,Z)},te.prototype.otherCallFulfilled=function(Z){ge(this.promise,this.onFulfilled,Z)},te.prototype.callRejected=function(Z){Te.reject(this.promise,Z)},te.prototype.otherCallRejected=function(Z){ge(this.promise,this.onRejected,Z)},Te.resolve=function(Z,le){var z=Ie(ve,le);if(z.status==="error")return Te.reject(Z,z.value);var ee=z.value;if(ee)Ee(Z,ee);else{Z.state=Ae,Z.outcome=le;for(var we=-1,se=Z.queue.length;++we<se;)Z.queue[we].callFulfilled(le)}return Z},Te.reject=function(Z,le){Z.state=Se,Z.outcome=le;for(var z=-1,ee=Z.queue.length;++z<ee;)Z.queue[z].callRejected(le);return Z},fe.resolve=function(Z){return Z instanceof this?Z:Te.resolve(new this(q),Z)},fe.reject=function(Z){var le=new this(q);return Te.reject(le,Z)},fe.all=function(Z){function le(R,$){z.resolve(R).then(function(A){se[$]=A,++U!==ee||we||(we=!0,Te.resolve(re,se))},function(A){we||(we=!0,Te.reject(re,A))})}var z=this;if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ee=Z.length,we=!1;if(!ee)return this.resolve([]);for(var se=Array(ee),U=0,oe=-1,re=new this(q);++oe<ee;)le(Z[oe],oe);return re},fe.race=function(Z){if(Object.prototype.toString.call(Z)!=="[object Array]")return this.reject(new TypeError("must be an array"));var le=Z.length,z=!1;if(!le)return this.resolve([]);for(var ee=-1,we=new this(q),se;++ee<le;)se=Z[ee],this.resolve(se).then(function(U){z||(z=!0,Te.resolve(we,U))},function(U){z||(z=!0,Te.reject(we,U))});return we}},{immediate:36}],38:[function(F,ae){var q={};(0,F("./lib/utils/common").assign)(q,F("./lib/deflate"),F("./lib/inflate"),F("./lib/zlib/constants")),ae.exports=q},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(F,ae,q){function fe(Se){if(!(this instanceof fe))return new fe(Se);this.options=ve.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},Se||{});var Ae=this.options;Ae.raw&&0<Ae.windowBits?Ae.windowBits=-Ae.windowBits:Ae.gzip&&0<Ae.windowBits&&16>Ae.windowBits&&(Ae.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ke,this.strm.avail_out=0;var X=ge.deflateInit2(this.strm,Ae.level,Ae.method,Ae.windowBits,Ae.memLevel,Ae.strategy);if(X!==0)throw new Error(Ie[X]);if(Ae.header&&ge.deflateSetHeader(this.strm,Ae.header),Ae.dictionary){var Z;if(Z=typeof Ae.dictionary=="string"?Ee.string2buf(Ae.dictionary):Te.call(Ae.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Ae.dictionary):Ae.dictionary,(X=ge.deflateSetDictionary(this.strm,Z))!==0)throw new Error(Ie[X]);this._dict_set=!0}}function te(Se,Ae){var X=new fe(Ae);if(X.push(Se,!0),X.err)throw X.msg||Ie[X.err];return X.result}var ge=F("./zlib/deflate"),ve=F("./utils/common"),Ee=F("./utils/strings"),Ie=F("./zlib/messages"),ke=F("./zlib/zstream"),Te=Object.prototype.toString;fe.prototype.push=function(Se,Ae){var X=this.strm,Z=this.options.chunkSize,le,z;if(this.ended)return!1;z=Ae===~~Ae?Ae:Ae===!0?4:0,X.input=typeof Se=="string"?Ee.string2buf(Se):Te.call(Se)==="[object ArrayBuffer]"?new Uint8Array(Se):Se,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new ve.Buf8(Z),X.next_out=0,X.avail_out=Z),(le=ge.deflate(X,z))!==1&&le!==0)return this.onEnd(le),!(this.ended=!0);X.avail_out!==0&&(X.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(Ee.buf2binstring(ve.shrinkBuf(X.output,X.next_out))):this.onData(ve.shrinkBuf(X.output,X.next_out)))}while((0<X.avail_in||X.avail_out===0)&&le!==1);return z===4?(le=ge.deflateEnd(this.strm),this.onEnd(le),this.ended=!0,le===0):z!=2||(this.onEnd(0),!(X.avail_out=0))},fe.prototype.onData=function(Se){this.chunks.push(Se)},fe.prototype.onEnd=function(Se){Se===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=Se,this.msg=this.strm.msg},q.Deflate=fe,q.deflate=te,q.deflateRaw=function(Se,Ae){return(Ae=Ae||{}).raw=!0,te(Se,Ae)},q.gzip=function(Se,Ae){return(Ae=Ae||{}).gzip=!0,te(Se,Ae)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(F,ae,q){function fe(X){if(!(this instanceof fe))return new fe(X);this.options=ve.assign({chunkSize:16384,windowBits:0,to:""},X||{});var Z=this.options;Z.raw&&0<=Z.windowBits&&16>Z.windowBits&&(Z.windowBits=-Z.windowBits,Z.windowBits===0&&(Z.windowBits=-15)),!(0<=Z.windowBits&&16>Z.windowBits)||X&&X.windowBits||(Z.windowBits+=32),15<Z.windowBits&&48>Z.windowBits&&(15&Z.windowBits)==0&&(Z.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Te,this.strm.avail_out=0;var le=ge.inflateInit2(this.strm,Z.windowBits);if(le!==Ie.Z_OK)throw new Error(ke[le]);this.header=new Se,ge.inflateGetHeader(this.strm,this.header)}function te(X,Z){var le=new fe(Z);if(le.push(X,!0),le.err)throw le.msg||ke[le.err];return le.result}var ge=F("./zlib/inflate"),ve=F("./utils/common"),Ee=F("./utils/strings"),Ie=F("./zlib/constants"),ke=F("./zlib/messages"),Te=F("./zlib/zstream"),Se=F("./zlib/gzheader"),Ae=Object.prototype.toString;fe.prototype.push=function(X,Z){var le=this.strm,z=this.options.chunkSize,ee=this.options.dictionary,we=!1,se,U,oe,re,R,$;if(this.ended)return!1;U=Z===~~Z?Z:Z===!0?Ie.Z_FINISH:Ie.Z_NO_FLUSH,le.input=typeof X=="string"?Ee.binstring2buf(X):Ae.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,le.next_in=0,le.avail_in=le.input.length;do{if(le.avail_out===0&&(le.output=new ve.Buf8(z),le.next_out=0,le.avail_out=z),(se=ge.inflate(le,Ie.Z_NO_FLUSH))===Ie.Z_NEED_DICT&&ee&&($=typeof ee=="string"?Ee.string2buf(ee):Ae.call(ee)==="[object ArrayBuffer]"?new Uint8Array(ee):ee,se=ge.inflateSetDictionary(this.strm,$)),se===Ie.Z_BUF_ERROR&&we===!0&&(se=Ie.Z_OK,we=!1),se!==Ie.Z_STREAM_END&&se!==Ie.Z_OK)return this.onEnd(se),!(this.ended=!0);le.next_out&&(le.avail_out!==0&&se!==Ie.Z_STREAM_END&&(le.avail_in!==0||U!==Ie.Z_FINISH&&U!==Ie.Z_SYNC_FLUSH)||(this.options.to==="string"?(oe=Ee.utf8border(le.output,le.next_out),re=le.next_out-oe,R=Ee.buf2string(le.output,oe),le.next_out=re,le.avail_out=z-re,re&&ve.arraySet(le.output,le.output,oe,re,0),this.onData(R)):this.onData(ve.shrinkBuf(le.output,le.next_out)))),le.avail_in===0&&le.avail_out===0&&(we=!0)}while((0<le.avail_in||le.avail_out===0)&&se!==Ie.Z_STREAM_END);return se===Ie.Z_STREAM_END&&(U=Ie.Z_FINISH),U===Ie.Z_FINISH?(se=ge.inflateEnd(this.strm),this.onEnd(se),this.ended=!0,se===Ie.Z_OK):U!==Ie.Z_SYNC_FLUSH||(this.onEnd(Ie.Z_OK),!(le.avail_out=0))},fe.prototype.onData=function(X){this.chunks.push(X)},fe.prototype.onEnd=function(X){X===Ie.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ve.flattenChunks(this.chunks)),this.chunks=[],this.err=X,this.msg=this.strm.msg},q.Inflate=fe,q.inflate=te,q.inflateRaw=function(X,Z){return(Z=Z||{}).raw=!0,te(X,Z)},q.ungzip=te},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(F,ae,q){var fe=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";q.assign=function(ve){for(var Ee=Array.prototype.slice.call(arguments,1),Ie;Ee.length;)if(Ie=Ee.shift(),Ie){if(typeof Ie!="object")throw new TypeError(Ie+"must be non-object");for(var ke in Ie)Ie.hasOwnProperty(ke)&&(ve[ke]=Ie[ke])}return ve},q.shrinkBuf=function(ve,Ee){return ve.length===Ee?ve:ve.subarray?ve.subarray(0,Ee):(ve.length=Ee,ve)};var te={arraySet:function(ve,Ee,Ie,ke,Te){if(Ee.subarray&&ve.subarray)ve.set(Ee.subarray(Ie,Ie+ke),Te);else for(var Se=0;Se<ke;Se++)ve[Te+Se]=Ee[Ie+Se]},flattenChunks:function(ve){var Ee,Ie,ke,Te,Se,Ae;for(Ee=ke=0,Ie=ve.length;Ee<Ie;Ee++)ke+=ve[Ee].length;for(Ae=new Uint8Array(ke),Ee=Te=0,Ie=ve.length;Ee<Ie;Ee++)Se=ve[Ee],Ae.set(Se,Te),Te+=Se.length;return Ae}},ge={arraySet:function(ve,Ee,Ie,ke,Te){for(var Se=0;Se<ke;Se++)ve[Te+Se]=Ee[Ie+Se]},flattenChunks:function(ve){return[].concat.apply([],ve)}};q.setTyped=function(ve){ve?(q.Buf8=Uint8Array,q.Buf16=Uint16Array,q.Buf32=Int32Array,q.assign(q,te)):(q.Buf8=Array,q.Buf16=Array,q.Buf32=Array,q.assign(q,ge))},q.setTyped(fe)},{}],42:[function(F,ae,q){function fe(ke,Te){if(65537>Te&&(ke.subarray&&ve||!ke.subarray&&ge))return a.apply(null,te.shrinkBuf(ke,Te));for(var Se="",Ae=0;Ae<Te;Ae++)Se+=a(ke[Ae]);return Se}var te=F("./common"),ge=!0,ve=!0;try{a.apply(null,[0])}catch{ge=!1}try{a.apply(null,new Uint8Array(1))}catch{ve=!1}for(var Ee=new te.Buf8(256),Ie=0;256>Ie;Ie++)Ee[Ie]=252<=Ie?6:248<=Ie?5:240<=Ie?4:224<=Ie?3:192<=Ie?2:1;Ee[254]=Ee[254]=1,q.string2buf=function(ke){var Te=ke.length,Se=0,Ae,X,Z,le,z;for(le=0;le<Te;le++)(64512&(X=ke.charCodeAt(le)))==55296&&le+1<Te&&(64512&(Z=ke.charCodeAt(le+1)))==56320&&(X=65536+(X-55296<<10)+(Z-56320),le++),Se+=128>X?1:2048>X?2:65536>X?3:4;for(Ae=new te.Buf8(Se),le=z=0;z<Se;le++)(64512&(X=ke.charCodeAt(le)))==55296&&le+1<Te&&(64512&(Z=ke.charCodeAt(le+1)))==56320&&(X=65536+(X-55296<<10)+(Z-56320),le++),128>X?Ae[z++]=X:(2048>X?Ae[z++]=192|X>>>6:(65536>X?Ae[z++]=224|X>>>12:(Ae[z++]=240|X>>>18,Ae[z++]=128|63&X>>>12),Ae[z++]=128|63&X>>>6),Ae[z++]=128|63&X);return Ae},q.buf2binstring=function(ke){return fe(ke,ke.length)},q.binstring2buf=function(ke){for(var Te=new te.Buf8(ke.length),Se=0,Ae=Te.length;Se<Ae;Se++)Te[Se]=ke.charCodeAt(Se);return Te},q.buf2string=function(ke,Te){var Se=Te||ke.length,Ae=Array(2*Se),X,Z,le,z;for(X=Z=0;X<Se;)if(128>(le=ke[X++]))Ae[Z++]=le;else if(4<(z=Ee[le]))Ae[Z++]=65533,X+=z-1;else{for(le&=z===2?31:z===3?15:7;1<z&&X<Se;)le=le<<6|63&ke[X++],z--;1<z?Ae[Z++]=65533:65536>le?Ae[Z++]=le:(le-=65536,Ae[Z++]=55296|1023&le>>10,Ae[Z++]=56320|1023&le)}return fe(Ae,Z)},q.utf8border=function(ke,Te){var Se;for((Te=Te||ke.length)>ke.length&&(Te=ke.length),Se=Te-1;0<=Se&&(192&ke[Se])==128;)Se--;return 0>Se||Se===0?Te:Se+Ee[ke[Se]]>Te?Se:Te}},{"./common":41}],43:[function(F,ae){ae.exports=function(q,fe,te,ge){for(var ve=0|65535&q,Ee=0|65535&q>>>16,Ie=0;te!==0;){for(te-=Ie=2e3<te?2e3:te;Ee=0|Ee+(ve=0|ve+fe[ge++]),--Ie;);ve%=65521,Ee%=65521}return 0|(ve|Ee<<16)}},{}],44:[function(F,ae){ae.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(F,ae){var q=function(){for(var fe=[],te=0,ge;256>te;te++){ge=te;for(var ve=0;8>ve;ve++)ge=1&ge?3988292384^ge>>>1:ge>>>1;fe[te]=ge}return fe}();ae.exports=function(fe,te,ge,ve){fe^=-1;for(var Ee=ve;Ee<ve+ge;Ee++)fe=fe>>>8^q[255&(fe^te[Ee])];return-1^fe}},{}],46:[function(F,ae,q){function fe(A,V){return A.msg=R[V],V}function te(A){return(A<<1)-(4<A?9:0)}function ge(A){for(var V=A.length;0<=--V;)A[V]=0}function ve(A){var V=A.state,H=V.pending;H>A.avail_out&&(H=A.avail_out),H!==0&&(se.arraySet(A.output,V.pending_buf,V.pending_out,H,A.next_out),A.next_out+=H,V.pending_out+=H,A.total_out+=H,A.avail_out-=H,V.pending-=H,V.pending===0&&(V.pending_out=0))}function Ee(A,V){U._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,V),A.block_start=A.strstart,ve(A.strm)}function Ie(A,V){A.pending_buf[A.pending++]=V}function ke(A,V){A.pending_buf[A.pending++]=255&V>>>8,A.pending_buf[A.pending++]=255&V}function Te(A,V){var H=A.max_chain_length,N=A.strstart,Y=A.prev_length,be=A.nice_match,_e=A.strstart>A.w_size-262?A.strstart-(A.w_size-262):0,ue=A.window,De=A.w_mask,qe=A.prev,Qe=A.strstart+258,Ve=ue[N+Y-1],xe=ue[N+Y],Oe,ze;A.prev_length>=A.good_match&&(H>>=2),be>A.lookahead&&(be=A.lookahead);do if(ue[(Oe=V)+Y]===xe&&ue[Oe+Y-1]===Ve&&ue[Oe]===ue[N]&&ue[++Oe]===ue[N+1]){N+=2,Oe++;do;while(ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&ue[++N]===ue[++Oe]&&N<Qe);if(ze=258-(Qe-N),N=Qe-258,Y<ze){if(A.match_start=V,be<=(Y=ze))break;Ve=ue[N+Y-1],xe=ue[N+Y]}}while((V=qe[V&De])>_e&&--H!=0);return Y<=A.lookahead?Y:A.lookahead}function Se(A){var V=A.w_size,H,N,Y,be,_e,ue,De,qe,Qe,Ve;do{if(be=A.window_size-A.lookahead-A.strstart,A.strstart>=V+(V-262)){for(se.arraySet(A.window,A.window,V,V,0),A.match_start-=V,A.strstart-=V,A.block_start-=V,H=N=A.hash_size;Y=A.head[--H],A.head[H]=V<=Y?Y-V:0,--N;);for(H=N=V;Y=A.prev[--H],A.prev[H]=V<=Y?Y-V:0,--N;);be+=V}if(A.strm.avail_in===0)break;if(ue=A.strm,De=A.window,qe=A.strstart+A.lookahead,Ve=void 0,(Qe=be)<(Ve=ue.avail_in)&&(Ve=Qe),N=Ve===0?0:(ue.avail_in-=Ve,se.arraySet(De,ue.input,ue.next_in,Ve,qe),ue.state.wrap===1?ue.adler=oe(ue.adler,De,Ve,qe):ue.state.wrap===2&&(ue.adler=re(ue.adler,De,Ve,qe)),ue.next_in+=Ve,ue.total_in+=Ve,Ve),A.lookahead+=N,3<=A.lookahead+A.insert)for(_e=A.strstart-A.insert,A.ins_h=A.window[_e],A.ins_h=(A.ins_h<<A.hash_shift^A.window[_e+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[_e+3-1])&A.hash_mask,A.prev[_e&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=_e,_e++,A.insert--,!(3>A.lookahead+A.insert)););}while(A.lookahead<262&&A.strm.avail_in!==0)}function Ae(A,V){for(var H,N;;){if(A.lookahead<262){if(Se(A),A.lookahead<262&&V===0)return 1;if(A.lookahead===0)break}if(H=0,3<=A.lookahead&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,H=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),H!==0&&A.strstart-H<=A.w_size-262&&(A.match_length=Te(A,H)),!(3<=A.match_length))N=U._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;else if(N=U._tr_tally(A,A.strstart-A.match_start,A.match_length-3),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&3<=A.lookahead){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,H=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;if(N&&(Ee(A,!1),A.strm.avail_out===0))return 1}return A.insert=A.strstart<2?A.strstart:2,V===4?(Ee(A,!0),A.strm.avail_out===0?3:4):A.last_lit&&(Ee(A,!1),A.strm.avail_out===0)?1:2}function X(A,V){for(var H,N,Y;;){if(A.lookahead<262){if(Se(A),A.lookahead<262&&V===0)return 1;if(A.lookahead===0)break}if(H=0,3<=A.lookahead&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,H=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=2,H!==0&&A.prev_length<A.max_lazy_match&&A.strstart-H<=A.w_size-262&&(A.match_length=Te(A,H),5>=A.match_length&&(A.strategy===1||A.match_length===3&&4096<A.strstart-A.match_start)&&(A.match_length=2)),3<=A.prev_length&&A.match_length<=A.prev_length){for(Y=A.strstart+A.lookahead-3,N=U._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-3),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=Y&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+3-1])&A.hash_mask,H=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=2,A.strstart++,N&&(Ee(A,!1),A.strm.avail_out===0))return 1}else if(!A.match_available)A.match_available=1,A.strstart++,A.lookahead--;else if((N=U._tr_tally(A,0,A.window[A.strstart-1]))&&Ee(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return 1}return A.match_available&&(N=U._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<2?A.strstart:2,V===4?(Ee(A,!0),A.strm.avail_out===0?3:4):A.last_lit&&(Ee(A,!1),A.strm.avail_out===0)?1:2}function Z(A,V,H,N,Y){this.good_length=A,this.max_lazy=V,this.nice_length=H,this.max_chain=N,this.func=Y}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new se.Buf16(1146),this.dyn_dtree=new se.Buf16(122),this.bl_tree=new se.Buf16(78),ge(this.dyn_ltree),ge(this.dyn_dtree),ge(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new se.Buf16(16),this.heap=new se.Buf16(573),ge(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new se.Buf16(573),ge(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function z(A){var V;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=2,(V=A.state).pending=0,V.pending_out=0,0>V.wrap&&(V.wrap=-V.wrap),V.status=V.wrap?42:113,A.adler=V.wrap===2?0:1,V.last_flush=0,U._tr_init(V),0):fe(A,-2)}function ee(A){var V=z(A),H;return V===0&&((H=A.state).window_size=2*H.w_size,ge(H.head),H.max_lazy_match=$[H.level].max_lazy,H.good_match=$[H.level].good_length,H.nice_match=$[H.level].nice_length,H.max_chain_length=$[H.level].max_chain,H.strstart=0,H.block_start=0,H.lookahead=0,H.insert=0,H.match_length=H.prev_length=2,H.match_available=0,H.ins_h=0),V}function we(A,V,H,N,Y,be){if(!A)return-2;var _e=1;if(V===-1&&(V=6),0>N?(_e=0,N=-N):15<N&&(_e=2,N-=16),1>Y||9<Y||H!==8||8>N||15<N||0>V||9<V||0>be||4<be)return fe(A,-2);N===8&&(N=9);var ue=new le;return(A.state=ue).strm=A,ue.wrap=_e,ue.gzhead=null,ue.w_bits=N,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=Y+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+3-1)/3),ue.window=new se.Buf8(2*ue.w_size),ue.head=new se.Buf16(ue.hash_size),ue.prev=new se.Buf16(ue.w_size),ue.lit_bufsize=1<<Y+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new se.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=V,ue.strategy=be,ue.method=H,ee(A)}var se=F("../utils/common"),U=F("./trees"),oe=F("./adler32"),re=F("./crc32"),R=F("./messages"),$;$=[new Z(0,0,0,0,function(A,V){var H=65535;for(H>A.pending_buf_size-5&&(H=A.pending_buf_size-5);;){if(1>=A.lookahead){if(Se(A),A.lookahead===0&&V===0)return 1;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var N=A.block_start+H;if((A.strstart===0||A.strstart>=N)&&(A.lookahead=A.strstart-N,A.strstart=N,Ee(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-262&&(Ee(A,!1),A.strm.avail_out===0))return 1}return A.insert=0,V===4?(Ee(A,!0),A.strm.avail_out===0?3:4):(A.strstart>A.block_start&&(Ee(A,!1),A.strm.avail_out),1)}),new Z(4,4,8,4,Ae),new Z(4,5,16,8,Ae),new Z(4,6,32,32,Ae),new Z(4,4,16,16,X),new Z(8,16,32,32,X),new Z(8,16,128,128,X),new Z(8,32,128,256,X),new Z(32,128,258,1024,X),new Z(32,258,258,4096,X)],q.deflateInit=function(A,V){return we(A,V,8,15,8,0)},q.deflateInit2=we,q.deflateReset=ee,q.deflateResetKeep=z,q.deflateSetHeader=function(A,V){return A&&A.state&&A.state.wrap===2?(A.state.gzhead=V,0):-2},q.deflate=function(A,V){var H,N,Y,be;if(!A||!A.state||5<V||0>V)return A?fe(A,-2):-2;if(N=A.state,!A.output||!A.input&&A.avail_in!==0||N.status===666&&V!==4)return fe(A,A.avail_out===0?-5:-2);if(N.strm=A,H=N.last_flush,N.last_flush=V,N.status===42)if(N.wrap===2)A.adler=0,Ie(N,31),Ie(N,139),Ie(N,8),N.gzhead?(Ie(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),Ie(N,255&N.gzhead.time),Ie(N,255&N.gzhead.time>>8),Ie(N,255&N.gzhead.time>>16),Ie(N,255&N.gzhead.time>>24),Ie(N,N.level===9?2:2<=N.strategy||2>N.level?4:0),Ie(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(Ie(N,255&N.gzhead.extra.length),Ie(N,255&N.gzhead.extra.length>>8)),N.gzhead.hcrc&&(A.adler=re(A.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(Ie(N,0),Ie(N,0),Ie(N,0),Ie(N,0),Ie(N,0),Ie(N,N.level===9?2:2<=N.strategy||2>N.level?4:0),Ie(N,3),N.status=113);else{var _e=8+(N.w_bits-8<<4)<<8;_e|=(2<=N.strategy||2>N.level?0:6>N.level?1:N.level===6?2:3)<<6,N.strstart!==0&&(_e|=32),_e+=31-_e%31,N.status=113,ke(N,_e),N.strstart!==0&&(ke(N,A.adler>>>16),ke(N,65535&A.adler)),A.adler=1}if(N.status===69)if(N.gzhead.extra){for(Y=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),ve(A),Y=N.pending,N.pending!==N.pending_buf_size));)Ie(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){Y=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),ve(A),Y=N.pending,N.pending===N.pending_buf_size)){be=1;break}be=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,Ie(N,be)}while(be!==0);N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),be===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){Y=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),ve(A),Y=N.pending,N.pending===N.pending_buf_size)){be=1;break}be=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,Ie(N,be)}while(be!==0);N.gzhead.hcrc&&N.pending>Y&&(A.adler=re(A.adler,N.pending_buf,N.pending-Y,Y)),be===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&ve(A),N.pending+2<=N.pending_buf_size&&(Ie(N,255&A.adler),Ie(N,255&A.adler>>8),A.adler=0,N.status=113)):N.status=113),N.pending!==0){if(ve(A),A.avail_out===0)return N.last_flush=-1,0}else if(A.avail_in===0&&te(V)<=te(H)&&V!==4)return fe(A,-5);if(N.status===666&&A.avail_in!==0)return fe(A,-5);if(A.avail_in!==0||N.lookahead!==0||V!==0&&N.status!==666){var ue=N.strategy===2?function(De,qe){for(var Qe;;){if(De.lookahead===0&&(Se(De),De.lookahead===0)){if(qe===0)return 1;break}if(De.match_length=0,Qe=U._tr_tally(De,0,De.window[De.strstart]),De.lookahead--,De.strstart++,Qe&&(Ee(De,!1),De.strm.avail_out===0))return 1}return De.insert=0,qe===4?(Ee(De,!0),De.strm.avail_out===0?3:4):De.last_lit&&(Ee(De,!1),De.strm.avail_out===0)?1:2}(N,V):N.strategy===3?function(De,qe){for(var Qe=De.window,Ve,xe,Oe,ze;;){if(258>=De.lookahead){if(Se(De),258>=De.lookahead&&qe===0)return 1;if(De.lookahead===0)break}if(De.match_length=0,3<=De.lookahead&&0<De.strstart&&(xe=Qe[Oe=De.strstart-1])===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]){ze=De.strstart+258;do;while(xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&xe===Qe[++Oe]&&Oe<ze);De.match_length=258-(ze-Oe),De.match_length>De.lookahead&&(De.match_length=De.lookahead)}if(3<=De.match_length?(Ve=U._tr_tally(De,1,De.match_length-3),De.lookahead-=De.match_length,De.strstart+=De.match_length,De.match_length=0):(Ve=U._tr_tally(De,0,De.window[De.strstart]),De.lookahead--,De.strstart++),Ve&&(Ee(De,!1),De.strm.avail_out===0))return 1}return De.insert=0,qe===4?(Ee(De,!0),De.strm.avail_out===0?3:4):De.last_lit&&(Ee(De,!1),De.strm.avail_out===0)?1:2}(N,V):$[N.level].func(N,V);if(ue!==3&&ue!==4||(N.status=666),ue===1||ue===3)return A.avail_out===0&&(N.last_flush=-1),0;if(ue===2&&(V===1?U._tr_align(N):V!=5&&(U._tr_stored_block(N,0,0,!1),V==3&&(ge(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),ve(A),A.avail_out===0))return N.last_flush=-1,0}return V===4?0>=N.wrap?1:(N.wrap===2?(Ie(N,255&A.adler),Ie(N,255&A.adler>>8),Ie(N,255&A.adler>>16),Ie(N,255&A.adler>>24),Ie(N,255&A.total_in),Ie(N,255&A.total_in>>8),Ie(N,255&A.total_in>>16),Ie(N,255&A.total_in>>24)):(ke(N,A.adler>>>16),ke(N,65535&A.adler)),ve(A),0<N.wrap&&(N.wrap=-N.wrap),N.pending===0?1:0):0},q.deflateEnd=function(A){var V;return A&&A.state?(V=A.state.status)!==42&&V!==69&&V!==73&&V!==91&&V!==103&&V!==113&&V!==666?fe(A,-2):(A.state=null,V===113?fe(A,-3):0):-2},q.deflateSetDictionary=function(A,V){var H=V.length,N,Y,be,_e,ue,De,qe,Qe;if(!A||!A.state||(_e=(N=A.state).wrap)===2||_e===1&&N.status!==42||N.lookahead)return-2;for(_e===1&&(A.adler=oe(A.adler,V,H,0)),N.wrap=0,H>=N.w_size&&(_e===0&&(ge(N.head),N.strstart=0,N.block_start=0,N.insert=0),Qe=new se.Buf8(N.w_size),se.arraySet(Qe,V,H-N.w_size,N.w_size,0),V=Qe,H=N.w_size),ue=A.avail_in,De=A.next_in,qe=A.input,A.avail_in=H,A.next_in=0,A.input=V,Se(N);N.lookahead>=3;){for(Y=N.strstart,be=N.lookahead-2;N.ins_h=(N.ins_h<<N.hash_shift^N.window[Y+3-1])&N.hash_mask,N.prev[Y&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=Y,Y++,--be;);N.strstart=Y,N.lookahead=2,Se(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=2,N.match_available=0,A.next_in=De,A.input=qe,A.avail_in=ue,N.wrap=_e,0},q.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(F,ae){ae.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(F,ae){ae.exports=function(q,fe){var te,ge,ve,Ee,Ie,ke,Te,Se,Ae,X,Z,le,z,ee,we,se,U,oe,re,R,$,A,V,H,N;te=q.state,ge=q.next_in,H=q.input,ve=ge+(q.avail_in-5),Ee=q.next_out,N=q.output,Ie=Ee-(fe-q.avail_out),ke=Ee+(q.avail_out-257),Te=te.dmax,Se=te.wsize,Ae=te.whave,X=te.wnext,Z=te.window,le=te.hold,z=te.bits,ee=te.lencode,we=te.distcode,se=(1<<te.lenbits)-1,U=(1<<te.distbits)-1;e:do{15>z&&(le+=H[ge++]<<z,z+=8,le+=H[ge++]<<z,z+=8),oe=ee[le&se];t:for(;;){if(le>>>=re=oe>>>24,z-=re,(re=255&oe>>>16)==0)N[Ee++]=65535&oe;else{if(!(16&re)){if((64&re)==0){oe=ee[(65535&oe)+(le&(1<<re)-1)];continue t}if(32&re){te.mode=12;break e}q.msg="invalid literal/length code",te.mode=30;break e}R=65535&oe,(re&=15)&&(z<re&&(le+=H[ge++]<<z,z+=8),R+=le&(1<<re)-1,le>>>=re,z-=re),15>z&&(le+=H[ge++]<<z,z+=8,le+=H[ge++]<<z,z+=8),oe=we[le&U];r:for(;;){if(le>>>=re=oe>>>24,z-=re,!(16&(re=255&oe>>>16))){if((64&re)==0){oe=we[(65535&oe)+(le&(1<<re)-1)];continue r}q.msg="invalid distance code",te.mode=30;break e}if($=65535&oe,z<(re&=15)&&(le+=H[ge++]<<z,(z+=8)<re&&(le+=H[ge++]<<z,z+=8)),Te<($+=le&(1<<re)-1)){q.msg="invalid distance too far back",te.mode=30;break e}if(le>>>=re,z-=re,(re=Ee-Ie)<$){if(Ae<(re=$-re)&&te.sane){q.msg="invalid distance too far back",te.mode=30;break e}if(V=Z,(A=0)===X){if(A+=Se-re,re<R){for(R-=re;N[Ee++]=Z[A++],--re;);A=Ee-$,V=N}}else if(X<re){if(A+=Se+X-re,(re-=X)<R){for(R-=re;N[Ee++]=Z[A++],--re;);if(A=0,X<R){for(R-=re=X;N[Ee++]=Z[A++],--re;);A=Ee-$,V=N}}}else if(A+=X-re,re<R){for(R-=re;N[Ee++]=Z[A++],--re;);A=Ee-$,V=N}for(;2<R;)N[Ee++]=V[A++],N[Ee++]=V[A++],N[Ee++]=V[A++],R-=3;R&&(N[Ee++]=V[A++],1<R&&(N[Ee++]=V[A++]))}else{for(A=Ee-$;N[Ee++]=N[A++],N[Ee++]=N[A++],N[Ee++]=N[A++],2<(R-=3););R&&(N[Ee++]=N[A++],1<R&&(N[Ee++]=N[A++]))}break}}break}}while(ge<ve&&Ee<ke);ge-=R=z>>3,le&=(1<<(z-=R<<3))-1,q.next_in=ge,q.next_out=Ee,q.avail_in=ge<ve?ve-ge+5:5-(ge-ve),q.avail_out=Ee<ke?ke-Ee+257:257-(Ee-ke),te.hold=le,te.bits=z}},{}],49:[function(F,ae,q){function fe(se){return(255&se>>>24)+(65280&se>>>8)+((65280&se)<<8)+((255&se)<<24)}function te(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Se.Buf16(320),this.work=new Se.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ge(se){var U;return se&&se.state?(U=se.state,se.total_in=se.total_out=U.total=0,se.msg="",U.wrap&&(se.adler=1&U.wrap),U.mode=1,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new Se.Buf32(852),U.distcode=U.distdyn=new Se.Buf32(592),U.sane=1,U.back=-1,0):-2}function ve(se){var U;return se&&se.state?((U=se.state).wsize=0,U.whave=0,U.wnext=0,ge(se)):-2}function Ee(se,U){var oe,re;return se&&se.state?(re=se.state,0>U?(oe=0,U=-U):(oe=1+(U>>4),48>U&&(U&=15)),U&&(8>U||15<U)?-2:(re.window!==null&&re.wbits!==U&&(re.window=null),re.wrap=oe,re.wbits=U,ve(se))):-2}function Ie(se,U){var oe,re;return se?(re=new te,(se.state=re).window=null,(oe=Ee(se,U))!==0&&(se.state=null),oe):-2}function ke(se){if(z){var U;for(ee=new Se.Buf32(512),we=new Se.Buf32(32),U=0;144>U;)se.lens[U++]=8;for(;256>U;)se.lens[U++]=9;for(;280>U;)se.lens[U++]=7;for(;288>U;)se.lens[U++]=8;for(le(1,se.lens,0,288,ee,0,se.work,{bits:9}),U=0;32>U;)se.lens[U++]=5;le(2,se.lens,0,32,we,0,se.work,{bits:5}),z=!1}se.lencode=ee,se.lenbits=9,se.distcode=we,se.distbits=5}function Te(se,U,oe,re){var R=se.state,$;return R.window===null&&(R.wsize=1<<R.wbits,R.wnext=0,R.whave=0,R.window=new Se.Buf8(R.wsize)),re>=R.wsize?(Se.arraySet(R.window,U,oe-R.wsize,R.wsize,0),R.wnext=0,R.whave=R.wsize):(re<($=R.wsize-R.wnext)&&($=re),Se.arraySet(R.window,U,oe-re,$,R.wnext),(re-=$)?(Se.arraySet(R.window,U,oe-re,re,0),R.wnext=re,R.whave=R.wsize):(R.wnext+=$,R.wnext===R.wsize&&(R.wnext=0),R.whave<R.wsize&&(R.whave+=$))),0}var Se=F("../utils/common"),Ae=F("./adler32"),X=F("./crc32"),Z=F("./inffast"),le=F("./inftrees"),z=!0,ee,we;q.inflateReset=ve,q.inflateReset2=Ee,q.inflateResetKeep=ge,q.inflateInit=function(se){return Ie(se,15)},q.inflateInit2=Ie,q.inflate=function(se,U){var oe=0,re=new Se.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$,A,V,H,N,Y,be,_e,ue,De,qe,Qe,Ve,xe,Oe,ze,rt,ht,gt,Nt,ft,zt,Ut,mr;if(!se||!se.state||!se.output||!se.input&&se.avail_in!==0)return-2;($=se.state).mode===12&&($.mode=13),N=se.next_out,V=se.output,be=se.avail_out,H=se.next_in,A=se.input,Y=se.avail_in,_e=$.hold,ue=$.bits,De=Y,qe=be,zt=0;e:for(;;)switch($.mode){case 1:if($.wrap===0){$.mode=13;break}for(;16>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(2&$.wrap&&_e===35615){re[$.check=0]=255&_e,re[1]=255&_e>>>8,$.check=X($.check,re,2,0),ue=_e=0,$.mode=2;break}if($.flags=0,$.head&&($.head.done=!1),!(1&$.wrap)||(((255&_e)<<8)+(_e>>8))%31){se.msg="incorrect header check",$.mode=30;break}if((15&_e)!=8){se.msg="unknown compression method",$.mode=30;break}if(ue-=4,ft=8+(15&(_e>>>=4)),$.wbits===0)$.wbits=ft;else if(ft>$.wbits){se.msg="invalid window size",$.mode=30;break}$.dmax=1<<ft,se.adler=$.check=1,$.mode=512&_e?10:12,ue=_e=0;break;case 2:for(;16>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if($.flags=_e,(255&$.flags)!=8){se.msg="unknown compression method",$.mode=30;break}if(57344&$.flags){se.msg="unknown header flags set",$.mode=30;break}$.head&&($.head.text=1&_e>>8),512&$.flags&&(re[0]=255&_e,re[1]=255&_e>>>8,$.check=X($.check,re,2,0)),ue=_e=0,$.mode=3;case 3:for(;32>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.head&&($.head.time=_e),512&$.flags&&(re[0]=255&_e,re[1]=255&_e>>>8,re[2]=255&_e>>>16,re[3]=255&_e>>>24,$.check=X($.check,re,4,0)),ue=_e=0,$.mode=4;case 4:for(;16>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.head&&($.head.xflags=255&_e,$.head.os=_e>>8),512&$.flags&&(re[0]=255&_e,re[1]=255&_e>>>8,$.check=X($.check,re,2,0)),ue=_e=0,$.mode=5;case 5:if(1024&$.flags){for(;16>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.length=_e,$.head&&($.head.extra_len=_e),512&$.flags&&(re[0]=255&_e,re[1]=255&_e>>>8,$.check=X($.check,re,2,0)),ue=_e=0}else $.head&&($.head.extra=null);$.mode=6;case 6:if(1024&$.flags&&(Y<(Qe=$.length)&&(Qe=Y),Qe&&($.head&&(ft=$.head.extra_len-$.length,$.head.extra||($.head.extra=Array($.head.extra_len)),Se.arraySet($.head.extra,A,H,Qe,ft)),512&$.flags&&($.check=X($.check,A,Qe,H)),Y-=Qe,H+=Qe,$.length-=Qe),$.length))break e;$.length=0,$.mode=7;case 7:if(2048&$.flags){if(Y===0)break e;for(Qe=0;ft=A[H+Qe++],$.head&&ft&&65536>$.length&&($.head.name+=a(ft)),ft&&Qe<Y;);if(512&$.flags&&($.check=X($.check,A,Qe,H)),Y-=Qe,H+=Qe,ft)break e}else $.head&&($.head.name=null);$.length=0,$.mode=8;case 8:if(4096&$.flags){if(Y===0)break e;for(Qe=0;ft=A[H+Qe++],$.head&&ft&&65536>$.length&&($.head.comment+=a(ft)),ft&&Qe<Y;);if(512&$.flags&&($.check=X($.check,A,Qe,H)),Y-=Qe,H+=Qe,ft)break e}else $.head&&($.head.comment=null);$.mode=9;case 9:if(512&$.flags){for(;16>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(_e!==(65535&$.check)){se.msg="header crc mismatch",$.mode=30;break}ue=_e=0}$.head&&($.head.hcrc=1&$.flags>>9,$.head.done=!0),se.adler=$.check=0,$.mode=12;break;case 10:for(;32>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}se.adler=$.check=fe(_e),ue=_e=0,$.mode=11;case 11:if($.havedict===0)return se.next_out=N,se.avail_out=be,se.next_in=H,se.avail_in=Y,$.hold=_e,$.bits=ue,2;se.adler=$.check=1,$.mode=12;case 12:if(U===5||U===6)break e;case 13:if($.last){_e>>>=7&ue,ue-=7&ue,$.mode=27;break}for(;3>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}switch($.last=1&_e,ue-=1,3&(_e>>>=1)){case 0:$.mode=14;break;case 1:if(ke($),$.mode=20,U!==6)break;_e>>>=2,ue-=2;break e;case 2:$.mode=17;break;case 3:se.msg="invalid block type",$.mode=30}_e>>>=2,ue-=2;break;case 14:for(_e>>>=7&ue,ue-=7&ue;32>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if((65535&_e)!=(65535^_e>>>16)){se.msg="invalid stored block lengths",$.mode=30;break}if($.length=65535&_e,ue=_e=0,$.mode=15,U===6)break e;case 15:$.mode=16;case 16:if(Qe=$.length){if(Y<Qe&&(Qe=Y),be<Qe&&(Qe=be),Qe===0)break e;Se.arraySet(V,A,H,Qe,N),Y-=Qe,H+=Qe,be-=Qe,N+=Qe,$.length-=Qe;break}$.mode=12;break;case 17:for(;14>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if($.nlen=257+(31&_e),_e>>>=5,ue-=5,$.ndist=1+(31&_e),_e>>>=5,ue-=5,$.ncode=4+(15&_e),_e>>>=4,ue-=4,286<$.nlen||30<$.ndist){se.msg="too many length or distance symbols",$.mode=30;break}$.have=0,$.mode=18;case 18:for(;$.have<$.ncode;){for(;3>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.lens[R[$.have++]]=7&_e,_e>>>=3,ue-=3}for(;19>$.have;)$.lens[R[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,Ut={bits:$.lenbits},zt=le(0,$.lens,0,19,$.lencode,0,$.work,Ut),$.lenbits=Ut.bits,zt){se.msg="invalid code lengths set",$.mode=30;break}$.have=0,$.mode=19;case 19:for(;$.have<$.nlen+$.ndist;){for(;ze=255&(oe=$.lencode[_e&(1<<$.lenbits)-1])>>>16,rt=65535&oe,!((Oe=oe>>>24)<=ue);){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(16>rt)_e>>>=Oe,ue-=Oe,$.lens[$.have++]=rt;else{if(rt===16){for(mr=Oe+2;ue<mr;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(_e>>>=Oe,ue-=Oe,$.have===0){se.msg="invalid bit length repeat",$.mode=30;break}ft=$.lens[$.have-1],Qe=3+(3&_e),_e>>>=2,ue-=2}else if(rt===17){for(mr=Oe+3;ue<mr;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}ue-=Oe,ft=0,Qe=3+(7&(_e>>>=Oe)),_e>>>=3,ue-=3}else{for(mr=Oe+7;ue<mr;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}ue-=Oe,ft=0,Qe=11+(127&(_e>>>=Oe)),_e>>>=7,ue-=7}if($.have+Qe>$.nlen+$.ndist){se.msg="invalid bit length repeat",$.mode=30;break}for(;Qe--;)$.lens[$.have++]=ft}}if($.mode===30)break;if($.lens[256]===0){se.msg="invalid code -- missing end-of-block",$.mode=30;break}if($.lenbits=9,Ut={bits:$.lenbits},zt=le(1,$.lens,0,$.nlen,$.lencode,0,$.work,Ut),$.lenbits=Ut.bits,zt){se.msg="invalid literal/lengths set",$.mode=30;break}if($.distbits=6,$.distcode=$.distdyn,Ut={bits:$.distbits},zt=le(2,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,Ut),$.distbits=Ut.bits,zt){se.msg="invalid distances set",$.mode=30;break}if($.mode=20,U===6)break e;case 20:$.mode=21;case 21:if(6<=Y&&258<=be){se.next_out=N,se.avail_out=be,se.next_in=H,se.avail_in=Y,$.hold=_e,$.bits=ue,Z(se,qe),N=se.next_out,V=se.output,be=se.avail_out,H=se.next_in,A=se.input,Y=se.avail_in,_e=$.hold,ue=$.bits,$.mode===12&&($.back=-1);break}for($.back=0;ze=255&(oe=$.lencode[_e&(1<<$.lenbits)-1])>>>16,rt=65535&oe,!((Oe=oe>>>24)<=ue);){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(ze&&(240&ze)==0){for(ht=Oe,gt=ze,Nt=rt;ze=255&(oe=$.lencode[Nt+((_e&(1<<ht+gt)-1)>>ht)])>>>16,rt=65535&oe,!(ht+(Oe=oe>>>24)<=ue);){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}_e>>>=ht,ue-=ht,$.back+=ht}if(_e>>>=Oe,ue-=Oe,$.back+=Oe,$.length=rt,ze===0){$.mode=26;break}if(32&ze){$.back=-1,$.mode=12;break}if(64&ze){se.msg="invalid literal/length code",$.mode=30;break}$.extra=15&ze,$.mode=22;case 22:if($.extra){for(mr=$.extra;ue<mr;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.length+=_e&(1<<$.extra)-1,_e>>>=$.extra,ue-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=23;case 23:for(;ze=255&(oe=$.distcode[_e&(1<<$.distbits)-1])>>>16,rt=65535&oe,!((Oe=oe>>>24)<=ue);){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if((240&ze)==0){for(ht=Oe,gt=ze,Nt=rt;ze=255&(oe=$.distcode[Nt+((_e&(1<<ht+gt)-1)>>ht)])>>>16,rt=65535&oe,!(ht+(Oe=oe>>>24)<=ue);){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}_e>>>=ht,ue-=ht,$.back+=ht}if(_e>>>=Oe,ue-=Oe,$.back+=Oe,64&ze){se.msg="invalid distance code",$.mode=30;break}$.offset=rt,$.extra=15&ze,$.mode=24;case 24:if($.extra){for(mr=$.extra;ue<mr;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}$.offset+=_e&(1<<$.extra)-1,_e>>>=$.extra,ue-=$.extra,$.back+=$.extra}if($.offset>$.dmax){se.msg="invalid distance too far back",$.mode=30;break}$.mode=25;case 25:if(be===0)break e;if(Qe=qe-be,$.offset>Qe){if((Qe=$.offset-Qe)>$.whave&&$.sane){se.msg="invalid distance too far back",$.mode=30;break}Ve=Qe>$.wnext?(Qe-=$.wnext,$.wsize-Qe):$.wnext-Qe,Qe>$.length&&(Qe=$.length),xe=$.window}else xe=V,Ve=N-$.offset,Qe=$.length;for(be<Qe&&(Qe=be),be-=Qe,$.length-=Qe;V[N++]=xe[Ve++],--Qe;);$.length===0&&($.mode=21);break;case 26:if(be===0)break e;V[N++]=$.length,be--,$.mode=21;break;case 27:if($.wrap){for(;32>ue;){if(Y===0)break e;Y--,_e|=A[H++]<<ue,ue+=8}if(qe-=be,se.total_out+=qe,$.total+=qe,qe&&(se.adler=$.check=$.flags?X($.check,V,qe,N-qe):Ae($.check,V,qe,N-qe)),qe=be,($.flags?_e:fe(_e))!==$.check){se.msg="incorrect data check",$.mode=30;break}ue=_e=0}$.mode=28;case 28:if($.wrap&&$.flags){for(;32>ue;){if(Y===0)break e;Y--,_e+=A[H++]<<ue,ue+=8}if(_e!==(4294967295&$.total)){se.msg="incorrect length check",$.mode=30;break}ue=_e=0}$.mode=29;case 29:zt=1;break e;case 30:zt=-3;break e;case 31:return-4;case 32:default:return-2}return se.next_out=N,se.avail_out=be,se.next_in=H,se.avail_in=Y,$.hold=_e,$.bits=ue,($.wsize||qe!==se.avail_out&&30>$.mode&&(27>$.mode||U!==4))&&Te(se,se.output,se.next_out,qe-se.avail_out)?($.mode=31,-4):(De-=se.avail_in,qe-=se.avail_out,se.total_in+=De,se.total_out+=qe,$.total+=qe,$.wrap&&qe&&(se.adler=$.check=$.flags?X($.check,V,qe,se.next_out-qe):Ae($.check,V,qe,se.next_out-qe)),se.data_type=$.bits+($.last?64:0)+($.mode===12?128:0)+($.mode===20||$.mode===15?256:0),(De==0&&qe===0||U===4)&&zt===0&&(zt=-5),zt)},q.inflateEnd=function(se){if(!se||!se.state)return-2;var U=se.state;return U.window&&(U.window=null),se.state=null,0},q.inflateGetHeader=function(se,U){var oe;return se&&se.state?(2&(oe=se.state).wrap)==0?-2:((oe.head=U).done=!1,0):-2},q.inflateSetDictionary=function(se,U){var oe=U.length,re;return se&&se.state?(re=se.state).wrap!==0&&re.mode!==11?-2:re.mode===11&&Ae(1,U,oe,0)!==re.check?-3:Te(se,U,oe,oe)?(re.mode=31,-4):(re.havedict=1,0):-2},q.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(F,ae){var q=F("../utils/common"),fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],te=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ve=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];ae.exports=function(Ee,Ie,ke,Te,Se,Ae,X,Z){var le=Z.bits,z=0,ee=0,we=0,se=0,U=0,oe=0,re=0,R=0,$=0,A=0,V=null,H=0,N=new q.Buf16(16),Y=new q.Buf16(16),be=null,_e=0,ue,De,qe,Qe,Ve,xe,Oe,ze,rt;for(z=0;15>=z;z++)N[z]=0;for(ee=0;ee<Te;ee++)N[Ie[ke+ee]]++;for(U=le,se=15;1<=se&&N[se]===0;se--);if(se<U&&(U=se),se==0)return Se[Ae++]=20971520,Se[Ae++]=20971520,Z.bits=1,0;for(we=1;we<se&&N[we]===0;we++);for(U<we&&(U=we),z=R=1;15>=z;z++)if(R<<=1,0>(R-=N[z]))return-1;if(0<R&&(Ee===0||se!==1))return-1;for(Y[1]=0,z=1;15>z;z++)Y[z+1]=Y[z]+N[z];for(ee=0;ee<Te;ee++)Ie[ke+ee]!==0&&(X[Y[Ie[ke+ee]]++]=ee);if(xe=Ee===0?(V=be=X,19):Ee===1?(V=fe,H-=257,be=te,_e-=257,256):(V=ge,be=ve,-1),z=we,Ve=Ae,re=ee=A=0,qe=-1,Qe=($=1<<(oe=U))-1,Ee===1&&852<$||Ee===2&&592<$)return 1;for(;;){for(Oe=z-re,rt=X[ee]<xe?(ze=0,X[ee]):X[ee]>xe?(ze=be[_e+X[ee]],V[H+X[ee]]):(ze=96,0),ue=1<<z-re,we=De=1<<oe;Se[Ve+(A>>re)+(De-=ue)]=0|(Oe<<24|ze<<16|rt),De!==0;);for(ue=1<<z-1;A&ue;)ue>>=1;if(ue===0?A=0:(A&=ue-1,A+=ue),ee++,--N[z]==0){if(z===se)break;z=Ie[ke+X[ee]]}if(U<z&&(A&Qe)!==qe){for(re===0&&(re=U),Ve+=we,R=1<<(oe=z-re);oe+re<se&&!(0>=(R-=N[oe+re]));)oe++,R<<=1;if($+=1<<oe,Ee===1&&852<$||Ee===2&&592<$)return 1;Se[qe=A&Qe]=0|(U<<24|oe<<16|Ve-Ae)}}return A!=0&&(Se[Ve+A]=0|(z-re<<24|4194304)),Z.bits=U,0}},{"../utils/common":41}],51:[function(F,ae){ae.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(F,ae,q){function fe(xe){for(var Oe=xe.length;0<=--Oe;)xe[Oe]=0}function te(xe,Oe,ze,rt,ht){this.static_tree=xe,this.extra_bits=Oe,this.extra_base=ze,this.elems=rt,this.max_length=ht,this.has_stree=xe&&xe.length}function ge(xe,Oe){this.dyn_tree=xe,this.max_code=0,this.stat_desc=Oe}function ve(xe){return 256>xe?Y[xe]:Y[256+(xe>>>7)]}function Ee(xe,Oe){xe.pending_buf[xe.pending++]=255&Oe,xe.pending_buf[xe.pending++]=255&Oe>>>8}function Ie(xe,Oe,ze){xe.bi_valid>16-ze?(xe.bi_buf|=65535&Oe<<xe.bi_valid,Ee(xe,xe.bi_buf),xe.bi_buf=Oe>>16-xe.bi_valid,xe.bi_valid+=ze-16):(xe.bi_buf|=65535&Oe<<xe.bi_valid,xe.bi_valid+=ze)}function ke(xe,Oe,ze){Ie(xe,ze[2*Oe],ze[2*Oe+1])}function Te(xe,Oe){for(var ze=0;ze|=1&xe,xe>>>=1,ze<<=1,0<--Oe;);return ze>>>1}function Se(xe,Oe,ze){var rt=Array(16),ht=0,gt,Nt;for(gt=1;gt<=15;gt++)rt[gt]=ht=ht+ze[gt-1]<<1;for(Nt=0;Nt<=Oe;Nt++){var ft=xe[2*Nt+1];ft!==0&&(xe[2*Nt]=Te(rt[ft]++,ft))}}function Ae(xe){var Oe;for(Oe=0;286>Oe;Oe++)xe.dyn_ltree[2*Oe]=0;for(Oe=0;30>Oe;Oe++)xe.dyn_dtree[2*Oe]=0;for(Oe=0;19>Oe;Oe++)xe.bl_tree[2*Oe]=0;xe.dyn_ltree[512]=1,xe.opt_len=xe.static_len=0,xe.last_lit=xe.matches=0}function X(xe){8<xe.bi_valid?Ee(xe,xe.bi_buf):0<xe.bi_valid&&(xe.pending_buf[xe.pending++]=xe.bi_buf),xe.bi_buf=0,xe.bi_valid=0}function Z(xe,Oe,ze,rt){var ht=2*Oe,gt=2*ze;return xe[ht]<xe[gt]||xe[ht]===xe[gt]&&rt[Oe]<=rt[ze]}function le(xe,Oe,ze){for(var rt=xe.heap[ze],ht=ze<<1;ht<=xe.heap_len&&(ht<xe.heap_len&&Z(Oe,xe.heap[ht+1],xe.heap[ht],xe.depth)&&ht++,!Z(Oe,rt,xe.heap[ht],xe.depth));)xe.heap[ze]=xe.heap[ht],ze=ht,ht<<=1;xe.heap[ze]=rt}function z(xe,Oe,ze){var rt=0,ht,gt,Nt,ft;if(xe.last_lit!==0)for(;ht=xe.pending_buf[xe.d_buf+2*rt]<<8|xe.pending_buf[xe.d_buf+2*rt+1],gt=xe.pending_buf[xe.l_buf+rt],rt++,ht===0?ke(xe,gt,Oe):(ke(xe,(Nt=be[gt])+256+1,Oe),(ft=R[Nt])!==0&&Ie(xe,gt-=_e[Nt],ft),ke(xe,Nt=ve(--ht),ze),(ft=$[Nt])!==0&&Ie(xe,ht-=ue[Nt],ft)),rt<xe.last_lit;);ke(xe,256,Oe)}function ee(xe,Oe){var ze=Oe.dyn_tree,rt=Oe.stat_desc.static_tree,ht=Oe.stat_desc.has_stree,gt=Oe.stat_desc.elems,Nt=-1,ft,zt,Ut;for(xe.heap_len=0,xe.heap_max=573,ft=0;ft<gt;ft++)ze[2*ft]===0?ze[2*ft+1]=0:(xe.heap[++xe.heap_len]=Nt=ft,xe.depth[ft]=0);for(;2>xe.heap_len;)ze[2*(Ut=xe.heap[++xe.heap_len]=2>Nt?++Nt:0)]=1,xe.depth[Ut]=0,xe.opt_len--,ht&&(xe.static_len-=rt[2*Ut+1]);for(Oe.max_code=Nt,ft=xe.heap_len>>1;1<=ft;ft--)le(xe,ze,ft);for(Ut=gt;ft=xe.heap[1],xe.heap[1]=xe.heap[xe.heap_len--],le(xe,ze,1),zt=xe.heap[1],xe.heap[--xe.heap_max]=ft,xe.heap[--xe.heap_max]=zt,ze[2*Ut]=ze[2*ft]+ze[2*zt],xe.depth[Ut]=(xe.depth[ft]>=xe.depth[zt]?xe.depth[ft]:xe.depth[zt])+1,ze[2*ft+1]=ze[2*zt+1]=Ut,xe.heap[1]=Ut++,le(xe,ze,1),2<=xe.heap_len;);xe.heap[--xe.heap_max]=xe.heap[1],function(mr,ki){var ws=ki.dyn_tree,ac=ki.max_code,lc=ki.stat_desc.static_tree,Vb=ki.stat_desc.has_stree,uc=ki.stat_desc.extra_bits,d0=ki.stat_desc.extra_base,Ge=ki.stat_desc.max_length,zr=0,nl,mi,_s,mt,da,_i;for(mt=0;mt<=15;mt++)mr.bl_count[mt]=0;for(ws[2*mr.heap[mr.heap_max]+1]=0,nl=mr.heap_max+1;573>nl;nl++)Ge<(mt=ws[2*ws[2*(mi=mr.heap[nl])+1]+1]+1)&&(mt=Ge,zr++),ws[2*mi+1]=mt,ac<mi||(mr.bl_count[mt]++,da=0,d0<=mi&&(da=uc[mi-d0]),_i=ws[2*mi],mr.opt_len+=_i*(mt+da),Vb&&(mr.static_len+=_i*(lc[2*mi+1]+da)));if(zr!=0){do{for(mt=Ge-1;mr.bl_count[mt]===0;)mt--;mr.bl_count[mt]--,mr.bl_count[mt+1]+=2,mr.bl_count[Ge]--,zr-=2}while(0<zr);for(mt=Ge;mt!==0;mt--)for(mi=mr.bl_count[mt];mi!==0;)ac<(_s=mr.heap[--nl])||(ws[2*_s+1]!==mt&&(mr.opt_len+=(mt-ws[2*_s+1])*ws[2*_s],ws[2*_s+1]=mt),mi--)}}(xe,Oe),Se(ze,Nt,xe.bl_count)}function we(xe,Oe,ze){var rt=-1,ht=Oe[1],gt=0,Nt=7,ft=4,zt,Ut;for(ht===0&&(Nt=138,ft=3),Oe[2*(ze+1)+1]=65535,zt=0;zt<=ze;zt++)Ut=ht,ht=Oe[2*(zt+1)+1],++gt<Nt&&Ut===ht||(gt<ft?xe.bl_tree[2*Ut]+=gt:Ut===0?10>=gt?xe.bl_tree[34]++:xe.bl_tree[36]++:(Ut!==rt&&xe.bl_tree[2*Ut]++,xe.bl_tree[32]++),rt=Ut,ft=(gt=0)===ht?(Nt=138,3):Ut===ht?(Nt=6,3):(Nt=7,4))}function se(xe,Oe,ze){var rt=-1,ht=Oe[1],gt=0,Nt=7,ft=4,zt,Ut;for(ht===0&&(Nt=138,ft=3),zt=0;zt<=ze;zt++)if(Ut=ht,ht=Oe[2*(zt+1)+1],!(++gt<Nt&&Ut===ht)){if(gt<ft)for(;ke(xe,Ut,xe.bl_tree),--gt!=0;);else Ut===0?10>=gt?(ke(xe,17,xe.bl_tree),Ie(xe,gt-3,3)):(ke(xe,18,xe.bl_tree),Ie(xe,gt-11,7)):(Ut!==rt&&(ke(xe,Ut,xe.bl_tree),gt--),ke(xe,16,xe.bl_tree),Ie(xe,gt-3,2));rt=Ut,ft=(gt=0)===ht?(Nt=138,3):Ut===ht?(Nt=6,3):(Nt=7,4)}}function U(xe,Oe,ze,rt){var ht,gt,Nt;Ie(xe,0+(rt?1:0),3),gt=Oe,Nt=ze,X(ht=xe),Ee(ht,Nt),Ee(ht,~Nt),oe.arraySet(ht.pending_buf,ht.window,gt,Nt,ht.pending),ht.pending+=Nt}var oe=F("../utils/common"),re=15,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=Array(576);fe(H);var N=Array(60);fe(N);var Y=Array(512);fe(Y);var be=Array(256);fe(be);var _e=Array(29);fe(_e);var ue=Array(30),De,qe,Qe;fe(ue);var Ve=!1;q._tr_init=function(xe){Ve||(function(){var Oe=Array(re+1),ze,rt,ht,gt,Nt;for(gt=ht=0;28>gt;gt++)for(_e[gt]=ht,ze=0;ze<1<<R[gt];ze++)be[ht++]=gt;for(be[ht-1]=gt,gt=Nt=0;16>gt;gt++)for(ue[gt]=Nt,ze=0;ze<1<<$[gt];ze++)Y[Nt++]=gt;for(Nt>>=7;30>gt;gt++)for(ue[gt]=Nt<<7,ze=0;ze<1<<$[gt]-7;ze++)Y[256+Nt++]=gt;for(rt=0;rt<=re;rt++)Oe[rt]=0;for(ze=0;143>=ze;)H[2*ze+1]=8,ze++,Oe[8]++;for(;255>=ze;)H[2*ze+1]=9,ze++,Oe[9]++;for(;279>=ze;)H[2*ze+1]=7,ze++,Oe[7]++;for(;287>=ze;)H[2*ze+1]=8,ze++,Oe[8]++;for(Se(H,287,Oe),ze=0;30>ze;ze++)N[2*ze+1]=5,N[2*ze]=Te(ze,5);De=new te(H,R,257,286,re),qe=new te(N,$,0,30,re),Qe=new te([],A,0,19,7)}(),Ve=!0),xe.l_desc=new ge(xe.dyn_ltree,De),xe.d_desc=new ge(xe.dyn_dtree,qe),xe.bl_desc=new ge(xe.bl_tree,Qe),xe.bi_buf=0,xe.bi_valid=0,Ae(xe)},q._tr_stored_block=U,q._tr_flush_block=function(xe,Oe,ze,rt){var ht=0,gt,Nt;0<xe.level?(xe.strm.data_type===2&&(xe.strm.data_type=function(ft){var zt=4093624447,Ut;for(Ut=0;31>=Ut;Ut++,zt>>>=1)if(1&zt&&ft.dyn_ltree[2*Ut]!==0)return 0;if(ft.dyn_ltree[18]!==0||ft.dyn_ltree[20]!==0||ft.dyn_ltree[26]!==0)return 1;for(Ut=32;256>Ut;Ut++)if(ft.dyn_ltree[2*Ut]!==0)return 1;return 0}(xe)),ee(xe,xe.l_desc),ee(xe,xe.d_desc),ht=function(ft){var zt;for(we(ft,ft.dyn_ltree,ft.l_desc.max_code),we(ft,ft.dyn_dtree,ft.d_desc.max_code),ee(ft,ft.bl_desc),zt=18;3<=zt&&ft.bl_tree[2*V[zt]+1]===0;zt--);return ft.opt_len+=3*(zt+1)+5+5+4,zt}(xe),gt=xe.opt_len+3+7>>>3,(Nt=xe.static_len+3+7>>>3)<=gt&&(gt=Nt)):gt=Nt=ze+5,ze+4<=gt&&Oe!==-1?U(xe,Oe,ze,rt):xe.strategy===4||Nt===gt?(Ie(xe,2+(rt?1:0),3),z(xe,H,N)):(Ie(xe,4+(rt?1:0),3),function(ft,zt,Ut,mr){var ki;for(Ie(ft,zt-257,5),Ie(ft,Ut-1,5),Ie(ft,mr-4,4),ki=0;ki<mr;ki++)Ie(ft,ft.bl_tree[2*V[ki]+1],3);se(ft,ft.dyn_ltree,zt-1),se(ft,ft.dyn_dtree,Ut-1)}(xe,xe.l_desc.max_code+1,xe.d_desc.max_code+1,ht+1),z(xe,xe.dyn_ltree,xe.dyn_dtree)),Ae(xe),rt&&X(xe)},q._tr_tally=function(xe,Oe,ze){return xe.pending_buf[xe.d_buf+2*xe.last_lit]=255&Oe>>>8,xe.pending_buf[xe.d_buf+2*xe.last_lit+1]=255&Oe,xe.pending_buf[xe.l_buf+xe.last_lit]=255&ze,xe.last_lit++,Oe===0?xe.dyn_ltree[2*ze]++:(xe.matches++,Oe--,xe.dyn_ltree[2*(be[ze]+256+1)]++,xe.dyn_dtree[2*ve(Oe)]++),xe.last_lit===xe.lit_bufsize-1},q._tr_align=function(xe){var Oe;Ie(xe,2,3),ke(xe,256,H),(Oe=xe).bi_valid===16?(Ee(Oe,Oe.bi_buf),Oe.bi_buf=0,Oe.bi_valid=0):8<=Oe.bi_valid&&(Oe.pending_buf[Oe.pending++]=255&Oe.bi_buf,Oe.bi_buf>>=8,Oe.bi_valid-=8)}},{"../utils/common":41}],53:[function(F,ae){ae.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(F,ae){ae.exports=typeof m=="function"?m:function(){var q=[].slice.apply(arguments);q.splice(1,0,0),setTimeout.apply(null,q)}},{}]},{},[10])(10)})}).call(this,ne===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:ne)},{}]},{},[1])(1)})}).call(this,B===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:B)},{}]},{},[1])(1)})}).call(this,T===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:T)},{}]},{},[1])(1)})}).call(this,_===void 0?typeof self>"u"?typeof window>"u"?{}:window:self:_)},{}]},{},[1])(1)})}).call(this,typeof p>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:p)},{}]},{},[1])(1)})}).call(this)}).call(this,typeof Aa>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Aa,l("buffer").Buffer,l("timers").setImmediate)},{buffer:12,timers:22}],16:[function(l,u){function c(){}function p(M){if(typeof M!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,M!==c&&b(this,M)}function d(M,k,D){this.promise=M,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof D=="function"&&(this.onRejected=D,this.callRejected=this.otherCallRejected)}function m(M,k,D){_(function(){var B;try{B=k(D)}catch(G){return E.reject(M,G)}B===M?E.reject(M,new TypeError("Cannot resolve promise with itself")):E.resolve(M,B)})}function g(M){var k=M&&M.then;if(M&&(typeof M=="object"||typeof M=="function")&&typeof k=="function")return function(){k.apply(M,arguments)}}function b(M,k){function D(K){G||(G=!0,E.reject(M,K))}function B(K){G||(G=!0,E.resolve(M,K))}var G=!1,W=v(function(){k(B,D)});W.status==="error"&&D(W.value)}function v(M,k){var D={};try{D.value=M(k),D.status="success"}catch(B){D.status="error",D.value=B}return D}var _=l("immediate"),E={},I=["REJECTED"],x=["FULFILLED"],T=["PENDING"];u.exports=p,p.prototype.finally=function(M){if(typeof M!="function")return this;var k=this.constructor;return this.then(function(D){return k.resolve(M()).then(function(){return D})},function(D){return k.resolve(M()).then(function(){throw D})})},p.prototype.catch=function(M){return this.then(null,M)},p.prototype.then=function(M,k){if(typeof M!="function"&&this.state===x||typeof k!="function"&&this.state===I)return this;var D=new this.constructor(c);if(this.state!==T){var B=this.state===x?M:k;m(D,B,this.outcome)}else this.queue.push(new d(D,M,k));return D},d.prototype.callFulfilled=function(M){E.resolve(this.promise,M)},d.prototype.otherCallFulfilled=function(M){m(this.promise,this.onFulfilled,M)},d.prototype.callRejected=function(M){E.reject(this.promise,M)},d.prototype.otherCallRejected=function(M){m(this.promise,this.onRejected,M)},E.resolve=function(M,k){var D=v(g,k);if(D.status==="error")return E.reject(M,D.value);var B=D.value;if(B)b(M,B);else{M.state=x,M.outcome=k;for(var G=-1,W=M.queue.length;++G<W;)M.queue[G].callFulfilled(k)}return M},E.reject=function(M,k){M.state=I,M.outcome=k;for(var D=-1,B=M.queue.length;++D<B;)M.queue[D].callRejected(k);return M},p.resolve=function(M){return M instanceof this?M:E.resolve(new this(c),M)},p.reject=function(M){var k=new this(c);return E.reject(k,M)},p.all=function(M){function k(y,C){function L(F){W[C]=F,++K!==B||G||(G=!0,E.resolve(ye,W))}D.resolve(y).then(L,function(F){G||(G=!0,E.reject(ye,F))})}var D=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=M.length,G=!1;if(!B)return this.resolve([]);for(var W=Array(B),K=0,ne=-1,ye=new this(c);++ne<B;)k(M[ne],ne);return ye},p.race=function(M){function k(ne){D.resolve(ne).then(function(ye){G||(G=!0,E.resolve(K,ye))},function(ye){G||(G=!0,E.reject(K,ye))})}var D=this;if(Object.prototype.toString.call(M)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=M.length,G=!1;if(!B)return this.resolve([]);for(var W=-1,K=new this(c);++W<B;)k(M[W]);return K}},{immediate:14}],17:[function(l,u){(function(){function c(M,k){return Object.prototype.hasOwnProperty.call(M,k)}function p(){return 1}function d(M){T||typeof M=="string"||typeof M=="number"||(T=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof M).stack))}function m(M){return this instanceof m?(typeof M=="number"&&(M={max:M}),!M&&(M={}),this._max=M.max,(!this._max||typeof this._max!="number"||0>=this._max)&&(this._max=1/0),this._lengthCalculator=M.length||p,typeof this._lengthCalculator!="function"&&(this._lengthCalculator=p),this._allowStale=M.stale||!1,this._maxAge=M.maxAge||null,this._dispose=M.dispose,void this.reset()):new m(M)}function g(M,k,D){d(k);var B=M._cache[k];return B&&(b(M,B)?(I(M,B),!M._allowStale&&(B=void 0)):D&&v(M,B),B&&(B=B.value)),B}function b(M,k){if(!k||!k.maxAge&&!M._maxAge)return!1;var D=!1,B=Date.now()-k.now;return D=k.maxAge?B>k.maxAge:M._maxAge&&B>M._maxAge,D}function v(M,k){E(M,k),k.lu=M._mru++,M._lruList[k.lu]=k}function _(M){for(;M._lru<M._mru&&M._length>M._max;)I(M,M._lruList[M._lru])}function E(M,k){for(delete M._lruList[k.lu];M._lru<M._mru&&!M._lruList[M._lru];)M._lru++}function I(M,k){k&&(M._dispose&&M._dispose(k.key,k.value),M._length-=k.length,M._itemCount--,delete M._cache[k.key],E(M,k))}function x(M,k,D,B,G,W){this.key=M,this.value=k,this.lu=D,this.length=B,this.now=G,W&&(this.maxAge=W)}typeof u=="object"&&u.exports?u.exports=m:this.LRUCache=m;var T=!1;Object.defineProperty(m.prototype,"max",{set:function(M){M&&typeof M=="number"&&!(0>=M)||(M=1/0),this._max=M,this._length>this._max&&_(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(m.prototype,"lengthCalculator",{set:function(M){if(typeof M!="function")for(var k in this._lengthCalculator=p,this._length=this._itemCount,this._cache)this._cache[k].length=1;else for(var k in this._lengthCalculator=M,this._length=0,this._cache)this._cache[k].length=this._lengthCalculator(this._cache[k].value),this._length+=this._cache[k].length;this._length>this._max&&_(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(m.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(m.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),m.prototype.forEach=function(M,k){k=k||this;for(var D=0,B=this._itemCount,G=this._mru-1;0<=G&&D<B;G--)if(this._lruList[G]){D++;var W=this._lruList[G];b(this,W)&&(I(this,W),!this._allowStale&&(W=void 0)),W&&M.call(k,W.value,W.key,this)}},m.prototype.keys=function(){for(var M=Array(this._itemCount),k=0,D=this._mru-1;0<=D&&k<this._itemCount;D--)if(this._lruList[D]){var B=this._lruList[D];M[k++]=B.key}return M},m.prototype.values=function(){for(var M=Array(this._itemCount),k=0,D=this._mru-1;0<=D&&k<this._itemCount;D--)if(this._lruList[D]){var B=this._lruList[D];M[k++]=B.value}return M},m.prototype.reset=function(){if(this._dispose&&this._cache)for(var M in this._cache)this._dispose(M,this._cache[M].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},m.prototype.dump=function(){for(var M=[],k=0,D=this._mru-1;0<=D&&k<this._itemCount;D--)if(this._lruList[D]){var B=this._lruList[D];b(this,B)||(++k,M.push({k:B.key,v:B.value,e:B.now+(B.maxAge||0)}))}return M},m.prototype.dumpLru=function(){return this._lruList},m.prototype.set=function(M,k,D){D=D||this._maxAge,d(M);var B=D?Date.now():0,G=this._lengthCalculator(k);if(c(this._cache,M))return G>this._max?(I(this,this._cache[M]),!1):(this._dispose&&this._dispose(M,this._cache[M].value),this._cache[M].now=B,this._cache[M].maxAge=D,this._cache[M].value=k,this._length+=G-this._cache[M].length,this._cache[M].length=G,this.get(M),this._length>this._max&&_(this),!0);var W=new x(M,k,this._mru++,G,B,D);return W.length>this._max?(this._dispose&&this._dispose(M,k),!1):(this._length+=W.length,this._lruList[W.lu]=this._cache[M]=W,this._itemCount++,this._length>this._max&&_(this),!0)},m.prototype.has=function(M){if(d(M),!c(this._cache,M))return!1;var k=this._cache[M];return!b(this,k)},m.prototype.get=function(M){return d(M),g(this,M,!0)},m.prototype.peek=function(M){return d(M),g(this,M,!1)},m.prototype.pop=function(){var M=this._lruList[this._lru];return I(this,M),M||null},m.prototype.del=function(M){d(M),I(this,this._cache[M])},m.prototype.load=function(M){this.reset();for(var k=Date.now(),D=M.length-1,B;0<=D;D--){B=M[D],d(B.k);var G=B.e||0;if(G===0)this.set(B.k,B.v);else{var W=G-k;0<W&&this.set(B.k,B.v,W)}}}})()},{}],18:[function(l,u){function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function d(B){if(I===setTimeout)return setTimeout(B,0);if((I===c||!I)&&setTimeout)return I=setTimeout,setTimeout(B,0);try{return I(B,0)}catch{try{return I.call(null,B,0)}catch{return I.call(this,B,0)}}}function m(B){if(x===clearTimeout)return clearTimeout(B);if((x===p||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(B);try{return x(B)}catch{try{return x.call(null,B)}catch{return x.call(this,B)}}}function g(){M&&D&&(M=!1,D.length?T=D.concat(T):k=-1,T.length&&b())}function b(){if(!M){var B=d(g);M=!0;for(var G=T.length;G;){for(D=T,T=[];++k<G;)D&&D[k].run();k=-1,G=T.length}D=null,M=!1,m(B)}}function v(B,G){this.fun=B,this.array=G}function _(){}var E=u.exports={},I,x;(function(){try{I=typeof setTimeout=="function"?setTimeout:c}catch{I=c}try{x=typeof clearTimeout=="function"?clearTimeout:p}catch{x=p}})();var T=[],M=!1,k=-1,D;E.nextTick=function(B){var G=Array(arguments.length-1);if(1<arguments.length)for(var W=1;W<arguments.length;W++)G[W-1]=arguments[W];T.push(new v(B,G)),T.length!==1||M||d(b)},v.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={},E.on=_,E.addListener=_,E.once=_,E.off=_,E.removeListener=_,E.removeAllListeners=_,E.emit=_,E.prependListener=_,E.prependOnceListener=_,E.listeners=function(){return[]},E.binding=function(){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(){throw new Error("process.chdir is not supported")},E.umask=function(){return 0}},{}],19:[function(l,u,c){(function(p,d){typeof c=="object"&&typeof u<"u"?u.exports=d():p.proj4=d()})(this,function(){var p=Math.asin,d=Math.acos,m=Number.NaN,g=Math.atan2,b=Math.round,v=Math.PI,_=Math.atan,E=Math.exp,I=Math.tan,x=Math.sin,T=Math.cos,M=Math.sqrt;function k(S,O){if(S[O])return S[O];for(var P=Object.keys(S),Q=O.toLowerCase().replace(Bb,""),J=-1,ie,he;++J<P.length;)if(ie=P[J],he=ie.toLowerCase().replace(Bb,""),he===Q)return S[ie]}function D(S){if(typeof S!="string")throw new Error("not a string");this.text=S.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function B(S){var O=new D(S);return O.output()}function G(S,O,P){Array.isArray(O)&&(P.unshift(O),O=null);var Q=O?{}:S,J=P.reduce(function(ie,he){return W(he,ie),ie},Q);O&&(S[O]=J)}function W(S,O){if(!Array.isArray(S))return void(O[S]=!0);var P=S.shift();if(P==="PARAMETER"&&(P=S.shift()),S.length===1)return Array.isArray(S[0])?(O[P]={},void W(S[0],O[P])):void(O[P]=S[0]);if(!S.length)return void(O[P]=!0);if(P==="TOWGS84")return void(O[P]=S);if(P==="AXIS")return P in O||(O[P]=[]),void O[P].push(S);Array.isArray(P)||(O[P]={});var Q;switch(P){case"UNIT":case"PRIMEM":case"VERT_DATUM":return O[P]={name:S[0].toLowerCase(),convert:S[1]},void(S.length===3&&W(S[2],O[P]));case"SPHEROID":case"ELLIPSOID":return O[P]={name:S[0],a:S[1],rf:S[2]},void(S.length===4&&W(S[3],O[P]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return S[0]=["name",S[0]],void G(O,P,S);default:for(Q=-1;++Q<S.length;)if(!Array.isArray(S[Q]))return W(S,O[P]);return G(O,P,S)}}function K(S,O){var P=O[0],Q=O[1];!(P in S)&&Q in S&&(S[P]=S[Q],O.length===3&&(S[P]=O[2](S[P])))}function ne(S){return S*Ye}function ye(S){function O(ce){var Me=S.to_meter||1;return ce*Me}if(S.type==="GEOGCS"?S.projName="longlat":S.type==="LOCAL_CS"?(S.projName="identity",S.local=!0):typeof S.PROJECTION=="object"?S.projName=Object.keys(S.PROJECTION)[0]:S.projName=S.PROJECTION,S.AXIS){for(var P="",Q=0,J=S.AXIS.length,ie;Q<J;++Q)ie=[S.AXIS[Q][0].toLowerCase(),S.AXIS[Q][1].toLowerCase()],ie[0].indexOf("north")!==-1||(ie[0]==="y"||ie[0]==="lat")&&ie[1]==="north"?P+="n":ie[0].indexOf("south")!==-1||(ie[0]==="y"||ie[0]==="lat")&&ie[1]==="south"?P+="s":ie[0].indexOf("east")!==-1||(ie[0]==="x"||ie[0]==="lon")&&ie[1]==="east"?P+="e":(ie[0].indexOf("west")!==-1||(ie[0]==="x"||ie[0]==="lon")&&ie[1]==="west")&&(P+="w");P.length===2&&(P+="u"),P.length===3&&(S.axis=P)}S.UNIT&&(S.units=S.UNIT.name.toLowerCase(),S.units==="metre"&&(S.units="meter"),S.UNIT.convert&&(S.type==="GEOGCS"?S.DATUM&&S.DATUM.SPHEROID&&(S.to_meter=S.UNIT.convert*S.DATUM.SPHEROID.a):S.to_meter=S.UNIT.convert));var he=S.GEOGCS;S.type==="GEOGCS"&&(he=S),he&&(S.datumCode=he.DATUM?he.DATUM.name.toLowerCase():he.name.toLowerCase(),S.datumCode.slice(0,2)==="d_"&&(S.datumCode=S.datumCode.slice(2)),(S.datumCode==="new_zealand_geodetic_datum_1949"||S.datumCode==="new_zealand_1949")&&(S.datumCode="nzgd49"),(S.datumCode==="wgs_1984"||S.datumCode==="world_geodetic_system_1984")&&(S.PROJECTION==="Mercator_Auxiliary_Sphere"&&(S.sphere=!0),S.datumCode="wgs84"),S.datumCode.slice(-6)==="_ferro"&&(S.datumCode=S.datumCode.slice(0,-6)),S.datumCode.slice(-8)==="_jakarta"&&(S.datumCode=S.datumCode.slice(0,-8)),~S.datumCode.indexOf("belge")&&(S.datumCode="rnb72"),he.DATUM&&he.DATUM.SPHEROID&&(S.ellps=he.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),S.ellps.toLowerCase().slice(0,13)==="international"&&(S.ellps="intl"),S.a=he.DATUM.SPHEROID.a,S.rf=parseFloat(he.DATUM.SPHEROID.rf,10)),he.DATUM&&he.DATUM.TOWGS84&&(S.datum_params=he.DATUM.TOWGS84),~S.datumCode.indexOf("osgb_1936")&&(S.datumCode="osgb36"),~S.datumCode.indexOf("osni_1952")&&(S.datumCode="osni52"),(~S.datumCode.indexOf("tm65")||~S.datumCode.indexOf("geodetic_datum_of_1965"))&&(S.datumCode="ire65"),S.datumCode==="ch1903+"&&(S.datumCode="ch1903"),~S.datumCode.indexOf("israel")&&(S.datumCode="isr93")),S.b&&!isFinite(S.b)&&(S.b=S.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ne],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ne],["x0","false_easting",O],["y0","false_northing",O],["long0","central_meridian",ne],["lat0","latitude_of_origin",ne],["lat0","standard_parallel_1",ne],["lat1","standard_parallel_1",ne],["lat2","standard_parallel_2",ne],["azimuth","Azimuth"],["alpha","azimuth",ne],["srsCode","name"]].forEach(function(ce){return K(S,ce)}),!S.long0&&S.longc&&(S.projName==="Albers_Conic_Equal_Area"||S.projName==="Lambert_Azimuthal_Equal_Area")&&(S.long0=S.longc),!S.lat_ts&&S.lat1&&(S.projName==="Stereographic_South_Pole"||S.projName==="Polar Stereographic (variant B)")&&(S.lat0=ne(0<S.lat1?90:-90),S.lat_ts=S.lat1)}function y(S){var O=this;if(arguments.length===2){var P=arguments[1];y[S]=typeof P=="string"?P.charAt(0)==="+"?zb(arguments[1]):tt(arguments[1]):P}else if(arguments.length===1){if(Array.isArray(S))return S.map(function(Q){Array.isArray(Q)?y.apply(O,Q):y(Q)});if(typeof S!="string")"EPSG"in S?y["EPSG:"+S.EPSG]=S:"ESRI"in S?y["ESRI:"+S.ESRI]=S:"IAU2000"in S?y["IAU2000:"+S.IAU2000]=S:console.log(S);else if(S in y)return y[S]}}function C(S){return typeof S=="string"}function L(S){return S in y}function F(S){return hr.some(function(O){return-1<S.indexOf(O)})}function ae(S){var O=k(S,"authority");if(O){var P=k(O,"epsg");return P&&-1<$n.indexOf(P)}}function q(S){var O=k(S,"extension");return O?k(O,"proj4"):void 0}function fe(S){return S[0]==="+"}function te(S){if(C(S)){if(L(S))return y[S];if(F(S)){var O=tt(S);if(ae(O))return y["EPSG:3857"];var P=q(O);return P?zb(P):O}if(fe(S))return zb(S)}else return S}function ge(){var S=this.b/this.a;this.es=1-S*S,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=M(this.es),this.lat_ts?this.sphere?this.k0=T(this.lat_ts):this.k0=Oi(this.e,x(this.lat_ts),T(this.lat_ts)):!this.k0&&(this.k?this.k0=this.k:this.k0=1)}function ve(S){return S}function Ee(S,O){var P=o3.length;return S.names?(o3[P]=S,S.names.forEach(function(Q){s3[Q.toLowerCase()]=P}),this):(console.log(O),!0)}function Ie(S,O,P,Q){var J=S*S,ie=O*O,he=(J-ie)/J,ce=0;Q?(S*=1-he*(t3+he*(tr+he*l$)),J=S*S,he=0):ce=M(he);var Me=(J-ie)/ie;return{es:he,e:ce,ep2:Me}}function ke(S,O,P,Q,J){if(!S){var ie=k(sr,Q);ie||(ie=Zhe),S=ie.a,O=ie.b,P=ie.rf}return P&&!O&&(O=(1-1/P)*S),(P===0||i(S-O)<_t)&&(J=!0,O=S),{a:S,b:O,rf:P,sphere:J}}function Te(S,O,P,Q,J,ie,he){var ce={};return ce.datum_type=S===void 0||S==="none"?5:4,O&&(ce.datum_params=O.map(parseFloat),(ce.datum_params[0]!==0||ce.datum_params[1]!==0||ce.datum_params[2]!==0)&&(ce.datum_type=1),3<ce.datum_params.length&&(ce.datum_params[3]!==0||ce.datum_params[4]!==0||ce.datum_params[5]!==0||ce.datum_params[6]!==0)&&(ce.datum_type=2,ce.datum_params[3]*=Js,ce.datum_params[4]*=Js,ce.datum_params[5]*=Js,ce.datum_params[6]=ce.datum_params[6]/1e6+1)),he&&(ce.datum_type=3,ce.grids=he),ce.a=P,ce.b=Q,ce.es=J,ce.ep2=ie,ce}function Se(S,O){var P=new DataView(O),Q=le(P),J=z(P,Q);1<J.nSubgrids&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var ie=we(P,J,Q),he={header:J,subgrids:ie};return hj[S]=he,he}function Ae(S){if(S===void 0)return null;var O=S.split(",");return O.map(X)}function X(S){if(S.length===0)return null;var O=S[0]==="@";return O&&(S=S.slice(1)),S==="null"?{name:"null",mandatory:!O,grid:null,isNull:!0}:{name:S,mandatory:!O,grid:hj[S]||null,isNull:!1}}function Z(S){return S/3600*v/180}function le(S){var O=S.getInt32(8,!1);return O!==11&&(O=S.getInt32(8,!0),O!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function z(S,O){return{nFields:S.getInt32(8,O),nSubgridFields:S.getInt32(24,O),nSubgrids:S.getInt32(40,O),shiftType:ee(S,56,64).trim(),fromSemiMajorAxis:S.getFloat64(120,O),fromSemiMinorAxis:S.getFloat64(136,O),toSemiMajorAxis:S.getFloat64(152,O),toSemiMinorAxis:S.getFloat64(168,O)}}function ee(S,O,P){return a.apply(null,new Uint8Array(S.buffer.slice(O,P)))}function we(S,O,P){for(var Q=176,J=[],ie=0;ie<O.nSubgrids;ie++){var he=U(S,Q,P),ce=oe(S,Q,he,P),Me=b(1+(he.upperLongitude-he.lowerLongitude)/he.longitudeInterval),Le=b(1+(he.upperLatitude-he.lowerLatitude)/he.latitudeInterval);J.push({ll:[Z(he.lowerLongitude),Z(he.lowerLatitude)],del:[Z(he.longitudeInterval),Z(he.latitudeInterval)],lim:[Me,Le],count:he.gridNodeCount,cvs:se(ce)})}return J}function se(S){return S.map(function(O){return[Z(O.longitudeShift),Z(O.latitudeShift)]})}function U(S,O,P){return{name:ee(S,O+8,O+16).trim(),parent:ee(S,O+24,O+24+8).trim(),lowerLatitude:S.getFloat64(O+72,P),upperLatitude:S.getFloat64(O+88,P),lowerLongitude:S.getFloat64(O+104,P),upperLongitude:S.getFloat64(O+120,P),latitudeInterval:S.getFloat64(O+136,P),longitudeInterval:S.getFloat64(O+152,P),gridNodeCount:S.getInt32(O+168,P)}}function oe(S,O,P,Q){for(var J=O+176,ie=16,he=[],ce=0,Me;ce<P.gridNodeCount;ce++)Me={latitudeShift:S.getFloat32(J+ce*ie,Q),longitudeShift:S.getFloat32(J+ce*ie+4,Q),latitudeAccuracy:S.getFloat32(J+ce*ie+8,Q),longitudeAccuracy:S.getFloat32(J+ce*ie+12,Q)},he.push(Me);return he}function re(S,O){if(!(this instanceof re))return new re(S);O=O||function(Le){if(Le)throw Le};var P=te(S);if(typeof P!="object")return void O(S);var Q=re.projections.get(P.projName);if(!Q)return void O(S);if(P.datumCode&&P.datumCode!=="none"){var J=k(Khe,P.datumCode);J&&(P.datum_params=P.datum_params||(J.towgs84?J.towgs84.split(","):null),P.ellps=J.ellipse,P.datumName=J.datumName?J.datumName:P.datumCode)}P.k0=P.k0||1,P.axis=P.axis||"enu",P.ellps=P.ellps||"wgs84",P.lat1=P.lat1||P.lat0;var ie=ke(P.a,P.b,P.rf,P.ellps,P.sphere),he=Ie(ie.a,ie.b,ie.rf,P.R_A),ce=Ae(P.nadgrids),Me=P.datum||Te(P.datumCode,P.datum_params,ie.a,ie.b,he.es,he.ep2,ce);yi(this,P),yi(this,Q),this.a=ie.a,this.b=ie.b,this.rf=ie.rf,this.sphere=ie.sphere,this.es=he.es,this.e=he.e,this.ep2=he.ep2,this.datum=Me,this.init(),O(null,this)}function R(S,O){return S.datum_type===O.datum_type&&!(S.a!==O.a||5e-11<i(S.es-O.es))&&(S.datum_type===1?S.datum_params[0]===O.datum_params[0]&&S.datum_params[1]===O.datum_params[1]&&S.datum_params[2]===O.datum_params[2]:S.datum_type!==2||S.datum_params[0]===O.datum_params[0]&&S.datum_params[1]===O.datum_params[1]&&S.datum_params[2]===O.datum_params[2]&&S.datum_params[3]===O.datum_params[3]&&S.datum_params[4]===O.datum_params[4]&&S.datum_params[5]===O.datum_params[5]&&S.datum_params[6]===O.datum_params[6])}function $(S,O,P){var Q=S.x,J=S.y,ie=S.z?S.z:0,he,ce,Me,Le;if(J<-at&&J>-1.001*at)J=-at;else if(J>at&&J<1.001*at)J=at;else{if(J<-at)return{x:-1/0,y:-1/0,z:S.z};if(J>at)return{x:1/0,y:1/0,z:S.z}}return Q>v&&(Q-=2*v),ce=x(J),Le=T(J),Me=ce*ce,he=P/M(1-O*Me),{x:(he+ie)*Le*T(Q),y:(he+ie)*Le*x(Q),z:(he*(1-O)+ie)*ce}}function A(S,O,P,Q){var J=1e-12,ie=S.x,he=S.y,ce=S.z?S.z:0,Me,Le,He,Fe,Ze,ct,vt,lt,Dt,or,yr,Kt,Zr,Gr,hi,Ss;if(Me=M(ie*ie+he*he),Le=M(ie*ie+he*he+ce*ce),!(Me/P<J))Gr=g(he,ie);else if(Gr=0,Le/P<J)return hi=at,Ss=-Q,{x:S.x,y:S.y,z:S.z};He=ce/Le,Fe=Me/Le,Ze=1/M(1-O*(2-O)*Fe*Fe),lt=Fe*(1-O)*Ze,Dt=He*Ze,Zr=0;do Zr++,vt=P/M(1-O*Dt*Dt),Ss=Me*lt+ce*Dt-vt*(1-O*Dt*Dt),ct=O*vt/(vt+Ss),Ze=1/M(1-ct*(2-ct)*Fe*Fe),or=Fe*(1-ct)*Ze,yr=He*Ze,Kt=yr*lt-or*Dt,lt=or,Dt=yr;while(Kt*Kt>J*J&&Zr<30);return hi=_(yr/i(or)),{x:Gr,y:hi,z:Ss}}function V(S,O,P){if(O===1)return{x:S.x+P[0],y:S.y+P[1],z:S.z+P[2]};if(O===2){var Q=P[0],J=P[1],ie=P[2],he=P[3],ce=P[4],Me=P[5],Le=P[6];return{x:Le*(S.x-Me*S.y+ce*S.z)+Q,y:Le*(Me*S.x+S.y-he*S.z)+J,z:Le*(-ce*S.x+he*S.y+S.z)+ie}}}function H(S,O,P){if(O===1)return{x:S.x-P[0],y:S.y-P[1],z:S.z-P[2]};if(O===2){var Q=P[0],J=P[1],ie=P[2],he=P[3],ce=P[4],Me=P[5],Le=P[6],He=(S.x-Q)/Le,Fe=(S.y-J)/Le,Ze=(S.z-ie)/Le;return{x:He+Me*Fe-ce*Ze,y:-Me*He+Fe+he*Ze,z:ce*He-he*Fe+Ze}}}function N(S){return S===1||S===2}function Y(S,O,P){if(S.grids===null||S.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var Q={x:-P.x,y:P.y},J={x:m,y:m},ie=[],he=0,ce;he<S.grids.length;he++){if(ce=S.grids[he],ie.push(ce.name),ce.isNull){J=Q;break}if(ce.grid===null){if(ce.mandatory)return console.log("Unable to find mandatory grid '"+ce.name+"'"),-1;continue}var Me=ce.grid.subgrids[0],Le=(i(Me.del[1])+i(Me.del[0]))/1e4,He=Me.ll[0]-Le,Fe=Me.ll[1]-Le,Ze=Me.ll[0]+(Me.lim[0]-1)*Me.del[0]+Le,ct=Me.ll[1]+(Me.lim[1]-1)*Me.del[1]+Le;if(!(Fe>Q.y||He>Q.x||ct<Q.y||Ze<Q.x)&&(J=be(Q,O,Me),!isNaN(J.x)))break}return isNaN(J.x)?(console.log("Failed to find a grid shift table for location '"+-Q.x*sl+" "+Q.y*sl+" tried: '"+ie+"'"),-1):(P.x=-J.x,P.y=J.y,0)}function be(S,O,P){var Q={x:m,y:m};if(isNaN(S.x))return Q;var J={x:S.x,y:S.y};J.x-=P.ll[0],J.y-=P.ll[1],J.x=Pt(J.x-v)+v;var ie=_e(J,P);if(O){if(isNaN(ie.x))return Q;ie.x=J.x-ie.x,ie.y=J.y-ie.y;var he=9,ce=1e-12,Me,Le;do{if(Le=_e(ie,P),isNaN(Le.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Me={x:J.x-(Le.x+ie.x),y:J.y-(Le.y+ie.y)},ie.x+=Me.x,ie.y+=Me.y}while(he--&&i(Me.x)>ce&&i(Me.y)>ce);if(0>he)return console.log("Inverse grid shift iterator failed to converge."),Q;Q.x=Pt(ie.x+P.ll[0]),Q.y=ie.y+P.ll[1]}else isNaN(ie.x)||(Q.x=S.x+ie.x,Q.y=S.y+ie.y);return Q}function _e(S,O){var P={x:S.x/O.del[0],y:S.y/O.del[1]},Q={x:o(P.x),y:o(P.y)},J={x:P.x-1*Q.x,y:P.y-1*Q.y},ie={x:m,y:m},he;if(0>Q.x||Q.x>=O.lim[0]||0>Q.y||Q.y>=O.lim[1])return ie;he=Q.y*O.lim[0]+Q.x;var ce={x:O.cvs[he][0],y:O.cvs[he][1]};he++;var Me={x:O.cvs[he][0],y:O.cvs[he][1]};he+=O.lim[0];var Le={x:O.cvs[he][0],y:O.cvs[he][1]};he--;var He={x:O.cvs[he][0],y:O.cvs[he][1]},Fe=J.x*J.y,Ze=J.x*(1-J.y),ct=(1-J.x)*(1-J.y),vt=(1-J.x)*J.y;return ie.x=ct*ce.x+Ze*Me.x+vt*He.x+Fe*Le.x,ie.y=ct*ce.y+Ze*Me.y+vt*He.y+Fe*Le.y,ie}function ue(S){var O=Number.isFinite;if(typeof O=="function"){if(O(S))return;throw new TypeError("coordinates must be finite numbers")}if(typeof S!="number"||S!==S||!isFinite(S))throw new TypeError("coordinates must be finite numbers")}function De(S,O){return(S.datum.datum_type===1||S.datum.datum_type===2)&&O.datumCode!=="WGS84"||(O.datum.datum_type===1||O.datum.datum_type===2)&&S.datumCode!=="WGS84"}function qe(S,O,P){var Q;if(Array.isArray(P)&&(P=dj(P)),Qhe(P),S.datum&&O.datum&&De(S,O)&&(Q=new re("WGS84"),P=qe(S,Q,P),S=Q),S.axis!=="enu"&&(P=pj(S,!1,P)),S.projName==="longlat")P={x:P.x*An,y:P.y*An,z:P.z||0};else if(S.to_meter&&(P={x:P.x*S.to_meter,y:P.y*S.to_meter,z:P.z||0}),P=S.inverse(P),!P)return;return S.from_greenwich&&(P.x+=S.from_greenwich),P=Yhe(S.datum,O.datum,P),!P?void 0:(O.from_greenwich&&(P={x:P.x-O.from_greenwich,y:P.y,z:P.z||0}),O.projName==="longlat"?P={x:P.x*sl,y:P.y*sl,z:P.z||0}:(P=O.forward(P),O.to_meter&&(P={x:P.x/O.to_meter,y:P.y/O.to_meter,z:P.z||0})),O.axis==="enu"?P:pj(O,!0,P))}function Qe(S,O,P){var Q,J,ie;return Array.isArray(P)?(Q=qe(S,O,P)||{x:NaN,y:NaN},2<P.length?typeof S.name<"u"&&S.name==="geocent"||typeof O.name<"u"&&O.name==="geocent"?typeof Q.z=="number"?[Q.x,Q.y,Q.z].concat(P.splice(3)):[Q.x,Q.y,P[2]].concat(P.splice(3)):[Q.x,Q.y].concat(P.splice(2)):[Q.x,Q.y]):(J=qe(S,O,P),ie=Object.keys(P),ie.length===2||ie.forEach(function(he){if(typeof S.name<"u"&&S.name==="geocent"||typeof O.name<"u"&&O.name==="geocent"){if(he==="x"||he==="y"||he==="z")return}else if(he==="x"||he==="y")return;J[he]=P[he]}),J)}function Ve(S){return S instanceof re?S:S.oProj?S.oProj:re(S)}function xe(S,O,P){S=Ve(S);var Q=!1,J;return typeof O>"u"?(O=S,S=fj,Q=!0):(typeof O.x<"u"||Array.isArray(O))&&(P=O,O=S,S=fj,Q=!0),O=Ve(O),P?Qe(S,O,P):(J={forward:function(ie){return Qe(S,O,ie)},inverse:function(ie){return Qe(O,S,ie)}},Q&&(J.oProj=O),J)}function Oe(S,O){return O=O||5,zt(gt({lat:S[1],lon:S[0]}),O)}function ze(S){var O=Nt(ws(S.toUpperCase()));return O.lat&&O.lon?[O.lon,O.lat]:[(O.left+O.right)/2,(O.top+O.bottom)/2]}function rt(S){return S*(v/180)}function ht(S){return 180*(S/v)}function gt(S){var O=S.lat,P=S.lon,Q=6378137,J=.00669438,ie=.9996,he=rt(O),ce,Me,Le,He,Fe,Ze;Ze=o((P+180)/6)+1,P===180&&(Ze=60),56<=O&&64>O&&3<=P&&12>P&&(Ze=32),72<=O&&84>O&&(0<=P&&9>P?Ze=31:9<=P&&21>P?Ze=33:21<=P&&33>P?Ze=35:33<=P&&42>P&&(Ze=37)),ce=J/(1-J),Me=Q/M(1-J*x(he)*x(he)),Le=I(he)*I(he),He=ce*T(he)*T(he),Fe=Q*((1-J/4-3*J*J/64-5*J*J*J/256)*he-(3*J/8+3*J*J/32+45*J*J*J/1024)*x(2*he)+(15*J*J/256+45*J*J*J/1024)*x(4*he)-35*J*J*J/3072*x(6*he));var ct=ie*Me*(65+65*(65*(65*(1-Le+He)))/6+65*(65*(65*(65*(65*(5-18*Le+Le*Le+72*He-58*ce)))))/120)+5e5,vt=ie*(Fe+Me*I(he)*(4225/2+65*(65*(65*(65*(5-Le+9*He+4*He*He))))/24+65*(65*(65*(65*(65*(65*(61-58*Le+Le*Le+600*He-330*ce))))))/720));return 0>O&&(vt+=1e7),{northing:b(vt),easting:b(ct),zoneNumber:Ze,zoneLetter:ft(O)}}function Nt(S){var O=S.northing,P=S.easting,Q=S.zoneLetter,J=S.zoneNumber;if(0>J||60<J)return null;var ie=.9996,he=6378137,ce=.00669438,Me=(1-M(1-ce))/(1+M(1-ce)),Le=O,He,Fe,Ze,ct,vt,lt,Dt,or,yr,Kt;"N">Q&&(Le-=1e7),or=6*(J-1)-180+3,He=ce/(1-ce),Dt=Le/ie,yr=Dt/(he*(1-ce/4-3*ce*ce/64-5*ce*ce*ce/256)),Kt=yr+(3*Me/2-27*Me*Me*Me/32)*x(2*yr)+(21*Me*Me/16-55*Me*Me*Me*Me/32)*x(4*yr)+151*Me*Me*Me/96*x(6*yr),Fe=he/M(1-ce*x(Kt)*x(Kt)),Ze=I(Kt)*I(Kt),ct=He*T(Kt)*T(Kt),vt=he*(1-ce)/n(1-ce*x(Kt)*x(Kt),1.5),lt=(P-5e5)/(Fe*ie);var Zr=Kt-Fe*I(Kt)/vt*(lt*lt/2-(5+3*Ze+10*ct-4*ct*ct-9*He)*lt*lt*lt*lt/24+(61+90*Ze+298*ct+45*Ze*Ze-252*He-3*ct*ct)*lt*lt*lt*lt*lt*lt/720);Zr=ht(Zr);var Gr=(lt-(1+2*Ze+ct)*lt*lt*lt/6+(5-2*ct+28*Ze-3*ct*ct+8*He+24*Ze*Ze)*lt*lt*lt*lt*lt/120)/T(Kt);Gr=or+ht(Gr);var hi;if(S.accuracy){var Ss=Nt({northing:S.northing+S.accuracy,easting:S.easting+S.accuracy,zoneLetter:S.zoneLetter,zoneNumber:S.zoneNumber});hi={top:Ss.lat,right:Ss.lon,bottom:Zr,left:Gr}}else hi={lat:Zr,lon:Gr};return hi}function ft(S){var O="Z";return 84>=S&&72<=S?O="X":72>S&&64<=S?O="W":64>S&&56<=S?O="V":56>S&&48<=S?O="U":48>S&&40<=S?O="T":40>S&&32<=S?O="S":32>S&&24<=S?O="R":24>S&&16<=S?O="Q":16>S&&8<=S?O="P":8>S&&0<=S?O="N":0>S&&-8<=S?O="M":-8>S&&-16<=S?O="L":-16>S&&-24<=S?O="K":-24>S&&-32<=S?O="J":-32>S&&-40<=S?O="H":-40>S&&-48<=S?O="G":-48>S&&-56<=S?O="F":-56>S&&-64<=S?O="E":-64>S&&-72<=S?O="D":-72>S&&-80<=S&&(O="C"),O}function zt(S,O){var P="00000"+S.easting,Q="00000"+S.northing;return S.zoneNumber+S.zoneLetter+Ut(S.easting,S.northing,S.zoneNumber)+P.substr(P.length-5,O)+Q.substr(Q.length-5,O)}function Ut(S,O,P){var Q=mr(P),J=o(S/1e5),ie=o(O/1e5)%20;return ki(J,ie,Q)}function mr(S){var O=S%6;return O===0&&(O=6),O}function ki(S,O,P){var Q=P-1,J="AJSAJS".charCodeAt(Q),ie="AFAFAF".charCodeAt(Q),he=J+S-1,ce=ie+O,Me=!1;90<he&&(he=he-90+65-1,Me=!0),(he===73||73>J&&73<he||(73<he||73>J)&&Me)&&he++,(he===79||79>J&&79<he||(79<he||79>J)&&Me)&&(he++,he===73&&he++),90<he&&(he=he-90+65-1),86<ce?(ce=ce-86+65-1,Me=!0):Me=!1,(ce===73||73>ie&&73<ce||(73<ce||73>ie)&&Me)&&ce++,(ce===79||79>ie&&79<ce||(79<ce||79>ie)&&Me)&&(ce++,ce===73&&ce++),86<ce&&(ce=ce-86+65-1);var Le=a(he)+a(ce);return Le}function ws(S){if(S&&S.length===0)throw"MGRSPoint coverting from nothing";for(var O=S.length,P=null,Q="",J=0,ie;!/[A-Z]/.test(ie=S.charAt(J));){if(2<=J)throw"MGRSPoint bad conversion from: "+S;Q+=ie,J++}var he=parseInt(Q,10);if(J===0||J+3>O)throw"MGRSPoint bad conversion from: "+S;var ce=S.charAt(J++);if("A">=ce||ce==="B"||ce==="Y"||"Z"<=ce||ce==="I"||ce==="O")throw"MGRSPoint zone letter "+ce+" not handled: "+S;P=S.substring(J,J+=2);for(var Me=mr(he),Le=ac(P.charAt(0),Me),He=lc(P.charAt(1),Me);He<Vb(ce);)He+=2e6;var Fe=O-J;if(Fe%2!=0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+S;var Ze=Fe/2,ct=0,vt=0,lt,Dt,or,yr,Kt;return 0<Ze&&(lt=1e5/n(10,Ze),Dt=S.substring(J,J+Ze),ct=parseFloat(Dt)*lt,or=S.substring(J+Ze),vt=parseFloat(or)*lt),yr=ct+Le,Kt=vt+He,{easting:yr,northing:Kt,zoneLetter:ce,zoneNumber:he,accuracy:lt}}function ac(S,O){for(var P="AJSAJS".charCodeAt(O-1),Q=1e5,J=!1;P!==S.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,90<P){if(J)throw"Bad character: "+S;P=65,J=!0}Q+=1e5}return Q}function lc(S,O){if("V"<S)throw"MGRSPoint given invalid Northing "+S;for(var P="AFAFAF".charCodeAt(O-1),Q=0,J=!1;P!==S.charCodeAt(0);){if(P++,P===73&&P++,P===79&&P++,86<P){if(J)throw"Bad character: "+S;P=65,J=!0}Q+=1e5}return Q}function Vb(S){var O;if(O=S==="C"?11e5:S==="D"?2e6:S==="E"?28e5:S==="F"?37e5:S==="G"?46e5:S==="H"?55e5:S==="J"?64e5:S==="K"?73e5:S==="L"?82e5:S==="M"?91e5:S==="N"?0:S==="P"?8e5:S==="Q"?17e5:S==="R"?26e5:S==="S"?35e5:S==="T"?44e5:S==="U"?53e5:S==="V"?62e5:S==="W"?7e6:S==="X"?79e5:-1,0<=O)return O;throw"Invalid zone letter: "+S}function uc(S,O,P){if(!(this instanceof uc))return new uc(S,O,P);if(Array.isArray(S))this.x=S[0],this.y=S[1],this.z=S[2]||0;else if(typeof S=="object")this.x=S.x,this.y=S.y,this.z=S.z||0;else if(typeof S=="string"&&typeof O>"u"){var Q=S.split(",");this.x=parseFloat(Q[0],10),this.y=parseFloat(Q[1],10),this.z=parseFloat(Q[2],10)||0}else this.x=S,this.y=O,this.z=P||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function d0(S){var O=typeof S.PROJECTION=="object"?Object.keys(S.PROJECTION)[0]:S.PROJECTION;return"no_uoff"in S||"no_off"in S||["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(O)!==-1}function Ge(){var S=Math.pi,O=0,P=0,Q=0,J=0,ie=0,he=0,ce=0,Me,Le,He,Fe,Ze,ct,vt,lt,Dt,or,yr;this.no_off=d0(this),this.no_rot="no_rot"in this;var Kt=!1;"alpha"in this&&(Kt=!0);var Zr=!1;if("rectified_grid_angle"in this&&(Zr=!0),Kt&&(ce=this.alpha),Zr&&(O=this.rectified_grid_angle*An),Kt||Zr)P=this.longc;else if(Q=this.long1,ie=this.lat1,J=this.long2,he=this.lat2,i(ie-he)<=g0||(Me=i(ie))<=g0||i(Me-at)<=g0||i(i(this.lat0)-at)<=g0||i(i(he)-at)<=g0)throw new Error;var Gr=1-this.es;Le=M(Gr),i(this.lat0)>_t?(lt=x(this.lat0),He=T(this.lat0),Me=1-this.es*lt*lt,this.B=He*He,this.B=M(1+this.es*this.B*this.B/Gr),this.A=this.B*this.k0*Le/Me,Fe=this.B*Le/(He*M(Me)),Ze=Fe*Fe-1,0>=Ze?Ze=0:(Ze=M(Ze),0>this.lat0&&(Ze=-Ze)),this.E=Ze+=Fe,this.E*=n(Wl(this.e,this.lat0,lt),this.B)):(this.B=1/Le,this.A=this.k0,this.E=Fe=Ze=1),Kt||Zr?(Kt?(yr=p(x(ce)/Fe),!Zr&&(O=ce)):(yr=O,ce=p(Fe*x(yr))),this.lam0=P-p(.5*(Ze-1/Ze)*I(yr))/this.B):(ct=n(Wl(this.e,ie,x(ie)),this.B),vt=n(Wl(this.e,he,x(he)),this.B),Ze=this.E/ct,Dt=(vt-ct)/(vt+ct),or=this.E*this.E,or=(or-vt*ct)/(or+vt*ct),Me=Q-J,Me<-S?J-=gm:Me>S&&(J+=gm),this.lam0=Pt(.5*(Q+J)-_(or*I(.5*this.B*(Q-J))/Dt)/this.B),yr=_(2*x(this.B*Pt(Q-this.lam0))/(Ze-1/Ze)),O=ce=p(Fe*x(yr))),this.singam=x(yr),this.cosgam=T(yr),this.sinrot=x(O),this.cosrot=T(O),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=i(this.ArB*_(M(Fe*Fe-1)/T(ce))),0>this.lat0&&(this.u_0=-this.u_0)),Ze=.5*yr,this.v_pole_n=this.ArB*r(I(Rr-Ze)),this.v_pole_s=this.ArB*r(I(Rr+Ze))}function zr(S){var O=[],P;return O[0]=S*ppe,P=S*S,O[0]+=P*dpe,O[1]=P*mpe,P*=S,O[0]+=P*fpe,O[1]+=P*ype,O[2]=P*gpe,O}function nl(S,O){var P=S+S;return S+O[0]*x(P)+O[1]*x(P+P)+O[2]*x(P+P+P)}function mi(S,O,P,Q){var J;return S<_t?(Q.value=Jr.AREA_0,J=0):(J=g(O,P),i(J)<=Rr?Q.value=Jr.AREA_0:J>Rr&&J<=at+Rr?(Q.value=Jr.AREA_1,J-=at):J>at+Rr||J<=-(at+Rr)?(Q.value=Jr.AREA_2,J=0<=J?J-xi:J+xi):(Q.value=Jr.AREA_3,J+=at)),J}function _s(S,O){var P=S+O;return P<-xi?P+=gm:P>+xi&&(P-=gm),P}function mt(S,O,P,Q){for(var J=O,ie;Q&&(ie=S(J),J-=ie,!(i(ie)<P));--Q);return J}var da=3,_i=5,Zp=6378137,e3=.0066943799901413165,Js=484813681109536e-20,at=v/2,t3=.16666666666666666,tr=.04722222222222222,l$=.022156084656084655,_t=1e-10,An=.017453292519943295,sl=57.29577951308232,Rr=v/4,gm=2*v,xi=3.14159265359,Dr={};Dr.greenwich=0,Dr.lisbon=-9.131906111111,Dr.paris=2.337229166667,Dr.bogota=-74.080916666667,Dr.madrid=-3.687938888889,Dr.rome=12.452333333333,Dr.bern=7.439583333333,Dr.jakarta=106.807719444444,Dr.ferro=-17.666666666667,Dr.brussels=4.367975,Dr.stockholm=18.058277777778,Dr.athens=23.7163375,Dr.oslo=10.722916666667;var u$={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Bb=/[\s_\-\/\(\)]/g,zb=function(S){var O={},P=S.split("+").map(function(ce){return ce.trim()}).filter(function(ce){return ce}).reduce(function(ce,Me){var Le=Me.split("=");return Le.push(!0),ce[Le[0].toLowerCase()]=Le[1],ce},{}),Q={proj:"projName",datum:"datumCode",rf:function(ce){O.rf=parseFloat(ce)},lat_0:function(ce){O.lat0=ce*An},lat_1:function(ce){O.lat1=ce*An},lat_2:function(ce){O.lat2=ce*An},lat_ts:function(ce){O.lat_ts=ce*An},lon_0:function(ce){O.long0=ce*An},lon_1:function(ce){O.long1=ce*An},lon_2:function(ce){O.long2=ce*An},alpha:function(ce){O.alpha=parseFloat(ce)*An},gamma:function(ce){O.rectified_grid_angle=parseFloat(ce)},lonc:function(ce){O.longc=ce*An},x_0:function(ce){O.x0=parseFloat(ce)},y_0:function(ce){O.y0=parseFloat(ce)},k_0:function(ce){O.k0=parseFloat(ce)},k:function(ce){O.k0=parseFloat(ce)},a:function(ce){O.a=parseFloat(ce)},b:function(ce){O.b=parseFloat(ce)},r_a:function(){O.R_A=!0},zone:function(ce){O.zone=parseInt(ce,10)},south:function(){O.utmSouth=!0},towgs84:function(ce){O.datum_params=ce.split(",").map(function(Me){return parseFloat(Me)})},to_meter:function(ce){O.to_meter=parseFloat(ce)},units:function(ce){O.units=ce;var Me=k(u$,ce);Me&&(O.to_meter=Me.to_meter)},from_greenwich:function(ce){O.from_greenwich=ce*An},pm:function(ce){var Me=k(Dr,ce);O.from_greenwich=(Me||parseFloat(ce))*An},nadgrids:function(ce){ce==="@null"?O.datumCode="none":O.nadgrids=ce},axis:function(ce){ce.length===3&&"ewnsud".indexOf(ce.substr(0,1))!==-1&&"ewnsud".indexOf(ce.substr(1,1))!==-1&&"ewnsud".indexOf(ce.substr(2,1))!==-1&&(O.axis=ce)},approx:function(){O.approx=!0}},J,ie,he;for(J in P)ie=P[J],J in Q?(he=Q[J],typeof he=="function"?he(ie):O[he]=ie):O[J]=ie;return typeof O.datumCode=="string"&&O.datumCode!=="WGS84"&&(O.datumCode=O.datumCode.toLowerCase()),O},f0=1,r3=2,i3=3,m0=4,Zs=5,n3=-1,y0=/[,\]]/,Ce=/[\d\.E\-\+]/;D.prototype.readCharicter=function(){var S=this.text[this.place++];if(this.state!==m0)for(;/\s/.test(S);){if(this.place>=this.text.length)return;S=this.text[this.place++]}switch(this.state){case f0:return this.neutral(S);case r3:return this.keyword(S);case m0:return this.quoted(S);case Zs:return this.afterquote(S);case i3:return this.number(S)}},D.prototype.afterquote=function(S){if(S==='"')return this.word+='"',void(this.state=m0);if(y0.test(S))return this.word=this.word.trim(),void this.afterItem(S);throw new Error(`havn't handled "`+S+'" in afterquote yet, index '+this.place)},D.prototype.afterItem=function(S){return S===","?(this.word!==null&&this.currentObject.push(this.word),this.word=null,void(this.state=f0)):S==="]"?(this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=f0,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=n3))):void 0},D.prototype.number=function(S){if(Ce.test(S))return void(this.word+=S);if(y0.test(S))return this.word=parseFloat(this.word),void this.afterItem(S);throw new Error(`havn't handled "`+S+'" in number yet, index '+this.place)},D.prototype.quoted=function(S){return S==='"'?void(this.state=Zs):void(this.word+=S)},D.prototype.keyword=function(S){if(/[A-Za-z84]/.test(S))return void(this.word+=S);if(S==="["){var O=[];return O.push(this.word),this.level++,this.root===null?this.root=O:this.currentObject.push(O),this.stack.push(this.currentObject),this.currentObject=O,void(this.state=f0)}if(y0.test(S))return void this.afterItem(S);throw new Error(`havn't handled "`+S+'" in keyword yet, index '+this.place)},D.prototype.neutral=function(S){if(/[A-Za-z]/.test(S))return this.word=S,void(this.state=r3);if(S==='"')return this.word="",void(this.state=m0);if(Ce.test(S))return this.word=S,void(this.state=i3);if(y0.test(S))return void this.afterItem(S);throw new Error(`havn't handled "`+S+'" in neutral yet, index '+this.place)},D.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===n3)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ye=.017453292519943295,tt=function(S){var O=B(S),P=O.shift(),Q=O.shift();O.unshift(["name",Q]),O.unshift(["type",P]);var J={};return W(O,J),ye(J),J};(function(S){S("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),S("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),S("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),S.WGS84=S["EPSG:4326"],S["EPSG:3785"]=S["EPSG:3857"],S.GOOGLE=S["EPSG:3857"],S["EPSG:900913"]=S["EPSG:3857"],S["EPSG:102113"]=S["EPSG:3857"]})(y);var hr=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],$n=["3857","900913","3785","102113"],yi=function(S,O){S=S||{};var P,Q;if(!O)return S;for(Q in O)P=O[Q],P!==void 0&&(S[Q]=P);return S},Oi=function(S,O,P){var Q=S*O;return P/M(1-Q*Q)},cc=function(S){return 0>S?-1:1},Pt=function(S){return i(S)<=xi?S:S-cc(S)*gm},Wl=function(S,O,P){var Q=S*P;return Q=n((1-Q)/(1+Q),.5*S),I(.5*(at-O))/Q},Gb=function(S,O){for(var P=at-2*_(O),Q=0,J,ie;15>=Q;Q++)if(J=S*x(P),ie=at-2*_(O*n((1-J)/(1+J),.5*S))-P,P+=ie,1e-10>=i(ie))return P;return-9999},Jhe=[{init:ge,forward:function(S){var O=S.x,P=S.y;if(90<P*sl&&-90>P*sl&&180<O*sl&&-180>O*sl)return null;var Q,J;if(i(i(P)-at)<=_t)return null;if(this.sphere)Q=this.x0+this.a*this.k0*Pt(O-this.long0),J=this.y0+this.a*this.k0*r(I(Rr+.5*P));else{var ie=x(P),he=Wl(this.e,P,ie);Q=this.x0+this.a*this.k0*Pt(O-this.long0),J=this.y0-this.a*this.k0*r(he)}return S.x=Q,S.y=J,S},inverse:function(S){var O=S.x-this.x0,P=S.y-this.y0,Q,J;if(this.sphere)J=at-2*_(E(-P/(this.a*this.k0)));else{var ie=E(-P/(this.a*this.k0));if(J=Gb(this.e,ie),J===-9999)return null}return Q=Pt(this.long0+O/(this.a*this.k0)),S.x=Q,S.y=J,S},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:ve,inverse:ve,names:["longlat","identity"]}],s3={},o3=[],sr={};sr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},sr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},sr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},sr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},sr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},sr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},sr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},sr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},sr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},sr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},sr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},sr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},sr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},sr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},sr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},sr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},sr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},sr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},sr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},sr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},sr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},sr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},sr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},sr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},sr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},sr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},sr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},sr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},sr.hough={a:6378270,rf:297,ellipseName:"Hough"},sr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},sr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},sr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},sr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},sr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},sr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},sr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},sr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},sr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},sr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},sr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},sr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Zhe=sr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};sr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Khe={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},hj={};re.projections={start:function(){Jhe.forEach(Ee)},add:Ee,get:function(S){if(!S)return!1;var O=S.toLowerCase();if(typeof s3[O]<"u"&&o3[s3[O]])return o3[s3[O]]}},re.projections.start();var Yhe=function(S,O,P){if(R(S,O)||S.datum_type===_i||O.datum_type===_i)return P;var Q=S.a,J=S.es;if(S.datum_type===da){var ie=Y(S,!1,P);if(ie!==0)return;Q=Zp,J=e3}var he=O.a,ce=O.b,Me=O.es;if(O.datum_type===da&&(he=Zp,ce=6356752314e-3,Me=e3),J===Me&&Q===he&&!N(S.datum_type)&&!N(O.datum_type))return P;if(P=$(P,J,Q),N(S.datum_type)&&(P=V(P,S.datum_type,S.datum_params)),N(O.datum_type)&&(P=H(P,O.datum_type,O.datum_params)),P=A(P,Me,he,ce),O.datum_type===da){var Le=Y(O,!0,P);if(Le!==0)return}return P},pj=function(S,O,P){var Q=P.x,J=P.y,ie=P.z||0,he={},ce,Me,Le;for(Le=0;3>Le;Le++)if(!(O&&Le===2&&P.z===void 0))switch(Le===0?(ce=Q,Me="ew".indexOf(S.axis[Le])===-1?"y":"x"):Le===1?(ce=J,Me="ns".indexOf(S.axis[Le])===-1?"x":"y"):(ce=ie,Me="z"),S.axis[Le]){case"e":he[Me]=ce;break;case"w":he[Me]=-ce;break;case"n":he[Me]=ce;break;case"s":he[Me]=-ce;break;case"u":P[Me]!==void 0&&(he.z=ce);break;case"d":P[Me]!==void 0&&(he.z=-ce);break;default:return null}return he},dj=function(S){var O={x:S[0],y:S[1]};return 2<S.length&&(O.z=S[2]),3<S.length&&(O.m=S[3]),O},Qhe=function(S){ue(S.x),ue(S.y)},fj=re("WGS84");uc.fromMGRS=function(S){return new uc(ze(S))},uc.prototype.toMGRS=function(S){return Oe([this.x,this.y],S)};var mj=.046875,yj=.01953125,gj=.01068115234375,vj=function(S){var O=[];O[0]=1-S*(.25+S*(mj+S*(yj+S*gj))),O[1]=S*(.75-S*(mj+S*(yj+S*gj)));var P=S*S;return O[2]=P*(.46875-S*(.013020833333333334+S*.007120768229166667)),P*=S,O[3]=P*(.3645833333333333-S*.005696614583333333),O[4]=P*S*.3076171875,O},a3=function(S,O,P,Q){return P*=O,O*=O,Q[0]*S-P*(Q[1]+O*(Q[2]+O*(Q[3]+O*Q[4])))},bj=function(S,O,P){for(var Q=S,J=20;J;--J){var ie=x(Q),he=1-O*ie*ie;if(he=(a3(Q,ie,T(Q),P)-S)*(he*M(he))*(1/(1-O)),Q-=he,i(he)<_t)return Q}return Q},l3={init:function(){this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.es&&(this.en=vj(this.es),this.ml0=a3(this.lat0,x(this.lat0),T(this.lat0),this.en))},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J=x(P),ie=T(P),he,ce,Me;if(this.es){var He=ie*Q,Fe=n(He,2),Ze=this.ep2*n(ie,2),ct=n(Ze,2),vt=i(ie)>_t?I(P):0,lt=n(vt,2),Dt=n(lt,2);he=1-this.es*n(J,2),He/=M(he);var or=a3(P,J,ie,this.en);ce=this.a*(this.k0*He*(1+Fe/6*(1-lt+Ze+Fe/20*(5-18*lt+Dt+14*Ze-58*lt*Ze+Fe/42*(61+179*Dt-Dt*lt-479*lt)))))+this.x0,Me=this.a*(this.k0*(or-this.ml0+J*Q*He/2*(1+Fe/12*(5-lt+9*Ze+4*ct+Fe/30*(61+Dt-58*lt+270*Ze-330*lt*Ze+Fe/56*(1385+543*Dt-Dt*lt-3111*lt))))))+this.y0}else{var Le=ie*x(Q);if(i(i(Le)-1)<_t)return 93;if(ce=.5*this.a*this.k0*r((1+Le)/(1-Le))+this.x0,Me=ie*T(Q)/M(1-n(Le,2)),Le=i(Me),1<=Le){if(Le-1>_t)return 93;Me=0}else Me=d(Me);0>P&&(Me=-Me),Me=this.a*this.k0*(Me-this.lat0)+this.y0}return S.x=ce,S.y=Me,S},inverse:function(S){var O=(S.x-this.x0)*(1/this.a),P=(S.y-this.y0)*(1/this.a),Q,J,ie,he;if(this.es)if(Q=this.ml0+P/this.k0,J=bj(Q,this.es,this.en),i(J)<at){var Fe=x(J),Ze=T(J),ct=i(Ze)>_t?I(J):0,vt=this.ep2*n(Ze,2),lt=n(vt,2),Dt=n(ct,2),or=n(Dt,2);Q=1-this.es*n(Fe,2);var yr=O*M(Q)/this.k0,Kt=n(yr,2);Q*=ct,ie=J-.5*(Q*Kt/(1-this.es))*(1-Kt/12*(5+3*Dt-9*vt*Dt+vt-4*lt-Kt/30*(61+90*Dt-252*vt*Dt+45*or+46*vt-Kt/56*(1385+3633*Dt+4095*or+1574*or*Dt)))),he=Pt(this.long0+yr*(1-Kt/6*(1+2*Dt+vt-Kt/20*(5+28*Dt+24*or+8*vt*Dt+6*vt-Kt/42*(61+662*Dt+1320*or+720*or*Dt))))/Ze)}else ie=at*cc(P),he=0;else{var ce=E(O/this.k0),Me=.5*(ce-1/ce),Le=this.lat0+P/this.k0,He=T(Le);Q=M((1-n(He,2))/(1+n(Me,2))),ie=p(Q),0>P&&(ie=-ie),he=Me===0&&He===0?0:Pt(g(Me,He)+this.long0)}return S.x=he,S.y=ie,S},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},wj=function(S){var O=E(S);return O=(O-1/O)/2,O},u3=function(S,O){var P=Math.max;S=i(S),O=i(O);var Q=P(S,O),J=s(S,O)/(Q||1);return Q*M(1+n(J,2))},Xhe=function(S){var O=1+S,P=O-1;return P===0?S:S*r(O)/P},epe=function(S){var O=i(S);return O=Xhe(O*(1+O/(u3(1,O)+1))),0>S?-O:O},c$=function(S,O){for(var P=2*T(2*O),Q=S.length-1,J=S[Q],ie=0,he;0<=--Q;)he=-ie+P*J+S[Q],ie=J,J=he;return O+he*x(2*O)},tpe=function(S,O){for(var P=2*T(O),Q=S.length-1,J=S[Q],ie=0,he;0<=--Q;)he=-ie+P*J+S[Q],ie=J,J=he;return x(O)*he},rpe=function(S){var O=E(S);return O=(O+1/O)/2,O},_j=function(S,O,P){for(var Q=x(O),J=T(O),ie=wj(P),he=rpe(P),ce=2*J*he,Me=-2*Q*ie,Le=S.length-1,He=S[Le],Fe=0,Ze=0,ct=0,vt,lt;0<=--Le;)vt=Ze,lt=Fe,Ze=He,Fe=ct,He=-vt+ce*Ze-Me*Fe+S[Le],ct=-lt+Me*Ze+ce*Fe;return ce=Q*he,Me=J*ie,[ce*He-Me*ct,ce*ct+Me*He]},c3={init:function(){if(!this.approx&&(isNaN(this.es)||0>=this.es))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(l3.init.apply(this),this.forward=l3.forward,this.inverse=l3.inverse),this.x0=this.x0===void 0?0:this.x0,this.y0=this.y0===void 0?0:this.y0,this.long0=this.long0===void 0?0:this.long0,this.lat0=this.lat0===void 0?0:this.lat0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var S=this.es/(1+M(1-this.es)),O=S/(2-S),P=O;this.cgb[0]=O*(2+O*(-2/3+O*(-2+O*(116/45+O*(26/45+O*(-2854/675)))))),this.cbg[0]=O*(-2+O*(2/3+O*(4/3+O*(-82/45+O*(32/45+O*(4642/4725)))))),P*=O,this.cgb[1]=P*(7/3+O*(-8/5+O*(-227/45+O*(2704/315+O*(2323/945))))),this.cbg[1]=P*(5/3+O*(-16/15+O*(-13/9+O*(904/315+O*(-1522/945))))),P*=O,this.cgb[2]=P*(56/15+O*(-136/35+O*(-1262/105+O*(73814/2835)))),this.cbg[2]=P*(-26/15+O*(34/21+O*(8/5+O*(-12686/2835)))),P*=O,this.cgb[3]=P*(4279/630+O*(-332/35+O*(-399572/14175))),this.cbg[3]=P*(1237/630+O*(-12/5+O*(-24832/14175))),P*=O,this.cgb[4]=P*(4174/315+O*(-144838/6237)),this.cbg[4]=P*(-734/315+O*(109598/31185)),P*=O,this.cgb[5]=P*(601676/22275),this.cbg[5]=P*(444337/155925),P=n(O,2),this.Qn=this.k0/(1+O)*(1+P*(1/4+P*(1/64+P/256))),this.utg[0]=O*(-.5+O*(2/3+O*(-37/96+O*(1/360+O*(81/512+O*(-96199/604800)))))),this.gtu[0]=O*(.5+O*(-2/3+O*(5/16+O*(41/180+O*(-127/288+O*(7891/37800)))))),this.utg[1]=P*(-1/48+O*(-1/15+O*(437/1440+O*(-46/105+O*(1118711/3870720))))),this.gtu[1]=P*(13/48+O*(-3/5+O*(557/1440+O*(281/630+O*(-1983433/1935360))))),P*=O,this.utg[2]=P*(-17/480+O*(37/840+O*(209/4480+O*(-5569/90720)))),this.gtu[2]=P*(61/240+O*(-103/140+O*(15061/26880+O*(167603/181440)))),P*=O,this.utg[3]=P*(-4397/161280+O*(11/504+O*(830251/7257600))),this.gtu[3]=P*(49561/161280+O*(-179/168+O*(6601661/7257600))),P*=O,this.utg[4]=P*(-4583/161280+O*(108847/3991680)),this.gtu[4]=P*(34729/80640+O*(-3418889/1995840)),P*=O,this.utg[5]=P*(-20648693/638668800),this.gtu[5]=P*(212378941/319334400);var Q=c$(this.cbg,this.lat0);this.Zb=-this.Qn*(Q+tpe(this.gtu,2*Q))},forward:function(S){var O=Pt(S.x-this.long0),P=S.y;P=c$(this.cbg,P);var Q=x(P),J=T(P),ie=x(O),he=T(O);P=g(Q,he*J),O=g(ie*J,u3(Q,J*he)),O=epe(I(O));var ce=_j(this.gtu,2*P,2*O);P+=ce[0],O+=ce[1];var Me,Le;return 2.623395162778>=i(O)?(Me=this.a*(this.Qn*O)+this.x0,Le=this.a*(this.Qn*P+this.Zb)+this.y0):(Me=1/0,Le=1/0),S.x=Me,S.y=Le,S},inverse:function(S){var O=(S.x-this.x0)*(1/this.a),P=(S.y-this.y0)*(1/this.a);P=(P-this.Zb)/this.Qn,O/=this.Qn;var Q,J;if(2.623395162778>=i(O)){var ie=_j(this.utg,2*P,2*O);P+=ie[0],O+=ie[1],O=_(wj(O));var he=x(P),ce=T(P),Me=x(O),Le=T(O);P=g(he*Le,u3(Me,Le*ce)),O=g(Me,Le*ce),Q=Pt(O+this.long0),J=c$(this.cgb,P)}else Q=1/0,J=1/0;return S.x=Q,S.y=J,S},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},ipe=function(S,O){if(S===void 0){if(S=o(30*(Pt(O)+v)/v)+1,0>S)return 0;if(60<S)return 60}return S},npe={init:function(){var S=ipe(this.zone,this.long0);if(S===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*i(S)-183)*An,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,c3.init.apply(this),this.forward=c3.forward,this.inverse=c3.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},h$=function(S,O){return n((1-S)/(1+S),O)},p$={init:function(){var S=x(this.lat0),O=T(this.lat0);O*=O,this.rc=M(1-this.es)/(1-this.es*S*S),this.C=M(1+this.es*O*O/(1-this.es)),this.phic0=p(S/this.C),this.ratexp=.5*this.C*this.e,this.K=I(.5*this.phic0+Rr)/(n(I(.5*this.lat0+Rr),this.C)*h$(this.e*S,this.ratexp))},forward:function(S){var O=S.x,P=S.y;return S.y=2*_(this.K*n(I(.5*P+Rr),this.C)*h$(this.e*x(P),this.ratexp))-at,S.x=this.C*O,S},inverse:function(S){for(var O=S.x/this.C,P=S.y,Q=n(I(.5*P+Rr)/this.K,1/this.C),J=20;0<J&&(P=2*_(Q*h$(this.e*x(S.y),-.5*this.e))-at,!(i(P-S.y)<1e-14));--J)S.y=P;return J?(S.x=O,S.y=P,S):null},names:["gauss"]},spe={init:function(){p$.init.apply(this),this.rc&&(this.sinc0=x(this.phic0),this.cosc0=T(this.phic0),this.R2=2*this.rc,!this.title&&(this.title="Oblique Stereographic Alternative"))},forward:function(S){var O,P,Q,J;return S.x=Pt(S.x-this.long0),p$.forward.apply(this,[S]),O=x(S.y),P=T(S.y),Q=T(S.x),J=this.k0*this.R2/(1+this.sinc0*O+this.cosc0*P*Q),S.x=J*P*x(S.x),S.y=J*(this.cosc0*O-this.sinc0*P*Q),S.x=this.a*S.x+this.x0,S.y=this.a*S.y+this.y0,S},inverse:function(S){var O,P,Q,J,ie;if(S.x=(S.x-this.x0)/this.a,S.y=(S.y-this.y0)/this.a,S.x/=this.k0,S.y/=this.k0,ie=M(S.x*S.x+S.y*S.y)){var he=2*g(ie,this.R2);O=x(he),P=T(he),J=p(P*this.sinc0+S.y*O*this.cosc0/ie),Q=g(S.x*O,ie*this.cosc0*P-S.y*this.sinc0*O)}else J=this.phic0,Q=0;return S.x=Q,S.y=J,p$.inverse.apply(this,[S]),S.x=Pt(S.x+this.long0),S},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},ope={init:function(){this.coslat0=T(this.lat0),this.sinlat0=x(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&i(this.coslat0)<=_t&&(this.k0=.5*(1+cc(this.lat0)*x(this.lat_ts))):(i(this.coslat0)<=_t&&(0<this.lat0?this.con=1:this.con=-1),this.cons=M(n(1+this.e,1+this.e)*n(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&i(this.coslat0)<=_t&&(this.k0=.5*this.cons*Oi(this.e,x(this.lat_ts),T(this.lat_ts))/Wl(this.e,this.con*this.lat_ts,this.con*x(this.lat_ts))),this.ms1=Oi(this.e,this.sinlat0,this.coslat0),this.X0=2*_(this.ssfn_(this.lat0,this.sinlat0,this.e))-at,this.cosX0=T(this.X0),this.sinX0=x(this.X0))},forward:function(S){var O=S.x,P=S.y,Q=x(P),J=T(P),ie=Pt(O-this.long0),he,ce,Me,Le,He;return i(i(O-this.long0)-v)<=_t&&i(P+this.lat0)<=_t?(S.x=NaN,S.y=NaN,S):this.sphere?(2*this.k0/(1+this.sinlat0*Q+this.coslat0*J*T(ie)),S.x=65*this.a*J*x(ie)+this.x0,S.y=65*this.a*(this.coslat0*Q-this.sinlat0*J*T(ie))+this.y0,S):(he=2*_(this.ssfn_(P,Q,this.e))-at,Me=T(he),ce=x(he),i(this.coslat0)<=_t?(Le=Wl(this.e,P*this.con,this.con*Q),He=2*this.a*this.k0*Le/this.cons,S.x=this.x0+He*x(O-this.long0),S.y=this.y0-this.con*He*T(O-this.long0),S):(i(this.sinlat0)<_t?(2*this.a*this.k0/(1+Me*T(ie)),S.y=65*ce):(2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*ce+this.cosX0*Me*T(ie))),S.y=65*(this.cosX0*ce-this.sinX0*Me*T(ie))+this.y0),S.x=65*Me*x(ie)+this.x0,S))},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O=M(S.x*S.x+S.y*S.y),P,Q,J,ie,he;if(this.sphere){var ce=2*_(O/(2*this.a*this.k0));return P=this.long0,Q=this.lat0,O<=_t?(S.x=P,S.y=Q,S):(Q=p(T(ce)*this.sinlat0+S.y*x(ce)*this.coslat0/O),P=i(this.coslat0)<_t?0<this.lat0?Pt(this.long0+g(S.x,-1*S.y)):Pt(this.long0+g(S.x,S.y)):Pt(this.long0+g(S.x*x(ce),O*this.coslat0*T(ce)-S.y*this.sinlat0*x(ce))),S.x=P,S.y=Q,S)}if(i(this.coslat0)<=_t){if(O<=_t)return Q=this.lat0,P=this.long0,S.x=P,S.y=Q,S;S.x*=this.con,S.y*=this.con,J=O*this.cons/(2*this.a*this.k0),Q=this.con*Gb(this.e,J),P=this.con*Pt(this.con*this.long0+g(S.x,-1*S.y))}else ie=2*_(O*this.cosX0/(2*this.a*this.k0*this.ms1)),P=this.long0,O<=_t?he=this.X0:(he=p(T(ie)*this.sinX0+S.y*x(ie)*this.cosX0/O),P=Pt(this.long0+g(S.x*x(ie),O*this.cosX0*T(ie)-S.y*this.sinX0*x(ie)))),Q=-1*Gb(this.e,I(.5*(at+he)));return S.x=P,S.y=Q,S},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(S,O,P){return O*=P,I(.5*(at+S))*n((1-O)/(1+O),.5*P)}},ape={init:function(){var S=this.lat0;this.lambda0=this.long0;var O=x(S),P=this.a,Q=this.rf,J=1/Q,ie=2*J-n(J,2),he=this.e=M(ie);this.R=this.k0*P*M(1-ie)/(1-ie*n(O,2)),this.alpha=M(1+ie/(1-ie)*n(T(S),4)),this.b0=p(O/this.alpha);var ce=r(I(v/4+this.b0/2)),Me=r(I(v/4+S/2)),Le=r((1+he*O)/(1-he*O));this.K=ce-this.alpha*Me+this.alpha*he/2*Le},forward:function(S){var O=r(I(v/4-S.y/2)),P=this.e/2*r((1+this.e*x(S.y))/(1-this.e*x(S.y))),Q=-this.alpha*(O+P)+this.K,J=2*(_(E(Q))-v/4);this.alpha*(S.x-this.lambda0);var ie=_(x(73)/(x(this.b0)*I(J)+T(this.b0)*T(73))),he=p(T(this.b0)*x(J)-x(this.b0)*T(J)*T(73));return S.y=this.R/2*r((1+x(he))/(1-x(he)))+this.y0,S.x=this.R*ie+this.x0,S},inverse:function(S){for(var O=S.x-this.x0,P=S.y-this.y0,Q=O/this.R,J=2*(_(E(P/this.R))-v/4),ie=p(T(this.b0)*x(J)+x(this.b0)*T(J)*T(Q)),he=_(x(Q)/(T(this.b0)*T(Q)-x(this.b0)*I(J))),ce=this.lambda0+73/this.alpha,Me=0,Le=ie,He=-1e3,Fe=0;1e-7<i(Le-He);){if(20<++Fe)return;Me=1/this.alpha*(r(I(v/4+ie/2))-this.K)+this.e*r(I(v/4+p(this.e*x(Le))/2)),He=Le,Le=2*_(E(Me))-v/2}return S.x=ce,S.y=Le,S},names:["somerc"]},g0=1e-7,lpe={init:Ge,forward:function(S){var O={},P,Q,J,ie,he,ce,Me;if(S.x-=this.lam0,i(i(S.y)-at)>_t){if(ie=this.E/n(Wl(this.e,S.y,x(S.y)),this.B),he=1/ie,P=.5*(ie-he),Q=.5*(ie+he),x(this.B*S.x),J=(P*this.singam-86*this.cosgam)/Q,i(i(J)-1)<_t)throw new Error;Me=.5*this.ArB*r((1-J)/(1+J)),he=T(this.B*S.x),ce=i(he)<g0?this.A*S.x:this.ArB*g(P*this.cosgam+86*this.singam,he)}else Me=0<S.y?this.v_pole_n:this.v_pole_s,ce=this.ArB*S.y;return this.no_rot?(O.x=ce,O.y=Me):(ce-=this.u_0,O.x=Me*this.cosrot+ce*this.sinrot,O.y=ce*this.cosrot-Me*this.sinrot),O.x=this.a*O.x+this.x0,O.y=this.a*O.y+this.y0,O},inverse:function(S){var O={},P,Q,J,ie,he,ce,Me;if(S.x=(S.x-this.x0)*(1/this.a),S.y=(S.y-this.y0)*(1/this.a),this.no_rot?(Q=S.y,P=S.x):(Q=S.x*this.cosrot-S.y*this.sinrot,P=S.y*this.cosrot+S.x*this.sinrot+this.u_0),J=E(-this.BrA*Q),ie=.5*(J-1/J),he=.5*(J+1/J),ce=x(this.BrA*P),Me=(ce*this.cosgam+ie*this.singam)/he,i(i(Me)-1)<_t)O.x=0,O.y=0>Me?-at:at;else{if(O.y=this.E/M((1+Me)/(1-Me)),O.y=Gb(this.e,n(O.y,1/this.B)),O.y===1/0)throw new Error;O.x=-this.rB*g(ie*this.cosgam-ce*this.singam,T(this.BrA*P))}return O.x+=this.lam0,O},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},upe={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(i(this.lat1+this.lat2)<_t)){var S=this.b/this.a;this.e=M(1-S*S);var O=x(this.lat1),P=T(this.lat1),Q=Oi(this.e,O,P),J=Wl(this.e,this.lat1,O),ie=x(this.lat2),he=T(this.lat2),ce=Oi(this.e,ie,he),Me=Wl(this.e,this.lat2,ie),Le=Wl(this.e,this.lat0,x(this.lat0));this.ns=i(this.lat1-this.lat2)>_t?r(Q/ce)/r(J/Me):O,isNaN(this.ns)&&(this.ns=O),this.f0=Q/(this.ns*n(J,this.ns)),this.rh=this.a*this.f0*n(Le,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(S){var O=S.x,P=S.y;i(2*i(P)-v)<=_t&&(P=cc(P)*(at-2*_t));var Q=i(i(P)-at),J,ie;if(Q>_t)J=Wl(this.e,P,x(P)),ie=this.a*this.f0*n(J,this.ns);else{if(Q=P*this.ns,0>=Q)return null;ie=0}var he=this.ns*Pt(O-this.long0);return S.x=this.k0*(ie*x(he))+this.x0,S.y=this.k0*(this.rh-ie*T(he))+this.y0,S},inverse:function(S){var O=(S.x-this.x0)/this.k0,P=this.rh-(S.y-this.y0)/this.k0,Q,J,ie,he,ce;0<this.ns?(Q=M(O*O+P*P),J=1):(Q=-M(O*O+P*P),J=-1);var Me=0;if(Q!==0&&(Me=g(J*O,J*P)),!(Q!==0||0<this.ns))he=-at;else if(J=1/this.ns,ie=n(Q/(this.a*this.f0),J),he=Gb(this.e,ie),he===-9999)return null;return ce=Pt(Me/this.ns+this.long0),S.x=ce,S.y=he,S},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},cpe={init:function(){this.a=6377397155e-3,this.es=.006674372230614,this.e=M(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=M(this.e2),this.alfa=M(1+this.e2*n(T(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=p(x(this.fi0)/this.alfa),this.g=n((1+this.e*x(this.fi0))/(1-this.e*x(this.fi0)),this.alfa*this.e/2),this.k=I(this.u0/2+this.s45)/n(I(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*M(1-this.e2)/(1-this.e2*n(x(this.fi0),2)),this.s0=1.37008346281555,this.n=x(this.s0),this.ro0=this.k1*this.n0/I(this.s0),this.ad=this.s90-this.uq},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J,ie,he,ce,Me,Le,He;return J=n((1+this.e*x(P))/(1-this.e*x(P)),this.alfa*this.e/2),ie=2*(_(this.k*n(I(P/2+this.s45),this.alfa)/J)-this.s45),he=-Q*this.alfa,ce=p(T(this.ad)*x(ie)+x(this.ad)*T(ie)*T(he)),Me=p(T(ie)*x(he)/T(ce)),Le=this.n*Me,He=this.ro0*n(I(this.s0/2+this.s45),this.n)/n(I(ce/2+this.s45),this.n),S.y=He*T(Le)/1,S.x=He*x(Le)/1,this.czech||(S.y*=-1,S.x*=-1),S},inverse:function(S){var O=S.x,P,Q,J,ie,he,ce,Me,Le;S.x=S.y,S.y=O,this.czech||(S.y*=-1,S.x*=-1),ce=M(S.x*S.x+S.y*S.y),he=g(S.y,S.x),ie=he/x(this.s0),J=2*(_(n(this.ro0/ce,1/this.n)*I(this.s0/2+this.s45))-this.s45),P=p(T(this.ad)*x(J)-x(this.ad)*T(J)*T(ie)),Q=p(T(J)*x(ie)/T(P)),S.x=this.long0-Q/this.alfa,Me=P,Le=0;var He=0;do S.y=2*(_(n(this.k,-1/this.alfa)*n(I(P/2+this.s45),1/this.alfa)*n((1+this.e*x(Me))/(1-this.e*x(Me)),this.e/2))-this.s45),1e-10>i(Me-S.y)&&(Le=1),Me=S.y,He+=1;while(Le===0&&15>He);return 15<=He?null:S},names:["Krovak","krovak"]},Ks=function(S,O,P,Q,J){return S*J-O*x(2*J)+P*x(4*J)-Q*x(6*J)},qb=function(S){return 1-.25*S*(1+S/16*(3+1.25*S))},Hb=function(S){return .375*S*(1+.25*S*(1+.46875*S))},Wb=function(S){return .05859375*S*S*(1+.75*S)},Jb=function(S){return S*S*S*(35/3072)},v0=function(S,O,P){var Q=O*P;return S/M(1-Q*Q)},b0=function(S){return i(S)<at?S:S-cc(S)*v},h3=function(S,O,P,Q,J){var ie,he;ie=S/O;for(var ce=0;15>ce;ce++)if(he=(S-(O*ie-P*x(2*ie)+Q*x(4*ie)-J*x(6*ie)))/(O-2*P*T(2*ie)+4*Q*T(4*ie)-6*J*T(6*ie)),ie+=he,1e-10>=i(he))return ie;return NaN},hpe={init:function(){this.sphere||(this.e0=qb(this.es),this.e1=Hb(this.es),this.e2=Wb(this.es),this.e3=Jb(this.es),this.ml0=this.a*Ks(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(S){var O=S.x,P=S.y,Q,J;if(O=Pt(O-this.long0),this.sphere)Q=this.a*p(T(P)*x(O)),J=this.a*(g(I(P),T(O))-this.lat0);else{var ie=x(P),he=T(P),ce=v0(this.a,this.e,ie),Me=I(P)*I(P),Le=O*T(P),He=Le*Le,Fe=this.es*he*he/(1-this.es),Ze=this.a*Ks(this.e0,this.e1,this.e2,this.e3,P);Q=ce*Le*(1-He*Me*(1/6-(8-Me+8*Fe)*He/120)),J=Ze-this.ml0+ce*ie/he*He*(.5+(5-Me+6*Fe)*He/24)}return S.x=Q+this.x0,S.y=J+this.y0,S},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O=S.x/this.a,P=S.y/this.a,Q,J;if(this.sphere){var ie=P+this.lat0;Q=p(x(ie)*T(O)),J=g(I(O),T(ie))}else{var he=this.ml0/this.a+P,ce=h3(he,this.e0,this.e1,this.e2,this.e3);if(i(i(ce)-at)<=_t)return S.x=this.long0,S.y=at,0>P&&(S.y*=-1),S;var Me=v0(this.a,this.e,x(ce)),Le=Me*Me*Me/this.a/this.a*(1-this.es),He=n(I(ce),2),Fe=O*this.a/Me,Ze=Fe*Fe;Q=ce-Me*I(ce)/Le*Fe*Fe*(.5-(1+3*He)*Fe*Fe/24),J=Fe*(1-Ze*(He/3+(1+3*He)*He*Ze/15))/T(ce)}return S.x=Pt(J+this.long0),S.y=b0(Q),S},names:["Cassini","Cassini_Soldner","cass"]},Kp=function(S,O){var P;return 1e-7<S?(P=S*O,(1-S*S)*(O/(1-P*P)-.5/S*r((1-P)/(1+P)))):2*O},ppe=.3333333333333333,dpe=.17222222222222222,fpe=.10257936507936508,mpe=.06388888888888888,ype=.0664021164021164,gpe=.016415012942191543,vpe={init:function(){var S=i(this.lat0);if(this.mode=i(S-at)<_t?0>this.lat0?this.S_POLE:this.N_POLE:i(S)<_t?this.EQUIT:this.OBLIQ,0<this.es){var O;switch(this.qp=Kp(this.e,1),this.mmf=.5/(1-this.es),this.apa=zr(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=M(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=M(.5*this.qp),O=x(this.lat0),this.sinb1=Kp(this.e,O)/this.qp,this.cosb1=M(1-this.sinb1*this.sinb1),this.dd=T(this.lat0)/(M(1-this.es*O*O)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=x(this.lat0),this.cosph0=T(this.lat0))},forward:function(S){var O=S.x,P=S.y,Q,J,ie,he,ce,Me,Le,He,Fe,Ze;if(O=Pt(O-this.long0),!this.sphere){switch(Le=0,He=0,Fe=0,ie=T(O),he=x(O),ce=x(P),Me=Kp(this.e,ce),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Le=Me/this.qp,He=M(1-Le*Le)),this.mode){case this.OBLIQ:Fe=1+this.sinb1*Le+this.cosb1*He*ie;break;case this.EQUIT:Fe=1+He*ie;break;case this.N_POLE:Fe=at+P,Me=this.qp-Me;break;case this.S_POLE:Fe=P-at,Me=this.qp+Me}if(i(Fe)<_t)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Fe=M(2/Fe),J=this.mode===this.OBLIQ?this.ymf*Fe*(this.cosb1*Le-this.sinb1*He*ie):(Fe=M(2/(1+He*ie)))*Le*this.ymf,Q=this.xmf*Fe*He*he;break;case this.N_POLE:case this.S_POLE:0<=Me?(Q=(Fe=M(Me))*he,J=ie*(this.mode===this.S_POLE?Fe:-Fe)):Q=J=0}}else if(ce=x(P),Ze=T(P),ie=T(O),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(J=this.mode===this.EQUIT?1+Ze*ie:1+this.sinph0*ce+this.cosph0*Ze*ie,J<=_t)return null;J=M(2/J),Q=J*Ze*x(O),J*=this.mode===this.EQUIT?ce:this.cosph0*ce-this.sinph0*Ze*ie}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(ie=-ie),i(P+this.lat0)<_t)return null;J=Rr-.5*P,J=2*(this.mode===this.S_POLE?T(J):x(J)),Q=J*x(O),J*=ie}return S.x=this.a*Q+this.x0,S.y=this.a*J+this.y0,S},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O=S.x/this.a,P=S.y/this.a,Q,J,ie,he,ce,Me,Le;if(this.sphere){var He=0,Fe=0,Ze;if(Ze=M(O*O+P*P),J=.5*Ze,1<J)return null;switch(J=2*p(J),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Fe=x(J),He=T(J)),this.mode){case this.EQUIT:J=i(Ze)<=_t?0:p(P*Fe/Ze),O*=Fe,P=He*Ze;break;case this.OBLIQ:J=i(Ze)<=_t?this.lat0:p(He*this.sinph0+P*Fe*this.cosph0/Ze),O*=Fe*this.cosph0,P=(He-x(J)*this.sinph0)*Ze;break;case this.N_POLE:P=-P,J=at-J;break;case this.S_POLE:J-=at}Q=P===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:g(O,P)}else{if(Le=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(O/=this.dd,P*=this.dd,Me=M(O*O+P*P),Me<_t)return S.x=this.long0,S.y=this.lat0,S;he=2*p(.5*Me/this.rq),ie=T(he),O*=he=x(he),this.mode===this.OBLIQ?(Le=ie*this.sinb1+P*he*this.cosb1/Me,ce=this.qp*Le,P=Me*this.cosb1*ie-P*this.sinb1*he):(Le=P*he/Me,ce=this.qp*Le,P=Me*ie)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(P=-P),ce=O*O+P*P,!ce)return S.x=this.long0,S.y=this.lat0,S;Le=1-ce/this.qp,this.mode===this.S_POLE&&(Le=-Le)}Q=g(O,P),J=nl(p(Le),this.apa)}return S.x=Pt(this.long0+Q),S.y=J,S},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Yp=function(S){return 1<i(S)&&(S=1<S?1:-1),p(S)},bpe={init:function(){i(this.lat1+this.lat2)<_t||(this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e3=M(this.es),this.sin_po=x(this.lat1),this.cos_po=T(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Oi(this.e3,this.sin_po,this.cos_po),this.qs1=Kp(this.e3,this.sin_po,this.cos_po),this.sin_po=x(this.lat2),this.cos_po=T(this.lat2),this.t2=this.sin_po,this.ms2=Oi(this.e3,this.sin_po,this.cos_po),this.qs2=Kp(this.e3,this.sin_po,this.cos_po),this.sin_po=x(this.lat0),this.cos_po=T(this.lat0),this.t3=this.sin_po,this.qs0=Kp(this.e3,this.sin_po,this.cos_po),this.ns0=i(this.lat1-this.lat2)>_t?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*M(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(S){var O=S.x,P=S.y;this.sin_phi=x(P),this.cos_phi=T(P);var Q=Kp(this.e3,this.sin_phi,this.cos_phi),J=this.a*M(this.c-this.ns0*Q)/this.ns0,ie=this.ns0*Pt(O-this.long0),he=J*x(ie)+this.x0,ce=this.rh-J*T(ie)+this.y0;return S.x=he,S.y=ce,S},inverse:function(S){var O,P,Q,J,ie,he;return S.x-=this.x0,S.y=this.rh-S.y+this.y0,0<=this.ns0?(O=M(S.x*S.x+S.y*S.y),Q=1):(O=-M(S.x*S.x+S.y*S.y),Q=-1),J=0,O!==0&&(J=g(Q*S.x,Q*S.y)),Q=O*this.ns0/this.a,this.sphere?he=p((this.c-Q*Q)/(2*this.ns0)):(P=(this.c-Q*Q)/this.ns0,he=this.phi1z(this.e3,P)),ie=Pt(J/this.ns0+this.long0),S.x=ie,S.y=he,S},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(S,O){var P=Yp(.5*O),Q,J,ie,he,ce;if(S<_t)return P;for(var Me=1;25>=Me;Me++)if(Q=x(P),J=T(P),ie=S*Q,he=1-ie*ie,ce=.5*he*he/J*(O/(1-S*S)-Q/he+.5/S*r((1-ie)/(1+ie))),P+=ce,1e-7>=i(ce))return P;return null}},wpe={init:function(){this.sin_p14=x(this.lat0),this.cos_p14=T(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(S){var O=S.x,P=S.y,Q,J,ie,he,ce,Me,Le,He;return ie=Pt(O-this.long0),Q=x(P),J=T(P),he=T(ie),Me=this.sin_p14*Q+this.cos_p14*J*he,ce=1,0<Me||i(Me)<=_t?(Le=this.x0+this.a*ce*J*x(ie)/Me,He=this.y0+this.a*ce*(this.cos_p14*Q-this.sin_p14*J*he)/Me):(Le=this.x0+this.infinity_dist*J*x(ie),He=this.y0+this.infinity_dist*(this.cos_p14*Q-this.sin_p14*J*he)),S.x=Le,S.y=He,S},inverse:function(S){var O,P,Q,J,ie,he;return S.x=(S.x-this.x0)/this.a,S.y=(S.y-this.y0)/this.a,S.x/=this.k0,S.y/=this.k0,(O=M(S.x*S.x+S.y*S.y))?(J=g(O,this.rc),P=x(J),Q=T(J),he=Yp(Q*this.sin_p14+S.y*P*this.cos_p14/O),ie=g(S.x*P,O*this.cos_p14*Q-S.y*this.sin_p14*P),ie=Pt(this.long0+ie)):(he=this.phic0,ie=0),S.x=ie,S.y=he,S},names:["gnom"]},_pe=function(S,O){var P=1-(1-S*S)/(2*S)*r((1-S)/(1+S));if(1e-6>i(i(O)-P))return 0>O?-1*at:at;for(var Q=p(.5*O),J=0,ie,he,ce,Me;30>J;J++)if(he=x(Q),ce=T(Q),Me=S*he,ie=n(1-Me*Me,2)/(2*ce)*(O/(1-S*S)-he/(1-Me*Me)+.5/S*r((1-Me)/(1+Me))),Q+=ie,1e-10>=i(ie))return Q;return NaN},xpe={init:function(){this.sphere||(this.k0=Oi(this.e,x(this.lat_ts),T(this.lat_ts)))},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J,ie;if(this.sphere)J=this.x0+this.a*Q*T(this.lat_ts),ie=this.y0+this.a*x(P)/T(this.lat_ts);else{var he=Kp(this.e,x(P));J=this.x0+this.a*this.k0*Q,ie=this.y0+.5*(this.a*he)/this.k0}return S.x=J,S.y=ie,S},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O,P;return this.sphere?(O=Pt(this.long0+S.x/this.a/T(this.lat_ts)),P=p(S.y/this.a*T(this.lat_ts))):(P=_pe(this.e,2*S.y*this.k0/this.a),O=Pt(this.long0+S.x/(this.a*this.k0))),S.x=O,S.y=P,S},names:["cea"]},Spe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=T(this.lat_ts)},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J=b0(P-this.lat0);return S.x=this.x0+this.a*Q*this.rc,S.y=this.y0+this.a*J,S},inverse:function(S){var O=S.x,P=S.y;return S.x=Pt(this.long0+(O-this.x0)/(this.a*this.rc)),S.y=b0(this.lat0+(P-this.y0)/this.a),S},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Epe={init:function(){this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e=M(this.es),this.e0=qb(this.es),this.e1=Hb(this.es),this.e2=Wb(this.es),this.e3=Jb(this.es),this.ml0=this.a*Ks(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J,ie,he;if(he=Q*x(P),this.sphere)i(P)<=_t?(J=this.a*Q,ie=-1*this.a*this.lat0):(J=this.a*x(he)/I(P),ie=this.a*(b0(P-this.lat0)+(1-T(he))/I(P)));else if(i(P)<=_t)J=this.a*Q,ie=-1*this.ml0;else{var ce=v0(this.a,this.e,x(P))/I(P);J=ce*x(he),ie=this.a*Ks(this.e0,this.e1,this.e2,this.e3,P)-this.ml0+ce*(1-T(he))}return S.x=J+this.x0,S.y=ie+this.y0,S},inverse:function(S){var O,P,Q,J,ie,he,ce,Me,Le;if(Q=S.x-this.x0,J=S.y-this.y0,this.sphere)if(i(J+this.a*this.lat0)<=_t)O=Pt(Q/this.a+this.long0),P=0;else{he=this.lat0+J/this.a,ce=Q*Q/this.a/this.a+he*he,Me=he;var He;for(ie=20;ie;--ie)if(He=I(Me),Le=-1*(he*(Me*He+1)-Me-.5*(Me*Me+ce)*He)/((Me-he)/He-1),Me+=Le,i(Le)<=_t){P=Me;break}O=Pt(this.long0+p(Q*I(Me)/this.a)/x(P))}else if(i(J+this.ml0)<=_t)P=0,O=Pt(this.long0+Q/this.a);else{he=(this.ml0+J)/this.a,ce=Q*Q/this.a/this.a+he*he,Me=he;var Fe,Ze,ct,vt,lt;for(ie=20;ie;--ie)if(lt=this.e*x(Me),Fe=M(1-lt*lt)*I(Me),Ze=this.a*Ks(this.e0,this.e1,this.e2,this.e3,Me),ct=this.e0-2*this.e1*T(2*Me)+4*this.e2*T(4*Me)-6*this.e3*T(6*Me),vt=Ze/this.a,Le=(he*(Fe*vt+1)-vt-.5*Fe*(vt*vt+ce))/(this.es*x(2*Me)*(vt*vt+ce-2*he*vt)/(4*Fe)+(he-vt)*(Fe*ct-2/x(2*Me))-ct),Me-=Le,i(Le)<=_t){P=Me;break}Fe=M(1-this.es*n(x(P),2))*I(P),O=Pt(this.long0+p(Q*Fe/this.a)/x(P))}return S.x=O,S.y=P,S},names:["Polyconic","poly"]},Mpe={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(S){var O=S.x,P=S.y,Q=P-this.lat0,J=O-this.long0,ie=1,he=0,ce;for(ce=1;10>=ce;ce++)ie*=1e-5*(Q/Js),he+=this.A[ce]*ie;var Me=he,Le=J,He=1,Fe=0,Ze=0,ct=0,vt,lt;for(ce=1;6>=ce;ce++)vt=He*Me-Fe*Le,lt=Fe*Me+He*Le,He=vt,Fe=lt,Ze=Ze+this.B_re[ce]*He-this.B_im[ce]*Fe,ct=ct+this.B_im[ce]*He+this.B_re[ce]*Fe;return S.x=ct*this.a+this.x0,S.y=Ze*this.a+this.y0,S},inverse:function(S){var O=S.x,P=S.y,Q=O-this.x0,J=P-this.y0,ie=J/this.a,he=Q/this.a,ce=1,Me=0,Le=0,He=0,Fe,Ze,ct;for(Fe=1;6>=Fe;Fe++)Ze=ce*ie-Me*he,ct=Me*ie+ce*he,ce=Ze,Me=ct,Le=Le+this.C_re[Fe]*ce-this.C_im[Fe]*Me,He=He+this.C_im[Fe]*ce+this.C_re[Fe]*Me;for(var vt=0;vt<this.iterations;vt++){var lt=Le,Dt=He,or=ie,yr=he,Kt,Zr;for(Fe=2;6>=Fe;Fe++)Kt=lt*Le-Dt*He,Zr=Dt*Le+lt*He,lt=Kt,Dt=Zr,or+=(Fe-1)*(this.B_re[Fe]*lt-this.B_im[Fe]*Dt),yr+=(Fe-1)*(this.B_im[Fe]*lt+this.B_re[Fe]*Dt);lt=1,Dt=0;var Gr=this.B_re[1],hi=this.B_im[1];for(Fe=2;6>=Fe;Fe++)Kt=lt*Le-Dt*He,Zr=Dt*Le+lt*He,lt=Kt,Dt=Zr,Gr+=Fe*(this.B_re[Fe]*lt-this.B_im[Fe]*Dt),hi+=Fe*(this.B_im[Fe]*lt+this.B_re[Fe]*Dt);var Ss=Gr*Gr+hi*hi;Le=(or*Gr+yr*hi)/Ss,He=(yr*Gr-or*hi)/Ss}var fa=Le,Yb=He,w0=1,_0=0;for(Fe=1;9>=Fe;Fe++)w0*=fa,_0+=this.D[Fe]*w0;var d3=this.lat0+1e5*(_0*Js),Fpe=this.long0+Yb;return S.x=Fpe,S.y=d3,S},names:["New_Zealand_Map_Grid","nzmg"]},Ipe={init:function(){},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J=this.x0+this.a*Q,ie=this.y0+1.25*(this.a*r(I(v/4+P/2.5)));return S.x=J,S.y=ie,S},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O=Pt(this.long0+S.x/this.a),P=2.5*(_(E(.8*S.y/this.a))-v/4);return S.x=O,S.y=P,S},names:["Miller_Cylindrical","mill"]},Tpe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=M((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=vj(this.es)},forward:function(S){var O=S.x,P=S.y,Q,J;if(O=Pt(O-this.long0),this.sphere){if(!this.m)P=this.n===1?P:p(this.n*x(P));else for(var ie=this.n*x(P),he=20,ce;he&&(ce=(this.m*P+x(P)-ie)/(this.m+T(P)),P-=ce,!(i(ce)<_t));--he);Q=this.a*this.C_x*O*(this.m+T(P)),J=this.a*this.C_y*P}else{var Me=x(P),Le=T(P);J=this.a*a3(P,Me,Le,this.en),Q=this.a*O*Le/M(1-this.es*Me*Me)}return S.x=Q,S.y=J,S},inverse:function(S){var O,P,Q,J;return S.x-=this.x0,Q=S.x/this.a,S.y-=this.y0,O=S.y/this.a,this.sphere?(O/=this.C_y,Q/=this.C_x*(this.m+T(O)),this.m?O=Yp((this.m*O+x(O))/this.n):this.n!==1&&(O=Yp(x(O)/this.n)),Q=Pt(Q+this.long0),O=b0(O)):(O=bj(S.y/this.a,this.es,this.en),J=i(O),J<at?(J=x(O),P=this.long0+S.x*M(1-this.es*J*J)/(this.a*T(O)),Q=Pt(P)):J-_t<at&&(Q=this.long0)),S.x=Q,S.y=O,S},names:["Sinusoidal","sinu"]},Ape={init:function(){},forward:function(S){for(var O=S.x,P=S.y,Q=Pt(O-this.long0),J=P,ie=v*x(P),he;he=-(J+x(J)-ie)/(1+T(J)),J+=he,!(i(he)<_t););J/=2,v/2-i(P)<_t&&(Q=0);var ce=.900316316158*this.a*Q*T(J)+this.x0,Me=1.4142135623731*this.a*x(J)+this.y0;return S.x=ce,S.y=Me,S},inverse:function(S){var O,P;S.x-=this.x0,S.y-=this.y0,P=S.y/(1.4142135623731*this.a),.999999999999<i(P)&&(P=.999999999999),O=p(P);var Q=Pt(this.long0+S.x/(.900316316158*this.a*T(O)));Q<-v&&(Q=-v),Q>v&&(Q=v),P=(2*O+x(2*O))/v,1<i(P)&&(P=1);var J=p(P);return S.x=Q,S.y=J,S},names:["Mollweide","moll"]},$pe={init:function(){i(this.lat1+this.lat2)<_t||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-n(this.temp,2),this.e=M(this.es),this.e0=qb(this.es),this.e1=Hb(this.es),this.e2=Wb(this.es),this.e3=Jb(this.es),this.sinphi=x(this.lat1),this.cosphi=T(this.lat1),this.ms1=Oi(this.e,this.sinphi,this.cosphi),this.ml1=Ks(this.e0,this.e1,this.e2,this.e3,this.lat1),i(this.lat1-this.lat2)<_t?this.ns=this.sinphi:(this.sinphi=x(this.lat2),this.cosphi=T(this.lat2),this.ms2=Oi(this.e,this.sinphi,this.cosphi),this.ml2=Ks(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ks(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(S){var O=S.x,P=S.y,Q;if(this.sphere)Q=this.a*(this.g-P);else{var J=Ks(this.e0,this.e1,this.e2,this.e3,P);Q=this.a*(this.g-J)}var ie=this.ns*Pt(O-this.long0),he=this.x0+Q*x(ie),ce=this.y0+this.rh-Q*T(ie);return S.x=he,S.y=ce,S},inverse:function(S){S.x-=this.x0,S.y=this.rh-S.y+this.y0;var O,P,Q,J;0<=this.ns?(P=M(S.x*S.x+S.y*S.y),O=1):(P=-M(S.x*S.x+S.y*S.y),O=-1);var ie=0;if(P!==0&&(ie=g(O*S.x,O*S.y)),this.sphere)return J=Pt(this.long0+ie/this.ns),Q=b0(this.g-P/this.a),S.x=J,S.y=Q,S;var he=this.g-P/this.a;return Q=h3(he,this.e0,this.e1,this.e2,this.e3),J=Pt(this.long0+ie/this.ns),S.x=J,S.y=Q,S},names:["Equidistant_Conic","eqdc"]},Cpe={init:function(){this.R=this.a},forward:function(S){var O=S.x,P=S.y,Q=Pt(O-this.long0),J,ie;i(P)<=_t&&(J=this.x0+this.R*Q,ie=this.y0);var he=Yp(2*i(P/v));(i(Q)<=_t||i(i(P)-at)<=_t)&&(J=this.x0,ie=0<=P?this.y0+v*this.R*I(.5*he):this.y0+v*this.R*-I(.5*he));var ce=.5*i(v/Q-Q/v),Me=ce*ce,Le=x(he),He=T(he),Fe=He/(Le+He-1),Ze=Fe*(2/Le-1),ct=Ze*Ze,vt=v*this.R*(ce*(Fe-ct)+M(Me*(Fe-ct)*(Fe-ct)-(ct+Me)*(Fe*Fe-ct)))/(ct+Me);0>Q&&(vt=-vt),J=this.x0+vt;var lt=Me+Fe;return vt=v*this.R*(Ze*lt-ce*M((ct+Me)*(Me+1)-lt*lt))/(ct+Me),ie=0<=P?this.y0+vt:this.y0-vt,S.x=J,S.y=ie,S},inverse:function(S){var O,P,Q,J,ie,he,ce,Me,Le,He,Fe,Ze,ct;return S.x-=this.x0,S.y-=this.y0,Fe=v*this.R,Q=S.x/Fe,J=S.y/Fe,ie=Q*Q+J*J,he=-i(J)*(1+ie),ce=he-2*J*J+Q*Q,Me=-2*he+1+2*J*J+ie*ie,ct=J*J/Me+(2*ce*ce*ce/Me/Me/Me-9*he*ce/Me/Me)/27,Le=(he-ce*ce/3/Me)/Me,He=2*M(-Le/3),Fe=3*ct/Le/He,1<i(Fe)&&(0<=Fe?Fe=1:Fe=-1),Ze=d(Fe)/3,P=0<=S.y?(-He*T(Ze+v/3)-ce/3/Me)*v:-(-He*T(Ze+v/3)-ce/3/Me)*v,O=i(Q)<_t?this.long0:Pt(this.long0+v*(ie-1+M(1+2*(Q*Q-J*J)+ie*ie))/2/Q),S.x=O,S.y=P,S},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},kpe={init:function(){this.sin_p12=x(this.lat0),this.cos_p12=T(this.lat0)},forward:function(S){var O=S.x,P=S.y,Q=x(S.y),J=T(S.y),ie=Pt(O-this.long0),he,ce,Me,Le,He,Fe,Ze,ct,vt,lt,Dt,or,yr,Kt,Zr,Gr,hi,Ss,fa,Yb,w0,_0,d3;return this.sphere?i(this.sin_p12-1)<=_t?(S.x=this.x0+this.a*(at-P)*x(ie),S.y=this.y0-this.a*(at-P)*T(ie),S):i(this.sin_p12+1)<=_t?(S.x=this.x0+this.a*(at+P)*x(ie),S.y=this.y0+this.a*(at+P)*T(ie),S):(Ss=this.sin_p12*Q+this.cos_p12*J*T(ie),Gr=d(Ss),hi=Gr?Gr/x(Gr):1,S.x=this.x0+this.a*hi*J*x(ie),S.y=this.y0+this.a*hi*(this.cos_p12*Q-this.sin_p12*J*T(ie)),S):(he=qb(this.es),ce=Hb(this.es),Me=Wb(this.es),Le=Jb(this.es),i(this.sin_p12-1)<=_t?(He=this.a*Ks(he,ce,Me,Le,at),Fe=this.a*Ks(he,ce,Me,Le,P),S.x=this.x0+(He-Fe)*x(ie),S.y=this.y0-(He-Fe)*T(ie),S):i(this.sin_p12+1)<=_t?(He=this.a*Ks(he,ce,Me,Le,at),Fe=this.a*Ks(he,ce,Me,Le,P),S.x=this.x0+(He+Fe)*x(ie),S.y=this.y0+(He+Fe)*T(ie),S):(Ze=Q/J,ct=v0(this.a,this.e,this.sin_p12),vt=v0(this.a,this.e,Q),lt=_((1-this.es)*Ze+this.es*ct*this.sin_p12/(vt*J)),Dt=g(x(ie),this.cos_p12*I(lt)-this.sin_p12*T(ie)),fa=Dt===0?p(this.cos_p12*x(lt)-this.sin_p12*T(lt)):i(i(Dt)-v)<=_t?-p(this.cos_p12*x(lt)-this.sin_p12*T(lt)):p(x(ie)*T(lt)/x(Dt)),or=this.e*this.sin_p12/M(1-this.es),yr=this.e*this.cos_p12*T(Dt)/M(1-this.es),Kt=or*yr,Zr=yr*yr,Yb=fa*fa,w0=Yb*fa,_0=w0*fa,d3=_0*fa,Gr=ct*fa*(1-Yb*Zr*(1-Zr)/6+w0/8*Kt*(1-2*Zr)+_0/120*(Zr*(4-7*Zr)-3*or*or*(1-7*Zr))-d3/48*Kt),S.x=this.x0+Gr*x(Dt),S.y=this.y0+Gr*T(Dt),S))},inverse:function(S){S.x-=this.x0,S.y-=this.y0;var O,P,Q,J,ie,he,ce,Me,Le,He,Fe,Ze,ct,vt,lt,Dt,or,yr,Kt,Zr,Gr,hi,Ss,fa;return this.sphere?(O=M(S.x*S.x+S.y*S.y),O>2*at*this.a?void 0:(P=O/this.a,Q=x(P),J=T(P),ie=this.long0,i(O)<=_t?he=this.lat0:(he=Yp(J*this.sin_p12+S.y*Q*this.cos_p12/O),ce=i(this.lat0)-at,ie=i(ce)<=_t?0<=this.lat0?Pt(this.long0+g(S.x,-S.y)):Pt(this.long0-g(-S.x,S.y)):Pt(this.long0+g(S.x*Q,O*this.cos_p12*J-S.y*this.sin_p12*Q))),S.x=ie,S.y=he,S)):(Me=qb(this.es),Le=Hb(this.es),He=Wb(this.es),Fe=Jb(this.es),i(this.sin_p12-1)<=_t?(Ze=this.a*Ks(Me,Le,He,Fe,at),O=M(S.x*S.x+S.y*S.y),ct=Ze-O,he=h3(ct/this.a,Me,Le,He,Fe),ie=Pt(this.long0+g(S.x,-1*S.y)),S.x=ie,S.y=he,S):i(this.sin_p12+1)<=_t?(Ze=this.a*Ks(Me,Le,He,Fe,at),O=M(S.x*S.x+S.y*S.y),ct=O-Ze,he=h3(ct/this.a,Me,Le,He,Fe),ie=Pt(this.long0+g(S.x,S.y)),S.x=ie,S.y=he,S):(O=M(S.x*S.x+S.y*S.y),Dt=g(S.x,S.y),vt=v0(this.a,this.e,this.sin_p12),or=T(Dt),yr=this.e*this.cos_p12*or,Kt=-yr*yr/(1-this.es),Zr=3*this.es*(1-Kt)*this.sin_p12*this.cos_p12*or/(1-this.es),Gr=O/vt,hi=Gr-Kt*(1+Kt)*n(Gr,3)/6-Zr*(1+3*Kt)*n(Gr,4)/24,Ss=1-Kt*hi*hi/2-Gr*hi*hi*hi/6,lt=p(this.sin_p12*T(hi)+this.cos_p12*x(hi)*or),ie=Pt(this.long0+p(x(Dt)*x(hi)/T(lt))),fa=x(lt),he=g((fa-this.es*Ss*this.sin_p12)*I(lt),fa*(1-this.es)),S.x=ie,S.y=he,S))},names:["Azimuthal_Equidistant","aeqd"]},Ope={init:function(){this.sin_p14=x(this.lat0),this.cos_p14=T(this.lat0)},forward:function(S){var O=S.x,P=S.y,Q,J,ie,he,ce,Me,Le,He;return ie=Pt(O-this.long0),Q=x(P),J=T(P),he=T(ie),Me=this.sin_p14*Q+this.cos_p14*J*he,ce=1,(0<Me||i(Me)<=_t)&&(Le=this.a*ce*J*x(ie),He=this.y0+this.a*ce*(this.cos_p14*Q-this.sin_p14*J*he)),S.x=Le,S.y=He,S},inverse:function(S){var O,P,Q,J,ie,he,ce;return S.x-=this.x0,S.y-=this.y0,O=M(S.x*S.x+S.y*S.y),P=Yp(O/this.a),Q=x(P),J=T(P),he=this.long0,i(O)<=_t?(ce=this.lat0,S.x=he,S.y=ce,S):(ce=Yp(J*this.sin_p14+S.y*Q*this.cos_p14/O),ie=i(this.lat0)-at,i(ie)<=_t?(he=0<=this.lat0?Pt(this.long0+g(S.x,-S.y)):Pt(this.long0-g(-S.x,S.y)),S.x=he,S.y=ce,S):(he=Pt(this.long0+g(S.x*Q,O*this.cos_p14*J-S.y*this.sin_p14*Q)),S.x=he,S.y=ce,S))},names:["ortho"]},Ri={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Jr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Rpe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=at-Rr/2?Ri.TOP:this.lat0<=-(at-Rr/2)?Ri.BOTTOM:i(this.long0)<=Rr?Ri.FRONT:i(this.long0)<=at+Rr?0<this.long0?Ri.RIGHT:Ri.LEFT:Ri.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(S){var O={x:0,y:0},P={value:0},Q,J,ie,he,ce,Me;if(S.x-=this.long0,Q=this.es===0?S.y:_(this.one_minus_f_squared*I(S.y)),J=S.x,this.face===Ri.TOP)he=at-Q,J>=Rr&&J<=at+Rr?(P.value=Jr.AREA_0,ie=J-at):J>at+Rr||J<=-(at+Rr)?(P.value=Jr.AREA_1,ie=0<J?J-xi:J+xi):J>-(at+Rr)&&J<=-Rr?(P.value=Jr.AREA_2,ie=J+at):(P.value=Jr.AREA_3,ie=J);else if(this.face===Ri.BOTTOM)he=at+Q,J>=Rr&&J<=at+Rr?(P.value=Jr.AREA_0,ie=-J+at):J<Rr&&J>=-Rr?(P.value=Jr.AREA_1,ie=-J):J<-Rr&&J>=-(at+Rr)?(P.value=Jr.AREA_2,ie=-J-at):(P.value=Jr.AREA_3,ie=0<J?-J+xi:-J-xi);else{var Le,He,Fe,Ze,ct,vt,lt;this.face===Ri.RIGHT?J=_s(J,+at):this.face===Ri.BACK?J=_s(J,+xi):this.face===Ri.LEFT&&(J=_s(J,-at)),Ze=x(Q),ct=T(Q),vt=x(J),lt=T(J),Le=ct*lt,He=ct*vt,Fe=Ze,this.face===Ri.FRONT?(he=d(Le),ie=mi(he,Fe,He,P)):this.face===Ri.RIGHT?(he=d(He),ie=mi(he,Fe,-Le,P)):this.face===Ri.BACK?(he=d(-Le),ie=mi(he,Fe,-He,P)):this.face===Ri.LEFT?(he=d(-He),ie=mi(he,Fe,Le,P)):(he=ie=0,P.value=Jr.AREA_0)}return Me=_(12/xi*(ie+d(x(ie)*T(Rr))-at)),ce=M((1-T(he))/(T(Me)*T(Me))/(1-T(_(1/T(ie))))),P.value===Jr.AREA_1?Me+=at:P.value===Jr.AREA_2?Me+=xi:P.value===Jr.AREA_3&&(Me+=1.5*xi),O.x=ce*T(Me),O.y=ce*x(Me),O.x=O.x*this.a+this.x0,O.y=O.y*this.a+this.y0,S.x=O.x,S.y=O.y,S},inverse:function(S){var O={lam:0,phi:0},P={value:0},Q,J,ie,he,ce,Me,Le,He,Fe;if(S.x=(S.x-this.x0)/this.a,S.y=(S.y-this.y0)/this.a,J=_(M(S.x*S.x+S.y*S.y)),Q=g(S.y,S.x),0<=S.x&&S.x>=i(S.y)?P.value=Jr.AREA_0:0<=S.y&&S.y>=i(S.x)?(P.value=Jr.AREA_1,Q-=at):0>S.x&&-S.x>=i(S.y)?(P.value=Jr.AREA_2,Q=0>Q?Q+xi:Q-xi):(P.value=Jr.AREA_3,Q+=at),Fe=xi/12*I(Q),ce=x(Fe)/(T(Fe)-1/M(2)),Me=_(ce),ie=T(Q),he=I(J),Le=1-ie*ie*he*he*(1-T(_(1/T(Me)))),-1>Le?Le=-1:1<Le&&(Le=1),this.face===Ri.TOP)He=d(Le),O.phi=at-He,O.lam=P.value===Jr.AREA_0?Me+at:P.value===Jr.AREA_1?0>Me?Me+xi:Me-xi:P.value===Jr.AREA_2?Me-at:Me;else if(this.face===Ri.BOTTOM)He=d(Le),O.phi=He-at,O.lam=P.value===Jr.AREA_0?-Me+at:P.value===Jr.AREA_1?-Me:P.value===Jr.AREA_2?-Me-at:0>Me?-Me-xi:-Me+xi;else{var Ze,ct,vt;Ze=Le,Fe=Ze*Ze,vt=1<=Fe?0:M(1-Fe)*x(Me),Fe+=vt*vt,ct=1<=Fe?0:M(1-Fe),P.value===Jr.AREA_1?(Fe=ct,ct=-vt,vt=Fe):P.value===Jr.AREA_2?(ct=-ct,vt=-vt):P.value===Jr.AREA_3&&(Fe=ct,ct=vt,vt=-Fe),this.face===Ri.RIGHT?(Fe=Ze,Ze=-ct,ct=Fe):this.face===Ri.BACK?(Ze=-Ze,ct=-ct):this.face===Ri.LEFT&&(Fe=Ze,Ze=ct,ct=-Fe),O.phi=d(-vt)-at,O.lam=g(ct,Ze),this.face===Ri.RIGHT?O.lam=_s(O.lam,-at):this.face===Ri.BACK?O.lam=_s(O.lam,-xi):this.face===Ri.LEFT&&(O.lam=_s(O.lam,+at))}if(this.es!==0){var lt,Dt,or;lt=0>O.phi?1:0,Dt=I(O.phi),or=this.b/M(Dt*Dt+this.one_minus_f_squared),O.phi=_(M(this.a*this.a-or*or)/(this.one_minus_f*or)),lt&&(O.phi=-O.phi)}return O.lam+=this.long0,S.x=O.lam,S.y=O.phi,S},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},d$=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Zb=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],xj=.8487,Sj=1.3523,Ej=sl/5,p3=function(S,O){return S[0]+O*(S[1]+O*(S[2]+O*S[3]))},Ppe=function(S,O){return S[1]+O*(2*S[2]+3*O*S[3])},Lpe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(S){var O=Pt(S.x-this.long0),P=i(S.y),Q=o(P*Ej);0>Q?Q=0:18<=Q&&(Q=17),P=sl*(P-1/Ej*Q);var J={x:p3(d$[Q],P)*O,y:p3(Zb[Q],P)};return 0>S.y&&(J.y=-J.y),J.x=J.x*this.a*xj+this.x0,J.y=J.y*this.a*Sj+this.y0,J},inverse:function(S){var O={x:(S.x-this.x0)/(this.a*xj),y:i(S.y-this.y0)/(this.a*Sj)};if(1<=O.y)O.x/=d$[18][0],O.y=0>S.y?-at:at;else{var P=o(18*O.y);for(0>P?P=0:18<=P&&(P=17);;)if(Zb[P][0]>O.y)--P;else if(Zb[P+1][0]<=O.y)++P;else break;var Q=Zb[P],J=5*(O.y-Q[0])/(Zb[P+1][0]-Q[0]);J=mt(function(ie){return(p3(Q,ie)-O.y)/Ppe(Q,ie)},J,_t,100),O.x/=p3(d$[P],J),O.y=(5*P+J)*An,0>S.y&&(O.y=-O.y)}return O.x=Pt(O.x+this.long0),O},names:["Robinson","robin"]},Npe={init:function(){this.name="geocent"},forward:function(S){var O=$(S,this.es,this.a);return O},inverse:function(S){var O=A(S,this.es,this.a,this.b);return O},names:["Geocentric","geocentric","geocent","Geocent"]},xs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Kb={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Dpe={init:function(){if(Object.keys(Kb).forEach(function(P){if(typeof this[P]>"u")this[P]=Kb[P].def;else{if(Kb[P].num&&isNaN(this[P]))throw new Error("Invalid parameter value, must be numeric "+P+" = "+this[P]);Kb[P].num&&(this[P]=parseFloat(this[P]))}Kb[P].degrees&&(this[P]*=An)}.bind(this)),i(i(this.lat0)-at)<_t?this.mode=0>this.lat0?xs.S_POLE:xs.N_POLE:i(this.lat0)<_t?this.mode=xs.EQUIT:(this.mode=xs.OBLIQ,this.sinph0=x(this.lat0),this.cosph0=T(this.lat0)),this.pn1=this.h/this.a,0>=this.pn1||1e10<this.pn1)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var S=this.tilt,O=this.azi;this.cg=T(O),this.sg=x(O),this.cw=T(S),this.sw=x(S)},forward:function(S){S.x-=this.long0;var O=x(S.y),P=T(S.y),Q=T(S.x),J,ie;switch(this.mode){case xs.OBLIQ:ie=this.sinph0*O+this.cosph0*P*Q;break;case xs.EQUIT:ie=P*Q;break;case xs.S_POLE:ie=-O;break;case xs.N_POLE:ie=O}switch(ie=this.pn1/(this.p-ie),J=ie*P*x(S.x),this.mode){case xs.OBLIQ:ie*=this.cosph0*O-this.sinph0*P*Q;break;case xs.EQUIT:ie*=O;break;case xs.N_POLE:ie*=-(P*Q);break;case xs.S_POLE:ie*=P*Q}var he,ce;return he=ie*this.cg+J*this.sg,ce=1/(he*this.sw*this.h1+this.cw),J=(J*this.cg-ie*this.sg)*this.cw*ce,ie=he*ce,S.x=J*this.a,S.y=ie*this.a,S},inverse:function(S){S.x/=this.a,S.y/=this.a;var O={x:S.x,y:S.y},P,Q,J;J=1/(this.pn1-S.y*this.sw),P=this.pn1*S.x*J,Q=this.pn1*S.y*this.cw*J,S.x=P*this.cg+Q*this.sg,S.y=Q*this.cg-P*this.sg;var ie=u3(S.x,S.y);if(i(ie)<_t)O.x=0,O.y=S.y;else{var he,ce;switch(ce=1-ie*ie*this.pfact,ce=(this.p-M(ce))/(this.pn1/ie+ie/this.pn1),he=M(1-ce*ce),this.mode){case xs.OBLIQ:O.y=p(he*this.sinph0+S.y*ce*this.cosph0/ie),S.y=(he-this.sinph0*x(O.y))*ie,S.x*=ce*this.cosph0;break;case xs.EQUIT:O.y=p(S.y*ce/ie),S.y=he*ie,S.x*=ce;break;case xs.N_POLE:O.y=p(he),S.y=-S.y;break;case xs.S_POLE:O.y=-p(he)}O.x=g(S.x,S.y)}return S.x=O.x+this.long0,S.y=O.y,S},names:["Tilted_Perspective","tpers"]};return xe.defaultDatum="WGS84",xe.Proj=re,xe.WGS84=new xe.Proj("WGS84"),xe.Point=uc,xe.toPoint=dj,xe.defs=y,xe.nadgrid=Se,xe.transform=qe,xe.mgrs={forward:Oe,inverse:function(S){var O=Nt(ws(S.toUpperCase()));return O.lat&&O.lon?[O.lon,O.lat,O.lon,O.lat]:[O.left,O.bottom,O.right,O.top]},toPoint:ze},xe.version="2.7.4",function(S){S.Proj.projections.add(l3),S.Proj.projections.add(c3),S.Proj.projections.add(npe),S.Proj.projections.add(spe),S.Proj.projections.add(ope),S.Proj.projections.add(ape),S.Proj.projections.add(lpe),S.Proj.projections.add(upe),S.Proj.projections.add(cpe),S.Proj.projections.add(hpe),S.Proj.projections.add(vpe),S.Proj.projections.add(bpe),S.Proj.projections.add(wpe),S.Proj.projections.add(xpe),S.Proj.projections.add(Spe),S.Proj.projections.add(Epe),S.Proj.projections.add(Mpe),S.Proj.projections.add(Ipe),S.Proj.projections.add(Tpe),S.Proj.projections.add(Ape),S.Proj.projections.add($pe),S.Proj.projections.add(Cpe),S.Proj.projections.add(kpe),S.Proj.projections.add(Ope),S.Proj.projections.add(Rpe),S.Proj.projections.add(Lpe),S.Proj.projections.add(Npe),S.Proj.projections.add(Dpe)}(xe),xe})},{}],20:[function(l,u,c){function p(b,v){for(var _ in b)v[_]=b[_]}function d(b,v,_){return g(b,v,_)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var m=l("buffer"),g=m.Buffer;g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?u.exports=m:(p(m,c),c.Buffer=d),d.prototype=Object.create(g.prototype),p(g,d),d.from=function(b,v,_){if(typeof b=="number")throw new TypeError("Argument must not be a number");return g(b,v,_)},d.alloc=function(b,v,_){if(typeof b!="number")throw new TypeError("Argument must be a number");var E=g(b);return v===void 0?E.fill(0):typeof _=="string"?E.fill(v,_):E.fill(v),E},d.allocUnsafe=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return g(b)},d.allocUnsafeSlow=function(b){if(typeof b!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(b)}},{buffer:12}],21:[function(l,u,c){function p(G){if(!G)return"utf8";for(var W;;)switch(G){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return G;default:if(W)return;G=(""+G).toLowerCase(),W=!0}}function d(G){var W=p(G);if(typeof W!="string"&&(D.isEncoding===B||!B(G)))throw new Error("Unknown encoding: "+G);return W||G}function m(G){this.encoding=d(G);var W;switch(this.encoding){case"utf16le":this.text=E,this.end=I,W=4;break;case"utf8":this.fillLast=_,W=4;break;case"base64":this.text=x,this.end=T,W=3;break;default:return this.write=M,void(this.end=k)}this.lastNeed=0,this.lastTotal=0,this.lastChar=D.allocUnsafe(W)}function g(G){return 127>=G?0:G>>5==6?2:G>>4==14?3:G>>3==30?4:G>>6==2?-1:-2}function b(G,W,K){var ne=W.length-1;if(ne<K)return 0;var ye=g(W[ne]);return 0<=ye?(0<ye&&(G.lastNeed=ye-1),ye):--ne<K||ye===-2?0:(ye=g(W[ne]),0<=ye?(0<ye&&(G.lastNeed=ye-2),ye):--ne<K||ye===-2?0:(ye=g(W[ne]),0<=ye?(0<ye&&(ye===2?ye=0:G.lastNeed=ye-3),ye):0))}function v(G,W){if((192&W[0])!=128)return G.lastNeed=0,"\uFFFD";if(1<G.lastNeed&&1<W.length){if((192&W[1])!=128)return G.lastNeed=1,"\uFFFD";if(2<G.lastNeed&&2<W.length&&(192&W[2])!=128)return G.lastNeed=2,"\uFFFD"}}function _(G){var W=this.lastTotal-this.lastNeed,K=v(this,G);return K===void 0?this.lastNeed<=G.length?(G.copy(this.lastChar,W,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(G.copy(this.lastChar,W,0,G.length),void(this.lastNeed-=G.length)):K}function E(G,W){if((G.length-W)%2==0){var K=G.toString("utf16le",W);if(K){var ne=K.charCodeAt(K.length-1);if(55296<=ne&&56319>=ne)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=G[G.length-2],this.lastChar[1]=G[G.length-1],K.slice(0,-1)}return K}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=G[G.length-1],G.toString("utf16le",W,G.length-1)}function I(G){var W=G&&G.length?this.write(G):"";if(this.lastNeed){var K=this.lastTotal-this.lastNeed;return W+this.lastChar.toString("utf16le",0,K)}return W}function x(G,W){var K=(G.length-W)%3;return K==0?G.toString("base64",W):(this.lastNeed=3-K,this.lastTotal=3,K==1?this.lastChar[0]=G[G.length-1]:(this.lastChar[0]=G[G.length-2],this.lastChar[1]=G[G.length-1]),G.toString("base64",W,G.length-K))}function T(G){var W=G&&G.length?this.write(G):"";return this.lastNeed?W+this.lastChar.toString("base64",0,3-this.lastNeed):W}function M(G){return G.toString(this.encoding)}function k(G){return G&&G.length?this.write(G):""}var D=l("safe-buffer").Buffer,B=D.isEncoding||function(G){switch(G=""+G,G&&G.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};c.StringDecoder=m,m.prototype.write=function(G){if(G.length===0)return"";var W,K;if(this.lastNeed){if(W=this.fillLast(G),W===void 0)return"";K=this.lastNeed,this.lastNeed=0}else K=0;return K<G.length?W?W+this.text(G,K):this.text(G,K):W||""},m.prototype.end=function(G){var W=G&&G.length?this.write(G):"";return this.lastNeed?W+"\uFFFD":W},m.prototype.text=function(G,W){var K=b(this,G,W);if(!this.lastNeed)return G.toString("utf8",W);this.lastTotal=K;var ne=G.length-(K-this.lastNeed);return G.copy(this.lastChar,0,ne),G.toString("utf8",W,ne)},m.prototype.fillLast=function(G){return this.lastNeed<=G.length?(G.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(G.copy(this.lastChar,this.lastTotal-this.lastNeed,0,G.length),void(this.lastNeed-=G.length))}},{"safe-buffer":20}],22:[function(l,u,c){(function(p,d){(function(){function m(I,x){this._id=I,this._clearFn=x}var g=l("process/browser.js").nextTick,b=Function.prototype.apply,v=Array.prototype.slice,_={},E=0;c.setTimeout=function(){return new m(b.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new m(b.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(I){I.close()},m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(I,x){clearTimeout(I._idleTimeoutId),I._idleTimeout=x},c.unenroll=function(I){clearTimeout(I._idleTimeoutId),I._idleTimeout=-1},c._unrefActive=c.active=function(I){clearTimeout(I._idleTimeoutId);var x=I._idleTimeout;0<=x&&(I._idleTimeoutId=setTimeout(function(){I._onTimeout&&I._onTimeout()},x))},c.setImmediate=typeof p=="function"?p:function(I){var x=E++,T=!(2>arguments.length)&&v.call(arguments,1);return _[x]=!0,g(function(){_[x]&&(T?I.apply(null,T):I.call(null),c.clearImmediate(x))}),x},c.clearImmediate=typeof d=="function"?d:function(I){delete _[I]}}).call(this)}).call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":18,timers:22}],23:[function(l,u){(function(c){(function(){function p(W){if(!W)throw new Error("forgot to pass buffer");return T.isBuffer(W)?W:W instanceof c.ArrayBuffer?T.from(W):W.buffer instanceof c.ArrayBuffer?W.BYTES_PER_ELEMENT===1?T.from(W):T.from(W.buffer):void 0}function d(W,K){return typeof W=="string"&&k.has(W)?I.resolve(k.get(W)):d.getShapefile(W,K).then(function(ne){return typeof W=="string"&&k.set(W,ne),ne})}async function m(W,K){const ne=await v(W);return d.parseZip(ne,K)}let g=l("proj4");g.default&&(g=g.default);const b=l("./unzip"),v=l("./binaryajax"),_=l("./parseShp"),E=l("parsedbf"),I=l("lie"),x=l("lru-cache"),T=l("buffer").Buffer,M=c.URL,k=new x({max:20});d.combine=function(W){const K={type:"FeatureCollection",features:[]};let ne=0;for(const ye=W[0].length;ne<ye;)K.features.push({type:"Feature",geometry:W[0][ne],properties:W[1][ne]}),ne++;return K},d.parseZip=async function(W,K){W=p(W);const ne=await b(W),ye=[];for(var y in K=K||[],ne)y.indexOf("__MACOSX")===-1&&(y.slice(-3).toLowerCase()==="shp"?(ye.push(y.slice(0,-4)),ne[y.slice(0,-3)+y.slice(-3).toLowerCase()]=ne[y]):y.slice(-3).toLowerCase()==="prj"?ne[y.slice(0,-3)+y.slice(-3).toLowerCase()]=g(ne[y]):y.slice(-4).toLowerCase()==="json"||-1<K.indexOf(y.split(".").pop())?ye.push(y.slice(0,-3)+y.slice(-3).toLowerCase()):(y.slice(-3).toLowerCase()==="dbf"||y.slice(-3).toLowerCase()==="cpg")&&(ne[y.slice(0,-3)+y.slice(-3).toLowerCase()]=ne[y]));if(!ye.length)throw new Error("no layers founds");const C=ye.map(function(L){let F,ae;const q=L.lastIndexOf(".");return-1<q&&-1<L.slice(q).indexOf("json")?(F=JSON.parse(ne[L]),F.fileName=L.slice(0,q)):-1<K.indexOf(L.slice(q+1))?(F=ne[L],F.fileName=L):(ne[L+".dbf"]&&(ae=E(ne[L+".dbf"],ne[L+".cpg"])),F=d.combine([_(ne[L+".shp"],ne[L+".prj"]),ae]),F.fileName=L),F});return C.length===1?C[0]:C};const D=async W=>{const K=await I.all([v(W,"shp"),v(W,"prj")]);let ne=!1;try{K[1]&&(ne=g(K[1]))}catch{ne=!1}return _(K[0],ne)},B=async W=>{const[K,ne]=await I.all([v(W,"dbf"),v(W,"cpg")]);return E(K,ne)},G=(W,K)=>new M(W).pathname.slice(-4).toLowerCase()===K;d.getShapefile=async function(W,K){if(typeof W!="string")return d.parseZip(W);if(G(W,".zip"))return m(W,K);const ne=await I.all([D(W),B(W)]);return d.combine(ne)},d.parseShp=function(W,K){if(W=p(W),T.isBuffer(K)&&(K=K.toString()),typeof K=="string")try{K=g(K)}catch{K=!1}return _(W,K)},d.parseDbf=function(W,K){return W=p(W),E(W,K)},u.exports=d}).call(this)}).call(this,typeof Aa>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Aa)},{"./binaryajax":6,"./parseShp":8,"./unzip":9,buffer:12,lie:16,"lru-cache":17,parsedbf:2,proj4:19}]},{},[23])(23)})})(_he);var Srt=_he.exports,rj={exports:{}},xhe=function(t,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(r,n)}},Ert=xhe,p0=Object.prototype.toString;function ij(e){return p0.call(e)==="[object Array]"}function jL(e){return typeof e>"u"}function Mrt(e){return e!==null&&!jL(e)&&e.constructor!==null&&!jL(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Irt(e){return p0.call(e)==="[object ArrayBuffer]"}function Trt(e){return typeof FormData<"u"&&e instanceof FormData}function Art(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function $rt(e){return typeof e=="string"}function Crt(e){return typeof e=="number"}function She(e){return e!==null&&typeof e=="object"}function j5(e){if(p0.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function krt(e){return p0.call(e)==="[object Date]"}function Ort(e){return p0.call(e)==="[object File]"}function Rrt(e){return p0.call(e)==="[object Blob]"}function Ehe(e){return p0.call(e)==="[object Function]"}function Prt(e){return She(e)&&Ehe(e.pipe)}function Lrt(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function Nrt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Drt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function nj(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),ij(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function UL(){var e={};function t(n,s){j5(e[s])&&j5(n)?e[s]=UL(e[s],n):j5(n)?e[s]=UL({},n):ij(n)?e[s]=n.slice():e[s]=n}for(var r=0,i=arguments.length;r<i;r++)nj(arguments[r],t);return e}function Frt(e,t,r){return nj(t,function(n,s){r&&typeof n=="function"?e[s]=Ert(n,r):e[s]=n}),e}function jrt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var il={isArray:ij,isArrayBuffer:Irt,isBuffer:Mrt,isFormData:Trt,isArrayBufferView:Art,isString:$rt,isNumber:Crt,isObject:She,isPlainObject:j5,isUndefined:jL,isDate:krt,isFile:Ort,isBlob:Rrt,isFunction:Ehe,isStream:Prt,isURLSearchParams:Lrt,isStandardBrowserEnv:Drt,forEach:nj,merge:UL,extend:Frt,trim:Nrt,stripBOM:jrt},D0=il;function jJ(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Mhe=function(t,r,i){if(!r)return t;var n;if(i)n=i(r);else if(D0.isURLSearchParams(r))n=r.toString();else{var s=[];D0.forEach(r,function(l,u){l===null||typeof l>"u"||(D0.isArray(l)?u=u+"[]":l=[l],D0.forEach(l,function(p){D0.isDate(p)?p=p.toISOString():D0.isObject(p)&&(p=JSON.stringify(p)),s.push(jJ(u)+"="+jJ(p))}))}),n=s.join("&")}if(n){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},Urt=il;function t$(){this.handlers=[]}t$.prototype.use=function(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};t$.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};t$.prototype.forEach=function(t){Urt.forEach(this.handlers,function(i){i!==null&&t(i)})};var Vrt=t$,Brt=il,zrt=function(t,r){Brt.forEach(t,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=n,delete t[s])})},Ihe=function(t,r,i,n,s){return t.config=r,i&&(t.code=i),t.request=n,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},Grt=Ihe,The=function(t,r,i,n,s){var o=new Error(t);return Grt(o,r,i,n,s)},qrt=The,Hrt=function(t,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?t(i):r(qrt("Request failed with status code "+i.status,i.config,null,i.request,i))},YE=il,Wrt=YE.isStandardBrowserEnv()?function(){return{write:function(r,i,n,s,o,a){var l=[];l.push(r+"="+encodeURIComponent(i)),YE.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),YE.isString(s)&&l.push("path="+s),YE.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jrt=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Zrt=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},Krt=Jrt,Yrt=Zrt,Qrt=function(t,r){return t&&!Krt(r)?Yrt(t,r):r},Uk=il,Xrt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],eit=function(t){var r={},i,n,s;return t&&Uk.forEach(t.split(`
`),function(a){if(s=a.indexOf(":"),i=Uk.trim(a.substr(0,s)).toLowerCase(),n=Uk.trim(a.substr(s+1)),i){if(r[i]&&Xrt.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([n]):r[i]=r[i]?r[i]+", "+n:n}}),r},UJ=il,tit=UJ.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function n(s){var o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){var a=UJ.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),QE=il,rit=Hrt,iit=Wrt,nit=Mhe,sit=Qrt,oit=eit,ait=tit,Vk=The,VJ=function(t){return new Promise(function(i,n){var s=t.data,o=t.headers,a=t.responseType;QE.isFormData(s)&&delete o["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",c=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+c)}var p=sit(t.baseURL,t.url);l.open(t.method.toUpperCase(),nit(p,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function d(){if(!!l){var g="getAllResponseHeaders"in l?oit(l.getAllResponseHeaders()):null,b=!a||a==="text"||a==="json"?l.responseText:l.response,v={data:b,status:l.status,statusText:l.statusText,headers:g,config:t,request:l};rit(i,n,v),l=null}}if("onloadend"in l?l.onloadend=d:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(d)},l.onabort=function(){!l||(n(Vk("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(Vk("Network Error",t,null,l)),l=null},l.ontimeout=function(){var b="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(b=t.timeoutErrorMessage),n(Vk(b,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},QE.isStandardBrowserEnv()){var m=(t.withCredentials||ait(p))&&t.xsrfCookieName?iit.read(t.xsrfCookieName):void 0;m&&(o[t.xsrfHeaderName]=m)}"setRequestHeader"in l&&QE.forEach(o,function(b,v){typeof s>"u"&&v.toLowerCase()==="content-type"?delete o[v]:l.setRequestHeader(v,b)}),QE.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&a!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(b){!l||(l.abort(),n(b),l=null)}),s||(s=null),l.send(s)})},uo=il,BJ=zrt,lit=Ihe,uit={"Content-Type":"application/x-www-form-urlencoded"};function zJ(e,t){!uo.isUndefined(e)&&uo.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function cit(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=VJ),e}var r$={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:cit(),transformRequest:[function(t,r){return BJ(r,"Accept"),BJ(r,"Content-Type"),uo.isFormData(t)||uo.isArrayBuffer(t)||uo.isBuffer(t)||uo.isStream(t)||uo.isFile(t)||uo.isBlob(t)?t:uo.isArrayBufferView(t)?t.buffer:uo.isURLSearchParams(t)?(zJ(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):uo.isObject(t)||r&&r["Content-Type"]==="application/json"?(zJ(r,"application/json"),JSON.stringify(t)):t}],transformResponse:[function(t){var r=this.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||n&&uo.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?lit(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};r$.headers={common:{Accept:"application/json, text/plain, */*"}};uo.forEach(["delete","get","head"],function(t){r$.headers[t]={}});uo.forEach(["post","put","patch"],function(t){r$.headers[t]=uo.merge(uit)});var sj=r$,hit=il,pit=sj,dit=function(t,r,i){var n=this||pit;return hit.forEach(i,function(o){t=o.call(n,t,r)}),t},Ahe=function(t){return!!(t&&t.__CANCEL__)},GJ=il,Bk=dit,fit=Ahe,mit=sj;function zk(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var yit=function(t){zk(t),t.headers=t.headers||{},t.data=Bk.call(t,t.data,t.headers,t.transformRequest),t.headers=GJ.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),GJ.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var r=t.adapter||mit.adapter;return r(t).then(function(n){return zk(t),n.data=Bk.call(t,n.data,n.headers,t.transformResponse),n},function(n){return fit(n)||(zk(t),n&&n.response&&(n.response.data=Bk.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},Es=il,$he=function(t,r){r=r||{};var i={},n=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(d,m){return Es.isPlainObject(d)&&Es.isPlainObject(m)?Es.merge(d,m):Es.isPlainObject(m)?Es.merge({},m):Es.isArray(m)?m.slice():m}function u(d){Es.isUndefined(r[d])?Es.isUndefined(t[d])||(i[d]=l(void 0,t[d])):i[d]=l(t[d],r[d])}Es.forEach(n,function(m){Es.isUndefined(r[m])||(i[m]=l(void 0,r[m]))}),Es.forEach(s,u),Es.forEach(o,function(m){Es.isUndefined(r[m])?Es.isUndefined(t[m])||(i[m]=l(void 0,t[m])):i[m]=l(void 0,r[m])}),Es.forEach(a,function(m){m in r?i[m]=l(t[m],r[m]):m in t&&(i[m]=l(void 0,t[m]))});var c=n.concat(s).concat(o).concat(a),p=Object.keys(t).concat(Object.keys(r)).filter(function(m){return c.indexOf(m)===-1});return Es.forEach(p,u),i};const git="axios",vit="0.21.2",bit="Promise based HTTP client for the browser and node.js",wit="index.js",_it={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},xit={type:"git",url:"https://github.com/axios/axios.git"},Sit=["xhr","http","ajax","promise","node"],Eit="Matt Zabriskie",Mit="MIT",Iit={url:"https://github.com/axios/axios/issues"},Tit="https://axios-http.com",Ait={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},$it={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},Cit="dist/axios.min.js",kit="dist/axios.min.js",Oit="./index.d.ts",Rit={"follow-redirects":"^1.14.0"},Pit=[{path:"./dist/axios.min.js",threshold:"5kB"}];var Lit={name:git,version:vit,description:bit,main:wit,scripts:_it,repository:xit,keywords:Sit,author:Eit,license:Mit,bugs:Iit,homepage:Tit,devDependencies:Ait,browser:$it,jsdelivr:Cit,unpkg:kit,typings:Oit,dependencies:Rit,bundlesize:Pit},Che=Lit,oj={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){oj[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var qJ={},Nit=Che.version.split(".");function khe(e,t){for(var r=t?t.split("."):Nit,i=e.split("."),n=0;n<3;n++){if(r[n]>i[n])return!0;if(r[n]<i[n])return!1}return!1}oj.transitional=function(t,r,i){var n=r&&khe(r);function s(o,a){return"[Axios v"+Che.version+"] Transitional option '"+o+"'"+a+(i?". "+i:"")}return function(o,a,l){if(t===!1)throw new Error(s(a," has been removed in "+r));return n&&!qJ[a]&&(qJ[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,l):!0}};function Dit(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var i=Object.keys(e),n=i.length;n-- >0;){var s=i[n],o=t[s];if(o){var a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+s)}}var Fit={isOlderVersion:khe,assertOptions:Dit,validators:oj},Ohe=il,jit=Mhe,HJ=Vrt,WJ=yit,i$=$he,Rhe=Fit,F0=Rhe.validators;function QS(e){this.defaults=e,this.interceptors={request:new HJ,response:new HJ}}QS.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=i$(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&Rhe.assertOptions(r,{silentJSONParsing:F0.transitional(F0.boolean,"1.0.0"),forcedJSONParsing:F0.transitional(F0.boolean,"1.0.0"),clarifyTimeoutError:F0.transitional(F0.boolean,"1.0.0")},!1);var i=[],n=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(t)===!1||(n=n&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var s=[];this.interceptors.response.forEach(function(d){s.push(d.fulfilled,d.rejected)});var o;if(!n){var a=[WJ,void 0];for(Array.prototype.unshift.apply(a,i),a.concat(s),o=Promise.resolve(t);a.length;)o=o.then(a.shift(),a.shift());return o}for(var l=t;i.length;){var u=i.shift(),c=i.shift();try{l=u(l)}catch(p){c(p);break}}try{o=WJ(l)}catch(p){return Promise.reject(p)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};QS.prototype.getUri=function(t){return t=i$(this.defaults,t),jit(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Ohe.forEach(["delete","get","head","options"],function(t){QS.prototype[t]=function(r,i){return this.request(i$(i||{},{method:t,url:r,data:(i||{}).data}))}});Ohe.forEach(["post","put","patch"],function(t){QS.prototype[t]=function(r,i,n){return this.request(i$(n||{},{method:t,url:r,data:i}))}});var Uit=QS;function aj(e){this.message=e}aj.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};aj.prototype.__CANCEL__=!0;var Phe=aj,Vit=Phe;function FT(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(n){t=n});var r=this;e(function(n){r.reason||(r.reason=new Vit(n),t(r.reason))})}FT.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};FT.source=function(){var t,r=new FT(function(n){t=n});return{token:r,cancel:t}};var Bit=FT,zit=function(t){return function(i){return t.apply(null,i)}},Git=function(t){return typeof t=="object"&&t.isAxiosError===!0},JJ=il,qit=xhe,U5=Uit,Hit=$he,Wit=sj;function Lhe(e){var t=new U5(e),r=qit(U5.prototype.request,t);return JJ.extend(r,U5.prototype,t),JJ.extend(r,t),r}var tc=Lhe(Wit);tc.Axios=U5;tc.create=function(t){return Lhe(Hit(tc.defaults,t))};tc.Cancel=Phe;tc.CancelToken=Bit;tc.isCancel=Ahe;tc.all=function(t){return Promise.all(t)};tc.spread=zit;tc.isAxiosError=Git;rj.exports=tc;rj.exports.default=tc;var Nhe=rj.exports;const Jit={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function Zit(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,r=!0;e.features.forEach((i,n)=>{Object.assign(i.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in i&&typeof i.id<"u"&&(i.properties.ID_FILE=i.id,t=!1),"OBJECTID"in i.properties&&(i.properties.OBJECTID_FILE=i.properties.OBJECTID,delete i.properties.OBJECTID,r=!1),i.id=n+1}),t&&e.features.forEach(function(i){delete i.properties.ID_FILE}),r&&e.features.forEach(function(i){delete i.properties.OBJECTID_FILE})}function Kit(e,t){const r=i=>i.indexOf(" ")>-1;t.fields?.forEach(i=>{if(i.name&&r(i.name)){const n=i.name;let s,o="_",a;do s=n.replace(/ /g,o),a=t.fields?.find(l=>l.name===s),a&&(o+="_");while(a);i.alias=n,i.name=s,e.features.forEach(l=>{l.properties[s]=l.properties[n],delete l.properties[n]})}})}function Yit(e,t){const r=e.features[t].geometry.geometries;if(r.length===1)e.features[t].geometry={type:r[0].type,coordinates:r[0].coordinates};else{const i=r.map(n=>n.coordinates);e.features[t].geometry={type:`Multi${r[0].type}`,coordinates:i}}}class Qit extends Bn{async fetchFileData(t,r){const i=await Nhe.get(t,{responseType:"arraybuffer"});switch(r){case Cr.GEOJSON:return JSON.parse(new TextDecoder("utf-8").decode(new Uint8Array(i.data)));case Cr.SHAPEFILE:return i.data;case Cr.CSV:return new TextDecoder("utf-8").decode(new Uint8Array(i.data));default:console.error(`Unsupported file type passed to fetchFileData- '${r}'`)}}extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let r=t.features[0].geometry.type;if(t.features.forEach((o,a)=>{if(o.geometry.type==="GeometryCollection"){const u=o.geometry.geometries;if(u===void 0||u.length===0)return Promise.reject(new Error("GeoJSON file has geometry collection with missing/incomplete geometries"));r=u[0].type,u.forEach(c=>{if(c.type!==r)return Promise.reject(new Error("GeoJSON file has geometry collection containing multiple geometry types"))}),Yit(t,a)}}),[...new Set(t.features.map(o=>o.geometry.type==="MultiLineString"?"LineString":o.geometry.type==="MultiPolygon"?"Polygon":o.geometry.type))].length!==1)throw new Error("GeoJSON file contains multiple geometry types");const i=Object.keys(t.features[0].properties).map(o=>({name:o,type:"string"}));let n=0;const s=Object.keys(t.features[0].properties);for(;n<t.features.length;){const o=t.features[n];if(o.properties&&Object.keys(o.properties).filter(a=>s.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=i.findIndex(c=>c.name===a);i[u]={name:a,type:this.inferType(l)},s.splice(s.indexOf(a),1)}}),s.length===0)break;n++}return i}extractCsvFields(t,r=","){return FJ.dsv.dsvFormat(r).parseRows(t)[0].map(n=>({name:n,type:Rm.STRING}))}async geoJsonToEsriJson(t,r){let i,n="EPSG:4326",s;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:Rm.OID}]};Zit(t);const a=t.features[0].geometry.type,l=Jit[a],u=JSON.parse(JSON.stringify(Qtt[l]));if(t.crs&&t.crs.type==="name"&&(n=t.crs.properties.name),r){if(r.sourceProjection&&(n=r.sourceProjection),r.targetSR)i=r.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");r.layerId?s=r.layerId:s=this.$iApi.geo.shared.generateUUID(),r.colour&&(u.renderer.symbol.color=new Wf(r.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");o.renderer=b4.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(r.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(t).filter(m=>r.fieldMetadata?.fieldInfo?.find(g=>g.name===m.name)):this.extractGeoJsonFields(t)),Kit(t,o);const c=this.$iApi.geo.proj.normalizeProj(i);if(r){if(r.latField){const m=o.fields.find(g=>g.name===r.latField||g.alias===r.latField);m&&(m.type=Rm.DOUBLE)}if(r.lonField){const m=o.fields.find(g=>g.name===r.lonField||g.alias===r.lonField);m&&(m.type=Rm.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([n,i]);const p=new wt(i);await this.$iApi.geo.proj.projectGeoJson(t,n,c);const d=Xtt.convert(t,{sr:8888});return o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a),d.forEach(m=>{m.geometry.spatialReference=p,m.geometry.type=o.geometryType,Object.keys(m.attributes).forEach(g=>{(Array.isArray(m.attributes[g])||typeof m.attributes[g]=="object")&&m.attributes[g]!=null&&(m.attributes[g]="[Complex Value Removed]")})}),o.source=d,o.spatialReference=p,o.id=s,o}async csvToGeoJson(t,r){const i={latfield:"Lat",lonfield:"Long",delimiter:","};return r&&(r.latfield&&(i.latfield=r.latfield),r.lonfield&&(i.lonfield=r.lonfield),r.delimiter&&(i.delimiter=r.delimiter)),new Promise((n,s)=>{FJ.csv2geojson(t,i,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),s(o)):(a.features.map(l=>{l.properties[i.lonfield]=l.geometry.coordinates[0],l.properties[i.latfield]=l.geometry.coordinates[1]}),n(a))})})}async shapefileToGeoJson(t){return Srt(t)}inferType(t){return typeof t=="number"?Rm.DOUBLE:Rm.STRING}}var Xit=[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700];function qg(e,t){return e.then(function(r){return[null,r]}).catch(function(r){return t&&Object.assign(r,t),[r,void 0]})}var Dhe={},Fhe={},wh={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+t+"]["+r+"]*",n=new RegExp("^"+i+"$"),s=function(a,l){const u=[];let c=l.exec(a);for(;c;){const p=[],d=c.length;for(let m=0;m<d;m++)p.push(c[m]);u.push(p),c=l.exec(a)}return u},o=function(a){const l=n.exec(a);return!(l===null||typeof l>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,l,u){if(l){const c=Object.keys(l),p=c.length;for(let d=0;d<p;d++)u==="strict"?a[c[d]]=[l[c[d]]]:a[c[d]]=l[c[d]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.buildOptions=function(a,l,u){var c={};if(!a)return l;for(let p=0;p<u.length;p++)a[u[p]]!==void 0?c[u[p]]=a[u[p]]:c[u[p]]=l[u[p]];return c},e.isTagNameInArrayMode=function(a,l,u){return l===!1?!1:l instanceof RegExp?l.test(a):typeof l=="function"?!!l(a,u):l==="strict"},e.isName=o,e.getAllMatches=s,e.nameRegexp=i})(wh);const Om=wh,VL=function(e,t,r){const i={};if((!e.child||Om.isEmptyObject(e.child))&&(!e.attrsMap||Om.isEmptyObject(e.attrsMap)))return Om.isExist(e.val)?e.val:"";if(Om.isExist(e.val)&&!(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar))){const s=Om.isTagNameInArrayMode(e.tagname,t.arrayMode,r);i[t.textNodeName]=s?[e.val]:e.val}Om.merge(i,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let s=0;s<n.length;s++){const o=n[s];if(e.child[o]&&e.child[o].length>1){i[o]=[];for(let a in e.child[o])e.child[o].hasOwnProperty(a)&&i[o].push(VL(e.child[o][a],t,o))}else{const a=VL(e.child[o][0],t,o),l=t.arrayMode===!0&&typeof a=="object"||Om.isTagNameInArrayMode(o,t.arrayMode,r);i[o]=l?[a]:a}}return i};Fhe.convertToJson=VL;var Hg={},ent=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(i){Array.isArray(this.child[i.tagname])?this.child[i.tagname].push(i):this.child[i.tagname]=[i]}};const tg=wh,tnt=wh.buildOptions,XE=ent;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,tg.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const jhe={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};Hg.defaultOptions=jhe;const Uhe=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];Hg.props=Uhe;function eM(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=r.tagValueProcessor(t,e),t=Vhe(t,r.parseNodeValue,r.parseTrueNumberOnly)),t}function rnt(e,t){if(t.ignoreNameSpace){const r=e.split(":"),i=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=i+r[1])}return e}function Vhe(e,t,r){if(t&&typeof e=="string"){let i;return e.trim()===""||isNaN(e)?i=e==="true"?!0:e==="false"?!1:e:(e.indexOf("0x")!==-1?i=Number.parseInt(e,16):e.indexOf(".")!==-1?(i=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):i=Number.parseInt(e,10),r&&(i=String(i)===e?i:e)),i}else return tg.isExist(e)?e:""}const int=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function ZJ(e,t){if(!t.ignoreAttributes&&typeof e=="string"){e=e.replace(/\r?\n/g," ");const r=tg.getAllMatches(e,int),i=r.length,n={};for(let s=0;s<i;s++){const o=rnt(r[s][1],t);o.length&&(r[s][4]!==void 0?(t.trimValues&&(r[s][4]=r[s][4].trim()),r[s][4]=t.attrValueProcessor(r[s][4],o),n[t.attributeNamePrefix+o]=Vhe(r[s][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(n[t.attributeNamePrefix+o]=!0))}if(!Object.keys(n).length)return;if(t.attrNodeName){const s={};return s[t.attrNodeName]=n,s}return n}}const nnt=function(e,t){e=e.replace(/\r\n?/g,`
`),t=tnt(t,jhe,Uhe);const r=new XE("!xml");let i=r,n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const a=Lw(e,">",s,"Closing Tag is not closed.");let l=e.substring(s+2,a).trim();if(t.ignoreNameSpace){const u=l.indexOf(":");u!==-1&&(l=l.substr(u+1))}i&&(i.val?i.val=tg.getValue(i.val)+""+eM(l,n,t):i.val=eM(l,n,t)),t.stopNodes.length&&t.stopNodes.includes(i.tagname)&&(i.child=[],i.attrsMap==null&&(i.attrsMap={}),i.val=e.substr(i.startIndex+1,s-i.startIndex-1)),i=i.parent,n="",s=a}else if(e[s+1]==="?")s=Lw(e,"?>",s,"Pi Tag is not closed.");else if(e.substr(s+1,3)==="!--")s=Lw(e,"-->",s,"Comment is not closed.");else if(e.substr(s+1,2)==="!D"){const a=Lw(e,">",s,"DOCTYPE is not closed.");e.substring(s,a).indexOf("[")>=0?s=e.indexOf("]>",s)+1:s=a}else if(e.substr(s+1,2)==="!["){const a=Lw(e,"]]>",s,"CDATA is not closed.")-2,l=e.substring(s+9,a);if(n&&(i.val=tg.getValue(i.val)+""+eM(i.tagname,n,t),n=""),t.cdataTagName){const u=new XE(t.cdataTagName,i,l);i.addChild(u),i.val=tg.getValue(i.val)+t.cdataPositionChar,l&&(u.val=l)}else i.val=(i.val||"")+(l||"");s=a+2}else{const a=snt(e,s+1);let l=a.data;const u=a.index,c=l.indexOf(" ");let p=l,d=!0;if(c!==-1&&(p=l.substr(0,c).replace(/\s\s*$/,""),l=l.substr(c+1)),t.ignoreNameSpace){const m=p.indexOf(":");m!==-1&&(p=p.substr(m+1),d=p!==a.data.substr(m+1))}if(i&&n&&i.tagname!=="!xml"&&(i.val=tg.getValue(i.val)+""+eM(i.tagname,n,t)),l.length>0&&l.lastIndexOf("/")===l.length-1){p[p.length-1]==="/"?(p=p.substr(0,p.length-1),l=p):l=l.substr(0,l.length-1);const m=new XE(p,i,"");p!==l&&(m.attrsMap=ZJ(l,t)),i.addChild(m)}else{const m=new XE(p,i);t.stopNodes.length&&t.stopNodes.includes(m.tagname)&&(m.startIndex=u),p!==l&&d&&(m.attrsMap=ZJ(l,t)),i.addChild(m),i=m}n="",s=u}else n+=e[s];return r};function snt(e,t){let r,i="";for(let n=t;n<e.length;n++){let s=e[n];if(r)s===r&&(r="");else if(s==='"'||s==="'")r=s;else{if(s===">")return{data:i,index:n};s==="	"&&(s=" ")}i+=s}}function Lw(e,t,r,i){const n=e.indexOf(t,r);if(n===-1)throw new Error(i);return n+t.length-1}Hg.getTraversalObj=nnt;var Bhe={};const n$=wh,ont={allowBooleanAttributes:!1},ant=["allowBooleanAttributes"];Bhe.validate=function(e,t){t=n$.buildOptions(t,ont,ant);const r=[];let i=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=KJ(e,s),s.err)return s}else if(e[s]==="<")if(s++,e[s]==="!"){s=YJ(e,s);continue}else{let o=!1;e[s]==="/"&&(o=!0,s++);let a="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)a+=e[s];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),s--),!mnt(a)){let c;return a.trim().length===0?c="There is an unnecessary space between tag name and backward slash '</ ..'.":c="Tag '"+a+"' is an invalid name.",os("InvalidTag",c,wu(e,s))}const l=cnt(e,s);if(l===!1)return os("InvalidAttr","Attributes for '"+a+"' have open quote.",wu(e,s));let u=l.value;if(s=l.index,u[u.length-1]==="/"){u=u.substring(0,u.length-1);const c=QJ(u,t);if(c===!0)i=!0;else return os(c.err.code,c.err.msg,wu(e,s-u.length+c.err.line))}else if(o)if(l.tagClosed){if(u.trim().length>0)return os("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",wu(e,s));{const c=r.pop();if(a!==c)return os("InvalidTag","Closing tag '"+c+"' is expected inplace of '"+a+"'.",wu(e,s));r.length==0&&(n=!0)}}else return os("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",wu(e,s));else{const c=QJ(u,t);if(c!==!0)return os(c.err.code,c.err.msg,wu(e,s-u.length+c.err.line));if(n===!0)return os("InvalidXml","Multiple possible root nodes found.",wu(e,s));r.push(a),i=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=YJ(e,s);continue}else if(e[s+1]==="?"){if(s=KJ(e,++s),s.err)return s}else break;else if(e[s]==="&"){const c=dnt(e,s);if(c==-1)return os("InvalidChar","char '&' is not expected.",wu(e,s));s=c}e[s]==="<"&&s--}else{if(e[s]===" "||e[s]==="	"||e[s]===`
`||e[s]==="\r")continue;return os("InvalidChar","char '"+e[s]+"' is not expected.",wu(e,s))}if(i){if(r.length>0)return os("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1)}else return os("InvalidXml","Start tag expected.",1);return!0};function KJ(e,t){for(var r=t;t<e.length;t++)if(e[t]=="?"||e[t]==" "){var i=e.substr(r,t-r);if(t>5&&i==="xml")return os("InvalidXml","XML declaration allowed only at the start of the document.",wu(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function YJ(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var lnt='"',unt="'";function cnt(e,t){let r="",i="",n=!1;for(;t<e.length;t++){if(e[t]===lnt||e[t]===unt)if(i==="")i=e[t];else{if(i!==e[t])continue;i=""}else if(e[t]===">"&&i===""){n=!0;break}r+=e[t]}return i!==""?!1:{value:r,index:t,tagClosed:n}}const hnt=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function QJ(e,t){const r=n$.getAllMatches(e,hnt),i={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return os("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",tM(e,r[n][0]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return os("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",tM(e,r[n][0]));const s=r[n][2];if(!fnt(s))return os("InvalidAttr","Attribute '"+s+"' is an invalid name.",tM(e,r[n][0]));if(!i.hasOwnProperty(s))i[s]=1;else return os("InvalidAttr","Attribute '"+s+"' is repeated.",tM(e,r[n][0]))}return!0}function pnt(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function dnt(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,pnt(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function os(e,t,r){return{err:{code:e,msg:t,line:r}}}function fnt(e){return n$.isName(e)}function mnt(e){return n$.isName(e)}function wu(e,t){var r=e.substring(0,t).split(/\r?\n/);return r.length}function tM(e,t){return e.indexOf(t)+t.length}var zhe={};const gc=function(e){return String.fromCharCode(e)},bn={nilChar:gc(176),missingChar:gc(201),nilPremitive:gc(175),missingPremitive:gc(200),emptyChar:gc(178),emptyValue:gc(177),boundryChar:gc(179),objStart:gc(198),arrStart:gc(204),arrayEnd:gc(185)},ynt=[bn.nilChar,bn.nilPremitive,bn.missingChar,bn.missingPremitive,bn.boundryChar,bn.emptyChar,bn.emptyValue,bn.arrayEnd,bn.objStart,bn.arrStart],B_=function(e,t,r){if(typeof t=="string")return e&&e[0]&&e[0].val!==void 0?Gk(e[0].val):Gk(e);{const i=gnt(e);if(i===!0){let n="";if(Array.isArray(t)){n+=bn.arrStart;const s=t[0],o=e.length;if(typeof s=="string")for(let a=0;a<o;a++){const l=Gk(e[a].val);n=qk(n,l)}else for(let a=0;a<o;a++){const l=B_(e[a],s,r);n=qk(n,l)}n+=bn.arrayEnd}else{n+=bn.objStart;const s=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in s){const a=s[o];let l;!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?l=B_(e.attrsMap[a],t[a],r):a===r.textNodeName?l=B_(e.val,t[a],r):l=B_(e.child[a],t[a],r),n=qk(n,l)}}return n}else return i}},Gk=function(e){switch(e){case void 0:return bn.missingPremitive;case null:return bn.nilPremitive;case"":return bn.emptyValue;default:return e}},qk=function(e,t){return!XJ(t[0])&&!XJ(e[e.length-1])&&(e+=bn.boundryChar),e+t},XJ=function(e){return ynt.indexOf(e)!==-1};function gnt(e){return e===void 0?bn.missingChar:e===null?bn.nilChar:e.child&&Object.keys(e.child).length===0&&(!e.attrsMap||Object.keys(e.attrsMap).length===0)?bn.emptyChar:!0}const eZ=Hg,vnt=wh.buildOptions,bnt=function(e,t,r){return r=vnt(r,eZ.defaultOptions,eZ.props),B_(e,t,r)};zhe.convert2nimn=bnt;var Ghe={};const rM=wh,wnt=wh.buildOptions,tZ=Hg,_nt=function(e,t){return t=wnt(t,tZ.defaultOptions,tZ.props),t.indentBy=t.indentBy||"",BL(e,t)},BL=function(e,t,r){let i="{";const n=Object.keys(e.child);for(let a=0;a<n.length;a++){var s=n[a];if(e.child[s]&&e.child[s].length>1){i+='"'+s+'" : [ ';for(var o in e.child[s])i+=BL(e.child[s][o],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+s+'" : '+BL(e.child[s][0],t)+" ,"}return rM.merge(i,e.attrsMap),rM.isEmptyObject(i)?rM.isExist(e.val)?e.val:"":(rM.isExist(e.val)&&(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar)||(i+='"'+t.textNodeName+'" : '+xnt(e.val))),i[i.length-1]===","&&(i=i.substr(0,i.length-2)),i+"}")};function xnt(e){return e===!0||e===!1||!isNaN(e)?e:'"'+e+'"'}Ghe.convertToJsonString=_nt;const Snt=wh.buildOptions,Ent={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},Mnt=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function lj(e){this.options=Snt(e,Ent,Mnt),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=knt),this.options.cdataTagName?this.isCDATA=Ont:this.isCDATA=function(){return!1},this.replaceCDATAstr=Int,this.replaceCDATAarr=Tnt,this.options.format?(this.indentate=Cnt,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=$nt,this.buildObjNode=Ant):(this.buildTextNode=iZ,this.buildObjNode=rZ),this.buildTextValNode=iZ,this.buildObjectNode=rZ}lj.prototype.parse=function(e){return this.j2x(e,0).val};lj.prototype.j2x=function(e,t){let r="",i="";const n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){const a=n[o];if(!(typeof e[a]>"u"))if(e[a]===null)i+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(e[a]instanceof Date)i+=this.buildTextNode(e[a],a,"",t);else if(typeof e[a]!="object"){const l=this.isAttribute(a);l?r+=" "+l+'="'+this.options.attrValueProcessor(""+e[a])+'"':this.isCDATA(a)?e[this.options.textNodeName]?i+=this.replaceCDATAstr(e[this.options.textNodeName],e[a]):i+=this.replaceCDATAstr("",e[a]):a===this.options.textNodeName?e[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+e[a])):i+=this.buildTextNode(e[a],a,"",t)}else if(Array.isArray(e[a]))if(this.isCDATA(a))i+=this.indentate(t),e[this.options.textNodeName]?i+=this.replaceCDATAarr(e[this.options.textNodeName],e[a]):i+=this.replaceCDATAarr("",e[a]);else{const l=e[a].length;for(let u=0;u<l;u++){const c=e[a][u];if(!(typeof c>"u"))if(c===null)i+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(typeof c=="object"){const p=this.j2x(c,t+1);i+=this.buildObjNode(p.val,a,p.attrStr,t)}else i+=this.buildTextNode(c,a,"",t)}}else if(this.options.attrNodeName&&a===this.options.attrNodeName){const l=Object.keys(e[a]),u=l.length;for(let c=0;c<u;c++)r+=" "+l[c]+'="'+this.options.attrValueProcessor(""+e[a][l[c]])+'"'}else{const l=this.j2x(e[a],t+1);i+=this.buildObjNode(l.val,a,l.attrStr,t)}}return{attrStr:r,val:i}};function Int(e,t){return e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e===""?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function Tnt(e,t){if(e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e==="")return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function rZ(e,t,r,i){return r&&!e.includes("<")?this.indentate(i)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(i)+"<"+t+r+this.tagEndChar+e+this.indentate(i)+"</"+t+this.tagEndChar}function Ant(e,t,r,i){return e!==""?this.buildObjectNode(e,t,r,i):this.indentate(i)+"<"+t+r+"/"+this.tagEndChar}function iZ(e,t,r,i){return this.indentate(i)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function $nt(e,t,r,i){return e!==""?this.buildTextValNode(e,t,r,i):this.indentate(i)+"<"+t+r+"/"+this.tagEndChar}function Cnt(e){return this.options.indentBy.repeat(e)}function knt(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}function Ont(e){return e===this.options.cdataTagName}var Rnt=lj;(function(e){const t=Fhe,r=Hg,i=Hg,n=wh.buildOptions,s=Bhe;e.parse=function(o,a,l){if(l){l===!0&&(l={});const c=s.validate(o,l);if(c!==!0)throw Error(c.err.msg)}a=n(a,i.defaultOptions,i.props);const u=r.getTraversalObj(o,a);return t.convertToJson(u,a)},e.convertTonimn=zhe.convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=Ghe.convertToJsonString,e.validate=s.validate,e.j2xParser=Rnt,e.parseToNimn=function(o,a,l){return e.convertTonimn(e.getTraversalObj(o,l),a,l)}})(Dhe);class Pnt extends Bn{async loadWfsData(t,r=-1,i=0,n=1e3,s={type:"FeatureCollection",features:[]},o=!1){let a={startindex:i.toString(),limit:n.toString()};r===-1&&(a={resulttype:"hits"});const u=new rT(t).updateQuery(a),[c,p]=await qg(Nhe.get(u));if(!p)return console.error(`WFS data failed to load for ${t}`,c),Promise.reject(c);const d=p.data;if(r===-1)return r=p.data.numberMatched,this.loadWfsData(t,r,i,n,s,o);if(s.features=[...s.features,...d.features],d.features.length<r-i){const m=Math.min(1e3,r-i-d.features.length);return this.loadWfsData(u,r,d.features.length+i,m,s,o)}else return o&&s.features.length>0&&s.features[0].geometry.type===Yi.POINT&&s.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),s}reversedAxisWKIDs(){return Xit}parseCapabilities(t){const r=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new rT(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Mt(o,{responseType:"xml"}).then(a=>a.data)},i=new Promise(o=>{r().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(r())})}),n=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,c=l.Title;let p=l.Style;const d=[],m={};return p&&(Array.isArray(p)||(p=[p]),p.forEach(g=>{const b=g.Name;if(d.push(b),g.LegendURL){const _=g.LegendURL.OnlineResource["@_xlink:href"];m[b]=_.replaceAll("&amp;","&")}})),{name:u||null,title:c,queryable:l["@_queryable"]==="1",layers:n(l),allStyles:d,styleToURL:m,currentStyle:d[0]}})):[]},s=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return i.then(o=>{if(!o)return[];const a=new XMLSerializer().serializeToString(o),l={ignoreAttributes:!1},u=Dhe.parse(a,l);if("ServiceExceptionReport"in u)return console.error(u.ServiceExceptionReport.ServiceException),[];const c=u.WMS_Capabilities.Capability;return{layers:n(c),queryTypes:s(c.Request.GetFeatureInfo)}})}}class Lnt extends Bn{files;ogc;constructor(t){super(t),this.files=new Qit(t),this.ogc=new Pnt(t)}createLayer(t){let r;switch(t.layerType){case Cr.FEATURE:r=Vnt;break;case Cr.MAPIMAGE:r=Bnt;break;case Cr.GRAPHIC:r=Dnt;break;case Cr.TILE:r=qnt;break;case Cr.WFS:r=Wnt;break;case Cr.WMS:r=Hnt;break;case Cr.GEOJSON:r=Fnt;break;case Cr.CSV:r=Unt;break;case Cr.SHAPEFILE:r=jnt;break;case Cr.OSM:r=Gnt;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new r(t,this.$iApi)}getLayer(t){let r;return r=this.$iApi.$vApp.$store.get(Lo.getLayerById,t),r||(r=this.$iApi.$vApp.$store.get(Lo.getLayerByUid,t)),r}allLayers(){return this.$vApp.$store.get(Lo.layers)||[]}allErrorLayers(){return this.$vApp.$store.get(Lo.penaltyBox)||[]}getLayerControls(t){const r=this.getLayer(t)??this.allErrorLayers().find(o=>o.id===t||o.uid===t);if(!r)return;const i=r.config.controls?.slice()??[Qs.BoundaryZoom,Qs.Datatable,Qs.Identify,Qs.Metadata,Qs.Opacity,Qs.Refresh,Qs.Reload,Qs.Remove,Qs.Settings,Qs.Symbology,Qs.Visibility],n=[];return r.supportsFeatures||n.push(Qs.Datatable),r.extent===void 0&&n.push(Qs.BoundaryZoom),(r.config?.metadata||(r.isSublayer?r.parentLayer?.config?.metadata:{})||{}).url||n.push(Qs.Metadata),n.forEach(o=>{const a=i?.indexOf(o)??-1;a!==-1&&i?.splice(a,1)}),{controls:i,disabledControls:r.config.disabledControls??[]}}}class jT extends Bn{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;featureCount;fields;nameField;oidField;expectedTime;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;esriLayer;esriSubLayer;esriView;extent;_parentLayer;_sublayers;constructor(t,r){super(r),this.config=t,this.id="",this.uid="",this.name="error",this.layerState=co.NEW,this.drawState=Dc.NOT_LOADED,this.initiationState=ka.NEW,this.layerIdx=-1,this.layerFormat=rc.UNKNOWN,this.layerType=Cr.UNKNOWN,this.dataFormat=Ua.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=Fn.NONE,this.supportsFeatures=!1,this.featureCount=-1,this.fields=[],this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=t.cosmetic||!1,this.userAdded=!1,this.identify=!1,this.hovertips=t.state?.hovertips??!0,this.geomType=br.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0}}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getLayerTree(){return new vx(0,"Fake tree","getLayerTree() was not implemented in layer")}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new moe}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(t){}get touchTolerance(){return 0}set touchTolerance(t){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(t){return[]}getAttributes(t=void 0){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return Promise.resolve(new Ip(new Lb))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,r){}applySqlFilter(t=[]){}getFilterOIDs(t=[],r=void 0){return Promise.resolve(void 0)}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}onError(){}updateLayerState(t){}updateDrawState(t){}updateInitiationState(t){}uidToIdx(t){if(t===this.uid)return-1;{const r=this._sublayers.findIndex(i=>i?.uid===t);if(r===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return r}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let r;if(typeof t=="string"?r=this.uidToIdx(t):r=t,this._sublayers[r]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[r]}controlAvailable(t){const r=this.$iApi.geo.layer.getLayerControls(this.id);return r?.disabledControls?.includes(t)?!1:r?.controls.includes(t)??!1}}class XS extends jT{timers;_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";origRampConfig;loadDefProm;viewDefProm;loadPromFulfilled;layerTree;esriWatches;constructor(t,r){super(t,r),this.name=t.name||"",this._scaleSet=new moe,this._mouseTolerance=t.mouseTolerance!=null?t.mouseTolerance:5,this._touchTolerance=t.touchTolerance!=null?t.touchTolerance:15,this.geomType=br.NONE,this.dataFormat=Ua.UNKNOWN,this.layerType=Cr.UNKNOWN,this.layerFormat=rc.UNKNOWN,this._drawOrder=[],this.expectedTime.draw=t.expectedDrawTime??1e4,this.expectedTime.load=t.expectedLoadTime??4e3,this.timers={draw:void 0,load:void 0},this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.identifyMode=Fn.NONE,this.supportsFeatures=!1,this.supportsSublayers=!1,this._serverVisibility=void 0,this.isFile=!1,this.extent=t.extent?un.fromConfig(`${this.id}_extent`,t.extent):void 0,this.layerState=co.NEW,this.initiationState=ka.NEW,this.drawState=Dc.NOT_LOADED,this.loadDefProm=new cs,this.viewDefProm=new cs,this.loadPromFulfilled=!1,this.esriWatches=[],this.layerTree=new vx(0,this.uid,this.name,!0)}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed."),console.trace()}updateInitiationState(t){this.initiationState=t,this.$iApi.event.emit(Wt.LAYER_INITIATIONSTATECHANGE,{state:t,layer:this})}updateLayerState(t){this.layerState=t,this.$iApi.event.emit(Wt.LAYER_LAYERSTATECHANGE,{state:t,layer:this})}updateDrawState(t){this.drawState=t,t===Dc.REFRESH?this.startTimer("draw"):t===Dc.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(Wt.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){this.updateInitiationState(ka.INITIATING),this.startTimer("load");const[t]=await qg(this.onInitiate());this.drawState!==Dc.UP_TO_DATE&&this.startTimer("draw"),t&&(console.error(t.message),this.onError()),this.updateInitiationState(ka.INITIATED)}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();if(!this.esriLayer){this.noLayerErr();return}this.initiationState===ka.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`),this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(Wt.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(Wt.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const r={"not-loaded":co.LOADING,loading:co.LOADING,loaded:co.LOADED,failed:co.ERROR};t==="loaded"?this.onLoad():t==="failed"?this.onError():this.updateLayerState(r[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",r=>{this.updateDrawState(r?Dc.REFRESH:Dc.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(t=>t.initiate())}async terminate(){this.updateInitiationState(ka.TERMINATING),this.sublayers.forEach(t=>t.terminate()),this.loadDefProm=new cs,this.loadPromFulfilled=!1,this.viewDefProm=new cs,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[],this.updateLayerState(co.NEW),this.updateDrawState(Dc.NOT_LOADED),this.updateInitiationState(ka.TERMINATED)}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}let t=0;if(this.initiationState===ka.INITIATED){if(this.esriLayer){const r=this.$iApi.geo.map.esriMap.layers.findIndex(i=>i.id===this.id);r>-1&&(t=r,this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer))}this.$iApi.event.emit(Wt.LAYER_RELOAD_START,this),this.sublayers.forEach(r=>this.$iApi.event.emit(Wt.LAYER_RELOAD_START,r)),await this.terminate()}if(await this.initiate(),!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.esriMap.layers.add(this.esriLayer,t),this.$iApi.event.emit(Wt.LAYER_RELOAD_END,this),this.sublayers.forEach(r=>this.$iApi.event.emit(Wt.LAYER_RELOAD_END,r))}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}onLoad(){let t=!1;const r=setTimeout(()=>{t=!0,this.onError()},2e4),i=this.onLoadActions();Promise.all(i).then(()=>{clearTimeout(r),t?this.visibility=!1:(this.loadPromFulfilled&&(this.loadDefProm=new cs),this.loadDefProm.resolveMe(),this.loadPromFulfilled=!0,this.stopTimer("load"),this.sublayers.forEach(n=>n.onLoad()),this.updateLayerState(co.LOADED))}).catch(()=>{clearTimeout(r),this.onError()})}onError(){this.loadPromFulfilled&&(this.loadDefProm=new cs),this.loadDefProm.rejectMe(),this.loadPromFulfilled=!0,this.sublayers.forEach(t=>t.onError()),this.$iApi.notify.show(Lf.ERROR,this.$vApp.$t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(co.ERROR)}onLoadActions(){return this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify),[this.$iApi.geo.proj.checkProj(this.esriLayer.spatialReference).then(r=>r?Promise.resolve():Promise.reject())]}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===co.LOADED}get layerExists(){return!!this.esriLayer}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),!1)}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let r;if(typeof t>"u")if(this.mapCheck())r=this.$iApi.geo.map.getScale();else return!1;else r=t;return this.scaleSet.isOffScale(r).offScale}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=t}get touchTolerance(){return this._touchTolerance}set touchTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=t}get drawOrder(){return this._drawOrder}getLayerTree(){return this.layerTree?this.layerTree:(this.noLayerErr(),new vx(0,"YOU DID AN ERROR","Error, check your console pls"))}get visibility(){return this.esriLayer?this.esriLayer.visible:(this.noLayerErr(),!1)}set visibility(t){this.esriLayer?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.esriLayer?this.esriLayer.opacity:(this.noLayerErr(),0)}set opacity(t){this.esriLayer?this.esriLayer.opacity=t:this.noLayerErr()}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return this.stubError(),Promise.resolve(new Ip(new Lb))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,r){this.stubError()}getFilterOIDs(t=[],r=void 0){return this.stubError(),Promise.resolve(void 0)}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,r,i=!0){this.stubError()}startTimer(t){this.stopTimer(t),this.expectedTime[t]>0&&(this.timers[t]=setTimeout(()=>this.$iApi.notify.show(Lf.WARNING,this.$vApp.$t(`layer.long${t}`,{id:this.id})),this.expectedTime[t]))}stopTimer(t){this.timers[t]&&clearTimeout(this.timers[t])}}class s$ extends XS{geomType;esriFields;fieldList;attLoader;renderer;serviceUrl;quickCache;filter;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.geomType=br.UNKNOWN,this.serviceUrl="",this.fieldList="",this.esriFields=[],this.filter=new UNe}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const[r,i]=await qg(Mt(this.serviceUrl,{query:{f:"json"}}));if(!i)return console.error(`Service metadata load error: ${this.serviceUrl}`,r),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));if(!i.data)return console.error(`Service metadata load error: ${this.serviceUrl}`),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));const n=i.data;if(this.geomType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(n.geometryType),this.quickCache=new Hhe(this.geomType),this.scaleSet.minScale=n.effectiveMinScale||n.minScale,this.scaleSet.maxScale=n.effectiveMaxScale||n.maxScale,this.supportsFeatures=!1,this.extent=this.extent??(n.extent?un.fromArcServer(n.extent,this.id+"_extent"):void 0),this._serverVisibility=n.defaultVisibility,n.type==="Feature Layer"){this.supportsFeatures=!0,this.dataFormat=Ua.ESRI_FEATURE,this.esriFields=vs(n.fields.map(l=>No.fromJSON(l))),this.fields=this.esriFields.map(l=>({name:l.name,alias:l.alias,type:l.type,length:l.length})),this.nameField=n.displayField,this.esriFields.every(l=>l.type==="oid"?(this.oidField=l.name,!1):!0)&&(this.oidField=n.objectIdField||(()=>(console.error(`Encountered service with no OID defined: ${this.serviceUrl}`),""))()),this.drawOrder.forEach(l=>{this.esriFields.findIndex(u=>u.name===l.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${l.field}`)});const o=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:Sv(n.drawingInfo.renderer);this.renderer=this.$iApi.geo.symbology.makeRenderer(o,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const a={supportsLimit:(n.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*"};this.attLoader=new Znt(this.$iApi,a),this.origRampConfig.name||(this.name=n.name??this.id)}else this.dataFormat=Ua.ESRI_RASTER,this.esriFields=[]}processFieldMetadata(t=void 0){if(!t){this.fieldList="*";return}if(!t.fieldInfo)throw new Error("processFieldMetadata called before fieldInfo was set on config metadata");if(t.exclusiveFields){t.fieldInfo.find(i=>i.name===this.oidField)||t.fieldInfo.push({name:this.oidField}),this.fieldList=t.fieldInfo.map(i=>i.name).join(",");const r=t.fieldInfo;this.esriFields=this.esriFields.filter(i=>r.find(n=>n.name===i.name))}else this.fieldList="*";t.fieldInfo.forEach(r=>{if(r.alias){const i=this.esriFields.find(n=>n.name===r.name);i&&(i.alias=r.alias)}})}getAttributes(){return this.attLoader?this.attLoader.getAttribs():(this.noLayerErr(),Promise.resolve({oidIndex:{},features:[]}))}abortAttributeLoad(){this.attLoader?this.attLoader.abortAttribLoad():this.noLayerErr()}clearFeatureCache(){this.attLoader?this.attLoader.destroyAttribs():this.noLayerErr(),this.quickCache&&this.quickCache.clearAll()}getTabularAttributes(){if(!this.attLoader)throw new Error("getTabularAttributes call with missing attribute loader");return this.attLoader.tabularAttributesCache||(this.attLoader.tabularAttributesCache=this.getTabularAttributesGuts()),this.attLoader.tabularAttributesCache}async getTabularAttributesGuts(){if(!this.attLoader)throw new Error("getTabularAttributesGuts call with missing attribute loader");if(this.dataFormat===Ua.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const t=await this.attLoader.getAttribs();if(!t.features||t.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const r=this.esriFields.filter(n=>t.features[0].hasOwnProperty(Bt(n).name)).map(n=>({data:Bt(n).name,title:Bt(n).alias||Bt(n).name})),i=t.features.map(n=>{const s=goe({},n);return s.rvInteractive="",s.rvSymbol=this.renderer?.getGraphicIcon(n),s});return r.forEach(n=>{if(n.data.slice(-2)==="()"){const s=function(){return this[n.data]},o=n.data.slice(0,-2);i.forEach(a=>{a[o]=s})}}),{columns:r,rows:i,fields:this.fields,oidField:this.oidField}}async getGraphic(t,r){let i={},n=new Lb;const s=this.$iApi.geo.map;if(!this.quickCache)throw new Error("getGraphic call with missing quickCache");if(!this.attLoader)throw new Error("getGraphic call with missing attribute loader");let o=!1,a=!1,l=0;if(r.getAttribs||r.getStyle){const c=this.quickCache.getAttribs(t);if(c)i=c;else if(this.attLoader.isLoaded()||this.isFile){const p=await this.attLoader.getAttribs();i=p.features[p.oidIndex[t]]}else o=!0}if(r.getGeom){l=s.getScale();const c=this.quickCache.getGeom(t,l);c?n=c:a=!0}if(o||a){const c={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList};a&&(c.mapSR=s.getSR().wkid?.toString(),this.quickCache.isPoint||(c.maxOffset=s.esriView?.resolution));const p=await this.$iApi.geo.attributes.loadSingleFeature(c);a&&(this.quickCache.setGeom(t,p.geometry,l),n=p.geometry),(o||typeof this.quickCache.getAttribs(t)>"u")&&(this.quickCache.setAttribs(t,p.attributes),o&&(i=p.attributes))}const u=new Ip(n,"",r.getAttribs?i:void 0);if(r.getStyle){const c=Bt(this.renderer.getGraphicSymbol(i));u.style=this.$iApi.geo.geom.styleEsriToRamp(c)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const r=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(r.attributes||{},this.renderer)}setSqlFilter(t,r){const i=this.filter.getSql(t);if(r===i)return;this.filter.setSql(t,r),this.$iApi.event.emit(Wt.FILTER_CHANGE,{uid:this.uid,filterKey:t});const n=`${this.uid}-${t}-${r}`;this._lastFilterUpdate=n,setTimeout(()=>{this._lastFilterUpdate===n&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error("attempted to apply sql filter to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter")}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const i=this.filter.getCombinedSql(t),n=!!r;if(!(i||n))return;r&&this.filter.setExtent(r);const s=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(s,n);if(!o){const a={filterGeometry:r,filterSql:i,includeGeometry:!1};o=this.queryOIDs(a),this.filter.setCache(o,s,n)}return o}async loadFeatureCount(){if(!this.serviceUrl)return;const t={query:{f:"json",where:"1=1",returnCountOnly:!0,returnGeometry:!1}},[r,i]=await qg(Mt(`${this.serviceUrl}/query`,t));if(!i){console.warn(`Feature count request unsuccessful: ${this.serviceUrl}`,r);return}if(!i.data){console.warn(`Unable to load feature count: ${this.serviceUrl}`);return}this.featureCount=i.data.count}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){const r=await this.queryOIDs(t),i={getGeom:!!t.includeGeometry,getAttribs:!0};return r.map(n=>({oid:n,graphic:this.getGraphic(n,i)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(i=>i.graphic))}}class Nnt extends XS{constructor(t,r){super(t,r),this.dataFormat=Ua.ESRI_FEATURE,this.layerFormat=rc.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getGraphicCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(r=>r.id===t)}getEsriGraphic(t){return this.esriLayer?.graphics.find(r=>r.id===t)}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.esriLayer){this.noLayerErr();return}let r;t instanceof Array?r=t:r=[t];const i=r.filter(l=>this._graphics.findIndex(c=>c.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),n=this.$iApi.geo.map.getSR(),s=i.map(l=>this.$iApi.geo.proj.projectGeometry(n,l.geometry)),o=await Promise.all(s),a=i.map((l,u)=>{const c=new Ip(o[u],l.id,l.attributes);return c.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(c)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.esriLayer){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let r;Array.isArray(t)?r=t:r=[t];const i=r.map(s=>typeof s=="string"?s:s.id),n=[];i.forEach(s=>{const o=this.esriLayer?.graphics.find(a=>a.id===s);if(o){n.push(o);const a=this._graphics.findIndex(l=>l.id===s);a!=-1&&this._graphics.splice(a,1)}}),this.esriLayer.removeMany(n),this._graphics=this._graphics.filter(s=>i.includes(s.id))}}class Dnt extends Nnt{constructor(t,r){super(t,r),this.layerType=Cr.GRAPHIC}async onInitiate(){this.esriLayer=vs(new dSe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(Dc.UP_TO_DATE),t}}function nZ(e,t){if(e.findIndex(r=>r.name===t)===-1){const r=e.find(i=>i.alias===t);return r?r.name:(console.warn(`Cannot find name field in layer field list: ${t}`),"OBJECTID")}else return t}class o$ extends s${esriJson;sourceGeoJson;tooltipField;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=Ua.ESRI_FEATURE,this.layerFormat=rc.FEATURE,this.tooltipField="",t.identifyMode&&t.identifyMode!==Fn.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Fn.HYBRID,t.initialFilteredQuery&&this.filter.setSql(Nf.INITIAL,t.initialFilteredQuery)}async onInitiate(){const t=typeof this.sourceGeoJson=="string"?JSON.parse(this.sourceGeoJson):this.sourceGeoJson,r={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),...this.origRampConfig.latField&&{latField:this.origRampConfig.latField},...this.origRampConfig.longField&&{lonField:this.origRampConfig.longField},colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(t,r),this.esriLayer=vs(new R4(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),i="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(s=>{r[s]=this.esriJson[s]}),this.origRampConfig.nameField?r.displayField=nZ(r.fields,this.origRampConfig.nameField)||i:r.displayField=i,r.outFields=["*"],delete r.url,Array.isArray(t.drawOrder)&&t.drawOrder.length>0?(r.orderBy=t.drawOrder.map(s=>({field:s.field,order:s.ascending?"ascending":"descending"})),this._drawOrder=t.drawOrder.slice()):(r.orderBy=[{field:i,order:"descending"}],this._drawOrder=[{field:i,ascending:!1}]),r}onLoadActions(){const t=super.onLoadActions();if(this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=Sv(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=nZ(this.esriFields,this.origRampConfig.tooltipField):this.tooltipField=this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),!this.attLoader)throw new Error("file layer did not have attribute loader object");return this.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewDefProm.getPromise()),this.filter.getSql(Nf.INITIAL)&&Promise.all(t).then(()=>{this.applySqlFilter()}),t}runIdentify(t){if(this.$iApi.geo.map,!this.canIdentify())return[];const r=new cs,i=oa({items:[],loading:r.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()});let n=Promise.resolve(),s=Promise.resolve(),o=[];if(this.identifyMode===Fn.HYBRID||this.identifyMode===Fn.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==br.POLYGON&&t.geometry.type===br.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),s=this.queryFeatures(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===Fn.HYBRID||this.identifyMode===Fn.SYMBOLIC)&&(n=s.then(async()=>{const a=await t.hitTest,l=await Promise.all(a.filter(u=>u.layerId===this.id&&o.findIndex(c=>u.oid===c.attributes[this.oidField])===-1).map(u=>this.getGraphic(u.oid,{getAttribs:!0})));o=o.concat(l)})),Promise.all([n,s]).then(()=>{o.forEach(a=>{const l=oa({data:a.attributes,format:rg.ESRI,loaded:!0,loading:Promise.resolve()});i.items.push(l)}),i.loaded=!0,r.resolveMe()}),[i]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.quickCache=new Hhe(this.geomType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=this.extent??un.fromESRI(t.fullExtent,this.id+"_extent"),this.esriFields=vs(t.fields.slice()),this.fields=this.esriFields.map(i=>({name:i.name,alias:i.alias,type:i.type,length:i.length})),this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const r={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1};this.attLoader=new Knt(this.$iApi,r)}async getGraphic(t,r){const i={filterSql:`${this.oidField}=${t}`,includeGeometry:!!r.getGeom},n=await this.queryFeatures(i);if(n.length===0)throw new Error(`Could not find object id ${t}`);n.length!==1&&console.warn("did not get a single result on a query for a specific object id");const s=n[0];if(r.getStyle){const o=Bt(this.renderer.getGraphicSymbol(s.attributes));s.style=this.$iApi.geo.geom.styleEsriToRamp(o)}return s}async queryFeatures(t){const r={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(r)}async queryOIDs(t){const r={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(r)).map(n=>n.attributes?n.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);Bt(this.esriView).filter=new KX({where:r})}}class Fnt extends o${constructor(t,r){super(t,r),this.layerType=Cr.GEOJSON}async onInitiate(){if(this.origRampConfig.rawData)this.sourceGeoJson=this.origRampConfig.rawData;else if(this.origRampConfig.url)this.sourceGeoJson=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");await super.onInitiate()}}class jnt extends o${constructor(t,r){super(t,r),this.layerType=Cr.SHAPEFILE}async onInitiate(){let t;if(this.origRampConfig.rawData)t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("shapefile file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.shapefileToGeoJson(t),await super.onInitiate()}}class Unt extends o${constructor(t,r){super(t,r),this.layerType=Cr.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;if(this.origRampConfig.rawData)t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField}),await super.onInitiate()}}class Vnt extends s${tooltipField;constructor(t,r){super(t,r),this.dataFormat=Ua.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=Cr.FEATURE,this.layerFormat=rc.FEATURE,t.identifyMode&&t.identifyMode!==Fn.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Fn.HYBRID}async onInitiate(){vs(this.esriLayer=new R4(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return t.initialFilteredQuery&&(r.definitionExpression=t.initialFilteredQuery,this.filter.setSql(Nf.INITIAL,t.initialFilteredQuery)),Array.isArray(t.drawOrder)&&t.drawOrder.length>0&&(r.orderBy=t.drawOrder.map(i=>({field:i.field,order:i.ascending?"ascending":"descending"})),this._drawOrder=t.drawOrder.slice()),r}onLoadActions(){const t=super.onLoadActions(),r=this.esriLayer&&this.origRampConfig.customRenderer?.type;r&&(this.esriLayer.renderer=Sv(this.config.customRenderer));const i=this.esriLayer.parsedUrl.path,s=this.$iApi.geo.shared.parseUrlIndex(i).index||0;this.serviceUrl=i;const o=this.loadLayerMetadata(r?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{if(!this.attLoader)throw new Error("layer metadata loader did not create attribute loader");this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),this.attLoader.updateFieldList(this.fieldList),this.esriLayer?.orderBy||(this.esriLayer.orderBy=[{field:this.oidField,order:"descending"}],this._drawOrder=[{field:this.oidField,ascending:!1}])}),a=this.loadFeatureCount();return this.layerTree.name=this.name,this.layerTree.layerIdx=s,t.push(o,a),t}runIdentify(t){if(!this.canIdentify())return[];const r=new cs,i=oa({items:[],loading:r.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()});let n=Promise.resolve(),s=Promise.resolve(),o=[];if(this.identifyMode===Fn.HYBRID||this.identifyMode===Fn.GEOMETRIC){const a={includeGeometry:!1};this.geomType!==br.POLYGON&&t.geometry.type===br.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),s=this.queryFeaturesDiscrete(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===Fn.HYBRID||this.identifyMode===Fn.SYMBOLIC)&&(n=s.then(async()=>{(await t.hitTest).filter(l=>l.layerId===this.id&&o.findIndex(u=>l.oid===u.oid)===-1).forEach(l=>{o.push({oid:l.oid,graphic:this.getGraphic(l.oid,{getAttribs:!0})})})})),Promise.all([n,s]).then(()=>{o.forEach(a=>{const l=oa({data:void 0,format:rg.ESRI,loaded:!1,loading:new Promise(u=>{a.graphic.then(c=>{l.data=c.attributes,l.loaded=!0,u()})})});i.items.push(l)}),i.loaded=!0,r.resolveMe()}),[i]}applySqlFilter(t=[]){if(!this.esriLayer){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=r}}class Bnt extends s${isDynamic;origState;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=Cr.MAPIMAGE,this.layerFormat=rc.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=Fn.GEOMETRIC}async onInitiate(){this.esriLayer=vs(new W9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return this.origState={visibility:r.visible,opacity:r.opacity},r.visible=!1,t.imageFormat&&(r.imageFormat=t.imageFormat),r}onLoadActions(){const t=super.onLoadActions();if(!this.esriLayer)return this.noLayerErr(),t;this.layerTree.name=this.name,this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??un.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const r=o=>{const a=this.esriLayer?.allSublayers.find(l=>l.id===o);if(!a)throw new Error("attempt to find map image sublayer failed");return a},i={};this.origRampConfig.sublayers.forEach(o=>{i[o.index||0]=o});const n=[],s=(o,a)=>{const l=o.id,u=i[l];if(o.sublayers&&o.sublayers.length>0){const c=(u?u.name:"")||o.title||"",p=new vx(l,"",c,!1);a.findChildByIdx(l)||a.children.push(p),o.sublayers.forEach(d=>{s(d,p)})}else{this._sublayers[l]||(this._sublayers[l]=new znt({id:`${this.id}-${l}`,layerType:Cr.SUBLAYER,name:i[l]?.name,state:i[l]?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:i[l]?.extent,controls:i[l]?.controls,disabledControls:i[l]?.disabledControls,initialFilteredQuery:i[l]?.initialFilteredQuery},this.$iApi,this,l));const c=this._sublayers[l];if(c.isRemoved)return;const p=(u?u.name:"")||o.title||"";if(c.name=p,n.push(c),!a.children.map(d=>d.layerIdx).includes(l)){const d=new vx(l,c.uid,c.name,!1);a.children.push(d)}c.esriWatches.push(o.watch("visible",()=>{this.$iApi.event.emit(Wt.LAYER_VISIBILITYCHANGE,{visibility:c.visibility,layer:c}),c.parentLayer?.checkVisibility()}),o.watch("opacity",d=>{this.$iApi.event.emit(Wt.LAYER_OPACITYCHANGE,{opacity:d,layer:c})}))}};return this.origRampConfig.sublayers.forEach(o=>{if(!o.cosmetic){const a=r(o.index||0);s(a,this.layerTree)}}),n.forEach(o=>{const a=r(o.layerIdx),l=i[o.layerIdx];o.serviceUrl=a.url,o.fetchEsriSublayer(this),o.initiate();const u=o.esriSubLayer&&l?.customRenderer?.type;u&&(o.esriSubLayer.renderer=Sv(l.customRenderer));const c=o.loadLayerMetadata(u?{customRenderer:o.esriSubLayer?.renderer}:{}).then(()=>{const p=i[o.layerIdx];if(p?(o.visibility=o.isRemoved?!1:p.state?.visibility??(this.origState.visibility?o._serverVisibility??this.origState.visibility:this.origState.visibility??o._serverVisibility)??!0,o.opacity=p.state?.opacity??this.origState.opacity??1,o.nameField=p.nameField||o.nameField||"",o.processFieldMetadata(p.fieldMetadata)):o.processFieldMetadata(),o.supportsFeatures){if(!o.attLoader)throw new Error("Map Image Sublayer - expected attLoader to exist");return o.attLoader.updateFieldList(o.fieldList),o.loadFeatureCount()}else return Promise.resolve()});t.push(c)}),this.esriLayer.allSublayers.forEach(o=>{!o.sublayers&&!n.find(a=>a.layerIdx===o.id)&&(o.visible=!1,o.opacity=0)}),this.origRampConfig&&(this.visibility=this.origState.visibility??!0),t}updateLayerState(t){super.updateLayerState(t),this.sublayers.forEach(r=>r.updateLayerState(t))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(r=>r.updateDrawState(t))}runIdentify(t){if(!this.canIdentify())return[];this.$iApi.geo.map,t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(s=>typeof s=="number"?this.layerTree?.findChildByIdx(s)?.uid:s));const r=t.sublayerIds?this._sublayers.filter(s=>t.sublayerIds?.includes(s.uid)):this._sublayers.filter(s=>s.canIdentify());if(r.length===0)return[];const i={includeGeometry:t.returnGeometry};let n;return t.geometry.type===br.POINT&&(n=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),r.map(s=>{const o=new cs,a=oa({items:[],loading:o.getPromise(),loaded:!1,uid:s.uid,requestTime:Date.now()});return s.geomType!==br.POLYGON&&n?i.filterGeometry=n:i.filterGeometry=t.geometry,i.filterSql=s.getCombinedSqlFilter(),s.queryFeaturesDiscrete(i).then(l=>{l.forEach(u=>{const c=oa({data:void 0,format:rg.ESRI,loaded:!1,loading:new Promise(p=>{u.graphic.then(d=>{c.data=d.attributes,c.loaded=!0,p()})})});a.items.push(c)}),a.loaded=!0,o.resolveMe()}),a})}noFeaturesErr(){console.error("This method targets features and must be called on a Sublayer."),console.trace()}getAttributes(){return this.noFeaturesErr(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.noFeaturesErr()}clearFeatureCache(){this.noFeaturesErr()}getTabularAttributes(){return this.noFeaturesErr(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return this.noFeaturesErr(),Promise.resolve(new Ip(new Lb))}getIcon(t){return this.noFeaturesErr(),Promise.resolve("")}getSqlFilter(t){return this.noFeaturesErr(),""}applySqlFilter(t=[]){this.noFeaturesErr()}getFilterOIDs(t=[],r=void 0){return this.noFeaturesErr(),Promise.resolve(void 0)}}class znt extends s${tooltipField;constructor(t,r,i,n=0){if(super(t,r),this.layerType=Cr.SUBLAYER,this.layerFormat=rc.MAPIMAGE,this.isSublayer=!0,this.layerIdx=n,this.parentLayer=i,this.dataFormat=Ua.ESRI_FEATURE,this.tooltipField="",this.hovertips=!1,!i.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(i),t.initialFilteredQuery&&(this.filter.setSql(Nf.INITIAL,t.initialFilteredQuery),this.applySqlFilter())}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=vs(t.esriLayer.allSublayers.find(r=>r.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=ka.INITIATED}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}get layerExists(){return!!(this.parentLayer?.esriLayer&&this.esriSubLayer)}get visibility(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),!1):this.esriSubLayer.visible}set visibility(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.esriSubLayer.visible=t}get opacity(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.esriSubLayer.opacity}set opacity(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get mouseTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.mouseTolerance}set mouseTolerance(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.mouseTolerance=t}get touchTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.touchTolerance}set touchTolerance(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.touchTolerance=t}applySqlFilter(t=[]){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=r}}class Gnt extends XS{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=Cr.OSM,this.layerFormat=rc.OSM,this.dataFormat=Ua.OSM_TILE,this.supportsFeatures=!1,this.hovertips=!1}async onInitiate(){this.esriLayer=vs(new J9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),i={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:r.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(i),t}}class qnt extends XS{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.hovertips=!1,this.layerType=Cr.TILE,this.layerFormat=rc.TILE,this.dataFormat=Ua.ESRI_TILE}async onInitiate(){this.esriLayer=vs(new Z9(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(i=>{this.legend=i});return t.push(r),t}}class Hnt extends XS{sublayerNames;mimeType;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.hovertips=!1,this.layerType=Cr.WMS,this.layerFormat=rc.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=Ua.OGC_RASTER,this.identifyMode=Fn.GEOMETRIC}async onInitiate(){this.esriLayer=vs(new Jte(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),i=t.sublayers;this.sublayerNames=i.map(s=>s.id||"error_no_wms_id");const n=i.map(s=>s.currentStyle).join();return r.customParameters={styles:n},t.url.indexOf("/geomet")!==-1&&(r.customParameters.layers=i[0].id),r}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=i=>{let n=!1;return i.forEach(s=>{this.sublayerNames.indexOf(s.name)>-1||s.sublayers&&s.sublayers.length>0&&r(s.sublayers)?n=!0:s.visible=!1}),n};return this.esriLayer?r(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),t}canIdentify(){return super.canIdentify()}runIdentify(t){if(t.geometry.type!==br.POINT)throw new Error("a point must be used for WMS Identify");if(this.$iApi.geo.map,!this.canIdentify())return[];const r=new cs,i=oa({items:[],loading:r.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(n=>{if(n){const s=oa({data:n,format:rg.UNKNOWN,loaded:!0,loading:Promise.resolve()});typeof n!="string"?(s.format=rg.JSON,i.items.push(s)):n.indexOf("Search returned no results")===-1&&n!==""&&(s.format=rg.TEXT,i.items.push(s))}i.loaded=!0,r.resolveMe()}),[i]}setCustomParameter(t,r,i=!0){this.esriLayer?(this.esriLayer.customLayerParameters[t]=r,i&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,r,i){const n=this.$iApi.geo.map,s=this.esriLayer;if(!n.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!s)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=n.getExtent(),u=s.spatialReferences,c=t.join(","),p=n.esriView.toScreen(r.toESRI()),d=Math.floor(p.x),m=Math.floor(p.y),b={"application/json":"json","text/html":"text","text/plain":"text"}[i]||"text",v=n.getSR();v.wkid?o=v.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(v.latestWkid&&u.indexOf(v.latestWkid)>-1?o=v.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),s.version==="1.3"||s.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:d,J:m,STYLES:"",FORMAT:s.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:d,Y:m},a.hasOwnProperty("BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const _={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:s.version,WIDTH:n.getPixelWidth(),HEIGHT:n.getPixelHeight(),QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:i},E=s.customLayerParameters;return E&&Object.keys(E).forEach(I=>{I.toLowerCase()!=="styles"&&(_[I]=E[I])}),Object.keys(_).forEach(I=>a[I]=_[I]),Mt(s.url.split("?")[0],{query:a,responseType:b})}getLegendUrls(t){if(!this.esriLayer)return this.noLayerErr(),[];const r=new Map;this.esriLayer.allSublayers.forEach(n=>{n.visible&&(n.legendUrl&&this.origRampConfig.sublayers?.forEach(s=>{if(s.id&&s.currentStyle&&s.id===n.name){const o=new rT(n.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==s.currentStyle&&(n.legendUrl=o.updateQuery({STYLE:s.currentStyle}))}}),r.set(n.name,n.legendUrl))});const i=t.map(n=>n.styleLegends&&n.currentStyle?n.styleLegends.find(s=>s.name===n.currentStyle).url:void 0);return i.forEach((n,s)=>{n||(i[s]=r.get(t[s].id))}),i}getWMSLayerTitle(t){if(!this.esriLayer)return"";let r;return this.esriLayer.allSublayers.some(i=>{if(i.name===t)return r=i.title,!0}),r||""}loadSymbology(){const t=this.config.sublayers,r=this.getLegendUrls(t.map(i=>({id:i.id,styleLegends:i.styleLegends,currentStyle:i.currentStyle}))).map((i,n)=>{const s=t[n].name||this.getWMSLayerTitle(t[n].id)||t[n].id,o={uid:this.$iApi.geo.shared.generateUUID(),label:s,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(i).then(a=>{o.svgcode=a.svgcode,o.imgHeight=a.imgHeight,o.imgWidth=a.imgWidth})};return o});this.legend=r}}class Wnt extends o${constructor(t,r){super(t,r),this.layerType=Cr.WFS}async onInitiate(){const t=new rT(this.config.url),{startindex:r,limit:i}=t.queryMap;this.sourceGeoJson=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(r)||0,parseInt(i)||1e3,void 0,this.config.xyInAttribs),await super.onInitiate()}}class Jnt extends Bn{constructor(t){super(t)}oidIndexer(t,r){t.features.forEach((i,n)=>{t.oidIndex[i[r]]=n})}async arcGisBatchLoad(t,r){if(r.loadAbortFlag)return[];const i={query:{where:`${t.oidField}>${t.maxId}`,outFields:t.attribs,returnGeometry:"false",f:"json"}},[n,s]=await qg(Mt(t.serviceUrl+"/query",i));if(!s)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!s.data||!s.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));const o=s.data.features,a=o.length;if(a>0){r.loadedCount+=a;let l;if(t.supportsLimit?l=s.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=a),l=a>=t.batchSize),l){t.maxId=o[a-1].attributes[t.oidField];const u=await this.arcGisBatchLoad(t,r);return r.loadAbortFlag?[]:o.concat(u)}else return r.loadAbortFlag?[]:o}else return[]}async loadArcGisServerAttributes(t,r){t.maxId=-1,t.batchSize=-1;const n={features:(await this.arcGisBatchLoad(t,r)).map(s=>s.attributes),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,n}async loadGraphicsAttributes(t,r){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const n={features:t.sourceGraphics.map(s=>Bt(s).attributes).toArray(),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,r.loadedCount=n.features.length,n}async loadSingleFeature(t){const r={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(r.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(r.query.outSR=t.mapSR);const[i,n]=await qg(Mt(t.serviceUrl+"/query",r));if(!n)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,i),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!n.data||!n.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const s=n.data.features;if(s.length>0){const o=s[0];let a;if(t.includeGeometry){o.geometry.spatialReference=n.data.spatialReference;const l=Hu(o.geometry);a=this.$iApi.geo.geom.geomEsriToRamp(l)}else a=new Lb;return new Ip(a,"",o.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}}class sZ{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class qhe extends Bn{aac;loadPromise;details;tabularAttributesCache;constructor(t,r){super(t),this.aac=new sZ,this.details=r}updateFieldList(t){this.details.attribs=t}getAttribs(){return this.loadPromise||(this.aac=new sZ,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class Znt extends qhe{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class Knt extends qhe{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class Hhe{attribs;geoms;isPoint;constructor(t){this.attribs={},this.geoms={},this.isPoint=t==="point"}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,r){this.attribs[t]=r}getGeom(t,r=void 0){return this.getGeomStore(r)[t]}setGeom(t,r,i=void 0){const n=this.getGeomStore(i);n[t]=r}clearAll(){this.attribs={},this.geoms={}}}class uj{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,r,i=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=i,this.type=UT.Unknown}makeSearchParams(t){return t}searchRenderer(t){const r=this.makeSearchParams(t),i=this.symbolUnits.find(s=>s.match(r));if(i)return i;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${r}`);const n=new a$(this);return n.svgCode="",n}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}rendererToLegend(){throw new Error("rendererToLegend not implemented in subclass")}getFieldDelimiter(t,r){let i="'";if(!r||r.length===0)return i;const n=r.find(s=>s.name===t);return n&&n.type&&n.type!=="string"&&(i=""),i}cleanFieldName(t,r){if(!t)return t;let i=r.find(n=>n.name===t);if(i)return t;{const n=t.toLowerCase();return i=r.find(s=>s.name.toLowerCase()===n),i?i.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(r=>r.definitionClause).join(" OR ")}))`}}class a${isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new Ul}match(t){return!0}}class Ynt extends uj{constructor(t,r){super(t,r),this.type=UT.Simple;const i=new a$(this);i.label=t.label||"",i.symbol=t.symbol,i.definitionClause="1=1",this.symbolUnits.push(i)}}class Qnt extends uj{delim;keyFields;constructor(t,r,i=!1){super(t,r,i),this.type=UT.Unique,this.delim=t.fieldDelimiter||", ";const n=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,r));const s=this.keyFields.map(o=>this.getFieldDelimiter(o,r));if(t.uniqueValueInfos.forEach(o=>{const a=new oZ(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((c,p)=>`${c} = ${s[p]}${n(l[p])}${s[p]}`).join(" AND ");a.definitionClause=`(${u})`}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new oZ(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(r=>{let i=t[r]===null?"":t[r];return typeof i!="string"&&(i=i.toString()),i}).join(this.delim)}}class oZ extends a${matchValue;constructor(t,r){super(t),typeof r=="number"?this.matchValue=r.toString():this.matchValue=r}match(t){return this.matchValue===t}}class Xnt extends uj{valField;constructor(t,r,i=!1){if(super(t,r,i),this.valField=this.cleanFieldName(t.field,r),t.classBreakInfos.forEach(n=>{const s=new aZ(this,n.minValue,n.maxValue);s.label=n.label||"",s.symbol=n.symbol,this.falseRenderer||(s.definitionClause=`(${this.valField} > ${n.minValue} AND ${this.valField} <= ${n.maxValue})`),this.symbolUnits.push(s)}),t.defaultSymbol){const n=new aZ(this,0,0);n.isDefault=!0,n.label=t.defaultLabel||"",n.symbol=t.defaultSymbol,n.definitionClause=this.makeElseClause(),this.defaultUnit=n}}makeSearchParams(t){return parseFloat(t[this.valField])}}class aZ extends a${minValue;maxValue;constructor(t,r,i){super(t),this.minValue=r,this.maxValue=i}match(t){return this.minValue===this.maxValue?this.maxValue===t:this.minValue<t&&this.maxValue>=t}}var Whe={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/(function(e,t){(function(r,i){e.exports=r.document?i(r,r.document):function(n){return i(n,n.document)}})(typeof window<"u"?window:Aa,function(r,i){var n=typeof this<"u"?this:r,s=n.SVG=function(y){if(s.supported)return y=new s.Doc(y),s.parser.draw||s.prepare(),y};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.com/svgjs",s.supported=function(){return!!i.createElementNS&&!!i.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(y){return"Svgjs"+v(y)+s.did++},s.create=function(y){var C=i.createElementNS(this.ns,y);return C.setAttribute("id",this.eid(y)),C},s.extend=function(){var y,C,L,F;for(y=[].slice.call(arguments),C=y.pop(),F=y.length-1;F>=0;F--)if(y[F])for(L in C)y[F].prototype[L]=C[L];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(y){var C=typeof y.create=="function"?y.create:function(){this.constructor.call(this,s.create(y.create))};return y.inherit&&(C.prototype=new y.inherit),y.extend&&s.extend(C,y.extend),y.construct&&s.extend(y.parent||s.Container,y.construct),C},s.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var C;return y.nodeName=="svg"?C=y.parentNode instanceof r.SVGElement?new s.Nested:new s.Doc:y.nodeName=="linearGradient"?C=new s.Gradient("linear"):y.nodeName=="radialGradient"?C=new s.Gradient("radial"):s[v(y.nodeName)]?C=new s[v(y.nodeName)]:C=new s.Element(y),C.type=y.nodeName,C.node=y,y.instance=C,C instanceof s.Doc&&C.namespace().defs(),C.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),C},s.prepare=function(){var y=i.getElementsByTagName("body")[0],C=(y?new s.Doc(y):s.adopt(i.documentElement).nested()).size(2,0);s.parser={body:y||i.documentElement,draw:C.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:C.polyline().node,path:C.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},i.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(y,C){var L,F=y.length,ae=[];for(L=0;L<F;L++)ae.push(C(y[L]));return ae},filter:function(y,C){var L,F=y.length,ae=[];for(L=0;L<F;L++)C(y[L])&&ae.push(y[L]);return ae},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(C){return C instanceof r.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(y){var C;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?s.regex.isRgb.test(y)?(C=s.regex.rgb.exec(y.replace(s.regex.whitespace,"")),this.r=parseInt(C[1]),this.g=parseInt(C[2]),this.b=parseInt(C[3])):s.regex.isHex.test(y)&&(C=s.regex.hex.exec(_(y)),this.r=parseInt(C[1],16),this.g=parseInt(C[2],16),this.b=parseInt(C[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+E(this.r)+E(this.g)+E(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new s.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new s.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),s.Color.test=function(y){return y+="",s.regex.isHex.test(y)||s.regex.isRgb.test(y)},s.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},s.Color.isColor=function(y){return s.Color.isRgb(y)||s.Color.test(y)},s.Array=function(y,C){y=(y||[]).valueOf(),y.length==0&&C&&(y=C.valueOf()),this.value=this.parse(y)},s.extend(s.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var C=this.value[this.value.length-1],L=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(L);for(;this.value.length<this.destination.length;)this.value.push(C)}return this},settle:function(){for(var y=0,C=this.value.length,L=[];y<C;y++)L.indexOf(this.value[y])==-1&&L.push(this.value[y]);return this.value=L},at:function(y){if(!this.destination)return this;for(var C=0,L=this.value.length,F=[];C<L;C++)F.push(this.value[C]+(this.destination[C]-this.value[C])*y);return new s.Array(F)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(s.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=d(this.value),y}}),s.PointArray=function(y,C){s.Array.call(this,y,C||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray,s.extend(s.PointArray,{toString:function(){for(var y=0,C=this.value.length,L=[];y<C;y++)L.push(this.value[y].join(","));return L.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var C=0,L=this.value.length,F=[];C<L;C++)F.push([this.value[C][0]+(this.destination[C][0]-this.value[C][0])*y,this.value[C][1]+(this.destination[C][1]-this.value[C][1])*y]);return new s.PointArray(F)},parse:function(y){var C=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(ae){return ae.slice()});if(y[0].x!=null)return y.map(function(ae){return[ae.x,ae.y]})}else y=y.trim().split(s.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var L=0,F=y.length;L<F;L=L+2)C.push([y[L],y[L+1]]);return C},move:function(y,C){var L=this.bbox();if(y-=L.x,C-=L.y,!isNaN(y)&&!isNaN(C))for(var F=this.value.length-1;F>=0;F--)this.value[F]=[this.value[F][0]+y,this.value[F][1]+C];return this},size:function(y,C){var L,F=this.bbox();for(L=this.value.length-1;L>=0;L--)F.width&&(this.value[L][0]=(this.value[L][0]-F.x)*y/F.width+F.x),F.height&&(this.value[L][1]=(this.value[L][1]-F.y)*C/F.height+F.y);return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}});for(var o={M:function(y,C,L){return C.x=L.x=y[0],C.y=L.y=y[1],["M",C.x,C.y]},L:function(y,C){return C.x=y[0],C.y=y[1],["L",y[0],y[1]]},H:function(y,C){return C.x=y[0],["H",y[0]]},V:function(y,C){return C.y=y[0],["V",y[0]]},C:function(y,C){return C.x=y[4],C.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,C){return C.x=y[2],C.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,C){return C.x=y[2],C.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,C){return C.x=y[0],C.y=y[1],["T",y[0],y[1]]},Z:function(y,C,L){return C.x=L.x,C.y=L.y,["Z"]},A:function(y,C){return C.x=y[5],C.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(C,L,F){if(y=="H")C[0]=C[0]+L.x;else if(y=="V")C[0]=C[0]+L.y;else if(y=="A")C[5]=C[5]+L.x,C[6]=C[6]+L.y;else for(var ae=0,q=C.length;ae<q;++ae)C[ae]=C[ae]+(ae%2?L.y:L.x);return o[y](C,L,F)}}(a[l].toUpperCase());s.PathArray=function(y,C){s.Array.call(this,y,C||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return D(this.value)},move:function(y,C){var L=this.bbox();if(y-=L.x,C-=L.y,!isNaN(y)&&!isNaN(C))for(var F,ae=this.value.length-1;ae>=0;ae--)F=this.value[ae][0],F=="M"||F=="L"||F=="T"?(this.value[ae][1]+=y,this.value[ae][2]+=C):F=="H"?this.value[ae][1]+=y:F=="V"?this.value[ae][1]+=C:F=="C"||F=="S"||F=="Q"?(this.value[ae][1]+=y,this.value[ae][2]+=C,this.value[ae][3]+=y,this.value[ae][4]+=C,F=="C"&&(this.value[ae][5]+=y,this.value[ae][6]+=C)):F=="A"&&(this.value[ae][6]+=y,this.value[ae][7]+=C);return this},size:function(y,C){var L,F,ae=this.bbox();for(L=this.value.length-1;L>=0;L--)F=this.value[L][0],F=="M"||F=="L"||F=="T"?(this.value[L][1]=(this.value[L][1]-ae.x)*y/ae.width+ae.x,this.value[L][2]=(this.value[L][2]-ae.y)*C/ae.height+ae.y):F=="H"?this.value[L][1]=(this.value[L][1]-ae.x)*y/ae.width+ae.x:F=="V"?this.value[L][1]=(this.value[L][1]-ae.y)*C/ae.height+ae.y:F=="C"||F=="S"||F=="Q"?(this.value[L][1]=(this.value[L][1]-ae.x)*y/ae.width+ae.x,this.value[L][2]=(this.value[L][2]-ae.y)*C/ae.height+ae.y,this.value[L][3]=(this.value[L][3]-ae.x)*y/ae.width+ae.x,this.value[L][4]=(this.value[L][4]-ae.y)*C/ae.height+ae.y,F=="C"&&(this.value[L][5]=(this.value[L][5]-ae.x)*y/ae.width+ae.x,this.value[L][6]=(this.value[L][6]-ae.y)*C/ae.height+ae.y)):F=="A"&&(this.value[L][1]=this.value[L][1]*y/ae.width,this.value[L][2]=this.value[L][2]*C/ae.height,this.value[L][6]=(this.value[L][6]-ae.x)*y/ae.width+ae.x,this.value[L][7]=(this.value[L][7]-ae.y)*C/ae.height+ae.y);return this},equalCommands:function(y){var C,L,F;for(y=new s.PathArray(y),F=this.value.length===y.value.length,C=0,L=this.value.length;F&&C<L;C++)F=this.value[C][0]===y.value[C][0];return F},morph:function(y){return y=new s.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var C=this.value,L=this.destination.value,F=[],ae=new s.PathArray,q,fe,te,ge;for(q=0,fe=C.length;q<fe;q++){for(F[q]=[C[q][0]],te=1,ge=C[q].length;te<ge;te++)F[q][te]=C[q][te]+(L[q][te]-C[q][te])*y;F[q][0]==="A"&&(F[q][4]=+(F[q][4]!=0),F[q][5]=+(F[q][5]!=0))}return ae.value=F,ae},parse:function(y){if(y instanceof s.PathArray)return y.valueOf();var C,F,L={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(s.regex.numbersWithDots,p).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):y=y.reduce(function(ge,ve){return[].concat.call(ge,ve)},[]);var F=[],ae=new s.Point,q=new s.Point,fe=0,te=y.length;do s.regex.isPathLetter.test(y[fe])?(C=y[fe],++fe):C=="M"?C="L":C=="m"&&(C="l"),F.push(o[C].call(null,y.slice(fe,fe=fe+L[C.toUpperCase()]).map(parseFloat),ae,q));while(te>fe);return F},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(y,C){this.value=0,this.unit=C||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(C=y.match(s.regex.numberAndUnit),C&&(this.value=parseFloat(C[1]),C[5]=="%"?this.value/=100:C[5]=="s"&&(this.value*=1e3),this.unit=C[5])):y instanceof s.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new s.Number(y),new s.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new s.Number(y),new s.Number(this-y,this.unit||y.unit)},times:function(y){return y=new s.Number(y),new s.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new s.Number(y),new s.Number(this/y,this.unit||y.unit)},to:function(y){var C=new s.Number(this);return typeof y=="string"&&(C.unit=y),C},morph:function(y){return this.destination=new s.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new s.Number(this.destination).minus(this).times(y).plus(this):this}}}),s.Element=s.invent({create:function(y){this._stroke=s.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,C){return this.x(y).y(C)},center:function(y,C){return this.cx(y).cy(C)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,C){var L=I(this,y,C);return this.width(new s.Number(L.width)).height(new s.Number(L.height))},clone:function(y){this.writeDataToDom();var C=B(this.node.cloneNode(!0));return y?y.add(C):this.after(C),C},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,C){var L=this.bbox();return y>L.x&&C>L.y&&y<L.x+L.width&&C<L.y+L.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(s.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var C=this.classes();C.push(y),this.attr("class",C.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(C){return C!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return s.get(this.attr(y))},parent:function(y){var C=this;if(!C.node.parentNode)return null;if(C=s.adopt(C.node.parentNode),!y)return C;for(;C&&C.node instanceof r.SVGElement;){if(typeof y=="string"?C.matches(y):C instanceof y)return C;if(!C.node.parentNode||C.node.parentNode.nodeName=="#document"||C.node.parentNode.nodeName=="#document-fragment")return null;C=s.adopt(C.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(y){var C=[],L=this;do{if(L=L.parent(y),!L||!L.node)break;C.push(L)}while(L.parent);return C},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var C=i.createElement("svg");if(y&&this instanceof s.Parent){C.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var L=0,F=C.firstChild.childNodes.length;L<F;L++)this.node.appendChild(C.firstChild.firstChild)}else return C.appendChild(y=i.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),C.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),s.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},s.morph=function(y){return function(C,L){return new s.MorphObj(C,L).at(y)}},s.Situation=s.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(y.duration).valueOf(),this.delay=new s.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,C,L){typeof y=="object"&&(C=y.ease,L=y.delay,y=y.duration);var F=new s.Situation({duration:y||1e3,delay:L||0,ease:s.easing[C||"-"]||C});return this.queue(F),this},delay:function(y){var C=new s.Situation({duration:y,delay:0,ease:s.easing["-"]});return this.queue(C)},target:function(y){return y&&y instanceof s.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=r.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){r.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof s.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,C,L,F=this.situation;if(F.init)return this;for(y in F.animations)for(L=this.target()[y](),Array.isArray(L)||(L=[L]),Array.isArray(F.animations[y])||(F.animations[y]=[F.animations[y]]),C=L.length;C--;)F.animations[y][C]instanceof s.Number&&(L[C]=new s.Number(L[C])),F.animations[y][C]=L[C].morph(F.animations[y][C]);for(y in F.attrs)F.attrs[y]=new s.MorphObj(this.target().attr(y),F.attrs[y]);for(y in F.styles)F.styles[y]=new s.MorphObj(this.target().style(y),F.styles[y]);return F.initialTransformation=this.target().matrixify(),F.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,C){var L=this.active;return this.active=!1,C&&this.clearQueue(),y&&this.situation&&(!L&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,C){var L=this.situation.duration/this._speed;return this.absPos=y,C||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*L,this.situation.finish=this.situation.start+L,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,C){var L=this.last();return L.loops=y??!0,L.loop=0,C&&(L.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var C=this.last();return typeof y>"u"?C.reversed=!C.reversed:C.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var C=this.last(),L=function F(ae){ae.detail.situation==C&&(y.call(this,C),this.off("finished.fx",F))};return this.target().on("finished.fx",L),this._callStart()},during:function(y){var C=this.last(),L=function(F){F.detail.situation==C&&y.call(this,F.detail.pos,s.morph(F.detail.pos),F.detail.eased,C)};return this.target().off("during.fx",L).on("during.fx",L),this.after(function(){this.off("during.fx",L)}),this._callStart()},afterAll:function(y){var C=function L(F){y.call(this),this.off("allfinished.fx",L)};return this.target().off("allfinished.fx",C).on("allfinished.fx",C),this._callStart()},duringAll:function(y){var C=function(L){y.call(this,L.detail.pos,s.morph(L.detail.pos),L.detail.eased,L.detail.situation)};return this.target().off("during.fx",C).on("during.fx",C),this.afterAll(function(){this.off("during.fx",C)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,C,L){return this.last()[L||"animations"][y]=C,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var C,L,F;C=Math.max(this.absPos,0),L=Math.floor(C),this.situation.loops===!0||L<this.situation.loops?(this.pos=C-L,F=this.situation.loop,this.situation.loop=L):(this.absPos=this.situation.loops,this.pos=1,F=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-F)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var ae=this.situation.ease(this.pos);for(var q in this.situation.once)q>this.lastPos&&q<=ae&&(this.situation.once[q].call(this.target(),this.pos,ae),delete this.situation.once[q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:ae,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=ae,this):this},eachAt:function(){var y,C,L,F=this,ae=this.target(),q=this.situation;for(y in q.animations)L=[].concat(q.animations[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(F.pos),F.pos):te}),ae[y].apply(ae,L);for(y in q.attrs)L=[y].concat(q.attrs[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(F.pos),F.pos):te}),ae.attr.apply(ae,L);for(y in q.styles)L=[y].concat(q.styles[y]).map(function(te){return typeof te!="string"&&te.at?te.at(q.ease(F.pos),F.pos):te}),ae.style.apply(ae,L);if(q.transforms.length){for(L=q.initialTransformation,y=0,C=q.transforms.length;y<C;y++){var fe=q.transforms[y];if(fe instanceof s.Matrix){fe.relative?L=L.multiply(new s.Matrix().morph(fe).at(q.ease(this.pos))):L=L.morph(fe).at(q.ease(this.pos));continue}fe.relative||fe.undo(L.extract()),L=L.multiply(fe.at(q.ease(this.pos)))}ae.matrix(L)}return this},once:function(y,C,L){var F=this.last();return L||(y=F.ease(y)),F.once[y]=C,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(y,C,L){return(this.fx||(this.fx=new s.FX(this))).animate(y,C,L)},delay:function(y){return(this.fx||(this.fx=new s.FX(this))).delay(y)},stop:function(y,C){return this.fx&&this.fx.stop(y,C),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),s.MorphObj=s.invent({create:function(y,C){if(s.Color.isColor(C))return new s.Color(y).morph(C);if(s.regex.delimiter.test(y))return s.regex.pathLetters.test(y)?new s.PathArray(y).morph(C):new s.Array(y).morph(C);if(s.regex.numberAndUnit.test(C))return new s.Number(y).morph(C);this.value=y,this.destination=C},extend:{at:function(y,C){return C<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(y,C,L){if(typeof y=="object")for(var F in y)this.attr(F,y[F]);else this.add(y,C,"attrs");return this},style:function(y,C){if(typeof y=="object")for(var L in y)this.style(L,y[L]);else this.add(y,C,"styles");return this},x:function(y,C){if(this.target()instanceof s.G)return this.transform({x:y},C),this;var L=new s.Number(y);return L.relative=C,this.add("x",L)},y:function(y,C){if(this.target()instanceof s.G)return this.transform({y},C),this;var L=new s.Number(y);return L.relative=C,this.add("y",L)},cx:function(y){return this.add("cx",new s.Number(y))},cy:function(y){return this.add("cy",new s.Number(y))},move:function(y,C){return this.x(y).y(C)},center:function(y,C){return this.cx(y).cy(C)},size:function(y,C){if(this.target()instanceof s.Text)this.attr("font-size",y);else{var L;(!y||!C)&&(L=this.target().bbox()),y||(y=L.width/L.height*C),C||(C=L.height/L.width*y),this.add("width",new s.Number(y)).add("height",new s.Number(C))}return this},width:function(y){return this.add("width",new s.Number(y))},height:function(y){return this.add("height",new s.Number(y))},plot:function(y,C,L,F){return arguments.length==4?this.plot([y,C,L,F]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new s.Number(y)):this},viewbox:function(y,C,L,F){return this.target()instanceof s.Container&&this.add("viewbox",new s.ViewBox(y,C,L,F)),this},update:function(y){if(this.target()instanceof s.Stop){if(typeof y=="number"||y instanceof s.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),s.Box=s.invent({create:function(y,C,L,F){if(typeof y=="object"&&!(y instanceof s.Element))return s.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=C,this.width=L,this.height=F),G(this)},extend:{merge:function(y){var C=new this.constructor;return C.x=Math.min(this.x,y.x),C.y=Math.min(this.y,y.y),C.width=Math.max(this.x+this.width,y.x+y.width)-C.x,C.height=Math.max(this.y+this.height,y.y+y.height)-C.y,G(C)},transform:function(y){var C=1/0,L=-1/0,F=1/0,ae=-1/0,q,fe=[new s.Point(this.x,this.y),new s.Point(this.x2,this.y),new s.Point(this.x,this.y2),new s.Point(this.x2,this.y2)];return fe.forEach(function(te){te=te.transform(y),C=Math.min(C,te.x),L=Math.max(L,te.x),F=Math.min(F,te.y),ae=Math.max(ae,te.y)}),q=new this.constructor,q.x=C,q.width=L-C,q.y=F,q.height=ae-F,G(q),q}}}),s.BBox=s.invent({create:function(y){if(s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element){var C;try{if(i.documentElement.contains){if(!i.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var L=y.node;L.parentNode;)L=L.parentNode;if(L!=i)throw new Exception("Element not in the dom")}C=y.node.getBBox()}catch{if(y instanceof s.Shape){var F=y.clone(s.parser.draw.instance).show();C=F.node.getBBox(),F.remove()}else C={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}s.Box.call(this,C)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.extend(s.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),s.RBox=s.invent({create:function(y){s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element&&s.Box.call(this,y.node.getBoundingClientRect())},inherit:s.Box,parent:s.Element,extend:{addOffset:function(){return this.x+=r.pageXOffset,this.y+=r.pageYOffset,this}},construct:{rbox:function(y){return y?new s.RBox(this).transform(y.screenCTM().inverse()):new s.RBox(this).addOffset()}}}),s.RBox.prototype.constructor=s.RBox,s.Matrix=s.invent({create:function(y){var C,L=T([1,0,0,1,0,0]);for(y=y instanceof s.Element?y.matrixify():typeof y=="string"?T(y.split(s.regex.delimiter).map(parseFloat)):arguments.length==6?T([].slice.call(arguments)):Array.isArray(y)?T(y):typeof y=="object"?y:L,C=ne.length-1;C>=0;--C)this[ne[C]]=y[ne[C]]!=null?y[ne[C]]:L[ne[C]]},extend:{extract:function(){var y=x(this,0,1),C=x(this,1,0),L=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(L*Math.PI/180)+this.f*Math.sin(L*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(L*Math.PI/180)+this.e*Math.sin(-L*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-L,skewY:180/Math.PI*Math.atan2(C.y,C.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:L,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(y){return this.destination=new s.Matrix(y),this},at:function(y){if(!this.destination)return this;var C=new s.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return C},multiply:function(y){return new s.Matrix(this.native().multiply(M(y).native()))},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(y,C){return new s.Matrix(this.native().translate(y||0,C||0))},scale:function(y,C,L,F){return arguments.length==1?C=y:arguments.length==3&&(F=L,L=C,C=y),this.around(L,F,new s.Matrix(y,0,0,C,0,0))},rotate:function(y,C,L){return y=s.utils.radians(y),this.around(C,L,new s.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,C){return y=="x"?this.scale(-1,1,C,0):y=="y"?this.scale(1,-1,0,C):this.scale(-1,-1,y,C??y)},skew:function(y,C,L,F){return arguments.length==1?C=y:arguments.length==3&&(F=L,L=C,C=y),y=s.utils.radians(y),C=s.utils.radians(C),this.around(L,F,new s.Matrix(1,Math.tan(C),Math.tan(y),1,0,0))},skewX:function(y,C,L){return this.skew(y,0,C,L)},skewY:function(y,C,L){return this.skew(0,y,C,L)},around:function(y,C,L){return this.multiply(new s.Matrix(1,0,0,1,y||0,C||0)).multiply(L).multiply(new s.Matrix(1,0,0,1,-y||0,-C||0))},native:function(){for(var y=s.parser.native.createSVGMatrix(),C=ne.length-1;C>=0;C--)y[ne[C]]=this[ne[C]];return y},toString:function(){return"matrix("+K(this.a)+","+K(this.b)+","+K(this.c)+","+K(this.d)+","+K(this.e)+","+K(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var y=this.rect(1,1),C=y.node.getScreenCTM();return y.remove(),new s.Matrix(C)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(y,C){var L,F={x:0,y:0};L=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:C??y}:F,this.x=L.x,this.y=L.y},extend:{clone:function(){return new s.Point(this)},morph:function(y,C){return this.destination=new s.Point(y,C),this},at:function(y){if(!this.destination)return this;var C=new s.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return C},native:function(){var y=s.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new s.Point(this.native().matrixTransform(y.native()))}}}),s.extend(s.Element,{point:function(y,C){return new s.Point(y,C).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(y,C,L){if(y==null){for(y={},C=this.node.attributes,L=C.length-1;L>=0;L--)y[C[L].nodeName]=s.regex.isNumber.test(C[L].nodeValue)?parseFloat(C[L].nodeValue):C[L].nodeValue;return y}else if(typeof y=="object")for(C in y)this.attr(C,y[C]);else if(C===null)this.node.removeAttribute(y);else{if(C==null)return C=this.node.getAttribute(y),C==null?s.defaults.attrs[y]:s.regex.isNumber.test(C)?parseFloat(C):C;y=="stroke-width"?this.attr("stroke",parseFloat(C)>0?this._stroke:null):y=="stroke"&&(this._stroke=C),(y=="fill"||y=="stroke")&&(s.regex.isImage.test(C)&&(C=this.doc().defs().image(C,0,0)),C instanceof s.Image&&(C=this.doc().defs().pattern(0,0,function(){this.add(C)}))),typeof C=="number"?C=new s.Number(C):s.Color.isColor(C)?C=new s.Color(C):Array.isArray(C)&&(C=new s.Array(C)),y=="leading"?this.leading&&this.leading(C):typeof L=="string"?this.node.setAttributeNS(L,y,C.toString()):this.node.setAttribute(y,C.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,C)}return this}}),s.extend(s.Element,{transform:function(y,C){var L=this,F,ae;if(typeof y!="object")return F=new s.Matrix(L).extract(),typeof y=="string"?F[y]:F;if(F=new s.Matrix(L),C=!!C||!!y.relative,y.a!=null)F=C?F.multiply(new s.Matrix(y)):new s.Matrix(y);else if(y.rotation!=null)k(y,L),F=C?F.rotate(y.rotation,y.cx,y.cy):F.rotate(y.rotation-F.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if(k(y,L),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!C){var q=F.extract();y.scaleX=y.scaleX*1/q.scaleX,y.scaleY=y.scaleY*1/q.scaleY}F=F.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if(k(y,L),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!C){var q=F.extract();F=F.multiply(new s.Matrix().skew(q.skewX,q.skewY,y.cx,y.cy).inverse())}F=F.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?L.bbox()["c"+y.flip]:y.offset:y.offset==null?(ae=L.bbox(),y.flip=ae.cx,y.offset=ae.cy):y.flip=y.offset,F=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(C?F=F.translate(y.x,y.y):(y.x!=null&&(F.e=y.x),y.y!=null&&(F.f=y.y)));return this.attr("transform",F)}}),s.extend(s.FX,{transform:function(y,C){var L=this.target(),F,ae;return typeof y!="object"?(F=new s.Matrix(L).extract(),typeof y=="string"?F[y]:F):(C=!!C||!!y.relative,y.a!=null?F=new s.Matrix(y):y.rotation!=null?(k(y,L),F=new s.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?(k(y,L),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,F=new s.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?(k(y,L),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,F=new s.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?L.bbox()["c"+y.flip]:y.offset:y.offset==null?(ae=L.bbox(),y.flip=ae.cx,y.offset=ae.cy):y.flip=y.offset,F=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(F=new s.Translate(y.x,y.y)),F?(F.relative=C,this.last().transforms.push(F),this._callStart()):this)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(C){var L=C.trim().split("(");return[L[0],L[1].split(s.regex.delimiter).map(function(F){return parseFloat(F)})]}).reduce(function(C,L){return L[0]=="matrix"?C.multiply(T(L[1])):C[L[0]].apply(C,L[1])},new s.Matrix);return y},toParent:function(y){if(this==y)return this;var C=this.screenCTM(),L=y.screenCTM().inverse();return this.addTo(y).untransform().transform(L.multiply(C)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(y,C){if(arguments.length>1&&typeof C!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var L=0,F=this.arguments.length;L<F;++L)this[this.arguments[L]]=y[L];else if(typeof y=="object")for(var L=0,F=this.arguments.length;L<F;++L)this[this.arguments[L]]=y[this.arguments[L]];this.inversed=!1,C===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var C=[],L=0,F=this.arguments.length;L<F;++L)C.push(this[this.arguments[L]]);var ae=this._undo||new s.Matrix;return ae=new s.Matrix().morph(s.Matrix.prototype[this.method].apply(ae,C)).at(y),this.inversed?ae.inverse():ae},undo:function(y){for(var C=0,L=this.arguments.length;C<L;++C)y[this.arguments[C]]=typeof this[this.arguments[C]]>"u"?0:y[this.arguments[C]];return y.cx=this.cx,y.cy=this.cy,this._undo=new s[v(this.method)](y,!0).at(1),this}}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,C){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.Rotate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,C){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var C=new s.Matrix().rotate(new s.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?C.inverse():C},undo:function(y){return this._undo=y,this}}}),s.Scale=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,C){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),s.Skew=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,C){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),s.extend(s.Element,{style:function(y,C){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(C in y)this.style(C,y[C]);else if(s.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function(L){return!!L}).map(function(L){return L.split(/\s*:\s*/)});C=y.pop();)this.style(C[0],C[1]);else return this.node.style[b(y)];else this.node.style[b(y)]=C===null||s.regex.isBlank.test(C)?"":C;return this}}),s.Parent=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(y){return s.adopt(y)})},add:function(y,C){return C==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[C]&&this.node.insertBefore(y.node,this.node.childNodes[C]),this},put:function(y,C){return this.add(y,C),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return s.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,C){var L,F,ae=this.children();for(L=0,F=ae.length;L<F;L++)ae[L]instanceof s.Element&&y.apply(ae[L],[L,ae]),C&&ae[L]instanceof s.Container&&ae[L].each(y,C);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(y,C){return C===0||this instanceof s.Defs||this.node==s.parser.draw?this:(y=y||(this instanceof s.Doc?this:this.parent(s.Parent)),C=C||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(y,C-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,C){return this.ungroup(y,C)}}),s.Container=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Parent}),s.ViewBox=s.invent({create:function(y){var C=[0,0,0,0],L,F,ae,q,fe,te,ge,ve=1,Ee=1,Ie=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof s.Element){for(te=y,ge=y,fe=(y.attr("viewBox")||"").match(Ie),ae=new s.Number(y.width()),q=new s.Number(y.height());ae.unit=="%";)ve*=ae.value,ae=new s.Number(te instanceof s.Doc?te.parent().offsetWidth:te.parent().width()),te=te.parent();for(;q.unit=="%";)Ee*=q.value,q=new s.Number(ge instanceof s.Doc?ge.parent().offsetHeight:ge.parent().height()),ge=ge.parent();this.x=0,this.y=0,this.width=ae*ve,this.height=q*Ee,this.zoom=1,fe&&(L=parseFloat(fe[0]),F=parseFloat(fe[1]),ae=parseFloat(fe[2]),q=parseFloat(fe[3]),this.zoom=this.width/this.height>ae/q?this.height/q:this.width/ae,this.x=L,this.y=F,this.width=ae,this.height=q)}else y=typeof y=="string"?y.match(Ie).map(function(ke){return parseFloat(ke)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):C,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,C,L,F){return this.destination=new s.ViewBox(y,C,L,F),this},at:function(y){return this.destination?new s.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:s.Container,construct:{viewbox:function(y,C,L,F){return arguments.length==0?new s.ViewBox(this):this.attr("viewBox",new s.ViewBox(y,C,L,F))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){s.Element.prototype[y]=function(C){return C==null?s.off(this,y):s.on(this,y,C),this}}),s.listenerId=0,s.on=function(y,C,L,F,ae){var q=L.bind(F||y),fe=y instanceof s.Element?y.node:y;fe.instance=fe.instance||{_events:{}};var te=fe.instance._events;L._svgjsListenerId||(L._svgjsListenerId=++s.listenerId),C.split(s.regex.delimiter).forEach(function(ge){var ve=ge.split(".")[0],Ee=ge.split(".")[1]||"*";te[ve]=te[ve]||{},te[ve][Ee]=te[ve][Ee]||{},te[ve][Ee][L._svgjsListenerId]=q,fe.addEventListener(ve,q,ae||!1)})},s.off=function(y,C,L,F){var ae=y instanceof s.Element?y.node:y;if(!!ae.instance&&!(typeof L=="function"&&(L=L._svgjsListenerId,!L))){var q=ae.instance._events;(C||"").split(s.regex.delimiter).forEach(function(fe){var te=fe&&fe.split(".")[0],ge=fe&&fe.split(".")[1],ve,Ee;if(L)q[te]&&q[te][ge||"*"]&&(ae.removeEventListener(te,q[te][ge||"*"][L],F||!1),delete q[te][ge||"*"][L]);else if(te&&ge){if(q[te]&&q[te][ge]){for(Ee in q[te][ge])s.off(ae,[te,ge].join("."),Ee);delete q[te][ge]}}else if(ge)for(fe in q)for(ve in q[fe])ge===ve&&s.off(ae,[fe,ge].join("."));else if(te){if(q[te]){for(ve in q[te])s.off(ae,[te,ve].join("."));delete q[te]}}else{for(fe in q)s.off(ae,fe);ae.instance._events={}}})}},s.extend(s.Element,{on:function(y,C,L,F){return s.on(this,y,C,L,F),this},off:function(y,C){return s.off(this.node,y,C),this},fire:function(y,C){return y instanceof r.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new s.CustomEvent(y,{detail:C,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),C=this.transform();return y.x+=C.x,y.x2+=C.x,y.cx+=C.x,y.y+=C.y,y.y2+=C.y,y.cy+=C.y,y}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(y){y&&(y=typeof y=="string"?i.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,s.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(y):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw.parentNode||this.node.appendChild(s.parser.draw),this},clone:function(y){this.writeDataToDom();var C=this.node,L=B(C.cloneNode(!0));return y?(y.node||y).appendChild(L.node):C.parentNode.insertBefore(L.node,C.nextSibling),L}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,C=this.parent();return C.removeElement(this).add(this,y),C instanceof s.Doc&&C.node.appendChild(C.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof s.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var C=this.position();return this.parent().add(y,C),this},after:function(y){y.remove();var C=this.position();return this.parent().add(y,C+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],s.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(y){return this.masker=y instanceof s.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(y){return this.clipper=y instanceof s.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(y){this.constructor.call(this,s.create(y+"Gradient")),this.type=y},inherit:s.Container,extend:{at:function(y,C,L){return this.put(new s.Stop).update(y,C,L)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,C,L){return y=="transform"&&(y="gradientTransform"),s.Container.prototype.attr.call(this,y,C,L)}},construct:{gradient:function(y,C){return this.defs().gradient(y,C)}}}),s.extend(s.Gradient,s.FX,{from:function(y,C){return(this._target||this).type=="radial"?this.attr({fx:new s.Number(y),fy:new s.Number(C)}):this.attr({x1:new s.Number(y),y1:new s.Number(C)})},to:function(y,C){return(this._target||this).type=="radial"?this.attr({cx:new s.Number(y),cy:new s.Number(C)}):this.attr({x2:new s.Number(y),y2:new s.Number(C)})}}),s.extend(s.Defs,{gradient:function(y,C){return this.put(new s.Gradient(y)).update(C)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof s.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new s.Number(y.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,C,L){return y=="transform"&&(y="patternTransform"),s.Container.prototype.attr.call(this,y,C,L)}},construct:{pattern:function(y,C,L){return this.defs().pattern(y,C,L)}}}),s.extend(s.Defs,{pattern:function(y,C,L){return this.put(new s.Pattern).update(L).attr({x:0,y:0,width:y,height:C,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element}),s.Bare=s.invent({create:function(y,C){if(this.constructor.call(this,s.create(y)),C)for(var L in C.prototype)typeof C.prototype[L]=="function"&&(this[L]=C.prototype[L])},inherit:s.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(i.createTextNode(y)),this}}}),s.extend(s.Parent,{element:function(y,C){return this.put(new s.Bare(y,C))}}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(y,C){return this.attr("href",(C||"")+"#"+y,s.xlink)}},construct:{use:function(y,C){return this.put(new s.Use).element(y,C)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(y,C){return this.put(new s.Rect).size(y,C)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(y){return this.put(new s.Circle).rx(new s.Number(y).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(y,C){return this.put(new s.Ellipse).size(y,C).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),s.extend(s.Circle,s.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new s.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new s.Number(y).divide(2))},size:function(y,C){var L=I(this,y,C);return this.rx(new s.Number(L.width).divide(2)).ry(new s.Number(L.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,C,L,F){return y==null?this.array():(typeof C<"u"?y={x1:y,y1:C,x2:L,y2:F}:y=new s.PointArray(y).toLine(),this.attr(y))},move:function(y,C){return this.attr(this.array().move(y,C).toLine())},size:function(y,C){var L=I(this,y,C);return this.attr(this.array().size(L.width,L.height).toLine())}},construct:{line:function(y,C,L,F){return s.Line.prototype.plot.apply(this.put(new s.Line),y!=null?[y,C,L,F]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(y){return this.put(new s.Polyline).plot(y||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(y){return this.put(new s.Polygon).plot(y||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new s.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,C){return this.attr("points",this.array().move(y,C))},size:function(y,C){var L=I(this,y,C);return this.attr("points",this.array().size(L.width,L.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var C=this.bbox();return y==null?C.width:this.size(y,C.height)},height:function(y){var C=this.bbox();return y==null?C.height:this.size(C.width,y)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new s.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,C){return this.attr("d",this.array().move(y,C))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,C){var L=I(this,y,C);return this.attr("d",this.array().size(L.width,L.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new s.Path).plot(y||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(y){if(!y)return this;var C=this,L=new r.Image;return s.on(L,"load",function(){s.off(L);var F=C.parent(s.Pattern);F!==null&&(C.width()==0&&C.height()==0&&C.size(L.width,L.height),F&&F.width()==0&&F.height()==0&&F.size(C.width(),C.height()),typeof C._loaded=="function"&&C._loaded.call(C,{width:L.width,height:L.height,ratio:L.width/L.height,url:y}))}),s.on(L,"error",function(F){s.off(L),typeof C._error=="function"&&C._error.call(C,F)}),this.attr("href",L.src=this.src=y,s.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,C,L){return this.put(new s.Image).load(y).size(C||0,L||C||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var C=this.attr("y"),L=typeof C=="number"?C-this.bbox().y:0;return y==null?typeof C=="number"?C-L:C:this.attr("y",typeof y.valueOf()=="number"?y+L:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",C=this.node.childNodes,L=0,F=C.length;L<F;++L)L!=0&&C[L].nodeType!=3&&s.adopt(C[L]).dom.newLined==!0&&(y+=`
`),y+=C[L].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var L=0,ae=y.length;L<ae;L++)this.tspan(y[L]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new s.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,C=s.utils.map(s.utils.filterSVGElements(y.childNodes),function(L){return s.adopt(L)});return new s.Set(C)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var C=this,L=0,F=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(C.textPath()||this.attr("x",C.attr("x")),this.text()==`
`?L+=F:(this.attr("dy",F+L),L=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new s.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new s.Text).text(y)},plain:function(y){return this.put(new s.Text).plain(y)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(s.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(i.createTextNode(y)),this},tspan:function(y){var C=(this.textPath&&this.textPath()||this).node,L=new s.Tspan;return this._build===!1&&this.clear(),C.appendChild(L.node),L.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,path:function(y){for(var C=new s.TextPath,L=this.doc().defs().path(y);this.node.hasChildNodes();)C.node.appendChild(this.node.firstChild);return this.node.appendChild(C.node),C.attr("href","#"+L,s.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var C=this.track(),L=null;return C&&(L=C.plot(y)),y==null?L:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(y){return this.attr("href",y,s.xlink)},show:function(y){return this.attr("show",y,s.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new s.A).to(y)}}}),s.extend(s.Element,{linkTo:function(y){var C=new s.A;return typeof y=="function"?y.call(C,C):C.to(y),this.parent().put(C).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,C){return this.attr("refX",y).attr("refY",C)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,C,L){return this.defs().marker(y,C,L)}}}),s.extend(s.Defs,{marker:function(y,C,L){return this.put(new s.Marker).size(y,C).ref(y/2,C/2).viewbox(0,0,y,C).attr("orient","auto").update(L)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(y,C,L,F){var ae=["marker"];return y!="all"&&ae.push(y),ae=ae.join("-"),y=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(C,L,F),this.attr(ae,y)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,C){return C=="color"?y:y+"-"+C}};["fill","stroke"].forEach(function(y){var C,L={};L[y]=function(F){if(typeof F>"u")return this;if(typeof F=="string"||s.Color.isRgb(F)||F&&typeof F.fill=="function")this.attr(y,F);else for(C=c[y].length-1;C>=0;C--)F[c[y][C]]!=null&&this.attr(c.prefix(y,c[y][C]),F[c[y][C]]);return this},s.extend(s.Element,s.FX,L)}),s.extend(s.Element,s.FX,{rotate:function(y,C,L){return this.transform({rotation:y,cx:C,cy:L})},skew:function(y,C,L,F){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:C,cy:L}):this.transform({skewX:y,skewY:C,cx:L,cy:F})},scale:function(y,C,L,F){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:C,cy:L}):this.transform({scaleX:y,scaleY:C,cx:L,cy:F})},translate:function(y,C){return this.transform({x:y,y:C})},flip:function(y,C){return C=typeof y=="number"?y:C,this.transform({flip:y||"both",offset:C})},matrix:function(y){return this.attr("transform",new s.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new s.Number(y).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(y){return this.y(new s.Number(y).plus(this instanceof s.FX?0:this.y()),!0)},dmove:function(y,C){return this.dx(y).dy(C)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(y,C){var L=(this._target||this).type;return L=="radial"||L=="circle"?this.attr("r",new s.Number(y)):this.rx(y).ry(C??y)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),s.extend(s.Parent,s.Text,s.Tspan,s.FX,{font:function(y,C){if(typeof y=="object")for(C in y)this.font(C,y[C]);return y=="leading"?this.leading(C):y=="anchor"?this.attr("text-anchor",C):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,C):this.attr(y,C)}}),s.Set=s.invent({create:function(y){y instanceof s.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,C,L=[].slice.call(arguments);for(y=0,C=L.length;y<C;y++)this.members.push(L[y]);return this},remove:function(y){var C=this.index(y);return C>-1&&this.members.splice(C,1),this},each:function(y){for(var C=0,L=this.members.length;C<L;C++)y.apply(this.members[C],[C,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new s.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new s.Set(y)}}}),s.FX.Set=s.invent({create:function(y){this.set=y}}),s.Set.inherit=function(){var y,C=[];for(var y in s.Shape.prototype)typeof s.Shape.prototype[y]=="function"&&typeof s.Set.prototype[y]!="function"&&C.push(y);C.forEach(function(L){s.Set.prototype[L]=function(){for(var F=0,ae=this.members.length;F<ae;F++)this.members[F]&&typeof this.members[F][L]=="function"&&this.members[F][L].apply(this.members[F],arguments);return L=="animate"?this.fx||(this.fx=new s.FX.Set(this)):this}}),C=[];for(var y in s.FX.prototype)typeof s.FX.prototype[y]=="function"&&typeof s.FX.Set.prototype[y]!="function"&&C.push(y);C.forEach(function(L){s.FX.Set.prototype[L]=function(){for(var F=0,ae=this.set.members.length;F<ae;F++)this.set.members[F].fx[L].apply(this.set.members[F].fx,arguments);return this}})},s.extend(s.Element,{data:function(y,C,L){if(typeof y=="object")for(C in y)this.data(C,y[C]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,C===null?null:L===!0||typeof C=="string"||typeof C=="number"?C:JSON.stringify(C));return this}}),s.extend(s.Element,{remember:function(y,C){if(typeof arguments[0]=="object")for(var C in y)this.remember(C,y[C]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=C}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(y){var C=i.getElementById(W(y)||y);return s.adopt(C)},s.select=function(y,C){return new s.Set(s.utils.map((C||i).querySelectorAll(y),function(L){return s.adopt(L)}))},s.extend(s.Parent,{select:function(y){return s.select(y,this.node)}});function p(y,C,L,F){return L+F.replace(s.regex.dots," .")}function d(y){for(var C=y.slice(0),L=C.length;L--;)Array.isArray(C[L])&&(C[L]=d(C[L]));return C}function m(y,C){return y instanceof C}function g(y,C){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,C)}function b(y){return y.toLowerCase().replace(/-(.)/g,function(C,L){return L.toUpperCase()})}function v(y){return y.charAt(0).toUpperCase()+y.slice(1)}function _(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function E(y){var C=y.toString(16);return C.length==1?"0"+C:C}function I(y,C,L){if(C==null||L==null){var F=y.bbox();C==null?C=F.width/F.height*L:L==null&&(L=F.height/F.width*C)}return{width:C,height:L}}function x(y,C,L){return{x:C*y.a+L*y.c+0,y:C*y.b+L*y.d+0}}function T(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function M(y){return y instanceof s.Matrix||(y=new s.Matrix(y)),y}function k(y,C){y.cx=y.cx==null?C.bbox().cx:y.cx,y.cy=y.cy==null?C.bbox().cy:y.cy}function D(y){for(var C=0,L=y.length,F="";C<L;C++)F+=y[C][0],y[C][1]!=null&&(F+=y[C][1],y[C][2]!=null&&(F+=" ",F+=y[C][2],y[C][3]!=null&&(F+=" ",F+=y[C][3],F+=" ",F+=y[C][4],y[C][5]!=null&&(F+=" ",F+=y[C][5],F+=" ",F+=y[C][6],y[C][7]!=null&&(F+=" ",F+=y[C][7])))));return F+" "}function B(y){for(var C=y.childNodes.length-1;C>=0;C--)y.childNodes[C]instanceof r.SVGElement&&B(y.childNodes[C]);return s.adopt(y).id(s.eid(y.nodeName))}function G(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function W(y){var C=(y||"").toString().match(s.regex.reference);if(C)return C[1]}function K(y){return Math.abs(y)>1e-37?y:0}var ne="abcdef".split("");if(typeof r.CustomEvent!="function"){var ye=function(y,C){C=C||{bubbles:!1,cancelable:!1,detail:void 0};var L=i.createEvent("CustomEvent");return L.initCustomEvent(y,C.bubbles,C.cancelable,C.detail),L};ye.prototype=r.Event.prototype,s.CustomEvent=ye}else s.CustomEvent=r.CustomEvent;return function(y){for(var C=0,L=["moz","webkit"],F=0;F<L.length&&!r.requestAnimationFrame;++F)y.requestAnimationFrame=y[L[F]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[L[F]+"CancelAnimationFrame"]||y[L[F]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(ae){var q=new Date().getTime(),fe=Math.max(0,16-(q-C)),te=y.setTimeout(function(){ae(q+fe)},fe);return C=q+fe,te},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(r),s})})(Whe);var j0=Whe.exports;class est extends Bn{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,r){return r.getGraphicIcon(t)}getGraphicSymbol(t,r){return r.getGraphicSymbol(t)}makeRenderer(t,r,i=!1){switch(t.type){case this.SIMPLE:return new Ynt(t,r);case this.CLASS_BREAKS:return new Xnt(t,r,i);case this.UNIQUE_VALUE:return new Qnt(t,r,i);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const r=j0(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),i={svgcode:"",imgHeight:"",imgWidth:""};if(t){const n=await this.renderSymbologyImage(t);if(n){i.svgcode=n;const s=document.createElement("span");s.innerHTML=n;const o=s.firstElementChild?.lastElementChild;i.imgHeight=o?.getAttribute("height")||"",i.imgWidth=o?.getAttribute("width")||""}else i.svgcode=r.svg()}else i.svgcode=r.svg();return i}listToSymbology(t,r){return r.map(({text:n,image:s})=>{const o={name:n,image:s,svgcode:""};return t(s).then(a=>{o.svgcode=a}),o})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,r=null){r===null&&(r=j0(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const i=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(i===t)return"";const{loader:n}=await this.svgDrawImage(r,i);return r.viewbox(0,0,n.width,n.height),r.svg()}async renderSymbologyIcon(t,r=null){if(r===null){const s=window.document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(s),r=j0(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const i=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:n}=await this.svgDrawImage(r,i);return n.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(n,this.CONTENT_IMAGE_SIZE),r.svg()}generatePlaceholderSymbology(t,r="#000"){const i=j0(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return i.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(r),i.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),{name:t,svgcode:i.svg()}}async generateBlankSymbology(){return j0(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const r=this,i=1.33333,n=window.document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(n);const s=j0(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:b}){return s.path(b).size(g*i)},circle({size:g}){return s.circle(g*i)},cross({size:g}){return s.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*i)},x({size:g}){return s.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*i)},triangle({size:g}){return s.path("M 20,20 L 10,0 0,20 Z").size(g*i)},diamond({size:g}){return s.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*i)},square({size:g}){return s.path("M 0,0 20,0 20,20 0,20 Z").size(g*i)}},a={[ko.SOLID]:"none",[ko.NONE]:"none",[ko.DASH]:"5.333,4",[ko.DOT]:"1.333,4",[ko.DASHDOT]:"5.333,4,1.333,4",[ko.LONGDASH]:"10.666,4",[ko.LONGDASHDOT]:"10.666,4,1.333,4",[ko.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[ko.SHORTDOT]:"1.333,1.333",[ko.SHORTDASH]:"5.333,1.333",[ko.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[ko.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},c={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,b)=>s.pattern(5,5,_=>_.line(0,5/2,5,5/2)).stroke(b),vertical:(g,b)=>s.pattern(5,5,_=>_.line(5/2,0,5/2,5)).stroke(b),"forward-diagonal":(g,b)=>s.pattern(5,5,_=>{_.line(0,0,5,5).stroke(b),_.line(0,0,5,5).move(0,5).stroke(b),_.line(0,0,5,5).move(5,0).stroke(b)}),"backward-diagonal":(g,b)=>s.pattern(5,5,_=>{_.line(5,0,0,5).stroke(b),_.line(5,0,0,5).move(5/2,5/2).stroke(b),_.line(5,0,0,5).move(-5/2,-5/2).stroke(b)}),cross:(g,b)=>s.pattern(5,5,_=>{_.line(5/2,0,5/2,5).stroke(b),_.line(0,5/2,5,5/2).stroke(b)}),"diagonal-cross":(g,b)=>s.pattern(7,7,_=>{_.line(0,0,7,7).stroke(b),_.line(7,0,0,7).stroke(b)})},p={"simple-marker"(){const g=m(t.color);t.outline=t.outline||u;const b=m(t.outline.color),v=d({color:b.colour,opacity:b.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),_=o[t.style](t).fill({color:g.colour,opacity:g.opacity}).stroke(v).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0);r.fitInto(_,r.CONTENT_SIZE)},"simple-line"(){const g=m(t.color),b=d({color:g.colour,opacity:g.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),v=r.CONTENT_PADDING,_=r.CONTAINER_SIZE-r.CONTENT_PADDING;s.line(v,v,_,_).stroke(b)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(t.color),b=d({color:g.colour,opacity:g.opacity}),v=c[t.style](g,b);t.outline=t.outline||u;const _=m(t.outline.color),E=d({color:_.colour,opacity:_.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(v).stroke(E)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,b=t.width*t.xscale,v=t.height*t.yscale;t.outline=t.outline||u;const _=m(t.outline.color),E=d({color:_.colour,opacity:_.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return r.$iApi.geo.shared.convertImagetoDataURL(g).then(x=>{const T=s.pattern(b,v,M=>M.image(x,b,v));s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(T).stroke(E)})},"picture-marker"(){const g=t.source,b=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:t.url;return r.$iApi.geo.shared.convertImagetoDataURL(b).then(_=>r.svgDrawImage(s,_)).then(({image:_})=>{_.center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0),r.fitInto(_,r.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(p[t.type]()),window.document.body.removeChild(n),s.svg()}catch(g){return console.error(g),this.generateBlankSymbology()}function d(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}svgDrawImage(t,r,i=0,n=0,s=!0){return new Promise((a,l)=>{const u=t.image(r,i,n,s).loaded(c=>a({image:u,loader:c})).error(c=>{l(c),console.error(c)})})}fitInto(t,r){const i=t.node.getBoundingClientRect(),n=r/Math.max(i.width,i.height);n<1&&t.scale(n)}rendererToLegend(t){let r;const i=t.symbolUnits.slice(0);if(t.defaultUnit&&i.push(t.defaultUnit),t.falseRenderer)r=i.map(n=>[n]);else{const n=new Map;i.forEach(s=>{const o=n.get(s.label);o?o.push(s):n.set(s.label,[s])}),r=[],n.forEach(s=>r.push(s))}return r.map(n=>{const s=n[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:s.label||"",definitionClause:n.length===1?s.definitionClause:`(${n.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(s.symbol).then(a=>{o.svgcode=a,n.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const r={query:{f:"json"}},i={layers:[]},[n,s]=await qg(Mt(`${t}/legend`,r));return s?s.data?s.data:(console.error(`Error loading legend data for ${t}`),i):(console.error(`Error loading legend for ${t}`,n),i)}mapServerLegendToRenderer(t,r){const i=t.layers.find(s=>s.layerId===r);let n;if(typeof i<"u")return n={type:"uniqueValue",field:"fakefield",uniqueValueInfos:i.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))},this.makeRenderer(Sv(n),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const r=t.layers.map(n=>n.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))),i={type:"uniqueValue",field:"fakefield",uniqueValueInfos:[].concat(...r)};return this.makeRenderer(Sv(i),[],!0)}async mapServerToLocalLegend(t,r=void 0){const i=await this.getMapServerLegend(t);let n,s;return typeof r>"u"?(s=0,n=this.mapServerLegendToRendererAll(i)):(s=parseInt(r),n=this.mapServerLegendToRenderer(i,s)),this.rendererToLegend(n)}}class tst extends Bn{constructor(t){super(t)}async arcGisServerQueryIds(t){const r=new jn;r.returnGeometry=!1,t.filterSql&&(r.where=t.filterSql),t.filterGeometry&&(r.geometry=this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),r.spatialRelationship="intersects");const i=await Lte(t.url,r);return Array.isArray(i)?i:[]}async geoJsonQuery(t){const r=new jn;if(r.returnGeometry=!!t.includeGeometry,r.outFields=["*"],t.filterGeometry&&(r.geometry=this.queryGeometryHelper(t.filterGeometry,!0),r.spatialRelationship="intersects"),t.filterSql&&(r.where=t.filterSql),await t.layer.loadPromise(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(r)).features.map((n,s)=>{let o;return r.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(n.geometry,`queryResult${s}`):o=new Lb,new Ip(o,"",n.attributes)})}queryGeometryHelper(t,r,i,n){let s;return!r&&t.type===br.EXTENT?i&&n&&i>2e7&&t.sr.wkid===3978&&n.wkid===4326?s=t.toESRI():s=t.toPolygon().toESRI():s=t.toESRI(),s}makeClickBuffer(t,r=5){const i=this.$iApi.geo.map,n=i.getExtent(),s=r*(n.xmax-n.xmin)/i.getPixelWidth();return new un("ze_buffer",[t.x-s,t.y-s],[t.x+s,t.y+s],t.sr)}}class rst extends Bn{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=N2.geom,this.proj=N2.proj,this.shared=N2.sharedUtils,this.map=new Wtt(t),this.layer=new Lnt(t),this.attributes=new Jnt(t),this.query=new tst(t),this.symbology=new est(t)}set proxy(t){_r.request.proxyUrl=t}get proxy(){return _r.request.proxyUrl||""}}const ist={"../fixtures/appbar/index.ts":()=>Be(()=>import("./index.4618e45c.js"),["assets/index.4618e45c.js","assets/index.65d4c464.css","assets/preload-helper.387dac8f.js"]),"../fixtures/areas-of-interest/index.ts":()=>Be(()=>import("./index.a2aadeaf.js"),["assets/index.a2aadeaf.js","assets/screen.f38328f1.js","assets/screen.65418d74.css","assets/preload-helper.387dac8f.js"]),"../fixtures/basemap/index.ts":()=>Be(()=>import("./index.4c36d8dd.js"),["assets/index.4c36d8dd.js","assets/screen.0c3eac34.js","assets/screen.e4ca94e0.css","assets/preload-helper.387dac8f.js"]),"../fixtures/crosshairs/index.ts":()=>Be(()=>import("./index.31ab5731.js"),["assets/index.31ab5731.js","assets/index.541c086d.css","assets/preload-helper.387dac8f.js"]),"../fixtures/details/index.ts":()=>Be(()=>import("./index.db60fb9b.js"),["assets/index.db60fb9b.js","assets/index.f1b03980.css","assets/hilight-defs.8b611028.js","assets/toggle-switch-control.693b1977.js","assets/toggle-switch-control.50d1d80b.css","assets/linkify-html.module.38598c19.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export/index.ts":()=>Be(()=>import("./index.e7582074.js"),["assets/index.e7582074.js","assets/screen.949693af.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export-legend/index.ts":()=>Be(()=>import("./index.6e7172f7.js"),["assets/index.6e7172f7.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export-map/index.ts":()=>Be(()=>import("./index.95eb045f.js"),["assets/index.95eb045f.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export-northarrow/index.ts":()=>Be(()=>import("./index.2abc2fc9.js"),["assets/index.2abc2fc9.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export-scalebar/index.ts":()=>Be(()=>import("./index.241f4f04.js"),["assets/index.241f4f04.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/export-title/index.ts":()=>Be(()=>import("./index.7e0b6eee.js"),["assets/index.7e0b6eee.js","assets/fabric.3f822428.js","assets/preload-helper.387dac8f.js"]),"../fixtures/gazebo/index.ts":()=>Be(()=>import("./index.559d8ef3.js"),["assets/index.559d8ef3.js","assets/preload-helper.387dac8f.js"]),"../fixtures/geosearch/index.ts":()=>Be(()=>import("./index.21eb246c.js"),["assets/index.21eb246c.js","assets/screen.0dfd2d7b.js","assets/screen.41b131f7.css","assets/preload-helper.387dac8f.js"]),"../fixtures/grid/index.ts":()=>Be(()=>import("./index.152bd77e.js"),["assets/index.152bd77e.js","assets/screen.0a99b9ae.js","assets/screen.c38c232f.css","assets/linkify-html.module.38598c19.js","assets/preload-helper.387dac8f.js"]),"../fixtures/help/index.ts":()=>Be(()=>import("./index.feb868e5.js"),["assets/index.feb868e5.js","assets/screen.ea0d4534.js","assets/screen.400b4135.css","assets/marked.esm.fe0f66b5.js","assets/preload-helper.387dac8f.js"]),"../fixtures/hilight/index.ts":()=>Be(()=>import("./index.58586e6b.js"),["assets/index.58586e6b.js","assets/hilight-defs.8b611028.js","assets/preload-helper.387dac8f.js"]),"../fixtures/layer-reorder/index.ts":()=>Be(()=>import("./index.c6001c88.js"),["assets/index.c6001c88.js","assets/screen.2ba0c31d.js","assets/screen.00d0af0d.css","assets/vue.esm-bundler.db5f4009.js","assets/preload-helper.387dac8f.js"]),"../fixtures/legend/index.ts":()=>Be(()=>import("./index.14e5f95a.js"),["assets/index.14e5f95a.js","assets/legend-store.85c8c4ec.js","assets/section-item.8662205a.js","assets/screen.bb84f7d4.js","assets/preload-helper.387dac8f.js"]),"../fixtures/mapnav/index.ts":()=>Be(()=>import("./index.46866696.js"),["assets/index.46866696.js","assets/index.99f7d66c.css","assets/preload-helper.387dac8f.js"]),"../fixtures/metadata/index.ts":()=>Be(()=>import("./index.cea53b23.js"),["assets/index.cea53b23.js","assets/screen.abde756c.js","assets/preload-helper.387dac8f.js"]),"../fixtures/northarrow/index.ts":()=>Be(()=>import("./index.eee17793.js"),["assets/index.eee17793.js","assets/preload-helper.387dac8f.js"]),"../fixtures/overviewmap/index.ts":()=>Be(()=>import("./index.534bbe99.js"),["assets/index.534bbe99.js","assets/index.fe8f538f.css","assets/preload-helper.387dac8f.js"]),"../fixtures/panguard/index.ts":()=>Be(()=>import("./index.f380b321.js"),["assets/index.f380b321.js","assets/index.8ac2a1a9.css","assets/preload-helper.387dac8f.js"]),"../fixtures/scrollguard/index.ts":()=>Be(()=>import("./index.cc293002.js"),["assets/index.cc293002.js","assets/index.a709bb58.css","assets/preload-helper.387dac8f.js"]),"../fixtures/settings/index.ts":()=>Be(()=>import("./index.f324a718.js"),["assets/index.f324a718.js","assets/screen.33acbd13.js","assets/screen.32c4faa9.css","assets/vue.esm-bundler.db5f4009.js","assets/toggle-switch-control.693b1977.js","assets/toggle-switch-control.50d1d80b.css","assets/preload-helper.387dac8f.js"]),"../fixtures/snowman/index.ts":()=>Be(()=>import("./index.ff1334f6.js"),["assets/index.ff1334f6.js","assets/preload-helper.387dac8f.js"]),"../fixtures/wizard/index.ts":()=>Be(()=>import("./index.d11fd993.js"),["assets/index.d11fd993.js","assets/screen.6825e983.js","assets/screen.b423a83a.css","assets/preload-helper.387dac8f.js"])};class nst extends Bn{constructor(t){super(t);const r=()=>{const i=this.$vApp.$store.get("fixture/items");Object.keys(i).forEach(n=>{i[n].initialized?.()})};this.$iApi.event.on(Wt.MAP_CREATED,r)}async add(t,r){let i;if(t in this.$vApp.$store.get("fixture/items"))return this.get(t);if(r){if(typeof r!="function")throw new Error("malformed fixture constructor");i=cj.updateBaseToInstance(new r,t,this.$iApi)}else{const n=(await ist[`../fixtures/${t}/index.ts`]()).default;i=new n(t,this.$iApi)}return this.$vApp.$store.set(`fixture/${D5.ADD_FIXTURE}!`,{value:i}),this.$iApi.event.emit(Wt.FIXTURE_ADDED,i),this.$iApi.geo.map.created&&i.initialized?.(),i}remove(t){const r=this.get(t);if(!r)throw new Error(`Could not find fixture ${t} for removal`);return this.$vApp.$store.set(`fixture/${D5.REMOVE_FIXTURE}!`,{value:r}),this.$iApi.event.emit(Wt.FIXTURE_REMOVED,r),r}get(t){const r=[];typeof t=="string"?r.push(t):Array.isArray(t)?r.push(...t):r.push(t.id);const i=r.map(n=>{const s=this.$vApp.$store.get(`fixture/items@${n}`);if(!!s)return s});return i.length===1?i[0]:i}isLoaded(t){const r=Array.isArray(t)?t:[t];return r.forEach(i=>{this.$vApp.$store.get(`fixture/loadPromises@${i}`)===void 0&&this.$vApp.$store.set(`fixture/${D5.ADD_LOAD_PROMISE}!`,i)}),Promise.all(this.$vApp.$store.get("fixture/getLoadPromises",r))}addDefaultFixtures(t){return(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","scrollguard","panguard","settings","wizard"]),this.$vApp.$store.set(Os.setStartingFixtures,t),Promise.all(t.map(r=>this.add(r)))}}class cj extends Bn{static updateBaseToInstance(t,r,i){const n=new cj(r,i);return Object.defineProperties(t,{id:{value:r},$iApi:{value:i},$vApp:{get(){return n.$vApp}},remove:{value:n.remove},extend:{value:n.extend},config:{get(){return n.config}},mount:{value:n.mount}}),t}id;constructor(t,r){super(r),this.id=t}remove(){return this.$iApi.fixture.remove(this),this}extend(t,r={}){const i=Ar({extends:t,iApi:this.$iApi,data(){return{...r}}}),n=OA(i),{vNode:s,destroy:o,el:a}=this.mount(i,{props:{...r.propsData},app:n});return a}mount(t,{props:r,children:i,element:n,app:s}={}){let o=n,a=Qo(t,r,i);return s&&s._context&&(a.appContext=s._context),o?Ep(a,o):Ep(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&Ep(null,o),o=null,a=null},el:o}}get config(){return this.$vApp.$store.get("config/getFixtureConfig",this.id)}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){const t=this.$iApi.getConfig(),r={},i=(n,s=void 0)=>{if(n.fixtures&&n.fixtures[this.id]!==void 0){let o=n.id;s!==void 0&&(o=`${s.id}-${n.index}`),r[o]=n.fixtures[this.id]}n.sublayers&&n.sublayers.forEach(o=>i(o,n))};return t.layers?.forEach(n=>i(n)),r}handlePanelWidths(t){if(this.config?.panelWidth){const r={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&t.forEach(i=>{r[i]=this.config.panelWidth.default});for(const i in this.config.panelWidth)i!="default"&&(r[i]=this.config.panelWidth[i]);for(const i in r){const n=this.$iApi.panel.get(i);this.$iApi.panel.setStyle(n,{"flex-basis":`${r[i]}px`})}}}}class sst extends Bn{register(t,r){const i=ost(t)?{[t.id]:t.config}:t;if(r){const s=r.i18n||{},o=this.$vApp.$i18n;Object.entries(s.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(s.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(s.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const n=Object.entries(i).reduce((s,[o,a])=>(s.push(new iM(this.$iApi,o,a)),s),[]);return n.forEach(s=>this.$vApp.$store.set(`panel/${F5.REGISTER_PANEL}!`,{panel:s})),n.length===1?n[0]:n.reduce((s,o)=>(s[o.id]=o,s),{})}isRegistered(t){const r=Array.isArray(t)?t:[t];return r.forEach(i=>{this.$vApp.$store.get(`panel/regPromises@${i}`)===void 0&&this.$vApp.$store.set(`panel/${F5.ADD_REG_PROMISE}!`,i)}),Promise.all(this.$vApp.$store.get("panel/getRegPromises",r))}remove(t){const r=this.get(t);r.isOpen&&this.close(r),this.$vApp.$store.set(`panel/${F5.REMOVE_PANEL}!`,{panel:r})}get(t){const r=typeof t=="string"?t:t.id;return this.$vApp.$store.get(`panel/items@${r}`)}open(t){let r,i,n;if(typeof t=="string"||t instanceof iM?r=this.get(t):(r=this.get(t.id),{screen:i,props:n}=t),r.isOpen&&!r.isVisible)r.minimize();else if(r.isOpen)return r;return i||(r.route&&!n?{screen:i,props:n}=r.route:i=Object.keys(r.screens).pop()),this.show(r,{screen:i,props:n})?(this.$vApp.$store.set(`panel/${V_.openPanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.open",{name:r.alertName?this.$vApp.$t(r.alertName):r.id})),this.$iApi.event.emit(Wt.PANEL_OPENED,r)):console.error(`Failed to open ${r.id} panel.`),r}get opened(){return this.$vApp.$store.get("panel/orderedItems")}get visible(){return this.$vApp.$store.get("panel/visible")}close(t){const r=this.get(t);return r.isPinned&&r.pin(!1),this.$vApp.$store.set(`panel/${V_.closePanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.close",{name:r.alertName?this.$vApp.$t(r.alertName):r.id})),this.$iApi.event.emit(Wt.PANEL_CLOSED,r),r}minimize(t){const r=this.get(t);return r.isPinned&&r.pin(!1),this.$vApp.$store.set(`panel/${V_.closePanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.minimize",{name:r.alertName?this.$vApp.$t(r.alertName):r.id})),this.$iApi.event.emit(Wt.PANEL_MINIMIZED,r),r}move(t,r){const i=this.get(t);return this.$vApp.$store.set(`panel/${V_.movePanel}!`,{panel:i,direction:r}),i}toggle(t,r){let i;return typeof t=="string"||t instanceof iM?i=this.get(t):i=this.get(t.id),r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(t):this.close(i)),i}toggleMinimize(t,r){let i;return typeof t=="string"||t instanceof iM?i=this.get(t):i=this.get(t.id),r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(i):this.minimize(i)),i}pin(t,r){const i=this.get(t);return r=typeof r<"u"?r:!i.isPinned,!i.isPinned&&!r||this.$vApp.$store.set("panel/pinned",r?i:null),i}get pinned(){return this.$vApp.$store.get("panel/pinned")||null}show(t,r){const i=this.get(t);if(!!i.screens[r.screen]){if(i.screens[r.screen]?.props){const n=Object.keys(i.screens[r.screen]?.props).filter(o=>o!=="panel"),s=r.props?Object.keys(r.props):[];for(let o=0;o<n.length;o++)if(!s.includes(n[o])&&i.screens[r.screen].props[n[o]].required)return}return r.screen in this.$element._context.components||i.registerScreen(r.screen),this.$vApp.$store.set(`panel/items@${i.id}.route`,r),i}}setStyle(t,r,i=!1){const n=this.get(t);return this.$vApp.$store.set(`panel/items@${n.id}.style`,i?r:{...n.style,...r}),n}expand(t,r){const i=this.get(t);return this.$vApp.$store.set(`panel/items@${i.id}.expanded`,r!==void 0?r:!i.expanded),i}}function ost(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const ast=Ar({name:"ScreenSpinnerV"}),lst=e=>(qp("data-v-ba864716"),e=e(),Hp(),e),ust=lst(()=>ut("div",{class:"loader"},null,-1));function cst(e,t,r,i,n,s){const o=Lr("panel-screen");return pt(),Vi(o,{header:!1,class:"screen-spinner"},{content:dn(()=>[Tr(" TODO: fine a spinner that is actually good \u{1F38D} "),ust]),_:1})}var hst=li(ast,[["render",cst],["__scopeId","data-v-ba864716"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/screen-spinner.vue"]]);const pst={"../fixtures/areas-of-interest/screen.vue":()=>Be(()=>import("./screen.f38328f1.js").then(function(e){return e.s}),["assets/screen.f38328f1.js","assets/screen.65418d74.css"]),"../fixtures/basemap/screen.vue":()=>Be(()=>import("./screen.0c3eac34.js"),["assets/screen.0c3eac34.js","assets/screen.e4ca94e0.css","assets/preload-helper.387dac8f.js"]),"../fixtures/export/screen.vue":()=>Be(()=>import("./screen.949693af.js").then(function(e){return e.s}),[]),"../fixtures/geosearch/screen.vue":()=>Be(()=>import("./screen.0dfd2d7b.js").then(function(e){return e.s}),["assets/screen.0dfd2d7b.js","assets/screen.41b131f7.css"]),"../fixtures/grid/screen.vue":()=>Be(()=>import("./screen.0a99b9ae.js").then(function(e){return e.s}),["assets/screen.0a99b9ae.js","assets/screen.c38c232f.css","assets/linkify-html.module.38598c19.js"]),"../fixtures/help/screen.vue":()=>Be(()=>import("./screen.ea0d4534.js").then(function(e){return e.s}),["assets/screen.ea0d4534.js","assets/screen.400b4135.css","assets/marked.esm.fe0f66b5.js"]),"../fixtures/layer-reorder/screen.vue":()=>Be(()=>import("./screen.2ba0c31d.js"),["assets/screen.2ba0c31d.js","assets/screen.00d0af0d.css","assets/vue.esm-bundler.db5f4009.js","assets/preload-helper.387dac8f.js"]),"../fixtures/legend/screen.vue":()=>Be(()=>import("./screen.bb84f7d4.js"),["assets/screen.bb84f7d4.js","assets/preload-helper.387dac8f.js"]),"../fixtures/metadata/screen.vue":()=>Be(()=>import("./screen.abde756c.js").then(function(e){return e.s}),[]),"../fixtures/settings/screen.vue":()=>Be(()=>import("./screen.33acbd13.js"),["assets/screen.33acbd13.js","assets/screen.32c4faa9.css","assets/vue.esm-bundler.db5f4009.js","assets/toggle-switch-control.693b1977.js","assets/toggle-switch-control.50d1d80b.css","assets/preload-helper.387dac8f.js"]),"../fixtures/wizard/screen.vue":()=>Be(()=>import("./screen.6825e983.js").then(function(e){return e.s}),["assets/screen.6825e983.js","assets/screen.b423a83a.css"])};class iM extends Bn{id;screens;loadedScreens=[];alertName;controls;button;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const r=this.screens[t];let i;if(yje(r)||mje(r))i=r,this.loadedScreens.push(t);else{let n;typeof r=="string"?n=pst[`../fixtures/${r}`]():n=r();const s=new Promise((o,a)=>{n.then(l=>{this.loadedScreens.push(t),o(gje(l)?l.default:l)}),n.catch(l=>a(l))});i=xA({loader:()=>s,loadingComponent:hst,delay:200})}this.$iApi.$element.component(t,i)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,r,i){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:r,style:{},expanded:!1,controls:{expand:!1,...i.controls},...i},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(t){return this.$iApi.panel.move(this,t),this}get isLeftMostPanel(){return this.$iApi.panel.visible.length>0?this.id===this.$iApi.panel.visible[0].id:!1}get isRightMostPanel(){return this.$iApi.panel.visible.length>0?this.id===this.$iApi.panel.visible.slice(-1)[0].id:!1}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return this.$iApi.panel.pinned!==null&&this.$iApi.panel.pinned.id===this.id}show(t){const r=typeof t=="string"?{screen:t}:t;return this.route=r,this.$iApi.panel.show(this,r),this}setStyles(t,r=!1){return this.$iApi.panel.setStyle(this,t,r),this}expand(t){return this.$iApi.panel.expand(this,t),this}}function dst(e){const t={};(Array.isArray(e)?e:[e]).forEach(o=>{o.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),o.language="en");const a=fst(o);t[o.language]=a});const i=Object.entries(t).map(o=>{const a=o[1].fixturesEnabled;return delete o[1].fixturesEnabled,a});let n=!1;const s=i.reduce((o,a)=>o.filter(l=>{const u=a.includes(l);return n=n||!u,u}));return n&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),s.push("crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:s,configs:t}}function fst(e){const t={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0},fixturesEnabled:[]};return gst(e.services,t),mst(e.map,t),vst(e.ui,t),e.plugins&&bst(e.plugins,t),t}function mst(e,t){if(e.layers&&e.layers.forEach(r=>{t.layers.push(yst(r))}),e.initialBasemapId&&(t.map.initialBasemapId=e.initialBasemapId),e.components){if(e.components.geoSearch&&(e.components.geoSearch.enabled&&t.fixturesEnabled.push("geosearch"),typeof e.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof e.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),e.components.overviewMap&&e.components.overviewMap.enabled&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.startMinimized=!e.components.overviewMap.initiallyExpanded,t.fixtures.overviewmap.expandFactor=e.components.overviewMap.expandFactor??1.5),e.components.northArrow&&e.components.northArrow.enabled){const r={};e.components.northArrow.arrowIcon&&(r.arrowIcon=e.components.northArrow.arrowIcon),e.components.northArrow.poleIcon&&(r.poleIcon=e.components.northArrow.poleIcon),r&&(t.fixtures.northarrow=r,t.fixturesEnabled.push("northarrow"))}if(e.components.scaleBar&&e.components.scaleBar.enabled){switch(t.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:e?.components?.scaleBar?.scalebarUnit==="english"||e?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},e.components?.mouseInfo?.spatialReference?.wkid){case 4326:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:t.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:t.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}e.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}e.components.basemap&&e.components.basemap.enabled&&t.fixturesEnabled.push("basemap")}e.extentSets&&(t.map.extentSets=[],e.extentSets.forEach(r=>{const i={id:r.id,default:{xmin:r.default.xmin,xmax:r.default.xmax,ymin:r.default.ymin,ymax:r.default.ymax,spatialReference:r.spatialReference}};r.full&&(i.full={xmin:r.full.xmin,xmax:r.full.xmax,ymin:r.full.ymin,ymax:r.full.ymax,spatialReference:r.spatialReference}),r.maximum&&(i.maximum={xmin:r.maximum.xmin,xmax:r.maximum.xmax,ymin:r.maximum.ymin,ymax:r.maximum.ymax,spatialReference:r.spatialReference}),t.map.extentSets.push(i)})),e.lodSets&&(t.map.lodSets=e.lodSets),e.tileSchemas&&(t.map.tileSchemas=[],e.tileSchemas.forEach(r=>{const i={id:r.id,name:r.name,extentSetId:r.extentSetId,lodSetId:r.lodSetId,thumbnailTileUrls:[],hasNorthPole:r.hasNorthPole||!1};r.overviewUrl&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.basemaps[r.id]={id:r.overviewUrl.id||`overviewmap-basemap-${r.id}`,tileSchemaId:r.id,layers:[{id:r.overviewUrl.id||`overviewmap-basemap-${r.id}-0`,layerType:r.overviewUrl.layerType==="esriDynamic"?Cr.MAPIMAGE:Cr.TILE,url:r.overviewUrl.url,opacity:r.overviewUrl.opacity??1}]}),t.map.tileSchemas.push(i)})),e.baseMaps&&(t.map.basemaps=[],e.baseMaps.forEach(r=>{const i={id:r.id,tileSchemaId:r.tileSchemaId,name:r.name,description:r.description,altText:r.altText,thumbnailUrl:r.thumbnailUrl,layers:[]};r.attribution&&(i.attribution={text:{},logo:{}},r.attribution.text&&(i.attribution.text.disabled=!r.attribution.text.enabled,i.attribution.text.value=r.attribution.text.value),r.attribution.logo&&(i.attribution.logo.disabled=!r.attribution.logo.enabled,i.attribution.logo.altText=r.attribution.logo.altText,i.attribution.logo.value=r.attribution.logo.value,i.attribution.logo.link=r.attribution.logo.link)),r.layers.forEach((n,s)=>{const o={id:n.id||`${r.id}-${s}`,layerType:n.layerType==="esriDynamic"?Cr.MAPIMAGE:Cr.TILE,url:n.url,opacity:n.opacity??1};i.layers.push(o)}),t.map.basemaps.push(i)})),e.legend&&(t.fixturesEnabled.push("legend"),e.legend.type==="autopopulate"?(t.fixtures.legend={root:{name:"I'm root",children:[]}},t.layers&&t.layers.forEach(r=>{if(r.type==="esri-map-image"||r.type==="ogc-wms"){const i={name:r.name??`${r.id} Group`,children:[]};r.sublayers.forEach(n=>{const s={layerId:r.id};n.name&&(s.name=n.name),n.controls&&(s.controls=n.controls),n.disabledControls&&(s.disabledControls=n.disabledControls),r.type==="esri-map-image"?s.sublayerIndex=n.index:(s.sublayerId=n.id,console.warn(`sublayerId property defined in legend entry ${s.layerId} is currently not supported.`)),i.children.push(s)}),t.fixtures.legend.root.children.push(i)}else{const i={layerId:r.id};r.controls&&(i.controls=r.controls),r.disabledControls&&(i.disabledControls=r.disabledControls),t.fixtures.legend.root.children.push(i)}})):t.fixtures.legend={root:zL(e.legend.root)})}function zL(e){const t={name:e.name,children:[]};typeof e.hidden<"u"&&(t.hidden=e.hidden),typeof e.expanded<"u"&&(t.expanded=e.expanded);const r=["identify","opacity","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=rb(e.controls,r),e.controls.includes("visibility")&&t.controls.push("visibilityButton"),(e.controls.length!==1||e.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),t.controls.push("expandButton")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=rb(e.disabledControls,r),e.disabledControls.includes("visibility")&&t.disabledControls.push("visibilityButton"),(e.disabledControls.length!==1||e.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),e.children.forEach(i=>{if(i.layerId)t.children.push(lZ(i));else if(i.infoType)i.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`):(t.children.push({infoType:i.infoType,content:i.content}),typeof i.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`));else if(i.exclusiveVisibility){const n={name:"Visibility Set",children:[],exclusive:!0};typeof i.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`),i.exclusiveVisibility.forEach(s=>{s.layerId?n.children.push(lZ(s)):n.children.push(zL(s))}),t.children.push(n)}else t.children.push(zL(i))}),t}function lZ(e){const t=e,r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.layerControls=rb(e.controls,r)),e.disabledControls&&e.disabledControls.length>0&&(t.disabledLayerControls=rb(e.disabledControls,r)),e.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),delete t.controlledIds),e.entryIndex&&(t.sublayerIndex=e.entryIndex,delete e.entryIndex),e.entryId&&console.warn(`entryId property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),e.symbologyStack&&console.warn(`symbologyStack property defined in legend entry ${e.layerId} is currently not supported.`),e.symbologyRenderStyle&&console.warn(`symbologyRenderStyle property defined in legend entry ${e.layerId} is currently not supported.`),t}function yst(e){const t=Hk(e);switch(t.id=e.id,t.url=e.url,e.refreshInterval&&(t.refreshInterval=e.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),e.expectedResponseTime&&(t.expectedLoadTime=e.expectedResponseTime),e.metadataUrl&&(t.metadata={url:e.metadataUrl}),e.catalogueUrl&&(t.catalogueUrl=e.catalogueUrl),typeof e.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.tooltipField&&(t.tooltipField=e.tooltipField),e.tolerance&&(t.mouseTolerance=e.tolerance,e.layerType==="esriDynamic"&&(t.touchTolerance=e.tolerance+10)),e.customRenderer&&(t.customRenderer=e.customRenderer),e.layerType){case"esriDynamic":t.layerType="esri-map-image",typeof e.singleEntryCollapse<"u"&&(e.singleEntryCollapse=e.singleEntryCollapse),e.imageFormat&&(t.imageFormat=e.imageFormat),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const i=Hk(r);i.index=r.index,t.sublayers.push(i)}));break;case"esriFeature":t.layerType="esri-feature",e.fileType&&(t.layerType=e.fileType==="shapefile"?"file-shape":`file-${e.fileType}`,e.colour&&(t.colour=e.colour),e.latField&&(t.latField=e.latField),e.longField&&(t.longField=e.longField));break;case"ogcWfs":t.layerType="ogc-wfs",e.colour&&(t.colour=e.colour),typeof e.xyInAttribs<"u"&&(t.xyInAttribs=e.xyInAttribs);break;case"ogcWms":t.layerType="ogc-wms",e.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.featureInfoMimeType&&(e.featureInfoMimeType==="text/html;fgpv=summary"?t.featureInfoMimeType="text/html":t.featureInfoMimeType=e.featureInfoMimeType),e.legendMimeType&&console.warn(`legendMimeType property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const i=Hk(r);i.id=r.id,r.currentStyle&&(i.currentStyle=r.currentStyle,console.warn(`currentStyle property provided in layer entry ${r.id} of layer ${e.id} is currently not supported.`)),r.allStyles&&console.warn(`allStyles property provided in layer entry ${r.id} of layer ${e.id} cannot be mapped and will be skipped.`),t.sublayers.push(i)}));break;case"esriImage":t.layerType="esri-imagery";break;case"esriTile":t.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${e.layerType}`)}return e.details&&console.warn(`Details config provided in layer ${e.id} cannot be mapped and will be skipped.`),t}function Hk(e){const t={};e.name&&(t.name=e.name),e.nameField&&(t.nameField=e.nameField),e.extent&&(t.extent=e.extent);const r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=rb(e.controls,r)),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=rb(e.disabledControls,r)),e.state&&(t.state={opacity:e.state.opacity??1,visibility:e.state.visibility??!0,identify:e.state.query??!0,hovertips:e.state.hovertips??!0},typeof e.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`)),typeof e.stateOnly<"u"&&(t.cosmetic=e.stateOnly),e.initialFilteredQuery&&(t.initialFilteredQuery=e.initialFilteredQuery),wst(e,t),(typeof e.toggleSymbology<"u"||e.table)&&(t.fixtures={},typeof e.toggleSymbology<"u"&&(t.fixtures.legend={toggleSymbology:e.toggleSymbology}),e.table&&(t.fixtures.grid={},e.table.title&&(t.fixtures.grid.title=e.table.title),e.table.description&&console.warn(`description property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.search&&(e.table.search.enabled&&(t.fixtures.grid.search=e.table.search.enabled),e.table.search.value&&(t.fixtures.grid.searchFilter=e.table.search.value)),typeof e.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.applyMap<"u"&&(t.fixtures.grid.applyMap=e.table.applyMap),typeof e.table.showFilter<"u"&&(t.fixtures.grid.showFilter=e.table.showFilter),typeof e.table.filterByExtent<"u"&&(t.fixtures.grid.filterByExtent=e.table.filterByExtent),typeof e.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.columns&&(t.fixtures.grid.columns=[],e.table.columns.forEach(i=>{const n={name:i.data};i.title&&(n.title=i.title),i.description&&console.warn(`description property provided in column property in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof i.visible<"u"&&(n.visible=i.visible),i.width&&(n.width=i.width),i.sort&&(n.sort=i.sort),typeof i.searchable<"u"&&(n.searchable=i.searchable),i.filter&&(n.filter=i.filter),t.fixtures.grid.columns.push(n)})))),t}function rb(e,t){const r=[];return e.forEach(i=>{t.includes("identify")&&i==="query"?r.push("identify"):t.includes(i)?r.push(i):console.warn(`Ignored invalid control: ${i}`)}),r}function gst(e,t){if(!e)return;e.search&&(t.fixtures.geosearch={},t.fixtures.geosearch.serviceUrls={geoNames:e.search.serviceUrls.geoNames,geoLocation:e.search.serviceUrls.geoLocation,geoProvince:e.search.serviceUrls.provinces,geoTypes:e.search.serviceUrls.types},e.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),e.search.settings&&(t.fixtures.geosearch.settings=e.search.settings),e.search.disabledSearches&&console.warn("disabledSearches property provided in search service cannot be mapped and will be skipped.")),e.export&&(t.fixtures.export||(t.fixtures.export={},t.fixturesEnabled.push("export")),e.export.title&&(t.fixtures.export.title={selected:e.export.title.isSelected??!0,selectable:e.export.title.isSelectable??!0,value:e.export.title.value??"RAMP-Map / PCAR-Carte"}),e.export.map&&(t.fixtures.export.map={selected:e.export.map.isSelected??!0,selectable:e.export.map.isSelectable??!0},e.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),e.export.mapElements&&(t.fixtures.export.mapElements={selected:e.export.mapElements.isSelected??!0,selectable:e.export.mapElements.isSelectable??!0},e.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),e.export.legend&&(t.fixtures.export.legend={selected:e.export.legend.isSelected??!0,selectable:e.export.legend.isSelectable??!0},e.export.legend.columnWidth&&(t.fixtures.export.legend.columnWidth=e.export.legend.columnWidth),e.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),e.export.footnote&&(t.fixtures.export.footnote={selected:e.export.footnote.isSelected??!0,selectable:e.export.footnote.isSelectable??!0,value:e.export.footnote.value??""}),e.export.timestamp&&(t.fixtures.export.timestamp={selected:e.export.timestamp.isSelected??!0,selectable:e.export.timestamp.isSelectable??!0},e.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),e.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof e.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),e.proxyUrl&&(t.system.proxyUrl=e.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(i=>{typeof e[i]<"u"&&console.warn(`${i} property provided in services config cannot be mapped and will be skipped.`)})}function vst(e,t){if(e.navBar){t.fixtures.mapnav={zoomOption:e.navBar.zoom||"buttons",items:[]};const n=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];e.navBar.extra.forEach(s=>{const o=s.toLowerCase();n.includes(o)?t.fixtures.mapnav.items.push(o):console.warn(`Ignored invalid mapnav item: ${s}`)}),t.fixturesEnabled.push("mapnav")}if(e.help&&(t.fixtures.help={location:e.help.folderName&&e.help.folderName!=="default"?`./${e.help.folderName}`:"./help",panelWidth:350},t.fixturesEnabled.push("help")),e.legend){const n=["groupToggle","visibilityToggle"];e.legend.reorderable&&n.push("layerReorder"),e.legend.allowImport&&n.push("wizard"),t.fixtures.legend?t.fixtures.legend.headerControls=n:(t.fixturesEnabled.push("legend"),t.fixtures.legend={headerControls:n,root:{}}),e.legend.isOpen&&e.legend.isOpen.large&&t.panels.open.push({id:"legend"})}t.fixtures.appbar={items:[]},t.fixturesEnabled.push("appbar");const r=["layers","basemap","export","help","geoSearch"];e.appBar?(e.appBar.layers!==!1&&(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")),e.appBar.geoSearch!==!1&&t.fixturesEnabled.includes("geosearch")&&t.fixtures.appbar.items.push("geosearch"),e.appBar.basemap!==!1&&t.fixtures.appbar.items.push("basemap")):(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend"),t.fixtures.appbar.items.push("geosearch"),t.fixtures.appbar.items.push("basemap")),e.sideMenu&&e.sideMenu.items&&e.sideMenu.items.length>0&&e.sideMenu.items.forEach(n=>{n.forEach(s=>{s==="layers"&&!t.fixtures.appbar.items.includes("legend")?(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")):s!=="layers"&&r.includes(s)&&!t.fixtures.appbar.items.includes(s.toLowerCase())&&(t.fixtures.appbar.items.push(s.toLowerCase()),(s.toLowerCase()==="help"||s.toLowerCase()==="export"&&!t.fixturesEnabled.includes(s.toLowerCase()))&&t.fixturesEnabled.push(s.toLowerCase()))})}),e.tableIsOpen&&e.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(n=>{typeof e[n]<"u"&&console.warn(`${n} property provided in services config cannot be mapped and will be skipped.`)})}function bst(e,t){e.areasOfInterest&&(t.fixturesEnabled.includes("areas-of-interest")||t.fixturesEnabled.push("areas-of-interest"),t.fixtures["areas-of-interest"]={areas:e.areasOfInterest.areas.map(r=>({title:`${r["title-en-CA"]} / ${r["title-fr-CA"]}`,thumbnail:r.thumbnailUrl,altText:r.altText??"",description:r.description??"",extent:{xmin:r.xmin,xmax:r.xmax,ymin:r.ymin,ymax:r.ymax,spatialReference:{wkid:r.wkid}}}))})}function wst(e,t){const r=e.outfields&&e.outfields!=="*";if(!r&&!e.fieldMetadata)return;const i={fieldInfo:[],exclusiveFields:!1};e.fieldMetadata?(i.fieldInfo=e.fieldMetadata.map(n=>{const s={name:n.data};return n.alias&&(s.alias=n.alias),s}),r&&(e.outfields.split(",").map(s=>s.trim()).forEach(s=>{i.fieldInfo.findIndex(o=>o.name===s)===-1&&i.fieldInfo.push({name:s})}),i.exclusiveFields=!0)):r&&(i.fieldInfo=e.outfields.split(",").map(n=>({name:n.trim()})),i.exclusiveFields=!0),t.fieldMetadata=i}const Nw={major:"4",minor:"0",patch:"0",timestamp:"Fri Dec 9 09:41:32 2022 -0500",hash:"5deedf03a112543bbc0459d52a20e9983901ab60"};function Ult(e){return dst(e)}const Vlt=(e,t,r)=>new Vtt(e,t,r),N2=new fje;export{Xwe as $,a8 as A,qs as B,NMe as C,u8 as D,ia as E,Yg as F,xg as G,Jg as H,$6 as I,V3 as J,h as K,Eb as L,qt as M,f as N,me as O,kt as P,Oa as Q,We as R,Bst as S,FMe as T,Mt as U,Nde as V,r5e as W,Lte as X,Xt as Y,Ya as Z,FZ as _,$1 as a,cg as a$,ca as a0,ra as a1,Hu as a2,kxe as a3,Oxe as a4,Rxe as a5,ot as a6,vN as a7,Rst as a8,R4 as a9,_r as aA,Va as aB,XT as aC,nb as aD,Ol as aE,lM as aF,Kst as aG,rwe as aH,rat as aI,QN as aJ,Eme as aK,twe as aL,pb as aM,iat as aN,$g as aO,X_ as aP,xR as aQ,nat as aR,klt as aS,an as aT,rde as aU,nde as aV,Pst as aW,Ist as aX,Ost as aY,tot as aZ,Yk as a_,Xst as aa,zf as ab,f_e as ac,Hst as ad,Est as ae,Vs as af,bs as ag,je as ah,Uh as ai,Q8 as aj,it as ak,ib as al,bie as am,Je as an,im as ao,cn as ap,yZ as aq,Qc as ar,jZ as as,Ka as at,Za as au,V2 as av,EK as aw,Gst as ax,HT as ay,Df as az,z2 as b,TN as b$,wi as b0,jst as b1,Vn as b2,ui as b3,Nse as b4,Wn as b5,nQ as b6,kse as b7,aa as b8,w5 as b9,At as bA,Qa as bB,X4 as bC,Iot as bD,wse as bE,sse as bF,_se as bG,Xi as bH,o8e as bI,Elt as bJ,g8e as bK,mx as bL,Mlt as bM,es as bN,UZ as bO,Wst as bP,za as bQ,jl as bR,wo as bS,kat as bT,ig as bU,E0e as bV,$N as bW,$te as bX,Fat as bY,FB as bZ,Tte as b_,rY as ba,D8e as bb,L8e as bc,$se as bd,IP as be,IS as bf,wN as bg,cb as bh,qc as bi,VT as bj,YL as bk,Use as bl,dv as bm,Br as bn,Clt as bo,Alt as bp,sa as bq,Dn as br,KQ as bs,Hs as bt,aD as bu,If as bv,Kn as bw,_N as bx,xN as by,Xc as bz,Vlt as c,jve as c$,q1e as c0,vo as c1,QI as c2,cat as c3,Oot as c4,Tot as c5,cot as c6,tS as c7,ELe as c8,V1e as c9,g2e as cA,v2e as cB,Yot as cC,Sg as cD,H3 as cE,Tee as cF,lot as cG,Uy as cH,A1 as cI,H_ as cJ,Gs as cK,Xn as cL,uM as cM,fz as cN,Fo as cO,Bat as cP,Rat as cQ,Er as cR,DD as cS,Lxe as cT,Nxe as cU,Dxe as cV,aX as cW,fot as cX,et as cY,aS as cZ,P1 as c_,B1e as ca,Fp as cb,RY as cc,aot as cd,AN as ce,lat as cf,uat as cg,aat as ch,Ase as ci,GD as cj,Cv as ck,Na as cl,Fne as cm,Lne as cn,Dne as co,Vc as cp,dx as cq,K4 as cr,oRe as cs,Aot as ct,zu as cu,ah as cv,Cot as cw,rot as cx,xt as cy,HX as cz,fn as d,Rs as d$,r9 as d0,Rte as d1,Lat as d2,Oat as d3,gMe as d4,Vat as d5,Kbe as d6,Ast as d7,$st as d8,E9 as d9,_4 as dA,pS as dB,Ke as dC,uh as dD,pZ as dE,Jst as dF,$Z as dG,$ot as dH,G1e as dI,t4 as dJ,U1e as dK,QT as dL,nm as dM,Ds as dN,H1e as dO,ho as dP,po as dQ,us as dR,na as dS,vh as dT,p5 as dU,px as dV,OD as dW,qI as dX,Fi as dY,EOe as dZ,Mf as d_,X6e as da,N8e as db,XV as dc,WMe as dd,Ote as de,Tse as df,Dw as dg,am as dh,yI as di,$r as dj,WL as dk,Xx as dl,Wg as dm,llt as dn,slt as dp,Ure as dq,P4e as dr,LX as ds,Kpe as dt,L5e as du,S4 as dv,_b as dw,xb as dx,um as dy,Tst as dz,de as e,mot as e$,xOe as e0,Vl as e1,gOe as e2,dOe as e3,pOe as e4,Pg as e5,Pa as e6,Ene as e7,jp as e8,Q$e as e9,wlt as eA,DOe as eB,FOe as eC,mOe as eD,yOe as eE,wOe as eF,ROe as eG,bD as eH,Slt as eI,cOe as eJ,hOe as eK,lOe as eL,aOe as eM,gPe as eN,Ilt as eO,Tlt as eP,_g as eQ,Yd as eR,kp as eS,Qx as eT,iI as eU,Qk as eV,kv as eW,Z2e as eX,KX as eY,sxe as eZ,LY as e_,oOe as ea,uOe as eb,nr as ec,Sne as ed,Ga as ee,SOe as ef,vOe as eg,yO as eh,r0 as ei,SN as ej,MOe as ek,IOe as el,TOe as em,CD as en,$Oe as eo,AOe as ep,COe as eq,NK as er,hx as es,rOe as et,_Oe as eu,bOe as ev,fOe as ew,jOe as ex,NOe as ey,LOe as ez,tlt as f,tPe as f$,Pde as f0,Hat as f1,$p as f2,_ot as f3,yot as f4,vot as f5,got as f6,bot as f7,G2 as f8,Dl as f9,wIe as fA,m8e as fB,Nr as fC,bat as fD,Bot as fE,FN as fF,SU as fG,hot as fH,Lot as fI,L8 as fJ,E5e as fK,WB as fL,Up as fM,Tl as fN,yU as fO,hm as fP,e0 as fQ,xa as fR,qat as fS,elt as fT,VK as fU,ZZ as fV,Gf as fW,en as fX,ua as fY,ng as fZ,Ft as f_,o1e as fa,x4 as fb,wot as fc,Go as fd,sm as fe,Sv as ff,b4 as fg,fK as fh,Bf as fi,hat as fj,X2 as fk,gat as fl,g8 as fm,lg as fn,C1 as fo,zat as fp,vat as fq,n3e as fr,qf as fs,Hf as ft,Op as fu,H8 as fv,Ii as fw,q8 as fx,J8 as fy,$I as fz,N2 as g,Rm as g$,Zbe as g0,JV as g1,P4 as g2,WV as g3,ky as g4,ap as g5,Ar as g6,li as g7,Lr as g8,pt as g9,tl as gA,Sp as gB,Os as gC,Nue as gD,Flt as gE,iM as gF,rg as gG,jlt as gH,_ae as gI,$u as gJ,Aa as gK,CT as gL,VNe as gM,Lo as gN,En as gO,goe as gP,pm as gQ,Nhe as gR,yL as gS,Dlt as gT,Ep as gU,Qo as gV,Bt as gW,kx as gX,WF as gY,JQe as gZ,OS as g_,Vi as ga,dn as gb,ut as gc,In as gd,Tr as ge,Ct as gf,ci as gg,ti as gh,kA as gi,Pu as gj,qp as gk,Hp as gl,Ci as gm,vKe as gn,Xr as go,u0 as gp,LF as gq,ar as gr,cj as gs,Plt as gt,Nlt as gu,Wt as gv,vs as gw,un as gx,VS as gy,JF as gz,fs as h,Uat as h$,hs as h0,Nf as h1,Get as h2,US as h3,Bn as h4,Nnt as h5,Cr as h6,qnt as h7,Dnt as h8,Rlt as h9,Eat as hA,tOe as hB,J0e as hC,hh as hD,Nme as hE,Rot as hF,Vot as hG,jat as hH,oX as hI,Zot as hJ,Jo as hK,La as hL,Y1e as hM,Jne as hN,dZ as hO,mZ as hP,s3e as hQ,xot as hR,kY as hS,pot as hT,uot as hU,yye as hV,Sye as hW,r4 as hX,Qst as hY,ebe as hZ,hN as h_,co as ha,Llt as hb,jT as hc,xA as hd,cs as he,Qs as hf,Dc as hg,eg as hh,kh as hi,Ip as hj,mf as hk,Gtt as hl,YLe as hm,gx as hn,ztt as ho,rT as hp,oa as hq,Yo as hr,bh as hs,FS as ht,Mx as hu,gg as hv,xF as hw,Lme as hx,eat as hy,zbe as hz,Ne as i,Aat as i$,$at as i0,Cte as i1,Ete as i2,bf as i3,kst as i4,XPe as i5,iY as i6,xO as i7,Lst as i8,Nst as i9,lb as iA,ub as iB,$8e as iC,k8e as iD,Tge as iE,nU as iF,z8e as iG,Q8e as iH,$_e as iI,wv as iJ,Ma as iK,Qt as iL,Gge as iM,Hge as iN,Qge as iO,i0e as iP,yY as iQ,fY as iR,mY as iS,r0e as iT,l0e as iU,u0e as iV,Bge as iW,uf as iX,Ust as iY,GL as iZ,c9 as i_,lI as ia,uI as ib,_ge as ic,not as id,Nge as ie,Z_ as ig,oY as ih,eot as ii,qge as ij,gY as ik,P_e as il,C_e as im,A_e as io,M_e as ip,Ige as iq,Wot as ir,nlt as is,VX as it,gS as iu,s2e as iv,Pge as iw,n2e as ix,ege as iy,Zst as iz,Lt as j,Obe as j$,Nat as j0,fte as j1,sx as j2,Kat as j3,gte as j4,Yat as j5,kot as j6,Ap as j7,Y1 as j8,iee as j9,Dst as jA,Age as jB,fr as jC,sg as jD,Dve as jE,gB as jF,nMe as jG,YEe as jH,dat as jI,qSe as jJ,mat as jK,fat as jL,yat as jM,c5e as jN,pf as jO,aY as jP,Olt as jQ,xge as jR,vge as jS,lY as jT,v4 as jU,gb as jV,L_e as jW,sot as jX,H5 as jY,Q6e as jZ,rge as j_,o_e as ja,Cat as jb,kN as jc,Sot as jd,Eot as je,Mot as jf,v0e as jg,No as jh,G_ as ji,PMe as jj,AMe as jk,OB as jl,mte as jm,Dat as jn,Rwe as jo,tat as jp,Dde as jq,cC as jr,hC as js,zpe as jt,fi as ju,Tat as jv,Cst as jw,nLe as jx,Pat as jy,D4 as jz,wt as k,jV as k$,Ype as k0,Sst as k1,xst as k2,bme as k3,cN as k4,F0e as k5,fo as k6,clt as k7,alt as k8,ult as k9,m_e as kA,u9 as kB,g_e as kC,v_e as kD,VN as kE,Ag as kF,pIe as kG,cIe as kH,aIe as kI,pU as kJ,Mn as kK,B2 as kL,v9 as kM,So as kN,la as kO,_f as kP,Ul as kQ,Vp as kR,cxe as kS,k4 as kT,K2e as kU,O4 as kV,gU as kW,PY as kX,Bxe as kY,g9 as kZ,dS as k_,olt as ka,D0e as kb,Bi as kc,Dot as kd,zot as ke,Got as kf,Ult as kg,Qg as kh,Xg as ki,Sb as kj,u6 as kk,sat as kl,I9 as km,YX as kn,vX as ko,hS as kp,qxe as kq,zs as kr,tme as ks,sQ as kt,f4e as ku,l9 as kv,iN as kw,oat as kx,ixe as ky,QX as kz,Hot as l,bt as l$,n2 as l0,uS as l1,rxe as l2,x9 as l3,S9 as l4,It as l5,R9 as l6,b8 as l7,y_e as l8,D3e as l9,w3e as lA,Sf as lB,w8 as lC,rlt as lD,Yx as lE,tK as lF,iS as lG,K2 as lH,zo as lI,Ba as lJ,cve as lK,e4 as lL,zT as lM,qot as lN,ur as lO,Fst as lP,Gpe as lQ,IU as lR,jN as lS,Not as lT,Pot as lU,mb as lV,dSe as lW,XY as lX,CK as lY,Mst as lZ,bX as l_,qEe as la,xat as lb,Mat as lc,tte as ld,CEe as le,N3e as lf,Sat as lg,Vee as lh,k9 as li,wat as lj,_at as lk,H3e as ll,mS as lm,Iat as ln,IEe as lo,C5e as lp,yu as lq,pat as lr,i5e as ls,D9 as lt,aEe as lu,F9 as lv,X1 as lw,lEe as lx,nEe as ly,j9 as lz,Pe as m,o2e as m$,xf as m0,RV as m1,hee as m2,Z2 as m3,vb as m4,axe as m5,oxe as m6,ob as m7,PQ as m8,sb as m9,plt as mA,flt as mB,mlt as mC,glt as mD,sOe as mE,DG as mF,ylt as mG,kOe as mH,Z4 as mI,Ine as mJ,Tne as mK,Xot as mL,qg as mM,FF as mN,Qot as mO,_9 as mP,dot as mQ,Cp as mR,PN as mS,Uf as mT,see as mU,ooe as mV,Xpe as mW,Vme as mX,iot as mY,Fot as mZ,jot as m_,Du as ma,qu as mb,Vst as mc,gQ as md,nxe as me,Dj as mf,pe as mg,Jot as mh,F8 as mi,Nd as mj,zte as mk,$lt as ml,ilt as mm,lN as mn,ige as mo,blt as mp,LG as mq,hlt as mr,PG as ms,OOe as mt,vlt as mu,xlt as mv,ZX as mw,_lt as mx,t5 as my,dlt as mz,AK as n,E4 as n0,Pp as n1,EI as n2,tge as n3,Uot as n4,sY as n5,zst as n6,N_e as n7,tY as n8,qst as n9,oot as na,rye as nb,Kot as nc,pSe as nd,Gat as ne,Wat as nf,Jat as ng,Zat as nh,Qat as ni,Xat as nj,DX as o,jB as p,JMe as q,Tb as r,$e as s,Kxe as t,Hl as u,jn as v,LMe as w,t5e as x,Yst as y,cte as z};
