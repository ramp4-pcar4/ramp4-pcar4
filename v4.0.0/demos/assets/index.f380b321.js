import{g6 as p,gv as o,g7 as d,g9 as h,gf as u,gc as c,gm as l,gs as m}from"./main.efb50b2c.js";import"./preload-helper.387dac8f.js";var g={en:{"panguard.instructions":"Use two fingers to pan the map"},fr:{"panguard.instructions":"Utilisez deux doigts pour faire un panoramique de la carte"}};const f=p({name:"MapPanguardV",data(){return{timeoutID:-1,esriHandlers:[],rampHanders:[]}},mounted(){this.setup(),this.rampHanders.push(this.$iApi.event.on(o.MAP_CREATED,()=>{this.setup()})),this.rampHanders.push(this.$iApi.event.on(o.MAP_DESTROYED,()=>{this.esriHandlers.forEach(e=>e.remove())})),this.rampHanders.push(this.$iApi.event.on(o.MAP_REFRESH_START,()=>{this.esriHandlers.forEach(e=>e.remove())})),this.rampHanders.push(this.$iApi.event.on(o.MAP_REFRESH_END,()=>{this.setup()}))},beforeUnmount(){this.rampHanders.forEach(e=>this.$iApi.event.off(e)),this.esriHandlers.forEach(e=>e.remove())},methods:{setup(){const e=new Map;this.$iApi.geo.map.viewPromise.then(()=>{this.esriHandlers.push(this.$iApi.geo.map.esriView.on("pointer-down",t=>{t.pointerType==="touch"&&e.set(t.pointerId,{x:t.x,y:t.y})})),this.esriHandlers.push(this.$iApi.geo.map.esriView.on(["pointer-up","pointer-leave"],t=>{t.pointerType==="touch"&&window.setTimeout(()=>{e.delete(t.pointerId)},200)})),this.esriHandlers.push(this.$iApi.geo.map.esriView.on("pointer-move",t=>{const{pointerId:a,pointerType:n,x:r,y:i}=t,s=e.get(a);if(!s||n!=="touch"||e.size!==1){this.$el.classList.remove("pg-active");return}Math.sqrt(Math.pow(r-s.x,2)+Math.pow(i-s.y,2))<20||(this.$el.classList.add("pg-active"),this.timeoutID!==-1&&clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(()=>{this.$el.classList.remove("pg-active")},2e3),window.scrollBy(s.x-r,s.y-i))}))})}}}),v={class:"pg",ref:"panGuard"},_={class:"pg-label"};function $(e,t,a,n,r,i){return h(),u("div",v,[c("p",_,l(e.$t("panguard.instructions")),1)],512)}var w=d(f,[["render",$],["__scopeId","data-v-21659f52"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/panguard/map-panguard.vue"]]);class x extends m{added(){Object.entries(g).forEach(i=>this.$vApp.$i18n.mergeLocaleMessage(...i));const{vNode:t,destroy:a,el:n}=this.mount(w,{app:this.$element});this.$vApp.$el.getElementsByClassName("inner-shell")[0].appendChild(n.childNodes[0]),this.removed=()=>{a()}}}export{x as default};
