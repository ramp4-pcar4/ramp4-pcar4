import{dG as Es,R as Tt}from"./main.efb50b2c.js";import"./preload-helper.387dac8f.js";function Ss(l,u){const o=_t[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function Cs(l,u){const o=_t[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const _t={min:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.min.apply(Math,l[0])},max:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.max.apply(Math,l[0])},avg:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Ft(l[0])},sum:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Ps(l[0])},stddev:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sqrt(At(l[0]))},count:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].length},var:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:At(l[0])}};function Ft(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u/l.length}function Ps(l){let u=0;for(let o=0;o<l.length;o++)u+=l[o];return u}function At(l){const u=Ft(l),o=l.length;let p=0;for(const i of l)p+=(i-u)**2;return o>1?p/(o-1):0}class _{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(u){if(u.precision!==null||u.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(u){const o=new _;return o.second=u/1e3,o}static createFromValueAndQualifer(u,o,p){let i=null;const v=new _;if(v.op=p==="-"?"-":"+",o.type==="interval-period"){_._fixDefaults(o);const m=new RegExp("^[0-9]{1,}$");if(o.period==="year"||o.period==="month")throw new Error("Year-Month Intervals not supported");if(!m.test(u))throw new Error("Illegal Interval");v[o.period]=parseFloat(u)}else{if(_._fixDefaults(o.start),_._fixDefaults(o.end),o.start.period==="year"||o.start.period==="month")throw new Error("Year-Month Intervals not supported");if(o.end.period==="year"||o.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(o.start.period){case"day":switch(o.end.period){case"hour":if(i=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v[o.start.period]=parseFloat(u.split(" ")[0]),v[o.end.period]=parseFloat(u.split(" ")[1]);break;case"minute":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1])}break;case"second":if(i=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{v[o.start.period]=parseFloat(u.split(" ")[0]);const m=u.split(" ")[1].split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(o.end.period){case"minute":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!i.test(u))throw new Error("Illegal Interval");v.hour=parseFloat(u.split(":")[0]),v.minute=parseFloat(u.split(":")[1]);break;case"second":if(i=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.hour=parseFloat(m[0]),v.minute=parseFloat(m[1]),v.second=parseFloat(m[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(o.end.period!=="second")throw new Error("Invalid Interval.");if(i=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!i.test(u))throw new Error("Illegal Interval");{const m=u.split(":");v.minute=parseFloat(m[0]),v.second=parseFloat(m[1])}break;default:throw new Error("Invalid Interval.")}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function Lt(l,u){const o=Mt[l.toLowerCase()];if(o==null)throw new Error("Function Not Recognised");if(u.length<o.minParams||u.length>o.maxParams)throw new Error(`Invalid Parameter count for call to ${l.toUpperCase()}`);return o.evaluate(u)}function _s(l,u){const o=Mt[l.toLowerCase()];return o!=null&&u>=o.minParams&&u<=o.maxParams}const Mt={extract:{minParams:2,maxParams:2,evaluate:([l,u])=>{if(u==null)return null;if(u instanceof Date)switch(l.toUpperCase()){case"SECOND":return u.getSeconds();case"MINUTE":return u.getMinutes();case"HOUR":return u.getHours();case"DAY":return u.getDate();case"MONTH":return u.getMonth()+1;case"YEAR":return u.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:l=>{if(l.length===2){const[u,o]=l;return u==null||o==null?null:u.toString().substring(o-1)}if(l.length===3){const[u,o,p]=l;return u==null||o==null||p==null?null:p<=0?"":u.toString().substring(o-1,o+p-1)}}},position:{minParams:2,maxParams:2,evaluate:([l,u])=>l==null||u==null?null:u.indexOf(l)+1},trim:{minParams:2,maxParams:3,evaluate:l=>{const u=l.length===3,o=u?l[1]:" ",p=u?l[2]:l[1];if(o==null||p==null)return null;const i=`(${Es(o)})`;switch(l[0]){case"BOTH":return p.replace(new RegExp(`^${i}*|${i}*$`,"g"),"");case"LEADING":return p.replace(new RegExp(`^${i}*`,"g"),"");case"TRAILING":return p.replace(new RegExp(`${i}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.abs(l[0])},ceiling:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.ceil(l[0])},floor:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.floor(l[0])},log:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])},log10:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.log(l[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.sin(l[0])},cos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.cos(l[0])},tan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.tan(l[0])},asin:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.asin(l[0])},acos:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.acos(l[0])},atan:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:Math.atan(l[0])},sign:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0]>0?1:l[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]**l[1]},mod:{minParams:2,maxParams:2,evaluate:l=>l[0]==null||l[1]==null?null:l[0]%l[1]},round:{minParams:1,maxParams:2,evaluate:l=>{const u=l[0],o=l.length===2?10**l[1]:1;return u==null?null:Math.round(u*o)/o}},truncate:{minParams:1,maxParams:2,evaluate:l=>l[0]==null?null:l.length===1?parseInt(l[0].toFixed(0),10):parseFloat(l[0].toFixed(l[1]))},char_length:{minParams:1,maxParams:1,evaluate:l=>typeof l[0]=="string"||l[0]instanceof String?l[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:l=>{let u="";for(let o=0;o<l.length;o++){if(l[o]==null)return null;u+=l[o].toString()}return u}},lower:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:l=>l[0]==null?null:l[0].toString().toUpperCase()}};var It,Et,Dt={exports:{}};Et=function(){function l(i,v){function m(){this.constructor=i}m.prototype=v.prototype,i.prototype=new m}function u(i,v,m,t){var N=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(N,u.prototype),N.expected=v,N.found=m,N.location=t,N.name="SyntaxError",N}function o(i,v,m){return m=m||" ",i.length>v?i:(v-=i.length,i+(m+=m.repeat(v)).slice(0,v))}function p(i,v){var m,t={},N=(v=v!==void 0?v:{}).grammarSource,T={start:ze},F=ze,$="!",D="=",x=">=",E=">",L="<=",S="<>",qt="<",Ee="!=",oe="+",ie="-",Bt="*",jt="/",Gt="@",Se="'",Ce="N'",z="''",Yt=".",zt="null",Wt="true",Kt="false",Zt="in",Qt="is",Xt="like",er="escape",tr="not",rr="and",nr="or",ar="between",ur="from",sr="for",or="substring",ir="extract",lr="trim",cr="position",fr="timestamp",pr="date",vr="leading",hr="trailing",dr="both",mr="to",gr="interval",wr="year",yr="month",Nr="day",br="hour",xr="minute",Tr="second",Ar="case",Ir="end",Er="when",Sr="then",Cr="else",Pr=",",_r="(",Fr=")",Pe="`",Lr=/^[A-Za-z_\x80-\uFFFF]/,Mr=/^[A-Za-z0-9_]/,Dr=/^[A-Za-z0-9_.\x80-\uFFFF]/,_e=/^[^']/,Or=/^[0-9]/,Rr=/^[eE]/,Jr=/^[+\-]/,$r=/^[ \t\n\r]/,Fe=/^[^`]/,kr=g("!",!1),Le=g("=",!1),Ur=g(">=",!1),Hr=g(">",!1),Vr=g("<=",!1),qr=g("<>",!1),Br=g("<",!1),jr=g("!=",!1),le=g("+",!1),ce=g("-",!1),Gr=g("*",!1),Yr=g("/",!1),zr=O([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),Wr=O([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Kr=O([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),Zr=g("@",!1),Me=g("'",!1),Qr=g("N'",!1),De=g("''",!1),Oe=O(["'"],!0,!1),Xr=g(".",!1),en=O([["0","9"]],!1,!1),tn=O(["e","E"],!1,!1),rn=O(["+","-"],!1,!1),nn=g("NULL",!0),an=g("TRUE",!0),un=g("FALSE",!0),sn=g("IN",!0),on=g("IS",!0),ln=g("LIKE",!0),cn=g("ESCAPE",!0),fn=g("NOT",!0),pn=g("AND",!0),vn=g("OR",!0),hn=g("BETWEEN",!0),dn=g("FROM",!0),mn=g("FOR",!0),gn=g("SUBSTRING",!0),wn=g("EXTRACT",!0),yn=g("TRIM",!0),Nn=g("POSITION",!0),bn=g("TIMESTAMP",!0),xn=g("DATE",!0),Tn=g("LEADING",!0),An=g("TRAILING",!0),In=g("BOTH",!0),En=g("TO",!0),Sn=g("INTERVAL",!0),Cn=g("YEAR",!0),Pn=g("MONTH",!0),_n=g("DAY",!0),Fn=g("HOUR",!0),Ln=g("MINUTE",!0),Mn=g("SECOND",!0),Dn=g("CASE",!0),On=g("END",!0),Rn=g("WHEN",!0),Jn=g("THEN",!0),$n=g("ELSE",!0),kn=g(",",!1),Un=g("(",!1),Hn=g(")",!1),Vn=O([" ","	",`
`,"\r"],!1,!1),Re=g("`",!1),Je=O(["`"],!0,!1),qn=function(e){return e},Bn=function(e,n){var a={type:"expression-list"},s=Is(e,n);return a.value=s,a},fe=function(e,n){return xe(e,n)},jn=function(e){return Ts("NOT",e)},Gn=function(e,n){return n==""||n==null||n==null?e:n.type=="arithmetic"?xe(e,n.tail):xt(n.op,e,n.right,n.escape)},Yn=function(e){return{type:"arithmetic",tail:e}},zn=function(e,n){return{op:e+"NOT",right:n}},Wn=function(e,n){return{op:e,right:n}},Kn=function(e,n,a){return{op:"NOT"+e,right:{type:"expression-list",value:[n,a]}}},Zn=function(e,n,a){return{op:e,right:{type:"expression-list",value:[n,a]}}},$e=function(e){return e[0]+" "+e[2]},Qn=function(e,n,a){return{op:e,right:n,escape:a.value}},Xn=function(e,n){return{op:e,right:n,escape:""}},ea=function(e,n){return{op:e,right:n}},ta=function(e){return{op:e,right:{type:"expression-list",value:[]}}},ra=function(e,n){return{op:e,right:n}},na=function(e,n){return xe(e,n)},aa=function(e){return e.paren=!0,e},ua=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},ke=function(e){return e},Ue=function(e,n){return e+n.join("")},sa=function(e){return{type:"parameter",value:e[1]}},oa=function(e,n){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},n]}}},ia=function(e,n,a){return{type:"function",name:"substring",args:{type:"expression-list",value:a?[e,n,a[2]]:[e,n]}}},la=function(e,n,a){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},n,a]}}},ca=function(e,n){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},n]}}},fa=function(e,n){return{type:"function",name:"position",args:{type:"expression-list",value:[e,n]}}},pa=function(e,n){return{type:"function",name:e,args:n||{type:"expression-list",value:[]}}},va=function(e){return{type:"timestamp",value:e.value}},ha=function(e,n,a){return{type:"interval",value:n,qualifier:a,op:e}},da=function(e,n){return{type:"interval",value:e,qualifier:n,op:""}},ma=function(e,n){return{type:"interval-qualifier",start:e,end:n}},ga=function(e,n){return{type:"interval-period",period:e.value,precision:n,secondary:null}},He=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},wa=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Ve=function(e,n){return{type:"interval-period",period:"second",precision:e,secondary:n}},ya=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Na=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},ba=function(e,n){return{type:"interval-period",period:e.value,precision:n,secondary:null}},xa=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},Ta=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Aa=function(){return{type:"string",value:"day"}},Ia=function(){return{type:"string",value:"hour"}},Ea=function(){return{type:"string",value:"minute"}},Sa=function(){return{type:"string",value:"month"}},Ca=function(){return{type:"string",value:"year"}},qe=function(e){return parseFloat(e)},Pa=function(e){return{type:"date",value:e.value}},_a=function(){return{type:"null",value:null}},Fa=function(){return{type:"boolean",value:!0}},La=function(){return{type:"boolean",value:!1}},Be=function(){return"'"},Ma=function(e){return{type:"string",value:e.join("")}},Da=function(e,n){return{type:"case-expression",format:"simple",operand:e,clauses:n,else:null}},Oa=function(e,n,a){return{type:"case-expression",format:"simple",operand:e,clauses:n,else:a.value}},Ra=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},Ja=function(e,n){return{type:"case-expression",format:"searched",clauses:e,else:n.value}},je=function(e,n){return{type:"when-clause",operand:e,value:n}},$a=function(e){return{type:"else-clause",value:e}},ka=function(e){return{type:"number",value:e}},Ua=function(e,n,a){return parseFloat(e+n+a)},Ha=function(e,n){return parseFloat(e+n)},Va=function(e,n){return parseFloat(e+n)},qa=function(e){return parseFloat(e)},Ba=function(e,n){return e[0]+n},ja=function(e){return"."+(e??"")},Ga=function(e,n){return e+n},Ya=function(e){return e.join("")},za=function(e,n){return"e"+(n===null?"":n)},Wa=function(){return"IN"},Ka=function(){return"IS"},Za=function(){return"LIKE"},Qa=function(){return"ESCAPE"},Xa=function(){return"NOT"},eu=function(){return"AND"},tu=function(){return"OR"},ru=function(){return"BETWEEN"},nu=function(){return"FROM"},au=function(){return"FOR"},uu=function(){return"SUBSTRING"},su=function(){return"EXTRACT"},ou=function(){return"TRIM"},iu=function(){return"POSITION"},lu=function(){return"TIMESTAMP"},cu=function(){return"DATE"},fu=function(){return"LEADING"},pu=function(){return"TRAILING"},vu=function(){return"BOTH"},hu=function(){return"TO"},du=function(){return"INTERVAL"},mu=function(){return"YEAR"},gu=function(){return"MONTH"},wu=function(){return"DAY"},yu=function(){return"HOUR"},Nu=function(){return"MINUTE"},bu=function(){return"SECOND"},xu=function(){return"CASE"},Tu=function(){return"END"},Au=function(){return"WHEN"},Iu=function(){return"THEN"},Eu=function(){return"ELSE"},Su=function(e){return e.join("")},r=0,W=[{line:1,column:1}],M=0,pe=[],c=0;if("startRule"in v){if(!(v.startRule in T))throw new Error(`Can't start parsing from rule "`+v.startRule+'".');F=T[v.startRule]}function g(e,n){return{type:"literal",text:e,ignoreCase:n}}function O(e,n,a){return{type:"class",parts:e,inverted:n,ignoreCase:a}}function Cu(){return{type:"end"}}function Ge(e){var n,a=W[e];if(a)return a;for(n=e-1;!W[n];)n--;for(a={line:(a=W[n]).line,column:a.column};n<e;)i.charCodeAt(n)===10?(a.line++,a.column=1):a.column++,n++;return W[e]=a,a}function Ye(e,n){var a=Ge(e),s=Ge(n);return{source:N,start:{offset:e,line:a.line,column:a.column},end:{offset:n,line:s.line,column:s.column}}}function h(e){r<M||(r>M&&(M=r,pe=[]),pe.push(e))}function Pu(e,n,a){return new u(u.buildMessage(e,n),e,n,a)}function ze(){var e,n;return e=r,f(),(n=I())!==t?(f(),e=qn(n)):(r=e,e=t),e}function We(){var e,n,a,s,d,y,b,A;if(e=r,(n=I())!==t){for(a=[],s=r,d=f(),(y=ue())!==t?(b=f(),(A=I())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);s!==t;)a.push(s),s=r,d=f(),(y=ue())!==t?(b=f(),(A=I())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);e=Bn(n,a)}else r=e,e=t;return e}function I(){var e,n,a,s,d,y,b,A;if(e=r,(n=ve())!==t){for(a=[],s=r,d=f(),(y=ct())!==t?(b=f(),(A=ve())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);s!==t;)a.push(s),s=r,d=f(),(y=ct())!==t?(b=f(),(A=ve())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);e=fe(n,a)}else r=e,e=t;return e}function ve(){var e,n,a,s,d,y,b,A;if(e=r,(n=K())!==t){for(a=[],s=r,d=f(),(y=re())!==t?(b=f(),(A=K())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);s!==t;)a.push(s),s=r,d=f(),(y=re())!==t?(b=f(),(A=K())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);e=fe(n,a)}else r=e,e=t;return e}function K(){var e,n,a,s,d;return e=r,(n=G())===t&&(n=r,i.charCodeAt(r)===33?(a=$,r++):(a=t,c===0&&h(kr)),a!==t?(s=r,c++,i.charCodeAt(r)===61?(d=D,r++):(d=t,c===0&&h(Le)),c--,d===t?s=void 0:(r=s,s=t),s!==t?n=a=[a,s]:(r=n,n=t)):(r=n,n=t)),n!==t?(a=f(),(s=K())!==t?e=jn(s):(r=e,e=t)):(r=e,e=t),e===t&&(e=_u()),e}function _u(){var e,n,a;return e=r,(n=R())!==t?(f(),(a=Fu())===t&&(a=null),e=Gn(n,a)):(r=e,e=t),e}function Fu(){var e;return(e=Lu())===t&&(e=Ru())===t&&(e=Du())===t&&(e=Mu())===t&&(e=Ou()),e}function Lu(){var e,n,a,s,d,y;if(e=[],n=r,a=f(),(s=Ke())!==t?(d=f(),(y=R())!==t?n=a=[a,s,d,y]:(r=n,n=t)):(r=n,n=t),n!==t)for(;n!==t;)e.push(n),n=r,a=f(),(s=Ke())!==t?(d=f(),(y=R())!==t?n=a=[a,s,d,y]:(r=n,n=t)):(r=n,n=t);else e=t;return e!==t&&(e=Yn(e)),e}function Ke(){var e;return i.substr(r,2)===x?(e=x,r+=2):(e=t,c===0&&h(Ur)),e===t&&(i.charCodeAt(r)===62?(e=E,r++):(e=t,c===0&&h(Hr)),e===t&&(i.substr(r,2)===L?(e=L,r+=2):(e=t,c===0&&h(Vr)),e===t&&(i.substr(r,2)===S?(e=S,r+=2):(e=t,c===0&&h(qr)),e===t&&(i.charCodeAt(r)===60?(e=qt,r++):(e=t,c===0&&h(Br)),e===t&&(i.charCodeAt(r)===61?(e=D,r++):(e=t,c===0&&h(Le)),e===t&&(i.substr(r,2)===Ee?(e=Ee,r+=2):(e=t,c===0&&h(jr)))))))),e}function Mu(){var e,n,a,s;return e=r,(n=it())!==t?(f(),(a=G())!==t?(f(),(s=R())!==t?e=zn(n,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=it())!==t?(f(),(a=R())!==t?e=Wn(n,a):(r=e,e=t)):(r=e,e=t)),e}function Du(){var e,n,a,s,d,y;return e=r,(n=G())!==t?(f(),(a=ft())!==t?(f(),(s=R())!==t?(f(),(d=re())!==t?(f(),(y=R())!==t?e=Kn(a,s,y):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=ft())!==t?(f(),(a=R())!==t?(f(),(s=re())!==t?(f(),(d=R())!==t?e=Zn(n,a,d):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Ze(){var e,n,a,s,d;return e=r,n=r,(a=G())!==t?(s=f(),(d=lt())!==t?n=a=[a,s,d]:(r=n,n=t)):(r=n,n=t),n!==t&&(n=$e(n)),(e=n)===t&&(e=lt()),e}function he(){var e,n,a,s,d;return e=r,n=r,(a=G())!==t?(s=f(),(d=Ne())!==t?n=a=[a,s,d]:(r=n,n=t)):(r=n,n=t),n!==t&&(n=$e(n)),(e=n)===t&&(e=Ne()),e}function Ou(){var e,n,a,s;return e=r,(n=Ze())!==t?(f(),(a=V())!==t?(f(),cs()!==t?(f(),(s=ye())!==t?e=Qn(n,a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=Ze())!==t?(f(),(a=V())!==t?e=Xn(n,a):(r=e,e=t)):(r=e,e=t)),e}function Ru(){var e,n,a,s;return e=r,(n=he())!==t?(f(),(a=C())!==t?(f(),(s=We())!==t?(f(),P()!==t?e=ea(n,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=he())!==t?(f(),(a=C())!==t?(f(),(s=P())!==t?e=ta(n):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=he())!==t?(f(),(a=we())!==t?e=ra(n,a):(r=e,e=t)):(r=e,e=t))),e}function R(){var e,n,a,s,d,y,b,A;if(e=r,(n=de())!==t){for(a=[],s=r,d=f(),(y=Qe())!==t?(b=f(),(A=de())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);s!==t;)a.push(s),s=r,d=f(),(y=Qe())!==t?(b=f(),(A=de())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);e=fe(n,a)}else r=e,e=t;return e}function Qe(){var e;return i.charCodeAt(r)===43?(e=oe,r++):(e=t,c===0&&h(le)),e===t&&(i.charCodeAt(r)===45?(e=ie,r++):(e=t,c===0&&h(ce))),e}function de(){var e,n,a,s,d,y,b,A;if(e=r,(n=me())!==t){for(a=[],s=r,d=f(),(y=Xe())!==t?(b=f(),(A=me())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);s!==t;)a.push(s),s=r,d=f(),(y=Xe())!==t?(b=f(),(A=me())!==t?s=d=[d,y,b,A]:(r=s,s=t)):(r=s,s=t);e=na(n,a)}else r=e,e=t;return e}function Xe(){var e;return i.charCodeAt(r)===42?(e=Bt,r++):(e=t,c===0&&h(Gr)),e===t&&(i.charCodeAt(r)===47?(e=jt,r++):(e=t,c===0&&h(Yr))),e}function me(){var e,n;return(e=Gu())===t&&(e=Uu())===t&&(e=Hu())===t&&(e=Vu())===t&&(e=qu())===t&&(e=Bu())===t&&(e=ts())===t&&(e=Ju())===t&&(e=we())===t&&(e=r,C()!==t?(f(),(n=I())!==t?(f(),P()!==t?e=aa(n):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Ju(){var e;return(e=$u())!==t&&(e=ua(e)),e}function $u(){var e;return(e=ku())!==t&&(e=ke(e)),e}function ku(){var e,n,a,s;if(e=r,(n=ge())!==t){for(a=[],s=tt();s!==t;)a.push(s),s=tt();e=Ue(n,a)}else r=e,e=t;return e}function et(){var e,n,a,s;if(e=r,(n=ge())!==t){for(a=[],s=w();s!==t;)a.push(s),s=w();e=Ue(n,a)}else r=e,e=t;return e}function ge(){var e;return Lr.test(i.charAt(r))?(e=i.charAt(r),r++):(e=t,c===0&&h(zr)),e}function w(){var e;return Mr.test(i.charAt(r))?(e=i.charAt(r),r++):(e=t,c===0&&h(Wr)),e}function tt(){var e;return Dr.test(i.charAt(r))?(e=i.charAt(r),r++):(e=t,c===0&&h(Kr)),e}function we(){var e,n,a;return e=r,i.charCodeAt(r)===64?(n=Gt,r++):(n=t,c===0&&h(Zr)),n!==t&&(a=et())!==t?e=n=[n,a]:(r=e,e=t),e!==t&&(e=sa(e)),e}function Uu(){var e,n,a;return e=r,vs()!==t?(f(),C()!==t?(f(),(n=ju())!==t?(f(),be()!==t?(f(),(a=I())!==t?(f(),P()!==t?e=oa(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Hu(){var e,n,a,s,d,y,b;return e=r,ps()!==t?(f(),C()!==t?(f(),(n=I())!==t?(f(),be()!==t?(f(),(a=I())!==t?(f(),s=r,(d=fs())!==t?(y=f(),(b=I())!==t?s=d=[d,y,b,f()]:(r=s,s=t)):(r=s,s=t),s===t&&(s=null),(d=P())!==t?e=ia(n,a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Vu(){var e,n,a,s;return e=r,pt()!==t?(f(),C()!==t?(f(),(n=rt())===t&&(n=null),f(),(a=I())!==t?(f(),be()!==t?(f(),(s=I())!==t?(f(),P()!==t?e=la(n,a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,pt()!==t?(f(),C()!==t?(f(),(n=rt())===t&&(n=null),f(),(a=I())!==t?(f(),P()!==t?e=ca(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function rt(){var e;return(e=gs())===t&&(e=ws())===t&&(e=ys()),e}function qu(){var e,n,a;return e=r,hs()!==t?(f(),C()!==t?(f(),(n=I())!==t?(f(),Ne()!==t?(f(),(a=I())!==t?(f(),P()!==t?e=fa(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Bu(){var e,n,a;return e=r,(n=xs())!==t?(f(),C()!==t?(f(),(a=We())===t&&(a=null),f(),P()!==t?e=pa(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function ju(){var e;return(e=ht())===t&&(e=dt())===t&&(e=mt())===t&&(e=gt())===t&&(e=wt())===t&&(e=k()),e}function Gu(){var e;return(e=ye())===t&&(e=as())===t&&(e=es())===t&&(e=Xu())===t&&(e=Qu())===t&&(e=Yu())===t&&(e=zu()),e}function Yu(){var e,n;return e=r,ds()!==t?(f(),(n=V())!==t?e=va(n):(r=e,e=t)):(r=e,e=t),e}function zu(){var e,n,a,s;return e=r,vt()!==t?(f(),i.charCodeAt(r)===45?(n=ie,r++):(n=t,c===0&&h(ce)),n===t&&(i.charCodeAt(r)===43?(n=oe,r++):(n=t,c===0&&h(le))),n!==t?(f(),(a=V())!==t?(f(),(s=nt())!==t?e=ha(n,a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,vt()!==t?(f(),(n=V())!==t?(f(),(a=nt())!==t?e=da(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function nt(){var e,n,a;return e=r,(n=Wu())!==t?(f(),Ns()!==t?(f(),(a=Ku())!==t?e=ma(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=Zu()),e}function Wu(){var e,n,a;return e=r,(n=j())!==t?(f(),C()!==t?(f(),(a=Q())!==t?(f(),P()!==t?e=ga(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=j())!==t&&(n=He(n)),e=n),e}function Ku(){var e,n,a,s;return e=r,(n=j())!==t&&(n=wa(n)),(e=n)===t&&(e=r,(n=k())!==t?(f(),C()!==t?(f(),(a=Q())!==t?(f(),ue()!==t?(f(),(s=Z())!==t?(f(),P()!==t?e=Ve(a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=k())!==t?(f(),C()!==t?(f(),(a=Q())!==t?(f(),P()!==t?e=ya(a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=k())!==t&&(n=Na()),e=n))),e}function Zu(){var e,n,a,s;return e=r,(n=j())!==t?(f(),C()!==t?(f(),(a=Z())!==t?(f(),P()!==t?e=ba(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=j())!==t&&(n=He(n)),(e=n)===t&&(e=r,(n=k())!==t?(f(),C()!==t?(f(),(a=Q())!==t?(f(),ue()!==t?(f(),(s=Z())!==t?(f(),P()!==t?e=Ve(a,s):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=k())!==t?(f(),C()!==t?(f(),(a=Z())!==t?(f(),P()!==t?e=xa(a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,(n=k())!==t&&(n=Ta()),e=n)))),e}function j(){var e,n;return e=r,(n=mt())!==t&&(n=Aa()),(e=n)===t&&(e=r,(n=gt())!==t&&(n=Ia()),(e=n)===t&&(e=r,(n=wt())!==t&&(n=Ea()),(e=n)===t&&(e=r,(n=dt())!==t&&(n=Sa()),(e=n)===t&&(e=r,(n=ht())!==t&&(n=Ca()),e=n)))),e}function Z(){var e;return(e=q())!==t&&(e=qe(e)),e}function Q(){var e;return(e=q())!==t&&(e=qe(e)),e}function Qu(){var e,n;return e=r,ms()!==t?(f(),(n=V())!==t?e=Pa(n):(r=e,e=t)):(r=e,e=t),e}function Xu(){var e;return(e=os())!==t&&(e=_a()),e}function es(){var e,n;return e=r,(n=is())!==t&&(n=Fa()),(e=n)===t&&(e=r,(n=ls())!==t&&(n=La()),e=n),e}function V(){var e;return(e=ye())===t&&(e=we()),e}function ye(){var e,n,a,s,d;if(e=r,i.charCodeAt(r)===39?(n=Se,r++):(n=t,c===0&&h(Me)),n===t&&(i.substr(r,2)===Ce?(n=Ce,r+=2):(n=t,c===0&&h(Qr))),n!==t){for(a=[],s=r,i.substr(r,2)===z?(d=z,r+=2):(d=t,c===0&&h(De)),d!==t&&(d=Be()),(s=d)===t&&(_e.test(i.charAt(r))?(s=i.charAt(r),r++):(s=t,c===0&&h(Oe)));s!==t;)a.push(s),s=r,i.substr(r,2)===z?(d=z,r+=2):(d=t,c===0&&h(De)),d!==t&&(d=Be()),(s=d)===t&&(_e.test(i.charAt(r))?(s=i.charAt(r),r++):(s=t,c===0&&h(Oe)));i.charCodeAt(r)===39?(s=Se,r++):(s=t,c===0&&h(Me)),s!==t?e=Ma(a):(r=e,e=t)}else r=e,e=t;return e}function ts(){var e;return(e=rs())===t&&(e=ns()),e}function rs(){var e,n,a,s,d;if(e=r,ne()!==t)if(f(),(n=I())!==t){for(f(),a=[],s=ee();s!==t;)a.push(s),s=ee();s=f(),(d=ae())!==t?e=Da(n,a):(r=e,e=t)}else r=e,e=t;else r=e,e=t;if(e===t)if(e=r,ne()!==t)if(f(),(n=I())!==t){for(f(),a=[],s=ee();s!==t;)a.push(s),s=ee();s=f(),(d=at())!==t?(f(),ae()!==t?e=Oa(n,a,d):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;return e}function ns(){var e,n,a,s;if(e=r,ne()!==t){for(f(),n=[],a=X();a!==t;)n.push(a),a=X();a=f(),(s=ae())!==t?e=Ra(n):(r=e,e=t)}else r=e,e=t;if(e===t)if(e=r,ne()!==t){for(f(),n=[],a=X();a!==t;)n.push(a),a=X();a=f(),(s=at())!==t?(f(),ae()!==t?e=Ja(n,s):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function X(){var e,n,a;return e=r,yt()!==t?(f(),(n=I())!==t?(f(),Nt()!==t?(f(),(a=I())!==t?e=je(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function ee(){var e,n,a;return e=r,yt()!==t?(f(),(n=I())!==t?(f(),Nt()!==t?(f(),(a=I())!==t?e=je(n,a):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function at(){var e,n;return e=r,bs()!==t?(f(),(n=I())!==t?e=$a(n):(r=e,e=t)):(r=e,e=t),e}function as(){var e,n,a,s;return e=r,(n=us())!==t?(a=r,c++,s=ge(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=ka(n):(r=e,e=t)):(r=e,e=t),e}function us(){var e,n,a,s;return e=r,(n=te())!==t&&(a=ut())!==t&&(s=st())!==t?e=Ua(n,a,s):(r=e,e=t),e===t&&(e=r,(n=te())!==t&&(a=ut())!==t?e=Ha(n,a):(r=e,e=t),e===t&&(e=r,(n=te())!==t&&(a=st())!==t?e=Va(n,a):(r=e,e=t),e===t&&(e=r,(n=te())!==t&&(n=qa(n)),e=n))),e}function te(){var e,n,a;return(e=q())===t&&(e=r,i.charCodeAt(r)===45?(n=ie,r++):(n=t,c===0&&h(ce)),n===t&&(i.charCodeAt(r)===43?(n=oe,r++):(n=t,c===0&&h(le))),n!==t&&(a=q())!==t?e=Ba(n,a):(r=e,e=t)),e}function ut(){var e,n,a;return e=r,i.charCodeAt(r)===46?(n=Yt,r++):(n=t,c===0&&h(Xr)),n!==t?((a=q())===t&&(a=null),e=ja(a)):(r=e,e=t),e}function st(){var e,n,a;return e=r,(n=ss())!==t&&(a=q())!==t?e=Ga(n,a):(r=e,e=t),e}function q(){var e,n;if(e=[],(n=ot())!==t)for(;n!==t;)e.push(n),n=ot();else e=t;return e!==t&&(e=Ya(e)),e}function ot(){var e;return Or.test(i.charAt(r))?(e=i.charAt(r),r++):(e=t,c===0&&h(en)),e}function ss(){var e,n,a;return e=r,Rr.test(i.charAt(r))?(n=i.charAt(r),r++):(n=t,c===0&&h(tn)),n!==t?(Jr.test(i.charAt(r))?(a=i.charAt(r),r++):(a=t,c===0&&h(rn)),a===t&&(a=null),e=za(n,a)):(r=e,e=t),e}function os(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===zt?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(nn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=n=[n,a]:(r=e,e=t)):(r=e,e=t),e}function is(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Wt?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(an)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=n=[n,a]:(r=e,e=t)):(r=e,e=t),e}function ls(){var e,n,a,s;return e=r,i.substr(r,5).toLowerCase()===Kt?(n=i.substr(r,5),r+=5):(n=t,c===0&&h(un)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=n=[n,a]:(r=e,e=t)):(r=e,e=t),e}function Ne(){var e,n,a,s;return e=r,i.substr(r,2).toLowerCase()===Zt?(n=i.substr(r,2),r+=2):(n=t,c===0&&h(sn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Wa():(r=e,e=t)):(r=e,e=t),e}function it(){var e,n,a,s;return e=r,i.substr(r,2).toLowerCase()===Qt?(n=i.substr(r,2),r+=2):(n=t,c===0&&h(on)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Ka():(r=e,e=t)):(r=e,e=t),e}function lt(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Xt?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(ln)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Za():(r=e,e=t)):(r=e,e=t),e}function cs(){var e,n,a,s;return e=r,i.substr(r,6).toLowerCase()===er?(n=i.substr(r,6),r+=6):(n=t,c===0&&h(cn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Qa():(r=e,e=t)):(r=e,e=t),e}function G(){var e,n,a,s;return e=r,i.substr(r,3).toLowerCase()===tr?(n=i.substr(r,3),r+=3):(n=t,c===0&&h(fn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Xa():(r=e,e=t)):(r=e,e=t),e}function re(){var e,n,a,s;return e=r,i.substr(r,3).toLowerCase()===rr?(n=i.substr(r,3),r+=3):(n=t,c===0&&h(pn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=eu():(r=e,e=t)):(r=e,e=t),e}function ct(){var e,n,a,s;return e=r,i.substr(r,2).toLowerCase()===nr?(n=i.substr(r,2),r+=2):(n=t,c===0&&h(vn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=tu():(r=e,e=t)):(r=e,e=t),e}function ft(){var e,n,a,s;return e=r,i.substr(r,7).toLowerCase()===ar?(n=i.substr(r,7),r+=7):(n=t,c===0&&h(hn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=ru():(r=e,e=t)):(r=e,e=t),e}function be(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===ur?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(dn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=nu():(r=e,e=t)):(r=e,e=t),e}function fs(){var e,n,a,s;return e=r,i.substr(r,3).toLowerCase()===sr?(n=i.substr(r,3),r+=3):(n=t,c===0&&h(mn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=au():(r=e,e=t)):(r=e,e=t),e}function ps(){var e,n,a,s;return e=r,i.substr(r,9).toLowerCase()===or?(n=i.substr(r,9),r+=9):(n=t,c===0&&h(gn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=uu():(r=e,e=t)):(r=e,e=t),e}function vs(){var e,n,a,s;return e=r,i.substr(r,7).toLowerCase()===ir?(n=i.substr(r,7),r+=7):(n=t,c===0&&h(wn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=su():(r=e,e=t)):(r=e,e=t),e}function pt(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===lr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(yn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=ou():(r=e,e=t)):(r=e,e=t),e}function hs(){var e,n,a,s;return e=r,i.substr(r,8).toLowerCase()===cr?(n=i.substr(r,8),r+=8):(n=t,c===0&&h(Nn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=iu():(r=e,e=t)):(r=e,e=t),e}function ds(){var e,n,a,s;return e=r,i.substr(r,9).toLowerCase()===fr?(n=i.substr(r,9),r+=9):(n=t,c===0&&h(bn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=lu():(r=e,e=t)):(r=e,e=t),e}function ms(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===pr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(xn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=cu():(r=e,e=t)):(r=e,e=t),e}function gs(){var e,n,a,s;return e=r,i.substr(r,7).toLowerCase()===vr?(n=i.substr(r,7),r+=7):(n=t,c===0&&h(Tn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=fu():(r=e,e=t)):(r=e,e=t),e}function ws(){var e,n,a,s;return e=r,i.substr(r,8).toLowerCase()===hr?(n=i.substr(r,8),r+=8):(n=t,c===0&&h(An)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=pu():(r=e,e=t)):(r=e,e=t),e}function ys(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===dr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(In)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=vu():(r=e,e=t)):(r=e,e=t),e}function Ns(){var e,n,a,s;return e=r,i.substr(r,2).toLowerCase()===mr?(n=i.substr(r,2),r+=2):(n=t,c===0&&h(En)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=hu():(r=e,e=t)):(r=e,e=t),e}function vt(){var e,n,a,s;return e=r,i.substr(r,8).toLowerCase()===gr?(n=i.substr(r,8),r+=8):(n=t,c===0&&h(Sn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=du():(r=e,e=t)):(r=e,e=t),e}function ht(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===wr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(Cn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=mu():(r=e,e=t)):(r=e,e=t),e}function dt(){var e,n,a,s;return e=r,i.substr(r,5).toLowerCase()===yr?(n=i.substr(r,5),r+=5):(n=t,c===0&&h(Pn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=gu():(r=e,e=t)):(r=e,e=t),e}function mt(){var e,n,a,s;return e=r,i.substr(r,3).toLowerCase()===Nr?(n=i.substr(r,3),r+=3):(n=t,c===0&&h(_n)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=wu():(r=e,e=t)):(r=e,e=t),e}function gt(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===br?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(Fn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=yu():(r=e,e=t)):(r=e,e=t),e}function wt(){var e,n,a,s;return e=r,i.substr(r,6).toLowerCase()===xr?(n=i.substr(r,6),r+=6):(n=t,c===0&&h(Ln)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Nu():(r=e,e=t)):(r=e,e=t),e}function k(){var e,n,a,s;return e=r,i.substr(r,6).toLowerCase()===Tr?(n=i.substr(r,6),r+=6):(n=t,c===0&&h(Mn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=bu():(r=e,e=t)):(r=e,e=t),e}function ne(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Ar?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(Dn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=xu():(r=e,e=t)):(r=e,e=t),e}function ae(){var e,n,a,s;return e=r,i.substr(r,3).toLowerCase()===Ir?(n=i.substr(r,3),r+=3):(n=t,c===0&&h(On)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Tu():(r=e,e=t)):(r=e,e=t),e}function yt(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Er?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(Rn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Au():(r=e,e=t)):(r=e,e=t),e}function Nt(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Sr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h(Jn)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Iu():(r=e,e=t)):(r=e,e=t),e}function bs(){var e,n,a,s;return e=r,i.substr(r,4).toLowerCase()===Cr?(n=i.substr(r,4),r+=4):(n=t,c===0&&h($n)),n!==t?(a=r,c++,s=w(),c--,s===t?a=void 0:(r=a,a=t),a!==t?e=Eu():(r=e,e=t)):(r=e,e=t),e}function ue(){var e;return i.charCodeAt(r)===44?(e=Pr,r++):(e=t,c===0&&h(kn)),e}function C(){var e;return i.charCodeAt(r)===40?(e=_r,r++):(e=t,c===0&&h(Un)),e}function P(){var e;return i.charCodeAt(r)===41?(e=Fr,r++):(e=t,c===0&&h(Hn)),e}function f(){var e,n;for(e=[],n=bt();n!==t;)e.push(n),n=bt();return e}function bt(){var e;return $r.test(i.charAt(r))?(e=i.charAt(r),r++):(e=t,c===0&&h(Vn)),e}function xs(){var e,n,a,s;if(e=r,(n=et())!==t&&(n=ke(n)),(e=n)===t)if(e=r,i.charCodeAt(r)===96?(n=Pe,r++):(n=t,c===0&&h(Re)),n!==t){if(a=[],Fe.test(i.charAt(r))?(s=i.charAt(r),r++):(s=t,c===0&&h(Je)),s!==t)for(;s!==t;)a.push(s),Fe.test(i.charAt(r))?(s=i.charAt(r),r++):(s=t,c===0&&h(Je));else a=t;a!==t?(i.charCodeAt(r)===96?(s=Pe,r++):(s=t,c===0&&h(Re)),s!==t?e=Su(a):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function Ts(e,n){return{type:"unary-expression",operator:e,expr:n}}function xt(e,n,a,s){var d={type:"binary-expression",operator:e,left:n,right:a};return s!==void 0&&(d.escape=s),d}function As(e,n){for(var a=[e],s=0;s<n.length;s++)a.push(n[s][3]);return a}function Is(e,n,a){return As(e,n)}function xe(e,n){for(var a=e,s=0;s<n.length;s++)a=xt(n[s][1],a,n[s][3]);return a}if((m=F())!==t&&r===i.length)return m;throw m!==t&&r<i.length&&h(Cu()),Pu(pe,M<i.length?i.charAt(M):null,M<i.length?Ye(M,M+1):Ye(M,M))}return l(u,Error),u.prototype.format=function(i){var v="Error: "+this.message;if(this.location){var m,t=null;for(m=0;m<i.length;m++)if(i[m].source===this.location.source){t=i[m].text.split(/\r\n|\n|\r/g);break}var N=this.location.start,T=this.location.source+":"+N.line+":"+N.column;if(t){var F=this.location.end,$=o("",N.line.toString().length),D=t[N.line-1],x=N.line===F.line?F.column:D.length+1;v+=`
 --> `+T+`
`+$+` |
`+N.line+" | "+D+`
`+$+" | "+o("",N.column-1)+o("",x-N.column,"^")}else v+=`
 at `+T}return v},u.buildMessage=function(i,v){var m={literal:function(x){return'"'+N(x.text)+'"'},class:function(x){var E=x.parts.map(function(L){return Array.isArray(L)?T(L[0])+"-"+T(L[1]):T(L)});return"["+(x.inverted?"^":"")+E+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(x){return x.description}};function t(x){return x.charCodeAt(0).toString(16).toUpperCase()}function N(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function T(x){return x.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+t(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+t(E)})}function F(x){return m[x.type](x)}function $(x){var E,L,S=x.map(F);if(S.sort(),S.length>0){for(E=1,L=1;E<S.length;E++)S[E-1]!==S[E]&&(S[L]=S[E],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function D(x){return x?'"'+N(x)+'"':"end of input"}return"Expected "+$(i)+" but "+D(v)+" found."},{SyntaxError:u,parse:p}},(It=Dt).exports&&(It.exports=Et());class Fs{static parse(u){return Dt.exports.parse(u)}}const Ot=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Ls=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,Ms=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Ds=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,Os=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Rs=new Set(["current_timestamp","current_date","current_time"]);function U(l,u){return(l+="").length>=u?l:new Array(u-l.length+1).join("0")+l}function Y(l,u,o="0",p="0",i="0",v="0",m="",t="0",N="0"){if(m==="+"||m==="-"){const T=`${U(parseInt(l,10),4)}-${U(parseInt(u,10),2)}-${U(parseInt(o,10),2)}`;let F="";parseFloat(v)<10&&(F="0");const $=`${U(parseInt(p,10),2)}:${U(parseInt(i,10),2)}:${F+parseFloat(v).toString()}`,D=`${m}${U(parseInt(t,10),2)}:${U(parseInt(N,10),2)}`;return new Date(T+"T"+$+D)}return new Date(parseInt(l,10),parseInt(u,10)-1,parseInt(o,10),parseInt(p,10),parseInt(i,10),parseFloat(v))}class Js{static makeBool(u){return Jt(u)}static featureValue(u,o,p,i){return Vt(u,o,p,i)}static equalsNull(u){return u===null}static applyLike(u,o,p){return Ie(u,o,p)}static ensureArray(u){return Te(u)}static applyIn(u,o){return Ae(u,o)}static currentDate(){const u=new Date;return u.setHours(0,0,0,0),u}static makeSqlInterval(u,o,p){return _.createFromValueAndQualifer(u,o,p)}static convertInterval(u){return u instanceof _?u.valueInMilliseconds():u}static currentTimestamp(){return new Date}static compare(u,o,p){return Ut(u,o,p)}static calculate(u,o,p){return Ht(u,o,p)}static makeComparable(u){return J(u)}static evaluateFunction(u,o){return Lt(u,o)}static lookup(u,o){const p=o[u];return p===void 0?null:p}static between(u,o){return u==null||o[0]==null||o[1]==null?null:u>=o[0]&&u<=o[1]}static notbetween(u,o){return u==null||o[0]==null||o[1]==null?null:u<o[0]||u>o[1]}static ternaryNot(u){return se(u)}static ternaryAnd(u,o){return $t(u,o)}static ternaryOr(u,o){return kt(u,o)}}class Rt{constructor(u,o){this.fieldsIndex=o,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=Fs.parse(u);const{isStandardized:p,isAggregate:i,referencedFieldNames:v}=this._extractExpressionInfo(o);this.referencedFieldNames=v,this.isStandardized=p,this.isAggregate=i}static create(u,o){return new Rt(u,o)}get fieldNames(){return this.referencedFieldNames}testSet(u,o=B){const p={};for(const i of this.fieldNames)p[i]=u.map(v=>o.getAttribute(v,i));return!!this._evaluateNode(this.parseTree,{attributes:p},B)}calculateValue(u,o=B){const p=this._evaluateNode(this.parseTree,u,o);return p instanceof _?p.valueInMilliseconds()/864e5:p}calculateValueCompiled(u,o=B){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(u,this.parameters,o,this.datefields):Tt("esri-csp-restrictions")?this.calculateValue(u,o):(this._compileMe(),this.parseTree._compiledVersion(u,this.parameters,o,this.datefields))}testFeature(u,o=B){return!!this._evaluateNode(this.parseTree,u,o)}testFeatureCompiled(u,o=B){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(u,this.parameters,o,this.datefields):Tt("esri-csp-restrictions")?this.testFeature(u,o):(this._compileMe(),!!this.parseTree._compiledVersion(u,this.parameters,o,this.datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,u=>{u.type==="current-time"?this._hasDateFunctions=!0:u.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Rs.has(u.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="function"&&u.add(o.name.toLowerCase())}),Array.from(u)}getExpressions(){const u=new Map;return this._visitAll(this.parseTree,o=>{if(o.type==="function"){const p=o.name.toLowerCase(),i=o.args.value[0];if(i.type==="column-reference"){const v=i.column,m=`${p}-${v}`;u.has(m)||u.set(m,{aggregateType:p,field:v})}}}),[...u.values()]}getVariables(){const u=new Set;return this._visitAll(this.parseTree,o=>{o.type==="parameter"&&u.add(o.value.toLowerCase())}),Array.from(u)}_compileMe(){const u="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",u).bind(Js)}_extractExpressionInfo(u){const o=[],p=new Set;let i=!0,v=!0;return this._visitAll(this.parseTree,m=>{switch(m.type){case"column-reference":{const t=u.get(m.column);let N,T;t?N=T=t.name:(T=m.column,N=T.toLowerCase()),!t||t.type!=="date"&&t.type!=="esriFieldTypeDate"||(this.datefields[t.name]=1),p.has(N)||(p.add(N),o.push(T)),m.column=T;break}case"function":{const{name:t,args:N}=m,T=N.value.length;i&&(i=_s(t,T)),v&&(v=Cs(t,T));break}}}),{referencedFieldNames:Array.from(o),isStandardized:i,isAggregate:v}}_visitAll(u,o){if(u!=null)switch(o(u),u.type){case"when-clause":this._visitAll(u.operand,o),this._visitAll(u.value,o);break;case"case-expression":for(const p of u.clauses)this._visitAll(p,o);u.format==="simple"&&this._visitAll(u.operand,o),u.else!==null&&this._visitAll(u.else,o);break;case"expression-list":for(const p of u.value)this._visitAll(p,o);break;case"unary-expression":this._visitAll(u.expr,o);break;case"binary-expression":this._visitAll(u.left,o),this._visitAll(u.right,o);break;case"function":this._visitAll(u.args,o)}}evaluateNodeToJavaScript(u){switch(u.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(u.value)+", "+JSON.stringify(u.qualifier)+","+JSON.stringify(u.op)+")";case"case-expression":{let o="";if(u.format==="simple"){const p="this.makeComparable("+this.evaluateNodeToJavaScript(u.operand)+")";o="( ";for(let i=0;i<u.clauses.length;i++)o+=" ("+p+" === this.makeComparable("+this.evaluateNodeToJavaScript(u.clauses[i].operand)+")) ? ("+this.evaluateNodeToJavaScript(u.clauses[i].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}else{o="( ";for(let p=0;p<u.clauses.length;p++)o+=" this.makeBool("+this.evaluateNodeToJavaScript(u.clauses[p].operand)+")===true ? ("+this.evaluateNodeToJavaScript(u.clauses[p].value)+") : ";u.else!==null?o+=this.evaluateNodeToJavaScript(u.else):o+="null",o+=" )"}return o}case"parameter":return"this.lookup("+JSON.stringify(u.value.toLowerCase())+",lookups)";case"expression-list":{let o="[";for(const p of u.value)o!=="["&&(o+=","),o+=this.evaluateNodeToJavaScript(p);return o+="]",o}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(u.expr)+")";case"binary-expression":switch(u.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+" )";case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")";case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(u.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(u.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(u.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+","+JSON.stringify(u.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(u.operator)+","+this.evaluateNodeToJavaScript(u.left)+","+this.evaluateNodeToJavaScript(u.right)+")"}throw new Error("Not Supported Operator "+u.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(u.value);case"date":return"(new Date("+Ct(u.value).getTime().toString()+"))";case"timestamp":return"(new Date("+St(u.value).getTime().toString()+"))";case"current-time":return u.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(u.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(u.name)+","+this.evaluateNodeToJavaScript(u.args)+")"}throw new Error("Unsupported sql syntax "+u.type)}_evaluateNode(u,o,p){switch(u.type){case"interval":{const i=this._evaluateNode(u.value,o,p);return _.createFromValueAndQualifer(i,u.qualifier,u.op)}case"case-expression":if(u.format==="simple"){const i=J(this._evaluateNode(u.operand,o,p));for(let v=0;v<u.clauses.length;v++)if(i===J(this._evaluateNode(u.clauses[v].operand,o,p)))return this._evaluateNode(u.clauses[v].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}else{for(let i=0;i<u.clauses.length;i++)if(Jt(this._evaluateNode(u.clauses[i].operand,o,p)))return this._evaluateNode(u.clauses[i].value,o,p);if(u.else!==null)return this._evaluateNode(u.else,o,p)}return null;case"parameter":return this.parameters[u.value.toLowerCase()];case"expression-list":{const i=[];for(const v of u.value)i.push(this._evaluateNode(v,o,p));return i}case"unary-expression":return se(this._evaluateNode(u.expr,o,p));case"binary-expression":switch(u.operator){case"AND":return $t(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"OR":return kt(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"IS":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)===null;case"ISNOT":if(u.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(u.left,o,p)!==null;case"IN":{const i=Te(this._evaluateNode(u.right,o,p));return Ae(this._evaluateNode(u.left,o,p),i)}case"NOT IN":{const i=Te(this._evaluateNode(u.right,o,p));return se(Ae(this._evaluateNode(u.left,o,p),i))}case"BETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i>=J(v[0])&&i<=J(v[1])}case"NOTBETWEEN":{const i=this._evaluateNode(u.left,o,p),v=this._evaluateNode(u.right,o,p);return i==null||v[0]==null||v[1]==null?null:i<J(v[0])||i>J(v[1])}case"LIKE":return Ie(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape);case"NOT LIKE":return se(Ie(this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p),u.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return Ut(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p));case"-":case"+":case"*":case"/":return Ht(u.operator,this._evaluateNode(u.left,o,p),this._evaluateNode(u.right,o,p))}case"null":case"boolean":case"string":case"number":return u.value;case"date":return Ct(u.value);case"timestamp":return St(u.value);case"current-time":{const i=new Date;return u.mode==="date"&&i.setHours(0,0,0,0),i}case"column-reference":return Vt(o,u.column,this.datefields,p);case"function":{const i=this._evaluateNode(u.args,o,p);return this.isAggregate?Ss(u.name,i):Lt(u.name,i)}}throw new Error("Unsupported sql syntax "+u.type)}}function St(l){let u=Ls.exec(l);if(u!==null){const[,o,p,i,v,m,t]=u;return Y(o,p,i,v,m,t)}if(u=Ms.exec(l),u!==null){const[,o,p,i,v,m,t,N,T,F]=u;return Y(o,p,i,v,m,t,N,T,F)}if(u=Ds.exec(l),u!==null){const[,o,p,i,v,m,t,N,T]=u;return Y(o,p,i,v,m,"0",t,N,T)}if(u=Os.exec(l),u!==null){const[,o,p,i,v,m]=u;return Y(o,p,i,v,m)}if(u=Ot.exec(l),u!==null){const[,o,p,i]=u;return Y(o,p,i)}throw new Error("SQL Invalid Timestamp")}function Ct(l){const u=Ot.exec(l);if(u===null)throw new Error("SQL Invalid Date");const[,o,p,i]=u;return new Date(parseInt(o,10),parseInt(p,10)-1,parseInt(i,10))}function Jt(l){return l===!0}function Te(l){return Array.isArray(l)?l:[l]}function se(l){return l!==null?l!==!0:null}function $t(l,u){return l!=null&&u!=null?l===!0&&u===!0:l!==!1&&u!==!1&&null}function kt(l,u){return l!=null&&u!=null?l===!0||u===!0:l===!0||u===!0||null}function Ae(l,u){if(l==null)return null;let o=!1;for(const p of u)if(p==null)o=null;else if(l===p){o=!0;break}return o}const Pt="-[]/{}()*+?.\\^$|";var H;function $s(l,u){const o=u;let p="",i=H.Normal;for(let v=0;v<l.length;v++){const m=l.charAt(v);switch(i){case H.Normal:m===o?i=H.Escaped:Pt.includes(m)?p+="\\"+m:p+=m==="%"?".*":m==="_"?".":m;break;case H.Escaped:Pt.includes(m)?p+="\\"+m:p+=m,i=H.Normal}}return new RegExp("^"+p+"$","m")}function Ie(l,u,o){return l==null?null:$s(u,o).test(l)}function J(l){return l instanceof Date?l.valueOf():l}function Ut(l,u,o){if(u==null||o==null)return null;const p=J(u),i=J(o);switch(l){case"<>":return p!==i;case"=":return p===i;case">":return p>i;case"<":return p<i;case">=":return p>=i;case"<=":return p<=i}}function Ht(l,u,o){if(u instanceof _)if(o instanceof Date)switch(l){case"+":return new Date(u.valueInMilliseconds()+o.getTime());case"-":return u.valueInMilliseconds()-o.getTime();case"*":return u.valueInMilliseconds()*o.getTime();case"/":return u.valueInMilliseconds()/o.getTime()}else if(o instanceof _)switch(l){case"+":return _.createFromMilliseconds(u.valueInMilliseconds()+o.valueInMilliseconds());case"-":return _.createFromMilliseconds(u.valueInMilliseconds()-o.valueInMilliseconds());case"*":return u.valueInMilliseconds()*o.valueInMilliseconds();case"/":return u.valueInMilliseconds()/o.valueInMilliseconds()}else u=u.valueInMilliseconds();else if(o instanceof _)if(u instanceof Date)switch(l){case"+":return new Date(o.valueInMilliseconds()+u.getTime());case"-":return new Date(u.getTime()-o.valueInMilliseconds());case"*":return u.getTime()*o.valueInMilliseconds();case"/":return u.getTime()/o.valueInMilliseconds()}else o=o.valueInMilliseconds();else if(u instanceof Date&&typeof o=="number")switch(o=24*o*60*60*1e3,u=u.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}else if(o instanceof Date&&typeof u=="number")switch(u=24*u*60*60*1e3,o=o.getTime(),l){case"+":return new Date(u+o);case"-":return new Date(u-o);case"*":return new Date(u*o);case"/":return new Date(u/o)}switch(l){case"+":return u+o;case"-":return u-o;case"*":return u*o;case"/":return u/o}}function ks(l){return l&&typeof l.attributes=="object"}function Vt(l,u,o,p){const i=p.getAttribute(l,u);return i!=null&&o[u]===1?new Date(i):i}(function(l){l[l.Normal=0]="Normal",l[l.Escaped=1]="Escaped"})(H||(H={}));const B={getAttribute:(l,u)=>(ks(l)?l.attributes:l)[u]};export{Rt as WhereClause,B as defaultAttributeAdapter};
