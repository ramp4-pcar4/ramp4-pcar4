{"version":3,"file":"TileInfoTilemapCache-D7QMO-5M.js","sources":["../../node_modules/@arcgis/core/layers/support/TileInfoTilemapCache.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport l from\"../../core/Error.js\";import{waitTick as t,isAbortError as i}from\"../../core/promiseUtils.js\";class e{constructor(l,t=0,i=l.lods[l.lods.length-1].level){this.tileInfo=l,this.minLOD=t,this.maxLOD=i,l.lodAt(t)||(this.minLOD=l.lods[0].level),l.lodAt(i)||(this.maxLOD=l.lods[l.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(l,t,i){const e=this.tileInfo?.lodAt(l);return!e||l<this.minLOD||l>this.maxLOD?\"unavailable\":e.cols&&e.rows?i>=e.cols[0]&&i<=e.cols[1]&&t>=e.rows[0]&&t<=e.rows[1]?\"unknown\":\"unavailable\":\"unknown\"}async fetchAvailability(i,e,o,s){await t(s);const a=this.getAvailability(i,e,o);if(\"unavailable\"===a)throw new l(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:i,row:e,col:o});return a}async fetchAvailabilityUpsample(l,e,o,s,a){await t(a),s.level=l,s.row=e,s.col=o;const n=this.tileInfo;return n.updateTileInfo(s),this.fetchAvailability(l,e,o,a).catch((l=>{if(i(l))throw l;if(n.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,a);throw l}))}}export{e as default};\n"],"names":["e","l","t","i","o","s"],"mappings":";AAI2G,MAAMA,EAAC;AAAA,EAAC,YAAYC,GAAEC,IAAE,GAAEC,IAAEF,EAAE,KAAKA,EAAE,KAAK,SAAO,CAAC,EAAE,OAAM;AAAC,SAAK,WAASA,GAAE,KAAK,SAAOC,GAAE,KAAK,SAAOC,GAAEF,EAAE,MAAMC,CAAC,MAAI,KAAK,SAAOD,EAAE,KAAK,CAAC,EAAE,QAAOA,EAAE,MAAME,CAAC,MAAI,KAAK,SAAOF,EAAE,KAAKA,EAAE,KAAK,SAAO,CAAC,EAAE;AAAA,EAAM;AAAA,EAAC,IAAI,kBAAiB;AAAC,WAAO,KAAK,UAAQ,KAAK,SAAS,KAAK,CAAC,EAAE;AAAA,EAAK;AAAA,EAAC,IAAI,kBAAiB;AAAC,WAAO,KAAK,UAAQ,KAAK,SAAS,KAAK,KAAK,SAAS,KAAK,SAAO,CAAC,EAAE;AAAA,EAAK;AAAA,EAAC,gBAAgBA,GAAEC,GAAEC,GAAE;AAAC,UAAMH,IAAE,KAAK,UAAU,MAAMC,CAAC;AAAE,WAAM,CAACD,KAAGC,IAAE,KAAK,UAAQA,IAAE,KAAK,SAAO,gBAAcD,EAAE,QAAMA,EAAE,OAAKG,KAAGH,EAAE,KAAK,CAAC,KAAGG,KAAGH,EAAE,KAAK,CAAC,KAAGE,KAAGF,EAAE,KAAK,CAAC,KAAGE,KAAGF,EAAE,KAAK,CAAC,IAAE,YAAU,gBAAc;AAAA,EAAS;AAAA,EAAC,MAAM,kBAAkB,GAAE,GAAEI,GAAEC,GAAE;AAAC,UAAMH,EAAEG,CAAC;AAAE,UAAM,IAAE,KAAK,gBAAgB,GAAE,GAAED,CAAC;AAAE,QAAmB,MAAhB,cAAkB,OAAM,IAAIH,EAAE,6BAA4B,yBAAwB,EAAC,OAAM,GAAE,KAAI,GAAE,KAAIG,EAAC,CAAC;AAAE,WAAO;AAAA,EAAC;AAAA,EAAC,MAAM,0BAA0BH,GAAE,GAAEG,GAAEC,GAAE,GAAE;AAAC,UAAMH,EAAE,CAAC,GAAEG,EAAE,QAAMJ,GAAEI,EAAE,MAAI,GAAEA,EAAE,MAAID;AAAE,UAAM,IAAE,KAAK;AAAS,WAAO,EAAE,eAAeC,CAAC,GAAE,KAAK,kBAAkBJ,GAAE,GAAEG,GAAE,CAAC,EAAE,MAAO,CAAAH,MAAG;AAAC,UAAGE,EAAEF,CAAC,EAAE,OAAMA;AAAE,UAAG,EAAE,aAAaI,CAAC,EAAE,QAAO,KAAK,0BAA0BA,EAAE,OAAMA,EAAE,KAAIA,EAAE,KAAIA,GAAE,CAAC;AAAE,YAAMJ;AAAA,IAAC,CAAC;AAAA,EAAE;AAAC;","x_google_ignoreList":[0]}