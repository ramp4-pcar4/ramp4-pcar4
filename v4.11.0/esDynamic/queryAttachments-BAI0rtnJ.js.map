{"version":3,"file":"queryAttachments-BAI0rtnJ.js","sources":["../../node_modules/@arcgis/core/rest/query/operations/queryAttachments.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{addTokenParameter as t}from\"../../../kernel.js\";import o from\"../../../request.js\";import{addProxy as e}from\"../../../core/urlUtils.js\";import{mapParameters as n}from\"../../operations/urlUtils.js\";import r from\"../support/AttachmentInfo.js\";function s(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(\",\")),o.keywords&&(o.keywords=o.keywords.join(\",\")),o.globalIds&&(o.globalIds=o.globalIds.join(\",\")),o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.size&&(o.size=o.size.join(\",\")),o}function a(o,n){const s={};for(const a of n){const{parentObjectId:n,parentGlobalId:c,attachmentInfos:m}=a;for(const a of m){const{id:m}=a,p=e(t(`${o.path}/${n}/attachments/${m}`)),i=r.fromJSON(a);i.set({url:p,parentObjectId:n,parentGlobalId:c}),s[n]?s[n].push(i):s[n]=[i]}}return s}function c(t,e,r){let a={query:n({...t.query,f:\"json\",...s(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),o(t.path+\"/queryAttachments\",a).then((t=>t.data.attachmentGroups))}async function m(t,e,n){const{objectIds:r}=e,s=[];for(const a of r)s.push(o(t.path+\"/\"+a+\"/attachments\",n));return Promise.all(s).then((t=>r.map(((o,e)=>({parentObjectId:o,attachmentInfos:t[e].data.attachmentInfos})))))}export{c as executeAttachmentQuery,m as fetchAttachments,a as processAttachmentQueryResult};\n"],"names":["s","t","o","a","n","c","m","e","i","r"],"mappings":";;;AAIwP,SAASA,EAAEC,GAAE;AAAC,QAAMC,IAAED,EAAE;AAAS,SAAOC,EAAE,oBAAkBA,EAAE,kBAAgBA,EAAE,gBAAgB,KAAK,GAAG,IAAGA,EAAE,aAAWA,EAAE,WAASA,EAAE,SAAS,KAAK,GAAG,IAAGA,EAAE,cAAYA,EAAE,YAAUA,EAAE,UAAU,KAAK,GAAG,IAAGA,EAAE,cAAYA,EAAE,YAAUA,EAAE,UAAU,KAAK,GAAG,IAAGA,EAAE,SAAOA,EAAE,OAAKA,EAAE,KAAK,KAAK,GAAG,IAAGA;AAAC;AAAC,SAASC,EAAED,GAAEE,GAAE;AAAC,QAAMJ,IAAE,CAAA;AAAG,aAAUG,KAAKC,GAAE;AAAC,UAAK,EAAC,gBAAeA,GAAE,gBAAeC,GAAE,iBAAgBC,EAAC,IAAEH;AAAE,eAAUA,KAAKG,GAAE;AAAC,YAAK,EAAC,IAAGA,EAAC,IAAEH,GAAE,IAAEI,EAAEN,EAAE,GAAGC,EAAE,IAAI,IAAIE,CAAC,gBAAgBE,CAAC,EAAE,CAAC,GAAEE,IAAEC,EAAE,SAASN,CAAC;AAAE,MAAAK,EAAE,IAAI,EAAC,KAAI,GAAE,gBAAeJ,GAAE,gBAAeC,EAAC,CAAC,GAAEL,EAAEI,CAAC,IAAEJ,EAAEI,CAAC,EAAE,KAAKI,CAAC,IAAER,EAAEI,CAAC,IAAE,CAACI,CAAC;AAAA,IAAC;AAAA,EAAC;AAAC,SAAOR;AAAC;AAAC,SAASK,EAAEJ,GAAEM,GAAEE,GAAE;AAAC,MAAIN,IAAE,EAAC,OAAMC,EAAE,EAAC,GAAGH,EAAE,OAAM,GAAE,QAAO,GAAGD,EAAEO,CAAC,EAAC,CAAC,EAAC;AAAE,SAAOE,MAAIN,IAAE,EAAC,GAAGM,GAAE,GAAGN,GAAE,OAAM,EAAC,GAAGM,EAAE,OAAM,GAAGN,EAAE,MAAK,EAAC,IAAGD,EAAED,EAAE,OAAK,qBAAoBE,CAAC,EAAE,KAAM,CAAAF,MAAGA,EAAE,KAAK;AAAkB;AAAC,eAAeK,EAAEL,GAAEM,GAAEH,GAAE;AAAC,QAAK,EAAC,WAAUK,EAAC,IAAEF,GAAEP,IAAE,CAAA;AAAG,aAAUG,KAAKM,EAAE,CAAAT,EAAE,KAAKE,EAAED,EAAE,OAAK,MAAIE,IAAE,gBAAeC,CAAC,CAAC;AAAE,SAAO,QAAQ,IAAIJ,CAAC,EAAE,KAAM,CAAAC,MAAGQ,EAAE,IAAK,CAACP,GAAEK,OAAK,EAAC,gBAAeL,GAAE,iBAAgBD,EAAEM,CAAC,EAAE,KAAK,gBAAe,EAAE,CAAI;AAAA;","x_google_ignoreList":[0]}