{"version":3,"file":"External-B4p3GvAu.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeOrFilenameFormatId as n}from\"../../../layers/support/infoFor3D.js\";class a{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class i{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function o(t){return l(t?.source)}function u(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof a))}const c=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,f=/\\.(gltf|glb)/i;function l(t){if(!t)return!1;if(Array.isArray(t)){return t.some(p)}return p(t)}function p(t){if(t instanceof File){const{type:r,name:e}=t;return c.test(r)||f.test(e)}return c.test(t.assetMimeType)||f.test(t.assetName)}function m(t,r){if(!t)return!1;const{source:e}=t;return y(e,r)}function h(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(u(e)&&u(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>g(t,r)))}return g(t,r)}function g(t,r){return t instanceof a&&t.isOnService(r)}function b(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,t.assetName,r)}function N(t){return Array.isArray(t)?t:[t]}function A(t){return!!t.original}export{a as ServiceAsset,i as ServiceAssetPart,b as assetFormatId,g as assetIsOnService,m as externalIsOnService,N as externalSourceToMultiPart,h as externalSourcesAreEqual,p as isDisplayAsset,o as isDisplayExternal,l as isDisplaySource,A as isOriginalExternal,y as sourceIsOnService};\n"],"names":["a","t","r","e","s","i","o","l","p","m","y","h","n","g","b","N","A"],"mappings":"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","x_google_ignoreList":[0]}