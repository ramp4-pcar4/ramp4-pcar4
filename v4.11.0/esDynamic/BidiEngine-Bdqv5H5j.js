const x=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xAB","\xBB"],["\xBB","\xAB"],["\u2039","\u203A"],["\u203A","\u2039"],["\u207D","\u207E"],["\u207E","\u207D"],["\u208D","\u208E"],["\u208E","\u208D"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232A"],["\u232A","\u2329"],["\uFE59","\uFE5A"],["\uFE5A","\uFE59"],["\uFE5B","\uFE5C"],["\uFE5C","\uFE5B"],["\uFE5D","\uFE5E"],["\uFE5E","\uFE5D"],["\uFE64","\uFE65"],["\uFE65","\uFE64"]],v=["\u0622","\u0623","\u0625","\u0627"],X=["\uFEF5","\uFEF7","\uFEF9","\uFEFB"],tt=["\uFEF6","\uFEF8","\uFEFA","\uFEFC"],j=["\u0627","\u0628","\u062A","\u062B","\u062C","\u062D","\u062E","\u062F","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063A","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u06CC","\u0626","\u0624"],rt=["\uFE8D","\uFE8F","\uFE95","\uFE99","\uFE9D","\uFEA1","\uFEA5","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB1","\uFEB5","\uFEB9","\uFEBD","\uFEC1","\uFEC5","\uFEC9","\uFECD","\uFED1","\uFED5","\uFED9","\uFEDD","\uFEE1","\uFEE5","\uFEE9","\uFEED","\uFEF1","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFC","\uFE89","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE89","\uFE85"],et=["\uFE8E","\uFE90","\uFE96","\uFE9A","\uFE9E","\uFEA2","\uFEA6","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB2","\uFEB6","\uFEBA","\uFEBE","\uFEC2","\uFEC6","\uFECA","\uFECE","\uFED2","\uFED6","\uFEDA","\uFEDE","\uFEE2","\uFEE6","\uFEEA","\uFEEE","\uFEF2","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFD","\uFE8A","\uFE86","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8A","\uFE86"],nt=["\uFE8E","\uFE92","\uFE98","\uFE9C","\uFEA0","\uFEA4","\uFEA8","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB4","\uFEB8","\uFEBC","\uFEC0","\uFEC4","\uFEC8","\uFECC","\uFED0","\uFED4","\uFED8","\uFEDC","\uFEE0","\uFEE4","\uFEE8","\uFEEC","\uFEEE","\uFEF4","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFF","\uFE8C","\uFE86","\uFE71","\uFE72","\uFE74","\uFE77","\uFE79","\uFE7B","\uFE7D","\uFE7F","\uFE80","\uFE8C","\uFE86"],at=["\uFE8D","\uFE91","\uFE97","\uFE9B","\uFE9F","\uFEA3","\uFEA7","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB3","\uFEB7","\uFEBB","\uFEBF","\uFEC3","\uFEC7","\uFECB","\uFECF","\uFED3","\uFED7","\uFEDB","\uFEDF","\uFEE3","\uFEE7","\uFEEB","\uFEED","\uFEF3","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFE","\uFE8B","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8B","\uFE85"],W=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062F","\u0630","\u0631","\u0632","\u0648","\u0649"],ot=["\u064B","\u064B","\u064C","\u061F","\u064D","\u061F","\u064E","\u064E","\u064F","\u064F","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062A","\u062A","\u062A","\u062A","\u062B","\u062B","\u062B","\u062B","\u062C","\u062C","\u062C","\u062C","\u062D","\u062D","\u062D","\u062D","\u062E","\u062E","\u062E","\u062E","\u062F","\u062F","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063A","\u063A","\u063A","\u063A","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064A","\u064A","\u064A","\u064A","\uFEF5","\uFEF6","\uFEF7","\uFEF8","\uFEF9","\uFEFA","\uFEFB","\uFEFC","\u061F","\u061F","\u061F"],Z=["\u0621","\u0641"],ft=["\u063A","\u064A"],lt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],it=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],e=0,f=1,h=2,U=3,t=4,_=5,k=6,r=7,F=8,m=9,p=10,A=11,n=12,st=13,ut=14,ct=15,ht=16,At=17,c=18,Tt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],S=100,Lt=[S+0,e,e,e,e,S+1,S+2,S+3,f,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,S+4,t,t,t,e,t,e,t,e,t,t,t,e,e,t,t,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,e,e,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,S+5,r,r,S+6,S+7],gt=[[c,c,c,c,c,c,c,c,c,k,_,k,F,_,c,c,c,c,c,c,c,c,c,c,c,c,c,c,_,_,_,k,F,t,t,A,A,A,t,t,t,t,t,p,m,p,m,m,h,h,h,h,h,h,h,h,h,h,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,c,c,c,c,c,c,_,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,m,t,A,A,A,A,t,t,t,t,e,t,t,c,t,t,A,A,h,h,t,e,t,t,t,h,e,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,f,n,f,n,n,f,n,n,f,n,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,t,t,t,t,t,f,f,f,f,f,t,t,t,t,t,t,t,t,t,t,t],[U,U,U,U,t,t,t,t,r,A,A,r,m,r,t,t,n,n,n,n,n,n,n,n,n,n,n,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,U,U,U,U,U,U,U,U,U,U,A,U,U,r,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,U,t,n,n,n,n,n,n,r,r,n,n,t,n,n,n,n,r,r,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,n,n,n,n,n,n,n,n,n,f,f,t,t,t,t,f,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,c,c,c,e,f,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,_,st,ut,ct,ht,At,m,A,A,A,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,c,c,c,c,c,t,t,t,t,t,c,c,c,c,c,c,h,e,t,t,h,h,h,h,h,h,p,p,t,t,t,e,h,h,h,h,h,h,h,h,h,h,p,p,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,t,t,t,t,t,f,n,f,f,f,f,f,f,f,f,f,f,p,f,f,f,f,f,f,f,f,f,f,f,f,f,t,f,f,f,f,f,t,f,t,f,f,t,f,f,t,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,m,t,t,m,t,t,t,t,t,t,t,t,t,A,t,t,p,p,t,t,t,t,t,A,A,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,c],[t,t,t,A,A,A,t,t,t,t,t,p,m,p,m,m,h,h,h,h,h,h,h,h,h,h,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,t,t,t,A,A,t,t,t,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class dt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(a,l,i){if(this.sourceToTarget=[],this.targetToSource=[],!a)return"";if(It(this.sourceToTarget,this.targetToSource,a.length),!this.checkParameters(l,i))return a;l=this.inputFormat,i=this.outputFormat;let s=a;const u=jt,L=J(l.charAt(1)),T=J(i.charAt(1)),g=(l.charAt(0)==="I"?"L":l.charAt(0))+L,d=(i.charAt(0)==="I"?"L":i.charAt(0))+T,B=l.charAt(2)+i.charAt(2);u.defInFormat=g,u.defOutFormat=d,u.defSwap=B;const w=E(a,g,d,B,u);let N=!1;return i.charAt(1)==="R"?N=!0:i.charAt(1)!=="C"&&i.charAt(1)!=="D"||(N=this.checkContextual(w)==="rtl"),this.sourceToTarget=R,this.targetToSource=xt(this.sourceToTarget),P=this.targetToSource,s=l.charAt(3)===i.charAt(3)?w:i.charAt(3)==="S"?Bt(N,w):Rt(w,N,!0),this.sourceToTarget=R,this.targetToSource=P,this.levels=y,s}_inputFormatSetter(a){if(!Q.test(a))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a}_outputFormatSetter(a){if(!Q.test(a))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a}checkParameters(a,l){return a?this._inputFormatSetter(a):a=this.inputFormat,l?this._outputFormatSetter(l):l=this.outputFormat,a!==l}checkContextual(a){let l=D(a);if(l!=="ltr"&&l!=="rtl"){try{l=document.dir.toLowerCase()}catch{}l!=="ltr"&&l!=="rtl"&&(l="ltr")}return l}hasBidiChar(a){return Pt.test(a)}}function E(o,a,l,i,s){const u=Ut(o,{inFormat:a,outFormat:l,swap:i},s);if(u.inFormat===u.outFormat)return o;a=u.inFormat,l=u.outFormat,i=u.swap;const L=a.slice(0,1),T=a.slice(1,4),g=l.slice(0,1),d=l.slice(1,4);if(s.inFormat=a,s.outFormat=l,s.swap=i,L==="L"&&l==="VLTR"){if(T==="LTR")return s.dir=V,b(o,s);if(T==="RTL")return s.dir=I,b(o,s)}if(L==="V"&&g==="V")return s.dir=T==="RTL"?I:V,M(o,s);if(L==="L"&&l==="VRTL")return T==="LTR"?(s.dir=V,o=b(o,s)):(s.dir=I,o=b(o,s)),M(o);if(a==="VLTR"&&l==="LLTR")return s.dir=V,b(o,s);if(L==="V"&&g==="L"&&T!==d)return o=M(o),T==="RTL"?E(o,"LLTR","VLTR",i,s):E(o,"LRTL","VRTL",i,s);if(a==="VRTL"&&l==="LRTL")return E(o,"LRTL","VRTL",i,s);if(L==="L"&&g==="L"){const B=s.swap;return s.swap=B.slice(0,1)+"N",T==="RTL"?(s.dir=I,o=b(o,s),s.swap="N"+B.slice(1,3),s.dir=V,o=b(o,s)):(s.dir=V,o=b(o,s),s.swap="N"+B.slice(1,3),o=E(o,"VLTR","LRTL",s.swap,s)),o}return o}function Ut(o,a,l){if(a.inFormat===void 0&&(a.inFormat=l.defInFormat),a.outFormat===void 0&&(a.outFormat=l.defOutFormat),a.swap===void 0&&(a.swap=l.defSwap),a.inFormat===a.outFormat)return a;const i=a.inFormat.slice(0,1),s=a.outFormat.slice(0,1);let u,L=a.inFormat.slice(1,4),T=a.outFormat.slice(1,4);return L.charAt(0)==="C"&&(u=D(o),L=u==="ltr"||u==="rtl"?u.toUpperCase():a.inFormat.charAt(2)==="L"?"LTR":"RTL",a.inFormat=i+L),T.charAt(0)==="C"&&(u=D(o),u==="rtl"?T="RTL":u==="ltr"?(u=mt(o),T=u.toUpperCase()):T=a.outFormat.charAt(2)==="L"?"LTR":"RTL",a.outFormat=s+T),a}function Bt(o,a,l){if(a.length===0)return"";o===void 0&&(o=!0);const i=(a=String(a)).split("");let s=0,u=1,L=i.length;o||(s=i.length-1,u=-1,L=1);const T=Ft(i,s,u,L);let g="";for(let d=0;d<i.length;d++)bt(T,T.length,d)>-1?(K(P,d,!o,-1),R.splice(d,1)):g+=i[d];return g}function Ft(o,a,l,i,s){let u=0;const L=[];let T=0;for(let g=a;g*l<i;g+=l)if(q(o[g])||O(o[g])){if(o[g]==="\u0644"&&wt(o,g+l,l,i)){o[g]=Ot(o[g+l],u===0?X:tt),g+=l,Et(o,g,l,i),L[T]=g,T++,u=0;continue}const d=o[g];u===1?o[g]=G(o,g+l,l,i)?Vt(o[g]):z(o[g],et):G(o,g+l,l,i)===!0?o[g]=z(o[g],at):o[g]=z(o[g],rt),O(d)||(u=1),vt(d)===!0&&(u=0)}else u=0;return L}function D(o){const a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(o);return a?a[0]<="z"?"ltr":"rtl":""}function mt(o){const a=o.split("");return a.reverse(),D(a.join(""))}function Rt(o,a,l){if(o.length===0)return"";a===void 0&&(a=!0);let i="";const s=(o=String(o)).split("");for(let u=0;u<o.length;u++){let L=!1;if(s[u]>="\uFE70"&&s[u]<"\uFEFF"){const T=o.charCodeAt(u);s[u]>="\uFEF5"&&s[u]<="\uFEFC"?(a?(u>0&&l&&s[u-1]===" "?i=i.slice(0,-1)+"\u0644":(i+="\u0644",L=!0),i+=v[(T-65269)/2]):(i+=v[(T-65269)/2],i+="\u0644",u+1<o.length&&l&&s[u+1]===" "?u++:L=!0),L&&(K(P,u,!0,1),R.splice(u,0,R[u]))):i+=ot[T-65136]}else i+=s[u]}return i}function b(o,a){const l=o.split(""),i=[];return $(l,i,a),_t(l,i,a),H(2,l,i,a),H(1,l,i,a),y=i,l.join("")}function $(o,a,l){const i=o.length,s=l.dir?it:lt;let u=0,L=-1;const T=[],g=[];l.hiLevel=l.dir,l.lastArabic=!1,l.hasUbatAl=!1,l.hasUbatB=!1,l.hasUbatS=!1;for(let d=0;d<i;d++)T[d]=St(o[d]);for(let d=0;d<i;d++){const B=u,w=Nt(o,T,g,d,l);g[d]=w,u=s[B][w];const N=240&u;u&=15;const Y=s[u][kt];if(a[d]=Y,N>0)if(N===16){for(let C=L;C<d;C++)a[C]=1;L=-1}else L=-1;if(s[u][Dt])L===-1&&(L=d);else if(L>-1){for(let C=L;C<d;C++)a[C]=Y;L=-1}T[d]===_&&(a[d]=0),l.hiLevel|=Y}l.hasUbatS&&pt(T,a,i,l)}function pt(o,a,l,i){for(let s=0;s<l;s++)if(o[s]===k){a[s]=i.dir;for(let u=s-1;u>=0&&o[u]===F;u--)a[u]=i.dir}}function _t(o,a,l){if(l.hiLevel!==0&&l.swap[0]!==l.swap[1])for(let i=0;i<o.length;i++)a[i]===1&&(o[i]=Ct(o[i]))}function St(o){const a=o.charCodeAt(0),l=Lt[a>>8];return l<S?l:gt[l-S][255&a]}function M(o,a){const l=o.split("");if(a){const i=[];$(l,i,a),y=i}return l.reverse(),R.reverse(),l.join("")}function bt(o,a,l){for(let i=0;i<a;i++)if(o[i]===l)return i;return-1}function q(o){for(let a=0;a<Z.length;a++)if(o>=Z[a]&&o<=ft[a])return!0;return!1}function G(o,a,l,i){for(;a*l<i&&O(o[a]);)a+=l;return!!(a*l<i&&q(o[a]))}function wt(o,a,l,i){for(;a*l<i&&O(o[a]);)a+=l;let s=" ";if(!(a*l<i))return!1;s=o[a];for(let u=0;u<v.length;u++)if(v[u]===s)return!0;return!1}function H(o,a,l,i){if(i.hiLevel<o)return;if(o===1&&i.dir===I&&!i.hasUbatB)return a.reverse(),void R.reverse();const s=a.length;let u,L,T,g,d,B=0;for(;B<s;){if(l[B]>=o){for(u=B+1;u<s&&l[u]>=o;)u++;for(L=B,T=u-1;L<T;L++,T--)g=a[L],a[L]=a[T],a[T]=g,d=R[L],R[L]=R[T],R[T]=d;B=u}B++}}function Nt(o,a,l,i,s){const u=a[i];return{UBAT_L:()=>(s.lastArabic=!1,e),UBAT_R:()=>(s.lastArabic=!1,f),UBAT_ON:()=>t,UBAT_AN:()=>U,UBAT_EN:()=>s.lastArabic?U:h,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,f),UBAT_WS:()=>t,UBAT_CS:()=>{let L,T;return i<1||i+1>=a.length||(L=l[i-1])!==h&&L!==U||(T=a[i+1])!==h&&T!==U?t:(s.lastArabic&&(T=U),T===L?T:t)},UBAT_ES:()=>(i>0?l[i-1]:_)===h&&i+1<a.length&&a[i+1]===h?h:t,UBAT_ET:()=>{if(i>0&&l[i-1]===h)return h;if(s.lastArabic)return t;let L=i+1;const T=a.length;for(;L<T&&a[L]===A;)L++;return L<T&&a[L]===h?h:t},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const L=a.length;let T=i+1;for(;T<L&&a[T]===n;)T++;if(T<L){const g=o[i].charCodeAt(0),d=g>=1425&&g<=2303||g===64286,B=a[T];if(d&&(B===f||B===r))return f}}return i<1||a[i-1]===_?t:l[i-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,t),UBAT_LRE:()=>(s.lastArabic=!1,t),UBAT_RLE:()=>(s.lastArabic=!1,t),UBAT_LRO:()=>(s.lastArabic=!1,t),UBAT_RLO:()=>(s.lastArabic=!1,t),UBAT_PDF:()=>(s.lastArabic=!1,t),UBAT_BN:()=>t}[Tt[u]]()}function Ct(o){let a,l=0,i=x.length-1;for(;l<=i;)if(a=Math.floor((l+i)/2),o<x[a][0])i=a-1;else{if(!(o>x[a][0]))return x[a][1];l=a+1}return o}function vt(o){for(let a=0;a<W.length;a++)if(W[a]===o)return!0;return!1}function Vt(o){for(let a=0;a<j.length;a++)if(o===j[a])return nt[a];return o}function z(o,a){for(let l=0;l<j.length;l++)if(o===j[l])return a[l];return o}function O(o){return o>="\u064B"&&o<="\u0655"}function J(o){return o==="L"?"LTR":o==="R"?"RTL":o==="C"?"CLR":o==="D"?"CRL":""}function Et(o,a,l,i){for(;a*l<i&&O(o[a]);)a+=l;return a*l<i&&(o[a]=" ",!0)}function Ot(o,a){for(let l=0;l<v.length;l++)if(o===v[l])return a[l];return o}function It(o,a,l){R=[],y=[];for(let i=0;i<l;i++)o[i]=i,a[i]=i,R[i]=i}function xt(o){const a=new Array(o.length);for(let l=0;l<o.length;l++)a[o[l]]=l;return a}function K(o,a,l,i){for(let s=0;s<o.length;s++)(o[s]>a||!l&&o[s]===a)&&(o[s]+=i)}let R=[],P=[],y=[];const jt={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},kt=5,Dt=6,V=0,I=1,Q=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Pt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{dt as C};
