{"version":3,"file":"ogcFeatureUtils-CO8R4abg.js","sources":["../../node_modules/@arcgis/core/layers/ogc/ogcFeatureUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import t from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import{makeAbsolute as i,addQueryParameters as r,urlToObject as o}from\"../../core/urlUtils.js\";import{wgs84 as s}from\"../../geometry/support/spatialReferenceUtils.js\";import{project as a}from\"../../geometry/support/webMercatorUtils.js\";import{convertToFeatureSet as l,convertToGeometry as c,convertFromGeometry as u}from\"../graphics/featureConversionUtils.js\";import d from\"../graphics/OptimizedFeatureSet.js\";import{validateGeoJSON as f,inferLayerProperties as m,createOptimizedFeatures as p}from\"../graphics/sources/geojson/geojson.js\";import{createDrawingInfo as g}from\"../graphics/sources/support/clientSideDefaults.js\";import{mixAttributes as y}from\"../graphics/sources/support/sourceUtils.js\";import w from\"../support/FieldsIndex.js\";import{kebabDict as j}from\"../support/fieldType.js\";import{utc as b}from\"../../time/timeZoneUtils.js\";import h from\"../../geometry/SpatialReference.js\";const F=()=>n.getLogger(\"esri.layers.ogc.ogcFeatureUtils\"),I=\"startindex\",T=new Set([I,\"offset\"]),k=\"http://www.opengis.net/def/crs/\",x=`${k}OGC/1.3/CRS84`;var S;async function v(n,o,s={},a=5){const{links:l}=n,c=L(l,\"items\",S.geojson)||L(l,\"http://www.opengis.net/def/rel/ogc/1.0/items\",S.geojson);if(null==c)throw new t(\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{apiKey:u,customParameters:d,signal:p}=s,y=i(c.href,n.landingPage.url),h={limit:a,...d,token:u},T=r(y,h),k={accept:S.geojson},{data:x}=await e(T,{signal:p,headers:k}),v=A(T,a,x.links)??I;f(x);const N=m(x,{geometryType:o.geometryType}),O=o.fields||N.fields||[],P=null!=o.hasZ?o.hasZ:N.hasZ,q=N.geometryType,C=o.objectIdField||N.objectIdFieldName||\"OBJECTID\";let R=o.timeInfo;const $=O.find((({name:e})=>e===C));if($)$.editable=!1,$.nullable=!1;else{if(!N.objectIdFieldType)throw new t(\"ogc-feature-layer:missing-feature-id\",\"Collection geojson require a feature id as a unique identifier\");O.unshift({name:C,alias:C,type:\"number\"===N.objectIdFieldType?\"esriFieldTypeOID\":\"esriFieldTypeString\",editable:!1,nullable:!1})}if(C!==N.objectIdFieldName){const e=O.find((({name:e})=>e===N.objectIdFieldName));e&&(e.type=\"esriFieldTypeInteger\")}O===N.fields&&N.unknownFields.length>0&&F().warn({name:\"ogc-feature-layer:unknown-field-types\",message:\"Some fields types couldn't be inferred from the features and were dropped\",details:{unknownFields:N.unknownFields}});for(const e of O){if(null==e.name&&(e.name=e.alias),null==e.alias&&(e.alias=e.name),\"esriFieldTypeOID\"!==e.type&&\"esriFieldTypeGlobalID\"!==e.type&&(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable),!e.name)throw new t(\"ogc-feature-layer:invalid-field-name\",\"field name is missing\",{field:e});if(!j.jsonValues.includes(e.type))throw new t(\"ogc-feature-layer:invalid-field-type\",`invalid type for field \"${e.name}\"`,{field:e})}if(R){const e=new w(O);if(R.startTimeField){const t=e.get(R.startTimeField);t?(R.startTimeField=t.name,t.type=\"esriFieldTypeDate\"):R.startTimeField=null}if(R.endTimeField){const t=e.get(R.endTimeField);t?(R.endTimeField=t.name,t.type=\"esriFieldTypeDate\"):R.endTimeField=null}if(R.trackIdField){const t=e.get(R.trackIdField);t?R.trackIdField=t.name:(R.trackIdField=null,F().warn({name:\"ogc-feature-layer:invalid-timeInfo-trackIdField\",message:\"trackIdField is missing\",details:{timeInfo:R}}))}R.timeReference||={timeZoneIANA:b},R.startTimeField||R.endTimeField||(F().warn({name:\"ogc-feature-layer:invalid-timeInfo\",message:\"startTimeField and endTimeField are missing\",details:{timeInfo:R}}),R=void 0)}return{drawingInfo:q?g(q):null,extent:K(n),geometryType:q,fields:O,hasZ:!!P,objectIdField:C,paginationParameter:v,timeInfo:R}}async function N(n,r={}){const{links:o,url:s}=n,a=L(o,\"data\",S.json)||L(o,\"http://www.opengis.net/def/rel/ogc/1.0/data\",S.json);if(null==a)throw new t(\"ogc-feature-layer:missing-collections-page\",\"Missing collections url\");const{apiKey:l,customParameters:c,signal:u}=r,d=i(a.href,s),{data:f}=await e(d,{signal:u,headers:{accept:S.json},query:{...c,token:l}});for(const e of f.collections)e.landingPage=n;return f}async function O(n,r={}){const{links:o,url:s}=n,a=L(o,\"conformance\",S.json)||L(o,\"http://www.opengis.net/def/rel/ogc/1.0/conformance\",S.json);if(null==a)throw new t(\"ogc-feature-layer:missing-conformance-page\",\"Missing conformance url\");const{apiKey:l,customParameters:c,signal:u}=r,d=i(a.href,s),{data:f}=await e(d,{signal:u,headers:{accept:S.json},query:{...c,token:l}});return f}async function P(t,n={}){const{apiKey:i,customParameters:r,signal:o}=n,{data:s}=await e(t,{signal:o,headers:{accept:S.json},query:{...r,token:i}});return s.url=t,s}async function q(t,n={}){const{links:r,url:o}=t,s=L(r,\"service-desc\",S.openapi);if(null==s)return F().warn(\"ogc-feature-layer:missing-openapi-page\",\"The OGC API-Features server does not have an OpenAPI page.\"),null;const{apiKey:a,customParameters:l,signal:c}=n,u=i(s.href,o),{data:d}=await e(u,{signal:c,headers:{accept:S.openapi},query:{...l,token:a}});return d}function C(e){const t=/^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$/i.exec(e),n=t?.groups;if(!n)return null;const{authority:i,code:r}=n;switch(i.toLowerCase()){case\"ogc\":switch(r.toLowerCase()){case\"crs27\":return h.GCS_NAD_1927.wkid;case\"crs83\":return 4269;case\"crs84\":case\"crs84h\":return h.WGS84.wkid;default:return null}case\"esri\":case\"epsg\":{const e=Number.parseInt(r,10);return Number.isNaN(e)?null:e}default:return null}}async function R(e,t,n){const i=await $(e,t,n);return l(i)}async function $(n,r,o){const{collection:{links:l,landingPage:{url:f}},layerDefinition:m,maxRecordCount:g,queryParameters:{apiKey:j,customParameters:b},spatialReference:F,supportedCrs:I}=n,T=L(l,\"items\",S.geojson)||L(l,\"http://www.opengis.net/def/rel/ogc/1.0/items\",S.geojson);if(null==T)throw new t(\"ogc-feature-layer:missing-items-page\",\"Missing items url\");const{geometry:k,num:x,start:v,timeExtent:N,where:O}=r;if(r.objectIds)throw new t(\"ogc-feature-layer:query-by-objectids-not-supported\",\"Queries with object ids are not supported\");const P=h.fromJSON(F),q=r.outSpatialReference??P,C=q.isWGS84?null:W(q,I),R=U(k,I),$=M(N),G=Z(O),D=x??(null==v?g:10),K=0===v?void 0:v,{fields:A,geometryType:J,hasZ:z,objectIdField:E,paginationParameter:_}=m,B=i(T.href,f),{data:Q}=await e(B,{...o,query:{...b,...R,crs:C,datetime:$,query:G,limit:D,[_]:K,token:j},headers:{accept:S.geojson}}),V=p(Q,{geometryType:J,hasZ:z,objectIdField:E}),H=V.length===D&&!!L(Q.links??[],\"next\",S.geojson),X=new w(A);for(const e of V){const t={};y(X,t,e.attributes,!0);for(const e of X.fields)e.nullable&&!(e.name in t)&&(t[e.name]=null);t[E]=e.attributes[E],e.attributes=t}if(!C&&q.isWebMercator)for(const e of V)if(null!=e.geometry&&null!=J){const t=c(e.geometry,J,z,!1);t.spatialReference=h.WGS84,e.geometry=u(a(t,q))}for(const e of V)e.objectId=e.attributes[E];const Y=C||!C&&q.isWebMercator?q.toJSON():s,ee=new d;return ee.exceededTransferLimit=H,ee.features=V,ee.fields=A,ee.geometryType=J,ee.hasZ=z,ee.objectIdFieldName=E,ee.spatialReference=Y,ee}function G(e){return null!=e&&\"extent\"===e.type}function W(e,t){const{isWebMercator:n,wkid:i}=e;if(!i)return null;const r=n?t[3857]??t[102100]??t[102113]??t[900913]:t[e.wkid];return r?`${k}${r}`:null}function D(e){if(null==e)return\"\";const{xmin:t,ymin:n,xmax:i,ymax:r}=e;return`${t},${n},${i},${r}`}function M(e){if(null==e)return null;const{start:t,end:n}=e;return`${null!=t?t.toISOString():\"..\"}/${null!=n?n.toISOString():\"..\"}`}function Z(e){return null!=e&&e&&\"1=1\"!==e?e:null}function U(e,t){if(!G(e))return null;const{spatialReference:n}=e;if(!n||n.isWGS84)return{bbox:D(e)};const i=W(n,t);return null!=i?{bbox:D(e),\"bbox-crs\":i}:n.isWebMercator?{bbox:D(a(e,h.WGS84))}:null}function K(e){const t=e.extent?.spatial;if(!t)return null;const n=t.bbox[0],i=4===n.length,[r,o]=n,s=i?void 0:n[2];return{xmin:r,ymin:o,xmax:i?n[2]:n[3],ymax:i?n[3]:n[4],zmin:s,zmax:i?void 0:n[5],spatialReference:h.WGS84.toJSON()}}function L(e,t,n){return e.find((({rel:e,type:i})=>e===t&&i===n))??e.find((({rel:e,type:n})=>e===t&&!n))}function A(e,t,n){if(!n)return;const i=L(n,\"next\",S.geojson),r=o(i?.href)?.query;if(!r)return;const s=o(e).query,a=Object.keys(s??{}),l=Object.entries(r).filter((([e])=>!a.includes(e))).find((([e,n])=>T.has(e.toLowerCase())&&Number.parseInt(n,10)===t)),c=l?.[0];return c}!function(e){e.json=\"application/json\",e.geojson=\"application/geo+json\",e.openapi=\"application/vnd.oai.openapi+json;version=3.0\"}(S||(S={}));export{x as crsDefault,k as crsPrefix,v as getCollectionDefinition,N as getServerCollections,O as getServerConformance,P as getServerLandingPage,q as getServerOpenApi,C as getSpatialReferenceWkid,R as queryFeatureSetJSON,$ as queryOptimizedFeatureSet};\n"],"names":["F","n","I","T","k","x","S","v","o","s","a","l","c","L","t","u","d","p","y","i","h","r","e","A","f","N","m","O","P","q","C","R","$","j","w","b","g","K","W","U","M","G","Z","D","J","z","E","_","B","Q","V","H","X","ee"],"mappings":"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","x_google_ignoreList":[0]}