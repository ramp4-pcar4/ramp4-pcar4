{"version":3,"file":"t9n-BwfeNOOJ.js","sources":["../../node_modules/@esri/calcite-components/dist/components/t9n.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { getAssetPath } from '@stencil/core/internal/client';\nimport { g as getSupportedLocale } from './locale.js';\nimport { i as isBrowser } from './browser.js';\n\nconst componentLangToMessageBundleCache = {};\nasync function getMessageBundle(lang, component) {\n    const key = `${component}_${lang}`;\n    if (componentLangToMessageBundleCache[key]) {\n        return componentLangToMessageBundleCache[key];\n    }\n    componentLangToMessageBundleCache[key] = fetch(getAssetPath(`./assets/${component}/t9n/messages_${lang}.json`))\n        .then((resp) => {\n        if (!resp.ok) {\n            throwMessageFetchError();\n        }\n        return resp.json();\n    })\n        .catch(() => throwMessageFetchError());\n    return componentLangToMessageBundleCache[key];\n}\nfunction throwMessageFetchError() {\n    throw new Error(\"could not fetch component message bundle\");\n}\nfunction mergeMessages(component) {\n    component.messages = {\n        ...component.defaultMessages,\n        ...component.messageOverrides,\n    };\n}\nfunction noop() {\n    // intentionally empty\n}\n/**\n * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.\n *\n * @param component\n */\nasync function setUpMessages(component) {\n    component.defaultMessages = await fetchMessages(component, component.effectiveLocale);\n    mergeMessages(component);\n}\nasync function fetchMessages(component, lang) {\n    if (!isBrowser()) {\n        return {};\n    }\n    const { el } = component;\n    const tag = el.tagName.toLowerCase();\n    const componentName = tag.replace(\"calcite-\", \"\");\n    return getMessageBundle(getSupportedLocale(lang, \"t9n\"), componentName);\n}\n/**\n * This utility must be set up for the component to update its default message bundle if the locale changes.\n *\n * It can be set up in **either** of the following ways:\n *\n * 1. called from `LocalizedComponent`'s `onLocaleChange` method or\n * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop\n *\n * @param component\n * @param lang\n */\nasync function updateMessages(component, lang) {\n    component.defaultMessages = await fetchMessages(component, lang);\n    mergeMessages(component);\n}\n/**\n * This utility sets up internals for messages support.\n *\n * It needs to be called in `connectedCallback`\n *\n * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.\n *\n * @param component\n */\nfunction connectMessages(component) {\n    component.onMessagesChange = defaultOnMessagesChange;\n}\n/**\n * This utility tears down internals for messages support.\n *\n * It needs to be called in `disconnectedCallback`\n *\n * @param component\n */\nfunction disconnectMessages(component) {\n    // we set this to noop to for watchers triggered when components are disconnected\n    component.onMessagesChange = noop;\n}\nfunction defaultOnMessagesChange() {\n    mergeMessages(this);\n}\n\nexport { connectMessages as c, disconnectMessages as d, setUpMessages as s, updateMessages as u };\n\n//# sourceMappingURL=t9n.js.map"],"names":["componentLangToMessageBundleCache","getMessageBundle","lang","component","key","getAssetPath","resp","throwMessageFetchError","mergeMessages","noop","setUpMessages","fetchMessages","isBrowser","el","componentName","getSupportedLocale","updateMessages","connectMessages","defaultOnMessagesChange","disconnectMessages"],"mappings":";;AASA,MAAMA,IAAoC,CAAE;AAC5C,eAAeC,EAAiBC,GAAMC,GAAW;AAC7C,QAAMC,IAAM,GAAGD,CAAS,IAAID,CAAI;AAChC,SAAIF,EAAkCI,CAAG,MAGzCJ,EAAkCI,CAAG,IAAI,MAAMC,EAAa,YAAYF,CAAS,iBAAiBD,CAAI,OAAO,CAAC,EACzG,KAAK,CAACI,OACFA,EAAK,MACNC,EAAwB,GAErBD,EAAK,KAAM,EACrB,EACI,MAAM,MAAMC,GAAwB,IAClCP,EAAkCI,CAAG;AAChD;AACA,SAASG,IAAyB;AAC9B,QAAM,IAAI,MAAM,0CAA0C;AAC9D;AACA,SAASC,EAAcL,GAAW;AAC9B,EAAAA,EAAU,WAAW;AAAA,IACjB,GAAGA,EAAU;AAAA,IACb,GAAGA,EAAU;AAAA,EAChB;AACL;AACA,SAASM,IAAO;AAEhB;AAMA,eAAeC,EAAcP,GAAW;AACpC,EAAAA,EAAU,kBAAkB,MAAMQ,EAAcR,GAAWA,EAAU,eAAe,GACpFK,EAAcL,CAAS;AAC3B;AACA,eAAeQ,EAAcR,GAAWD,GAAM;AAC1C,MAAI,CAACU,EAAS;AACV,WAAO,CAAE;AAEb,QAAM,EAAE,IAAAC,EAAE,IAAKV,GAETW,IADMD,EAAG,QAAQ,YAAa,EACV,QAAQ,YAAY,EAAE;AAChD,SAAOZ,EAAiBc,EAAmBb,GAAM,KAAK,GAAGY,CAAa;AAC1E;AAYA,eAAeE,EAAeb,GAAWD,GAAM;AAC3C,EAAAC,EAAU,kBAAkB,MAAMQ,EAAcR,GAAWD,CAAI,GAC/DM,EAAcL,CAAS;AAC3B;AAUA,SAASc,EAAgBd,GAAW;AAChC,EAAAA,EAAU,mBAAmBe;AACjC;AAQA,SAASC,EAAmBhB,GAAW;AAEnC,EAAAA,EAAU,mBAAmBM;AACjC;AACA,SAASS,IAA0B;AAC/B,EAAAV,EAAc,IAAI;AACtB;","x_google_ignoreList":[0]}