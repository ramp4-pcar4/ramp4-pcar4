{"version":3,"file":"dehydratedFeatures-CE8L86IW.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/graphics/densificationConstants.js","../../node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";function n(){return has(\"curve-densification-coarse-segments\")}function e(){return has(\"curve-densification-max-segments\")}function i(){return has(\"curve-densification-min-segments\")}function t(){return has(\"curve-densification-pixel-deviation\")}export{e as getApproximateMaxDensificationSegments,n as getCoarseSegmentsPerCurve,t as getMaxDeviationInPixels,i as getMinSegmentsPerCurve};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{baseObjectMemory as e,estimateNumberArrayMemory as t,estimateNestedObjectMemory as s,estimateAttributesMemory as n}from\"../../core/memoryEstimations.js\";import{generateUID as r}from\"../../core/uid.js\";import i from\"../../geometry/SpatialReference.js\";import{empty as o,expandWithNestedArray as a}from\"../../geometry/support/aaBoundingBox.js\";import{empty as l,expandWithNestedArray as u}from\"../../geometry/support/aaBoundingRect.js\";import{unquantizePolyline as c,unquantizePolygon as p,unquantizeMultipoint as m,unquantizePoint as h}from\"../../geometry/support/quantizationUtils.js\";import{featureGeometryTypeKebabDictionary as f}from\"../../geometry/support/typeUtils.js\";import y from\"../support/Field.js\";import{getApproximateMaxDensificationSegments as g}from\"../../views/2d/layers/graphics/densificationConstants.js\";export{equals}from\"./dehydratedFeatureComparison.js\";class d{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function b(e){return null!=e.geometry}class x{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function j(e,t){const s=f.fromJSON(e.geometryType),n=i.fromJSON(e.spatialReference),r=e.transform,o=e.objectIdFieldName,a=t?.maxStringAttributeLength,l=t?.maxStringAttributeFields;let u;const g=e.features.map((t=>{const i=N(t,s,n,e.objectIdFieldName),f=i.geometry;if(w(i.attributes,l,a,(e=>{u??=[];const t=R(i,o);null!=t&&u.push({objectId:t,attribute:e})})),null!=f&&r)switch(f.type){case\"point\":i.geometry=h(r,f,f);break;case\"multipoint\":i.geometry=m(r,f,f);break;case\"polygon\":i.geometry=p(r,f,f);break;case\"polyline\":i.geometry=c(r,f,f);break;case\"extent\":case\"mesh\":i.geometry=f}return i}));return{geometryType:s,features:g,spatialReference:n,fields:e.fields?.map((e=>y.fromJSON(e)))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:u}}function N(e,t,s,n){return{uid:r(),objectId:n&&e.attributes?e.attributes[n]:null,attributes:e.attributes,geometry:Z(e.geometry,t,s),visible:!0}}function Z(e,t,s){if(null==e)return null;switch(t){case\"point\":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:\"point\",spatialReference:s}}case\"polyline\":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polyline\",spatialReference:s}}case\"polygon\":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"polygon\",spatialReference:s}}case\"multipoint\":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:\"multipoint\",spatialReference:s}}}}function F(n){if(null==n)return 0;switch(n.type){case\"point\":return e+10+8+24;case\"polyline\":case\"polygon\":{let t=0;const r=2+(n.hasZ?1:0)+(n.hasM?1:0),i=\"polyline\"===n.type?n.paths:n.rings,o=\"polyline\"===n.type?n.curvePaths:n.curveRings;if(o?.length){const e=3*g()*128;t=8*e*r+128*e+32*(i.length+1)}else t=s(i);return e+64+t+34}case\"multipoint\":{const t=s(n.points);return e+t+64+34+32}case\"extent\":return e+10+64+34;case\"mesh\":{const s=n.vertexAttributes;return e+t(s.position,s.normal,s.uv,s.tangent)}default:return e}}function I(e){let t=32;return t+=n(e.attributes),t+=3,t+=8+F(e.geometry),t}function k(e){if(null==e)return 0;switch(e.type){case\"point\":return 1;case\"polyline\":{let t=0;for(const s of e.paths)t+=s.length;return t}case\"polygon\":{let t=0;for(const s of e.rings)t+=s.length;return t}case\"multipoint\":return e.points.length;case\"extent\":return 2;case\"mesh\":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function M(e){if(null==e)return!1;switch(e.type){case\"extent\":case\"point\":return!0;case\"polyline\":for(const t of e.paths)if(t.length>0)return!0;return!1;case\"polygon\":for(const t of e.rings)if(t.length>0)return!0;return!1;case\"multipoint\":return e.points.length>0;case\"mesh\":return!e.loaded||e.vertexAttributes.position.length>0}}function v(e,t){switch(o(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case\"polyline\":for(let s=0;s<e.paths.length;s++)a(t,e.paths[s],!!e.hasZ);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)a(t,e.rings[s],!!e.hasZ);break;case\"multipoint\":a(t,e.points,!!e.hasZ);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}return t}function z(e,t){switch(l(t),\"mesh\"===e.type&&(e=e.extent),e.type){case\"point\":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case\"polyline\":for(let s=0;s<e.paths.length;s++)u(t,e.paths[s]);break;case\"polygon\":for(let s=0;s<e.rings.length;s++)u(t,e.rings[s]);break;case\"multipoint\":u(t,e.points);break;case\"extent\":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function R(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function w(e,t,s,n){if(t?.size&&null!=s&&e)for(const r in e){if(!t.has(r))continue;const i=e[r];\"string\"==typeof i&&i.length>s&&(n(r),e[r]=\"\")}}export{d as DehydratedFeatureClass,x as DehydratedFeatureSetClass,v as computeAABB,z as computeAABR,F as estimateGeometryMemory,I as estimateSize,j as fromFeatureSetJSON,Z as fromJSONGeometry,R as getObjectId,b as hasGeometry,M as hasVertices,k as numVertices,w as removeLargeStringAttributes};\n"],"names":["n","has","e","i","t","d","s","b","x","F","r","g","v","o","a","z","l","u","R","w"],"mappings":"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","x_google_ignoreList":[0,1]}