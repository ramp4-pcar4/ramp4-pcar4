import{bh as i}from"./main-BFDurRCu.js";import{y as f,C as u,m as l,p as m,M as h}from"./utils-BfXZnjCE.js";function C(e,t,o,r){if(e)if(e.type!=="CIMTextSymbol"){if(e.effects)for(const a of e.effects)k(a,t);if(e.symbolLayers)for(const a of e.symbolLayers){switch(a.type){case"CIMPictureMarker":case"CIMVectorMarker":d(a,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!r?.preserveOutlineWidth&&a.width&&(a.width*=t);break;case"CIMPictureFill":a.height&&(a.height*=t),a.offsetX&&(a.offsetX*=t),a.offsetY&&(a.offsetY*=t);break;case"CIMHatchFill":C(a.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),a.offsetX&&(a.offsetX*=t),a.offsetY&&(a.offsetY*=t),a.separation&&(a.separation*=t)}if(a.effects)for(const s of a.effects)k(s,t)}}else e.height!=null&&(e.height*=t)}function d(e,t,o){if(e&&(e.markerPlacement&&P(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||C(r.symbol,t,!0,o)}function P(e,t){switch(m(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(r=>r*t);e.placementTemplate=o}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(r=>r*t);e.placementTemplate=o}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function k(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map(r=>r*t);e.dashTemplate=o}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function g(e){const t=[];return M(f(e),t),t.length?new i(h(t[0])):null}function M(e,t){if(!e)return;let o;o=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(o?.symbolLayers){for(const a of o.symbolLayers)if(!(a.colorLocked||r&&(u(a)||l(a)&&a.markerPlacement&&m(a.markerPlacement))))switch(a.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":a.tintColor&&c(t,a.tintColor);break;case"CIMVectorMarker":a.markerGraphics?.forEach(s=>{M(s.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":c(t,a.color);break;case"CIMGradientFill":S(t,a);break;case"CIMHatchFill":M(a.lineSymbol,t)}}}function c(e,t){for(const o of e)if(o.join(".")===t.join("."))return;e.push(t)}function S(e,t){switch(t.colorRamp?.type){case"CIMMultipartColorRamp":t.colorRamp.colorRamps?.forEach(o=>{o.type==="CIMLinearContinuousColorRamp"&&I(e,o)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":I(e,t.colorRamp)}}function I(e,t){t&&(t.fromColor&&c(e,t.fromColor),t.toColor&&c(e,t.toColor))}function E(e,t,o){t instanceof i||(t=new i(t));const r=f(e);r&&p(r,t)}function p(e,t,o){if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const a=r?.type==="CIMPolygonSymbol";if(r?.symbolLayers)for(const s of r.symbolLayers){if(s.colorLocked||a&&(u(s)||l(s)&&s.markerPlacement&&m(s.markerPlacement)))continue;const n=t.toArray();switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor=n;break;case"CIMVectorMarker":s.markerGraphics?.forEach(b=>{p(b.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":s.color=n;break;case"CIMGradientFill":L(s,t);break;case"CIMHatchFill":p(s.lineSymbol,t)}}}function L(e,t){switch(e.colorRamp?.type){case"CIMMultipartColorRamp":e.colorRamp.colorRamps?.forEach(o=>{o.type==="CIMLinearContinuousColorRamp"&&y(o,t)});break;case"CIMLinearContinuousColorRamp":case"CIMPolarContinuousColorRamp":y(e.colorRamp,t)}}function y(e,t){if(e&&(e.fromColor&&(e.fromColor=t.toArray()),e.toColor)){const o=t.clone();o.a=0,e.toColor=o.toArray()}}function R(e,t,o=!1){const r=f(e);if(o&&(t=360-t),r?.type!=="CIMTextSymbol"){if(r?.type==="CIMPointSymbol"&&r.symbolLayers){const a=t-(r.angle||0);for(const s of r.symbolLayers)if(l(s)){let n=s.rotation||0;s.rotateClockwise?n-=a:n+=a,s.rotation=n}r.angle=t}}else r.angle=t}export{R as S,C as f,E as k,g as u};
