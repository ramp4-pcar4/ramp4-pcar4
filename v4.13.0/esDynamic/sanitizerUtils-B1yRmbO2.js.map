{"version":3,"file":"sanitizerUtils-B1yRmbO2.js","sources":["../../node_modules/@esri/arcgis-html-sanitizer/dist/esm/index.js","../../node_modules/@arcgis/core/core/sanitizerUtils.js"],"sourcesContent":["/*!\n * @esri/arcgis-html-sanitizer - v4.1.0 - Tue Dec 03 2024 09:13:28 GMT-0500 (Eastern Standard Time)\n * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.\n * Apache-2.0\n * \n * js-xss\n * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>\n * http://ucdok.com\n * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar lib$1 = {exports: {}};\n\nvar _default$1 = {};\n\nvar lib = {exports: {}};\n\nvar _default = {};\n\n/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nfunction getDefaultWhiteList$1 () {\n  // 白名单值说明：\n  // true: 允许该属性\n  // Function: function (val) { } 返回true表示允许该属性，其他值均表示不允许\n  // RegExp: regexp.test(val) 返回true表示允许该属性，其他值均表示不允许\n  // 除上面列出的值外均表示不允许\n  var whiteList = {};\n\n  whiteList['align-content'] = false; // default: auto\n  whiteList['align-items'] = false; // default: auto\n  whiteList['align-self'] = false; // default: auto\n  whiteList['alignment-adjust'] = false; // default: auto\n  whiteList['alignment-baseline'] = false; // default: baseline\n  whiteList['all'] = false; // default: depending on individual properties\n  whiteList['anchor-point'] = false; // default: none\n  whiteList['animation'] = false; // default: depending on individual properties\n  whiteList['animation-delay'] = false; // default: 0\n  whiteList['animation-direction'] = false; // default: normal\n  whiteList['animation-duration'] = false; // default: 0\n  whiteList['animation-fill-mode'] = false; // default: none\n  whiteList['animation-iteration-count'] = false; // default: 1\n  whiteList['animation-name'] = false; // default: none\n  whiteList['animation-play-state'] = false; // default: running\n  whiteList['animation-timing-function'] = false; // default: ease\n  whiteList['azimuth'] = false; // default: center\n  whiteList['backface-visibility'] = false; // default: visible\n  whiteList['background'] = true; // default: depending on individual properties\n  whiteList['background-attachment'] = true; // default: scroll\n  whiteList['background-clip'] = true; // default: border-box\n  whiteList['background-color'] = true; // default: transparent\n  whiteList['background-image'] = true; // default: none\n  whiteList['background-origin'] = true; // default: padding-box\n  whiteList['background-position'] = true; // default: 0% 0%\n  whiteList['background-repeat'] = true; // default: repeat\n  whiteList['background-size'] = true; // default: auto\n  whiteList['baseline-shift'] = false; // default: baseline\n  whiteList['binding'] = false; // default: none\n  whiteList['bleed'] = false; // default: 6pt\n  whiteList['bookmark-label'] = false; // default: content()\n  whiteList['bookmark-level'] = false; // default: none\n  whiteList['bookmark-state'] = false; // default: open\n  whiteList['border'] = true; // default: depending on individual properties\n  whiteList['border-bottom'] = true; // default: depending on individual properties\n  whiteList['border-bottom-color'] = true; // default: current color\n  whiteList['border-bottom-left-radius'] = true; // default: 0\n  whiteList['border-bottom-right-radius'] = true; // default: 0\n  whiteList['border-bottom-style'] = true; // default: none\n  whiteList['border-bottom-width'] = true; // default: medium\n  whiteList['border-collapse'] = true; // default: separate\n  whiteList['border-color'] = true; // default: depending on individual properties\n  whiteList['border-image'] = true; // default: none\n  whiteList['border-image-outset'] = true; // default: 0\n  whiteList['border-image-repeat'] = true; // default: stretch\n  whiteList['border-image-slice'] = true; // default: 100%\n  whiteList['border-image-source'] = true; // default: none\n  whiteList['border-image-width'] = true; // default: 1\n  whiteList['border-left'] = true; // default: depending on individual properties\n  whiteList['border-left-color'] = true; // default: current color\n  whiteList['border-left-style'] = true; // default: none\n  whiteList['border-left-width'] = true; // default: medium\n  whiteList['border-radius'] = true; // default: 0\n  whiteList['border-right'] = true; // default: depending on individual properties\n  whiteList['border-right-color'] = true; // default: current color\n  whiteList['border-right-style'] = true; // default: none\n  whiteList['border-right-width'] = true; // default: medium\n  whiteList['border-spacing'] = true; // default: 0\n  whiteList['border-style'] = true; // default: depending on individual properties\n  whiteList['border-top'] = true; // default: depending on individual properties\n  whiteList['border-top-color'] = true; // default: current color\n  whiteList['border-top-left-radius'] = true; // default: 0\n  whiteList['border-top-right-radius'] = true; // default: 0\n  whiteList['border-top-style'] = true; // default: none\n  whiteList['border-top-width'] = true; // default: medium\n  whiteList['border-width'] = true; // default: depending on individual properties\n  whiteList['bottom'] = false; // default: auto\n  whiteList['box-decoration-break'] = true; // default: slice\n  whiteList['box-shadow'] = true; // default: none\n  whiteList['box-sizing'] = true; // default: content-box\n  whiteList['box-snap'] = true; // default: none\n  whiteList['box-suppress'] = true; // default: show\n  whiteList['break-after'] = true; // default: auto\n  whiteList['break-before'] = true; // default: auto\n  whiteList['break-inside'] = true; // default: auto\n  whiteList['caption-side'] = false; // default: top\n  whiteList['chains'] = false; // default: none\n  whiteList['clear'] = true; // default: none\n  whiteList['clip'] = false; // default: auto\n  whiteList['clip-path'] = false; // default: none\n  whiteList['clip-rule'] = false; // default: nonzero\n  whiteList['color'] = true; // default: implementation dependent\n  whiteList['color-interpolation-filters'] = true; // default: auto\n  whiteList['column-count'] = false; // default: auto\n  whiteList['column-fill'] = false; // default: balance\n  whiteList['column-gap'] = false; // default: normal\n  whiteList['column-rule'] = false; // default: depending on individual properties\n  whiteList['column-rule-color'] = false; // default: current color\n  whiteList['column-rule-style'] = false; // default: medium\n  whiteList['column-rule-width'] = false; // default: medium\n  whiteList['column-span'] = false; // default: none\n  whiteList['column-width'] = false; // default: auto\n  whiteList['columns'] = false; // default: depending on individual properties\n  whiteList['contain'] = false; // default: none\n  whiteList['content'] = false; // default: normal\n  whiteList['counter-increment'] = false; // default: none\n  whiteList['counter-reset'] = false; // default: none\n  whiteList['counter-set'] = false; // default: none\n  whiteList['crop'] = false; // default: auto\n  whiteList['cue'] = false; // default: depending on individual properties\n  whiteList['cue-after'] = false; // default: none\n  whiteList['cue-before'] = false; // default: none\n  whiteList['cursor'] = false; // default: auto\n  whiteList['direction'] = false; // default: ltr\n  whiteList['display'] = true; // default: depending on individual properties\n  whiteList['display-inside'] = true; // default: auto\n  whiteList['display-list'] = true; // default: none\n  whiteList['display-outside'] = true; // default: inline-level\n  whiteList['dominant-baseline'] = false; // default: auto\n  whiteList['elevation'] = false; // default: level\n  whiteList['empty-cells'] = false; // default: show\n  whiteList['filter'] = false; // default: none\n  whiteList['flex'] = false; // default: depending on individual properties\n  whiteList['flex-basis'] = false; // default: auto\n  whiteList['flex-direction'] = false; // default: row\n  whiteList['flex-flow'] = false; // default: depending on individual properties\n  whiteList['flex-grow'] = false; // default: 0\n  whiteList['flex-shrink'] = false; // default: 1\n  whiteList['flex-wrap'] = false; // default: nowrap\n  whiteList['float'] = false; // default: none\n  whiteList['float-offset'] = false; // default: 0 0\n  whiteList['flood-color'] = false; // default: black\n  whiteList['flood-opacity'] = false; // default: 1\n  whiteList['flow-from'] = false; // default: none\n  whiteList['flow-into'] = false; // default: none\n  whiteList['font'] = true; // default: depending on individual properties\n  whiteList['font-family'] = true; // default: implementation dependent\n  whiteList['font-feature-settings'] = true; // default: normal\n  whiteList['font-kerning'] = true; // default: auto\n  whiteList['font-language-override'] = true; // default: normal\n  whiteList['font-size'] = true; // default: medium\n  whiteList['font-size-adjust'] = true; // default: none\n  whiteList['font-stretch'] = true; // default: normal\n  whiteList['font-style'] = true; // default: normal\n  whiteList['font-synthesis'] = true; // default: weight style\n  whiteList['font-variant'] = true; // default: normal\n  whiteList['font-variant-alternates'] = true; // default: normal\n  whiteList['font-variant-caps'] = true; // default: normal\n  whiteList['font-variant-east-asian'] = true; // default: normal\n  whiteList['font-variant-ligatures'] = true; // default: normal\n  whiteList['font-variant-numeric'] = true; // default: normal\n  whiteList['font-variant-position'] = true; // default: normal\n  whiteList['font-weight'] = true; // default: normal\n  whiteList['grid'] = false; // default: depending on individual properties\n  whiteList['grid-area'] = false; // default: depending on individual properties\n  whiteList['grid-auto-columns'] = false; // default: auto\n  whiteList['grid-auto-flow'] = false; // default: none\n  whiteList['grid-auto-rows'] = false; // default: auto\n  whiteList['grid-column'] = false; // default: depending on individual properties\n  whiteList['grid-column-end'] = false; // default: auto\n  whiteList['grid-column-start'] = false; // default: auto\n  whiteList['grid-row'] = false; // default: depending on individual properties\n  whiteList['grid-row-end'] = false; // default: auto\n  whiteList['grid-row-start'] = false; // default: auto\n  whiteList['grid-template'] = false; // default: depending on individual properties\n  whiteList['grid-template-areas'] = false; // default: none\n  whiteList['grid-template-columns'] = false; // default: none\n  whiteList['grid-template-rows'] = false; // default: none\n  whiteList['hanging-punctuation'] = false; // default: none\n  whiteList['height'] = true; // default: auto\n  whiteList['hyphens'] = false; // default: manual\n  whiteList['icon'] = false; // default: auto\n  whiteList['image-orientation'] = false; // default: auto\n  whiteList['image-resolution'] = false; // default: normal\n  whiteList['ime-mode'] = false; // default: auto\n  whiteList['initial-letters'] = false; // default: normal\n  whiteList['inline-box-align'] = false; // default: last\n  whiteList['justify-content'] = false; // default: auto\n  whiteList['justify-items'] = false; // default: auto\n  whiteList['justify-self'] = false; // default: auto\n  whiteList['left'] = false; // default: auto\n  whiteList['letter-spacing'] = true; // default: normal\n  whiteList['lighting-color'] = true; // default: white\n  whiteList['line-box-contain'] = false; // default: block inline replaced\n  whiteList['line-break'] = false; // default: auto\n  whiteList['line-grid'] = false; // default: match-parent\n  whiteList['line-height'] = false; // default: normal\n  whiteList['line-snap'] = false; // default: none\n  whiteList['line-stacking'] = false; // default: depending on individual properties\n  whiteList['line-stacking-ruby'] = false; // default: exclude-ruby\n  whiteList['line-stacking-shift'] = false; // default: consider-shifts\n  whiteList['line-stacking-strategy'] = false; // default: inline-line-height\n  whiteList['list-style'] = true; // default: depending on individual properties\n  whiteList['list-style-image'] = true; // default: none\n  whiteList['list-style-position'] = true; // default: outside\n  whiteList['list-style-type'] = true; // default: disc\n  whiteList['margin'] = true; // default: depending on individual properties\n  whiteList['margin-bottom'] = true; // default: 0\n  whiteList['margin-left'] = true; // default: 0\n  whiteList['margin-right'] = true; // default: 0\n  whiteList['margin-top'] = true; // default: 0\n  whiteList['marker-offset'] = false; // default: auto\n  whiteList['marker-side'] = false; // default: list-item\n  whiteList['marks'] = false; // default: none\n  whiteList['mask'] = false; // default: border-box\n  whiteList['mask-box'] = false; // default: see individual properties\n  whiteList['mask-box-outset'] = false; // default: 0\n  whiteList['mask-box-repeat'] = false; // default: stretch\n  whiteList['mask-box-slice'] = false; // default: 0 fill\n  whiteList['mask-box-source'] = false; // default: none\n  whiteList['mask-box-width'] = false; // default: auto\n  whiteList['mask-clip'] = false; // default: border-box\n  whiteList['mask-image'] = false; // default: none\n  whiteList['mask-origin'] = false; // default: border-box\n  whiteList['mask-position'] = false; // default: center\n  whiteList['mask-repeat'] = false; // default: no-repeat\n  whiteList['mask-size'] = false; // default: border-box\n  whiteList['mask-source-type'] = false; // default: auto\n  whiteList['mask-type'] = false; // default: luminance\n  whiteList['max-height'] = true; // default: none\n  whiteList['max-lines'] = false; // default: none\n  whiteList['max-width'] = true; // default: none\n  whiteList['min-height'] = true; // default: 0\n  whiteList['min-width'] = true; // default: 0\n  whiteList['move-to'] = false; // default: normal\n  whiteList['nav-down'] = false; // default: auto\n  whiteList['nav-index'] = false; // default: auto\n  whiteList['nav-left'] = false; // default: auto\n  whiteList['nav-right'] = false; // default: auto\n  whiteList['nav-up'] = false; // default: auto\n  whiteList['object-fit'] = false; // default: fill\n  whiteList['object-position'] = false; // default: 50% 50%\n  whiteList['opacity'] = false; // default: 1\n  whiteList['order'] = false; // default: 0\n  whiteList['orphans'] = false; // default: 2\n  whiteList['outline'] = false; // default: depending on individual properties\n  whiteList['outline-color'] = false; // default: invert\n  whiteList['outline-offset'] = false; // default: 0\n  whiteList['outline-style'] = false; // default: none\n  whiteList['outline-width'] = false; // default: medium\n  whiteList['overflow'] = false; // default: depending on individual properties\n  whiteList['overflow-wrap'] = false; // default: normal\n  whiteList['overflow-x'] = false; // default: visible\n  whiteList['overflow-y'] = false; // default: visible\n  whiteList['padding'] = true; // default: depending on individual properties\n  whiteList['padding-bottom'] = true; // default: 0\n  whiteList['padding-left'] = true; // default: 0\n  whiteList['padding-right'] = true; // default: 0\n  whiteList['padding-top'] = true; // default: 0\n  whiteList['page'] = false; // default: auto\n  whiteList['page-break-after'] = false; // default: auto\n  whiteList['page-break-before'] = false; // default: auto\n  whiteList['page-break-inside'] = false; // default: auto\n  whiteList['page-policy'] = false; // default: start\n  whiteList['pause'] = false; // default: implementation dependent\n  whiteList['pause-after'] = false; // default: implementation dependent\n  whiteList['pause-before'] = false; // default: implementation dependent\n  whiteList['perspective'] = false; // default: none\n  whiteList['perspective-origin'] = false; // default: 50% 50%\n  whiteList['pitch'] = false; // default: medium\n  whiteList['pitch-range'] = false; // default: 50\n  whiteList['play-during'] = false; // default: auto\n  whiteList['position'] = false; // default: static\n  whiteList['presentation-level'] = false; // default: 0\n  whiteList['quotes'] = false; // default: text\n  whiteList['region-fragment'] = false; // default: auto\n  whiteList['resize'] = false; // default: none\n  whiteList['rest'] = false; // default: depending on individual properties\n  whiteList['rest-after'] = false; // default: none\n  whiteList['rest-before'] = false; // default: none\n  whiteList['richness'] = false; // default: 50\n  whiteList['right'] = false; // default: auto\n  whiteList['rotation'] = false; // default: 0\n  whiteList['rotation-point'] = false; // default: 50% 50%\n  whiteList['ruby-align'] = false; // default: auto\n  whiteList['ruby-merge'] = false; // default: separate\n  whiteList['ruby-position'] = false; // default: before\n  whiteList['shape-image-threshold'] = false; // default: 0.0\n  whiteList['shape-outside'] = false; // default: none\n  whiteList['shape-margin'] = false; // default: 0\n  whiteList['size'] = false; // default: auto\n  whiteList['speak'] = false; // default: auto\n  whiteList['speak-as'] = false; // default: normal\n  whiteList['speak-header'] = false; // default: once\n  whiteList['speak-numeral'] = false; // default: continuous\n  whiteList['speak-punctuation'] = false; // default: none\n  whiteList['speech-rate'] = false; // default: medium\n  whiteList['stress'] = false; // default: 50\n  whiteList['string-set'] = false; // default: none\n  whiteList['tab-size'] = false; // default: 8\n  whiteList['table-layout'] = false; // default: auto\n  whiteList['text-align'] = true; // default: start\n  whiteList['text-align-last'] = true; // default: auto\n  whiteList['text-combine-upright'] = true; // default: none\n  whiteList['text-decoration'] = true; // default: none\n  whiteList['text-decoration-color'] = true; // default: currentColor\n  whiteList['text-decoration-line'] = true; // default: none\n  whiteList['text-decoration-skip'] = true; // default: objects\n  whiteList['text-decoration-style'] = true; // default: solid\n  whiteList['text-emphasis'] = true; // default: depending on individual properties\n  whiteList['text-emphasis-color'] = true; // default: currentColor\n  whiteList['text-emphasis-position'] = true; // default: over right\n  whiteList['text-emphasis-style'] = true; // default: none\n  whiteList['text-height'] = true; // default: auto\n  whiteList['text-indent'] = true; // default: 0\n  whiteList['text-justify'] = true; // default: auto\n  whiteList['text-orientation'] = true; // default: mixed\n  whiteList['text-overflow'] = true; // default: clip\n  whiteList['text-shadow'] = true; // default: none\n  whiteList['text-space-collapse'] = true; // default: collapse\n  whiteList['text-transform'] = true; // default: none\n  whiteList['text-underline-position'] = true; // default: auto\n  whiteList['text-wrap'] = true; // default: normal\n  whiteList['top'] = false; // default: auto\n  whiteList['transform'] = false; // default: none\n  whiteList['transform-origin'] = false; // default: 50% 50% 0\n  whiteList['transform-style'] = false; // default: flat\n  whiteList['transition'] = false; // default: depending on individual properties\n  whiteList['transition-delay'] = false; // default: 0s\n  whiteList['transition-duration'] = false; // default: 0s\n  whiteList['transition-property'] = false; // default: all\n  whiteList['transition-timing-function'] = false; // default: ease\n  whiteList['unicode-bidi'] = false; // default: normal\n  whiteList['vertical-align'] = false; // default: baseline\n  whiteList['visibility'] = false; // default: visible\n  whiteList['voice-balance'] = false; // default: center\n  whiteList['voice-duration'] = false; // default: auto\n  whiteList['voice-family'] = false; // default: implementation dependent\n  whiteList['voice-pitch'] = false; // default: medium\n  whiteList['voice-range'] = false; // default: medium\n  whiteList['voice-rate'] = false; // default: normal\n  whiteList['voice-stress'] = false; // default: normal\n  whiteList['voice-volume'] = false; // default: medium\n  whiteList['volume'] = false; // default: medium\n  whiteList['white-space'] = false; // default: normal\n  whiteList['widows'] = false; // default: 2\n  whiteList['width'] = true; // default: auto\n  whiteList['will-change'] = false; // default: auto\n  whiteList['word-break'] = true; // default: normal\n  whiteList['word-spacing'] = true; // default: normal\n  whiteList['word-wrap'] = true; // default: normal\n  whiteList['wrap-flow'] = false; // default: auto\n  whiteList['wrap-through'] = false; // default: wrap\n  whiteList['writing-mode'] = false; // default: horizontal-tb\n  whiteList['z-index'] = false; // default: auto\n\n  return whiteList;\n}\n\n\n/**\n * 匹配到白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onAttr (name, value, options) {\n  // do nothing\n}\n\n/**\n * 匹配到不在白名单上的一个属性时\n *\n * @param {String} name\n * @param {String} value\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreAttr (name, value, options) {\n  // do nothing\n}\n\nvar REGEXP_URL_JAVASCRIPT = /javascript\\s*\\:/img;\n\n/**\n * 过滤属性值\n *\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction safeAttrValue$1(name, value) {\n  if (REGEXP_URL_JAVASCRIPT.test(value)) return '';\n  return value;\n}\n\n\n_default.whiteList = getDefaultWhiteList$1();\n_default.getDefaultWhiteList = getDefaultWhiteList$1;\n_default.onAttr = onAttr;\n_default.onIgnoreAttr = onIgnoreAttr;\n_default.safeAttrValue = safeAttrValue$1;\n\nvar util$1 = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, '');\n  },\n  trimRight: function (str) {\n    if (String.prototype.trimRight) {\n      return str.trimRight();\n    }\n    return str.replace(/(\\s*$)/g, '');\n  }\n};\n\n/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar _$3 = util$1;\n\n\n/**\n * 解析style\n *\n * @param {String} css\n * @param {Function} onAttr 处理属性的函数\n *   参数格式： function (sourcePosition, position, name, value, source)\n * @return {String}\n */\nfunction parseStyle$1 (css, onAttr) {\n  css = _$3.trimRight(css);\n  if (css[css.length - 1] !== ';') css += ';';\n  var cssLength = css.length;\n  var isParenthesisOpen = false;\n  var lastPos = 0;\n  var i = 0;\n  var retCSS = '';\n\n  function addNewAttr () {\n    // 如果没有正常的闭合圆括号，则直接忽略当前属性\n    if (!isParenthesisOpen) {\n      var source = _$3.trim(css.slice(lastPos, i));\n      var j = source.indexOf(':');\n      if (j !== -1) {\n        var name = _$3.trim(source.slice(0, j));\n        var value = _$3.trim(source.slice(j + 1));\n        // 必须有属性名称\n        if (name) {\n          var ret = onAttr(lastPos, retCSS.length, name, value, source);\n          if (ret) retCSS += ret + '; ';\n        }\n      }\n    }\n    lastPos = i + 1;\n  }\n\n  for (; i < cssLength; i++) {\n    var c = css[i];\n    if (c === '/' && css[i + 1] === '*') {\n      // 备注开始\n      var j = css.indexOf('*/', i + 2);\n      // 如果没有正常的备注结束，则后面的部分全部跳过\n      if (j === -1) break;\n      // 直接将当前位置调到备注结尾，并且初始化状态\n      i = j + 1;\n      lastPos = i + 1;\n      isParenthesisOpen = false;\n    } else if (c === '(') {\n      isParenthesisOpen = true;\n    } else if (c === ')') {\n      isParenthesisOpen = false;\n    } else if (c === ';') {\n      if (isParenthesisOpen) ; else {\n        addNewAttr();\n      }\n    } else if (c === '\\n') {\n      addNewAttr();\n    }\n  }\n\n  return _$3.trim(retCSS);\n}\n\nvar parser$2 = parseStyle$1;\n\n/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\nvar DEFAULT$1 = _default;\nvar parseStyle = parser$2;\n\n\n/**\n * 返回值是否为空\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull$1 (obj) {\n  return (obj === undefined || obj === null);\n}\n\n/**\n * 浅拷贝对象\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject$1 (obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\n/**\n * 创建CSS过滤器\n *\n * @param {Object} options\n *   - {Object} whiteList\n *   - {Function} onAttr\n *   - {Function} onIgnoreAttr\n *   - {Function} safeAttrValue\n */\nfunction FilterCSS$2 (options) {\n  options = shallowCopyObject$1(options || {});\n  options.whiteList = options.whiteList || DEFAULT$1.whiteList;\n  options.onAttr = options.onAttr || DEFAULT$1.onAttr;\n  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT$1.onIgnoreAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT$1.safeAttrValue;\n  this.options = options;\n}\n\nFilterCSS$2.prototype.process = function (css) {\n  // 兼容各种奇葩输入\n  css = css || '';\n  css = css.toString();\n  if (!css) return '';\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onAttr = options.onAttr;\n  var onIgnoreAttr = options.onIgnoreAttr;\n  var safeAttrValue = options.safeAttrValue;\n\n  var retCSS = parseStyle(css, function (sourcePosition, position, name, value, source) {\n\n    var check = whiteList[name];\n    var isWhite = false;\n    if (check === true) isWhite = check;\n    else if (typeof check === 'function') isWhite = check(value);\n    else if (check instanceof RegExp) isWhite = check.test(value);\n    if (isWhite !== true) isWhite = false;\n\n    // 如果过滤后 value 为空则直接忽略\n    value = safeAttrValue(name, value);\n    if (!value) return;\n\n    var opts = {\n      position: position,\n      sourcePosition: sourcePosition,\n      source: source,\n      isWhite: isWhite\n    };\n\n    if (isWhite) {\n\n      var ret = onAttr(name, value, opts);\n      if (isNull$1(ret)) {\n        return name + ':' + value;\n      } else {\n        return ret;\n      }\n\n    } else {\n\n      var ret = onIgnoreAttr(name, value, opts);\n      if (!isNull$1(ret)) {\n        return ret;\n      }\n\n    }\n  });\n\n  return retCSS;\n};\n\n\nvar css = FilterCSS$2;\n\n/**\n * cssfilter\n *\n * @author 老雷<leizongmin@gmail.com>\n */\n\n(function (module, exports) {\n\tvar DEFAULT = _default;\n\tvar FilterCSS = css;\n\n\n\t/**\n\t * XSS过滤\n\t *\n\t * @param {String} css 要过滤的CSS代码\n\t * @param {Object} options 选项：whiteList, onAttr, onIgnoreAttr\n\t * @return {String}\n\t */\n\tfunction filterCSS (html, options) {\n\t  var xss = new FilterCSS(options);\n\t  return xss.process(html);\n\t}\n\n\n\t// 输出\n\texports = module.exports = filterCSS;\n\texports.FilterCSS = FilterCSS;\n\tfor (var i in DEFAULT) exports[i] = DEFAULT[i];\n} (lib, lib.exports));\n\nvar libExports$1 = lib.exports;\n\nvar util = {\n  indexOf: function (arr, item) {\n    var i, j;\n    if (Array.prototype.indexOf) {\n      return arr.indexOf(item);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      if (arr[i] === item) {\n        return i;\n      }\n    }\n    return -1;\n  },\n  forEach: function (arr, fn, scope) {\n    var i, j;\n    if (Array.prototype.forEach) {\n      return arr.forEach(fn, scope);\n    }\n    for (i = 0, j = arr.length; i < j; i++) {\n      fn.call(scope, arr[i], i, arr);\n    }\n  },\n  trim: function (str) {\n    if (String.prototype.trim) {\n      return str.trim();\n    }\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n  },\n  spaceIndex: function (str) {\n    var reg = /\\s|\\n|\\t/;\n    var match = reg.exec(str);\n    return match ? match.index : -1;\n  },\n};\n\n/**\n * default settings\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS$1 = libExports$1.FilterCSS;\nvar getDefaultCSSWhiteList = libExports$1.getDefaultWhiteList;\nvar _$2 = util;\n\nfunction getDefaultWhiteList() {\n  return {\n    a: [\"target\", \"href\", \"title\"],\n    abbr: [\"title\"],\n    address: [],\n    area: [\"shape\", \"coords\", \"href\", \"alt\"],\n    article: [],\n    aside: [],\n    audio: [\n      \"autoplay\",\n      \"controls\",\n      \"crossorigin\",\n      \"loop\",\n      \"muted\",\n      \"preload\",\n      \"src\",\n    ],\n    b: [],\n    bdi: [\"dir\"],\n    bdo: [\"dir\"],\n    big: [],\n    blockquote: [\"cite\"],\n    br: [],\n    caption: [],\n    center: [],\n    cite: [],\n    code: [],\n    col: [\"align\", \"valign\", \"span\", \"width\"],\n    colgroup: [\"align\", \"valign\", \"span\", \"width\"],\n    dd: [],\n    del: [\"datetime\"],\n    details: [\"open\"],\n    div: [],\n    dl: [],\n    dt: [],\n    em: [],\n    figcaption: [],\n    figure: [],\n    font: [\"color\", \"size\", \"face\"],\n    footer: [],\n    h1: [],\n    h2: [],\n    h3: [],\n    h4: [],\n    h5: [],\n    h6: [],\n    header: [],\n    hr: [],\n    i: [],\n    img: [\"src\", \"alt\", \"title\", \"width\", \"height\"],\n    ins: [\"datetime\"],\n    li: [],\n    mark: [],\n    nav: [],\n    ol: [],\n    p: [],\n    pre: [],\n    s: [],\n    section: [],\n    small: [],\n    span: [],\n    sub: [],\n    summary: [],\n    sup: [],\n    strong: [],\n    strike: [],\n    table: [\"width\", \"border\", \"align\", \"valign\"],\n    tbody: [\"align\", \"valign\"],\n    td: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    tfoot: [\"align\", \"valign\"],\n    th: [\"width\", \"rowspan\", \"colspan\", \"align\", \"valign\"],\n    thead: [\"align\", \"valign\"],\n    tr: [\"rowspan\", \"align\", \"valign\"],\n    tt: [],\n    u: [],\n    ul: [],\n    video: [\n      \"autoplay\",\n      \"controls\",\n      \"crossorigin\",\n      \"loop\",\n      \"muted\",\n      \"playsinline\",\n      \"poster\",\n      \"preload\",\n      \"src\",\n      \"height\",\n      \"width\",\n    ],\n  };\n}\n\nvar defaultCSSFilter = new FilterCSS$1();\n\n/**\n * default onTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTag function\n *\n * @param {String} tag\n * @param {String} html\n * @param {Object} options\n * @return {String}\n */\nfunction onIgnoreTag(tag, html, options) {\n  // do nothing\n}\n\n/**\n * default onTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default onIgnoreTagAttr function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @return {String}\n */\nfunction onIgnoreTagAttr(tag, name, value) {\n  // do nothing\n}\n\n/**\n * default escapeHtml function\n *\n * @param {String} html\n */\nfunction escapeHtml(html) {\n  return html.replace(REGEXP_LT, \"&lt;\").replace(REGEXP_GT, \"&gt;\");\n}\n\n/**\n * default safeAttrValue function\n *\n * @param {String} tag\n * @param {String} name\n * @param {String} value\n * @param {Object} cssFilter\n * @return {String}\n */\nfunction safeAttrValue(tag, name, value, cssFilter) {\n  // unescape attribute value firstly\n  value = friendlyAttrValue(value);\n\n  if (name === \"href\" || name === \"src\") {\n    // filter `href` and `src` attribute\n    // only allow the value that starts with `http://` | `https://` | `mailto:` | `/` | `#`\n    value = _$2.trim(value);\n    if (value === \"#\") return \"#\";\n    if (\n      !(\n        value.substr(0, 7) === \"http://\" ||\n        value.substr(0, 8) === \"https://\" ||\n        value.substr(0, 7) === \"mailto:\" ||\n        value.substr(0, 4) === \"tel:\" ||\n        value.substr(0, 11) === \"data:image/\" ||\n        value.substr(0, 6) === \"ftp://\" ||\n        value.substr(0, 2) === \"./\" ||\n        value.substr(0, 3) === \"../\" ||\n        value[0] === \"#\" ||\n        value[0] === \"/\"\n      )\n    ) {\n      return \"\";\n    }\n  } else if (name === \"background\") {\n    // filter `background` attribute (maybe no use)\n    // `javascript:`\n    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n      return \"\";\n    }\n  } else if (name === \"style\") {\n    // `expression()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {\n      return \"\";\n    }\n    // `url()`\n    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;\n    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {\n      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;\n      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {\n        return \"\";\n      }\n    }\n    if (cssFilter !== false) {\n      cssFilter = cssFilter || defaultCSSFilter;\n      value = cssFilter.process(value);\n    }\n  }\n\n  // escape `<>\"` before returns\n  value = escapeAttrValue(value);\n  return value;\n}\n\n// RegExp list\nvar REGEXP_LT = /</g;\nvar REGEXP_GT = />/g;\nvar REGEXP_QUOTE = /\"/g;\nvar REGEXP_QUOTE_2 = /&quot;/g;\nvar REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;\nvar REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;\nvar REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_3 = /\\/\\*|\\*\\//gm;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_4 =\n  /((j\\s*a\\s*v\\s*a|v\\s*b|l\\s*i\\s*v\\s*e)\\s*s\\s*c\\s*r\\s*i\\s*p\\s*t\\s*|m\\s*o\\s*c\\s*h\\s*a):/gi;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_5 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:/gi;\n// var REGEXP_DEFAULT_ON_TAG_ATTR_6 = /^[\\s\"'`]*(d\\s*a\\s*t\\s*a\\s*)\\:\\s*image\\//gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_7 =\n  /e\\s*x\\s*p\\s*r\\s*e\\s*s\\s*s\\s*i\\s*o\\s*n\\s*\\(.*/gi;\nvar REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\\s*r\\s*l\\s*\\(.*/gi;\n\n/**\n * escape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction escapeQuote(str) {\n  return str.replace(REGEXP_QUOTE, \"&quot;\");\n}\n\n/**\n * unescape double quote\n *\n * @param {String} str\n * @return {String} str\n */\nfunction unescapeQuote(str) {\n  return str.replace(REGEXP_QUOTE_2, '\"');\n}\n\n/**\n * escape html entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeHtmlEntities(str) {\n  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str, code) {\n    return code[0] === \"x\" || code[0] === \"X\"\n      ? String.fromCharCode(parseInt(code.substr(1), 16))\n      : String.fromCharCode(parseInt(code, 10));\n  });\n}\n\n/**\n * escape html5 new danger entities\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeDangerHtml5Entities(str) {\n  return str\n    .replace(REGEXP_ATTR_VALUE_COLON, \":\")\n    .replace(REGEXP_ATTR_VALUE_NEWLINE, \" \");\n}\n\n/**\n * clear nonprintable characters\n *\n * @param {String} str\n * @return {String}\n */\nfunction clearNonPrintableCharacter(str) {\n  var str2 = \"\";\n  for (var i = 0, len = str.length; i < len; i++) {\n    str2 += str.charCodeAt(i) < 32 ? \" \" : str.charAt(i);\n  }\n  return _$2.trim(str2);\n}\n\n/**\n * get friendly attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction friendlyAttrValue(str) {\n  str = unescapeQuote(str);\n  str = escapeHtmlEntities(str);\n  str = escapeDangerHtml5Entities(str);\n  str = clearNonPrintableCharacter(str);\n  return str;\n}\n\n/**\n * unescape attribute value\n *\n * @param {String} str\n * @return {String}\n */\nfunction escapeAttrValue(str) {\n  str = escapeQuote(str);\n  str = escapeHtml(str);\n  return str;\n}\n\n/**\n * `onIgnoreTag` function for removing all the tags that are not in whitelist\n */\nfunction onIgnoreTagStripAll() {\n  return \"\";\n}\n\n/**\n * remove tag body\n * specify a `tags` list, if the tag is not in the `tags` list then process by the specify function (optional)\n *\n * @param {array} tags\n * @param {function} next\n */\nfunction StripTagBody(tags, next) {\n  if (typeof next !== \"function\") {\n    next = function () {};\n  }\n\n  var isRemoveAllTag = !Array.isArray(tags);\n  function isRemoveTag(tag) {\n    if (isRemoveAllTag) return true;\n    return _$2.indexOf(tags, tag) !== -1;\n  }\n\n  var removeList = [];\n  var posStart = false;\n\n  return {\n    onIgnoreTag: function (tag, html, options) {\n      if (isRemoveTag(tag)) {\n        if (options.isClosing) {\n          var ret = \"[/removed]\";\n          var end = options.position + ret.length;\n          removeList.push([\n            posStart !== false ? posStart : options.position,\n            end,\n          ]);\n          posStart = false;\n          return ret;\n        } else {\n          if (!posStart) {\n            posStart = options.position;\n          }\n          return \"[removed]\";\n        }\n      } else {\n        return next(tag, html, options);\n      }\n    },\n    remove: function (html) {\n      var rethtml = \"\";\n      var lastPos = 0;\n      _$2.forEach(removeList, function (pos) {\n        rethtml += html.slice(lastPos, pos[0]);\n        lastPos = pos[1];\n      });\n      rethtml += html.slice(lastPos);\n      return rethtml;\n    },\n  };\n}\n\n/**\n * remove html comments\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripCommentTag(html) {\n  var retHtml = \"\";\n  var lastPos = 0;\n  while (lastPos < html.length) {\n    var i = html.indexOf(\"<!--\", lastPos);\n    if (i === -1) {\n      retHtml += html.slice(lastPos);\n      break;\n    }\n    retHtml += html.slice(lastPos, i);\n    var j = html.indexOf(\"-->\", i);\n    if (j === -1) {\n      break;\n    }\n    lastPos = j + 3;\n  }\n  return retHtml;\n}\n\n/**\n * remove invisible characters\n *\n * @param {String} html\n * @return {String}\n */\nfunction stripBlankChar(html) {\n  var chars = html.split(\"\");\n  chars = chars.filter(function (char) {\n    var c = char.charCodeAt(0);\n    if (c === 127) return false;\n    if (c <= 31) {\n      if (c === 10 || c === 13) return true;\n      return false;\n    }\n    return true;\n  });\n  return chars.join(\"\");\n}\n\n_default$1.whiteList = getDefaultWhiteList();\n_default$1.getDefaultWhiteList = getDefaultWhiteList;\n_default$1.onTag = onTag;\n_default$1.onIgnoreTag = onIgnoreTag;\n_default$1.onTagAttr = onTagAttr;\n_default$1.onIgnoreTagAttr = onIgnoreTagAttr;\n_default$1.safeAttrValue = safeAttrValue;\n_default$1.escapeHtml = escapeHtml;\n_default$1.escapeQuote = escapeQuote;\n_default$1.unescapeQuote = unescapeQuote;\n_default$1.escapeHtmlEntities = escapeHtmlEntities;\n_default$1.escapeDangerHtml5Entities = escapeDangerHtml5Entities;\n_default$1.clearNonPrintableCharacter = clearNonPrintableCharacter;\n_default$1.friendlyAttrValue = friendlyAttrValue;\n_default$1.escapeAttrValue = escapeAttrValue;\n_default$1.onIgnoreTagStripAll = onIgnoreTagStripAll;\n_default$1.StripTagBody = StripTagBody;\n_default$1.stripCommentTag = stripCommentTag;\n_default$1.stripBlankChar = stripBlankChar;\n_default$1.cssFilter = defaultCSSFilter;\n_default$1.getDefaultCSSWhiteList = getDefaultCSSWhiteList;\n\nvar parser$1 = {};\n\n/**\n * Simple HTML Parser\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar _$1 = util;\n\n/**\n * get tag name\n *\n * @param {String} html e.g. '<a hef=\"#\">'\n * @return {String}\n */\nfunction getTagName(html) {\n  var i = _$1.spaceIndex(html);\n  var tagName;\n  if (i === -1) {\n    tagName = html.slice(1, -1);\n  } else {\n    tagName = html.slice(1, i + 1);\n  }\n  tagName = _$1.trim(tagName).toLowerCase();\n  if (tagName.slice(0, 1) === \"/\") tagName = tagName.slice(1);\n  if (tagName.slice(-1) === \"/\") tagName = tagName.slice(0, -1);\n  return tagName;\n}\n\n/**\n * is close tag?\n *\n * @param {String} html 如：'<a hef=\"#\">'\n * @return {Boolean}\n */\nfunction isClosing(html) {\n  return html.slice(0, 2) === \"</\";\n}\n\n/**\n * parse input html and returns processed html\n *\n * @param {String} html\n * @param {Function} onTag e.g. function (sourcePosition, position, tag, html, isClosing)\n * @param {Function} escapeHtml\n * @return {String}\n */\nfunction parseTag$1(html, onTag, escapeHtml) {\n\n  var rethtml = \"\";\n  var lastPos = 0;\n  var tagStart = false;\n  var quoteStart = false;\n  var currentPos = 0;\n  var len = html.length;\n  var currentTagName = \"\";\n  var currentHtml = \"\";\n\n  chariterator: for (currentPos = 0; currentPos < len; currentPos++) {\n    var c = html.charAt(currentPos);\n    if (tagStart === false) {\n      if (c === \"<\") {\n        tagStart = currentPos;\n        continue;\n      }\n    } else {\n      if (quoteStart === false) {\n        if (c === \"<\") {\n          rethtml += escapeHtml(html.slice(lastPos, currentPos));\n          tagStart = currentPos;\n          lastPos = currentPos;\n          continue;\n        }\n        if (c === \">\") {\n          rethtml += escapeHtml(html.slice(lastPos, tagStart));\n          currentHtml = html.slice(tagStart, currentPos + 1);\n          currentTagName = getTagName(currentHtml);\n          rethtml += onTag(\n            tagStart,\n            rethtml.length,\n            currentTagName,\n            currentHtml,\n            isClosing(currentHtml)\n          );\n          lastPos = currentPos + 1;\n          tagStart = false;\n          continue;\n        }\n        if (c === '\"' || c === \"'\") {\n          var i = 1;\n          var ic = html.charAt(currentPos - i);\n\n          while (ic.trim() === \"\" || ic === \"=\") {\n            if (ic === \"=\") {\n              quoteStart = c;\n              continue chariterator;\n            }\n            ic = html.charAt(currentPos - ++i);\n          }\n        }\n      } else {\n        if (c === quoteStart) {\n          quoteStart = false;\n          continue;\n        }\n      }\n    }\n  }\n  if (lastPos < html.length) {\n    rethtml += escapeHtml(html.substr(lastPos));\n  }\n\n  return rethtml;\n}\n\nvar REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\\\_:.-]/gim;\n\n/**\n * parse input attributes and returns processed attributes\n *\n * @param {String} html e.g. `href=\"#\" target=\"_blank\"`\n * @param {Function} onAttr e.g. `function (name, value)`\n * @return {String}\n */\nfunction parseAttr$1(html, onAttr) {\n\n  var lastPos = 0;\n  var lastMarkPos = 0;\n  var retAttrs = [];\n  var tmpName = false;\n  var len = html.length;\n\n  function addAttr(name, value) {\n    name = _$1.trim(name);\n    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, \"\").toLowerCase();\n    if (name.length < 1) return;\n    var ret = onAttr(name, value || \"\");\n    if (ret) retAttrs.push(ret);\n  }\n\n  // 逐个分析字符\n  for (var i = 0; i < len; i++) {\n    var c = html.charAt(i);\n    var v, j;\n    if (tmpName === false && c === \"=\") {\n      tmpName = html.slice(lastPos, i);\n      lastPos = i + 1;\n      lastMarkPos = html.charAt(lastPos) === '\"' || html.charAt(lastPos) === \"'\" ? lastPos : findNextQuotationMark(html, i + 1);\n      continue;\n    }\n    if (tmpName !== false) {\n      if (\n        i === lastMarkPos\n      ) {\n        j = html.indexOf(c, i + 1);\n        if (j === -1) {\n          break;\n        } else {\n          v = _$1.trim(html.slice(lastMarkPos + 1, j));\n          addAttr(tmpName, v);\n          tmpName = false;\n          i = j;\n          lastPos = i + 1;\n          continue;\n        }\n      }\n    }\n    if (/\\s|\\n|\\t/.test(c)) {\n      html = html.replace(/\\s|\\n|\\t/g, \" \");\n      if (tmpName === false) {\n        j = findNextEqual(html, i);\n        if (j === -1) {\n          v = _$1.trim(html.slice(lastPos, i));\n          addAttr(v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          i = j - 1;\n          continue;\n        }\n      } else {\n        j = findBeforeEqual(html, i - 1);\n        if (j === -1) {\n          v = _$1.trim(html.slice(lastPos, i));\n          v = stripQuoteWrap(v);\n          addAttr(tmpName, v);\n          tmpName = false;\n          lastPos = i + 1;\n          continue;\n        } else {\n          continue;\n        }\n      }\n    }\n  }\n\n  if (lastPos < html.length) {\n    if (tmpName === false) {\n      addAttr(html.slice(lastPos));\n    } else {\n      addAttr(tmpName, stripQuoteWrap(_$1.trim(html.slice(lastPos))));\n    }\n  }\n\n  return _$1.trim(retAttrs.join(\" \"));\n}\n\nfunction findNextEqual(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction findNextQuotationMark(str, i) {\n  for (; i < str.length; i++) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"'\" || c === '\"') return i;\n    return -1;\n  }\n}\n\nfunction findBeforeEqual(str, i) {\n  for (; i > 0; i--) {\n    var c = str[i];\n    if (c === \" \") continue;\n    if (c === \"=\") return i;\n    return -1;\n  }\n}\n\nfunction isQuoteWrapString(text) {\n  if (\n    (text[0] === '\"' && text[text.length - 1] === '\"') ||\n    (text[0] === \"'\" && text[text.length - 1] === \"'\")\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction stripQuoteWrap(text) {\n  if (isQuoteWrapString(text)) {\n    return text.substr(1, text.length - 2);\n  } else {\n    return text;\n  }\n}\n\nparser$1.parseTag = parseTag$1;\nparser$1.parseAttr = parseAttr$1;\n\n/**\n * filter xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\nvar FilterCSS = libExports$1.FilterCSS;\nvar DEFAULT = _default$1;\nvar parser = parser$1;\nvar parseTag = parser.parseTag;\nvar parseAttr = parser.parseAttr;\nvar _ = util;\n\n/**\n * returns `true` if the input value is `undefined` or `null`\n *\n * @param {Object} obj\n * @return {Boolean}\n */\nfunction isNull(obj) {\n  return obj === undefined || obj === null;\n}\n\n/**\n * get attributes for a tag\n *\n * @param {String} html\n * @return {Object}\n *   - {String} html\n *   - {Boolean} closing\n */\nfunction getAttrs(html) {\n  var i = _.spaceIndex(html);\n  if (i === -1) {\n    return {\n      html: \"\",\n      closing: html[html.length - 2] === \"/\",\n    };\n  }\n  html = _.trim(html.slice(i + 1, -1));\n  var isClosing = html[html.length - 1] === \"/\";\n  if (isClosing) html = _.trim(html.slice(0, -1));\n  return {\n    html: html,\n    closing: isClosing,\n  };\n}\n\n/**\n * shallow copy\n *\n * @param {Object} obj\n * @return {Object}\n */\nfunction shallowCopyObject(obj) {\n  var ret = {};\n  for (var i in obj) {\n    ret[i] = obj[i];\n  }\n  return ret;\n}\n\nfunction keysToLowerCase(obj) {\n  var ret = {};\n  for (var i in obj) {\n    if (Array.isArray(obj[i])) {\n      ret[i.toLowerCase()] = obj[i].map(function (item) {\n        return item.toLowerCase();\n      });\n    } else {\n      ret[i.toLowerCase()] = obj[i];\n    }\n  }\n  return ret;\n}\n\n/**\n * FilterXSS class\n *\n * @param {Object} options\n *        whiteList (or allowList), onTag, onTagAttr, onIgnoreTag,\n *        onIgnoreTagAttr, safeAttrValue, escapeHtml\n *        stripIgnoreTagBody, allowCommentTag, stripBlankChar\n *        css{whiteList, onAttr, onIgnoreAttr} `css=false` means don't use `cssfilter`\n */\nfunction FilterXSS(options) {\n  options = shallowCopyObject(options || {});\n\n  if (options.stripIgnoreTag) {\n    if (options.onIgnoreTag) {\n      console.error(\n        'Notes: cannot use these two options \"stripIgnoreTag\" and \"onIgnoreTag\" at the same time'\n      );\n    }\n    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;\n  }\n  if (options.whiteList || options.allowList) {\n    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);\n  } else {\n    options.whiteList = DEFAULT.whiteList;\n  }\n\n  options.onTag = options.onTag || DEFAULT.onTag;\n  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;\n  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;\n  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;\n  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;\n  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;\n  this.options = options;\n\n  if (options.css === false) {\n    this.cssFilter = false;\n  } else {\n    options.css = options.css || {};\n    this.cssFilter = new FilterCSS(options.css);\n  }\n}\n\n/**\n * start process and returns result\n *\n * @param {String} html\n * @return {String}\n */\nFilterXSS.prototype.process = function (html) {\n  // compatible with the input\n  html = html || \"\";\n  html = html.toString();\n  if (!html) return \"\";\n\n  var me = this;\n  var options = me.options;\n  var whiteList = options.whiteList;\n  var onTag = options.onTag;\n  var onIgnoreTag = options.onIgnoreTag;\n  var onTagAttr = options.onTagAttr;\n  var onIgnoreTagAttr = options.onIgnoreTagAttr;\n  var safeAttrValue = options.safeAttrValue;\n  var escapeHtml = options.escapeHtml;\n  var cssFilter = me.cssFilter;\n\n  // remove invisible characters\n  if (options.stripBlankChar) {\n    html = DEFAULT.stripBlankChar(html);\n  }\n\n  // remove html comments\n  if (!options.allowCommentTag) {\n    html = DEFAULT.stripCommentTag(html);\n  }\n\n  // if enable stripIgnoreTagBody\n  var stripIgnoreTagBody = false;\n  if (options.stripIgnoreTagBody) {\n    stripIgnoreTagBody = DEFAULT.StripTagBody(\n      options.stripIgnoreTagBody,\n      onIgnoreTag\n    );\n    onIgnoreTag = stripIgnoreTagBody.onIgnoreTag;\n  }\n\n  var retHtml = parseTag(\n    html,\n    function (sourcePosition, position, tag, html, isClosing) {\n      var info = {\n        sourcePosition: sourcePosition,\n        position: position,\n        isClosing: isClosing,\n        isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag),\n      };\n\n      // call `onTag()`\n      var ret = onTag(tag, html, info);\n      if (!isNull(ret)) return ret;\n\n      if (info.isWhite) {\n        if (info.isClosing) {\n          return \"</\" + tag + \">\";\n        }\n\n        var attrs = getAttrs(html);\n        var whiteAttrList = whiteList[tag];\n        var attrsHtml = parseAttr(attrs.html, function (name, value) {\n          // call `onTagAttr()`\n          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;\n          var ret = onTagAttr(tag, name, value, isWhiteAttr);\n          if (!isNull(ret)) return ret;\n\n          if (isWhiteAttr) {\n            // call `safeAttrValue()`\n            value = safeAttrValue(tag, name, value, cssFilter);\n            if (value) {\n              return name + '=\"' + value + '\"';\n            } else {\n              return name;\n            }\n          } else {\n            // call `onIgnoreTagAttr()`\n            ret = onIgnoreTagAttr(tag, name, value, isWhiteAttr);\n            if (!isNull(ret)) return ret;\n            return;\n          }\n        });\n\n        // build new tag html\n        html = \"<\" + tag;\n        if (attrsHtml) html += \" \" + attrsHtml;\n        if (attrs.closing) html += \" /\";\n        html += \">\";\n        return html;\n      } else {\n        // call `onIgnoreTag()`\n        ret = onIgnoreTag(tag, html, info);\n        if (!isNull(ret)) return ret;\n        return escapeHtml(html);\n      }\n    },\n    escapeHtml\n  );\n\n  // if enable stripIgnoreTagBody\n  if (stripIgnoreTagBody) {\n    retHtml = stripIgnoreTagBody.remove(retHtml);\n  }\n\n  return retHtml;\n};\n\nvar xss = FilterXSS;\n\n/**\n * xss\n *\n * @author Zongmin Lei<leizongmin@gmail.com>\n */\n\n(function (module, exports) {\n\tvar DEFAULT = _default$1;\n\tvar parser = parser$1;\n\tvar FilterXSS = xss;\n\n\t/**\n\t * filter xss function\n\t *\n\t * @param {String} html\n\t * @param {Object} options { whiteList, onTag, onTagAttr, onIgnoreTag, onIgnoreTagAttr, safeAttrValue, escapeHtml }\n\t * @return {String}\n\t */\n\tfunction filterXSS(html, options) {\n\t  var xss = new FilterXSS(options);\n\t  return xss.process(html);\n\t}\n\n\texports = module.exports = filterXSS;\n\texports.filterXSS = filterXSS;\n\texports.FilterXSS = FilterXSS;\n\n\t(function () {\n\t  for (var i in DEFAULT) {\n\t    exports[i] = DEFAULT[i];\n\t  }\n\t  for (var j in parser) {\n\t    exports[j] = parser[j];\n\t  }\n\t})();\n\n\t// using `xss` on the WebWorker, output `filterXSS` to the globals\n\tfunction isWorkerEnv() {\n\t  return (\n\t    typeof self !== \"undefined\" &&\n\t    typeof DedicatedWorkerGlobalScope !== \"undefined\" &&\n\t    self instanceof DedicatedWorkerGlobalScope\n\t  );\n\t}\n\tif (isWorkerEnv()) {\n\t  self.filterXSS = module.exports;\n\t} \n} (lib$1, lib$1.exports));\n\nvar libExports = lib$1.exports;\n\n/**\n * Determine if the value is a plain object.\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n */\nvar isPlainObject = function (value) {\n    if (typeof value !== \"object\" || value === null) {\n        return false;\n    }\n    if (Object.prototype.toString.call(value) !== \"[object Object]\") {\n        return false;\n    }\n    var proto = Object.getPrototypeOf(value);\n    if (proto === null) {\n        return true;\n    }\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(value) === proto;\n};\n\n/**\n * The Sanitizer Class\n *\n * @export\n * @class Sanitizer\n */\nvar Sanitizer = /** @class */ (function () {\n    function Sanitizer(filterOptions, extendDefaults) {\n        var _this = this;\n        // Supported HTML Spec: https://doc.arcgis.com/en/arcgis-online/reference/supported-html.htm\n        this.arcgisWhiteList = {\n            a: [\"href\", \"style\", \"target\"],\n            abbr: [\"title\"],\n            article: [\"style\"],\n            aside: [\"style\"],\n            audio: [\"autoplay\", \"controls\", \"loop\", \"muted\", \"preload\"],\n            b: [],\n            blockquote: [\"style\"],\n            br: [],\n            code: [\"style\"],\n            dd: [\"style\"],\n            del: [\"style\"],\n            details: [\"open\", \"style\"],\n            div: [\"align\", \"aria-hidden\", \"aria-label\", \"style\"],\n            dl: [\"style\"],\n            dt: [\"style\"],\n            em: [],\n            figcaption: [\"style\"],\n            figure: [\"style\"],\n            font: [\"color\", \"face\", \"size\", \"style\"],\n            footer: [\"style\"],\n            h1: [\"style\"],\n            h2: [\"style\"],\n            h3: [\"style\"],\n            h4: [\"style\"],\n            h5: [\"style\"],\n            h6: [\"style\"],\n            header: [\"style\"],\n            hr: [],\n            i: [],\n            img: [\"alt\", \"border\", \"height\", \"src\", \"style\", \"width\"],\n            li: [],\n            main: [\"style\"],\n            mark: [\"style\"],\n            nav: [\"style\"],\n            ol: [],\n            p: [\"style\"],\n            pre: [\"style\"],\n            section: [\"style\"],\n            source: [\"media\", \"src\", \"type\"],\n            span: [\"aria-hidden\", \"aria-label\", \"style\"],\n            strong: [],\n            sub: [\"style\"],\n            summary: [\"style\"],\n            sup: [\"style\"],\n            table: [\"border\", \"cellpadding\", \"cellspacing\", \"height\", \"style\", \"width\"],\n            tbody: [],\n            tr: [\"align\", \"height\", \"style\", \"valign\"],\n            td: [\n                \"align\",\n                \"colspan\",\n                \"height\",\n                \"nowrap\",\n                \"rowspan\",\n                \"style\",\n                \"valign\",\n                \"width\",\n            ],\n            th: [\n                \"align\",\n                \"colspan\",\n                \"height\",\n                \"nowrap\",\n                \"rowspan\",\n                \"style\",\n                \"valign\",\n                \"width\",\n            ],\n            time: [\"style\"],\n            u: [],\n            ul: [],\n            video: [\n                \"autoplay\",\n                \"controls\",\n                \"height\",\n                \"loop\",\n                \"muted\",\n                \"poster\",\n                \"preload\",\n                \"width\",\n            ],\n        };\n        this.arcgisCSSWhiteList = __assign(__assign({}, libExports.getDefaultCSSWhiteList()), { \"align-items\": true, \"align-self\": true, \"flex\": true, \"flex-basis\": true, \"flex-direction\": true, \"flex-flow\": true, \"flex-grow\": true, \"flex-shrink\": true, \"flex-wrap\": true, \"float\": true, \"gap\": true, \"grid\": true, \"grid-area\": true, \"grid-auto-columns\": true, \"grid-auto-flow\": true, \"grid-auto-rows\": true, \"grid-column\": true, \"grid-column-end\": true, \"grid-column-start\": true, \"grid-row\": true, \"grid-row-end\": true, \"grid-row-start\": true, \"grid-template\": true, \"grid-template-areas\": true, \"grid-template-columns\": true, \"grid-template-rows\": true, \"justify-content\": true, \"justify-items\": true, \"justify-self\": true, \"line-height\": true, \"overflow\": true });\n        this.allowedProtocols = [\n            \"http\",\n            \"https\",\n            \"mailto\",\n            \"iform\",\n            \"tel\",\n            \"flow\",\n            \"lfmobile\",\n            \"arcgis-navigator\",\n            \"arcgis-appstudio-player\",\n            \"arcgis-survey123\",\n            \"arcgis-collector\",\n            \"arcgis-workforce\",\n            \"arcgis-explorer\",\n            \"arcgis-trek2there\",\n            \"arcgis-quickcapture\",\n            \"mspbi\",\n            \"comgooglemaps\",\n            \"pdfefile\",\n            \"pdfehttp\",\n            \"pdfehttps\",\n            \"boxapp\",\n            \"boxemm\",\n            \"awb\",\n            \"awbs\",\n            \"gropen\",\n            \"radarscope\",\n        ];\n        this.arcgisFilterOptions = {\n            allowCommentTag: true,\n            safeAttrValue: function (tag, name, value, cssFilter) {\n                // Take over safe attribute filtering for `a` `href`, `img` `src`,\n                // and `source` `src` attributes, otherwise pass onto the\n                // default `XSS.safeAttrValue` method.\n                if ((tag === \"a\" && name === \"href\") ||\n                    ((tag === \"img\" || tag === \"source\") && name === \"src\")) {\n                    return _this.sanitizeUrl(value);\n                }\n                return libExports.safeAttrValue(tag, name, value, cssFilter);\n            },\n        };\n        this._entityMap = {\n            \"&\": \"&#x38;\",\n            \"<\": \"&#x3C;\",\n            \">\": \"&#x3E;\",\n            '\"': \"&#x22;\",\n            \"'\": \"&#x27;\",\n            \"/\": \"&#x2F;\",\n        };\n        var xssFilterOptions;\n        if (filterOptions && !extendDefaults) {\n            // Override the defaults\n            xssFilterOptions = filterOptions;\n        }\n        else if (filterOptions && extendDefaults) {\n            // Extend the defaults\n            xssFilterOptions = Object.create(this.arcgisFilterOptions);\n            xssFilterOptions.css = { whiteList: this.arcgisCSSWhiteList };\n            Object.keys(filterOptions).forEach(function (key) {\n                if (key === \"whiteList\") {\n                    // Extend the whitelist by concatenating arrays\n                    xssFilterOptions.whiteList = _this._extendObjectOfArrays([\n                        _this.arcgisWhiteList,\n                        filterOptions.whiteList || {},\n                    ]);\n                }\n                else if (key === \"css\") {\n                    var cssExtensions_1 = filterOptions.css.whiteList;\n                    if (cssExtensions_1 != null && filterOptions.css instanceof Object) {\n                        Object.keys(cssExtensions_1).forEach(function (attr) {\n                            return (xssFilterOptions.css.whiteList[attr] =\n                                cssExtensions_1[attr]);\n                        });\n                    }\n                }\n                else {\n                    xssFilterOptions[key] = filterOptions[key];\n                }\n            });\n        }\n        else {\n            // Only use the defaults\n            xssFilterOptions = Object.create(this.arcgisFilterOptions);\n            xssFilterOptions.whiteList = this.arcgisWhiteList;\n            xssFilterOptions.css = { whiteList: this.arcgisCSSWhiteList };\n        }\n        this.xssFilterOptions = xssFilterOptions;\n        // Make this readable to tests\n        this._xssFilter = new libExports.FilterXSS(xssFilterOptions);\n    }\n    /**\n     * Sanitizes value to remove invalid HTML tags.\n     *\n     * Note: If the value passed does not contain a valid JSON data type (String,\n     * Number, JSON Object, Array, Boolean, or null), the value will be nullified.\n     *\n     * @param {any} value The value to sanitize.\n     * @returns {any} The sanitized value.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype.sanitize = function (value, options) {\n        if (options === void 0) { options = {}; }\n        switch (typeof value) {\n            case \"number\":\n                if (isNaN(value) || !isFinite(value)) {\n                    return null;\n                }\n                return value;\n            case \"boolean\":\n                return value;\n            case \"string\":\n                return this._xssFilter.process(value);\n            case \"object\":\n                return this._iterateOverObject(value, options);\n            default:\n                if (options.allowUndefined && typeof value === \"undefined\") {\n                    return;\n                }\n                return null;\n        }\n    };\n    /**\n     * Sanitizes a URL string following the allowed protocols and sanitization rules.\n     *\n     * @param {string} value The URL to sanitize.\n     * @param {{ isProtocolRequired: boolean }} options Configuration options for URL checking.\n     * @returns {string} The sanitized URL if it's valid, or an empty string if the URL is invalid.\n     */\n    Sanitizer.prototype.sanitizeUrl = function (value, options) {\n        var _a = (options !== null && options !== void 0 ? options : {}).isProtocolRequired, isProtocolRequired = _a === void 0 ? true : _a;\n        var protocol = this._trim(value.substring(0, value.indexOf(\":\")));\n        var isRootUrl = value === \"/\";\n        var isUrlFragment = /^#/.test(value);\n        var isValidProtocol = protocol && this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1;\n        if (isRootUrl || isUrlFragment || isValidProtocol) {\n            return libExports.escapeAttrValue(value);\n        }\n        if (!protocol && !isProtocolRequired) {\n            return libExports.escapeAttrValue(\"https://\".concat(value));\n        }\n        return \"\";\n    };\n    /**\n     * Sanitizes an HTML attribute value.\n     *\n     * @param {string} tag The tagname of the HTML element.\n     * @param {string} attribute The attribute name of the HTML element.\n     * @param {string} value The raw value to be used for the HTML attribute value.\n     * @param {XSS.ICSSFilter} [cssFilter] The CSS filter to be used.\n     * @returns {string} The sanitized attribute value.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype.sanitizeHTMLAttribute = function (tag, attribute, value, cssFilter) {\n        // use the custom safeAttrValue function if provided\n        if (typeof this.xssFilterOptions.safeAttrValue === \"function\") {\n            return this.xssFilterOptions.safeAttrValue(tag, attribute, value, \n            // @ts-expect-error safeAttrValue does handle undefined cssFilter\n            cssFilter);\n        }\n        // otherwise use the default\n        // @ts-ignore safeAttrValue does handle undefined cssFilter\n        return libExports.safeAttrValue(tag, attribute, value, cssFilter);\n    };\n    /**\n     * Checks if a value only contains valid HTML.\n     *\n     * @param {any} value The value to validate.\n     * @returns {boolean}\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype.validate = function (value, options) {\n        if (options === void 0) { options = {}; }\n        var sanitized = this.sanitize(value, options);\n        return {\n            isValid: value === sanitized,\n            sanitized: sanitized,\n        };\n    };\n    /**\n     * Encodes the following characters, `& < > \\\" ' /` to their hexadecimal HTML entity code.\n     * Example: \"&middot;\" => \"&#x38;middot;\"\n     *\n     * @param {string} value The value to encode.\n     * @returns {string} The encoded string value.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype.encodeHTML = function (value) {\n        var _this = this;\n        return String(value).replace(/[&<>\"'\\/]/g, function (s) {\n            return _this._entityMap[s];\n        });\n    };\n    /**\n     * Encodes all non-alphanumeric ASCII characters to their hexadecimal HTML entity codes.\n     * Example: \"alert(document.cookie)\" => \"alert&#x28;document&#x2e;cookie&#x29;\"\n     *\n     * @param {string} value The value to encode.\n     * @returns {string} The encoded string value.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype.encodeAttrValue = function (value) {\n        var alphanumericRE = /^[a-zA-Z0-9]$/;\n        return String(value).replace(/[\\x00-\\xFF]/g, function (c, idx) {\n            return !alphanumericRE.test(c)\n                ? \"&#x\".concat(Number(value.charCodeAt(idx)).toString(16), \";\")\n                : c;\n        });\n    };\n    /**\n     * Extends an object of arrays by by concatenating arrays of the same object\n     * keys. If the if the previous key's value is not an array, the next key's\n     * value will replace the previous key. This method is used for extending the\n     * whiteList in the XSS filter options.\n     *\n     * @private\n     * @param {Array<{}>} objects An array of objects.\n     * @returns {{}} The extended object.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype._extendObjectOfArrays = function (objects) {\n        var finalObj = {};\n        objects.forEach(function (obj) {\n            Object.keys(obj).forEach(function (key) {\n                if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {\n                    finalObj[key] = finalObj[key].concat(obj[key]);\n                }\n                else {\n                    finalObj[key] = obj[key];\n                }\n            });\n        });\n        return finalObj;\n    };\n    /**\n     * Iterate over a plain object or array to deeply sanitize each value.\n     *\n     * @private\n     * @param {object} obj The object to iterate over.\n     * @returns {(object | null)} The sanitized object.\n     * @memberof Sanitizer\n     */\n    Sanitizer.prototype._iterateOverObject = function (obj, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        try {\n            var hasChanged_1 = false;\n            var changedObj = void 0;\n            if (Array.isArray(obj)) {\n                changedObj = obj.reduce(function (prev, value) {\n                    var validation = _this.validate(value, options);\n                    if (validation.isValid) {\n                        return prev.concat([value]);\n                    }\n                    else {\n                        hasChanged_1 = true;\n                        return prev.concat([validation.sanitized]);\n                    }\n                }, []);\n            }\n            else if (!isPlainObject(obj)) {\n                if (options.allowUndefined && typeof obj === \"undefined\") {\n                    return;\n                }\n                return null;\n            }\n            else {\n                var keys = Object.keys(obj);\n                changedObj = keys.reduce(function (prev, key) {\n                    var value = obj[key];\n                    var validation = _this.validate(value, options);\n                    if (validation.isValid) {\n                        prev[key] = value;\n                    }\n                    else {\n                        hasChanged_1 = true;\n                        prev[key] = validation.sanitized;\n                    }\n                    return prev;\n                }, {});\n            }\n            if (hasChanged_1) {\n                return changedObj;\n            }\n            return obj;\n        }\n        catch (err) {\n            return null;\n        }\n    };\n    /**\n     * Trim whitespace from the start and ends of a string.\n     * @param {string} val The string to trim.\n     * @returns {string} The trimmed string.\n     */\n    Sanitizer.prototype._trim = function (val) {\n        // @ts-ignore This is used by Jest,\n        // but TypeScript errors since it assumes `trim` is always available.\n        return String.prototype.trim\n            ? val.trim()\n            : val.replace(/(^\\s*)|(\\s*$)/g, \"\");\n    };\n    return Sanitizer;\n}());\n\nexport { Sanitizer, Sanitizer as default };\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{Sanitizer as e}from\"@esri/arcgis-html-sanitizer\";const a=[\"dd\",\"dl\",\"dt\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"sub\",\"sup\",...[\"animate\",\"animatetransform\",\"circle\",\"clippath\",\"defs\",\"ellipse\",\"g\",\"image\",\"line\",\"lineargradient\",\"marker\",\"mask\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialgradient\",\"rect\",\"stop\",\"svg\",\"switch\",\"symbol\",\"text\",\"textpath\",\"tspan\",\"use\"]],i=a.reduce(((e,a)=>(e[a]=[],e)),{}),r=[\"align\",\"alink\",\"alt\",\"bgcolor\",\"border\",\"cellpadding\",\"cellspacing\",\"class\",\"color\",\"cols\",\"colspan\",\"coords\",\"d\",\"dir\",\"face\",\"height\",\"hspace\",\"ismap\",\"lang\",\"marginheight\",\"marginwidth\",\"multiple\",\"nohref\",\"noresize\",\"noshade\",\"nowrap\",\"ref\",\"rel\",\"rev\",\"rows\",\"rowspan\",\"scrolling\",\"shape\",\"span\",\"summary\",\"tabindex\",\"title\",\"usemap\",\"valign\",\"value\",\"vlink\",\"vspace\",\"width\"],t=new e({whiteList:i,onTagAttr:(e,a,i)=>{const t=`${a}=\"${i}\"`;if(r.includes(a))return t},stripIgnoreTag:!0,stripIgnoreTagBody:[\"script\",\"style\"]},!0);export{a as additionalAllowedTags,t as renderingSanitizer,r as safeAttrs};\n"],"names":["__assign","t","s","i","n","p","lib$1","_default$1","lib","_default","getDefaultWhiteList$1","whiteList","onAttr","name","value","options","onIgnoreAttr","REGEXP_URL_JAVASCRIPT","safeAttrValue$1","util$1","arr","item","j","fn","scope","str","_$3","parseStyle$1","css","cssLength","isParenthesisOpen","lastPos","retCSS","addNewAttr","source","ret","c","parser$2","DEFAULT$1","parseStyle","isNull$1","obj","shallowCopyObject$1","FilterCSS$2","me","safeAttrValue","sourcePosition","position","check","isWhite","opts","module","exports","DEFAULT","FilterCSS","filterCSS","html","xss","libExports$1","util","reg","match","FilterCSS$1","getDefaultCSSWhiteList","_$2","getDefaultWhiteList","defaultCSSFilter","onTag","tag","onIgnoreTag","onTagAttr","onIgnoreTagAttr","escapeHtml","REGEXP_LT","REGEXP_GT","cssFilter","friendlyAttrValue","REGEXP_DEFAULT_ON_TAG_ATTR_4","REGEXP_DEFAULT_ON_TAG_ATTR_7","REGEXP_DEFAULT_ON_TAG_ATTR_8","escapeAttrValue","REGEXP_QUOTE","REGEXP_QUOTE_2","REGEXP_ATTR_VALUE_1","REGEXP_ATTR_VALUE_COLON","REGEXP_ATTR_VALUE_NEWLINE","escapeQuote","unescapeQuote","escapeHtmlEntities","code","escapeDangerHtml5Entities","clearNonPrintableCharacter","str2","len","onIgnoreTagStripAll","StripTagBody","tags","next","isRemoveAllTag","isRemoveTag","removeList","posStart","end","rethtml","pos","stripCommentTag","retHtml","stripBlankChar","chars","char","parser$1","_$1","getTagName","tagName","isClosing","parseTag$1","tagStart","quoteStart","currentPos","currentTagName","currentHtml","chariterator","ic","REGEXP_ILLEGAL_ATTR_NAME","parseAttr$1","lastMarkPos","retAttrs","tmpName","addAttr","v","findNextQuotationMark","findNextEqual","findBeforeEqual","stripQuoteWrap","isQuoteWrapString","text","parser","parseTag","parseAttr","_","isNull","getAttrs","shallowCopyObject","keysToLowerCase","FilterXSS","stripIgnoreTagBody","info","attrs","whiteAttrList","attrsHtml","isWhiteAttr","filterXSS","isWorkerEnv","libExports","isPlainObject","proto","Sanitizer","filterOptions","extendDefaults","_this","xssFilterOptions","key","cssExtensions_1","attr","_a","isProtocolRequired","protocol","isRootUrl","isUrlFragment","isValidProtocol","attribute","sanitized","alphanumericRE","idx","objects","finalObj","hasChanged_1","changedObj","prev","validation","keys","val","a","r","e"],"mappings":"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","x_google_ignoreList":[0,1]}