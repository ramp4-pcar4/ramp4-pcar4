{"version":3,"file":"Legend-BMS5EVNm.js","sources":["../../node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/relationshipRampUtils.js","../../node_modules/@arcgis/core/smartMapping/renderers/support/referenceSizeUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/clusterUtils.js","../../node_modules/@arcgis/core/smartMapping/renderers/support/spikeUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js","../../node_modules/@arcgis/core/widgets/smartMapping/support/utils.js","../../node_modules/@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js","../../node_modules/@arcgis/core/widgets/Legend/LegendViewModel.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/css.js","../../node_modules/@arcgis/core/widgets/Legend/support/styleUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/utils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/sizeRampUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/univariateUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/CardView.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/css.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ClassicView.js","../../node_modules/@arcgis/core/widgets/Legend.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{generateFillAttributes as e,renderDef as a,renderShape as l,getBoundingBox as r,computeBBox as t,getTransformMatrix as s,generateStrokeAttributes as o}from\"../../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as i}from\"../../../../symbols/support/utils.js\";import{isRTL as n,classes as d}from\"../../../support/widgetUtils.js\";import{tsx as m}from\"../../../support/jsxFactory.js\";const b=\"esri-relationship-ramp\",u=`${b}--diamond`,c=`${b}--square`,f=\"http://www.w3.org/2000/svg\",p={diamondContainer:`${u}__container`,diamondLeftCol:`${u}__left-column`,diamondRightCol:`${u}__right-column`,diamondMidCol:`${u}__middle-column`,diamondMidColLabel:`${u}__middle-column--label`,diamondMidColRamp:`${u}__middle-column--ramp`,squareTable:`${c}__table`,squareTableRow:`${c}__table-row`,squareTableCell:`${c}__table-cell`,squareTableLabel:`${c}__table-label`,squareTableLabelLeftBottom:`${c}__table-label--left-bottom`,squareTableLabelRightBottom:`${c}__table-label--right-bottom`,squareTableLabelLeftTop:`${c}__table-label--left-top`,squareTableLabelRightTop:`${c}__table-label--right-top`};function k(e,a,l={}){const{focus:r,labels:t}=e,s=!!r,o=T(e,a,l),i={justifyContent:\"center\"},b=n(),u=l.key??a;return s?m(\"div\",{class:p.diamondContainer,key:`${u}-container`,styles:i},m(\"div\",{class:p.diamondLeftCol},b?t.right:t.left),m(\"div\",{class:p.diamondMidCol},m(\"div\",{class:p.diamondMidColLabel},t.top),o,m(\"div\",{class:p.diamondMidColLabel},t.bottom)),m(\"div\",{class:p.diamondRightCol},b?t.left:t.right)):m(\"div\",{class:p.squareTable,key:`${u}-container`},m(\"div\",{class:p.squareTableRow},m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelRightBottom)},b?t.top:t.left),m(\"div\",{class:p.squareTableCell}),m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelLeftBottom)},b?t.left:t.top)),m(\"div\",{class:p.squareTableRow},m(\"div\",{class:p.squareTableCell}),o,m(\"div\",{class:p.squareTableCell})),m(\"div\",{class:p.squareTableRow},m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelRightTop)},b?t.right:t.bottom),m(\"div\",{class:p.squareTableCell}),m(\"div\",{class:d(p.squareTableCell,p.squareTableLabel,p.squareTableLabelLeftTop)},b?t.bottom:t.right)))}function h(e,a,l){const r=`${l}_arrowStart`,t=`${l}_arrowEnd`,s=\"left\"===e,o={markerStart:null,markerEnd:null};switch(a){case\"HL\":s?o.markerStart=`url(#${t})`:o.markerEnd=`url(#${r})`;break;case\"LL\":o.markerStart=`url(#${t})`;break;case\"LH\":s?o.markerEnd=`url(#${r})`:o.markerStart=`url(#${t})`;break;default:o.markerEnd=`url(#${r})`}return o}function T(n,d,b={}){const{focus:u,numClasses:c,colors:k,rotation:T}=n,{opacity:_,effectList:q,ariaLabel:$}=b,L=b.size??60,g=!!u,C=Math.sqrt(L**2+L**2)+(g?0:5),v=[],w=[],y=[],x=(L||75)/c;for(let t=0;t<c;t++){const s=t*x;for(let i=0;i<c;i++){const n=i*x,d=e(k[t][i]),m=o(null),b={type:\"rect\",x:n,y:s,width:x,height:x},u=a(d);u&&v.push(u);const c=l(b,d.fill,m,null);c&&w.push(c),y.push(r(b))}}const R=15,E=15,M=10;let S=null;g||(S=\"margin: -15px -15px -18px -15px\");const j=h(\"left\",u,d),B=h(\"right\",u,d),H=t(y),U=s(H,C,C,0,!1,T,!1),W=s(H,C,C,0,!1,g?-45:null,!1),X={filter:i(q)??void 0,opacity:null==_?\"\":`${_}`};return m(\"div\",{class:g?p.diamondMidColRamp:p.squareTableCell,styles:X},m(\"svg\",{\"aria-label\":$,focusable:!1,height:C,role:\"image\",style:S,width:C,xmlns:f},m(\"defs\",null,m(\"marker\",{id:`${d}_arrowStart`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"5\",refY:\"5\"},m(\"polyline\",{fill:\"none\",points:\"0,0 5,5 0,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),m(\"marker\",{id:`${d}_arrowEnd`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"0\",refY:\"5\"},m(\"polyline\",{fill:\"none\",points:\"5,0 0,5 5,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),v),m(\"g\",{transform:U},w),m(\"g\",{transform:W},m(\"line\",{fill:\"none\",\"marker-end\":j.markerEnd,\"marker-start\":j.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:-10,x2:-10,y1:L-R,y2:R}),m(\"line\",{fill:\"none\",\"marker-end\":B.markerEnd,\"marker-start\":B.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:E,x2:L-E,y1:L+M,y2:L+M}))))}export{k as renderRelationshipRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../core/lang.js\";import{getStroke as o,getFill as e}from\"../../../symbols/support/gfxUtils.js\";import{getSymbolLayerFill as r}from\"../../../symbols/support/previewSymbol3D.js\";const s={HH:315,HL:45,LL:135,LH:225},l={2:[[\"HL\",\"HH\"],[\"LL\",\"LH\"]],3:[[\"HL\",\"HM\",\"HH\"],[\"ML\",\"MM\",\"MH\"],[\"LL\",\"LM\",\"LH\"]],4:[[\"HL\",\"HM1\",\"HM2\",\"HH\"],[\"M2L\",\"M2M1\",\"M2M2\",\"M2H\"],[\"M1L\",\"M1M1\",\"M1M2\",\"M1H\"],[\"LL\",\"LM1\",\"LM2\",\"LH\"]]};function n(t){if(!t)return;const{type:s}=t;if(s.includes(\"3d\"))return r(t.symbolLayers.at(0));if(\"simple-line\"===s){const e=o(t);return e&&e.color}if(\"simple-marker\"===t.type&&(\"x\"===t.style||\"cross\"===t.style)){const e=o(t);return e&&e.color}return e(t)}function H(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){case\"HH\":default:return{top:e,bottom:r,left:s,right:l};case\"HL\":return{top:s,bottom:l,left:r,right:e};case\"LL\":return{top:r,bottom:e,left:l,right:s};case\"LH\":return{top:l,bottom:s,left:e,right:r}}}function L(o,e){const r=[],s=o.length**.5,l=t(o),n=(e||\"HH\").split(\"\"),H=n[0],L=\"H\"===n[1];for(;l.length;){const t=[];for(;t.length<s;)t.push(l.shift());L&&t.reverse(),r.push(t)}return\"L\"===H&&r.reverse(),r}function i(t){const{focus:o,infos:e,numClasses:r}=t,s=l[r],L={};e.forEach((t=>{L[t.value]={label:t.label,fill:n(t.symbol)}}));const i=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=L[s[l][o]];t.push(e.fill)}i.push(t)}return{type:\"relationship-ramp\",numClasses:r,focus:o,colors:i,labels:H(o,L),rotation:u(o)}}function u(t){let o=s[t];return t&&null==o&&(o=s.HH),o||0}export{L as getRelationshipRampColors2D,i as getRelationshipRampElement,u as getRotationAngleForFocus};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../core/lang.js\";import r from\"../../../symbols/CIMSymbol.js\";import{PlacementPolygonCenterMethod as n}from\"../../../symbols/cim/enums.js\";var t;function o(e){const{view:r,field:n,normalizationField:o,sizeStops:i,sizeByScaleEnabled:a}=e,{value:l,size:s}=i[0],{value:c,size:m}=i[1];let y,u=0;n&&(u=`$feature[\"${n}\"]`,y=`\\n      if(!HasValue($feature, \"${n}\")){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n    `),o&&(u=`$feature[\"${n}\"] / $feature[\"${o}\"]`,y=`if(!HasValue($feature, \"${n}\") || !HasValue($feature, \"${o}\") || $feature[\"${o}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n      $feature[\"${o}\"];`);const p={type:\"CIMExpressionInfo\",title:\"Size in pixels of outer ring\",expression:a?`\\n      ${y}\\n      var maxSize = ${m};\\n      var referenceScale = ${r.scale};\\n      return (maxSize * (referenceScale / $view.scale));\\n    `:`${y}\\n      return ${m}`,returnType:\"Default\"},f={type:\"CIMExpressionInfo\",title:\"Size in pixels of inner ring\",expression:`\\n        ${y}\\n        var value = ${u};\\n\\n        var referenceScale = ${r.scale};\\n        var referenceScaleRatio = ${a?\"(referenceScale / $view.scale)\":1};\\n        var maxSize = ${m} * referenceScaleRatio;\\n        var minSize = ${s} * referenceScaleRatio;\\n\\n        var minDataValue = ${l};\\n        var maxDataValue = ${c};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var innerDotSize = Constrain(maxSize * ratio, minSize, maxSize);\\n        return innerDotSize;\\n      `,returnType:\"Default\"};return[{type:\"CIMPrimitiveOverride\",primitiveName:t.OuterRing,propertyName:\"Size\",valueExpressionInfo:p},{type:\"CIMPrimitiveOverride\",primitiveName:t.InnerDot,propertyName:\"Size\",valueExpressionInfo:f}]}function i(e){switch(e){case\"circle\":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case\"square\":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case\"diamond\":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case\"hexagon-pointy\":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case\"hexagon-flat\":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function a(e){const{type:r,color:o,colorLocked:a}=e;return{type:\"CIMVectorMarker\",enable:!0,colorLocked:!1,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:t.OuterRing,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:i(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:o.toArray(),colorLocked:!!a,effects:[{type:\"CIMGeometricEffectDonut\",width:.75}]}]}}],scaleSymbolsProportionally:!1,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:n.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:20}}function l(e){const{type:r,color:o}=e;return{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:t.InnerDot,frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:i(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:o.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:n.OnPolygon,offsetX:0,offsetY:0,clipAtBoundary:!1},size:10}}function s(e){const{primitiveOverrides:n}=e;return new r({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[a(e),l(e)]},primitiveOverrides:n}})}function c(e){return\"CIMVectorMarker\"===e?.type?e.markerGraphics?.[0]:void 0}function m(e){return\"CIMPolygonSymbol\"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function y(e,r){\"CIMVectorMarker\"===e?.type&&null!=r&&(e.size=r)}function u(e,r){const n=c(e);n&&null!=r&&(n.geometry=i(r))}function p(e,r){const n=m(c(e));n&&null!=r&&(n.color=r.toArray())}function f(e,r,n){const t=m(c(e));t&&null!=r&&n&&(t.colorLocked=r)}function v(r,n){const{outerRingSize:o,innerDotSize:i,type:a,color:l,colorLocked:s,primitiveOverrides:c}=n,m=\"CIMPolygonSymbol\"===r.data.symbol?.type?r.data.symbol.symbolLayers:null;if(2===m?.length)for(const e of m){const r=e.primitiveName===t.OuterRing;y(e,r?o:i),u(e,a),p(e,l),f(e,s,r)}return null!=o&&null!=i&&(r.data.primitiveOverrides=null),void 0!==c&&(r.data.primitiveOverrides=e(c)),r}!function(e){e.OuterRing=\"reference-size-outer-ring\",e.InnerDot=\"reference-size-inner-dot\"}(t||(t={}));export{o as createPrimitiveOverrides,s as createReferenceSizeSymbol,v as updateReferenceSizeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";function l(l,i,s){const a=l.effectiveClusterRenderer;if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const n=a.visualVariables.find((e=>\"size\"===e.type));if(!(\"stops\"in n)||!n.stops)return null;const t=n.stops.find((e=>e.useMinValue)),u=n.stops.find((e=>e.useMaxValue));if(null==t||null==u)return null;const r=s.featuresTilingScheme.getClosestInfoForScale(s.scale).level,f=n.field,o=i.getDisplayStatistics(r,f);return o?new e({field:n.field,minSize:l.clusterMinSize,minDataValue:o.minValue,maxSize:l.clusterMaxSize,maxDataValue:o.maxValue}):null}export{l as getEffectiveClusterSizeVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{clone as o}from\"../../../core/lang.js\";import{px2pt as t}from\"../../../core/screenUtils.js\";import r from\"../../../symbols/CIMSymbol.js\";import{Simple3DLineStyle as i,LineJoinStyle as l,LineCapStyle as n}from\"../../../symbols/cim/enums.js\";const a=\"spike-height-override\",s=t(8),c=t(20),f=\"triangle-solid-fill-open-outline\";function u(e){const{field:o,normalizationField:t,sizeStops:r}=e,{value:i,size:l}=r[0],{value:n,size:s}=r[1];let c,f=0;o&&(f=`$feature[\"${o}\"]`,c=`\\n      if(!HasValue($feature, \"${o}\")){\\n        return 0;\\n      }\\n      $feature[\"${o}\"];\\n    `),t&&(f=`$feature[\"${o}\"] / $feature[\"${t}\"]`,c=`if(!HasValue($feature, \"${o}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${o}\"];\\n      $feature[\"${t}\"];`);return[{type:\"CIMPrimitiveOverride\",primitiveName:a,propertyName:\"Length\",valueExpressionInfo:{type:\"CIMExpressionInfo\",title:\"Custom\",expression:`\\n        ${c}\\n        var value = ${f};\\n\\n        var maxSize = ${s};\\n        var minSize = ${l};\\n\\n        var minDataValue = ${i};\\n        var maxDataValue = ${n};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var size = Constrain(maxSize * ratio, minSize, maxSize);\\n        return size;\\n      `,returnType:\"Default\"}}]}function m(e){const{primitiveOverrides:o,baseWidth:t,defaultHeight:i}=e,l=p(e);return new r({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPointSymbol\",effects:[{type:\"CIMGeometricEffectRadial\",primitiveName:a,angle:90,length:i??c},{type:\"CIMGeometricEffectTaperedPolygon\",fromWidth:t??s,toWidth:1,length:5}],symbolLayers:l,haloSize:1,scaleX:1,angleAlignment:\"Display\"},primitiveOverrides:o}})}function p(e){const o=[d(e)],t=C(e);return t&&o.push(t),o}function d(e){const{strokeColor:o,strokeWidth:r,symbolStyle:a}=e,s=a?.includes(\"solid-fill\")||a?.includes(\"gradient-fill\");let c=o?.toArray(),f=!1;return a?.includes(\"outline\")&&s?f=!0:c=e.color?.toArray(),{type:\"CIMSolidStroke\",effects:y(a),enable:!0,colorLocked:f,capStyle:n.Round,joinStyle:l.Round,lineStyle3D:i.Strip,miterLimit:4,width:r??t(1),color:c}}function y(e){if(!e?.includes(\"closed\"))return[{type:\"CIMGeometricEffectAddControlPoints\",angleTolerance:90,primitiveName:\"spike-control-points\"},{type:\"CIMGeometricEffectSuppress\",suppress:!0,invert:!0,primitiveName:\"spike-stroke-suppress\"}]}function C(e){const{color:o,symbolStyle:t}=e,r=t?.includes(\"solid-fill\"),i=t?.includes(\"gradient-fill\");if(!r&&!i||!o)return;if(r)return{type:\"CIMSolidFill\",enable:!0,colorLocked:!1,color:o?.toArray()};const l=o.clone();return l.a=0,{type:\"CIMGradientFill\",enable:!0,angle:90,colorRamp:{type:\"CIMMultipartColorRamp\",colorRamps:[{type:\"CIMLinearContinuousColorRamp\",fromColor:o.toArray(),toColor:l.toArray()}],weights:[1]},gradientMethod:\"Linear\",gradientSize:70,gradientSizeUnits:\"Relative\",gradientType:\"Continuous\"}}function v(t,r){const{defaultHeight:i,baseWidth:l,color:n,strokeColor:s,primitiveOverrides:c,symbolStyle:f,strokeWidth:u}=r,m=\"CIMPointSymbol\"===t.data.symbol?.type?t.data.symbol:null,p=m?.symbolLayers;if(!p)return t;const y=m.effects,v=y?.find((e=>\"CIMGeometricEffectTaperedPolygon\"===e.type)),$=y?.find((e=>\"CIMGeometricEffectRadial\"===e.type&&e.primitiveName===a));null!=l&&v&&(v.fromWidth=l),null!=i&&$&&($.length=i);const h=p?.find((e=>\"CIMSolidStroke\"===e.type)),M=p?.find((e=>\"CIMSolidFill\"===e.type)),g=p?.find((e=>\"CIMGradientFill\"===e.type)),I=\"CIMMultipartColorRamp\"===g?.colorRamp?.type&&\"CIMLinearContinuousColorRamp\"===g.colorRamp.colorRamps[0]?.type?g.colorRamp.colorRamps[0]:null;if(f){const o=M?.color??I?.fromColor??h?.color,t=n??(o?new e(o):void 0),i=h?.color??o,l=s??(i?new e(i):void 0),a=f.includes(\"solid-fill\"),c=f.includes(\"gradient-fill\");if(a||c||S(p,M??g),t)if(a)S(p,g),M?M.color=t?.toArray():p.push(C({...r,color:t}));else if(c)if(S(p,M),g){if(I&&n){const e=t.clone();e.a=0,I.fromColor=t.toArray(),I.toColor=e.toArray()}}else p.push(C({...r,color:t}));if(h){const e=d({...r,strokeColor:l,color:t});h.effects=e.effects,h.color=e.color,h.width=e.width,h.colorLocked=e.colorLocked}}else if(h&&(s&&(h.color=s.toArray()),null!=u&&(h.width=u)),M&&n&&(M.color=n.toArray()),I&&n){const e=n.clone();e.a=0,I.fromColor=n.toArray(),I.toColor=e.toArray()}return void 0!==c&&(t.data.primitiveOverrides=o(c)),t}function S(e,o){if(!o)return;const t=e.indexOf(o);-1!==t&&e.splice(t,1)}export{u as createPrimitiveOverrides,m as createSpikeSymbol,f as defaultSpikeSymbolStyle,v as updateSpikeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{getColorLuminance as t}from\"../../../core/colorUtils.js\";import{round as l,numDigits as o,percentChange as i}from\"../../../renderers/support/numberUtils.js\";import{updateReferenceSizeSymbol as n}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import{updateSpikeSymbol as r}from\"../../../smartMapping/renderers/support/spikeUtils.js\";import s from\"../../../symbols/SimpleLineSymbol.js\";import a from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as u}from\"../../../symbols/support/cimSymbolUtils.js\";import{getCIMSymbolPreviewSize as c}from\"../../../symbols/support/previewCIMSymbol.js\";import{isSymbol3D as m}from\"../../../symbols/support/typeUtils.js\";import{isVolumetricSymbol as p,getSymbolOutlineSize as f}from\"../../../symbols/support/utils.js\";import{getAuthoringInfoVisualVariableByTheme as y,getSymbolForFlowRenderer as b,createStopLabel as d}from\"./utils.js\";import\"../../support/widgetUtils.js\";import{isDarkMode as h}from\"../../../support/modeUtils.js\";const w=30,S=12,g=24,v=[255,255,255],z=[200,200,200],k=[128,128,128],j=20,I=5;function V(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function x(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function M(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function U(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function C(e,t){const l=e.length-1;return e.map(((e,o)=>d(e,o,l,t)))}async function L(e,t,o,i,n,r,s){const a=t.legendOptions,u=a?.customValues,m=s||await B(e,o),b=t.stops,d=!!m,h=!!u,w=null!=t.minSize&&null!=t.maxSize,S=b&&b.length>1,v=!!t.target;if(!d||!h&&!(w||S&&!v))return;const z=p(m);let k=!1,j=null,I=null;j=z&&!S?l([t.minDataValue,t.maxDataValue]):u??await H(t,m,i,n?.type);const V=e?.authoringInfo,x=\"univariate-color-size\"===V?.type,M=x&&\"above-and-below\"===V?.univariateTheme,U=!!y(e,\"reference-size\"),L=!!y(e,\"spike\");if(!j&&S&&(j=b.map((e=>e.value)),k=b.some((e=>!!e.label)),\"flow\"===e.type&&(j=l(j)),k&&(I=b.map((e=>e.label)))),z&&null!=j&&j?.length>2&&!M&&(j=[j[0],j[j.length-1]]),!j)return null;x&&5!==j?.length&&(j=O({minSize:j[0],maxSize:j[j.length-1]}));const T=z?D(e,j):null,q=f(m),E=k?null:C(j,r),P=await Promise.all(j.map((async(l,o)=>{let r=z?T[o]:await G(t,m,l,i,n?.type),s=r;U&&(r*=g/t.maxSize||1,s=g);const a=J(m,r,e,o);L&&\"cim\"===a.type&&(s=await c(a));return{value:l,symbol:a,label:k?I[o]:E[o],size:s,outlineSize:q}})));return P.reverse()}function D(e,t){const l=e?.authoringInfo,o=\"univariate-color-size\"===l?.type;let i=[S,w];if(o){const e=t[0],l=t[t.length-1],o=S,n=w;i=t.map((t=>o+(t-e)/(l-e)*(n-o)))}return o&&\"below\"===l?.univariateTheme&&i.reverse(),i}function T(t,l,o,i){const r=\"class-breaks\"===t.type,s=r?t.classBreakInfos?.[0]?.symbol?.clone():t.uniqueValueInfos?.[0]?.symbol?.clone();return s&&\"type\"in s&&\"cim\"===s.type?(n(s,{color:i??(r?null:new e(z)),innerDotSize:l*(g/o)||1,outerRingSize:g}),s):null}function q(e,t){const l=e.classBreakInfos,o=l.length,i=o<2||!(t>=2)?l[0].symbol.clone():l[o-1].symbol.clone(),n=e.visualVariables?.some((e=>\"color\"===e.type));return n&&(i.type.includes(\"3d\")?P(i):R(i)),i}async function B(l,o){if(\"flow\"===l.type)return b(l,o);if(\"pie-chart\"===l.type)return new a({color:null,outline:l.outline?.width?l.outline:new s});let i=null,u=null;if(\"simple\"===l.type)i=l.symbol;else if(\"class-breaks\"===l.type){const e=l.classBreakInfos;i=e&&e[0]&&e[0].symbol,u=e.length>1}else if(\"unique-value\"===l.type){const e=l.uniqueValueInfos;i=e?.[0]?.symbol,u=null!=e&&e.length>1}if(!i||E(i))return null;if(i=i.clone(),o||u)if(i.type.includes(\"3d\"))P(i);else if(y(l,\"reference-size\")&&\"cim\"===i.type)n(i,{color:o??(\"class-breaks\"!==l.type?new e(z):null)});else if(y(l,\"spike\")&&\"cim\"===i.type){const l=new e(z),n=new e(k),s=\"CIMPointSymbol\"===i.data.symbol?.type?i.data.symbol:null,a=!!s?.symbolLayers?.find((({type:e})=>\"CIMSolidStroke\"===e))?.colorLocked;let u,c=o??void 0;if(c){const e=t(c),o=h();(!o&&e>225||o&&e<25)&&(c=l,u=a?n:l)}else c=l,u=a?n:l;r(i,{color:c,strokeColor:u})}else R(i);return i}function E(e){return m(e)?e.symbolLayers?.some((e=>\"fill\"===e?.type))??!1:e?.type.includes(\"fill\")??!1}function P(e){\"line-3d\"===e.type?e.symbolLayers.forEach((e=>{e.material={color:k}})):e.symbolLayers.forEach((e=>{\"icon\"!==e.type||e.resource?.href?e.material={color:z}:(e.material={color:v},e.outline={color:k,size:1.5})}))}function R(t){const l=h();if(\"cim\"===t.type)u(t,new e(z));else if(t.type.includes(\"line\"))t.color=k;else if(t.color=l?k:v,\"simple-marker\"===t.type)if(t.outline){const e=t.outline?.color?.toHex();\"#ffffff\"===e&&(t.outline.color=k)}else t.outline={color:k,width:1.5}}async function H(e,t,o,i){const n=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,o,i),r=n&&O(n);if(!n||!r)return;let s=r.map((t=>A(t,e,n)));s=l(s);for(let l=1;l<s.length-1;l++){const n=await F(e,t,s[l],s[l-1],o,i);n&&(s[l]=n[0],r[l]=n[1])}return s}function O(e){const t=e.minSize,l=e.maxSize,o=I,i=(l-t)/(o-1),n=[];for(let r=0;r<o;r++)n.push(t+i*r);return n}function A(e,t,l){const o=l.minSize,i=l.maxSize,n=t.minDataValue,r=t.maxDataValue;let s;if(e<=o)s=n;else if(e>=i)s=r;else{s=(e-o)/(i-o)*(r-n)+n}return s}async function F(e,t,n,r,s,a){const u=await G(e,t,n,s,a),c=await G(e,t,r,s,a),m=o(n),p=m.fractional,f=j;let y=m.integer,b=null,d=null;n>0&&n<1&&(b=10**p,y=o(n*=b).integer);for(let o=y-1;o>=0;o--){const r=10**o;let m=Math.floor(n/r)*r,p=Math.ceil(n/r)*r;null!=b&&(m/=b,p/=b);let y=(m+p)/2;[,y]=l([m,y,p],{indexes:[1]});const h=await G(e,t,m,s,a),w=await G(e,t,p,s,a),S=await G(e,t,y,s,a),g=i(u,h,c,null),v=i(u,w,c,null),z=i(u,S,c,null);let k=g.previous<=f,j=v.previous<=f;if(k&&j&&(g.previous<=v.previous?(k=!0,j=!1):(j=!0,k=!1)),k?d=[m,h]:j?d=[p,w]:z.previous<=f&&(d=[y,S]),d)break}return d}async function G(e,t,l,o,i){const{getSize:n}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return n(e,l,{scale:o,view:i,shape:\"simple-marker\"===t.type?t.style:null})}function J(e,t,l,o){\"univariate-color-size\"===l?.authoringInfo?.type&&\"above-and-below\"===l?.authoringInfo?.univariateTheme&&\"class-breaks\"===l.type&&(e=q(l,o));const i=e.clone();if(m(i))p(i)||i.symbolLayers.forEach((e=>{\"fill\"!==e.type&&(e.size=t)}));else if(V(i))i.size=t;else if(x(i)){const e=i.width,l=i.height;i.height=t,i.width=t*(e/l)}else M(i)?i.width=t:U(i)?i.font&&(i.font.size=t):\"cim\"===i.type&&y(l,\"reference-size\")?n(i,{innerDotSize:t,outerRingSize:g}):\"cim\"===i.type&&y(l,\"spike\")&&r(i,{defaultHeight:t,primitiveOverrides:null});return i}export{L as getRampStops,T as getReferenceSizeSymbol,w as realWorldMaxSize,S as realWorldMinSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import{formatDate as n}from\"../../../intl/date.js\";import{formatNumber as i}from\"../../../intl/number.js\";import{timelineDateFormatOptions as o}from\"../../../renderers/support/utils.js\";import e from\"../../../renderers/visualVariables/SizeVariable.js\";function r(t){return n(new Date(t),o)}function s(t){const n=2,o=Math.floor(Math.log10(Math.abs(t)))+1,e=o<4||o>6?4:o,r=1e6,s=Math.abs(t)>=r?\"compact\":\"standard\";return i(t,{notation:s,minimumSignificantDigits:n,maximumSignificantDigits:e})}function a(t,n,i){if(null==n||null==t)return[];const o=[];for(let e=-1*i;e<=i;e++)0!==e&&o.push(n+e*t);return o}function u(t){const{max:n,min:i,padding:o,pathHeight:e,pathWidth:r,stops:s}=t,a=n-i;let u,h=`M0 0 L${r} 0 `;const m=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],f=Math.min.apply(Math,m.map((t=>t.size))),l=Math.max(Math.abs(m[0].size-m[1].size),Math.abs(m[2].size-m[1].size));return m.reverse(),m.forEach((({size:t,value:n},s)=>{const m=Math.round((t-f)/l*100)/100,c=Math.round(e-(n-i)/a*e);u=m*r,0===u&&(u=o*r),0===s&&(h+=`L${u} 0 `),h+=`L${u} ${c} `})),h+=`L${u} ${e} L0 ${e} L0 0 Z`,h}function h(t){const{bottomValue:n,bottomWidth:i,max:o,min:e,pathHeight:r,pathWidth:s,topValue:a,topWidth:u}=t,h=u*s,m=i*s,f=o-e,l=Math.round(r-(n-e)/f*r);return`M${h} 0 L${h} ${Math.round(r-(a-e)/f*r)} L${m} ${l} L${m} ${r} L0 ${r} L0 0 Z`}function m(t){let n=t.maxSize,i=t.minSize;return n instanceof e&&(n=n.stops[0].size),i instanceof e&&(i=i.stops[0].size),[n,i]}function f(t,n,i){const o=i.length-1;if(o<0)return[];const e=i[0],r=i[o]-e,s=n-t,a=[];for(let u=1;u<o;u++){const n=(i[u]-e)/r*s+t;a.push({index:u,value:n})}return a.unshift({index:0,value:t}),a.push({index:o,value:n}),a}function l(n){return n instanceof t?n.toCss(!0):t.fromString(n??\"\").toCss(!0)}export{r as formatDateLabel,s as formatNumberLabel,a as getDeviationValues,u as getDynamicPathForSizeStops,l as getFillFromColor,h as getPathForSizeStops,m as getSizesFromVariable,f as getStopChanges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import\"../../../intl.js\";import{addTokenParameter as s}from\"../../../kernel.js\";import i from\"../../../request.js\";import l from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import n from\"../../../core/Collection.js\";import has from\"../../../core/has.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{clamp as u}from\"../../../core/mathUtils.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{on as d,watch as y,initial as h,whenOnce as m}from\"../../../core/reactiveUtils.js\";import{px2pt as p}from\"../../../core/screenUtils.js\";import{parseWhereClause as f}from\"../../../core/sql.js\";import{addQueryParameters as g}from\"../../../core/urlUtils.js\";import{property as b}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as S}from\"../../../core/accessorSupport/decorators/subclass.js\";import{OriginId as _}from\"../../../core/accessorSupport/PropertyOrigin.js\";import{EffectView as w}from\"../../../layers/effects/EffectView.js\";import{effectFunctionsFromJSON as v}from\"../../../layers/effects/jsonUtils.js\";import{getEffectiveDisplayFilter as L}from\"../../../layers/support/displayFilterUtils.js\";import{ExportImageParameters as E}from\"../../../layers/support/ExportImageParameters.js\";import{collectFields as C,collectArcadeFieldNames as I}from\"../../../layers/support/fieldUtils.js\";import{isFeatureLayer as F}from\"../../../layers/support/layerUtils.js\";import{getPixelValueRange as R}from\"../../../layers/support/rasterFormats/pixelRangeUtils.js\";import{fromJSON as V}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as D}from\"../../../renderers/support/rendererConversion.js\";import x from\"../../../renderers/visualVariables/SizeVariable.js\";import z from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{updateReferenceSizeSymbol as T}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import j from\"../../../symbols/SimpleFillSymbol.js\";import O from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as P}from\"../../../symbols/support/cimSymbolUtils.js\";import{SymbolSizeDefaults as M}from\"../../../symbols/support/previewUtils.js\";import{renderSymbol as k}from\"../../../symbols/support/renderUtils.js\";import{renderColorRampPreviewHTML as A,renderDotDensityPreviewHTML as U,renderPieChartPreviewHTML as B,renderPreviewHTML as N}from\"../../../symbols/support/symbolUtils.js\";import{isVolumetricSymbol as q}from\"../../../symbols/support/utils.js\";import{getEffectiveClusterSizeVariable as $}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as H,getRampStopsForPointCloud as W,getStretchRampStops as G,getRampStops as J}from\"./colorRampUtils.js\";import{getHeatmapRampStops as Q}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as Z,getRelationshipRampElement as K}from\"./relationshipRampUtils.js\";import{getRampStops as X,realWorldMaxSize as Y,realWorldMinSize as ee}from\"./sizeRampUtils.js\";import{specialCharsLessThan as te,specialCharsGreaterThan as se,getAuthoringInfoVisualVariableByTheme as ie,getSymbolForFlowRenderer as le,getMedianColor as re,rgbImgSource as ne,getDateFormatOptions as ae}from\"./utils.js\";import{formatNumberLabel as oe}from\"../../smartMapping/support/utils.js\";import{fetchMessageBundle as ue}from\"../../../intl/messages.js\";import{substitute as ce}from\"../../../intl/substitute.js\";const de=16,ye=\"https://utility.arcgis.com/sharing/tools/legend\",he=\"esri.layers.ImageryLayer\",me=\"esri.layers.ImageryTileLayer\",pe=\"esri.layers.WCSLayer\",fe=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,ge=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),be=new O({size:6,outline:{color:[128,128,128,.5],width:.5}}),Se=new j({style:\"solid\"});function _e(e){return\"flow\"===e.type}function we(e){return\"vector-field\"===e.type}function ve(e){return\"raster-colormap\"===e.type}function Le(e){return\"raster-stretch\"===e.type}function Ee(e){return\"raster-shaded-relief\"===e.type}function Ce(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function Ie(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function Fe(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function Re(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function Ve(e){return xe(e)||ze(e)||Te(e)||De(e)}function De(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function xe(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function ze(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function Te(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function je(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function Oe(e){return\"esri.renderers.PieChartRenderer\"===e.declaredClass}function Pe(e,t){return Ce(e)||Ie(e)||Fe(e)||Re(e)||je(e)||Oe(e)?\"2d\"===t.type||D(e):Le(e)||ve(e)||Ee(e)||xe(e)||ze(e)||Te(e)||we(e)||_e(e)}function Me(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function ke(e){return\"esri.layers.SubtypeGroupLayer\"===e.declaredClass}function Ae(e){return\"esri.layers.VoxelLayer\"===e.declaredClass}function Ue(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function Be(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function Ne(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function qe(e){return\"esri.layers.TileLayer\"===e.declaredClass}function $e(e){return e.declaredClass===he}function He(e){return e.declaredClass===me}function We(e){return e.declaredClass===pe}function Ge(e){return\"stretch-ramp\"===e.type}function Je(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type}function Qe(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type&&\"above-and-below\"===t?.univariateTheme}function Ze(e){return\"sublayers\"in e}function Ke(e){return e&&\"symbol\"in e}async function Xe(e,t){const s=await ue(\"esri/widgets/Legend/t9n/Legend\");return\"previewTemplateAriaLabel\"!==e||t||(e=\"previewAriaLabel\"),ce(s[e],{label:t})}function Ye(e,t){const{field:s,field2:i,field3:l,fieldDelimiter:r,valueExpression:n}=e;if(!s)return null;const a=!(!s&&!n||!i&&!l)?t?.toString().split(r||\"\"):[t],o=s?{[s]:a?.[0]}:null;return o&&(i&&(o[i]=a?.[1]),l&&(o[l]=a?.[2])),o}const et=new O({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let tt={},st=class extends l{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilterId=null,this._layerDisplayFilterClause=null,this.children=new n,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this.addHandles([d((()=>this.children),\"change\",(t=>{const{added:s,removed:i}=t;s.forEach((t=>{const s=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles(y((()=>t.ready),e,h),s)})),i.forEach((e=>this.removeHandles(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(tt={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(tt=null),this._layerDefinitionExpressionClause=null}get effectList(){const e=this.layer;let t=null;return\"effect\"in e&&e.effect&&(t=new w,t.effect=e.effect,t.endTransition(),t.scale=this.scale),t}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,s=this.layer.parent,i=s&&\"uid\"in s?this._getParentLayerOpacity(s):null;return null!=t?t*e:null!=i?i*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"effect\"in e&&e.effect&&Array.isArray(e.effect))return!0;if(\"featureReduction\"in e&&e.featureReduction){if(\"cluster\"===e.featureReduction.type)return!0;if(\"binning\"===e.featureReduction.type&&\"renderer\"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return\"renderer\"in e&&e.renderer?!!(\"displayFilterInfo\"in e&&e.displayFilterInfo&&Fe(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange(\"ready\");const t=Array.from(e,(e=>{if(F(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,s=t?.drawingInfo,i=s&&V(s.renderer),l=ge.read(t.geometryType);return i?this._getRendererLegendElements(i,{title:e.name,geometryType:l}):(o.getLogger(this).warn(\"drawingInfo not available!\"),null)}return null}));try{const e=[],s=await Promise.allSettled(t);for(const t of s)if(\"fulfilled\"===t.status)for(const s of t.value??[])e.push(s);this.legendElements=e,this.notifyChange(\"ready\")}catch(s){o.getLogger(this).warn(\"error while building legend for layer!\",s)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForFeatureReduction(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[],this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}}async buildLegendElementsForTools(){const e=this.layer;if(Ae(e))this._constructLegendElementsForVoxelLayer();else if(Be(e))this._constructLegendElementsForWMTSlayer();else if(Ue(e))await this._constructLegendElementsForWMSSublayers();else if(Me(e))await this._constructLegendElementsForBuildingSceneLayer();else if(Ne(e)||qe(e)||ke(e))await this._constructLegendElementsForSublayers();else{this.removeHandles(\"imageryLayers-watcher\");let t=\"default\";if($e(e)){const s=e;t=(s?.rasterFunction?.functionName||\"default\")+\"_\"+(e.bandIds?.length?e.bandIds.join(\"\"):\"###\")}if(He(e)||\"link-chart\"===e.type)return;await this._getLegendLayers(`${e.uid}-${t}`).then((async t=>{this.legendElements=[],this.notifyChange(\"ready\");const s=t.map((async t=>{if($e(e)){const t=y((()=>[e.rasterFunction,e.bandIds]),(()=>c((async()=>{tt.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this.addHandles(t,\"imageryLayers-watcher\")}const s=this._generateSymbolTableElementForLegendLayer(t);s?.infos.length&&($e(e)&&(s.title=e.title),this.legendElements.push(s)),this.notifyChange(\"ready\")}));await Promise.allSettled(s)})).catch((e=>{o.getLogger(this).warn(\"Request to server for legend has failed!\",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,s=t&&\"createQuery\"in t&&\"queryFeatureCount\"in t;if(!s&&!(t&&\"createQuery\"in e&&\"queryFeatureCount\"in e))return!0;await m((()=>!t.updating));const i=s?\"createQuery\"in t&&t.createQuery():\"createQuery\"in e&&e.createQuery();if(!i)return!0;i.geometry=this.view.extent;return 0!==(s?\"queryFeatureCount\"in t&&await t.queryFeatureCount(i):\"queryFeatureCount\"in e&&await e.queryFeatureCount(i))}_getParentLayerOpacity(e){let t=1;const s=e.parent;return s&&\"uid\"in s&&(t=this._getParentLayerOpacity(s)),e.opacity*t}_isGroupActive(){return this.children.some((e=>e.ready))}_isRendererScaleDriven(e){if(\"dot-density\"===e.type)return!0;const t=\"valueExpression\"in e?e.valueExpression:null;if(fe.test(t))return!0;const s=\"visualVariables\"in e?e.visualVariables:null;return!!s?.some((e=>this._isScaleDrivenSizeVariable(e)))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case\"simple\":return this._isScaleDrivenSymbol(e.symbol);case\"class-breaks\":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some((e=>this._isScaleDrivenSymbol(e.symbol)));case\"unique-value\":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some((e=>this._isScaleDrivenSymbol(e.symbol)))}return!1}_isScaleDrivenSymbol(e){if(\"cim\"===e?.type){const{primitiveOverrides:t,minScale:s,maxScale:i}=e.data,l=t?.some((e=>/\\$view\\.scale/.test(e.valueExpressionInfo?.expression||\"\")))??!1;return null!=s||null!=i||l}return!1}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,s=t.minSize,i=t.maxSize;return!(\"object\"!=typeof s||!s||!this._isScaleDrivenSizeVariable(s))||(!(\"object\"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||fe.test(t.valueExpression))}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&Ne(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const s of t.sourceJSON.layers??[])if(s.id===e.source.mapLayerId&&(s.minScale>0||s.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this.legendElements=[],this.removeHandles(\"voxel-style-watcher\"),this.removeHandles(\"voxel-current-variable\");const e=this.layer;this.addHandles(y((()=>e.currentVariableId),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-current-variable\"),this.addHandles(y((()=>e.getVariableStyles()),(()=>this._constructLegendElementsForVoxelLayer())),\"voxel-style-watcher\");const t=e.getVariableStyle(null),s=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new j({color:t.color,outline:null})})})),e.length&&s.push({type:\"symbol-table\",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:i}=t.transferFunction,l=e.toArray().reverse(),r=i.map(((e,t)=>`${0===t?te:se} ${oe(e)}`)).reverse(),n=l.map((e=>({color:e.color,value:null,label:null})));n[0].label=r[0],n[n.length-1].label=r[1],s.push({type:\"color-ramp\",title:t.label,infos:n,preview:A(l.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})})}await this._generatePreviewsForLegendElements(s,{opacity:e.opacity}),this.legendElements=s,this.notifyChange(\"ready\")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;this.addHandles(y((()=>{const{layer:e}=this;return e&&\"activeLayer\"in e&&e.activeLayer}),(()=>this._constructLegendElementsForWMTSlayer())),\"wmts-activeLayer-watcher\");const t=e.styleId?e.styles?.find((({id:t})=>t===e.styleId))?.legendUrl:void 0;t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this.removeHandles(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(y((()=>{const{layer:e}=this;return e&&\"sublayers\"in e&&e.sublayers}),(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const s=this.layer,i=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForWMSSublayers())),\"wms-sublayers-watcher\");const l=this.sublayerIds?.map((e=>s.findSublayerById(e)))?.filter(r)??[],n=l.length?l:e.toArray();for(const r of n){const e=y((()=>[r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForWMSSublayers()));if(this.addHandles(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e?.infos.length&&i.unshift(e)}}return i}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const s=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let s=e.legendUrl;if(!s)return;const l={type:\"symbol-table\",title:e.title||e.name||String(e.id??\"\"),infos:[]};t&&(s=g(s,t));let r=null;const n=e.layer?.opacity;try{r=(await i(s,{responseType:\"image\"})).data,r&&(r.style.opacity=n)}catch{}return l.infos.push({src:s,preview:r,opacity:n}),l}_getLegendLayers(e,t){const s=tt&&tt[e];return s?Promise.resolve(s):this._legendRequest(t).then((t=>{const s=t.layers;return tt[e]=s,s}))}_legendRequest(e){const t=this.layer;let s={f:\"json\",dynamicLayers:e};if($e(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(s.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(s.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:i,customParameters:l}=t;s={raster:e,viewId:i,...s,...l}}}let l=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&+t.version>=10.01){const e=l.indexOf(\"?\");e>-1?l=l.slice(0,e)+\"/legend\"+l.slice(e):l+=\"/legend\"}else{const e=l.toLowerCase().indexOf(\"/rest/\"),t=-1===e?l:l.slice(0,e)+l.slice(e+5);l=ye+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return i(l,{query:s}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;this.addHandles(y((()=>e.sublayers),(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let s=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForBuildingSceneLayer())),\"sublayers-watcher\");const i=e.toArray();for(const l of i){const e=y((()=>[\"renderer\"in l&&l.renderer,l.opacity,l.title,l.visible]),(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||l.visible){const e=null!=l?.opacity?l.opacity:null,i=null!=e?e*t:t;if(\"building-group\"===l.type){const e={type:\"symbol-table\",title:l.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(l.sublayers,i);e.infos.push(...t),s=[e,...s]}else if(l.renderer){s=[...await this._getRendererLegendElements(l.renderer,{title:l.title,opacity:i,sublayer:l}),...s]}}}return s.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;if(Ne(e)||qe(e)||ke(e)){this.addHandles(y((()=>e.sublayers),(()=>this._constructLegendElementsForSublayers)),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange(\"ready\")}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}}}async _generateLegendElementsForSublayers(e,t,s){const i=this.layer;let l=[];this.addHandles(e.on(\"change\",(()=>this._constructLegendElementsForSublayers())),\"sublayers-watcher\");let n=e.toArray();!s&&this.sublayerIds&&this.sublayerIds.length&&(n=ke(i)?this.sublayerIds.map((e=>i.findSublayerForSubtypeCode(e))).filter(r):this.sublayerIds.map((e=>i.findSublayerById(e))).filter(r));for(const r of n){const e=y((()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled]),(()=>this._constructLegendElementsForSublayers()));if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r)){const e=null!=r?.opacity?r.opacity:null,i=null!=e?e*t:t,n=!Ze(r)||r.originIdOf(\"renderer\")>_.SERVICE&&!r.sublayers;if(r.renderer&&n){await r.load();l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:i,sublayer:r}),...l]}else if(Ze(r)){const e=await this._generateSymbolTableElementForSublayer(r,i,s);e&&l.unshift(e)}}}return l.filter((e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,s){if(!s){s=new Map;const t=this.layer,i=e.source;let l=null;if(!(!i||\"map-layer\"===i.type&&i.mapLayerId===e.id&&(!i.gdbVersion||i.gdbVersion===(\"gdbVersion\"in t&&t.gdbVersion)))||e.originIdOf(\"renderer\")>_.SERVICE||e.originIdOf(\"labelingInfo\")>_.SERVICE||e.originIdOf(\"labelsVisible\")>_.SERVICE){const e=new E({layer:this.layer});l=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const r=l||`${t.uid}-default`;(await this._getLegendLayers(r,l)).forEach((e=>s.set(e.layerId,e)))}const i=s.get(e.id);if((!i||i?.subLayerIds&&i.defaultVisibility)&&e.sublayers){const i=await this._generateLegendElementsForSublayers(e.sublayers,t,s);return{type:\"symbol-table\",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendLayer(i,e,t)}_generateSymbolTableElementForLegendLayer(e,t,s){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const i=t?.renderer;let l=t?.title||e.layerName;if(i&&(!t||t?.originIdOf(\"renderer\")>_.SERVICE)){const e=t?.title||this._getRendererTitle(i,t);e&&(l&&\"string\"!=typeof e&&\"title\"in e&&(e.title=l),l=e)}const r={type:\"symbol-table\",title:l,legendType:e.legendType||null,infos:[]},n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach((t=>{const i={type:\"symbol-table\",title:t.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(n.filter((e=>e.groupId===t.id)),e.layerId,s)};i.infos?.length>0&&r.infos.push(i)})):r.infos=this._generateSymbolTableElementInfosForLegendLayer(n,e.layerId,s),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,i){return e.map((e=>{let l=e.url;if(e.imageData&&e.imageData.length>0)l=`data:image/png;base64,${e.imageData}`;else{if(0===l.indexOf(\"http\"))return null;l=s(`${this.layer.url}/${t}/images/${l}`)}return{label:e.label,src:l,opacity:i??this.opacity,width:e.width,height:e.height}})).filter(r)}_isSublayerInScale(e){const t=e.minScale||0,s=e.maxScale||0;return!(t>0&&t<this.scale||s>this.scale)}_isLegendLayerInScale(e,t){const s=t||this.layer;let i=null,l=null,r=!0;return!s.minScale&&0!==s.minScale||!s.maxScale&&0!==s.maxScale?(0===e.minScale&&s.tileInfo&&(i=s.tileInfo.lods[0].scale),0===e.maxScale&&s.tileInfo&&(l=s.tileInfo.lods[s.tileInfo.lods.length-1].scale)):(i=Math.min(s.minScale,e.minScale)||s.minScale||e.minScale,l=Math.max(s.maxScale,e.maxScale)),(i>0&&i<this.scale||l>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const s=t.renderer,i=e.some((e=>e.values));let l=0,r=null;return i&&e.some(((e,t)=>(e.values||(l=t,r=e,r.label||(r.label=\"others\")),null!=r))),s?\"unique-value\"===s.type?r&&(e.splice(l,1),e.push(r)):\"class-breaks\"===s.type&&(r&&e.splice(l,1),s.legendOptions?.order||e.reverse(),r&&e.push(r)):r&&(e.splice(l,1),e.push(r)),e}async _getRendererLegendElements(e,t={}){if(!Pe(e,this.view))return o.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Ve(e))return this._constructPointCloudRendererLegendElements(e,t);if(je(e))return this._constructDotDensityRendererLegendElements(e);const s=await this._loadRenderer(e);return Oe(s)?this._constructPieChartRendererLegendElements(s):this._constructRendererLegendElements(s,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return\"binning\"===e.type?t=e.renderer:\"cluster\"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??\"\"}async _constructPointCloudRendererLegendElements(e,t={}){const s=t.title,i=[];let l=null,r=null;if(xe(e))l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{l.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(be,e.color)})}));else if(ze(e)){const t=e.stops;let i=null;if(t?.length&&(1===t.length&&(i=t[0].color),!i)){const e=t[0].value,s=t[t.length-1].value;if(null!=e&&null!=s){i=H(e+(s-e)/2,t)}}l={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(be,i||be.color)}]};const n=W(e.stops??[])??[];r={type:\"color-ramp\",title:s||this._getPointCloudRendererTitle(e),infos:n,preview:A(n.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})}}else Te(e)&&(l={type:\"symbol-table\",title:s||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach((e=>{l.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(be,e.color)})})));return l?.infos.length&&i.push(l),r?.infos.length&&i.push(r),await this._generatePreviewsForLegendElements(i,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!e.colorModulation}}),i}async _getElementInfoForDotDensity(e,t){const{color:s,label:i,valueExpressionTitle:l}=t,{backgroundColor:r,outline:n,dotSize:a}=e,o=this.effectList,u=o?.effects.map((e=>e.toJSON())),c=v(u),d=await Xe(\"previewTemplateAriaLabel\",i||l),y=a+\"-\"+s+\"-\"+r+\"-\"+(n&&JSON.stringify(n.toJSON()))+\"-\"+c,h=this._dotDensityUrlCache,m=h.has(y)?h.get(y):U(e,s,{ariaLabel:d});h.set(y,m);const p={shape:{type:\"image\",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]},f=k([[p]],[m.width,m.height],{effectView:this.effectList,ariaLabel:d});return{opacity:1,src:m.src,preview:f,width:m.width,height:m.height}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),s=e.legendOptions?.unit,i={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:s||\"\"},infos:[]};for(const l of e.attributes){const t=await this._getElementInfoForDotDensity(e,l);t.label=l.label||l.valueExpressionTitle||l.field,i.infos.push(t)}return[i]}async _constructPieChartRendererLegendElements(e){const t=[];let s=null;const i=e.outline;e.attributes.forEach((e=>{const s=new O({color:e.color,outline:i}),l=e.label||e.valueExpressionTitle||e.field;t.push({label:l,symbol:s})}));const l=t.length?[...t]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const l=new O({color:e.othersCategory.color,outline:i});s=e.othersCategory.label||\"Other\",t.push({label:s,symbol:l})}if(e.defaultColor?.a){const s=new O({color:e.defaultColor,outline:i});t.push({label:e.defaultLabel,symbol:s})}const r=await this._getVisualVariableLegendElements(e,this.layer)||[];if(t.length){r.unshift({type:\"symbol-table\",title:null,infos:t});const n=l.filter((e=>e.label!==s)).map((e=>e.symbol.color)).filter(Boolean),a=B(n,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,effectList:this.effectList,outline:i,ariaLabel:await Xe(\"previewPieChartAriaLabel\")});r.unshift({type:\"pie-chart-ramp\",title:this._getRendererTitle(e,this.layer),infos:t,preview:a})}return await this._generatePreviewsForLegendElements(r,{opacity:this.layer.opacity,effectView:this.effectList}),r}async _getWhereClause(e,t,s){const i=await f(e,s),l=new Set,{field:r,field2:n,field3:a}=t;C(l,s,[r,n,a]),I(l,s,t.valueExpression);const o=new Set(Array.from(l,(e=>e.toLowerCase()))),u=i?.fieldNames.map((e=>e.toLowerCase()));return u?.some((e=>!o.has(e)))?null:i}async _processDefinitionExpression(e,t){if(!(\"definitionExpression\"in e))return;const s=e.definitionExpression;s&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==s&&(this._layerDefinitionExpressionClause=await this._getWhereClause(s,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=s}async _processDisplayFilter(e,t){if(!(\"displayFilterInfo\"in e))return;const s=e.displayFilterInfo?L(e.displayFilterInfo,this.view):null;return s?.where?this._layerDisplayFilterId!==s?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(s.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilterId=s?.id,s}async _constructRendererLegendElements(e,t={}){const{title:s,sublayer:i}=t,l=i||this.layer,r=ie(e,\"reference-size\"),n=ie(e,\"spike\");let a=null;Fe(e)&&(await this._processDefinitionExpression(l,e),a=await this._processDisplayFilter(l,e)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const o=await this._getVisualVariableLegendElements(e,l)||[],u={type:\"symbol-table\",title:s||this._getRendererTitle(e,l),infos:[]};let c=null,d=!1;const y=new Set;if(_e(e)&&!this._hasSizeRamp){const t=await le(e);u.infos.push({label:null,symbol:t})}else if(Je(e)){let t=s;const i=Qe(e)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",l=o.findIndex((e=>\"color-ramp\"===e.type)),r=-1!==l?o.splice(l,1)[0]:null,n=o.findIndex((e=>\"size-ramp\"===e.type)),a=-1!==n?o.splice(n,1)[0]:null,u=[];r&&(t=r.title,u.push(r)),a&&(t=a.title,u.push(a)),u.length>0&&o.push({type:i,title:t,infos:u})}else if(Re(e)){const t=Q(e);o.push({type:\"heatmap-ramp\",title:s||this._getRendererTitle(e,l),infos:t,preview:A(t.map((e=>e.color)),{effectList:this.effectList,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})})}else if(Fe(e)){const t=e.authoringInfo;if(t&&\"relationship\"===t.type){const{numClasses:s,field1:i,field2:r}=t,n=t.focus;if(s&&i&&r){const t=[i,r];let a=Z(n)||0;for(const e of t){const{field:t,normalizationField:s,label:i}=e,r=i||{field:this._getFieldAlias(t,l),normField:s&&this._getFieldAlias(s,l)},n=et.clone();n.angle=a,u.infos.push({label:r,symbol:n}),y.add(n),a+=90}const c=K({focus:n,numClasses:s,infos:e.uniqueValueInfos??[]});o.unshift(c)}}else if($e(this.layer)||He(this.layer))e.uniqueValueInfos?.forEach((t=>{t.symbol&&this._checkClausesForUVR(e,t.value)&&u.infos.push({label:t.label||t.value,value:t.value,symbol:t.symbol})}));else{const{field:t,field2:i,field3:n,fieldDelimiter:o,valueExpression:c,defaultSymbol:y}=e,h=!(!t&&!c||!i&&!n),m=this._layerDisplayFilterClause?a?.title:null,p=[];if(e.uniqueValueGroups?.forEach((s=>{const a={type:\"symbol-table\",title:m||s.heading,infos:[]};s.classes?.forEach((s=>{const{symbol:u,values:d}=s;if(u){const y=[],m=[];for(const e of d??[]){const{value:s,value2:r,value3:a}=e,u=[],d=[];(t||c)&&(u.push(s),d.push(this._getDomainName(t,s,l))),i&&(u.push(r),d.push(this._getDomainName(i,r,l))),n&&(u.push(a),d.push(this._getDomainName(n,a,l))),y.push(h?u.join(o||\"\"):u[0]),m.push(d.join(\" - \"))}const p=y.join(\", \");let f=s.label;if(!f){const e=m.filter(Boolean);f=e.length?e.join(\", \"):p}const g=u.clone();\"cim\"===g.type&&r&&T(g,{innerDotSize:.5*de,outerRingSize:de}),y.some((t=>this._checkClausesForUVR(e,t)))&&a.infos.push({label:f,value:p,symbol:g})}})),a.infos.length&&p.push(a)})),p.length){const t=p[0];if(1===p.length&&\"title\"in t&&!t.title){const e=t.infos?.filter(Ke)??[];u.infos.push(...e)}else y&&(p.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:y}]}),d=!0),u.infos.push(...p);s||e.legendOptions?.title||e.valueExpressionTitle||(u.title=null)}}e.defaultSymbol&&!d&&(u.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),d=!0)}else if(Ie(e)){if(!r&&!n){c=this._isUnclassedRenderer(e);if(!c||!this._hasSizeRamp){const t=e.classBreakInfos.filter((({symbol:e})=>e)),s=\"ascending-values\"===e.legendOptions?.order;for(const{label:e,minValue:i,maxValue:l,symbol:r}of t){const t={label:e||(c?null:`${i} - ${l}`),value:[i,l],symbol:r};s?u.infos.push(t):u.infos.unshift(t)}c&&(u.title=null),this._updateInfosForClassedSizeRenderer(e,u.infos)}e.defaultSymbol&&!c&&(u.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),d=!0)}}else if(Le(e))if(He(this.layer)||We(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);Ge(t)?o.push(t):u.infos=t}else{const t=this.layer;let s,i;e.customStatistics?.length&&({min:s,max:i}=e.customStatistics[0]);let l=[],r=t.serviceRasterInfo;if(t.rasterFunction)try{r=await t.generateRasterInfo(t.rasterFunction)}catch{}const n=R(r.pixelType);if(1===r.bandCount){const l=t.bandIds?.[0]||0;s=null!=s?s:r.statistics?r.statistics[l].min:n[0],i=null!=i?i:r.statistics?r.statistics[l].max:n[1],s||i?o.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)s=null!=s?s:r.statistics?r.statistics[t.bandIds[0]].min:n[0],i=null!=i?i:r.statistics?r.statistics[t.bandIds[0]].max:n[1],s||i?o.push(await this._getStretchLegendElements(e,{min:s,max:i})):this._getServerSideLegend();else if(r.bandCount>=3){const{bandInfos:e}=r,{bandIds:s}=t;e.length>=r.bandCount?3===s?.length?(l=s.map((t=>e[t].name)),u.infos=this._createSymbolTableElementMultiBand(l)):\"lerc\"===t.format?(l=[0,1,2].map((t=>e[t].name)),u.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():\"lerc\"===t.format?(l=[\"band1\",\"band2\",\"band3\"],u.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(ve(e))e.colormapInfos.forEach((e=>{u.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(Se,e.color)})}));else if(Ce(e)){let s=e.symbol;switch(t.geometryType){case\"point\":s=\"pointSymbol\"in l?l.pointSymbol:null;break;case\"polyline\":s=\"lineSymbol\"in l?l.lineSymbol:null;break;case\"polygon\":s=\"polygonSymbol\"in l?l.polygonSymbol:null}const i=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&i&&u.infos.push({label:e.label,symbol:s})}else if(we(e)){e.outputUnit&&(this.title=\"(\"+e.toJSON().outputUnit+\")\"),u.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach((e=>{u.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})})):u.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Ee(e)&&o.push(await this._getStretchLegendElements(e,{min:0,max:255}));const h=e.defaultSymbol;!h||d||Ce(e)||c&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:h}]}),u.infos.length&&o.unshift(u);const m=null==t.opacity?this.opacity:t.opacity,p=this._isTallSymbol(\"visualVariables\"in e?e.visualVariables:null),f=$e(this.layer)||He(this.layer);return await this._generatePreviewsForLegendElements(o,{opacity:m,symbolConfig:{isTall:p,isSquareFill:f},effectView:this.effectList},{defaultSymbol:h,arrowMarkerSymbols:y}),e=null,o}_checkClausesForUVR(e,t){const s=Ye(e,t);return!s||(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(s))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(s))}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,s=t.symbolizer.rasterInfo??t.raster.rasterInfo;let i,l;const r=e?.customStatistics?.length?e.customStatistics:s?.statistics;if(r)({min:i,max:l}=r[0]);else{const e=R(s.pixelType);i=e[0],l=e[1]}if(t.hasStandardTime()&&(i=t.getStandardTimeValue(i),l=t.getStandardTimeValue(l)),1===s.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:i,max:l});const n=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(s.bandCount,3)).keys())).map((e=>s.bandInfos[e].name));return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),this._createSymbolTableElementMultiBand(n)}async _getStretchLegendElements(e,t){const s=e.colorRamp,i=G(s,t);return{type:\"stretch-ramp\",title:\"\",infos:i,preview:A(i.map((e=>e.color)),{ariaLabel:await Xe(\"previewColorRampAriaLabel\")})}}_getClusterSymbol(){const e=this.layer,t=\"featureReduction\"in e&&e.featureReduction,s=t&&\"symbol\"in t&&t.renderer;return s&&!0!==s?.authoringInfo?.isAutoGenerated?null:t&&\"symbol\"in t?t.symbol:null}async _getSizeLegendElement(e,t,s,i){return{type:\"size-ramp\",title:this._hasClusterSizeVariable?this._getClusterTitle(t):e,infos:await X(s,t,await re(s),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],s=[\"red\",\"green\",\"blue\"];return e.forEach(((e,i)=>{t.push({label:{colorName:s[i],bandName:e},src:ne[i],opacity:this.opacity??1})})),t}_updateInfosForClassedSizeRenderer(e,t){const s=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,i=e.classBreakInfos.some((e=>q(e.symbol)));if(s&&i){const s=Y,i=ee,l=e.classBreakInfos.length,r=(s-i)/(l>1?l-1:l);t.forEach(((e,t)=>{e.size=s-r*t}))}}_isTallSymbol(e){let t=!1,s=!1;if(e)for(let i=0;i<e.length&&(!t||!s);i++){const l=e[i];\"size\"===l.type&&(\"height\"===l.axis&&(t=!0),\"width-and-depth\"===l.axis&&(s=!0))}return t&&s}async _generatePreviewsForLegendElements(e,t,s){const i=[];for(const l of e)for(const e of l.infos??[])if(\"infos\"in e&&e.infos&&i.push(this._generatePreviewsForLegendElements([e],t,s)),Ke(e)&&e.symbol&&!e.preview){let r=!0;if(\"cim\"===e.symbol.type){const{minScale:t,maxScale:s}=e.symbol.data;(t&&t<this.scale||s&&s>this.scale)&&(r=!1)}r&&i.push(this._generateSymbolPreviewForInfo(e,{...t,clipBloomEffect:\"theme\"in l&&\"spike\"===l.theme,effectView:s?.arrowMarkerSymbols?.has(e.symbol)?null:t.effectView},s?{isDefault:e.symbol===s.defaultSymbol,applyScaleDrivenSize:!s.arrowMarkerSymbols?.has(e.symbol)}:void 0))}await Promise.all(i)}async _generateSymbolPreviewForInfo(e,t,s){try{let i=!s?.isDefault&&null==e.size&&this._hasSizeRamp?p(M.size):e.size;if(this._scaleDrivenSizeVariable&&s?.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");i=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}const l=\"cim\"===e.symbol.type?{style:\"legend\",cimOptions:{allowScalingUp:!s?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!s?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:\"2d\"===this.view?.type?\"map\":this.view?.viewingMode,scale:this.view?.scale}:null}}:{},r=e.label&&\"string\"!=typeof e.label?null:await Xe(\"previewTemplateAriaLabel\",e.label);e.preview=await N(e.symbol,{size:i,scale:!1,ariaLabel:r,...t,...l})}catch{e.preview=null,o.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${e.symbol?.type}`)}}_getClusterRenderer(e){this._hasClusterSizeVariable=!1;const t=\"renderer\"in this.layer?this.layer.renderer:null,s=e.renderer?.clone()||t?.clone(),i=$(e,this.layerView,this.view);if(i&&null!=s&&\"visualVariables\"in s){const t=s.visualVariables?.some((e=>\"size\"===e.type&&\"outline\"!==e.target&&!fe.test(e.valueExpression)));if(!t){if(\"clusterMinSize\"in e&&\"clusterMaxSize\"in e){const{clusterMinSize:t,clusterMaxSize:s}=e;i.legendOptions=new z({showLegend:t!==s})}const t=s.visualVariables||[];s.visualVariables=t.concat([i]),this._hasClusterSizeVariable=!0}}return s}async _loadRenderer(e){const t=[],s=e.clone(),i=await re(s);if(Ie(s)||Fe(s)){const e=(s.classBreakInfos||s.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,i).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(s.symbol||s.defaultSymbol,s.defaultSymbol?null:i).then((e=>{this._applySymbolToRenderer(s,e,Ce(s))})).catch((()=>{this._applySymbolToRenderer(s,null,Ce(s))}))),await Promise.allSettled(t),s}_applySymbolToRenderer(e,t,s){s?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(\"web-style\"===e.type){const s=this._webStyleSymbolCache;try{const i=await e.fetchSymbol({cache:s});return this._getAppliedCloneSymbol(i,t)}catch{throw o.getLogger(this).warn(\"Fetching web-style failed!\"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,s){if(!e||!s)return e;const i=e.clone(),l=s&&s.toRgba();return i.type.includes(\"3d\")?this._applyColorTo3dSymbol(i,l):\"cim\"===i.type?P(i,s):i.color&&(i.color=new t(l||i.color)),i}_applyColorTo3dSymbol(e,s){s&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new t(s))}))}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||\"vector-field\"===e.type)return null;const s=e.visualVariables??[],i=[],l=[],n=[],a=ie(e,\"reference-size\")??ie(e,\"spike\");let o;if(2===a?.sizeStops?.length&&(Ie(e)||Fe(e))){const[e,t]=a.sizeStops;o=new x({field:a.field??void 0,normalizationField:a.normalizationField,minSize:u(e.size,10,100),maxSize:u(t.size,50,150),minDataValue:e.value,maxDataValue:t.value}),l.push(o)}for(const r of s)\"color\"===r.type?i.push(r):\"size\"===r.type?l.push(r):\"opacity\"===r.type&&n.push(r);const c=[...i,...l,...n];let d,y;if(0===i.length&&Ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];d=t&&t.symbol}if(0===i.length&&Ce(e)&&(d=e.symbol),d)if(d.type.includes(\"3d\")){const e=d.symbolLayers.at(0);\"water\"===e.type?null!=e.color&&(y=e.color):null!=e.material?.color&&(y=e.material.color)}else d.url||(y=d.color);const h=this.effectList;return(await Promise.all(c.map((async s=>{if(!s.legendOptions||!1!==s.legendOptions.showLegend){const i=_e(e)?s.field:this._getRampTitle(s,t);let l=null;const r=ae(t,s,this.view.timeZone);if(\"color\"===s.type){const e=await J(s,null,r)??[];l={type:\"color-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:h,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if(\"size\"===s.type&&\"outline\"!==s.target)fe.test(s.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=s):(l=await this._getSizeLegendElement(i,s,e,r),o===s&&\"spike\"===a?.theme&&(l.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(null==l.infos||!l.infos.length)));else if(\"opacity\"===s.type){const e=await J(s,y,r)??[];l={type:\"opacity-ramp\",title:i,infos:e,preview:A(e.map((e=>e.color)),{effectList:h,ariaLabel:await Xe(\"previewColorRampAriaLabel\")})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return l?.infos?l:null}})))).filter(r)}_getDomainName(e,t,s){if(e&&\"function\"!=typeof e){const i=\"getField\"in s&&s.getField?.(e),l=i&&\"getFieldDomain\"in s&&s.getFieldDomain?s.getFieldDomain(i.name,{excludeImpliedDomains:has(\"esri-widget-legacy-field-domain-calculation\")}):null;return\"coded-value\"===l?.type?l.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,s=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,i=\"popupTemplate\"in e&&e.popupTemplate,l=i&&i.fieldInfos;if(l)for(const t of l)if(t.fieldName===s)return\"cluster_count\"===s?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let s=e.field,i=e.normalizationField,l=!1,r=!1,n=!1,a=null;s=\"function\"==typeof s?null:s,i=\"function\"==typeof i?null:i;const o=e.legendOptions?.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const s=e[t];if(\"color\"===s.type){if(\"ratio\"===s.style){l=!0;break}if(\"percent\"===s.style){r=!0;break}if(\"percent-of-total\"===s.style){n=!0;break}}}}a={field:s&&this._getFieldAlias(s,t),normField:i&&this._getFieldAlias(i,t),ratio:l,ratioPercent:r,ratioPercentTotal:n}}return a}_getRendererTitle(e,t){const s=e;if(s.legendOptions?.title)return s.legendOptions.title;if(s.valueExpressionTitle)return s.valueExpressionTitle;let i=s.field,l=null,r=null;if(Ie(s)&&(l=s.normalizationField,r=\"percent-of-total\"===s.normalizationType),i=\"function\"==typeof i?null:i,l=\"function\"==typeof l?null:l,Fe(s)){const{field2:e,field3:l,fieldDelimiter:r}=s;let n=i&&this._getFieldAlias(i,t);return e&&(n=`<${n}>${r}<${this._getFieldAlias(e,t)}>`,l&&(n=`${n}${r}<${this._getFieldAlias(l,t)}>`)),n}let n=null;return(i||l)&&(n={field:i&&this._getFieldAlias(i,t),normField:l&&this._getFieldAlias(l,t),normByPct:r}),n}_getFieldAlias(e,t){const s=\"popupTemplate\"in t?t.popupTemplate:null,i=s?.fieldInfos;let l=i?.find((t=>e===t.fieldName)),r=null;\"getField\"in t&&t.getField?r=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(r=t.fieldsIndex.get(e));let n=null;const a=\"featureReduction\"in t&&t.featureReduction;a&&(l??=\"popupTemplate\"in a?a.popupTemplate?.fieldInfos?.find((t=>e?.toLowerCase()===t.fieldName?.toLowerCase())):void 0,\"fields\"in a&&a.fields&&(n=a.fields.find((t=>t.name?.toLowerCase()===e?.toLowerCase()))));const o=l||r||n;let u=null;return o&&(u=l?.label||r?.alias||n?.alias||\"name\"in o&&o.name||\"fieldName\"in o&&o.fieldName||null),u}_isUnclassedRenderer(e){const t=e.visualVariables;let s=!1;return Ie(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(s=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),s}};e([b()],st.prototype,\"children\",void 0),e([b({readOnly:!0})],st.prototype,\"effectList\",null),e([b()],st.prototype,\"layerView\",void 0),e([b()],st.prototype,\"layer\",void 0),e([b()],st.prototype,\"legendElements\",void 0),e([b({readOnly:!0})],st.prototype,\"opacity\",null),e([b()],st.prototype,\"parent\",void 0),e([b({readOnly:!0,dependsOn:[]})],st.prototype,\"ready\",null),e([b()],st.prototype,\"hideLayersNotInCurrentView\",void 0),e([b()],st.prototype,\"keepCacheOnDestroy\",void 0),e([b()],st.prototype,\"respectLayerDefinitionExpression\",void 0),e([b()],st.prototype,\"respectLayerVisibility\",void 0),e([b({readOnly:!0})],st.prototype,\"scale\",null),e([b()],st.prototype,\"sublayerIds\",void 0),e([b({readOnly:!0})],st.prototype,\"isScaleDriven\",null),e([b()],st.prototype,\"title\",void 0),e([b({readOnly:!0,dependsOn:[\"ready\"],value:0})],st.prototype,\"version\",null),e([b()],st.prototype,\"view\",void 0),st=e([S(\"esri.widgets.Legend.support.ActiveLayerInfo\")],st);export{st as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{watch as t,initial as s,when as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{get as l}from\"../../core/accessorSupport/get.js\";import{getEffectiveFeatureReduction as y}from\"../../views/2d/layers/features/layerAdapters/featureReductionUtils.js\";import d from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as h}from\"../../intl/locale.js\";const c={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},L=r.ofType(d),p=new Set([\"esri.layers.BuildingSceneLayer\",\"esri.layers.CatalogLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.OrientedImageryLayer\",\"esri.layers.ParquetLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.SubtypeGroupLayer\",\"esri.layers.TileLayer\",\"esri.layers.VoxelLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\",\"esri.layers.LinkChartLayer\",\"esri.layers.catalog.CatalogFootprintLayer\",\"esri.layers.catalog.CatalogDynamicGroupLayer\",\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\",\"esri.layers.KnowledgeGraphLayer\"]),u=\"view.basemapView.baseLayerViews\",f=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",_=[u,f,\"view.layerViews\",v];let w=class extends i{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this.activeLayerInfos=new L,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(t((()=>this.view),(()=>this._viewHandles()),s),c.view),this.addHandles(h((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?\"ready\":\"disabled\"}_viewHandles(){this.removeHandles(c.state),this.view&&this.addHandles(t((()=>this.state),(()=>this._stateHandles()),s),c.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([c.allLayerViews,c.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i?.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on(\"change\",(e=>this._allLayerViewsChangeHandle(e))),c.allLayerViews),this.addHandles(t((()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible]),(()=>this._propertiesChangeHandle())),c.legendProperties)}_allLayerViewsChangeHandle(e){e.moved.length?this._propertiesChangeHandle():(e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh())}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach((i=>{if(!i.parent){const t=i.layer.parent,s=t&&\"uid\"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&e.includes(a)&&(r.push(i),i.parent=a,a.children.add(i),this._sortActiveLayerInfos(a.children))}})),e.removeMany(r);const t={};i.allLayerViews.forEach(((e,i)=>t[e.layer.uid]=i)),e.sort(((e,i)=>{const r=t[e.layer.uid]||0;return(t[i.layer.uid]||0)-r}))}_generateLayerViews(){const e=[];return _.filter(this._filterLayerViews,this).map((e=>l(this,e))).filter((e=>null!=e)).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===u||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!p.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(t((()=>[e.legendEnabled,e.layer?.legendEnabled]),(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}_buildActiveLayerInfo(e){const i=e.layer,r=e.uid,n=this._layerInfosByLayerViewId[r];let o=this._activeLayerInfosByLayerViewId[r];if(!o){const t=void 0!==n?.title&&n.layer.uid===i.uid;o=new d({layer:i,layerView:e,title:t?n.title:i.title,view:this.view??void 0,respectLayerDefinitionExpression:this.respectLayerDefinitionExpression,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:n?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=o}const l=i.parent&&\"uid\"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;if(o.parent=this._activeLayerInfosByLayerViewId[l?.uid],!this.hasHandles(r)){const n=[t((()=>i.title),(e=>this._titleHandle(e,o))),t((()=>[i.opacity,\"renderer\"in i&&i.renderer,\"pointSymbol\"in i&&i.pointSymbol,\"lineSymbol\"in i&&i.lineSymbol,\"polygonSymbol\"in i&&i.polygonSymbol]),(()=>this._constructLegendElements(o))),a((()=>!0===this.view?.stationary),(()=>this._scaleHandle(o)),s),t((()=>e.layer?y(e.layer,e.view):null),(()=>this._constructLegendElements(o))),t((()=>e.updating),(()=>{if(null==e.layer)return;null!=y(e.layer,e.view)&&this._constructLegendElements(o)})),t((()=>\"effect\"in i&&i.effect),(()=>this._constructLegendElements(o))),a((()=>this.view?.timeZone),(()=>this._constructLegendElements(o)),s)];if(this.respectLayerVisibility){const r=t((()=>e.legendEnabled),(e=>this._legendEnabledHandle(e,o))),s=t((()=>i.legendEnabled),(e=>this._legendEnabledHandle(e,o)));n.push(r,s)}if(this.respectLayerDefinitionExpression&&\"definitionExpression\"in i){const e=t((()=>[i.definitionExpression,this.respectLayerDefinitionExpression]),(()=>{o.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,this._constructLegendElements(o)}));n.push(e)}this.addHandles(n,r)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const i=e.parent;if(i)i.children.includes(e)||i.children.push(e),this._sortActiveLayerInfos(i.children);else{const i=this.layerInfos?.some((e=>e.layer.uid===r.uid)),t=r.parent;(t&&\"uid\"in t?this._layerViewByLayerId[t.uid]:null)&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&\"uid\"in r?this._layerViewByLayerId[r?.uid]:null,s=this._activeLayerInfosByLayerViewId[t?.uid];s&&(e.push(i),i.parent=s)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;\"featureCollections\"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):\"featureReduction\"in i&&i.featureReduction&&\"renderer\"in i.featureReduction&&(\"binning\"===i.featureReduction.type||\"cluster\"===i.featureReduction.type)&&(!this.view||i.featureReduction.maxScale<=this.view.scale)?e.buildLegendElementsForFeatureReduction(i.featureReduction):\"renderer\"in i&&i.renderer&&!(\"sublayers\"in i)?e.buildLegendElementsForRenderer(i.renderer):\"url\"in i&&i.url&&\"catalog\"!==i.type&&\"knowledge-graph\"!==i.type?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};e([n({type:L})],w.prototype,\"activeLayerInfos\",void 0),e([n()],w.prototype,\"basemapLegendVisible\",void 0),e([n()],w.prototype,\"groundLegendVisible\",void 0),e([n()],w.prototype,\"hideLayersNotInCurrentView\",void 0),e([n()],w.prototype,\"keepCacheOnDestroy\",void 0),e([n()],w.prototype,\"respectLayerDefinitionExpression\",void 0),e([n()],w.prototype,\"respectLayerVisibility\",void 0),e([n()],w.prototype,\"layerInfos\",void 0),e([n({readOnly:!0})],w.prototype,\"state\",null),e([n()],w.prototype,\"view\",void 0),w=e([o(\"esri.widgets.Legend.LegendViewModel\")],w);export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend--card\",a=\"esri-legend\",r={activated:`${e}__carousel-indicator--activated`,base:e,stacked:`${a}--stacked`,carouselTitle:`${e}__carousel-title`,indicator:`${e}__carousel-indicator`,intervalSeparator:`${e}__interval-separator`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageLabel:`${e}__image-label`,layerCaption:`${e}__layer-caption`,labelElement:`${e}__label-element`,layerRow:`${e}__layer-row`,labelCell:`${e}__label-cell`,message:`${e}__message`,rampLabel:`${e}__ramp-label`,section:`${e}__section`,relationshipSection:`${e}__relationship-section`,serviceCaptionText:`${e}__service-caption-text`,serviceContent:`${e}__service-content`,service:`${e}__service`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,symbol:`${e}__symbol`,sizeRampRow:`${e}__size-ramp-row`,symbolRow:`${e}__symbol-row`,symbolCell:`${e}__symbol-cell`,carousel:`${e}__carousel`,carouselItem:`${e}__carousel-item`,indicatorContainer:`${e}__carousel-indicator-container`,intervalSeparatorsContainer:`${e}__interval-separators-container`,relationshipLabelContainer:`${e}__relationship-label-container`,labelContainer:`${e}__label-container`,serviceCaptionContainer:`${e}__service-caption-container`,symbolContainer:`${e}__symbol-container`,colorRampContainer:`${e}__color-ramp-container`,sizeRampContainer:`${e}__size-ramp-container`,sizeRampPreview:`${e}__size-ramp-preview`,pieChartRampPreview:`${e}__pie-chart-ramp-preview`,rampContainer:`${a}__ramps`,sizeRampHorizontal:`${a}__size-ramp--horizontal`,rampLabelsContainer:`${a}__ramp-labels`,layerInfo:`${a}__layer-cell ${a}__layer-cell--info`,univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\"};export{r as css};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{stripHTML as e}from\"../../../core/string.js\";import{substitute as t}from\"../../../intl/substitute.js\";import{formatNumber as n}from\"../../../intl/number.js\";function r(e,t){return t}function i(e){const t=this;e.appendChild(t)}function o(n,i,o){if(!i)return;if(\"number\"==typeof i)return i;if(\"string\"==typeof i)return e(i);if(\"value\"in i||\"unit\"in i)return t(n.dotValue,i);if(\"colorName\"in i&&\"bandName\"in i)return n[i.colorName]+\": \"+(n[i.bandName]||i.bandName);if(\"showCount\"in i)return i.showCount?n.clusterCountTitle:void 0;let u=null;return r(i,o)?u=i.ratioPercentTotal?\"showRatioPercentTotal\":i.ratioPercent?\"showRatioPercent\":i.ratio?\"showRatio\":i.normField?\"showNormField\":i.field?\"showField\":null:l(i,o)&&(u=i.normField?\"showNormField\":i.normByPct?\"showNormPct\":i.field?\"showField\":null),u?t(\"showField\"===u?\"{field}\":n[u],{field:i.field,normField:i.normField}):void 0}function l(e,t){return!t}function u(e,t){return!!(t&&\"Stretched\"===t&&\"version\"in e&&\"number\"==typeof e.version&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}function a(e,t){return e.label?t[e.label]+\": \"+(\"string\"==typeof e.value?e.value:n(e.value??0,{style:\"decimal\",notation:e.value?.toString().toLowerCase().includes(\"e\")?\"scientific\":\"standard\"})):\"\"}export{i as attachToNode,a as getStretchStopLabel,o as getTitle,u as isImageryStretchedLegend,l as isRendererTitle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{getTitle as t,isRendererTitle as e,getStretchStopLabel as r}from\"../../support/styleUtils.js\";function l(t,e,l){switch(e){case\"heatmap-ramp\":return l[t.label]||t.label;case\"stretch-ramp\":return r(t,l);default:return t.label}}function i(r,l){if(!r.title||\"string\"==typeof r.title)return r.title;const i=\"color-ramp\"===r.type||\"opacity-ramp\"===r.type,n=r.title,o=t(l,n,i);return e(n,i)&&n.title?`${n.title} (${o})`:o}function n(t){return!(!t||\"object\"!=typeof t)}export{i as getLegendElementTitle,l as getRampStopLabel,n as isWidthAndHeight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as s}from\"../../../../symbols/support/svgUtils.js\";import{getCSSFilterFromEffectList as o}from\"../../../../symbols/support/utils.js\";import i from\"../../../Widget.js\";import{css as l}from\"./css.js\";import{getRampStopLabel as p}from\"../support/utils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const n=25,m=25,c=100;let d=class extends i{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return a(\"div\",{class:this.classes(l.layerRow,l.colorRampContainer)},this._renderRampLabel(e[0]),a(\"div\",{class:l.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,r=\"heatmap-ramp\"===this.legendElement.type,i=e.length-1,l=m,p=i>2&&!r?n*i:c,d=p+20,h=10,y=[[{shape:{type:\"path\",path:`M0 ${l/2} L${h} 0 L${h} ${l} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:h,y:0,width:p,height:l},fill:{type:\"linear\",x1:h,y1:0,x2:p+h,y2:0,colors:e.map(((e,t)=>({color:e.color,offset:r&&\"ratio\"in e?e.ratio:t/i})))},stroke:{width:0}},{shape:{type:\"path\",path:`M${p+h} 0 L${d} ${l/2} L${p+h} ${l} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],f=s(y,d,l),u={filter:o(this.effectList)??void 0,opacity:null==t?void 0:`${t}`};return a(\"div\",{styles:u},f)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?a(\"div\",{class:l.intervalSeparatorsContainer},a(\"div\",{class:l.intervalSeparator},\"|\"),this._renderRampLabel(t)):null}_renderRampLabel(e){return a(\"div\",{class:l.rampLabel},p(e,this.legendElement.type,this.messages))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([r(\"esri.widgets.Legend.styles.card.ColorRamp\")],d);export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import{isWidthAndHeight as i}from\"./utils.js\";import{attachToNode as t}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as s}from\"../../../support/jsxFactory.js\";const n=\"#ddd\",o=window.devicePixelRatio,a=\"esri-spike-ramp\",p={spikeRampContainer:`${a}__container`,spikeRampPreviewContainer:`${a}__preview-container`,spikeRampPreview:`${a}__preview`,spikeRampSymbolPreview:`${a}__symbol-preview`,spikeRampLines:`${a}__lines`,spikeRampLabelsContainer:`${a}__labels-container`,spikeRampLabel:`${a}__label`};function r(e){return 5!==e.infos.length?null:s(\"div\",{class:p.spikeRampContainer},s(\"div\",{class:p.spikeRampPreviewContainer},l(e),m(e)),d(e))}function l(e){const[i,n,o]=h(e).map((({preview:e})=>{if(!e)return null;const i=e.cloneNode(!0);return i.classList.add(p.spikeRampSymbolPreview),i}));return i&&n&&o?s(\"div\",{class:p.spikeRampPreview},s(\"div\",{afterCreate:t,bind:o}),s(\"div\",{afterCreate:t,bind:n}),s(\"div\",{afterCreate:t,bind:i})):null}function m(a){const[{width:r,height:l},{width:m},{width:d,height:c}]=h(a).map((({size:t})=>i(t)?{width:e(t.width),height:e(t.height)}:{width:0,height:0})),v=10,b=8,u=r+m+d+3*v,w=l,k=document.createElement(\"canvas\");k.width=(u+v)*o,k.height=w*o,k.style.width=k.width/o+\"px\",k.style.height=k.height/o+\"px\";const f=k.getContext(\"2d\");f.beginPath();const R=u-(r/2+v),g=0,_=u+b,y=0;f.moveTo(R*o,g*o),f.lineTo(_*o,y*o);const C=(u-b)/2,L=(l-c)/2,x=u+b,P=(l-c)/2;f.moveTo(C*o,L*o),f.lineTo(x*o,P*o);const $=d/2,j=w-c,T=u+b,S=w-c;return f.moveTo($*o,j*o),f.lineTo(T*o,S*o),f.strokeStyle=n,f.lineWidth=.5*o,f.stroke(),s(\"div\",{afterCreate:t,bind:k,class:p.spikeRampLines})}function d(t){const[{label:n,height:o},{label:a},{label:r,height:l}]=h(t).map((({label:t,size:s})=>({label:t,height:i(s)?e(s.height):0}))),m=o-l,d={position:\"absolute\",top:\"0\"},c={position:\"absolute\",top:m/2+\"px\"},v={position:\"absolute\",top:`${m}px`};return s(\"div\",{class:p.spikeRampLabelsContainer},s(\"div\",{class:p.spikeRampLabel,styles:d},n),s(\"div\",{class:p.spikeRampLabel,styles:c},a),s(\"div\",{class:p.spikeRampLabel,styles:v},r))}function h(e){return e.infos.filter(((e,i)=>i%2==0))}export{r as renderSpikeRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{pt2px as t}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{renderSpikeRamp as n}from\"../support/sizeRampUtils.js\";import{attachToNode as l}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";const c=\"#ddd\",p=window.devicePixelRatio;function d(e){if(!e)return;if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t.resource?.primitive;return\"circle\"===s||\"cross\"===s||\"kite\"===s||\"sphere\"===s||\"cube\"===s||\"diamond\"===s}const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}function m(e){if(e){if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t?.resource?.primitive;return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let y=class extends r{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(\"spike\"===this.legendElement.theme)return a(\"div\",{styles:{display:\"flex\",flex:\"1\",justifyContent:\"center\"}},n(this.legendElement));const{legendElement:e,hasIndicators:t,opacity:s}=this,i=e.infos,r=i.at(0),c=i.at(-1);if(!r||!c)return null;const{label:p,...d}=r,{label:m,...y}=c;let u=d.preview,f=y.preview;const h={\"flex-direction\":t?\"column\":\"row-reverse\"};if(!u||!f)return null;u=u.cloneNode(!0),u.style.display=\"flex\",f=f.cloneNode(!0),f.style.display=\"flex\";const g={opacity:`${s??\"\"}`};return a(\"div\",{class:this.classes(o.layerRow,{[o.sizeRampRow]:t})},a(\"div\",{class:o.rampLabel},t?p:m),a(\"div\",{class:o.sizeRampContainer,styles:h},a(\"div\",{afterCreate:l,bind:u,class:o.sizeRampPreview,styles:g}),this._renderSizeRampLines(e),a(\"div\",{afterCreate:l,bind:f,class:o.sizeRampPreview,styles:g})),a(\"div\",{class:o.rampLabel},t?m:p))}_renderSizeRampLines(e){const s=e.infos,i=s.at(0),r=s.at(-1);if(!i||!r)return null;const o=i.symbol,n=this.hasIndicators,y=i.size&&\"number\"==typeof i.size?i.size:0,u=r.size&&\"number\"==typeof r.size?r.size:0,f=i.outlineSize||0,h=r.outlineSize||0,g=t(y+f)*p,v=t(u+h)*p,b=n?g:g+50*p,x=n?g/2+50*p:g,z=m(o),j=d(o),w=document.createElement(\"canvas\");w.width=b,w.height=x,w.style.width=w.width/p+\"px\",w.style.height=w.height/p+\"px\";const R=w.getContext(\"2d\");if(n){R.beginPath();const e=0,t=0,s=b/2-v/2,i=x;R.moveTo(e,t),R.lineTo(s,i);const r=b,o=0,n=b/2+v/2,l=x;R.moveTo(r,o),R.lineTo(n,l)}else{R.beginPath();const e=0,t=x/2-v/2,s=b,i=0;R.moveTo(e,t),R.lineTo(s,i);const r=0,o=x/2+v/2,n=b,l=x;R.moveTo(r,o),R.lineTo(n,l)}return R.strokeStyle=c,R.stroke(),a(\"div\",{afterCreate:l,bind:w,styles:n?{display:\"flex\",marginTop:`-${z?0:j?g/2:0}px`,marginBottom:`-${z?v:j?v/2:0}px`}:{display:\"flex\",marginRight:`-${z?0:j?g/2:0}px`,marginLeft:`-${z?0:j?v/2:0}px`}})}};e([s()],y.prototype,\"hasIndicators\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([i(\"esri.widgets.Legend.styles.card.SizeRamp\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{isNumber as i}from\"../../../../support/guards.js\";import{renderColorRampPreviewHTML as o}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";const n=t(),r=10,s=20,a=10,c=20,f={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function p(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?l(\"svg\",{height:\"4\",width:\"10\"},l(\"line\",{style:t,x1:\"0\",x2:\"10\",y1:\"2\",y2:\"2\"})):l(\"svg\",{height:\"10\",width:\"10\"},l(\"line\",{style:t,x1:\"5\",x2:\"5\",y1:\"0\",y2:\"10\"}))}function m(e,t=\"vertical\"){const i=document.createElement(\"div\");return i.style.height=`${s}px`,i.className=f.univariateAboveAndBelowSymbol,null!=e&&(i.style.opacity=e.toString()),n.append(i,p.bind(null,t)),i}function u(t,o,l=\"vertical\",n){t.infos.forEach(((t,r)=>{if(n&&2===r)t.preview=m(o,l);else{const o=(i(t.size)?e(t.size):0)+(\"horizontal\"===l?c:a),n=t.preview,r=\"div\"===n?.tagName.toLowerCase(),s=r?n:document.createElement(\"div\");s.className=f.univariateAboveAndBelowSymbol,\"horizontal\"===l?s.style.width=`${o}px`:s.style.height=`${o}px`,!r&&n&&s.appendChild(n),t.preview=s}}))}function v(t,o=\"classic\"){const l=t.infos,n=l.at(0),r=l.at(-1),s=i(n.size)?e(n.size):0,c=i(r.size)?e(r.size):0;return\"classic\"===o?(s+a)/2:(s-c)/2}function h(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=o(\"full\"===t.type?i:\"above\"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList,ariaLabel:t.ariaLabel});return l.className=f.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function d(t,o,l,n=\"vertical\"){let f=0;const p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m;for(let h=u;h<=v;h++)if(l&&h===m)f+=\"horizontal\"===n?r:s;else{const t=p[h].size;f+=(i(t)?e(t):0)+(\"horizontal\"===n?c:a)}return Math.round(f)}function y(t,o,l,n=\"vertical\"){const f=d(t,o,l,n),p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m,h=i(p[u].size)?p[u].size:0,y=i(p[v].size)?p[v].size:0,b=\"full\"===o?h+y:\"above\"===o?h:y,g=l?\"vertical\"===n?s:r:0,z=\"vertical\"===n?a*(\"full\"===o?2:1):c*(\"full\"===o?2:1);return Math.round(f-(e(b)/2+g/2+z/2))}function b(e,t,i=\"vertical\"){const o=e.infos;let l=o.find((({type:e})=>\"size-ramp\"===e)),n=o.find((({type:e})=>\"color-ramp\"===e));return l&&(l={...l},l.infos=[...l.infos],u(l,t,i,!0)),n&&(n={...n},n.infos=[...n.infos]),\"horizontal\"===i&&(l?.infos.reverse(),n?.infos.reverse()),{sizeRampElement:l,colorRampElement:n}}function g(e,t=\"vertical\"){const i=e.infos;let o=i.find((({type:e})=>\"size-ramp\"===e)),l=i.find((({type:e})=>\"color-ramp\"===e));return o&&(o={...o},o.infos=[...o.infos],u(o,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),\"horizontal\"===t&&(o?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:o,colorRampElement:l}}const z={marginLeft:\"3px\"},w={display:\"table-cell\",verticalAlign:\"middle\"},x={display:\"flex\",alignItems:\"flex-start\"};export{b as getUnivariateAboveAndBelowRampElements,v as getUnivariateColorRampMargin,h as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,g as getUnivariateColorSizeRampElements,d as getUnivariateSizeRampSize,z as univariateColorRampContainerStyles,w as univariateColorRampStyles,x as univariateRampContainerStyles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateSizeRampSize as a,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as m}from\"../../support/styleUtils.js\";import{isRTL as c}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";let f=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:f,colorRampElement:y}=r(e,t,\"horizontal\");if(!f)return null;const h=a(f,\"full\",!0,\"horizontal\"),u=l(f,\"above\",!0,\"horizontal\"),v=l(f,\"below\",!0,\"horizontal\"),g=12,b=this.messages?.previewColorRampAriaLabel,w=p(y,{width:u,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"above\",effectList:o,ariaLabel:b}),j=p(y,{width:v,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"below\",effectList:o,ariaLabel:b}),x=n(f,\"card\"),L=f.infos.map((e=>e.label)),z=L.length-1,C=L.map(((e,t)=>0===t||t===z?d(\"div\",{key:t},e):null)),R={display:\"flex\",flexDirection:\"column\"},A={display:\"flex\",flexDirection:\"row\"},k={marginTop:\"3px\",display:\"flex\"};c(this.container)?k.marginRight=`${x}px`:k.marginLeft=`${x}px`;const E={width:`${h}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return d(\"div\",{class:i.layerRow,key:`${s}-container`,styles:R},d(\"div\",{class:this.classes(i.symbolContainer,i.sizeRampHorizontal),styles:A},f.infos.map(((e,t)=>d(\"div\",{afterCreate:m,bind:e.preview,class:i.symbol,key:t})))),w?d(\"div\",{class:i.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:k},d(\"div\",{afterCreate:m,bind:w}),d(\"div\",{afterCreate:m,bind:j})):null,d(\"div\",{class:i.layerInfo},d(\"div\",{class:i.rampLabelsContainer,styles:E},C)))}};e([t()],f.prototype,\"effectList\",void 0),e([t()],f.prototype,\"legendElement\",void 0),e([t()],f.prototype,\"messages\",void 0),e([t()],f.prototype,\"opacity\",void 0),f=e([o(\"esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as r}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateSizeRampSize as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as f}from\"../../../support/jsxFactory.js\";let d=class extends s{constructor(e,t){super(e,t),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,effectList:o,key:s}=this,{sizeRampElement:d,colorRampElement:y}=i(e,\"horizontal\");if(!d)return null;const u=l(d,\"full\",!1,\"horizontal\"),h=a(d,\"full\",!1,\"horizontal\"),v=p(y,{width:h,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\",effectList:o,ariaLabel:this.messages?.previewColorRampAriaLabel}),g=n(d,\"card\"),j=d.infos.length-1,x=d.infos.map(((e,t)=>0===t||t===j?f(\"div\",{key:t},e.label):null)),b={display:\"flex\",flexDirection:\"column\"},w={display:\"flex\",flexDirection:\"row\"},L={marginTop:\"3px\",display:\"flex\"};m(this.container)?L.marginRight=`${g}px`:L.marginLeft=`${g}px`;const C={width:`${u}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return f(\"div\",{class:r.layerRow,key:`${s}-container`,styles:b},f(\"div\",{class:this.classes(r.symbolContainer,r.sizeRampHorizontal),styles:w},d.infos.map(((e,t)=>f(\"div\",{afterCreate:c,bind:e.preview,class:r.symbol,key:t})))),f(\"div\",{class:r.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:L},f(\"div\",{afterCreate:c,bind:v})),f(\"div\",{class:r.layerInfo},f(\"div\",{class:r.rampLabelsContainer,styles:C},x)))}};e([t()],d.prototype,\"effectList\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([o(\"esri.widgets.Legend.styles.card.UnivariateColorSizeRamp\")],d);export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../Color.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{getCSSFilterFromEffectList as r}from\"../../../../symbols/support/utils.js\";import a from\"../../../Widget.js\";import l from\"./ColorRamp.js\";import{css as o}from\"./css.js\";import n from\"./SizeRamp.js\";import c from\"./UnivariateAboveAndBelowRamp.js\";import p from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as h}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as m}from\"../support/utils.js\";import{attachToNode as d,isImageryStretchedLegend as y,getTitle as g}from\"../../support/styleUtils.js\";import{Heading as f,incrementHeadingLevel as u}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";var b;let L=b=class extends a{constructor(e,s){super(e,s),this.effectList=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=m(this.legendElement,this.messages),t=this.hasIndicators&&!this.isChild?v(\"div\",null,v(f,{class:o.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),v(f,{class:o.layerCaption,level:u(this.headingLevel)},s)):s?v(f,{class:o.layerCaption,level:this.headingLevel},s):null;return v(\"section\",{\"aria-labelledby\":this.key,class:o.section,id:`${this.key}-panel`,key:this.key,role:\"tabpanel\",tabIndex:0},t,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return v(n,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return v(l,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return h(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return v(\"div\",{afterCreate:d,bind:this.legendElement.preview,class:o.pieChartRampPreview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return v(c,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return v(p,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);if(!s.length)return null;const t=this.activeLayerInfo.legendElements.some((({type:e})=>\"relationship-ramp\"===e)),i=s[0]?.properties?.classes?.[o.symbolRow],r={[o.labelContainer]:!i&&!t,[o.relationshipLabelContainer]:t};return v(\"div\",{class:this.classes(r)},s)}_renderElementInfo(e,s){const{layer:t}=this,i=\"label\"in e?e.label:null,r=`${this.key}-${i}`;if(\"type\"in e&&e.type)return v(b,{activeLayerInfo:this.activeLayerInfo,effectList:this.effectList,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:r,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const a=y(t,s),l=g(this.messages,i,!1)||\"\";if(\"src\"in e&&e.src)return v(\"div\",{class:o.layerRow,key:`${r}-row`},this._renderImage(e,t,a),v(\"div\",{class:o.imageLabel},l));if(\"symbol\"in e&&e.preview){if(!e.symbol?.type.includes(\"simple-fill\")){if(!e.label)return v(\"div\",{afterCreate:d,bind:e.preview,key:`${r}-row`});const s={[o.symbolCell]:this.hasIndicators};return v(\"div\",{class:this.classes(o.layerRow,{[o.symbolRow]:this.hasIndicators}),key:`${r}-row`},v(\"div\",{afterCreate:d,bind:e.preview,class:this.classes(s)}),v(\"div\",{class:this.classes(o.imageLabel,{[o.labelCell]:this.hasIndicators})},l))}return v(\"div\",{class:o.layerRow,key:`${r}-row`},v(\"div\",{class:o.labelElement,styles:this._getBackgroundStyles(e)},l))}return null}_getBackgroundStyles(e){const t=e.symbol,i=t.color,a=!!i?.a,l=\"outline\"in t?t.outline:null,o=!!l?.color?.a,n=new s(a&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),c=o&&l.color?new s([l.color.r,l.color.g,l.color.b,l.color.a*this.layer.opacity]):new s([255,255,255,0]),p=e.symbol.color?.isBright??!0,h=p?\"black\":\"white\",m=p?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\";return{background:a?n.toCss(!0):\"none\",color:h,textShadow:`-1px -1px 0 ${m},\\n                  1px -1px 0 ${m},\\n                  -1px 1px 0 ${m},\\n                  1px 1px 0 ${m}`,border:o?`1px solid ${c.toCss(!0)}`:\"none\",filter:r(this.effectList)??void 0}}_renderImage(e,s,t){const{label:i,src:r,opacity:a}=e,l={[o.imageryLayerStretchedImage]:t,[o.symbol]:!t},n={opacity:`${a??s.opacity}`},c=g(this.messages,i,!1);return v(\"img\",{alt:c,\"aria-label\":c,border:0,class:this.classes(l),height:e.height,src:r,styles:n,width:e.width})}};e([t()],L.prototype,\"activeLayerInfo\",void 0),e([t()],L.prototype,\"effectList\",void 0),e([t()],L.prototype,\"hasIndicators\",void 0),e([t()],L.prototype,\"headingLevel\",void 0),e([t()],L.prototype,\"isChild\",void 0),e([t()],L.prototype,\"layer\",void 0),e([t()],L.prototype,\"legendElement\",void 0),e([t()],L.prototype,\"messages\",void 0),L=b=e([i(\"esri.widgets.Legend.styles.card.LegendElement\")],L);export{L as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../intl.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as i}from\"./css.js\";import o from\"./LegendElement.js\";import{loadCalciteComponents as n}from\"../../../support/componentsUtils.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as a}from\"../../../support/decorators/messageBundle.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";import{substitute as c}from\"../../../../intl/substitute.js\";const d=768;let p=class extends r{constructor(e,s){super(e,s),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout=\"stack\",this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}loadDependencies(){return n({carousel:()=>import(\"@esri/calcite-components/dist/components/calcite-carousel\"),\"carousel-item\":()=>import(\"@esri/calcite-components/dist/components/calcite-carousel-item\")})}render(){this._hasIndicators=\"auto\"===this.layout&&this.view&&this.view.container.clientWidth<=d||\"stack\"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),s={[i.stacked]:this._hasIndicators};return l(\"div\",{class:this.classes(i.base,s)},e||l(\"div\",{class:i.message},this.messages.noLegend))}_renderCarousel(){const e=[],s=this.activeLayerInfos;if(s)for(const t of s)this._renderSections(t,e);return e?.length?l(\"calcite-carousel\",{class:i.carousel,label:this.messages.carousel},e.map(((s,t)=>l(\"calcite-carousel-item\",{class:i.carouselItem,key:t,label:c(this.messagesCommon.pagination.pageText,{index:t+1,total:e.length})},s)))):null}_renderLayers(){const e=this.activeLayerInfos,s=e?.toArray()?.map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?s:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const s=e.children.toArray().map(this._renderLegendForLayer,this);return l(\"section\",{class:this.classes(i.service,i.groupLayer),key:e.layer.uid},l(\"div\",{class:i.serviceCaptionContainer},e.title),s)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const s=e.legendElements?.filter(Boolean);if(!s?.length)return null;const t=s.map((s=>l(o,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),r={[i.groupLayerChild]:!!e.parent};return l(\"section\",{class:this.classes(i.service,r),key:e.layer.uid},l(\"div\",{class:i.serviceCaptionContainer},l(\"div\",{class:i.serviceCaptionText},e.title)),l(\"div\",{class:i.serviceContent},t))}_renderSections(e,s){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,s);const t=e.legendElements;if(t?.length)for(const r of t){const t=l(o,{activeLayerInfo:e,effectList:e.effectList,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${r.type}`,layer:e.layer,legendElement:r,messages:this.messages});t&&s.push(t)}}};e([s()],p.prototype,\"activeLayerInfos\",void 0),e([s()],p.prototype,\"headingLevel\",void 0),e([s()],p.prototype,\"layout\",void 0),e([s(),a(\"esri/widgets/Legend/t9n/Legend\")],p.prototype,\"messages\",void 0),e([s(),a(\"esri/t9n/common\")],p.prototype,\"messagesCommon\",void 0),e([s({readOnly:!0})],p.prototype,\"type\",void 0),e([s()],p.prototype,\"view\",void 0),p=e([t(\"esri.widgets.Legend.styles.card.CardView\")],p);export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend\",a={service:`${e}__service`,label:`${e}__service-label`,layer:`${e}__layer`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,layerTable:`${e}__layer-table`,layerTableSizeRamp:`${e}__layer-table--size-ramp`,layerChildTable:`${e}__layer-child-table`,layerCaption:`${e}__layer-caption`,layerBody:`${e}__layer-body`,layerRow:`${e}__layer-row`,layerCell:`${e}__layer-cell`,layerInfo:`${e}__layer-cell ${e}__layer-cell--info`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${e}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${e}__imagery-layer-info--stretched`,symbolContainer:`${e}__layer-cell ${e}__layer-cell--symbols`,symbol:`${e}__symbol`,rampContainer:`${e}__ramps`,sizeRamp:`${e}__size-ramp`,colorRamp:`${e}__color-ramp`,opacityRamp:`${e}__opacity-ramp`,borderlessRamp:`${e}__borderless-ramp`,rampTick:`${e}__ramp-tick`,rampFirstTick:`${e}__ramp-tick-first`,rampLastTick:`${e}__ramp-tick-last`,rampLabelsContainer:`${e}__ramp-labels`,rampLabel:`${e}__ramp-label`,message:`${e}__message`,univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\"};export{a as css,e as legend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getRampStopLabel as i}from\"../support/utils.js\";import{attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";const a=24;let n=class extends r{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=\"opacity-ramp\"===this.legendElement.type?o.opacityRamp:\"\";return e.className=`${o.colorRamp} ${t}`,null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const s={width:`${a}px`},r={height:t.style.height};return l(\"div\",{class:o.layerRow,key:`${this.key}-row`},l(\"div\",{class:o.symbolContainer,styles:s},l(\"div\",{afterCreate:p,bind:t,class:o.rampContainer})),l(\"div\",{class:o.layerInfo},l(\"div\",{class:o.rampLabelsContainer,styles:r},e.infos.map(((t,s)=>this._renderRampLabel(t,s,e.type))))))}_renderRampLabel(e,t,s){return l(\"div\",{class:e.label?o.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},i(e,s,this.messages))}};e([t()],n.prototype,\"_preview\",null),e([t()],n.prototype,\"legendElement\",void 0),e([t()],n.prototype,\"messages\",void 0),e([t()],n.prototype,\"opacity\",void 0),n=e([s(\"esri.widgets.Legend.styles.classic.ColorRamp\")],n);export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../Widget.js\";import{css as t}from\"./css.js\";import{renderSpikeRamp as i}from\"../support/sizeRampUtils.js\";import{getTitle as l,attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as m}from\"../../../support/jsxFactory.js\";let a=class extends o{constructor(e,s){super(e,s),this.legendElement=null}render(){const e=this.legendElement.infos.map((e=>this._renderRow(e))).filter(Boolean);return e.length?\"spike\"===this.legendElement.theme?i(this.legendElement):m(\"div\",{class:t.layerBody},e):null}_renderRow(e){return e.preview?m(\"div\",{class:t.layerRow,key:`${this.key}-${e.label}-row`},m(\"div\",{class:this.classes(t.symbolContainer,t.sizeRamp)},m(\"div\",{afterCreate:p,bind:e.preview,class:t.symbol})),m(\"div\",{class:t.layerInfo},l(this.messages,e.label,!1)||\"\")):null}};e([s()],a.prototype,\"legendElement\",void 0),e([s()],a.prototype,\"messages\",void 0),a=e([r(\"esri.widgets.Legend.styles.classic.SizeRamp\")],a);export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import i from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as r,getUnivariateColorRampSize as l,getUnivariateColorRampPreview as a,getUnivariateColorRampMargin as p,univariateColorRampContainerStyles as n,univariateColorRampStyles as c,univariateRampContainerStyles as m}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";let y=class extends i{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:i}=this,{sizeRampElement:y,colorRampElement:b}=r(e,s);if(!y)return null;const f=this.messages.previewColorRampAriaLabel,u=l(y,\"above\",!0),g=l(y,\"below\",!0),h=12,L=a(b,{width:h,height:u,rampAlignment:\"vertical\",opacity:s,type:\"above\",effectList:t,ariaLabel:f}),w=a(b,{width:h,height:g,rampAlignment:\"vertical\",opacity:s,type:\"below\",effectList:t,ariaLabel:f}),j=p(y),A=y.infos.map((e=>e.label)),$=A.map(((e,s)=>{const t=2===s;return 0===s?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-above-label-${e??s}`},e):t?v(\"div\",null):null})),C=A.length-1,R=Math.floor(A.length/2),k=A.map(((e,s)=>s===R||s===C?v(\"div\",{class:e?L?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${i}-color-ramp-below-label-${e??s}`},e):null)),x={display:\"table-cell\",verticalAlign:\"middle\"},E={marginTop:`${j}px`},B={height:`${u}px`},U={height:`${g}px`};return v(\"div\",{key:`${i}-container`,styles:m},v(\"div\",{class:o.layerBody},y.infos.map(((e,s)=>v(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${i}-row-${s}`},v(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:x}),L||s%2!=0?null:v(\"div\",{class:o.layerInfo},A[s]))))),L?v(\"div\",{styles:E},v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:L,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:B},$))),v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:w,class:o.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:o.rampLabelsContainer,styles:U},k)))):null)}};e([s()],y.prototype,\"effectList\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([t(\"esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateColorRampMargin as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,univariateColorRampContainerStyles as m,univariateColorRampStyles as c,univariateRampContainerStyles as n}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";let f=class extends r{constructor(e,s){super(e,s),this.effectList=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,effectList:t,key:r}=this,{sizeRampElement:f,colorRampElement:v}=i(e);if(!f)return null;const u=l(f),g=12,b=a(f,\"full\",!1),h=p(v,{width:g,height:b,rampAlignment:\"vertical\",opacity:s,type:\"full\",effectList:t,ariaLabel:this.messages?.previewColorRampAriaLabel}),j=f.infos.length-1,L=f.infos.map(((e,s)=>0===s||s===j?y(\"div\",{class:e.label?v?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${r}-color-ramp-label-${e.label??s}`},e.label):null)),w={display:\"table-cell\",verticalAlign:\"middle\"},C={marginTop:`${u}px`},R={height:`${b}px`};return y(\"div\",{key:`${r}-container`,styles:n},y(\"div\",{class:o.layerBody},f.infos.map(((e,s)=>y(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${r}-row-${s}`},y(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:w}))))),y(\"div\",{styles:C},y(\"div\",{styles:m},y(\"div\",{styles:c},y(\"div\",{afterCreate:d,bind:h,class:o.rampContainer})),y(\"div\",{styles:c},y(\"div\",{class:o.rampLabelsContainer,styles:R},L)))))}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),e([s()],f.prototype,\"opacity\",void 0),f=e([t(\"esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import i from\"./ColorRamp.js\";import{css as a}from\"./css.js\";import l from\"./SizeRamp.js\";import o from\"./UnivariateAboveAndBelowRamp.js\";import n from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as m}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as p}from\"../support/utils.js\";import{attachToNode as c,isImageryStretchedLegend as h,getTitle as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";var g;let f=g=class extends r{constructor(e,s){super(e,s),this.effectList=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=p(this.legendElement,this.messages),t=this.isChild?a.layerChildTable:a.layerTable,r=s?y(\"div\",{class:a.layerCaption},s):null,i={[a.layerTableSizeRamp]:\"size-ramp\"===this.legendElement.type||!this.isChild};return y(\"section\",{class:this.classes(t,i),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return y(l,{key:this.key,legendElement:this.legendElement,messages:this.messages});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return y(i,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return m(this.legendElement,this.id,{opacity:this.layer.opacity,effectList:this.effectList,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":return y(\"div\",{afterCreate:c,bind:this.legendElement.preview,key:`${this.key}-preview`});case\"univariate-above-and-below-ramp\":return y(o,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return y(n,{effectList:this.effectList,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map((s=>this._renderElementInfo(s,e.legendType))).filter(Boolean);return s.length?y(\"div\",{class:a.layerBody},s):null}_renderElementInfo(e,s){const{layer:t}=this,r=\"label\"in e?e.label:null,i=`${this.key}-${r}`;if(\"type\"in e&&e.type)return y(g,{effectList:this.effectList,isChild:!0,key:i,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const l=h(t,s),o={[a.imageryLayerInfoStretched]:l},n={[a.imageryLayerInfoStretched]:l};return y(\"div\",{class:a.layerRow,key:`${i}-row`},y(\"div\",{class:this.classes(a.symbolContainer,n)},this._renderPreview(e,l)),y(\"div\",{class:this.classes(a.layerInfo,o)},d(this.messages,r,!1)||\"\"))}_renderPreview(e,s){const{layer:t}=this;return\"preview\"in e&&e.preview?y(\"div\",{afterCreate:c,bind:e.preview,class:a.symbol}):\"src\"in e&&e.src?this._renderImage(e,t,s):null}_renderImage(e,s,t){const{label:r,src:i,opacity:l}=e,o={[a.imageryLayerStretchedImage]:t,[a.symbol]:!t},n={opacity:`${l??s.opacity}`},m=d(this.messages,r,!1);return y(\"img\",{alt:m,\"aria-label\":m,border:0,class:this.classes(o),height:e.height,src:i,styles:n,width:e.width})}};e([s()],f.prototype,\"effectList\",void 0),e([s()],f.prototype,\"isChild\",void 0),e([s()],f.prototype,\"layer\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),f=g=e([t(\"esri.widgets.Legend.styles.classic.LegendElement\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../Widget.js\";import{css as o,legend as i}from\"./css.js\";import n from\"./LegendElement.js\";import{globalCss as l}from\"../../../support/globalCss.js\";import{Heading as a}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as c}from\"../../../support/decorators/messageBundle.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";const d=`${i}__`;let m=class extends t{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,s=e?.toArray().map((e=>this._renderLegendForLayer(e))).filter(Boolean);return s?.length?p(\"section\",null,s):p(\"div\",{class:o.message,key:\"no-legend\"},this.messages.noLegend)}_renderLegendForLayer(e,s){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,t=`${d}${s?`${s}-`:\"\"}${r}`,i=e.title?a({level:this.headingLevel,class:this.classes(l.heading,o.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map((e=>this._renderLegendForLayer(e,r)));return p(\"section\",{class:this.classes(o.service,o.groupLayer),key:t},i,s)}return this._renderLegendElementsForLayer(e,i,t)}_renderLegendElementsForLayer(e,s,r){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const i=t.map((s=>p(n,{effectList:e.effectList,isChild:!1,key:`${r}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages}))),l={[o.groupLayerChild]:!!e.parent};return p(\"section\",{class:this.classes(o.service,l),key:r},s,p(\"div\",{class:o.layer},i))}};e([s()],m.prototype,\"activeLayerInfos\",void 0),e([s()],m.prototype,\"headingLevel\",void 0),e([s(),c(\"esri/widgets/Legend/t9n/Legend\")],m.prototype,\"messages\",void 0),e([s({readOnly:!0})],m.prototype,\"type\",void 0),m=e([r(\"esri.widgets.Legend.styles.classic.ClassicView\")],m);export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{on as t,watch as s,initial as i}from\"../core/reactiveUtils.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{cast as o}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"./Widget.js\";import a from\"./Legend/LegendViewModel.js\";import d from\"./Legend/styles/card/CardView.js\";import p from\"./Legend/styles/classic/ClassicView.js\";import{globalCss as y}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as c}from\"./support/decorators/messageBundle.js\";import{tsx as h}from\"./support/jsxFactory.js\";const g={base:\"esri-legend\"};let v=class extends l{constructor(e,t){super(e,t),this.headingLevel=3,this.messages=null,this.viewModel=new a,this.style=new p}initialize(){this.addHandles([t((()=>this.view),\"resize\",(()=>this.scheduleRender())),t((()=>this.activeLayerInfos),\"change\",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),s((()=>this.headingLevel),(e=>{const{style:t}=this;t&&(t.headingLevel=e)})),s((()=>this.style),((e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)}),i)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return\"legend\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get(\"style\");e!==t&&t?.destroy(),this._set(\"style\",e)}castStyle(e){if(e instanceof d||e instanceof p)return e;if(\"string\"==typeof e)return\"card\"===e?new d:new p;if(e&&\"string\"==typeof e.type){const t={...e};return delete t.type,\"card\"===e.type?new d(t):new p(t)}return new p}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return h(\"div\",{class:this.classes(g.base,y.widget,this.style instanceof p?y.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach((e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)})),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const r=s((()=>e.version),(()=>this.scheduleRender()));this.addHandles(r,`version_${e.layer.uid}`);const o=t((()=>e.children),\"change\",(()=>e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))),i);this.addHandles(o,`version_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};e([r()],v.prototype,\"activeLayerInfos\",null),e([r()],v.prototype,\"basemapLegendVisible\",null),e([r()],v.prototype,\"groundLegendVisible\",null),e([r()],v.prototype,\"headingLevel\",void 0),e([r()],v.prototype,\"hideLayersNotInCurrentView\",null),e([r()],v.prototype,\"keepCacheOnDestroy\",null),e([r()],v.prototype,\"respectLayerDefinitionExpression\",null),e([r()],v.prototype,\"respectLayerVisibility\",null),e([r()],v.prototype,\"icon\",null),e([r()],v.prototype,\"label\",null),e([r()],v.prototype,\"layerInfos\",null),e([r(),c(\"esri/widgets/Legend/t9n/Legend\")],v.prototype,\"messages\",void 0),e([r()],v.prototype,\"style\",null),e([o(\"style\")],v.prototype,\"castStyle\",null),e([r()],v.prototype,\"view\",null),e([r()],v.prototype,\"viewModel\",void 0),v=e([n(\"esri.widgets.Legend\")],v);const u=v;export{u as default};\n"],"names":["b","u","c","f","p","k","a","l","t","s","o","T","i","n","m","d","h","_","q","$","L","C","v","w","y","x","e","r","R","E","M","S","j","B","H","U","W","X","g","I","z","V","O","D","G","J","P","A","F","de","ye","he","me","pe","fe","ge","be","Se","_e","we","ve","Le","Ee","Ce","Ie","Fe","Re","Ve","xe","ze","Te","De","je","Oe","Pe","Me","ke","Ae","Ue","Be","Ne","qe","$e","He","We","Ge","Je","Qe","Ze","Ke","Xe","ue","ce","Ye","et","tt","st","te","se","oe","ie","le","Q","Z","K","re","ne","Y","ee","N","ae","has"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}