import{n as W,v as g,_ as j,U as q,G as b,P as y,Y as N,e as K,t as w,I as p,a as z,j as v,d as D,b as O,Q as A,K as _,H as T,N as f,p as k,m as pe,c as we,$ as Y,r as de,f as H,s as U,g as he,h as ge}from"./aiServices-u5nRiq9H.js";import{s as J,o as ye,D as Q,x as me,E as be,j as ve,p as Se,C as xe,f as Ie,y as Fe,a as X,d as Z,b as Me}from"./arcade-BoHTeCSG.js";import{a as i,r as l,u as $}from"./enum-g1DWyQyu.js";import{registerFunctions as Oe}from"./geomasync-NLITDMmB.js";import{J as ee,dU as ke,dV as F,dW as C,dX as d,dY as ne,db as R}from"./main-BFDurRCu.js";async function te(n,e){const t=[];for(let r=0;r<e.arguments.length;r++)t.push(await u(n,e.arguments[r]));return t}async function I(n,e,t){return e.preparsed===!0?t(n,null,e.arguments):t(n,e,await te(n,e))}class Ce extends de{constructor(e,t){super(),this.definition=null,this.context=null,this.definition=e,this.context=t}createFunction(e){return(...t)=>{const r={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,services:this.context.services,abortSignal:this.context.abortSignal,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(r.depthCounter.depth>64)throw new i(e,l.MaximumCallDepth,null);return G(this.definition,r,t,null)}}call(e,t){return E(e,t,(r,a,o)=>{const s={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(s.depthCounter.depth>64)throw new i(e,l.MaximumCallDepth,t);return G(this.definition,s,o,t)})}marshalledCall(e,t,r,a){return a(e,t,async(o,s,c)=>{const S={spatialReference:e.spatialReference,services:e.services,globalScope:r.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return c=c.map(m=>!b(m)||m instanceof U?m:H(m,e,a)),H(await G(this.definition,S,c,t),r,a)})}}async function G(n,e,t,r){const a=n.body;if(t.length!==n.params.length)throw new i(e,l.WrongNumberOfParameters,null);for(let s=0;s<t.length;s++){const c=n.params[s];c.type==="Identifier"&&e.localScope!=null&&(e.localScope[w(c)]={value:t[s]})}const o=await h(e,a);if(o instanceof g)return o.value;if(o===y)throw new i(e,l.UnexpectedToken,r);if(o===N)throw new i(e,l.UnexpectedToken,r);return o instanceof j?o.value:o}class M extends he{constructor(e){super(),this.source=e}global(e){const t=this.executingContext.globalScope[w(e)];if(b(t.value)&&!(t.value instanceof U)){const r=new U;return r.fn=t.value,r.parameterEvaluator=E,r.context=this.executingContext,this.executingContext.globalScope[w(e)]={value:r},r}return t.value}setGlobal(e,t){if(b(t))throw new i(null,l.AssignModuleFunction,null);this.executingContext.globalScope[w(e)]={value:t}}hasGlobal(e){return this.executingContext.exports[e]===void 0&&(e=w(e)),this.executingContext.exports[e]!==void 0}async loadModule(e){const t=e.spatialReference??ee.WebMercator;this.moduleScope=ue(null,null,e.timeZone),this.executingContext={spatialReference:t,services:e.services,libraryResolver:new J(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:e.abortSignal??W,globalScope:this.moduleScope,console:e.console??fe,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await L(this.executingContext,this.source.syntax)}}async function E(n,e,t){return e.preparsed===!0?t(n,null,e.arguments):t(n,e,await te(n,e))}async function u(n,e){e.breakpoint&&await e.breakpoint();try{switch(e.type){case"UpdateExpression":return await De(n,e);case"AssignmentExpression":return await Ue(n,e);case"TemplateLiteral":return await Qe(n,e);case"Identifier":return P(n,e);case"MemberExpression":return await ze(n,e);case"Literal":return e.value;case"CallExpression":return await Je(n,e);case"UnaryExpression":return await _e(n,e);case"BinaryExpression":return await Ye(n,e);case"LogicalExpression":return await He(n,e);case"ArrayExpression":return await Te(n,e);case"ObjectExpression":return await Re(n,e);default:throw new i(n,l.Unrecognized,e)}}catch(t){throw $(n,e,t)}}async function h(n,e){e.breakpoint&&await e.breakpoint();try{switch(e.type){case"ImportDeclaration":return await Ve(n,e);case"ExportNamedDeclaration":return await We(n,e);case"VariableDeclaration":return await ie(n,e,0);case"BlockStatement":return await L(n,e);case"FunctionDeclaration":return await Pe(n,e);case"ReturnStatement":return await Le(n,e);case"IfStatement":return await Ge(n,e);case"ExpressionStatement":return await Ze(n,e);case"ForStatement":return await Ae(n,e);case"WhileStatement":return await Ne(n,e);case"ForInStatement":return await je(n,e);case"ForOfStatement":return await Ke(n,e);case"BreakStatement":return y;case"EmptyStatement":return p;case"ContinueStatement":return N;default:throw new i(n,l.Unrecognized,e)}}catch(t){throw $(n,e,t)}}async function Re(n,e){const t=[];for(let s=0;s<e.properties.length;s++){const c=e.properties[s],S=await u(n,c.value),m=c.key.type==="Identifier"?c.key.name:await u(n,c.key);t[s]={key:m,value:S}}const r=Object.create(null),a=new Map;for(let s=0;s<t.length;s++){const c=t[s];if(b(c.value))throw new i(n,l.NoFunctionInDictionary,e);if(d(c.key)===!1)throw new i(n,l.KeyMustBeString,e);let S=c.key.toString();const m=S.toLowerCase();a.has(m)?S=a.get(m):a.set(m,S),c.value===p?r[S]=null:r[S]=c.value}const o=new v(r);return o.immutable=!1,o}async function Ne(n,e){let t=await u(n,e.test);if(t===!1)return p;if(t!==!0)throw new i(n,l.BooleanConditionRequired,e);for(;t===!0;){const r=await h(n,e.body);if(r===y)break;if(r instanceof g)return r;if(t=await u(n,e.test),t!==!0&&t!==!1)throw new i(n,l.BooleanConditionRequired,e)}return p}async function Ae(n,e){try{for(e.init!==null&&(e.init.type==="VariableDeclaration"?await h(n,e.init):await u(n,e.init));;){if(e.test!==null){const r=await u(n,e.test);if(n.abortSignal?.aborted===!0)throw new i(n,l.Cancelled,e);if(r===!1)break;if(r!==!0)throw new i(n,l.BooleanConditionRequired,e)}const t=await h(n,e.body);if(t===y)break;if(t instanceof g)return t;e.update!==null&&await u(n,e.update)}return p}catch(t){throw t}}async function B(n,e,t,r,a="i"){const o=t.length;for(let s=0;s<o;s++){if(a==="k"){if(s>=t.length)throw new i(n,l.OutOfBounds,e);r.value=t[s]}else r.value=s;const c=await h(n,e.body);if(c===y)break;if(c instanceof g)return c}return p}async function re(n,e,t,r,a="i"){const o=t.length();for(let s=0;s<o;s++){r.value=a==="k"?t.get(s):s;const c=await h(n,e.body);if(c===y)break;if(c instanceof g)return c}return p}async function ae(n,e,t,r){const a=t.iterator(n.abortSignal);let o;for(;(o=await a.next())!=null;){const s=Q.createFromGraphicLikeObject(o.geometry,o.attributes,t,n.timeZone);s._underlyingGraphic=o,r.value=s;const c=await h(n,e.body);if(c===y)break;if(c instanceof g)return c}return p}async function Ee(n,e,t,r){for(const a of t.keys()){const o=t.field(a);r.value=v.containerEntry(a,o);const s=await h(n,e.body);if(s===y)break;if(s instanceof g)return s}return p}async function Be(n,e,t,r){for(const a of X(t)){const o=Z(t,a,n,e,1);r.value=v.containerEntry(a,o);const s=await h(n,e.body);if(s===y)break;if(s instanceof g)return s}return p}async function je(n,e){const t=await u(n,e.right);e.left.type==="VariableDeclaration"&&await h(n,e.left);const r=w(e.left.type==="VariableDeclaration"?e.left.declarations[0].id:e.left);let a=null;if(n.localScope!=null&&n.localScope[r]!==void 0&&(a=n.localScope[r]),a===null&&n.globalScope[r]!==void 0){const o=n.globalScope[r].value;a=n.globalScope[r]={value:o}}if(a===null)throw new i(n,l.InvalidIdentifier,e);return C(t)||d(t)?await B(n,e,t,a):O(t)?await re(n,e,t,a):t instanceof v||A(t)?await B(n,e,t.keys(),a,"k"):_(t)?await ae(n,e,t,a):T(t)?await B(n,e,X(t),a,"k"):p}async function Ke(n,e){const t=await u(n,e.right);e.left.type==="VariableDeclaration"&&await h(n,e.left);const r=w(e.left.type==="VariableDeclaration"?e.left.declarations[0].id:e.left);let a=null;if(n.localScope!=null&&n.localScope[r]!==void 0&&(a=n.localScope[r]),a===null&&n.globalScope[r]!==void 0){const o=n.globalScope[r].value;a=n.globalScope[r]={value:o}}if(a===null)throw new i(n,l.InvalidIdentifier,e);return C(t)||d(t)?await B(n,e,t,a,"k"):O(t)?await re(n,e,t,a,"k"):t instanceof v||A(t)?await Ee(n,e,t,a):_(t)?await ae(n,e,t,a):T(t)?await Be(n,e,t,a):p}async function De(n,e){const t=e.argument;if(t.type==="CallExpression")throw new i(n,l.NeverReach,e);if(t.type==="MemberExpression"){const o=await u(n,t.object);let s,c;if(t.computed===!0)s=await u(n,t.property);else{if(t.property.type!=="Identifier")throw new i(n,l.Unrecognized,e);s=t.property.name}if(C(o)){if(!R(s))throw new i(n,l.ArrayAccessorMustBeNumber,e);if(s<0&&(s=o.length+s),s<0||s>=o.length)throw new i(n,l.OutOfBounds,e);c=f(o[s]),o[s]=e.operator==="++"?c+1:c-1}else if(o instanceof v){if(d(s)===!1)throw new i(n,l.KeyAccessorMustBeString,e);if(o.hasField(s)!==!0)throw new i(n,l.FieldNotFound,e,{key:s});c=f(o.field(s)),o.setField(s,e.operator==="++"?c+1:c-1)}else if(o instanceof M){if(d(s)===!1)throw new i(n,l.ModuleAccessorMustBeString,e);if(o.hasGlobal(s)!==!0)throw new i(n,l.ModuleExportNotFound,e);c=f(o.global(s)),o.setGlobal(s,e.operator==="++"?c+1:c-1)}else{if(!Y(o))throw O(o)?new i(n,l.Immutable,e):new i(n,l.InvalidParameter,e);if(d(s)===!1)throw new i(n,l.KeyAccessorMustBeString,e);if(o.hasField(s)!==!0)throw new i(n,l.FieldNotFound,e,{key:s});c=f(o.field(s)),o.setField(s,e.operator==="++"?c+1:c-1)}return e.prefix===!1?c:e.operator==="++"?c+1:c-1}const r=w(t);let a;if(n.localScope!=null&&n.localScope[r]!==void 0)return a=f(n.localScope[r].value),n.localScope[r]={value:e.operator==="++"?a+1:a-1},e.prefix===!1?a:e.operator==="++"?a+1:a-1;if(n.globalScope[r]!==void 0)return a=f(n.globalScope[r].value),n.globalScope[r]={value:e.operator==="++"?a+1:a-1},e.prefix===!1?a:e.operator==="++"?a+1:a-1;throw new i(n,l.InvalidIdentifier,e)}function x(n,e,t,r,a){switch(e){case"=":return n===p?null:n;case"/=":return f(t)/f(n);case"*=":return f(t)*f(n);case"-=":return f(t)-f(n);case"+=":return d(t)||d(n)?k(t)+k(n):f(t)+f(n);case"%=":return f(t)%f(n);default:throw new i(a,l.UnsupportedOperator,r)}}async function Ue(n,e){const t=e.left;if(t.type==="MemberExpression"){const a=await u(n,t.object);let o;if(t.computed===!0)o=await u(n,t.property);else{if(t.property.type!=="Identifier")throw new i(n,l.InvalidIdentifier,e);o=t.property.name}const s=await u(n,e.right);if(C(a)){if(!R(o))throw new i(n,l.ArrayAccessorMustBeNumber,e);if(o<0&&(o=a.length+o),o<0||o>a.length)throw new i(n,l.OutOfBounds,e);if(o===a.length){if(e.operator!=="=")throw new i(n,l.OutOfBounds,e);a[o]=x(s,e.operator,a[o],e,n)}else a[o]=x(s,e.operator,a[o],e,n)}else if(a instanceof v){if(d(o)===!1)throw new i(n,l.KeyAccessorMustBeString,e);if(a.hasField(o)===!0)a.setField(o,x(s,e.operator,a.field(o),e,n));else{if(e.operator!=="=")throw new i(n,l.FieldNotFound,e,{key:o});a.setField(o,x(s,e.operator,null,e,n))}}else if(a instanceof M){if(d(o)===!1)throw new i(n,l.KeyAccessorMustBeString,e);if(a.hasGlobal(o)!==!0)throw new i(n,l.ModuleExportNotFound,e);a.setGlobal(o,x(s,e.operator,a.global(o),e,n))}else{if(!Y(a))throw O(a)?new i(n,l.Immutable,e):new i(n,l.InvalidParameter,e);if(d(o)===!1)throw new i(n,l.KeyAccessorMustBeString,e);if(a.hasField(o)===!0)a.setField(o,x(s,e.operator,a.field(o),e,n));else{if(e.operator!=="=")throw new i(n,l.FieldNotFound,e,{key:o});a.setField(o,x(s,e.operator,null,e,n))}}return p}const r=w(t);if(n.localScope!=null&&n.localScope[r]!==void 0){const a=await u(n,e.right);return n.localScope[r]={value:x(a,e.operator,n.localScope[r].value,e,n)},p}if(n.globalScope[r]!==void 0){const a=await u(n,e.right);return n.globalScope[r]={value:x(a,e.operator,n.globalScope[r].value,e,n)},p}throw new i(n,l.InvalidIdentifier,e)}async function Ze(n,e){const t=await u(n,e.expression);return t===p?p:new j(t)}async function Ge(n,e){const t=await u(n,e.test);if(t===!0)return h(n,e.consequent);if(t===!1)return e.alternate!==null?h(n,e.alternate):p;throw new i(n,l.BooleanConditionRequired,e)}async function L(n,e){return oe(n,e,0)}async function oe(n,e,t){if(t>=e.body.length)return p;const r=await h(n,e.body[t]);return r instanceof g||r===y||r===N||t===e.body.length-1?r:oe(n,e,t+1)}async function Le(n,e){if(e.argument===null)return new g(p);const t=await u(n,e.argument);return new g(t)}async function Pe(n,e){const t=w(e.id);return n.globalScope[t]={value:new Ce(e,n)},p}async function Ve(n,e){const t=w(e.specifiers[0].local),r=n.libraryResolver.loadLibrary(t);let a;return n.libraryResolver._moduleSingletons?.has(r.uri)?a=n.libraryResolver._moduleSingletons.get(r.uri):(a=new M(r),await a.loadModule(n),n.libraryResolver._moduleSingletons?.set(r.uri,a)),n.globalScope[t]={value:a},p}async function We(n,e){if(await h(n,e.declaration),e.declaration.type==="FunctionDeclaration")n.exports[w(e.declaration.id)]="function";else if(e.declaration.type==="VariableDeclaration")for(const t of e.declaration.declarations)n.exports[w(t.id)]="variable";return p}async function ie(n,e,t){return t>=e.declarations.length?p:(await qe(n,e.declarations[t]),t===e.declarations.length-1||await ie(n,e,t+1),p)}async function qe(n,e){let t=null;if(t=e.init===null?null:await u(n,e.init),n.localScope!==null){if(t===p&&(t=null),e.id.type!=="Identifier")throw new i(n,l.InvalidIdentifier,e);const a=w(e.id);return void(n.localScope!=null&&(n.localScope[a]={value:t}))}if(e.id.type!=="Identifier")throw new i(n,l.InvalidIdentifier,e);const r=w(e.id);t===p&&(t=null),n.globalScope[r]={value:t}}async function ze(n,e){const t=await u(n,e.object);if(t===null)throw new i(n,l.MemberOfNull,e);if(e.computed===!1){if(e.property.type==="Identifier"){if(t instanceof v||A(t))return t.field(e.property.name);if(t instanceof ne)return Z(t,e.property.name,n,e);if(t instanceof M){if(!t.hasGlobal(e.property.name))throw new i(n,l.InvalidIdentifier,e);return t.global(e.property.name)}throw new i(n,l.InvalidMemberAccessKey,e)}throw new i(n,l.InvalidMemberAccessKey,e)}let r=await u(n,e.property);if(t instanceof v||A(t)){if(d(r))return t.field(r);throw new i(n,l.InvalidMemberAccessKey,e)}if(t instanceof M){if(d(r))return t.global(r);throw new i(n,l.InvalidMemberAccessKey,e)}if(t instanceof ne){if(d(r))return Z(t,r,n,e);throw new i(n,l.InvalidMemberAccessKey,e)}if(C(t)){if(R(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new i(n,l.OutOfBounds,e);return t[r]}throw new i(n,l.InvalidMemberAccessKey,e)}if(O(t)){if(R(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length()+r),r>=t.length()||r<0)throw new i(n,l.OutOfBounds,e);return t.get(r)}throw new i(n,l.InvalidMemberAccessKey,e)}if(d(t)){if(R(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=t.length+r),r>=t.length||r<0)throw new i(n,l.OutOfBounds,e);return t[r]}throw new i(n,l.InvalidMemberAccessKey,e)}throw new i(n,l.InvalidMemberAccessKey,e)}async function _e(n,e){const t=await u(n,e.argument);if(F(t)){if(e.operator==="!")return!t;if(e.operator==="-")return-1*f(t);if(e.operator==="+")return 1*f(t);if(e.operator==="~")return~f(t);throw new i(n,l.UnsupportedUnaryOperator,e)}if(e.operator==="-")return-1*f(t);if(e.operator==="+")return 1*f(t);if(e.operator==="~")return~f(t);throw new i(n,l.UnsupportedUnaryOperator,e)}async function Te(n,e){const t=[];for(let r=0;r<e.elements.length;r++)t.push(await u(n,e.elements[r]));for(let r=0;r<t.length;r++){if(b(t[r]))throw new i(n,l.NoFunctionInArray,e);t[r]===p&&(t[r]=null)}return t}async function Ye(n,e){const t=await u(n,e.left),r=await u(n,e.right);switch(e.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return we(f(t),f(r),e.operator);case"==":return D(t,r);case"!=":return!D(t,r);case"<":case">":case"<=":case">=":return pe(t,r,e.operator);case"+":return d(t)||d(r)?k(t)+k(r):f(t)+f(r);case"-":return f(t)-f(r);case"*":return f(t)*f(r);case"/":return f(t)/f(r);case"%":return f(t)%f(r);default:throw new i(n,l.UnsupportedOperator,e)}}async function He(n,e){const t=await u(n,e.left);if(!F(t))throw new i(n,l.LogicalExpressionOnlyBoolean,e);switch(e.operator){case"||":{if(t===!0)return t;const r=await u(n,e.right);if(F(r))return r;throw new i(n,l.LogicExpressionOrAnd,e)}case"&&":{if(t===!1)return t;const r=await u(n,e.right);if(F(r))return r;throw new i(n,l.LogicExpressionOrAnd,e)}default:throw new i(n,l.LogicExpressionOrAnd,e)}}function P(n,e){const t=w(e);if(n.localScope!=null&&n.localScope[t]!==void 0)return n.localScope[t].value;if(n.globalScope[t]!==void 0)return n.globalScope[t].value;throw new i(n,l.InvalidIdentifier,e)}async function Je(n,e){if(e.callee.type==="MemberExpression"){const r=await u(n,e.callee.object);if(!(r instanceof M))throw new i(n,l.FunctionNotFound,e);const a=e.callee.computed===!1?e.callee.property.name:await u(n,e.callee.property);if(!r.hasGlobal(a))throw new i(n,l.FunctionNotFound,e);const o=r.global(a);if(!b(o))throw new i(n,l.CallNonFunction,e);return o.call(n,e)}if(e.callee.type!=="Identifier")throw new i(n,l.FunctionNotFound,e);const t=w(e.callee);if(n.localScope!=null&&n.localScope[t]!==void 0){const r=n.localScope[t];if(b(r.value))return r.value.call(n,e);throw new i(n,l.CallNonFunction,e)}if(n.globalScope[t]!==void 0){const r=n.globalScope[t];if(b(r.value))return r.value.call(n,e);throw new i(n,l.CallNonFunction,e)}throw new i(n,l.FunctionNotFound,e)}async function Qe(n,e){let t="",r=0;for(const a of e.quasis)if(t+=a.value?a.value.cooked:"",a.tail===!1){if(e.expressions[r]){const o=await u(n,e.expressions[r]);if(b(o))throw new i(n,l.NoFunctionInTemplateLiteral,e);t+=k(o)}r++}return t}async function Xe(n,e){z(e.arguments===null?[]:e.arguments,3,3,n,e);const t=await u(n,e.arguments[0]);if(F(t)===!1)throw new i(n,l.BooleanConditionRequired,e);return u(n,t?e.arguments[1]:e.arguments[2])}async function $e(n,e){z(e.arguments===null?[]:e.arguments,2,3,n,e);const t=await u(n,e.arguments[0]);if(e.arguments.length===3){const r=await u(n,e.arguments[1]),a=Fe(t,r);return a!=null&&a!==""?a:u(n,e.arguments[2])}return t==null||t===""?u(n,e.arguments[1]):t}async function en(n,e){if(e.arguments.length<2)throw new i(n,l.WrongNumberOfParameters,e);if(e.arguments.length===2)return u(n,e.arguments[1]);if((e.arguments.length-1)%2==0)throw new i(n,l.WrongNumberOfParameters,e);return le(n,e,1,await u(n,e.arguments[0]))}async function le(n,e,t,r){const a=await u(n,e.arguments[t]);if(D(a,r))return u(n,e.arguments[t+1]);const o=e.arguments.length-t;return o===1?u(n,e.arguments[t]):o===2?null:o===3?u(n,e.arguments[t+2]):le(n,e,t+2,r)}async function nn(n,e){if(e.arguments.length<3)throw new i(n,l.WrongNumberOfParameters,e);if(e.arguments.length%2==0)throw new i(n,l.WrongNumberOfParameters,e);const t=await u(n,e.arguments[0]);if(F(t)===!1)throw new i(n,l.BooleanConditionRequired,e.arguments[0]);return se(n,e,0,t)}async function se(n,e,t,r){if(r===!0)return u(n,e.arguments[t+1]);if(e.arguments.length-t===3)return u(n,e.arguments[t+2]);const a=await u(n,e.arguments[t+2]);if(F(a)===!1)throw new i(n,l.ModuleExportNotFound,e.arguments[t+2]);return se(n,e,t+2,a)}function tn(){const n=Object.create(null);me(n,I),be(n,I),ve(n,I,P),Se(n,I),xe(n,I),Ie(n,I),Oe({functions:n,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:I,standardFunctionAsync:E}),n.iif=Xe,n.defaultvalue=$e,n.decode=en,n.when=nn;const e=function(){this.textformatting={value:v.textFormatting()}};e.prototype=Object.create(null),e.prototype.infinity=Object.freeze({value:Number.POSITIVE_INFINITY}),e.prototype.pi=Object.freeze({value:Math.PI});for(const[t,r]of Object.entries(n))e.prototype[t]=Object.freeze({value:new K(r)});return e}const ce=tn();function V(n){const e={mode:"async",compiled:!1,functions:Object.create(null),signatures:[],standardFunction:I,standardFunctionAsync:E,evaluateIdentifier:P};for(let t=0;t<n.length;t++)n[t].registerFunctions(e);for(const[t,r]of Object.entries(e.functions))ce.prototype[t]=Object.freeze({value:new K(r)});for(let t=0;t<e.signatures.length;t++)ye(e.signatures[t],"async")}function ue(n,e,t){const r=new ce;n==null&&(n={}),e==null&&(e={});for(const a in e)r[a]={value:new K(e[a])};for(const a in n)r[a]={value:ke(n[a])?Q.createFromGraphic(n[a],t):n[a]};return r}function fe(n){console.log(n)}async function rn(n,e){const t=e.spatialReference??ee.WebMercator;let r=null;n.usesModules&&(r=new J(new Map,n.loadedModules));const a=ue(e.vars,e.customfunctions,e.timeZone),o={spatialReference:t,services:e.services,exports:{},libraryResolver:r,abortSignal:e.abortSignal??W,globalScope:a,console:e.console??fe,timeZone:e.timeZone??null,lrucache:e.lrucache,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},s=await L(o,n);if(s instanceof g||s instanceof j){const c=s.value;if(q(c))return null;if(b(c))throw new i(o,l.IllegalResult,null);return c}if(q(s))return null;throw s===y?new i(o,l.IllegalResult,null):s===N?new i(o,l.IllegalResult,null):new i(o,l.NeverReach,null)}V([Me]),V([ge]);export{rn as executeScript,V as extend};
