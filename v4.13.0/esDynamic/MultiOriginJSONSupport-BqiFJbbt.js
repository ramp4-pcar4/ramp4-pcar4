import{gs as O,bZ as h,h as v,v as l,z as c,bR as u,gt as J,gu as N,b7 as g,en as A,n as d,gv as R,gw as b}from"./main-BFDurRCu.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(O),this._values=new Map,this.multipleOriginsSupported=!0}clone(r){const t=new _,s=this._originStores[h.DEFAULTS];s&&s.forEach((i,e)=>{t.set(e,v(i),h.DEFAULTS)});for(let i=h.SERVICE;i<O;i++){const e=this._originStores[i];e&&e.forEach((o,n)=>{r&&r.has(n)||t.set(n,v(o),i)})}return t}get(r,t){const s=t===void 0?this._values:this._originStores[t];return s?s.get(r):void 0}keys(r){const t=r==null?this._values:this._originStores[r];return t?[...t.keys()]:[]}set(r,t,s=h.USER){let i=this._originStores[s];if(i||(i=new Map,this._originStores[s]=i),i.set(r,t),!this._values.has(r)||this._propertyOriginMap.get(r)<=s){const e=this._values.get(r);return this._values.set(r,t),this._propertyOriginMap.set(r,s),e!==t}return!1}delete(r,t=h.USER){const s=this._originStores[t];if(!s)return;const i=s.get(r);if(s.delete(r),this._values.has(r)&&this._propertyOriginMap.get(r)===t){this._values.delete(r);for(let e=t-1;e>=0;e--){const o=this._originStores[e];if(o&&o.has(r)){this._values.set(r,o.get(r)),this._propertyOriginMap.set(r,e);break}}}return i}has(r,t){const s=t===void 0?this._values:this._originStores[t];return!!s&&s.has(r)}revert(r,t){for(;t>0&&!this.has(r,t);)--t;const s=this._originStores[t],i=s?.get(r),e=this._values.get(r);return this._values.set(r,i),this._propertyOriginMap.set(r,t),e!==i}originOf(r){return this._propertyOriginMap.get(r)||h.DEFAULTS}isAtOrigin(r,t){return this.has(r,t)&&this.originOf(r)===t}isBelowOrigin(r,t){return!this.has(r)||this.originOf(r)<t}forEach(r){this._values.forEach(r)}}const y=a=>{let r=class extends a{constructor(...t){super(...t);const s=u(this),i=s.store,e=new _;s.store=e,J(s,i,e)}read(t,s){N(this,t,s)}getAtOrigin(t,s){const i=S(this),e=g(s);if(typeof t=="string")return i.get(t,e);const o={};return t.forEach(n=>{o[n]=i.get(n,e)}),o}originOf(t){return A(this.originIdOf(t))}originIdOf(t){return S(this).originOf(t)}revert(t,s){const i=S(this),e=g(s),o=u(this);let n;n=typeof t=="string"?t==="*"?i.keys(e):[t]:t,n.forEach(p=>{o.invalidate(p),i.revert(p,e),o.commit(p)})}};return r=l([c("esri.core.ReadOnlyMultiOriginJSONSupport")],r),r};function S(a){return u(a).store}let M=class extends y(d){};M=l([c("esri.core.ReadOnlyMultiOriginJSONSupport")],M);const m=a=>{let r=class extends a{constructor(...t){super(...t)}clear(t,s="user"){u(this).clearOrigin(t,g(s))}write(t,s){return R(this,t=t||{},s),t}setAtOrigin(t,s,i){u(this).setAtOrigin(t,s,g(i))}removeOrigin(t){const s=E(this),i=g(t),e=s.keys(i);for(const o of e)s.originOf(o)===i&&s.set(o,s.get(o,i),h.USER)}updateOrigin(t,s){const i=E(this),e=g(s),o=b(this,t);for(let n=e+1;n<O;++n)i.delete(t,n);i.set(t,o,e)}toJSON(t){return this.write({},t)}};return r=l([c("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],r),r.prototype.toJSON.isDefaultToJSON=!0,r};function E(a){return u(a).store}const w=a=>{let r=class extends m(y(a)){constructor(...t){super(...t)}};return r=l([c("esri.core.MultiOriginJSONSupport")],r),r};let f=class extends w(d){};f=l([c("esri.core.MultiOriginJSONSupport")],f);export{w as S,f as a};
