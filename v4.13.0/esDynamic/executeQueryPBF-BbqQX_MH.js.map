{"version":3,"file":"executeQueryPBF-BbqQX_MH.js","sources":["../../node_modules/@arcgis/core/rest/query/executeForExtent.js","../../node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js","../../node_modules/@arcgis/core/rest/query/executeQueryPBF.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../geometry/Extent.js\";import{parseUrl as o}from\"../utils.js\";import{executeQueryForExtent as r}from\"./operations/query.js\";import n from\"../support/Query.js\";async function a(a,m,e){const i=o(a),s=await r(i,n.from(m),{...e}),u=s.data.extent;return!u||isNaN(u.xmin)||isNaN(u.ymin)||isNaN(u.xmax)||isNaN(u.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:t.fromJSON(u)}}export{a as executeForExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{assertIsSome as e}from\"../../../core/maybe.js\";import{getGeometryZScaler as t}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as r,convertToGeometry as s}from\"../../../layers/graphics/featureConversionUtils.js\";function o(e,t){return t}function i(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):l(e,t+s,1)}}function n(e,t,r,s){return 2===r?u(e,t,2):i(e,t,r,s)}function a(e,t,r,s){return 2===r?0===t?0:u(e,t,3):i(e,t,r,s)}function h(e,t,r,s){return 3===r?0===t?0:u(e,t,3):n(e,t,r,s)}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class d{constructor(e){this._options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=o,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=t(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=r)for(const t of e.features)r(t.geometry)}createSpatialReference(){return{}}addField(t,r){const s=t.fields;e(s),s.push(r);const o=s.map((e=>e.name));this._attributesConstructor=function(){for(const e of o)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=this._transform?r(o.clone(),o,!1,!1,this._transform):o.clone(),a=s(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const s=this._transform;switch(t=this._applyTransform(s,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const s=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(s,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0===this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:i}}export{d as JSONFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t,s){const p=await n(r,a.from(e),t,s);return o.fromJSON(p)}async function n(o,s,n,p){const i=r(o),u={...n},m=a.from(s),f=!m.quantizationParameters,{data:c}=await t(i,m,new e({sourceSpatialReference:m.sourceSpatialReference,applyTransform:f}),u,p);return c}export{s as executeQueryPBF,n as executeRawQueryPBF};\n"],"names":["a","m","i","o","r","n","u","t","e","s","l","h","d","p","f","c"],"mappings":"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","x_google_ignoreList":[0,1,2]}