import{dS as h,dT as S}from"./main-BFDurRCu.js";import{P as T,j as E,a as x,f as G,x as P}from"./Point2D-CaHJVGk1.js";import{w}from"./OperatorShapePreservingLength-CqNxsr-k.js";import{H as v,K as C,b as D,m as X,A as q,T as L,q as Y,Z as b,C as A,D as j}from"./ProjectionTransformation-DQ4GElxa.js";class I{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,n,u){return!1}canAccelerateGeometry(t){return!1}execute(t,n,u,a){if(u===4)return new w().execute(t,n,a);if(n.getCoordinateSystemType()===0&&T(""),E(t),t.isEmpty()||t.getDimension()<1)return 0;const s=n.getGCS(),r=v();s.querySpheroidData(r);const c=r.majorSemiAxis,g=r.e2,m=s.getUnit().getUnitToBaseFactor();let e;const o=t.getGeometryType();if(o===x.enumPolygon?e=t.getBoundary():o===x.enumEnvelope?e=C(t):G(o)?(e=new D({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new X().execute(e,0,n.getTolerance(0),0,a)),s!==n){const i=n.getSRToGCSTransform();if(n.isPannable()){e=q(e,n),o===x.enumPolyline&&e===t&&(e=t.clone());const d=new P;n.getPannableExtent().queryIntervalX(d);for(let l=0,f=e.getPointCount();l<f;l++){const y=e.getXY(l);y.x=L(y.x,d),e.setXY(l,y)}}const p=e.createInstance();e=b(i,e,p,a)?p:new Y().execute(e,i,a)}return this._ExecuteMultiPathGeodeticLength(e,u,c,g,m)}_ExecuteMultiPathGeodeticLength(t,n,u,a,s){const r={stack:[],error:void 0,hasError:!1};try{const c=h(r,new A,!1);let g=0;const m=t.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),o=e.getStartXY(),i=e.getEndXY();o.scale(s),i.scale(s),j.geodeticDistance(u,a,o.x,o.y,i.x,i.y,c,null,null,n),g+=c.val}return g}catch(c){r.error=c,r.hasError=!0}finally{S(r)}}}export{I as OperatorGeodeticLength};
