import{b as Il,aW as $,aA as gl,db as j,dX as z,jv as yl,aY as Tl,dZ as G,ao as Nl,aR as Ol}from"./main-BFDurRCu.js";import{i as K,r as W}from"./TimeOnly-CGkId3bj.js";import{i as et,o as tt,e as ge}from"./UnknownTimeZone-DxjyzFvs.js";var p;(function(s){s.InvalidFunctionParameters="InvalidFunctionParameters",s.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",s.UnsupportedSqlFunction="UnsupportedSqlFunction",s.UnsupportedOperator="UnsupportedOperator",s.UnsupportedSyntax="UnsupportedSyntax",s.UnsupportedIsRhs="UnsupportedIsRhs",s.UnsupportedIsLhs="UnsupportedIsLhs",s.InvalidDataType="InvalidDataType",s.CannotCastValue="CannotCastValue",s.FunctionNotRecognized="FunctionNotRecognized",s.InvalidTime="InvalidTime",s.InvalidParameterCount="InvalidParameterCount",s.InvalidTimeStamp="InvalidTimeStamp",s.InvalidDate="InvalidDate",s.InvalidOperator="InvalidOperator",s.IllegalInterval="IllegalInterval",s.YearMonthIntervals="YearMonthIntervals",s.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",s.MissingStatisticParameters="MissingStatisticParameters"})(p||(p={}));const Sl={[p.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[p.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[p.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[p.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[p.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[p.UnsupportedOperator]:"Unsupported operator - {operator}",[p.UnsupportedSyntax]:"Unsupported syntax - {node}",[p.UnsupportedSqlFunction]:"Sql function not found = {function}",[p.InvalidDataType]:"Invalid sql data type",[p.InvalidDate]:"Invalid date encountered",[p.InvalidOperator]:"Invalid operator encountered",[p.InvalidTime]:"Invalid time encountered",[p.IllegalInterval]:"Illegal interval",[p.FunctionNotRecognized]:"Function not recognized",[p.InvalidTimeStamp]:"Invalid timestamp encountered",[p.InvalidParameterCount]:"Invalid parameter count for call to {name}",[p.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[p.YearMonthIntervals]:"Year-Month Intervals not supported",[p.CannotCastValue]:"Cannot cast value to the required data type"};let h=class Yn extends Error{constructor(a,t){super(Il(Sl[a],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,Yn)}};function In(s){return Number.isNaN(s)||s===0?s:Math.trunc(s)}const gn="esri.core.sql.SqlTimeStampOffset";let X=class pe{constructor(a){this._timeStampOffset=a,this.declaredRootClass=gn,this._date=null}static isTimestampOffset(a){return typeof a=="object"&&a!=null&&"declaredRootClass"in a&&a.declaredRootClass===gn}toDateTime(){return this._date??=$.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return In(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return In(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return pe.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(a){return new pe($.fromJSDate(a).toISO({includeOffset:!0}))}static fromDateTime(a){return new pe(a.toISO({includeOffset:!0}))}static fromParts(a,t,i=0,f=0,w=0,y=0,T=0,S=!1,F=0,b=0){const H=`${a.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${i.toString().padStart(2,"0")}`;let C="";y<10&&(C="0");let D=`${f.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${C+y.toString()}`;T!==0&&(D+="."+T.toString().padStart(3,"0"));const Y=`${S?"-":"+"}${F.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`;return new pe(H+"T"+D+Y)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let a=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return a&&(a=a.replace(".000","")),a}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(a){const t=this.toDateTime().plus(a);return pe.fromDateTime(t)}};function yn(s,a){const t=Nn[s.toLowerCase()];if(t==null)throw new h(p.FunctionNotRecognized);if(a.length<t.minParams||a.length>t.maxParams)throw new h(p.InvalidParameterCount,{name:s.toUpperCase()});return t.evaluate(a)}function Tn(s,a){const t=Nn[s.toLowerCase()];return t!=null&&a>=t.minParams&&a<=t.maxParams}const Nn={min:{minParams:1,maxParams:1,evaluate:s=>Sn(s[0],"min")},max:{minParams:1,maxParams:1,evaluate:s=>Sn(s[0],"max")},avg:{minParams:1,maxParams:1,evaluate:s=>On(s[0])},sum:{minParams:1,maxParams:1,evaluate:s=>xl(s[0])},stddev:{minParams:1,maxParams:1,evaluate:s=>El(s[0])},count:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].length},var:{minParams:1,maxParams:1,evaluate:s=>xn(s[0])}};function On(s){if(s===null)return null;let a=0,t=0;for(let i=0;i<s.length;i++){const f=s[i];if(f!==null){if(!nt(f))throw new h(p.InvalidValueForAggregateFunction);t++,a+=f}}return t===0?null:a/s.length}function nt(s){return typeof s=="number"}function Sn(s,a){if(s===null)return null;let t=null,i=null;for(const f of s){let w=f;w=K.isDateOnly(f)||W.isTimeOnly(f)?f.toNumber():$.isDateTime(f)?f.toMillis():X.isTimestampOffset(f)?f.toMilliseconds():f,(t===null||a==="max"&&i!==null&&w!==null&&i<=w||a==="min"&&i!==null&&w!==null&&i>=w)&&(t=f,i=w)}return t}function xl(s){if(s===null)return null;let a=0;for(let t=0;t<s.length;t++){const i=s[t];if(i!==null){if(!nt(i))throw new h(p.InvalidValueForAggregateFunction);a+=i}}return a}function El(s){if(s===null)return null;const a=xn(s);return a===null?null:Math.sqrt(a)}function xn(s){if(s===null||(s=s.filter(i=>i!==null)).length===0)return null;const a=On(s);if(a===null)return null;let t=0;for(const i of s){if(!nt(i))throw new h(p.InvalidValueForAggregateFunction);t+=(a-i)**2}return t/(s.length-1)}function rt(s){if(s.precision!==null||s.secondary!==null)throw new h(p.PrimarySecondaryQualifiers)}function Ue(s,a){if(a.includes(".")){const t=a.split(".");s.second=parseFloat(t[0]),s.millis=parseInt(t[1],10)}else s.second=parseFloat(a)}const En="esri.core.sql.SqlInterval";class U{constructor(){this.declaredRootClass=En,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(a){return typeof a=="object"&&a!=null&&"declaredRootClass"in a&&a.declaredRootClass===En}static createFromMilliseconds(a){const t=new U;return t.second=a/1e3,t}static createFromValueAndQualifier(a,t,i){let f=null;const w=new U;if(w.op=i==="-"?"-":"+",t.type==="interval-period"){rt(t);const y=new RegExp("^[0-9]{1,}$");if(t.period==="year"||t.period==="month")throw new h(p.YearMonthIntervals);if(t.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(a))throw new h(p.IllegalInterval);Ue(w,a)}else{if(!y.test(a))throw new h(p.IllegalInterval);w[t.period]=parseFloat(a)}}else{if(rt(t.start),rt(t.end),t.start.period==="year"||t.start.period==="month"||t.end.period==="year"||t.end.period==="month")throw new h(p.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(f=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!f.test(a))throw new h(p.IllegalInterval);w[t.start.period]=parseFloat(a.split(" ")[0]),w[t.end.period]=parseFloat(a.split(" ")[1]);break;case"minute":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!f.test(a))throw new h(p.IllegalInterval);{w[t.start.period]=parseFloat(a.split(" ")[0]);const y=a.split(" ")[1].split(":");w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1])}break;case"second":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(a))throw new h(p.IllegalInterval);{w[t.start.period]=parseFloat(a.split(" ")[0]);const y=a.split(" ")[1].split(":");w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1]),Ue(w,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!f.test(a))throw new h(p.IllegalInterval);w.hour=parseFloat(a.split(":")[0]),w.minute=parseFloat(a.split(":")[1]);break;case"second":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(a))throw new h(p.IllegalInterval);{const y=a.split(":");w.hour=parseFloat(y[0]),w.minute=parseFloat(y[1]),Ue(w,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"minute":if(t.end.period!=="second")throw new h(p.IllegalInterval);if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(a))throw new h(p.IllegalInterval);{const y=a.split(":");w.minute=parseFloat(y[0]),Ue(w,y[1])}break;default:throw new h(p.IllegalInterval)}}return w}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const Cl=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,Dl=/^(\d{1,2}):(\d{1,2})$/,bl=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,Cn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Ml=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,_l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Fl=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Al=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function Ve(s,a){if(a instanceof gl)return a===tt.instance?$.fromMillis(s.getTime(),{zone:tt.instance}):$.fromJSDate(s,{zone:a});switch(a){case"system":case"local":case null:return $.fromJSDate(s);default:return a?.toLowerCase()==="unknown"?$.fromMillis(s.getTime(),{zone:tt.instance}):$.fromJSDate(s,{zone:a})}}function se(s){return U.isInterval(s)}function A(s){return $.isDateTime(s)}function P(s){return K.isDateOnly(s)}function R(s){return W.isTimeOnly(s)}function L(s){return X.isTimestampOffset(s)}function ke(s){let a=Cl.exec(s);if(a!==null){const[,t,i,f]=a,w=W.fromParts(parseInt(t,10),parseInt(i,10),parseInt(f,10),0);if(w!==null)return w;throw new h(p.InvalidTime)}if(a=Dl.exec(s),a!==null){const[,t,i]=a,f=W.fromParts(parseInt(t,10),parseInt(i,10),0,0);if(f!==null)return f;throw new h(p.InvalidTime)}if(a=bl.exec(s),a!==null){const[,t,i,f,w]=a,y=W.fromParts(parseInt(t,10),parseInt(i,10),parseInt(f,10),parseInt(w,10));if(y!==null)return y;throw new h(p.InvalidTime)}throw new h(p.InvalidTime)}function ye(s,a,t=!1){let i=Ml.exec(s);if(i!==null){const[,f,w,y,T,S,F,b]=i,H=$.fromObject({year:parseInt(f,10),month:parseInt(w,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt(S,10),second:parseInt(F,10),millisecond:b?parseInt(b.replace(".",""),10):0},{zone:et(a)});if(H.isValid===!1)throw new h(p.InvalidTimeStamp);return H}if(i=_l.exec(s),i!==null){const[,f,w,y,T,S,F,b,H,C,D]=i,Y=X.fromParts(parseInt(f,10),parseInt(w,10),parseInt(y,10),parseInt(T,10),parseInt(S,10),parseInt(F,10),b?parseInt(b.replace(".",""),10):0,H==="-",parseInt(C,10),parseInt(D,10));if(Y.isValid===!1)throw new h(p.InvalidTimeStamp);return Y}if(i=Fl.exec(s),i!==null){const[,f,w,y,T,S,F,b,H]=i,C=X.fromParts(parseInt(f,10),parseInt(w,10),parseInt(y,10),parseInt(T,10),parseInt(S,10),0,0,F==="-",parseInt(b,10),parseInt(H,10));if(C.isValid===!1)throw new h(p.InvalidTimeStamp);return C}if(i=Al.exec(s),i!==null){const[,f,w,y,T,S]=i,F=$.fromObject({year:parseInt(f,10),month:parseInt(w,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt(S,10),second:0},{zone:et(a)});if(F.isValid===!1)throw new h(p.InvalidTimeStamp);return F}if(i=Cn.exec(s),i!==null){const[,f,w,y]=i,T=$.fromObject({year:parseInt(f,10),month:parseInt(w,10),day:parseInt(y,10),hour:0,minute:0,second:0},{zone:et(a)});if(T.isValid===!1)throw new h(p.InvalidTimeStamp);return T}throw new h(p.InvalidTimeStamp)}function at(s,a){const t=Cn.exec(s);if(t===null)try{return ye(s,a)}catch{throw new h(p.InvalidDate)}const[,i,f,w]=t,y=K.fromParts(parseInt(i,10),parseInt(f,10),parseInt(w,10));if(y===null)throw new h(p.InvalidDate);return y}const Pl=321408e5,Ll=26784e5,Rl=864e5,$l=36e5,Ul=6e4;function ut(s){return!!A(s)||!!L(s)}function st(s){return!!A(s)||!!P(s)||!!L(s)||!!R(s)}function ze(s){if(A(s))return s.toMillis();if(P(s))return s.toNumber();if(L(s))return s.toMilliseconds();throw new h(p.InvalidDataType)}function J(s,a,t){if(s==null||a==null)return null;if(j(s)){if(j(a))return te(s,a,t);if(z(a))return Vl(s,a,t);if(st(a))throw new h(p.InvalidOperator);if(P(a))throw new h(p.InvalidOperator)}else if(z(s)){if(j(a))return kl(s,a,t);if(z(a))return zl(s,a,t);if(A(a))throw new h(p.InvalidOperator);if(P(a))throw new h(p.InvalidOperator);if(R(a))throw new h(p.InvalidOperator);if(L(a))throw new h(p.InvalidOperator)}else if(A(s)){if(ut(a)){if(ge(s.zone)){if($.isDateTime(a)&&!ge(a.zone)||X.isTimestampOffset(a))return ot(s,a,t)}else if($.isDateTime(a)&&ge(a.zone)&&(!ge(s.zone)||X.isTimestampOffset(s)))return ot(s,a,t);return te(ze(s),ze(a),t)}if(z(a))throw new h(p.InvalidOperator);if(P(a))return Zl(s,a,t);if(R(a))throw new h(p.InvalidOperator);if(j(a))throw new h(p.InvalidOperator)}else if(P(s)){if(L(a))return Yl(s,a,t);if(A(a))return Hl(s,a,t);if(z(a))throw new h(p.InvalidOperator);if(P(a))return te(s.toNumber(),a.toNumber(),t);if(R(a))throw new h(p.InvalidOperator);if(j(a))throw new h(p.InvalidOperator)}else if(R(s)){if(R(a))return te(s.toNumber(),a.toNumber(),t);if(z(a))throw new h(p.InvalidOperator);if(j(a))throw new h(p.InvalidOperator);if(P(a))throw new h(p.InvalidOperator);if(ut(a))throw new h(p.InvalidOperator)}else if(L(s)){if(ut(a))return $.isDateTime(a)&&ge(a.zone)?ot(s,a,t):te(ze(s),ze(a),t);if(z(a))throw new h(p.InvalidOperator);if(P(a))return ql(s,a,t);if(R(a))throw new h(p.InvalidOperator);if(j(a))throw new h(p.InvalidOperator)}switch(t){case"<>":return s!==a;case"=":return s===a;case">":return s>a;case"<":return s<a;case">=":return s>=a;case"<=":return s<=a}}function te(s,a,t){switch(t){case"<>":return s!==a;case"=":return s===a;case">":return s>a;case"<":return s<a;case">=":return s>=a;case"<=":return s<=a}}function Vl(s,a,t){const i=parseFloat(a);if(!isNaN(i))return te(s,i,t);const f=s.toString();switch(t){case"<>":return f!==a;case"=":return f===a;case">":return f>a;case"<":return f<a;case">=":return f>=a;case"<=":return f<=a}}function kl(s,a,t){const i=parseFloat(s);if(!isNaN(i))return te(i,a,t);const f=a.toString();switch(t){case"<>":return s!==f;case"=":return s===f;case">":return s>f;case"<":return s<f;case">=":return s>=f;case"<=":return s<=f}}function zl(s,a,t){switch(t){case"<>":return s!==a;case"=":return s===a;case">":return s>a;case"<":return s<a;case">=":return s>=a;case"<=":return s<=a}}function Zl(s,a,t){const i=a.toDateTimeLuxon(s.zone);return te((s=s.startOf("day")).toMillis(),i.toMillis(),t)}function ql(s,a,t){const i=a.toDateTimeLuxon(s.toDateTime().zone);return te((s=s.startOfDay()).toMilliseconds(),i.toMillis(),t)}function Hl(s,a,t){const i=s.toDateTimeLuxon(a.zone);return a=a.startOf("day"),te(i.toMillis(),a.toMillis(),t)}function Yl(s,a,t){const i=s.toDateTimeLuxon(a.toDateTime().zone);return a=a.startOfDay(),te(i.toMillis(),a.toMilliseconds(),t)}function ot(s,a,t){X.isTimestampOffset(s)&&(s=s.toDateTime()),X.isTimestampOffset(a)&&(a=a.toDateTime());const i=Dn(s),f=Dn(a);switch(t){case"<>":return i!==f;case"=":return i===f;case">":return i>f;case"<":return i<f;case">=":return i>=f;case"<=":return i<=f}}function Dn(s){return s.year*Pl+s.month*Ll+s.day*Rl+s.hour*$l+s.minute*Ul+1e3*s.second+s.millisecond}function it(s,a,t){const i=Mn[s.toLowerCase()];if(i==null)throw new h(p.FunctionNotRecognized);if(a.length<i.minParams||a.length>i.maxParams)throw new h(p.InvalidParameterCount,{name:s.toUpperCase()});return i.evaluate(a,t)}function jl(s,a){const t=Mn[s.toLowerCase()];return t!=null&&a>=t.minParams&&a<=t.maxParams}function lt(s){return!G(s)&&!P(s)&&!A(s)&&!R(s)&&!L(s)}function bn(s){return P(s)||R(s)?s.toString():L(s)?s.toSQLValue():A(s)?s.millisecond===0?s.toFormat("yyyy-LL-dd HH:mm:ss"):s.toSQL({includeOffset:!1}):G(s)?bn($.fromJSDate(s)):s.toString()}function Wl(s){if(G(s))return K.fromDateJS(s);if(A(s))return K.fromParts(s.year,s.month,s.day);if(P(s))return s;if(R(s))throw new h(p.CannotCastValue);if(L(s)&&K.fromParts(s.year,s.month,s.day)===null)throw new h(p.CannotCastValue);if(z(s)){const a=K.fromReader(s);if(a!==null&&a.isValid)return a}throw new h(p.CannotCastValue)}function Jl(s,a,t){if(G(s))return Ve(s,a);if(A(s))return s;if(P(s))return s.toDateTimeLuxon("unknown");if(R(s))throw new h(p.CannotCastValue);if(L(s))return s;if(z(s))return ye(s,"unknown",t);throw new h(p.CannotCastValue)}function Ql(s){if(G(s))return W.fromDateJS(s);if(A(s))return W.fromDateTime(s);if(P(s))throw new h(p.CannotCastValue);if(R(s))return s;if(L(s))return W.fromSqlTimeStampOffset(s);if(z(s))return ke(s);throw new h(p.CannotCastValue)}const Mn={extract:{minParams:2,maxParams:2,evaluate:([s,a])=>{if(a==null)return null;if(G(a))switch(s.toUpperCase()){case"SECOND":return a.getSeconds();case"MINUTE":return a.getMinutes();case"HOUR":return a.getHours();case"DAY":return a.getDate();case"MONTH":return a.getMonth()+1;case"YEAR":return a.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return $.fromJSDate(a,{zone:"system"}).weekday;case"DOY":return $.fromJSDate(a,{zone:"system"}).ordinal;case"WEEK":return $.fromJSDate(a,{zone:"system"}).weekNumber}else if(A(a))switch(s.toUpperCase()){case"SECOND":return a.second;case"MINUTE":return a.minute;case"HOUR":return a.hour;case"DAY":return a.day;case"MONTH":return a.month;case"YEAR":return a.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return a.weekday;case"DOY":return a.ordinal;case"WEEK":return a.weekNumber}else if(P(a))switch(s.toUpperCase()){case"DAY":return a.day;case"MONTH":return a.month;case"YEAR":return a.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return a.toDateTime("unknown").weekday;case"DOY":return a.toDateTime("unknown").ordinal;case"WEEK":return a.toDateTime("unknown").weekNumber}else if(R(a))switch(s.toUpperCase()){case"SECOND":return a.second;case"MINUTE":return a.minute;case"HOUR":return a.hour}else if(L(a))switch(s.toUpperCase()){case"SECOND":return a.second;case"MINUTE":return a.minute;case"HOUR":return a.hour;case"DAY":return a.day;case"MONTH":return a.month;case"YEAR":return a.year;case"TIMEZONE_HOUR":return a.timezoneOffsetHour;case"TIMEZONE_MINUTE":return a.timezoneOffsetMinutes;case"DOW":return a.toDateTime().weekday;case"DOY":return a.toDateTime().ordinal;case"WEEK":return a.toDateTime().weekNumber}throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:s=>{if(s.length===2){const[a,t]=s;return a==null||t==null?null:a.toString().substring(t-1)}if(s.length===3){const[a,t,i]=s;return a==null||t==null||i==null?null:i<=0?"":a.toString().substring(t-1,t+i-1)}}},position:{minParams:2,maxParams:2,evaluate:([s,a])=>s==null||a==null?null:a.indexOf(s)+1},trim:{minParams:2,maxParams:3,evaluate:s=>{const a=s.length===3,t=a?s[1]:" ",i=a?s[2]:s[1];if(t==null||i==null)return null;const f=`(${Tl(t)})`;switch(s[0]){case"BOTH":return i.replaceAll(new RegExp(`^${f}*|${f}*$`,"g"),"");case"LEADING":return i.replaceAll(new RegExp(`^${f}*`,"g"),"");case"TRAILING":return i.replaceAll(new RegExp(`${f}*$`,"g"),"")}throw new h(p.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.abs(s[0])},ceiling:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.ceil(s[0])},floor:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.floor(s[0])},log:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.log(s[0])},log10:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.log(s[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.sin(s[0])},cos:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.cos(s[0])},tan:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.tan(s[0])},asin:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.asin(s[0])},acos:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.acos(s[0])},atan:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.atan(s[0])},sign:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0]>0?1:s[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:s=>s[0]==null||s[1]==null?null:s[0]**s[1]},mod:{minParams:2,maxParams:2,evaluate:s=>s[0]==null||s[1]==null?null:s[0]%s[1]},round:{minParams:1,maxParams:2,evaluate:s=>{const a=s[0],t=s.length===2?10**s[1]:1;return a==null?null:Math.round(a*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:s=>s[0]==null?null:s.length===1||s[1]===0?Math.trunc(s[0]):yl("trunc",s[0],-Number(s[1]))},char_length:{minParams:1,maxParams:1,evaluate:s=>z(s[0])?s[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:s=>{let a="";for(let t=0;t<s.length;t++){if(s[t]==null)return null;a+=s[t].toString()}return a}},lower:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:s[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:s=>{for(const a of s)if(a!==null)return a;return null}},cosh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.cosh(s[0])},sinh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.sinh(s[0])},tanh:{minParams:1,maxParams:1,evaluate:s=>s[0]==null?null:Math.tanh(s[0])},nullif:{minParams:2,maxParams:2,evaluate:s=>J(s[0],s[1],"=")?null:s[0]},cast:{minParams:2,maxParams:2,evaluate:(s,a)=>{const t=s[0],i=s[1];if(t===null)return null;switch(i.type){case"integer":{if(!lt(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"smallint":{if(!lt(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);if(f>32767||f<-32767)throw new h(p.CannotCastValue);return f}case"float":case"real":{if(!lt(t))throw new h(p.CannotCastValue);const f=parseFloat(t);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"time":return Ql(t);case"date":return Wl(t);case"timestamp":return Jl(t,a,i.withtimezone===!0);case"varchar":{const f=bn(t);if(f.length>i.size)throw new h(p.CannotCastValue);return f}default:throw new h(p.InvalidDataType)}}}};function _n(s,a,t,i){if(s==="||")return it("concat",[a,t],i);if(a===null||t===null)return null;if(j(a)){if(j(t))return ct(a,t,s);if(se(t))return rc(a,t,s);if(R(t))return pc();if(P(t))return mc();if(L(t))return dc();if(A(t))return cc();if(z(t))return hc(a,t,s);throw new h(p.InvalidOperator)}if(P(a)){if(j(t))return ic(a,t,s);if(se(t))return ac(a,t,s);if(R(t))return Oc();if(P(t))return Nc(a,t,s);if(L(t))return Tc(a,t,s);if(A(t))return yc(a,t,s);if(z(t))return Rc();throw new h(p.InvalidOperator)}if(R(a)){if(j(t))return lc(a,t,s);if(se(t))return Xl(a,t,s);if(R(t))return _c();if(P(t))return bc();if(L(t))return Mc();if(A(t))return Dc();if(z(t))return $c();throw new h(p.InvalidOperator)}if(se(a)){if(j(t))return nc(a,t,s);if(se(t))return tc(a,t,s);if(R(t))return Gl(a,t,s);if(P(t))return Kl(a,t,s);if(L(t))return ec(a,t,s);if(A(t))return Bl(a,t,s);if(z(t))return Ic();throw new h(p.InvalidOperator)}if(A(a)){if(j(t))return oc(a,t,s);if(se(t))return uc(a,t,s);if(R(t))return Lc();if(P(t))return Ac(a,t,s);if(L(t))return Pc(a,t,s);if(A(t))return Fc(a,t,s);if(z(t))return Uc();throw new h(p.InvalidOperator)}if(L(a)){if(j(t))return fc(a,t,s);if(se(t))return sc(a,t,s);if(R(t))return Sc();if(P(t))return xc(a,t,s);if(L(t))return Cc(a,t,s);if(A(t))return Ec(a,t,s);if(z(t))return Vc();throw new h(p.InvalidOperator)}if(z(a)){if(j(t))return wc(a,t,s);if(se(t))return gc();if(R(t))return kc();if(P(t))return zc();if(L(t))return qc();if(A(t))return Zc();if(z(t))return vc(a,t,s);throw new h(p.InvalidOperator)}throw new h(p.InvalidOperator)}function ct(s,a,t){switch(t){case"+":return s+a;case"-":return s-a;case"*":return s*a;case"/":return s/a}throw new h(p.InvalidOperator)}function Bl(s,a,t){switch(t){case"+":return a.plus({milliseconds:s.valueInMilliseconds()});case"-":return s.valueInMilliseconds()-a.toMillis()}throw new h(p.InvalidOperator)}function Gl(s,a,t){if(t==="+")return a.plus("milliseconds",s.valueInMilliseconds());throw new h(p.InvalidOperator)}function Kl(s,a,t){if(t==="+")return a.plus("milliseconds",s.valueInMilliseconds());throw new h(p.InvalidOperator)}function Xl(s,a,t){switch(t){case"+":return s.plus("milliseconds",a.valueInMilliseconds());case"-":return s.plus("milliseconds",-1*a.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ec(s,a,t){if(t==="+")return a.addMilliseconds(s.valueInMilliseconds());throw new h(p.InvalidOperator)}function tc(s,a,t){switch(t){case"+":return U.createFromMilliseconds(s.valueInMilliseconds()+a.valueInMilliseconds());case"-":return U.createFromMilliseconds(s.valueInMilliseconds()-a.valueInMilliseconds());case"*":return U.createFromMilliseconds(s.valueInMilliseconds()*a.valueInMilliseconds());case"/":return U.createFromMilliseconds(s.valueInMilliseconds()/a.valueInMilliseconds())}throw new h(p.InvalidOperator)}function nc(s,a,t){switch(t){case"+":return U.createFromMilliseconds(s.valueInMilliseconds()+a);case"-":return U.createFromMilliseconds(s.valueInMilliseconds()-a);case"*":return U.createFromMilliseconds(s.valueInMilliseconds()*a);case"/":return U.createFromMilliseconds(s.valueInMilliseconds()/a)}throw new h(p.InvalidOperator)}function rc(s,a,t){switch(t){case"+":return U.createFromMilliseconds(s+a.valueInMilliseconds());case"-":return U.createFromMilliseconds(s-a.valueInMilliseconds());case"*":return U.createFromMilliseconds(s*a.valueInMilliseconds());case"/":return U.createFromMilliseconds(s/a.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ac(s,a,t){switch(t){case"+":return s.plus("milliseconds",a.valueInMilliseconds());case"-":return s.plus("milliseconds",-1*a.valueInMilliseconds())}throw new h(p.InvalidOperator)}function uc(s,a,t){switch(t){case"+":return s.plus({milliseconds:a.valueInMilliseconds()});case"-":return s.minus({milliseconds:a.valueInMilliseconds()})}throw new h(p.InvalidOperator)}function sc(s,a,t){switch(t){case"+":return s.addMilliseconds(a.valueInMilliseconds());case"-":return s.addMilliseconds(-1*a.valueInMilliseconds())}throw new h(p.InvalidOperator)}function oc(s,a,t){const i=1e3*a*24*60*60;switch(t){case"+":return s.plus({milliseconds:i});case"-":return s.minus({milliseconds:i})}throw new h(p.InvalidOperator)}function ic(s,a,t){const i=1e3*a*24*60*60;switch(t){case"+":return s.plus("milliseconds",i);case"-":return s.plus("milliseconds",-1*i)}throw new h(p.InvalidOperator)}function lc(s,a,t){const i=1e3*a*24*60*60;switch(t){case"+":return s.plus("milliseconds",i);case"-":return s.plus("milliseconds",-1*i)}throw new h(p.InvalidOperator)}function cc(s,a,t){throw new h(p.InvalidOperator)}function fc(s,a,t){const i=1e3*a*24*60*60;switch(t){case"+":return s.addMilliseconds(i);case"-":return s.addMilliseconds(-1*i)}throw new h(p.InvalidOperator)}function dc(s,a,t){throw new h(p.InvalidOperator)}function pc(s,a,t){throw new h(p.InvalidOperator)}function mc(s,a,t){throw new h(p.InvalidOperator)}function hc(s,a,t){const i=parseFloat(a);if(isNaN(i))throw new h(p.InvalidOperator);return ct(s,i,t)}function wc(s,a,t){const i=parseFloat(s);if(isNaN(i))throw new h(p.InvalidOperator);return ct(i,a,t)}function vc(s,a,t){if(t==="+")return s+a;throw new h(p.InvalidOperator)}function Ic(s,a,t){throw new h(p.InvalidOperator)}function gc(s,a,t){throw new h(p.InvalidOperator)}function yc(s,a,t){if(t==="-")return s.toDateTimeLuxon(a.zone).diff(a).as("days");throw new h(p.InvalidOperator)}function Tc(s,a,t){if(t==="-")return s.toDateTimeLuxon(a.toDateTime().zone).diff(a.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Nc(s,a,t){if(t==="-")return s.toDateTimeLuxon("UTC").diff(a.toDateTimeLuxon("UTC")).as("days");throw new h(p.InvalidOperator)}function Oc(s,a,t){throw new h(p.InvalidOperator)}function Sc(s,a,t){throw new h(p.InvalidOperator)}function xc(s,a,t){if(t==="-")return s.toDateTime().diff(a.toDateTimeLuxon(s.toDateTime().zone)).as("days");throw new h(p.InvalidOperator)}function Ec(s,a,t){if(t==="-")return s.toDateTime().diff(a).as("days");throw new h(p.InvalidOperator)}function Cc(s,a,t){if(t==="-")return s.toDateTime().diff(a.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Dc(s,a,t){throw new h(p.InvalidOperator)}function bc(s,a,t){throw new h(p.InvalidOperator)}function Mc(s,a,t){throw new h(p.InvalidOperator)}function _c(s,a,t){throw new h(p.InvalidOperator)}function Fc(s,a,t){if(t==="-")return s.diff(a).as("days");throw new h(p.InvalidOperator)}function Ac(s,a,t){if(t==="-")return s.diff(a.toDateTimeLuxon(s.zone)).as("days");throw new h(p.InvalidOperator)}function Pc(s,a,t){if(t==="-")return s.diff(a.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Lc(s,a,t){throw new h(p.InvalidOperator)}function Rc(s,a,t){throw new h(p.InvalidOperator)}function $c(s,a,t){throw new h(p.InvalidOperator)}function Uc(s,a,t){throw new h(p.InvalidOperator)}function Vc(s,a,t){throw new h(p.InvalidOperator)}function kc(s,a,t){throw new h(p.InvalidOperator)}function zc(s,a,t){throw new h(p.InvalidOperator)}function Zc(s,a,t){throw new h(p.InvalidOperator)}function qc(s,a,t){throw new h(p.InvalidOperator)}class ft extends SyntaxError{constructor(a,t,i,f){super(a),this.expected=t,this.found=i,this.location=f,this.name="SyntaxError"}format(a){let t="Error: "+this.message;if(this.location){let i=null;const f=a.find(S=>S.source===this.location.source);f&&(i=f.text.split(/\r\n|\n|\r/g));const w=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(w):w,T=this.location.source+":"+y.line+":"+y.column;if(i){const S=this.location.end,F="".padEnd(y.line.toString().length," "),b=i[w.line-1],H=(w.line===S.line?S.column:b.length+1)-w.column||1;t+=`
 --> `+T+`
`+F+` |
`+y.line+" | "+b+`
`+F+" | "+"".padEnd(w.column-1," ")+"".padEnd(H,"^")}else t+=`
 at `+T}return t}static buildMessage(a,t){function i(C){return C.codePointAt(0).toString(16).toUpperCase()}const f=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function w(C){return f?C.replace(f,D=>"\\u{"+i(D)+"}"):C}function y(C){return w(C.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+i(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+i(D)))}function T(C){return w(C.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,D=>"\\x0"+i(D)).replace(/[\x10-\x1F\x7F-\x9F]/g,D=>"\\x"+i(D)))}const S={literal:C=>'"'+y(C.text)+'"',class(C){const D=C.parts.map(Y=>Array.isArray(Y)?T(Y[0])+"-"+T(Y[1]):T(Y));return"["+(C.inverted?"^":"")+D.join("")+"]"+(C.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:C=>C.description};function F(C){return S[C.type](C)}function b(C){const D=C.map(F);if(D.sort(),D.length>0){let Y=1;for(let re=1;re<D.length;re++)D[re-1]!==D[re]&&(D[Y]=D[re],Y++);D.length=Y}switch(D.length){case 1:return D[0];case 2:return D[0]+" or "+D[1];default:return D.slice(0,-1).join(", ")+", or "+D[D.length-1]}}function H(C){return C?'"'+y(C)+'"':"end of input"}return"Expected "+b(a)+" but "+H(t)+" found."}}function Hc(s,a){const t={},i=(a=a!==void 0?a:{}).grammarSource,f={start:Pt};let w=Pt;const y="!",T="=",S=">=",F=">",b="<=",H="<>",C="!=",D="||",Y="@",re="'",wt="N'",Ne="''",jn=".",Wn="null",Jn="true",Qn="false",Bn="in",Gn="is",Kn="like",Xn="escape",er="not",tr="and",nr="or",rr="between",ar="from",ur="for",sr="substring",or="extract",ir="trim",lr="position",cr="timestamp",fr="date",dr="time",pr="leading",mr="trailing",hr="both",wr="cast",vr="as",Ir="integer",gr="int",yr="smallint",Tr="float",Nr="real",Or="varchar",Sr="to",xr="interval",Er="year",Cr="timezone_hour",Dr="timezone_minute",br="month",Mr="day",_r="hour",Fr="minute",Ar="second",Pr="dow",Lr="doy",Rr="week",$r="case",Ur="end",Vr="when",kr="then",zr="else",Zr=",",qr="(",Hr=")",vt="`",Yr=/^[<-=]/,Oe=/^[+\-]/,jr=/^[*\/]/,Wr=/^[A-Za-z_\x80-\uFFFF]/,Jr=/^[A-Za-z0-9_]/,It=/^[A-Za-z0-9_.\x80-\uFFFF]/,Qr=/^["]/,gt=/^[^']/,Br=/^[0-9]/,Gr=/^[eE]/,Kr=/^[ \t\n\r]/,yt=/^[^`]/,Xr=N("!",!1),ea=N("=",!1),ta=N(">=",!1),na=N(">",!1),ra=N("<=",!1),aa=N("<>",!1),ua=Q([["<","="]],!1,!1,!1),sa=N("!=",!1),Se=Q(["+","-"],!1,!1,!1),oa=N("||",!1),ia=Q(["*","/"],!1,!1,!1),la=Q([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1,!1),ca=Q([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),Tt=Q([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1,!1),fa=Q(['"'],!1,!1,!1),da=N("@",!1),Nt=N("'",!1),pa=N("N'",!1),Ot=N("''",!1),St=Q(["'"],!0,!1,!1),ma=N(".",!1),ha=Q([["0","9"]],!1,!1,!1),wa=Q(["e","E"],!1,!1,!1),va=N("NULL",!0),Ia=N("TRUE",!0),ga=N("FALSE",!0),ya=N("IN",!0),Ta=N("IS",!0),Na=N("LIKE",!0),Oa=N("ESCAPE",!0),Sa=N("NOT",!0),xa=N("AND",!0),Ea=N("OR",!0),Ca=N("BETWEEN",!0),Da=N("FROM",!0),ba=N("FOR",!0),Ma=N("SUBSTRING",!0),_a=N("EXTRACT",!0),Fa=N("TRIM",!0),Aa=N("POSITION",!0),Pa=N("TIMESTAMP",!0),La=N("DATE",!0),Ra=N("TIME",!0),$a=N("LEADING",!0),Ua=N("TRAILING",!0),Va=N("BOTH",!0),ka=N("CAST",!0),za=N("AS",!0),Za=N("INTEGER",!0),qa=N("INT",!0),Ha=N("SMALLINT",!0),Ya=N("FLOAT",!0),ja=N("REAL",!0),Wa=N("VARCHAR",!0),Ja=N("TO",!0),Qa=N("INTERVAL",!0),Ba=N("YEAR",!0),Ga=N("TIMEZONE_HOUR",!0),Ka=N("TIMEZONE_MINUTE",!0),Xa=N("MONTH",!0),eu=N("DAY",!0),tu=N("HOUR",!0),nu=N("MINUTE",!0),ru=N("SECOND",!0),au=N("DOW",!0),uu=N("DOY",!0),su=N("WEEK",!0),ou=N("CASE",!0),iu=N("END",!0),lu=N("WHEN",!0),cu=N("THEN",!0),fu=N("ELSE",!0),du=N(",",!1),pu=N("(",!1),mu=N(")",!1),hu=Q([" ","	",`
`,"\r"],!1,!1,!1),xt=N("`",!1),Et=Q(["`"],!0,!1,!1);function ef(e){return e}function wu(e){return{type:"expression-list",location:g(),value:e}}function Ct(e,n,u){return{op:n,expr:u,location:g()}}function vu(e,n){return ve(e,n)}function Dt(e,n,u){return{op:n,expr:u,location:g()}}function Iu(e,n){return ve(e,n)}function gu(e){return ml("NOT",e,g())}function yu(e,n){return n==""||n==null||n==null?e:n.type=="arithmetic"?ve(e,n.tail):wn(n.op,e,n.right,n.escape,g())}function bt(e,n){return{op:e,expr:n,location:g()}}function Tu(e){return{type:"arithmetic",tail:e}}function Nu(e,n){return{op:e+"NOT",right:n}}function Ou(e,n){return{op:e,right:n}}function Su(e,n,u){return B(g(),n,u)}function xu(e,n){return{op:"NOT"+e,right:n}}function Eu(e,n,u){return B(g(),n,u)}function Cu(e,n){return{op:e,right:n}}function Du(e){return e[0]+" "+e[2]}function bu(e){return e[0]+" "+e[2]}function Mu(e,n,u){return{op:e,right:n,escape:u.value}}function _u(e,n){return{op:e,right:n,escape:""}}function Fu(e,n){return{op:e,right:n}}function Au(e,n){return{op:e,right:n}}function Mt(e,n,u){return{op:n,expr:u,location:g()}}function Pu(e,n){return ve(e,n)}function _t(e,n,u){return{op:n,expr:u,location:g()}}function Lu(e,n){return ve(e,n)}function Ru(e){return e.paren=!0,e}function $u(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:g(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:g(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:g(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:g()}:{type:"column-reference",location:g(),table:"",column:e}}function Uu(e){return{type:"column-reference",location:g(),table:"",column:e,delimited:!0}}function tf(e){return e}function Vu(e,n){return e+n.join("")}function ku(e,n){return e+n.join("")}function nf(e){return e}function zu(e){return e.join("")}function Zu(){return'"'}function qu(e){return{type:"parameter",location:g(),value:e[1]}}function Hu(e,n){return B(g(),e,n)}function Yu(e,n){return B(g(),e,n)}function ju(e){return{type:"function",location:g(),name:"extract",args:e}}function Wu(e,n,u){return B(g(),e,n,...u?[u]:[])}function Ju(e,n,u){return B(g(),e,n,u)}function Qu(e){return{type:"function",location:g(),name:"substring",args:e}}function Bu(e,n){return B(g(),e,n)}function Gu(e,n){return B(g(),e,n)}function Ku(e){return{type:"function",location:g(),name:"cast",args:e}}function Xu(){return{type:"data-type",location:g(),value:{type:"integer"}}}function es(){return{type:"data-type",location:g(),value:{type:"smallint"}}}function ts(){return{type:"data-type",location:g(),value:{type:"float"}}}function ns(){return{type:"data-type",location:g(),value:{type:"real"}}}function rs(){return{type:"data-type",location:g(),value:{type:"date"}}}function as(){return{type:"data-type",location:g(),value:{type:"timestamp"}}}function us(){return{type:"data-type",location:g(),value:{type:"time"}}}function ss(e){return{type:"data-type",location:g(),value:{type:"varchar",size:parseInt(e)}}}function os(e,n,u){return B(g(),e,n,u)}function is(e,n){return B(g(),e,n)}function ls(e){return{type:"function",location:g(),name:"trim",args:e}}function cs(e){return{type:"string",location:g(),value:e??"BOTH"}}function fs(e,n){return B(g(),e,n)}function ds(e,n){return B(g(),e,n)}function ps(e){return{type:"function",location:g(),name:"position",args:e}}function ms(e,n){return{type:"function",location:g(),name:e,args:n}}function hs(e){return{type:"string",location:g(),value:e}}function ws(e){return e.type==="string"&&hl(e.value),{type:"timestamp",location:g(),value:e.value}}function vs(e){return e.type==="string"&&wl(e.value),{type:"time",location:g(),value:e.value}}function Is(e,n,u){return{type:"interval",location:g(),value:n,qualifier:u,op:e}}function gs(e,n){return{type:"interval",location:g(),value:e,qualifier:n,op:""}}function ys(e,n){return{type:"interval-qualifier",location:g(),start:e,end:n}}function Ts(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Ns(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Os(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Ss(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function xs(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function Es(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function Cs(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Ds(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function bs(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function Ms(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function _s(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function Fs(){return{type:"string",location:g(),value:"day"}}function As(){return{type:"string",location:g(),value:"hour"}}function Ps(){return{type:"string",location:g(),value:"minute"}}function Ls(){return{type:"string",location:g(),value:"month"}}function Rs(){return{type:"string",location:g(),value:"year"}}function $s(e){return parseFloat(e)}function Us(e){return parseFloat(e)}function Vs(e){return e.type==="string"&&vl(e.value),{type:"date",location:g(),value:e.value}}function ks(){return{type:"null",location:g(),value:null}}function zs(){return{type:"boolean",location:g(),value:!0}}function Zs(){return{type:"boolean",location:g(),value:!1}}function Ft(){return"'"}function qs(e){return{type:"string",location:g(),value:e.join("")}}function Hs(e,n){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:null,elseLocation:null}}function Ys(e,n,u){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:u.value,elseLocation:u.location}}function js(e){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:null,elseLocation:null}}function Ws(e,n){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:n.value,elseLocation:n.location}}function Js(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Qs(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Bs(e){return{type:"else-clause",location:g(),value:e}}function Gs(e){return{type:"number",location:g(),value:e}}function Ks(e,n,u){return parseFloat(e+n+u)}function Xs(e,n){return parseFloat(e+n)}function eo(e,n){return parseFloat(e+n)}function to(e){return parseFloat(e)}function no(e,n){return e[0]+n}function ro(e){return"."+(e??"")}function ao(e,n){return e+n}function uo(e){return e.join("")}function so(e,n){return"e"+(n===null?"":n)}function oo(){return"IN"}function io(){return"IS"}function lo(){return"LIKE"}function co(){return"ESCAPE"}function fo(){return"NOT"}function po(){return"AND"}function mo(){return"OR"}function ho(){return"BETWEEN"}function wo(){return"FROM"}function vo(){return"FOR"}function Io(){return"SUBSTRING"}function go(){return"EXTRACT"}function yo(){return"TRIM"}function To(){return"POSITION"}function No(){return"TIMESTAMP"}function Oo(){return"DATE"}function So(){return"TIME"}function xo(){return"LEADING"}function Eo(){return"TRAILING"}function Co(){return"BOTH"}function Do(){return"CAST"}function bo(){return"AS"}function Mo(){return"INTEGER"}function _o(){return"INT"}function Fo(){return"SMALLINT"}function Ao(){return"FLOAT"}function Po(){return"REAL"}function Lo(){return"VARCHAR"}function Ro(){return"TO"}function $o(){return"INTERVAL"}function Uo(){return"YEAR"}function Vo(){return"TIMEZONE_HOUR"}function ko(){return"TIMEZONE_MINUTE"}function zo(){return"MONTH"}function Zo(){return"DAY"}function qo(){return"HOUR"}function Ho(){return"MINUTE"}function Yo(){return"SECOND"}function jo(){return"DOW"}function Wo(){return"DOY"}function Jo(){return"WEEK"}function Qo(){return"CASE"}function Bo(){return"END"}function Go(){return"WHEN"}function Ko(){return"THEN"}function Xo(){return"ELSE"}function rf(e){return e}function ei(e){return e.join("")}let r=0|a.peg$currPos,d=r;const fe=[{line:1,column:1}];let me,ee=r,xe=a.peg$maxFailExpected||[],c=0|a.peg$silentFails;if(a.startRule){if(!(a.startRule in f))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');w=f[a.startRule]}function g(){return Ee(d,r)}function He(e,n){throw ri(e,n=n!==void 0?n:Ee(d,r))}function ti(e=r){const n=s.codePointAt(e);return n===void 0?"":String.fromCodePoint(n)}function N(e,n){return{type:"literal",text:e,ignoreCase:n}}function Q(e,n,u,o){return{type:"class",parts:e,inverted:n,ignoreCase:u,unicode:o}}function ni(){return{type:"end"}}function At(e){let n,u=fe[e];if(u)return u;if(e>=fe.length)n=fe.length-1;else for(n=e;!fe[--n];);for(u=fe[n],u={line:u.line,column:u.column};n<e;)s.charCodeAt(n)===10?(u.line++,u.column=1):u.column++,n++;return fe[e]=u,u}function Ee(e,n,u){const o=At(e),l=At(n);return{source:i,start:{offset:e,line:o.line,column:o.column},end:{offset:n,line:l.line,column:l.column}}}function I(e){r<ee||(r>ee&&(ee=r,xe=[]),xe.push(e))}function ri(e,n){return new ft(e,null,null,n)}function ai(e,n,u){return new ft(ft.buildMessage(e,n),e,n,u)}function Pt(){let e,n;return e=r,m(),n=M(),n!==t?(m(),d=e,e=n):(r=e,e=t),e}function Lt(){let e,n,u,o,l,v,O,E;if(e=r,n=V(),n!==t){for(m(),u=[],o=M();o!==t;)u.push(o),o=r,l=r,v=m(),O=ae(),O!==t?(E=m(),v=[v,O,E],l=v):(r=l,l=t),l!==t?(l=M(),l===t?(r=o,o=t):o=l):o=l;o=m(),l=k(),l!==t?(d=e,e=wu(u)):(r=e,e=t)}else r=e,e=t;return e}function M(){let e,n,u,o,l,v;if(e=r,n=Ye(),n!==t){for(u=[],o=r,m(),l=en(),l!==t?(m(),v=Ye(),v!==t?(d=o,o=Ct(n,l,v)):(r=o,o=t)):(r=o,o=t);o!==t;)u.push(o),o=r,m(),l=en(),l!==t?(m(),v=Ye(),v!==t?(d=o,o=Ct(n,l,v)):(r=o,o=t)):(r=o,o=t);d=e,e=vu(n,u)}else r=e,e=t;return e}function Ye(){let e,n,u,o,l,v;if(e=r,n=Ce(),n!==t){for(u=[],o=r,m(),l=Pe(),l!==t?(m(),v=Ce(),v!==t?(d=o,o=Dt(n,l,v)):(r=o,o=t)):(r=o,o=t);o!==t;)u.push(o),o=r,m(),l=Pe(),l!==t?(m(),v=Ce(),v!==t?(d=o,o=Dt(n,l,v)):(r=o,o=t)):(r=o,o=t);d=e,e=Iu(n,u)}else r=e,e=t;return e}function Ce(){let e,n,u,o,l;return e=r,n=we(),n===t&&(n=r,s.charCodeAt(r)===33?(u=y,r++):(u=t,c===0&&I(Xr)),u!==t?(o=r,c++,s.charCodeAt(r)===61?(l=T,r++):(l=t,c===0&&I(ea)),c--,l===t?o=void 0:(r=o,o=t),o!==t?(u=[u,o],n=u):(r=n,n=t)):(r=n,n=t)),n!==t?(u=m(),o=Ce(),o!==t?(d=e,e=gu(o)):(r=e,e=t)):(r=e,e=t),e===t&&(e=ui()),e}function ui(){let e,n,u,o;return e=r,n=ne(),n!==t?(u=r,m(),o=si(),o!==t?u=o:(r=u,u=t),u===t&&(u=null),d=e,e=yu(n,u)):(r=e,e=t),e}function si(){let e;return e=oi(),e===t&&(e=fi(),e===t&&(e=li(),e===t&&(e=ii(),e===t&&(e=ci())))),e}function oi(){let e,n,u,o,l;if(e=r,n=[],u=r,m(),o=Rt(),o!==t?(m(),l=ne(),l!==t?(d=u,u=bt(o,l)):(r=u,u=t)):(r=u,u=t),u!==t)for(;u!==t;)n.push(u),u=r,m(),o=Rt(),o!==t?(m(),l=ne(),l!==t?(d=u,u=bt(o,l)):(r=u,u=t)):(r=u,u=t);else n=t;return n!==t&&(d=e,n=Tu(n)),e=n,e}function Rt(){let e;return s.substr(r,2)===S?(e=S,r+=2):(e=t,c===0&&I(ta)),e===t&&(s.charCodeAt(r)===62?(e=F,r++):(e=t,c===0&&I(na)),e===t&&(s.substr(r,2)===b?(e=b,r+=2):(e=t,c===0&&I(ra)),e===t&&(s.substr(r,2)===H?(e=H,r+=2):(e=t,c===0&&I(aa)),e===t&&(e=s.charAt(r),Yr.test(e)?r++:(e=t,c===0&&I(ua)),e===t&&(s.substr(r,2)===C?(e=C,r+=2):(e=t,c===0&&I(sa))))))),e}function ii(){let e,n,u,o;return e=r,n=Kt(),n!==t?(m(),u=we(),u!==t?(m(),o=ne(),o!==t?(d=e,e=Nu(n,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Kt(),n!==t?(m(),u=ne(),u!==t?(d=e,e=Ou(n,u)):(r=e,e=t)):(r=e,e=t)),e}function li(){let e,n,u,o,l,v,O,E;return e=r,n=we(),n!==t?(m(),u=tn(),u!==t?(o=m(),l=r,v=ne(),v!==t?(m(),O=Pe(),O!==t?(m(),E=ne(),E!==t?(d=l,l=Su(u,v,E)):(r=l,l=t)):(r=l,l=t)):(r=l,l=t),l!==t?(d=e,e=xu(u,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=tn(),n!==t?(m(),u=r,o=ne(),o!==t?(l=m(),v=Pe(),v!==t?(m(),O=ne(),O!==t?(d=u,u=Eu(n,o,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u!==t?(d=e,e=Cu(n,u)):(r=e,e=t)):(r=e,e=t)),e}function $t(){let e,n,u,o,l;return e=r,n=r,u=we(),u!==t?(o=m(),l=Xt(),l!==t?(u=[u,o,l],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Du(n)),e=n,e===t&&(e=Xt()),e}function Ut(){let e,n,u,o,l;return e=r,n=r,u=we(),u!==t?(o=m(),l=Ge(),l!==t?(u=[u,o,l],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=bu(n)),e=n,e===t&&(e=Ge()),e}function ci(){let e,n,u,o,l;return e=r,n=$t(),n!==t?(m(),u=oe(),u!==t?(m(),o=Hi(),o!==t?(m(),l=Be(),l!==t?(d=e,e=Mu(n,u,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=$t(),n!==t?(m(),u=oe(),u!==t?(d=e,e=_u(n,u)):(r=e,e=t)):(r=e,e=t)),e}function fi(){let e,n,u;return e=r,n=Ut(),n!==t?(m(),u=Lt(),u!==t?(d=e,e=Fu(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ut(),n!==t?(m(),u=Qe(),u!==t?(d=e,e=Au(n,u)):(r=e,e=t)):(r=e,e=t)),e}function ne(){let e,n,u,o,l,v;if(e=r,n=je(),n!==t){for(u=[],o=r,m(),l=Vt(),l!==t?(m(),v=je(),v!==t?(d=o,o=Mt(n,l,v)):(r=o,o=t)):(r=o,o=t);o!==t;)u.push(o),o=r,m(),l=Vt(),l!==t?(m(),v=je(),v!==t?(d=o,o=Mt(n,l,v)):(r=o,o=t)):(r=o,o=t);d=e,e=Pu(n,u)}else r=e,e=t;return e}function Vt(){let e;return e=s.charAt(r),Oe.test(e)?r++:(e=t,c===0&&I(Se)),e===t&&(s.substr(r,2)===D?(e=D,r+=2):(e=t,c===0&&I(oa))),e}function je(){let e,n,u,o,l,v;if(e=r,n=We(),n!==t){for(u=[],o=r,m(),l=kt(),l!==t?(m(),v=We(),v!==t?(d=o,o=_t(n,l,v)):(r=o,o=t)):(r=o,o=t);o!==t;)u.push(o),o=r,m(),l=kt(),l!==t?(m(),v=We(),v!==t?(d=o,o=_t(n,l,v)):(r=o,o=t)):(r=o,o=t);d=e,e=Lu(n,u)}else r=e,e=t;return e}function kt(){let e;return e=s.charAt(r),jr.test(e)?r++:(e=t,c===0&&I(ia)),e}function We(){let e,n,u,o;return e=xi(),e===t&&(e=gi(),e===t&&(e=yi(),e===t&&(e=Ni(),e===t&&(e=Oi(),e===t&&(e=Ti(),e===t&&(e=Si(),e===t&&(e=Li(),e===t&&(e=di(),e===t&&(e=Qe(),e===t&&(e=r,n=V(),n!==t?(m(),u=M(),u!==t?(m(),o=k(),o!==t?(d=e,e=Ru(u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t))))))))))),e}function di(){let e,n;return e=r,n=pi(),n!==t&&(d=e,n=$u(n)),e=n,e===t&&(e=r,n=hi(),n!==t&&(d=e,n=Uu(n)),e=n),e}function pi(){let e,n;return e=r,n=mi(),n!==t&&(d=e,n=n),e=n,e}function mi(){let e,n,u,o;if(e=r,n=Je(),n!==t){for(u=[],o=Zt();o!==t;)u.push(o),o=Zt();d=e,e=Vu(n,u)}else r=e,e=t;return e}function zt(){let e,n,u,o;if(e=r,n=Je(),n!==t){for(u=[],o=x();o!==t;)u.push(o),o=x();d=e,e=ku(n,u)}else r=e,e=t;return e}function Je(){let e;return e=s.charAt(r),Wr.test(e)?r++:(e=t,c===0&&I(la)),e}function x(){let e;return e=s.charAt(r),Jr.test(e)?r++:(e=t,c===0&&I(ca)),e}function Zt(){let e;return e=s.charAt(r),It.test(e)?r++:(e=t,c===0&&I(Tt)),e}function hi(){let e,n,u,o;return e=r,n=De(),n!==t?(u=wi(),o=De(),o!==t?(d=e,e=u):(r=e,e=t)):(r=e,e=t),e}function wi(){let e,n,u;for(e=r,n=[],u=qt();u!==t;)n.push(u),u=qt();return d=e,n=zu(n),e=n,e}function qt(){let e;return e=Ii(),e===t&&(e=vi()),e}function vi(){let e,n,u;return e=r,n=De(),n!==t?(u=De(),u!==t?(d=e,e=Zu()):(r=e,e=t)):(r=e,e=t),e}function Ii(){let e;return e=s.charAt(r),It.test(e)?r++:(e=t,c===0&&I(Tt)),e}function De(){let e;return e=s.charAt(r),Qr.test(e)?r++:(e=t,c===0&&I(fa)),e}function Qe(){let e,n,u,o;return e=r,n=r,s.charCodeAt(r)===64?(u=Y,r++):(u=t,c===0&&I(da)),u!==t?(o=zt(),o!==t?(u=[u,o],n=u):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=qu(n)),e=n,e}function gi(){let e,n,u,o,l,v,O,E;return e=r,n=nn(),n!==t?(m(),u=r,o=V(),o!==t?(m(),l=jt(),l!==t?(m(),v=Ke(),v!==t?(m(),O=M(),O!==t?(m(),E=k(),E!==t?(d=u,u=Hu(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,o=V(),o!==t?(m(),l=jt(),l!==t?(m(),v=ae(),v!==t?(m(),O=M(),O!==t?(m(),E=k(),E!==t?(d=u,u=Yu(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=ju(u)):(r=e,e=t)):(r=e,e=t),e}function yi(){let e,n,u,o,l,v,O,E,ue,$e,Ie;return e=r,n=ji(),n!==t?(m(),u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=Ke(),v!==t?(m(),O=M(),O!==t?(m(),E=r,ue=Yi(),ue!==t?($e=m(),Ie=M(),Ie!==t?(m(),E=Ie):(r=E,E=t)):(r=E,E=t),E===t&&(E=null),ue=k(),ue!==t?(d=u,u=Wu(l,O,E)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=ae(),v!==t?(m(),O=M(),O!==t?(m(),E=ae(),E!==t?(ue=m(),$e=M(),$e!==t?(Ie=k(),Ie!==t?(d=u,u=Ju(l,O,$e)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=Qu(u)):(r=e,e=t)):(r=e,e=t),e}function Ti(){let e,n,u,o,l,v,O,E;return e=r,n=Ki(),n!==t?(m(),u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=Xi(),v!==t?(m(),O=Ht(),O!==t?(m(),E=k(),E!==t?(d=u,u=Bu(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=ae(),v!==t?(m(),O=Ht(),O!==t?(m(),E=k(),E!==t?(d=u,u=Gu(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=Ku(u)):(r=e,e=t)):(r=e,e=t),e}function Ht(){let e,n,u,o,l;return e=r,n=el(),n===t&&(n=tl()),n!==t&&(d=e,n=Xu()),e=n,e===t&&(e=r,n=nl(),n!==t&&(d=e,n=es()),e=n,e===t&&(e=r,n=rl(),n!==t&&(d=e,n=ts()),e=n,e===t&&(e=r,n=al(),n!==t&&(d=e,n=ns()),e=n,e===t&&(e=r,n=an(),n!==t&&(d=e,n=rs()),e=n,e===t&&(e=r,n=rn(),n!==t&&(d=e,n=as()),e=n,e===t&&(e=r,n=un(),n!==t&&(d=e,n=us()),e=n,e===t&&(e=r,n=ul(),n!==t?(m(),u=V(),u!==t?(m(),o=ie(),o!==t?(m(),l=k(),l!==t?(d=e,e=ss(o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))))))),e}function Ni(){let e,n,u,o,l,v,O,E,ue;return e=r,n=Wi(),n!==t?(m(),u=r,o=V(),o!==t?(m(),l=Yt(),m(),v=M(),v!==t?(m(),O=Ke(),O!==t?(m(),E=M(),E!==t?(m(),ue=k(),ue!==t?(d=u,u=os(l,v,E)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,o=V(),o!==t?(m(),l=Yt(),m(),v=M(),v!==t?(m(),O=k(),O!==t?(d=u,u=is(l,v)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=ls(u)):(r=e,e=t)):(r=e,e=t),e}function Yt(){let e,n;return e=r,n=Qi(),n===t&&(n=Bi(),n===t&&(n=Gi())),n===t&&(n=null),d=e,n=cs(n),e=n,e}function Oi(){let e,n,u,o,l,v,O,E;return e=r,n=Ji(),n!==t?(m(),u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=Ge(),v!==t?(m(),O=M(),O!==t?(m(),E=k(),E!==t?(d=u,u=fs(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t),u===t&&(u=r,o=V(),o!==t?(m(),l=M(),l!==t?(m(),v=ae(),v!==t?(m(),O=M(),O!==t?(m(),E=k(),E!==t?(d=u,u=ds(l,O)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)):(r=u,u=t)),u!==t?(d=e,e=ps(u)):(r=e,e=t)):(r=e,e=t),e}function Si(){let e,n,u,o;return e=r,n=r,c++,u=nn(),c--,u===t?n=void 0:(r=n,n=t),n!==t?(u=pl(),u!==t?(m(),o=Lt(),o!==t?(d=e,e=ms(u,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function jt(){let e,n;return e=r,n=on(),n===t&&(n=ln(),n===t&&(n=cn(),n===t&&(n=fn(),n===t&&(n=dn(),n===t&&(n=le(),n===t&&(n=ol(),n===t&&(n=il(),n===t&&(n=ll(),n===t&&(n=cl(),n===t&&(n=fl())))))))))),n!==t&&(d=e,n=hs(n)),e=n,e}function xi(){let e;return e=Be(),e===t&&(e=Ui(),e===t&&(e=Pi(),e===t&&(e=Ai(),e===t&&(e=Fi(),e===t&&(e=Ei(),e===t&&(e=Di(),e===t&&(e=Ci()))))))),e}function Ei(){let e,n,u;return e=r,n=rn(),n!==t?(m(),u=oe(),u!==t?(d=e,e=ws(u)):(r=e,e=t)):(r=e,e=t),e}function Ci(){let e,n,u;return e=r,n=un(),n!==t?(m(),u=oe(),u!==t?(d=e,e=vs(u)):(r=e,e=t)):(r=e,e=t),e}function Di(){let e,n,u,o,l;return e=r,n=sn(),n!==t?(m(),u=s.charAt(r),Oe.test(u)?r++:(u=t,c===0&&I(Se)),u!==t?(m(),o=oe(),o!==t?(m(),l=Wt(),l!==t?(d=e,e=Is(u,o,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=sn(),n!==t?(m(),u=oe(),u!==t?(m(),o=Wt(),o!==t?(d=e,e=gs(u,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Wt(){let e,n,u,o;return e=r,n=bi(),n!==t?(m(),u=sl(),u!==t?(m(),o=Mi(),o!==t?(d=e,e=ys(n,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=_i()),e}function bi(){let e,n,u,o,l;return e=r,n=he(),n!==t?(m(),u=V(),u!==t?(m(),o=Me(),o!==t?(m(),l=k(),l!==t?(d=e,e=Ts(n,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Ns(n)),e=n),e}function Mi(){let e,n,u,o,l,v,O;return e=r,n=he(),n!==t&&(d=e,n=Os(n)),e=n,e===t&&(e=r,n=le(),n!==t?(m(),u=V(),u!==t?(m(),o=Me(),o!==t?(m(),l=ae(),l!==t?(m(),v=be(),v!==t?(m(),O=k(),O!==t?(d=e,e=Ss(o,v)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(m(),u=V(),u!==t?(m(),o=Me(),o!==t?(m(),l=k(),l!==t?(d=e,e=xs(o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=Es()),e=n))),e}function _i(){let e,n,u,o,l,v,O;return e=r,n=he(),n!==t?(m(),u=V(),u!==t?(m(),o=be(),o!==t?(m(),l=k(),l!==t?(d=e,e=Cs(n,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Ds(n)),e=n,e===t&&(e=r,n=le(),n!==t?(m(),u=V(),u!==t?(m(),o=Me(),o!==t?(m(),l=ae(),l!==t?(m(),v=be(),v!==t?(m(),O=k(),O!==t?(d=e,e=bs(o,v)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(m(),u=V(),u!==t?(m(),o=be(),o!==t?(m(),l=k(),l!==t?(d=e,e=Ms(o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=_s()),e=n)))),e}function he(){let e,n;return e=r,n=cn(),n!==t&&(d=e,n=Fs()),e=n,e===t&&(e=r,n=fn(),n!==t&&(d=e,n=As()),e=n,e===t&&(e=r,n=dn(),n!==t&&(d=e,n=Ps()),e=n,e===t&&(e=r,n=ln(),n!==t&&(d=e,n=Ls()),e=n,e===t&&(e=r,n=on(),n!==t&&(d=e,n=Rs()),e=n)))),e}function be(){let e,n;return e=r,n=ie(),n!==t&&(d=e,n=$s(n)),e=n,e}function Me(){let e,n;return e=r,n=ie(),n!==t&&(d=e,n=Us(n)),e=n,e}function Fi(){let e,n,u;return e=r,n=an(),n!==t?(m(),u=oe(),u!==t?(d=e,e=Vs(u)):(r=e,e=t)):(r=e,e=t),e}function Ai(){let e,n;return e=r,n=zi(),n!==t&&(d=e,n=ks()),e=n,e}function Pi(){let e,n;return e=r,n=Zi(),n!==t&&(d=e,n=zs()),e=n,e===t&&(e=r,n=qi(),n!==t&&(d=e,n=Zs()),e=n),e}function oe(){let e;return e=Be(),e===t&&(e=Qe()),e}function Be(){let e,n,u,o,l;if(e=r,s.charCodeAt(r)===39?(n=re,r++):(n=t,c===0&&I(Nt)),n===t&&(s.substr(r,2)===wt?(n=wt,r+=2):(n=t,c===0&&I(pa))),n!==t){for(u=[],o=r,s.substr(r,2)===Ne?(l=Ne,r+=2):(l=t,c===0&&I(Ot)),l!==t&&(d=o,l=Ft()),o=l,o===t&&(o=s.charAt(r),gt.test(o)?r++:(o=t,c===0&&I(St)));o!==t;)u.push(o),o=r,s.substr(r,2)===Ne?(l=Ne,r+=2):(l=t,c===0&&I(Ot)),l!==t&&(d=o,l=Ft()),o=l,o===t&&(o=s.charAt(r),gt.test(o)?r++:(o=t,c===0&&I(St)));s.charCodeAt(r)===39?(o=re,r++):(o=t,c===0&&I(Nt)),o!==t?(d=e,e=qs(u)):(r=e,e=t)}else r=e,e=t;return e}function Li(){let e;return e=Ri(),e===t&&(e=$i()),e}function Ri(){let e,n,u,o,l,v,O;if(e=r,n=Le(),n!==t)if(m(),u=M(),u!==t){for(m(),o=[],l=r,v=Fe(),v!==t?(O=m(),l=v):(r=l,l=t);l!==t;)o.push(l),l=r,v=Fe(),v!==t?(O=m(),l=v):(r=l,l=t);l=Re(),l!==t?(d=e,e=Hs(u,o)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t)if(m(),u=M(),u!==t){for(m(),o=[],l=r,v=Fe(),v!==t?(O=m(),l=v):(r=l,l=t);l!==t;)o.push(l),l=r,v=Fe(),v!==t?(O=m(),l=v):(r=l,l=t);l=Jt(),l!==t?(v=m(),O=Re(),O!==t?(d=e,e=Ys(u,o,l)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;return e}function $i(){let e,n,u,o,l,v;if(e=r,n=Le(),n!==t){for(m(),u=[],o=r,l=_e(),l!==t?(v=m(),o=l):(r=o,o=t);o!==t;)u.push(o),o=r,l=_e(),l!==t?(v=m(),o=l):(r=o,o=t);o=Re(),o!==t?(d=e,e=js(u)):(r=e,e=t)}else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t){for(m(),u=[],o=r,l=_e(),l!==t?(v=m(),o=l):(r=o,o=t);o!==t;)u.push(o),o=r,l=_e(),l!==t?(v=m(),o=l):(r=o,o=t);o=Jt(),o!==t?(l=m(),v=Re(),v!==t?(d=e,e=Ws(u,o)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function _e(){let e,n,u,o,l;return e=r,n=pn(),n!==t?(m(),u=M(),u!==t?(m(),o=mn(),o!==t?(m(),l=M(),l!==t?(d=e,e=Js(u,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Fe(){let e,n,u,o,l;return e=r,n=pn(),n!==t?(m(),u=M(),u!==t?(m(),o=mn(),o!==t?(m(),l=M(),l!==t?(d=e,e=Qs(u,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Jt(){let e,n,u;return e=r,n=dl(),n!==t?(m(),u=M(),u!==t?(d=e,e=Bs(u)):(r=e,e=t)):(r=e,e=t),e}function Ui(){let e,n,u,o;return e=r,n=Vi(),n!==t?(u=r,c++,o=Je(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Gs(n)):(r=e,e=t)):(r=e,e=t),e}function Vi(){let e,n,u,o;return e=r,n=Ae(),n!==t?(u=Qt(),u!==t?(o=Bt(),o!==t?(d=e,e=Ks(n,u,o)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t?(u=Qt(),u!==t?(d=e,e=Xs(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t?(u=Bt(),u!==t?(d=e,e=eo(n,u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t&&(d=e,n=to(n)),e=n))),e}function Ae(){let e,n,u;return e=ie(),e===t&&(e=r,n=s.charAt(r),Oe.test(n)?r++:(n=t,c===0&&I(Se)),n!==t?(u=ie(),u!==t?(d=e,e=no(n,u)):(r=e,e=t)):(r=e,e=t)),e}function Qt(){let e,n,u;return e=r,s.charCodeAt(r)===46?(n=jn,r++):(n=t,c===0&&I(ma)),n!==t?(u=ie(),u===t&&(u=null),d=e,e=ro(u)):(r=e,e=t),e}function Bt(){let e,n,u;return e=r,n=ki(),n!==t?(u=ie(),u!==t?(d=e,e=ao(n,u)):(r=e,e=t)):(r=e,e=t),e}function ie(){let e,n,u;if(e=r,n=[],u=Gt(),u!==t)for(;u!==t;)n.push(u),u=Gt();else n=t;return n!==t&&(d=e,n=uo(n)),e=n,e}function Gt(){let e;return e=s.charAt(r),Br.test(e)?r++:(e=t,c===0&&I(ha)),e}function ki(){let e,n,u;return e=r,n=s.charAt(r),Gr.test(n)?r++:(n=t,c===0&&I(wa)),n!==t?(u=s.charAt(r),Oe.test(u)?r++:(u=t,c===0&&I(Se)),u===t&&(u=null),d=e,e=so(n,u)):(r=e,e=t),e}function zi(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Wn?r+=4:(n=t,c===0&&I(va)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function Zi(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Jn?r+=4:(n=t,c===0&&I(Ia)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function qi(){let e,n,u,o;return e=r,n=s.substr(r,5),n.toLowerCase()===Qn?r+=5:(n=t,c===0&&I(ga)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(n=[n,u],e=n):(r=e,e=t)):(r=e,e=t),e}function Ge(){let e,n,u,o;return e=r,n=s.substr(r,2),n.toLowerCase()===Bn?r+=2:(n=t,c===0&&I(ya)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=oo()):(r=e,e=t)):(r=e,e=t),e}function Kt(){let e,n,u,o;return e=r,n=s.substr(r,2),n.toLowerCase()===Gn?r+=2:(n=t,c===0&&I(Ta)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=io()):(r=e,e=t)):(r=e,e=t),e}function Xt(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Kn?r+=4:(n=t,c===0&&I(Na)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=lo()):(r=e,e=t)):(r=e,e=t),e}function Hi(){let e,n,u,o;return e=r,n=s.substr(r,6),n.toLowerCase()===Xn?r+=6:(n=t,c===0&&I(Oa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=co()):(r=e,e=t)):(r=e,e=t),e}function we(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===er?r+=3:(n=t,c===0&&I(Sa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=fo()):(r=e,e=t)):(r=e,e=t),e}function Pe(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===tr?r+=3:(n=t,c===0&&I(xa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=po()):(r=e,e=t)):(r=e,e=t),e}function en(){let e,n,u,o;return e=r,n=s.substr(r,2),n.toLowerCase()===nr?r+=2:(n=t,c===0&&I(Ea)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=mo()):(r=e,e=t)):(r=e,e=t),e}function tn(){let e,n,u,o;return e=r,n=s.substr(r,7),n.toLowerCase()===rr?r+=7:(n=t,c===0&&I(Ca)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ho()):(r=e,e=t)):(r=e,e=t),e}function Ke(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===ar?r+=4:(n=t,c===0&&I(Da)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=wo()):(r=e,e=t)):(r=e,e=t),e}function Yi(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===ur?r+=3:(n=t,c===0&&I(ba)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=vo()):(r=e,e=t)):(r=e,e=t),e}function ji(){let e,n,u,o;return e=r,n=s.substr(r,9),n.toLowerCase()===sr?r+=9:(n=t,c===0&&I(Ma)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Io()):(r=e,e=t)):(r=e,e=t),e}function nn(){let e,n,u,o;return e=r,n=s.substr(r,7),n.toLowerCase()===or?r+=7:(n=t,c===0&&I(_a)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=go()):(r=e,e=t)):(r=e,e=t),e}function Wi(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===ir?r+=4:(n=t,c===0&&I(Fa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=yo()):(r=e,e=t)):(r=e,e=t),e}function Ji(){let e,n,u,o;return e=r,n=s.substr(r,8),n.toLowerCase()===lr?r+=8:(n=t,c===0&&I(Aa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=To()):(r=e,e=t)):(r=e,e=t),e}function rn(){let e,n,u,o;return e=r,n=s.substr(r,9),n.toLowerCase()===cr?r+=9:(n=t,c===0&&I(Pa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=No()):(r=e,e=t)):(r=e,e=t),e}function an(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===fr?r+=4:(n=t,c===0&&I(La)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Oo()):(r=e,e=t)):(r=e,e=t),e}function un(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===dr?r+=4:(n=t,c===0&&I(Ra)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=So()):(r=e,e=t)):(r=e,e=t),e}function Qi(){let e,n,u,o;return e=r,n=s.substr(r,7),n.toLowerCase()===pr?r+=7:(n=t,c===0&&I($a)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=xo()):(r=e,e=t)):(r=e,e=t),e}function Bi(){let e,n,u,o;return e=r,n=s.substr(r,8),n.toLowerCase()===mr?r+=8:(n=t,c===0&&I(Ua)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Eo()):(r=e,e=t)):(r=e,e=t),e}function Gi(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===hr?r+=4:(n=t,c===0&&I(Va)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Co()):(r=e,e=t)):(r=e,e=t),e}function Ki(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===wr?r+=4:(n=t,c===0&&I(ka)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Do()):(r=e,e=t)):(r=e,e=t),e}function Xi(){let e,n,u,o;return e=r,n=s.substr(r,2),n.toLowerCase()===vr?r+=2:(n=t,c===0&&I(za)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=bo()):(r=e,e=t)):(r=e,e=t),e}function el(){let e,n,u,o;return e=r,n=s.substr(r,7),n.toLowerCase()===Ir?r+=7:(n=t,c===0&&I(Za)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Mo()):(r=e,e=t)):(r=e,e=t),e}function tl(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===gr?r+=3:(n=t,c===0&&I(qa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=_o()):(r=e,e=t)):(r=e,e=t),e}function nl(){let e,n,u,o;return e=r,n=s.substr(r,8),n.toLowerCase()===yr?r+=8:(n=t,c===0&&I(Ha)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Fo()):(r=e,e=t)):(r=e,e=t),e}function rl(){let e,n,u,o;return e=r,n=s.substr(r,5),n.toLowerCase()===Tr?r+=5:(n=t,c===0&&I(Ya)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ao()):(r=e,e=t)):(r=e,e=t),e}function al(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Nr?r+=4:(n=t,c===0&&I(ja)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Po()):(r=e,e=t)):(r=e,e=t),e}function ul(){let e,n,u,o;return e=r,n=s.substr(r,7),n.toLowerCase()===Or?r+=7:(n=t,c===0&&I(Wa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Lo()):(r=e,e=t)):(r=e,e=t),e}function sl(){let e,n,u,o;return e=r,n=s.substr(r,2),n.toLowerCase()===Sr?r+=2:(n=t,c===0&&I(Ja)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ro()):(r=e,e=t)):(r=e,e=t),e}function sn(){let e,n,u,o;return e=r,n=s.substr(r,8),n.toLowerCase()===xr?r+=8:(n=t,c===0&&I(Qa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=$o()):(r=e,e=t)):(r=e,e=t),e}function on(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Er?r+=4:(n=t,c===0&&I(Ba)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Uo()):(r=e,e=t)):(r=e,e=t),e}function ol(){let e,n,u,o;return e=r,n=s.substr(r,13),n.toLowerCase()===Cr?r+=13:(n=t,c===0&&I(Ga)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Vo()):(r=e,e=t)):(r=e,e=t),e}function il(){let e,n,u,o;return e=r,n=s.substr(r,15),n.toLowerCase()===Dr?r+=15:(n=t,c===0&&I(Ka)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=ko()):(r=e,e=t)):(r=e,e=t),e}function ln(){let e,n,u,o;return e=r,n=s.substr(r,5),n.toLowerCase()===br?r+=5:(n=t,c===0&&I(Xa)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=zo()):(r=e,e=t)):(r=e,e=t),e}function cn(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===Mr?r+=3:(n=t,c===0&&I(eu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Zo()):(r=e,e=t)):(r=e,e=t),e}function fn(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===_r?r+=4:(n=t,c===0&&I(tu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=qo()):(r=e,e=t)):(r=e,e=t),e}function dn(){let e,n,u,o;return e=r,n=s.substr(r,6),n.toLowerCase()===Fr?r+=6:(n=t,c===0&&I(nu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ho()):(r=e,e=t)):(r=e,e=t),e}function le(){let e,n,u,o;return e=r,n=s.substr(r,6),n.toLowerCase()===Ar?r+=6:(n=t,c===0&&I(ru)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Yo()):(r=e,e=t)):(r=e,e=t),e}function ll(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===Pr?r+=3:(n=t,c===0&&I(au)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=jo()):(r=e,e=t)):(r=e,e=t),e}function cl(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===Lr?r+=3:(n=t,c===0&&I(uu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Wo()):(r=e,e=t)):(r=e,e=t),e}function fl(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Rr?r+=4:(n=t,c===0&&I(su)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Jo()):(r=e,e=t)):(r=e,e=t),e}function Le(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===$r?r+=4:(n=t,c===0&&I(ou)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Qo()):(r=e,e=t)):(r=e,e=t),e}function Re(){let e,n,u,o;return e=r,n=s.substr(r,3),n.toLowerCase()===Ur?r+=3:(n=t,c===0&&I(iu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Bo()):(r=e,e=t)):(r=e,e=t),e}function pn(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===Vr?r+=4:(n=t,c===0&&I(lu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Go()):(r=e,e=t)):(r=e,e=t),e}function mn(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===kr?r+=4:(n=t,c===0&&I(cu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Ko()):(r=e,e=t)):(r=e,e=t),e}function dl(){let e,n,u,o;return e=r,n=s.substr(r,4),n.toLowerCase()===zr?r+=4:(n=t,c===0&&I(fu)),n!==t?(u=r,c++,o=x(),c--,o===t?u=void 0:(r=u,u=t),u!==t?(d=e,e=Xo()):(r=e,e=t)):(r=e,e=t),e}function ae(){let e;return s.charCodeAt(r)===44?(e=Zr,r++):(e=t,c===0&&I(du)),e}function V(){let e;return s.charCodeAt(r)===40?(e=qr,r++):(e=t,c===0&&I(pu)),e}function k(){let e;return s.charCodeAt(r)===41?(e=Hr,r++):(e=t,c===0&&I(mu)),e}function m(){let e,n;for(e=[],n=hn();n!==t;)e.push(n),n=hn();return e}function hn(){let e;return e=s.charAt(r),Kr.test(e)?r++:(e=t,c===0&&I(hu)),e}function pl(){let e,n,u,o;if(e=r,n=zt(),n!==t&&(d=e,n=n),e=n,e===t)if(e=r,s.charCodeAt(r)===96?(n=vt,r++):(n=t,c===0&&I(xt)),n!==t){if(u=[],o=s.charAt(r),yt.test(o)?r++:(o=t,c===0&&I(Et)),o!==t)for(;o!==t;)u.push(o),o=s.charAt(r),yt.test(o)?r++:(o=t,c===0&&I(Et));else u=t;u!==t?(s.charCodeAt(r)===96?(o=vt,r++):(o=t,c===0&&I(xt)),o!==t?(d=e,e=ei(u)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function ml(e,n,u){return{type:"unary-expression",location:u,operator:e,expr:n}}function wn(e,n,u,o,l){const v={type:"binary-expression",location:l,operator:e,left:n,right:u};return o!==void 0&&(v.escape=o),v}function B(e,...n){return{type:"expression-list",location:e,value:n}}function ve(e,n){let u=e;for(const{op:o,expr:l,location:{end:v}}of n)u=wn(o,u,l,void 0,{...u.location,end:v});return u}function hl(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&He("Timestamp literal is invalid")}function wl(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&He("Time literal is invalid")}function vl(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&He("Date literal is invalid")}me=w();const Xe=me!==t&&r===s.length;function vn(){throw me!==t&&r<s.length&&I(ni()),ai(xe,ee<s.length?ti(ee):null,ee<s.length?Ee(ee,ee+1):Ee(ee,ee))}return a.peg$library?{peg$result:me,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:xe,peg$maxFailPos:ee,peg$success:Xe,peg$throw:Xe?void 0:vn}:Xe?me:void vn()}class Yc{static parse(a){return Hc(a)}}function Z(s,a){if(s!=null)switch(a(s),s.type){case"when-clause":Z(s.operand,a),Z(s.value,a);break;case"case-expression":for(const t of s.clauses)Z(t,a);s.format==="simple"&&Z(s.operand,a),s.else!==null&&Z(s.else,a);break;case"expression-list":for(const t of s.value)Z(t,a);break;case"unary-expression":Z(s.expr,a);break;case"binary-expression":Z(s.left,a),Z(s.right,a);break;case"function":Z(s.args,a);break;case"interval":Z(s.value,a),Z(s.qualifier,a);break;case"interval-qualifier":Z(s.start,a),Z(s.end,a)}}const jc=new Set(["current_timestamp","current_date","current_time"]);class Wc{constructor(a){this.staticData=a}makeBool(a){return $n(a)}featureValue(a,t,i,f){return Hn(a,t,i,f)}equalsNull(a){return a===null}applyLike(a,t,i){return ht(a,t,i)}ensureArray(a){return pt(a)}applyIn(a,t){return mt(a,t)}currentTimestamp(a){return kn(a)}currentDate(a){return zn(a)}currentTime(a){return Zn(a)}makeSqlInterval(a,t,i){return U.createFromValueAndQualifier(a,t,i)}convertInterval(a){return U.isInterval(a)?a.valueInMilliseconds():a}compare(a,t,i){return J(t,i,a)}calculate(a,t,i,f){return _n(a,t,i,f)}evaluateTime(a){return ke(a)}evaluateTimestamp(a,t,i){return ye(a,t,i)}evaluateDate(a,t){return at(a,t)}evaluateFunction(a,t,i){return it(a,t,i)}lookup(a,t){const i=t[a];return i===void 0?null:i}between(a,t){return a==null||t[0]==null||t[1]==null?null:J(a,t[0],">=")&&J(a,t[1],"<=")}notbetween(a,t){return a==null||t[0]==null||t[1]==null?null:J(a,t[0],"<")||J(a,t[1],">")}ternaryNot(a){return Ze(a)}ternaryAnd(a,t){return Un(a,t)}ternaryOr(a,t){return Vn(a,t)}}function _(s,...a){return`this.${s}(${a.join(", ")})`}function q(s){return s===void 0?"void 0":JSON.stringify(s)}function Jc({type:s,start:a,end:t}){return`{type: ${q(s)}, start: ${dt(a)}, end: ${dt(t)}}`}function dt({type:s,period:a,precision:t,secondary:i}){return JSON.stringify({type:s,period:a,precision:t,secondary:i})}function Qc({type:s,size:a,withtimezone:t}){return JSON.stringify({type:s,size:a,withtimezone:t})}const Fn="feature",An="lookups",Pn="attributeAdapter",Ln="fieldsIndex",de="timeZone",Rn="currentUser";class Bc{constructor(a){this._parseTree=a,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const a=this._compileNode(this._parseTree),t=`
      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}
      return this.convertInterval(${a});
    `;return new Function(Fn,An,Pn,Ln,de,Rn,t).bind(new Wc(this._staticData))}_storeStaticData(a){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=a,t}_compileRefStaticData(a){return`this.staticData[${q(a)}]`}_generateTempVar(){const a="temp$"+this._nextTempVarId++;return this._tempVars.add(a),a}_compileSimpleCase(a){const t=this._compileNode(a.operand),i=this._generateTempVar(),f=[];for(const w of a.clauses){const y=_("compare",q("="),i,this._compileNode(w.operand)),T=this._compileNode(w.value);f.push(`${y} ? (${T}) :`)}return a.else!=null?f.push(this._compileNode(a.else)):f.push(q(null)),`(${i} = ${t}, ${f.join(" ")})`}_compileSearchedCase(a){const t=[];for(const i of a.clauses){const f=_("makeBool",this._compileNode(i.operand)),w=this._compileNode(i.value);t.push(`${f} ? (${w}) :`)}return a.else!=null?t.push(this._compileNode(a.else)):t.push(q(null)),t.join(" ")}_compileInExpr(a,t){const i=new Set,f=[];for(const T of t.value)T.type==="number"||T.type==="string"?i.add(T.value):f.push(T);const w=this._compileNode(a),y=_("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:f}));if(i.size>0){const T=this._compileRefStaticData(this._storeStaticData(i)),S=this._generateTempVar();return f.length>0?`(${S} = ${w}, ${T}.has(${S}) || ${_("applyIn",S,y)})`:`(${S} = ${w}, ${S} == null ? null : ${T}.has(${S}))`}return _("applyIn",w,y)}_compileNode(a){switch(a.type){case"interval":return _("makeSqlInterval",this._compileNode(a.value),a.qualifier.type==="interval-qualifier"?Jc(a.qualifier):dt(a.qualifier),q(a.op));case"case-expression":return a.format==="simple"?this._compileSimpleCase(a):this._compileSearchedCase(a);case"parameter":return _("lookup",q(a.value.toLowerCase()),An);case"expression-list":return`[${a.value.map(t=>this._compileNode(t)).join(", ")}]`;case"unary-expression":return _("ternaryNot",this._compileNode(a.expr));case"binary-expression":switch(a.operator){case"AND":return _("ternaryAnd",this._compileNode(a.left),this._compileNode(a.right));case"OR":return _("ternaryOr",this._compileNode(a.left),this._compileNode(a.right));case"IS":if(a.right.type!=="null")throw new h(p.UnsupportedIsRhs);return _("equalsNull",this._compileNode(a.left));case"ISNOT":if(a.right.type!=="null")throw new h(p.UnsupportedIsRhs);return`!${_("equalsNull",this._compileNode(a.left))}`;case"IN":return this._compileInExpr(a.left,a.right);case"NOT IN":return _("ternaryNot",this._compileInExpr(a.left,a.right));case"BETWEEN":return _("between",this._compileNode(a.left),this._compileNode(a.right));case"NOTBETWEEN":return _("notbetween",this._compileNode(a.left),this._compileNode(a.right));case"LIKE":return _("applyLike",this._compileNode(a.left),this._compileNode(a.right),q(a.escape));case"NOT LIKE":return _("ternaryNot",_("applyLike",this._compileNode(a.left),this._compileNode(a.right),q(a.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return _("compare",q(a.operator),this._compileNode(a.left),this._compileNode(a.right));case"*":case"-":case"+":case"/":case"||":return _("calculate",q(a.operator),this._compileNode(a.left),this._compileNode(a.right),de);default:throw new h(p.UnsupportedOperator,{operator:a.operator})}case"null":case"boolean":case"string":case"number":return q(a.value);case"time":try{return this._compileRefStaticData(this._storeStaticData(ke(a.value)))}catch{return _("evaluateTime",q(a.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(at(a.value,"unknown")))}catch{return _("evaluateDate",q(a.value),q("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(ye(a.value,"unknown")))}catch{return _("evaluateTimestamp",q(a.value),q("unknown"))}case"current-time":return a.mode==="date"?_("currentDate",de):a.mode==="time"?_("currentTime",de):_("currentTimestamp",de);case"current-user":return Rn;case"column-reference":return _("featureValue",Fn,q(a.column),Ln,Pn);case"data-type":return Qc(a.value);case"function":return _("evaluateFunction",q(a.name),this._compileNode(a.args),de)}throw new h(p.UnsupportedSyntax,{node:a.type})}}class qe{static create(a,t={}){return new qe(a,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(a,t,i="UTC",f=null){this.fieldsIndex=t,this.timeZone=i,this.currentUser=f,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=Yc.parse(a);const{isStandardized:w,isAggregate:y,currentUserRequired:T,referencedFieldNames:S}=this._extractExpressionInfo(t);this._referencedFieldNames=S,this.isStandardized=w,this.isAggregate=y,this.currentUserRequired=T}static convertValueToStorageFormat(a,t=null){if(t===null)return G(a)?a.getTime():A(a)?a.toMillis():L(a)?a.toStorageFormat():R(a)?a.toStorageString():P(a)?a.toStorageFormat():a;switch(t){case"date":return G(a)?a.getTime():A(a)?a.toMillis():L(a)?a.toMilliseconds():P(a)?a.toNumber():a;case"date-only":return G(a)?K.fromDateJS(a).toString():L(a)?K.fromSqlTimeStampOffset(a).toString():A(a)?K.fromDateTime(a).toString():a;case"time-only":return G(a)?W.fromDateJS(a).toStorageString():A(a)?W.fromDateTime(a).toStorageString():L(a)?W.fromSqlTimeStampOffset(a).toStorageString():R(a)?a.toStorageString():a;case"timestamp-offset":if(G(a))return X.fromJSDate(a).toStorageFormat();if(A(a))return X.fromDateTime(a).toStorageFormat();if(L(a))return a.toStorageFormat()}return a}get fieldNames(){return this._referencedFieldNames}testSet(a,t=Te,i=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,a,i)}calculateValue(a,t=Te,i=this.currentUser){const f=this._evaluateNode(this.parseTree,a,t,null,i);return U.isInterval(f)?f.valueInMilliseconds()/864e5:f}tryGetCompiledExecutor(){if(this._compiledExecutor!=null)return this._compiledExecutor;if(Nl("esri-csp-restrictions"))return null;const a=new Bc(this.parseTree);return this._compiledExecutor=a.compile(),this._compiledExecutor}calculateValueCompiled(a,t=Te,i=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.calculateValue(a,t):f(a,this.parameters,t,this.fieldsIndex,this.timeZone,i??null)}testFeature(a,t=Te,i=this.currentUser){return!!this._evaluateNode(this.parseTree,a,t,null,i)}testFeatureCompiled(a,t=Te,i=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.testFeature(a,t):!!f(a,this.parameters,t,this.fieldsIndex,this.timeZone,i??null)}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,Z(this.parseTree,a=>{a.type==="current-time"?this._hasDateFunctions=!0:a.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||jc.has(a.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const a=new Set;return Z(this.parseTree,t=>{t.type==="function"&&a.add(t.name.toLowerCase())}),Array.from(a)}getExpressions(){const a=new Map;return Z(this.parseTree,t=>{if(t.type==="function"){const i=t.name.toLowerCase(),f=t.args.value[0];if(f.type==="column-reference"){const w=f.column,y=`${i}-${w}`;a.has(y)||a.set(y,{aggregateType:i,field:w})}}}),[...a.values()]}getVariables(){const a=new Set;return Z(this.parseTree,t=>{t.type==="parameter"&&a.add(t.value.toLowerCase())}),Array.from(a)}_extractExpressionInfo(a){const t=[],i=new Set;let f=!0,w=!1,y=!1;return Z(this.parseTree,T=>{switch(T.type){case"column-reference":{const S=a?.get(T.column);let F,b;S?F=b=S.name??"":(b=T.column,F=b.toLowerCase()),i.has(F)||(i.add(F),t.push(b)),T.column=b;break}case"current-user":y=!0;break;case"function":{const{name:S,args:F}=T,b=F.value.length;f&&(f=jl(S,b)),w===!1&&(w=Tn(S,b));break}}}),{referencedFieldNames:Array.from(t),isStandardized:f,isAggregate:w,currentUserRequired:y}}_evaluateNode(a,t,i,f,w){let y;switch(a.type){case"interval":{const T=this._evaluateNode(a.value,t,i,f,w);return U.createFromValueAndQualifier(T,a.qualifier,a.op)}case"case-expression":if(a.format==="simple"){const T=this._evaluateNode(a.operand,t,i,f,w);for(let S=0;S<a.clauses.length;S++)if(J(T,this._evaluateNode(a.clauses[S].operand,t,i,f,w),"="))return this._evaluateNode(a.clauses[S].value,t,i,f,w);if(a.else!==null)return this._evaluateNode(a.else,t,i,f,w)}else{for(let T=0;T<a.clauses.length;T++)if($n(this._evaluateNode(a.clauses[T].operand,t,i,f,w)))return this._evaluateNode(a.clauses[T].value,t,i,f,w);if(a.else!==null)return this._evaluateNode(a.else,t,i,f,w)}return null;case"parameter":return y=this.parameters[a.value.toLowerCase()],G(y)?$.fromJSDate(y):y!=null&&typeof y=="object"&&"toDateTime"in y?y.toDateTime():y;case"expression-list":{const T=[];for(const S of a.value)T.push(this._evaluateNode(S,t,i,f,w));return T}case"unary-expression":return Ze(this._evaluateNode(a.expr,t,i,f,w));case"binary-expression":switch(a.operator){case"AND":return Un(this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w));case"OR":return Vn(this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w));case"IS":if(a.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(a.left,t,i,f,w)===null;case"ISNOT":if(a.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(a.left,t,i,f,w)!==null;case"IN":{const T=pt(this._evaluateNode(a.right,t,i,f,w));return mt(this._evaluateNode(a.left,t,i,f,w),T)}case"NOT IN":{const T=pt(this._evaluateNode(a.right,t,i,f,w));return Ze(mt(this._evaluateNode(a.left,t,i,f,w),T))}case"BETWEEN":{const T=this._evaluateNode(a.left,t,i,f,w),S=this._evaluateNode(a.right,t,i,f,w);return T==null||S[0]==null||S[1]==null?null:J(T,S[0],">=")&&J(T,S[1],"<=")}case"NOTBETWEEN":{const T=this._evaluateNode(a.left,t,i,f,w),S=this._evaluateNode(a.right,t,i,f,w);return T==null||S[0]==null||S[1]==null?null:J(T,S[0],"<")||J(T,S[1],">")}case"LIKE":return ht(this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w),a.escape);case"NOT LIKE":return Ze(ht(this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w),a.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return J(this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w),a.operator);case"-":case"+":case"*":case"/":case"||":return _n(a.operator,this._evaluateNode(a.left,t,i,f,w),this._evaluateNode(a.right,t,i,f,w),this.timeZone)}case"null":case"boolean":case"string":case"number":return a.value;case"date":return a.parsedValue??=at(a.value,"unknown"),a.parsedValue;case"timestamp":return a.parsedValue??=ye(a.value,"unknown"),a.parsedValue;case"time":return ke(a.value);case"current-time":return a.mode==="date"?zn(this.timeZone):a.mode==="time"?Zn(this.timeZone):kn(this.timeZone);case"current-user":return w??null;case"column-reference":return Hn(t,a.column,this.fieldsIndex,i);case"data-type":return a.value;case"function":{if(this.isAggregate&&Tn(a.name,a.args.value.length)){const S=[];for(const F of a.args?.value||[]){const b=[];for(const H of f||[])b.push(this._evaluateNode(F,H,i,null,w));S.push(b)}return yn(a.name,S)}const T=this._evaluateNode(a.args,t,i,f,w);return it(a.name,T,this.timeZone)}}throw new h(p.UnsupportedSyntax,{node:a.type})}}function $n(s){return s===!0}function pt(s){return Array.isArray(s)?s:[s]}function Ze(s){return s!==null?s!==!0:null}function Un(s,a){return s!=null&&a!=null?s===!0&&a===!0:s!==!1&&a!==!1&&null}function Vn(s,a){return s!=null&&a!=null?s===!0||a===!0:s===!0||a===!0||null}function mt(s,a){if(s==null)return null;let t=!1;for(const i of a)if(i==null)t=null;else{if(s===i){t=!0;break}if(st(s)&&st(i)&&(t=J(s,i,"="),t))break}return t}function kn(s){return Ve(new Date,s)}function zn(s){return K.fromNow(s)}function Zn(s){const a=Ve(new Date,s);return W.fromDateTime(a)}const qn="-[]/{}()*+?.\\^$|";var ce;function Gc(s,a){const t=a;let i="",f=ce.Normal;for(let w=0;w<s.length;w++){const y=s.charAt(w);switch(f){case ce.Normal:y===t?f=ce.Escaped:qn.includes(y)?i+="\\"+y:i+=y==="%"?".*":y==="_"?".":y;break;case ce.Escaped:qn.includes(y)?i+="\\"+y:i+=y,f=ce.Normal}}return new RegExp("^"+i+"$","m")}function ht(s,a,t){return s==null?null:Gc(a,t).test(s)}function Kc(s){return s&&typeof s.attributes=="object"}function Hn(s,a,t,i){if("getAttributeSQL"in i)return i.getAttributeSQL(s,a);const f=i.getAttribute(s,a);if(f==null)return f;const w=t?.get(a);switch(w?.type){case"esriFieldTypeDate":case"date":return Ve(new Date(f),t?.getLuxonTimeZone(w.name)??Ol.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return K.fromReader(f);case"esriFieldTypeTimeOnly":case"time-only":return W.fromReader(f);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new X(f)}return f}(function(s){s[s.Normal=0]="Normal",s[s.Escaped=1]="Escaped"})(ce||(ce={}));const Te={getAttribute:(s,a)=>(Kc(s)?s.attributes:s)[a]},Xc=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{qe as R,Xc as W,p as a,X as i,h as n,yn as u};
