import{aX as m,ex as $,he as b,s as d,L as v,a4 as U,a0 as F,fg as j}from"./main-BFDurRCu.js";const z={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let w=new WeakMap,y={};function _(n){const t=n||y;if(!w.has(t)){const e=m(),r=$(e)?.language,s=r&&z[r]||e;w.set(t,new Intl.NumberFormat(s,n))}return w.get(t)}function C(n={}){const t={};return n.digitSeparator!=null&&(t.useGrouping=n.digitSeparator),n.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=n.places),t}function S(n,t){return Object.is(n,-0)&&(n=0),_(t).format(n)}function W(n,t=m()){if(!n)return null;let e=x.get(t);if(!e){const r=_().formatToParts(12345.6),s=[..._({useGrouping:!1}).format(9876543210)].reverse(),i=new Map(s.map((a,o)=>[a,o])),h=new RegExp(`[${r.find(a=>a.type==="group")?.value}]`,"g"),p=new RegExp(`[${r.find(a=>a.type==="decimal")?.value}]`),l=new RegExp(`[${s.join("")}]`,"g"),g=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,c=/[-\u2212\u2013\u2014\u2015]/g;e=a=>{if((a=a.trim().replaceAll(h,"").replace(p,".").replace(l,M=>String(i.get(M))).replaceAll(g,"").replaceAll(c,"-"))==="")return null;const o=Number(a);return isNaN(o)?null:o},x.set(t,e)}return e(n)}b(()=>{w=new WeakMap,y={}});const x=new Map,L={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function T(n){return n in L}function R(n){if(T(n)){const t=L[n];return t===!0?n:t}return null}const f=[],u=new Map;function A(n){for(const t of u.keys())N(n.pattern,t)&&u.delete(t)}function D(n){return f.includes(n)||(A(n),f.unshift(n)),U(()=>{const t=f.indexOf(n);t>-1&&(f.splice(t,1),A(n))})}async function O(n){const t=m();u.has(n)||u.set(n,G(n,t));const e=u.get(n);return e&&await P.add(e),e}function B(n){const t=$(n);return t?R(n)??R(t.language):null}async function G(n,t){const e=[];for(const r of f)if(N(r.pattern,n))try{return await r.fetchMessageBundle(n,t)}catch(s){e.push(s)}throw e.length?new d("intl:message-bundle-error",`Errors occurred while loading "${n}"`,{errors:e}):new d("intl:no-message-bundle-loader",`No loader found for message bundle "${n}"`)}function N(n,t){return typeof n=="string"?t.startsWith(n):n.test(t)}b(()=>{u.clear()});const P=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(n){return this._increase(),n.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=v())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function I(n,t,e,r){const s=t.exec(e);if(!s)throw new d("esri-intl:invalid-bundle",`Bundle id "${e}" is not compatible with the pattern "${t}"`);const i=s[1]?`${s[1]}/`:"",h=s[2],p=B(r),l=`${i}${h}.json`,g=p?`${i}${h}_${p}.json`:l;let c;try{c=await k(n(g))}catch(a){if(g===l)throw new d("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:a});try{c=await k(n(l))}catch(o){throw new d("intl:unknown-bundle",`Bundle "${e}" cannot be loaded`,{error:o})}}return c}async function k(n){if(E.fetchBundleAsset!=null)return E.fetchBundleAsset(n);const t=await F(n,{responseType:"text"});return JSON.parse(t.data)}class J{constructor({base:t="",pattern:e,location:r=new URL(window.location.href)}){let s;s=typeof r=="string"?i=>new URL(i,new URL(r,window.location.href)).href:r instanceof URL?i=>new URL(i,r).href:r,this.pattern=typeof e=="string"?new RegExp(`^${e}`):e,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,e){return I(this.getAssetUrl,this.matcher,t,e)}}function K(n){return new J(n)}const E={};D(K({pattern:"esri/",location:j}));export{O as f,C as i,B as m,S as o,W as p};
