{"version":3,"file":"index-RI5WhRU-.js","sources":["../../node_modules/@esri/calcite-components/dist/components/calcite-flow/customElement.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.2.1 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { ref } from \"lit-html/directives/ref.js\";\nimport { html } from \"lit\";\nimport { LitElement, safeClassMap } from \"@arcgis/lumina\";\nimport { c as createObserver } from \"../../chunks/observers.js\";\nimport { c as componentFocusable } from \"../../chunks/component.js\";\nimport { z as whenAnimationDone } from \"../../chunks/dom.js\";\nimport { css } from \"@lit/reactive-element/css-tag.js\";\nconst CSS = {\n  frame: \"frame\",\n  frameAdvancing: \"frame--advancing\",\n  frameRetreating: \"frame--retreating\"\n};\nconst styles = css`:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`;\nclass Flow extends LitElement {\n  constructor() {\n    super();\n    this.itemMutationObserver = createObserver(\"mutation\", () => this.updateItemsAndProps());\n    this.items = [];\n    this.selectedIndex = -1;\n    this.flowDirection = \"standby\";\n    this.listen(\"calciteInternalFlowItemChange\", this.handleCalciteInternalFlowItemChange);\n    this.listen(\"calciteFlowItemBack\", this.handleItemBackClick);\n  }\n  static {\n    this.properties = { flowDirection: [16, {}, { state: true }], customItemSelectors: 1 };\n  }\n  static {\n    this.styles = styles;\n  }\n  async back() {\n    const { items, selectedIndex } = this;\n    const selectedItem = items[selectedIndex];\n    const nextSelectedItem = items[selectedIndex - 1];\n    if (!selectedItem || !nextSelectedItem) {\n      return;\n    }\n    const beforeBack = selectedItem.beforeBack ? selectedItem.beforeBack : () => Promise.resolve();\n    try {\n      await beforeBack.call(selectedItem);\n    } catch {\n      return;\n    }\n    selectedItem.selected = false;\n    nextSelectedItem.selected = true;\n    return nextSelectedItem;\n  }\n  async setFocus() {\n    await componentFocusable(this);\n    const { items } = this;\n    const selectedItem = items[this.selectedIndex];\n    return selectedItem?.setFocus();\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n  willUpdate(changes) {\n    if (changes.has(\"flowDirection\") && (this.hasUpdated || this.flowDirection !== \"standby\")) {\n      this.handleFlowDirectionChange(this.flowDirection);\n    }\n  }\n  loaded() {\n    this.updateItemsAndProps();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.itemMutationObserver?.disconnect();\n  }\n  async handleFlowDirectionChange(flowDirection) {\n    if (flowDirection === \"standby\") {\n      return;\n    }\n    await whenAnimationDone(this.frameEl, flowDirection === \"retreating\" ? \"calcite-frame-retreat\" : \"calcite-frame-advance\");\n    this.resetFlowDirection();\n  }\n  handleCalciteInternalFlowItemChange(event) {\n    event.stopPropagation();\n    this.updateFlowProps();\n  }\n  async handleItemBackClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    await this.back();\n    return this.setFocus();\n  }\n  resetFlowDirection() {\n    this.flowDirection = \"standby\";\n  }\n  getFlowDirection(oldSelectedIndex, newSelectedIndex) {\n    const allowRetreatingDirection = oldSelectedIndex > 0;\n    const allowAdvancingDirection = oldSelectedIndex > -1 && newSelectedIndex > 0;\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\n      return \"standby\";\n    }\n    return newSelectedIndex < oldSelectedIndex ? \"retreating\" : \"advancing\";\n  }\n  updateItemsAndProps() {\n    const { customItemSelectors, el } = this;\n    const newItems = Array.from(el.querySelectorAll(`calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`)).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\n    this.items = newItems;\n    this.ensureSelectedFlowItemExists();\n    this.updateFlowProps();\n  }\n  updateFlowProps() {\n    const { selectedIndex, items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    items.forEach((flowItem, index) => {\n      const currentlySelected = index === foundSelectedIndex;\n      if (!currentlySelected) {\n        flowItem.menuOpen = false;\n      }\n      flowItem.showBackButton = currentlySelected && foundSelectedIndex > 0;\n    });\n    if (foundSelectedIndex === -1) {\n      return;\n    }\n    if (selectedIndex !== foundSelectedIndex) {\n      this.flowDirection = this.getFlowDirection(selectedIndex, foundSelectedIndex);\n    }\n    this.selectedIndex = foundSelectedIndex;\n  }\n  findSelectedFlowItemIndex(items) {\n    const selectedItem = items.slice(0).reverse().find((item) => !!item.selected);\n    return items.indexOf(selectedItem);\n  }\n  ensureSelectedFlowItemExists() {\n    const { items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    if (foundSelectedIndex !== -1) {\n      return;\n    }\n    const lastItem = items[items.length - 1];\n    if (lastItem) {\n      lastItem.selected = true;\n    }\n  }\n  setFrameEl(el) {\n    this.frameEl = el;\n  }\n  render() {\n    const { flowDirection } = this;\n    const frameDirectionClasses = {\n      [CSS.frame]: true,\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\n      [CSS.frameRetreating]: flowDirection === \"retreating\"\n    };\n    return html`<div class=${safeClassMap(frameDirectionClasses)} ${ref(this.setFrameEl)}><slot></slot></div>`;\n  }\n}\ncustomElement(\"calcite-flow\", Flow);\nexport {\n  Flow\n};\n"],"names":["CSS","styles","css","Flow","LitElement","createObserver","items","selectedIndex","selectedItem","nextSelectedItem","beforeBack","componentFocusable","changes","flowDirection","whenAnimationDone","event","oldSelectedIndex","newSelectedIndex","allowRetreatingDirection","customItemSelectors","el","newItems","flowItem","foundSelectedIndex","index","currentlySelected","item","lastItem","frameDirectionClasses","html","safeClassMap","ref","customElement"],"mappings":"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","x_google_ignoreList":[0]}