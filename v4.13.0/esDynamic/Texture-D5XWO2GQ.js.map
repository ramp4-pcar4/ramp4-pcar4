{"version":3,"file":"Texture-D5XWO2GQ.js","sources":["../../node_modules/@arcgis/core/views/webgl/checkWebGLError.js","../../node_modules/@arcgis/core/views/webgl/FBOAttachmentType.js","../../node_modules/@arcgis/core/views/webgl/Util.js","../../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js","../../node_modules/@arcgis/core/views/webgl/textureUtils.js","../../node_modules/@arcgis/core/views/webgl/ValidatedTextureDescriptor.js","../../node_modules/@arcgis/core/views/webgl/Texture.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";import r from\"../../core/Logger.js\";import{ErrorConstant as o}from\"./enums.js\";const t=()=>r.getLogger(\"esri.views.webgl.checkWebGLError\");function n(e){switch(e){case o.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case o.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case o.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case o.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case o.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case o.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const a=!!has(\"enable-feature:webgl-debug\");function c(){return a}function u(){return a}function s(r,o=c()){if(o){const o=r.getError();if(o){const r=n(o),a=(new Error).stack;t().error(new e(\"webgl-error\",\"WebGL error occurred\",{message:r,stack:a}))}}}export{s as checkWebGLError,n as getErrorMessage,a as hasFeatureFlagWebGLDebug,c as webglDebugEnabled,u as webglValidateShadersEnabled};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.TextureDescriptor=0]=\"TextureDescriptor\",e[e.Texture=1]=\"Texture\",e[e.Renderbuffer=2]=\"Renderbuffer\"}(e||(e={}));export{e as FBOAttachmentType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{webglDebugEnabled as e}from\"./checkWebGLError.js\";import{CompressedTextureFormat as r,SizedPixelFormat as t,SizedDepthStencilFormat as s,SizedDepthFormat as a,PixelFormat as c,SizedStencilFormat as n,BufferType as o}from\"./enums.js\";import{getDataTypeBytes as i}from\"./getDataTypeBytes.js\";function R(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return\"An unacceptable value has been specified for an enumerated argument\";case r.INVALID_VALUE:return\"An unacceptable value has been specified for an argument\";case r.INVALID_OPERATION:return\"The specified command is not allowed for the current state\";case r.INVALID_FRAMEBUFFER_OPERATION:return\"The currently bound framebuffer is not framebuffer complete\";case r.OUT_OF_MEMORY:return\"Not enough memory is left to execute the command\";case r.CONTEXT_LOST_WEBGL:return\"WebGL context is lost\"}return\"Unknown error\"}function E(e,r){return(e.vertexBuffers.get(r)?.usedMemory??0)/_(e.layout.get(r))}function _(e){return e[0].stride}function u(r,t,s,a,c=0){const n=r.gl;r.bindBuffer(s);for(const o of a){const s=t.get(o.name);if(null==s){console.warn(`There is no location for vertex attribute '${o.name}' defined.`);continue}const a=c*o.stride;if(o.count<=4)n.vertexAttribPointer(s,o.count,o.type,o.normalized,o.stride,o.offset+a),n.enableVertexAttribArray(s),o.divisor>0&&r.gl.vertexAttribDivisor(s,o.divisor);else if(9===o.count)for(let e=0;e<3;e++)n.vertexAttribPointer(s+e,3,o.type,o.normalized,o.stride,o.offset+12*e+a),n.enableVertexAttribArray(s+e),o.divisor>0&&r.gl.vertexAttribDivisor(s+e,o.divisor);else if(16===o.count)for(let e=0;e<4;e++)n.vertexAttribPointer(s+e,4,o.type,o.normalized,o.stride,o.offset+16*e+a),n.enableVertexAttribArray(s+e),o.divisor>0&&r.gl?.vertexAttribDivisor(s+e,o.divisor);else console.error(\"Unsupported vertex attribute element count: \"+o.count);if(e()){const e=R(r),t=i(o.type),s=o.offset,c=Math.round(t/s)!==t/s?`. Offset not a multiple of stride. DataType requires ${t} bytes, but descriptor has an offset of ${s}`:\"\";e&&console.error(`Unable to bind vertex attribute \"${o.name}\" with baseInstanceOffset ${a}${c}:`,e,o)}}}function A(e,r,t,s){const a=e.gl;e.bindBuffer(t);for(const c of s){const t=r.get(c.name);if(c.count<=4)a.disableVertexAttribArray(t),c.divisor&&c.divisor>0&&e.gl?.vertexAttribDivisor(t,0);else if(9===c.count)for(let r=0;r<3;r++)a.disableVertexAttribArray(t+r),c.divisor&&c.divisor>0&&e.gl?.vertexAttribDivisor(t+r,0);else if(16===c.count)for(let r=0;r<4;r++)a.disableVertexAttribArray(t+r),c.divisor&&c.divisor>0&&e.gl?.vertexAttribDivisor(t+r,0);else console.error(\"Unsupported vertex attribute element count: \"+c.count)}e.unbindBuffer(o.ARRAY_BUFFER)}function G(e){switch(e){case c.ALPHA:case c.LUMINANCE:case c.RED:case c.RED_INTEGER:case t.R8:case t.R8I:case t.R8UI:case t.R8_SNORM:case n.STENCIL_INDEX8:return 1;case c.LUMINANCE_ALPHA:case c.RG:case c.RG_INTEGER:case t.RGBA4:case t.R16F:case t.R16I:case t.R16UI:case t.RG8:case t.RG8I:case t.RG8UI:case t.RG8_SNORM:case t.RGB565:case t.RGB5_A1:case a.DEPTH_COMPONENT16:return 2;case c.RGB:case c.RGB_INTEGER:case t.RGB8:case t.RGB8I:case t.RGB8UI:case t.RGB8_SNORM:case t.SRGB8:case a.DEPTH_COMPONENT24:return 3;case c.RGBA:case c.RGBA_INTEGER:case t.RGBA8:case t.R32F:case t.R11F_G11F_B10F:case t.RG16F:case t.R32I:case t.R32UI:case t.RG16I:case t.RG16UI:case t.RGBA8I:case t.RGBA8UI:case t.RGBA8_SNORM:case t.SRGB8_ALPHA8:case t.RGB9_E5:case t.RGB10_A2UI:case t.RGB10_A2:case a.DEPTH_COMPONENT32F:case s.DEPTH24_STENCIL8:return 4;case s.DEPTH32F_STENCIL8:return 5;case t.RGB16F:case t.RGB16I:case t.RGB16UI:return 6;case t.RG32F:case t.RG32I:case t.RG32UI:case t.RGBA16F:case t.RGBA16I:case t.RGBA16UI:return 8;case t.RGB32F:case t.RGB32I:case t.RGB32UI:return 12;case t.RGBA32F:case t.RGBA32I:case t.RGBA32UI:return 16;case r.COMPRESSED_RGB_S3TC_DXT1_EXT:case r.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case r.COMPRESSED_RGBA_S3TC_DXT3_EXT:case r.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case r.COMPRESSED_R11_EAC:case r.COMPRESSED_SIGNED_R11_EAC:case r.COMPRESSED_RGB8_ETC2:case r.COMPRESSED_SRGB8_ETC2:case r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case r.COMPRESSED_RG11_EAC:case r.COMPRESSED_SIGNED_RG11_EAC:case r.COMPRESSED_RGBA8_ETC2_EAC:case r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{u as bindVertexBufferLayout,G as getBytesPerElementFormat,R as getErrorString,_ as getStride,A as unbindVertexBufferLayout,E as vertexCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{TextureType as t,PixelFormat as i,PixelType as h,TextureSamplingMode as e,TextureWrapMode as s}from\"./enums.js\";import{FBOAttachmentType as p}from\"./FBOAttachmentType.js\";import{getBytesPerElementFormat as r}from\"./Util.js\";class a{constructor(r=0,a=r){this.width=r,this.height=a,this.type=p.TextureDescriptor,this.target=t.TEXTURE_2D,this.pixelFormat=i.RGBA,this.dataType=h.UNSIGNED_BYTE,this.samplingMode=e.LINEAR,this.wrapMode=s.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}}function o(i){return i.width<=0||i.height<=0||i.depth<=0?0:Math.round(i.width*i.height*i.depth*(i.hasMipmap?4/3:1)*(null==i.internalFormat?4:r(i.internalFormat))*(i.target===t.TEXTURE_CUBE_MAP?6:1))}export{a as TextureDescriptor,o as estimateMemory};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import e from\"../../core/Logger.js\";import{PixelType as n,PixelFormat as r,SizedPixelFormat as i,SizedDepthStencilFormat as o,SizedDepthFormat as a,UnsizedDepthFormat as u,TextureType as l,TextureSamplingMode as c,CompressedTextureFormat as s}from\"./enums.js\";const h=()=>e.getLogger(\"esri/views/webgl/textureUtils\");function m(t){const{width:e,height:n,depth:r}=t;(null!=e&&e<0||null!=n&&n<0||null!=r&&r<0)&&h().error(\"Negative dimension parameters are not allowed!\");const{internalFormat:i}=t;if(i&&(f(i)||E(i))){const{linearFilterDepth:e,compareEnabled:n,samplingMode:r,hasMipmap:i}=t;i&&h().error(\"Depth textures cannot have mipmaps\"),e?r!==c.LINEAR&&r!==c.NEAREST&&h().error(\"Depth textures cannot sample mipmaps\"):(r!==c.NEAREST&&h().error(\"Depth textures without filtering must use NEAREST filtering\"),n&&h().error(\"Depth textures without filtering cannot use compare function\"))}}function p(t){return t in i}function f(t){return t in a}function E(t){return t in o}function d(t){return null!=t&&t in s}function T(t){return null!=t&&\"type\"in t&&\"compressed\"===t.type}function g(t){return d(t.descriptor.internalFormat)}function R(t){return null!=t&&\"byteLength\"in t}function w(t){return null!=t&&!T(t)&&!R(t)}function D(t){return t===l.TEXTURE_3D||t===l.TEXTURE_2D_ARRAY}function F(t,e,n,r=1){let i=Math.max(e,n);return t===l.TEXTURE_3D&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function N(e){if(null!=e.internalFormat)return e.internalFormat;switch(e.dataType){case n.FLOAT:switch(e.pixelFormat){case r.RGBA:return i.RGBA32F;case r.RGB:return i.RGB32F;default:throw new t(\"texture:unknown-format\",\"Unable to derive format\")}case n.UNSIGNED_BYTE:switch(e.pixelFormat){case r.RGBA:return i.RGBA8;case r.RGB:return i.RGB8}}const{pixelFormat:l}=e;return e.internalFormat=l===u.DEPTH_STENCIL?o.DEPTH24_STENCIL8:l===u.DEPTH_COMPONENT?a.DEPTH_COMPONENT24:l,e.internalFormat}function x(t){let e=\"width\"in t?t.width:t.codedWidth,n=\"height\"in t?t.height:t.codedHeight;const r=1;return t instanceof HTMLVideoElement&&(e=t.videoWidth,n=t.videoHeight),{width:e,height:n,depth:r}}export{F as calcMipmapLevels,N as deriveInternalFormat,x as getDimensions,D as is3DTarget,R as isArrayBufferView,T as isCompressedData,d as isCompressedFormat,g as isCompressedTexture,f as isSizedDepthFormat,E as isSizedDepthStencilFormat,p as isSizedPixelFormat,w as isTexImageSource,m as validateTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{SizedPixelFormat as s,PixelFormat as e}from\"./enums.js\";import{TextureDescriptor as t}from\"./TextureDescriptor.js\";class a extends t{constructor(t,a){switch(super(),this.context=t,Object.assign(this,a),this.internalFormat){case s.R16F:case s.R32F:case s.R8_SNORM:case s.R8:this.pixelFormat=e.RED;break;case s.R8I:case s.R8UI:case s.R16I:case s.R16UI:case s.R32I:case s.R32UI:this.pixelFormat=e.RED_INTEGER}}static validate(s,e){return new a(s,e)}}export{a as ValidatedTextureDescriptor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import{abortMaybe as i}from\"../../core/maybe.js\";import{throwIfAborted as r,isAbortError as s}from\"../../core/promiseUtils.js\";import{checkWebGLError as o}from\"./checkWebGLError.js\";import{TextureType as a,ResourceType as n,CompressedTextureFormat as p,TextureSamplingMode as l,TextureConstants as h,PixelFormat as m}from\"./enums.js\";import{FBOAttachmentType as d}from\"./FBOAttachmentType.js\";import{estimateMemory as c}from\"./TextureDescriptor.js\";import{isCompressedData as _,deriveInternalFormat as u,isTexImageSource as g,is3DTarget as T,validateTexture as x,isCompressedFormat as E,getDimensions as M,calcMipmapLevels as A,isSizedPixelFormat as b,isSizedDepthFormat as f,isSizedDepthStencilFormat as w}from\"./textureUtils.js\";import{ValidatedTextureDescriptor as I}from\"./ValidatedTextureDescriptor.js\";const R=null,D=()=>e.getLogger(\"esri/views/webgl/Texture\");let S=class e{static{this.TEXTURE_UNIT_FOR_UPDATES=0}static{this.compressionWorkerHandle=null}constructor(e,i=null,r=null){if(this.type=d.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,\"context\"in e)this._descriptor=e,r=i;else{const r=I.validate(e,i);if(!r)throw new t(\"texture:invalid-descriptor\",\"Texture descriptor invalid\");this._descriptor=r}this._descriptor.target===a.TEXTURE_CUBE_MAP?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return c(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this._descriptor.context.gl&&this.hasWebGLTextureObject&&(this._descriptor.context.instanceCounter.decrement(n.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-resize\",\"Immutable textures can't be resized!\");r.width=e,r.height=i,this._descriptor.target===a.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(t){this._descriptor.compress=t}disableCompression(){this._descriptor.compress=void 0}setData(t){this.abortCompression(),!_(t)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in p&&(this._descriptor.internalFormat=void 0),this._setData(t),!_(t)&&this._descriptor.compress&&this._compressOnWorker(t)}updateData(i,r,s,o,a,n,p=0){n||D().error(\"An attempt to use uninitialized data!\"),this.hasWebGLTextureObject||D().error(\"An attempt to update uninitialized texture!\");const l=this._descriptor;l.internalFormat=u(l);const{context:h,pixelFormat:m,dataType:d,target:c,isImmutable:T}=l;if(T&&!this._wasImmutablyAllocated)throw new t(\"texture:uninitialized\",\"Cannot update immutable texture before allocation!\");const x=h.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES,!0);(r<0||s<0||r+o>l.width||s+a>l.height)&&D().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:E}=h;p&&(o&&a||D().warn(\"Must pass width and height if `UNPACK_SKIP_ROWS` is used\"),E.pixelStorei(E.UNPACK_SKIP_ROWS,p)),g(n)?E.texSubImage2D(c,i,r,s,o,a,m,d,n):_(n)?E.compressedTexSubImage2D(c,i,r,s,o,a,l.internalFormat,n.levels[i]):E.texSubImage2D(c,i,r,s,o,a,m,d,n),p&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),h.bindTexture(x,e.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(i,r,s,o,a,n,p,l){l||D().error(\"An attempt to use uninitialized data!\"),this.hasWebGLTextureObject||D().error(\"An attempt to update an uninitialized texture!\");const h=this._descriptor;h.internalFormat=u(h);const{context:m,pixelFormat:d,dataType:c,isImmutable:g,target:x}=h;if(g&&!this._wasImmutablyAllocated)throw new t(\"texture:uninitialized\",\"Cannot update immutable texture before allocation!\");T(x)||D().warn(\"Attempting to set 3D texture data on a non-3D texture\");const E=m.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);m.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),(r<0||s<0||o<0||r+a>h.width||s+n>h.height||o+p>h.depth)&&D().error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:M}=m;if(_(l))l=l.levels[i],M.compressedTexSubImage3D(x,i,r,s,o,a,n,p,h.internalFormat,l);else{const t=l;M.texSubImage3D(x,i,r,s,o,a,n,p,d,c,t)}m.bindTexture(E,e.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const i=this._descriptor;if(0===i.width||0===i.height)return;if(!i.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-change\",\"Cannot add mipmaps to immutable texture after allocation\");i.hasMipmap=!0,this._samplingModeDirty=!0,x(i)}i.samplingMode===l.LINEAR?(this._samplingModeDirty=!0,i.samplingMode=l.LINEAR_MIPMAP_NEAREST):i.samplingMode===l.NEAREST&&(this._samplingModeDirty=!0,i.samplingMode=l.NEAREST_MIPMAP_NEAREST);const r=this._descriptor.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(i.target),this._descriptor.context.bindTexture(r,e.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"texture:immutable-change\",\"Cannot delete mipmaps to immutable texture after allocation\");e.hasMipmap=!1,this._samplingModeDirty=!0,x(e)}e.samplingMode===l.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=l.LINEAR):e.samplingMode===l.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=l.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,x(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(t){t!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=t,this.setSamplingMode(t?l.LINEAR:l.NEAREST),x(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=i(this._compressionAbortController)}_setData(i,r){const s=this._descriptor,a=s.context?.gl;if(!a)return;o(a),this.hasWebGLTextureObject||(this._glName=a.createTexture(),s.context.instanceCounter.increment(n.Texture,this)),x(s);const p=s.context.bindTexture(this,e.TEXTURE_UNIT_FOR_UPDATES);s.context.setActiveTexture(e.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),o(a);const l=r??s.target,h=T(l);if(g(i))this._setDataFromTexImageSource(i,l);else{const{width:e,height:r,depth:n}=s;if(null==e||null==r)throw new t(\"texture:missing-size\",\"Width and height must be specified!\");if(h&&null==n)throw new t(\"texture:missing-depth\",\"Depth must be specified!\");if(s.internalFormat=u(s),s.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(l,s.internalFormat,s.hasMipmap,e,r,n),_(i)){if(!E(s.internalFormat))throw new t(\"texture:format-mismatch\",\"Attempting to use compressed data with an uncompressed format!\");this._setDataFromCompressedSource(i,s.internalFormat,l)}else this._texImage(l,0,s.internalFormat,e,r,n,i),o(a),s.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),o(a),s.context.bindTexture(p,e.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(t=null){for(let e=a.TEXTURE_CUBE_MAP_POSITIVE_X;e<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(t,e)}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_setDataFromTexImageSource(t,e){const{gl:i}=this._descriptor.context,r=this._descriptor;r.internalFormat=u(r);const s=T(e),{width:a,height:n,depth:p}=M(t);r.width&&r.height,r.width||(r.width=a),r.height||(r.height=n),s&&r.depth,s&&(r.depth=p),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(e,r.internalFormat,r.hasMipmap,a,n,p),this._texImage(e,0,r.internalFormat,a,n,p,t),o(i),r.hasMipmap&&(this.generateMipmap(),o(i))}_setDataFromCompressedSource(t,e,i){const r=this._descriptor,{width:s,height:o,depth:a}=r,n=t.levels,p=A(i,s,o,a),l=Math.min(p,n.length)-1;this._descriptor.context.gl.texParameteri(r.target,h.MAX_LEVEL,l),this._forEachMipmapLevel(((t,r,s,o)=>{const a=n[Math.min(t,n.length-1)];this._compressedTexImage(i,t,e,r,s,o,a)}),l)}_texStorage(e,i,r,s,o,a){const{gl:n}=this._descriptor.context;if(!b(i)&&!f(i)&&!w(i))throw new t(\"texture:missing-format\",\"Immutable textures must have a sized internal format\");if(!this._descriptor.isImmutable)return;const p=r?A(e,s,o,a):1;if(T(e)){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");n.texStorage3D(e,p,i,s,o,a)}else n.texStorage2D(e,p,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,o,a,n){const p=this._descriptor.context.gl,l=T(e),{isImmutable:h,pixelFormat:m,dataType:d}=this._descriptor;if(h){if(null!=n){const r=n;if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.texSubImage3D(e,i,0,0,0,s,o,a,m,d,r)}else p.texSubImage2D(e,i,0,0,s,o,m,d,r)}}else{const h=n;if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.texImage3D(e,i,r,s,o,a,0,m,d,h)}else p.texImage2D(e,i,r,s,o,0,m,d,h)}}_compressedTexImage(e,i,r,s,o,a,n){const p=this._descriptor.context.gl,l=T(e);if(this._descriptor.isImmutable){if(null!=n)if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.compressedTexSubImage3D(e,i,0,0,0,s,o,a,r,n)}else p.compressedTexSubImage2D(e,i,0,0,s,o,r,n)}else if(l){if(null==a)throw new t(\"texture:missing-depth\",\"Missing depth dimension for 3D texture upload\");p.compressedTexImage3D(e,i,r,s,o,a,0,n)}else p.compressedTexImage2D(e,i,r,s,o,0,n)}async _compressOnWorker(t){const{width:i,height:o,context:a,flipped:n,preMultiplyAlpha:p,hasMipmap:l}=this._descriptor,h=this._descriptor.compress?.compressionTracker,d=this._descriptor.compress?.compressionCallback,{compressedTextureETC:c,compressedTextureS3TC:_}=a.capabilities;if(!e.compressionWorkerHandle?.isCompressible(t,this._descriptor)||!c&&!_)return;this.abortCompression();const u=new AbortController;this._compressionAbortController=u,h?.increment();try{let s;t instanceof Uint8Array?s=t.buffer:(s=await createImageBitmap(t,{imageOrientation:n?\"flipY\":\"none\"}),r(u));const a={data:s,width:i,height:o,needsFlip:t instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===m.RGBA?4:3,preMultiplyAlpha:p,hasMipmap:l,hasETC:!!c,hasS3TC:!!_},h=await e.compressionWorkerHandle.invoke(a,u.signal,\"low\");if(r(u),h.compressedTexture&&this.hasWebGLTextureObject){const t=this.usedMemory;this._descriptor.internalFormat=h.internalFormat,this._setData(h.compressedTexture),d?.(t-this.usedMemory)}}catch(g){s(g)||D().error(\"Texture compression failed!\")}finally{h?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null)}}_forEachMipmapLevel(e,i=1/0){let{width:r,height:s,depth:o,hasMipmap:n,target:p}=this._descriptor;const l=p===a.TEXTURE_3D;if(null==r||null==s||l&&null==o)throw new t(\"texture:missing-size\",\"Missing texture dimensions for mipmap calculation\");for(let t=0;e(t,r,s,o),n&&(1!==r||1!==s||l&&1!==o)&&!(t>=i);++t)r=Math.max(1,r>>1),s=Math.max(1,s>>1),l&&(o=Math.max(1,o>>1))}_applySamplingMode(){const t=this._descriptor,e=t.context?.gl;let i=t.samplingMode,r=t.samplingMode;i===l.LINEAR_MIPMAP_NEAREST||i===l.LINEAR_MIPMAP_LINEAR?(i=l.LINEAR,t.hasMipmap||(r=l.LINEAR)):i!==l.NEAREST_MIPMAP_NEAREST&&i!==l.NEAREST_MIPMAP_LINEAR||(i=l.NEAREST,t.hasMipmap||(r=l.NEAREST)),e.texParameteri(t.target,e.TEXTURE_MAG_FILTER,i),e.texParameteri(t.target,e.TEXTURE_MIN_FILTER,r)}_applyWrapMode(){const t=this._descriptor,e=t.context?.gl;\"number\"==typeof t.wrapMode?(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode)):(e.texParameteri(t.target,e.TEXTURE_WRAP_S,t.wrapMode.s),e.texParameteri(t.target,e.TEXTURE_WRAP_T,t.wrapMode.t))}_applyShadowMode(){const t=this._descriptor,e=t.context?.gl,i=t.compareEnabled?e.COMPARE_REF_TO_TEXTURE:e.NONE;e.texParameteri(t.target,e.TEXTURE_COMPARE_MODE,i),t.compareEnabled&&e.texParameteri(t.target,e.TEXTURE_COMPARE_FUNC,e.GREATER),o(e)}_applyAnisotropicFilteringParameters(){const t=this._descriptor,e=t.context.capabilities.textureFilterAnisotropic;if(!e)return;t.context.gl.texParameterf(t.target,e.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy??1)}};export{S as Texture,R as tracer};\n"],"names":["t","r","n","e","o","a","has","c","u","s","R","i","A","G","p","h","m","f","E","d","T","w","D","l","F","N","x","S","I","_","g","M","b"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}