{"version":3,"file":"KMLLayerView2D-CfGoqlrn.js","sources":["../../node_modules/@arcgis/core/layers/support/KMLMapImage.js","../../node_modules/@arcgis/core/views/support/imageReprojection.js","../../node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import r from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import s from\"../../geometry/Extent.js\";let p=class extends r{constructor(){super(...arguments),this.id=0,this.rotation=0,this.href=\"\",this.extent=new s}};o([t({nonNullable:!0,json:{write:!0}})],p.prototype,\"id\",void 0),o([t({nonNullable:!0,json:{write:!0}})],p.prototype,\"rotation\",void 0),o([t({nonNullable:!0,json:{write:!0}})],p.prototype,\"href\",void 0),o([t({type:s,nonNullable:!0,json:{write:!0}})],p.prototype,\"extent\",void 0),p=o([e(\"esri.layers.support.KMLMapImage\")],p);export{p as KMLMapImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{execute as r}from\"../../geometry/operators/projectOperator.js\";import{projectResolution as i,getProjectionOffsetGrid as a,load as s}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as n,rasterize as o}from\"../2d/engine/Bitmap.js\";import m from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as c}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{TextureWrapMode as p,PixelFormat as h,PixelType as x}from\"../webgl/enums.js\";import{FramebufferObject as u}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as d}from\"../webgl/rasterUtils.js\";import{RenderingContext as g}from\"../webgl/RenderingContext.js\";import{Texture as _}from\"../webgl/Texture.js\";import{TextureDescriptor as f}from\"../webgl/TextureDescriptor.js\";class l{static{this._instanceRefCount=0}constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(l._instance)return l._instanceRefCount++,l._instance;l._instanceRefCount=1,l._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl2\");t.getExtension(\"OES_texture_float\"),this._rctx=new g(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=c(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new m(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:c,y:g}=i(m,s,t.extent);let _=(c+g)/2;const l=Math.round((o.xmax-o.xmin)/_),w=Math.round((o.ymax-o.ymin)/_);_=(o.width/l+o.height/w)/2;const b=new e({x:_,y:_,spatialReference:o.spatialReference}),j=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:b,hasWrapAround:!0,spacing:[16,16]}),D=d(this._rctx,j),R=new f(l,w);R.wrapMode=p.CLAMP_TO_EDGE;const y=new u(this._rctx,R);this._rctx.bindFramebuffer(y),this._rctx.setViewport(0,0,l,w),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(D,1),this._quad.bind();const{width:C=0,height:E=0}=t.texture.descriptor;if(this._program.setUniform2f(\"u_srcImageSize\",C,E),this._program.setUniform2fv(\"u_transformSpacing\",j.spacing),this._program.setUniform2fv(\"u_transformGridSize\",j.size),this._program.setUniform2f(\"u_targetImageSize\",l,w),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),D.dispose(),n){const{width:t,height:e}=y,r=new ImageData(t??0,e??0);y.readPixels(0,0,t??0,e??0,h.RGBA,x.UNSIGNED_BYTE,r.data);const i=y.detachColorTexture();return y.dispose(),{texture:i,extent:o,imageData:r}}const T=y.detachColorTexture();return y.dispose(),{texture:T,extent:o}}reprojectBitmapData(t,e){const r=n(t.bitmapData)?o(t.bitmapData):t.bitmapData,i=new f;i.wrapMode=p.CLAMP_TO_EDGE,i.width=t.bitmapData.width,i.height=t.bitmapData.height;const a=new _(this._rctx,i,r),s=this.reprojectTexture({texture:a,extent:t.extent},e,!0);s.texture.dispose();const m=document.createElement(\"canvas\"),c=s.imageData;m.width=c.width,m.height=c.height;return m.getContext(\"2d\").putImageData(c,0,0),{bitmapData:m,extent:s.extent}}async loadAndReprojectBitmapData(e,r,i){const[a]=await Promise.all([t(e,{responseType:\"image\"}).then((t=>t.data)),s()]),n=document.createElement(\"canvas\");n.width=a.width,n.height=a.height;const o=n.getContext(\"2d\");o.drawImage(a,0,0);const m=o.getImageData(0,0,n.width,n.height);if(r.spatialReference.equals(i))return{bitmapData:m,extent:r};const c=this.reprojectBitmapData({bitmapData:m,extent:r},i);return{bitmapData:c.bitmapData,extent:c.extent}}destroy(){this._ownsRctx?(l._instanceRefCount--,0===l._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),l._instance=null)):(this._quad.dispose(),this._program.dispose())}}export{l as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{abortMaybe as s,destroyMaybe as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projectionUtils.js\";import d from\"../../../geometry/SpatialReference.js\";import{KMLMapImage as y}from\"../../../layers/support/KMLMapImage.js\";import{getGraphics as g,fetchService as w,parseKML as u}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as _}from\"../../../rest/utils.js\";import{GraphicsCollection as b}from\"../../../support/GraphicsCollection.js\";import{Bitmap as V}from\"../engine/Bitmap.js\";import{BitmapContainer as f}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as v}from\"./LayerView2D.js\";import S from\"./graphics/GraphicContainer.js\";import I from\"./graphics/GraphicsView2D.js\";import x from\"../../layers/LayerView.js\";import{ImageReprojector as C}from\"../../support/imageReprojection.js\";class j{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let k=class extends(v(x)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new f,this._kmlVisualData=new j,this._fetchController=null,this.allVisiblePoints=new b,this.allVisiblePolylines=new b,this.allVisiblePolygons=new b,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new I({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new S(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new I({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new S(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new I({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new S(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const i of this._kmlVisualData.allSublayers.values())i.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new C}detach(){this._fetchController=s(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=a(this._polygonsView),this._polylinesView=a(this._polylinesView),this._pointsView=a(this._pointsView),this._imageReprojector=a(this._imageReprojector)}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,e.extent,this.view.spatialReference).then((i=>{const t=new V(i.bitmapData);t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:o}=e;if(null!=s){if(null==t)throw new Error(\"Loading this network link requires a view state.\");let n;if(await m(),null!=a&&1!==a){const e=new p(t.extent);e.expand(a),n=e}else n=t.extent;n=c(n,d.WGS84);const h=c(n,d.WebMercator),y=n.xmin,g=n.xmax,w=n.ymin,u=n.ymax,b=t.size[0]*t.pixelRatio,V=t.size[1]*t.pixelRatio,f=Math.max(h.width,h.height),v={\"[bboxWest]\":y.toString(),\"[bboxEast]\":g.toString(),\"[bboxSouth]\":w.toString(),\"[bboxNorth]\":u.toString(),\"[lookatLon]\":n.center.x.toString(),\"[lookatLat]\":n.center.y.toString(),\"[lookatRange]\":f.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":n.center.x.toString(),\"[lookatTerrainLat]\":n.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":n.center.x.toString(),\"[cameraLat]\":n.center.y.toString(),\"[cameraAlt]\":f.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":b.toString(),\"[vertPixels]\":V.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},S=e=>{for(const i in e){let t;for(t in v)e[i]=e[i].replace(t,v[t])}},I=l(s);S(I);let x={};null!=o&&(x=l(o),S(x));const C=_(e.href);C.query={...C.query,...I,...x};return`${C.path}?${r(I)}`}return e.href}async _fetchService(e){const i=new j;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await g(s.points):[],a=s.polylines?await g(s.polylines):[],o=s.polygons?await g(s.polygons):[],l=s.mapImages?.map((e=>y.fromJSON(e)))??[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return w(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>u(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],k.prototype,\"_pointsView\",void 0),e([n()],k.prototype,\"_polylinesView\",void 0),e([n()],k.prototype,\"_polygonsView\",void 0),e([n()],k.prototype,\"updating\",void 0),k=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],k);const P=k;export{P as default};\n"],"names":["p","r","s","o","t","e","l","g","c","m","n","i","_","b","j","a","D","d","R","f","y","u","C","E","h","x","T","k","v","I","S","V","w","P"],"mappings":"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","x_google_ignoreList":[0,1,2]}