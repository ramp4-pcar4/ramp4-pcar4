import"./main-BFDurRCu.js";function C(n){return n?{originPosition:n.originPosition==="upper-left"?"upperLeft":n.originPosition==="lower-left"?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance,1,1]:[1,1,1,1],translate:n.extent!=null?[n.extent.xmin,n.extent.ymax,n.extent.zmin??0,n.extent.mmin??0]:[0,0,0,0]}:null}function D(n){return n.originPosition==="lowerLeft"&&n.scale.length===4&&n.translate.length===4}function w(n){if(D(n))return n;const{originPosition:e,scale:t,translate:s}=n,l=t[0]??1,o=t[1]??1;return{originPosition:"lowerLeft",scale:[l,e==="lowerLeft"?o:-o,t[2]??1,t[3]??1],translate:[s[0]??0,s[1]??0,s[2]??0,s[3]??0]}}function p({scale:n,translate:e},t){return Math.round((t-e[0])/n[0])}function M({scale:n,translate:e},t){return Math.round((t-e[1])/n[1])}function m({scale:n,translate:e},t){return Math.round(((t??0)-e[2])/n[2])}function Z({scale:n,translate:e},t){return t?Math.round((t-e[3])/n[3]):0}function k(n,e){return n&&e?q:n&&!e?U:!n&&e?b:H}const H=(n,e)=>{const t=[];if(!e.length)return null;const s=e[0];let l=p(n,s[0]),o=M(n,s[1]);t.push([l,o]);for(let r=1;r<e.length;r++){const[u,i]=e[r],c=p(n,u),a=M(n,i);c===l&&a===o||t.push([c-l,a-o]),l=c,o=a}return t},U=(n,e)=>{const t=[];if(!e.length)return null;const s=e[0];let l=p(n,s[0]),o=M(n,s[1]),r=m(n,s[2]);t.push([l,o,r]);for(let u=1;u<e.length;u++){const[i,c,a]=e[u],h=p(n,i),f=M(n,c),g=m(n,a);h===l&&f===o&&g===r||t.push([h-l,f-o,g]),l=h,o=f,r=g}return t},b=(n,e)=>{const t=[];if(!e.length)return null;const s=e[0];let l=p(n,s[0]),o=M(n,s[1]),r=Z(n,s[2]);t.push([l,o,r]);for(let u=1;u<e.length;u++){const[i,c,a]=e[u],h=p(n,i),f=M(n,c),g=Z(n,a);h===l&&f===o&&g===r||t.push([h-l,f-o,g]),l=h,o=f,r=g}return t},q=(n,e)=>{const t=[];if(!e.length)return null;const s=e[0];let l=p(n,s[0]),o=M(n,s[1]),r=m(n,s[2]),u=Z(n,s[3]);t.push([l,o,r,u]);for(let i=1;i<e.length;i++){const[c,a,h,f]=e[i],g=p(n,c),x=M(n,a),A=m(n,h),d=Z(n,f);g===l&&x===o&&A===r&&d===u||t.push([g-l,x-o,A,d]),l=g,o=x,r=A,u=d}return t};function v(n,e,t,s){const l=[],o=k(t,s);for(let r=0;r<e.length;r++){const u=o(n,e[r]);u&&u.length>=3&&l.push(u)}return l.length?l:null}function E(n,e,t,s){const l=[],o=k(t,s);for(let r=0;r<e.length;r++){const u=o(n,e[r]);u&&u.length>=2&&l.push(u)}return l.length?l:null}function P({scale:n,translate:e},t){return t*n[0]+e[0]}function y({scale:n,translate:e},t){return t*n[1]+e[1]}function L({scale:n,translate:e},t){return(t??0)*n[2]+e[2]}function z({scale:n,translate:e},t){return t?t*n[3]+e[3]:0}function j(n,e){return n&&e?K:n&&!e?I:!n&&e?J:G}const G=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const s=e[0];let l=P(n,s[0]),o=y(n,s[1]);t[0]=[l,o];const{scale:r,originPosition:u}=n,i=r[0],c=u==="lowerLeft"?r[1]:-r[1];for(let a=1;a<e.length;a++){const[h,f]=e[a];l+=i*h,o+=c*f,t[a]=[l,o]}return t},I=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const s=e[0];let l=P(n,s[0]),o=y(n,s[1]);t[0]=[l,o,L(n,s[2])];const{scale:r,originPosition:u}=n,i=r[0],c=u==="lowerLeft"?r[1]:-r[1];for(let a=1;a<e.length;a++){const[h,f,g]=e[a];l+=i*h,o+=c*f,t[a]=[l,o,L(n,g)]}return t},J=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const s=e[0];let l=P(n,s[0]),o=y(n,s[1]);t[0]=[l,o,z(n,s[2])];const{scale:r,originPosition:u}=n,i=r[0],c=u==="lowerLeft"?r[1]:-r[1];for(let a=1;a<e.length;a++){const[h,f,g]=e[a];l+=i*h,o+=c*f,t[a]=[l,o,z(n,g)]}return t},K=(n,e)=>{const t=new Array(e.length);if(!e.length)return t;const s=e[0];let l=P(n,s[0]),o=y(n,s[1]);t[0]=[l,o,L(n,s[2]),z(n,s[3])];const{scale:r,originPosition:u}=n,i=r[0],c=u==="lowerLeft"?r[1]:-r[1];for(let a=1;a<e.length;a++){const[h,f,g,x]=e[a];l+=i*h,o+=c*f,t[a]=[l,o,L(n,g),z(n,x)]}return t};function B(n,e,t){const s=new Array(t.length);for(let l=0;l<t.length;l++)s[l]=e(n,t[l]);return s}function N(n,e,t){const s=w(n);return e.x=p(s,t.x),e.y=M(s,t.y),t.z!=null&&(e.z=m(s,t.z)),t.m!=null&&(e.m=Z(s,t.m)),e}function O(n,e,t){const s=v(w(n),t.rings,t.hasZ,t.hasM);return s?(e.rings=s,e.hasZ=t.hasZ??!1,e.hasM=t.hasM??!1,e):null}function Q(n,e,t){const s=E(w(n),t.paths,t.hasZ,t.hasM);return s?(e.paths=s,e.hasZ=t.hasZ??!1,e.hasM=t.hasM??!1,e):null}function R(n,e,t,s=t?.hasZ??!1,l=t?.hasM??!1){if(t!=null){const o=w(n);e.points=j(s,l)(o,t.points),e.hasZ=s,e.hasM=l}return e}function S(n,e,t,s=t?.z!=null,l=t?.m!=null){if(t==null)return e;const o=w(n);return e.x=P(o,t.x),e.y=y(o,t.y),s&&(e.z=L(o,t.z)),l&&(e.m=z(o,t.m)),e}function T(n,e,t,s=t?.hasZ??!1,l=t?.hasM??!1){if(t!=null){const o=w(n);e.rings=B(o,j(s,l),t.rings),e.hasZ=s,e.hasM=l}return e}function V(n,e,t,s=t?.hasZ??!1,l=t?.hasM??!1){if(t!=null){const o=w(n);e.paths=B(o,j(s,l),t.paths),e.hasZ=s,e.hasM=l}return e}export{R as B,S as C,T as D,V as H,O as U,M as a,p as i,N as j,Q as k,C as s,w as u};
