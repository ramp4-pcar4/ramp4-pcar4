{"version":3,"file":"uniqueValues-CeH9QqUm.js","sources":["../../node_modules/@arcgis/core/smartMapping/support/binningUtils.js","../../node_modules/@arcgis/core/smartMapping/statistics/support/WorkerClient.js","../../node_modules/@arcgis/core/rest/query/executeQuery.js","../../node_modules/@arcgis/core/rest/generateRenderer.js","../../node_modules/@arcgis/core/rest/support/GenerateRendererParameters.js","../../node_modules/@arcgis/core/rest/support/UniqueValueDefinition.js","../../node_modules/@arcgis/core/smartMapping/statistics/support/predominanceUtils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/LayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/utils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/histogramUtils.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/InMemoryLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/FeatureLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/CSVLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/FeatureLayerBinningAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/SceneLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/PointCloudLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/StreamLayerAdapter.js","../../node_modules/@arcgis/core/smartMapping/support/adapters/support/layerUtils.js","../../node_modules/@arcgis/core/smartMapping/statistics/uniqueValues.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport r from\"../../core/Error.js\";const e=\"aggregateCount\";function i(e,i){if(!e.view)throw new r(`${i}:missing-parameters`,\"'view' parameter is required for binning\");if(e.sqlExpression)throw new r(`${i}:invalid-parameters`,\"'sqlExpression' parameter is not supported for binning\");if(\"3d\"===e.view.type)throw new r(`${i}:invalid-parameters`,\"3d view is not supported for binning\")}export{e as aggregateCountField,i as verifyBinningParams};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Error.js\";import{open as e}from\"../../../core/workers/workers.js\";class n{constructor(){this.connection=null}async open(t){this.connection=await e(\"statsWorker\",{strategy:\"distributed\",signal:t})}destroy(){this.connection?.close()}static getInstance(){return n.instance||(n.instance=new n),n.instance}async summaryStatistics(e,n){if(!this.connection)throw new t(\"worker-client:summary-statistics\",\"connection is required\");return this.connection.invoke(\"summaryStatistics\",{attribute:e,features:n})}async uniqueValues(e,n){if(!this.connection)throw new t(\"worker-client:unique-values\",\"connection is required\");return this.connection.invoke(\"uniqueValues\",{attribute:e,features:n})}async classBreaks(e,n){if(!this.connection)throw new t(\"worker-client:class-breaks\",\"connection is required\");return this.connection.invoke(\"classBreaks\",{attribute:e,features:n})}async histogram(e,n){if(!this.connection)throw new t(\"worker-client:histogram\",\"connection is required\");return this.connection.invoke(\"histogram\",{attribute:e,features:n})}async heatmapStatistics(e,n){if(!this.connection)throw new t(\"worker-client:heatmap-statistics\",\"connection is required\");return this.connection.invoke(\"heatmapStatistics\",{attribute:e,features:n})}}export{n as WorkerClient};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import has from\"../../core/has.js\";import{whenOrAbort as o}from\"../../core/promiseUtils.js\";import{getGlbFormatId as r,getGltfFormatId as e}from\"../../layers/support/infoFor3D.js\";import{DataLayerSource as n}from\"../../layers/support/source/DataLayerSource.js\";import{executeRawQueryJSON as s}from\"./executeQueryJSON.js\";import{executeRawQueryPBF as a}from\"./executeQueryPBF.js\";import i from\"../support/FeatureSet.js\";import u from\"../support/Query.js\";async function f(t,o,r,e,n){return m(o,await c(t,o,r,e,n),r,e)}async function c(t,o,r,e,n){const i={...e},u=p(o,r),f=null!=o.outStatistics?.[0],c=has(\"featurelayer-pbf-statistics\"),m=!f||c;let d;if(\"pbf\"===r?.format&&m)try{d=await a(t,u,i,n)}catch(y){if(\"query:parsing-pbf\"!==y.name)throw y;r.format=\"json\"}return\"json\"!==r?.format&&m||(d=await s(t,u,i,n)),l(r?.fieldsIndex,d.fields),d}function l(t,o){if(null!=t&&null!=o)for(const r of o){const o=t.get(r.name);o&&Object.assign(r,o.toJSON())}}async function m(t,r,e,n){const s=e?.infoFor3D;if(!d(t,s)||null==s||!r.assetMaps||!r.features?.length)return i.fromJSON(r);const{meshFeatureSetFromJSON:a}=await o(import(\"../support/meshFeatureSet.js\"),n);return a(t,s,r)}function p(o,s){let a=u.from(o);a.sourceSpatialReference=a.sourceSpatialReference??s?.sourceSpatialReference??null,(s?.gdbVersion||s?.dynamicDataSource)&&(a=a===o?a.clone():a,a.gdbVersion=o.gdbVersion||s.gdbVersion,a.dynamicDataSource=o.dynamicDataSource?n.from(o.dynamicDataSource):s.dynamicDataSource);const i=s?.infoFor3D;if(null!=i&&d(o,i)){a=a===o?a.clone():a,a.formatOf3DObjects=null;const n=r(i),s=e(i);for(const t of i.queryFormats){if(t===n){a.formatOf3DObjects=t;break}t!==s||a.formatOf3DObjects||(a.formatOf3DObjects=t)}if(!a.formatOf3DObjects)throw new t(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(null==a.outFields||!a.outFields.includes(\"*\")){a=a===o?a.clone():a,null==a.outFields&&(a.outFields=[]);const{originX:t,originY:r,originZ:e,translationX:n,translationY:s,translationZ:u,scaleX:f,scaleY:c,scaleZ:l,rotationX:m,rotationY:p,rotationZ:d,rotationDeg:y}=i.transformFieldRoles;a.outFields.push(t,r,e,n,s,u,f,c,l,m,p,d,y)}}return a}function d(t,o){return null!=o&&!0===t.returnGeometry&&\"xyFootprint\"!==t.multipatchOption&&!t.outStatistics}export{f as executeQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";import{fromJSON as t}from\"../renderers/support/jsonUtils.js\";import{parseUrl as n}from\"./utils.js\";import{executeQuery as i}from\"./query/executeQuery.js\";import a from\"./support/Query.js\";import s from\"./support/StatisticDefinition.js\";async function l(t,i,a,s){const l=n(t),{source:r,checkValueRange:u}=i,{classificationDefinition:c}=a,f={...a.toJSON(),f:\"json\"};let m=null;if(m=\"class-breaks-definition\"===c?.type?c.classificationField:c?.attributeField,r){const e={source:r?.toJSON()};f.layer=JSON.stringify(e)}f.classificationDef&&(f.classificationDef=JSON.stringify(f.classificationDef));let p={query:f};s&&(p={...s,...p});const y={url:l.path,field:m,checkValueRange:u},d=l.path+\"/generateRenderer\";return e(d,p).then((e=>o(y,e)))}function o(e,t){const{field:n,checkValueRange:l,url:o}=e,u=t?.data;if(!u)return;if(!l){const e=r(u);return Promise.resolve(e)}const c=new s({statisticType:\"min\",onStatisticField:n}),f=new s({statisticType:\"max\",onStatisticField:n}),m=new a({outStatistics:[c,f]});return i(o,m).then((e=>{const t=e.features[0].attributes;let n=null,i=null;for(const a in t)0===a.toLowerCase().indexOf(\"min\")?n=t[a]:i=t[a];return r(u,n,i)}))}function r(e,n,i){if(\"classBreaks\"===e.type){const a=t(e);return{classBreaks:a.classBreakInfos.map(((e,t)=>(0===t&&null!=n&&(e.minValue=n),t===a.classBreakInfos.length-1&&null!=i&&(e.maxValue=i),{minValue:e.minValue,maxValue:e.maxValue,label:e.label}))),normalizationTotal:a.normalizationTotal}}const{uniqueValueInfos:a}=e;return{uniqueValues:a?.map(((e,t)=>(0===t&&null!=n&&(e.value=n),t===a.length-1&&null!=i&&(e.value=i),{count:e.count,value:e.value,label:e.label})))??[]}}export{l as generateRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import o from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let t=class extends o{constructor(r){super(r),this.classificationDefinition=null,this.where=null}};r([e({json:{name:\"classificationDef\",write:!0}})],t.prototype,\"classificationDefinition\",void 0),r([e({type:String,json:{write:!0}})],t.prototype,\"where\",void 0),t=r([s(\"esri.rest.support.GenerateRendererParameters\")],t);export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/JSONSupport.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends e{constructor(t){super(t),this.type=\"unique-value-definition\",this.attributeField=null,this.attributeField2=null,this.attributeField3=null,this.fieldDelimiter=null}get uniqueValueFields(){const t=[];return this.attributeField&&t.push(this.attributeField),this.attributeField2&&t.push(this.attributeField2),this.attributeField3&&t.push(this.attributeField3),t}};t([r({uniqueValueDef:\"unique-value-definition\"})],s.prototype,\"type\",void 0),t([i()],s.prototype,\"attributeField\",void 0),t([i()],s.prototype,\"attributeField2\",void 0),t([i()],s.prototype,\"attributeField3\",void 0),t([i({json:{write:!0}})],s.prototype,\"fieldDelimiter\",void 0),t([i({json:{write:!0}})],s.prototype,\"uniqueValueFields\",null),s=t([o(\"esri.rest.support.UniqueValueDefinition\")],s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isIntegerField as n,castIntegerFieldToFloat as a}from\"../../support/utils.js\";const e=\"no_dominant_category\";function l(n){return`(${n.map((n=>`${n} >= 0`)).join(\" OR \")})`}function u(n){return{expression:r(n,{returnFieldName:!0,defaultValue:`'${e}'`})}}function r(e,l){const{returnFieldName:u,defaultValue:r,layer:t}=l,i=[];if(u&&r){const n=e.map((n=>`${n} <= 0`)).join(\" AND \");i.push(`WHEN ${n} THEN ${r}`)}for(const o of e){const l=e.reduce(((n,a)=>(o!==a&&n.push(`${o} > ${a}`),n)),[]).join(\" AND \"),r=t&&n(t,o),s=u&&`'${o}'`?`'${o}'`:r?a(o):o;i.push(`WHEN ${l} THEN ${s}`)}return`CASE ${i.join(\" \")} ELSE ${r||\"0\"} END`}function t(n,a){const e=a.join(\" + \"),u={sqlExpression:`(${e})`,sqlWhere:l(a)},t={sqlExpression:`(( (${r(a,{layer:n})}) / (${e}) ) * 100)`,sqlWhere:`${l(a)} AND ((${e}) > 0)`};return{predominantCategory:{valueExpression:s(a)},size:{valueExpression:$(a),statisticsQuery:u,histogramQuery:u},opacity:{valueExpression:V(a),statisticsQuery:t,histogramQuery:t}}}function i(n){return n&&n.map((n=>`$feature[\"${n}\"];`)).join(\"\\n\")+\"\\n\"||\"\"}function o(n,a=!1){const e=n.map((n=>`\"${n}\"`)),l=\"\\n  if(value != null && value >= 0) {\\n    if (totalValue == null) { totalValue = 0; }\\n    totalValue = totalValue + value;\\n  }\\n  \";return`\\n  var fieldNames = [ ${e.join(\", \")} ];\\n  var numFields = ${e.length};\\n  var maxValueField = null;\\n  var maxValue = -Infinity;\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numFields; i++) {\\n    value = $feature[fieldNames[i]];\\n\\n    if(value > 0) {\\n      if(value > maxValue) {\\n        maxValue = value;\\n        maxValueField = fieldNames[i];\\n      }\\n      else if (value == maxValue) {\\n        maxValueField = null;\\n      }\\n    }\\n    ${a?l:\"\"}\\n  }\\n  `}function s(n){const a=o(n);return`\\n  ${i(n)}\\n  ${a}\\n  return maxValueField;\\n  `}function f(n){const a=o(n);return`\\n  ${i(n)}\\n  ${a}\\n  return maxValue;\\n  `}function v(n,a){const e=m(n),l=i(e),u=n.map((n=>n.label?`\"${n.label}\"`:`\"${n.fieldName}\"`)),r=e.map((n=>`Number($feature[\"${n}\"])`)),t=[];return a&&a.forEach(((n,a)=>{t.push(`function getValueForExpr${a}() {\\n  ${n.expression} \\n}`),r.push(`Number(getValueForExpr${a}())`),u.push(`\"${n.title||n.name}\"`)})),`\\n  ${l}\\n\\n  ${t.length?t.join(\"\\n\"):\"\"}\\n\\n  var values = [ ${r.join(\", \")} ];\\n  var aliases = [ ${u.join(\", \")} ];\\n  var numValues = ${r.length};\\n  var maxValueAlias = null;\\n  var maxValue = -Infinity;\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numValues; i++) {\\n    value = values[i];\\n\\n    if(value > 0) {\\n      if(value > maxValue) {\\n        maxValue = value;\\n        maxValueAlias = aliases[i];\\n      }\\n      else if (value == maxValue) {\\n        maxValueAlias = \"Tie\";\\n      }\\n    }\\n  }\\n  return maxValueAlias;\\n  `}function m(n){return n.filter((({fieldName:n})=>!!n)).map((n=>n.fieldName))}function p(n){return`\\n  ${i(n)}\\n  var fieldValues = [ ${n.map((n=>`$feature[\"${n}\"]`)).join(\", \")} ];\\n  var totalValue = Sum(fieldValues);\\n  var order = Reverse(Sort(fieldValues));\\n  return IIF(totalValue > 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\\n  `}function $(n){const a=i(n),e=n.map((n=>`\"${n}\"`));return`\\n  ${a}\\n  var fieldNames = [ ${e.join(\", \")} ];\\n  var numFields = ${e.length};\\n  var value, i, totalValue = null;\\n\\n  for(i = 0; i < numFields; i++) {\\n    value = $feature[fieldNames[i]];\\n\\n    if(value != null && value >= 0) {\\n      if (totalValue == null) { totalValue = 0; }\\n      totalValue = totalValue + value;\\n    }\\n  }\\n\\n  return totalValue;\\n  `}function V(n){const a=o(n,!0);return`\\n  ${i(n)}\\n  ${a}\\n\\n  var strength = null;\\n\\n  if (maxValueField != null && totalValue > 0) {\\n    strength = (maxValue / totalValue) * 100;\\n  }\\n\\n  return strength;\\n  `}function c(n,a){const e=i(m(n)),l=n.map((n=>`{\\n    value: Number($feature[\"${n.fieldName}\"]),\\n    alias: \"${n.label||n.fieldName}\"\\n    }`)),u=[];return a&&a.forEach(((n,a)=>{u.push(`function getValueForExpr${a}() {\\n  ${n.expression} \\n}`),l.push(`{\\n          value: Number(getValueForExpr${a}()),\\n          alias: \"${n.title||n.name}\"\\n          }`)})),`\\n  ${e}\\n\\n  ${u.length?u.join(\"\\n\"):\"\"}\\n\\n  var groups = [ ${l.join(\", \")} ];\\n  var numTopValues = Count(groups);\\n\\n  function getValuesArray(arr){\\n    var valuesArray = []\\n    for(var i in arr){\\n      valuesArray[i] = arr[i].value;\\n    }\\n    return valuesArray;\\n  }\\n\\n  function findAliases(top5Array, fullArray){\\n    var aliases = [];\\n    var found = \"\";\\n    for(var i in top5Array){\\n      for(var k in fullArray){\\n        if(top5Array[i] == fullArray[k].value && Find(fullArray[k].alias, found) == -1){\\n          found += fullArray[k].alias;\\n          aliases[Count(aliases)] = {\\n            alias: fullArray[k].alias,\\n            value: top5Array[i]\\n          };\\n        }\\n      }\\n    }\\n    return aliases;\\n  }\\n\\n  function getTopGroups(groupsArray){\\n    var values = getValuesArray(groupsArray);\\n    var top5Values = IIF(Max(values) > 0, Top(Reverse(Sort(values)),numTopValues), \"no data\");\\n    var top5Aliases = findAliases(top5Values,groupsArray);\\n\\n    if(TypeOf(top5Values) == \"String\"){\\n      return top5Values;\\n    } else {\\n      var content = \"\";\\n      for(var i in top5Aliases){\\n        if(top5Aliases[i].value > 0){\\n          content += (i+1) + \". \" + top5Aliases[i].alias + \" (\" + Text(top5Aliases[i].value, \"#,###\") + \")\";\\n          content += IIF(i < numTopValues-1, TextFormatting.NewLine, \"\");\\n        }\\n      }\\n    }\\n\\n    return content;\\n  }\\n\\n  getTopGroups(groups);\\n  `}export{m as fieldNamesFromFieldInfos,c as getArcadeForOrderedFields,p as getArcadeForPredominanceMargin,s as getArcadeForPredominantCategory,v as getArcadeForPredominantCategoryAlias,f as getArcadeForPredominantCategoryValue,V as getArcadeForStrengthOfPredominance,$ as getArcadeForSumOfFields,t as getPredominanceExpressions,u as getSQLForPredominantCategoryName,e as noDominantCategoryField};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Loadable.js\";import{property as e}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";let p=class extends r{constructor(o){super(o),this.adapterName=\"layer-adapter\"}};o([e({readOnly:!0})],p.prototype,\"adapterName\",void 0),o([e({constructOnly:!0})],p.prototype,\"layer\",void 0),o([e()],p.prototype,\"geometryType\",void 0),o([e()],p.prototype,\"objectIdField\",void 0),o([e()],p.prototype,\"supportsSQLExpression\",void 0),o([e()],p.prototype,\"hasQueryEngine\",void 0),o([e()],p.prototype,\"minScale\",void 0),o([e()],p.prototype,\"maxScale\",void 0),o([e()],p.prototype,\"fullExtent\",void 0),p=o([t(\"esri.smartMapping.support.adapters.LayerAdapter\")],p);export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/arrayUtils.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{CodedValue as n}from\"../../../../layers/support/CodedValue.js\";import\"../../../../core/has.js\";import l from\"../../../../layers/support/CodedValueDomain.js\";import\"../../../../layers/support/Domain.js\";import\"../../../../layers/support/InheritedDomain.js\";import\"../../../../layers/support/RangeDomain.js\";import i from\"../../../../layers/support/Field.js\";import{isStringField as o,isTimeOnlyField as a}from\"../../../../layers/support/fieldUtils.js\";import r from\"../../../../rest/support/StatisticDefinition.js\";import{noDominantCategoryField as s}from\"../../../statistics/support/predominanceUtils.js\";import{getRangeExpr as u,getSQLFilterForNormalization as c,mergeWhereClauses as m}from\"../../../statistics/support/utils.js\";import{isIntegerField as f,isAnyDateField as p,getDateDiffSQL as d,castIntegerFieldToFloat as y}from\"../../utils.js\";import{isNullCountSupported as g,statisticTypes as x,getEqualIntervalBins as v,processNullValue as h}from\"../../../../statistics/utils.js\";const F=/_value$/i,w=Math.LOG10E,E={SECOND:1e3,MINUTE:6e4,HOUR:36e5},S=10;function T(e){return e.map((e=>e.toJSON()))}function V(e,t){const n=[],l=e.layer,i=\"featureReduction\"in l?l.featureReduction:null,o=\"binning\"===i?.type,a=null!=i&&\"fields\"in i?i.fields?.map((e=>e.name?.toLowerCase())).filter(Boolean):[];if(!o||!t)return n;for(const r of t)a.includes(r.toLowerCase())||n.push(r);return n}function z(e,t,n){const l=[];if(t)for(const i of t){const t=e.getField(i);t&&n&&\"availableFields\"in n&&!n.availableFields?.includes(t.name)&&l.push(t.name)}return l}function $(e,t){const n=e&&e.features;if(0===n?.length)return{avg:null,count:0,max:null,median:null,min:null,nullcount:0,stddev:null,sum:null,variance:null};const l=n?.[0]?.attributes,i={};for(const o in l)i[o.replace(F,\"\").toLowerCase()]=l[o];return null!=i.totalcount&&i.totalcount>=i.count&&(i.nullcount=i.totalcount-i.count),delete i.totalcount,i.min===i.max&&null!=i.min&&null==i.stddev&&(i.stddev=i.variance=0),t&&([\"min\",\"max\",\"avg\",\"stddev\",\"sum\",\"variance\"].forEach((e=>{null!=i[e]&&(i[e]=Math.ceil(i[e]))})),i.min===i.max&&null!=i.min&&(i.avg=i.min,i.stddev=i.variance=0)),i}function C(e){const t=[],n=e.classBreaks,l=n[0].minValue,i=n[n.length-1].maxValue;n.forEach((e=>{t.push([e.minValue,e.maxValue])}));const o={field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,layer:e.layer};return{min:l,max:i,intervals:t,sqlExpr:j(o),excludeZerosExpr:e.where,normTotal:e.normalizationTotal}}function j(e){const{field:t,normalizationType:n,normalizationField:l,normalizationTotal:i,layer:o}=e,a=f(o,t);let r=t;return\"percent-of-total\"===n?r=`((${a?y(t):t} / ${i}) * 100)`:\"log\"===n?r=`(log(${t}) * ${w})`:\"field\"===n?r=`(${a?y(t):t} / ${l})`:\"natural-log\"===n?r=`(log(${a?y(t):t}))`:\"square-root\"===n&&(r=`(power(${a?y(t):t}, 0.5))`),r}function q(e,t){let n;if(t=t.toLowerCase(),e)for(const l in e)if(l.toLowerCase()!==t){n=e[l];break}return n}function b(e,t){let n;if(t=t.toLowerCase(),e)for(const l in e)if(l.toLowerCase()===t){n=e[l];break}return n}function O(e,t,n,l,i){const o={},a=\"countOFExpr\";e&&e.features&&e.features.forEach((e=>{const t=e.attributes,n=q(t,a),l=b(t,a);null!=n&&null!=l&&0!==n&&(o[n]=l)}));const r=[];return v(t,n,l).forEach(((e,t)=>{const n=(t+1).toString();r.push({minValue:e[0],maxValue:e[1],count:o.hasOwnProperty(n)?o[n]:0})})),{bins:r,minValue:t,maxValue:n,normalizationTotal:i}}async function L(e,n){const l=e&&e.features,{field:i,field2:o,field3:a,fieldDelimiter:r,layer:s,view:u,signal:c,labels:m}=n,f=`countOF${!(!i||!o)?\"Expr\":i||\"Expr\"}`,p={};let d=!1;for(const t of l){const e=t.attributes,n=b(e,f);let l=i?b(e,i):q(e,f),s=o?b(e,o):null,u=a?b(e,a):null;null===l&&0===n&&(d=!0),(null==l||\"string\"==typeof l&&\"\"===l.trim())&&(l=null),o&&(null==s||\"string\"==typeof s&&\"\"===s.trim())&&(s=null),a&&(null==u||\"string\"==typeof u&&\"\"===u.trim())&&(u=null);let c=l;o&&(c=`${h(c)}${r}${h(s)}`,a&&(c=`${c}${r}${h(u)}`)),null==p[c]?p[c]={count:n,data:c}:p[c].count=p[c].count+n}if(i&&d){const e=i+\" is NULL\";try{const t=await s.queryFeatureCount({whereClause:e,view:u,signal:c});return p.null.count=p.null.count+t,R(p,m)}catch{return t(c),R(p,m)}}return R(p,m)}function R(e,t){if(t)for(const n in e)e[n].label=t[n];return{count:e}}async function D(e,t,i){const o=e?i.getField(e):null,a=o?i.getFieldDomain(o.name):null;if(a)return a;const{uniqueValueInfos:r}=await i.uniqueValues({field:e,sqlWhere:t.sqlWhere,features:t.features,useFeaturesInView:t.useFeaturesInView,view:t.view,signal:t.signal}),s=r.map((e=>new n({code:e.value})));return new l({codedValues:s})}async function I(e,t){if(!e.returnAllCodedValues)return[];const{field:n,field2:l,field3:i}=e;if(n&&!l){const e=n?t.getField(n):null,l=e?t.getFieldDomain(e.name):null;return l?[l]:[]}const o=[];return n&&(o.push(D(n,e,t)),l&&(o.push(D(l,e,t)),i&&o.push(D(i,e,t)))),Promise.all(o)}function N(e,t){return d(e,new Date(0),t,\"milliseconds\").sqlExpression}function U(e,t){return`EXTRACT(${t} FROM ${e}) * ${E[t]}`}function M(e){if(!e)return null;return y([\"HOUR\",\"MINUTE\",\"SECOND\"].map((t=>`(${U(e,t)})`)).join(\" + \"))}function B(e){return{viewingMode:\"2d\"===e.type?\"map\":e.viewingMode,scale:e.scale,spatialReference:e.spatialReference?.toJSON()}}function Q(e,t){const n=new Set(e.map((e=>e.value))),l=t.filter((e=>!n.has(e)));for(const i of l)e.push({value:i,count:0});e.sort(((e,n)=>t.indexOf(e.value)-t.indexOf(n.value)));for(const i of e)i.value===s&&(i.value=null);return{predominantCategoryInfos:e}}function P(t){const n=\"featureReduction\"in t?t.featureReduction:null;return((null!=n&&\"fields\"in n?n.fields:null)??[]).map((e=>{const n=W(e,t.fieldsIndex);return n?new i({type:n,name:e.name,alias:e.alias}):null})).filter(e)}function W(e,t){switch(e.statisticType){case\"avg\":case\"avg_angle\":return\"double\";case\"count\":return\"integer\";case\"min\":case\"max\":case\"sum\":return e.onStatisticField?t.get(e.onStatisticField)?.type??null:e.onStatisticExpression?\"string\"===e.onStatisticExpression.returnType?null:\"double\":null;case\"mode\":return e.onStatisticField?t.get(e.onStatisticField)?.type??null:e.onStatisticExpression?\"string\"===e.onStatisticExpression.returnType?\"string\":\"double\":null;default:return null}}function _(e,t){return p(t)?N(e,t?.name):a(t)?M(t?.name):null}function k(e,t,n,l=!0){const{field:i,normalizationType:a,normalizationField:s,normalizationTotal:f,minValue:p,maxValue:d,filter:y}=t,v=e.supportsSQLExpression?_(e,n)||t.sqlExpression:null,h=j({field:i,normalizationType:a,normalizationField:s,normalizationTotal:f,layer:e}),F=v||h,w=F?u(F,p,d):null,E=c({field:i,normalizationField:s,normalizationType:a}),S=m(t.sqlWhere,E),T=m(S,w),V=g({normalizationField:s,normalizationType:a,sqlExpression:v,supportsSQLExpression:e.supportsSQLExpression,minValue:p,maxValue:d}),z=o(e.getField(i??void 0)),{include:$,exclude:C}=t.outStatisticTypes||{},q=x.filter((e=>(!$||$.includes(e))&&(!C||!C.includes(e))&&(\"nullcount\"===e?V:!z||\"count\"===e)&&(\"median\"!==e||l))),b=e.createQuery();return b.where=m(b.where,T),b.sqlFormat=v?\"standard\":null,b.outStatistics=q.map((t=>{const n=new r;let l=null,i=null,o=`${t}_value`;if(\"variance\"===t)l=\"var\",i=F;else if(\"nullcount\"===t){const t=e.objectIdField;l=\"count\",i=t&&e.getField(t)?t:\"1\",o=\"totalcount_value\"}else\"median\"===t?(l=\"percentile-continuous\",i=F,n.statisticParameters={value:.5}):(l=t,i=F);return n.statisticType=l,n.onStatisticField=i,n.outStatisticFieldName=o,n})),A(b,y),b}function A(e,t){t&&(e.geometry=t.geometry,e.spatialRelationship=t.spatialRelationship)}function H(e,t){const{field:n,field2:l,field3:i,sqlExpression:o}=t,a=!(!n||!l),r=e.createQuery();return r.where=m(r.where,t.sqlWhere),r.sqlFormat=o?\"standard\":null,r.outStatistics=[J(a?null:n,a?\"1\":o)].filter(Boolean),r.groupByFieldsForStatistics=[n||o,l,i].filter(Boolean),A(r,t.filter),r}function J(e,t){const n=\"countOF\"+(e||\"Expr\"),l=new r;return l.statisticType=\"count\",l.onStatisticField=t?\"1\":e,l.outStatisticFieldName=n,l}function Z(e,t,n,l=S,i,o,a){const{min:r,max:s,normTotal:u,excludeZerosExpr:c}=t,m=t.intervals||v(r,s,l),f=t.sqlExpr||n;return G(e,m,f,c,i,o,a).then((e=>({bins:e.map(((e,t)=>({minValue:m[t][0],maxValue:m[t][1],count:\"fulfilled\"===e.status?e.value:0}))),minValue:r,maxValue:s,normalizationTotal:u})))}function G(e,t,n,l,i,o,a){const r=[],s=t.length;for(let u=0;u<s;u++){const e=m(l,m(n+\" >= \"+t[u][0],null!==t[u][1]?n+(u===s-1?\" <= \":\" < \")+t[u][1]:\"\"));r.push(e)}return Promise.allSettled(r.map((t=>e.queryFeatureCount({whereClause:t,view:i,filter:o,signal:a}))))}export{S as defaultNumBins,T as ensureFeaturesJSON,C as generateBinParams,W as getAggregateFieldType,Z as getBins,I as getDomainsForFields,P as getFeatureReductionFields,j as getFieldExpr,O as getHistogramFromFeatureSet,z as getMissingFields,V as getMissingFieldsForBinning,Q as getPredominantCategoriesFromUVInfos,_ as getSQLExpressionForDateOrTimeField,$ as getSummaryStatisticsFromFeatureSet,k as getSummaryStatsQuery,H as getUVQuery,L as getUniqueValuesFromFeatureSet,B as getViewInfoParams,M as msForTimeOnlyFieldSQL,N as msSinceUnixEpochSQL,A as updateQueryWithFeatureFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport i from\"../../../../core/Error.js\";import{resolveTimeZone as e}from\"../../../../intl/date.js\";import{isTimeOnlyField as n,isDateField as t,isTimestampOffsetField as a,isDateOnlyField as r}from\"../../../../layers/support/fieldUtils.js\";import o from\"../../../../rest/support/AttributeBinsQuery.js\";import l from\"../../../../rest/support/AutoIntervalBinParameters.js\";import s from\"../../../../rest/support/DateBinParameters.js\";import u from\"../../../../rest/support/FixedBoundariesBinParameters.js\";import m from\"../../../../rest/support/FixedIntervalBinParameters.js\";import d from\"../../../../rest/support/GenerateRendererParameters.js\";import p from\"../../../../rest/support/StatisticDefinition.js\";import{getSQLFilterForNormalization as f,mergeWhereClauses as c,getRangeExpr as y}from\"../../../statistics/support/utils.js\";import{isAnyDateField as z}from\"../../utils.js\";import{getSQLExpressionForDateOrTimeField as v,getFieldExpr as x,updateQueryWithFeatureFilter as w,defaultNumBins as T,generateBinParams as h,getViewInfoParams as F}from\"./utils.js\";import{createClassBreaksDefinition as B}from\"../../../../statistics/utils.js\";const V=\"countOFExpr\",j=\"lowerBoundary\",q=\"upperBoundary\";function I(i,e,t){const a=i.valueExpression||i.sqlExpression,r=i.signal;if(!a){const{field:a,normalizationType:o,normalizationField:l}=i,s=a?e.getField(a):null,u=z(s)||n(s),m={field:a,normalizationType:o,normalizationField:l,normalizationTotal:t,layer:e};return{sqlExpression:u?v(e,s):x(m),sqlWhere:u?null:i.sqlWhere||f({field:a,normalizationType:o,normalizationField:l}),filter:i.filter,signal:r}}return{valueExpression:i.valueExpression,sqlExpression:i.sqlExpression,sqlWhere:i.sqlWhere,filter:i.filter,signal:r}}async function M(i,e,n){const{field:t,normalizationType:a,normalizationField:r,signal:o}=i,l=f({field:t,normalizationType:a,normalizationField:r}),s=new d({classificationDefinition:B({field:t,normalizationType:a,normalizationField:r,classificationMethod:i.classificationMethod,standardDeviationInterval:i.standardDeviationInterval,definedInterval:i.definedInterval,breakCount:i.numBins||T}),where:c(l,n)});return e.generateRenderer(s,o).then((i=>{const{normalizationTotal:n,classBreaks:o}=i;return h({field:t,normalizationType:a,normalizationField:r,normalizationTotal:n,classBreaks:o,where:l,layer:e})}))}async function g(e,t,a,o,d){const{field:p,sqlExpression:f,normalizationField:c,classificationMethod:z,normalizationType:v}=e,w=p?t.getField(p):null,h=n(w),F=r(w)||h,B=e.numBins||T;if(F){if(v||z)throw new i(`${t.adapterName}:not-supported`,\"NormalizationType and classificationMethod are not supported for date-only and time-only fields\");const e=(o-a)/B/1e3,n=e/86400;return new s({field:p,expression:f,interval:{unit:h?\"seconds\":\"days\",value:Math.ceil(h?e:n)},start:a,end:o})}if(\"defined-interval\"===z)return new m({field:p,expression:f,normalizationField:c,normalizationTotal:d,normalizationType:v,interval:e.definedInterval??Math.ceil((o-a)/B),start:v?null:a,end:v?null:o,normalizationMinValue:v?a:null,normalizationMaxValue:v?o:null});if(\"manual\"===z)throw new i(`${t.adapterName}:not-supported`,\"Layer does not support manual classificationMethod\");if(\"natural-breaks\"===z||\"quantile\"===z||\"standard-deviation\"===z){const n=x({field:p,normalizationField:c,normalizationTotal:d,normalizationType:v,layer:t}),r=null!==e.minValue&&null!==e.maxValue?y(n,e.minValue,e.maxValue):void 0,o=await M(e,t,r);if(!o.intervals)throw new i(`${t.adapterName}:invalid`,\"Invalid intervals returned from generate renderer\");const l=[a,...o.intervals.map((i=>i[1]))];return new u({field:v?null:p,expression:v?n:f,boundaries:l})}return new l({field:p,normalizationField:c,normalizationTotal:d,normalizationType:v,expression:f,numBins:B,start:v?null:a,end:v?null:o,normalizationMinValue:v?a:null,normalizationMaxValue:v?o:null})}function E(i,e,n,t){return null!=n&&null!=t?Promise.resolve({min:n,max:t}):e.summaryStatistics({...i,outStatisticTypes:{include:[\"min\",\"max\"]}}).then((i=>({min:i.min,max:i.max})))}async function b(i,n,r,l){const{field:s,minValue:u,maxValue:m,filter:d,view:f}=i,y=s?n.getField(s):null,z=t(y)||a(y),v=I(i,n,r),{min:x,max:T}=await E(v,n,u,m);if(null==x||null==T)return{query:null,min:x,max:T};const h=new p({statisticType:\"count\",outStatisticFieldName:V,onStatisticField:\"1\"}),F=c(l,v.sqlWhere),B=\"lowerBoundary\",j=\"upperBoundary\",q=new o({binParameters:await g(i,n,x,T,r),outStatistics:[h],binOrder:i.sortOrder,where:F,lowerBoundaryAlias:B,upperBoundaryAlias:j,outTimeZone:f?.timeZone&&z?e(f.timeZone):null});return w(q,d),{query:q,min:x,max:T}}function D(i,e=!1){if(\"string\"!=typeof i)return i;return(e?new Date(`1970-01-01T${i}Z`):new Date(i)).getTime()}function P(i,e,t){const a=n(e);return{...t,bins:i.features.map((i=>({minValue:D(i.attributes[j],a),maxValue:D(i.attributes[q],a),count:i.attributes[V]})))}}function S(i,e,n){const{valueExpression:t,view:a}=i,{featuresJSON:r,graphics:o,fieldInfos:l}=e,s={field:i.field,valueExpression:t,normalizationType:i.normalizationType,normalizationField:i.normalizationField,normalizationTotal:n,minValue:i.minValue,maxValue:i.maxValue,standardDeviationInterval:i.standardDeviationInterval,classificationMethod:i.classificationMethod,numBins:i.numBins};return t&&a&&(r||o)&&(s.viewInfoParams=F(a),s.timeZone=a.timeZone,s.fieldInfos=l),s}export{M as binParamsFromGenRend,D as formatHistogramBinValue,b as getAttributeBinsQuery,E as getDataRange,S as getHistogramAttributeDefinition,I as getQueryParamsForExpr,P as processQueryAttributeBinsResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{pickRandom as t}from\"../../../core/arrayUtils.js\";import r from\"../../../core/Error.js\";import a from\"../../../core/Logger.js\";import{assertIsSome as i}from\"../../../core/maybe.js\";import{timeout as s,throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{whenOnce as n}from\"../../../core/reactiveUtils.js\";import{property as l}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import{subclass as u}from\"../../../core/accessorSupport/decorators/subclass.js\";import{toQuantizationTransform as m}from\"../../../geometry/support/quantizationUtils.js\";import{kebabDict as p}from\"../../../layers/support/fieldType.js\";import{isTimeOnlyField as y}from\"../../../layers/support/fieldUtils.js\";import c from\"../../../rest/support/QuantizationParameters.js\";import{getArcadeForPredominantCategory as f}from\"../../statistics/support/predominanceUtils.js\";import{summaryStatistics as d,uniqueValues as h,histogram as w,classBreaks as g,heatmapStatistics as F}from\"../../statistics/support/statsWorker.js\";import{mergeWhereClauses as S}from\"../../statistics/support/utils.js\";import{WorkerClient as v}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as q,isAnyDateField as V,fieldDelimiter as x}from\"../utils.js\";import _ from\"./LayerAdapter.js\";import{getHistogramAttributeDefinition as z,getAttributeBinsQuery as T,processQueryAttributeBinsResult as N}from\"./support/histogramUtils.js\";import{ensureFeaturesJSON as M,getSummaryStatsQuery as L,getSummaryStatisticsFromFeatureSet as C,getViewInfoParams as E,getMissingFields as j,updateQueryWithFeatureFilter as b,getUVQuery as k,getUniqueValuesFromFeatureSet as I,getBins as O,getDomainsForFields as Q,getPredominantCategoriesFromUVInfos as J}from\"./support/utils.js\";import{processSummaryStatisticsResult as B,createUVResult as P,resolveCBResult as U}from\"../../../statistics/utils.js\";import{loadArcade as A}from\"../../../support/loadArcade.js\";const $=5;let G=null,R=class extends _{constructor(){super(...arguments),this._hasLocalSource=!1,this.adapterName=\"in-memory-layer-adapter\"}destroy(){this.workerClient?.destroy()}async _waitForLayerViewUpdate(e){if(!e)throw new r(`${this.adapterName}:insufficient-data`,\"layerView is required to fetch the features\");const t=new AbortController,i=n((()=>!e.updating),t.signal);await s(i,5e3,t).catch((e=>{throw a.getLogger(this).warn(\"LayerView is taking too long to update. Aborting fetch from layerView.\"),e}))}async _fetchFeatureSetFromMemory(e,t,a){const i=this.layer;if(this._hasLocalSource&&\"queryFeatures\"in i)return i.queryFeatures(e);if(!t)throw new r(`${this.adapterName}:insufficient-data`,\"view is required to fetch the features from layerView\");const s=await t.whenLayerView(this.layer);return await this._waitForLayerViewUpdate(s),s.queryFeatures(e,{signal:a})}async _fetchFeaturesFromMemory(e,t,a,i){const s=this.layer,o=\"json\"===i;if(this._hasLocalSource&&\"queryFeatures\"in s){const e=await s.queryFeatures(t);return o?M(e.features):e.features}if(await this._waitForLayerViewUpdate(e),o&&\"queryFeaturesJSON\"in e&&e.queryFeaturesJSON){const{features:r}=await e.queryFeaturesJSON(t,{signal:a});return r}if(!(\"queryFeatures\"in e))throw new r(`${this.adapterName}:not-supported`,\"'queryFeatures' is not supported on the layerView\");const n=await e.queryFeatures(t,{signal:a});return o?M(n.features):n.features}_fetchFeaturesForStats(e,t){return q({field:e.field,field2:e.field2,field3:e.field3,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then((r=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,filter:e.filter,requiredFields:r,signal:e.signal},t)))}async _summaryStatsFromClientQuery(e,t){const{view:r,signal:a}=e,i=L(this,e,t),s=await this._fetchFeatureSetFromMemory(i,r,a),o=C(s,V(t)||y(t));return B(o,e.outStatisticTypes)}async _getNormalizationTotalFromMemory(e,t,a){const{featuresJSON:i,graphics:s,layerView:o,query:n}=t,l={include:[\"sum\"]},u=(!i&&!s&&o&&\"querySummaryStatistics\"in o?await o.querySummaryStatistics(n,{field:e},{signal:a}):i?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:l},i):await d({attribute:{field:e,outStatisticTypes:l},features:s??[]})).sum;if(null==u)throw new r(`${this.adapterName}:invalid`,\"invalid normalizationTotal\");return u}async _summaryStatsFromMemory(e,t){const{view:r,field:a,valueExpression:i,normalizationType:s,signal:o}=e,n={field:a,valueExpression:i,normalizationType:s,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:l,graphics:u,layerView:m,query:y,fieldInfos:c}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"querySummaryStatistics\"});return i&&r&&(l||u)&&(n.fieldType=t?.type?p.toJSON(t.type):null,n.viewInfoParams=E(r),n.timeZone=r.timeZone,n.fieldInfos=c),\"percent-of-total\"===s&&null==e.normalizationTotal&&(n.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:l,graphics:u,layerView:m,query:y},o)),!l&&!u&&m&&\"querySummaryStatistics\"in m?m.querySummaryStatistics(y,n,{signal:o}):l?this.workerClient.summaryStatistics(n,l):d({attribute:n,features:u})}async _getFilteredFeatures(e,t){let r=e;const a=t?.geometry;if(\"intersects\"===t?.spatialRelationship&&a){const t=await import(\"../../../geometry/operators/intersectionOperator.js\");r=e.filter((({geometry:e})=>!(!e||!t.execute(e,a))))}return e.length&&\"declaredClass\"in e[0]&&\"esri.Graphic\"===e[0].declaredClass?{graphics:r}:{featuresJSON:r}}async _processStatsFromMemoryParams(e){const{features:t,filter:r}=e;if(t?.length)return this._getFilteredFeatures(t,r);const{view:a,field:i,field2:s,field3:o,normalizationField:n,valueExpression:l,layerViewFunc:u,signal:m}=e;let p=e.returnGeometry;if(null==p&&l){if(!G){const{arcadeUtils:e}=await A();G=e}const e=G.hasGeometryOperations(l);e&&await G.enableGeometryOperations(),p=e}let y=null,c=null,f=null,d=null,h=null;if(a)try{const e=\"subtype-sublayer\"===this.layer.type?this.layer.parent:this.layer;y=await a.whenLayerView(e),c=null!=u&&u in y&&\"function\"==typeof y[u]}catch{c=!1}if(c)try{await this._waitForLayerViewUpdate(y);const e=await q({field:i,field2:s,field3:o,normalizationField:n,valueExpression:l});j(this,e,y).length?c=!1:(f=this.layer.createQuery(),f.outFields=e,f.returnGeometry=!1,b(f,r)),y.suspended&&(c=!1)}catch{c=!1}return c||(d=await this._fetchFeaturesForStats({field:i,field2:s,field3:o,valueExpression:l,normalizationField:n,returnGeometry:p,filter:r,view:a,signal:m},\"json\"),h=(await q({valueExpression:l})).map((e=>this.getField(e)?.toJSON())).filter(Boolean)),{layerView:y,query:f,featuresJSON:d,fieldInfos:h}}async _uvFromClientQuery(e,t){const{view:r,signal:a}=e,i=k(this,e),s=await this._fetchFeatureSetFromMemory(i,r,a),o=await I(s,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:x,view:e.view,signal:e.signal});return P(o,t,e.returnAllCodedValues,x)}async _uvFromMemory(e,t){const{view:r,field:a,valueExpression:i,returnAllCodedValues:s,signal:o}=e,{featuresJSON:n,graphics:l,layerView:u,query:m,fieldInfos:p}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryUniqueValues\"}),y={field:a,field2:e.field2,field3:e.field3,fieldDelimiter:x,valueExpression:i,domains:t,returnAllCodedValues:s};return i&&r&&(n||l)&&(y.viewInfoParams=E(r),y.timeZone=r.timeZone,y.fieldInfos=p),!n&&!l&&u&&\"queryUniqueValues\"in u?u.queryUniqueValues(m,y,{signal:o}):n?this.workerClient.uniqueValues(y,n):h({attribute:y,features:l})}_histogramForField(e){let t=null;return t=null!=e.minValue&&null!=e.maxValue?Promise.resolve({min:e.minValue,max:e.maxValue}):this.summaryStatistics({...e,outStatisticTypes:{include:[\"min\",\"max\",\"count\"]}}).then((e=>{if(!e.count)throw new r(`${this.adapterName}:insufficient-data`,\"Either the layer has no features or none of the features have data for the field\");return{min:e.min,max:e.max}})),t.then((t=>O(this,{min:t.min,max:t.max},e.field,e.numBins??void 0,e.view,e.filter,e.signal)))}async _histogramFromQueryAttributeBinsFromMemory(e){const{field:t,normalizationType:r,signal:a}=e,i=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAttributeBins\"}),{featuresJSON:s,graphics:o,layerView:n,query:l}=i,u=\"percent-of-total\"===r?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,i,a):void 0;if(!n||!(\"queryAttributeBins\"in n)||s||o){const t=z(e,i,u);return s?this.workerClient.histogram(t,s):w({attribute:t,features:o})}const{query:m,min:p,max:y}=await T(e,this,u,l?.where);if(!m)return{bins:[],minValue:p,maxValue:y,normalizationTotal:u};const c=await n.queryAttributeBins(m,{signal:a});return N(c,t?this.getField(t):null,{minValue:p,maxValue:y,normalizationTotal:u})}async _histogramFromMemory(e){const{field:t,signal:r}=e,a=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryHistogram\"}),{featuresJSON:i,graphics:s,layerView:o,query:n}=a,l=\"percent-of-total\"===e.normalizationType?e.normalizationTotal??await this._getNormalizationTotalFromMemory(t,a,r):void 0,u=z(e,a,l);return!i&&!s&&o&&\"queryHistogram\"in o?o.queryHistogram(n,u,{signal:r}):i?this.workerClient.histogram(u,i):w({attribute:u,features:s})}_classBreaksFromInterpolation(e){const{minValue:t,maxValue:r}=e,a=e.numClasses||$,i=[],s=(r-t)/a;for(let l=0;l<a;l++){const e=t+l*s;i.push({minValue:e,maxValue:e+s})}i[a-1].maxValue=r;const o={classBreaks:i,normalizationTotal:e.normalizationTotal},n=U(o,e.classificationMethod);return Promise.resolve(n)}async _classBreaksFromMemory(e){const{view:t,field:r,valueExpression:a,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryClassBreaks\"}),m={field:r,valueExpression:a,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return a&&t&&(s||o)&&(m.viewInfoParams=E(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryClassBreaks\"in n?n.queryClassBreaks(l,m,{signal:i}):s?this.workerClient.classBreaks(m,s):g({attribute:m,features:o})}async _heatmapStatsFromMemory(e){const{view:t,field:r,radius:a,signal:s}=e;i(t,\"InMemoryLayerAdapter: must have a view\");try{const r=await t.whenLayerView(this.layer);if(\"queryHeatmapStatistics\"in r&&!r.updating&&!e.filter)return await r.queryHeatmapStatistics({field:e.field,radius:e.radius})}catch{o(s)}const{featuresJSON:n,graphics:l}=await this._processStatsFromMemoryParams({...e,returnGeometry:!0}),u=new c({extent:t.extent,tolerance:\"2d\"===t.type?t.state.resolution:t.pixelSizeAt?.(t.center)}),p={field:r,radius:a,transform:m(u),spatialReference:t.spatialReference?.toJSON(),size:t.size};return n?.length||l?.length?n?this.workerClient.heatmapStatistics(p,n):F({attribute:p,features:l}):{min:null,max:null}}getField(e=\"\"){return this.layer.getField(e)}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:null}getFieldDomain(e,t){return this.layer.getFieldDomain(e,t)}createQuery(){return this.layer.createQuery()}async summaryStatistics(e){const{field:t,valueExpression:a,sqlExpression:i,features:s,view:o}=e,n=t?this.getField(t):null,l=!!a,u=\"3d\"===o?.type;if(!a&&i&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return l||s||u?this._summaryStatsFromMemory(e,n):this._summaryStatsFromClientQuery(e,n)}async uniqueValues(e){const{valueExpression:t,sqlExpression:a,features:i,view:s}=e,o=await Q(e,this),n=!!t,l=\"3d\"===s?.type;if(!t&&a&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return n||i||l?this._uvFromMemory(e,o):this._uvFromClientQuery(e,o)}async histogram(e){const{features:t,valueExpression:a,normalizationType:i,sqlExpression:s}=e,o=t||!!a;if(!a&&s&&!this.supportsSQLExpression)throw new r(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return o||i?this._histogramFromMemory(e):this._histogramForField(e)}async classBreaks(e){return!1!==e.analyzeData?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)}async queryFeatureCount(e){const{whereClause:t,view:a,signal:i}=e;if(!a)throw new r(`${this.adapterName}:insufficient-data`,\"view is required to fetch the features from layerView\");const s=this.layer.createQuery();s.where=S(s.where,t);const o=await a.whenLayerView(this.layer);return await n((()=>!o.updating),i),o.queryFeatureCount(s,{signal:i})}async generateRenderer(e,t){throw new r(`${this.adapterName}:not-supported`,\"Layer does not support generateRenderer operation\")}async predominantCategories(e){const{fields:t,view:r,signal:a,filter:i}=e,s=f(t),o=await this._uvFromMemory({valueExpression:s,view:r,signal:a,filter:i});return J(o.uniqueValueInfos,t)}async heatmapStatistics(e){return this._heatmapStatsFromMemory(e)}async getSampleFeatures(e,a){const{view:i,sampleSize:s,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e,m=this.layer.createQuery(),p=1;if(m.outSpatialReference=i?.spatialReference,m.returnGeometry=!!n,m.outFields=o,b(m,l),!i)throw new r(`${this.adapterName}:not-supported`,\"view is required to get sample features for Layer\");const y=await i.whenLayerView(this.layer);if(j(this,o,y).length)throw new r(`${this.adapterName}:not-supported`,\"Required fields need to be passed in the outFields for Layer\");const c=await this._fetchFeaturesFromMemory(y,m,u,a),f=null!=s&&s>0&&s<=c.length?s:c.length;return t(c,f,p)}load(e){const t=this.layer.load(e).then((async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=\"stream\"===t.type||!!t.capabilities?.query?.supportsSqlExpression,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=\"fullExtent\"in t?t.fullExtent:t.parent?.fullExtent,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=v.getInstance(),await this.workerClient.open(e.signal)}));return this.addResolvingPromise(t),Promise.resolve(this)}};e([l({readOnly:!0})],R.prototype,\"adapterName\",void 0),e([l({constructOnly:!0})],R.prototype,\"layer\",void 0),R=e([u(\"esri.smartMapping.support.adapters.InMemoryLayerAdapter\")],R);export{R as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{pickRandom as r}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import{throwIfAborted as s}from\"../../../core/promiseUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isHostedAgolService as n}from\"../../../layers/support/arcgisLayerUrl.js\";import{isTimeOnlyField as l,isNumericField as u}from\"../../../layers/support/fieldUtils.js\";import{generateRenderer as m}from\"../../../rest/generateRenderer.js\";import c from\"../../../rest/support/GenerateRendererParameters.js\";import p from\"../../../rest/support/StatisticDefinition.js\";import h from\"../../../rest/support/UniqueValueDefinition.js\";import{getArcadeForPredominantCategory as d,getSQLForPredominantCategoryName as y}from\"../../statistics/support/predominanceUtils.js\";import{mergeWhereClauses as f,getRangeExpr as F,getSQLFilterForNormalization as S}from\"../../statistics/support/utils.js\";import{WorkerClient as g}from\"../../statistics/support/WorkerClient.js\";import{isAnyDateField as w,fieldDelimiter as v}from\"../utils.js\";import x from\"./InMemoryLayerAdapter.js\";import{getQueryParamsForExpr as _,getDataRange as q,getAttributeBinsQuery as E,processQueryAttributeBinsResult as z,binParamsFromGenRend as V}from\"./support/histogramUtils.js\";import{ensureFeaturesJSON as L,getSummaryStatsQuery as T,getSummaryStatisticsFromFeatureSet as Q,getUVQuery as j,getUniqueValuesFromFeatureSet as b,defaultNumBins as N,updateQueryWithFeatureFilter as C,getHistogramFromFeatureSet as B,getFieldExpr as M,getDomainsForFields as R,getBins as I,getPredominantCategoriesFromUVInfos as $,getMissingFields as O}from\"./support/utils.js\";import{processSummaryStatisticsResult as k,createUVResult as A,getEqualIntervalBins as D,createClassBreaksDefinition as G,resolveCBResult as U}from\"../../../statistics/utils.js\";import{getScaleToResolutionFactor as P}from\"../../../views/2d/viewpointUtils.js\";const J=5,W=2e4,H=4e5;let Z=class extends x{constructor(){super(...arguments),this.adapterName=\"feature-layer-adapter\"}_isStatsSupportedOnService(){const e=this.layer;if(!e.capabilities?.query?.supportsStatistics||\"multipatch\"===this.geometryType&&!n(e.url)&&e.version<10.5)throw new i(`${this.adapterName}:not-supported`,\"Layer does not support statistics query\");return Promise.resolve()}_fetchFeaturesFromService(e,t){return this.layer.queryFeatures(e,{signal:t}).then((e=>e.features))}_fetchFeaturesJSONFromService(e,t){return this._fetchFeaturesFromService(e,t).then(L)}_summaryStatsFromGenRend(e){const t=e.normalizationType,r=e.normalizationField;return this.classBreaks({field:e.field,numClasses:J,classificationMethod:\"standard-deviation\",standardDeviationInterval:.25,normalizationType:t,normalizationField:\"field\"===t?r:void 0,minValue:e.minValue,maxValue:e.maxValue,filter:e.filter,signal:e.signal}).then((t=>{let r,i,s;if(t.classBreakInfos?.some((e=>(e.hasAvg&&(r=e),!!r))),r){const e=r.maxValue-r.minValue;i=r.minValue+e/2,s=4*e}const a={min:t.minValue,max:t.maxValue,avg:i,stddev:s};return k(a,e.outStatisticTypes)}))}async _summaryStatsFromServiceQuery(e,t){await this._isStatsSupportedOnService(),\"percent-of-total\"===e.normalizationType&&(e.normalizationTotal=await this._getNormalizationTotal(e.field,e.normalizationType,e.filter));const r=w(t)||l(t),i=\"capabilities\"in this.layer?this.layer.capabilities:null,s=T(this,e,t,i?.query?.supportsPercentileStatistics??!1),a=await this.layer.queryFeatures(s,{signal:e.signal}),o=Q(a,r);return k(o,e.outStatisticTypes)}_uvFromGenRenderer(e,t){const r=e.field??void 0,i=new h({attributeField:r}),s=new c({classificationDefinition:i});return this.generateRenderer(s,e.signal).then((e=>{const t={},i=this.getField(r);return e.uniqueValues.forEach((e=>{let r=e.value;null!=r&&\"\"!==r&&(\"string\"!=typeof r||\"\"!==r.trim()&&\"<null>\"!==r.toLowerCase())||(r=null),null==t[r]?t[r]={count:e.count,data:u(i)&&r?Number(r):r}:t[r].count=t[r].count+e.count})),{count:t}})).then((r=>A(r,[t],e.returnAllCodedValues)))}async _uvFromServiceQuery(e,t){return this._isStatsSupportedOnService().then((()=>this.layer.queryFeatures(j(this,e),{signal:e.signal}))).then((t=>b(t,{layer:this,field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:v,view:e.view,signal:e.signal}))).then((r=>A(r,t,e.returnAllCodedValues,v)))}_getNormalizationTotal(e,t,r,i){return e&&\"percent-of-total\"===t?this.summaryStatistics({field:e,outStatisticTypes:{include:[\"sum\"]},filter:r,signal:i}).then((e=>e.sum)):Promise.resolve(null)}_histogramForExpr(e){return this._getNormalizationTotal(e.field,e.normalizationType,e.filter,e.signal).then((t=>{const r=_(e,this,t);return q(r,this,e.minValue,e.maxValue).then((i=>{const s=i.min,a=i.max;if(null==s||null==a)return{bins:[],minValue:s,maxValue:a,normalizationTotal:t};const o=e.numBins||N,n=D(s,a,o),l=K(r.sqlExpression,n,null!=e.minValue&&null!=e.maxValue),u=new p({statisticType:\"count\",outStatisticFieldName:\"countOFExpr\",onStatisticField:\"1\"}),m=this.layer.createQuery();return m.where=f(m.where,r.sqlWhere),m.sqlFormat=\"standard\",m.outStatistics=[u],m.groupByFieldsForStatistics=[l],m.orderByFields=[l],C(m,e.filter),this._isStatsSupportedOnService().then((()=>this.layer.queryFeatures(m,{signal:r.signal}))).then((e=>B(e,s,a,o,t)))}))}))}async _histogramFromQueryAttributeBins(e){const{field:t,normalizationType:r,filter:i,signal:s}=e,a=await this._getNormalizationTotal(t,r,i,s),o=this.layer.createQuery(),{query:n,min:l,max:u}=await E(e,this,a,o?.where);if(!n)return{bins:[],minValue:l,maxValue:u,normalizationTotal:a};const m=await this.layer.queryAttributeBins(n,{signal:s});return z(m,t?this.getField(t):null,{minValue:l,maxValue:u,normalizationTotal:a})}_classBreaksFromGenRend(e){const{field:t,normalizationType:r,normalizationField:i,normalizationTotal:s,signal:a}=e,o=S({field:t,normalizationType:r,normalizationField:i}),n=M({field:t,normalizationType:r,normalizationField:i,normalizationTotal:s,layer:this}),l=F(n,e.minValue,e.maxValue),u=G({field:t,normalizationType:r,normalizationField:i,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||J}),m=new c({classificationDefinition:u});return m.where=f(o,l),this.generateRenderer(m,a).then((t=>U(t,e.classificationMethod)))}async summaryStatistics(e){const{field:t,normalizationType:r,valueExpression:a,sqlExpression:o,view:n,features:u,useFeaturesInView:m}=e,c=t?this.getField(t):null,p=w(c)||l(c),h=a&&!(o&&this.supportsSQLExpression),d=this._hasLocalSource||u||m,y=n&&\"3d\"===n.type;if(d||h)return h||u||m||y?this._summaryStatsFromMemory(e,c):this._summaryStatsFromClientQuery(e,c);if(!this.supportsSQLExpression&&(p||o||\"natural-log\"===r||\"square-root\"===r))throw new i(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return(r&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(e):this._summaryStatsFromServiceQuery(e,c)).catch((()=>(s(e.signal),this._summaryStatsFromMemory(e,c))))}async uniqueValues(e){const{valueExpression:t,sqlExpression:r,features:i,useFeaturesInView:a,signal:o}=e,n=t&&!(r&&this.supportsSQLExpression),l=this._hasLocalSource||i||a||n,u=e.view,m=u&&\"3d\"===u.type,c=await R(e,this);return l?n||i||a||m?this._uvFromMemory(e,c):this._uvFromClientQuery(e,c):this._uvFromServiceQuery(e,c).catch((t=>(s(o),!e.field||e.field2||e.field3||e.filter?t:this._uvFromGenRenderer(e,c[0])))).catch((()=>(s(o),m?this._uvFromMemory(e,c):this._uvFromClientQuery(e,c))))}async histogram(e){const{field:t,normalizationType:r,normalizationField:a,classificationMethod:o,view:n,filter:u,signal:m}=e,c=t?this.getField(t):null,p=w(c)||l(c),h=e.valueExpression||e.sqlExpression,d=e.valueExpression&&!(e.sqlExpression&&this.supportsSQLExpression),y=this._hasLocalSource||e.features||e.useFeaturesInView||d,f=this.supportsSQLExpression,S=!o||\"equal-interval\"===o,g=e.minValue,v=e.maxValue,x=null!=g&&null!=v,_=e.numBins||N;if(y)return this._histogramFromMemory(e);if(this.layer.capabilities?.operations?.supportsQueryBins&&e.useQueryAttributeBins)try{return await this._histogramFromQueryAttributeBins(e)}catch{return s(m),this._histogramFromQueryAttributeBinsFromMemory(e)}if((h||f)&&S){if(!f&&(h||\"natural-log\"===r||\"square-root\"===r))throw new i(`${this.adapterName}:not-supported`,\"Layer does not support standardized SQL expression for queries\");return this._histogramForExpr(e)}if(p&&S)throw new i(`${this.adapterName}:not-supported`,\"Normalization and date field are not allowed when layer does not support standardized SQL expression for queries\");return r||!S?V(e,this).then((s=>{if(!x)return I(this,s,t,_,n,u,m);if(g>s.max||v<s.min)throw new i(`${this.adapterName}:insufficient-data`,\"Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field\");if(S)return I(this,{min:g,max:v,sqlExpr:s.sqlExpr,excludeZerosExpr:s.excludeZerosExpr},t,_,n,u,m);{const i={field:t,normalizationType:r,normalizationField:a,normalizationTotal:s.normTotal,layer:this},o=M(i),l=F(o,g,v);return V(e,this,l).then((e=>I(this,e,t,_,n,u,m)))}})):this._histogramForField(e)}async classBreaks(e){const t=!1!==e.analyzeData,r=this._hasLocalSource||e.features||e.useFeaturesInView||e.valueExpression||e.filter;if(t&&r)return this._classBreaksFromMemory(e);return(t?this._classBreaksFromGenRend(e):this._classBreaksFromInterpolation(e)).catch((()=>(s(e.signal),this._classBreaksFromMemory(e))))}async queryFeatureCount(e){if(this._hasLocalSource)throw new i(`${this.adapterName}:not-supported`,\"Layer does not support count query\");const t=this.layer,r=t.createQuery();return r.where=f(r.where,e.whereClause),C(r,e.filter),t.queryFeatureCount(r,{signal:e.signal})}async generateRenderer(e,t){const r=this.layer;if(this._hasLocalSource||r.version<10.1)throw new i(`${this.adapterName}:not-supported`,\"Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)\");const s=r.createQuery();return e.where=f(e.where,s.where),m(r.parsedUrl?.path??\"\",{source:r.dynamicDataSource??void 0,gdbVersion:r.gdbVersion??void 0},e,{signal:t})}async predominantCategories(e){if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new i(`${this.adapterName}:not-supported`,\"Layer does not support advanced SQL expressions and standardized queries\");const{fields:t,view:r,signal:s,filter:a}=e,o=d(t),n=y(t),l=r&&this._hasLocalSource?await this._uvFromMemory({valueExpression:o,view:r,signal:s,filter:a}):await this._uvFromServiceQuery({sqlExpression:n.expression,valueExpression:o,signal:s,filter:a});return $(l.uniqueValueInfos,t)}async getSampleFeatures(e,i){const{view:a,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e,m=e.sampleSize;if(null==m||0===m)return[];const c=this.layer.createQuery(),p=1,h=\"json\"===i;c.outSpatialReference=a?.spatialReference,c.returnGeometry=!!n,c.outFields=o,C(c,l);let d=[],y=!1;if(a)try{const s=await a.whenLayerView(this.layer);if(y=!O(this,o,s).length,y){if(m>=1&&!e.filter&&\"getSampleFeatures\"in s){await this._waitForLayerViewUpdate(s);const e=await s.getSampleFeatures({minFeatureCount:m,sampleSize:m});if(null!=e)return h?e:e.map((e=>t.fromJSON(e)))}if(d=await this._fetchFeaturesFromMemory(s,c,u,i),d.length>=m&&m>0)return r(d,m,p)}}catch(f){s(u)}try{if(this._hasLocalSource)return y?d:h?await this._fetchFeaturesJSONFromService(c,u):await this._fetchFeaturesFromService(c,u);const t=await this.queryFeatureCount({view:a,filter:l,signal:u}),i=this.layer.capabilities.query.maxRecordCount;let s=-1===m?t:m;if(s=i&&s>i?i:s,t<=d.length||d.length>=i)return d;if(c.maxAllowableOffset=e.resolution||(a?a.extent.width/a.width/a.scale:P(this.layer.spatialReference))*H,t<=s)return h?await this._fetchFeaturesJSONFromService(c,u):await this._fetchFeaturesFromService(c,u);if(t<=W){const e=this.layer.createQuery();C(e,l);const t=await this.layer.queryObjectIds();return c.objectIds=r(t,s,p),h?await this._fetchFeaturesJSONFromService(c,u):await this._fetchFeaturesFromService(c,u)}return this.layer.capabilities?.query?.supportsPagination&&(c.num=Math.min(s,W)),h?await this._fetchFeaturesJSONFromService(c,u):await this._fetchFeaturesFromService(c,u)}catch(f){return s(u),d}}load(e){const t=this.layer.load(e).then((async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=t.capabilities?.query?.supportsSqlExpression,this._hasLocalSource=!t.url&&!!t.source,this.hasQueryEngine=this._hasLocalSource,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=t.fullExtent,this.workerClient=g.getInstance(),await this.workerClient.open(e.signal)}));return this.addResolvingPromise(t),Promise.resolve(this)}};function K(e,t,r){const i=[],s=t.length;return t.forEach(((t,a)=>{const[o,n]=t;let l=null;l=0!==a||r?a!==s-1||r?f(`${e} >= ${o}`,`${e} ${a===s-1?\" <= \":\" < \"} ${n}`):`${e} >= ${o}`:`${e} < ${n}`,i.push(\"WHEN (\"+l+\") THEN \"+(a+1))})),[\"CASE\",i.join(\" \"),\"ELSE 0\",\"END\"].join(\" \")}e([a({readOnly:!0})],Z.prototype,\"adapterName\",void 0),e([a({constructOnly:!0})],Z.prototype,\"layer\",void 0),Z=e([o(\"esri.smartMapping.support.adapters.FeatureLayerAdapter\")],Z);export{Z as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{createGenerateRendererClassBreaks as s,createGenerateRendererUniqueValues as o}from\"../../../rest/support/generateRendererUtils.js\";import{getDataValues as a,mergeWhereClauses as n}from\"../../statistics/support/utils.js\";import{WorkerClient as l}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as p}from\"../utils.js\";import c from\"./FeatureLayerAdapter.js\";import{ensureFeaturesJSON as u}from\"./support/utils.js\";let m=class extends c{constructor(){super(...arguments),this.adapterName=\"csv-layer-adapter\"}async _createGenerateRendererResult(e,r,i,n,l){const p=e?.features,c=p?.length;if(!c)throw new t(\"csv-layer-adapter:insufficient-data\",\"No features are available to calculate statistics\");const m=u(p);let d=null;if(\"percent-of-total\"===n){if(d=(await this.workerClient.summaryStatistics({field:r},m)).sum,null==d)throw new t(\"csv-layer-adapter:invalid\",\"invalid normalizationTotal\")}if(\"class-breaks-definition\"===l?.type){const e=(await a({field:r,normalizationType:n,normalizationField:i,normalizationTotal:d},m)).filter((e=>Number.isFinite(e)));return s({definition:l,values:e,normalizationTotal:d})}const f=(await a({field:r},m)).filter((e=>null!=e&&\"string\"==typeof e&&\"\"!==e.trim()));return o(f)}generateRenderer(e,t){const r=e.classificationDefinition;let i=null,s=null,o=null;\"class-breaks-definition\"===r?.type?(i=r.classificationField,s=r.normalizationField,o=r.normalizationType):i=r?.attributeField;const a=this.layer;return p({field:i,normalizationField:s}).then((l=>{const p=a.createQuery();return p.returnGeometry=!1,p.outFields=l,p.where=n(p.where,e.where),a.queryFeatures(p,{signal:t}).then((e=>this._createGenerateRendererResult(e,i,s,o,r)))}))}load(e){const t=this.layer.load(e).then((async t=>{this.geometryType=t.geometryType,this.objectIdField=t.objectIdField,this.supportsSQLExpression=!0,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.workerClient=l.getInstance(),await this.workerClient.open(e.signal)}));return this.addResolvingPromise(t),Promise.resolve(this)}};e([r({readOnly:!0})],m.prototype,\"adapterName\",void 0),m=e([i(\"esri.smartMapping.support.adapters.CSVLayerAdapter\")],m);export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{pickRandom as t}from\"../../../core/arrayUtils.js\";import a from\"../../../core/Error.js\";import{throwIfAborted as r}from\"../../../core/promiseUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{kebabDict as o}from\"../../../layers/support/fieldType.js\";import{isTimeOnlyField as n}from\"../../../layers/support/fieldUtils.js\";import{getArcadeForPredominantCategory as l}from\"../../statistics/support/predominanceUtils.js\";import{summaryStatistics as u,uniqueValues as m,histogram as p,classBreaks as g}from\"../../statistics/support/statsWorker.js\";import{mergeWhereClauses as d}from\"../../statistics/support/utils.js\";import{WorkerClient as y}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as c,fieldDelimiter as f,isAnyDateField as h}from\"../utils.js\";import w from\"./FeatureLayerAdapter.js\";import{getMissingFieldsForBinning as F,updateQueryWithFeatureFilter as S,getFeatureReductionFields as v,getViewInfoParams as q,getDomainsForFields as V,getPredominantCategoriesFromUVInfos as z}from\"./support/utils.js\";let N=class extends w{constructor(){super(...arguments),this.adapterName=\"feature-layer-binning-adapter\"}async _getNormalizationTotalFromMemory(e,t,r){const{featuresJSON:i,graphics:s,layerView:o,query:n}=t,l={include:[\"sum\"]},m=(!i&&!s&&o&&\"queryAggregateSummaryStatistics\"in o?await o.queryAggregateSummaryStatistics(n,{field:e,outStatisticTypes:l},{signal:r}):i?await this.workerClient.summaryStatistics({field:e},i):await u({attribute:{field:e,outStatisticTypes:l},features:s})).sum;if(null==m)throw new a(`${this.adapterName}:invalid`,\"invalid normalizationTotal\");return m}async _processStatsFromMemoryParams(e){const{features:t,filter:r}=e;if(t?.length)return this._getFilteredFeatures(t,r);const{view:i,field:s,field2:o,field3:n,normalizationField:l,valueExpression:u,returnGeometry:m,layerViewFunc:p,signal:g}=e;let d=null,y=null,f=null,h=null,w=null;if(i)try{if(d=await i.whenLayerView(this.layer),y=null!=p&&p in d&&\"function\"==typeof d[p],y){await this._waitForLayerViewUpdate(d);const e=await c({field:s,field2:o,field3:n,normalizationField:l,valueExpression:u});F(this,e).length?y=!1:(f=\"createAggregateQuery\"in d?d.createAggregateQuery():null,f?(f.outFields=e,f.returnGeometry=!1,S(f,r)):y=!1),d.suspended&&(y=!1)}}catch{y=!1}if(!y&&(w=v(this.layer).map((e=>e.toJSON())),h=await this._fetchFeaturesForStats({field:s,field2:o,field3:n,valueExpression:u,normalizationField:l,returnGeometry:m,filter:r,view:i,signal:g},\"json\"),!h?.length))throw new a(`${this.adapterName}:insufficient-data`,\"No features are available to calculate statistics\");return{layerView:d,query:f,featuresJSON:h,fieldInfos:w}}async _summaryStatsFromMemory(e,t){const{view:a,field:r,valueExpression:i,normalizationType:s,signal:n}=e,l={field:r,valueExpression:i,normalizationType:s,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes},{featuresJSON:m,graphics:p,layerView:g,query:d,fieldInfos:y}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateSummaryStatistics\"});return i&&a&&(m||p)&&(l.fieldType=t?.type?o.toJSON(t.type):null,l.viewInfoParams=q(a),l.timeZone=a.timeZone,l.fieldInfos=y),\"percent-of-total\"===s&&null==e.normalizationTotal&&(l.normalizationTotal=await this._getNormalizationTotalFromMemory(r,{featuresJSON:m,graphics:p,layerView:g,query:d},n)),!m&&!p&&g&&\"queryAggregateSummaryStatistics\"in g?g.queryAggregateSummaryStatistics(d,l,{signal:n}):m?this.workerClient.summaryStatistics(l,m):u({attribute:l,features:p})}async _uvFromMemory(e,t){const{view:a,field:r,valueExpression:i,returnAllCodedValues:s,signal:o}=e,{featuresJSON:n,graphics:l,layerView:u,query:p,fieldInfos:g}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateUniqueValues\"}),d={field:r,field2:e.field2,field3:e.field3,fieldDelimiter:f,valueExpression:i,domains:t,returnAllCodedValues:s};return i&&a&&(n||l)&&(d.viewInfoParams=q(a),d.timeZone=a.timeZone,d.fieldInfos=g),!n&&!l&&u&&\"queryAggregateUniqueValues\"in u?u.queryAggregateUniqueValues(p,d,{signal:o}):n?this.workerClient.uniqueValues(d,n):m({attribute:d,features:l})}async _histogramFromMemory(e){const{view:t,field:a,valueExpression:r,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateHistogram\"}),m={field:a,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return r&&t&&(s||o)&&(m.viewInfoParams=q(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryAggregateHistogram\"in n?n.queryAggregateHistogram(l,m,{signal:i}):s?this.workerClient.histogram(m,s):p({attribute:m,features:o})}async _classBreaksFromMemory(e){const{view:t,field:a,valueExpression:r,signal:i}=e,{featuresJSON:s,graphics:o,layerView:n,query:l,fieldInfos:u}=await this._processStatsFromMemoryParams({...e,layerViewFunc:\"queryAggregateClassBreaks\"}),m={field:a,valueExpression:r,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return r&&t&&(s||o)&&(m.viewInfoParams=q(t),m.timeZone=t.timeZone,m.fieldInfos=u),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(m.normalizationTotal=await this._getNormalizationTotalFromMemory(a,{featuresJSON:s,graphics:o,layerView:n,query:l},i)),!s&&!o&&n&&\"queryAggregateClassBreaks\"in n?n.queryAggregateClassBreaks(l,m,{signal:i}):s?this.workerClient.classBreaks(m,s):g({attribute:m,features:o})}getField(e=\"\"){const t=v(this.layer);return t?.find((t=>t.name.toLowerCase()===e?.toLowerCase()))}getFieldUsageInfo(e){return this.getField(e)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!1,supportsStatistics:!0}:null}getFieldDomain(e,t){return null}async summaryStatistics(e){const{field:t}=e,r=t?this.getField(t):null,i=h(r)||n(r),s=e.sqlExpression&&!e.valueExpression&&!t;if(i||s)throw new a(`${this.adapterName}:not-supported`,\"Date field and sqlExpression are not supported\");return this._summaryStatsFromMemory(e,r)}async uniqueValues(e){const t=await V(e,this);return this._uvFromMemory(e,t)}async histogram(e){const{field:t}=e,r=t?this.getField(t):null,i=h(r)||n(r),s=e.sqlExpression&&!e.valueExpression&&!t;if(i||s)throw new a(`${this.adapterName}:not-supported`,\"Date field and sqlExpression are not supported\");return this._histogramFromMemory(e)}async classBreaks(e){return(!1!==e.analyzeData?this._classBreaksFromMemory(e):this._classBreaksFromInterpolation(e)).catch((()=>(r(e.signal),this._classBreaksFromMemory(e))))}async queryFeatureCount(e){const t=await(e.view?.whenLayerView(this.layer));if(!t||!(\"queryAggregateCount\"in t)||!t.queryAggregateCount)throw new a(`${this.adapterName}:not-supported`,\"LayerView is not supported.\");await this._waitForLayerViewUpdate(t);const r=t.createAggregateQuery();return r.where=d(r.where,e.whereClause),S(r,e.filter),t.queryAggregateCount(r,{signal:e.signal})}generateRenderer(e,t){throw new a(`${this.adapterName}:not-supported`,\"'generateRenderer' is not supported.\")}heatmapStatistics(e){throw new a(`${this.adapterName}:not-supported`,\"'heatmapStatistics' is not supported.\")}async predominantCategories(e){const{fields:t,view:a,signal:r}=e,i=l(t),s=await this._uvFromMemory({valueExpression:i,view:a,signal:r});return z(s.uniqueValueInfos,t)}async getSampleFeatures(e,r){const{view:i,sampleSize:s,requiredFields:o,returnGeometry:n,filter:l,signal:u}=e;if(!i)throw new a(`${this.adapterName}:not-supported`,\"'view' is required to get sample features for binning.\");if(\"3d\"===i.type)throw new a(`${this.adapterName}:not-supported`,\"3d 'view' is not supported to get sample features for binning.\");const m=await i.whenLayerView(this.layer);if(!(\"queryAggregateJSON\"in m&&m.queryAggregateJSON&&\"queryAggregates\"in m&&m.queryAggregates))throw new a(`${this.adapterName}:not-supported`,\"LayerView is not supported.\");await this._waitForLayerViewUpdate(m);if(F(this,o).length)throw new a(`${this.adapterName}:insufficient-data`,\"Layer does not have required fields\");const p=1,g=\"json\"===r,d=m.createAggregateQuery();d.outSpatialReference=i?.spatialReference,d.returnGeometry=!!n,d.outFields=o,S(d,l);const{features:y}=g?await m.queryAggregateJSON(d,{signal:u}):await m.queryAggregates(d,{signal:u});return y.length&&null!=s&&s>0&&s<=y.length?t(y,s,p):y}load(e){const t=this.layer.load(e).then((async t=>{this.geometryType=\"polygon\",this.objectIdField=null,this.supportsSQLExpression=!1,this._hasLocalSource=!1,this.hasQueryEngine=!0,this.minScale=t.minScale,this.maxScale=t.maxScale,this.fullExtent=t.fullExtent;const r=\"featureReduction\"in t?t.featureReduction:null;if(\"binning\"!==r?.type&&\"cluster\"!==r?.type)throw new a(`${this.adapterName}:invalid-parameters`,`Feature reduction type ${r?.type} is not supported`);this.workerClient=y.getInstance(),await this.workerClient.open(e.signal)}));return this.addResolvingPromise(t),Promise.resolve(this)}};e([i({readOnly:!0})],N.prototype,\"adapterName\",void 0),N=e([s(\"esri.smartMapping.support.adapters.FeatureLayerBinningAdapter\")],N);const T=N;export{T as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Graphic.js\";import{pickRandom as r}from\"../../../core/arrayUtils.js\";import a from\"../../../core/Error.js\";import{timeout as s,throwIfAborted as i}from\"../../../core/promiseUtils.js\";import{whenOnce as o}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{kebabDict as u}from\"../../../layers/support/fieldType.js\";import{isNumericField as p}from\"../../../layers/support/fieldUtils.js\";import m from\"../../../rest/support/FeatureSet.js\";import{summaryStatistics as c,uniqueValues as d,classBreaks as h,histogram as y}from\"../../statistics/support/statsWorker.js\";import{WorkerClient as f}from\"../../statistics/support/WorkerClient.js\";import{getFieldsList as g,isAnyDateField as w,fieldDelimiter as F}from\"../utils.js\";import _ from\"./FeatureLayerAdapter.js\";import S from\"./LayerAdapter.js\";import{getMissingFields as v,ensureFeaturesJSON as x,getViewInfoParams as L,getUniqueValuesFromFeatureSet as E,getHistogramFromFeatureSet as C,getDomainsForFields as T}from\"./support/utils.js\";import{createUVResult as z}from\"../../../statistics/utils.js\";let A=class extends S{constructor(e){super(e),this._featureLayerAdapter=null,this.workerClient=null,this.adapterName=\"scene-layer-adapter\"}destroy(){this.workerClient?.destroy()}_hasCachedStatistics(e){return this.layer.hasCachedStatistics(e)}_updateQuery(e,t=[],r=[]){if(!e||!r.length)return e;const a=this.layer.objectIdField,s=e.clone(),i=t.filter((e=>{const t=this.layer.getField(e);return!r.includes(t.name)})),o=i.some((e=>this.layer.getField(e).name===a));return s.outFields=o?i:[...i,a],s}async _fetchFeaturesFromMemory(e,t,r){if(!e)throw new a(\"scene-layer-adapter:insufficient-data\",\"view is required to fetch the features from layerView\");const n=await e.whenLayerView(this.layer),l=new AbortController,u=l.signal,p=o((()=>!n.updating),u);await s(p,5e3,l);const m=v(this,r,n);i(u);const c=this._updateQuery(t,r??[],m),d=await n.queryFeatures(c,{signal:u});i(u);const h=d.features;return m.length?n.whenGraphicAttributes(h,m):h}async _fetchFeaturesJSONFromMemory(e,t,r){return this._fetchFeaturesFromMemory(e,t,r).then(x)}_fetchFeaturesForStats(e,t){return g({field:e.field,normalizationField:e.normalizationField,valueExpression:e.valueExpression}).then((r=>this.getSampleFeatures({sampleSize:-1,view:e.view,returnGeometry:e.returnGeometry,requiredFields:r,signal:e.signal},t)))}async _processStatsFromMemoryParams(e){const t=e.features;if(t?.length){return t.length&&\"declaredClass\"in t[0]&&\"esri.Graphic\"===t[0].declaredClass?{graphics:t}:{featuresJSON:t}}const{view:r,field:s,normalizationField:i,valueExpression:o,signal:n}=e,l=await this._fetchFeaturesForStats({field:s,valueExpression:o,normalizationField:i,view:r,signal:n},null);if(!l?.length)throw new a(\"scene-layer-adapter:insufficient-data\",\"No features are available to calculate statistics\");return{graphics:l}}_getCachedStatistics(e,t){const r=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.minValue||e.maxValue?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified\")):r.queryCachedStatistics(t?.name,{signal:e.signal}).then((e=>{const t=e.stats,{min:r,max:a,totalValuesCount:s}=t;let{avg:i,stddev:o,sum:n,variance:l,count:u}=t;return 0===r&&0===a||(i=0===i?null:i,n=0===n?null:n,o=0===o?null:o,l=0===l?null:l,u=0===u?null:u),null==u&&(null!=n&&null!=i?u=Math.round(n/i):null!=s&&(u=s)),{avg:i,count:u,max:a,min:r,stddev:o,sum:n,variance:l}}))}async _getNormalizationTotal(e,t,r){const s={include:[\"sum\"]},i=(t?await this.workerClient.summaryStatistics({field:e,outStatisticTypes:s},t):await c({attribute:{field:e,outStatisticTypes:s},features:r})).sum;if(null==i)throw new a(\"scene-layer-adapter:invalid\",\"invalid normalizationTotal\");return i}async _getSummaryStatisticsFromMemory(e,t){const{view:r,field:a,normalizationField:s,valueExpression:i}=e,{featuresJSON:o,graphics:n}=await this._processStatsFromMemoryParams(e),l={field:a,valueExpression:i,normalizationType:e.normalizationType,normalizationField:s,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,outStatisticTypes:e.outStatisticTypes};return e.valueExpression&&r&&o&&(l.fieldType=t?.type?u.toJSON(t.type):null,l.viewInfoParams=L(r),l.timeZone=r.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(l.normalizationTotal=await this._getNormalizationTotal(a,o,n)),o?this.workerClient.summaryStatistics(l,o):c({attribute:l,features:n})}_getCachedStatisticsForUniqueValues(e,r){const s=this.layer,i=r?.name,o=r&&e.field?this.getFieldDomain(e.field):null;return e.valueExpression||e.sqlExpression||e.sqlWhere?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified\")):s.queryCachedStatistics(i,{signal:e.signal}).then((a=>{const o=a.stats;if(!o.mostFrequentValues)throw new Error;const n=a.labels?.labels,l={},u=[],c=\"countOF\"+i;o.mostFrequentValues.forEach((e=>{const a=new t({attributes:{}});a.attributes[i]=r&&r.name!==s.objectIdField&&(p(r)||w(r))?Number(e.value):e.value,a.attributes[c]=e.count,u.push(a)})),n&&n.forEach((e=>{l[e.value]=e.label}));const d=new m({features:u});return E(d,{layer:this,field:e.field,labels:l,view:e.view,signal:e.signal})})).then((t=>z(t,[o],e.returnAllCodedValues)))}async _getUniqueValuesFromMemory(e,t){const{view:r,field:a,field2:s,field3:i,valueExpression:o,returnAllCodedValues:n}=e,l={field:a,field2:s,field3:i,fieldDelimiter:F,valueExpression:o,domains:t,returnAllCodedValues:n},{featuresJSON:u,graphics:p}=await this._processStatsFromMemoryParams(e);return e.valueExpression&&r&&u&&(l.viewInfoParams=L(r),l.timeZone=r.timeZone),u?this.workerClient.uniqueValues(l,u):d({attribute:l,features:p})}_getCachedStatisticsForHistogram(e,t){const r=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.normalizationType?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified\")):r.queryCachedStatistics(t&&t.name,{signal:e.signal}).then((t=>{const r=t.stats,{minValue:a,maxValue:s}=e,i=null!=a?a:r.min,o=null!=s?s:r.max,n=e.numBins||10,l=j(r.histogram,i,o,n);return C(l,i,o,n)}))}async _getClassBreaksFromMemory(e){const{view:t,field:r,normalizationField:a,valueExpression:s}=e,{featuresJSON:i,graphics:o}=await this._processStatsFromMemoryParams(e),n={field:r,valueExpression:s,normalizationType:e.normalizationType,normalizationField:a,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numClasses:e.numClasses};return e.valueExpression&&t&&i&&(n.viewInfoParams=L(t),n.timeZone=t.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(n.normalizationTotal=await this._getNormalizationTotal(r,i,o)),i?this.workerClient.classBreaks(n,i):h({attribute:n,features:o})}async _getHistogramFromMemory(e){const{view:t,field:r}=e,{featuresJSON:a,graphics:s}=await this._processStatsFromMemoryParams(e),i={field:r,valueExpression:e.valueExpression,normalizationType:e.normalizationType,normalizationField:e.normalizationField,normalizationTotal:e.normalizationTotal,minValue:e.minValue,maxValue:e.maxValue,standardDeviationInterval:e.standardDeviationInterval,classificationMethod:e.classificationMethod,numBins:e.numBins};return e.valueExpression&&t&&a&&(i.viewInfoParams=L(t),i.timeZone=t.timeZone),\"percent-of-total\"===e.normalizationType&&null==e.normalizationTotal&&(i.normalizationTotal=await this._getNormalizationTotal(r,a,s)),a?this.workerClient.histogram(i,a):y({attribute:i,features:s})}getField(e){return this.layer.getField(e??\"\")}getFieldUsageInfo(e){const t=this.getField(e);if(!t)return null;const r=this.layer.getFieldUsageInfo(t.name);return{supportsLabelingInfo:r.supportsLabelingInfo,supportsPopupTemplate:r.supportsPopupTemplate,supportsRenderer:r.supportsRenderer,supportsLayerQuery:r.supportsLayerQuery,supportsStatistics:!0}}getFieldDomain(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(e,t):null}createQuery(){return this.layer.createQuery()}summaryStatistics(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.summaryStatistics(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return this._hasCachedStatistics(t?.name)?this._getCachedStatistics(e,t).catch((()=>(i(e.signal),this._getSummaryStatisticsFromMemory(e,t)))):this._getSummaryStatisticsFromMemory(e,t)}async uniqueValues(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.uniqueValues(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");const t=await T(e,this),{field:r,field2:s}=e,o=r&&s,n=this.getField(r);return!o&&n&&this._hasCachedStatistics(n.name)?this._getCachedStatisticsForUniqueValues(e,n).catch((()=>(i(e.signal),this._getUniqueValuesFromMemory(e,t)))):this._getUniqueValuesFromMemory(e,t)}histogram(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.histogram(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return t&&this._hasCachedStatistics(t.name)?this._getCachedStatisticsForHistogram(e,t).catch((()=>(i(e.signal),this._getHistogramFromMemory(e)))):this._getHistogramFromMemory(e)}classBreaks(e){const t=this.getField(e.field);if(this._featureLayerAdapter)return this._featureLayerAdapter.classBreaks(e);if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");return this._hasCachedStatistics(t?.name)?Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"Cached stats not supported\")):this._getClassBreaksFromMemory(e)}queryFeatureCount(e){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(e):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support count query\"))}generateRenderer(e,t){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(e,t):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support generateRenderer operation\"))}heatmapStatistics(e){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(e):Promise.reject(new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support heatmapStatistics operation\"))}async predominantCategories(e){if(this._featureLayerAdapter)return this._featureLayerAdapter.predominantCategories(e);throw new a(\"scene-layer-adapter:not-supported\",\"SceneLayer without associated FeatureLayer does not support predominantCategories\")}async getSampleFeatures(e,t){if(e.filter)throw new a(\"scene-layer-adapter:not-supported\",\"filter is not supported\");const{view:s,sampleSize:o,requiredFields:n,returnGeometry:l,signal:u}=e,p=1,m=\"json\"===t,c=this.createQuery();c.outFields=n,c.returnGeometry=!!l,c.where=null,c.num=o;let d=[];try{if(d=m?await this._fetchFeaturesJSONFromMemory(s,c,n):await this._fetchFeaturesFromMemory(s,c,n),d.length&&null!=o&&o>0&&o<=d.length)return r(d,o,p)}catch(y){i(u)}let h=null;if(this._featureLayerAdapter){const r={...e};delete r.view,h=await this._featureLayerAdapter.getSampleFeatures(r,t)}return h?.length?h:r(d,d.length,p)}load(e){const t=this.layer.load(e).then((async t=>{this.workerClient=f.getInstance(),await this.workerClient.open(e.signal);const r=t.associatedLayer;if(this.geometryType=t.geometryType,null!=r){this._featureLayerAdapter=new _({layer:r});return this._featureLayerAdapter.load(e).then((()=>{this.objectIdField=this._featureLayerAdapter.objectIdField,this.supportsSQLExpression=this._featureLayerAdapter.supportsSQLExpression,this.minScale=this._featureLayerAdapter.minScale,this.maxScale=this._featureLayerAdapter.maxScale,this.fullExtent=this._featureLayerAdapter.fullExtent}))}this.objectIdField=t.objectIdField,this.supportsSQLExpression=!1,this.hasQueryEngine=!1,this.fullExtent=t.fullExtent}));return this.addResolvingPromise(t),Promise.resolve(this)}};function j(e,r=e.minimum,a=e.maximum,s){const i=[];for(let t=0;t<s;t++)i[t]=0;const o=e.counts.length,n=e.minimum,l=e.maximum;for(let t=0;t<o;t++){const u=(t+.5)/o,p=((1-u)*n+u*l-r)/(a-r)*s;p>=0&&p<=s&&(i[p===s?s-1:Math.floor(p)]+=e.counts[t])}const u=[];return i.forEach(((e,r)=>{const a=new t({attributes:{}});a.attributes.EXPR_1=r+1,a.attributes.countOFExpr=e,u.push(a)})),new m({features:u})}e([n({readOnly:!0})],A.prototype,\"adapterName\",void 0),e([n({constructOnly:!0})],A.prototype,\"layer\",void 0),A=e([l(\"esri.smartMapping.support.adapters.SceneLayerAdapter\")],A);export{A as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"./SceneLayerAdapter.js\";let o=class extends s{constructor(e){super(e),this.adapterName=\"point-cloud-layer-adapter\"}getField(e){return this.layer.fieldsIndex.get(e??\"\")}getFieldUsageInfo(e){const r=this.getField(e);if(!r)return null;const t=this._hasCachedStatistics(r.name);return{supportsLabelingInfo:t,supportsPopupTemplate:t,supportsRenderer:t,supportsLayerQuery:!1,supportsStatistics:t}}getFieldDomain(){return null}load(e){const r=this.layer.load(e).then((()=>{this.geometryType=\"point\",this.objectIdField=null,this.supportsSQLExpression=!1,this.hasQueryEngine=!1}));return this.addResolvingPromise(r),Promise.resolve(this)}};e([r({readOnly:!0})],o.prototype,\"adapterName\",void 0),o=e([t(\"esri.smartMapping.support.adapters.PointCloudLayerAdapter\")],o);export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{isTimeOnlyField as o}from\"../../../layers/support/fieldUtils.js\";import{isAnyDateField as e}from\"../utils.js\";import a from\"./InMemoryLayerAdapter.js\";import{getSummaryStatsQuery as i,getSummaryStatisticsFromFeatureSet as p}from\"./support/utils.js\";import{processSummaryStatisticsResult as m}from\"../../../statistics/utils.js\";let c=class extends a{constructor(){super(...arguments),this.adapterName=\"stream-layer-adapter\"}async _summaryStatsFromClientQuery(t,r){const{signal:s,view:a}=t,c=i(this,t,r);c.outStatistics=c.outStatistics?.filter((t=>\"totalcount_value\"!==t.outStatisticFieldName));const u=await this._fetchFeatureSetFromMemory(c,a,s),l=p(u,e(r)||o(r));return m(l,t.outStatisticTypes)}};t([r({readOnly:!0})],c.prototype,\"adapterName\",void 0),c=t([s(\"esri.smartMapping.support.adapters.StreamLayerAdapter\")],c);export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../CSVLayerAdapter.js\";import a from\"../FeatureLayerAdapter.js\";import r from\"../FeatureLayerBinningAdapter.js\";import t from\"../InMemoryLayerAdapter.js\";import y from\"../LayerAdapter.js\";import L from\"../PointCloudLayerAdapter.js\";import o from\"../SceneLayerAdapter.js\";import p from\"../StreamLayerAdapter.js\";var l;!function(e){e[e.CatalogLayer=0]=\"CatalogLayer\",e[e.CatalogFootprintLayer=1]=\"CatalogFootprintLayer\",e[e.CSVLayer=2]=\"CSVLayer\",e[e.FeatureLayer=3]=\"FeatureLayer\",e[e.GeoJSONLayer=4]=\"GeoJSONLayer\",e[e.ImageryLayer=5]=\"ImageryLayer\",e[e.KnowledgeGraphSublayer=6]=\"KnowledgeGraphSublayer\",e[e.OGCFeatureLayer=7]=\"OGCFeatureLayer\",e[e.OrientedImageryLayer=8]=\"OrientedImageryLayer\",e[e.ParquetLayer=9]=\"ParquetLayer\",e[e.PointCloudLayer=10]=\"PointCloudLayer\",e[e.SceneLayer=11]=\"SceneLayer\",e[e.StreamLayer=12]=\"StreamLayer\",e[e.SubtypeGroupLayer=13]=\"SubtypeGroupLayer\",e[e.SubtypeSublayer=14]=\"SubtypeSublayer\",e[e.WFSLayer=15]=\"WFSLayer\"}(l||(l={}));const u={[l.CatalogLayer]:{adapter:a,type:\"catalog\",label:\"CatalogLayer\"},[l.CatalogFootprintLayer]:{adapter:a,type:\"catalog-footprint\",label:\"CatalogFootprintLayer\"},[l.CSVLayer]:{adapter:e,type:\"csv\",label:\"CSVLayer\"},[l.FeatureLayer]:{adapter:a,type:\"feature\",label:\"FeatureLayer\"},[l.ImageryLayer]:{adapter:a,type:\"imagery\",label:\"ImageryLayer\"},[l.GeoJSONLayer]:{adapter:a,type:\"geojson\",label:\"GeoJSONLayer\"},[l.KnowledgeGraphSublayer]:{adapter:a,type:\"knowledge-graph-sublayer\",label:\"KnowledgeGraphSublayer\"},[l.OGCFeatureLayer]:{adapter:t,type:\"ogc-feature\",label:\"OGCFeatureLayer\"},[l.OrientedImageryLayer]:{adapter:a,type:\"oriented-imagery\",label:\"OrientedImageryLayer\"},[l.ParquetLayer]:{adapter:a,type:\"parquet\",label:\"ParquetLayer\"},[l.PointCloudLayer]:{adapter:L,type:\"point-cloud\",label:\"PointCloudLayer\"},[l.SceneLayer]:{adapter:o,type:\"scene\",label:\"SceneLayer\"},[l.StreamLayer]:{adapter:p,type:\"stream\",label:\"StreamLayer\"},[l.SubtypeGroupLayer]:{adapter:a,type:\"subtype-group\",label:\"SubtypeGroupLayer\"},[l.SubtypeSublayer]:{adapter:a,type:\"subtype-sublayer\",label:\"SubtypeSublayer\"},[l.WFSLayer]:{adapter:a,type:\"wfs\",label:\"WFSLayer\"}},n=[l.CatalogLayer,l.CatalogFootprintLayer,l.CSVLayer,l.FeatureLayer,l.GeoJSONLayer,l.KnowledgeGraphSublayer,l.OGCFeatureLayer,l.OrientedImageryLayer,l.ParquetLayer,l.PointCloudLayer,l.SceneLayer,l.StreamLayer,l.SubtypeGroupLayer,l.SubtypeSublayer,l.WFSLayer],S=[l.CatalogFootprintLayer,l.CSVLayer,l.FeatureLayer,l.GeoJSONLayer,l.KnowledgeGraphSublayer,l.OGCFeatureLayer,l.OrientedImageryLayer,l.ParquetLayer,l.SceneLayer,l.StreamLayer,l.SubtypeGroupLayer,l.SubtypeSublayer,l.WFSLayer],d=[l.CSVLayer,l.FeatureLayer,l.GeoJSONLayer,l.OGCFeatureLayer,l.KnowledgeGraphSublayer,l.OrientedImageryLayer,l.ParquetLayer,l.StreamLayer,l.WFSLayer];function b(e){return e.map((e=>u[e].label))}function m(e){return e.map((e=>u[e].type))}function i(e,a=n,t){if(e instanceof y)return e;const L=g(e,a);return L?t?new r({layer:e}):new L({layer:e}):null}function g(e,a=n){let r=null;return a.some((a=>{const t=e.type===u[a].type;return t&&(r=u[a].adapter),t})),r}export{l as LayerType,d as binningCapableLayerTypes,i as createLayerAdapter,n as defaultSupportedLayerTypes,S as featureCapableLayerTypes,b as getLayerTypeLabels,m as getLayerTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{verifyBasicFieldValidity as i,verifyFilterValidity as s}from\"./support/utils.js\";import{verifyBinningParams as r}from\"../support/binningUtils.js\";import{getFieldsList as a}from\"../support/utils.js\";import{defaultSupportedLayerTypes as n,LayerType as t,binningCapableLayerTypes as l,createLayerAdapter as o,getLayerTypeLabels as u}from\"../support/adapters/support/layerUtils.js\";async function p(p){if(!p?.layer||!p.field&&!p.valueExpression)throw new e(\"unique-values:missing-parameters\",\"'layer' and 'field' or 'valueExpression' parameters are required\");const f=p.valueExpression||p.sqlExpression,m=f&&!p.sqlExpression;if(f)if(m){if(!p.view)throw new e(\"unique-values:missing-parameters\",\"View is required when 'valueExpression' is specified\")}else if(!p.valueExpression)throw new e(\"unique-values:missing-parameters\",\"'valueExpression' parameters are required\");p.forBinning&&r(p,\"unique-values\");const{layer:d,...v}=p,w=[...n,t.ImageryLayer],c=p.forBinning?l:w,y=o(d,c,p.forBinning);if(!y)throw new e(\"unique-values:invalid-parameters\",\"'layer' must be one of these types: \"+u(c).join(\", \"));const q={layerAdapter:y,...v},g=null!=q.signal?{signal:q.signal}:null;await y.load(g);const x=await a({field:q.field,field2:q.field2,field3:q.field3,valueExpression:q.valueExpression}),E=i(y,x,\"unique-values:invalid-parameters\");if(E)throw E;q.filter&&!q.filter.spatialRelationship&&(q.filter.spatialRelationship=\"intersects\");const h=s(q.filter,\"summary-statistics:invalid-parameters\");if(h)throw h;return q}async function f(e){const{layerAdapter:i,...s}=await p(e);return i.uniqueValues(s)}export{f as default};\n"],"names":["i","r","n$1","n","e","t","f","o","m","c","u","p","has","d","s","l","y","a","F","w","E","S","T","V","z","$","C","j","q","b","O","v","L","h","R","D","I","N","U","M","B","Q","P","W","_","k","g","x","A","H","J","Z","G","K"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}