import{bP as s,bQ as l,bR as N,bM as m,bS as S}from"./main-6eEsl9OJ.js";function F(n,r){return{...r,filterMode:n.mode}}function M(n,r){return I(n,r).next().value??null}function p(n,r,t){const e=b(n);if(e&&(s(r,e[0])||l(t,e[1])))return"";const a=Array.from(I(n,r,t)),u=x(a,r,t)?"1=1":a.map(i=>i.where||"1=1").reduce((i,o)=>N(i,o),"");return u&&u!=="1=1"?u:""}function b(n){if(d(n)==="manual")return null;const r=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:e}of n.filters)r[0]=Math.max(r[0],c(t)),r[1]=Math.min(r[1],f(e));return r}function*I(n,r,t){if(d(n)==="manual"){const e=n.filters.find(a=>a.id===n.activeFilterId);e&&(yield e)}else{typeof r=="object"&&(r=r.scale);for(const e of n.filters)T(e.minScale,e.maxScale,r,t)&&(yield e)}}function x(n,r,t){if(n.length===0)return!0;const e=c(n.at(0)?.minScale),a=f(n.at(-1)?.maxScale);if(l(e,r)||s(a,t))return!0;for(let u=0;u<n.length-1;u++){const i=n[u],o=n[u+1];if(l(c(o.minScale),f(i.maxScale)))return!0}return!1}function T(n,r,t,e){return n=c(n),t=c(t),r=f(r),!(!m(t,n)&&(e??t)>n)&&!S(r,t)&&(e===void 0||!m(e,n))}function d(n){return"mode"in n?n.mode:n.filterMode}function c(n){return n||Number.POSITIVE_INFINITY}function f(n){return n||0}export{p as c,F as i,M as u};
