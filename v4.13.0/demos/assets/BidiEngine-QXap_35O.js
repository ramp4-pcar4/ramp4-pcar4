const I=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],E=["آ","أ","إ","ا"],$=["ﻵ","ﻷ","ﻹ","ﻻ"],tt=["ﻶ","ﻸ","ﻺ","ﻼ"],D=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],rt=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],et=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],nt=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],it=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],z=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],ot=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],q=["ء","ف"],at=["غ","ي"],ut=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],st=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],e=0,a=1,h=2,g=3,t=4,S=5,j=6,r=7,m=8,R=9,_=10,T=11,n=12,ft=13,lt=14,ct=15,ht=16,Tt=17,c=18,At=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],p=100,Lt=[p+0,e,e,e,e,p+1,p+2,p+3,a,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p+4,t,t,t,e,t,e,t,e,t,t,t,e,e,t,t,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,e,e,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,p+5,r,r,p+6,p+7],dt=[[c,c,c,c,c,c,c,c,c,j,S,j,m,S,c,c,c,c,c,c,c,c,c,c,c,c,c,c,S,S,S,j,m,t,t,T,T,T,t,t,t,t,t,_,R,_,R,R,h,h,h,h,h,h,h,h,h,h,R,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,c,c,c,c,c,c,S,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,R,t,T,T,T,T,t,t,t,t,e,t,t,c,t,t,T,T,h,h,t,e,t,t,t,h,e,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,a,n,a,n,n,a,n,n,a,n,t,t,t,t,t,t,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,t,t,t,t,t,a,a,a,a,a,t,t,t,t,t,t,t,t,t,t,t],[g,g,g,g,t,t,t,t,r,T,T,r,R,r,t,t,n,n,n,n,n,n,n,n,n,n,n,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,g,g,g,g,g,g,g,g,g,g,T,g,g,r,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,g,t,n,n,n,n,n,n,r,r,n,n,t,n,n,n,n,r,r,h,h,h,h,h,h,h,h,h,h,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,n,n,n,n,n,n,n,n,n,a,a,t,t,t,t,a,t,t,t,t,t],[m,m,m,m,m,m,m,m,m,m,m,c,c,c,e,a,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,S,ft,lt,ct,ht,Tt,R,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,R,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,c,c,c,c,c,t,t,t,t,t,c,c,c,c,c,c,h,e,t,t,h,h,h,h,h,h,_,_,t,t,t,e,h,h,h,h,h,h,h,h,h,h,_,_,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,t,t,t,t,t,a,n,a,a,a,a,a,a,a,a,a,a,_,a,a,a,a,a,a,a,a,a,a,a,a,a,t,a,a,a,a,a,t,a,t,a,a,t,a,a,t,a,a,a,a,a,a,a,a,a,a,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,R,t,R,t,t,R,t,t,t,t,t,t,t,t,t,T,t,t,_,_,t,t,t,t,t,T,T,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,c],[t,t,t,T,T,T,t,t,t,t,t,_,R,_,R,R,h,h,h,h,h,h,h,h,h,h,R,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,t,t,t,T,T,t,t,t,T,T,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class Pt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(i,u,s){if(this.sourceToTarget=[],this.targetToSource=[],!i)return"";if(Ot(this.sourceToTarget,this.targetToSource,i.length),!this.checkParameters(u,s))return i;u=this.inputFormat,s=this.outputFormat;let f=i;const l=It,L=H(u.charAt(1)),A=H(s.charAt(1)),d=(u.charAt(0)==="I"?"L":u.charAt(0))+L,U=(s.charAt(0)==="I"?"L":s.charAt(0))+A,B=u.charAt(2)+s.charAt(2);l.defInFormat=d,l.defOutFormat=U,l.defSwap=B;const w=V(i,d,U,B,l);let N=!1;return s.charAt(1)==="R"?N=!0:s.charAt(1)!=="C"&&s.charAt(1)!=="D"||(N=this.checkContextual(w)==="rtl"),this.sourceToTarget=F,this.targetToSource=xt(this.sourceToTarget),P=this.targetToSource,f=u.charAt(3)===s.charAt(3)?w:s.charAt(3)==="S"?gt(N,w):Rt(w,N,!0),this.sourceToTarget=F,this.targetToSource=P,this.levels=y,f}_inputFormatSetter(i){if(!J.test(i))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=i}_outputFormatSetter(i){if(!J.test(i))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=i}checkParameters(i,u){return i?this._inputFormatSetter(i):i=this.inputFormat,u?this._outputFormatSetter(u):u=this.outputFormat,i!==u}checkContextual(i){let u=k(i);if(u!=="ltr"&&u!=="rtl"){try{u=document.dir.toLowerCase()}catch{}u!=="ltr"&&u!=="rtl"&&(u="ltr")}return u}hasBidiChar(i){return kt.test(i)}}function V(o,i,u,s,f){const l=Ut(o,{inFormat:i,outFormat:u,swap:s},f);if(l.inFormat===l.outFormat)return o;i=l.inFormat,u=l.outFormat,s=l.swap;const L=i.slice(0,1),A=i.slice(1,4),d=u.slice(0,1),U=u.slice(1,4);if(f.inFormat=i,f.outFormat=u,f.swap=s,L==="L"&&u==="VLTR"){if(A==="LTR")return f.dir=v,b(o,f);if(A==="RTL")return f.dir=O,b(o,f)}if(L==="V"&&d==="V")return f.dir=A==="RTL"?O:v,Y(o,f);if(L==="L"&&u==="VRTL")return A==="LTR"?(f.dir=v,o=b(o,f)):(f.dir=O,o=b(o,f)),Y(o);if(i==="VLTR"&&u==="LLTR")return f.dir=v,b(o,f);if(L==="V"&&d==="L"&&A!==U)return o=Y(o),A==="RTL"?V(o,"LLTR","VLTR",s,f):V(o,"LRTL","VRTL",s,f);if(i==="VRTL"&&u==="LRTL")return V(o,"LRTL","VRTL",s,f);if(L==="L"&&d==="L"){const B=f.swap;return f.swap=B.slice(0,1)+"N",A==="RTL"?(f.dir=O,o=b(o,f),f.swap="N"+B.slice(1,3),f.dir=v,o=b(o,f)):(f.dir=v,o=b(o,f),f.swap="N"+B.slice(1,3),o=V(o,"VLTR","LRTL",f.swap,f)),o}return o}function Ut(o,i,u){if(i.inFormat===void 0&&(i.inFormat=u.defInFormat),i.outFormat===void 0&&(i.outFormat=u.defOutFormat),i.swap===void 0&&(i.swap=u.defSwap),i.inFormat===i.outFormat)return i;const s=i.inFormat.slice(0,1),f=i.outFormat.slice(0,1);let l,L=i.inFormat.slice(1,4),A=i.outFormat.slice(1,4);return L.charAt(0)==="C"&&(l=k(o),L=l==="ltr"||l==="rtl"?l.toUpperCase():i.inFormat.charAt(2)==="L"?"LTR":"RTL",i.inFormat=s+L),A.charAt(0)==="C"&&(l=k(o),l==="rtl"?A="RTL":l==="ltr"?(l=mt(o),A=l.toUpperCase()):A=i.outFormat.charAt(2)==="L"?"LTR":"RTL",i.outFormat=f+A),i}function gt(o,i,u){if(i.length===0)return"";o===void 0&&(o=!0);const s=(i=String(i)).split("");let f=0,l=1,L=s.length;o||(f=s.length-1,l=-1,L=1);const A=Bt(s,f,l,L);let d="";for(let U=0;U<s.length;U++)St(A,A.length,U)>-1?(X(P,U,!o,-1),F.splice(U,1)):d+=s[U];return d}function Bt(o,i,u,s,f){let l=0;const L=[];let A=0;for(let d=i;d*u<s;d+=u)if(Q(o[d])||x(o[d])){if(o[d]==="ل"&&bt(o,d+u,u,s)){o[d]=Vt(o[d+u],l===0?$:tt),d+=u,Et(o,d,u,s),L[A]=d,A++,l=0;continue}const U=o[d];l===1?o[d]=Z(o,d+u,u,s)?vt(o[d]):W(o[d],et):Z(o,d+u,u,s)===!0?o[d]=W(o[d],it):o[d]=W(o[d],rt),x(U)||(l=1),Ct(U)===!0&&(l=0)}else l=0;return L}function k(o){const i=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(o);return i?i[0]<="z"?"ltr":"rtl":""}function mt(o){const i=o.split("");return i.reverse(),k(i.join(""))}function Rt(o,i,u){if(o.length===0)return"";i===void 0&&(i=!0);let s="";const f=(o=String(o)).split("");for(let l=0;l<o.length;l++){let L=!1;if(f[l]>="ﹰ"&&f[l]<"\uFEFF"){const A=o.charCodeAt(l);f[l]>="ﻵ"&&f[l]<="ﻼ"?(i?(l>0&&u&&f[l-1]===" "?s=s.slice(0,-1)+"ل":(s+="ل",L=!0),s+=E[(A-65269)/2]):(s+=E[(A-65269)/2],s+="ل",l+1<o.length&&u&&f[l+1]===" "?l++:L=!0),L&&(X(P,l,!0,1),F.splice(l,0,F[l]))):s+=ot[A-65136]}else s+=f[l]}return s}function b(o,i){const u=o.split(""),s=[];return K(u,s,i),_t(u,s,i),G(2,u,s,i),G(1,u,s,i),y=s,u.join("")}function K(o,i,u){const s=o.length,f=u.dir?st:ut;let l=0,L=-1;const A=[],d=[];u.hiLevel=u.dir,u.lastArabic=!1,u.hasUbatAl=!1,u.hasUbatB=!1,u.hasUbatS=!1;for(let U=0;U<s;U++)A[U]=pt(o[U]);for(let U=0;U<s;U++){const B=l,w=wt(o,A,d,U,u);d[U]=w,l=f[B][w];const N=240&l;l&=15;const M=f[l][jt];if(i[U]=M,N>0)if(N===16){for(let C=L;C<U;C++)i[C]=1;L=-1}else L=-1;if(f[l][Dt])L===-1&&(L=U);else if(L>-1){for(let C=L;C<U;C++)i[C]=M;L=-1}A[U]===S&&(i[U]=0),u.hiLevel|=M}u.hasUbatS&&Ft(A,i,s,u)}function Ft(o,i,u,s){for(let f=0;f<u;f++)if(o[f]===j){i[f]=s.dir;for(let l=f-1;l>=0&&o[l]===m;l--)i[l]=s.dir}}function _t(o,i,u){if(u.hiLevel!==0&&u.swap[0]!==u.swap[1])for(let s=0;s<o.length;s++)i[s]===1&&(o[s]=Nt(o[s]))}function pt(o){const i=o.charCodeAt(0),u=Lt[i>>8];return u<p?u:dt[u-p][255&i]}function Y(o,i){const u=o.split("");if(i){const s=[];K(u,s,i),y=s}return u.reverse(),F.reverse(),u.join("")}function St(o,i,u){for(let s=0;s<i;s++)if(o[s]===u)return s;return-1}function Q(o){for(let i=0;i<q.length;i++)if(o>=q[i]&&o<=at[i])return!0;return!1}function Z(o,i,u,s){for(;i*u<s&&x(o[i]);)i+=u;return!!(i*u<s&&Q(o[i]))}function bt(o,i,u,s){for(;i*u<s&&x(o[i]);)i+=u;let f=" ";if(!(i*u<s))return!1;f=o[i];for(let l=0;l<E.length;l++)if(E[l]===f)return!0;return!1}function G(o,i,u,s){if(s.hiLevel<o)return;if(o===1&&s.dir===O&&!s.hasUbatB)return i.reverse(),void F.reverse();const f=i.length;let l,L,A,d,U,B=0;for(;B<f;){if(u[B]>=o){for(l=B+1;l<f&&u[l]>=o;)l++;for(L=B,A=l-1;L<A;L++,A--)d=i[L],i[L]=i[A],i[A]=d,U=F[L],F[L]=F[A],F[A]=U;B=l}B++}}function wt(o,i,u,s,f){const l=i[s];return{UBAT_L:()=>(f.lastArabic=!1,e),UBAT_R:()=>(f.lastArabic=!1,a),UBAT_ON:()=>t,UBAT_AN:()=>g,UBAT_EN:()=>f.lastArabic?g:h,UBAT_AL:()=>(f.lastArabic=!0,f.hasUbatAl=!0,a),UBAT_WS:()=>t,UBAT_CS:()=>{let L,A;return s<1||s+1>=i.length||(L=u[s-1])!==h&&L!==g||(A=i[s+1])!==h&&A!==g?t:(f.lastArabic&&(A=g),A===L?A:t)},UBAT_ES:()=>(s>0?u[s-1]:S)===h&&s+1<i.length&&i[s+1]===h?h:t,UBAT_ET:()=>{if(s>0&&u[s-1]===h)return h;if(f.lastArabic)return t;let L=s+1;const A=i.length;for(;L<A&&i[L]===T;)L++;return L<A&&i[L]===h?h:t},UBAT_NSM:()=>{if(f.inFormat==="VLTR"){const L=i.length;let A=s+1;for(;A<L&&i[A]===n;)A++;if(A<L){const d=o[s].charCodeAt(0),U=d>=1425&&d<=2303||d===64286,B=i[A];if(U&&(B===a||B===r))return a}}return s<1||i[s-1]===S?t:u[s-1]},UBAT_B:()=>(f.lastArabic=!0,f.hasUbatB=!0,f.dir),UBAT_S:()=>(f.hasUbatS=!0,t),UBAT_LRE:()=>(f.lastArabic=!1,t),UBAT_RLE:()=>(f.lastArabic=!1,t),UBAT_LRO:()=>(f.lastArabic=!1,t),UBAT_RLO:()=>(f.lastArabic=!1,t),UBAT_PDF:()=>(f.lastArabic=!1,t),UBAT_BN:()=>t}[At[l]]()}function Nt(o){let i,u=0,s=I.length-1;for(;u<=s;)if(i=Math.floor((u+s)/2),o<I[i][0])s=i-1;else{if(!(o>I[i][0]))return I[i][1];u=i+1}return o}function Ct(o){for(let i=0;i<z.length;i++)if(z[i]===o)return!0;return!1}function vt(o){for(let i=0;i<D.length;i++)if(o===D[i])return nt[i];return o}function W(o,i){for(let u=0;u<D.length;u++)if(o===D[u])return i[u];return o}function x(o){return o>="ً"&&o<="ٕ"}function H(o){return o==="L"?"LTR":o==="R"?"RTL":o==="C"?"CLR":o==="D"?"CRL":""}function Et(o,i,u,s){for(;i*u<s&&x(o[i]);)i+=u;return i*u<s&&(o[i]=" ",!0)}function Vt(o,i){for(let u=0;u<E.length;u++)if(o===E[u])return i[u];return o}function Ot(o,i,u){F=[],y=[];for(let s=0;s<u;s++)o[s]=s,i[s]=s,F[s]=s}function xt(o){const i=new Array(o.length);for(let u=0;u<o.length;u++)i[o[u]]=u;return i}function X(o,i,u,s){for(let f=0;f<o.length;f++)(o[f]>i||!u&&o[f]===i)&&(o[f]+=s)}let F=[],P=[],y=[];const It={dir:0,defInFormat:"LLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,defOutFormat:""},jt=5,Dt=6,v=0,O=1,J=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,kt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{Pt as C};
