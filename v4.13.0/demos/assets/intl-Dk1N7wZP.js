import{aZ as m,eA as x,ha as A,s as f,L as E,a3 as M,$ as U,fj as j}from"./main-6eEsl9OJ.js";const F={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let w=new WeakMap,B={};function $(e){const t=e||B;if(!w.has(t)){const n=m(),r=x(n)?.language,u=r&&F[r]||n;w.set(t,new Intl.NumberFormat(u,e))}return w.get(t)}function P(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function I(e,t){return Object.is(e,-0)&&(e=0),$(t).format(e)}function J(e,t=m()){if(!e)return null;let n=_.get(t);if(!n){const r=$().formatToParts(12345.6),u=[...$({useGrouping:!1}).format(9876543210)].reverse(),a=new Map(u.map((s,i)=>[s,i])),h=new RegExp(`[${r.find(s=>s.type==="group")?.value}]`,"g"),p=new RegExp(`[${r.find(s=>s.type==="decimal")?.value}]`),l=new RegExp(`[${u.join("")}]`,"g"),g=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,c=/[-\u2212\u2013\u2014\u2015]/g;n=s=>{if((s=s.trim().replaceAll(h,"").replace(p,".").replace(l,v=>String(a.get(v))).replaceAll(g,"").replaceAll(c,"-"))==="")return null;const i=Number(s);return isNaN(i)?null:i},_.set(t,n)}return n(e)}A(()=>{w=new WeakMap,B={}});const _=new Map,N={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function z(e){return e in N}function b(e){if(z(e)){const t=N[e];return t===!0?e:t}return null}const d=[],o=new Map;function y(e){for(const t of o.keys())k(e.pattern,t)&&o.delete(t)}function C(e){return d.includes(e)||(y(e),d.unshift(e)),M(()=>{const t=d.indexOf(e);t>-1&&(d.splice(t,1),y(e))})}async function K(e){const t=m();o.has(e)||o.set(e,W(e,t));const n=o.get(e);return n&&await T.add(n),n}function S(e){const t=x(e);return t?b(e)??b(t.language):null}async function W(e,t){const n=[];for(const r of d)if(k(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(u){n.push(u)}throw n.length?new f("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n}):new f("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function k(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}A(()=>{o.clear()});const T=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=E())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function D(e,t,n,r){const u=t.exec(n);if(!u)throw new f("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const a=u[1]?`${u[1]}/`:"",h=u[2],p=S(r),l=`${a}${h}.json`,g=p?`${a}${h}_${p}.json`:l;let c;try{c=await L(e(g))}catch(s){if(g===l)throw new f("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:s});try{c=await L(e(l))}catch(i){throw new f("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:i})}}return c}async function L(e){if(R.fetchBundleAsset!=null)return R.fetchBundleAsset(e);const t=await U(e,{responseType:"text"});return JSON.parse(t.data)}class O{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let u;u=typeof r=="string"?a=>new URL(a,new URL(r,window.location.href)).href:r instanceof URL?a=>new URL(a,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=u,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,n){return D(this.getAssetUrl,this.matcher,t,n)}}function G(e){return new O(e)}const R={};C(G({pattern:"esri/",location:j}));export{K as f,P as i,S as m,I as o,J as p};
