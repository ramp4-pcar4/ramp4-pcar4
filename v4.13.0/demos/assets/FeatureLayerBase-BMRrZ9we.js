import{q as e,v as r,x as p,z as $,bp as q,jy as Ke,c8 as Me,H as l,G as u,li as pt,f as L,lj as lt,fg as at,iL as Xe,bt as ut,fh as Te,hP as Re,lk as De,ll as dt,lm as yt,c1 as ct,V as Ue,I as Ne,ga as mt,i as ht,gb as ft,b$ as Q,di as te,eq as vt,ct as Ve,ln as xt,lo as wt}from"./main-6eEsl9OJ.js";import{a as Ye,t as gt}from"./Field-CzUupKXc.js";import{a as bt}from"./layerContainerType-C5CzMsLd.js";import{m as jt}from"./HeightModelInfo-JPXqCMoM.js";import{m as It,v as Et,j as $t,y as St}from"./OperationalLayer-DPy11VYP.js";import{a as ue}from"./timeZoneUtils-DmTpvLBr.js";import{j as Ft,X as ke,r as Mt,i as ie,M as Ot,k as Tt,z as Rt}from"./labelingInfo-DcSEjCI1.js";import{i as Dt}from"./LayerFloorInfo-CDcpg9U7.js";import{n as Ut}from"./Relationship-Bs1Yiz6F.js";import{c as Nt}from"./serviceCapabilitiesUtils-D0vZJ1w2.js";import{s as Vt,E as kt}from"./portalItemUtils-DES5WVek.js";var de;let O=de=class extends ${constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new de({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([r({type:String,json:{write:!0}})],O.prototype,"expression",void 0),e([r({type:String,json:{write:!0}})],O.prototype,"name",void 0),e([r({type:["boolean","date","number","string"],json:{write:!0}})],O.prototype,"returnType",void 0),e([r({type:String,json:{write:!0}})],O.prototype,"title",void 0),O=de=e([p("esri.form.ExpressionInfo")],O);const At=O;let T=class extends ${constructor(i){super(i),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e([r({type:String,json:{write:!0}})],T.prototype,"description",void 0),e([r({type:String,json:{write:!0}})],T.prototype,"label",void 0),e([r()],T.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],T.prototype,"visibilityExpression",void 0),T=e([p("esri.form.elements.Element")],T);const F=T;let _=class extends q.ClonableMixin($){constructor(i){super(i),this.type=null}};e([r()],_.prototype,"type",void 0),_=e([p("esri.form.elements.inputs.attachments.Input")],_);const M=_,Y=["any","capture","upload"];let R=class extends M{constructor(i){super(i),this.type="audio",this.inputMethod="any",this.maxDuration=null}};e([r({type:["audio"],readOnly:!0,json:{write:!0}})],R.prototype,"type",void 0),e([r({type:Y,json:{write:!0}})],R.prototype,"inputMethod",void 0),e([r({type:Number,json:{write:!0}})],R.prototype,"maxDuration",void 0),R=e([p("esri.form.elements.inputs.attachments.AudioInput")],R);const Ae=R;let H=class extends M{constructor(i){super(i),this.type="document",this.maxFileSize=null}};e([r({type:["document"],readOnly:!0,json:{write:!0}})],H.prototype,"type",void 0),e([r({type:Number,json:{write:!0}})],H.prototype,"maxFileSize",void 0),H=e([p("esri.form.elements.inputs.attachments.DocumentInput")],H);const Be=H;let D=class extends M{constructor(i){super(i),this.type="image",this.inputMethod="any",this.maxImageSize=null}};e([r({type:["image"],readOnly:!0,json:{write:!0}})],D.prototype,"type",void 0),e([r({type:Y,json:{write:!0}})],D.prototype,"inputMethod",void 0),e([r({type:Number,json:{write:!0}})],D.prototype,"maxImageSize",void 0),D=e([p("esri.form.elements.inputs.attachments.ImageInput")],D);const Ce=D;let G=class extends M{constructor(i){super(i),this.type="signature",this.inputMethod="any"}};e([r({type:["signature"],readOnly:!0,json:{write:!0}})],G.prototype,"type",void 0),e([r({type:Y,json:{write:!0}})],G.prototype,"inputMethod",void 0),G=e([p("esri.form.elements.inputs.attachments.SignatureInput")],G);const Le=G;let U=class extends M{constructor(i){super(i),this.type="video",this.inputMethod="any",this.maxDuration=null}};e([r({type:["video"],readOnly:!0,json:{write:!0}})],U.prototype,"type",void 0),e([r({type:Y,json:{write:!0}})],U.prototype,"inputMethod",void 0),e([r({type:Number,json:{write:!0}})],U.prototype,"maxDuration",void 0),U=e([p("esri.form.elements.inputs.attachments.VideoInput")],U);const qe=U;function et(t){return{nestableTypes:{base:M,key:"type",typeMap:{audio:Ae,document:Be,image:Ce,signature:Le,video:qe}},allTypes:{base:M,key:"type",typeMap:{attachment:t,audio:Ae,document:Be,image:Ce,signature:Le,video:qe}}}}function Bt(t,i,s){return t?t.map(o=>Ke(i.nestableTypes,o)):null}function Ct(t,i,s){if(!t)return null;const o=i.nestableTypes.typeMap;return t.filter(n=>o[n.type]).map(n=>o[n.type].fromJSON(n))}function Lt(t,i,s){if(!t)return null;const o=i.nestableTypes.typeMap;return t.filter(n=>o[n.type]).map(n=>n.toJSON())}let w=class extends M{constructor(i){super(i),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(i){return Bt(i,re)}readInputs(i,s){return Ct(s.inputTypes,re)}writeInputs(i,s){s.inputTypes=Lt(i,re)}};e([r({type:["attachment"],readOnly:!0,json:{write:!0}})],w.prototype,"type",void 0),e([r({type:["any","exact","exactOrNone"],json:{write:!0}})],w.prototype,"attachmentAssociationType",void 0),e([r({json:{write:{isRequired:!0}}})],w.prototype,"inputTypes",void 0),e([Me("inputTypes")],w.prototype,"castInputs",null),e([l("inputTypes")],w.prototype,"readInputs",null),e([u("inputTypes")],w.prototype,"writeInputs",null),w=e([p("esri.form.elements.inputs.attachments.AttachmentInput")],w);const re=et(w),qt=w;var ye;const Ht=et(qt);let y=ye=class extends F{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new ye({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};e([r({type:Boolean,json:{write:!0}})],y.prototype,"allowUserRename",void 0),e([r({type:String,json:{write:{isRequired:!0}}})],y.prototype,"attachmentKeyword",void 0),e([r({type:Boolean,json:{write:!0}})],y.prototype,"displayFilename",void 0),e([r({type:String,json:{write:!0}})],y.prototype,"editableExpression",void 0),e([r({type:String,json:{write:!0}})],y.prototype,"filenameExpression",void 0),e([r({types:Ht.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],y.prototype,"input",void 0),e([r({type:Number,json:{write:!0}})],y.prototype,"maxAttachmentCount",void 0),e([r({type:Number,json:{write:!0}})],y.prototype,"minAttachmentCount",void 0),e([r({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),e([r({type:Boolean,json:{write:!0}})],y.prototype,"useOriginalFilename",void 0),y=ye=e([p("esri.form.elements.AttachmentElement")],y);const He=y;let Z=class extends ${constructor(t){super(t),this.type=null}};e([r()],Z.prototype,"type",void 0),Z=e([p("esri.form.elements.inputs.Input")],Z);const S=Z;let P=class extends S{constructor(i){super(i),this.maxLength=null,this.minLength=0}};e([r({type:Number,json:{write:!0}})],P.prototype,"maxLength",void 0),e([r({type:Number,json:{write:!0}})],P.prototype,"minLength",void 0),P=e([p("esri.form.elements.inputs.TextInput")],P);const Oe=P;var ce;let J=ce=class extends Oe{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new ce({maxLength:this.maxLength,minLength:this.minLength})}};e([r({type:["barcode-scanner"],json:{read:!1,write:!0}})],J.prototype,"type",void 0),J=ce=e([p("esri.form.elements.inputs.BarcodeScannerInput")],J);const Gt=J;var me;let N=me=class extends S{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new me({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e([r({type:String,json:{write:!0}})],N.prototype,"noValueOptionLabel",void 0),e([r({type:Boolean,json:{write:!0}})],N.prototype,"showNoValueOption",void 0),e([r({type:["combo-box"],json:{read:!1,write:!0}})],N.prototype,"type",void 0),N=me=e([p("esri.form.elements.inputs.ComboBoxInput")],N);const Pt=N;var he;function Ge(t){return t??null}function Pe(t){return t??null}let x=he=class extends S{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,i){return Ge(i.max)}writeMax(t,i){i.max=Pe(t)}readMin(t,i){return Ge(i.min)}writeMin(t,i){i.min=Pe(t)}clone(){return new he({max:this.max,min:this.min})}};e([r({type:String,json:{type:String,write:!0}})],x.prototype,"max",void 0),e([l("max")],x.prototype,"readMax",null),e([u("max")],x.prototype,"writeMax",null),e([r({type:String,json:{type:String,write:!0}})],x.prototype,"min",void 0),e([l("min")],x.prototype,"readMin",null),e([u("min")],x.prototype,"writeMin",null),e([r({type:["date-picker"],json:{read:!1,write:!0}})],x.prototype,"type",void 0),x=he=e([p("esri.form.elements.inputs.DatePickerInput")],x);const Wt=x;var fe;function oe(t){return t??null}function se(t){return t??null}let d=fe=class extends S{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,i){return oe(i.max)}writeMax(t,i){i.max=se(t)}readMin(t,i){return oe(i.min)}writeMin(t,i){i.min=se(t)}readTimeResolution(t,i){return oe(i.timeResolution)}writeTimeResolution(t,i){i.timeResolution=se(t)}clone(){return new fe({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([r({type:Boolean,json:{write:!0}})],d.prototype,"includeTimeOffset",void 0),e([r({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e([l("max")],d.prototype,"readMax",null),e([u("max")],d.prototype,"writeMax",null),e([r({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e([l("min")],d.prototype,"readMin",null),e([u("min")],d.prototype,"writeMin",null),e([r({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e([l("timeResolution")],d.prototype,"readTimeResolution",null),e([u("timeResolution")],d.prototype,"writeTimeResolution",null),e([r({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=fe=e([p("esri.form.elements.inputs.DateTimeOffsetPickerInput")],d);const zt=d;var ve;function We(t){return t!=null?new Date(t):null}function ze(t){return t?t.getTime():null}let h=ve=class extends S{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,i){return We(i.max)}writeMax(t,i){i.max=ze(t)}readMin(t,i){return We(i.min)}writeMin(t,i){i.min=ze(t)}clone(){return new ve({includeTime:this.includeTime,max:this.max,min:this.min})}};e([r({type:Boolean,json:{write:!0}})],h.prototype,"includeTime",void 0),e([r({type:Date,json:{type:Number,write:!0}})],h.prototype,"max",void 0),e([l("max")],h.prototype,"readMax",null),e([u("max")],h.prototype,"writeMax",null),e([r({type:Date,json:{type:Number,write:!0}})],h.prototype,"min",void 0),e([l("min")],h.prototype,"readMin",null),e([u("min")],h.prototype,"writeMin",null),e([r({type:["datetime-picker"],json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=ve=e([p("esri.form.elements.inputs.DateTimePickerInput")],h);const Qt=h;var xe;let V=xe=class extends S{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new xe({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e([r({type:String,json:{write:!0}})],V.prototype,"noValueOptionLabel",void 0),e([r({type:Boolean,json:{write:!0}})],V.prototype,"showNoValueOption",void 0),e([r({type:["radio-buttons"],json:{read:!1,write:!0}})],V.prototype,"type",void 0),V=xe=e([p("esri.form.elements.inputs.RadioButtonsInput")],V);const _t=V;var we;let k=we=class extends S{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new we({offValue:this.offValue,onValue:this.onValue})}};e([r({type:[String,Number],json:{write:!0}})],k.prototype,"offValue",void 0),e([r({type:[String,Number],json:{write:!0}})],k.prototype,"onValue",void 0),e([r({type:["switch"],json:{read:!1,write:!0}})],k.prototype,"type",void 0),k=we=e([p("esri.form.elements.inputs.SwitchInput")],k);const Zt=k;var ge;let K=ge=class extends Oe{constructor(t){super(t),this.type="text-area"}clone(){return new ge({maxLength:this.maxLength,minLength:this.minLength})}};e([r({type:["text-area"],json:{read:!1,write:!0}})],K.prototype,"type",void 0),K=ge=e([p("esri.form.elements.inputs.TextAreaInput")],K);const Jt=K;var be;let X=be=class extends Oe{constructor(t){super(t),this.type="text-box"}clone(){return new be({maxLength:this.maxLength,minLength:this.minLength})}};e([r({type:["text-box"],json:{read:!1,write:!0}})],X.prototype,"type",void 0),X=be=e([p("esri.form.elements.inputs.TextBoxInput")],X);const Kt=X;var je;function ne(t){return t??null}function pe(t){return t??null}let c=je=class extends S{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,i){return ne(i.max)}writeMax(t,i){i.max=pe(t)}readMin(t,i){return ne(i.min)}writeMin(t,i){i.min=pe(t)}readTimeResolution(t,i){return ne(i.timeResolution)}writeTimeResolution(t,i){i.timeResolution=pe(t)}clone(){return new je({max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([r({type:String,json:{type:String,write:!0}})],c.prototype,"max",void 0),e([l("max")],c.prototype,"readMax",null),e([u("max")],c.prototype,"writeMax",null),e([r({type:String,json:{type:String,write:!0}})],c.prototype,"min",void 0),e([l("min")],c.prototype,"readMin",null),e([u("min")],c.prototype,"writeMin",null),e([r({type:String,json:{type:String,write:!0}})],c.prototype,"timeResolution",void 0),e([l("timeResolution")],c.prototype,"readTimeResolution",null),e([u("timeResolution")],c.prototype,"writeTimeResolution",null),e([r({type:["time-picker"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=je=e([p("esri.form.elements.inputs.TimePickerInput")],c);const Xt=c,Yt={base:S,key:"type",typeMap:{"barcode-scanner":Gt,"combo-box":Pt,"date-picker":Wt,"datetime-picker":Qt,"datetimeoffset-picker":zt,"radio-buttons":_t,switch:Zt,"text-area":Jt,"text-box":Kt,"time-picker":Xt}};var Ie;let m=Ie=class extends F{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Ie({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e([r({types:gt,json:{read:{reader:Ye},write:!0}})],m.prototype,"domain",void 0),e([r({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"editableExpression",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"fieldName",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"hint",void 0),e([r({types:Yt,json:{read:{source:"inputType"},write:{target:"inputType"}}})],m.prototype,"input",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"requiredExpression",void 0),e([r({type:String,json:{read:!1,write:!0}})],m.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),m=Ie=e([p("esri.form.elements.FieldElement")],m);const Qe=m;var Ee;let j=Ee=class extends F{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ee({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:L(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e([r({type:Number,json:{write:!0}})],j.prototype,"displayCount",void 0),e([r({type:["list"],json:{write:!0}})],j.prototype,"displayType",void 0),e([r({type:String,json:{write:!0}})],j.prototype,"editableExpression",void 0),e([r({type:[pt],json:{write:!0}})],j.prototype,"orderByFields",void 0),e([r({type:Number,json:{write:!0}})],j.prototype,"relationshipId",void 0),e([r({type:["relationship"],json:{read:!1,write:!0}})],j.prototype,"type",void 0),j=Ee=e([p("esri.form.elements.RelationshipElement")],j);const _e=j;var $e;let A=$e=class extends F{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new $e({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};e([r({type:String,json:{write:!0}})],A.prototype,"text",void 0),e([r({type:String,json:{write:!0}})],A.prototype,"textFormat",void 0),e([r({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=$e=e([p("esri.form.elements.TextElement")],A);const Ze=A;let B=class extends q.ClonableMixin(F){constructor(i){super(i),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};e([r({type:[lt],json:{write:{isRequired:!0}}})],B.prototype,"associationTypes",void 0),e([r({type:String,json:{write:!0}})],B.prototype,"editableExpression",void 0),e([r({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=e([p("esri.form.elements.UtilityNetworkAssociationsElement")],B);const Je=B,ei=t=>t.type==="field",ti=t=>t.type==="group",ii=t=>t.type==="text";function tt(t){return{typesWithGroup:{base:F,key:"type",typeMap:{attachment:He,field:Qe,group:t,relationship:_e,text:Ze,utilityNetworkAssociations:Je}},typesWithoutGroup:{base:F,key:"type",typeMap:{attachment:He,field:Qe,relationship:_e,text:Ze,utilityNetworkAssociations:Je}}}}function it(t,i,s=!0){if(!t)return null;const o=s?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return t.filter(n=>o[n.type]).map(n=>o[n.type].fromJSON(n))}function rt(t,i,s=!0){if(!t)return null;const o=s?i.typesWithGroup.typeMap:i.typesWithoutGroup.typeMap;return t.filter(n=>o[n.type]).map(n=>n.toJSON())}function ot(t,i,s=!0){return t?t.map(o=>Ke(s?i.typesWithGroup:i.typesWithoutGroup,o)):null}var Se;let g=Se=class extends F{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return ot(t,le,!1)}readElements(t,i){return it(i.formElements,le,!1)}writeElements(t,i){i.formElements=rt(t,le,!1)}clone(){return new Se({description:this.description,elements:L(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e([r({json:{write:!0}})],g.prototype,"elements",void 0),e([Me("elements")],g.prototype,"castElements",null),e([l("elements",["formElements"])],g.prototype,"readElements",null),e([u("elements")],g.prototype,"writeElements",null),e([r({type:["collapsed","expanded"],json:{write:!0}})],g.prototype,"initialState",void 0),e([r({type:String,json:{read:!1,write:!0}})],g.prototype,"type",void 0),g=Se=e([p("esri.form.elements.GroupElement")],g);const le=tt(g),ri=g;var Fe;const ae=tt(ri);let f=Fe=class extends ${constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return ot(t,ae)}readElements(t,i){return it(i.formElements,ae)}writeElements(t,i){i.formElements=rt(t,ae)}clone(){return new Fe({description:this.description,expressionInfos:L(this.expressionInfos),elements:L(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,i){const s=new Set,{description:o,elements:n,expressionInfos:a,title:v}=this;if(W(s,t,o),W(s,t,v),!n)return[];const z=oi(n,a).map(ee=>at(s,t,ee));await Promise.all(z);for(const ee of n)st(s,{fieldsIndex:t,relationships:i},ee);return Array.from(s).sort()}};function st(t,i,s){const{fieldsIndex:o}=i;if(!o||o.fields.length!==t.size)switch(W(t,o,s.label),W(t,o,s.description),s.type){case"field":Te(t,o,s.fieldName);break;case"group":s.elements.forEach(n=>st(t,i,n));break;case"relationship":if(i.relationships){const n=i.relationships.find(a=>a.id===s.relationshipId);n&&Te(t,o,n.keyField)}Xe(t,o,s.orderByFields?.map(n=>n.field));break;case"text":W(t,o,s.text)}}function oi(t,i){if(!i||i.length===0)return[];const s=nt(t),o=[];for(const n of i)s.has(n.name)&&o.push(n.expression);return o}function nt(t){const i=new Set;for(const s of t)if(Re(i,s.visibilityExpression),!ii(s)){if(ti(s))De(i,nt(s.elements));else if(Re(i,s.editableExpression),ei(s)){const{requiredExpression:o,valueExpression:n}=s;De(i,[o,n])}}return i}function W(t,i,s){Xe(t,i,ut(s))}e([r({type:String,json:{write:!0}})],f.prototype,"description",void 0),e([r({json:{write:!0}})],f.prototype,"elements",void 0),e([Me("elements")],f.prototype,"castElements",null),e([l("elements",["formElements"])],f.prototype,"readElements",null),e([u("elements")],f.prototype,"writeElements",null),e([r({type:[At],json:{write:!0}})],f.prototype,"expressionInfos",void 0),e([r({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"preserveFieldValuesWhenHidden",void 0),e([r({type:String,json:{write:!0}})],f.prototype,"title",void 0),f=Fe=e([p("esri.form.FormTemplate")],f);const Si=f;let I=class extends q.ClonableMixin($){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([r()],I.prototype,"creatorField",void 0),e([r()],I.prototype,"creationDateField",void 0),e([r()],I.prototype,"editorField",void 0),e([r()],I.prototype,"editDateField",void 0),e([r()],I.prototype,"realm",void 0),e([r(ue("dateFieldsTimeReference",!0))],I.prototype,"timeZone",void 0),I=e([p("esri.layers.support.EditFieldsInfo")],I);let b=class extends q.ClonableMixin($){constructor(t){super(t)}};e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"name",void 0),e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"fields",void 0),e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"isAscending",void 0),e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"indexType",void 0),e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"isUnique",void 0),e([r({constructOnly:!0,json:{write:!0}})],b.prototype,"description",void 0),b=e([p("esri.layers.support.FeatureIndex")],b);let C=class extends q.ClonableMixin($){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([r({type:String,json:{read:{source:"shapeAreaFieldName"}}})],C.prototype,"shapeAreaField",void 0),e([r({type:String,json:{read:{source:"shapeLengthFieldName"}}})],C.prototype,"shapeLengthField",void 0),e([r({type:String,json:{read:t=>dt.read(t)||yt.read(t)}})],C.prototype,"units",void 0),C=e([p("esri.layers.support.GeometryFieldsInfo")],C);let E=class extends q.ClonableMixin($){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const i={};for(const s of Object.keys(t))i[s]=Ye(t[s]);return i}writeDomains(t,i){if(!t)return;const s={};for(const o of Object.keys(t))t[o]&&(s[o]=t[o]?.toJSON());i.domains=s}};e([r({type:Number,json:{write:!0}})],E.prototype,"code",void 0),e([r({type:Object,json:{write:!0}})],E.prototype,"defaultValues",void 0),e([r({json:{write:!0}})],E.prototype,"domains",void 0),e([l("domains")],E.prototype,"readDomains",null),e([u("domains")],E.prototype,"writeDomains",null),e([r({type:String,json:{write:!0}})],E.prototype,"name",void 0),E=e([p("esri.layers.support.Subtype")],E);const Fi=t=>{let i=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(Ue.ofType(b)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ne.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(s){return this.fieldsIndex.get(s)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:s}=this;if(s){const{query:n,operations:a,editing:v}=s;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||a.supportsEditing&&!(v.supportsUpdateByOthers&&v.supportsUpdateByAnonymous&&v.supportsDeleteByOthers&&v.supportsDeleteByAnonymous))return"load"}if(ke(this.serviceDefinitionExpression)||ke(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Mt(this))return"load";if(this.hasUpdateItemRestrictions)return s.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const o=this.editFieldsInfo;return(o?.creatorField||o?.editorField)&&s?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(s,o){return Nt(o,this.url)}readEditingInfo(s,o){const{editingInfo:n}=o;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){const s=this.capabilities;if(!s)return null;const o=L(s),{operations:n,editing:a}=o;return ie(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=a.supportsGeometryUpdate=!0),o)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(s,o){return Ot(o)}get hasFullEditingRestrictions(){const s=this.capabilities;if(!s||ie(this))return!1;const{operations:o,editing:n}=s;return o.supportsEditing&&!(o.supportsAdd&&o.supportsDelete&&o.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const s=this.capabilities;if(!s)return!1;const{operations:o,editing:n}=s;return ie(this)?!o.supportsQuery:!(o.supportsAdd&&o.supportsDelete&&o.supportsEditing&&o.supportsQuery&&o.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(s,o){return o.type==="Table"}readMaxScale(s,o){return o.effectiveMaxScale||s||0}readMinScale(s,o){return o.effectiveMinScale||s||0}readObjectIdFieldFromService(s,o){return Tt(o)}readServiceDefinitionExpression(s,o){return o.definitionQuery||o.definitionExpression}readUniqueIdFields(s,o){return o.uniqueIdInfo?.OIDFieldContainsHashValue?o.uniqueIdInfo.fields:null}set url(s){if(s==null)return void this._set("url",s);const o=mt({layer:this,url:s,nonStandardUrlAllowed:!0,logger:ht.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}writeUrl(s,o,n,a){ft(this,s,null,o,a)}readVersion(s,o){return Rt(o)}get isUrlHostModified(){const{loaded:s,url:o,_isUrlHostModified:n}=this;if(n)return!0;if(!s||!o||this.originIdOf("url")<Q.USER)return!1;const a=this.sourceJSON?.preferredHost;if(!a||!te(o,`https://${a}`,!0))return!1;for(let v=Q.USER-1;v>=Q.PORTAL_ITEM;v--){const z=this.getAtOrigin("url",vt(v));if(z)return!te(o,z,!0)}return!1}applyPreferredHost(s){const{url:o,portalItem:n}=this;!o||Ve(n)}applyHostFromPortalItem(){const{url:s,portalItem:o}=this;if(!s||this.originIdOf("url")===Q.USER||!o?.url||!Ve(o)||!Vt(o,kt.HOSTED_SERVICE)||te(s,o.url,!0)||!this._isUrlHostModificationEnabled)return;const n=xt(o.url);this._set("url",wt(s,n)),this._isUrlHostModified=!0}};return e([r({readOnly:!0})],i.prototype,"authenticationTriggerEvent",null),e([r({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),e([r({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],i.prototype,"capabilities",void 0),e([l("service","capabilities")],i.prototype,"readCapabilitiesFromService",null),e([r(ue("dateFieldsTimeReference"))],i.prototype,"dateFieldsTimeZone",void 0),e([r({type:Boolean})],i.prototype,"datesInUnknownTimezone",void 0),e([r({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],i.prototype,"definitionExpression",void 0),e([r({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),e([r({readOnly:!0,type:I})],i.prototype,"editFieldsInfo",void 0),e([r({readOnly:!0})],i.prototype,"editingInfo",void 0),e([l("editingInfo")],i.prototype,"readEditingInfo",null),e([r({readOnly:!0})],i.prototype,"effectiveCapabilities",null),e([r()],i.prototype,"effectiveEditingEnabled",null),e([r((()=>{const s=L(It),o=s.json.origins;return o["web-map"]={read:!1,write:!1},o["portal-item"]={read:!1,write:!1},s})())],i.prototype,"elevationInfo",void 0),e([r()],i.prototype,"fieldsIndex",void 0),e([r({type:Dt,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:bt}}})],i.prototype,"floorInfo",void 0),e([r({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],i.prototype,"fullExtent",void 0),e([r()],i.prototype,"gdbVersion",void 0),e([r({readOnly:!0,type:C,json:{read:{source:"geometryProperties"}}})],i.prototype,"geometryFieldsInfo",void 0),e([r({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Ft.read}}}})],i.prototype,"geometryType",void 0),e([r({type:String})],i.prototype,"globalIdField",void 0),e([l("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),e([r({readOnly:!0})],i.prototype,"hasFullEditingRestrictions",null),e([r({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasM",void 0),e([r({readOnly:!0})],i.prototype,"hasUpdateItemRestrictions",null),e([r({type:Boolean,json:{origins:{service:{read:!0}}}})],i.prototype,"hasZ",void 0),e([r({readOnly:!0,type:jt})],i.prototype,"heightModelInfo",void 0),e([r({type:Date})],i.prototype,"historicMoment",void 0),e([r({type:Ue.ofType(b),readOnly:!0})],i.prototype,"indexes",void 0),e([r({readOnly:!0})],i.prototype,"isTable",void 0),e([l("service","isTable",["type"])],i.prototype,"readIsTableFromService",null),e([r({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],i.prototype,"layerId",void 0),e([r(Et)],i.prototype,"maxScale",void 0),e([l("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),e([r($t)],i.prototype,"minScale",void 0),e([l("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),e([r({type:String})],i.prototype,"objectIdField",void 0),e([l("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),e([r(ue("preferredTimeReference"))],i.prototype,"preferredTimeZone",void 0),e([r({type:[Ut],readOnly:!0})],i.prototype,"relationships",void 0),e([r({type:Boolean})],i.prototype,"returnM",void 0),e([r({type:Boolean})],i.prototype,"returnZ",void 0),e([r({readOnly:!0,json:{write:!1}})],i.prototype,"serverGens",void 0),e([r({readOnly:!0})],i.prototype,"serviceDefinitionExpression",void 0),e([l("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],i.prototype,"readServiceDefinitionExpression",null),e([r({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"serviceItemId",void 0),e([r()],i.prototype,"sourceJSON",void 0),e([r({type:Ne,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],i.prototype,"spatialReference",void 0),e([r({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],i.prototype,"subtypeField",void 0),e([r({type:[E],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],i.prototype,"subtypes",void 0),e([r({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),e([r({type:[String],readOnly:!0})],i.prototype,"uniqueIdFields",void 0),e([l("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],i.prototype,"readUniqueIdFields",null),e([r(St)],i.prototype,"url",null),e([u("url")],i.prototype,"writeUrl",null),e([r({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),e([l("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],i.prototype,"readVersion",null),e([r({readOnly:!0})],i.prototype,"isUrlHostModified",null),i=e([p("esri.layers.mixins.FeatureLayerBase")],i),i};export{Si as V,Fi as k};
