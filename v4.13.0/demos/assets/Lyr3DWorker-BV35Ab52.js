const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./lyr3DWorker-BZdvSQ50.js","./_commonjsHelpers-DCkdB7M8.js"])))=>i.map(i=>d[i]);
import{u}from"./ILyr3DWasmPerSceneView-CIC-HPGZ.js";import{_ as f}from"./preload-helper-B76NpbEU.js";import{fj as m}from"./main-6eEsl9OJ.js";function d(){return new Promise(s=>f(()=>import("./lyr3DWorker-BZdvSQ50.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>t.l).then(({default:t})=>{const r=t({locateFile:_,onRuntimeInitialized:()=>s(r)})})).catch(s=>{throw s})}function _(s){return m(`esri/libs/lyr3d/${s}`)}let o,n;async function w(s){await h();const t={status:u.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(s.inputs.length<1)return{result:t,transferList:[]};const r={ptrs:[],sizes:[]};for(const e of s.inputs){const p=n._malloc(e.byteLength);new Uint8Array(n.HEAPU8.buffer,p,e.byteLength).set(new Uint8Array(e)),r.ptrs.push(p),r.sizes.push(e.byteLength)}const i=n.process(s.jobDescJson,s.id,r,s.isMissingResourceCase);t.status=i.status,t.missingInputUrls=i.missingInputUrls.slice();const l=i.status===u.Succeeded&&i.data,c=t.status===u.MissingInputs&&t.missingInputUrls.length>0;t.jobDescJson=i.jobDescJson.slice(),t.error=i.error.slice(),l?t.data=i.data.slice():c&&(t.originalInputs=s.inputs.slice());for(let e=0;e<r.ptrs.length;++e)n._free(r.ptrs[e]);const a=[];if(l)a.push(t.data.buffer);else if(c)for(const e of s.inputs)a.push(e);return{result:t,transferList:a}}function I(){n&&(n.uninitialize_lyr3d_worker_wasm(),n=null)}function h(){return n?Promise.resolve():(o||(o=d().then(s=>{n=s,n.initialize_lyr3d_worker_wasm(),o=null})),o)}export{I as destroyWasm,h as initialize,w as process};
