const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./previewWebStyleSymbol-DKkAyrVA.js","./main-6eEsl9OJ.js","./preload-helper-B76NpbEU.js","./main-B_8sIZOq.css","./webStyleSymbolUtils-DtjPYFJD.js","./devEnvironmentUtils-8WtPGj6h.js","./styleUtils-DkahzbXB.js","./utils-8sNkJo3w.js","./asyncUtils-SHsCTXd3.js","./jsonUtils-DIh9yTg7.js","./parser-C27q64z5.js","./mat4f32-Djp3mnm5.js","./mat4-DL3nuHcq.js","./common-DQOJ18NT.js","./cimSymbolUtils-B04pXcN-.js","./utils-BV7DBUkI.js","./defaultCIMValues-CQAn2izL.js","./enums-_AFKM9Yk.js","./LRUCache-BB1cebTv.js","./MemCache-BSBM3Sy1.js","./colorUtils-D1om_hYv.js","./vec42-CKs01hkn.js","./vec4f64-DPb6J-GU.js","./jsxFactory-vcCo5QL-.js","./intl-Dk1N7wZP.js","./uuid-Cl5lrJ4c.js","./sanitizerUtils-CJlLEeXg.js","./mat2df32-Dpt2CT5P.js","./mat2d-D9DBP-jx.js","./previewSymbol2D-DMzZYlTM.js","./fontUtils-CwhMXwvH.js","./quantizationUtils-j62jcfjD.js","./previewCIMSymbol-B2yyYPpq.js","./CIMSymbolHelper-bvW1zimp.js","./BidiEngine-QXap_35O.js","./OptimizedGeometry-OYT6ACAY.js","./memoryEstimations-5hBnZCeh.js","./GeometryUtils-VYshlWMq.js","./definitions-CASyCajO.js","./rasterizingUtils-SjltlEdr.js","./floatRGBA-BJ3lztEL.js","./vec2-ChnYg_BJ.js","./vec2f32-CaVKkSa6.js","./Rect-CUzevAry.js","./BoundingBox-BSOANoLO.js","./CIMSymbolRasterizer-1YEZf-LC.js","./CIMResourceManager-DAh_aeEa.js","./imageUtils-1DJLgkmm.js","./OverrideHelper-BWHLnVew.js","./FieldsIndex-CRdljKn6.js","./UnknownTimeZone-ZLOR0Bi8.js","./timeZoneUtils-DmTpvLBr.js","./ArcadeExpression-CYMFQJdI.js","./TimeOnly-C1MWI3zZ.js","./enum-DjCgFROZ.js","./callExpressionWithFeature-C-SX1IOC.js","./visualVariableUtils-Q9XaDxnO.js","./lengthUtils-DL53yBUT.js"])))=>i.map(i=>d[i]);
import{_ as I}from"./preload-helper-B76NpbEU.js";import{bj as O,aH as K,aq as Q,U as Re,$ as Ce,s as H,fj as ye,bU as j,i as Ze,iJ as De,iK as Ee,bu as Oe}from"./main-6eEsl9OJ.js";import{g as Ve,q as ge,f as Ie,b as Pe,h as Ne,a as ve,c as Fe,L as W,M as Ge,N as Ue,y as Te}from"./utils-8sNkJo3w.js";import{B as Y,U as be}from"./colorUtils-D1om_hYv.js";import{n as L,b as Be}from"./jsxFactory-vcCo5QL-.js";import{n as oe}from"./mat2df32-Dpt2CT5P.js";import{e as V,c as We,a as ee,i as qe,s as He}from"./mat2d-D9DBP-jx.js";import{h as Xe}from"./webStyleSymbolUtils-DtjPYFJD.js";var S;(function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"})(S||(S={}));const P={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}]};function Je(e,t,a){const n=S.size;let l=n,o=n;e<1?l*=.75:e>1&&(o*=1.25);const i=0,c=0;let r=n,u=n;return t&&a&&(l=o=r=u=0),[{type:"path",path:[{command:"M",values:[r,i]},{command:"L",values:[a?r:.875*r,i]},{command:"L",values:[a?l-.5*r:c,o-.5*u]},{command:"L",values:[l-.5*r,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r,i]},{command:"L",values:[r,t?i:.125*u]},{command:"L",values:[l-.5*r,t?o-.5*u:u]},{command:"L",values:[l-.5*r,o-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l-.5*r,o-.5*u]},{command:"L",values:[a?l-.5*r:c,o-.5*u]},{command:"L",values:[a?l-.5*r:c,t?o-.5*u:u]},{command:"L",values:[l-.5*r,t?o-.5*u:u]},{command:"Z",values:[]}]}]}function Ke(e){const t=S.size,a=.5*e,n=0,l=0;return[{type:"path",path:[{command:"M",values:[l,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[l,.7*t+a-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+a]},{command:"L",values:[t,a]},{command:"L",values:[t,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,n]},{command:"L",values:[t,n]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[l,.7*t*.5]},{command:"Z",values:[]}]}]}function Qe(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function Ye(e,t){let a=t?S.tallSymbolWidth:e;const n=e,l=t?4:6;a<=S.size?a-=.5*l:a-=l;const o=0,i=0,c=t?.35*a:.5*a;return[{type:"path",path:[{command:"M",values:[.5*a,o]},{command:"L",values:[a,.5*c]},{command:"L",values:[.5*a,c]},{command:"L",values:[i,.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*c]},{command:"L",values:[.5*a,c]},{command:"L",values:[.5*a,n]},{command:"L",values:[i,n-.5*c]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*a,c]},{command:"L",values:[.5*a,n]},{command:"L",values:[a,n-.5*c]},{command:"L",values:[a,.5*c]},{command:"Z",values:[]}]}]}function et(e,t){let a=t?S.tallSymbolWidth:e;const n=e,l=t?4:6;a<=S.size?a-=.5*l:a-=l;const o=.5*a,i=.15*a,c=0,r=n-i;return[{type:"ellipse",cx:.5*a,cy:r,rx:o,ry:i},{type:"path",path:[{command:"M",values:[c,i]},{command:"L",values:[c,r]},{command:"L",values:[a,r]},{command:"L",values:[a,i]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*a,cy:i,rx:o,ry:i}]}function tt(e,t){let a=t?S.tallSymbolWidth:e;const n=e,l=t?4:6;a<=S.size?a-=.5*l:a-=l;const o=.15*a,i=n-o;return[{type:"ellipse",cx:.5*a,cy:i,rx:.5*a,ry:o},{type:"path",path:[{command:"M",values:[.5*a,0]},{command:"L",values:[a,i]},{command:"L",values:[0,i]},{command:"Z",values:[]}]}]}function at(e){let t=e;const a=e,n=6;t<S.size?t-=.5*n:t-=n;const l=.15*t,o=0;return[{type:"path",path:[{command:"M",values:[0,o]},{command:"L",values:[t,o]},{command:"L",values:[.5*t,a-l]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:o,rx:.5*t,ry:l}]}function nt(e){let t=e;const a=e,n=4;t<S.size?t-=.5*n:t-=n;const l=0,o=0,i=t,c=a,r=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[i,.5*c-r]},{command:"L",values:[.45*i-r,.5*c+r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,l]},{command:"L",values:[.45*i-r,.5*c+r]},{command:"L",values:[o,.5*c-r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,.5*c-r]},{command:"L",values:[.45*i-r,.5*c+r]},{command:"L",values:[.45*i,a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*i,a]},{command:"L",values:[i,.5*c-r]},{command:"L",values:[.45*i-r,.5*c+r]},{command:"Z",values:[]}]}]}function lt(e){const t=e,a=2;let n=e;n<S.size?n-=.5*a:n-=a;const l=0,o=0;return[{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[t,n]},{command:"L",values:[.45*t,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,l]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[o,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[o,n]},{command:"L",values:[.45*t,.6*n]},{command:"L",values:[t,n]},{command:"Z",values:[]}]}]}function R(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function Kt(e,t){if(e==null)return new O;if("type"in e&&(e.type==="linear"||e.type==="pattern"))return e;const a=new O(e);return new O([R(a.r,t),R(a.g,t),R(a.b,t),a.a])}let ot=0;function it(){return ot++}let st=0;function rt(){return st++}let ct=0;function ut(){return ct++}const ht="http://www.w3.org/2000/svg",ie=Q("android"),mt=Q("chrome")||ie&&ie>=4?"auto":"optimizeLegibility",pt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ft=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let k={},x={};const dt=Math.PI;function A(e,t){const a=e*(dt/180);return Math.abs(t*Math.sin(a))+Math.abs(t*Math.cos(a))}function xe(e){return e.map(t=>`${t.command} ${t.values.join(" ")}`).join(" ").trim()}function we(e,t,a,n,l){if(e){if(e.type==="circle")return L("circle",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",r:e.r,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-dashoffset":a.dashOffset,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="ellipse")return L("ellipse",{cx:e.cx,cy:e.cy,fill:t,"fill-rule":"evenodd",rx:e.rx,ry:e.ry,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width});if(e.type==="rect")return L("rect",{fill:t,"fill-rule":"evenodd",height:e.height,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,width:e.width,x:e.x,y:e.y});if(e.type==="image")return L("image",{alt:l||"image",height:e.height,href:e.src,preserveAspectRatio:"none",width:e.width,x:e.x,y:e.y});if(e.type==="path"){const o=typeof e.path!="string"?xe(e.path):e.path;return L("path",{d:o,fill:t,"fill-rule":"evenodd",stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width})}if(e.type==="text")return K(n),L("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:a.color,"stroke-dasharray":a.dashArray,"stroke-linecap":a.cap,"stroke-linejoin":a.join,"stroke-miterlimit":"4","stroke-width":a.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":mt,x:e.x,y:e.y},e.text)}return null}function Le(e){if(!e)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in e))return{fill:new O(e).toString(),pattern:null,linearGradient:null};if(e.type==="pattern"){const a=`patternId-${it()}`;return{fill:`url(#${a})`,pattern:{id:a,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}},linearGradient:null}}const t=`linearGradientId-${rt()}`;return{fill:`url(#${t})`,pattern:null,linearGradient:{id:t,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(a=>({offset:a.offset,color:a.color&&new O(a.color).toString()}))}}}function ke(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return e&&(e.width!=null&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new O(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashoffset&&(t.dashOffset=e.dashoffset),e.style&&!e.dashArray&&(t.dashArray=Ve(e).join(",")||"none")),t}function Me(e,t){const a={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const n=e.alignBaseline,l=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;a.align=e.align,a.dominantBaseline=l,a.decoration=e.decoration,a.kerning=e.kerning?"auto":"0",a.rotate=e.rotated?"90":"0",K(t),a.font.style=t.style||"normal",a.font.variant=t.variant||"normal",a.font.weight=t.weight||"normal",a.font.size=t.size&&t.size.toString()||"10pt",a.font.family=t.family||"serif"}return a}function yt(e){const{pattern:t,linearGradient:a}=e;if(t)return L("pattern",{height:t.height,id:t.id,patternUnits:"userSpaceOnUse",width:t.width,x:t.x,y:t.y},L("image",{height:t.image.height,href:t.image.href,width:t.image.width,x:t.image.x,y:t.image.y}));if(a){const n=a.stops.map((l,o)=>L("stop",{key:`${o}-stop`,offset:l.offset,"stop-color":l.color}));return L("linearGradient",{gradientUnits:"userSpaceOnUse",id:a.id,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},n)}return null}function gt(e,t){if(!e||e.length===0)return null;const a=[];for(const n of e){const{shape:l,fill:o,stroke:i,font:c}=n,r=Le(o),u=ke(i),p=l.type==="text"?Me(l,c):null,d=we(l,r.fill,u,p);d&&a.push(d)}return L("mask",{id:t,maskUnits:"userSpaceOnUse"},L("g",null,a))}function se(e,t,a){return qe(e,ee(e),[t,a])}function re(e,t,a,n,l){return We(e,ee(e),[t,a]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*a-l*a+l,e}function vt(e,t,a,n){const l=t%360*Math.PI/180;He(e,ee(e),l);const o=Math.cos(l),i=Math.sin(l),c=e[4],r=e[5];return e[4]=c*o-r*i+n*i-a*o+a,e[5]=r*o+c*i-a*i-n*o+n,e}function z(e,t){k&&"left"in k?(k.left!=null&&k.left>e&&(k.left=e),(k.right==null||k.right<e)&&(k.right=e),(k.top==null||k.top>t)&&(k.top=t),(k.bottom==null||k.bottom<t)&&(k.bottom=t)):k={left:e,bottom:t,right:e,top:t}}function ce(e){const t=e.args,a=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<a;n+=2)z(t[n],t[n+1]);x.x=t[a-2],x.y=t[a-1];break;case"H":for(n=0;n<a;++n)z(t[n],x.y);x.x=t[a-1];break;case"V":for(n=0;n<a;++n)z(x.x,t[n]);x.y=t[a-1];break;case"m":{let l=0;for(("x"in x)||(z(x.x=t[0],x.y=t[1]),l=2),n=l;n<a;n+=2)z(x.x+=t[n],x.y+=t[n+1]);break}case"l":case"t":for(n=0;n<a;n+=2)z(x.x+=t[n],x.y+=t[n+1]);break;case"h":for(n=0;n<a;++n)z(x.x+=t[n],x.y);break;case"v":for(n=0;n<a;++n)z(x.x,x.y+=t[n]);break;case"c":for(n=0;n<a;n+=6)z(x.x+t[n],x.y+t[n+1]),z(x.x+t[n+2],x.y+t[n+3]),z(x.x+=t[n+4],x.y+=t[n+5]);break;case"s":case"q":for(n=0;n<a;n+=4)z(x.x+t[n],x.y+t[n+1]),z(x.x+=t[n+2],x.y+=t[n+3]);break;case"A":for(n=0;n<a;n+=7)z(t[n+5],t[n+6]);x.x=t[a-2],x.y=t[a-1];break;case"a":for(n=0;n<a;n+=7)z(x.x+=t[n+5],x.y+=t[n+6])}}function ue(e,t,a){const n=pt[e.toLowerCase()];let l;typeof n=="number"&&(n?t.length>=n&&(l={action:e,args:t.slice(0,t.length-t.length%n)},a.push(l),ce(l)):(l={action:e,args:[]},a.push(l),ce(l)))}function bt(e){const t=(typeof e.path!="string"?xe(e.path):e.path).match(ft),a=[];if(k={},x={},!t)return null;let n="",l=[];const o=t.length;for(let c=0;c<o;++c){const r=t[c],u=parseFloat(r);isNaN(u)?(n&&ue(n,l,a),l=[],n=r):l.push(u)}ue(n,l,a);const i={x:0,y:0,width:0,height:0};return k&&"left"in k&&(i.x=k.left,i.y=k.top,i.width=k.right-k.left,i.height=k.bottom-k.top),i}function xt(e){const t={x:0,y:0,width:0,height:0};if(e.type==="circle")t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if(e.type==="ellipse")t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if(e.type==="image"||e.type==="rect")t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if(e.type==="path"){const a=bt(e);t.x=a.x,t.y=a.y,t.width=a.width,t.height=a.height}return t}function wt(e){const t={x:0,y:0,width:0,height:0};let a=null,n=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const o of e)a?(a.x=Math.min(a.x,o.x),a.y=Math.min(a.y,o.y),n=Math.max(n,o.x+o.width),l=Math.max(l,o.y+o.height)):(a=t,a.x=o.x,a.y=o.y,n=o.x+o.width,l=o.y+o.height);return a&&(a.width=n-a.x,a.height=l-a.y),a}function Lt(e,t,a,n,l,o,i,c,r){let u=(i&&o?A(o,t):t)/2,p=(i&&o?A(o,a):a)/2;if(r){const g=r[0],m=r[1];u=(i&&o?A(o,g):g)/2,p=(i&&o?A(o,m):m)/2}const d=e.width+n,h=e.height+n,f=oe(),s=oe();let y=!1;if(l&&d!==0&&h!==0){const g=t!==a?t/a:d/h,m=t>a?t:a;let M=1,$=1;isNaN(m)||(g>1?(M=m/d,$=m/g/h):($=m/h,M=m*g/d)),V(s,s,re(f,M,$,u,p)),y=!0}const v=e.x+(d-n)/2,b=e.y+(h-n)/2;if(V(s,s,se(f,u-v,p-b)),!y&&(d>t||h>a)){const g=d/t>h/a,m=(g?t:a)/(g?d:h);V(s,s,re(f,m,m,v,b))}return c&&V(s,s,se(f,c[0],c[1])),o&&V(s,s,vt(f,o,v,b)),`matrix(${s[0]},${s[1]},${s[2]},${s[3]},${s[4]},${s[5]})`}function kt(e,t,a){const n=e?.effects.find(u=>u.type==="bloom");if(!n)return null;const{strength:l,radius:o}=n,i=l>0?o:0,c=(l+i)*t,r=4*l+1;return L("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${a}`,width:"300%",x:"-100%",y:"-100%"},L("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(l+.5*i)*(5**(t/100)*(.4+t/100)),result:"dilate"}),L("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:c/25}),L("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:c/50}),L("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},L("feFuncR",{slope:r,type:"linear"}),L("feFuncG",{slope:r,type:"linear"}),L("feFuncB",{slope:r,type:"linear"})),L("feMerge",null,L("feMergeNode",{in:"intensityBlur"}),L("feMergeNode",{in:"intensityBrightness"}),L("feGaussianBlur",{stdDeviation:l/10})))}function Mt(e,t,a,n={}){const l=[],o=[],i=ut(),c=kt(n.effectView,t,i);let r=null;if(c){const h=n.effectView?.effects.find(v=>v.type==="bloom"),f=n.clipBloomEffect||!h.strength?0:(h.strength+h.radius/2)/3,s=t+t*f,y=a+a*f;r=[Math.max(s,10),Math.max(y,10)]}let u=t,p=a;if(n.useRotationSize)for(let h=0;h<e.length;h++){const f=n.rotations?.[h]??0;u=Math.max(A(f,t),u),p=Math.max(A(f,a),p)}for(let h=0;h<e.length;h++){const f=e[h],s=[],y=[];let v=0,b=0,g=0;for(const _ of f){const{shape:C,fill:ze,stroke:ne,font:je,offset:B}=_;n.ignoreStrokeWidth||C.type==="text"||(v+=ne?.width||0);const le=Le(ze),_e=ke(ne),Ae=C.type==="text"?Me(C,je):null;l.push(yt(le)),s.push(we(C,le.fill,_e,Ae,n.ariaLabel)),y.push(xt(C)),B&&(b+=B[0],g+=B[1])}const m=n.rotations?.[h]??0;n.useRotationSize&&(b+=(u-A(m,t))/2,g+=(p-A(m,a))/2);const M=Lt(wt(y),t,a,v,n.scale??!1,m,n.useRotationSize??!1,[b,g],r);let $=null;if(n.masking){const _=`mask-${h}`,C=n.masking[h];l.push(gt(C,_)),$=`url(#${_})`}o.push($?L("g",{mask:$},L("g",{transform:M},s)):L("g",{transform:M},s))}return c&&(K(r),u=r[0],p=r[1]),L("svg",{"aria-label":n.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:u,xmlns:ht},c,L("defs",null,l),c?L("g",{filter:`url(#bloom${i})`},o):o)}const he=Be();function $t(e,t){he.append(e,t),he.detach(t)}function U(e,t,a){const n=Math.ceil(t[0]),l=Math.ceil(t[1]);if(!e.some(i=>!!i.length))return null;const o=a?.node||document.createElement("div");return a.opacity!=null&&(o.style.opacity=a.opacity.toString()),a.effectView!=null&&(o.style.filter=ge(a.effectView)),$t(o,()=>Mt(e,n,l,a)),o}function St(e,t){e=Math.ceil(e),t=Math.ceil(t);const a=document.createElement("canvas");a.width=e,a.height=t,a.style.width=e+"px",a.style.height=t+"px";const n=a.getContext("2d");return n.clearRect(0,0,e,t),n}function zt(e,t,a){return e?Ce(e,{responseType:"image"}).then(n=>{const l=n.data,o=l.width,i=l.height,c=o/i;let r=t;if(a){const u=Math.max(o,i);r=Math.min(r,u)}return{image:l,width:c<=1?Math.ceil(r*c):r,height:c<=1?r:Math.ceil(r/c)}}):Promise.reject(new H("renderUtils: imageDataSize","href not provided."))}function jt(e,t){return!(!e||t==="ignore")&&(t!=="multiply"||e.r!==255||e.g!==255||e.b!==255||e.a!==1)}function _t(e,t,a,n,l){switch(l){case"multiply":e[t]*=a[0],e[t+1]*=a[1],e[t+2]*=a[2],e[t+3]*=a[3];break;default:{const o=Y({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;const i=be(o);e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]*=a[3];break}}}function At(e,t,a,n,l){return zt(e,t,l).then(o=>{const i=o.width??t,c=o.height??t;if(o.image&&jt(a,n)){let r=o.image.width,u=o.image.height;Q("edge")&&/\.svg$/i.test(e)&&(r-=1,u-=1);const p=St(i,c);p.drawImage(o.image,0,0,r,u,0,0,i,c);const d=p.getImageData(0,0,i,c),h=[a.r/255,a.g/255,a.b/255,a.a],f=Y(a);for(let s=0;s<d.data.length;s+=4)_t(d.data,s,h,f,n);p.putImageData(d,0,0),e=p.canvas.toDataURL("image/png")}else{const r=Re?.findCredential(e);if(r?.token){const u=e.includes("?")?"&":"?";e=`${e}${u}token=${r.token}`}}return{url:e,width:i,height:c}}).catch(()=>({url:e,width:t,height:t}))}const Z=S.size,F=S.maxSize,te=S.maxOutlineSize,me=S.lineWidth,X=S.tallSymbolWidth;function E(e){const t=e.outline,a=e.material!=null?e.material.color:null,n=a!=null?a.toHex():null;if(t==null||"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"&&t.pattern.style==="none")return e.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const l=j(t.size)||0;return{color:"rgba("+(t.color!=null?t.color.toRgba():"255,255,255,1")+")",width:Math.min(l,te),style:"pattern"in t&&t.pattern!=null&&t.pattern.type==="style"?ve(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}async function Rt(e,t){if(e.thumbnail?.url)return e.thumbnail.url;if(t.type==="icon"&&t?.resource?.href)return Fe(t);const a=ye("esri/images/Legend/legend3dsymboldefault.png");if(e.styleOrigin&&(e.styleOrigin.styleName||e.styleOrigin.styleUrl)){const n=await Xe(e.styleOrigin,{portal:e.styleOrigin.portal}).catch(()=>null);if(n&&"thumbnail"in n&&n.thumbnail?.url)return n.thumbnail.url}return a}function q(e,t=1){const a=e.a,n=Y(e),l=n.h,o=n.s/t,i=100-(100-n.v)/t,{r:c,g:r,b:u}=be({h:l,s:o,v:i});return[c,r,u,a]}function G(e){return e.type==="water"?e.color==null?null:e.color:e.material?.color==null?null:e.material.color}function w(e,t=0){const a=G(e);if(!a){if(e.type==="fill")return null;const l=Pe.r,o=R(l,t);return[o,o,o,100]}const n=a.toRgba();for(let l=0;l<3;l++)n[l]=R(n[l],t);return n}async function $e(e,t){const a=e.style;return a==="none"?null:{type:"pattern",x:0,y:0,src:await Ie(ye(`esri/symbols/patterns/${a}.png`),t.toCss(!0)),width:5,height:5}}function pe(e){return e.outline?E(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function ae(e,t){const a=G(e);if(!a)return null;let n="rgba(";return n+=R(a.r,t)+",",n+=R(a.g,t)+",",n+=R(a.b,t)+",",n+a.a+");"}function J(e,t){const a=ae(e,t);return a?"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"&&e.pattern.style==="none"?null:{color:a,width:Math.min(e.size?j(e.size):.75,te),style:"pattern"in e&&e.pattern!=null&&e.pattern.type==="style"?ve(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?e.join==="miter"?j(2):e.join:null}:{}}function N(e,t,a){const n=a!=null?.75*a:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function Ct(e){const t=e.depth,a=e.height,n=e.width;return n!==0&&t!==0&&a!==0&&n===t&&n!=null&&a!=null&&n<a}function Zt(e,t,a){const n=[];if(!e)return n;switch(e.type){case"icon":{const i=t,c=t;switch(e.resource?.primitive??Ee){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:w(e,0),stroke:E(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[0,0]},{command:"L",values:[i,0]},{command:"L",values:[i,c]},{command:"Z",values:[]}]},fill:w(e,0),stroke:E(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,c]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,c]},{command:"Z",values:[]}]},fill:w(e,0),stroke:E(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[.5*i,c]},{command:"M",values:[0,.5*c]},{command:"L",values:[i,.5*c]}]},stroke:pe(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[i,c]},{command:"M",values:[i,0]},{command:"L",values:[0,c]}]},stroke:pe(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[.5*i,0]},{command:"L",values:[i,.5*c]},{command:"L",values:[.5*i,c]},{command:"Z",values:[]}]},fill:w(e,0),stroke:E(e)})}break}case"object":switch(e.resource?.primitive??De){case"cone":{const l=N(w(e,0),w(e,-.6),a?X:t),o=tt(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l});break}case"inverted-cone":{const l=w(e,0),o=N(l,w(e,-.6),t),i=at(t);n.push({shape:i[0],fill:o},{shape:i[1],fill:l});break}case"cube":{const l=Ye(t,a);n.push({shape:l[0],fill:w(e,0)},{shape:l[1],fill:w(e,-.3)},{shape:l[2],fill:w(e,-.5)});break}case"cylinder":{const l=N(w(e,0),w(e,-.6),a?X:t),o=et(t,a);n.push({shape:o[0],fill:l},{shape:o[1],fill:l},{shape:o[2],fill:w(e,0)});break}case"diamond":{const l=nt(t);n.push({shape:l[0],fill:w(e,-.3)},{shape:l[1],fill:w(e,0)},{shape:l[2],fill:w(e,-.3)},{shape:l[3],fill:w(e,-.7)});break}case"sphere":{const l=N(w(e,0),w(e,-.6));l.x1=0,l.y1=0,l.x2=.25*t,l.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:l});break}case"tetrahedron":{const l=lt(t);n.push({shape:l[0],fill:w(e,-.3)},{shape:l[1],fill:w(e,0)},{shape:l[2],fill:w(e,-.6)});break}}break}return n}function T(e){const t=typeof e?.size=="number"?e?.size:null;return t?j(t):null}function Dt(e){return e.type==="icon"?"multiply":"tint"}async function Et(e,t){const a=T(t),n=t?.maxSize?j(t.maxSize):null,l=t?.disableUpsampling??!1,o=e.symbolLayers,i=[],c=[];let r=!1,u=0,p=0,d=0;o.forEach(s=>{if(s.type!=="icon"&&s.type!=="object")return;s&&s.type==="icon"&&(d=Math.max(s.size&&j(s.size),d));const y=s.type==="icon"?s.size&&j(s.size):0,v=a||y?Math.ceil(Math.min(a||y,n||F)):Z;let b=s.type==="icon"?s.angle:null;if(t?.rotation!=null&&(b=(b??0)+t.rotation),c.push(b),s?.resource?.href){const g=Rt(e,s).then(m=>{const M=s?.material?.color,$=Dt(s);return At(m,v,M,$,l)}).then(m=>{const M=m.width,$=m.height;return u=Math.max(u,M),p=Math.max(p,$),b&&(r=!0),[{shape:{type:"image",x:0,y:0,width:M,height:$,src:m.url},fill:null,stroke:null}]});i.push(g)}else{let g=v;s.type==="icon"&&a&&(g=v*(y/d));const m=t?.symbolConfig==="tall"||t?.symbolConfig?.isTall||s.type==="object"&&Ct(s);u=Math.max(u,m?X:g),p=Math.max(p,g),b&&s.resource?.primitive&&["square","triangle","x"].includes(s.resource?.primitive)&&(r=!0),i.push(Promise.resolve(Zt(s,g,m)))}});const h=await Promise.allSettled(i),f=[];return h.forEach(s=>{s.status==="fulfilled"?f.push(s.value):s.reason&&Ze.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",s.reason)}),U(f,[u,p],{node:t?.node,scale:!1,opacity:t?.opacity,ariaLabel:t?.ariaLabel,rotations:c,useRotationSize:r})}function Ot(e,t){const a=e.symbolLayers,n=[],l=Ne(e),o=T(t),i=(t?.maxSize?j(t.maxSize):null)||te;let c,r=0,u=0;return a.forEach((p,d)=>{if(!p||p.type!=="line"&&p.type!=="path")return;const h=[];switch(p.type){case"line":{const f=J(p,0);if(f==null)break;const s=f?.width||0;d===0&&(c=s);const y=Math.min(o||s,i),v=d===0?y:o?y*(s/c):y,b=v>me/2?2*v:me;u=Math.max(u,v),r=Math.max(r,b),f.width=v,h.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[r,.5*u]}]},stroke:f});break}case"path":{const f=Math.min(o||Z,i),s=w(p,0),y=w(p,-.2),v=ae(p,-.4),b=v?{color:v,width:1}:{};if(p.profile==="quad"){const g=p.width,m=p.height,M=Je(g&&m?g/m:1,m===0,g===0),$={...b,join:"bevel"};h.push({shape:M[0],fill:y,stroke:$},{shape:M[1],fill:y,stroke:$},{shape:M[2],fill:s,stroke:$})}else h.push({shape:P.pathSymbol3DLayer[0],fill:y,stroke:b},{shape:P.pathSymbol3DLayer[1],fill:s,stroke:b});u=Math.max(u,f),r=u}}n.push(h)}),Promise.resolve(U(n,[r,u],{node:t?.node,scale:l,opacity:t?.opacity,ariaLabel:t?.ariaLabel}))}async function Vt(e,t){const a=e.type==="mesh-3d",n=e.symbolLayers,l=T(t),o=t?.maxSize?j(t.maxSize):null,i=l||Z,c=[];let r=0,u=0,p=!1;for(let d=0;d<n.length;d++){const h=n.at(d),f=[];if(!a||h.type==="fill"){switch(h.type){case"fill":{const s=Math.min(i,o||F);if(r=Math.max(r,s),u=Math.max(u,s),p=!0,a){const y=P.meshSymbol3DFill,v=ae(h,-.4),b=v?{color:v,width:1,join:"round"}:{};f.push({shape:y[0],fill:w(h,0),stroke:b},{shape:y[1],fill:w(h,-.2),stroke:b},{shape:y[2],fill:w(h,-.6),stroke:b})}else{let y=w(h,0);const v="pattern"in h?h.pattern:null,b=E(h),g=G(h);v!=null&&v.type==="style"&&v.style!=="solid"&&g&&(y=await $e(v,g)),f.push({shape:P.fill[0],fill:y,stroke:b})}break}case"line":{const s=J(h,0);if(s==null)break;const y={stroke:s,shape:P.fill[0]};r=Math.max(r,Z),u=Math.max(u,Z),f.push(y);break}case"extrude":{const s={join:"round",width:1,...J(h,-.4)},y=w(h,0),v=w(h,-.2),b=Math.min(i,o||F),g=Ke(b);s.width=1,f.push({shape:g[0],fill:v,stroke:s},{shape:g[1],fill:v,stroke:s},{shape:g[2],fill:y,stroke:s});const m=Z,M=.7*Z+.5*b;r=Math.max(r,m),u=Math.max(u,M);break}case"water":{const s=G(h),y=q(s),v=q(s,2),b=q(s,3),g=Qe();p=!0,f.push({shape:g[0],fill:y},{shape:g[1],fill:v},{shape:g[2],fill:b});const m=Math.min(i,o||F);r=Math.max(r,m),u=Math.max(u,m);break}}c.push(f)}}return U(c,[r,u],{node:t?.node,scale:p,opacity:t?.opacity,ariaLabel:t?.ariaLabel})}function It(e,t){if(e.symbolLayers.length===0)return Promise.reject(new H("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return Et(e,t);case"line-3d":return Ot(e,t);case"polygon-3d":case"mesh-3d":return Vt(e,t)}return Promise.reject(new H("symbolPreview: swatchInfo3D","symbol not supported."))}const Pt=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:$e,getSizeFromOptions:T,getSymbolLayerFill:w,previewSymbol3D:It},Symbol.toStringTag,{value:"Module"}));let D=null;const fe=[255,255,255];function de(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Qt(e,t,a){const{backgroundColor:n,outline:l,dotSize:o}=e,i=a?.swatchSize||S.size,c=.8,r=Math.round(i*i/Math.max(o,.5)**2*c),u=window.devicePixelRatio,p=document.createElement("canvas"),d=i*u;p.width=d,p.height=d,p.style.width=p.width/u+"px",p.style.height=p.height/u+"px";const h=p.getContext("2d");if(n&&(h.fillStyle=n.toCss(!0),h.fillRect(0,0,d,d),h.fill()),h.fillStyle=t?.toCss(!0)??"",D&&D.length/2===r)for(let s=0;s<2*r;s+=2){const y=D[s],v=D[s+1];h.fillRect(y,v,o*u,o*u),h.fill()}else{D=[];for(let s=0;s<2*r;s+=2){const y=de(0,d),v=de(0,d);D.push(y,v),h.fillRect(y,v,o*u,o*u),h.fill()}}l&&(l.color&&(h.strokeStyle=l.color.toCss(!0)),h.lineWidth=l.width,h.strokeRect(0,0,d,d));const f=new Image(i,i);return f.src=p.toDataURL(),f.ariaLabel=a?.ariaLabel??null,f.alt=a?.ariaLabel??"",f}function Yt(e,t={}){const a=t.radius||40,n=2*Math.PI*a,l=e.length,o=n/l,i=[],c=Te(t.outline);c?.width!=null&&(c.width*=2),(c||t.backgroundColor)&&i.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:c,offset:[0,0]});const r=t.values,u=r&&r.length===l&&r.reduce((s,y)=>s+y,0)===100,p=[0];for(let s=0;s<l;s++){let y=null;u&&(y=r[s]*n/100,p.push(y+p[s])),i.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(y??o)/2} ${n}`,dashoffset:"-"+(u?p[s]/2:s*(o/2)),color:e[s]},offset:[0,0]})}let d=null;const h=2*a+(c?.width||0),f=t.holePercentage;if(f){c&&i.push({shape:{type:"circle",cx:a,cy:a,r:a*f},fill:null,stroke:c,offset:[0,0]});const s=h/2;d=[[{shape:{type:"circle",cx:s,cy:s,r:s},fill:fe,stroke:c?{...c,color:fe}:null,offset:[0,0]},{shape:{type:"circle",cx:s,cy:s,r:a*f},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return U([i],[h,h],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:d,rotations:[-90],ariaLabel:t.ariaLabel})}function ea(e,t={}){const l=t.align==="horizontal",o=l?75:24,i=l?24:75,c=t.width??o,r=t.height??i,u=t.gradient??!0,p=window.devicePixelRatio,d=c*p,h=r*p,f=document.createElement("canvas");f.width=d,f.height=h,f.ariaLabel=t.ariaLabel??null,f.style.width=`${c}px`,f.style.height=`${r}px`;const s=f.getContext("2d"),y=l?d:0,v=l?0:h;if(u){const g=s.createLinearGradient(0,0,y,v),m=e.length,M=m===1?0:1/(m-1);e.forEach(($,_)=>g.addColorStop(_*M,$.toString())),s.fillStyle=g,s.fillRect(0,0,d,h)}else{const g=l?d/e.length:d,m=l?h:h/e.length;let M=0,$=0;for(const _ of e)s.fillStyle=_.toString(),s.fillRect(M,$,g,m),M=l?M+g:0,$=l?0:$+m}const b=document.createElement("div");return b.style.width=`${c}px`,b.style.height=`${r}px`,Nt(b,t?.effectList),b.appendChild(f),b}function Nt(e,t){if(!t)return;e.style.filter=ge(t);const a=t.effects;if(a){for(const n of a)if(n?.type==="drop-shadow"){n.offsetX<0?e.style.marginLeft=`${Math.abs(n.offsetX)}px`:e.style.marginRight=`${n.offsetX}px`;break}}}async function Ft(e,t){switch(e.type){case"web-style":{const{previewWebStyleSymbol:a}=await I(()=>import("./previewWebStyleSymbol-DKkAyrVA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]),import.meta.url);return a(e,Ft,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:a}=await I(()=>Promise.resolve().then(()=>Pt),void 0,import.meta.url);return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:a}=await I(()=>import("./previewSymbol2D-DMzZYlTM.js"),__vite__mapDeps([29,1,2,3,20,21,13,22,30,31,7,8,9,10,11,12,14,15,16,17,18,19,23,24,25,26,27,28,4,5,6]),import.meta.url);return a(e,t)}case"cim":{const{previewCIMSymbol:a}=await I(()=>import("./previewCIMSymbol-B2yyYPpq.js"),__vite__mapDeps([32,1,2,3,33,34,30,35,36,37,17,15,16,38,39,40,28,13,27,41,42,43,44,45,46,47,48,20,21,22,49,50,51,52,53,54,55,31,7,8,9,10,11,12,14,18,19,23,24,25,26,4,5,6]),import.meta.url);return a(e,t)}default:return}}function Se(e){return e&&"opacity"in e?e.opacity*Se(e.parent):1}async function ta(e,t){if(!e)return;const a=e.sourceLayer,n=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=t?.ignoreOpacity?1:Se(n);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){const m=e.symbol.type==="web-style"?await e.symbol.fetchSymbol({...t,acceptedFormats:t?.webStyleAcceptedFormats,cache:t?.webStyleCache}):e.symbol.clone();return W(m,null,l),m}const o=t?.renderer??Gt(n);let i=o&&"getSymbolAsync"in o?await o.getSymbolAsync(e,t):null;if(!i)return;if(i=i.type==="web-style"?await i.fetchSymbol({...t,acceptedFormats:t?.webStyleAcceptedFormats,cache:t?.webStyleCache}):i.clone(),!o||!("visualVariables"in o)||!o.visualVariables?.length)return W(i,null,l),i;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&t?.arcade==null){const m={...t};m.arcade=await Oe(),t=m}const{getColor:c,getOpacity:r,getAllSizes:u,getRotationAngle:p}=await I(()=>import("./visualVariableUtils-Q9XaDxnO.js").then(m=>m.b),__vite__mapDeps([56,1,2,3,57]),import.meta.url),d=[],h=[],f=[],s=[];for(const m of o.visualVariables)switch(m.type){case"color":d.push(m);break;case"opacity":h.push(m);break;case"rotation":s.push(m);break;case"size":m.target||f.push(m)}const y=!!d.length&&d[d.length-1],v=y?c(y,e,t):null,b=!!h.length&&h[h.length-1];let g=b?r(b,e,t):null;if(l!=null&&(g=g!=null?g*l:l),t?.ignoreOpacity&&(g=1),v!=null&&b&&g!=null&&(v.a=1),W(i,v,g),f.length&&t?.ignoreSizeVariables!==!0){const m=u(f,e,t);await Ge(i,m)}if(t?.ignoreRotationVariables!==!0)for(const m of s)Ue(i,p(m,e,t),m.axis);return i}function Gt(e){if(e)return"renderer"in e?e.renderer:void 0}export{yt as A,xt as E,Lt as L,we as M,ke as S,wt as T,Mt as V,w as Z,ea as a,Kt as d,P as e,Qt as g,Ft as k,U as l,S as t,Le as v,Yt as w,ta as x};
