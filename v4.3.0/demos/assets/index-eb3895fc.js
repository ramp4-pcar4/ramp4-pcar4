import{bZ as pe,le as U,c3 as W,lf as he,c4 as Y,c5 as X,b$ as ge,fl as ve,fp as T,c6 as b,hT as ye,gN as re,fr as se,gM as O,fs as ie,c7 as ae,c8 as J,c9 as i,ca as Q,cb as q,cc as B,cd as f,ce as v,ch as l,fo as y,ci as le,cj as oe,cg as Z,hH as C,cf as de,lg as fe,lh as _e,li as be,k7 as xe,hY as we,lj as $e,gG as ee,gH as ke}from"./main-46bfe858.js";import{H as Le}from"./hilight-defs-1101779f.js";import{T as ue}from"./toggle-switch-control-56f9e398.js";import"./preload-helper-388ac9d5.js";class Ae{id;name;template;componentId;constructor(e){const s={...typeof e=="string"?{id:e,template:"",name:""}:e};({template:this.template,id:this.id,name:this.name}=s)}}const te="details";class Te extends pe{detailsStore=U(this.$vApp.$pinia);get config(){return super.config}openDetails(e){this.detailsStore.payload=e,this.$iApi.panel.get("details-layers").isOpen||this.$iApi.panel.open({id:"details-layers"})}toggleFeature(e,s){const t=this.$iApi.panel.get("details-layers");t.isOpen&&this.$iApi.panel.close(t);const u=this.$iApi.panel.get("details-items"),n={result:{items:[{data:e.data,format:e.format,loaded:!0,loading:Promise.resolve()}],uid:e.uid,loading:Promise.resolve(),loaded:!0}},p=this.$iApi.geo.layer.getLayer(e.uid),k=this.detailsStore.currentFeatureId,d=`${e.uid}-${p?.supportsFeatures?e.data[p?.oidField??""]:JSON.stringify(e.data)}`;this.detailsStore.currentFeatureId=e.data?d:void 0,s===!1?this.$iApi.panel.close(u):u.isOpen?k!==d||s===!0?u.show({screen:"item-screen",props:n}):this.$iApi.panel.close(u):this.$iApi.panel.open({id:"details-items",screen:"item-screen",props:n})}_parseConfig(e){e&&e.templates&&(this.detailsStore.defaultTemplates=e.templates),this.handlePanelWidths(["details-items","details-layers"]),this.handlePanelTeleports(["details-items","details-layers"]);const s=this.getLayerFixtureConfigs(),t=[];Object.keys(s).forEach(n=>{t.push({id:n,name:s[n].name,template:s[n].template})});const u=t.map(n=>new Ae(n));this.detailsStore.properties=u.reduce((n,p)=>(n[p.id]=p,n),{}),this._validateItems()}_validateItems(){Object.values(this.detailsStore.properties).forEach(e=>{e.template in this.$vApp.$options.components&&(this.detailsStore.properties[e.id].componentId=e.template)})}async hilightDetailsItems(e,s){const t=e instanceof Array?e:[e],u=this.$iApi.fixture.get("hilight");if(u){const n=await u.getGraphicsByKey(te);await u.removeHilight(n);const p=Date.now();this.detailsStore.lastHilight=p;const k=await this.getHilightGraphics(t,s);this.detailsStore.lastHilight===p&&await u.addHilight(k)}}async removeDetailsHilight(){const e=this.$iApi.fixture.get("hilight");if(e){this.detailsStore.lastHilight=Date.now();const s=await e.getGraphicsByKey(te);await e.removeHilight(s)}}async reloadDetailsHilight(e,s){const t=e instanceof Array?e:[e],u=this.$iApi.fixture.get("hilight");if(u){const n=await this.getHilightGraphics(t,s);u.reloadHilight(n)}}async getHilightGraphics(e,s){const t=this.$iApi.geo.layer.getLayer(s),u=this.$iApi.fixture.get("hilight"),n=[];return t&&await Promise.all(e.map(async p=>{const k=p.data[t.oidField],d=await t.getGraphic(k,{getGeom:!0,getAttribs:!0,getStyle:!0});d.id=u.constructGraphicKey(te,s,k),n.push(d)})),n}onHilightToggle(e,s,t){e?(this.hilightDetailsItems(s,t),this.detailsStore.hilightToggle=!0):(this.removeDetailsHilight(),this.detailsStore.hilightToggle=!1)}hasHilighter(){const e=this.$iApi.fixture.get("hilight");return e&&e.hilightMode.mode!==Le.NONE}}const Ie={key:0},He={class:"p-5"},ze=["onClick","disabled"],Se=y("div",{class:"flex-auto"},null,-1),De={key:0,class:"px-5"},Me={key:1,class:"px-5"},Fe={key:2,class:"animate-spin spinner h-20 w-20 px-5"},Ee={key:1,class:"flex justify-center py-10 items-center"},Ne=y("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Ce={key:2},Ge=W({__name:"layers-screen",props:{panel:he},setup(_){const{t:e}=Y(),s=X("iApi"),t=ge(),u=ve(),n=U(),p=T([]),k=T(""),d=T([]),c=T([]),r=b(()=>n.activeGreedy),M=b(()=>n.slowLoadingFlag),x=b(()=>n.payload),L=b(()=>n.properties),E=b(()=>u.mobileView),V=b(()=>u.getRemainingWidth),G=b(()=>p.value.map(o=>o.items.length).reduce((o,h)=>o+h,0)),S=o=>{if(o===void 0)return;const h=s.panel.get("details-items"),g=h?.width||350,w=!h||E.value||V.value<g&&!h.isOpen||o.length===0?0:o[0].requestTime;n.activeGreedy=w,n.slowLoadingFlag=!1,p.value=o,m(o),$(o)},$=o=>{const h=s.panel.get("details-items");if(k.value&&h?.isOpen){const g=p.value.findIndex(w=>w.uid===k.value);if(g!==-1){const w=p.value[g];w.loading.then(()=>{w.requestTime===r.value&&(w.items.length>0?(n.activeGreedy=0,I(g)):F(o))})}else F(o)}else F(o);setTimeout(()=>{r.value!==0&&o[0].requestTime===r.value&&(n.slowLoadingFlag=!0)},500)},F=o=>{const h=o.map(w=>w.loading.then(()=>w.items.length>0?Promise.resolve(w):Promise.reject())),g=o.length===0?0:o[0].requestTime;Promise.any(h).then(w=>{if(w.requestTime!==r.value)return;const A=p.value.findIndex(H=>H.uid===w.uid);n.activeGreedy=0,A!==-1&&I(A)}).catch(()=>{g===r.value&&(k.value="",n.activeGreedy=0,D())})},m=o=>{Promise.all(o.map(h=>h.loading)).then(()=>{s.updateAlert(s.$i18n.t("details.layers.found",{numResults:G.value,numLayers:o.length}))})},D=()=>{s.panel.close("details-items")},I=o=>{if(x.value[o].items.length>0){n.activeGreedy=0;let h=s.panel.get("details-items");if(!h)return;let g={result:x.value[o]};k.value=x.value[o].uid,h.isOpen?h.show({screen:"item-screen",props:g}):s.panel.open({id:"details-items",screen:"item-screen",props:g})}},N=o=>{const h=x.value[o];let g=t.getLayerByUid(h.uid);return g&&L.value[g.id]&&L.value[g.id].name?L.value[g.id].name:g?.name??""};return ye(()=>{c.value.push(re(x,o=>{S(o)},{deep:!1,immediate:!0}))}),se(()=>{d.value.push(s.event.on(O.PANEL_CLOSED,o=>{(o.id==="details-items"||o.id==="details-layers")&&(n.activeGreedy=0)})),c.value.push(re(r,o=>{o===0&&(n.slowLoadingFlag=!1)}))}),ie(()=>{d.value.forEach(o=>s.event.off(o)),c.value.forEach(o=>o())}),(o,h)=>{const g=ae("panel-screen"),w=J("truncate");return i(),Q(g,{panel:_.panel},{header:q(()=>[B(f(v(e)("details.layers.title")),1)]),content:q(()=>[r.value===0?(i(),l("div",Ie,[y("div",He,f(v(e)("details.layers.found",{numResults:G.value,numLayers:x.value.length})),1),(i(!0),l(le,null,oe(p.value,(A,H)=>(i(),l("button",{type:"button",class:"w-full px-20 py-10 text-md flex hover:bg-gray-200 cursor-pointer disabled:cursor-default",key:A.uid,onClick:P=>A.loaded&&I(H),disabled:!(A.loaded&&A.items.length>0)},[Z((i(),l("div",null,[B(f(N(H)||v(e)("details.layers.loading")),1)])),[[w]]),Se,A.loaded?(i(),l("div",De,f(A.items.length),1)):A.errored?(i(),l("div",Me,f(v(e)("details.layers.error")),1)):(i(),l("div",Fe))],8,ze))),128))])):M.value?(i(),l("div",Ee,[Ne,B(" "+f(v(e)("details.item.loading")),1)])):(i(),l("div",Ce))]),_:1},8,["panel"])}}}),je={key:0},Oe={key:0},Be={key:0},Pe={key:0,class:"flex justify-between py-8 px-8 mb-8 bg-gray-100"},Re={class:"p-8 font-bold break-words"},Ze={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},qe=["innerHTML"],Ve={key:1,class:"flex-initial py-5 px-10"},Ke={key:2,class:"animate-spin spinner h-20 w-20 px-5"},Ue={key:1},We={key:1,class:"p-5"},Ye={key:1,class:"flex justify-center py-10 items-center"},Je=y("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Qe={key:2},Xe=W({__name:"result-screen",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},previousItemIndex:{type:Number,default:-1}},setup(_){const e=_,{t:s}=Y(),t=X("iApi"),u=U(),n=b(()=>u.properties),p=b(()=>u.activeGreedy),k=b(()=>u.slowLoadingFlag),d=b(()=>t.geo.layer.getLayer(e.result.uid)?.nameField),c=b(()=>{const m=t.geo.layer.getLayer(e.result.uid);return m&&n.value[m.id]&&n.value[m.id].name?n.value[m.id].name:m?.name??""}),r=T([]),M=T(!1),x=T([]),L=T(t.fixture.get("details")),E=T(!0);se(()=>{M.value=t.geo.layer.getLayer(e.result.uid)!==void 0,E.value=u.hilightToggle??E.value,E.value&&L.value.hilightDetailsItems(e.result.items,e.result.uid),t.updateAlert(t.$i18n.t("details.item.alert.show.list",{layerName:c.value})),x.value.push(t.event.on(O.LAYER_REMOVE,m=>{e.result.uid===m.uid&&e.panel.close()})),x.value.push(t.event.on(O.PANEL_CLOSED,m=>{m.id=="details-items"&&V()})),x.value.push(t.event.on(O.PANEL_MINIMIZED,m=>{m.id=="details-items"&&G()})),x.value.push(t.event.on(O.MAP_BASEMAPCHANGE,()=>{E.value&&L.value.reloadDetailsHilight(e.result.items,e.result.uid)}))}),ie(()=>{x.value.forEach(m=>t.event.off(m))});const V=()=>{L.value.removeDetailsHilight(),u.hilightToggle=!0},G=()=>{L.value.removeDetailsHilight()},S=m=>{e.panel.show({screen:"item-screen",props:{result:e.result,itemIndex:m}})},$=(m,D)=>{const I=t.geo.layer.getLayer(e.result.uid);if(I===void 0){console.warn(`could not find layer for uid ${e.result.uid} during icon lookup`);return}const N=I.oidField;return I.getIcon(m[N]).then(o=>{r.value[D]!==o&&(r.value[D]=o)}),r.value[D]},F=m=>{E.value=m,L.value.onHilightToggle(m,e.result.items,e.result.uid)};return(m,D)=>{const I=ae("panel-screen"),N=J("truncate"),o=J("focus-item");return i(),Q(I,{panel:_.panel},{header:q(()=>[B(f(v(s)("details.items.title")),1)]),content:q(()=>[_.result.loaded&&p.value===0?(i(),l("div",je,[M.value?(i(),l("div",Oe,[_.result.items.length>0?(i(),l("div",Be,[M.value?(i(),l("div",Pe,[y("div",Re,f(c.value),1)])):C("",!0),L.value.hasHilighter()?(i(),l("div",Ze,[y("div",null,f(v(s)("details.togglehilight.title")),1),de(ue,{config:{value:E.value,disabled:!1},onToggled:F},null,8,["config"])])):C("",!0),(i(!0),l(le,null,oe(_.result.items,(h,g,w,A)=>{const H=[r.value[g]];if(A&&A.key===g&&fe(A,H))return A;const P=Z((i(),l("button",{type:"button",class:"w-full flex px-16 py-10 text-md hover:bg-gray-200 cursor-pointer",key:g,onClick:ne=>h.loaded&&S(g),disabled:!h.loaded},[h.loaded?(i(),l("span",{key:0,innerHTML:$(h.data,g),class:"flex-none symbologyIcon"},null,8,qe)):C("",!0),h.loaded?Z((i(),l("span",Ve,[B(f(d.value?h.data[d.value]:v(s)("details.result.default.name",[g+1])),1)])),[[N]]):C("",!0),h.loaded?C("",!0):(i(),l("span",Ke))],8,["onClick","disabled"])),[[o],[N]]);return P.memo=H,P},D,0),128))])):(i(),l("div",Ue,f(v(s)("details.layers.results.empty")),1))])):(i(),l("div",We,f(v(s)("details.item.no.data")),1))])):k.value?(i(),l("div",Ye,[Je,B(" "+f(v(s)("details.item.loading")),1)])):(i(),l("div",Qe))]),_:1},8,["panel"])}}}),et={class:"inline font-bold"},tt=y("span",{class:"flex-auto"},null,-1),st=["innerHTML"],it=W({__name:"esri-default",props:{fields:{type:Object,required:!0},identifyData:{type:Object,required:!0}},setup(_){const e=_,{t:s}=Y(),t=X("iApi"),u=()=>{const d={};Object.assign(d,e.identifyData.data),t?.ui.exposeOids||delete d[e.fields.find(r=>r.type==="oid").name],d.Symbol!==void 0&&delete d.Symbol;let c={};return e.fields.forEach(r=>{c[r.name]={name:r.alias||r.name,type:r.type}}),Object.keys(d).map(r=>{d[r]={value:typeof d[r]=="number"?t?.$i18n.n(d[r],"number"):d[r],alias:c[r].name||r,type:c[r].type}}),d},n=(d,c,r)=>{switch(r){case"date":return k(d);default:return p(d,c)}},p=(d,c)=>{if(!d)return d;if(d.trim().match(/\.(jpeg|jpg|gif|png)$/)||d.trim().match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i))return`<img src="${d}" alt="${s("details.item.alert.defaultAltText",{alias:c})}" />`;const r="underline text-blue-600 break-all",M=document.createElement("div");return M.innerHTML=d.trim(),M.firstElementChild?.tagName=="A"?(M.firstElementChild.className=r,M.innerHTML):_e(d,{className:r,target:"_blank",validate:{url:L=>/^https?:\/\//.test(L)}})},k=d=>{const c=parseInt(d);return isNaN(c)?d:new Date(c).toISOString().split("T")[0]};return(d,c)=>(i(),l("div",null,[(i(!0),l(le,null,oe(u(),(r,M,x)=>(i(),l("div",{class:"p-5 pl-3 flex justify-end flex-wrap even:bg-gray-300",key:x},[y("span",et,f(r.alias),1),tt,y("span",{class:"inline",innerHTML:n(r.value,r.alias,r.type)},null,8,st)]))),128))]))}}),at=["innerHTML"],lt={key:1},ot=W({__name:"html-default",props:{identifyData:{type:Object,required:!0}},setup(_){const{t:e}=Y();return(s,t)=>_.identifyData?(i(),l("div",{key:0,class:"whitespace-pre-wrap break-words h-full overflow-auto",innerHTML:_.identifyData.data.data??_.identifyData.data},null,8,at)):(i(),l("div",lt,f(v(e)("details.layers.results.empty")),1))}}),nt={key:0},rt={key:0,class:"p-8 font-bold break-words mb-8 bg-gray-100"},dt={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},ut={key:2,class:"flex flex-col justify-between p-8 mb-8 bg-gray-100"},ct={class:"flex justify-between"},mt=["aria-label"],pt={class:"flex bg-gray-200 py-8 items-center"},ht=["content","aria-label","disabled"],gt=y("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[y("g",null,[y("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),vt=[gt],yt={class:"px-8"},ft=["content","aria-label","disabled"],_t=y("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[y("g",null,[y("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),bt=[_t],xt={key:3},wt={key:0},$t={key:0,class:"flex py-8 items-center"},kt=["innerHTML"],Lt={key:1},At=y("div",{class:"animate-spin spinner h-20 w-20"},null,-1),Tt=[At],It={class:"flex-grow my-auto text-lg px-8"},Ht=["content","aria-label"],zt={key:0,class:"m-auto animate-spin spinner h-20 w-20"},St={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"green",class:"m-auto w-20 h-20"},Dt=y("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1),Mt=[Dt],Ft={key:2,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"red",class:"m-auto w-20 h-20"},Et=y("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),Nt=[Et],Ct=["innerHTML"],Gt={key:1,class:"flex justify-center py-10 items-center"},jt=y("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Ot={key:4,class:"p-5"},Bt={key:1,class:"flex justify-center py-10 items-center"},Pt=y("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Rt={key:2},Zt=W({__name:"item-screen",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},itemIndex:{type:Number,default:0}},setup(_){const e=_,{t:s}=Y(),t=X("iApi"),u=U(),n=b(()=>u.defaultTemplates),p=b(()=>u.properties),k=b(()=>u.activeGreedy),d=b(()=>u.slowLoadingFlag),c=b(()=>e.result.items[$.value]),r=b(()=>{const z=t.geo.layer.getLayer(e.result.uid)?.nameField;return z&&c.value.loaded?c.value.data[z]:t.$i18n.t("details.items.title")}),M=b(()=>{const a=t.geo.layer.getLayer(e.result.uid);return a&&p.value[a.id]&&p.value[a.id].name?p.value[a.id].name:a?.name??""}),x=b(()=>t.geo.layer.getLayer(e.result.uid)?.supportsFeatures??!1),L=b(()=>t.geo.layer.getLayer(e.result.uid)?.mapLayer??!1),E=b(()=>x.value?t.geo.layer.getLayer(e.result.uid)?.fields||[]:[]),V=b(()=>{const a=t.geo.layer.getLayer(e.result.uid);return a&&p.value[a.id]&&p.value[a.id].template?p.value[a.id].template:n.value&&n.value[c.value.format]?n.value[c.value.format]:x.value?it:ot}),G=T(""),S=T("none"),$=T(0),F=T(!1),m=T([]),D=T(t.fixture.get("details")),I=T(!0),N=T(),o=()=>{D.value.removeDetailsHilight(),u.hilightToggle=!0},h=()=>{D.value.removeDetailsHilight()},g=()=>{$.value=e.itemIndex??0,F.value=!0,I.value=u.hilightToggle??I.value,w()},w=()=>{if(H("none"),c.value.loaded)t.geo.layer.getLayer(e.result.uid)||(F.value=!1),ne(),t.updateAlert(`${t.$i18n.t("details.item.alert.show.item",{itemName:r.value})} ${e.result.items.length>1?t.$i18n.t("details.item.count",[$.value+1,e.result.items.length]):""}`),I.value&&x.value&&L.value?D.value.hilightDetailsItems(e.result.items[$.value],e.result.uid):(!x.value||!L.value)&&D.value.removeDetailsHilight();else{const a=$.value;c.value.loading.then(()=>{a===$.value&&w()})}},A=()=>{e.panel.show({screen:"results-screen",props:{result:e.result,previousItemIndex:$.value}})},H=a=>{a==="zoomed"||a==="error"?setTimeout(()=>{S.value=a,N.value?._tippy.show(),setTimeout(()=>{N.value?._tippy.hide(),S.value="none"},3e3)},300):S.value=a},P=a=>{$.value+=a,w()},ne=()=>{if(G.value="",!(c.value&&c.value.loaded))return;const a=t.geo.layer.getLayer(e.result.uid);if(a===void 0){console.warn(`could not find layer for uid ${e.result.uid} during icon lookup`);return}if(a.supportsFeatures){const z=a.oidField;let R=$.value;a.getIcon(c.value.data[z]).then(j=>{$.value===R&&(G.value=j)})}},ce=()=>{if(S.value!=="none")return;H("zooming");const a=t.geo.layer.getLayer(e.result.uid);if(a===void 0||!a.isLoaded){console.warn(`Could not find layer for uid ${e.result.uid} during zoom geometry lookup`),H("error");return}if(!c.value.loaded){console.warn("Details zoomToFeature call on item that is still loading. Should be impossible, alert the devs."),H("error");return}const z=c.value.data[a.oidField],R=()=>{const j={getGeom:!0};a.getGraphic(z,j).then(K=>{K.geometry.invalid()?(console.error(`Could not find graphic for objectid ${z}`),H("error")):(t.geo.map.zoomMapTo(K.geometry),H("zoomed"),t.updateAlert(t.$i18n.t("details.item.alert.zoom")))}).catch(()=>{H("error")})};a.layerType===we.FEATURE&&a.geomType!==$e.POINT?a.getGraphicExtent(z).then(j=>{t.geo.map.zoomMapTo(j),H("zoomed"),t.updateAlert(t.$i18n.t("details.item.alert.zoom"))}).catch(()=>{R()}):R()},me=a=>{I.value=a,D.value.onHilightToggle(a,e.result.items[$.value],e.result.uid)};return se(()=>{g(),m.value.push(t.event.on(O.LAYER_REMOVE,a=>{e.result.uid===a.uid&&e.panel.close()})),m.value.push(t.event.on(O.PANEL_CLOSED,a=>{a.id=="details-items"&&o()})),m.value.push(t.event.on(O.PANEL_MINIMIZED,a=>{a.id=="details-items"&&h()})),m.value.push(t.event.on(O.MAP_BASEMAPCHANGE,()=>{I.value&&D.value.reloadDetailsHilight(e.result.items[$.value],e.result.uid)}))}),ie(()=>{m.value.forEach(a=>t.event.off(a))}),be(()=>{g()}),(a,z)=>{const R=ae("panel-screen"),j=J("tippy");return i(),Q(R,{panel:_.panel},{header:q(()=>[B(f(v(s)("details.items.title")),1)]),content:q(()=>[_.result.loaded&&k.value===0?(i(),l("div",nt,[F.value?(i(),l("div",rt,f(M.value),1)):C("",!0),D.value.hasHilighter()&&x.value&&L.value?(i(),l("div",dt,[y("div",null,f(v(s)("details.togglehilight.title")),1),de(ue,{config:{value:I.value,disabled:!1},onToggled:me},null,8,["config"])])):C("",!0),F.value&&_.result.items.length>1?(i(),l("div",ut,[y("div",ct,[y("button",{type:"button",class:"px-8 font-bold hover:bg-gray-200 focus:bg-gray-200","aria-label":v(s)("details.item.see.list"),onClick:A},f(v(s)("details.item.see.list")),9,mt),y("div",pt,[Z((i(),l("button",{type:"button",content:v(s)("details.item.previous.item"),onClick:z[0]||(z[0]=K=>P(-1)),class:"mx-2 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":v(s)("details.item.previous.item"),disabled:$.value===0},vt,8,ht)),[[j,{placement:"top"}]]),y("span",yt,f(v(s)("details.item.count",[$.value+1,_.result.items.length])),1),Z((i(),l("button",{type:"button",content:v(s)("details.item.next.item"),onClick:z[1]||(z[1]=K=>P(1)),class:"mx-2 rotate-180 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":v(s)("details.item.next.item"),disabled:$.value===_.result.items.length-1},bt,8,ft)),[[j,{placement:"top"}]])])])])):C("",!0),F.value?(i(),l("div",xt,[c.value.loaded?(i(),l("div",wt,[x.value?(i(),l("div",$t,[G.value?(i(),l("span",{key:0,class:"flex-none symbologyIcon",innerHTML:G.value},null,8,kt)):(i(),l("div",Lt,Tt)),y("span",It,f(r.value),1),L.value?Z((i(),l("button",{key:2,type:"button",content:v(s)(`details.item.zoom${S.value==="none"?"":`.${S.value}`}`),"aria-label":v(s)(`grid.cells.zoom${S.value==="none"?"":`.${S.value}`}`),ref_key:"button",ref:N,onClick:z[2]||(z[2]=K=>ce()),class:"text-gray-600 m-8 w-24 h-24 p-2"},[S.value==="zooming"?(i(),l("div",zt)):S.value==="zoomed"?(i(),l("svg",St,Mt)):S.value==="error"?(i(),l("svg",Ft,Nt)):(i(),l("span",{key:3,innerHTML:v(t).ui.getZoomIcon()},null,8,Ct))],8,Ht)),[[j,{placement:"bottom"}]]):C("",!0)])):C("",!0),(i(),Q(xe(V.value),{identifyData:c.value,fields:E.value},null,8,["identifyData","fields"]))])):(i(),l("div",Gt,[jt,B(" "+f(v(s)("details.item.loading")),1)]))])):(i(),l("div",Ot,f(v(s)("details.item.no.data")),1))])):d.value?(i(),l("div",Bt,[Pt,B(" "+f(v(s)("details.item.loading")),1)])):(i(),l("div",Rt))]),_:1},8,["panel"])}}});const qt={en:{"details.layers.title":"Identified Layers","details.layers.found":"Found {numResults} results in {numLayers} layers","details.layers.loading":"The layer is loading...","details.layers.error":"Error","details.layers.results.empty":"No results found for the selected layer.","details.result.default.name":"Identify Item {0}","details.items.title":"Details","details.item.see.list":"See List","details.item.zoom":"Zoom to feature","details.item.zoom.zooming":"Zooming...","details.item.zoom.error":"Zoom failed","details.item.zoom.zoomed":"Zoomed","details.item.previous.item":"Previous item","details.item.next.item":"Next item","details.item.count":"{0} of {1}","details.item.loading":"Loading results...","details.item.no.data":"No data to show because the layer has been removed","details.item.alert.zoom":"Zoomed into feature","details.item.alert.show.item":"Showing result {itemName}","details.item.alert.show.list":"Showing all results for {layerName}","details.item.alert.defaultAltText":"Image associated with {alias} field","details.togglehilight.title":"Toggle Highlight"},fr:{"details.layers.title":"Couches désignées","details.layers.found":"{numResults} résultats trouvés dans {numLayers} couches","details.layers.loading":"La couche est en cours de chargement...","details.layers.error":"Erreur","details.layers.results.empty":"Aucun résultat trouvé pour la couche sélectionnée.","details.result.default.name":"Désigner l'élément {0}","details.items.title":"Détails","details.item.see.list":"Voir la liste","details.item.zoom":"Zoom à l'élément","details.item.zoom.zooming":"Zoom...","details.item.zoom.error":"Échec du zoom","details.item.zoom.zoomed":"Zoomé","details.item.previous.item":"Élément précédent","details.item.next.item":"Élément suivant","details.item.count":"{0} de {1}","details.item.loading":"Chargement des résultats...","details.item.no.data":"Aucune donnée à afficher","details.item.alert.zoom":"Zoom sur la caractéristique","details.item.alert.show.item":"Affichage du résultat {itemName}","details.item.alert.show.list":"Affichage de tous les résultats pour {layerName}","details.item.alert.defaultAltText":"Image associée au champ {alias}","details.togglehilight.title":"Basculer vers l'élément principal"}};class Yt extends Te{async added(){this.$iApi.panel.register({"details-layers":{screens:{"layers-screen":ee(Ge)},style:{width:"350px"},button:{tooltip:"details.layers.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>'},alertName:"details.layers.title"},"details-items":{screens:{"results-screen":ee(Xe),"item-screen":ee(Zt)},style:{width:"350px"},button:{tooltip:"details.items.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></svg>'},alertName:"details.items.title"}},{i18n:{messages:qt}}),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,s=>this._parseConfig(s));this.removed=()=>{if(e(),this.$iApi.panel.remove("details-layers"),this.$iApi.panel.remove("details-items"),this.$iApi.fixture.get("appbar")){const t=ke(this.$vApp.$pinia);t.removeButton("details-layers"),t.removeButton("details-items")}U(this.$vApp.$pinia).$reset()}}}export{Yt as default};
