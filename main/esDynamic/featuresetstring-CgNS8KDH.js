import{a as t,$ as m,k as b,p as f,K as s,C as v,l as T,j as l,i as y,o as A,D as h,B as g,O as x,q as D,u as F,W as V}from"./aiServices-DNHDbNOt.js";import{a as c,r as d}from"./enum-BZRMMRUi.js";import{b as w}from"./shared-CQeVfPDN.js";function p(o,r){return o&&o.domain?o.domain.type==="coded-value"||o.domain.type==="codedValue"?l.convertObjectToArcadeDictionary({type:"codedValue",name:o.domain.name,dataType:w[o.field.type],codedValues:o.domain.codedValues.map(e=>({name:e.name,code:e.code}))},y(r)):l.convertObjectToArcadeDictionary({type:"range",name:o.domain.name,dataType:w[o.field.type],min:o.domain.minValue,max:o.domain.maxValue},y(r)):null}function O(o){o.mode==="async"&&(o.functions.domain=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,3,r,e),m(a[0]))return p(b(a[0],f(a[1]),a[2]===void 0?void 0:a[2]),r);if(s(a[0]))return await a[0]._ensureLoaded(),p(v(f(a[1]),a[0],null,a[2]===void 0?void 0:a[2]),r);throw new c(r,d.InvalidParameter,e)})},o.functions.subtypes=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),m(a[0])){const n=T(a[0]);return n?l.convertObjectToArcadeDictionary(n,y(r)):null}if(s(a[0])){await a[0]._ensureLoaded();const n=a[0].subtypeMetaData();return n?l.convertObjectToArcadeDictionary(n,y(r)):null}throw new c(r,d.InvalidParameter,e)})},o.functions.domainname=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,4,r,e),m(a[0]))return A(a[0],f(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const n=v(f(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return h(n,a[2])}throw new c(r,d.InvalidParameter,e)})},o.signatures.push({name:"domainname",min:2,max:4}),o.functions.domaincode=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,4,r,e),m(a[0]))return g(a[0],f(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const n=v(f(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return x(n,a[2])}throw new c(r,d.InvalidParameter,e)})},o.signatures.push({name:"domaincode",min:2,max:4}),o.functions.text=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,2,r,e),s(a[0])){const n=D(a[1],"");if(n==="")return a[0].castToText();if(n.toLowerCase()==="schema")return a[0].convertToText("schema",i.abortSignal);if(n.toLowerCase()==="featureset")return a[0].convertToText("featureset",i.abortSignal);throw new c(r,d.InvalidParameter,e)}return F(a[0],a[1])})},o.functions.gdbversion=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),m(a[0]))return a[0].gdbVersion();if(s(a[0]))return(await a[0].load()).gdbVersion;throw new c(r,d.InvalidParameter,e)})},o.functions.schema=function(r,e){return o.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),s(a[0]))return await a[0].load(),l.convertObjectToArcadeDictionary(a[0].schema(),y(r));if(m(a[0])){const n=V(a[0]);return n?l.convertObjectToArcadeDictionary(n,y(r)):null}throw new c(r,d.InvalidParameter,e)})})}export{O as registerFunctions};
