import{am as d,ie as y,ig as p,ih as h,ii as _,hm as g,a9 as b,H as w,s as A,j as B,e3 as I}from"./main-6gYsRPh_.js";import{_ as R}from"./asyncUtils-K8P6uJAi.js";import{f as S,A as q}from"./Indices-DYF_HXmC.js";import{_ as u}from"./enums-DDJfd4_p.js";function c(r,t){l(r.typedBuffer,t.typedBuffer,r.typedBufferStride,t.typedBufferStride)}function l(r,t,s=2,a=s){const n=t.length/2;let e=0,i=0;if(!d(t)||y(t)){for(let o=0;o<n;++o)r[e]=t[i],r[e+1]=t[i+1],e+=s,i+=a;return}const f=p(t);if(h(t))for(let o=0;o<n;++o)r[e]=Math.max(t[i]/f,-1),r[e+1]=Math.max(t[i+1]/f,-1),e+=s,i+=a;else for(let o=0;o<n;++o)r[e]=t[i]/f,r[e+1]=t[i+1]/f,e+=s,i+=a}function m(r,t,s,a){const n=r.typedBuffer,e=r.typedBufferStride,i=a?.count??r.count;let f=(a?.dstIndex??0)*e;for(let o=0;o<i;++o)n[f]=t,n[f+1]=s,f+=e}Object.freeze(Object.defineProperty({__proto__:null,fill:m,normalizeIntegerBuffer:l,normalizeIntegerBufferView:c},Symbol.toStringTag,{value:"Module"}));class T{constructor(t){this._streamDataRequester=t}async loadJSON(t,s){return this._load(0,t,s)}async loadBinary(t,s){return g(t)?(b(s),_(t)):this._load(1,t,s)}async loadImage(t,s){return this._load(2,t,s)}async _load(t,s,a){if(this._streamDataRequester==null)return(await w(s,{responseType:N[t]})).data;const n=await R(this._streamDataRequester.request(s,t,a));if(n.ok===!0)return n.value;throw B(n.error),new A("glt-loader-request-error",`Request for resource failed: ${n.error}`)}}const N={2:"image",1:"array-buffer",0:"json",3:void 0};function U(r,t){switch(t){case u.TRIANGLES:return j(r);case u.TRIANGLE_STRIP:return x(r);case u.TRIANGLE_FAN:return D(r)}}function j(r){return typeof r=="number"?q(r):I(r)?new Uint16Array(r):r}function x(r){const t=typeof r=="number"?r:r.length;if(t<3)return[];const s=t-2,a=S(3*s);if(typeof r=="number"){let n=0;for(let e=0;e<s;e+=1)e%2==0?(a[n++]=e,a[n++]=e+1,a[n++]=e+2):(a[n++]=e+1,a[n++]=e,a[n++]=e+2)}else{let n=0;for(let e=0;e<s;e+=1)e%2==0?(a[n++]=r[e],a[n++]=r[e+1],a[n++]=r[e+2]):(a[n++]=r[e+1],a[n++]=r[e],a[n++]=r[e+2])}return a}function D(r){const t=typeof r=="number"?r:r.length;if(t<3)return new Uint16Array(0);const s=t-2,a=s<=65536?new Uint16Array(3*s):new Uint32Array(3*s);if(typeof r=="number"){let f=0;for(let o=0;o<s;++o)a[f++]=0,a[f++]=o+1,a[f++]=o+2;return a}const n=r[0];let e=r[1],i=0;for(let f=0;f<s;++f){const o=r[f+2];a[i++]=n,a[i++]=e,a[i++]=o,e=o}return a}export{c as a,m as b,T as l,l as n,U as o};
