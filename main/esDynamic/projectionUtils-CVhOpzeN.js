import{N as F,_ as w,X as I,Y as U,az as X,a9 as he,e as de,io as ge,gY as ye,hq as $,z as A,eV as xe,ah as J,T as O,dH as h,d0 as K,aE as Q,gr as V,cl as we,ch as Re,aH as ve,aG as je,dU as ze,s as Me,U as R,f as D}from"./main-6gYsRPh_.js";import{o as W,C as ke}from"./projectBuffer-gVgthDoV.js";import{o as Se}from"./zscale-Ck9j9k_A.js";var b;let g=b=class extends F{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new b({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};w([I()],g.prototype,"isInverse",void 0),w([I()],g.prototype,"wkt",void 0),w([I()],g.prototype,"wkid",void 0),g=b=w([U("esri.geometry.operators.support.GeographicTransformationStep")],g);var _;let v=_=class extends F{constructor(e){super(e),this.steps=[]}getInverse(){const e=new _;for(let r=this.steps.length-1;r>=0;r--){const n=this.steps[r];e.steps.push(n.getInverse())}return e}};w([I({type:[g],nonNullable:!0})],v.prototype,"steps",void 0),v=_=w([U("esri.geometry.operators.support.GeographicTransformation")],v);function C(e,r,n,t,a,o){return E[0]=e,E[1]=r,E[2]=n,W(E,t,0,a,o,0)}const E=X();let k=null,S=null,L=null,j=null,q={};const H=new de;function y(){return!!(S?.isLoaded()&&L?.isLoaded()&&j?.isLoaded())}function ee(){return!!y()||(D(H),z(),!1)}function ne(e,r){return!e||!r||d(e,r)||ee()}function Le(e,r){return!d(e,r)&&!y()}async function z(e){k==null&&(k=Promise.all([import("./projectOperator-C8S59OY3.js").then(r=>(S=r,S.load())),import("./projectOperator-DD3d8KNS.js").then(r=>(L=r,L.load())),import("./geographicTransformationUtils-De6zS53O.js").then(r=>(j=r,j.load()))])),await k,he(e),H.notify()}function N(e,r,n){return Array.isArray(e)?e.length===0?[]:(ge(e),G(e,e[0].spatialReference,r,n)):(ye(e),G([e],e.spatialReference,r,n)[0])}function G(e,r,n,t){if(r==null||n==null)return e;if(d(r,n,t))return e.map(a=>T(a,r,n));if(t?.geographicTransformation==null&&$(r))return e.map(a=>T(a,r,A.WGS84)).map(a=>M(a,n));if(t?.geographicTransformation==null&&$(n))return e.map(a=>M(a,A.WGS84)).map(a=>T(a,A.WGS84,n));if(!y())throw new te;if(!t?.geographicTransformation){if(t?.extendedParams)t={...t,geographicTransformation:j.getTransformation(r,n,t.areaOfInterestExtent)||new v};else if(!t?.areaOfInterestExtent){const a=Te(r,n);let o=q[a];o||(o=j.getTransformation(r,n)||new v,q[a]=o),t={geographicTransformation:o}}}return e[0].spatialReference||(e[0].spatialReference=r),e[0]instanceof xe?S.executeMany(e,n,t):L.executeMany(e,n,t)}function Te(e,r){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",r.wkid?.toString()??"-1",r.wkt?.toString()??"",r.wkt2?.toString()??""].join()}function re(e,r){const n=Y([e],r);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function Y(e,r){if(!y()){for(const n of e)if(n!=null&&!O(n.spatialReference,r)&&h(n.spatialReference)&&h(r)&&!d(n.spatialReference,r))return D(H),{pending:z(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:O(n.spatialReference,r)?n:h(n.spatialReference)&&h(r)?M(n,r):null)}}class te extends Me{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function Pe(){k=null,S=null,L=null,j=null,q={}}const Ze={get loadPromise(){return k}};function M(e,r){try{const n=N(e,r);return n==null?null:("xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax),Se(n.type,e.spatialReference,r)?.(n),n)}catch(n){if(!(n instanceof te))throw n;return null}}async function ae(e,r,n){const t=e.spatialReference;return t!=null&&r!=null&&await B(t,r,null,n),M(e,r)}function d(e,r,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!O(e,r)||h(e)&&h(r)&&!!ke(e,r))}function oe(e,r){if(O(e,r))return!0;if(!h(e)||!h(r))return!1;const n=K(e)||Q(e)||V(e),t=K(r)||Q(r)||V(r);return n&&t}async function B(e,r,n,t){if(y())return J(t);if(Array.isArray(e)){for(const{source:a,dest:o,options:u}of e)if(a&&o&&!d(a,o,u))return z(t)}else if(e&&r&&!d(e,r,n))return z(t);return J(t)}function T(e,r,n){return e?"x"in e?se(e,r,new we,n,0):"xmin"in e?pe(e,r,new Re,n,0):"rings"in e?fe(e,r,new ve,n,0):"paths"in e?ue(e,r,new je,n,0):"points"in e?le(e,r,new ze,n,0):null:null}function ie(e,r,n=r.spatialReference,t=0){return n!=null&&e.spatialReference!=null&&se(e,e.spatialReference,r,n,t)!=null}function se(e,r,n,t,a){l[0]=e.x,l[1]=e.y;const o=e.z;return l[2]=o!==void 0?o:a,W(l,r,0,l,t,0)?(n.x=l[0],n.y=l[1],n.spatialReference=t,o!==void 0||R(t)?(n.z=l[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Ie(e,r,n=r.spatialReference,t=0){return e.spatialReference!=null&&n!=null&&le(e,e.spatialReference,r,n,t)!=null}function le(e,r,n,t,a){const{points:o,hasZ:u,hasM:s}=e,i=[],p=o.length,m=[];for(const c of o)m.push(c[0],c[1],u?c[2]:a);if(!W(m,r,0,m,t,0,p))return null;const f=u||R(t);for(let c=0;c<p;++c){const x=3*c,P=m[x],Z=m[x+1];f&&s?i.push([P,Z,m[x+2],o[c][3]]):f?i.push([P,Z,m[x+2]]):s?i.push([P,Z,o[c][2]]):i.push([P,Z])}return n.points=i,n.spatialReference=t,n.hasZ=u,n.hasM=s,n}function Oe(e,r,n=r.spatialReference,t=0){return e.spatialReference!=null&&n!=null&&ue(e,e.spatialReference,r,n,t)!=null}function ue(e,r,n,t,a){const{paths:o,hasZ:u,hasM:s}=e,i=[];if(!me(o,u??!1,s??!1,r,i,t,a))return null;const p=u||R(t);return n.paths=i,n.spatialReference=t,n.hasZ=p,n.hasM=s,n}function ce(e,r,n=r.spatialReference,t=0){return e.spatialReference!=null&&n!=null&&fe(e,e.spatialReference,r,n,t)!=null}function fe(e,r,n,t,a){const{rings:o,hasZ:u,hasM:s}=e,i=[];if(!me(o,u??!1,s??!1,r,i,t,a))return null;const p=u||R(t);return n.rings=i,n.spatialReference=t,n.hasZ=p,n.hasM=s,n}function We(e,r,n=r.spatialReference,t=0){return e.spatialReference!=null&&n!=null&&pe(e,e.spatialReference,r,n,t)!=null}function pe(e,r,n,t,a){const{xmin:o,ymin:u,xmax:s,ymax:i,hasZ:p,hasM:m}=e,f=p?e.zmin:a;if(!C(o,u,f,r,l,t))return null;const c=p||R(t);n.xmin=l[0],n.ymin=l[1],c&&(n.zmin=l[2]);const x=p?e.zmax:a;return C(s,i,x,r,l,t)?(n.xmax=l[0],n.ymax=l[1],c&&(n.zmax=l[2]),m&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=t,n):null}function me(e,r,n,t,a,o,u=0){const s=new Array;for(const m of e)for(const f of m)s.push(f[0],f[1],r?f[2]:u);if(!W(s,t,0,s,o,0))return!1;let i=0;a.length=0;const p=r||R(o);for(const m of e){const f=new Array;for(const c of m)p&&n?f.push([s[i++],s[i++],s[i++],c[3]]):p?f.push([s[i++],s[i++],s[i++]]):n?(f.push([s[i++],s[i++],c[2]]),i++):(f.push([s[i++],s[i++]]),i++);a.push(f)}return!0}const l=X(),Ee=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:d,initializeProjection:B,isEqualBaseGCS:oe,isLoaded:y,isLoadedOrLoad:ee,isLoadedOrLoadFor:ne,load:z,project:N,projectExtent:We,projectMany:G,projectMultipoint:Ie,projectOrLoad:re,projectOrLoadMany:Y,projectPoint:ie,projectPolygon:ce,projectPolyline:Oe,projectWithZConversion:ae,projectWithoutEngine:T,requiresLoad:Le,test:Ze,tryProjectWithZConversion:M,unload:Pe},Symbol.toStringTag,{value:"Module"}));export{ie as $,G as B,M as F,y as G,ae as H,d as J,oe as K,z as L,B as N,T as Q,N as W,re as X,Y,ne as b,v as c,g as i,ce as o,Ee as p,C as t};
