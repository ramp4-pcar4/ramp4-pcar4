{"version":3,"file":"writeUtils-BRJWPh49.js","sources":["../../node_modules/@arcgis/core/webdoc/support/writeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{getDeepValue as n}from\"../../core/object.js\";import{numberToJSON as r}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as i}from\"../../layers/support/layerUtils.js\";const o=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wcs\",\"wms\",\"wmts\"]),l=new Set([\"catalog\",\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"knowledge-graph\",\"map-image\",\"map-notes\",\"media\",\"ogc-feature\",\"oriented-imagery\",\"route\",\"stream\",\"subtype-group\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"video\",\"web-tile\",\"wcs\",\"wfs\",\"wms\",\"wmts\"]),a=new Set([...l,\"link-chart\"]);function s(e){o.delete(e),l.delete(e)}function c(e){o.add(e),l.add(e)}function u(e){switch(e.layerContainerType){case\"basemap\":return o;case\"operational-layers\":return\"link-chart\"===e.origin?a:l;default:return null}}function d(e,t){if(t.restrictedWebMapWriting){const n=u(t);return null==n||n.has(e.type)&&!i(e)}return!0}function p(e,t){if(t)if(i(e)){const r=n(\"featureCollection.layers\",t),i=r?.[0]?.layerDefinition;i&&m(e,i)}else\"group\"!==e.type&&m(e,t)}function m(e,t){\"maxScale\"in e&&(t.maxScale=r(e.maxScale)??void 0),\"minScale\"in e&&(t.minScale=r(e.minScale)??void 0)}function f(e,t){if(p(e,t),t&&(t.id=e.id,\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=r(e.opacity)??void 0,t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type))if(i(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function g(n,r,o){if(!n.persistenceEnabled)return null;if(!(\"write\"in n)||!n.write)return o?.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if(i(n)&&!n.isTable)r=n.resourceInfo;else if(d(n,o)){const e={};return n.write(e,o)?e:null}return null!=r&&f(n,r=t(r)),r}export{c as disableRestrictedWriting,s as enableRestrictedWriting,g as getLayerJSON};\n"],"names":["o","l","a","u","d","t","i","p","r","n","m","f","g","e"],"mappings":";AAIoT,MAAMA,IAAE,oBAAI,IAAI,CAAC,aAAY,WAAU,gBAAe,aAAY,mBAAkB,QAAO,WAAU,eAAc,eAAc,YAAW,OAAM,OAAM,MAAM,CAAC,GAAEC,IAAE,oBAAI,IAAI,CAAC,WAAU,OAAM,WAAU,WAAU,WAAU,SAAQ,WAAU,gBAAe,OAAM,mBAAkB,aAAY,aAAY,SAAQ,eAAc,oBAAmB,SAAQ,UAAS,iBAAgB,QAAO,WAAU,eAAc,eAAc,SAAQ,YAAW,OAAM,OAAM,OAAM,MAAM,CAAC,GAAEC,IAAE,oBAAI,IAAI,CAAC,GAAGD,GAAE,YAAY,CAAC;AAAwE,SAASE,EAAE,GAAE;AAAC,UAAO,EAAE,oBAAkB;AAAA,IAAE,KAAI;AAAU,aAAOH;AAAA,IAAE,KAAI;AAAqB,aAAqB,EAAE,WAAjB,eAAwBE,IAAED;AAAA,IAAE;AAAQ,aAAO;AAAA,EAAI;AAAC;AAAC,SAASG,EAAE,GAAEC,GAAE;AAAC,MAAGA,EAAE,yBAAwB;AAAC,UAAM,IAAEF,EAAEE,CAAC;AAAE,WAAa,KAAN,QAAS,EAAE,IAAI,EAAE,IAAI,KAAG,CAACC,EAAE,CAAC;AAAA,EAAC;AAAC;AAAQ;AAAC,SAASC,EAAE,GAAEF,GAAE;AAAC,MAAGA,EAAE,KAAGC,EAAE,CAAC,GAAE;AAAC,UAAME,IAAEC,EAAE,4BAA2BJ,CAAC,GAAEC,IAAEE,IAAI,CAAC,GAAG;AAAgB,IAAAF,KAAGI,EAAE,GAAEJ,CAAC;AAAA,EAAC,MAAK,CAAU,EAAE,SAAZ,WAAkBI,EAAE,GAAEL,CAAC;AAAC;AAAC,SAASK,EAAE,GAAEL,GAAE;AAAC,gBAAa,MAAIA,EAAE,WAASG,EAAE,EAAE,QAAQ,KAAG,SAAQ,cAAa,MAAIH,EAAE,WAASG,EAAE,EAAE,QAAQ,KAAG;AAAO;AAAC,SAASG,EAAE,GAAEN,GAAE;AAAC,MAAGE,EAAE,GAAEF,CAAC,GAAEA,MAAIA,EAAE,KAAG,EAAE,IAAG,eAAc,MAAIA,EAAE,YAAU,EAAE,WAAqBA,EAAE,cAAb,YAAwB,OAAOA,EAAE,YAAWA,EAAE,UAAQG,EAAE,EAAE,OAAO,KAAG,QAAOH,EAAE,QAAM,EAAE,SAAO,SAAQA,EAAE,aAAW,EAAE,SAAQ,mBAAkB,KAAY,EAAE,SAAX,QAAiB,KAAGC,EAAE,CAAC,GAAE;AAAC,UAAM,IAAED,EAAE;AAAkB,UAAI,EAAE,aAAW,EAAE;AAAA,EAAc,MAAM,CAAAA,EAAE,aAAW,EAAE;AAAa;AAAC,SAASO,EAAEH,GAAED,GAAER,GAAE;AAAC,MAAG,CAACS,EAAE,mBAAmB,QAAO;AAAK,MAAG,EAAE,WAAUA,MAAI,CAACA,EAAE,MAAM,QAAOT,GAAG,YAAUA,EAAE,SAAS,KAAK,IAAIa,EAAE,qBAAoB,WAAWJ,EAAE,KAAK,KAAKA,EAAE,EAAE,cAAcA,EAAE,aAAa,yBAAwB,EAAC,OAAMA,EAAC,CAAC,CAAC,GAAE;AAAK,MAAGH,EAAEG,CAAC,KAAG,CAACA,EAAE,QAAQ,CAAAD,IAAEC,EAAE;AAAA,WAAqBL,EAAEK,GAAET,CAAC,GAAE;AAAC,UAAMa,IAAE,CAAA;AAAG,WAAOJ,EAAE,MAAMI,GAAEb,CAAC,IAAEa,IAAE;AAAA,EAAI;AAAC,SAAaL,KAAN,QAASG,EAAEF,GAAED,IAAEH,EAAEG,CAAC,CAAC,GAAEA;AAAC;","x_google_ignoreList":[0]}