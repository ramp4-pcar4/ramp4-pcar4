{"version":3,"file":"xyChart-CJnT3wve.js","sources":["../../node_modules/d3-shape/src/array.js","../../node_modules/d3-shape/src/curve/linear.js","../../node_modules/d3-shape/src/point.js","../../node_modules/d3-shape/src/line.js","../../node_modules/d3-shape/src/area.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChartDefaultTheme.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChart.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Grid.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYCursor.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/XYSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/BaseColumnSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Axis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/ValueAxis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/CategoryAxis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisLabel.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisTick.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRenderer.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRendererX.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRendererY.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/ColumnSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/LineSeries.js"],"sourcesContent":["export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import { Theme } from \"../../core/Theme\";\r\nimport { percent, p50, p100 } from \"../../core/util/Percent\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\nimport * as $time from \"../../core/util/Time\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $array from \"../../core/util/Array\";\r\n/**\r\n * @ignore\r\n */\r\nexport class XYChartDefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const ic = this._root.interfaceColors;\r\n        const language = this._root.language;\r\n        const r = this.rule.bind(this);\r\n        /**\r\n         * ========================================================================\r\n         * charts/xy\r\n         * ========================================================================\r\n         */\r\n        r(\"XYChart\").setAll({\r\n            colors: ColorSet.new(this._root, {}),\r\n            paddingLeft: 20,\r\n            paddingRight: 20,\r\n            paddingTop: 16,\r\n            paddingBottom: 16,\r\n            panX: false,\r\n            panY: false,\r\n            wheelStep: 0.25,\r\n            arrangeTooltips: true,\r\n            pinchZoomX: false,\r\n            pinchZoomY: false\r\n        });\r\n        r(\"XYSeries\").setAll({\r\n            legendLabelText: \"{name}\"\r\n        });\r\n        r(\"Rectangle\", [\"plotbackground\", \"xy\", \"background\"]).setAll({\r\n            fill: Color.fromHex(0x000000),\r\n            fillOpacity: 0\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: XYChartScrollbar\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYChart\", [\"scrollbar\", \"chart\"]).setAll({\r\n            paddingBottom: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingRight: 0,\r\n            colors: ColorSet.new(this._root, {\r\n                saturation: 0\r\n            })\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"scrollbar\", \"overlay\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.5\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        // Class: RoundedRectangle\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).setAll({\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusBL: 0,\r\n            fillOpacity: 0,\r\n            focusable: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).states.create(\"hover\", { fillOpacity: 0.4 });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\"]).setAll({\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusBR: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\", \"resize\", \"button\"]).setAll({\r\n            cornerRadiusBL: 40,\r\n            cornerRadiusBR: 40,\r\n            cornerRadiusTL: 40,\r\n            cornerRadiusTR: 40\r\n        });\r\n        r(\"AxisRendererX\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true\r\n        });\r\n        r(\"AxisRendererY\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true,\r\n            minGridDistance: 5\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5,\r\n            centerY: p100,\r\n            minPosition: 0.01,\r\n            maxPosition: 0.99,\r\n            fontSize: \"0.8em\"\r\n        });\r\n        r(\"AxisLabel\", [\"category\"]).setAll({\r\n            text: \"{category}\",\r\n            populateText: true\r\n        });\r\n        r(\"AxisLabel\", [\"x\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\", \"opposite\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"opposite\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\", \"opposite\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"minor\"]).setAll({\r\n            fontSize: \"0.6em\"\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Cursor\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYCursor\").setAll({\r\n            behavior: \"none\",\r\n            layer: 30,\r\n            exportable: false,\r\n            snapToSeriesBy: \"xy\",\r\n            moveThreshold: 1\r\n        });\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"x\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"y\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"cursor\", \"selection\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.15,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Axes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Axis\").setAll({\r\n            zoomOut: true,\r\n            start: 0,\r\n            end: 1,\r\n            minZoomCount: 1,\r\n            maxZoomCount: Infinity,\r\n            maxZoomFactor: 1000,\r\n            maxDeviation: 0.1,\r\n            snapTooltip: true,\r\n            tooltipLocation: 0.5,\r\n            panX: true,\r\n            panY: true,\r\n            zoomX: true,\r\n            zoomY: true,\r\n            fixAxisSize: true\r\n        });\r\n        r(\"AxisLabel\").setAll({\r\n            location: 0.5,\r\n            multiLocation: 0,\r\n            centerX: p50,\r\n            centerY: p50,\r\n            paddingTop: 3,\r\n            paddingBottom: 3,\r\n            paddingLeft: 5,\r\n            paddingRight: 5\r\n        });\r\n        // The following is deprecated following text measuring updates in 5.0.5\r\n        // r(\"AxisLabel\", [\"y\"]).setAll({\r\n        // \ttextAlign: \"right\"\r\n        // });\r\n        // r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n        // \ttextAlign: \"left\"\r\n        // });\r\n        r(\"Container\", [\"axis\", \"header\"]).setAll({\r\n            layer: 30\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"header\", \"background\"]).setAll({\r\n            crisp: true\r\n        });\r\n        {\r\n            const rule = r(\"AxisRenderer\");\r\n            rule.setAll({\r\n                crisp: true,\r\n                strokeOpacity: 0\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"AxisRendererX\").setAll({\r\n            minGridDistance: 120,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            width: p100\r\n        });\r\n        r(\"AxisRendererY\").setAll({\r\n            minGridDistance: 40,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            height: p100\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"axis\", \"thumb\", \"zoomgrip\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n            rule.states.create(\"hover\", { fillOpacity: 0.1 });\r\n        }\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"x\", \"zoomgrip\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\"\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"y\", \"zoomgrip\"]).setAll({\r\n            cursorOverStyle: \"ns-resize\"\r\n        });\r\n        {\r\n            const rule = r(\"Grid\");\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.15,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"minor\"]);\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.07,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Grid\", [\"base\"]).setAll({\r\n            strokeOpacity: 0.3\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"axis\", \"fill\"]);\r\n            rule.setAll({\r\n                visible: false,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                fillOpacity: 0.05,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Graphics\", [\"axis\", \"fill\", \"range\"]).setAll({\r\n            isMeasured: true\r\n        });\r\n        // hides all elements of series axis range\r\n        r(\"Graphics\", [\"series\", \"fill\", \"range\"]).setAll({\r\n            visible: false,\r\n            isMeasured: true\r\n        });\r\n        r(\"Grid\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisTick\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisLabel\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        {\r\n            const rule = r(\"AxisTick\");\r\n            rule.setAll({\r\n                location: 0.5,\r\n                multiLocation: 0,\r\n                strokeOpacity: 1,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                visible: false\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"CategoryAxis\").setAll({\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            fillRule: (dataItem, index) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        axisFill.setPrivate(\"visible\", true);\r\n                    }\r\n                    else {\r\n                        axisFill.setPrivate(\"visible\", false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const gridIntervals = [\r\n            { timeUnit: \"millisecond\", count: 1 },\r\n            { timeUnit: \"millisecond\", count: 5 },\r\n            { timeUnit: \"millisecond\", count: 10 },\r\n            { timeUnit: \"millisecond\", count: 50 },\r\n            { timeUnit: \"millisecond\", count: 100 },\r\n            { timeUnit: \"millisecond\", count: 500 },\r\n            { timeUnit: \"second\", count: 1 },\r\n            { timeUnit: \"second\", count: 5 },\r\n            { timeUnit: \"second\", count: 10 },\r\n            { timeUnit: \"second\", count: 30 },\r\n            { timeUnit: \"minute\", count: 1 },\r\n            { timeUnit: \"minute\", count: 5 },\r\n            { timeUnit: \"minute\", count: 10 },\r\n            { timeUnit: \"minute\", count: 15 },\r\n            { timeUnit: \"minute\", count: 30 },\r\n            { timeUnit: \"hour\", count: 1 },\r\n            { timeUnit: \"hour\", count: 3 },\r\n            { timeUnit: \"hour\", count: 6 },\r\n            { timeUnit: \"hour\", count: 12 },\r\n            { timeUnit: \"day\", count: 1 },\r\n            { timeUnit: \"day\", count: 2 },\r\n            { timeUnit: \"day\", count: 3 },\r\n            { timeUnit: \"day\", count: 4 },\r\n            { timeUnit: \"day\", count: 5 },\r\n            { timeUnit: \"week\", count: 1 },\r\n            { timeUnit: \"month\", count: 1 },\r\n            { timeUnit: \"month\", count: 2 },\r\n            { timeUnit: \"month\", count: 3 },\r\n            { timeUnit: \"month\", count: 6 },\r\n            { timeUnit: \"year\", count: 1 },\r\n            { timeUnit: \"year\", count: 2 },\r\n            { timeUnit: \"year\", count: 5 },\r\n            { timeUnit: \"year\", count: 10 },\r\n            { timeUnit: \"year\", count: 50 },\r\n            { timeUnit: \"year\", count: 100 },\r\n            { timeUnit: \"year\", count: 200 },\r\n            { timeUnit: \"year\", count: 500 },\r\n            { timeUnit: \"year\", count: 1000 },\r\n            { timeUnit: \"year\", count: 2000 },\r\n            { timeUnit: \"year\", count: 5000 },\r\n            { timeUnit: \"year\", count: 10000 },\r\n            { timeUnit: \"year\", count: 100000 }\r\n        ];\r\n        const dateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_hour\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const periodChangeDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_day\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\") + \" \" + language.translate(\"_date_year\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const tooltipDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond_full\"),\r\n            \"second\": language.translate(\"_date_second_full\"),\r\n            \"minute\": language.translate(\"_date_minute_full\"),\r\n            \"hour\": language.translate(\"_date_hour_full\"),\r\n            \"day\": language.translate(\"_date_day_full\"),\r\n            \"week\": language.translate(\"_date_week_full\"),\r\n            \"month\": language.translate(\"_date_month_full\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        r(\"CategoryDateAxis\").setAll({\r\n            markUnitChange: true,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats)\r\n        });\r\n        r(\"DateAxis\").setAll({\r\n            maxZoomFactor: null,\r\n            strictMinMax: true,\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            markUnitChange: true,\r\n            groupData: false,\r\n            groupCount: 500,\r\n            skipFirstMinor: true,\r\n            weekLabelLocation: 0,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats),\r\n            tooltipDateFormats: tooltipDateFormats,\r\n            groupIntervals: [\r\n                { timeUnit: \"millisecond\", count: 1 },\r\n                { timeUnit: \"millisecond\", count: 10 },\r\n                { timeUnit: \"millisecond\", count: 100 },\r\n                { timeUnit: \"second\", count: 1 },\r\n                { timeUnit: \"second\", count: 10 },\r\n                { timeUnit: \"minute\", count: 1 },\r\n                { timeUnit: \"minute\", count: 10 },\r\n                { timeUnit: \"hour\", count: 1 },\r\n                { timeUnit: \"day\", count: 1 },\r\n                { timeUnit: \"week\", count: 1 },\r\n                { timeUnit: \"month\", count: 1 },\r\n                { timeUnit: \"year\", count: 1 }\r\n            ],\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const endValue = dataItem.get(\"endValue\");\r\n                    const intervalDuration = axis.intervalDuration();\r\n                    const baseInterval = axis.getPrivate(\"baseInterval\");\r\n                    const gridInterval = axis.getPrivate(\"gridInterval\", baseInterval);\r\n                    let min = axis.getPrivate(\"min\", 0);\r\n                    min = $time.round(new Date(min), gridInterval.timeUnit, gridInterval.count, this._root.locale.firstDayOfWeek, this._root.utc, undefined, this._root.timezone).getTime();\r\n                    if (value != null && endValue != null) {\r\n                        const val = Math.round(Math.round((value - min) / intervalDuration)) / 2;\r\n                        if (val == Math.round(val)) {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"GaplessDateAxis\").setAll({\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const index = dataItem.get(\"index\");\r\n                    let visible = false;\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        visible = true;\r\n                    }\r\n                    axisFill.setPrivate(\"visible\", visible);\r\n                }\r\n            }\r\n        });\r\n        r(\"ValueAxis\").setAll({\r\n            baseValue: 0,\r\n            logarithmic: false,\r\n            strictMinMax: false,\r\n            autoZoom: true,\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const step = axis.getPrivate(\"step\");\r\n                    if ($type.isNumber(value) && $type.isNumber(step)) {\r\n                        if ($math.round(value / step / 2, 5) == Math.round(value / step / 2)) {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"DurationAxis\").setAll({\r\n            baseUnit: \"second\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Series\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYSeries\").setAll({\r\n            maskBullets: true,\r\n            stackToNegative: true,\r\n            locationX: 0.5,\r\n            locationY: 0.5,\r\n            snapTooltip: false,\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\",\r\n            seriesTooltipTarget: \"series\"\r\n        });\r\n        r(\"BaseColumnSeries\").setAll({\r\n            adjustBulletPosition: true\r\n        });\r\n        r(\"ColumnSeries\").setAll({\r\n            clustered: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"series\", \"column\"]).setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(70),\r\n            height: percent(70),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"LineSeries\").setAll({\r\n            connect: true,\r\n            autoGapCount: 1.1,\r\n            stackToNegative: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"stroke\"]).setAll({\r\n            position: \"absolute\",\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"fill\"]).setAll({\r\n            visible: false,\r\n            fillOpacity: 0,\r\n            position: \"absolute\",\r\n            strokeWidth: 0,\r\n            strokeOpacity: 0,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, h / 2);\r\n                    display.lineTo(w, h / 2);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, 0);\r\n                    display.lineTo(w, 0);\r\n                    display.lineTo(w, h);\r\n                    display.lineTo(0, h);\r\n                    display.lineTo(0, 0);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"SmoothedXYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedXLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"Candlestick\").setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(50),\r\n            height: percent(50),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"OHLC\").setAll({\r\n            width: percent(80),\r\n            height: percent(80)\r\n        });\r\n        r(\"CandlestickSeries\").setAll({\r\n            lowValueXGrouped: \"low\",\r\n            lowValueYGrouped: \"low\",\r\n            highValueXGrouped: \"high\",\r\n            highValueYGrouped: \"high\",\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\"\r\n        });\r\n        // These rules can be used for regular columns, too\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"riseFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"dropFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // Hollow\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromOpen\", { fillOpacity: 0 });\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromOpen\", { fillOpacity: 1 });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // AXIS RANGE GRIP\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"rangegrip\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0,\r\n                fillOpacity: 0,\r\n                strokeWidth: 1,\r\n                width: 12,\r\n                height: 12\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"rangegrip\", \"button\", \"icon\"]);\r\n            rule.setAll({\r\n                interactive: false,\r\n                crisp: true,\r\n                strokeOpacity: 0.5,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0.5);\r\n                    display.lineTo(0, 12.5);\r\n                    display.moveTo(2, 0.5);\r\n                    display.lineTo(2, 12.5);\r\n                    display.moveTo(4, 0.5);\r\n                    display.lineTo(4, 12.5);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n        }\r\n        r(\"Button\", [\"rangegrip\"]).setAll({\r\n            draggable: true,\r\n            paddingTop: 0,\r\n            paddingBottom: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\"]).setAll({\r\n            rotation: 90,\r\n            cursorOverStyle: \"ns-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"left\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"right\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"top\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"bottom\"]).setAll({\r\n            centerY: p100\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=XYChartDefaultTheme.js.map",";\r\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Rectangle } from \"../../core/render/Rectangle\";\r\nimport { SerialChart } from \"../../core/render/SerialChart\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Button } from \"../../core/render/Button\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Percent } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $order from \"../../core/util/Order\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\n/**\r\n * Creates an XY chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\r\n * @important\r\n */\r\nexport class XYChart extends SerialChart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of horizontal axes.\r\n         */\r\n        Object.defineProperty(this, \"xAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A list of vertical axes.\r\n         */\r\n        Object.defineProperty(this, \"yAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A [[Container]] located on top of the chart, used to store top horizontal\r\n         * axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle the chart, used to store vertical axes\r\n         * and plot area container.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"yAxesAndPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on bottom of the chart, used to store bottom\r\n         * horizontal axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bottomAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on left of the chart, used to store left-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"leftAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { width: p100, height: p100, maskContent: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store actual\r\n         * plots (series).\r\n         *\r\n         * NOTE: `plotContainer` will automatically have its `background` preset. If\r\n         * you need to modify background or outline for chart's plot area, you can\r\n         * use `plotContainer.get(\"background\")` for that.*\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] used for any elements that need to be displayed over\r\n         * regular `plotContainer`.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, { width: p100, height: p100, isMeasured: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis background grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, isMeasured: false })\r\n        });\r\n        /**\r\n         * A [[Container]] located on right of the chart, used to store right-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"rightAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis headers are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"axisHeadersContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A button that is shown when chart is not fully zoomed out.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\r\n         * @default Button.new()\r\n         */\r\n        Object.defineProperty(this, \"zoomOutButton\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.topPlotContainer.children.push(Button.new(this._root, {\r\n                themeTags: [\"zoom\"],\r\n                icon: Graphics.new(this._root, {\r\n                    themeTags: [\"button\", \"icon\"]\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_movePoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_wheelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_otherCharts\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_movePoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_downStartX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStartY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._defaultThemes.push(XYChartDefaultTheme.new(this._root));\r\n        super._afterNew();\r\n        this._disposers.push(this.xAxes);\r\n        this._disposers.push(this.yAxes);\r\n        const root = this._root;\r\n        let verticalLayout = this._root.verticalLayout;\r\n        const zoomOutButton = this.zoomOutButton;\r\n        zoomOutButton.events.on(\"click\", () => {\r\n            this.zoomOut();\r\n        });\r\n        zoomOutButton.hide(0);\r\n        zoomOutButton.states.lookup(\"default\").set(\"opacity\", 1);\r\n        this.chartContainer.set(\"layout\", verticalLayout);\r\n        const plotContainer = this.plotContainer;\r\n        plotContainer.children.push(this.seriesContainer);\r\n        this._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\r\n        this._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\r\n        plotContainer.children.push(this.topGridContainer);\r\n        plotContainer.children.push(this.bulletsContainer);\r\n        // Setting trasnparent background so that full body of the plot container\r\n        // is interactive\r\n        plotContainer.set(\"interactive\", true);\r\n        plotContainer.set(\"interactiveChildren\", false);\r\n        plotContainer.set(\"background\", Rectangle.new(root, {\r\n            themeTags: [\"plotbackground\", \"xy\", \"background\"]\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\r\n            this._handlePlotDown(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\r\n            this._handlePlotUp(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\r\n            this._handlePlotMove(event);\r\n        }));\r\n        this._maskGrid();\r\n        this._setUpTouch();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\r\n            this._setUpTouch();\r\n        }\r\n    }\r\n    _setUpTouch() {\r\n        if (!this.plotContainer._display.cancelTouch) {\r\n            this.plotContainer._display.cancelTouch = (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\r\n        }\r\n    }\r\n    _maskGrid() {\r\n        this.gridContainer.set(\"maskContent\", true);\r\n        this.topGridContainer.set(\"maskContent\", true);\r\n    }\r\n    _removeSeries(series) {\r\n        series._unstack();\r\n        if (series._posXDp) {\r\n            series._posXDp.dispose();\r\n        }\r\n        if (series._posYDp) {\r\n            series._posYDp.dispose();\r\n        }\r\n        series.set(\"baseAxis\", undefined);\r\n        const xAxis = series.get(\"xAxis\");\r\n        if (xAxis) {\r\n            $array.remove(xAxis.series, series);\r\n            xAxis.markDirtyExtremes();\r\n        }\r\n        const yAxis = series.get(\"yAxis\");\r\n        if (yAxis) {\r\n            $array.remove(yAxis.series, series);\r\n            yAxis.markDirtyExtremes();\r\n        }\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (snapToSeries) {\r\n                $array.remove(snapToSeries, series);\r\n            }\r\n        }\r\n        super._removeSeries(series);\r\n    }\r\n    /**\r\n     * This method is invoked when mouse wheel is used over chart's plot\r\n     * container, and handles zooming/pan.\r\n     *\r\n     * You can invoke this method manually, if you need to mimic chart's wheel\r\n     * behavior over other elements of the chart.\r\n     */\r\n    handleWheel(event) {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        const wheelEvent = event.originalEvent;\r\n        // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n        // some page element is over the chart.\r\n        let prevent = false;\r\n        if ($utils.isLocalEvent(wheelEvent, this)) {\r\n            prevent = true;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        const plotPoint = plotContainer.toLocal(event.point);\r\n        const wheelStep = this.get(\"wheelStep\", 0.2);\r\n        const shiftY = wheelEvent.deltaY / 100;\r\n        const shiftX = wheelEvent.deltaX / 100;\r\n        const wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\r\n        const wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\r\n        if ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start - delta;\r\n                    let newEnd = end - delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if (prevent) {\r\n            wheelEvent.preventDefault();\r\n        }\r\n    }\r\n    _handleSetWheel() {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        if (wheelX !== \"none\" || wheelY !== \"none\") {\r\n            this._wheelDp = plotContainer.events.on(\"wheel\", (event) => {\r\n                const wheelEvent = event.originalEvent;\r\n                if ((wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0) || (wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0)) {\r\n                    this.handleWheel(event);\r\n                }\r\n            });\r\n            this._disposers.push(this._wheelDp);\r\n        }\r\n        else {\r\n            if (this._wheelDp) {\r\n                this._wheelDp.dispose();\r\n            }\r\n        }\r\n    }\r\n    _getWheelSign(axis) {\r\n        let sign = 1;\r\n        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n            sign = -1;\r\n        }\r\n        return sign;\r\n    }\r\n    _fixWheel(start, end) {\r\n        const diff = end - start;\r\n        if (start < 0) {\r\n            start = 0;\r\n            end = start + diff;\r\n        }\r\n        if (end > 1) {\r\n            end = 1;\r\n            start = end - diff;\r\n        }\r\n        return [start, end];\r\n    }\r\n    _handlePlotDown(event) {\r\n        const originalEvent = event.originalEvent;\r\n        if (originalEvent.button == 2) {\r\n            return;\r\n        }\r\n        const plotContainer = this.plotContainer;\r\n        let local = plotContainer.toLocal(event.point);\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const pointerId = originalEvent.pointerId;\r\n            if (pointerId) {\r\n                if ($object.keys(plotContainer._downPoints).length > 0) {\r\n                    const xAxis = this.xAxes.getIndex(0);\r\n                    const yAxis = this.yAxes.getIndex(0);\r\n                    if (xAxis) {\r\n                        this._downStartX = xAxis.get(\"start\", 0);\r\n                        this._downEndX = xAxis.get(\"end\", 1);\r\n                    }\r\n                    if (yAxis) {\r\n                        this._downStartY = yAxis.get(\"start\", 0);\r\n                        this._downEndY = yAxis.get(\"end\", 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.get(\"panX\") || this.get(\"panY\")) {\r\n            if (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\r\n                //this._downPoint = local;\r\n                this._downPoint = { x: originalEvent.clientX, y: originalEvent.clientY };\r\n                const panX = this.get(\"panX\");\r\n                const panY = this.get(\"panY\");\r\n                if (panX) {\r\n                    this.xAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                if (panY) {\r\n                    this.yAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                const eventType = \"panstarted\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleWheelAnimation(animation) {\r\n        if (animation) {\r\n            animation.events.on(\"stopped\", () => {\r\n                this._dispatchWheelAnimation();\r\n            });\r\n        }\r\n        else {\r\n            this._dispatchWheelAnimation();\r\n        }\r\n    }\r\n    _dispatchWheelAnimation() {\r\n        const eventType = \"wheelended\";\r\n        if (this.events.isEnabled(eventType)) {\r\n            this.events.dispatch(eventType, { type: eventType, target: this });\r\n        }\r\n    }\r\n    _handlePlotUp(event) {\r\n        const downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            if (this.get(\"panX\") || this.get(\"panY\")) {\r\n                if (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\r\n                    const eventType = \"pancancelled\";\r\n                    if (this.events.isEnabled(eventType)) {\r\n                        this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                    }\r\n                }\r\n                const eventType = \"panended\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n        // TODO: handle multitouch\r\n        this._downPoint = undefined;\r\n        this.xAxes.each((xAxis) => {\r\n            xAxis._isPanning = false;\r\n        });\r\n        this.yAxes.each((yAxis) => {\r\n            yAxis._isPanning = false;\r\n        });\r\n    }\r\n    _handlePlotMove(event) {\r\n        const plotContainer = this.plotContainer;\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const touchEvent = event.originalEvent;\r\n            const pointerId = touchEvent.pointerId;\r\n            if (pointerId) {\r\n                this._movePoints[pointerId] = event.point;\r\n                if ($object.keys(plotContainer._downPoints).length > 1) {\r\n                    this._handlePinch();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        let downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            downPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\r\n            let local = plotContainer.toLocal(event.point);\r\n            const panX = this.get(\"panX\");\r\n            const panY = this.get(\"panY\");\r\n            if (panX) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.disableType(\"rangechanged\");\r\n                }\r\n                this.xAxes.each((axis) => {\r\n                    if (axis.get(\"panX\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaX *= -1;\r\n                        }\r\n                        let start = panStart + deltaX;\r\n                        let end = panEnd + deltaX;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n            if (panY) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.disableType(\"rangechanged\");\r\n                }\r\n                this.yAxes.each((axis) => {\r\n                    if (axis.get(\"panY\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaY *= -1;\r\n                        }\r\n                        let start = panStart - deltaY;\r\n                        let end = panEnd - deltaY;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handlePinch() {\r\n        const plotContainer = this.plotContainer;\r\n        let i = 0;\r\n        let downPoints = [];\r\n        let movePoints = [];\r\n        $object.each(plotContainer._downPoints, (k, point) => {\r\n            downPoints[i] = point;\r\n            let movePoint = this._movePoints[k];\r\n            if (movePoint) {\r\n                movePoints[i] = movePoint;\r\n            }\r\n            i++;\r\n        });\r\n        if (downPoints.length > 1 && movePoints.length > 1) {\r\n            const w = plotContainer.width();\r\n            const h = plotContainer.height();\r\n            let downPoint0 = downPoints[0];\r\n            let downPoint1 = downPoints[1];\r\n            let movePoint0 = movePoints[0];\r\n            let movePoint1 = movePoints[1];\r\n            if (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\r\n                movePoint0 = plotContainer.toLocal(movePoint0);\r\n                movePoint1 = plotContainer.toLocal(movePoint1);\r\n                downPoint0 = plotContainer.toLocal(downPoint0);\r\n                downPoint1 = plotContainer.toLocal(downPoint1);\r\n                if (this.get(\"pinchZoomX\")) {\r\n                    const downStartX = this._downStartX;\r\n                    const downEndX = this._downEndX;\r\n                    if (downStartX != null && downEndX != null) {\r\n                        if (downPoint0.x > downPoint1.x) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartX + (downPoint0.x / w) * (downEndX - downStartX);\r\n                        let downPos1 = downStartX + (downPoint1.x / w) * (downEndX - downStartX);\r\n                        let movePos0 = downStartX + (movePoint0.x / w) * (downEndX - downStartX);\r\n                        let movePos1 = downStartX + (movePoint1.x / w) * (downEndX - downStartX);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartX * d + downPos0 - movePos0 * d;\r\n                        let e = downEndX * d + downPos1 - movePos1 * d;\r\n                        this.xAxes.each((xAxis) => {\r\n                            let sa = xAxis.fixPosition(s);\r\n                            let ea = xAxis.fixPosition(e);\r\n                            xAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n                if (this.get(\"pinchZoomY\")) {\r\n                    const downStartY = this._downStartY;\r\n                    const downEndY = this._downEndY;\r\n                    if (downStartY != null && downEndY != null) {\r\n                        if (downPoint0.y < downPoint1.y) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\r\n                        let downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\r\n                        let movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\r\n                        let movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartY * d + downPos0 - movePos0 * d;\r\n                        let e = downEndY * d + downPos1 - movePos1 * d;\r\n                        this.yAxes.each((yAxis) => {\r\n                            let sa = yAxis.fixPosition(s);\r\n                            let ea = yAxis.fixPosition(e);\r\n                            yAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleCursorPosition() {\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const cursorPoint = cursor.getPrivate(\"point\");\r\n            let snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (cursor._downPoint) {\r\n                snapToSeries = undefined;\r\n            }\r\n            if (snapToSeries && cursorPoint) {\r\n                const snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\r\n                const dataItems = [];\r\n                $array.each(snapToSeries, (series) => {\r\n                    if (!series.isHidden() && !series.isHiding()) {\r\n                        if (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\r\n                            const startIndex = series.startIndex();\r\n                            const endIndex = series.endIndex();\r\n                            for (let i = startIndex; i < endIndex; i++) {\r\n                                const dataItem = series.dataItems[i];\r\n                                if (dataItem && !dataItem.isHidden()) {\r\n                                    dataItems.push(dataItem);\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            const tooltipDataItem = series.get(\"tooltipDataItem\");\r\n                            if (tooltipDataItem) {\r\n                                dataItems.push(tooltipDataItem);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                let minDistance = Infinity;\r\n                let closestItem;\r\n                $array.each(dataItems, (dataItem) => {\r\n                    const point = dataItem.get(\"point\");\r\n                    if (point) {\r\n                        let distance = 0;\r\n                        if (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\r\n                            distance = Math.abs(cursorPoint.x - point.x);\r\n                        }\r\n                        else if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\r\n                            distance = Math.abs(cursorPoint.y - point.y);\r\n                        }\r\n                        else {\r\n                            distance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\r\n                        }\r\n                        if (distance < minDistance) {\r\n                            minDistance = distance;\r\n                            closestItem = dataItem;\r\n                        }\r\n                    }\r\n                });\r\n                $array.each(snapToSeries, (series) => {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        tooltip._setDataItem(undefined);\r\n                    }\r\n                });\r\n                if (closestItem) {\r\n                    let series = closestItem.component;\r\n                    series.showDataItemTooltip(closestItem);\r\n                    series.setRaw(\"tooltipDataItem\", closestItem);\r\n                    const point = closestItem.get(\"point\");\r\n                    if (point) {\r\n                        // removing x and y to solve #72225\r\n                        cursor.handleMove(series.toGlobal({ x: point.x - series.x(), y: point.y - series.y() }), true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateCursor() {\r\n        let cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.updateCursor();\r\n        }\r\n    }\r\n    _addCursor(cursor) {\r\n        this.plotContainer.children.push(cursor);\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this.series.each((series) => {\r\n            this._colorize(series);\r\n        });\r\n        if (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\r\n            this._handleSetWheel();\r\n        }\r\n        if (this.isDirty(\"cursor\")) {\r\n            const previous = this._prevSettings.cursor;\r\n            const cursor = this.get(\"cursor\");\r\n            if (cursor !== previous) {\r\n                this._disposeProperty(\"cursor\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (cursor) {\r\n                    cursor._setChart(this);\r\n                    this._addCursor(cursor);\r\n                    this._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\r\n                        this._handleCursorSelectEnd();\r\n                    }));\r\n                }\r\n                //this.setRaw(\"cursor\", cursor) // to reset previous value\r\n                this._prevSettings.cursor = cursor;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarX\")) {\r\n            const previous = this._prevSettings.scrollbarX;\r\n            const scrollbarX = this.get(\"scrollbarX\");\r\n            if (scrollbarX !== previous) {\r\n                this._disposeProperty(\"scrollbarX\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarX) {\r\n                    if (!scrollbarX.parent) {\r\n                        this.topAxesContainer.children.push(scrollbarX);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\r\n                        this.xAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarX.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.xAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarX = scrollbarX;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarY\")) {\r\n            const previous = this._prevSettings.scrollbarY;\r\n            const scrollbarY = this.get(\"scrollbarY\");\r\n            if (scrollbarY !== previous) {\r\n                this._disposeProperty(\"scrollbarY\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarY) {\r\n                    if (!scrollbarY.parent) {\r\n                        this.rightAxesContainer.children.push(scrollbarY);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\r\n                        this.yAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarY.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.yAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarY = scrollbarY;\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _processSeries(series) {\r\n        super._processSeries(series);\r\n        const xAxis = series.get(\"xAxis\");\r\n        const yAxis = series.get(\"yAxis\");\r\n        $array.move(xAxis.series, series);\r\n        $array.move(yAxis.series, series);\r\n        series._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        series._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        if (!series.get(\"baseAxis\")) {\r\n            if (yAxis.isType(\"CategoryAxis\") || yAxis.isType(\"DateAxis\")) {\r\n                series.set(\"baseAxis\", yAxis);\r\n            }\r\n            else {\r\n                series.set(\"baseAxis\", xAxis);\r\n            }\r\n        }\r\n        if (series.get(\"stacked\")) {\r\n            series._markDirtyKey(\"stacked\");\r\n            $array.each(series.dataItems, (dataItem) => {\r\n                dataItem.set(\"stackToItemY\", undefined);\r\n                dataItem.set(\"stackToItemX\", undefined);\r\n            });\r\n        }\r\n        series._markDirtyAxes();\r\n        yAxis.markDirtyExtremes();\r\n        xAxis.markDirtyExtremes();\r\n        xAxis._seriesAdded = true;\r\n        yAxis._seriesAdded = true;\r\n        this._colorize(series);\r\n    }\r\n    _colorize(series) {\r\n        const colorSet = this.get(\"colors\");\r\n        if (colorSet) {\r\n            if (series.get(\"fill\") == null) {\r\n                const color = colorSet.next();\r\n                series._setSoft(\"stroke\", color);\r\n                series._setSoft(\"fill\", color);\r\n            }\r\n        }\r\n        const patternSet = this.get(\"patterns\");\r\n        if (patternSet) {\r\n            if (series.get(\"fillPattern\") == null) {\r\n                const pattern = patternSet.next();\r\n                series._setSoft(\"fillPattern\", pattern);\r\n            }\r\n        }\r\n    }\r\n    _handleCursorSelectEnd() {\r\n        const cursor = this.get(\"cursor\");\r\n        const behavior = cursor.get(\"behavior\");\r\n        const downPositionX = cursor.getPrivate(\"downPositionX\", 0);\r\n        const downPositionY = cursor.getPrivate(\"downPositionY\", 0);\r\n        const positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\r\n        const positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\r\n        this.xAxes.each((axis) => {\r\n            if (behavior === \"zoomX\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionX);\r\n                let position1 = axis.toAxisPosition(positionX);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            if (behavior === \"zoomY\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionY);\r\n                let position1 = axis.toAxisPosition(positionY);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n    }\r\n    _handleScrollbar(axes, start, end, priority) {\r\n        axes.each((axis) => {\r\n            let axisStart = axis.fixPosition(start);\r\n            let axisEnd = axis.fixPosition(end);\r\n            let zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\r\n            const updateScrollbar = \"updateScrollbar\";\r\n            axis.setPrivateRaw(updateScrollbar, false);\r\n            if (zoomAnimation) {\r\n                zoomAnimation.events.on(\"stopped\", () => {\r\n                    axis.setPrivateRaw(updateScrollbar, true);\r\n                });\r\n            }\r\n            else {\r\n                axis.setPrivateRaw(updateScrollbar, true);\r\n            }\r\n        });\r\n    }\r\n    _processAxis(axes, container) {\r\n        return axes.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (axis) => {\r\n                    this._removeAxis(axis);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                container.children.push(change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                container.children.setIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                container.children.insertIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeAxis(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                container.children.moveValue(change.value, change.newIndex);\r\n                change.value.processChart(this);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _removeAxis(axis) {\r\n        if (!axis.isDisposed()) {\r\n            const axisParent = axis.parent;\r\n            if (axisParent) {\r\n                axisParent.children.removeValue(axis);\r\n            }\r\n            const gridContainer = axis.gridContainer;\r\n            const gridParent = gridContainer.parent;\r\n            if (gridParent) {\r\n                gridParent.children.removeValue(gridContainer);\r\n            }\r\n            const topGridContainer = axis.topGridContainer;\r\n            const topGridParent = topGridContainer.parent;\r\n            if (topGridParent) {\r\n                topGridParent.children.removeValue(topGridContainer);\r\n            }\r\n        }\r\n    }\r\n    _updateChartLayout() {\r\n        const left = this.leftAxesContainer.width();\r\n        const right = this.rightAxesContainer.width();\r\n        const bottomAxesContainer = this.bottomAxesContainer;\r\n        bottomAxesContainer.set(\"paddingLeft\", left);\r\n        bottomAxesContainer.set(\"paddingRight\", right);\r\n        const topAxesContainer = this.topAxesContainer;\r\n        topAxesContainer.set(\"paddingLeft\", left);\r\n        topAxesContainer.set(\"paddingRight\", right);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis(axis) {\r\n        var cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            this.addDisposer(axis.on(\"start\", () => {\r\n                this._updateCursor();\r\n            }));\r\n            this.addDisposer(axis.on(\"end\", () => {\r\n                this._updateCursor();\r\n            }));\r\n        }\r\n    }\r\n    _handleAxisSelection(axis, force) {\r\n        let start = axis.fixPosition(axis.get(\"start\", 0));\r\n        let end = axis.fixPosition(axis.get(\"end\", 1));\r\n        if (start > end) {\r\n            [start, end] = [end, start];\r\n        }\r\n        if (this.xAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarX.setRaw(\"start\", start);\r\n                    scrollbarX.setRaw(\"end\", end);\r\n                    scrollbarX.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        else if (this.yAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarY.setRaw(\"start\", start);\r\n                    scrollbarY.setRaw(\"end\", end);\r\n                    scrollbarY.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _handleZoomOut() {\r\n        let zoomOutButton = this.zoomOutButton;\r\n        if (zoomOutButton && zoomOutButton.parent) {\r\n            let visible = false;\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomOut\", true)) {\r\n                    if ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\r\n                        visible = true;\r\n                    }\r\n                }\r\n            });\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomOut\", true)) {\r\n                    if ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\r\n                        visible = true;\r\n                    }\r\n                }\r\n            });\r\n            if (visible) {\r\n                if (zoomOutButton.isHidden()) {\r\n                    zoomOutButton.show();\r\n                }\r\n            }\r\n            else {\r\n                zoomOutButton.hide();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks if point is within plot area.\r\n     *\r\n     * @param   point  Reference point\r\n     * @return         Is within plot area?\r\n     */\r\n    inPlot(point) {\r\n        const plotContainer = this.plotContainer;\r\n        const otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\r\n        const global = plotContainer.toGlobal(point);\r\n        if (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\r\n            return true;\r\n        }\r\n        if (otherCharts) {\r\n            for (let i = otherCharts.length - 1; i >= 0; i--) {\r\n                const chart = otherCharts[i];\r\n                if (chart != this) {\r\n                    const chartPlotContainer = chart.plotContainer;\r\n                    const documentPoint = this._root.rootPointToDocument(global);\r\n                    const chartRoot = chart._root.documentPointToRoot(documentPoint);\r\n                    const local = chartPlotContainer.toLocal(chartRoot);\r\n                    if (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    arrangeTooltips() {\r\n        const plotContainer = this.plotContainer;\r\n        const w = plotContainer.width();\r\n        const h = plotContainer.height();\r\n        let hh = this.height();\r\n        const bounds = this._root.tooltipContainer.get(\"layerMargin\");\r\n        if (bounds) {\r\n            if (bounds.bottom > hh) {\r\n                hh = bounds.bottom;\r\n            }\r\n        }\r\n        let plotT = plotContainer._display.toGlobal({ x: 0, y: 0 });\r\n        let plotB = plotContainer._display.toGlobal({ x: w, y: h });\r\n        const tooltips = [];\r\n        let sum = 0;\r\n        let minDistance = Infinity;\r\n        let movePoint = this._movePoint;\r\n        let maxTooltipDistance = this.get(\"maxTooltipDistance\");\r\n        let maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\r\n        let closest;\r\n        let closestPoint;\r\n        if ($type.isNumber(maxTooltipDistance)) {\r\n            this.series.each((series) => {\r\n                if (!series.isHidden()) {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point) {\r\n                            let distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\r\n                            if (maxTooltipDistanceBy == \"x\") {\r\n                                distance = Math.abs(movePoint.x - point.x);\r\n                            }\r\n                            else if (maxTooltipDistanceBy == \"y\") {\r\n                                distance = Math.abs(movePoint.y - point.y);\r\n                            }\r\n                            if (distance < minDistance) {\r\n                                minDistance = distance;\r\n                                closest = series;\r\n                                closestPoint = point;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const tooltipSeries = [];\r\n        this.series.each((series) => {\r\n            const tooltip = series.get(\"tooltip\");\r\n            if (tooltip && !tooltip.get(\"forceHidden\")) {\r\n                let hidden = false;\r\n                let point = tooltip.get(\"pointTo\");\r\n                if (point) {\r\n                    if (maxTooltipDistance >= 0) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point && closestPoint) {\r\n                            if (series != closest) {\r\n                                let distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\r\n                                if (maxTooltipDistanceBy == \"x\") {\r\n                                    distance = Math.abs(closestPoint.x - point.x);\r\n                                }\r\n                                else if (maxTooltipDistanceBy == \"y\") {\r\n                                    distance = Math.abs(closestPoint.y - point.y);\r\n                                }\r\n                                if (distance > maxTooltipDistance) {\r\n                                    hidden = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (maxTooltipDistance == -1) {\r\n                        if (series != closest) {\r\n                            hidden = true;\r\n                        }\r\n                    }\r\n                    if (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\r\n                        hidden = true;\r\n                    }\r\n                    else {\r\n                        if (!hidden) {\r\n                            sum += point.y;\r\n                        }\r\n                    }\r\n                    if (hidden || series.isHidden() || series.isHiding()) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show();\r\n                        tooltips.push(tooltip);\r\n                        tooltipSeries.push(series);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.setPrivate(\"tooltipSeries\", tooltipSeries);\r\n        if (this.get(\"arrangeTooltips\")) {\r\n            let totalTooltipH = 0;\r\n            let tooltipCount = 0;\r\n            const tooltipContainer = this._root.tooltipContainer;\r\n            const count = tooltips.length;\r\n            const average = sum / count;\r\n            if (average > h / 2 + plotT.y) {\r\n                tooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\").y, a.get(\"pointTo\").y));\r\n                let prevY = plotB.y;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    let height = tooltip.height();\r\n                    tooltipCount++;\r\n                    totalTooltipH += height;\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    tooltip.setPrivate(\"customData\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    prevY = Math.min(prevY - height, tooltip._fy - height);\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                });\r\n                if (prevY < 0) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = prevY;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        tooltipCount++;\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - prevY;\r\n                            let bottom = bounds.bottom - prevY;\r\n                            if (top < prevBottom) {\r\n                                top = prevBottom;\r\n                                bottom = top + tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                tooltips.reverse();\r\n                tooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\").y, b.get(\"pointTo\").y));\r\n                let prevY = 0;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    tooltipCount++;\r\n                    let height = tooltip.height();\r\n                    totalTooltipH += height;\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: prevY, right: plotB.x, bottom: Math.max(plotT.y + hh, prevY + height) });\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                    prevY = Math.max(prevY + height, tooltip._fy + height);\r\n                });\r\n                if (prevY > hh) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = hh;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        tooltipCount++;\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - (hh - prevY);\r\n                            let bottom = bounds.bottom - (hh - prevY);\r\n                            if (bottom > prevBottom) {\r\n                                bottom = prevBottom;\r\n                                top = bottom - tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (totalTooltipH == 0 && tooltipCount > 0) {\r\n                this._disposers.push(this.root.events.once(\"frameended\", () => {\r\n                    this.arrangeTooltips();\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    _tooltipToLocal(point) {\r\n        return this.plotContainer.toLocal(point);\r\n    }\r\n    /**\r\n     * Fully zooms out the chart.\r\n     */\r\n    zoomOut() {\r\n        this.xAxes.each((axis) => {\r\n            if (axis.get(\"zoomOut\", true)) {\r\n                axis.setPrivate(\"updateScrollbar\", true);\r\n                axis.zoom(0, 1);\r\n            }\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            if (axis.get(\"zoomOut\", true)) {\r\n                axis.setPrivate(\"updateScrollbar\", true);\r\n                axis.zoom(0, 1);\r\n            }\r\n        });\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        // Explicitly disposing cursor to avoid memory leak of cursor adding\r\n        // keyboard events after parent chart has been disposed\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.dispose();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(XYChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYChart\"\r\n});\r\nObject.defineProperty(XYChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: SerialChart.classNames.concat([XYChart.className])\r\n});\r\n//# sourceMappingURL=XYChart.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\n/**\r\n * Creates an axis grid line.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Grid} for more info\r\n * @important\r\n */\r\nexport class Grid extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Grid, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Grid\"\r\n});\r\nObject.defineProperty(Grid, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Grid.className])\r\n});\r\n//# sourceMappingURL=Grid.js.map","import { Container } from \"../../core/render/Container\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Grid } from \"./axes/Grid\";\r\n//import { Animations } from \"../core/util/Animation\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $object from \"../../core/util/Object\";\r\n/**\r\n * Creates a chart cursor for an [[XYChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\r\n * @important\r\n */\r\nexport class XYCursor extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_alwaysShow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n         *\r\n         * @default Grid.new()\r\n         */\r\n        Object.defineProperty(this, \"lineX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Grid.new(this._root, {\r\n                themeTags: [\"x\"]\r\n            }))\r\n        });\r\n        /**\r\n         * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n         *\r\n         * @default Grid.new()\r\n         */\r\n        Object.defineProperty(this, \"lineY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Grid.new(this._root, {\r\n                themeTags: [\"y\"]\r\n            }))\r\n        });\r\n        /**\r\n         * An element that represents current selection.\r\n         *\r\n         * @default Graphics.new()\r\n         */\r\n        Object.defineProperty(this, \"selection\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, {\r\n                themeTags: [\"selection\", \"cursor\"], layer: 30\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_movePoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_lastPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_lastPoint2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_tooltipX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_tooltipY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A chart cursor is attached to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"xy\", \"cursor\"]);\r\n        super._afterNew();\r\n        this.setAll({ \"width\": p100, height: p100, isMeasured: true, position: \"absolute\" });\r\n        this.states.create(\"hidden\", { visible: true, opacity: 0 });\r\n        this._drawLines();\r\n        this.setPrivateRaw(\"visible\", false);\r\n        this._disposers.push(this.setTimeout(() => {\r\n            this.setPrivate(\"visible\", true);\r\n        }, 500));\r\n        this._disposers.push(this.lineX.events.on(\"positionchanged\", () => {\r\n            this._handleXLine();\r\n        }));\r\n        this._disposers.push(this.lineY.events.on(\"positionchanged\", () => {\r\n            this._handleYLine();\r\n        }));\r\n        this._disposers.push(this.lineX.events.on(\"focus\", () => this._handleLineFocus()));\r\n        this._disposers.push(this.lineX.events.on(\"blur\", () => this._handleLineBlur()));\r\n        this._disposers.push(this.lineY.events.on(\"focus\", () => this._handleLineFocus()));\r\n        this._disposers.push(this.lineY.events.on(\"blur\", () => this._handleLineBlur()));\r\n        if ($utils.supports(\"keyboardevents\")) {\r\n            this._disposers.push($utils.addEventListener(document, \"keydown\", (ev) => {\r\n                this._handleLineMove($utils.getEventKey(ev), ev.ctrlKey);\r\n            }));\r\n        }\r\n    }\r\n    _setUpTouch() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart.plotContainer._display.cancelTouch = this.get(\"behavior\") != \"none\" ? true : false;\r\n        }\r\n    }\r\n    _handleXLine() {\r\n        let x = this.lineX.x();\r\n        let visible = true;\r\n        if (x < 0 || x > this.width()) {\r\n            visible = false;\r\n        }\r\n        this.lineX.setPrivate(\"visible\", visible);\r\n    }\r\n    _handleYLine() {\r\n        let y = this.lineY.y();\r\n        let visible = true;\r\n        if (y < 0 || y > this.height()) {\r\n            visible = false;\r\n        }\r\n        this.lineY.setPrivate(\"visible\", visible);\r\n    }\r\n    _handleLineMove(key, ctrlKey) {\r\n        let dir = \"\";\r\n        const chart = this.chart;\r\n        let axis;\r\n        if (chart && chart.xAxes.length) {\r\n            if (this._root.focused(this.lineX)) {\r\n                dir = \"positionX\";\r\n                axis = chart.xAxes.getIndex(0);\r\n            }\r\n            else if (this._root.focused(this.lineY)) {\r\n                axis = chart.yAxes.getIndex(0);\r\n                dir = \"positionY\";\r\n            }\r\n            let m = 1;\r\n            if (ctrlKey) {\r\n                m = 5;\r\n            }\r\n            if (axis) {\r\n                let inversed = axis.get(\"renderer\").get(\"inversed\", false);\r\n                let step;\r\n                if (key == \"ArrowRight\" || key == \"ArrowDown\") {\r\n                    step = 1;\r\n                }\r\n                else if (key == \"ArrowLeft\" || key == \"ArrowUp\") {\r\n                    step = -1;\r\n                }\r\n                else if (key == \"Tab\") {\r\n                    step = 0;\r\n                }\r\n                if (step != null) {\r\n                    if (inversed) {\r\n                        step *= -1;\r\n                    }\r\n                    this.set(dir, axis.nextPosition(step * m));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleLineFocus() {\r\n        this._alwaysShow = this.get(\"alwaysShow\", false);\r\n        this.setAll({\r\n            positionX: this.getPrivate(\"positionX\", 0),\r\n            positionY: this.getPrivate(\"positionY\", 0),\r\n            alwaysShow: true\r\n        });\r\n        this._handleLineMove(\"Tab\");\r\n    }\r\n    _handleLineBlur() {\r\n        if (this.lineX.isFocus() || this.lineY.isFocus()) {\r\n            this.setAll({\r\n                positionX: undefined,\r\n                positionY: undefined,\r\n                alwaysShow: this._alwaysShow\r\n            });\r\n        }\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"xAxis\")) {\r\n            this._tooltipX = false;\r\n            const xAxis = this.get(\"xAxis\");\r\n            if (xAxis) {\r\n                const tooltip = xAxis.get(\"tooltip\");\r\n                if (tooltip) {\r\n                    this._tooltipX = true;\r\n                    this._disposers.push(tooltip.on(\"pointTo\", () => {\r\n                        this._updateXLine(tooltip);\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"yAxis\")) {\r\n            this._tooltipY = false;\r\n            const yAxis = this.get(\"yAxis\");\r\n            if (yAxis) {\r\n                const tooltip = yAxis.get(\"tooltip\");\r\n                if (tooltip) {\r\n                    this._tooltipY = true;\r\n                    this._disposers.push(tooltip.on(\"pointTo\", () => {\r\n                        this._updateYLine(tooltip);\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleSyncWith() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            const syncWith = this.get(\"syncWith\");\r\n            const otherCharts = [];\r\n            if (syncWith) {\r\n                $array.each(syncWith, (cursor) => {\r\n                    const chart = cursor.chart;\r\n                    if (chart) {\r\n                        otherCharts.push(chart);\r\n                    }\r\n                });\r\n            }\r\n            chart._otherCharts = otherCharts;\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        this._handleSyncWith();\r\n        if (this.isDirty(\"positionX\") || this.isDirty(\"positionY\")) {\r\n            const positionX = this.get(\"positionX\");\r\n            const positionY = this.get(\"positionY\");\r\n            if (positionX == null && positionY == null) {\r\n                this.hide(0);\r\n            }\r\n            else {\r\n                this._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\r\n                this.handleMove();\r\n            }\r\n        }\r\n    }\r\n    _updateXLine(tooltip) {\r\n        let x = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).x, 3);\r\n        if (this._toX != x) {\r\n            this.lineX.animate({ key: \"x\", to: x, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\r\n            this._toX = x;\r\n        }\r\n    }\r\n    _updateYLine(tooltip) {\r\n        let y = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).y, 3);\r\n        if (this._toY != y) {\r\n            this.lineY.animate({ key: \"y\", to: y, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\r\n            this._toY = y;\r\n        }\r\n    }\r\n    _drawLines() {\r\n        this.lineX.set(\"draw\", (display) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, this.height());\r\n        });\r\n        this.lineY.set(\"draw\", (display) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(this.width(), 0);\r\n        });\r\n    }\r\n    updateCursor() {\r\n        if (this.get(\"alwaysShow\")) {\r\n            this._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\r\n        }\r\n        this.handleMove();\r\n    }\r\n    _setChart(chart) {\r\n        this.chart = chart;\r\n        this._handleSyncWith();\r\n        const plotContainer = chart.plotContainer;\r\n        this.events.on(\"boundschanged\", () => {\r\n            this._disposers.push(this.setTimeout(() => {\r\n                this.updateCursor();\r\n            }, 50));\r\n        });\r\n        //this._display.interactive = true;\r\n        if ($utils.supports(\"touchevents\")) {\r\n            this._disposers.push(plotContainer.events.on(\"click\", (event) => {\r\n                if ($utils.isTouchEvent(event.originalEvent)) {\r\n                    this._handleMove(event);\r\n                }\r\n            }));\r\n            this._setUpTouch();\r\n        }\r\n        this._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\r\n            this._handleCursorDown(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\r\n            this._handleCursorUp(event);\r\n            if (!event.native && !this.isHidden()) {\r\n                this._handleMove(event);\r\n            }\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\r\n            if (!this.get(\"syncWith\")) {\r\n                if ($object.keys(plotContainer._downPoints).length == 0 && !event.native && this.isHidden()) {\r\n                    // Ignore mouse movement if it originates on outside element and\r\n                    // we're not dragging.\r\n                    return;\r\n                }\r\n            }\r\n            this._handleMove(event);\r\n            if (Math.hypot(this._lastPoint2.x - event.point.x, this._lastPoint2.y - event.point.y) > 1) {\r\n                this._handleLineBlur();\r\n                this._lastPoint2 = event.point;\r\n            }\r\n        }));\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this.selection);\r\n        }\r\n    }\r\n    _inPlot(point) {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            return chart.inPlot(point);\r\n        }\r\n        return false;\r\n    }\r\n    _handleCursorDown(event) {\r\n        if (event.originalEvent.button == 2) {\r\n            return;\r\n        }\r\n        const rootPoint = event.point;\r\n        let local = this._display.toLocal(rootPoint);\r\n        const chart = this.chart;\r\n        this.selection.set(\"draw\", () => { });\r\n        if (chart && this._inPlot(local)) {\r\n            this._downPoint = local;\r\n            if (this.get(\"behavior\") != \"none\") {\r\n                this.selection.show();\r\n                const type = \"selectstarted\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n            let positionX = this._getPosition(local).x;\r\n            let positionY = this._getPosition(local).y;\r\n            this.setPrivate(\"downPositionX\", positionX);\r\n            this.setPrivate(\"downPositionY\", positionY);\r\n        }\r\n    }\r\n    _handleCursorUp(event) {\r\n        // TODO: handle multitouch\r\n        if (this._downPoint) {\r\n            const behavior = this.get(\"behavior\", \"none\");\r\n            if (behavior != \"none\") {\r\n                if (behavior.charAt(0) === \"z\") {\r\n                    this.selection.hide();\r\n                }\r\n                const rootPoint = event.point;\r\n                let local = this._display.toLocal(rootPoint);\r\n                const downPoint = this._downPoint;\r\n                const moveThreshold = this.get(\"moveThreshold\", 1);\r\n                if (local && downPoint) {\r\n                    let dispatch = false;\r\n                    if (behavior === \"zoomX\" || behavior === \"zoomXY\" || behavior === \"selectX\" || behavior === \"selectXY\") {\r\n                        if (Math.abs(local.x - downPoint.x) > moveThreshold) {\r\n                            dispatch = true;\r\n                        }\r\n                    }\r\n                    if (behavior === \"zoomY\" || behavior === \"zoomXY\" || behavior === \"selectY\" || behavior === \"selectXY\") {\r\n                        if (Math.abs(local.y - downPoint.y) > moveThreshold) {\r\n                            dispatch = true;\r\n                        }\r\n                    }\r\n                    if (dispatch) {\r\n                        const type = \"selectended\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                        }\r\n                    }\r\n                    else {\r\n                        const type = \"selectcancelled\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._downPoint = undefined;\r\n    }\r\n    _handleMove(event) {\r\n        if (this.getPrivate(\"visible\")) {\r\n            const chart = this.chart;\r\n            if (chart && $object.keys(chart.plotContainer._downPoints).length > 1) {\r\n                this.set(\"forceHidden\", true);\r\n                return;\r\n            }\r\n            else {\r\n                this.set(\"forceHidden\", false);\r\n            }\r\n            // TODO: handle multitouch\r\n            const rootPoint = event.point;\r\n            const lastPoint = this._lastPoint;\r\n            if (Math.round(lastPoint.x) === Math.round(rootPoint.x) && Math.round(lastPoint.y) === Math.round(rootPoint.y)) {\r\n                return;\r\n            }\r\n            this._lastPoint = rootPoint;\r\n            this.setPrivate(\"lastPoint\", rootPoint);\r\n            this.handleMove({ x: rootPoint.x, y: rootPoint.y }, false, event.originalEvent);\r\n        }\r\n    }\r\n    _getPosition(point) {\r\n        return { x: point.x / this.width(), y: point.y / this.height() };\r\n    }\r\n    /**\r\n     * Moves the cursor to X/Y coordinates within chart container (`point`).\r\n     *\r\n     * If `skipEvent` parameter is set to `true`, the move will not invoke\r\n     * the `\"cursormoved\"` event.\r\n     *\r\n     * @param  point      X/Y to move cursor to\r\n     * @param  skipEvent  Do not fire \"cursormoved\" event\r\n     */\r\n    handleMove(point, skipEvent, originalEvent) {\r\n        if (!point) {\r\n            point = this._movePoint;\r\n        }\r\n        const alwaysShow = this.get(\"alwaysShow\");\r\n        if (!point) {\r\n            this.hide(0);\r\n            return;\r\n        }\r\n        this._movePoint = point;\r\n        let local = this._display.toLocal(point);\r\n        let chart = this.chart;\r\n        if (chart && (this._inPlot(local) || this._downPoint)) {\r\n            chart._movePoint = point;\r\n            if (this.isHidden()) {\r\n                this.show();\r\n                const behavior = this.get(\"behavior\", \"\");\r\n                if (behavior.charAt(0) == \"z\") {\r\n                    this.selection.set(\"draw\", () => { });\r\n                }\r\n            }\r\n            let x = local.x;\r\n            let y = local.y;\r\n            let xyPos = this._getPosition(local);\r\n            this.setPrivate(\"point\", local);\r\n            let snapToSeries = this.get(\"snapToSeries\");\r\n            if (this._downPoint) {\r\n                snapToSeries = undefined;\r\n            }\r\n            let userPositionX = this.get(\"positionX\");\r\n            let positionX = xyPos.x;\r\n            if ($type.isNumber(userPositionX)) {\r\n                positionX = userPositionX;\r\n            }\r\n            let userPositionY = this.get(\"positionY\");\r\n            let positionY = xyPos.y;\r\n            if ($type.isNumber(userPositionY)) {\r\n                positionY = userPositionY;\r\n            }\r\n            this.setPrivate(\"positionX\", positionX);\r\n            this.setPrivate(\"positionY\", positionY);\r\n            const xy = this._getPoint(positionX, positionY);\r\n            x = xy.x;\r\n            y = xy.y;\r\n            chart.xAxes.each((axis) => {\r\n                axis._handleCursorPosition(positionX, snapToSeries);\r\n                if (alwaysShow) {\r\n                    axis.handleCursorShow();\r\n                }\r\n            });\r\n            chart.yAxes.each((axis) => {\r\n                axis._handleCursorPosition(positionY, snapToSeries);\r\n                if (alwaysShow) {\r\n                    axis.handleCursorShow();\r\n                }\r\n            });\r\n            if (!skipEvent) {\r\n                chart._handleCursorPosition();\r\n                const type = \"cursormoved\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this, point: point, originalEvent: originalEvent });\r\n                }\r\n            }\r\n            this._updateLines(x, y);\r\n            chart.arrangeTooltips();\r\n        }\r\n        else if (!this._downPoint) {\r\n            if (!alwaysShow) {\r\n                this.hide(0);\r\n                const type = \"cursorhidden\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this });\r\n                }\r\n            }\r\n        }\r\n        if (this._downPoint && this.get(\"behavior\") != \"none\") {\r\n            this._updateSelection(local);\r\n        }\r\n    }\r\n    _getPoint(positionX, positionY) {\r\n        return { x: this.width() * positionX, y: this.height() * positionY };\r\n    }\r\n    _updateLines(x, y) {\r\n        if (!this._tooltipX) {\r\n            this.lineX.set(\"x\", x);\r\n        }\r\n        if (!this._tooltipY) {\r\n            this.lineY.set(\"y\", y);\r\n        }\r\n        this._drawLines();\r\n    }\r\n    _updateSelection(point) {\r\n        const selection = this.selection;\r\n        const behavior = this.get(\"behavior\");\r\n        const w = this.width();\r\n        const h = this.height();\r\n        if (point.x < 0) {\r\n            point.x = 0;\r\n        }\r\n        if (point.x > w) {\r\n            point.x = w;\r\n        }\r\n        if (point.y < 0) {\r\n            point.y = 0;\r\n        }\r\n        if (point.y > h) {\r\n            point.y = h;\r\n        }\r\n        selection.set(\"draw\", (display) => {\r\n            const downPoint = this._downPoint;\r\n            if (downPoint) {\r\n                if (behavior === \"zoomXY\" || behavior === \"selectXY\") {\r\n                    display.moveTo(downPoint.x, downPoint.y);\r\n                    display.lineTo(downPoint.x, point.y);\r\n                    display.lineTo(point.x, point.y);\r\n                    display.lineTo(point.x, downPoint.y);\r\n                    display.lineTo(downPoint.x, downPoint.y);\r\n                }\r\n                else if (behavior === \"zoomX\" || behavior === \"selectX\") {\r\n                    display.moveTo(downPoint.x, 0);\r\n                    display.lineTo(downPoint.x, h);\r\n                    display.lineTo(point.x, h);\r\n                    display.lineTo(point.x, 0);\r\n                    display.lineTo(downPoint.x, 0);\r\n                }\r\n                else if (behavior === \"zoomY\" || behavior === \"selectY\") {\r\n                    display.moveTo(0, downPoint.y);\r\n                    display.lineTo(w, downPoint.y);\r\n                    display.lineTo(w, point.y);\r\n                    display.lineTo(0, point.y);\r\n                    display.lineTo(0, downPoint.y);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _onHide() {\r\n        if (this.isHidden()) {\r\n            let chart = this.chart;\r\n            if (chart) {\r\n                chart.xAxes.each((axis) => {\r\n                    axis.handleCursorHide();\r\n                });\r\n                chart.yAxes.each((axis) => {\r\n                    axis.handleCursorHide();\r\n                });\r\n                chart.series.each((series) => {\r\n                    series.handleCursorHide();\r\n                });\r\n            }\r\n        }\r\n        super._onHide();\r\n    }\r\n    _onShow() {\r\n        if (!this.isHidden()) {\r\n            let chart = this.chart;\r\n            if (chart) {\r\n                chart.xAxes.each((axis) => {\r\n                    axis.handleCursorShow();\r\n                });\r\n                chart.yAxes.each((axis) => {\r\n                    axis.handleCursorShow();\r\n                });\r\n            }\r\n        }\r\n        super._onShow();\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this.selection.dispose();\r\n    }\r\n}\r\nObject.defineProperty(XYCursor, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYCursor\"\r\n});\r\nObject.defineProperty(XYCursor, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([XYCursor.className])\r\n});\r\n//# sourceMappingURL=XYCursor.js.map","import { __awaiter } from \"tslib\";\r\nimport { DataItem } from \"../../../core/render/Component\";\r\nimport { Series } from \"../../../core/render/Series\";\r\nimport { List } from \"../../../core/util/List\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $object from \"../../../core/util/Object\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * @ignore\r\n */\r\nfunction min(left, right) {\r\n    if (left == null) {\r\n        return right;\r\n    }\r\n    else if (right == null) {\r\n        return left;\r\n    }\r\n    else if (right < left) {\r\n        return right;\r\n    }\r\n    else {\r\n        return left;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction max(left, right) {\r\n    if (left == null) {\r\n        return right;\r\n    }\r\n    else if (right == null) {\r\n        return left;\r\n    }\r\n    else if (right > left) {\r\n        return right;\r\n    }\r\n    else {\r\n        return left;\r\n    }\r\n}\r\n/**\r\n * A base class for all XY chart series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/} for more info\r\n */\r\nexport class XYSeries extends Series {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_xField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xOpenField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yOpenField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xLowField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xHighField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yLowField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yHighField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_axesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_stackDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_selectionProcessed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataSets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_mainContainerMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * A [[Container]] that us used to put series' elements in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"mainContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A list of axis ranges that affect the series.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n         */\r\n        Object.defineProperty(this, \"axisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        Object.defineProperty(this, \"_skipped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_couldStackTo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_reallyStackedTo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_stackedSeries\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_aLocationX0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_aLocationX1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_aLocationY0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_aLocationY1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_showBullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"valueXFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"valueX\",\r\n                \"openValueX\",\r\n                \"lowValueX\",\r\n                \"highValueX\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"valueYFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"valueY\",\r\n                \"openValueY\",\r\n                \"lowValueY\",\r\n                \"highValueY\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"_valueXFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueYFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // used for full min/max\r\n        Object.defineProperty(this, \"_valueXShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueYShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // used for selection (uses working)\r\n        Object.defineProperty(this, \"__valueXShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"__valueYShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_emptyDataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new DataItem(this, undefined, {})\r\n        });\r\n        Object.defineProperty(this, \"_dataSetId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipFieldX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipFieldY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_posXDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_posYDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.fields.push(\"categoryX\", \"categoryY\", \"openCategoryX\", \"openCategoryY\");\r\n        this.valueFields.push(\"valueX\", \"valueY\", \"openValueX\", \"openValueY\", \"lowValueX\", \"lowValueY\", \"highValueX\", \"highValueY\");\r\n        this._setRawDefault(\"vcx\", 1);\r\n        this._setRawDefault(\"vcy\", 1);\r\n        // this can't go to themes, as data might be parsed before theme\r\n        this._setRawDefault(\"valueXShow\", \"valueXWorking\");\r\n        this._setRawDefault(\"valueYShow\", \"valueYWorking\");\r\n        this._setRawDefault(\"openValueXShow\", \"openValueXWorking\");\r\n        this._setRawDefault(\"openValueYShow\", \"openValueYWorking\");\r\n        this._setRawDefault(\"lowValueXShow\", \"lowValueXWorking\");\r\n        this._setRawDefault(\"lowValueYShow\", \"lowValueYWorking\");\r\n        this._setRawDefault(\"highValueXShow\", \"highValueXWorking\");\r\n        this._setRawDefault(\"highValueYShow\", \"highValueYWorking\");\r\n        this._setRawDefault(\"lowValueXGrouped\", \"low\");\r\n        this._setRawDefault(\"lowValueYGrouped\", \"low\");\r\n        this._setRawDefault(\"highValueXGrouped\", \"high\");\r\n        this._setRawDefault(\"highValueYGrouped\", \"high\");\r\n        super._afterNew();\r\n        this.set(\"maskContent\", true);\r\n        this._disposers.push(this.axisRanges.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (axisRange) => {\r\n                    this._removeAxisRange(axisRange);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeAxisRange(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._processAxisRange(change.value);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n        }));\r\n        this.states.create(\"hidden\", { opacity: 1, visible: false });\r\n        this.onPrivate(\"startIndex\", () => {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.updateLegendValue();\r\n            });\r\n        });\r\n        this.onPrivate(\"endIndex\", () => {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.updateLegendValue();\r\n            });\r\n        });\r\n        this._makeFieldNames();\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        const container = Container.new(this._root, {});\r\n        axisRange.container = container;\r\n        this.children.push(container);\r\n        axisRange.series = this;\r\n        const axisDataItem = axisRange.axisDataItem;\r\n        axisDataItem.setRaw(\"isRange\", true);\r\n        const axis = axisDataItem.component;\r\n        if (axis) {\r\n            axis._processAxisRange(axisDataItem, [\"range\", \"series\"]);\r\n            const bullet = axisDataItem.get(\"bullet\");\r\n            if (bullet) {\r\n                const sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    sprite.setPrivate(\"visible\", false);\r\n                }\r\n            }\r\n            const axisFill = axisDataItem.get(\"axisFill\");\r\n            if (axisFill) {\r\n                container.set(\"mask\", axisFill);\r\n            }\r\n            axis._seriesAxisRanges.push(axisDataItem);\r\n        }\r\n    }\r\n    _onDataClear() {\r\n        super._onDataClear();\r\n        $object.each(this._dataSets, (_key, dataItems) => {\r\n            $array.each(dataItems, (dataItem) => {\r\n                dataItem.dispose();\r\n            });\r\n            dataItems.length = 0;\r\n        });\r\n    }\r\n    _removeAxisRange(axisRange) {\r\n        const axisDataItem = axisRange.axisDataItem;\r\n        const axis = axisDataItem.component;\r\n        axisDataItem.dispose();\r\n        $array.remove(axis._seriesAxisRanges, axisDataItem);\r\n        const container = axisRange.container;\r\n        if (container) {\r\n            container.dispose();\r\n        }\r\n    }\r\n    _updateFields() {\r\n        super._updateFields();\r\n        this._valueXFields = [];\r\n        this._valueYFields = [];\r\n        this._valueXShowFields = [];\r\n        this._valueYShowFields = [];\r\n        this.__valueXShowFields = [];\r\n        this.__valueYShowFields = [];\r\n        if (this.valueXFields) {\r\n            $array.each(this.valueXFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueXFields.push(key);\r\n                    let field = this.get((key + \"Show\"));\r\n                    this.__valueXShowFields.push(field);\r\n                    if (field.indexOf(\"Working\") != -1) {\r\n                        this._valueXShowFields.push(field.split(\"Working\")[0]);\r\n                    }\r\n                    else {\r\n                        this._valueXShowFields.push(field);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.valueYFields) {\r\n            $array.each(this.valueYFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueYFields.push(key);\r\n                    let field = this.get((key + \"Show\"));\r\n                    this.__valueYShowFields.push(field);\r\n                    if (field.indexOf(\"Working\") != -1) {\r\n                        this._valueYShowFields.push(field.split(\"Working\")[0]);\r\n                    }\r\n                    else {\r\n                        this._valueYShowFields.push(field);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._bullets = {};\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart.series.removeValue(this);\r\n        }\r\n        $array.removeFirst(this.get(\"xAxis\").series, this);\r\n        $array.removeFirst(this.get(\"yAxis\").series, this);\r\n    }\r\n    // TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\r\n    _min(key, value) {\r\n        let newValue = min(this.getPrivate(key), value);\r\n        this.setPrivate(key, newValue);\r\n    }\r\n    // TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\r\n    _max(key, value) {\r\n        let newValue = max(this.getPrivate(key), value);\r\n        this.setPrivate(key, newValue);\r\n    }\r\n    _shouldMakeBullet(dataItem) {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        if (!xAxis.inited || !yAxis.inited) {\r\n            return false;\r\n        }\r\n        const minBulletDistance = this.get(\"minBulletDistance\", 0);\r\n        if (minBulletDistance > 0) {\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            let count = endIndex - startIndex;\r\n            if (xAxis == baseAxis) {\r\n                if (xAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\r\n                    return false;\r\n                }\r\n            }\r\n            else if (yAxis == baseAxis) {\r\n                if (yAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        if (dataItem.get(this._xField) != null && dataItem.get(this._yField) != null) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _makeFieldNames() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const xName = xAxis.getPrivate(\"name\");\r\n        const xCapName = $utils.capitalizeFirst(xName);\r\n        const yName = yAxis.getPrivate(\"name\");\r\n        const yCapName = $utils.capitalizeFirst(yName);\r\n        const xLetter = xAxis.get(\"renderer\").getPrivate(\"letter\");\r\n        const yLetter = yAxis.get(\"renderer\").getPrivate(\"letter\");\r\n        const open = \"open\";\r\n        const low = \"low\";\r\n        const high = \"high\";\r\n        const show = \"Show\";\r\n        if (xAxis.className === \"ValueAxis\") {\r\n            this._xField = this.get((xName + xLetter + show));\r\n            this._xOpenField = this.get((open + xCapName + xLetter + show));\r\n            this._xLowField = this.get((low + xCapName + xLetter + show));\r\n            this._xHighField = this.get((high + xCapName + xLetter + show));\r\n        }\r\n        else {\r\n            this._xField = (xName + xLetter);\r\n            this._xOpenField = (open + xCapName + xLetter);\r\n            this._xLowField = (low + xCapName + xLetter);\r\n            this._xHighField = (high + xCapName + xLetter);\r\n        }\r\n        if (yAxis.className === \"ValueAxis\") {\r\n            this._yField = this.get((yName + yLetter + show));\r\n            this._yOpenField = this.get((open + yCapName + yLetter + show));\r\n            this._yLowField = this.get((low + yCapName + yLetter + show));\r\n            this._yHighField = this.get((high + yCapName + yLetter + show));\r\n        }\r\n        else {\r\n            this._yField = (yName + yLetter);\r\n            this._yOpenField = (open + yCapName + yLetter);\r\n            this._yLowField = (low + yCapName + yLetter);\r\n            this._yHighField = (high + yCapName + yLetter);\r\n        }\r\n    }\r\n    _fixVC() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const hiddenState = this.states.lookup(\"hidden\");\r\n        const sequencedInterpolation = this.get(\"sequencedInterpolation\");\r\n        if (hiddenState) {\r\n            let value = 0;\r\n            if (sequencedInterpolation) {\r\n                value = 0.999999999999; // makes animate, good for stacked\r\n            }\r\n            if (xAxis === baseAxis) {\r\n                hiddenState.set(\"vcy\", value);\r\n            }\r\n            else if (yAxis === baseAxis) {\r\n                hiddenState.set(\"vcx\", value);\r\n            }\r\n            else {\r\n                hiddenState.set(\"vcy\", value);\r\n                hiddenState.set(\"vcx\", value);\r\n            }\r\n        }\r\n    }\r\n    _handleMaskBullets() {\r\n        if (this.isDirty(\"maskBullets\")) {\r\n            this.bulletsContainer.set(\"maskContent\", this.get(\"maskBullets\"));\r\n        }\r\n    }\r\n    _fixPosition() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        this.set(\"x\", xAxis.x() - $utils.relativeToValue(xAxis.get(\"centerX\", 0), xAxis.width()) - xAxis.parent.get(\"paddingLeft\", 0));\r\n        this.set(\"y\", yAxis.y() - $utils.relativeToValue(yAxis.get(\"centerY\", 0), yAxis.height()) - yAxis.parent.get(\"paddingTop\", 0));\r\n        this.bulletsContainer.set(\"y\", this.y());\r\n        this.bulletsContainer.set(\"x\", this.x());\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this._bullets = {};\r\n        if (this.isDirty(\"valueYShow\") || this.isDirty(\"valueXShow\") || this.isDirty(\"openValueYShow\") || this.isDirty(\"openValueXShow\") || this.isDirty(\"lowValueYShow\") || this.isDirty(\"lowValueXShow\") || this.isDirty(\"highValueYShow\") || this.isDirty(\"highValueXShow\")) {\r\n            this._updateFields();\r\n            this._makeFieldNames();\r\n            this._valuesDirty = true;\r\n        }\r\n        if (this.isDirty(\"xAxis\") || this.isDirty(\"yAxis\")) {\r\n            this._valuesDirty = true;\r\n        }\r\n        this.set(\"width\", this.get(\"xAxis\").width());\r\n        this.set(\"height\", this.get(\"yAxis\").height());\r\n        this._handleMaskBullets();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const tooltipPositionX = this.get(\"tooltipPositionX\");\r\n        let tooltipFieldX;\r\n        switch (tooltipPositionX) {\r\n            case \"open\":\r\n                tooltipFieldX = this._xOpenField;\r\n                break;\r\n            case \"low\":\r\n                tooltipFieldX = this._xLowField;\r\n                break;\r\n            case \"high\":\r\n                tooltipFieldX = this._xHighField;\r\n                break;\r\n            default:\r\n                tooltipFieldX = this._xField;\r\n        }\r\n        this._tooltipFieldX = tooltipFieldX;\r\n        const tooltipPositionY = this.get(\"tooltipPositionY\");\r\n        let tooltipFieldY;\r\n        switch (tooltipPositionY) {\r\n            case \"open\":\r\n                tooltipFieldY = this._yOpenField;\r\n                break;\r\n            case \"low\":\r\n                tooltipFieldY = this._yLowField;\r\n                break;\r\n            case \"high\":\r\n                tooltipFieldY = this._yHighField;\r\n                break;\r\n            default:\r\n                tooltipFieldY = this._yField;\r\n        }\r\n        this._tooltipFieldY = tooltipFieldY;\r\n        if (this.isDirty(\"baseAxis\")) {\r\n            this._fixVC();\r\n        }\r\n        this._fixPosition();\r\n        const stacked = this.get(\"stacked\");\r\n        if (this.isDirty(\"stacked\")) {\r\n            if (stacked) {\r\n                if (this._valuesDirty && !this._dataProcessed) {\r\n                }\r\n                else {\r\n                    this._stack();\r\n                }\r\n            }\r\n            else {\r\n                this._unstack();\r\n            }\r\n        }\r\n        if (this._valuesDirty && !this._dataProcessed) {\r\n            this._dataProcessed = true;\r\n            if (stacked) {\r\n                this._stack();\r\n            }\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                $array.each(this._valueXShowFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        if (stacked) {\r\n                            value += this.getStackedXValue(dataItem, key);\r\n                        }\r\n                        this._min(\"minX\", value);\r\n                        this._max(\"maxX\", value);\r\n                    }\r\n                });\r\n                $array.each(this._valueYShowFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        if (stacked) {\r\n                            value += this.getStackedYValue(dataItem, key);\r\n                        }\r\n                        this._min(\"minY\", value);\r\n                        this._max(\"maxY\", value);\r\n                    }\r\n                });\r\n                xAxis.processSeriesDataItem(dataItem, this._valueXFields);\r\n                yAxis.processSeriesDataItem(dataItem, this._valueYFields);\r\n            });\r\n            xAxis._seriesValuesDirty = true;\r\n            yAxis._seriesValuesDirty = true;\r\n            if (!this.get(\"ignoreMinMax\")) {\r\n                if (this.isPrivateDirty(\"minX\") || this.isPrivateDirty(\"maxX\")) {\r\n                    xAxis.markDirtyExtremes();\r\n                }\r\n                if (this.isPrivateDirty(\"minY\") || this.isPrivateDirty(\"maxY\")) {\r\n                    yAxis.markDirtyExtremes();\r\n                }\r\n            }\r\n            this._markStakedDirtyStack();\r\n            //this.updateLegendMarker(undefined); // causes legend marker to change color instantly when on\r\n            if (!this.get(\"tooltipDataItem\")) {\r\n                this.updateLegendValue(undefined);\r\n            }\r\n        }\r\n        if (this.isDirty(\"vcx\") || this.isDirty(\"vcy\")) {\r\n            this._markStakedDirtyStack();\r\n        }\r\n        if (!this._dataGrouped) {\r\n            xAxis._groupSeriesData(this);\r\n            yAxis._groupSeriesData(this);\r\n            this._dataGrouped = true;\r\n        }\r\n        if (this._valuesDirty || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"adjustedStartIndex\") || this.isPrivateDirty(\"endIndex\") || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._stackDirty || this._sizeDirty) {\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            let minBulletDistance = this.get(\"minBulletDistance\", 0);\r\n            if (minBulletDistance > 0 && baseAxis) {\r\n                if (baseAxis.get(\"renderer\").axisLength() / (endIndex - startIndex) > minBulletDistance) {\r\n                    this._showBullets = true;\r\n                }\r\n                else {\r\n                    this._showBullets = false;\r\n                }\r\n            }\r\n            if ((this._psi != startIndex || this._pei != endIndex || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this.isPrivateDirty(\"adjustedStartIndex\") || this._stackDirty || this._valuesDirty) && !this._selectionProcessed) {\r\n                this._selectionProcessed = true;\r\n                const vcx = this.get(\"vcx\", 1);\r\n                const vcy = this.get(\"vcy\", 1);\r\n                const stacked = this.get(\"stacked\", false);\r\n                const outOfSelection = this.getPrivate(\"outOfSelection\");\r\n                if (baseAxis === xAxis || !baseAxis) {\r\n                    yAxis._calculateTotals();\r\n                    this.setPrivateRaw(\"selectionMinY\", undefined);\r\n                    this.setPrivateRaw(\"selectionMaxY\", undefined);\r\n                    if (!outOfSelection) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            this.processYSelectionDataItem(this.dataItems[i], vcy, stacked);\r\n                        }\r\n                    }\r\n                    else {\r\n                        yAxis.markDirtySelectionExtremes();\r\n                    }\r\n                }\r\n                if (baseAxis === yAxis || !baseAxis) {\r\n                    xAxis._calculateTotals();\r\n                    this.setPrivateRaw(\"selectionMinX\", undefined);\r\n                    this.setPrivateRaw(\"selectionMaxX\", undefined);\r\n                    if (!outOfSelection) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            this.processXSelectionDataItem(this.dataItems[i], vcx, stacked);\r\n                        }\r\n                    }\r\n                    else {\r\n                        yAxis.markDirtySelectionExtremes();\r\n                    }\r\n                }\r\n                if (baseAxis === xAxis || !baseAxis) {\r\n                    if (this.get(\"valueYShow\") !== \"valueYWorking\" || this.get(\"useSelectionExtremes\")) {\r\n                        const selectionMinY = this.getPrivate(\"selectionMinY\");\r\n                        if (selectionMinY != null) {\r\n                            this.setPrivateRaw(\"minY\", selectionMinY);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                        const selectionMaxY = this.getPrivate(\"selectionMaxY\");\r\n                        if (selectionMaxY != null) {\r\n                            this.setPrivateRaw(\"maxY\", selectionMaxY);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                    }\r\n                }\r\n                if (baseAxis === yAxis || !baseAxis) {\r\n                    if (this.get(\"valueXShow\") !== \"valueXWorking\" || this.get(\"useSelectionExtremes\")) {\r\n                        const selectionMinX = this.getPrivate(\"selectionMinX\");\r\n                        if (selectionMinX != null) {\r\n                            this.setPrivateRaw(\"minX\", selectionMinX);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                        const selectionMaxX = this.getPrivate(\"selectionMaxX\");\r\n                        if (selectionMaxX != null) {\r\n                            this.setPrivateRaw(\"maxX\", selectionMaxX);\r\n                            xAxis.markDirtyExtremes();\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isPrivateDirty(\"selectionMinX\") || this.isPrivateDirty(\"selectionMaxX\")) {\r\n                    xAxis.markDirtySelectionExtremes();\r\n                }\r\n                if (this.isPrivateDirty(\"selectionMinY\") || this.isPrivateDirty(\"selectionMaxY\")) {\r\n                    yAxis.markDirtySelectionExtremes();\r\n                }\r\n                // this.updateLegendValue(undefined); flickers while panning\r\n            }\r\n        }\r\n    }\r\n    _makeRangeMask() {\r\n        if (this.axisRanges.length > 0) {\r\n            let mainContainerMask = this._mainContainerMask;\r\n            if (mainContainerMask == null) {\r\n                mainContainerMask = this.children.push(Graphics.new(this._root, {}));\r\n                this._mainContainerMask = mainContainerMask;\r\n                mainContainerMask.set(\"draw\", (display, target) => {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        const w = this._root.container.width();\r\n                        const h = this._root.container.height();\r\n                        display.moveTo(-w, -h);\r\n                        display.lineTo(-w, h * 2);\r\n                        display.lineTo(w * 2, h * 2);\r\n                        display.lineTo(w * 2, -h);\r\n                        display.lineTo(-w, -h);\r\n                        this.axisRanges.each((axisRange) => {\r\n                            const fill = axisRange.axisDataItem.get(\"axisFill\");\r\n                            if (parent) {\r\n                                if (fill) {\r\n                                    let draw = fill.get(\"draw\");\r\n                                    if (draw) {\r\n                                        draw(display, target);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    this.mainContainer._display.mask = mainContainerMask._display;\r\n                });\r\n            }\r\n            mainContainerMask.markDirty();\r\n            mainContainerMask._markDirtyKey(\"fill\");\r\n        }\r\n        else {\r\n            this.mainContainer._display.mask = null;\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        // save for performance\r\n        this._x = this.x();\r\n        this._y = this.y();\r\n        this._makeRangeMask();\r\n    }\r\n    _stack() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            const seriesIndex = chart.series.indexOf(this);\r\n            this._couldStackTo = [];\r\n            if (seriesIndex > 0) {\r\n                let series;\r\n                for (let i = seriesIndex - 1; i >= 0; i--) {\r\n                    series = chart.series.getIndex(i);\r\n                    if (series.get(\"xAxis\") === this.get(\"xAxis\") && series.get(\"yAxis\") === this.get(\"yAxis\") && series.className === this.className) {\r\n                        this._couldStackTo.push(series);\r\n                        if (!series.get(\"stacked\")) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._stackDataItems();\r\n        }\r\n    }\r\n    _unstack() {\r\n        $object.each(this._reallyStackedTo, (_key, value) => {\r\n            delete (value._stackedSeries[this.uid]);\r\n        });\r\n        this._reallyStackedTo = {};\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            dataItem.setRaw(\"stackToItemY\", undefined);\r\n            dataItem.setRaw(\"stackToItemX\", undefined);\r\n        });\r\n    }\r\n    _handleRemoved() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        if (xAxis) {\r\n            xAxis._handleSeriesRemoved();\r\n        }\r\n        const yAxis = this.get(\"yAxis\");\r\n        if (yAxis) {\r\n            yAxis._handleSeriesRemoved();\r\n        }\r\n    }\r\n    _stackDataItems() {\r\n        // this works only with the same number of data @todo: search by date/category?\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        let field;\r\n        let stackToItemKey;\r\n        if (baseAxis === xAxis) {\r\n            field = \"valueY\";\r\n            stackToItemKey = \"stackToItemY\";\r\n        }\r\n        else if (baseAxis === yAxis) {\r\n            field = \"valueX\";\r\n            stackToItemKey = \"stackToItemX\";\r\n        }\r\n        let len = this._couldStackTo.length;\r\n        let index = 0;\r\n        const stackToNegative = this.get(\"stackToNegative\");\r\n        this._reallyStackedTo = {};\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            for (let s = 0; s < len; s++) {\r\n                let stackToSeries = this._couldStackTo[s];\r\n                let stackToItem = stackToSeries.dataItems[index];\r\n                let value = dataItem.get(field);\r\n                if (stackToItem) {\r\n                    let stackValue = stackToItem.get(field);\r\n                    if (stackToNegative) {\r\n                        if ($type.isNumber(value)) {\r\n                            if ($type.isNumber(stackValue)) {\r\n                                if (s == len - 1) {\r\n                                    dataItem.setRaw(stackToItemKey, undefined);\r\n                                }\r\n                                if (value >= 0 && stackValue >= 0) {\r\n                                    dataItem.setRaw(stackToItemKey, stackToItem);\r\n                                    this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                                    stackToSeries._stackedSeries[this.uid] = this;\r\n                                    break;\r\n                                }\r\n                                if (value < 0 && stackValue < 0) {\r\n                                    dataItem.setRaw(stackToItemKey, stackToItem);\r\n                                    this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                                    stackToSeries._stackedSeries[this.uid] = this;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if ($type.isNumber(value) && $type.isNumber(stackValue)) {\r\n                            dataItem.setRaw(stackToItemKey, stackToItem);\r\n                            this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                            stackToSeries._stackedSeries[this.uid] = this;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            index++;\r\n        });\r\n    }\r\n    processXSelectionDataItem(dataItem, vcx, stacked) {\r\n        $array.each(this.__valueXShowFields, (key) => {\r\n            let value = dataItem.get(key);\r\n            if (value != null) {\r\n                if (stacked) {\r\n                    value += this.getStackedXValueWorking(dataItem, key);\r\n                }\r\n                this._min(\"selectionMinX\", value);\r\n                this._max(\"selectionMaxX\", value * vcx);\r\n            }\r\n        });\r\n    }\r\n    processYSelectionDataItem(dataItem, vcy, stacked) {\r\n        $array.each(this.__valueYShowFields, (key) => {\r\n            let value = dataItem.get(key);\r\n            if (value != null) {\r\n                if (stacked) {\r\n                    value += this.getStackedYValueWorking(dataItem, key);\r\n                }\r\n                this._min(\"selectionMinY\", value);\r\n                this._max(\"selectionMaxY\", value * vcy);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedYValueWorking(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            const stackedToSeries = stackToItem.component;\r\n            return stackToItem.get(key, 0) * stackedToSeries.get(\"vcy\", 1) + this.getStackedYValueWorking(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedXValueWorking(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            const stackedToSeries = stackToItem.component;\r\n            return stackToItem.get(key, 0) * stackedToSeries.get(\"vcx\", 1) + this.getStackedXValueWorking(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedYValue(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            return stackToItem.get(key, 0) + this.getStackedYValue(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedXValue(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            return stackToItem.get(key, 0) + this.getStackedXValue(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    createLegendMarker(_dataItem) {\r\n        this.updateLegendMarker();\r\n    }\r\n    _markDirtyAxes() {\r\n        this._axesDirty = true;\r\n        this.markDirty();\r\n    }\r\n    _markDataSetDirty() {\r\n        this._afterDataChange();\r\n        this._valuesDirty = true;\r\n        this._dataProcessed = false;\r\n        this._aggregatesCalculated = false;\r\n        this.markDirty();\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._axesDirty = false;\r\n        this._selectionProcessed = false;\r\n        this._stackDirty = false;\r\n        this._dataProcessed = false;\r\n    }\r\n    _positionBullet(bullet) {\r\n        let sprite = bullet.get(\"sprite\");\r\n        if (sprite) {\r\n            let dataItem = sprite.dataItem;\r\n            let locationX = bullet.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\r\n            let locationY = bullet.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\r\n            let xAxis = this.get(\"xAxis\");\r\n            let yAxis = this.get(\"yAxis\");\r\n            let exactLocationX = this.get(\"exactLocationX\", false);\r\n            let exactLocationY = this.get(\"exactLocationY\", false);\r\n            let positionX = xAxis.getDataItemPositionX(dataItem, this._xField, locationX, this.get(\"vcx\", 1), exactLocationX);\r\n            let positionY = yAxis.getDataItemPositionY(dataItem, this._yField, locationY, this.get(\"vcy\", 1), exactLocationY);\r\n            let point = this.getPoint(positionX, positionY);\r\n            let left = dataItem.get(\"left\", point.x);\r\n            let right = dataItem.get(\"right\", point.x);\r\n            let top = dataItem.get(\"top\", point.y);\r\n            let bottom = dataItem.get(\"bottom\", point.y);\r\n            let x = 0;\r\n            let y = 0;\r\n            let w = right - left;\r\n            let h = bottom - top;\r\n            if (this._shouldShowBullet(positionX, positionY)) {\r\n                sprite.setPrivate(\"visible\", !bullet.getPrivate(\"hidden\"));\r\n                let field = bullet.get(\"field\");\r\n                const baseAxis = this.get(\"baseAxis\");\r\n                const xAxis = this.get(\"xAxis\");\r\n                const yAxis = this.get(\"yAxis\");\r\n                if (field != undefined) {\r\n                    let realField;\r\n                    if (baseAxis == xAxis) {\r\n                        if (field == \"value\") {\r\n                            realField = this._yField;\r\n                        }\r\n                        else if (field == \"open\") {\r\n                            realField = this._yOpenField;\r\n                        }\r\n                        else if (field == \"high\") {\r\n                            realField = this._yHighField;\r\n                        }\r\n                        else if (field == \"low\") {\r\n                            realField = this._yLowField;\r\n                        }\r\n                        if (realField) {\r\n                            positionY = yAxis.getDataItemPositionY(dataItem, realField, 0, this.get(\"vcy\", 1), exactLocationY);\r\n                            point = yAxis.get(\"renderer\").positionToPoint(positionY);\r\n                            y = point.y;\r\n                            x = left + w * locationX;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (field == \"value\") {\r\n                            realField = this._xField;\r\n                        }\r\n                        else if (field == \"open\") {\r\n                            realField = this._xOpenField;\r\n                        }\r\n                        else if (field == \"high\") {\r\n                            realField = this._xHighField;\r\n                        }\r\n                        else if (field == \"low\") {\r\n                            realField = this._xLowField;\r\n                        }\r\n                        if (realField) {\r\n                            positionX = xAxis.getDataItemPositionX(dataItem, realField, 0, this.get(\"vcx\", 1), exactLocationX);\r\n                            point = xAxis.get(\"renderer\").positionToPoint(positionX);\r\n                            x = point.x;\r\n                            y = bottom - h * locationY;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    x = left + w * locationX;\r\n                    y = bottom - h * locationY;\r\n                }\r\n                const stacked = bullet.get(\"stacked\");\r\n                if (stacked) {\r\n                    const chart = this.chart;\r\n                    if (baseAxis == xAxis) {\r\n                        let previousBullet = this._bullets[positionX + \"_\" + positionY];\r\n                        if (previousBullet) {\r\n                            let previousBounds = previousBullet.bounds();\r\n                            let bounds = sprite.localBounds();\r\n                            let yo = y;\r\n                            y = previousBounds.top;\r\n                            if (stacked == \"down\") {\r\n                                y = previousBounds.bottom - bounds.top;\r\n                            }\r\n                            else if (stacked == \"auto\") {\r\n                                if (chart) {\r\n                                    if (yo < chart.plotContainer.height() / 2) {\r\n                                        y = previousBounds.bottom - bounds.top;\r\n                                    }\r\n                                    else {\r\n                                        y += bounds.bottom;\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                y += bounds.bottom;\r\n                            }\r\n                        }\r\n                        this._bullets[positionX + \"_\" + positionY] = sprite;\r\n                    }\r\n                    else {\r\n                        let previousBullet = this._bullets[positionX + \"_\" + positionY];\r\n                        if (previousBullet) {\r\n                            let previousBounds = previousBullet.bounds();\r\n                            let bounds = sprite.localBounds();\r\n                            let xo = x;\r\n                            x = previousBounds.right;\r\n                            if (stacked == \"down\") {\r\n                                x = previousBounds.left - bounds.right;\r\n                            }\r\n                            else if (stacked == \"auto\") {\r\n                                if (chart) {\r\n                                    if (xo < chart.plotContainer.width() / 2) {\r\n                                        x = previousBounds.left - bounds.right;\r\n                                    }\r\n                                    else {\r\n                                        x -= bounds.left;\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                x -= bounds.left;\r\n                            }\r\n                        }\r\n                        this._bullets[positionX + \"_\" + positionY] = sprite;\r\n                    }\r\n                }\r\n                if (sprite.isType(\"Label\")) {\r\n                    sprite.setPrivate(\"maxWidth\", Math.abs(w));\r\n                    sprite.setPrivate(\"maxHeight\", Math.abs(h));\r\n                }\r\n                sprite.setAll({ x, y });\r\n            }\r\n            else {\r\n                sprite.setPrivate(\"visible\", false);\r\n            }\r\n        }\r\n    }\r\n    _shouldShowBullet(_positionX, _positionY) {\r\n        return this._showBullets;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setDataSet(id) {\r\n        if (this._dataSets[id]) {\r\n            this._handleDataSetChange();\r\n            this._dataItems = this._dataSets[id];\r\n            this._markDataSetDirty();\r\n            this._dataSetId = id;\r\n            const type = \"datasetchanged\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this, id: id });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    resetGrouping() {\r\n        $object.each(this._dataSets, (_key, dataSet) => {\r\n            if (dataSet != this._mainDataItems) {\r\n                $array.each(dataSet, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n            }\r\n        });\r\n        this._dataSets = {};\r\n        this._dataItems = this.mainDataItems;\r\n    }\r\n    _handleDataSetChange() {\r\n        $array.each(this._dataItems, (dataItem) => {\r\n            let bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, (bullet) => {\r\n                    if (bullet) {\r\n                        let sprite = bullet.get(\"sprite\");\r\n                        if (sprite) {\r\n                            sprite.setPrivate(\"visible\", false);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        this._selectionProcessed = false; // for totals to be calculated\r\n    }\r\n    /**\r\n     * Shows hidden series.\r\n     *\r\n     * @param   duration  Duration of animation in milliseconds\r\n     * @return            Animation promise\r\n     */\r\n    show(duration) {\r\n        const _super = Object.create(null, {\r\n            show: { get: () => super.show }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._fixVC();\r\n            let promises = [];\r\n            promises.push(_super.show.call(this, duration).then(() => {\r\n                this._isShowing = false;\r\n                let xAxis = this.get(\"xAxis\");\r\n                let yAxis = this.get(\"yAxis\");\r\n                let baseAxis = this.get(\"baseAxis\");\r\n                if (yAxis !== baseAxis) {\r\n                    yAxis.markDirtySelectionExtremes();\r\n                }\r\n                if (xAxis !== baseAxis) {\r\n                    xAxis.markDirtySelectionExtremes();\r\n                }\r\n            }));\r\n            promises.push(this.bulletsContainer.show(duration));\r\n            promises.push(this._sequencedShowHide(true, duration));\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Hides series.\r\n     *\r\n     * @param   duration  Duration of animation in milliseconds\r\n     * @return            Animation promise\r\n     */\r\n    hide(duration) {\r\n        const _super = Object.create(null, {\r\n            hide: { get: () => super.hide }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._fixVC();\r\n            let promises = [];\r\n            promises.push(_super.hide.call(this, duration).then(() => {\r\n                this._isHiding = false;\r\n            }));\r\n            promises.push(this.bulletsContainer.hide(duration));\r\n            promises.push(this._sequencedShowHide(false, duration));\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    showDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            showDataItem: { get: () => super.showDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.showDataItem.call(this, dataItem, duration)];\r\n            if (!$type.isNumber(duration)) {\r\n                duration = this.get(\"stateAnimationDuration\", 0);\r\n            }\r\n            const easing = this.get(\"stateAnimationEasing\");\r\n            $array.each(this._valueFields, (key) => {\r\n                promises.push(dataItem.animate({ key: key + \"Working\", to: dataItem.get(key), duration: duration, easing: easing }).waitForStop());\r\n            });\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    hideDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            hideDataItem: { get: () => super.hideDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.hideDataItem.call(this, dataItem, duration)];\r\n            let hiddenState = this.states.lookup(\"hidden\");\r\n            if (!hiddenState) {\r\n                hiddenState = this.states.create(\"hidden\", {});\r\n            }\r\n            if (!$type.isNumber(duration)) {\r\n                duration = hiddenState.get(\"stateAnimationDuration\", this.get(\"stateAnimationDuration\", 0));\r\n            }\r\n            const easing = hiddenState.get(\"stateAnimationEasing\", this.get(\"stateAnimationEasing\"));\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const baseAxis = this.get(\"baseAxis\");\r\n            const stacked = this.get(\"stacked\");\r\n            if (baseAxis === xAxis || !baseAxis) {\r\n                $array.each(this._valueYFields, (key) => {\r\n                    let min = yAxis.getPrivate(\"min\");\r\n                    let baseValue = yAxis.baseValue();\r\n                    if ($type.isNumber(min) && min > baseValue) {\r\n                        baseValue = min;\r\n                    }\r\n                    if (stacked) {\r\n                        baseValue = 0;\r\n                    }\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        promises.push(dataItem.animate({ key: key + \"Working\", to: baseValue, duration: duration, easing: easing }).waitForStop());\r\n                    }\r\n                });\r\n            }\r\n            if (baseAxis === yAxis || !baseAxis) {\r\n                let min = xAxis.getPrivate(\"min\");\r\n                let baseValue = xAxis.baseValue();\r\n                if ($type.isNumber(min) && min > baseValue) {\r\n                    baseValue = min;\r\n                }\r\n                if (stacked) {\r\n                    baseValue = 0;\r\n                }\r\n                $array.each(this._valueXFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        promises.push(dataItem.animate({ key: key + \"Working\", to: baseValue, duration: duration, easing: easing }).waitForStop());\r\n                    }\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    _markDirtyStack() {\r\n        this._stackDirty = true;\r\n        this.markDirty();\r\n        this._markStakedDirtyStack();\r\n    }\r\n    _markStakedDirtyStack() {\r\n        const stackedSeries = this._stackedSeries;\r\n        if (stackedSeries) {\r\n            $object.each(stackedSeries, (_key, value) => {\r\n                if (!value._stackDirty) {\r\n                    value._markDirtyStack();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._skipped) {\r\n            this._markDirtyAxes();\r\n            this._skipped = false;\r\n        }\r\n    }\r\n    /**\r\n     * Shows a tooltip for specific data item.\r\n     *\r\n     * @param  dataItem  Data item\r\n     */\r\n    showDataItemTooltip(dataItem) {\r\n        if (!this.getPrivate(\"doNotUpdateLegend\")) {\r\n            this.updateLegendMarker(dataItem);\r\n            this.updateLegendValue(dataItem);\r\n        }\r\n        const tooltip = this.get(\"tooltip\");\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        const exactLocationY = this.get(\"exactLocationY\", false);\r\n        if (tooltip) {\r\n            if (!this.isHidden() && this.get(\"visible\")) {\r\n                tooltip._setDataItem(dataItem);\r\n                if (dataItem) {\r\n                    let locationX = this.get(\"locationX\", 0);\r\n                    let locationY = this.get(\"locationY\", 1);\r\n                    let itemLocationX = dataItem.get(\"locationX\", locationX);\r\n                    let itemLocationY = dataItem.get(\"locationY\", locationY);\r\n                    const xAxis = this.get(\"xAxis\");\r\n                    const yAxis = this.get(\"yAxis\");\r\n                    const vcx = this.get(\"vcx\", 1);\r\n                    const vcy = this.get(\"vcy\", 1);\r\n                    const xPos = xAxis.getDataItemPositionX(dataItem, this._tooltipFieldX, this._aLocationX0 + (this._aLocationX1 - this._aLocationX0) * itemLocationX, vcx, exactLocationX);\r\n                    const yPos = yAxis.getDataItemPositionY(dataItem, this._tooltipFieldY, this._aLocationY0 + (this._aLocationY1 - this._aLocationY0) * itemLocationY, vcy, exactLocationY);\r\n                    const point = this.getPoint(xPos, yPos);\r\n                    let show = true;\r\n                    $array.each(this._valueFields, (field) => {\r\n                        if (dataItem.get(field) == null) {\r\n                            show = false;\r\n                        }\r\n                    });\r\n                    if (show) {\r\n                        const chart = this.chart;\r\n                        if (chart && chart.inPlot(point)) {\r\n                            tooltip.label.text.markDirtyText();\r\n                            tooltip.set(\"tooltipTarget\", this._getTooltipTarget(dataItem));\r\n                            tooltip.set(\"pointTo\", this._display.toGlobal({ x: point.x, y: point.y }));\r\n                        }\r\n                        else {\r\n                            tooltip._setDataItem(undefined);\r\n                        }\r\n                    }\r\n                    else {\r\n                        tooltip._setDataItem(undefined);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.hideTooltip();\r\n            }\r\n        }\r\n    }\r\n    hideTooltip() {\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.set(\"tooltipTarget\", this);\r\n        }\r\n        return super.hideTooltip();\r\n    }\r\n    _getTooltipTarget(dataItem) {\r\n        if (this.get(\"seriesTooltipTarget\") == \"bullet\") {\r\n            const bullets = dataItem.bullets;\r\n            if (bullets && bullets.length > 0) {\r\n                const bullet = bullets[0];\r\n                const sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    return sprite;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendValue(dataItem) {\r\n        const legendDataItem = this.get(\"legendDataItem\");\r\n        if (legendDataItem) {\r\n            const label = legendDataItem.get(\"label\");\r\n            if (label) {\r\n                let txt = \"\";\r\n                if (dataItem) {\r\n                    label._setDataItem(dataItem);\r\n                    txt = this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\")));\r\n                }\r\n                else {\r\n                    label._setDataItem(this._emptyDataItem);\r\n                    txt = this.get(\"legendRangeLabelText\", this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\"))));\r\n                }\r\n                label.set(\"text\", txt);\r\n            }\r\n            const valueLabel = legendDataItem.get(\"valueLabel\");\r\n            if (valueLabel) {\r\n                let txt = \"\";\r\n                if (dataItem) {\r\n                    valueLabel._setDataItem(dataItem);\r\n                    txt = this.get(\"legendValueText\", valueLabel.get(\"text\", \"\"));\r\n                }\r\n                else {\r\n                    valueLabel._setDataItem(this._emptyDataItem);\r\n                    txt = this.get(\"legendRangeValueText\", valueLabel.get(\"text\", \"\"));\r\n                }\r\n                valueLabel.set(\"text\", txt);\r\n            }\r\n        }\r\n    }\r\n    _getItemReaderLabel() {\r\n        let text = \"X: {\" + this._xField;\r\n        if (this.get(\"xAxis\").isType(\"DateAxis\")) {\r\n            text += \".formatDate()\";\r\n        }\r\n        text += \"}; Y: {\" + this._yField;\r\n        if (this.get(\"yAxis\").isType(\"DateAxis\")) {\r\n            text += \".formatDate()\";\r\n        }\r\n        text += \"}\";\r\n        return text;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getPoint(positionX, positionY) {\r\n        let x = this.get(\"xAxis\").get(\"renderer\").positionToCoordinate(positionX);\r\n        let y = this.get(\"yAxis\").get(\"renderer\").positionToCoordinate(positionY);\r\n        // if coordinate is super big, canvas fails to draw line, capping to some big number (won't make any visual difference)\r\n        let max = 999999999;\r\n        if (y < -max) {\r\n            y = -max;\r\n        }\r\n        if (y > max) {\r\n            y = max;\r\n        }\r\n        if (x < -max) {\r\n            x = -max;\r\n        }\r\n        if (x > max) {\r\n            x = max;\r\n        }\r\n        return { x: x, y: y };\r\n    }\r\n    _shouldInclude(_position) {\r\n        return true;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorHide() {\r\n        this.hideTooltip();\r\n        this.updateLegendValue(undefined);\r\n        this.updateLegendMarker(undefined);\r\n    }\r\n    _afterDataChange() {\r\n        super._afterDataChange();\r\n        this.get(\"xAxis\")._markDirtyKey(\"start\");\r\n        this.get(\"yAxis\")._markDirtyKey(\"start\");\r\n        this.resetExtremes();\r\n    }\r\n    /**\r\n     * Resets cached axis scale values.\r\n     */\r\n    resetExtremes() {\r\n        this.setPrivate(\"selectionMinX\", undefined);\r\n        this.setPrivate(\"selectionMaxX\", undefined);\r\n        this.setPrivate(\"selectionMinY\", undefined);\r\n        this.setPrivate(\"selectionMaxY\", undefined);\r\n        this.setPrivate(\"minX\", undefined);\r\n        this.setPrivate(\"minY\", undefined);\r\n        this.setPrivate(\"maxX\", undefined);\r\n        this.setPrivate(\"maxY\", undefined);\r\n    }\r\n    /**\r\n     * Creates and returns an axis range object.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n     * @param   axisDataItem  Axis data item\r\n     * @return                Axis range\r\n     */\r\n    createAxisRange(axisDataItem) {\r\n        return this.axisRanges.push({\r\n            axisDataItem: axisDataItem\r\n        });\r\n    }\r\n    /**\r\n     * A list of series's main (ungrouped) data items.\r\n     *\r\n     * @return  Data items\r\n     */\r\n    get mainDataItems() {\r\n        return this._mainDataItems;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _adjustStartIndex(index) {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        if (baseAxis == xAxis && xAxis.isType(\"DateAxis\")) {\r\n            const baseDuration = xAxis.baseDuration();\r\n            const minSelection = xAxis.getPrivate(\"selectionMin\", xAxis.getPrivate(\"min\", 0));\r\n            const dl = baseDuration * this.get(\"locationX\", 0.5);\r\n            let value = -Infinity;\r\n            while (value < minSelection) {\r\n                const dataItem = this.dataItems[index];\r\n                if (dataItem) {\r\n                    const open = dataItem.open;\r\n                    if (open) {\r\n                        value = open[\"valueX\"];\r\n                    }\r\n                    else {\r\n                        value = dataItem.get(\"valueX\", 0);\r\n                    }\r\n                    value += dl;\r\n                    if (value < minSelection) {\r\n                        index++;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n}\r\nObject.defineProperty(XYSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYSeries\"\r\n});\r\nObject.defineProperty(XYSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Series.classNames.concat([XYSeries.className])\r\n});\r\n//# sourceMappingURL=XYSeries.js.map","import { __awaiter } from \"tslib\";\r\nimport { XYSeries } from \"./XYSeries\";\r\nimport { Percent } from \"../../../core/util/Percent\";\r\nimport { visualSettings } from \"../../../core/render/Graphics\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\n/**\r\n * Base class for all \"column-based\" series\r\n */\r\nexport class BaseColumnSeries extends XYSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_ph\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_pw\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_columnsUpdated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _makeGraphics(listTemplate, dataItem) {\r\n        return this.makeColumn(dataItem, listTemplate);\r\n    }\r\n    _makeFieldNames() {\r\n        super._makeFieldNames();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const categoryAxis = \"CategoryAxis\";\r\n        const valueAxis = \"ValueAxis\";\r\n        if (xAxis.isType(categoryAxis)) {\r\n            if (!this.get(\"openCategoryXField\")) {\r\n                this._xOpenField = this._xField;\r\n            }\r\n        }\r\n        if (xAxis.isType(valueAxis)) {\r\n            if (!this.get(\"openValueXField\")) {\r\n                this._xOpenField = this._xField;\r\n            }\r\n        }\r\n        if (yAxis.isType(categoryAxis)) {\r\n            if (!this.get(\"openCategoryYField\")) {\r\n                this._yOpenField = this._yField;\r\n            }\r\n        }\r\n        if (yAxis.isType(valueAxis)) {\r\n            if (!this.get(\"openValueYField\")) {\r\n                this._yOpenField = this._yField;\r\n            }\r\n        }\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const len = this.dataItems.length;\r\n        const startIndex = Math.max(0, this.startIndex() - 2);\r\n        const endIndex = Math.min(this.endIndex() + 2, len - 1);\r\n        if (xAxis.inited && yAxis.inited) {\r\n            for (let i = startIndex; i <= endIndex; i++) {\r\n                let dataItem = this.dataItems[i];\r\n                this._createGraphics(dataItem);\r\n            }\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            this._ph = chart.plotContainer.height();\r\n            this._pw = chart.plotContainer.width();\r\n        }\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const columnsTemplate = this.columns.template;\r\n        if (this.isDirty(\"fill\")) {\r\n            if (columnsTemplate.get(\"fill\") == null) {\r\n                columnsTemplate.set(\"fill\", this.get(\"fill\"));\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillPattern\")) {\r\n            if (columnsTemplate.get(\"fillPattern\") == null) {\r\n                columnsTemplate.set(\"fillPattern\", this.get(\"fillPattern\"));\r\n            }\r\n        }\r\n        if (this.isDirty(\"stroke\")) {\r\n            if (columnsTemplate.get(\"stroke\") == null) {\r\n                columnsTemplate.set(\"stroke\", this.get(\"stroke\"));\r\n            }\r\n        }\r\n        let index = 0;\r\n        let clusterCount = 0;\r\n        let i = 0;\r\n        $array.each(baseAxis.series, (series) => {\r\n            if (series instanceof BaseColumnSeries) {\r\n                const stacked = series.get(\"stacked\");\r\n                if (stacked && i == 0) {\r\n                    clusterCount++;\r\n                }\r\n                if (!stacked && series.get(\"clustered\")) {\r\n                    clusterCount++;\r\n                }\r\n            }\r\n            if (series === this) {\r\n                index = clusterCount - 1;\r\n            }\r\n            i++;\r\n        });\r\n        if (!this.get(\"clustered\")) {\r\n            index = 0;\r\n            clusterCount = 1;\r\n        }\r\n        if (clusterCount === 0) {\r\n            clusterCount = 1;\r\n            index = 0;\r\n        }\r\n        const xRenderer = xAxis.get(\"renderer\");\r\n        const yRenderer = yAxis.get(\"renderer\");\r\n        const cellStartLocation = \"cellStartLocation\";\r\n        const cellEndLocation = \"cellEndLocation\";\r\n        const cellLocationX0 = xRenderer.get(cellStartLocation, 0);\r\n        const cellLocationX1 = xRenderer.get(cellEndLocation, 1);\r\n        const cellLocationY0 = yRenderer.get(cellStartLocation, 0);\r\n        const cellLocationY1 = yRenderer.get(cellEndLocation, 1);\r\n        this._aLocationX0 = cellLocationX0 + (index / clusterCount) * (cellLocationX1 - cellLocationX0);\r\n        this._aLocationX1 = cellLocationX0 + (index + 1) / clusterCount * (cellLocationX1 - cellLocationX0);\r\n        ;\r\n        this._aLocationY0 = cellLocationY0 + (index / clusterCount) * (cellLocationY1 - cellLocationY0);\r\n        this._aLocationY1 = cellLocationY0 + (index + 1) / clusterCount * (cellLocationY1 - cellLocationY0);\r\n        if (xAxis.inited && yAxis.inited) {\r\n            if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty) {\r\n                const len = this.dataItems.length;\r\n                let startIndex = Math.max(0, this.startIndex() - 2);\r\n                let endIndex = Math.min(this.endIndex() + 2, len - 1);\r\n                for (let i = 0; i < startIndex; i++) {\r\n                    this._toggleColumn(this.dataItems[i], false);\r\n                }\r\n                let previous = this.dataItems[startIndex];\r\n                for (let i = startIndex; i <= endIndex; i++) {\r\n                    let dataItem = this.dataItems[i];\r\n                    if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                        previous = dataItem;\r\n                        if (i > 0 && startIndex > 0) {\r\n                            for (let j = i - 1; j >= 0; j--) {\r\n                                let dataItem = this.dataItems[j];\r\n                                if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                                    previous = dataItem;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    else {\r\n                        this._toggleColumn(dataItem, false);\r\n                    }\r\n                }\r\n                this._beforeColumnsDraw();\r\n                let axisCase = 0;\r\n                if (yAxis.isType(\"CategoryAxis\") && xAxis.isType(\"CategoryAxis\")) {\r\n                    axisCase = 2;\r\n                }\r\n                else if (xAxis === baseAxis) {\r\n                    axisCase = 0;\r\n                }\r\n                else if (yAxis === baseAxis) {\r\n                    axisCase = 1;\r\n                }\r\n                for (let i = startIndex; i <= endIndex; i++) {\r\n                    let dataItem = this.dataItems[i];\r\n                    this._updateGraphics(dataItem, previous, axisCase);\r\n                    if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                        previous = dataItem;\r\n                    }\r\n                }\r\n                this._afterColumnsDraw();\r\n                for (let i = endIndex + 1; i < len; i++) {\r\n                    this._toggleColumn(this.dataItems[i], false);\r\n                }\r\n                this._columnsUpdated = true;\r\n            }\r\n        }\r\n        else {\r\n            this._skipped = true;\r\n        }\r\n        if (!this.getPrivate(\"doNotUpdateLegend\")) {\r\n            this.updateLegendMarker(this.get(\"tooltipDataItem\"));\r\n        }\r\n        super._updateChildren();\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        this._columnsUpdated = false;\r\n    }\r\n    _beforeColumnsDraw() {\r\n    }\r\n    _afterColumnsDraw() {\r\n    }\r\n    _createGraphics(dataItem) {\r\n        let graphics = dataItem.get(\"graphics\");\r\n        if (!graphics) {\r\n            graphics = this._makeGraphics(this.columns, dataItem);\r\n            dataItem.set(\"graphics\", graphics);\r\n            graphics._setDataItem(dataItem);\r\n            const legendDataItem = dataItem.get(\"legendDataItem\");\r\n            if (legendDataItem) {\r\n                const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n                if (markerRectangle) {\r\n                    const ds = markerRectangle.states.lookup(\"default\");\r\n                    $array.each(visualSettings, (setting) => {\r\n                        const value = graphics.get(setting, this.get(setting));\r\n                        markerRectangle.set(setting, value);\r\n                        ds.set(setting, value);\r\n                    });\r\n                }\r\n            }\r\n            let graphicsArray = dataItem.get(\"rangeGraphics\");\r\n            if (graphicsArray) {\r\n                $array.each(graphicsArray, (graphics) => {\r\n                    graphics.dispose();\r\n                });\r\n            }\r\n            graphicsArray = [];\r\n            dataItem.setRaw(\"rangeGraphics\", graphicsArray);\r\n            this.axisRanges.each((axisRange) => {\r\n                const container = axisRange.container;\r\n                const rangeGraphics = this._makeGraphics(axisRange.columns, dataItem);\r\n                if (graphicsArray) {\r\n                    graphicsArray.push(rangeGraphics);\r\n                }\r\n                rangeGraphics.setPrivate(\"list\", axisRange.columns);\r\n                container.children.push(rangeGraphics);\r\n            });\r\n        }\r\n    }\r\n    createAxisRange(axisDataItem) {\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                graphics.dispose();\r\n                dataItem.set(\"graphics\", undefined);\r\n            }\r\n        });\r\n        return super.createAxisRange(axisDataItem);\r\n    }\r\n    _updateGraphics(dataItem, previousDataItem, axisCase) {\r\n        let graphics = dataItem.get(\"graphics\");\r\n        //if (!graphics) {\r\n        //\tthis._createGraphics(dataItem);\r\n        //\tgraphics = dataItem.get(\"graphics\")!;\r\n        //}\r\n        const xField = this._xField;\r\n        const yField = this._yField;\r\n        const valueX = dataItem.get(xField);\r\n        const valueY = dataItem.get(yField);\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        //const exactLocationY = this.get(\"exactLocationY\", false);\t\t\r\n        if (valueX != null && valueY != null) {\r\n            const xOpenField = this._xOpenField;\r\n            const yOpenField = this._yOpenField;\r\n            const locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\r\n            const locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\r\n            const openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\r\n            const openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\r\n            const width = graphics.get(\"width\");\r\n            const height = graphics.get(\"height\");\r\n            const stacked = this.get(\"stacked\");\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const xStart = xAxis.get(\"start\");\r\n            const xEnd = xAxis.get(\"end\");\r\n            const yStart = yAxis.get(\"start\");\r\n            const yEnd = yAxis.get(\"end\");\r\n            let l;\r\n            let r;\r\n            let t;\r\n            let b;\r\n            let vcy = this.get(\"vcy\", 1);\r\n            let vcx = this.get(\"vcx\", 1);\r\n            let fitW = false;\r\n            let fitH = false;\r\n            if (axisCase == 0) {\r\n                let startLocation = this._aLocationX0 + openLocationX - 0.5;\r\n                let endLocation = this._aLocationX1 + locationX - 0.5;\r\n                if (width instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - width.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx, exactLocationX);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx, exactLocationX);\r\n                t = yAxis.getDataItemPositionY(dataItem, yField, locationY, vcy);\r\n                if (this._yOpenField !== this._yField) {\r\n                    b = yAxis.getDataItemPositionY(dataItem, yOpenField, openLocationY, vcy);\r\n                }\r\n                else {\r\n                    if (stacked) {\r\n                        let stackToItemY = dataItem.get(\"stackToItemY\");\r\n                        if (stackToItemY) {\r\n                            b = yAxis.getDataItemPositionY(stackToItemY, yField, openLocationY, stackToItemY.component.get(\"vcy\"));\r\n                        }\r\n                        else {\r\n                            b = yAxis.basePosition();\r\n                        }\r\n                    }\r\n                    else {\r\n                        b = yAxis.basePosition();\r\n                    }\r\n                }\r\n                dataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t });\r\n                fitH = true;\r\n            }\r\n            else if (axisCase == 1) {\r\n                let startLocation = this._aLocationY0 + openLocationY - 0.5;\r\n                let endLocation = this._aLocationY1 + locationY - 0.5;\r\n                if (height instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - height.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\r\n                b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, locationX, vcx, exactLocationX);\r\n                if (this._xOpenField !== this._xField) {\r\n                    l = xAxis.getDataItemPositionX(dataItem, xOpenField, openLocationX, vcx, exactLocationX);\r\n                }\r\n                else {\r\n                    if (stacked) {\r\n                        let stackToItemX = dataItem.get(\"stackToItemX\");\r\n                        if (stackToItemX) {\r\n                            l = xAxis.getDataItemPositionX(stackToItemX, xField, openLocationX, stackToItemX.component.get(\"vcx\"), exactLocationX);\r\n                        }\r\n                        else {\r\n                            l = xAxis.basePosition();\r\n                        }\r\n                    }\r\n                    else {\r\n                        l = xAxis.basePosition();\r\n                    }\r\n                }\r\n                fitW = true;\r\n                dataItem.setRaw(\"point\", { x: r, y: t + (b - t) / 2 });\r\n            }\r\n            else if (axisCase == 2) {\r\n                let startLocation = this._aLocationX0 + openLocationX - 0.5;\r\n                let endLocation = this._aLocationX1 + locationX - 0.5;\r\n                if (width instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - width.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\r\n                startLocation = this._aLocationY0 + openLocationY - 0.5;\r\n                endLocation = this._aLocationY1 + locationY - 0.5;\r\n                if (height instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - height.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\r\n                b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\r\n                dataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t + (b - t) / 2 });\r\n            }\r\n            this._applyGraphicsStates(dataItem, previousDataItem);\r\n            this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n            if ((l < xStart && r < xStart) || (l > xEnd && r > xEnd) || (t < yStart && b <= yStart) || (t >= yEnd && b > yEnd) || $type.isNaN(l) || $type.isNaN(t)) {\r\n                this._toggleColumn(dataItem, false);\r\n            }\r\n            else {\r\n                this._toggleColumn(dataItem, true);\r\n            }\r\n            let rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this._toggleColumn(dataItem, false);\r\n        }\r\n    }\r\n    _updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH) {\r\n        const width = graphics.get(\"width\");\r\n        const height = graphics.get(\"height\");\r\n        const maxWidth = graphics.get(\"maxWidth\");\r\n        const maxHeight = graphics.get(\"maxHeight\");\r\n        const ptl = this.getPoint(l, t);\r\n        const pbr = this.getPoint(r, b);\r\n        const tooltipPoint = dataItem.get(\"point\");\r\n        if (tooltipPoint) {\r\n            const point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\r\n            tooltipPoint.x = point.x + this._x;\r\n            tooltipPoint.y = point.y + this._y;\r\n        }\r\n        l = ptl.x;\r\n        r = pbr.x;\r\n        t = ptl.y;\r\n        b = pbr.y;\r\n        if ($type.isNumber(width)) {\r\n            const offset = ((r - l) - width) / 2;\r\n            l += offset;\r\n            r -= offset;\r\n        }\r\n        if ($type.isNumber(maxWidth) && maxWidth < Math.abs(r - l)) {\r\n            const offset = ((r - l) - maxWidth) / 2;\r\n            l += offset;\r\n            r -= offset;\r\n        }\r\n        if ($type.isNumber(height)) {\r\n            const offset = ((b - t) - height) / 2;\r\n            t += offset;\r\n            b -= offset;\r\n        }\r\n        if ($type.isNumber(maxHeight) && maxHeight < Math.abs(b - t)) {\r\n            const offset = ((b - t) - maxHeight) / 2;\r\n            t += offset;\r\n            b -= offset;\r\n        }\r\n        if (this.get(\"adjustBulletPosition\")) {\r\n            if (fitW) {\r\n                r = Math.min(Math.max(0, r), this._pw);\r\n                l = Math.min(Math.max(0, l), this._pw);\r\n            }\r\n            if (fitH) {\r\n                t = Math.min(Math.max(0, t), this._ph);\r\n                b = Math.min(Math.max(0, b), this._ph);\r\n            }\r\n        }\r\n        dataItem.setRaw(\"left\", l);\r\n        dataItem.setRaw(\"right\", r);\r\n        dataItem.setRaw(\"top\", t);\r\n        dataItem.setRaw(\"bottom\", b);\r\n        graphics.setPrivate(\"width\", r - l);\r\n        graphics.setPrivate(\"height\", b - t);\r\n        graphics.set(\"x\", l);\r\n        graphics.set(\"y\", b - (b - t));\r\n    }\r\n    _handleDataSetChange() {\r\n        super._handleDataSetChange();\r\n        $array.each(this._dataItems, (dataItem) => {\r\n            this._toggleColumn(dataItem, false);\r\n        });\r\n    }\r\n    _applyGraphicsStates(dataItem, previousDataItem) {\r\n        const graphics = dataItem.get(\"graphics\");\r\n        const dropFromOpen = graphics.states.lookup(\"dropFromOpen\");\r\n        const riseFromOpen = graphics.states.lookup(\"riseFromOpen\");\r\n        const dropFromPrevious = graphics.states.lookup(\"dropFromPrevious\");\r\n        const riseFromPrevious = graphics.states.lookup(\"riseFromPrevious\");\r\n        if (dropFromOpen || dropFromPrevious || riseFromOpen || riseFromPrevious) {\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const baseAxis = this.get(\"baseAxis\");\r\n            let open;\r\n            let close;\r\n            let previousClose;\r\n            if (baseAxis === xAxis && yAxis.isType(\"ValueAxis\")) {\r\n                open = dataItem.get(this._yOpenField);\r\n                close = dataItem.get(this._yField);\r\n                previousClose = previousDataItem.get(this._yField);\r\n            }\r\n            else if (baseAxis === yAxis && xAxis.isType(\"ValueAxis\")) {\r\n                open = dataItem.get(this._xOpenField);\r\n                close = dataItem.get(this._xField);\r\n                previousClose = previousDataItem.get(this._xField);\r\n            }\r\n            if ($type.isNumber(open) && $type.isNumber(close)) {\r\n                if (close < open) {\r\n                    if (dropFromOpen) {\r\n                        dropFromOpen.apply();\r\n                    }\r\n                }\r\n                else {\r\n                    if (riseFromOpen) {\r\n                        riseFromOpen.apply();\r\n                    }\r\n                }\r\n                if ($type.isNumber(previousClose)) {\r\n                    if (close < previousClose) {\r\n                        if (dropFromPrevious) {\r\n                            dropFromPrevious.apply();\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (riseFromPrevious) {\r\n                            riseFromPrevious.apply();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        super.disposeDataItem(dataItem);\r\n        const graphics = dataItem.get(\"graphics\");\r\n        if (graphics) {\r\n            this.columns.removeValue(graphics);\r\n            graphics.dispose();\r\n        }\r\n        const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n        if (rangeGraphics) {\r\n            $array.each(rangeGraphics, (graphics) => {\r\n                const list = graphics.getPrivate(\"list\");\r\n                if (list) {\r\n                    list.removeValue(graphics);\r\n                }\r\n                graphics.dispose();\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    hideDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            hideDataItem: { get: () => super.hideDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.hideDataItem.call(this, dataItem, duration)];\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                promises.push(graphics.hide(duration));\r\n            }\r\n            const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    promises.push(graphics.hide(duration));\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    _toggleColumn(dataItem, visible) {\r\n        const graphics = dataItem.get(\"graphics\");\r\n        if (graphics) {\r\n            graphics.setPrivate(\"visible\", visible);\r\n        }\r\n        const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n        if (rangeGraphics) {\r\n            $array.each(rangeGraphics, (graphics) => {\r\n                graphics.setPrivate(\"visible\", visible);\r\n            });\r\n        }\r\n        const bullets = dataItem.bullets;\r\n        if (bullets) {\r\n            $array.each(bullets, (bullet) => {\r\n                bullet.setPrivate(\"hidden\", !visible);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    showDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            showDataItem: { get: () => super.showDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.showDataItem.call(this, dataItem, duration)];\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                promises.push(graphics.show(duration));\r\n            }\r\n            const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    promises.push(graphics.show(duration));\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendMarker(dataItem) {\r\n        let legendDataItem = this.get(\"legendDataItem\");\r\n        if (this.get(\"useLastColorForLegendMarker\")) {\r\n            if (!dataItem) {\r\n                const lastDataItem = this.dataItems[this.endIndex() - 1];\r\n                if (lastDataItem) {\r\n                    dataItem = lastDataItem;\r\n                }\r\n            }\r\n        }\r\n        if (legendDataItem) {\r\n            let graphics = this.columns.template;\r\n            if (dataItem) {\r\n                let column = dataItem.get(\"graphics\");\r\n                if (column) {\r\n                    graphics = column;\r\n                }\r\n            }\r\n            const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n            if (markerRectangle) {\r\n                if (!legendDataItem.get(\"itemContainer\").get(\"disabled\")) {\r\n                    const ds = markerRectangle.states.lookup(\"default\");\r\n                    $array.each(visualSettings, (setting) => {\r\n                        const value = graphics.get(setting, this.get(setting));\r\n                        markerRectangle.set(setting, value);\r\n                        ds.set(setting, value);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getTooltipTarget(dataItem) {\r\n        if (this.get(\"seriesTooltipTarget\") == \"bullet\") {\r\n            return super._getTooltipTarget(dataItem);\r\n        }\r\n        let column = dataItem.get(\"graphics\");\r\n        if (column) {\r\n            return column;\r\n        }\r\n        return this;\r\n    }\r\n}\r\nObject.defineProperty(BaseColumnSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"BaseColumnSeries\"\r\n});\r\nObject.defineProperty(BaseColumnSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: XYSeries.classNames.concat([BaseColumnSeries.className])\r\n});\r\n//# sourceMappingURL=BaseColumnSeries.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Component } from \"../../../core/render/Component\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { List } from \"../../../core/util/List\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * A base class for all axes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Adding_axes} for more info\r\n */\r\nexport class Axis extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_isPanning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Array of minor data items.\r\n         */\r\n        Object.defineProperty(this, \"minorDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis label elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"labelsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis grid and fill elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds axis grid elements which goes above the series.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis bullet elements.\r\n         *\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, { isMeasured: false, width: p100, height: p100, position: \"absolute\" }))\r\n        });\r\n        /**\r\n         * A referenece to the the chart the axis belongs to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rangesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_panStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_panEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_sAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_eAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_skipSync\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A list of axis ranges.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n         * @default new List()\r\n         */\r\n        Object.defineProperty(this, \"axisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        Object.defineProperty(this, \"_seriesAxisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A control label that is invisible but is used to keep width the width of\r\n         * the axis constant.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Ghost_label} for more info\r\n         */\r\n        Object.defineProperty(this, \"ghostLabel\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_cursorPosition\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: -1\r\n        });\r\n        Object.defineProperty(this, \"_snapToSeries\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_seriesValuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_seriesAdded\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A container above the axis that can be used to add additional stuff into\r\n         * it. For example a legend, label, or an icon.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"axisHeader\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {\r\n                themeTags: [\"axis\", \"header\"],\r\n                position: \"absolute\",\r\n                background: Rectangle.new(this._root, {\r\n                    themeTags: [\"header\", \"background\"],\r\n                    fill: this._root.interfaceColors.get(\"background\")\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    _dispose() {\r\n        // these could be in other parents, so disposing just in case\r\n        this.gridContainer.dispose();\r\n        this.topGridContainer.dispose();\r\n        this.bulletsContainer.dispose();\r\n        this.labelsContainer.dispose();\r\n        this.axisHeader.dispose();\r\n        super._dispose();\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.setPrivate(\"updateScrollbar\", true);\r\n        this._disposers.push(this.axisRanges.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this.disposeDataItem(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._processAxisRange(change.value, [\"range\"]);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n        }));\r\n        const renderer = this.get(\"renderer\");\r\n        if (renderer) {\r\n            renderer.axis = this;\r\n            renderer.processAxis();\r\n        }\r\n        this.children.push(renderer);\r\n        this._createGhostLabel();\r\n    }\r\n    _createGhostLabel() {\r\n        const renderer = this.get(\"renderer\");\r\n        const ghostLabel = renderer.makeLabel(new DataItem(this, undefined, {}), []);\r\n        ghostLabel.adapters.disable(\"text\");\r\n        ghostLabel.setAll({ opacity: 0, tooltipText: undefined, tooltipHTML: undefined, interactive: false });\r\n        ghostLabel.events.disable();\r\n        this.ghostLabel = ghostLabel;\r\n    }\r\n    _updateFinals(_start, _end) {\r\n    }\r\n    /**\r\n     * Zooms the axis to relative locations.\r\n     *\r\n     * Both `start` and `end` are relative: 0 means start of the axis, 1 - end.\r\n     *\r\n     * @param   start     Relative start\r\n     * @param   end       Relative end\r\n     * @param   duration  Duration of the zoom animation in milliseconds\r\n     * @return            Zoom animation\r\n     */\r\n    zoom(start, end, duration, priority) {\r\n        if (this.get(\"zoomable\", true)) {\r\n            this._updateFinals(start, end);\r\n            if (this.get(\"start\") !== start || this.get(\"end\") != end) {\r\n                let sAnimation = this._sAnimation;\r\n                let eAnimation = this._eAnimation;\r\n                if (start > end) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n                if (start < -maxDeviation) {\r\n                    start = -maxDeviation;\r\n                }\r\n                if (end > 1 + maxDeviation) {\r\n                    end = 1 + maxDeviation;\r\n                }\r\n                let maxZoomFactor = this.getPrivate(\"maxZoomFactor\", this.get(\"maxZoomFactor\", 100));\r\n                let maxZoomFactorReal = maxZoomFactor;\r\n                if (!$type.isNumber(duration)) {\r\n                    duration = this.get(\"interpolationDuration\", 0);\r\n                }\r\n                if (!priority) {\r\n                    priority = \"end\";\r\n                }\r\n                if (end === 1 && start !== 0) {\r\n                    if (start < this.get(\"start\", 0)) {\r\n                        priority = \"start\";\r\n                    }\r\n                    else {\r\n                        priority = \"end\";\r\n                    }\r\n                }\r\n                if (start === 0 && end !== 1) {\r\n                    if (end > this.get(\"end\", 1)) {\r\n                        priority = \"end\";\r\n                    }\r\n                    else {\r\n                        priority = \"start\";\r\n                    }\r\n                }\r\n                let minZoomCount = this.get(\"minZoomCount\", 0);\r\n                const dataItems = this.dataItems;\r\n                if (dataItems && dataItems.length < minZoomCount) {\r\n                    minZoomCount = dataItems.length;\r\n                }\r\n                let maxZoomCount = this.get(\"maxZoomCount\", Infinity);\r\n                if ($type.isNumber(minZoomCount)) {\r\n                    maxZoomFactor = maxZoomFactorReal / minZoomCount;\r\n                }\r\n                let minZoomFactor = 1;\r\n                if ($type.isNumber(maxZoomCount)) {\r\n                    minZoomFactor = maxZoomFactorReal / maxZoomCount;\r\n                }\r\n                // need one more\r\n                if (start > end) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                // most likely we are dragging left scrollbar grip here, so we tend to modify end\r\n                if (priority === \"start\") {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            end = start + 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // add to the end\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                    //unless end is > 0\r\n                    if (end > 1 && end - start < 1 / maxZoomFactor) {\r\n                        //end = 1;\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                // most likely we are dragging right, so we modify left\r\n                else {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            start = end - 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // remove from start\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                    if (start < 0 && end - start < 1 / maxZoomFactor) {\r\n                        //start = 0;\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    end = start + 1 / maxZoomFactor;\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    start = end - 1 / maxZoomFactor;\r\n                }\r\n                if (maxZoomCount != null && minZoomCount != null && (start == this.get(\"start\") && end == this.get(\"end\"))) {\r\n                    const chart = this.chart;\r\n                    if (chart) {\r\n                        chart._handleAxisSelection(this, true);\r\n                    }\r\n                }\r\n                if (((sAnimation && sAnimation.playing && sAnimation.to == start) || this.get(\"start\") == start) && ((eAnimation && eAnimation.playing && eAnimation.to == end) || this.get(\"end\") == end)) {\r\n                    return;\r\n                }\r\n                if (duration > 0) {\r\n                    let easing = this.get(\"interpolationEasing\");\r\n                    let sAnimation, eAnimation;\r\n                    if (this.get(\"start\") != start) {\r\n                        sAnimation = this.animate({ key: \"start\", to: start, duration: duration, easing: easing });\r\n                    }\r\n                    if (this.get(\"end\") != end) {\r\n                        eAnimation = this.animate({ key: \"end\", to: end, duration: duration, easing: easing });\r\n                    }\r\n                    this._sAnimation = sAnimation;\r\n                    this._eAnimation = eAnimation;\r\n                    if (sAnimation) {\r\n                        return sAnimation;\r\n                    }\r\n                    else if (eAnimation) {\r\n                        return eAnimation;\r\n                    }\r\n                }\r\n                else {\r\n                    this.set(\"start\", start);\r\n                    this.set(\"end\", end);\r\n                    this.root.events.once(\"frameended\", () => {\r\n                        this.markDirtyKey(\"start\");\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (this._sAnimation) {\r\n                    this._sAnimation.stop();\r\n                }\r\n                if (this._eAnimation) {\r\n                    this._eAnimation.stop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A list of series using this axis.\r\n     *\r\n     * @return Series\r\n     */\r\n    get series() {\r\n        return this._series;\r\n    }\r\n    _processAxisRange(dataItem, themeTags) {\r\n        dataItem.setRaw(\"isRange\", true);\r\n        this._createAssets(dataItem, themeTags);\r\n        this._rangesDirty = true;\r\n        this._prepareDataItem(dataItem);\r\n        const above = dataItem.get(\"above\");\r\n        const container = this.topGridContainer;\r\n        const grid = dataItem.get(\"grid\");\r\n        if (above && grid) {\r\n            container.children.moveValue(grid);\r\n        }\r\n        const fill = dataItem.get(\"axisFill\");\r\n        if (above && fill) {\r\n            container.children.moveValue(fill);\r\n        }\r\n    }\r\n    _prepareDataItem(_dataItem, _index) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n    }\r\n    _calculateTotals() {\r\n    }\r\n    _updateAxisRanges() {\r\n        this._bullets = {};\r\n        this.axisRanges.each((axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n        $array.each(this._seriesAxisRanges, (axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const ghostLabel = this.ghostLabel;\r\n        if (ghostLabel) {\r\n            if (this.get(\"fixAxisSize\")) {\r\n                ghostLabel.set(\"visible\", true);\r\n            }\r\n            else {\r\n                ghostLabel.set(\"visible\", false);\r\n            }\r\n        }\r\n        if (this.isDirty(\"start\") || this.isDirty(\"end\")) {\r\n            const chart = this.chart;\r\n            if (chart) {\r\n                chart._updateCursor();\r\n            }\r\n            let start = this.get(\"start\", 0);\r\n            let end = this.get(\"end\", 1);\r\n            let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n            if (start < -maxDeviation) {\r\n                let delta = start + maxDeviation;\r\n                start = -maxDeviation;\r\n                this.setRaw(\"start\", start);\r\n                if (this.isDirty(\"end\")) {\r\n                    this.setRaw(\"end\", end - delta);\r\n                }\r\n            }\r\n            if (end > 1 + maxDeviation) {\r\n                let delta = end - 1 - maxDeviation;\r\n                end = 1 + maxDeviation;\r\n                this.setRaw(\"end\", end);\r\n                if (this.isDirty(\"start\")) {\r\n                    this.setRaw(\"start\", start - delta);\r\n                }\r\n            }\r\n        }\r\n        const renderer = this.get(\"renderer\");\r\n        renderer._start = this.get(\"start\");\r\n        renderer._end = this.get(\"end\");\r\n        renderer._inversed = renderer.get(\"inversed\", false);\r\n        renderer._axisLength = renderer.axisLength() / (renderer._end - renderer._start);\r\n        renderer._updateLC();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const tooltip = this.get(\"tooltip\");\r\n            if (tooltip) {\r\n                const rendererTags = renderer.get(\"themeTags\");\r\n                tooltip.addTag(\"axis\");\r\n                tooltip.addTag(this.className.toLowerCase());\r\n                tooltip._applyThemes();\r\n                if (rendererTags) {\r\n                    tooltip.set(\"themeTags\", $utils.mergeTags(tooltip.get(\"themeTags\"), rendererTags));\r\n                    tooltip.label._applyThemes();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipBounds() {\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            this.get(\"renderer\").updateTooltipBounds(tooltip);\r\n        }\r\n    }\r\n    _updateBounds() {\r\n        super._updateBounds();\r\n        this._updateTooltipBounds();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processChart(chart) {\r\n        this.chart = chart;\r\n        const renderer = this.get(\"renderer\");\r\n        renderer.chart = chart;\r\n        chart.gridContainer.children.push(this.gridContainer);\r\n        chart.topGridContainer.children.push(this.topGridContainer);\r\n        chart.axisHeadersContainer.children.push(this.axisHeader);\r\n        this.on(\"start\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        this.on(\"end\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        chart.plotContainer.onPrivate(\"width\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.plotContainer.onPrivate(\"height\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.processAxis(this);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hideDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, true);\r\n        return super.hideDataItem(dataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    showDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, false);\r\n        return super.showDataItem(dataItem);\r\n    }\r\n    _toggleFHDataItem(dataItem, forceHidden) {\r\n        const fh = \"forceHidden\";\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            label.set(fh, forceHidden);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.set(fh, forceHidden);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.set(fh, forceHidden);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.set(fh, forceHidden);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.set(fh, forceHidden);\r\n            }\r\n        }\r\n    }\r\n    _toggleDataItem(dataItem, visible) {\r\n        const label = dataItem.get(\"label\");\r\n        const v = \"visible\";\r\n        if (label) {\r\n            label.setPrivate(v, visible);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.setPrivate(v, visible);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.setPrivate(v, visible);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.setPrivate(v, visible);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.setPrivate(v, visible);\r\n            }\r\n        }\r\n    }\r\n    _createAssets(dataItem, tags, minor) {\r\n        var _a, _b, _c;\r\n        const renderer = this.get(\"renderer\");\r\n        let m = \"minor\";\r\n        const label = dataItem.get(\"label\");\r\n        if (!label) {\r\n            renderer.makeLabel(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = label.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_a = label.parent) === null || _a === void 0 ? void 0 : _a.children.removeValue(label);\r\n                renderer.makeLabel(dataItem, tags);\r\n                label.dispose();\r\n                renderer.labels.removeValue(label);\r\n            }\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (!grid) {\r\n            renderer.makeGrid(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = grid.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_b = grid.parent) === null || _b === void 0 ? void 0 : _b.children.removeValue(grid);\r\n                renderer.makeGrid(dataItem, tags);\r\n                grid.dispose();\r\n                renderer.grid.removeValue(grid);\r\n            }\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (!tick) {\r\n            renderer.makeTick(dataItem, tags);\r\n        }\r\n        else {\r\n            let remove = false;\r\n            let themeTags = tick.get(\"themeTags\");\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_c = tick.parent) === null || _c === void 0 ? void 0 : _c.children.removeValue(tick);\r\n                renderer.makeTick(dataItem, tags);\r\n                tick.dispose();\r\n                renderer.ticks.removeValue(tick);\r\n            }\r\n        }\r\n        if (!minor && !dataItem.get(\"axisFill\")) {\r\n            renderer.makeAxisFill(dataItem, tags);\r\n        }\r\n        else if (minor && !dataItem.get(\"axisFill\") && this.get(\"minorAxisFillsEnabled\")) {\r\n            renderer.makeAxisFill(dataItem, tags);\r\n        }\r\n        this._processBullet(dataItem);\r\n    }\r\n    _processBullet(dataItem) {\r\n        let bullet = dataItem.get(\"bullet\");\r\n        let axisBullet = this.get(\"bullet\");\r\n        if (!bullet && axisBullet && !dataItem.get(\"isRange\")) {\r\n            bullet = axisBullet(this._root, this, dataItem);\r\n        }\r\n        if (bullet) {\r\n            bullet.axis = this;\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite._setDataItem(dataItem);\r\n                dataItem.setRaw(\"bullet\", bullet);\r\n                if (!sprite.parent) {\r\n                    this.bulletsContainer.children.push(sprite);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart._updateChartLayout();\r\n            chart.axisHeadersContainer.markDirtySize();\r\n        }\r\n        this.get(\"renderer\")._updatePositions();\r\n        this._seriesAdded = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        super.disposeDataItem(dataItem);\r\n        const renderer = this.get(\"renderer\");\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            renderer.labels.removeValue(label);\r\n            label.dispose();\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            renderer.ticks.removeValue(tick);\r\n            tick.dispose();\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            renderer.grid.removeValue(grid);\r\n            grid.dispose();\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            renderer.axisFills.removeValue(axisFill);\r\n            axisFill.dispose();\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            bullet.dispose();\r\n        }\r\n    }\r\n    _updateGhost() {\r\n        this.setPrivate(\"cellWidth\", this.getCellWidthPosition() * this.get(\"renderer\").axisLength());\r\n        const ghostLabel = this.ghostLabel;\r\n        if (ghostLabel) {\r\n            if (!ghostLabel.isHidden()) {\r\n                const bounds = ghostLabel.localBounds();\r\n                const gWidth = Math.ceil(bounds.right - bounds.left);\r\n                let text = ghostLabel.get(\"text\");\r\n                $array.each(this.dataItems, (dataItem) => {\r\n                    const label = dataItem.get(\"label\");\r\n                    if (label && !label.isHidden()) {\r\n                        const bounds = label.localBounds();\r\n                        const w = Math.ceil(bounds.right - bounds.left);\r\n                        if (w > gWidth) {\r\n                            text = label.text._getText();\r\n                        }\r\n                    }\r\n                });\r\n                ghostLabel.set(\"text\", text);\r\n            }\r\n            let start = this.get(\"start\", 0);\r\n            let end = this.get(\"end\", 1);\r\n            this.get(\"renderer\").updateLabel(ghostLabel, start + (end - start) * 0.5);\r\n        }\r\n    }\r\n    _handleCursorPosition(position, snapToSeries) {\r\n        const renderer = this.get(\"renderer\");\r\n        position = renderer.toAxisPosition(position);\r\n        this._cursorPosition = position;\r\n        this._snapToSeries = snapToSeries;\r\n        this.updateTooltip();\r\n    }\r\n    /**\r\n     * Can be called when axis zoom changes and you need to update tooltip\r\n     * position.\r\n     */\r\n    updateTooltip() {\r\n        const snapToSeries = this._snapToSeries;\r\n        let position = this._cursorPosition;\r\n        const tooltip = this.get(\"tooltip\");\r\n        const renderer = this.get(\"renderer\");\r\n        if ($type.isNumber(position)) {\r\n            $array.each(this.series, (series) => {\r\n                if (series.get(\"baseAxis\") === this) {\r\n                    const dataItem = this.getSeriesItem(series, position, this.get(\"tooltipLocation\"));\r\n                    if (snapToSeries && snapToSeries.indexOf(series) != -1) {\r\n                        series.updateLegendMarker(dataItem);\r\n                        series.updateLegendValue(dataItem);\r\n                        series._settings.tooltipDataItem = dataItem;\r\n                    }\r\n                    else {\r\n                        series.showDataItemTooltip(dataItem);\r\n                        series.setRaw(\"tooltipDataItem\", dataItem);\r\n                    }\r\n                }\r\n            });\r\n            if (this.get(\"snapTooltip\")) {\r\n                position = this.roundAxisPosition(position, this.get(\"tooltipLocation\", 0.5));\r\n            }\r\n            this.setPrivateRaw(\"tooltipPosition\", position);\r\n            if (tooltip) {\r\n                renderer.updateTooltipBounds(tooltip);\r\n                if (!$type.isNaN(position)) {\r\n                    this._updateTooltipText(tooltip, position);\r\n                    renderer.positionTooltip(tooltip, position);\r\n                    if (position < this.get(\"start\", 0) || position > this.get(\"end\", 1)) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show(0);\r\n                    }\r\n                }\r\n                else {\r\n                    tooltip.hide(0);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipText(tooltip, position) {\r\n        tooltip.label.set(\"text\", this.getTooltipText(position));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    roundAxisPosition(position, _location) {\r\n        return position;\r\n    }\r\n    _handleSeriesRemoved() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorShow() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.show();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorHide() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processSeriesDataItem(_dataItem, _fields) {\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        this._rangesDirty = false;\r\n    }\r\n    /**\r\n     * Converts pixel coordinate to a relative position on axis.\r\n     *\r\n     * @param   coordinate  Coordinate\r\n     * @return              Relative position\r\n     */\r\n    coordinateToPosition(coordinate) {\r\n        const renderer = this.get(\"renderer\");\r\n        return renderer.toAxisPosition(coordinate / renderer.axisLength());\r\n    }\r\n    /**\r\n     * Converts relative position of the plot area to relative position of the\r\n     * axis with zoom taken into account.\r\n     *\r\n     * @param position Position\r\n     * @return Relative position\r\n     */\r\n    toAxisPosition(position) {\r\n        return this.get(\"renderer\").toAxisPosition(position);\r\n    }\r\n    /**\r\n     * Converts relative position of the axis to a global position taking current\r\n     * zoom into account (opposite to what `toAxisPosition` does).\r\n     *\r\n     * @since 5.4.2\r\n     * @param position Position\r\n     * @return Global position\r\n     */\r\n    toGlobalPosition(position) {\r\n        return this.get(\"renderer\").toGlobalPosition(position);\r\n    }\r\n    /**\r\n     * Adjusts position with inversed taken into account.\r\n     *\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        return this.get(\"renderer\").fixPosition(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    shouldGap(_dataItem, _nextItem, _autoGapCount, _fieldName) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Creates and returns an axis range object.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n     * @param   axisDataItem  Axis data item\r\n     * @return                Axis range\r\n     */\r\n    createAxisRange(axisDataItem) {\r\n        return this.axisRanges.push(axisDataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _groupSeriesData(_series) { }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        return 0.05;\r\n    }\r\n}\r\nObject.defineProperty(Axis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Axis\"\r\n});\r\nObject.defineProperty(Axis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Component.classNames.concat([Axis.className])\r\n});\r\n//# sourceMappingURL=Axis.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Axis } from \"./Axis\";\r\nimport { MultiDisposer } from \"../../../core/util/Disposer\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Creates a value axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/} for more info\r\n * @important\r\n */\r\nexport class ValueAxis extends Axis {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_dirtyExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirtySelectionExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dseHandled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_deltaMinMax\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_minReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_maxReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minRealLog\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_baseValue\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_syncDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minLogAdjusted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n        this._dirtyExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n        this._dirtySelectionExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\r\n        this.setPrivateRaw(\"name\", \"value\");\r\n        this.addTag(\"value\");\r\n        super._afterNew();\r\n    }\r\n    _prepareChildren() {\r\n        var _a;\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"syncWithAxis\")) {\r\n            let previousValue = this._prevSettings.syncWithAxis;\r\n            if (previousValue) {\r\n                if (this._syncDp) {\r\n                    this._syncDp.dispose();\r\n                }\r\n            }\r\n            let syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                this._syncDp = new MultiDisposer([\r\n                    syncWithAxis.onPrivate(\"selectionMinFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    }),\r\n                    syncWithAxis.onPrivate(\"selectionMaxFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n        let someDirty = false;\r\n        if (this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"maxPrecision\") || this.isDirty(\"numberFormat\")) {\r\n            someDirty = true;\r\n            (_a = this.ghostLabel) === null || _a === void 0 ? void 0 : _a.set(\"text\", \"\");\r\n        }\r\n        //if (this._dirtyExtremes || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"maxPrecision\")) {\r\n        if (this._sizeDirty || this._dirtyExtremes || this._valuesDirty || someDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"strictMinMaxSelection\")) {\r\n            this._getMinMax();\r\n            this._dirtyExtremes = false;\r\n        }\r\n        this._handleSizeDirty();\r\n        if (this._dirtySelectionExtremes && !this._isPanning && this.get(\"autoZoom\", true)) {\r\n            const chart = this.chart;\r\n            let getMM = false;\r\n            // #1563\r\n            if (chart) {\r\n                const letter = this.get(\"renderer\").getPrivate(\"letter\");\r\n                if (letter == \"Y\") {\r\n                    chart.xAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n                else if (letter == \"X\") {\r\n                    chart.yAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (getMM) {\r\n                this._getSelectionMinMax();\r\n            }\r\n            this._dirtySelectionExtremes = false;\r\n        }\r\n        this._groupData();\r\n        if (this._sizeDirty || this._valuesDirty || this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"min\") || this.isPrivateDirty(\"selectionMax\") || this.isPrivateDirty(\"selectionMin\") || this.isPrivateDirty(\"max\") || this.isPrivateDirty(\"step\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"logarithmic\")) {\r\n            this._handleRangeChange();\r\n            this._prepareAxisItems();\r\n            this._updateAxisRanges();\r\n        }\r\n        this._baseValue = this.baseValue();\r\n    }\r\n    _handleSizeDirty() {\r\n        if (this._sizeDirty && !this._dseHandled) {\r\n            this._dirtySelectionExtremes = true;\r\n            this._dseHandled = true;\r\n            if (this.getPrivate(\"selectionMinFinal\") != this.getPrivate(\"selectionMin\") || this.getPrivate(\"selectionMaxFinal\") != this.getPrivate(\"selectionMax\")) {\r\n                this._dirtySelectionExtremes = false;\r\n            }\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._dseHandled = false;\r\n    }\r\n    _groupData() {\r\n    }\r\n    _formatText(value) {\r\n        const numberFormat = this.get(\"numberFormat\");\r\n        const formatter = this.getNumberFormatter();\r\n        let text = \"\";\r\n        if (numberFormat) {\r\n            text = formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            text = formatter.format(value, undefined, this.getPrivate(\"stepDecimalPlaces\"));\r\n        }\r\n        return text;\r\n    }\r\n    _prepareAxisItems() {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            const logarithmic = this.get(\"logarithmic\");\r\n            const step = this.getPrivate(\"step\");\r\n            const selectionMin = this.getPrivate(\"selectionMin\");\r\n            const selectionMax = this.getPrivate(\"selectionMax\") + step;\r\n            let value = selectionMin - step;\r\n            let differencePower = 1;\r\n            let minLog = min;\r\n            if (logarithmic) {\r\n                value = this._minLogAdjusted;\r\n                if (value < selectionMin) {\r\n                    while (value < selectionMin) {\r\n                        value += step;\r\n                    }\r\n                }\r\n                minLog = value;\r\n                if (minLog <= 0) {\r\n                    let minRealLog = this._minRealLog;\r\n                    if (!$type.isNumber(minRealLog)) {\r\n                        minRealLog = 1;\r\n                    }\r\n                    minLog = Math.pow(10, Math.log(minRealLog) * Math.LOG10E);\r\n                    if (step < 1) {\r\n                        if ($type.isNumber(this._minRealLog)) {\r\n                            minLog = this._minRealLog;\r\n                        }\r\n                        else {\r\n                            minLog = Math.pow(10, -50);\r\n                        }\r\n                    }\r\n                }\r\n                differencePower = Math.log(selectionMax - step) * Math.LOG10E - Math.log(minLog) * Math.LOG10E;\r\n                if (differencePower > 2) {\r\n                    value = Math.pow(10, Math.log(minLog) * Math.LOG10E - 50);\r\n                }\r\n            }\r\n            /// minor grid\r\n            const renderer = this.get(\"renderer\");\r\n            const minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\r\n            const minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\r\n            let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n            const stepAdjusted = Math.round(step / stepPower);\r\n            let minorGridCount = 2;\r\n            if ($math.round(stepAdjusted / 5, 10) % 1 == 0) {\r\n                minorGridCount = 5;\r\n            }\r\n            if ($math.round(stepAdjusted / 10, 10) % 1 == 0) {\r\n                minorGridCount = 10;\r\n            }\r\n            let minorStep = step / minorGridCount;\r\n            // end of minor grid\r\n            let i = 0;\r\n            let m = 0;\r\n            let previous = -Infinity;\r\n            while (value < selectionMax) {\r\n                let dataItem;\r\n                if (this.dataItems.length < i + 1) {\r\n                    dataItem = new DataItem(this, undefined, {});\r\n                    this._dataItems.push(dataItem);\r\n                    this.processDataItem(dataItem);\r\n                }\r\n                else {\r\n                    dataItem = this.dataItems[i];\r\n                }\r\n                this._createAssets(dataItem, []);\r\n                this._toggleDataItem(dataItem, true);\r\n                dataItem.setRaw(\"value\", value);\r\n                const label = dataItem.get(\"label\");\r\n                if (label) {\r\n                    label.set(\"text\", this._formatText(value));\r\n                }\r\n                this._prepareDataItem(dataItem);\r\n                let nextValue = value;\r\n                if (!logarithmic) {\r\n                    nextValue += step;\r\n                }\r\n                else {\r\n                    if (differencePower > 2) {\r\n                        nextValue = Math.pow(10, Math.log(minLog) * Math.LOG10E + i - 50);\r\n                    }\r\n                    else {\r\n                        nextValue += step;\r\n                    }\r\n                }\r\n                // minor grid\r\n                if (minorGridEnabled) {\r\n                    let minorValue = value + minorStep;\r\n                    if (logarithmic) {\r\n                        if (differencePower > 2) {\r\n                            let minorMinMaxStep = this._adjustMinMax(value, nextValue, 10);\r\n                            minorStep = minorMinMaxStep.step;\r\n                        }\r\n                        minorValue = value + minorStep;\r\n                    }\r\n                    while (minorValue < nextValue - step * 0.00000000001) {\r\n                        let minorDataItem;\r\n                        if (this.minorDataItems.length < m + 1) {\r\n                            minorDataItem = new DataItem(this, undefined, {});\r\n                            this.minorDataItems.push(minorDataItem);\r\n                            this.processDataItem(minorDataItem);\r\n                        }\r\n                        else {\r\n                            minorDataItem = this.minorDataItems[m];\r\n                        }\r\n                        this._createAssets(minorDataItem, [\"minor\"], true);\r\n                        this._toggleDataItem(minorDataItem, true);\r\n                        minorDataItem.setRaw(\"value\", minorValue);\r\n                        const minorLabel = minorDataItem.get(\"label\");\r\n                        if (minorLabel) {\r\n                            if (minorLabelsEnabled) {\r\n                                minorLabel.set(\"text\", this._formatText(minorValue));\r\n                            }\r\n                            else {\r\n                                minorLabel.setPrivate(\"visible\", false);\r\n                            }\r\n                        }\r\n                        this._prepareDataItem(minorDataItem);\r\n                        minorValue += minorStep;\r\n                        m++;\r\n                    }\r\n                }\r\n                value = nextValue;\r\n                if (previous == value) {\r\n                    break;\r\n                }\r\n                let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n                if (stepPower < 1 && !logarithmic) {\r\n                    // exponent is less then 1 too. Count decimals of exponent\r\n                    let decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 2;\r\n                    // round value to avoid floating point issues\r\n                    value = $math.round(value, decCount);\r\n                }\r\n                i++;\r\n                // #103520\r\n                if (logarithmic && differencePower <= 2) {\r\n                    if (value - step < step) {\r\n                        value = step;\r\n                    }\r\n                }\r\n                previous = value;\r\n            }\r\n            for (let j = i; j < this.dataItems.length; j++) {\r\n                this._toggleDataItem(this.dataItems[j], false);\r\n            }\r\n            for (let j = m; j < this.minorDataItems.length; j++) {\r\n                this._toggleDataItem(this.minorDataItems[j], false);\r\n            }\r\n            $array.each(this.series, (series) => {\r\n                if (series.inited) {\r\n                    series._markDirtyAxes();\r\n                }\r\n            });\r\n            this._updateGhost();\r\n        }\r\n    }\r\n    _prepareDataItem(dataItem, count) {\r\n        let renderer = this.get(\"renderer\");\r\n        let value = dataItem.get(\"value\");\r\n        let endValue = dataItem.get(\"endValue\");\r\n        let position = this.valueToPosition(value);\r\n        let endPosition = position;\r\n        let fillEndPosition = this.valueToPosition(value + this.getPrivate(\"step\"));\r\n        if ($type.isNumber(endValue)) {\r\n            endPosition = this.valueToPosition(endValue);\r\n            fillEndPosition = endPosition;\r\n        }\r\n        if (dataItem.get(\"isRange\")) {\r\n            if (endValue == null) {\r\n                fillEndPosition = position;\r\n            }\r\n        }\r\n        let labelEndPosition = endPosition;\r\n        let labelEndValue = dataItem.get(\"labelEndValue\");\r\n        if (labelEndValue != null) {\r\n            labelEndPosition = this.valueToPosition(labelEndValue);\r\n        }\r\n        renderer.updateLabel(dataItem.get(\"label\"), position, labelEndPosition, count);\r\n        const grid = dataItem.get(\"grid\");\r\n        renderer.updateGrid(grid, position, endPosition);\r\n        if (grid) {\r\n            if (value == this.get(\"baseValue\", 0)) {\r\n                grid.addTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n            else if (grid.hasTag(\"base\")) {\r\n                grid.removeTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n        }\r\n        renderer.updateTick(dataItem.get(\"tick\"), position, labelEndPosition, count);\r\n        renderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\r\n        this._processBullet(dataItem);\r\n        renderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\r\n        if (!dataItem.get(\"isRange\")) {\r\n            const fillRule = this.get(\"fillRule\");\r\n            if (fillRule) {\r\n                fillRule(dataItem);\r\n            }\r\n        }\r\n    }\r\n    _handleRangeChange() {\r\n        let selectionMin = this.positionToValue(this.get(\"start\", 0));\r\n        let selectionMax = this.positionToValue(this.get(\"end\", 1));\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let stepDecimalPlaces = $utils.decimalPlaces(minMaxStep.step);\r\n        this.setPrivateRaw(\"stepDecimalPlaces\", stepDecimalPlaces);\r\n        selectionMin = $math.round(selectionMin, stepDecimalPlaces);\r\n        selectionMax = $math.round(selectionMax, stepDecimalPlaces);\r\n        minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let step = minMaxStep.step;\r\n        selectionMin = minMaxStep.min;\r\n        selectionMax = minMaxStep.max;\r\n        if (this.getPrivate(\"selectionMin\") !== selectionMin || this.getPrivate(\"selectionMax\") !== selectionMax || this.getPrivate(\"step\") !== step) {\r\n            // do not change to setPrivate, will cause SO\r\n            this.setPrivateRaw(\"selectionMin\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMax\", selectionMax);\r\n            this.setPrivateRaw(\"step\", step);\r\n        }\r\n    }\r\n    /**\r\n     * Converts a relative position to a corresponding numeric value from axis\r\n     * scale.\r\n     *\r\n     * @param   position  Relative position\r\n     * @return            Value\r\n     */\r\n    positionToValue(position) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return position * (max - min) + min;\r\n        }\r\n        else {\r\n            return Math.pow(Math.E, (position * ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E)) + Math.log(min) * Math.LOG10E) / Math.LOG10E);\r\n        }\r\n    }\r\n    /**\r\n     * Convers value to a relative position on axis.\r\n     *\r\n     * @param   value  Value\r\n     * @return         Relative position\r\n     */\r\n    valueToPosition(value) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    valueToFinalPosition(value) {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getX(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getY(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateX(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionX(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedXValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateY(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionY(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedYValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * Returns relative position of axis' `baseValue`.\r\n     *\r\n     * @return  Base value position\r\n     */\r\n    basePosition() {\r\n        return this.valueToPosition(this.baseValue());\r\n    }\r\n    /**\r\n     * Base value of the [[ValueAxis]], which determines positive and negative\r\n     * values.\r\n     *\r\n     * @return Base value\r\n     */\r\n    baseValue() {\r\n        const min = Math.min(this.getPrivate(\"minFinal\", -Infinity), this.getPrivate(\"selectionMin\", -Infinity));\r\n        const max = Math.max(this.getPrivate(\"maxFinal\", Infinity), this.getPrivate(\"selectionMax\", Infinity));\r\n        let baseValue = this.get(\"baseValue\", 0);\r\n        if (baseValue < min) {\r\n            baseValue = min;\r\n        }\r\n        if (baseValue > max) {\r\n            baseValue = max;\r\n        }\r\n        return baseValue;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    cellEndValue(value) {\r\n        return value;\r\n    }\r\n    fixSmallStep(step) {\r\n        // happens because of floating point error\r\n        if (1 + step === 1) {\r\n            step *= 2;\r\n            return this.fixSmallStep(step);\r\n        }\r\n        return step;\r\n    }\r\n    _fixMin(min) {\r\n        return min;\r\n    }\r\n    _fixMax(max) {\r\n        return max;\r\n    }\r\n    _calculateTotals() {\r\n        if (this.get(\"calculateTotals\")) {\r\n            let series = this.series[0];\r\n            if (series) {\r\n                let startIndex = series.startIndex();\r\n                if (series.dataItems.length > 0) {\r\n                    if (startIndex > 0) {\r\n                        startIndex--;\r\n                    }\r\n                    let endIndex = series.endIndex();\r\n                    if (endIndex < series.dataItems.length) {\r\n                        endIndex++;\r\n                    }\r\n                    let field;\r\n                    let vc;\r\n                    if (series.get(\"yAxis\") == this) {\r\n                        field = \"valueY\";\r\n                        vc = \"vcy\";\r\n                    }\r\n                    else if (series.get(\"xAxis\") == this) {\r\n                        field = \"valueX\";\r\n                        vc = \"vcx\";\r\n                    }\r\n                    let fieldWorking = field + \"Working\";\r\n                    if (field) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            let sum = 0;\r\n                            let total = 0;\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            sum += value;\r\n                                            total += Math.abs(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            dataItem.set((field + \"Total\"), total);\r\n                                            dataItem.set((field + \"Sum\"), sum);\r\n                                            let totalPercent = value / total * 100;\r\n                                            if (total == 0) {\r\n                                                totalPercent = 0;\r\n                                            }\r\n                                            dataItem.set((field + \"TotalPercent\"), totalPercent);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getSelectionMinMax() {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        const minDefined = this.get(\"min\");\r\n        const maxDefined = this.get(\"max\");\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (this.get(\"extraMin\") == null) {\r\n                extraMin = 0.1;\r\n            }\r\n            if (this.get(\"extraMax\") == null) {\r\n                extraMax = 0.2;\r\n            }\r\n        }\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        const selectionStrictMinMax = this.get(\"strictMinMaxSelection\");\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            let selectionMin = max;\r\n            let selectionMax = min;\r\n            $array.each(this.series, (series) => {\r\n                if (!series.get(\"ignoreMinMax\")) {\r\n                    let seriesMin;\r\n                    let seriesMax;\r\n                    const outOfSelection = series.getPrivate(\"outOfSelection\");\r\n                    if (series.get(\"xAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minX = series.getPrivate(\"minX\");\r\n                            let maxX = series.getPrivate(\"maxX\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minX = undefined;\r\n                                maxX = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinX\", minX);\r\n                            seriesMax = series.getPrivate(\"selectionMaxX\", maxX);\r\n                        }\r\n                    }\r\n                    else if (series.get(\"yAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minY = series.getPrivate(\"minY\");\r\n                            let maxY = series.getPrivate(\"maxY\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minY = undefined;\r\n                                maxY = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinY\", minY);\r\n                            seriesMax = series.getPrivate(\"selectionMaxY\", maxY);\r\n                        }\r\n                    }\r\n                    if (!series.isHidden() && !series.isShowing()) {\r\n                        if ($type.isNumber(seriesMin)) {\r\n                            selectionMin = Math.min(selectionMin, seriesMin);\r\n                        }\r\n                        if ($type.isNumber(seriesMax)) {\r\n                            selectionMax = Math.max(selectionMax, seriesMax);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.axisRanges.each((range) => {\r\n                if (range.get(\"affectsMinMax\")) {\r\n                    let value = range.get(\"value\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                    value = range.get(\"endValue\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                }\r\n            });\r\n            if (selectionMin > selectionMax) {\r\n                [selectionMin, selectionMax] = [selectionMax, selectionMin];\r\n            }\r\n            if ($type.isNumber(minDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = min;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._minReal)) {\r\n                    selectionMin = this._minReal;\r\n                }\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._maxReal)) {\r\n                    selectionMax = this._maxReal;\r\n                }\r\n            }\r\n            if (selectionMin === selectionMax) {\r\n                let smin = selectionMin;\r\n                selectionMin -= this._deltaMinMax;\r\n                selectionMax += this._deltaMinMax;\r\n                if (selectionMin < min) {\r\n                    let d = smin - min;\r\n                    if (d == 0) {\r\n                        d = this._deltaMinMax;\r\n                    }\r\n                    selectionMin = smin - d;\r\n                    selectionMax = smin + d;\r\n                    strictMinMax = true;\r\n                }\r\n                let minMaxStep2 = this._adjustMinMax(selectionMin, selectionMax, gridCount, strictMinMax);\r\n                selectionMin = minMaxStep2.min;\r\n                selectionMax = minMaxStep2.max;\r\n            }\r\n            let selectionMinReal = selectionMin;\r\n            let selectionMaxReal = selectionMax;\r\n            let delta = selectionMax - selectionMin;\r\n            selectionMin -= delta * extraMin;\r\n            selectionMax += delta * extraMax;\r\n            let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount);\r\n            selectionMin = minMaxStep.min;\r\n            selectionMax = minMaxStep.max;\r\n            selectionMin = $math.fitToRange(selectionMin, min, max);\r\n            selectionMax = $math.fitToRange(selectionMax, min, max);\r\n            // do it for the second time !important\t\t\t\r\n            minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n            if (!strictMinMax) {\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            const syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                minMaxStep = this._syncAxes(selectionMin, selectionMax, minMaxStep.step, syncWithAxis.getPrivate(\"selectionMinFinal\", syncWithAxis.getPrivate(\"minFinal\", 0)), syncWithAxis.getPrivate(\"selectionMaxFinal\", syncWithAxis.getPrivate(\"maxFinal\", 1)), syncWithAxis.getPrivate(\"selectionStepFinal\", syncWithAxis.getPrivate(\"step\", 1)));\r\n                if (minMaxStep.min < min) {\r\n                    minMaxStep.min = min;\r\n                }\r\n                if (minMaxStep.max > max) {\r\n                    minMaxStep.max = max;\r\n                }\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = Math.max(selectionMin, minDefined);\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = Math.min(selectionMax, maxDefined);\r\n                }\r\n            }\r\n            if (selectionStrictMinMax) {\r\n                selectionMin = selectionMinReal - (selectionMaxReal - selectionMinReal) * extraMin;\r\n                selectionMax = selectionMaxReal + (selectionMaxReal - selectionMinReal) * extraMax;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = selectionMinReal;\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = selectionMaxReal;\r\n                }\r\n                if (selectionMax - selectionMin <= 0.00000001) {\r\n                    selectionMin -= this._deltaMinMax;\r\n                    selectionMax += this._deltaMinMax;\r\n                }\r\n                let delta = selectionMax - selectionMin;\r\n                selectionMin -= delta * extraMin;\r\n                selectionMax += delta * extraMax;\r\n            }\r\n            if (this.get(\"logarithmic\")) {\r\n                if (selectionMin <= 0) {\r\n                    selectionMin = selectionMinReal * (1 - Math.min(extraMin, 0.99));\r\n                }\r\n                if (selectionMin < min) {\r\n                    selectionMin = min;\r\n                }\r\n                if (selectionMax > max) {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            let len = Math.min(20, Math.ceil(Math.log(this.getPrivate(\"maxZoomFactor\", 100) + 1) / Math.LN10) + 2);\r\n            let start = $math.round(this.valueToFinalPosition(selectionMin), len);\r\n            let end = $math.round(this.valueToFinalPosition(selectionMax), len);\r\n            this.setPrivateRaw(\"selectionMinFinal\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMaxFinal\", selectionMax);\r\n            this.setPrivateRaw(\"selectionStepFinal\", minMaxStep.step);\r\n            this.zoom(start, end);\r\n        }\r\n    }\r\n    _getMinMax() {\r\n        let minDefined = this.get(\"min\");\r\n        let maxDefined = this.get(\"max\");\r\n        let min = Infinity;\r\n        let max = -Infinity;\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (!this.get(\"strictMinMax\")) {\r\n                if (this.get(\"extraMin\") == null) {\r\n                    extraMin = 0.1;\r\n                }\r\n                if (this.get(\"extraMax\") == null) {\r\n                    extraMax = 0.2;\r\n                }\r\n            }\r\n        }\r\n        let minDiff = Infinity;\r\n        $array.each(this.series, (series) => {\r\n            if (!series.get(\"ignoreMinMax\")) {\r\n                let seriesMin;\r\n                let seriesMax;\r\n                if (series.get(\"xAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minX\");\r\n                    seriesMax = series.getPrivate(\"maxX\");\r\n                }\r\n                else if (series.get(\"yAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minY\");\r\n                    seriesMax = series.getPrivate(\"maxY\");\r\n                }\r\n                if ($type.isNumber(seriesMin) && $type.isNumber(seriesMax)) {\r\n                    min = Math.min(min, seriesMin);\r\n                    max = Math.max(max, seriesMax);\r\n                    let diff = seriesMax - seriesMin;\r\n                    if (diff <= 0) {\r\n                        diff = Math.abs(seriesMax / 100);\r\n                    }\r\n                    if (diff < minDiff) {\r\n                        minDiff = diff;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.axisRanges.each((range) => {\r\n            if (range.get(\"affectsMinMax\")) {\r\n                let value = range.get(\"value\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n                value = range.get(\"endValue\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n            }\r\n        });\r\n        if (this.get(\"logarithmic\")) {\r\n            let treatZeroAs = this.get(\"treatZeroAs\");\r\n            if ($type.isNumber(treatZeroAs)) {\r\n                if (min <= 0) {\r\n                    min = treatZeroAs;\r\n                }\r\n            }\r\n            if (min <= 0) {\r\n                new Error(\"Logarithmic value axis can not have values <= 0.\");\r\n            }\r\n        }\r\n        if (min === 0 && max === 0) {\r\n            max = 0.9;\r\n            min = -0.9;\r\n        }\r\n        if ($type.isNumber(minDefined)) {\r\n            min = minDefined;\r\n        }\r\n        if ($type.isNumber(maxDefined)) {\r\n            max = maxDefined;\r\n        }\r\n        // meaning no min/max found on series/ranges and no min/max was defined\r\n        if (min === Infinity || max === -Infinity) {\r\n            this.setPrivate(\"minFinal\", undefined);\r\n            this.setPrivate(\"maxFinal\", undefined);\r\n            return;\r\n        }\r\n        if (min > max) {\r\n            [min, max] = [max, min];\r\n        }\r\n        const initialMin = min;\r\n        const initialMax = max;\r\n        // adapter\r\n        let minAdapted = this.adapters.fold(\"min\", min);\r\n        let maxAdapted = this.adapters.fold(\"max\", max);\r\n        this._minRealLog = min;\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        // DateAxis does some magic here\r\n        min = this._fixMin(min);\r\n        max = this._fixMax(max);\r\n        // this happens if starLocation and endLocation are 0.5 and DateAxis has only one date\t\t\r\n        if (max - min <= 1 / Math.pow(10, 15)) {\r\n            if (max - min !== 0) {\r\n                this._deltaMinMax = (max - min) / 2;\r\n            }\r\n            else {\r\n                this._getDelta(max);\r\n            }\r\n            min -= this._deltaMinMax;\r\n            max += this._deltaMinMax;\r\n        }\r\n        // add extras\r\n        min -= (max - min) * extraMin;\r\n        max += (max - min) * extraMax;\r\n        if (this.get(\"logarithmic\")) {\r\n            // don't let min go below 0 if real min is >= 0\r\n            if (min < 0 && initialMin >= 0) {\r\n                min = 0;\r\n            }\r\n            // don't let max go above 0 if real max is <= 0\r\n            if (max > 0 && initialMax <= 0) {\r\n                max = 0;\r\n            }\r\n        }\r\n        this._minReal = min;\r\n        this._maxReal = max;\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        let strictMinMaxSelection = this.get(\"strictMinMaxSelection\", false);\r\n        if (strictMinMaxSelection) {\r\n            strictMinMax = strictMinMaxSelection;\r\n        }\r\n        let strict = strictMinMax;\r\n        if ($type.isNumber(maxDefined)) {\r\n            strict = true;\r\n        }\r\n        let gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(min, max, gridCount, strict);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // do it for the second time with strict true (importat!)\r\n        minMaxStep = this._adjustMinMax(min, max, gridCount, true);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // return min max if strict\r\n        if (strictMinMax) {\r\n            if ($type.isNumber(minDefined)) {\r\n                min = minDefined;\r\n            }\r\n            else {\r\n                min = this._minReal;\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                max = maxDefined;\r\n            }\r\n            else {\r\n                max = this._maxReal;\r\n            }\r\n            if (max - min <= 0.00000001) {\r\n                min -= this._deltaMinMax;\r\n                max += this._deltaMinMax;\r\n            }\r\n            let delta = max - min;\r\n            min -= delta * extraMin;\r\n            max += delta * extraMax;\r\n        }\r\n        minAdapted = this.adapters.fold(\"min\", min);\r\n        maxAdapted = this.adapters.fold(\"max\", max);\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        if (minDiff == Infinity) {\r\n            minDiff = (max - min);\r\n        }\r\n        // this is to avoid floating point number error\r\n        let decCount = Math.round(Math.abs(Math.log(Math.abs(max - min)) * Math.LOG10E)) + 5;\r\n        min = $math.round(min, decCount);\r\n        max = $math.round(max, decCount);\r\n        const syncWithAxis = this.get(\"syncWithAxis\");\r\n        if (syncWithAxis) {\r\n            minMaxStep = this._syncAxes(min, max, minMaxStep.step, syncWithAxis.getPrivate(\"minFinal\", syncWithAxis.getPrivate(\"min\", 0)), syncWithAxis.getPrivate(\"maxFinal\", syncWithAxis.getPrivate(\"max\", 1)), syncWithAxis.getPrivate(\"step\", 1));\r\n            min = minMaxStep.min;\r\n            max = minMaxStep.max;\r\n        }\r\n        this.setPrivateRaw(\"maxZoomFactor\", Math.max(1, Math.ceil((max - min) / minDiff * this.get(\"maxZoomFactor\", 100))));\r\n        this._fixZoomFactor();\r\n        if (this.get(\"logarithmic\")) {\r\n            this._minLogAdjusted = min;\r\n            min = this._minReal;\r\n            max = this._maxReal;\r\n            if (min <= 0) {\r\n                min = initialMin * (1 - Math.min(extraMin, 0.99));\r\n            }\r\n        }\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            if (this.getPrivate(\"minFinal\") !== min || this.getPrivate(\"maxFinal\") !== max) {\r\n                this.setPrivate(\"minFinal\", min);\r\n                this.setPrivate(\"maxFinal\", max);\r\n                this._saveMinMax(min, max);\r\n                const duration = this.get(\"interpolationDuration\", 0);\r\n                const easing = this.get(\"interpolationEasing\");\r\n                this.animatePrivate({ key: \"min\", to: min, duration, easing });\r\n                this.animatePrivate({ key: \"max\", to: max, duration, easing });\r\n            }\r\n        }\r\n    }\r\n    _fixZoomFactor() {\r\n    }\r\n    _getDelta(max) {\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(max)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        this._deltaMinMax = power;\r\n    }\r\n    _saveMinMax(_min, _max) {\r\n    }\r\n    _adjustMinMax(min, max, gridCount, strictMode) {\r\n        // will fail if 0\r\n        if (gridCount <= 1) {\r\n            gridCount = 1;\r\n        }\r\n        gridCount = Math.round(gridCount);\r\n        let initialMin = min;\r\n        let initialMax = max;\r\n        let difference = max - min;\r\n        // in case min and max is the same, use max\r\n        if (difference === 0) {\r\n            difference = Math.abs(max);\r\n        }\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        let extra = power;\r\n        if (strictMode) {\r\n            extra = 0;\r\n        }\r\n        // round down min\r\n        if (strictMode) {\r\n            min = Math.floor(min / power) * power;\r\n            // round up max\r\n            max = Math.ceil(max / power) * power;\r\n        }\r\n        else {\r\n            min = Math.ceil(min / power) * power - extra;\r\n            // round up max\r\n            max = Math.floor(max / power) * power + extra;\r\n        }\r\n        // don't let min go below 0 if real min is >= 0\r\n        if (min < 0 && initialMin >= 0) {\r\n            min = 0;\r\n        }\r\n        // don't let max go above 0 if real max is <= 0\r\n        if (max > 0 && initialMax <= 0) {\r\n            max = 0;\r\n        }\r\n        exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        power = Math.pow(10, Math.floor(exponent));\r\n        power = power / 100; // used to be 10 in v4, but this caused issue that there could be limited number of grids with even very small minGridDistance\r\n        // approximate difference between two grid lines\r\n        let step = Math.ceil((difference / gridCount) / power) * power;\r\n        let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n        // the step should divide by  2, 5, and 10.\r\n        let stepDivisor = Math.ceil(step / stepPower); // number 0 - 10\r\n        if (stepDivisor > 5) {\r\n            stepDivisor = 10;\r\n        }\r\n        else if (stepDivisor <= 5 && stepDivisor > 2) {\r\n            stepDivisor = 5;\r\n        }\r\n        // now get real step\r\n        step = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\r\n        let maxPrecision = this.get(\"maxPrecision\");\r\n        if ($type.isNumber(maxPrecision)) {\r\n            let ceiledStep = $math.ceil(step, maxPrecision);\r\n            if (maxPrecision < Number.MAX_VALUE && step !== ceiledStep) {\r\n                step = ceiledStep;\r\n                if (step == 0) {\r\n                    step = 1;\r\n                }\r\n            }\r\n        }\r\n        let decCount = 0;\r\n        // in case numbers are smaller than 1\r\n        if (stepPower < 1) {\r\n            // exponent is less then 1 too. Count decimals of exponent\r\n            decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\r\n            // round step\r\n            step = $math.round(step, decCount);\r\n        }\r\n        // final min and max\r\n        let minCount = Math.floor(min / step);\r\n        min = $math.round(step * minCount, decCount);\r\n        let maxCount;\r\n        if (!strictMode) {\r\n            maxCount = Math.ceil(max / step);\r\n        }\r\n        else {\r\n            maxCount = Math.floor(max / step);\r\n        }\r\n        if (maxCount === minCount) {\r\n            maxCount++;\r\n        }\r\n        max = $math.round(step * maxCount, decCount);\r\n        if (max < initialMax) {\r\n            max = max + step;\r\n        }\r\n        if (min > initialMin) {\r\n            min = min - step;\r\n        }\r\n        step = this.fixSmallStep(step);\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns text to be used in an axis tooltip for specific relative position.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Tooltip text\r\n     */\r\n    getTooltipText(position, _adjustPosition) {\r\n        const numberFormat = this.get(\"tooltipNumberFormat\", this.get(\"numberFormat\"));\r\n        const formatter = this.getNumberFormatter();\r\n        const extraDecimals = this.get(\"extraTooltipPrecision\", 0);\r\n        const decimals = this.getPrivate(\"stepDecimalPlaces\", 0) + extraDecimals;\r\n        const value = $math.round(this.positionToValue(position), decimals);\r\n        if (numberFormat) {\r\n            return formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            return formatter.format(value, undefined, decimals);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a data item from series that is closest to the `position`.\r\n     *\r\n     * @param   series    Series\r\n     * @param   position  Relative position\r\n     * @return            Data item\r\n     */\r\n    getSeriesItem(series, position) {\r\n        let fieldName = (this.getPrivate(\"name\") + this.get(\"renderer\").getPrivate(\"letter\"));\r\n        let value = this.positionToValue(position);\r\n        let index = undefined;\r\n        let oldDiff;\r\n        $array.each(series.dataItems, (dataItem, i) => {\r\n            const diff = Math.abs(dataItem.get(fieldName) - value);\r\n            if (index === undefined || diff < oldDiff) {\r\n                index = i;\r\n                oldDiff = diff;\r\n            }\r\n        });\r\n        if (index != null) {\r\n            return series.dataItems[index];\r\n        }\r\n    }\r\n    /**\r\n     * Zooms the axis to specific `start` and `end` values.\r\n     *\r\n     * Optional `duration` specifies duration of zoom animation in milliseconds.\r\n     *\r\n     * @param  start     Start value\r\n     * @param  end       End value\r\n     * @param  duration  Duration in milliseconds\r\n     */\r\n    zoomToValues(start, end, duration) {\r\n        const min = this.getPrivate(\"minFinal\", this.getPrivate(\"min\", 0));\r\n        const max = this.getPrivate(\"maxFinal\", this.getPrivate(\"max\", 1));\r\n        if (this.getPrivate(\"min\") != null && this.getPrivate(\"max\") != null) {\r\n            this.zoom((start - min) / (max - min), (end - min) / (max - min), duration);\r\n        }\r\n    }\r\n    /**\r\n     * Syncs with a target axis.\r\n     *\r\n     * @param  min  Min\r\n     * @param  max  Max\r\n     * @param  step Step\r\n     */\r\n    _syncAxes(min, max, step, syncMin, syncMax, syncStep) {\r\n        let axis = this.get(\"syncWithAxis\");\r\n        if (axis) {\r\n            let count = Math.round(syncMax - syncMin) / syncStep;\r\n            let currentCount = Math.round((max - min) / step);\r\n            let gridCount = this.get(\"renderer\").gridCount();\r\n            if ($type.isNumber(count) && $type.isNumber(currentCount)) {\r\n                let synced = false;\r\n                let c = 0;\r\n                let diff = (max - min) * 0.01;\r\n                let omin = min;\r\n                let omax = max;\r\n                let ostep = step;\r\n                while (synced != true) {\r\n                    synced = this._checkSync(omin, omax, ostep, count);\r\n                    c++;\r\n                    if (c > 500) {\r\n                        synced = true;\r\n                    }\r\n                    if (!synced) {\r\n                        if (c / 3 == Math.round(c / 3)) {\r\n                            omin = min - diff * c;\r\n                            if (min >= 0 && omin < 0) {\r\n                                omin = 0;\r\n                            }\r\n                        }\r\n                        else {\r\n                            omax = max + diff * c;\r\n                            if (omax <= 0 && omax > 0) {\r\n                                omax = 0;\r\n                            }\r\n                        }\r\n                        let minMaxStep = this._adjustMinMax(omin, omax, gridCount, true);\r\n                        omin = minMaxStep.min;\r\n                        omax = minMaxStep.max;\r\n                        ostep = minMaxStep.step;\r\n                    }\r\n                    else {\r\n                        min = omin;\r\n                        max = omax;\r\n                        step = ostep;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns `true` if axis needs to be resunced with some other axis.\r\n     */\r\n    _checkSync(min, max, step, count) {\r\n        let currentCount = (max - min) / step;\r\n        for (let i = 1; i < count; i++) {\r\n            if ($math.round(currentCount / i, 1) == count || currentCount * i == count) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        let max = this.getPrivate(\"selectionMax\", this.getPrivate(\"max\"));\r\n        let min = this.getPrivate(\"selectionMin\", this.getPrivate(\"min\"));\r\n        if ($type.isNumber(max) && $type.isNumber(min)) {\r\n            return this.getPrivate(\"step\", 1) / (max - min);\r\n        }\r\n        return 0.05;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    nextPosition(count) {\r\n        if (count == null) {\r\n            count = 1;\r\n        }\r\n        if (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\r\n            count *= -1;\r\n        }\r\n        let value = this.positionToValue(this.getPrivate(\"tooltipPosition\", 0));\r\n        value += this.getPrivate(\"step\", 1) * count;\r\n        value = $math.fitToRange(value, this.getPrivate(\"selectionMin\", 0), this.getPrivate(\"selectionMax\", 1));\r\n        return this.toGlobalPosition(this.valueToPosition(value));\r\n    }\r\n}\r\nObject.defineProperty(ValueAxis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ValueAxis\"\r\n});\r\nObject.defineProperty(ValueAxis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Axis.classNames.concat([ValueAxis.className])\r\n});\r\n//# sourceMappingURL=ValueAxis.js.map","import { Axis } from \"./Axis\";\r\nimport { populateString } from \"../../../core/util/PopulateString\";\r\nimport { ValueAxis } from \"./ValueAxis\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Creates a category axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/category-axis/} for more info\r\n * @important\r\n */\r\nexport class CategoryAxis extends Axis {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_frequency\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_itemMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\r\n        this.fields.push(\"category\", \"id\", \"cellSize\");\r\n        this.setPrivateRaw(\"name\", \"category\");\r\n        this.addTag(\"category\");\r\n        super._afterNew();\r\n    }\r\n    _afterDataChange() {\r\n        super._afterDataChange();\r\n        const len = this.dataItems.length;\r\n        if (len > 0) {\r\n            this.setPrivateRaw(\"maxZoomFactor\", len);\r\n        }\r\n        // fix final indexes\t\t\r\n        this.setPrivateRaw(\"startIndex\", Math.min(this.getPrivate(\"startIndex\", 0), len));\r\n        this.setPrivateRaw(\"endIndex\", Math.min(this.getPrivate(\"endIndex\", len), 1));\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const len = this.dataItems.length;\r\n        let i = 0;\r\n        if (this._valuesDirty) {\r\n            this._itemMap = {};\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                dataItem.setRaw(\"index\", i);\r\n                this._itemMap[dataItem.get(\"category\")] = dataItem;\r\n                i++;\r\n            });\r\n            this.setPrivateRaw(\"maxZoomFactor\", len);\r\n        }\r\n        let start = this.get(\"start\", 0);\r\n        let end = this.get(\"end\", 1);\r\n        let indices = this._getIndices(start, end);\r\n        this.setPrivateRaw(\"startIndex\", indices.startIndex);\r\n        this.setPrivateRaw(\"endIndex\", indices.endIndex);\r\n        if (this._sizeDirty || this._valuesDirty || (this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"endIndex\") || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\"))) {\r\n            if (this.dataItems.length > 0) {\r\n                this._handleRangeChange();\r\n                this._prepareAxisItems();\r\n                this._updateAxisRanges();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    adjustZoom() {\r\n        const len = this.dataItems.length;\r\n        if (len > 1) {\r\n            let maxZoomCount = this.get(\"maxZoomCount\", this.dataItems.length);\r\n            let minZoomCount = this.get(\"minZoomCount\", 1);\r\n            let count = 0;\r\n            let startIndex = this.getPrivate(\"startIndex\", 0);\r\n            let endIndex = this.getPrivate(\"endIndex\", 0);\r\n            const sAnimation = this._sAnimation;\r\n            const eAnimation = this._eAnimation;\r\n            let start = this.get(\"start\", 0);\r\n            let getIndices = false;\r\n            if (sAnimation && !sAnimation.stopped) {\r\n                start = Number(sAnimation.to);\r\n                getIndices = true;\r\n            }\r\n            let end = this.get(\"end\", 1);\r\n            if (eAnimation && !eAnimation.stopped) {\r\n                end = Number(eAnimation.to);\r\n                getIndices = true;\r\n            }\r\n            if (getIndices) {\r\n                const indices = this._getIndices(start, end);\r\n                startIndex = indices.startIndex;\r\n                endIndex = indices.endIndex;\r\n            }\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                const dataItem = this.dataItems[i];\r\n                count += dataItem.get(\"finalCellSize\", 1);\r\n            }\r\n            ;\r\n            if (count <= minZoomCount) {\r\n                // need to zoom out\r\n                let c = 0;\r\n                for (let i = startIndex; i < len; i++) {\r\n                    const dataItem = this.dataItems[i];\r\n                    c += dataItem.get(\"finalCellSize\", 1);\r\n                    endIndex = i + 1;\r\n                    if (c >= minZoomCount) {\r\n                        break;\r\n                    }\r\n                }\r\n                if (c < minZoomCount) {\r\n                    // still not enough, try to extend at the start\r\n                    for (let i = startIndex - 1; i >= 0; i--) {\r\n                        const dataItem = this.dataItems[i];\r\n                        c += dataItem.get(\"finalCellSize\", 1);\r\n                        startIndex = i;\r\n                        if (c >= minZoomCount) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                this.zoomToIndexes(startIndex, endIndex);\r\n            }\r\n            else if (count >= maxZoomCount) {\r\n                let c = count;\r\n                for (let i = endIndex - 1; i >= startIndex; i--) {\r\n                    const dataItem = this.dataItems[i];\r\n                    c -= dataItem.get(\"finalCellSize\", 1);\r\n                    if (c <= maxZoomCount) {\r\n                        endIndex = i + 1;\r\n                        break;\r\n                    }\r\n                }\r\n                this.zoomToIndexes(startIndex, endIndex);\r\n            }\r\n        }\r\n    }\r\n    _handleRangeChange() {\r\n        $array.each(this.series, (series) => {\r\n            let startCategory = this.dataItems[this.startIndex()].get(\"category\");\r\n            let endCategory = this.dataItems[this.endIndex() - 1].get(\"category\");\r\n            let baseAxis = series.get(\"baseAxis\");\r\n            let xAxis = series.get(\"xAxis\");\r\n            let yAxis = series.get(\"yAxis\");\r\n            if (xAxis instanceof CategoryAxis && yAxis instanceof CategoryAxis) {\r\n                series._markDirtyAxes();\r\n            }\r\n            else if (baseAxis === this) {\r\n                let key;\r\n                let openKey;\r\n                let otherAxis = yAxis;\r\n                if (xAxis === baseAxis) {\r\n                    if (series.get(\"categoryXField\")) {\r\n                        key = \"categoryX\";\r\n                    }\r\n                    if (series.get(\"openCategoryXField\")) {\r\n                        openKey = \"openCategoryX\";\r\n                    }\r\n                }\r\n                else if (yAxis === baseAxis) {\r\n                    if (series.get(\"categoryYField\")) {\r\n                        key = \"categoryY\";\r\n                    }\r\n                    if (series.get(\"openCategoryYField\")) {\r\n                        openKey = \"openCategoryY\";\r\n                    }\r\n                    otherAxis = xAxis;\r\n                }\r\n                if (otherAxis instanceof ValueAxis) {\r\n                    if (key || openKey) {\r\n                        let startDataItem;\r\n                        let endDataItem;\r\n                        function findDataItem(series, categoryAxis, key, openKey, category, direction) {\r\n                            let dataItem;\r\n                            let idx = categoryAxis.categoryToIndex(category);\r\n                            while (!dataItem && idx >= 0 && idx < categoryAxis.dataItems.length) {\r\n                                let searchCategory = categoryAxis.dataItems[idx].get(\"category\");\r\n                                if (direction == \"previous\") {\r\n                                    for (let i = series.dataItems.length - 1; i >= 0; i--) {\r\n                                        let item = series.dataItems[i];\r\n                                        if (key && item.get(key) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                        if (openKey && item.get(openKey) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    for (let i = 0, len = series.dataItems.length; i < len; i++) {\r\n                                        let item = series.dataItems[i];\r\n                                        if (key && item.get(key) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                        if (openKey && item.get(openKey) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                if (!dataItem) {\r\n                                    idx += direction === \"previous\" ? -1 : 1;\r\n                                }\r\n                            }\r\n                            return dataItem;\r\n                        }\r\n                        startDataItem = findDataItem(series, this, key, openKey, startCategory, \"next\");\r\n                        endDataItem = findDataItem(series, this, key, openKey, endCategory, \"previous\");\r\n                        let startIndex = 0;\r\n                        let endIndex = series.dataItems.length;\r\n                        if (startDataItem) {\r\n                            startIndex = series.dataItems.indexOf(startDataItem);\r\n                        }\r\n                        if (endDataItem) {\r\n                            endIndex = series.dataItems.indexOf(endDataItem) + 1;\r\n                        }\r\n                        series.setPrivate(\"startIndex\", startIndex);\r\n                        series.setPrivate(\"endIndex\", endIndex);\r\n                        let hasValue = false;\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            const dataItem = series.dataItems[i];\r\n                            $array.each(series.__valueXShowFields, (key) => {\r\n                                let value = dataItem.get(key);\r\n                                if (value != null) {\r\n                                    hasValue = true;\r\n                                }\r\n                            });\r\n                            $array.each(series.__valueYShowFields, (key) => {\r\n                                let value = dataItem.get(key);\r\n                                if (value != null) {\r\n                                    hasValue = true;\r\n                                }\r\n                            });\r\n                            if (hasValue) {\r\n                                break;\r\n                            }\r\n                        }\r\n                        series.setPrivate(\"outOfSelection\", !hasValue);\r\n                    }\r\n                }\r\n                series._markDirtyAxes(); // must be outside\r\n            }\r\n        });\r\n    }\r\n    _prepareAxisItems() {\r\n        var _a;\r\n        const renderer = this.get(\"renderer\");\r\n        const len = this.dataItems.length;\r\n        let startIndex = this.startIndex();\r\n        if (startIndex > 0) {\r\n            startIndex--;\r\n        }\r\n        let endIndex = this.endIndex();\r\n        if (endIndex < len) {\r\n            endIndex++;\r\n        }\r\n        const minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\r\n        const minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\r\n        let maxCount = renderer.axisLength() / Math.max(renderer.get(\"minGridDistance\"), 1);\r\n        let frequency = Math.max(1, Math.min(len, Math.ceil((endIndex - startIndex) / maxCount)));\r\n        startIndex = Math.floor(startIndex / frequency) * frequency;\r\n        this._frequency = frequency;\r\n        for (let j = 0; j < len; j++) {\r\n            this._toggleDataItem(this.dataItems[j], false);\r\n        }\r\n        let f = this.dataItems[startIndex].get(\"index\", 0);\r\n        for (let i = startIndex; i < endIndex; i = i + frequency) {\r\n            let dataItem = this.dataItems[i];\r\n            this._createAssets(dataItem, []);\r\n            this._toggleDataItem(dataItem, true);\r\n            let count = frequency;\r\n            if (minorGridEnabled) {\r\n                count = 1;\r\n            }\r\n            this._prepareDataItem(dataItem, f, count);\r\n            f++;\r\n        }\r\n        if (renderer.get(\"minorGridEnabled\")) {\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                let dataItem = this.dataItems[i];\r\n                if (i % frequency != 0) {\r\n                    this._createAssets(dataItem, [\"minor\"], true);\r\n                    this._toggleDataItem(dataItem, true);\r\n                    this._prepareDataItem(dataItem, 0, 1);\r\n                    if (!minorLabelsEnabled) {\r\n                        (_a = dataItem.get(\"label\")) === null || _a === void 0 ? void 0 : _a.setPrivate(\"visible\", false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._updateGhost();\r\n    }\r\n    _prepareDataItem(dataItem, fillIndex, count) {\r\n        let renderer = this.get(\"renderer\");\r\n        let categoryLocation = dataItem.get(\"categoryLocation\", 0);\r\n        let endCategoryLocation = dataItem.get(\"endCategoryLocation\", 1);\r\n        let index = dataItem.get(\"index\");\r\n        if (!$type.isNumber(index)) {\r\n            index = this.categoryToIndex(dataItem.get(\"category\"));\r\n        }\r\n        let position = this.indexToPosition(index, categoryLocation);\r\n        let endCategory = dataItem.get(\"endCategory\");\r\n        let endIndex;\r\n        if (endCategory) {\r\n            endIndex = this.categoryToIndex(endCategory);\r\n            if (!$type.isNumber(endIndex)) {\r\n                endIndex = index;\r\n            }\r\n        }\r\n        else {\r\n            endIndex = index;\r\n        }\r\n        let endPosition = this.indexToPosition(endIndex, endCategoryLocation);\r\n        let fillEndIndex;\r\n        let fillEndPosition;\r\n        if (dataItem.get(\"isRange\")) {\r\n            fillEndIndex = endIndex;\r\n            if (!$type.isNumber(index)) {\r\n                this._toggleDataItem(dataItem, false);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            fillEndIndex = index + this._frequency - 1;\r\n        }\r\n        fillEndPosition = this.indexToPosition(fillEndIndex, endCategoryLocation);\r\n        renderer.updateLabel(dataItem.get(\"label\"), position, endPosition, count);\r\n        renderer.updateGrid(dataItem.get(\"grid\"), position, endPosition);\r\n        renderer.updateTick(dataItem.get(\"tick\"), position, endPosition, count);\r\n        renderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\r\n        this._processBullet(dataItem);\r\n        renderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\r\n        const fillRule = this.get(\"fillRule\");\r\n        if (fillRule) {\r\n            fillRule(dataItem, fillIndex);\r\n        }\r\n    }\r\n    startIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.min(Math.max(this.getPrivate(\"startIndex\", 0), 0), len - 1);\r\n    }\r\n    endIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.max(1, Math.min(this.getPrivate(\"endIndex\", len), len));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    baseValue() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    basePosition() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific category index.\r\n     *\r\n     * @param   value  Index\r\n     * @return         X coordinate\r\n     */\r\n    getX(value) {\r\n        let axisDataItem = this._itemMap[value];\r\n        if (axisDataItem) {\r\n            return this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * Returns Y coordinate in pixels corresponding to specific category index.\r\n     *\r\n     * @param   value  Index\r\n     * @return         Y coordinate\r\n     */\r\n    getY(value) {\r\n        let axisDataItem = this._itemMap[value];\r\n        if (axisDataItem) {\r\n            return this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionX(dataItem, field, cellLocation, _axisLocation) {\r\n        const category = dataItem.get(field);\r\n        const axisDataItem = this._itemMap[category];\r\n        if (axisDataItem) {\r\n            return this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateX(dataItem, field, cellLocation, _axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, cellLocation, _axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionY(dataItem, field, cellLocation, _axisLocation) {\r\n        const category = dataItem.get(field);\r\n        const axisDataItem = this._itemMap[category];\r\n        if (axisDataItem) {\r\n            return this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateY(dataItem, field, cellLocation, _axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, cellLocation, _axisLocation));\r\n    }\r\n    /**\r\n     * Converts category index to a relative position.\r\n     *\r\n     * `location` indicates relative position within category: 0 - start, 1 - end.\r\n     *\r\n     * If not set, will use middle (0.5) of the category.\r\n     *\r\n     * @param   index     Index\r\n     * @param   location  Location\r\n     * @return            Index\r\n     */\r\n    indexToPosition(index, location, final) {\r\n        let len = this.dataItems.length;\r\n        let position = 0;\r\n        if (len == 0) {\r\n            return 0;\r\n        }\r\n        if (index >= len) {\r\n            index = len - 1;\r\n            location = 1;\r\n        }\r\n        if (!$type.isNumber(location)) {\r\n            location = 0.5;\r\n        }\r\n        if (!$type.isNumber(index)) {\r\n            return 0;\r\n        }\r\n        let startLocation = this.get(\"startLocation\", 0);\r\n        let endLocation = this.get(\"endLocation\", 1);\r\n        if (!this.get(\"cellSizeField\")) {\r\n            len -= startLocation;\r\n            len -= (1 - endLocation);\r\n            position = (index + location - startLocation) / len;\r\n        }\r\n        else {\r\n            let name = final ? \"finalCellSize\" : \"cellSize\";\r\n            const dataItems = this.dataItems;\r\n            // Calculate total modified count (sum of cell sizes)\r\n            let modCount = 0;\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                modCount += dataItem.get(name, 1);\r\n            });\r\n            modCount -= startLocation * dataItems[0].get(name, 1);\r\n            modCount -= (1 - endLocation) * dataItems[dataItems.length - 1].get(name, 1);\r\n            // Calculate the position based on cell sizes\r\n            let acc = 0;\r\n            for (let i = 0; i < index; i++) {\r\n                acc += dataItems[i].get(name, 1);\r\n            }\r\n            let cellSizeAtIndex = dataItems[index].get(name, 1);\r\n            position = (acc + location * cellSizeAtIndex - startLocation * dataItems[0].get(name, 1)) / modCount;\r\n        }\r\n        if (!final) {\r\n            let dataItem = this.dataItems[index];\r\n            if (dataItem) {\r\n                position += dataItem.get(\"deltaPosition\", 0);\r\n            }\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * Returns a position of a category.\r\n     *\r\n     * @param   category  Category to look up\r\n     * @return            Position\r\n     */\r\n    categoryToPosition(category) {\r\n        let dataItem = this._itemMap[category];\r\n        if (dataItem) {\r\n            return this.indexToPosition(dataItem.get(\"index\"));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * Returns an index of a category.\r\n     *\r\n     * @param   category  Category to look up\r\n     * @return            Index\r\n     */\r\n    categoryToIndex(category) {\r\n        let dataItem = this._itemMap[category];\r\n        if (dataItem) {\r\n            return dataItem.get(\"index\");\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    dataItemToPosition(dataItem) {\r\n        return this.indexToPosition(dataItem.get(\"index\"));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    roundAxisPosition(position, location) {\r\n        position += (0.5 - location) / this.dataItems.length;\r\n        return this.indexToPosition(this.axisPositionToIndex(position), location);\r\n    }\r\n    /**\r\n     * Returns an index of the category that corresponds to specific pixel\r\n     * position within axis.\r\n     *\r\n     * @param position  Position (px)\r\n     * @return Category index\r\n     */\r\n    axisPositionToIndex(position) {\r\n        let len = this.dataItems.length;\r\n        if (len === 0) {\r\n            return 0;\r\n        }\r\n        // Calculate total modified length (sum of cell sizes)\r\n        if (this.get(\"cellSizeField\")) {\r\n            let modifiedLen = 0;\r\n            let cellSizes = [];\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                const cellSize = dataItem.get(\"cellSize\", 1);\r\n                cellSizes.push(cellSize);\r\n                modifiedLen += cellSize;\r\n            });\r\n            // Adjust for startLocation and endLocation\r\n            let startLocation = this.get(\"startLocation\", 0);\r\n            let endLocation = this.get(\"endLocation\", 1);\r\n            modifiedLen -= startLocation;\r\n            modifiedLen -= (1 - endLocation);\r\n            // Find which cell the position falls into\r\n            let rel = position * modifiedLen + startLocation;\r\n            let acc = 0;\r\n            for (let i = 0; i < len; i++) {\r\n                const cellSize = cellSizes[i];\r\n                if (rel < acc + cellSize) {\r\n                    return i;\r\n                }\r\n                acc += cellSize;\r\n            }\r\n            return len - 1;\r\n        }\r\n        else {\r\n            return $math.fitToRange(Math.floor(position * len), 0, len - 1);\r\n        }\r\n    }\r\n    /**\r\n     * Returns text to be used in an axis tooltip for specific relative position.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Tooltip text\r\n     */\r\n    getTooltipText(position, _adjustPosition) {\r\n        //@todo number formatter + tag\r\n        const dataItem = this.dataItems[this.axisPositionToIndex(position)];\r\n        if (dataItem) {\r\n            const label = dataItem.get(\"label\");\r\n            if (label) {\r\n                return populateString(label, this.get(\"tooltipText\", \"\"));\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipText(tooltip, position) {\r\n        tooltip._setDataItem(this.dataItems[this.axisPositionToIndex(position)]);\r\n        tooltip.label.text.markDirtyText();\r\n    }\r\n    /**\r\n     * Returns a data item from series that is closest to the `position`.\r\n     *\r\n     * @param   series    Series\r\n     * @param   position  Relative position\r\n     * @return            Data item\r\n     */\r\n    getSeriesItem(series, position) {\r\n        if (this.dataItems.length > 0) {\r\n            let fieldName = (this.getPrivate(\"name\") + this.get(\"renderer\").getPrivate(\"letter\"));\r\n            let index = this.axisPositionToIndex(position);\r\n            // try simple first\r\n            let seriesDataItem = series.dataItems[index];\r\n            let axisDataItem = this.dataItems[index];\r\n            let category = axisDataItem.get(\"category\");\r\n            if (seriesDataItem && axisDataItem) {\r\n                if (seriesDataItem.get(fieldName) === category) {\r\n                    return seriesDataItem;\r\n                }\r\n            }\r\n            // if not found, try looking\r\n            for (let i = 0, len = series.dataItems.length; i < len; i++) {\r\n                let dataItem = series.dataItems[i];\r\n                if (dataItem.get(fieldName) === category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getIndices(start, end) {\r\n        let len = this.dataItems.length;\r\n        let startIndex = 0;\r\n        let endIndex = len;\r\n        let name = \"cellSize\";\r\n        if (this.get(\"cellSizeField\")) {\r\n            let count = 0;\r\n            const dataItems = this.dataItems;\r\n            if (dataItems.length == 0) {\r\n                return { startIndex: 0, endIndex: 0 };\r\n            }\r\n            $array.each(dataItems, (dataItem) => {\r\n                count += dataItem.get(name, 1);\r\n            });\r\n            count -= this.get(\"startLocation\", 0) * dataItems[0].get(name, 1);\r\n            count -= (1 - this.get(\"endLocation\", 1)) * dataItems[dataItems.length - 1].get(name, 1);\r\n            let c = 0;\r\n            for (let i = 0; i < len; i++) {\r\n                c += this.dataItems[i].get(name, 1);\r\n                if (Math.round(c) > Math.round(start * count)) {\r\n                    startIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            for (let i = startIndex + 1; i < len; i++) {\r\n                c += this.dataItems[i].get(name, 1);\r\n                if (Math.round(c) >= Math.round(end * count)) {\r\n                    endIndex = i + 1;\r\n                    break;\r\n                }\r\n            }\r\n            startIndex = Math.max(startIndex, 0);\r\n            endIndex = Math.min(endIndex, len);\r\n        }\r\n        else {\r\n            startIndex = Math.max(Math.round(this.get(\"start\", 0) * len), 0);\r\n            endIndex = Math.min(Math.round(this.get(\"end\", 1) * len), len);\r\n        }\r\n        return { startIndex, endIndex };\r\n    }\r\n    /**\r\n     * Zooms the axis to specific `start` and `end` indexes.\r\n     *\r\n     * Optional `duration` specifies duration of zoom animation in milliseconds.\r\n     *\r\n     * @param  start     Start index\r\n     * @param  end       End index\r\n     * @param  duration  Duration in milliseconds\r\n     */\r\n    zoomToIndexes(start, end, duration) {\r\n        let len = this.dataItems.length;\r\n        if (this.get(\"cellSizeField\")) {\r\n            start = Math.min(Math.max(start, 0), len);\r\n            end = Math.max(Math.min(end, len), 1);\r\n            this.setPrivateRaw(\"startIndex\", start);\r\n            this.setPrivateRaw(\"endIndex\", end);\r\n            this.zoom(this.indexToPosition(start, 0, true), this.indexToPosition(end, 0, true), duration);\r\n        }\r\n        else {\r\n            this.zoom(start / len, end / len, duration);\r\n        }\r\n    }\r\n    zoomToCategories(startCategory, endCategory, duration) {\r\n        this.zoomToIndexes(this.categoryToIndex(startCategory), this.categoryToIndex(endCategory) + 1, duration);\r\n    }\r\n    /**\r\n     * Returns position span between start and end of a single cell in axis.\r\n     *\r\n     * @since 5.2.30\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        return this._frequency / this.dataItems.length / (this.get(\"end\", 1) - this.get(\"start\", 0));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    nextPosition(count) {\r\n        if (count == null) {\r\n            count = 1;\r\n        }\r\n        if (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\r\n            count *= -1;\r\n        }\r\n        const position = this.getPrivate(\"tooltipPosition\", 0);\r\n        const index = $math.fitToRange(this.axisPositionToIndex(position) + count, 0, this.dataItems.length - 1);\r\n        return this.toGlobalPosition(this.indexToPosition(index));\r\n    }\r\n}\r\nObject.defineProperty(CategoryAxis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"CategoryAxis\"\r\n});\r\nObject.defineProperty(CategoryAxis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Axis.classNames.concat([CategoryAxis.className])\r\n});\r\n//# sourceMappingURL=CategoryAxis.js.map","import { Label } from \"../../../core/render/Label\";\r\n/**\r\n * Draws an axis label.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels} for more info\r\n * @important\r\n */\r\nexport class AxisLabel extends Label {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisLabel, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisLabel\"\r\n});\r\nObject.defineProperty(AxisLabel, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Label.classNames.concat([AxisLabel.className])\r\n});\r\n//# sourceMappingURL=AxisLabel.js.map","import { Tick } from \"../../../core/render/Tick\";\r\n/**\r\n * Draws an axis tick.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Ticks} for more info\r\n * @important\r\n */\r\nexport class AxisTick extends Tick {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisTick, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisTick\"\r\n});\r\nObject.defineProperty(AxisTick, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Tick.classNames.concat([AxisTick.className])\r\n});\r\n//# sourceMappingURL=AxisTick.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Base class for an axis renderer.\r\n *\r\n * Should not be used on its own.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n */\r\nexport class AxisRenderer extends Graphics {\r\n    constructor() {\r\n        super(...arguments);\r\n        // save for quick access\r\n        Object.defineProperty(this, \"_axisLength\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 100\r\n        });\r\n        Object.defineProperty(this, \"_start\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_end\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_inversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_minSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        /**\r\n         * Chart the renderer is used in.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_lc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_ls\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_thumbDownPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A list of ticks in the axis.\r\n         *\r\n         * `ticks.template` can be used to configure ticks.\r\n         *\r\n         * @default new ListTemplate<AxisTick>\r\n         */\r\n        Object.defineProperty(this, \"ticks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => AxisTick._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.ticks.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.ticks.template])))\r\n        });\r\n        /**\r\n         * A list of grid elements in the axis.\r\n         *\r\n         * `grid.template` can be used to configure grid.\r\n         *\r\n         * @default new ListTemplate<Grid>\r\n         */\r\n        Object.defineProperty(this, \"grid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Grid._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.grid.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.grid.template])))\r\n        });\r\n        /**\r\n         * A list of fills in the axis.\r\n         *\r\n         * `axisFills.template` can be used to configure axis fills.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"axisFills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.axisFills.template.get(\"themeTags\", [\"axis\", \"fill\"]), this.get(\"themeTags\", []))\r\n            }, [this.axisFills.template])))\r\n        });\r\n        /**\r\n         * A list of labels in the axis.\r\n         *\r\n         * `labels.template` can be used to configure axis labels.\r\n         *\r\n         * @default new ListTemplate<AxisLabel>\r\n         */\r\n        Object.defineProperty(this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => AxisLabel._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.labels.template])))\r\n        });\r\n        /**\r\n         * An [[Axis]] renderer is for.\r\n         */\r\n        Object.defineProperty(this, \"axis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A thumb Graphics to be used for panning the axis (the one which shows under the labels when hovered)\r\n         */\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeTick(dataItem, themeTags) {\r\n        const tick = this.ticks.make();\r\n        tick._setDataItem(dataItem);\r\n        dataItem.setRaw(\"tick\", tick);\r\n        tick.set(\"themeTags\", $utils.mergeTags(tick.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.push(tick);\r\n        this.ticks.push(tick);\r\n        return tick;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeGrid(dataItem, themeTags) {\r\n        const grid = this.grid.make();\r\n        grid._setDataItem(dataItem);\r\n        dataItem.setRaw(\"grid\", grid);\r\n        grid.set(\"themeTags\", $utils.mergeTags(grid.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(grid);\r\n        this.grid.push(grid);\r\n        return grid;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeAxisFill(dataItem, themeTags) {\r\n        const axisFill = this.axisFills.make();\r\n        axisFill._setDataItem(dataItem);\r\n        axisFill.set(\"themeTags\", $utils.mergeTags(axisFill.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(axisFill);\r\n        dataItem.setRaw(\"axisFill\", axisFill);\r\n        this.axisFills.push(axisFill);\r\n        return axisFill;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeLabel(dataItem, themeTags) {\r\n        const label = this.labels.make();\r\n        label.set(\"themeTags\", $utils.mergeTags(label.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.moveValue(label, 0);\r\n        label._setDataItem(dataItem);\r\n        dataItem.setRaw(\"label\", label);\r\n        this.labels.push(label);\r\n        return label;\r\n    }\r\n    axisLength() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    gridCount() {\r\n        return this.axisLength() / this.get(\"minGridDistance\", 50);\r\n    }\r\n    _updatePositions() {\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.set(\"isMeasured\", false);\r\n        const thumb = this.thumb;\r\n        if (thumb) {\r\n            this._disposers.push(thumb.events.on(\"pointerdown\", (event) => {\r\n                this._handleThumbDown(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointerup\", (event) => {\r\n                this._handleThumbUp(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointermove\", (event) => {\r\n                this._handleThumbMove(event);\r\n            }));\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"minGridDistance\")) {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.axis.markDirtySize();\r\n            });\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"pan\")) {\r\n            const thumb = this.thumb;\r\n            if (thumb) {\r\n                const labelsContainer = this.axis.labelsContainer;\r\n                const pan = this.get(\"pan\");\r\n                if (pan == \"zoom\") {\r\n                    labelsContainer.children.push(thumb);\r\n                }\r\n                else if (pan == \"none\") {\r\n                    labelsContainer.children.removeValue(thumb);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleThumbDown(event) {\r\n        this._thumbDownPoint = this.toLocal(event.point);\r\n        const axis = this.axis;\r\n        this._downStart = axis.get(\"start\");\r\n        this._downEnd = axis.get(\"end\");\r\n    }\r\n    _handleThumbUp(_event) {\r\n        this._thumbDownPoint = undefined;\r\n    }\r\n    _handleThumbMove(event) {\r\n        const downPoint = this._thumbDownPoint;\r\n        if (downPoint) {\r\n            const point = this.toLocal(event.point);\r\n            const downStart = this._downStart;\r\n            const downEnd = this._downEnd;\r\n            const extra = this._getPan(point, downPoint) * Math.min(1, (downEnd - downStart)) / 2 * this.get(\"panSensitivity\", 1);\r\n            this.axis.zoom(downStart - extra, downEnd + extra, 0);\r\n        }\r\n    }\r\n    _getPan(_point1, _point2) {\r\n        return 0;\r\n    }\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    positionToCoordinate(position) {\r\n        if (this._inversed) {\r\n            return (this._end - position) * this._axisLength;\r\n        }\r\n        else {\r\n            return (position - this._start) * this._axisLength;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(_tooltip) { }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position = position * (end - start);\r\n        if (!this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (!this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start);\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        if (this.get(\"inversed\")) {\r\n            return 1 - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n    }\r\n    toggleVisibility(sprite, position, minPosition, maxPosition) {\r\n        let axis = this.axis;\r\n        const start = axis.get(\"start\", 0);\r\n        const end = axis.get(\"end\", 1);\r\n        let updatedStart = start + (end - start) * (minPosition - 0.0001);\r\n        let updatedEnd = start + (end - start) * (maxPosition + 0.0001);\r\n        if (position < updatedStart || position > updatedEnd) {\r\n            sprite.setPrivate(\"visible\", false);\r\n        }\r\n        else {\r\n            sprite.setPrivate(\"visible\", true);\r\n        }\r\n    }\r\n    _positionTooltip(tooltip, point) {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            tooltip.set(\"pointTo\", this._display.toGlobal(point));\r\n            if (!chart.inPlot(point)) {\r\n                tooltip.hide();\r\n            }\r\n        }\r\n    }\r\n    processAxis() { }\r\n}\r\nObject.defineProperty(AxisRenderer, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRenderer\"\r\n});\r\nObject.defineProperty(AxisRenderer, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([AxisRenderer.className])\r\n});\r\n//# sourceMappingURL=AxisRenderer.js.map","import { AxisRenderer } from \"./AxisRenderer\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to render horizontal axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n * @important\r\n */\r\nexport class AxisRendererX extends AxisRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Rectangle.new(this._root, { width: p100, isMeasured: false, themeTags: [\"axis\", \"x\", \"thumb\", \"zoomgrip\"] })\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"x\"]);\r\n        super._afterNew();\r\n        this.setPrivateRaw(\"letter\", \"X\");\r\n        const gridTemplate = this.grid.template;\r\n        gridTemplate.set(\"height\", p100);\r\n        gridTemplate.set(\"width\", 0);\r\n        gridTemplate.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, graphics.height());\r\n        });\r\n        this.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(graphics.width(), 0);\r\n        });\r\n    }\r\n    _changed() {\r\n        var _a;\r\n        super._changed();\r\n        const axis = this.axis;\r\n        const ghostLabel = axis.ghostLabel;\r\n        if (ghostLabel) {\r\n            ghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\r\n            ghostLabel.set(\"x\", -1000);\r\n        }\r\n        const opposite = \"opposite\";\r\n        const inside = \"inside\";\r\n        if (this.isDirty(opposite) || this.isDirty(inside)) {\r\n            const chart = this.chart;\r\n            const axisChildren = axis.children;\r\n            if (this.get(inside)) {\r\n                axis.addTag(inside);\r\n            }\r\n            else {\r\n                axis.removeTag(inside);\r\n            }\r\n            if (chart) {\r\n                if (this.get(opposite)) {\r\n                    const children = chart.topAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.insertIndex(0, axis);\r\n                    }\r\n                    axis.addTag(opposite);\r\n                    axisChildren.moveValue(this);\r\n                }\r\n                else {\r\n                    const children = chart.bottomAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis);\r\n                    }\r\n                    axis.removeTag(opposite);\r\n                    axisChildren.moveValue(this, 0);\r\n                }\r\n                (_a = axis.ghostLabel) === null || _a === void 0 ? void 0 : _a._applyThemes();\r\n                this.labels.each((label) => {\r\n                    label._applyThemes();\r\n                });\r\n                this.root._markDirtyRedraw();\r\n            }\r\n            axis.markDirtySize();\r\n        }\r\n        this.thumb.setPrivate(\"height\", axis.labelsContainer.height());\r\n    }\r\n    _getPan(point1, point2) {\r\n        return (point2.x - point1.x) / this.width();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position -= this._ls;\r\n        position = position * (end - start) / this._lc;\r\n        if (!this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (!this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start) * this._lc;\r\n        position += this._ls;\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n        const axis = this.axis;\r\n        const parent = axis.parent;\r\n        if (parent) {\r\n            const w = parent.innerWidth();\r\n            this._lc = this.axisLength() / w;\r\n            this._ls = (axis.x() - parent.get(\"paddingLeft\", 0)) / w;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updatePositions() {\r\n        const axis = this.axis;\r\n        const x = axis.x() - $utils.relativeToValue(axis.get(\"centerX\", 0), axis.width()) - axis.parent.get(\"paddingLeft\", 0);\r\n        axis.gridContainer.set(\"x\", x);\r\n        axis.topGridContainer.set(\"x\", x);\r\n        axis.bulletsContainer.set(\"y\", this.y());\r\n        const chart = axis.chart;\r\n        if (chart) {\r\n            const plotContainer = chart.plotContainer;\r\n            const axisHeader = axis.axisHeader;\r\n            let width = axis.get(\"marginLeft\", 0);\r\n            let x = axis.x() - width;\r\n            const parent = axis.parent;\r\n            if (parent) {\r\n                x -= parent.get(\"paddingLeft\", 0);\r\n            }\r\n            if (axisHeader.children.length > 0) {\r\n                width = axis.axisHeader.width();\r\n                axis.set(\"marginLeft\", width + 1);\r\n            }\r\n            else {\r\n                axisHeader.set(\"width\", width);\r\n            }\r\n            axisHeader.setAll({ x: x, y: -1, height: plotContainer.height() + 2 });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis() {\r\n        super.processAxis();\r\n        const axis = this.axis;\r\n        if (axis.get(\"width\") == null) {\r\n            axis.set(\"width\", p100);\r\n        }\r\n        ;\r\n        const verticalLayout = this._root.verticalLayout;\r\n        axis.set(\"layout\", verticalLayout);\r\n        axis.labelsContainer.set(\"width\", p100);\r\n        axis.axisHeader.setAll({ layout: verticalLayout });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    axisLength() {\r\n        return this.axis.width();\r\n    }\r\n    /**\r\n     * Converts axis relative position to actual coordinate in pixels.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Point\r\n     */\r\n    positionToPoint(position) {\r\n        return { x: this.positionToCoordinate(position), y: 0 };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTick(tick, position, endPosition, count) {\r\n        if (tick) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = tick.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = tick.get(\"location\", location);\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            tick.set(\"x\", this.positionToCoordinate(position));\r\n            let length = tick.get(\"length\", 0);\r\n            const inside = tick.get(\"inside\", this.get(\"inside\", false));\r\n            if (this.get(\"opposite\")) {\r\n                tick.set(\"y\", p100);\r\n                if (!inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            else {\r\n                tick.set(\"y\", 0);\r\n                if (inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            tick.set(\"draw\", (display) => {\r\n                display.moveTo(0, 0);\r\n                display.lineTo(0, length);\r\n            });\r\n            this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLabel(label, position, endPosition, count) {\r\n        if (label) {\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = label.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = label.get(\"location\", location);\r\n            }\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            const inside = label.get(\"inside\", this.get(\"inside\", false));\r\n            const opposite = this.get(\"opposite\");\r\n            if (opposite) {\r\n                if (!inside) {\r\n                    label.set(\"position\", \"relative\");\r\n                    label.set(\"y\", p100);\r\n                }\r\n                else {\r\n                    label.set(\"position\", \"absolute\");\r\n                    label.set(\"y\", 0);\r\n                }\r\n            }\r\n            else {\r\n                if (!inside) {\r\n                    label.set(\"y\", undefined);\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n                else {\r\n                    label.set(\"y\", 0);\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            label.set(\"x\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateGrid(grid, position, endPosition) {\r\n        if (grid) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = grid.get(\"location\", 0.5);\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            grid.set(\"x\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(grid, position, 0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateBullet(bullet, position, endPosition) {\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                if (!$type.isNumber(position)) {\r\n                    position = 0;\r\n                }\r\n                let location = bullet.get(\"location\", 0.5);\r\n                if ($type.isNumber(endPosition) && endPosition != position) {\r\n                    position = position + (endPosition - position) * location;\r\n                }\r\n                let bulletPosition = this.axis.roundAxisPosition(position, location);\r\n                let previousBullet = this.axis._bullets[bulletPosition];\r\n                let d = -1;\r\n                if (this.get(\"opposite\")) {\r\n                    d = 1;\r\n                }\r\n                if (bullet.get(\"stacked\")) {\r\n                    if (previousBullet) {\r\n                        let previousSprite = previousBullet.get(\"sprite\");\r\n                        if (previousSprite) {\r\n                            sprite.set(\"y\", previousSprite.y() + previousSprite.height() * d);\r\n                        }\r\n                    }\r\n                    else {\r\n                        sprite.set(\"y\", 0);\r\n                    }\r\n                }\r\n                this.axis._bullets[bulletPosition] = bullet;\r\n                sprite.set(\"x\", this.positionToCoordinate(position));\r\n                this.toggleVisibility(sprite, position, 0, 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateFill(fill, position, endPosition) {\r\n        if (fill) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            if (!$type.isNumber(endPosition)) {\r\n                endPosition = 1;\r\n            }\r\n            let x0 = this.positionToCoordinate(position);\r\n            let x1 = this.positionToCoordinate(endPosition);\r\n            this.fillDrawMethod(fill, x0, x1);\r\n        }\r\n    }\r\n    fillDrawMethod(fill, x0, x1) {\r\n        fill.set(\"draw\", (display) => {\r\n            //display.drawRect(x0, 0, x1 - x0, this.axis!.gridContainer.height());\r\n            // using for holes, so can not be rectangle\r\n            const h = this.axis.gridContainer.height();\r\n            const w = this.width();\r\n            if (x1 < x0) {\r\n                [x1, x0] = [x0, x1];\r\n            }\r\n            if (x0 > w || x1 < 0) {\r\n                return;\r\n            }\r\n            /*\r\n            const limit = 10000;\r\n\r\n            x0 = Math.max(-limit, x0);\r\n            x1 = Math.min(limit, x1);\r\n            */\r\n            display.moveTo(x0, 0);\r\n            display.lineTo(x1, 0);\r\n            display.lineTo(x1, h);\r\n            display.lineTo(x0, h);\r\n            display.lineTo(x0, 0);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    positionTooltip(tooltip, position) {\r\n        this._positionTooltip(tooltip, { x: this.positionToCoordinate(position), y: 0 });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(tooltip) {\r\n        const inside = this.get(\"inside\");\r\n        const num = 100000;\r\n        let global = this._display.toGlobal({ x: 0, y: 0 });\r\n        let x = global.x;\r\n        let y = 0;\r\n        let w = this.axisLength();\r\n        let h = num;\r\n        let pointerOrientation = \"up\";\r\n        if (this.get(\"opposite\")) {\r\n            if (inside) {\r\n                pointerOrientation = \"up\";\r\n                y = global.y;\r\n                h = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"down\";\r\n                y = global.y - num;\r\n                h = num;\r\n            }\r\n        }\r\n        else {\r\n            if (inside) {\r\n                pointerOrientation = \"down\";\r\n                y = global.y - num;\r\n                h = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"up\";\r\n                y = global.y;\r\n                h = num;\r\n            }\r\n        }\r\n        const bounds = { left: x, right: x + w, top: y, bottom: y + h };\r\n        const oldBounds = tooltip.get(\"bounds\");\r\n        if (!$utils.sameBounds(bounds, oldBounds)) {\r\n            tooltip.set(\"bounds\", bounds);\r\n            tooltip.set(\"pointerOrientation\", pointerOrientation);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(AxisRendererX, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRendererX\"\r\n});\r\nObject.defineProperty(AxisRendererX, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: AxisRenderer.classNames.concat([AxisRendererX.className])\r\n});\r\n//# sourceMappingURL=AxisRendererX.js.map","import { AxisRenderer } from \"./AxisRenderer\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to render vertical axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n * @important\r\n */\r\nexport class AxisRendererY extends AxisRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_downY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Rectangle.new(this._root, { height: p100, isMeasured: false, themeTags: [\"axis\", \"y\", \"thumb\", \"zoomgrip\"] })\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"y\"]);\r\n        if (this._settings.opposite) {\r\n            this._settings.themeTags.push(\"opposite\");\r\n        }\r\n        super._afterNew();\r\n        this.setPrivateRaw(\"letter\", \"Y\");\r\n        const gridTemplate = this.grid.template;\r\n        gridTemplate.set(\"width\", p100);\r\n        gridTemplate.set(\"height\", 0);\r\n        gridTemplate.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(graphics.width(), 0);\r\n        });\r\n        this.set(\"draw\", (display, renderer) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, renderer.height());\r\n        });\r\n    }\r\n    _getPan(point1, point2) {\r\n        return (point1.y - point2.y) / this.height();\r\n    }\r\n    _changed() {\r\n        var _a;\r\n        super._changed();\r\n        const axis = this.axis;\r\n        const ghostLabel = axis.ghostLabel;\r\n        if (ghostLabel) {\r\n            ghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\r\n            ghostLabel.set(\"y\", -1000);\r\n        }\r\n        const thumb = this.thumb;\r\n        const opposite = \"opposite\";\r\n        const inside = \"inside\";\r\n        const chart = this.chart;\r\n        if (this.isDirty(opposite) || this.isDirty(inside)) {\r\n            const axisChildren = axis.children;\r\n            if (this.get(inside)) {\r\n                axis.addTag(inside);\r\n            }\r\n            else {\r\n                axis.removeTag(inside);\r\n            }\r\n            if (chart) {\r\n                if (this.get(opposite)) {\r\n                    const children = chart.rightAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis, 0);\r\n                    }\r\n                    axis.addTag(opposite);\r\n                    axisChildren.moveValue(this, 0);\r\n                }\r\n                else {\r\n                    const children = chart.leftAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis);\r\n                    }\r\n                    axis.removeTag(opposite);\r\n                    axisChildren.moveValue(this);\r\n                }\r\n                (_a = axis.ghostLabel) === null || _a === void 0 ? void 0 : _a._applyThemes();\r\n                this.labels.each((label) => {\r\n                    label._applyThemes();\r\n                });\r\n                this.root._markDirtyRedraw();\r\n            }\r\n            axis.markDirtySize();\r\n        }\r\n        const w = axis.labelsContainer.width();\r\n        if (chart) {\r\n            if (this.get(opposite)) {\r\n                thumb.set(\"centerX\", 0);\r\n            }\r\n            else {\r\n                thumb.set(\"centerX\", w);\r\n            }\r\n        }\r\n        thumb.setPrivate(\"width\", w);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis() {\r\n        super.processAxis();\r\n        const axis = this.axis;\r\n        if (axis.get(\"height\") == null) {\r\n            axis.set(\"height\", p100);\r\n        }\r\n        const horizontalLayout = this._root.horizontalLayout;\r\n        axis.set(\"layout\", horizontalLayout);\r\n        axis.labelsContainer.set(\"height\", p100);\r\n        axis.axisHeader.set(\"layout\", horizontalLayout);\r\n    }\r\n    _updatePositions() {\r\n        const axis = this.axis;\r\n        const y = axis.y() - $utils.relativeToValue(axis.get(\"centerY\", 0), axis.height());\r\n        axis.gridContainer.set(\"y\", y);\r\n        axis.topGridContainer.set(\"y\", y);\r\n        axis.bulletsContainer.set(\"x\", this.x());\r\n        const chart = axis.chart;\r\n        if (chart) {\r\n            const plotContainer = chart.plotContainer;\r\n            const axisHeader = axis.axisHeader;\r\n            let height = axis.get(\"marginTop\", 0);\r\n            if (axisHeader.children.length > 0) {\r\n                height = axis.axisHeader.height();\r\n                axis.set(\"marginTop\", height + 1);\r\n            }\r\n            else {\r\n                axisHeader.set(\"height\", height);\r\n            }\r\n            axisHeader.setAll({ y: axis.y() - height, x: -1, width: plotContainer.width() + 2 });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    axisLength() {\r\n        return this.axis.innerHeight();\r\n    }\r\n    /**\r\n     * Converts axis relative position to actual coordinate in pixels.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Point\r\n     */\r\n    positionToPoint(position) {\r\n        return { x: 0, y: this.positionToCoordinate(position) };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLabel(label, position, endPosition, count) {\r\n        if (label) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = label.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = label.get(\"location\", location);\r\n            }\r\n            const opposite = this.get(\"opposite\");\r\n            const inside = label.get(\"inside\", this.get(\"inside\", false));\r\n            if (opposite) {\r\n                label.set(\"x\", 0);\r\n                if (inside) {\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n                else {\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n            }\r\n            else {\r\n                if (inside) {\r\n                    label.set(\"x\", 0);\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n                else {\r\n                    label.set(\"x\", undefined);\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            label.set(\"y\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateGrid(grid, position, endPosition) {\r\n        if (grid) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = grid.get(\"location\", 0.5);\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            grid.set(\"y\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(grid, position, 0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTick(tick, position, endPosition, count) {\r\n        if (tick) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = tick.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = tick.get(\"location\", location);\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            tick.set(\"y\", this.positionToCoordinate(position));\r\n            let length = tick.get(\"length\", 0);\r\n            const inside = tick.get(\"inside\", this.get(\"inside\", false));\r\n            if (this.get(\"opposite\")) {\r\n                tick.set(\"x\", 0);\r\n                if (inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            else {\r\n                if (!inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            tick.set(\"draw\", (display) => {\r\n                display.moveTo(0, 0);\r\n                display.lineTo(length, 0);\r\n            });\r\n            this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateBullet(bullet, position, endPosition) {\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                if (!$type.isNumber(position)) {\r\n                    position = 0;\r\n                }\r\n                let location = bullet.get(\"location\", 0.5);\r\n                if ($type.isNumber(endPosition) && endPosition != position) {\r\n                    position = position + (endPosition - position) * location;\r\n                }\r\n                let bulletPosition = this.axis.roundAxisPosition(position, location);\r\n                let previousBullet = this.axis._bullets[bulletPosition];\r\n                let d = 1;\r\n                if (this.get(\"opposite\")) {\r\n                    d = -1;\r\n                }\r\n                if (bullet.get(\"stacked\")) {\r\n                    if (previousBullet) {\r\n                        let previousSprite = previousBullet.get(\"sprite\");\r\n                        if (previousSprite) {\r\n                            sprite.set(\"x\", previousSprite.x() + previousSprite.width() * d);\r\n                        }\r\n                    }\r\n                    else {\r\n                        sprite.set(\"x\", 0);\r\n                    }\r\n                }\r\n                this.axis._bullets[bulletPosition] = bullet;\r\n                sprite.set(\"y\", this.positionToCoordinate(position));\r\n                this.toggleVisibility(sprite, position, 0, 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateFill(fill, position, endPosition) {\r\n        if (fill) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            if (!$type.isNumber(endPosition)) {\r\n                endPosition = 1;\r\n            }\r\n            let y0 = this.positionToCoordinate(position);\r\n            let y1 = this.positionToCoordinate(endPosition);\r\n            this.fillDrawMethod(fill, y0, y1);\r\n        }\r\n    }\r\n    fillDrawMethod(fill, y0, y1) {\r\n        fill.set(\"draw\", (display) => {\r\n            // using for holes, so can not be rectangle\r\n            const w = this.axis.gridContainer.width();\r\n            const h = this.height();\r\n            if (y1 < y0) {\r\n                [y1, y0] = [y0, y1];\r\n            }\r\n            if (y0 > h || y1 < 0) {\r\n                return;\r\n            }\r\n            //y0 = Math.max(0, y0);\r\n            //y1 = Math.min(h, y1);\r\n            display.moveTo(0, y0);\r\n            display.lineTo(w, y0);\r\n            display.lineTo(w, y1);\r\n            display.lineTo(0, y1);\r\n            display.lineTo(0, y0);\r\n        });\r\n    }\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    positionToCoordinate(position) {\r\n        if (!this._inversed) {\r\n            return (this._end - position) * this._axisLength;\r\n        }\r\n        else {\r\n            return (position - this._start) * this._axisLength;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    positionTooltip(tooltip, position) {\r\n        this._positionTooltip(tooltip, { x: 0, y: this.positionToCoordinate(position) });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(tooltip) {\r\n        const inside = this.get(\"inside\");\r\n        const num = 100000;\r\n        let global = this._display.toGlobal({ x: 0, y: 0 });\r\n        let y = global.y;\r\n        let x = 0;\r\n        let h = this.axisLength();\r\n        let w = num;\r\n        let pointerOrientation = \"right\";\r\n        if (this.get(\"opposite\")) {\r\n            if (inside) {\r\n                pointerOrientation = \"right\";\r\n                x = global.x - num;\r\n                w = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"left\";\r\n                x = global.x;\r\n                w = num;\r\n            }\r\n        }\r\n        else {\r\n            if (inside) {\r\n                pointerOrientation = \"left\";\r\n                x = global.x;\r\n                w = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"right\";\r\n                x = global.x - num;\r\n                w = num;\r\n            }\r\n        }\r\n        const bounds = { left: x, right: x + w, top: y, bottom: y + h };\r\n        const oldBounds = tooltip.get(\"bounds\");\r\n        if (!$utils.sameBounds(bounds, oldBounds)) {\r\n            tooltip.set(\"bounds\", bounds);\r\n            tooltip.set(\"pointerOrientation\", pointerOrientation);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n        const axis = this.axis;\r\n        const parent = axis.parent;\r\n        if (parent) {\r\n            const h = parent.innerHeight();\r\n            this._lc = this.axisLength() / h;\r\n            this._ls = axis.y() / h;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position -= this._ls;\r\n        position = position * (end - start) / this._lc;\r\n        if (this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start) * this._lc;\r\n        position += this._ls;\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        if (!this.get(\"inversed\")) {\r\n            return 1 - position;\r\n        }\r\n        return position;\r\n    }\r\n}\r\nObject.defineProperty(AxisRendererY, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRendererY\"\r\n});\r\nObject.defineProperty(AxisRendererY, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: AxisRenderer.classNames.concat([AxisRendererY.className])\r\n});\r\n//# sourceMappingURL=AxisRendererY.js.map","import { BaseColumnSeries } from \"./BaseColumnSeries\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { RoundedRectangle } from \"../../../core/render/RoundedRectangle\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nexport class ColumnSeries extends BaseColumnSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"allColumns\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, {}))\r\n        });\r\n        Object.defineProperty(this, \"allColumnsData\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all columns in series.\r\n         *\r\n         * `columns.template` can be used to set default settings for all columns,\r\n         * or to change on existing ones.\r\n         */\r\n        Object.defineProperty(this, \"columns\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => RoundedRectangle._new(this._root, {\r\n                position: \"absolute\",\r\n                themeTags: $utils.mergeTags(this.columns.template.get(\"themeTags\", []), [\"series\", \"column\"])\r\n            }, [this.columns.template])))\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeColumn(dataItem, listTemplate) {\r\n        const column = listTemplate.make();\r\n        if (!this.get(\"turboMode\")) {\r\n            this.mainContainer.children.push(column);\r\n        }\r\n        else {\r\n            column.virtualParent = this.chart;\r\n        }\r\n        column._setDataItem(dataItem);\r\n        listTemplate.push(column);\r\n        return column;\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        super._processAxisRange(axisRange);\r\n        axisRange.columns = new ListTemplate(Template.new({}), () => RoundedRectangle._new(this._root, {\r\n            position: \"absolute\",\r\n            themeTags: $utils.mergeTags(axisRange.columns.template.get(\"themeTags\", []), [\"series\", \"column\"]),\r\n        }, [this.columns.template, axisRange.columns.template]));\r\n    }\r\n    _beforeColumnsDraw() {\r\n        this.allColumnsData = [];\r\n    }\r\n    _afterColumnsDraw() {\r\n        if (this.get(\"turboMode\")) {\r\n            this.allColumns.set(\"draw\", (display) => {\r\n                display.clear();\r\n                $array.each(this.allColumnsData, (column) => {\r\n                    const w = column.width;\r\n                    const h = column.height;\r\n                    const x = column.x;\r\n                    const y = column.y;\r\n                    const stroke = column.stroke;\r\n                    const fill = column.fill;\r\n                    const strokeWidth = column.strokeWidth;\r\n                    const strokeOpacity = column.strokeOpacity;\r\n                    const fillOpacity = column.fillOpacity;\r\n                    display.beginFill(fill, fillOpacity);\r\n                    display.beginPath();\r\n                    display.lineStyle(strokeWidth, stroke, strokeOpacity);\r\n                    display.drawRect(x, y, w, h);\r\n                    display.endStroke();\r\n                    display.endFill();\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH) {\r\n        if (this.get(\"turboMode\")) {\r\n            const stroke = graphics.get(\"stroke\");\r\n            const fillOpacity = graphics.get(\"fillOpacity\", 1);\r\n            const strokeOpacity = graphics.get(\"strokeOpacity\", 1);\r\n            const strokWidth = graphics.get(\"strokeWidth\", 1);\r\n            const fill = graphics.get(\"fill\");\r\n            const ptl = this.getPoint(l, t);\r\n            const pbr = this.getPoint(r, b);\r\n            const tooltipPoint = dataItem.get(\"point\");\r\n            if (tooltipPoint) {\r\n                const point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\r\n                tooltipPoint.x = point.x + this._x;\r\n                tooltipPoint.y = point.y + this._y;\r\n            }\r\n            l = ptl.x;\r\n            r = pbr.x;\r\n            t = ptl.y;\r\n            b = pbr.y;\r\n            dataItem.setRaw(\"left\", l);\r\n            dataItem.setRaw(\"right\", r);\r\n            dataItem.setRaw(\"top\", t);\r\n            dataItem.setRaw(\"bottom\", b);\r\n            this.allColumnsData.push({ width: r - l, height: b - t, x: l, y: t, stroke: stroke, fill: fill, strokeWidth: strokWidth, strokeOpacity: strokeOpacity, fillOpacity: fillOpacity });\r\n        }\r\n        else {\r\n            super._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(ColumnSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ColumnSeries\"\r\n});\r\nObject.defineProperty(ColumnSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: BaseColumnSeries.classNames.concat([ColumnSeries.className])\r\n});\r\n//# sourceMappingURL=ColumnSeries.js.map","import { XYSeries } from \"./XYSeries\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport { line, area } from \"d3-shape\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { color } from \"../../../core/util/Color\";\r\nimport { DataItem } from \"../../../core/render/Component\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to plot line and/or area series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/} for more info\r\n * @important\r\n */\r\nexport class LineSeries extends XYSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_endIndex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: line()\r\n        });\r\n        Object.defineProperty(this, \"_fillGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: area()\r\n        });\r\n        Object.defineProperty(this, \"_legendStroke\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_legendFill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all line segments in series.\r\n         *\r\n         * `strokes.template` can be used to set default settings for all line\r\n         * segments, or to change on existing ones.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"strokes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"])\r\n            }, [this.strokes.template])))\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all segment fills in series.\r\n         *\r\n         * `fills.template` can be used to set default settings for all segment\r\n         * fills, or to change on existing ones.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"fills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"])\r\n            }, [this.fills.template])))\r\n        });\r\n        // custom set from data\r\n        Object.defineProperty(this, \"_fillTemplate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeTemplate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_previousPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [0, 0, 0, 0]\r\n        });\r\n        Object.defineProperty(this, \"_dindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_sindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._fillGenerator.y0(function (p) {\r\n            return p[3];\r\n        });\r\n        this._fillGenerator.x0(function (p) {\r\n            return p[2];\r\n        });\r\n        this._fillGenerator.y1(function (p) {\r\n            return p[1];\r\n        });\r\n        this._fillGenerator.x1(function (p) {\r\n            return p[0];\r\n        });\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeStroke(strokes) {\r\n        const stroke = this.mainContainer.children.push(strokes.make());\r\n        strokes.push(stroke);\r\n        return stroke;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeFill(fills) {\r\n        const fill = this.mainContainer.children.push(fills.make());\r\n        fills.push(fill);\r\n        return fill;\r\n    }\r\n    _updateChildren() {\r\n        this._strokeTemplate = undefined;\r\n        this._fillTemplate = undefined;\r\n        let xAxis = this.get(\"xAxis\");\r\n        let yAxis = this.get(\"yAxis\");\r\n        if (this.isDirty(\"stroke\")) {\r\n            const stroke = this.get(\"stroke\");\r\n            this.strokes.template.set(\"stroke\", stroke);\r\n            const legendStroke = this._legendStroke;\r\n            if (legendStroke) {\r\n                legendStroke.states.lookup(\"default\").set(\"stroke\", stroke);\r\n            }\r\n        }\r\n        if (this.isDirty(\"fill\")) {\r\n            const fill = this.get(\"fill\");\r\n            this.fills.template.set(\"fill\", fill);\r\n            const legendFill = this._legendFill;\r\n            if (legendFill) {\r\n                legendFill.states.lookup(\"default\").set(\"fill\", fill);\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillPattern\")) {\r\n            const fillPattern = this.get(\"fillPattern\");\r\n            this.fills.template.set(\"fillPattern\", fillPattern);\r\n            const legendFill = this._legendFill;\r\n            if (legendFill) {\r\n                legendFill.states.lookup(\"default\").set(\"fillPattern\", fillPattern);\r\n            }\r\n        }\r\n        if (this.isDirty(\"curveFactory\")) {\r\n            const curveFactory = this.get(\"curveFactory\");\r\n            if (curveFactory) {\r\n                this._strokeGenerator.curve(curveFactory);\r\n                this._fillGenerator.curve(curveFactory);\r\n            }\r\n        }\r\n        if (xAxis.inited && yAxis.inited) {\r\n            if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty || this.isDirty(\"connect\") || this.isDirty(\"curveFactory\")) {\r\n                this.fills.each((fill) => {\r\n                    fill.setPrivate(\"visible\", false);\r\n                });\r\n                this.strokes.each((fill) => {\r\n                    fill.setPrivate(\"visible\", false);\r\n                });\r\n                this.axisRanges.each((axisRange) => {\r\n                    let fills = axisRange.fills;\r\n                    if (fills) {\r\n                        fills.each((fill) => {\r\n                            fill.setPrivate(\"visible\", false);\r\n                        });\r\n                    }\r\n                    let strokes = axisRange.strokes;\r\n                    if (strokes) {\r\n                        strokes.each((stroke) => {\r\n                            stroke.setPrivate(\"visible\", false);\r\n                        });\r\n                    }\r\n                });\r\n                let startIndex = this.startIndex();\r\n                let strokeTemplateField = this.strokes.template.get(\"templateField\");\r\n                let fillTemplateField = this.fills.template.get(\"templateField\");\r\n                let strokeTemplateFound = true;\r\n                let fillTemplateFound = true;\r\n                if (strokeTemplateField) {\r\n                    strokeTemplateFound = false;\r\n                }\r\n                if (fillTemplateField) {\r\n                    fillTemplateFound = false;\r\n                }\r\n                for (let i = startIndex - 1; i >= 0; i--) {\r\n                    let dataItem = this.dataItems[i];\r\n                    let hasValues = true;\r\n                    let dataContext = dataItem.dataContext;\r\n                    if (strokeTemplateField) {\r\n                        if (dataContext[strokeTemplateField]) {\r\n                            strokeTemplateFound = true;\r\n                        }\r\n                    }\r\n                    if (fillTemplateField) {\r\n                        if (dataContext[fillTemplateField]) {\r\n                            fillTemplateFound = true;\r\n                        }\r\n                    }\r\n                    $array.each(this._valueFields, (field) => {\r\n                        if (!$type.isNumber(dataItem.get(field))) {\r\n                            hasValues = false;\r\n                        }\r\n                    });\r\n                    if (hasValues && strokeTemplateFound && fillTemplateFound) {\r\n                        startIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n                let len = this.dataItems.length;\r\n                let endIndex = this.endIndex();\r\n                if (endIndex < len) {\r\n                    endIndex++;\r\n                    for (let i = endIndex; i < len; i++) {\r\n                        let dataItem = this.dataItems[i];\r\n                        let hasValues = true;\r\n                        $array.each(this._valueFields, (field) => {\r\n                            if (!$type.isNumber(dataItem.get(field))) {\r\n                                hasValues = false;\r\n                            }\r\n                        });\r\n                        if (hasValues) {\r\n                            endIndex = i + 1;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (startIndex > 0) {\r\n                    startIndex--;\r\n                }\r\n                this._endIndex = endIndex;\r\n                this._clearGraphics();\r\n                this._sindex = 0;\r\n                this._dindex = startIndex;\r\n                if (this.dataItems.length == 1) {\r\n                    this._startSegment(0);\r\n                }\r\n                else {\r\n                    // this is done to avoid recursion with a lot of segments\r\n                    while (this._dindex < endIndex - 1) {\r\n                        this._startSegment(this._dindex);\r\n                        this._sindex++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._skipped = true;\r\n        }\r\n        super._updateChildren();\r\n    }\r\n    _clearGraphics() {\r\n        this.strokes.clear();\r\n        this.fills.clear();\r\n        this.axisRanges.each((axisRange) => {\r\n            axisRange.fills.clear();\r\n            axisRange.strokes.clear();\r\n        });\r\n    }\r\n    _startSegment(dataItemIndex) {\r\n        let endIndex = this._endIndex;\r\n        let currentEndIndex = endIndex;\r\n        const autoGapCount = this.get(\"autoGapCount\");\r\n        const connect = this.get(\"connect\");\r\n        const fill = this.makeFill(this.fills);\r\n        const fillTemplate = this._fillTemplate;\r\n        const originalTemplate = this.fills.template;\r\n        if (fillTemplate && fillTemplate != originalTemplate) {\r\n            fill.template = fillTemplate;\r\n        }\r\n        fill.setPrivate(\"visible\", true);\r\n        const stroke = this.makeStroke(this.strokes);\r\n        const strokeTemplate = this._strokeTemplate;\r\n        if (strokeTemplate && strokeTemplate != this.strokes.template) {\r\n            stroke.template = strokeTemplate;\r\n        }\r\n        stroke.setPrivate(\"visible\", true);\r\n        let xAxis = this.get(\"xAxis\");\r\n        let yAxis = this.get(\"yAxis\");\r\n        let baseAxis = this.get(\"baseAxis\");\r\n        let vcx = this.get(\"vcx\", 1);\r\n        let vcy = this.get(\"vcy\", 1);\r\n        let xField = this._xField;\r\n        let yField = this._yField;\r\n        let xOpenField = this._xOpenField;\r\n        let yOpenField = this._yOpenField;\r\n        const xOpenFieldValue = this.get(\"openValueXField\");\r\n        const yOpenFieldValue = this.get(\"openValueYField\");\r\n        if (!xOpenFieldValue) {\r\n            xOpenField = this._xField;\r\n        }\r\n        if (!yOpenFieldValue) {\r\n            yOpenField = this._yField;\r\n        }\r\n        const stacked = this.get(\"stacked\");\r\n        const basePosX = xAxis.basePosition();\r\n        const basePosY = yAxis.basePosition();\r\n        let baseField;\r\n        if (baseAxis === yAxis) {\r\n            baseField = this._yField;\r\n        }\r\n        else {\r\n            baseField = this._xField;\r\n        }\r\n        const segments = [];\r\n        let points = [];\r\n        segments.push(points);\r\n        const strokeTemplateField = this.strokes.template.get(\"templateField\");\r\n        const fillTemplateField = this.fills.template.get(\"templateField\");\r\n        let locationX = this.get(\"locationX\", 0.5);\r\n        let locationY = this.get(\"locationY\", 0.5);\r\n        let openLocationX = this.get(\"openLocationX\", locationX);\r\n        let openLocationY = this.get(\"openLocationY\", locationY);\r\n        const minDistance = this.get(\"minDistance\", 0);\r\n        let i;\r\n        let fillVisible = this.fills.template.get(\"visible\");\r\n        if (this.axisRanges.length > 0) {\r\n            fillVisible = true;\r\n        }\r\n        let getOpen = false;\r\n        if (stacked || xOpenFieldValue || yOpenFieldValue) {\r\n            getOpen = true;\r\n        }\r\n        const o = {\r\n            points, segments, stacked, getOpen, basePosX, basePosY, fillVisible, xField, yField, xOpenField, yOpenField, vcx, vcy, baseAxis, xAxis, yAxis, locationX, locationY, openLocationX, openLocationY, minDistance\r\n        };\r\n        let rangeStrokeTemplate = this._strokeTemplate;\r\n        let rangeFillTemplate = this._fillTemplate;\r\n        for (i = dataItemIndex; i < currentEndIndex; i++) {\r\n            this._dindex = i;\r\n            const dataItem = this._dataItems[i];\r\n            let valueX = dataItem.get(xField);\r\n            let valueY = dataItem.get(yField);\r\n            if (valueX == null || valueY == null) {\r\n                if (!connect) {\r\n                    points = [];\r\n                    segments.push(points);\r\n                    o.points = points;\r\n                }\r\n            }\r\n            else {\r\n                this._getPoints(dataItem, o);\r\n            }\r\n            if (strokeTemplateField) {\r\n                let strokeTemplate = dataItem.dataContext[strokeTemplateField];\r\n                if (strokeTemplate) {\r\n                    if (!(strokeTemplate instanceof Template)) {\r\n                        strokeTemplate = Template.new(strokeTemplate);\r\n                    }\r\n                    this._strokeTemplate = strokeTemplate;\r\n                    if (i > dataItemIndex) {\r\n                        currentEndIndex = i;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        rangeStrokeTemplate = strokeTemplate;\r\n                        stroke.template = strokeTemplate;\r\n                    }\r\n                }\r\n            }\r\n            if (fillTemplateField) {\r\n                let fillTemplate = dataItem.dataContext[fillTemplateField];\r\n                if (fillTemplate) {\r\n                    if (!(fillTemplate instanceof Template)) {\r\n                        fillTemplate = Template.new(fillTemplate);\r\n                    }\r\n                    this._fillTemplate = fillTemplate;\r\n                    if (i > dataItemIndex) {\r\n                        currentEndIndex = i;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        rangeFillTemplate = fillTemplate;\r\n                        fill.template = fillTemplate;\r\n                    }\r\n                }\r\n            }\r\n            if (!connect) {\r\n                let nextItem = this.dataItems[i + 1];\r\n                if (nextItem) {\r\n                    if (baseAxis.shouldGap(dataItem, nextItem, autoGapCount, baseField)) {\r\n                        points = [];\r\n                        segments.push(points);\r\n                        o.points = points;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        fill.setRaw(\"userData\", [dataItemIndex, i]);\r\n        stroke.setRaw(\"userData\", [dataItemIndex, i]);\r\n        if (i === endIndex) {\r\n            this._endLine(points, segments[0][0]);\r\n        }\r\n        if (stroke) {\r\n            this._drawStroke(stroke, segments);\r\n        }\r\n        if (fill) {\r\n            this._drawFill(fill, segments);\r\n        }\r\n        this.axisRanges.each((axisRange) => {\r\n            const container = axisRange.container;\r\n            const fills = axisRange.fills;\r\n            const fill = this.makeFill(fills);\r\n            if (container) {\r\n                container.children.push(fill);\r\n            }\r\n            fill.setPrivate(\"visible\", true);\r\n            this._drawFill(fill, segments);\r\n            const strokes = axisRange.strokes;\r\n            const stroke = this.makeStroke(strokes);\r\n            if (container) {\r\n                container.children.push(stroke);\r\n            }\r\n            if (rangeStrokeTemplate && rangeStrokeTemplate != this.strokes.template) {\r\n                stroke.template = rangeStrokeTemplate;\r\n            }\r\n            if (rangeFillTemplate && rangeFillTemplate != this.fills.template) {\r\n                fill.template = rangeFillTemplate;\r\n            }\r\n            stroke.setPrivate(\"visible\", true);\r\n            this._drawStroke(stroke, segments);\r\n            fill.setRaw(\"userData\", [dataItemIndex, i]);\r\n            stroke.setRaw(\"userData\", [dataItemIndex, i]);\r\n        });\r\n    }\r\n    _getPoints(dataItem, o) {\r\n        let points = o.points;\r\n        let itemLocationX = dataItem.get(\"locationX\", o.locationX);\r\n        let itemLocationY = dataItem.get(\"locationY\", o.locationY);\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        const exactLocationY = this.get(\"exactLocationY\", false);\r\n        let xPos = o.xAxis.getDataItemPositionX(dataItem, o.xField, itemLocationX, o.vcx, exactLocationX);\r\n        let yPos = o.yAxis.getDataItemPositionY(dataItem, o.yField, itemLocationY, o.vcy, exactLocationY);\r\n        if (this._shouldInclude(xPos)) {\r\n            const iPoint = this.getPoint(xPos, yPos);\r\n            const point = [iPoint.x, iPoint.y];\r\n            iPoint.x += this._x;\r\n            iPoint.y += this._y;\r\n            dataItem.set(\"point\", iPoint);\r\n            if (o.fillVisible) {\r\n                let xPos0 = xPos;\r\n                let yPos0 = yPos;\r\n                if (o.baseAxis === o.xAxis) {\r\n                    yPos0 = o.basePosY;\r\n                }\r\n                else if (o.baseAxis === o.yAxis) {\r\n                    xPos0 = o.basePosX;\r\n                }\r\n                if (o.getOpen) {\r\n                    let valueX = dataItem.get(o.xOpenField);\r\n                    let valueY = dataItem.get(o.yOpenField);\r\n                    if (valueX != null && valueY != null) {\r\n                        let itemLocationX = dataItem.get(\"openLocationX\", o.openLocationX);\r\n                        let itemLocationY = dataItem.get(\"openLocationY\", o.openLocationY);\r\n                        if (o.stacked) {\r\n                            let stackToItemX = dataItem.get(\"stackToItemX\");\r\n                            let stackToItemY = dataItem.get(\"stackToItemY\");\r\n                            if (stackToItemX) {\r\n                                xPos0 = o.xAxis.getDataItemPositionX(stackToItemX, o.xField, itemLocationX, stackToItemX.component.get(\"vcx\"), exactLocationX);\r\n                                if ($type.isNaN(xPos0)) {\r\n                                    xPos0 = o.basePosX;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (o.yAxis === o.baseAxis) {\r\n                                    xPos0 = o.basePosX;\r\n                                }\r\n                                else {\r\n                                    xPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\r\n                                }\r\n                            }\r\n                            if (stackToItemY) {\r\n                                yPos0 = o.yAxis.getDataItemPositionY(stackToItemY, o.yField, itemLocationY, stackToItemY.component.get(\"vcy\"), exactLocationY);\r\n                                if ($type.isNaN(yPos0)) {\r\n                                    yPos0 = o.basePosY;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (o.xAxis === o.baseAxis) {\r\n                                    yPos0 = o.basePosY;\r\n                                }\r\n                                else {\r\n                                    yPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            xPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\r\n                            yPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\r\n                        }\r\n                    }\r\n                }\r\n                let closeIPoint = this.getPoint(xPos0, yPos0);\r\n                point[2] = closeIPoint.x;\r\n                point[3] = closeIPoint.y;\r\n            }\r\n            if (o.minDistance > 0) {\r\n                const p0 = point[0];\r\n                const p1 = point[1];\r\n                const p2 = point[2];\r\n                const p3 = point[3];\r\n                const prev = this._previousPoint;\r\n                const pp0 = prev[0];\r\n                const pp1 = prev[1];\r\n                const pp2 = prev[2];\r\n                const pp3 = prev[3];\r\n                if (Math.hypot(p0 - pp0, p1 - pp1) > o.minDistance || (p2 && p3 && Math.hypot(p2 - pp2, p3 - pp3) > o.minDistance)) {\r\n                    points.push(point);\r\n                    this._previousPoint = point;\r\n                }\r\n            }\r\n            else {\r\n                points.push(point);\r\n            }\r\n        }\r\n    }\r\n    _endLine(_points, _firstPoint) {\r\n    }\r\n    _drawStroke(graphics, segments) {\r\n        if (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\r\n            graphics.set(\"draw\", (display) => {\r\n                $array.each(segments, (segment) => {\r\n                    this._strokeGenerator.context(display);\r\n                    this._strokeGenerator(segment);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _drawFill(graphics, segments) {\r\n        if (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\r\n            graphics.set(\"draw\", (display) => {\r\n                $array.each(segments, (segment) => {\r\n                    this._fillGenerator.context(display);\r\n                    this._fillGenerator(segment);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        super._processAxisRange(axisRange);\r\n        axisRange.fills = new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n            themeTags: $utils.mergeTags(axisRange.fills.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"]),\r\n        }, [this.fills.template, axisRange.fills.template]));\r\n        axisRange.strokes = new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n            themeTags: $utils.mergeTags(axisRange.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"]),\r\n        }, [this.strokes.template, axisRange.strokes.template]));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    createLegendMarker(_dataItem) {\r\n        const legendDataItem = this.get(\"legendDataItem\");\r\n        if (legendDataItem) {\r\n            const marker = legendDataItem.get(\"marker\");\r\n            const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n            if (markerRectangle) {\r\n                markerRectangle.setPrivate(\"visible\", false);\r\n            }\r\n            marker.set(\"background\", Rectangle.new(marker._root, { fillOpacity: 0, fill: color(0x000000) }));\r\n            const legendStroke = marker.children.push(Graphics._new(marker._root, {\r\n                themeTags: [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"], interactive: false\r\n            }, [this.strokes.template]));\r\n            this._legendStroke = legendStroke;\r\n            const legendFill = marker.children.push(Graphics._new(marker._root, {\r\n                themeTags: [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]\r\n            }, [this.fills.template]));\r\n            this._legendFill = legendFill;\r\n            const disabledColor = this._root.interfaceColors.get(\"disabled\");\r\n            legendStroke.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n            legendFill.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n            if (this.bullets.length > 0) {\r\n                const bulletFunction = this.bullets.getIndex(0);\r\n                if (bulletFunction) {\r\n                    const bullet = bulletFunction(marker._root, this, new DataItem(this, { legend: true }, {}));\r\n                    if (bullet) {\r\n                        const sprite = bullet.get(\"sprite\");\r\n                        if (sprite instanceof Graphics) {\r\n                            sprite.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n                        }\r\n                        if (sprite) {\r\n                            sprite.setAll({\r\n                                tooltipText: undefined,\r\n                                tooltipHTML: undefined,\r\n                                focusable: undefined,\r\n                                focusableGroup: undefined,\r\n                                ariaLabel: undefined\r\n                            });\r\n                            marker.children.push(sprite);\r\n                            sprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\r\n                            marker.events.on(\"boundschanged\", () => {\r\n                                sprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(LineSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"LineSeries\"\r\n});\r\nObject.defineProperty(LineSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: XYSeries.classNames.concat([LineSeries.className])\r\n});\r\n//# sourceMappingURL=LineSeries.js.map"],"names":["array","x","Linear","context","y","curveLinear","p","line","defined","constant","curve","output","path","withPath","pointX","pointY","data","i","n","d","defined0","buffer","_","area","x0","y0","y1","x1","j","k","x0z","y0z","arealine","XYChartDefaultTheme","Theme","ic","language","r","ColorSet","Color","rule","setColor","p100","p50","dataItem","index","axisFill","$type.isNumber","gridIntervals","dateFormats","periodChangeDateFormats","tooltipDateFormats","$array.copy","$object.copy","axis","value","endValue","intervalDuration","baseInterval","gridInterval","min","$time.round","val","visible","step","$math.round","percent","display","sprite","parent","h","w","XYChart","SerialChart","ListAutoDispose","Container","Button","Graphics","root","verticalLayout","zoomOutButton","plotContainer","Rectangle","event","series","xAxis","$array.remove","yAxis","cursor","snapToSeries","wheelX","wheelY","wheelEvent","prevent","$utils.isLocalEvent","plotPoint","wheelStep","shiftY","shiftX","wheelZoomPositionX","wheelZoomPositionY","start","end","position","maxDeviation","newStart","newEnd","delta","se","sign","diff","originalEvent","local","$object.keys","panX","panY","eventType","animation","downPoint","pointerId","scrollbarX","panStart","panEnd","deltaX","scrollbarY","deltaY","downPoints","movePoints","$object.each","point","movePoint","downPoint0","downPoint1","movePoint0","movePoint1","downStartX","downEndX","downPos0","downPos1","movePos0","movePos1","initialDistance","currentDistance","s","e","sa","ea","downStartY","downEndY","cursorPoint","snapToSeriesBy","dataItems","$array.each","startIndex","endIndex","tooltipDataItem","minDistance","closestItem","distance","tooltip","previous","$array.move","colorSet","color","patternSet","pattern","behavior","downPositionX","downPositionY","positionX","positionY","position0","position1","axes","priority","axisStart","axisEnd","zoomAnimation","updateScrollbar","container","change","axisParent","gridContainer","gridParent","topGridContainer","topGridParent","left","right","bottomAxesContainer","topAxesContainer","force","otherCharts","global","chart","chartPlotContainer","documentPoint","chartRoot","hh","bounds","plotT","plotB","tooltips","sum","maxTooltipDistance","maxTooltipDistanceBy","closest","closestPoint","tooltipSeries","hidden","totalTooltipH","tooltipCount","tooltipContainer","count","a","b","$order.compareNumber","prevY","height","centerY","Percent","prevBottom","top","bottom","Grid","XYCursor","$utils.mergeTags","$utils.supports","$utils.addEventListener","ev","$utils.getEventKey","key","ctrlKey","dir","m","inversed","syncWith","$utils.isTouchEvent","rootPoint","type","moveThreshold","dispatch","lastPoint","skipEvent","alwaysShow","xyPos","userPositionX","userPositionY","xy","selection","max","XYSeries","Series","List","DataItem","axisRange","axisDataItem","bullet","_key","field","$array.removeFirst","newValue","baseAxis","minBulletDistance","xName","xCapName","$utils.capitalizeFirst","yName","yCapName","xLetter","yLetter","open","low","high","show","hiddenState","sequencedInterpolation","$utils.relativeToValue","tooltipPositionX","tooltipFieldX","tooltipPositionY","tooltipFieldY","stacked","vcx","vcy","outOfSelection","selectionMinY","selectionMaxY","selectionMinX","selectionMaxX","mainContainerMask","target","fill","draw","seriesIndex","stackToItemKey","len","stackToNegative","stackToSeries","stackToItem","stackValue","stackedToSeries","_dataItem","locationX","locationY","exactLocationX","exactLocationY","realField","previousBullet","previousBounds","yo","xo","_positionX","_positionY","id","dataSet","bullets","duration","_super","__awaiter","promises","easing","baseValue","stackedSeries","itemLocationX","itemLocationY","xPos","yPos","legendDataItem","label","txt","valueLabel","text","_position","baseDuration","minSelection","dl","BaseColumnSeries","listTemplate","categoryAxis","valueAxis","columnsTemplate","clusterCount","xRenderer","yRenderer","cellStartLocation","cellEndLocation","cellLocationX0","cellLocationX1","cellLocationY0","cellLocationY1","axisCase","graphics","markerRectangle","ds","visualSettings","setting","graphicsArray","rangeGraphics","previousDataItem","xField","yField","valueX","valueY","xOpenField","yOpenField","openLocationX","openLocationY","width","xStart","xEnd","yStart","yEnd","l","t","fitW","fitH","startLocation","endLocation","offset","stackToItemY","stackToItemX","$type.isNaN","maxWidth","maxHeight","ptl","pbr","tooltipPoint","dropFromOpen","riseFromOpen","dropFromPrevious","riseFromPrevious","close","previousClose","list","lastDataItem","column","Axis","Component","renderer","ghostLabel","_start","_end","sAnimation","eAnimation","maxZoomFactor","maxZoomFactorReal","minZoomCount","maxZoomCount","minZoomFactor","themeTags","above","grid","_index","rendererTags","forceHidden","fh","tick","v","tags","minor","_a","_b","_c","remove","axisBullet","gWidth","_location","_fields","coordinate","_nextItem","_autoGapCount","_fieldName","_series","ValueAxis","syncWithAxis","MultiDisposer","someDirty","getMM","letter","numberFormat","formatter","logarithmic","selectionMin","selectionMax","differencePower","minLog","minRealLog","minorLabelsEnabled","minorGridEnabled","stepPower","stepAdjusted","minorGridCount","minorStep","nextValue","minorValue","minorDataItem","minorLabel","decCount","endPosition","fillEndPosition","labelEndPosition","labelEndValue","fillRule","gridCount","minMaxStep","stepDecimalPlaces","$utils.decimalPlaces","treatZeroAs","location","_cellLocation","axisLocation","vc","fieldWorking","total","totalPercent","minDefined","maxDefined","extraMin","extraMax","selectionStrictMinMax","strictMinMax","seriesMin","seriesMax","minX","maxX","minY","maxY","range","smin","minMaxStep2","selectionMinReal","selectionMaxReal","$math.fitToRange","minDiff","initialMin","initialMax","minAdapted","maxAdapted","strictMinMaxSelection","strict","exponent","power","_min","_max","strictMode","difference","extra","stepDivisor","maxPrecision","ceiledStep","$math.ceil","minCount","maxCount","_adjustPosition","extraDecimals","decimals","fieldName","oldDiff","syncMin","syncMax","syncStep","currentCount","synced","omin","omax","ostep","CategoryAxis","indices","getIndices","startCategory","endCategory","openKey","otherAxis","findDataItem","category","direction","idx","searchCategory","item","startDataItem","endDataItem","hasValue","frequency","f","fillIndex","categoryLocation","endCategoryLocation","fillEndIndex","cellLocation","_axisLocation","final","name","modCount","acc","cellSizeAtIndex","modifiedLen","cellSizes","cellSize","rel","populateString","seriesDataItem","c","AxisLabel","Label","AxisTick","Tick","AxisRenderer","ListTemplate","Template","thumb","labelsContainer","pan","_event","downStart","downEnd","_point1","_point2","_tooltip","minPosition","maxPosition","updatedStart","updatedEnd","AxisRendererX","gridTemplate","opposite","inside","axisChildren","children","point1","point2","axisHeader","length","bulletPosition","previousSprite","num","pointerOrientation","oldBounds","$utils.sameBounds","AxisRendererY","horizontalLayout","ColumnSeries","RoundedRectangle","stroke","strokeWidth","strokeOpacity","fillOpacity","strokWidth","LineSeries","strokes","fills","legendStroke","legendFill","fillPattern","curveFactory","strokeTemplateField","fillTemplateField","strokeTemplateFound","fillTemplateFound","hasValues","dataContext","dataItemIndex","currentEndIndex","autoGapCount","connect","fillTemplate","originalTemplate","strokeTemplate","xOpenFieldValue","yOpenFieldValue","basePosX","basePosY","baseField","segments","points","fillVisible","getOpen","o","rangeStrokeTemplate","rangeFillTemplate","nextItem","iPoint","xPos0","yPos0","closeIPoint","p0","p1","p2","p3","prev","pp0","pp1","pp2","pp3","_points","_firstPoint","segment","marker","disabledColor","bulletFunction"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}