import{m as D,r as it,i as nt,h as ot}from"./TimeOnly-DMbsPjUX.js";import{C as ut,cl as v,eT as p,d$ as b,eU as y,eV as k,eX as G,ch as re,eW as N,bf as we,kQ as lt,eS as ct,bQ as ft,aH as se,aG as ae,dU as ie,ab as ht,ib as dt,z as mt,gV as yt,be as Te}from"./main-6gYsRPh_.js";import{n as Z}from"./enum-BVcvu-V3.js";import{t as C}from"./ImmutableArray-CiJxhY8_.js";import{l as pt,D as _e}from"./shared-kaSAj19f.js";import{l as bt,p as gt}from"./number-DQ0qewyb.js";let V=class{};class J{constructor(){}}function ne(e,t,r){if(e instanceof J&&!(e instanceof q)){const a=new q;return a.fn=e,a.parameterEvaluator=r,a.context=t,a}return e}class St extends J{constructor(t){super(),this.fn=t}createFunction(t){return(...r)=>this.fn(t,{preparsed:!0,arguments:r})}call(t,r){return this.fn(t,r)}marshalledCall(t,r,a,s){return s(t,r,(i,n,u)=>{u=u.map(c=>c instanceof J&&!(c instanceof q)?ne(c,t,s):c);const m=this.call(a,{args:u});return ut(m)?m.then(c=>ne(c,a,s)):m})}}class q extends J{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(t){return this.fn.createFunction(this.context)}call(t,r){return this.fn.marshalledCall(t,r,this.context,this.parameterEvaluator)}marshalledCall(t,r,a){return this.fn.marshalledCall(t,r,this.context,this.parameterEvaluator)}}let M=class at extends C{constructor(t,r,a,s,i,n){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=a,this._hasM=s,this._cacheId=i,this._partId=n}get(t){if(this._lazyPt[t]===void 0){const r=this._elements[t];if(r===void 0)return;const a=new v(r[0],r[1],this._spRef);this._hasZ&&(a.z=r[2]),this._hasM&&(a.m=this._hasZ?r[3]:r[2]),a.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=a}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof at&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};class te extends C{constructor(t,r,a,s,i){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=a,this._hasM=s,this._spRef=r,this._cacheId=i}get(t){if(this._lazyPath[t]===void 0){const r=this._elements[t];if(r===void 0)return;this._lazyPath[t]=new M(r,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof te&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class Ce{constructor(t){this.value=t}}class ke{constructor(t){this.value=t}}const g={type:"VOID"},xe=Symbol("BREAK"),Ae=Symbol("CONTINUE");function R(e,t,r){return t===""||t==null||t===r||t===r?e:e=e.split(t).join(r)}function F(e){return e instanceof J}function oe(e){return e instanceof V}function O(e){return!!y(e)||!!b(e)||!!l(e)||!!f(e)||!!h(e)||!!p(e)||e===null||e===g}function De(e,t){return e===void 0?t:e}function Fe(e){return e==null?"":N(e)||w(e)?"Array":l(e)?"Date":h(e)?"Time":f(e)?"DateOnly":y(e)?"String":p(e)?"Boolean":b(e)?"Number":e?.declaredClass==="esri.arcade.Attachment"?"Attachment":e?.declaredClass==="esri.arcade.Portal"?"Portal":e?.declaredClass==="esri.arcade.Dictionary"?"Dictionary":B(e)?"KnowledgeGraph":e instanceof V?"Module":I(e)?"Feature":e instanceof v?"Point":e instanceof se?"Polygon":e instanceof ae?"Polyline":e instanceof ie?"Multipoint":e instanceof re?"Extent":F(e)?"Function":U(e)?"FeatureSet":W(e)?"FeatureSetCollection":E(e)?"Voxel":H(e)?"Pixel":e===g?"":typeof e=="number"&&isNaN(e)?"Number":"Unrecognized Type"}function ue(e){return e===g}function L(e){return e instanceof k}function I(e){return e?.arcadeDeclaredClass==="esri.arcade.Feature"}function E(e){return e?.arcadeDeclaredClass==="esri.arcade.Voxel"}function H(e){return e?.arcadeDeclaredClass==="esri.arcade.Pixel"}function U(e){return e?.declaredRootClass==="esri.arcade.featureset.support.FeatureSet"}function $(e){return e?.declaredClass==="esri.arcade.Dictionary"}function Oe(e){return $(e)||I(e)||E(e)||H(e)}function W(e){return e?.declaredRootClass==="esri.arcade.featureSetCollection"}function B(e){return e?.declaredClass==="esri.rest.knowledgeGraph.KnowledgeGraph"}function w(e){return e instanceof C}function l(e){return e instanceof D}function f(e){return e instanceof nt}function h(e){return e instanceof it}function le(e){return e!=null&&typeof e=="object"}function ve(e,t,r,a,s){if(e.length<t||e.length>r)throw new Z(a,"WrongNumberOfParameters",s)}function Je(e){return e==null||ue(e)||e===""}function Me(e){return e<0?-Math.round(-e):Math.round(e)}function ce(e,t){return isNaN(e)||t==null||t===""?e.toString():(t=R(t,"\u2030",""),t=R(t,"\xA4",""),bt(e,{pattern:t}))}function K(e,t){return t==null||t===""?e.toISOString(!0):e.toFormat(fe(t),{locale:we(),numberingSystem:"latn"})}function fe(e,t=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let r="";const a=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const s of e.match(a)||[])switch(s){case"D":r+="d";break;case"DD":r+="dd";break;case"DDD":r+="o";break;case"d":r+="c";break;case"ddd":r+="ccc";break;case"dddd":r+="cccc";break;case"M":r+="L";break;case"MM":r+="LL";break;case"MMM":r+="LLL";break;case"MMMM":r+="LLLL";break;case"YY":r+="yy";break;case"Y":case"YYYY":r+="yyyy";break;case"Q":r+="q";break;case"Z":r+="Z";break;case"ZZ":r+="ZZ";break;case"ZZZ":r+="ZZZ";break;case"ZZZZ":r+=t?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":r+=t?"[ZZZZZ]":"ZZZZZ";break;case"S":r+="'S'";break;case"SS":r+="'SS'";break;case"SSS":r+="u";break;case"A":case"a":r+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":r+=s;break;default:s.length>=2&&s.startsWith("[")&&s.endsWith("]")?r+=`'${s.slice(1,-1)}'`:r+=`'${s}'`}return r}function o(e,t,r){switch(r){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function Re(e,t,r){if(e===null){if(t===null||t===g)return o(null,null,r);if(b(t))return o(0,t,r);if(y(t)||p(t))return o(0,d(t),r);if(l(t))return o(0,t.toNumber(),r);if(h(t)||f(t))return o(e,t.toNumber(),r)}if(e===g){if(t===null||t===g)return o(null,null,r);if(b(t))return o(0,t,r);if(y(t)||p(t))return o(0,d(t),r);if(l(t))return o(0,t.toNumber(),r);if(h(t)||f(t))return o(e,t.toNumber(),r)}else if(b(e)){if(b(t))return o(e,t,r);if(p(t))return o(e,d(t),r);if(t===null||t===g)return o(e,0,r);if(y(t))return o(e,d(t),r);if(l(t)||h(t)||f(t))return o(e,t.toNumber(),r)}else if(y(e)){if(y(t))return o(_(e),_(t),r);if(l(t)||h(t)||f(t))return o(d(e),t.toNumber(),r);if(b(t))return o(d(e),t,r);if(t===null||t===g)return o(d(e),0,r);if(p(t))return o(d(e),d(t),r)}else if(l(e)){if(l(t))return e.timeZone!==t.timeZone&&(e.isUnknownTimeZone?e=D.arcadeDateAndZoneToArcadeDate(e,t.timeZone):t.isUnknownTimeZone&&(t=D.arcadeDateAndZoneToArcadeDate(t,e.timeZone))),o(e.toNumber(),t.toNumber(),r);if(t===null||t===g)return o(e.toNumber(),0,r);if(b(t))return o(e.toNumber(),t,r);if(p(t)||y(t))return o(e.toNumber(),d(t),r);if(h(t))throw new Z(null,"CannotCompareDateAndTime",null);if(f(t))return o(e.toNumber(),t.toNumber(),r)}else if(p(e)){if(p(t))return o(e,t,r);if(b(t))return o(d(e),d(t),r);if(l(t)||h(t)||f(t))return o(d(e),t.toNumber(),r);if(t===null||t===g)return o(d(e),0,r);if(y(t))return o(d(e),d(t),r)}else if(f(e)){if(l(t))return o(e.toNumber(),t.toNumber(),r);if(t===null||t===g)return o(e.toNumber(),0,r);if(b(t))return o(e.toNumber(),t,r);if(p(t)||y(t))return o(e.toNumber(),d(t),r);if(h(t))throw new Z(null,"CannotCompareDateAndTime",null);if(f(t))return o(e.toNumber(),t.toNumber(),r)}else if(h(e)){if(l(t))throw new Z(null,"CannotCompareDateAndTime",null);if(t===null||t===g)return o(e.toNumber(),0,r);if(b(t))return o(e.toNumber(),t,r);if(p(t)||y(t))return o(e.toNumber(),d(t),r);if(h(t))return o(e.toNumber(),t.toNumber(),r);if(f(t))throw new Z(null,"CannotCompareDateAndTime",null)}return!!he(e,t)&&(r==="<="||r===">=")}function he(e,t){if(e===t||e===null&&t===g||t===null&&e===g)return!0;if(l(e)&&l(t)||h(e)&&h(t)||f(e)&&f(t))return e.equals(t);if(e instanceof te||e instanceof M)return e.equalityTest(t);if(e instanceof v&&t instanceof v){const r=e.cache._arcadeCacheId,a=t.cache._arcadeCacheId;if(r!=null)return r===a}return!!(le(e)&&le(t)&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function de(e,{useNumbersForDates:t}){let r="";for(const a in e){r!==""&&(r+=",");const s=e[a];s==null?r+=JSON.stringify(a)+":null":p(s)||b(s)||y(s)?r+=JSON.stringify(a)+":"+JSON.stringify(s):L(s)?r+=JSON.stringify(a)+":"+j(s):h(s)||f(s)?r+=`${JSON.stringify(a)}:${JSON.stringify(s.toString())}`:w(s)||Array.isArray(s)?r+=JSON.stringify(a)+":"+j(s,null,t):l(s)?r+=t?JSON.stringify(a)+":"+JSON.stringify(s.getTime()):JSON.stringify(a)+":"+s.stringify():s!==null&&typeof s=="object"&&"castToText"in s&&(r+=JSON.stringify(a)+":"+s.castToText(t))}return"{"+r+"}"}function _(e,t){if(y(e))return e;if(e===null)return"";if(b(e))return ce(e,t);if(p(e))return e.toString();if(l(e))return K(e,t);if(h(e)||f(e))return e.toFormat(t);if(e instanceof k)return JSON.stringify(e.toJSON());if(N(e)){const r=[];for(let a=0;a<e.length;a++)r[a]=Q(e[a]);return"["+r.join(",")+"]"}if(e instanceof C){const r=[];for(let a=0;a<e.length();a++)r[a]=Q(e.get(a));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&"castToText"in e?e.castToText():F(e)?"object, Function":e===g?"":oe(e)?"object, Module":""}function Ie(e){const t=[];if(e instanceof C){for(let r=0;r<e.length();r++)t[r]=d(e.get(r));return t}if(!N(e))return null;for(let r=0;r<e.length;r++)t[r]=d(e[r]);return t}function j(e,t,r=!1){if(y(e))return e;if(e===null)return"";if(b(e))return ce(e,t);if(p(e))return e.toString();if(l(e))return K(e,t);if(h(e)||f(e))return e.toFormat(t);if(e instanceof k)return e instanceof re?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+pe(e.spatialReference)+"}":pe(e.toJSON(),(a,s)=>a.key===s.key?0:a.key==="spatialReference"?1:s.key==="spatialReference"||a.key<s.key?-1:a.key>s.key?1:0);if(N(e)){const a=[];for(let s=0;s<e.length;s++)a[s]=Q(e[s],r);return"["+a.join(",")+"]"}if(e instanceof C){const a=[];for(let s=0;s<e.length();s++)a[s]=Q(e.get(s),r);return"["+a.join(",")+"]"}return e!==null&&typeof e=="object"&&"castToText"in e?e.castToText(r):F(e)?"object, Function":e===g?"":oe(e)?"object, Module":""}function Q(e,t=!1){if(e===null)return"null";if(p(e)||y(e))return JSON.stringify(e);if(b(e))return e.toString();if(e instanceof k||e instanceof C||Array.isArray(e))return j(e,null,t);if(l(e))return JSON.stringify(t?e.getTime():K(e,""));if(h(e)||f(e))return JSON.stringify(e.toString());if(e!==null&&typeof e=="object"){if("castToText"in e)return e.castToText(t)}else if(e===g)return"null";return"null"}function d(e,t){return b(e)?e:e===null||e===""?0:l(e)||f(e)||h(e)?NaN:p(e)?e?1:0:N(e)||e===""||e===void 0?NaN:t!==void 0&&y(e)?(t=R(t,"\u2030",""),t=R(t,"\xA4",""),gt(e,{pattern:t})):e===g?0:Number(e)}function Pe(e,t){if(l(e))return e;if(y(e)){const r=Nt(e,t);if(r)return D.dateTimeToArcadeDate(r)}return null}function Nt(e,t){const r=/ (\d\d)/,a=ot(t);let s=Te.fromISO(e,{zone:a});return s.isValid||r.test(e)&&(e=e.replace(r,"T$1"),s=Te.fromISO(e,{zone:t}),s.isValid)?s:null}function Le(e){return p(e)?e:y(e)?(e=e.toLowerCase())==="true":!!b(e)&&e!==0&&!isNaN(e)}function Zt(e,t){const r=JSON.parse(e);return r&&!r.spatialReference&&(r.spatialReference=t),ft(r)}function je(e,t){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function Ye(e){if(e===null)return null;if(e instanceof v)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof se){if((e.curveRings??e.rings).length===0)return null;for(const t of e.curveRings??e.rings)if(t.length>0)return e;return null}if(e instanceof ae){if((e.curvePaths??e.paths).length===0)return null;for(const t of e.curvePaths??e.paths)if(t.length>0)return e;return null}return e instanceof ie?e.points.length===0?null:e:e instanceof re?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function me(e,t){if(!e||!e.domain)return t;let r=null,a=null;if(l(t))r=t.toNumber();else if(f(t))r=t.toString();else if(h(t))r=t.toStorageString();else if(e.field.type==="string"||e.field.type==="esriFieldTypeString")r=_(t);else{if(t==null)return null;if(t==="")return t;r=d(t)}for(let s=0;s<e.domain.codedValues.length;s++){const i=e.domain.codedValues[s];i.code===r&&(a=i)}return a===null?_(t):a.name}function ye(e,t){if(!e||!e.domain)return t;let r=null;const a=_(t);for(let s=0;s<e.domain.codedValues.length;s++){const i=e.domain.codedValues[s];i.name===a&&(r=i)}return r===null?t:r.code}function Y(e,t,r=null,a=null){if(!t||!t.fields)return null;let s,i,n=null;for(let S=0;S<t.fields.length;S++){const T=t.fields[S];T.name.toLowerCase()===e.toString().toLowerCase()&&(n=T)}if(n===null)throw new Z(null,"FieldNotFound",null,{key:e});let u=t.typeIdField,m="id",c=t.types;if(t.subtypeField&&(u=t.subtypeField,m="code",c=t.subtypes??[]),a===null&&r&&u)a=r.hasField(u)?r.field(u):null;else if(u&&a!==null){let S=!1;for(const T of c||[])if(a===T[m]){S=!0;break}if(!S){for(const T of c||[])if(a===T.name){a=T[m],S=!0;break}}S||(a=null,r&&u&&(a=r.hasField(u)?r.field(u):null))}return a!=null&&c.some(S=>S[m]===a&&(s=S.domains?.[n.name],s&&s.type==="inherited"&&(s=ze(n.name,t),i=!0),!0)),i||s||(s=ze(e,t)),{field:n,domain:s}}function ze(e,t){let r;return t.fields.some(a=>(a.name.toLowerCase()===e.toLowerCase()&&(r=a.domain),!!r)),r}function pe(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,a=t.cmp&&(s=t.cmp,function(n){return function(u,m){const c={key:u,value:n[u]},S={key:m,value:n[m]};return s(c,S)}});var s;const i=[];return function n(u){if(u?.toJSON&&typeof u.toJSON=="function"&&(u=u.toJSON()),u===void 0)return;if(typeof u=="number")return isFinite(u)?""+u:"null";if(typeof u!="object")return JSON.stringify(u);let m,c;if(Array.isArray(u)){for(c="[",m=0;m<u.length;m++)m&&(c+=","),c+=n(u[m])||"null";return c+"]"}if(u===null)return"null";if(i.includes(u)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const S=i.push(u)-1,T=Object.keys(u).sort(a?.(u));for(c="",m=0;m<T.length;m++){const Ne=T[m],Ze=n(u[Ne]);Ze&&(c&&(c+=","),c+=JSON.stringify(Ne)+":"+Ze)}return i.splice(S,1),"{"+c+"}"}(e)}function Ge(e){if(e===null)return null;const t=[];for(const r of e)I(r)?t.push(r.geometry()):t.push(r);return t}function P(e,t){if(!(t instanceof v))throw new Z(null,"InvalidParameter",null);e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function Ve(e,t){if(N(e)||w(e)){let r=!1,a=!1,s=[],i=t;if(N(e)){for(const n of e)P(s,n);s.length>0&&(i=e[0].spatialReference,r=e[0].hasZ,a=e[0].hasM)}else if(e instanceof M)s=e._elements,s.length>0&&(r=e._hasZ,a=e._hasM,i=e.get(0).spatialReference);else{if(!w(e))throw new Z(null,"InvalidParameter",null);for(const n of e.toArray())P(s,n);s.length>0&&(i=e.get(0).spatialReference,r=e.get(0).hasZ===!0,a=e.get(0).hasM===!0)}return s.length===0?null:(yt(s)||(s=s.slice().reverse()),new se({rings:[s],spatialReference:i,hasZ:r,hasM:a}))}return e}function qe(e,t){if(N(e)||w(e)){let r=!1,a=!1,s=[],i=t;if(N(e)){for(const n of e)P(s,n);s.length>0&&(i=e[0].spatialReference,r=e[0].hasZ===!0,a=e[0].hasM===!0)}else if(e instanceof M)s=e._elements,s.length>0&&(r=e._hasZ,a=e._hasM,i=e.get(0).spatialReference);else if(w(e)){for(const n of e.toArray())P(s,n);s.length>0&&(i=e.get(0).spatialReference,r=e.get(0).hasZ===!0,a=e.get(0).hasM===!0)}return s.length===0?null:new ae({paths:[s],spatialReference:i,hasZ:r,hasM:a})}return e}function Ee(e,t){if(N(e)||w(e)){let r=!1,a=!1,s=[],i=t;if(N(e)){for(const n of e)P(s,n);s.length>0&&(i=e[0].spatialReference,r=e[0].hasZ===!0,a=e[0].hasM===!0)}else if(e instanceof M)s=e._elements,s.length>0&&(r=e._hasZ,a=e._hasM,i=e.get(0).spatialReference);else if(w(e)){for(const n of e.toArray())P(s,n);s.length>0&&(i=e.get(0).spatialReference,r=e.get(0).hasZ===!0,a=e.get(0).hasM===!0)}return s.length===0?null:new ie({points:s,spatialReference:i,hasZ:r,hasM:a})}return e}function He(e,t=!0){if(e==null)return[];if(N(e)){const r=[];for(const a of e){const s=_(a);(t||s!=="")&&r.push(s)}return r}if(w(e)){const r=[];for(let a=0;a<e.length();a++){const s=_(e.get(a));(t||s!=="")&&r.push(s)}return r}if(O(e)){const r=_(e);if(t||r!=="")return[r]}return[]}let be=0;function Ue(e){return be++,be%100==0?(be=0,new Promise(t=>{setTimeout(()=>{t(e)},0)})):e}function $e(e,t,r){switch(r){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function x(e,t=null){return e==null?null:p(e)||b(e)||y(e)?e:e instanceof k?t?.keepGeometryType===!0?e:e.toJSON():e instanceof C?e.toArray().map(r=>x(r,t)):Array.isArray(e)?e.map(r=>x(r,t)):G(e)?e:l(e)?e.toJSDate():h(e)?e.toString():f(e)?e.toJSDate():e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}async function wt(e,t,r,a,s){const i=await ge(e,t,r);s[a]=i}async function ge(e,t=null,r=null){if(e instanceof C&&(e=e.toArray()),e==null)return null;if(O(e)||e instanceof k||G(e)||l(e))return x(e,r);if(Array.isArray(e)){const a=[],s=[];for(const i of e)i===null||O(i)||i instanceof k||G(i)||l(i)?s.push(x(i,r)):(s.push(null),a.push(wt(i,t,r,s.length-1,s)));return a.length>0&&await Promise.all(a),s}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,r):null}function z(e){return Se(e)?e.parent:e}function Se(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.support.SubtypeSublayer"}function Tt(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.SubtypeGroupLayer"}function We(e,t,r){const a=z(e.fullSchema());return a===null||!a.fields?null:Y(t,a,e,r)}function Be(e){const t=z(e.fullSchema());return t===null?null:t.fields?t.subtypeField?{subtypeField:t.subtypeField,subtypes:t.subtypes?t.subtypes.map(r=>({name:r.name,code:r.code})):[]}:t.typeIdField?{subtypeField:t.typeIdField,subtypes:t.types?t.types.map(r=>({name:r.name,code:r.id})):[]}:null:null}function Ke(e,t,r,a){const s=z(e.fullSchema());if(s===null||!s.fields)return null;const i=Y(t,s,e,a);if(r===void 0)try{r=e.field(t)}catch{return null}return me(i,r)}function Qe(e,t,r,a){const s=z(e.fullSchema());if(s===null||!s.fields)return null;if(r===void 0){try{r=e.field(t)}catch{return null}return r}return ye(Y(t,s,e,a),r)}function Xe(e){return e?.timeZone??"system"}function et(e){const t=z(e.fullSchema());if(t===null||!t.fields)return null;const r=[];for(const a of t.fields)r.push(pt(a));return{objectIdField:t.objectIdField,globalIdField:t.globalIdField??"",geometryType:_e[t.geometryType]===void 0?"":_e[t.geometryType],fields:r}}function tt(e,t){const r=D.systemTimeZoneCanonicalName;return e==="system"&&(e=r),{version:rt,engineVersion:dt,timeZone:e,userTimeZone:r,spatialReference:t instanceof mt?t.toJSON():t,application:ht.applicationName??"",engine:"web",locale:we()}}const rt="1.34",_t=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:ke,ReturnResult:Ce,absRound:Me,arcadeVersion:rt,autoCastArrayOfPointsToMultiPoint:Ee,autoCastArrayOfPointsToPolygon:Ve,autoCastArrayOfPointsToPolyline:qe,autoCastFeatureToGeometry:Ge,binaryOperator:$e,breakResult:xe,castAsJson:x,castAsJsonAsync:ge,castRecordToText:de,continueResult:Ae,defaultExecutingContext:tt,defaultTimeZone:Xe,defaultUndefined:De,equalityTest:he,featureDomainCodeLookup:Qe,featureDomainValueLookup:Ke,featureFullDomain:We,featureSchema:et,featureSubtypes:Be,fixNullGeometry:Ye,fixSpatialReference:je,formatDate:K,formatNumber:ce,getDomain:Y,getDomainCode:ye,getDomainValue:me,getType:Fe,greaterThanLessThan:Re,isArray:N,isBoolean:p,isDate:l,isDateOnly:f,isDictionary:$,isDictionaryLike:Oe,isEmpty:Je,isFeature:I,isFeatureSet:U,isFeatureSetCollection:W,isFunctionParameter:F,isGeometry:L,isGraphic:ct,isImmutableArray:w,isInteger:lt,isJsDate:G,isKnowledgeGraph:B,isModule:oe,isNumber:b,isObject:le,isPixel:H,isSimpleType:O,isString:y,isSubtypeGrouplayer:Tt,isSubtypeSublayer:Se,isTime:h,isVoid:ue,isVoxel:E,multiReplace:R,parseGeometryFromJson:Zt,pcCheck:ve,stableStringify:pe,standardiseDateFormat:fe,tick:Ue,toBoolean:Le,toDate:Pe,toNumber:d,toNumberArray:Ie,toString:_,toStringArray:He,toStringExplicit:j,voidOperation:g},Symbol.toStringTag,{value:"Module"}));function Ct(e){st=e}let st;function X(e){return e===null?null:l(e)?e.clone():O(e)?e:L(e)?e.clone():w(e)?e.toArray().map(t=>X(t)):N(e)?e.map(t=>X(t)):I(e)?st.createFromArcadeFeature(e):W(e)||U(e)?e:$(e)||e?.declaredClass==="esri.arcade.Attachment"?e.deepClone():(e?.declaredClass==="esri.arcade.Portal"||B(e)||e instanceof V||F(e),e)}function ee(e,t,r=!1,a=!1){if(e==null)return null;if(b(e)||p(e)||y(e)||l(e)||f(e)||h(e))return e;if(N(e)){const i=[];for(const n of e)i.push(ee(n,t,r,a));return i}if(a&&L(e))return e;const s=new A;s.immutable=!1;for(const[i,n]of Object.entries(e))n!==void 0&&s.setField(i,ee(n,t,r,a));return s.immutable=r,s}class A{constructor(t){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,t instanceof A?this.attributes=t.attributes:t==null?this.attributes=Object.create(null):Object.getPrototypeOf(t)!=null?this.attributes={__proto__:null,...t}:this.attributes=t}static containerEntry(t,r){return new A({__proto__:null,key:t,value:r})}static textFormatting(){const t=new A({__proto__:null,newline:`
`,tab:"	",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});return t.immutable=!1,t}field(t){const r=t.toLowerCase(),a=this.attributes[t];if(a!==void 0)return a;for(const s in this.attributes)if(s.toLowerCase()===r)return this.attributes[s];throw new Z(null,"FieldNotFound",null,{key:t})}setField(t,r){if(this.immutable)throw new Z(null,"Immutable",null);if(F(r))throw new Z(null,"NoFunctionInDictionary",null);const a=t.toLowerCase();if(r instanceof Date&&(r=D.dateJSToArcadeDate(r)),this.attributes[t]===void 0){for(const s in this.attributes)if(s.toLowerCase()===a)return void(this.attributes[s]=r);this.attributes[t]=r}else this.attributes[t]=r}eraseField(t){if(this.immutable)throw new Z(null,"Immutable",null);if(t in this.attributes)return void delete this.attributes[t];const r=t.toLowerCase();for(const a in this.attributes)if(a.toLowerCase()===r)return void delete this.attributes[a]}hasField(t){const r=t.toLowerCase();if(this.attributes[t]!==void 0)return!0;for(const a in this.attributes)if(a.toLowerCase()===r)return!0;return!1}keys(){let t=[];for(const r in this.attributes)t.push(r);return t=t.sort(),t}values(){return this.keys().map(t=>this.attributes[t])}entryCount(){return Object.keys(this.attributes).length}isEmpty(){return this.entryCount()<=0}castToText(t=!1){return de(this.attributes,{useNumbersForDates:t})}static convertObjectToArcadeDictionary(t,r,a=!0,s=!1){const i=new A;i.immutable=!1;for(const n in t){const u=t[n];u!==void 0&&i.setField(n.toString(),ee(u,r,a,s))}return i.immutable=a,i}static convertJsonToArcade(t,r,a=!1,s=!1){return ee(t,r,a,s)}castAsJson(t=null){const r=Object.create(null);for(let a in this.attributes){const s=this.attributes[a];s!==void 0&&(t?.keyTranslate&&(a=t.keyTranslate(a)),r[a]=x(s,t))}return r}async castDictionaryValueAsJsonAsync(t,r,a,s=null,i){const n=await ge(a,s,i);return t[r]=n,n}async castAsJsonAsync(t=null,r=null){const a=Object.create(null),s=[];for(let i in this.attributes){const n=this.attributes[i];r?.keyTranslate&&(i=r.keyTranslate(i)),n!==void 0&&(O(n)||n instanceof k||n instanceof D?a[i]=x(n,r):s.push(this.castDictionaryValueAsJsonAsync(a,i,n,t,r)))}return s.length>0&&await Promise.all(s),a}deepClone(){const t=new A;t.immutable=!1;for(const r of this.keys())t.setField(r,X(this.field(r)));return t}}export{Ke as $,de as A,U as B,Y as C,Ct as D,je as E,Ve as F,x as G,I as H,Ae as I,Ge as J,$ as K,F as L,qe as M,Ee as N,ye as O,g as P,Oe as Q,Ce as R,d as S,Le as T,L as U,O as V,Be as W,W as X,He as Y,Pe as Z,xe as _,$e as a,R as a0,Ue as a1,Se as a2,M as a3,te as a4,X as a5,Fe as a6,fe as a7,Me as a8,Ye as a9,E as aa,H as ab,Ie as ac,tt as ad,_t as ae,q as b,Xe as c,Re as d,St as e,We as f,_ as g,Qe as h,j as i,et as j,B as k,l,f as m,ne as n,ve as o,A as p,ue as q,J as r,V as s,w as t,Je as u,ke as v,h as w,me as x,he as y,De as z};
