const u=Symbol("meshContext");function f(t){return t&&typeof t=="object"&&u in t?t[u]:void 0}function y(t,n){const r=f(t);return{...t,[u]:{...r,...n}}}const c=Symbol("meshMaterialContext");function l(t){return t&&typeof t=="object"&&c in t?t[c]:void 0}function d(t){if(l(t)?.materialMap)return t;const n={materialMap:new Map};return{...t,[c]:n}}const i=Symbol("meshTextureContext");function p(t){return t&&typeof t=="object"&&i in t?t[i]:void 0}function x(t){if(p(t)?.textureMap)return t;const n={textureMap:new Map};return{...t,[i]:n}}function s(t,n,r,a){const{loggerTag:o,stride:e}=n;return t.length%e!==0?(a.error(o,`Invalid array length, expected a multiple of ${e}`),new r([])):t}function g(t,n,r,a,o){if(!t)return t;if(t instanceof n)return s(t,a,n,o);for(const e of r)if(t instanceof e)return s(new n(t),a,n,o);if(Array.isArray(t))return s(new n(t),a,n,o);{const e=r.map(m=>`'${m.name}'`);return o.error(`Failed to set property, expected one of ${e}, but got ${t.constructor.name}`),new n([])}}function b(t,n,r){n[r]=h(t)}function h(t){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r];return n}export{l as a,x as b,d as c,f as d,y as e,g as n,b as r,p as u};
