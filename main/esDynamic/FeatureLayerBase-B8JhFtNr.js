import{v as e,x as i,z as p,B as j,bn as D,ju as Re,cc as te,I as l,H as u,lf as pt,h as N,lg as lt,fd as at,iI as De,br as ut,fe as Ne,hM as Ue,lh as Ve,li as dt,lj as yt,bY as ct,V as ke,J as Ae,g7 as mt,i as ht,g8 as vt,c5 as _,df as ie,en as ft,cw as Be,lk as xt,ll as wt}from"./main-CnDVnExo.js";import{a as Ce,t as gt}from"./Field-aY1vu-yl.js";import{a as bt}from"./layerContainerType-ChWdCT09.js";import{m as jt}from"./HeightModelInfo-BI9C0K3R.js";import{m as It,v as Et,j as St,y as Ft}from"./OperationalLayer-A4hDIwth.js";import{a as oe}from"./timeZoneUtils-D6KRGgVc.js";import{j as Mt,X as Le,r as Ot,i as se,M as Tt,k as Rt,z as Dt}from"./labelingInfo-CSbKYIkt.js";import{i as Nt}from"./LayerFloorInfo-Cg6w4s-r.js";import{n as Ut}from"./Relationship-DJ68ngDr.js";import{c as Vt}from"./serviceCapabilitiesUtils-myeIkINl.js";import{s as kt,E as At}from"./portalItemUtils-ftIZhwiO.js";var ne;let T=ne=class extends j{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new ne({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e([i({type:String,json:{write:!0}})],T.prototype,"expression",void 0),e([i({type:String,json:{write:!0}})],T.prototype,"name",void 0),e([i({type:["boolean","date","number","string"],json:{write:!0}})],T.prototype,"returnType",void 0),e([i({type:String,json:{write:!0}})],T.prototype,"title",void 0),T=ne=e([p("esri.form.ExpressionInfo")],T);const Bt=T;let R=class extends j{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e([i({type:String,json:{write:!0}})],R.prototype,"description",void 0),e([i({type:String,json:{write:!0}})],R.prototype,"label",void 0),e([i()],R.prototype,"type",void 0),e([i({type:String,json:{write:!0}})],R.prototype,"visibilityExpression",void 0),R=e([p("esri.form.elements.Element")],R);const M=R;let Z=class extends D.ClonableMixin(j){constructor(t){super(t),this.type=null}};e([i()],Z.prototype,"type",void 0),Z=e([p("esri.form.elements.inputs.attachments.Input")],Z);const O=Z,J=["any","capture","upload"];let U=class extends O{constructor(t){super(t),this.type="audio",this.inputMethod="any",this.maxDuration=null}};e([i({type:["audio"],readOnly:!0,json:{write:!0}})],U.prototype,"type",void 0),e([i({type:J,json:{write:!0}})],U.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],U.prototype,"maxDuration",void 0),U=e([p("esri.form.elements.inputs.attachments.AudioInput")],U);const He=U;let G=class extends O{constructor(t){super(t),this.type="document",this.maxFileSize=null}};e([i({type:["document"],readOnly:!0,json:{write:!0}})],G.prototype,"type",void 0),e([i({type:Number,json:{write:!0}})],G.prototype,"maxFileSize",void 0),G=e([p("esri.form.elements.inputs.attachments.DocumentInput")],G);const qe=G;let V=class extends O{constructor(t){super(t),this.type="image",this.inputMethod="any",this.maxImageSize=null}};e([i({type:["image"],readOnly:!0,json:{write:!0}})],V.prototype,"type",void 0),e([i({type:J,json:{write:!0}})],V.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],V.prototype,"maxImageSize",void 0),V=e([p("esri.form.elements.inputs.attachments.ImageInput")],V);const Ge=V;let P=class extends O{constructor(t){super(t),this.type="signature",this.inputMethod="any"}};e([i({type:["signature"],readOnly:!0,json:{write:!0}})],P.prototype,"type",void 0),e([i({type:J,json:{write:!0}})],P.prototype,"inputMethod",void 0),P=e([p("esri.form.elements.inputs.attachments.SignatureInput")],P);const Pe=P;let k=class extends O{constructor(t){super(t),this.type="video",this.inputMethod="any",this.maxDuration=null}};e([i({type:["video"],readOnly:!0,json:{write:!0}})],k.prototype,"type",void 0),e([i({type:J,json:{write:!0}})],k.prototype,"inputMethod",void 0),e([i({type:Number,json:{write:!0}})],k.prototype,"maxDuration",void 0),k=e([p("esri.form.elements.inputs.attachments.VideoInput")],k);const ze=k;function Qe(t){return{nestableTypes:{base:O,key:"type",typeMap:{audio:He,document:qe,image:Ge,signature:Pe,video:ze}},allTypes:{base:O,key:"type",typeMap:{attachment:t,audio:He,document:qe,image:Ge,signature:Pe,video:ze}}}}function Ct(t,o,n){return t?t.map(s=>Re(o.nestableTypes,s)):null}function Lt(t,o,n){if(!t)return null;const s=o.nestableTypes.typeMap;return t.filter(r=>s[r.type]).map(r=>s[r.type].fromJSON(r))}function Ht(t,o,n){if(!t)return null;const s=o.nestableTypes.typeMap;return t.filter(r=>s[r.type]).map(r=>r.toJSON())}let x=class extends O{constructor(t){super(t),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(t){return Ct(t,re)}readInputs(t,o){return Lt(o.inputTypes,re)}writeInputs(t,o){o.inputTypes=Ht(t,re)}};e([i({type:["attachment"],readOnly:!0,json:{write:!0}})],x.prototype,"type",void 0),e([i({type:["any","exact","exactOrNone"],json:{write:!0}})],x.prototype,"attachmentAssociationType",void 0),e([i({json:{write:{isRequired:!0}}})],x.prototype,"inputTypes",void 0),e([te("inputTypes")],x.prototype,"castInputs",null),e([l("inputTypes")],x.prototype,"readInputs",null),e([u("inputTypes")],x.prototype,"writeInputs",null),x=e([p("esri.form.elements.inputs.attachments.AttachmentInput")],x);const re=Qe(x),qt=x;var pe;const Gt=Qe(qt);let y=pe=class extends M{constructor(t){super(t),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new pe({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};e([i({type:Boolean,json:{write:!0}})],y.prototype,"allowUserRename",void 0),e([i({type:String,json:{write:{isRequired:!0}}})],y.prototype,"attachmentKeyword",void 0),e([i({type:Boolean,json:{write:!0}})],y.prototype,"displayFilename",void 0),e([i({type:String,json:{write:!0}})],y.prototype,"editableExpression",void 0),e([i({type:String,json:{write:!0}})],y.prototype,"filenameExpression",void 0),e([i({types:Gt.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],y.prototype,"input",void 0),e([i({type:Number,json:{write:!0}})],y.prototype,"maxAttachmentCount",void 0),e([i({type:Number,json:{write:!0}})],y.prototype,"minAttachmentCount",void 0),e([i({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],y.prototype,"type",void 0),e([i({type:Boolean,json:{write:!0}})],y.prototype,"useOriginalFilename",void 0),y=pe=e([p("esri.form.elements.AttachmentElement")],y);const We=y;let K=class extends j{constructor(t){super(t),this.type=null}};e([i()],K.prototype,"type",void 0),K=e([p("esri.form.elements.inputs.Input")],K);const I=K;let z=class extends I{constructor(t){super(t),this.maxLength=null,this.minLength=0}};e([i({type:Number,json:{write:!0}})],z.prototype,"maxLength",void 0),e([i({type:Number,json:{write:!0}})],z.prototype,"minLength",void 0),z=e([p("esri.form.elements.inputs.TextInput")],z);const le=z;var ae;let X=ae=class extends le{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new ae({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["barcode-scanner"],json:{read:!1,write:!0}})],X.prototype,"type",void 0),X=ae=e([p("esri.form.elements.inputs.BarcodeScannerInput")],X);const Pt=X;var ue;let A=ue=class extends I{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new ue({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e([i({type:String,json:{write:!0}})],A.prototype,"noValueOptionLabel",void 0),e([i({type:Boolean,json:{write:!0}})],A.prototype,"showNoValueOption",void 0),e([i({type:["combo-box"],json:{read:!1,write:!0}})],A.prototype,"type",void 0),A=ue=e([p("esri.form.elements.inputs.ComboBoxInput")],A);const zt=A;var de;function _e(t){return t??null}function Ze(t){return t??null}let w=de=class extends I{constructor(t){super(t),this.max=null,this.min=null,this.type="date-picker"}readMax(t,o){return _e(o.max)}writeMax(t,o){o.max=Ze(t)}readMin(t,o){return _e(o.min)}writeMin(t,o){o.min=Ze(t)}clone(){return new de({max:this.max,min:this.min})}};e([i({type:String,json:{type:String,write:!0}})],w.prototype,"max",void 0),e([l("max")],w.prototype,"readMax",null),e([u("max")],w.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],w.prototype,"min",void 0),e([l("min")],w.prototype,"readMin",null),e([u("min")],w.prototype,"writeMin",null),e([i({type:["date-picker"],json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=de=e([p("esri.form.elements.inputs.DatePickerInput")],w);const Qt=w;var ye;function ce(t){return t??null}function me(t){return t??null}let d=ye=class extends I{constructor(t){super(t),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(t,o){return ce(o.max)}writeMax(t,o){o.max=me(t)}readMin(t,o){return ce(o.min)}writeMin(t,o){o.min=me(t)}readTimeResolution(t,o){return ce(o.timeResolution)}writeTimeResolution(t,o){o.timeResolution=me(t)}clone(){return new ye({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([i({type:Boolean,json:{write:!0}})],d.prototype,"includeTimeOffset",void 0),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"max",void 0),e([l("max")],d.prototype,"readMax",null),e([u("max")],d.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"min",void 0),e([l("min")],d.prototype,"readMin",null),e([u("min")],d.prototype,"writeMin",null),e([i({type:String,json:{type:String,write:!0}})],d.prototype,"timeResolution",void 0),e([l("timeResolution")],d.prototype,"readTimeResolution",null),e([u("timeResolution")],d.prototype,"writeTimeResolution",null),e([i({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],d.prototype,"type",void 0),d=ye=e([p("esri.form.elements.inputs.DateTimeOffsetPickerInput")],d);const Wt=d;var he;function Je(t){return t!=null?new Date(t):null}function Ke(t){return t?t.getTime():null}let h=he=class extends I{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,o){return Je(o.max)}writeMax(t,o){o.max=Ke(t)}readMin(t,o){return Je(o.min)}writeMin(t,o){o.min=Ke(t)}clone(){return new he({includeTime:this.includeTime,max:this.max,min:this.min})}};e([i({type:Boolean,json:{write:!0}})],h.prototype,"includeTime",void 0),e([i({type:Date,json:{type:Number,write:!0}})],h.prototype,"max",void 0),e([l("max")],h.prototype,"readMax",null),e([u("max")],h.prototype,"writeMax",null),e([i({type:Date,json:{type:Number,write:!0}})],h.prototype,"min",void 0),e([l("min")],h.prototype,"readMin",null),e([u("min")],h.prototype,"writeMin",null),e([i({type:["datetime-picker"],json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=he=e([p("esri.form.elements.inputs.DateTimePickerInput")],h);const _t=h;var ve;let B=ve=class extends I{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new ve({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e([i({type:String,json:{write:!0}})],B.prototype,"noValueOptionLabel",void 0),e([i({type:Boolean,json:{write:!0}})],B.prototype,"showNoValueOption",void 0),e([i({type:["radio-buttons"],json:{read:!1,write:!0}})],B.prototype,"type",void 0),B=ve=e([p("esri.form.elements.inputs.RadioButtonsInput")],B);const Zt=B;var fe;let C=fe=class extends I{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new fe({offValue:this.offValue,onValue:this.onValue})}};e([i({type:[String,Number],json:{write:!0}})],C.prototype,"offValue",void 0),e([i({type:[String,Number],json:{write:!0}})],C.prototype,"onValue",void 0),e([i({type:["switch"],json:{read:!1,write:!0}})],C.prototype,"type",void 0),C=fe=e([p("esri.form.elements.inputs.SwitchInput")],C);const Jt=C;var xe;let Y=xe=class extends le{constructor(t){super(t),this.type="text-area"}clone(){return new xe({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["text-area"],json:{read:!1,write:!0}})],Y.prototype,"type",void 0),Y=xe=e([p("esri.form.elements.inputs.TextAreaInput")],Y);const Kt=Y;var we;let $=we=class extends le{constructor(t){super(t),this.type="text-box"}clone(){return new we({maxLength:this.maxLength,minLength:this.minLength})}};e([i({type:["text-box"],json:{read:!1,write:!0}})],$.prototype,"type",void 0),$=we=e([p("esri.form.elements.inputs.TextBoxInput")],$);const Xt=$;var ge;function be(t){return t??null}function je(t){return t??null}let c=ge=class extends I{constructor(t){super(t),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(t,o){return be(o.max)}writeMax(t,o){o.max=je(t)}readMin(t,o){return be(o.min)}writeMin(t,o){o.min=je(t)}readTimeResolution(t,o){return be(o.timeResolution)}writeTimeResolution(t,o){o.timeResolution=je(t)}clone(){return new ge({max:this.max,min:this.min,timeResolution:this.timeResolution})}};e([i({type:String,json:{type:String,write:!0}})],c.prototype,"max",void 0),e([l("max")],c.prototype,"readMax",null),e([u("max")],c.prototype,"writeMax",null),e([i({type:String,json:{type:String,write:!0}})],c.prototype,"min",void 0),e([l("min")],c.prototype,"readMin",null),e([u("min")],c.prototype,"writeMin",null),e([i({type:String,json:{type:String,write:!0}})],c.prototype,"timeResolution",void 0),e([l("timeResolution")],c.prototype,"readTimeResolution",null),e([u("timeResolution")],c.prototype,"writeTimeResolution",null),e([i({type:["time-picker"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=ge=e([p("esri.form.elements.inputs.TimePickerInput")],c);const Yt=c,$t={base:I,key:"type",typeMap:{"barcode-scanner":Pt,"combo-box":zt,"date-picker":Qt,"datetime-picker":_t,"datetimeoffset-picker":Wt,"radio-buttons":Zt,switch:Jt,"text-area":Kt,"text-box":Xt,"time-picker":Yt}};var Ie;let m=Ie=class extends M{constructor(t){super(t),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Ie({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e([i({types:gt,json:{read:{reader:Ce},write:!0}})],m.prototype,"domain",void 0),e([i({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0),e([i({type:String,json:{write:!0}})],m.prototype,"editableExpression",void 0),e([i({type:String,json:{write:!0}})],m.prototype,"fieldName",void 0),e([i({type:String,json:{write:!0}})],m.prototype,"hint",void 0),e([i({types:$t,json:{read:{source:"inputType"},write:{target:"inputType"}}})],m.prototype,"input",void 0),e([i({type:String,json:{write:!0}})],m.prototype,"requiredExpression",void 0),e([i({type:String,json:{read:!1,write:!0}})],m.prototype,"type",void 0),e([i({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0),m=Ie=e([p("esri.form.elements.FieldElement")],m);const Xe=m;var Ee;let E=Ee=class extends M{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Ee({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:N(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e([i({type:Number,json:{write:!0}})],E.prototype,"displayCount",void 0),e([i({type:["list"],json:{write:!0}})],E.prototype,"displayType",void 0),e([i({type:String,json:{write:!0}})],E.prototype,"editableExpression",void 0),e([i({type:[pt],json:{write:!0}})],E.prototype,"orderByFields",void 0),e([i({type:Number,json:{write:!0}})],E.prototype,"relationshipId",void 0),e([i({type:["relationship"],json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=Ee=e([p("esri.form.elements.RelationshipElement")],E);const Ye=E;var Se;let L=Se=class extends M{constructor(t){super(t),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Se({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};e([i({type:String,json:{write:!0}})],L.prototype,"text",void 0),e([i({type:String,json:{write:!0}})],L.prototype,"textFormat",void 0),e([i({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=Se=e([p("esri.form.elements.TextElement")],L);const $e=L;let H=class extends D.ClonableMixin(M){constructor(t){super(t),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};e([i({type:[lt],json:{write:{isRequired:!0}}})],H.prototype,"associationTypes",void 0),e([i({type:String,json:{write:!0}})],H.prototype,"editableExpression",void 0),e([i({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],H.prototype,"type",void 0),H=e([p("esri.form.elements.UtilityNetworkAssociationsElement")],H);const et=H,ei=t=>t.type==="field",ti=t=>t.type==="group",ii=t=>t.type==="text";function tt(t){return{typesWithGroup:{base:M,key:"type",typeMap:{attachment:We,field:Xe,group:t,relationship:Ye,text:$e,utilityNetworkAssociations:et}},typesWithoutGroup:{base:M,key:"type",typeMap:{attachment:We,field:Xe,relationship:Ye,text:$e,utilityNetworkAssociations:et}}}}function it(t,o,n=!0){if(!t)return null;const s=n?o.typesWithGroup.typeMap:o.typesWithoutGroup.typeMap;return t.filter(r=>s[r.type]).map(r=>s[r.type].fromJSON(r))}function ot(t,o,n=!0){if(!t)return null;const s=n?o.typesWithGroup.typeMap:o.typesWithoutGroup.typeMap;return t.filter(r=>s[r.type]).map(r=>r.toJSON())}function st(t,o,n=!0){return t?t.map(s=>Re(n?o.typesWithGroup:o.typesWithoutGroup,s)):null}var Fe;let g=Fe=class extends M{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return st(t,Me,!1)}readElements(t,o){return it(o.formElements,Me,!1)}writeElements(t,o){o.formElements=ot(t,Me,!1)}clone(){return new Fe({description:this.description,elements:N(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e([i({json:{write:!0}})],g.prototype,"elements",void 0),e([te("elements")],g.prototype,"castElements",null),e([l("elements",["formElements"])],g.prototype,"readElements",null),e([u("elements")],g.prototype,"writeElements",null),e([i({type:["collapsed","expanded"],json:{write:!0}})],g.prototype,"initialState",void 0),e([i({type:String,json:{read:!1,write:!0}})],g.prototype,"type",void 0),g=Fe=e([p("esri.form.elements.GroupElement")],g);const Me=tt(g),oi=g;var Oe;const Te=tt(oi);let v=Oe=class extends j{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return st(t,Te)}readElements(t,o){return it(o.formElements,Te)}writeElements(t,o){o.formElements=ot(t,Te)}clone(){return new Oe({description:this.description,expressionInfos:N(this.expressionInfos),elements:N(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(t,o){const n=new Set,{description:s,elements:r,expressionInfos:a,title:f}=this;if(Q(n,t,s),Q(n,t,f),!r)return[];const W=si(r,a).map(ee=>at(n,t,ee));await Promise.all(W);for(const ee of r)nt(n,{fieldsIndex:t,relationships:o},ee);return Array.from(n).sort()}};function nt(t,o,n){const{fieldsIndex:s}=o;if(!s||s.fields.length!==t.size)switch(Q(t,s,n.label),Q(t,s,n.description),n.type){case"field":Ne(t,s,n.fieldName);break;case"group":n.elements.forEach(r=>nt(t,o,r));break;case"relationship":if(o.relationships){const r=o.relationships.find(a=>a.id===n.relationshipId);r&&Ne(t,s,r.keyField)}De(t,s,n.orderByFields?.map(r=>r.field));break;case"text":Q(t,s,n.text)}}function si(t,o){if(!o||o.length===0)return[];const n=rt(t),s=[];for(const r of o)n.has(r.name)&&s.push(r.expression);return s}function rt(t){const o=new Set;for(const n of t)if(Ue(o,n.visibilityExpression),!ii(n)){if(ti(n))Ve(o,rt(n.elements));else if(Ue(o,n.editableExpression),ei(n)){const{requiredExpression:s,valueExpression:r}=n;Ve(o,[s,r])}}return o}function Q(t,o,n){De(t,o,ut(n))}e([i({type:String,json:{write:!0}})],v.prototype,"description",void 0),e([i({json:{write:!0}})],v.prototype,"elements",void 0),e([te("elements")],v.prototype,"castElements",null),e([l("elements",["formElements"])],v.prototype,"readElements",null),e([u("elements")],v.prototype,"writeElements",null),e([i({type:[Bt],json:{write:!0}})],v.prototype,"expressionInfos",void 0),e([i({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"preserveFieldValuesWhenHidden",void 0),e([i({type:String,json:{write:!0}})],v.prototype,"title",void 0),v=Oe=e([p("esri.form.FormTemplate")],v);const ni=v;let S=class extends D.ClonableMixin(j){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([i()],S.prototype,"creatorField",void 0),e([i()],S.prototype,"creationDateField",void 0),e([i()],S.prototype,"editorField",void 0),e([i()],S.prototype,"editDateField",void 0),e([i()],S.prototype,"realm",void 0),e([i(oe("dateFieldsTimeReference",!0))],S.prototype,"timeZone",void 0),S=e([p("esri.layers.support.EditFieldsInfo")],S);let b=class extends D.ClonableMixin(j){constructor(t){super(t)}};e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"name",void 0),e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"fields",void 0),e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"isAscending",void 0),e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"indexType",void 0),e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"isUnique",void 0),e([i({constructOnly:!0,json:{write:!0}})],b.prototype,"description",void 0),b=e([p("esri.layers.support.FeatureIndex")],b);let q=class extends D.ClonableMixin(j){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([i({type:String,json:{read:{source:"shapeAreaFieldName"}}})],q.prototype,"shapeAreaField",void 0),e([i({type:String,json:{read:{source:"shapeLengthFieldName"}}})],q.prototype,"shapeLengthField",void 0),e([i({type:String,json:{read:t=>dt.read(t)||yt.read(t)}})],q.prototype,"units",void 0),q=e([p("esri.layers.support.GeometryFieldsInfo")],q);let F=class extends D.ClonableMixin(j){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const o={};for(const n of Object.keys(t))o[n]=Ce(t[n]);return o}writeDomains(t,o){if(!t)return;const n={};for(const s of Object.keys(t))t[s]&&(n[s]=t[s]?.toJSON());o.domains=n}};e([i({type:Number,json:{write:!0}})],F.prototype,"code",void 0),e([i({type:Object,json:{write:!0}})],F.prototype,"defaultValues",void 0),e([i({json:{write:!0}})],F.prototype,"domains",void 0),e([l("domains")],F.prototype,"readDomains",null),e([u("domains")],F.prototype,"writeDomains",null),e([i({type:String,json:{write:!0}})],F.prototype,"name",void 0),F=e([p("esri.layers.support.Subtype")],F);const ri=t=>{let o=class extends t{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(ke.ofType(b)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Ae.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.uniqueIdFields=null,this.version=void 0,this._isUrlHostModified=!1,this._isUrlHostModificationEnabled=!1}getFieldDomain(){throw new Error("Not implemented")}getField(n){return this.fieldsIndex.get(n)}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:n}=this;if(n){const{query:r,operations:a,editing:f}=n;if(!r.supportsQueryByOthers||!r.supportsQueryByAnonymous||a.supportsEditing&&!(f.supportsUpdateByOthers&&f.supportsUpdateByAnonymous&&f.supportsDeleteByOthers&&f.supportsDeleteByAnonymous))return"load"}if(Le(this.serviceDefinitionExpression)||Le(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(Ot(this))return"load";if(this.hasUpdateItemRestrictions)return n.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const s=this.editFieldsInfo;return(s?.creatorField||s?.editorField)&&n?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(n,s){return Vt(s,this.url)}readEditingInfo(n,s){const{editingInfo:r}=s;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}get effectiveCapabilities(){const n=this.capabilities;if(!n)return null;const s=N(n),{operations:r,editing:a}=s;return se(this)?(this.userHasUpdateItemPrivileges&&(r.supportsQuery=!0),s):this.userHasUpdateItemPrivileges?(r.supportsAdd=r.supportsDelete=r.supportsEditing=r.supportsQuery=r.supportsUpdate=a.supportsDeleteByOthers=a.supportsGeometryUpdate=a.supportsUpdateByOthers=!0,s):(this.userHasFullEditingPrivileges&&r.supportsEditing&&(r.supportsAdd=r.supportsDelete=r.supportsUpdate=a.supportsGeometryUpdate=!0),s)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(n,s){return Tt(s)}get hasFullEditingRestrictions(){const n=this.capabilities;if(!n||se(this))return!1;const{operations:s,editing:r}=n;return s.supportsEditing&&!(s.supportsAdd&&s.supportsDelete&&s.supportsUpdate&&r.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const n=this.capabilities;if(!n)return!1;const{operations:s,editing:r}=n;return se(this)?!s.supportsQuery:!(s.supportsAdd&&s.supportsDelete&&s.supportsEditing&&s.supportsQuery&&s.supportsUpdate&&r.supportsDeleteByOthers&&r.supportsGeometryUpdate&&r.supportsUpdateByOthers)}readIsTableFromService(n,s){return s.type==="Table"}readMaxScale(n,s){return s.effectiveMaxScale||n||0}readMinScale(n,s){return s.effectiveMinScale||n||0}readObjectIdFieldFromService(n,s){return Rt(s)}readServiceDefinitionExpression(n,s){return s.definitionQuery||s.definitionExpression}readUniqueIdFields(n,s){return s.uniqueIdInfo?.OIDFieldContainsHashValue?s.uniqueIdInfo.fields:null}set url(n){if(n==null)return void this._set("url",n);const s=mt({layer:this,url:n,nonStandardUrlAllowed:!0,logger:ht.getLogger(this)});this._set("url",s.url),s.layerId!=null&&this._set("layerId",s.layerId)}writeUrl(n,s,r,a){vt(this,n,null,s,a)}readVersion(n,s){return Dt(s)}get isUrlHostModified(){const{loaded:n,url:s,_isUrlHostModified:r}=this;if(r)return!0;if(!n||!s||this.originIdOf("url")<_.USER)return!1;const a=this.sourceJSON?.preferredHost;if(!a||!ie(s,`https://${a}`,!0))return!1;for(let f=_.USER-1;f>=_.PORTAL_ITEM;f--){const W=this.getAtOrigin("url",ft(f));if(W)return!ie(s,W,!0)}return!1}applyPreferredHost(n){const{url:s,portalItem:r}=this;!s||Be(r)}applyHostFromPortalItem(){const{url:n,portalItem:s}=this;if(!n||this.originIdOf("url")===_.USER||!s?.url||!Be(s)||!kt(s,At.HOSTED_SERVICE)||ie(n,s.url,!0)||!this._isUrlHostModificationEnabled)return;const r=xt(s.url);this._set("url",wt(n,r)),this._isUrlHostModified=!0}};return e([i({readOnly:!0})],o.prototype,"authenticationTriggerEvent",null),e([i({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],o.prototype,"copyright",void 0),e([i({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],o.prototype,"capabilities",void 0),e([l("service","capabilities")],o.prototype,"readCapabilitiesFromService",null),e([i(oe("dateFieldsTimeReference"))],o.prototype,"dateFieldsTimeZone",void 0),e([i({type:Boolean})],o.prototype,"datesInUnknownTimezone",void 0),e([i({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],o.prototype,"definitionExpression",void 0),e([i({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],o.prototype,"displayField",void 0),e([i({readOnly:!0,type:S})],o.prototype,"editFieldsInfo",void 0),e([i({readOnly:!0})],o.prototype,"editingInfo",void 0),e([l("editingInfo")],o.prototype,"readEditingInfo",null),e([i({readOnly:!0})],o.prototype,"effectiveCapabilities",null),e([i()],o.prototype,"effectiveEditingEnabled",null),e([i((()=>{const n=N(It),s=n.json.origins;return s["web-map"]={read:!1,write:!1},s["portal-item"]={read:!1,write:!1},n})())],o.prototype,"elevationInfo",void 0),e([i()],o.prototype,"fieldsIndex",void 0),e([i({type:Nt,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:bt}}})],o.prototype,"floorInfo",void 0),e([i({type:ct,json:{origins:{service:{read:{source:"extent"}}}}})],o.prototype,"fullExtent",void 0),e([i()],o.prototype,"gdbVersion",void 0),e([i({readOnly:!0,type:q,json:{read:{source:"geometryProperties"}}})],o.prototype,"geometryFieldsInfo",void 0),e([i({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Mt.read}}}})],o.prototype,"geometryType",void 0),e([i({type:String})],o.prototype,"globalIdField",void 0),e([l("service","globalIdField",["globalIdField","fields"])],o.prototype,"readGlobalIdFieldFromService",null),e([i({readOnly:!0})],o.prototype,"hasFullEditingRestrictions",null),e([i({type:Boolean,json:{origins:{service:{read:!0}}}})],o.prototype,"hasM",void 0),e([i({readOnly:!0})],o.prototype,"hasUpdateItemRestrictions",null),e([i({type:Boolean,json:{origins:{service:{read:!0}}}})],o.prototype,"hasZ",void 0),e([i({readOnly:!0,type:jt})],o.prototype,"heightModelInfo",void 0),e([i({type:Date})],o.prototype,"historicMoment",void 0),e([i({type:ke.ofType(b),readOnly:!0})],o.prototype,"indexes",void 0),e([i({readOnly:!0})],o.prototype,"isTable",void 0),e([l("service","isTable",["type"])],o.prototype,"readIsTableFromService",null),e([i({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],o.prototype,"layerId",void 0),e([i(Et)],o.prototype,"maxScale",void 0),e([l("service","maxScale",["maxScale","effectiveMaxScale"])],o.prototype,"readMaxScale",null),e([i(St)],o.prototype,"minScale",void 0),e([l("service","minScale",["minScale","effectiveMinScale"])],o.prototype,"readMinScale",null),e([i({type:String})],o.prototype,"objectIdField",void 0),e([l("service","objectIdField",["objectIdField","fields"])],o.prototype,"readObjectIdFieldFromService",null),e([i(oe("preferredTimeReference"))],o.prototype,"preferredTimeZone",void 0),e([i({type:[Ut],readOnly:!0})],o.prototype,"relationships",void 0),e([i({type:Boolean})],o.prototype,"returnM",void 0),e([i({type:Boolean})],o.prototype,"returnZ",void 0),e([i({readOnly:!0,json:{write:!1}})],o.prototype,"serverGens",void 0),e([i({readOnly:!0})],o.prototype,"serviceDefinitionExpression",void 0),e([l("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],o.prototype,"readServiceDefinitionExpression",null),e([i({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],o.prototype,"serviceItemId",void 0),e([i()],o.prototype,"sourceJSON",void 0),e([i({type:Ae,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],o.prototype,"spatialReference",void 0),e([i({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],o.prototype,"subtypeField",void 0),e([i({type:[F],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],o.prototype,"subtypes",void 0),e([i({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],o.prototype,"trackIdField",void 0),e([i({type:[String],readOnly:!0})],o.prototype,"uniqueIdFields",void 0),e([l("service","uniqueIdFields",["uniqueIdInfo.OIDFieldContainsHashValue","uniqueIdInfo.fields"])],o.prototype,"readUniqueIdFields",null),e([i(Ft)],o.prototype,"url",null),e([u("url")],o.prototype,"writeUrl",null),e([i({json:{origins:{service:{read:!0}},read:!1}})],o.prototype,"version",void 0),e([l("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],o.prototype,"readVersion",null),e([i({readOnly:!0})],o.prototype,"isUrlHostModified",null),o=e([p("esri.layers.mixins.FeatureLayerBase")],o),o};export{ni as V,ri as k};
