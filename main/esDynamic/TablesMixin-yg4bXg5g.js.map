{"version":3,"file":"TablesMixin-yg4bXg5g.js","sources":["../../node_modules/@arcgis/core/support/collectionUtils.js","../../node_modules/@arcgis/core/support/LayersMixin.js","../../node_modules/@arcgis/core/support/TablesMixin.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../core/CollectionFlattener.js\";function t(t){return new e({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const t=[];return\"tables\"in e&&t.push(e.tables),\"layers\"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&\"tables\"in t&&t.tables.includes(e)}})}function n(e){for(const t of e.values())t?.destroy();e.clear()}export{t as createFlattenedTablesCollection,n as destroyMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../layers/Layer.js\";function d(e,r,t){let s,o;if(e)for(let a=0,i=e.length;a<i;a++){if(s=e.at(a),s?.[r]===t)return s;if(\"group\"===s?.type&&(o=d(s.layers,r,t),o))return o}}const l=l=>{let y=class extends l{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&\"remove\"in e.parent&&e.parent.remove(e)},o=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on(\"before-add\",(e=>{if(e.item===this)return e.preventDefault(),void s.getLogger(this).error(\"#add()\",\"Cannot add layer to itself.\");t(e.item)})),this.layers.on(\"after-add\",(e=>o(e.item))),this.layers.on(\"after-remove\",(e=>a(e.item)))])}destroy(){const e=this.layers.toArray();for(const r of e)r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof n){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):s.getLogger(this).error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;let s=t.getNextIndex(r);e.slice().forEach((e=>{e.parent!==this?(t.add(e,s),s+=1):this.reorder(e,s)}))}findLayerById(e){return d(this.layers,\"id\",e)}findLayerByUid(e){return d(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([a()],y.prototype,\"layers\",null),y=e([i(\"esri.support.LayersMixin\")],y),y};export{l as LayersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/Collection.js\";import{referenceSetter as r}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";const a=new Set([\"feature\",\"subtype-group\"]);function n(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.at(s);if(o[e]===r)return o;if(\"group\"===o?.type){const t=n(o.tables,e,r);if(t)return t}}}const l=l=>{let p=class extends l{constructor(...t){super(...t),this.tables=new e,this.addHandles([this.tables.on(\"after-add\",(t=>{const e=t.item;e.parent&&e.parent!==this&&\"tables\"in e.parent&&e.parent.tables.remove(e),e.parent=this,a.has(e.type)||s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on(\"after-remove\",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.toArray();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set(\"tables\",r(t,this._get(\"tables\")))}findTableById(t){return n(this.tables,\"id\",t)}findTableByUid(t){return n(this.tables,\"uid\",t)}};return t([o()],p.prototype,\"tables\",null),p=t([i(\"esri.support.TablesMixin\")],p),p};export{l as TablesMixin,a as allowedTableTypes};\n"],"names":["t","e","n","r","s","o","a","i","l","y","p"],"mappings":"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","x_google_ignoreList":[0,1,2]}