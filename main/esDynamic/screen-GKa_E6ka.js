import{fy as C,fz as U,fS as W,iC as I,fN as B,ar as E,fC as A,fR as M,fT as j,fK as c,e8 as s,e9 as l,fD as h,fG as T,ea as i,fU as O,fL as S,fJ as g,fI as k,fM as z,ip as D,iq as q,e7 as F,fE as G,fH as H,fV as K,fF as J,fW as N}from"./main-6gYsRPh_.js";import{k as R}from"./keyboard-O-FN7ZtD.js";const P={class:"mb-10"},Q=["aria-label"],X={key:0,class:"w-full h-30 hidden"},Y=["alt","src"],Z=["alt","src"],$=["alt"],ee={class:"pl-5"},ae={class:"ml-auto pr-5"},le=["content"],se={key:0,class:"rv-basemap-check absolute top-0 right-0"},te=C({__name:"item",props:{basemap:{type:Object,required:!0},tileSchema:{type:Object,required:!0}},setup(a){const{t:b}=U(),_=W("iApi"),n=I(),e=B("basemapInfo"),p=E(!1),o=A(()=>n.activeBasemapConfig),f=u=>{u.id!==o.value.id&&_.geo.map.setBasemap(u.id)},y=u=>{u.key==="Tab"&&e.value?.matches(":focus")&&(p.value=!0,e.value._tippy.show())},r=()=>{p.value=!1,e.value._tippy.hide()},d=u=>{u.pointerType==="touch"&&(p.value=!p.value,p.value?e.value._tippy.show():e.value._tippy.hide())};return M(()=>{e.value?.addEventListener("mouseenter",()=>e.value._tippy.show()),e.value?.addEventListener("mouseleave",()=>e.value._tippy.hide()),e.value?.addEventListener("click",d),e.value?.addEventListener("keyup",y),e.value?.addEventListener("blur",r)}),j(()=>{e.value?.removeEventListener("mouseenter",()=>e.value._tippy.show()),e.value?.removeEventListener("mouseleave",()=>e.value._tippy.hide()),e.value?.removeEventListener("click",d),e.value?.removeEventListener("focus",()=>y),e.value?.removeEventListener("blur",()=>r)}),(u,t)=>{const x=c("truncate"),L=c("tippy"),v=c("focus-item");return l(),s("div",P,[h((l(),s("button",{class:"basemap-item-button bg-gray-300 w-full h-full",type:"button","aria-label":T(b)("basemap.select"),onClick:t[2]||(t[2]=m=>f(a.basemap))},[i("div",null,[i("div",{class:S(["flex hover:opacity-50 basemap-item-image basemap-item-container",a.basemap.hideThumbnail?"h-30":"h-180"])},[a.basemap.hideThumbnail?(l(),s("div",X)):a.basemap.thumbnailUrl?(l(),s("img",{key:1,class:"w-full h-180",alt:a.basemap.altText,src:a.basemap.thumbnailUrl},null,8,Y)):a.tileSchema.thumbnailTileUrls&&a.tileSchema.thumbnailTileUrls.length>0&&a.basemap.layers.every(m=>m.layerType==="esri-tile")?(l(!0),s(g,{key:2},k(a.basemap.layers,m=>(l(),s("div",{key:m.id,class:"flex basemap-item-inner h-180"},[(l(!0),s(g,null,k(a.tileSchema.thumbnailTileUrls,(w,V)=>(l(),s("img",{class:"w-full",alt:a.basemap.altText,src:m.url+w,key:V},null,8,Z))),128))]))),128)):(l(),s("img",{key:3,class:"w-full bg-white h-180",alt:a.basemap.altText,src:"https://openclipart.org/image/800px/275366"},null,8,$))],2)]),i("div",{class:S(["absolute flex w-full bg-black text-white h-30 bottom-6 items-center",a.basemap.hideThumbnail&&a.basemap.id===o.value.id?"opacity-85":"opacity-75"])},[h((l(),s("div",ee,[i("span",null,z(a.basemap.name),1)])),[[x]]),i("div",ae,[h((l(),s("a",{onClick:t[0]||(t[0]=q(()=>{},["stop"])),onKeydown:t[1]||(t[1]=D(q(()=>{},["prevent"]),["enter","space"])),content:a.basemap.description,ref_key:"basemapInfo",ref:e},t[3]||(t[3]=[i("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[i("path",{d:"M0 0h24v24H0z",fill:"none"}),i("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})],-1)]),40,le)),[[L,{placement:"bottom",trigger:"manual"}]])])],2),a.basemap.id===o.value.id&&!a.basemap.hideThumbnail?(l(),s("div",se,t[4]||(t[4]=[i("svg",{class:"fill-current w-25 h-25 relative",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[i("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})],-1)]))):O("",!0)],8,Q)),[[v]])])}}}),ie=F(te,[["__scopeId","data-v-9fadece5"]]),ne=["content"],re={class:"h-600 overflow-y-auto"},pe={class:"font-bold text-xl"},ue={key:0,class:"border-t border-b border-gray-600"},me=C({__name:"screen",props:{panel:{type:Object}},setup(a){const{t:b}=U(),_=I(),n=B("el"),e=E([]),p=E([]),o=r=>{R(r,n.value)&&n.value._tippy.show()},f=()=>{n.value._tippy.hide()};M(()=>{const r=_.config.map;e.value=r.tileSchemas,p.value=r.basemaps,n.value?.addEventListener("blur",f),n.value?.addEventListener("keyup",o)}),j(()=>{n.value?.removeEventListener("blur",f),n.value?.removeEventListener("keyup",o)});const y=r=>p.value.filter(d=>d.tileSchemaId===r);return(r,d)=>{const u=J("panel-screen"),t=c("truncate"),x=c("focus-list"),L=c("tippy");return l(),G(u,{panel:a.panel},{header:H(()=>[K(z(T(b)("basemap.title")),1)]),content:H(()=>[h((l(),s("div",{content:T(b)("panels.controls.items"),ref_key:"el",ref:n},[i("div",re,[(l(!0),s(g,null,k(e.value,(v,m)=>(l(),s("div",{class:"mx-5",key:v.id},[i("div",{class:S((m===0?"mt-5":"mt-36")+" flex mb-5")},[h((l(),s("h3",pe,[K(z(v.name),1)])),[[t]])],2),p.value.length>0?(l(),s("ul",ue,[(l(!0),s(g,null,k(y(v.id),w=>(l(),s("li",{key:w.id},[N(ie,{basemap:w,tileSchema:v,class:"block relative overflow-hidden"},null,8,["basemap","tileSchema"])]))),128))])):O("",!0)]))),128))])],8,ne)),[[x],[L,{trigger:"manual",placement:"top-end",touch:!1,maxWidth:190}]])]),_:1},8,["panel"])}}});export{me as default};
