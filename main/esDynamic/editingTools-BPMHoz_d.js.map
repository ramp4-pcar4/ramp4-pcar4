{"version":3,"file":"editingTools-BPMHoz_d.js","sources":["../../node_modules/@arcgis/core/views/2d/interactive/editingTools/draw/symbols.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/draw/DrawGraphicTool2D.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/Manipulation.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/DragManipulation.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/ControlPointsTransformTool.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/utils.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/RotateManipulation.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/manipulations/ScaleManipulation.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/TransformTool.js","../../node_modules/@arcgis/core/views/2d/interactive/editingTools/MediaTransformToolsWrapper.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../symbols/CIMSymbol.js\";import o from\"../../../../../symbols/SimpleMarkerSymbol.js\";const t=new e({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",effects:[{type:\"CIMGeometricEffectDashes\",dashTemplate:[3.75,3.75],lineDashEnding:\"HalfPattern\",controlPointEnding:\"NoConstraint\"}],enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:\"CIMSolidStroke\",enable:!0,capStyle:\"Butt\",joinStyle:\"Round\",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),l=new o({style:\"circle\",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),i=new o({style:\"circle\",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});export{i as activeVertex,t as outline,l as regularVertices};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../../Graphic.js\";import{makeHandle as i}from\"../../../../../core/handleUtils.js\";import{destroyMaybe as r}from\"../../../../../core/maybe.js\";import{watch as s,initial as a}from\"../../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../../../geometry/Multipoint.js\";import c from\"../../../../../geometry/Point.js\";import{SnappingVisualizer2D as h}from\"../../SnappingVisualizer2D.js\";import{activeVertex as m,regularVertices as p,outline as u}from\"./symbols.js\";import{DrawGraphicTool as v,geometryTypeToDrawOperationGeometryType as y}from\"../../../../draw/DrawGraphicTool.js\";import{DrawOperation as d}from\"../../../../draw/DrawOperation.js\";import{MapDrawSurface as g}from\"../../../../draw/drawSurfaces.js\";let E=class extends v{constructor(e){super(e),this._visualElementGraphics={regularVertices:null,activeVertex:null,activeEdge:null},this.activeFillSymbol=null,this.type=\"draw-2d\",this._visualElementSymbols={outline:e.activeLineSymbol??u,regularVertices:e.regularVerticesSymbol??p,activeVertex:e.activeVertexSymbol??m,fill:e.activeFillSymbol},e.activeVertexSymbol||this.addHandles(s(()=>this.view?.effectiveTheme?.accentColor,e=>{if(!e)return;const t=this._visualElementSymbols.activeVertex.clone().set({color:e});this._visualElementGraphics.activeVertex?.set(\"symbol\",t),this._visualElementSymbols={...this._visualElementSymbols,activeVertex:t}},a))}normalizeCtorArgs(e){const t={...e};return delete t.activeFillSymbol,delete t.activeVertexSymbol,delete t.regularVerticesSymbol,delete t.activeLineSymbol,t}initializeGraphic(e){return null!=this._visualElementSymbols.fill&&(e.symbol=this._visualElementSymbols.fill),this.internalGraphicsLayer.graphics.sort(G),i()}makeDrawOperation(){const{defaultZ:e,hasZ:t,view:i}=this;return this._createOrUpdateGraphic(null),new d({view:i,manipulators:this.manipulators,geometryType:y(this.geometryType),drawingMode:this.mode,hasZ:t,defaultZ:e,snapToSceneEnabled:this.snapToScene,drawSurface:new g(i,t,e),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new h(this.internalGraphicsLayer),graphic:this.graphic,cursor:this.cursor,constraintsEnabled:!0,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils})}onActiveVertexChanged(e){if(\"point\"===this.geometryType)return i();const[s,a]=e,l=new c({x:s,y:a,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.activeVertex?(this._visualElementGraphics.activeVertex.geometry=l,i()):(this._visualElementGraphics.activeVertex=new t({geometry:l,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(G),i(()=>{null!=this._visualElementGraphics.activeVertex&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=r(this._visualElementGraphics.activeVertex))}))}onCursorEdgeChanged(e){return null!=this._visualElementGraphics.activeEdge?(this._visualElementGraphics.activeEdge.geometry=e,i()):(this._visualElementGraphics.activeEdge=new t({geometry:e,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeEdge),this.internalGraphicsLayer.graphics.sort(G),i(()=>{null!=this._visualElementGraphics.activeEdge&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeEdge),this._visualElementGraphics.activeEdge=r(this._visualElementGraphics.activeEdge))}))}onRegularVerticesChanged(e){const s=new o({points:e,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.regularVertices?(this._visualElementGraphics.regularVertices.geometry=s,i()):(this._visualElementGraphics.regularVertices=new t({geometry:s,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(G),i(()=>{null!=this._visualElementGraphics.regularVertices&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=r(this._visualElementGraphics.regularVertices))}))}};function G(e,t){return(e.attributes?.displayOrder??-1/0)-(t.attributes?.displayOrder??-1/0)}e([l()],E.prototype,\"activeFillSymbol\",void 0),e([l({readOnly:!0})],E.prototype,\"type\",void 0),e([l({constructOnly:!0,nonNullable:!0})],E.prototype,\"view\",void 0),E=e([n(\"esri.views.2d.interactive.editingTools.draw.DrawGraphicTool2D\")],E);export{E as DrawGraphicTool2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nclass r{get hovering(){return this.someManipulator(r=>r.hovering)}get grabbing(){return this.someManipulator(r=>r.grabbing)}get dragging(){return this.someManipulator(r=>r.dragging)}hasManipulator(r){return this.someManipulator(t=>t===r)}someManipulator(r){let t=!1;return this.forEachManipulator(a=>{!t&&r(a)&&(t=!0)}),t}}export{r as Manipulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Manipulation as t}from\"./Manipulation.js\";import{createManipulatorDragEventPipeline as i,screenToMap as r}from\"../../../../interactive/dragEventPipeline.js\";import{GraphicManipulator as a}from\"../../../../interactive/GraphicManipulator.js\";import{getSymbolInfo as o}from\"../../../../interactive/support/utils.js\";class e extends t{constructor(t){super(),this._view=t.view,this._tool=t.tool,this._graphic=t.graphic,this._manipulator=this._createManipulator(),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulator=null,this._graphic=null}forEachManipulator(t){t(this._manipulator,0)}createDragPipeline(t,a){let e=null,n=null,s=0,l=0,p=0;const{offsetX:c,offsetY:h,size:u}=o(this._graphic.symbol);return i(this._manipulator,(i,o)=>{o.next(i=>{if(\"start\"===i.action){const i=t();e=i.editGeometryOperations,n=i.constraints}return i}).next(r(this._view)).next(t=>{const{x:i,y:r,z:o}=t.mapEnd;if(n&&(i+c<n.xmin||r+h-u<n.ymin||i+c>n.xmax||r+h-u>n.ymax))return t;(\"start\"===t.action||0===s&&0===l&&0===p)&&(s=t.mapStart.x,l=t.mapStart.y,p=t.mapStart.z);const m=i-s,_=r-l,f=o-p;s=i,l=r,p=o;const v=\"start\"===t.action?0:1,x=e.move(m,_,f,v);return a(t,x),t})})}_createManipulator(){const t=this._view,i=this._graphic;return new a({view:t,graphic:i,selectable:!0,cursor:\"move\"})}}export{e as DragManipulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../../Color.js\";import i from\"../../../../Graphic.js\";import{destroyMaybe as o}from\"../../../../core/maybe.js\";import{watch as r}from\"../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{project as n,initializeProjection as h}from\"../../../../geometry/projectionUtils.js\";import{isValid as c}from\"../../../../geometry/support/spatialReferenceUtils.js\";import l from\"../../../../layers/GraphicsLayer.js\";import p from\"../../../../symbols/CIMSymbol.js\";import{applyCIMSymbolColor as d}from\"../../../../symbols/support/cimSymbolUtils.js\";import{DragManipulation as m}from\"./manipulations/DragManipulation.js\";import{primaryKey as y}from\"../../../input/keys.js\";import{InteractiveToolBase as _}from\"../../../interactive/InteractiveToolBase.js\";import{EditGeometryOperations as g}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";const f={up:\"ArrowUp\",down:\"ArrowDown\",left:\"ArrowLeft\",right:\"ArrowRight\",toggleOpacity:\"t\",shift:\"Shift\",primaryKey:y},u=1,P=10,v=new e(\"#009af2\");let S=class extends _{constructor(t){super(t),this._isOpacityToggled=!1,this._isModifierActive=!1,this._factor=1,this._initialControlPoints=null,this._graphicsLayer=new l({internal:!0,listMode:\"hide\",visible:!1,effect:\"drop-shadow(0px, 0px, 3px)\",title:\"ControlPointsTransformationTool layer\"}),this._undoStack=[],this._redoStack=[],this._sharedUndoStack=[],this._sharedRedoStack=[],this._highlightHandle=null,this.activeHandle=0,this.type=\"reshape\"}initialize(){this._initialize()}destroy(){const{map:t}=this.view;this._controlPointManipulations.forEach(t=>t.destroy()),this._controlPointEditGeometryOperations.forEach(t=>t.destroy()),t.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=o(this._graphicsLayer),this._georeference=null,this._controlPointGraphics=null,this._controlPointManipulations=null,this._graphicsLayer=null,this._controlPointEditGeometryOperations=null,this._undoStack=null,this._redoStack=null,this._initialControlPoints=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _hasValidSpatialReference(){return c(this.view.spatialReference)}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){const t=this._undoStack[this._undoStack.length-1];return null!=t&&this._controlPointEditGeometryOperations[t].canUndo}canRedo(){const t=this._redoStack[this._redoStack.length-1];return null!=t&&this._controlPointEditGeometryOperations[t].canRedo}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();this._controlPointEditGeometryOperations[t].undo(),this.updateGraphics(),this._redoStack.push(t)}}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();this._controlPointEditGeometryOperations[t].redo(),this.updateGraphics(),this._undoStack.push(t)}}refresh(){const{mediaElement:t}=this;if(null==t.georeference)return;const e=t.georeference;\"control-points\"===e.type&&null!=e.coords&&(this._georeference=e,this._georeference.controlPoints.forEach(({mapPoint:t},e)=>{const i=this._controlPointEditGeometryOperations[e],o=i.data.parts[0].vertices[0];i.setVertexPosition(o,i.data.coordinateHelper.pointToVector(t))}),this.updateGraphics())}reset(){this._georeference.controlPoints=this._initialControlPoints,this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const t=this._georeference,e=t.controlPoints,i=e[0].mapPoint.spatialReference,o=this._hasValidSpatialReference;this._georeference.controlPoints=this._controlPointEditGeometryOperations.map((r,s)=>{const a=r.data.geometry;return this._controlPointGraphics[s].geometry=a,{mapPoint:n(a,i),sourcePoint:o?e[s].sourcePoint:t.toSource(a)}})}updateActiveHandle(t){if(this.activeHandle===t)return;const e=this._controlPointGraphics[this.activeHandle].symbol.clone();d(e,this.view.effectiveTheme.accentColor),this._controlPointGraphics[this.activeHandle].symbol=e;const i=this._controlPointGraphics[t].symbol.clone();d(i,v),this._controlPointGraphics[t].symbol=i,this.activeHandle=t,this.view.surface===document.activeElement&&this.highlightActiveHandle()}async highlightActiveHandle(){this.removeHighlightActiveHandle();const t=await this.view.whenLayerView(this._graphicsLayer);this._highlightHandle=t.highlight(this._controlPointGraphics[this.activeHandle])}removeHighlightActiveHandle(){this._highlightHandle&&this._highlightHandle.remove()}setSharedUndoStack(t){this._sharedUndoStack=t}setSharedRedoStack(t){this._sharedRedoStack=t}async _initialize(){const{view:t,mediaElement:e}=this;if(null==e.georeference)return;const o=e.georeference;\"control-points\"===o.type&&null!=o.coords&&(this._georeference=o,this._initialControlPoints=this._georeference.controlPoints,t.map.addMany([this._graphicsLayer]),t.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._controlPointEditGeometryOperations=this._georeference.controlPoints.map(({mapPoint:e})=>g.fromGeometry(n(e,t.spatialReference),2)),this._controlPointGraphics=this._controlPointEditGeometryOperations.map((t,e)=>new i({symbol:new p({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPointSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,colorLocked:!0,anchorPoint:{x:0,y:-15.75},anchorPointUnits:\"Absolute\",dominantSizeAxis3D:\"Y\",size:9,billboardMode3D:\"FaceNearPlane\",frame:{xmin:0,ymin:0,xmax:84.3,ymax:84.3},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[83.2,32.5],[84.3,40.7],[83.8,48.9],[81.7,56.9],[78.1,64.3],[73,70.9],[66.9,76.4],[59.7,80.5],[51.9,83.2],[43.7,84.3],[35.4,83.8],[27.4,81.7],[20,78],[13.4,73],[7.9,66.8],[3.8,59.7],[1.1,51.9],[0,43.7],[.5,35.4],[2.6,27.4],[6.3,20],[11.3,13.4],[17.5,7.9],[24.7,3.8],[32.5,1.1],[39.8,.1],[47.1,.3],[54.3,1.8],[61.1,4.5],[67.4,8.4],[72.9,13.3],[77.4,19.1],[80.9,25.5],[83.2,32.5]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:[255,255,255,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:\"CIMClippingPath\",clippingType:\"Intersect\",path:{rings:[[[0,0],[84.3,0],[84.3,84.3],[0,84.3],[0,0]]]}},rotation:0},{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:-11.25},anchorPointUnits:\"Absolute\",dominantSizeAxis3D:\"Y\",size:22.5,billboardMode3D:\"FaceNearPlane\",frame:{xmin:0,ymin:0,xmax:197.7,ymax:294.7},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{rings:[[[98.9,0],[119.4,23.2],[139.4,49.3],[156.8,75.2],[171.2,100.8],[182.4,125.3],[190.6,148.8],[195.7,171.4],[197.7,192.9],[197.7,195.8],[197.7,200.3],[197.6,202.5],[197.5,204.8],[197.3,207.1],[197,209.4],[196.7,211.7],[196.4,214.1],[196,216.4],[195.5,218.7],[195,221.1],[194.4,223.4],[193.7,225.8],[193,228.1],[192.2,230.5],[191.4,232.8],[190.5,235.1],[189.5,237.5],[188.5,239.7],[187.4,242],[186.2,244.3],[185,246.5],[183.7,248.7],[182.4,250.9],[181,253.1],[179.5,255.2],[178,257.3],[176.4,259.4],[174.7,261.4],[173.1,263.3],[171.3,265.3],[169.5,267.2],[167.7,269],[165.8,270.8],[163.9,272.5],[161.9,274.2],[159.9,275.8],[157.8,277.4],[155.7,278.9],[153.6,280.4],[151.4,281.7],[149.2,283.1],[147,284.4],[144.8,285.6],[142.5,286.7],[140.3,287.8],[138,288.8],[135.7,289.8],[133.4,290.7],[131,291.5],[128.7,292.3],[126.4,293],[124,293.6],[121.7,294.2],[119.4,294.7],[117,295.2],[114.7,295.6],[112.4,296],[110.1,296.3],[107.8,296.5],[105.5,296.7],[103.3,296.8],[101.1,296.9],[98.8,296.9],[83.1,295.7],[67.8,292],[53.3,285.9],[39.9,277.5],[28.1,267.2],[18,255.1],[10,241.5],[4.2,226.9],[.9,211.5],[0,195.8],[.1,192.9],[2.1,171.4],[7.2,148.8],[15.4,125.3],[26.6,100.8],[41,75.2],[58.4,49.3],[78.4,23.2],[98.9,0]]]},symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:e===this.activeHandle?v.toArray():this.view.effectiveTheme.accentColor.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:\"CIMClippingPath\",clippingType:\"Intersect\",path:{rings:[[[0,0],[197.7,0],[197.7,294.7],[0,294.7],[0,0]]]}},rotation:0}],haloSize:1,scaleX:1,angleAlignment:\"Display\",angle:0}}}),geometry:t.data.geometry})),this._graphicsLayer.graphics.addMany([...this._controlPointGraphics]),this._controlPointManipulations=this._controlPointGraphics.map(e=>new m({tool:this,view:t,graphic:e})),this.addHandles([...this._controlPointManipulations.map((t,e)=>t.createDragPipeline(this._getInfo.bind(this,e),(t,i)=>{\"start\"===t.action&&(this._undoStack.push(e),this._redoStack=[],this._sharedUndoStack.push({tool:this,operation:i}),this._sharedRedoStack.length=0),this.updateGraphics()})),r(()=>this.view.scale,()=>this.active?this.updateGraphics():null)]),this._controlPointManipulations.forEach((t,e)=>{const i=t=>{this.addHandles([t.events.on([\"click\",\"grab-changed\"],t=>this.updateActiveHandle(e))])};t.forEachManipulator(i)}),this.addHandles([t.on(\"key-down\",i=>{t.activeTool===this&&(i.key!==f.shift||i.repeat||(this._isModifierActive=!0,i.stopPropagation()),i.key!==f.toggleOpacity||i.repeat||(e.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled,i.stopPropagation()),i.key!==f.primaryKey||i.repeat||(this._factor=P,i.stopPropagation()),this._isModifierActive&&(i.key===f.up&&(this._move(0,this._factor),i.stopPropagation()),i.key===f.down&&(this._move(0,-this._factor),i.stopPropagation()),i.key===f.left&&(this._move(-this._factor,0),i.stopPropagation()),i.key===f.right&&(this._move(this._factor,0),i.stopPropagation())))}),t.on(\"key-up\",e=>{t.activeTool===this&&(e.key===f.shift&&(this._isModifierActive=!1,e.stopPropagation()),e.key===f.primaryKey&&(this._factor=u,e.stopPropagation()))})]))}async _loadProjectionEngine(){const t=this._georeference.controlPoints[0].mapPoint;return h(t.spatialReference,this.view.spatialReference)}_getInfo(t){return{editGeometryOperations:this._controlPointEditGeometryOperations[t],constraints:this._hasValidSpatialReference?null:{xmin:0,ymin:0,xmax:this._georeference.width,ymax:this._georeference.height}}}_move(t,e){const i=this._controlPointEditGeometryOperations[this.activeHandle].move(t*this.view.resolution,e*this.view.resolution,0,0);this._sharedUndoStack.push({tool:this,operation:i}),this._sharedRedoStack.length=0,this.updateGraphics()}};t([s()],S.prototype,\"_hasValidSpatialReference\",null),t([s()],S.prototype,\"activeHandle\",void 0),t([s({constructOnly:!0,nonNullable:!0})],S.prototype,\"mediaElement\",void 0),t([s({readOnly:!0})],S.prototype,\"type\",void 0),t([s({constructOnly:!0})],S.prototype,\"view\",void 0),S=t([a(\"esri.views.2d.interactive.editingTools.ControlPointsTransformTool\")],S);export{S as ControlPointsTransformTool,f as keys};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as t,deg2rad as e}from\"../../../../../core/mathUtils.js\";import{EventPipeline as a}from\"../../../../interactive/dragEventPipeline.js\";function n(t,e){\"start\"===t.action?e.cursor=\"grabbing\":e.cursor=\"grab\"}class s{constructor(){this._lastDragEvent=null,this.next=new a,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent){const e={...this._lastDragEvent,action:\"update\"};t&&this._adjustScaleFactors(e),this.next.execute(e)}this._enabled=t}createDragEventPipelineStep(){return this._lastDragEvent=null,t=>(this._lastDragEvent=\"end\"!==t.action?{...t}:null,this._enabled&&this._adjustScaleFactors(t),t)}_adjustScaleFactors(t){const e=0!==t.direction[0]&&0!==t.direction[1]?Math.max(Math.abs(t.factor1),Math.abs(t.factor2)):0===t.direction[0]?Math.abs(t.factor2):Math.abs(t.factor1);t.factor1=t.factor1<0?-e:e,t.factor2=t.factor2<0?-e:e}}class r{constructor(){this._lastDragEvent=null,this.next=new a,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent){const e={...this._lastDragEvent,action:\"update\"};t&&this._adjustRotateAngle(e),this.next.execute(e)}this._enabled=t}createDragEventPipelineStep(){return this._lastDragEvent=null,t=>(this._lastDragEvent=\"end\"!==t.action?{...t}:null,this._enabled&&this._adjustRotateAngle(t),t)}_adjustRotateAngle(a){const n=t(a.rotateAngle);a.rotateAngle=e(5*Math.round(n/5))}}export{s as PreserveAspectRatio,r as SnapRotation,n as onGrabChangedHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Handles.js\";import{d as i}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Manipulation as a}from\"./Manipulation.js\";import{onGrabChangedHandle as o}from\"./utils.js\";import{getRotationAngle as e}from\"../../../../draw/support/drawUtils.js\";import{createManipulatorDragEventPipeline as n,screenToMap as s}from\"../../../../interactive/dragEventPipeline.js\";import{GraphicManipulator as l}from\"../../../../interactive/GraphicManipulator.js\";import{apply as h}from\"../../../../interactive/editGeometry/support/editPlaneUtils.js\";class p extends a{constructor(i){super(),this._handles=new t,this._originCache=r(),this._view=i.view,this._tool=i.tool,this._graphic=i.graphic,this._snapRotation=i.snapRotation,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on(\"grab-changed\",t=>o(t,this._manipulator))]),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._handles.destroy(),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulator=null,this._snapRotation=null,this._graphic=null,this._handles=null,this._originCache=null}forEachManipulator(t){t(this._manipulator,2)}createDragPipeline(t,r){let a=null,o=null;return n(this._manipulator,(n,l)=>{l.next(i=>{if(\"start\"===i.action){n.cursor=\"grabbing\";const i=t();a=i.plane,o=i.editGeometryOperations}return i}).next(s(this._view)).next(t=>({...t,rotateAngle:e(t.mapStart,t.mapEnd,{x:a.origin[0],y:a.origin[1]},!0)})).next(this._snapRotation.createDragEventPipelineStep(),this._snapRotation.next).next(t=>{const e=i(this._originCache,a.origin),n=\"start\"===t.action?0:1,s=o.rotate(e,t.rotateAngle,n,1);return h(s,a),r(t,s),t}).next(t=>(\"end\"===t.action&&(n.cursor=\"grab\"),t))})}_createManipulator(){const t=this._view,i=this._graphic;return new l({view:t,graphic:i,selectable:!0,cursor:\"grab\"})}}export{p as RotateManipulation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Handles.js\";import{set as i,normalize as e}from\"../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{d as a,c as s,e as n,b as o,f as l}from\"../../../../../chunks/vec32.js\";import{create as h}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{a as c,d as p}from\"../../../../../chunks/boundedPlane.js\";import{getInfo as u}from\"../../../../../geometry/support/spatialReferenceUtils.js\";import{Manipulation as _}from\"./Manipulation.js\";import{onGrabChangedHandle as d}from\"./utils.js\";import{createManipulatorDragEventPipeline as m,screenToMap as f}from\"../../../../interactive/dragEventPipeline.js\";import{GraphicManipulator as g}from\"../../../../interactive/GraphicManipulator.js\";import{apply as v}from\"../../../../interactive/editGeometry/support/editPlaneUtils.js\";const b=10,x=1e-6,C=.3;function y(t){const i=o(t.basis1),e=o(t.basis2);return C*Math.min(i,e)}class j extends _{constructor(i){super(),this._handles=new t,this._planeStart=c(),this._displayPlaneStart=c(),this._originCache=h(),this._axisCache=r(),this._renderStartCache=h(),this._renderEndCache=h(),this._resizeOriginCache=h(),this._view=i.view,this._tool=i.tool,this._graphic=i.graphic,this._direction=i.direction,this._preserveAspectRatio=i.preserveAspectRatio,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on(\"grab-changed\",t=>d(t,this._manipulator))]),this.forEachManipulator(t=>this._tool.manipulators.add(t))}destroy(){this._handles.destroy(),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._graphic=null,this._manipulator=null,this._direction=null,this._handles=null,this._planeStart=null,this._displayPlaneStart=null,this._originCache=null,this._axisCache=null,this._renderStartCache=null,this._renderEndCache=null,this._resizeOriginCache=null,this._preserveAspectRatio=null}forEachManipulator(t){t(this._manipulator,1)}createDragPipeline(t,r){let h=null,c=null,_=null,d=0,g=null,C=null;const j=this._planeStart,w=this._displayPlaneStart,S=this._direction;return m(this._manipulator,(m,E)=>{E.next(i=>{if(\"start\"===i.action){m.cursor=\"grabbing\";const i=t();h=i.plane,c=i.displayPlane,_=i.editGeometryOperations,d=b*this._view.resolution,p(h,j),p(c,w);const e=u(_.data.spatialReference);g=e?e.valid[1]-e.valid[0]-3*b*this._view.resolution:null}return i}).next(f(this._view)).next(t=>{const i=a(this._renderStartCache,[t.mapStart.x,t.mapStart.y,0]),e=a(this._renderEndCache,[t.mapEnd.x,t.mapEnd.y,0]),r=a(this._resizeOriginCache,w.origin);s(r,r,w.basis1,-S[0]),s(r,r,w.basis2,-S[1]),n(e,e,r),n(i,i,r);const h=0!==S[0]&&0!==S[1],p=y(w),u=y(c)/p,_=(t,r)=>{if(0===t)return 1;let a=o(r),s=.5*t*l(r,e)/a;const n=s<0?-1:1;if(h){s+=(a-.5*t*l(r,i)/a)*n*u}const c=a<1.5*d?1:x;return a=Math.max(a-d,x),n>0&&(s-=b*this._view.resolution),n*Math.max(n*(s/a),c)},m=_(S[0],w.basis1),f=_(S[1],w.basis2);return{...t,direction:S,factor1:m,factor2:f}}).next(this._preserveAspectRatio.createDragEventPipelineStep(),this._preserveAspectRatio.next).next(t=>{const n=a(this._originCache,j.origin);s(n,n,j.basis1,-S[0]),s(n,n,j.basis2,-S[1]);const o=i(this._axisCache,j.basis1[0],j.basis1[1]);e(o,o);const l=_.data.allVerticesUnordered,c=\"start\"===t.action?0:1,u=_.scaleVertices(l,n,o,t.factor1,t.factor2,c,1);return g&&g<_.data.geometry.extent.width&&C?_.updateVertices(l,C):(p(j,h),v(u,h),C=u.operation,r(t,u)),t}).next(t=>(\"end\"===t.action&&(m.cursor=\"grab\"),t))})}_createManipulator(){return new g({view:this._view,graphic:this._graphic,selectable:!0,cursor:\"grab\"})}}export{j as ScaleManipulation,y as calculateDiagonalResizeHandleScale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../Graphic.js\";import{getContrast as i}from\"../../../../core/colorUtils.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import{watch as o}from\"../../../../core/reactiveUtils.js\";import{getMetersPerUnitForSR as r}from\"../../../../core/unitUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{subtract as h,normalize as c}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as l,UNIT_X as p}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{h as d,b as _,n as m,g as u,l as y,e as g}from\"../../../../chunks/vec32.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import v from\"../../../../geometry/Point.js\";import G from\"../../../../geometry/Polygon.js\";import{project as w,initializeProjection as R}from\"../../../../geometry/projectionUtils.js\";import{a as b,d as C}from\"../../../../chunks/boundedPlane.js\";import{equals as j}from\"../../../../geometry/support/spatialReferenceUtils.js\";import k from\"../../../../layers/GraphicsLayer.js\";import T from\"../../../../symbols/SimpleFillSymbol.js\";import S from\"../../../../symbols/SimpleMarkerSymbol.js\";import{DragManipulation as A}from\"./manipulations/DragManipulation.js\";import{RotateManipulation as P}from\"./manipulations/RotateManipulation.js\";import{ScaleManipulation as M}from\"./manipulations/ScaleManipulation.js\";import{PreserveAspectRatio as x,SnapRotation as O}from\"./manipulations/utils.js\";import{InteractiveToolBase as D}from\"../../../interactive/InteractiveToolBase.js\";import{KeyBindings as U,mediaKeys as L}from\"../../../interactive/keybindings.js\";import{EditGeometry as B}from\"../../../interactive/editGeometry/EditGeometry.js\";import{EditGeometryOperations as E}from\"../../../interactive/editGeometry/EditGeometryOperations.js\";import{calculateOrientedBounds as H}from\"../../../interactive/editGeometry/support/editPlaneUtils.js\";import{findFirstGraphicHit as I}from\"../../../support/hitTestSelectUtils.js\";import{createScreenPointFromEvent as z}from\"../../../support/screenUtils.js\";const V=80,q=10,F=30,N=[[1,1],[1,-1],[-1,-1],[-1,1],[1,0],[0,-1],[-1,0],[0,1]],J=1,K=10;let Q=class extends D{constructor(e){super(e),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._planeCache=b(),this._displayPlaneCache=b(),this._mainAxisCache=l(),this._rotationHandleCache=f(),this._cornerA=f(),this._cornerB=f(),this._cornerC=f(),this._cornerD=f(),this._avgAB=f(),this._avgBC=f(),this._avgCD=f(),this._avgDA=f(),this._preserveAspectRatio=new x,this._snapRotation=new O,this._graphicsLayer=new k({internal:!0,listMode:\"hide\",visible:!1,title:\"TransformTool layer\"}),this._sharedUndoStack=[],this._sharedRedoStack=[],this._isOpacityToggled=!1,this._factor=J,this.preserveAspectRatio=null,this.snapRotation=null,this.type=\"transform\"}initialize(){this._initialize()}destroy(){const{map:e}=this.view;this._dragManipulation.destroy(),this._rotateManipulation.destroy(),this._scaleManipulations.forEach(e=>e.destroy()),this._editGeometryOperations.destroy(),e.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=s(this._graphicsLayer),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._preserveAspectRatio=null,this._snapRotation=null,this._planeCache=null,this._displayPlaneCache=null,this._rotationHandleCache=null,this._mainAxisCache=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._avgAB=null,this._avgBC=null,this._avgCD=null,this._avgDA=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _plane(){const e=this._graphic.geometry;if(null==e)return null;const t=this._editGeometryOperations.data,i=t.parts[0].segments[0],s=h(this._mainAxisCache,i.leftVertex.pos,i.rightVertex.pos);c(s,s);let o=V*this.view.resolution;const a=this.view.spatialReference;return j(a,e.spatialReference)&&(o*=r(a)/r(e.spatialReference)),H(s,t,o,this._planeCache)}get _displayPlane(){const e=this._plane;if(!e)return null;const t=this._displayPlaneCache;C(e,t);const i=q*this.view.resolution;return d(t.basis1,t.basis1,1+i/_(t.basis1)),d(t.basis2,t.basis2,1+i/_(t.basis2)),t}get _backgroundGraphicGeometry(){const e=this._displayPlane;if(!e)return null;const t=this.view.spatialReference;return this._updateDisplayPlaneConrers(e),new G({spatialReference:t,rings:[[this._cornerA,this._cornerB,this._cornerC,this._cornerD,this._cornerA]]})}get _rotateGraphicGeometry(){const e=this._plane;if(!e)return null;const t=this._rotationHandleCache;return m(t,e.basis1),d(t,t,F*this.view.resolution),u(t,t,e.origin),u(t,t,e.basis1),new v({x:t[0],y:t[1],spatialReference:this.view.spatialReference})}get _scaleGraphicGeometries(){const e=this._displayPlane;if(!e)return[];const t=this.view.spatialReference;this._updateDisplayPlaneConrers(e);const{_cornerA:i,_cornerB:s,_cornerC:o,_cornerD:r}=this,a=y(this._avgAB,i,s,.5),n=y(this._avgBC,s,o,.5),h=y(this._avgCD,o,r,.5),c=y(this._avgDA,r,i,.5);return[new v({x:i[0],y:i[1],spatialReference:t}),new v({x:s[0],y:s[1],spatialReference:t}),new v({x:o[0],y:o[1],spatialReference:t}),new v({x:r[0],y:r[1],spatialReference:t}),new v({x:a[0],y:a[1],spatialReference:t}),new v({x:n[0],y:n[1],spatialReference:t}),new v({x:h[0],y:h[1],spatialReference:t}),new v({x:c[0],y:c[1],spatialReference:t})]}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this._editGeometryOperations.undo(),this.updateGraphics()}redo(){this._editGeometryOperations.redo(),this.updateGraphics()}refresh(){const{view:e,target:t}=this,i=\"georeference\"in t?t.georeference.coords:t.geometry,s=this._editGeometryOperations,o=s.data.parts[0].vertices,r=B.fromGeometry(w(i,e.spatialReference),2).parts[0].vertices;o.forEach((e,t)=>{s.setVertexPosition(e,r[t].pos)}),this.updateGraphics()}reset(){const{target:e}=this;if(\"georeference\"in e){const t=e.georeference;\"control-points\"===t.type&&(t.controlPoints=this._initialControlPoints)}else e.geometry=this._initialGeometry;this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const e=this._editGeometryOperations.data.geometry;if(\"georeference\"in this.target){this.target.georeference.coords=e}this._graphic.geometry=e,this._backgroundGraphic.geometry=this._backgroundGraphicGeometry,this._rotateGraphic.geometry=this._rotateGraphicGeometry,this._scaleGraphicGeometries.forEach((e,t)=>{this._scaleGraphics[t].geometry=e})}setSharedUndoStack(e){this._sharedUndoStack=e}setSharedRedoStack(e){this._sharedRedoStack=e}async _initialize(){const{view:e,target:s}=this;if(\"georeference\"in s){const e=s.georeference;this._graphic=new t({geometry:e.coords}),this._initialControlPoints=\"control-points\"===e.type?e.controlPoints:null}else this._graphic=s,this._initialGeometry=s.geometry;e.map.addMany([this._graphicsLayer]),e.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._editGeometryOperations=E.fromGeometry(w(this._graphic.geometry,e.spatialReference),2),this._backgroundGraphic=new t({symbol:new T({color:\"transparent\",outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:2}}),geometry:this._backgroundGraphicGeometry}),this._rotateGraphic=new t({symbol:new S({color:i(e.effectiveTheme.accentColor),outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:1}}),geometry:this._rotateGraphicGeometry}),this._scaleGraphics=this._scaleGraphicGeometries.map(s=>new t({symbol:new S({size:6,style:\"square\",color:i(e.effectiveTheme.accentColor),outline:{type:\"simple-line\",color:e.effectiveTheme.accentColor,width:1}}),geometry:s})),this._graphicsLayer.graphics.addMany([this._backgroundGraphic,this._rotateGraphic,...this._scaleGraphics]),this._dragManipulation=new A({tool:this,view:e,graphic:this._graphic}),this._rotateManipulation=new P({tool:this,view:e,graphic:this._rotateGraphic,snapRotation:this._snapRotation}),this._scaleManipulations=this._scaleGraphics.map((t,i)=>new M({tool:this,view:e,graphic:t,direction:N[i],preserveAspectRatio:this._preserveAspectRatio})),this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),this._rotateManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),...this._scaleManipulations.map(e=>e.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this))),o(()=>this.view.scale,()=>this.active?this.updateGraphics():null),e.on(\"click\",async t=>{if(null!=e.activeTool&&e.activeTool!==this)return;const i=z(t),o=[];e.map.allLayers.forEach(e=>{\"vector-tile\"!==e.type&&\"imagery\"!==e.type||o.push(e)});const r=await this.view.hitTest(i,{exclude:o}),a=r.results;if(0===a.length)e.activeTool=null;else{const t=I(r.results),i=\"georeference\"in s,o=a.map(e=>\"media\"===e.type?e.element:null).filter(Boolean),n=new Set([...this._graphicsLayer.graphics,i?null:s].filter(Boolean));i&&o.includes(s)||null!=t&&n.has(t.graphic)?null==e.activeTool&&(e.activeTool=this):e.activeTool=null}})]);const r=e=>{this.addHandles(e.events.on(\"grab-changed\",e=>{\"georeference\"in s&&(\"start\"===e.action?s.opacity*=.5:\"end\"===e.action&&(s.opacity*=2))}))};this._dragManipulation.forEachManipulator(r),this._rotateManipulation.forEachManipulator(r),this._scaleManipulations.forEach(e=>e.forEachManipulator(r));const a=new U;a.addToggle(L.preserveAspectRatio,()=>{null==this.preserveAspectRatio&&(this._preserveAspectRatio.enabled=!this._preserveAspectRatio.enabled)}),a.addToggle(L.rotateIncrements,()=>{null==this.snapRotation&&(this._snapRotation.enabled=!this._snapRotation.enabled)}),a.add(L.toggleOpacity,()=>{\"georeference\"in s&&(s.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled)}),a.addToggle(L.factorModifier,e=>this._factor=\"key-down\"===e.type?K:J),a.add(L.scaleUp,()=>this._scale(this._factor)),a.add(L.scaleDown,()=>this._scale(-this._factor)),a.add(L.moveUp,()=>this._move(0,this._factor)),a.add(L.moveDown,()=>this._move(0,-this._factor)),a.add(L.moveLeft,()=>this._move(-this._factor,0)),a.add(L.moveRight,()=>this._move(this._factor,0)),this.addHandles([e.on(\"key-down\",t=>{e.activeTool===this&&a.dispatch(e.inputManager,t)}),e.on(\"key-up\",t=>{e.activeTool===this&&a.dispatch(e.inputManager,t)})])}async _loadProjectionEngine(){const e=this._graphic.geometry;return R(e.spatialReference,this.view.spatialReference)}_updateDisplayPlaneConrers(e){const{basis1:t,basis2:i,origin:s}=e,o=this._cornerA;u(o,s,t),u(o,o,i);const r=this._cornerB;u(r,s,t),g(r,r,i);const a=this._cornerC;g(a,s,t),g(a,a,i);const n=this._cornerD;g(n,s,t),u(n,n,i)}_getInfo(){return{editGeometryOperations:this._editGeometryOperations,plane:this._plane,displayPlane:this._displayPlane}}_updateGraphics(e,t){\"start\"===e.action&&(this._sharedUndoStack.push({tool:this,operation:t}),this._sharedRedoStack.length=0),this.updateGraphics()}_scale(e){const t=this._editGeometryOperations,i=t.data.geometry.extent?.width,s=(i+e*this.view.resolution)/i,o=t.scale(this._plane.origin,p,s,s,0,1);this._sharedUndoStack.push({tool:this,operation:o}),this._sharedRedoStack.length=0,this.updateGraphics()}_move(e,t){const i=this._editGeometryOperations.move(e*this.view.resolution,t*this.view.resolution,0,0);this._sharedUndoStack.push({tool:this,operation:i}),this._sharedRedoStack.length=0,this.updateGraphics()}};e([a()],Q.prototype,\"_plane\",null),e([a()],Q.prototype,\"_backgroundGraphicGeometry\",null),e([a()],Q.prototype,\"_rotateGraphicGeometry\",null),e([a()],Q.prototype,\"_scaleGraphicGeometries\",null),e([a()],Q.prototype,\"preserveAspectRatio\",void 0),e([a()],Q.prototype,\"snapRotation\",void 0),e([a({constructOnly:!0,nonNullable:!0})],Q.prototype,\"target\",void 0),e([a({readOnly:!0})],Q.prototype,\"type\",void 0),e([a({constructOnly:!0})],Q.prototype,\"view\",void 0),Q=e([n(\"esri.views.2d.interactive.editingTools.TransformTool\")],Q);export{Q as TransformTool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import t from\"../../../../core/Accessor.js\";import{watch as e}from\"../../../../core/reactiveUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{ControlPointsTransformTool as a}from\"./ControlPointsTransformTool.js\";import{TransformTool as r}from\"./TransformTool.js\";const n={redo:\"r\",undo:\"z\"};let d=class extends t{constructor(o){super(o),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=[],this._sharedRedoStack=[],this._originalOpacity=null,this.activeHandle=0}initialize(){const{view:o,mediaElement:t,preserveAspectRatio:s,snapRotation:i,advancedMode:d}=this;this._originalOpacity=t.opacity,this._transformTool=new r({target:t,view:o,preserveAspectRatio:s,snapRotation:i}),this._controlPointsTransformTool=new a({mediaElement:t,view:o}),this._advancedModeTransformTool=new a({mediaElement:d.mediaElement,view:d.view}),this._transformTool.setSharedUndoStack(this._sharedUndoStack),this._transformTool.setSharedRedoStack(this._sharedRedoStack),this._controlPointsTransformTool.setSharedUndoStack(this._sharedUndoStack),this._controlPointsTransformTool.setSharedRedoStack(this._sharedRedoStack),this._advancedModeTransformTool.setSharedUndoStack(this._sharedUndoStack),this._advancedModeTransformTool.setSharedRedoStack(this._sharedRedoStack);const l=t.georeference,c=d.mediaElement.georeference;d.view.tools.addMany([this._advancedModeTransformTool]),\"controlPoints\"in c&&\"controlPoints\"in l&&this.addHandles([d.view.on(\"key-down\",o=>{o.key===n.undo&&this.canUndo()&&(this.undo(),o.stopPropagation()),o.key===n.redo&&this.canRedo()&&(this.redo(),o.stopPropagation())}),d.view.on(\"focus\",async o=>{this._controlPointsTransformTool.removeHighlightActiveHandle(),await this._advancedModeTransformTool.highlightActiveHandle()}),e(()=>c.controlPoints,o=>{l.controlPoints=o.map(({sourcePoint:o},t)=>({sourcePoint:o,mapPoint:l.controlPoints[t].mapPoint})),this._activeTool?.refresh()}),e(()=>this._controlPointsTransformTool.activeHandle,o=>{this._advancedModeTransformTool.updateActiveHandle(o),this.activeHandle=o}),e(()=>this._advancedModeTransformTool.activeHandle,o=>{this._controlPointsTransformTool.updateActiveHandle(o),this.activeHandle=o})]),this.addHandles([o.on(\"key-down\",o=>{o.key===n.undo&&this.canUndo()&&(this.undo(),o.stopPropagation()),o.key===n.redo&&this.canRedo()&&(this.redo(),o.stopPropagation())}),o.on(\"focus\",async o=>{this._advancedModeTransformTool.removeHighlightActiveHandle(),await this._controlPointsTransformTool.highlightActiveHandle()})]),o.tools.addMany([this._transformTool,this._controlPointsTransformTool]),o.activeTool=this._transformTool,this._activeTool=this._transformTool,o.focus()}destroy(){this._transformTool?.destroy(),this._controlPointsTransformTool?.destroy(),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=null,this._sharedRedoStack=null}canUndo(){return this._sharedUndoStack.length>0}canRedo(){return this._sharedRedoStack.length>0}undo(){if(this._sharedUndoStack.length>0){const{tool:o,operation:t}=this._sharedUndoStack.pop();o!==this._activeTool&&o.refresh(),t.undo(),o.updateGraphics(),this._sharedRedoStack.push({tool:o,operation:t}),this._activeTool!==o&&this._activeTool?.refresh()}}redo(){if(this._sharedRedoStack.length>0){const{tool:o,operation:t}=this._sharedRedoStack.pop();o!==this._activeTool&&o.refresh(),t.apply(),o.updateGraphics(),this._sharedUndoStack.push({tool:o,operation:t}),this._activeTool!==o&&this._activeTool?.refresh()}}refresh(){this._activeTool.refresh()}reset(){this._activeTool.reset(),this._advancedModeTransformTool.reset()}async enableAdvancedMode(){this.view.activeTool=this._controlPointsTransformTool,this._activeTool=this._controlPointsTransformTool,this._activeTool.refresh(),await this.advancedMode.view.when(),this.advancedMode.view.activeTool=this._advancedModeTransformTool,this._originalOpacity=this._controlPointsTransformTool.mediaElement.opacity,this._controlPointsTransformTool.mediaElement.opacity=.25*this._originalOpacity}disableAdvancedMode(){this.view.activeTool=this._transformTool,this._activeTool=this._transformTool,this._activeTool.refresh(),this.advancedMode.view.activeTool=null,this._controlPointsTransformTool.mediaElement.opacity=this._originalOpacity}};o([s()],d.prototype,\"activeHandle\",void 0),o([s({constructOnly:!0})],d.prototype,\"advancedMode\",void 0),o([s()],d.prototype,\"preserveAspectRatio\",void 0),o([s()],d.prototype,\"snapRotation\",void 0),o([s({constructOnly:!0,nonNullable:!0})],d.prototype,\"mediaElement\",void 0),o([s({constructOnly:!0})],d.prototype,\"view\",void 0),d=o([i(\"esri.views.2d.interactive.editingTools.MediaTransformToolsWrapper\")],d);export{d as MediaTransformToolsWrapper,n as keys};\n"],"names":["t","e","l","o","i","E","v","u","p","m","s","a","G","d","y","g","h","c","r","n","_","f","x","P","S","b","C","j","w","V","q","F","N","J","K","Q","D","O","k","H","B","T","A","M","z","I","U","L","R"],"mappings":";;;;;;;;;;;;;;;;AAI+G,MAAMA,KAAE,IAAIC,GAAE,EAAC,MAAK,EAAC,MAAK,sBAAqB,QAAO,EAAC,MAAK,iBAAgB,cAAa,CAAC,EAAC,MAAK,kBAAiB,SAAQ,CAAC,EAAC,MAAK,4BAA2B,cAAa,CAAC,MAAK,IAAI,GAAE,gBAAe,eAAc,oBAAmB,eAAc,CAAC,GAAE,QAAO,IAAG,UAAS,QAAO,WAAU,SAAQ,YAAW,IAAG,OAAM,KAAI,OAAM,CAAC,KAAI,KAAI,KAAI,GAAG,EAAC,GAAE,EAAC,MAAK,kBAAiB,QAAO,IAAG,UAAS,QAAO,WAAU,SAAQ,YAAW,IAAG,OAAM,GAAE,OAAM,CAAC,GAAE,GAAE,GAAE,GAAG,EAAC,CAAC,EAAC,EAAC,EAAC,CAAC,GAAEC,KAAE,IAAIC,EAAE,EAAC,OAAM,UAAS,MAAK,GAAE,OAAM,CAAC,KAAI,KAAI,KAAI,CAAC,GAAE,SAAQ,EAAC,OAAM,CAAC,IAAG,IAAG,EAAE,GAAE,OAAM,EAAC,EAAC,CAAC,GAAEC,KAAE,IAAID,EAAE,EAAC,OAAM,UAAS,MAAK,GAAE,OAAM,CAAC,KAAI,KAAI,GAAE,CAAC,GAAE,SAAQ,EAAC,OAAM,CAAC,IAAG,IAAG,EAAE,GAAE,OAAM,EAAC,EAAC,CAAC;ACAgU,IAACE,IAAE,cAAcC,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAM,CAAC,GAAE,KAAK,yBAAuB,EAAC,iBAAgB,MAAK,cAAa,MAAK,YAAW,KAAI,GAAE,KAAK,mBAAiB,MAAK,KAAK,OAAK,WAAU,KAAK,wBAAsB,EAAC,SAAQ,EAAE,oBAAkBC,IAAE,iBAAgB,EAAE,yBAAuBC,IAAE,cAAa,EAAE,sBAAoBC,IAAE,MAAK,EAAE,iBAAgB,GAAE,EAAE,sBAAoB,KAAK,WAAWC,EAAE,MAAI,KAAK,MAAM,gBAAgB,aAAY,CAAAT,MAAG;AAAC,UAAG,CAACA,EAAE;AAAO,YAAMD,IAAE,KAAK,sBAAsB,aAAa,MAAK,EAAG,IAAI,EAAC,OAAMC,EAAC,CAAC;AAAE,WAAK,uBAAuB,cAAc,IAAI,UAASD,CAAC,GAAE,KAAK,wBAAsB,EAAC,GAAG,KAAK,uBAAsB,cAAaA,EAAC;AAAA,IAAC,GAAEW,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAE;AAAC,UAAM,IAAE,EAAC,GAAG,EAAC;AAAE,WAAO,OAAO,EAAE,kBAAiB,OAAO,EAAE,oBAAmB,OAAO,EAAE,uBAAsB,OAAO,EAAE,kBAAiB;AAAA,EAAC;AAAA,EAAC,kBAAkB,GAAE;AAAC,WAAa,KAAK,sBAAsB,QAAjC,SAAwC,EAAE,SAAO,KAAK,sBAAsB,OAAM,KAAK,sBAAsB,SAAS,KAAKC,CAAC,GAAER;EAAG;AAAA,EAAC,oBAAmB;AAAC,UAAK,EAAC,UAAS,GAAE,MAAK,GAAE,MAAK,EAAC,IAAE;AAAK,WAAO,KAAK,uBAAuB,IAAI,GAAE,IAAIS,GAAE,EAAC,MAAK,GAAE,cAAa,KAAK,cAAa,cAAaC,GAAE,KAAK,YAAY,GAAE,aAAY,KAAK,MAAK,MAAK,GAAE,UAAS,GAAE,oBAAmB,KAAK,aAAY,aAAY,IAAIC,GAAE,GAAE,GAAE,CAAC,GAAE,MAAK,IAAG,iBAAgB,KAAK,iBAAgB,oBAAmB,IAAIC,GAAE,KAAK,qBAAqB,GAAE,SAAQ,KAAK,SAAQ,QAAO,KAAK,QAAO,oBAAmB,IAAG,iCAAgC,KAAK,gCAA+B,CAAC;AAAA,EAAC;AAAA,EAAC,sBAAsB,GAAE;AAAC,QAAa,KAAK,iBAAf,QAA4B,QAAOZ,EAAC;AAAG,UAAK,CAACM,GAAEC,CAAC,IAAE,GAAET,IAAE,IAAIe,EAAE,EAAC,GAAEP,GAAE,GAAEC,GAAE,kBAAiB,KAAK,KAAK,iBAAgB,CAAC;AAAE,WAAa,KAAK,uBAAuB,gBAAlC,QAAgD,KAAK,uBAAuB,aAAa,WAAST,GAAEE,EAAC,MAAK,KAAK,uBAAuB,eAAa,IAAIJ,EAAE,EAAC,UAASE,GAAE,QAAO,KAAK,sBAAsB,cAAa,YAAW,EAAC,cAAa,EAAC,EAAC,CAAC,GAAE,KAAK,sBAAsB,IAAI,KAAK,uBAAuB,YAAY,GAAE,KAAK,sBAAsB,SAAS,KAAKU,CAAC,GAAER,EAAE,MAAI;AAAC,MAAM,KAAK,uBAAuB,gBAAlC,SAAiD,KAAK,sBAAsB,OAAO,KAAK,uBAAuB,YAAY,GAAE,KAAK,uBAAuB,eAAac,EAAE,KAAK,uBAAuB,YAAY;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,oBAAoB,GAAE;AAAC,WAAa,KAAK,uBAAuB,cAAlC,QAA8C,KAAK,uBAAuB,WAAW,WAAS,GAAEd,EAAC,MAAK,KAAK,uBAAuB,aAAW,IAAIJ,EAAE,EAAC,UAAS,GAAE,QAAO,KAAK,sBAAsB,SAAQ,YAAW,EAAC,cAAa,EAAC,EAAC,CAAC,GAAE,KAAK,sBAAsB,IAAI,KAAK,uBAAuB,UAAU,GAAE,KAAK,sBAAsB,SAAS,KAAKY,CAAC,GAAER,EAAE,MAAI;AAAC,MAAM,KAAK,uBAAuB,cAAlC,SAA+C,KAAK,sBAAsB,OAAO,KAAK,uBAAuB,UAAU,GAAE,KAAK,uBAAuB,aAAWc,EAAE,KAAK,uBAAuB,UAAU;AAAA,IAAE,CAAC;AAAA,EAAE;AAAA,EAAC,yBAAyB,GAAE;AAAC,UAAMR,IAAE,IAAIP,GAAE,EAAC,QAAO,GAAE,kBAAiB,KAAK,KAAK,iBAAgB,CAAC;AAAE,WAAa,KAAK,uBAAuB,mBAAlC,QAAmD,KAAK,uBAAuB,gBAAgB,WAASO,GAAEN,EAAC,MAAK,KAAK,uBAAuB,kBAAgB,IAAIJ,EAAE,EAAC,UAASU,GAAE,QAAO,KAAK,sBAAsB,iBAAgB,YAAW,EAAC,cAAa,EAAC,EAAC,CAAC,GAAE,KAAK,sBAAsB,IAAI,KAAK,uBAAuB,eAAe,GAAE,KAAK,sBAAsB,SAAS,KAAKE,CAAC,GAAER,EAAE,MAAI;AAAC,MAAM,KAAK,uBAAuB,mBAAlC,SAAoD,KAAK,sBAAsB,OAAO,KAAK,uBAAuB,eAAe,GAAE,KAAK,uBAAuB,kBAAgBc,EAAE,KAAK,uBAAuB,eAAe;AAAA,IAAE,CAAC;AAAA,EAAE;AAAC;AAAE,SAASN,EAAE,GAAE,GAAE;AAAC,UAAO,EAAE,YAAY,gBAAc,WAAO,EAAE,YAAY,gBAAc;AAAK;AAACX,EAAE,CAACC,EAAC,CAAE,GAAEG,EAAE,WAAU,oBAAmB,MAAM,GAAEJ,EAAE,CAACC,EAAE,EAAC,UAAS,GAAE,CAAC,CAAC,GAAEG,EAAE,WAAU,QAAO,MAAM,GAAEJ,EAAE,CAACC,EAAE,EAAC,eAAc,IAAG,aAAY,GAAE,CAAC,CAAC,GAAEG,EAAE,WAAU,QAAO,MAAM,GAAEA,IAAEJ,EAAE,CAACkB,EAAE,+DAA+D,CAAC,GAAEd,CAAC;SCAzxJ,MAAO;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,gBAAgB,CAAAa,MAAGA,EAAE,QAAQ;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,gBAAgB,CAAAA,MAAGA,EAAE,QAAQ;AAAA,EAAC;AAAA,EAAC,IAAI,WAAU;AAAC,WAAO,KAAK,gBAAgB,CAAAA,MAAGA,EAAE,QAAQ;AAAA,EAAC;AAAA,EAAC,eAAeA,GAAE;AAAC,WAAO,KAAK,gBAAgB,CAAAlB,MAAGA,MAAIkB,CAAC;AAAA,EAAC;AAAA,EAAC,gBAAgBA,GAAE;AAAC,QAAIlB,IAAE;AAAG,WAAO,KAAK,mBAAmB,OAAG;AAAC,OAACA,KAAGkB,EAAE,CAAC,MAAIlB,IAAE;AAAA,IAAG,CAAC,GAAEA;AAAA,EAAC;AAAC;ACAF,MAAMC,WAAUD,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAK,GAAG,KAAK,QAAM,EAAE,MAAK,KAAK,QAAM,EAAE,MAAK,KAAK,WAAS,EAAE,SAAQ,KAAK,eAAa,KAAK,mBAAkB,GAAG,KAAK,mBAAmB,CAAAA,MAAG,KAAK,MAAM,aAAa,IAAIA,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,mBAAmB,OAAG;AAAC,WAAK,MAAM,aAAa,OAAO,CAAC,GAAE,EAAE,QAAO;AAAA,IAAE,CAAC,GAAE,KAAK,QAAM,MAAK,KAAK,QAAM,MAAK,KAAK,eAAa,MAAK,KAAK,WAAS;AAAA,EAAI;AAAA,EAAC,mBAAmB,GAAE;AAAC,MAAE,KAAK,cAAa,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAEW,GAAE;AAAC,QAAIV,IAAE,MAAKkB,IAAE,MAAKT,IAAE,GAAER,IAAE,GAAEM,IAAE;AAAE,UAAK,EAAC,SAAQS,GAAE,SAAQD,GAAE,MAAKT,EAAC,IAAEJ,GAAE,KAAK,SAAS,MAAM;AAAE,WAAOC,GAAE,KAAK,cAAa,CAACA,GAAED,MAAI;AAAC,MAAAA,EAAE,KAAK,CAAAC,MAAG;AAAC,YAAaA,EAAE,WAAZ,SAAmB;AAAC,gBAAMA,IAAE,EAAC;AAAG,UAAAH,IAAEG,EAAE,wBAAuBe,IAAEf,EAAE;AAAA,QAAW;AAAC,eAAOA;AAAA,MAAC,CAAC,EAAE,KAAKc,GAAE,KAAK,KAAK,CAAC,EAAE,KAAK,CAAAlB,MAAG;AAAC,cAAK,EAAC,GAAEI,GAAE,GAAEc,GAAE,GAAEf,EAAC,IAAEH,EAAE;AAAO,YAAGmB,MAAIf,IAAEa,IAAEE,EAAE,QAAMD,IAAEF,IAAET,IAAEY,EAAE,QAAMf,IAAEa,IAAEE,EAAE,QAAMD,IAAEF,IAAET,IAAEY,EAAE,MAAM,QAAOnB;AAAE,SAAWA,EAAE,WAAZ,WAAwBU,MAAJ,KAAWR,MAAJ,KAAWM,MAAJ,OAASE,IAAEV,EAAE,SAAS,GAAEE,IAAEF,EAAE,SAAS,GAAEQ,IAAER,EAAE,SAAS;AAAG,cAAMS,IAAEL,IAAEM,GAAEU,IAAEF,IAAEhB,GAAEmB,IAAElB,IAAEK;AAAE,QAAAE,IAAEN,GAAEF,IAAEgB,GAAEV,IAAEL;AAAE,cAAMG,IAAYN,EAAE,WAAZ,UAAmB,IAAE,GAAEsB,IAAErB,EAAE,KAAKQ,GAAEW,GAAEC,GAAEf,CAAC;AAAE,eAAOK,EAAEX,GAAEsB,CAAC,GAAEtB;AAAA,MAAC,CAAC;AAAA,IAAC,CAAC;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,UAAM,IAAE,KAAK,OAAM,IAAE,KAAK;AAAS,WAAO,IAAIW,GAAE,EAAC,MAAK,GAAE,SAAQ,GAAE,YAAW,IAAG,QAAO,OAAM,CAAC;AAAA,EAAC;AAAC;ACAjQ,MAAMU,IAAE,EAAC,IAAG,WAAU,MAAK,aAAY,MAAK,aAAY,OAAM,cAAa,eAAc,KAAI,OAAM,SAAQ,YAAWP,GAAC,GAAEP,KAAE,GAAEgB,KAAE,IAAGjB,KAAE,IAAIL,GAAE,SAAS;AAAK,IAACuB,IAAE,cAAcJ,GAAC;AAAA,EAAC,YAAYpB,GAAE;AAAC,UAAMA,CAAC,GAAE,KAAK,oBAAkB,IAAG,KAAK,oBAAkB,IAAG,KAAK,UAAQ,GAAE,KAAK,wBAAsB,MAAK,KAAK,iBAAe,IAAIE,GAAE,EAAC,UAAS,IAAG,UAAS,QAAO,SAAQ,IAAG,QAAO,8BAA6B,OAAM,wCAAuC,CAAC,GAAE,KAAK,aAAW,CAAA,GAAG,KAAK,aAAW,CAAA,GAAG,KAAK,mBAAiB,CAAA,GAAG,KAAK,mBAAiB,CAAA,GAAG,KAAK,mBAAiB,MAAK,KAAK,eAAa,GAAE,KAAK,OAAK;AAAA,EAAS;AAAA,EAAC,aAAY;AAAC,SAAK,YAAW;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,UAAK,EAAC,KAAIF,EAAC,IAAE,KAAK;AAAK,SAAK,2BAA2B,QAAQ,OAAG,EAAE,QAAO,CAAE,GAAE,KAAK,oCAAoC,QAAQ,OAAG,EAAE,QAAO,CAAE,GAAEA,EAAE,WAAW,CAAC,KAAK,cAAc,CAAC,GAAE,KAAK,eAAe,UAAS,GAAG,KAAK,iBAAeG,EAAE,KAAK,cAAc,GAAE,KAAK,gBAAc,MAAK,KAAK,wBAAsB,MAAK,KAAK,6BAA2B,MAAK,KAAK,iBAAe,MAAK,KAAK,sCAAoC,MAAK,KAAK,aAAW,MAAK,KAAK,aAAW,MAAK,KAAK,wBAAsB,MAAK,KAAK,mBAAiB,MAAK,KAAK,mBAAiB;AAAA,EAAI;AAAA,EAAC,IAAI,4BAA2B;AAAC,WAAOc,GAAE,KAAK,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,SAAK,UAAQ;AAAA,EAAE;AAAA,EAAC,eAAc;AAAC,SAAK,UAAQ;AAAA,EAAE;AAAA,EAAC,SAAQ;AAAC,SAAK,eAAe,UAAQ;AAAA,EAAE;AAAA,EAAC,SAAQ;AAAC,SAAK,eAAe,UAAQ;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,UAAMjB,IAAE,KAAK,WAAW,KAAK,WAAW,SAAO,CAAC;AAAE,WAAaA,KAAN,QAAS,KAAK,oCAAoCA,CAAC,EAAE;AAAA,EAAO;AAAA,EAAC,UAAS;AAAC,UAAMA,IAAE,KAAK,WAAW,KAAK,WAAW,SAAO,CAAC;AAAE,WAAaA,KAAN,QAAS,KAAK,oCAAoCA,CAAC,EAAE;AAAA,EAAO;AAAA,EAAC,OAAM;AAAC,QAAG,KAAK,WAAW,SAAO,GAAE;AAAC,YAAMA,IAAE,KAAK,WAAW,IAAG;AAAG,WAAK,oCAAoCA,CAAC,EAAE,KAAI,GAAG,KAAK,eAAc,GAAG,KAAK,WAAW,KAAKA,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,QAAG,KAAK,WAAW,SAAO,GAAE;AAAC,YAAMA,IAAE,KAAK,WAAW,IAAG;AAAG,WAAK,oCAAoCA,CAAC,EAAE,KAAI,GAAG,KAAK,eAAc,GAAG,KAAK,WAAW,KAAKA,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,UAAK,EAAC,cAAaA,EAAC,IAAE;AAAK,QAASA,EAAE,gBAAR,KAAqB;AAAO,UAAMC,IAAED,EAAE;AAAa,IAAmBC,EAAE,SAArB,oBAAiCA,EAAE,UAAR,SAAiB,KAAK,gBAAcA,GAAE,KAAK,cAAc,cAAc,QAAQ,CAAC,EAAC,UAASD,EAAC,GAAEC,MAAI;AAAC,YAAMG,IAAE,KAAK,oCAAoCH,CAAC,GAAEE,IAAEC,EAAE,KAAK,MAAM,CAAC,EAAE,SAAS,CAAC;AAAE,MAAAA,EAAE,kBAAkBD,GAAEC,EAAE,KAAK,iBAAiB,cAAcJ,CAAC,CAAC;AAAA,IAAC,CAAC,GAAE,KAAK;EAAiB;AAAA,EAAC,QAAO;AAAC,SAAK,cAAc,gBAAc,KAAK,uBAAsB,KAAK,QAAO,GAAG,KAAK,iBAAiB,SAAO,GAAE,KAAK,iBAAiB,SAAO;AAAA,EAAC;AAAA,EAAC,iBAAgB;AAAC,UAAMA,IAAE,KAAK,eAAcC,IAAED,EAAE,eAAc,IAAEC,EAAE,CAAC,EAAE,SAAS,kBAAiBE,IAAE,KAAK;AAA0B,SAAK,cAAc,gBAAc,KAAK,oCAAoC,IAAI,CAACe,GAAER,MAAI;AAAC,YAAMC,IAAEO,EAAE,KAAK;AAAS,aAAO,KAAK,sBAAsBR,CAAC,EAAE,WAASC,GAAE,EAAC,UAASQ,EAAER,GAAE,CAAC,GAAE,aAAYR,IAAEF,EAAES,CAAC,EAAE,cAAYV,EAAE,SAASW,CAAC,EAAC;AAAA,IAAC,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmBX,GAAE;AAAC,QAAG,KAAK,iBAAeA,EAAE;AAAO,UAAMC,IAAE,KAAK,sBAAsB,KAAK,YAAY,EAAE,OAAO,MAAK;AAAGY,IAAAA,GAAEZ,GAAE,KAAK,KAAK,eAAe,WAAW,GAAE,KAAK,sBAAsB,KAAK,YAAY,EAAE,SAAOA;AAAE,UAAM,IAAE,KAAK,sBAAsBD,CAAC,EAAE,OAAO;AAAQa,IAAAA,GAAE,GAAEP,EAAC,GAAE,KAAK,sBAAsBN,CAAC,EAAE,SAAO,GAAE,KAAK,eAAaA,GAAE,KAAK,KAAK,YAAU,SAAS,iBAAe,KAAK;EAAuB;AAAA,EAAC,MAAM,wBAAuB;AAAC,SAAK;AAA8B,UAAMA,IAAE,MAAM,KAAK,KAAK,cAAc,KAAK,cAAc;AAAE,SAAK,mBAAiBA,EAAE,UAAU,KAAK,sBAAsB,KAAK,YAAY,CAAC;AAAA,EAAC;AAAA,EAAC,8BAA6B;AAAC,SAAK,oBAAkB,KAAK,iBAAiB,OAAM;AAAA,EAAE;AAAA,EAAC,mBAAmBA,GAAE;AAAC,SAAK,mBAAiBA;AAAA,EAAC;AAAA,EAAC,mBAAmBA,GAAE;AAAC,SAAK,mBAAiBA;AAAA,EAAC;AAAA,EAAC,MAAM,cAAa;AAAC,UAAK,EAAC,MAAKA,GAAE,cAAaC,EAAC,IAAE;AAAK,QAASA,EAAE,gBAAR,KAAqB;AAAO,UAAME,IAAEF,EAAE;AAAa,IAAmBE,EAAE,SAArB,oBAAiCA,EAAE,UAAR,SAAiB,KAAK,gBAAcA,GAAE,KAAK,wBAAsB,KAAK,cAAc,eAAcH,EAAE,IAAI,QAAQ,CAAC,KAAK,cAAc,CAAC,GAAEA,EAAE,MAAK,GAAG,KAAK,UAAQ,IAAG,KAAK,sBAAqB,MAAM,KAAK,yBAAwB,KAAK,sCAAoC,KAAK,cAAc,cAAc,IAAI,CAAC,EAAC,UAASC,EAAC,MAAIc,GAAE,aAAaI,EAAElB,GAAED,EAAE,gBAAgB,GAAE,CAAC,CAAC,GAAE,KAAK,wBAAsB,KAAK,oCAAoC,IAAI,CAACA,GAAEC,MAAI,IAAIG,EAAE,EAAC,QAAO,IAAII,GAAE,EAAC,MAAK,EAAC,MAAK,sBAAqB,QAAO,EAAC,MAAK,kBAAiB,cAAa,CAAC,EAAC,MAAK,mBAAkB,QAAO,IAAG,aAAY,IAAG,aAAY,EAAC,GAAE,GAAE,GAAE,OAAM,GAAE,kBAAiB,YAAW,oBAAmB,KAAI,MAAK,GAAE,iBAAgB,iBAAgB,OAAM,EAAC,MAAK,GAAE,MAAK,GAAE,MAAK,MAAK,MAAK,KAAI,GAAE,gBAAe,CAAC,EAAC,MAAK,oBAAmB,UAAS,EAAC,OAAM,CAAC,CAAC,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,IAAG,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,MAAK,EAAE,GAAE,CAAC,KAAI,IAAI,GAAE,CAAC,KAAI,IAAI,GAAE,CAAC,KAAI,IAAI,GAAE,CAAC,GAAE,IAAI,GAAE,CAAC,KAAG,IAAI,GAAE,CAAC,KAAI,IAAI,GAAE,CAAC,KAAI,EAAE,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,GAAE,GAAE,CAAC,MAAK,GAAE,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,CAAC,CAAC,EAAC,GAAE,QAAO,EAAC,MAAK,oBAAmB,cAAa,CAAC,EAAC,MAAK,gBAAe,QAAO,IAAG,OAAM,CAAC,KAAI,KAAI,KAAI,GAAG,EAAC,CAAC,EAAC,EAAC,CAAC,GAAE,4BAA2B,IAAG,cAAa,IAAG,cAAa,EAAC,MAAK,mBAAkB,cAAa,aAAY,MAAK,EAAC,OAAM,CAAC,CAAC,CAAC,GAAE,CAAC,GAAE,CAAC,MAAK,CAAC,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,GAAE,IAAI,GAAE,CAAC,GAAE,CAAC,CAAC,CAAC,EAAC,EAAC,GAAE,UAAS,EAAC,GAAE,EAAC,MAAK,mBAAkB,QAAO,IAAG,aAAY,EAAC,GAAE,GAAE,GAAE,OAAM,GAAE,kBAAiB,YAAW,oBAAmB,KAAI,MAAK,MAAK,iBAAgB,iBAAgB,OAAM,EAAC,MAAK,GAAE,MAAK,GAAE,MAAK,OAAM,MAAK,MAAK,GAAE,gBAAe,CAAC,EAAC,MAAK,oBAAmB,UAAS,EAAC,OAAM,CAAC,CAAC,CAAC,MAAK,CAAC,GAAE,CAAC,OAAM,IAAI,GAAE,CAAC,OAAM,IAAI,GAAE,CAAC,OAAM,IAAI,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,GAAG,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,GAAG,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,GAAG,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,GAAG,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,MAAK,GAAG,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,IAAG,KAAK,GAAE,CAAC,IAAG,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,KAAG,KAAK,GAAE,CAAC,GAAE,KAAK,GAAE,CAAC,KAAG,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,KAAI,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,MAAK,KAAK,GAAE,CAAC,IAAG,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,IAAI,GAAE,CAAC,MAAK,CAAC,CAAC,CAAC,EAAC,GAAE,QAAO,EAAC,MAAK,oBAAmB,cAAa,CAAC,EAAC,MAAK,gBAAe,QAAO,IAAG,OAAMP,MAAI,KAAK,eAAaK,GAAE,QAAO,IAAG,KAAK,KAAK,eAAe,YAAY,QAAO,EAAE,CAAC,EAAC,EAAC,CAAC,GAAE,4BAA2B,IAAG,cAAa,IAAG,cAAa,EAAC,MAAK,mBAAkB,cAAa,aAAY,MAAK,EAAC,OAAM,CAAC,CAAC,CAAC,GAAE,CAAC,GAAE,CAAC,OAAM,CAAC,GAAE,CAAC,OAAM,KAAK,GAAE,CAAC,GAAE,KAAK,GAAE,CAAC,GAAE,CAAC,CAAC,CAAC,EAAC,EAAC,GAAE,UAAS,EAAC,CAAC,GAAE,UAAS,GAAE,QAAO,GAAE,gBAAe,WAAU,OAAM,EAAC,EAAC,EAAC,CAAC,GAAE,UAASN,EAAE,KAAK,SAAQ,CAAC,CAAC,GAAE,KAAK,eAAe,SAAS,QAAQ,CAAC,GAAG,KAAK,qBAAqB,CAAC,GAAE,KAAK,6BAA2B,KAAK,sBAAsB,IAAIC,CAAAA,MAAG,IAAIQ,GAAE,EAAC,MAAK,MAAK,MAAKT,GAAE,SAAQC,EAAC,CAAC,CAAC,GAAE,KAAK,WAAW,CAAC,GAAG,KAAK,2BAA2B,IAAI,CAACD,GAAEC,MAAID,EAAE,mBAAmB,KAAK,SAAS,KAAK,MAAKC,CAAC,GAAE,CAACD,GAAEI,MAAI;AAAC,MAAUJ,EAAE,WAAZ,YAAqB,KAAK,WAAW,KAAKC,CAAC,GAAE,KAAK,aAAW,IAAG,KAAK,iBAAiB,KAAK,EAAC,MAAK,MAAK,WAAUG,EAAC,CAAC,GAAE,KAAK,iBAAiB,SAAO,IAAG,KAAK,eAAc;AAAA,IAAE,CAAC,CAAC,GAAEc,EAAE,MAAI,KAAK,KAAK,OAAM,MAAI,KAAK,SAAO,KAAK,eAAc,IAAG,IAAI,CAAC,CAAC,GAAE,KAAK,2BAA2B,QAAQ,CAAClB,GAAEC,MAAI;AAAC,YAAMG,IAAE,CAAAJ,MAAG;AAAC,aAAK,WAAW,CAACA,EAAE,OAAO,GAAG,CAAC,SAAQ,cAAc,GAAE,CAAAA,MAAG,KAAK,mBAAmBC,CAAC,CAAC,CAAC,CAAC;AAAA,MAAC;AAAE,MAAAD,EAAE,mBAAmBI,CAAC;AAAA,IAAC,CAAC,GAAE,KAAK,WAAW,CAACJ,EAAE,GAAG,YAAW,CAAAI,MAAG;AAAC,MAAAJ,EAAE,eAAa,SAAOI,EAAE,QAAMiB,EAAE,SAAOjB,EAAE,WAAS,KAAK,oBAAkB,IAAGA,EAAE,oBAAmBA,EAAE,QAAMiB,EAAE,iBAAejB,EAAE,WAASH,EAAE,WAAS,KAAK,oBAAkB,IAAE,KAAG,KAAK,oBAAkB,CAAC,KAAK,mBAAkBG,EAAE,oBAAmBA,EAAE,QAAMiB,EAAE,cAAYjB,EAAE,WAAS,KAAK,UAAQmB,IAAEnB,EAAE,oBAAmB,KAAK,sBAAoBA,EAAE,QAAMiB,EAAE,OAAK,KAAK,MAAM,GAAE,KAAK,OAAO,GAAEjB,EAAE,gBAAe,IAAIA,EAAE,QAAMiB,EAAE,SAAO,KAAK,MAAM,GAAE,CAAC,KAAK,OAAO,GAAEjB,EAAE,gBAAe,IAAIA,EAAE,QAAMiB,EAAE,SAAO,KAAK,MAAM,CAAC,KAAK,SAAQ,CAAC,GAAEjB,EAAE,gBAAe,IAAIA,EAAE,QAAMiB,EAAE,UAAQ,KAAK,MAAM,KAAK,SAAQ,CAAC,GAAEjB,EAAE,gBAAe;AAAA,IAAK,CAAC,GAAEJ,EAAE,GAAG,UAAS,CAAAC,MAAG;AAAC,MAAAD,EAAE,eAAa,SAAOC,EAAE,QAAMoB,EAAE,UAAQ,KAAK,oBAAkB,IAAGpB,EAAE,gBAAe,IAAIA,EAAE,QAAMoB,EAAE,eAAa,KAAK,UAAQd,IAAEN,EAAE,gBAAe;AAAA,IAAI,CAAC,CAAC,CAAC;AAAA,EAAE;AAAA,EAAC,MAAM,wBAAuB;AAAC,UAAMD,IAAE,KAAK,cAAc,cAAc,CAAC,EAAE;AAAS,WAAOgB,GAAEhB,EAAE,kBAAiB,KAAK,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,SAASA,GAAE;AAAC,WAAM,EAAC,wBAAuB,KAAK,oCAAoCA,CAAC,GAAE,aAAY,KAAK,4BAA0B,OAAK,EAAC,MAAK,GAAE,MAAK,GAAE,MAAK,KAAK,cAAc,OAAM,MAAK,KAAK,cAAc,OAAM,EAAC;AAAA,EAAC;AAAA,EAAC,MAAMA,GAAEC,GAAE;AAAC,UAAM,IAAE,KAAK,oCAAoC,KAAK,YAAY,EAAE,KAAKD,IAAE,KAAK,KAAK,YAAWC,IAAE,KAAK,KAAK,YAAW,GAAE,CAAC;AAAE,SAAK,iBAAiB,KAAK,EAAC,MAAK,MAAK,WAAU,EAAC,CAAC,GAAE,KAAK,iBAAiB,SAAO,GAAE,KAAK,eAAc;AAAA,EAAE;AAAC;AAAED,EAAE,CAACU,EAAC,CAAE,GAAEc,EAAE,WAAU,6BAA4B,IAAI,GAAExB,EAAE,CAACU,GAAG,GAAEc,EAAE,WAAU,gBAAe,MAAM,GAAExB,EAAE,CAACU,EAAE,EAAC,eAAc,IAAG,aAAY,GAAE,CAAC,CAAC,GAAEc,EAAE,WAAU,gBAAe,MAAM,GAAExB,EAAE,CAACU,EAAE,EAAC,UAAS,GAAE,CAAC,CAAC,GAAEc,EAAE,WAAU,QAAO,MAAM,GAAExB,EAAE,CAACU,EAAE,EAAC,eAAc,GAAE,CAAC,CAAC,GAAEc,EAAE,WAAU,QAAO,MAAM,GAAEA,IAAExB,EAAE,CAACW,EAAE,mEAAmE,CAAC,GAAEa,CAAC;ACAp4U,SAASL,GAAEnB,GAAEC,GAAE;AAAC,EAAUD,EAAE,WAAZ,UAAmBC,EAAE,SAAO,aAAWA,EAAE,SAAO;AAAM;AAAC,MAAMS,GAAC;AAAA,EAAC,cAAa;AAAC,SAAK,iBAAe,MAAK,KAAK,OAAK,IAAIC,MAAE,KAAK,WAAS;AAAA,EAAE;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,QAAQ,GAAE;AAAC,QAAG,KAAK,aAAW,KAAS,KAAK,kBAAX,MAA0B;AAAC,YAAMV,IAAE,EAAC,GAAG,KAAK,gBAAe,QAAO,SAAQ;AAAE,WAAG,KAAK,oBAAoBA,CAAC,GAAE,KAAK,KAAK,QAAQA,CAAC;AAAA,IAAC;AAAC,SAAK,WAAS;AAAA,EAAC;AAAA,EAAC,8BAA6B;AAAC,WAAO,KAAK,iBAAe,MAAK,QAAI,KAAK,iBAAuB,EAAE,WAAV,QAAiB,EAAC,GAAG,EAAC,IAAE,MAAK,KAAK,YAAU,KAAK,oBAAoB,CAAC,GAAE;AAAA,EAAE;AAAA,EAAC,oBAAoB,GAAE;AAAC,UAAMA,IAAM,EAAE,UAAU,CAAC,MAAjB,KAAwB,EAAE,UAAU,CAAC,MAAjB,IAAmB,KAAK,IAAI,KAAK,IAAI,EAAE,OAAO,GAAE,KAAK,IAAI,EAAE,OAAO,CAAC,IAAM,EAAE,UAAU,CAAC,MAAjB,IAAmB,KAAK,IAAI,EAAE,OAAO,IAAE,KAAK,IAAI,EAAE,OAAO;AAAE,MAAE,UAAQ,EAAE,UAAQ,IAAE,CAACA,IAAEA,GAAE,EAAE,UAAQ,EAAE,UAAQ,IAAE,CAACA,IAAEA;AAAA,EAAC;AAAC;AAAC,MAAMiB,GAAC;AAAA,EAAC,cAAa;AAAC,SAAK,iBAAe,MAAK,KAAK,OAAK,IAAIP,MAAE,KAAK,WAAS;AAAA,EAAE;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK;AAAA,EAAQ;AAAA,EAAC,IAAI,QAAQ,GAAE;AAAC,QAAG,KAAK,aAAW,KAAS,KAAK,kBAAX,MAA0B;AAAC,YAAMV,IAAE,EAAC,GAAG,KAAK,gBAAe,QAAO,SAAQ;AAAE,WAAG,KAAK,mBAAmBA,CAAC,GAAE,KAAK,KAAK,QAAQA,CAAC;AAAA,IAAC;AAAC,SAAK,WAAS;AAAA,EAAC;AAAA,EAAC,8BAA6B;AAAC,WAAO,KAAK,iBAAe,MAAK,QAAI,KAAK,iBAAuB,EAAE,WAAV,QAAiB,EAAC,GAAG,EAAC,IAAE,MAAK,KAAK,YAAU,KAAK,mBAAmB,CAAC,GAAE;AAAA,EAAE;AAAA,EAAC,mBAAmBU,GAAE;AAAC,UAAMQ,IAAEnB,GAAEW,EAAE,WAAW;AAAE,IAAAA,EAAE,cAAYV,GAAE,IAAE,KAAK,MAAMkB,IAAE,CAAC,CAAC;AAAA,EAAC;AAAC;ACA5yB,MAAMX,WAAUG,GAAC;AAAA,EAAC,YAAYP,GAAE;AAAC,UAAK,GAAG,KAAK,WAAS,IAAIJ,MAAE,KAAK,eAAakB,EAAC,GAAG,KAAK,QAAMd,EAAE,MAAK,KAAK,QAAMA,EAAE,MAAK,KAAK,WAASA,EAAE,SAAQ,KAAK,gBAAcA,EAAE,cAAa,KAAK,eAAa,KAAK,mBAAkB,GAAG,KAAK,SAAS,IAAI,CAAC,KAAK,aAAa,OAAO,GAAG,gBAAe,CAAAJ,MAAGG,GAAEH,GAAE,KAAK,YAAY,CAAC,CAAC,CAAC,GAAE,KAAK,mBAAmB,CAAAA,MAAG,KAAK,MAAM,aAAa,IAAIA,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS,QAAO,GAAG,KAAK,mBAAmB,OAAG;AAAC,WAAK,MAAM,aAAa,OAAO,CAAC,GAAE,EAAE,QAAO;AAAA,IAAE,CAAC,GAAE,KAAK,QAAM,MAAK,KAAK,QAAM,MAAK,KAAK,eAAa,MAAK,KAAK,gBAAc,MAAK,KAAK,WAAS,MAAK,KAAK,WAAS,MAAK,KAAK,eAAa;AAAA,EAAI;AAAA,EAAC,mBAAmB,GAAE;AAAC,MAAE,KAAK,cAAa,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAEkB,GAAE;AAAC,QAAI,IAAE,MAAKf,IAAE;AAAK,WAAOgB,GAAE,KAAK,cAAa,CAACA,GAAEjB,MAAI;AAAC,MAAAA,EAAE,KAAK,CAAAE,MAAG;AAAC,YAAaA,EAAE,WAAZ,SAAmB;AAAC,UAAAe,EAAE,SAAO;AAAW,gBAAMf,IAAE,EAAC;AAAG,cAAEA,EAAE,OAAMD,IAAEC,EAAE;AAAA,QAAsB;AAAC,eAAOA;AAAA,MAAC,CAAC,EAAE,KAAKM,GAAE,KAAK,KAAK,CAAC,EAAE,KAAK,CAAAV,OAAI,EAAC,GAAGA,GAAE,aAAYC,GAAED,EAAE,UAASA,EAAE,QAAO,EAAC,GAAE,EAAE,OAAO,CAAC,GAAE,GAAE,EAAE,OAAO,CAAC,EAAC,GAAE,EAAE,EAAC,EAAE,EAAE,KAAK,KAAK,cAAc,4BAA2B,GAAG,KAAK,cAAc,IAAI,EAAE,KAAK,CAAAA,MAAG;AAAC,cAAMC,IAAEG,EAAE,KAAK,cAAa,EAAE,MAAM,GAAEe,IAAYnB,EAAE,WAAZ,UAAmB,IAAE,GAAEU,IAAEP,EAAE,OAAOF,GAAED,EAAE,aAAYmB,GAAE,CAAC;AAAE,eAAOH,GAAEN,GAAE,CAAC,GAAEQ,EAAElB,GAAEU,CAAC,GAAEV;AAAA,MAAC,CAAC,EAAE,KAAK,CAAAA,OAAYA,EAAE,WAAV,UAAmBmB,EAAE,SAAO,SAAQnB,EAAE;AAAA,IAAC,CAAC;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,UAAM,IAAE,KAAK,OAAM,IAAE,KAAK;AAAS,WAAO,IAAIE,GAAE,EAAC,MAAK,GAAE,SAAQ,GAAE,YAAW,IAAG,QAAO,OAAM,CAAC;AAAA,EAAC;AAAC;ACA1iC,MAAMuB,KAAE,IAAGH,KAAE,MAAKI,KAAE;AAAG,SAASZ,GAAEd,GAAE;AAAC,QAAMI,IAAED,EAAEH,EAAE,MAAM,GAAEC,IAAEE,EAAEH,EAAE,MAAM;AAAE,SAAO0B,KAAE,KAAK,IAAItB,GAAEH,CAAC;AAAC;AAAC,MAAM0B,WAAUP,GAAC;AAAA,EAAC,YAAYhB,GAAE;AAAC,UAAK,GAAG,KAAK,WAAS,IAAIJ,MAAE,KAAK,cAAYiB,EAAC,GAAG,KAAK,qBAAmBA,EAAC,GAAG,KAAK,eAAaD,EAAC,GAAG,KAAK,aAAWE,GAAC,GAAG,KAAK,oBAAkBF,EAAC,GAAG,KAAK,kBAAgBA,EAAC,GAAG,KAAK,qBAAmBA,EAAC,GAAG,KAAK,QAAMZ,EAAE,MAAK,KAAK,QAAMA,EAAE,MAAK,KAAK,WAASA,EAAE,SAAQ,KAAK,aAAWA,EAAE,WAAU,KAAK,uBAAqBA,EAAE,qBAAoB,KAAK,eAAa,KAAK,mBAAkB,GAAG,KAAK,SAAS,IAAI,CAAC,KAAK,aAAa,OAAO,GAAG,gBAAe,CAAAJ,MAAGa,GAAEb,GAAE,KAAK,YAAY,CAAC,CAAC,CAAC,GAAE,KAAK,mBAAmB,CAAAA,MAAG,KAAK,MAAM,aAAa,IAAIA,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS,QAAO,GAAG,KAAK,mBAAmB,OAAG;AAAC,WAAK,MAAM,aAAa,OAAO,CAAC,GAAE,EAAE,QAAO;AAAA,IAAE,CAAC,GAAE,KAAK,QAAM,MAAK,KAAK,QAAM,MAAK,KAAK,WAAS,MAAK,KAAK,eAAa,MAAK,KAAK,aAAW,MAAK,KAAK,WAAS,MAAK,KAAK,cAAY,MAAK,KAAK,qBAAmB,MAAK,KAAK,eAAa,MAAK,KAAK,aAAW,MAAK,KAAK,oBAAkB,MAAK,KAAK,kBAAgB,MAAK,KAAK,qBAAmB,MAAK,KAAK,uBAAqB;AAAA,EAAI;AAAA,EAAC,mBAAmB,GAAE;AAAC,MAAE,KAAK,cAAa,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAEkB,GAAE;AAAC,QAAIF,IAAE,MAAKC,IAAE,MAAKG,IAAE,MAAKP,IAAE,GAAEE,IAAE,MAAKW,IAAE;AAAK,UAAMC,IAAE,KAAK,aAAYC,IAAE,KAAK,oBAAmBJ,IAAE,KAAK;AAAW,WAAOf,GAAE,KAAK,cAAa,CAACA,GAAEJ,MAAI;AAAC,MAAAA,EAAE,KAAK,CAAAD,MAAG;AAAC,YAAaA,EAAE,WAAZ,SAAmB;AAAC,UAAAK,EAAE,SAAO;AAAW,gBAAML,IAAE;AAAI,UAAAY,IAAEZ,EAAE,OAAMa,IAAEb,EAAE,cAAagB,IAAEhB,EAAE,wBAAuBS,IAAEY,KAAE,KAAK,MAAM,YAAWjB,EAAEQ,GAAEW,CAAC,GAAEnB,EAAES,GAAEW,CAAC;AAAE,gBAAM3B,IAAEM,GAAEa,EAAE,KAAK,gBAAgB;AAAE,UAAAL,IAAEd,IAAEA,EAAE,MAAM,CAAC,IAAEA,EAAE,MAAM,CAAC,IAAE,IAAEwB,KAAE,KAAK,MAAM,aAAW;AAAA,QAAI;AAAC,eAAOrB;AAAA,MAAC,CAAC,EAAE,KAAKiB,GAAE,KAAK,KAAK,CAAC,EAAE,KAAK,CAAArB,MAAG;AAAC,cAAMI,IAAEO,EAAE,KAAK,mBAAkB,CAACX,EAAE,SAAS,GAAEA,EAAE,SAAS,GAAE,CAAC,CAAC,GAAEC,IAAEU,EAAE,KAAK,iBAAgB,CAACX,EAAE,OAAO,GAAEA,EAAE,OAAO,GAAE,CAAC,CAAC,GAAEkB,IAAEP,EAAE,KAAK,oBAAmBiB,EAAE,MAAM;AAAElB,QAAAA,EAAEQ,GAAEA,GAAEU,EAAE,QAAO,CAACJ,EAAE,CAAC,CAAC,GAAEd,EAAEQ,GAAEA,GAAEU,EAAE,QAAO,CAACJ,EAAE,CAAC,CAAC,GAAEL,EAAElB,GAAEA,GAAEiB,CAAC,GAAEC,EAAEf,GAAEA,GAAEc,CAAC;AAAE,cAAMF,IAAMQ,EAAE,CAAC,MAAP,KAAcA,EAAE,CAAC,MAAP,GAAShB,IAAEM,GAAEc,CAAC,GAAErB,IAAEO,GAAEG,CAAC,IAAET,GAAEY,IAAE,CAACpB,GAAEkB,MAAI;AAAC,cAAOlB,MAAJ,EAAM,QAAO;AAAE,cAAIW,IAAER,EAAEe,CAAC,GAAER,IAAE,MAAGV,IAAEE,GAAEgB,GAAEjB,CAAC,IAAEU;AAAE,gBAAMQ,IAAET,IAAE,IAAE,KAAG;AAAE,UAAGM,MAAGN,MAAIC,IAAE,MAAGX,IAAEE,GAAEgB,GAAEd,CAAC,IAAEO,KAAGQ,IAAEZ;AAAE,gBAAMU,KAAEN,IAAE,MAAIE,IAAE,IAAES;AAAE,iBAAOX,IAAE,KAAK,IAAIA,IAAEE,GAAES,EAAC,GAAEH,IAAE,MAAIT,KAAGe,KAAE,KAAK,MAAM,aAAYN,IAAE,KAAK,IAAIA,KAAGT,IAAEC,IAAGM,EAAC;AAAA,QAAC,GAAER,KAAEW,EAAEI,EAAE,CAAC,GAAEI,EAAE,MAAM,GAAEP,KAAED,EAAEI,EAAE,CAAC,GAAEI,EAAE,MAAM;AAAE,eAAM,EAAC,GAAG5B,GAAE,WAAUwB,GAAE,SAAQf,IAAE,SAAQY,GAAC;AAAA,MAAC,CAAC,EAAE,KAAK,KAAK,qBAAqB,4BAA2B,GAAG,KAAK,qBAAqB,IAAI,EAAE,KAAK,CAAArB,MAAG;AAAC,cAAMmB,IAAER,EAAE,KAAK,cAAagB,EAAE,MAAM;AAAEjB,QAAAA,EAAES,GAAEA,GAAEQ,EAAE,QAAO,CAACH,EAAE,CAAC,CAAC,GAAEd,EAAES,GAAEA,GAAEQ,EAAE,QAAO,CAACH,EAAE,CAAC,CAAC;AAAE,cAAMrB,IAAEC,GAAE,KAAK,YAAWuB,EAAE,OAAO,CAAC,GAAEA,EAAE,OAAO,CAAC,CAAC;AAAE1B,QAAAA,GAAEE,GAAEA,CAAC;AAAE,cAAMD,IAAEkB,EAAE,KAAK,sBAAqBH,IAAYjB,EAAE,WAAZ,UAAmB,IAAE,GAAEO,IAAEa,EAAE,cAAclB,GAAEiB,GAAEhB,GAAEH,EAAE,SAAQA,EAAE,SAAQiB,GAAE,CAAC;AAAE,eAAOF,KAAGA,IAAEK,EAAE,KAAK,SAAS,OAAO,SAAOM,IAAEN,EAAE,eAAelB,GAAEwB,CAAC,KAAGlB,EAAEmB,GAAEX,CAAC,GAAEV,GAAEC,GAAES,CAAC,GAAEU,IAAEnB,EAAE,WAAUW,EAAElB,GAAEO,CAAC,IAAGP;AAAA,MAAC,CAAC,EAAE,KAAK,CAAAA,OAAYA,EAAE,WAAV,UAAmBS,EAAE,SAAO,SAAQT,EAAE;AAAA,IAAC,CAAC;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,WAAO,IAAIe,GAAE,EAAC,MAAK,KAAK,OAAM,SAAQ,KAAK,UAAS,YAAW,IAAG,QAAO,OAAM,CAAC;AAAA,EAAC;AAAC;ACAj0C,MAAMc,KAAE,IAAGC,KAAE,IAAGC,KAAE,IAAGC,KAAE,CAAC,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,CAAC,GAAE,EAAE,GAAE,CAAC,IAAG,CAAC,GAAE,CAAC,GAAE,CAAC,CAAC,GAAEC,KAAE,GAAEC,KAAE;AAAM,IAACC,IAAE,cAAcC,GAAC;AAAA,EAAC,YAAY,GAAE;AAAC,UAAM,CAAC,GAAE,KAAK,wBAAsB,MAAK,KAAK,mBAAiB,MAAK,KAAK,WAAS,MAAK,KAAK,cAAYX,EAAC,GAAG,KAAK,qBAAmBA,KAAI,KAAK,iBAAevB,MAAI,KAAK,uBAAqBmB,EAAC,GAAG,KAAK,WAASA,EAAC,GAAG,KAAK,WAASA,EAAC,GAAG,KAAK,WAASA,EAAC,GAAG,KAAK,WAASA,EAAC,GAAG,KAAK,SAAOA,KAAI,KAAK,SAAOA,EAAC,GAAG,KAAK,SAAOA,EAAC,GAAG,KAAK,SAAOA,EAAC,GAAG,KAAK,uBAAqB,IAAIC,MAAE,KAAK,gBAAc,IAAIe,MAAE,KAAK,iBAAe,IAAIC,GAAE,EAAC,UAAS,IAAG,UAAS,QAAO,SAAQ,IAAG,OAAM,sBAAqB,CAAC,GAAE,KAAK,mBAAiB,IAAG,KAAK,mBAAiB,CAAA,GAAG,KAAK,oBAAkB,IAAG,KAAK,UAAQL,IAAE,KAAK,sBAAoB,MAAK,KAAK,eAAa,MAAK,KAAK,OAAK;AAAA,EAAW;AAAA,EAAC,aAAY;AAAC,SAAK,YAAW;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,UAAK,EAAC,KAAI,EAAC,IAAE,KAAK;AAAK,SAAK,kBAAkB,QAAO,GAAG,KAAK,oBAAoB,QAAO,GAAG,KAAK,oBAAoB,QAAQ,CAAAhC,MAAGA,EAAE,QAAO,CAAE,GAAE,KAAK,wBAAwB,QAAO,GAAG,EAAE,WAAW,CAAC,KAAK,cAAc,CAAC,GAAE,KAAK,eAAe,UAAS,GAAG,KAAK,iBAAeS,EAAE,KAAK,cAAc,GAAE,KAAK,wBAAsB,MAAK,KAAK,mBAAiB,MAAK,KAAK,WAAS,MAAK,KAAK,uBAAqB,MAAK,KAAK,gBAAc,MAAK,KAAK,cAAY,MAAK,KAAK,qBAAmB,MAAK,KAAK,uBAAqB,MAAK,KAAK,iBAAe,MAAK,KAAK,WAAS,MAAK,KAAK,WAAS,MAAK,KAAK,WAAS,MAAK,KAAK,WAAS,MAAK,KAAK,SAAO,MAAK,KAAK,SAAO,MAAK,KAAK,SAAO,MAAK,KAAK,SAAO,MAAK,KAAK,mBAAiB,MAAK,KAAK,mBAAiB;AAAA,EAAI;AAAA,EAAC,IAAI,SAAQ;AAAC,UAAM,IAAE,KAAK,SAAS;AAAS,QAAS,KAAN,KAAQ,QAAO;AAAK,UAAM,IAAE,KAAK,wBAAwB,MAAK,IAAE,EAAE,MAAM,CAAC,EAAE,SAAS,CAAC,GAAEA,IAAEM,GAAE,KAAK,gBAAe,EAAE,WAAW,KAAI,EAAE,YAAY,GAAG;AAAEC,IAAAA,GAAEP,GAAEA,CAAC;AAAE,QAAIP,IAAE0B,KAAE,KAAK,KAAK;AAAW,UAAMlB,IAAE,KAAK,KAAK;AAAiB,WAAOgB,GAAEhB,GAAE,EAAE,gBAAgB,MAAIR,KAAGe,GAAEP,CAAC,IAAEO,GAAE,EAAE,gBAAgB,IAAGqB,GAAE7B,GAAE,GAAEP,GAAE,KAAK,WAAW;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,UAAM,IAAE,KAAK;AAAO,QAAG,CAAC,EAAE,QAAO;AAAK,UAAM,IAAE,KAAK;AAAmBuB,IAAAA,EAAE,GAAE,CAAC;AAAE,UAAM,IAAEI,KAAE,KAAK,KAAK;AAAW,WAAOjB,GAAE,EAAE,QAAO,EAAE,QAAO,IAAE,IAAEO,EAAE,EAAE,MAAM,CAAC,GAAEP,GAAE,EAAE,QAAO,EAAE,QAAO,IAAE,IAAEO,EAAE,EAAE,MAAM,CAAC,GAAE;AAAA,EAAC;AAAA,EAAC,IAAI,6BAA4B;AAAC,UAAM,IAAE,KAAK;AAAc,QAAG,CAAC,EAAE,QAAO;AAAK,UAAM,IAAE,KAAK,KAAK;AAAiB,WAAO,KAAK,2BAA2B,CAAC,GAAE,IAAIR,GAAE,EAAC,kBAAiB,GAAE,OAAM,CAAC,CAAC,KAAK,UAAS,KAAK,UAAS,KAAK,UAAS,KAAK,UAAS,KAAK,QAAQ,CAAC,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,yBAAwB;AAAC,UAAM,IAAE,KAAK;AAAO,QAAG,CAAC,EAAE,QAAO;AAAK,UAAM,IAAE,KAAK;AAAqB,WAAOH,GAAE,GAAE,EAAE,MAAM,GAAEI,GAAE,GAAE,GAAEkB,KAAE,KAAK,KAAK,UAAU,GAAExB,EAAE,GAAE,GAAE,EAAE,MAAM,GAAEA,EAAE,GAAE,GAAE,EAAE,MAAM,GAAE,IAAID,EAAE,EAAC,GAAE,EAAE,CAAC,GAAE,GAAE,EAAE,CAAC,GAAE,kBAAiB,KAAK,KAAK,iBAAgB,CAAC;AAAA,EAAC;AAAA,EAAC,IAAI,0BAAyB;AAAC,UAAM,IAAE,KAAK;AAAc,QAAG,CAAC,EAAE,QAAM,CAAA;AAAG,UAAM,IAAE,KAAK,KAAK;AAAiB,SAAK,2BAA2B,CAAC;AAAE,UAAK,EAAC,UAAS,GAAE,UAASI,GAAE,UAASP,GAAE,UAAS,EAAC,IAAE,MAAKQ,IAAEG,EAAE,KAAK,QAAO,GAAEJ,GAAE,GAAE,GAAES,IAAEL,EAAE,KAAK,QAAOJ,GAAEP,GAAE,GAAE,GAAEa,IAAEF,EAAE,KAAK,QAAOX,GAAE,GAAE,GAAE,GAAE,IAAEW,EAAE,KAAK,QAAO,GAAE,GAAE,GAAE;AAAE,WAAM,CAAC,IAAIR,EAAE,EAAC,GAAE,EAAE,CAAC,GAAE,GAAE,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIA,EAAE,EAAC,GAAEI,EAAE,CAAC,GAAE,GAAEA,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIJ,EAAE,EAAC,GAAEH,EAAE,CAAC,GAAE,GAAEA,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIG,EAAE,EAAC,GAAE,EAAE,CAAC,GAAE,GAAE,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIA,EAAE,EAAC,GAAEK,EAAE,CAAC,GAAE,GAAEA,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIL,EAAE,EAAC,GAAEa,EAAE,CAAC,GAAE,GAAEA,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIb,EAAE,EAAC,GAAEU,EAAE,CAAC,GAAE,GAAEA,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,GAAE,IAAIV,EAAE,EAAC,GAAE,EAAE,CAAC,GAAE,GAAE,EAAE,CAAC,GAAE,kBAAiB,EAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,SAAK,UAAQ;AAAA,EAAE;AAAA,EAAC,eAAc;AAAC,SAAK,UAAQ;AAAA,EAAE;AAAA,EAAC,SAAQ;AAAC,SAAK,eAAe,UAAQ;AAAA,EAAE;AAAA,EAAC,SAAQ;AAAC,SAAK,eAAe,UAAQ;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,wBAAwB;AAAA,EAAO;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,wBAAwB;AAAA,EAAO;AAAA,EAAC,OAAM;AAAC,SAAK,wBAAwB,KAAI,GAAG,KAAK;EAAgB;AAAA,EAAC,OAAM;AAAC,SAAK,wBAAwB,QAAO,KAAK,eAAc;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,UAAK,EAAC,MAAK,GAAE,QAAO,EAAC,IAAE,MAAK,IAAE,kBAAiB,IAAE,EAAE,aAAa,SAAO,EAAE,UAASI,IAAE,KAAK,yBAAwBP,IAAEO,EAAE,KAAK,MAAM,CAAC,EAAE,UAAS,IAAE8B,GAAE,aAAaZ,EAAE,GAAE,EAAE,gBAAgB,GAAE,CAAC,EAAE,MAAM,CAAC,EAAE;AAAS,IAAAzB,EAAE,QAAQ,CAACF,GAAED,MAAI;AAAC,MAAAU,EAAE,kBAAkBT,GAAE,EAAED,CAAC,EAAE,GAAG;AAAA,IAAC,CAAC,GAAE,KAAK;EAAgB;AAAA,EAAC,QAAO;AAAC,UAAK,EAAC,QAAO,EAAC,IAAE;AAAK,QAAG,kBAAiB,GAAE;AAAC,YAAM,IAAE,EAAE;AAAa,MAAmB,EAAE,SAArB,qBAA4B,EAAE,gBAAc,KAAK;AAAA,IAAsB,MAAM,GAAE,WAAS,KAAK;AAAiB,SAAK,QAAO,GAAG,KAAK,iBAAiB,SAAO,GAAE,KAAK,iBAAiB,SAAO;AAAA,EAAC;AAAA,EAAC,iBAAgB;AAAC,UAAM,IAAE,KAAK,wBAAwB,KAAK;AAAS,IAAG,kBAAiB,KAAK,WAAQ,KAAK,OAAO,aAAa,SAAO,IAAE,KAAK,SAAS,WAAS,GAAE,KAAK,mBAAmB,WAAS,KAAK,4BAA2B,KAAK,eAAe,WAAS,KAAK,wBAAuB,KAAK,wBAAwB,QAAQ,CAACC,GAAED,MAAI;AAAC,WAAK,eAAeA,CAAC,EAAE,WAASC;AAAA,IAAC,CAAC;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAE;AAAC,SAAK,mBAAiB;AAAA,EAAC;AAAA,EAAC,mBAAmB,GAAE;AAAC,SAAK,mBAAiB;AAAA,EAAC;AAAA,EAAC,MAAM,cAAa;AAAC,UAAK,EAAC,MAAKA,GAAE,QAAOS,EAAC,IAAE;AAAK,QAAG,kBAAiBA,GAAE;AAAC,YAAMT,IAAES,EAAE;AAAa,WAAK,WAAS,IAAIV,EAAE,EAAC,UAASC,EAAE,OAAM,CAAC,GAAE,KAAK,wBAAyCA,EAAE,SAArB,mBAA0BA,EAAE,gBAAc;AAAA,IAAI,MAAM,MAAK,WAASS,GAAE,KAAK,mBAAiBA,EAAE;AAAST,IAAAA,EAAE,IAAI,QAAQ,CAAC,KAAK,cAAc,CAAC,GAAEA,EAAE,MAAK,GAAG,KAAK,UAAQ,IAAG,KAAK,mBAAkB,GAAG,MAAM,KAAK,sBAAqB,GAAG,KAAK,0BAAwBI,GAAE,aAAauB,EAAE,KAAK,SAAS,UAAS3B,EAAE,gBAAgB,GAAE,CAAC,GAAE,KAAK,qBAAmB,IAAID,EAAE,EAAC,QAAO,IAAIyC,GAAE,EAAC,OAAM,eAAc,SAAQ,EAAC,MAAK,eAAc,OAAMxC,EAAE,eAAe,aAAY,OAAM,EAAC,EAAC,CAAC,GAAE,UAAS,KAAK,2BAA0B,CAAC,GAAE,KAAK,iBAAe,IAAID,EAAE,EAAC,QAAO,IAAIwB,EAAE,EAAC,OAAMpB,GAAEH,EAAE,eAAe,WAAW,GAAE,SAAQ,EAAC,MAAK,eAAc,OAAMA,EAAE,eAAe,aAAY,OAAM,EAAC,EAAC,CAAC,GAAE,UAAS,KAAK,uBAAsB,CAAC,GAAE,KAAK,iBAAe,KAAK,wBAAwB,IAAI,OAAG,IAAID,EAAE,EAAC,QAAO,IAAIwB,EAAE,EAAC,MAAK,GAAE,OAAM,UAAS,OAAMpB,GAAEH,EAAE,eAAe,WAAW,GAAE,SAAQ,EAAC,MAAK,eAAc,OAAMA,EAAE,eAAe,aAAY,OAAM,EAAC,EAAC,CAAC,GAAE,UAAS,EAAC,CAAC,CAAC,GAAE,KAAK,eAAe,SAAS,QAAQ,CAAC,KAAK,oBAAmB,KAAK,gBAAe,GAAG,KAAK,cAAc,CAAC,GAAE,KAAK,oBAAkB,IAAIyC,GAAE,EAAC,MAAK,MAAK,MAAKzC,GAAE,SAAQ,KAAK,SAAQ,CAAC,GAAE,KAAK,sBAAoB,IAAIsB,GAAE,EAAC,MAAK,MAAK,MAAKtB,GAAE,SAAQ,KAAK,gBAAe,cAAa,KAAK,cAAa,CAAC,GAAE,KAAK,sBAAoB,KAAK,eAAe,IAAI,CAACD,GAAEI,MAAI,IAAIuC,GAAE,EAAC,MAAK,MAAK,MAAK1C,GAAE,SAAQD,GAAE,WAAUgC,GAAE5B,CAAC,GAAE,qBAAoB,KAAK,qBAAoB,CAAC,CAAC,GAAE,KAAK,WAAW,CAAC,KAAK,kBAAkB,mBAAmB,KAAK,SAAS,KAAK,IAAI,GAAE,KAAK,gBAAgB,KAAK,IAAI,CAAC,GAAE,KAAK,oBAAoB,mBAAmB,KAAK,SAAS,KAAK,IAAI,GAAE,KAAK,gBAAgB,KAAK,IAAI,CAAC,GAAE,GAAG,KAAK,oBAAoB,IAAI,CAAAH,MAAGA,EAAE,mBAAmB,KAAK,SAAS,KAAK,IAAI,GAAE,KAAK,gBAAgB,KAAK,IAAI,CAAC,CAAC,GAAEE,EAAE,MAAI,KAAK,KAAK,OAAM,MAAI,KAAK,SAAO,KAAK,mBAAiB,IAAI,GAAEF,EAAE,GAAG,SAAQ,OAAMD,MAAG;AAAC,UAASC,EAAE,cAAR,QAAoBA,EAAE,eAAa,KAAK;AAAO,YAAMG,IAAEwC,GAAE5C,CAAC,GAAEG,IAAE,CAAA;AAAGF,MAAAA,EAAE,IAAI,UAAU,QAAQ,CAAAA,MAAG;AAAC,QAAgBA,EAAE,SAAlB,iBAAoCA,EAAE,SAAd,aAAoBE,EAAE,KAAKF,CAAC;AAAA,MAAC,CAAC;AAAE,YAAMiB,IAAE,MAAM,KAAK,KAAK,QAAQd,GAAE,EAAC,SAAQD,EAAC,CAAC,GAAEQ,IAAEO,EAAE;AAAQ,UAAOP,EAAE,WAAN,EAAaV,CAAAA,EAAE,aAAW;AAAA,WAAS;AAAC,cAAMD,IAAE6C,GAAE3B,EAAE,OAAO,GAAEd,IAAE,kBAAiBM,GAAEP,IAAEQ,EAAE,IAAI,CAAAV,MAAaA,EAAE,SAAZ,UAAiBA,EAAE,UAAQ,IAAI,EAAE,OAAO,OAAO,GAAEkB,IAAE,IAAI,IAAI,CAAC,GAAG,KAAK,eAAe,UAASf,IAAE,OAAKM,CAAC,EAAE,OAAO,OAAO,CAAC;AAAE,QAAAN,KAAGD,EAAE,SAASO,CAAC,KAASV,KAAN,QAASmB,EAAE,IAAInB,EAAE,OAAO,IAAQC,EAAE,cAAR,SAAqBA,EAAE,aAAW,QAAMA,EAAE,aAAW;AAAA,MAAI;AAAA,IAAC,CAAC,CAAC,CAAC;AAAE,UAAMiB,IAAE,CAAAjB,MAAG;AAAC,WAAK,WAAWA,EAAE,OAAO,GAAG,gBAAe,CAAAA,MAAG;AAAC,0BAAiBS,MAAcT,EAAE,WAAZ,UAAmBS,EAAE,WAAS,MAAWT,EAAE,WAAV,UAAmBS,EAAE,WAAS;AAAA,MAAG,CAAC,CAAC;AAAA,IAAC;AAAE,SAAK,kBAAkB,mBAAmBQ,CAAC,GAAE,KAAK,oBAAoB,mBAAmBA,CAAC,GAAE,KAAK,oBAAoB,QAAQ,CAAAjB,MAAGA,EAAE,mBAAmBiB,CAAC,CAAC;AAAE,UAAM,IAAE,IAAI4B;AAAE,MAAE,UAAUC,EAAE,qBAAoB,MAAI;AAAC,MAAM,KAAK,uBAAX,SAAiC,KAAK,qBAAqB,UAAQ,CAAC,KAAK,qBAAqB;AAAA,IAAQ,CAAC,GAAE,EAAE,UAAUA,EAAE,kBAAiB,MAAI;AAAC,MAAM,KAAK,gBAAX,SAA0B,KAAK,cAAc,UAAQ,CAAC,KAAK,cAAc;AAAA,IAAQ,CAAC,GAAE,EAAE,IAAIA,EAAE,eAAc,MAAI;AAAC,wBAAiBrC,MAAIA,EAAE,WAAS,KAAK,oBAAkB,IAAE,KAAG,KAAK,oBAAkB,CAAC,KAAK;AAAA,IAAkB,CAAC,GAAE,EAAE,UAAUqC,EAAE,gBAAe,CAAA9C,MAAG,KAAK,UAAqBA,EAAE,SAAf,aAAoBiC,KAAED,EAAC,GAAE,EAAE,IAAIc,EAAE,SAAQ,MAAI,KAAK,OAAO,KAAK,OAAO,CAAC,GAAE,EAAE,IAAIA,EAAE,WAAU,MAAI,KAAK,OAAO,CAAC,KAAK,OAAO,CAAC,GAAE,EAAE,IAAIA,EAAE,QAAO,MAAI,KAAK,MAAM,GAAE,KAAK,OAAO,CAAC,GAAE,EAAE,IAAIA,EAAE,UAAS,MAAI,KAAK,MAAM,GAAE,CAAC,KAAK,OAAO,CAAC,GAAE,EAAE,IAAIA,EAAE,UAAS,MAAI,KAAK,MAAM,CAAC,KAAK,SAAQ,CAAC,CAAC,GAAE,EAAE,IAAIA,EAAE,WAAU,MAAI,KAAK,MAAM,KAAK,SAAQ,CAAC,CAAC,GAAE,KAAK,WAAW,CAAC9C,EAAE,GAAG,YAAW,CAAAD,MAAG;AAACC,MAAAA,EAAE,eAAa,QAAM,EAAE,SAASA,EAAE,cAAaD,CAAC;AAAA,IAAC,CAAC,GAAEC,EAAE,GAAG,UAAS,CAAAD,MAAG;AAACC,MAAAA,EAAE,eAAa,QAAM,EAAE,SAASA,EAAE,cAAaD,CAAC;AAAA,IAAC,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,MAAM,wBAAuB;AAAC,UAAM,IAAE,KAAK,SAAS;AAAS,WAAOgD,GAAE,EAAE,kBAAiB,KAAK,KAAK,gBAAgB;AAAA,EAAC;AAAA,EAAC,2BAA2B,GAAE;AAAC,UAAK,EAAC,QAAO,GAAE,QAAO,GAAE,QAAOtC,EAAC,IAAE,GAAEP,IAAE,KAAK;AAASI,IAAAA,EAAEJ,GAAEO,GAAE,CAAC,GAAEH,EAAEJ,GAAEA,GAAE,CAAC;AAAE,UAAM,IAAE,KAAK;AAASI,IAAAA,EAAE,GAAEG,GAAE,CAAC,GAAEK,EAAE,GAAE,GAAE,CAAC;AAAE,UAAMJ,IAAE,KAAK;AAASI,IAAAA,EAAEJ,GAAED,GAAE,CAAC,GAAEK,EAAEJ,GAAEA,GAAE,CAAC;AAAE,UAAMQ,IAAE,KAAK;AAASJ,IAAAA,EAAEI,GAAET,GAAE,CAAC,GAAEH,EAAEY,GAAEA,GAAE,CAAC;AAAA,EAAC;AAAA,EAAC,WAAU;AAAC,WAAM,EAAC,wBAAuB,KAAK,yBAAwB,OAAM,KAAK,QAAO,cAAa,KAAK,cAAa;AAAA,EAAC;AAAA,EAAC,gBAAgB,GAAE,GAAE;AAAC,IAAU,EAAE,WAAZ,YAAqB,KAAK,iBAAiB,KAAK,EAAC,MAAK,MAAK,WAAU,EAAC,CAAC,GAAE,KAAK,iBAAiB,SAAO,IAAG,KAAK;EAAgB;AAAA,EAAC,OAAO,GAAE;AAAC,UAAM,IAAE,KAAK,yBAAwB,IAAE,EAAE,KAAK,SAAS,QAAQ,OAAMT,KAAG,IAAE,IAAE,KAAK,KAAK,cAAY,GAAEP,IAAE,EAAE,MAAM,KAAK,OAAO,QAAOK,IAAEE,GAAEA,GAAE,GAAE,CAAC;AAAE,SAAK,iBAAiB,KAAK,EAAC,MAAK,MAAK,WAAUP,EAAC,CAAC,GAAE,KAAK,iBAAiB,SAAO,GAAE,KAAK,eAAc;AAAA,EAAE;AAAA,EAAC,MAAM,GAAE,GAAE;AAAC,UAAM,IAAE,KAAK,wBAAwB,KAAK,IAAE,KAAK,KAAK,YAAW,IAAE,KAAK,KAAK,YAAW,GAAE,CAAC;AAAE,SAAK,iBAAiB,KAAK,EAAC,MAAK,MAAK,WAAU,EAAC,CAAC,GAAE,KAAK,iBAAiB,SAAO,GAAE,KAAK,eAAc;AAAA,EAAE;AAAC;AAAEF,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,UAAS,IAAI,GAAElC,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,8BAA6B,IAAI,GAAElC,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,0BAAyB,IAAI,GAAElC,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,2BAA0B,IAAI,GAAElC,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,uBAAsB,MAAM,GAAElC,EAAE,CAACU,EAAC,CAAE,GAAEwB,EAAE,WAAU,gBAAe,MAAM,GAAElC,EAAE,CAACU,EAAE,EAAC,eAAc,IAAG,aAAY,GAAE,CAAC,CAAC,GAAEwB,EAAE,WAAU,UAAS,MAAM,GAAElC,EAAE,CAACU,EAAE,EAAC,UAAS,GAAE,CAAC,CAAC,GAAEwB,EAAE,WAAU,QAAO,MAAM,GAAElC,EAAE,CAACU,EAAE,EAAC,eAAc,GAAE,CAAC,CAAC,GAAEwB,EAAE,WAAU,QAAO,MAAM,GAAEA,IAAElC,EAAE,CAACkB,EAAE,sDAAsD,CAAC,GAAEgB,CAAC;ACAz9W,MAAMhB,IAAE,EAAC,MAAK,KAAI,MAAK,IAAG;AAAK,IAACN,IAAE,cAAcb,GAAC;AAAA,EAAC,YAAYG,GAAE;AAAC,UAAMA,CAAC,GAAE,KAAK,iBAAe,MAAK,KAAK,8BAA4B,MAAK,KAAK,6BAA2B,MAAK,KAAK,cAAY,MAAK,KAAK,mBAAiB,CAAA,GAAG,KAAK,mBAAiB,CAAA,GAAG,KAAK,mBAAiB,MAAK,KAAK,eAAa;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,UAAK,EAAC,MAAKA,GAAE,cAAa,GAAE,qBAAoBO,GAAE,cAAaN,GAAE,cAAaS,EAAC,IAAE;AAAK,SAAK,mBAAiB,EAAE,SAAQ,KAAK,iBAAe,IAAIK,EAAE,EAAC,QAAO,GAAE,MAAKf,GAAE,qBAAoBO,GAAE,cAAaN,EAAC,CAAC,GAAE,KAAK,8BAA4B,IAAIO,EAAE,EAAC,cAAa,GAAE,MAAKR,EAAC,CAAC,GAAE,KAAK,6BAA2B,IAAIQ,EAAE,EAAC,cAAaE,EAAE,cAAa,MAAKA,EAAE,KAAI,CAAC,GAAE,KAAK,eAAe,mBAAmB,KAAK,gBAAgB,GAAE,KAAK,eAAe,mBAAmB,KAAK,gBAAgB,GAAE,KAAK,4BAA4B,mBAAmB,KAAK,gBAAgB,GAAE,KAAK,4BAA4B,mBAAmB,KAAK,gBAAgB,GAAE,KAAK,2BAA2B,mBAAmB,KAAK,gBAAgB,GAAE,KAAK,2BAA2B,mBAAmB,KAAK,gBAAgB;AAAE,UAAMX,IAAE,EAAE,cAAae,IAAEJ,EAAE,aAAa;AAAa,IAAAA,EAAE,KAAK,MAAM,QAAQ,CAAC,KAAK,0BAA0B,CAAC,GAAE,mBAAkBI,KAAG,mBAAkBf,KAAG,KAAK,WAAW,CAACW,EAAE,KAAK,GAAG,YAAW,OAAG;AAAC,QAAE,QAAMM,EAAE,QAAM,KAAK,QAAO,MAAK,KAAK,KAAI,GAAG,EAAE,oBAAmB,EAAE,QAAMA,EAAE,QAAM,KAAK,QAAO,MAAK,KAAK,KAAI,GAAG,EAAE,gBAAe;AAAA,IAAG,CAAC,GAAEN,EAAE,KAAK,GAAG,SAAQ,OAAM,MAAG;AAAC,WAAK,4BAA4B,4BAA2B,GAAG,MAAM,KAAK,2BAA2B;IAAuB,CAAC,GAAEZ,EAAE,MAAIgB,EAAE,eAAc,OAAG;AAAC,MAAAf,EAAE,gBAAc,EAAE,IAAI,CAAC,EAAC,aAAYC,EAAC,GAAEH,OAAK,EAAC,aAAYG,GAAE,UAASD,EAAE,cAAcF,CAAC,EAAE,SAAQ,EAAE,GAAE,KAAK,aAAa,QAAO;AAAA,IAAE,CAAC,GAAEC,EAAE,MAAI,KAAK,4BAA4B,cAAa,OAAG;AAAC,WAAK,2BAA2B,mBAAmB,CAAC,GAAE,KAAK,eAAa;AAAA,IAAC,CAAC,GAAEA,EAAE,MAAI,KAAK,2BAA2B,cAAa,OAAG;AAAC,WAAK,4BAA4B,mBAAmB,CAAC,GAAE,KAAK,eAAa;AAAA,IAAC,CAAC,CAAC,CAAC,GAAE,KAAK,WAAW,CAACE,EAAE,GAAG,YAAW,OAAG;AAAC,QAAE,QAAMgB,EAAE,QAAM,KAAK,cAAY,KAAK,KAAI,GAAG,EAAE,gBAAe,IAAI,EAAE,QAAMA,EAAE,QAAM,KAAK,QAAO,MAAK,KAAK,KAAI,GAAG,EAAE,gBAAe;AAAA,IAAG,CAAC,GAAEhB,EAAE,GAAG,SAAQ,OAAM,MAAG;AAAC,WAAK,2BAA2B,4BAA2B,GAAG,MAAM,KAAK,4BAA4B,sBAAqB;AAAA,IAAE,CAAC,CAAC,CAAC,GAAEA,EAAE,MAAM,QAAQ,CAAC,KAAK,gBAAe,KAAK,2BAA2B,CAAC,GAAEA,EAAE,aAAW,KAAK,gBAAe,KAAK,cAAY,KAAK,gBAAeA,EAAE,MAAK;AAAA,EAAE;AAAA,EAAC,UAAS;AAAC,SAAK,gBAAgB,QAAO,GAAG,KAAK,6BAA6B,QAAO,GAAG,KAAK,iBAAe,MAAK,KAAK,8BAA4B,MAAK,KAAK,6BAA2B,MAAK,KAAK,cAAY,MAAK,KAAK,mBAAiB,MAAK,KAAK,mBAAiB;AAAA,EAAI;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,iBAAiB,SAAO;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,WAAO,KAAK,iBAAiB,SAAO;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,QAAG,KAAK,iBAAiB,SAAO,GAAE;AAAC,YAAK,EAAC,MAAKA,GAAE,WAAU,EAAC,IAAE,KAAK,iBAAiB,IAAG;AAAG,MAAAA,MAAI,KAAK,eAAaA,EAAE,QAAO,GAAG,EAAE,KAAI,GAAGA,EAAE,eAAc,GAAG,KAAK,iBAAiB,KAAK,EAAC,MAAKA,GAAE,WAAU,EAAC,CAAC,GAAE,KAAK,gBAAcA,KAAG,KAAK,aAAa,QAAO;AAAA,IAAE;AAAA,EAAC;AAAA,EAAC,OAAM;AAAC,QAAG,KAAK,iBAAiB,SAAO,GAAE;AAAC,YAAK,EAAC,MAAKA,GAAE,WAAU,EAAC,IAAE,KAAK,iBAAiB,IAAG;AAAG,MAAAA,MAAI,KAAK,eAAaA,EAAE,QAAO,GAAG,EAAE,MAAK,GAAGA,EAAE,kBAAiB,KAAK,iBAAiB,KAAK,EAAC,MAAKA,GAAE,WAAU,EAAC,CAAC,GAAE,KAAK,gBAAcA,KAAG,KAAK,aAAa,QAAO;AAAA,IAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,YAAY,QAAO;AAAA,EAAE;AAAA,EAAC,QAAO;AAAC,SAAK,YAAY,MAAK,GAAG,KAAK,2BAA2B,MAAK;AAAA,EAAE;AAAA,EAAC,MAAM,qBAAoB;AAAC,SAAK,KAAK,aAAW,KAAK,6BAA4B,KAAK,cAAY,KAAK,6BAA4B,KAAK,YAAY,QAAO,GAAG,MAAM,KAAK,aAAa,KAAK,KAAI,GAAG,KAAK,aAAa,KAAK,aAAW,KAAK,4BAA2B,KAAK,mBAAiB,KAAK,4BAA4B,aAAa,SAAQ,KAAK,4BAA4B,aAAa,UAAQ,OAAI,KAAK;AAAA,EAAgB;AAAA,EAAC,sBAAqB;AAAC,SAAK,KAAK,aAAW,KAAK,gBAAe,KAAK,cAAY,KAAK,gBAAe,KAAK,YAAY,WAAU,KAAK,aAAa,KAAK,aAAW,MAAK,KAAK,4BAA4B,aAAa,UAAQ,KAAK;AAAA,EAAgB;AAAC;AAAEA,EAAE,CAACO,EAAC,CAAE,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEV,EAAE,CAACO,EAAE,EAAC,eAAc,GAAE,CAAC,CAAC,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEV,EAAE,CAACO,EAAC,CAAE,GAAEG,EAAE,WAAU,uBAAsB,MAAM,GAAEV,EAAE,CAACO,EAAC,CAAE,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEV,EAAE,CAACO,EAAE,EAAC,eAAc,IAAG,aAAY,GAAE,CAAC,CAAC,GAAEG,EAAE,WAAU,gBAAe,MAAM,GAAEV,EAAE,CAACO,EAAE,EAAC,eAAc,GAAE,CAAC,CAAC,GAAEG,EAAE,WAAU,QAAO,MAAM,GAAEA,IAAEV,EAAE,CAACC,EAAE,mEAAmE,CAAC,GAAES,CAAC;","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}