import{n as l}from"./enum-BVcvu-V3.js";import{n as S}from"./TimeOnly-DMbsPjUX.js";import{J as d,o as m,U as i,g as p,B as o}from"./Dictionary-BlU901XL.js";import{s as c,a as w}from"./SpatialFilter-zTciIv6Y.js";import{a as s}from"./operatorsWorkerConnection-Bkh3aBJ3.js";function u(a){return async(r,e,t)=>{if(m(t,2,2,r,e),(t=d(t))[0]===null&&t[1]===null)return!1;if(o(t[0])){if(i(t[1]))return new w({parentfeatureset:t[0],relation:a,relationGeom:t[1]});if(t[1]===null)return new c({parentfeatureset:t[0]});throw new l(r,"InvalidParameter",e)}if(i(t[0])){if(i(t[1])){switch(a){case"esriSpatialRelEnvelopeIntersects":{const f=S(t[0]),n=S(t[1]);return f!=null&&n!=null&&s("intersects",[f.toJSON(),n.toJSON()])}case"esriSpatialRelIntersects":return s("intersects",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelContains":return s("contains",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelOverlaps":return s("overlaps",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelWithin":return s("within",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelTouches":return s("touches",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelCrosses":return s("crosses",[t[0].toJSON(),t[1].toJSON()])}throw new l(r,"InvalidParameter",e)}if(o(t[1]))return new w({parentfeatureset:t[1],relation:a,relationGeom:t[0]});if(t[1]===null)return!1;throw new l(r,"InvalidParameter",e)}if(t[0]===null){if(o(t[1]))return new c({parentfeatureset:t[1]});if(i(t[1])||t[1]===null)return!1}throw new l(r,"InvalidParameter",e)}}function J(a){a.mode==="async"&&(a.functions.intersects=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelIntersects"))},a.functions.envelopeintersects=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelEnvelopeIntersects"))},a.signatures.push({name:"envelopeintersects",min:2,max:2}),a.functions.contains=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelContains"))},a.functions.overlaps=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelOverlaps"))},a.functions.within=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelWithin"))},a.functions.touches=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelTouches"))},a.functions.crosses=function(r,e){return a.standardFunctionAsync(r,e,u("esriSpatialRelCrosses"))},a.functions.relate=function(r,e){return a.standardFunctionAsync(r,e,async(t,f,n)=>{if(n=d(n),m(n,3,3,r,e),i(n[0])&&i(n[1]))return s("relate",[n[0].toJSON(),n[1].toJSON(),p(n[2])]);if(i(n[0])&&n[1]===null||i(n[1])&&n[0]===null)return!1;if(o(n[0])&&n[1]===null)return new c({parentfeatureset:n[0]});if(o(n[1])&&n[0]===null)return new c({parentfeatureset:n[1]});if(o(n[0])&&i(n[1]))return n[0].relate(n[1],p(n[2]));if(o(n[1])&&i(n[0]))return n[1].relate(n[0],p(n[2]));if(n[0]===null&&n[1]===null)return!1;throw new l(r,"InvalidParameter",e)})})}export{J as registerFunctions};
