{"version":3,"file":"geojson-RdUhWqcJ.js","sources":["../../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isISO8601Date as e}from\"../../../../core/date.js\";import t from\"../../../../core/Error.js\";import{isWGS84 as n}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{OptimizedFeature as o}from\"../../OptimizedFeature.js\";import r from\"../../OptimizedGeometry.js\";import{normalizeFieldName as i,isNumericField as s}from\"../../../support/fieldUtils.js\";const c={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function u(e){return c[e]}function*l(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*f(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*p(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const s of e){const{geometry:e,properties:c,id:l}=s;if(e&&u(e.type)!==n)continue;const f=c||{};let p;i&&(p=f[i],null==l||p||(f[i]=p=l));const a=new o(e?h(new r,e,t):null,f,null,p);yield a}}function a(e){for(const t of e)if(t.length>2)return!0;return!1}function y(e){return!g(e)}function d(e){return g(e)}function g(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function m(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case\"LineString\":return w(e,t,n);case\"MultiLineString\":return P(e,t,n);case\"MultiPoint\":return j(e,t,n);case\"MultiPolygon\":return b(e,t,n);case\"Point\":return S(e,t,n);case\"Polygon\":return F(e,t,n)}}function w(e,t,n){return M(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates)M(e,o,n);return e}function j(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){for(const o of t.coordinates){G(e,o[0],n);for(let t=1;t<o.length;t++)k(e,o[t],n)}return e}function S(e,t,n){return O(e,t.coordinates,n),e}function F(e,t,n){const o=t.coordinates;G(e,o[0],n);for(let r=1;r<o.length;r++)k(e,o[r],n);return e}function G(e,t,n){const o=m(t);y(o)?T(e,o,n):M(e,o,n)}function k(e,t,n){const o=m(t);d(o)?T(e,o,n):M(e,o,n)}function M(e,t,n){for(const o of t)O(e,o,n);e.lengths.push(t.length)}function T(e,t,n){for(let o=t.length-1;o>=0;o--)O(e,t[o],n);e.lengths.push(t.length)}function O(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function L(t){switch(typeof t){case\"string\":return e(t)?\"esriFieldTypeDate\":\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function E(e,o=4326){if(!e)throw new t(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==e.type&&\"FeatureCollection\"!==e.type)throw new t(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:e});const{crs:r}=e;if(!r)return;const i=\"string\"==typeof r?r:\"name\"===r.type?r.properties.name:\"EPSG\"===r.type?r.properties.code:null,s=n({wkid:o})?new RegExp(\".*(CRS84H?|4326)$\",\"i\"):new RegExp(`.*(${o})$`,\"i\");if(!i||!s.test(i))throw new t(\"geojson:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:r})}function I(e,t={}){const n=[],o=new Set,r=new Set;let c,p=!1,y=null,d=!1,{geometryType:g=null}=t;for(const s of l(e)){const{geometry:e,properties:t,id:l}=s;if(!e||(g||(g=u(e.type)),u(e.type)===g)){if(!p){p=a(f(e))}if(d||(d=null!=l,d&&(c=typeof l,t&&(y=Object.keys(t).filter((e=>t[e]===l))))),t&&y&&d&&null!=l&&(y.length>1?y=y.filter((e=>t[e]===l)):1===y.length&&(y=t[y[0]]===l?y:[])),t)for(const e in t){if(o.has(e))continue;const s=L(t[e]);if(\"unknown\"===s){r.add(e);continue}r.delete(e),o.add(e);const c=i(e);c&&n.push({name:c,alias:e,type:s})}}}const m=i(1===y?.length&&y[0]||null)??void 0;if(m)for(const i of n)if(i.name===m&&s(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:p,objectIdFieldName:m,objectIdFieldType:c,unknownFields:Array.from(r)}}function N(e,t){return Array.from(p(l(e),t))}export{N as createOptimizedFeatures,u as getGeometryType,I as inferLayerProperties,E as validateGeoJSON};\n"],"names":["c","u","e","l","t","f","p","n","i","s","o","h","r","a","y","g","d","m","w","P","j","b","S","F","M","G","k","O","T","L","E","I","N"],"mappings":"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","x_google_ignoreList":[0]}