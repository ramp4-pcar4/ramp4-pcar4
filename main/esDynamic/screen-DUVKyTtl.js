import{fy as E,fz as j,fK as I,e8 as m,fU as O,e9 as c,ea as r,fD as k,fW as T,fG as i,fM as S,fL as V,fH as L,i5 as J,jp as K,e7 as U,im as A,fC as B,ar as x,fP as D,fQ as F,fT as G,fE as H,iH as P,ip as Q,iq as W,jq as N,fI as X,fJ as Y,fV as Z,fF as ee,fS as ne,iJ as ae}from"./main-6gYsRPh_.js";import{k as _}from"./marked.esm-CM0Cz8j8.js";const te={key:0},le=["content"],se={class:"text-lg text-left flex-grow"},re=["innerHTML"],oe=E({__name:"section",props:{helpSection:{type:Object,required:!0}},setup(p){const{t:w}=j();return(g,o)=>{const u=I("tippy");return p.helpSection.drawn?(c(),m("div",te,[r("div",null,[k((c(),m("button",{type:"button",class:"help-section-header flex items-center py-15 px-25 hover:bg-gray-200 cursor-pointer select-none w-full",onClick:o[0]||(o[0]=d=>g.$emit("expand")),content:i(w)(p.helpSection.expanded?"help.section.collapse":"help.section.expand")},[r("span",se,S(p.helpSection.header),1),r("div",{class:V(["dropdown-icon",{"transform -rotate-180":p.helpSection.expanded}])},o[1]||(o[1]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[r("path",{d:"M0 0h24v24H0V0z",fill:"none"}),r("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)],8,le)),[[u,{placement:"top-end",hideOnClick:!1}]]),T(K,{name:"help-item",mode:"out-in"},{default:L(()=>[k(r("div",{innerHTML:p.helpSection.info,class:"ramp-markdown section-body px-20 pt-5 ml-10 overflow-hidden"},null,8,re),[[J,p.helpSection.expanded]])]),_:1})])])):O("",!0)}}}),pe=U(oe,[["__scopeId","data-v-7dc61532"]]),ie={class:"h-26 mb-8 mx-8"},de=["placeholder","aria-label"],ce={key:0},ue=E({__name:"screen",props:{panel:{type:Object,required:!0}},setup(p){const w=ne("iApi"),g=A(),{t:o}=j(),u=B(()=>g.location),d=x([]),y=x([]),$=x([]),C=x(!1);let f,h;function M(e,t){const n=t.info.split(/(<[^>]*>)/);for(const[a,l]of n.entries())if(a%2===0&&l.toLowerCase().indexOf(e.toLowerCase())>-1)return!0;return!1}function q(e,t){const n=y.value[t].split(/(<[^>]*>)/);let a="";for(const[l,s]of n.entries())l%2===0?a+=s.replace(new RegExp(e,"gi"),b=>`<mark>${b}</mark>`):a+=s;d.value[t].info=a}function R(e,t){f=0,t.forEach((n,a)=>{n.info=y.value[a],n.drawn=M(e,n)||n.header.toLowerCase().indexOf(e.toLowerCase())>-1,f=n.drawn?f+1:f,n.expanded=n.drawn&&e.length>2,n.drawn&&e.length>2&&q(e,a)}),C.value=f===0}function z(e){e.expanded=!e.expanded}return D(()=>{$.value.push(F(()=>w.language,(e,t)=>{if(e===t)return;const n=new _.Renderer,a=u.value.slice(-1)==="/"?u.value:`${u.value}/`;n.image=l=>{let s=l.href;return s.indexOf("http")===-1&&(s=`${a}images/`+s),`<img src="${s}" alt="${l.text}">`},ae.get(`${a}${e}.md`).then(l=>{const s=/^#\s(.*)\n{2}(?:.+|\n(?!\n{2,}))*/gm,b=l.data.replace(new RegExp("\r","g"),"");d.value=[];let v;for(;v=s.exec(b);)d.value.push({header:v[1],info:_(v[0].split(`
`).splice(2).join(`
`),{renderer:n}),drawn:!0,expanded:!1}),y.value.push(_(v[0].split(`
`).splice(2).join(`
`),{renderer:n}))})},{immediate:!0}))}),G(()=>{$.value.forEach(e=>e())}),(e,t)=>{const n=ee("panel-screen");return c(),H(n,{panel:p.panel},{header:L(()=>[Z(S(i(o)("help.title")),1)]),content:L(()=>[r("div",ie,[k(r("input",{type:"search",class:"rv-help-search-bar border-b w-full text-base py-8 outline-none focus:shadow-outline border-gray-600 h-full min-w-0",placeholder:i(o)("help.search"),"onUpdate:modelValue":t[0]||(t[0]=a=>N(h)?h.value=a:h=a),"aria-label":i(o)("help.search"),onInput:t[1]||(t[1]=a=>R(i(h),d.value)),onKeypress:t[2]||(t[2]=Q(W(()=>{},["prevent"]),["enter"])),enterkeyhint:"done"},null,40,de),[[P,i(h)]])]),C.value?(c(),m("div",ce,[r("p",null,S(i(o)("help.noResults")),1)])):O("",!0),(c(!0),m(Y,null,X(d.value,(a,l)=>(c(),H(pe,{helpSection:a,key:l,onExpand:s=>z(a)},null,8,["helpSection","onExpand"]))),128))]),_:1},8,["panel"])}}});export{ue as default};
