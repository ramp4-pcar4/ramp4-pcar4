import{az as i,aJ as _}from"./main-6gYsRPh_.js";import{o as p,r as Q,P as r,u as w,g as y,I as B,_ as A,A as v,c as b,H as G}from"./vec32-y2_p7lFt.js";import"./vec42-CDRvr0BM.js";import{r as C,c as f,f as K}from"./vectorStacks-CyMHHyHf.js";function D(a){const n=a[0]*a[0]+a[4]*a[4]+a[8]*a[8],o=a[1]*a[1]+a[5]*a[5]+a[9]*a[9],t=a[2]*a[2]+a[6]*a[6]+a[10]*a[10];return Math.sqrt(Math.max(n,o,t))}function E(a,n){const o=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),t=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),s=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return p(a,o,t,s),a}function R(a,n,o){Math.abs(a[0])>Math.abs(a[1])?p(n,0,1,0):p(n,1,0,0),A(o,a,n),A(n,o,a),v(o,o),v(n,n)}function F(a,n,o,t=i()){const s=Q(a),u=Q(n),e=r(a,n)/(s*u);if(e<.9999999999999999){const c=Math.acos(e),h=((1-o)*s+o*u)/Math.sin(c),m=h/s*Math.sin((1-o)*c),M=h/u*Math.sin(o*c);return y(S,a,m),y(T,n,M),w(t,S,T)}return B(t,a,n,o)}const S=i(),T=i();function L(a=$){return[a[0],a[1],a[2],a[3]]}function V(a=$[0],n=$[1],o=$[2],t=$[3]){return N(a,n,o,t,C.get())}function U(a,n){return N(n[0],n[1],n[2],n[3],a)}function Z(a){return a}function N(a,n,o,t,s=L()){return s[0]=a,s[1]=n,s[2]=o,s[3]=t,s}function W(a,n,o){const t=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],s=Math.abs(t-1)>1e-5&&t>1e-12?1/Math.sqrt(t):1;return o[0]=n[0]*s,o[1]=n[1]*s,o[2]=n[2]*s,o[3]=-(o[0]*a[0]+o[1]*a[1]+o[2]*a[2]),o}function X(a,n,o,t=L()){const s=o[0]-n[0],u=o[1]-n[1],e=o[2]-n[2],c=a[0]-n[0],h=a[1]-n[1],m=a[2]-n[2],M=u*m-e*h,J=e*c-s*m,P=s*h-u*c,j=M*M+J*J+P*P,k=Math.abs(j-1)>1e-5&&j>1e-12?1/Math.sqrt(j):1;return t[0]=M*k,t[1]=J*k,t[2]=P*k,t[3]=-(t[0]*a[0]+t[1]*a[1]+t[2]*a[2]),t}function O(a,n,o,t=0,s=Math.floor(o*(1/3)),u=Math.floor(o*(2/3))){if(o<3)return!1;n(d,t);let e=s,c=!1;for(;e<o-1&&!c;)n(l,e),e++,c=!G(d,l);if(!c)return!1;for(e=Math.max(e,u),c=!1;e<o&&!c;)n(g,e),e++,b(z,d,l),v(z,z),b(H,l,g),v(H,H),c=!G(d,g)&&!G(l,g)&&Math.abs(r(z,H))<nn;return c?(X(d,l,g,a),!0):(t!==0||s!==1||u!==2)&&O(a,n,o,0,1,2)}function Y(a,n,o=!0){const t=n.length/3;return O(a,(s,u)=>p(s,n[3*u+0],n[3*u+1],n[3*u+2]),o?t-1:t)}const nn=.99619469809,d=i(),l=i(),g=i(),z=i(),H=i();function an(a,n,o){return n!==a&&U(a,n),a[3]=-r(a,o),a}function on(a,n){return n[0]=-a[0],n[1]=-a[1],n[2]=-a[2],n[3]=-a[3],n}function tn(a,n,o,t){return A(g,n,a),W(o,g,t)}function sn(a,n,o,t){return I(x(a,n,b(f.get(),o,n),ln,t))}function cn(a,n,o){return n!=null&&I(x(a,n.origin,n.direction,qn,o))}function en(a,n,o){return I(x(a,n.origin,n.vector,0,o))}function un(a,n,o){return I(x(a,n.origin,n.vector,1,o))}function rn(a,n){return q(a,n)>=0}function fn(a,n){const o=r(a,n.ray.direction),t=-q(a,n.ray.origin);if(t<0&&o>=0)return!1;if(o>-1e-6&&o<1e-6)return t>0;if((t<0||o<0)&&!(t<0&&o<0))return!0;const s=t/o;return o>0?s<n.c1&&(n.c1=s):s>n.c0&&(n.c0=s),n.c0<=n.c1}function hn(a,n){const o=r(a,n.ray.direction),t=-q(a,n.ray.origin);if(o>-1e-6&&o<1e-6)return t>0;const s=t/o;return o>0?s<n.c1&&(n.c1=s):s>n.c0&&(n.c0=s),n.c0<=n.c1}function Mn(a,n,o){const t=y(f.get(),a,-a[3]),s=mn(a,b(f.get(),n,t),f.get());return w(o,s,t),o}function gn(a,n,o,t){const s=a,u=f.get(),e=f.get();R(s,u,e);const c=b(f.get(),o,n),h=K(u,c),m=K(e,c),M=K(s,c);return p(t,h,m,M)}function mn(a,n,o){const t=y(f.get(),a,r(a,n));return b(o,n,t),o}function bn(a,n){return Math.abs(q(a,n))}function q(a,n){return r(a,n)+a[3]}function I(a){return a===0||a===1}function x(a,n,o,t,s){const u=r(a,o),e=q(a,n);if(u===0)return e>=0?2:3;let c=-e/u;return 1&t&&(c=_(c,0,1)),!(4&t)&&c<0||!(8&t)&&c>1?e>=0?2:3:(w(s,n,y(s,o,c)),e>=0?0:1)}const $=[0,0,1,0],ln=12,qn=8;export{an as G,on as H,tn as I,sn as J,cn as K,en as L,un as N,rn as O,fn as P,hn as Q,Mn as R,O as S,gn as T,W as U,bn as W,q as X,x as Z,R as a,F as b,V as d,E as g,L as j,Z as k,D as m,N as q,X as w,U as y,Y as z};
