{"version":3,"file":"cutOperator-DUhdyFmg.js","sources":["../../node_modules/@arcgis/core/chunks/OperatorCut.js","../../node_modules/@arcgis/core/geometry/operators/gx/operatorCut.js","../../node_modules/@arcgis/core/chunks/cutOperator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{G as t}from\"./SimpleGeometryCursor.js\";import{G as e,d as s,g as n}from\"./Geometry.js\";import{P as r,a as o,E as m,n as i}from\"./MultiPathImpl.js\";import{g as u,c}from\"./Envelope.js\";import{l,m as h,n as a,T as d,o as p,C as y}from\"./ProjectionTransformation.js\";var _=y;function g(t,e){return{m_geometry:t,m_side:e}}function f(t,e,s,n,r,o){if(e.isEmpty()){const t=g(e,0);return void r.push(t)}if(s.isEmpty()){const t=g(e,0);return void r.push(t)}const i=[],u=new m;{const m=u.createGeometryUserIndex(),c=u.addGeometry(e),y=u.addGeometry(s),f=new d(o);let C=0,E=null;if(u.hasCurves()){E=new _;const t=u.getEnvelope2D(o);C=l(n.total());const e=h(n.total(),t);a(u,e,n.total(),12e3,E,null,o)}u.dbgVerifyCurves(),f.setEditShapeCrackAndCluster(u,n),f.cut(t,m,c,y,i);for(const t of i){null!==E&&E.stitchCurves(u,t,C,!1);const e=g(u.getGeometry(t),p(u.getGeometryUserIndex(t,m)));r.push(e)}null!==E&&E.clearStitcher(u)}}function C(t,e,s,n,r,u){if(e.isEmpty()){const t=g(e,0);return void r.push(t)}if(s.isEmpty()){const t=g(e,0);return void r.push(t)}const c=[],p=new m;{const t=p.createGeometryUserIndex(),y=p.addGeometry(e),f=p.addGeometry(s),C=new d(u);let E=0,G=null;if(p.hasCurves()){G=new _;const t=p.getEnvelope2D(u);E=l(n.total());const e=h(n.total(),t);a(p,e,n.total(),12e3,G,null,u)}p.dbgVerifyCurves(),C.setEditShapeCrackAndCluster(p,n),C.cut(!1,t,y,f,c),null!==G&&G.stitchCurves(p,i,E,!0);let v=p.getGeometry(y);const w=new o,x=new o,I=[];for(let e=0;e<c.length;e++){let s=null;{const r=new m,o=r.addGeometry(v),d=r.addGeometry(p.getGeometry(c[e]));if(r.hasCurves()){const t=r.getEnvelope2D(u);E=l(n.total());const e=h(n.total(),t);a(r,e,n.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(r,n);const y=C.intersection(o,d);if(null!==G&&G.stitchCurves(r,i,E,!0),s=r.getGeometry(y),s.isEmpty())continue;const _=p.getGeometryUserIndex(c[e],t);2===_?w.add(s,!1):1===_?x.add(s,!1):I.push(s)}{const t=new m,s=t.addGeometry(v),r=t.addGeometry(p.getGeometry(c[e]));if(t.hasCurves()){const e=t.getEnvelope2D(u);E=l(n.total());const s=h(n.total(),e);a(t,s,n.total(),12e3,G,null,u)}C.setEditShapeCrackAndCluster(t,n);const o=C.difference(s,r);null!==G&&G.stitchCurves(t,i,E,!0);v=t.getGeometry(o)}}if(!v.isEmpty()&&c.length>0&&I.push(v),w.isEmpty()&&x.isEmpty())return;if(!w.isEmpty()){const t=g(w,1);r.push(t)}if(!x.isEmpty()){const t=g(x,2);r.push(t)}for(let e=0,s=I.length;e<s;++e){const t=g(I[e],3);r.push(t)}}}class E{getOperatorType(){return 10005}accelerateGeometry(t,e,s){return!1}canAccelerateGeometry(t){return!1}supportsCurves(){return!0}execute(t,e,s,n,r){return new G(t,e,s,n,r)}}class G extends t{constructor(t,e,s,n,o){super(),this.m_cutIndex=-1,this.m_cuts=[],this.m_progressTracker=o,this.m_cuttee=e.clone(),this.m_cutter=new r({copy:s}),this.m_bConsiderTouch=t;const m=u(e,s);this.m_tolerance=c(n,m,!0)}next(){return-1===this.m_cutIndex&&this.generateCuts(),++this.m_cutIndex<this.m_cuts.length?this.m_cuts[this.m_cutIndex]:null}getGeometryID(){return this.m_cutIndex}tock(){return!0}getRank(){return 1}generateCuts(){switch(this.m_cuttee.getGeometryType()){case e.enumPolyline:this.generatePolylineCuts();break;case e.enumPolygon:this.generatePolygonCuts()}}generatePolylineCuts(){const t=new r,e=new r,n=new r;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const o=[];f(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,o,this.m_progressTracker);for(let r=0;r<o.length;r++){const m=o[r];1===m.m_side?t.add(m.m_geometry,!1):2===m.m_side||4===m.m_side?e.add(m.m_geometry,!1):3===m.m_side?this.m_cuts.push(m.m_geometry):0===m.m_side?n.add(m.m_geometry,!1):s(\"\")}n.isEmpty()||t.isEmpty()&&e.isEmpty()&&!(this.m_cuts.length>=3)||this.m_cuts.push(n),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}generatePolygonCuts(){const t=new o,e=new o,r=new o;this.m_cuts.length=0,this.m_cuts.push(t),this.m_cuts.push(e);const m=[];C(this.m_bConsiderTouch,this.m_cuttee,this.m_cutter,this.m_tolerance,m,this.m_progressTracker);for(let n=0;n<m.length;n++){const o=m[n];1===o.m_side?t.add(o.m_geometry,!1):2===o.m_side?e.add(o.m_geometry,!1):3===o.m_side?this.m_cuts.push(o.m_geometry):0===o.m_side?r.add(o.m_geometry,!1):s(\"\")}n(r.isEmpty()||1===m.length),t.isEmpty()&&e.isEmpty()&&this.m_cuts.length<3&&(this.m_cuts.length=0)}}export{E as O};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{O as r}from\"../../../chunks/OperatorCut.js\";const t=new r;function n(r,n,o){const u=t.execute(!0,r,n,o,null);return Array.from(u)}function o(){return t.supportsCurves()}export{n as execute,o as supportsCurves};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../core/arrayUtils.js\";import{supportsCurves as e,execute as o}from\"../geometry/operators/gx/operatorCut.js\";import{getSpatialReference as t,fromSpatialReference as s,fromPolyline as p,fromGeometry as a,toGeometry as u}from\"../geometry/operators/support/apiConverter.js\";function m(e,m){const c=t(e);return o(a(e),p(m),s(c)).map((r=>u(r,c))).filter(r)}const c=e(),i=Object.freeze(Object.defineProperty({__proto__:null,execute:m,supportsCurves:c},Symbol.toStringTag,{value:\"Module\"}));export{i as c,m as e,c as s};\n"],"names":["_","y","g","t","f","s","n","r","o","i","u","m","c","d","C","E","l","e","h","a","p","G","v","w","x","I"],"mappings":"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","x_google_ignoreList":[0,1,2]}