{"version":3,"file":"Legend-B0lNJARs.js","sources":["../../node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/relationshipRampUtils.js","../../node_modules/@arcgis/core/smartMapping/renderers/support/referenceSizeUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/clusterUtils.js","../../node_modules/@arcgis/core/smartMapping/renderers/support/spikeUtils.js","../../node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js","../../node_modules/@arcgis/core/widgets/smartMapping/support/utils.js","../../node_modules/@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js","../../node_modules/@arcgis/core/widgets/Legend/LegendViewModel.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/css.js","../../node_modules/@arcgis/core/widgets/Legend/support/styleUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/utils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/sizeRampUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/support/univariateUtils.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/card/CardView.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/css.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ColorRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/SizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateAboveAndBelowRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/UnivariateColorSizeRamp.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/LegendElement.js","../../node_modules/@arcgis/core/widgets/Legend/styles/classic/ClassicView.js","../../node_modules/@arcgis/core/widgets/Legend.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{generateFillAttributes as e,renderDef as a,renderShape as l,getBoundingBox as r,computeBBox as t,getTransformMatrix as o,generateStrokeAttributes as s}from\"../../../../symbols/support/svgUtils.js\";import{isRTL as i,classes as n}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const m=\"esri-relationship-ramp\",b=`${m}--diamond`,u=`${m}--square`,c=\"http://www.w3.org/2000/svg\",f={diamondContainer:`${b}__container`,diamondLeftCol:`${b}__left-column`,diamondRightCol:`${b}__right-column`,diamondMidCol:`${b}__middle-column`,diamondMidColLabel:`${b}__middle-column--label`,diamondMidColRamp:`${b}__middle-column--ramp`,squareTable:`${u}__table`,squareTableRow:`${u}__table-row`,squareTableCell:`${u}__table-cell`,squareTableLabel:`${u}__table-label`,squareTableLabelLeftBottom:`${u}__table-label--left-bottom`,squareTableLabelRightBottom:`${u}__table-label--right-bottom`,squareTableLabelLeftTop:`${u}__table-label--left-top`,squareTableLabelRightTop:`${u}__table-label--right-top`};function k(e,a,l={}){const{focus:r,labels:t}=e,o=!!r,s=h(e,a,l),m={justifyContent:\"center\"},b=i(),u=l.key??a;return o?d(\"div\",{class:f.diamondContainer,key:`${u}-container`,styles:m},d(\"div\",{class:f.diamondLeftCol},b?t.right:t.left),d(\"div\",{class:f.diamondMidCol},d(\"div\",{class:f.diamondMidColLabel},t.top),s,d(\"div\",{class:f.diamondMidColLabel},t.bottom)),d(\"div\",{class:f.diamondRightCol},b?t.left:t.right)):d(\"div\",{class:f.squareTable,key:`${u}-container`},d(\"div\",{class:f.squareTableRow},d(\"div\",{class:n(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},b?t.top:t.left),d(\"div\",{class:f.squareTableCell}),d(\"div\",{class:n(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},b?t.left:t.top)),d(\"div\",{class:f.squareTableRow},d(\"div\",{class:f.squareTableCell}),s,d(\"div\",{class:f.squareTableCell})),d(\"div\",{class:f.squareTableRow},d(\"div\",{class:n(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},b?t.right:t.bottom),d(\"div\",{class:f.squareTableCell}),d(\"div\",{class:n(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},b?t.bottom:t.right)))}function p(e,a,l){const r=`${l}_arrowStart`,t=`${l}_arrowEnd`,o=\"left\"===e,s={markerStart:null,markerEnd:null};switch(a){case\"HL\":o?s.markerStart=`url(#${t})`:s.markerEnd=`url(#${r})`;break;case\"LL\":s.markerStart=`url(#${t})`;break;case\"LH\":o?s.markerEnd=`url(#${r})`:s.markerStart=`url(#${t})`;break;default:s.markerEnd=`url(#${r})`}return s}function h(i,n,m={}){const{focus:b,numClasses:u,colors:k,rotation:h}=i,{opacity:T,cssEffectFilter:_,ariaLabel:q}=m,$=m.size??60,g=!!b,L=Math.sqrt($**2+$**2)+(g?0:5),C=[],v=[],w=[],y=($||75)/u;for(let t=0;t<u;t++){const o=t*y;for(let i=0;i<u;i++){const n=i*y,d=e(k[t][i]),m=s(null),b={type:\"rect\",x:n,y:o,width:y,height:y},u=a(d);u&&C.push(u);const c=l(b,d.fill,m,null);c&&v.push(c),w.push(r(b))}}const x=15,R=15,E=10;let M=null;g||(M=\"margin: -15px -15px -18px -15px\");const S=p(\"left\",b,n),j=p(\"right\",b,n),B=t(w),H=o(B,L,L,0,!1,h,!1),U=o(B,L,L,0,!1,g?-45:null,!1),W={filter:_??void 0,opacity:null==T?\"\":`${T}`};return d(\"div\",{class:g?f.diamondMidColRamp:f.squareTableCell,styles:W},d(\"svg\",{\"aria-label\":q,focusable:!1,height:L,role:\"image\",style:M,width:L,xmlns:c},d(\"defs\",null,d(\"marker\",{id:`${n}_arrowStart`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"5\",refY:\"5\"},d(\"polyline\",{fill:\"none\",points:\"0,0 5,5 0,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),d(\"marker\",{id:`${n}_arrowEnd`,markerHeight:\"10\",markerUnits:\"strokeWidth\",markerWidth:\"10\",orient:\"auto\",refX:\"0\",refY:\"5\"},d(\"polyline\",{fill:\"none\",points:\"5,0 0,5 5,10\",stroke:\"#555555\",\"stroke-width\":\"1\"})),C),d(\"g\",{transform:H},v),d(\"g\",{transform:U},d(\"line\",{fill:\"none\",\"marker-end\":S.markerEnd,\"marker-start\":S.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:-10,x2:-10,y1:$-x,y2:x}),d(\"line\",{fill:\"none\",\"marker-end\":j.markerEnd,\"marker-start\":j.markerStart,stroke:\"#555555\",\"stroke-width\":\"1\",x1:R,x2:$-R,y1:$+E,y2:$+E}))))}export{k as renderRelationshipRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../core/lang.js\";import{getStroke as o,getFill as e}from\"../../../symbols/support/gfxUtils.js\";import{getSymbolLayerFill as r}from\"../../../symbols/support/previewSymbol3D.js\";const s={HH:315,HL:45,LL:135,LH:225},l={2:[[\"HL\",\"HH\"],[\"LL\",\"LH\"]],3:[[\"HL\",\"HM\",\"HH\"],[\"ML\",\"MM\",\"MH\"],[\"LL\",\"LM\",\"LH\"]],4:[[\"HL\",\"HM1\",\"HM2\",\"HH\"],[\"M2L\",\"M2M1\",\"M2M2\",\"M2H\"],[\"M1L\",\"M1M1\",\"M1M2\",\"M1H\"],[\"LL\",\"LM1\",\"LM2\",\"LH\"]]};function n(t){if(!t)return;const{type:s}=t;if(s.includes(\"3d\"))return r(t.symbolLayers.at(0));if(\"simple-line\"===s){const e=o(t);return e&&e.color}if(\"simple-marker\"===t.type&&(\"x\"===t.style||\"cross\"===t.style)){const e=o(t);return e&&e.color}return e(t)}function H(t,o){const e=o.HH.label,r=o.LL.label,s=o.HL.label,l=o.LH.label;switch(t){case\"HH\":default:return{top:e,bottom:r,left:s,right:l};case\"HL\":return{top:s,bottom:l,left:r,right:e};case\"LL\":return{top:r,bottom:e,left:l,right:s};case\"LH\":return{top:l,bottom:s,left:e,right:r}}}function L(o,e){const r=[],s=o.length**.5,l=t(o),n=(e||\"HH\").split(\"\"),H=n[0],L=\"H\"===n[1];for(;l.length;){const t=[];for(;t.length<s;)t.push(l.shift());L&&t.reverse(),r.push(t)}return\"L\"===H&&r.reverse(),r}function i(t){const{focus:o,infos:e,numClasses:r}=t,s=l[r],L={};e.forEach(t=>{L[t.value]={label:t.label,fill:n(t.symbol)}});const i=[];for(let l=0;l<r;l++){const t=[];for(let o=0;o<r;o++){const e=L[s[l][o]];t.push(e.fill)}i.push(t)}return{type:\"relationship-ramp\",numClasses:r,focus:o,colors:i,labels:H(o,L),rotation:u(o)}}function u(t){let o=s[t];return t&&null==o&&(o=s.HH),o||0}export{L as getRelationshipRampColors2D,i as getRelationshipRampElement,u as getRotationAngleForFocus};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../core/lang.js\";import r from\"../../../symbols/CIMSymbol.js\";function n(e){const{view:r,field:n,normalizationField:t,sizeStops:o,sizeByScaleEnabled:i}=e,{value:a,size:l}=o[0],{value:c,size:s}=o[1];let m,y=0;n&&(y=`$feature[\"${n}\"]`,m=`\\n      if(!HasValue($feature, \"${n}\")){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n    `),t&&(y=`$feature[\"${n}\"] / $feature[\"${t}\"]`,m=`if(!HasValue($feature, \"${n}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${n}\"];\\n      $feature[\"${t}\"];`);return[{type:\"CIMPrimitiveOverride\",primitiveName:\"reference-size-outer-ring\",propertyName:\"Size\",valueExpressionInfo:{type:\"CIMExpressionInfo\",title:\"Size in pixels of outer ring\",expression:i?`\\n      ${m}\\n      var maxSize = ${s};\\n      var referenceScale = ${r.scale};\\n      return (maxSize * (referenceScale / $view.scale));\\n    `:`${m}\\n      return ${s}`,returnType:\"Default\"}},{type:\"CIMPrimitiveOverride\",primitiveName:\"reference-size-inner-dot\",propertyName:\"Size\",valueExpressionInfo:{type:\"CIMExpressionInfo\",title:\"Size in pixels of inner ring\",expression:`\\n        ${m}\\n        var value = ${y};\\n\\n        var referenceScale = ${r.scale};\\n        var referenceScaleRatio = ${i?\"(referenceScale / $view.scale)\":1};\\n        var maxSize = ${s} * referenceScaleRatio;\\n        var minSize = ${l} * referenceScaleRatio;\\n\\n        var minDataValue = ${a};\\n        var maxDataValue = ${c};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var innerDotSize = Constrain(maxSize * ratio, minSize, maxSize);\\n        return innerDotSize;\\n      `,returnType:\"Default\"}}]}function t(e){switch(e){case\"circle\":return{rings:[[[8.5,.2],[7.06,.33],[5.66,.7],[4.35,1.31],[3.16,2.14],[2.14,3.16],[1.31,4.35],[.7,5.66],[.33,7.06],[.2,8.5],[.33,9.94],[.7,11.34],[1.31,12.65],[2.14,13.84],[3.16,14.86],[4.35,15.69],[5.66,16.3],[7.06,16.67],[8.5,16.8],[9.94,16.67],[11.34,16.3],[12.65,15.69],[13.84,14.86],[14.86,13.84],[15.69,12.65],[16.3,11.34],[16.67,9.94],[16.8,8.5],[16.67,7.06],[16.3,5.66],[15.69,4.35],[14.86,3.16],[13.84,2.14],[12.65,1.31],[11.34,.7],[9.94,.33],[8.5,.2]]]};case\"square\":return{rings:[[[.5,.5],[.5,16.5],[16.5,16.5],[16.5,.5],[.5,.5]]]};case\"diamond\":return{rings:[[[8.5,.5],[.2,8.5],[8.5,16.5],[16.5,8.5],[8.5,.5]]]};case\"hexagon-pointy\":return{rings:[[[15.86,12.75],[15.86,4.25],[8.5,0],[1.14,4.25],[1.14,12.75],[8.5,17],[15.86,12.75]]]};case\"hexagon-flat\":return{rings:[[[12.75,15.86],[17,8.5],[12.75,1.14],[4.25,1.14],[0,8.5],[4.25,15.86],[12.75,15.86]]]}}}function o(e){const{type:r,color:n,colorLocked:o}=e;return{type:\"CIMVectorMarker\",enable:!0,colorLocked:!1,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:\"reference-size-outer-ring\",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray(),colorLocked:!!o,effects:[{type:\"CIMGeometricEffectDonut\",width:.75}]}]}}],scaleSymbolsProportionally:!1,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:\"OnPolygon\",offsetX:0,offsetY:0,clipAtBoundary:!1},size:20}}function i(e){const{type:r,color:n}=e;return{type:\"CIMVectorMarker\",enable:!0,anchorPoint:{x:0,y:0},anchorPointUnits:\"Relative\",primitiveName:\"reference-size-inner-dot\",frame:{xmin:0,ymin:0,xmax:17,ymax:17},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t(r),symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:n.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,markerPlacement:{type:\"CIMMarkerPlacementPolygonCenter\",placePerPart:!1,method:\"OnPolygon\",offsetX:0,offsetY:0,clipAtBoundary:!1},size:10}}function a(e){const{primitiveOverrides:n}=e;return new r({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[o(e),i(e)]},primitiveOverrides:n}})}function l(e){return\"CIMVectorMarker\"===e?.type?e.markerGraphics?.[0]:void 0}function c(e){return\"CIMPolygonSymbol\"===e?.symbol?.type?e.symbol.symbolLayers?.[0]:void 0}function s(e,r){\"CIMVectorMarker\"===e?.type&&null!=r&&(e.size=r)}function m(e,r){const n=l(e);n&&null!=r&&(n.geometry=t(r))}function y(e,r){const n=c(l(e));n&&null!=r&&(n.color=r.toArray())}function u(e,r,n){const t=c(l(e));t&&null!=r&&n&&(t.colorLocked=r)}function f(r,n){const{outerRingSize:t,innerDotSize:o,type:i,color:a,colorLocked:l,primitiveOverrides:c}=n,f=\"CIMPolygonSymbol\"===r.data.symbol?.type?r.data.symbol.symbolLayers:null;if(2===f?.length)for(const e of f){const r=\"reference-size-outer-ring\"===e.primitiveName;s(e,r?t:o),m(e,i),y(e,a),u(e,l,r)}return null!=t&&null!=o&&(r.data.primitiveOverrides=null),void 0!==c&&(r.data.primitiveOverrides=e(c)),r}export{n as createPrimitiveOverrides,a as createReferenceSizeSymbol,f as updateReferenceSizeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../renderers/visualVariables/SizeVariable.js\";function l(l,i,s){const a=l.effectiveClusterRenderer;if(!a||!(\"visualVariables\"in a)||!a.visualVariables)return null;const n=a.visualVariables.find(e=>\"size\"===e.type);if(!(\"stops\"in n)||!n.stops)return null;const t=n.stops.find(e=>e.useMinValue),u=n.stops.find(e=>e.useMaxValue);if(null==t||null==u)return null;const r=s.featuresTilingScheme.getClosestInfoForScale(s.scale).level,f=n.field,o=i.getDisplayStatistics(r,f);return o?new e({field:n.field,minSize:l.clusterMinSize,minDataValue:o.minValue,maxSize:l.clusterMaxSize,maxDataValue:o.maxValue}):null}export{l as getEffectiveClusterSizeVariable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{clone as o}from\"../../../core/lang.js\";import{px2pt as t}from\"../../../core/screenUtils.js\";import r from\"../../../symbols/CIMSymbol.js\";const i=\"spike-height-override\",l=t(8),n=t(20),a=\"triangle-solid-fill-open-outline\";function s(e){const{field:o,normalizationField:t,sizeStops:r}=e,{value:l,size:n}=r[0],{value:a,size:s}=r[1];let c,f=0;o&&(f=`$feature[\"${o}\"]`,c=`\\n      if(!HasValue($feature, \"${o}\")){\\n        return 0;\\n      }\\n      $feature[\"${o}\"];\\n    `),t&&(f=`$feature[\"${o}\"] / $feature[\"${t}\"]`,c=`if(!HasValue($feature, \"${o}\") || !HasValue($feature, \"${t}\") || $feature[\"${t}\"] <= 0){\\n        return 0;\\n      }\\n      $feature[\"${o}\"];\\n      $feature[\"${t}\"];`);return[{type:\"CIMPrimitiveOverride\",primitiveName:i,propertyName:\"Length\",valueExpressionInfo:{type:\"CIMExpressionInfo\",title:\"Custom\",expression:`\\n        ${c}\\n        var value = ${f};\\n\\n        var maxSize = ${s};\\n        var minSize = ${n};\\n\\n        var minDataValue = ${l};\\n        var maxDataValue = ${a};\\n\\n        var ratio = Constrain(( value - minDataValue ) / ( maxDataValue - minDataValue ), 0, 1);\\n\\n        var size = Constrain(maxSize * ratio, minSize, maxSize);\\n        return size;\\n      `,returnType:\"Default\"}}]}function c(e){const{primitiveOverrides:o,baseWidth:t,defaultHeight:a}=e,s=f(e);return new r({data:{type:\"CIMSymbolReference\",symbol:{type:\"CIMPointSymbol\",effects:[{type:\"CIMGeometricEffectRadial\",primitiveName:i,angle:90,length:a??n},{type:\"CIMGeometricEffectTaperedPolygon\",fromWidth:t??l,toWidth:1,length:5}],symbolLayers:s,haloSize:1,scaleX:1,angleAlignment:\"Display\"},primitiveOverrides:o}})}function f(e){const o=[u(e)],t=m(e);return t&&o.push(t),o}function u(e){const{strokeColor:o,strokeWidth:r,symbolStyle:i}=e,l=i?.includes(\"solid-fill\")||i?.includes(\"gradient-fill\");let n=o?.toArray(),a=!1;return i?.includes(\"outline\")&&l?a=!0:n=e.color?.toArray(),{type:\"CIMSolidStroke\",effects:p(i),enable:!0,colorLocked:a,capStyle:\"Round\",joinStyle:\"Round\",lineStyle3D:\"Strip\",miterLimit:4,width:r??t(1),color:n}}function p(e){if(!e?.includes(\"closed\"))return[{type:\"CIMGeometricEffectAddControlPoints\",angleTolerance:90,primitiveName:\"spike-control-points\"},{type:\"CIMGeometricEffectSuppress\",suppress:!0,invert:!0,primitiveName:\"spike-stroke-suppress\"}]}function m(e){const{color:o,symbolStyle:t}=e,r=t?.includes(\"solid-fill\"),i=t?.includes(\"gradient-fill\");if(!r&&!i||!o)return;if(r)return{type:\"CIMSolidFill\",enable:!0,colorLocked:!1,color:o?.toArray()};const l=o.clone();return l.a=0,{type:\"CIMGradientFill\",enable:!0,angle:90,colorRamp:{type:\"CIMMultipartColorRamp\",colorRamps:[{type:\"CIMLinearContinuousColorRamp\",fromColor:o.toArray(),toColor:l.toArray()}],weights:[1]},gradientMethod:\"Linear\",gradientSize:70,gradientSizeUnits:\"Relative\",gradientType:\"Continuous\"}}function d(t,r){const{defaultHeight:l,baseWidth:n,color:a,strokeColor:s,primitiveOverrides:c,symbolStyle:f,strokeWidth:p}=r,d=\"CIMPointSymbol\"===t.data.symbol?.type?t.data.symbol:null,C=d?.symbolLayers;if(!C)return t;const v=d.effects,S=v?.find(e=>\"CIMGeometricEffectTaperedPolygon\"===e.type),$=v?.find(e=>\"CIMGeometricEffectRadial\"===e.type&&e.primitiveName===i);null!=n&&S&&(S.fromWidth=n),null!=l&&$&&($.length=l);const h=C?.find(e=>\"CIMSolidStroke\"===e.type),M=C?.find(e=>\"CIMSolidFill\"===e.type),g=C?.find(e=>\"CIMGradientFill\"===e.type),I=\"CIMMultipartColorRamp\"===g?.colorRamp?.type&&\"CIMLinearContinuousColorRamp\"===g.colorRamp.colorRamps[0]?.type?g.colorRamp.colorRamps[0]:null;if(f){const o=M?.color??I?.fromColor??h?.color,t=a??(o?new e(o):void 0),i=h?.color??o,l=s??(i?new e(i):void 0),n=f.includes(\"solid-fill\"),c=f.includes(\"gradient-fill\");if(n||c||y(C,M??g),t)if(n)y(C,g),M?M.color=t?.toArray():C.push(m({...r,color:t}));else if(c)if(y(C,M),g){if(I&&a){const e=t.clone();e.a=0,I.fromColor=t.toArray(),I.toColor=e.toArray()}}else C.push(m({...r,color:t}));if(h){const e=u({...r,strokeColor:l,color:t});h.effects=e.effects,h.color=e.color,h.width=e.width,h.colorLocked=e.colorLocked}}else if(h&&(s&&(h.color=s.toArray()),null!=p&&(h.width=p)),M&&a&&(M.color=a.toArray()),I&&a){const e=a.clone();e.a=0,I.fromColor=a.toArray(),I.toColor=e.toArray()}return void 0!==c&&(t.data.primitiveOverrides=o(c)),t}function y(e,o){if(!o)return;const t=e.indexOf(o);-1!==t&&e.splice(t,1)}export{s as createPrimitiveOverrides,c as createSpikeSymbol,a as defaultSpikeSymbolStyle,d as updateSpikeSymbol};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import{getColorLuminance as t}from\"../../../core/colorUtils.js\";import{round as l,numDigits as i,percentChange as o}from\"../../../renderers/support/numberUtils.js\";import{updateReferenceSizeSymbol as r}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import{updateSpikeSymbol as s}from\"../../../smartMapping/renderers/support/spikeUtils.js\";import n from\"../../../symbols/SimpleLineSymbol.js\";import a from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as u}from\"../../../symbols/support/cimSymbolUtils.js\";import{getCIMSymbolPreviewSize as m}from\"../../../symbols/support/previewCIMSymbol.js\";import{isSymbol3D as c}from\"../../../symbols/support/typeUtils.js\";import{isVolumetricSymbol as p,getSymbolOutlineSize as f}from\"../../../symbols/support/utils.js\";import{getAuthoringInfoVisualVariableByTheme as y,getSymbolForFlowRenderer as b,createStopLabel as d}from\"./utils.js\";import\"../../support/widgetUtils.js\";import{isDarkMode as h}from\"../../../support/modeUtils.js\";const w=30,S=12,g=24,v=[255,255,255],z=[200,200,200],k=[128,128,128],j=20,x=5;function V(e){return\"esri.symbols.SimpleMarkerSymbol\"===e.declaredClass}function I(e){return\"esri.symbols.PictureMarkerSymbol\"===e.declaredClass}function M(e){return\"esri.symbols.SimpleLineSymbol\"===e.declaredClass}function U(e){return\"esri.symbols.TextSymbol\"===e.declaredClass}function C(e,t){const l=e.length-1;return e.map((e,i)=>d(e,i,l,t))}async function L(e,t,i,o,r,s,n){const a=t.legendOptions,u=a?.customValues,c=n||await E(e,i),b=t.stops,d=!!c,h=!!u,w=null!=t.minSize&&null!=t.maxSize,S=b&&b.length>1,v=!!t.target;if(!d||!h&&!(w||S&&!v))return;const z=p(c);let k=!1,j=null,x=null;j=z&&!S?l([t.minDataValue,t.maxDataValue]):u??await H(t,c,o,r?.type);const V=e?.authoringInfo,I=\"univariate-color-size\"===V?.type,M=I&&\"above-and-below\"===V?.univariateTheme,U=!!y(e,\"reference-size\"),L=!!y(e,\"spike\");if(!j&&S&&(j=b.map(e=>e.value),k=b.some(e=>!!e.label),\"flow\"===e.type&&(j=l(j)),k&&(x=b.map(e=>e.label))),z&&null!=j&&j?.length>2&&!M&&(j=[j[0],j[j.length-1]]),!j)return null;I&&5!==j?.length&&(j=O({minSize:j[0],maxSize:j[j.length-1]}));const T=z?D(e,j):null,P=f(c),q=k?null:C(j,s),B=await Promise.all(j.map(async(l,i)=>{let s=z?T[i]:await F(t,c,l,o,r?.type),n=s;U&&(s*=g/t.maxSize||1,n=g);const a=G(c,s,e,i);L&&\"cim\"===a.type&&(n=await m(a));return{value:l,symbol:a,label:k?x[i]:q[i],size:n,outlineSize:P}}));return B.reverse()}function D(e,t){const l=e?.authoringInfo,i=\"univariate-color-size\"===l?.type;let o=[S,w];if(i){const e=t[0],l=t[t.length-1],i=S,r=w;o=t.map(t=>i+(t-e)/(l-e)*(r-i))}return i&&\"below\"===l?.univariateTheme&&o.reverse(),o}function T(e,t){const l=e.classBreakInfos,i=l.length,o=i<2||!(t>=2)?l[0].symbol.clone():l[i-1].symbol.clone(),r=e.visualVariables?.some(e=>\"color\"===e.type);return r&&(o.type.includes(\"3d\")?q(o):B(o)),o}async function E(l,i){if(\"flow\"===l.type)return b(l,i);if(\"pie-chart\"===l.type)return new a({color:null,outline:l.outline?.width?l.outline:new n});let o=null,u=null;if(\"simple\"===l.type)o=l.symbol;else if(\"class-breaks\"===l.type){const e=l.classBreakInfos;o=e&&e[0]&&e[0].symbol,u=e.length>1}else if(\"unique-value\"===l.type){const e=l.uniqueValueInfos;o=e?.[0]?.symbol,u=null!=e&&e.length>1}if(!o||P(o))return null;if(o=o.clone(),i||u)if(o.type.includes(\"3d\"))q(o);else if(y(l,\"reference-size\")&&\"cim\"===o.type)r(o,{color:i??(\"class-breaks\"!==l.type?new e(z):null)});else if(y(l,\"spike\")&&\"cim\"===o.type){const l=new e(z),r=new e(k),n=\"CIMPointSymbol\"===o.data.symbol?.type?o.data.symbol:null,a=!!n?.symbolLayers?.find(({type:e})=>\"CIMSolidStroke\"===e)?.colorLocked;let u,m=i??void 0;if(m){const e=t(m),i=h();(!i&&e>225||i&&e<25)&&(m=l,u=a?r:l)}else m=l,u=a?r:l;s(o,{color:m,strokeColor:u})}else B(o);return o}function P(e){return c(e)?e.symbolLayers?.some(e=>\"fill\"===e?.type)??!1:e?.type.includes(\"fill\")??!1}function q(e){\"line-3d\"===e.type?e.symbolLayers.forEach(e=>{e.material={color:k}}):e.symbolLayers.forEach(e=>{\"icon\"!==e.type||e.resource?.href?e.material={color:z}:(e.material={color:v},e.outline={color:k,size:1.5})})}function B(t){const l=h();if(\"cim\"===t.type)u(t,new e(z));else if(t.type.includes(\"line\"))t.color=k;else if(t.color=l?k:v,\"simple-marker\"===t.type)if(t.outline){const e=t.outline?.color?.toHex();\"#ffffff\"===e&&(t.outline.color=k)}else t.outline={color:k,width:1.5}}async function H(e,t,i,o){const r=(await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\")).getSizeRangeAtScale(e,i,o),s=r&&O(r);if(!r||!s)return;let n=s.map(t=>R(t,e,r));n=l(n);for(let l=1;l<n.length-1;l++){const r=await A(e,t,n[l],n[l-1],i,o);r&&(n[l]=r[0],s[l]=r[1])}return n}function O(e){const t=e.minSize,l=e.maxSize,i=x,o=(l-t)/(i-1),r=[];for(let s=0;s<i;s++)r.push(t+o*s);return r}function R(e,t,l){const i=l.minSize,o=l.maxSize,r=t.minDataValue,s=t.maxDataValue;let n;if(e<=i)n=r;else if(e>=o)n=s;else{n=(e-i)/(o-i)*(s-r)+r}return n}async function A(e,t,r,s,n,a){const u=await F(e,t,r,n,a),m=await F(e,t,s,n,a),c=i(r),p=c.fractional,f=j;let y=c.integer,b=null,d=null;r>0&&r<1&&(b=10**p,y=i(r*=b).integer);for(let i=y-1;i>=0;i--){const s=10**i;let c=Math.floor(r/s)*s,p=Math.ceil(r/s)*s;null!=b&&(c/=b,p/=b);let y=(c+p)/2;[,y]=l([c,y,p],{indexes:[1]});const h=await F(e,t,c,n,a),w=await F(e,t,p,n,a),S=await F(e,t,y,n,a),g=o(u,h,m,null),v=o(u,w,m,null),z=o(u,S,m,null);let k=g.previous<=f,j=v.previous<=f;if(k&&j&&(g.previous<=v.previous?(k=!0,j=!1):(j=!0,k=!1)),k?d=[c,h]:j?d=[p,w]:z.previous<=f&&(d=[y,S]),d)break}return d}async function F(e,t,l,i,o){const{getSize:r}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");return r(e,l,{scale:i,view:o,shape:\"simple-marker\"===t.type?t.style:null})}function G(e,t,l,i){\"univariate-color-size\"===l?.authoringInfo?.type&&\"above-and-below\"===l?.authoringInfo?.univariateTheme&&\"class-breaks\"===l.type&&(e=T(l,i));const o=e.clone();if(c(o))p(o)||o.symbolLayers.forEach(e=>{\"fill\"!==e.type&&(e.size=t)});else if(V(o))o.size=t;else if(I(o)){const e=o.width,l=o.height;o.height=t,o.width=t*(e/l)}else M(o)?o.width=t:U(o)?o.font&&(o.font.size=t):\"cim\"===o.type&&y(l,\"reference-size\")?r(o,{innerDotSize:t,outerRingSize:g}):\"cim\"===o.type&&y(l,\"spike\")&&s(o,{defaultHeight:t,primitiveOverrides:null});return o}export{L as getRampStops,w as realWorldMaxSize,S as realWorldMinSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import{formatDate as n}from\"../../../intl/date.js\";import{formatNumber as i}from\"../../../intl/number.js\";import{timelineDateFormatOptions as o}from\"../../../renderers/support/utils.js\";import e from\"../../../renderers/visualVariables/SizeVariable.js\";function r(t){return n(new Date(t),o)}function s(t){const n=2,o=Math.floor(Math.log10(Math.abs(t)))+1,e=o<4||o>6?4:o,r=1e6,s=Math.abs(t)>=r?\"compact\":\"standard\";return i(t,{notation:s,minimumSignificantDigits:n,maximumSignificantDigits:e})}function a(t,n,i){if(null==n||null==t)return[];const o=[];for(let e=-1*i;e<=i;e++)0!==e&&o.push(n+e*t);return o}function u(t){const{max:n,min:i,padding:o,pathHeight:e,pathWidth:r,stops:s}=t,a=n-i;let u,h=`M0 0 L${r} 0 `;const m=3===s.length?[s[0],s[1],s[2]]:[s[0],s[2],s[4]],f=Math.min.apply(Math,m.map(t=>t.size)),l=Math.max(Math.abs(m[0].size-m[1].size),Math.abs(m[2].size-m[1].size));return m.reverse(),m.forEach(({size:t,value:n},s)=>{const m=Math.round((t-f)/l*100)/100,c=Math.round(e-(n-i)/a*e);u=m*r,0===u&&(u=o*r),0===s&&(h+=`L${u} 0 `),h+=`L${u} ${c} `}),h+=`L${u} ${e} L0 ${e} L0 0 Z`,h}function h(t){const{bottomValue:n,bottomWidth:i,max:o,min:e,pathHeight:r,pathWidth:s,topValue:a,topWidth:u}=t,h=u*s,m=i*s,f=o-e,l=Math.round(r-(n-e)/f*r);return`M${h} 0 L${h} ${Math.round(r-(a-e)/f*r)} L${m} ${l} L${m} ${r} L0 ${r} L0 0 Z`}function m(t){let n=t.maxSize,i=t.minSize;return n instanceof e&&(n=n.stops[0].size),i instanceof e&&(i=i.stops[0].size),[n,i]}function f(t,n,i){const o=i.length-1;if(o<0)return[];const e=i[0],r=i[o]-e,s=n-t,a=[];for(let u=1;u<o;u++){const n=(i[u]-e)/r*s+t;a.push({index:u,value:n})}return a.unshift({index:0,value:t}),a.push({index:o,value:n}),a}function l(n){return n instanceof t?n.toCss(!0):t.fromString(n??\"\").toCss(!0)}export{r as formatDateLabel,s as formatNumberLabel,a as getDeviationValues,u as getDynamicPathForSizeStops,l as getFillFromColor,h as getPathForSizeStops,m as getSizesFromVariable,f as getStopChanges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../Color.js\";import{addTokenParameter as i}from\"../../../kernel.js\";import s from\"../../../request.js\";import l from\"../../../core/Accessor.js\";import{isSome as r}from\"../../../core/arrayUtils.js\";import n from\"../../../core/Collection.js\";import has from\"../../../core/has.js\";import{JSONMap as a}from\"../../../core/jsonMap.js\";import o from\"../../../core/Logger.js\";import{clamp as u}from\"../../../core/mathUtils.js\";import{debounce as c}from\"../../../core/promiseUtils.js\";import{on as d,watch as y,initial as h,whenOnce as f}from\"../../../core/reactiveUtils.js\";import{px2pt as m}from\"../../../core/screenUtils.js\";import{parseWhereClause as p}from\"../../../core/sql.js\";import{addQueryParameters as g}from\"../../../core/urlUtils.js\";import{property as b}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as _}from\"../../../core/accessorSupport/decorators/subclass.js\";import{EffectView as S}from\"../../../layers/effects/EffectView.js\";import{getEffectiveDisplayFilter as w}from\"../../../layers/support/displayFilterUtils.js\";import{ExportImageParameters as v}from\"../../../layers/support/ExportImageParameters.js\";import{collectFields as L,collectArcadeFieldNames as E}from\"../../../layers/support/fieldUtils.js\";import{isFeatureLayer as F,supportsFieldConfiguration as C}from\"../../../layers/support/layerUtils.js\";import{getPixelValueRange as I}from\"../../../layers/support/rasterFormats/pixelRangeUtils.js\";import{fromJSON as R}from\"../../../renderers/support/jsonUtils.js\";import{isSupportedRenderer3D as V}from\"../../../renderers/support/rendererConversion.js\";import D from\"../../../renderers/visualVariables/SizeVariable.js\";import x from\"../../../renderers/visualVariables/support/SizeVariableLegendOptions.js\";import{updateReferenceSizeSymbol as z}from\"../../../smartMapping/renderers/support/referenceSizeUtils.js\";import T from\"../../../symbols/SimpleFillSymbol.js\";import j from\"../../../symbols/SimpleMarkerSymbol.js\";import{applyCIMSymbolColor as O}from\"../../../symbols/support/cimSymbolUtils.js\";import{renderSymbol as k}from\"../../../symbols/support/renderUtils.js\";import{renderColorRampPreviewHTML as M,renderDotDensityPreviewHTML as P,renderPieChartPreviewHTML as U,renderPreviewHTML as A}from\"../../../symbols/support/symbolUtils.js\";import{getCSSFilterFromEffectList as B,isVolumetricSymbol as N}from\"../../../symbols/support/utils.js\";import{getEffectiveClusterSizeVariable as $}from\"./clusterUtils.js\";import{getColorFromPointCloudStops as H,getRampStopsForPointCloud as q,getStretchRampStops as W,getRampStops as G}from\"./colorRampUtils.js\";import{getHeatmapRampStops as J}from\"./heatmapRampUtils.js\";import{getRotationAngleForFocus as Z,getRelationshipRampElement as Q}from\"./relationshipRampUtils.js\";import{getRampStops as K,realWorldMaxSize as X,realWorldMinSize as Y}from\"./sizeRampUtils.js\";import{specialCharsLessThan as ee,specialCharsGreaterThan as te,getAuthoringInfoVisualVariableByTheme as ie,getSymbolForFlowRenderer as se,formatValue as le,getFormatOptions as re,mergeWhereClauses as ne,getMedianColor as ae,rgbImgSource as oe,getFormatOptionsForVisualVariable as ue}from\"./utils.js\";import{formatNumberLabel as ce}from\"../../smartMapping/support/utils.js\";const de=16,ye=\"https://utility.arcgis.com/sharing/tools/legend\",he=\"esri.layers.ImageryLayer\",fe=\"esri.layers.ImageryTileLayer\",me=\"esri.layers.WCSLayer\",pe=/^\\s*(return\\s+)?\\$view\\.scale\\s*(;)?\\s*$/i,ge=new a({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryMultiPatch:\"multipatch\"}),be=new j({size:6,outline:{color:[128,128,128,.5],width:.5}}),_e=new T({style:\"solid\"});function Se(e){return\"flow\"===e.type}function we(e){return\"vector-field\"===e.type}function ve(e){return\"raster-colormap\"===e.type}function Le(e){return\"raster-stretch\"===e.type}function Ee(e){return\"raster-shaded-relief\"===e.type}function Fe(e){return\"esri.renderers.SimpleRenderer\"===e.declaredClass}function Ce(e){return\"esri.renderers.ClassBreaksRenderer\"===e.declaredClass}function Ie(e){return\"esri.renderers.UniqueValueRenderer\"===e.declaredClass}function Re(e){return\"esri.renderers.HeatmapRenderer\"===e.declaredClass}function Ve(e){return xe(e)||ze(e)||Te(e)||De(e)}function De(e){return\"esri.renderers.PointCloudRGBRenderer\"===e.declaredClass}function xe(e){return\"esri.renderers.PointCloudClassBreaksRenderer\"===e.declaredClass}function ze(e){return\"esri.renderers.PointCloudStretchRenderer\"===e.declaredClass}function Te(e){return\"esri.renderers.PointCloudUniqueValueRenderer\"===e.declaredClass}function je(e){return\"esri.renderers.DotDensityRenderer\"===e.declaredClass}function Oe(e){return\"esri.renderers.PieChartRenderer\"===e.declaredClass}function ke(e,t){return Fe(e)||Ce(e)||Ie(e)||Re(e)||je(e)||Oe(e)?\"2d\"===t.type||V(e):Le(e)||ve(e)||Ee(e)||xe(e)||ze(e)||Te(e)||we(e)||Se(e)}function Me(e){return\"esri.layers.BuildingSceneLayer\"===e.declaredClass}function Pe(e){return\"esri.layers.SubtypeGroupLayer\"===e.declaredClass}function Ue(e){return\"esri.layers.VoxelLayer\"===e.declaredClass}function Ae(e){return\"esri.layers.WMSLayer\"===e.declaredClass}function Be(e){return\"esri.layers.WMTSLayer\"===e.declaredClass}function Ne(e){return\"esri.layers.MapImageLayer\"===e.declaredClass}function $e(e){return\"esri.layers.TileLayer\"===e.declaredClass}function He(e){return e.declaredClass===he}function qe(e){return e.declaredClass===fe}function We(e){return e.declaredClass===me}function Ge(e){return\"stretch-ramp\"===e.type}function Je(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type}function Ze(e){const t=\"authoringInfo\"in e?e?.authoringInfo:null;return\"univariate-color-size\"===t?.type&&\"above-and-below\"===t?.univariateTheme}function Qe(e){return\"sublayers\"in e}function Ke(e){return e&&\"symbol\"in e}function Xe(e,t){const{field:i,field2:s,field3:l,fieldDelimiter:r,valueExpression:n}=e;if(!i)return null;const a=!(!i&&!n||!s&&!l)?t?.toString().split(r||\"\"):[t],o=i?{[i]:a?.[0]}:null;return o&&(s&&(o[s]=a?.[1]),l&&(o[l]=a?.[2])),o}const Ye=new j({style:\"path\",path:\"M10,5 L5,0 0,5 M5,0 L5,15\",size:15,outline:{width:1,color:[85,85,85,1]}});let et={};const tt=new WeakMap;let it=class extends l{constructor(e){super(e),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._loading=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._clusterSizeVariable=null,this._layerDefinitionExpression=null,this._layerDefinitionExpressionClause=null,this._layerDisplayFilter=null,this._layerDisplayFilterClause=null,this.children=new n,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange(\"ready\");this.addHandles([d(()=>this.children,\"change\",t=>{const{added:i,removed:s}=t;i.forEach(t=>{const i=`activeLayerInfo-ready-watcher-${t.layer.uid}`;this.addHandles(y(()=>t.ready,e,h),i)}),s.forEach(e=>this.removeHandles(e.layer.uid)),e()})]),this.keepCacheOnDestroy||(et={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(et=null),this._layerDefinitionExpressionClause=null}get cssEffectFilter(){const{layer:e,scale:t}=this,i=\"effect\"in e?e.effect:null;if(!i)return null;const s=new S({effect:i});return s.endTransition(),s.scale=t,B(s,!0)}get loading(){return this.children.length>0?this.children.some(e=>e.loading):this._loading}get opacity(){const e=this.layer.opacity,t=this.parent?.opacity,i=this.layer.parent,s=i&&\"uid\"in i?this._getParentLayerOpacity(i):null;return null!=t?t*e:null!=s?s*e:e}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if(\"effect\"in e&&e.effect&&Array.isArray(e.effect))return!0;if(\"featureReduction\"in e&&e.featureReduction){if(\"cluster\"===e.featureReduction.type)return!0;if(\"binning\"===e.featureReduction.type&&\"renderer\"in e.featureReduction&&e.featureReduction.renderer)return this._isRendererScaleDriven(e.featureReduction.renderer)}return\"renderer\"in e&&e.renderer?!!(\"displayFilterInfo\"in e&&e.displayFilterInfo&&Ie(e.renderer))||this._isRendererScaleDriven(e.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get(\"version\")+1}async buildLegendElementsForFeatureCollections(e){this._loading=!0;if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],this._loading=!1,void this.notifyChange(\"ready\");const t=Array.from(e,e=>{if(F(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet?.features.length){const t=e.layerDefinition,i=t?.drawingInfo,s=i&&R(i.renderer),l=ge.read(t.geometryType);return s?this._getRendererLegendElements(s,{title:e.name,geometryType:l}):(o.getLogger(this).warn(\"drawingInfo not available!\"),null)}return null});try{const e=[],i=await Promise.allSettled(t);for(const t of i)if(\"fulfilled\"===t.status)for(const i of t.value??[])e.push(i);this.legendElements=e}catch(i){o.getLogger(this).warn(\"error while building legend for layer!\",i)}finally{this._loading=!1,this.notifyChange(\"ready\")}}async buildLegendElementsForRenderer(e){try{this._loading=!0;const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[]}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}finally{this._loading=!1,this.notifyChange(\"ready\")}}async buildLegendElementsForFeatureReduction(e){try{this._loading=!0,await this._waitForLayerViewUpdate(this.layerView);const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getLegendElementsForFeatureReduction(e):[]}catch(t){o.getLogger(this).warn(\"error while building legend for layer!\",t)}finally{this._loading=!1,this.notifyChange(\"ready\")}}async buildLegendElementsForTools(){this._loading=!0;const e=this.layer;if(Ue(e))await this._constructLegendElementsForVoxelLayer();else if(Be(e))this._constructLegendElementsForWMTSlayer();else if(Ae(e))await this._constructLegendElementsForWMSSublayers();else if(Me(e))await this._constructLegendElementsForBuildingSceneLayer();else if(Ne(e)||$e(e)||Pe(e))await this._constructLegendElementsForSublayers();else{this.removeHandles(\"imageryLayers-watcher\");let t=\"default\";if(He(e)){const i=e;t=(i?.rasterFunction?.functionName||\"default\")+\"_\"+(e.bandIds?.length?e.bandIds.join(\"\"):\"###\")}if(qe(e)||\"link-chart\"===e.type)return;await this._getLegendLayers(`${e.uid}-${t}`).then(async t=>{this.legendElements=[];const i=t.map(async t=>{if(He(e)){const t=y(()=>[e.rasterFunction,e.bandIds],()=>c(async()=>{et.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()})());this.addHandles(t,\"imageryLayers-watcher\")}const i=this._generateSymbolTableElementForLegendLayer(t);i?.infos.length&&(He(e)&&(i.title=e.title),this.legendElements.push(i))});await Promise.allSettled(i)}).catch(e=>{o.getLogger(this).warn(\"Request to server for legend has failed!\",e)})}this._loading=!1,this.notifyChange(\"ready\")}async _isLayerInCurrentView(e){return this._checkFeatureCountForExpression(e,this.view.extent)}_getParentLayerOpacity(e){let t=1;const i=e.parent;return i&&\"uid\"in i&&(t=this._getParentLayerOpacity(i)),e.opacity*t}_isGroupActive(){return this.children.some(e=>e.ready)}_isRendererScaleDriven(e){if(\"dot-density\"===e.type)return!0;const t=\"valueExpression\"in e?e.valueExpression:null;if(pe.test(t))return!0;const i=\"visualVariables\"in e?e.visualVariables:null;return!!i?.some(e=>this._isScaleDrivenSizeVariable(e))||this._hasScaleDrivenSymbols(e)}_hasScaleDrivenSymbols(e){switch(e.type){case\"simple\":return this._isScaleDrivenSymbol(e.symbol);case\"class-breaks\":return this._isScaleDrivenSymbol(e.defaultSymbol)||e.classBreakInfos.some(e=>this._isScaleDrivenSymbol(e.symbol));case\"unique-value\":return this._isScaleDrivenSymbol(e.defaultSymbol)||!!e.uniqueValueInfos?.some(e=>this._isScaleDrivenSymbol(e.symbol))}return!1}_isScaleDrivenSymbol(e){if(\"cim\"===e?.type){const{primitiveOverrides:t,minScale:i,maxScale:s}=e.data,l=t?.some(e=>(e.valueExpressionInfo?.expression||\"\").includes(\"$view.scale\"))??!1;return null!=i||null!=s||l}return!1}_isScaleDrivenSizeVariable(e){if(e&&\"size\"!==e.type)return!1;const t=e,i=t.minSize,s=t.maxSize;return!(\"object\"!=typeof i||!i||!this._isScaleDrivenSizeVariable(i))||(!(\"object\"!=typeof s||!s||!this._isScaleDrivenSizeVariable(s))||pe.test(t.valueExpression))}_isLayerScaleDriven(e){if(\"minScale\"in e&&e.minScale>0||\"maxScale\"in e&&e.maxScale>0)return!0;if(\"sublayers\"in e&&e.sublayers)return e.sublayers.some(e=>this._isLayerScaleDriven(e));const t=e.parent;if(!1===e.loaded&&t&&Ne(t)&&\"source\"in e&&e.source&&\"map-layer\"===e.source.type)for(const i of t.sourceJSON.layers??[])if(i.id===e.source.mapLayerId&&(i.minScale>0||i.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxelLayer(){this._loading=!0,this.legendElements=[],this.removeHandles(\"voxel-style-watcher\"),this.removeHandles(\"voxel-current-variable\");const e=this.layer;this.addHandles(y(()=>e.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),\"voxel-current-variable\"),this.addHandles(y(()=>e.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),\"voxel-style-watcher\");const t=e.getVariableStyle(null),i=[];if(t)if(t.uniqueValues?.length){const e=[];t.uniqueValues.forEach(t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new T({color:t.color,outline:null})})}),e.length&&i.push({type:\"symbol-table\",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:s}=t.transferFunction,l=e.toArray().reverse(),r=s.map((e,t)=>`${0===t?ee:te} ${ce(e)}`).reverse(),n=l.map(e=>({color:e.color,value:null,label:null}));n[0].label=r[0],n[n.length-1].label=r[1],i.push({type:\"color-ramp\",title:t.label,infos:n,preview:M(l.map(e=>e.color))})}await this._generatePreviewsForLegendElements(i,{opacity:e.opacity}),this.legendElements=i,this._loading=!1,this.notifyChange(\"ready\")}_constructLegendElementsForWMTSlayer(){this._loading=!0,this.legendElements=[],this.removeHandles(\"wmts-activeLayer-watcher\");const e=this.layer.activeLayer;this.addHandles(y(()=>{const{layer:e}=this;return e&&\"activeLayer\"in e&&e.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),\"wmts-activeLayer-watcher\");const t=e.styleId?e.styles?.find(({id:t})=>t===e.styleId)?.legendUrl:void 0;t&&(this.legendElements=[{type:\"symbol-table\",title:e.title,infos:[{src:t,opacity:this.opacity}]}]),this._loading=!1,this.notifyChange(\"ready\")}async _constructLegendElementsForWMSSublayers(){this._loading=!0,this.legendElements=[],this.removeHandles(\"wms-sublayers-watcher\");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this.addHandles(y(()=>{const{layer:e}=this;return e&&\"sublayers\"in e&&e.sublayers},()=>this._constructLegendElementsForWMSSublayers()),\"wms-sublayers-watcher\"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this._loading=!1,this.notifyChange(\"ready\")}async _generateLegendElementsForWMSSublayers(e,t){const i=this.layer,s=[];this.addHandles(e.on(\"change\",()=>this._constructLegendElementsForWMSSublayers()),\"wms-sublayers-watcher\");const l=this.sublayerIds?.map(e=>i.findSublayerById(e))?.filter(r)??[],n=l.length?l:e.toArray();for(const r of n){const e=y(()=>[r.title,r.visible,r.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(e,\"wms-sublayers-watcher\"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e?.infos.length&&s.unshift(e)}}return s}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const i=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter(e=>e);return{type:\"symbol-table\",title:e.title,infos:i}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){let i=e.legendUrl;if(!i)return;const l={type:\"symbol-table\",title:e.title||e.name||String(e.id??\"\"),infos:[]};t&&(i=g(i,t));let r=null;const n=e.layer?.opacity;try{r=(await s(i,{responseType:\"image\"})).data,r&&(r.style.opacity=n)}catch{}return l.infos.push({src:i,preview:r,opacity:n}),l}_getLegendLayers(e,t){const i=et&&et[e];return i?Promise.resolve(i):this._legendRequest(t).then(t=>{const i=t.layers;return et[e]=i,i})}_legendRequest(e){const t=this.layer;let i={f:\"json\",dynamicLayers:e};if(He(t)){const e=t.exportImageServiceParameters.rasterFunction;if(e&&(i.renderingRule=JSON.stringify(e.functionDefinition?.toJSON()||e.toJSON())),t.bandIds&&(i.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:s,customParameters:l}=t;i={raster:e,viewId:s,...i,...l}}}let l=t.url.replace(/(\\/)+$/,\"\");if(\"version\"in t&&+t.version>=10.01){const e=l.indexOf(\"?\");e>-1?l=l.slice(0,e)+\"/legend\"+l.slice(e):l+=\"/legend\"}else{const e=l.toLowerCase().indexOf(\"/rest/\"),t=-1===e?l:l.slice(0,e)+l.slice(e+5);l=ye+\"?soapUrl=\"+encodeURI(t)+\"&returnbytes=true\"}return s(l,{query:i}).then(e=>e.data)}async _constructLegendElementsForBuildingSceneLayer(){this._loading=!0,this.legendElements=[],this.removeHandles(\"sublayers-watcher\");const e=this.layer;this.addHandles(y(()=>e.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity)}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}finally{this._loading=!1,this.notifyChange(\"ready\")}}async _generateLegendElementsForBuildingSublayers(e,t){let i=[];this.addHandles(e.on(\"change\",()=>this._constructLegendElementsForBuildingSceneLayer()),\"sublayers-watcher\");const s=e.toArray();for(const l of s){const e=y(()=>[\"renderer\"in l&&l.renderer,l.opacity,l.title,l.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(e,\"sublayers-watcher\"),!this.respectLayerVisibility||l.visible){const e=null!=l?.opacity?l.opacity:null,s=null!=e?e*t:t;if(\"building-group\"===l.type){const e={type:\"symbol-table\",title:l.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(l.sublayers,s);e.infos.push(...t),i=[e,...i]}else if(l.renderer){i=[...await this._getRendererLegendElements(l.renderer,{title:l.title,opacity:s,sublayer:l}),...i]}}}return i.filter(e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0))}async _constructLegendElementsForSublayers(){this._loading=!0,this.removeHandles(\"sublayers-watcher\");const e=this.layer;if(!(Ne(e)||$e(e)||Pe(e))||this.hideLayersNotInCurrentView&&!await this._isLayerInCurrentView())return this.legendElements=[],this._loading=!1,void this.notifyChange(\"ready\");this.addHandles(y(()=>e.sublayers,()=>this._constructLegendElementsForSublayers),\"sublayers-watcher\");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity)}catch(t){o.getLogger(this).warn(\"Request to server for legend has failed!\",t)}finally{this._loading=!1,this.notifyChange(\"ready\")}}async _generateLegendElementsForSublayers(e,t,i){const s=this.layer;let l=[];this.addHandles(e.on(\"change\",()=>this._constructLegendElementsForSublayers()),\"sublayers-watcher\");let n=e.toArray();!i&&this.sublayerIds&&this.sublayerIds.length&&(n=Pe(s)?this.sublayerIds.map(e=>s.findSublayerForSubtypeCode(e)).filter(r):this.sublayerIds.map(e=>s.findSublayerById(e)).filter(r));for(const r of n){const e=y(()=>[r.renderer,r.opacity,r.title,r.visible,r.legendEnabled],()=>this._constructLegendElementsForSublayers());this.addHandles(e,\"sublayers-watcher\");const s=r.createQuery().where,n=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView(s),a=!this.respectLayerVisibility||r.visible&&r.legendEnabled&&this._isSublayerInScale(r);if(n&&a){const e=null!=r?.opacity?r.opacity:null,s=null!=e?e*t:t,n=!Qe(r)||r.originIdOf(\"renderer\")>2&&!r.sublayers;if(r.renderer&&n){await r.load();l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:s,sublayer:r}),...l]}else if(Qe(r)){const e=await this._generateSymbolTableElementForSublayer(r,s,i);e&&l.unshift(e)}}}return l.filter(e=>!!e&&(!(\"infos\"in e)||!e.infos||e.infos.length>0))}async _generateSymbolTableElementForSublayer(e,t,i){if(!i){i=new Map;const t=this.layer,s=e.source;let l=null;if(!(!s||\"map-layer\"===s.type&&s.mapLayerId===e.id&&(!s.gdbVersion||s.gdbVersion===(\"gdbVersion\"in t&&t.gdbVersion)))||e.originIdOf(\"renderer\")>2||e.originIdOf(\"labelingInfo\")>2||e.originIdOf(\"labelsVisible\")>2){const e=new v({layer:this.layer});l=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const r=l||`${t.uid}-default`;(await this._getLegendLayers(r,l)).forEach(e=>i.set(e.layerId,e))}const s=i.get(e.id);if((!s||s?.subLayerIds&&s.defaultVisibility)&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,i);return{type:\"symbol-table\",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(s,e,t)}_generateSymbolTableElementForLegendLayer(e,t,i){if(!e?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const s=t?.renderer;let l=t?.title||e.layerName;if(s&&(!t||t?.originIdOf(\"renderer\")>2)){const e=t?.title||this._getRendererTitle(s,t);e&&(l&&\"string\"!=typeof e&&\"title\"in e&&(e.title=l),l=e)}const r={type:\"symbol-table\",title:l,legendType:e.legendType||null,infos:[]},n=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return e.legendGroups&&e.legendGroups.length>0?e.legendGroups.forEach(s=>{const l={type:\"symbol-table\",title:s.heading,legendType:e.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(n.filter(e=>e.groupId===s.id),e.layerId,s.heading||r.title||t?.title,i)};l.infos?.length>0&&r.infos.push(l)}):r.infos=this._generateSymbolTableElementInfosForLegendLayer(n,e.layerId,r.title||t?.title,i),r.infos.length>0?r:null}_generateSymbolTableElementInfosForLegendLayer(e,t,s,l){return e.map(e=>{let r=e.url;if(e.imageData&&e.imageData.length>0)r=`data:image/png;base64,${e.imageData}`;else{if(r.startsWith(\"http\"))return null;r=i(`${this.layer.url}/${t}/images/${r}`)}let n=e.label;return\"<all other values>\"===n&&(n=\"others\"),{previewAriaLabel:n||s,label:n,src:r,opacity:l??this.opacity,width:e.width,height:e.height}}).filter(r)}_isSublayerInScale(e){const t=e.minScale||0,i=e.maxScale||0;return!(t>0&&t<this.scale||i>this.scale)}_isLegendLayerInScale(e,t){const i=t||this.layer;let s=null,l=null,r=!0;return!i.minScale&&0!==i.minScale||!i.maxScale&&0!==i.maxScale?(0===e.minScale&&i.tileInfo&&(s=i.tileInfo.lods[0].scale),0===e.maxScale&&i.tileInfo&&(l=i.tileInfo.lods[i.tileInfo.lods.length-1].scale)):(s=Math.min(i.minScale,e.minScale)||i.minScale||e.minScale,l=Math.max(i.maxScale,e.maxScale)),(s>0&&s<this.scale||l>this.scale)&&(r=!1),r}_sanitizeLegendForSublayer(e,t){if(\"version\"in this.layer&&+this.layer.version<10.1||0===e.length)return e;const i=t.renderer,s=e.some(e=>e.values);let l=0,r=null;return s&&e.some((e,t)=>(e.values||(l=t,r=e,r.label||(r.label=\"others\")),null!=r)),i?\"unique-value\"===i.type?r&&(e.splice(l,1),e.push(r)):\"class-breaks\"===i.type&&(r&&e.splice(l,1),i.legendOptions?.order||e.reverse(),r&&e.push(r)):r&&(e.splice(l,1),e.push(r)),e}async _getRendererLegendElements(e,t={}){if(!ke(e,this.view))return o.getLogger(this).warn(`Renderer of type '${e.type}' not supported!`),[];if(Ve(e))return this._constructPointCloudRendererLegendElements(e,t);if(je(e))return this._constructDotDensityRendererLegendElements(e);const i=await this._loadRenderer(e);return Oe(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,t)}async _getLegendElementsForFeatureReduction(e){let t=null;return\"binning\"===e.type?t=e.renderer:\"cluster\"===e.type&&(t=this._getClusterRenderer(e)),t?this._getRendererLegendElements(t,{isFeatureReductionRenderer:!0}):[]}_getPointCloudRendererTitle(e){return(e.legendOptions?.title||e.field)??\"\"}async _constructPointCloudRendererLegendElements(e,t={}){const i=t.title,s=[];let l=null,r=null;if(xe(e))l={type:\"symbol-table\",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach(e=>{l.infos.unshift({label:e.label||e.minValue+\" - \"+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(be,e.color)})});else if(ze(e)){const t=e.stops;let s=null;if(t?.length&&(1===t.length&&(s=t[0].color),!s)){const e=t[0].value,i=t[t.length-1].value;if(null!=e&&null!=i){s=H(e+(i-e)/2,t)}}l={type:\"symbol-table\",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(be,s||be.color)}]};const n=q(e.stops??[])??[];r={type:\"color-ramp\",title:i||this._getPointCloudRendererTitle(e),infos:n,preview:M(n.map(e=>e.color))}}else Te(e)&&(l={type:\"symbol-table\",title:i||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos?.forEach(e=>{l.infos.push({label:e.label||e.values.join(\", \"),value:e.values.join(\", \"),symbol:this._getAppliedCloneSymbol(be,e.color)})}));return l?.infos.length&&s.push(l),r?.infos.length&&s.push(r),await this._generatePreviewsForLegendElements(s,{opacity:this.opacity,symbolConfig:{applyColorModulation:!!e.colorModulation}}),s}async _getElementInfoForDotDensity(e,t){const{color:i,label:s,valueExpressionTitle:l}=t,{backgroundColor:r,outline:n,dotSize:a}=e,o=this.cssEffectFilter,u=a+\"-\"+i+\"-\"+r+\"-\"+(n&&JSON.stringify(n.toJSON()))+\"-\"+o,c=this._dotDensityUrlCache,d=c.has(u)?c.get(u):P(e,i);c.set(u,d);const y={shape:{type:\"image\",x:0,y:0,width:d.width,height:d.height,src:d.src},fill:null,stroke:null,offset:[0,0]},h=k([[y]],[d.width,d.height],{cssEffectFilter:this.cssEffectFilter});return{opacity:1,src:d.src,preview:h,width:d.width,height:d.height,previewAriaLabel:s||l}}async _constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),i=e.legendOptions?.unit,s={type:\"symbol-table\",title:{value:t&&Math.round(t),unit:i||\"\"},infos:[]};for(const l of e.attributes){const t=await this._getElementInfoForDotDensity(e,l);t.label=l.label||l.valueExpressionTitle||l.field,s.infos.push(t)}return[s]}async _constructPieChartRendererLegendElements(e){const t=[];let i=null;const s=e.outline;e.attributes.forEach(e=>{const i=new j({color:e.color,outline:s}),l=e.label||e.valueExpressionTitle||e.field;t.push({label:l,symbol:i})});const l=t.length?[...t]:[];if(e.othersCategory?.color&&0!==e.othersCategory?.threshold){const l=new j({color:e.othersCategory.color,outline:s});i=e.othersCategory.label||\"Other\",t.push({label:i,symbol:l})}if(e.defaultColor?.a){const i=new j({color:e.defaultColor,outline:s});t.push({label:e.defaultLabel,symbol:i})}const r=await this._getVisualVariableLegendElements(e,this.layer)||[];if(t.length){r.unshift({type:\"symbol-table\",title:null,infos:t});const n=l.filter(e=>e.label!==i).map(e=>e.symbol.color).filter(Boolean),a=U(n,{holePercentage:e.holePercentage,backgroundColor:e.backgroundFillSymbol?.color,cssEffectFilter:this.cssEffectFilter,outline:s});r.unshift({type:\"pie-chart-ramp\",title:this._getRendererTitle(e,this.layer),infos:t,preview:a})}return await this._generatePreviewsForLegendElements(r,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter}),r}async _getWhereClause(e,t,i){const s=await p(e,i),l=new Set,{field:r,field2:n,field3:a}=t;L(l,i,[r,n,a]),await E(l,i,null,t.valueExpression);const o=new Set(Array.from(l,e=>e.toLowerCase())),u=s?.fieldNames.map(e=>e.toLowerCase());return u?.some(e=>!o.has(e))?null:s}async _processDefinitionExpression(e,t){if(!(\"definitionExpression\"in e))return;const i=e.definitionExpression;i&&this.respectLayerDefinitionExpression?this._layerDefinitionExpression!==i&&(this._layerDefinitionExpressionClause=await this._getWhereClause(i,t,e.fieldsIndex)):this._layerDefinitionExpressionClause=null,this._layerDefinitionExpression=i}async _processDisplayFilter(e,t){if(!(\"displayFilterInfo\"in e))return;const i=e.displayFilterInfo?w(e.displayFilterInfo,this.view):null;return i?.where?this._layerDisplayFilter?.id!==i?.id&&(this._layerDisplayFilterClause=await this._getWhereClause(i.where,t,e.fieldsIndex)):this._layerDisplayFilterClause=null,this._layerDisplayFilter=i,i}async _constructRendererLegendElements(e,t={}){const{title:i,sublayer:s,isFeatureReductionRenderer:l}=t,r=s||this.layer,n=ie(e,\"reference-size\"),a=ie(e,\"spike\"),o=l&&\"renderer\"in r&&r.renderer?r.renderer:e;let u=null;Ie(o)&&(await this._processDefinitionExpression(r,o),u=await this._processDisplayFilter(r,o)),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const c=await this._getVisualVariableLegendElements(e,r)||[],d={type:\"symbol-table\",title:i||this._getRendererTitle(e,r),infos:[]};let y=null,h=!1;const f=new Set;if(Se(e)&&!this._hasSizeRamp){const t=await se(e);d.infos.push({label:null,symbol:t})}else if(Je(e)){let t=i;const s=Ze(e)?\"univariate-above-and-below-ramp\":\"univariate-color-size-ramp\",l=c.findIndex(e=>\"color-ramp\"===e.type),r=-1!==l?c.splice(l,1)[0]:null,n=c.findIndex(e=>\"size-ramp\"===e.type),a=-1!==n?c.splice(n,1)[0]:null,o=[];r&&(t=r.title,o.push(r)),a&&(t=a.title,o.push(a)),o.length>0&&c.push({type:s,title:t,infos:o})}else if(Re(e)){const t=J(e);c.push({type:\"heatmap-ramp\",title:i||this._getRendererTitle(e,r),infos:t,preview:M(t.map(e=>e.color),{cssEffectFilter:this.cssEffectFilter})})}else if(Ie(e)){const t=e.authoringInfo;if(t&&\"relationship\"===t.type){const{numClasses:i,field1:s,field2:l}=t,n=t.focus;if(i&&s&&l){const t=[s,l];let a=Z(n)||0;for(const e of t){const{field:t,normalizationField:i,label:s}=e,l=s||{field:this._getFieldAlias(t,r),normField:i&&this._getFieldAlias(i,r)},n=Ye.clone();n.angle=a,d.infos.push({label:l,symbol:n}),f.add(n),a+=90}const o=Q({focus:n,numClasses:i,infos:e.uniqueValueInfos??[]});c.unshift(o)}}else if(He(this.layer)||qe(this.layer)){const{uniqueValueInfos:t}=e;if(t)for(const e of t)e.symbol&&await this._checkClausesForUVR(o,e.value)&&d.infos.push({label:e.label||e.value,value:e.value,symbol:e.symbol})}else{const{field:t,field2:s,field3:l,fieldDelimiter:a,valueExpression:c,defaultSymbol:y}=e,f=!(!t&&!c||!s&&!l),m=u?u.title:null,p=[],{uniqueValueGroups:g}=e;if(g)for(const e of g){const i={type:\"symbol-table\",title:m||e.heading,infos:[]},{classes:u}=e;if(u)for(const e of u){const{symbol:u,values:d}=e;if(u){const y=[],h=[];for(const e of d??[]){const{value:i,value2:n,value3:o}=e,u=[],d=[];(t||c)&&(u.push(i),d.push(this._getDomainName(t,i,r)??le(i,re(r,t,this.view.timeZone)))),s&&(u.push(n),d.push(this._getDomainName(s,n,r)??le(n,re(r,s,this.view.timeZone)))),l&&(u.push(o),d.push(this._getDomainName(l,o,r)??le(o,re(r,l,this.view.timeZone)))),y.push(f?u.join(a||\"\"):u[0]),h.push(d.join(\" - \"))}const m=y.join(\", \");let p=e.label;if(!p){const e=h.filter(Boolean);p=e.length?e.join(\", \"):m}let g=u;\"cim\"===g.type&&n&&(g=g.clone(),z(g,{innerDotSize:.5*de,outerRingSize:de}));let b=!1;for(const e of y)if(b=await this._checkClausesForUVR(o,e),b)break;b&&i.infos.push({label:p,value:m,symbol:g})}}i.infos.length&&p.push(i)}if(p.length){const t=p[0];if(1===p.length&&\"title\"in t&&!t.title){const e=t.infos?.filter(Ke)??[];d.infos.push(...e)}else y&&(p.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:y}]}),h=!0),d.infos.push(...p);i||e.legendOptions?.title||e.valueExpressionTitle||(d.title=null)}}e.defaultSymbol&&!h&&(d.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),h=!0)}else if(Ce(e)){if(!n&&!a){y=this._isUnclassedRenderer(e);if(!y||!this._hasSizeRamp){const t=e.classBreakInfos.filter(({symbol:e})=>e),i=\"ascending-values\"===e.legendOptions?.order;for(const{label:e,minValue:s,maxValue:l,symbol:n}of t){const t=e||(y?null:`${s} - ${l}`),a={previewAriaLabel:t||d.title||r.title,label:t,value:[s,l],symbol:n};i?d.infos.push(a):d.infos.unshift(a)}y&&(d.title=null),this._updateInfosForClassedSizeRenderer(e,d.infos)}e.defaultSymbol&&!y&&(d.infos.push({label:e.defaultLabel||\"others\",symbol:e.defaultSymbol}),h=!0)}}else if(Le(e))if(qe(this.layer)||We(this.layer)){const t=await this._constructTileImageryStretchRendererElements(e);Ge(t)?c.push(t):d.infos=t}else{const t=this.layer;let i,s;e.customStatistics?.length&&({min:i,max:s}=e.customStatistics[0]);let l=[],r=t.serviceRasterInfo;if(t.rasterFunction)try{r=await t.generateRasterInfo(t.rasterFunction)}catch{}const n=I(r.pixelType);if(1===r.bandCount){const l=t.bandIds?.[0]||0;i=null!=i?i:r.statistics?r.statistics[l].min:n[0],s=null!=s?s:r.statistics?r.statistics[l].max:n[1],i||s?c.push(await this._getStretchLegendElements(e,{min:i,max:s})):this._getServerSideLegend()}else if(t.bandIds&&1===t.bandIds.length)i=null!=i?i:r.statistics?r.statistics[t.bandIds[0]].min:n[0],s=null!=s?s:r.statistics?r.statistics[t.bandIds[0]].max:n[1],i||s?c.push(await this._getStretchLegendElements(e,{min:i,max:s})):this._getServerSideLegend();else if(r.bandCount>=3){const{bandInfos:e}=r,{bandIds:i}=t;e.length>=r.bandCount?3===i?.length?(l=i.map(t=>e[t].name),d.infos=this._createSymbolTableElementMultiBand(l)):\"lerc\"===t.format?(l=[0,1,2].map(t=>e[t].name),d.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend():\"lerc\"===t.format?(l=[\"band1\",\"band2\",\"band3\"],d.infos=this._createSymbolTableElementMultiBand(l)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(ve(e))e.colormapInfos.forEach(e=>{d.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(_e,e.color)})});else if(Fe(e)){let i=e.symbol;switch(t.geometryType){case\"point\":i=\"pointSymbol\"in r?r.pointSymbol:null;break;case\"polyline\":i=\"lineSymbol\"in r?r.lineSymbol:null;break;case\"polygon\":i=\"polygonSymbol\"in r?r.polygonSymbol:null}const s=this._clusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;e.symbol&&s&&d.infos.push({previewAriaLabel:e.label||d.title||r.title,label:e.label,symbol:i})}else if(we(e)){e.outputUnit&&(this.title=\"(\"+e.toJSON().outputUnit+\")\"),d.title=e.attributeField;const t=e.getClassBreakInfos();t?.length?t.forEach(e=>{d.infos.push({label:e.minValue+\" - \"+e.maxValue,symbol:e.symbol})}):d.infos.push({label:e.attributeField,symbol:e.getDefaultSymbol()})}else Ee(e)&&c.push(await this._getStretchLegendElements(e,{min:0,max:255}));const m=e.defaultSymbol;!m||h||Fe(e)||y&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||c.push({type:\"symbol-table\",infos:[{label:e.defaultLabel||\"others\",symbol:m}]}),d.infos.length&&c.unshift(d);const p=null==t.opacity?this.opacity:t.opacity,g=this._isTallSymbol(\"visualVariables\"in e?e.visualVariables:null),b=He(this.layer)||qe(this.layer);return await this._generatePreviewsForLegendElements(c,{opacity:p,symbolConfig:{isTall:g,isSquareFill:b},cssEffectFilter:this.cssEffectFilter},{arrowMarkerSymbols:f}),e=null,c}async _waitForLayerViewUpdate(e){await f(()=>!e.updating)}async _checkFeatureCountForExpression(e,t){const i=this.layerView;if(!(i&&\"createQuery\"in i&&\"queryFeatureCount\"in i))return!0;try{await this._waitForLayerViewUpdate(i);const s=i.createQuery();e&&(s.where=ne(s.where,e)),t&&(s.geometry=t);return await i.queryFeatureCount(s)>0}catch{return!0}}async _checkClausesForUVR(e,t){const i=Xe(e,t);if(!i)return!0;return(!!!(!this._layerDefinitionExpressionClause&&this._layerDefinitionExpression&&this.respectLayerDefinitionExpression||!this._layerDisplayFilterClause&&this._layerDisplayFilter?.where)||await this._checkFeatureCountForExpression(`${e.field} = ${t}`))&&(!this._layerDefinitionExpressionClause||this._layerDefinitionExpressionClause.testFeature(i))&&(!this._layerDisplayFilterClause||this._layerDisplayFilterClause.testFeature(i))}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(e){const t=e?.infos;return t?t.reduce((e,t)=>e.concat(this._getAllInfos(t)),[]):[e]}async _constructTileImageryStretchRendererElements(e){const t=this.layer,i=t.symbolizer.rasterInfo??t.raster.rasterInfo;let s,l;const r=e?.customStatistics?.length?e.customStatistics:i?.statistics;if(r)({min:s,max:l}=r[0]);else{const e=I(i.pixelType);s=e[0],l=e[1]}if(t.hasStandardTime()&&(s=t.getStandardTimeValue(s),l=t.getStandardTimeValue(l)),1===i.bandCount||1===t.bandIds?.length)return this._getStretchLegendElements(e,{min:s,max:l});const n=(t?.bandIds?.length?t.bandIds:Array.from(Array(Math.min(i.bandCount,3)).keys())).map(e=>i.bandInfos[e].name);return n.length<3?n.push(n[1]):n.length>3&&n.splice(3),this._createSymbolTableElementMultiBand(n)}async _getStretchLegendElements(e,t){const i=e.colorRamp?.toJSON(),s=W(i,t);return{type:\"stretch-ramp\",title:\"\",infos:s,preview:M(s.map(e=>e.color))}}_getClusterSymbol(){const e=this.layer,t=\"featureReduction\"in e&&e.featureReduction,i=t&&\"symbol\"in t&&t.renderer;return i&&!0!==i?.authoringInfo?.isAutoGenerated?null:t&&\"symbol\"in t?t.symbol:null}async _getSizeLegendElement(e,t,i,s){return{type:\"size-ramp\",title:this._clusterSizeVariable?this._getClusterTitle(t):e,infos:await K(i,t,await ae(i),this.scale,this.view,s,this._clusterSizeVariable?this._getClusterSymbol():null)}}_createSymbolTableElementMultiBand(e){const t=[],i=[\"red\",\"green\",\"blue\"];return e.forEach((e,s)=>{t.push({label:{colorName:i[s],bandName:e},src:oe[s],opacity:this.opacity??1})}),t}_updateInfosForClassedSizeRenderer(e,t){const i=e.authoringInfo&&\"class-breaks-size\"===e.authoringInfo.type,s=e.classBreakInfos.some(e=>N(e.symbol));if(i&&s){const i=X,s=Y,l=e.classBreakInfos.length,r=(i-s)/(l>1?l-1:l);t.forEach((e,t)=>{e.size=i-r*t})}}_isTallSymbol(e){let t=!1,i=!1;if(e)for(let s=0;s<e.length&&(!t||!i);s++){const l=e[s];\"size\"===l.type&&(\"height\"===l.axis&&(t=!0),\"width-and-depth\"===l.axis&&(i=!0))}return t&&i}async _generatePreviewsForLegendElements(e,t,i){const s=[];for(const l of e)for(const e of l.infos??[])if(\"infos\"in e&&e.infos&&s.push(this._generatePreviewsForLegendElements([e],t,i)),Ke(e)&&e.symbol&&!e.preview){let r=!0;if(\"cim\"===e.symbol.type){const{minScale:t,maxScale:i}=e.symbol.data;(t&&t<this.scale||i&&i>this.scale)&&(r=!1)}r&&s.push(this._generateSymbolPreviewForInfo(e,{...t,clipBloomEffect:\"theme\"in l&&\"spike\"===l.theme,cssEffectFilter:i?.arrowMarkerSymbols?.has(e.symbol)?null:t.cssEffectFilter},i?{applyScaleDrivenSize:!i.arrowMarkerSymbols?.has(e.symbol)}:void 0))}await Promise.all(s)}async _getSize(e,t){let i=null==e.size&&this._hasSizeRamp?m(22):e.size;if(this._scaleDrivenSizeVariable&&t?.applyScaleDrivenSize){const{getSize:t}=await import(\"../../../renderers/visualVariables/support/visualVariableUtils.js\");i=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:\"simple-marker\"===e.symbol.type?e.symbol.style:null})}return i}_getPreviewCIMOptions(e){return{style:\"legend\",cimOptions:{allowScalingUp:this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!e?.applyScaleDrivenSize),viewParams:this.isScaleDriven?{viewingMode:\"2d\"===this.view?.type?\"map\":this.view?.viewingMode,scale:this.view?.scale}:null}}}async _generateSymbolPreviewForInfo(e,t={},i){const{symbol:s}=e;try{if(t.size=await this._getSize(e,i),t.scale=!1,\"cim\"===s.type){const e=this._getPreviewCIMOptions(i);t={...t,...e}}e.preview=await A(s,t)}catch{e.preview=null,o.getLogger(this).warn(`Generating symbol preview failed for symbol type: ${s?.type}`)}}_getClusterRenderer(e){this._clusterSizeVariable=null;const t=\"renderer\"in this.layer?this.layer.renderer:null,i=e.renderer?.clone()||t?.clone(),s=$(e,this.layerView,this.view);if(s&&null!=i&&\"visualVariables\"in i){const t=i.visualVariables?.some(e=>\"size\"===e.type&&\"outline\"!==e.target&&!pe.test(e.valueExpression));if(!t){if(\"clusterMinSize\"in e&&\"clusterMaxSize\"in e){const{clusterMinSize:t,clusterMaxSize:i}=e;s.legendOptions=new x({showLegend:t!==i})}const t=i.visualVariables||[];i.visualVariables=t.concat([s]),this._clusterSizeVariable=s}}return i}async _loadRenderer(e){if(tt.has(e))return tt.get(e);const t=[],i=e.clone(),s=await ae(i);if(Ce(i)||Ie(i)){const e=(i.classBreakInfos||i.uniqueValueInfos).map(e=>this._fetchSymbol(e.symbol,s).then(t=>{e.symbol=t}).catch(()=>{e.symbol=null}));Array.prototype.push.apply(t,e)}return t.push(this._fetchSymbol(i.symbol||i.defaultSymbol,i.defaultSymbol?null:s).then(e=>{this._applySymbolToRenderer(i,e,Fe(i))}).catch(()=>{this._applySymbolToRenderer(i,null,Fe(i))})),await Promise.allSettled(t),tt.set(e,i),i}_applySymbolToRenderer(e,t,i){i?e.symbol=t:e.defaultSymbol=t}async _fetchSymbol(e,t){if(!e)throw new Error;if(\"web-style\"===e.type){const i=this._webStyleSymbolCache;try{const s=await e.fetchSymbol({cache:i});return this._getAppliedCloneSymbol(s,t)}catch{throw o.getLogger(this).warn(\"Fetching web-style failed!\"),new Error}}return this._getAppliedCloneSymbol(e,t)}_getAppliedCloneSymbol(e,i){if(!e||!i)return e;const s=e.clone(),l=i&&i.toRgba();return s.type.includes(\"3d\")?this._applyColorTo3dSymbol(s,l):\"cim\"===s.type?O(s,i):s.color&&(s.color=new t(l||s.color)),s}_applyColorTo3dSymbol(e,i){i&&e.symbolLayers.forEach(e=>{e&&(e.material||(e.material={}),e.material.color=new t(i))})}async _getVisualVariableLegendElements(e,t){if(!(\"visualVariables\"in e)||\"vector-field\"===e.type)return null;const i=e.visualVariables??[],s=[],l=[],n=[],a=ie(e,\"reference-size\")??ie(e,\"spike\");let o;const c=this._clusterSizeVariable;if(2===a?.sizeStops?.length&&(Ce(e)||Ie(e))){const[e,t]=a.sizeStops,i=c?c.minDataValue:e.value,s=c?c.maxDataValue:t.value;o=new D({field:a.field??void 0,normalizationField:a.normalizationField,minSize:u(e.size,10,100),maxSize:u(t.size,50,150),minDataValue:i,maxDataValue:s}),l.push(o)}for(const r of i)if(\"color\"===r.type)s.push(r);else if(\"size\"===r.type){if(\"cluster_count\"===r.field&&o)continue;l.push(r)}else\"opacity\"===r.type&&n.push(r);const d=[...s,...l,...n];let y,h;if(0===s.length&&Ce(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];y=t&&t.symbol}if(0===s.length&&Fe(e)&&(y=e.symbol),y)if(y.type.includes(\"3d\")){const e=y.symbolLayers.at(0);\"water\"===e.type?null!=e.color&&(h=e.color):null!=e.material?.color&&(h=e.material.color)}else y.url||(h=y.color);const f=this.cssEffectFilter;return(await Promise.all(d.map(async i=>{if(!i.legendOptions||!1!==i.legendOptions.showLegend){const s=Se(e)?i.field:this._getRampTitle(i,t);let l=null;const r=ue(t,i,this.view.timeZone);if(\"color\"===i.type){const e=await G(i,null,r)??[];l={type:\"color-ramp\",title:s,infos:e,preview:M(e.map(e=>e.color),{cssEffectFilter:f})},this._hasColorRamp||(this._hasColorRamp=e.length>0)}else if(\"size\"===i.type&&\"outline\"!==i.target)pe.test(i.valueExpression)?this._clusterSizeVariable||(this._scaleDrivenSizeVariable=i):(l=await this._getSizeLegendElement(s,i,e,r),o===i&&\"spike\"===a?.theme&&(l.theme=a.theme),this._hasSizeRamp||(this._hasSizeRamp=!(null==l.infos||!l.infos.length)));else if(\"opacity\"===i.type){const e=await G(i,h,r)??[];l={type:\"opacity-ramp\",title:s,infos:e,preview:M(e.map(e=>e.color),{cssEffectFilter:f})},this._hasOpacityRamp||(this._hasOpacityRamp=e.length>0)}return l?.infos?l:null}}))).filter(r)}_getDomainName(e,t,i){if(e&&\"function\"!=typeof e){const s=\"getField\"in i&&i.getField?.(e),l=s&&\"getFieldDomain\"in i&&i.getFieldDomain?i.getFieldDomain(s.name,{excludeImpliedDomains:has(\"esri-widget-legacy-field-domain-calculation\")}):null;return\"coded-value\"===l?.type?l.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,i=e.field;if(\"featureReduction\"in t&&t.featureReduction&&\"cluster\"===t.featureReduction.type){const e=t.featureReduction,s=\"popupTemplate\"in e&&e.popupTemplate,l=s&&s.fieldInfos;if(l)for(const t of l)if(t.fieldName===i)return\"cluster_count\"===i?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let i=e.field,s=e.normalizationField,l=!1,r=!1,n=!1,a=null;i=\"function\"==typeof i?null:i,s=\"function\"==typeof s?null:s;const o=e.legendOptions?.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if(\"renderer\"in t&&t.renderer&&\"authoringInfo\"in t.renderer&&t.renderer.authoringInfo?.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const i=e[t];if(\"color\"===i.type){if(\"ratio\"===i.style){l=!0;break}if(\"percent\"===i.style){r=!0;break}if(\"percent-of-total\"===i.style){n=!0;break}}}}a={field:i&&this._getFieldAlias(i,t),normField:s&&this._getFieldAlias(s,t),ratio:l,ratioPercent:r,ratioPercentTotal:n}}return a}_getRendererTitle(e,t){const i=e;if(i.legendOptions?.title)return i.legendOptions.title;if(i.valueExpressionTitle)return i.valueExpressionTitle;let s=i.field,l=null,r=null;if(Ce(i)&&(l=i.normalizationField,r=\"percent-of-total\"===i.normalizationType),s=\"function\"==typeof s?null:s,l=\"function\"==typeof l?null:l,Ie(i)){const{field2:e,field3:l,fieldDelimiter:r}=i;let n=s&&this._getFieldAlias(s,t);return e&&(n=`<${n}>${r}<${this._getFieldAlias(e,t)}>`,l&&(n=`${n}${r}<${this._getFieldAlias(l,t)}>`)),n}let n=null;return(s||l)&&(n={field:s&&this._getFieldAlias(s,t),normField:l&&this._getFieldAlias(l,t),normByPct:r}),n}_getFieldAlias(e,t){const i=\"featureReduction\"in t&&t.featureReduction;if(C(t)&&!i)return t.getFieldAlias(e)||e;const s=\"popupTemplate\"in t?t.popupTemplate:null,l=s?.fieldInfos;let r=l?.find(t=>e===t.fieldName),n=null;\"getField\"in t&&t.getField?n=t.getField(e):\"fieldsIndex\"in t&&t.fieldsIndex&&(n=t.fieldsIndex.get(e));let a=null;i&&(r??=\"popupTemplate\"in i?i.popupTemplate?.fieldInfos?.find(t=>e?.toLowerCase()===t.fieldName?.toLowerCase()):void 0,\"fields\"in i&&i.fields&&(a=i.fields.find(t=>t.name?.toLowerCase()===e?.toLowerCase())));const o=r||n||a;let u=null;return o&&(u=r?.label||n?.alias||a?.alias||\"name\"in o&&o.name||\"fieldName\"in o&&o.fieldName||null),u}_isUnclassedRenderer(e){const t=e.visualVariables;let i=!1;return Ce(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(i=e.field?t.some(t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField)):!!t.length),i}};e([b()],it.prototype,\"_loading\",void 0),e([b()],it.prototype,\"children\",void 0),e([b({readOnly:!0})],it.prototype,\"cssEffectFilter\",null),e([b()],it.prototype,\"layerView\",void 0),e([b()],it.prototype,\"layer\",void 0),e([b()],it.prototype,\"legendElements\",void 0),e([b({readOnly:!0})],it.prototype,\"loading\",null),e([b({readOnly:!0})],it.prototype,\"opacity\",null),e([b()],it.prototype,\"parent\",void 0),e([b({readOnly:!0,dependsOn:[]})],it.prototype,\"ready\",null),e([b()],it.prototype,\"hideLayersNotInCurrentView\",void 0),e([b()],it.prototype,\"keepCacheOnDestroy\",void 0),e([b()],it.prototype,\"respectLayerDefinitionExpression\",void 0),e([b()],it.prototype,\"respectLayerVisibility\",void 0),e([b({readOnly:!0})],it.prototype,\"scale\",null),e([b()],it.prototype,\"sublayerIds\",void 0),e([b({readOnly:!0})],it.prototype,\"isScaleDriven\",null),e([b()],it.prototype,\"title\",void 0),e([b({readOnly:!0,dependsOn:[\"ready\"],value:0})],it.prototype,\"version\",null),e([b()],it.prototype,\"view\",void 0),it=e([_(\"esri.widgets.Legend.support.ActiveLayerInfo\")],it);export{it as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import\"../../intl.js\";import i from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{watch as t,initial as s,when as a}from\"../../core/reactiveUtils.js\";import{property as n}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{get as l}from\"../../core/accessorSupport/get.js\";import{getEffectiveFeatureReduction as y}from\"../../views/2d/layers/features/layerAdapters/featureReductionUtils.js\";import d from\"./support/ActiveLayerInfo.js\";import{onLocaleChange as h}from\"../../intl/locale.js\";const c={state:\"state\",view:\"view\",allLayerViews:\"all-layer-views\",legendProperties:\"legend-properties\"},L=r.ofType(d),f=new Set([\"esri.layers.BuildingSceneLayer\",\"esri.layers.CatalogLayer\",\"esri.layers.CSVLayer\",\"esri.layers.FeatureLayer\",\"esri.layers.GeoJSONLayer\",\"esri.layers.GeoRSSLayer\",\"esri.layers.GroupLayer\",\"esri.layers.HeatmapLayer\",\"esri.layers.ImageryLayer\",\"esri.layers.ImageryTileLayer\",\"esri.layers.MapImageLayer\",\"esri.layers.OGCFeatureLayer\",\"esri.layers.OrientedImageryLayer\",\"esri.layers.ParquetLayer\",\"esri.layers.PointCloudLayer\",\"esri.layers.StreamLayer\",\"esri.layers.SceneLayer\",\"esri.layers.SubtypeGroupLayer\",\"esri.layers.TileLayer\",\"esri.layers.VoxelLayer\",\"esri.layers.WFSLayer\",\"esri.layers.WMSLayer\",\"esri.layers.WMTSLayer\",\"esri.layers.WCSLayer\",\"esri.layers.LinkChartLayer\",\"esri.layers.catalog.CatalogFootprintLayer\",\"esri.layers.catalog.CatalogDynamicGroupLayer\",\"esri.layers.knowledgeGraph.KnowledgeGraphSublayer\",\"esri.layers.KnowledgeGraphLayer\"]),u=\"view.basemapView.baseLayerViews\",p=\"view.groundView.layerViews\",v=\"view.basemapView.referenceLayerViews\",w=[u,p,\"view.layerViews\",v];let _=class extends i{constructor(e){super(e),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new r,this._activeLayerInfosPromises=new WeakMap,this.activeLayerInfos=new L,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerDefinitionExpression=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(t(()=>this.view,()=>this._viewHandles(),s),c.view),this.addHandles(h(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get loading(){return this.activeLayerInfos.some(e=>e.loading)}get state(){return this.view?.ready?\"ready\":\"disabled\"}_viewHandles(){this.removeHandles(c.state),this.view&&this.addHandles(t(()=>this.state,()=>this._stateHandles(),s),c.state)}_stateHandles(){this._resetAll(),\"ready\"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([c.allLayerViews,c.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this.removeHandles(e);const i=this._activeLayerInfosByLayerViewId[e];i&&this._activeLayerInfosPromises.delete(i),delete this._activeLayerInfosByLayerViewId[e],i?.parent?.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{view:e}=this;if(!e)return;const{allLayerViews:i}=e;i.length&&this._refresh(),this.addHandles(i.on(\"change\",e=>this._allLayerViewsChangeHandle(e)),c.allLayerViews),this.addHandles(t(()=>[this.basemapLegendVisible,this.groundLegendVisible,this.hideLayersNotInCurrentView,this.keepCacheOnDestroy,this.layerInfos,this.respectLayerDefinitionExpression,this.respectLayerVisibility],()=>this._refresh()),c.legendProperties)}_allLayerViewsChangeHandle(e){if(e.added.length&&this._generateActiveLayerInfosForLayerViews(e.added),e.moved.length)return this._destroyViewActiveLayerInfos(),void this._refresh();if(e.removed.length){for(const{uid:i}of e.removed)this._destroyViewActiveLayerInfo(i);this._refresh()}}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.drain(e=>this._activeLayerInfosPromises.delete(e)),this._generateActiveLayerInfosForLayerViews(this._generateLayerViews())}_generateActiveLayerInfosForLayerViews(e){e.filter(this._filterBasemapLayerViews,this).filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this)}_filterBasemapLayerViews(e){if(!this.view?.basemapView)return!0;const{baseLayerViews:i,groundLayerViews:r,referenceLayerViews:t}=this.view.basemapView,s=!this.basemapLegendVisible&&(i?.includes(e)||t?.includes(e)),a=!this.groundLegendVisible&&r?.includes(e);return!s&&!a}_sortActiveLayerInfos(e){const i=this.view;if(e.length<2||!i)return;const r=[];e.forEach(i=>{if(!i.parent){const t=i.layer.parent,s=t&&\"uid\"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&e.includes(a)&&(r.push(i),i.parent=a,a.children.add(i),this._sortActiveLayerInfos(a.children))}}),e.removeMany(r);const t={};i.allLayerViews.forEach((e,i)=>t[e.layer.uid]=i),e.sort((e,i)=>{const r=t[e.layer.uid]||0;return(t[i.layer.uid]||0)-r})}_generateLayerViews(){const e=[];return w.filter(this._filterLayerViews,this).map(e=>l(this,e)).filter(e=>null!=e).forEach(this._collectLayerViews(\"layerViews\",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===u||e===v),r=!this.groundLegendVisible&&e===p;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach(t=>{i.push(t),r(t[e])}),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some(i=>this._hasLayerInfo(i,e))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some(e=>this._isLayerUIDMatching(e,i))}_isLayerViewSupported(e){return!!f.has(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this.removeHandles(e.uid),this.addHandles(t(()=>[e.legendEnabled,e.layer?.legendEnabled],()=>this._layerActiveHandle(e)),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this.removeHandles(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.layer?.legendEnabled}async _buildActiveLayerInfo(e){const i=e.layer,r=e.uid,t=this._layerInfosByLayerViewId[r];let s=this._activeLayerInfosByLayerViewId[r];s||(s=new d({layer:i,layerView:e,view:this.view??void 0}),this._activeLayerInfosByLayerViewId[r]=s);const a=void 0!==t?.title&&t.layer.uid===i.uid;s.title=a?t.title:i.title,s.respectLayerDefinitionExpression=this.respectLayerDefinitionExpression,s.respectLayerVisibility=this.respectLayerVisibility,s.hideLayersNotInCurrentView=this.hideLayersNotInCurrentView,s.keepCacheOnDestroy=this.keepCacheOnDestroy,s.sublayerIds=t?.sublayerIds||[];const n=i.parent&&\"uid\"in i.parent?this._layerViewByLayerId[i.parent?.uid]:null;s.parent=this._activeLayerInfosByLayerViewId[n?.uid],this._addActiveLayerInfo(s),this._constructLegendElements(s),this._attachHandlesToActiveLayerInfo(s)}_attachHandlesToActiveLayerInfo(e){const{layer:i,layerView:r}=e,n=r.uid;this.removeHandles(n),this.addHandles([t(()=>i.title,i=>this._titleHandle(i,e)),t(()=>[i.opacity,\"renderer\"in i&&i.renderer,\"pointSymbol\"in i&&i.pointSymbol,\"lineSymbol\"in i&&i.lineSymbol,\"polygonSymbol\"in i&&i.polygonSymbol,\"effect\"in i&&i.effect,\"featureReduction\"in i&&y(i,r.view),this.view?.timeZone],()=>this._constructLegendElements(e)),t(()=>\"filter\"in r&&r.filter,()=>{null!=y(r.layer,r.view)&&this._constructLegendElements(e)}),a(()=>!!this.view?.stationary,()=>this._scaleHandle(e)),t(()=>e.loading,()=>this.notifyChange(\"loading\"),s)],n),this.respectLayerVisibility&&this.addHandles([t(()=>i.legendEnabled,i=>this._legendEnabledHandle(i,e)),t(()=>r.legendEnabled,i=>{this.view?.suspended||this._legendEnabledHandle(i,e)})],n),this.respectLayerDefinitionExpression&&\"definitionExpression\"in i&&this.addHandles(t(()=>i.definitionExpression,()=>this._constructLegendElements(e)),n)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&!this.activeLayerInfos.includes(e)){const i=e.parent;if(i)i.children.includes(e)||i.children.push(e),this._sortActiveLayerInfos(i.children);else{const i=this.layerInfos?.some(e=>e.layer.uid===r.uid),t=r.parent;(t&&\"uid\"in t?this._layerViewByLayerId[t.uid]:null)&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach(i=>{const r=i.layer.parent,t=r&&\"uid\"in r?this._layerViewByLayerId[r?.uid]:null,s=this._activeLayerInfosByLayerViewId[t?.uid];s&&(e.push(i),i.parent=s)}),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach(e=>this._addActiveLayerInfo(e)))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}async _getBuildLegendPromise(e){const{layer:i}=e;if(\"featureCollections\"in i&&i.featureCollections)return e.buildLegendElementsForFeatureCollections(i.featureCollections);if(\"featureReduction\"in i&&i.featureReduction&&\"renderer\"in i.featureReduction&&(\"binning\"===i.featureReduction.type||\"cluster\"===i.featureReduction.type)&&(!this.view||i.featureReduction.maxScale<=this.view.scale))return e.buildLegendElementsForFeatureReduction(i.featureReduction);if(\"renderer\"in i&&i.renderer&&!(\"sublayers\"in i))return e.buildLegendElementsForRenderer(i.renderer);if(\"url\"in i&&i.url&&\"catalog\"!==i.type&&\"knowledge-graph\"!==i.type)return e.buildLegendElementsForTools();const r=e.children.map(e=>this._constructLegendElements(e));return Promise.all(r).then(()=>{})}async _constructLegendElements(e){const i=this._activeLayerInfosPromises.get(e);i&&await i.catch(()=>{});const r=this._getBuildLegendPromise(e);this._activeLayerInfosPromises.set(e,r),r.finally(()=>{this._activeLayerInfosPromises.delete(e)})}};e([n({type:L})],_.prototype,\"activeLayerInfos\",void 0),e([n()],_.prototype,\"basemapLegendVisible\",void 0),e([n()],_.prototype,\"groundLegendVisible\",void 0),e([n()],_.prototype,\"hideLayersNotInCurrentView\",void 0),e([n()],_.prototype,\"keepCacheOnDestroy\",void 0),e([n({readOnly:!0})],_.prototype,\"loading\",null),e([n()],_.prototype,\"respectLayerDefinitionExpression\",void 0),e([n()],_.prototype,\"respectLayerVisibility\",void 0),e([n()],_.prototype,\"layerInfos\",void 0),e([n({readOnly:!0})],_.prototype,\"state\",null),e([n()],_.prototype,\"view\",void 0),_=e([o(\"esri.widgets.Legend.LegendViewModel\")],_);export{_ as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend--card\",a=\"esri-legend\",r={activated:`${e}__carousel-indicator--activated`,base:e,stacked:`${a}--stacked`,carouselTitle:`${e}__carousel-title`,indicator:`${e}__carousel-indicator`,intervalSeparator:`${e}__interval-separator`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageLabel:`${e}__image-label`,layerCaption:`${e}__layer-caption`,labelElement:`${e}__label-element`,layerRow:`${e}__layer-row`,labelCell:`${e}__label-cell`,message:`${e}__message`,rampLabel:`${e}__ramp-label`,section:`${e}__section`,relationshipSection:`${e}__relationship-section`,serviceCaptionText:`${e}__service-caption-text`,serviceContent:`${e}__service-content`,service:`${e}__service`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,symbol:`${e}__symbol`,sizeRampRow:`${e}__size-ramp-row`,symbolRow:`${e}__symbol-row`,symbolCell:`${e}__symbol-cell`,carousel:`${e}__carousel`,carouselItem:`${e}__carousel-item`,indicatorContainer:`${e}__carousel-indicator-container`,intervalSeparatorsContainer:`${e}__interval-separators-container`,relationshipLabelContainer:`${e}__relationship-label-container`,labelContainer:`${e}__label-container`,serviceCaptionContainer:`${e}__service-caption-container`,symbolContainer:`${e}__symbol-container`,colorRampContainer:`${e}__color-ramp-container`,sizeRampContainer:`${e}__size-ramp-container`,sizeRampPreview:`${e}__size-ramp-preview`,pieChartRampPreview:`${e}__pie-chart-ramp-preview`,rampContainer:`${a}__ramps`,sizeRampHorizontal:`${a}__size-ramp--horizontal`,rampLabelsContainer:`${a}__ramp-labels`,layerInfo:`${a}__layer-cell ${a}__layer-cell--info`,univariateAboveAndBelowColorRamp:\"esri-univariate-above-and-below-ramp__color--card\"};export{r as css};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../intl.js\";import{stripHTML as e}from\"../../../core/string.js\";import{substitute as t}from\"../../../intl/substitute.js\";import{formatNumber as n}from\"../../../intl/number.js\";function r(e,t){return t}function i(e){const t=this;e.appendChild(t)}function o(n,i,o){if(!i)return;if(\"number\"==typeof i)return i;if(\"string\"==typeof i)return e(i);if(\"value\"in i||\"unit\"in i)return t(n.dotValue,i);if(\"colorName\"in i&&\"bandName\"in i)return n[i.colorName]+\": \"+(n[i.bandName]||i.bandName);if(\"showCount\"in i)return i.showCount?n.clusterCountTitle:void 0;let u=null;return r(i,o)?u=i.ratioPercentTotal?\"showRatioPercentTotal\":i.ratioPercent?\"showRatioPercent\":i.ratio?\"showRatio\":i.normField?\"showNormField\":i.field?\"showField\":null:l(i,o)&&(u=i.normField?\"showNormField\":i.normByPct?\"showNormPct\":i.field?\"showField\":null),u?t(\"showField\"===u?\"{field}\":n[u],{field:i.field,normField:i.normField}):void 0}function l(e,t){return!t}function u(e,t){return!!(t&&\"Stretched\"===t&&\"version\"in e&&\"number\"==typeof e.version&&e.version>=10.3&&\"esri.layers.ImageryLayer\"===e.declaredClass)}function a(e,t){return e.label?t[e.label]+\": \"+(\"string\"==typeof e.value?e.value:n(e.value??0,{style:\"decimal\",notation:e.value?.toString().toLowerCase().includes(\"e\")?\"scientific\":\"standard\"})):\"\"}export{i as attachToNode,a as getStretchStopLabel,o as getTitle,u as isImageryStretchedLegend,l as isRendererTitle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../intl.js\";import{getTitle as t,isRendererTitle as e,getStretchStopLabel as r}from\"../../support/styleUtils.js\";import{substitute as i}from\"../../../../intl/substitute.js\";function l(t,e,i){switch(e){case\"heatmap-ramp\":return i[t.label]||t.label;case\"stretch-ramp\":return r(t,i);default:return t.label}}function n(r,i){if(!r.title||\"string\"==typeof r.title)return r.title;const l=\"color-ramp\"===r.type||\"opacity-ramp\"===r.type,n=r.title,a=t(i,n,l);return e(n,l)&&n.title?`${n.title} (${a})`:a}function a(t){return!(!t||\"object\"!=typeof t)}function o(e,r){const l=t(e,r,!1),n=l?e.previewTemplateAriaLabel:e.previewAriaLabel;return i(n,{label:l})}export{n as getLegendElementTitle,o as getPreviewAriaLabelIntl,l as getRampStopLabel,a as isWidthAndHeight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{renderSVG as s}from\"../../../../symbols/support/svgUtils.js\";import o from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getRampStopLabel as l}from\"../support/utils.js\";import\"../../../support/widgetUtils.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const a=25,n=25,c=100;let d=class extends o{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const e=this.legendElement.infos.slice().reverse();return p(\"div\",{class:this.classes(i.layerRow,i.colorRampContainer)},this._renderRampLabel(e[0]),p(\"div\",{class:i.symbolContainer},this._renderPreview(e),this._renderMiddleStopRampLabel(e)),this._renderRampLabel(e.at(-1)))}_renderPreview(e){const{opacity:t}=this,r=\"heatmap-ramp\"===this.legendElement.type,o=e.length-1,i=n,l=o>2&&!r?a*o:c,d=l+20,m=10,h=[[{shape:{type:\"path\",path:`M0 ${i/2} L${m} 0 L${m} ${i} Z`},fill:e[0].color,stroke:{width:0}},{shape:{type:\"rect\",x:m,y:0,width:l,height:i},fill:{type:\"linear\",x1:m,y1:0,x2:l+m,y2:0,colors:e.map((e,t)=>({color:e.color,offset:r&&\"ratio\"in e?e.ratio:t/o}))},stroke:{width:0}},{shape:{type:\"path\",path:`M${l+m} 0 L${d} ${i/2} L${l+m} ${i} Z`},fill:e[e.length-1].color,stroke:{width:0}}]],y=s(h,d,i),f={filter:this.cssEffectFilter??void 0,opacity:null==t?void 0:`${t}`};return p(\"div\",{styles:f},y)}_renderMiddleStopRampLabel(e){const t=e.length%2!=0?e[e.length/2|0]:null;return t?p(\"div\",{class:i.intervalSeparatorsContainer},p(\"div\",{class:i.intervalSeparator},\"|\"),this._renderRampLabel(t)):null}_renderRampLabel(e){return p(\"div\",{class:i.rampLabel},l(e,this.legendElement.type,this.messages))}};e([t()],d.prototype,\"cssEffectFilter\",void 0),e([t()],d.prototype,\"legendElement\",void 0),e([t()],d.prototype,\"messages\",void 0),e([t()],d.prototype,\"opacity\",void 0),d=e([r(\"esri.widgets.Legend.styles.card.ColorRamp\")],d);export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import{isWidthAndHeight as i}from\"./utils.js\";import{attachToNode as t}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as s}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const o=\"#ddd\",n=window.devicePixelRatio,a=\"esri-spike-ramp\",r={spikeRampContainer:`${a}__container`,spikeRampPreviewContainer:`${a}__preview-container`,spikeRampPreview:`${a}__preview`,spikeRampSymbolPreview:`${a}__symbol-preview`,spikeRampLines:`${a}__lines`,spikeRampLabelsContainer:`${a}__labels-container`,spikeRampLabel:`${a}__label`};function p(e){return 5!==e.infos.length?null:s(\"div\",{class:r.spikeRampContainer},s(\"div\",{class:r.spikeRampPreviewContainer},l(e),m(e)),d(e))}function l(e){const[i,o,n]=h(e).map(({preview:e})=>{if(!e)return null;const i=e.cloneNode(!0);return i.classList.add(r.spikeRampSymbolPreview),i});return i&&o&&n?s(\"div\",{class:r.spikeRampPreview},s(\"div\",{afterCreate:t,bind:n}),s(\"div\",{afterCreate:t,bind:o}),s(\"div\",{afterCreate:t,bind:i})):null}function m(a){const[{width:p,height:l},{width:m},{width:d,height:c}]=h(a).map(({size:t})=>i(t)?{width:e(t.width),height:e(t.height)}:{width:0,height:0}),v=10,b=8,u=p+m+d+3*v,w=l,k=document.createElement(\"canvas\");k.width=(u+v)*n,k.height=w*n,k.style.width=k.width/n+\"px\",k.style.height=k.height/n+\"px\";const f=k.getContext(\"2d\");f.beginPath();const g=u-(p/2+v),R=0,_=u+b,y=0;f.moveTo(g*n,R*n),f.lineTo(_*n,y*n);const C=(u-b)/2,L=(l-c)/2,x=u+b,P=(l-c)/2;f.moveTo(C*n,L*n),f.lineTo(x*n,P*n);const $=d/2,j=w-c,T=u+b,S=w-c;return f.moveTo($*n,j*n),f.lineTo(T*n,S*n),f.strokeStyle=o,f.lineWidth=.5*n,f.stroke(),s(\"div\",{afterCreate:t,bind:k,class:r.spikeRampLines})}function d(t){const[{label:o,height:n},{label:a},{label:p,height:l}]=h(t).map(({label:t,size:s})=>({label:t,height:i(s)?e(s.height):0})),m=n-l,d={position:\"absolute\",top:\"0\"},c={position:\"absolute\",top:m/2+\"px\"},v={position:\"absolute\",top:`${m}px`};return s(\"div\",{class:r.spikeRampLabelsContainer},s(\"div\",{class:r.spikeRampLabel,styles:d},o),s(\"div\",{class:r.spikeRampLabel,styles:c},a),s(\"div\",{class:r.spikeRampLabel,styles:v},p))}function h(e){return e.infos.filter((e,i)=>i%2==0)}export{p as renderSpikeRamp};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{pt2px as t}from\"../../../../core/screenUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{renderSpikeRamp as n}from\"../support/sizeRampUtils.js\";import{attachToNode as l}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as a}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const c=\"#ddd\",p=window.devicePixelRatio;function d(e){if(!e)return;if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t.resource?.primitive;return\"circle\"===s||\"cross\"===s||\"kite\"===s||\"sphere\"===s||\"cube\"===s||\"diamond\"===s}const t=e.style;return\"circle\"===t||\"diamond\"===t||\"cross\"===t}function m(e){if(e){if(e.type.includes(\"3d\")){if(!e.symbolLayers?.length)return;const t=e.symbolLayers.at(-1),s=t?.resource?.primitive;return\"triangle\"===s||\"cone\"===s||\"tetrahedron\"===s}return\"triangle\"===e.style}}let y=class extends r{constructor(e,t){super(e,t),this.hasIndicators=!1,this.legendElement=null,this.opacity=1}render(){if(\"spike\"===this.legendElement.theme)return a(\"div\",{styles:{display:\"flex\",flex:\"1\",justifyContent:\"center\"}},n(this.legendElement));const{legendElement:e,hasIndicators:t,opacity:s}=this,i=e.infos,r=i.at(0),c=i.at(-1);if(!r||!c)return null;const{label:p,...d}=r,{label:m,...y}=c;let u=d.preview,f=y.preview;const h={\"flex-direction\":t?\"column\":\"row-reverse\"};if(!u||!f)return null;u=u.cloneNode(!0),u.style.display=\"flex\",f=f.cloneNode(!0),f.style.display=\"flex\";const g={opacity:`${s??\"\"}`};return a(\"div\",{class:this.classes(o.layerRow,{[o.sizeRampRow]:t})},a(\"div\",{class:o.rampLabel},t?p:m),a(\"div\",{class:o.sizeRampContainer,styles:h},a(\"div\",{afterCreate:l,bind:u,class:o.sizeRampPreview,styles:g}),this._renderSizeRampLines(e),a(\"div\",{afterCreate:l,bind:f,class:o.sizeRampPreview,styles:g})),a(\"div\",{class:o.rampLabel},t?m:p))}_renderSizeRampLines(e){const s=e.infos,i=s.at(0),r=s.at(-1);if(!i||!r)return null;const o=i.symbol,n=this.hasIndicators,y=i.size&&\"number\"==typeof i.size?i.size:0,u=r.size&&\"number\"==typeof r.size?r.size:0,f=i.outlineSize||0,h=r.outlineSize||0,g=t(y+f)*p,v=t(u+h)*p,b=n?g:g+50*p,x=n?g/2+50*p:g,z=m(o),j=d(o),w=document.createElement(\"canvas\");w.width=b,w.height=x,w.style.width=w.width/p+\"px\",w.style.height=w.height/p+\"px\";const R=w.getContext(\"2d\");if(n){R.beginPath();const e=0,t=0,s=b/2-v/2,i=x;R.moveTo(e,t),R.lineTo(s,i);const r=b,o=0,n=b/2+v/2,l=x;R.moveTo(r,o),R.lineTo(n,l)}else{R.beginPath();const e=0,t=x/2-v/2,s=b,i=0;R.moveTo(e,t),R.lineTo(s,i);const r=0,o=x/2+v/2,n=b,l=x;R.moveTo(r,o),R.lineTo(n,l)}return R.strokeStyle=c,R.stroke(),a(\"div\",{afterCreate:l,bind:w,styles:n?{display:\"flex\",marginTop:`-${z?0:j?g/2:0}px`,marginBottom:`-${z?v:j?v/2:0}px`}:{display:\"flex\",marginRight:`-${z?0:j?g/2:0}px`,marginLeft:`-${z?0:j?v/2:0}px`}})}};e([s()],y.prototype,\"hasIndicators\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([i(\"esri.widgets.Legend.styles.card.SizeRamp\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";import\"../../../../libs/maquette/projection.js\";import{createProjector as t}from\"../../../../libs/maquette/projector.js\";import{isNumber as i}from\"../../../../support/guards.js\";import{renderColorRampPreviewHTML as o}from\"../../../../symbols/support/symbolUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const r=t(),n=10,s=20,a=10,c=20,f={univariateAboveAndBelowSymbol:\"esri-univariate-above-and-below-ramp__symbol\",colorRamp:\"esri-legend__color-ramp\"};function p(e=\"vertical\"){const t=\"stroke:rgb(200, 200, 200);stroke-width:1\";return\"vertical\"===e?l(\"svg\",{height:\"4\",width:\"10\"},l(\"line\",{style:t,x1:\"0\",x2:\"10\",y1:\"2\",y2:\"2\"})):l(\"svg\",{height:\"10\",width:\"10\"},l(\"line\",{style:t,x1:\"5\",x2:\"5\",y1:\"0\",y2:\"10\"}))}function m(e,t=\"vertical\"){const i=document.createElement(\"div\");return i.style.height=`${s}px`,i.className=f.univariateAboveAndBelowSymbol,null!=e&&(i.style.opacity=e.toString()),r.append(i,p.bind(null,t)),i}function u(t,o,l=\"vertical\",r){t.infos.forEach((t,n)=>{if(r&&2===n)t.preview=m(o,l);else{const o=(i(t.size)?e(t.size):0)+(\"horizontal\"===l?c:a),r=t.preview,n=\"div\"===r?.tagName.toLowerCase(),s=n?r:document.createElement(\"div\");s.className=f.univariateAboveAndBelowSymbol,\"horizontal\"===l?s.style.width=`${o}px`:s.style.height=`${o}px`,!n&&r&&s.appendChild(r),t.preview=s}})}function v(t,o=\"classic\"){const l=t.infos,r=l.at(0),n=l.at(-1),s=i(r.size)?e(r.size):0,c=i(n.size)?e(n.size):0;return\"classic\"===o?(s+a)/2:(s-c)/2}function h(e,t){if(!e)return null;const i=e.infos.map(e=>e.color),l=o(\"full\"===t.type?i:\"above\"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,cssEffectFilter:t.cssEffectFilter,ariaLabel:t.ariaLabel});return l.className=f.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function d(t,o,l,r=\"vertical\"){let f=0;const p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m;for(let h=u;h<=v;h++)if(l&&h===m)f+=\"horizontal\"===r?n:s;else{const t=p[h].size;f+=(i(t)?e(t):0)+(\"horizontal\"===r?c:a)}return Math.round(f)}function y(t,o,l,r=\"vertical\"){const f=d(t,o,l,r),p=t.infos,m=Math.floor(p.length/2),u=\"full\"===o||\"above\"===o?0:m,v=\"full\"===o||\"below\"===o?p.length-1:m,h=i(p[u].size)?p[u].size:0,y=i(p[v].size)?p[v].size:0,g=\"full\"===o?h+y:\"above\"===o?h:y,b=l?\"vertical\"===r?s:n:0,z=\"vertical\"===r?a*(\"full\"===o?2:1):c*(\"full\"===o?2:1);return Math.round(f-(e(g)/2+b/2+z/2))}function g(e,t,i=\"vertical\"){const o=e.infos;let l=o.find(({type:e})=>\"size-ramp\"===e),r=o.find(({type:e})=>\"color-ramp\"===e);return l&&(l={...l},l.infos=[...l.infos],u(l,t,i,!0)),r&&(r={...r},r.infos=[...r.infos]),\"horizontal\"===i&&(l?.infos.reverse(),r?.infos.reverse()),{sizeRampElement:l,colorRampElement:r}}function b(e,t=\"vertical\"){const i=e.infos;let o=i.find(({type:e})=>\"size-ramp\"===e),l=i.find(({type:e})=>\"color-ramp\"===e);return o&&(o={...o},o.infos=[...o.infos],u(o,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),\"horizontal\"===t&&(o?.infos.reverse(),l?.infos.reverse()),{sizeRampElement:o,colorRampElement:l}}const z={marginLeft:\"3px\"},w={display:\"table-cell\",verticalAlign:\"middle\"},x={display:\"flex\",alignItems:\"flex-start\"};export{g as getUnivariateAboveAndBelowRampElements,v as getUnivariateColorRampMargin,h as getUnivariateColorRampPreview,y as getUnivariateColorRampSize,b as getUnivariateColorSizeRampElements,d as getUnivariateSizeRampSize,z as univariateColorRampContainerStyles,w as univariateColorRampStyles,x as univariateRampContainerStyles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as s,getUnivariateSizeRampSize as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";let f=class extends r{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:o,key:r}=this,{sizeRampElement:f,colorRampElement:y}=s(e,t,\"horizontal\");if(!f)return null;const h=l(f,\"full\",!0,\"horizontal\"),v=a(f,\"above\",!0,\"horizontal\"),u=a(f,\"below\",!0,\"horizontal\"),g=12,b=this.messages?.previewColorRampAriaLabel,w=p(y,{width:v,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"above\",cssEffectFilter:o,ariaLabel:b}),x=p(y,{width:u,height:g,rampAlignment:\"horizontal\",opacity:t,type:\"below\",cssEffectFilter:o,ariaLabel:b}),j=n(f,\"card\"),E=f.infos.map(e=>e.label),z=E.length-1,C=E.map((e,t)=>0===t||t===z?d(\"div\",{key:t},e):null),R={display:\"flex\",flexDirection:\"column\"},L={display:\"flex\",flexDirection:\"row\"},A={marginTop:\"3px\",display:\"flex\"};m(this.container)?A.marginRight=`${j}px`:A.marginLeft=`${j}px`;const k={width:`${h}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return d(\"div\",{class:i.layerRow,key:`${r}-container`,styles:R},d(\"div\",{class:this.classes(i.symbolContainer,i.sizeRampHorizontal),styles:L},f.infos.map((e,t)=>d(\"div\",{afterCreate:c,bind:e.preview,class:i.symbol,key:t}))),w?d(\"div\",{class:i.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:A},d(\"div\",{afterCreate:c,bind:w}),d(\"div\",{afterCreate:c,bind:x})):null,d(\"div\",{class:i.layerInfo},d(\"div\",{class:i.rampLabelsContainer,styles:k},C)))}};e([t()],f.prototype,\"cssEffectFilter\",void 0),e([t()],f.prototype,\"legendElement\",void 0),e([t()],f.prototype,\"messages\",void 0),e([t()],f.prototype,\"opacity\",void 0),f=e([o(\"esri.widgets.Legend.styles.card.UnivariateAboveAndBelowRamp\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../Widget.js\";import{css as r}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateSizeRampSize as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,getUnivariateColorRampMargin as n}from\"../support/univariateUtils.js\";import{attachToNode as c}from\"../../support/styleUtils.js\";import{isRTL as m}from\"../../../support/widgetUtils.js\";import{tsx as d}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";let f=class extends s{constructor(e,t){super(e,t),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:t,cssEffectFilter:o,key:s}=this,{sizeRampElement:f,colorRampElement:y}=i(e,\"horizontal\");if(!f)return null;const u=l(f,\"full\",!1,\"horizontal\"),g=a(f,\"full\",!1,\"horizontal\"),v=p(y,{width:g,height:12,rampAlignment:\"horizontal\",opacity:t,type:\"full\",cssEffectFilter:o,ariaLabel:this.messages?.previewColorRampAriaLabel}),h=n(f,\"card\"),x=f.infos.length-1,j=f.infos.map((e,t)=>0===t||t===x?d(\"div\",{key:t},e.label):null),b={display:\"flex\",flexDirection:\"column\"},w={display:\"flex\",flexDirection:\"row\"},C={marginTop:\"3px\",display:\"flex\"};m(this.container)?C.marginRight=`${h}px`:C.marginLeft=`${h}px`;const E={width:`${u}px`,display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\"};return d(\"div\",{class:r.layerRow,key:`${s}-container`,styles:b},d(\"div\",{class:this.classes(r.symbolContainer,r.sizeRampHorizontal),styles:w},f.infos.map((e,t)=>d(\"div\",{afterCreate:c,bind:e.preview,class:r.symbol,key:t}))),d(\"div\",{class:r.univariateAboveAndBelowColorRamp,key:\"color-ramp-preview\",styles:C},d(\"div\",{afterCreate:c,bind:v})),d(\"div\",{class:r.layerInfo},d(\"div\",{class:r.rampLabelsContainer,styles:E},j)))}};e([t()],f.prototype,\"cssEffectFilter\",void 0),e([t()],f.prototype,\"legendElement\",void 0),e([t()],f.prototype,\"messages\",void 0),e([t()],f.prototype,\"opacity\",void 0),f=e([o(\"esri.widgets.Legend.styles.card.UnivariateColorSizeRamp\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import s from\"../../../../Color.js\";import\"../../../../intl.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as i}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import l from\"./ColorRamp.js\";import{css as a}from\"./css.js\";import o from\"./SizeRamp.js\";import n from\"./UnivariateAboveAndBelowRamp.js\";import c from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as p}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as h,getPreviewAriaLabelIntl as m}from\"../support/utils.js\";import{attachToNode as d,isImageryStretchedLegend as y,getTitle as g}from\"../../support/styleUtils.js\";import{Heading as f,incrementHeadingLevel as u}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{tsx as b}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";import{substitute as v}from\"../../../../intl/substitute.js\";var E;let w=E=class extends r{constructor(e,s){super(e,s),this.cssEffectFilter=null,this.hasIndicators=!1,this.headingLevel=3,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=h(this.legendElement,this.messages),t=this.hasIndicators&&!this.isChild?b(\"div\",null,b(f,{class:a.carouselTitle,level:this.headingLevel},this.activeLayerInfo.title),b(f,{class:a.layerCaption,level:u(this.headingLevel)},s)):s?b(f,{class:a.layerCaption,level:this.headingLevel},s):null;return b(\"section\",{\"aria-labelledby\":this.key,class:a.section,id:`${this.key}-panel`,key:this.key,role:\"tabpanel\",tabIndex:0},t,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return b(o,{hasIndicators:this.hasIndicators,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return b(l,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return p(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":{const{preview:e}=this.legendElement;if(!e)return null;const s=v(this.messages.previewPieChartAriaLabel,{label:null});return s&&e.querySelector(\"svg\")?.setAttribute(\"aria-label\",s),b(\"div\",{afterCreate:d,bind:e,class:a.pieChartRampPreview,key:`${this.key}-preview`})}case\"univariate-above-and-below-ramp\":return b(n,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return b(c,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map(s=>this._renderElementInfo(s,e.legendType)).filter(Boolean);if(!s.length)return null;const t=this.activeLayerInfo.legendElements.some(({type:e})=>\"relationship-ramp\"===e),i=s[0]?.properties?.classes?.[a.symbolRow],r={[a.labelContainer]:!i&&!t,[a.relationshipLabelContainer]:t};return b(\"div\",{class:this.classes(r)},s)}_renderElementInfo(e,s){const{layer:t}=this,i=\"label\"in e?e.label:null,r=`${this.key}-${i}`;if(\"type\"in e&&e.type)return b(E,{activeLayerInfo:this.activeLayerInfo,cssEffectFilter:this.cssEffectFilter,hasIndicators:this.hasIndicators,headingLevel:this.headingLevel,isChild:!0,key:r,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const l=y(t,s),o=g(this.messages,i,!1)||\"\";if(\"src\"in e&&e.src)return b(\"div\",{class:a.layerRow,key:`${r}-row`},this._renderImage(e,t,l),b(\"div\",{class:a.imageLabel},o));if(\"symbol\"in e&&e.preview){if(!e.symbol?.type.includes(\"simple-fill\")){if(!e.label)return b(\"div\",{afterCreate:d,bind:e.preview,key:`${r}-row`});const s={[a.symbolCell]:this.hasIndicators},{preview:t}=e,i=\"previewAriaLabel\"in e?e.previewAriaLabel:null,l=\"label\"in e?g(this.messages,e.label,!1):null,n=t.querySelector(\"svg\"),c=m(this.messages,i||l);return c&&n&&n.setAttribute(\"aria-label\",c),b(\"div\",{class:this.classes(a.layerRow,{[a.symbolRow]:this.hasIndicators}),key:`${r}-row`},b(\"div\",{afterCreate:d,bind:t,class:this.classes(s)}),b(\"div\",{class:this.classes(a.imageLabel,{[a.labelCell]:this.hasIndicators})},o))}return b(\"div\",{class:a.layerRow,key:`${r}-row`},b(\"div\",{class:a.labelElement,styles:this._getBackgroundStyles(e)},o))}return null}_getBackgroundStyles(e){const t=e.symbol,i=t.color,r=!!i?.a,l=\"outline\"in t?t.outline:null,a=!!l?.color?.a,o=new s(r&&i?[i.r,i.g,i.b,i.a*this.layer.opacity]:[255,255,255,0]),n=a&&l.color?new s([l.color.r,l.color.g,l.color.b,l.color.a*this.layer.opacity]):new s([255,255,255,0]),c=e.symbol.color?.isBright??!0,p=c?\"black\":\"white\",h=c?\"rgba(255, 255, 255, .6)\":\"rgba(0, 0, 0, .6)\";return{background:r?o.toCss(!0):\"none\",color:p,textShadow:`-1px -1px 0 ${h},\\n                  1px -1px 0 ${h},\\n                  -1px 1px 0 ${h},\\n                  1px 1px 0 ${h}`,border:a?`1px solid ${n.toCss(!0)}`:\"none\",filter:this.cssEffectFilter??void 0}}_renderImage(e,s,t){const{previewAriaLabel:i,src:r,opacity:l}=e,o=g(this.messages,e.label,!1),n={[a.imageryLayerStretchedImage]:t,[a.symbol]:!t},c={opacity:`${l??s.opacity}`},p=m(this.messages,i||o);return b(\"img\",{alt:p,\"aria-label\":p,border:0,class:this.classes(n),height:e.height,src:r,styles:c,width:e.width})}};e([t()],w.prototype,\"activeLayerInfo\",void 0),e([t()],w.prototype,\"cssEffectFilter\",void 0),e([t()],w.prototype,\"hasIndicators\",void 0),e([t()],w.prototype,\"headingLevel\",void 0),e([t()],w.prototype,\"isChild\",void 0),e([t()],w.prototype,\"layer\",void 0),e([t()],w.prototype,\"legendElement\",void 0),e([t()],w.prototype,\"messages\",void 0),w=E=e([i(\"esri.widgets.Legend.styles.card.LegendElement\")],w);export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import\"../../../../intl.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import i from\"./LegendElement.js\";import{loadCalciteComponents as a}from\"../../../support/componentsUtils.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as n}from\"../../../support/decorators/messageBundle.js\";import{tsx as l}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";import{substitute as c}from\"../../../../intl/substitute.js\";const d=768;let m=class extends r{constructor(e,s){super(e,s),this._hasIndicators=!1,this.activeLayerInfos=null,this.headingLevel=3,this.layout=\"stack\",this.messages=null,this.messagesCommon=null,this.type=\"card\",this.view=null}loadDependencies(){return a({carousel:()=>import(\"@esri/calcite-components/dist/components/calcite-carousel\"),\"carousel-item\":()=>import(\"@esri/calcite-components/dist/components/calcite-carousel-item\")})}render(){this._hasIndicators=\"auto\"===this.layout&&this.view&&this.view.container.clientWidth<=d||\"stack\"===this.layout;const e=this._hasIndicators?this._renderCarousel():this._renderLayers(),s={[o.stacked]:this._hasIndicators};return l(\"div\",{class:this.classes(o.base,s)},e||l(\"div\",{class:o.message},this.messages.noLegend))}_renderCarousel(){const e=[],s=this.activeLayerInfos;if(s)for(const t of s)this._renderSections(t,e);return e?.length?l(\"calcite-carousel\",{class:o.carousel,label:this.messages.carousel},e.map((s,t)=>l(\"calcite-carousel-item\",{class:o.carouselItem,key:t,label:c(this.messagesCommon.pagination.pageText,{index:t+1,total:e.length})},s))):null}_renderLayers(){const e=this.activeLayerInfos,s=e?.toArray()?.map(e=>this._renderLegendForLayer(e)).filter(Boolean);return s?.length?s:null}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const s=e.children.toArray().map(this._renderLegendForLayer,this);return l(\"section\",{class:this.classes(o.service,o.groupLayer),key:e.layer.uid},l(\"div\",{class:o.serviceCaptionContainer},e.title),s)}return this._renderLegendElementsForLayer(e)}_renderLegendElementsForLayer(e){const s=e.legendElements?.filter(Boolean);if(!s?.length)return null;const t=s.map(s=>l(i,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages})),r={[o.groupLayerChild]:!!e.parent};return l(\"section\",{class:this.classes(o.service,r),key:e.layer.uid},l(\"div\",{class:o.serviceCaptionContainer},l(\"div\",{class:o.serviceCaptionText},e.title)),l(\"div\",{class:o.serviceContent},t))}_renderSections(e,s){if(!e.ready)return;if(e.children.length)for(const r of e.children)this._renderSections(r,s);const t=e.legendElements;if(t?.length)for(const r of t){const t=l(i,{activeLayerInfo:e,cssEffectFilter:e.cssEffectFilter,hasIndicators:this._hasIndicators,headingLevel:this.headingLevel,isChild:!1,key:`${e.layer.uid}-${r.type}`,layer:e.layer,legendElement:r,messages:this.messages});t&&s.push(t)}}};e([s()],m.prototype,\"activeLayerInfos\",void 0),e([s()],m.prototype,\"headingLevel\",void 0),e([s()],m.prototype,\"layout\",void 0),e([s(),n(\"esri/widgets/Legend/t9n/Legend\")],m.prototype,\"messages\",void 0),e([s(),n(\"esri/t9n/common\")],m.prototype,\"messagesCommon\",void 0),e([s({readOnly:!0})],m.prototype,\"type\",void 0),e([s()],m.prototype,\"view\",void 0),m=e([t(\"esri.widgets.Legend.styles.card.CardView\")],m);export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst e=\"esri-legend\",a={service:`${e}__service`,label:`${e}__service-label`,layer:`${e}__layer`,groupLayer:`${e}__group-layer`,groupLayerChild:`${e}__group-layer-child`,layerTable:`${e}__layer-table`,layerTableSizeRamp:`${e}__layer-table--size-ramp`,layerChildTable:`${e}__layer-child-table`,layerCaption:`${e}__layer-caption`,layerBody:`${e}__layer-body`,layerRow:`${e}__layer-row`,layerCell:`${e}__layer-cell`,layerInfo:`${e}__layer-cell ${e}__layer-cell--info`,imageryLayerStretchedImage:`${e}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${e}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${e}__imagery-layer-info--stretched`,symbolContainer:`${e}__layer-cell ${e}__layer-cell--symbols`,symbol:`${e}__symbol`,rampContainer:`${e}__ramps`,sizeRamp:`${e}__size-ramp`,colorRamp:`${e}__color-ramp`,opacityRamp:`${e}__opacity-ramp`,borderlessRamp:`${e}__borderless-ramp`,rampTick:`${e}__ramp-tick`,rampFirstTick:`${e}__ramp-tick-first`,rampLastTick:`${e}__ramp-tick-last`,rampLabelsContainer:`${e}__ramp-labels`,rampLabel:`${e}__ramp-label`,message:`${e}__message`,univariateAboveAndBelowLabel:\"esri-univariate-above-and-below-ramp__label\"};export{a as css,e as legend};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import\"../../../../intl.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getRampStopLabel as i}from\"../support/utils.js\";import{attachToNode as l}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";import{substitute as a}from\"../../../../intl/substitute.js\";const m=24;let n=class extends r{constructor(e,t){super(e,t),this.legendElement=null,this.opacity=1}get _preview(){const e=this.legendElement.preview;if(!e)return null;const t=\"opacity-ramp\"===this.legendElement.type?o.opacityRamp:\"\";return e.className=`${o.colorRamp} ${t}`,null!=this.opacity&&(e.style.opacity=this.opacity.toString()),e}render(){const{legendElement:e,_preview:t}=this;if(!t)return null;const s={width:`${m}px`},r={height:t.style.height},i=a(this.messages.previewColorRampAriaLabel,{label:null});return i&&t.querySelector(\"svg\")?.setAttribute(\"aria-label\",i),p(\"div\",{class:o.layerRow,key:`${this.key}-row`},p(\"div\",{class:o.symbolContainer,styles:s},p(\"div\",{afterCreate:l,bind:t,class:o.rampContainer})),p(\"div\",{class:o.layerInfo},p(\"div\",{class:o.rampLabelsContainer,styles:r},e.infos.map((t,s)=>this._renderRampLabel(t,s,e.type)))))}_renderRampLabel(e,t,s){return p(\"div\",{class:e.label?o.rampLabel:void 0,key:`${this.key}-stop-${e.label??t}-label`},i(e,s,this.messages))}};e([t()],n.prototype,\"_preview\",null),e([t()],n.prototype,\"legendElement\",void 0),e([t()],n.prototype,\"messages\",void 0),e([t()],n.prototype,\"opacity\",void 0),n=e([s(\"esri.widgets.Legend.styles.classic.ColorRamp\")],n);export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../Widget.js\";import{css as t}from\"./css.js\";import{renderSpikeRamp as i}from\"../support/sizeRampUtils.js\";import{getTitle as l,attachToNode as p}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as m}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";let a=class extends o{constructor(e,s){super(e,s),this.legendElement=null}render(){const e=this.legendElement.infos.map(e=>this._renderRow(e)).filter(Boolean);return e.length?\"spike\"===this.legendElement.theme?i(this.legendElement):m(\"div\",{class:t.layerBody},e):null}_renderRow(e){return e.preview?m(\"div\",{class:t.layerRow,key:`${this.key}-${e.label}-row`},m(\"div\",{class:this.classes(t.symbolContainer,t.sizeRamp)},m(\"div\",{afterCreate:p,bind:e.preview,class:t.symbol})),m(\"div\",{class:t.layerInfo},l(this.messages,e.label,!1)||\"\")):null}};e([s()],a.prototype,\"legendElement\",void 0),e([s()],a.prototype,\"messages\",void 0),a=e([r(\"esri.widgets.Legend.styles.classic.SizeRamp\")],a);export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as i}from\"./css.js\";import{getUnivariateAboveAndBelowRampElements as l,getUnivariateColorRampSize as o,getUnivariateColorRampPreview as a,getUnivariateColorRampMargin as p,univariateColorRampContainerStyles as n,univariateColorRampStyles as c,univariateRampContainerStyles as m}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as v}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";let y=class extends r{constructor(e,s){super(e,s),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,cssEffectFilter:t,key:r}=this,{sizeRampElement:y,colorRampElement:b}=l(e,s);if(!y)return null;const f=this.messages.previewColorRampAriaLabel,u=o(y,\"above\",!0),g=o(y,\"below\",!0),h=12,w=a(b,{width:h,height:u,rampAlignment:\"vertical\",opacity:s,type:\"above\",cssEffectFilter:t,ariaLabel:f}),j=a(b,{width:h,height:g,rampAlignment:\"vertical\",opacity:s,type:\"below\",cssEffectFilter:t,ariaLabel:f}),L=p(y),A=y.infos.map(e=>e.label),E=A.map((e,s)=>{const t=2===s;return 0===s?v(\"div\",{class:e?w?i.univariateAboveAndBelowLabel:i.rampLabel:void 0,key:`${r}-color-ramp-above-label-${e??s}`},e):t?v(\"div\",null):null}),$=A.length-1,C=Math.floor(A.length/2),R=A.map((e,s)=>s===C||s===$?v(\"div\",{class:e?w?i.univariateAboveAndBelowLabel:i.rampLabel:void 0,key:`${r}-color-ramp-below-label-${e??s}`},e):null),k={display:\"table-cell\",verticalAlign:\"middle\"},x={marginTop:`${L}px`},F={height:`${u}px`},B={height:`${g}px`};return v(\"div\",{key:`${r}-container`,styles:m},v(\"div\",{class:i.layerBody},y.infos.map((e,s)=>v(\"div\",{class:this.classes(i.layerRow,i.sizeRamp),key:`${r}-row-${s}`},v(\"div\",{afterCreate:d,bind:e.preview,class:i.symbol,styles:k}),w||s%2!=0?null:v(\"div\",{class:i.layerInfo},A[s])))),w?v(\"div\",{styles:x},v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:w,class:i.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:i.rampLabelsContainer,styles:F},E))),v(\"div\",{styles:n},v(\"div\",{styles:c},v(\"div\",{afterCreate:d,bind:j,class:i.rampContainer})),v(\"div\",{styles:c},v(\"div\",{class:i.rampLabelsContainer,styles:B},R)))):null)}};e([s()],y.prototype,\"cssEffectFilter\",void 0),e([s()],y.prototype,\"legendElement\",void 0),e([s()],y.prototype,\"messages\",void 0),e([s()],y.prototype,\"opacity\",void 0),y=e([t(\"esri.widgets.Legend.styles.classic.UnivariateAboveAndBelowRamp\")],y);export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import{css as o}from\"./css.js\";import{getUnivariateColorSizeRampElements as i,getUnivariateColorRampMargin as l,getUnivariateColorRampSize as a,getUnivariateColorRampPreview as p,univariateColorRampContainerStyles as c,univariateColorRampStyles as m,univariateRampContainerStyles as n}from\"../support/univariateUtils.js\";import{attachToNode as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as y}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";let f=class extends r{constructor(e,s){super(e,s),this.cssEffectFilter=null,this.legendElement=null,this.opacity=1}render(){const{legendElement:e,opacity:s,cssEffectFilter:t,key:r}=this,{sizeRampElement:f,colorRampElement:v}=i(e);if(!f)return null;const u=l(f),g=12,b=a(f,\"full\",!1),h=p(v,{width:g,height:b,rampAlignment:\"vertical\",opacity:s,type:\"full\",cssEffectFilter:t,ariaLabel:this.messages?.previewColorRampAriaLabel}),j=f.infos.length-1,E=f.infos.map((e,s)=>0===s||s===j?y(\"div\",{class:e.label?v?o.univariateAboveAndBelowLabel:o.rampLabel:void 0,key:`${r}-color-ramp-label-${e.label??s}`},e.label):null),w={display:\"table-cell\",verticalAlign:\"middle\"},L={marginTop:`${u}px`},C={height:`${b}px`};return y(\"div\",{key:`${r}-container`,styles:n},y(\"div\",{class:o.layerBody},f.infos.map((e,s)=>y(\"div\",{class:this.classes(o.layerRow,o.sizeRamp),key:`${r}-row-${s}`},y(\"div\",{afterCreate:d,bind:e.preview,class:o.symbol,styles:w})))),y(\"div\",{styles:L},y(\"div\",{styles:c},y(\"div\",{styles:m},y(\"div\",{afterCreate:d,bind:h,class:o.rampContainer})),y(\"div\",{styles:m},y(\"div\",{class:o.rampLabelsContainer,styles:C},E)))))}};e([s()],f.prototype,\"cssEffectFilter\",void 0),e([s()],f.prototype,\"legendElement\",void 0),e([s()],f.prototype,\"messages\",void 0),e([s()],f.prototype,\"opacity\",void 0),f=e([t(\"esri.widgets.Legend.styles.classic.UnivariateColorSizeRamp\")],f);export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import\"../../../../intl.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../Widget.js\";import i from\"./ColorRamp.js\";import{css as l}from\"./css.js\";import a from\"./SizeRamp.js\";import o from\"./UnivariateAboveAndBelowRamp.js\";import n from\"./UnivariateColorSizeRamp.js\";import{renderRelationshipRamp as m}from\"../support/relationshipUtils.js\";import{getLegendElementTitle as c,getPreviewAriaLabelIntl as p}from\"../support/utils.js\";import{attachToNode as h,isImageryStretchedLegend as y,getTitle as d}from\"../../support/styleUtils.js\";import\"../../../support/widgetUtils.js\";import{tsx as g}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";import{substitute as u}from\"../../../../intl/substitute.js\";var f;let b=f=class extends r{constructor(e,s){super(e,s),this.cssEffectFilter=null,this.isChild=!1,this.legendElement=null}render(){const e=this._renderLegendElement(),s=c(this.legendElement,this.messages),t=this.isChild?l.layerChildTable:l.layerTable,r=s?g(\"div\",{class:l.layerCaption},s):null,i={[l.layerTableSizeRamp]:\"size-ramp\"===this.legendElement.type||!this.isChild};return g(\"section\",{class:this.classes(t,i),key:`${this.key}-table`},r,e)}_renderLegendElement(){switch(this.legendElement.type){case\"symbol-table\":return this._renderSymbolTable(this.legendElement);case\"size-ramp\":return g(a,{key:this.key,legendElement:this.legendElement,messages:this.messages});case\"color-ramp\":case\"opacity-ramp\":case\"heatmap-ramp\":case\"stretch-ramp\":return g(i,{key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"relationship-ramp\":return m(this.legendElement,this.id,{opacity:this.layer.opacity,cssEffectFilter:this.cssEffectFilter,ariaLabel:this.messages.previewRelationshipRampAriaLabel,key:this.key});case\"pie-chart-ramp\":{const{preview:e}=this.legendElement;if(!e)return null;const s=u(this.messages.previewPieChartAriaLabel,{label:null});return s&&e.querySelector(\"svg\")?.setAttribute(\"aria-label\",s),g(\"div\",{afterCreate:h,bind:e,key:`${this.key}-preview`})}case\"univariate-above-and-below-ramp\":return g(o,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});case\"univariate-color-size-ramp\":return g(n,{cssEffectFilter:this.cssEffectFilter,key:this.key,legendElement:this.legendElement,messages:this.messages,opacity:this.layer.opacity});default:return null}}_renderSymbolTable(e){const s=e.infos.map(s=>this._renderElementInfo(s,e.legendType)).filter(Boolean);return s.length?g(\"div\",{class:l.layerBody},s):null}_renderElementInfo(e,s){const{layer:t}=this,r=\"label\"in e?e.label:null,i=`${this.key}-${r}`;if(\"type\"in e&&e.type)return g(f,{cssEffectFilter:this.cssEffectFilter,isChild:!0,key:i,layer:t,legendElement:e,messages:this.messages});if(!(\"preview\"in e&&e.preview||\"src\"in e&&e.src))return null;const a=y(t,s),o={[l.imageryLayerInfoStretched]:a},n={[l.imageryLayerInfoStretched]:a};return g(\"div\",{class:l.layerRow,key:`${i}-row`},g(\"div\",{class:this.classes(l.symbolContainer,n)},this._renderPreview(e,a)),g(\"div\",{class:this.classes(l.layerInfo,o)},d(this.messages,r,!1)||\"\"))}_renderPreview(e,s){const{layer:t}=this;if(\"preview\"in e&&e.preview){const{preview:s}=e,t=\"previewAriaLabel\"in e?e.previewAriaLabel:null,r=\"label\"in e?d(this.messages,e.label,!1):null,i=s.querySelector(\"svg\"),a=p(this.messages,t||r);return a&&i&&i.setAttribute(\"aria-label\",a),g(\"div\",{afterCreate:h,bind:s,class:l.symbol})}return\"src\"in e&&e.src?this._renderImage(e,t,s):null}_renderImage(e,s,t){const{previewAriaLabel:r,src:i,opacity:a}=e,o=d(this.messages,e.label,!1),n={[l.imageryLayerStretchedImage]:t,[l.symbol]:!t},m={opacity:`${a??s.opacity}`},c=p(this.messages,r||o);return g(\"img\",{alt:c,\"aria-label\":c,border:0,class:this.classes(n),height:e.height,src:i,styles:m,width:e.width})}};e([s()],b.prototype,\"cssEffectFilter\",void 0),e([s()],b.prototype,\"isChild\",void 0),e([s()],b.prototype,\"layer\",void 0),e([s()],b.prototype,\"legendElement\",void 0),e([s()],b.prototype,\"messages\",void 0),b=f=e([t(\"esri.widgets.Legend.styles.classic.LegendElement\")],b);export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as r}from\"../../../../core/accessorSupport/decorators/subclass.js\";import t from\"../../../Widget.js\";import{css as o,legend as i}from\"./css.js\";import n from\"./LegendElement.js\";import{globalCss as l}from\"../../../support/globalCss.js\";import{Heading as a}from\"../../../support/Heading.js\";import\"../../../support/widgetUtils.js\";import{messageBundle as c}from\"../../../support/decorators/messageBundle.js\";import{tsx as p}from\"../../../support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const d=`${i}__`;let m=class extends t{constructor(e,s){super(e,s),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type=\"classic\"}render(){const e=this.activeLayerInfos,s=e?.toArray().map(e=>this._renderLegendForLayer(e)).filter(Boolean);return s?.length?p(\"section\",null,s):p(\"div\",{class:o.message,key:\"no-legend\"},this.messages.noLegend)}_renderLegendForLayer(e,s){if(!e.ready)return null;const r=`${e.layer.uid}-version-${e.version}`,t=`${d}${s?`${s}-`:\"\"}${r}`,i=e.title?a({level:this.headingLevel,class:this.classes(l.heading,o.label)},e.title):null;if(e.children.length){const s=e.children.toArray().map(e=>this._renderLegendForLayer(e,r));return p(\"section\",{class:this.classes(o.service,o.groupLayer),key:t},i,s)}return this._renderLegendElementsForLayer(e,i,t)}_renderLegendElementsForLayer(e,s,r){const t=e.legendElements?.filter(Boolean);if(!t?.length)return null;const i=t.map(s=>p(n,{cssEffectFilter:e.cssEffectFilter,isChild:!1,key:`${r}-${s.type}`,layer:e.layer,legendElement:s,messages:this.messages})),l={[o.groupLayerChild]:!!e.parent};return p(\"section\",{class:this.classes(o.service,l),key:r},s,p(\"div\",{class:o.layer},i))}};e([s()],m.prototype,\"activeLayerInfos\",void 0),e([s()],m.prototype,\"headingLevel\",void 0),e([s(),c(\"esri/widgets/Legend/t9n/Legend\")],m.prototype,\"messages\",void 0),e([s({readOnly:!0})],m.prototype,\"type\",void 0),m=e([r(\"esri.widgets.Legend.styles.classic.ClassicView\")],m);export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{deprecateWidget as t}from\"../core/deprecate.js\";import s from\"../core/Logger.js\";import{on as i,watch as r,initial as o}from\"../core/reactiveUtils.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import{cast as l}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import d from\"./Widget.js\";import p from\"./Legend/LegendViewModel.js\";import c from\"./Legend/styles/card/CardView.js\";import y from\"./Legend/styles/classic/ClassicView.js\";import{globalCss as h}from\"./support/globalCss.js\";import\"./support/widgetUtils.js\";import{messageBundle as g}from\"./support/decorators/messageBundle.js\";import{tsx as v}from\"./support/jsxFactory.js\";import\"@arcgis/toolkit/dom\";const u={base:\"esri-legend\"};let L=class extends d{constructor(e,i){super(e,i),this.headingLevel=3,this.messages=null,this.viewModel=new p,this.style=new y,t(s.getLogger(this),\"Legend\",\"arcgis-legend\",{version:\"4.34\"})}initialize(){this.addHandles([i(()=>this.view,\"resize\",()=>this.scheduleRender()),i(()=>this.activeLayerInfos,\"change\",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),r(()=>this.headingLevel,e=>{const{style:t}=this;t&&(t.headingLevel=e)}),r(()=>this.style,(e,t)=>{t&&e!==t&&t.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,\"card\"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)},o)])}destroy(){this.style?.destroy()}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(e){this.viewModel.activeLayerInfos=e}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(e){this.viewModel.basemapLegendVisible=e}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(e){this.viewModel.groundLegendVisible=e}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(e){this.viewModel.hideLayersNotInCurrentView=e}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(e){this.viewModel.keepCacheOnDestroy=e}get respectLayerDefinitionExpression(){return this.viewModel.respectLayerDefinitionExpression}set respectLayerDefinitionExpression(e){this.viewModel.respectLayerDefinitionExpression=e}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(e){this.viewModel.respectLayerVisibility=e}get icon(){return\"legend\"}set icon(e){this._overrideIfSome(\"icon\",e)}get label(){return this.messages?.widgetLabel??\"\"}set label(e){this._overrideIfSome(\"label\",e)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(e){this.viewModel.layerInfos=e}set style(e){const t=this._get(\"style\");e!==t&&t?.destroy(),this._set(\"style\",e)}castStyle(e){if(e instanceof c||e instanceof y)return e;if(\"string\"==typeof e)return\"card\"===e?new c:new y;if(e&&\"string\"==typeof e.type){const t={...e};return delete t.type,\"card\"===e.type?new c(t):new y(t)}return new y}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){return v(\"div\",{class:this.classes(u.base,h.widget,this.style instanceof y?h.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){e.forEach(e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const t=r(()=>e.version,()=>this.scheduleRender());this.addHandles(t,`version_${e.layer.uid}`);const s=i(()=>e.children,\"change\",()=>e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e)),o);this.addHandles(s,`version_${e.layer.uid}`),e.children.forEach(e=>this._renderOnActiveLayerInfoChange(e))}};e([n()],L.prototype,\"activeLayerInfos\",null),e([n()],L.prototype,\"basemapLegendVisible\",null),e([n()],L.prototype,\"groundLegendVisible\",null),e([n()],L.prototype,\"headingLevel\",void 0),e([n()],L.prototype,\"hideLayersNotInCurrentView\",null),e([n()],L.prototype,\"keepCacheOnDestroy\",null),e([n()],L.prototype,\"respectLayerDefinitionExpression\",null),e([n()],L.prototype,\"respectLayerVisibility\",null),e([n()],L.prototype,\"icon\",null),e([n()],L.prototype,\"label\",null),e([n()],L.prototype,\"layerInfos\",null),e([n(),g(\"esri/widgets/Legend/t9n/Legend\")],L.prototype,\"messages\",void 0),e([n()],L.prototype,\"style\",null),e([l(\"style\")],L.prototype,\"castStyle\",null),e([n()],L.prototype,\"view\",null),e([n()],L.prototype,\"viewModel\",void 0),L=e([a(\"esri.widgets.Legend\")],L);const f=L;export{f as default};\n"],"names":["m","b","u","c","f","k","a","l","t","o","s","h","i","d","n","p","T","_","q","$","g","L","C","v","w","y","e","r","x","R","E","M","S","j","B","H","U","W","I","z","V","O","D","P","F","G","A","de","ye","he","fe","me","pe","ge","be","_e","Se","we","ve","Le","Ee","Fe","Ce","Ie","Re","Ve","xe","ze","Te","De","je","Oe","ke","Me","Pe","Ue","Ae","Be","Ne","$e","He","qe","We","Ge","Je","Ze","Qe","Ke","Xe","Ye","et","tt","it","ee","te","ce","ie","se","J","Z","Q","le","re","ne","K","ae","oe","N","X","Y","ue","has"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]}