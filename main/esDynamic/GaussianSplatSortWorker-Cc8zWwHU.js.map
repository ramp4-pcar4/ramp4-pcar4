{"version":3,"file":"GaussianSplatSortWorker-Cc8zWwHU.js","sources":["../../node_modules/@arcgis/core/views/3d/support/GaussianSplatSortWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nclass t{constructor(t,s,n,r=!1){this.distances=t,this.sortOrderIndices=s,this.numGaussians=n,this.preciseSort=r}}class s{constructor(t,s){this.distances=t,this.sortedOrderIndices=s}}let n=null,r=null;const e=10,o=20,i=.25;function l(t,s){n?.length!==t&&(n=new Uint32Array(t)),r&&r.length===1+(1<<s)?r.fill(0):r=new Uint32Array(1+(1<<s))}function a(t,s){const a=t.length,c=Math.max(e,Math.min(o,Math.round(Math.log2(a/i)))),u=1+(1<<c);l(a,c);let f=t[0],h=t[0];for(let n=0;n<t.length;n++)f=Math.min(f,t[n]),h=Math.max(h,t[n]);const d=h-f;if(d<1e-6)for(let e=0;e<a;++e)n[e]=0,r[0]++;else{const s=(1<<c)/d;for(let e=0;e<a;e++){const o=(t[e]-f)*s>>>0;n[e]=o,r[o]++}}for(let n=1;n<u;n++)r[n]+=r[n-1];for(let e=0;e<a;e++){const t=n[e];s[--r[t]]=e}}async function c(t){const{distances:n,sortOrderIndices:r,preciseSort:e,numGaussians:o}=t,i=n.subarray(0,o),l=r.subarray(0,o);if(0===i.length||0===l.length)return{result:new s(n,r),transferList:[n.buffer,r.buffer]};if(e){const t=Array.from(l.keys());t.sort((t,s)=>i[t]-i[s]||t-s);const s=t.map(t=>l[t]);l.set(s)}else a(i,l);return{result:new s(n,r),transferList:[n.buffer,r.buffer]}}function u(){n=null,r=null}export{t as SplatSortWorkerInput,s as SplatSortWorkerOutput,u as destroy,c as sort};\n"],"names":["t","n","r","s","e","o","i","l","a","c","u","f","h","d"],"mappings":"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","x_google_ignoreList":[0]}