import{s as P,t as h}from"./SimpleGeometryCursor-DSF_YyIm.js";import{j as s,a as i,f as y,b as d,N as p,n as G,y as _}from"./Point2D-BVUQyGsf.js";import{v as x,i as v,e as m,b as a,u as w,_ as M,y as D,j as q}from"./ProjectionTransformation-D_aEWxWN.js";import{Envelope2D as E}from"./Envelope2D-2iYexKQo.js";class X{getOperatorType(){return 10102}supportsCurves(){return!0}accelerateGeometry(o,u,t){return!1}canAccelerateGeometry(o){return!1}executeMany(o,u,t){return new Y(u,o,t)}execute(o,u){return l(o)}isConvex(o,u){if(s(o),o.isEmpty())return!0;const t=o.getGeometryType();if(t===i.enumPoint)return!0;if(t===i.enumEnvelope){const r=o;return r.getXMin()!==r.getXMax()&&r.getYMin()!==r.getYMax()}if(y(t)){const r=o;return!r.getStartXY().equals(r.getEndXY())}if(t===i.enumMultiPoint)return o.getPointCount()===1;if(t===i.enumPolyline){const r=o;return r.getPathCount()===1&&r.getPointCount()===2&&!r.getXY(0).equals(r.getXY(1))}if(t===i.enumGeometryCollection){const r=o;return r.getGeometryCount()===1&&this.isConvex(r.getGeometry(0),u)}const e=o;return!(e.getPathCount()!==1||e.getPointCount()<3)&&x(e,0)}constructOrientedMinimumBoundingBox(o,u,t,e,r){v(o,u,t,e,r)}}class Y extends h{constructor(o,u,t){super(),u||d(""),this.m_progressTracker=t,this.m_index=-1,this.m_bMerge=o,this.m_bDone=!1,this.m_inputGeometryCursor=u}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}next(){if(this.m_bMerge){if(!this.m_bDone){const o=C(this.m_inputGeometryCursor);return this.m_bDone=!0,o}return null}if(!this.m_bDone){const o=this.m_inputGeometryCursor.next();if(o!==null)return p(o),s(o),this.m_index=this.m_inputGeometryCursor.getGeometryID(),l(o);this.m_bDone=!0}return null}}function C(n,o){const u=new q;let t;for(;t=n.next();)p(t),s(t),u.addGeometry(t);return u.getBoundingGeometry()}function l(n,o){if(s(n),n.isEmpty())return n.createInstance();const u=n.getGeometryType();if(y(u)){const t=n;if(t.isDegenerate(0)){const e=new m;return t.queryStart(e),e}if(t.getGeometryType()===i.enumLine){const e=new m,r=new a({vd:n.getDescription()});return t.queryStart(e),r.startPathPoint(e),t.queryEnd(e),r.lineToPoint(e),r}{const e=new a({vd:n.getDescription()});return e.addSegment(t,!0),l(e)}}if(u===i.enumEnvelope){const t=n,e=new E;if(t.queryEnvelope(e),e.xmin===e.xmax&&e.ymin===e.ymax){const r=new m;return t.queryCornerByVal(0,r),r}if(e.xmin===e.xmax||e.ymin===e.ymax){const r=new m,g=new a({vd:n.getDescription()});return t.queryCornerByVal(0,r),g.startPathPoint(r),t.queryCornerByVal(1,r),g.lineToPoint(r),g}{const r=new w({vd:n.getDescription()});return r.addEnvelope(t,!1),r}}if(u===i.enumGeometryCollection)return C(M(n,-1));if(f(n)){if(u===i.enumMultiPoint){const t=n,e=new m;return t.getPointByVal(0,e),e}return n}return G(_(u)),D(n)}function f(n,o){if(s(n),n.isEmpty())return!0;const u=n.getGeometryType();if(u===i.enumPoint)return!0;if(u===i.enumEnvelope){const e=n;return e.getXMin()!==e.getXMax()&&e.getYMin()!==e.getYMax()}if(y(u)){const e=n;if(e.isDegenerate(0))return!1;if(u===i.enumLine)return!0;const r=new a;return r.addSegment(e,!0),f(r)}if(u===i.enumMultiPoint)return n.getPointCount()===1;if(u===i.enumPolyline){const e=n;return!e.hasNonLinearSegments()&&e.getPathCount()===1&&e.getPointCount()===2&&!e.getXY(0).equals(e.getXY(1))}if(u===i.enumGeometryCollection){const e=n;return e.getGeometryCount()===1&&f(e.getGeometry(0))}const t=n;return!(t.getPathCount()!==1||t.getPointCount()<3)&&x(t,0)}const c=new X;function b(n){return c.execute(n,null)}function T(n,o){const u=c.executeMany(new P(n),o,null);return Array.from(u)}function B(n){return c.isConvex(n,null)}function S(){return c.supportsCurves()}export{B as D,T as _,S as q,b as w};
