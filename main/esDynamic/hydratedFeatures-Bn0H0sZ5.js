import{z as g,bP as R,G as c,bQ as b,e1 as v,e2 as W}from"./main-6gYsRPh_.js";import{t as C}from"./projectVectorToVector-D420nist.js";function m(e){return"declaredClass"in e}function f(e){return"declaredClass"in e}function A(e){return"declaredClass"in e}function G(e,s,n){return e?A(e)?(e.origin!==n&&(e.origin=n),e):new R({layer:s,sourceLayer:s,origin:n,visible:e.visible,symbol:c(e.symbol),attributes:c(e.attributes),geometry:h(e.geometry)}):null}function h(e){return e==null?null:m(e)?e:b(J(e))}function J(e){const{wkid:s,wkt:n,wkt2:o,latestWkid:l}=e.spatialReference,t={wkid:s,wkt:n,wkt2:o,latestWkid:l};switch(e.type){case"point":{const{x:a,y:r,z:i,m:u}=e;return{x:a,y:r,z:i,m:u,spatialReference:t}}case"polygon":{const{rings:a,hasZ:r,hasM:i}=e;return{rings:p(a),hasZ:r,hasM:i,spatialReference:t}}case"polyline":{const{paths:a,hasZ:r,hasM:i}=e;return{paths:p(a),hasZ:r,hasM:i,spatialReference:t}}case"extent":{const{xmin:a,xmax:r,ymin:i,ymax:u,zmin:d,zmax:k,mmin:w,mmax:M,hasZ:Z,hasM:z}=e;return{xmin:a,xmax:r,ymin:i,ymax:u,zmin:d,zmax:k,mmin:w,mmax:M,hasZ:Z,hasM:z,spatialReference:t}}case"multipoint":{const{points:a,hasZ:r,hasM:i}=e;return{points:y(a)?x(a):a,hasZ:r,hasM:i,spatialReference:t}}default:return}}function p(e){return O(e)?e.map(s=>x(s)):e}function x(e){return e.map(s=>Array.from(s))}function O(e){for(const s of e)if(s.length!==0)return y(s);return!1}function y(e){return e.length>0&&(v(e[0])||W(e[0]))}function P(e,s){if(!e)return null;let n;if(f(e)){if(s==null)return e.clone();if(f(s))return s.copy(e)}return s!=null?(n=s,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=C(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function Q(e){const{wkid:s,wkt:n,wkt2:o,latestWkid:l}=e,t={wkid:s,wkt:n,wkt2:o,latestWkid:l};return g.fromJSON(t)}export{G as c,Q as k,m as o,h as u,P as x};
