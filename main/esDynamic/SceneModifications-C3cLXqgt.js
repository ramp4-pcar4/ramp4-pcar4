import{Z as h,a3 as S,aH as f,G as w,_ as a,X as l,a5 as J,Y as u,by as N,O as R,I as O,H as v}from"./main-6gYsRPh_.js";import{j as d}from"./persistable-YldvpsAy.js";import{J as b,o as x}from"./projectionUtils-CVhOpzeN.js";var c;let s=c=class extends h{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,o,t){if(t.layer?.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!b(e.spatialReference,t.layer.spatialReference))return void(t?.messages&&t.messages.push(new S("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const n=new f;x(e,n,t.layer.spatialReference),r[o]=n.toJSON(t)}else r[o]=e.toJSON(t)}clone(){return new c({geometry:w(this.geometry),type:this.type})}};a([l({type:f}),d()],s.prototype,"geometry",void 0),a([J(["web-scene","portal-item"],"geometry")],s.prototype,"writeGeometry",null),a([l({type:["clip","mask","replace"],nonNullable:!0}),d()],s.prototype,"type",void 0),s=c=a([u("esri.layers.support.SceneModification")],s);var i;let p=i=class extends N(R.ofType(s)){constructor(e){super(e),this.url=null}clone(){return new i({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(r=>r.toJSON(e)).filter(r=>!!r.geometry)}static fromJSON(e,r){const o=new i;for(const t of e)o.add(s.fromJSON(t,r));return o}static async fromUrl(e,r,o){const t={url:O(e),origin:"service"},n=await v(e,{responseType:"json",signal:o?.signal}),g=r.toJSON(),m=[];for(const y of n.data)m.push(s.fromJSON({...y,geometry:{spatialReference:g,...y.geometry}},t));return new i({url:e,items:m})}};a([l({type:String})],p.prototype,"url",void 0),p=i=a([u("esri.layers.support.SceneModifications")],p);export{p as n};
