import{bY as c,bL as p}from"./main-CnDVnExo.js";function u(n,e){return e?"xoffset"in e&&e.xoffset?Math.max(n,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(n,Math.abs(e.yoffset||0)):n:n}function M(n){let e=0,s=0;for(let t=0;t<n.length;t++){const a=n[t].size;typeof a=="number"&&(e+=a,s++)}return e/s}function m(n,e){return typeof n=="number"?n:n?.stops?.length?M(n.stops):e}function d(n,e){if(!e)return n;const s=e.filter(o=>o.type==="size").map(o=>{const{maxSize:r,minSize:f}=o;return(m(r,n)+m(f,n))/2});let t=0;const a=s.length;if(a===0)return n;for(let o=0;o<a;o++)t+=s[o];const i=Math.floor(t/a);return Math.max(i,n)}function y(n){const e=n?.renderer,s=n?.pointerType,t=s==="touch"?9:6;if(!e)return t;const a="visualVariables"in e?d(t,e.visualVariables):t;if(e.type==="simple")return u(a,e.symbol);if(e.type==="unique-value"){let i=a;return e.uniqueValueInfos?.forEach(o=>{i=u(i,o.symbol)}),i}if(e.type==="class-breaks"){let i=a;return e.classBreakInfos.forEach(o=>{i=u(i,o.symbol)}),i}return e.type==="dot-density"||e.type,a}function x(n,e,s,t=new c){let a=0;if(s.type==="2d")a=e*(s.resolution??0);else if(s.type==="3d"){const b=s.overlayPixelSizeInMapUnits(n),l=s.basemapSpatialReference;a=l==null||l.equals(s.spatialReference)?e*b:p(l)/p(s.spatialReference)}const i=n.x-a,o=n.y-a,r=n.x+a,f=n.y+a,{spatialReference:h}=s;return t.xmin=Math.min(i,r),t.ymin=Math.min(o,f),t.xmax=Math.max(i,r),t.ymax=Math.max(o,f),t.spatialReference=h,t}function z(n,e,s){const t=s.toMap(n);return t==null?!1:x(t,y(),s,v).intersects(e)}const v=new c;export{z as i,y as o,x as r};
