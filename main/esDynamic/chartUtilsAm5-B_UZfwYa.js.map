{"version":3,"file":"chartUtilsAm5-B_UZfwYa.js","sources":["../../node_modules/@amcharts/amcharts5/.internal/core/util/ResizeSensor.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/InterfaceColors.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/NumberFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Timezone.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/DateFormatter.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/DurationFormatter.js","../../node_modules/@amcharts/amcharts5/locales/en.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Language.js","../../node_modules/@amcharts/amcharts5/.internal/core/util/Matrix.js","../../node_modules/svg-arc-to-cubic-bezier/modules/index.js","../../node_modules/@amcharts/amcharts5/.internal/core/render/backend/CanvasRenderer.js","../../node_modules/@amcharts/amcharts5/.internal/core/Root.js","../../node_modules/@arcgis/core/widgets/support/chartUtilsAm5.js"],"sourcesContent":["/** @ignore */ /** */\r\nimport * as $array from \"./Array\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * @ignore\r\n */\r\nclass Native {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_observer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        this._observer = new ResizeObserver((entries) => {\r\n            $array.each(entries, (entry) => {\r\n                $array.each(this._targets, (x) => {\r\n                    if (x.target === entry.target) {\r\n                        x.callback();\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        this._observer.observe(target, { box: \"border-box\" });\r\n        this._targets.push({ target, callback });\r\n    }\r\n    removeTarget(target) {\r\n        this._observer.unobserve(target);\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Raf {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_timer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    addTarget(target, callback) {\r\n        if (this._timer === null) {\r\n            let lastTime = null;\r\n            const loop = () => {\r\n                const currentTime = Date.now();\r\n                if (lastTime === null || currentTime > (lastTime + Raf.delay)) {\r\n                    lastTime = currentTime;\r\n                    $array.each(this._targets, (x) => {\r\n                        let newSize = x.target.getBoundingClientRect();\r\n                        if (newSize.width !== x.size.width || newSize.height !== x.size.height) {\r\n                            x.size = newSize;\r\n                            x.callback();\r\n                        }\r\n                    });\r\n                }\r\n                if (this._targets.length === 0) {\r\n                    this._timer = null;\r\n                }\r\n                else {\r\n                    this._timer = requestAnimationFrame(loop);\r\n                }\r\n            };\r\n            this._timer = requestAnimationFrame(loop);\r\n        }\r\n        // We start off with fake bounds so that sensor always kicks in\r\n        let size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\r\n        this._targets.push({ target, callback, size });\r\n    }\r\n    removeTarget(target) {\r\n        $array.keepIf(this._targets, (x) => {\r\n            return x.target !== target;\r\n        });\r\n        if (this._targets.length === 0) {\r\n            if (this._timer !== null) {\r\n                cancelAnimationFrame(this._timer);\r\n                this._timer = null;\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Raf, \"delay\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: 200\r\n});\r\n/**\r\n * @ignore\r\n */\r\nlet observer = null;\r\n/**\r\n * @ignore\r\n */\r\nfunction makeSensor() {\r\n    if (observer === null) {\r\n        if (typeof ResizeObserver !== \"undefined\") {\r\n            observer = new Native();\r\n        }\r\n        else {\r\n            observer = new Raf();\r\n        }\r\n    }\r\n    return observer;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class ResizeSensor {\r\n    constructor(element, callback) {\r\n        Object.defineProperty(this, \"_sensor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_listener\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        this._sensor = makeSensor();\r\n        this._element = element;\r\n        // This is needed because we need to know when the window is zoomed\r\n        this._listener = $utils.onZoom(callback);\r\n        this._sensor.addTarget(element, callback);\r\n    }\r\n    isDisposed() {\r\n        return this._disposed;\r\n    }\r\n    dispose() {\r\n        if (!this._disposed) {\r\n            this._disposed = true;\r\n            this._sensor.removeTarget(this._element);\r\n            this._listener.dispose();\r\n        }\r\n    }\r\n    get sensor() {\r\n        return this._sensor;\r\n    }\r\n}\r\n//# sourceMappingURL=ResizeSensor.js.map","import { Entity } from \"./Entity\";\r\n/**\r\n * Presets for common UI elements.\r\n */\r\nexport class InterfaceColors extends Entity {\r\n}\r\nObject.defineProperty(InterfaceColors, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"InterfaceColors\"\r\n});\r\nObject.defineProperty(InterfaceColors, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Entity.classNames.concat([InterfaceColors.className])\r\n});\r\n//# sourceMappingURL=InterfaceColors.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Number formatter\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n * @important\r\n */\r\nexport class NumberFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"numberFormat\", \"#,###.#####\");\r\n        this._setDefault(\"smallNumberThreshold\", 1.00);\r\n        const bns = \"_big_number_suffix_\";\r\n        const sns = \"_small_number_suffix_\";\r\n        const bs = \"_byte_suffix_\";\r\n        this._setDefault(\"bigNumberPrefixes\", [\r\n            { \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\r\n            { \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\r\n            { \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\r\n            { \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\r\n            { \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\r\n            { \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\r\n            { \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\r\n            { \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\r\n        ]);\r\n        this._setDefault(\"smallNumberPrefixes\", [\r\n            { \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\r\n            { \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\r\n            { \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\r\n            { \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\r\n            { \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\r\n            { \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\r\n            { \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\r\n            { \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\r\n        ]);\r\n        this._setDefault(\"bytePrefixes\", [\r\n            { \"number\": 1, suffix: this._t(bs + \"B\") },\r\n            { \"number\": 1024, suffix: this._t(bs + \"KB\") },\r\n            { \"number\": 1048576, suffix: this._t(bs + \"MB\") },\r\n            { \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\r\n            { \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\r\n            { \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\r\n        ]);\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number according to specific format.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, precision) {\r\n        // no format passed in or \"Number\"\r\n        if (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\r\n            format = this.get(\"numberFormat\", \"\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // Is it a built-in format or Intl.NumberFormatOptions\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                if (this.get(\"intlLocales\")) {\r\n                    return new Intl.NumberFormat(this.get(\"intlLocales\"), format).format(source);\r\n                }\r\n                else {\r\n                    return new Intl.NumberFormat(undefined, format).format(source);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        else {\r\n            // Clean format\r\n            format = $utils.cleanFormat(format);\r\n            // Get format info (it will also deal with parser caching)\r\n            let info = this.parseFormat(format, this._root.language);\r\n            // format and replace the number\r\n            let details;\r\n            if (source > this.get(\"negativeBase\")) {\r\n                details = info.positive;\r\n            }\r\n            else if (source < this.get(\"negativeBase\")) {\r\n                details = info.negative;\r\n            }\r\n            else {\r\n                details = info.zero;\r\n            }\r\n            // Adjust precision\r\n            if (precision != null && !details.mod) {\r\n                details = $object.copy(details);\r\n                details.decimals.active = source == 0 ? 0 : precision;\r\n            }\r\n            // Format\r\n            formatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\r\n        }\r\n        if (this.get(\"forceLTR\") === true) {\r\n            formatted = \"‎\" + formatted;\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format Format string, i.e. \"#,###.00\"\r\n     * @param language Language\r\n     * @ignore\r\n     */\r\n    parseFormat(format, language) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        const thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\r\n        const decimalSeparator = language.translateEmpty(\"_decimalSeparator\");\r\n        // init format parse info holder\r\n        let info = {\r\n            \"positive\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"negative\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            },\r\n            \"zero\": {\r\n                \"thousands\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"interval\": -1,\r\n                    \"separator\": thousandSeparator\r\n                },\r\n                \"decimals\": {\r\n                    \"active\": -1,\r\n                    \"passive\": -1,\r\n                    \"separator\": decimalSeparator\r\n                },\r\n                \"template\": \"\",\r\n                \"source\": \"\",\r\n                \"parsed\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Just \"Number\"?\r\n            if (partFormat.toLowerCase() === \"number\") {\r\n                partFormat = this.get(\"numberFormat\", \"#,###.#####\");\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Parse format\r\n                    // Look for codes\r\n                    let matches = chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);\r\n                    if (matches) {\r\n                        if (matches === null || matches[0] === \"\") {\r\n                            // no codes here - assume string\r\n                            // nothing to do here\r\n                            item.template += chunk.text;\r\n                        }\r\n                        else {\r\n                            // look for the format modifiers at the end\r\n                            let mods = matches[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);\r\n                            if (mods) {\r\n                                item.mod = mods[0].toLowerCase();\r\n                                item.modSpacing = matches[0].match(/[ ]{1}[abespABESP%‰!]{1}$/) ? true : false;\r\n                            }\r\n                            // break the format up\r\n                            let a = matches[0].split(\".\");\r\n                            // Deal with thousands\r\n                            if (a[0] === \"\") {\r\n                                // No directives for thousands\r\n                                // Leave default settings (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.thousands.active = (a[0].match(/0/g) || []).length;\r\n                                item.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\r\n                                // Separator interval\r\n                                let b = a[0].split(\",\");\r\n                                if (b.length === 1) {\r\n                                    // No thousands separators\r\n                                    // Do nothing\r\n                                }\r\n                                else {\r\n                                    // Use length fo the last chunk as thousands length\r\n                                    item.thousands.interval = (b.pop() || \"\").length;\r\n                                    if (item.thousands.interval === 0) {\r\n                                        item.thousands.interval = -1;\r\n                                    }\r\n                                }\r\n                            }\r\n                            // Deal with decimals\r\n                            if (typeof (a[1]) === \"undefined\") {\r\n                                // No directives for decimals\r\n                                // Leave at defaults (no formatting)\r\n                            }\r\n                            else {\r\n                                // Counts\r\n                                item.decimals.active = (a[1].match(/0/g) || []).length;\r\n                                item.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\r\n                            }\r\n                            // Add special code to template\r\n                            item.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // Quoted string - take it as it is\r\n                    item.template += chunk.text;\r\n                }\r\n            }\r\n            // Apply style formatting\r\n            //item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by parseFormat()\r\n     * @return Formatted number\r\n     * @ignore\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = value < 0;\r\n        value = Math.abs(value);\r\n        // Recalculate according to modifier\r\n        let prefix = \"\", suffix = \"\";\r\n        let mods = details.mod ? details.mod.split(\"\") : [];\r\n        if (mods.indexOf(\"b\") !== -1) {\r\n            let a = this.applyPrefix(value, this.get(\"bytePrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"a\") !== -1) {\r\n            let a = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\") ? this.get(\"smallNumberPrefixes\") : this.get(\"bigNumberPrefixes\"), mods.indexOf(\"!\") !== -1);\r\n            value = a[0];\r\n            prefix = a[1];\r\n            suffix = a[2];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"p\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            //value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            prefix = this._root.language.translate(\"_percentPrefix\");\r\n            suffix = this._root.language.translate(\"_percentSuffix\");\r\n            if (prefix == \"\" && suffix == \"\") {\r\n                suffix = \"%\";\r\n            }\r\n        }\r\n        else if (mods.indexOf(\"%\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 2, 21);\r\n            value *= 100;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"%\";\r\n        }\r\n        else if (mods.indexOf(\"‰\") !== -1) {\r\n            let ol = Math.min(value.toString().length + 3, 21);\r\n            value *= 1000;\r\n            value = parseFloat(value.toPrecision(ol));\r\n            suffix = \"‰\";\r\n        }\r\n        // Round to passive\r\n        if (mods.indexOf(\"e\") !== -1) {\r\n            // convert the value to exponential\r\n            let exp;\r\n            if (details.decimals.passive >= 0) {\r\n                exp = value.toExponential(details.decimals.passive).split(\"e\");\r\n            }\r\n            else {\r\n                exp = value.toExponential().split(\"e\");\r\n            }\r\n            value = Number(exp[0]);\r\n            suffix = \"e\" + exp[1];\r\n            if (details.modSpacing) {\r\n                suffix = \" \" + suffix;\r\n            }\r\n        }\r\n        else if (details.decimals.passive === 0) {\r\n            value = Math.round(value);\r\n        }\r\n        else if (details.decimals.passive > 0) {\r\n            const decimals = $utils.decimalPlaces(value);\r\n            if (decimals > 0) {\r\n                const d = Math.pow(10, details.decimals.passive);\r\n                value = Math.round(parseFloat((value * d).toFixed(decimals))) / d;\r\n            }\r\n        }\r\n        // Init return value\r\n        let res = \"\";\r\n        // Calc integer and decimal parts\r\n        let a = $type.numberToString(value).split(\".\");\r\n        // Format integers\r\n        let ints = a[0];\r\n        // Pad integers to active length\r\n        if (ints.length < details.thousands.active) {\r\n            ints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\r\n        }\r\n        // Insert thousands separators\r\n        if (details.thousands.interval > 0) {\r\n            let ip = [];\r\n            let intsr = ints.split(\"\").reverse().join(\"\");\r\n            for (let i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\r\n                let c = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\r\n                if (c !== \"\") {\r\n                    ip.unshift(c);\r\n                }\r\n            }\r\n            ints = ip.join(details.thousands.separator);\r\n        }\r\n        // Add integers\r\n        res += ints;\r\n        // Add decimals\r\n        if (a.length === 1) {\r\n            a.push(\"\");\r\n        }\r\n        let decs = a[1];\r\n        // Fill zeros?\r\n        if (decs.length < details.decimals.active) {\r\n            decs += Array(details.decimals.active - decs.length + 1).join(\"0\");\r\n        }\r\n        if (decs !== \"\") {\r\n            res += details.decimals.separator + decs;\r\n        }\r\n        // Can't have empty return value\r\n        if (res === \"\") {\r\n            res = \"0\";\r\n        }\r\n        // Add minus sign back\r\n        if (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\r\n            res = \"-\" + res;\r\n        }\r\n        // Add suffixes/prefixes\r\n        if (prefix) {\r\n            res = prefix + res;\r\n        }\r\n        if (suffix) {\r\n            res += suffix;\r\n        }\r\n        return res;\r\n    }\r\n    applyPrefix(value, prefixes, force = false) {\r\n        let newvalue = value;\r\n        let prefix = \"\";\r\n        let suffix = \"\";\r\n        let applied = false;\r\n        let k = 1;\r\n        for (let i = 0, len = prefixes.length; i < len; i++) {\r\n            if (prefixes[i].number <= value) {\r\n                if (prefixes[i].number === 0) {\r\n                    newvalue = 0;\r\n                }\r\n                else {\r\n                    newvalue = value / prefixes[i].number;\r\n                    k = prefixes[i].number;\r\n                }\r\n                prefix = prefixes[i].prefix;\r\n                suffix = prefixes[i].suffix;\r\n                applied = true;\r\n            }\r\n        }\r\n        if (!applied && force && prefixes.length && value != 0) {\r\n            // Prefix was not applied. Use the first prefix.\r\n            newvalue = value / prefixes[0].number;\r\n            prefix = prefixes[0].prefix;\r\n            suffix = prefixes[0].suffix;\r\n            applied = true;\r\n        }\r\n        if (applied) {\r\n            newvalue = parseFloat(newvalue.toPrecision(Math.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)));\r\n        }\r\n        return [newvalue, prefix, suffix];\r\n    }\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    escape(text) {\r\n        return text.replace(\"||\", $type.PLACEHOLDER2);\r\n    }\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    unescape(text) {\r\n        return text.replace($type.PLACEHOLDER2, \"|\");\r\n    }\r\n}\r\n//# sourceMappingURL=NumberFormatter.js.map","function parseDate(timezone, date) {\r\n    let year = 0;\r\n    let month = 0;\r\n    let day = 1;\r\n    let hour = 0;\r\n    let minute = 0;\r\n    let second = 0;\r\n    let millisecond = 0;\r\n    let weekday = 0;\r\n    timezone.formatToParts(date).forEach((x) => {\r\n        switch (x.type) {\r\n            case \"year\":\r\n                year = +x.value;\r\n                break;\r\n            case \"month\":\r\n                month = (+x.value) - 1;\r\n                break;\r\n            case \"day\":\r\n                day = +x.value;\r\n                break;\r\n            case \"hour\":\r\n                hour = +x.value;\r\n                break;\r\n            case \"minute\":\r\n                minute = +x.value;\r\n                break;\r\n            case \"second\":\r\n                second = +x.value;\r\n                break;\r\n            case \"fractionalSecond\":\r\n                millisecond = +x.value;\r\n                break;\r\n            case \"weekday\":\r\n                switch (x.value) {\r\n                    case \"Sun\":\r\n                        weekday = 0;\r\n                        break;\r\n                    case \"Mon\":\r\n                        weekday = 1;\r\n                        break;\r\n                    case \"Tue\":\r\n                        weekday = 2;\r\n                        break;\r\n                    case \"Wed\":\r\n                        weekday = 3;\r\n                        break;\r\n                    case \"Thu\":\r\n                        weekday = 4;\r\n                        break;\r\n                    case \"Fri\":\r\n                        weekday = 5;\r\n                        break;\r\n                    case \"Sat\":\r\n                        weekday = 6;\r\n                        break;\r\n                }\r\n        }\r\n    });\r\n    if (hour === 24) {\r\n        hour = 0;\r\n    }\r\n    return { year, month, day, hour, minute, second, millisecond, weekday };\r\n}\r\nfunction toUTCDate(timezone, date) {\r\n    const { year, month, day, hour, minute, second, millisecond } = parseDate(timezone, date);\r\n    return Date.UTC(year, month, day, hour, minute, second, millisecond);\r\n}\r\nexport class Timezone {\r\n    constructor(timezone, isReal) {\r\n        Object.defineProperty(this, \"_utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dtf\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this.name = timezone;\r\n        this._utc = new Intl.DateTimeFormat(\"en-US\", {\r\n            hour12: false,\r\n            timeZone: \"UTC\",\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n        this._dtf = new Intl.DateTimeFormat(\"en-US\", {\r\n            hour12: false,\r\n            timeZone: timezone,\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   timezone  IANA timezone\r\n     * @return            Instantiated object\r\n     */\r\n    static new(timezone) {\r\n        return (new this(timezone, true));\r\n    }\r\n    convertLocal(date) {\r\n        const offset = this.offsetUTC(date);\r\n        const userOffset = date.getTimezoneOffset();\r\n        const output = new Date(date);\r\n        output.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\r\n        const newUserOffset = output.getTimezoneOffset();\r\n        if (userOffset != newUserOffset) {\r\n            output.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset);\r\n        }\r\n        return output;\r\n    }\r\n    offsetUTC(date) {\r\n        const utc = toUTCDate(this._utc, date);\r\n        const dtf = toUTCDate(this._dtf, date);\r\n        return (utc - dtf) / 60000;\r\n    }\r\n    parseDate(date) {\r\n        return parseDate(this._dtf, date);\r\n    }\r\n}\r\n//# sourceMappingURL=Timezone.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport { Timezone } from \"./Timezone\";\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Date formatter class.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n * @important\r\n */\r\nexport class DateFormatter extends Entity {\r\n    _setDefaults() {\r\n        // Defaults\r\n        this._setDefault(\"capitalize\", true);\r\n        this._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats a source `Date` object into string format\r\n     * @param   source          inpout date\r\n     * @param   format          Output format\r\n     * @param   ignoreTimezone  Ignore timezone?\r\n     * @return                  Formatted date\r\n     */\r\n    format(source, format, ignoreTimezone = false) {\r\n        // Locale?\r\n        // TODO\r\n        // No format passed in or it's empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            format = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n        }\r\n        // Init return value\r\n        let formatted;\r\n        // Cast?\r\n        // TODO: decide if we need to cast\r\n        let date = source;\r\n        // Is it a built-in format or Intl.DateTimeFormat\r\n        if ($type.isObject(format)) {\r\n            try {\r\n                const locales = this.get(\"intlLocales\");\r\n                if (locales) {\r\n                    return new Intl.DateTimeFormat(locales, format).format(date);\r\n                }\r\n                else {\r\n                    return new Intl.DateTimeFormat(undefined, format).format(date);\r\n                }\r\n            }\r\n            catch (e) {\r\n                return \"Invalid\";\r\n            }\r\n        }\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format);\r\n        // Should we apply custom time zone?\r\n        const timezone = this._root.timezone;\r\n        let originalDate = date;\r\n        if (timezone && !this._root.utc && !ignoreTimezone) {\r\n            date = timezone.convertLocal(date);\r\n        }\r\n        // Check if it's a valid date\r\n        if (!$type.isNumber(date.getTime())) {\r\n            // TODO translation\r\n            //return this._t(\"Invalid date\");\r\n            return \"Invalid date\";\r\n        }\r\n        // Apply format\r\n        formatted = this.applyFormat(date, info, ignoreTimezone, originalDate);\r\n        // Capitalize\r\n        if (this.get(\"capitalize\")) {\r\n            formatted = formatted.replace(/^.{1}/, formatted.substr(0, 1).toUpperCase());\r\n        }\r\n        // We're done\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Applies format to Date.\r\n     *\r\n     * @param date      Date object\r\n     * @param info      Parsed format information\r\n     * @return Formatted date string\r\n     */\r\n    applyFormat(date, info, ignoreTimezone = false, originalDate) {\r\n        // Init return value\r\n        let res = info.template;\r\n        // Get values\r\n        let fullYear, month, weekday, day, hours, minutes, seconds, milliseconds, timestamp = date.getTime();\r\n        if (this._root.utc && !ignoreTimezone) {\r\n            fullYear = date.getUTCFullYear();\r\n            month = date.getUTCMonth();\r\n            weekday = date.getUTCDay();\r\n            day = date.getUTCDate();\r\n            hours = date.getUTCHours();\r\n            minutes = date.getUTCMinutes();\r\n            seconds = date.getUTCSeconds();\r\n            milliseconds = date.getUTCMilliseconds();\r\n        }\r\n        else {\r\n            fullYear = date.getFullYear();\r\n            month = date.getMonth();\r\n            weekday = date.getDay();\r\n            day = date.getDate();\r\n            hours = date.getHours();\r\n            minutes = date.getMinutes();\r\n            seconds = date.getSeconds();\r\n            milliseconds = date.getMilliseconds();\r\n        }\r\n        // Go through each part and format/replace it in template\r\n        for (let i = 0, len = info.parts.length; i < len; i++) {\r\n            let value = \"\";\r\n            switch (info.parts[i]) {\r\n                case \"G\":\r\n                    value = this._t(fullYear < 0\r\n                        ? \"_era_bc\"\r\n                        : \"_era_ad\");\r\n                    break;\r\n                case \"yyyy\":\r\n                    value = Math.abs(fullYear).toString();\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"yyy\":\r\n                case \"yy\":\r\n                case \"y\":\r\n                    value = Math.abs(fullYear).toString().substr(-info.parts[i].length);\r\n                    if (fullYear < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                    let year = $utils.getWeekYear(date, this._root.utc);\r\n                    if (info.parts[i] == \"YYYY\") {\r\n                        value = Math.abs(year).toString();\r\n                    }\r\n                    else {\r\n                        value = Math.abs(year).toString().substr(-info.parts[i].length);\r\n                    }\r\n                    if (year < 0) {\r\n                        value += this._t(\"_era_bc\");\r\n                    }\r\n                    break;\r\n                case \"u\":\r\n                    // @todo\r\n                    break;\r\n                case \"q\":\r\n                    value = \"\" + Math.ceil((date.getMonth() + 1) / 3);\r\n                    break;\r\n                case \"MMMMM\":\r\n                    value = this._t(this._getMonth(month)).substr(0, 1);\r\n                    break;\r\n                case \"MMMM\":\r\n                    value = this._t(this._getMonth(month));\r\n                    break;\r\n                case \"MMM\":\r\n                    value = this._t(this._getShortMonth(month));\r\n                    break;\r\n                case \"MM\":\r\n                    value = $utils.padString(month + 1, 2, \"0\");\r\n                    break;\r\n                case \"M\":\r\n                    value = (month + 1).toString();\r\n                    break;\r\n                case \"ww\":\r\n                    value = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\r\n                    break;\r\n                case \"w\":\r\n                    value = $utils.getWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"W\":\r\n                    value = $utils.getMonthWeek(date, this._root.utc).toString();\r\n                    break;\r\n                case \"dd\":\r\n                    value = $utils.padString(day, 2, \"0\");\r\n                    break;\r\n                case \"d\":\r\n                    value = day.toString();\r\n                    break;\r\n                case \"DD\":\r\n                case \"DDD\":\r\n                    value = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"D\":\r\n                    value = $utils.getYearDay(date, this._root.utc).toString();\r\n                    break;\r\n                case \"F\":\r\n                    // @todo\r\n                    break;\r\n                case \"g\":\r\n                    // @todo\r\n                    break;\r\n                case \"t\":\r\n                    value = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\r\n                    break;\r\n                case \"E\":\r\n                    value = (weekday || 7).toString();\r\n                    break;\r\n                case \"EE\":\r\n                    value = $utils.padString((weekday || 7).toString(), 2, \"0\");\r\n                    break;\r\n                case \"EEE\":\r\n                case \"eee\":\r\n                    value = this._t(this._getShortWeekday(weekday));\r\n                    break;\r\n                case \"EEEE\":\r\n                case \"eeee\":\r\n                    value = this._t(this._getWeekday(weekday));\r\n                    break;\r\n                case \"EEEEE\":\r\n                case \"eeeee\":\r\n                    value = this._t(this._getShortWeekday(weekday)).substr(0, 1);\r\n                    break;\r\n                case \"e\":\r\n                case \"ee\":\r\n                    value = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\r\n                    if (info.parts[i] == \"ee\") {\r\n                        value = $utils.padString(value, 2, \"0\");\r\n                    }\r\n                    break;\r\n                case \"a\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"PM\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"AM\");\r\n                    }\r\n                    break;\r\n                case \"aa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P.M.\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A.M.\");\r\n                    }\r\n                    break;\r\n                case \"aaa\":\r\n                    if (hours >= 12) {\r\n                        value = this._t(\"P\");\r\n                    }\r\n                    else {\r\n                        value = this._t(\"A\");\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    value = $utils.get12Hours(hours).toString();\r\n                    break;\r\n                case \"hh\":\r\n                    value = $utils.padString($utils.get12Hours(hours), 2, \"0\");\r\n                    break;\r\n                case \"H\":\r\n                    value = hours.toString();\r\n                    break;\r\n                case \"HH\":\r\n                    value = $utils.padString(hours, 2, \"0\");\r\n                    break;\r\n                case \"K\":\r\n                    value = $utils.get12Hours(hours, 0).toString();\r\n                    break;\r\n                case \"KK\":\r\n                    value = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\r\n                    break;\r\n                case \"k\":\r\n                    value = (hours + 1).toString();\r\n                    break;\r\n                case \"kk\":\r\n                    value = $utils.padString(hours + 1, 2, \"0\");\r\n                    break;\r\n                case \"m\":\r\n                    value = minutes.toString();\r\n                    break;\r\n                case \"mm\":\r\n                    value = $utils.padString(minutes, 2, \"0\");\r\n                    break;\r\n                case \"s\":\r\n                    value = seconds.toString();\r\n                    break;\r\n                case \"ss\":\r\n                    value = $utils.padString(seconds, 2, \"0\");\r\n                    break;\r\n                case \"S\":\r\n                case \"SS\":\r\n                case \"SSS\":\r\n                    value = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\r\n                    break;\r\n                case \"x\":\r\n                    value = timestamp.toString();\r\n                    break;\r\n                case \"n\":\r\n                case \"nn\":\r\n                case \"nnn\":\r\n                    value = $utils.padString(milliseconds, info.parts[i].length, \"0\");\r\n                    break;\r\n                case \"z\":\r\n                    value = $utils.getTimeZone(originalDate || date, false, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zz\":\r\n                    value = $utils.getTimeZone(originalDate || date, true, false, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"zzz\":\r\n                    value = $utils.getTimeZone(originalDate || date, false, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined).replace(/[+-]+[0-9]+$/, \"\");\r\n                    break;\r\n                case \"zzzz\":\r\n                    value = $utils.getTimeZone(originalDate || date, true, true, this._root.utc, this._root.timezone ? this._root.timezone.name : undefined);\r\n                    break;\r\n                case \"Z\":\r\n                case \"ZZ\":\r\n                    let timezone = this._root.utc ? \"UTC\" : this._root.timezone;\r\n                    if (timezone instanceof Timezone) {\r\n                        timezone = timezone.name;\r\n                    }\r\n                    const offset = timezone ? $utils.getTimezoneOffset(timezone, originalDate || date) : date.getTimezoneOffset();\r\n                    let tz = Math.abs(offset) / 60;\r\n                    let tzh = Math.floor(tz);\r\n                    let tzm = tz * 60 - tzh * 60;\r\n                    if (this._root.utc) {\r\n                        tzh = 0;\r\n                        tzm = 0;\r\n                    }\r\n                    if (info.parts[i] == \"Z\") {\r\n                        value = \"GMT\";\r\n                        value += offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\r\n                    }\r\n                    else {\r\n                        value = offset > 0 ? \"-\" : \"+\";\r\n                        value += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\r\n                    }\r\n                    break;\r\n                case \"i\":\r\n                    value = date.toISOString();\r\n                    break;\r\n                case \"I\":\r\n                    value = date.toUTCString();\r\n                    break;\r\n            }\r\n            res = res.replace($type.PLACEHOLDER, value);\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Parses format into structured infromation.\r\n     *\r\n     * @param format Format template\r\n     */\r\n    parseFormat(format) {\r\n        // Check cache\r\n        // TODO: implement caching of the parsed format\r\n        // Init format parse info holder\r\n        let info = {\r\n            \"template\": \"\",\r\n            \"parts\": []\r\n        };\r\n        // Let TextFormatter split into chunks\r\n        let chunks = TextFormatter.chunk(format, true);\r\n        for (let i = 0; i < chunks.length; i++) {\r\n            let chunk = chunks[i];\r\n            if (chunk.type === \"value\") {\r\n                // Just \"Date\"?\r\n                if (chunk.text.match(/^date$/i)) {\r\n                    let dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n                    if (!$type.isString(dateFormat)) {\r\n                        dateFormat = \"yyyy-MM-dd\";\r\n                    }\r\n                    chunk.text = dateFormat;\r\n                }\r\n                // Find all possible parts\r\n                let matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\r\n                // Found?\r\n                if (matches) {\r\n                    // Populate template\r\n                    for (let x = 0; x < matches.length; x++) {\r\n                        info.parts.push(matches[x]);\r\n                        chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                    }\r\n                }\r\n            }\r\n            // Apply to template\r\n            info.template += chunk.text;\r\n        }\r\n        // Save cache\r\n        // TODO\r\n        return info;\r\n    }\r\n    _months() {\r\n        return [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n    }\r\n    _getMonth(index) {\r\n        return this._months()[index];\r\n    }\r\n    _shortMonths() {\r\n        return [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n    }\r\n    _getShortMonth(index) {\r\n        return this._shortMonths()[index];\r\n    }\r\n    _weekdays() {\r\n        return [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n    }\r\n    _getWeekday(index) {\r\n        return this._weekdays()[index];\r\n    }\r\n    _shortWeekdays() {\r\n        return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n    }\r\n    _getShortWeekday(index) {\r\n        return this._shortWeekdays()[index];\r\n    }\r\n    parse(source, format, utc) {\r\n        // If UTC is not supplied, use Root setting\r\n        if (typeof utc === \"undefined\") {\r\n            utc = this._root.utc;\r\n        }\r\n        // Is it already a Date\r\n        if (source instanceof Date) {\r\n            return source;\r\n        }\r\n        // Is it a numeric timestamp\r\n        if ($type.isNumber(source)) {\r\n            return new Date(source);\r\n        }\r\n        // Are we parsing a timestamp?\r\n        if (format == \"x\") {\r\n            return new Date(parseInt(source));\r\n        }\r\n        // No? Let's check if it's string, and try converting to it if nec\r\n        if (!$type.isString(source)) {\r\n            source = source.toString();\r\n        }\r\n        // Init return value\r\n        let res;\r\n        // Init RegEx for parsing\r\n        let reg = \"\";\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // Clip format to length of the source string\r\n        format = format.substr(0, source.length);\r\n        // Parse format\r\n        let info = this.parseFormat(format);\r\n        // Init parsed items holder\r\n        let parsedIndexes = {\r\n            \"year\": -1,\r\n            \"year3\": -1,\r\n            \"year2\": -1,\r\n            \"year1\": -1,\r\n            \"month\": -1,\r\n            \"monthShort\": -1,\r\n            \"monthLong\": -1,\r\n            \"weekdayShort\": -1,\r\n            \"weekdayLong\": -1,\r\n            \"day\": -1,\r\n            \"yearDay\": -1,\r\n            \"week\": -1,\r\n            \"hourBase0\": -1,\r\n            \"hour12Base0\": -1,\r\n            \"hourBase1\": -1,\r\n            \"hour12Base1\": -1,\r\n            \"minute\": -1,\r\n            \"second\": -1,\r\n            \"millisecond\": -1,\r\n            \"millisecondDigits\": -1,\r\n            \"am\": -1,\r\n            \"zone\": -1,\r\n            \"timestamp\": -1,\r\n            \"iso\": -1\r\n        };\r\n        // Init values\r\n        let resValues = {\r\n            \"year\": 1970,\r\n            \"month\": 0,\r\n            \"day\": 1,\r\n            \"hour\": 0,\r\n            \"minute\": 0,\r\n            \"second\": 0,\r\n            \"millisecond\": 0,\r\n            \"timestamp\": null,\r\n            \"offset\": 0,\r\n            \"utc\": utc\r\n        };\r\n        // Index adjuster\r\n        let indexAdjust = 0;\r\n        let index = 0;\r\n        // Iterate through all of the parts\r\n        for (let i = 0; i < info.parts.length; i++) {\r\n            // Set current match index\r\n            index = i + indexAdjust + 1;\r\n            switch (info.parts[i]) {\r\n                case \"yyyy\":\r\n                case \"YYYY\":\r\n                    reg += \"([0-9]{4})\";\r\n                    parsedIndexes.year = index;\r\n                    break;\r\n                case \"yyy\":\r\n                case \"YYY\":\r\n                    reg += \"([0-9]{3})\";\r\n                    parsedIndexes.year3 = index;\r\n                    break;\r\n                case \"yy\":\r\n                case \"YY\":\r\n                    reg += \"([0-9]{2})\";\r\n                    parsedIndexes.year2 = index;\r\n                    break;\r\n                case \"y\":\r\n                case \"Y\":\r\n                    reg += \"([0-9]{1})\";\r\n                    parsedIndexes.year1 = index;\r\n                    break;\r\n                case \"MMMM\":\r\n                    reg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthLong = index;\r\n                    break;\r\n                case \"MMM\":\r\n                    reg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\r\n                    parsedIndexes.monthShort = index;\r\n                    break;\r\n                case \"MM\":\r\n                case \"M\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.month = index;\r\n                    break;\r\n                case \"ww\":\r\n                case \"w\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.week = index;\r\n                    break;\r\n                case \"dd\":\r\n                case \"d\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.day = index;\r\n                    break;\r\n                case \"DDD\":\r\n                case \"DD\":\r\n                case \"D\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.yearDay = index;\r\n                    break;\r\n                case \"dddd\":\r\n                    reg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayLong = index;\r\n                    break;\r\n                case \"ddd\":\r\n                    reg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\r\n                    parsedIndexes.weekdayShort = index;\r\n                    break;\r\n                case \"aaa\":\r\n                case \"aa\":\r\n                case \"a\":\r\n                    // TODO: fix (escape regex)\r\n                    reg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\r\n                    parsedIndexes.am = index;\r\n                    break;\r\n                case \"hh\":\r\n                case \"h\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base1 = index;\r\n                    break;\r\n                case \"HH\":\r\n                case \"H\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase0 = index;\r\n                    break;\r\n                case \"KK\":\r\n                case \"K\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hour12Base0 = index;\r\n                    break;\r\n                case \"kk\":\r\n                case \"k\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.hourBase1 = index;\r\n                    break;\r\n                case \"mm\":\r\n                case \"m\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.minute = index;\r\n                    break;\r\n                case \"ss\":\r\n                case \"s\":\r\n                    reg += \"([0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.second = index;\r\n                    break;\r\n                case \"SSS\":\r\n                case \"SS\":\r\n                case \"S\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    parsedIndexes.millisecondDigits = info.parts[i].length;\r\n                    break;\r\n                case \"nnn\":\r\n                case \"nn\":\r\n                case \"n\":\r\n                    reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                    parsedIndexes.millisecond = index;\r\n                    break;\r\n                case \"x\":\r\n                    reg += \"([0-9]{1,})\";\r\n                    parsedIndexes.timestamp = index;\r\n                    break;\r\n                case \"Z\":\r\n                    reg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"ZZ\":\r\n                    reg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\r\n                    parsedIndexes.zone = index;\r\n                    break;\r\n                case \"i\":\r\n                    reg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\r\n                    parsedIndexes.iso = index;\r\n                    indexAdjust += 7;\r\n                    break;\r\n                case \"G\":\r\n                case \"YYYY\":\r\n                case \"YYY\":\r\n                case \"YY\":\r\n                case \"Y\":\r\n                case \"MMMMM\":\r\n                case \"W\":\r\n                case \"EEEEE\":\r\n                case \"EEEE\":\r\n                case \"EEE\":\r\n                case \"EE\":\r\n                case \"E\":\r\n                case \"eeeee\":\r\n                case \"eeee\":\r\n                case \"eee\":\r\n                case \"ee\":\r\n                case \"e\":\r\n                case \"zzzz\":\r\n                case \"zzz\":\r\n                case \"zz\":\r\n                case \"z\":\r\n                case \"t\":\r\n                    // Ignore\r\n                    indexAdjust--;\r\n                    break;\r\n            }\r\n            reg += \"[^0-9]*\";\r\n        }\r\n        // Try matching\r\n        let regex = new RegExp(reg);\r\n        let matches = source.match(regex);\r\n        if (matches) {\r\n            // Populate the date object\r\n            // Full year\r\n            if (parsedIndexes.year > -1) {\r\n                resValues.year = parseInt(matches[parsedIndexes.year]);\r\n            }\r\n            // 3-digit year\r\n            if (parsedIndexes.year3 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year3]);\r\n                val += 1000;\r\n                resValues.year = val;\r\n            }\r\n            // 2-digit year\r\n            if (parsedIndexes.year2 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year2]);\r\n                if (val > 50) {\r\n                    val += 1000;\r\n                }\r\n                else {\r\n                    val += 2000;\r\n                }\r\n                resValues.year = val;\r\n            }\r\n            // 1-digit year\r\n            if (parsedIndexes.year1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.year1]);\r\n                val = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\r\n                resValues.year = val;\r\n            }\r\n            // Full month\r\n            if (parsedIndexes.monthLong > -1) {\r\n                resValues.month = this.resolveMonth(matches[parsedIndexes.monthLong]);\r\n            }\r\n            // Short month\r\n            if (parsedIndexes.monthShort > -1) {\r\n                resValues.month = this.resolveShortMonth(matches[parsedIndexes.monthShort]);\r\n            }\r\n            // Numeric month\r\n            if (parsedIndexes.month > -1) {\r\n                resValues.month = parseInt(matches[parsedIndexes.month]) - 1;\r\n            }\r\n            // Weekday\r\n            // @todo\r\n            // Week\r\n            if ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\r\n                // We parse weeks ONLY if day is not explicitly set\r\n                // TODO: this needs work\r\n                // (but maybe later - I can hardly imagine anyone passing their dates in weeks)\r\n                resValues.month = 0;\r\n                resValues.day = $utils.getDayFromWeek(parseInt(matches[parsedIndexes.week]), resValues.year, 1, utc);\r\n            }\r\n            // Day\r\n            if (parsedIndexes.day > -1) {\r\n                resValues.day = parseInt(matches[parsedIndexes.day]);\r\n            }\r\n            // Year day\r\n            if (parsedIndexes.yearDay > -1) {\r\n                resValues.month = 0;\r\n                resValues.day = parseInt(matches[parsedIndexes.yearDay]);\r\n            }\r\n            // 24 Hour (0-23)\r\n            if (parsedIndexes.hourBase0 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\r\n            }\r\n            // 24 Hour (1-24)\r\n            if (parsedIndexes.hourBase1 > -1) {\r\n                resValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\r\n            }\r\n            // 12 Hour (0-11)\r\n            if (parsedIndexes.hour12Base0 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base0]);\r\n                if (val == 11) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // 12 Hour (1-12)\r\n            if (parsedIndexes.hour12Base1 > -1) {\r\n                let val = parseInt(matches[parsedIndexes.hour12Base1]);\r\n                if (val == 12) {\r\n                    val = 0;\r\n                }\r\n                if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                    val += 12;\r\n                }\r\n                resValues.hour = val;\r\n            }\r\n            // Minute\r\n            if (parsedIndexes.minute > -1) {\r\n                resValues.minute = parseInt(matches[parsedIndexes.minute]);\r\n            }\r\n            // Second\r\n            if (parsedIndexes.second > -1) {\r\n                resValues.second = parseInt(matches[parsedIndexes.second]);\r\n            }\r\n            // Millisecond\r\n            if (parsedIndexes.millisecond > -1) {\r\n                let val = parseInt(matches[parsedIndexes.millisecond]);\r\n                if (parsedIndexes.millisecondDigits == 2) {\r\n                    val *= 10;\r\n                }\r\n                else if (parsedIndexes.millisecondDigits == 1) {\r\n                    val *= 100;\r\n                }\r\n                resValues.millisecond = val;\r\n            }\r\n            // Timestamp\r\n            if (parsedIndexes.timestamp > -1) {\r\n                resValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\r\n                const ts = new Date(resValues.timestamp);\r\n                resValues.year = ts.getUTCFullYear();\r\n                resValues.month = ts.getUTCMonth();\r\n                resValues.day = ts.getUTCDate();\r\n                resValues.hour = ts.getUTCHours();\r\n                resValues.minute = ts.getUTCMinutes();\r\n                resValues.second = ts.getUTCSeconds();\r\n                resValues.millisecond = ts.getUTCMilliseconds();\r\n            }\r\n            // Adjust time zone\r\n            if (parsedIndexes.zone > -1) {\r\n                resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\r\n            }\r\n            // ISO\r\n            if (parsedIndexes.iso > -1) {\r\n                resValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\r\n                resValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\r\n                resValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\r\n                resValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\r\n                resValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\r\n                resValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\r\n                resValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\r\n                if (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\r\n                    resValues.utc = true;\r\n                }\r\n                else if (matches[parsedIndexes.iso + 7] != \"\") {\r\n                    resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\r\n                }\r\n            }\r\n            // Create Date object\r\n            if (resValues.utc) {\r\n                res = new Date(Date.UTC(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute, resValues.second, resValues.millisecond));\r\n            }\r\n            else {\r\n                res = new Date(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute + resValues.offset, resValues.second, resValues.millisecond);\r\n            }\r\n        }\r\n        else {\r\n            // Didn't match anything\r\n            // Let's try dropping it into Date constructor and hope for the best\r\n            res = new Date(source);\r\n        }\r\n        return res;\r\n    }\r\n    resolveTimezoneOffset(date, zone) {\r\n        let value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n        if (value) {\r\n            let match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n            let dir = match[1];\r\n            let hour = match[2];\r\n            let minute = match[3];\r\n            let offset = parseInt(hour) * 60 + parseInt(minute);\r\n            // Adjust offset\r\n            // Making it negative does not seem to make sense, but it's right\r\n            // because of how JavaScript calculates GMT offsets\r\n            if (dir == \"+\") {\r\n                offset *= -1;\r\n            }\r\n            // Check the difference in offset\r\n            let originalOffset = (date || new Date()).getTimezoneOffset();\r\n            let diff = offset - originalOffset;\r\n            return diff;\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves month name (i.e. \"December\") into a month number (11).\r\n     *\r\n     * @param value  Month name\r\n     * @return Month number\r\n     */\r\n    resolveMonth(value) {\r\n        // Let's try English first\r\n        let month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (!this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._months()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Resolves short month name (i.e. \"Dec\") into a month number.\r\n     *\r\n     * @param value  Short month name\r\n     * @return Month number\r\n     */\r\n    resolveShortMonth(value) {\r\n        // Let's try English first\r\n        let month = this._shortMonths().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Maybe long month (workaround for May)\r\n        month = this._months().indexOf(value);\r\n        if (month > -1) {\r\n            return month;\r\n        }\r\n        // Try the translation\r\n        if (this._root.language && !this._root.language.isDefault()) {\r\n            month = this._root.language.translateAll(this._shortMonths()).indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * Checks if passed in string represents AM/PM notation in many of its\r\n     * versions.\r\n     *\r\n     * @param value  Source string\r\n     * @return Is it AM/PM?\r\n     */\r\n    isAm(value) {\r\n        let list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\r\n        return list.indexOf(value.toUpperCase()) > -1;\r\n    }\r\n    /**\r\n     * Translates list of strings.\r\n     *\r\n     * @param list  Source strings\r\n     * @return Translated strings\r\n     */\r\n    getStringList(list) {\r\n        let res = [];\r\n        for (let i = 0; i < list.length; i++) {\r\n            // translate?\r\n            if (this._root.language) {\r\n                res.push($utils.escapeForRgex(this._t(list[i])));\r\n            }\r\n            else {\r\n                res.push($utils.escapeForRgex(list[i]));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n}\r\n//# sourceMappingURL=DateFormatter.js.map","import { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nexport class DurationFormatter extends Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * Collection of aliases for units.\r\n         */\r\n        Object.defineProperty(this, \"_unitAliases\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                \"Y\": \"y\",\r\n                \"D\": \"d\",\r\n                \"H\": \"h\",\r\n                \"K\": \"h\",\r\n                \"k\": \"h\",\r\n                \"n\": \"S\"\r\n            }\r\n        });\r\n    }\r\n    _setDefaults() {\r\n        const dmillisecond = \"_duration_millisecond\";\r\n        const dsecond = \"_duration_second\";\r\n        const dminute = \"_duration_minute\";\r\n        const dhour = \"_duration_hour\";\r\n        const dday = \"_duration_day\";\r\n        const dweek = \"_duration_week\";\r\n        const dmonth = \"_duration_month\";\r\n        const dyear = \"_duration_year\";\r\n        const asecond = \"_second\";\r\n        const aminute = \"_minute\";\r\n        const ahour = \"_hour\";\r\n        const aday = \"_day\";\r\n        const aweek = \"_week\";\r\n        const amonth = \"_week\";\r\n        const ayear = \"_year\";\r\n        // Defaults\r\n        this._setDefault(\"negativeBase\", 0);\r\n        this._setDefault(\"baseUnit\", \"second\");\r\n        this._setDefault(\"durationFormats\", {\r\n            \"millisecond\": {\r\n                \"millisecond\": this._t(dmillisecond),\r\n                \"second\": this._t((dmillisecond + asecond)),\r\n                \"minute\": this._t((dmillisecond + aminute)),\r\n                \"hour\": this._t((dmillisecond + ahour)),\r\n                \"day\": this._t((dmillisecond + aday)),\r\n                \"week\": this._t((dmillisecond + aweek)),\r\n                \"month\": this._t((dmillisecond + amonth)),\r\n                \"year\": this._t((dmillisecond + ayear))\r\n            },\r\n            \"second\": {\r\n                \"second\": this._t((dsecond)),\r\n                \"minute\": this._t((dsecond + aminute)),\r\n                \"hour\": this._t((dsecond + ahour)),\r\n                \"day\": this._t((dsecond + aday)),\r\n                \"week\": this._t((dsecond + aweek)),\r\n                \"month\": this._t((dsecond + amonth)),\r\n                \"year\": this._t((dsecond + ayear))\r\n            },\r\n            \"minute\": {\r\n                \"minute\": this._t((dminute)),\r\n                \"hour\": this._t((dminute + ahour)),\r\n                \"day\": this._t((dminute + aday)),\r\n                \"week\": this._t((dminute + aweek)),\r\n                \"month\": this._t((dminute + amonth)),\r\n                \"year\": this._t((dminute + ayear))\r\n            },\r\n            \"hour\": {\r\n                \"hour\": this._t((dhour)),\r\n                \"day\": this._t((dhour + aday)),\r\n                \"week\": this._t((dhour + aweek)),\r\n                \"month\": this._t((dhour + amonth)),\r\n                \"year\": this._t((dhour + ayear))\r\n            },\r\n            \"day\": {\r\n                \"day\": this._t((dday)),\r\n                \"week\": this._t((dday + aweek)),\r\n                \"month\": this._t((dday + amonth)),\r\n                \"year\": this._t((dday + ayear))\r\n            },\r\n            \"week\": {\r\n                \"week\": this._t((dweek)),\r\n                \"month\": this._t((dweek + amonth)),\r\n                \"year\": this._t((dweek + ayear))\r\n            },\r\n            \"month\": {\r\n                \"month\": this._t((dmonth)),\r\n                \"year\": this._t((dmonth + ayear))\r\n            },\r\n            \"year\": {\r\n                \"year\": this._t(dyear)\r\n            }\r\n        });\r\n        super._setDefaults();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n    }\r\n    /**\r\n     * Formats the number as duration.\r\n     *\r\n     * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n     * 16 minutes and 40 seconds.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @param base    Override base unit\r\n     * @return Formatted number\r\n     */\r\n    format(value, format, base) {\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // no format passed in or empty\r\n        if (typeof format === \"undefined\" || format === \"\") {\r\n            if (this.get(\"durationFormat\") != null) {\r\n                format = this.get(\"durationFormat\");\r\n            }\r\n            else {\r\n                format = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n            }\r\n        }\r\n        // Clean format\r\n        format = $utils.cleanFormat(format);\r\n        // get format info (it will also deal with parser caching)\r\n        let info = this.parseFormat(format, baseUnit);\r\n        // cast to number just in case\r\n        // TODO: maybe use better casting\r\n        let source = Number(value);\r\n        // format and replace the number\r\n        let details;\r\n        if (source > this.get(\"negativeBase\")) {\r\n            details = info.positive;\r\n        }\r\n        else if (source < this.get(\"negativeBase\")) {\r\n            details = info.negative;\r\n        }\r\n        else {\r\n            details = info.zero;\r\n        }\r\n        // Format\r\n        let formatted = this.applyFormat(source, details);\r\n        // Apply color?\r\n        if (details.color !== \"\") {\r\n            formatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n        }\r\n        return formatted;\r\n    }\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format  Format string, i.e. \"#,###.00\"\r\n     * @param base    Override base unit\r\n     * @return Parsed information\r\n     */\r\n    parseFormat(format, base) {\r\n        // Check cache\r\n        // TODO\r\n        // let cached = this.getCache(format);\r\n        // if (cached != null) {\r\n        // \treturn cached;\r\n        // }\r\n        // no base unit?\r\n        let baseUnit = base || this.get(\"baseUnit\");\r\n        // Initialize duration parsing info\r\n        let info = {\r\n            \"positive\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"negative\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            },\r\n            \"zero\": {\r\n                \"color\": \"\",\r\n                \"template\": \"\",\r\n                \"parts\": [],\r\n                \"source\": \"\",\r\n                \"baseUnit\": baseUnit,\r\n                \"parsed\": false,\r\n                \"absolute\": false\r\n            }\r\n        };\r\n        // Escape double vertical bars (that mean display one vertical bar)\r\n        format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n        // Split it up and deal with different formats\r\n        let parts = format.split(\"|\");\r\n        info.positive.source = parts[0];\r\n        if (typeof parts[2] === \"undefined\") {\r\n            info.zero = info.positive;\r\n        }\r\n        else {\r\n            info.zero.source = parts[2];\r\n        }\r\n        if (typeof parts[1] === \"undefined\") {\r\n            info.negative = info.positive;\r\n        }\r\n        else {\r\n            info.negative.source = parts[1];\r\n        }\r\n        // Parse each\r\n        $object.each(info, (_part, item) => {\r\n            // Already parsed\r\n            if (item.parsed) {\r\n                return;\r\n            }\r\n            // Check cached\r\n            // TODO\r\n            // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n            // \tinfo[part] = this.getCache(item.source);\r\n            // \treturn;\r\n            // }\r\n            // Begin parsing\r\n            let partFormat = item.source;\r\n            // Check for [] directives\r\n            let dirs = [];\r\n            dirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n            if (dirs && dirs.length && dirs[0] !== \"\") {\r\n                partFormat = item.source.substr(dirs[0].length);\r\n                item.color = dirs[1];\r\n            }\r\n            // Let TextFormatter split into chunks\r\n            let chunks = TextFormatter.chunk(partFormat, true);\r\n            for (let i = 0; i < chunks.length; i++) {\r\n                let chunk = chunks[i];\r\n                // replace back double vertical bar\r\n                chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                if (chunk.type === \"value\") {\r\n                    // Just \"Duration\"?\r\n                    // if (chunk.text.toLowerCase() === \"duration\") {\r\n                    // \tchunk.text = durationFormat;\r\n                    // }\r\n                    // Check for \"a\" (absolute) modifier\r\n                    if (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n                        item.absolute = true;\r\n                        chunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n                    }\r\n                    // Find all possible parts\r\n                    let matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n                    if (matches) {\r\n                        // Populate template\r\n                        for (let x = 0; x < matches.length; x++) {\r\n                            // Is it an alias?\r\n                            if (matches[x] == null) {\r\n                                matches[x] = this._unitAliases[matches[x]];\r\n                            }\r\n                            item.parts.push(matches[x]);\r\n                            chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                // Apply to template\r\n                item.template += chunk.text;\r\n            }\r\n            // Apply style formatting\r\n            //item.template = TextFormatter.format(item.template, this.outputFormat);\r\n            // Save cache\r\n            // TODO\r\n            //this.setCache(item.source, item);\r\n            // Mark this as parsed\r\n            item.parsed = true;\r\n        });\r\n        // Save cache (the whole thing)\r\n        // TODO\r\n        //this.setCache(format, info);\r\n        return info;\r\n    }\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by {parseFormat}\r\n     * @return Formatted duration\r\n     */\r\n    applyFormat(value, details) {\r\n        // Use absolute values\r\n        let negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n        value = Math.abs(value);\r\n        // Recalculate to milliseconds\r\n        let tstamp = this.toTimeStamp(value, details.baseUnit);\r\n        // Init return value\r\n        let res = details.template;\r\n        const values = {\r\n            millisecond: 0,\r\n            second: 0,\r\n            minute: 0,\r\n            hour: 0,\r\n            day: 0,\r\n            week: 0,\r\n            month: 0,\r\n            year: 0\r\n        };\r\n        // Iterate through duration parts\r\n        for (let i = 0, len = details.parts.length; i < len; i++) {\r\n            // Gather the part\r\n            let part = details.parts[i];\r\n            let unit = this._toTimeUnit(part.substr(0, 1));\r\n            // Calculate current unit value\r\n            let ints;\r\n            const unitValue = this._getUnitValue(unit);\r\n            if (i < (len - 1)) {\r\n                ints = Math.floor(tstamp / unitValue);\r\n            }\r\n            else {\r\n                ints = Math.round(tstamp / unitValue);\r\n            }\r\n            values[unit] += ints;\r\n            // Reduce timestamp\r\n            tstamp -= ints * unitValue;\r\n        }\r\n        // Check if we have full unit that we need to bump up to higher unit\r\n        $object.each(values, (unit, value) => {\r\n            if (unit == \"millisecond\" && value == 1000) {\r\n                values[\"second\"]++;\r\n                values[\"millisecond\"] = 0;\r\n            }\r\n            else if (unit == \"second\" && value == 60) {\r\n                values[\"minute\"]++;\r\n                values[\"second\"] = 0;\r\n            }\r\n            else if (unit == \"minute\" && value == 60) {\r\n                values[\"hour\"]++;\r\n                values[\"minute\"] = 0;\r\n            }\r\n            else if (unit == \"hour\" && value == 24) {\r\n                values[\"day\"]++;\r\n                values[\"hour\"] = 0;\r\n            }\r\n            else if (unit == \"day\" && value == 7 && details.parts.indexOf(\"w\") !== -1) {\r\n                values[\"week\"]++;\r\n                values[\"day\"] = 0;\r\n            }\r\n            else if (unit == \"day\" && value == 30) {\r\n                values[\"month\"]++;\r\n                values[\"day\"] = 0;\r\n            }\r\n            else if (unit == \"month\" && value == 12) {\r\n                values[\"year\"]++;\r\n                values[\"month\"] = 0;\r\n            }\r\n            // if (val > 0) {\r\n            // \tres = res.replace($type.PLACEHOLDER, $utils.padString(val, 2, \"0\"));\r\n            // }\r\n            // else {\r\n            // \tres = res.replace($type.PLACEHOLDER, \"\");\r\n            // }\r\n        });\r\n        // Iterate again\r\n        for (let i = 0, len = details.parts.length; i < len; i++) {\r\n            // Gather the part\r\n            let part = details.parts[i];\r\n            let unit = this._toTimeUnit(part.substr(0, 1));\r\n            let digits = part.length;\r\n            // Calculate current unit value\r\n            res = res.replace($type.PLACEHOLDER, $utils.padString(values[unit], digits, \"0\"));\r\n        }\r\n        // Reapply negative sign\r\n        if (negative) {\r\n            res = \"-\" + res;\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Converts numeric value to timestamp in milliseconds.\r\n     *\r\n     * @param value     A source value\r\n     * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n     * @return Value representation as a timestamp in milliseconds\r\n     */\r\n    toTimeStamp(value, baseUnit) {\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _toTimeUnit(code) {\r\n        switch (code) {\r\n            case \"S\":\r\n                return \"millisecond\";\r\n            case \"s\":\r\n                return \"second\";\r\n            case \"m\":\r\n                return \"minute\";\r\n            case \"h\":\r\n                return \"hour\";\r\n            case \"d\":\r\n                return \"day\";\r\n            case \"w\":\r\n                return \"week\";\r\n            case \"M\":\r\n                return \"month\";\r\n            case \"y\":\r\n                return \"year\";\r\n        }\r\n        ;\r\n    }\r\n    /**\r\n     * Returns appropriate default format for the value.\r\n     *\r\n     * If `maxValue` is sepcified, it will use that value to determine the time\r\n     * unit for the format.\r\n     *\r\n     * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n     * will get `\"10\"`.\r\n     *\r\n     * However, you might want it to be formatted in the context of bigger scale,\r\n     * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n     * values, including small ones will use format with minutes, e.g.:\r\n     * `00:10`, `00:50`, `12: 30`, etc.\r\n     *\r\n     * @param value     Value to format\r\n     * @param maxValue  Maximum value to be used to determine format\r\n     * @param baseUnit  Base unit of the value\r\n     * @return Format\r\n     */\r\n    getFormat(value, maxValue, baseUnit) {\r\n        // Is format override set?\r\n        if (this.get(\"durationFormat\") != null) {\r\n            return this.get(\"durationFormat\");\r\n        }\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        if (maxValue != null && value != maxValue) {\r\n            value = Math.abs(value);\r\n            maxValue = Math.abs(maxValue);\r\n            let maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][maxUnit];\r\n        }\r\n        else {\r\n            let unit = this.getValueUnit(value, baseUnit);\r\n            return this.get(\"durationFormats\")[baseUnit][unit];\r\n        }\r\n    }\r\n    /**\r\n     * Returns value's closest denominator time unit, e.g 100 seconds is\r\n     * `\"minute\"`, while 59 seconds would still be `second`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Denominator\r\n     */\r\n    getValueUnit(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        // Convert to milliseconds\r\n        let currentUnit;\r\n        let ms = this.getMilliseconds(value, baseUnit);\r\n        $object.eachContinue(this._getUnitValues(), (key, val) => {\r\n            if (key == baseUnit || currentUnit) {\r\n                let num = ms / val;\r\n                if (num <= 1) {\r\n                    if (!currentUnit) {\r\n                        currentUnit = key;\r\n                    }\r\n                    return false;\r\n                }\r\n                currentUnit = key;\r\n            }\r\n            return true;\r\n        });\r\n        return currentUnit;\r\n    }\r\n    /**\r\n     * Converts value to milliseconds according to `baseUnit`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Value in milliseconds\r\n     */\r\n    getMilliseconds(value, baseUnit) {\r\n        // Get base unit\r\n        if (!baseUnit) {\r\n            baseUnit = this.get(\"baseUnit\");\r\n        }\r\n        return value * this._getUnitValue(baseUnit);\r\n    }\r\n    _getUnitValue(timeUnit) {\r\n        return this._getUnitValues()[timeUnit];\r\n    }\r\n    _getUnitValues() {\r\n        return {\r\n            \"millisecond\": 1,\r\n            \"second\": 1000,\r\n            \"minute\": 60000,\r\n            \"hour\": 3600000,\r\n            \"day\": 86400000,\r\n            \"week\": 604800000,\r\n            \"month\": 2592000000,\r\n            \"year\": 31536000000,\r\n        };\r\n    }\r\n}\r\n//# sourceMappingURL=DurationFormatter.js.map","/**\r\n * amCharts 5 locale\r\n *\r\n * Locale: en\r\n * Language: International English\r\n * Author: Martynas Majeris\r\n *\r\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\r\n *\r\n * ---\r\n * Edit but leave the header section above this line. You can remove any\r\n * subsequent comment sections.\r\n * ---\r\n *\r\n * Use this file as a template to create translations. Leave the key part in\r\n * English intact. Fill the value with a translation.\r\n *\r\n * Empty string means no translation, so default \"International English\"\r\n * will be used.\r\n *\r\n * If you need the translation to literally be an empty string, use `null`\r\n * instead.\r\n *\r\n * IMPORTANT:\r\n * When translating make good effort to keep the translation length\r\n * at least the same chartcount as the English, especially for short prompts.\r\n *\r\n * Having significantly longer prompts may distort the actual charts.\r\n *\r\n * NOTE:\r\n * Some prompts - like months or weekdays - come in two versions: full and\r\n * shortened.\r\n *\r\n * If there's no official shortened version of these in your language, and it\r\n * would not be possible to invent such short versions that don't seem weird\r\n * to native speakers of that language, fill those with the same as full\r\n * version.\r\n *\r\n * PLACEHOLDERS:\r\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\r\n * values during translation and should be retained in the translated prompts.\r\n *\r\n * Placeholder positions may be changed to better suit structure of the\r\n * sentence.\r\n *\r\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\r\n * actual value representing range start, and \"%2\" will be replaced by end\r\n * value.\r\n *\r\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\r\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\r\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\r\n * places where they will make sense.\r\n *\r\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\r\n */\r\nexport default {\r\n    \"firstDayOfWeek\": 1,\r\n    // Number formatting options.\r\n    // \r\n    // Please check with the local standards which separator is accepted to be\r\n    // used for separating decimals, and which for thousands.\r\n    \"_decimalSeparator\": \".\",\r\n    \"_thousandSeparator\": \",\",\r\n    // Position of the percent sign in numbers\r\n    \"_percentPrefix\": null,\r\n    \"_percentSuffix\": \"%\",\r\n    // Suffixes for numbers\r\n    // When formatting numbers, big or small numers might be reformatted to\r\n    // shorter version, by applying a suffix.\r\n    // \r\n    // For example, 1000000 might become \"1m\".\r\n    // Or 1024 might become \"1KB\" if we're formatting byte numbers.\r\n    // \r\n    // This section defines such suffixes for all such cases.\r\n    \"_big_number_suffix_3\": \"k\",\r\n    \"_big_number_suffix_6\": \"M\",\r\n    \"_big_number_suffix_9\": \"G\",\r\n    \"_big_number_suffix_12\": \"T\",\r\n    \"_big_number_suffix_15\": \"P\",\r\n    \"_big_number_suffix_18\": \"E\",\r\n    \"_big_number_suffix_21\": \"Z\",\r\n    \"_big_number_suffix_24\": \"Y\",\r\n    \"_small_number_suffix_3\": \"m\",\r\n    \"_small_number_suffix_6\": \"μ\",\r\n    \"_small_number_suffix_9\": \"n\",\r\n    \"_small_number_suffix_12\": \"p\",\r\n    \"_small_number_suffix_15\": \"f\",\r\n    \"_small_number_suffix_18\": \"a\",\r\n    \"_small_number_suffix_21\": \"z\",\r\n    \"_small_number_suffix_24\": \"y\",\r\n    \"_byte_suffix_B\": \"B\",\r\n    \"_byte_suffix_KB\": \"KB\",\r\n    \"_byte_suffix_MB\": \"MB\",\r\n    \"_byte_suffix_GB\": \"GB\",\r\n    \"_byte_suffix_TB\": \"TB\",\r\n    \"_byte_suffix_PB\": \"PB\",\r\n    // Default date formats for various periods.\r\n    // \r\n    // This should reflect official or de facto formatting universally accepted\r\n    // in the country translation is being made for\r\n    // Available format codes here:\r\n    // https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\r\n    // \r\n    // This will be used when formatting date/time for particular granularity,\r\n    // e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\r\n    // \r\n    // \"date\" is used as in default date format when showing standalone dates.\r\n    \"_date\": \"yyyy-MM-dd\",\r\n    \"_date_millisecond\": \"mm:ss SSS\",\r\n    \"_date_millisecond_full\": \"HH:mm:ss SSS\",\r\n    \"_date_second\": \"HH:mm:ss\",\r\n    \"_date_second_full\": \"HH:mm:ss\",\r\n    \"_date_minute\": \"HH:mm\",\r\n    \"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_hour\": \"HH:mm\",\r\n    \"_date_hour_short\": \"HH\",\r\n    \"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_day\": \"MMM dd\",\r\n    \"_date_day_full\": \"MMM dd, yyyy\",\r\n    \"_date_week\": \"ww\",\r\n    \"_date_week_full\": \"MMM dd, yyyy\",\r\n    \"_date_month\": \"MMM\",\r\n    \"_date_month_full\": \"MMM, yyyy\",\r\n    \"_date_year\": \"yyyy\",\r\n    // Default duration formats for various base units.\r\n    // \r\n    // This will be used by DurationFormatter to format numeric values into\r\n    // duration.\r\n    // \r\n    // Notice how each duration unit comes in several versions. This is to ensure\r\n    // that each base unit is shown correctly.\r\n    // \r\n    // For example, if we have baseUnit set to \"second\", meaning our duration is\r\n    // in seconds.\r\n    // \r\n    // If we pass in `50` to formatter, it will know that we have just 50 seconds\r\n    // (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\r\n    // and the formatted result will be in like `\"50\"`.\r\n    // \r\n    // If we pass in `70`, which is more than a minute, the formatter will switch\r\n    // to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\r\n    // text.\r\n    // \r\n    // Available codes here:\r\n    // https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\r\n    \"_duration_millisecond\": \"SSS\",\r\n    \"_duration_millisecond_second\": \"ss.SSS\",\r\n    \"_duration_millisecond_minute\": \"mm:ss SSS\",\r\n    \"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\r\n    \"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\r\n    \"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\r\n    \"_duration_second\": \"ss\",\r\n    \"_duration_second_minute\": \"mm:ss\",\r\n    \"_duration_second_hour\": \"hh:mm:ss\",\r\n    \"_duration_second_day\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_week\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\r\n    \"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\r\n    \"_duration_minute\": \"mm\",\r\n    \"_duration_minute_hour\": \"hh:mm\",\r\n    \"_duration_minute_day\": \"d'd' hh:mm\",\r\n    \"_duration_minute_week\": \"d'd' hh:mm\",\r\n    \"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\r\n    \"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\r\n    \"_duration_hour\": \"hh'h'\",\r\n    \"_duration_hour_day\": \"d'd' hh'h'\",\r\n    \"_duration_hour_week\": \"d'd' hh'h'\",\r\n    \"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\r\n    \"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\r\n    \"_duration_day\": \"d'd'\",\r\n    \"_duration_day_week\": \"d'd'\",\r\n    \"_duration_day_month\": \"M'm' dd'd'\",\r\n    \"_duration_day_year\": \"y'y' MM'm' dd'd'\",\r\n    \"_duration_week\": \"w'w'\",\r\n    \"_duration_week_month\": \"w'w'\",\r\n    \"_duration_week_year\": \"w'w'\",\r\n    \"_duration_month\": \"M'm'\",\r\n    \"_duration_month_year\": \"y'y' MM'm'\",\r\n    \"_duration_year\": \"y'y'\",\r\n    // Era translations\r\n    \"_era_ad\": \"AD\",\r\n    \"_era_bc\": \"BC\",\r\n    // Day part, used in 12-hour formats, e.g. 5 P.M.\r\n    // Please note that these come in 3 variants:\r\n    // * one letter (e.g. \"A\")\r\n    // * two letters (e.g. \"AM\")\r\n    // * two letters with dots (e.g. \"A.M.\")\r\n    // \r\n    // All three need to to be translated even if they are all the same. Some\r\n    // users might use one, some the other.\r\n    \"A\": \"\",\r\n    \"P\": \"\",\r\n    \"AM\": \"\",\r\n    \"PM\": \"\",\r\n    \"A.M.\": \"\",\r\n    \"P.M.\": \"\",\r\n    // Date-related stuff.\r\n    // \r\n    // When translating months, if there's a difference, use the form which is\r\n    // best for a full date, e.g. as you would use it in \"2018 January 1\".\r\n    // \r\n    // Note that May is listed twice. This is because in English May is the same\r\n    // in both long and short forms, while in other languages it may not be the\r\n    // case. Translate \"May\" to full word, while \"May(short)\" to shortened\r\n    // version.\r\n    // \r\n    // Should month names and weekdays be capitalized or not?\r\n    // \r\n    // Rule of thumb is this: if the names should always be capitalized,\r\n    // regardless of name position within date (\"January\", \"21st January 2018\",\r\n    // etc.) use capitalized names. Otherwise enter all lowercase.\r\n    // \r\n    // The date formatter will automatically capitalize names if they are the\r\n    // first (or only) word in resulting date.\r\n    \"January\": \"\",\r\n    \"February\": \"\",\r\n    \"March\": \"\",\r\n    \"April\": \"\",\r\n    \"May\": \"\",\r\n    \"June\": \"\",\r\n    \"July\": \"\",\r\n    \"August\": \"\",\r\n    \"September\": \"\",\r\n    \"October\": \"\",\r\n    \"November\": \"\",\r\n    \"December\": \"\",\r\n    \"Jan\": \"\",\r\n    \"Feb\": \"\",\r\n    \"Mar\": \"\",\r\n    \"Apr\": \"\",\r\n    \"May(short)\": \"May\",\r\n    \"Jun\": \"\",\r\n    \"Jul\": \"\",\r\n    \"Aug\": \"\",\r\n    \"Sep\": \"\",\r\n    \"Oct\": \"\",\r\n    \"Nov\": \"\",\r\n    \"Dec\": \"\",\r\n    // Weekdays.\r\n    \"Sunday\": \"\",\r\n    \"Monday\": \"\",\r\n    \"Tuesday\": \"\",\r\n    \"Wednesday\": \"\",\r\n    \"Thursday\": \"\",\r\n    \"Friday\": \"\",\r\n    \"Saturday\": \"\",\r\n    \"Sun\": \"\",\r\n    \"Mon\": \"\",\r\n    \"Tue\": \"\",\r\n    \"Wed\": \"\",\r\n    \"Thu\": \"\",\r\n    \"Fri\": \"\",\r\n    \"Sat\": \"\",\r\n    // Date ordinal function.\r\n    // \r\n    // This is used when adding number ordinal when formatting days in dates.\r\n    // \r\n    // E.g. \"January 1st\", \"February 2nd\".\r\n    // \r\n    // The function accepts day number, and returns a string to be added to the\r\n    // day, like in default English translation, if we pass in 2, we will receive\r\n    // \"nd\" back.\r\n    \"_dateOrd\": function (day) {\r\n        let res = \"th\";\r\n        if ((day < 11) || (day > 13)) {\r\n            switch (day % 10) {\r\n                case 1:\r\n                    res = \"st\";\r\n                    break;\r\n                case 2:\r\n                    res = \"nd\";\r\n                    break;\r\n                case 3:\r\n                    res = \"rd\";\r\n                    break;\r\n            }\r\n        }\r\n        return res;\r\n    },\r\n    // Various chart controls.\r\n    // Shown as a tooltip on zoom out button.\r\n    \"Zoom Out\": \"\",\r\n    // Timeline buttons\r\n    \"Play\": \"\",\r\n    \"Stop\": \"\",\r\n    // Chart's Legend screen reader title.\r\n    \"Legend\": \"\",\r\n    // Legend's item screen reader indicator.\r\n    \"Press ENTER to toggle\": \"\",\r\n    // Shown when the chart is busy loading something.\r\n    \"Loading\": \"\",\r\n    // Shown as the first button in the breadcrumb navigation, e.g.:\r\n    // Home > First level > ...\r\n    \"Home\": \"\",\r\n    // Chart types.\r\n    // Those are used as default screen reader titles for the main chart element\r\n    // unless developer has set some more descriptive title.\r\n    \"Chart\": \"\",\r\n    \"Serial chart\": \"\",\r\n    \"X/Y chart\": \"\",\r\n    \"Pie chart\": \"\",\r\n    \"Gauge chart\": \"\",\r\n    \"Radar chart\": \"\",\r\n    \"Sankey diagram\": \"\",\r\n    \"Flow diagram\": \"\",\r\n    \"Chord diagram\": \"\",\r\n    \"TreeMap chart\": \"\",\r\n    \"Force directed tree\": \"\",\r\n    \"Sliced chart\": \"\",\r\n    // Series types.\r\n    // Used to name series by type for screen readers if they do not have their\r\n    // name set.\r\n    \"Series\": \"\",\r\n    \"Candlestick Series\": \"\",\r\n    \"OHLC Series\": \"\",\r\n    \"Column Series\": \"\",\r\n    \"Line Series\": \"\",\r\n    \"Pie Slice Series\": \"\",\r\n    \"Funnel Series\": \"\",\r\n    \"Pyramid Series\": \"\",\r\n    \"X/Y Series\": \"\",\r\n    // Map-related stuff.\r\n    \"Map\": \"\",\r\n    \"Press ENTER to zoom in\": \"\",\r\n    \"Press ENTER to zoom out\": \"\",\r\n    \"Use arrow keys to zoom in and out\": \"\",\r\n    \"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\r\n    // Export-related stuff.\r\n    // These prompts are used in Export menu labels.\r\n    // \r\n    // \"Export\" is the top-level menu item.\r\n    // \r\n    // \"Image\", \"Data\", \"Print\" as second-level indicating type of export\r\n    // operation.\r\n    // \r\n    // Leave actual format untranslated, unless you absolutely know that they\r\n    // would convey more meaning in some other way.\r\n    \"Export\": \"\",\r\n    \"Image\": \"\",\r\n    \"Data\": \"\",\r\n    \"Print\": \"\",\r\n    \"Press ENTER or use arrow keys to navigate\": \"\",\r\n    \"Press ENTER to open\": \"\",\r\n    \"Press ENTER to print.\": \"\",\r\n    \"Press ENTER to export as %1.\": \"\",\r\n    \"(Press ESC to close this message)\": \"\",\r\n    \"Image Export Complete\": \"\",\r\n    \"Export operation took longer than expected. Something might have gone wrong.\": \"\",\r\n    \"Saved from\": \"\",\r\n    \"PNG\": \"\",\r\n    \"JPG\": \"\",\r\n    \"GIF\": \"\",\r\n    \"SVG\": \"\",\r\n    \"PDF\": \"\",\r\n    \"JSON\": \"\",\r\n    \"CSV\": \"\",\r\n    \"XLSX\": \"\",\r\n    \"HTML\": \"\",\r\n    // Scrollbar-related stuff.\r\n    // \r\n    // Scrollbar is a control which can zoom and pan the axes on the chart.\r\n    // \r\n    // Each scrollbar has two grips: left or right (for horizontal scrollbar) or\r\n    // upper and lower (for vertical one).\r\n    // \r\n    // Prompts change in relation to whether Scrollbar is vertical or horizontal.\r\n    // \r\n    // The final section is used to indicate the current range of selection.\r\n    \"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\r\n    \"Use left and right arrows to move selection\": \"\",\r\n    \"Use left and right arrows to move left selection\": \"\",\r\n    \"Use left and right arrows to move right selection\": \"\",\r\n    \"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\r\n    \"Use up and down arrows to move selection\": \"\",\r\n    \"Use up and down arrows to move lower selection\": \"\",\r\n    \"Use up and down arrows to move upper selection\": \"\",\r\n    \"From %1 to %2\": \"\",\r\n    \"From %1\": \"\",\r\n    \"To %1\": \"\",\r\n    // Data loader-related.\r\n    \"No parser available for file: %1\": \"\",\r\n    \"Error parsing file: %1\": \"\",\r\n    \"Unable to load file: %1\": \"\",\r\n    \"Invalid date\": \"\",\r\n    // Common actions\r\n    \"Close\": \"\",\r\n    \"Minimize\": \"\",\r\n    \"Confirm\": \"\"\r\n};\r\n//# sourceMappingURL=en.js.map","import { Entity } from \"./Entity\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport en from \"../../../locales/en\";\r\n;\r\n/**\r\n * Add localization functionality.\r\n */\r\nexport class Language extends Entity {\r\n    _setDefaults() {\r\n        this.setPrivate(\"defaultLocale\", en);\r\n        super._setDefaults();\r\n    }\r\n    /**\r\n     * Returns a prompt translation.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translate(prompt, locale, ...rest) {\r\n        // Get langauge\r\n        if (!locale) {\r\n            locale = this._root.locale || this.getPrivate(\"defaultLocale\");\r\n        }\r\n        // Init translation\r\n        let translation = prompt;\r\n        let value = locale[prompt];\r\n        // Try to look for the translation\r\n        if (value === null) {\r\n            translation = \"\";\r\n        }\r\n        else if (value != null) {\r\n            // It might be an empty string\r\n            if (value) {\r\n                translation = value;\r\n            }\r\n        }\r\n        else if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            // Try to look in default language\r\n            return this.translate(prompt, this.getPrivate(\"defaultLocale\"), ...rest);\r\n        }\r\n        // Replace %1, %2, etc params\r\n        if (rest.length) {\r\n            for (let len = rest.length, i = 0; i < len; ++i) {\r\n                translation = translation.split(\"%\" + (i + 1)).join(rest[i]);\r\n            }\r\n        }\r\n        // Return the translation\r\n        return translation;\r\n    }\r\n    /**\r\n     * Returns a prompt translation, including custom prompts.\r\n     *\r\n     * @param   prompt   Prompt to translate\r\n     * @param   locale   Target locale\r\n     * @param   ...rest  Parameters\r\n     * @return           Translation\r\n     */\r\n    translateAny(prompt, locale, ...rest) {\r\n        return this.translate(prompt, locale, ...rest);\r\n    }\r\n    /**\r\n     * Add a custom prompt to locale.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  prompt       Source prompt\r\n     * @param  translation  Tanslation\r\n     * @param  locale       Target locale\r\n     */\r\n    setTranslationAny(prompt, translation, locale) {\r\n        const localeTarget = locale || this._root.locale;\r\n        localeTarget[prompt] = translation;\r\n    }\r\n    /**\r\n     * Add a batch of custom prompts.\r\n     *\r\n     * @since 5.3.3\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/creating-translations/#Extending_locale_with_custom_prompts}\r\n     * @param  translations  Translations\r\n     * @param  locale        Target locale\r\n     */\r\n    setTranslationsAny(translations, locale) {\r\n        $object.each(translations, (key, val) => {\r\n            this.setTranslationAny(key, val, locale);\r\n        });\r\n    }\r\n    translateEmpty(prompt, locale, ...rest) {\r\n        let translation = this.translate(prompt, locale, ...rest);\r\n        return translation == prompt ? \"\" : translation;\r\n    }\r\n    translateFunc(prompt, locale) {\r\n        if (this._root.locale[prompt]) {\r\n            return this._root.locale[prompt];\r\n        }\r\n        // Try to look in default language\r\n        if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n            return this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\r\n        }\r\n        // Fail - return empty function\r\n        return () => {\r\n            return \"\";\r\n        };\r\n    }\r\n    /**\r\n     * Translates a btach of prompts.\r\n     *\r\n     * @param  list    Array of prompts to translate\r\n     * @param  locale  Target locale\r\n     * @return         Array of translations\r\n     */\r\n    translateAll(list, locale) {\r\n        // Translate all items in the list\r\n        if (!this.isDefault()) {\r\n            return $array.map(list, (x) => this.translate(x, locale));\r\n        }\r\n        else {\r\n            return list;\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if the currently selected locale is a default locale.\r\n     *\r\n     * @return `true` if locale is default; `false` if it is not.\r\n     */\r\n    isDefault() {\r\n        return this.getPrivate(\"defaultLocale\") === this._root.locale;\r\n    }\r\n}\r\n//# sourceMappingURL=Language.js.map","/**\r\n * Modified from Pixi:\r\n *\r\n * The MIT License\r\n *\r\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n/**\r\n * @ignore\r\n */\r\nexport class Matrix {\r\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\r\n        Object.defineProperty(this, \"a\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"b\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"c\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"d\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n    }\r\n    /**\r\n     * Sets the matrix based on all the available properties\r\n     */\r\n    setTransform(x, y, pivotX, pivotY, rotation, scale = 1) {\r\n        this.a = Math.cos(rotation) * scale;\r\n        this.b = Math.sin(rotation) * scale;\r\n        this.c = -Math.sin(rotation) * scale;\r\n        this.d = Math.cos(rotation) * scale;\r\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\r\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\r\n    }\r\n    /**\r\n     * Get a new position with the current transformation applied.\r\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\r\n     */\r\n    apply(origin) {\r\n        return {\r\n            x: (this.a * origin.x) + (this.c * origin.y) + this.tx,\r\n            y: (this.b * origin.x) + (this.d * origin.y) + this.ty\r\n        };\r\n    }\r\n    /**\r\n     * Get a new position with the inverse of the current transformation applied.\r\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\r\n     */\r\n    applyInverse(origin) {\r\n        const id = 1 / ((this.a * this.d) + (this.c * -this.b));\r\n        return {\r\n            x: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\r\n            y: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\r\n        };\r\n    }\r\n    /**\r\n     * Appends the given Matrix to this Matrix.\r\n     */\r\n    append(matrix) {\r\n        const a1 = this.a;\r\n        const b1 = this.b;\r\n        const c1 = this.c;\r\n        const d1 = this.d;\r\n        this.a = (matrix.a * a1) + (matrix.b * c1);\r\n        this.b = (matrix.a * b1) + (matrix.b * d1);\r\n        this.c = (matrix.c * a1) + (matrix.d * c1);\r\n        this.d = (matrix.c * b1) + (matrix.d * d1);\r\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\r\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\r\n    }\r\n    /**\r\n     * Prepends the given Matrix to this Matrix.\r\n     */\r\n    prepend(matrix) {\r\n        const tx1 = this.tx;\r\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\r\n            const a1 = this.a;\r\n            const c1 = this.c;\r\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\r\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\r\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\r\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\r\n        }\r\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\r\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\r\n    }\r\n    /**\r\n     * Copies the other matrix's properties into this matrix\r\n     */\r\n    copyFrom(matrix) {\r\n        this.a = matrix.a;\r\n        this.b = matrix.b;\r\n        this.c = matrix.c;\r\n        this.d = matrix.d;\r\n        this.tx = matrix.tx;\r\n        this.ty = matrix.ty;\r\n    }\r\n}\r\n//# sourceMappingURL=Matrix.js.map","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;","/** @ignore */ /** */\r\nimport { BlendMode } from \"./Renderer\";\r\nimport { Color } from \"../../util/Color\";\r\nimport { Matrix } from \"../../util/Matrix\";\r\nimport { Percent, percent } from \"../../util/Percent\";\r\n//import { Throttler } from \"../../util/Throttler\";\r\nimport { ArrayDisposer, Disposer, DisposerClass, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\r\nimport { TextFormatter } from \"../../util/TextFormatter\";\r\nimport * as $utils from \"../../util/Utils\";\r\nimport * as $array from \"../../util/Array\";\r\nimport * as $object from \"../../util/Object\";\r\nimport * as $type from \"../../util/Type\";\r\nimport * as $math from \"../../util/Math\";\r\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\r\n/**\r\n * @ignore\r\n */\r\nfunction checkArgs(name, actual, expected) {\r\n    if (actual !== expected) {\r\n        throw new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkMinArgs(name, actual, expected) {\r\n    if (actual < expected) {\r\n        throw new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkEvenArgs(name, actual, expected) {\r\n    checkMinArgs(name, actual, expected);\r\n    if ((actual % expected) !== 0) {\r\n        throw new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n * This splits the flag so that way 0017 will be processed as 0 0 17\r\n *\r\n * This is important for weird paths like `M17 5A1 1 0 0017 30 1 1 0 0017 5`\r\n */\r\nfunction splitArcFlags(args) {\r\n    for (let i = 0; i < args.length; i += 7) {\r\n        let index = i + 3;\r\n        let flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])([01])(.*)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args.splice(index, 0, a[2]);\r\n                ++index;\r\n                if (a[3].length > 0) {\r\n                    args[index] = a[3];\r\n                }\r\n                else {\r\n                    args.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        ++index;\r\n        flag = args[index];\r\n        if (flag.length > 1) {\r\n            const a = /^([01])(.+)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args[index] = a[2];\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction assertBinary(value) {\r\n    if (value === 0 || value === 1) {\r\n        return value;\r\n    }\r\n    else {\r\n        throw new Error(\"Flag must be 0 or 1\");\r\n    }\r\n}\r\n//  1 -> 0xffffff * (2 / 2)\r\n//  2 -> 0xffffff * (1 / 2)\r\n//\r\n//  3 -> 0xffffff * (3 / 4)\r\n//  4 -> 0xffffff * (1 / 4)\r\n//\r\n//  5 -> 0xffffff * (7 / 8)\r\n//  6 -> 0xffffff * (5 / 8)\r\n//  7 -> 0xffffff * (3 / 8)\r\n//  8 -> 0xffffff * (1 / 8)\r\n//\r\n//  9 -> 0xffffff * (15 / 16)\r\n// 10 -> 0xffffff * (13 / 16)\r\n// 11 -> 0xffffff * (11 / 16)\r\n// 12 -> 0xffffff *  (9 / 16)\r\n// 13 -> 0xffffff *  (7 / 16)\r\n// 14 -> 0xffffff *  (5 / 16)\r\n// 15 -> 0xffffff *  (3 / 16)\r\n// 16 -> 0xffffff *  (1 / 16)\r\n// @todo remove this old color distribution algo if the new one pans out\r\n/*function distributeId(id: number): number {\r\n    if (id === 1) {\r\n        return 0x000001;\r\n\r\n    } else {\r\n        // Finds the closest power of 2\r\n        const base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\r\n\r\n        // Translates the id into an odd fraction index\r\n        const index = ((base - id) * 2) + 1;\r\n\r\n        // TODO is Math.round correct ?\r\n        return Math.round(0xffffff * (index / base));\r\n    }\r\n}*/\r\n/**\r\n * Function by smeans:\r\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\r\n * @ignore\r\n */\r\nfunction distributeId(id) {\r\n    const rgb = [0, 0, 0];\r\n    for (let i = 0; i < 24; i++) {\r\n        rgb[i % 3] <<= 1;\r\n        rgb[i % 3] |= id & 0x01;\r\n        id >>= 1;\r\n    }\r\n    return (rgb[0] | 0) + (rgb[1] << 8) + (rgb[2] << 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction eachTargets(hitTarget, f) {\r\n    for (;;) {\r\n        if (hitTarget.interactive) {\r\n            if (!f(hitTarget)) {\r\n                break;\r\n            }\r\n        }\r\n        if (hitTarget._parent) {\r\n            hitTarget = hitTarget._parent;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n}\r\n// TODO feature detection for mouse/touch/pointer\r\n/**\r\n * @ignore\r\n */\r\nfunction onPointerEvent(element, name, f) {\r\n    return $utils.addEventListener(element, $utils.getRendererEvent(name), (event) => {\r\n        const target = $utils.getEventTarget(event);\r\n        let touches = event.touches;\r\n        if (touches) {\r\n            if (touches.length == 0) {\r\n                touches = event.changedTouches;\r\n            }\r\n            f($array.copy(touches), target);\r\n        }\r\n        else {\r\n            f([event], target);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction isTainted(image) {\r\n    const canvas = document.createElement(\"canvas\");\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    const context = canvas.getContext(\"2d\", { willReadFrequently: true });\r\n    context.drawImage(image, 0, 0, 1, 1);\r\n    try {\r\n        context.getImageData(0, 0, 1, 1);\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        console.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\r\n        return true;\r\n    }\r\n}\r\n/**\r\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\r\n *\r\n * @ignore\r\n */\r\nfunction clearCanvas(view) {\r\n    view.width = 0;\r\n    view.height = 0;\r\n    view.style.width = \"0px\";\r\n    view.style.height = \"0px\";\r\n}\r\n/**\r\n * Aligns the coordinate to the pixel, so it renders crisp\r\n *\r\n * @ignore\r\n */\r\nfunction crisp(x) {\r\n    return Math.floor(x) + .5;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasPivot {\r\n    constructor() {\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    get x() {\r\n        return this._x;\r\n    }\r\n    get y() {\r\n        return this._y;\r\n    }\r\n    set x(value) {\r\n        this._x = value;\r\n    }\r\n    set y(value) {\r\n        this._y = value;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasDisplayObject extends DisposerClass {\r\n    constructor(renderer) {\r\n        super();\r\n        Object.defineProperty(this, \"_layer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"mask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"interactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"inactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"wheelable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"cancelTouch\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"isMeasured\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"buttonMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"alpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"compoundAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"angle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"crisp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"pivot\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new CanvasPivot()\r\n        });\r\n        Object.defineProperty(this, \"filter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"cursorOverStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_replacedCursorStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_matrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        // TODO can this be replaced with _localMatrix ?\r\n        Object.defineProperty(this, \"_uMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_bounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._renderer = renderer;\r\n    }\r\n    subStatus(status) {\r\n        return {\r\n            inactive: (this.inactive == null ? status.inactive : this.inactive),\r\n            layer: this._layer || status.layer,\r\n        };\r\n    }\r\n    _dispose() {\r\n        this._renderer._removeObject(this);\r\n        this.getLayer().dirty = true;\r\n    }\r\n    getCanvas() {\r\n        return this.getLayer().view;\r\n    }\r\n    getLayer() {\r\n        let self = this;\r\n        for (;;) {\r\n            if (self._layer) {\r\n                return self._layer;\r\n            }\r\n            else if (self._parent) {\r\n                self = self._parent;\r\n            }\r\n            else {\r\n                return this._renderer.defaultLayer;\r\n            }\r\n        }\r\n    }\r\n    setLayer(order, margin) {\r\n        if (order == null) {\r\n            this._layer = undefined;\r\n        }\r\n        else {\r\n            const visible = true;\r\n            this._layer = this._renderer.getLayer(order, visible);\r\n            this._layer.visible = visible;\r\n            this._layer.margin = margin;\r\n            if (margin) {\r\n                $utils.setInteractive(this._layer.view, false);\r\n            }\r\n            this._renderer._ghostLayer.setMargin(this._renderer.layers);\r\n            if (this._parent) {\r\n                this._parent.registerChildLayer(this._layer);\r\n            }\r\n            this._layer.dirty = true;\r\n            this._renderer.resizeLayer(this._layer);\r\n            this._renderer.resizeGhost();\r\n        }\r\n    }\r\n    markDirtyLayer() {\r\n        this.getLayer().dirty = true;\r\n    }\r\n    clear() {\r\n        this.invalidateBounds();\r\n    }\r\n    invalidateBounds() {\r\n        this._localBounds = undefined;\r\n    }\r\n    _addBounds(_bounds) { }\r\n    _getColorId() {\r\n        if (this._colorId === undefined) {\r\n            this._colorId = this._renderer.paintId(this);\r\n        }\r\n        return this._colorId;\r\n    }\r\n    _isInteractive(status) {\r\n        return !status.inactive && (this.interactive || this._renderer._forceInteractive > 0);\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this._isInteractive(status);\r\n    }\r\n    contains(child) {\r\n        for (;;) {\r\n            if (child === this) {\r\n                return true;\r\n            }\r\n            else if (child._parent) {\r\n                child = child._parent;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    toGlobal(point) {\r\n        return this._matrix.apply(point);\r\n    }\r\n    toLocal(point) {\r\n        return this._matrix.applyInverse(point);\r\n    }\r\n    getLocalMatrix() {\r\n        this._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\r\n        return this._uMatrix;\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            const bn = 10000000;\r\n            this._localBounds = {\r\n                left: bn,\r\n                top: bn,\r\n                right: -bn,\r\n                bottom: -bn\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    getAdjustedBounds(bounds) {\r\n        this._setMatrix();\r\n        const matrix = this.getLocalMatrix();\r\n        const p0 = matrix.apply({ x: bounds.left, y: bounds.top });\r\n        const p1 = matrix.apply({ x: bounds.right, y: bounds.top });\r\n        const p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\r\n        const p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\r\n        return {\r\n            left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n            top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n            right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n            bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n        };\r\n    }\r\n    on(key, callback, context) {\r\n        if (this.interactive) {\r\n            return this._renderer._addEvent(this, key, callback, context);\r\n        }\r\n        else {\r\n            return new Disposer(() => { });\r\n        }\r\n    }\r\n    _setMatrix() {\r\n        // TODO only calculate this if it has actually changed\r\n        this._localMatrix.setTransform(this.x, this.y, this.pivot.x, this.pivot.y, \r\n        // Converts degrees to radians\r\n        this.angle * Math.PI / 180, this.scale);\r\n        this._matrix.copyFrom(this._localMatrix);\r\n        if (this._parent) {\r\n            // TODO only calculate this if it has actually changed\r\n            this._matrix.prepend(this._parent._matrix);\r\n        }\r\n    }\r\n    _transform(context, resolution) {\r\n        const m = this._matrix;\r\n        let tx = m.tx * resolution;\r\n        let ty = m.ty * resolution;\r\n        if (this.crisp) {\r\n            tx = crisp(tx);\r\n            ty = crisp(ty);\r\n        }\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, tx, ty);\r\n    }\r\n    _transformMargin(context, resolution, margin) {\r\n        const m = this._matrix;\r\n        context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, (m.tx + margin.left) * resolution, (m.ty + margin.top) * resolution);\r\n    }\r\n    _transformLayer(context, resolution, layer) {\r\n        if (layer.margin) {\r\n            this._transformMargin(context, layer.scale || resolution, layer.margin);\r\n        }\r\n        else {\r\n            this._transform(context, layer.scale || resolution);\r\n        }\r\n    }\r\n    render(status, targetGhostLayer = 0) {\r\n        if (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\r\n            this._setMatrix();\r\n            const subStatus = this.subStatus(status);\r\n            const resolution = this._renderer.resolution;\r\n            const layers = this._renderer.layers;\r\n            const ghostLayer = this._renderer._ghostLayer;\r\n            const ghostContext = ghostLayer.context;\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n            }\r\n            // TODO improve this\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    const context = layer.context;\r\n                    context.save();\r\n                    // We must apply the mask before we transform the element\r\n                    if (mask) {\r\n                        mask._transformLayer(context, resolution, layer);\r\n                        mask._runPath(context);\r\n                        context.clip();\r\n                    }\r\n                    context.globalAlpha = this.compoundAlpha * this.alpha;\r\n                    this._transformLayer(context, resolution, layer);\r\n                    if (this.filter) {\r\n                        context.filter = this.filter;\r\n                    }\r\n                }\r\n            });\r\n            ghostContext.save();\r\n            // We must apply the mask before we transform the element\r\n            if (mask && this._isInteractiveMask(subStatus)) {\r\n                mask._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n                mask._runPath(ghostContext);\r\n                ghostContext.clip();\r\n            }\r\n            this._transformMargin(ghostContext, resolution, ghostLayer.margin);\r\n            if ((subStatus.layer.order > 0) && !targetGhostLayer) {\r\n                $array.move(this._renderer._deferredGhostLayers, subStatus.layer.order);\r\n            }\r\n            this._render(subStatus, targetGhostLayer);\r\n            ghostContext.restore();\r\n            $array.each(layers, (layer) => {\r\n                if (layer) {\r\n                    layer.context.restore();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _render(status, _targetGhostLayer = 0) {\r\n        if (this.exportable === false) {\r\n            status.layer.tainted = true;\r\n        }\r\n    }\r\n    _ghostOnly(targetGhostLayer = 0) {\r\n        return targetGhostLayer > 0 ? true : false;\r\n    }\r\n    _drawGhost(status, targetGhostLayer = 0) {\r\n        const interactive = this._isInteractive(status);\r\n        const order = status.layer.order || 0;\r\n        return interactive && ((order == 0 && !this._ghostOnly(targetGhostLayer)) || order == targetGhostLayer) ? true : false;\r\n    }\r\n    hovering() {\r\n        return this._renderer._hovering.has(this);\r\n    }\r\n    dragging() {\r\n        return this._renderer._dragging.some((x) => x.value === this);\r\n    }\r\n    shouldCancelTouch() {\r\n        const renderer = this._renderer;\r\n        if (renderer.tapToActivate && !renderer._touchActive) {\r\n            return false;\r\n        }\r\n        if (this.cancelTouch) {\r\n            return true;\r\n        }\r\n        else if (this._parent) {\r\n            return this._parent.shouldCancelTouch();\r\n        }\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasContainer extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"interactiveChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_childLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    _isInteractiveMask(status) {\r\n        return this.interactiveChildren || super._isInteractiveMask(status);\r\n    }\r\n    addChild(child) {\r\n        child._parent = this;\r\n        this._children.push(child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    addChildAt(child, index) {\r\n        child._parent = this;\r\n        this._children.splice(index, 0, child);\r\n        if (child._layer) {\r\n            this.registerChildLayer(child._layer);\r\n        }\r\n    }\r\n    removeChild(child) {\r\n        child._parent = undefined;\r\n        $array.removeFirst(this._children, child);\r\n    }\r\n    _render(status, targetGhostLayer) {\r\n        super._render(status);\r\n        const renderer = this._renderer;\r\n        if (this.interactive && this.interactiveChildren) {\r\n            ++renderer._forceInteractive;\r\n        }\r\n        $array.each(this._children, (child) => {\r\n            child.compoundAlpha = this.compoundAlpha * this.alpha;\r\n            child.render(status, targetGhostLayer);\r\n        });\r\n        if (this.interactive && this.interactiveChildren) {\r\n            --renderer._forceInteractive;\r\n        }\r\n    }\r\n    registerChildLayer(layer) {\r\n        if (!this._childLayers) {\r\n            this._childLayers = [];\r\n        }\r\n        $array.pushOne(this._childLayers, layer);\r\n        if (this._parent) {\r\n            this._parent.registerChildLayer(layer);\r\n        }\r\n    }\r\n    markDirtyLayer(deep = false) {\r\n        super.markDirtyLayer();\r\n        if (deep && this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => layer.dirty = true);\r\n        }\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._childLayers) {\r\n            $array.each(this._childLayers, (layer) => {\r\n                layer.dirty = true;\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction setPoint(bounds, point) {\r\n    bounds.left = Math.min(bounds.left, point.x);\r\n    bounds.top = Math.min(bounds.top, point.y);\r\n    bounds.right = Math.max(bounds.right, point.x);\r\n    bounds.bottom = Math.max(bounds.bottom, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Op {\r\n    colorize(_context, _forceColor) { }\r\n    colorizeGhost(context, forceColor) {\r\n        this.colorize(context, forceColor);\r\n    }\r\n    path(_context) { }\r\n    pathGhost(context) {\r\n        this.path(context);\r\n    }\r\n    addBounds(_bounds) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginPath extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.beginPath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BeginFill extends Op {\r\n    constructor(color) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.fillStyle = forceColor;\r\n        }\r\n        else {\r\n            context.fillStyle = this.color;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndFill extends Op {\r\n    constructor(clearShadow) {\r\n        super();\r\n        Object.defineProperty(this, \"clearShadow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: clearShadow\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.fill();\r\n        if (this.clearShadow) {\r\n            context.shadowColor = \"\";\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass EndStroke extends Op {\r\n    colorize(context, _forceColor) {\r\n        context.stroke();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineStyle extends Op {\r\n    constructor(width, color, lineJoin, lineCap) {\r\n        super();\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"lineJoin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineJoin\r\n        });\r\n        Object.defineProperty(this, \"lineCap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineCap\r\n        });\r\n    }\r\n    colorize(context, forceColor) {\r\n        if (forceColor !== undefined) {\r\n            context.strokeStyle = forceColor;\r\n        }\r\n        else {\r\n            context.strokeStyle = this.color;\r\n        }\r\n        context.lineWidth = this.width;\r\n        if (this.lineJoin) {\r\n            context.lineJoin = this.lineJoin;\r\n        }\r\n        if (this.lineCap) {\r\n            context.lineCap = this.lineCap;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDash extends Op {\r\n    constructor(dash) {\r\n        super();\r\n        Object.defineProperty(this, \"dash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dash\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.setLineDash(this.dash);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineDashOffset extends Op {\r\n    constructor(dashOffset) {\r\n        super();\r\n        Object.defineProperty(this, \"dashOffset\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dashOffset\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        context.lineDashOffset = this.dashOffset;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawRect extends Op {\r\n    constructor(x, y, width, height) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n    }\r\n    path(context) {\r\n        context.rect(this.x, this.y, this.width, this.height);\r\n    }\r\n    addBounds(bounds) {\r\n        const l = this.x;\r\n        const t = this.y;\r\n        const r = l + this.width;\r\n        const b = t + this.height;\r\n        setPoint(bounds, { x: l, y: t });\r\n        setPoint(bounds, { x: r, y: t });\r\n        setPoint(bounds, { x: l, y: b });\r\n        setPoint(bounds, { x: r, y: b });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawCircle extends Op {\r\n    constructor(x, y, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x + this.radius, this.y);\r\n        context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\r\n        setPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass DrawEllipse extends Op {\r\n    constructor(x, y, radiusX, radiusY) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(this, \"radiusX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusX\r\n        });\r\n        Object.defineProperty(this, \"radiusY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\r\n    }\r\n    // TODO handle skewing and rotation\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\r\n        setPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Arc extends Op {\r\n    constructor(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n        super();\r\n        Object.defineProperty(this, \"cx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cx\r\n        });\r\n        Object.defineProperty(this, \"cy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cy\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: startAngle\r\n        });\r\n        Object.defineProperty(this, \"endAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: endAngle\r\n        });\r\n        Object.defineProperty(this, \"anticlockwise\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: anticlockwise\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\r\n        }\r\n    }\r\n    addBounds(bounds) {\r\n        let arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\r\n        setPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\r\n        setPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ArcTo extends Op {\r\n    constructor(x1, y1, x2, y2, radius) {\r\n        super();\r\n        Object.defineProperty(this, \"x1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x1\r\n        });\r\n        Object.defineProperty(this, \"y1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y1\r\n        });\r\n        Object.defineProperty(this, \"x2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x2\r\n        });\r\n        Object.defineProperty(this, \"y2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y2\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n    }\r\n    path(context) {\r\n        if (this.radius > 0) {\r\n            context.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\r\n        }\r\n    }\r\n    // TODO: add points\r\n    addBounds(_bounds) {\r\n        /*\r\n        // not finished\r\n        https://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\r\n\r\n        if (prevPoint) {\r\n            let x1 = prevPoint.x;\r\n            let y1 = prevPoint.y;\r\n            let x2 = this.x2;\r\n            let y2 = this.y2;\r\n            let r = this.radius;\r\n\r\n            let xa = (x2 - x1) / 2;\r\n            let ya = (y2 - y1) / 2;\r\n\r\n            let x0 = x1 + xa;\r\n            let y0 = y1 + ya;\r\n\r\n            let a = Math.hypot(xa, ya);\r\n            let b = Math.sqrt(r * r - a * a);\r\n\r\n            let cx = x0 + b * ya / a;\r\n            let cy = y0 - b * xa / a;\r\n\r\n            console.log(cx, cy);\r\n        }*/\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass LineTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.lineTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass MoveTo extends Op {\r\n    constructor(x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.moveTo(this.x, this.y);\r\n    }\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass ClosePath extends Op {\r\n    path(context) {\r\n        context.closePath();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass BezierCurveTo extends Op {\r\n    constructor(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"cpX2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX2\r\n        });\r\n        Object.defineProperty(this, \"cpY2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY2\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.cpX2, y: this.cpY2 });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass QuadraticCurveTo extends Op {\r\n    constructor(cpX, cpY, toX, toY) {\r\n        super();\r\n        Object.defineProperty(this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n    }\r\n    path(context) {\r\n        context.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n        setPoint(bounds, { x: this.toX, y: this.toY });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass Shadow extends Op {\r\n    constructor(color, blur, offsetX, offsetY, opacity) {\r\n        super();\r\n        Object.defineProperty(this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(this, \"blur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: blur\r\n        });\r\n        Object.defineProperty(this, \"offsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetX\r\n        });\r\n        Object.defineProperty(this, \"offsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetY\r\n        });\r\n        Object.defineProperty(this, \"opacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: opacity\r\n        });\r\n    }\r\n    colorize(context, _forceColor) {\r\n        if (this.opacity) {\r\n            context.fillStyle = this.color;\r\n        }\r\n        context.shadowColor = this.color;\r\n        context.shadowBlur = this.blur;\r\n        context.shadowOffsetX = this.offsetX;\r\n        context.shadowOffsetY = this.offsetY;\r\n    }\r\n    colorizeGhost(_context, _forceColor) { }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nclass GraphicsImage extends Op {\r\n    constructor(image, width, height, x, y) {\r\n        super();\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: image\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n        Object.defineProperty(this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n    }\r\n    path(context) {\r\n        context.drawImage(this.image, this.x, this.y, this.width, this.height);\r\n    }\r\n    // TODO: OK?\r\n    addBounds(bounds) {\r\n        setPoint(bounds, { x: this.x, y: this.y });\r\n        setPoint(bounds, { x: this.width, y: this.height });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasGraphics extends CanvasDisplayObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_operations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"blendMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: BlendMode.NORMAL\r\n        });\r\n        Object.defineProperty(this, \"_hasShadows\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_fillAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this._operations.length = 0;\r\n    }\r\n    _pushOp(op) {\r\n        this._operations.push(op);\r\n    }\r\n    beginFill(color, alpha = 1) {\r\n        this._fillAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new BeginFill(color.toCSS(alpha)));\r\n            }\r\n            else {\r\n                this.isMeasured = true;\r\n                this._pushOp(new BeginFill(color));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\r\n        }\r\n    }\r\n    endFill() {\r\n        this._pushOp(new EndFill(this._hasShadows));\r\n    }\r\n    endStroke() {\r\n        this._pushOp(new EndStroke());\r\n    }\r\n    beginPath() {\r\n        this._pushOp(new BeginPath());\r\n    }\r\n    lineStyle(width = 0, color, alpha = 1, lineJoin, lineCap) {\r\n        this._strokeAlpha = alpha;\r\n        if (color) {\r\n            if (color instanceof Color) {\r\n                this._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin, lineCap));\r\n            }\r\n            else {\r\n                this._pushOp(new LineStyle(width, color, lineJoin, lineCap));\r\n            }\r\n        }\r\n        else {\r\n            this._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin, lineCap));\r\n        }\r\n    }\r\n    setLineDash(dash) {\r\n        this._pushOp(new LineDash(dash ? dash : []));\r\n    }\r\n    setLineDashOffset(dashOffset = 0) {\r\n        this._pushOp(new LineDashOffset(dashOffset));\r\n    }\r\n    drawRect(x, y, width, height) {\r\n        this._pushOp(new DrawRect(x, y, width, height));\r\n    }\r\n    drawCircle(x, y, radius) {\r\n        this._pushOp(new DrawCircle(x, y, radius));\r\n    }\r\n    drawEllipse(x, y, radiusX, radiusY) {\r\n        this._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\r\n    }\r\n    arc(cx, cy, radius, startAngle, endAngle, anticlockwise = false) {\r\n        this._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\r\n    }\r\n    arcTo(x1, y1, x2, y2, radius) {\r\n        this._pushOp(new ArcTo(x1, y1, x2, y2, radius));\r\n    }\r\n    lineTo(x, y) {\r\n        this._pushOp(new LineTo(x, y));\r\n    }\r\n    moveTo(x, y) {\r\n        this._pushOp(new MoveTo(x, y));\r\n    }\r\n    bezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        this._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\r\n    }\r\n    quadraticCurveTo(cpX, cpY, toX, toY) {\r\n        this._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\r\n    }\r\n    closePath() {\r\n        this._pushOp(new ClosePath());\r\n    }\r\n    shadow(color, blur = 0, offsetX = 0, offsetY = 0, opacity) {\r\n        this._hasShadows = true;\r\n        this._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\r\n    }\r\n    image(image, width, height, x, y) {\r\n        this._pushOp(new GraphicsImage(image, width, height, x, y));\r\n    }\r\n    // https://svgwg.org/svg2-draft/paths.html#DProperty\r\n    // TODO better error checking\r\n    svgPath(path) {\r\n        let x = 0;\r\n        let y = 0;\r\n        let cpx = null;\r\n        let cpy = null;\r\n        let qcpx = null;\r\n        let qcpy = null;\r\n        const SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\r\n        const ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\r\n        let match;\r\n        while ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\r\n            const name = match[1];\r\n            const rest = match[2];\r\n            const args = [];\r\n            while ((match = ARGS_REGEXP.exec(rest)) !== null) {\r\n                args.push(match[1]);\r\n            }\r\n            // Reset control point\r\n            if (name !== \"S\" && name !== \"s\" && name !== \"C\" && name !== \"c\") {\r\n                cpx = null;\r\n                cpy = null;\r\n            }\r\n            // Reset control point\r\n            if (name !== \"Q\" && name !== \"q\" && name !== \"T\" && name !== \"t\") {\r\n                qcpx = null;\r\n                qcpy = null;\r\n            }\r\n            switch (name) {\r\n                case \"M\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x = +args[0];\r\n                    y = +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"m\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    x += +args[0];\r\n                    y += +args[1];\r\n                    this.moveTo(x, y);\r\n                    for (let i = 2; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"L\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"l\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"H\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"h\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        x += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"V\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y = +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"v\":\r\n                    checkMinArgs(name, args.length, 1);\r\n                    for (let i = 0; i < args.length; ++i) {\r\n                        y += +args[i];\r\n                        this.lineTo(x, y);\r\n                    }\r\n                    break;\r\n                case \"C\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i];\r\n                        const y1 = +args[i + 1];\r\n                        cpx = +args[i + 2];\r\n                        cpy = +args[i + 3];\r\n                        x = +args[i + 4];\r\n                        y = +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"c\":\r\n                    checkEvenArgs(name, args.length, 6);\r\n                    for (let i = 0; i < args.length; i += 6) {\r\n                        const x1 = +args[i] + x;\r\n                        const y1 = +args[i + 1] + y;\r\n                        cpx = +args[i + 2] + x;\r\n                        cpy = +args[i + 3] + y;\r\n                        x += +args[i + 4];\r\n                        y += +args[i + 5];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"S\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i];\r\n                        cpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"s\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    if (cpx === null || cpy === null) {\r\n                        cpx = x;\r\n                        cpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        const x1 = 2 * x - cpx;\r\n                        const y1 = 2 * y - cpy;\r\n                        cpx = +args[i] + x;\r\n                        cpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"Q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i];\r\n                        qcpy = +args[i + 1];\r\n                        x = +args[i + 2];\r\n                        y = +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"q\":\r\n                    checkEvenArgs(name, args.length, 4);\r\n                    for (let i = 0; i < args.length; i += 4) {\r\n                        qcpx = +args[i] + x;\r\n                        qcpy = +args[i + 1] + y;\r\n                        x += +args[i + 2];\r\n                        y += +args[i + 3];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"T\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x = +args[i];\r\n                        y = +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"t\":\r\n                    checkEvenArgs(name, args.length, 2);\r\n                    if (qcpx === null || qcpy === null) {\r\n                        qcpx = x;\r\n                        qcpy = y;\r\n                    }\r\n                    for (let i = 0; i < args.length; i += 2) {\r\n                        qcpx = 2 * x - qcpx;\r\n                        qcpy = 2 * y - qcpy;\r\n                        x += +args[i];\r\n                        y += +args[i + 1];\r\n                        this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                    }\r\n                    break;\r\n                case \"A\":\r\n                case \"a\":\r\n                    const relative = (name === \"a\");\r\n                    splitArcFlags(args);\r\n                    checkEvenArgs(name, args.length, 7);\r\n                    for (let i = 0; i < args.length; i += 7) {\r\n                        let cx = +args[i + 5];\r\n                        let cy = +args[i + 6];\r\n                        if (relative) {\r\n                            cx += x;\r\n                            cy += y;\r\n                        }\r\n                        const bs = arcToBezier({\r\n                            px: x,\r\n                            py: y,\r\n                            rx: +args[i],\r\n                            ry: +args[i + 1],\r\n                            xAxisRotation: +args[i + 2],\r\n                            largeArcFlag: assertBinary(+args[i + 3]),\r\n                            sweepFlag: assertBinary(+args[i + 4]),\r\n                            cx,\r\n                            cy,\r\n                        });\r\n                        $array.each(bs, (b) => {\r\n                            this.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\r\n                            x = b.x;\r\n                            y = b.y;\r\n                        });\r\n                    }\r\n                    break;\r\n                case \"Z\":\r\n                case \"z\":\r\n                    checkArgs(name, args.length, 0);\r\n                    this.closePath();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    _runPath(context) {\r\n        context.beginPath();\r\n        $array.each(this._operations, (op) => {\r\n            op.path(context);\r\n        });\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        super._render(status);\r\n        const layerDirty = status.layer.dirty;\r\n        const interactive = this._isInteractive(status);\r\n        const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n        const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n        if (layerDirty || interactive || ghostOnly) {\r\n            const context = status.layer.context;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            if (layerDirty && !ghostOnly) {\r\n                context.globalCompositeOperation = this.blendMode;\r\n                context.beginPath();\r\n            }\r\n            let color;\r\n            if (drawGhost) {\r\n                ghostContext.beginPath();\r\n                color = this._getColorId();\r\n            }\r\n            $array.each(this._operations, (op) => {\r\n                if (layerDirty && !ghostOnly) {\r\n                    op.path(context);\r\n                    op.colorize(context, undefined);\r\n                }\r\n                if (drawGhost) {\r\n                    op.pathGhost(ghostContext);\r\n                    op.colorizeGhost(ghostContext, color);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    renderDetached(context) {\r\n        if (this.visible) {\r\n            this._setMatrix();\r\n            context.save();\r\n            // We must apply the mask before we transform the element\r\n            const mask = this.mask;\r\n            if (mask) {\r\n                mask._setMatrix();\r\n                mask._transform(context, 1);\r\n                mask._runPath(context);\r\n                context.clip();\r\n            }\r\n            // TODO handle compoundAlpha somehow ?\r\n            context.globalAlpha = this.compoundAlpha * this.alpha;\r\n            this._transform(context, 1);\r\n            if (this.filter) {\r\n                context.filter = this.filter;\r\n            }\r\n            context.globalCompositeOperation = this.blendMode;\r\n            context.beginPath();\r\n            $array.each(this._operations, (op) => {\r\n                op.path(context);\r\n                op.colorize(context, undefined);\r\n            });\r\n            context.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            $array.each(this._operations, (op) => {\r\n                op.addBounds(bounds);\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasText extends CanvasDisplayObject {\r\n    constructor(renderer, text, style) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"style\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"textVisible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"truncated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_textInfo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        this.text = text;\r\n        this.style = style;\r\n    }\r\n    invalidateBounds() {\r\n        super.invalidateBounds();\r\n        this._textInfo = undefined;\r\n    }\r\n    invalidateVisibility() {\r\n        this.textVisible = true;\r\n        this.scale = this._originalScale || 1;\r\n    }\r\n    _shared(context) {\r\n        if (this.style.textAlign) {\r\n            context.textAlign = this.style.textAlign;\r\n        }\r\n        if (this.style.direction) {\r\n            context.direction = this.style.direction;\r\n        }\r\n        if (this.style.textBaseline) {\r\n            context.textBaseline = this.style.textBaseline;\r\n        }\r\n    }\r\n    _prerender(status, ignoreGhost = false, ignoreFontWeight = false) {\r\n        super._render(status);\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        // Font style\r\n        const style = this.style;\r\n        let fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\r\n        context.font = fontStyle;\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.font = fontStyle;\r\n        }\r\n        // Other parameters\r\n        if (style.fill) {\r\n            if (style.fill instanceof Color) {\r\n                context.fillStyle = style.fill.toCSS(style.fillOpacity != undefined ? style.fillOpacity : 1);\r\n            }\r\n            else {\r\n                context.fillStyle = style.fill;\r\n            }\r\n        }\r\n        if (style.shadowColor) {\r\n            status.layer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\r\n        }\r\n        if (style.shadowBlur) {\r\n            status.layer.context.shadowBlur = style.shadowBlur;\r\n        }\r\n        if (style.shadowOffsetX) {\r\n            status.layer.context.shadowOffsetX = style.shadowOffsetX;\r\n        }\r\n        if (style.shadowOffsetY) {\r\n            status.layer.context.shadowOffsetY = style.shadowOffsetY;\r\n        }\r\n        this._shared(context);\r\n        if (this._isInteractive(status) && !ignoreGhost) {\r\n            ghostContext.fillStyle = this._getColorId();\r\n            this._shared(ghostContext);\r\n        }\r\n    }\r\n    _getFontStyle(style2, ignoreFontWeight = false) {\r\n        // Process defaults\r\n        const style = this.style;\r\n        let fontStyle = [];\r\n        if (style2 && style2.fontVariant) {\r\n            fontStyle.push(style2.fontVariant);\r\n        }\r\n        else if (style.fontVariant) {\r\n            fontStyle.push(style.fontVariant);\r\n        }\r\n        if (!ignoreFontWeight) {\r\n            if (style2 && style2.fontWeight) {\r\n                fontStyle.push(style2.fontWeight);\r\n            }\r\n            else if (style.fontWeight) {\r\n                fontStyle.push(style.fontWeight);\r\n            }\r\n        }\r\n        if (style2 && style2.fontStyle) {\r\n            fontStyle.push(style2.fontStyle);\r\n        }\r\n        else if (style.fontStyle) {\r\n            fontStyle.push(style.fontStyle);\r\n        }\r\n        if (style2 && style2.fontSize) {\r\n            if ($type.isNumber(style2.fontSize)) {\r\n                style2.fontSize = style2.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style2.fontSize);\r\n        }\r\n        else if (style.fontSize) {\r\n            if ($type.isNumber(style.fontSize)) {\r\n                style.fontSize = style.fontSize + \"px\";\r\n            }\r\n            fontStyle.push(style.fontSize);\r\n        }\r\n        if (style2 && style2.fontFamily) {\r\n            fontStyle.push(style2.fontFamily);\r\n        }\r\n        else if (style.fontFamily) {\r\n            fontStyle.push(style.fontFamily);\r\n        }\r\n        else if (fontStyle.length) {\r\n            fontStyle.push(\"Arial\");\r\n        }\r\n        return fontStyle.join(\" \");\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        // We need measurements in order to properly position text for alignment\r\n        if (!this._textInfo) {\r\n            this._measure(status);\r\n        }\r\n        if (this.textVisible) {\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            context.save();\r\n            ghostContext.save();\r\n            this._prerender(status);\r\n            // const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n            // const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        if (!ghostOnly) {\r\n                            context.font = chunk.style;\r\n                        }\r\n                        if (this._isInteractive(status)) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        if (!ghostOnly) {\r\n                            context.fillStyle = chunk.fill.toCSS();\r\n                        }\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Draw text\r\n                    if (layerDirty && !ghostOnly) {\r\n                        context.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    // Draw underline\r\n                    if (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\r\n                        let thickness = 1;\r\n                        let offset = 1;\r\n                        let fontSize = chunk.height;\r\n                        const oversizedBehavior = this.style.oversizedBehavior || \"\";\r\n                        if ([\"truncate\", \"wrap\", \"wrap-no-break\"].indexOf(oversizedBehavior) > -1) {\r\n                            // Measure actual width of the text so the line fits\r\n                            const metrics = this._measureText(chunk.text, context);\r\n                            chunk.width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        }\r\n                        let offsetX = chunk.offsetX;\r\n                        switch (this.style.textAlign) {\r\n                            case \"right\":\r\n                            case \"end\":\r\n                                offsetX -= chunk.width;\r\n                                break;\r\n                            case \"center\":\r\n                                offsetX -= chunk.width / 2;\r\n                                break;\r\n                        }\r\n                        if (chunk.style) {\r\n                            const format = TextFormatter.getTextStyle(chunk.style);\r\n                            switch (format.fontWeight) {\r\n                                case \"bolder\":\r\n                                case \"bold\":\r\n                                case \"700\":\r\n                                case \"800\":\r\n                                case \"900\":\r\n                                    thickness = 2;\r\n                                    break;\r\n                            }\r\n                        }\r\n                        if (fontSize) {\r\n                            offset = fontSize / 20;\r\n                        }\r\n                        let y;\r\n                        if (chunk.textDecoration == \"line-through\") {\r\n                            y = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\r\n                        }\r\n                        else {\r\n                            y = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\r\n                        }\r\n                        if (!ghostOnly) {\r\n                            context.save();\r\n                            context.beginPath();\r\n                            if (chunk.fill) {\r\n                                context.strokeStyle = chunk.fill.toCSS();\r\n                            }\r\n                            else if (this.style.fill && this.style.fill instanceof Color) {\r\n                                context.strokeStyle = this.style.fill.toCSS();\r\n                            }\r\n                            context.lineWidth = thickness * offset;\r\n                            context.moveTo(offsetX, y);\r\n                            context.lineTo(offsetX + chunk.width, y);\r\n                            context.stroke();\r\n                            context.restore();\r\n                        }\r\n                    }\r\n                    if (interactive && this.interactive && drawGhost) {\r\n                        // Draw text in ghost canvas ONLY if it is set as interactive\r\n                        // explicitly. This way we avoid hit test anomalies caused by anti\r\n                        // aliasing of text.\r\n                        ghostContext.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                });\r\n            });\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n    }\r\n    _addBounds(bounds) {\r\n        if (this.visible && this.isMeasured) {\r\n            //if (this._textVisible) {\r\n            const x = this._measure({\r\n                inactive: this.inactive,\r\n                layer: this.getLayer(),\r\n            });\r\n            setPoint(bounds, { x: x.left, y: x.top });\r\n            setPoint(bounds, { x: x.right, y: x.bottom });\r\n            //}\r\n        }\r\n    }\r\n    _ignoreFontWeight() {\r\n        return /apple/i.test(navigator.vendor);\r\n    }\r\n    _measure(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        // Reset text info\r\n        this._textInfo = [];\r\n        // Init\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true, this._ignoreFontWeight());\r\n        // Get default font metrix\r\n        const refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let minX = 0;\r\n        let maxX = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        let currentStyle;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks;\r\n            if (line == \"\") {\r\n                chunks = [{\r\n                        type: \"value\",\r\n                        text: \"\"\r\n                    }];\r\n            }\r\n            else {\r\n                chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            }\r\n            while (chunks.length > 0) {\r\n                // Init line object\r\n                let lineInfo = {\r\n                    offsetY: offsetY,\r\n                    ascent: 0,\r\n                    width: 0,\r\n                    height: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    textChunks: []\r\n                };\r\n                // Measure reference text\r\n                const metrics = this._measureText(refText, context);\r\n                const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                lineInfo.height = height;\r\n                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                let currentFormat;\r\n                let currentDecoration = this.style.textDecoration;\r\n                let currentFill;\r\n                let currentChunkWidth;\r\n                let skipFurtherText = false;\r\n                let firstTextChunk = true;\r\n                let leftoverChunks = [];\r\n                let currentVerticalAlign;\r\n                //let offsetX = 0;\r\n                //let chunk;\r\n                //while(chunk = chunks.shift()) {\r\n                $array.eachContinue(chunks, (chunk, index) => {\r\n                    // Format chunk\r\n                    if (chunk.type == \"format\") {\r\n                        if (chunk.text == \"[/]\") {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                                styleRestored = true;\r\n                            }\r\n                            currentFill = undefined;\r\n                            currentStyle = undefined;\r\n                            currentChunkWidth = undefined;\r\n                            currentDecoration = this.style.textDecoration;\r\n                            currentVerticalAlign = undefined;\r\n                            currentFormat = chunk.text;\r\n                        }\r\n                        else {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                            }\r\n                            let format = TextFormatter.getTextStyle(chunk.text);\r\n                            const fontStyle = this._getFontStyle(format);\r\n                            context.save();\r\n                            ghostContext.save();\r\n                            context.font = fontStyle;\r\n                            currentStyle = fontStyle;\r\n                            currentFormat = chunk.text;\r\n                            if (format.textDecoration) {\r\n                                currentDecoration = format.textDecoration;\r\n                            }\r\n                            if (format.fill) {\r\n                                currentFill = format.fill;\r\n                            }\r\n                            if (format.width) {\r\n                                currentChunkWidth = $type.toNumber(format.width);\r\n                            }\r\n                            if (format.verticalAlign) {\r\n                                currentVerticalAlign = format.verticalAlign;\r\n                            }\r\n                            styleRestored = false;\r\n                            // Measure reference text after change of format\r\n                            const metrics = this._measureText(refText, context);\r\n                            const height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                            if (height > lineInfo.height) {\r\n                                lineInfo.height = height;\r\n                            }\r\n                            if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                            }\r\n                        }\r\n                    }\r\n                    // Text chunk\r\n                    else if (chunk.type == \"value\" && !skipFurtherText) {\r\n                        // Measure\r\n                        const metrics = this._measureText(chunk.text, context);\r\n                        let chunkWidth = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n                        // Check for fit\r\n                        if (truncate) {\r\n                            this.truncated = undefined;\r\n                            // Break words?\r\n                            let breakWords = firstTextChunk || this.style.breakWords || false;\r\n                            // Measure ellipsis and check if it fits\r\n                            const ellipsis = this.style.ellipsis || \"\";\r\n                            const ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\r\n                                chunk.text = this._truncateText(context, chunk.text, excessWidth, breakWords);\r\n                                chunk.text += ellipsis;\r\n                                skipFurtherText = true;\r\n                                this.truncated = true;\r\n                            }\r\n                        }\r\n                        else if (wrap) {\r\n                            // Check fit\r\n                            if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                const excessWidth = maxWidth - lineInfo.width;\r\n                                const tmpText = this._truncateText(context, chunk.text, excessWidth, false, (firstTextChunk && this.style.oversizedBehavior != \"wrap-no-break\"));\r\n                                if (tmpText == \"\") {\r\n                                    // Unable to fit a single letter - hide the whole label\r\n                                    this.textVisible = true;\r\n                                    return false;\r\n                                }\r\n                                //skipFurtherText = true;\r\n                                //Add remaining chunks for the next line\r\n                                leftoverChunks = chunks.slice(index + 1);\r\n                                //Add remaining text of current chunk if it was forced-cut\r\n                                if ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\r\n                                    leftoverChunks.unshift({\r\n                                        type: \"value\",\r\n                                        text: chunk.text.substr(tmpText.length)\r\n                                    });\r\n                                    if (currentFormat) {\r\n                                        leftoverChunks.unshift({\r\n                                            type: \"format\",\r\n                                            text: currentFormat\r\n                                        });\r\n                                    }\r\n                                }\r\n                                // Set current chunk (truncated)\r\n                                chunk.text = $utils.trim(tmpText);\r\n                                chunks = [];\r\n                                skipFurtherText = true;\r\n                            }\r\n                        }\r\n                        // Chunk width?\r\n                        let leftBoundMod = 1;\r\n                        let rightBoundMod = 1;\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            // increase horizontal bounding boxes accordingly\r\n                            const boundsMod = chunkWidth / currentChunkWidth;\r\n                            switch (this.style.textAlign) {\r\n                                case \"right\":\r\n                                case \"end\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    break;\r\n                                case \"center\":\r\n                                    leftBoundMod = boundsMod;\r\n                                    rightBoundMod = boundsMod;\r\n                                    break;\r\n                                default:\r\n                                    rightBoundMod = boundsMod;\r\n                            }\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft / leftBoundMod;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight / rightBoundMod;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: chunk.text,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: 0,\r\n                            textDecoration: currentDecoration,\r\n                            verticalAlign: currentVerticalAlign\r\n                        });\r\n                        //offsetX += chunkWidth;\r\n                        firstTextChunk = false;\r\n                    }\r\n                    if (leftoverChunks) {\r\n                        //return false;\r\n                    }\r\n                    return true;\r\n                    //}\r\n                });\r\n                if (this.style.lineHeight instanceof Percent) {\r\n                    lineInfo.height *= this.style.lineHeight.value;\r\n                    lineInfo.ascent *= this.style.lineHeight.value;\r\n                }\r\n                else {\r\n                    lineInfo.height *= this.style.lineHeight || 1.2;\r\n                    lineInfo.ascent *= this.style.lineHeight || 1.2;\r\n                }\r\n                if (minX < lineInfo.left) {\r\n                    minX = lineInfo.left;\r\n                }\r\n                if (maxX < lineInfo.right) {\r\n                    maxX = lineInfo.right;\r\n                }\r\n                this._textInfo.push(lineInfo);\r\n                //lineInfo.offsetY += lineInfo.ascent;\r\n                offsetY += lineInfo.height;\r\n                // Reset chunks so that it can proceed to the next line\r\n                chunks = leftoverChunks || [];\r\n            }\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo, _index) => {\r\n            let currentChunkOffset = 0;\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\r\n                chunk.offsetY += lineInfo.height - lineInfo.height * (this.style.baselineRatio || 0.19);\r\n                currentChunkOffset += chunk.width * (rtl ? -1 : 1);\r\n                if (chunk.verticalAlign) {\r\n                    switch (chunk.verticalAlign) {\r\n                        case \"super\":\r\n                            chunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\r\n                            break;\r\n                        case \"sub\":\r\n                            chunk.offsetY += chunk.height / 2;\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        const bounds = {\r\n            left: rtl ? -maxX : -minX,\r\n            top: 0,\r\n            right: rtl ? minX : maxX,\r\n            bottom: offsetY,\r\n        };\r\n        // We need to fit?\r\n        if (oversizedBehavior !== \"none\") {\r\n            const ratio = this._fitRatio(bounds);\r\n            if (ratio < 1) {\r\n                if (oversizedBehavior == \"fit\") {\r\n                    if ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\r\n                        this.textVisible = false;\r\n                        bounds.left = 0;\r\n                        bounds.top = 0;\r\n                        bounds.right = 0;\r\n                        bounds.bottom = 0;\r\n                    }\r\n                    else {\r\n                        if (!this._originalScale) {\r\n                            this._originalScale = this.scale;\r\n                        }\r\n                        this.scale = ratio;\r\n                        this.textVisible = true;\r\n                    }\r\n                }\r\n                else if (oversizedBehavior == \"hide\") {\r\n                    this.textVisible = false;\r\n                    bounds.left = 0;\r\n                    bounds.top = 0;\r\n                    bounds.right = 0;\r\n                    bounds.bottom = 0;\r\n                }\r\n                else {\r\n                    switch (this.style.textAlign) {\r\n                        case \"right\":\r\n                        case \"end\":\r\n                            bounds.left = rtl ? maxWidth : -maxWidth;\r\n                            bounds.right = 0;\r\n                            break;\r\n                        case \"center\":\r\n                            bounds.left = -maxWidth / 2;\r\n                            bounds.right = maxWidth / 2;\r\n                            break;\r\n                        default:\r\n                            bounds.left = 0;\r\n                            bounds.right = rtl ? -maxWidth : maxWidth;\r\n                    }\r\n                    this.scale = this._originalScale || 1;\r\n                    this._originalScale = undefined;\r\n                    this.textVisible = true;\r\n                }\r\n            }\r\n            else {\r\n                this.scale = this._originalScale || 1;\r\n                this._originalScale = undefined;\r\n                this.textVisible = true;\r\n            }\r\n        }\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return bounds;\r\n    }\r\n    _fitRatio(bounds) {\r\n        const maxW = this.style.maxWidth;\r\n        const maxH = this.style.maxHeight;\r\n        if (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\r\n            return 1;\r\n        }\r\n        const w = bounds.right - bounds.left;\r\n        const h = bounds.bottom - bounds.top;\r\n        return Math.min(maxW / w || 1, maxH / h || 1);\r\n    }\r\n    _truncateText(context, text, maxWidth, breakWords = false, fallbackBreakWords = true) {\r\n        let width;\r\n        do {\r\n            if (breakWords) {\r\n                text = text.slice(0, -1);\r\n            }\r\n            else {\r\n                let tmp = text.replace(/[^,;:!?\\\\\\/\\s​]+[,;:!?\\\\\\/\\s​]*$/g, \"\");\r\n                if ((tmp == \"\" || tmp === text) && fallbackBreakWords) {\r\n                    breakWords = true;\r\n                }\r\n                else if (tmp == \"\") {\r\n                    return text;\r\n                }\r\n                else {\r\n                    text = tmp;\r\n                }\r\n            }\r\n            const metrics = this._measureText(text, context);\r\n            width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n        } while ((width > maxWidth) && text != \"\");\r\n        return text;\r\n    }\r\n    _measureText(text, context) {\r\n        let metrics = context.measureText(text);\r\n        let fakeMetrics = {};\r\n        if (metrics.actualBoundingBoxAscent == null) {\r\n            const div = document.createElement(\"div\");\r\n            div.innerText = text;\r\n            div.style.visibility = \"hidden\";\r\n            div.style.position = \"absolute\";\r\n            div.style.top = \"-1000000px;\";\r\n            div.style.fontFamily = this.style.fontFamily || \"\";\r\n            div.style.fontSize = this.style.fontSize + \"\";\r\n            document.body.appendChild(div);\r\n            const bbox = div.getBoundingClientRect();\r\n            document.body.removeChild(div);\r\n            const h = bbox.height;\r\n            const w = metrics.width;\r\n            let left = 0;\r\n            let right = w;\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: h,\r\n                actualBoundingBoxDescent: 0,\r\n                actualBoundingBoxLeft: left,\r\n                actualBoundingBoxRight: right,\r\n                fontBoundingBoxAscent: h,\r\n                fontBoundingBoxDescent: 0,\r\n                width: w\r\n            };\r\n            //return fake;\r\n        }\r\n        else {\r\n            fakeMetrics = {\r\n                actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                actualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                actualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\r\n                actualBoundingBoxRight: metrics.actualBoundingBoxRight,\r\n                fontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                fontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                width: metrics.width\r\n            };\r\n        }\r\n        const w = metrics.width;\r\n        switch (this.style.textAlign) {\r\n            case \"right\":\r\n            case \"end\":\r\n                fakeMetrics.actualBoundingBoxLeft = w;\r\n                fakeMetrics.actualBoundingBoxRight = 0;\r\n                break;\r\n            case \"center\":\r\n                fakeMetrics.actualBoundingBoxLeft = w / 2;\r\n                fakeMetrics.actualBoundingBoxRight = w / 2;\r\n                break;\r\n            default:\r\n                fakeMetrics.actualBoundingBoxLeft = 0;\r\n                fakeMetrics.actualBoundingBoxRight = w;\r\n        }\r\n        return fakeMetrics;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasTextStyle {\r\n    constructor() {\r\n        //public wordWrapWidth: number = 100;\r\n        Object.defineProperty(this, \"fill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fillOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textAlign\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontFamily\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontWeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontVariant\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textDecoration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // leading?: number;\r\n        // letterSpacing?: number;\r\n        Object.defineProperty(this, \"lineHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: percent(120)\r\n        });\r\n        Object.defineProperty(this, \"baselineRatio\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0.19\r\n        });\r\n        // padding?: number;\r\n        // stroke?: number;\r\n        // strokeThickness?: number;\r\n        // trim?: number;\r\n        // wordWrap?: boolean;\r\n        Object.defineProperty(this, \"direction\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textBaseline\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"oversizedBehavior\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"none\"\r\n        });\r\n        Object.defineProperty(this, \"breakWords\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"ellipsis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"…\"\r\n        });\r\n        Object.defineProperty(this, \"maxWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"maxHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"minScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ignoreFormatting\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRadialText extends CanvasText {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"textType\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"circular\"\r\n        });\r\n        Object.defineProperty(this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"inside\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"orientation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"auto\"\r\n        });\r\n        Object.defineProperty(this, \"kerning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_textReversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                this._renderCircular(status, targetGhostLayer);\r\n                break;\r\n            default:\r\n                super._render(status, targetGhostLayer);\r\n                break;\r\n        }\r\n    }\r\n    _renderCircular(status, targetGhostLayer = 0) {\r\n        if (this.textVisible) {\r\n            this._prerender(status);\r\n            const interactive = this._isInteractive(status);\r\n            const context = status.layer.context;\r\n            const layerDirty = status.layer.dirty;\r\n            const ghostContext = this._renderer._ghostLayer.context;\r\n            // Savepoint\r\n            context.save();\r\n            if (interactive) {\r\n                ghostContext.save();\r\n            }\r\n            // We need measurements in order to properly position text for alignment\r\n            if (!this._textInfo) {\r\n                this._measure(status);\r\n            }\r\n            // Init\r\n            let radius = (this.radius || 0);\r\n            let startAngle = (this.startAngle || 0);\r\n            let deltaAngle = 0;\r\n            let orientation = this.orientation;\r\n            let inward = orientation == \"auto\" ? \"auto\" : orientation == \"inward\";\r\n            const inside = this.inside;\r\n            const align = this.style.textAlign || \"left\";\r\n            const kerning = this.kerning || 0;\r\n            let clockwise = align == \"left\" ? 1 : -1;\r\n            const shouldReverse = !this._textReversed;\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            // Check if we need to invert the whole stuff\r\n            if (inward == \"auto\") {\r\n                // Calc max angle so we know whether we need to flip it\r\n                let maxAngle = 0;\r\n                let midAngle = 0;\r\n                $array.each(this._textInfo, (line, _index) => {\r\n                    const deltaAngle = startAngle + (line.width / (radius - line.height)) / 2 * -clockwise;\r\n                    if (deltaAngle > maxAngle) {\r\n                        maxAngle = deltaAngle;\r\n                    }\r\n                });\r\n                if (align == \"left\") {\r\n                    midAngle = (maxAngle + deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else if (align == \"right\") {\r\n                    midAngle = (maxAngle - deltaAngle / 2) * $math.DEGREES;\r\n                }\r\n                else {\r\n                    midAngle = startAngle * $math.DEGREES;\r\n                }\r\n                midAngle = $math.normalizeAngle(midAngle);\r\n                inward = (midAngle >= 270) || (midAngle <= 90);\r\n            }\r\n            if (inward == true && shouldReverse) {\r\n                this._textInfo.reverse();\r\n                this._textReversed = true;\r\n            }\r\n            // if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\r\n            // \tclockwise *= -1;\r\n            // }\r\n            // Process text info produced by _measure()\r\n            $array.each(this._textInfo, (line, _index) => {\r\n                const textHeight = line.height;\r\n                // Adjust radius (for `inside = false`)\r\n                // Radius adjustment for `inside = false` is below the line calculation\r\n                if (!inside) {\r\n                    radius += textHeight;\r\n                }\r\n                // Reverse letters if we're painting them counter-clockwise\r\n                if (((clockwise == -1 && inward) || (clockwise == 1 && !inward)) && shouldReverse) {\r\n                    line.textChunks.reverse();\r\n                }\r\n                // Init angles\r\n                let lineStartAngle = startAngle;\r\n                deltaAngle = 0;\r\n                // Adjust for center-align\r\n                if (align == \"center\") {\r\n                    lineStartAngle += (line.width / (radius - textHeight)) / 2 * -clockwise;\r\n                    deltaAngle = lineStartAngle - startAngle;\r\n                }\r\n                // if (inward == \"auto\") {\r\n                // \tlet midAngle;\r\n                // \tif (align == \"left\") {\r\n                // \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \telse if () {\r\n                // \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\r\n                // \t}\r\n                // \tinward = (midAngle >= 270) || (midAngle <= 90);\r\n                // }\r\n                // Rotate letters if they are facing outward\r\n                lineStartAngle += (Math.PI * (inward ? 0 : 1)); // Rotate 180 if outward\r\n                // Savepoint\r\n                context.save();\r\n                if (interactive) {\r\n                    ghostContext.save();\r\n                }\r\n                // Assume starting angle\r\n                if (!ghostOnly) {\r\n                    context.rotate(lineStartAngle);\r\n                }\r\n                if (interactive) {\r\n                    ghostContext.rotate(lineStartAngle);\r\n                }\r\n                let angleShift = 0;\r\n                $array.each(line.textChunks, (chunk, _index) => {\r\n                    // Draw the letter\r\n                    const char = chunk.text;\r\n                    const charWidth = chunk.width;\r\n                    // Rotate half a letter\r\n                    angleShift = (charWidth / 2) / (radius - textHeight) * clockwise;\r\n                    if (!ghostOnly) {\r\n                        context.rotate(angleShift);\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                    // Set style\r\n                    if (chunk.style) {\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        if (!ghostOnly) {\r\n                            context.font = chunk.style;\r\n                        }\r\n                        if (interactive) {\r\n                            ghostContext.font = chunk.style;\r\n                        }\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.save();\r\n                        if (!ghostOnly) {\r\n                            context.fillStyle = chunk.fill.toCSS();\r\n                        }\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Center letters\r\n                    if (!ghostOnly) {\r\n                        context.textBaseline = \"middle\";\r\n                        context.textAlign = \"center\";\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.textBaseline = \"middle\";\r\n                        ghostContext.textAlign = \"center\";\r\n                    }\r\n                    // Plop the letter\r\n                    if (layerDirty && !ghostOnly) {\r\n                        context.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (interactive && drawGhost) {\r\n                        ghostContext.fillText(char, 0, (inward ? 1 : -1) * (0 - radius + textHeight / 2));\r\n                    }\r\n                    if (chunk.fill) {\r\n                        context.restore();\r\n                        // Color does not affect ghostContext so we not set it\r\n                    }\r\n                    // Reset style\r\n                    if (chunk.style) {\r\n                        context.restore();\r\n                        ghostContext.restore();\r\n                    }\r\n                    // Rotate half a letter and add spacing\r\n                    angleShift = (charWidth / 2 + kerning) / (radius - textHeight) * clockwise;\r\n                    if (!ghostOnly) {\r\n                        context.rotate(angleShift);\r\n                    }\r\n                    if (interactive) {\r\n                        ghostContext.rotate(angleShift);\r\n                    }\r\n                });\r\n                // Restore angle\r\n                context.restore();\r\n                if (interactive) {\r\n                    ghostContext.restore();\r\n                }\r\n                // Adjust radius (for `inside = true`)\r\n                if (inside) {\r\n                    radius -= textHeight;\r\n                }\r\n            });\r\n            // Restore\r\n            context.restore();\r\n            if (interactive) {\r\n                ghostContext.restore();\r\n            }\r\n        }\r\n    }\r\n    _measure(status) {\r\n        switch (this.textType) {\r\n            case \"circular\":\r\n                return this._measureCircular(status);\r\n            default:\r\n                return super._measure(status);\r\n        }\r\n    }\r\n    _measureCircular(status) {\r\n        const context = status.layer.context;\r\n        const ghostContext = this._renderer._ghostLayer.context;\r\n        const rtl = this.style.direction == \"rtl\";\r\n        const oversizedBehavior = this.style.oversizedBehavior;\r\n        const maxWidth = this.style.maxWidth;\r\n        const truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n        const ellipsis = this.style.ellipsis || \"\";\r\n        let ellipsisMetrics;\r\n        //const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n        // Reset text info\r\n        this.textVisible = true;\r\n        this._textInfo = [];\r\n        this._textReversed = false;\r\n        // Pre-render\r\n        context.save();\r\n        ghostContext.save();\r\n        this._prerender(status, true);\r\n        // Split up text into lines\r\n        const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n        let styleRestored = true;\r\n        let totalWidth = 0;\r\n        // Iterate through the lines\r\n        let offsetY = 0;\r\n        $array.each(lines, (line, _index) => {\r\n            // Split up line into format/value chunks\r\n            let chunks = TextFormatter.chunk(line, false, this.style.ignoreFormatting);\r\n            // Init line object\r\n            let lineInfo = {\r\n                offsetY: offsetY,\r\n                ascent: 0,\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                right: 0,\r\n                textChunks: []\r\n            };\r\n            let currentStyle;\r\n            let currentFill;\r\n            let currentChunkWidth;\r\n            //while(chunk = chunks.shift()) {\r\n            $array.each(chunks, (chunk, _index) => {\r\n                // Format chunk\r\n                if (chunk.type == \"format\") {\r\n                    if (chunk.text == \"[/]\") {\r\n                        if (!styleRestored) {\r\n                            context.restore();\r\n                            ghostContext.restore();\r\n                            styleRestored = true;\r\n                        }\r\n                        currentFill = undefined;\r\n                        currentStyle = undefined;\r\n                        currentChunkWidth = undefined;\r\n                    }\r\n                    else {\r\n                        let format = TextFormatter.getTextStyle(chunk.text);\r\n                        const fontStyle = this._getFontStyle(format);\r\n                        context.save();\r\n                        ghostContext.save();\r\n                        context.font = fontStyle;\r\n                        currentStyle = fontStyle;\r\n                        if (format.fill) {\r\n                            currentFill = format.fill;\r\n                        }\r\n                        if (format.width) {\r\n                            currentChunkWidth = $type.toNumber(format.width);\r\n                        }\r\n                        styleRestored = false;\r\n                    }\r\n                    if (truncate) {\r\n                        ellipsisMetrics = this._measureText(ellipsis, context);\r\n                    }\r\n                }\r\n                // Text format\r\n                else if (chunk.type == \"value\") {\r\n                    // Measure each letter\r\n                    let chars = chunk.text.match(/./ug) || [];\r\n                    if (rtl) {\r\n                        chars = $utils.splitString(chunk.text);\r\n                        chars.reverse();\r\n                    }\r\n                    for (let i = 0; i < chars.length; i++) {\r\n                        const char = chars[i];\r\n                        // Measure\r\n                        const metrics = this._measureText(char, context);\r\n                        let chunkWidth = metrics.width;\r\n                        // Chunk width?\r\n                        if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                            chunkWidth = currentChunkWidth;\r\n                        }\r\n                        const chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                        if (chunkHeight > lineInfo.height) {\r\n                            lineInfo.height = chunkHeight;\r\n                        }\r\n                        if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                            lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                        }\r\n                        totalWidth += chunkWidth;\r\n                        // Handle oversized behavior\r\n                        if (truncate) {\r\n                            // Measure ellipsis and check if it fits\r\n                            if (!ellipsisMetrics) {\r\n                                ellipsisMetrics = this._measureText(ellipsis, context);\r\n                            }\r\n                            const ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                            //totalWidth += ellipsisWidth;\r\n                            if ((totalWidth + ellipsisWidth) > maxWidth) {\r\n                                if (lineInfo.textChunks.length == 1) {\r\n                                    this.textVisible = false;\r\n                                }\r\n                                else {\r\n                                    lineInfo.width += ellipsisWidth;\r\n                                    lineInfo.left += ellipsisMetrics.actualBoundingBoxLeft;\r\n                                    lineInfo.right += ellipsisMetrics.actualBoundingBoxRight;\r\n                                    lineInfo.textChunks.push({\r\n                                        style: currentStyle,\r\n                                        fill: currentFill,\r\n                                        text: ellipsis,\r\n                                        width: ellipsisWidth,\r\n                                        height: chunkHeight + ellipsisMetrics.actualBoundingBoxDescent,\r\n                                        left: ellipsisMetrics.actualBoundingBoxLeft,\r\n                                        right: ellipsisMetrics.actualBoundingBoxRight,\r\n                                        ascent: ellipsisMetrics.actualBoundingBoxAscent,\r\n                                        offsetX: 0,\r\n                                        offsetY: chunkHeight,\r\n                                        textDecoration: undefined\r\n                                    });\r\n                                }\r\n                                break;\r\n                            }\r\n                        }\r\n                        lineInfo.width += chunkWidth;\r\n                        lineInfo.left += metrics.actualBoundingBoxLeft;\r\n                        lineInfo.right += metrics.actualBoundingBoxRight;\r\n                        lineInfo.textChunks.push({\r\n                            style: currentStyle,\r\n                            fill: currentFill,\r\n                            text: char,\r\n                            width: chunkWidth,\r\n                            height: chunkHeight + metrics.actualBoundingBoxDescent,\r\n                            left: metrics.actualBoundingBoxLeft,\r\n                            right: metrics.actualBoundingBoxRight,\r\n                            ascent: metrics.actualBoundingBoxAscent,\r\n                            offsetX: 0,\r\n                            offsetY: chunkHeight,\r\n                            textDecoration: undefined\r\n                        });\r\n                        if (rtl) {\r\n                            // @todo still needed?\r\n                            //break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (this.style.lineHeight instanceof Percent) {\r\n                lineInfo.height *= this.style.lineHeight.value;\r\n            }\r\n            else {\r\n                lineInfo.height *= this.style.lineHeight || 1.2;\r\n            }\r\n            this._textInfo.push(lineInfo);\r\n            //lineInfo.offsetY += lineInfo.ascent;\r\n            offsetY += lineInfo.height;\r\n        });\r\n        if (!styleRestored) {\r\n            context.restore();\r\n            ghostContext.restore();\r\n        }\r\n        if (oversizedBehavior == \"hide\" && (totalWidth > maxWidth)) {\r\n            this.textVisible = false;\r\n        }\r\n        // Adjust chunk internal offsets\r\n        $array.each(this._textInfo, (lineInfo) => {\r\n            $array.each(lineInfo.textChunks, (chunk) => {\r\n                chunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\r\n            });\r\n        });\r\n        context.restore();\r\n        ghostContext.restore();\r\n        return {\r\n            left: 0,\r\n            top: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n        };\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasImage extends CanvasDisplayObject {\r\n    constructor(renderer, image) {\r\n        super(renderer);\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_imageMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.image = image;\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        if (this._imageMask) {\r\n            clearCanvas(this._imageMask);\r\n        }\r\n    }\r\n    getLocalBounds() {\r\n        if (!this._localBounds) {\r\n            let w = 0;\r\n            let h = 0;\r\n            if (this.width) {\r\n                w = this.width;\r\n            }\r\n            if (this.height) {\r\n                h = this.height;\r\n            }\r\n            this._localBounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: w,\r\n                bottom: h\r\n            };\r\n            this._addBounds(this._localBounds);\r\n        }\r\n        return this._localBounds;\r\n    }\r\n    _render(status, targetGhostLayer = 0) {\r\n        super._render(status);\r\n        if (this.image) {\r\n            if (this.tainted === undefined) {\r\n                this.tainted = isTainted(this.image);\r\n                status.layer.tainted = true;\r\n            }\r\n            if (this.tainted && this._renderer._omitTainted) {\r\n                return;\r\n            }\r\n            const ghostOnly = this._ghostOnly(targetGhostLayer);\r\n            const drawGhost = this._drawGhost(status, targetGhostLayer);\r\n            if (status.layer.dirty && !ghostOnly) {\r\n                if (this.shadowColor) {\r\n                    status.layer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\r\n                }\r\n                if (this.shadowBlur) {\r\n                    status.layer.context.shadowBlur = this.shadowBlur;\r\n                }\r\n                if (this.shadowOffsetX) {\r\n                    status.layer.context.shadowOffsetX = this.shadowOffsetX;\r\n                }\r\n                if (this.shadowOffsetY) {\r\n                    status.layer.context.shadowOffsetY = this.shadowOffsetY;\r\n                }\r\n                // TODO should this round ?\r\n                const width = this.width || this.image.naturalWidth;\r\n                const height = this.height || this.image.naturalHeight;\r\n                status.layer.context.drawImage(this.image, 0, 0, width, height);\r\n            }\r\n            if (this.interactive && this._isInteractive(status) && drawGhost) {\r\n                const mask = this._getMask(this.image);\r\n                this._renderer._ghostLayer.context.drawImage(mask, 0, 0);\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        super.clear();\r\n        this.image = undefined;\r\n        this._imageMask = undefined;\r\n    }\r\n    _getMask(image) {\r\n        if (this._imageMask === undefined) {\r\n            // TODO should this round ?\r\n            const width = this.width || image.naturalWidth;\r\n            const height = this.height || image.naturalHeight;\r\n            // We need to create a second canvas because destination-in clears out the entire canvas\r\n            const canvas = document.createElement(\"canvas\");\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            const context = canvas.getContext(\"2d\");\r\n            context.imageSmoothingEnabled = false;\r\n            context.fillStyle = this._getColorId();\r\n            context.fillRect(0, 0, width, height);\r\n            if (!isTainted(image)) {\r\n                context.globalCompositeOperation = \"destination-in\";\r\n                context.drawImage(image, 0, 0, width, height);\r\n            }\r\n            this._imageMask = canvas;\r\n        }\r\n        return this._imageMask;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRendererEvent {\r\n    constructor(event, originalPoint, point, bbox) {\r\n        Object.defineProperty(this, \"event\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: event\r\n        });\r\n        Object.defineProperty(this, \"originalPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: originalPoint\r\n        });\r\n        Object.defineProperty(this, \"point\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: point\r\n        });\r\n        Object.defineProperty(this, \"bbox\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: bbox\r\n        });\r\n        Object.defineProperty(this, \"id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"simulated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"native\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        if ($utils.supports(\"touchevents\") && event instanceof Touch) {\r\n            this.id = event.identifier;\r\n        }\r\n        else {\r\n            this.id = null;\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasRenderer extends ArrayDisposer {\r\n    constructor(resolution) {\r\n        super();\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"_layerDom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(this, \"layers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_dirtyLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"defaultLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.getLayer(0)\r\n        });\r\n        Object.defineProperty(this, \"_ghostLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new GhostLayer()\r\n        });\r\n        Object.defineProperty(this, \"_deferredGhostLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_patternCanvas\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"canvas\")\r\n        });\r\n        Object.defineProperty(this, \"_patternContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this._patternCanvas.getContext(\"2d\")\r\n        });\r\n        Object.defineProperty(this, \"_realWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_realHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_calculatedHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"interactionsEnabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_colorMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_forceInteractive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_omitTainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO this should store the Id as well\r\n        Object.defineProperty(this, \"_hovering\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Set()\r\n        });\r\n        Object.defineProperty(this, \"_dragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_mousedown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_lastPointerMoveEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tapToActivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"tapToActivateTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 3000\r\n        });\r\n        Object.defineProperty(this, \"_touchActive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_touchActiveTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (resolution == null) {\r\n            this.resolution = window.devicePixelRatio;\r\n        }\r\n        else {\r\n            this.resolution = resolution;\r\n        }\r\n        this.view.style.position = \"absolute\";\r\n        this.view.setAttribute(\"aria-hidden\", \"true\");\r\n        this.view.appendChild(this._layerDom);\r\n        this._disposers.push(new Disposer(() => {\r\n            $object.each(this._events, (_key, events) => {\r\n                events.disposer.dispose();\r\n            });\r\n            $array.each(this.layers, (layer) => {\r\n                clearCanvas(layer.view);\r\n                if (layer.exportableView) {\r\n                    clearCanvas(layer.exportableView);\r\n                }\r\n            });\r\n            clearCanvas(this._ghostLayer.view);\r\n            clearCanvas(this._patternCanvas);\r\n        }));\r\n        /*\r\n        this._disposers.push($utils.addEventListener(this._ghostLayer.view, \"click\", (originalEvent: MouseEvent) => {\r\n            const event = this.getEvent(originalEvent);\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox);\r\n            console.debug(target);\r\n        }));\r\n        */\r\n        // Monitor for possible pixel ratio changes (when page is zoomed)\r\n        this._disposers.push($utils.onZoom(() => {\r\n            if (resolution == null) {\r\n                this.resolution = window.devicePixelRatio;\r\n            }\r\n        }));\r\n        // We need this in order top prevent default touch gestures when dragging\r\n        // draggable elements\r\n        if ($utils.supports(\"touchevents\")) {\r\n            const listener = (ev) => {\r\n                if (this._dragging.length !== 0) {\r\n                    $array.eachContinue(this._dragging, (item) => {\r\n                        if (item.value.shouldCancelTouch()) {\r\n                            ev.preventDefault();\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                // If touch down happends, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            };\r\n            this._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchstart\", listener, { passive: false }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"touchmove\", () => {\r\n                // If touch is moving, delay touch out\r\n                if (this._touchActiveTimeout) {\r\n                    this._delayTouchDeactivate();\r\n                }\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(window, \"click\", (_ev) => {\r\n                this._touchActive = false;\r\n            }, { passive: true }));\r\n            this._disposers.push($utils.addEventListener(this.view, \"click\", (_ev) => {\r\n                window.setTimeout(() => {\r\n                    this._touchActive = true;\r\n                    this._delayTouchDeactivate();\r\n                }, 100);\r\n            }, { passive: true }));\r\n        }\r\n        // Prevent scrolling of the window when hovering on \"wheelable\" object\r\n        if ($utils.supports(\"wheelevents\")) {\r\n            this._disposers.push($utils.addEventListener(this.view, \"wheel\", (ev) => {\r\n                let prevent = false;\r\n                this._hovering.forEach((obj) => {\r\n                    if (obj.wheelable) {\r\n                        prevent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if (prevent) {\r\n                    ev.preventDefault();\r\n                }\r\n            }, { passive: false }));\r\n        }\r\n    }\r\n    /*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\r\n        this._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\r\n    });\r\n    */\r\n    resetImageArray() {\r\n        this._ghostLayer.imageArray = undefined;\r\n    }\r\n    _delayTouchDeactivate() {\r\n        if (this._touchActiveTimeout) {\r\n            clearTimeout(this._touchActiveTimeout);\r\n        }\r\n        if (this.tapToActivateTimeout > 0) {\r\n            this._touchActiveTimeout = window.setTimeout(() => {\r\n                this._touchActive = false;\r\n            }, this.tapToActivateTimeout);\r\n        }\r\n    }\r\n    get debugGhostView() {\r\n        return !!this._ghostLayer.view.parentNode;\r\n    }\r\n    set debugGhostView(value) {\r\n        if (value) {\r\n            if (!this._ghostLayer.view.parentNode) {\r\n                this.view.appendChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n        else {\r\n            if (this._ghostLayer.view.parentNode) {\r\n                this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view);\r\n            }\r\n        }\r\n    }\r\n    createLinearGradient(x1, y1, x2, y2) {\r\n        return this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\r\n    }\r\n    createRadialGradient(x1, y1, radius1, x2, y2, radius2) {\r\n        return this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\r\n    }\r\n    createPattern(graphics, background, repetition, width, height) {\r\n        // const patternCanvas = document.createElement(\"canvas\");\r\n        // const patternContext = patternCanvas.getContext(\"2d\")!;\r\n        // patternCanvas.width = width;\r\n        // patternCanvas.height = height;\r\n        // if (fill) {\r\n        // \tpatternContext.fillStyle = fill.toCSS();\r\n        // \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\r\n        // }\r\n        // const layer = {\r\n        // \tview: patternCanvas,\r\n        // \tcontext: patternContext,\r\n        // \tvisible: true,\r\n        // \torder: 0,\r\n        // \twidth: width,\r\n        // \theight: height,\r\n        // \tdirty: true\r\n        // };\r\n        // // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\r\n        // // patternContext.stroke();\r\n        // image.targetLayer = layer;\r\n        // image.render(layer);\r\n        //this._layerDom.appendChild(patternCanvas);\r\n        this._patternCanvas.width = width;\r\n        this._patternCanvas.height = height;\r\n        this._patternContext.clearRect(0, 0, width, height);\r\n        // patternCanvas.style.width = width * this.resolution + \"px\";\r\n        // patternCanvas.style.height = height * this.resolution + \"px\";\r\n        background.renderDetached(this._patternContext);\r\n        graphics.renderDetached(this._patternContext);\r\n        return this._patternContext.createPattern(this._patternCanvas, repetition);\r\n    }\r\n    makeContainer() {\r\n        return new CanvasContainer(this);\r\n    }\r\n    makeGraphics() {\r\n        return new CanvasGraphics(this);\r\n    }\r\n    makeText(text, style) {\r\n        return new CanvasText(this, text, style);\r\n    }\r\n    makeTextStyle() {\r\n        return new CanvasTextStyle();\r\n    }\r\n    makeRadialText(text, style) {\r\n        return new CanvasRadialText(this, text, style);\r\n    }\r\n    makePicture(image) {\r\n        return new CanvasImage(this, image);\r\n    }\r\n    resizeLayer(layer) {\r\n        layer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resizeGhost() {\r\n        this._ghostLayer.resize(this._calculatedWidth, this._calculatedHeight, this._calculatedWidth, this._calculatedHeight, this.resolution);\r\n    }\r\n    resize(realWidth, realHeight, calculatedWidth, calculatedHeight) {\r\n        this._realWidth = realWidth;\r\n        this._realHeight = realHeight;\r\n        this._calculatedWidth = calculatedWidth;\r\n        this._calculatedHeight = calculatedHeight;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                layer.dirty = true;\r\n                this.resizeLayer(layer);\r\n            }\r\n        });\r\n        this.resizeGhost();\r\n        this.view.style.width = calculatedWidth + \"px\";\r\n        this.view.style.height = calculatedHeight + \"px\";\r\n    }\r\n    createDetachedLayer(willReadFrequently = false) {\r\n        const view = document.createElement(\"canvas\");\r\n        const context = view.getContext(\"2d\", { willReadFrequently: willReadFrequently });\r\n        const layer = new CanvasLayer(view, context);\r\n        view.style.position = \"absolute\";\r\n        view.style.top = \"0px\";\r\n        view.style.left = \"0px\";\r\n        return layer;\r\n    }\r\n    getLayerByOrder(order) {\r\n        const layers = this.layers;\r\n        const length = layers.length;\r\n        for (let i = 0; i < length; i++) {\r\n            const layer = layers[i];\r\n            if (layer.order == order) {\r\n                return layer;\r\n            }\r\n        }\r\n    }\r\n    getLayer(order, visible = true) {\r\n        let existingLayer = this.getLayerByOrder(order);\r\n        if (existingLayer) {\r\n            return existingLayer;\r\n        }\r\n        const layer = this.createDetachedLayer(order == 99);\r\n        layer.order = order;\r\n        layer.visible = visible;\r\n        layer.view.className = \"am5-layer-\" + order;\r\n        if (layer.visible) {\r\n            this.resizeLayer(layer);\r\n        }\r\n        const layers = this.layers;\r\n        layers.push(layer);\r\n        layers.sort((a, b) => {\r\n            if (a.order > b.order) {\r\n                return 1;\r\n            }\r\n            else if (a.order < b.order) {\r\n                return -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        const length = layers.length;\r\n        const layerIndex = $array.indexOf(layers, layer);\r\n        let next;\r\n        for (let i = layerIndex + 1; i < length; i++) {\r\n            if (layers[i].visible) {\r\n                next = layers[i];\r\n                break;\r\n            }\r\n        }\r\n        if (layer.visible) {\r\n            if (next === undefined) {\r\n                this._layerDom.appendChild(layer.view);\r\n            }\r\n            else {\r\n                this._layerDom.insertBefore(layer.view, next.view);\r\n            }\r\n        }\r\n        return layer;\r\n    }\r\n    render(root) {\r\n        this._dirtyLayers.length = 0;\r\n        this._deferredGhostLayers = [];\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                if (layer.dirty && layer.visible) {\r\n                    this._dirtyLayers.push(layer);\r\n                    layer.clear();\r\n                }\r\n            }\r\n        });\r\n        this._ghostLayer.clear();\r\n        root.render({\r\n            inactive: null,\r\n            layer: this.defaultLayer,\r\n        });\r\n        const deferredGhostLayers = this._deferredGhostLayers;\r\n        if (deferredGhostLayers.length) {\r\n            deferredGhostLayers.sort((a, b) => a - b);\r\n            $array.each(deferredGhostLayers, (layerx) => {\r\n                root.render({\r\n                    inactive: null,\r\n                    layer: this.defaultLayer\r\n                }, layerx);\r\n            });\r\n        }\r\n        this._ghostLayer.context.restore();\r\n        //setTimeout(() => {\r\n        // Remove this after the Chrome bug is fixed:\r\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer) {\r\n                const context = layer.context;\r\n                context.beginPath();\r\n                context.moveTo(0, 0);\r\n                context.stroke();\r\n            }\r\n        });\r\n        $array.each(this._dirtyLayers, (layer) => {\r\n            layer.context.restore();\r\n            layer.dirty = false;\r\n        });\r\n        //}, 100)\r\n        if (this._hovering.size && this._lastPointerMoveEvent) {\r\n            const { events, target, native } = this._lastPointerMoveEvent;\r\n            //this._mouseMoveThrottler.run();\r\n            $array.each(events, (event) => {\r\n                this._dispatchGlobalMousemove(event, target, native);\r\n            });\r\n        }\r\n    }\r\n    paintId(obj) {\r\n        const id = distributeId(++this._colorId);\r\n        const color = Color.fromHex(id).toCSS();\r\n        this._colorMap[color] = obj;\r\n        return color;\r\n    }\r\n    _removeObject(obj) {\r\n        if (obj._colorId !== undefined) {\r\n            delete this._colorMap[obj._colorId];\r\n        }\r\n    }\r\n    // protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\r\n    // \treturn this._colorMap[colorId];\r\n    // }\r\n    _adjustBoundingBox(bbox) {\r\n        const margin = this._ghostLayer.margin;\r\n        return new DOMRect(-margin.left, -margin.top, bbox.width + margin.left + margin.right, bbox.height + margin.top + margin.bottom);\r\n    }\r\n    getEvent(originalEvent, adjustPoint = true) {\r\n        const bbox = this.view.getBoundingClientRect();\r\n        const x = originalEvent.clientX || 0;\r\n        const y = originalEvent.clientY || 0;\r\n        const widthScale = this._calculatedWidth / this._realWidth;\r\n        const heightScale = this._calculatedHeight / this._realHeight;\r\n        const originalPoint = {\r\n            x: x - bbox.left,\r\n            y: y - bbox.top,\r\n        };\r\n        const point = {\r\n            x: (x - (adjustPoint ? bbox.left : 0)) * widthScale,\r\n            y: (y - (adjustPoint ? bbox.top : 0)) * heightScale,\r\n        };\r\n        return new CanvasRendererEvent(originalEvent, originalPoint, point, this._adjustBoundingBox(bbox));\r\n    }\r\n    _getHitTarget(point, bbox, target) {\r\n        if (bbox.width === 0 || bbox.height === 0 || point.x < bbox.left || point.x > bbox.right || point.y < bbox.top || point.y > bbox.bottom) {\r\n            return;\r\n        }\r\n        if (!target || !this._layerDom.contains(target)) {\r\n            return;\r\n        }\r\n        const pixel = this._ghostLayer.getImageData(point, bbox);\r\n        if (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\r\n            return false;\r\n        }\r\n        const colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    getObjectAtPoint(point) {\r\n        const data = this._ghostLayer.getImageArray(point);\r\n        if (data[0] === 0 && data[1] === 0 && data[2] === 0) {\r\n            return undefined;\r\n        }\r\n        const colorId = Color.fromRGB(data[0], data[1], data[2]).toCSS();\r\n        const hit = this._colorMap[colorId];\r\n        return hit;\r\n    }\r\n    _withEvents(key, f) {\r\n        const events = this._events[key];\r\n        if (events !== undefined) {\r\n            events.dispatching = true;\r\n            try {\r\n                f(events);\r\n            }\r\n            finally {\r\n                events.dispatching = false;\r\n                if (events.cleanup) {\r\n                    events.cleanup = false;\r\n                    $array.keepIf(events.callbacks, (callback) => {\r\n                        return !callback.disposed;\r\n                    });\r\n                    if (events.callbacks.length === 0) {\r\n                        events.disposer.dispose();\r\n                        delete this._events[key];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _dispatchEventAll(key, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return;\r\n        }\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed) {\r\n                    callback.callback.call(callback.context, event);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    _dispatchEvent(key, target, event) {\r\n        if (!this.interactionsEnabled) {\r\n            return false;\r\n        }\r\n        let dispatched = false;\r\n        this._withEvents(key, (events) => {\r\n            $array.each(events.callbacks, (callback) => {\r\n                if (!callback.disposed && callback.object === target) {\r\n                    callback.callback.call(callback.context, event);\r\n                    dispatched = true;\r\n                }\r\n            });\r\n        });\r\n        return dispatched;\r\n    }\r\n    _dispatchMousedown(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        if (button != 0 && button != 2 && button != 1 && button !== undefined) {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            const id = event.id;\r\n            let dragged = false;\r\n            eachTargets(target, (obj) => {\r\n                const info = { id: id, value: obj };\r\n                this._mousedown.push(info);\r\n                if (!dragged && this._dispatchEvent(\"pointerdown\", obj, event)) {\r\n                    // Only dispatch the first element which matches\r\n                    dragged = true;\r\n                    const has = this._dragging.some((x) => {\r\n                        return x.value === obj && x.id === id;\r\n                    });\r\n                    if (!has) {\r\n                        this._dragging.push(info);\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n    }\r\n    _dispatchGlobalMousemove(originalEvent, originalTarget, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        event.native = native;\r\n        if (target) {\r\n            this._hovering.forEach((obj) => {\r\n                if (!obj.contains(target)) {\r\n                    this._hovering.delete(obj);\r\n                    if (obj.cursorOverStyle) {\r\n                        $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                    }\r\n                    this._dispatchEvent(\"pointerout\", obj, event);\r\n                }\r\n            });\r\n            if (event.native) {\r\n                eachTargets(target, (obj) => {\r\n                    if (!this._hovering.has(obj)) {\r\n                        this._hovering.add(obj);\r\n                        if (obj.cursorOverStyle) {\r\n                            obj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\r\n                            $utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\r\n                        }\r\n                        this._dispatchEvent(\"pointerover\", obj, event);\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n            //} else if (target === false) {\r\n        }\r\n        else {\r\n            this._hovering.forEach((obj) => {\r\n                if (obj.cursorOverStyle) {\r\n                    $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                }\r\n                this._dispatchEvent(\"pointerout\", obj, event);\r\n            });\r\n            this._hovering.clear();\r\n        }\r\n        this._dispatchEventAll(\"globalpointermove\", event);\r\n    }\r\n    removeHovering(graphics) {\r\n        this._hovering.delete(graphics);\r\n        if (graphics.cursorOverStyle) {\r\n            $utils.setStyle(document.body, \"cursor\", graphics._replacedCursorStyle);\r\n        }\r\n    }\r\n    _dispatchGlobalMouseup(originalEvent, native) {\r\n        const event = this.getEvent(originalEvent);\r\n        event.native = native;\r\n        //const target = this._getHitTarget(event.originalPoint);\r\n        this._dispatchEventAll(\"globalpointerup\", event);\r\n    }\r\n    _dispatchDragMove(originalEvent) {\r\n        if (this._dragging.length !== 0) {\r\n            const event = this.getEvent(originalEvent);\r\n            const id = event.id;\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointermove\", obj.value, event);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchDragEnd(originalEvent, originalTarget) {\r\n        const button = originalEvent.button;\r\n        let clickevent;\r\n        if (button == 0 || button === undefined) {\r\n            clickevent = \"click\";\r\n        }\r\n        else if (button == 2) {\r\n            clickevent = \"rightclick\";\r\n        }\r\n        else if (button == 1) {\r\n            clickevent = \"middleclick\";\r\n        }\r\n        else {\r\n            // Ignore non-primary mouse buttons\r\n            return;\r\n        }\r\n        const event = this.getEvent(originalEvent);\r\n        const id = event.id;\r\n        if (this._mousedown.length !== 0) {\r\n            const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n            if (target) {\r\n                this._mousedown.forEach((obj) => {\r\n                    if (obj.id === id && obj.value.contains(target)) {\r\n                        this._dispatchEvent(clickevent, obj.value, event);\r\n                    }\r\n                });\r\n            }\r\n            this._mousedown.length = 0;\r\n        }\r\n        if (this._dragging.length !== 0) {\r\n            this._dragging.forEach((obj) => {\r\n                if (obj.id === id) {\r\n                    this._dispatchEvent(\"pointerup\", obj.value, event);\r\n                }\r\n            });\r\n            this._dragging.length = 0;\r\n        }\r\n    }\r\n    _dispatchDoubleClick(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"dblclick\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispatchWheel(originalEvent, originalTarget) {\r\n        const event = this.getEvent(originalEvent);\r\n        const target = this._getHitTarget(event.originalPoint, event.bbox, originalTarget);\r\n        if (target) {\r\n            eachTargets(target, (obj) => {\r\n                if (this._dispatchEvent(\"wheel\", obj, event)) {\r\n                    return false;\r\n                }\r\n                else {\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _makeSharedEvent(key, f) {\r\n        if (this._listeners[key] === undefined) {\r\n            const listener = f();\r\n            this._listeners[key] = new CounterDisposer(() => {\r\n                delete this._listeners[key];\r\n                listener.dispose();\r\n            });\r\n        }\r\n        return this._listeners[key].increment();\r\n    }\r\n    _onPointerEvent(name, f) {\r\n        let native = false;\r\n        let timer = null;\r\n        function clear() {\r\n            timer = null;\r\n            native = false;\r\n        }\r\n        return new MultiDisposer([\r\n            new Disposer(() => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                clear();\r\n            }),\r\n            $utils.addEventListener(this.view, $utils.getRendererEvent(name), (_) => {\r\n                native = true;\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                }\r\n                timer = window.setTimeout(clear, 0);\r\n            }),\r\n            onPointerEvent(window, name, (ev, target) => {\r\n                if (timer !== null) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n                f(ev, target, native);\r\n                native = false;\r\n            }),\r\n        ]);\r\n    }\r\n    // This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\r\n    _initEvent(key) {\r\n        switch (key) {\r\n            case \"globalpointermove\":\r\n            case \"pointerover\":\r\n            case \"pointerout\":\r\n                return this._makeSharedEvent(\"pointermove\", () => {\r\n                    const listener = (events, target, native) => {\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMousemove(event, target, native);\r\n                        });\r\n                    };\r\n                    return new MultiDisposer([\r\n                        this._onPointerEvent(\"pointerdown\", listener),\r\n                        this._onPointerEvent(\"pointermove\", listener),\r\n                    ]);\r\n                });\r\n            case \"globalpointerup\":\r\n                return this._makeSharedEvent(\"pointerup\", () => {\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (events, target, native) => {\r\n                        $array.each(events, (event) => {\r\n                            this._dispatchGlobalMouseup(event, native);\r\n                        });\r\n                        this._lastPointerMoveEvent = { events, target, native };\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"click\":\r\n            case \"rightclick\":\r\n            case \"middleclick\":\r\n            case \"pointerdown\":\r\n            /*\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    return this._onPointerEvent(\"pointerdown\", (event, target, native) => {\r\n                        this._lastPointerMoveEvent = { event, target, native };\r\n                        this._dispatchMousedown(event)\r\n                    });\r\n                });\r\n            */\r\n            case \"pointermove\":\r\n            case \"pointerup\":\r\n                return this._makeSharedEvent(\"pointerdown\", () => {\r\n                    //const throttler = new Throttler();\r\n                    const mousedown = this._onPointerEvent(\"pointerdown\", (events, target) => {\r\n                        $array.each(events, (ev) => {\r\n                            this._dispatchMousedown(ev, target);\r\n                        });\r\n                    });\r\n                    // TODO handle throttling properly for multitouch\r\n                    const mousemove = this._onPointerEvent(\"pointermove\", (ev) => {\r\n                        //throttler.throttle(() => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragMove(ev);\r\n                        });\r\n                        //});\r\n                    });\r\n                    const mouseup = this._onPointerEvent(\"pointerup\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    const pointercancel = this._onPointerEvent(\"pointercancel\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDragEnd(ev, target);\r\n                        });\r\n                    });\r\n                    return new Disposer(() => {\r\n                        mousedown.dispose();\r\n                        mousemove.dispose();\r\n                        mouseup.dispose();\r\n                        pointercancel.dispose();\r\n                    });\r\n                });\r\n            case \"dblclick\":\r\n                return this._makeSharedEvent(\"dblclick\", () => {\r\n                    return this._onPointerEvent(\"dblclick\", (ev, target) => {\r\n                        $array.each(ev, (ev) => {\r\n                            this._dispatchDoubleClick(ev, target);\r\n                        });\r\n                    });\r\n                });\r\n            case \"wheel\":\r\n                return this._makeSharedEvent(\"wheel\", () => {\r\n                    return $utils.addEventListener(this.view, $utils.getRendererEvent(\"wheel\"), (event) => {\r\n                        this._dispatchWheel(event, $utils.getEventTarget(event));\r\n                    }, { passive: false });\r\n                });\r\n        }\r\n    }\r\n    _addEvent(object, key, callback, context) {\r\n        let events = this._events[key];\r\n        if (events === undefined) {\r\n            events = this._events[key] = {\r\n                disposer: this._initEvent(key),\r\n                callbacks: [],\r\n                dispatching: false,\r\n                cleanup: false,\r\n            };\r\n        }\r\n        const listener = { object, context, callback, disposed: false };\r\n        events.callbacks.push(listener);\r\n        return new Disposer(() => {\r\n            listener.disposed = true;\r\n            if (events.dispatching) {\r\n                events.cleanup = true;\r\n            }\r\n            else {\r\n                $array.removeFirst(events.callbacks, listener);\r\n                if (events.callbacks.length === 0) {\r\n                    events.disposer.dispose();\r\n                    delete this._events[key];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getCanvas(root, options) {\r\n        // Make sure everything is rendered\r\n        this.render(root);\r\n        if (!options) {\r\n            options = {};\r\n        }\r\n        let scale = this.resolution;\r\n        let canvasWidth = Math.floor(this._calculatedWidth * this.resolution);\r\n        let canvasHeight = Math.floor(this._calculatedHeight * this.resolution);\r\n        // Check if we need to scale\r\n        if (options.minWidth && (options.minWidth > canvasWidth)) {\r\n            let minScale = options.minWidth / canvasWidth;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.minHeight && (options.minHeight > canvasHeight)) {\r\n            let minScale = options.minHeight / canvasHeight;\r\n            if (minScale > scale) {\r\n                scale = minScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxWidth && (options.maxWidth < canvasWidth)) {\r\n            let maxScale = options.maxWidth / canvasWidth;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        if (options.maxHeight && (options.maxHeight > canvasHeight)) {\r\n            let maxScale = options.maxHeight / canvasHeight;\r\n            if (maxScale < scale) {\r\n                scale = maxScale * this.resolution;\r\n            }\r\n        }\r\n        // Check if we need to compensate for pixel ratio\r\n        if (options.maintainPixelRatio) {\r\n            scale /= this.resolution;\r\n        }\r\n        // Init list canvases to remove from DOM after export\r\n        const canvases = [];\r\n        // Set up new canvas for export\r\n        let forceRender = false;\r\n        const canvas = document.createElement(\"canvas\");\r\n        if (scale != this.resolution) {\r\n            forceRender = true;\r\n            canvasWidth = canvasWidth * scale / this.resolution;\r\n            canvasHeight = canvasHeight * scale / this.resolution;\r\n        }\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n        // Add to DOM so it inherits CSS\r\n        canvas.style.position = \"fixed\";\r\n        canvas.style.top = \"-10000px\";\r\n        this.view.appendChild(canvas);\r\n        canvases.push(canvas);\r\n        // Context\r\n        const context = canvas.getContext(\"2d\");\r\n        let width = 0;\r\n        let height = 0;\r\n        let needRerender = false;\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                if (layer.tainted || forceRender) {\r\n                    needRerender = true;\r\n                    layer.exportableView = layer.view;\r\n                    layer.exportableContext = layer.context;\r\n                    layer.view = document.createElement(\"canvas\");\r\n                    // Add to DOM so it inherits CSS\r\n                    layer.view.style.position = \"fixed\";\r\n                    layer.view.style.top = \"-10000px\";\r\n                    this.view.appendChild(layer.view);\r\n                    canvases.push(layer.view);\r\n                    let extraX = 0;\r\n                    let extraY = 0;\r\n                    if (layer.margin) {\r\n                        extraX += layer.margin.left || 0 + layer.margin.right || 0;\r\n                        extraY += layer.margin.top || 0 + layer.margin.bottom || 0;\r\n                    }\r\n                    layer.view.width = canvasWidth + extraX;\r\n                    layer.view.height = canvasHeight + extraY;\r\n                    layer.context = layer.view.getContext(\"2d\");\r\n                    layer.dirty = true;\r\n                    layer.scale = scale;\r\n                }\r\n            }\r\n        });\r\n        if (needRerender) {\r\n            this._omitTainted = true;\r\n            this.render(root);\r\n            this._omitTainted = false;\r\n        }\r\n        $array.each(this.layers, (layer) => {\r\n            if (layer && layer.visible) {\r\n                // Layer is fine. Just plop it into our target canvas\r\n                let x = 0;\r\n                let y = 0;\r\n                if (layer.margin) {\r\n                    x = -(layer.margin.left || 0) * this.resolution;\r\n                    y = -(layer.margin.top || 0) * this.resolution;\r\n                }\r\n                context.drawImage(layer.view, x, y);\r\n                // Restore layer original canvas\r\n                if (layer.exportableView) {\r\n                    layer.view = layer.exportableView;\r\n                    layer.exportableView = undefined;\r\n                }\r\n                if (layer.exportableContext) {\r\n                    layer.context = layer.exportableContext;\r\n                    layer.exportableContext = undefined;\r\n                }\r\n                if (width < layer.view.clientWidth) {\r\n                    width = layer.view.clientWidth;\r\n                }\r\n                if (height < layer.view.clientHeight) {\r\n                    height = layer.view.clientHeight;\r\n                }\r\n                layer.scale = undefined;\r\n            }\r\n        });\r\n        canvas.style.width = width + \"px\";\r\n        canvas.style.height = height + \"px\";\r\n        $array.each(canvases, (canvas) => {\r\n            canvas.style.position = \"\";\r\n            canvas.style.top = \"\";\r\n            this.view.removeChild(canvas);\r\n        });\r\n        return canvas;\r\n    }\r\n}\r\nclass GhostLayer {\r\n    constructor() {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                left: 0,\r\n                right: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n            }\r\n        });\r\n        Object.defineProperty(this, \"_resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"imageArray\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.view = document.createElement(\"canvas\");\r\n        this.context = this.view.getContext(\"2d\", { alpha: false, willReadFrequently: true });\r\n        this.context.imageSmoothingEnabled = false;\r\n        this.view.style.position = \"absolute\";\r\n        this.view.style.top = \"0px\";\r\n        this.view.style.left = \"0px\";\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        this._resolution = resolution;\r\n        canvasWidth += (this.margin.left + this.margin.right);\r\n        canvasHeight += (this.margin.top + this.margin.bottom);\r\n        // TODO this should take into account calculateSize\r\n        domWidth += (this.margin.left + this.margin.right);\r\n        domHeight += (this.margin.top + this.margin.bottom);\r\n        this.view.style.left = -this.margin.left + \"px\";\r\n        this.view.style.top = -this.margin.top + \"px\";\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    getImageData(point, bbox) {\r\n        return this.context.getImageData(\r\n        // TODO should this round ?\r\n        Math.round(((point.x - bbox.left) / bbox.width) * this._width), Math.round(((point.y - bbox.top) / bbox.height) * this._height), 1, 1);\r\n    }\r\n    getImageArray(point) {\r\n        if (!this.imageArray) {\r\n            this.imageArray = this.context.getImageData(0, 0, this._width, this._height).data;\r\n        }\r\n        const data = this.imageArray;\r\n        const x = Math.round(point.x * this._resolution);\r\n        const y = Math.round(point.y * this._resolution);\r\n        const i = (y * this._width + x) * 4;\r\n        return [data[i], data[i + 1], data[i + 2], data[i + 3]];\r\n    }\r\n    setMargin(layers) {\r\n        this.margin.left = 0;\r\n        this.margin.right = 0;\r\n        this.margin.top = 0;\r\n        this.margin.bottom = 0;\r\n        $array.each(layers, (layer) => {\r\n            if (layer.margin) {\r\n                this.margin.left = Math.max(this.margin.left, layer.margin.left);\r\n                this.margin.right = Math.max(this.margin.right, layer.margin.right);\r\n                this.margin.top = Math.max(this.margin.top, layer.margin.top);\r\n                this.margin.bottom = Math.max(this.margin.bottom, layer.margin.bottom);\r\n            }\r\n        });\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.fillStyle = '#000';\r\n        this.context.fillRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport class CanvasLayer {\r\n    constructor(view, context) {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"order\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportableView\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"exportableContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        this.view = view;\r\n        this.context = context;\r\n    }\r\n    resize(canvasWidth, canvasHeight, domWidth, domHeight, resolution) {\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.width != null) {\r\n            canvasWidth = this.width;\r\n            domWidth = this.width;\r\n        }\r\n        // TODO should this take into account calculateSize ?\r\n        if (this.height != null) {\r\n            canvasHeight = this.height;\r\n            domHeight = this.height;\r\n        }\r\n        if (this.margin) {\r\n            canvasWidth += (this.margin.left + this.margin.right);\r\n            canvasHeight += (this.margin.top + this.margin.bottom);\r\n            // TODO this should take into account calculateSize\r\n            domWidth += (this.margin.left + this.margin.right);\r\n            domHeight += (this.margin.top + this.margin.bottom);\r\n            this.view.style.left = -this.margin.left + \"px\";\r\n            this.view.style.top = -this.margin.top + \"px\";\r\n        }\r\n        else {\r\n            this.view.style.left = \"0px\";\r\n            this.view.style.top = \"0px\";\r\n        }\r\n        this._width = Math.floor(canvasWidth * resolution);\r\n        this._height = Math.floor(canvasHeight * resolution);\r\n        this.view.width = this._width;\r\n        this.view.style.width = domWidth + \"px\";\r\n        this.view.height = this._height;\r\n        this.view.style.height = domHeight + \"px\";\r\n    }\r\n    clear() {\r\n        this.context.save();\r\n        this.context.clearRect(0, 0, this._width, this._height);\r\n    }\r\n}\r\n//# sourceMappingURL=CanvasRenderer.js.map","import { AnimationState } from \"./util/Animation\";\r\nimport { Container } from \"./render/Container\";\r\nimport { Text } from \"./render/Text\";\r\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\r\nimport { VerticalLayout } from \"./render/VerticalLayout\";\r\nimport { GridLayout } from \"./render/GridLayout\";\r\nimport { Disposer } from \"./util/Disposer\";\r\nimport { ResizeSensor } from \"./util/ResizeSensor\";\r\nimport { InterfaceColors } from \"./util/InterfaceColors\";\r\nimport { Graphics } from \"./render/Graphics\";\r\nimport { Rectangle } from \"./render/Rectangle\";\r\nimport { Tooltip } from \"./render/Tooltip\";\r\nimport { NumberFormatter } from \"./util/NumberFormatter\";\r\nimport { DateFormatter } from \"./util/DateFormatter\";\r\nimport { DurationFormatter } from \"./util/DurationFormatter\";\r\nimport { Language } from \"./util/Language\";\r\nimport { EventDispatcher } from \"./util/EventDispatcher\";\r\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\r\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\r\nimport { p100, percent, isPercent, Percent } from \"./util/Percent\";\r\nimport { color } from \"./util/Color\";\r\nimport { populateString } from \"./util/PopulateString\";\r\nimport { registry } from \"./Registry\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\nimport * as $object from \"./util/Object\";\r\nimport * as $utils from \"./util/Utils\";\r\nimport * as $type from \"./util/Type\";\r\nimport en from \"../../locales/en\";\r\nfunction rAF(fps, callback) {\r\n    if (fps == null) {\r\n        requestAnimationFrame(callback);\r\n    }\r\n    else {\r\n        setTimeout(() => {\r\n            requestAnimationFrame(callback);\r\n        }, 1000 / fps);\r\n    }\r\n}\r\n// TODO implement Disposer\r\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\r\nexport class Root {\r\n    constructor(id, settings = {}, isReal) {\r\n        /**\r\n         * A reference to original chart container (div element).\r\n         */\r\n        Object.defineProperty(this, \"dom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_inner\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPositions\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_ticker\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_tickers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_updateTick\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        /**\r\n         * Root's event dispatcher.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n         */\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        /**\r\n         * @ignore\r\n         * @todo needs description\r\n         */\r\n        Object.defineProperty(this, \"animationTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_animations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rootContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Main content container.\r\n         */\r\n        Object.defineProperty(this, \"container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[Container]] used to display tooltips in.\r\n         */\r\n        Object.defineProperty(this, \"tooltipContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipContainerSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Locale-related\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"language\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Language.new(this, {})\r\n        });\r\n        /**\r\n         * Locale used by the chart.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n         */\r\n        Object.defineProperty(this, \"locale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: en\r\n        });\r\n        // Date-time related\r\n        /**\r\n         * Use UTC when formatting date/time.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#utc-and-time-zones} for more info\r\n         */\r\n        Object.defineProperty(this, \"utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * If set, will format date/time in specific time zone.\r\n         *\r\n         * The value should be named time zone, e.g.:\r\n         * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\r\n         *\r\n         * NOTE: Using time zone feature may noticeable affect performance of the\r\n         * chart, especially with large data sets, since every single date will need\r\n         * to be recalculated.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#time-zone} for more info\r\n         * @since 5.1.0\r\n         */\r\n        Object.defineProperty(this, \"timezone\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * The maximum FPS that the Root will run at.\r\n         *\r\n         * If `undefined` it will run at the highest FPS.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\r\n         */\r\n        Object.defineProperty(this, \"fps\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Number formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n         */\r\n        Object.defineProperty(this, \"numberFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: NumberFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Date/time formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"dateFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DateFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Duration formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"durationFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DurationFormatter.new(this, {})\r\n        });\r\n        // Accessibility\r\n        /**\r\n         * Global tab index for using for the whole chart\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n         */\r\n        Object.defineProperty(this, \"tabindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        //@todo maybe make this better\r\n        Object.defineProperty(this, \"_tabindexes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_a11yD\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusedSprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isShift\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_keyboardDragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_readerAlertElement\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_skipNextGroupJump\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_logo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDiv\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n         */\r\n        Object.defineProperty(this, \"nonce\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Special color set to be used for various controls.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n         */\r\n        Object.defineProperty(this, \"interfaceColors\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * An instance of vertical layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"verticalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: VerticalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of horizontal layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default HorizontalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"horizontalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: HorizontalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of grid layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"gridLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: GridLayout.new(this, {})\r\n        });\r\n        Object.defineProperty(this, \"_paused\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates whether chart should resized automatically when parent container\r\n         * width and/or height changes.\r\n         *\r\n         * If disabled (`autoResize = false`) you can make the chart resize manually\r\n         * by calling root element's `resize()` method.\r\n         */\r\n        Object.defineProperty(this, \"autoResize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_fontHash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"\"\r\n        });\r\n        Object.defineProperty(this, \"_isDisposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_resizeSensorDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltips\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_htmlElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlEnabledContainers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         *\r\n         * @since 5.11.0\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_systemTooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n        if (settings.accessible == false) {\r\n            this._a11yD = true;\r\n        }\r\n        if (settings.useSafeResolution == null) {\r\n            settings.useSafeResolution = true;\r\n        }\r\n        let resolution;\r\n        if (settings.useSafeResolution) {\r\n            resolution = $utils.getSafeResolution();\r\n        }\r\n        this._renderer = new CanvasRenderer(resolution);\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        $array.each(registry.rootElements, (root) => {\r\n            if (root.dom === dom) {\r\n                throw new Error(\"You cannot have multiple Roots on the same DOM node\");\r\n            }\r\n        });\r\n        this.interfaceColors = InterfaceColors.new(this, {});\r\n        if (dom === null) {\r\n            throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\r\n        }\r\n        this.dom = dom;\r\n        let inner = document.createElement(\"div\");\r\n        inner.style.position = \"relative\";\r\n        inner.style.width = \"100%\";\r\n        inner.style.height = \"100%\";\r\n        dom.appendChild(inner);\r\n        const tooltipContainerBounds = settings.tooltipContainerBounds;\r\n        if (tooltipContainerBounds) {\r\n            this._tooltipContainerSettings = tooltipContainerBounds;\r\n        }\r\n        this._inner = inner;\r\n        this._updateComputedStyles();\r\n        registry.rootElements.push(this);\r\n    }\r\n    static new(id, settings) {\r\n        const root = new Root(id, settings, true);\r\n        root._init();\r\n        return root;\r\n    }\r\n    moveDOM(id) {\r\n        let dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        if (dom) {\r\n            while (this.dom.childNodes.length > 0) {\r\n                dom.appendChild(this.dom.childNodes[0]);\r\n            }\r\n            this.dom = dom;\r\n            this._initResizeSensor();\r\n            this.resize();\r\n        }\r\n    }\r\n    _handleLogo() {\r\n        if (this._logo) {\r\n            const w = this.dom.offsetWidth;\r\n            const h = this.dom.offsetHeight;\r\n            if ((w <= 150) || (h <= 60)) {\r\n                this._logo.hide();\r\n            }\r\n            else {\r\n                this._logo.show();\r\n            }\r\n        }\r\n    }\r\n    _showBranding() {\r\n        if (!this._logo) {\r\n            const logo = this.tooltipContainer.children.push(Container.new(this, {\r\n                interactive: true,\r\n                interactiveChildren: false,\r\n                position: \"absolute\",\r\n                setStateOnChildren: true,\r\n                paddingTop: 9,\r\n                paddingRight: 9,\r\n                paddingBottom: 9,\r\n                paddingLeft: 9,\r\n                scale: .6,\r\n                y: percent(100),\r\n                centerY: p100,\r\n                tooltipY: 10,\r\n                tooltipText: \"Created using amCharts 5\",\r\n                tooltipX: p100,\r\n                cursorOverStyle: \"pointer\",\r\n                background: Rectangle.new(this, {\r\n                    fill: color(0x474758),\r\n                    fillOpacity: 0,\r\n                    tooltipY: 5\r\n                })\r\n            }));\r\n            logo.set(\"tooltip\", this.systemTooltip);\r\n            logo.events.on(\"click\", () => {\r\n                window.open(\"https://www.amcharts.com/\", \"_blank\");\r\n            });\r\n            logo.states.create(\"hover\", {});\r\n            const m = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0xcccccc),\r\n                strokeWidth: 3,\r\n                svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\r\n            }));\r\n            m.states.create(\"hover\", { stroke: color(0x3CABFF) });\r\n            const a = logo.children.push(Graphics.new(this, {\r\n                stroke: color(0x888888),\r\n                strokeWidth: 3,\r\n                svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\r\n            }));\r\n            a.states.create(\"hover\", { stroke: color(0x474758) });\r\n            this._logo = logo;\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _getRealSize() {\r\n        return this.dom.getBoundingClientRect();\r\n    }\r\n    _getCalculatedSize(rect) {\r\n        if (this._settings.calculateSize) {\r\n            return this._settings.calculateSize(rect);\r\n        }\r\n        else {\r\n            return {\r\n                width: rect.width,\r\n                height: rect.height,\r\n            };\r\n        }\r\n    }\r\n    _init() {\r\n        const settings = this._settings;\r\n        if (settings.accessible !== false) {\r\n            if (settings.focusable) {\r\n                this._inner.setAttribute(\"focusable\", \"true\");\r\n                this._inner.setAttribute(\"tabindex\", this.tabindex + \"\");\r\n            }\r\n            if (settings.ariaLabel) {\r\n                this._inner.setAttribute(\"aria-label\", settings.ariaLabel);\r\n            }\r\n            if (settings.role) {\r\n                this._inner.setAttribute(\"role\", settings.role);\r\n            }\r\n        }\r\n        const renderer = this._renderer;\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const width = Math.floor(size.width);\r\n        const height = Math.floor(size.height);\r\n        const realWidth = Math.floor(rect.width);\r\n        const realHeight = Math.floor(rect.height);\r\n        const rootContainer = Container.new(this, {\r\n            visible: true,\r\n            width: width,\r\n            height: height,\r\n        });\r\n        this._rootContainer = rootContainer;\r\n        this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\r\n        const container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\r\n        this.container = container;\r\n        renderer.resize(realWidth, realHeight, width, height);\r\n        //@todo: better appendChild - refer\r\n        this._inner.appendChild(renderer.view);\r\n        // TODO: TMP TMP TMP for testing only, remove\r\n        //renderer.debugGhostView = true;\r\n        this._initResizeSensor();\r\n        // HTML content holder\r\n        const htmlElementContainer = document.createElement(\"div\");\r\n        this._htmlElementContainer = htmlElementContainer;\r\n        htmlElementContainer.className = \"am5-html-container\";\r\n        htmlElementContainer.style.position = \"absolute\";\r\n        htmlElementContainer.style.pointerEvents = \"none\";\r\n        if (!this._tooltipContainerSettings) {\r\n            htmlElementContainer.style.overflow = \"hidden\";\r\n        }\r\n        this._inner.appendChild(htmlElementContainer);\r\n        if (this._a11yD !== true) {\r\n            // Create element which is used to make announcements to screen reader\r\n            const readerAlertElement = document.createElement(\"div\");\r\n            readerAlertElement.className = \"am5-reader-container\";\r\n            readerAlertElement.setAttribute(\"role\", \"alert\");\r\n            // readerAlertElement.style.zIndex = \"-100000\";\r\n            // readerAlertElement.style.opacity = \"0\";\r\n            // readerAlertElement.style.top = \"0\";\r\n            readerAlertElement.style.position = \"absolute\";\r\n            readerAlertElement.style.width = \"1px\";\r\n            readerAlertElement.style.height = \"1px\";\r\n            readerAlertElement.style.overflow = \"hidden\";\r\n            readerAlertElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n            this._readerAlertElement = readerAlertElement;\r\n            this._inner.appendChild(this._readerAlertElement);\r\n            const focusElementContainer = document.createElement(\"div\");\r\n            focusElementContainer.className = \"am5-focus-container\";\r\n            focusElementContainer.style.position = \"absolute\";\r\n            focusElementContainer.style.pointerEvents = \"none\";\r\n            focusElementContainer.style.top = \"0px\";\r\n            focusElementContainer.style.left = \"0px\";\r\n            focusElementContainer.style.overflow = \"hidden\";\r\n            focusElementContainer.style.width = width + \"px\";\r\n            focusElementContainer.style.height = height + \"px\";\r\n            focusElementContainer.setAttribute(\"role\", \"graphics-document\");\r\n            $utils.setInteractive(focusElementContainer, false);\r\n            this._focusElementContainer = focusElementContainer;\r\n            this._inner.appendChild(this._focusElementContainer);\r\n            const tooltipElementContainer = document.createElement(\"div\");\r\n            this._tooltipElementContainer = tooltipElementContainer;\r\n            tooltipElementContainer.className = \"am5-tooltip-container\";\r\n            this._inner.appendChild(tooltipElementContainer);\r\n            // Add keyboard events for accessibility, e.g. simulating drag with arrow\r\n            // keys and click with ENTER\r\n            if ($utils.supports(\"keyboardevents\")) {\r\n                this._disposers.push($utils.addEventListener(window, \"keydown\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = true;\r\n                    }\r\n                    else if (eventKey == \"Tab\") {\r\n                        this._isShift = ev.shiftKey;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(window, \"keyup\", (ev) => {\r\n                    const eventKey = $utils.getEventKey(ev);\r\n                    if (eventKey == \"Shift\") {\r\n                        this._isShift = false;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"click\", () => {\r\n                    // Some screen readers convert ENTER (and some SPACE) press whil on\r\n                    // focused element to a \"click\" event, preventing actual \"keydown\"\r\n                    // event from firing. We're using this \"click\" event to still\r\n                    // generate internal click events.\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\r\n                        if (announceText !== \"\") {\r\n                            this.readerAlert(announceText);\r\n                        }\r\n                        const downEvent = renderer.getEvent(new MouseEvent(\"click\"));\r\n                        focusedSprite.events.dispatch(\"click\", {\r\n                            type: \"click\",\r\n                            originalEvent: downEvent.event,\r\n                            point: downEvent.point,\r\n                            simulated: true,\r\n                            target: focusedSprite\r\n                        });\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", (ev) => {\r\n                    const focusedSprite = this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        if (ev.key == \"Escape\") {\r\n                            // ESC pressed - lose current focus\r\n                            $utils.blur();\r\n                            this._focusedSprite = undefined;\r\n                        }\r\n                        let dragOffsetX = 0;\r\n                        let dragOffsetY = 0;\r\n                        // TODO: figure out if using bogus MouseEvent is fine, or it will\r\n                        // fail on some platforms\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"Enter\":\r\n                            case \" \":\r\n                                const announceText = focusedSprite.get(\"clickAnnounceText\", \"\");\r\n                                if (announceText !== \"\") {\r\n                                    this.readerAlert(announceText);\r\n                                }\r\n                                if (eventKey == \" \" && focusedSprite.get(\"role\") != \"checkbox\") {\r\n                                    return;\r\n                                }\r\n                                ev.preventDefault();\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mouse\"));\r\n                                focusedSprite.events.dispatch(\"click\", {\r\n                                    type: \"click\",\r\n                                    originalEvent: downEvent.event,\r\n                                    point: downEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                                return;\r\n                            case \"ArrowLeft\":\r\n                                dragOffsetX = -6;\r\n                                break;\r\n                            case \"ArrowRight\":\r\n                                dragOffsetX = 6;\r\n                                break;\r\n                            case \"ArrowUp\":\r\n                                dragOffsetY = -6;\r\n                                break;\r\n                            case \"ArrowDown\":\r\n                                dragOffsetY = 6;\r\n                                break;\r\n                            default:\r\n                                return;\r\n                        }\r\n                        if (dragOffsetX != 0 || dragOffsetY != 0) {\r\n                            ev.preventDefault();\r\n                            if (!focusedSprite.isDragging()) {\r\n                                // Start dragging\r\n                                this._keyboardDragPoint = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                const downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\r\n                                    clientX: 0,\r\n                                    clientY: 0\r\n                                }));\r\n                                downEvent.point = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\r\n                                    focusedSprite.events.dispatch(\"pointerdown\", {\r\n                                        type: \"pointerdown\",\r\n                                        originalEvent: downEvent.event,\r\n                                        point: downEvent.point,\r\n                                        simulated: true,\r\n                                        target: focusedSprite\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Move focus marker\r\n                                //this._positionFocusElement(focusedSprite);\r\n                            }\r\n                            // Move incrementally\r\n                            const dragPoint = this._keyboardDragPoint;\r\n                            dragPoint.x += dragOffsetX;\r\n                            dragPoint.y += dragOffsetY;\r\n                            const moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\r\n                                clientX: dragPoint.x,\r\n                                clientY: dragPoint.y\r\n                            }), false);\r\n                            if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\r\n                                focusedSprite.events.dispatch(\"globalpointermove\", {\r\n                                    type: \"globalpointermove\",\r\n                                    originalEvent: moveEvent.event,\r\n                                    point: moveEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", (ev) => {\r\n                    if (this._focusedSprite) {\r\n                        const focusedSprite = this._focusedSprite;\r\n                        const eventKey = $utils.getEventKey(ev);\r\n                        switch (eventKey) {\r\n                            case \"ArrowLeft\":\r\n                            case \"ArrowRight\":\r\n                            case \"ArrowUp\":\r\n                            case \"ArrowDown\":\r\n                                if (focusedSprite.isDragging()) {\r\n                                    // Simulate drag stop\r\n                                    const dragPoint = this._keyboardDragPoint;\r\n                                    const upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\r\n                                        clientX: dragPoint.x,\r\n                                        clientY: dragPoint.y\r\n                                    }));\r\n                                    if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\r\n                                        focusedSprite.events.dispatch(\"globalpointerup\", {\r\n                                            type: \"globalpointerup\",\r\n                                            originalEvent: upEvent.event,\r\n                                            point: upEvent.point,\r\n                                            simulated: true,\r\n                                            target: focusedSprite\r\n                                        });\r\n                                    }\r\n                                    //this._positionFocusElement(focusedSprite);\r\n                                    this._keyboardDragPoint = undefined;\r\n                                    // @todo dispatch mouseup event instead of calling dragStop?\r\n                                    // this._dispatchEvent(\"globalpointerup\", target, upEvent);\r\n                                    return;\r\n                                }\r\n                                else if (focusedSprite.get(\"focusableGroup\")) {\r\n                                    // Find next item in focusable group\r\n                                    const group = focusedSprite.get(\"focusableGroup\");\r\n                                    const items = this._tabindexes.filter((item) => {\r\n                                        return item.get(\"focusableGroup\") == group && item.getPrivate(\"focusable\") !== false && item.isVisibleDeep() ? true : false;\r\n                                    });\r\n                                    let index = items.indexOf(focusedSprite);\r\n                                    const lastIndex = items.length - 1;\r\n                                    index += (eventKey == \"ArrowRight\" || eventKey == \"ArrowDown\") ? 1 : -1;\r\n                                    if (index < 0) {\r\n                                        index = lastIndex;\r\n                                    }\r\n                                    else if (index > lastIndex) {\r\n                                        index = 0;\r\n                                    }\r\n                                    $utils.focus(items[index].getPrivate(\"focusElement\").dom);\r\n                                }\r\n                                break;\r\n                            case \"Tab\":\r\n                                const group = focusedSprite.get(\"focusableGroup\");\r\n                                if (group && this._isShift) {\r\n                                    if (!this._skipNextGroupJump) {\r\n                                        this._focusNext(focusedSprite.getPrivate(\"focusElement\").dom, -1, group);\r\n                                        this._skipNextGroupJump = true;\r\n                                    }\r\n                                    return;\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n        }\r\n        this._startTicker();\r\n        this.setThemes([]);\r\n        this._addTooltip();\r\n        if (!this._hasLicense()) {\r\n            this._showBranding();\r\n        }\r\n    }\r\n    /**\r\n     * Returns an instance of a universal [[Tooltip]] instance.\r\n     * @since 5.14.0\r\n     */\r\n    get systemTooltip() {\r\n        if (!this._systemTooltip) {\r\n            const tooltip = Tooltip.new(this, {\r\n                themeTags: [\"system\"]\r\n            });\r\n            this._systemTooltip = tooltip;\r\n        }\r\n        return this._systemTooltip;\r\n    }\r\n    _initResizeSensor() {\r\n        if (this._resizeSensorDisposer) {\r\n            this._resizeSensorDisposer.dispose();\r\n        }\r\n        this._resizeSensorDisposer = new ResizeSensor(this.dom, () => {\r\n            if (this.autoResize) {\r\n                this.resize();\r\n            }\r\n        });\r\n        this._disposers.push(this._resizeSensorDisposer);\r\n    }\r\n    /**\r\n     * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n     * can be resized manually by calling this method.\r\n     */\r\n    resize() {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const w = Math.floor(size.width);\r\n        const h = Math.floor(size.height);\r\n        if (w > 0 && h > 0) {\r\n            const realWidth = Math.floor(rect.width);\r\n            const realHeight = Math.floor(rect.height);\r\n            const htmlElementContainer = this._htmlElementContainer;\r\n            htmlElementContainer.style.width = w + \"px\";\r\n            htmlElementContainer.style.height = h + \"px\";\r\n            if (this._a11yD !== true) {\r\n                const focusElementContainer = this._focusElementContainer;\r\n                focusElementContainer.style.width = w + \"px\";\r\n                focusElementContainer.style.height = h + \"px\";\r\n            }\r\n            this._renderer.resize(realWidth, realHeight, w, h);\r\n            const rootContainer = this._rootContainer;\r\n            rootContainer.setPrivate(\"width\", w);\r\n            rootContainer.setPrivate(\"height\", h);\r\n            this._render();\r\n            this._handleLogo();\r\n        }\r\n    }\r\n    _render() {\r\n        this._renderer.render(this._rootContainer._display);\r\n        if (this._focusElementDirty) {\r\n            this._updateCurrentFocus();\r\n            this._focusElementDirty = false;\r\n        }\r\n    }\r\n    _runTickers(currentTime) {\r\n        $array.each(this._tickers, (f) => {\r\n            f(currentTime);\r\n        });\r\n    }\r\n    _runAnimations(currentTime) {\r\n        let running = 0;\r\n        $array.keepIf(this._animations, (animation) => {\r\n            const state = animation._runAnimation(currentTime);\r\n            if (state === AnimationState.Stopped) {\r\n                return false;\r\n            }\r\n            else if (state === AnimationState.Playing) {\r\n                ++running;\r\n                return true;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        });\r\n        this._isDirtyAnimation = false;\r\n        return running === 0;\r\n    }\r\n    _runDirties() {\r\n        //console.log(\"tick **************************************************************\");\t\t\r\n        let allParents = {};\r\n        while (this._isDirtyParents) {\r\n            // This must be before calling _prepareChildren\r\n            this._isDirtyParents = false;\r\n            $object.keys(this._dirtyParents).forEach((key) => {\r\n                const parent = this._dirtyParents[key];\r\n                delete this._dirtyParents[key];\r\n                if (!parent.isDisposed()) {\r\n                    allParents[parent.uid] = parent;\r\n                    parent._prepareChildren();\r\n                }\r\n            });\r\n        }\r\n        $object.keys(allParents).forEach((key) => {\r\n            allParents[key]._updateChildren();\r\n        });\r\n        const objects = [];\r\n        //\t\tconsole.log(\"_beforeChanged\")\r\n        $object.keys(this._dirty).forEach((key) => {\r\n            const entity = this._dirty[key];\r\n            if (entity.isDisposed()) {\r\n                delete this._dirty[entity.uid];\r\n            }\r\n            else {\r\n                objects.push(entity);\r\n                entity._beforeChanged();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_changed\")\r\n        objects.forEach((entity) => {\r\n            entity._changed();\r\n            delete this._dirty[entity.uid];\r\n            entity._clearDirty();\r\n        });\r\n        this._isDirty = false;\r\n        const depths = {};\r\n        const bounds = [];\r\n        $object.keys(this._dirtyBounds).forEach((key) => {\r\n            const entity = this._dirtyBounds[key];\r\n            delete this._dirtyBounds[key];\r\n            if (!entity.isDisposed()) {\r\n                depths[entity.uid] = entity.depth();\r\n                bounds.push(entity);\r\n            }\r\n        });\r\n        this._positionHTMLElements();\r\n        // High depth -> low depth\r\n        bounds.sort((x, y) => {\r\n            return $order.compare(depths[y.uid], depths[x.uid]);\r\n        });\r\n        //\t\tconsole.log(\"_updateBounds\")\r\n        bounds.forEach((entity) => {\r\n            entity._updateBounds();\r\n        });\r\n        //\t\tconsole.log(\"_updatePosition\")\r\n        const dirtyPositions = this._dirtyPositions;\r\n        $object.keys(dirtyPositions).forEach((key) => {\r\n            const sprite = dirtyPositions[key];\r\n            delete dirtyPositions[key];\r\n            if (!sprite.isDisposed()) {\r\n                sprite._updatePosition();\r\n            }\r\n        });\r\n        //\t\tconsole.log(\"_afterChanged\")\r\n        objects.forEach((entity) => {\r\n            entity._afterChanged();\r\n        });\r\n        $object.keys(allParents).forEach((key) => {\r\n            allParents[key]._childrenPrep = false;\r\n            allParents[key]._childrenUpdt = false;\r\n        });\r\n    }\r\n    _renderFrame(currentTime) {\r\n        if (this._updateTick) {\r\n            if (this.events.isEnabled(\"framestarted\")) {\r\n                this.events.dispatch(\"framestarted\", {\r\n                    type: \"framestarted\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            this._checkComputedStyles();\r\n            this._runTickers(currentTime);\r\n            const animationDone = this._runAnimations(currentTime);\r\n            this._runDirties();\r\n            this._render();\r\n            this._renderer.resetImageArray();\r\n            this._positionHTMLElements();\r\n            if (this.events.isEnabled(\"frameended\")) {\r\n                this.events.dispatch(\"frameended\", {\r\n                    type: \"frameended\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            return this._tickers.length === 0 &&\r\n                animationDone &&\r\n                !this._isDirtyAnimation &&\r\n                !this._isDirty;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    _runTicker(currentTime, now) {\r\n        if (!this.isDisposed()) {\r\n            this.animationTime = currentTime;\r\n            const done = this._renderFrame(currentTime);\r\n            // No more work to do\r\n            if (done) {\r\n                this._ticker = null;\r\n                this.animationTime = null;\r\n            }\r\n            else {\r\n                if (!this._paused) {\r\n                    if (now) {\r\n                        this._ticker;\r\n                    }\r\n                    else {\r\n                        rAF(this.fps, this._ticker);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _runTickerNow(timeout = 10000) {\r\n        if (!this.isDisposed()) {\r\n            const endTime = performance.now() + timeout;\r\n            for (;;) {\r\n                const currentTime = performance.now();\r\n                if (currentTime >= endTime) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n                this.animationTime = currentTime;\r\n                const done = this._renderFrame(currentTime);\r\n                if (done) {\r\n                    this.animationTime = null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _startTicker() {\r\n        if (this._ticker === null) {\r\n            this.animationTime = null;\r\n            this._ticker = (currentTime) => {\r\n                this._runTicker(currentTime);\r\n            };\r\n            rAF(this.fps, this._ticker);\r\n        }\r\n    }\r\n    /**\r\n     * Returns whether the root is updating or not.\r\n     */\r\n    get updateTick() {\r\n        return this._updateTick;\r\n    }\r\n    /**\r\n     * Enables or disables the root updating.\r\n     */\r\n    set updateTick(value) {\r\n        this._updateTick = value;\r\n        if (value) {\r\n            this._startTicker();\r\n        }\r\n    }\r\n    _addDirtyEntity(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirty[entity.uid] === undefined) {\r\n            this._dirty[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyParent(parent) {\r\n        this._isDirty = true;\r\n        this._isDirtyParents = true;\r\n        if (this._dirtyParents[parent.uid] === undefined) {\r\n            this._dirtyParents[parent.uid] = parent;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyBounds(entity) {\r\n        this._isDirty = true;\r\n        if (this._dirtyBounds[entity.uid] === undefined) {\r\n            this._dirtyBounds[entity.uid] = entity;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addDirtyPosition(sprite) {\r\n        this._isDirty = true;\r\n        if (this._dirtyPositions[sprite.uid] === undefined) {\r\n            this._dirtyPositions[sprite.uid] = sprite;\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _addAnimation(animation) {\r\n        this._isDirtyAnimation = true;\r\n        // TODO use numeric id instead\r\n        if (this._animations.indexOf(animation) === -1) {\r\n            this._animations.push(animation);\r\n        }\r\n        this._startTicker();\r\n    }\r\n    _markDirty() {\r\n        this._isDirty = true;\r\n    }\r\n    _markDirtyRedraw() {\r\n        this.events.once(\"frameended\", () => {\r\n            this._isDirty = true;\r\n            this._startTicker();\r\n        });\r\n    }\r\n    eachFrame(f) {\r\n        this._tickers.push(f);\r\n        this._startTicker();\r\n        return new Disposer(() => {\r\n            $array.removeFirst(this._tickers, f);\r\n        });\r\n    }\r\n    markDirtyGlobal(container) {\r\n        if (!container) {\r\n            container = this.container;\r\n        }\r\n        container.walkChildren((child) => {\r\n            if (child instanceof Container) {\r\n                this.markDirtyGlobal(child);\r\n            }\r\n            child.markDirty();\r\n            child.markDirtyBounds();\r\n        });\r\n    }\r\n    /**\r\n     * Returns width of the target container, in pixels.\r\n     *\r\n     * @return Width\r\n     */\r\n    width() {\r\n        // TODO make this more efficient, maybe just return the renderer's width ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).width);\r\n    }\r\n    /**\r\n     * Returns height of the target container, in pixels.\r\n     *\r\n     * @return Height\r\n     */\r\n    height() {\r\n        // TODO make this more efficient, maybe just return the renderer's height ?\r\n        return Math.floor(this._getCalculatedSize(this._getRealSize()).height);\r\n    }\r\n    /**\r\n     * Disposes root and all the content in it.\r\n     */\r\n    dispose() {\r\n        if (!this._isDisposed) {\r\n            this._isDisposed = true;\r\n            this._rootContainer.dispose();\r\n            this._renderer.dispose();\r\n            this.horizontalLayout.dispose();\r\n            this.verticalLayout.dispose();\r\n            this.interfaceColors.dispose();\r\n            $array.each(this._disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n            if (this._inner) {\r\n                $utils.removeElement(this._inner);\r\n            }\r\n            $array.remove(registry.rootElements, this);\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` if root element is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    isDisposed() {\r\n        return this._isDisposed;\r\n    }\r\n    /**\r\n     * Triggers screen reader read out a message.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     * @param  text  Alert text\r\n     */\r\n    readerAlert(text) {\r\n        if (this._a11yD !== true) {\r\n            const element = this._readerAlertElement;\r\n            text = $utils.stripTags(text);\r\n            if (element.innerHTML == text) {\r\n                element.innerHTML = \"\";\r\n            }\r\n            element.innerHTML = text;\r\n        }\r\n    }\r\n    /**\r\n     * Sets themes to be used for the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n     * @param  themes  A list of themes\r\n     */\r\n    setThemes(themes) {\r\n        this._rootContainer.set(\"themes\", themes);\r\n        // otherwise new themes are not applied\r\n        const tooltipContainer = this.tooltipContainer;\r\n        if (tooltipContainer) {\r\n            tooltipContainer._applyThemes();\r\n        }\r\n        // @todo review this\r\n        const interfaceColors = this.interfaceColors;\r\n        if (interfaceColors) {\r\n            interfaceColors._applyThemes();\r\n        }\r\n    }\r\n    _addTooltip() {\r\n        if (!this.tooltipContainer) {\r\n            const tooltipContainerSettings = this._tooltipContainerSettings;\r\n            const tooltipContainer = this._rootContainer.children.push(Container.new(this, {\r\n                position: \"absolute\",\r\n                isMeasured: false,\r\n                width: p100,\r\n                height: p100,\r\n                layer: tooltipContainerSettings ? 35 : 30,\r\n                layerMargin: tooltipContainerSettings ? tooltipContainerSettings : undefined\r\n            }));\r\n            this.tooltipContainer = tooltipContainer;\r\n            const tooltip = Tooltip.new(this, {});\r\n            this.container.set(\"tooltip\", tooltip);\r\n            tooltip.hide(0);\r\n            this._tooltip = tooltip;\r\n        }\r\n    }\r\n    /**\r\n     * Accesibility\r\n     */\r\n    _registerTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (target.get(\"focusable\")) {\r\n            $array.pushOne(this._tabindexes, target);\r\n        }\r\n        else {\r\n            $array.remove(this._tabindexes, target);\r\n        }\r\n        this._invalidateTabindexes();\r\n    }\r\n    _unregisterTabindexOrder(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        this._invalidateTabindexes();\r\n    }\r\n    _invalidateTabindexes() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._tabindexes.sort((a, b) => {\r\n            const aindex = a.get(\"tabindexOrder\", 0);\r\n            const bindex = b.get(\"tabindexOrder\", 0);\r\n            if (aindex == bindex) {\r\n                return 0;\r\n            }\r\n            else if (aindex > bindex) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        });\r\n        const groups = [];\r\n        $array.each(this._tabindexes, (item, index) => {\r\n            if (!item.getPrivate(\"focusElement\")) {\r\n                this._makeFocusElement(index, item);\r\n            }\r\n            else {\r\n                this._moveFocusElement(index, item);\r\n            }\r\n            const group = item.get(\"focusableGroup\");\r\n            if (group && item.getPrivate(\"focusable\") !== false) {\r\n                if (groups.indexOf(group) !== -1) {\r\n                    // Non-first element in the group, make it not directly focusable\r\n                    item.getPrivate(\"focusElement\").dom.setAttribute(\"tabindex\", \"-1\");\r\n                }\r\n                else {\r\n                    groups.push(group);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _updateCurrentFocus() {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        if (this._focusedSprite) {\r\n            this._decorateFocusElement(this._focusedSprite);\r\n            this._positionFocusElement(this._focusedSprite);\r\n        }\r\n    }\r\n    _decorateFocusElement(target, focusElement) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Decorate with proper accessibility attributes\r\n        if (!focusElement) {\r\n            focusElement = target.getPrivate(\"focusElement\").dom;\r\n        }\r\n        if (!focusElement) {\r\n            return;\r\n        }\r\n        const role = target.get(\"role\");\r\n        if (role) {\r\n            focusElement.setAttribute(\"role\", role);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"role\");\r\n        }\r\n        const ariaLabel = target.get(\"ariaLabel\");\r\n        if (ariaLabel) {\r\n            const label = populateString(target, ariaLabel);\r\n            focusElement.setAttribute(\"aria-label\", label);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-label\");\r\n        }\r\n        const ariaLive = target.get(\"ariaLive\");\r\n        if (ariaLive) {\r\n            focusElement.setAttribute(\"aria-live\", ariaLive);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-live\");\r\n        }\r\n        const ariaChecked = target.get(\"ariaChecked\");\r\n        if (ariaChecked != null && role && [\"checkbox\", \"option\", \"radio\", \"menuitemcheckbox\", \"menuitemradio\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-checked\");\r\n        }\r\n        const ariaCurrent = target.get(\"ariaCurrent\");\r\n        if (ariaCurrent != null) {\r\n            focusElement.setAttribute(\"aria-current\", ariaCurrent);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-current\");\r\n        }\r\n        const ariaSelected = target.get(\"ariaSelected\");\r\n        if (ariaSelected != null && role && [\"gridcell\", \"option\", \"row\", \"tab\", \"columnheader\", \"rowheader\", \"treeitem\"].indexOf(role) !== -1) {\r\n            focusElement.setAttribute(\"aria-selected\", ariaSelected ? \"true\" : \"false\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-selected\");\r\n        }\r\n        if (target.get(\"ariaHidden\")) {\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        const ariaOrientation = target.get(\"ariaOrientation\");\r\n        if (ariaOrientation) {\r\n            focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-orientation\");\r\n        }\r\n        const ariaValueNow = target.get(\"ariaValueNow\");\r\n        if (ariaValueNow) {\r\n            focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuenow\");\r\n        }\r\n        const ariaValueMin = target.get(\"ariaValueMin\");\r\n        if (ariaValueMin) {\r\n            focusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemin\");\r\n        }\r\n        const ariaValueMax = target.get(\"ariaValueMax\");\r\n        if (ariaValueMax) {\r\n            focusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuemax\");\r\n        }\r\n        const ariaValueText = target.get(\"ariaValueText\");\r\n        if (ariaValueText) {\r\n            focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-valuetext\");\r\n        }\r\n        const ariaControls = target.get(\"ariaControls\");\r\n        if (ariaControls) {\r\n            focusElement.setAttribute(\"aria-controls\", ariaControls);\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"aria-controls\");\r\n        }\r\n        if (target.get(\"visible\") && target.get(\"opacity\") !== 0 && target.get(\"role\") != \"tooltip\" && !target.isHidden() && target.getPrivate(\"focusable\") !== false && (target.height() || target.width())) {\r\n            if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\r\n                focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\r\n            }\r\n            focusElement.removeAttribute(\"aria-hidden\");\r\n        }\r\n        else {\r\n            focusElement.removeAttribute(\"tabindex\");\r\n            focusElement.setAttribute(\"aria-hidden\", \"true\");\r\n        }\r\n    }\r\n    _makeFocusElement(index, target) {\r\n        if (target.getPrivate(\"focusElement\") || this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Init\r\n        const focusElement = document.createElement(\"div\");\r\n        if (target.get(\"role\") != \"tooltip\") {\r\n            focusElement.tabIndex = this.tabindex;\r\n        }\r\n        focusElement.style.position = \"absolute\";\r\n        $utils.setInteractive(focusElement, false);\r\n        const disposers = [];\r\n        target.setPrivate(\"focusElement\", {\r\n            dom: focusElement,\r\n            disposers,\r\n        });\r\n        this._decorateFocusElement(target);\r\n        disposers.push($utils.addEventListener(focusElement, \"focus\", (ev) => {\r\n            this._handleFocus(ev);\r\n        }));\r\n        disposers.push($utils.addEventListener(focusElement, \"blur\", (ev) => {\r\n            this._handleBlur(ev);\r\n        }));\r\n        this._moveFocusElement(index, target);\r\n    }\r\n    _removeFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        $array.remove(this._tabindexes, target);\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (focusElement) {\r\n            const container = this._focusElementContainer;\r\n            container.removeChild(focusElement.dom);\r\n            $array.each(focusElement.disposers, (x) => {\r\n                x.dispose();\r\n            });\r\n        }\r\n    }\r\n    _hideFocusElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        focusElement.dom.style.display = \"none\";\r\n    }\r\n    _moveFocusElement(index, target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get container\r\n        const container = this._focusElementContainer;\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        if (focusElement === this._focusElementContainer.children[index]) {\r\n            // Nothing to do\r\n            return;\r\n        }\r\n        const next = this._focusElementContainer.children[index + 1];\r\n        if (next) {\r\n            container.insertBefore(focusElement, next);\r\n        }\r\n        else {\r\n            container.append(focusElement);\r\n        }\r\n    }\r\n    _positionFocusElement(target) {\r\n        if (this._a11yD == true || target == undefined) {\r\n            return;\r\n        }\r\n        const bounds = target.globalBounds();\r\n        let width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\r\n        let height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\r\n        const padding = this._settings.focusPadding !== undefined ? this._settings.focusPadding : 2;\r\n        let x = bounds.left - padding;\r\n        let y = bounds.top - padding;\r\n        if (width < 0) {\r\n            x += width;\r\n            width = Math.abs(width);\r\n        }\r\n        if (height < 0) {\r\n            y += height;\r\n            height = Math.abs(height);\r\n        }\r\n        const focusElement = target.getPrivate(\"focusElement\").dom;\r\n        focusElement.style.top = y + \"px\";\r\n        focusElement.style.left = x + \"px\";\r\n        focusElement.style.width = (width + padding * 2) + \"px\";\r\n        focusElement.style.height = (height + padding * 2) + \"px\";\r\n    }\r\n    _getSpriteByFocusElement(target) {\r\n        let found;\r\n        $array.eachContinue(this._tabindexes, (item, _index) => {\r\n            if (item.getPrivate(\"focusElement\").dom === target) {\r\n                found = item;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return found;\r\n    }\r\n    _handleFocus(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        // Get element\r\n        //const focused = this._tabindexes[index];\r\n        const focused = this._getSpriteByFocusElement(ev.target);\r\n        if (!focused) {\r\n            return;\r\n        }\r\n        // Jump over hidden elements\r\n        if (!focused.isVisibleDeep()) {\r\n            this._focusNext(ev.target, this._isShift ? -1 : 1);\r\n            return;\r\n        }\r\n        // Size and position\r\n        this._positionFocusElement(focused);\r\n        //this._decorateFocusElement(focused);\r\n        this._focusedSprite = focused;\r\n        if (focused.events.isEnabled(\"focus\")) {\r\n            focused.events.dispatch(\"focus\", {\r\n                type: \"focus\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n        if (focused.getPrivate(\"focusElement\").dom.tabIndex == -1) {\r\n            this._skipNextGroupJump = false;\r\n        }\r\n    }\r\n    _focusNext(el, direction, group) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focusableElements = Array.from(document.querySelectorAll([\r\n            'a[href]',\r\n            'area[href]',\r\n            'button:not([disabled])',\r\n            'details',\r\n            'input:not([disabled])',\r\n            'iframe:not([disabled])',\r\n            'select:not([disabled])',\r\n            'textarea:not([disabled])',\r\n            '[contentEditable=\"\"]',\r\n            '[contentEditable=\"true\"]',\r\n            '[contentEditable=\"TRUE\"]',\r\n            '[tabindex]:not([tabindex^=\"-\"])',\r\n            //':not([disabled])'\r\n        ].join(',')));\r\n        let index = focusableElements.indexOf(el) + direction;\r\n        if (index < 0) {\r\n            index = focusableElements.length - 1;\r\n        }\r\n        else if (index >= focusableElements.length) {\r\n            index = 0;\r\n        }\r\n        const targetElement = focusableElements[index];\r\n        if (group && direction == -1) {\r\n            const target = this._getSpriteByFocusElement(targetElement);\r\n            if (target && target.get(\"focusableGroup\") == group) {\r\n                this._focusNext(targetElement, direction);\r\n                return;\r\n            }\r\n        }\r\n        targetElement.focus();\r\n    }\r\n    _handleBlur(ev) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const focused = this._focusedSprite;\r\n        if (focused && !focused.isDisposed() && focused.events.isEnabled(\"blur\")) {\r\n            focused.events.dispatch(\"blur\", {\r\n                type: \"blur\",\r\n                originalEvent: ev,\r\n                target: focused\r\n            });\r\n        }\r\n        this._focusedSprite = undefined;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltip(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const text = $utils.stripTags(target._getText());\r\n        let tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (target.get(\"role\") == \"tooltip\" && text != \"\") {\r\n            if (!tooltipElement) {\r\n                tooltipElement = this._makeTooltipElement(target);\r\n            }\r\n            if (tooltipElement.innerHTML != text) {\r\n                tooltipElement.innerHTML = text;\r\n            }\r\n            tooltipElement.setAttribute(\"aria-hidden\", target.isVisibleDeep() ? \"false\" : \"true\");\r\n        }\r\n        else if (tooltipElement) {\r\n            tooltipElement.remove();\r\n            target.removePrivate(\"tooltipElement\");\r\n        }\r\n    }\r\n    _makeTooltipElement(target) {\r\n        const container = this._tooltipElementContainer;\r\n        const tooltipElement = document.createElement(\"div\");\r\n        tooltipElement.style.position = \"absolute\";\r\n        tooltipElement.style.width = \"1px\";\r\n        tooltipElement.style.height = \"1px\";\r\n        tooltipElement.style.overflow = \"hidden\";\r\n        tooltipElement.style.clip = \"rect(1px, 1px, 1px, 1px)\";\r\n        $utils.setInteractive(tooltipElement, false);\r\n        this._decorateFocusElement(target, tooltipElement);\r\n        container.append(tooltipElement);\r\n        target.setPrivate(\"tooltipElement\", tooltipElement);\r\n        return tooltipElement;\r\n    }\r\n    _removeTooltipElement(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        const tooltipElement = target.getPrivate(\"tooltipElement\");\r\n        if (tooltipElement) {\r\n            const parent = tooltipElement.parentElement;\r\n            if (parent) {\r\n                parent.removeChild(tooltipElement);\r\n            }\r\n        }\r\n    }\r\n    _invalidateAccessibility(target) {\r\n        if (this._a11yD == true) {\r\n            return;\r\n        }\r\n        this._focusElementDirty = true;\r\n        const focusElement = target.getPrivate(\"focusElement\");\r\n        if (target.get(\"focusable\")) {\r\n            if (focusElement) {\r\n                this._decorateFocusElement(target);\r\n                this._positionFocusElement(target);\r\n            }\r\n            // else {\r\n            // \tthis._renderer._makeFocusElement(0, this);\r\n            // }\r\n        }\r\n        else if (focusElement) {\r\n            this._removeFocusElement(target);\r\n        }\r\n        //this.updateCurrentFocus();\r\n    }\r\n    /**\r\n     * Returns `true` if `target` is currently focused.\r\n     *\r\n     * @param   target  Target\r\n     * @return          Focused?\r\n     */\r\n    focused(target) {\r\n        return this._focusedSprite === target;\r\n    }\r\n    /**\r\n     * Converts document coordinates to coordinates withing root element.\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    documentPointToRoot(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x - rect.left) * scaleWidth,\r\n            y: (point.y - rect.top) * scaleHeight,\r\n        };\r\n    }\r\n    /**\r\n     * Converts root coordinates to document\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    rootPointToDocument(point) {\r\n        const rect = this._getRealSize();\r\n        const size = this._getCalculatedSize(rect);\r\n        const scaleWidth = size.width / rect.width;\r\n        const scaleHeight = size.height / rect.height;\r\n        return {\r\n            x: (point.x / scaleWidth) + rect.left,\r\n            y: (point.y / scaleHeight) + rect.top\r\n        };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    addDisposer(disposer) {\r\n        this._disposers.push(disposer);\r\n        return disposer;\r\n    }\r\n    _updateComputedStyles() {\r\n        const styles = window.getComputedStyle(this.dom);\r\n        let fontHash = \"\";\r\n        $object.each(styles, (key, val) => {\r\n            if ($type.isString(key) && key.match(/^font/)) {\r\n                fontHash += val;\r\n            }\r\n        });\r\n        const changed = fontHash != this._fontHash;\r\n        if (changed) {\r\n            this._fontHash = fontHash;\r\n        }\r\n        return changed;\r\n    }\r\n    _checkComputedStyles() {\r\n        if (this._updateComputedStyles()) {\r\n            this._invalidateLabelBounds(this.container);\r\n        }\r\n    }\r\n    _invalidateLabelBounds(target) {\r\n        if (target instanceof Container) {\r\n            target.children.each((child) => {\r\n                this._invalidateLabelBounds(child);\r\n            });\r\n        }\r\n        else if (target instanceof Text) {\r\n            target.markDirtyBounds();\r\n        }\r\n    }\r\n    /**\r\n     * To all the clever heads out there. Yes, we did not make any attempts to\r\n     * scramble this.\r\n     *\r\n     * This is a part of a tool meant for our users to manage their commercial\r\n     * licenses for removal of amCharts branding from charts.\r\n     *\r\n     * The only legit way to do so is to purchase a commercial license for amCharts:\r\n     * https://www.amcharts.com/online-store/\r\n     *\r\n     * Removing or altering this code, or disabling amCharts branding in any other\r\n     * way is against the license and thus illegal.\r\n     */\r\n    _hasLicense() {\r\n        for (let i = 0; i < registry.licenses.length; i++) {\r\n            if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _licenseApplied() {\r\n        if (this._logo) {\r\n            this._logo.set(\"forceHidden\", true);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    get debugGhostView() {\r\n        return this._renderer.debugGhostView;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    set debugGhostView(value) {\r\n        this._renderer.debugGhostView = value;\r\n    }\r\n    /**\r\n     * Set this to `true` if you need chart to require first a tap onto it before\r\n     * touch gesture related functionality like zoom/pan is turned on.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default false\r\n     * @since 5.2.9\r\n     * @param  value  Needs a tap to activate touch functions\r\n     */\r\n    set tapToActivate(value) {\r\n        this._renderer.tapToActivate = value;\r\n    }\r\n    /**\r\n     * @return Needs a tap to activate touch functions\r\n     */\r\n    get tapToActivate() {\r\n        return this._renderer.tapToActivate;\r\n    }\r\n    /**\r\n     * If `tapToActivate` is set to `true`, this setting will determine number\r\n     * of milliseconds the chart will stay \"active\", before releasing the\r\n     * controls back to the page.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n     * @default 3000\r\n     * @since 5.2.9\r\n     * @param  value  Timeout\r\n     */\r\n    set tapToActivateTimeout(value) {\r\n        this._renderer.tapToActivateTimeout = value;\r\n    }\r\n    /**\r\n     * @return Timeout\r\n     */\r\n    get tapToActivateTimeout() {\r\n        return this._renderer.tapToActivateTimeout;\r\n    }\r\n    _makeHTMLElement(target) {\r\n        // Get container\r\n        const container = this._htmlElementContainer;\r\n        // Init\r\n        const htmlElement = document.createElement(\"div\");\r\n        target.setPrivate(\"htmlElement\", htmlElement);\r\n        // Should we put this into a wrapper?\r\n        let needWrapper = false;\r\n        let wrapperTarget;\r\n        target._walkParents((parent) => {\r\n            if (parent.get(\"verticalScrollbar\")) {\r\n                needWrapper = true;\r\n                wrapperTarget = parent;\r\n                return false;\r\n            }\r\n        });\r\n        let htmlElementWrapper;\r\n        if (needWrapper) {\r\n            htmlElementWrapper = document.createElement(\"div\");\r\n            target.setPrivate(\"htmlElementWrapper\", htmlElementWrapper);\r\n            target.setPrivate(\"wrapperContainer\", wrapperTarget);\r\n            htmlElementWrapper.style.position = \"absolute\";\r\n            htmlElementWrapper.style.overflow = \"hidden\";\r\n            htmlElementWrapper.style.boxSizing = \"border-box\";\r\n            htmlElementWrapper.style.top = \"0px\";\r\n            htmlElementWrapper.style.left = \"0px\";\r\n            htmlElementWrapper.style.width = \"100%\";\r\n            htmlElementWrapper.style.height = \"100%\";\r\n            wrapperTarget.events.on(\"boundschanged\", () => {\r\n                this._positionHTMLElement(target);\r\n            });\r\n        }\r\n        //htmlElement.tabIndex = this.tabindex;\r\n        htmlElement.style.position = \"absolute\";\r\n        htmlElement.style.overflow = \"auto\";\r\n        htmlElement.style.boxSizing = \"border-box\";\r\n        $utils.setInteractive(htmlElement, target.get(\"interactive\", false));\r\n        // Translate events\r\n        if (target.events.isEnabled(\"click\")) {\r\n            $utils.setInteractive(htmlElement, true);\r\n            this._disposers.push($utils.addEventListener(htmlElement, \"click\", (ev) => {\r\n                const downEvent = this._renderer.getEvent(ev);\r\n                target.events.dispatch(\"click\", {\r\n                    type: \"click\",\r\n                    originalEvent: downEvent.event,\r\n                    point: downEvent.point,\r\n                    simulated: false,\r\n                    target: target\r\n                });\r\n            }));\r\n        }\r\n        this._positionHTMLElement(target);\r\n        if (needWrapper) {\r\n            htmlElementWrapper.append(htmlElement);\r\n            container.append(htmlElementWrapper);\r\n        }\r\n        else {\r\n            container.append(htmlElement);\r\n        }\r\n        $array.pushOne(this._htmlEnabledContainers, target);\r\n        return htmlElement;\r\n    }\r\n    _positionHTMLElements() {\r\n        $array.each(this._htmlEnabledContainers, (target) => {\r\n            this._positionHTMLElement(target);\r\n        });\r\n    }\r\n    _positionHTMLElement(target) {\r\n        const htmlElementWrapper = target.getPrivate(\"htmlElementWrapper\");\r\n        if (htmlElementWrapper) {\r\n            const wrapperTarget = target.getPrivate(\"wrapperContainer\");\r\n            if (wrapperTarget) {\r\n                const bounds = wrapperTarget.globalBounds();\r\n                htmlElementWrapper.style.clipPath = \"rect(\" + bounds.top + \"px \" + bounds.right + \"px \" + bounds.bottom + \"px \" + bounds.left + \"px)\";\r\n            }\r\n        }\r\n        const htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElement) {\r\n            // Translate settings\r\n            const visualSettings = [\r\n                \"paddingTop\",\r\n                \"paddingRight\",\r\n                \"paddingBottom\",\r\n                \"paddingLeft\",\r\n                \"minWidth\",\r\n                \"minHeight\",\r\n                \"maxWidth\",\r\n                \"maxHeight\"\r\n            ];\r\n            $array.each(visualSettings, (setting) => {\r\n                const value = target.get(setting);\r\n                if (value) {\r\n                    htmlElement.style[setting] = value + \"px\";\r\n                }\r\n                else {\r\n                    htmlElement.style[setting] = \"\";\r\n                }\r\n            });\r\n            const strtingSettings = [\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\"\r\n            ];\r\n            $array.each(strtingSettings, (setting) => {\r\n                const value = target.get(setting);\r\n                if (value) {\r\n                    if (setting == \"fontSize\" && !$type.isString(value)) {\r\n                        htmlElement.style[setting] = value + \"px\";\r\n                    }\r\n                    else {\r\n                        htmlElement.style[setting] = value + \"\";\r\n                    }\r\n                }\r\n                else {\r\n                    htmlElement.style[setting] = \"\";\r\n                }\r\n            });\r\n            // Init and reset scale / rotation\r\n            const scale = target.compositeScale() || 1;\r\n            const rotation = target.compositeRotation() || 0;\r\n            htmlElement.style.transform = \"\";\r\n            htmlElement.style.transformOrigin = \"\";\r\n            // Deal with opacity\r\n            const opacity = target.compositeOpacity();\r\n            setTimeout(() => {\r\n                htmlElement.style.opacity = opacity + \"\";\r\n            }, 10);\r\n            const visible = target.isVisibleDeep();\r\n            if (visible) {\r\n                htmlElement.style.display = \"block\";\r\n            }\r\n            // Deal with position\r\n            // const bounds = target.globalBounds();\r\n            // htmlElement.style.top = (bounds.top) + \"px\";\r\n            // htmlElement.style.left = (bounds.left) + \"px\";\r\n            let pos = {\r\n                x: target.x() + target.get(\"dx\", 0),\r\n                y: target.y() + target.get(\"dy\", 0)\r\n            };\r\n            if (target.parent) {\r\n                pos = target.parent.toGlobal(pos);\r\n            }\r\n            htmlElement.style.top = pos.y + \"px\";\r\n            htmlElement.style.left = pos.x + \"px\";\r\n            // Use width/height if those are set\r\n            const width = target.get(\"width\");\r\n            const height = target.get(\"height\");\r\n            let w = 0;\r\n            let h = 0;\r\n            if (width) {\r\n                w = target.width();\r\n            }\r\n            if (height) {\r\n                h = target.height();\r\n            }\r\n            if (!width || !height) {\r\n                htmlElement.style.position = \"fixed\";\r\n                htmlElement.style.width = \"\";\r\n                htmlElement.style.height = \"\";\r\n                const bbox = htmlElement.getBoundingClientRect();\r\n                htmlElement.style.position = \"absolute\";\r\n                if (!width)\r\n                    w = bbox.width;\r\n                if (!height)\r\n                    h = bbox.height;\r\n                let lw = w / scale;\r\n                let lh = h / scale;\r\n                let cx = target.get(\"centerX\", 0);\r\n                let cy = target.get(\"centerY\", 0);\r\n                let ll = 0;\r\n                let lr = 0;\r\n                let lt = 0;\r\n                let lb = 0;\r\n                if (cx instanceof Percent) {\r\n                    ll = -cx.value * lw;\r\n                    lr = (1 - cx.value) * lw;\r\n                }\r\n                else {\r\n                    ll = -cx;\r\n                    lr = lw - cx;\r\n                }\r\n                if (cy instanceof Percent) {\r\n                    lt = -cy.value * lh;\r\n                    lb = (1 - cy.value) * lh;\r\n                }\r\n                else {\r\n                    lt = -cy;\r\n                    lb = lh - cy;\r\n                }\r\n                target._localBounds = { left: ll, right: lr, top: lt, bottom: lb };\r\n                let previousBounds = target._adjustedLocalBounds;\r\n                let newBounds = target._display.getAdjustedBounds(target._localBounds);\r\n                target._adjustedLocalBounds = newBounds;\r\n                // compare each value of the bounds\r\n                if (previousBounds.left !== newBounds.left || previousBounds.right !== newBounds.right || previousBounds.top !== newBounds.top || previousBounds.bottom !== newBounds.bottom) {\r\n                    target.markDirtyBounds();\r\n                }\r\n            }\r\n            if (w > 0) {\r\n                htmlElement.style.minWidth = (w) + \"px\";\r\n            }\r\n            if (h > 0) {\r\n                htmlElement.style.minHeight = (h) + \"px\";\r\n            }\r\n            // Hide or show\r\n            if (!visible || opacity == 0) {\r\n                htmlElement.style.display = \"none\";\r\n            }\r\n            // Center position\r\n            const x = target.get(\"centerX\", 0);\r\n            const originX = isPercent(x) ? x.percent + \"%\" : x + \"px\";\r\n            const y = target.get(\"centerY\", 0);\r\n            const originY = isPercent(y) ? y.percent + \"%\" : y + \"px\";\r\n            if (x || y) {\r\n                htmlElement.style.transform = \"translate(-\" + originX + \", -\" + originY + \")\" + htmlElement.style.transform;\r\n            }\r\n            // Deal with scale\r\n            if (scale != 1) {\r\n                htmlElement.style.transform += \"scale(\" + scale + \")\";\r\n            }\r\n            if (rotation != 0) {\r\n                htmlElement.style.transform += \" rotate(\" + rotation + \"deg)\";\r\n            }\r\n            if (htmlElement.style.transform != \"\") {\r\n                htmlElement.style.transformOrigin = originX + \" \" + originY;\r\n                //htmlElement.style.transformOrigin = \"0% 0%\";\r\n            }\r\n        }\r\n    }\r\n    _setHTMLContent(target, html) {\r\n        let htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (!htmlElement) {\r\n            htmlElement = this._makeHTMLElement(target);\r\n            if (!this.autoResize) {\r\n                this.resize();\r\n            }\r\n        }\r\n        if (htmlElement.innerHTML != html) {\r\n            htmlElement.innerHTML = html;\r\n        }\r\n    }\r\n    _removeHTMLContent(target) {\r\n        const htmlElementWrapper = target.getPrivate(\"htmlElementWrapper\");\r\n        const htmlElement = target.getPrivate(\"htmlElement\");\r\n        if (htmlElementWrapper) {\r\n            this._htmlElementContainer.removeChild(htmlElementWrapper);\r\n            target.removePrivate(\"htmlElement\");\r\n            target.removePrivate(\"htmlElementWrapper\");\r\n            target.removePrivate(\"wrapperContainer\");\r\n        }\r\n        else if (htmlElement) {\r\n            this._htmlElementContainer.removeChild(htmlElement);\r\n            target.removePrivate(\"htmlElement\");\r\n            target.removePrivate(\"wrapperContainer\");\r\n        }\r\n        $array.remove(this._htmlEnabledContainers, target);\r\n    }\r\n}\r\n//# sourceMappingURL=Root.js.map","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Root as a,addLicense as s}from\"@amcharts/amcharts5/index.js\";import\"../../intl.js\";import{getLocale as t,getLocaleLanguage as r}from\"../../intl/locale.js\";s(\"AM5C241025748\");const c=\"en-US\",m=new Map([[\"ar\",()=>import(\"@amcharts/amcharts5/locales/ar.js\")],[\"bg-BG\",()=>import(\"@amcharts/amcharts5/locales/bg_BG.js\")],[\"bs-BA\",()=>import(\"@amcharts/amcharts5/locales/bs_BA.js\")],[\"ca-ES\",()=>import(\"@amcharts/amcharts5/locales/ca_ES.js\")],[\"cs-CZ\",()=>import(\"@amcharts/amcharts5/locales/cs_CZ.js\")],[\"da-DK\",()=>import(\"@amcharts/amcharts5/locales/da_DK.js\")],[\"de-DE\",()=>import(\"@amcharts/amcharts5/locales/de_DE.js\")],[\"de-CH\",()=>import(\"@amcharts/amcharts5/locales/de_CH.js\")],[\"el-GR\",()=>import(\"@amcharts/amcharts5/locales/el_GR.js\")],[\"en-US\",()=>import(\"@amcharts/amcharts5/locales/en_US.js\")],[\"en-CA\",()=>import(\"@amcharts/amcharts5/locales/en_CA.js\")],[\"es-ES\",()=>import(\"@amcharts/amcharts5/locales/es_ES.js\")],[\"et-EE\",()=>import(\"@amcharts/amcharts5/locales/et_EE.js\")],[\"fi-FI\",()=>import(\"@amcharts/amcharts5/locales/fi_FI.js\")],[\"fr-FR\",()=>import(\"@amcharts/amcharts5/locales/fr_FR.js\")],[\"he-IL\",()=>import(\"@amcharts/amcharts5/locales/he_IL.js\")],[\"hr-HR\",()=>import(\"@amcharts/amcharts5/locales/hr_HR.js\")],[\"hu-HU\",()=>import(\"@amcharts/amcharts5/locales/hu_HU.js\")],[\"id-ID\",()=>import(\"@amcharts/amcharts5/locales/id_ID.js\")],[\"it-IT\",()=>import(\"@amcharts/amcharts5/locales/it_IT.js\")],[\"ja-JP\",()=>import(\"@amcharts/amcharts5/locales/ja_JP.js\")],[\"ko-KR\",()=>import(\"@amcharts/amcharts5/locales/ko_KR.js\")],[\"lt-LT\",()=>import(\"@amcharts/amcharts5/locales/lt_LT.js\")],[\"lv-LV\",()=>import(\"@amcharts/amcharts5/locales/lv_LV.js\")],[\"no-NO\",()=>import(\"@amcharts/amcharts5/locales/nb_NO.js\")],[\"nb-NO\",()=>import(\"@amcharts/amcharts5/locales/nb_NO.js\")],[\"nl-NL\",()=>import(\"@amcharts/amcharts5/locales/nl_NL.js\")],[\"pl-PL\",()=>import(\"@amcharts/amcharts5/locales/pl_PL.js\")],[\"pt-BR\",()=>import(\"@amcharts/amcharts5/locales/pt_BR.js\")],[\"pt-PT\",()=>import(\"@amcharts/amcharts5/locales/pt_PT.js\")],[\"ro-RO\",()=>import(\"@amcharts/amcharts5/locales/ro_RO.js\")],[\"ru-RU\",()=>import(\"@amcharts/amcharts5/locales/ru_RU.js\")],[\"sk-SK\",()=>import(\"@amcharts/amcharts5/locales/sk_SK.js\")],[\"sl-SL\",()=>import(\"@amcharts/amcharts5/locales/sl_SL.js\")],[\"sr-RS\",()=>import(\"@amcharts/amcharts5/locales/sr_RS.js\")],[\"sv-SE\",()=>import(\"@amcharts/amcharts5/locales/sv_SE.js\")],[\"th-TH\",()=>import(\"@amcharts/amcharts5/locales/th_TH.js\")],[\"tr-TR\",()=>import(\"@amcharts/amcharts5/locales/tr_TR.js\")],[\"uk-UA\",()=>import(\"@amcharts/amcharts5/locales/uk_UA.js\")],[\"vi-VN\",()=>import(\"@amcharts/amcharts5/locales/vi_VN.js\")],[\"zh-CN\",()=>import(\"@amcharts/amcharts5/locales/zh_Hans.js\")],[\"zh-HK\",()=>import(\"@amcharts/amcharts5/locales/zh_Hant.js\")],[\"zh-TW\",()=>import(\"@amcharts/amcharts5/locales/zh_Hant.js\")]]);function l(a){const s=r(a);if(!s)return null;for(const t of m.keys()){if(r(t)===s)return t}return null}function o(a){return a?m.has(a)?a:l(a)??c:c}async function h(s,r=t()){const c=a.new(s);return c.locale=(await m.get(o(r))()).default,c}export{h as createRoot};\n"],"names":["Native","entries","$array.each","entry","x","target","callback","$array.keepIf","Raf","lastTime","loop","currentTime","newSize","size","observer","makeSensor","ResizeSensor","element","$utils.onZoom","InterfaceColors","Entity","NumberFormatter","bns","sns","bs","value","format","precision","$type.isString","formatted","source","$type.isObject","$utils.cleanFormat","info","details","$object.copy","$type.PLACEHOLDER","language","thousandSeparator","decimalSeparator","$type.PLACEHOLDER2","parts","$object.each","_part","item","partFormat","chunks","TextFormatter","i","chunk","matches","mods","a","b","negative","prefix","suffix","ol","exp","decimals","$utils.decimalPlaces","d","res","$type.numberToString","ints","ip","intsr","len","c","decs","prefixes","force","newvalue","applied","k","text","parseDate","timezone","date","year","month","day","hour","minute","second","millisecond","weekday","toUTCDate","Timezone","isReal","offset","userOffset","output","newUserOffset","utc","dtf","DateFormatter","ignoreTimezone","locales","originalDate","$type.isNumber","fullYear","hours","minutes","seconds","milliseconds","timestamp","$utils.getWeekYear","$utils.padString","$utils.getWeek","$utils.getMonthWeek","$utils.getYearDay","$utils.get12Hours","$utils.getTimeZone","$utils.getTimezoneOffset","tz","tzh","tzm","dateFormat","index","reg","parsedIndexes","resValues","indexAdjust","regex","val","$utils.getDayFromWeek","ts","$type.toNumber","zone","match","dir","originalOffset","list","$utils.escapeForRgex","DurationFormatter","dmillisecond","dsecond","dminute","dhour","dday","dweek","dmonth","dyear","asecond","aminute","ahour","aday","aweek","amonth","ayear","base","baseUnit","dirs","tstamp","values","part","unit","unitValue","digits","code","maxValue","maxUnit","currentUnit","ms","$object.eachContinue","key","timeUnit","en","Language","prompt","locale","rest","translation","localeTarget","translations","$array.map","Matrix","tx","ty","y","pivotX","pivotY","rotation","scale","origin","id","matrix","a1","b1","c1","d1","tx1","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","_s","err","TAU","mapToEllipse","_ref","rx","ry","cosphi","sinphi","centerx","centery","xp","yp","approxUnitArc","ang1","ang2","x1","y1","x2","y2","vectorAngle","ux","uy","vx","vy","sign","dot","getArcCenter","px","py","cx","cy","largeArcFlag","sweepFlag","pxp","pyp","rxsq","rysq","pxpsq","pypsq","radicant","centerxp","centeryp","vx1","vy1","vx2","vy2","arcToBezier","_ref2","_ref2$xAxisRotation","xAxisRotation","_ref2$largeArcFlag","_ref2$sweepFlag","curves","lambda","_getArcCenter","_getArcCenter2","ratio","segments","curve","_mapToEllipse","_mapToEllipse2","_mapToEllipse3","checkArgs","name","actual","expected","checkMinArgs","checkEvenArgs","splitArcFlags","args","flag","assertBinary","distributeId","rgb","eachTargets","hitTarget","f","onPointerEvent","$utils.addEventListener","$utils.getRendererEvent","event","$utils.getEventTarget","touches","$array.copy","isTainted","image","canvas","context","clearCanvas","view","crisp","CanvasPivot","CanvasDisplayObject","DisposerClass","renderer","status","self","order","margin","$utils.setInteractive","_bounds","child","point","bounds","p0","p1","p2","p3","Disposer","resolution","m","layer","targetGhostLayer","subStatus","layers","ghostLayer","ghostContext","mask","$array.move","_targetGhostLayer","interactive","CanvasContainer","$array.removeFirst","$array.pushOne","deep","setPoint","Op","_context","_forceColor","forceColor","BeginPath","BeginFill","color","EndFill","clearShadow","EndStroke","LineStyle","width","lineJoin","lineCap","LineDash","dash","LineDashOffset","dashOffset","DrawRect","height","l","t","DrawCircle","radius","DrawEllipse","radiusX","radiusY","Arc","startAngle","endAngle","anticlockwise","arcBounds","$math.getArcBounds","$math.DEGREES","ArcTo","LineTo","MoveTo","ClosePath","BezierCurveTo","cpX","cpY","cpX2","cpY2","toX","toY","QuadraticCurveTo","Shadow","blur","offsetX","offsetY","opacity","GraphicsImage","CanvasGraphics","BlendMode","op","alpha","Color","path","cpx","cpy","qcpx","qcpy","SEGMENTS_REGEXP","ARGS_REGEXP","relative","layerDirty","ghostOnly","drawGhost","CanvasText","style","ignoreGhost","ignoreFontWeight","fontStyle","style2","line","_index","thickness","fontSize","oversizedBehavior","metrics","rtl","maxWidth","truncate","wrap","refText","lines","styleRestored","minX","maxX","currentStyle","lineInfo","currentFormat","currentDecoration","currentFill","currentChunkWidth","skipFurtherText","firstTextChunk","leftoverChunks","currentVerticalAlign","$array.eachContinue","chunkWidth","breakWords","ellipsis","ellipsisMetrics","ellipsisWidth","excessWidth","tmpText","$utils.trim","leftBoundMod","rightBoundMod","boundsMod","chunkHeight","Percent","currentChunkOffset","maxW","maxH","w","h","fallbackBreakWords","tmp","fakeMetrics","div","bbox","CanvasTextStyle","percent","CanvasRadialText","deltaAngle","orientation","inward","inside","align","kerning","clockwise","shouldReverse","maxAngle","midAngle","$math.normalizeAngle","textHeight","lineStartAngle","angleShift","char","charWidth","totalWidth","chars","$utils.splitString","CanvasImage","CanvasRendererEvent","originalPoint","$utils.supports","CanvasRenderer","ArrayDisposer","GhostLayer","_key","events","listener","ev","_ev","prevent","obj","radius1","radius2","graphics","background","repetition","realWidth","realHeight","calculatedWidth","calculatedHeight","willReadFrequently","CanvasLayer","length","visible","existingLayer","layerIndex","$array.indexOf","next","root","deferredGhostLayers","layerx","native","originalEvent","adjustPoint","widthScale","heightScale","pixel","colorId","data","dispatched","originalTarget","button","dragged","$utils.setStyle","$utils.getStyle","clickevent","CounterDisposer","timer","clear","MultiDisposer","_","mouseup","pointercancel","mousedown","mousemove","object","options","canvasWidth","canvasHeight","minScale","maxScale","canvases","forceRender","needRerender","extraX","extraY","domWidth","domHeight","rAF","fps","Root","settings","EventDispatcher","VerticalLayout","HorizontalLayout","GridLayout","$utils.getSafeResolution","dom","registry","inner","tooltipContainerBounds","logo","Container","p100","Rectangle","Graphics","rect","rootContainer","DefaultTheme","container","htmlElementContainer","readerAlertElement","focusElementContainer","tooltipElementContainer","eventKey","$utils.getEventKey","focusedSprite","announceText","downEvent","$utils.blur","dragOffsetX","dragOffsetY","dragPoint","moveEvent","upEvent","group","items","lastIndex","$utils.focus","tooltip","Tooltip","running","animation","state","AnimationState","allParents","$object.keys","parent","objects","entity","depths","$order.compare","dirtyPositions","sprite","animationDone","now","timeout","endTime","$utils.removeElement","$array.remove","$utils.stripTags","themes","tooltipContainer","interfaceColors","tooltipContainerSettings","aindex","bindex","groups","focusElement","role","ariaLabel","label","populateString","ariaLive","ariaChecked","ariaCurrent","ariaSelected","ariaOrientation","ariaValueNow","ariaValueMin","ariaValueMax","ariaValueText","ariaControls","disposers","padding","found","focused","el","direction","focusableElements","targetElement","tooltipElement","scaleWidth","scaleHeight","disposer","styles","fontHash","changed","Text","htmlElement","needWrapper","wrapperTarget","htmlElementWrapper","setting","pos","lw","lh","ll","lr","lt","lb","previousBounds","newBounds","originX","isPercent","originY","html","s","r","o"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12]}