import{hB as mt,az as h,aI as I,hs as lt,aB as dt,e0 as Mt}from"./main-6gYsRPh_.js";import{p as _t}from"./mat4-BV6dbHOa.js";import{s as T,c as g,P as O,u as b,g as p,_ as V,A as z,r as l,o as P,v as pt,p as B,I as Pt,E as k,j as Ct,q as At}from"./vec32-y2_p7lFt.js";import{r as St}from"./vec4f64-DD-nkcCV.js";import{c as f,a as bt,b as qt}from"./vectorStacks-CyMHHyHf.js";class L{constructor(n){this._allocator=n,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&mt(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const n=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*N);this._items.length=Math.min(n,this._items.length),this._itemsPtr=0}_grow(){for(let n=0;n<Math.max(8,Math.min(this._items.length,N));n++)this._items.push(this._allocator())}}const N=1024;function C(t){return t?U(I(t.origin),I(t.direction)):U(h(),h())}function U(t,n){return{origin:t,direction:n}}function yt(t,n){const r=Tt.get();return r.origin=t,r.direction=n,r}function Rt(t,n=C()){return H(t.origin,t.direction,n)}function D(t,n,r=C()){return T(r.origin,t),g(r.direction,n,t),r}function H(t,n,r=C()){return T(r.origin,t),T(r.direction,n),r}function wt(t,n){const r=V(f.get(),z(f.get(),t.direction),g(f.get(),n,t.origin));return O(r,r)}function xt(t,n,r){const i=O(t.direction,g(r,n,t.origin));return b(r,t.origin,p(r,t.direction,i)),r}const Tt=new L(()=>C());function J(t,n){const r=l(t),i=lt(t[2]/r),s=Math.atan2(t[1]/r,t[0]/r);return P(n,r,i,s),n}const K=A();function d(t,n,r,i){return new Array(t,n,r,i)}function A(){return d(0,0,0,0)}function Q(t,n){return d(t[0],t[1],t[2],n)}function X(t){return d(t[0],t[1],t[2],t[3])}function j(t,n,r){return $(t,n[0],n[1],n[2],r)}function $(t,n,r,i,s){return t[0]=n,t[1]=r,t[2]=i,t[3]=s,t}function G(t,n){return W(t,n)}function W(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function S(t,n){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Vt(t){return d(t[0],t[1],t[2],t[3])}function jt(t){t[0]=0,t[1]=0,t[2]=0,t[3]=0}function Y(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=n,t}function M(t){return t[3]}function q(t,n){return P(n,t[0],t[1],t[2])}function a(t){return P(x,t[0],t[1],t[2])}function v(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2]}function Z(t,n){t[0]=n[0],t[1]=n[1],t[2]=n[2]}function vt(t,n,r,i){t[0]=n,t[1]=r,t[2]=i}function tt(t,n,r){v(t,k(x,n,r))}function Et(t,n,r,i,s){t[0]=n,t[1]=r,t[2]=i,t[3]=s}function nt(t){return St(t[0],t[1],t[2],t[3])}function Ft(t,n,r){return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=t[3]+n,r}function It(t,n,r){return t!==r&&S(t,r),r}function Ot(t,n){return n}function y(t,n,r){if(n==null||!it(t,n,R))return!1;let{t0:i,t1:s}=R;if((i<0||s<i&&s>0)&&(i=s),i<0)return!1;if(r){const{origin:o,direction:e}=n;r[0]=o[0]+e[0]*i,r[1]=o[1]+e[1]*i,r[2]=o[2]+e[2]*i}return!0}function rt(t,n,r){const i=D(n,r);if(!it(t,i,R))return[];const{origin:s,direction:o}=i,{t0:e,t1:c}=R,u=m=>{const _=h();return At(_,s,o,m),w(t,_,_)};return Math.abs(e-c)<dt()?[u(e)]:[u(e),u(c)]}const R={t0:0,t1:0};function it(t,n,r){const{origin:i,direction:s}=n,o=zt;o[0]=i[0]-t[0],o[1]=i[1]-t[1],o[2]=i[2]-t[2];const e=s[0]*s[0]+s[1]*s[1]+s[2]*s[2];if(e===0)return!1;const c=2*(s[0]*o[0]+s[1]*o[1]+s[2]*o[2]),u=c*c-4*e*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(u<0)return!1;const m=Math.sqrt(u);return r.t0=(-c-m)/(2*e),r.t1=(-c+m)/(2*e),!0}const zt=h();function st(t,n){return y(t,n,null)}function Bt(t,n,r){if(y(t,n,r))return r;const i=ot(t,n,f.get());return b(r,n.origin,p(f.get(),n.direction,B(n.origin,i)/l(n.direction))),r}function ot(t,n,r){const i=f.get(),s=bt.get();V(i,n.origin,n.direction);const o=M(t);V(r,i,n.origin),p(r,r,1/l(r)*o);const e=ct(t,n.origin),c=qt(n.origin,r);return _t(s,c+e,i),k(r,r,s),r}function et(t,n,r,i){const s=M(t),o=s*s,e=n+.5*Math.PI,c=r*r+o-2*Math.cos(e)*r*s,u=Math.sqrt(c),m=c-o;if(m<=0)return .5;const _=Math.sqrt(m),gt=Math.acos(_/u)-Math.asin(s/(u/Math.sin(e)));return Math.min(1,(gt+.5*i)/i)}function kt(t,n,r){return y(t,n,r)?r:(xt(n,a(t),r),w(t,r,r))}function w(t,n,r){const i=g(f.get(),n,a(t)),s=p(f.get(),i,t[3]/l(i));return b(r,s,a(t))}function Lt(t,n){const r=g(f.get(),n,a(t)),i=Ct(r),s=t[3]*t[3];return Math.sqrt(Math.abs(i-s))}function ct(t,n){const r=g(f.get(),n,a(t)),i=l(r),s=M(t),o=s+Math.abs(s-i);return Mt(s/o)}const E=h();function ut(t,n,r,i){const s=g(E,n,a(t));switch(r){case 0:{const o=J(s,E)[2];return P(i,-Math.sin(o),Math.cos(o),0)}case 1:{const o=J(s,E),e=o[1],c=o[2],u=Math.sin(e);return P(i,-u*Math.cos(c),-u*Math.sin(c),Math.cos(e))}case 2:return z(i,s);default:return}}function at(t,n){const r=g(F,n,a(t));return l(r)-t[3]}function Nt(t,n,r,i){const s=at(t,n),o=ut(t,n,2,F),e=p(F,o,r-s);return b(i,n,e)}function ft(t,n){const r=pt(a(t),n),i=M(t);return r<=i*i}function Ut(t,n,r=A()){const i=B(a(t),q(n,ht)),s=t[3],o=n[3];return i+o<s?(S(t,r),r):i+s<o?(S(n,r),r):(Pt(x,a(t),q(n,ht),(i+o-s)/(2*i)),j(r,x,(i+s+o)/2),r)}const x=h(),ht=h(),Dt=A(),F=h(),Ht=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:K,altitudeAt:at,angleToSilhouette:ct,axisAt:ut,cameraFrustumCoverage:et,clear:jt,clone:Vt,closestPoint:kt,closestPointOnSilhouette:ot,containsPoint:ft,copy:S,copyCenter:Z,create:A,distanceToSilhouette:Lt,elevate:Ft,equals:W,exactEquals:G,fromCenterAndRadius:Q,fromRadius:Y,fromValues:d,fromVec4:X,getCenter:q,getCenterTemp:a,getExtent:Ot,getRadius:M,intersectLine:rt,intersectRay:y,intersectRayClosestSilhouette:Bt,intersectsRay:st,projectPoint:w,set:$,setAltitudeAt:Nt,setCenter:v,setCenterFromValues:vt,setExtent:It,setFromCenterAndRadius:j,setFromValues:Et,setTransformedCenter:tt,tmpSphere:Dt,toVec4:nt,union:Ut},Symbol.toStringTag,{value:"Module"}));export{d as A,tt as D,nt as H,a as I,M as L,v as N,S as O,A as P,X as R,K as S,G as T,Z as U,j as V,rt as X,H as a,C as b,w as c,Y as d,et as e,D as f,Ht as j,yt as k,ft as l,Q as q,L as s,st as t,Rt as v,wt as w,q as z};
