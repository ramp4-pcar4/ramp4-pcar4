import{iQ as B,iZ as Q,_ as e,X as i,Y as D,N as Z,dH as G,bH as S,by as R,Z as k,aQ as H,s as X,a5 as ee,G as te,bF as ie,au as oe}from"./main-6gYsRPh_.js";import{s as re,o as ne}from"./GraphicOrigin-kPrZ4_IZ.js";import ae from"./FeatureLayer-D1M--Gf7.js";import{f as se}from"./TemporalLayer-D643DQHh.js";import{c as pe}from"./OperationalLayer-DDl4hP22.js";const le=Symbol("isOrientedImageryGraphicOrigin");var Y;let ye=class extends re{get[(Y=le,B)](){return this.layer}get[Q](){return this.layer}get[ne](){return this.layer}constructor(t){super(),this[Y]=!0,this.type="oriented-imagery",this.layer=t}get id(){return this.layer.id}},v=class extends Z{set horizontalWKID(t){t?G({wkid:+t})?this._set("horizontalWKID",+t):this._set("horizontalWKID",t):this._set("horizontalWKID",null)}set verticalWKID(t){t?this._set("verticalWKID",isFinite(t)&&G({wkid:+t})?+t:null):this._set("verticalWKID",null)}get isAdvanced(){const{affineTransformations:t,focalLength:o,principalOffsetPoint:r,radialDistortionCoefficients:s,tangentialDistortionCoefficients:p}=this;return t?.length>1&&!Number.isNaN(o)&&r?.length>1&&s?.length>1&&p?.length>1}};e([i({json:{write:!0}})],v.prototype,"affineTransformations",void 0),e([i({json:{write:!0}})],v.prototype,"focalLength",void 0),e([i({json:{write:!0}})],v.prototype,"principalOffsetPoint",void 0),e([i({json:{write:!0}})],v.prototype,"radialDistortionCoefficients",void 0),e([i({json:{write:!0}})],v.prototype,"tangentialDistortionCoefficients",void 0),e([i({json:{write:!0}})],v.prototype,"horizontalWKID",null),e([i({json:{write:!0}})],v.prototype,"verticalWKID",null),e([i({json:{write:!0}})],v.prototype,"x",void 0),e([i({json:{write:!0}})],v.prototype,"y",void 0),e([i({json:{write:!0}})],v.prototype,"z",void 0),e([i({json:{write:!0}})],v.prototype,"type",void 0),v=e([D("esri.layers.orientedImagery.core.CameraOrientation")],v);const V=v;let f=class extends S(R(V)){constructor(){super(...arguments),this.type=1}toString(){const{type:t,horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,heading:c,pitch:u,roll:m,affineTransformations:w,focalLength:b,principalOffsetPoint:j,radialDistortionCoefficients:P,tangentialDistortionCoefficients:N}=this,y=[t,o,r,s,p,d,c,u,m];return this.isAdvanced&&(w?.forEach(a=>y.push(a)),y.push(b),j?.forEach(a=>y.push(a)),P?.forEach(a=>y.push(a)),N?.forEach(a=>y.push(a))),y.map(a=>Number.isNaN(a)?"":a).join("|")}};e([i({json:{write:!0}})],f.prototype,"type",void 0),e([i({type:[Number],json:{write:!0}})],f.prototype,"affineTransformations",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"focalLength",void 0),e([i({type:[Number],json:{write:!0}})],f.prototype,"principalOffsetPoint",void 0),e([i({type:[Number],json:{write:!0}})],f.prototype,"radialDistortionCoefficients",void 0),e([i({type:[Number],json:{write:!0}})],f.prototype,"tangentialDistortionCoefficients",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"heading",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"pitch",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"roll",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"x",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"y",void 0),e([i({type:Number,json:{write:!0}})],f.prototype,"z",void 0),f=e([D("esri.layers.orientedImagery.core.CameraOrientationHPR")],f);const de=f;let I=class extends S(R(V)){constructor(){super(...arguments),this.type=4}toString(){const{type:t,latitude:o,longitude:r,ellipsoidRadius:s,squaredEccentricity:p,properties:d}=this,c=`${d}`.split("|");return c.splice(1,1),`${t}|${o}|${r}|${s}|${p}|${c.join("|")}`}};e([i({json:{write:!0}})],I.prototype,"type",void 0),e([i({json:{write:!0},type:Number})],I.prototype,"latitude",void 0),e([i({json:{write:!0},type:Number})],I.prototype,"longitude",void 0),e([i({json:{write:!0},type:Number})],I.prototype,"ellipsoidRadius",void 0),e([i({json:{write:!0},type:Number})],I.prototype,"squaredEccentricity",void 0),e([i({json:{write:!0}})],I.prototype,"properties",void 0),I=e([D("esri.layers.orientedImagery.core.CameraOrientationLTP")],I);const ce=I;let h=class extends S(R(V)){constructor(){super(...arguments),this.type=2}toString(){const{type:t,horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,omega:c,phi:u,kappa:m,affineTransformations:w,focalLength:b,principalOffsetPoint:j,radialDistortionCoefficients:P,tangentialDistortionCoefficients:N}=this,y=[t,o,r,s,p,d,c,u,m];return this.isAdvanced&&(w?.forEach(a=>y.push(a)),y.push(b),j?.forEach(a=>y.push(a)),P?.forEach(a=>y.push(a)),N?.forEach(a=>y.push(a))),y.map(a=>isNaN(a)?"":a).join("|")}};e([i({json:{write:!0}})],h.prototype,"type",void 0),e([i({type:[Number],json:{write:!0}})],h.prototype,"affineTransformations",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"focalLength",void 0),e([i({type:[Number],json:{write:!0}})],h.prototype,"principalOffsetPoint",void 0),e([i({type:[Number],json:{write:!0}})],h.prototype,"radialDistortionCoefficients",void 0),e([i({type:[Number],json:{write:!0}})],h.prototype,"tangentialDistortionCoefficients",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"omega",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"phi",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"kappa",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"x",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"y",void 0),e([i({type:Number,json:{write:!0}})],h.prototype,"z",void 0),h=e([D("esri.layers.orientedImagery.core.CameraOrientationOPK")],h);const ue=h;let g=class extends S(R(V)){constructor(){super(...arguments),this.type=3}get isAdvanced(){const{affineTransformations:t,focalLength:o,principalOffsetPoint:r,radialDistortionCoefficients:s,tangentialDistortionCoefficients:p}=this;return t?.length>1||!Number.isNaN(o)||r?.length>1||s?.length>1||p?.length>1}toString(){const{type:t,horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,yaw:c,pitch:u,roll:m,affineTransformations:w,focalLength:b,principalOffsetPoint:j,radialDistortionCoefficients:P,tangentialDistortionCoefficients:N}=this,y=[t,o,r,s,p,d,c,u,m];return this.isAdvanced&&(w?.forEach(a=>y.push(a)),y.push(b),j?.forEach(a=>y.push(a)),j?.forEach(a=>y.push(a)),P?.forEach(a=>y.push(a)),N?.forEach(a=>y.push(a))),y.map(a=>Number.isNaN(a)?"":a).join("|")}};e([i({json:{write:!0}})],g.prototype,"type",void 0),e([i({type:[Number],json:{write:!0}})],g.prototype,"affineTransformations",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"focalLength",void 0),e([i({type:[Number],json:{write:!0}})],g.prototype,"principalOffsetPoint",void 0),e([i({type:[Number],json:{write:!0}})],g.prototype,"radialDistortionCoefficients",void 0),e([i({type:[Number],json:{write:!0}})],g.prototype,"tangentialDistortionCoefficients",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"yaw",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"pitch",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"roll",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"x",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"y",void 0),e([i({type:Number,json:{write:!0}})],g.prototype,"z",void 0),g=e([D("esri.layers.orientedImagery.core.CameraOrientationYPR")],g);const me=g,W=new Map;W.set("2",{desc:"Using Omega Phi Kappa",constructor:ue}),W.set("1",{desc:"Using Heading, Pitch and Roll",constructor:de}),W.set("3",{desc:"Using Yaw, Pitch and Roll",constructor:me}),W.set("4",{desc:"Using Local Tangent Plane",constructor:ce});let x=class extends S(k){constructor(){super(...arguments),this.url=null}};e([i({type:Number,json:{write:!0}})],x.prototype,"lod",void 0),e([i({type:String,json:{write:!0}})],x.prototype,"rasterFunction",void 0),e([i({type:String,json:{write:!0}})],x.prototype,"url",void 0),x=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ElevationSource")],x);let U=class extends S(k){constructor(){super(...arguments),this.constantElevation=null}};e([i({type:Number,json:{write:!0}})],U.prototype,"constantElevation",void 0),U=e([D("esri.layers.orientedImagery.core.ElevationSourceDefinitions.ConstantElevation")],U);const fe=t=>t!=null&&typeof t.constantElevation=="number";function he(t,o,r){return o&&(t=`${o}${t}`),r&&(t+=`${r}`),t}function ge(t,o,r){let{url:s}=t;return s?(s=he(s,o,r),new x({...t,url:s})):null}function ve(t,o,r){return t&&(fe(t)?new U(t):ge(t,o,r))}const A=new H({Minutes:"minutes",Hours:"hours",Days:"days",Weeks:"weeks",Months:"months",Years:"years"}),$=new H({Feet:"feet",Meter:"meter"}),q=new H({360:"360",Horizontal:"horizontal",Inspection:"inspection",Nadir:"nadir",Oblique:"oblique",Terrestrial360Video:"terrestrial-360-video",TerrestrialFrameVideo:"terrestrial-frame-video",Aerial360Video:"aerial-360-video",AerialFrameVideo:"aerial-frame-video","":null}),L=new Map;function je(t){const[o,r,s,p,d,c,u,m,w,b,j,P,N,y,a,O,T,C,F,z,E,K]=t.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,omega:c,phi:u,kappa:m,..._([w,b,j,P,N,y],[O,T],[C,F,z],[E,K],a)}}L.set("1",we),L.set("3",be),L.set("2",je),L.set("4",Pe);const M=t=>{const o=t.map(r=>parseFloat(r)).filter(r=>!isNaN(r));if(o.length===t.length)return o};function _(t,o,r,s,p){const d=M(t),c=M(o),u=M(r),m=M(s);return{affineTransformations:d?.length===6?d:void 0,focalLength:d?.length===6?parseFloat(p):void 0,principalOffsetPoint:c?.length!==2?[0,0]:c,radialDistortionCoefficients:u?.length!==3?[0,0,0]:u,tangentialDistortionCoefficients:m?.length!==2?[0,0]:m}}function we(t){const[o,r,s,p,d,c,u,m,w,b,j,P,N,y,a,O,T,C,F,z,E,K]=t.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,heading:c,pitch:u,roll:m,..._([w,b,j,P,N,y],[O,T],[C,F,z],[E,K],a)}}function be(t){const[o,r,s,p,d,c,u,m,w,b,j,P,N,y,a,O,T,C,F,z,E,K]=t.slice(1);return{horizontalWKID:o,verticalWKID:r,x:s,y:p,z:d,yaw:c,pitch:u,roll:m,..._([w,b,j,P,N,y],[O,T],[C,F,z],[E,K],a)}}function Pe(t){const[o,r,s,p,d,...c]=t.slice(1),u=L.get(d),m=W.get(d)?.constructor;return!u||!m?null:{latitude:o,longitude:r,ellipsoidRadius:s,squaredEccentricity:p,properties:new m(u([d,"",...c]))}}function Ne(t){return Array.isArray(t)&&t?.length>5&&!t.some(isNaN)}function Ie(t){for(t=t.slice(0,8);t.length<8;)t.push(0);return t}const De=new Set(["demPathPrefix","demPathSuffix","depthImagePathPrefix","depthImagePathSuffix","elevationSource","horizontalMeasurementUnit","imageGeometryField","imageReferenceField","referenceIDField","sequenceOrderField","verticalMeasurementUnit","videoPathPrefix","videoPathSuffix","timeAnimation","visibilityTimeExtent"]),Se=new Set(["elevationSource"]),J=(t,o)=>!De.has(o)&&t,xe=(t,o,r)=>{const s=`orientedImageryProperties.${t}`,p={allowNull:Se.has(t),ignoreOrigin:!0};return{name:s,write:o?{...p,target:s,writer:o}:p,read:r?{ignoreOrigin:!0,source:s,reader:r}:{ignoreOrigin:!0}}};function Oe(t){return t.json&&(t.json.origins=t.json.origins??{},t.json.origins["web-scene"]={write:!1,read:!1}),t}function l(t,o,r,s){const{name:p,write:d,read:c}=xe(t,o,r),u={name:p,write:d,read:c,origins:{service:{name:`orientedImageryInfo.${p}`,write:o,read:r},"web-scene":{name:p,write:J(d,t),read:J(c,t)},"web-map":{name:p,write:d,read:c}}};return s&&u.origins&&(u.type=s,u.origins["web-map"].type=s,u.origins["web-scene"].type=s),u}let n=class extends ae{constructor(t){super(t),this.attributeTableTemplate=null,this.cameraHeading=null,this.cameraHeight=null,this.cameraPitch=null,this.cameraRoll=null,this.coveragePercent=null,this.demPathPrefix=null,this.demPathSuffix=null,this.depthImagePathPrefix=null,this.depthImagePathSuffix=null,this.elevationSource=null,this.farDistance=null,this.geometryType="point",this.graphicOrigin=new ye(this),this.horizontalFieldOfView=null,this.horizontalMeasurementUnit=null,this.imageGeometryField="ImageGeometry",this.imagePathPrefix=null,this.imagePathSuffix=null,this.imageReferenceField="OIObjectID",this.imageRotation=null,this.maximumDistance=null,this.nearDistance=null,this.operationalLayerType="OrientedImageryLayer",this.orientationAccuracy=null,this.orientedImageryType=null,this.referenceIDField="OBJECTID",this.sequenceOrderField="SequenceOrder",this.supportedSourceTypes=new Set(["Oriented Imagery Layer"]),this.type="oriented-imagery",this.timeIntervalUnit="days",this.useViewTime=!0,this.verticalFieldOfView=null,this.verticalMeasurementUnit=null,this.videoPathPrefix=null,this.videoPathSuffix=null,this.virtualCacheDirectory=null,this.visibilityTimeExtent=null}get effectiveElevationSource(){const{elevationSource:t,demPathPrefix:o,demPathSuffix:r}=this;return ve(t,o,r)}set fieldConfigurations(t){}get fieldConfigurations(){}writePopupTemplate(t,o,r,s){t&&(o[r]=t.toJSON(s))}set portalItem(t){super.portalItem=t}async save(t){return this._debouncedSaveOperations(0,t)}async saveAs(t,o){return this._debouncedSaveOperations(1,o,t)}findFirstValidLayerId(t){return t.layers?.find(o=>this.supportedSourceTypes.has(o.type))?.id}_verifySource(){if(super._verifySource(),this.geometryType!=="point")throw new X("oriented-imagery-layer:invalid-geometry-type","OrientedImageryLayer only supports point geometry type")}};e([i({type:pe,json:{write:!1,read:!1}})],n.prototype,"attributeTableTemplate",void 0),e([i({type:Number,json:l("cameraHeading")})],n.prototype,"cameraHeading",void 0),e([i({type:Number,json:l("cameraHeight")})],n.prototype,"cameraHeight",void 0),e([i({type:Number,json:l("cameraPitch")})],n.prototype,"cameraPitch",void 0),e([i({type:Number,json:l("cameraRoll")})],n.prototype,"cameraRoll",void 0),e([i({type:Number,json:l("coveragePercent")})],n.prototype,"coveragePercent",void 0),e([i({type:String,json:l("demPathPrefix")})],n.prototype,"demPathPrefix",void 0),e([i({type:String,json:l("demPathSuffix")})],n.prototype,"demPathSuffix",void 0),e([i({type:String,json:l("depthImagePathPrefix")})],n.prototype,"depthImagePathPrefix",void 0),e([i({type:String,json:l("depthImagePathSuffix")})],n.prototype,"depthImagePathSuffix",void 0),e([i({type:Object,json:l("elevationSource")})],n.prototype,"elevationSource",void 0),e([i({readOnly:!0})],n.prototype,"effectiveElevationSource",null),e([i({type:Number,json:l("farDistance")})],n.prototype,"farDistance",void 0),e([i({json:{write:!1}})],n.prototype,"fieldConfigurations",null),e([i()],n.prototype,"geometryType",void 0),e([i({readOnly:!0,clonable:!1})],n.prototype,"graphicOrigin",void 0),e([i({type:Number,json:l("horizontalFieldOfView")})],n.prototype,"horizontalFieldOfView",void 0),e([i({type:String,json:l("horizontalMeasurementUnit")})],n.prototype,"horizontalMeasurementUnit",void 0),e([i({type:String,json:{...l("imageGeometryField"),default:"ImageGeometry"}})],n.prototype,"imageGeometryField",void 0),e([i({type:String,json:l("imagePathPrefix")})],n.prototype,"imagePathPrefix",void 0),e([i({type:String,json:l("imagePathSuffix")})],n.prototype,"imagePathSuffix",void 0),e([i({type:String,json:{...l("imageReferenceField"),default:"OIObjectID"}})],n.prototype,"imageReferenceField",void 0),e([i({type:Number,json:l("imageRotation")})],n.prototype,"imageRotation",void 0),e([i({type:Number,json:l("maximumDistance")})],n.prototype,"maximumDistance",void 0),e([i({type:Number,json:l("nearDistance")})],n.prototype,"nearDistance",void 0),e([i({type:["OrientedImageryLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],n.prototype,"operationalLayerType",void 0),e([i({json:{...l("orientationAccuracy",(t,o,r)=>{oe(r,t.join(";"),o)},t=>{const o=t?.split(";")?.map(Number);return Ne(o)?Ie(o):[0,0,0,0,0,0,0,0]},String)}})],n.prototype,"orientationAccuracy",void 0),e([i({json:{...l("orientedImageryType",q.write,q.read,q.jsonValues.slice(1))}})],n.prototype,"orientedImageryType",void 0),e([ee("popupTemplate")],n.prototype,"writePopupTemplate",null),e([i({type:String,json:{...l("referenceIDField"),default:"OBJECTID"}})],n.prototype,"referenceIDField",void 0),e([i({type:String,json:{...l("sequenceOrderField"),default:"SequenceOrder"}})],n.prototype,"sequenceOrderField",void 0),e([i({json:{read:!1},value:"oriented-imagery",readOnly:!0})],n.prototype,"type",void 0),e([i({type:A.apiValues,json:{...l("timeIntervalUnit",A.write,A.read,A.jsonValues)}})],n.prototype,"timeIntervalUnit",void 0),e([i(Oe(te(se)))],n.prototype,"useViewTime",void 0),e([i({type:Number,json:l("verticalFieldOfView")})],n.prototype,"verticalFieldOfView",void 0),e([i({type:$.apiValues,json:{...l("verticalMeasurementUnit",$.write,$.read,$.jsonValues)}})],n.prototype,"verticalMeasurementUnit",void 0),e([i({type:String,json:l("videoPathPrefix")})],n.prototype,"videoPathPrefix",void 0),e([i({type:String,json:l("videoPathSuffix")})],n.prototype,"videoPathSuffix",void 0),e([i({type:String,json:{read:!1,write:!1,origins:{service:{name:"orientedImageryInfo.orientedImageryProperties.virtualCacheDirectory",read:!0}}}})],n.prototype,"virtualCacheDirectory",void 0),e([i({type:ie,json:{origins:{"web-scene":{write:!1,read:!1}}}})],n.prototype,"visibilityTimeExtent",void 0),n=e([D("esri.layers.OrientedImageryLayer")],n);const Te=n;export{Te as default};
