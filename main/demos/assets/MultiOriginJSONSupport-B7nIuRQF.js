import{hw as p,L as S,_ as O,Z as f,cb as g,hx as M,hy as w,bq as u,dj as m,V as d,hz as J,hA as N}from"./main-CtmwM019.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(p),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const s=new _,t=this._originStores[0];t&&t.forEach((i,r)=>{s.set(r,S(i),0)});for(let i=2;i<p;i++){const r=this._originStores[i];r&&r.forEach((o,n)=>{e&&e.has(n)||s.set(n,S(o),i)})}return s}get(e,s){const t=s===void 0?this._values:this._originStores[s];return t?t.get(e):void 0}keys(e){const s=e==null?this._values:this._originStores[e];return s?[...s.keys()]:[]}set(e,s,t=7){let i=this._originStores[t];if(i||(i=new Map,this._originStores[t]=i),i.set(e,s),!this._values.has(e)||this._propertyOriginMap.get(e)<=t){const r=this._values.get(e);return this._values.set(e,s),this._propertyOriginMap.set(e,t),r!==s}return!1}delete(e,s=7){const t=this._originStores[s];if(!t)return;const i=t.get(e);if(t.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===s){this._values.delete(e);for(let r=s-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,s){const t=s===void 0?this._values:this._originStores[s];return!!t&&t.has(e)}revert(e,s){for(;s>0&&!this.has(e,s);)--s;const t=this._originStores[s],i=t?.get(e),r=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,s),r!==i}originOf(e){return this._propertyOriginMap.get(e)||0}isAtOrigin(e,s){return this.has(e,s)&&this.originOf(e)===s}isBelowOrigin(e,s){return!this.has(e)||this.originOf(e)<s}forEach(e){this._values.forEach(e)}}const y=h=>{const e=h;let s=class extends e{constructor(...t){super(...t);const i=g(this),r=i.store,o=new _;i.store=o,M(i,r,o)}read(t,i){w(this,t,i)}getAtOrigin(t,i){const r=l(this),o=u(i);if(typeof t=="string")return r.get(t,o);const n={};return t.forEach(a=>{n[a]=r.get(a,o)}),n}originOf(t){return m(this.originIdOf(t))}originIdOf(t){return l(this).originOf(t)}revert(t,i){const r=l(this),o=u(i),n=g(this);let a;a=typeof t=="string"?t==="*"?r.keys(o):[t]:t,a.forEach(c=>{n.invalidate(c),r.revert(c,o),n.commit(c)})}};return s=O([f("esri.core.ReadOnlyMultiOriginJSONSupport")],s),s};function l(h){return g(h).store}y(d);const A=h=>{const e=h;let s=class extends e{constructor(...t){super(...t)}clear(t,i="user"){g(this).clearOrigin(t,u(i))}write(t,i){return J(this,t=t||{},i),t}setAtOrigin(t,i,r){g(this).setAtOrigin(t,i,u(r))}removeOrigin(t){const i=v(this),r=u(t),o=i.keys(r);for(const n of o)i.originOf(n)===r&&i.set(n,i.get(n,r),7)}updateOrigin(t,i){const r=v(this),o=u(i),n=N(this,t);for(let a=o+1;a<p;++a)r.delete(t,a);r.set(t,n,o)}toJSON(t){return this.write({},t)}};return s=O([f("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function v(h){return g(h).store}const E=h=>{const e=A(y(h));let s=class extends e{};return s=O([f("esri.core.MultiOriginJSONSupport")],s),s},k=E(d);export{E as l,k as m};
