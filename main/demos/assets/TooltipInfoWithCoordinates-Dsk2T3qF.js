import{h6 as F,V as _,_ as s,Y as r,Z as h,kW as M}from"./main-CtmwM019.js";import{K as U,L as z,M as C,N as Q,P as O}from"./SketchViewModel-Bj0qQq8r.js";import{n as P}from"./PointSnappingHint-DlKnucSr.js";import{d as L,s as f,a as y,c as V,i as p,T,j as k,l as D}from"./quantityUtils-CU1WV3ce.js";import{B as c,a as R,b as $,w as Y,c as S,A as X,J as Z,K as x}from"./SketchTooltipInfo-CCynpALS.js";import{n as j}from"./uuid-Oe6SV2kF.js";import{M as w,w as A}from"./angularMeasurementUtils-Cr9hvkn9.js";class st{draw(a,t){const i=q(a),n=this.sortUniqueHints(i),l=[];for(const u of n)u instanceof U&&l.push(this.visualizeIntersectionPoint(u,t)),u instanceof z&&l.push(this.visualizeLine(u,t)),u instanceof C&&l.push(this.visualizeParallelSign(u,t)),u instanceof Q&&l.push(this.visualizeRightAngleQuad(u,t)),u instanceof P&&l.push(this.visualizePoint(u,t));return F(l)}sortUniqueHints(a){return a}}function q(e){const a=[];for(const t of e){let i=!0;for(const n of a)if(t.equals(n)){i=!1;break}i&&a.push(t)}return a}let o=class extends _{constructor(e){super(e),this.actual=null,this.lockable=!0,this.id=j(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(e){this.lockable&&this._set("committed",e)}get dirty(){return this.inputValue!=null}get locked(){return this.lockable&&this.committed!=null}onInput(e){this.inputValue=e,this.invalid=!1}onCommit(e,a,t){this.lockable?this._onCommitLockable(e,t):this._onCommitNonLockable(t),this.invalid&&e==="commit-and-exit"||t.onCommit(a,e)}_onCommitLockable(e,a){const{inputValue:t,locked:i}=this;i&&m(t)?this.unlock():(e==="commit-and-exit"&&!i||t!=null)&&this._parseInputAndLock(a)}_onCommitNonLockable(e){const{inputValue:a}=this;m(a)?this.lockable?this.setActual(null):this.clearInputValue():a!=null&&this._parseInputAndSetActual(e)}applyValue(e){this.lockable?this.lock(e):this.setActual(e)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(e){this.actual=e,this.clearInputValue()}lock(e){this.lockable&&(this.committed=e??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(e){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(e))}getSuffix(e){const{suffix:a}=this;return typeof a=="function"?a(e):a}getFormattedValue(e){const{actual:a,committed:t,format:i}=this;return t!=null?i(t,e):a!=null?i(a,e):null}getRawDisplayValue(e){const{actual:a,committed:t,inputValue:i}=this;return i??(this.lockable&&t!=null?this.formatForInputMode(t,e):a!=null?this.formatForInputMode(a,e):null)}_parseInputAndSetActual(e){const{inputValue:a}=this;if(a==null||m(a))return this.setActual(null);const t=this.parse(a,e);t!=null?this.setActual(t):this.invalid=!0}_parseInputAndLock(e){const{inputValue:a,actual:t}=this;if(m(a))return this.unlock();if(a==null)return this.lock(t);const i=this.parse(a,e);i!=null?this.lock(i):this.invalid=!0}};function m(e){return e!=null&&e.trim()===""}s([r()],o.prototype,"actual",void 0),s([r()],o.prototype,"committed",null),s([r()],o.prototype,"dirty",null),s([r()],o.prototype,"format",void 0),s([r()],o.prototype,"formatForInputMode",void 0),s([r()],o.prototype,"lockable",void 0),s([r()],o.prototype,"locked",null),s([r()],o.prototype,"id",void 0),s([r()],o.prototype,"inputValue",void 0),s([r()],o.prototype,"name",void 0),s([r()],o.prototype,"parse",void 0),s([r()],o.prototype,"readOnly",void 0),s([r()],o.prototype,"suffix",void 0),s([r()],o.prototype,"title",void 0),s([r()],o.prototype,"visible",void 0),s([r()],o.prototype,"invalid",void 0),s([r()],o.prototype,"unlockOnVertexPlacement",void 0),o=s([h("esri.views.interactive.tooltip.fields.TooltipField")],o);let d=class extends o{constructor(a){super(a),this.showAsZ=!1}normalizeCtorArgs(a){const t=i=>i.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:L,parse:c({createQuantity:(i,n)=>y(i,t(n))}),format:(i,n)=>n.formatters.verticalLength(i),formatForInputMode:(i,n)=>n.formatters.scalar(f(i,t(n))),suffix:i=>i.inputUnitInfos.verticalLength.abbreviation,title:i=>i.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...a}}};s([r()],d.prototype,"showAsZ",void 0),d=s([h("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],d);let g=class extends o{constructor(e){super(e),this.precision=1}normalizeCtorArgs(e){const a=t=>t.inputUnitInfos.angle.unit;return{name:"orientation",actual:null,parse:c({createQuantity:(t,i)=>V(t,a(i),"geographic"),sanitize:$}),format:t=>{const i=w(t);return R(i,"geographic",this.precision)},formatForInputMode:(t,i)=>{const n=w(t);return i.formatters.scalar(n)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...e}}};s([r()],g.prototype,"precision",void 0),g=s([h("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],g);let v=class extends o{constructor(e){super(e),this.precision=null}normalizeCtorArgs(e){const a=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:c({createQuantity:(t,i)=>y(t,a(i))}),format:(t,i)=>i.formatters.length(t),formatForInputMode:(t,i)=>i.formatters.scalar(f(t,a(i))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...e}}};s([r()],v.prototype,"precision",void 0),v=s([h("esri.views.interactive.tooltip.fields.TooltipFieldSize")],v);function rt(e){const a=i=>i.inputUnitInfos.angle.unit,t=i=>i.sketchOptions.values.effectiveDirectionMode;return new o({name:"direction",actual:k,parse:c({createQuantity:(i,n)=>V(i,a(n),"geographic"),sanitize:$}),format:(i,n)=>{const l=t(n),u=A(i,l);switch(l){case"absolute":return n.formatters.direction(u);case"relative":return n.formatters.directionRelative(u);case"relative-bilateral":return n.formatters.directionRelativeBilateral(u)}},formatForInputMode:(i,n)=>{const l=A(i,t(n));return n.formatters.scalar(f(l,a(n)))},suffix:i=>i.inputUnitInfos.angle.abbreviation,title:i=>{const n=t(i),{absolute:l,relative:u}=i.messages.sketch.direction;switch(n){case"absolute":return l;case"relative":case"relative-bilateral":return u}},...e})}function b(e){const a=t=>t.inputUnitInfos.length.unit;return new o({name:"distance",actual:L,parse:c({createQuantity:(t,i)=>y(Math.max(t,0),a(i))}),format:(t,i)=>i.formatters.length(t),formatForInputMode:(t,i)=>i.formatters.scalar(f(t,a(i))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...e})}function lt(e){return b({format:(a,t)=>t.formatters.totalLength(a),title:a=>a.messages.sketch.totalLength,readOnly:!0,...e})}function ut(e){return b({...e})}function ct(e){const a=t=>t.inputUnitInfos.length.unit;return b({...e,parse:c({createQuantity:(t,i)=>y(t,a(i))}),format:(t,i)=>i.formatters.lengthRelative(t)})}function H(e){return new d(e)}function pt(e){return new g(e)}function ht(e){return new v(e)}function ft(e){return I("scale",{name:"scale",actual:null,parse:c({createQuantity:a=>p(Math.abs(a))}),...e})}function mt(e){const a=t=>t.inputUnitInfos.area.unit;return new o({name:"area",actual:T,parse:c({createQuantity:(t,i)=>D(t,a(i))}),format:(t,i)=>i.formatters.area(t),formatForInputMode:(t,i)=>i.formatters.scalar(f(t,a(i))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...e})}function N(e){return new o({name:"x",actual:k,parse:S,format:(a,t)=>t.formatters.longitudeDecimalDegrees(a),formatForInputMode:a=>Y(a),suffix:a=>a.inputUnitInfos.angle.abbreviation,title:a=>a.messages.sketch.longitude,...e})}function B(e){return new o({name:"y",actual:k,parse:Z,format:(a,t)=>t.formatters.latitudeDecimalDegrees(a),formatForInputMode:a=>X(a),suffix:a=>a.inputUnitInfos.angle.abbreviation,title:a=>a.messages.sketch.latitude,...e})}function K(e){return I("x",{name:"x",...e})}function W(e){return I("y",{name:"y",...e})}function I(e,a){return new o({actual:p(0),parse:c({createQuantity:t=>p(t)}),format:(t,i)=>i.formatters.scalar(t),formatForInputMode:(t,i)=>i.formatters.scalar(t),title:t=>t.messages.sketch[e],...a})}const dt=e=>{const a=e;let t=class extends a{constructor(){super(...arguments),this.longitude=N(),this.latitude=B(),this.x=K(),this.y=W(),this.elevation=H(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(n,l=n?.spatialReference){if(this.geographic=!!l&&O(l),n==null)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const u=M(n,E);this._setActualLonLat(x(u?.[0]),x(u?.[1]))}else this._setActualXY(p(n.x),p(n.y))}_setActualLonLat(n,l){this.longitude.actual=n,this.latitude.actual=l}_setActualXY(n,l){this.x.actual=n,this.y.actual=l}};return s([r()],t.prototype,"geographic",void 0),s([r()],t.prototype,"effectiveX",null),s([r()],t.prototype,"effectiveY",null),s([r()],t.prototype,"key",null),t=s([h("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],t),t},E=[0,0];export{ct as F,rt as I,pt as M,mt as Q,lt as U,dt as h,ft as j,ht as k,st as r,ut as w};
