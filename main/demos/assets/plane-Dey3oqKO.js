import{aB as f,aK as L}from"./main-CtmwM019.js";import{o as p,_ as w,A as B,r as C,P as s,u as z,g as y,I as N,c as l,H as K}from"./vec32-gK3TWme0.js";import"./vec42-DZ0sp4MX.js";import{r as O,c as i,f as k}from"./vectorStacks-Du2BB1wg.js";function nt(r){const t=r[0]*r[0]+r[4]*r[4]+r[8]*r[8],n=r[1]*r[1]+r[5]*r[5]+r[9]*r[9],u=r[2]*r[2]+r[6]*r[6]+r[10]*r[10];return Math.sqrt(Math.max(t,n,u))}function ut(r,t){const n=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),u=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),c=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return p(r,n,u,c),r}function Q(r,t,n){Math.abs(r[0])>Math.abs(r[1])?p(t,0,1,0):p(t,1,0,0),w(n,r,t),w(t,n,r),B(n,n),B(t,t)}function ct(r,t,n,u=f()){const c=C(r),a=C(t),o=s(r,t)/(c*a);if(o<.9999999999999999){const e=Math.acos(o),h=((1-n)*c+n*a)/Math.sin(e),$=h/c*Math.sin((1-n)*e),M=h/a*Math.sin(n*e);return y(D,r,$),y(E,t,M),z(u,D,E)}return N(u,r,t,n)}const D=f(),E=f();function F(r=b){return[r[0],r[1],r[2],r[3]]}function et(r=b[0],t=b[1],n=b[2],u=b[3]){return G(r,t,n,u,O.get())}function R(r,t){return G(t[0],t[1],t[2],t[3],r)}function ot(r){return r}function G(r,t,n,u,c=F()){return c[0]=r,c[1]=t,c[2]=n,c[3]=u,c}function S(r,t,n){const u=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],c=Math.abs(u-1)>1e-5&&u>1e-12?1/Math.sqrt(u):1;return n[0]=t[0]*c,n[1]=t[1]*c,n[2]=t[2]*c,n[3]=-(n[0]*r[0]+n[1]*r[1]+n[2]*r[2]),n}function T(r,t,n,u=F()){const c=n[0]-t[0],a=n[1]-t[1],o=n[2]-t[2],e=r[0]-t[0],h=r[1]-t[1],$=r[2]-t[2],M=a*$-o*h,P=o*e-c*$,_=c*h-a*e,j=M*M+P*P+_*_,v=Math.abs(j-1)>1e-5&&j>1e-12?1/Math.sqrt(j):1;return u[0]=M*v,u[1]=P*v,u[2]=_*v,u[3]=-(u[0]*r[0]+u[1]*r[1]+u[2]*r[2]),u}function J(r,t,n,u=0,c=Math.floor(n*(1/3)),a=Math.floor(n*(2/3))){if(n<3)return!1;t(q,u);let o=c,e=!1;for(;o<n-1&&!e;)t(m,o),o++,e=!K(q,m);if(!e)return!1;for(o=Math.max(o,a),e=!1;o<n&&!e;)t(g,o),o++,l(A,q,m),B(A,A),l(x,m,g),B(x,x),e=!K(q,g)&&!K(m,g)&&Math.abs(s(A,x))<U;return e?(T(q,m,g,r),!0):(u!==0||c!==1||a!==2)&&J(r,t,n,0,1,2)}function at(r,t,n=!0){const u=t.length/3;return J(r,(c,a)=>p(c,t[3*a+0],t[3*a+1],t[3*a+2]),n?u-1:u)}const U=.99619469809,q=f(),m=f(),g=f(),A=f(),x=f();function it(r,t,n){return t!==r&&R(r,t),r[3]=-s(r,n),r}function ft(r,t){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function st(r,t,n,u){return w(g,t,r),S(n,g,u)}function ht(r,t,n,u){return H(I(r,t,l(i.get(),n,t),W,u))}function Mt(r,t,n){return t!=null&&H(I(r,t.origin,t.direction,X,n))}function gt(r,t,n){return H(I(r,t.origin,t.vector,0,n))}function $t(r,t,n){return H(I(r,t.origin,t.vector,1,n))}function mt(r,t){return d(r,t)>=0}function lt(r,t){const n=s(r,t.ray.direction),u=-d(r,t.ray.origin);if(u<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return u>0;if((u<0||n<0)&&!(u<0&&n<0))return!0;const c=u/n;return n>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1}function qt(r,t){const n=s(r,t.ray.direction),u=-d(r,t.ray.origin);if(n>-1e-6&&n<1e-6)return u>0;const c=u/n;return n>0?c<t.c1&&(t.c1=c):c>t.c0&&(t.c0=c),t.c0<=t.c1}function bt(r,t,n){const u=y(i.get(),r,-r[3]),c=V(r,l(i.get(),t,u),i.get());return z(n,c,u),n}function pt(r,t,n,u){const c=r,a=i.get(),o=i.get();Q(c,a,o);const e=l(i.get(),n,t),h=k(a,e),$=k(o,e),M=k(c,e);return p(u,h,$,M)}function V(r,t,n){const u=y(i.get(),r,s(r,t));return l(n,t,u),n}function yt(r,t){return Math.abs(d(r,t))}function d(r,t){return s(r,t)+r[3]}function H(r){return r===0||r===1}function I(r,t,n,u,c){const a=s(r,n),o=d(r,t);if(a===0)return o>=0?2:3;let e=-o/a;return 1&u&&(e=L(e,0,1)),!(4&u)&&e<0||!(8&u)&&e>1?o>=0?2:3:(z(c,t,y(c,n,e)),o>=0?0:1)}const b=[0,0,1,0],W=12,X=8;export{it as G,ft as H,st as I,ht as J,Mt as K,gt as L,$t as N,mt as O,lt as P,qt as Q,bt as R,J as S,pt as T,S as U,yt as W,d as X,I as Z,Q as a,ct as b,et as d,ut as g,F as j,ot as k,nt as m,G as q,T as w,R as y,at as z};
