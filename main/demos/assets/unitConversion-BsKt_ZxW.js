import{n as d,t as k}from"./enum-BshDcSFN.js";import{hG as y,gT as $}from"./main-CtmwM019.js";import"./preload-helper-DMGCcr4D.js";const G=new Map([[1025,109452],[1033,109451],[9001,109404],[9002,109405],[9003,109406],[9005,109407],[9014,109408],[9030,109409],[9031,109410],[9033,109411],[9034,109412],[9035,109413],[9036,109414],[9037,109415],[9038,109416],[9039,109417],[9040,109418],[9041,109419],[9042,109420],[9043,109421],[9050,109422],[9051,109423],[9052,109424],[9053,109425],[9060,109426],[9061,109427],[9062,109428],[9063,109429],[9070,109430],[9080,109431],[9081,109432],[9082,109433],[9083,109434],[9084,109435],[9085,109436],[9086,109437],[9087,109438],[9093,109439],[9094,109440],[9095,109441],[9096,109442],[9097,109444],[9098,109445],[9099,109446],[9300,109447],[9301,109448],[9302,109449],[109001,109442],[109002,109443],[109003,109444],[109004,109445],[109005,109450],[109006,109451],[109007,109452],[109008,109453],[109009,109454],[109010,109455],[109011,109456],[109012,109457],[109013,109458],[109014,109459],[109015,109462],[109016,109464],[109017,109465],[109018,109466],[109030,109460],[109031,109461]]);function p(e){return(a,s)=>[a,{type:e,wkid:a,factor:s}]}const f=p("angular"),q=new Map([f(1031,484813681109536e-23),f(9101,1),f(9102,.017453292519943295),f(9103,.0002908882086657216),f(9104,484813681109536e-20),f(9105,.015707963267948967),f(9106,.015707963267948967),f(9109,1e-6),f(9112,.00015707963267948965),f(9113,15707963267948967e-22),f(9114,.0009817477042468104)]),r=p("linear"),l=new Map([r(1025,.001),r(1033,.01),r(9001,1),r(9002,.3048),r(9003,.30480060960121924),r(9005,.3047972654),r(9014,1.8288),r(9030,1852),r(9031,1.0000135965),r(9033,20.11684023368047),r(9034,.2011684023368047),r(9035,1609.3472186944375),r(9036,1e3),r(9037,.9143917962),r(9038,20.1166195164),r(9039,.201166195164),r(9040,.9143984146160287),r(9041,.3047994715386762),r(9042,20.116765121552632),r(9043,.2011676512155263),r(9050,.9143992),r(9051,.3047997333333333),r(9052,20.1167824),r(9053,.201167824),r(9060,.9143992042898124),r(9061,.30479973476327077),r(9062,20.116782494375872),r(9063,.2011678249437587),r(9070,.30480083333333335),r(9080,.30479951024814694),r(9081,.30479841),r(9082,.3047996),r(9083,.3047995),r(9084,.9143985307444408),r(9085,.91439523),r(9086,.9143988),r(9087,.9143985),r(9093,1609.344),r(9094,.3047997101815088),r(9095,.3048007491),r(9096,.9144),r(9097,20.1168),r(9098,.201168),r(9099,.914398),r(9300,.30479933333333337),r(9301,20.116756),r(9302,.20116756),r(109001,.9144),r(109002,.9144018288036576),r(109003,20.1168),r(109004,.201168),r(109005,.1),r(109006,.01),r(109007,.001),r(109008,.0254),r(109009,.025400050800101603),r(109010,5.0292),r(109011,5.029210058420118),r(109012,1853.248),r(109013,1853.184),r(109014,1.7018),r(109015,.8466683600033867),r(109016,.00035277777777777776),r(109017,1e-6),r(109018,1e-9),r(109030,5e4),r(109031,15e4)]),I=l.get(9001),t=p("area"),i=new Map([t(109401,1e4),t(109402,4046.8564224),t(109403,4046.872609874252),t(109404,1),t(109405,.09290304),t(109406,.09290341161327487),t(109407,.09290137299531805),t(109408,3.34450944),t(109409,3429904),t(109410,1.000027193184865),t(109411,404.6872609874253),t(109412,.04046872609874252),t(109413,2589998470319522e-9),t(109414,1e6),t(109415,.8361123569578626),t(109416,404.6783807676053),t(109417,.04046783807676053),t(109418,.8361244606523066),t(109419,.09290271785025629),t(109420,404.6842389557165),t(109421,.04046842389557164),t(109422,.83612589696064),t(109423,.0929028774400711),t(109424,404.6849341289498),t(109425,.04046849341289498),t(109426,.836125904805842),t(109427,.09290287831176021),t(109428,404.6849379260275),t(109429,.04046849379260275),t(109430,.09290354800069446),t(109431,.09290274144751023),t(109432,.09290207073852812),t(109433,.09290279616016),t(109434,.09290273520025),t(109435,.836124673027592),t(109436,.8361186366467529),t(109437,.8361251654414399),t(109438,.83612461680225),t(109439,2589988110336e-6),t(109440,.09290286332673177),t(109441,.09290349665192114),t(109442,.83612736),t(109443,.8361307045194736),t(109444,404.68564224),t(109445,.040468564224),t(109446,.836123702404),t(109447,.09290263360044447),t(109448,404.683871963536),t(109449,.0404683871963536),t(109450,.01),t(109451,1e-4),t(109452,1e-6),t(109453,64516e-8),t(109454,.0006451625806477421),t(109455,25.29285264),t(109456,25.29295381171408),t(109457,3434528149504e-6),t(109458,3434290937856e-6),t(109459,2.89612324),t(109460,25e8),t(109461,225e8),t(109462,.7168473118308245),t(109463,100),t(109464,1244521604938271e-22),t(109465,1e-12),t(109466,1e-18)]),M=i.get(109404),m=[];function w(e){return e.length===0?'""':e.startsWith('"')||e.startsWith(".")||e[0]>="0"&&e[0]<="9"?e:'"'+e.trim()+'"'}function E(e){let a="",s="",n=!1;for(let c=0;c<e.length;c++){const o=e[c];n?o==='"'?e[c+1]==='"'?(a+=`\\${o}`,c+=1):n=!1:a+=o:/\s/.test(o)||(o===","?(s+=a!==""?w(a)+",":",",a=""):o===")"||o==="]"?(s+=a!==""?w(a)+"]}":"]}",a=""):o==="("||o==="["?(s+='{ "entity": "'+a.toUpperCase().trim()+'", "values":[',a=""):o==='"'?(n=!0,a=""):a+=o)}return JSON.parse(s)}function U(e){try{for(let c=0;c<m.length;c++)if(m[c].spatialReferenceWkt===e)return m[c].unit;const a=S(E(e));if(a===null)return null;let s=null;for(const c of a.values)if(typeof c=="object"&&(c.entity==="UNIT"||c.entity==="ANGLEUNIT"||c.entity==="LENGTHUNIT")){s=c;break}if(s===null)return null;const n=R(a.entity==="GEOGCS"||a.entity==="GEOGCRS"?"angular":"linear",s.values[1],s.values[2]);return m.push({spatialReferenceWkt:e,unit:n}),m.length>10&&m.shift(),n}catch{return null}}function R(e,a,s){if(s!=null)try{if(s.values[0]==="EPSG")return{type:e,wkid:Number.parseInt(s.values[1],10),factor:a}}catch{}return{type:e,factor:a}}function S(e){if(e===null)return null;switch(e.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return e}const a=[];for(const s of e.values)if(typeof s=="object"&&s.entity!==void 0)switch(s.entity){case"GEOGCRS":case"GEOGCS":case"PROJCRS":case"PROJCS":return s;default:a.push(s)}for(const s of a){const n=S(s);if(n!=null)return n}return null}const g=-1;function u(e,a){let s;switch(e){case"linear":s=l;break;case"angular":s=q;break;case"area":s=i;break;default:return null}return s.get(a)}function _(e){const a=e.wkid;if(a!=null){const n=y.units[y[a]];if(n!=null)switch(n){case"Meter":return u("linear",9001);case"Foot":return u("linear",9002);case"Foot_US":return u("linear",9003);case"Foot_Clarke":return u("linear",9005);case"Yard_Clarke":return u("linear",9037);case"Link_Clarke":return u("linear",9039);case"Yard_Sears":return u("linear",9040);case"Foot_Sears":return u("linear",9041);case"Chain_Sears":return u("linear",9042);case"Chain_Benoit_1895_B":return u("linear",9062);case"Yard_Indian":return u("linear",9084);case"Yard_Indian_1937":return u("linear",9085);case"Foot_Gold_Coast":return u("linear",9094);case"Chain":return u("linear",9097);case"Chain_Sears_1922_Truncated":return u("linear",9301);case"50_Kilometers":return u("linear",109030);case"150_Kilometers":return u("linear",109031);default:throw new Error(`Unknown unit name: ${n}`)}return $.has(a)?u("angular",9105):u("angular",9102)}const s=e.wkt2||e.wkt;if(s!=null){const n=U(s);if(n!=null){if(n.wkid!=null){const c=u(n.type,n.wkid);if(c!=null)return c}return{type:n.type,wkid:g,factor:n.factor}}}return null}function C(e){if(e.type!=="linear")return null;if(e.wkid===g)return{type:"area",wkid:g,factor:e.factor**2};const a=G.get(e.wkid);return a==null?null:u("area",a)}function N(e){if(e!=null){if(typeof e=="number")return i.get(e)??l.get(e)??q.get(e);if(typeof e!="string")throw new d(null,"InvalidParameter",null);switch(k(e)){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return i.get(109404);case"miles":case"mile":case"squaremile":case"squaremiles":return i.get(109439);case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return i.get(109414);case"acres":case"acre":case"ac":return i.get(109402);case"hectares":case"hectare":case"ha":return i.get(109401);case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return i.get(109442);case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return i.get(109405);case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return i.get(109409);case"millimeter":case"millimeters":case"squaremillimeter":case"squaremillimeters":return i.get(109452);case"centimeter":case"centimeters":case"squarecentimeter":case"squarecentimeters":return i.get(109451);case"decimeter":case"decimeters":case"squaredecimeter":case"squaredecimeters":return i.get(109450);case"inch":case"inches":case"squareinch":case"squareinches":return i.get(109453);case"usfoot":case"usfeet":case"squareusfoot":case"squareusfeet":return i.get(109406);case"usmile":case"usmiles":case"squareusmile":case"squareusmiles":return i.get(109413)}}}function P(e){if(e!=null){if(typeof e=="number")return l.get(e)??q.get(e)??i.get(e);if(typeof e!="string")throw new d(null,"InvalidParameter",null);switch(k(e)){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":case"hectares":case"hectare":case"ha":return l.get(9001);case"miles":case"mile":case"squaremile":case"squaremiles":return l.get(9093);case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return l.get(9036);case"yard":case"yd":case"yards":case"squareyards":case"squareyard":case"acres":case"acre":case"ac":return l.get(9096);case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return l.get(9002);case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return l.get(9030);case"millimeter":case"millimeters":case"squaremillimeter":case"squaremillimeters":return l.get(109007);case"centimeter":case"centimeters":case"squarecentimeter":case"squarecentimeters":return l.get(109006);case"decimeter":case"decimeters":case"squaredecimeter":case"squaredecimeters":return l.get(109005);case"inch":case"inches":case"squareinch":case"squareinches":return l.get(109008);case"usfoot":case"usfeet":case"squareusfoot":case"squareusfeet":return l.get(9003);case"usmile":case"usmiles":case"squareusmile":case"squareusmiles":return l.get(9035)}}}function h(e,a,s){if(e.type!==a.type)throw new Error(`Incompatible unit types. src=${e.type} dest=${a.type}`);return s*(e.factor/a.factor)}function T(e,a,s){if(e==null||a==null)return s;const n=_(e);if(n==null)throw new Error("Unknown spatial reference unit.");const c=a.type==="area"&&n.type==="linear"?C(n):n;if(c==null)throw new Error(`Unknown spatial reference ${a.type} unit.`);return h(c,a,s)}function F(e,a,s){if(e==null||a==null)return s;const n=_(a);if(n==null)throw new Error("Unknown spatial reference unit.");const c=e.type==="area"&&n.type==="linear"?C(n):n;if(c==null)throw new Error(`Unknown spatial reference ${e.type} unit.`);return h(e,c,s)}function J(e,a,s){return e==null||a==null?s:h(e,a,s)}export{J as convert,T as convertFromSpatialReferenceUnit,F as convertToSpatialReferenceUnit,_ as getSpatialReferenceUnit,I as meters,M as squareMeters,N as toAreaUnit,P as toLengthUnit};
