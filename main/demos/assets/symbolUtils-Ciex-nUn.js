const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./previewWebStyleSymbol-B8utxPKA.js","./main-CtmwM019.js","./preload-helper-DMGCcr4D.js","./main-DZFs8ecF.css","./webStyleAcceptedFormats-CG7ZQ6BV.js","./previewSymbol3D-DTUfxI3G.js","./colorUtils-D3e_O9k3.js","./vec42-DZ0sp4MX.js","./vec4f64-DPb6J-GU.js","./utils-D6aoGCcc.js","./asyncUtils-BZq6cT_d.js","./jsonUtils-CG4V1ypX.js","./parser-B5KtsVQI.js","./mat4f32-Djp3mnm5.js","./mat4-Ba1tXzxc.js","./cimSymbolUtils-CBOyuQ8I.js","./utils-DQaLv0i_.js","./defaultCIMValues-XI-Li77m.js","./LRUCache-B52YywOm.js","./MemCache-Dy3u4age.js","./previewUtils-VNo3yuWa.js","./webStyleSymbolUtils-BR-BDddg.js","./devEnvironmentUtils-8WtPGj6h.js","./styleUtils-CodmB4wT.js","./jsxFactory-CRwrqbBC.js","./intl-BF_HwN3J.js","./messages-CIIwatVx.js","./uuid-Oe6SV2kF.js","./sanitizerUtils-BSv1Bmu5.js","./jsxFactory-CQED0rIl.css","./mat2df32-Dpt2CT5P.js","./mat2d-Bgm8yl9G.js","./previewSymbol2D-Buhw5QED.js","./fontUtils-CNXkNmeB.js","./quantizationUtils-C7csQYv9.js","./densifyCurvedGeometry-Ch9zrGlE.js","./previewCIMSymbol-BH17RHuP.js","./CIMSymbolHelper-DKDCpqRw.js","./BidiEngine-BvER9tXK.js","./labelPoint-DnnG3eTE.js","./OptimizedGeometry-CYLi7ZPm.js","./memoryEstimations-R8dTJqWI.js","./GeometryUtils-BPbhdKVK.js","./rasterizingUtils-ZEBapkgM.js","./definitions-Bxxl7NsE.js","./vec2f32-CaVKkSa6.js","./Rect-CUzevAry.js","./BoundingBox-BSOANoLO.js","./CIMSymbolRasterizer-Bm7oDCDO.js","./CIMResourceManager-BYZ9sp6x.js","./imageUtils-CRYyxDSE.js","./OverrideHelper-DKqE71Xu.js","./FieldsIndex-BfaTaUfm.js","./UnknownTimeZone-B7fquLC-.js","./timeZoneUtils-kvnFYCV8.js","./ArcadeExpression-BHsVDuiI.js","./TimeOnly-BYrd6q6s.js","./enum-BshDcSFN.js","./callExpressionWithFeature-BbV6fgi9.js","./visualVariableUtils-D_kT-o6u.js","./lengthUtils-CPuXsfCi.js"])))=>i.map(i=>d[i]);
import{_ as I}from"./preload-helper-DMGCcr4D.js";import{a$ as V,bC as C,cc as Q,jc as Z,am as z,o as ct,H as ht,s as ft,bO as ut,S as dt}from"./main-CtmwM019.js";import{g as yt,L as j,M as pt,N as gt,y as mt}from"./utils-D6aoGCcc.js";import{B as J,U as wt}from"./colorUtils-D3e_O9k3.js";import{n as m,i as xt}from"./jsxFactory-CRwrqbBC.js";import{n as O}from"./mat2df32-Dpt2CT5P.js";import{e as L,c as bt,a as N,i as kt,s as $t}from"./mat2d-Bgm8yl9G.js";import"./vec42-DZ0sp4MX.js";import"./vec4f64-DPb6J-GU.js";let vt=0;function St(){return vt++}let Mt=0;function Et(){return Mt++}let _t=0;function At(){return _t++}const Rt="http://www.w3.org/2000/svg",B=z("android"),Lt=z("chrome")||B&&B>=4?"auto":"optimizeLegibility",It={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},Ft=/([A-DF-Za-df-z])|([-+]?\d*\.?\d+(?:[eE][-+]?\d+)?)/g;let w={},g={};const jt=Math.PI;function _(t,e){const i=t*(jt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function K(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function X(t,e,i,n,o){if(t){if(t.type==="circle")return m("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return m("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return m("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return m("image",{alt:o||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){const r=typeof t.path!="string"?K(t.path):t.path;return m("path",{d:r,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return V(n),m("text",{"dominant-baseline":n.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":Lt,x:t.x,y:t.y},t.text)}return null}function tt(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new C(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){const i=`patternId-${St()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}const e=`linearGradientId-${Et()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new C(i.color).toString()}))}}}function et(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new C(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=yt(t).join(",")||"none")),e}function it(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const n=t.alignBaseline,o=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;i.align=t.align,i.dominantBaseline=o,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",V(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Ct(t){const{pattern:e,linearGradient:i}=t;if(e)return m("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},m("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){const n=i.stops.map((o,r)=>m("stop",{key:`${r}-stop`,offset:o.offset,"stop-color":o.color}));return m("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},n)}return null}function Vt(t,e){if(!t||t.length===0)return null;const i=[];for(const n of t){const{shape:o,fill:r,stroke:a,font:h}=n,c=tt(r),u=et(a),y=o.type==="text"?it(o,h):null,f=X(o,c.fill,u,y);f&&i.push(f)}return m("mask",{id:e,maskUnits:"userSpaceOnUse"},m("g",null,i))}function U(t,e,i){return kt(t,N(t),[e,i])}function P(t,e,i,n,o){return bt(t,N(t),[e,i]),t[4]=t[4]*e-n*e+n,t[5]=t[5]*i-o*i+o,t}function zt(t,e,i,n){const o=e%360*Math.PI/180;$t(t,N(t),o);const r=Math.cos(o),a=Math.sin(o),h=t[4],c=t[5];return t[4]=h*r-c*a+n*a-i*r+i,t[5]=c*r+h*a-i*a-n*r+n,t}function S(t,e){w&&"left"in w?(w.left!=null&&w.left>t&&(w.left=t),(w.right==null||w.right<t)&&(w.right=t),(w.top==null||w.top>e)&&(w.top=e),(w.bottom==null||w.bottom<e)&&(w.bottom=e)):w={left:t,bottom:e,right:t,top:e}}function T(t){const e=t.args,i=e.length;let n;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<i;n+=2)S(e[n],e[n+1]);g.x=e[i-2],g.y=e[i-1];break;case"H":for(n=0;n<i;++n)S(e[n],g.y);g.x=e[i-1];break;case"V":for(n=0;n<i;++n)S(g.x,e[n]);g.y=e[i-1];break;case"m":{let o=0;for(("x"in g)||(S(g.x=e[0],g.y=e[1]),o=2),n=o;n<i;n+=2)S(g.x+=e[n],g.y+=e[n+1]);break}case"l":case"t":for(n=0;n<i;n+=2)S(g.x+=e[n],g.y+=e[n+1]);break;case"h":for(n=0;n<i;++n)S(g.x+=e[n],g.y);break;case"v":for(n=0;n<i;++n)S(g.x,g.y+=e[n]);break;case"c":for(n=0;n<i;n+=6)S(g.x+e[n],g.y+e[n+1]),S(g.x+e[n+2],g.y+e[n+3]),S(g.x+=e[n+4],g.y+=e[n+5]);break;case"s":case"q":for(n=0;n<i;n+=4)S(g.x+e[n],g.y+e[n+1]),S(g.x+=e[n+2],g.y+=e[n+3]);break;case"A":for(n=0;n<i;n+=7)S(e[n+5],e[n+6]);g.x=e[i-2],g.y=e[i-1];break;case"a":for(n=0;n<i;n+=7)S(g.x+=e[n+5],g.y+=e[n+6])}}function q(t,e,i){const n=It[t.toLowerCase()];let o;typeof n=="number"&&(n?e.length>=n&&(o={action:t,args:e.slice(0,e.length-e.length%n)},i.push(o),T(o)):(o={action:t,args:[]},i.push(o),T(o)))}function Nt(t){const e=(typeof t.path!="string"?K(t.path):t.path).match(Ft),i=[];if(w={},g={},!e)return null;let n="",o=[];const r=e.length;for(let h=0;h<r;++h){const c=e[h],u=parseFloat(c);isNaN(u)?(n&&q(n,o,i),o=[],n=c):o.push(u)}q(n,o,i);const a={x:0,y:0,width:0,height:0};return w&&"left"in w&&(a.x=w.left,a.y=w.top,a.width=w.right-w.left,a.height=w.bottom-w.top),a}function Gt(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Nt(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function Dt(t){const e={x:0,y:0,width:0,height:0};let i=null,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(const r of t)i?(i.x=Math.min(i.x,r.x),i.y=Math.min(i.y,r.y),n=Math.max(n,r.x+r.width),o=Math.max(o,r.y+r.height)):(i=e,i.x=r.x,i.y=r.y,n=r.x+r.width,o=r.y+r.height);return i&&(i.width=n-i.x,i.height=o-i.y),i}function Ot(t,e,i,n,o,r,a,h,c){let u=(a&&r?_(r,e):e)/2,y=(a&&r?_(r,i):i)/2;if(c){const k=c[0],b=c[1];u=(a&&r?_(r,k):k)/2,y=(a&&r?_(r,b):b)/2}const f=t.width+n,s=t.height+n,d=O(),l=O();let x=!1;if(o&&f!==0&&s!==0){const k=e!==i?e/i:f/s,b=e>i?e:i;let p=1,M=1;isNaN(b)||(k>1?(p=b/f,M=b/k/s):(M=b/s,p=b*k/f)),L(l,l,P(d,p,M,u,y)),x=!0}const $=t.x+(f-n)/2,v=t.y+(s-n)/2;if(L(l,l,U(d,u-$,y-v)),!x&&(f>e||s>i)){const k=f/e>s/i,b=(k?e:i)/(k?f:s);L(l,l,P(d,b,b,$,v))}return h&&L(l,l,U(d,h[0],h[1])),r&&L(l,l,zt(d,r,$,v)),`matrix(${l[0]},${l[1]},${l[2]},${l[3]},${l[4]},${l[5]})`}function nt(t){const e=t?.match(/bloom\(\s*([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*\)/i);if(!e)return null;const[,i,n,o]=e;return{strength:Number(i),radius:Q(Z(n)),threshold:Number(o)}}function Bt(t,e,i){const n=nt(t);if(!n)return null;const{strength:o,radius:r}=n,a=o>0?r:0,h=(o+a)*e,c=4*o+1;return m("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},m("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(o+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),m("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:h/25}),m("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:h/50}),m("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},m("feFuncR",{slope:c,type:"linear"}),m("feFuncG",{slope:c,type:"linear"}),m("feFuncB",{slope:c,type:"linear"})),m("feMerge",null,m("feMergeNode",{in:"intensityBlur"}),m("feMergeNode",{in:"intensityBrightness"}),m("feGaussianBlur",{stdDeviation:o/10})))}function Ut(t,e,i,n={}){const o=[],r=[],a=At(),h=Bt(n.cssEffectFilter,e,a);let c=null;if(h){const s=nt(n.cssEffectFilter),d=n.clipBloomEffect||!s?.strength?0:(s.strength+s.radius/2)/3,l=e+e*d,x=i+i*d;c=[Math.max(l,10),Math.max(x,10)]}let u=e,y=i;if(n.useRotationSize)for(let s=0;s<t.length;s++){const d=n.rotations?.[s]??0;u=Math.max(_(d,e),u),y=Math.max(_(d,i),y)}for(let s=0;s<t.length;s++){const d=t[s],l=[],x=[];let $=0,v=0,k=0;for(const E of d){const{shape:A,fill:ot,stroke:G,font:at,offset:F}=E;n.ignoreStrokeWidth||A.type==="text"||($+=G?.width||0);const D=tt(ot),lt=et(G),st=A.type==="text"?it(A,at):null;o.push(Ct(D)),l.push(X(A,D.fill,lt,st,n.ariaLabel)),x.push(Gt(A)),F&&(v+=F[0],k+=F[1])}const b=n.rotations?.[s]??0;n.useRotationSize&&(v+=(u-_(b,e))/2,k+=(y-_(b,i))/2);const p=Ot(Dt(x),e,i,$,n.scale??!1,b,n.useRotationSize??!1,[v,k],c);let M=null;if(n.masking){const E=`mask-${s}`,A=n.masking[s];o.push(Vt(A,E)),M=`url(#${E})`}r.push(M?m("g",{mask:M},m("g",{transform:p},l)):m("g",{transform:p},l))}return h&&(V(c),u=c[0],y=c[1]),m("svg",{"aria-label":n.ariaLabel,focusable:!1,height:y,role:"img",style:"display: block;",width:u,xmlns:Rt},h,m("defs",null,o),h?m("g",{filter:`url(#bloom${a})`},r):r)}const W=xt();function Pt(t,e){W.append(t,e),W.detach(e)}function Tt(t,e,i){const n=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;const r=i?.node||document.createElement("div");return i.opacity!=null&&(r.style.opacity=i.opacity.toString()),i.cssEffectFilter!=null&&(r.style.filter=i.cssEffectFilter),Pt(r,()=>Ut(t,n,o,i)),r}function qt(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function Wt(t,e,i){return t?ht(t,{responseType:"image"}).then(n=>{const o=n.data,r=o.width,a=o.height,h=r/a;let c=e;if(i){const u=Math.max(r,a);c=Math.min(c,u)}return{image:o,width:h<=1?Math.ceil(c*h):c,height:h<=1?c:Math.ceil(c/h)}}):Promise.reject(new ft("renderUtils: imageDataSize","href not provided."))}function Ht(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function Yt(t,e,i,n,o){switch(o){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const r=J({r:t[e],g:t[e+1],b:t[e+2]});r.h=n.h,r.s=n.s,r.v=r.v/100*n.v;const a=wt(r);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function ce(t,e,i,n,o){return Wt(t,e,o).then(r=>{const a=r.width??e,h=r.height??e;if(r.image&&Ht(i,n)){let c=r.image.width,u=r.image.height;z("edge")&&/\.svg$/i.test(t)&&(c-=1,u-=1);const y=qt(a,h);y.drawImage(r.image,0,0,c,u,0,0,a,h);const f=y.getImageData(0,0,a,h),s=[i.r/255,i.g/255,i.b/255,i.a],d=J(i);for(let l=0;l<f.data.length;l+=4)Yt(f.data,l,s,d,n);y.putImageData(f,0,0),t=y.canvas.toDataURL("image/png")}else{const c=ct?.findCredential(t);if(c?.token){const u=t.includes("?")?"&":"?";t=`${t}${u}token=${c.token}`}}return{url:t,width:a,height:h}}).catch(()=>({url:t,width:e,height:e}))}let R=null;const H=[255,255,255];function Y(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function he(t,e,i){const{backgroundColor:n,outline:o,dotSize:r}=t,a=22,h=.8,c=Math.round(a*a/Math.max(r,.5)**2*h),u=window.devicePixelRatio,y=document.createElement("canvas"),f=a*u;y.width=f,y.height=f,y.style.width=y.width/u+"px",y.style.height=y.height/u+"px";const s=y.getContext("2d");if(n&&(s.fillStyle=n.toCss(!0),s.fillRect(0,0,f,f),s.fill()),s.fillStyle=e?.toCss(!0)??"",R&&R.length/2===c)for(let l=0;l<2*c;l+=2){const x=R[l],$=R[l+1];s.fillRect(x,$,r*u,r*u),s.fill()}else{R=[];for(let l=0;l<2*c;l+=2){const x=Y(0,f),$=Y(0,f);R.push(x,$),s.fillRect(x,$,r*u,r*u),s.fill()}}o&&(o.color&&(s.strokeStyle=o.color.toCss(!0)),s.lineWidth=o.width,s.strokeRect(0,0,f,f));const d=new Image(a,a);return d.src=y.toDataURL(),d.ariaLabel=null,d.alt="",d}function fe(t,e={}){const i=e.radius||40,n=2*Math.PI*i,o=t.length,r=n/o,a=[],h=mt(e.outline);h?.width!=null&&(h.width*=2),(h||e.backgroundColor)&&a.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:h,offset:[0,0]});const c=e.values,u=c&&c.length===o&&c.reduce((l,x)=>l+x,0)===100,y=[0];for(let l=0;l<o;l++){let x=null;u&&(x=c[l]*n/100,y.push(x+y[l])),a.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(x??r)/2} ${n}`,dashoffset:"-"+(u?y[l]/2:l*(r/2)),color:t[l]},offset:[0,0]})}let f=null;const s=2*i+(h?.width||0),d=e.holePercentage;if(d){h&&a.push({shape:{type:"circle",cx:i,cy:i,r:i*d},fill:null,stroke:h,offset:[0,0]});const l=s/2;f=[[{shape:{type:"circle",cx:l,cy:l,r:l},fill:H,stroke:h?{...h,color:H}:null,offset:[0,0]},{shape:{type:"circle",cx:l,cy:l,r:i*d},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return Tt([a],[s,s],{cssEffectFilter:e.cssEffectFilter,ignoreStrokeWidth:!0,masking:f,rotations:[-90],ariaLabel:e.ariaLabel})}function ue(t,e={}){const o=e.align==="horizontal",r=o?75:24,a=o?24:75,h=e.width??r,c=e.height??a,u=e.gradient??!0,y=window.devicePixelRatio,f=h*y,s=c*y,d=document.createElement("canvas");d.width=f,d.height=s,d.ariaLabel=e.ariaLabel??null,d.style.width=`${h}px`,d.style.height=`${c}px`;const l=d.getContext("2d"),x=o?f:0,$=o?0:s;if(u){const k=l.createLinearGradient(0,0,x,$),b=t.length,p=b===1?0:1/(b-1);t.forEach((M,E)=>k.addColorStop(E*p,M.toString())),l.fillStyle=k,l.fillRect(0,0,f,s)}else{const k=o?f/t.length:f,b=o?s:s/t.length;let p=0,M=0;for(const E of t)l.fillStyle=E.toString(),l.fillRect(p,M,k,b),p=o?p+k:0,M=o?0:M+b}const v=document.createElement("div");return v.style.width=`${h}px`,v.style.height=`${c}px`,Zt(v,e?.cssEffectFilter),v.appendChild(d),v}function Qt(t){const e=t.match(/drop-shadow\(\s*([^\s]+)\s+[^\s]+\s+[^\s]+\s+.+?\)/);return e?e[1]:null}function Zt(t,e){if(!e)return;t.style.filter=e;const i=Qt(e);if(i){const n=Q(Z(i));n<0?t.style.marginLeft=`${Math.abs(n)}px`:t.style.marginRight=`${n}px`}}async function Jt(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await I(()=>import("./previewWebStyleSymbol-B8utxPKA.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url);return i(t,Jt,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await I(()=>import("./previewSymbol3D-DTUfxI3G.js"),__vite__mapDeps([5,1,2,3,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,4,24,25,26,27,28,29,30,31]),import.meta.url);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await I(()=>import("./previewSymbol2D-Buhw5QED.js"),__vite__mapDeps([32,1,2,3,6,7,8,33,34,35,9,10,11,12,13,14,15,16,17,18,19,20,24,25,26,27,28,29,30,31]),import.meta.url);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await I(()=>import("./previewCIMSymbol-BH17RHuP.js"),__vite__mapDeps([36,1,2,3,37,38,39,40,41,42,16,17,33,43,44,31,30,45,46,47,48,49,50,51,6,7,8,52,53,54,55,56,57,58,34,9,10,11,12,13,14,15,18,19,24,25,26,27,28,29]),import.meta.url);return i(t,e)}default:return}}function rt(t){return t&&t.opacity!==void 0?t.opacity*("parent"in t?rt(t.parent):1):1}async function de(t,e){if(!t)return;const i=t.sourceLayer,n=(e!=null&&e.useSourceLayer?i:t.layer)??i,o=e?.ignoreOpacity?1:rt(n);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const p=t.symbol.type==="web-style"?await t.symbol.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):t.symbol.clone();return j(p,null,{add:o}),p}const r=e?.renderer??Xt(n);let a=r&&"getSymbolAsync"in r?await r.getSymbolAsync(t,e):null;if(!a)return;if(a=a.type==="web-style"?await a.fetchSymbol({...e,acceptedFormats:e?.webStyleAcceptedFormats,cache:e?.webStyleCache}):a.clone(),!(r&&"visualVariables"in r&&r.visualVariables?.length&&Kt(a)))return j(a,null,{add:o}),a;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&e?.arcade==null){const p={...e};p.arcade=await ut(),e=p}const{getColor:h,getOpacity:c,getAllSizes:u,getRotationAngle:y}=await I(()=>import("./visualVariableUtils-D_kT-o6u.js").then(p=>p.v),__vite__mapDeps([59,1,2,3,60]),import.meta.url),f=[],s=[],d=[],l=[];for(const p of r.visualVariables)switch(p.type){case"color":f.push(p);break;case"opacity":s.push(p);break;case"rotation":l.push(p);break;case"size":p.target||d.push(p)}const x=!!f.length&&f[f.length-1],$=x?h(x,t,e):null,v=!!e?.ignoreOpacity,k=!!s.length&&s[s.length-1],b=k?c(k,t,e):null;if(j(a,$,v?void 0:{override:b,add:o}),d.length&&e?.ignoreSizeVariables!==!0){const p=u(d,t,e);await pt(a,p)}if(e?.ignoreRotationVariables!==!0)for(const p of l)gt(a,y(p,t,e),p.axis);return a}function Kt(t){return!dt(t)||t.symbolLayers.at(0)?.type!=="water"}function Xt(t){if(t)return"renderer"in t?t.renderer:void 0}export{tt as $,et as A,Ot as C,de as F,Gt as L,Ct as N,Dt as R,X as S,ue as V,fe as a,Jt as b,ce as d,Tt as l,Ut as q,he as w};
