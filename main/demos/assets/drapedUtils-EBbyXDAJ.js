import{b_ as m,bN as c}from"./main-Crkq4LWq.js";function u(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function h(t){let e=0,r=0;for(let n=0;n<t.length;n++){const s=t[n].size;typeof s=="number"&&(e+=s,r++)}return e/r}function p(t,e){return typeof t=="number"?t:t?.stops?.length?h(t.stops):e}function b(t,e){if(!e)return t;const r=e.filter(o=>o.type==="size").map(o=>{const{maxSize:f,minSize:i}=o;return(p(f,t)+p(i,t))/2});let n=0;const s=r.length;if(s===0)return t;for(let o=0;o<s;o++)n+=r[o];const a=Math.floor(n/s);return Math.max(a,t)}function M(t){const e=t?.renderer,r=t?.pointerType,n=r==="touch"?9:6;if(!e)return n;const s="visualVariables"in e?b(n,e.visualVariables):n;if(e.type==="simple")return u(s,e.symbol);if(e.type==="unique-value"){let a=s;return e.uniqueValueInfos?.forEach(o=>{a=u(a,o.symbol)}),a}if(e.type==="class-breaks"){let a=s;return e.classBreakInfos.forEach(o=>{a=u(a,o.symbol)}),a}return e.type==="dot-density"||e.type,s}function z(t,e,r,n=new m){let s=0;if(r.type==="2d")s=e*(r.resolution??0);else if(r.type==="3d"){const x=r.overlayPixelSizeInMapUnits(t),l=r.basemapSpatialReference;s=l==null||l.equals(r.spatialReference)?e*x:c(l)/c(r.spatialReference)}const a=t.x-s,o=t.y-s,f=t.x+s,i=t.y+s,{spatialReference:y}=r;return n.xmin=Math.min(a,f),n.ymin=Math.min(o,i),n.xmax=Math.max(a,f),n.ymax=Math.max(o,i),n.spatialReference=y,n}function v(t,e,r){const n=r.toMap(t);return n==null?!1:z(n,M(),r,d).intersects(e)}const d=new m;export{v as i,M as o,z as r};
