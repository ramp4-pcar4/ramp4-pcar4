const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./projectOperator-K7s_Lk6-.js","./preload-helper-DMGCcr4D.js","./operatorProject-DBdV7MBC.js","./SimpleGeometryCursor-B92kdZ15.js","./main-CtmwM019.js","./main-DZFs8ecF.css","./projectOperator-CkgtQUUN.js","./geographicTransformationUtils-B9-A1Z74.js","./projectBuffer-C2_ZDxbj.js","./zscale-kI9JnN2z.js"])))=>i.map(i=>d[i]);
import{_ as Z}from"./preload-helper-DMGCcr4D.js";import{V as Y,_ as R,Y as T,Z as H,aB as K,aa as ue,f as ce,ip as fe,g$ as pe,hs as V,D as A,eY as me,ai as U,T as E,dK as d,d3 as q,aF as B,gu as F,cn as de,cj as he,aI as ge,aH as ye,dX as Re,s as we,U as x,j as X}from"./main-CtmwM019.js";import{o as S,C as xe}from"./projectBuffer-C2_ZDxbj.js";import{o as _e}from"./zscale-kI9JnN2z.js";var W;let y=W=class extends Y{constructor(e){super(e),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new W({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};R([T()],y.prototype,"isInverse",void 0),R([T()],y.prototype,"wkt",void 0),R([T()],y.prototype,"wkid",void 0),y=W=R([H("esri.geometry.operators.support.GeographicTransformationStep")],y);var C;let v=C=class extends Y{constructor(e){super(e),this.steps=[]}getInverse(){const e=new C;for(let t=this.steps.length-1;t>=0;t--){const n=this.steps[t];e.steps.push(n.getInverse())}return e}};R([T({type:[y],nonNullable:!0})],v.prototype,"steps",void 0),v=C=R([H("esri.geometry.operators.support.GeographicTransformation")],v);function N(e,t,n,a,s,r){return O[0]=e,O[1]=t,O[2]=n,S(O,a,0,s,r,0)}const O=K();let j=null,$=null,P=null,w=null,G={};const D=new ce;function _(){return!!($?.isLoaded()&&P?.isLoaded()&&w?.isLoaded())}function J(){return!!_()||(X(D),I(),!1)}function ve(e,t){return!e||!t||h(e,t)||J()}function je(e,t){return!h(e,t)&&!_()}async function I(e){j==null&&(j=Promise.all([Z(()=>import("./projectOperator-K7s_Lk6-.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(t=>($=t,$.load())),Z(()=>import("./projectOperator-CkgtQUUN.js"),__vite__mapDeps([6,1,2,3,4,5]),import.meta.url).then(t=>(P=t,P.load())),Z(()=>import("./geographicTransformationUtils-B9-A1Z74.js"),__vite__mapDeps([7,1,4,5,8,9]),import.meta.url).then(t=>(w=t,w.load()))])),await j,ue(e),D.notify()}function Q(e,t,n){return Array.isArray(e)?e.length===0?[]:(fe(e),b(e,e[0].spatialReference,t,n)):(pe(e),b([e],e.spatialReference,t,n)[0])}function b(e,t,n,a){if(t==null||n==null)return e;if(h(t,n,a))return e.map(s=>z(s,t,n));if(a?.geographicTransformation==null&&V(t))return e.map(s=>z(s,t,A.WGS84)).map(s=>k(s,n));if(a?.geographicTransformation==null&&V(n))return e.map(s=>k(s,A.WGS84)).map(s=>z(s,A.WGS84,n));if(!_())throw new ne;if(!a?.geographicTransformation){if(a?.extendedParams)a={...a,geographicTransformation:w.getTransformation(t,n,a.areaOfInterestExtent)||new v};else if(!a?.areaOfInterestExtent){const s=$e(t,n);let r=G[s];r||(r=w.getTransformation(t,n)||new v,G[s]=r),a={geographicTransformation:r}}}return e[0].spatialReference||(e[0].spatialReference=t),e[0]instanceof me?$.executeMany(e,n,a):P.executeMany(e,n,a)}function $e(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}function Pe(e,t){const n=ee([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function ee(e,t){if(!_()){for(const n of e)if(n!=null&&!E(n.spatialReference,t)&&d(n.spatialReference)&&d(t)&&!h(n.spatialReference,t))return X(D),{pending:I(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:E(n.spatialReference,t)?n:d(n.spatialReference)&&d(t)?k(n,t):null)}}class ne extends we{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function Ie(){j=null,$=null,P=null,w=null,G={}}const ke={get loadPromise(){return j}};function k(e,t){try{const n=Q(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const a=_e(n.type,e.spatialReference,t);return a?.(n),n}catch(n){if(!(n instanceof ne))throw n;return null}}async function Le(e,t,n){const a=e.spatialReference;return a!=null&&t!=null&&await te(a,t,null,n),k(e,t)}function h(e,t,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!E(e,t)||d(e)&&d(t)&&!!xe(e,t))}function Me(e,t){if(E(e,t))return!0;if(!d(e)||!d(t))return!1;const n=q(e)||B(e)||F(e),a=q(t)||B(t)||F(t);return n&&a}async function te(e,t,n,a){if(_())return U(a);if(Array.isArray(e)){for(const{source:s,dest:r,options:u}of e)if(s&&r&&!h(s,r,u))return I(a)}else if(e&&t&&!h(e,t,n))return I(a);return U(a)}function z(e,t,n){return e?"x"in e?ae(e,t,new de,n,0):"xmin"in e?ie(e,t,new he,n,0):"rings"in e?oe(e,t,new ge,n,0):"paths"in e?re(e,t,new ye,n,0):"points"in e?se(e,t,new Re,n,0):null:null}function Oe(e,t,n=t.spatialReference,a=0){return n!=null&&e.spatialReference!=null&&ae(e,e.spatialReference,t,n,a)!=null}function ae(e,t,n,a,s){l[0]=e.x,l[1]=e.y;const r=e.z;return l[2]=r!==void 0?r:s,S(l,t,0,l,a,0)?(n.x=l[0],n.y=l[1],n.spatialReference=a,r!==void 0||x(a)?(n.z=l[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function Te(e,t,n=t.spatialReference,a=0){return e.spatialReference!=null&&n!=null&&se(e,e.spatialReference,t,n,a)!=null}function se(e,t,n,a,s){const{points:r,hasZ:u,hasM:i}=e,o=[],p=r.length,m=[];for(const c of r)m.push(c[0],c[1],u?c[2]:s);if(!S(m,t,0,m,a,0,p))return null;const f=u||x(a);for(let c=0;c<p;++c){const g=3*c,L=m[g],M=m[g+1];f&&i?o.push([L,M,m[g+2],r[c][3]]):f?o.push([L,M,m[g+2]]):i?o.push([L,M,r[c][2]]):o.push([L,M])}return n.points=o,n.spatialReference=a,n.hasZ=u,n.hasM=i,n}function ze(e,t,n=t.spatialReference,a=0){return e.spatialReference!=null&&n!=null&&re(e,e.spatialReference,t,n,a)!=null}function re(e,t,n,a,s){const{paths:r,hasZ:u,hasM:i}=e,o=[];if(!le(r,u??!1,i??!1,t,o,a,s))return null;const p=u||x(a);return n.paths=o,n.spatialReference=a,n.hasZ=p,n.hasM=i,n}function Ee(e,t,n=t.spatialReference,a=0){return e.spatialReference!=null&&n!=null&&oe(e,e.spatialReference,t,n,a)!=null}function oe(e,t,n,a,s){const{rings:r,hasZ:u,hasM:i}=e,o=[];if(!le(r,u??!1,i??!1,t,o,a,s))return null;const p=u||x(a);return n.rings=o,n.spatialReference=a,n.hasZ=p,n.hasM=i,n}function Se(e,t,n=t.spatialReference,a=0){return e.spatialReference!=null&&n!=null&&ie(e,e.spatialReference,t,n,a)!=null}function ie(e,t,n,a,s){const{xmin:r,ymin:u,xmax:i,ymax:o,hasZ:p,hasM:m}=e,f=p?e.zmin:s;if(!N(r,u,f,t,l,a))return null;const c=p||x(a);n.xmin=l[0],n.ymin=l[1],c&&(n.zmin=l[2]);const g=p?e.zmax:s;return N(i,o,g,t,l,a)?(n.xmax=l[0],n.ymax=l[1],c&&(n.zmax=l[2]),m&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=a,n):null}function le(e,t,n,a,s,r,u=0){const i=new Array;for(const m of e)for(const f of m)i.push(f[0],f[1],t?f[2]:u);if(!S(i,a,0,i,r,0))return!1;let o=0;s.length=0;const p=t||x(r);for(const m of e){const f=new Array;for(const c of m)p&&n?f.push([i[o++],i[o++],i[o++],c[3]]):p?f.push([i[o++],i[o++],i[o++]]):n?(f.push([i[o++],i[o++],c[2]]),o++):(f.push([i[o++],i[o++]]),o++);s.push(f)}return!0}const l=K(),Ge=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:h,initializeProjection:te,isEqualBaseGCS:Me,isLoaded:_,isLoadedOrLoad:J,isLoadedOrLoadFor:ve,load:I,project:Q,projectExtent:Se,projectMany:b,projectMultipoint:Te,projectOrLoad:Pe,projectOrLoadMany:ee,projectPoint:Oe,projectPolygon:Ee,projectPolyline:ze,projectWithZConversion:Le,projectWithoutEngine:z,requiresLoad:je,test:ke,tryProjectWithZConversion:k,unload:Ie},Symbol.toStringTag,{value:"Module"}));export{Oe as $,b as B,k as F,_ as G,Le as H,h as J,Me as K,I as L,te as N,z as Q,Q as W,Pe as X,ee as Y,ve as b,v as c,y as i,Ee as o,Ge as p,N as t};
