import{s as P,t as h}from"./SimpleGeometryCursor-B92kdZ15.js";import{j as m,a as i,f as l,b as d,N as p,n as G,y as v}from"./Point2D-Cl-0kgBQ.js";import{v as x,i as _,e as s,b as a,u as w,_ as M,y as D,j as E}from"./ProjectionTransformation-BpSsk8S9.js";import{Envelope2D as q}from"./Envelope2D-D_vzSDeK.js";class X{getOperatorType(){return 10102}supportsCurves(){return!0}accelerateGeometry(o,u,e){return!1}canAccelerateGeometry(o){return!1}executeMany(o,u,e){return new Y(u,o,e)}execute(o,u){return f(o)}isConvex(o,u){if(m(o),o.isEmpty())return!0;const e=o.getGeometryType();if(e===i.enumPoint)return!0;if(e===i.enumEnvelope){const r=o;return r.getXMin()!==r.getXMax()&&r.getYMin()!==r.getYMax()}if(l(e)){const r=o;return!r.getStartXY().equals(r.getEndXY())}if(e===i.enumMultiPoint)return o.getPointCount()===1;if(e===i.enumPolyline){const r=o;return r.getPathCount()===1&&r.getPointCount()===2&&!r.getXY(0).equals(r.getXY(1))}if(e===i.enumGeometryCollection){const r=o;return r.getGeometryCount()===1&&this.isConvex(r.getGeometry(0),u)}const t=o;return!(t.getPathCount()!==1||t.getPointCount()<3)&&x(t,0)}constructOrientedMinimumBoundingBox(o,u,e,t,r){_(o,u,e,t,r)}}class Y extends h{constructor(o,u,e){super(),u||d(""),this.m_progressTracker=e,this.m_index=-1,this.m_bMerge=o,this.m_bDone=!1,this.m_inputGeometryCursor=u}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}next(){if(this.m_bMerge){if(!this.m_bDone){const o=C(this.m_inputGeometryCursor);return this.m_bDone=!0,o}return null}if(!this.m_bDone){const o=this.m_inputGeometryCursor.next();if(o!==null)return p(o),m(o),this.m_index=this.m_inputGeometryCursor.getGeometryID(),f(o);this.m_bDone=!0}return null}}function C(n,o){const u=new E;let e;for(;e=n.next();)p(e),m(e),u.addGeometry(e);return u.getBoundingGeometry()}function f(n,o){if(m(n),n.isEmpty())return n.createInstance();const u=n.getGeometryType();if(l(u)){const e=n;if(e.isDegenerate(0)){const t=new s;return e.queryStart(t),t}if(e.getGeometryType()===i.enumLine){const t=new s,r=new a({vd:n.getDescription()});return e.queryStart(t),r.startPathPoint(t),e.queryEnd(t),r.lineToPoint(t),r}{const t=new a({vd:n.getDescription()});return t.addSegment(e,!0),f(t)}}if(u===i.enumEnvelope){const e=n,t=new q;if(e.queryEnvelope(t),t.xmin===t.xmax&&t.ymin===t.ymax){const r=new s;return e.queryCornerByVal(0,r),r}if(t.xmin===t.xmax||t.ymin===t.ymax){const r=new s,g=new a({vd:n.getDescription()});return e.queryCornerByVal(0,r),g.startPathPoint(r),e.queryCornerByVal(1,r),g.lineToPoint(r),g}{const r=new w({vd:n.getDescription()});return r.addEnvelope(e,!1),r}}if(u===i.enumGeometryCollection)return C(M(n,-1));if(y(n)){if(u===i.enumMultiPoint){const e=n,t=new s;return e.getPointByVal(0,t),t}return n}return G(v(u)),D(n)}function y(n,o){if(m(n),n.isEmpty())return!0;const u=n.getGeometryType();if(u===i.enumPoint)return!0;if(u===i.enumEnvelope){const t=n;return t.getXMin()!==t.getXMax()&&t.getYMin()!==t.getYMax()}if(l(u)){const t=n;if(t.isDegenerate(0))return!1;if(u===i.enumLine)return!0;const r=new a;return r.addSegment(t,!0),y(r)}if(u===i.enumMultiPoint)return n.getPointCount()===1;if(u===i.enumPolyline){const t=n;return!t.hasNonLinearSegments()&&t.getPathCount()===1&&t.getPointCount()===2&&!t.getXY(0).equals(t.getXY(1))}if(u===i.enumGeometryCollection){const t=n;return t.getGeometryCount()===1&&y(t.getGeometry(0))}const e=n;return!(e.getPathCount()!==1||e.getPointCount()<3)&&x(e,0)}const c=new X;function V(n){return c.execute(n,null)}function k(n,o){const u=c.executeMany(new P(n),o,null);return Array.from(u)}function I(n){return c.isConvex(n,null)}function L(){return c.supportsCurves()}export{I as D,k as _,L as q,V as w};
