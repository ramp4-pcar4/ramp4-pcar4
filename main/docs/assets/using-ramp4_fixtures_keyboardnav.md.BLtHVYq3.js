import{_ as a,c as i,o as e,ag as n}from"./chunks/framework.CshwDK8X.js";const k=JSON.parse('{"title":"Keyboard Navigation Fixture","description":"","frontmatter":{},"headers":[],"relativePath":"using-ramp4/fixtures/keyboardnav.md","filePath":"using-ramp4/fixtures/keyboardnav.md"}'),t={name:"using-ramp4/fixtures/keyboardnav.md"};function l(r,s,p,h,o,d){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="keyboard-navigation-fixture" tabindex="-1">Keyboard Navigation Fixture <a class="header-anchor" href="#keyboard-navigation-fixture" aria-label="Permalink to &quot;Keyboard Navigation Fixture&quot;">​</a></h1><p>The keyboard navigation fixture provides a command palette style workflow for people who rely on a keyboard or screen reader. It exposes a global shortcut (<code>S</code>) that opens a chain of keys you can use to focus panels, launch feature namespaces, and run fixture-specific actions without touching the mouse.</p><p>While RAMP ships with a help overlay that lists every registered shortcut, each fixture is responsible for registering its own namespace and actions. This page explains how to enable the fixture, how the navigation flow works, and how to wire up custom shortcuts from your fixture code.</p><h2 id="enabling-the-fixture" tabindex="-1">Enabling the Fixture <a class="header-anchor" href="#enabling-the-fixture" aria-label="Permalink to &quot;Enabling the Fixture&quot;">​</a></h2><ol><li>Add <code>keyboardnav</code> to the list of fixtures that load at startup.</li><li>(Optional) Provide an empty <code>keyboardnav</code> configuration object if you prefer to keep all fixtures explicitly listed in the config.</li></ol><div class="language-jsonc vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;startingFixtures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;legend&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;appbar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;keyboardnav&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;fixtures&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;keyboardnav&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Once the fixture is active you can press <code>S</code> anywhere inside RAMP to start a keyboard navigation chain.</p><h2 id="default-controls" tabindex="-1">Default Controls <a class="header-anchor" href="#default-controls" aria-label="Permalink to &quot;Default Controls&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Keys</th><th>Behaviour</th></tr></thead><tbody><tr><td><code>S</code></td><td>Start the keyboard navigation chain (root command).</td></tr><tr><td><code>S</code> + <code>&lt;namespace&gt;</code></td><td>Activate a fixture namespace (for example <code>D</code> for Draw tools).</td></tr><tr><td><code>S H</code></td><td>Toggle the built-in help overlay that lists every namespace and action.</td></tr><tr><td><code>1</code>-<code>5</code></td><td>Focus the corresponding open panel while the chain is idle.</td></tr><tr><td><code>Backspace</code></td><td>Step back one key in the current chain.</td></tr><tr><td><code>Escape</code></td><td>Cancel the current chain, or close the focused panel when idle.</td></tr></tbody></table><p>Once a namespace is active the fixture decides which action keys are available. Every action is described in the help overlay so that users can explore with <code>S H</code> at any time.</p><h2 id="registering-shortcuts-in-a-fixture" tabindex="-1">Registering Shortcuts in a Fixture <a class="header-anchor" href="#registering-shortcuts-in-a-fixture" aria-label="Permalink to &quot;Registering Shortcuts in a Fixture&quot;">​</a></h2><p>Use the <code>keyboardNav</code> API on <code>$iApi</code> to register namespaces and manage the navigation chain. The main entry points are:</p><ul><li><code>register(namespace: string, options: NamespaceRegistration): string</code> - registers a namespace and returns the letter that ultimately gets assigned.</li><li><code>reset(): KeyboardnavChainAction</code> - rewinds the chain to the active namespace without closing it, matching the <code>&#39;reset&#39;</code> chain action.</li><li><code>clear(event?: KeyboardEvent): KeyboardnavChainAction</code> - exits the chain entirely (and optionally forwards the original keyboard event), matching the <code>&#39;clear&#39;</code> chain action.</li></ul><p>The example below shows how to request the <code>D</code> namespace for draw tools and wire up two shortcut keys.</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Inside a fixture</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onMounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> keyboardNav</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iApi.keyboardNav;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keyboardNav) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Keyboard navigation fixture is not available; skipping shortcut registration.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> namespace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keyboardNav.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">register</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        name: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            en: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Draw tools&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fr: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Outils de dessin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        activeHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Do something when namespace is active</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        deactiveHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Do something when namespace is no longer active</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        keys: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;L&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                description: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    en: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Draw a line&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    fr: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Tracer une ligne&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    drawStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActiveTool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;polyline&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // We don&#39;t want to keep drawing lines, so reset keyboard navigation back to all draw tools.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    keyboardNav.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;C&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                description: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    en: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Clear graphics&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    fr: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Effacer les graphiques&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">_store</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    drawStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearGraphics</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // Exit the keyboard navigation chain entirely.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keyboardNav.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Keyboard navigation namespace registered: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p>If the letter you request is already taken or reserved (currently <code>H</code>), the fixture automatically assigns the next available letter and returns it.</p><h2 id="registration-options-reference" tabindex="-1">Registration Options Reference <a class="header-anchor" href="#registration-options-reference" aria-label="Permalink to &quot;Registration Options Reference&quot;">​</a></h2><p>The <code>register</code> method accepts a <code>NamespaceRegistration</code> object. Each field is optional unless stated otherwise.</p><ul><li><strong>name</strong> (<code>Record&lt;string, string&gt;</code>, required): Localized label for the namespace. Keys should match available locale codes (for example <code>en</code>, <code>fr</code>).</li><li><strong>keys</strong> (<code>KeyItem[]</code>, required): List of actions exposed once the namespace is active.</li><li><strong>handler</strong> (<code>(store: KeyboardnavStore, event: KeyboardEvent, key: string) =&gt; KeyboardnavChainAction | void</code>, optional): Parent handler that can respond to any key in the namespace. Use this when every key shares the same logic. The third argument is the uppercase key that was pressed.</li><li><strong>activeHandler</strong> (<code>(store: KeyboardnavStore, event?: KeyboardEvent) =&gt; void</code>, optional): Invoked when the namespace becomes active (after <code>S</code> plus the namespace letter). Handy for priming state or caching the returned namespace.</li><li><strong>deactiveHandler</strong> (<code>(store: KeyboardnavStore, event?: KeyboardEvent) =&gt; void</code>, optional): Invoked when the namespace is dismissed without suppression. Use it to clean up focus or reset state.</li></ul><p>Each <code>KeyItem</code> entry supports the following properties:</p><ul><li><strong>key</strong> (<code>string</code>, required): The single character (A-Z, 0-9, etc.) that triggers the action. It is stored in uppercase.</li><li><strong>description</strong> (<code>Record&lt;string, string&gt;</code>, required): Localized description shown in the help overlay.</li><li><strong>handler</strong> (<code>(store: KeyboardnavStore, event: KeyboardEvent) =&gt; KeyboardnavChainAction | void</code>, optional): Called when the user completes the chain with this key. Return a chain action (see below) to control how the sequence proceeds. If you omit the handler you must supply a namespace-level <code>handler</code> instead.</li></ul><p>The first parameter passed to every callback is the <code>KeyboardnavStore</code> instance for convenience, so you can query existing namespaces or state without importing the store directly.</p><h2 id="chain-actions" tabindex="-1">Chain Actions <a class="header-anchor" href="#chain-actions" aria-label="Permalink to &quot;Chain Actions&quot;">​</a></h2><p>Handlers can influence how the navigation chain behaves by returning a <code>KeyboardnavChainAction</code> value:</p><ul><li><code>keyboardNav.reset()</code> (or returning <code>&#39;reset&#39;</code>) removes the most recent key from the chain and keeps the namespace active so another action can be chosen immediately.</li><li><code>keyboardNav.clear(event?)</code> (or returning <code>&#39;clear&#39;</code>) clears the entire chain, optionally forwarding the triggering <code>KeyboardEvent</code>, and puts the navigation system back into its idle state.</li></ul><p>Both helpers update the store consistently, so handlers rarely need to mutate the store directly.</p><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ul><li>Call <code>keyboardNav.reset()</code> after actions that keep the namespace available (for example switching draw tools).</li><li>Call <code>keyboardNav.clear()</code> after destructive or one-off actions (closing panels, clearing data) so that accessibility focus returns to the idle state.</li><li>Provide descriptions for every key so the help overlay remains useful.</li><li>Consider storing the returned namespace letter if your fixture can be configured with custom keys - this makes it easy to surface the active shortcut in your UI.</li><li>If your fixture renders focusable elements while a namespace is active, use the <code>activeHandler</code>/<code>deactiveHandler</code> hooks to move focus in a screen-reader friendly way.</li></ul>`,28)]))}const E=a(t,[["render",l]]);export{k as __pageData,E as default};
