import{bZ as me,le as U,c3 as W,lf as he,c4 as Y,c5 as X,b_ as pe,fl as ge,fp as L,c6 as x,hT as ve,gN as re,fr as se,gM as O,fs as ie,c7 as le,c8 as J,c9 as i,ca as Q,cb as q,cc as j,cd as _,ce as y,ch as o,fo as p,ci as ae,cj as oe,cg as V,hH as G,cf as de,lg as ye,lh as fe,k7 as _e,hY as be,li as we,gG as ee,gH as xe}from"./main-8009ebf4.js";import{H as $e}from"./hilight-defs-1101779f.js";import{T as ue}from"./toggle-switch-control-27d44b5c.js";import{l as ke}from"./linkify-html.es-e51a510f.js";import"./preload-helper-388ac9d5.js";class Ae{id;name;template;componentId;constructor(e){const s={...typeof e=="string"?{id:e,template:"",name:""}:e};({template:this.template,id:this.id,name:this.name}=s)}}const te="details";class Le extends me{detailsStore=U(this.$vApp.$pinia);get config(){return super.config}openDetails(e){this.detailsStore.payload=e,this.$iApi.panel.get("details-layers").isOpen||this.$iApi.panel.open({id:"details-layers"})}toggleFeature(e,s){const t=this.$iApi.panel.get("details-layers");t.isOpen&&this.$iApi.panel.close(t);const u=this.$iApi.panel.get("details-items"),n={result:{items:[{data:e.data,format:e.format,loaded:!0,loading:Promise.resolve()}],uid:e.uid,loading:Promise.resolve(),loaded:!0}},g=this.$iApi.geo.layer.getLayer(e.uid),A=this.detailsStore.currentFeatureId,d=`${e.uid}-${g?.supportsFeatures?e.data[g?.oidField??""]:JSON.stringify(e.data)}`;this.detailsStore.currentFeatureId=e.data?d:void 0,s===!1?this.$iApi.panel.close(u):u.isOpen?A!==d||s===!0?u.show({screen:"item-screen",props:n}):this.$iApi.panel.close(u):this.$iApi.panel.open({id:"details-items",screen:"item-screen",props:n})}_parseConfig(e){e&&e.templates&&(this.detailsStore.defaultTemplates=e.templates),this.handlePanelWidths(["details-items","details-layers"]),this.handlePanelTeleports(["details-items","details-layers"]);const s=this.getLayerFixtureConfigs(),t=[];Object.keys(s).forEach(n=>{t.push({id:n,name:s[n].name,template:s[n].template})});const u=t.map(n=>new Ae(n));this.detailsStore.properties=u.reduce((n,g)=>(n[g.id]=g,n),{}),this._validateItems()}_validateItems(){Object.values(this.detailsStore.properties).forEach(e=>{e.template in this.$vApp.$options.components&&(this.detailsStore.properties[e.id].componentId=e.template)})}async hilightDetailsItems(e,s){const t=e instanceof Array?e:[e],u=this.$iApi.fixture.get("hilight");if(u){const n=await u.getGraphicsByKey(te);await u.removeHilight(n);const g=Date.now();this.detailsStore.lastHilight=g;const A=await this.getHilightGraphics(t,s);this.detailsStore.lastHilight===g&&await u.addHilight(A)}}async removeDetailsHilight(){const e=this.$iApi.fixture.get("hilight");if(e){this.detailsStore.lastHilight=Date.now();const s=await e.getGraphicsByKey(te);await e.removeHilight(s)}}async reloadDetailsHilight(e,s){const t=e instanceof Array?e:[e],u=this.$iApi.fixture.get("hilight");if(u){const n=await this.getHilightGraphics(t,s);u.reloadHilight(n)}}async getHilightGraphics(e,s){const t=this.$iApi.geo.layer.getLayer(s),u=this.$iApi.fixture.get("hilight"),n=[];return t&&await Promise.all(e.map(async g=>{const A=g.data[t.oidField],d=await t.getGraphic(A,{getGeom:!0,getAttribs:!0,getStyle:!0});d.id=u.constructGraphicKey(te,s,A),n.push(d)})),n}onHilightToggle(e,s,t){e?(this.hilightDetailsItems(s,t),this.detailsStore.hilightToggle=!0):(this.removeDetailsHilight(),this.detailsStore.hilightToggle=!1)}hasHilighter(){const e=this.$iApi.fixture.get("hilight");return e&&e.hilightMode.mode!==$e.NONE}}const Ie={key:0},Te={class:"p-5"},He=["onClick","disabled"],ze=p("div",{class:"flex-auto"},null,-1),Se={key:0,class:"px-5"},De={key:1,class:"px-5"},Me={key:2,class:"animate-spin spinner h-20 w-20 px-5"},Fe={key:1,class:"flex justify-center py-10 items-center"},Ee=p("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Ne={key:2},Ce=W({__name:"layers-screen",props:{panel:he},setup(b){const{t:e}=Y(),s=X("iApi"),t=pe(),u=ge(),n=U(),g=L([]),A=L(""),d=L([]),c=L([]),r=x(()=>n.activeGreedy),S=x(()=>n.slowLoadingFlag),w=x(()=>n.payload),H=x(()=>n.properties),F=x(()=>u.mobileView),B=x(()=>u.getRemainingWidth),I=x(()=>g.value.map(l=>l.items.length).reduce((l,v)=>l+v,0)),$=l=>{if(l===void 0)return;const v=s.panel.get("details-items"),h=v.width||350,k=F.value||B.value<h&&!v.isOpen||l.length===0?0:l[0].requestTime;n.activeGreedy=k,n.slowLoadingFlag=!1,g.value=l,m(l),N(l)},N=l=>{const v=s.panel.get("details-items");if(A.value&&v.isOpen){const h=g.value.findIndex(k=>k.uid===A.value);if(h!==-1){const k=g.value[h];k.loading.then(()=>{k.requestTime===r.value&&(k.items.length>0?(n.activeGreedy=0,D(h)):M(l))})}else M(l)}else M(l);setTimeout(()=>{r.value!==0&&l[0].requestTime===r.value&&(n.slowLoadingFlag=!0)},500)},M=l=>{const v=l.map(k=>k.loading.then(()=>k.items.length>0?Promise.resolve(k):Promise.reject())),h=l.length===0?0:l[0].requestTime;Promise.any(v).then(k=>{if(k.requestTime!==r.value)return;const f=g.value.findIndex(E=>E.uid===k.uid);n.activeGreedy=0,f!==-1&&D(f)}).catch(()=>{h===r.value&&(A.value="",n.activeGreedy=0,z())})},m=l=>{Promise.all(l.map(v=>v.loading)).then(()=>{s.updateAlert(s.$i18n.t("details.layers.found",{numResults:I.value,numLayers:l.length}))})},z=()=>{const l=s.panel.get("details-items");l.isOpen&&l.close()},D=l=>{if(w.value[l].items.length>0){n.activeGreedy=0;let v=s.panel.get("details-items"),h={result:w.value[l]};A.value=w.value[l].uid,v.isOpen?v.show({screen:"item-screen",props:h}):s.panel.open({id:"details-items",screen:"item-screen",props:h})}},P=l=>{const v=w.value[l];let h=t.getLayerByUid(v.uid);return h&&H.value[h.id]&&H.value[h.id].name?H.value[h.id].name:h?.name??""};return ve(()=>{c.value.push(re(w,l=>{$(l)},{deep:!1,immediate:!0}))}),se(()=>{d.value.push(s.event.on(O.PANEL_CLOSED,l=>{(l.id==="details-items"||l.id==="details-layers")&&(n.activeGreedy=0)})),c.value.push(re(r,l=>{l===0&&(n.slowLoadingFlag=!1)}))}),ie(()=>{d.value.forEach(l=>s.event.off(l)),c.value.forEach(l=>l())}),(l,v)=>{const h=le("panel-screen"),k=J("truncate");return i(),Q(h,{panel:b.panel},{header:q(()=>[j(_(y(e)("details.layers.title")),1)]),content:q(()=>[r.value===0?(i(),o("div",Ie,[p("div",Te,_(y(e)("details.layers.found",{numResults:I.value,numLayers:w.value.length})),1),(i(!0),o(ae,null,oe(g.value,(f,E)=>(i(),o("button",{type:"button",class:"w-full px-20 py-10 text-md flex hover:bg-gray-200 cursor-pointer disabled:cursor-default",key:f.uid,onClick:Z=>f.loaded&&D(E),disabled:!(f.loaded&&f.items.length>0)},[V((i(),o("div",null,[j(_(P(E)||y(e)("details.layers.loading")),1)])),[[k]]),ze,f.loaded?(i(),o("div",Se,_(f.items.length),1)):f.errored?(i(),o("div",De,_(y(e)("details.layers.error")),1)):(i(),o("div",Me))],8,He))),128))])):S.value?(i(),o("div",Fe,[Ee,j(" "+_(y(e)("details.item.loading")),1)])):(i(),o("div",Ne))]),_:1},8,["panel"])}}}),Ge={key:0},Oe={key:0},je={key:0},Be={key:0,class:"flex justify-between py-8 px-8 mb-8 bg-gray-100"},Pe={class:"p-8 font-bold break-words"},Re={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},Ve=["innerHTML"],qe={key:1,class:"flex-initial py-5 px-10"},Ze={key:2,class:"animate-spin spinner h-20 w-20 px-5"},Ke={key:1},Ue={key:1,class:"p-5"},We={key:1,class:"flex justify-center py-10 items-center"},Ye=p("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Je={key:2},Qe=W({__name:"result-screen",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},previousItemIndex:{type:Number,default:-1}},setup(b){const e=b,{t:s}=Y(),t=X("iApi"),u=U(),n=x(()=>u.properties),g=x(()=>u.activeGreedy),A=x(()=>u.slowLoadingFlag),d=x(()=>t.geo.layer.getLayer(e.result.uid)?.nameField),c=x(()=>{const m=t.geo.layer.getLayer(e.result.uid);return m&&n.value[m.id]&&n.value[m.id].name?n.value[m.id].name:m?.name??""}),r=L([]),S=L(!1),w=L([]),H=L(t.fixture.get("details")),F=L(!0);se(()=>{S.value=t.geo.layer.getLayer(e.result.uid)!==void 0,F.value=u.hilightToggle??F.value,F.value&&H.value.hilightDetailsItems(e.result.items,e.result.uid),t.updateAlert(t.$i18n.t("details.item.alert.show.list",{layerName:c.value})),w.value.push(t.event.on(O.LAYER_REMOVE,m=>{e.result.uid===m.uid&&e.panel.close()})),w.value.push(t.event.on(O.PANEL_CLOSED,m=>{m.id=="details-items"&&B()})),w.value.push(t.event.on(O.PANEL_MINIMIZED,m=>{m.id=="details-items"&&I()})),w.value.push(t.event.on(O.MAP_BASEMAPCHANGE,()=>{F.value&&H.value.reloadDetailsHilight(e.result.items,e.result.uid)}))}),ie(()=>{w.value.forEach(m=>t.event.off(m))});const B=()=>{H.value.removeDetailsHilight(),u.hilightToggle=!0},I=()=>{H.value.removeDetailsHilight()},$=m=>{e.panel.show({screen:"item-screen",props:{result:e.result,itemIndex:m}})},N=(m,z)=>{const D=t.geo.layer.getLayer(e.result.uid);if(D===void 0){console.warn(`could not find layer for uid ${e.result.uid} during icon lookup`);return}const P=D.oidField;return D.getIcon(m[P]).then(l=>{r.value[z]!==l&&(r.value[z]=l)}),r.value[z]},M=m=>{F.value=m,H.value.onHilightToggle(m,e.result.items,e.result.uid)};return(m,z)=>{const D=le("panel-screen"),P=J("truncate"),l=J("focus-item");return i(),Q(D,{panel:b.panel},{header:q(()=>[j(_(y(s)("details.items.title")),1)]),content:q(()=>[b.result.loaded&&g.value===0?(i(),o("div",Ge,[S.value?(i(),o("div",Oe,[b.result.items.length>0?(i(),o("div",je,[S.value?(i(),o("div",Be,[p("div",Pe,_(c.value),1)])):G("",!0),H.value.hasHilighter()?(i(),o("div",Re,[p("div",null,_(y(s)("details.togglehilight.title")),1),de(ue,{config:{value:F.value,disabled:!1},onToggled:M},null,8,["config"])])):G("",!0),(i(!0),o(ae,null,oe(b.result.items,(v,h,k,f)=>{const E=[r.value[h]];if(f&&f.key===h&&ye(f,E))return f;const Z=V((i(),o("button",{type:"button",class:"w-full flex px-16 py-10 text-md hover:bg-gray-200 cursor-pointer",key:h,onClick:ne=>v.loaded&&$(h),disabled:!v.loaded},[v.loaded?(i(),o("span",{key:0,innerHTML:N(v.data,h),class:"flex-none symbologyIcon"},null,8,Ve)):G("",!0),v.loaded?V((i(),o("span",qe,[j(_(d.value?v.data[d.value]:y(s)("details.result.default.name",[h+1])),1)])),[[P]]):G("",!0),v.loaded?G("",!0):(i(),o("span",Ze))],8,["onClick","disabled"])),[[l],[P]]);return Z.memo=E,Z},z,0),128))])):(i(),o("div",Ke,_(y(s)("details.layers.results.empty")),1))])):(i(),o("div",Ue,_(y(s)("details.item.no.data")),1))])):A.value?(i(),o("div",We,[Ye,j(" "+_(y(s)("details.item.loading")),1)])):(i(),o("div",Je))]),_:1},8,["panel"])}}}),Xe={class:"inline font-bold"},et=p("span",{class:"flex-auto"},null,-1),tt=["innerHTML"],st=W({__name:"esri-default",props:{fields:{type:Object,required:!0},identifyData:{type:Object,required:!0}},setup(b){const e=b,{t:s}=Y(),t=X("iApi"),u=()=>{const d={};Object.assign(d,e.identifyData.data),t?.ui.exposeOids||delete d[e.fields.find(r=>r.type==="oid").name],d.Symbol!==void 0&&delete d.Symbol;let c={};return e.fields.forEach(r=>{c[r.name]={name:r.alias||r.name,type:r.type}}),Object.keys(d).map(r=>{d[r]={value:typeof d[r]=="number"?t?.$i18n.n(d[r],"number"):d[r],alias:c[r].name||r,type:c[r].type}}),d},n=(d,c,r)=>{switch(r){case"date":return A(d);default:return g(d,c)}},g=(d,c)=>{if(!d)return d;if(d.trim().match(/\.(jpeg|jpg|gif|png)$/)||d.trim().match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i))return`<img src="${d}" alt="${s("details.item.alert.defaultAltText",{alias:c})}" />`;const r="underline text-blue-600 break-all",S=document.createElement("div");return S.innerHTML=d.trim(),S.firstElementChild?.tagName=="A"?(S.firstElementChild.className=r,S.innerHTML):ke(d,{className:r,target:"_blank",validate:{url:H=>/^https?:\/\//.test(H)}})},A=d=>{const c=parseInt(d);return isNaN(c)?d:new Date(c).toISOString().split("T")[0]};return(d,c)=>(i(),o("div",null,[(i(!0),o(ae,null,oe(u(),(r,S,w)=>(i(),o("div",{class:"p-5 pl-3 flex justify-end flex-wrap even:bg-gray-300",key:w},[p("span",Xe,_(r.alias),1),et,p("span",{class:"inline",innerHTML:n(r.value,r.alias,r.type)},null,8,tt)]))),128))]))}}),it=["innerHTML"],lt={key:1},at=W({__name:"html-default",props:{identifyData:{type:Object,required:!0}},setup(b){const{t:e}=Y();return(s,t)=>b.identifyData?(i(),o("div",{key:0,class:"whitespace-pre-wrap break-words h-full overflow-auto",innerHTML:b.identifyData.data.data??b.identifyData.data},null,8,it)):(i(),o("div",lt,_(y(e)("details.layers.results.empty")),1))}}),ot={key:0},nt={key:0,class:"p-8 font-bold break-words mb-8 bg-gray-100"},rt={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},dt={key:2,class:"flex flex-col justify-between p-8 mb-8 bg-gray-100"},ut={class:"flex justify-between"},ct=["aria-label"],mt={class:"flex bg-gray-200 py-8 items-center"},ht=["content","aria-label","disabled"],pt=p("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[p("g",null,[p("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),gt=[pt],vt={class:"px-8"},yt=["content","aria-label","disabled"],ft=p("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[p("g",null,[p("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1),_t=[ft],bt={key:3},wt={key:0},xt={key:0,class:"flex py-8 items-center"},$t=["innerHTML"],kt={key:1},At=p("div",{class:"animate-spin spinner h-20 w-20"},null,-1),Lt=[At],It={class:"flex-grow my-auto text-lg px-8"},Tt=["content","aria-label"],Ht={key:0,class:"m-auto animate-spin spinner h-20 w-20"},zt={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"green",class:"m-auto w-20 h-20"},St=p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1),Dt=[St],Mt={key:2,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"red",class:"m-auto w-20 h-20"},Ft=p("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),Et=[Ft],Nt={key:3,class:"m-auto",xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 0 24 24",width:"16"},Ct=p("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},null,-1),Gt=p("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Ot=p("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"},null,-1),jt=[Ct,Gt,Ot],Bt={key:1,class:"flex justify-center py-10 items-center"},Pt=p("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Rt={key:4,class:"p-5"},Vt={key:1,class:"flex justify-center py-10 items-center"},qt=p("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1),Zt={key:2},Kt=W({__name:"item-screen",props:{panel:{type:Object,required:!0},result:{type:Object,required:!0},itemIndex:{type:Number,default:0}},setup(b){const e=b,{t:s}=Y(),t=X("iApi"),u=U(),n=x(()=>u.defaultTemplates),g=x(()=>u.properties),A=x(()=>u.activeGreedy),d=x(()=>u.slowLoadingFlag),c=x(()=>e.result.items[$.value]),r=x(()=>{const T=t.geo.layer.getLayer(e.result.uid)?.nameField;return T&&c.value.loaded?c.value.data[T]:t.$i18n.t("details.items.title")}),S=x(()=>{const a=t.geo.layer.getLayer(e.result.uid);return a&&g.value[a.id]&&g.value[a.id].name?g.value[a.id].name:a?.name??""}),w=x(()=>t.geo.layer.getLayer(e.result.uid)?.supportsFeatures??!1),H=x(()=>w.value?t.geo.layer.getLayer(e.result.uid)?.fields||[]:[]),F=x(()=>{const a=t.geo.layer.getLayer(e.result.uid);return a&&g.value[a.id]&&g.value[a.id].template?g.value[a.id].template:n.value&&n.value[c.value.format]?n.value[c.value.format]:w.value?st:at}),B=L(""),I=L("none"),$=L(0),N=L(!1),M=L([]),m=L(t.fixture.get("details")),z=L(!0),D=L(),P=()=>{m.value.removeDetailsHilight(),u.hilightToggle=!0},l=()=>{m.value.removeDetailsHilight()},v=()=>{$.value=e.itemIndex??0,N.value=!0,z.value=u.hilightToggle??z.value,h()},h=()=>{if(f("none"),c.value.loaded)t.geo.layer.getLayer(e.result.uid)||(N.value=!1),Z(),t.updateAlert(`${t.$i18n.t("details.item.alert.show.item",{itemName:r.value})} ${e.result.items.length>1?t.$i18n.t("details.item.count",[$.value+1,e.result.items.length]):""}`),z.value&&w.value?m.value.hilightDetailsItems(e.result.items[$.value],e.result.uid):w.value||m.value.removeDetailsHilight();else{const a=$.value;c.value.loading.then(()=>{a===$.value&&h()})}},k=()=>{e.panel.show({screen:"results-screen",props:{result:e.result,previousItemIndex:$.value}})},f=a=>{a==="zoomed"||a==="error"?setTimeout(()=>{I.value=a,D.value?._tippy.show(),setTimeout(()=>{D.value?._tippy.hide(),I.value="none"},3e3)},300):I.value=a},E=a=>{$.value+=a,h()},Z=()=>{if(B.value="",!(c.value&&c.value.loaded))return;const a=t.geo.layer.getLayer(e.result.uid);if(a===void 0){console.warn(`could not find layer for uid ${e.result.uid} during icon lookup`);return}if(a.supportsFeatures){const T=a.oidField;let R=$.value;a.getIcon(c.value.data[T]).then(C=>{$.value===R&&(B.value=C)})}},ne=()=>{if(I.value!=="none")return;f("zooming");const a=t.geo.layer.getLayer(e.result.uid);if(a===void 0||!a.isLoaded){console.warn(`Could not find layer for uid ${e.result.uid} during zoom geometry lookup`),f("error");return}if(!c.value.loaded){console.warn("Details zoomToFeature call on item that is still loading. Should be impossible, alert the devs."),f("error");return}const T=c.value.data[a.oidField],R=()=>{const C={getGeom:!0};a.getGraphic(T,C).then(K=>{K.geometry.invalid()?(console.error(`Could not find graphic for objectid ${T}`),f("error")):(t.geo.map.zoomMapTo(K.geometry),f("zoomed"),t.updateAlert(t.$i18n.t("details.item.alert.zoom")))}).catch(()=>{f("error")})};a.layerType===be.FEATURE&&a.geomType!==we.POINT?a.getGraphicExtent(T).then(C=>{t.geo.map.zoomMapTo(C),f("zoomed"),t.updateAlert(t.$i18n.t("details.item.alert.zoom"))}).catch(()=>{R()}):R()},ce=a=>{z.value=a,m.value.onHilightToggle(a,e.result.items[$.value],e.result.uid)};return se(()=>{v(),M.value.push(t.event.on(O.LAYER_REMOVE,a=>{e.result.uid===a.uid&&e.panel.close()})),M.value.push(t.event.on(O.PANEL_CLOSED,a=>{a.id=="details-items"&&P()})),M.value.push(t.event.on(O.PANEL_MINIMIZED,a=>{a.id=="details-items"&&l()})),M.value.push(t.event.on(O.MAP_BASEMAPCHANGE,()=>{z.value&&m.value.reloadDetailsHilight(e.result.items[$.value],e.result.uid)}))}),ie(()=>{M.value.forEach(a=>t.event.off(a))}),fe(()=>{v()}),(a,T)=>{const R=le("panel-screen"),C=J("tippy");return i(),Q(R,{panel:b.panel},{header:q(()=>[j(_(y(s)("details.items.title")),1)]),content:q(()=>[b.result.loaded&&A.value===0?(i(),o("div",ot,[N.value?(i(),o("div",nt,_(S.value),1)):G("",!0),m.value.hasHilighter()&&w.value?(i(),o("div",rt,[p("div",null,_(y(s)("details.togglehilight.title")),1),de(ue,{config:{value:z.value,disabled:!1},onToggled:ce},null,8,["config"])])):G("",!0),N.value&&b.result.items.length>1?(i(),o("div",dt,[p("div",ut,[p("button",{type:"button",class:"px-8 font-bold hover:bg-gray-200 focus:bg-gray-200","aria-label":y(s)("details.item.see.list"),onClick:k},_(y(s)("details.item.see.list")),9,ct),p("div",mt,[V((i(),o("button",{type:"button",content:y(s)("details.item.previous.item"),onClick:T[0]||(T[0]=K=>E(-1)),class:"mx-2 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":y(s)("details.item.previous.item"),disabled:$.value===0},gt,8,ht)),[[C,{placement:"top"}]]),p("span",vt,_(y(s)("details.item.count",[$.value+1,b.result.items.length])),1),V((i(),o("button",{type:"button",content:y(s)("details.item.next.item"),onClick:T[1]||(T[1]=K=>E(1)),class:"mx-2 rotate-180 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":y(s)("details.item.next.item"),disabled:$.value===b.result.items.length-1},_t,8,yt)),[[C,{placement:"top"}]])])])])):G("",!0),N.value?(i(),o("div",bt,[c.value.loaded?(i(),o("div",wt,[w.value?(i(),o("div",xt,[B.value?(i(),o("span",{key:0,class:"flex-none symbologyIcon",innerHTML:B.value},null,8,$t)):(i(),o("div",kt,Lt)),p("span",It,_(r.value),1),V((i(),o("button",{type:"button",content:y(s)(`details.item.zoom${I.value==="none"?"":`.${I.value}`}`),"aria-label":y(s)(`grid.cells.zoom${I.value==="none"?"":`.${I.value}`}`),ref_key:"button",ref:D,onClick:T[2]||(T[2]=K=>ne()),class:"text-gray-600 m-8 w-24 h-24 p-2"},[I.value==="zooming"?(i(),o("div",Ht)):I.value==="zoomed"?(i(),o("svg",zt,Dt)):I.value==="error"?(i(),o("svg",Mt,Et)):(i(),o("svg",Nt,jt))],8,Tt)),[[C,{placement:"bottom"}]])])):G("",!0),(i(),Q(_e(F.value),{identifyData:c.value,fields:H.value},null,8,["identifyData","fields"]))])):(i(),o("div",Bt,[Pt,j(" "+_(y(s)("details.item.loading")),1)]))])):(i(),o("div",Rt,_(y(s)("details.item.no.data")),1))])):d.value?(i(),o("div",Vt,[qt,j(" "+_(y(s)("details.item.loading")),1)])):(i(),o("div",Zt))]),_:1},8,["panel"])}}});const Ut={en:{"details.layers.title":"Identified Layers","details.layers.found":"Found {numResults} results in {numLayers} layers","details.layers.loading":"The layer is loading...","details.layers.error":"Error","details.layers.results.empty":"No results found for the selected layer.","details.result.default.name":"Identify Item {0}","details.items.title":"Details","details.item.see.list":"See List","details.item.zoom":"Zoom to feature","details.item.zoom.zooming":"Zooming...","details.item.zoom.error":"Zoom failed","details.item.zoom.zoomed":"Zoomed","details.item.previous.item":"Previous item","details.item.next.item":"Next item","details.item.count":"{0} of {1}","details.item.loading":"Loading results...","details.item.no.data":"No data to show because the layer has been removed","details.item.alert.zoom":"Zoomed into feature","details.item.alert.show.item":"Showing result {itemName}","details.item.alert.show.list":"Showing all results for {layerName}","details.item.alert.defaultAltText":"Image associated with {alias} field","details.togglehilight.title":"Toggle Highlight"},fr:{"details.layers.title":"Couches désignées","details.layers.found":"{numResults} résultats trouvés dans {numLayers} couches","details.layers.loading":"La couche est en cours de chargement...","details.layers.error":"Erreur","details.layers.results.empty":"Aucun résultat trouvé pour la couche sélectionnée.","details.result.default.name":"Désigner l'élément {0}","details.items.title":"Détails","details.item.see.list":"Voir la liste","details.item.zoom":"Zoom à l'élément","details.item.zoom.zooming":"Zoom...","details.item.zoom.error":"Échec du zoom","details.item.zoom.zoomed":"Zoomé","details.item.previous.item":"Élément précédent","details.item.next.item":"Élément suivant","details.item.count":"{0} de {1}","details.item.loading":"Chargement des résultats...","details.item.no.data":"Aucune donnée à afficher","details.item.alert.zoom":"Zoom sur la caractéristique","details.item.alert.show.item":"Affichage du résultat {itemName}","details.item.alert.show.list":"Affichage de tous les résultats pour {layerName}","details.item.alert.defaultAltText":"Image associée au champ {alias}","details.togglehilight.title":"Basculer vers l'élément principal"}};class es extends Le{async added(){this.$iApi.panel.register({"details-layers":{screens:{"layers-screen":ee(Ce)},style:{width:"350px"},button:{tooltip:"details.layers.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>'},alertName:"details.layers.title"},"details-items":{screens:{"results-screen":ee(Qe),"item-screen":ee(Kt)},style:{width:"350px"},button:{tooltip:"details.items.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></svg>'},alertName:"details.items.title"}},{i18n:{messages:Ut}}),this._parseConfig(this.config);const e=this.$vApp.$watch(()=>this.config,s=>this._parseConfig(s));this.removed=()=>{if(e(),this.$iApi.panel.remove("details-items"),this.$iApi.panel.remove("details-layers"),this.$iApi.fixture.get("appbar")){const t=xe(this.$vApp.$pinia);t.removeButton("details-items"),t.removeButton("details-layers")}U(this.$vApp.$pinia).$reset()}}}export{es as default};
